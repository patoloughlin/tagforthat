{"count":15295,"tag":"unit-testing","questions":[{"tags":["c#","unit-testing","asp.net-mvc-3","session"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":578,"score":2,"question_id":6990019,"title":"How can I properly Mock the KeysCollection in HttpSessionStateBase?","body":"<p>I setup this mock session object from the example here: <a href=\"http://stackoverflow.com/questions/340827/how-to-moq-an-indexed-property\">How to MOQ an Indexed property</a></p>\n\n<pre><code>/// &lt;summary&gt;\n/// HTTP session mockup.\n/// &lt;/summary&gt;\ninternal sealed class HttpSessionMock : HttpSessionStateBase\n{\n    private readonly Dictionary&lt;string, object&gt; objects = new Dictionary&lt;string, object&gt;();\n\n    public override object this[string name]\n    {\n        get { return (objects.ContainsKey(name)) ? objects[name] : null; }\n        set { objects[name] = value; }\n    }\n}\n</code></pre>\n\n<p>some sample code to produce an error...</p>\n\n<pre><code>var mockSession = new HttpSessionMock();\nvar keys = mockSession.Keys;\n</code></pre>\n\n<p>Error: <strong>The method or operation is not implemented.</strong></p>\n\n<p>I need to implement the Keys property, but can't create a KeysCollection object.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>EDIT: [SOLUTION]</p>\n\n<p>I ended up changing the HttpSessionMock based on the answer given.  This is what I ended up with.  (I also added a reference to System.Linq).</p>\n\n<pre><code>internal sealed class HttpSessionMock : HttpSessionStateBase\n{\n    private readonly NameValueCollection objects = new NameValueCollection();\n\n    public override object this[string name]\n    {\n        get { return (objects.AllKeys.Contains(name)) ? objects[name] : null; }\n        set { objects[name] = (string)value; }\n    }\n\n    public override NameObjectCollectionBase.KeysCollection Keys\n    {\n        get { return objects.Keys; }\n    }\n}\n</code></pre>\n\n<p>note: this mock session will only store strings, not objects.</p>\n"},{"tags":["c++","unit-testing","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13279015,"title":"What libraries do I need to link to build a googlemock example?","body":"<p>I'm able to compile googlemock v1.6.x in VS2010 and produce both release and debug libraries. In other words, the issue I have is NOT this <a href=\"http://stackoverflow.com/questions/3141835/googlemock-and-googletest-in-visual-studio-2010\">GoogleMock and GoogleTest in Visual Studio 2010</a></p>\n\n<p>Now I'm following the example here <a href=\"http://code.google.com/p/googlemock/wiki/ForDummies\" rel=\"nofollow\">http://code.google.com/p/googlemock/wiki/ForDummies</a>, and I'm having these errors. I did link the generated *.lib files and added the correct library directory in VS2010. So what else do I need to link?</p>\n\n<pre><code>1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __thiscall std::_Container_base12::~_Container_base12(void)\" (??1_Container_base12@std@@QAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __thiscall std::_Container_base12::_Container_base12(void)\" (??0_Container_base12@std@@QAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: void __thiscall std::_Container_base12::_Orphan_all(void)\" (?_Orphan_all@_Container_base12@std@@QAEXXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(int)\" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@H@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_ios@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_iostream@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __thiscall std::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;(class std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt; *)\" (??0?$basic_iostream@DU?$char_traits@D@std@@@std@@QAE@PAV?$basic_streambuf@DU?$char_traits@D@std@@@1@@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??0?$basic_ios@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_streambuf@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::gptr(void)const \" (?gptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::setg(char *,char *,char *)\" (?setg@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::setp(char *,char *)\" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD0@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::eback(void)const \" (?eback@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::_Pninc(void)\" (?_Pninc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::setp(char *,char *,char *)\" (?setp@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXPAD00@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::pbase(void)const \" (?pbase@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::epptr(void)const \" (?epptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::pptr(void)const \" (?pptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::gbump(int)\" (?gbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: char * __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::egptr(void)const \" (?egptr@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IBEPADXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: void __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::pbump(int)\" (?pbump@?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAEXH@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"protected: __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??0?$basic_streambuf@DU?$char_traits@D@std@@@std@@IAE@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: struct std::_Iterator_base12 * * __thiscall std::_Container_base12::_Getpfirst(void)const \" (?_Getpfirst@_Container_base12@std@@QBEPAPAU_Iterator_base12@2@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: void __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::setstate(int,bool)\" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __int64 __thiscall std::ios_base::width(__int64)\" (?width@ios_base@std@@QAE_J_J@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __int64 __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::sputn(char const *,__int64)\" (?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: int __thiscall std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt;::sputc(char)\" (?sputc@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAEHD@Z) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_streambuf&lt;char,struct std::char_traits&lt;char&gt; &gt; * __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::rdbuf(void)const \" (?rdbuf@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_streambuf@DU?$char_traits@D@std@@@2@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: char __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::fill(void)const \" (?fill@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEDXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: int __thiscall std::ios_base::flags(void)const \" (?flags@ios_base@std@@QBEHXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: __int64 __thiscall std::ios_base::width(void)const \" (?width@ios_base@std@@QBE_JXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::flush(void)\" (?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; * __thiscall std::basic_ios&lt;char,struct std::char_traits&lt;char&gt; &gt;::tie(void)const \" (?tie@?$basic_ios@DU?$char_traits@D@std@@@std@@QBEPAV?$basic_ostream@DU?$char_traits@D@std@@@2@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: bool __thiscall std::ios_base::good(void)const \" (?good@ios_base@std@@QBE_NXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: void __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::_Osfx(void)\" (?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt; &amp; __thiscall std::basic_ostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::operator&lt;&lt;(unsigned int)\" (??6?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV01@I@Z) already defined in gmockd.lib(gtest-all.obj)\n1&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: class std::locale::facet * __thiscall std::locale::facet::_Decref(void)\" (?_Decref@facet@locale@std@@QAEPAV123@XZ) already defined in gmockd.lib(gmock-all.obj)\n1&gt;libcpmtd.lib(ios.obj) : error LNK2005: \"private: static void __cdecl std::ios_base::_Ios_base_dtor(class std::ios_base *)\" (?_Ios_base_dtor@ios_base@std@@CAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(ios.obj) : error LNK2005: \"public: static void __cdecl std::ios_base::_Addstd(class std::ios_base *)\" (?_Addstd@ios_base@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"private: static void __cdecl std::locale::facet::_Facet_Register(class std::locale::facet *)\" (?_Facet_Register@facet@locale@std@@CAXPAV123@@Z) already defined in msvcprtd.lib(locale0_implib.obj)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"private: static class std::locale::_Locimp * __cdecl std::locale::_Getgloballocale(void)\" (?_Getgloballocale@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"private: static class std::locale::_Locimp * __cdecl std::locale::_Init(void)\" (?_Init@locale@std@@CAPAV_Locimp@12@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"public: static void __cdecl std::_Locinfo::_Locinfo_ctor(class std::_Locinfo *,char const *)\" (?_Locinfo_ctor@_Locinfo@std@@SAXPAV12@PBD@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(locale0.obj) : error LNK2005: \"public: static void __cdecl std::_Locinfo::_Locinfo_dtor(class std::_Locinfo *)\" (?_Locinfo_dtor@_Locinfo@std@@SAXPAV12@@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(xlock.obj) : error LNK2005: \"public: __thiscall std::_Lockit::_Lockit(int)\" (??0_Lockit@std@@QAE@H@Z) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;libcpmtd.lib(xlock.obj) : error LNK2005: \"public: __thiscall std::_Lockit::~_Lockit(void)\" (??1_Lockit@std@@QAE@XZ) already defined in msvcprtd.lib(MSVCP100D.dll)\n1&gt;LIBCMTD.lib(_file.obj) : error LNK2005: ___iob_func already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(setlocal.obj) : error LNK2005: __configthreadlocale already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbgheap.obj) : error LNK2005: __free_dbg already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbgheap.obj) : error LNK2005: __CrtSetCheckCount already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(osfinfo.obj) : error LNK2005: __open_osfhandle already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dosmap.obj) : error LNK2005: __errno already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: _exit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __exit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __cexit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __amsg_exit already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(fflush.obj) : error LNK2005: _fflush already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(lconv.obj) : error LNK2005: _localeconv already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbghook.obj) : error LNK2005: __crt_debugger_hook already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(mlock.obj) : error LNK2005: __lock already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(mlock.obj) : error LNK2005: __unlock already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(winxfltr.obj) : error LNK2005: __XcptFilter already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xi_a already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xi_z already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xc_a already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(crt0init.obj) : error LNK2005: ___xc_z already defined in MSVCRTD.lib(cinitexe.obj)\n1&gt;LIBCMTD.lib(hooks.obj) : error LNK2005: \"void __cdecl terminate(void)\" (?terminate@@YAXXZ) already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(invarg.obj) : error LNK2005: __invalid_parameter already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(invarg.obj) : error LNK2005: __invoke_watson already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(sprintf.obj) : error LNK2005: _sprintf_s already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(tolower.obj) : error LNK2005: _tolower already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(strtol.obj) : error LNK2005: _strtol already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(strtoq.obj) : error LNK2005: __strtoui64 already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(dbgrptw.obj) : error LNK2005: __CrtDbgReportW already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(vsnprnc.obj) : error LNK2005: __vsnprintf_s already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(printf.obj) : error LNK2005: _printf already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LIBCMTD.lib(vprintf.obj) : error LNK2005: _vprintf already defined in MSVCRTD.lib(MSVCR100D.dll)\n1&gt;LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of other libs; use /NODEFAULTLIB:library\n1&gt;LINK : warning LNK4098: defaultlib 'LIBCMTD' conflicts with use of other libs; use /NODEFAULTLIB:library\n1&gt;LIBCMTD.lib(crt0.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup\n1&gt;C:\\Documents and Settings\\fouts\\My Documents\\Visual Studio 2010\\GMockTest\\Debug\\GMockTest.exe : fatal error LNK1120: 1 unresolved externals\n1&gt;\n</code></pre>\n"},{"tags":["ruby","unit-testing","garbage-collection","jruby"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5,"score":2,"question_id":13280233,"title":"JRuby Garbage Collection throws error when running Unit and Functional tests in Rails","body":"<p>I'm running into an issue with JRuby and Garbage Collection in my tests in a Rails app (3.2.8). When I run my unit tests, I'm just fine, but when I run both unit and functional or just functional, it tends to blow up with a strange stacktrace as below.</p>\n\n<p>I have no idea what is going on. This only started happening when I upgraded Rails and upgraded JRuby from 1.6.3 to 1.6.7.2.</p>\n\n<pre><code> /home/mbridges/.rbenv/versions/jruby-1.6.7.2/bin/jruby -I\"lib:test\" -I\"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib\" \"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb\" \"test/unit/**/*_test.rb\"\n   * WARNING: 'test: #channel_id should return the correct channel id. ' is already defined\n Loaded suite /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader\n Started\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...............................................................................\n ...........................................................\n\n Finished in 156.993 seconds.\n\n 533 tests, 1030 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications\n 0% passed\n\n 3.40 tests/s, 6.56 assertions/s\n /home/mbridges/.rbenv/versions/jruby-1.6.7.2/bin/jruby -I\"lib:test\" -I\"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib\" \"/home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb\" \"test/functional/**/*_test.rb\"\n LoadError: No such file to load -- java.lang.OutOfMemoryError: GC overhead limit exceeded\n            depend_on at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:317\n            depend_on at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:313\n   require_dependency at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225\n          eager_load! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:439\n                 each at org/jruby/RubyArray.java:1615\n          eager_load! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:438\n                 each at org/jruby/RubyArray.java:1615\n          eager_load! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:436\n             Finisher at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/finisher.rb:53\n        instance_exec at org/jruby/RubyBasicObject.java:1757\n                  run at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30\n     run_initializers at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:55\n                 each at org/jruby/RubyArray.java:1615\n     run_initializers at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54\n          initialize! at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application.rb:136\n             __send__ at org/jruby/RubyBasicObject.java:1698\n                 send at org/jruby/RubyKernel.java:2097\n       method_missing at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30\n               (root) at /home/mbridges/admin_tools/mbridges_dev/customer_service_tool/config/environment.rb:12\n              require at org/jruby/RubyKernel.java:1042\n               (root) at /home/mbridges/admin_tools/mbridges_dev/customer_service_tool/config/environment.rb:2\n              require at org/jruby/RubyKernel.java:1042\n               (root) at /home/mbridges/admin_tools/mbridges_dev/customer_service_tool/test/test_helper.rb:1\n              require at org/jruby/RubyKernel.java:1042\n             __file__ at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10\n                 each at org/jruby/RubyArray.java:1615\n             __file__ at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9\n               select at org/jruby/RubyArray.java:2395\n               (root) at /home/mbridges/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4\n rake aborted!\n Command failed with status (1): [/home/mbridges/.rbenv/versions/jruby-1.6.7...]\n\n Tasks: TOP =&gt; without_schema_dump:functionals\n (See full trace by running task with --trace)\n</code></pre>\n\n<p>The Rakefile is a bit different since we are not actually in control of the database. We have to skip migrations.</p>\n\n<p># Add your own tasks in files placed in lib/tasks ending in .rake,\n    # for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.</p>\n\n<pre><code>require File.expand_path('../config/application', __FILE__)\nrequire 'rake'\n\nCustomerService::Application.load_tasks\n\nnamespace :without_schema_dump do\n  Rake::TestTask.new(:units) do |t|\n    t.libs &lt;&lt; \"test\"\n    t.pattern = 'test/unit/**/*_test.rb'\n    t.verbose = true\n  end\n  Rake::TestTask.new(:functionals) do |t|\n    t.libs &lt;&lt; \"test\"\n    t.pattern = 'test/functional/**/*_test.rb'\n    t.verbose = true\n  end\n  task :run_tests =&gt; :environment do\n    Rake::Task['without_schema_dump:units'].invoke\n    Rake::Task['without_schema_dump:functionals'].invoke\n  end\nend\n\nRake::Task[:default].prerequisites.clear\nRake::Task[:default].actions.clear\ntask :default do\n  puts 'WARNING: Default rake overwritten because of foreign key constraints (see Rakefile)'\n  Rake::Task['without_schema_dump:run_tests'].invoke\nend\n</code></pre>\n\n<p>Help? Any help would be appreciated!</p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13279617,"title":"Mockito's ArgumentCaptor: One method name, two method definitions","body":"<p>I am trying to write a test that verifies the calls of the same method name that can accept two different parameters.  The code snippet I tried originally:</p>\n\n<pre><code>ArgumentCaptor&lt;Label&gt; labelCaptor = ArgumentCaptor.forClass(Label.class);\nMockito.verify(fakeSheet, Mockito.times(4)).addCell(labelCaptor.capture());\n\nArgumentCaptor&lt;Number&gt; numberCaptor = ArgumentCaptor.forClass(Number.class);\nMockito.verify(fakeSheet, Mockito.times(2)).addCell(numberCaptor.capture());\n</code></pre>\n\n<p>However, Mockito complains that addCell was run 6 times on the first verify.  So, I tried this:</p>\n\n<pre><code>ArgumentCaptor&lt;Label&gt; labelCaptor = ArgumentCaptor.forClass(Label.class);\nMockito.verify(fakeSheet, Mockito.times(6)).addCell(labelCaptor.capture());\n\nArgumentCaptor&lt;Number&gt; numberCaptor = ArgumentCaptor.forClass(Number.class);\nMockito.verify(fakeSheet, Mockito.times(6)).addCell(numberCaptor.capture());\n</code></pre>\n\n<p>Which runs, but gives me all 6 argument calls in both ArgumentCaptors, storing the information of all 6 objects I am expecting into both ArgumentCaptor instances.</p>\n\n<p>This feels so very wrong- sure, I could write a test with it, but the fact that my captor isn't distinguishing between the two classes feels dirty.  Is there a way to get Mockito to distinguish between the two?</p>\n"},{"tags":["android","ios","unit-testing","mobile","automated-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13167405,"title":"Automation frameworks for mobile devices","body":"<p>I am trying to use automation frameworks similar to Selenium to test native apps (both android and IOS apps). Does anyone have a list of frameworks that is suitable for the tasks. Java based frameworks are preferred but others are welcome too. I want to go over the merits of each framework and make a final determination</p>\n"},{"tags":["visual-studio","unit-testing","debugging","resharper","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13278846,"title":"Why is referenced dll getting locked while debugging under Resharper/MSTest?","body":"<p>I have an integration test for a method in assembly <code>A</code>. Assembly <code>A</code> references assembly <code>B</code> via project reference. I run them under the Visual Studio 2010 debugger in a Resharper 6.1 unit testing scenario. The testing engine is Microsoft's native MSTest.</p>\n\n<p>I get the infamous</p>\n\n<blockquote>\n  <p>The process cannot access the file <code>...\\B.dll</code> because it is being used by another process.</p>\n</blockquote>\n\n<p>message. I have verified that no other process has a handle on that file (e.g. via Sysinternal's Process Explorer).</p>\n\n<p>Running the test out of the debugger works fine. Any ideas why it happens under the debugger and what I can do to fix it?</p>\n"},{"tags":["ios","unit-testing","nsurlconnection","ocmock","nsurlconnectiondelegate"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":926,"score":1,"question_id":9908547,"title":"how to unit test a NSURLConnection Delegate?","body":"<p>How can I unit test my NSURLConnection delegate?\nI made a ConnectionDelegate class which conforms to different protocols to serve data from the web to different ViewControllers. Before I get too far I want to start writing my unit tests.\nBut I don't know how to test them as a unit without the internet connection. I would like also what I should do to treat the asynchronous callbacks.</p>\n"},{"tags":["java","unit-testing","mocking","jmockit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13259856,"title":"jmockit capturing mocked method arguments","body":"<p>I am using JMockit for unit test a data service that calls different web services and populates the database.  I am mocking each web service call, and using Expectations/results to feed the service my return data. </p>\n\n<p>I am having a problem where I have to iterate over a list of objects and call a web service each time using a different argument. I want to capture the argument so I can feed it into a CreateTestData method that will return what I want.\nThe dataSets are somewhat dependent on each other </p>\n\n<p>The test Class:</p>\n\n<pre><code>public class testDataService {  \n\n@Mocked \nprivate WebService1 webServiceClientMocked1;\n\n@Mocked \nprivate WebService2 webServiceClientMocked2;\n\n@Autowired\nprivate DataService dataService;\n\n@Test\npublic void createTestData() {\n\nfinal DataSet1 dataSet1 = CreateMyTestData.createDataSet1();\nfinal DataSet1 dataSet2 = CreateMyTestData.createDataSet2();\n\n // these are populated using other methods not shown\nfinal List&lt;String&gt; listStrings = new ArrayList&lt;String&gt;();\nfinal List&lt;String&gt; entities = new ArrayList&lt;String&gt;();  \n\nnew Expectations() {{\n        webServiceClientMocked1.getDataSet1(\"stringA\", true);\n        result = dataSet1;\n    }};\n\nnew Expectations() {{\n        webServiceClientMocked2.getDataSet2(\"stringB\");\n        result = dataSet2;\n    }};\n\nnew Expectations() {{\nfor(String s : listStrings){\n    webServiceClientMocked1.getDataSet4(s,(List&lt;String&gt;) any);\n    returns(CreateMyTestData.createDataSet4(s, entities));\n        }\n\n    }};\n\n\n//doesnt work       \n//new Expectations() {{\n//webServiceClientMocked1.findDataPerParamters(anyString, (List&lt;String&gt;) any );\n//result = CreateMyTestData.createDataSet4(capturedString, capturedListStrings);\n//}};\n\n//call data service to test\ndataService.doSaveData();\n}\n</code></pre>\n\n<p>Data Service class:</p>\n\n<pre><code>public class DataServiceImpl implements DataService\n{\n\npublic void doSaveData() {\n\n  //do a bunch of stuff\n  dataSet1 =webServiceClientMocked1.getDataSet1(\"stringA\", true);\n  //do more stuff\n  dataSet2 = webServiceClientMocked2.getDataSet2(\"stringB\");\n  Collection&lt;Stuff&gt; dataSet3 = saveToDB(dataSet2);   //save data and return a different set of data\n\n  for(Stuff data : dataSet3) {\n\n  //take dataSet3, iterate over it and call another webservice\n  dataSet4 = webServiceClientMocked1.getDataSet4(data.getStringX(), data.getListStrings());\n\n // keep doing more junk\n\n}\n}\n</code></pre>\n\n<p>Is this possible?</p>\n"},{"tags":["unit-testing","scala","comparison","scalatest"],"answer_count":4,"favorite_count":9,"up_vote_count":44,"down_vote_count":0,"view_count":6495,"score":44,"question_id":2220815,"title":"What’s the difference between ScalaTest and Scala Specs unit test frameworks?","body":"<p>Both are BDD (Behavior Driven Development) capable unit test frameworks for Scala written in Scala. And <a href=\"http://code.google.com/p/specs/\">Specs</a> <strike>is built upon</strike> may also involve the <a href=\"http://www.scalatest.org/\">ScalaTest</a> framework. But what does Specs offer ScalaTest doesn't? What are the differences?</p>\n"},{"tags":["python","unit-testing","testing","command-line-arguments","py.test"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13275738,"title":"Can't get pytest to understand command-line arguments on setups","body":"<p>So I have been trying to get pytest to run selenium tests on different environments based on some command-line argument. But it keeps throwing this error:</p>\n\n<pre><code>TypeError: setup_class() takes exactly 2 arguments (1 given)\n</code></pre>\n\n<p>It seems that it is understanding that <code>setup_class</code> takes 2 arguments, but <code>host</code> is not being passed. Here's the code for <code>setup_class</code>:</p>\n\n<pre><code>def setup_class(cls, host):\n        cls.host = host\n</code></pre>\n\n<p>And here is the conftest.py file:</p>\n\n<pre><code>def pytest_addoption(parser):\n    parser.addoption(\"--host\", action=\"store\", default='local',\n        help=\"specify the host to run tests with. local|stage\")\n\n@pytest.fixture(scope='class')\ndef host(request):\n    return request.config.option.host\n</code></pre>\n\n<p>What is strange is that <code>host</code> is being seen by the functions (so if I make a test_function and pass host as a parameter, it gets it just fine), it is just the <code>setup</code> fixtures that are not working. </p>\n\n<p>I looked around and found this, <a href=\"http://stackoverflow.com/questions/11358437/pytest-use-funcargs-inside-setup-module\">pytest - use funcargs inside setup_module</a> but that doesn't seem to be working (and it is outdated since 2.3. </p>\n\n<p>Does anyone know what I'm doing wrong? Using py.test 2.3.2. </p>\n\n<p>Thanks</p>\n"},{"tags":["c++","unit-testing","googlemock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13273924,"title":"Mocking internal calls of a function being tested using googlemock","body":"<p>I am new to Google Mock and based on my understanding of the documentation and online resources, I could not identify a solution to my problem:</p>\n\n<p>I have the following classes:</p>\n\n<pre><code>class A\n{\n    public:\n        A() { }\n        int fun1()\n        {\n            //Some code\n            B b;\n            x = b.fun2();\n            //Some other code\n        }\n};\nclass B\n{\n    public:\n        B() { }\n        int fun2()\n        {\n            //Some code\n            y = C::fun3();\n            //Some code\n        }\n};\nclass C\n{\n    public:\n        static int fun3()\n        {\n            //Read a file and provide success if a certain pattern is found\n        }\n};\n</code></pre>\n\n<p>Now I am trying to write a Google test for A::fun1(). But because of the structure of the code (all the calls are through objects and I do not have a base class using which I can initialize a mock etc., I am not able to mock this successfully. </p>\n\n<p>Can someone help me understand if this is mockable with Google Mock in its current form? Please note that I am not allowed to change the original source code. </p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13274799,"title":"Unit-test a method wrapper","body":"<p>I've got a set of actions which share some base checks. My code looks like this:</p>\n\n<pre><code>def is_valid(param): …some pretty complex things unit-tested on their own…\n\nclass BaseAction(object):\n    def run(self, param):\n        if not is_valid(param):\n            raise ValueError(…)\n\n        return self.do_run(param)\n\nclass Jump(BaseAction):\n    def do_run(self, param): …\n\nclass Sing(BaseAction):\n    def do_run(self, param): …\n</code></pre>\n\n<p>How should I unit-test the fact that BaseAction.run performs validation?</p>\n\n<p>I think I could unit-test Jump.run and Sing.run, but then to do it properly I'd need to write tests for each subclass of BaseAction, potentially quite a lot of cases. Also this means coupling test for subclasses with a test for base class' method.</p>\n"},{"tags":["spring","unit-testing","eclipselink","dao","hsqldb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13274548,"title":"Testing DAOs with hsqldb, eclipselink and spring","body":"<p>I'm a newbie at Spring data &amp; transactions as well as at unit testing... I got from a Spring training a working example of Spring DAO testing using a on the flow-generated HSQL database and Hibernate as JPA.\nIn my case, I'm using EclipseLink so I just wanted to adapt the example to this. Unfortunately I cannot make it work and I really don't see anymore how to fix it that's why I need your help.</p>\n\n<p>Here is my Test class :</p>\n\n<pre><code>public class BasicDAOTests {\n\n  private BasicDAO&lt;Projet&gt; basicDAO;//my BasicDAO is generic so I decided to test it on the type \"Projet\"\n\n  private PlatformTransactionManager transactionManager;\n\n  private TransactionStatus transactionStatus;\n\n@Before\n  public void setUp() throws Exception {\n    EntityManagerFactory entityManagerFactory = createEntityManageFactory();\n    basicDAO = new BasicDAO&lt;Projet&gt;(Projet.class);\n    basicDAO.setEmf(entityManagerFactory);\n    // begin a transaction\n    transactionManager = new JpaTransactionManager(entityManagerFactory);\n    transactionStatus = transactionManager.getTransaction(new DefaultTransactionDefinition());\n\n }\n\n private EntityManagerFactory createEntityManageFactory() {\n    // create a FactoryBean to help create a JPA EntityManagerFactory\n    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n    factoryBean.setJpaVendorAdapter(new EclipseLinkJpaVendorAdapter());\n    factoryBean.setDataSource(createTestDataSource());\n\n    /*Class[] annotatedClasses = new Class[] { Restaurant.class };\n    factoryBean..setAnnotatedClasses(annotatedClasses);\n    factoryBean.setHibernateProperties(createHibernateProperties());*/\n    // initialize according to the Spring InitializingBean contract\n    factoryBean.afterPropertiesSet();\n    // get the created session factory\n    return (EntityManagerFactory)factoryBean.getObject();\n}\n\n\n@SuppressWarnings(\"deprecation\")\n@Test\npublic void testFindProjectById() {\n    Projet project = basicDAO.findById(1);\n    assertNotNull(\"the project should never be null\", project);\n    assertEquals(\"the project id is wrong\", \"1\", project.getIdProjet());\n    assertEquals(\"the name is wrong\", \"Porc demain\", project.getNomProjet());\n    assertEquals(\"the data is wrong\", new Date(\"2012-07-30\"), project.getDtCreation());\n}\n\n@After\npublic void tearDown() throws Exception {\n    // rollback the transaction to avoid corrupting other tests\n    transactionManager.rollback(transactionStatus);\n}\n\n\nprivate DataSource createTestDataSource() {\n    return new EmbeddedDatabaseBuilder()\n    .setName(\"meansTest\")\n    .addScript(\"/folder/schema.sql\")\n    .addScript(\"/folder/test-data.sql\")\n    .build();\n}\n\n}\n</code></pre>\n\n<p>In all cases it just seems that it cannot create a proper EntityManagerFactory bean so I guess either I'm using the wrong Spring classes either I don't set their properties correctly... Do you have any suggestions to correct it?</p>\n\n<p>Thanks in advance for your help!</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13274510,"title":"persisting variable value in unit testing in visual studio 2010","body":"<p>I'm just getting started doing some unit testing in vs2010.  I have a test method that sets a private int variable and then a couple of other test methods that attempt to use that variable.  The variable does correctly get set when the first test executes but when it then moves to the next test the variable is reset to 0.  How can I keep the value of that variable for all tests?  Here's some example code.</p>\n\n<pre><code>public MyClassFixture{\n  private Controller controller;\n  private int id;\n\n  public MyClassFixture(){\n    controller = new Controller();\n  }\n\n  [TestMethod]\n  public void Should_Generate_New_Id(){\n    id = controller.GenerateNewId();\n    Assert.IsTrue(id &gt; 0);\n  }\n\n  [TestMethod]\n  public void Should_Get_New_Record(){\n    var record = controller.GetNewRecord(id);\n    Assert.IsNotNull(record);\n  }\n\n}\n</code></pre>\n"},{"tags":["java","unit-testing","junit"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":6456,"score":6,"question_id":330901,"title":"Is running tests with JUnit 3.x vs JUnit 4.x still a best practice?","body":"<p>I haven't looked at this in a while, but if I recall correctly both ant and maven still rely on JUnit 3 for unit tests (as of maven 2.09 the default POM file still has JUnit 3.81). </p>\n\n<p>Does it still make sense to stick to JUnit 3 instead of using the latest and greatest? Any good reason I might be missing?</p>\n"},{"tags":["unit-testing","performance","mstest"],"answer_count":6,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":776,"score":8,"question_id":3824762,"title":"How slow is too slow for unit tests?","body":"<p>Michael Feathers, in <em>Working Effectively With Legacy Code</em>, on pages 13-14 mentions:</p>\n\n<blockquote>\n  <p>A unit test that takes 1/10th of a\n  second to run is a slow unit test...\n  If [unit tests] don't run fast, they\n  aren't unit tests.</p>\n</blockquote>\n\n<p>I can understand why 1/10th a second is too slow if one has 30,000 tests, as it would take close to an hour to run. However, does this mean 1/11th of a second is any better? No, not really (as it's only 5 minutes faster). So a hard fast rule probably isn't perfect.</p>\n\n<p>Thus when considering how slow is too slow for a unit tests, perhaps I should rephrase the question. <strong>How long is too long for a developer to wait for the unit test suite to complete?</strong></p>\n\n<p>To give an example of test speeds. Take a look at several MSTest unit test duration timings:</p>\n\n<pre><code>0.2637638 seconds\n0.0589954\n0.0272193\n0.0209824\n0.0199389\n0.0088322\n0.0033815\n0.0028137\n0.0027601\n0.0008775\n0.0008171\n0.0007351\n0.0007147\n0.0005898\n0.0004937\n0.0004624\n0.00045\n0.0004397\n0.0004385\n0.0004376\n0.0003329\n</code></pre>\n\n<p>The average for all 21 of these unit tests comes to 0.019785 seconds. Note the slowest test is due to it using Microsoft Moles to mock/isolate the file system. </p>\n\n<p>So with this example, if my unit test suite grows to 10,000 tests, it <em>could</em> take over 3 minutes to run. </p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":534,"score":1,"question_id":8921064,"title":"Unit test project not building from build server","body":"<p>My VS2010 solution has a test project in it.  The unit tests themselves reference the following namespace:</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\n</code></pre>\n\n<p>which is accessed via the following assembly on my PC:</p>\n\n<pre><code>Assembly Microsoft.VisualStudio.QualityTools.UnitTestFramework\n    C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\\n    PublicAssemblies\\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll\n</code></pre>\n\n<p>When I build the solution on my PC I have no issues; the tests will build and run okay.</p>\n\n<p>We have an intranet page which we can use to kick off builds on a build server.  When I build via this page, the build fails with the following errors:</p>\n\n<pre><code>Generator.cs(3,17): error CS0234: The type or namespace name 'VisualStudio' \ndoes not exist in the namespace 'Microsoft' (are you missing an assembly\nreference?)\n</code></pre>\n\n<p>The obvious problem would be that the <code>Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll</code> mentioned above is not present on the build server.  I thought this was would be installed with VS2010, and since the projects in my solution build .NET 4.0 targets, I would expect this to be installed on the build server.</p>\n\n<p>What is the easiest way to resolve this?  The build server is out of my jurisdiction and I don't particular want to log a job to get new libraries installed on to it.</p>\n"},{"tags":["python","django","unit-testing","selenium","webdriver"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2031,"score":0,"question_id":9103837,"title":"How do I create a Selenium Webdriver test to verify an element is not present?","body":"<p>I am creating unit tests for my Django app in Selenium Webdriver.</p>\n\n<p>I have an AJAX method that deletes a Topic from the database.\nI'm trying to figure out how to verify that the deleted Topic is no longer present on the page.</p>\n\n<p>I am trying to catch the Exception that the should be generated when Webdriver can't find an element:\nselenium.common.exceptions.NoSuchAttributeException  </p>\n\n<p>Instead I see an error:  </p>\n\n<pre><code>*** URLError: &lt;urlopen error timed out&gt;\n</code></pre>\n\n<p>Here is how I have setup the tests:  </p>\n\n<pre><code>from selenium import webdriver\nfrom django.utils import unittest  \n\nclass TestAuthentication(unittest.TestCase):    \n    scheme = 'http'    \n    host = 'localhost'    \n    port = '4444'    \n\n\n    def setUp(self):    \n        self._driver = webdriver.Firefox()    \n        self._driver.implicitly_wait(10)    \n\n    def login_as_Kallie(self):    \n        # Kallie has manual login    \n        self._driver.get('http://localhost:8000/account/signin/')    \n        user = self._driver.find_element_by_id('id_username')    \n        user.send_keys(\"Kallie\")    \n        password = self._driver.find_element_by_id('id_password')    \n        password.send_keys('*********')    \n        submit = self._driver.find_element_by_id('blogin')    \n        submit.click()    \n\n    def test_Kallie_can_delete_topic(self):    \n        self.login_as_Kallie()    \n        self._driver.find_element_by_link_text(\"Topic to delete\").click()    \n        self._driver.find_element_by_xpath(\"/html/body/div/div[4]/div/div/div[2]/div/table/tbody/tr/td[2]/div/div[3]/span[5]/a\").click()    \n        self._driver.find_element_by_class_name('dialog-yes').click()    \n        self._driver.get(\"http://localhost:8000/questions/\")    \n        # this is the Python exception to catch: selenium.common.exceptions.NoSuchAttributeException    \n        self.assertRaises('selenium.common.exceptions.NoSuchAttributeException', self._driver.find_element_by_link_text(\"Topic to delete\"))    \n\n    def tearDown(self):    \n        self._driver.quit()    \n</code></pre>\n\n<p>How can I test that a Element of the page is absent?   </p>\n"},{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":48,"score":4,"question_id":13270860,"title":"visual studio 2010 c# unit tests","body":"<p>Trying to create unit tests for my methods and can't seem to get the configuration right.\nI go New Test -> Unit Test Wizard -> Pick my method -> fill in test method values but I always get Assert.Inconclusive failed. Verify the correctness of this test method.</p>\n\n<p>Here is a sample method:</p>\n\n<pre><code>namespace ConsoleApplication\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n        }\n\n        public int Mult(int a, int b)\n        {\n            return a * b;\n        }\n    }\n}\n</code></pre>\n\n<p>and the test method:</p>\n\n<pre><code>[TestMethod()]\n        public void MultTest()\n        {\n            Program target = new Program(); // TODO: Initialize to an appropriate value\n            int a = 4; // TODO: Initialize to an appropriate value\n            int b = 5; // TODO: Initialize to an appropriate value\n            int expected = 20; // TODO: Initialize to an appropriate value\n            int actual;\n            actual = target.Mult(a, b);\n            Assert.AreEqual(expected, actual);\n            Assert.Inconclusive(\"Verify the correctness of this test method.\");\n        }\n</code></pre>\n\n<p>Seems straight forward enough, but am I missing something trivial?</p>\n"},{"tags":["unit-testing","mocking","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1657,"score":4,"question_id":1285316,"title":"Moq Match and Verify Array / IEnumerable parameters in method setup","body":"<p>I'm having problems verifying Ienumerable / Array type parameters when setting up expectation for methods call on my mock objects.  I think since it's matching different references it doesn't consider it a match.  I just want it to match the contents of the array, sometimes I don't even care about the order.</p>\n\n<pre><code>mockDataWriter.Setup(m =&gt; m.UpdateFiles(new string[]{\"file2.txt\",\"file1.txt\"} ) );\n</code></pre>\n\n<p>Ideally I want something that works like the following, I could probably write an extension method to do this.</p>\n\n<pre><code>It.Contains(new string[]{\"file2.txt\",\"file1.txt\"})\n\nIt.ContainsInOrder(new string[]{\"file2.txt\",\"file1.txt\"})\n</code></pre>\n\n<p>The only built in way I can match these right now is with the predicate feature, but it seems this problem is common enough it should be built in.</p>\n\n<p>Is there a built in way to match these types, or extension library I can use.  If not I'll just write an extension method or something.</p>\n\n<p>Thanks </p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13267723,"title":"NUnit - common assertions after each test","body":"<p>I'm writing service tests with database(without mocks).</p>\n\n<p>I have a new requirement to perform common database \"health\" checks* after each test in our test suits.</p>\n\n<p>The question is: where can I put this kind of tests/checks?</p>\n\n<p>At first I thought about TearDown, but AFAIK it was supposed(designed) to perform cleanup not assertions.\nWould it be ok to put it there? </p>\n\n<p>I'm not doing anything on teardown right now (and that is probably not going to change) - the database is cleaned on SetUp and each and every test is responsible for preparing the environment for itself.</p>\n\n<p>*- the database design is inherited from another company and unfortunately its very poor - we've discovered inconsistencies in data and that's why we need to perform 'health checks' to identify places where they occur</p>\n"},{"tags":["c#","unit-testing","mocking","moq","stub"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13267799,"title":"What to use mock parameter or instance parameter in test method?","body":"<p>What is the best practice to pass object parameter in the test method?\nWhat to use in this case?(Mocks, Stubs or create instance of object and fill it)</p>\n\n<p>For example:</p>\n\n<pre><code>[Test]\npublic void LoadContentsFor_ValidUser_ReturnsEmptyList()\n{\n    var user = new User {Id = 1, FirstName = \"Test\"};\n    var contents = this.contentPresentationService.LoadContentsFor(user);\n    Assert.IsTrue(contents.Count == 0);\n}\n</code></pre>\n\n<p>Or using mocks:</p>\n\n<pre><code>[Test]\npublic void LoadContentsFor_ValidUser_ReturnsEmptyList()\n{\n    var user = new Mock&lt;User&gt;();\n    user.Setup(x =&gt; x.Id).Returns(1);\n    user.Setup(x =&gt; x.FirstName).Returns(\"Test\");\n    var contents = this.contentPresentationService.LoadContentsFor(user.Object);\n    Assert.IsTrue(contents.Count == 0);\n}\n</code></pre>\n"},{"tags":["php","unit-testing","phpt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13269326,"title":".phpt: Check exit code?","body":"<p>We're using <a href=\"http://qa.php.net/phpt_details.php\" rel=\"nofollow\">.phpt</a> to test our PHP code.</p>\n\n<p>To verify its behavior, I need to check the <strong>exit code of a CLI tool</strong> that uses <code>exit()</code> calls.</p>\n\n<p>How can I do that? I don't see such a section in the <a href=\"http://qa.php.net/phpt_details.php\" rel=\"nofollow\">phpt spec</a>. The <code>php-src</code> unit tests also don't have an example</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","nunit","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":207,"score":0,"question_id":10401409,"title":"using moq to populate httpcontext.request","body":"<p>I am using the <a href=\"http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx\" rel=\"nofollow\">hanselman tutorial</a> to use Moq to create unit tests for methods that take httpcontext as input parameter. </p>\n\n<pre><code>public static class MvcMockHelpers\n{\n\n    public static HttpContextBase FakeHttpContext()\n    {\n        var context = new Mock&lt;HttpContextBase&gt;();\n        var request = new Mock&lt;HttpRequestBase&gt;();\n        var response = new Mock&lt;HttpResponseBase&gt;();\n        var session = new Mock&lt;HttpSessionStateBase&gt;();\n        var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n        context.Setup(ctx =&gt; ctx.Request).Returns(request.Object);\n        context.Setup(ctx =&gt; ctx.Response).Returns(response.Object);\n        context.Setup(ctx =&gt; ctx.Session).Returns(session.Object);\n        context.Setup(ctx =&gt; ctx.Server).Returns(server.Object);\n\n        return context.Object;\n    }\n\n    public static HttpContextBase FakeHttpContext(string url)\n    {\n        var context = FakeHttpContext();\n        context.Request.SetupRequestUrl(url);  &lt;---- error here\n        return context;\n    } \n\n\n\n}\n</code></pre>\n\n<p>I am getting the following error on <strong>context.Request.SetupRequestUrl(url);</strong></p>\n\n<p><em>Error  1   'System.Web.HttpRequestBase' does not contain a definition for 'SetupRequestUrl' and no extension method 'SetupRequestUrl' accepting a first argument of type 'System.Web.HttpRequestBase' could be found (are you missing a using directive or an assembly reference?)</em></p>\n\n<p>Please help. </p>\n\n<p>I am trying to find a very simple easy to follow tutorial on setting up httpcontext request object and pass into method with context input parameter and be able to create unit test but all the examples in google either do not work or are complicated. please help.</p>\n"},{"tags":["javascript","unit-testing","js-test-driver","headless-browser"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":296,"score":2,"question_id":11144537,"title":"Run Headless JsTestDriver?","body":"<p>Is there a way to use jsTestDriver in a headless state where it loads the browsers but does so headlessly (you can't see the browser) or it loads them minimized?</p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","moq","mspec"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":789,"score":3,"question_id":7596426,"title":"How to test HTTP status code set by an ASP.NET MVC action with MSpec","body":"<p>I have the following controller:</p>\n\n<pre><code>public sealed class SomeController : Controller\n{\n    public ActionResult PageNotFound()\n    {\n        Response.StatusCode = 404;\n\n        return View(\"404\");\n    }\n}\n</code></pre>\n\n<p>I have created an MSpec specification:</p>\n\n<pre><code>[Subject(typeof (SomeController))]\npublic class when_invalid_page_is_requested : SomeControllerSpec\n{\n    Because of = () =&gt; result = Controller.PageNotFound();\n\n    It should_set_status_code_to_404 = \n        () =&gt; Controller.Response.StatusCode.ShouldEqual(404);\n}\n\npublic abstract class SomeControllerSpec\n{\n    protected static HomeController Controller;\n\n    Establish context = () =&gt; { Controller = new SomeController(); };\n}\n</code></pre>\n\n<p>But because of how I instantiate the controller, HttpContext is null.\nWhat would be the best way to test status code set by the <code>PageNotFound</code> action?</p>\n\n<p><strong>EDIT: Posted an answer below</strong></p>\n"},{"tags":[".net","xml","unit-testing","nunit","xmlunit"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":362,"score":3,"question_id":5897481,"title":".net Xml comparer for UnitTesting","body":"<p>I have a few unit tests where I need to make sure that XML generated by a method contains the same elements/values as an expected Xml document.</p>\n\n<p>I used <a href=\"http://xmlunit.sourceforge.net/\" rel=\"nofollow\">xmlunit</a> in Java, and although they have a .net version it doesn't seem to support namespaces. Are there any alternatives within .net for doing this?</p>\n\n<p>As long as I can just compare 2 Xml strings and get a true/false result to tell me if they match as far as the data contained is concerned I am happy...</p>\n"},{"tags":["c#","unit-testing","enterprise-library"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":15310,"score":4,"question_id":4030436,"title":"Activation error occured while trying to get instance of type Database, key \"\" <-- blank","body":"<p>I'm trying out the Enterprise Library 5.0 and was doing some unit-tests on my BL, do I need to have a app.config on the DL or on the Test project?</p>\n\n<p>note: I already have the configuration settings on my web.config on my web project.</p>\n\n<p><strong>how I use the DAAB:</strong></p>\n\n<pre><code>private static Database db = DatabaseFactory.CreateDatabase();\n\ndb.ExecuteNonQuery(\"spInsertSalesman\", salesman.Fullname);\n</code></pre>\n\n<p><strong>my app.config on DL:</strong></p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;configSections&gt;\n        &lt;section name=\"dataConfiguration\" type=\"Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" requirePermission=\"false\" /&gt;\n    &lt;/configSections&gt;\n    &lt;dataConfiguration defaultDatabase=\"DBTEST\" /&gt;\n    &lt;connectionStrings&gt;\n        &lt;add name=\"DBTEST\" connectionString=\"Data Source=[dbsource];Initial Catalog=[dbname];User Id=sa;Password=password;\"\n            providerName=\"System.Data.SqlClient\" /&gt;\n    &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","junit","naming-conventions"],"answer_count":8,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":2437,"score":9,"question_id":3146821,"title":"Naming convention JUnit suffix or prefix Test","body":"<p>Class under test MyClass.java\nJUnit test case name alternatives: </p>\n\n<pre><code>TestMyClass.java\nMyClassTest.java\n</code></pre>\n\n<p><a href=\"http://moreunit.sourceforge.net\">http://moreunit.sourceforge.net</a> seems to use \"Test\" as prefix default but I have seen both uses. Both seems to be recognized when running the entire project as unit test in eclipse as it is the annotation inside classes that are parsed for @Test. I guess maven does the same thing. </p>\n\n<p>Which is preferred? </p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13265532,"title":"How to skip tests containing certain text in their docstring?","body":"<p>I would like to store hints inside each test method's docstring, so the testloader can include or exclude the test based on those hints. Something like this:</p>\n\n<pre><code>def test_login_with_valid_credentials(self):\n    '''#functional #security #nondestructive'''\n    # code goes here\n</code></pre>\n\n<p>Then the testloader would discover all tests containing the substring '#functional' or whatever.</p>\n\n<p>I'm trying to avoid using decorators for this purpose, because I think using docstrings would be more flexible. (Maybe I'm wrong.)</p>\n\n<p>Being new to nose, I would appreciate any help. Thanks!</p>\n"},{"tags":["visual-studio-2010","unit-testing","testing","crash","bug"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13261961,"title":"Strange Visual Studio 2010 crash in very simple project containing unit tests","body":"<p>I've found surprisingly simple way to crash <strong>Visual Studio 2010</strong> using auto generating <em>Unit Tests</em>. </p>\n\n<p>This is the way I made it: <code>File</code> => <code>New Project</code> => <code>Class Library</code> <em>[.NET Framework 4]</em>. <br />\nThis is complete source code of the program (15 lines of <strong>C#</strong> code):</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>namespace UnitTestsCrash\n{\n    class ClassA&lt;T&gt;\n    {\n        private T a;\n    }\n\n    class ClassB : ClassA&lt;ClassB&gt;\n    {\n        private void FooA()\n        {\n            return;\n        }\n    }\n}\n</code></pre>\n\n<p><code>Build it</code> and than click <code>Right Mouse Button</code> inside <code>ClassB</code> body => <code>Create Unit Tests...</code> => <code>OK</code> => <code>Create</code> => <code>Yes</code>. The result is <em>Visual Studio <strong>crashing</em></strong> (<a href=\"http://oi50.tinypic.com/2z4bade.jpg\" rel=\"nofollow\">screenshot</a>)!</p>\n\n<p>I discovered this odd crash in more complex solution. I extracted this problem from bigger project and simplified to above sample. <br />I'm not quite sure if it's <em>Visual Studio 2010</em> fault or mine. Please verify and explain if it's my fault. </p>\n\n<p>I need to test big class which inherits in similar manner as <code>ClassB</code> but I can't do it in automated way. </p>\n"},{"tags":["java","unit-testing","ftp","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13243039,"title":"How to Make MockFTPServer Throw an Exception","body":"<p>I have some code that connects to an FTP server and I'm trying to write test cases for that code. In doing that, I've been trying to use MockFtpServer to mock out the FTP server so I can test my interactions.</p>\n\n<p><a href=\"http://mockftpserver.sourceforge.net/index.html\" rel=\"nofollow\">http://mockftpserver.sourceforge.net/index.html</a></p>\n\n<p>In one particular case, I'm trying to test my \"connect\" method with a test case that looks something like this:</p>\n\n<pre><code>public class FTPServiceTestWithMock {\n\n    private FakeFtpServer server;\n    private FTPService service;\n    private int controllerPort;\n\n    @Before\n    public void setup() {\n        server = new FakeFtpServer();\n        server.setServerControlPort(0); // Use free port - will look this up later\n\n        FileSystem fileSystem = new WindowsFakeFileSystem();\n        fileSystem.add(new DirectoryEntry(\"C:\\\\temp\"));\n        fileSystem.add(new FileEntry(\"C:\\\\temp\\\\sample.txt\", \"abc123\"));\n        server.setFileSystem(fileSystem);\n        server.addUserAccount(new UserAccount(\"user\", \"pass\", \"C:\\\\\"));\n        server.start();\n        controllerPort = server.getServerControlPort();\n\n        service = new FTPService();\n    }\n\n    @After\n    public void teardown() {\n        server.stop();\n    }\n\n    @Test\n    public void testConnectToFTPServer() throws Exception {\n        String testDomain = \"testdomain.org\";\n        String expectedStatus = \n            \"Connected to \" + testDomain + \" on port \" + controllerPort;\n\n        assertEquals(\n            expectedStatus, \n            service.connectToFTPServer(testDomain, controllerPort)\n        );\n    }\n\n}\n</code></pre>\n\n<p>This code works perfectly - it sets up a fake FTP server and puts my code under test to make sure it can connect and returns an appropriate message.</p>\n\n<p>However, the API spec for my FTP client shows that exceptions can be thrown when I try to connect. </p>\n\n<p><a href=\"http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#connect%28java.lang.String%29\" rel=\"nofollow\">http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#connect%28java.lang.String%29</a></p>\n\n<p>I would like to write a second test case that tests for an exception being thrown, which is likely should the domain name be incorrect or the FTP server is down. I want to ensure that, in such a case, my software responds appropriately. I found information in the Mock FTP Server site about \"custom command handlers\", but I can't figure out how to make one throw an exception. This is what I have:</p>\n\n<pre><code>public void testConnectToFTPServerConnectionFailed() throws Exception {\n    ConnectCommandHandler connectHandler = new ConnectCommandHandler();\n    connectHandler.handleCommand(/* Don't know what to put here */);\n    server.setCommandHandler(CommandNames.CONNECT, connectHandler);\n}\n</code></pre>\n\n<p>The handleCommand method requires a Command object and a Session object, but I can't figure out, from the documentation, how to get valid objects to send in. Does anyone know how to go about this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing"],"answer_count":8,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2262,"score":3,"question_id":4095319,"title":"Unittest tests order","body":"<p>How do I be sure of the unittest methods order? Is the alphabetical or numeric prefixes the proper way?</p>\n\n<pre><code>class TestFoo(TestCase):\n    def test_1(self):\n        ...\n    def test_2(self):\n        ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class TestFoo(TestCase):\n    def test_a(self):\n        ...\n    def test_b(self):\n        ...\n</code></pre>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":6,"favorite_count":23,"up_vote_count":30,"down_vote_count":0,"view_count":1862,"score":30,"question_id":1753897,"title":"What approach(es) have you used for lightweight Python unit-tests on App Engine?","body":"<p>I'm about to embark on some large Python-based App Engine projects, and I think I should check with Stack Overflow's \"wisdom of crowds\" before committing to a unit-testing strategy.  I have an existing unit-testing framework (based on <a href=\"http://docs.python.org/library/unittest.html?highlight=unittest#module-unittest\" rel=\"nofollow\">unittest</a> with custom runners and extensions) that I want to use, so anything \"heavy-weight\"/\"intrusive\" such as <a href=\"http://code.google.com/p/python-nose/\" rel=\"nofollow\">nose</a>, <a href=\"http://pythonpaste.org/webtest/\" rel=\"nofollow\">webtest</a>, or  <a href=\"http://code.google.com/p/gaeunit/\" rel=\"nofollow\">gaeunit</a> doesn't seem appropriate.  The crucial unit tests in my worldview are extremely lightweight and fast ones, ones that run in an extremely short time, so I can keep running them over and over all the time without breaking my development rhythm (e.g., for a different project, I get 97% or so coverage for a 20K-lines project with several dozens of super-fast tests that take 5-7 seconds, elapsed time, for a typical run, overall -- that's what I consider a decent suite of small, fast unit-tests).  I'll have richer/heavier tests as well of course, all the way to integration tests with selenium or windmill, that's <strong>not</strong> what I'm asking about;-) -- my focus in this question (and in most of my development endeavors;-) is on the small, lightweight unit-tests that lightly and super-rapidly cover my code, not on the deeper ones.</p>\n\n<p>So I think what I need is essentially a set of small, very lightweight simulations of the various key App Engine subsystems -- data store, memcache, request/response objects and calls to webapp handlers, user handling, mail, &amp;c, roughly in this order of priority.  I haven't found exactly what I'm looking for, so it seems to me that I should either rely on <a href=\"http://code.google.com/p/pymox/\" rel=\"nofollow\">mox</a>, as I've done often in the past, which basically means mocking each subsystem used in a given test and setting up all expectations &amp;c (strong, but lots of work each time, and very sensitive to the tested-code's internals, i.e. very \"white-box\"y), or rolling my own simulation of each subsystem (and doing asserts on the simulated subsystems' states as part of the unit tests). The latters seems feasible, given GAE's Python-side strong \"stubs\" architecture... but I can't believe I need to roll my own, i.e., that nobody's already written such simple-minded simulators!-)  E.g., for the datastore, it looks like what I need is more or less the \"datastore on file\" stub that's already part of the SDK, plus a way to mark it readonly and easy-to-use accessors for assertions about the datastore's state; and so forth, subsystem by subsystem -- each seems to need \"just a bit more\" than what's already in the SDK, \"perched on top\" of the existing \"stubs\" architecture.</p>\n\n<p>So, before diving in and spending a day or two of precious development time \"rolling my own\" simulations of GAE subsystems for unit testing purposes, I thought I'd double check with the SO crowd and see what y'all think of this... or, if there's already some existing open source set of such simulators that I can simply reuse (or minimally tweak!-), and which I've just failed to spot in my searching!-)</p>\n\n<p><strong>Edit</strong>: to clarify, if I do roll my own, I do plan to leverage the SDK-supplied stubs where feasible; but for example there's no stub for a datastore that gets initially read in from a file but then not saved at the end, so I need to subclass and tweak the existing one (which also doesn't offer particularly convenient ways to do asserts on its state -- same for the mail service stub, etc). That's what I mean by \"rolling my own\" -- not \"rewriting from scratch\"!-)</p>\n\n<p><strong>Edit</strong>: \"why not GAEUnit\" -- GAEUnit is nice for its own use cases, but running dev_appserver and seeing results in my browser (or even via urllib.urlopen) is definitely not what I'm after -- I want to use a fully automated setup, suitable for running within an existing test-running framework which is based on extending unittest, and no HTTP in the way (said framework defines a \"fast\" test as one that among other thing does no sockets and minimal disk I/O -- we simulate or mock these -- so via gaeunit I could do no better than \"medium\" tests) + no convenient way to prepopulate datastore for each test (and no OO structure to help customize things).</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","testing","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":16,"score":2,"question_id":13242587,"title":"Error between validate method in Model and Test:Unit assertion results","body":"<p>Ruby Noob - I've searched SO, read the <a href=\"http://guides.rubyonrails.org/testing.html\" rel=\"nofollow\">Rails Guide on Testing</a>, and watched a <a href=\"http://railscasts.com/episodes/275-how-i-test\" rel=\"nofollow\">RailsCast</a> without luck. </p>\n\n<p>I'm unable to reconcile method associations with tests I've written. Currently (code below), both tests, one checking for presence of name and one checking for presence of email, pass without failure or error -- ok, seems good. </p>\n\n<p>If I remove both validates statements from the model, both tests fail -- also, makes sense. </p>\n\n<p>However, if I remove only <strong>ONE</strong> of either </p>\n\n<pre><code>validates :name, :presence =&gt; true\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre><code>validates :email, :presence =&gt; true\n</code></pre>\n\n<p>from the model, <strong>BOTH</strong> tests pass without failure. This result does not make sense to me. Have I created faulty tests? </p>\n\n<hr>\n\n<p>user.rb model:      </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessible :email, :name \n\n  has_many :connections\n\n  validates :name, :presence =&gt; true\n  validates :email, :presence =&gt; true\nend\n</code></pre>\n\n<p>test/unit/user_test.rb</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n  test \"a user should have a name\" do\n    user = User.new\n    assert !user.save\n  end\n\n  test \"a user should have an email\" do\n    user = User.new\n    assert !user.save\n  end\nend\n</code></pre>\n"},{"tags":["unit-testing","maven","command","pom.xml"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13259395,"title":"maven profile argument for skipping unit test execution","body":"<p>I have some unit tests in my application. A I need to skip prat of them.\nIn pom.xml I have defined if test has specific class - then skip it.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profile&gt;\n  &lt;id&gt;skip-unit-tests&lt;/id&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.11&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;excludes&gt;\n            &lt;exclude&gt;**/*.class&lt;/exclude&gt;\n          &lt;/excludes&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/profile&gt;\n</code></pre>\n\n<p>So, if I do <code>package -Pskip-unit-tests</code> everything works, but if I do <code>clean compile -Pskip-unit-tests test</code> then maven executes them. What is wrong with last command?</p>\n"},{"tags":["unit-testing","neo4j"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13257806,"title":"[Neo4j] Impermanet database stored in filesystem","body":"<p>there's a problem with my Neo4j-Test-Setup-Environment and the org.neo4j.test.ImpermanentGraphDatabase...\nI have a class, TestGraphPopulator, for setting up some dummy data for my unit tests.</p>\n\n<p>Because of adding, delete, update operations in my tests, I populate the graph in every test case in init-method annotated via @Before.</p>\n\n<p>But there is some really strange behavior sometimes.\nSome of my test fail, because there are more or less entities as expected. In a second, or third, etc. run, everything is fine, ..or not.</p>\n\n<p>AND, in my /target directory of my project, there is a folder \\target\\test-data\\impermanent-db with all the Neo4J database data...</p>\n\n<p>I'm not sure of what my problem results of, but should NOT ImpermanentGraphDatabase only reside in memory??</p>\n\n<p>For me, it looks like a bug, could anyone share some experience?? This seems very important to me, and maybe others...</p>\n\n<p>Thanks a lot in advance!\nMarkus</p>\n\n<p>P.S.:\nNeo4J 1.8, Spring Data Neo4J 2.1 ..</p>\n"},{"tags":["unit-testing","maven"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13257987,"title":"Run maven test not in default src/test/java folder","body":"<p>I have a project containing <code>pom.xml</code> and some <code>JUnit</code> tests. Both <code>pom.xml</code> and unit tests are corrects. But problem is that tests are not in src/test/java folder (I cannot use this folder). Is it possible to tell maven to execute tests from another source folder (which is also in this project)?</p>\n"},{"tags":["ios","osx","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13241285,"title":"STAssertEqualObjects can I check for two accepted values?","body":"<p>I'd like to unit test an <code>NSString</code> for it's value, but I need to be able to accept two \"correct\" values. not just one. How would I do this ?</p>\n\n<p>I know I can do something like: </p>\n\n<pre><code>STAssertEqualObjects(node.name, @\"attachment\", @\"invalid name\");\n</code></pre>\n\n<p>But how do I accept, for example, <code>@\"attachment\"</code> AND <code>@\"table\"</code> values as correct and not fail the unit test if the <code>NSString</code> equals to either one.</p>\n\n<p>Thank you.</p>\n"},{"tags":["unit-testing","grails","junit","grails-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13256897,"title":"Grails: Unit test domain class constraint gives wrong result","body":"<p>I'm trying to write unit tests for my domain class to test constraints but I got unexpected result. Here is my domain class:</p>\n\n<pre><code>class Student {\n    String firstName\n    String lastName\n\n    static constraints = {\n        firstName blank:false,minSize:2,maxSize:20,validator: { val, obj -&gt;\n                      def similarUser = Student.findByFirstNameIlikeAndLastNameIlike(obj.firstName, obj.lastName)\n                      if(!similarUser || obj.id == similarUser.id){\n                      return ['Student.invalid.unique.message']\n                      }\n                    }\n        lastName blank:false, minSize:2,maxSize:20\n    }\n\n}\n</code></pre>\n\n<p>and here is my unit tests:</p>\n\n<pre><code>@TestFor(Student)\n@Mock(Student)\nclass StudentTests {\n    def st\n\n    @Before\n    void setUp(){       \n        mockForConstraintsTests(Student)        \n        st=new Student(firstName:\"FerasO\",lastName:\"Ahmad\")     \n\n    }\n\n\n    @Test\n    void testMinSize() {                \n        assertTrue student.validate() // I guess this should return true but It returns false\n\n    }\n\n}\n</code></pre>\n\n<p>What is going wrong with that? How could I solve it?</p>\n\n<p>Thanks,</p>\n"},{"tags":["c++","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13256837,"title":"Unit Testing. Mocking of private member data","body":"<p><br>\n   I'm looking for the best practice for C++ codings style that will ensure ease of unit tests. The question comes from trying to implement a mock class for a private data member. The private data member is accessed in a few different methods in the class. So far all the examples I can find show how to write a mock class but not how to best write the code that will use both real and mocked objects. </p>\n\n<p>In the example below I'm not sure how to get mCustom from type MyOtherClass to my mock MockMyOtherClass. I suspect my approach is wrong and thus the question.</p>\n\n<pre><code>class MyClass{\n private:\n    MyOtherClass mCustom;\n\n public:\n};\n</code></pre>\n"},{"tags":["objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12487375,"title":"CoverStory reporting 0% coverage after running iPhone app","body":"<p>I have just started to use the unit testing features in Xcode 4.4.1 with the LLVM Compiler. I have created some basic unit tests. I have attempted to turn on code coverage by turning on the \"Instrument Program Flow\" and \"Generate Test Coverage Files\" in the Product section. Also, I have looked through and can't see anything written in the prefix header section. From what I have read in XCode 4.4.1 this is all you have to do to get it to work and it should generate .gcno and .gcda files in the objects-normal/i386 folder which can be opened with CoverStory to view the code coverage. After I quit my app the .gcno files are getting updated but I am not getting any .gcda files. I open the .gcno file in CoverStory which is showing a 0% coverage</p>\n\n<p>Any help would be greatly appreciated</p>\n"},{"tags":["java","unit-testing","code-coverage","sonar","results"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13253472,"title":"Where Sonar is storing test results?","body":"<p>I was working with Sonar and I was confused, when I've connected to Sonar DB. I was trying to find scan results (for example, code coverage or test success %) and I've failed with that. As my sonar web app is down, I cannot check them, but I want to see them.</p>\n\n<p>What i have found, that Sonar has MEASURE_DATA table, which have measure Id's and results in BLOB. But how can i find which one is the one I need? In DB there are no foreign keys connected to these fields.</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","tdd"],"answer_count":21,"favorite_count":341,"up_vote_count":417,"down_vote_count":0,"view_count":77772,"score":417,"question_id":300855,"title":"Looking for a better JavaScript unit test tool","body":"<p>Let's consider the state of JavaScript unit tests and testing tools.</p>\n\n<h2><a href=\"http://www.jsunit.net\">JsUnit</a></h2>\n\n<p>We already use it for some of our js code.</p>\n\n<h3>Pros</h3>\n\n<ul>\n<li>can be invoked from an ant build file</li>\n<li>launches browser to run the tests</li>\n<li>Eclipse plug-in</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>launches browser to run the tests</li>\n<li>Does not support js file to write the unit test code: it has to be embedded inside an html file</li>\n<li>it has not been updated for a few years</li>\n</ul>\n\n<p>Notes:\n<ul>\n<li>There is a JsUnit (2).</li>\n<li>An 'ant' is an open source build tool; \"Ant\" because it is a little thing that can build big things.</li>\n</ul><br></p>\n\n<h2><a href=\"http://code.google.com/p/rhinounit\">RhinoUnit</a></h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>ant driven</li>\n<li>supports js file</li>\n<li>very simple to use</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>Simulation of JavaScript engine: not advanced enough to support our code: I tried to run test code working with JsUnit: I encountered issue when loading our common JavaScript files</li>\n</ul>\n\n<h2>crosscheck</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Can be invoked from ant build file</li>\n<li>Simulates real browser behaviour</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>Simulation of JavaScript engine from a limited number of browser versions</li>\n<li>No activity for 2 years: it does not support Firefox versions 2.x nor 3.x</li>\n</ul>\n\n<h2>jsspec</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Runs on actual browser</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>JavaScript only framework: cannot be called from ant build file</li>\n</ul>\n\n<h2>jspec</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Runs on actual browser</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>Does not seem to support our code:  I tried to run test code running with js unit: I encountered issue when loading our common JavaScript files</li>\n<li>JavaScript only framework: cannot be called from ant build file,</li>\n</ul>\n\n<h2>Screw.unit</h2>\n\n<h3>Pros</h3>\n\n<ul>\n<li>Runs on actual browser</li>\n</ul>\n\n<h3>Cons</h3>\n\n<ul>\n<li>JavaScript only framework: cannot be called from ant build file</li>\n</ul>\n\n<p>Note: I did not try it but it is very similar to jsspec and jspec.</p>\n\n<p>It looks like JsUnit is the only choice we have. Please note it is already used in other components. It is not perfect though because it does not provide an easy way to apply the Test-Driven Development (TDD) process for the following reasons:\n - It does not provide a simple and integrated way to run JavaScript unit test\n - It forces you to write the unit tests in a html file instead of a .js file,\n - It forces you to have a local installation of the JsUnit framework in order to avoid absolute hard coded path to reference js unit files.</p>\n\n<p>As a consequence, you have to switch back and forth from you IDE and all the browsers we want to support while \"TDDing\" in JavaScript. It is feasible but I do not think it is very effective (I may be wrong here).</p>\n\n<p>Also I still need to look at a proper JavaScript editor or Eclipse plug-in allowing easy referencing and refactoring. There is the JSTD one which is part of WTP, however I have not played with it enough in order to have a good idea of it.</p>\n\n<p>As a conclusion, I do not think we have the tools to be fully \"TDD\" compliant.  We can be TOD (Test Oriented Development), but I have not found any tool that allows us to work with JavaScript as efficiently as with Java. Once again, the ideal solution would be to have something identical to JUnit.</p>\n\n<p>What JavaScript unit testing tools do you use?</p>\n\n<p>Recent Entries: </p>\n\n<ul>\n<li><a href=\"http://www.notesfromatooluser.com/\">Mark Levison's Blog</a>:</li>\n<li><a href=\"http://www.notesfromatooluser.com/2008/06/agilescrum-smells.html\">Agile/Scrum Smells</a>:  </li>\n<li><a href=\"http://www.notesfromatooluser.com/2008/10/agile-games-for-making-retrospectives-interesting.html\">Agile Games for Making Retrospectives Interesting</a>: </li>\n</ul>\n"},{"tags":["javascript","unit-testing","code-coverage","requirejs","js-amd"],"answer_count":5,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":318,"score":4,"question_id":11065119,"title":"JavaScript code coverage in RequireJS / AMD modules","body":"<p>Short and seemingly stupid question because so simple and you'd think ubiquitous: has anyone gotten any kind of code coverage to work within a RequireJS front-end project (non NodeJS)?</p>\n\n<p>Seems like a stupid question because of the prevalence of TDD approaches in the JS world and the take-over of AMD development.</p>\n\n<p>I've tried a million approaches, all are lacking. My project is a Backbone project with Jasmine Unit Tests:</p>\n\n<p>1) JSTD with Coverage plugin. JSTD has trouble properly loading and instrumenting AMD modules. If I run JSTD on a single js file (combined by RequireJS optimizer) then code coverage works beautifully, EXCEPT that coverage is then collected and metrics defined on the ENTIRE file. Great, that's useless because that includes 3rd party libraries, and because I can't target a single unit to help test development. Argh.</p>\n\n<p>2) JSCoverage - total fail, doesn't like AMD modules.\n3) Chrome specific &amp; Firebug specific 'live' instrumenters - fail, don't like AMD modules.</p>\n\n<p>...</p>\n\n<p>Every approach I try seems to require massive amounts of custom work.\nSo maybe I need to spin a custom solution from scratch?</p>\n\n<p>How about the following approach: expand the RequireJS optimizer to instrument code and create coverage. It would be in-memory instrumentation which can be enabled with a require.config({ instrument: true }) flag. Every time require loads a module it automatically instruments it and places it in its module repository. Coverage statistics are collected in an object underneath the global require object and accessible from anywhere, say, after a Jasmine test-run.</p>\n\n<p>Input?</p>\n"},{"tags":["oracle","unit-testing","plsql","refactoring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13254006,"title":"What can i do in Oracle in order to preserve the savepoint if internal commit occurs?","body":"<p><strong>background:</strong>\ni'm doing some Oracle plsql refactoring; The first think that i want to accomplish is to have unit test for the principal components.</p>\n\n<p>For this i'm using ruby with the gem plsq-spec <a href=\"https://github.com/rsim/ruby-plsql-spec\" rel=\"nofollow\">https://github.com/rsim/ruby-plsql-spec</a></p>\n\n<p>In order to execute the tests several times, i'm using Oracle Savepoints after open the database conection, and doing a rollback to the savepoint before close the connection</p>\n\n<p><strong>Problem:</strong>\nSome test can't be executed more than one time, because some procedures had internal commits.</p>\n\n<p><em>What can i do in Oracle in order to preserve the savepoint if internal commit/rollback occurs?</em></p>\n\n<p>With this information in the note apparently what I want is impossible\n<a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm\" rel=\"nofollow\">http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/savepoint_statement.htm</a></p>\n\n<blockquote>\n  <p>A simple rollback or commit erases all savepoints. When you roll back\n  to a savepoint, any savepoints marked after that savepoint are erased.\n  The savepoint to which you roll back remains.</p>\n</blockquote>\n\n<p>so, the only solutions are?:</p>\n\n<ul>\n<li>modify the procedures</li>\n<li>erase all data before execute the tests?</li>\n</ul>\n\n<p>tks</p>\n"},{"tags":["ios","security","unit-testing","ios-simulator","keychain"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":90,"score":4,"question_id":13087175,"title":"Keychain Services API fails with errSecNotAvailable in iphonesimulator 6.0","body":"<p>Calls to the the Keychain Services fail with <strong>errSecNotAvailable</strong> when executing a target using the command line tools and the iphone simulator is set to Hardware version 6.0 (10A403). If I change the simulator version to other previous version (4.3, 5.0, 5.1) and re-execute using the same command line script the calls succeed.</p>\n\n<p>I'm running latest XCode 4.5 and the command line tools were downloaded from within XCode.</p>\n\n<p>To reproduce this error just do the following:</p>\n\n<ol>\n<li>Setup an ios library project with a OCUnit target</li>\n<li>Set Base SDK to 6.0</li>\n<li>Set iOS Deployment Target to 4.3</li>\n<li>Copy and paste the code st the end of the post into the test project (it will only try to store a password and retrieve it)</li>\n<li>Add the Security.framework to the OCUnit target</li>\n</ol>\n\n<p>Execute the OCUnit target in XCode and see the test pass with whatever Hardware Version is set in the iphone simulator (just change it between executions).</p>\n\n<p>Execute the OCUnit target from the command line using:</p>\n\n<pre><code>xcodebuild -target TARGET_NAME_HERE -sdk iphonesimulator -configuration Release TEST_AFTER_BUILD=YES\n</code></pre>\n\n<p>with iphone simulator set to Hardware Version 6.0 and the test will <strong>fail</strong>. If you change the iphone simulator Hardware Version to 4.3, 5.0 or 5.1 and execute the command line script again the test will <strong>succeed</strong>.</p>\n\n<p>Is this a command line tool problem? an iphone simulator problem? an OCUnit target running from the command line problem?</p>\n\n<p>Who likes having unit tests that only pass when comets are aligned??</p>\n\n<p>Any ideas?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#define KEYCHAIN_ITEM_ATTRIBUTES (id)kSecClassGenericPassword, kSecClass, @\"MyService\", kSecAttrService, @\"MyPassword\", kSecAttrAccount\n\nconst NSString* MyPassword = @\"blabla\";\n\n- (void)testExample\n{\n    // remove previous keychain item\n    OSStatus status = SecItemDelete((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES, nil]);\n    NSLog(@\"SecItemDelete status:%ld\",status);\n    NSParameterAssert(status == errSecSuccess || status == errSecItemNotFound);\n\n    // add keychain item with new value\n    NSData *data = [MyPassword dataUsingEncoding:NSUTF8StringEncoding];\n    status = SecItemAdd((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES, data, kSecValueData, nil], NULL);\n    NSLog(@\"SecItemAdd status:%ld\",status);\n    NSParameterAssert(status == errSecSuccess);\n\n    // get password\n    status = SecItemCopyMatching((CFTypeRef)[NSDictionary dictionaryWithObjectsAndKeys:KEYCHAIN_ITEM_ATTRIBUTES,\n                                             kSecMatchLimitOne, kSecMatchLimit, kCFBooleanTrue, kSecReturnData, nil], (CFTypeRef *)&amp;data);\n    NSLog(@\"SecItemCopyMatching status:%ld\",status);\n    NSParameterAssert(status == errSecSuccess);\n\n    if (status == errSecItemNotFound)\n        NSLog(@\"SecItemCopyMatching status:%ld\", status);\n    else\n        NSLog(@\"SecItemCopyMatching result:%@\",[[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease]);\n}\n</code></pre>\n\n<p>Regarding securityd daemon not being launched, I can check it is using </p>\n\n<pre><code>launchctl list | grep securityd\n</code></pre>\n\n<p>after the simulator starts.\nI looked at GTM's RunIPhoneUnitTest.sh script for a simple line I could use but when I try this</p>\n\n<pre><code>launchctl submit -l ios6securityd -- /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/libexec/securityd\n</code></pre>\n\n<p>gives me a -5 status code on that daemon.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13254411,"title":"How would I unit test a method with side effects?","body":"<p>Given the following implementation:</p>\n\n<pre><code>class Foo {\n    public function helper() {\n        // Does something with external side effects, like updating\n        // a database or altering the file system.\n    }\n\n    public function bar() {\n        if ($this-&gt;helper() === FALSE) {\n            throw new Exception(/* ... */);\n        }\n    }\n}\n</code></pre>\n\n<p>How would I unit test <code>Foo::bar()</code> without incurring the side effects of <code>Foo::helper()</code> during testing?</p>\n\n<p>I know I can mock <code>Foo</code> and stub <code>Foo::helper()</code>:</p>\n\n<pre><code>public function testGoodBar() {\n    $mock = $this-&gt;getMock('Foo', array('helper'));\n    $this-&gt;expects($this-&gt;once())\n        -&gt;method('helper')\n        -&gt;will($this-&gt;returnValue(TRUE));\n\n    $this-&gt;assertTrue($mock-&gt;bar());\n}\n</code></pre>\n\n<p>...but this leaves the test wide open for code changes that introduce other methods which may have side effects.  Then if the test is run again without being updated, the test itself will have permanent side effects.</p>\n\n<p>I could also mock <code>Foo</code>, such that all its methods get mocked and won't produce side effects:</p>\n\n<pre><code>public function testGoodBar() {\n    $mock = $this-&gt;getMock('Foo');\n    $this-&gt;expects($this-&gt;once())\n        -&gt;method('helper')\n        -&gt;will($this-&gt;returnValue(TRUE));\n\n    $this-&gt;assertTrue($mock-&gt;bar());\n}\n</code></pre>\n\n<p>...but then even <code>Foo::bar()</code> gets mocked, which is bad, since that's the method we want to test.</p>\n\n<p>The only solution I could come up with is explicitly mocking all methods <em>except</em> the one under test:</p>\n\n<pre><code>public function testGoodBar() {\n    $mock = $this-&gt;getMock('Foo', array_diff(\n        get_class_methods('Foo'),\n        'bar'\n    ));\n\n    $this-&gt;expects($this-&gt;once())\n        -&gt;method('helper')\n        -&gt;will($this-&gt;returnValue(TRUE));\n\n    $this-&gt;assertTrue($mock-&gt;bar());\n}\n</code></pre>\n\n<p>...but this seems kludgy, and I feel like I'm missing something obvious.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":321,"score":1,"question_id":6918061,"title":"How to unittest factory method?","body":"<p>I have a question regarding unit-testing of factory method.\nLet say we have following code and want to test Foo.ToBar method.</p>\n\n<pre><code>class Bar\n{\n    public Bar(int someparam)\n    {\n    }\n}\n\nclass Foo\n{\n    int m_someprivate;\n\n    public Foo()\n    {\n        m_someprivate = 1;\n    }\n\n    public Bar TooBar()\n    {\n        return new Bar(m_someprivate);\n    }\n}\n</code></pre>\n\n<p>I saw two different methods. One of them will be something like that</p>\n\n<pre><code>[Test]\nvoid TooBarTest()\n{\n    Foo foo = new Foo();\n\n    Bar result = foo.TooBar();\n\n    Assert.AreEqual(new Bar(1), result);\n}\n</code></pre>\n\n<p>It's very straight forward. However, I don't like it for two reasons</p>\n\n<p>a) We inadvertent test part of Bar class while testing Foo class. As example, if Bar constructor throws than our test will fail, which is kind of wrong, because\nFoo class is fine. It's a Bar class which have a problem.</p>\n\n<p>b) I don't like that production code is used in Assert new Bar(1). I would rather prefer to use some constant than some code which \nmay as example return different results depending on some external state (etc).</p>\n\n<p>The other method which I saw is based on creation of standalone factory, which will create Bar</p>\n\n<pre><code>class Bar \n{\n    public Bar(int someparam)\n    {\n    }\n}\n\ninterface IBarFactory\n{\n    Bar create(int someparam);\n}\n\nclass BarFactory : IBarFactory\n{\n    public Bar create(int someparam)\n    {\n        return new Bar(someparam);\n    }\n}\n\nclass Foo\n{\n    int m_someprivate;\n    BarFactory m_barFactory;\n\n    public Foo()\n    {\n        m_someprivate = 1;\n        m_barFactory = new BarFactory();\n    }\n\n    public Bar TooBar()\n    {\n        return m_barFactory.create(m_someprivate);\n    }\n\n    public void setBarFactory(BarFactory barFactory)\n    {\n        m_barFactory = barFactory;\n    }\n}\n\n\n[Test]\nvoid TooBarTest()\n{\n    Mockery mockery = new Mockery()\n    IBarFactory barFactoryMock = mockery.NewMock&lt;IBarFactory&gt;();\n    Expect.Once.On(barFactoryMock).Method(\"create\").With(new Object[] { 1 }).Will(Return.Value(new Bar(1)); \n\n    Foo foo = new Foo();\n    foo.setBarFactory(barFactoryMock);\n\n    foo.ToBar();\n}\n</code></pre>\n\n<p>It looks like it's better way. However, I don't like that we have to create factory interface, factory, factory setter and make test more complex, just to test 1 line of code. </p>\n\n<p>What are your thoughts on that? What do you prefer? Do you have any other method of testing it?</p>\n"},{"tags":["android","unit-testing","maven"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13253906,"title":"Android Maven Plugin: Choose packages for testcases to be executed","body":"<p>I am executing unit testing of my Android App with Maven on a Jenkins server.</p>\n\n<p>Everything works as expected, but when I want to specify multiple packages for testing the unit tests are not executed anymore. Maybe it's just my misunderstanding of the syntax in the pom.xml? I thought that you could add multiple packages for unit testing.</p>\n\n<pre><code>&lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.jayway.maven.plugins.android.generation2&lt;/groupId&gt;\n            &lt;artifactId&gt;android-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;test&gt;\n                    &lt;createReport&gt;true&lt;/createReport&gt;\n                    &lt;packages&gt;\n&lt;!-- just one package works without problem --&gt;\n                        &lt;package&gt;a.b.c&lt;/package&gt;\n                        &lt;package&gt;a.b.d&lt;/package&gt;\n                    &lt;/packages&gt;\n                &lt;/test&gt;\n            &lt;/configuration&gt;\n            &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n</code></pre>\n"},{"tags":["php","unit-testing","yii","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":2,"view_count":41,"score":5,"question_id":13249180,"title":"YII fixture issue:Exception: Unknown method: 'issues'","body":"<p>I have discovered Yii recently and am working through the book (agile web application development with yii 1.1 and php5 : <a href=\"http://rads.stackoverflow.com/amzn/click/1847199585\" rel=\"nofollow\">link</a>) now as well.</p>\n\n<ul>\n<li>I am using Yii 1.1.12, in order to follow the book with minimum problems </li>\n<li>the fixture file is in place and not returns the neccesary array</li>\n<li>fixture is added to the database    </li>\n<li>I am using a seperate test database (per the book) which is working\nfine up to this point </li>\n</ul>\n\n<p>Here is the code that I have.</p>\n\n<p><strong>protected/models/Issue.php</strong></p>\n\n<pre><code>&lt;?php\n\n/**\n * This is the model class for table \"tbl_issue\".\n */\nclass Issue extends CActiveRecord\n{\n        /**\n        **strong text** * The followings are the available columns in table 'tbl_issue':\n         * @var integer $id\n         * @var string $name\n         * @var string $description\n         * @var integer $project_id\n         * @var integer $type_id\n         * @var integer $status_id\n         * @var integer $owner_id\n         * @var integer $requester_id\n         * @var string $create_time\n         * @var integer $create_user_id\n         * @var string $update_time\n         * @var integer $update_user_id\n         */\n\n         const TYPE_BUG = 0;\n         const TYPE_FEATURE = 1;\n         const TYPE_TASK = 2;\n         const STATUS_NOT_YET_STARTED = 0;\n         const STATUS_STARTED = 1;\n         const STATUS_FINISHED = 2;\n\n        // ... GII generated stuff omitted for clarity\n\n        public function getTypeOptions()\n        {\n            return array(\n                self::TYPE_BUG =&gt; 'Bug',\n                self::TYPE_FEATURE =&gt; 'Feature',\n                self::TYPE_TASK =&gt; 'Task',\n            );\n       }\n\n        public function getStatusOptions()\n        {\n            return array(\n            self::STATUS_NOT_YET_STARTED =&gt; 'Not yet started',\n            self::STATUS_STARTED =&gt; 'Started',\n            self::STATUS_FINISHED =&gt; 'Finished',\n        );\n    }\n\n    public function getStatusText()\n    {\n        $statusOptions = $this-&gt;statusOptions;\n        return isset($statusOptions[$this-&gt;status_id]) ?\n                $statusOptions[$this-&gt;status_id] :\n                \"unknown status ({$this-&gt;status_id})\";\n    }\n\n    public function getTypeText()\n    {\n        $typeOptions = $this-&gt;typeOptions;\n        return isset($typeOptions[$this-&gt;type_id]) ?\n                $typeOptions[$this-&gt;type_id] :\n                \"unknown type ({$this-&gt;type_id})\";\n    }\n}\n</code></pre>\n\n<p><strong>protected/tests/unit/IssueTest.php</strong></p>\n\n<pre><code>&lt;?php\nclass IssueTest extends CDbTestCase\n{\n    public $fixtures = array(\n    'projects' =&gt; 'Project',\n    'issues' =&gt; 'Issue',\n    );\n\n    public function testGetTypes()\n    {\n        $options = Issue::model()-&gt;typeOptions;\n        $this-&gt;assertTrue(is_array($options));\n        $this-&gt;assertTrue(3 == count($options));\n        $this-&gt;assertTrue(in_array('Bug', $options));\n        $this-&gt;assertTrue(in_array('Feature', $options));\n        $this-&gt;assertTrue(in_array('Task', $options));\n    }\n\n    public function testGetStatuses()\n    {\n        $options = Issue::model()-&gt;statusOptions;\n        $this-&gt;assertTrue(is_array($options));\n        $this-&gt;assertTrue(3 == count($options));\n        $this-&gt;assertTrue(in_array('Not yet started', $options));\n        $this-&gt;assertTrue(in_array('Started', $options));\n        $this-&gt;assertTrue(in_array('Finished', $options));\n    }\n\n    public function testGetStatusText()\n    {\n        $this-&gt;assertTrue('Started' == $this-&gt;issues('issueBug')-&gt;getStatusText());\n    }\n\n    public function testGetTypeText()\n    {\n        $this-&gt;assertTrue('Bug' == $this-&gt;issues('issueBug')-&gt;getTypeText());\n\n    }\n}\n</code></pre>\n\n<p>It's probably some really silly typo, but I can't seem to find it. Any help would be much appreciated. Thanks! </p>\n"},{"tags":["unit-testing","scala","servlets","initialization","scalatra"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13250475,"title":"Scalatra Servlet init() during test (Jetty ServletTester)","body":"<p>I am testing a Scalatra servlet that does some important initialization in its <code>init(context: ServletContext)</code> method.</p>\n\n<p>During tests (with <a href=\"http://www.scalatra.org/guides/testing.html\" rel=\"nofollow\">ScalatraSuite</a>) that <code>init</code> is not executed.\nHow should I do my <em>important</em> initialization when I am testing?</p>\n\n<p>That <a href=\"http://www.scalatra.org/guides/testing.html\" rel=\"nofollow\">Scalatra testing page</a> (section \"Testing FAQ\") does not reveal that.</p>\n\n<p><strong>Extra Info:</strong><br/>\nThe \"Testing FAQ\" section states</p>\n\n<blockquote>\n  <p>scalatra-test is built on Jetty's [ServletTester][3]</p>\n</blockquote>\n\n<p>but I also could not extract any information from the internet on how to run the init if I were coding in java.</p>\n"},{"tags":["unit-testing","sharepoint2007"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6,"score":1,"question_id":13250408,"title":"Is it possible to get sharepoint context through moles in moss 2007?","body":"<p>My project is created in moss 2007 with VSTS 2008. Now we are planning to automate unit testing,\nIs it possible to get sharepoint context through moles in moss 2007? because we are not able to get any sharepoint object in unite testing.</p>\n\n<p>Thanks\nSaurabh </p>\n"},{"tags":["unit-testing","scala","object","initialization","scalatra"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13250044,"title":"cake pattern + library dependency + tests = object recreation madness","body":"<p><strong>Why is my <code>Aggregator</code> object being recreated</strong> multiple times?</p>\n\n<p>I have a multi-module sbt project.<br/>\nOne project contains a scalatra servlet, and it depends on another (library-) project, with does something with akka actors.</p>\n\n<p>The library is written using the cake pattern (as described in the 2nd half of <a href=\"http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/\" rel=\"nofollow\">this post</a>), because that makes injecting \"fake\" implementations of complicated actors easier for testing.</p>\n\n<p>Now I want to use this library in my scalatra web project. Therefor I continue with the cake pattern in my scalatra web project:</p>\n\n<pre><code>package web\nimport library.{ComponentRegistry =&gt; LibraryComponentRegistry}\ntrait ComponentRegistry extends\n    LibraryComponentRegistry //taking the default/non-test ComponentRegistry from the library (includes reference to Aggregator object)\n{\n    //No web-project-internal dependencies so far\n}\n</code></pre>\n\n<p>In this project I am using <a href=\"http://www.scalatra.org/guides/testing.html\" rel=\"nofollow\">SclatraSuite</a> to test if web requests are answered by the proper responses. During such requests, code from my library is executed. This is done by calling the <code>retrieve</code> method on an <code>Aggregator</code> object in my library. A reference to this object is mixed in with the servlet via the cake pattern:</p>\n\n<pre><code>class Scalatra extends LifeCycle with\n    ComponentRegistry //&lt;= makes aggregator accessible\n{\n    override def init(context: ServletContext) {\n    aggregator.start()\n        context.mount(new WebServlet, \"/web/*\")\n    }\n}\nclass WebServlet extends ScalatraServlet with ScalateSupport with\n    ComponentRegistry //&lt;= makes aggregator accessible\n{\n    get(\"/\") {\n        aggregator.retrieve() //call to library functionality\n        //...\n    }\n    //more request handlers that do not invoke library code\n}\n</code></pre>\n\n<p>Since the <code>override def init</code> is not executed during test, I used <code>with BeforeAndAfterAll</code> to do the <code>aggregator.start()</code> myself.<br/>\n<strong>During testing with ScalatraSuite, I found out that the <code>Aggregator</code> object is recreated for every web request that invokes library code.</strong> As a result, the <code>aggregator.start()</code> initialization (which sets a few internal references) is then omitted, but the complex Akka actor system stays initialized from the first time it <em>was</em> executed, meaning I cannot just blindly re-<code>start()</code> the <code>aggregator</code>. With the internal references not properly set, I essentially get a null ref exception from my library's code.</p>\n\n<p>Does this object recreation not violate scala's principles? How can I combat this/work around it?</p>\n"},{"tags":["unit-testing","scala","tdd"],"answer_count":3,"favorite_count":7,"up_vote_count":27,"down_vote_count":0,"view_count":8345,"score":27,"question_id":741390,"title":"Unit testing Scala","body":"<p>I just recently started learning the Scala language and would like to do it in <a href=\"http://en.wikipedia.org/wiki/Test-driven%5Fdevelopment\" rel=\"nofollow\">TDD</a>-way. Could you share your experiences on the unit testing frameworks there are for Scala and the pros/cons of them.</p>\n\n<p>I'm using IntelliJ IDEA for Scala development, so it would be nice to be able to run the tests with IDE-support.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13247434,"title":"db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);","body":"<p>I can't figure out why I'm receiving an error in my <code>db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);</code> line.</p>\n\n<pre><code>Error   1   'TaskMgr.Models.taskModelContainer' does not contain a definition for 'Refresh' and no extension method 'Refresh' accepting a first argument of type 'TaskMgr.Models.taskModelContainer' could be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>Here's my test method where the error exists:</p>\n\n<pre><code>[TestMethod]\n    public void TestMethod1()\n    {\n        try\n        {\n\n        taskModelContainer db = new taskModelContainer();\n\n        string Username = \"789zxc@t.cm\";\n        string Password = \"abc123rt\";\n        string Role = \"User\";\n        string Name = \"lykers\";\n        int subsiteID = 1;\n\n        TaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n\n        UserEntity.Username = Username;\n        UserEntity.Password = Password;\n        UserEntity.Role = Role;\n        UserEntity.Name = Name;\n        UserEntity.subsiteID = subsiteID;\n\n        UserController User = new UserController();\n\n        ActionResult result = User.Create(UserEntity);\n\n        int id = Convert.ToInt32(User.ViewBag.id);\n        User Users = db.Users.Single(e =&gt; e.userID == id);\n\n        Assert.AreEqual(UserEntity.Username, Users.Username);\n        Assert.AreEqual(UserEntity.Password, Users.Password);\n        Assert.AreEqual(UserEntity.Role, Users.Role);\n        Assert.AreEqual(UserEntity.Name, Users.Name);\n        Assert.AreEqual(UserEntity.subsiteID, Users.subsiteID);\n\n       //Edit\n        var qry = from e in db.Users orderby e.userID descending select e.userID;\n        int eID = qry.First();\n\n\n\n        UserEntity.Username = \"456zxc@asj.v\";\n        UserEntity.Password = \"asc45k\";\n        UserEntity.Role = \"Administrator\";\n        UserEntity.Name = \"sfscf\";\n        UserEntity.subsiteID = 3;\n\n        //get latest\n        db.Refresh(System.Data.Objects.RefreshMode.StoreWins, db.Users);\n        //db.Load(MergeOption.OverwriteChanges);\n\n\n        ActionResult result2 = User.Edit(UserEntity);\n\n\n        int id1 = Convert.ToInt32(User.ViewBag.id);\n        User Users1 = db.Users.Single(e =&gt; e.userID == id1);\n\n        Assert.AreEqual(UserEntity.Username, Users1.Username);\n        Assert.AreEqual(UserEntity.Password, Users1.Password);\n        Assert.AreEqual(UserEntity.Role, Users1.Role);\n        Assert.AreEqual(UserEntity.Name, Users1.Name);\n        Assert.AreEqual(UserEntity.subsiteID, Users1.subsiteID);\n\n        //delete\n\n        int userID = eID;\n\n        ActionResult result3 = User.DeleteConfirmed(UserEntity.userID);\n\n        var del = from e in db.Users where e.userID == UserEntity.userID select e;\n        var delete = del.Count();\n\n        Assert.AreEqual(0, delete);\n\n        }\n</code></pre>\n\n<p>The code does unit test for create, edit, delete controller. I wanted to refresh my database so that the <code>Assert.AreEqual</code> below Edit will not get an exception/error. Any ideas about the issue?</p>\n"},{"tags":["unit-testing","angularjs","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13236570,"title":"Testing AngularJS code that running inside the main module .run method","body":"<p>So I am start to write unit test for an AngularJS application I wrote.  This application is protected with a login page so that if the username in not logged in, any request to any page except the login page will redirect the login page.  This logic is executed from the main modules .run() method since it only needs to run once, when the application starts, however is there a way to test code that is executed from within the main modules .run() method?  I ahve the follow test code:</p>\n\n<pre><code>describe('Login Controller', function(){\n    'use strict';\n\n    var scope, controller, $httpBackend, $resource, callback;\n\n    beforeEach(module('application'));\n\n    beforeEach(inject(function($injector, $rootScope, $controller, $http, $location, authentication, session) {\n        $httpBackend = $injector.get('$httpBackend');\n        $httpBackend.expectGET('/api/v1/authentication').respond({status: 'success', data: null});\n        $resource = $injector.get('$resource');\n        callback = jasmine.createSpy();\n        scope = $rootScope.$new();\n        controller = new $controller('Login', {\n            $scope: scope,\n            $http: $http,\n            $location: $location,\n            authentication: authentication,\n            session: session\n        });\n    }));\n\n    afterEach(function() {\n        $httpBackend.verifyrifyNoOutstandingExpectation();\n        $httpBackend.verifyNoOutstandingRequest();\n    });\n\n    it('should verify all default values for controller', function() {\n        expect(scope.username).toEqual('');\n        expect(scope.password).toEqual('');\n        expect(scope.displayApplicationLoad).toEqual(false);\n        expect(angular.isFunction(scope.login)).toEqual(true);\n        expect(angular.isFunction(scope.logout)).toEqual(true);\n        expect(scope.loggedIn).toEqual(false);\n        expect(scope.headerTemplate).toEqual('/templates/core/header.html');\n        expect(scope.footerTemplate).toEqual('/templates/core/footer.html');\n    });\n});\n</code></pre>\n\n<p>The issue is that the code running inside the main modules .run() method is not taking into account the</p>\n\n<pre><code>$httpBackend.expectGET('/api/v1/authentication').respond({status: 'success', data: null});\n</code></pre>\n\n<p>line.  Should I be placing this logic somewhere else so that I can unit test this code?</p>\n"},{"tags":["unit-testing","selenium","automated-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":165,"score":4,"question_id":10655324,"title":"Sauce labs alternative","body":"<p>We're looking into automating our web ui using either Microsoft's coded ui tests or Telerik TestStudio framework.  I would love to run our tests using a service like Sauce Labs however, sauce labs requires selenium tests.  Is anyone aware of some service similar to sauce labs to run web tests other than selenium?</p>\n"},{"tags":["mysql","ruby-on-rails","ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13240175,"title":"How to change test database schema (rails unit test)","body":"<p>I am running into a frustrating issue when trying to unit test a specific function of my app.</p>\n\n<p>The process is carried out as such:</p>\n\n<ol>\n<li>Create a temporary 'audience' table</li>\n<li>Call function foo, which inserts certain user data into the 'audience' table</li>\n<li>Drop the 'audience' table</li>\n</ol>\n\n<p>In order to test function foo, I need to create the temporary table within my unit test.  My plan is to create the table within the setup method, and drop it within the teardown method.  I'll call function foo, and depending on if data is inserted into 'audience', that will determine if my test passed or failed.  There's only one problem.  Changing the database schema within the unit test file seems to cause problems.  The error that I get is:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: Mysql2::Error: SAVEPOINT active_record_1 does not exist: ROLLBACK TO SAVEPOINT active_record_1\n</code></pre>\n\n<p>It seems like changing the schema ruins the rollback feature that Rails implements in the unit tests.  Is there any way that I can create and drop this table outside of the rollback scope? One idea I had to get around this was to create a migration that added the 'audience' table to my test database, but I'd like to keep everything contained within the same unit test file.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13241809,"title":"PHPUnit stub method returning NULL?","body":"<p>I'm trying to mock a singleton using <a href=\"http://sebastian-bergmann.de/archives/882-Testing-Code-That-Uses-Singletons.html\" rel=\"nofollow\">this method described by the author of PHPUnit</a> and stub one of its methods:</p>\n\n<pre><code>public function setUp() {\n    $this-&gt;_foo = $this-&gt;getMockBuilder('Foo')\n        -&gt;disableOriginalConstructor()\n        -&gt;getMock();\n\n    $this-&gt;_foo-&gt;expects($this-&gt;any())\n        -&gt;method('bar')\n        -&gt;will($this-&gt;returnValue('bar'));\n\n    var_dump($this-&gt;_foo-&gt;bar());\n}\n</code></pre>\n\n<p>The problem is that this dumps <code>NULL</code> every time.  As I understand it, when you mock an object, all the methods are replaced with stubs that return <code>NULL</code> unless explicitly stubbed like I'm doing.  So, since I've stubbed the <code>bar()</code> method, why is it not dumping the expected <code>'bar'</code> string?  What have I done wrong?</p>\n"},{"tags":["visual-studio-2010","unit-testing","asp.net-membership","membership-provider","roleprovider"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":576,"score":1,"question_id":10939815,"title":"\"The role manager feature has not been enabled\" error during unit testing of SQL Server Role Provider","body":"<p>I have a class library I'm using to wrap the SQL Server Membership and Role provider API's. I attempted to test my first method in my MSTest unit test class, but I got the error, \"The role manager feature has not been enabled\".</p>\n\n<p>I've added a couple different types of config files to the test project hoping that would wire up everything, but it doesn't seem to like it.</p>\n\n<p>How do I wire up a config file with all the provider information to the test project properly?</p>\n"},{"tags":["unit-testing","testng","dbunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13240260,"title":"DBUnit duplicate rows removal","body":"<p>Need to know how to remove duplicate rows in dataset .\nI am gathering data from two different databases (all columns are same in both of them) and they have some same rows.</p>\n\n<p>I use QueryDataSet two times. I merge them by using CompositeDataSet.\nThing I get is list of all rows and some of them are duplicate.</p>\n\n<p>Is there an easy way to delete those duplicates and to order them somehow? \nThanks in advance.</p>\n"},{"tags":["java","unit-testing","junit","powermock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13240186,"title":"PowerMock - IllegalStateException: Must replay Class XXX to get configured expectation","body":"<pre><code>@PrepareForTest({...,..., XXX.class})\n...\n@Test\npublic void testMethodToBeTested(){\n    XXX mockInstance = PowerMock.createMock(XXX.class); \n    ...\n    PowerMock.expectNew(XXX.class, p1, p2, p3, p4, p5).andReturn(mockInstance);\n    mockInstance.methodWithNoReturnVal();\n    expect(mockInstance.getSearchVal()).andReturn(1);\n    PowerMock.replay(mockInstance);\n    Whitebox.invokeMethod(objInstance, \"methodToBeTested\");\n\n    PowerMock.verify(mockInstance);\n}\n</code></pre>\n\n<p>Essentially, I want to test a private method: methodToBeTested(). This method instantiates an object (using the new operator) of type XXX.class and stores it into an instance variable; I mocked this object. Then, it calls methodWithNoReturnVal() via the mock, and then a getter method which I configured to return 1.</p>\n\n<p>I get the error \"IllegalStateException: Must replay class XXX.class to get configured expectation.\" </p>\n\n<p>Any help is appreciated. I am still new to PowerMock and EasyMock; since I needed to use the expectNew(...) method, I made sure to use all PowerMock api inside of the test method.   </p>\n"},{"tags":["android","unit-testing","functional-testing"],"answer_count":1,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":733,"score":3,"question_id":4140776,"title":"UnitTesting and Functional Testing on Android","body":"<p>I have created an app that sends intents among multiple activities.  After doing some research I have found that the <code>ActivityUnitTestCase</code> class is designed for unit testing while the <code>ActivityInstrumentationTestCase2</code> is designed for functional testing.  I understand the use of methods such as <code>setUp()</code>, <code>tearDown()</code>, and <code>testPreConditions()</code>.  However I am having a little difficulty in trying to figure out what <em>user-defined-tests</em> to create in the previously mentioned classes.  I know that there are a few methods that cannot be called in certain classes.  </p>\n\n<p>To be more specific, if I am in <strong>activity A</strong> and I click a button then it calls <code>startActivityForResult()</code> which starts <strong>activity B</strong>.  I then send an intent back to <strong>activity A</strong> which is handled in the <code>onActivityResult()</code> method.  How can i test that the actual result in <code>onActivityResult()</code> is equal to the expected result? </p>\n\n<p>I have been looking extensively for any kind of examples that would help clear up this confusion.  If anyone could provide any assistance i would greatly appreciate it.  </p>\n"},{"tags":["javascript","unit-testing","exception-handling","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13239547,"title":"Can someone please provide a really simple full example of assertException using jsTestDriver.js","body":"<p>I come from a heavy C# background and am currently learning my way through ASP.NET MVC with Knockout.js and JavaScript. I'm very much a TDD based person and have hit a number of snags which I seem to be struggling with. I've read a number of examples of jsTestDriver and all seem fairly straightforward until put to the test...</p>\n\n<p>Basically, what I'm trying to unit test (using JetBrains WebStorm 5.0.4 in conjunction with JsTestDriver) is a simple assertion that an exception is thrown when a certain case is met. This should be simple right? </p>\n\n<p>My actual test case looks like this in jsTestDriver (having removed any underlying basic code and simply raised the exception in the unit test function itself):</p>\n\n<pre><code>GridControllerTest.prototype.testBasicExceptionType = function () {\n\nassertException(function() {\n    throw \"InvalidDataSourceException\";\n}, \"InvalidDataSourceException\");\n</code></pre>\n\n<p>};</p>\n\n<p>Which is a test case that asserts that my function throws an exception \"InvalidDataSourceException\" doesn't it? Initially I tried this with a function that declared the type:</p>\n\n<pre><code>function InvalidDataSourceException (){}\n\nGridControllerTest.prototype.testBasicExceptionType = function () {\n\nassertException(function() {\n    throw new InvalidDataSourceException();\n}, \"InvalidDataSourceException\");\n</code></pre>\n\n<p>};</p>\n\n<p>Can anyone point out the blindingly obvious to me and tell me why I can't get such a simple test to pass? Am I misundertanding the structure of the unit test function?</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":6,"favorite_count":3,"up_vote_count":19,"down_vote_count":0,"view_count":10368,"score":19,"question_id":3693626,"title":"How to run test methods in spec order in JUnit4?","body":"<p>I want to execute test methods which are annotated by <code>@Test</code> in spec order.</p>\n\n<p>For example:</p>\n\n<pre><code>public class MyTest{\n    @Test public void test1(){}\n    @Test public void test2(){}\n}\n</code></pre>\n\n<p>I want to ensure to run <code>test1()</code> before <code>test2()</code> each time I run <code>MyTest</code>, but I couldn't find annotation like <code>@Test(order=xx)</code>.</p>\n\n<p>I think it's quite important feature for JUnit, if author of JUnit doesn't want the <strong>order feature</strong>, why? </p>\n\n<p>Thanks!</p>\n"},{"tags":["iphone","ios","ipad","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13239398,"title":"How can I access the name of the selector that's attached to a UIGestureRecognizer?","body":"<p>I have a gesture recognizer attached to a view and I'd like to be able to unit test which method it calls when the tap occurs.  My gesture recognizer is created like so...</p>\n\n<pre><code>- (void)setupMyView {\n    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myViewTapped)];\n    self.myView.userInteractionEnabled = YES;\n    [self.myView addGestureRecognizer:tap];\n}\n</code></pre>\n\n<p>How can I access the name of the selector (myViewTapped) that is called when the tap occurs?</p>\n\n<p>Thanks so much in advance for your wisdom!</p>\n"},{"tags":["javascript","unit-testing","coffeescript","ember.js","mocha"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":34,"score":-2,"question_id":13239112,"title":"Looking for an example of testing Ember with Mocha","body":"<p>I can't find any examples online. It would be great to see an Ember based git repo that is using Mocha as the test framework. </p>\n"},{"tags":["unit-testing","scala","reflection","pattern-matching","case-class"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13210251,"title":"Reflection code in Scala doesn't drill down into Vector","body":"<p>This part of my application parses to and from a JSON into my objects. I created a unit test that creates a 'PurchaseOrder', transforms it into JSON and transforms it back into the same type of object, and uses reflection to check both the original and the final PurchaseOrder are identical:</p>\n\n<pre><code>val purchaseOrderJson = PurchaseOrderJson.toJson(purchaseOrder)\nval clientPurchaseOrder = PurchaseOrderJson.fromJson(purchaseOrderJson)\n\nval reflectionCheck = classOf[PurchaseOrder].getMethods.forall {\n (method: Method) =&gt;\n    if (!method.invoke(purchaseOrder).equals(method.invoke(clientPurchaseOrder))) {\n      println(\"%s unequal: %s vs %s\".format(method.getName, method.invoke(purchaseOrder), method.invoke(clientPurchaseOrder)))\n      false\n    } else {\n      true\n    }\n}\n</code></pre>\n\n<p>This is the JSON:</p>\n\n<pre><code>\"purchaseOrders\": [{\n    \"id\": \"522423\",\n    \"lineItems\": [{\n        \"notes\": \"Important item\",\n        \"origin\": \"Spain\"\n      },{\n        \"notes\":null,\n        \"origin\": \"Italy\"\n    }]\n}]\n</code></pre>\n\n<p>I have the objects defined as traits:</p>\n\n<pre><code>trait PurchaseOrder {\n  def id: String\n  def lineItems: Vector[LineItem]\n}\n\ntrait LineItem {\n  def notes: Option[String]\n  def origin: String\n}\n</code></pre>\n\n<p>And the implementations as follows:</p>\n\n<pre><code>class PurchaseOrderJson(\n    @(JsonProperty @field) override val id: String,\n    @(JsonProperty @field) override val lineItems: Vector[LineItemImpl]\n) extends PurchaseOrder {\n    def this() = this(\"\",Vector.empty[LineItemImpl])\n}\n\ncase class LineItemImpl(notes: Option[String]) extends LineItem\n</code></pre>\n\n<p>Now :) my problem is I have to add a LOT of fields to LineItem and the compiler complains that I can't have more than 22 params in a case class. So what I did is rewrite LineItemImpl to look like this:</p>\n\n<pre><code>class LineItemImpl(\n    @(JsonProperty @field) override val notes: Option[String] = None\n) extends LineItem {\n    def this() = this(None)\n}\n</code></pre>\n\n<p>But now I get an error in my reflection unit test:</p>\n\n<pre><code>lineItems unequal: Vector(com.giltgroupe.purchaseorder.core.json.LineItemImpl@5b6ca395) vs Vector(com.giltgroupe.purchaseorder.core.json.LineItemImpl@3967ba17)\n</code></pre>\n\n<p>That means the two Vectors in the two objects being compared differ in the element inside. I understand this is because when I change the case class to standard class it looses some pattern match properties so now it's comparing the object address instead of the content.</p>\n\n<p>Is there any way to fix this adding some more properties or annotations to LineItemImpl? Or the only thing I can do is modify my reflection check to drill down into the Vectors? Ideally I don't want to modify the unit test.</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","computer-science"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13237860,"title":"Interview - Test Values","body":"<p>Ok, let's assume that I have a function that checks to see which is the most repeated number in a given array. </p>\n\n<p>This function then needs to be tested, and, need to be tested using particular values in order to make sure that the function worked correctly (Unit testing) - What are these values? I'm confused.</p>\n\n<p>P.s Why should I need to use these values, why couldn't I just debug the code, or, write it on pen and paper to see what the result SHOULD be and then match it against the value outputted?</p>\n"},{"tags":["unit-testing","zend-framework","zend-db","zend-db-table","zend-test"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12886643,"title":"using zend test dbadapter with zend db table abstract","body":"<p>Has anyone been able to to use Zend_Test_DbAdapter with Zend_Db_Table_Abstract?</p>\n\n<p>I'm trying to test a Model I created that extends Zend_Db_Table_Abstract and I get an exception regarding the primary key not being set if I use a Zend_Test_DbAdapter (other adapters like mysql or sqlite) work fine.</p>\n\n<hr>\n\n<pre><code>class Model_Category extends Zend_Db_Table_Abstract\n{\n    protected $_name = 'categories';\n\n    protected $_dependentTables = array('Model_Video');\n\n    public function getMap()\n    {\n        $map = array();\n        $rows = $this-&gt;fetchAll();\n        foreach($rows as $row)\n        {\n            $map[$row-&gt;id] = $row-&gt;name;\n        }\n\n        return $map;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Snippet from a PHPUnit test class:</p>\n\n<pre><code>protected function setUp()\n{\n    $adapter = new Zend_Test_DbAdapter();\n    $stmt = Zend_Test_DbStatement::createSelectStatement(array(\n        array('id' =&gt; 1, 'name' =&gt; 'pranks'),\n        array('id' =&gt; 1, 'name' =&gt; 'physical_feats'),\n        array('id' =&gt; 1, 'name' =&gt; 'art'),\n        array('id' =&gt; 1, 'name' =&gt; 'cute'),\n        array('id' =&gt; 1, 'name' =&gt; 'philanthropy')\n    ));\n    $adapter-&gt;appendStatementToStack($stmt);\n\n    $this-&gt;fixture = new Model_Category($adapter);\n}\n</code></pre>\n\n<p>Exceptions are thrown when exercising the Model's methods:</p>\n\n<pre><code>public function testGetMap()\n{\n    $expected = array(\n        '1' =&gt; 'pranks',\n        '2' =&gt; 'physical_feats',\n        '3' =&gt; 'art',\n        '4' =&gt; 'cute',\n        '5' =&gt; 'philanthropy'\n    );\n    $actual = $this-&gt;fixture-&gt;getMap();\n    $this-&gt;assertEquals($expected, $actual);\n}\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>Model_CategoryTest::testGetMap()\nZend_Db_Table_Exception: A table must have a primary key, but none was found\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:876\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:969\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:100\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:78\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1005\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1303\napplication/models/Category.php:35\ntests/unit/application/models/CategoryTest.php:90\n</code></pre>\n\n<hr>\n\n<p>Forcing a primary key does not work either:</p>\n\n<pre><code>protected function setUp()\n{\n    $adapter = new Zend_Test_DbAdapter();\n    $stmt = Zend_Test_DbStatement::createSelectStatement(array(\n        array('id' =&gt; 1, 'name' =&gt; 'pranks'),\n        array('id' =&gt; 1, 'name' =&gt; 'physical_feats'),\n        array('id' =&gt; 1, 'name' =&gt; 'art'),\n        array('id' =&gt; 1, 'name' =&gt; 'cute'),\n        array('id' =&gt; 1, 'name' =&gt; 'philanthropy')\n    ));\n    $adapter-&gt;appendStatementToStack($stmt);\n\n    $this-&gt;fixture = new Model_Category(array(\n        'db' =&gt; $adapter,\n        'primary' =&gt; 'id'\n    ));\n}\n</code></pre>\n\n<p>Executing the same unit test, from above results in:</p>\n\n<pre><code>Model_CategoryTest::testGetMap()\nZend_Db_Table_Exception: Primary key column(s) (id) are not columns in this table ()\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:888\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:969\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:100\nZendFramework-1.10.6/library/Zend/Db/Table/Select.php:78\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1005\nZendFramework-1.10.6/library/Zend/Db/Table/Abstract.php:1303\napplication/models/Category.php:35\ntests/unit/application/models/CategoryTest.php:93\n</code></pre>\n"},{"tags":["unit-testing","jpa","spring-roo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13234672,"title":"How do I create a test in Spring Roo to populate a database with test data?","body":"<p>I tried modifying test cases that were generated for my entities, but when I run the tests, it doesn't leave the data in the tables.  I tried modifying the persistence.xml (changing the persistence from none to create-tables) but when I run the tests, it throws exceptions because it's trying to update/delete stuff that has foreign key dependencies.  </p>\n\n<p>Am I using the wrong tool for this?  I was hoping I'd be able to run my tests and be left with a database in a known state.  Am I using the tool wrong?</p>\n"},{"tags":["unit-testing","cppunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13162226,"title":"CppUnit - advantages and disadvantages with the xUnit based design?","body":"<p>CppUnit is designed to be similar to JUnit and other XUnit frameworks.</p>\n\n<p>What are the advantages/disadvantages of this?\nWhen should it be selected for this reason?<br>\nAnd should a different framework be preferred if the similarity has no advantages.\nIs actual use when you get started easy and intuitive?</p>\n\n<hr>\n\n<p>To start with <strong>advantages</strong>.\nDoes it plat better with some tools?\nTools for continuous integration for example?</p>\n\n<p>Is it better in a mixed environment (Like C# and C++)?</p>\n\n<p><strong>Disadvantages</strong>:\nI know it is slightly more complex to build, and thus less cross-platform than other frameworks.\nPersonally I have the impression it is easy (for a beginner) to get stuck in compile and link errors, it seems difficult to follow the actual code (In a debugger for example), and also it is not so natural to use with functions (C style interfaces).</p>\n"},{"tags":["python","unit-testing","dynamic"],"answer_count":3,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":2169,"score":13,"question_id":1193909,"title":"Python's unittest and dynamic creation of test cases","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a way to dynamically create <code>unittest</code> test cases? I have tried the following..</p>\n\n<pre><code>class test_filenames(unittest.TestCase):\n\n    def setUp(self):\n        for category, testcases in files.items():\n            for testindex, curtest in enumerate(testcases):\n                def thetest():\n                    parser = FileParser(curtest['input'])\n                    theep = parser.parse()\n                    self.assertEquals(theep.episodenumber, curtest['episodenumber'])\n\n                setattr(self, 'test_%s_%02d' % (category, testindex), thetest)\n</code></pre>\n\n<p>..which creates all the methods correctly (they show up in <code>dir()</code> and are callable), but unittest's test detector, nor <code>nosetest</code> executes them (\"Ran 0 tests in ...\")</p>\n\n<p>Since I may be asking the wrong question - what I am trying to achieve:</p>\n\n<p>I have a file containing test data, a list of input filenames, and expected data (simplified to <code>episodenumber</code> in the above code), stored in a Python dictionary. The key is the category, the value is a list of test cases, for example..</p>\n\n<pre><code>test_cases = {}\ntest_cases['example_1'] = [\n    {'input': 'test.01',\n    'episodenumber': 1},\n    {'input': 'test.02',\n    'episodenumber': 2}\n]\n\ntest_cases['example_2'] = [\n    {'input': 'another.123',\n    'episodenumber': 123},\n    {'input': 'test.e42',\n    'episodenumber': 32}\n]\n</code></pre>\n\n<p>Currently I just loop over all the data, call <code>self.assertEquals</code> on each test. The problem is, if one fails, I don't see the rest of the failures as they are also grouped into one test, which aborts when an assertion fails.</p>\n\n<p>The way around this, I thought, would be to (dynamically) create a function for each test case, perhaps there is a better way?</p>\n"},{"tags":["c#","unit-testing","private-methods"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13234836,"title":"how to unittest private method in c# with PrivateObject","body":"<p>Im trying to make a simple unit test of a private method and I let VS2010 autogenerate the method stubb and add the missing info: This is the code I have</p>\n\n<pre><code>[TestMethod()]\n        [DeploymentItem(\"MyPackage.Language.dll\")]\n        public void getValidCultureWithValidInputCulture()\n        {\n            CultureInfo culture = new CultureInfo(\"sv-SE\", false);\n            PrivateObject param0 = new PrivateObject(culture, new PrivateType(typeof(CultureInfo)));\n            GlobalResourceProvider_Accessor target = new GlobalResourceProvider_Accessor(param0);\n            CultureInfo expected = new CultureInfo(\"sv-SE\", false); \n            CultureInfo actual = target.getValidCulture(culture);\n            Assert.AreEqual(expected, actual);\n            Assert.Inconclusive(\"Verify the correctness of this test method.\");\n        }\n</code></pre>\n\n<p>When I run this I get a exception:</p>\n\n<pre><code>System.ArgumentException: \n      The member specified (getValidCulture) could not be found. You might need to regenerate your private accessor,\n      or the member may be private and defined on a base class. If the latter is true, you need to pass the type\n      that defines the member into PrivateObject's constructor.\n</code></pre>\n\n<p>Does anyone know what i´m doing wrong here? My Objective is to learn how to use the PrivateType and PrivateObject for private methods testing.</p>\n\n<p>EDIT:</p>\n\n<p>Im not not looking to use the PrivateObject.Invoke (it's not refactor friendly).</p>\n"},{"tags":["unit-testing","grails","junit","grails-2.0"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13232506,"title":"Grails: NPE in Unit Test","body":"<p>I'm writing a unit test for my domain class but I get a NPE when I tried to run the following test:</p>\n\n<pre><code>def st\n\nvoid setUp(){\n    super.setUp()\n    mockForConstraintsTests(Student)        \n    st=new Student(firstName:\"Feras\",lastName:\"Ahmad\")\n\n\n}\n\nvoid testMinSize() {        \n    st.firstName=\"J\"\n    assertFalse st.validate();              \n}\n</code></pre>\n\n<p>I got the NPE on the first line of testMinSize method. what is wrong with that? I think setUp method is called before every test. Is this true?</p>\n\n<p>Thanks,</p>\n"},{"tags":["xcode","unit-testing","linker-error","xcode4.5","command-line-tool"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13198130,"title":"How to set up logic unit tests target in Xcode 4.5 \"Command Line Tool\" project and avoid linker error?","body":"<p>Having trouble getting unit tests set up for a specific scenario.  Here's what I'm trying:</p>\n\n<ul>\n<li><p>In Xcode 4.5, I created a simple OSX <strong>\"Command Line Tool\"</strong> application project (Foundation).<br>\nNote that Xcode <em>does not</em> provide the option to add unit tests to a \"Command Line Tool\" project automatically &ndash; so please don't suggest ticking the ticky-box; it ain't there :-/</p></li>\n<li><p>In my project, I created a trivial example class that I'd like to test; e.g. \"Shape\".</p></li>\n<li><p>I followed instructions in Apple's <em>Xcode Unit Testing Guide</em> for <strong><a href=\"http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\" rel=\"nofollow\">Setting Up Unit-Testing in a Project</a></strong>:</p>\n\n<ul>\n<li><p>I added a unit test target to my project, and</p></li>\n<li><p>I edited the \"Test\" scheme to run the tests in the new target.</p></li>\n</ul></li>\n<li><p>In the test project's implementation (.m) file, I added an import for <code>Shape.h</code> and code in the <code>setUp()</code> method to instantiate a shape and assign it to an instance variable.</p></li>\n</ul>\n\n<p>At that point, I decided to see if things would build and if the default test would run still.  However, when I selected <strong>Product...Test</strong> from the menu, the build failed with the following error:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_OBJC_CLASS_$_Shape\", referenced from:\n      objc-class-ref in ExampleTests.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Interpreting this error is not the issue. I grok that the unit test target isn't being linked to the binary containing Shape's implementation.  However, I don't (yet) grok Xcode unit testing &amp; target configuration. So:</p>\n\n<p>What do I need to do in order to get the test target linking against the command line tool's resulting output?  Can I link to a command-line executable from the unit test target?  Apple's documentation looks specific to regular OSX applications (<code>*.app</code>) and iOS applications, and this is neither.</p>\n\n<p>I have business logic classes that I'd like to develop in a command-line tool setting (to begin with), so I'd like to understand what I need to do to get a unit test target running in a \"Command Line Tool\" type of project.  <em>Thank you!</em></p>\n\n<p>(p.s. Note that I'm <em>not</em> interested in running my unit tests <em>from</em> the command line &ndash; Stack Overflow already suggested \"similar\" questions on how to do that &ndash; but rather running unit tests <em>on</em> a \"Command Line Tool\" type <em>project</em>, and still from within Xcode.)</p>\n"},{"tags":["c++","unit-testing","eclipse-cdt","boost-test"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":23,"score":4,"question_id":13234709,"title":"Where to find the parsed Boost.Test output in Eclipse","body":"<p>There is already a thread <a href=\"http://stackoverflow.com/questions/2491380/how-to-process-boost-test-output-with-eclipse\" title=\"How to process Boost.Test output with Eclipse\">here</a> that partially answers my question .</p>\n\n<p>On Eclipse 3.7.2 I followed the approach provided there and I could successfully accomplish the steps creating and setting up a new error parser and adding it to my current project. After executing my Boost.Test (boost rel. 1.48.0) Unit Test, on the Eclipse console I get the same output as the output I get when no parsing is done (e.g. when executing the Unit Test outside Eclipse (e.g. on a Linux terminal)). I searched for a new Eclipse console where the parsed Unit Test output could be displayed (similar to the consoles by e.g. gcov, gprof or cppcheck in Eclipse) but found nothing alike.</p>\n\n<p>Where should the parsed unit test output be displayed? In case the parsed output shall be displayed in the Eclipse Console view, are there any suggestions what might have gone wrong with the parsing in my case?</p>\n\n<p>P.S.: Thanks to casperOne and kleopatra for teaching me manners.</p>\n"},{"tags":["c++","unit-testing","eclipse-cdt","boost-test"],"answer_count":1,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1449,"score":6,"question_id":2491380,"title":"How to process Boost.Test output with Eclipse","body":"<p>I'm using Eclipse CDT and Boost.Test(with Boost.Build). \nI would like Eclipse to parse output of Boost.Test generated during by run of test suites during build.<br>\nDoes anybody know how to  achieve this? \nThanks in advance</p>\n"},{"tags":["java","unit-testing","rest","jetty"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13233180,"title":"Unit testing a REST-Service","body":"<p>I have a REST-Service based on the <a href=\"http://sparkjava.com/\" rel=\"nofollow\">spark-framework</a>. Looks like this(simplyfied):</p>\n\n<pre><code>public void init() {\n\n    get(new Route(\"spark/favorites\") {\n        @Override\n        public Object handle(Request request, Response response) {\n            ExternalService exS= new ExternalService();             \n\n            ArrayList&lt;String&gt; favs= exS.getFavorites();\n\n            Gson gson = getGson();\n            return gson.toJson(favs);\n        }\n    });\n }\n</code></pre>\n\n<p>Now I want to write some tests for my service to see if my get/post/put/delete does what I want. \nTherefor I deploy it on an embedded Jetty during my tests.</p>\n\n<p>The problem I a facing now is that my service depends on external REST-Services. I would like to mock all calls to those (to have a fast unit test). But I have no idea how to mock inside the running service.</p>\n\n<p>Is that even possible? Should I switch to another REST-Framework?\nSuggestions?</p>\n"},{"tags":["c#","wpf","unit-testing","mvvm","icommand"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":620,"score":1,"question_id":6864233,"title":"WPF MVVM - Unit Testing a command - Private vs Public methods?","body":"<p>Basically, If I use MVVM and expose public ICommands, should my delegates be public or private?</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","slowcheetah","xml-transform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12866620,"title":"Using xml transformations in unit tests","body":"<h2>Background:</h2>\n\n<p>Currently we have around 10 unit/integration test projects that hit a database to do tests.  Each test class that hits the database inherits from a class called <code>IntegrationTest</code> which is in a seperate dll called <code>TestBase</code>. <code>TestBase</code> contains a configuration file (nhibernate_log4net.cfg.xml) that houses the connection string to the database. </p>\n\n<p>Our development team is a group of about 7 or 8.  If two team members were to run the unit tests at the same time there would be conflicts because a lot of the tests are adding and deleting data that is common across many tests.  This would cause tests to fail erroneously between the two developers.</p>\n\n<h2>Layout:</h2>\n\n<p><strong>TestBase.dll</strong><br>\nIntegrationTest.cs  (Contains <strong>[DeploymentItem(\"nhibernate_log4net.cfg.xml\"]</strong>)<br>\nnhibernate_log4net.cfg.xml<br>\nnhibernate_log4net.cfg.Developer 1.xml  (Transformation file)<br>\nnhibernate_log4net.cfg.Developer 2.xml  (Transformation file)<br>\n...</p>\n\n<p><strong>UnitTest.dll</strong><br>\nReferences -> <strong>TestBase.dll</strong><br>\nMyUnitTest.cs (Inherits from IntegrationTest in <strong>TestBase.dll</strong>)  </p>\n\n<h2>Problem:</h2>\n\n<p>My idea was to use <code>SlowCheetah</code> xml transformations on the configuration file in the <code>TestBase</code> dll for each developer in the team but the transformed file does not get copied to the <strong>Out</strong> directory of the unit test. The base configuration file (non transformed one) is the one that gets copied out to the <strong>Out</strong> directory.  I have a feeling it's because of the <code>[DeploymentItem(\"nhibernate_log4net.cfg.xml\")</code> attribute I have to use to get the config file out there in the first place.</p>\n\n<p><strong>Is there any way to use xml transformations on an xml config file that is included in a separate dll than the unit testing project?</strong></p>\n"},{"tags":["unit-testing","visual-studio-2012","mstest"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13042671,"title":"MSTest Environment.CurrentDirectory incorrect VS 2012","body":"<p>I am using MSTest and Visual Studio 2012 for unit testing and am encountering a difference in how it runs on two different machines with regards to Environment.CurrentDirectory calls. Both machines are running the exact same tests and using the exact same .testsettings file (with all deployment turned off) yet on one the Environment.CurrentDirectory returns the bin/debug of the project (like I want) and the other returns the TestResults/.../Out as the current working directory.</p>\n\n<p>In the one that runs in the bin/debug folder the TestResults folder for the run is empty but on the other machine the TestResults folder has an AgentReset file in it and I don't know where it came from. Does anyone know why this would be occurring and if there is a config or setting somewhere where?</p>\n"},{"tags":["unit-testing","visual-studio-2012","asmx","integration-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13231747,"title":"Writing unit test compatible for both asmx & wcf","body":"<p>How should I do automated unit testing of a web service(asmx) using visual studio 2012?.My web service contains lots of methods(108) with a dependency of some function to be executed before executing others. Secondly, same unit test will be used for unit testing WCF service(almost same counterpart) in future.so how to take care while writing unit test?</p>\n"},{"tags":["unit-testing","grails","metaprogramming"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13230823,"title":"Grails metaclass modification not reliable within unit tests","body":"<p>In a grails 2 project I'm using groovy's metaclass programming to add some methods to my domain classes.</p>\n\n<p>Everything is working fine at runtime and I can run my integration tests fine.</p>\n\n<p>But for unit tests I have some issues.</p>\n\n<p>I have created a test mixin that is in charge of initializing the metaclass programming part.    </p>\n\n<p>This mixin is not running reliably: \nthe methods added to the metaclass are not available, or they are available after a first call, or they are available only after a previous <code>grails test-app unit:</code> command has been called.<br>\nThis is quite a problem for continuous build.  </p>\n\n<p>You should be able to reproduce this issue (at least with grails 2.0.4) by<br>\n<strong>0) create a new grails projects</strong></p>\n\n<p><strong>1) add a domain object</strong></p>\n\n<pre><code>create-domain-class playground.Data\n</code></pre>\n\n<p><strong>2) add this class to your src/groovy/playground dir</strong></p>\n\n<pre><code>    package playground\n\nimport grails.test.mixin.domain.DomainClassUnitTestMixin\nimport grails.test.mixin.support.GrailsUnitTestMixin\nimport org.codehaus.groovy.grails.commons.GrailsApplication\nimport org.codehaus.groovy.grails.commons.GrailsDomainClass\nimport org.junit.Before\n\nclass EnhanceDomainTestMixin {\n\n  boolean enhancerMethodCalled = false;\n  GrailsApplication application\n  MetaMethod mockDomainMethod\n\n  //replace the mockDomain Method from DomainClassUnitTestMixin with this closure\n  def enhancedMockDomain = { Class cl, List list -&gt;\n    def enhanced =cl.metaClass.getMetaMethod(\"isEnhanced\")\n    try {\n      //run the mockDomain method to have the mocked domain class registered in the grails application\n      mockDomainMethod.invoke(delegate, cl, list)\n    }\n    finally {\n      //enhance the grails domain with a new method\n      def domain = application.getDomainClass(cl.name) as GrailsDomainClass\n      domain.metaClass.isEnhanced = { return true; }\n      assert domain.newInstance().isEnhanced();\n    }\n  }\n\n  @Before void runDomainEnhancer() {\n    enhancerMethodCalled = true;\n    //GrailsUnitTestMixin.initGrailsApplication() should have already been called. (at least this was not an issue here)\n    application = GrailsUnitTestMixin.grailsApplication\n\n    //pick the mockDomain method\n    mockDomainMethod = DomainClassUnitTestMixin.metaClass.pickMethod(\"mockDomain\", Class, List)\n\n    //if the picked mockDomain has never been enhanced, wrap it.\n    if(mockDomainMethod != enhancedMockDomain) {\n      DomainClassUnitTestMixin.metaClass.mockDomain = enhancedMockDomain\n    }\n  }\n}\n</code></pre>\n\n<p><strong>3) Add this small utils class (in test/unit/playground)</strong></p>\n\n<pre><code>package playground\n\nclass TestSetup {\n\n  static Data d1\n\n  static void setup() {\n    d1 = new Data()\n    assert d1.isEnhanced()\n  }\n}\n</code></pre>\n\n<p><strong>4) Add these tests into the unit test already created by grails DataTests</strong></p>\n\n<pre><code>package playground\n\nimport grails.test.mixin.*\n\n@TestFor(Data)\n@TestMixin(EnhanceDomainTestMixin)\nclass DataTests {\n\n  void testIsEnhancedLocal() {\n    assert enhancerMethodCalled\n    Data d = new Data()\n    assert d.isEnhanced()\n  }\n\n  void testIsEnhancedLocalSecondTime() {\n    assert enhancerMethodCalled\n    Data d = new Data()\n    assert d.isEnhanced()\n  }\n\n  void testIsEnhancedGlobalFirstTime() {\n    assert enhancerMethodCalled\n    TestSetup.setup()\n    assert TestSetup.d1 != null\n  }\n\n  void testIsEnhancedGlobalSecondTime() {\n    assert enhancerMethodCalled\n    TestSetup.setup()\n    assert TestSetup.d1 != null\n  }\n\n}\n</code></pre>\n\n<p>Now run this command:\n<code>grails test-app unit:</code></p>\n\n<p>you should have something like this output:</p>\n\n<pre><code>| Completed 4 unit tests, 4 failed in 1651ms\n| Tests FAILED  - view reports in target\\test-reports\n</code></pre>\n\n<p>Now run the this command again (sometime one more is needed):<br>\n<code>grails test-app unit: playground.DataTests</code></p>\n\n<pre><code>testMixin&gt; grails test-app unit: playground.DataTests\n| Completed 4 unit tests, 0 failed in 1384ms\n| Tests PASSED - view reports in target\\test-reports\n</code></pre>\n\n<p>So does anyone has a clue of why the metaClass modification is not reliable while running unit tests ? And how to workaround this issue ?</p>\n"},{"tags":[".net","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13230375,"title":"SetUp is not working for NUnit","body":"<p>I have following NUnit code. I am using a switch case statement inside [SetUp]</p>\n\n<p>Before the test is run it is expected to insert data into database; but it is not inserting data. What need to be corrected here?</p>\n\n<p>REFERENCE:</p>\n\n<ol>\n<li><a href=\"http://programmers.stackexchange.com/questions/173651/nunit-setup-and-teardown\">http://programmers.stackexchange.com/questions/173651/nunit-setup-and-teardown</a></li>\n</ol>\n\n<p>CODE</p>\n\n<pre><code>     [SetUp]\n    public void TestSetUp()\n    {\n        switch (TestContext.CurrentContext.Test.FullName)\n        {\n            case \"GetApplicationsTest\":\n                GetApplicationsTestSETUPHElper();\n                break;\n\n            case \"DeleteApplicationTest\":\n                GetApplicationsTestSETUPHElper();\n                break;\n\n        }\n\n\n    }\n\n    private void GetApplicationsTestSETUPHElper()\n    {\n        SqlConnection connection = new SqlConnection(connectionString);\n        using (connection)\n        {\n            string commandText = \"INSERT INTO Status_Type VALUES (889,'s2','UT s2')\";\n            SqlCommand command = new SqlCommand(commandText, connection);\n            command.CommandType = System.Data.CommandType.Text;\n            connection.Open();\n            command.ExecuteNonQuery();\n        }\n    }\n\n    private void DeleteApplicationTestSETUPHElper()\n    {\n        SqlConnection connection = new SqlConnection(connectionString);\n        using (connection)\n        {\n            string commandText = \"INSERT INTO Status_Type VALUES (890,'s3','UT s3')\";\n            SqlCommand command = new SqlCommand(commandText, connection);\n            command.CommandType = System.Data.CommandType.Text;\n            connection.Open();\n            command.ExecuteNonQuery();\n        }\n    }\n\n    [Test]\n    public void GetApplicationsTest()\n    {\n\n        ApplicationBL application = new ApplicationBL(connectionString);\n        ApplicationSearch applicationSearch = new ApplicationSearch();\n        applicationSearch.ApplicationID = 1;\n        //applicationSearch.ApplicationName = \"Test1\";\n        //applicationSearch.ApplicationURL = \"Test1\";\n        //applicationSearch.StatusCode = 1;\n        Collection&lt;Application&gt; applications =  application.GetApplications(applicationSearch);\n    }\n\n    [Test]\n    public void DeleteApplicationTest()\n    {\n\n        ApplicationBL application = new ApplicationBL(connectionString);\n        ApplicationSearch applicationSearch = new ApplicationSearch();\n        applicationSearch.ApplicationID = 1;\n        //applicationSearch.ApplicationName = \"Test1\";\n        //applicationSearch.ApplicationURL = \"Test1\";\n        //applicationSearch.StatusCode = 1;\n        Collection&lt;Application&gt; applications = application.GetApplications(applicationSearch);\n    }\n</code></pre>\n"},{"tags":["c#",".net","unit-testing","garbage-collection"],"answer_count":4,"favorite_count":11,"up_vote_count":16,"down_vote_count":1,"view_count":1654,"score":15,"question_id":578967,"title":"How can I write a unit test to determine whether an object can be garbage collected?","body":"<p>In relation to <a href=\"http://stackoverflow.com/questions/578593/castle-windsor-will-my-transient-component-be-garbage-collected\">my previous question</a>, I need to check whether a component that will be instantiated by Castle Windsor, can be garbage collected after my code has finished using it. I have tried the suggestion in the answers from the previous question, but it does not seem to work as expected, at least for my code. So I would like to write a unit test that tests whether a specific object instance can be garbage collected after some of my code has run.</p>\n\n<p>Is that possible to do in a reliable way ? </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I currently have the following test based on Paul Stovell's answer, which succeeds:</p>\n\n<pre><code>     [TestMethod]\n    public void ReleaseTest()\n    {\n        WindsorContainer container = new WindsorContainer();\n        container.Kernel.ReleasePolicy = new NoTrackingReleasePolicy();\n        container.AddComponentWithLifestyle&lt;ReleaseTester&gt;(LifestyleType.Transient);\n        Assert.AreEqual(0, ReleaseTester.refCount);\n        var weakRef = new WeakReference(container.Resolve&lt;ReleaseTester&gt;());\n        Assert.AreEqual(1, ReleaseTester.refCount);\n        GC.Collect();\n        GC.WaitForPendingFinalizers();\n        Assert.AreEqual(0, ReleaseTester.refCount, \"Component not released\");\n    }\n\n    private class ReleaseTester\n    {\n        public static int refCount = 0;\n\n        public ReleaseTester()\n        {\n            refCount++;\n        }\n\n        ~ReleaseTester()\n        {\n            refCount--;\n        }\n    }\n</code></pre>\n\n<p>Am I right assuming that, based on the test above, I can conclude that Windsor will not leak memory when using the NoTrackingReleasePolicy ?</p>\n"},{"tags":["visual-studio","unit-testing","nunit","build-automation"],"answer_count":1,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":1525,"score":5,"question_id":3475256,"title":"Visual Studio and NUnit - automatic running of unit tests on build","body":"<p>I would love to know if there is a way I can get Visual Studio to run unit tests corresponding to a given assembly whenever I build it.</p>\n\n<p>Given a solution containing projects structured like this:</p>\n\n<pre><code>Assembly1\n\nAssembly1.Tests \n\nAssembly2 \n\nAssembly2.Tests\n</code></pre>\n\n<p>Is there a way I can get the unit tests in <code>Assembly2.Tests</code> to run whenever <code>Assembly2</code> is built?</p>\n\n<p>That would be amazing.</p>\n\n<p>I'm using Visual Studio 2008 Standard Edition.</p>\n"},{"tags":["sqlite","unit-testing","fluent-nhibernate","automapping"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13178629,"title":"NHibnernate SQL Lite in memory unit testing doesn't work the same as a physical db","body":"<p>I am in the process of building a \"get to know NHibernate project).</p>\n\n<p>My unit tests (nunit) provide the repository layer the same configuration as the normal mvc site but using \"SQLiteConfiguration.Standard.InMemory()\" instead of \"MsSqlConfiguration.MsSql2008\".  My hope is that I can use fluent nhibernate and automapping exactly the same way but have a quick in memory db for tests and a real db for the app.</p>\n\n<p>In the repository constructor it creates the Session object for all queries to use and also implements IDisposable which will ensure the session is dealt with correctly.  For example a save article method would look like:</p>\n\n<pre><code>    public void SaveArticle(Article article)\n    {            \n        Session.SaveOrUpdate(article);      \n        Session.Flush();\n    }\n</code></pre>\n\n<p>So far the MVC site all seems to work correctly, and my tests are passing.  I think I have come across an issue that must be a problem with my design.</p>\n\n<p>So far I have two objects:</p>\n\n<pre><code>class Article\n{\n    public virtual int Id {get; set; }\n    public virtual IList&lt;Tag&gt; Tags {get; set; }\n }\n\n class Tag\n {\n    public virtual int Id {get; set; }\n    public virtual string Text {get; set; }\n }\n</code></pre>\n\n<p>I only want the DB to store ONE instance of each tag.  So many articles could use the same tag.  So I wrote this test:</p>\n\n<pre><code>    [Test]\n    public void TestDeletingTagWillNotDeleteOthersTagV2()\n    {\n        Article article = new Article();\n        article.Tags.Add(new Tag { Text = \"C#\" });\n        article.Tags.Add(new Tag { Text = \"VB\" });\n        Service.SaveArticle(article);\n\n        Article article2 = new Article();\n        article2.Tags.Add(new Tag { Text = \"C#\" });\n        Service.SaveArticle(article2);\n\n        Guid article1Id = article.Id;\n        Guid article2Id = article2.Id;\n\n        article = null;\n        article2 = null;\n\n        Article article3 = Service.GetArticle(article1Id);\n        Article article4 = Service.GetArticle(article2Id);\n\n        Assert.AreEqual(2, article3.Tags.Count);\n        Assert.AreEqual(1, article4.Tags.Count);\n\n        Assert.AreEqual(2, Service.Tags.Count);\n\n        article3.Tags.RemoveAt(0);\n        Service.SaveArticle(article3);\n\n        Article article5 = Service.GetArticle(article1Id);\n        Article article6 = Service.GetArticle(article2Id);\n\n        Assert.AreEqual(1, article5.Tags.Count);\n        Assert.AreEqual(1, article6.Tags.Count);\n\n        Assert.AreEqual(2, Service.Tags.Count);\n    }\n</code></pre>\n\n<p>This test passes, but I believe it should fail.  (it does when you run the MVC site i.e. the first article only has one tag, \"VB\" not \"C#\" and \"VB\".</p>\n\n<p>I believe its because as the session is still open nhibernate is still holding onto everything and remembers what there was.</p>\n\n<p>My main question is how do I test this with the in memory db?  How do I ensure that after the saves and removal of a shared tag the articles still have what they should have?</p>\n\n<p>The table structure it has created is, (which I feel is wrong, should have a link table):</p>\n\n<pre><code>Article:\n    Id (PK, uniqueid, not null)\n     ...........\n\n Tag\n    Id (PK, uniqueid, not null)\n    Text (nvarchar, null)\n    Article_id (FK, uniqueid, null)\n</code></pre>\n\n<p>Not sure how to use the fluent automapping to setup a link table so that one tag can be shared across multiple Articles and one article can have many tags </p>\n\n<p>Believe I found how to ensure that the Tags and articles have a link table:</p>\n\n<pre><code>        configuration.Mappings(m =&gt; m.AutoMappings.Add((AutoMap.AssemblyOf&lt;Article&gt;())\n                            .Override&lt;Article&gt;(map =&gt; map.IgnoreProperty(x =&gt; x.IsPublished))\n                            .Override&lt;Article&gt;(map =&gt; map.HasManyToMany(a =&gt; a.Tags).Cascade.All())\n                            .Conventions.Add(DefaultCascade.All()))\n</code></pre>\n"},{"tags":["java","php","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13227898,"title":"junit integration with php based application","body":"<p>I am exploring <a href=\"http://www.junit.org/\" rel=\"nofollow\">junit</a> for unit testing. I have seen that it is java based. I have explored it and I have still some questions</p>\n\n<ol>\n<li>Can I integrate junit with php based applications for unit testing?</li>\n<li>Test cases will only be written in java? Can I write test cases in PHP using junit?</li>\n</ol>\n\n<p>I have explored tutorials and I have seen all test cases are written in Java. But I have someone who is saying it can be done. So any guide will be much appreciated.</p>\n\n<p>Regards</p>\n"},{"tags":["unit-testing","qt4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13227901,"title":"How to correctly integrate Qt's testlib with my project?","body":"<p>I checked the sample Qt Testlib project, but it seems to be a separate project.</p>\n\n<p>Now I would like to integrate that project with my current project, e.g when I finished <code>make</code>, I'd like to run <code>make test</code>, but how should I add a new make parameter by adding some lines to the <code>.pro</code> file?</p>\n\n<p>Or what's the right way to integrate it?</p>\n"},{"tags":["unit-testing","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":550,"score":4,"question_id":7114604,"title":"Nunit parameterized tests with datetime","body":"<p>Could someone tell me is it not possible with nunit to go:</p>\n\n<pre><code>[TestCase(new DateTime(2010,7,8), true)]\n        public void My Test(DateTime startdate, bool expectedResult)\n        {\n....\n}\n</code></pre>\n\n<p>I really want to put a <code>datetime</code> in there but it doesn't seem to like it. The error is:</p>\n\n<p>An attribute argument must be a constant expression, typeof expression or array creation expression of an attribute parameter type</p>\n\n<p>Some documentation I read seems to suggest you should be able to but I can't find any examples.</p>\n"},{"tags":["python","unit-testing","makefile"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":352,"score":3,"question_id":5529195,"title":"How to combine unittest results using a Makefile?","body":"<p>I want to use a Makefile to run individual test files or a combined version of all tests or a coverage report.</p>\n\n<p>I'm pretty new to Makefiles so I borrowed one and adapted it. The result is <a href=\"http://code.google.com/p/tipfy/source/browse/Makefile\" rel=\"nofollow\">here</a>.</p>\n\n<p>The problem is that <code>make test</code> will run each test in sequence and it is hard to see which ones failed when you have a bunch and the screen scrolls a lot. I like that each one uses a separate process so they don't interfere with each other, though.</p>\n\n<p>Question is: can I combine the results more nicely using only the Makefile or I need a separate script? Do you know some good examples of Makefiles to run tests?</p>\n\n<p>(I want to use Makefile + unittest + coverage only, and no other dependencies)</p>\n"},{"tags":["iphone","ios","unit-testing","ocunit","gh-unit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13223852,"title":"iOS: How can I write a unit test that checks to see if a timer fired?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12463733/objective-c-unit-testing-dispatch-async-block\">Objective C - Unit testing dispatch_async block?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a view controller that changes the background color of my view after one second has passed, like so...</p>\n\n<pre><code>@implementation MyViewController\n- (void)viewDidLoad{\n    [super viewDidLoad];\n    [self setBackgroundColorAndTimer];\n}\n\n- (void)setBackgroundColorAndTimer\n{\n    self.view.backgroundColor = [UIColor white];\n    self.myColorTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f\n                                                         target:self\n                                                       selector:@selector(changeBackgroundColor:)\n                                                       userInfo:nil\n                                                        repeats:NO];\n}\n\n- (void)changeBackgroundColor:(NSTimer*)timer{\n    self.view.backgroundColor = [UIColor black];\n}\n@end\n</code></pre>\n\n<p>How can I write a unit test, using OCUnit or GHUnit, that tests to make sure the background color is black after one second (i.e. the timer fired)?  </p>\n\n<p>Looking at the <a href=\"http://gabriel.github.com/gh-unit/docs/appledoc_include/guide_testing.html\" rel=\"nofollow\">GHUnit async test example</a>, it's unclear to me how to take advantage of GHUnit's asynchronous testing abilities since it relies on the test code throwing notifications.  I'd like to keep my application code separate from my test code, but I can't figure out how to write a unit test to test this without adding code to my application logic to throw a notification.  </p>\n\n<p>Thanks so much in advance for your wisdom!</p>\n"},{"tags":["ruby-on-rails","unit-testing","variable-types"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13222364,"title":"why are brackets used in this assert_equal statement","body":"<p>In the book Agile Web Development with Rails, they're teaching how to write test unit cases:</p>\n\n<pre><code>test \"product price must be positive\" do\n  product = Product.new(title: \"By Book Title\",\n                        description: \"yyy\",\n                        image_url: \"zzz.jpg\")\n  product.price = -1\n  assert product.invalid?\n  assert_equal [\"must be greater than or equal to 0.01\"], product.errors[:price]\nend\n</code></pre>\n\n<p>Concerning the assert_equal statement, why are brackets needed around the \"must be greater than...\" string.  I'm assuming variable types are coming into play here, but need some clarification on why.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13218568,"title":"ActivityUnitTestCase getActionBar() returns null","body":"<p>My <code>FragmentActivity</code> calls <code>getActionBar()</code> in <code>onCreate()</code>:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_new_expense);\n    getActionBar().setDisplayHomeAsUpEnabled(true);\n}\n</code></pre>\n\n<p>This works fine when running the app normally on the emulator or on a device.  However, when I test the Activity with a <code>ActivityUnitTestCase</code>, <code>getActionBar()</code> always returns null.</p>\n\n<pre><code>public class NewTransactionTest extends ActivityUnitTestCase&lt;TransactionEditActivity&gt; { \n\n    private RenamingDelegatingContext myContext;\n    private DatabaseHelper myHelper;\n    private RuntimeExceptionDao&lt;Account,Long&gt; myDao;\n    private Account myBankAccount1;\n    private Account myBankAccount2;\n    private Account myCategory1;\n    private Account myCategory2;\n    private Budget myBudget;\n\n    public NewTransactionTest() {\n        super(TransactionEditActivity.class);\n    }\n\n    @Override\n    protected void setUp() throws Exception {\n        super.setUp();\n\n        myContext = new RenamingDelegatingContext(getInstrumentation().getTargetContext(), \"test\");\n        myContext.deleteDatabase(DatabaseHelper.DATABASE_NAME);\n    }\n\n    @UiThreadTest\n    public void testPreConditions() throws Throwable {\n        setActivityContext(myContext);\n        final TransactionEditActivity activity = startActivity(new Intent(), null, null);\n    }\n</code></pre>\n\n<p>Does anyone know why <code>getActionBar()</code> returns null for unit tests?</p>\n"},{"tags":["objective-c","cocoa-touch","unit-testing","floating-point","nsstring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13220531,"title":"How can I check if a float has two significant figures?","body":"<p>I am writing a unit test to determine if a string value appears with 2 significant figures, ie. \"N.NN\"</p>\n\n<pre><code>    strokeValue = [NSString stringWithFormat:@\"%.2f\",someFloatValue];\n</code></pre>\n\n<p>How can I write a test that asserts, my string always has 2 decimal places?</p>\n"},{"tags":["iphone","ios","xcode","unit-testing","xcode4"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1018,"score":5,"question_id":6865735,"title":"Adding Unit Tests to an already existing project?","body":"<p>When you create an XCode 4 project, it asks you if you want to include unit testing. But how do you add it to a project that's been created without them? </p>\n\n<p>I started a project with Unit Tests to try to figure it out, and it looks like the only difference between it and my existing project are the Test.h and Test.m files in the new project.</p>\n\n<p>But when I move them into my old project and try to build, it says no such file or directory: SenTestingKit/SenTestingKit.h. That looks like a framework to me, but if I go to build phases and try to add the framework, there isn't one available called SenTestingKit :( And the new project only links the usual suspects: UIKit, CoreGraphics, and Foundation, but no SenTestingKit.</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":6,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":546,"score":7,"question_id":6382262,"title":"How do you unit test a mail sending function","body":"<p>i have a function which creates a report and sends it to a user.\nWhat i've done is create a mock for the email function, and verify if the 'send' function of the email class was called.</p>\n\n<p>So now i know that the function is called, but how do you unit test the body of the Send() function? How can i proove that the subject and body are correct and an attachment is attached to the email?</p>\n\n<p>Michel</p>\n"},{"tags":["python","api","unit-testing","rest","wrapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13216555,"title":"Unit testing an API wrapper","body":"<p>I'm writing a Python wrapper for an authenticated RESTful API. I'm writing up my test suite right now (Also first time test-writer here) but have a few questions:</p>\n\n<p>1.a) How can I make a call, but not have to hardcode credentials into the tests since I'll be throwing it on Github?</p>\n\n<p>1.b) I kind of know about mocking, but have no idea how to go about it. Would this allow me to not have to call the actual service? What would be the best way to go about this?</p>\n\n<p>2) What do I test for - Just ensure that my methods are passing certains items in the dictionary?</p>\n\n<p>3) Any best practices I should be following here?</p>\n"},{"tags":["unit-testing","flexunit","puremvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13217201,"title":"Possible Mocking Framework for Unit Testing a SingleCore PureMVC project","body":"<p>I have an old and large PureMVC Singlecore project that I am joining.\nI'm trying to help my team create unit tests for what we have and to teach them how to write unit tests as we go forward.</p>\n\n<p>I'm encountering a bunch of mocking problems with vague references to display objects, Notifications, and the fact that most of the functions which have testable code are private functions.</p>\n\n<p>Searching the internet for mock utilities or tools for unit testing puremvc results mainly in projects that appear to be no longer supported (from 2008 or 2010)</p>\n\n<p>I'm asking which tools exist to solve this sort of problem today, from people who are active in the community.</p>\n\n<p>Thanks.</p>\n\n<p>If this is not the right place to ask this question, please point me to a place where this question can get answered.</p>\n"},{"tags":["unit-testing","exception-handling","ada"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13073793,"title":"Exception Handling in Ada during Unit Test","body":"<p>I am attempting to write some unit tests for some Ada code I recently wrote, I have a particular case where I am expecting to get an Exception (if the code worked correctly I wouldn't but in this case all I'm doing is testing, not writing code). If I handle the exception in the Testing routine then I don't see how I can continue testing in that procedure.</p>\n\n<p>I.E. (This is very much an example and NOT compilable code)</p>\n\n<pre><code>procedure Test_Function is\nbegin\n  from -20 to 20\n     Result := SQRT(i);\n\n if Result = (Expected) then\n     print \"Passed\";\n end_if;\n\nexception:\n  print \"FAILED\";\nend Test_Function\n</code></pre>\n\n<p>My first thought is if I had a \"deeper function\" which actually did the call and the exception returned through that.</p>\n\n<p>I.E. (This is very much an example and NOT compilable code)</p>\n\n<pre><code>procedure Test_Function is\nbegin\n  from -20 to 20\n     Result := my_SQRT(i);\n\n if Result = (Expected) then\n     print \"Passed\";\n end_if;\n\nexception:\n  print \"FAILED\";\nend Test_Function\n\nfunction my_SQRT(integer) return Integer is\nbegin\n   return SQRT(i);\nexception:\n   return -1;\nend my_SQRT;\n</code></pre>\n\n<p>And in theory I expect that would work, I just hate to have to keep writing sub functions when my test_function, is expected to do the actual testing.</p>\n\n<p>Is there a way to continue execution after hitting the exception IN Test_Function, rather than having to write a wrapper function and calling through that?\nOR\nIs there a easier/better way to handle this kind of scenario?</p>\n\n<p>*Sorry for the poor code example, but I think the idea should be clear, if not I'll re-write the code.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","unit-testing","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":72,"score":0,"question_id":13213507,"title":"Unit testing a controller in ASP.NET MVC 3","body":"<pre><code>public Double Invert(Double? id)\n{\n    return (Double)(id / id);\n}\n</code></pre>\n\n<p>I have done this for this test but fails please can anyone help with this cos just started with unit testing</p>\n\n<pre><code>/* HINT:  Remember that you are passing Invert an *integer* so\n * the value of 1 / input is calculated using integer arithmetic. \n * */\n//Arrange\nvar controller = new UrlParameterController();\nint input = 7;\nDouble expected = 0.143d;\nDouble marginOfError = 0.001d;\n\n//Act\nvar result = controller.Invert(input);\n\n//Assert\nAssert.AreEqual(expected, result, marginOfError);\n\n/* NOTE  This time we use a different Assert.AreEqual() method, which\n * checks whether or not two Double values are within a specified\n * distance of one another.  This is a good way to deal with rounding\n * errors from floating point arithmetic.  Without the marginOfError \n * parameter the assertion fails.\n * */  \n</code></pre>\n"},{"tags":["java","unit-testing","gui","mocking"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":58,"score":6,"question_id":13212935,"title":"Should my unit tests of GUI components contain many more lines than the code under test?","body":"<p>This is a sanity check because I'm finding this to be true in our code. Unlike our functional code, the tests of stateful GUIs have an unfortunate amount of weight due to state setup, combinatorial case analysis, and mocking/faking neighbors/collaborators/listeners/etc. Am I missing something? Thanks for your feedback.</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>The tests are running in the JVM, everything is a POJO.</li>\n<li>So far we've gotten some simplification by increasing unit size: testing more pieces glued together.</li>\n</ul>\n\n<p>New Notes:</p>\n\n<ul>\n<li>We're using jUnit and Mockito. </li>\n</ul>\n"},{"tags":["c++","unit-testing","cppunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13210248,"title":"CppUnit creating a simple test","body":"<p>First whats the class I use if I want to setup a test like: </p>\n\n<pre><code>class MyClassTests \n    setup()\n    teardown()\n    testDoingSomething()\n    testDoingA()\n</code></pre>\n\n<p>Seems like the class to use is TestSuite? </p>\n\n<hr>\n\n<p>So now I just created a very simple class: </p>\n\n<pre><code># ParserUnitTests.h\n#include &lt;cppunit\\TestFixture.h&gt;;\n#include &lt;cppunit\\extensions\\HelperMacros.h&gt;\n\nclass ParserUnitTests : public CppUnit::TestFixture {\n\npublic:\n    void testCanDoUnitTest();\n};\n</code></pre>\n\n<p>And its corresponding cpp: </p>\n\n<pre><code>#include \"ParserUnitTests.h\"\n\nCPPUNIT_TEST_SUITE(ParserUnitTests);\n\nvoid ParserUnitTests::testCanDoUnitTest() {\n    CPPUNIT_ASSERT_EQUAL(1, 2, \"Expected failure\");\n}\n\nCPPUNIT_TEST(ParserUnitTests::testCanDoUnitTest);\n</code></pre>\n\n<p>I am getting errors like \"<em>expected a declaration</em>\" on the <code>CPPUNIT_TEST_SUITE</code> line... seems very different from where I come from ... more modern languages ... like JS/Python ... Seems like here its more explicit? I must tell CppUnit which class/test cases to run? Ok, but whats causing the errors? </p>\n\n<p>The code in the CppUnit cookbook is mainly snipplets and its hard to figure out what are the imports required and what should go where ... perhaps someone can guide me? </p>\n"},{"tags":["java","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":51,"score":-2,"question_id":13213162,"title":"Java junit testing with assertions on objects","body":"<p>the following code is in the setUp() method of class TestSegment:</p>\n\n<pre><code>    this.inputSource11 = new InputCell(1, 1);\n    this.activeSynapseObject = new Synapse(this.inputSource11);\n    this.inputSource11.setActiveState(true);\n    this.segmentObject.addSynapse(this.activeSynapseObject);\n</code></pre>\n\n<p>The following is the error in line 95 of TestSegment: </p>\n\n<pre><code>public void testGetSynapse()\n{\n    assertEquals(\n        this.activeSynapseObject,\n        this.segmentObject.getSynapse(inputSource11));\n}\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/RNvMN.jpg\" alt=\"\"></p>\n"},{"tags":["c#","unit-testing","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":456,"score":2,"question_id":5601679,"title":"How can I unit test that Windsor can resolve Asp.net MVC3 controller dependencies?","body":"<p>Currently I have Windsor controller factory that is working well.  However, I am changing my controllers a bit and having Windsor instantiate more data for controllers.  I forgot to update my Installer class and it failed.</p>\n\n<p>Thus, I realized this is a perfect instance for unit testing, so every time I run my unit tests it will verify that Windsor is set up correctly.</p>\n\n<p>Thus I created the following unit test:</p>\n\n<pre><code>    [TestMethod]\n    public void Windsor_Can_Resolve_HomeController_Dependencies()\n    {\n        // Setup\n        WindsorContainer container = new WindsorContainer();\n\n        // Act\n        HomeController controller = (HomeController)container.Kernel.Resolve(typeof(HomeController));\n    }\n</code></pre>\n\n<p>This is exactly the same code that exists in my <code>WindsorControllerFactory.GetControllerInstance()</code> method so I am not sure why this isn't working.  When this runs I get:</p>\n\n<pre><code>Test method MyApp.Tests.Controllers.HomeControllerTest.Windsor_Can_Resolve_HomeController_Dependencies threw exception: \nCastle.MicroKernel.ComponentNotFoundException: No component for supporting the service MyApp.Controllers.HomeController was found\n</code></pre>\n\n<p>I'm not sure how to tackle this.  The only thing I can think of is that since it's in my test project, and not my Asp.net MVC project it might not be automatically picking up my <code>CommandAndQueryInstaller</code> class, which contains all of my windsor type registration.</p>\n\n<p>Any advice for unit testing windsor dependency configuration?</p>\n"},{"tags":["java","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":13213477,"title":"Java assertEquals error with objects","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13213162/java-junit-testing-with-assertions-on-objects\">Java junit testing with assertions on objects</a>  </p>\n</blockquote>\n\n\n\n<p>the following code is in the setUp() method of class TestSegment:</p>\n\n<pre><code>    this.inputSource11 = new InputCell(1, 1);\n    this.activeSynapseObject = new Synapse(this.inputSource11);\n    this.inputSource11.setActiveState(true);\n    this.segmentObject.addSynapse(this.activeSynapseObject);\n</code></pre>\n\n<p>The following is the error in line 95 of TestSegment: </p>\n\n<pre><code>public void testGetSynapse()\n{\n    assertEquals(\n        this.activeSynapseObject,\n        this.segmentObject.getSynapse(inputSource11));\n}\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/RNvMN.jpg\" alt=\"\"></p>\n"},{"tags":["unit-testing","symfony2","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13212118,"title":"PHPUnit + Symfony does nothing","body":"<p>I just installed PHPUnit on OS X + MAMP. (My phpunit was installed in my MAMP folder, so I copied it to /usr/bin because I couldn't use the \"phpunit\" command in terminal without the path)</p>\n\n<h3>New Symfony folder</h3>\n\n<p>When I go to a new Symfony2 folder and I try <code>phpunit -c App/</code>the tests start and I get a green confirmation that all tests passed. </p>\n\n<pre><code>PHPUnit 3.7.8 by Sebastian Bergmann.\n\nConfiguration read from     \n/Users/username/Dropbox/www/symfonydev/Symfony/App/phpunit.xml.dist\n.\nTime: 0 seconds, Memory: 15.50Mb\nOK (1 test, 1 assertion)\n</code></pre>\n\n<p><br /> </p>\n\n<h3>Own symfony website</h3>\n\n<p>But when I go to my own little Symfony2 project and execute the same command, <strong>nothing happens! He doesn't even load the phpunit.xml.dist</strong>. I get no output at all on my terminal window.</p>\n\n<p><strong>The test file, however, does exist and is readable, I can start it by explicitly specifying it on the command line of phpunit:</strong></p>\n\n<p><code>phpunit -c app/ src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php</code>and this works. </p>\n\n<p>It seems that something is wrong with the phpunit.xml.dist. It's the default phpunit.xml.dist and I tried renaming it to phpunit.xml. But nothing happens. What could be the problem? I think he can't find my xml or use it, or maybe he can read the phpunit.xml but doesn't find my tests.</p>\n\n<p>Here's an <strong>example from my terminal</strong>: You see that the phpunit command doesn't do anything, except when I specify the test file...</p>\n\n<pre><code>MacBook-Pro:www username$ ls\nLICENSE     app     composer.json   composer.lock   composer.phar   src     vendor      web\nMacBook-Pro:www username$ ls app/\nAppCache.php        SymfonyRequirements.php cache           console         phpunit.xml.dist\nAppKernel.php       autoload.php        check.php       logs\nResources       bootstrap.php.cache config          phpunit.xml\nMacBook-Pro:www username$ phpunit -c app/\nMacBook-Pro:www username$ phpunit -c app/ src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php\nPHPUnit 3.7.8 by Sebastian Bergmann.\n\nConfiguration read from /Users/username/Dropbox/www/matchtracker.be/www/app/phpunit.xml\n\nF\n\nTime: 1 second, Memory: 21.75Mb\n\nThere was 1 failure:\n\n1) MatchTracker\\Bundle\\Tests\\Controller\\DefaultControllerTest::testIndex\nFailed asserting that 404 matches expected 200.\n\n/Users/username/Dropbox/www/matchtracker.be/www/src/MatchTracker/Bundle/Tests/Controller/AuthenticationControllerTest.php:28\n\nFAILURES!\nTests: 1, Assertions: 1, Failures: 1.\nMacBook-Pro:www username$\n</code></pre>\n"},{"tags":["asp.net",".net","unit-testing","user","identity"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":12780185,"title":"Writing Unit Test for methods that use User.Identity.Name in ASP.NET MVC","body":"<p>I am writing test cases using the Unit Test for ASP.NET MVC 4 with Web Api.</p>\n\n<p>Now I have an action which makes a call to some method I have defined in the service layer, where I have used the following line of code.</p>\n\n<pre><code>string username = User.Identity.Name;\n// do something with username\n// return something\n</code></pre>\n\n<p>Now how to I create unit test method for this, I am getting null reference exceptions. I am kinda new to writing unit test and stuff.</p>\n\n<p>And I want to use Unit Test only for this.</p>\n\n<p>Please help me out on this. Thanks.</p>\n"},{"tags":["php","unit-testing","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":34,"score":4,"question_id":13209812,"title":"YII - unit testing not working","body":"<p>When I run PHP unit test with YII framework I got following error:</p>\n\n<pre><code>PHP Fatal error:  Uncaught exception 'LogicException' with message 'Function 'phpunit_autoload' not found (function 'phpunit_autoload' not found or invalid function name)' in /var/www/yii/framework/YiiBase.php:628\n</code></pre>\n\n<p>Does anyone know how to fix this problem?</p>\n"},{"tags":["python","django","unit-testing","self"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":58,"score":4,"question_id":13210072,"title":"When I create a test method in Django, what exactly is 'self' referring to?","body":"<p>My understanding of 'self' is that it means something like \"an instance of the class which contains this method\". Thus, when the default django test reads:</p>\n\n<pre><code>class SimpleTest(TestCase):\n    def test_basic_addition(self):\n</code></pre>\n\n<p>we are in some sense passing to test_basic_addition an instance of SimpleTest, to which at some point the actions defined in the setUp method (if any) have been applied. Presumably <code>manage.py test</code> creates this instance somehow, but I don't really understand what it is! What's really going on here?</p>\n"},{"tags":["unit-testing","mstest","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13201566,"title":"How to get test result status from MSTest?","body":"<p>In NUnit, I can get the test result from <code>context.Result.State</code>. If its <code>NUnit.Framework.TestState.Success</code>, then I know the test passed.</p>\n\n<p>In MSTest, how do I get that info?</p>\n\n<p>I saw <code>context.Properties.Keys</code>, but none of them speak of the status of the test result.</p>\n"},{"tags":["unit-testing","naming-conventions"],"answer_count":7,"favorite_count":30,"up_vote_count":83,"down_vote_count":1,"view_count":15306,"score":82,"question_id":96297,"title":"What are some popular naming conventions for Unit Tests?","body":"<h2>General</h2>\n\n<ul>\n<li>Follow the same standards for all tests.</li>\n<li>Be clear about what each test state is.</li>\n<li>Be specific about the expected behavior.</li>\n</ul>\n\n<h2>Examples</h2>\n\n<p>1) MethodName_StateUnderTest_ExpectedBehavior</p>\n\n<pre><code>Public void Sum_NegativeNumberAs1stParam_ExceptionThrown() \n\nPublic void Sum_NegativeNumberAs2ndParam_ExceptionThrown () \n\nPublic void Sum_simpleValues_Calculated ()\n</code></pre>\n\n<p>source: <a href=\"http://weblogs.asp.net/rosherove/archive/2005/04/03/TestNamingStandards.aspx\">http://weblogs.asp.net/rosherove/archive/2005/04/03/TestNamingStandards.aspx</a></p>\n\n<p>2) Separating Each Word By Underscore</p>\n\n<pre><code>Public void Sum_Negative_Number_As_1st_Param_Exception_Thrown() \n\nPublic void Sum_Negative_Number_As_2nd_Param_Exception_Thrown () \n\nPublic void Sum_Simple_Values_Calculated ()\n</code></pre>\n\n<h2>Other</h2>\n\n<ul>\n<li>End method names with <em>Test</em></li>\n<li>Start method names with class name</li>\n</ul>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13195151,"title":"Unit Testing issue in Visual Studio 2012","body":"<p>Whenever I try to run any of the test from my test suite in Visual Studio 2012 I get </p>\n\n<blockquote>\n  <p>Test Failed - [test method name]</p>\n  \n  <p>Message: Failed to set up the execution context to run the test</p>\n</blockquote>\n\n<p>and my test is not even started (i.e. the source of the test failure is pointing at the beginning of the test method: </p>\n\n<blockquote>\n  <p>here--> TEST_METHOD([test method name])\n  {</p>\n  \n  <p>}</p>\n</blockquote>\n\n<p>What does this message mean, what could be the cause for it to appear and what should I do for my test to run correctly?</p>\n"},{"tags":["java","unit-testing","design-patterns","chain"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13208185,"title":"chain of responsibility pattern","body":"<p>I am trying to implement the chain of responsibility pattern, but it seems i am missing something because in the concrete classes the setnexthandler is not setting the next but is always the same. I guess my mistake is in the concrete classes in the processMalfunction() method in the else statems next.setNextHandler(next); i think it should be next.setNextHandler(Severity.Medium) for the first one. So here is the code if you could take a look. Here is the code.</p>\n\n<pre><code>public interface MalfunctionHandler \n{\n    public void processMalfunction(Malfunction malfunciton);\n    public void setNextHandler(MalfunctionHandler handler);\n}\n\npublic enum Severity \n{\n    TRIVIAL, LOW, MEDIUM, HIGH\n}\n\npublic class Malfunction\n{\n    /**\n     * severity is a type of Severity \n     */\n    Severity severity;\n\n    /**\n     * @param description describes the severity of the problem\n     */\n    String description;\n\n    Malfunction(Severity severity, String description)\n    {\n        if(description == null)\n        {\n            description = \"No description available. Probably serious.\";\n        }\n\n        if(description.isEmpty())\n        {\n            description = \"No description available. Probably serious.\";\n        }\n\n        this.severity = severity;\n        this.description = description;\n    }\n\n    public Severity getSeverity() \n    {\n        return severity;\n    }\n\n    public String getDescription()\n    {\n        return description;\n    }\n\n    public void setSeverity(Severity severity)\n    {\n        this.severity = severity;\n    }\n\n    public void setDescription(String description)\n    {\n        this.description = description;\n    }\n}\n\npublic class SpaceMonkey implements MalfunctionHandler \n{\n\n    Severity severity;\n    MalfunctionHandler next;\n    File read = new File(\"expected-bronze.txt\");\n    File f = new File(\"log-bronze.txt\");\n\n    SpaceMonkey(Severity severity)\n    {\n        this.severity = severity;\n        System.out.println(FileUtility.readFile(read));\n    }\n\n    @Override\n    public void processMalfunction(Malfunction malfunction)\n    {\n        if (malfunction.getSeverity() == Severity.LOW)\n        {\n           final String[] splits = FileUtility.readFile(read).split(\"problem.\");\n            for (String asset : splits)\n            {\n                if (asset.contains(\"Space monkey\"))\n                {\n                     FileUtility.writeFile(f, asset + \"problem.\"); \n                     System.out.println(asset + \"problem.\");\n                }\n            }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n}\n\npublic class ServiceRobot implements MalfunctionHandler\n{\n\n    Severity severity;\n    MalfunctionHandler next;\n     File read = new File(\"expected-bronze.txt\");\n      File f = new File(\"log-bronze.txt\");\n\n    ServiceRobot(Severity severity)\n    {\n        this.severity = severity;\n    }\n\n\n    @Override\n    public void processMalfunction(Malfunction malfuntion) \n    {\n\n\n        if (this.severity == severity)\n        {\n            String[] splits = FileUtility.readFile(read).split(\"problem.\");\n         for(String asset : splits)\n        {\n            if(asset.contains(\"Service robot\"))\n            {                  \n                 FileUtility.writeFile(f, asset + \"problem.\"); \n                 System.out.println(asset + \"problem.\");\n\n            }\n        }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n\n}\n\npublic class Engineer implements MalfunctionHandler\n{\n\n    Severity severity;\n    MalfunctionHandler next;\n    File read = new File(\"expected-bronze.txt\");\n\n    Engineer(Severity severity)\n    {\n        this.severity = severity;\n    }\n\n\n    @Override\n    public void processMalfunction(Malfunction malfuntion)\n    {\n        File f = new File(\"log-bronze.txt\");\n\n        if (this.severity == severity)\n        {\n            String[] splits = FileUtility.readFile(read).split(\"problem.\");\n         for(String asset : splits)\n        {\n            if(asset.contains(\"Engineer\"))\n            {\n                 FileUtility.writeFile(f, asset + \"problem.\"); \n                 System.out.println(asset + \"problem.\");\n\n            }\n        }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n\n}\n\npublic class Captain implements MalfunctionHandler\n{\n    Severity severity;\n    MalfunctionHandler next;\n    File read = new File(\"expected-bronze.txt\");\n\n    Captain(Severity severity)\n    {\n        this.severity = severity;\n    }\n    @Override\n    public void processMalfunction(Malfunction malfuntion)\n    {\n        File f = new File(\"log-bronze.txt\");\n\n        if (this.severity == severity)\n        {\n            String[] splits = FileUtility.readFile(read).split(\"problem.\");\n         for(String asset : splits)\n        {\n            if(asset.contains(\"Captain\"))\n            {\n                 FileUtility.writeFile(f, asset + \"problem.\"); \n                 System.out.println(asset + \"problem.\");\n\n            }\n        }\n        }\n        else\n        {\n            next.setNextHandler(next);\n        }\n    }\n\n    @Override\n    public void setNextHandler(MalfunctionHandler next)\n    {\n        this.next = next;\n    }\n\n}\n\npublic class FileUtility \n{\n\n    /** This method appends a single string to a text file.\n     * \n     * @param f The file to write to\n     * @param entry The string to append\n     */\n    public static void writeFile(File f, String entry) \n    {\n        try \n        {\n            final BufferedWriter out = new BufferedWriter(new FileWriter(f, true));\n            out.write(entry);\n            out.close();\n        } catch (IOException e) \n        {\n            System.err.println(\"Problem writing to the file\");\n        }\n    }\n\n    /** This method resets the named text file.\n     * \n     * @param f The file to reset\n     */\n    public static void resetFile(File f) {\n        try {\n            final BufferedWriter out = new BufferedWriter(new FileWriter(f, false));\n            out.write(\"\");\n            out.close();\n        } catch (IOException e) {\n            System.err.println(\"Problem reset the file\");\n        }\n    }\n\n    /** This method reads the contents of a text file.\n     * \n     * @param f The file to read from\n     * @return the contents of the text file as a single string\n     */\n    public static String readFile(File f) {\n        final StringBuilder sb = new StringBuilder();\n        try {\n            final Scanner scanner = new Scanner(f);\n            while (scanner.hasNextLine()) {\n                sb.append(scanner.nextLine());\n            }\n            scanner.close();\n        } catch (FileNotFoundException e) {\n            System.err.println(\"Problem reading from file\");\n        }\n        return sb.toString();\n    }\n}\n\n\npublic class MalfunctionHandlerTest {\n\n    /**\n     * No-args constructor.\n     */\n    public MalfunctionHandlerTest() {\n    }\n\n    /**\n     * Test of processMalfunction method.\n     */\n    @Test\n    public void testProcessMalfunction() {\n\n        // Instanciate malfunction handlers\n        final SpaceMonkey sm = new SpaceMonkey(Severity.TRIVIAL);\n        final ServiceRobot sr = new ServiceRobot(Severity.LOW);\n        final Engineer e = new Engineer(Severity.MEDIUM);\n        final Captain c = new Captain(Severity.HIGH);\n\n        // Construct chain of responsbility\n        sm.setNextHandler(sr); \n        sr.setNextHandler(e);\n        e.setNextHandler(c);\n\n        // Create malfunctions\n        final Malfunction m1 = new Malfunction(Severity.HIGH, \"Life support error. Oxygen \"\n                 + \"Recycling unit damaged, running at half efficiency\");      \n        final Malfunction m2  = new Malfunction(Severity.LOW, \"Communications error. Cannot \"\n                + \"find Jazz FM\");\n        final Malfunction m3 = new Malfunction(Severity.MEDIUM, \"Power supply error. Solar Panel \"\n                + \"2 damaged, running at 31.3333% efficiency\");\n        final Malfunction m4 = new Malfunction(Severity.MEDIUM, \"Thermal regulation error. Sensor \"\n                + \"damaged, manual temperature regulation needed\");\n        final Malfunction m5 = new Malfunction(Severity.TRIVIAL, \"Trash can full on C-Desk.\");\n        final Malfunction m6 = new Malfunction(Severity.LOW, \"Shower plug hole full of monkey hair\");\n        final Malfunction m7 = new Malfunction(Severity.HIGH, \"Proximity alert. Collision imminent\");\n\n        // Clean log file\n        FileUtility.resetFile(new File(\"log-bronze.txt\"));\n\n        // Process malfunctions\n        sm.processMalfunction(m1);\n        sm.processMalfunction(m2);\n        sm.processMalfunction(m3);\n        sm.processMalfunction(m4);\n        sm.processMalfunction(m5);\n        sm.processMalfunction(m6);\n        sm.processMalfunction(m7);\n\n        // Check log file\n        final String actualOutput = FileUtility.readFile(new File(\"log-bronze.txt\"));\n        final String expectedOutput = FileUtility.readFile(new File(\"expected-bronze.txt\"));\n        assertEquals(actualOutput, expectedOutput);\n    }\n}\n</code></pre>\n"},{"tags":["ruby","unit-testing","api"],"answer_count":3,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":1415,"score":8,"question_id":4812132,"title":"Writing unit tests in Ruby for a REST API","body":"<p>I've written a basic REST API using sinatra.</p>\n\n<p>Does anyone know the best way to write tests for it? I would like to do so using Ruby.</p>\n\n<p>I've done my initial testing using curl. But I'd like to do something more robust. This is my first API - is there anything specific I should be testing?</p>\n"},{"tags":["java","unit-testing","testing","tdd","webserver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13206194,"title":"How would I test a web server in Java?","body":"<p>I am basically practicing with Java socket programming by building client and server (not necessarily HTTP server). In brief, the clients are sending request through sockets to server and server adds requests to task queue. The thread pool initially has certain number of threads and each free one is assigned to one runnable task in the task queue. My web server also has a simple storage that stores and retrieves data from a file from disk. In this project, I have to take care of several concurrency issues. </p>\n\n<p>Basically, I have to build client, server, thread pool, handler, storage. However, I want to test thoroughly in a good systematic way (unit test, integration test, etc.). I don't have much experience in testing so I am looking for pointers, methodologies, frameworks, or tutorials. (I use Ant to automate building, and initially consider JUnit and EasyMock for testing) </p>\n\n<p><img src=\"http://i.stack.imgur.com/AGak3.png\" alt=\"architecture\"></p>\n"},{"tags":["python","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13206012,"title":"Can someone explain addTypeEqualityFunc in unittest to me?","body":"<p>I'm trying very hard to implement a custom comparison method with unittest, but no matter how hard I try, I can't seem to get it to work.</p>\n\n<p>I define my <code>__equals__</code> class in the custom object, and make sure it screams bloody murder onto the console. I call <code>addTypeEqualityFunc</code> in the <code>setUp</code> method of the test case class. I <code>assertEquals</code> on the output of a function against what's supposed to come out. I run my tests.</p>\n\n<p>An the tests fail. What gives?</p>\n"},{"tags":["unit-testing","mocking","moq","mstest"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":93,"score":4,"question_id":8651901,"title":"Generate mocked repository objects quickly using live data? Moq","body":"<p>I'm not even sure if there is a utility that allows this, but it seems like such a common need?</p>\n\n<p>Is there a program/library/component that will generate mocked .NET objects (repositories) that will yield some mocked data as certain database calls.</p>\n\n<p>Allow me to elaborate:\nIf I'm testing a repository (not unit testing, simply testing in a console window) and when I pass a selection criteria to my repository, it returns a list of objects.  I would /love/ for an ability to capture that list of objects and convert it to static setup C# code that would serve as a setup for a unit test.  My objects are quiet complex and it takes a long time to set them up properly.</p>\n\n<p>Is this possible?  My team is using Moq &amp; Ninject</p>\n"},{"tags":["javascript","unit-testing","geolocation","jasmine"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":113,"score":3,"question_id":11106008,"title":"How to fake return calls from the geolocator in jasmine","body":"<p>I have a function that calls the geolocator and i don't know how to test this function. I've tried spying on the geolocator and returning fake data but with no success, the original function is still used and so i would have to wait and i couldn't use mock data.</p>\n\n<pre><code>// this doesn't work        \nvar navigator_spy = spyOn( navigator.geolocation, 'getCurrentPosition' ).andReturn( {\n    coords : {\n        latitude : 63,\n        longitude : 143\n    }\n} );\n</code></pre>\n\n<p>anyone knows how i can do this?</p>\n"},{"tags":["unit-testing","moq","httppostedfile","httppostedfilebase"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":181,"score":1,"question_id":8810798,"title":"Moq'ing HttpPostedFile for 3rd Party API","body":"<p>I'm building a custom module by extending ActiveSocial for DotNetNuke and using ActiveSocial's  API that I have no control over... and I'm trying to unit test my code (using C#).</p>\n\n<p>In using this API - I can save images to AmazonS3 by calling their method and passing some info - including an HttpPostedFile object.</p>\n\n<p>So in my unit testing (far from expert) I was thinking of just making sure the file type of the HttpPostedFile is what I want (jpg/png) before passing to the API.  But I cannot mock out an HttpPostedFile.</p>\n\n<p>I've google'd and msdn'd and seen where some people were using HttpPostedFileBase - but I cannot pass nor cast that to an HttpPostedFile to the API.</p>\n\n<p>Granted - RIGHT NOW - my code doesn't do anything very complicated so I could just skip these types of test - but this beast is growing and will someday take over the world (fingers crossed) and I would therefore just like the confidence of the tests for if/when the complexity does change - nothing get's botched.</p>\n\n<p>Any ideas/suggestions?</p>\n"},{"tags":["objective-c","ios","unit-testing","ocunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13165581,"title":"Why is my class crashing my OCUnit test case with error code 138?","body":"<p>A class I wrote is crashing my test case with error code 138. The class returns an NSString with the user agent string from UIWebView:</p>\n\n<pre><code>@interface MyWebViewUserAgent : NSObject &lt;UIWebViewDelegate&gt; {\n    NSString* userAgent;\n    UIWebView* webView;\n}\n\n- (NSString*) userAgentString;\n\n@end\n\n#import \"MyWebViewUserAgent.h\"\n\n@implementation MyWebViewUserAgent\n\n- (NSString*) userAgentString {\n    if (userAgent != nil) return userAgent;\n\n    webView = [[UIWebView alloc] init];\n    webView.delegate = self;\n    [webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @\"http://127.0.0.1\"]]];\n\n    // Wait for the web view to load our bogus request and give us the secret user agent.\n        while (userAgent == nil) {\n        // This executes another run loop. \n        [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate: [NSDate distantFuture]];\n    }\n\n    NSString *currentDeviceType = [[UIDevice currentDevice] model];\n    NSRange range = [userAgent rangeOfString:currentDeviceType];\n\n    if (range.location == NSNotFound) {\n\n        // Should only happen when iPhone-targeted app is running on an iPad.\n        NSRange rangeToReplace = [userAgent rangeOfString:@\"iPhone;\"];\n        if (rangeToReplace.length &gt; 0) {\n            userAgent = [userAgent stringByReplacingCharactersInRange:rangeToReplace withString:@\"iPad;\"];\n        }\n    }\n    return userAgent;\n}\n\n- (BOOL) webView: (UIWebView*) web_view shouldStartLoadWithRequest: (NSURLRequest*) request navigationType: (UIWebViewNavigationType) navigation_type {\n    userAgent = [request valueForHTTPHeaderField: @\"User-Agent\"];\n    [webView release];\n    return NO; // Return no, we don't care about executing an actual request.\n}\n\n- (void) dealloc {\n    [super dealloc];\n}\n\n@end\n</code></pre>\n\n<p>Now, here is my test case:</p>\n\n<pre><code>#import &lt;SenTestingKit/SenTestingKit.h&gt;\n#import &lt;UIKit/UIKit.h&gt;\n#import \"MyWebViewUserAgent.h\"\n\n@interface MyUnitTests : SenTestCase {\n    MyWebViewUserAgent *ua;\n}\n\n@end\n\n@implementation MySDKUnitTests\n\n- (void)setUp\n{\n    [super setUp];\n}\n\n- (void)tearDown\n{\n    // Tear-down code here.\n    [super tearDown];\n}\n\n- (void)testUserAgentString {\n    ua = [[MyWebViewUserAgent alloc] init];\n    STAssertNotNil(ua, @\"User agent object is nil.\");\n    STAssertNotNil([ua userAgentString], @\"user agent string is nil\");\n    [ua release];\n}\n\n@end\n</code></pre>\n\n<p>The first <code>STAssertNotNil</code> in the <code>testUserAgentString</code> test works fine but the second <code>STAssertNotNil</code> is the line that crashes the test. Any ideas?</p>\n"},{"tags":["unit-testing","unittest++"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13203922,"title":"Linking Error with UnitTest++","body":"<p>I am getting an odd Unit Test ++ linking error using Xcode as my ide.\nNow I did set the project up with two targets. one target that will do the test the other will do nothing for now.</p>\n\n<p>Note I did link the library and ran the simple working example from the tutorial.\nand I compiled it using gcc 4.2.1 from macports.</p>\n\n<p>\"std::string::c_str() const\", referenced from:\n      UnitTest::MemoryOutStream::GetText() const in libUnitTest++.a(MemoryOutStream.o)\n  \"std::basic_ostringstream, std::allocator >::str() const\", referenced from:\n      UnitTest::MemoryOutStream::GetText() const in libUnitTest++.a(MemoryOutStream.o)\n  \"std::basic_ostream >::~basic_ostream()\", referenced from:\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(TestRunner.o)\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(Test.o)\n  \"std::basic_ostream >::~basic_ostream()\", referenced from:\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(TestRunner.o)\n      construction vtable for std::ostream-in-UnitTest::MemoryOutStream in libUnitTest++.a(Test.o)</p>\n"},{"tags":["java","unit-testing","collections"],"answer_count":2,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":250,"score":8,"question_id":7068503,"title":"Is there a testsuite for Java custom collections implementation?","body":"<p>Out of curiosity, I wrote an own simple implementation of <code>Set</code> for a special case (where the set of all possible entries is fixed, but it's no <code>enum</code>). It was actually quite easy, but obviously, my implementation is unusable without a lot of tests (and maybe even then, but that's another topic; it was mainly an exercise).</p>\n\n<p>So is there any testsuite available I could use for unit-testing it?</p>\n"},{"tags":["android","unit-testing","testing","cts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13201926,"title":"Android CTS Run String Of Tests","body":"<p>I know you can run test packages and individual tests in CTS. How can I run multiple tests from different packages? Specifically, I have 4 existing tests I want to run- 3 from androidmedia and 1 from androidmediastress. How can I run just those tests? Do I need to copy and paste those tests in their own app and add that app to a package?</p>\n\n<p>I'm new to CTS so the more detail you can include, the better. Thanks!</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13199848,"title":"Placement of success and failure test cases of the same method","body":"<p>Suppose I have a method named <code>foo</code> which, for certain set of input values, is expected to complete successfully and return a result, and for some other set of values, is expected to throw a certain exception. This method requires some things to have set up before it can be tested.</p>\n\n<p>Given these conditions, is it better to club success and failure tests in one test, or should I maintain these cases in separate test methods?</p>\n\n<p>In other words, which of the following two approaches is preferable?</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>@Test\npublic void testFoo() {\n  setUpThings();\n  // testing success case\n  assertEquals(foo(s), y);\n  // testing failure case\n  try {\n    foo(f);\n    fail(\"Expected an exception.\")\n  } catch (FooException ex) {\n  }\n}\n</code></pre>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>@Test\npublic void testFooSuccess() {\n  setUpThings();\n  assertEquals(foo(s), y);\n}\n\n@Test\npublic void testFooFailure() {\n  setUpThings();\n  try {\n    foo(f);\n    fail(\"Expected an exception.\")\n  } catch (FooException ex) {\n  }\n}\n</code></pre>\n"},{"tags":["ruby-on-rails","unit-testing","automated-tests"],"answer_count":6,"favorite_count":6,"up_vote_count":14,"down_vote_count":0,"view_count":3883,"score":14,"question_id":274349,"title":"running single rails unit/functional test","body":"<p>As title. </p>\n\n<p>ruby test/functionals/whatevertest.rb doesn't work, that requires me to replace all <code>require 'test_helper'</code> to <code>require File.dirname(__FILE__) + '/../test_helper'</code>. For some reason most of those test templates have such issue, so I rather to see if there is a hack I could get around it.</p>\n"},{"tags":["javascript","unit-testing","coffeescript","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13197628,"title":"how to dry up these tests with jasmin.js","body":"<p>I have a lot of tests like the following :</p>\n\n<pre><code>it \"Should call togglePadding if df-padding is checked\", -&gt;\n        spyOn(App.columnsSetupBuildingBlockController.content, 'togglePadding')\n        App.view.set(\"paddingChecked\", null)\n\n        Em.run -&gt;\n            App.view.set(\"paddingChecked\", true)\n\n        expect(App.columnsSetupBuildingBlockController.content.togglePadding).toHaveBeenCalledWith(true)\n\n    it \"Should call togglePadding if df-padding is unchecked\", -&gt;\n        spyOn(App.columnsSetupBuildingBlockController.content, 'togglePadding')\n        App.view.set(\"paddingChecked\", true)\n\n        Em.run -&gt;\n            App.view.set(\"paddingChecked\", null)\n\n        expect(App.columnsSetupBuildingBlockController.content.togglePadding).toHaveBeenCalledWith(null)\n</code></pre>\n\n<p>There is only a fews different values in each test that are different.   How can i write a shared function to dry up the duplicated bits and make it look a lot cleaner ?</p>\n\n<p>I also have the same tests for testing margin, border etc</p>\n\n<p>Please help.</p>\n\n<p>Thanks\nRick</p>\n"},{"tags":["c#","unit-testing","datetime","reflection",".net-assembly"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":13197885,"title":"How to find out if DateTime.Now was used to set the value in certain assemblies?","body":"<p>how to find out if DateTime.Now was used to set the value in certain assemblies?</p>\n\n<p>I'm trying to write a test here which will tell if DateTime.Now was used in given assembly list or not? If DateTime.Now was used to set value for any kind of field or property test will fail if not it will pass. </p>\n\n<p>How could i write something like that? Thank you all for any help on this one.</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","stub"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13121079,"title":"Test behavior in vs2012 unit test framework","body":"<p>Below is my test:</p>\n\n<pre><code>   [TestMethod]\n    public void GetSubscribers()\n    {\n\n        stubSubscriptionMng.GetModelSubscribersInt32String = (mgr, i) =&gt; new List&lt;IModel&gt;() { modelStub };\n        var dispatcher = UnitySingleton.Instance.UnityContainer.Resolve&lt;Dispatcher&gt;();\n        IDispatchingMessage message = new DispatchingMessage(Guid.NewGuid().ToString(), \"MessageName\", \"MessageVal\", 1);\n        dispatcher.Publish(message);\n\n    }\n</code></pre>\n\n<p>This is the method being tested:</p>\n\n<pre><code>  if (message.UniverseId &gt; 0 &amp;&amp; !string.IsNullOrEmpty(message.EntityId) &amp;&amp; !string.IsNullOrWhiteSpace(message.MessageName))\n            {\n                //the modelMgr will forword the the relevant Data to the relevant Models\n                IList&lt;IModel&gt; models = subscriptionService.GetModelSubscribers(message.UniverseId, message.MessageName);\n                Parallel.ForEach(models, (model) =&gt;\n                {\n                    try\n                    {\n                        model.Update(message);\n                    }\n                    catch (Exception ex)\n                    {\n                        ResourceManager.Instance.Logger.LogException(ex);\n                    }\n                });\n            }\n</code></pre>\n\n<p>Each model is being called with the <code>void Update()</code> method. Is there a way to verify this behavior? To verify the method had been called?\nSomething equivalent to <code>Expect()</code> and <code>verifyAllExpectations()</code> in <a href=\"http://ayende.com/wiki/Rhino%20Mocks%203.5.ashx?AspxAutoDetectCookieSupport=1\" rel=\"nofollow\">Rhino mocks</a>?</p>\n\n<hr>\n\n<p>I found a workaround solution in the <a href=\"http://stackoverflow.com/questions/10390422/how-can-i-verify-that-a-microsoft-fakes-beta-stub-shim-was-called-like-assert\">following post</a>.</p>\n"},{"tags":["c++","unit-testing","cross-platform","code-coverage","cppunit"],"answer_count":5,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":5963,"score":9,"question_id":33042,"title":"How can I measure CppUnit test coverage (on win32 and Unix)?","body":"<p>I have a very large code base that contains extensive unit tests (using CppUnit). <b>I need to work out what percentage of the code is exercised by these tests</b>, and (ideally) generate some sort of report that tells me on a per-library or per-file basis, how much of the code was exercised.</p>\n\n<p>Here's the kicker: this has to run completely unnatended (eventually inside a continuous integration build), and has to be cross platform (well, WIN32 and *nix at least).</p>\n\n<p>Can anyone suggest a tool, or set of tools that can help me do this? I can't change away from CppUnit (nor would I want to - it kicks ass), but otherwise I'm eager to hear any recommendations you might have.</p>\n\n<p>Cheers,</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4","moq","modelmetadataprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13192697,"title":"Using a custom ModelMetadataProvider in a unit test","body":"<p>Pretty new to MVC so hopefully this is a simple question.</p>\n\n<p>I have written a custom binding attribute that requires access to the <code>httpContext</code>. In order to inject a mock <code>httpContext</code> during unit tests, I have written an <code>InjectingMetadataProvider</code> that populates the <code>Context</code> property on any of my custom attributes.</p>\n\n<p>I have managed to get this to work in the following test:</p>\n\n<pre><code>[TestMethod]\npublic void Marker_ShouldBind_Id()\n{\n    // Arrange\n    var formCollection = new NameValueCollection \n    { \n        { \"id\", \"2\" }\n    };\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.Setup(c =&gt; c.User).Returns((IPrincipal)null); \n\n    var metaProvider = new InjectingMetadataProvider(context.Object);\n    ModelMetadataProviders.Current = metaProvider;  //why do I need this?\n\n    var bindingContext = new ModelBindingContext\n    {\n        ModelName     = string.Empty,\n        ValueProvider = new NameValueCollectionValueProvider(formCollection, null),\n        ModelMetadata = metaProvider.GetMetadataForType(null, typeof(Marker)),\n    };\n\n    var binder = new DefaultModelBinder();\n\n    // Act\n    var marker = (Marker)binder.BindModel(new ControllerContext(), bindingContext);\n\n    // Assert\n    marker.Id.Should().Be(2);\n}\n</code></pre>\n\n<p>However, if I comment out the line that sets my <code>InjectingMetadataProvider</code> to <code>ModelMetadataProviders.Current</code>, then my <code>InjectingMetadataProvider.CreateMetadata()</code> override gets handed a blank list of attributes, and so the test fails because my custom attributes don't get their context set.</p>\n\n<p>Why do I need to set it to <code>Current</code> when I'm using it explicitly anyway? I don't want to be setting static stuff in my tests.</p>\n\n<p>I may be doing something stupid because I'm feeling in the dark a bit at the moment due to my unfamiliarity with the framework.</p>\n"},{"tags":["java","unit-testing","wicket","read-only","wicket-tester"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13192669,"title":"How do you test Wicket TextFields for read-only?","body":"<p>I want to test that my Wicket <code>TextField</code> is set to <code>readonly</code>. I have set up my <code>WicketTester</code> but that just supports <code>assertDisabled()</code> which is useless and fails in my case. </p>\n\n<p>I already tried <code>tester.getComponentFromLastRenderedPage(compName).getString(\"readonly\")</code> and \n<code>tester.getComponentFromLastRenderedPage(compName).getMarkupAttributes().get(\"readonly\")</code> which both sounded somewhat promising to me but failed to deliver. </p>\n"},{"tags":["javascript","unit-testing","integration-testing","angularjs","angular"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13197272,"title":"Confusion between E2E testing, Unit testing and mocking data with $httpBackend","body":"<p>We've just started developing a web app with Angular and we're having some problems with testing it properly so we could use some advice. </p>\n\n<p>Generally, there are the following components to test:</p>\n\n<ol>\n<li>Web API</li>\n<li>Angular Controllers</li>\n<li>Angular routing</li>\n<li>HTML rendering and Angular binding of Controllers to the HTML elements</li>\n</ol>\n\n<p>How does one test all of this with minimum effort and none, if possible overlap?</p>\n\n<p>For any database-centric application, complete integration testing (i.e. with a live server, connected to a database loaded with data) would be particularly messy because there would have to be a process that generates sufficient data for all tests and resets the DB and tests would have to be careful not to modify each other's data. (if I'm missing something here please let me know)</p>\n\n<p>Given the above point, I'm assuming it is best to severe the link between server and client and run the Angular tests using mock data only.</p>\n\n<p>Also, I'm assuming that if E2E testing takes care of all possible scenarios, unit testing controllers is redundant as their values are bound to the model (and would thus be testing all of 2, 3 and 4 above). Unit testing would only be helpful in very complex controllers or to test services and directives.</p>\n\n<p>However, we could not find any information on how to mock stuff with <code>$httpBackend</code> on a per-test basis like you would do in unit tests, using <code>expect*()</code>. Angular docs seem to suggest using <code>when*()</code> plus the occasional <code>passthrough()</code> when necessary. </p>\n\n<p>But, this poses the aforementioned problem of creating test data for all scenarios and you'd probably need to reset the in-memory DB before each test to be sure the tests are not affected. Also, you're losing the safety of using <code>$httpBackEnd.expect*()</code> which checks there are no missing or redundant calls to the server - which would suggest to me that it would require unit testing controllers also to check this.</p>\n\n<p>Can someone provide a detailed testing strategy for AngularJS apps that addresses the testing of the 4 components above as well as the concerns written above?</p>\n"},{"tags":["unit-testing","ocmock"],"answer_count":2,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":1146,"score":3,"question_id":5658501,"title":"How can the return value of an OCMock stub be changed?","body":"<p>It seems that the first time I add <em>andReturnValue</em> on an OCMock stub, that return value is set in stone. For example:</p>\n\n<pre><code>id physics = [OCMockObject niceMockForClass:[DynamicPhysicsComponent class]\nEntity *testEntity = [Entity entityWithPhysicsComponent:physics];\nCGPoint velocity1 = CGPointMake(100, 100);\nCGPoint velocity2 = CGPointZero;\n[[[physics stub] andReturnValue:OCMOCK_VALUE(velocity1)] getCurrentVelocity];\n[testEntity update:0.1];\n[[[physics stub] andReturnValue:OCMOCK_VALUE(velocity2)] getCurrentVelocity];\n[testEntity update:0.1];\n</code></pre>\n\n<p>The stubbed method is called in [testEntity update]. But each time the stubbed method is returning the velocity1 value, so I guess the second attempt to set the methods return value isn't honoured.</p>\n\n<p>Is there a way to do do this in OCMock?</p>\n"},{"tags":["unit-testing","ejb","jersey","jax-rs"],"answer_count":1,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":282,"score":9,"question_id":11562367,"title":"hooking into @EJB or @PersistenceContext injection in JAX-RS unit tests","body":"<p>I'm enjoying learning JAX-RS and Jersey, but I've hit a roadblock trying to test a simple resource that needs a DAO injected, something like this:</p>\n\n<pre><code>@Stateless\n@Path(\"simple\")\npublic class SimpleResource {\n\n    @PersistenceContext\n    private EntityManager em;\n\n// @GET, etc...\n\n}\n</code></pre>\n\n<p>(I'll be moving to a more abstracted DAO pattern, but the problem is the same, i.e., how do I inject the @EJB DAO?)</p>\n\n<p>In my unit tests I'm using a embedded Jetty server that configures Jersey in its web.xml, and I'd like to hook into the resource's lifecycle so that I can inject a mock EntityManager, but I've not found a clean answer after a lot of searching. Can you help? Some possible directions I've come across:</p>\n\n<p><strong>1) Use JNDI context lookup in my code to get the DAO bean, and register the mock object in the tests.</strong></p>\n\n<p>Instead of @EJB or @PersistenceContext, use something like this in the resource's constructor:</p>\n\n<pre><code>  theDAO = (DAOImpl) new InitialContext().lookup(\"java:global/EJB/DAOImpl\");\n</code></pre>\n\n<p>However, that means my test environment needs to support JNDI, and doing so in Jetty will probably involve some pain. Plus, it doesn't use the clean annotation approach.</p>\n\n<p><strong>2) Use method injection.</strong></p>\n\n<p>Inject into the method so that I can set the DAO post-instantiation, e.g.,</p>\n\n<pre><code>@PersistenceContext(name = \"persistence/pu00\")\npublic void setPersistenceUnit00(final EntityManager em) {\n    em00 = em;\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>private MyEjbInterface myEjb;\n@EJB(mappedName=\"ejb/MyEjb\")\npublic void setMyEjb(MyEjb myEjb) {\n    this.myEjb = myEjb;\n}\n</code></pre>\n\n<p>However, to do this I need the Jersey-instantiated instance, e.g., SimpleResource. How do I get that?</p>\n\n<p><strong>3) Use reflection.</strong></p>\n\n<p>A kind of DIY injection, something like:</p>\n\n<pre><code>public static void setPrivateField(Class&lt;? extends Object&gt; instanceFieldClass, Object instance, String fieldName, Object fieldValue) {\n    Field setId = instanceFieldClass.getDeclaredField(fieldName);\n    setId.setAccessible(true);\n    setId.set(instance, fieldValue);\n}\n</code></pre>\n\n<p>Again, I need the Jersey-instantiated instance.</p>\n\n<p><strong>4) Use an Injection Provider.</strong></p>\n\n<p>I'm still sketchy on how this works, but it looks like Jersey provides a means of defining customized injectable annotations, e.g.,</p>\n\n<pre><code>    @Provider\n    public class EJBProvider implements InjectableProvider&lt;EJB, Type&gt; {\n\n    public ComponentScope getScope() {\n    return ComponentScope.Singleton;\n    }\n\n    public Injectable getInjectable(ComponentContext cc, EJB ejb, Type t) {\n    if (!(t instanceof Class)) {\n        return null;\n    }\n    try {\n        Class c = (Class) t;\n        Context ic = new InitialContext();\n        final Object o = ic.lookup(c.getName());\n        return new Injectable&lt;Object&gt;() {\n        public Object getValue() {\n            return o;\n        }\n        };\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n    }\n}\n</code></pre>\n\n<p>A variation using a helper class:</p>\n\n<pre><code>Server server = new Server(8080);\nContext root = new Context(server,\"/\",Context.SESSIONS);\n\nResourceConfig rc = new PackagesResourceConfig(\"edu.mit.senseable.livesingapore.platform.restws.representations\");\nrc.getSingletons().add(new SingletonTypeInjectableProvider&lt;javax.ws.rs.core.Context, Myobj&gt;(Myobj.class, new Myobj(12,13)){});\n\nroot.addServlet(new ServletHolder(new ServletContainer(rc)), \"/\");\nserver.start();\n</code></pre>\n\n<p>With this use:</p>\n\n<pre><code>@Path(\"/helloworld\")\npublic class HelloWorldResource {\n    @Context Myobj myClass;\n    ....\n}\n</code></pre>\n\n<p>Is this viable for @EJB or @PersistenceContext?</p>\n\n<p><strong>5) Extend javax.ws.rs.core.Application.</strong></p>\n\n<p>Sketchy on this, but:</p>\n\n<pre><code>@javax.ws.rs.ApplicationPath(\"application\")\npublic class InjectionApplication extends javax.ws.rs.core.Application {\n\n  private Set&lt;Object&gt; singletons = new HashSet&lt;Object&gt;();\n  private Set&lt;Class&lt;?&gt;&gt; classes = new HashSet&lt;Class&lt;?&gt;&gt;();\n\n  public InjectionApplication() {\n    // no instance is created, just class is listed\n    classes.add(BookResource.class);\n  }\n\n  @Override\n  public Set&lt;Class&lt;?&gt;&gt; getClasses() {\n    return classes;\n  }\n\n  @Override\n  public Set&lt;Object&gt; getSingletons() {\n    return singletons;\n  }\n}\n</code></pre>\n\n<p><strong>6) Extend ServletContainer.</strong></p>\n\n<p>An older style of using InjectableProvider? Looks more complex:</p>\n\n<pre><code>public class ServletAdapter extends ServletContainer {\n\n@Override\nprotected void configure(ServletConfig servletConfig, ResourceConfig rc, WebApplication wa) {\n    super.configure(servletConfig, rc, wa);\n\n    rc.getSingletons().add(new InjectableProvider&lt;Resource, Type&gt;() {\n\n        public ComponentScope getScope() {\n            return ComponentScope.Singleton;\n        }\n\n        public Injectable&lt;Object&gt; getInjectable(ComponentContext ic, Resource r, Type c) {\n            final Holder value = new Holder();\n\n                Context ctx = new InitialContext();\n                try {\n                    value.value = ctx.lookup(r.name());\n                } catch (NamingException ex) {\n\n                    value.value = ctx.lookup(\"java:comp/env/\" + r.name());\n                }\n\n            return new Injectable&lt;Object&gt;() {\n                public Object getValue() {\n                    return value.value;\n                }\n            };\n        }\n    });\n}\n}  \n</code></pre>\n\n<p><strong>7) Use an embedded EJB container.</strong></p>\n\n<p>E.g., <a href=\"http://openejb.apache.org\">http://openejb.apache.org</a>. This is pretty heavy, and I expect it's going to be messy to get working. (In fact, what started me down the \"Jetty + Jersey\" route was a bug in GlassFish Embedded around security logins. I also looked at other Java EE 6 application containers like JBoss AS, but each had problems in embedded mode, with limited user community support.)</p>\n\n<p><strong>8) Use a third-party IoC library like Spring or Guice.</strong></p>\n\n<p>Spring is apparently commonly used for solving these kinds of problems (injecting mocks when unit testing), but I wanted to avoid having to learn another big set of APIs - pure Java EE has been enough of a challenge! But I'm game if it's the best solution. I haven't yet looked carefully into Spring or Guice.</p>\n\n<p>Have you used any of these successfully? Any other solutions you like? I'm really looking forward to your advice on this. Thanks in advance -- matt</p>\n"},{"tags":["python","unit-testing","sockets","simplehttpserver"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13195536,"title":"Executing an asynchronous test in Python","body":"<p>I need to do the following test:</p>\n\n<ul>\n<li>send a GET request to a server (http://remote/...)</li>\n<li>wait for the server to send a POST request in response (http://local/...)</li>\n<li>parse the POST data and do some assertions</li>\n</ul>\n\n<p>Selenium does not fit this case: it can't listen to connections, and I can send a GET without Selenium as well.</p>\n\n<p>so, I make a unit test:</p>\n\n<pre><code>class MobiMoneyTestCase(TestCase):\ndef test_can_send_response(self):\n    resp = requests.post('http://url/api/', data={'callback': 'http://localhost:8000'})\n\n    class Handler(SimpleHTTPRequestHandler):\n        def do_GET(self):\n            assert self.path == '...'\n\n    httpd = SocketServer.ThreadingTCPServer(('localhost', 8000),Handler)\n</code></pre>\n\n<p>The test has to wait 5 seconds for the POST request and then fail if nothing happened. How can I merge these items in the test? If I put <code>sleep(5)</code> in the <code>test_can...</code>, the <code>httpd</code> handler does not reply until the countdown ends.</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":13195821,"title":"Visual Studio 2010 - UnitTest - Exception while using generics and AssemblyInitialize","body":"<p>I have a problem with unit tests in Visual Studio 2010. I've pasted the simplified code below.</p>\n\n<pre><code>[TestClass]\npublic class TestClassA&lt;T&gt;\n{\n    [AssemblyInitialize()]\n    public static void Initialize(TestContext testContext) {}\n}\n\n[TestClass]\npublic class TestClassB : TestClassA&lt;String&gt;\n{\n    [TestMethod]\n    public void TestMethod()\n    {\n       Assert.IsTrue(true);\n    }\n}\n</code></pre>\n\n<p>When I run <code>TestMethod()</code>, I get the following exception:</p>\n\n<pre><code>Assembly Initialization method TestProject.TestClassA`1.Initialize threw exception. System.InvalidOperationException: System.InvalidOperationException: Late bound operations cannot be performed on types or methods for which ContainsGenericParameters is true.. Aborting test execution.\n\nat System.Reflection.RuntimeMethodInfo.ThrowNoInvokeException()\nat System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)\nat System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\nat Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestExecuter.RunAssemblyInitializeMethod()\n</code></pre>\n\n<p>When I google this bug, I can find advice how to fix code that uses reflection to call the <a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.90%29.aspx\" rel=\"nofollow\">[AssemblyInitialize]</a> method. But that code is not mine, it's:          </p>\n\n<pre><code>Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestExecuter.RunAssemblyInitializeMethod()\n</code></pre>\n\n<p>I can use <a href=\"http://msdn.microsoft.com/en-us/library/ms245248%28v=vs.90%29.aspx\" rel=\"nofollow\">[ClassInitialize]</a> method instead of <a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.90%29.aspx\" rel=\"nofollow\">[AssemblyInitialize]</a> and it works, but still I would like to use [AssemblyInitialize] method.</p>\n\n<p>Thank you in advance for any suggustions.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12860609,"title":"Visual Studio 2012 ExcludeFromCodeCoverage Method Shows In Results","body":"<p>I have the following method:</p>\n\n<pre><code>[ExcludeFromCodeCoverage]\nprivate static string GetAuthorizationToken(HttpActionContext actionContext)\n{\n    var authorization = actionContext.Request.Headers.FirstOrDefault(h =&gt; h.Key.Equals(\"Authorization\"));\n    // ... removed for brevity\n}\n</code></pre>\n\n<p>The <code>ExcludeFromCodeCoverage</code> attribute works for the whole method, except for <code>h.Key.Equals(\"Authorization\")</code>, which shows as uncovered despite the attribute on the method.</p>\n\n<p>How can I exclude this symbol from code coverage results?</p>\n"},{"tags":["unit-testing","nunit","mstest","mbunit","xunit.net"],"answer_count":8,"favorite_count":58,"up_vote_count":158,"down_vote_count":0,"view_count":32994,"score":158,"question_id":261139,"title":"NUnit vs. MbUnit vs. MSTest vs. xUnit.net","body":"<p>There are quite a lot of unittesting frameworks out there for .NET. I found this little feature comparison: <a href=\"http://xunit.codeplex.com/wikipage?title=Comparisons\" rel=\"nofollow\">http://xunit.codeplex.com/wikipage?title=Comparisons</a></p>\n\n<p>Now I am to choose the best one for us. But how? Does it matter? Which one is most future proof and has a decent momentum behind it? Should I care about the features? While xUnit seems to be most modern and specifically designed for .NET, NUnit again seems to be the one that is widely accepted. MSTest again is already integrated into Visual Studio ...</p>\n"},{"tags":["c++","unit-testing","callback","cppunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13192665,"title":"how to unit test an exception thown from a call back function","body":"<p>I am trying to unit test a function which returns instantly and then returns the actual result by a callback function. Can anybody help me in how to unit test this function using cppunit.</p>\n\n<p>for eg .</p>\n\n<p>MyFunction(callback call)\n{\n  .....</p>\n\n<p>}</p>\n\n<p>MyFunction returns success instantly and then the actual result in a callback function, from the callback an exception myexception is thrown how can I unit test to make sure that  myexception  is thrown?</p>\n"},{"tags":["c#",".net","unit-testing","naudio"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12803619,"title":"Unit Test NAudio using WaveInEvent and WaveOutEvent","body":"<h2>The Error</h2>\n\n<pre><code>The test adapter 'UnitTestAdapter' threw an exception while running test 'TestMP3CompressionFileNameMissingExtension'. Exception has been thrown by the target of an invocation.\nAttempted to read or write protected memory. This is often an indication that other memory is corrupt.\n</code></pre>\n\n<h2>Reproduction Steps</h2>\n\n<p>Simply run all tests in the solution and <strong><em>one</em></strong> of the test will fail with this error.</p>\n\n<h2>The Tests</h2>\n\n<p>Below is a couple of the tests. All of the tests kind of follow a similar pattern, sure they do differen things, but the test that it fails on is about as consistent as the weather so it doesn't really matter.</p>\n\n<pre><code>[TestClass]\npublic class Mp3CompressionTests\n{\n    [TestMethod]\n    public void TestMP3Compression()\n    {\n        var compressor = new Mp3Compressor();\n\n        var session = RecordingSessionHelper.Instance.GetRecordedSession(compressor: compressor);\n        var directoryBuilder = new Mp3TempFileNameBuilder();\n        var deploymentPath = Path.Combine(directoryBuilder.DirectoryPath, \"compressed\");\n\n        if (!Directory.Exists(deploymentPath))\n        {\n            Directory.CreateDirectory(deploymentPath);\n        }\n\n        session.CurrentRecording.Deploy(deploymentPath);\n\n        var filePath = Path.Combine(directoryBuilder.DirectoryPath, \"compressed\", session.CurrentRecording.DeployedFileName);\n\n        Assert.IsTrue(File.Exists(filePath));\n        Assert.IsTrue(File.Exists(Path.ChangeExtension(filePath, \"idx\")));\n    }\n\n    [TestMethod]\n    public void TestMP3CompressionFileNameMissingExtension()\n    {\n        var compressor = new Mp3Compressor();\n\n        var session = RecordingSessionHelper.Instance.GetRecordedSession(compressor: compressor);\n        var directoryBuilder = new Mp3TempFileNameBuilder();\n        var deploymentPath = Path.Combine(directoryBuilder.DirectoryPath, \"compressed\");\n\n        if (!Directory.Exists(deploymentPath))\n        {\n            Directory.CreateDirectory(deploymentPath);\n        }\n\n        compressor.CompressFile(session.CurrentRecording.TempFileName, Path.GetFileNameWithoutExtension(session.CurrentRecording.DeployedFileName));\n\n        var filePath = Path.Combine(Path.GetDirectoryName(session.CurrentRecording.TempFileName), session.CurrentRecording.DeployedFileName);\n\n        Assert.IsTrue(File.Exists(filePath));\n    }\n}\n</code></pre>\n\n<h2>The RecordingSessionHelper Class</h2>\n\n<p>I built this class just to make it easier to construct a recording session during unit testing.</p>\n\n<pre><code>internal class RecordingSessionHelper\n{\n    internal static RecordingSessionHelper Instance\n    {\n        get\n        {\n            return new RecordingSessionHelper();\n        }\n    }\n\n    internal IRecordingSession GetRecordingSession(\n        IAggregator aggregator = null,\n        ITempFileNameBuilder fileBuilder = null,\n        IRecordingDeployer deployer = null,\n        IRecordingCompressor compressor = null)\n    {\n        aggregator = aggregator ?? new SampleAggregator();\n        fileBuilder = fileBuilder ?? new WavTempFileNameBuilder();\n        deployer = deployer ?? new SharedDirectoryDeployer();\n        compressor = compressor ?? new GsmCompressor();\n\n        return new RecordingSession(aggregator, fileBuilder, deployer, compressor);\n    }\n\n    internal IRecordingSession GetRecordedSession(\n        IAggregator aggregator = null,\n        ITempFileNameBuilder fileBuilder = null,\n        IRecordingDeployer deployer = null,\n        IRecordingCompressor compressor = null)\n    {\n        aggregator = aggregator ?? new SampleAggregator();\n        fileBuilder = fileBuilder ?? new WavTempFileNameBuilder();\n        deployer = deployer ?? new SharedDirectoryDeployer();\n        compressor = compressor ?? new GsmCompressor();\n\n        ManualResetEvent eventRaised = new ManualResetEvent(false);\n\n        var session = GetRecordingSession(aggregator, fileBuilder, deployer, compressor);\n        session.RecordingStopped += (s, args) =&gt; { eventRaised.Set(); };\n\n        session.StartRecording(\"1\", \"01\", \"Test Name\", new WaveInEvent(), new WaveFileWriter(fileBuilder.FileName, compressor.RecordingFormat));\n        Thread.Sleep(1000);\n        session.StopRecording();\n\n        eventRaised.WaitOne();\n\n        return session;\n    }\n}\n</code></pre>\n\n<h2>The RecordingSession Class</h2>\n\n<p>This is where I'm obviously doing something wrong. In the tests I'm using the <code>WaveInEvent</code> class instead of the <code>WaveIn</code> because the <code>WaveInEvent</code> class doesn't use <code>windowed events</code>.</p>\n\n<pre><code>public class RecordingSession : IRecordingSession\n{\n    private IWaveIn _input;\n    private WaveFormat _waveFormat;\n    private Stream _writer;\n    private IAggregator _aggregator;\n    private ITempFileNameBuilder _tempFileNameBuilder;\n    private IRecordingDeployer _recordingDeployer;\n    private IRecordingCompressor _recordingCompressor;\n\n    public RecordingSession(\n        IAggregator aggregator,\n        ITempFileNameBuilder tempFileNameBuilder,\n        IRecordingDeployer recordingDeployer,\n        IRecordingCompressor recordingCompressor)\n    {\n        this.Recordings = new List&lt;RecordingTrack&gt;();\n\n        _aggregator = aggregator;\n        _tempFileNameBuilder = tempFileNameBuilder;\n        _recordingDeployer = recordingDeployer;\n        _recordingCompressor = recordingCompressor;\n\n        _waveFormat = _recordingCompressor.RecordingFormat;\n\n        _aggregator.NotificationCount = _waveFormat.SampleRate / 10;\n        _aggregator.MaximumCalculated += (s, args) =&gt; { OnMaximumCalculated(args); };\n    }\n\n    public event EventHandler&lt;WaveInEventArgs&gt; DataAvailable;\n\n    public event EventHandler RecordingStopped;\n\n    public event EventHandler&lt;MaxSampleEventArgs&gt; MaximumCalculated;\n\n    public RecordingTrack CurrentRecording\n    {\n        get\n        {\n            return this.Recordings.LastOrDefault();\n        }\n    }\n\n    public RecordingTrack LastRecording\n    {\n        get\n        {\n            if (this.Recordings.Count &lt;= 1)\n            {\n                return null;\n            }\n\n            return this.Recordings[this.Recordings.Count - 2];\n        }\n    }\n\n    public List&lt;RecordingTrack&gt; Recordings { get; private set; }\n\n    public bool IsRecording { get; private set; }\n\n    public float MicrophoneLevel { get; set; }\n\n    public WaveFormat RecordingFormat { get { return _waveFormat; } }\n\n    public void StartRecording(string claimNo, string ip_no, string ip_name, IWaveIn input, Stream writer)\n    {\n        if (this.IsRecording)\n        {\n            return;\n        }\n\n        if (_input != null)\n        {\n            _input.Dispose();\n            _input = null;\n        }\n        _input = input;\n\n        _input.WaveFormat = _waveFormat;\n        _input.DataAvailable += (s, args) =&gt;\n        {\n            _writer.Write(args.Buffer, 0, args.BytesRecorded);\n            byte[] buffer = args.Buffer;\n            for (int index = 0; index &lt; args.BytesRecorded; index += 2)\n            {\n                short sample = (short)((buffer[index + 1] &lt;&lt; 8) | buffer[index + 0]);\n                float sample32 = sample / 32768f;\n                _aggregator.Add(sample32);\n            }\n\n            OnDataAvailable(args);\n        };\n        _input.RecordingStopped += (s, args) =&gt;\n        {\n            _input.Dispose();\n            _input = null;\n\n            _writer.Dispose();\n            _writer = null;\n\n            OnRecordingStopped(args);\n        };\n\n        if (this.CurrentRecording != null)\n        {\n            _tempFileNameBuilder.GenerateNewFileName();\n        }\n\n        this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name,\n            _tempFileNameBuilder.FileName,\n            _recordingDeployer,\n            _recordingCompressor));\n        if (this.MicrophoneLevel == default(float))\n        {\n            this.MicrophoneLevel = .75f;\n        }\n\n        _aggregator.Reset();\n        _writer = writer;\n\n        _input.StartRecording();\n        this.IsRecording = true;\n    }\n\n    public void StopRecording()\n    {\n        if (!this.IsRecording)\n        {\n            return;\n        }\n\n        this.CurrentRecording.Stop();\n\n        _input.StopRecording();\n        this.IsRecording = false;\n    }\n\n    protected virtual void OnDataAvailable(WaveInEventArgs e)\n    {\n        // Make a temporary copy of the event to avoid possibility of \n        // a race condition if the last subscriber unsubscribes \n        // immediately after the null check and before the event is raised.\n        EventHandler&lt;WaveInEventArgs&gt; handler = DataAvailable;\n\n        // Event will be null if there are no subscribers \n        if (handler != null)\n        {\n            // Use the () operator to raise the event.\n            handler(this, e);\n        }\n    }\n\n    protected virtual void OnRecordingStopped(EventArgs e)\n    {\n        // Make a temporary copy of the event to avoid possibility of \n        // a race condition if the last subscriber unsubscribes \n        // immediately after the null check and before the event is raised.\n        EventHandler handler = RecordingStopped;\n\n        // Event will be null if there are no subscribers \n        if (handler != null)\n        {\n            // Use the () operator to raise the event.\n            handler(this, e);\n        }\n    }\n\n    protected virtual void OnMaximumCalculated(MaxSampleEventArgs e)\n    {\n        // Make a temporary copy of the event to avoid possibility of \n        // a race condition if the last subscriber unsubscribes \n        // immediately after the null check and before the event is raised.\n        EventHandler&lt;MaxSampleEventArgs&gt; handler = MaximumCalculated;\n\n        // Event will be null if there are no subscribers \n        if (handler != null)\n        {\n            // Use the () operator to raise the event.\n            handler(this, e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["visual-studio","unit-testing","tdd","visual-studio-extensions"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12563745,"title":"Visual Studio plug in to jump to test class","body":"<p>I was wondering if there is a plugin that allows me to jump directly to the test for the current class (Or create it if it doesn't exist). </p>\n\n<p>I guess this should be based on the convention that the test project is named like the project being tested + \"test\" and the test class is named like the class being tester + \"test\".</p>\n\n<p>A feature like that would really help in projects with many files and foldes, where scrolling the solution explorer to find the associated test project can be quite annoying.</p>\n"},{"tags":["java","unit-testing","testing","mocking","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":416,"score":3,"question_id":8003278,"title":"Is it possible to do strict mocks with Mockito?","body":"<p>I'd like to use strict mocks, at least when developing for the first time some tests against old code, so any methods invoked on my mock will throw an exception if I didn't specifically define expectations.</p>\n\n<p>From what I've come to see, Mockito if I didn't define any expectations will just return null, which will later on cause a NullPointerException in some other place.</p>\n\n<p>Is it possible to do that? If yes, how?</p>\n"},{"tags":["c++","linux","windows","unit-testing","code-coverage"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13194741,"title":"Has anyone successfully ported COVTOOL to a windows build environment?","body":"<p>COVTOOL is a C++ linux code coverage tool.</p>\n\n<p>As the title question suggests, I'm pushing the odds here by trying to make COVTOOL work on windows environment.</p>\n\n<p>Has anyone else succeeded with this ? </p>\n"},{"tags":["java","unit-testing","design","inheritance","lsp"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13194154,"title":"Is it a good practice to unit test the Liskov Substitution principle's compliance?","body":"<p>Assume a class named <code>Sprinter</code>:</p>\n\n<pre><code>public class Sprinter {\n\n    protected int travelMeters;\n\n    public void run(int seconds) {\n        this.travelMeters = 9 * seconds;\n    }\n\n    public int getTravelMeters(){\n        return travelMeters;\n    }\n}\n</code></pre>\n\n<p>And a <code>SprintGenius</code> type inheriting <code>Sprinter</code>:</p>\n\n<pre><code>class SprintGenius extends Sprinter {\n\n    public void run(int seconds) {\n        this.travelMeters = 10 * seconds;\n    }\n}\n</code></pre>\n\n<p>Logically, 2 unit-tests class have to be created, one for each type.</p>\n\n<p>Within <code>Sprinter</code> unit-test, I would end up with:</p>\n\n<pre><code>@Before\npublic void setUp() {\n  Sprinter sprinter = new Sprinter();\n}\n\npublic void testSprinterShouldRun90metersWithin10Seconds() {\n  sprinter.run(10);\n  assertEquals(sprinter.getTraveledMeters(),90);\n}\n</code></pre>\n\n<p>Within <code>SprintGenius</code> unit-test, I would end up with:</p>\n\n<pre><code>@Before\npublic void setUp() {\n  Sprinter sprinter = new SprintGenius();\n}\n\npublic void testSprinterShouldRun100metersWithin10Seconds() {\n  sprinter.run(10);\n  assertEquals(sprinter.getTraveledMeters(),100);\n}\n</code></pre>\n\n<p>In both test above, I would test the amount of traveled meters within 10 seconds.</p>\n\n<p>Obviously, these both tests would be green.</p>\n\n<p><strong>However, what about the violation of Liskov Substitution principle?</strong></p>\n\n<p>Indeed, any client code should expect any sprinter to run exactly 10 meters within 9 seconds.</p>\n\n<p>3 solutions (the first two solutions being signaled RULES to ALL team's developer and would have to be admit and keeped, even if not everybody well master the concept of Liskov)</p>\n\n<p>1) In <code>Sprinter</code> class, duplicating each test but this time based on a <code>Sprinter sprinter = new SuperGenius()</code> and expect the 90 meters. => what should fail and this is precisely what we'd want! => prevent from violating Liskov principle.</p>\n\n<p>2) In <code>SprintGenius</code> class, always add a similar \"clone\" of each test based on the base class, based on the exactly same expectations.\nSo, if you have 2 distinct tests, we'd end up with 4 tests. 2 declaring Sprinter as a <code>Sprinter</code> and 2 declaring <code>Sprinter</code> as a <code>SprintGenius</code>.</p>\n\n<p>3) Never inheriting from concrete class (I imagine that it was your first reaction by reading this post:)), prefer composition if it fits! So that this issue doesn't happen. </p>\n\n<p>What is the best-practice to prevent from Liskov Substitution principle violation based on the fact that many many developers ignore Liskov principle and are often tempted to inherit from concrete classes instead of using another better way like composition or different inheritance hierarchy?</p>\n\n<p>I don't want to be trouble by the fact that a developer inherits from my written class (without telling me..), injecting it within a shared huge list of heterogeneous <code>Sprinter</code> list and facing me with 'hello the weird behavior !' and hours of debug time...</p>\n\n<p>I don't want of course to declare ALL my concrete classes 'final' :)</p>\n"},{"tags":["c#","unit-testing","constants","mstest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13178395,"title":"Testing for all of the possible values of a constant","body":"<p>I have a constant in my application which determines the operation of some other parts of the program. I change this constant to quickly and easily alter the operation of the program.</p>\n\n<p>In my case, the constant is a <code>bool</code> so it can have one of two values.</p>\n\n<p>I want to write a test that will make sure my code is working whether the constant is set to true or not.</p>\n\n<p>For example, say my method is this:</p>\n\n<pre><code>public boolean IsEqual(float a, float b) {\n    var epsilon = 0.0001;\n\n    if (Constants.Exact) return (Math.Abs(a-b) &lt; epsilon);\n    else return (Math.Floor(a) == Math.Floor(b)); \n}\n</code></pre>\n\n<p><code>Constants</code> looks like this:</p>\n\n<pre><code>public static class Constants {\n    /// &lt;summary&gt;\n    /// Determines whether an exact comparison should be made, or whether fractional parts should be disregarded.\n    /// &lt;/summary&gt;\n    public const bool Exact = true;\n}\n</code></pre>\n\n<p>And the test method is:</p>\n\n<pre><code>[TestMethod]\npublic void TestEquality() {\n    var five = 5;\n    var three = 3;\n\n    Assert.True(Equals(five, three));\n}\n</code></pre>\n\n<p>Solutions I could come up with:</p>\n\n<ul>\n<li>Write the test as if the constant doesn't exist, set the constant to <code>true</code> and run tests, then set it to false and run tests. Bad because if I have 8 constants like this, I don't want to run the tests 256 times.</li>\n<li>Don't make it a constant. Inside the test method, first set constant to true, assert, then false, assert again. However, the reason I made it a constant in the first place is so that it's guaranteed not to change at run-time.</li>\n</ul>\n\n<p>I guess what I really want is a way to make it constant as far as the application proper is concerned, but not a constant as far as the test project is concerned.</p>\n\n<p>So how can I make a situation like this work?</p>\n"},{"tags":["objective-c","unit-testing","ocmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12902256,"title":"PartialMock for Init method","body":"<p>I've tried swizzling out the init method for a partial mock and was wondering if this was possible.</p>\n\n<p>I've had no luck with:</p>\n\n<pre><code>SomeClass *foo = [SomeClass alloc];\nmock = [OCMockObject partialMockForObject:foo];\n[[[mock stub] andCall:@selector(mockInit) onObject:self] init];\n</code></pre>\n\n<p>...</p>\n\n<pre><code>[foo init];\n</code></pre>\n"},{"tags":["wcf","unit-testing","nunit"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":13190635,"title":"How to UnitTest WCF .SVC files","body":"<p>I am planning to unit test WCF Services that are exposed as <code>.svc</code> files. What are the best practices available to unit test them.</p>\n\n<p>As for as i know this is the option available:</p>\n\n<p>Create a seperate project and have proxy classes created for the .svc files and add them to the project and do unit testing on those proxy classes.\n   Proxy classes can be created using:</p>\n\n<ol>\n<li>svcutil.exe</li>\n<li>\"Add Service Reference\" option of visual studio.</li>\n</ol>\n\n<p>are there any other best option available to unit test my wcf <code>.svc</code> file using nunit?</p>\n"},{"tags":["visual-studio-2010","unit-testing","build","vs-unit-testing-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13183583,"title":"Is it possible to avoid the build before running the unit testcase in visual studio or resharpher","body":"<p>Consider that i am changing only one test/unittest project,  and if i try to run that it builds the unit test project(accepted) and all the other dev projects(which is not  really required).</p>\n\n<p>how can i avoid this? i have 100+ projects in the solution so each unit test case run taking really long time because of the project build.</p>\n"},{"tags":["entity-framework","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13132601,"title":"Unit test Entity Framework using moq","body":"<p>I'm using entity framework and trying to unit test my data services which are using EF.\nI'm not using repository and unit of work patterns.\nI tried the following approach to mock the context and DbSet:</p>\n\n<pre><code>private static Mock&lt;IEFModel&gt; context;\nprivate static Mock&lt;IDbSet&lt;CountryCode&gt;&gt; idbSet;\n\n    [ClassInitialize]\n    public static void Initialize(TestContext testContext)\n    {\n        context = new Mock&lt;IEFModel&gt;();\n\n        idbSet = new Mock&lt;IDbSet&lt;CountryCode&gt;&gt;();\n\n        context.Setup(c =&gt; c.CountryCodes).Returns(idbSet.Object);\n\n    }\n</code></pre>\n\n<p>I get null \"Object reference not set to an instance of an object\" error for idbSet \"Local\".\nIs there any way to mock idbSet like this?\nThanks</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","inclusion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13181083,"title":"Rails unit testing model validation :inclusion fails","body":"<p>Model order.rb</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n    attr_accessible :address, :email, :name, :payment_type_id\n    belongs_to :payment_type\n\n    PAYMENT_TYPES = PaymentType.pluck(:id)\n\n    validates :name, :address, :email, :payment_type_id, :presence =&gt; true\n    validates :payment_type_id, :inclusion =&gt; {:in =&gt; PAYMENT_TYPES}\nend\n</code></pre>\n\n<p>Model payment_type.rb</p>\n\n<pre><code>class PaymentType &lt; ActiveRecord::Base\n  attr_accessible :name, :id\n\n  has_many :order\nend\n</code></pre>\n\n<p>From browser, validation works fine, if it is wrong it give an error, else go forward.\nBut problem is when I run <code>rake test:functionals</code> from terminal. Test didn't pass the validation. If I comment this line:</p>\n\n<pre><code>validates :payment_type_id, :inclusion =&gt; {:in =&gt; PAYMENT_TYPES}\n</code></pre>\n\n<p>all is ok. I don't understand why it is working in one plase, but in tests not ? ... </p>\n\n<p>Fixtures are all ok.</p>\n\n<p>Please help.</p>\n"},{"tags":["c++","xml","unit-testing","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13187896,"title":"Create xml reports in Google Tests in main()","body":"<p>Is it possible to make GoogleTest output an xml file by asking it to, in <code>main()</code> ?</p>\n\n<p>I know I can change the system environment variables (does anybody actually do that ?), or use a command line argument </p>\n\n<blockquote>\n  <p>--gtest_output=\"xml:_path_to_output_file_\".</p>\n</blockquote>\n\n<p>What I would like to do is have my program automatically generate the xml, every time, using a file name based on the project name. And of course - it would not happen on my computer...</p>\n\n<p>I looked in InitGoogleTest, but I can't see anything I can touch.</p>\n\n<p>(I would like to write actual code, not run my program in a postbuild).</p>\n\n<p>Are there any options for this ?</p>\n"},{"tags":["c++","unit-testing","circular-dependency","googletest","private-members"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13171077,"title":"FRIEND_TEST in Google Test - possible circular dependency?","body":"<p>I am trying to figure out how FRIEND_TEST works in Google Tests. \n<a href=\"http://code.google.com/p/googletest/wiki/AdvancedGuide#Private_Class_Members\" rel=\"nofollow\">http://code.google.com/p/googletest/wiki/AdvancedGuide#Private_Class_Members</a></p>\n\n<p>I am looking at the following item, trying to implement it in my code:</p>\n\n<pre><code>// foo.h\n#include \"gtest/gtest_prod.h\"\n\n// Defines FRIEND_TEST.\nclass Foo {\n  ...\n private:\n  FRIEND_TEST(FooTest, BarReturnsZeroOnNull);\n  int Bar(void* x);\n};\n\n// foo_test.cc\n...\nTEST(FooTest, BarReturnsZeroOnNull) {\n  Foo foo;\n  EXPECT_EQ(0, foo.Bar(NULL));\n  // Uses Foo's private member Bar().\n}\n</code></pre>\n\n<p>In the code above, the piece that I can't see, is that foo_test.cc must include foo.h, in order to have access to Foo and Bar(). [Perhaps it works differently for Google ? in my code, I must include it]</p>\n\n<p>That will result in circular dependency...</p>\n\n<p>Am I missing something ?</p>\n\n<p><strong>Edit:</strong> code sample: (re-edited after fixing - solution being changing test file from *.h to *.cpp):</p>\n\n<p>Project ppppp - file myfile.h:</p>\n\n<pre><code>class INeedToBeTested\n{\npublic:\n  extern friend class blah_WantToTestThis_Test;\n  INeedToBeTested();\n  INeedToBeTested(INeedToBeTested* item);\n  INeedToBeTested(OtherClass* thing, const char* filename);\n  ~INeedToBeTested();\n  bool Testable();\n  std::string MoreTestable();\n\nprivate:\n  int WantToTestThis();\n};\n</code></pre>\n\n<p>Project ppppp_gtest, file myFile_gtest.cpp:</p>\n\n<pre><code>#pragma once\n#include \"gtest/gtest.h\"\n#include \"myfile.h\" //property sheet adds include locations\n#include \"otherclass.h\"\n\n  class blah: public ::testing::Test{\n  // declarations, SetUp, TearDown to initialize otherclass thing, std::string filename\n  }\n  TEST_F(blah, WantToTestThis)\n      {\n        INeedToBeTested item(thing, filename.c_str());\n        item.WantToTestThis();   // inaccessible when this content is in header file\n      }\n</code></pre>\n\n<p>During my efforts to get this to work, I also experimented with creating a wrapper class (this also works only if in a cpp, not in header); while it requires changing <strong>private</strong> to <strong>protected</strong>, it doesn't require additional declarations inside tested code which each new test:  </p>\n\n<pre><code>// option: create wrapper (change private to protected first) \n  class INeedToBeTestedWrapper:public INeedToBeTested \n      {\n      public:\n         INeedToBeTestedWrapper(OtherClass* thing, std::string filename):\n            INeedToBeTested(OtherClass* thing, filename.c_str());\n      public:\n         using INeedToBeTested::WantToTestThis;\n      };\n\n      TEST_F(blah, WantToTestThis)\n      {\n        INeedToBeTestedWrapper item(thing, filename);\n        item.WantToTestThis();   \n      }\n</code></pre>\n"},{"tags":["c++","unit-testing","mocking","cppunit"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13179701,"title":"What mock frameworks work with cppunit?","body":"<p>I'm in the middle of implementing a unit test infrastructure for a large <code>C++</code> project, and due to political reasons I'm almost sure <a href=\"http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page\" rel=\"nofollow\"><code>CppUnit</code></a> will be pushed as the unit testing framework.</p>\n\n<p>I'm trying to identify mock frameworks that blend with <a href=\"http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page\" rel=\"nofollow\">CppUnit</a>. I've found <a href=\"http://mockpp.sourceforge.net/index-en.html\" rel=\"nofollow\">mockpp</a>, and I've heard that <a href=\"http://code.google.com/p/googlemock/\" rel=\"nofollow\"><code>Google Mock</code></a> should work.</p>\n\n<p>What frameworks work alongside <a href=\"http://sourceforge.net/apps/mediawiki/cppunit/index.php?title=Main_Page\" rel=\"nofollow\"><code>CppUnit</code></a>?</p>\n"},{"tags":["unit-testing","scala","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13168411,"title":"JUnit test categories in Scala?","body":"<p>I got it working! I literally translated the Java here into Scala line by line:</p>\n\n<p><a href=\"http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.html\" rel=\"nofollow\">http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.html</a></p>\n\n<p>Mostly it meant doing Array(classOf[ClassName]), removing \"public\" keywords, etc. My IntelliJ IDE helped a lot with suggestions.</p>\n\n<hr>\n\n<p>I want to be able to run categories of tests, so I might tag one class of tests as \"Version2dot3\" and \"SlowTest\" and then be able to run just \"slow tests\", or run \"slow tests AND 2.3 tests\".</p>\n\n<p>I've been trying to adapt this article to my Scala tests:</p>\n\n<p><a href=\"http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0\" rel=\"nofollow\">http://weblogs.java.net/blog/johnsmart/archive/2010/04/25/grouping-tests-using-junit-categories-0</a></p>\n\n<p>I have a basic shell setup that almost works, but I'm getting <code>java.lang.Exception: No runnable methods</code> errors when I try to run the testSuite.</p>\n\n<p>Ideas? I've successfully been able to run only certain test classes with SuiteClasses, but have not been able to run categories of tests (@Category annotation).</p>\n\n<pre><code>import org.junit.experimental.categories.{Categories, Category}\nimport org.junit.runners.Suite.SuiteClasses\nimport org.scalatest.FunSuite\nimport org.junit.runner.RunWith\nimport org.scalatest.junit.JUnitRunner\n\n@RunWith(classOf[JUnitRunner])\n@Category(Array(classOf[SlowTests]))\nclass FunSuiteTest extends FunSuite with DemoHelpers {\n  test(\"demoTest1\") {\n    println(\"\\n\\nrunning DemoTest1...\\n\\n\")\n  }\n}\n\n@RunWith(classOf[JUnitRunner])\n@Category(Array(classOf[SlowTests]))\nclass FunSuiteTest2 extends FunSuite with DemoHelpers {\n  test(\"demoTest2\") {\n    println(\"\\n\\nrunning DemoTest2...\\n\\n\")\n  }\n}\n\n@RunWith(classOf[Categories])\n@SuiteClasses(Array(classOf[SlowTests]))\nclass testSuite {\n\n}\n</code></pre>\n"},{"tags":["unit-testing","iis","integration-testing","web-based"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13164222,"title":"Pragmatic choice for running \"unit\" tests on IIS servers","body":"<p>I have a couple of integration tests expressed as test classes under the Microsoft Unit Testing Framework. This is because my company has not yet decided on a(nother) integration testing framework. These \"unit\" tests check for things like certificates being installed in the right places, firewall permeability, etc. It's of course easy to run them on a development machine, but what counts is their behavior on staging and production servers. So what I need is a unit test runner suitable for those environments. Here are some options:</p>\n\n<ol>\n<li>Run them from command line using MSTest.exe. Con: Don't want to install VS20xx on staging and production servers.</li>\n<li>Use Maven. Con: Haven't climbed its initial learning curve yet. Maybe not the right use case to start with (despite e.g. Failsafe plugin). Pro: Seems to have enough scope to (also) cover a variety of integration scenarios.</li>\n<li>My initial favorite (pragmatic) choice is the following: install a service into IIS that acts as a unit test runner. It should present a web-based UI for pointing to DLLs with test classes, etc., and for visualizing test results. A \"thin\", web-based unit test runner (wrapper) so to speak, mainly for use at deployment and error analysis time.</li>\n</ol>\n\n<p>My question is: Do you know whether such beasts (for Microsoft Unit Test Framework) exist and if so, can you recommend a particular one (or a better way to go about this overall)? Thanks for your attention.</p>\n"},{"tags":["c#","unit-testing","moq","lazy-loading","lazy-evaluation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13185539,"title":"Moq Using Lazy Loading in Constructor","body":"<p>I ran into a strange problem today - I was writing a unit test around a SIM object. It asserts that when the SIM object is updated and the PIN attempts remaining has changed, it will call a particular method. The test looks like this:</p>\n\n<pre><code>        [Test]\n    public void TestUpdateSimInfoWithPinAttemptsChangedCallsOnPinAttemptsRemaining()\n    {\n        var info = new SimPinInfo {PinAttemptsRemaining = 10};\n\n        var sim = new Mock&lt;Sim&gt;(info);\n\n        info.PinAttemptsRemaining = 2;\n\n        sim.Object.UpdateSimInfo(info);\n\n        sim.Verify(s =&gt; s.FireOnPinAttemptsRemaining(), Times.Once());\n    }\n</code></pre>\n\n<p>So the mock SIM object is created with 10 PIN attempts remaining. The <code>SimPinInfo</code> object then has the <code>PinAttemptsRemaining</code> value reduced to 2 before being passed to the <code>UpdateSimInfo()</code> method.</p>\n\n<p>SIM constructor (trimmed for clarity):</p>\n\n<pre><code>internal Sim(SimPinInfo info) : this()\n    {\n        _pinAttemptsRemaining = info.PinAttemptsRemaining;\n        _pukAttemptsRemaining = info.PukAttemptsRemaining;\n     ......\n    }\n</code></pre>\n\n<p>And the <code>UpdateSimInfo()</code> method (trimmed):</p>\n\n<pre><code>internal void UpdateSimInfo(SimPinInfo info)\n    {\n        lock(_locker)\n        {\n            if (_pinAttemptsRemaining != info.PinAttemptsRemaining)\n            {\n                Log(\"PinAttemptsRemaining changed\");\n                _pinAttemptsRemaining = info.PinAttemptsRemaining;\n                FireOnPinAttemptsRemaining();\n            }\n         .....\n        }\n    }\n</code></pre>\n\n<p>A pretty simple test - what should happen is the above if statement will be true (pin attempts remaining has changed) so the <code>OnPinAttemptsRemaining</code> event will be fired. However, the test failed (although not all the time - it passed when I slowly stepped through the code!). What was happening was the if statement was false - both <code>_pinAttemptsRemaining</code> and <code>info.PinAttemptsRemaining</code> were 2. It appears that the SIM mock is not actually created when expected - when the <code>info.PinAttemptsRemaining</code> was 10.</p>\n\n<p>To demonstrated this, I added a comment:</p>\n\n<pre><code>var sim = new Mock&lt;Sim&gt;(info);\ninfo.PinAttemptsRemaining = 2;\nConsole.WriteLine(\"SIM's pin attempts = \" + sim.Object.PinAttemptsRemaining);\n</code></pre>\n\n<p>I also put a breakpoint in the SIM object's constructor. The breakpoint was hit when stepping over the <code>Console.WriteLine</code> line, not the <code>new Mock...</code> line. So the object is not being created until needed.</p>\n\n<p>I believe this is called lazy-loading or lazy-evaluation.</p>\n\n<p>There were various workaround to this behaviour - I ended up creating a new <code>SimPinInfo</code> object to pass to <code>UpdateSimInfo()</code>.</p>\n\n<p>Has anyone come across this behaviour before? I couldn't find any references to it.</p>\n"},{"tags":["java","unit-testing","junit","powermock","white-box"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13185784,"title":"PowerMock: Using Whitebox.invokeMethod(...) properly for a method taking an Object[] as a param","body":"<pre><code>private boolean isEmpty(Object[] array) {\n    if (array == null || array.length == 0) \n        return true;\n    for (int i = 0; i &lt; array.length; i++) {\n    if (array[i] != null) \n        return false;\n    }           \n\n    return true;\n}\n\n@Test\npublic void testIsEmpty() {\n        //where is an instance of the class whose method isEmpty() I want to test.\n    try {\n        Object[] arr = null;\n        assertTrue((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class},  arr)));\n\n        arr = new Object[0];\n        assertTrue((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class}, arr)));\n\n        arr = new Object[]{null, null};\n        assertTrue((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class}, arr)));\n\n        arr = new Object[]{1, 2};\n        assertFalse((Boolean)(Whitebox.invokeMethod(where, \"isEmpty\", new Class&lt;?&gt;[]{Object[].class}, arr)));\n    } catch (Exception e) {\n        fail(e.getMessage());\n    }       \n}\n</code></pre>\n\n<p>Problem: java.lang.AssertionError: wrong number of arguments</p>\n\n<p>Research:\n1. Initially, I tried:\n        invokeMethod(Object tested, String methodToExecute, Object... arguments) </p>\n\n<p>It failed for the 2nd, 3rd, and 4th invokeMethod(). (Error: method not found with given parameters)</p>\n\n<p>I thought this was potentially due to a problem of PowerMock not being to infer the correct method; hence, I switched to:\n        invokeMethod(Object tested, String methodToExecute, Class[] argumentTypes, Object... arguments)</p>\n\n<ol>\n<li><p>The parent class has an isEmpty() method that is overrode in the child class with an exact duplicated isEmpty() method. (legacy code) There are no other isEmpty() methods of differing signatures. There are many methods that take parameters, but none others that take an Object[] (e.g. no methods that take an Integer[] as a parameter). </p></li>\n<li><p>Prior to the second assertTrue statement above, changing to arr = new Object[1] makes that assert statement pass.</p></li>\n</ol>\n\n<p>Any help is greatly appreciated. Thanks! </p>\n"},{"tags":["java","unit-testing","junit4","code-reuse"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13185566,"title":"Reusing test implementations in JUnit 4?","body":"<p>I have an interface, e.g.:</p>\n\n<pre><code>public interface Thing {\n  FrobResult frob(FrobInput); \n}\n</code></pre>\n\n<p>And several implementations of that interface (e.g. <code>NormalThing</code>, <code>ImmutableThing</code>, <code>AsyncThing</code>) that I am trying to test.</p>\n\n<p>Many of my test methods are really about ensuring that the interface is implemented correctly, and thus are duplicated across each <code>Thing</code> implementation.  In JUnit 3 a common solution to this would be to create a base class (extending <code>TestCase</code>) that is then subclassed by each implementation class.  But is this the correct approach for JUnit 4?</p>\n\n<p>Possible alternatives in (I believe) ascending order of preference:</p>\n\n<ol>\n<li><p>Cut'n'paste the duplicated test methods.  Not DRY at all, but I guess less worrisome in tests than it would be in production code.</p></li>\n<li><p>Create an abstract class with <code>@Test</code> methods, and subclass it for each implementation test class.  (Commonly seen with JUnit 3 tests -- is this still a good way to go in JUnit 4?)</p></li>\n<li><p>Put the common test methods into a helper class, and invoke it on each implementation.  (Composition instead of inheritance.)</p></li>\n</ol>\n\n<p>What's the best practice for doing #3?  Maybe a <code>@RunWith(Parameterized.class)</code> test that is parameterized with each implementation?  Or is there a better way to accomplish this?</p>\n"},{"tags":["c#","linq","unit-testing","moq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13185385,"title":"How to debug this or possible causes? System.NullReferenceException was unhandled by user code on Moq.Verify","body":"<p>I have something like this in my unit test</p>\n\n<pre><code>public class MyTestClass()\n{\n      private Mock&lt;IAccountRepo&gt; accountRepo;\n       private AdminService adminService;\n\n      [Setup]\n      public void Setup()\n      {\n        accountRepo = fixture.Freeze&lt;Mock&lt;IAccountRepo&gt;&gt;();\n        adminService = fixture.CreateAnonymous&lt;AdminService&gt;();\n      }\n\n      [Test]\n      public Test()\n      {\n          accountRepo.Setup(x =&gt; x.Insert(It.IsAny&lt;IUnitOfWork&gt;(), It.IsAny&lt;MyDomainObject&gt;()));\n\n            adminService.ApplyAdminFee(1, 1, today);\n\n            accountRepo.Verify(x =&gt; x.Insert(It.IsAny&lt;IUnitOfWork&gt;(), It.Is&lt;MyDomainObject&gt;(a =&gt; a.Id == 1)));\n      }\n}\n</code></pre>\n\n<p>I get this error.</p>\n\n<pre><code>System.NullReferenceException was unhandled by user code\n  Message=Object reference not set to an instance of an object.\n  Source=Anonymously Hosted DynamicMethods Assembly\n  StackTrace:\n       at lambda_method(Closure , MyDomainObject )\n       at Moq.It.&lt;&gt;c__DisplayClass2`1.&lt;Is&gt;b__1(TValue value)\n       at Moq.Match`1.Matches(Object value)\n       at Moq.Matcher.Matches(Object value)\n       at Moq.MethodCall.Matches(IInvocation call)\n       at Moq.Mock.&lt;&gt;c__DisplayClassc.&lt;VerifyCalls&gt;b__b(IInvocation i)\n       at System.Linq.Enumerable.WhereListIterator`1.MoveNext()\n       at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)\n       at Moq.Mock.VerifyCalls(Interceptor targetInterceptor, MethodCall expected, Expression expression, Times times)\n       at Moq.Mock.Verify[T](Mock mock, Expression`1 expression, Times times, String failMessage)\n       at Moq.Mock`1.Verify(Expression`1 expression, Times times)\n       at Test() in 383\n  InnerException: \n</code></pre>\n\n<p>I am not sure why.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I think I know what is happening. in my method I have 3 calls to the insert method(the insert method takes in an object).</p>\n\n<p>So I have like</p>\n\n<pre><code>accountRepo.Insert(MyDomainObject);\naccountRepo.Insert(MyOtherDomainObject);\naccountRepo.Insert(MyOtherOtherDomainObject);\n</code></pre>\n\n<p>So maybe those 2 other inserts are overriding it? how can I get around this?</p>\n"},{"tags":["java","unit-testing","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":128,"score":-1,"question_id":9782167,"title":"Running a JUnit test case concurrently","body":"<p>I followed <em><a href=\"http://blog.mycila.com/2010/05/concurrent-junit-tests-with.html\" rel=\"nofollow\">Concurrent JUnit tests with RunnerScheduler</a></em>. It says I need to use the Java code in <a href=\"http://mycila.googlecode.com/svn/sandbox/src/main/java/com/mycila/sandbox/junit/runner/ConcurrentJunitRunner.java\" rel=\"nofollow\">ConcurrentJunitRunner.java</a>.</p>\n\n<p>But then part of the code in <code>ConcurrentJunitRunner.java</code></p>\n\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(\n                    klass.isAnnotationPresent(Concurrent.class) ?\n                            klass.getAnnotation(Concurrent.class).threads() :\n                            (int) (Runtime.getRuntime().availableProcessors() * 1.5),\n                    new NamedThreadFactory(klass.getSimpleName()));\n</code></pre>\n\n<p>generates the error</p>\n\n<blockquote>\n  <p>The method isAnnotationPresent(Class) in the type Class is not applicable for the arguments (Class)\"</p>\n</blockquote>\n\n<p>What should I do to remove the error?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":91,"score":3,"question_id":13148669,"title":"Unit Testing Magic Methods","body":"<p>When it comes to unit-testing implementations of magic methods in PHP, what is the recommended means of invoking those methods?</p>\n\n<p>I see three options available:</p>\n\n<ul>\n<li><p>Invoking them explicitly/directly:</p>\n\n<p><code>$object-&gt;__get('someValue');</code></p></li>\n<li><p>Invoking them indirectly (using whatever action is intended to trigger them):</p>\n\n<p><code>$object-&gt;someValue; \\\\ Where __get() is implemented.</code></p></li>\n<li><p>Invoking them using both methods.</p></li>\n</ul>\n\n<p>Are there any unit testing veterans that could explain which (if any) would be the obvious choice, and why that might be?</p>\n\n<p><em>(This may be dancing close to subjective/debate territory, but I will ask in the hopes that there are some generally accepted principles I should consider when approaching this question.)</em></p>\n"},{"tags":["java","android","unit-testing","robotium"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13053060,"title":"How to Disable User Interaction in Robotium","body":"<p>I've coded some GUI unit tests with Robotium, but during the execution the touchscreen still remains responsive to user events. If I don't touch the screen, all the tests pass ok, but the all-green box is easily sabotaged if someone interacts with the screen at the same time the automated interaction is taking place (for instance, if I show a dialog but I close it manually, a test checking the dialog is displayed will fail).</p>\n\n<p>Is there a way to programmatically disable the user-input?</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":571,"score":2,"question_id":2581005,"title":"Django TestCase testing order","body":"<p>If there are several methods in the test class, I found that the order to execute is alphabetical. But I want to customize the order of execution. How to define the execution order?</p>\n\n<p>For example: testTestA will be loaded first than testTestB.</p>\n\n<pre><code>class Test(TestCase):\n    def setUp(self):\n        ...\n\n    def testTestB(self):\n        #test code\n\n    def testTestA(self):\n        #test code\n</code></pre>\n"},{"tags":["objective-c","ios","unit-testing","ocmock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13152039,"title":"GHUnit, OCMock: how to test if one of two specified block is called?","body":"<p>I have a method that takes a response block and an error block, I write unit test by giving it valid data and invalid data so it will call response block and error block respectively, but with GHUnit and OCMock, how do I test if the correct block is called?</p>\n\n<p>I was thinking:</p>\n\n<p>for valid data:\nresponse\n{\n    GHAssertTrue(YES, @\"\");\n}\nerror\n{\n    GHAssertTrue(NO, @\"Valid data should not call error block\");\n}</p>\n\n<p>and vice-versa for invalid data.</p>\n\n<p>Is what I did correct?</p>\n"},{"tags":["java","unit-testing","java-ee","junit","ejb"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13180688,"title":"Need advices regarding EJB3 bean types vs unit testing","body":"<p>First off, here is my setup:</p>\n\n<ul>\n<li>App server: jBoss 4.2.3GA </li>\n<li>Frameworks used: Struts 2, EJB3 </li>\n<li>DBMS: PostgreSQL 9.0.3</li>\n</ul>\n\n<p>By default, I always set my beans to @Local for security purpose. I don't want to open doors to other application within the same container when there is no need for it.</p>\n\n<p>Now, I am focusing on driving my development with tests (test driven development). So, I created a separate project (a kind of test project) for my tests in order to avoid coding my tests and installing tests instruments (EasyMock, jUnit, StrutsTest, etc.) in the same project as the application.</p>\n\n<p>So... that means I set my beans to @Remote to be able to access them from my jUnit test classes. </p>\n\n<p>My question is: Is there any way to switch from @Local to @Remote using a sort of conditional compiling/building? Having to set my beans back to Local everytime is quite cumbersome and boring. Every developer knows that refactoring brings problems so I am trying to find a proper way to manage my bean's visibility. Another idea would be from a property or XML file so I would only need to turn one thing on or off depending on my needs.</p>\n\n<p>For every bean to test, I need to:\n - Set the interface to @Remote\n - Add the implements item for the remote interface in the session bean</p>\n\n<p>Any idea?</p>\n\n<p>Thank you very much</p>\n\n<p>Charles</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":374,"score":2,"question_id":11994396,"title":"Run/Debug Test in Current Context with Visual Studio 2012","body":"<p>In VS2010, one can Run or Debug Tests <em>in Current Context</em>.</p>\n\n<p>That made it easy to click on a test I had just added or modified and run it (<kbd>Ctrl</kbd>-<kbd>R</kbd> <kbd>T</kbd>) or debug it (<kbd>Ctrl</kbd>-<kbd>R</kbd> <kbd>Ctrl</kbd>-<kbd>T</kbd>). (or with my gaming keyboard... <kbd>G1</kbd> ;-)</p>\n\n<p>The only way I can find to run a specific test is to locate it in Test Explorer and run it from there. That requires shifting my focus away from the code I'm working on.</p>\n\n<p>Is there something equivalent to <em>Current Context</em> in Visual Studio 2012?</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13182385,"title":"Mapping Unit Tests to methods","body":"<p>We're using Microsoft's Unit Test program and we use the Unit Test Wizard to create one-to-one mapping for methods in each class from the business layer. The issue is the amount of work needed go through and determine if we are missing any tests after the initial tests were created. </p>\n\n<p>Currently I have to run the wizard and look for tests that have a \"1\" appended to the default name [method][test]. Those with that name mean we have already have a test for that method. The ones without an append 1 mean those are methods that don't have a Unit Test that follow the default naming convention. </p>\n\n<p>I'm wondering if there is away to map Unit Test to a method with attribute on the Method so it doesn't take as much work. And yes, I know if we were following TDD we would write the Unit Test first. We write the test in parallel to development (but sometimes in rush it is missed).</p>\n"},{"tags":["php","unit-testing","tdd","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13176950,"title":"PHPUnit mock interface and class at the same time","body":"<p>I have some code that looks like this:</p>\n\n<pre><code>public function foo(Bar $bar) {\n    if ($bar instanceof Iterator) {\n        //...\n    }\n}\n</code></pre>\n\n<p>To test this I'm using:</p>\n\n<pre><code>$this-&gt;getMock('Bar');\n</code></pre>\n\n<p>However, because my code is looking for an instance of Bar that implements Iterator it essentially has two types. By calling getMock('Bar') or getMock('Iterator') the code is untestable. </p>\n\n<p>How can I make a mock implement an interface? This must be possible, surely?</p>\n"},{"tags":["unit-testing","visual-studio-2012","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12688562,"title":"ExpectedExceptionBaseAttribute in VS2012","body":"<p>I ran into an issue this morning after upgrading to Visual Studio 2012.</p>\n\n<p>Specifically, I have a class that extends ExpectedExceptionBaseAttribute. The test passes in Visual Studio 2010 but fails in 2012. </p>\n\n<p>The issue on Microsoft Connect is <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/758875/-testtools-unittesting-class-derived-from-expectedexceptionbaseattribute-fails\" rel=\"nofollow\">here</a> which has been closed as \"by design\" but in my opinion, this is a bug. Whilst there is a resolution provided by Microsoft, it requires me to force the new version of MSTest into a legacy mode.</p>\n\n<p>I have not included sample code here because there is a small sample project available for download on the Connect issue.</p>\n\n<p>If, as they state in the comments, the new version of MSTest is leaner and more performant, then I want to use it without putting it into a legacy mode.</p>\n\n<p>So the question is how do get it to work without resorting to that?</p>\n"},{"tags":[".net","vb.net","web-services","unit-testing","visual-studio-debugging"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13179621,"title":"Is it possible to interactively debug a web service while it's being executed in a Unit Test in VS2010?","body":"<p>Basically, I've got a pretty standard web service call, in a DLL project, running under the built debug server.</p>\n\n<p>Looks something like this</p>\n\n<pre><code>&lt;WebInvoke(Method:=\"POST\", BodyStyle:=WebMessageBodyStyle.Bare, UriTemplate:=\"\")&gt;\nPublic Function POSTOrder(httpPostOrder As Contract.APIOrder) As Contract.Response.Order\n    ....\n    Return (httpResponse)\nEnd Function\n</code></pre>\n\n<p>If I RUN the project, I can send XML POST requests to it using fiddler just fine, and if I set a breakpoint  in the above function, it gets hit.</p>\n\n<p>Now, I'd like to set up a simple unit test for this function, so I added a test project and this test:</p>\n\n<pre><code>&lt;TestMethod()&gt;\nPublic Sub TestPostOrder()\n    Dim r As String\n    Dim w As New Net.WebClient\n\n    W.Headers.Add(\"Content-Type\", \"application/xml\")\n    Dim x =\n            &lt;?xml version=\"1.0\"?&gt;\n            &lt;order_info&gt;\n                &lt;event_id&gt;103153&lt;/event_id&gt;\n                &lt;id&gt;1&lt;/id&gt;\n                .....\n            &lt;/order_info&gt;\n    r = w.UploadString(\"http://localhost:15034/orders/?api_key={sometext}\", \"POST\", x.ToString)\nEnd Sub\n</code></pre>\n\n<p>I know, not the greatest Unit Test in the world, but that's not the point right now.</p>\n\n<p>So, When I run this test, it DOES run through and it's successful. I can even debug the unit test, step through it, and see that the UPLOADSTRING call does succeed and return valid information.</p>\n\n<p>BUT, if I set a breakpoint in the actual function being tested, it's never hit.</p>\n\n<p>I found this question </p>\n\n<p><a href=\"http://stackoverflow.com/questions/5200758/can-i-debug-while-running-a-vs-unit-test\">Can I debug while running a VS Unit Test?</a></p>\n\n<p>but I tried that and no dice.</p>\n\n<p>I'm guessing I don't have something configured quite right with the unit test, and so it's not starting the actual DLL in a context that can be debugged, but so far, I've turned up nothing.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13139977,"title":"Is it possible to define a Jasmine spec inside a function and still have beforeEach apply to it?","body":"<p>I have a lot of tests which are virtually the same. In the interests of DRY and scanability I'd like to abstract the tests into a single function and then call that function with a few parameters. The function would then call <code>it</code> and add the spec to the suite.</p>\n\n<p>It seems to work, except the specs don't get run in the same way as the other specs and <code>beforeEach</code> is not called before the specs defined in the common function.</p>\n\n<pre><code>define(['modules/MyModule','jasmine/jasmine'], function(MyModule) {\n\n    describe('myModule', function() {\n\n        function commonTests(params) {\n            it('should pass this test OK', function() {\n                expect(true).toBe(true);\n            });\n\n            it('should fail because module is undefined', function() {\n                expect(module[params.method]()).toBe('whatever');\n            });\n        }\n\n        var module;\n\n        beforeEach(function() {\n            module = new MyModule();\n        });\n\n        describe('#function1', function() {\n            commonTests({\n                method: 'function1'\n            });\n        });\n\n        describe('#function2', function() {\n            commonTests({\n                method: 'function2'\n            });\n        });\n\n    });\n\n});\n</code></pre>\n\n<p>Is there any way of doing this and maintaining the functionality of <code>beforeEach</code> and <code>afterEach</code>?</p>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>Looks like I got my example wrong, sorry. Here's the case that fails:</p>\n\n<pre><code>define(['modules/MyModule'], function(MyModule) {\n\n    function commonTests(params) {\n        it('will fail because params.module is undefined', function() {\n            expect(typeof params.module).toBe('object');\n            expect(typeof params.module[params.method]).toBe('function');\n        });\n\n        it('has a few tests in here', function() {\n            expect(true).toBe(true);\n        });\n    }\n\n\n    describe('MyModule', function() {\n\n        var module;\n\n        beforeEach(function() {\n            module = new MyModule();\n        });\n\n        describe('#function1', function() {\n            commonTests({\n                module: module,\n                method: 'function1'\n            });\n        });\n\n        describe('#function2', function() {\n            commonTests({\n                module: module,\n                method: 'function2'\n            });\n        });\n\n    });\n});\n</code></pre>\n\n<p>I think it fails because the value of <code>module</code> is preserved as part of the call to <code>commonTests</code> instead of always using the current value of <code>module</code> as in the first example. I'll post my solution when I get there...</p>\n"},{"tags":["java","unit-testing","equals"],"answer_count":8,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":377,"score":1,"question_id":6877947,"title":"Why .equals method is failing on two same value objects?","body":"<p>I have created a value object <code>MarketVO</code> and two instances of this value object have same elements and same value for each element. </p>\n\n<p>My value object class is:</p>\n\n<pre><code>public class MarketVO {\n\n    private double floatAmt;\n    private Date marketDate;\n    private long marketCap;\n}\n</code></pre>\n\n<p>Here are the values:</p>\n\n<p>returnedData:</p>\n\n<pre><code>FloatAmt: 247657.5418618201, MarketCap: 5249164,\nMarketDate: 2011-07-29 00:00:00.0 \n</code></pre>\n\n<p>expectedData:</p>\n\n<pre><code>FloatAmt: 247657.5418618201, MarketCap: 5249164, \nMarketDate: 2011-07-29 00:00:00.0\n</code></pre>\n\n<p>Now in my unit test class, I want to assert that my returned and expected type is same containing same value in same order so am doing something like </p>\n\n<p><code>assertTrue(returnedData.equals(expectedData))</code>, now this is returning <code>false</code> value but if I do </p>\n\n<pre><code>assertEquals(testObject.getfloatAmt(), testObject2.getfloatAmt());\nassertEquals(testObject.getmarketCap(), testObject2.getmarketCap());\nassertEquals(testObject.getmarketDate(), testObject2.getmarketDate());\n</code></pre>\n\n<p>this test passes and so am not sure as to why <code>.equals</code> method is not working in here? Any suggestions?</p>\n\n<p><strong>Update:</strong> I want to put emphasize here that we are using this for doing <strong><em>Unit Testing</em></strong>. </p>\n"},{"tags":["java","unit-testing","rest","jersey","integration-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13178810,"title":"comparing two REST services to each other","body":"<p>Does anyone have any tips on writing tests that compare two REST services?  We are doing this as a form of regression testing.</p>\n\n<p>I was hoping to do something along the lines of:</p>\n\n<ol>\n<li>send a GET for \"/1\" to both services and compare the results</li>\n<li>send a POST to both services, and compare the results</li>\n<li>send a PUT to both services, and compare the results</li>\n</ol>\n\n<p>The idea is that:</p>\n\n<ul>\n<li>every operation is sent to both services</li>\n<li>the results should be identical</li>\n</ul>\n\n<p>The REST services are written in Java/Jersey, so using that would be ideal, but what have people found to be useful?</p>\n"},{"tags":["unit-testing","hadoop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12639621,"title":"MRUnit: Tests fail with custom writable","body":"<p>I am trying to implement unit test for my hadoop jobs using <a href=\"http://mrunit.apache.org/\" rel=\"nofollow\">MRUnit</a>.</p>\n\n<p>For my own Writable, the assertions in</p>\n\n<pre><code>withOutput(K2 k2, V2 v2)\n</code></pre>\n\n<p>fail. I have tried overriding the equals(Object o) method from Object, but that doesn't help. Any ideas how to tell MRUnit when two Writables are actually the same?</p>\n"},{"tags":["unit-testing","testng"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13174538,"title":"TestNG automatically disable tests","body":"<p>I am currently working on getting the Flexmojos project to build with the new Adobe Flex 4.8. The problem is, that with 4.8 one feature is no longer available. If I run the unittests against this sdk, the build will fail. I could disable the failling tests alltogether, but I would like to keep them in place, as they test important features of older Flex SDKs.</p>\n\n<p>Is there a way to automatically have tests skipped if a precondition is not met? I was thinking of some method being called to decide if a test should be executed. Alternatively I could set an environment variable. If there is any other option I would be glad to hear.</p>\n\n<p>Chris</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13177476,"title":"Mocking System.Threading.Thread in .NET","body":"<p>My issue is - I have a class that has a <code>System.Threading.Thread</code> dependancy, and it will <code>Start()</code> the Thread once a certain condition is met.  I am having an issue Mocking a <code>System.Threading.Thread</code>.  </p>\n\n<p>I generally use <strong>Moq</strong> for mock objects, but I can't Mock a <code>Thread</code> (because it is sealed).</p>\n\n<p>I do realize I could write some wrapper that contains a Thread, then mock that wrapper - but I would like to avoid that if possible.</p>\n\n<p>Thanks in advance for any ideas!</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-web-api","repository-pattern"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13174184,"title":"Is the Repository Pattern valid for a ASP.Net WebAPI project which just calls remote services","body":"<p>I'm developing something similar to a service facade using the ASP.Net WebAPI. The objective is to create a RESTful middle layer between a backend system and a mobile application.</p>\n\n<p>The code inside these service operations does not contain any logic which accesses data from a database. i.e. the EF framework, Linq to SQL, etc. Instead data is selected and updated by calling another set of remote services offered by a back end system.</p>\n\n<p>I need to implement some sort of unit testing for each service operation. Almost all WebAPI unit testing tutorial I visited online contains data access via Entity Framework and a repository class just wraps a single EF entity. </p>\n\n<p>Hence in my case</p>\n\n<ol>\n<li>Does it make sense to have unit tests when there is no data access logic inside the service operations as I mentioned above?</li>\n<li><p>If so is the Repository pattern the way to go? Please link an example which tests against a MVC project that accesses data via remote service calls if possible. </p></li>\n<li><p>Am I confusing integration testing with unit testing?</p></li>\n<li>If so should I just go for integration testing and forget about unit tests.</li>\n</ol>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","visual-studio","unit-testing","scope","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13175576,"title":"What is the scope of a test class when running unit tests?","body":"<p>When Visual Studio is running unit tests, it runs many tests simultaneously. What exactly is the scope of the test class while these are running. Are they all run in separate app domains or is data shared at all?</p>\n\n<p>For instance if I have the following test class:</p>\n\n<pre><code>[TestClass]\npublic class FooTests\n{\n    Mock&lt;ISomeInterface1&gt; _complexMock1;\n    Mock&lt;ISomeInterface2&gt; _complexMock2;\n\n    public void CreateComplexMocks()\n    {\n        //set up _complexMock1 &amp; _complexMock2\n    }\n\n    [TestMethod]\n    public void Test1()\n    {\n        CreateComplexMocks();\n\n        //use _complexMock1 &amp; _complexMock2 in test\n    }\n\n    [TestMethod]\n    public void Test2()\n    {\n        CreateComplexMocks();\n\n        //use _complexMock1 &amp; _complexMock2 in test\n    }\n}\n</code></pre>\n\n<p>The tests utilise the <code>CreateComplexMocks()</code> helper to construct some mocks. These are exposed as members rather than being passed back to the test (there would probably be many more in a real world example)</p>\n\n<p>My question is, if both tests run at the same time, will they be sharing the state of <code>_complexMock1</code> and <code>_complexMock2</code>?</p>\n\n<p>What if the complexMocks were static?</p>\n"},{"tags":["c#","asp.net","unit-testing"],"answer_count":7,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1029,"score":2,"question_id":3705908,"title":"How to test asp.net email is being sent","body":"<p>I have some code in my asp.net which sends an email:</p>\n\n<pre><code>public void SendEmail(string message)\n{\n    var body = message;\n\n    var email = new MailMessage(ConfigurationManager.AppSettings[\"SenderEmail\"],\n                            ConfigurationManager.AppSettings[\"RecipientEmail\"],\n                            \"Email Test\", body);\n\n    var client = new SmtpClient();\n    client.Host = Properties.Settings.Default.smtp;\n    client.DeliveryMethod = SmtpDeliveryMethod.Network;\n    client.Credentials = CredentialCache.DefaultNetworkCredentials;\n\n    client.Send(email);\n}\n</code></pre>\n\n<p>I'm wanting to know how to test this. Whether it is a unit test or integration test I really just don't care. I'm NOT wanting to mock this out. I'm actually wanting to write a test that an email is sent with the correct message.</p>\n\n<p>Can anyone help me with this?</p>\n"},{"tags":["unit-testing","gui","functional-programming"],"answer_count":13,"favorite_count":13,"up_vote_count":15,"down_vote_count":0,"view_count":5094,"score":15,"question_id":92059,"title":"GUI Testing","body":"<p>I'm working on the issue of testing my GUI and I'm not entirely sure of the best approach here. My GUI is built using a traditional MVC framework so I am easily able to test the logic parts of the GUI without bringing up the GUI itself. However, when it comes to testing the functionality of the GUI, I'm not really sure if I should worry about individually testing GUI components or if I should mainly just focus on functional testing the system. It's a pretty complex system in which testing the GUI frequently involves sending a message to the server and then observing the response on the GUI. My initial thoughts are that functional testing is the way to go here since I need a whole system running to really test the UI. Comments on this issue would be appreciated.</p>\n\n<p>Thanks,\nJeff</p>\n"},{"tags":["c#",".net","unit-testing","moq","autofixture"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13168106,"title":"How to debug verify in moq?","body":"<p>I am using NPoco that comes with IDatabase class for the database call methods. I want to verify that the object going into the NPoco Insert method has the correct data(in the form of a domain object).</p>\n\n<pre><code>   public interface IUnitOfWorkProvider\n    {\n        IUnitOfWork GetUnitOfWork();\n    }\n\n    public interface IUnitOfWork : IDisposable \n        {\n            void Commit();\n            IDatabase Db { get; }\n            void SetOneTimeCommandTimeout(int timeout);\n            void SetGlobalCommandTimeout(int timeout);\n        }\n    public interface IDatabase : IDatabaseQuery\n    {\n        IDbConnection Connection { get; }\n        IDbTransaction Transaction { get; }\n\n        void AbortTransaction();\n        void BeginTransaction();\n        void BeginTransaction(IsolationLevel? isolationLevel);\n        void CompleteTransaction();\n        IDataParameter CreateParameter();\n        int Delete(object poco);\n        int Delete&lt;T&gt;(object pocoOrPrimaryKey);\n        int Delete&lt;T&gt;(Sql sql);\n        int Delete&lt;T&gt;(string sql, params object[] args);\n        int Delete(string tableName, string primaryKeyName, object poco);\n        int Delete(string tableName, string primaryKeyName, object poco, object primaryKeyValue);\n        void Dispose();\n        Transaction GetTransaction();\n        Transaction GetTransaction(IsolationLevel? isolationLevel);\n        object Insert(object poco);\n        object Insert(string tableName, string primaryKeyName, object poco);\n        object Insert(string tableName, string primaryKeyName, bool autoIncrement, object poco);\n        void Save(object poco);\n        void Save(string tableName, string primaryKeyName, object poco);\n        IDatabase SetTransaction(IDbTransaction tran);\n        int Update(object poco);\n        int Update&lt;T&gt;(Sql sql);\n        int Update(object poco, IEnumerable&lt;string&gt; columns);\n        int Update(object poco, object primaryKeyValue);\n        int Update&lt;T&gt;(string sql, params object[] args);\n        int Update(object poco, object primaryKeyValue, IEnumerable&lt;string&gt; columns);\n        int Update(string tableName, string primaryKeyName, object poco);\n        int Update(string tableName, string primaryKeyName, object poco, IEnumerable&lt;string&gt; columns);\n        int Update(string tableName, string primaryKeyName, object poco, object primaryKeyValue);\n        int Update(string tableName, string primaryKeyName, object poco, object primaryKeyValue, IEnumerable&lt;string&gt; columns);\n    }\n\n // my test class file\n private IFixture fixture;\n  private Mock&lt;IUnitOfWork&gt; unitOfWork;\n  private MyService myService;\n     private Mock&lt;IDatabase&gt; database; // new based on responses\n\n    [SetUp]\n        public void Setup()\n        {\n            fixture = new Fixture().Customize(new AutoMoqCustomization());\n database = fixture.Freeze&lt;Mock&lt;IDatabase&gt;&gt;();// new based on responses \n            unitOfWork = fixture.Freeze&lt;Mock&lt;IUnitOfWork&gt;&gt;();\n            myService = fixture.CreateAnonymous&lt;MyService&gt;();\n        }\n\n        [Test]\n        public MyTest()\n        {       \n              // fails\n            unitOfWork.Setup(x =&gt; x.Db.Insert(It.IsAny&lt;MyDomainObject&gt;()));\n            myService.CallMyMethod();\n            unitOfWork.Verify(x =&gt; x.Db.Insert(It.IsAny&lt;MyDomainObject&gt;()));\n\n            // fails\n            unitOfWork.Setup(x =&gt; x.Db.Insert(It.IsAny&lt;object&gt;()));\n            myService.CallMyMethod();\n            unitOfWork.Verify(x =&gt; x.Db.Insert(It.IsAny&lt;object&gt;()));\n// fails (this was a try based on responses)\n database.Setup(x =&gt; x.Insert(It.IsAny&lt;object&gt;()));       \n myService.CallMyMethod();        \n database.Verify(x =&gt; x.Insert(It.IsAny&lt;object&gt;()));\n\n            // passes\n            unitOfWork.Setup(x =&gt; x.Db.Insert(It.IsAny&lt;object&gt;()));\n            myService.CallMyMethod();\n            unitOfWork.Verify();\n        }\n\npublic class MyDomainObject\n{\n   public void Id {get; set;}\n}\n</code></pre>\n\n<p>The code being called(what should trigger the verify)</p>\n\n<pre><code> using (var unitOfWork = unitOfWorkProvider.GetUnitOfWork())\n            {\n       MyDomainObject myDomain = anotherService.getMyDomain(DateTime.Now, 100);\n       unitOfWork.Db.Insert(myDomain); \n\n}\n</code></pre>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","rspec"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13167638,"title":"RSpec test if all models respond_to attribute","body":"<p>I'm trying to write an RSpec test for what seems like a relatively simple test, but it's proving pretty tricky (though I am new to RSpec).</p>\n\n<p>In simple terms, I want to test that all models in my application respond_to :owner or :owners.</p>\n\n<p>My first problem is looping through all of the models - how to do this in RSpec? I can normally loop through the models like:</p>\n\n<pre><code>ActiveRecord::Base.descendants.each { |model|\n    model.should respond_to :owner\n}\n</code></pre>\n\n<p>But not sure how to do this correctly in RSpec? I can't find much documentation about using loops within tests.</p>\n\n<p>My second question is about an \"OR\" clause - how can I achieve \"responds to owner or owners\"? Something like:</p>\n\n<pre><code>model.should respond_to :owner || :owners\n</code></pre>\n\n<p>But again I can find much documentation about using or clauses.</p>\n\n<p>Thanks!</p>\n"},{"tags":["android","unit-testing","android-emulator","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13169260,"title":"Why does my test using sendKeys() not animate in the Android emulator?","body":"<p>When I run the following test in the Android emulator, the input value doesn't show up in the EditText. Why doesn't it? And what do I need to change so that I can see the input in the emulator? (The test passes, so in the end, it probably doesn't matter. I just would like to be able to see it actually happen in the emulator.)</p>\n\n<pre><code>public void testOkButtonOnClickWithUserInputNumber() throws Throwable {\n    this.sendKeys(Integer.toString(this.testNumber)); // 123\n\n    this.runTestOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.okButton.performClick());\n        }\n    });\n\n    this.getInstrumentation().waitForIdle(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.activity.isFinishing());\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","android","unit-testing","junit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13169235,"title":"Preferred way to test EditText input in an Android JUnit class","body":"<p>I have an Activity with EditText and Button widgets. Clicking the button prints an error message if the EditText is empty or calls <code>setResult()</code> to send the value back to another Activity which launched this one.</p>\n\n<p>I am writing some simple unit tests to check that this interaction works. I have two different versions of the same test:</p>\n\n<pre><code>@UiThreadTest\npublic void testOkButtonOnClickWithNumber() {\n    this.numberText.setText(Integer.toString(this.testNumber));\n    Assert.assertTrue(this.okButton.performClick());\n    Assert.assertTrue(this.activity.isFinishing());\n}\n\npublic void testOkButtonOnClickWithUserInputNumber() throws Throwable {\n    this.sendKeys(Integer.toString(this.testNumber));\n\n    this.runTestOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.okButton.performClick());\n        }\n    });\n\n    this.getInstrumentation().waitForIdle(new Runnable() {\n        @Override\n        public void run() {\n            Assert.assertTrue(NumberFilterTest.this.activity.isFinishing());\n        }\n    });\n}\n</code></pre>\n\n<p>As you can see, one test simply calls <code>setText()</code> on the EditText widget. The other uses <code>sendKeys()</code>. Is there a preferred best practice which of these two options to use during testing? Or should I keep both tests?</p>\n"},{"tags":["php","unit-testing","stub","utilities"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":19,"score":3,"question_id":13168640,"title":"Ideal stubs utility for php unit testing","body":"<p>I am looking utility for the stubs for unit testing in php.\nStub must meet typehinting. Must be able to check the method calls with parameters. Must be able to return values ​​according to the specified parameters.\nDo you know any?</p>\n"},{"tags":["unit-testing","dynamic","reflection","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13145030,"title":"Run unit tests on dynamically created DLL","body":"<p>I am thinking on how to implement this , and seems like my knowledge is too poor to understand the implementation.</p>\n\n<p>I have a code that compiles source code to DLL.</p>\n\n<p>Then I need somehow to run Unit test on this Dll , and check 3-4 methods inside.</p>\n\n<p>I am trying to run unit tests this way.</p>\n\n<pre><code>CompilerResults compileResults = codeProvider.CompileAssemblyFromSource(compilerParameters, new string[] { sourceCode });\n\n            Assembly myAssembly = compileResults.CompiledAssembly;\n\n            TestPackage testPackage = new TestPackage(@\"TestingProject.dll\");\n            testPackage.Assemblies.Add(myAssembly);\n\n            RemoteTestRunner remoteTestRunner = new RemoteTestRunner();\n            remoteTestRunner.Load(testPackage);\n            TestResult testResult = remoteTestRunner.Run(new NullListener(),TestFilter.Empty,false,LoggingThreshold.All);\n</code></pre>\n\n<p>And this for example Test</p>\n\n<pre><code>   [Test]\n    public void AddTest(IDynamicScript s)\n    {            \n        Assert.AreEqual(10, s.Add(5,5));\n        Assert.AreNotEqual(10,s.Add(4,5));\n\n    }\n</code></pre>\n\n<p>Since Assembly is compiled dynamically , I can't reference it to unit test Project , and it will not compile , any suggestions please on how to implement this please</p>\n"},{"tags":["forms","unit-testing","testing","symfony2","symfony-forms"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13158732,"title":"Testing symfony 2 forms","body":"<p>I develop new type, but I don't know how I can test it.\nAssert annotation is not load and validations is not called.\nCould any one please help me?</p>\n\n<pre><code>class BarcodeType extends AbstractType\n{\n    public function buildForm(FormBuilderInterface $builder, array $options)\n    {\n        $builder-&gt;\n            add('price');\n    }\n\n    public function setDefaultOptions(OptionsResolverInterface $resolver)\n    {\n        $resolver-&gt;setDefaults(array(\n            'data_class' =&gt; 'Bundles\\MyBundle\\Form\\Model\\Barcode',\n            'intention'  =&gt; 'enable_barcode',\n        ));\n    }\n\n    public function getName()\n    {\n        return 'enable_barcode';\n    }\n}\n</code></pre>\n\n<p>A have following model for storing form data.</p>\n\n<pre><code>namepspace Bundles\\MyBundle\\Form\\Model;\nclass Barcode\n{\n    /**\n     * @Assert\\Range(\n     *      min = \"100\",\n     *      max = \"100000\",\n     *      minMessage = \"...\",\n     *      maxMessage = \"...\"\n     * )\n     */\n    public $price;\n}\n</code></pre>\n\n<p>I develop some test like this, the form didn't get valid data but it is valid! (Because annotation is not applied)\nI try adding ValidatorExtension but I dont know how can I set constructor paramaters</p>\n\n<pre><code>    function test...()\n    {\n        $field = $this-&gt;factory-&gt;createNamed('name', 'barcode');\n        $field-&gt;bind(\n                array(\n                    'price'         =&gt; 'hello',\n        ));\n\n        $data = $field-&gt;getData(); \n\n        $this-&gt;assertTrue($field-&gt;isValid()); // Must not be valid \n\n    }\n</code></pre>\n"},{"tags":["unit-testing","visual-studio-2012","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13136950,"title":"Visual Studio 2012 code coverage partially touched area","body":"<p>I have a problem with Visual Studio 2012 unit testing, more precisely - with code coverage.\nHere is a target code:</p>\n\n<pre><code>var someDeals = allDeals\n            .Where(i =&gt; i.Number != null &amp;&amp; !i.Number.StartsWith(SomeString))\n            .Select(i =&gt; new DealInfoDto\n            {\n                CurrentDebtAmount = i.CurrentDebtAmount,\n                Date = i.Date,\n                NextMonthlyPaymentDate = i.NextMonthlyPaymentDate,\n                Number = i.Number,\n                AccountNumber = i.AccountNumber,\n            })\n            .ToArray();\n</code></pre>\n\n<p>When I run analyze code coverage it shows me that lambda expression in second line (<code>i.Number != null &amp;&amp; !i.Number.StartsWith(SomeString)</code>) is partially touched area and I can't get 100% coverage. But I'm sure that this expression is evaluated (expression inside SELECT is OK, so expression inside WHERE is true and that's mean that both parts of &amp;&amp; statement were touched, also I've checked data and I'm sure that <code>i.Number != null</code> and <code>!i.Number.StartsWith(SomeString)</code>.</p>\n\n<p>Why this block is not covered?</p>\n\n<p>P.S. I splitted <code>Where</code> into two expressions and everything became OK. But it looks smth ugly and would be better just one <code>Where</code>:</p>\n\n<pre><code>allDeals\n    .Where(i =&gt; i.Number != null)\n    .Where(i =&gt; !i.Number.StartsWith(CardAccountIdentifier))\n</code></pre>\n"},{"tags":["c#","unit-testing","dependency-injection","asp.net-mvc-4","visual-studio-2012"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13152268,"title":"Dependent (Procedural) Unit Testing in Visual Studio 2012","body":"<p>In an MVC4 C# website, we are using Unit Testing to test our code. What we are currently doing is creating a mock database, then testing each layer:</p>\n\n<ol>\n<li>Test the Database - connecting, initializing, load, etc.</li>\n<li>Test the code accessing the database</li>\n<li>Test the view layer</li>\n</ol>\n\n<p>I want these three categories to be run in order and only if the previous one passed. Is this the right way to go about it? The old way we were doing it was using a Dependency Injection framework was a weird approach to mock testing. We actually created a mock class for each data accessor, which sucks because we have to re implement the logic of each method, and it didn't really add any value because if we made a mistake with the logic the first time, we'll make it a second.</p>\n"},{"tags":["jquery","unit-testing","jquery-ajax","jasmine","sinon"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13148356,"title":"How to properly unit test jQuery's .ajax() promises using Jasmine and/or Sinon?","body":"<p>I've got a fairly straightforward function which returns a jQuery .ajax() promise as such:</p>\n\n<pre><code>CLAW.controls.validateLocation = function(val, $inputEl) {\n    return $.ajax({\n        url: locationServiceUrl + 'ValidateLocation/',\n        data: {\n            'locationName': val\n        },\n        beforeSend: function() {\n            $inputEl.addClass('busy');\n        }\n    }).done(function(result) {\n        // some success clauses\n    }).fail(function(result) {\n        // some failure clauses\n    }).always(function() {\n        // some always clauses\n    });\n}\n</code></pre>\n\n<p>For the most part, this new promises interface works like a dream, and eliminating callback pyramids when using jQuery's .ajax() is great. However, I cannot for the life of me figure out how to properly test these promises using Jasmine and/or Sinon:</p>\n\n<ol>\n<li><p>All of Sinon's documentation assumes you're using old-school\ncallbacks; I don't see a single example of how to use it with\npromises/deferreds</p></li>\n<li><p>When attempting to use a Jasmine or Sinon spy to spy on $.ajax, the\nspy is effectively overwriting the promise, so its <code>done</code>, <code>fail</code>,\nand <code>always</code> clauses no longer exist on the ajax function, so the promise never resolves and tosses an error instead</p></li>\n</ol>\n\n<p>I'd really just love an example or two of how to test these new jQuery .ajax() promises with the aforementioned testing libs. I've scoured the 'net fairly intensely and haven't really dredged up anything on doing so. The one resource I did find mentioned using Jasmine.ajax, but I'd like to avoid that if possible, seeing as Sinon provides most of the same capabilities out-of-the-box.</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13162237,"title":"Mocking foreach loop with Moq","body":"<p>I want to loop throug a XmlNodeList. How do you mock a XmlNodeList in Moq, so you can loop through it like in a foreach loop:</p>\n\n<pre><code>        foreach (XmlNode xmlNode in nodes)\n        {\n            //Do something with node\n        }\n</code></pre>\n\n<p>I have tried to set up via a the <code>SetupSequence</code> method, but I haven't been able to create the desired mock. </p>\n"},{"tags":["c#","unit-testing","microsoft-metro","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13162958,"title":"Windows 8 Appx installation timeout during unit test execution","body":"<p>We're running our Win8 Metro unit tests from powershell using vstest.console.exe, which is included with Visual Studio 2012. The way the process uses the unit test appx-package created by msbuild, and runs it: </p>\n\n<p><code>\\install\\location\\vstest.console.exe path\\to\\unittest.appx /InIsolation</code></p>\n\n<p>From time to time the execution fails with a timeout. </p>\n\n<pre><code>Starting test execution, please wait...\nError: Installation of package \n'\\absolute\\path\\to\\unittest.appx' \nfailed with Error: (0x5B4) Operation timed out. \nUnable to install Windows app package in 15 sec.\n\nFor more details look into Event Viewer under \nApplications and Services Logs -&gt; Microsoft -&gt; Windows \n  -&gt; AppXDeployment-Server -&gt; Microsoft-Windows-AppXDeploymentServer/Operational.\n</code></pre>\n\n<p>If checking the logs, as suggested by the tool, one can indeed see that there are some errors, but the package actually does seem to install after roughly 35 seconds. There is no real indication on the root cause of this problem though. Fierce googling didn't reveal anything, so maybe this category of problems would've been better solved with bing...</p>\n\n<p>Is this a known issue? Are there some normal reasons for appx installation to fail with a timeout, and that can be fixed easily? The error seems to be related specifically to installation, not the unit testing as such. Normally the whole test execution with install and uninstall finishes in a few seconds. </p>\n\n<p>If the answers to the questions above are no, then is it possible to increase the installation timeout either for the process, or system wide?  </p>\n"},{"tags":["sql","django","oracle","unit-testing","django-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13162771,"title":"django how to see sql query when running tests?","body":"<p>One of my django application unit test fails with</p>\n\n<pre><code>DatabaseError: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>I would like to see actual SQL query that caused this error. Do you know how to achieve that?</p>\n"},{"tags":["android","unit-testing","junit","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13159006,"title":"Am I correct that Robolectric doesn't support Spinner right now","body":"<p>Tried to test Dialog with Spinner and got:</p>\n\n<pre><code>NullPointerException: can't get shadow for null\n</code></pre>\n\n<p>Am I correct that Robolectric doesn't support Spinner right now?</p>\n\n<p>As well it's not possible to register shadow for it?</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":121,"score":2,"question_id":12181578,"title":"Visual Studio 2010 Not Recognizing Unit Test","body":"<p>In an existing solution I added a new Test Project.  In my Test Project .cs file I have a class decorated with the [TestClass] attribute and a method decorated with the [TestMethod] attribute.  I have verified that in Configuration Manager the build check box is checked for the Test Project (as my google search has revealed was the problem for others with this issue).  I have set Test Project as my start up project for the solution.  When I try to start the test I get \"Can not start test project because the project does not contain any tests\".  I am really new to unit testing.  What am I missing?</p>\n\n<pre><code>[TestClass]\npublic class UnitTest1\n{\n    [TestMethod]\n    public void TestMethod1()\n    {\n       Whole bunch of stuff\n       Assert.Inconclusive(\"Done\");\n    }\n }\n</code></pre>\n\n<p>Update:  So I opened a new instance of VS, went to File => New => Project => Test Project.  Did not touch or edit anything.  Went straight to the cs file and here are its contents in its entirety:</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\n\nnamespace TestProject2\n{\n public class Inspection\n {\n    public bool SubmitInsp()\n    {\n        return true;\n    }\n }\n\n [TestClass]\n public class UnitTest1\n {\n    [TestMethod]\n    public void TestMethod1()\n    {\n        Inspection insp = new Inspection();\n        bool result = insp.SubmitInsp();\n\n        Assert.IsTrue(result);\n    }\n }\n}\n</code></pre>\n\n<p>Same error about the project not containing any test when I try to start it. Also found this in the build output \"Could not load file or assembly '~\\my documents\\visual studio 2010\\Projects\\TestProject2\\bin\\Debug\\TestProject2.dll' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515)\"</p>\n\n<p>I don't know that units tests get much simpler than this.  What the heck???</p>\n"},{"tags":["visual-studio-2010","unit-testing","output"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13157733,"title":"Visual Studio 2010: test runtime directory","body":"<p>In order to get a rather tedious third party library to work, I need my unit tests to be executed in a specific, prepared directory with a large set of resource files there (~ 500MB). The reason for this is that aforesaid third party library will only work when all resources, libraries and executables of my program are located in that same directory.</p>\n\n<p>When running Visual Studio 2010 unit tests, however, the test runner always creates a new directory (e.g. \"default[1]\") per test run. How can I get it to always use the same, fixed directory?</p>\n"},{"tags":["c#","unit-testing","testing","lambda","fluentvalidation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13148825,"title":"Validating enums with a custom FluentValidator validator","body":"<p>I created a custom validator, which tests that a value is within an enum's range of valid values:</p>\n\n<pre><code>public class IsInEnumValidator&lt;T&gt; : PropertyValidator {\n  public IsInEnumValidator() : base(\"Property {PropertyName} it not a valid enum value.\") { }\n  protected override bool IsValid(PropertyValidatorContext context) {\n    if (!typeof(T).IsEnum) return false;\n    return Enum.IsDefined(typeof(T), context.PropertyValue);\n  }\n}\n</code></pre>\n\n<p>And an extension method for chaining validators:</p>\n\n<pre><code>public static IRuleBuilderOptions&lt;T, TProperty&gt; IsInEnum&lt;T, TProperty&gt;(this IRuleBuilder&lt;T, TProperty&gt; ruleBuilder) {\n  return ruleBuilder.SetValidator(new IsInEnumValidator&lt;TProperty&gt;());\n}\n</code></pre>\n\n<p>I want to use use it like this:</p>\n\n<pre><code>RuleFor(x =&gt; x.Day).IsInEnum&lt;DayOfWeek&gt;();\n</code></pre>\n\n<p><strong>My questions:</strong></p>\n\n<ol>\n<li><p>This doesn't work as expected, as I need to speficy <code>....IsInEnum&lt;T, DayOfWeek&gt;()</code> instead of the desired <code>....IsInEnum&lt;DayOfWeek&gt;();</code>. How do I achieve this?</p></li>\n<li><p>I want to test this custom validator - not to test my data with this validator, but to test the validator itself. The library's docs explain how to test your data, not how to test a custom validator. There seems to be lots of testing code in the library, is there anything I can reuse? I use NUnit.</p></li>\n</ol>\n"},{"tags":["unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12486847,"title":"Are for loops that test a condition OK in unit tests?","body":"<p>I am starting to play around with xUnit and Moq and was wondering if I am doing it right.</p>\n\n<p>Should I write tests like this:</p>\n\n<pre><code>[Fact]\npublic void ForWebShouldReturnDev()\n{\n    // Arrange\n    var server = new Mock&lt;HttpServerUtilityBase&gt;();\n    server.SetupSequence(s =&gt; s.MachineName).Returns(\"t11466\").Returns(\"localhost\").Returns(\"webdev\");\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.SetupGet(c =&gt; c.Server).Returns(server.Object);\n\n    var service = new EnvironmentService(context.Object, null);\n\n    // Act / Assert\n    service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n    service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n    service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n}\n</code></pre>\n\n<p>Or more like this:</p>\n\n<pre><code>[Fact]\npublic void ForWebShouldReturnDev()\n{\n    // Arrange\n    var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.SetupGet(c =&gt; c.Server).Returns(server.Object);\n\n    var service = new EnvironmentService(context.Object, null);\n\n    // Act / Assert\n    foreach (var name in new string[] { \"t11466\", \"localhost\", \"webdev\" })\n    {\n        server.Setup(s =&gt; s.MachineName).Returns(name);\n        service.GetApplicationEnvironment().Should().Be(ApplicationEnvironment.Dev);\n    }\n}\n</code></pre>\n\n<p>I know you are only supposed to test one unit of code per test, but when there are variables to the test is it OK to loop through asserts?</p>\n\n<p>I am having trouble figuring out the best way to test these types of things.</p>\n\n<p>For the record, below is the actual code under test:</p>\n\n<pre><code>// The constructor for the application environment\npublic EnvironmentService(HttpContextBase httpContext, IEnvironment environment)\n{\n    this.environment = environment;\n    this.httpContext = httpContext;\n}\n\nprivate readonly Dictionary&lt;ApplicationEnvironment, string&gt; applicationEnvironments = new Dictionary&lt;ApplicationEnvironment, string&gt;() {\n    { ApplicationEnvironment.Dev, \"DEV\" },\n    { ApplicationEnvironment.Test, \"TEST\" },\n    { ApplicationEnvironment.QA, \"QA\" },\n    { ApplicationEnvironment.Prod, \"PROD\" }\n};\n\npublic ApplicationEnvironment GetApplicationEnvironment()\n{\n    var machine = IsWeb ? httpContext.Server.MachineName : environment.GetCommandLineArgs().First();\n\n    return applicationEnvironments.FirstOrDefault(x =&gt; machine.ToUpper().Contains(x.Value)).Key;\n}\n</code></pre>\n\n<p>I have another question out there <a href=\"http://stackoverflow.com/questions/12484241/setup-moq-to-return-multiple-values\">here</a> regarding more specifics with Moq.</p>\n\n<p>Are there any good resources out there for Moq, their documentation is pretty thin.</p>\n"},{"tags":["unit-testing","configuration","xsd","visual-studio-2012","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12928436,"title":"Are there any xsd schemas available for the .runsettings file in Visual Studio 2012 unit tests?","body":"<p>Based on this msdn article <a href=\"http://msdn.microsoft.com/en-us/library/jj635153.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/jj635153.aspx</a>, in Visual Studio 2012 you need to use an xml file named .runsettings to configure your deployment,code coverage, framework settings etc. </p>\n\n<p>On first glance this looks great as you can hook in adapter settings from any test adapter, e.g. NUnit,MSTest,MBUnit etc. However in my installation of Visual Studio 2012 Premium there are no xsd schemas for creating this file, but there are of course the old schemas for the VS2010 .testsettings file. (xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\" aka %programfiles%\\Microsoft Visual Studio 11.0\\Xml\\Schemas\\vstst.xsd)</p>\n\n<p>Has anyone found anything other than the sample on the link above to go for creating the run settings file? </p>\n\n<p>Also have you found how to reference the legacy VS2010 .testsettings file from the .runsettings file as there are no specifics on whether it should be relative or absolute in the \"SettingsFile\" node?</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13155796,"title":"how to test django project","body":"<p>I wrote some test case to test my django project, when I run them in jenkins it always create a <strong>default database</strong>, I want to test my project with my own database, how to do?</p>\n"},{"tags":["sql","tsql","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12171214,"title":"SQL Unit Testing Creating test for Stored procedure that does not necessarily return a value","body":"<p>I am new to sql unit testing but I have written my first test and trying to make sure this is a sensible test. So I have a stored procedure that does a simply Update(if exists) or insert(if not exists). Using TSQLUnit, I wrote the test below to test my stored procedure called <strong>spModifyData</strong>. What the test is designed to do is verify that when an existing ID is passed, a new record is not created in the database. </p>\n\n<pre><code>ALTER PROCEDURE [dbo].[ut_TestspModifyData] \nAS\nBEGIN \n    SET NOCOUNT ON;\n     -- Setup the test conditions by inserting test data\n     DECLARE \n                @newidone uniqueidentifier,\n                @newidtwo uniqueidentifier,\n                @newidthree uniqueidentifier,\n                @ExpectedID uniqueidentifier,\n                @ActualID uniqueidentifier\n\n                SET @ActualID = '13E7C741-9A04-4E84-B604-141874A6A9B4'\n                SET @ExpectedID = '13E7C741-9A04-4E84-B604-141874A6A9B4'\n                SET @newidone = newID()\n                SET @newidtwo = newID()\n                SET @newidthree = newID()\n\n                 INSERT INTO DataSource( [DataSourcePrimarySource],[DataSourceName],[DataSourceRecordCreateDate] \n          ,[DataSourceStatus] ,[DataSourceIsActive]) VALUES ('PRIMARY SOURCE ONE', 'XYZ', GETDATE() , @newidone, 1)\n\n  -- Exercise the test\n EXEC  spModifyDataSource @ActualID , 'PRIMARY SOURCE ONETWO', 'BBB', @newIDone, 0  \n\n -- Assert expectations\n IF (@ExpectedID != @ActualID)\n                EXEC dbo.tsu_Failure 'ModifyData failed.' \n\n-- Teardown\n -- Implicitly done via ROLLBACK TRAN\n\nEND\n</code></pre>\n"},{"tags":["ruby","unit-testing","class","instance-variables"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13152158,"title":"Unit testing sameness/equality of instances of the same class in Ruby","body":"<p>\nI'm trying to unit test sameness of two instances of one class in Ruby:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def test_example\n    a = Object.new\n    b = Object.new\n\n    assert_equal a, b\nend\n</code></pre>\n\n<p>I understand that this fails because the instances are distinct variables each with its own memory pointer. What I'm after is to get this test to pass if the instances are identical in all respects but their reference pointers.</p>\n\n<p>Here's a more involved (if contrived) example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Let's stir up something...\nclass FooBar\n    attr_accessor :seed, :foo, :bar\n\n    def foo_the_bar()\n        @bar = @seed + @foo * 3\n    end\nend\n\nf = FooBar.new\nf.seed = \"Mountains \"\nf.foo  = \"are just mountains \"\nf.bar = \"obliterate me!\"\nf.foo_the_bar\np f.bar # \"Mountains are just mountains are just mountains are just mountains \"\n\n\n# So far so good, now let's test if one FooBar is same as another...\n\nrequire 'test/unit'\nclass FooBarTest &lt; Test::Unit::TestCase\n\n    # Test fails: &lt;#&lt;FooBar:0x9a40d18&gt;&gt; expected but was &lt;#&lt;FooBar:0x9a40d04&gt;&gt;.\n    # But what we really want is a way to make this pass\n    # since the objects are exactly the same in every respect,\n    # besides their pointers.\n    def test_foobar_1_init\n        f1 = FooBar.new\n        f2 = FooBar.new\n\n        assert_equal f1, f2\n    end\n\n    # Again, test fails, but we want it to pass,\n    # since the instance variables are the same.\n    def test_foobar_2_instance_var\n        f1 = FooBar.new\n        f2 = FooBar.new\n\n        f1.seed = \"Santa says \"\n        f1.foo = \"ho \"\n        f1.bar = \"something\"\n        f1.foo_the_bar\n\n        f2.seed = f1.seed\n        f2.foo = f1.foo\n        f2.foo_the_bar\n\n        assert_equal f1, f2\n    end\n\n    # This test fails for the wrong reason.\n    # We want this to fail because the instance variables are different.\n    # This test should also fail if we add a method to one of the instances,\n    # or make the instances differ from each some other way.\n    def test_foobar_3_diff\n        f1 = FooBar.new\n        f2 = FooBar.new\n\n        f1.seed = \"Kitty goes \"\n        f1.foo = \"meow \"\n        f1.foo_the_bar\n\n        f2.seed = \"Doggies goes \"\n        f2.foo = \"woof \"\n        f2.foo_the_bar\n\n        assert_equal f1, f2\n    end\nend\n</code></pre>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":9,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":711,"score":5,"question_id":190007,"title":"Automagic unit tests for upholding Object method contracts in Java?","body":"<p>When developing Java applications, I often override Object methods (usually equals and hashCode).  I would like some way to systematically check that I'm adhering to the contract for Object methods for every one of my classes.  For example, I want tests that assert that for equal objects, the hash code is also equal.  I'm using the JUnit test framework, so preferably I'd like some JUnit solution where I can automatically generate these tests, or some test case that can somehow visit all of my classes and make sure that the contract is upheld.</p>\n\n<p>I'm using JDK6 and JUnit 4.4.</p>\n"},{"tags":["asp.net","unit-testing","testing","automated-tests","web-testing"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":163,"score":1,"question_id":4721129,"title":"Web Testing Software","body":"<p>I am working as a web developer in a company. I am not aware of anything related to testing. Our company is planning to buy some testing softwares. Presently we are working on ASP.NET. We will be working on PHP and JAVA in future. I need your help to find out the best but cost effective testing sofwares. I have got some suggestions on TFS and Visual Studio Testing tool. Don't know what to do. Please suggest me.</p>\n"},{"tags":["c#","unit-testing","design-patterns","moq"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13139131,"title":"A generic testdata builder -- does it obscure the beauty of the pattern?","body":"<p>I have made a generic databuilder for unit test, because I got tired of implementing constructors and Build methods again and again. Does this obscure the beauty of the pattern (that I really DO love)? </p>\n\n<p>Here is my generic builder (built in C# with Moq): </p>\n\n<pre><code>public class GenericMockBuilder&lt;T&gt; where T: class\n{\n    private readonly Mock&lt;T&gt; _objectMock = new Mock&lt;T&gt;(); \n\n    protected Mock&lt;T&gt; ObjectMock\n    {\n        get { return _objectMock; }\n    }\n\n    public T Build()\n    {\n        return _objectMock.Object; \n    }\n}\n</code></pre>\n\n<p>And here is an example interface and its concrete builder that inherrits the generic one: </p>\n\n<pre><code>public interface IFoo\n{\n    int Bar();\n}\n\npublic class FooBuilder: GenericMockBuilder&lt;IFoo&gt;\n{\n    public FooBuilder WithBar(int barValue)\n    {\n        base.ObjectMock.Setup(x =&gt; x.Bar()).Returns(barValue);\n        return this;\n    }\n\n}\n</code></pre>\n\n<p>The builder will construct a foo mock like this: </p>\n\n<pre><code>        IFoo fooMock = new FooBuilder().WithBar(12).Build();\n</code></pre>\n\n<p>I would love to hear oppinions and suggestions for improvement. </p>\n\n<p><strong>EDIT (Eventraising example added):</strong> </p>\n\n<pre><code>public class FooBuilderWithEvent: GenericMockBuilder&lt;IFoo&gt;\n{\n\n    public FooBuilderWithEvent RaiseEvent(FooEventArgs fooEventArgs)\n    {\n        base.ObjectMock.Raise(m =&gt; m.FooEvent += null, fooEventArgs); \n        return this; \n    }\n\n}\n</code></pre>\n\n<p>Building Mock and raising event would look like this: </p>\n\n<pre><code>        FooBuilderWithEvent fooBuilderWithEvent = new FooBuilderWithEvent(); \n        IFoo fooMock = fooBuilderWithEvent.Build();\n\n        //Create testobject and prepare for event here\n\n        fooBuilderWithEvent.RaiseEvent(new FooEventArgs()); \n</code></pre>\n"},{"tags":["python","perl","unit-testing","nose"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13150963,"title":"How can we extend Test::Harness \"prove\" to have features like nosetest (Python) or vice versa","body":"<p>Here are some of the features provided by nose:</p>\n\n<ol>\n<li>nose supports fixtures (setup and teardown methods) at the package, module, class, and test level.</li>\n<li>In addition to passing command-line options, you may also put configuration options in your project’s setup.cfg file, or a .noserc or nose.cfg file in your home directory. </li>\n<li>There are numerous nose plugins available via easy_install and elsewhere. To use a plugin, just install it. The plugin will add command line options to nosetests.</li>\n<li>--verbosity=VERBOSITY option</li>\n<li>--testmatch=REGEX command line option</li>\n<li>--debug=DEFAULT command line option</li>\n<li>--log-config=FILE </li>\n<li>--ignore-files=REGEX</li>\n<li>--exclude=REGEX</li>\n<li>--include=REGEX</li>\n<li>--attr=ATTR Run only tests that have attributes specified by ATTR [NOSE_ATTR]</li>\n<li>--with-coverage</li>\n<li>--cover-min-percentage=DEFAULT</li>\n<li>--cover-xml</li>\n<li>--cover-xml-file=FILE</li>\n<li>--no-deprecated</li>\n<li>--with-id</li>\n<li>--with-xunit</li>\n<li>--collect-only</li>\n<li>nose allows tests to be grouped into test packages. </li>\n<li>provides a few convenience functions to make writing tests easier. </li>\n<li><p>nose includes a number of builtin plugins that can make testing faster and easier.\n <a href=\"https://nose.readthedocs.org/en/latest/plugins/builtin.html\" rel=\"nofollow\">built-in plugins</a></p></li>\n<li><p><a href=\"https://nose-plugins.jottit.com/\" rel=\"nofollow\">nose's 3rd party plugins</a></p></li>\n<li><p><a href=\"https://nose.readthedocs.org/en/latest/plugins.html#writing-plugins\" rel=\"nofollow\">How to write plugins for nose</a></p></li>\n</ol>\n\n<p>Now as for prove:</p>\n\n<p>Test::Harness provides a command, prove , which runs a TAP based test suite and prints a report.</p>\n\n<ol>\n<li>Attributes\nAfter command line parsing the following attributes reflect the values of the corresponding command line switches. They may be altered before calling run .</li>\n<li>archive</li>\n<li>argv</li>\n<li>backwards</li>\n<li>blib</li>\n<li>color</li>\n<li>directives</li>\n<li>dry</li>\n<li>exec</li>\n<li>extensions</li>\n<li>failures</li>\n<li>comments</li>\n<li>formatter</li>\n<li>harness</li>\n<li>ignore_exit</li>\n<li>includes</li>\n<li>jobs</li>\n<li>lib</li>\n<li>merge</li>\n<li>modules</li>\n<li>parse</li>\n<li>plugins</li>\n<li>quiet</li>\n<li>really_quiet</li>\n<li>recurse</li>\n<li>rules</li>\n<li>show_count</li>\n<li>show_help</li>\n<li>show_man</li>\n<li>show_version</li>\n<li>shuffle</li>\n<li>state</li>\n<li>state_class</li>\n<li>taint_fail</li>\n<li>taint_warn</li>\n<li>test_args</li>\n<li>timer</li>\n<li>verbose</li>\n<li>warnings_fail</li>\n<li>warnings_warn</li>\n<li>tapversion</li>\n<li>trap</li>\n</ol>\n\n<p>Some questions/Wish list:</p>\n\n<ol>\n<li>How can we ensure that tests run in alphabetical order, in prove ?</li>\n<li>How can we have prove results in XML/xUnit Style , so it can be rendered by Jenkins</li>\n<li>How can we have decorators / Annotations in prove like in Junit 4.x, or <a href=\"http://testng.org/doc/documentation-main.html\" rel=\"nofollow\">testng</a></li>\n<li>Provide extended assertions like <a href=\"https://github.com/easytesting/fest-assert-core.git\" rel=\"nofollow\">FEST</a></li>\n<li>prove to provide some examples on how to write plugins, which actually work (other than foo/bar type examples)</li>\n</ol>\n"},{"tags":["android","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13022706,"title":"Using custom InstrumentationTestRunner in Eclipse causes Error","body":"<p>I have a seperate Test Project in Eclipse that has been running successfully for a while in both command line and Eclipse.  While using Jenkins to run my tests, I've run into the issue where the standard InstrumentationTestRunner does not output in a Jenkins supported xml format.  I've read on the internet to use a custom InstrumentationTestRunner.  This works in the command line using ADB, but fails in Eclipse when running as Android Test Case.</p>\n\n<p>I've downloaded a custom instrumentation test runner (com.neenbedankt.android.test) and added it to the AndroidManifest like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.testedapplication.test\"\n    android:versionCode=\"1\"\n    android:versionName=\"1.0\" &gt;\n\n    &lt;uses-sdk android:minSdkVersion=\"7\" /&gt;\n\n    &lt;instrumentation\n        android:name=\"com.neenbedankt.android.test.InstrumentationTestRunner\"\n        android:targetPackage=\"com.testedapplication\" /&gt;\n\n    &lt;application\n        android:icon=\"@drawable/ic_launcher\"\n        android:label=\"@string/app_name\" &gt;\n        &lt;uses-library android:name=\"android.test.runner\" /&gt;\n    &lt;/application&gt;    \n&lt;/manifest&gt;\n</code></pre>\n\n<p>Here is the error that I get in Eclipse:</p>\n\n<p>[Test Project] is not configured correctly for running tests:\nA targetPackage attribute for instrumentation android.test.InstrumentationTestRunner in its AndroidManifest.xml could not be found!</p>\n\n<p>You can see that i've set the targetPackage there, so I'm not sure what else I can do?</p>\n"},{"tags":["unit-testing","junit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13147020,"title":"object cache for java unit testing","body":"<p>I am not sure what the correct technical term for the test scenario I am thinking about; but here are the features that I want to be able to do during mu unit testing:</p>\n\n<ol>\n<li><p>Instead of going to database I want a frame work that will store (serialized to disk) objects that I can pass to my unit test methods.</p></li>\n<li><p>I should be able to create these objects from a DB source and save them to use later in my UNIT test cases.</p></li>\n<li><p>The object store should be portable (like hsqldb file based DB that I can move around from system to system).</p></li>\n</ol>\n\n<p>Is there a technical term for framework/library for such requirement? Object Database/Object store etc? Please note that I am not trying to install/configure an entire database rather I want to be able to re-create an already created complex Object structure and pass it onto a junit test method.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13145493,"title":"how to unit test service call","body":"<p>how to test method that calls a service and passess in an object.</p>\n\n<pre><code>long AddFileDownloadEntry(FileDownloadEntry fde);\n</code></pre>\n\n<p>I understand how to unit test when there is some logic involved, but this service just passes in an object and the data in the object is inserted into the database.</p>\n\n<p>Edit:</p>\n\n<p>Sorry I wasn't clear , I'm trying to test the method in the service.</p>\n"},{"tags":["java","unit-testing","junit","jvm"],"answer_count":1,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":45,"score":8,"question_id":13144502,"title":"Is there a portable way to find out how many files a JVM has open from inside the VM?","body":"<p>I am writing tests for some Java file handling code and want to make sure all files are closed properly. I don't want to run 'lsof' as that will open more files and make the test suite non-portable. Anyone know a way to do this? </p>\n"},{"tags":["unit-testing","maven-2","scala"],"answer_count":4,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":3258,"score":14,"question_id":1093520,"title":"Is there a Scala unit test tool that integrates well with Maven?","body":"<p>My company is beginning to write some code using Scala.  I've been moved onto this project, and am a big fan of TDD, so I would like to get a unit-testing framework in place.  However, the build system we're using for this project is Maven, and that's not going to change, for a variety of reasons.</p>\n\n<p>I've looked at both ScalaTest and ScalaCheck, and both seem to have issues with Maven integration.  Various forum posts I've seen in Google searches indicate that some of the Suites included with ScalaTest won't run under the maven-scala-plugin, and I haven't been able to find any information at all on running ScalaCheck in Maven's test goal.</p>\n\n<p>Can anyone either point me at a way to get ScalaTest/ScalaCheck running reliably with Maven, or suggest an alternative?</p>\n"},{"tags":["unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1487,"score":2,"question_id":4422837,"title":"MS Unit testing example","body":"<p>I'm struggling to get my head around unit testing. I've been following examples from both Nerd dinner and pro asp.net MVC framework, but as soon as I attempt my own quickly become stuck. As a test I have tried to build a validation class that simply using login information - usename and password to return a user from a repository. I've used this example as it's pretty simple to imagine what tests one might perform: Is_Password_Valid, Is_Username_Valid etc. </p>\n\n<p>I've spent far too long trying to get my noggin around this. Could any one provide an example of how they might approach this as a unit test? I think once I've cracked this I'll be away.</p>\n\n<pre><code>//Arrange\nstring email = \"test@test.com\";\nstring password = \"test\";\n\n//Arrange\nList&lt;Customer&gt; customer = new List&lt;Customer&gt;();\n\ncustomer.Add(new Customer { CustomerId = 1, Email = email, Password = \"best\", FirstName = \"test\", LastName = \"wods\", Sex = true });\nmockRepos = new Moq.Mock&lt;ICustomerRepository&gt;();\nmockRepos.Setup(x =&gt; x.GetCustomerByPasswordUsername(email, password)).Returns(customer.First());\nAuthenticate auth = new Authenticate(mockRepos.Object);\n\n//Act\nvar result = auth.Login(email, password);\n\n//Assert\n//this is where I start to become unstuck??????\n</code></pre>\n"},{"tags":["unit-testing","matlab","continuous-integration","simulink","stateflow"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":661,"score":6,"question_id":7335266,"title":"Unit testing/continuous integration with Simulink/Stateflow","body":"<p>How can I perform unit testing in Simulink, or preferably, Stateflow?</p>\n\n<p>I'm a fan of agile software methods, including test driven development. I'm responsible for the development of safety critical control software and we're using Matlab/Simulink/Stateflow for the development of it. This toolset is selected because of the link with plant (hardware) models. (model-in-the-loop, hardware-in-the-loop)</p>\n\n<p>I have found some links on Stackoverflow: <a href=\"http://stackoverflow.com/questions/3992295/unit-testing-framework-for-matlab\">Unit-testing framework for MATLAB</a>: <a href=\"http://www.mathworks.com/matlabcentral/fileexchange/22846-matlab-xunit-test-framework\">xunit</a>, <a href=\"http://sourceforge.net/projects/mlunit/\">slunit</a> and <a href=\"http://www.mathworks.com/matlabcentral/fileexchange/28862-doctest-embed-testable-examples-in-your-functions-help-comments\">doctest</a>.</p>\n\n<ul>\n<li>Does anyone have experience in using those or different unit test frameworks?</li>\n<li>How to link this to continuous integration systems (i.e. Hudson)?</li>\n</ul>\n"},{"tags":["c#",".net","unit-testing","mocking"],"answer_count":19,"favorite_count":131,"up_vote_count":318,"down_vote_count":0,"view_count":57754,"score":318,"question_id":37359,"title":"What C# mocking framework to use?","body":"<p>I want to start using <a href=\"http://en.wikipedia.org/wiki/Mock_object\">mock objects</a> on my next C# project.</p>\n\n<p>After a quick Google search I've found there are many:</p>\n\n<ul>\n<li><a href=\"http://www.nmock.org/\">NMock</a>  </li>\n<li><a href=\"http://sourceforge.net/projects/easymocknet/\">EasyMock.NET</a></li>\n<li><a href=\"http://www.typemock.com\">TypeMock Isolator</a>  <strong><em>Commercial / Paid</em></strong></li>\n<li><a href=\"http://hibernatingrhinos.com/open-source/rhino-mocks\">Rhino Mocks</a></li>\n<li><a href=\"http://code.google.com/p/moq/\">Moq</a></li>\n<li><a href=\"http://nsubstitute.github.com/\">NSubstitute</a></li>\n<li><a href=\"http://www.telerik.com/products/mocking.aspx\">JustMock</a> <strong><em>Commercial / Paid</em></strong></li>\n<li><a href=\"https://github.com/fakeiteasy\">FakeItEasy</a></li>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/hh549175%28v=vs.110%29.aspx\">Microsoft Fakes</a> (formerly Moles) <strong><em>Commercial (included with Visual Studio 2012 Ultimate)</em></strong></li>\n</ul>\n\n<p>So my question is: <strong>what one is your favourite .NET mocking framework and why?</strong></p>\n"},{"tags":["unit-testing","junit","cq5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13120001,"title":"How to write JUnit test cases for CQ5 components?","body":"<p>Please help me in writing JUnit test cases for CQ5 components. I want to mock the Pages, Nodes and iterate RequestParameterMap.</p>\n"},{"tags":["unit-testing","grails","conventions"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13129227,"title":"Grails project setup and convention - testing a spring component that is not really a service","body":"<p>At first I have to say that I have more background with Spring than grails, and the later convention over configuration is a bit disturbing, when you don't have the cards.</p>\n\n<p>Considering a grails project.</p>\n\n<p>If I have a 'Component' (Spring term for a POJO that will be in the spring context) that is not really a service, but more a part of another object, where should I put it ? In the src/groovy or in grails/services ? \nIt is looking like the second option give me more power for writing my tests and since Grails views Service as:</p>\n\n<blockquote>\n  <p>Services in Grails are the place to put the majority of the logic in\n  your application</p>\n</blockquote>\n\n<p>I feel like the grails/services dir is a kind of a bag for all Springified beans...</p>\n\n<p>Next question, how can I <strong>unit</strong> test my Component/Service if I need some companions bean in the Spring context for that said Service.\nThis companions are not services, but rather other components that are mandatory at runtime but for which I can use default implementations.</p>\n\n<p>With spring I can simply use this kind of annotation to create a small context for my tests:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"/simple-job-launcher-context.xml\", \n                                    \"/jobs/skipSampleJob.xml\" })\n</code></pre>\n\n<p>How to do the same with Grails ? \nI want to know if there is a prefered way to create a small Spring context, that can be reused and composed, for the tests as I can do with the <strong>@ContextConfiguration</strong> annotation.</p>\n\n<p>With all the hidden conventions of grails I fear to not use the right way (if one exists) but the lake of clear explanation about them drive me toward direct usage of Spring.</p>\n"},{"tags":["unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13130226,"title":"Unit Testing - do edge cases require separate test methods?","body":"<p>When unit testing, should edge cases testing the same method each require a separate test method.  For example, testing for an empty string passed to the following function:</p>\n\n<pre><code>public function add($numbers)\n{\n    $numbers = preg_replace('/\\s/', '', $numbers);\n    if ($numbers === \"\") {\n        return 0;\n    }\n}\n</code></pre>\n\n<p>i obviously want to catch edge cases such as:</p>\n\n<pre><code>\"\"\n\" \" \n\"\\t \\n\"\n\"asd\"\n</code></pre>\n\n<p>etc</p>\n\n<p>So how many test methods would be required to prove this method works?</p>\n\n<pre><code>public function testAddEmptyString()\n{\n    $stringCalculator = new StringCalculator();\n    $this-&gt;assertSame(0, $stringCalculator-&gt;add(\"\"));\n}\n\npublic function testAddEmptyStringWithSpaces()\n{\n    $stringCalculator = new StringCalculator();\n    $this-&gt;assertSame(0, $stringCalculator-&gt;add(\"  \"));\n}\n\npublic function testAddEmptyStringWithCharacters()\n{\n    $stringCalculator = new StringCalculator();\n    $this-&gt;assertSame(0, $stringCalculator-&gt;add(\"asd\"));\n}\n</code></pre>\n\n<p>This seems like the test class would contain massive amounts of methods for anything non trivial</p>\n"},{"tags":["java","unit-testing","observer-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13138964,"title":"Observer pattern imp","body":"<p>I am doing a observer pattern as a homework but i am failing the Test.\nI have been stacked for quite a while. If you could have a look at my code and give me an advice where I am wrong and what I am not doing as supposed. Cheers. Here is the code.</p>\n\n<pre><code>public class Share \n{\n    /**@param poundsAndPences stores the monetary unit for the share.\n     * @unique a  instance of the Share class responsible for the observer pattern*/\n    private double poundsAndPences = 1.00;\n    ArrayList&lt;ShareWatcher&gt; list = new ArrayList&lt;ShareWatcher&gt;();\n\n    public boolean addShareWatcher(ShareWatcher sw)\n    {\n            list.add(sw); \n            if (list.contains(sw))\n            {\n                return true;\n            }\n        return false;\n    }\n\n    public boolean removeShareWatcher(ShareWatcher sw)\n    {\n        if(list.contains(sw))\n        {\n             list.remove(sw);\n            return true;\n        }\n        else\n        {\n          return false;  \n        } \n\n\n    }\n\n    /** Share(double poundsAndPences) private constructor.\n     * 1-st pre-requisite for the multiple pattern \n     * takes and double value and initialized the local\n     * variable with the one that have been passed\n     * @param poundsAndPences sets the local variable with the current value*/\n     Share()\n    {\n//        this.poundsAndPences = poundsAndPences;\n//          changeState();\n//        System.out.println(\"test: \" + list);\n    }\n\n    /**getPoundsAndPences() is a getter method to. \n     * @return the poundsAndPences\n     */\n    public double getPrice() \n    {\n        return poundsAndPences;\n    }\n\n    /**setPoundsAndPences(int poundsAndPences) is a mutator method.\n     * @param poundsAndPences set the poundsAndPences passed to the\n     * methods to the local ones \n     */\n    public void setPrice(double poundsAndPences) \n    {\n        this.poundsAndPences = poundsAndPences;\n        changeState();\n        updateShareWatcher();\n    }\n\n    public void changeState()\n    {\n        poundsAndPences = getPrice() ;\n    }\n\n    public void updateShareWatcher()\n    {\n//       System.out.println(\"list: \" + list);\n        int counter = 0;\n        for(ShareWatcher sw: list)\n        {\n//            System.out.println(\"list test: \"+ counter++  + \"  %%% \" + sw);\n            sw.updatePrice(poundsAndPences);\n//            System.out.println(list.toString());\n        }\n    }\n}\n</code></pre>\n\n<p>this is the interface</p>\n\n<pre><code>public interface ShareWatcher \n{\n    void updatePrice(double price);\n\n}\n\npublic class BankManager implements ShareWatcher\n{\n     int portfolio = 0;\n    /**\n     * Buy value for bank manager.\n     */\n     static double BM_BUY = 1.00;\n\n    /**\n     * Sell value for bank manager.\n     */\n     static double BM_SELL = 4.00;\n\n    /**\n     * Increment value for bank manager.\n     */\n     static int BM_INCREMENT = 100;\n\n\n    public BankManager(double BM_BUY, double BM_SELL, int BM_INCREMENT)\n    {\n        this.BM_BUY = BM_BUY;\n        this.BM_SELL = BM_SELL;\n        this.BM_INCREMENT = BM_INCREMENT;\n\n        portfolio = 0;\n\n//        updatePrice(portfolio);\n    }\n\n\n    public  int getPortfolio()\n    {\n        return portfolio;\n    }\n\n    public  void setPortfolio(int portfolio)\n    {\n        this.portfolio = portfolio;\n//        updatePrice(portfolio);\n    }\n\n    public void  updatePrice(double price)\n    {\n        if(price &lt; 1.00)\n        {\n            BM_BUY = price;\n            System.out.println(\"BankManager buy shares at: \" + BM_BUY);\n\n        }\n\n        if(price &gt; 4.00)\n        {\n            BM_SELL = price;\n            System.out.println(\"BankManager sell shares at:\" + BM_SELL);\n        }\n//        portfolio = price;\n//        System.out.println(\"Update BankManager\");\n//        System.out.println(\"New value is: \" + portfolio);\n    }\n}\n\n\npublic class StockBroker implements ShareWatcher\n{\n      int portfolio = 1;\n     /**\n     * Buy value for stock broker.\n     */\n     static double SB_BUY = 2.00;\n\n    /**\n     * Sell value for stock broker.\n     */\n     static double SB_SELL = 3.00;\n\n    /**\n     * Increment value for stock broker.\n     */\n     static int SB_INCREMENT = 500;\n\n    StockBroker(double SB_BUY, double SB_SELL, int SB_INCREMENT)\n    {\n//        this.price = portfolio;\n//        updatePrice(portfolio);\n        this.SB_BUY = SB_BUY;\n        this.SB_SELL = SB_SELL;\n        this.SB_INCREMENT = SB_INCREMENT;\n        portfolio = 0;\n\n//        updatePrice(portfolio);\n    }\n    public  int getPortfolio() \n    {\n        return portfolio ;\n    }\n\n    public  void setPortfolio(int portfolio) \n    {\n        this.portfolio = portfolio;\n    }\n\n    public void updatePrice(double price)\n    {\n//        StockBroker sb = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n\n        if(price &lt; 2.00)\n        {\n           SB_BUY = price;\n            System.out.println(\"StockBroker buy shares at: \" + SB_BUY);\n        }\n\n        if(price &gt; 3.00)\n        {\n            SB_SELL= price;\n            System.out.println(\"StockBroker sell shares at:\" + SB_SELL);\n        }\n        portfolio = SB_INCREMENT;\n//        System.out.println(\"Update StockBroker\");\n//        System.out.println(\"New value is: \" + portfolio);\n    }\n\n}\n</code></pre>\n\n<p>and here is the testing class </p>\n\n<pre><code>import org.junit.Test;\nimport static org.junit.Assert.*;\nimport org.junit.Ignore;\n\n/** A set of unit tests that check the solution to the SILVER task.\n *\n */\npublic class ShareTest {\n\n/**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE1 = 4.01;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE2 = 0.99;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE3 = 2.12;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE4 = 1.89;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE5 = 1.83;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE6 = 2.78;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE7 = 14.12;\n    /**\n     * Arbitrary stock price value for testing. \n     */\n    final static double PRICE8 = 6.99;\n\n    /**\n     * Buy value for bank manager.\n     */\n    final static double BM_BUY = 1.00;\n\n    /**\n     * Sell value for bank manager.\n     */\n    final static double BM_SELL = 4.00;\n\n    /**\n     * Increment value for bank manager.\n     */\n    final static int BM_INCREMENT = 100;\n\n    /**\n     * Buy value for stock broker.\n     */\n    final static double SB_BUY = 2.00;\n\n    /**\n     * Sell value for stock broker.\n     */\n    final static double SB_SELL = 3.00;\n\n    /**\n     * Increment value for stock broker.\n     */\n    final static int SB_INCREMENT = 500;\n  public ShareTest(){\n  }\n\n  @Test\n    public void testChangePrice1() {\n        final Share share = new Share();\n        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);\n        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n        assertTrue(share.addShareWatcher(bankManager));\n        assertTrue(share.addShareWatcher(stockBroker));\n        share.setPrice(PRICE5);\n        final int expectedValue1 = 0;\n//        System.out.println(\"*****BankManager \" + bankManager.getPortfolio());\n        assertEquals(bankManager.getPortfolio(), expectedValue1);\n        final int expectedValue2 = 500;\n        System.out.println(\"*****StockBroker \" + stockBroker.getPortfolio());\n        assertEquals(stockBroker.getPortfolio(), expectedValue2);\n    }\n\n    /**\n     * Test of changePrice method, of class Share. A similar test to above. More \n     * changes this time.\n     */\n//    @Ignore\n    @Test\n    public void testChangePrice2() {\n        final Share share = new Share();\n        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);\n        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n        assertTrue(share.addShareWatcher(bankManager));\n        assertTrue(share.addShareWatcher(stockBroker));\n        share.setPrice(PRICE3);\n        share.setPrice(PRICE6);\n        share.setPrice(PRICE8);\n        final int expectedValue1 = 0;\n        assertEquals(bankManager.getPortfolio(), expectedValue1);\n        final int expectedValue2 = 0;\n        assertEquals(stockBroker.getPortfolio(), expectedValue2);\n    }\n\n\n    /**\n     * Test of changePrice method, of class Share. A similar test to above. More\n     * changes this time.\n     */\n//    @Ignore\n    @Test\n    public void testChangePrice3() {\n        final Share share = new Share();\n        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);\n        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);\n        assertTrue(share.addShareWatcher(bankManager));\n        assertTrue(share.addShareWatcher(stockBroker));\n        share.setPrice(PRICE1);\n        share.setPrice(PRICE4);\n        share.setPrice(PRICE7);\n        share.setPrice(PRICE2);\n        final int expectedValue1 = 100;\n        assertEquals(bankManager.getPortfolio(), expectedValue1);\n        final int expectedValue2 = 500;\n        assertEquals(stockBroker.getPortfolio(), expectedValue2);\n    }\n}\n</code></pre>\n"},{"tags":["python","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13137917,"title":"unit testing embedded python","body":"<p>I have a third party software which is able to run some python scripts using something like:</p>\n\n<pre><code>software.exe -script pythonscript.py\n</code></pre>\n\n<p>My company is heavily dependent on this software as well as on the scripts we develop for it. Currently we have some QA that checks the output of the scripts, but we really want to start unit testing the scripts to make it easier to find bugs and make the test system more complete.</p>\n\n<p>My problem is how is it possible to run \"embedded\" unit tests? We use pydev+eclipse and I tried to use it's <a href=\"http://pydev.org/manual_adv_remote_debugger.html\" rel=\"nofollow\">remote debbuging</a> to make it work with the unit tests, but I cannot really make it work. How can I make the server connection \"feed\" the unit test?</p>\n\n<p>The other idea would be to parse the stdout of the software, but that would not really be a unit test... And the added complexity it seems to bring makes this approach less interesting.</p>\n\n<p>I would expect that something like this has already been done somewhere else and I tried googling for it, but maybe I am just not using the correct keywords. Could anyone give me a starting point?</p>\n\n<p>Thank you</p>\n"},{"tags":["c++","unit-testing","private-members","private-methods"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":996,"score":5,"question_id":6778496,"title":"How to do unit testing on private members (and methods) of C++ classes","body":"<p>I am very new to unit testing and I am a little confused.</p>\n\n<p>I am trying to do unit testing (using the Boost unit testing framework) on a C++ class called <code>VariableImpl</code>. Here are the details.</p>\n\n<pre><code>class Variable\n{\npublic:\n  void UpdateStatistics (void) {\n    // compute mean based on m_val and update m_mean;\n    OtherClass::SendData (m_mean);\n    m_val.clear ();\n  }\n  virtual void RecordData (double) = 0;\n\nprotected:\n  std::vector&lt;double&gt; m_val;\n\nprivate:\n  double m_mean;\n};\n\nclass VariableImpl : public Variable\n{\npublic:\n  virtual void RecordData (double d) {\n    // put data in m_val\n  }\n};\n</code></pre>\n\n<p>My question is how can I check that the mean is computed correctly? Note that 1) <code>m_mean</code> is protected and 2) <code>UpdateStatistics</code> calls a method of another class and then clears the vector.</p>\n\n<p>The only way I can see would be to add a getter (for instance, <code>GetMean</code>), but I don't like this solution at all, nor I think it is the most elegant.</p>\n\n<p>How should I do?</p>\n\n<p>And what should I do if I were to test a private method instead of a private variable?</p>\n\n<p>TIA,</p>\n\n<p>Jir</p>\n"},{"tags":["ruby","unit-testing","rspec","dsl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13136377,"title":"The proper style to test a function over a variety of inputs","body":"<p>I need to test a following line:</p>\n\n<pre><code>result = handle(streamOfMessages)\n</code></pre>\n\n<p>Where <code>messages</code> and <code>context</code> are well-populated hashes. I could write the <code>it</code> like this:</p>\n\n<pre><code>messages1 = [ {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash1\"}, {\"type\"=&gt;\"someType2\",\"value\"=&gt;\"someBigHash2\"}, {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash3\"} ]\nresult1 = handle(messages1)\nresult1.should == [someValue1, someOtherValue1]\n\nmessages2 = [ {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash1\"}, {\"type\"=&gt;\"someType2\",\"value\"=&gt;\"someBigHash2\"}, {\"type\"=&gt;\"someType1\",\"value\"=&gt;\"someBigHash3\"} ]\nresult2 = handle(messages1)\nresult2.should == [someValue2, someOtherValue2]\n\n// same about messages3, result3 etc\n</code></pre>\n\n<p>I could make an array of arrays and refer to <code>messages[i]</code> in the loop. However, it all looks to me as a pretty oldskul approach, hence I am looking for a more inspiring (or even should I say <em>DSL</em>-based) programming style. It would be great to have a better syntax both for constructing a stream of messages and for iterating over several streams while expecting different results.</p>\n"},{"tags":["php","unit-testing","php-5.3"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":11095983,"title":"Does php have any fixtures alternatives?","body":"<p>I have been working with Ruby on Rails for a while. It has a wonderful lib called factory_girl which helps a lot building a test data. Recently I have been searching for similar alternatives in PHP. The only library I came into was <a href=\"http://phactory.org\" rel=\"nofollow\">Phactory</a>.</p>\n\n<p>I ask to share your experience on PHP testing data frameworks and recommend any handy libraries.</p>\n"},{"tags":["python","unit-testing","simplehttpserver"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":1312,"score":7,"question_id":1985197,"title":"Using SimpleHTTPServer for unit testing","body":"<p>I'm writing a Python module that wraps out a certain web service API. It's all REST, so relatively straightforward to implement. </p>\n\n<p>However, I found a problem when it comes to unit testing: as I don't run the services I made this module for, I don't want to hammer them, but at the same time, I need to retrieve data to run my tests. I looked at SimpleHTTPServer, which would be OK. </p>\n\n<p>I solved part of the issue I had, but now, since I can't seem to terminate the thread, I get issues with \"address already in use\" when launching the test application more than once.</p>\n\n<p>Here's some sample code</p>\n\n<pre><code>PORT = 8001\n\nhandler = SimpleHTTPServer.SimpleHTTPRequestHandler\n\nhttpd = SocketServer.TCPServer((\"\", PORT), handler)\n\nhttpd_thread = threading.Thread(target=httpd.serve_forever)\nhttpd_thread.setDaemon(True)\nhttpd_thread.start()\n\napi_data = urllib.urlopen(\"http://localhost:8001/post/index.json\")\nprint \"Data start:\"\nprint json.load(api_data)\n</code></pre>\n\n<p>Where \"index.json\" is a mock JSON file I made which substitutes the real thing. How can I clean things gracefully after the program terminates?</p>\n"},{"tags":["ruby","unit-testing","jar","warbler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13136219,"title":"warbler unit tests","body":"<p>I'm using Warbler to build .jar file from my jruby code and run it on platform that does not have ruby installed. \nI want to execute acceptance tests -> for that i use ruby minitest unit tests.\nThe only option i found is to require_relevant this test class from entry point class, but it does not call test methods.</p>\n\n<p>In my unit test class i use require 'minitest/autorun'.\nWhen i execute them in IDE - i get test run log.\nWhen i run them from jar - i get no result/flow.</p>\n\n<p>So question is:\nhow to correctly run unit tests from jar/jruby ?\nhow to point at other entry point.</p>\n\n<p>Thanks. </p>\n"},{"tags":["unit-testing","mstest","deploymentitem"],"answer_count":4,"favorite_count":21,"up_vote_count":31,"down_vote_count":0,"view_count":5333,"score":31,"question_id":3738819,"title":"Do MSTest deployment items only work when present in the project test settings file?","body":"<p>I can't seem to grasp how MSTest deployment items are supposed to be configured. I have been able to get them working properly by modifying the project's test settings file, but this is less then ideal -- the deployment item configuration is separated from individual tests, and the file paths appear to be stored as absolute paths unless the files are under the solution folder.</p>\n\n<p>Am I not supposed to be able to add a deployment item using the <code>[DeploymentItem]</code> attribute on either a <code>[TestClass]</code> or <code>[TestMethod]</code> without having to create/modify a project test settings file? How do I accomplish this?</p>\n\n<p>(Frankly, I don't understand the need for a separate deployment item configuration -- why not just use the existing 'Copy to Output Directory' settings for project files that should be deployment items?)</p>\n"},{"tags":["java","unit-testing","ant","compiler-errors","zxing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":27,"score":0,"question_id":13134848,"title":"Running the unit test for zxing fails","body":"<p>I'm trying to run the unit tests for <a href=\"http://code.google.com/p/zxing/\" rel=\"nofollow\">zxing</a>. I'm running </p>\n\n<pre><code>ant test-blackbox\n</code></pre>\n\n<p>This fails, however, with the output:</p>\n\n<pre><code>Buildfile: c:\\Workspace\\zxing-2.1\\core\\build.xml\n\ninit:\n\nbuild:\n\nbuild-test:\n    [javac] Compiling 109 source files to c:\\Workspace\\zxing-2.1\\core\\build-test\n    [javac] c:\\Workspace\\zxing-2.1\\core\\test\\src\\com\\google\\zxing\\client\\result\\URIParsedResultTestCase.java:73: error: unmappable character for encoding Cp1252\n    [javac]                  \"\\u0013\\u0013Â¬Ã¦Z{âˆšÏ€âˆšÃ©âˆšÃ¹âˆšÃ¶Â¬Ã³ZÂ¬ÃŸÂ¬Â®+y_zbâˆšÂ±k\\u00117Â¬âˆ?\\u000EÂ¬ÃœâˆšÃº\\u0000\\u0000\\u0000\\u0000\" +\n    [javac]                                                                                            ^\n    [javac] 1 error\n\nBUILD FAILED\nc:\\Workspace\\zxing-2.1\\core\\build.xml:54: Compile failed; see the compiler error output for details.\n\nTotal time: 0 seconds\n</code></pre>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13129993,"title":"PHPUnit test suite include path","body":"<p>Using phpunit and I am having some trouble with include paths, not for phpunit itself, but for my code and tests directory.</p>\n\n<p>I have the following code structure:</p>\n\n<pre><code>Application\n  -StringCalculator.php\n\ntests\n  -StringCalculatorTest.php\n</code></pre>\n\n<p>Inside my StringCalculatorTest.php i have a require statement:</p>\n\n<pre><code>require_once('../StringCalculator.php');\n</code></pre>\n\n<p>Running <code>phpunit StringCalculatorTest.php</code> from  inside the tests folder works perfectly.</p>\n\n<p>However, when i then introduce a phpunit.xml configuration file in the root directory i.e.</p>\n\n<pre><code>Application\n  -StringCalculator.php\n\ntests\n  -StringCalculatorTest.php\n\nphpunit.xml\n</code></pre>\n\n<p>the include path is screwed.  I have to replace the require_once to </p>\n\n<pre><code>require_once('StringCalculator.php');\n</code></pre>\n\n<p>What is the correct way to set include paths between the application and the test directory?</p>\n"},{"tags":["java","web-services","unit-testing","testing","jax-ws"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3270,"score":5,"question_id":2570896,"title":"Web service unit testing","body":"<p>I'm using JAX-WS web services (client and exposed services), is there any API to test these web services?</p>\n"},{"tags":["java","spring","hibernate","unit-testing","transactions"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13131242,"title":"How to test transactional work performed on `POST_COMMIT_INSERT` callback","body":"<p>I'm having difficulty debugging and diagnosing an issue within my application.</p>\n\n<p>I have a JPA event listener wired in to perform work in a <code>POST_COMMIT_INSERT</code>.  The work that is performed is also transactional.</p>\n\n<p>I'm having difficulty writing a test that captures the work that occurred in the post-transactional transaction.</p>\n\n<p>My current test performs it's assertions in a <code>@PostTransaction</code> method.  However, although I see the data being persisted (using log statements), the postTransaction-transaction work isn't available to me.</p>\n\n<p>I suspect it's because in my <code>@PostTransaction</code> method, I'm still too early - and that there's another transaction in progress.</p>\n\n<p>Here's a sample that roughly demonstrates the scenario:</p>\n\n<blockquote>\n  <p>After a <code>Foo</code> has been created &amp; saved, create and save a <code>Bar</code>.</p>\n</blockquote>\n\n<pre><code>// Step 1.  The factory that responds to creation of the Foo, and build a bar.\n@Component\nclass BarFactory implements PostInsertEventListener\n{\n     // Note:  I've tried various versions of @Transactional on different points\n     // within this class, and none have worked.\n\n     @Autowired\n     private BarRepository repository;\n\n     @Override\n     public void onPostInsert(PostInsertEvent event) \n     {\n         if (event.getEntity() instanceof Foo)\n         {\n             createBar();\n         }\n     }\n     @Transactional\n     public createBar()\n     {\n         Bar bar = new Bar();\n         repository.save(bar);\n         log.info(\"Bar was created: \" + bar.getId());\n     }\n }\n\n // Step 2:  Register the BarFactory\n @Component\n class LifecycleListenerFactory {\n    // This is a spring bean, and the listeners are also spring beans\n    // so we have to use a somewhat long-winded approach to register them\n    // with the EntityManager\n    @Autowired\n    public LifecycleListenerFactory(EntityManager em, BarFactory barFactory)\n    {\n        SessionFactory sessionFactory = getSessionFactory(em);\n        EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(EventListenerRegistry.class);\n        EventListenerGroup&lt;PostInsertEventListener&gt; eventListenerGroup = registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT);\n        eventListenerGroup.appendListener(barFactory);\n    }\n\n\n   SessionFactory getSessionFactory(EntityManager entityManager) {\n       Session session = (Session) entityManager.getDelegate();\n       SessionFactory sessionFactory = session.getSessionFactory();\n       return sessionFactory;\n   }\n } \n\n\n// Step 3:  Test.\n@RunWith(SpringJUnit4ClassRunner.class)\n@Transactional\n@TransactionConfiguration(defaultRollback=false)\nclass MyTest {\n   @Autowired\n   private FooRepository fooRepo;\n   @Autowired\n   private BarRepository barRepo;\n\n   @Test\n   public void test()\n   {\n       fooRepo.save(new Foo());\n   }\n\n   @AfterTransaction\n   public void assert()\n   {\n       assertThat(barRepo.findAll().size(),equalTo(1));\n   }\n}\n</code></pre>\n\n<p>In this scenario, I see the following output:</p>\n\n<p><code>INFO:  Bar was created: 1</code></p>\n\n<p>But the test fails.</p>\n\n<p>Am I correct in my assumption that my <code>@AfterTransaction</code> is running after the wrong transaction, or is something else wrong here?</p>\n\n<p>If so, how do I test this?</p>\n\n<p>I've tried moving the <code>@Transaction</code> boundaries around in the <code>BarFactory</code>, but that hasn't had any effect.</p>\n"},{"tags":["ios","xcode","unit-testing","ocunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13130498,"title":"STAssertEqualObjects not working with NSString using OCUnit in Xcode","body":"<p>Can't figure out whats going on here . . . </p>\n\n<p>I've got a simple unit test thats designed to test a parser. Test case looks like this:</p>\n\n<pre><code>[parser didStartElement:@\"mobileresponse\" attributes:[NSDictionary dictionaryWithObject:@\"http://www.espn.com/\" forKey:@\"rooturl\"]];\n[parser didStartElement:@\"content\" attributes:[NSDictionary dictionaryWithObject:@\"/soccer\" forKey:@\"mobileFriendlyUrl\"]];\nNSString *mobileFriendlyURL = [parser valueForKey:@\"mobile_friendly_url\"];\nSTAssertEqualObjects(@\"http://www.espn.com/soccer\", mobileFriendlyURL, @\"url path should be appended to root url\");\n</code></pre>\n\n<p>now this is failing every time, but here is the output</p>\n\n<pre><code>'http://www.espn.com/soccer' should be equal to 'http://www.espn.com/soccer' url path should be appended to root url\n</code></pre>\n\n<p>Am I going crazy or are those the exact same?? Does anyone have any idea why this is throwing an error?</p>\n"},{"tags":["unit-testing","salesforce","apex-code","force.com"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12911480,"title":"Is there a good way to get a Code Coverage Report for Apex Code?","body":"<p>We're developing alot of enhancements to salesforce using Visualforce and Apex as part of a larger system, as part of our quality metrics we have to provide a report to management on our Code Coverage. </p>\n\n<p>I'd like to get a report similar to the one produced by Run All Tests in the Force.com IDE but in HTML so I can display it easily via a web interface. </p>\n\n<p>For the rest of our system we use Sonar <a href=\"http://www.sonarsource.org/\" rel=\"nofollow\">http://www.sonarsource.org/</a> to produce the reports. </p>\n\n<p>Does anybody know the best approach to this? </p>\n\n<p>I've explored the API documentation but am unable to find out if the Coverage Percentages is stored against the classes so querying that isn't an option. </p>\n\n<p>Any help or pointers would be greatly appreciated. </p>\n"},{"tags":["iphone","ios","unit-testing","dependency-injection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":11543942,"title":"Proper dependency injection when unit testing in iOS","body":"<p>I have finally started to test my code while developing iOS applications. However, I am curious to hear more about how others are creating testable code, especially when it comes to injection of fake objects into the class under test. So far this is how I do it:</p>\n\n<p>// 1) Init CUT with fakes (constructor injection)\nA *a = [[A alloc] initWithB:C:D:.....];</p>\n\n<p>// 2) Expose dependencies as properties (property injection)\na.B = myB;</p>\n\n<p>I prefer 1) since I don't like to expose any internal data as properties unless I really need to.</p>\n\n<p>My questions is: Are there any alternatives/better/more efficient ways to do property injection when dealing with objective-c and iOS test frameworks?</p>\n"},{"tags":["ios","unit-testing","testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13128809,"title":"Testing iOS peer to peer communication/Bonjour","body":"<p>I am currently starting a project that deals with iOS devices that do p2p communication in the local area network using Bonjour.</p>\n\n<p>I am wondering how one can test the Bonjour and other networked components of an iOS app, whether it be automatic or even manual (ad hoch tests). </p>\n"},{"tags":["c#","visual-studio-2010","entity-framework","unit-testing","rhino-mocks"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13109192,"title":"shouldn't I mock the entities of EF when unittesting?","body":"<p>I use EF4.</p>\n\n<p>I read this post about mocking EF</p>\n\n<p><a href=\"http://www.codeproject.com/Articles/447988/How-to-Mock-Test-an-Entity-Framework-Model-First-P\" rel=\"nofollow\">http://www.codeproject.com/Articles/447988/How-to-Mock-Test-an-Entity-Framework-Model-First-P</a></p>\n\n<p>Sholdn't we abstract the entities types as well? </p>\n\n<p>In order to keep dicupling between the DAL and the BL?</p>\n\n<p>in the post above I see he used EF concrete generated entities types:</p>\n\n<pre><code>[TestMethod]\npublic void GetCustomer()\n{\n    ContextContainerMock container = new ContextContainerMock();\n    IMyEntities en = container.Current;\n\n\n**Customer c = new Customer { ID = 1, FirstName = \"John\", LastName = \"Doe\" };**\n    en.Customers.AddObject(c);\n\n    CustomerService service = new CustomerService(container);\n    var a = service.GetCustomer(1);\n\n    Assert.AreEqual(c.FirstName, a.FirstName);\n    Assert.AreEqual(c.LastName, a.LastName);\n}\n</code></pre>\n"},{"tags":["r","unit-testing","autotest","s4","testthat"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":27,"score":3,"question_id":13128061,"title":"testthat::auto_test() seems to fail when S4 code is involved","body":"<p>Over the last couple of weeks, I've been integrating the unit-test functionality of the <a href=\"http://cran.r-project.org/web/packages/testthat/index.html\" rel=\"nofollow\">testthat</a> package more and more into my daily work and really have to say: this package rocks! </p>\n\n<p>I specifically like the autotest-feature which will automatically run all of your unit tests <strong>every time</strong> you make a change somewhere in your code. However, I think I came across a little bug or at least some undesired behavior when using <a href=\"http://cran.r-project.org/web/packages/testthat/index.html\" rel=\"nofollow\">testthat</a>'s <code>auto_test()</code> function in situations when your code directory contains S4 definitions (classes, generic methods, custom methods).</p>\n\n<h2>Question</h2>\n\n<p>Is this behavior illustrated below a bug or am I doing something wrong when using <code>auto_test()</code>?</p>\n\n<p>Below you'll find an illustration that requires to create some example files first</p>\n\n<h2>Preliminaries</h2>\n\n<p>Set working directory</p>\n\n<pre><code>setwd(\"testthat_autotest\")\n</code></pre>\n\n<p>Ensure directories</p>\n\n<pre><code>dir.create(\"src\", showWarnings=FALSE)\ndir.create(\"tests\", showWarnings=FALSE)\n</code></pre>\n\n<h2>Create S4 Reference Class Definition</h2>\n\n<p>Creates file <code>classes.R</code> in directory <code>src</code></p>\n\n<pre><code>def &lt;- c(\n    \"setRefClass(\",\n    \"   Class=\\\"MyClass\\\",\",\n    \"   fields=list(\",\n    \"       name=\\\"character\\\"\",\n    \"   ),\",\n    \"   methods=list(\",\n    \"       getName=function(...) {\",\n    \"           getName_ref(.self=.self, ...)\",\n    \"       },\",\n    \"       setName=function(...) {\",\n    \"           setName_ref(.self=.self, ...)\",\n    \"       }\",\n    \"   )\",\n    \")\"\n)\nwrite(def, file=\"src/classes.R\")\n</code></pre>\n\n<h2>Create Generic Method Definitions</h2>\n\n<p>Creates file <code>generics.R</code> in directory <code>src</code></p>\n\n<pre><code>def &lt;- c(\n    \"setGeneric(\",\n    \"    name=\\\"getName_ref\\\",\",\n    \"    signature=c(\\\".self\\\"),\",\n    \"    def=function(\",\n    \"        .self,\",\n    \"        ...\",\n    \"    ) {\",\n    \"standardGeneric(\\\"getName_ref\\\")\",    \n    \"   }\",\n    \")\",\n    \"\",\n    \"setGeneric(\",\n    \"   name=\\\"setName_ref\\\",\",\n    \"   signature=c(\\\".self\\\"),\",\n    \"   def=function(\",\n    \"       .self,\",\n    \"       value,\",\n    \"       ...\",\n    \"   ) {\",\n    \"   standardGeneric(\\\"setName_ref\\\")\",    \n    \"   }\",\n    \")\"\n)\nwrite(def, file=\"src/generics.R\")\n</code></pre>\n\n<h2>Create Custom Method Definitions</h2>\n\n<p>Creates file <code>methods.R</code> in directory <code>src</code></p>\n\n<pre><code>def &lt;- c(\n    \"require(\\\"compiler\\\")\",\n    \"\",\n    \"setMethod(\",\n    \"   f=\\\"getName_ref\\\",\", \n    \"   signature=signature(.self=\\\"MyClass\\\"),\", \n    \"   definition=cmpfun(function(\",\n    \"       .self,\",\n    \"       ...\",\n        \") {\",\n        \"out &lt;- .self$name\",\n        \"return(out)\",\n        \"}, options=list(suppressAll=TRUE))\",  \n    \")\",\n    \"setMethod(\",\n    \"   f=\\\"setName_ref\\\",\", \n    \"   signature=signature(.self=\\\"MyClass\\\"),\", \n    \"   definition=cmpfun(function(\",\n    \"       .self,\",\n    \"       ...\",\n    \"   ) {\",\n    \"   .self$field(name=\\\"name\\\", value=value)\",\n    \"   return(TRUE)\",\n    \"   }, options=list(suppressAll=TRUE))\",  \n    \")\"\n)\nwrite(def, file=\"src/methods.R\")\n</code></pre>\n\n<h2>Create Unit Tests</h2>\n\n<p>Creates files <code>test_getName_ref.R</code> and <code>test_setName_ref.R</code> in directory <code>tests</code></p>\n\n<pre><code>test &lt;- c(\n    \"require(\\\"testthat\\\")\",\n    \"\",\n    \"test_that(desc=\\\"test_getName_ref,.self=MyClass\\\",\",\n    \"   code={\",\n    \"       x.target &lt;- \\\"some value\\\"\",\n    \"       expect_that(\",\n    \"            .self &lt;- new(\\\"MyClass\\\", name=x.target),\",\n    \"            is_a(\\\"MyClass\\\")\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            x.test &lt;- .self$getName(),\",\n    \"            is_a(\\\"character\\\")\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            x.test,\",\n    \"            is_identical_to(x.target)\",\n    \"        )\",\n    \"    }\",\n    \")\"\n)\nwrite(test, file=\"tests/test_getName_ref.R\")\n\ntest &lt;- c(\n    \"require(\\\"testthat\\\")\",\n    \"\",\n    \"test_that(desc=\\\"test_setName_ref,.self=MyClass\\\",\",\n    \"   code={\",\n    \"       x.target &lt;- \\\"some value\\\"\",\n    \"       expect_that(\",\n    \"            .self &lt;- new(\\\"MyClass\\\"),\",\n    \"            is_a(\\\"MyClass\\\")\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            .self$setName(value=x.target),\",\n    \"            is_identical_to(TRUE)\",\n    \"        )\",\n    \"        expect_that(\",\n    \"            .self$getName(),\",\n    \"            is_identical_to(x.target)\",\n    \"        )\",\n    \"    }\",\n    \")\"\n)\nwrite(test, file=\"tests/test_setName_ref.R\")\n</code></pre>\n\n<h2>Illustration</h2>\n\n<p>Running <code>auto_test()</code> will result in errors:</p>\n\n<pre><code>require(\"testthat\")\n\nauto_test(\n    code_path=\"src\",\n    test_path=\"tests\"\n)\nLoading required package: compiler\n.1.2\n\n1. Error: test_getName_ref,.self=MyClass ---------------------------------------\ncould not find function \"getName_ref\"\n1: expect_that(x.test &lt;- .self$getName(), is_a(\"character\"))\n2: condition(object)\n3: str_c(class(x), collapse = \", \")\n4: Filter(function(x) length(x) &gt; 0, list(...))\n5: sapply(x, f)\n6: lapply(X = X, FUN = FUN, ...)\n7: .self$getName()\n\n2. Error: test_setName_ref,.self=MyClass ---------------------------------------\ncould not find function \"setName_ref\"\n1: expect_that(.self$setName(value = x.target), is_identical_to(TRUE))\n2: condition(object)\n3: all.equal(expected, actual)\n4: all.equal.default(expected, actual)\n5: all.equal.raw(target, current, ...)\n6: attr.all.equal(target, current, ...)\n7: mode(current)\n8: .self$setName(value = x.target)\n</code></pre>\n\n<p>My first guess is that it might have something to do with the the way <code>testthat::source_dir()</code> handles the sourcing, maybe due to argument <code>env</code>?</p>\n\n<p>In order to continue, we need to turn off autotesting with CRTL + BREAK (on Windows; see <a href=\"http://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf\" rel=\"nofollow\">section \"Autotest\" in this article</a> if you're on other platforms)</p>\n\n<p>Now, when we first source the code manually and run <code>test_dir()</code>, everything seems to work fine:</p>\n\n<pre><code>require(\"testthat\")\n\nsapply(list.files(\"src\", full.names=TRUE), source)\n\ntest_dir(\"tests\")\n\n......\nYou are a coding rockstar! \n&gt; \n</code></pre>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","tdd","dry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13124410,"title":"Rails: Repeating unit test - DRY?","body":"<p>Is there any standard practice to DRY-out the repeating unit test cases in rails. For e.g. I have many models with the \"name\" attribute, I want to do same kind of unit tests for each model. I vaguely see that i need to create modules are reuse? Is that possible/correct?</p>\n\n<p>Any pointers/practice to creating DRY unit test? </p>\n\n<p><strong>Example code:</strong> I want to do same kind of testing for many other models with the same named attribute.</p>\n\n<pre><code>require 'test_helper'\n\n\n# Factory class\nclass UserFactory\n\n  # Creates a valid template user\n  def self.create\n    user = User.new do |u|\n      u.name = \"Test User #{rand}\"\n      u.notes = \"test notes\"\n    end\n    user\n  end\n\nend\n\nclass UserTest &lt; ActiveSupport::TestCase\n  # ------------\n  # Init\n  # ------------\n\n  def setup\n    @valid_usr = UserFactory.create\n  end\n\n  def teardown\n    @valid_usr.destroy if @valid_usr.persisted?\n    @valid_usr = nil\n  end\n\n\n  # ------------\n  # Name\n  # ------------\n\n  test \"should not have a dummy user object\" do\n    user = User.new\n    assert !user.save\n  end\n\n  test \"unique user name must be saved\" do\n    assert UserFactory.create.save!, \"First entry must be saved\"\n\n    user = UserFactory.create\n    user.name = \"Different name\"\n    assert user.save!, \"Unique user must be saved\"\n    user.destroy\n  end\n\n  test \"non unique user names must not be saved\" do\n    user1 = UserFactory.create\n    user2 = UserFactory.create\n    user1.name = \"Same User name\"\n    user2.name = \"Same User name\"\n\n    assert user1.save!, \"First entry must be saved\"\n    assert !user2.save, \"Duplicate name should not be saved\"\n\n    user1.destroy\n    user2.destroy\n  end\n\n  test \"should not have user without a valid name\" do\n    # Invalid name\n    @valid_usr.name = \" \"\n    assert !@valid_usr.save\n  end\nend\n</code></pre>\n"},{"tags":["android","unit-testing","maven","m2e","jmockit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":13087832,"title":"What is the difference between running JUnit tests with \"Run As\" and Maven's test?","body":"<p>I have some problems I don't understand exactly. I have some class called ApplicationContext which extends android.app.Application. This class will be mocked by JMockIt's <code>MockUp&lt;T&gt;</code>. When I let my JUnit tests run by <code>mvn install</code>, everything works well, but when I run my tests with <code>Run As-&gt;JUnit Test</code> I get exceptions like this (only with this one test which extends android.app.Application)...  </p>\n\n<pre><code>java.lang.TypeNotPresentException: Type [unknown] not present\n</code></pre>\n\n<p>I guess that this has something to do with the fact that android must be in provided scope:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n        &lt;artifactId&gt;android&lt;/artifactId&gt;\n        &lt;version&gt;${platform.version}&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Maybe the tests don't have this package at runtime or something. But I wonder why they just have it at <code>mvn install</code>, since the package is always linked as Maven dependency. I need to understand why classes from android.app.Application are not found when I run test with \"Run As\". Here are some of my configuration settings:</p>\n\n<p><img src=\"http://i.stack.imgur.com/MiExn.png\" alt=\"Build path\"></p>\n\n<p><strong>.classpath</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.ANDROID_FRAMEWORK\"/&gt;\n    &lt;classpathentry kind=\"con\" path=\"com.android.ide.eclipse.adt.LIBRARIES\"/&gt;\n    &lt;classpathentry kind=\"src\" output=\"bin/classes\" path=\"src/main/java\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=\"optional\" value=\"true\"/&gt;\n            &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry kind=\"src\" path=\"gen\"/&gt;\n    &lt;classpathentry kind=\"src\" output=\"bin/classes\" path=\"src/test/java\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry exported=\"true\" kind=\"con\" path=\"org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER\"&gt;\n        &lt;attributes&gt;\n            &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n        &lt;/attributes&gt;\n    &lt;/classpathentry&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin/classes\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p><strong>.project</strong>  </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;projectDescription&gt;\n    &lt;name&gt;net.devgems.android.kurzparkzonewien-TRUNK&lt;/name&gt;\n    &lt;comment&gt;&lt;/comment&gt;\n    &lt;projects&gt;\n    &lt;/projects&gt;\n    &lt;buildSpec&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;com.android.ide.eclipse.adt.ResourceManagerBuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;com.android.ide.eclipse.adt.PreCompilerBuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;com.android.ide.eclipse.adt.ApkBuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;org.eclipse.m2e.core.maven2Builder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n    &lt;/buildSpec&gt;\n    &lt;natures&gt;\n        &lt;nature&gt;com.android.ide.eclipse.adt.AndroidNature&lt;/nature&gt;\n        &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\n        &lt;nature&gt;org.eclipse.m2e.core.maven2Nature&lt;/nature&gt;\n    &lt;/natures&gt;\n&lt;/projectDescription&gt;\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;net.devgems.android&lt;/groupId&gt;\n    &lt;artifactId&gt;kurzparkzonewien&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;apk&lt;/packaging&gt;\n    &lt;name&gt;kurzparkzonewien&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;platform.version&gt;1.6_r2&lt;/platform.version&gt;\n        &lt;android.sdk.path&gt;/opt/android-sdk-linux&lt;/android.sdk.path&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n            &lt;artifactId&gt;android&lt;/artifactId&gt;\n            &lt;version&gt;${platform.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;junit&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.jmockit&lt;/groupId&gt;\n            &lt;artifactId&gt;jmockit&lt;/artifactId&gt;\n            &lt;version&gt;0.999.17&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.8.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.android&lt;/groupId&gt;\n            &lt;artifactId&gt;support-v4&lt;/artifactId&gt;\n            &lt;version&gt;r6&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;outputDirectory&gt;bin/classes&lt;/outputDirectory&gt;\n        &lt;testOutputDirectory&gt;bin/test-classes&lt;/testOutputDirectory&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.jayway.maven.plugins.android.generation2&lt;/groupId&gt;\n                &lt;artifactId&gt;android-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;androidManifestFile&gt;${project.basedir}/AndroidManifest.xml&lt;/androidManifestFile&gt;\n                    &lt;assetsDirectory&gt;${project.basedir}/assets&lt;/assetsDirectory&gt;\n                    &lt;resourceDirectory&gt;${project.basedir}/res&lt;/resourceDirectory&gt;\n                    &lt;nativeLibrariesDirectory&gt;${project.basedir}/src/main/native&lt;/nativeLibrariesDirectory&gt;\n                    &lt;sdk&gt;\n                        &lt;platform&gt;4&lt;/platform&gt;\n                        &lt;path&gt;${android.sdk.path}&lt;/path&gt;\n                    &lt;/sdk&gt;\n                    &lt;undeployBeforeDeploy&gt;true&lt;/undeployBeforeDeploy&gt;\n                &lt;/configuration&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>If you need more additional information, please tell me, because I'm not sure where to isolate the problem properly.  </p>\n"},{"tags":["java","android","unit-testing","junit","instrumentation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":70,"score":1,"question_id":13105202,"title":"Starting another Activity in a JUnit test by simulating a button press","body":"<p>To illustrate my latest problem with writing JUnit tests for my Android app, I wrote a simple example with two activities, <code>StartActivityForResult</code> and <code>ChildActivity</code>. The former contains a <code>TextView</code> (for display purposes) and a <code>Button</code> while the later contains just a <code>Button</code>. The <code>onClickListener</code> for the button in <code>StartActivityForResult</code> simply starts an instance of <code>ChildActivity</code>.</p>\n\n<pre><code>private View.OnClickListener onStart = new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        Log.d(TAG, \"Start button clicked\");\n        Intent intent = new Intent(StartActivityForResult.this, ChildActivity.class);\n\n        StartActivityForResult.this.startActivityForResult(intent, R.id.child_request);\n    }\n};\n</code></pre>\n\n<p>Now I want to test this method using JUnit. So I wrote the following test:</p>\n\n<pre><code>package codeguru.startactivityforresult;\n\nimport android.app.Activity;\nimport android.app.Instrumentation;\nimport android.content.Intent;\nimport android.test.ActivityInstrumentationTestCase2;\nimport android.test.UiThreadTest;\nimport android.util.Log;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport junit.framework.Assert;\n\npublic class StartActivityForResultTest extends ActivityInstrumentationTestCase2&lt;StartActivityForResult&gt; {\n\n    public StartActivityForResultTest() {\n        super(StartActivityForResult.class);\n    }\n\n    @Override\n    public void setUp() throws Exception {\n        super.setUp();\n\n        Log.d(TAG, \"setUp()\");\n\n        this.setActivityInitialTouchMode(false);\n\n        this.activity = this.getActivity();\n        this.resultText = (TextView) this.activity.findViewById(R.id.result_text);\n        this.startButton = (Button) this.activity.findViewById(R.id.start_button);\n\n        Intent data = new Intent();\n        data.putExtra(this.activity.getString(R.string.result), RESULT);\n        Instrumentation.ActivityResult result = new Instrumentation.ActivityResult(Activity.RESULT_OK, data);\n\n        this.childMonitor = new Instrumentation.ActivityMonitor(ChildActivity.class.getName(), result, true);\n        this.getInstrumentation().addMonitor(this.childMonitor);\n    }\n\n    @Override\n    public void tearDown() throws Exception {\n        this.activity.finish();\n\n        super.tearDown();\n    }\n\n    @UiThreadTest\n    public void testStartButtonOnClick() {\n        Assert.assertTrue(this.startButton.performClick());\n\n        Activity childActivity = this.getInstrumentation().waitForMonitorWithTimeout(this.childMonitor, TIME_OUT);\n        Assert.assertNotNull(childActivity); // &lt;------ Line 51\n\n        Button resultButton = (Button) childActivity.findViewById(R.id.result_button);\n        Assert.assertTrue(resultButton.performClick());\n\n        Assert.assertEquals(Integer.toString(RESULT), this.resultText.getText().toString());\n    }\n    private Activity activity = null;\n    private TextView resultText = null;\n    private Button startButton = null;\n    private Instrumentation.ActivityMonitor childMonitor = null;\n    private static final int TIME_OUT = 5 * 1000; // 5 seconds\n    private static final int RESULT = 69;\n    private static final String TAG = StartActivityForResultTest.class.getName();\n}\n</code></pre>\n\n<p>Running this test gives the following output:</p>\n\n<pre><code>codeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb logcat -c\ncodeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb shell am instrument -w -e class codeguru.startactivityforresult.StartActivityForResultTest codeguru.startactivityforresult.tests/android.test.InstrumentationTestRunner\n\ncodeguru.startactivityforresult.StartActivityForResultTest:\nFailure in testStartButtonOnClick:\njunit.framework.AssertionFailedError\n    at codeguru.startactivityforresult.StartActivityForResultTest.testStartButtonOnClick(StartActivityForResultTest.java:51)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)\n    at android.test.InstrumentationTestCase.access$000(InstrumentationTestCase.java:36)\n    at android.test.InstrumentationTestCase$2.run(InstrumentationTestCase.java:189)\n    at android.app.Instrumentation$SyncRunnable.run(Instrumentation.java:1602)\n    at android.os.Handler.handleCallback(Handler.java:615)\n    at android.os.Handler.dispatchMessage(Handler.java:92)\n    at android.os.Looper.loop(Looper.java:137)\n    at android.app.ActivityThread.main(ActivityThread.java:4745)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n    at dalvik.system.NativeStart.main(Native Method)\n\nTest results for InstrumentationTestRunner=.F\nTime: 3.248\n\nFAILURES!!!\nTests run: 1,  Failures: 1,  Errors: 0\n\n\ncodeguru@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ adb logcat -d codeguru.startactivityforresult.StartActivityForResultTest:D codeguru.startactivityforresult.StartActivityForResult:D codeguru.startactivityforresult.ChildActivity:D *:S\nD/codeguru.startactivityforresult.StartActivityForResultTest(  954): setUp()\nD/codeguru.startactivityforresult.StartActivityForResult(  954): onCreate()\nD/codeguru.startactivityforresult.StartActivityForResult(  954): Start button clicked\nlayne@trolloc:~/src/java/stackoverflow/sscce/StartActivityForResult/test$ \n</code></pre>\n\n<p>As far as I can tell, calling <code>startButton.performClick()</code> doesn't start an instance of <code>ChildActivity</code>. What gives?</p>\n"},{"tags":["unit-testing","intersystems-cache","objectscript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13124696,"title":"How to delete generated unit test data only?","body":"<p>I use this code to create data:</p>\n\n<pre><code>Method OnBeforeAllTests() As %Status\n{\n    // Create one MyClass row   \n    Do ##class(MyClass).Populate(1)\n    Quit $$$OK\n}\n</code></pre>\n\n<p>and this to delete data:</p>\n\n<pre><code>Method OnAfterAllTests() As %Status\n{\n    Do ##class(MyClass).%KillExtent()\n    Quit $$$OK\n}\n</code></pre>\n\n<p>How do I change <code>OnAfterAllTests</code> to only delete the data I populated using <code>OnBeforeAllTests</code> and not delete any other data?</p>\n"},{"tags":["ios","unit-testing","restkit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13106144,"title":"RestKit: Testing object mapping, 'failure when mapping from...'","body":"<p>As the title of this question indicates, I am using RestKit and I would like to test my object mapping using the build-in testing classes. I have written a tiny application that fetches a User object as json from a (local) web api. This part works but, my test case tells me that it doesn't - hm!</p>\n\n<p>I am following Blake Watters <a href=\"https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit\" rel=\"nofollow\">Unit Testing With RestKit Guide</a>, but I am not able to succeed. Let me clarify once more that the actual application works fine (I am able to map json from API to User object without problems), but the test case fails with the error shown below. Therefore I suspect my test to be wrong, somehow.</p>\n\n<p>Here's some code:</p>\n\n<h3>Error Message</h3>\n\n<pre><code>&lt;RKMappingTest: 0xa242130&gt;: failure when mapping from {\nuser =     {\n    \"first_name\" = Kasper;\n    id = 21;\n    \"last_name\" = Fueled;\n};\n} to &lt;User: 0xa23d730&gt; with mapping &lt;RKObjectMapping:0xa23d250 objectClass=User keyPath mappings =&gt; (\n\"RKObjectKeyPathMapping: id =&gt; userID\",\n\"RKObjectKeyPathMapping: first_name =&gt; first_name\",\n\"RKObjectKeyPathMapping: last_name =&gt; last_name\",\n)&gt;. \n</code></pre>\n\n<p>I notice that the id key is not quoted, while first_name and last_name are, but I am not sure if it makes any difference.</p>\n\n<h3>user.json (updated: removed comma)</h3>\n\n<pre><code>{ \"user\": {\n       \"id\":21,\n       \"first_name\":\"Kasper\",\n       \"last_name\":\"Fueled\"\n       }\n}\n</code></pre>\n\n<h3>user.json (old)</h3>\n\n<pre><code>{ \"user\": {\n       \"id\":21,\n       \"first_name\":\"Kasper\",\n       \"last_name\":\"Fueled\",\n       }\n}\n</code></pre>\n\n<h3>User.h</h3>\n\n<pre><code>@property (strong, nonatomic) NSNumber *userID;\n@property (strong, nonatomic) NSString *first_name;\n@property (strong, nonatomic) NSString *last_name;\n</code></pre>\n\n<h3>User mapping</h3>\n\n<pre><code>+ (RKObjectMapping *)objectMapping {\n    return [RKObjectMapping mappingForClass:[User class] usingBlock:^(RKObjectMapping *mapping) {\n        [mapping mapKeyPath:@\"id\" toAttribute:@\"userID\"];\n        [mapping mapKeyPath:@\"first_name\" toAttribute:@\"first_name\"];\n        [mapping mapKeyPath:@\"last_name\" toAttribute:@\"last_name\"];\n    }];\n}\n</code></pre>\n\n<h3>Test Case</h3>\n\n<pre><code>- (void)testMapping {\n    id parsedJSON = [RKTestFixture parsedObjectWithContentsOfFixture:@\"user.json\"];\n    RKMappingTest *test = [RKMappingTest testForMapping:[User objectMapping] object:parsedJSON];\n\n    [test expectMappingFromKeyPath:@\"user.first_name\" toKeyPath:@\"first_name\"];\n\n    STAssertNoThrow([test verify], nil);\n}\n</code></pre>\n\n<p>Fixture is created as per described in Blake's guide.</p>\n"},{"tags":["javascript","html5","unit-testing","htmlunit","jasmine-maven-plugin"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":11315455,"title":"Does HtmlUnit and jasmine-maven-plugin support HTML5 sessionStorage?","body":"<p>I am trying to test a JavaScript function that uses HTML5 sessionStorage on jasmine-maven-plugin. Jasmine uses HtmlUnit to emulate a web browser.</p>\n\n<p>The problem is that when the automated tests are running during maven build, it says:</p>\n\n<blockquote>\n  <ul>\n  <li>Error: Expected a spy, but got Function.</li>\n  </ul>\n</blockquote>\n\n<p>I have tried this <a href=\"http://stackoverflow.com/questions/9428210/how-to-deal-with-sessionstorage-locally-in-ff-for-testing\">How to deal with sessionStorage locally in FF (for testing)</a> and then I've got this error:</p>\n\n<blockquote>\n  <ul>\n  <li>TypeError: Expected argument of type object, but instead had type object in file: ...</li>\n  </ul>\n</blockquote>\n\n<p>But if I try to run Jasmine on a web page importing jasmine.js, the test works perfectly. \nI have tried this too <a href=\"http://stackoverflow.com/questions/9217182/can-i-access-html5-storages-using-htmlunit\">Can I access HTML5 storages using HTMLUnit</a> , but without success.</p>\n\n<p>An example of code that works on <a href=\"http://tryjasmine.com/\" rel=\"nofollow\">http://tryjasmine.com/</a> and not in jasmine-maven-plugin:</p>\n\n<pre><code>function alertItem(id) {\nconsole.log(\"start\");\nvar x = sessionStorage.getItem(id);\nalert(x);\n}\n\ndescribe(\"sessionStorage test\", function () {    \nconsole = {\n    log : function() {},\n    error : function() {},\n    warn : function() {}\n};\n\nvar mockup = function() {\n    var table = {};\n    return {\n        getItem: function(key) {\n            return table[key];\n        },\n        setItem: function(key, value) {\n            table[key] = value.toString();\n        },\n        removeItem: function(key) {\n            table.pop();\n        },      \n        clear: function() {\n            table = {};\n        }\n    };\n}();\n\nObject.defineProperty(window, 'sessionStorage', {\n    value: mockup\n});\n\n\nit(\"must work\", function () {\n    console.log(\"testing...\");\n    spyOn(sessionStorage, 'getItem').andReturn(\"my value\");\n    alertItem(\"id\");\n    expect(sessionStorage.getItem).toHaveBeenCalled();\n});\n});\n</code></pre>\n\n<p>Does anyone have an idea?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","unit-testing","sql-server-2005"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13123082,"title":"SQL script compatible SQL Server 2005","body":"<p>I have an application and this will \"install\" some stored procedures into a local database.</p>\n\n<p>I want to make a unit test to validate the stored procedures so that the will be valid from SQL Server 2005 and up.</p>\n\n<p>Is there a way to do this with / without SQL Server?</p>\n"},{"tags":["unit-testing","xsl-fo"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13122570,"title":"Unit testing framework for xsl-fo","body":"<p>I need to run unit tests on xsl-fo. I wanted to know if there are any frameworks I can use.\nutf-x seems to be very complicated</p>\n"},{"tags":["java","unit-testing","collections"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":52,"score":5,"question_id":13122764,"title":"Test case library for java.util.List implementations","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7068503/is-there-a-testsuite-for-java-custom-collections-implementation\">Is there a testsuite for Java custom collections implementation?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a test case library available that I can use to ensure a custom implementation of <code>java.util.List</code> is done correctly?</p>\n\n<p>I can certainly write my one test cases, but given the nature of all of the <code>List</code> methods, it seems tricky to ensure that the tests are comprehensive.</p>\n\n<p>Similarly, it'd be great to have test cases for the entire set of Java collections interfaces.</p>\n"},{"tags":["c#",".net","unit-testing","app-config","visual-studio-team-system"],"answer_count":7,"favorite_count":4,"up_vote_count":31,"down_vote_count":0,"view_count":20645,"score":31,"question_id":344069,"title":"Can a unit test project load the target application's app.config file?","body":"<p>I am unit testing a .NET application (.exe) that uses an app.config file to load configuration properties.  The unit test application itself does not have an app.config file.  </p>\n\n<p>When I try to unit test a method that utilizes any of the configuration properties, they return <em>null</em>.  I'm assuming this is because the unit test application is not going to load in the target application's app.config.</p>\n\n<p>Is there a way to override this or do I have to write a script to copy the contents of the target app.config to a local app.config?  </p>\n\n<p><a href=\"http://stackoverflow.com/questions/168931/unit-testing-the-appconfig-file-with-nunit\">This</a> post kind-of asks this question but the author is really looking at it from a different angle than I am.</p>\n\n<p><strong>EDIT:</strong> I should mention that I'm using VS08 Team System for my unit tests.</p>\n"},{"tags":["database","unit-testing","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13121924,"title":"How to test database frontend application written with MVVM pattern?","body":"<p>I wrote a desktop application which basically is a front end for database. It is used for create, read, update operations of different linked objects and performs some simple calculation and data aggregation. The MVVM pattern was followed in order to simplify testing.\nThis morning I tried writing the first test and realized it was not simple as expected.\nUnit tests are great for checking the result of a single operation, but unfortunately I have to deal with complex objects which are linked together.\nI will try to explain my problems better.\n1) I can create and test an object of class A. If I repeat the test 100 times my database becomes polluted. I need automatic procedures to clean it. \n2) Objects of class B needs an object of class A for some operations. I don't think it is a good idea to write a test where both objects A and B are created. what I supposed to be the right way is to use the object created at point 1 as a prerequisites for this test. </p>\n\n<p>I switched to visual studio 2012 express because it has basic support for unit tests but I need some guidelines on how to better use it for my special needs.</p>\n\n<p>Thanks\nFilippo</p>\n"},{"tags":["ios","unit-testing","continuous-integration","ocunit","sfhfkeychainutils"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":399,"score":7,"question_id":9996578,"title":"OCUnit tests fail from the command line but work in Xcode when using Keychain Services","body":"<p>I'm using SFHFKeychainUtils to use Keychain Services in my app. I've written some OCUnit tests that verify the funcionality of this code. Everything works fine when I run the unit tests from Xcode on the iOS simulator or my device. However now I'm trying to set up a CI server and the test is failing when it is run via the command line with error code -25291. Looking that up on Apple's documentation tells me: No trust results are available (errSecNotAvailable). I've linked the Security.framework to my unit test project, it seems like from what I have read on the web this is all I should need to get this working. Here is the command I am invoking in the console:</p>\n\n<p><code>/usr/bin/xcodebuild -target [Test_Target] -sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/ -configuration Debug\n</code></p>\n\n<p>Does anyone have any experience or suggestions for getting unit testing and Keychain Services to play nicely together from the command line?</p>\n"},{"tags":["unit-testing","nunit","xunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13062975,"title":"xunit programmatically add new tests/\"[Facts]\"?","body":"<p>We have a folder full of JSON text files that need to be set to a single URI. Currently it's all done with a single xUnit \"[Fact]\" as below</p>\n\n<pre><code>[Fact]\npublic void TestAllCases()\n{\n    PileOfTests pot = new PileOfTests();\n    pot.RunAll();\n}\n</code></pre>\n\n<p>pot.RunAll() then parses the folder, loads the JSON files (say 50 files). Each is then hammered against the URI to see is each returns HTTP 200 (\"ok\"). If any fail, we're currently printing it as a fail by using </p>\n\n<pre><code>System.Console.WriteLine(\"\\n &gt;&gt; FAILED ! &lt;&lt; \" + testname + \"\\n\");\n</code></pre>\n\n<p>This does ensure that failures catch our eye but xUnit thinks all tests failed (understandably). Most importantly, we can't specify to xunit \"here, run only <em>this</em> specific test\". It's all or nothing the way it's currently built.</p>\n\n<p>How can I programmatically add test cases? I'd like to add them when I read the number and names of the *.json files. </p>\n"},{"tags":["flash","unit-testing","testing","frameworks","open-source"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":558,"score":1,"question_id":4888860,"title":"Cross-platform web-GUI test automation suite, capable of simulating system level events (click, keypress, etc)?","body":"<p>I'm basically looking for a tool to automate testing of web applications, having components of various nature (Flash among them). The perfect candidate would be an independent (but scriptable) cross-platform program (written in Java), which can among other things, simulate system-level mouse and keyboard events (since Flash for example doesn't allow to trigger file dialog programmatically).</p>\n\n<p>Does anyone know of such tool or framework, open-source or not?</p>\n"},{"tags":["entity-framework","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13072860,"title":"How do you mock adding items to a repository or DbContext using moq?","body":"<p>The examples I've seen for using moq for a repository only show how to mock things being returned. I have a somewhat strange requirement: when a query is executed, if a condition exists, a certain item should be added to the repository. I am wondering how to test this without querying the database. I know how to mock the condition existing, but then how do you setup the mock so that you can test that the certain item is added?</p>\n"},{"tags":["unit-testing","ssdt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13036080,"title":"sqlpackage.exe \"Cannot open database\" randomly occurs","body":"<p>I am using sqlpackage.exe to create dynamic databases to run unit tests against. This work locally 100% of the time, but not in TFS. All the unit tests use integrated security for locahost\\sqlexpress. TFS will randomly cause sqlpackage.exe to return the following error.</p>\n\n<p>For the unit tests, I am using the pattern described <a href=\"http://nicholas.piasecki.name/blog/2010/01/integration-testing-with-sql-server-express-2008-nhibernate-and-mstest/\" rel=\"nofollow\">here</a>, but with some modifications to use a dacpac with sqlpackage as oppose to the schema export feature of nhibernate.</p>\n\n<pre><code>sqlpackage error    : *** Could not deploy package.\nsqlpackage error    : Cannot open database \"MessagesRepositoryTests\" requested by the login. The login failed.\nsqlpackage error    : Login failed for user 'DOMAIN\\TFSService'.\n</code></pre>\n\n<p>Other (random) errors include another line mentioning that it failed to import the target model.</p>\n\n<pre><code>sqlpackage error    : *** Could not deploy package.\nsqlpackage error    : Failed to import target model MessagesRepositoryTests. Detailed message Cannot open database \"MessagesRepositoryTests\" requested by the login. The login failed.\nsqlpackage error    : Login failed for user 'DOMAIN\\TFSService'.\nsqlpackage error    : Cannot open database \"MessagesRepositoryTests\" requested by the login. The login failed.\nsqlpackage error    : Login failed for user 'DOMAIN\\TFSService'.\n</code></pre>\n\n<p>\"DOMAIN\\TFSService\" has been granted every server role (sysadmin, public, etc).</p>\n\n<p>Does anyone have a clue why this would show up intermitently throughout all of my tests? Remember, this occurs only from the TFS build automated unit tests.</p>\n"},{"tags":["unit-testing","ejb-3.0","mockito","ejb-3.1","openejb"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1207,"score":5,"question_id":7765698,"title":"Unit Testing EJB 3.1","body":"<p>I am doing a small research on Unit Testing of EJB 3.1.  At the end my goal is to produce a easy to use solution for Unit Testing EJB 3.1.</p>\n\n<ol>\n<li>I do not have much knowledge with big EJB implementations and hence I would like to first get some experienced hands (You) to just pool in your ideas on what is difficult in Unit Testing EJBs.  </li>\n<li>With the initial research I have already done, I can understand the advantages of using mocking frameworks for Unit Testing rather than using embedded containers.  Though both are good, mocking frameworks stands a little above when it comes to Unit Testing.  The embedded containers are ofcourse very good and have their own advantages, but may be a different phase of unit testing.  I still believe that there should be some shortfalls at least in some scenarios in using such frameworks which can be improved.</li>\n</ol>\n\n<p>I hope I could make a complete solution for Unit Testing EJB which I can share in this forum once done.</p>\n\n<p>Thanks for your support.</p>\n"},{"tags":["c++","unit-testing"],"answer_count":5,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":1958,"score":7,"question_id":1460703,"title":"Comparison of arrays in google test?","body":"<p>I am looking to compare two arrays in google test. In UnitTest++ this is done through CHECK_ARRAY_EQUAL. How do you do it in google test?</p>\n"},{"tags":["c#",".net","unit-testing","dependency-injection","code-cleanup"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":13111775,"title":"Problems with Dependency Injection – how to clean up my implementation?","body":"<p>I’m using Dependency Injection to mock out classes in order to unit test other classes that depend on them:</p>\n\n<pre><code>class Foo : IFoo\n{\n    // production code\n}\n\nclass MockFoo : IFoo\n{\n    // mock so other classes that depend on Foo can be unit tested\n}\n\nclass Bar\n{\n    public DoSomething()\n    {\n        var barValue = 20;\n        // use dependency injection to get Foo instance.\n        DependencyInjection.Instance.Foo.ExampleMethod(barValue);\n    }\n}\n</code></pre>\n\n<p>However, setting up my dependency injection class is getting unwieldy, labyrinthine and complicated:</p>\n\n<pre><code>public class DependencyInjection\n{\n    public Setup()\n    {\n        this.Foo = new Foo();\n        this.Bar = new Bar(\"example constructor string\");\n        this.Bat = new Bat(123,234);\n        // for every single class in my application!\n    }\n}\n</code></pre>\n\n<p>(simplified for clarity, but you can imagine the real implementation with dozens of classes and their constructors).</p>\n\n<p>There are also a number of other problems: </p>\n\n<ul>\n<li>DependencyInjection and each of its class instances are a <strong>huge global\nvariable</strong> passed around my application. </li>\n<li>I’m initializing all of my classes at the same time.</li>\n<li>I have to provide an interface\nfor every class I write for unit testing – I’m allowing unit testing\nto dictate the design of my program (most of the classes I write\nwould be concrete implementations with no interface if it weren’t for\nthis constraint).</li>\n</ul>\n\n<p>Advice on how to solve these problems would be appreciated!</p>\n"},{"tags":["python","unit-testing","code-organization"],"answer_count":3,"favorite_count":25,"up_vote_count":36,"down_vote_count":0,"view_count":4860,"score":36,"question_id":1849311,"title":"How should I organize Python source code?","body":"<p>I'm getting started with Python (it's high time I give it a shot), and I'm looking for some best practices.</p>\n\n<p>My first project is a queue which runs command-line experiments in multiple threads. I'm starting to get a very long <code>main.py</code> file, and I'd like to break it up. In general, I'm looking for: <strong>How do python programmers organize multiple source files?</strong> Is there a particular structure that works for you?</p>\n\n<p>My specific questions include:</p>\n\n<ol>\n<li>Should each class be in a separate file?</li>\n<li>How should I organize unit tests relative to source code?</li>\n<li>Where should I put doc comments, specifically those for command-line operation?</li>\n<li>If I use multiple directories, how do I import classes between them?</li>\n</ol>\n\n<p>I can probably draw some of my own conclusions here by trial and error, but I'd rather start from something <em>good</em>.</p>\n"},{"tags":["unit-testing","c++-cli","white-box","white-box-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":40,"score":-1,"question_id":13110893,"title":"White Box Testing doesn't Work (Visual Studio 2010 in C++/C)","body":"<p>I want only to construct a little White Box Test. I get a lot of Errors for a simple Assert Testing. Can sombody implement <strong>one</strong> correct test in my source. I think somethin with my clips are not right. I just want to test my functions.</p>\n\n<p>My Header Files:</p>\n\n<p><strong>resource.h</strong></p>\n\n<pre><code>//{{NO_DEPENDENCIES}}\n// Microsoft Visual C++ generated include file.\n// Used by app.rc\n</code></pre>\n\n<p><strong>stdafx.h</strong></p>\n\n<pre><code>// stdafx.h : Includedatei für Standardsystem-Includedateien\n// oder häufig verwendete projektspezifische Includedateien,\n// die nur in unregelmäßigen Abständen geändert werden.\n//\n\n#pragma once\n\n#include \"targetver.h\"\n\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;bthdef.h&gt;\n#include &lt;BluetoothAPIs.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;conio.h&gt;\n\nstd::wstring menu();\nvoid localBluetoothDevices ();\nvoid externBluetoothDevices(int);\nvoid refreshALL();\nvoid searchId (std::vector&lt;std::wstring&gt;, std::wstring);\n</code></pre>\n\n<p><strong>targetver.h</strong></p>\n\n<pre><code>    #pragma once\n\n    // Durch Einbeziehen von\"SDKDDKVer.h\" wird die höchste verfügbare Windows-Plattform definiert.\n\n    // Wenn Sie die Anwendung für eine frühere Windows-Plattform erstellen möchten, schließen Sie \"WinSDKVer.h\" ein, und\n    // legen Sie das _WIN32_WINNT-Makro auf die zu unterstützende Plattform fest, bevor Sie \"SDKDDKVer.h\" einschließen.\n\n    #include &lt;SDKDDKVer.h&gt;\n</code></pre>\n\n<p><strong>SourceCode.\nWhieBox.cpp</strong></p>\n\n<pre><code>#include \"stdafx.h\"\n#define WIN32_LEAN_AND_MEAN\n\nusing namespace std;\n\n#pragma comment(lib, \"Irprops.lib\")\n\nBLUETOOTH_FIND_RADIO_PARAMS m_bt_find_radio = {\n  sizeof(BLUETOOTH_FIND_RADIO_PARAMS)\n};\n\nBLUETOOTH_RADIO_INFO m_bt_info = {\n  sizeof(BLUETOOTH_RADIO_INFO),\n  0,\n};\n\nBLUETOOTH_DEVICE_SEARCH_PARAMS m_search_params = {\n  sizeof(BLUETOOTH_DEVICE_SEARCH_PARAMS),\n  1,\n  0,\n  1,\n  1,\n  1,\n  15,\n  NULL\n};\n\nBLUETOOTH_DEVICE_INFO m_device_info = {\n  sizeof(BLUETOOTH_DEVICE_INFO),\n  0,\n};\n\nHANDLE m_radio = NULL;\nHBLUETOOTH_RADIO_FIND m_bt = NULL;\nHBLUETOOTH_DEVICE_FIND m_bt_dev = NULL;\n\nusing namespace System;\nusing namespace System::Text;\nusing namespace System::Collections::Generic;\nusing namespace Microsoft::VisualStudio::TestTools::UnitTesting;\n\nnamespace UnitTest\n{\n    [TestClass]\n    public ref class WhiteBox\n    {\n\n    public: \n        [TestMethod]\n        void TestMethod1()\n        {\n  int wmain(int argc, wchar_t **args) {\n  wstring targetId;\n\n  targetId=menu();\n\n  while(true) {\n    m_bt = BluetoothFindFirstRadio(&amp;m_bt_find_radio, &amp;m_radio);\n\n    do {\n      vector&lt;wstring&gt; vec;\n      int m_device_id = 0;      \n\n      localBluetoothDevices ();   \n      refreshALL();\n\n      do {\n       wostringstream tmp;\n       ++m_device_id;\n\n       externBluetoothDevices(m_device_id);\n\n       //Konvertiere Byte in String\n       for (int i = 0; i &lt; 6; i++) {\n        tmp &lt;&lt; hex &lt;&lt; m_device_info.Address.rgBytes [i];\n        if (i &lt; 5)\n         tmp &lt;&lt; L':';\n       }\n\n       //Verfügbarkeitsliste\n       vec.push_back(tmp.str());\n\n      } while(BluetoothFindNextDevice(m_bt_dev, &amp;m_device_info));\n\n      searchId(vec, targetId); \n      BluetoothFindDeviceClose(m_bt_dev);\n      Sleep(10000);\n\n    } while(BluetoothFindNextRadio(&amp;m_bt_find_radio, &amp;m_radio));\n    BluetoothFindRadioClose(m_bt);\n  }\n  return 0;\n}\n}\n\n//Konsole Menu\nwstring menu(){\n  int menuId;\n  wstring targetId;\n\n  wcout&lt;&lt;\"==============================BLUE*Smart==============================\"&lt;&lt;endl&lt;&lt;endl;\n  wcout&lt;&lt;\"Start Example with test ID \\t(1) \\n\";\n  wcout&lt;&lt;\"Start with special ID \\t\\t(2) \\n\";\n  wcout&lt;&lt;\"EXIT \\t\\t\\t\\t(3) \\n \\n\";\n  wcout&lt;&lt;\"Selection: \"; wcin&gt;&gt;menuId; cout&lt;&lt;endl&lt;&lt;endl;\n\n  switch (menuId){\n  case 1: targetId = (L\"18:22:85:d8:3:98\"); break;\n  case 2: wcout&lt;&lt;L\"Target ID: \"; wcin&gt;&gt;targetId; cout&lt;&lt;endl&lt;&lt;endl; break;\n  case 3: exit(EXIT_FAILURE);\n  default: cout&lt;&lt;\"Wrong Input!!! Starting Testprogramm\"&lt;&lt;endl&lt;&lt;endl; targetId = (L\"18:22:85:d8:3:98\"); break;\n  }\n\n  return targetId;\n}\n\n//Lokal verfügbare bzw. angeschlossene Bluetooth-Devices\nvoid localBluetoothDevices (){\n      int m_radio_id = 0;\n      m_radio_id++;\n      BluetoothGetRadioInfo(m_radio, &amp;m_bt_info);      \n      //Lokaler Bluetoothadapter\n      wprintf(L\"====================================================================== \\n\");\n      wprintf(L\"\\tLocal Device Nr. %d\\r\\n\", m_radio_id);\n      wprintf(L\"\\t\\tName: %s\\r\\n\", m_bt_info.szName);\n      wprintf(L\"\\t\\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\\r\\n\", m_bt_info.address.rgBytes[0], m_bt_info.address.rgBytes[1], m_bt_info.address.rgBytes[2], m_bt_info.address.rgBytes[3], m_bt_info.address.rgBytes[4], m_bt_info.address.rgBytes[5]);\n\n}\n\n//Extern verfügbare bzw. anwesende Bluetooth-Devices\nvoid externBluetoothDevices(int mt_counter){\n       int m_device_id=mt_counter;\n       wprintf(L\"********************************************************************** \\n\");\n       wprintf(L\"\\tDevice %d:\\r\\n\", m_device_id);\n       wprintf(L\"\\t\\tName: %s\\r\\n\", m_device_info.szName);\n       wprintf(L\"\\t\\tAddress: %02x:%02x:%02x:%02x:%02x:%02x\\r\\n\", m_device_info.Address.rgBytes[0], m_device_info.Address.rgBytes[1], m_device_info.Address.rgBytes[2], m_device_info.Address.rgBytes[3], m_device_info.Address.rgBytes[4], m_device_info.Address.rgBytes[5]);\n       wprintf(L\"====================================================================== \\n\");\n}\n\n//Memory Refresh\nvoid refreshALL(){\n      m_search_params.hRadio = m_radio;\n      ::ZeroMemory(&amp;m_device_info, sizeof(BLUETOOTH_DEVICE_INFO));\n      m_device_info.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);\n      m_bt_dev = BluetoothFindFirstDevice(&amp;m_search_params, &amp;m_device_info);\n}\n\n//Prüfe Vector Liste nach ID, ob vorhanden ist\nvoid searchId (vector&lt;wstring&gt; vec, wstring targetId){    \n      vector&lt;wstring&gt;::iterator it = find(vec.begin(), vec.end(), targetId);\n\n      if(it != vec.end()) {   \n       cout &lt;&lt; \"Found it!\\t\" &lt;&lt; endl;\n       cout&lt;&lt;\"======================================================================\"&lt;&lt;endl;\n       cout&lt;&lt;endl&lt;&lt;endl;\n      } else {\n       cout &lt;&lt; \"Not Found! (HARDWARE OFF)\\t\" &lt;&lt; endl;\n       cout&lt;&lt;\"======================================================================\"&lt;&lt;endl;\n       cout&lt;&lt;endl&lt;&lt;endl;\n      }\n}\n\n};\n}\n</code></pre>\n"},{"tags":[".net","unit-testing","nunit","app-config","configurationmanager"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3297,"score":4,"question_id":1412235,"title":"How do you instruct NUnit to load an assembly's dll.config file from a specific directory?","body":"<p>If an assembly contains an app.config file, <code>ConfigurationManager</code> will load it as long as it is in the same directory as the NUnit project that is executing through NUnit-Gui.  To illustrate consider the following folder structure.</p>\n\n<pre><code>+ TestFolder\n    testProject.nunit\n  + AssemblyAFolder\n      assemblyA.dll\n      assemblyA.dll.config\n  + AssemblyBFolder\n      assemblyB.dll\n      assemblyB.dll.config\n</code></pre>\n\n<p>Both <code>AssemblyA</code> and <code>AssemblyB</code> exercise code that calls into <code>ConfigurationManager</code>.  If I run these test assemblies independently in NUnit-Gui, <code>ConfigurationManager</code> will correctly resolve the local configuration files.</p>\n\n<p>However, if I load <code>testProject.nunit</code> into NUnit-Gui (which contains references to both <code>AssemblyA</code> and <code>AssemblyB</code>), <code>ConfigurationManager</code> looks for the configuration file in <code>TestFolder</code> regardless of which assembly is currently executing.</p>\n\n<p>Is there a way to direct NUnit to reload the application configuration to the one present in the current assembly's directory?</p>\n\n<p>Here are the contents of <code>testProject.nunit</code>:</p>\n\n<pre><code>&lt;NUnitProject&gt;\n  &lt;Settings activeconfig=\"Debug\" /&gt;\n  &lt;Config name=\"Debug\" binpathtype=\"Auto\"&gt;\n    &lt;assembly path=\"AssemblyAFolder\\assemblyA.dll\" /&gt;\n    &lt;assembly path=\"AssemblyBFolder\\assemblyB.dll\" /&gt;\n  &lt;/Config&gt;\n&lt;/NUnitProject&gt;\n</code></pre>\n"},{"tags":["c#","visual-studio-2010","unit-testing","testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13110496,"title":"Visual Studio does not run all the unit tests in a test class","body":"<p>I have 3 test methods in my unit test class, but Visual Studio only runs the second test, ignoring the others</p>\n\n<p>These are the 3 test methods: </p>\n\n<pre><code>[TestClass()]\npublic class InsertionSortTest\n{\n\n    [TestMethod()]\n    public void sortTest()\n    {\n        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value\n        int[] n = new int[] { 2, 1, 4 };\n        int[] nExpected = new int[] { 1, 2, 4 };\n        target.sort(ref n);\n        CollectionAssert.AreEqual(nExpected, n);\n\n    }\n\n    [TestMethod()]\n    public void sortTest2()\n    {\n        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value\n        int[] n = new int[] { 1, 2 };\n        int[] nExpected = new int[] { 1, 2 };\n        target.sort(ref n);\n        CollectionAssert.AreEqual(nExpected, n);\n\n    }\n\n    [TestMethod()]\n    public void sortTest3()\n    {\n        InsertionSort target = new InsertionSort(); // TODO: Initialize to an appropriate value\n        int[] n = new int[] { 1, 2 };\n        int[] nExpected = new int[] { 1, 2 };\n        target.sort(ref n);\n        CollectionAssert.AreEqual(nExpected, n);\n\n    }\n}\n</code></pre>\n\n<p>So when I run the test only sortTest2 is executed? I am expecting 3 results from this. I am getting Results 1/1 passed. TestName: sortTest2. </p>\n\n<p>What happened with the other two tests I made?</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","white-box-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13110049,"title":"Visual Studio 2010 Unit Test","body":"<p>I want to test a couple of functions in my source code with unit tests. Now If I run my test I don't get any test results.</p>\n\n<p>Here is a simple Code Snippet what I try to do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nnamespace UnitTest\n{\n    [TestClass]\n    public ref class UnitTestBlueSmart\n\n        int main(){\n        public:\n        [TestMethod()]\n        hello();\n        }\n}\n\nvoid hello(){\n cout&lt;&lt;\"Hello World!\";\n}\n</code></pre>\n\n<p>Does anyone know why this is not working?</p>\n"},{"tags":["c#","entity-framework","unit-testing","orm"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13107882,"title":"mocking EF without repository pattern","body":"<p>I'm using Entity Framework 4.</p>\n\n<p>I have read this post:</p>\n\n<p><a href=\"http://www.nogginbox.co.uk/blog/mocking-entity-framework-data-context\" rel=\"nofollow\">http://www.nogginbox.co.uk/blog/mocking-entity-framework-data-context</a></p>\n\n<p>But in my code I don't see anything like  <code>EFContext</code> <code>Attach() Detach()</code> and other stuff that appears there.</p>\n\n<p>Mine is more like this diagram:</p>\n\n<p><a href=\"http://blogofrab.blogspot.co.il/2010/08/maintenance-free-mocking-for-unit.html\" rel=\"nofollow\">http://blogofrab.blogspot.co.il/2010/08/maintenance-free-mocking-for-unit.html</a></p>\n\n<p>and then I don't understand how mocking the Icontext will help mocking?</p>\n\n<p>The ORM to the DB lays inside <code>get property</code> and <code>AddTo methods</code></p>\n"},{"tags":["python","unit-testing","class-method"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13107823,"title":"No such test method / unbound error","body":"<p>I have overridden the unittest.TestCase class to include some additional functionality like this</p>\n\n<pre><code>class TestCase(unittest.TestCase):\n    def foo(self):\n        return 4711\n</code></pre>\n\n<p>which I am going to use in the <code>setUpClass</code> call in a Test Case like this</p>\n\n<pre><code>class MyTest(TestCase):\n    @classmethod\n    def setUpClass(cls):\n        value = cls.foo() #1 \n        value = MyTest.foo() #2\n        value = MyTest().foo() #3\n        value = TestCase().foo() #4\n</code></pre>\n\n<p>where I fail to access the function <code>foo()</code> I have implemented in the modified unitest class. </p>\n\n<p>I can see that try #2 will fail because I try to access a method of a class which is not instantiated, and foo is not a classmethod.\nI can see that try #1 also does not work, as I am trying to access a non-class method from the classmethod level (or how this ever is correctly described).\nBut why is try #3/#4 giving me an <code>no such test method</code> error? </p>\n\n<p>How is it possible to access the <code>foo()</code> method WITHOUT making it a classmethod (because I cannot change this as it is something external)? </p>\n"},{"tags":["python","unit-testing","doctest"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":13106118,"title":"object reuse in python doctest","body":"<p>I have a sample doctest like this one.</p>\n\n<pre><code>\"\"\"\nThis is the \"iniFileGenerator\" module.\n&gt;&gt;&gt; hintFile = \"./tests/unit_test_files/hint.txt\"\n&gt;&gt;&gt; f = iniFileGenerator(hintFile)\n&gt;&gt;&gt; print f.hintFilePath\n./tests/unit_test_files/hint.txt\n\"\"\"\nclass iniFileGenerator:\n    def __init__(self, hintFilePath):\n        self.hintFilePath = hintFilePath\n    def hello(self):\n        \"\"\"\n        &gt;&gt;&gt; f.hello()\n        hello\n        \"\"\"\n        print \"hello\"\nif __name__ == \"__main__\":\n    import doctest\n    doctest.testmod()\n</code></pre>\n\n<p>When I execute this code, I got this error.</p>\n\n<pre><code>Failed example:\n    f.hello()\nException raised:\n    Traceback (most recent call last):\n      File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/doctest.py\", line 1254, in __run\n        compileflags, 1) in test.globs\n      File \"&lt;doctest __main__.iniFileGenerator.hello[0]&gt;\", line 1, in &lt;module&gt;\n        f.hello()\n    NameError: name 'f' is not defined\n</code></pre>\n\n<p>This error is caused by accessing 'f' which was not accessible when testing <code>hello()</code> method.</p>\n\n<p>Is there any way to share the object which is created before? Without it, one need to create object all the time when it's necessary.</p>\n\n<pre><code>def hello(self):\n    \"\"\"\n    hintFile = \"./tests/unit_test_files/hint.txt\"\n    &gt;&gt;&gt; f = iniFileGenerator(hintFile)\n    &gt;&gt;&gt; f.hello()\n    hello\n    \"\"\"\n    print \"hello\"\n</code></pre>\n"},{"tags":["asp.net",".net","unit-testing","mocking","httpcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13106037,"title":"Is using HttpContext directly a bad thing?","body":"<p>I have a little alternative MVC framework built atop ASP.Net(though not strictly tied to it). One of the things I mess around with a whole lot is <code>HttpContext</code> instances and <code>HttpContext.Current</code>. Recently, I've went to trying to put in a few unit tests for my framework and found that HttpContext is notoriously hard to test against. Because my application isn't necessarily tied to ASP.Net, I've tried reimplementing a more basic version of HttpContext, HttpRequest, and friends, but this is a massive undertaking for the shear amount of information that must be contained in these classes. </p>\n\n<p>What exactly should I do? Find a work around for testing with HttpContext or restructure my code to not explicitly depend on it so much? Or is there a better way? Is using HttpContext directly a lot a bad thing? </p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":1874,"score":9,"question_id":4332877,"title":"PHPUnit - Running a particular test suite via the command line test runner","body":"<p>Is it possible to specify which test suite to run from a configuration file via the command line test runner? For example, if I have the following xml configuration:</p>\n\n<pre><code>&lt;phpunit ...&gt;\n    &lt;testsuites&gt;\n        &lt;testsuite name=\"My Test Suite 1\"&gt;\n            &lt;directory&gt;./MyTestSuite1/&lt;/directory&gt;\n        &lt;/testsuite&gt;\n        &lt;testsuite name=\"My Test Suite 2\"&gt;\n            &lt;directory&gt;./MyTestSuite2/&lt;/directory&gt;\n        &lt;/testsuite&gt;\n    &lt;/testsuites&gt;\n    ...\n&lt;/phpunit&gt;\n</code></pre>\n\n<p>Can I have it run only \"My Test Suite 1\"?</p>\n"},{"tags":["unit-testing","session","grails","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":345,"score":0,"question_id":8611810,"title":"Grails 2.0: MissingPropertyException when setting attribute on Session","body":"<p>Since upgrading to Grails 2.0.0 from 2.0.0.RC1 There's some really strange behaviour in my controller when setting the user attribute on the session.</p>\n\n<p>My test is under integration and when running <code>grails --integration test-app</code> or from an IDE all tests pass but when running <code>grails test-app</code> <strong>with the unit tests first, it fails.</strong> </p>\n\n<p>I am simply setting the user on the session in my UserController.login() action:</p>\n\n<pre><code>session.user = user\n</code></pre>\n\n<p>My test looks like that:</p>\n\n<pre><code>params.userName = testUser1.userName  // some user domain instance\nparams.password = testUser1.password\ncontroller.doLogin()\nassert null != session.user\n</code></pre>\n\n<p>When running <code>grails test-app</code> I receive the following error on the <code>session.user=user</code> line:</p>\n\n<pre><code>groovy.lang.MissingPropertyException: No such property: user for class: org.codehaus.groovy.grails.web.servlet.mvc.GrailsHttpSession\nPossible solutions: new\n</code></pre>\n\n<p>Replacing the controller code with the following works:</p>\n\n<pre><code>session.setAttribute('user',user)\n</code></pre>\n\n<p>and the test with:</p>\n\n<pre><code>assert null != session.getAttribute('user')\n</code></pre>\n\n<p>As mentioned above, this only happens when running the full test suite. If running <code>--integration</code> it's fine. <code>run-app</code> is ok too.</p>\n\n<p>A bug?</p>\n\n<p>Regards</p>\n\n<p>Jonas</p>\n"},{"tags":["iphone","unit-testing","ios-simulator"],"answer_count":27,"favorite_count":99,"up_vote_count":268,"down_vote_count":1,"view_count":106167,"score":267,"question_id":788277,"title":"iPhone - strange error when testing on simulator","body":"<p>I was testing my app on the simulator when it crashed on clicking a button of a UIAlertView. I stopped debugging there, made some changes to the code and built the app again. Now when I run the application, I get this error in the console</p>\n\n<blockquote>\n  <p><strong>Couldn't register com.myApp.debug with the bootstrap server. Error: unknown error code.\n  This generally means that another instance of this process was already running or is hung in the debugger.Program received signal:  “SIGABRT”.</strong></p>\n</blockquote>\n\n<p>I tried removing the app from the simulator, doing a clean build but I still get this error when I try to run the app.</p>\n\n<p>What should I do to be able to run the app on my simulator again?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":177,"score":0,"question_id":9266144,"title":"python unit test nested testcase","body":"<p>I wrote a script based on python unittest2, it's structure like this:</p>\n\n<pre><code>testCase\n  |_setup() --&gt; call testCase1\n  |_runTest() --&gt; call testCase2\n  |_teardown() --&gt; call testCase3\n</code></pre>\n\n<p>that is when testcase1,2,3 is nested in the testcase.</p>\n\n<p>The problem is when sub testcase (1,2,3) has exception such as assert failure, the failure catched by sub testcase itself, the top testCase cannot catch, so any way to let the exception in sub testcase  raise to top top testcase?</p>\n\n<p>Another related question is: is it possible let top testcase and sub testcase share a same 'testResult' object? Then they can show in same report.</p>\n\n<p>Thanks in advance for reading and answering.</p>\n\n<p>------ Reply questions in comments ---------</p>\n\n<p><strong>1. why need add test in test</strong></p>\n\n<p>That's because I have <strong>.ini</strong> format configuration file to <strong>represent</strong> a testcase, has 'setup','execute','teardown' sections.  </p>\n\n<p>What I do is </p>\n\n<pre><code>1. read each section from ini file, \n2. then create testcase objects for each section (that is testcase1,2,3,), \n3. then assemble all three sections in to a top testcase object, \n4. then run the top testcase object.  \n</code></pre>\n\n<p>please let me know if have better approach for this kind of 'ini' implementation.</p>\n\n<p><strong>2. The code</strong></p>\n\n<pre><code>#the class test classes properties as expected.\nclass tSmis(cim.cimBase):\n\n    def __init__(self,methodName,setupObj=None,exeObj=None,teardownObj=None,clsSetupObj=None,clsTeardownObj=None):\n        setattr(self,methodName,self.exeute)\n        unittest.TestCase.__init__(self, methodName)\n\n        #self.writeHtml(\"info\", \"Class tSmis __init__,one class Instance created, tc is {}\".format(methodName))\n        self.setupObj=setupObj\n        self.exeObj=exeObj\n        self.teardownObj=teardownObj\n\n        self.clsSetupObj=clsSetupObj\n        self.clsTeardownObj=clsTeardownObj    \n\n\n\n    def exeute(self):\n        if self.exeObj:\n            self.exeObj()\n\n\n\n    def setUp(self):\n        if self.setupObj:\n            #self.setupObj() #run case.__call__, eval run case.run\n\n#ASSERT FAILURE CANNOT BE CATCHED IN BELOW LINE\n    unittest.TextTestRunner(verbosity=5,resultclass=resultclassG).run(self.setupObj)\n\n            #ASSERT CAN BE CATCHED\n            self.assertEqual(1,0,\"This is a debug  message \")\n\n    def tearDown(self):\n        if self.teardownObj:\n            self.teardownObj()\n</code></pre>\n"},{"tags":["unit-testing","testing","code-coverage","mutation-testing"],"answer_count":3,"favorite_count":4,"up_vote_count":17,"down_vote_count":1,"view_count":1650,"score":16,"question_id":242650,"title":"Is mutation testing useful in practice?","body":"<p>It exists the technology of <a href=\"http://en.wikipedia.org/wiki/Mutation_testing\" rel=\"nofollow\">mutation testing</a>. It checks, if the tests are running even if you change the code. If not all is OK, if the tests are running they don't cover all eventualities. There is some theoretical work about it, but I'm interested in the question, if it is useful in practice? Do you have any examples of real life applications of mutation testing? Does it work better than simple test-coverage-tools? Or is it useless?</p>\n\n<p>What are the advantages/disadvantages of mutation testing in the real world?</p>\n"},{"tags":["php","unit-testing","recursion","multidimensional-array","phpunit"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1516,"score":3,"question_id":2937176,"title":"Does PHPUnit have some inbuilt recursive array comparison function?","body":"<p>Some of the testing I will need to do will require comparing a known array with the result I am getting from the functions I will be running.  </p>\n\n<p>For comparing arrays recursively:</p>\n\n<ul>\n<li>Does PHPUnit have an inbuilt function?</li>\n<li>Does someone here have some code they have constructed to share?</li>\n<li>Will this be something I will have to construct on my own?</li>\n</ul>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13093526,"title":"Mocking the super class calls on python","body":"<p>I am doing some unit testing and at some point I need to mock a <code>super</code> call to throw an error, for example:</p>\n\n<pre><code>@classmethod\ndef myfunc(cls, *args, **kwargs)\n    try:\n        super(MyClass, cls).my_function(args, kwargs)\n    except MyException as e:\n        #...\n</code></pre>\n\n<p>I am using the <a href=\"http://labix.org/mocker#head-83d80b643ee8544628ee7a8301a72443ac51a173\" rel=\"nofollow\">mocker</a> library to mock my objects in general but I haven't found a way to mock this.</p>\n"},{"tags":["web-services","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13092780,"title":"Testing web services with JUnit","body":"<p>I'm developing an application to perform a series of tests on various web services. These web services consume and produce json, and for each of them we have a class to model the json request and response. For example:</p>\n\n<p>If the json request for serviceX is something like this:</p>\n\n<pre><code>{\n  \"name\":\"Alex\",\n  \"id\":\"123\"\n}\n</code></pre>\n\n<p>We have a class <code>serviceXrequest</code> like this:</p>\n\n<pre><code>public class serviceXrequest {\n\n   String name;\n   String id;\n\n   //Constructor, getters/setters, etc\n   ...\n}\n</code></pre>\n\n<p>With an object of that class as the starting point, we can perform a series of test on the web service. The idea is to make those test as generic as possible so they can be used with any web service by just writing a class that models it's request and a class to model the response.</p>\n\n<p>For that reason, all of the test methods developed so far work with plain java objects. This is an example of what I want to have:</p>\n\n<pre><code>public class WebServiceTest {\n\n    String serviceURL;\n    String requestJson;\n    String requestClass;\n    String responseClass;\n\n    public WebServiceTest() {}\n\n    @Test\n    public static void Test1() { ... }\n\n    @Test\n    public static void Test2() { ... }\n\n    ....\n\n    @Test\n    public static void TestN() { ... }\n}\n</code></pre>\n\n<p>And then, from another class, invoke those tests with doing something like this:</p>\n\n<pre><code>public class LoginTest { //To test the login web service, for example\n\n    public static void main(String[] args) {\n\n        WebServiceTest loginTest = New WebServiceTest();\n\n        loginTest.setServiceURL(\"172.0.0.1/services/login\");\n        loginTest.setRequestJson(\"{\"user\":\"ale\",\"pass\":\"1234\"}\");\n        ...\n        loginTest.runTests();\n    }\n}\n</code></pre>\n\n<p>I know it's not that simple, but any ideas on how to get there?\nThanks in advance!!</p>\n"},{"tags":["python","unit-testing","logging"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":8607767,"title":"How to run initialization code before tests when using Python's unittest module as a testrunner?","body":"<p>How can a user of a library run his own initialization code (setting debug levels of loggers for example) before running tests supplied with the library? Python's <code>unittest</code> module is used as a testrunner.</p>\n"},{"tags":["c#","unit-testing","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13088837,"title":"Unit Tests for Methods that use Generic Types","body":"<p>I'm using Microsoft Unit Test for unit testing my .NET Classes. I have method that I uses generic types and when I use the wizard, it creates two methods, one is a helper using a GenericParameterHelper. </p>\n\n<p>I can update the test to a specific type but I'm wondering what the best approach to test generics would be.</p>\n\n<p>Here are the two test methods that the Unit Test Wizard produced:</p>\n\n<pre><code> public void ContainsKeyTestHelper&lt;TKey, TValue&gt;()\n    {\n        IDictionary&lt;TKey, TValue&gt; dictionaryToWrap = null; // TODO: Initialize to an appropriate value\n        ReadOnlyDictionary&lt;TKey, TValue&gt; target = new ReadOnlyDictionary&lt;TKey, TValue&gt;(dictionaryToWrap); // TODO: Initialize to an appropriate value\n        TKey key = default(TKey); // TODO: Initialize to an appropriate value\n        bool expected = false; // TODO: Initialize to an appropriate value\n        bool actual;\n        actual = target.ContainsKey(key);\n        Assert.AreEqual(expected, actual);\n    }\n\n    [TestMethod()]\n    public void ContainsKeyTest()\n    {\n        ContainsKeyTestHelper&lt;GenericParameterHelper, GenericParameterHelper&gt;();\n    }\n</code></pre>\n\n<p>The method I'm testing (from the custom ReadOnlyDictionary (<a href=\"http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=29\" rel=\"nofollow\">http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=29</a>)):</p>\n\n<pre><code>/// &lt;summary&gt;Determines whether the &lt;see cref=\"T:ReadOnlyDictionary`2\" /&gt;\n/// contains the specified key.&lt;/summary&gt;\n/// &lt;returns&gt;\n/// True if the &lt;see cref=\"T:ReadOnlyDictionary`2\" /&gt; contains\n/// an element with the specified key; otherwise, false.\n/// &lt;/returns&gt;\n/// &lt;param name=\"key\"&gt;The key to locate in the\n/// &lt;see cref=\"T:ReadOnlyDictionary`2\"&gt;&lt;/see&gt;.&lt;/param&gt;\n/// &lt;exception cref=\"T:System.ArgumentNullException\"&gt;\n/// Thrown when the key is null.\n/// &lt;/exception&gt;\npublic bool ContainsKey(TKey key)\n{\n    return this.source.ContainsKey(key);\n}\n</code></pre>\n\n<p>What value should I use to initialize each of the values that have a TODO? </p>\n"},{"tags":["unit-testing","mocking","moq","visual-studio-2012"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":240,"score":2,"question_id":12269409,"title":"Visual Studio 2012 Fakes - How do I verify a method was called?","body":"<p>Coming from using Moq, I'm used to being able to Setup mocks as Verifiable.  As you know, this is handy when you want to ensure your code under test actually called a method on a dependency.</p>\n\n<p>e.g. in Moq:</p>\n\n<pre><code>// Set up the Moq mock to be verified\nmockDependency.Setup(x =&gt; x.SomethingImportantToKnow()).Verifiable(\"Darn, this did not get called.\");\ntarget = new ClassUnderTest(mockDependency);\n// Act on the object under test, using the mock dependency\ntarget.DoThingsThatShouldUseTheDependency();\n// Verify the mock was called.\nmockDependency.Verify();\n</code></pre>\n\n<p>I've been using VS2012's \"Fakes Framework\" (for lack of knowing a better name for it), which is quite slick and I'm starting to prefer it to Moq, as it seems a bit more expressive and makes Shims easy.  However, I can't figure out how to reproduce behavior similar to Moq's Verifiable/Verify implementation.  I found the InstanceObserver property on the Stubs, which sounds like it might be what I want, but there's no documentation as of 9/4/12, and I'm not clear how to use it, if it's even the right thing.</p>\n\n<p>Can anyone point me in the right direction on doing something like Moq Verifiable/Verify with VS2012's Fakes?</p>\n\n<p>-- 9/5/12 Edit --\nI realized a solution to the problem, but I'd still like to know if there's a built-in way to do it with VS2012 Fakes.  I'll leave this open a little while for someone to claim if they can.  Here's the basic idea I have (apologies if it doesn't compile).</p>\n\n<pre><code>[TestClass]\npublic class ClassUnderTestTests\n{\n    private class Arrangements\n    {\n        public ClassUnderTest Target;\n        public bool SomethingImportantToKnowWasCalled = false;  // Create a flag!\n        public Arrangements()\n        {\n            var mockDependency = new Fakes.StubIDependency  // Fakes sweetness.\n            {\n                SomethingImportantToKnow = () =&gt; { SomethingImportantToKnowWasCalled = true; }  // Set the flag!\n            }\n            Target = new ClassUnderTest(mockDependency);\n        }\n    }\n\n    [TestMethod]\n    public void DoThingThatShouldUseTheDependency_Condition_Result()\n    {\n        // arrange\n        var arrangements = new Arrangements();\n        // act\n        arrangements.Target.DoThingThatShouldUseTheDependency();\n        // assert\n        Assert.IsTrue(arrangements.SomethingImportantToKnowWasCalled);  // Voila!\n    }\n}\n</code></pre>\n\n<p>-- 9/5/12 End edit --</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","unit-testing","mocking","phpunit"],"answer_count":5,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":2502,"score":11,"question_id":3367513,"title":"PHPUnit \"Mocked method does not exist.\" when using $mock->expects($this->at(...))","body":"<p>I've run into a strange issue with PHPUnit mock objects. I have a method that should be called twice, so I'm using the \"at\" matcher. This works for the first time the method is called, but for some reason, the second time it's called, I get \"Mocked method does not exist.\". I've used the \"at\" matcher before and have never run into this.</p>\n\n<p>My code looks something like:</p>\n\n<pre><code>class MyTest extends PHPUnit_Framework_TestCase\n{\n    ...\n\n    public function testThis()\n    {\n        $mock = $this-&gt;getMock('MyClass', array('exists', 'another_method', '...'));\n        $mock-&gt;expects($this-&gt;at(0))\n             -&gt;method('exists')\n             -&gt;with($this-&gt;equalTo('foo'))\n             -&gt;will($this-&gt;returnValue(true));\n\n        $mock-&gt;expects($this-&gt;at(1))\n             -&gt;method('exists')\n             -&gt;with($this-&gt;equalTo('bar'))\n             -&gt;will($this-&gt;returnValue(false));\n    }\n\n    ...\n}\n</code></pre>\n\n<p>When I run the test, I get:</p>\n\n<pre><code>Expectation failed for method name is equal to &lt;string:exists&gt; when invoked at sequence index 1.\nMocked method does not exist.\n</code></pre>\n\n<p>If I remove the second matcher, I do not get the error.</p>\n\n<p>Has anyone run into this before?</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","dependency-injection","erlang","mocking"],"answer_count":4,"favorite_count":6,"up_vote_count":15,"down_vote_count":0,"view_count":1269,"score":15,"question_id":1202539,"title":"How do I do dependency injection and mocks in erlang?","body":"<p>When writing code in Java, it is very helpful to embrace <a href=\"http://en.wikipedia.org/wiki/Object%5Fcomposition\" rel=\"nofollow\">composition</a> and <a href=\"http://en.wikipedia.org/wiki/Dependency%5Finjection\" rel=\"nofollow\">dependency injection</a> to make it possible and easy to do pure unit testing by mocking collaborating objects.</p>\n\n<p>I find that doing the same in Erlang is less straightforward and makes for dirtier code.</p>\n\n<p>That's likely to be my fault, as I'm quite new to Erlang and quite addicted to JUnit, EasyMock and java interfaces...</p>\n\n<p>Let's say I have this stupid function:</p>\n\n<pre><code>%% module mymod\nhandle_announce(Announce) -&gt;\n    AnnounceDetails = details_db:fetch_details(Announce),\n    AnnounceStats = stats_db:fetch_stats(Announce),\n    {AnnounceDetails, AnnounceStats}.\n</code></pre>\n\n<p>When unit testing <code>mymod</code>, I only want to prove that <code>details_db</code> and <code>stats_db</code> are invoked with the right parameters, and that the return values are the used correctly.\nThe ability od <code>details_db</code> and <code>stats_db</code> to generate correct value is tested in other places.</p>\n\n<p>To solve the problem I could refactor my code this way:</p>\n\n<pre><code>%% module mymod\nhandle_announce(Announce, [DetailsDb, StatsDb]) -&gt;\n    AnnounceDetails = DetailsDb:fetch_details(Announce),\n    AnnounceStats = StatsDb:fetch_stats(Announce),\n    {AnnounceDetails, AnnounceStats}.\n</code></pre>\n\n<p>And test it this way (basically stubbing the calls directly into the test module):</p>\n\n<pre><code>%% module mymod_test\nhandle_announce_test() -&gt;\n    R = mymod:handle_announce({announce, a_value}, [?MODULE, ?MODULE, ?MODULE]),\n    ?assertEqual({details,stats}, R).\n\nfetch_details({announce, a_value}) -&gt;\n    details.\n\nfetch_stats({announce, a_value}) -&gt;\n    stats.\n</code></pre>\n\n<p>It works, but the application code becomes dirty and I always have to carry around that ugly list of modules.</p>\n\n<p>I've tried a couple of mock libraries (<a href=\"http://sheyll.blogspot.com/2009/02/erlang-mock-erlymock.html\" rel=\"nofollow\">erlymock</a> and (<a href=\"http://charpi.net/blog/2008/10/09/enhanced-erlang-mock-implementation/\" rel=\"nofollow\">this other one</a>) but I wasn't satisfied.</p>\n\n<p>How do you unit test your erlang code? </p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","resharper","jasmine"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":338,"score":1,"question_id":11245016,"title":"Stack trace for Jasmine test with the Resharper 7 test runner","body":"<p>How do you get the Resharper 7 test runner to show the stacktrace for Jasmine tests.</p>\n\n<p>My setup is Resharper 7 (build in Jasmine) testrunner and PhantomJs. When executing any failing test the error message always ends with:</p>\n\n<pre><code>Exception doesn't have a stacktrace\n</code></pre>\n\n<p>In the 1.6 \"Lavender\" version of Phantom has added the feature to print the stacktrace when an error occurs. </p>\n\n<p>To replicate this just create a mytest.js file and add the following code to it:</p>\n\n<pre><code>describe(\"A suite\", function() {\n  it(\"contains spec with an expectation\", function() {\n    expect(true).toBe(false);\n  });\n});\n</code></pre>\n"},{"tags":["java","eclipse","unit-testing","junit","eclemma"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":12757559,"title":"Code coverage in Java with EclEmma not scanning expecting exception methods","body":"<p>I'm trying to get my code coverage in java, using Eclipse and EclEmma.</p>\n\n<p>My tests are using JUnit 4 and I've got some tests looking like this :</p>\n\n<pre><code>    @Test(expected = IllegalArgumentException.class)\n    public void createTime_withInvalidMinuteUnder0_throws(){\n    //Arrange\n    ...\n    //Act\n    Something triggering IllegalArgumentException Here       \n}\n</code></pre>\n\n<p>And EclEmma says that the test fails because there's an IllegalArgumentException being thrown. So it drops my code coverage indicator even though it's supposed to throw something. Is there an option to make it see that JUnit expected exception tag ?</p>\n\n<p>edit: I've found out that if you add the throw to the declaration of the test aswell, it works!</p>\n"},{"tags":["php","database","unit-testing","tdd","simpletest"],"answer_count":9,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":2374,"score":4,"question_id":175153,"title":"How do you set up database testing using the PHP SimpleTest framework","body":"<p>I am using SimpleTest, a PHP-based unit testing framework. I am testing new code that will handle storing and retrieving website comments from a database. I am at a loss for how to structure the project to test the database access code.</p>\n\n<p>I am looking for any suggestions as to best practices for testing db code in a PHP application. Examples are really great. Sites for further reading are great.</p>\n\n<p>Thank you kindly. :)</p>\n"},{"tags":["delphi","unit-testing","mocking"],"answer_count":5,"favorite_count":20,"up_vote_count":32,"down_vote_count":0,"view_count":2549,"score":32,"question_id":293755,"title":"What is your favorite Delphi mocking library?","body":"<p>I want to start using mock objects on my Delphi projects.</p>\n\n<p>After a quick google I've found those:</p>\n\n<ul>\n<li><a href=\"http://code.google.com/p/delphi-mock-wizard/\" rel=\"nofollow\">Delphi Mock Wizard</a> </li>\n<li><a href=\"http://sourceforge.net/projects/pascalmock/\" rel=\"nofollow\">PascalMock</a></li>\n</ul>\n\n<p>So my question is what one is your favourite and why?</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13078105,"title":"How to Unit Test SaveInfo method without saving to the Database","body":"<p>Here is my class:</p>\n\n<pre><code>public class AuditInfo\n{\n    public String ActionDescription { get; set; }\n    public String ActionWho { get; set; }\n    public BasicProjectProfile Project { get; set; }\n\n\n    public AuditInfo ()\n    { }\n\n    public void SaveInfo ()\n    {\n        using (CIHEntities _dbContext = new CIHEntities())\n        {\n            AuditInfoEntity aie = new AuditInfoEntity();\n            aie.ActionDescription = this.ActionDescription;\n            aie.ActionWhen = DateTime.Now;\n            if (this.ActionWho != null)\n            {\n                aie.ActionWho = this.ActionWho;\n            }\n            else\n            {\n                aie.ActionWho = \"Not Specified\";\n            }\n            aie.ProjectAssoc = _dbContext.ProjectEntity\n                .Where(r =&gt; r.Id == this.Project.Id)\n                .First();\n            _dbContext.SaveChanges();\n        }\n    }\n}\n</code></pre>\n\n<p><code>CIHEntities</code> is a Entity Framework Database.</p>\n\n<p>I would like to unit test the SaveInfo method but it shouldn't actually save to the Database. How Can this be done?</p>\n\n<p>Thanks</p>\n\n<p>Eric</p>\n"},{"tags":["unit-testing","tfs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13087884,"title":"What is the Connection between test case and unit test in TFS2012","body":"<p>Please help me to findout what is the relation between test cases and .net unit test? How we can uning the test cases to implement the unit testing in VS 2012? I am a new comer in .NET  please help me.</p>\n"},{"tags":["unit-testing","testing","rest","automated-tests"],"answer_count":9,"favorite_count":5,"up_vote_count":15,"down_vote_count":0,"view_count":14829,"score":15,"question_id":414875,"title":"Best tool/framework for testing a RESTful service","body":"<p>I'm looking for a framework or tool for testing RESTful services.  This seems like it shouldn't be hard, but the tools that I've found thus far assume things about my service that they probably shouldn't.</p>\n\n<p>What would be great is something that could make a request (like, HTTP POST) and then compare the result with an expected result.  I know that you can string together a few tools to do this but there has to be something easier since HTTP is super basic.</p>\n"},{"tags":[".net","unit-testing","internet-explorer","automation","watin"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1504,"score":4,"question_id":2464877,"title":"ASP.NET Unit Testing - WatiN and Windows 7 / Internet Explorer 8","body":"<p>Any tricks in getting WatiN to run on Win7/IE8?</p>\n\n<p>My code:</p>\n\n<pre><code>    browser = new IE();\n    browser.GoTo(\"http://testserver\");\n    browser.TextField(Find.ByName(\"txtUser\")).TypeText(\"tyndall\");\n</code></pre>\n\n<p>The third line never really runs and I get an error back:</p>\n\n<p>System.Runtime.InteropServices.COMException : The RPC server is unavailable. (Exception from HRESULT: 0x800706BA)</p>\n\n<p>The second line seems to run. IE8 appears and is navigated to the correct URL.</p>\n"},{"tags":["unit-testing","testing","tdd","mocking"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1432,"score":2,"question_id":396442,"title":"Strategies for Using Mock Objects when Unit Testing DAOs","body":"<p>I am curious what strategies folks have found for unit testing a data access class that does not involve loading (and presumably unloading) a real database for each test method? Are you using mock objects to represent the database connection? If so, are you required to pass the mock object into every method-under-test, and thus forcing the API to require a real db connection as a parameter to every method? Or, are you passing a mock object into the constructor at setup()?</p>\n\n<p>I have a class that is implementing what I believe is a Data Mapper (or maybe gateway) pattern. It is the class responsible for encapsulating SQL and returning (or saving) \"business objects\". The rest of the code can interact with this mapper layer and the business objects, with total disregard for the persistence model. This code needs to have/maintain, or just know about, a live db connection in the real system. Emulating this under test is tricky.</p>\n\n<p>The problem is how to unit test one of these mapper classes. The practice for creating a unit test under xUnit that I have seen most often is using the setup() method of the test to instantiate the SUT (system under test), usually your object that you're testing, and store it in a local variable in the test class. Then each of your test methods, interact with a unique instance of that SUT.</p>\n\n<p>The assumption though is that whatever you're doing in the setup() method will presumably be replicated somewhere in your real code. So, you have to think about the setup process as \"is this something I will want to repeatedly reproduce every time I need to use this object in the real world.\" If I am passing a db connection into the mapper's constructor in the setup that's fine, but doesn't that mean I'll have to pass a live db connection into the mapper object's constructor every time I want to really use one? Imagine that you'll have all kinds of places where you need to retrieve or store a business object and that to use a data mapper object, you need to pass in the db connection every time?</p>\n\n<p>In my case, I am trying to establish tests for these data mapper objects that achieve the following:</p>\n\n<ol>\n<li>Do not require the database connection object to be instantiated and passed into every method of the mapper class.</li>\n<li>Do not require that the test case either connect to a real db or create a real, but \"test\", db on the fly for each test method.</li>\n</ol>\n\n<p>I have basically seen two suggestions, pass the connection object as a parameter (which I have already addressed) or extend the SUT class just for the test and override whatever db connection setup process you have in the real world to use a mock system instead.</p>\n\n<p>I am curious if anyone else is facing these issues, with any language, and what you have done to solve them? Maybe there is something obvious that I am missing?</p>\n"},{"tags":["unit-testing","testing","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13074551,"title":"Why are specific asserts better than generic asserts, in PHPUnit?","body":"<p>Please excuse my ignorance; I am still new to the unit testing realm.</p>\n\n<p>Can someone explain why..</p>\n\n<p><code>$this-&gt;assertGreaterThan( 2, $result );</code></p>\n\n<p>..is better than..</p>\n\n<p><code>$this-&gt;assertTrue( $result &gt; 2 );</code></p>\n\n<p>..(and likewise, all the other specific assert methods)?</p>\n\n<p>Thanks!</p>\n"},{"tags":["unit-testing","java-ee","aop","spring-aop"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":14,"score":2,"question_id":13083074,"title":"Spring AbstractTransactionalDataSourceSpringContextTests - does not rollback data after test a method","body":"<blockquote>\n  <p>After running a unit test, data is not getting deleted from the\n  database.</p>\n</blockquote>\n\n<p>I have a problem with either AOP configuration or spring.\nI have written a unit test that extends class AbstractTransactionalDataSourceSpringContextTests.\nFor AOP configuration I have made a point-cut on the methods that are going to be tested , I have given this advice to the point-cut: </p>\n\n<pre><code>&lt;tx:advice id=\"newTxAdvice\" transaction-manager=\"transactionManager\"&gt;\n    &lt;tx:attributes&gt;\n        &lt;tx:method name=\"*\" propagation=\"REQUIRES_NEW\" /&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n</code></pre>\n\n<p>please tell me why data is not getting deleted, any help will be appreciable.\nThanks.</p>\n"},{"tags":["ruby-on-rails","unit-testing","rake"],"answer_count":5,"favorite_count":8,"up_vote_count":9,"down_vote_count":0,"view_count":2664,"score":9,"question_id":2645022,"title":"Rails - Populate test database with development data","body":"<p>Is there any trivial way to copy the data from developmenet database into the test one? I know theres a way to copy schema and recreate database, but is there any rake task to populate test database with development one?</p>\n"},{"tags":["unit-testing","selenium","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13058768,"title":"Is it possible to use Selenium / PHPUnit outside the browser?","body":"<p>Right now this is my workflow to write tests for a website:</p>\n\n<ol>\n<li>Record using Selenium IDE plugin in Firefox</li>\n<li>Export Test Case As >> PHP (PHP Unit)</li>\n<li>Run the tests on a Windows machine that has PHPUnit installed as well as the Selenium extension for it using this command:</li>\n</ol>\n\n<p><code>phpunit --verbose --log-junit some\\path\\result.xml some\\path\\test.php</code></p>\n\n<p>What this command does is runs the test and saves the output (assertions and failures) in a log file called result.xml. And all has been good.</p>\n\n<p>But now I have run into a need to test a part of the site that involves flash and I am using an application called Arthropod to capture the requests and responses coming to and from the flash component on the site.</p>\n\n<p><strong>Is there any way I can get selenium to to capture the text that appears on this program's interface?</strong></p>\n"},{"tags":["android","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":229,"score":2,"question_id":2765672,"title":"IntentFilter for address book","body":"<p>I have a question regarding the creation of an <code>IntentFilter</code>. I'm currently writing JUnit-tests for an Android application and want to make use of <code>ActivityMonitors</code>. To be more specific: I want to  create an <code>ActivityMonitor</code> which listens for calls to the address book as our Application requests the user to choose a contact from the address book. So I want to mock this by using an <code>ActivityMonitor</code>. This is what I have done so far:</p>\n\n<pre><code>ActivityMonitor addressBookMonitor = null;\ntry {\n        addressBookMonitor = getInstrumentation().addMonitor(new IntentFilter(Intent.ACTION_PICK,\"content://contacts/people/\"), null, false);\n    } catch (MalformedMimeTypeException e) {\n        e.printStackTrace();\n    }\n//code to open the address book\nActivity addressBook = getInstrumentation().waitForMonitorWithTimeout(addressBookMonitor, 250);\nassertNotNull(addressBook);\n</code></pre>\n\n<p>The problem is, that the assertion always fails although I can see the address book opening in front of our application. Even increasing the timeout value doesn't help. This leads me to the assumption, that my <code>ActivityMonitor</code>/<code>IntentFilter</code> is set up with wrong values.</p>\n\n<p>Maybe someone can help?</p>\n"},{"tags":["unit-testing","continuous-integration","jasmine","fixtures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13019215,"title":"Error while integrating html with testacularjs","body":"<p>How do I integrate (html) fixtures with testacular?  Is there any recommendation for performing DOM based tests or is it an anti-pattern?</p>\n\n<p>Objective : I am trying to test a custom module which parses the DOM tree and creates a new data structure. The DOM tree can be dynamic (like contents of a html/markdown editor) and hence is not a good candidate for end to end testing </p>\n\n<p>Problem : I am trying to use jasmine-jquery for this DOM testing  and in my testacular.conf.js, I have the section to allow loading of html files into the browser.  </p>\n\n<pre>\n<code>\n// list of files / patterns to load in the browser\nfiles = [\n  JASMINE,\n  JASMINE_ADAPTER,\n  'test/spec/**/*.js',\n  'test/fixtures/*.html' **/* Needs to be included here to be served */**\n];\n</code>\n</pre>\n\n<p>However in my test runner on the command line, I get the following error message when I drop the html fixture(even before I write any jasmine-jquery code to load the fixture):</p>\n\n<pre>\n<code>\nChrome 22.0 **ERROR**\n    Uncaught SyntaxError: Unexpected token &lt; at /Users/myUser/myProject/test/fixtures/fixture_template.html:1 Chrome 22.0: Executed 0 of 0 ERROR (0.143 secs / 0 secs)\n</code>\n</pre>\n\n<p><em><strong>EDIT</em></strong> : Another way to ask the same question : How do I get testacular to serve html and not blow up the test runner?</p>\n\n<p>As I mentioned above, I need to include the 'test/fixtures/*.html\" in the config but the test runner just blows up.</p>\n"},{"tags":["android","unit-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4487,"score":2,"question_id":4577091,"title":"com.example.helloandroid.R.id cannot be resolved","body":"<p>I followed the <a href=\"http://developer.android.com/resources/tutorials/testing/helloandroid_test.html#CreateSetUp\" rel=\"nofollow\">Hello, Testing tutorial</a> to the letter.</p>\n\n<p>Yet, the following line produces a \"com.example.helloandroid.R.id cannot be resolved\" error:</p>\n\n<pre><code>  mView = (TextView) mActivity.findViewById(com.example.helloandroid.R.id.textview);\n</code></pre>\n\n<p>Eclipse amazingly suggests 2 quick fixes:</p>\n\n<ol>\n<li>Create field 'id' in type 'R'</li>\n<li>Create constant 'id' in type 'R'</li>\n</ol>\n\n<p>Can you help me understand what these fixes mean? Are these really the correct fixes? (why didn't the tutorial provide them, too?)</p>\n"},{"tags":["ios","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13080487,"title":"iOS: how to do indeterminate asynchronous unit test with GHUnit?","body":"<p>I use GHUnit for unit testing, and wrote subclasses of GHAsyncTestCase, but in my case, the web service is not like an active service request where you send request and expect to receive an answer, instead of this, my web service is a passive type service where you subscribe to a channel then it can send you message, but there is no guarantee about how frequent the server pushes messages to subscribers, in this case, say 50 secs after subscribing, server pushes a message and another message after 30 secs, then should I do:</p>\n\n<pre><code>[self waitForStatus:kGHUnitWaitStatusSuccess timeout:50.0f];\n</code></pre>\n\n<p>to verify the first message, or is there any smart way for doing this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":175,"score":1,"question_id":9526932,"title":"PHPunit: How to mock a method that has a parameter AND a returned value","body":"<p>Using PHPUnit, I wonder if we can mock an object to test if a method is called with an expected parameter, <strong>and</strong> a returned value?</p>\n\n<p>In the <a href=\"http://www.phpunit.de/manual/current/en/test-doubles.html#test-doubles.mock-objects\" rel=\"nofollow\">doc</a>, there are examples with passing parameter, or returned value, but not <strong>both</strong>...</p>\n\n<p>I tried using this:</p>\n\n<pre>\n// My object to test\n$hoard = new Hoard();\n// Mock objects used as parameters\n$item = $this->getMock('Item');\n$user = $this->getMock('User', array('removeItem'));\n...\n$user->expects($this->once())\n     ->method('removeItem')\n     ->with($this->equalTo($item));\n$this->assertTrue($hoard->removeItemFromUser($item, $user));\n</pre>\n\n<p><strong>My assertion fails</strong> because Hoard::removeItemFromUser() should return the returned value of User::removeItem(), which is true.</p>\n\n<pre>\n$user->expects($this->once())\n     ->method('removeItem')\n     ->with($this->equalTo($item), $this->returnValue(true));\n$this->assertTrue($hoard->removeItemFromUser($item, $user));\n</pre>\n\n<p>Also fails with the following message: \"<strong>Parameter count for invocation User::removeItem(Mock_Item_767aa2db Object (...)) is too low.</strong>\"</p>\n\n<pre>\n$user->expects($this->once())\n     ->method('removeItem')\n     ->with($this->equalTo($item))\n     ->with($this->returnValue(true));\n$this->assertTrue($hoard->removeItemFromUser($item, $user));\n</pre>\n\n<p>Also fails with the following message: \"<strong>PHPUnit_Framework_Exception: Parameter matcher is already defined, cannot redefine</strong>\"</p>\n\n<p>What should I do to test this method correctly.</p>\n\n<p>thank you.</p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13079067,"title":"How do you nunit TestFixture in same cs file as project?","body":"<p>In class they taught us to add a test fixture to the same namespace as the project we're testing. For example:</p>\n\n<pre><code>namespace Project\n{\n    class Decrypt : Cipher\n    {\n        public string Execute()\n        {\n            //Code here\n        }\n    }\n    [TestFixture]\n    {\n        [Test]\n        public void test1()\n        {\n            //Code here\n        }\n    }\n}\n</code></pre>\n\n<p>I noticed in the c# menu on my uni computer, there was a 'Test' section (I couldn't get it to run there either, I don't know how). On this old 32b computer there isn't. I've installed NUnit-2.6.2.msi but when I try to run it, it says \"Unable to find a version of runtime to run this application\"\nSo I think I have two problems: </p>\n\n<ul>\n<li><p>installing Nunit (I already have referenced the .dlls from my project separately)</p></li>\n<li><p>using Nunit (even on a computer with it installed properly)</p></li>\n</ul>\n"},{"tags":["python","django","unit-testing","testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":65,"score":5,"question_id":13073281,"title":"How to mock python's datetime.now() in a class method for unit testing?","body":"<p>I'm trying to write tests for a class that has methods like:</p>\n\n<pre><code>import datetime\nimport pytz\n\nclass MyClass:\n    def get_now(self, timezone):\n        return datetime.datetime.now(timezone)\n\n    def do_many_things(self, tz_string='Europe/London'):\n        tz = pytz.timezone(tz_string)\n        localtime_now = self.get_now(tz)\n        ...\n        return things\n</code></pre>\n\n<p>I want to test it, and to do so I need to make sure that the <code>datetime.datetime.now()</code> call returns something predictable.</p>\n\n<p>I've been reading lots of examples of using <a href=\"http://www.voidspace.org.uk/python/mock/\">Mock</a> in tests, but haven't found anything quite like what I need, and I can't work out how to use it in my tests.</p>\n\n<p>I separated the <code>get_now()</code> method out in case it's easier to mock that, instead of <code>datetime.datetime.now()</code>, but I'm still stumped. Any thoughts on how to write UnitTests for this using Mock? (This is all in Django, fwiw; I'm not sure if this makes a difference in this case.)</p>\n"},{"tags":["python","unit-testing","sockets"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":120,"score":3,"question_id":12925227,"title":"How to kill a socket in unit tests for reconnect test","body":"<p>I'm trying to test some code that reconnects to a server after a disconnect. This works perfectly fine outside the tests, but it fails to acknowledge that the socket has disconnected when running the tests.</p>\n\n<p>I'm using a Gevent Stream Server to mock a real listening server:</p>\n\n<pre><code>import gevent.server\nfrom gevent import queue\n\n\nclass TestServer(gevent.server.StreamServer):\n\n    def __init__(self, *args, **kwargs):\n        super(TestServer, self).__init__(*args, **kwargs)\n        self.sockets = {}\n\n    def handle(self, socket, address):\n        self.sockets[address] = (socket, queue.Queue())\n        socket.sendall('testing the connection\\r\\n')\n        gevent.spawn(self.recv, address)\n\n    def recv(self, address):\n        socket = self.sockets[address][0]\n        queue = self.sockets[address][1]\n        print 'Connection accepted %s:%d' % address\n        try:\n            for data in socket.recv(1024):\n                queue.put(data)\n        except:\n            pass\n\n    def murder(self):\n        self.stop()\n        for sock in self.sockets.iteritems():\n            print sock\n            sock[1][0].shutdown(socket.SHUT_RDWR)\n            sock[1][0].close()\n        self.sockets = {}\n\n\ndef run_server():\n    test_server = TestServer(('127.0.0.1', 10666))\n    test_server.start()\n    return test_server\n</code></pre>\n\n<p>And my test looks like this:</p>\n\n<pre><code>def test_can_reconnect(self):\n    test_server = run_server()\n    client_config = {'host': '127.0.0.1', 'port': 10666}\n    client = Connection('test client', client_config, get_config())\n    client.connect()\n    assert client.socket_connected\n    test_server.murder()\n    #time.sleep(4) #tried sleeping. no dice.\n    assert not client.socket_connected\n    assert client.server_disconnect\n    test_server = run_server()\n    client.reconnect()\n    assert client.socket_connected\n</code></pre>\n\n<p>It fails at <code>assert not client.socket_connected</code>.</p>\n\n<p>I detect for \"not data\" during recv. If it's None, then I set some variables so that other code can decide whether or not to reconnect (don't reconnect if it was a user_disconnect and so on). This behavior works and has always worked for me in the past, I've just never tried to make a test for it until now. Is there something odd with socket connections and local function scopes or something? it's like the connection still exists even after stopping the server.</p>\n\n<p>The code I'm trying to test is open: <a href=\"https://github.com/kyleterry/tenyks.git\" rel=\"nofollow\">https://github.com/kyleterry/tenyks.git</a></p>\n\n<p>If you run the tests, you will see the one I'm trying to fix fail.</p>\n"},{"tags":["javascript","unit-testing","javascript-events","buster.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13077477,"title":"How to fire DOM events when testing with busterjs","body":"<p>How can I trigger DOM events on an element when running in an headless browser. I know I could use jquerys <code>trigger</code> but as I dont used for this project I don't want to use it in the test too.</p>\n"},{"tags":["unit-testing","maven-2","testng","junit4","maven-surefire-plugin"],"answer_count":4,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":5246,"score":11,"question_id":1232853,"title":"How to execute JUnit and TestNG tests in same project using maven-surefire-plugin?","body":"<p>Right now I have both type of tests but when I say \"mvn test\" it only executes TestNG tests and not Junit. I want to execute both one after another. Any Idea ?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":35,"score":4,"question_id":13076506,"title":"Looking for assertURLEquals","body":"<p>During a unittest I would like to compare a generated URL with a static one defined in the test. For this comparison it would be good to have a TestCase.assertURLEqual or similar which would let you compare two URLs in string format and result in True if all query and fragment components were present and equal but not necessarily in order.</p>\n\n<p>Before I go implement this myself, is this feature around already?</p>\n"},{"tags":["spring","unit-testing","spring-mvc","spring-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":314,"score":0,"question_id":11649036,"title":"@ExceptionHandler not working with Spring MVC 3.1 unit test","body":"<p>I'm able to do nearly all of the unit test on my Spring MVC controller by instantiating the object outside of the normal servlet context. But I would like to be able to run some tests to insure that my object serialization is working properly, headers are being generated, etc.</p>\n\n<p>To run a test inside the servlet context, I create a modified context file so that various beans are NOT constructed, then I create mocked versions of those beans in my test case using EasyMock. I then invoke my handler with code like this, and get most of what I need from the MockHttpServletResponse.</p>\n\n<p>I think this gets the essence of it:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"file:root-context.xml\",\n                                    \"file:junit-servlet-context.xml\" } )\n\npublic class HomeControllerConfigHandlerHttp {\n@Autowired\nprivate RequestMappingHandlerAdapter handlerAdapter;\n\n@Autowired\nprivate RequestMappingHandlerMapping handlerMapping;\n    ... //miscellaneous setup\npublic void someTest() throws Exception\n{\n    MockHttpServletRequest request = new MockHttpServletRequest();\n    request.setMethod(\"GET\");\n    request.setRequestURI(\"/config\");\n    request.addParameter(\"foo\", \"bar\");\n    request.addParameter(\"device\", \"oakmont\");\n    MockHttpServletResponse response = new MockHttpServletResponse();\n    Object handler = handlerMapping.getHandler(request).getHandler();\n    replay(dblient);\n    expect(serviceClient.checkDevice(\"oakmont\")).andReturn( true );\n    serviceClient.destroy();\n    replay(serviceClient);\n    ModelAndView modelAndView = handlerAdapter.handle(request, response, handler);\n    String content = new String( response.getContentAsByteArray() );\n    Assert.assertEquals(content, \"Expected configuration\");\n    String content_type = response.getHeader(\"Content-type\");\n    Assert.assertEquals( content_type, \"text/plain\");\n    int status = response.getStatus();\n    Assert.assertEquals(status,  200 );\n</code></pre>\n\n<p>This does what I expect it to do, but there is one catch. I do a lot of error handling in my controller with an @ExceptionHandler. It is an easy way to back out of an error case in any handler, and it gives me a consistent way of exposing errors.</p>\n\n<p>The @ExceptionHandler works fine in normal servlet deployment, but in this unit test mockup it does not get invoked when I throw an exception. Stepping into the Spring code is a bit of a challenge for me, I'm new to it and so I get lost pretty quickly. However, it looks like in the normal servlet environment, there is an exception handler that looks for an annotated handler. When running under SpringJUnit4ClassRunner, the exception isn't processed the same way.</p>\n\n<p>If there is a way to fix this, I'd like to do it. I've avoided spring-test-mvc because of a lack of pioneer spirit, but if someone tells me that it can manage this just fine, I'll try that instead.</p>\n\n<p>The contents of my junit-servlet-context.xml file are nearly identical to the servlet-context.xml file created by the Spring Template MVC wizard. The only difference is the addition of an exclude-filter that is used to prevent instantiation of a @Component that creates a few singletons used by my controller.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans:beans xmlns=\"http://www.springframework.org/schema/mvc\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:beans=\"http://www.springframework.org/schema/beans\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n&lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n&lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n&lt;annotation-driven /&gt;\n\n&lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n&lt;resources mapping=\"/resources/**\" location=\"/resources/\" /&gt;\n\n&lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n&lt;beans:bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n    &lt;beans:property name=\"prefix\" value=\"/WEB-INF/views/\" /&gt;\n    &lt;beans:property name=\"suffix\" value=\".jsp\" /&gt;\n&lt;/beans:bean&gt;\n&lt;context:component-scan base-package=\"com.cisco.onplus.home.dmz\" &gt;\n&lt;context:exclude-filter type=\"regex\" expression=\".*InitDatabase.*\"/&gt;\n&lt;/context:component-scan&gt;   \n&lt;/beans:beans&gt;\n</code></pre>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":42,"score":4,"question_id":13036641,"title":"Is it possible to have multiple fixture files per model in rails 3.2?","body":"<p>In Rails 3.2, is it possible to have multiple fixture files for a given ActiveRecord object? </p>\n\n<p>The client is requiring the test data be written in fixtures but also wants them to be manageable. I'd like to split up the fixtures a bit by introducing a 2nd set that the originals would include/require/render whatever. </p>\n\n<p>I haven't been able to find anything via Google on how to do it and fixtures are not my cup of tea. Thanks in advance.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13003377,"title":"How to test with deferred execution?","body":"<p>There is a <code>IEnumerable&lt;IDomainInterface&gt;</code> passed into my class and I want to test whether a specific method was called for every item:</p>\n\n<pre><code>// in class\nvar result = _items.SelectMany (x =&gt; x.Get (something));\n\n// in test\ndomainInterfaceMock.Expect(x =&gt; x.Get (something));\n</code></pre>\n\n<p>The test only passes if I append <code>ToArray()</code> to the <code>SelectMany()</code> statement...</p>\n\n<p>How should I deal with such situations?</p>\n"},{"tags":["unit-testing","monotouch","nunit","touch.unit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13071839,"title":"MonoTouch and NUnitLite: what is the \"Host\" setting for?","body":"<p>I'm using NUnitLite quite a lot but have always been wondering what the host settings are about in the options menu. The options aren't explained in the documentation here: </p>\n\n<p><a href=\"http://docs.xamarin.com/ios/tutorials/Unit_Testing\" rel=\"nofollow\">http://docs.xamarin.com/ios/tutorials/Unit_Testing</a></p>\n\n<p>Can somebody shed some light on this feature that might maybe change my life forever, if only I knew about it? </p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13074303,"title":"Mock void Method That Sets Private Setter in Implementations","body":"<p>I have an interface that looks like this...</p>\n\n<pre><code>public interface ITempFileNameBuilder\n{\n    string DirectoryPath { get; }\n\n    string FileName { get; }\n\n    void GenerateNewFileName();\n}\n</code></pre>\n\n<p>... and I want to mock the <code>GenerateNewFileName</code> method so that it sets the <code>FileName</code> property to something new. I know this is an odd request because obviously there is no <code>set</code> defined in the interface because it's declared as <code>private set;</code> in the two implementations. I did that so you <strong>must</strong> call <code>GenerateNewFileName</code> to set the <code>FileName</code> property to something new.</p>\n\n<p>Is this possible?</p>\n\n<h2>Edit</h2>\n\n<p>Here is the unit of work I'm trying to test.</p>\n\n<pre><code>public void StartRecording(string claimNo, string ip_no, string ip_name, IWaveIn input, Stream writer)\n{\n    if (this.IsRecording)\n    {\n        return;\n    }\n\n    if (_input != null)\n    {\n        _input.Dispose();\n    }\n    _input = input;\n\n    _input.WaveFormat = _waveFormat;\n    _input.DataAvailable += (s, args) =&gt;\n    {\n        _writer.Write(args.Buffer, 0, args.BytesRecorded);\n        byte[] buffer = args.Buffer;\n        for (int index = 0; index &lt; args.BytesRecorded; index += 2)\n        {\n            short sample = (short)((buffer[index + 1] &lt;&lt; 8) | buffer[index + 0]);\n            float sample32 = sample / 32768f;\n            _aggregator.Add(sample32);\n        }\n\n        OnDataAvailable(args);\n    };\n    _input.RecordingStopped += (s, args) =&gt;\n    {\n        _input.Dispose();\n        _writer.Dispose();\n\n        OnRecordingStopped(args);\n    };\n\n    if (this.CurrentRecording != null)\n    {\n        _tempFileNameBuilder.GenerateNewFileName();\n    }\n\n    this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name,\n        _tempFileNameBuilder.FileName,\n        _recordingDeployer,\n        _recordingCompressor));\n    if (this.MicrophoneLevel == default(float))\n    {\n        this.MicrophoneLevel = .75f;\n    }\n\n    _aggregator.Reset();\n    _writer = writer;\n\n    _input.StartRecording();\n    this.IsRecording = true;\n}\n</code></pre>\n\n<p>And the goal of this unit test is to ensure that the <code>FileName</code> of the <code>CurrentRecording</code> and <code>LastRecording</code> are in fact different. It's a regression test based on a bug we found earlier. The bug was happening because the <code>FileName</code> property on the <code>RecordingTrack</code> was not being <strong>set</strong> but rather was just returning the current <code>FileName</code> from the <code>ITempFileNameBuilder</code> instance and so the idea is to ensure that <code>GenerateNewFileName</code> was called <strong>and</strong> ensure that the <strong>set</strong> for the <code>TempFileName</code> on the recording track was called.</p>\n\n<p>However, the <strong>set</strong> on the <code>TempFileName</code> on the <code>RecordingTrack</code> is private too, it's done in the constructor, so maybe this isn't really a unit test and more so an integration test?</p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13073419,"title":"JUnit: Run one test with different configurations","body":"<p>I have 2 test methods, and i need to run them with different configurations</p>\n\n<pre><code>myTest() {\n    .....\n    .....\n}\n\n@Test\nmyTest_c1() {\n    setConf1();\n    myTest();\n}\n\n@Test\nmyTest_c2() {\n    setConf2();\n    myTest();\n}\n\n//------------------\n\nnextTest() {\n    .....\n    .....\n}\n\n@Test\nnextTest_c1() {\n    setConf1();\n    nextTest();\n}\n\n@Test\nnextTest_c2() {\n    setConf2();\n    nextTest();\n}\n</code></pre>\n\n<p>I cannot run them both from one config (as in code below) because i need separate methods for tosca execution.</p>\n\n<pre><code>@Test\ntests_c1() {\n    setConf1();\n    myTest()\n    nextTest();\n}\n</code></pre>\n\n<p>I don't want to write those 2 methods to run each test, how can i solve this?</p>\n\n<p>First i thought to write custom annotation</p>\n\n<pre><code>@Test\n@RunWithBothConf\nmyTest() {\n   ....\n}\n</code></pre>\n\n<p>But maybe there are any other solutions for this? </p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13061581,"title":"Reusing mock behavior / best practice in Mockito?","body":"<p>I'll preface this with the background that I am very green and don't have much experience with testing in general, and have never used a mocking framework before.</p>\n\n<p>I am writing unit tests for code that hits a lot of different web services, which I have mocked.  Many of my tests verify the result of a call where all of my service calls are successful except a call to ServiceX.  My first instinct was to set up happy-path behavior for all mocks in a @Before block and then modify the mock behavior for each test.</p>\n\n<pre><code>@Before\npublic void init(){\n    when(serviceA.doSomething()).thenReturn(true);\n    when(serviceB.doSomething()).thenReturn(true);\n    when(serviceC.doSomething()).thenReturn(true);\n    when(serviceD.doSomething()).thenReturn(true);\n    when(serviceE.doSomething()).thenReturn(true);\n}\n\n@Test\npublic void testDoBusinessSuccess(){\n    String result = businessLogic.doBusiness();\n    assertThat(result, is(\"success\"));\n}\n\n@Test\npublic void testDoBusinessFailureWhenServiceAFails(){\n    when(serviceA.doSomething()).thenReturn(false);\n\n    String result = businessLogic.doBusiness();\n    assertThat(result, is(\"service A is down!\"));\n}\n\n@Test\npublic void testDoBusinessFailureWhenServiceBFails(){\n    when(serviceB.doSomething()).thenReturn(false);\n\n...\n</code></pre>\n\n<p>which makes each test case succinct, and it is easy to see what is being tested, since I only specify the behavior which deviates from the norm.  </p>\n\n<p>But I suspect that this is not how Mockito wants me to set up mock behaviors, because when I tried to verify that a failure in ServiceB means that ServiceC is never hit, I realized that my calls to <code>when(serviceC.doSomething())</code> in the @Before counted as invocations on serviceC.  That is, my <code>verifyZeroInteractions(serviceC)</code> always failed because I had called <code>when(serviceC.doSomething()).thenReturn(true)</code>, even when the test case never touched serviceC otherwise.</p>\n\n<p>So what is the best practice?  Am I better off just explicitly setting up the behavior for every mock in every test, even though I'd be repeating nearly the same 5 lines all over the place? </p>\n"},{"tags":["unit-testing","nunit","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13072725,"title":"How to properly fake IQueryable<T> from Repository using Moq?","body":"<p>I have a Class that takes an IRepository in its constructor like this. </p>\n\n<pre><code>    public class UserService\n    {\n       public IRepository&lt;User&gt; _repo { get; set; }\n\n       public UserService(IRepository&lt;User&gt; repo = null)\n       {\n        _repo = repo ?? new UserRepository();\n       }\n</code></pre>\n\n<p>and has a method that looks like this</p>\n\n<pre><code>public bool IsUserActive(email string)\n{\n   //The method actually does more but to keep it simple lets imagine it does this\n   User user = _repo.Find(u =&gt; u.Email == email).First();\n   return user.IsActive;\n}\n</code></pre>\n\n<p>the IRepository looks like this.</p>\n\n<pre><code>public interface IRepository&lt;T&gt; : IDisposable where T : IEntity\n{\n    void InsertOrUpdate(T entity);\n    void Delete(T entity);\n    IQueryable&lt;T&gt; Find(Func&lt;T, bool&gt; query);\n    T Find(int id);\n    void Save();\n}\n</code></pre>\n\n<p>I would like to Test the IsUserActive method and make sure it retuns false it the IsActive field of the user is false and vice versa.</p>\n\n<p>I am try the following. </p>\n\n<pre><code>    [Test]\n    public void IsUserActive_EmailThatWillReturnInactiveUser_ReturnsFalse()\n    {\n        //Arrange\n        var fakeUserRepo = new Mock&lt;IRepository&lt;User&gt;&gt;();\n        var query = new Func&lt;User, bool&gt;(u =&gt; u.Email == \"AnyString\");\n        var listOfMatchingUsers = new List&lt;User&gt;() \n        {\n                    new User \n                    { \n                        Email = \"AnyString\", \n                        IsActive = False \n                    }\n        };\n\n        IQueryable&lt;User&gt; queryableUsers = listOfMatchingUsers.AsQueryable();\n\n        fakeUserRepo.Setup(r =&gt; r.Find(query)).Returns(queryableUsers);\n\n        var userService = new UserService(fakeUserRepo.Object);\n\n        //Act\n        var result = userService.IsUserActive(\"AnyString\");\n\n        //Assert\n        Assert.IsFalse(result);\n    }\n</code></pre>\n\n<p>When I run in NUnit I get the Error \"Sequence Contains No Elements\" on this line</p>\n\n<pre><code>var result = userService.IsUserActive(\"AnyString\");\n</code></pre>\n\n<p>Where am I going wrong?</p>\n"},{"tags":["unit-testing","scala","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":11871124,"title":"Mock not recognized in IntelliJ while using Scala","body":"<pre><code>@RunWith(classOf[MockitoJUnitRunner])\nclass ScalaTest {\n\n  var x  = mock[java.util.Map]\n  val y  = mock[ClassA]\n  val z  = mock[ClassB]\n}\n</code></pre>\n\n<p>No matter what dependencies I set in my pom file I am not able to get the Mock to work. The compiler just says cannot resolve the symbol <code>Mock</code> and <code>ClassOf</code>. I have shown my dependencies below:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.scalamock&lt;/groupId&gt;\n  &lt;artifactId&gt;scalamock-scalatest-support_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;2.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.scalamock&lt;/groupId&gt;\n  &lt;artifactId&gt;scalamock-junit3-support_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;2.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And the test dependency is:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.scalatest&lt;/groupId&gt;\n  &lt;artifactId&gt;scalatest_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;2.0.M3&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n  &lt;version&gt;1.9.0&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>These are my imports:</p>\n\n<pre><code>import org.junit.{Test, Before}\nimport org.junit.runner.RunWith\nimport org.mockito.runners.MockitoJUnitRunner\n</code></pre>\n\n<p>Any suggestions??</p>\n"},{"tags":["sqlite","unit-testing","nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13069866,"title":"Prepopulating in memory SQLite database for Nhibernate testing","body":"<p>Currently, I have a unit test framework where I'm using a SQLite database in memory with NHibernate for unit testing. Each unit test runs in it's own session to ensure independence. For the most part, this works awesome, but as I'm approaching 150 tests, it's starting to run a little slow. The main reason for this, is that prior to each test I have to insert a good bit of data in the database.</p>\n\n<p>Basically my application is a workflow app, and we store alot of information about the workflow (number of steps, fields on each step, etc.) in the database. The application can't run unless this stuff is there, so it's required for my tests.</p>\n\n<p>At this point about 4 minutes of my total test time is spent on populating the database before each unit test. I'd love to make this population happen once per test execution, but since the in memory database is destroyed when the session is closed, I'm not sure how. Any suggestions?</p>\n"},{"tags":["java","unit-testing","junit","tdd","testng"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":13068954,"title":"considering NullPointerException as a unit test failure: is it good practice?","body":"<p>assume you have a unit test that contains these lines</p>\n\n<pre><code>assertNotNull(someVal);\nassertNotEmpty(someVal);\n</code></pre>\n\n<p>This obviously checks that someVal is not null and is populated with something.</p>\n\n<p>The question is, is the first line necessary and does it add anything to the test? Should we not just have the second line, and if it's null it will throw a null pointer exception which still indicates a failing unit test (but not a failing assertion).</p>\n\n<p>What's the best practice in such simple cases?</p>\n"},{"tags":["python","unit-testing","testing","subclass","stack-trace"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":12583015,"title":"How can I hide my stack frames in a TestCase subclass?","body":"<p>I want to add a custom assert method to a <code>TestCase</code> subclass.  I tried to copy my implementation from the <code>unittest</code> module so that it would match the behaviour of the regular <code>TestCase</code> as closely as possible.  (I would prefer to just delegate to <code>self.assertEqual()</code> but this causes even more backtrace noise, see below.)  The <code>unittest</code> module seems to automatically hide some internal details of its implementation when reporting failed assertions.</p>\n\n<pre><code>import unittest\n\nclass MyTestCase(unittest.TestCase):\n    def assertLengthIsOne(self, sequence, msg=None):\n        if len(sequence) != 1:\n            msg = self._formatMessage(msg, \"length is not one\")\n            raise self.failureException(msg)\n\nclass TestFoo(MyTestCase):\n    seq = (1, 2, 3, 4, 5)\n\n    def test_stock_unittest_assertion(self):\n        self.assertEqual(len(self.seq), 1)\n\n    def test_custom_assertion(self):\n        self.assertLengthIsOne(self.seq)\n\n\nunittest.main()\n</code></pre>\n\n<p>The output of this is as such:</p>\n\n<pre><code>amoe@vuurvlieg $ python unittest-demo.py\nFF\n======================================================================\nFAIL: test_custom_assertion (__main__.TestFoo)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"unittest-demo.py\", line 16, in test_custom_assertion\n    self.assertLengthIsOne(self.seq)\n  File \"unittest-demo.py\", line 7, in assertLengthIsOne\n    raise self.failureException(msg)\nAssertionError: length is not one\n\n======================================================================\nFAIL: test_stock_unittest_assertion (__main__.TestFoo)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"unittest-demo.py\", line 13, in test_stock_unittest_assertion\n    self.assertEqual(len(self.seq), 1)\nAssertionError: 5 != 1\n\n----------------------------------------------------------------------\nRan 2 tests in 0.000s\n\nFAILED (failures=2)\n</code></pre>\n\n<p>Note that the custom assert method causes a stack trace with two frames, one inside the method itself, whereas the stock <code>unittest</code> method only has one frame, the relevant line in the user's code.  How can I apply this frame-hiding behaviour to my own method?</p>\n"},{"tags":["c#","visual-studio-2010","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13064946,"title":"Load Testing with async calls to WCF","body":"<p>I'm new when it comes to using VS2010's unit tests. I tried making a unit test that makes a  call to the WCF hosted. The code looks like this:</p>\n\n<pre><code>...\n[TestMethod]\npublic void TestMethod1()\n{\n   WcfClient client = new WcfClient(\"BasicHttpBinding_IWcf\");\n   client.GetDataCompleted += new EventHandler&lt;GetDataCompletedEventArgs&gt;(OnGetDataCompleted);\n   client.GetDataAsync(arg1, arg2);\n}\n\nvoid OnGetDataCompleted(object sender, GetDataCompletedEventArgs e)\n{\n   Assert.IfNull(e.Error);\n}\n\n...\n</code></pre>\n\n<p>It seems like it's never started or completed when I run it. I was thinking of adding this to a load test. Am I missing anything to test async calls to the WCF? I've heard of WCF Load Test in codeplex but I'll leave that for another time.</p>\n\n<p>a variation to peer's answer: <a href=\"http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html\" rel=\"nofollow\">http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html</a></p>\n"},{"tags":["ios","unit-testing","xsd","dtd","sentestingkit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13068416,"title":"How do I run a script from within an iOS unit test?","body":"<p>I've written a class for parsing a custom XML format, which can also output DTDs and XSDs for the format that it recognises.  We've got some example XML, and I'd like to write a test that confirms that the example XML is valid according to the produced DTD and XSD.  I've been doing this by hand using <code>xmllint</code>, but I can't see how to do that from within my unit test since <code>NSTask</code> is mission on iOS.  How do I run a script from within an iOS unit test?</p>\n"},{"tags":["c++","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":117,"score":2,"question_id":13064006,"title":"Testing constructor initialization list","body":"<p>I am working on a test which checks if all class attributes are initialized in a constructor.\nMy current solution works for non pointer attributes:</p>\n\n<pre><code>void CSplitVectorTest::TestConstructorInitialization()\n{\n    const size_t memorySize = sizeof(CSplitVector);\n    char* pBuffer1 = (char*) malloc(memorySize);\n    char* pBuffer2 = (char*) malloc(memorySize);\n    memset(pBuffer1,'?',memorySize);\n    memset(pBuffer2,'-',memorySize);\n    new(pBuffer1) CSplitVector;\n    new(pBuffer2) CSplitVector;\n    const bool bObjectsAreEqual = memcmp(pBuffer1,pBuffer2,memorySize)==0;\n    if (!TEST(bObjectsAreEqual))\n    {\n        COMMENT(\"Constructor initialization list not complete!\");\n    }\n    free(pBuffer1);\n    free(pBuffer2);\n}\n</code></pre>\n\n<p>Do you have an idea how could it be improved to test if pointers are initialized?</p>\n"},{"tags":["php","unit-testing","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13067989,"title":"Is there a way other than manually creating a CI mock when testing a library for CodeIgniter?","body":"<p>I am attempting to write a few unit tests for IonAuth, and as a first step I would like to test its public API.</p>\n\n<p>Since the library of course uses the CodeIgniter object quite extensively, I need a $ci object. How do I get this?</p>\n\n<ul>\n<li>Make a new repository altogether, with the entire CI directory included, and install Ion_auth in there and write tests out there.</li>\n<li>Or just mock the CI object, and supply it to the tested functions.</li>\n</ul>\n\n<p>If I am going with the latter option, I need a mock. I have noticed in the phpunit docs that I can use the <code>getMock()</code> function when the class is available and get an automated mock. But since CI is not directly available in the IonAuth library repo, what are my options? Do I need to manually define a Mock CI object (and the other CI library objects as necessary) and establish a fake API?</p>\n"},{"tags":["android","unit-testing","robolectric","android-dialogfragment"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":22,"score":2,"question_id":13067735,"title":"Testing DialogFragments with Robolectric","body":"<p>I have a couple of questions about testing <code>DialogFragment</code> classes with Robolectric, as I've encountered a total lack of information on this topic in Internet.</p>\n\n<ol>\n<li>What are the right arguments to pass to <code>onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code>?</li>\n<li><p>I have trouble passing arguments to <code>DialogFragment</code>, I'm using the following approach:</p>\n\n<p>activity = new Activity();\n        dialog = new DialogFragment();\n        Bundle bundle = new Bundle();\n        dialog.setArguments(bundle);\n        FragmentManager fm = activity.getSupportFragmentManager();\n        FragmentTransaction ft = fm.beginTransaction();\n        ft.add(dialog, \"fragment\");\n        ft.commit();</p></li>\n</ol>\n\n<p>Whenever the code tries to access arguments it crashes with a <code>NullPointerException</code>. </p>\n\n<p>Will highly appreciate any ideas on these topics.</p>\n\n<p><strong>P.S.</strong> Sorry for the poor code formatting, just cannot get it right, think Stackoverflow team should consider some work on it.</p>\n"},{"tags":["silverlight","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13067284,"title":"Issue with popup in Silverlight unit tests","body":"<p>I have a complex custom control, with has a function to resize and reposition itself according to the available space.</p>\n\n<p>The custom control contains a popup ui element, which works fine within the application.</p>\n\n<p>I've tried to write unit tests but the issue is that the rendering via the TestPanel does not seem to be the same as the productive rendering. </p>\n\n<p>I rely heavily on LayoutUpdate or Loaded events and they either get not fired or sometimes the sender object parameter in the respective event handler is just a nullpointer when running the stuff in unit tests.</p>\n\n<p>I also tried to call UpdateLayout() on the TestPanel. This improves the situation but still the rendering and layout update ist not correct.</p>\n\n<p>I suspect the popup ui element behaves strangely during unit tests (but this is just a guess).</p>\n\n<p>The question is if anybody had similar problems and has found a workaround? Are they any known limitations when it comes to rendering and the TestPanel? Unfortunately it seems there is hardly any documentation about Silverlight Unit Tests, which deals with such issues.</p>\n\n<p>Is there any other possiblity (out of the box) to test complex rendering stuff in Silverlight? To test this manually is a nightmare.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","unit-testing","nunit","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":13056716,"title":"Async unit tests not working as expected","body":"<p>I am using the latest version of NUnit (2.6.2) in Visual Studio 2012 using both resharper and the visual studio test runner. I have the follow sample tests in which I am attempting to verify that an exception is raised on an expected asynchronous method call.</p>\n\n<p>Unfortuantely, this doesn't seem to be working as expected. The first test <code>AsyncTaskCanceledSemiWorking</code> only works because i have the expectedexception attribute. The actual assert is completely ignored (as you can see by the ArgumentOutOfRange exception which is just a fake to get it to fail).</p>\n\n<p>The <code>AsyncTaskCanceledWorking</code> works fine, but doesnt test that the exception is thrown on a specified line, hence less useful.</p>\n\n<p>The third fails majestically with the below....</p>\n\n<pre><code>System.Threading.Tasks.TaskCanceledException : A task was canceled.\nException doesn't have a stacktrace\n</code></pre>\n\n<p>Any ideas on how I can test for the TaskCanceledException from a specific line would be very useful.</p>\n\n<p>Thanks</p>\n\n<pre><code>    [Test]\n    [ExpectedException(typeof(TaskCanceledException))]\n    public async Task AsyncTaskCanceledSemiWorking()\n    {\n        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();\n        CancellationToken token = cancellationTokenSource.Token;\n\n        cancellationTokenSource.Cancel();\n\n        Assert.That(await LongRunningFunction(token), Throws.InstanceOf&lt;ArgumentOutOfRangeException&gt;());\n\n\n    }\n\n    [Test]\n    [ExpectedException(typeof(TaskCanceledException))]\n    public async Task AsyncTaskCanceledWorking()\n    {\n        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();\n        CancellationToken token = cancellationTokenSource.Token;\n\n        cancellationTokenSource.Cancel();\n\n        int i = await LongRunningFunction(token);\n    } \n\n\n    [Test]\n    public async Task AsyncTaskCanceledFailed()\n    {\n        CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();\n        CancellationToken token = cancellationTokenSource.Token;\n\n        cancellationTokenSource.Cancel();\n\n        Assert.That(await LongRunningFunction(token), Throws.InstanceOf&lt;TaskCanceledException&gt;());\n\n    }\n\n    public async Task&lt;int&gt; LongRunningFunction(CancellationToken token)\n    {\n        token.ThrowIfCancellationRequested();\n\n        await Task.Delay(1000, token);\n\n        return 5;\n    } \n</code></pre>\n"},{"tags":["unit-testing",".net-4.0",".net-3.5","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13064489,"title":"Moq Release 4: What's the difference between NET35 and NET40","body":"<p>I am new to Moq and want to use the <a href=\"http://moq.googlecode.com/files/Moq.4.0.10827.Final.zip\" rel=\"nofollow\">latest Release</a>. In the download there are 3 variants, one for .NET 3.5 and two for .NET 4. What is the difference between the .NET versions? <strong>Does the 3.5 version miss any features compared to 4?</strong></p>\n\n<p>Note: The difference between the two version for .NET 4 are already <a href=\"http://stackoverflow.com/q/12104769/79485\">covered in this question</a> and not asked here.</p>\n"},{"tags":["java","unit-testing","maven-2","spring-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":3185,"score":9,"question_id":2699181,"title":"Unit Test in Maven requires access to the src/main/webapp Directory","body":"<p>I am trying to unit test a webapp that I am developing in Maven/Eclipse. It is a Spring MVC webapp, and I need some unit tests to test my model controller.</p>\n\n<p>To do this, I need to use my webapp config .xml files to inject the controller, however, all my configuration (and other associated files that the configs reference) are in the src/main/webapp directory (as per Maven convention) - there are a lot of files in here that i need to reference in my tests, but they are not available when running the test as they are not on the classpath (Maven only seems to be adding src/main/java, src/test/java, src/main/resources, src/test/resources to the classpath but not src/main/webapps)</p>\n\n<p>I do not want to have to copy my entire webapp in to my src/test/resources folder just for the purpose of testing - is there any other way to be able to access them?</p>\n\n<p>I can get around this by changing the Eclipse \"Run Configurations\" to include this folder on the classpath, but that will not work when running the tests from the command line?</p>\n\n<p>Has anyone else encountered this? is there a know solution?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":10,"favorite_count":7,"up_vote_count":38,"down_vote_count":0,"view_count":7284,"score":38,"question_id":1087351,"title":"How do you mock out the file system in C# for unit testing?","body":"<p>Are there any libraries or methods to mock out the file system in C# to write unit tests? In my current case I have methods that check whether certain file exists and read the creation date. I may need more than that in future.</p>\n"},{"tags":["wpf","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12357568,"title":"How to mock DragEventArgs","body":"<p>I am trying to unit test this method that is called from my ViewModel:</p>\n\n<pre><code>  public virtual string[] ExtractFilePaths(DragEventArgs dragEventArgs)\n  {\n     string[] droppedPaths = null;\n\n     if (dragEventArgs.Data.GetDataPresent(DataFormats.FileDrop))\n     {\n        droppedPaths = dragEventArgs.Data.GetData(DataFormats.FileDrop, true) as string[];\n     }\n\n     return droppedPaths;\n  }\n</code></pre>\n\n<p>I have this method wired up with Caliburn. I know it's a pretty simple method that almost exclusively uses framework classes, but I feel it still needs testing. The problem is, Moq cannot mock the DragEventArgs. Is there a way around this or should I just not bother testing this method?</p>\n"},{"tags":["python","unit-testing","import"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":222,"score":2,"question_id":4761041,"title":"Python import src modules when running tests","body":"<p>My source files are located under src and my test files are located under tests. When I want to run a test file, say python myTest.py, I get an import error: \"No module named ASourceModule.py\".</p>\n\n<p>How do I import all the modules from source needed to run my tests?</p>\n"},{"tags":["c++","unit-testing","tdd","googletest","cppunit"],"answer_count":3,"favorite_count":15,"up_vote_count":29,"down_vote_count":1,"view_count":2790,"score":28,"question_id":7922289,"title":"GoogleTest vs CppUnit: The facts","body":"<p>In the process of setting our C++ unit testing framework for the next years we shortlisted <strong>GoogleTest</strong> and <strong>CppUnit</strong>. I have some experience with both and my heavy preference is GoogleTest. Anyways to convince my boss I need some <strong>facts</strong> so I did some reading on the Internet, including the manuals, wiki pages and some of the sources. I came up with a list of GoogleTest advantages and a single CppUnit advantage(graphic test runners). Here they are ordered by <strong>perceived</strong> usefulness: </p>\n\n<ul>\n<li>INSTANTIATE_TEST_CASE_P to instantiate a test case with any set of parameters you want, including Cartesian products </li>\n<li>FRIEND_TEST for testing private class members(for all the legacy code) </li>\n<li>turning asserts into breakpoints </li>\n<li>non-fatal asserts </li>\n<li>\"out of the box\" googlemock integration </li>\n<li>automatic tests detection, no need to enumerate them</li>\n<li>tests can be disabled and enabled </li>\n<li>tests to run can be selected using name patterns </li>\n<li>value/type-parameterized tests </li>\n<li>user-defined predicate asserts </li>\n<li>death tests </li>\n<li>much richer set of asserts </li>\n<li>type asserts  </li>\n<li>asserting on subroutines </li>\n<li>additional debug info can be added to asserts using &lt;&lt;  </li>\n<li>RecordProperty emits last value of property to the XML output </li>\n<li>SCOPED_TRACE helps understand the context of an assertion failure coming from inside a sub-routine or loop. </li>\n<li>xUnit XML output, can be shown by Jenkins right away without a XSLT transformation in between </li>\n<li>supports custom types printers</li>\n<li>time consumed by test indication(I suspect this is also possible with CppUnit but I haven figured it out yet)   </li>\n<li>test event listener API (user-defined plug-ins) </li>\n<li>test shuffling </li>\n<li>no exceptions and RTTI </li>\n</ul>\n\n<p>Am I correct in assuming that all of the above are not supported by CppUnit? Is there an useful GoogleTest feature <strong>not available</strong> in CppUnit I am missing?  </p>\n\n<p>And last but not least: Are there any nice CppUnit features that GoogleTest <strong>lacks</strong>?   </p>\n\n<p>Thanks!</p>\n"},{"tags":["c++","unit-testing","cppunit","googletest","boost-test"],"answer_count":12,"favorite_count":37,"up_vote_count":44,"down_vote_count":0,"view_count":17913,"score":44,"question_id":242926,"title":"Comparison of c++ unit test frameworks","body":"<p>I know there are already a few questions regarding recomendations for c++ unit test frameworks, but all the answers did not help as they just recomend one of the frameworks but do not provide any information about a (feature) comparison.</p>\n\n<p>I think the most interesting frameworks are CppUnit, Boost and the new Google testing framework. Has anybody done any comparison yet?</p>\n"},{"tags":["xcode","unit-testing","ocunit","sentestingkit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13047546,"title":"XCode 4 Unit test: Is it possible to ignore certain test cases?","body":"<p>Is there a way of ignoring a specific test case without commenting it out?</p>\n\n<p>Some tests are written before the implementation exists, so before commiting any code I'd like to first flag these tests to be ignored so it doesn't appal any of my colleagues.</p>\n\n<p>Commenting them out results in loosing track of failing, incomplete tests.</p>\n"},{"tags":["unit-testing","visual-studio-2012","tfs2012"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":156,"score":1,"question_id":13048879,"title":"VS2012 & TFS2012 Unit Test major issues","body":"<p>We are using VS2012 and TFS2012 and write unit tests for our code. We want to report code coverage, and also using .config files in our unit tests for test appsettings, and also some other settings for logging, MS Enterprise library settings etc. etc. </p>\n\n<hr>\n\n<p><strong>App.config not working in new test framework</strong></p>\n\n<p>New test framework of MS should be great, but to me it is not so great at all.\nHow I'm i suppose to set some basic configuration in config files, when the new framework does not use config files anymore?</p>\n\n<p>We had a problem with mixed mode dlls, and found a fix: adding</p>\n\n<pre><code>&lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt; \n</code></pre>\n\n<p>to the app.config. But this did not work for our unit test project. Becuase config files are not there anymore. Searching the internet came up with a solution </p>\n\n<p>'<a href=\"http://www.diaryofaninja.com/blog/2012/09/13/net-20-mixed-mode-assemblies-in-visual-studio-net-45-test-projects#.UFFl43wdOYw.dotnetkicks\" rel=\"nofollow\">Problems with .Net 2.0 Mixed Mode Assemblies inside Visual Studio .Net 4.5 Test Projects</a>'</p>\n\n<p>This means editing a file of Visual Studio 11 itself in the program files directory, not a great solution i think....</p>\n\n<p>And how about some basic appsetting? How am I supposed to set this?</p>\n\n<hr>\n\n<p><strong>Do not use the .testSettings file</strong></p>\n\n<p>Using the old .testsettings file is also not recommended by MS, becuase then the old test framework is used. And if I use the .testsettings file, i cannot setup Code Coverage on my tfs2012 build service. </p>\n\n<p>Another issue is that we have code that need a dll (system.data.sqlite.dll), but only at runtime the unit test code needs this dll. So a reference is not needed. We fixed this by using the Deployment tab on the testsettings file. But in the new framework, you should not use the testsettings file. You have the [deploymentitem] attribute if you need files. But the deploymentitem attribute can only be used on a [testmethod] not on a [testinitialize] or [assemblyinitialize] method. But our code needs the dll in the [testinitialize] method. So there is no way to get the dll in place. </p>\n\n<p>Just copy it with File.Copy in the [assemblyinitialize] (or testinitialize) method does not work.</p>\n\n<p>Adding the dll as file to the project, and set the 'copy to output directory' to 'Copy Always' as mentioned in '<a href=\"http://msdn.microsoft.com/en-us/library/ee256991.aspx\" rel=\"nofollow\">Configuring Unit Tests by using a .runsettings File</a>' also does not work at all.</p>\n\n<p>The (really not great) solution for this is to add the dll as a reference, then instantiate a class and do nothting with it. This way the dll is needed otherwise it is not building, and thus the dll will deploy itself to the right directories.</p>\n\n<hr>\n\n<p><strong>how to solve my problem(s)???</strong>\n- I want to use config files in my unit test.\n- I want to deploy some files that are neede in the 'assemblyinitialise' and/or 'classinitialize' methods.\n- I want Code Coverage on my TFS2012 nightly build enabled.</p>\n"},{"tags":["php","unit-testing","mocking","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13050263,"title":"Is it possible to use mocking on a procedural (non-oo) function?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4725194/php-override-existing-function\">PHP - override existing function</a>  </p>\n</blockquote>\n\n\n\n<p>I want to use mocking to unit test some of my functions that have external dependencies. </p>\n\n<p>So here goes... Below is a simplified model of what I'm working with. A lot of the code I have inherited is written in this way, so I would like to be able to write some simple tests without having to rewrite if possible:</p>\n\n<pre><code>function display_tasks($id)\n{\n    $tasks = call_some_function_that_runs_a_database_query($id);\n\n    $html = \"&lt;some html&gt;\";\n\n    foreach ($tasks as $task)\n    {\n        // Some operations here\n    }\n\n    $html .= \"&lt;/some html&gt;\";\n\n    return $html;\n}\n</code></pre>\n\n<p>The code that my function is calling is not wrapped in an object, so I am having trouble putting the various examples into practice, as 99% of the examples on the internet are based on object-oriented code. Is it even possible to mock procedural functions directly from PHPunit?</p>\n\n<p>I would like to be able to mock out whatever <code>call_some_function_that_runs_a_database_query</code> is returning. I have had a go at using the built-in PHPunit mocking methods, but doing this doesn't override the result from the original call in my function.</p>\n\n<p>Any help or examples would be really appreciated.</p>\n"},{"tags":["visual-studio","web-services","unit-testing","debugging","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12056316,"title":"How to run a test while attached to a process in Visual Studio","body":"<p>I'm trying to debug some web services. I have a number of integration tests setup. I want to attach the debugger to my web process and then execute one of my tests. The problem is Visual Studio doesn't seem to allow me to run a test while I'm already attached to a process. Is there any way around this? The only way I've been able to do it is set a breakpoint in the test prior to calling the webservice, debug the unit test, and then once it hits the breakpoint attach the debugger to my webservice process. That's too many steps.</p>\n"},{"tags":["visual-studio","unit-testing","testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12867798,"title":"UI Tests Visual Studio 2012","body":"<p>I am recording tests in visual studio 2012 for one of my project, it recorded the first one and after that I paused generated a method and after resuming and while generating code for this it says Coded UI Test Builder \"Value cannot be null parameter name:Key\" </p>\n\n<p>Does anyone know whats the problem ?</p>\n"},{"tags":["unit-testing","visual-studio-2012","test-explorer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12964198,"title":"Use Multiple Filters in VS 2012 test explorer","body":"<p>I would like to filter on multiple criteria in Visual Studio 2012 test explorer search filter box.\nI would like to get tests with trait \"A\" OR \"B\"\nI have tried several versons of the below with no luck:\n Trait:\"Integration\"|\"UnitTest\" Trait:\"Integration\"|Trait:\"UnitTest\"</p>\n\n<p>Searching for 1 trait alone works just fine.\nI have loaded the latest VS 2012 CTP, that is why I can search by trait.</p>\n"},{"tags":["visual-studio-2010","unit-testing","visual-studio-2012","load-testing","visual-studio-team-system"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12729202,"title":"Unable to run unit/webperformance/load test remotely after installing Visual Studio 2012","body":"<p>After installing Visual Studio 2012 for testing, I can not run tests remotely (using remote test controller) from Visual Studio 2010. I start test from Visual Studio 2010 because our dev team have not migrated yet, and because our test rig is also still using VS 2010 Test Agents &amp; Controller (2010 &amp; 2012 version are incompatible)</p>\n\n<p>The run is still pending.\n<img src=\"http://i.stack.imgur.com/jn6FB.png\" alt=\"pending\"></p>\n\n<p>After enabling Logs on Test Controller, I have this message (also in EventLog)</p>\n\n<pre><code>E, 1360, 4, 2012/10/04, 15:40:02.080, FR-VMRD-CTRL\\QTController.exe, ControllerSpooledJob.AddMessage: Failed calling event listener \n    Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1[Microsoft.VisualStudio.TestTools.Controller.IControllerEvents]: System.Runtime.Remoting.RemotingException: Le serveur a rencontré une erreur interne. Pour plus d'informations, désactivez customErrors dans le fichier .config du serveur.\n\n    Server stack trace: \n\n    Exception rethrown at [0]: \n       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n       at Microsoft.VisualStudio.TestTools.Controller.IControllerEvents.ControllerEvent(TestMessage report)\n       at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.&lt;&gt;c__DisplayClass6.&lt;AddMessage&gt;b__3(IControllerEvents eventListener)\n       at Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer`1.InvokeAsRemoteUser(Action`1 invoke)\n       at Microsoft.VisualStudio.TestTools.Controller.ControllerSpooledJob.AddMessage(TestMessage message) \n</code></pre>\n\n<p>The Test Rig is unchanged and there are no errors on another machine without VS2012.</p>\n\n<p>Is there any way to solve this ?</p>\n"},{"tags":["unit-testing","visual-studio-2012","coded-ui-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":161,"score":4,"question_id":12891370,"title":"Visual Studio 2012 Coded UI Testing of Web Application - Code coverage","body":"<p>I have a web application. I am using VS 2012 Coded UI for testing the web application. I have recorded the test and running it, and it works fine. But the code coverage window gives code coverage of the test project only, it doesnt give code coverage of the website project and other dll project which is referred in the web project.</p>\n\n<p>I have added the testsetting file in the solution and selected the same.</p>\n\n<p>Any clue? </p>\n"},{"tags":["unit-testing","node.js","mocha"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":185,"score":0,"question_id":10753288,"title":"How to specify test directory for mocha?","body":"<p><a href=\"http://visionmedia.github.com/mocha/\" rel=\"nofollow\">Mocha</a> tries to find test files under <code>test</code> by default, how to specify another dir, e.g. <code>server-test</code>?</p>\n"},{"tags":["java","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13057422,"title":"code block after the new operator in Java JUnit code","body":"<p>This is the sample JUnit test code included in JUNIT4. It shows two cases: the type safe way and the dynamic way. I tried to use the type safe way. </p>\n\n<pre><code>import junit.framework.Test;\nimport junit.framework.TestCase;\nimport junit.framework.TestSuite;\n\n/**\n * Some simple tests.\n */\npublic class SimpleTest extends TestCase {\n    protected int fValue1;\n    protected int fValue2;\n\n    SimpleTest(String string)\n    {\n        super(string);\n    }\n\n    @Override\n    protected void setUp() {\n        fValue1 = 2;\n        fValue2 = 3;\n    }\n\n    public static Test suite() {\n\n          /*\n           * the type safe way\n           */\n          TestSuite suite= new TestSuite();\n          suite.addTest(\n              new SimpleTest(\"add\") {\n                   protected void runTest() { testAdd(); }\n              }\n          );\n\n          suite.addTest(\n              new SimpleTest(\"testDivideByZero\") {\n                   protected void runTest() { testDivideByZero(); }\n              }\n          );\n          return suite;\n    }\n\n    ...\n\n    public static void main(String[] args) {\n        junit.textui.TestRunner.run(suite());\n    }\n}\n</code></pre>\n\n<p>I'm not sure about this code snippet. </p>\n\n<pre><code>suite.addTest(\n    new SimpleTest(\"add\") {\n        protected void runTest() { testAdd(); }\n        }\n    );\n</code></pre>\n\n<ul>\n<li>How does new Simple(\"add\") {...} works? I mean, how code block can follow the new operator?</li>\n<li>Why {...} block is needed? I tried without it, and I got no compilation/runtime errors.</li>\n</ul>\n"},{"tags":[".net","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13053977,"title":"How do I call a predicate passed as a parameter in Moq?","body":"<p>I've got an interface which has a method named:</p>\n\n<pre><code>IEnumerable&lt;string&gt; GetFilesInADirectoryWhere(\n     string directory, \n     string wildcard, \n     Predicate&lt;string&gt; filter);\n</code></pre>\n\n<p>I want to <code>Setup</code> this method and actually <strong>call</strong> the <code>filter</code>.  So I declared it like this:</p>\n\n<pre><code>myMock.Setup( x =&gt; x.GetFilesInADirectoryWhere(\n    @\"My Folder\", \n    @\"FooFile*.*\", \n    It.IsAny&lt;Predicate&lt;string&gt;&gt;()))\n\n    .Returns((Predicate&lt;string&gt; filter) =&gt;  \n        cannedFileNames.Where(filename=&gt;filter(filename)));\n</code></pre>\n\n<p>This compiles, but when this mocked method is called, I get the following runtime exception:</p>\n\n<pre><code>    SetUp : System.Reflection.TargetParameterCountException : Parameter count mismatch.\n       at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\n       at System.Delegate.DynamicInvokeImpl(Object[] args)\n       at Moq.Extensions.InvokePreserveStack(Delegate del, Object[] args)\n       at Moq.MethodCallReturn`2.Execute(ICallContext call)\n       at Moq.Interceptor.Intercept(ICallContext invocation)\n       at Moq.Proxy.CastleProxyFactory.Interceptor.Intercept(IInvocation invocation)\n       at Castle.DynamicProxy.AbstractInvocation.Proceed()\n       at Castle.Proxies.IDiskProxy.GetFilesInADirectoryWhere(String directory, String filter, Predicate`1 predicate)\n</code></pre>\n\n<p>Any idea what I'm doing wrong?</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":76,"score":7,"question_id":13057040,"title":"Holding a Value in Unit tests","body":"<p>I have a Question for you guys.I have 2 unit tests which are calling webservices .The value that one unit-test returns should be used for another unit test method</p>\n\n<p>Example   </p>\n\n<pre><code>namespace TestProject1\n{\n    public class UnitTest1\n    {\n        String TID = string.empty;\n\n        public void test1\n        {\n           //calling webservices and code\n\n           Assert.AreNotEqual(HoID, hID);\n           TID = hID;\n        }\n\n        public void test2\n        {\n           //calling webservices and code            \n           string HID = TID  // I need the TID value from the Above testcase here\n\n           Assert.AreNotEqual(HID, hID);            \n        }\n    }\n}\n</code></pre>\n\n<p>How can i store a value in one unittest and use that value in another unittest.</p>\n"},{"tags":["c++","unit-testing","iostream"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":13056799,"title":"Unit testing operator<< in C++","body":"<p>I'm trying to figure out a nice way to unit test my implementation of the <code>operator&lt;&lt;</code> in C++. I have a class which implements the operator, and given an instance with a specific state, I'd like to check that the output is what I want it to be.</p>\n\n<p>This is my code (the header file):</p>\n\n<pre><code>class Date {\n    virtual int year() const { return 1970; };\n    virtual int month() const { return 1; };\n    virtual int day() const { return 1; };\n    friend  std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Date &amp;d);\n};\n\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, const Date &amp;d) {\n    os &lt;&lt; d.year() &lt;&lt; \"-\" &lt;&lt; d.month() &lt;&lt; \"-\" &lt;&lt; d.day();\n    return os;\n};\n</code></pre>\n\n<p>Now, in my unit test method, I could just do <code>Date d; cout &lt;&lt; d;</code> and verify when I run the tests that the output is correct. However, I'd much rather programmatically verify this, so I don't have to look at the test output more than at the final report (which hopefully says \"0 failed tests!\").</p>\n\n<p>I'm fairly new with C++, so I've never really used streams for anything but input and output.</p>\n\n<p>How do I accomplish this?</p>\n"},{"tags":["c#","unit-testing","db4o"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13054680,"title":"Db4o database for automatic tests","body":"<p>we are using Db4o in our project.</p>\n\n<p>I have some automatic tests where is tested persistence of objects.\nThe problem is, I can't open/create the database twice.\nI have two helper methods for geting the object container. But when the method is called second time the \"ArgumentException: Configuration already used.\" is thrown. I closed and disposed the previous objectcontainer ofcourse.</p>\n\n<p>What I do wrong?</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>public static IObjectContainer GetEmptyTestingDatabase() {\n    var tempDir = Environment.GetFolderPath(Environment.SpecialFolder.InternetCache);\n    string dbFilePath = Path.Combine(tempDir, \"UNIT-TESTING.db4o\");\n    if (File.Exists(dbFilePath)) {\n        File.Delete(dbFilePath);\n    }\n\n    var cfg = Db4oFactory.Configure();\n    cfg.Add(new TransparentPersistenceSupport(new DeactivatingRollbackStrategy()));\n    cfg.Add(new TransparentActivationSupport());\n\n    var db = Db4oFactory.OpenFile(cfg, dbFilePath);\n    return db;\n}\npublic static IObjectContainer GetMemoryDatabase() {\n    string dbFileName = Guid.NewGuid().ToString().ToString();\n\n    var cfg = Db4oFactory.Configure();\n    cfg.Storage = new Db4objects.Db4o.IO.PagingMemoryStorage();\n    cfg.Add(new TransparentPersistenceSupport(new DeactivatingRollbackStrategy()));\n    cfg.Add(new TransparentActivationSupport());\n\n    var db = Db4oFactory.OpenFile(cfg, dbFileName);\n    return db;\n}\n</code></pre>\n"},{"tags":["ruby","unit-testing","rspec","mocking","tdd"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13052650,"title":"How do I mock %x in a test?","body":"<p>I've got something like this : </p>\n\n<pre><code>class Something\n  def some_method\n    %x{xyz}\n  end\nend\n</code></pre>\n\n<p>And in the spec :</p>\n\n<pre><code>describe Something do\n  describe \"#some_method\" do\n    it \"should execute xyz command in a subshell\" do\n      x = Something.new\n      #What should come here?\n      x.some_method\n    end\n  end\nend\n</code></pre>\n\n<p>I know how I can mock \"system\" . But my question is specific to \"%x\" . So how to mock %x ?</p>\n"},{"tags":["unit-testing","moles","stub"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12827698,"title":"Create a Partial Stub in Microsoft Moles","body":"<p>I am pulling my hair out with this one.  I have looked and cannot find a simple, clear example of creating and using a partial stub with Microsoft Moles.  Maybe I'm missing somethimg, or have my code architected poorly, but I can't seem to get this to work.</p>\n\n<p>Here's my class (simplified):</p>\n\n<pre><code>public class AccountService : IAccountService {\n        private readonly webServiceProxy IExternalWebServiceProxy;\n\n    public AccountService(IExternalWebServiceProxy webServiceProxy) {\n        this.webServiceProxy = webServiceProxy;\n    }\n\n    public List&lt;AccountModel&gt; GetAccounts(string customerId) {\n         var returnList = new List&lt;AccountModel&gt;();\n         var xmlResponse = webServiceProxy.GetAllCustomerAccounts(customerId);\n\n         var accountNodes = xmlResponse.SelectNodes(\"//AccountNodes\");\n            if (accountNodes != null)\n            {\n                foreach (XmlNode node in accountNodes)\n                {\n                    var account = this.MapAccountFromXml(node);\n\n                    if (!string.IsNullOrEmpty(account.AccountNumber))\n                    {\n                        returnList.Add(account);\n                    }\n                }\n            }\n\n            return returnList;\n    }\n\n    public AccountModel MapAccountFromXml(XmlNode node) {\n        if (!IsValidAccount(node) {\n            return null;\n        }\n\n        // This performs a lot of XML manipulation getting nodes based on attributes \n        // and mapping them to the various properties of the AccountModel. It's messy \n        // and I didn't want it inline with the other code.\n\n        return populatedAccountModel;\n    {\n\n    public bool IsValidAccount(XmlNode node) \n    {\n        var taxSelectValue = node.SelectSingleNode(\"//FORMAT/Field[@taxSelect='1']\").First().Value;\n        var accountStatus = // similar to first line in that it gets a single node using a specific XPath\n        var maturityDate = // similar to first line in that it gets a single node using a specific XPath\n        var maturityValue = // similar to first line in that it gets a single node using a specific XPath\n\n        return taxSelectValue != string.Empty &amp;&amp; taxSelectValue != \"0\" &amp;&amp; (accountStatusValue != \"CL\" || (maturityDate.Year &gt;= DateTime.Now.AddYears(-1).Year));\n    }\n}\n</code></pre>\n\n<p>What I want to do is test my GetAccounts() method. I can stub out the IExternalWebServiceProxy call and return fake XML, but I have internal calls happening in my service since my GetAccounts() method calls MapAccountFromXml() which in turn calls IsValidAccount().</p>\n\n<p>Perhaps the solution is to not worry about breaking out the long and involved MapAccountFromXml() and IsValidAccount() code and just put them inline into the GetAccount() call, but I would rather leave them broken out for code readability.</p>\n\n<p>I have my Moles assembly created, and know I can create a stub version of my class like this</p>\n\n<pre><code>var stubWebService = SIExternalWebServiceProxy {\n       GetAllCustomerAccounts = delegate {\n            return SomeHelper.GetFakeXmlDocument();\n       }\n}\n\nvar stubAccountService = new SAccountService() { callsBase = true; }\n</code></pre>\n\n<p>My problem is I don't know how to then override the internal calls to MapAccountFromXml and IsValidAccount and I don't want my Unit Test to be testing thos methods, I'd like to isolate GetAccounts for the test.  I read somewhere the methods need to be virtual to be overriden in a partial stub, but could not find anything that then showed how to create a stub that overrides a few methods while calling the base for the one I want to test.</p>\n"},{"tags":["java","unit-testing","maven","war","stringtemplate"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13054564,"title":"Loading WAR resources during unit test","body":"<p>(The context is a Maven JavaEE project that is deployed as a WAR.)\n<p>My application class loads resources (using the StringTemplate 3.2.1 library) from a package in the <code>src/main/resources</code> directory. - This works like a charm, because the application class files and resources all end up in a subdirectory of <code>WEB-INF/classes</code>. The <code>new FileInputStream(path)</code> inside StringTemplate can find the resources using a simple relative path.\n<p>When testing my class using JUnit this simple setup does not work: Unit tests run from the <code>test-classes</code> directory, and the relative path then points to the wrong location (which is typically populated by resources from <code>src/test/resources</code>).\n<p>How can I pass StringTemplate a relative path that will work in both environments?</p>\n"},{"tags":["java","eclipse","unit-testing","junit","jndi"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":130,"score":6,"question_id":13052944,"title":"Unit Testing Dilemma: Using a JNDI data source without running JBoss or Spring","body":"<h2>Problem Statement</h2>\n\n<p>I want to be able to run junit tests on methods that connect to a database.</p>\n\n<h2>Current setup</h2>\n\n<p><b>Eclipse Java EE IDE</b> – Java code is using no framework. The developers (me included) want more robust testing of current legacy code BEFORE attempting to move the code into a Spring framework so that we can prove along the way that the behavior is still correct. </p>\n\n<p><b>JBoss 4.2</b> – Version limitation by vendor software (<b>Adobe LiveCycle ES2</b>); Our Java web application uses this setup of JBoss to run and makes use of the Adobe LiveCycle API.</p>\n\n<p><i>We have been unable to successfully run the vendor configured JBoss within Eclipse</i> – we have spent weeks attempting this, including contacting the company that provides our support for the configuration of JBoss for Adobe LiveCycle.  Supposedly the problem is a memory limitation issue with settings in Eclipse, but changing the memory settings has thus far failed in a successful JBoss server start within Eclipse.  For now, attempting to get JBoss to run inside of Eclipse is on hold.</p>\n\n<p>The database connection is defined in a JNDI data source that JBoss loads on start up.  Both our web application and Adobe LiveCycle need to create connections to this data source.</p>\n\n<h2>Code</h2>\n\n<p>I am glossing over error checking and class structure in this code snippet to focus on the heart of the matter.  Hopefully that does not cause problems for others.  Text in square brackets is not actual text.</p>\n\n<p>Our code to create the connection is something like this:</p>\n\n<pre><code>Properties props = new Properties();\nFileInputStream in = null;\nin = new FileInputStream(System.getProperty(\"[Properties File Alias]\"));\nprops.load(in);\nString dsName = props.getProperty(“[JNDI data source name here]”); \nInitialContext jndiCntx = new InitialContext();\nDataSource ds = (DataSource) jndiCntx.lookup(dsName);\nDs.getConnection();\n</code></pre>\n\n<p>I want to be able to test methods dependent upon this code without making any changes to it.</p>\n\n<p>Reference to properties file alias in properties-service.xml file:</p>\n\n<pre><code>  &lt;!-- ==================================================================== --&gt;\n  &lt;!-- System Properties Service                                            --&gt;\n  &lt;!-- ==================================================================== --&gt;\n\n  &lt;!-- Allows rich access to system properties.--&gt;\n\n&lt;mbean code=\"org.jboss.varia.property.SystemPropertiesService\" \n name=\"jboss:type=Service,name=SystemProperties\"&gt;\n  &lt;attribute name=\"Properties\"&gt;\n    [Folder Alias]=[filepath1]\n    [Properties File Alias]=[filepath2]\n  &lt;/attribute&gt;\n&lt;/mbean&gt;\n</code></pre>\n\n<p>Snippet from properties file located at filepath2</p>\n\n<pre><code>[JNDI data source name]=java:/[JNDI data source name]\n</code></pre>\n\n<p>The JNDI xml file for this data source is set up like this:</p>\n\n<pre><code>&lt;datasources&gt;\n  &lt;local-tx-datasource&gt;\n    &lt;jndi-name&gt;[JNDI data source name here]&lt;/jndi-name&gt;\n    &lt;connection-url&gt;jdbc:teradata://[url]/database=[database name]&lt;/connection-url&gt;\n    &lt;driver-class&gt;com.teradata.jdbc.TeraDriver&lt;/driver-class&gt;\n    &lt;user-name&gt;[user name]&lt;/user-name&gt;\n    &lt;password&gt;[password]&lt;/password&gt;\n    &lt;!-- sql to call on an existing pooled connection when it is obtained from pool --&gt;\n    &lt;check-valid-connection-sql&gt;SELECT 1+1&lt;/check-valid-connection-sql&gt;\n  &lt;/local-tx-datasource&gt;\n&lt;/datasources&gt;\n</code></pre>\n\n<h2>My thoughts of where the solution may be</h2>\n\n<p>Is there something I can do in a @BeforeClass method in order to make the properties the above code is looking for available without JBoss?  Maybe somehow using the setProperty method of the java.util.Properties class?  I would also like to use the same JNDI xml file that JBoss reads from, if possible, in order to reduce duplicate configuration settings.  </p>\n\n<p>So far all of my research ends with the advice “Use Spring”, but I don’t think we’re ready to open that can of worms yet. I am not an expert in JBoss, but if more details of our JBoss setup are needed for a helpful answer, I will do my best to get them, though I will likely need some pointers on where to look.</p>\n\n<p><strong>Stackoverflow Research references:</strong><br/>\n<a href=\"http://stackoverflow.com/questions/9696195/jndi-lookup-in-junit-using-spring\">Jndi lookup in junit using spring</a> <br/>\n<a href=\"http://stackoverflow.com/questions/1615417/out-of-container-jndi-data-source\">Out of container JNDI data source</a> <br/>\n<strong>Other research references:</strong><br/>\n<a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html\" rel=\"nofollow\">http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html</a> <br/>\n<a href=\"http://docs.oracle.com/javase/jndi/tutorial/basics/prepare/initial.html\" rel=\"nofollow\">http://docs.oracle.com/javase/jndi/tutorial/basics/prepare/initial.html</a> <br/></p>\n"},{"tags":["django","unit-testing","testing","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13039358,"title":"Django testing json dump view","body":"<p>Hi I have a view like so:</p>\n\n<pre><code>def AjaxPopulate(request):\n    colour = request.GET.get('colour_id')\n    if colour is None:\n        return HttpResponseBadRequest()\n\n    qs = Thing.objects.select_related()\n    things = get_list_or_404(qs, colour=colour)\n    data = []\n    for x in things:\n        data.append({\n            'id': x.id,\n            'name': unicode(x),\n        })\n    return HttpResponse(simplejson.dumps(data), mimetype='application/json'\n</code></pre>\n\n<p>which is hooked into this url:</p>\n\n<pre><code>url(r'^ajax_populate/$', 'colours.views.AjaxPopulate', name='ajax_populate'),\n</code></pre>\n\n<p>in my test I have:</p>\n\n<pre><code>def setUp(self):\n    self.client = Client()\n    user = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n    colour1 = Colour.objects.create(colour='Green')\n    thing1 = Thing.objects.create(name='Leaf', colour=colour1, description='foo')\n\ndef test_ajax_populate(self):\n    response = self.client.get('/colours/ajax_populate/', {'colour_id': 1}) \n    self.assertEqual(response.status_code, 200)\n</code></pre>\n\n<p>However, I am getting a <code>AssertionError: 404 != 200</code> error. </p>\n\n<p>What am I doing wrong?</p>\n\n<p>Any help much appreciated. </p>\n"},{"tags":["django","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13034946,"title":"Django - getting user objects in tests","body":"<p>I have a models.py like so:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\n\n# everything has a colour...\nclass Colour(models.Model):\n    colour = models.CharField(max_length=100)\n\n    def __unicode__(self):\n        return self.colour\n\n\n# a thing can have a colour...\nclass Thing(models.Model):\n    name = models.CharField(max_length=155)\n    colour = models.ForeignKey(Colour)\n    description = models.CharField(max_length=255)\n\n    def __unicode__(self):\n        return self.name\n\n\n# a user can save his choices\nclass UserLikes(models.Model):\n    user = models.ForeignKey(User)\n    colour = models.ForeignKey(Colour)\n    thing = models.ForeignKey(Thing)\n\n    class Meta:\n        verbose_name_plural = \"User Likes\"\n\n    def __unicode__(self):\n        return '%d - %s' % (self.pk, self.user)\n</code></pre>\n\n<p>And in my views:</p>\n\n<pre><code>def ThingPicker(request):\n    if request.method == 'POST':\n        form = ThingForm(request.POST)\n        if form.is_valid():\n            colour = form.cleaned_data['colour']\n            thing = form.cleaned_data['thing']\n            likes = UserLikes(user=request.user, colour=colour, thing=thing)\n            likes.save()\n            return HttpResponseRedirect('/profile/')\n        else:\n            return render_to_response('thing_picker.html', {\n                'form': form,\n            }, RequestContext(request))\n    else:\n        form = ThingForm()\n        return render_to_response('thing_picker.html', {\n            'form': form,\n        }, RequestContext(request))\n</code></pre>\n\n<p>And in my tests.py I want to do something like this (<strong>EDITED</strong>):</p>\n\n<pre><code>class ViewTests(TestCase):\n    def setUp(self):\n        self.client = Client()      \n\n    def test_thingpicker(self):\n        User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n        self.client.login(username='foo', password='bar') # request.user is now user foo\n\n        response = self.client.post('/colours/things/', {'colour': 1, 'thing': 2})\n        userlike = UserLikes.objects.get(pk=1)\n        self.assertEqual(userlike.colour_id, 1)\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>DoesNotExist: UserLikes matching query does not exist.\n</code></pre>\n\n<p>If I try with the test client in shell (<strong>EDITED</strong>):</p>\n\n<pre><code>&gt;&gt;&gt;  c = Client()\n&gt;&gt;&gt;  user1 = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n&gt;&gt;&gt;  c.login(username='foo', password='bar')\n&gt;&gt;&gt;  c.post('/colours/things/', {'user': user1, 'colour': 1, 'thing': 2})\n&gt;&gt;&gt;  userlike = UserLikes.objects.get(pk=1)\n&gt;&gt;&gt;  userlike.colour_id\n1L\n</code></pre>\n\n<p>I get he expected result.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["javascript","unit-testing","private","qunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":9615597,"title":"While unit testing I frequently require to test internal (private) logic, what is the best practice for this?","body":"<p>I believe everyone encounters a case when there's necessity to test internal wiring of the class/object. I know that in compiled languages this could be done through conditional compiling. Is this what I should do for JavaScript as well? What's the usual way to accomplish such task? Maybe I should just treat the class/object as a Black Box and only test it's outcomes?</p>\n"},{"tags":[".net","unit-testing","tdd","private"],"answer_count":24,"favorite_count":48,"up_vote_count":184,"down_vote_count":0,"view_count":52461,"score":184,"question_id":250692,"title":"How do you unit test private methods?","body":"<p>I'm building a class library that will have some public &amp; private methods. I want to be able to unit test the private methods (mostly while developing, but also it could be useful for future refactoring).</p>\n\n<p>What is the best way to do this?</p>\n"},{"tags":["unit-testing","tfsbuild","tfs2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13052374,"title":"Where to put 'useLegacyV2RuntimeActivationPolicy' for build in TFS2012","body":"<p>While i'm locally get the error in a unit test:</p>\n\n<pre><code>Mixed mode assembly is built against version 'v2.0.50727' of \nthe runtime and cannot be loaded in the 4.0 runtime without \nadditional configuration information\n</code></pre>\n\n<p>And the solution is to add </p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;startup useLegacyV2RuntimeActivationPolicy=\"true\"&gt;\n        &lt;supportedRuntime version=\"v4.0\"/&gt;\n   &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>to the config file located in </p>\n\n<pre><code>c:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\n\\CommonExtensions\\Microsoft\\TestWindow\\vstest.executionengine.x86.exe.config\n</code></pre>\n\n<p>This still is going wrong on our TFS2012 build server. I also added the startup tags to the file on the TFS2012, but the build server reports the error.</p>\n\n<p>How do I get this to work on a unit test project (using the new unit test framework of VS2012 &amp; TFS2012) in a build definition?</p>\n"},{"tags":["perl","unit-testing","code-coverage"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":9934816,"title":"Can I include an argument within a code reference when calling Test::Output::stdout_like()","body":"<p>I'm writing unit tests using Test::More and Test::Output.  I use Test::More to validate the return values and I plan to use Test::Output to validate the stdout produced by my subroutines. </p>\n\n<p>I am attempting to write test cases for a subroutine whose stdout is dependent on the arguments sent. Test::Output::stdout_like(code reference, regexp, test description) looks to have the functionality I want, however I am struggling to construct a code reference which contains an argument.  </p>\n\n<p>I presume this is a common practice within Perl unit testing scripts.  Can anyone offer an example?   </p>\n\n<p>Side note, thanks to Kurt W. Leucht for his Perl unit testing introduction: <a href=\"http://stackoverflow.com/questions/533553/perl-build-unit-testing-code-coverage-a-complete-working-example\">Perl build, unit testing, code coverage: A complete working example</a></p>\n"},{"tags":["unit-testing","mocking","phpunit"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13049993,"title":"PHP library similar to REST-driver in Java","body":"<p>I found this <a href=\"https://github.com/rest-driver/rest-driver/wiki/Client-driver\" rel=\"nofollow\">little library</a> to be perfect solution for my problem. It allows you to stub REST service responses easily. \nNow i need to replicate the same set of test cases in PHP version of our library. Do you know any similar library/framework in PHP?</p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13049359,"title":"Is it possible to test height and width of controls on a page","body":"<p>When using multiple browsers some controls appear out of the range of a page and some seems scattered using different browsers. Is there any way to write unit tests for all these layouts. I am exploring jquery testing with qunit, js-test-driver. But i don't know how to do this.</p>\n"},{"tags":[".net","xml","linq","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":350,"score":1,"question_id":7318157,"title":"Best way to compare XElement objects","body":"<p>in a unit test I'm comparing an XElement object with the one I expect. The method I use is to invoke .ToString() on the XElement object and compare it witha hard-codeds string value. This method turned out to be quite uncomfortable since I always have to pay attention on the formattin in the string.</p>\n\n<p>I checked out the XElement.DeepEquals() method but for any reason it doesn't help.</p>\n\n<p>Does anyone has an idea what is the best method I should use?</p>\n\n<p>Thanx in advance,\nllasarov</p>\n"},{"tags":["unit-testing","salesforce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13047544,"title":"Failure in pkb_Controller when running the unit tests on SalesForce","body":"<p>We are attempting to deploy some code into a production SalesForce instance. But deployement fail because already installed third party packages are failing the unit test requirements. We get the following error on all existing unit tests.</p>\n\n<blockquote>\n  <p>line -1, column -1: Previous load of class failed: pkb_Controller: line 1, column 24: Entity is not org-accessible</p>\n</blockquote>\n\n<p>Can you please advice us on how to fix this? And what is causing this error?</p>\n"},{"tags":["c++","unit-testing","teamcity","multiple-projects"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13034149,"title":"Unit-test multiple c++ projects and export results to TeamCity","body":"<p>I am introducing unit testing with Google Tests in my c++ projects. </p>\n\n<p>The projects are organized in multiple solutions, each solution containing one (main) project and its dependencies. There is also one build solution, containing all projects.</p>\n\n<p>Each project will add its own [project]_test project to the solution. </p>\n\n<p>The unit tests can be run locally for each project, for each solution.</p>\n\n<p>The build solution will have to be built using TeamCity.</p>\n\n<p><strong>The problem:</strong></p>\n\n<p>Google Tests provide an xml output that can be imported by TeamCity, to get test reports. But TeamCity is only capable of importing a single xml. </p>\n\n<p>Manufacturing a compound xml from all the reports from different projects changes the formatting expected by TeamCity, so the xml is no longer read.</p>\n\n<p>So far I have been unable to find anything that is capable of running multiple c++ projects, running tests, and obtaining test results, in TeamCity.</p>\n\n<p>What are my options ? Thank you.</p>\n"},{"tags":["c#","unit-testing","junit","nunit"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13012850,"title":"I always use xUnit's Assert.True(bool condition) for all of my unit tests. Is there a reason why I should use other asserts too?","body":"<p>I am unable to understand what other Asserts can offer that Assert.True cannot and why we should even use other Asserts in our unit tests.</p>\n"},{"tags":["android","unit-testing","mocking","android-activity"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13035134,"title":"Fastest way to create a mock Activity for testing","body":"<p>I'm currently unit-testing a library. In certain classes, I need to pass an activity as parameter in some static methods. The library itself contains no activities. I need to somehow obtain an instance of a mock activity to use in each individual method test. </p>\n\n<p>I've already read the <a href=\"http://developer.android.com/tools/testing/activity_testing.html\" rel=\"nofollow\">Activity Testing Tutorial</a> and the <a href=\"http://developer.android.com/tools/testing/testing_android.html\" rel=\"nofollow\">Testing Fundamentals</a> section. Most of what it is said there only makes sense if you are about to test Activities already existing in the project to be tested. But I just need a mock one to do things like showing dialogs and run short tasks in the Ui thread.</p>\n\n<p>What would the fastest, simplest way to achieve this? Should I create the mock activity in my test project and also provide xml layout resources for the dummy UI? </p>\n\n<hr>\n\n<p>UPDATE<br>\nSince I've not found any way of creating a mock activity automatically I decided to provide it by myself. I've created inside the test project a dummy activity doing nothing and provided a dummy layout via xml. Then I coded my test extending <code>ActivityInstrumentationTestCase2</code>:<br></p>\n\n<pre><code>    public class LibraryTest extends ActivityInstrumentationTestCase2&lt;MockActivity&gt; {\n\n        public LibraryTest(String name) {\n            super(MockActivity.class);\n        }\n\n        protected void setUp() throws Exception {\n            super.setUp();\n        }\n\n        public void testAMethodFromLibrary() {\n            fail(\"Not yet implemented\");\n        }\n    }\n</code></pre>\n\n<p>Where <code>MockActivity</code> is the aforementioned mock activity I've created in this test project. However, seems that the Android test framework is having trouble launching the activity and it comes up with this exception:</p>\n\n<pre><code>        java.lang.RuntimeException: Exception during suite construction\n        at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:239)\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\n        at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\n        at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)\n        at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447)\n        Caused by: java.lang.NullPointerException: Method name must not be null.\n        at java.lang.ClassCache.findMethodByName(ClassCache.java:297)\n        at java.lang.Class.getMethod(Class.java:985)\n        at android.test.suitebuilder.TestMethod.getAnnotation(TestMethod.java:60)\n        at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:39)\n        at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:30)\n        at com.android.internal.util.Predicates$OrPredicate.apply(Predicates.java:106)\n        at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:42)\n        at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:31)\n        at com.android.internal.util.Predicates$NotPredicate.apply(Predicates.java:122)\n        at android.test.suitebuilder.TestSuiteBuilder.satisfiesAllPredicates(TestSuiteBuilder.java:254)\n        at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:190)\n        at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:373)\n        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4218)\n        at android.app.ActivityThread.access$3000(ActivityThread.java:125)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:123)\n        at android.app.ActivityThread.main(ActivityThread.java:4627)\n        at java.lang.reflect.Method.invokeNative(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\n        at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>Now I'm totally lost here. How can this be so complicated? Have I chosen the correct way? I just want to launch a dialog in a test method. Maybe the framework is messing up because the activity to test is not in the target project?</p>\n\n<p>Any help here would be much appreciated. I'm getting out of time and if I can't find the proper way to do this I'd have to create a second project using my library, move the mock activity there and test from the test project. This is a lot of code because I'd have to include a method in a (now not generic) mock activity just to call every library method I want to test.</p>\n"},{"tags":["unit-testing","phpunit","assert"],"answer_count":4,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":2619,"score":8,"question_id":3838288,"title":"PHPUnit: assert two arrays are equal, but order of elements not important","body":"<p>What is a good way to assert that two arrays of objects are equal, when the order of the elements in the array is unimportant, or even subject to change?</p>\n"},{"tags":["entity-framework","unit-testing","mocking","tdd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13045499,"title":"Testing repository with DbContext - mocking issue concerning IDbSet","body":"<p>I am trying to test a repository that uses DbContext</p>\n\n<p>The issue I am running into is that DbCOntext wants to return DbSet for certain types</p>\n\n<p>I can't even mock IDbSet as it has a PRIVATE CTOR?!?!?!</p>\n\n<p>How is everyone getting over this?</p>\n"},{"tags":["c#","unit-testing","mstest"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":61,"score":2,"question_id":13032717,"title":"How to initialize some tests and not others?","body":"<p>Using <code>TestInitialize()</code>, I can initialize all the tests in the <code>TestClass</code>. But if I want only some tests to be initialize and not others, how can I achieve this?</p>\n"},{"tags":["c#",".net","excel","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":13037362,"title":"Read Rows in Excel File using c#","body":"<p>I have  added an Excel file to provide unit test values. </p>\n\n<p>Below is a example about what I was doing before  </p>\n\n<pre><code>public void test1()\n{\n    try\n    {\n        var Service = new Service.ServiceClient();\n        var Cid = testContextInstance.DataRow[\"CId\"].ToString();\n        var MNumber = testContextInstance.DataRow[\"MNumber\"].ToString();\n        var VID = testContextInstance.DataRow[\"VID\"].ToString();\n        var isVisit = new Service.ISVisit()\n        {\n        };\n\n    var first = Service.Medis(isVisit).Cast&lt;Service.ISMedi&gt;().FirstOrDefault();\n    // Assert\n    Assert.AreEqual(\"12345678\", first.Proc.ProcID);\n    }\n</code></pre>\n\n<p>.i am using excel sheet to provide values for the untitest.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9MPVE.png\" alt=\"enter image description here\"></p>\n\n<p>By using the sample code above i am able to loop through each row in the excel and set values to the variables.But the Requirement is not to attach excel as a Data Driven Source and not to use Oledb way to query things in Excel.They said me to use Microsoft.Office.Interop.Excel; .</p>\n\n<p>Can any one help me with how to change the code to retrive the data in excel , row by row and assign cells to respective variables using  different approach.??? This is a c# Unittest framework</p>\n"},{"tags":["unit-testing","event-handling"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12825018,"title":"Using Mock for event listeners in unit-testing","body":"<p>I keep getting to test this kind of code (language irrelevant) : </p>\n\n<pre><code>public class Foo() {\n\n   public Foo(Dependency1 dep1) {\n      this.dep1 = dep1;\n   }\n\n   public void setUpListeners() {\n      this.dep1.addSomeEventListener(.... some listener code ...);\n   }\n}\n</code></pre>\n\n<p>Typically, you want to test what when the dependency fires the event, the class under tests reacts appropriately (in some situation, the <em>only</em> purpose of such classes is to wire lots of other components, that can be independently tested.</p>\n\n<p>So far, to test this, I always end up doing something like : </p>\n\n<ul>\n<li>creating a 'stub' that implements both a <code>addXXXXListener</code>, that simply stores the callback, and a <code>fireXXXX</code>, that simply calls any registered listener. This is a bit tedious since you have to create the mock with the right interface, but that can do</li>\n<li>use an introspective framework that can 'spy' on a method, and inject the real dependency in tests</li>\n</ul>\n\n<p>Is there a cleaner way to do this kind of things ? </p>\n"},{"tags":["python","unit-testing","multiprocessing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13040739,"title":"Unit testing a blocking call on a different process (python)","body":"<p>I'm trying to unit test a call that blocks. Since it blocks, I was thinking of running the blocking command in another process and then killing it.</p>\n\n<pre><code>from multiprocessing import Process\nimport time\n\ndef foo():\n    # do blocking command\n\np = Process(target=foo)\np.start()\ntime.sleep(1)\np.terminate()\np.join()\nassert p.is_alive() == False\n# test foo has done something\n</code></pre>\n\n<p>The process seems to be killed and the test passes but the issue is that the blocking call seems to continue to run after the test is finished. I'm not sure what's happening. Any guidance would be appreciated.</p>\n"},{"tags":["unit-testing","symfony2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13040104,"title":"Symfony2 getting config params in unit test","body":"<p>I have a Symfony2 service that is constructed using a parameter from config.yml using dependency injection. I'm now trying to unit test it and find that the unit test does not have access to the container and therefore the service. So I should built one myself using mock data. It would make sense to me if I could now read the config parameter (going first to config_test.yml then config.yml etc etc) but it appears that isn't possible either. This appears to make unit testing a service cumbersome as I would need to code the initialisation parameters into the test instead of the config files.</p>\n\n<p>If there really is no way to construct a service with parameters from config.yml during a unit test, does anyone know the logic as to why it is a Bad Thing™?</p>\n"},{"tags":["javascript","unit-testing","qunit","typescript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13040167,"title":"QUnit Won't Run Tests","body":"<p>I'm just starting to use QUnit and having issues.</p>\n\n<p>I'm currently using TypeScript, which is a JavaScript compiler. I have my Tests in classes which parallel the structure of my main classes.</p>\n\n<p>In each of those classes, I have a function called runTests().</p>\n\n<p>To execute these tests, I loop through and get all the classes which end in \"Test\", and then call their runTests() function.</p>\n\n<p>An example of the runTests() function is:</p>\n\n<pre><code>runTests = function() {\n  QUnit.test(\"5 = 5\", function() {\n    QUnit.ok(5 == 5, \"okay\");\n  });\n}\n</code></pre>\n\n<p>I know all of the runTests() work (as in they are called, confirmed because of console output), but at most it only ever shows me one test. It seems to always be the last test called (even with multiple tests in the same runTests()).</p>\n\n<p>Is there some weird thing where QUnit resets itself which is why I'm only seeing one, or am I missing something even more fundamental?</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>The HTML I use is here, in case it matters:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;QUnit Example&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"qunit-git.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div id=\"qunit\"&gt;&lt;/div&gt;\n&lt;script src=\"qunit-1.10.0.js\"&gt;&lt;/script&gt;\n&lt;script src=\"mycode.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function runTest() {\n        var testClasses = getClassesRecurse(Test, []);\n\n        function getClassesRecurse(target, testClasses) {\n            if (typeof target == 'function' &amp;&amp; /Test$/.test(target.name)) {\n                testClasses.push(target);\n            } else if (typeof target == 'object') {\n                for (var i in target) {\n                    getClassesRecurse(target[i], testClasses);\n                }\n            }\n\n            return testClasses;\n        }\n\n        for (var i in testClasses) {\n            var testObj = new testClasses[i]();\n\n            if (testObj.runTests) {\n                console.log('Testing: ' + testClasses[i].name, testObj);\n                testObj.runTests();\n            }\n        }\n    }\n\n    runTest();\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["unit-testing","testing"],"answer_count":12,"favorite_count":4,"up_vote_count":12,"down_vote_count":0,"view_count":2100,"score":12,"question_id":363596,"title":"Unit testing a method that calls another method","body":"<p>What is the best way to unit test a method that calls into multiple methods, for example:</p>\n\n<pre><code>modify(string value)\n{\n    if(value.Length &gt; 5)  replaceit(value);\n\n    else changeit(value);\n}\n</code></pre>\n\n<p>This pseudo code has a modify method that (currently) calls either replaceit() or changeit().  I have already wrote tests for replaceit and changeit, so writing a new test for modify will be 99% the same set of code.  I need to test it thought because it may change in the future.  </p>\n\n<p>So do I copy paste the existing test code?  Move the test code to a common function?  Any other ideas?  I'm not sure of the best practice here.</p>\n"},{"tags":[".net","asp.net-mvc-3","unit-testing","moq","app-globalresources"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13013075,"title":"How do you Moq a .resx that lives in App_GlobalResource?","body":"<p>I'm writing unit tests for a controller in an MVC3 web project, but my tests throw exceptions when they try and access a resource like this:</p>\n\n<pre><code>return Index(Resources.Strings.MyStringResource);\n</code></pre>\n\n<p>The resource is a <code>.resx</code> file titled <code>Strings</code>.</p>\n\n<p>I'm using the <a href=\"http://code.google.com/p/moq/\" rel=\"nofollow\">Moq</a> libraries to achieve unit test for <code>HttpContextBase</code> functionality, so I was wondering how I would go about using the Moq libraries to access an App_GlobalResource.</p>\n\n<p>Any help or pointers would be greatly appreciated!</p>\n"},{"tags":["c#","unit-testing","unity","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12998732,"title":"how to register a rihno stub in MS unity?","body":"<p>I'm using Ms <code>unity container</code> and <code>rihno mock</code> for creating stubs.</p>\n\n<p>I try to create stube and register it in my unity container</p>\n\n<pre><code>IUnityContainer container = ContainerManager.GetDefaultContainer;\n\nvar loggerStub = MockRepository.GenerateStub&lt;ILogger&gt;();\n\ncontainer.RegisterType&lt;ILogger, loggerStub&gt;();\n</code></pre>\n\n<p>however, only class type can be registered.</p>\n\n<p>How can I register stub (like logger stub) inorder to rn my unit-test? </p>\n"},{"tags":["android","unit-testing","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12544262,"title":"Robolectric 1.2 : “WARNING: Unable to find path to Android SDK”","body":"<p>I used </p>\n\n<blockquote>\n  <p>Robolectric 1.1 jar-with-dependencies</p>\n</blockquote>\n\n<p>in my project and succeed to get it work, however when I changed the jar to </p>\n\n<blockquote>\n  <p>1.2-SNAPSHOT jar-with-dependencies</p>\n</blockquote>\n\n<p>I get the following warning:  </p>\n\n<blockquote>\n  <p>WARNING: Unable to find path to Android SDK</p>\n</blockquote>\n\n<ol>\n<li>Both jars downloaded from <a href=\"https://oss.sonatype.org/index.html#nexus-search;quick~robolectric\" rel=\"nofollow\">Sonatype</a> (I didn't use maven).</li>\n<li>I tried the solution from <a href=\"http://stackoverflow.com/questions/9352903/robolectric-warning-unable-to-find-path-to-android-sdk\">this</a> question and still get the warning. </li>\n</ol>\n"},{"tags":["unit-testing","ruby-1.9.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13033977,"title":"Failed to define a simple unit test testcase","body":"<p>I am trying to do a simple test case with Test Unit, in Ruby 1.9.1 (Ubuntu Linux 12.04 64 bits) : but it says me that the initialize method of my TestCase is missing arguments. And when I look further at the error, it says me that it tried to launch /usr/lib/ruby/1.9.1/minitest.</p>\n\n<p>However, I installed the Test Unit gem before.</p>\n\n<p>This is the first source file :\nRun.rb</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"test/unit\"\nrequire_relative \"NumbersSet.rb\"\n\ndef draw_result\n    the_drawn_result = nil\n    loop do\n        the_drawn_result = rand(1000)\n        break if the_drawn_result &gt;= 100\n    end\n    the_drawn_result\nend\n\ndef do_operation(operation, number_1, number_2)\n    return nil if number_1 &lt; 1 or number_2 &lt; 1\n    number_1, number_2 = number_2, number_1 if  number_1 &lt; number_2\n    case operation\n        when :add\n            result = number_1 + number_2\n            return \"#{number_1} + #{number_2} = #{result}\", result\n        when :sub\n            return nil if number_1 == number_2 # A zero result will not help us\n            result = number_1 - number_2\n            return \"#{number_1} - #{number_2} = #{result}\", result\n        when :mul\n            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this would be identity operation\n            result = number_1 * number_2\n            return \"#{number_1} * #{number_2} = #{result}\", result\n        when :div\n            return nil if number_1 == 1 or number_2 == 1 # Otherwise, this could be identity operation\n            return nil if number_1 % number_2 != 0\n            result = number_1 / number_2\n            return \"#{number_1} / #{number_2} = #{result}\", result\n        else\n            raise \"Unknown operation #{operation} !\"\n    end\nend\n\ndef play\n    drawn_numbers = NumbersSet.draw\n    puts drawn_numbers.inspect, draw_result\nend\n\nclass DrawTest &lt; Test::Unit::TestCase\n    def draw_test\n\n        assert_equal(nil, do_operation(:add, -3, 1))\n        assert_equal(nil, do_operation(:add, 1, -1))\n        assert_equal(nil, do_operation(:add, 5, 0))\n        assert_equal(nil, do_operation(:add, 0, 5))\n        assert_equal(nil, do_operation(:add, 3, 5))\n        assert_equal(nil, do_operation(:add, 5, 3))\n\n        assert_equal(nil, do_operation(:sub, 5, 3))\n        assert_equal(nil, do_operation(:sub, 3, 5))\n        assert_equal(nil, do_operation(:sub, 3, 3))\n\n        assert_equal(nil, do_operation(:mul, 3, 5))\n        assert_equal(nil, do_operation(:mul, 5, 3))\n        assert_equal(nil, do_operation(:mul, 3, 1))\n        assert_equal(nil, do_operation(:mul, 1, 3))\n\n        assert_equal(nil, do_operation(:div, 20, 3))\n        assert_equal(nil, do_operation(:div, 3, 20))\n        assert_equal(nil, do_operation(:div, 20, 1))\n        assert_equal(nil, do_operation(:div, 1, 20))\n        assert_equal(nil, do_operation(:div, 20, 4))\n        assert_equal(nil, do_operation(:div, 5, 20))\n\n    end\nend\n\nOPERATIONS = [:add, :sub, :mul, :div]\n\nDrawTest.new.draw_test\n</code></pre>\n\n<p>This is the second file : NumbersSet.rb</p>\n\n<pre><code>class NumbersSet\n\n    def self.draw\n        plaques = {}\n        (1..10).each { |value| plaques[value] = 2}\n        [25,50,75,100].each { |value| plaques[value] = 1}\n\n        draw_possibilities = (1..10).to_a &lt;&lt; 25 &lt;&lt; 50 &lt;&lt; 75 &lt;&lt; 100\n        the_draw = []\n        6.times do |loop_index|\n            drawn_number_index = nil\n            loop do\n                drawn_number_index = rand(draw_possibilities.size)\n                break if plaques[draw_possibilities[drawn_number_index]] &gt; 0\n            end\n            the_draw &lt;&lt; draw_possibilities[drawn_number_index]\n            plaques[draw_possibilities[drawn_number_index]] -= 1\n        end\n        the_draw\n    end\n\nend\n</code></pre>\n\n<p>And this this the terminal error :</p>\n\n<pre><code>$ ./Run.rb \n/usr/lib/ruby/1.9.1/minitest/unit.rb:971:in `initialize': wrong number of arguments (0 for 1) (ArgumentError)\n    from ./Run.rb:77:in `new'\n    from ./Run.rb:77:in `&lt;main&gt;'\n</code></pre>\n\n<p>So, is this really a bad coding from myself, or an installation issue ?\nThanks in advance.</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13034207,"title":"unittest: increase module's verbosity when tested","body":"<p>I have a module <code>mymodule</code> that I test with <code>unittest</code>. The module logs to stdout diagnostics messages when is in <em>verbose mode</em> (e.g. <code>mymodule.set_verbose(True)</code>) and remains silent otherwise. I would like that when I import the module in the main program it is in the <em>silent mode</em> and when the <code>unittest</code> runs, it is verbose.</p>\n\n<p>I tried to hack it in the unittest main loop, but it doesn't work</p>\n\n<pre><code>if __name__ == \"__main__\":\n  mymodule.set_verbose( True )\n  unittest.main() \n# apparently, modules are loaded on each test separately\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/questions/6429577/how-to-increase-verbosity-in-python-unittest\">How to increase verbosity in python unittest?</a> was not helpful.</p>\n"},{"tags":["c++","unit-testing","boost","statechart","boost-statechart"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13033282,"title":"boost statechart, unit-testing fraction of a state-machine","body":"<p>I'm looking for a way to execute (for unit-testing purposes) only fractions of a complex state -machine. For that purpose I'm evaluating boost::statechart framework.</p>\n\n<p>One way that I considered was to design a hierarchical state machine, where each state is defined as a nested state-machine, that should be tested separately.</p>\n\n<p>Consider the FSM definition from the following code snippet:</p>\n\n<pre><code>struct Fsm: boost::statechart::state_machine&lt; Fsm, StateA &gt;\n{\n  ...\n}\n\nstruct StatA : boost::simple_state&lt; StateA, Fsm, StateA1 &gt;\n{\n  ...\n}\n\nstruct StateB : boost::simple_state&lt; StateB, Fsm, StateB1 &gt;  \n{\n  ....\n}\n\nstruct StateA1 : boost::simple_state&lt; StateA1, StateA &gt;\n{\n  ....\n}\n\nstruct StateA2 : boost::simple_state&lt; StateA2, StateA &gt;\n{\n  ....\n}\n\nstruct StateB1 : boost::simple_state&lt; StateB1, StateB &gt;  \n{\n  ....\n}\n\nstruct StateB2 : boost::simple_state&lt; StateB2, StateB &gt;  \n{\n  ....\n}\n</code></pre>\n\n<p>Is it possible to unit-test the logic defined inside state B i.e. B1 and B2 inner states, without executing or even compiling the logic defined for state A including its inner A1 and A2 states?</p>\n\n<p>Thanks in advance,\nAmirH</p>\n"},{"tags":["unit-testing","windows-phone","portable-class-library","windows-phone-8"],"answer_count":2,"favorite_count":5,"up_vote_count":3,"down_vote_count":0,"view_count":199,"score":3,"question_id":12970194,"title":"Windows Phone development and Unit Testing","body":"<p>I'm looking to start a project targeting Windows Phone, but I'm slightly put off by the lack of unit testing support[1].</p>\n\n<p>I'm used to using NUnit/ XUnit for most of my testing needs, with something like NSubstitute for mocking. Near as I can tell, you can't use these frameworks for Windows Phone projects...</p>\n\n<p>Given some investigation, I was wondering if the following scenario would work:</p>\n\n<ul>\n<li>Use Visual Studio 2012</li>\n<li>Create a Portable Class Library project(s) for the View Models and other logic</li>\n<li>Create other Portable Class Library project(s) for the unit tests</li>\n<li>Wait for Windows Phone 8 SDK[2], then create the views using that.</li>\n</ul>\n\n<p>By using a Portable Class Library, I'm hoping that the unit tests will be as close as possible to running on the device, without having to crack open the emulator.</p>\n\n<p>Another plus point is that I can see that this solution working within a TFS build environment - so running the tests are part of a CI build...</p>\n\n<p>I was hoping to gauge peoples opinion on if this is a sensible move, or a fools errand... </p>\n\n<p>Thanks,<br />\nKieron</p>\n\n<p>[1] I know there are solutions out there, but none that seem as integrated as full framework testing - I'm talking specifically about support in VS2012/ Resharper for running unit tests without the need for an emulator.<br /></p>\n\n<p>[2] Does anyone know if you can target Windows Phone 7.x using the WP8 SDK?</p>\n"},{"tags":["javascript","internet-explorer","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":11323691,"title":"Using jasmine to compare arrays fails in ie8","body":"<p>Apparently ie8 has three properties that get appended to the resulting array from a call to <code>String.prototype.match()</code>: </p>\n\n<p><code>input</code>, <code>index</code> and <code>lastIndex</code></p>\n\n<p>(<a href=\"http://msdn.microsoft.com/en-us/library/7df7sf4x%28v=vs.94%29.aspx\" rel=\"nofollow\">MSDN Documentation</a>)</p>\n\n<p>The result is that array comparison fails when using Jasmine's <code>.toEqual()</code> matcher.</p>\n\n<p>I'm still working my way up the learning curve on unit testing, so I'm just curious of what the right way is to do deal with this failure.</p>\n\n<p>The following works but seems a bit lame:</p>\n\n<pre><code> numArray = str.match(/\\d+(\\.\\d+)?/g);\n if (numArray &amp;&amp; numArray.input) {\n      delete numArray.index;\n      delete numArray.input;\n      delete numArray.lastIndex;\n }\n</code></pre>\n"},{"tags":["c#","unit-testing","continuous-integration","nunit","finalbuilder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13034307,"title":"Continuous Integration - Tests Categorization","body":"<p>The current set up uses FinalBuilder for Continuous Integration &amp; builds of a enterprise wide suite of ASP.NET applications &amp; Services.  </p>\n\n<p>I intend to have NUnit hooked to the CI build process.</p>\n\n<p>What should be my top priority category of tests - which if failed - should halt the process?</p>\n\n<p>I plan to get with the Product Owners to find out the top functionalities that they cannot do without. But from a generic perspective what would/should be considered critical enough to halt the process?</p>\n"},{"tags":[".net","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":497,"score":2,"question_id":920412,"title":"Test project and config file","body":"<p>I have this kind of setup in my Visual Studio 2008 solution: One WCF service project (WCFService) which uses library (Lib1, which requires some configuration entries in app.config file). I have a unit test project (MSTest) which contains tests related to Lib1. In order to run those tests, I need a config file in test project. Is there any way to load it automatically from WCFService, so I do not need to change config entries on two places?</p>\n"},{"tags":["c#",".net","unit-testing","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13032056,"title":"How do I make nunit-console look in \\bin\\Debug\\ rather than \\bin\\x86\\Debug for assemblies?","body":"<p>I am trying to set up a build machine and want to run nunit (on several relatively big and dynamic solutions) from a batch script. I ran the following command lines</p>\n\n<pre><code>\"C:\\Program Files (x86)\\NUnit 2.6.1\\bin\\nunit-console-x86.exe\" \"C:\\MySolutionPath\\MySolution.sln\"\n\"C:\\Program Files (x86)\\NUnit 2.6.1\\bin\\nunit-console.exe\" \"C:\\MySolutionPath\\MySolution.sln\"\n</code></pre>\n\n<p>Both gave a System.IO.DirectoryNotFoundException:</p>\n\n<pre><code>NUnit-Console version 2.6.1.12217\nCopyright (C) 2002-2012 Charlie Poole.\nCopyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.\nCopyright (C) 2000-2002 Philip Craig.\nAll Rights Reserved.\n\nRuntime Environment -\n   OS Version: Microsoft Windows NT 6.1.7601 Service Pack 1\n  CLR Version: 2.0.50727.5456 ( Net 3.5 )\n\nProcessModel: Default    DomainUsage: Default\nExecution Runtime: net-3.5\nUnhandled Exception:\nSystem.IO.DirectoryNotFoundException: Could not find a part of the path 'C:\\MyProjectPath\\bin\\x86\\Debug\\MyAssembly.dll'.\n   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)\n   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean\n useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, St\nring msgPath, Boolean bFromProxy)\n   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)\n   at NUnit.Core.AssemblyReader.CalcHeaderOffsets()\n   at NUnit.Core.AssemblyReader..ctor(String assemblyPath)\n   at NUnit.Util.RuntimeFrameworkSelector.SelectRuntimeFramework(TestPackage package)\n   at NUnit.Util.DefaultTestRunnerFactory.GetTargetProcessModel(TestPackage package)\n   at NUnit.Util.DefaultTestRunnerFactory.MakeTestRunner(TestPackage package)\n   at NUnit.ConsoleRunner.ConsoleUi.Execute(ConsoleOptions options)\n   at NUnit.ConsoleRunner.Runner.Main(String[] args)\n</code></pre>\n\n<p>To me it looks like it is looking in the wrong folder: </p>\n\n<pre><code>C:\\MyProjectPath\\bin\\x86\\Debug\\MyAssembly.dll\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>C:\\MyProjectPath\\bin\\Debug\\MyAssembly.dll\n</code></pre>\n\n<p>Is there a way to specify this in NUnit (or if must be in the solution)?</p>\n"},{"tags":["eclipse","unit-testing","scala","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":11,"down_vote_count":0,"view_count":3013,"score":11,"question_id":2984192,"title":"How do you unit test Scala in Eclipse?","body":"<p>I am learning Scala and would like to set up integrated unit testing in Eclipse.\nAs far as I can tell from googling, ScalaTest is the way to go, possibly in combination with JUnit.</p>\n\n<p>What are your experiences with unit testing Scala in Eclipse? Should I use the JUnit runner or something else?</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13032575,"title":"Testing MVC Controller Action from raw POST data","body":"<p>I have a 3rd party vendor I want to integrate with my web site. I have a sample of the POST data they will be sending to me and I want to be able to write a unit test to verify I can process it from my controller action.</p>\n\n<p>Ideally I could have a unit test that loads the raw POST data from a file and I can invoke the action using that as input.</p>\n\n<p>What is the best approach? Or perhaps a testing framework for this?</p>\n"},{"tags":["unit-testing","rest","mocking","mockito"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13031901,"title":"How to mock test REST client?","body":"<p>T have a Rest Service Client which i am trying to Test.\nThis is the client method im trying to test:</p>\n\n<pre><code>public RestPriceRow getPriceRow(String customer, String product, String qt)\n    throws Exception {\n    // Prepare acceptable media type\n    List&lt;MediaType&gt; acceptableMediaTypes = new ArrayList&lt;MediaType&gt;();\n    acceptableMediaTypes.add(MediaType.APPLICATION_XML);\n\n    // Prepare header\n    HttpHeaders headers = new HttpHeaders();\n    headers.setAccept(acceptableMediaTypes);\n    HttpEntity&lt;PriceRowDto&gt; entity = new HttpEntity&lt;PriceRowDto&gt;(headers);\n\n    // Prepare response\n    RestPriceRow res = new RestPriceRow();\n\n    // Send the request as GET\n    try {\n        ResponseEntity&lt;PriceRowDto&gt; result =\n          restTemplate.exchange(baseURL + \"{customerId}/{productId}/{quantity}\",\n          HttpMethod.GET, entity, PriceRowDto.class, customer,product,qt);\n        PriceRowDto response = result.getBody();\n        return response;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>And this is my test class:</p>\n\n<pre><code>@Before\npublic void setUp() {\n    RestTemplate r = mock(RestTemplate.class);\n    restPriceService = new RestPriceServiceImpl();\n    restPriceService.setRestTemplate(r);\n    restPriceService.setBaseURL(\"url\");\n}\n\n@Test\npublic void prueba() {\n    PriceRowDto r = new PriceRowDto(\"100\",\"200\",\"9\",\"10\",\"0\",\"19/11/2012\");\n    try {\n        when(restPriceService.getPriceRow(\"100\",\"200\",\"16\")).thenReturn(r);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>My problem is that when i run this test, it throws me a <code>NullPointerException</code> when executing <code>result.getBody()</code>. (result is null)</p>\n"},{"tags":["unit-testing","compiler-errors","intellij-idea"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13031595,"title":"Run unit tests in intellij with errors in classes","body":"<p>Hi i am new to using Intellij and i like it very much. I have only one grievance and thats the compiler. I prefer the way the eclipse compiler will compile a project and skip classes with errors in them. </p>\n\n<p>This is particularly a problem for if i want to write a unit test for a method i have to fix all errors in the entire project for running a single unit test!</p>\n\n<p>You might say fix your project but im working on a project where people have already committed code with errors in it. How can i get around this, i saw there's an option to use the eclipse compiler in the settings but this has made no difference/i dont know the argument to skip errors.</p>\n"},{"tags":["php","unit-testing","phpunit","pear"],"answer_count":4,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":17491,"score":7,"question_id":4091862,"title":"Getting PHPUnit Working - Include Path not set correctly?","body":"<p>I'm trying to get PHPUnit working on my development environment but I've hit a bit of a roadblock when it comes to including PHPUnit in my scripts. I know that I need to set the include path on PHP but every combination I've tried fails without the compiler seeing the PHPUnit_Framework_TestCase class.</p>\n\n<p>I just ran updates on PHP and PEAR and PHPUnit is installed on the computer because I can access it through the command line just fine.</p>\n\n<p>PHPUnit is installed at <strong>/usr/share/php/PHPunit</strong></p>\n\n<p>Pear is at <strong>/usr/share/php/PEAR</strong></p>\n\n<p>Is there something I'm missing? This is my first time trying to use PHPUnit or even something from PEAR for that matter. I'm on Ubuntu 10.10. Any help would be appreciated.</p>\n\n<p>Edit - There is nothing in the include path in my PHP ini. Right now the code is just</p>\n\n<pre><code>&lt;?php\nclass Stacktest extends PHPUnit_Framework_TestCase\n{\n\n}\n</code></pre>\n\n<p>I have no idea what to include or what to set in the include path because it seems that for all the info on the web about PHPUnit, this little bit of information is critically absent.</p>\n"},{"tags":["unit-testing","node.js","testing","tdd","mongoose"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":13002506,"title":"What could I do to improve my testing?","body":"<p>Lately I've tried to get my head around good test driven development in Node JS with Mongoose as MongoDB wrapper. </p>\n\n<p>My question is am I doing it right. Am I testing the right stuff, should I do more test that cover empty values etc. What of the things do you think I could improve? Feel free to criticize as much as you like.</p>\n\n<p><strong>Test:</strong></p>\n\n<pre><code>var assert = require(\"assert\"),\n    mongoose = require(\"mongoose\"),\n    sugar = require(\"sugar\"),\n    Factory = require(\"factory-lady\"),\n    Timekeeper = require(\"timekeeper\"),\n    Link = require(\"./../app/models/link\");\n\nmongoose.connect(\"mongodb://localhost/link_test\");\n\nFactory.define(\"link\", Link, {\n  createdAt: new Date(\"2012-04-04\"),\n  title: \"Example\",\n  updatedAt: new Date(\"2012-04-05\"),\n  url: \"http://www.example.com\"\n});\n\ndescribe(\"Link\", function() {\n\n  describe(\"validation for\", function() {\n\n    [\"url\", \"title\"].forEach(function(property) {\n      it(\"must have a \" + property, function(done) {\n        Factory.build(\"link\", function(link) {\n          link[property] = null;\n          link.validate(function(err) {\n            assert.notEqual(err, null);\n            assert.notEqual(err.errors[property], null);\n            done();\n          });\n        });\n      });\n    });\n\n    it(\"should default the title to url if missing\", function(done) {\n      Factory.build(\"link\", function(link) {\n        link.title = undefined;\n        link.validate(function(err) {\n          assert.equal(link.title, link.url);\n          done();\n        });\n      });\n    });\n\n    describe(\"url\", function() {\n\n      [\"http://example.com\", \"http://www.example.com\",\n       \"http://nodejs.org/api/assert.html#assert_assert_deepequal_actual_expected_message\"].forEach(function(url) {\n        it(url + \" should be valid url\", function(done) {\n          Factory.build(\"link\", { url: url }, function(link) {\n            link.validate(function(err) {\n              assert.equal(err, null);\n              done();\n            });\n          });\n        });\n      });\n\n      [\"Invalid url\", \"example.com\"].forEach(function(url) {\n        it(url + \" should be invalid url\", function(done) {\n          Factory.build(\"link\", { url: url }, function(link) {\n            link.validate(function(err) {\n              assert.notEqual(err, null);\n              assert.notEqual(err.errors.url, null);\n              done();\n            });\n          });\n        });\n      });\n\n    });\n\n    describe(\"missing createdAt or updatedAt\", function() {\n\n      beforeEach(function() {\n        Timekeeper.freeze(new Date());\n      });\n\n      afterEach(function() {\n        Timekeeper.reset();\n      });\n\n      [\"createdAt\", \"updatedAt\"].forEach(function(property) {\n        it(\"should default the \" + property + \" to now if missing\", function(done) {\n          Factory.build(\"link\", function(link) {\n            link[property] = undefined;\n            link.validate(function(err) {\n              assert.deepEqual(link[property], new Date());\n              done();\n            });\n          });\n        });\n      });\n\n      [\"createdAt\", \"updatedAt\"].forEach(function(property) {\n        it(\"should leave the \" + property + \" unchanged if it's given\", function(done) {\n          Factory.build(\"link\", function(link) {\n            var date = new Date(\"2012-01-01\");\n            link[property] = date;\n            link.validate(function(err) {\n              assert.deepEqual(link[property], date);\n              done();\n            });\n          });\n        });\n      });\n\n      it(\"should default the updatedAt to now if missing when performing an update\", function(done) {\n        Factory(\"link\", function(link) {\n          link.validate(function(err) {\n            assert.equal(link.updatedAt, new Date());\n            done();\n          });\n        });\n      });\n\n      it(\"should leave the updatedAt unchanged if it's given when performing an update\", function(done) {\n        Factory(\"link\", function(link) {\n          var date = new Date(\"2012-01-01\");\n          link.updatedAt = date;\n          link.validate(function(err) {\n            assert.deepEqual(link.updatedAt, date);\n            done();\n          });\n        });\n      });\n\n    });\n\n  });\n\n});\n</code></pre>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>var mongoose = require(\"mongoose\"),\n    Schema = mongoose.Schema;\n\nvar linkSchema = new Schema({\n  createdAt: { type: Date, required: true },\n  title: { type: String, required: true },\n  updatedAt: { type: Date, required: true },\n  url: { type: String, required: true, validate: [validUrl, \"invalid url\"] }\n});\n\nfunction validUrl(url) {\n  if ((url instanceof String || typeof url == 'string') &amp;&amp; url.length) {\n    return url.match(/^\\b((?:https?:\\/\\/|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()&lt;&gt;]+|\\(([^\\s()&lt;&gt;]+|(\\([^\\s()&lt;&gt;]+\\)))*\\))+(?:\\(([^\\s()&lt;&gt;]+|(\\([^\\s()&lt;&gt;]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,&lt;&gt;?«»“”‘’]))$/i); \n  }\n}\n\nlinkSchema.pre(\"validate\", function (next) {\n  if (typeof this.title === \"undefined\" &amp;&amp; typeof this.url !== \"undefined\") {\n    this.title = this.url;\n  }\n  if (typeof this.createdAt === \"undefined\") {\n    this.createdAt = new Date();\n  }\n  if (typeof this.updatedAt === \"undefined\" || !this.isModified(\"updatedAt\")) {\n    this.updatedAt = new Date();\n  }\n  next();\n});\n\nmodule.exports = mongoose.model(\"Link\", linkSchema);\n</code></pre>\n"},{"tags":["unit-testing","akka"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13020761,"title":"Testkit, TestActorRef and TestProbbe","body":"<p>kind of new to akka actors </p>\n\n<p>but will like the know the use and differences between the TestKit , TastActorRef and TestProbe</p>\n\n<p>as used in akka unit testing.</p>\n\n<p>I have seen them used for unit testing akka systems but do not seem to understand the concept</p>\n\n<p>tried searching the internet but looks like documentation is sparse.</p>\n\n<p>Any brief explanation is welcomed.</p>\n\n<p>thanks ll .</p>\n"},{"tags":["java","web-services","unit-testing","jax-ws"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12977867,"title":"Is mocking an essential part of unit testing?","body":"<p>I have a web service which calls a third party web service.</p>\n\n<p>Now I want to unit-test my web service. For this, should I mock the third party web service or is it fine to call it during the tests?</p>\n\n<p>Is there any standard document on unit testing?</p>\n"},{"tags":["c#","xml","unit-testing","nunit"],"answer_count":13,"favorite_count":2,"up_vote_count":15,"down_vote_count":0,"view_count":3758,"score":15,"question_id":503784,"title":"Unit testing XML Generation","body":"<p>What unit testing strategies do people recommend for testing xml is being generated correctly.</p>\n\n<p>The my current tests seem abit primitive, something along the lines of:</p>\n\n<pre><code>[Test]\npublic void pseudo_test()\n{\n   XmlDocument myDOC = new XmlDocument();\n   mydoc = _task.MyMethodToMakeXMLDoc();\n\n   Assert.AreEqual(myDoc.OuterXML(),\"big string of XML\")\n}\n</code></pre>\n"},{"tags":["c#",".net","unit-testing","nunit","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13026340,"title":"Really basic moq example fails","body":"<p>I am trying out Moq, and I've gotten stuck in a very basic example. I want to mock a very simple interface IInput:</p>\n\n<pre><code>namespace Example\n{\n    public interface IInput\n    {\n        int SomeProperty { get; set; }\n    }\n} \n</code></pre>\n\n<p>This seems like a very easy job. However, I get a compilation error when I try to mock it in the following test code: </p>\n\n<pre><code>using Moq;\nusing NUnit.Framework;\n\nnamespace FirstEniro._Test\n{\n\n    [TestFixture]\n    class TestFirstClass\n    {\n        [Test]\n        public void TestConstructionOk()\n        {\n            var mock = new Mock&lt;IInput&gt;();\n            mock.Setup(r =&gt; r.SomeProperty).Returns(3);\n\n            var x = new FirstClass(mock);\n\n            Assert.That(x, Is.EqualTo(3));\n        }\n    }\n}\n</code></pre>\n\n<p>The compiler says \"cannot convert from <code>Moq.Mock&lt;Example.IInput&gt;</code> to <code>&lt;Example.IInput&gt;</code>. \nI can't see what I am doing wrong. Please help me </p>\n"},{"tags":["unit-testing","grails","gorm"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":13025820,"title":"Grails Unit Test \"CreateAlias\" doesn´t work","body":"<p>I am trying to make a unit test over a namedquery method and it´s not working as I am using the method grails.orm.HibernateCriteriaBuilder.createAlias which doesn´t seem to be found by Grails: \" No signature of method: grails.gorm.CriteriaBuilder.createAlias()\"</p>\n\n<p>I guess the problem is that when making a unit test and mocking the class, it´s trying to find the method around \"<strong>grails.gorm.CriteriaBuilder</strong>\" class and not <strong>grails.orm.HibernateCriteriaBuilder</strong> class,  why ??  any ideas to solve it?</p>\n\n<pre><code>class Book{\n  static namedQueries = {     \n      testMethod()\n      {\n         createAlias('name', 'james')\n      }\n   }\n}\n\n\n\n@Mock([Book])\nclass BookTests{\n  @Test\n  void myTest() {\n      Book.testMethod();\n   }\n}\n</code></pre>\n\n<p><strong>Error :  No signature of method: grails.gorm.CriteriaBuilder.createAlias()</strong></p>\n"},{"tags":["php","unit-testing","phpunit","ubuntu-11.10"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1617,"score":2,"question_id":8991620,"title":"Error when running PHPUnit","body":"<p>I get the following error when I try to run <code>phpunit .</code> from within my project's tests folder:</p>\n\n<pre><code>PHP Fatal error:  Call to undefined method PHP_CodeCoverage_Filter::getInstance() in /usr/share/php/PHPUnit/Framework.php on line 46\n</code></pre>\n\n<p>I installed PHPUnit via these commands:</p>\n\n<pre><code>sudo pear channel-discover pear.symfony-project.com\nsudo pear channel-discover components.ez.no\nsudo pear install --alldeps phpunit/PHPUnit\n</code></pre>\n\n<p>As none of the other methods seem to work, including <code>apt-get</code>.</p>\n\n<p>I <em>think</em> CodeCoverage changed their singleton pattern at some point in time and hence removed <code>getInstance</code> but I don't know how to fix this error. How can I either downgrade CodeCoverage or upgrade PHPUnit? </p>\n\n<p>I tried manually installing the latest versions of everything via the following commands:</p>\n\n<pre><code>sudo apt-get install git\nmkdir phpunit &amp;&amp; cd phpunit\ngit clone git://github.com/sebastianbergmann/phpunit.git\ngit clone git://github.com/sebastianbergmann/dbunit.git\ngit clone git://github.com/sebastianbergmann/php-file-iterator.git\ngit clone git://github.com/sebastianbergmann/php-text-template.git\ngit clone git://github.com/sebastianbergmann/php-code-coverage.git\ngit clone git://github.com/sebastianbergmann/php-token-stream.git\ngit clone git://github.com/sebastianbergmann/php-timer.git\ngit clone git://github.com/sebastianbergmann/phpunit-mock-objects.git\ngit clone git://github.com/sebastianbergmann/phpunit-selenium.git\ngit clone git://github.com/sebastianbergmann/phpunit-story.git\ngit clone git://github.com/sebastianbergmann/php-invoker.git\nsudo cp -r dbunit/PHPUnit /usr/share/php/\nsudo cp -r php-code-coverage/PHP /usr/share/php/\nsudo cp -r php-file-iterator/File /usr/share/php/\nsudo cp -r php-invoker/PHP /usr/share/php/\nsudo cp -r php-text-template/Text /usr/share/php/\nsudo cp -r php-timer/PHP /usr/share/php/\nsudo cp -r php-token-stream/PHP /usr/share/php/\nsudo cp -r phpunit/PHPUnit /usr/share/php/\nsudo cp -r phpunit-mock-objects/PHPUnit /usr/share/php/\nsudo cp -r phpunit-selenium/PHPUnit /usr/share/php/\nsudo cp -r phpunit-story/PHPUnit /usr/share/php/\nsudo cp -r phpunit/phpunit.php /usr/share/php/\n</code></pre>\n\n<p>But that didn't help any. Now I just have a bunch of junk all over the place :\\</p>\n\n<hr>\n\n<p>Version info:</p>\n\n<pre><code>PEAR Version: 1.9.4\nPHP Version: 5.3.6-13ubuntu3.3\nZend Engine Version: 2.3.0\nPHPUnit 3.6.9 by Sebastian Bergmann.\n</code></pre>\n\n<hr>\n\n<pre><code>Installed packages, channel pear.phpunit.de:\n============================================\nPackage            Version State\nFile_Iterator      1.3.1   stable\nPHPUnit            3.6.9   stable\nPHPUnit_MockObject 1.1.1   stable\nPHP_CodeCoverage   1.1.1   stable\nPHP_Invoker        1.1.0   stable\nPHP_Timer          1.0.2   stable\nPHP_TokenStream    1.1.2   stable\nText_Template      1.1.1   stable\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","unit-testing","anonymous-types"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":517,"score":1,"question_id":8465121,"title":"Casting anonymous type to dynamic","body":"<p>I have a function that returns an anonymous type which I want to test in my Mvc controller.</p>\n\n<pre><code>function JsonResult Foo()\n{\n    var data = new\n                  {\n                      details = \"something\",\n                      more = \"More\"\n                  };\n    return Json(data);\n}\n</code></pre>\n\n<p>I want to verify the data I get from the Foo function, What I'm doing now is get the data type and get his properties values with reflection. </p>\n\n<pre><code>[Test]\npublic void TestOne()\n{\n    var data = _controller.Foo().Data;\n    var details = data.GetType().GetProperty(\"details\").GetValue(data, null);\n    var more = data.GetType().GetProperty(\"more\").GetValue(data, null);\n\n    Assert.AreEquals(\"something\", details);\n    Assert.AreEquals(\"More\", more);\n}\n</code></pre>\n\n<p>Is there a simple way similar to this to check the anonymous properties?</p>\n\n<pre><code>[Test]\npublic void TestTwo()\n{\n    var data = (dynamic) _controller.Foo().Data;\n    var details = data.details; // RunTimeBinderException object does not contain definition for details\n    var more = data.more;\n\n    Assert.AreEquals(\"something\", details);\n    Assert.AreEquals(\"More\", more);\n}\n</code></pre>\n"},{"tags":["delphi","dunit","unit-testing"],"answer_count":6,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":358,"score":7,"question_id":4906955,"title":"How to access fields of a TTestCase in a TTestSetup class","body":"<p>I am creating unit tests with DUnit. I have a class that takes quite a long time to initialize. </p>\n\n<p>I derive a class TMyTestSetup from TTestSetup and override its Setup method. This SetUp method is only called once for all the tests in my TTestCase. I put the Initialization process in the TMyTestSetup.SetUp routine to increase performance.</p>\n\n<p>My problem is how can I access the object I want to initialize, which is a field of my TMyTest in the TestSetup class? Is the only way to do it declaring it globally?</p>\n\n<p>untested short example:</p>\n\n<pre><code>TMyTestSetup = class(TTestSetup)\n  protected\n    procedure SetUp; override;\nend;\n\nTMyTest = class(TTestcase)\npublic\n    fTakes4Ever2Init : TInits4Ever2Init;\npublished\n  procedure Test1;     \nend;\n\nimplementation\n\nprocedure TMyTestSetup.Setup;\nbegin\n   // How can I access fTakes4Ever2Init from here?\n  fTakes4Ever2Init.create // This is the call that takes long\nend;\n\nprocedure TMyTest.Test1;\nbegin\n  fTakes4Ever2Init.DoSomething;\nend;\n\ninitialization\n  RegisterTest(TMyTestSetup.Create(TMyTest.Suite));\n</code></pre>\n"},{"tags":["unit-testing","mocking"],"answer_count":4,"favorite_count":3,"up_vote_count":27,"down_vote_count":0,"view_count":4176,"score":27,"question_id":2665812,"title":"What is Mocking?","body":"<p>What is Mocking?                                                                                                    .</p>\n"},{"tags":["java","security","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13018059,"title":"How do I set the AccessControlContext in Java?","body":"<p>I'm fairly new to Java security stuff and I'm having a hard time figuring out how to google the right answer to this.</p>\n\n<p>I have a line of code that reads <code>AccessController.getContext()</code>.  </p>\n\n<p>I want to run a test where I mock the result of this.  Unfortunately, I have no idea what I'm doing.  </p>\n\n<p>How do I set the <code>AccessControlContext</code> returned by <code>AccessController.getContext()</code>?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Just to clarify, I know how to mock interfaces.  AccessController is a Java security feature.  I'm having trouble finding out how to set my own context so that when a method calls <code>AccessController.getContext()</code> it returns a AccessControlContext of my choosing.</p>\n"},{"tags":["unit-testing","profiling","visual-studio-2012"],"answer_count":2,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":343,"score":7,"question_id":12027885,"title":"How to profile unit tests in Visual Studio 2012?","body":"<p>Is it possible to <strong>profile</strong> MSTest unit tests in <strong>Visual Studio 2012 Ultimate</strong> without using any external profiling tools?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":74,"score":5,"question_id":13017966,"title":"Mocking a C# timer with Moq","body":"<p>I'm attempting to create a WPF MVVM View Model that has a dependency injected <code>System.Timing.Timer</code>, and wish to test the view model with Moq.</p>\n\n<p>I wrote a thin wrapper around the <code>Timer</code> class that has a interface <code>ITimer</code>, but am unsure of the best way to really test the timer's contribution to the class.  Is there a good way to 'force' a mock elapsed event? Does somebody else have a better technique?</p>\n"},{"tags":["unit-testing","mvc","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":605,"score":2,"question_id":3946273,"title":".net mvc2 custom HtmlHelper extension unit testing","body":"<p>My goal is to be able to unit test some custom HtmlHelper extensions - which use RenderPartial internally.</p>\n\n<p><a href=\"http://ox.no/posts/mocking-htmlhelper-in-asp-net-mvc-2-and-3-using-moq\" rel=\"nofollow\">http://ox.no/posts/mocking-htmlhelper-in-asp-net-mvc-2-and-3-using-moq</a></p>\n\n<p>I've tried using the method above to mock the HtmlHelper.  However, I'm running into Null value exceptions.\n\"Parameter name: view\"</p>\n\n<p>Anyone have any idea??  Thanks.</p>\n\n<p>Below are the ideas of the code:</p>\n\n<pre><code>    [TestMethod]\n    public void TestMethod1()\n    {\n        var helper = CreateHtmlHelper(new ViewDataDictionary());\n        helper.RenderPartial(\"Test\");  // supposingly this line is within a method to be tested\n        Assert.AreEqual(\"test\", helper.ViewContext.Writer.ToString());\n    }\n\n\n    public static HtmlHelper CreateHtmlHelper(ViewDataDictionary vd)\n    {\n        Mock&lt;ViewContext&gt; mockViewContext = new Mock&lt;ViewContext&gt;(\n            new ControllerContext(\n                new Mock&lt;HttpContextBase&gt;().Object,\n                new RouteData(),\n                new Mock&lt;ControllerBase&gt;().Object),\n            new Mock&lt;IView&gt;().Object,\n            vd,\n            new TempDataDictionary(),\n            new StringWriter());\n        var mockViewDataContainer = new Mock&lt;IViewDataContainer&gt;();\n        mockViewDataContainer.Setup(v =&gt; v.ViewData)\n            .Returns(vd);\n        return new HtmlHelper(mockViewContext.Object,\n                                mockViewDataContainer.Object);\n    }\n</code></pre>\n"},{"tags":["unit-testing","grails","groovy","spock","geb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13017050,"title":"Using Spock, how do you run a particular feature via the grails command line?","body":"<p>I am running Spock tests for unit and functional tests. Awesome library.</p>\n\n<p>I am wondering how to run a specific feature of a Spock Spec from the grails command line.</p>\n\n<p>I know how to run all spock tests or run a specific spec but I don't know how to run a specific feature.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","nunit"],"answer_count":5,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":127,"score":7,"question_id":13014385,"title":"NUnit test Bug? Expected <MyType> But was <MyType>","body":"<pre><code>[Test]\npublic void testMultiplication()\n{\n    var five=new Dollar(5);\n    Assert.AreEqual(new Dollar(10), five.times(2));\n    Assert.AreEqual(new Dollar(15), five.times(3));\n}\n</code></pre>\n\n<p>Dollar class</p>\n\n<pre><code>public class Dollar\n{\n    private int amount;\n\n    public Dollar(int amount)\n    {\n        this.amount = amount;\n    }\n\n    public Dollar times(int multiplier)\n    {\n        return new Dollar(amount * multiplier);\n    }\n\n    public bool equals(Object theObject)\n    {\n       Dollar dollar = (Dollar) theObject;\n\n       return amount == dollar.amount;\n    }\n}\n</code></pre>\n\n<p>On line  Assert.AreEqual(new Dollar(10), five.times(2)); test fail with error:</p>\n\n<p>Expected: TDDbooks.Dollar</p>\n\n<p>But was:  TDDbooks.Dollar</p>\n"},{"tags":["javascript","unit-testing","mocha","zombie.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13014866,"title":"Bind Code to ZombieJS HTML in Unit Test","body":"<p>I have some unit tests for client-side JS which I run. These tests include lots of jQuery code which assumes a certain document and certain elements in that document. I would like to mock the HTML using ZombieJS and then assert certain things about the state of the document.</p>\n\n<p>I cannot figure out how to get the ZombieJS document to stand-in for an HTML document in my tests. Zombie does have an \"evaluate\" feature which lets you run JS in the Zombie document. Is there any easier way to do this?</p>\n"},{"tags":["android","unit-testing","adb"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":491,"score":1,"question_id":4191285,"title":"How to start Android test unit from command line","body":"<p>Im writing automatic test for my program. I have completed writing it on Android. However, now I want to write a script to run it from command line adb shell. Do you know how to do it? As I test many components of my program, running it from script will save lots of my effort.</p>\n\n<p>Thanks.</p>\n\n<p>Here is my manifest file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; &lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  package=\"com.wsandroid.test\"\n  android:versionCode=\"1\"\n  android:versionName=\"1.0\"&gt;\n&lt;application android:icon=\"@drawable/icon\" android:label=\"@string/app_name\"&gt;\n&lt;uses-library android:name=\"android.test.runner\" /&gt;\n&lt;/application&gt;\n&lt;uses-sdk android:minSdkVersion=\"3\" /&gt;\n&lt;instrumentation android:targetPackage=\"com.wsandroid\" android:name=\"android.test.InstrumentationTestRunner\" /&gt;\n</code></pre>\n\n<p> </p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","frameworks","mutation-testing"],"answer_count":11,"favorite_count":8,"up_vote_count":13,"down_vote_count":0,"view_count":1383,"score":13,"question_id":246495,"title":"What mutation-testing frameworks exist?","body":"<p>In another <a href=\"http://stackoverflow.com/questions/242650/is-mutation-testing-useful-in-practice\">question</a> I asked if <a href=\"http://en.wikipedia.org/wiki/Mutation_testing\" rel=\"nofollow\">mutation-testing</a> is useful in practice. As I didn't get any answers that satisfy me, I want to check the current tools myself. So I need an overview about current existing mutation-test-frameworks. Which of them are most usable and why?</p>\n\n<ul>\n<li>I program in Java, so I would prefer Java-tools, but I would risk a look at interesting frameworks for different languages.</li>\n<li>I want to integrate in an automatic build-process, so I would prefer tools that can be executed through command-line.</li>\n</ul>\n"},{"tags":["java","unit-testing","mocking","final"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13012477,"title":"Is it possible to mock a private static final String literal?","body":"<p>My guess for the question above is that it is not possible but I need a confirmation. So the problem is that there is an Oracle specific SELECT (ROWNUM and FOR UPDATE SKIP LOCKED keywords are used) in a private static final String.</p>\n\n<pre><code>private static final String REC_QUERY_SELECT = \"SELECT * FROM ... WHERE ROWNUM &lt;=1 for update skip locked\";\n</code></pre>\n\n<p>I want to unittest it whit HSQL but HSQL doesn't know these Oracle keywords. I would like to modify the REC_QUERY_SELECT variable (modify the SELECT to a simpler one) but I cannot as it is final and String literal.\nIs there a way to modify it? (I mustn't change the codebase, I just have to write unit tests). I tried this code too:</p>\n\n<pre><code>field.setAccessible(true);\nField modifiersField = Field.class.getDeclaredField(\"modifiers\");\nmodifiersField.setAccessible(true);\nmodifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\nfield.set(null, newValue);\n</code></pre>\n"},{"tags":["c#","unit-testing","resharper","signalr","ncrunch"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12896726,"title":"Unit tests running in NCrunch but not in Resharper","body":"<p>I've got a set of unit tests that used to work very nicely in NCrunch and the Resharper 7 (in VS2012) test runner. I added SignalR and SignalR.Ninject through NuGet, and now my unit tests work in NCrunch, but no longer run in Resharper.</p>\n\n<p>The TestFixtureSetUp failed with the following error: </p>\n\n<pre><code>SetUp : System.IO.FileLoadException : Could not load file or assembly \n'Ninject, Version=2.2.0.0,    Culture=neutral, PublicKeyToken=c7192dc5380945e7' \nor one of its dependencies. The located assembly's manifest definition does \nnot match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nat ProjectName.Infrastructure.SiteResolver.BindSignalR(IKernel kernel)\nat ProjectName.Infrastructure.SiteResolver.RegisterServices(IKernel kernel) in SiteResolver.cs: line 29\nat ProjectName.Tests.Unit.DataTests.Init() in DataTests.cs: line 48\n</code></pre>\n\n<p>In App.Config, I have </p>\n\n<pre><code>&lt;runtime&gt;\n  &lt;assemblyBinding&gt;\n    &lt;dependentAssembly&gt;\n      &lt;assemblyIdentity name=\"Ninject\" publicKeyToken=\"c7192dc5380945e7\" culture=\"neutral\" /&gt;\n      &lt;bindingRedirect oldVersion=\"0.0.0.0-3.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n    &lt;/dependentAssembly&gt;\n  &lt;/assemblyBinding&gt;\n&lt;/runtime&gt;\n</code></pre>\n\n<p>The equivalent in Web.Config works in the actual MVC project. </p>\n\n<p>Any ideas how to fix it?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've tried with shadow-copying on and off, with no difference in outcome.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Output from log file generated from Jim Skim's answer:</p>\n\n<pre><code>*** Assembly Binder Log Entry  (15/10/2012 @ 16:43:47) ***\n\nThe operation failed.\nBind result: hr = 0x80131040. No description available.\n\nAssembly manager loaded from:  C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\clr.dll\nRunning under executable  C:\\Program Files (x86)\\JetBrains\\ReSharper\\v7.0\\Bin\\JetBrains.ReSharper.TaskRunner.CLR4.MSIL.exe\n--- A detailed error log follows. \n\n=== Pre-bind state information ===\nLOG: User = ######\\simon\nLOG: DisplayName = Ninject, Version=2.2.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7\n (Fully-specified)\nLOG: Appbase = file:///Z:/ProjectName/ProjectName.Tests.Unit/bin/Debug\nLOG: Initial PrivatePath = NULL\nLOG: Dynamic Base = NULL\nLOG: Cache Base = NULL\nLOG: AppName = ProjectName.Tests.Unit\nCalling assembly : ProjectName.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.\n===\nLOG: This bind starts in default load context.\nLOG: Using application configuration file: Z:\\ProjectName\\ProjectName.Tests.Unit\\bin\\Debug\\ProjectName.Tests.Unit.dll.config\nLOG: Using host configuration file: \nLOG: Using machine configuration file from C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\config\\machine.config.\nLOG: Post-policy reference: Ninject, Version=2.2.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7\nLOG: GAC Lookup was unsuccessful.\nLOG: Attempting download of new URL file:///Z:/ProjectName/ProjectName.Tests.Unit/bin/Debug/Ninject.DLL.\nLOG: Assembly download was successful. Attempting setup of file: Z:\\ProjectName\\ProjectName.Tests.Unit\\bin\\Debug\\Ninject.dll\nLOG: Entering run-from-source setup phase.\nLOG: Assembly Name is: Ninject, Version=3.0.0.0, Culture=neutral, PublicKeyToken=c7192dc5380945e7\nWRN: Comparing the assembly name resulted in the mismatch: Major Version\nERR: The assembly reference did not match the assembly definition found.\nERR: Run-from-source setup phase failed with hr = 0x80131040.\nERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.\n</code></pre>\n"},{"tags":["c++","python","unit-testing","boost","boost-test"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12731079,"title":"How to write a script to perform automatic test with boost::unit_test?","body":"<p>I am a newbie of automatic unit test in C++. I have followed the instruction of boost::unit_test and finished a test scheme by calling function <code>unit_test_main</code> in boost::unit_test. It is no problem for me to run the test program. However, I have problems with pass the arguments to the test function. Maybe, the following codes can illustrate my problem much better:</p>\n\n<pre><code>#ifndef MAIN_CPP_\n#define MAIN_CPP_\n\n\n\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;assert.h&gt;\n\n#include &lt;boost/program_options.hpp&gt;\n#include &lt;boost/test/test_tools.hpp&gt;\n#include &lt;boost/test/execution_monitor.hpp&gt;\n#include &lt;boost/test/unit_test.hpp&gt;\n\n\n\n\nusing namespace boost::program_options;\nusing namespace std;\nusing namespace boost;\nusing namespace boost::unit_test;\n\n\n\n\n/**\n* the global test suite\n*/\n\nboost::unit_test::test_suite* get_feelfree_test_suite();\nboost::unit_test::test_suite* main_global_test_suite;\n\n/**\n* name of the test suite\n*/\nstd::string current_global_test_suite_name;\n\n#ifdef BOOST_TEST_ALTERNATIVE_INIT_API\n\nbool  run_global_test_suite () {\n    boost::unit_test::test_suite&amp; masterTestSuite = framework::master_test_suite();\n\n    if(masterTestSuite.size() != 0) {\n        test_unit_id formerTestSuite = masterTestSuite.get(current_global_test_suite_name);\n        masterTestSuite.remove(formerTestSuite);\n\n    }\n    masterTestSuite.add(main_global_test_suite);\n    current_global_test_suite_name = main_global_test_suite-&gt;p_name.get();\n\n    return true;\n}\n#else\n    test_suite* run_global_test_suite(int, char* []) {\n    return main_global_test_suite;\n}\n#endif\n\n/**\n* Obtain test program options\n*/\nint obtain_options(char **optionLine, int argc, char** argv); \n\n\n\n\n\n/**\n* This function is used to run the test program, and the procedure is really standard.\n*/\nint main( int argc, char* argv[] )\n{\n    try \n    {\n        /**\n        * Step 1. obtain options\n        */\n        char* optionLine[1024];\n        int len ;\n        len = obtain_options(optionLine, argc, argv);\n        /**\n        * Step 2. perform unit test based on user's options\n        */\n        int test_status=0; \n        main_global_test_suite =   get_feelfree_test_suite();\n        test_status = unit_test_main(run_global_test_suite, len, optionLine);\n        return test_status;\n    } \n    catch(std::exception&amp; e)\n    {\n        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n        return 1;\n    }   \n    catch (const std::string&amp; s) \n    {\n        std::cout &lt;&lt; s &lt;&lt; std::endl;\n        return 1;\n    }\n    catch (...)\n    {\n        return 1;\n    }\n\n\n}\n/** @} */ \n\n\nint obtain_options(char **optionLine, int argc,  char* argv[])\n{\n    // 1. All the options for testing the program\n        options_description desc(\"Allowed options\");\n        desc.add_options()(\"help\", \"produce help message\")\n        (\"detect_memory_leaks\", value&lt;bool&gt;()-&gt;default_value(false), \"test configuration option (option of boost framework)\");\n        // 2. Perform parsing \n        variables_map vm;\n        store(parse_command_line(argc, argv, desc), vm);\n        notify(vm);\n        // 3. Illustrate the input \n        std::vector&lt;const char*&gt; options;\n        std::string testSuiteToRun;\n        if(vm.count(\"test_suite\")){  \n            testSuiteToRun = vm[\"test_suite\"].as&lt;string&gt;(); \n        }\n        else {\n            testSuiteToRun = \"main\";\n        }   \n\n        options.push_back(argv[0]);\n        if(vm.count(\"detect_memory_leaks\")) {  \n            bool detect = vm[\"detect_memory_leaks\"].as&lt;bool&gt;();\n            if(detect) {\n                options.push_back(\"--detect_memory_leaks=1\");\n            }\n            else {\n            options.push_back(\"--detect_memory_leaks=0\");\n            }\n        }\n        else {\n            options.push_back(\"--detect_memory_leaks=0\");\n        }\n\n        // 4. Obtain all the parameters in the format of char** \n\n        assert(options.size() &lt; 1024);\n        std::copy(options.begin(), options.end(), const_cast&lt;const char**&gt;(optionLine));\n\n        return options.size();\n\n}\n\nvoid Testsub(const std::string &amp;name)\n{\n    cout&lt;&lt;\"File_name: \"&lt;&lt;name&lt;&lt;endl;\n}\nvoid Testabc( )\n{\n    std::vector&lt;std::string &gt; name_array;\n    name_array.push_back(\"name 1\");\n    name_array.push_back(\"name 2\");\n    for(int i=0; i&lt;name_array.size(); i++)\n        Testsub(name_array[i]);\n}\n\n\nboost::unit_test::test_suite* get_feelfree_test_suite()\n{\n    test_suite* ts = BOOST_TEST_SUITE( \"unit_geometric\" );\n    ts-&gt;add( BOOST_TEST_CASE(&amp;Testabc) ); \n    return ts;\n}\n\n\n#endif\n</code></pre>\n\n<p>As you can see, in this test framework, the main function I want to test is <strong>Testsub</strong>, which relies on the input argument <strong>const std::string &amp;name</strong>. However, I can not pass any arguments via the test suite function <strong>get_feelfree_test_suite</strong>. Therefore, in this test program, I wrote another test function <strong>Testabc</strong>, where all the possible file test lists are given and passed to <strong>Testsub</strong>. This is definitely not the best solution. I am wondering whether there are other solutions. Several solutions are in my mind, but I do not know whether they are good solutions:</p>\n\n<ul>\n<li>Solution 1: try to figure out a way to pass arguments to\n<strong>get_feelfree_test_suite</strong> from the main function ( <code>int main( int argc, char* argv[]</code> ). After that, write a script to run the program\nseveral times. In windows, one possible script is .bat script. For\nthis solution, I do not know how to implement it. </li>\n<li>Solution 2:    write a list file, where all the possible input\nfile test names are    given, and then read the list file in the\nprogram. This is much    easier to implement.</li>\n</ul>\n\n<p>I also hear that Python can be very easily incorporated in the test framework, but I have no idea about that. Anyway, I am open to all the possible solutions, and thanks! </p>\n"},{"tags":["java","unit-testing","gwt","junit","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13007839,"title":"Mocking chained method calls using mockito?","body":"<p>I need to mock this:<br></p>\n\n<pre><code> void handleCellPreview(CellPreviewEvent&lt;List&lt;String&gt;&gt; event) {\n    Element cellElement = event.getNativeEvent().getEventTarget().cast();\n }\n</code></pre>\n\n<p>I am doing this:</p>\n\n<pre><code>CellPreviewEvent&lt;List&lt;String&gt;&gt; cellPreviewEvent = Mockito.mock(\n        CellPreviewEvent.class, Mockito.RETURNS_DEEP_STUBS);\nElement cellElement = Mockito.mock(Element.class, Mockito.RETURNS_DEEP_STUBS);\nEventTarget eventTarget = Mockito.mock(EventTarget.class);\n  Mockito.when(cellPreviewEvent.getNativeEvent().getEventTarget().cast()).thenReturn(cellElement);\n</code></pre>\n\n<p><br></p>\n\n<p>And I am getting following error:</p>\n\n<pre><code>testHandleCellPreview(client.view.MyViewTest)java.lang.NullPointerException\n    at com.google.gwt.dom.client.NativeEvent.getEventTarget(NativeEvent.java:137)\n    atclient.view.MyViewTest.testHandleCellPreview(MyViewTest.java:76)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n</code></pre>\n\n<p><br>I've also seen, the same question below:\n<br>\n<a href=\"http://stackoverflow.com/q/7926891/768894\">mock or stub for chained call</a><br><br>\nCan anybody please point out what I am missing?\n<br><br>\nThanks,<br>\nMohit</p>\n"},{"tags":["java","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13009706,"title":"Interface used to make it more testable","body":"<p>I was looking at android source code and i found this code.</p>\n\n<pre><code>/**\n * Interface used in {@link #createUniqueFile} instead of {@link File#createNewFile()} to make\n * it testable.\n */\n/* package */ interface NewFileCreator {\n    public static final NewFileCreator DEFAULT = new NewFileCreator() {\n                @Override public boolean createNewFile(File f) throws IOException {\n                    return f.createNewFile();\n                }\n    };\n    public boolean createNewFile(File f) throws IOException ;\n}\n</code></pre>\n\n<p>How is it more testable? And can anybody redirect me to the place where i can see more examples?</p>\n"},{"tags":["c#","unit-testing","xunit.net"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1077,"score":2,"question_id":9006615,"title":"Are there any good documentations / books / tutorials for xUnit.NET?","body":"<p>On my search for a Unit-Testing tool for C# i have found xUnit.NET. Untill now, i read most of the articles on <a href=\"http://xunit.codeplex.com//\" rel=\"nofollow\">http://xunit.codeplex.com/</a> and even tried out the examples given at <a href=\"http://xunit.codeplex.com/wikipage?title=HowToUse&amp;referringTitle=Home\" rel=\"nofollow\">How do I use xUnit.net?</a>. </p>\n\n<p>But sadly, on the offical page i could just find the basic informations to xUnit.NET. Is there any further information avadible for it?</p>\n\n<p>Thank you!<br>\nBirgit</p>\n"},{"tags":["asp.net","unit-testing","nunit","watin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":4444275,"title":"Verifying binary content with WatiN","body":"<p>I'm testing a site that serves up some binary (i.e. non-HTML) content. Some links directly deliver custom images, other links custom PDF's.</p>\n\n<p>I'm building test cases in WatiN and NUnit. Wondering if there's a way, using WatiN to get it load a page and then get the byte[] contents of that page.</p>\n\n<p>Currently, I'm just launching a WebClient to grab the content, rather than through WatiN but that's more untested code in my test suite.</p>\n\n<p>Anyone else doing this and have suggestions?</p>\n"},{"tags":["django","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12150169,"title":"Mocking Django Model ImageField backend","body":"<p>I have a model with an ImageField that is backed by django-storages' S3Boto.  I have a test the exercises the \"upload image\" view, but the fact that it is uploading the image to S3 is slowing down my test suite.</p>\n\n<p>In the interest of speeding up my tests, what is the best practice for dealing with this issue?  Should I mock out S3Boto?  Perhaps there is a memory backed storage backend that works well for testing (automatic cleanup would be nice!)?</p>\n"},{"tags":["unit-testing","spring","embedded-database","h2"],"answer_count":4,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":9685,"score":7,"question_id":2012292,"title":"Spring configuration for embedded H2 database for tests","body":"<p>What does your Spring configuration for a datasource with embedded <a href=\"http://www.h2database.com/html/main.html\" rel=\"nofollow\">h2 database</a> that you use for integration (JUnit-)tests look like? My first try with a <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/datasource/SingleConnectionDataSource.html\" rel=\"nofollow\">SingleConnectionDataSource</a> basically worked, but failed on more complicated tests where you need several connections at the same time or suspended transactions. You might start h2 in <a href=\"http://stackoverflow.com/questions/1503079/start-the-h2-database-in-server-mode-via-spring\">tcp based server mode</a> as well, but this is probably not the fastest communication mode for a temporary embedded database in memory. What are the possibilities and their advantages / disadvantages? And how do you create the tables / populate the database?</p>\n\n<p>Update: Let's specify some concrete requirements that are important for such tests.</p>\n\n<ul>\n<li>The database should be temporary and in memory</li>\n<li>The connection should probably not use tcp to be fast</li>\n<li>It would be nice if I could use a database tool to inspect the content of the database during debugging</li>\n<li>We have to define a datasource since we can't use the application servers datasource in Unittests</li>\n</ul>\n"},{"tags":["android","unit-testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":272,"score":0,"question_id":8688252,"title":"What does testAndroidTestCaseSetUpProperly do","body":"<p>I know that in Android, the extra test testAndroidTestCaseSetUpProperly is often added to test cases (not sure whether it happens all the time). I've never needed to give it much though before, but whilst analysing some tests which use a ContentProvider I noticed something strange.</p>\n\n<p>When I added the following logging in my ContentProvider:</p>\n\n<pre><code>static\n{\n    Log.d(\"UKMPG\", \"Initialising URIMatcher\");\n    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);\n    //add uris\n}\n\n    @Override\npublic boolean onCreate()\n{\n    Log.d(\"UKMPG\", \"onCreate() called in ContentProvider\");\n    //set up db\n}\n</code></pre>\n\n<p>I notice that these logs appear twice in logcat (blank lines added by me):</p>\n\n<pre><code>    12-31 13:00:07.112: D/AndroidRuntime(1135): &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; AndroidRuntime START &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n12-31 13:00:07.112: D/AndroidRuntime(1135): CheckJNI is ON\n12-31 13:00:07.333: D/AndroidRuntime(1135): --- registering native functions ---\n12-31 13:00:07.342: I/jdwp(1135): received file descriptor 21 from ADB\n12-31 13:00:07.592: D/ddm-heap(1135): Got feature list request\n12-31 13:00:08.072: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:08.112: I/ActivityManager(52): Start proc com.fastplanet.ukmpgtracker for added application com.fastplanet.ukmpgtracker: pid=1142 uid=10028 gids={1015}\n12-31 13:00:08.162: I/jdwp(1142): received file descriptor 10 from ADB\n12-31 13:00:08.222: D/ddm-heap(1142): Got feature list request\n12-31 13:00:08.502: I/TestRunner(1142): started: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:08.512: I/ActivityThread(1142): Publishing provider com.fastplanet.ukmpgtracker.data.UKMPG: com.fastplanet.ukmpgtracker.data.UKMPGContentProvider\n\n12-31 13:00:08.512: D/UKMPG(1142): Initialising URIMatcher\n12-31 13:00:08.522: D/UKMPG(1142): onCreate() called in ContentProvider\n\n12-31 13:00:08.552: I/TestRunner(1142): finished: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:08.552: I/TestRunner(1142): passed: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:08.582: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:08.582: D/ActivityManager(52): Force removing process ProcessRecord{43879630 1142:com.fastplanet.ukmpgtracker/10028} (com.fastplanet.ukmpgtracker/10028)\n12-31 13:00:08.582: I/Process(52): Sending signal. PID: 1142 SIG: 9\n12-31 13:00:08.602: D/ActivityManager(52): Received spurious death notification for thread android.os.BinderProxy@4394fed0\n12-31 13:00:08.612: D/AndroidRuntime(1135): Shutting down VM\n12-31 13:00:08.612: D/dalvikvm(1135): DestroyJavaVM waiting for non-daemon threads to exit\n12-31 13:00:08.622: D/dalvikvm(1135): DestroyJavaVM shutting VM down\n12-31 13:00:08.622: D/dalvikvm(1135): HeapWorker thread shutting down\n12-31 13:00:08.622: D/dalvikvm(1135): HeapWorker thread has shut down\n12-31 13:00:08.622: D/jdwp(1135): JDWP shutting down net...\n12-31 13:00:08.622: D/jdwp(1135): Got wake-up signal, bailing out of select\n12-31 13:00:08.622: I/dalvikvm(1135): Debugger has detached; object registry had 1 entries\n12-31 13:00:08.632: D/dalvikvm(1135): VM cleaning up\n12-31 13:00:08.642: D/dalvikvm(1135): LinearAlloc 0x0 used 684532 of 4194304 (16%)\n12-31 13:00:09.042: D/AndroidRuntime(1155): &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; AndroidRuntime START &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n12-31 13:00:09.042: D/AndroidRuntime(1155): CheckJNI is ON\n12-31 13:00:09.272: D/AndroidRuntime(1155): --- registering native functions ---\n12-31 13:00:09.282: I/jdwp(1155): received file descriptor 21 from ADB\n12-31 13:00:09.552: D/ddm-heap(1155): Got feature list request\n12-31 13:00:10.062: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:10.082: I/ActivityManager(52): Start proc com.fastplanet.ukmpgtracker for added application com.fastplanet.ukmpgtracker: pid=1162 uid=10028 gids={1015}\n12-31 13:00:10.133: I/jdwp(1162): received file descriptor 10 from ADB\n12-31 13:00:10.172: D/ddm-heap(1162): Got feature list request\n12-31 13:00:10.472: I/TestRunner(1162): started: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n\n\n12-31 13:00:10.512: D/UKMPG(1162): Initialising URIMatcher\n12-31 13:00:10.512: D/ActivityThread(1162): Loading provider com.fastplanet.ukmpgtracker.data.UKMPG: com.fastplanet.ukmpgtracker.data.UKMPGContentProvider\n12-31 13:00:10.522: D/UKMPG(1162): onCreate() called in ContentProvider\n\n\n12-31 13:00:10.532: I/ActivityThread(1162): Publishing provider com.fastplanet.ukmpgtracker.data.UKMPG: com.fastplanet.ukmpgtracker.data.UKMPGContentProvider\n12-31 13:00:10.532: D/UKMPG(1162): onCreate() called in ContentProvider\n12-31 13:00:10.812: I/TestRunner(1162): finished: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:10.822: I/TestRunner(1162): passed: testAddNewVehicle(com.fastplanet.ukmpgtracker.test.VehicleProviderTest)\n12-31 13:00:10.842: D/ActivityManager(52): Uninstalling process com.fastplanet.ukmpgtracker\n12-31 13:00:10.852: D/ActivityManager(52): Force removing process ProcessRecord{4395a680 1162:com.fastplanet.ukmpgtracker/10028} (com.fastplanet.ukmpgtracker/10028)\n12-31 13:00:10.852: I/Process(52): Sending signal. PID: 1162 SIG: 9\n12-31 13:00:10.872: D/ActivityManager(52): Received spurious death notification for thread android.os.BinderProxy@4395fe78\n12-31 13:00:10.872: D/AndroidRuntime(1155): Shutting down VM\n12-31 13:00:10.872: D/dalvikvm(1155): DestroyJavaVM waiting for non-daemon threads to exit\n12-31 13:00:10.882: D/dalvikvm(1155): DestroyJavaVM shutting VM down\n12-31 13:00:10.882: D/dalvikvm(1155): HeapWorker thread shutting down\n12-31 13:00:10.892: D/dalvikvm(1155): HeapWorker thread has shut down\n12-31 13:00:10.892: D/jdwp(1155): JDWP shutting down net...\n12-31 13:00:10.892: D/jdwp(1155): Got wake-up signal, bailing out of select\n12-31 13:00:10.892: I/dalvikvm(1155): Debugger has detached; object registry had 1 entries\n12-31 13:00:10.892: D/dalvikvm(1155): VM cleaning up\n12-31 13:00:10.912: D/dalvikvm(1155): LinearAlloc 0x0 used 684532 of 4194304 (16%)\n</code></pre>\n\n<p>The first time they are logged, the application column is blank, but the second time my top level package appears.</p>\n\n<p>Any ideas what this extra test does?</p>\n"},{"tags":["unit-testing","testing","emulation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":146,"score":1,"question_id":6953763,"title":"Gameboy emulator testing strategies?","body":"<p>I'm writing a gameboy emulator, and am struggling with making sure opcodes are emulated correctly. Certain operations set flag registers, and it can be hard to track whether the flag is set correctly, and where.</p>\n\n<p>I want to write some sort of testing framework, but thought it'd be worth asking here for some help. Currently I see a few options:</p>\n\n<p>Unit test each and every opcode with several test cases. Issues are there are 256 8 bit opcodes and 50+ (can't remember exact number) 16 bit opcodes. This would take a long time to do properly.</p>\n\n<p>Write some sort of logging framework that logs a stacktrace at each operation and compares it to other established emulators. This would be pretty quick to do, and allows a fairly rapid overview of what exactly went wrong. The log file would look a bit like this:</p>\n\n<pre><code>...\nPC = 212 Just executed opcode 7c - Register: AF: 5 30 BC: 0 13 HL: 5 ce DE: 1 cd SP: ffad\nPC = 213 Just executed opcode 12 - Register: AF: 5 30 BC: 0 13 HL: 5 ce DE: 1 cd SP: ffad\n...\n</code></pre>\n\n<p>Cons are I need to modify the source of another emulator to output the same form. And there's no guarantee the opcode is correct as it assumes the other emulator is.</p>\n\n<p>What else should I consider?</p>\n\n<p>Here is my code if it helps: <a href=\"https://github.com/dbousamra/scalagb\" rel=\"nofollow\">https://github.com/dbousamra/scalagb</a></p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12796880,"title":"Is there a test framework for Python that supports test dependencies?","body":"<p>I'm looking for something similar to <a href=\"http://scg.unibe.ch/research/jexample\" rel=\"nofollow\">JExample</a>, where you can create tests that depend one upon the other. Is there a python testing framework out there that supports this concept?</p>\n"},{"tags":["python","unit-testing","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12998908,"title":"Is it possible to mock Python's built in print function?","body":"<p>I've tried </p>\n\n<pre><code>from mock import Mock\nimport __builtin__\n\n__builtin__.print = Mock()\n</code></pre>\n\n<p>But that raises a syntax error. I've also tried patching it like so</p>\n\n<pre><code>@patch('__builtin__.print')\ndef test_something_that_performs_lots_of_prints(self, mock_print):\n\n    # assert stuff\n</code></pre>\n\n<p>Is there any way to do this? </p>\n"},{"tags":["ruby-on-rails","ruby","ruby-on-rails-3","api","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12999344,"title":"Grab Rails requests/responses to test API client","body":"<p>I have a Rails API and an iPhone app. I'd like to add tests to the iPhone app to verify the API client functionality. The tests will have to work offline, i.e. without the Rails API server. I was thinking about capturing requests and responses from Rails API to produce an offline mock API server. Ideally, I'd like to automate that process (e.g. starting up a Rails server and using cURL won't work).</p>\n"},{"tags":["asp.net-mvc","unit-testing","mocking","rhino-mocks","moq"],"answer_count":6,"favorite_count":19,"up_vote_count":45,"down_vote_count":0,"view_count":9076,"score":45,"question_id":970198,"title":"How to mock the Request on Controller in ASP.Net MVC?","body":"<p>I have a controller in C# using the ASP.Net MVC framework</p>\n\n<pre><code>public class HomeController:Controller{\n  public ActionResult Index()\n    {\n      if (Request.IsAjaxRequest())\n        { \n          //do some ajaxy stuff\n        }\n      return View(\"Index\");\n    }\n}\n</code></pre>\n\n<p>I got some tips on mocking and was hoping to test the code with the following and RhinoMocks</p>\n\n<pre><code>var mocks = new MockRepository();\nvar mockedhttpContext = mocks.DynamicMock&lt;HttpContextBase&gt;();\nvar mockedHttpRequest = mocks.DynamicMock&lt;HttpRequestBase&gt;();\nSetupResult.For(mockedhttpContext.Request).Return(mockedHttpRequest);\n\nvar controller = new HomeController();\ncontroller.ControllerContext = new ControllerContext(mockedhttpContext, new RouteData(), controller);\nvar result = controller.Index() as ViewResult;\nAssert.AreEqual(\"About\", result.ViewName);\n</code></pre>\n\n<p>However I keep getting this error:</p>\n\n<blockquote>\n  <p>Exception\n    System.ArgumentNullException:\n  System.ArgumentNullException : Value\n  cannot be null.   Parameter name:\n  request   at\n  System.Web.Mvc.AjaxRequestExtensions.IsAjaxRequest(HttpRequestBase\n  request)</p>\n</blockquote>\n\n<p>Since the <code>Request</code> object on the controller has no setter. I tried to get this test working properly by using recommended code from an answer below.</p>\n\n<p>This used Moq instead of RhinoMocks, and in using Moq I use the following for the same test:</p>\n\n<pre><code>var request = new Mock&lt;HttpRequestBase&gt;();\n// Not working - IsAjaxRequest() is static extension method and cannot be mocked\n// request.Setup(x =&gt; x.IsAjaxRequest()).Returns(true /* or false */);\n// use this\nrequest.SetupGet(x =&gt; x.Headers[\"X-Requested-With\"]).Returns(\"XMLHttpRequest\");\n\nvar context = new Mock&lt;HttpContextBase&gt;();\ncontext.SetupGet(x =&gt; x.Request).Returns(request.Object);\nvar controller = new HomeController(Repository, LoginInfoProvider);\ncontroller.ControllerContext = new ControllerContext(context.Object, new RouteData(), controller);\nvar result = controller.Index() as ViewResult;\nAssert.AreEqual(\"About\", result.ViewName);\n</code></pre>\n\n<p>but get the following error:</p>\n\n<blockquote>\n  <p>Exception     System.ArgumentException:\n  System.ArgumentException : Invalid\n  setup on a non-overridable member:    x\n  => x.Headers[\"X-Requested-With\"]  at Moq.Mock.ThrowIfCantOverride(Expression\n  setup, MethodInfo methodInfo)</p>\n</blockquote>\n\n<p>Again, it seems like I cannot set the request header.\nHow do I set this value, in RhinoMocks or Moq?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":48,"score":-2,"question_id":12978522,"title":"controller mvc3 unit test","body":"<p>How to write unit test for</p>\n\n<pre><code>public ActionResult Details()\n{\n    EmployeeDTO employee = this.EmployeeService.GetLoggedInEmployee();\n    EmployeeModel model = assembler.ToEmployeeModel(employee);\n    model.Title = GetEmployeeNameTitle(employee);\n    model.Controller = \"LoanProcessor\";\n    model.SelectedTab = MainNavTabs.LoanProcessor;\n    return View(model);\n}\n</code></pre>\n\n<p>I have no idea how to solve it.</p>\n"},{"tags":["unit-testing","code-organization"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":502,"score":5,"question_id":3843171,"title":"Unit-testing with dependencies between tests","body":"<p>How do you do unit testing when you have</p>\n\n<ul>\n<li>some general unit tests</li>\n<li>more sophisticated tests checking edge cases, depending on the general ones</li>\n</ul>\n\n<p>To give an example, imagine testing a CSV-reader (I just made up a notation for demonstration),</p>\n\n<pre><code>def test_readCsv(): ...\n\n@dependsOn(test_readCsv)\ndef test_readCsv_duplicateColumnName(): ...\n\n@dependsOn(test_readCsv)\ndef test_readCsv_unicodeColumnName(): ...\n</code></pre>\n\n<p>I expect sub-tests to be run only if their parent test succeeds. The reason behind this is that running these tests takes time. Many failure reports that go back to a single reason wouldn't be informative, either. Of course, I could shoehorn all edge-cases into the main test, but I wonder if there is a more structured way to do this.</p>\n\n<p>I've found these related but different questions,</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/1838262/how-to-structure-unit-tests-that-have-dependencies\">How to structure unit tests that have dependencies?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/1368900/unit-testing-is-it-bad-form-to-have-unit-test-calling-other-unit-tests\">Unit Testing - Is it bad form to have unit test calling other unit tests</a></li>\n</ul>\n\n<p>UPDATE:</p>\n\n<p>I've found <a href=\"http://testng.org/doc/documentation-main.html#dependent-methods\" rel=\"nofollow\">TestNG</a> which has great built-in support for test dependencies.  You can write tests like this,</p>\n\n<pre><code>@Test{dependsOnMethods = (\"test_readCsv\"))\npublic void test_readCsv_duplicateColumnName() {\n   ...\n}\n</code></pre>\n"},{"tags":["unit-testing","events","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":785,"score":4,"question_id":4124054,"title":"Raising events from a mock/stub using Rhino Mocks","body":"<p>How can I raise an event from a mock/stub using Rhino Mocks?</p>\n\n<p>I've found some answers to this question on the web, but they all seem to use the Record/Replay-syntax, but I'm using the Arrange/Act/Assert syntax.</p>\n\n<p>Any suggestions?</p>\n\n<p>A little example...</p>\n\n<p>Let's say I'm using the MVVM pattern and have this model class:</p>\n\n<pre><code>public class MyModel\n{\n    private int _myValue;\n\n    public event EventHandler ValueChanged;\n\n    public void SetValue(int newValue)\n    {\n        _myValue = newValue;\n        if (ValueChanged != null)\n        {\n            ValueChanged(this, null);\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see the class has an integer value and a method that sets it. When the value is set, a <code>ValueChanged</code> event is raised.</p>\n\n<p>This model class is used by a viewmodel:</p>\n\n<pre><code>public class MyViewModel\n{\n    private MyModel _myModel;\n\n    public MyViewModel(MyModel myModel)\n    {\n        _myModel = myModel;\n        _myModel.ValueChanged += ValueChangedHandler;\n    }\n\n    private void ValueChangedHandler(object sender, EventArgs e)\n    {\n        MyString = \"Value has changed\";\n    }\n\n    public string MyString { get; set; }\n}\n</code></pre>\n\n<p>This viewmodel listen to the <code>ValueChanged</code> event on the model and updates when it is raised.</p>\n\n<p>Now I want to test that the viewmodel is updated when the model  raises the event.</p>\n\n<pre><code>[TestMethod]\npublic void MyViewModel_ModelRaisesValueChangedEvent_MyStringIsUpdated()\n{\n    //Arrange.\n    var modelStub = MockRepository.GenerateStub&lt;MyModel&gt;();\n    MyViewModel viewModel = new MyViewModel(modelStub);\n\n    //Act\n    -HERE I WANT TO RAISE THE VALUE CHANGED EVENT FROM modelStub.\n\n    //Assert.\n    Assert.AreEqual(\"Value has changed\", viewModel.MyString);\n}\n</code></pre>\n\n<p>Note that this is just an example and not my actual code (which is more complex). I hope you can disregard any typos and other small mistakes.</p>\n"},{"tags":["java","unit-testing","java-ee","jboss-arquillian"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12991384,"title":"Using a different persistence.xml file in tests with Arquillian","body":"<p>I am using a standard Maven project and I have one persistence.xml in the java resources folder and another persistence.xml in the test folder. How can I use the persistence.xml from the test folder in the arquillian test? Or isn't that a normal thing to do? </p>\n"},{"tags":["unit-testing","grails","grails-2.0","hibernate-criteria"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12834724,"title":"Grails 2 'order' criteria not working in unit tests","body":"<p>I'm using grails 2.1.0 and groovy 1.8. I have the following code in a service:</p>\n\n<pre><code>def listServerPartners() {\n    ServerModel.withCriteria {\n        partner {\n            order('name', 'asc')\n        }\n        projections {\n            distinct('partner')\n        }\n    }\n}\n</code></pre>\n\n<p>This works fine for both the running application and integration tests. However, when I try to use with unit tests, I get a blank list as a result. </p>\n\n<p>I noticed that if I changed the above code to the code below and implement the <strong>comparable</strong> interface in the object partner, the unit tests work, but then the application and integration tests don't. </p>\n\n<pre><code>def listServerPartners() {\n    ServerModel.withCriteria {\n        projections {\n            distinct('partner')\n        }\n        order('partner', 'asc')\n    }\n}\n</code></pre>\n\n<p>Looking at the SQL when running the application, I notice that for the first code, I get a <pre>\"order by partner_al1_.PartnerName asc\"</pre> and for the second one, I get a <pre>\"order by partner_al1_.Partner_Id asc\"</pre>, what is obviously what I don't want.</p>\n\n<p>Any suggestions about how to mock the correctly behavior that I have when running the application and integration tests for the unit tests?</p>\n\n<p><strong>Updated: Output from Unit test:</strong></p>\n\n<pre><code>assert Partner.list() == results\n               |      |  |\n               |      |  []\n               |      false\n               [Partner 4, Partner 3, Partner 2, Partner 1]\n</code></pre>\n\n<p>-- Thanks</p>\n"},{"tags":["java","unit-testing","collections"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":118,"score":6,"question_id":12023734,"title":"Are there any publically available java collections unit tests?","body":"<p>Tests which i can plug-in my implementation of Set and ListIterator specifically.</p>\n"},{"tags":["c#","unit-testing","reflection","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12992899,"title":"RhinoMocks.GenerateMock with generic type, GetGenericArguments is empty","body":"<p>Can anyone shed any light on how I can achieve this with RhinoMocks? I want to create a mock of a generic type (with two TypeParams) and in the code-under test I am calling GetType().GetGenericArguments(), expecting two Types. </p>\n\n<p>e.g. I expect the following test to pass, but it fails:</p>\n\n<pre><code>    [Test]  \n    public void Test()\n    {\n        // Mocking IDictionary&lt;THash, T&gt; fails, but new Dictionary&lt;THash, T&gt; passes\n        var myMock = MockRepository.GenerateStub&lt;IDictionary&lt;int, float&gt;&gt;();\n        var args = myMock.GetType().GetGenericArguments();\n        Assert.That(args, Is.EquivalentTo(new Type[] {typeof(int), typeof(float)}));\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","tdd","noise-generator"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":72,"score":2,"question_id":12992742,"title":"Is splitting a class to make it easier to test an acceptable behavior?","body":"<p>I know this is somewhat of a subjective question, but I could find no answer to it. I'll give details, though:</p>\n\n<p>I have a class that has a lot of configuration methods, so that you can run a specific algorithm with very different settings. After you properly configure it, you can just call a method \"generate()\", and it returns a filled 2d array. That's the method that is hard to test. It is that hard because it returns a <a href=\"http://en.wikipedia.org/wiki/Heightmap\" rel=\"nofollow\" title=\"heightmap\">heightmap</a>, which contains randomness and a large amout of data. Generally, I would split it, but that would break encapsulation, because in practice the data and the steps of the algorithm changes for the same reason, and no one would use one separeted from the other. I know I can mock the randomness (which I'm actually doing), but in either way it is too much data to be practical to writes tests for (for instance a mere 32 by 32 map would require 1024 assertions on a single test). Besides that, generating a big map can take up to 3 or 4 seconds, which is obviously not good in a test ambient.</p>\n\n<p>Also, I tried first to separate the data from the algorithm, and make the algorithm pure functional (no data, only arguments). While this was testable (because I split the algorithm), this lead to lots of arguments being passed all around and a rather procedural-looking code.</p>\n\n<p>So I'm not sure how to procede here. Splitting the class makes it easier to test and to understand, but also breaks encapsulation really bad. I would appreciate any thoughs on the subject, either practical or theoretical.</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Edit:</strong> This is the code that I wrote and is procedural-like.</p>\n\n<p>JavaRandom, Attenuation and RandomNumberProcessor are classes that I should have kept together.</p>\n\n<p>This is the data used by the algorithm:</p>\n\n<pre><code>package noise;\n\nimport noise.attenuation.DefaultAttenuation;\n\npublic final class DiamondSquareSettings {\n\n    public static final class Builder {\n\n            private static final double NEVER_ASSIGNED = 1.1;\n            private static final long DEFAULT_RNG_SEED = 33609606l;\n            private static final JavaRandom DEFAULT_RANDOM = new JavaRandom(DEFAULT_RNG_SEED);\n            private static final double DEFAULT_RANGE = 1;\n            private static final Attenuation defaultAttenuation = new DefaultAttenuation(0.7);\n\n            private Random builderRandom = DEFAULT_RANDOM;\n            private final double[] builderSeeds = {NEVER_ASSIGNED , NEVER_ASSIGNED , NEVER_ASSIGNED , NEVER_ASSIGNED};\n            private double builderRange = DEFAULT_RANGE;\n            private Attenuation builderAttenuation = defaultAttenuation;\n\n            public Builder attenuation(final Attenuation attenuation) {\n                    validateAttenuation(attenuation);\n                    builderAttenuation = attenuation;\n                    return this;\n            }\n\n            public DiamondSquareSettings build(final int side) {\n                    validateSize(side);\n                    return new DiamondSquareSettings(side, builderRandom, builderSeeds, builderRange, builderAttenuation);\n            }\n\n            public Builder random(final long seed) {\n                    return random(new JavaRandom(seed));\n            }\n\n            public Builder randomRange(final double range) {\n                    validateRange(range);\n                    builderRange = range;\n                    return this;\n            }\n\n            public Builder seed(final int seedPosition, final double seedValue) {\n                    validateSeeds(seedPosition, seedValue);\n                    builderSeeds[seedPosition] = seedValue;\n                    return this;\n            }\n\n            Builder random(final Random random) {\n                    validateRandom(random);\n                    builderRandom = random;\n                    return this;\n            }\n\n            private void validateAttenuation(final Attenuation attenuation) {\n                    if (attenuation == null)\n                            throw new IllegalArgumentException(\"attenuation == null!\");\n            }\n\n            private void validateRandom(final Random random) {\n                    if (random == null)\n                            throw new IllegalArgumentException(\"random == null!\");\n            }\n\n            private void validateRange(final double range) {\n                    if (range &lt; 0)\n                            throw new IllegalArgumentException(\"range &lt; 0\" + \"\\nrange: \" + range);\n            }\n\n            private void validateSeeds(final int seedPosition, final double seedValue) {\n                    if (seedValue &gt; 1 || seedValue &lt; 0)\n                            throw new IllegalArgumentException(\"Invalid seed\" + \"\\nseedPosition: \" + seedPosition + \" seed: \"\n                                            + seedValue);\n            }\n\n            private void validateSize(final int side) {\n                    final double doubleExpoent = Math.log(side - 1) / Math.log(2);\n                    final int integerExpoent = (int) doubleExpoent; //TODO simplify more\n                    if (doubleExpoent != integerExpoent)\n                            throw new IllegalArgumentException(\"side is not a (power of two) plus one\" + \"\\nside: \" + side);\n            }\n    }\n\n    private final int side;\n    private final Random random;\n    private final double[] seeds;\n    private final double range;\n    private final Attenuation attenuation;\n\n    private DiamondSquareSettings(final int side, final Random random, final double[] seeds, final double range,\n                    final Attenuation attenuation) {\n            this.side = side;\n            this.random = random;\n            this.seeds = randomizeNeverAssignedSeeds(random, seeds, range);\n            this.range = range;\n            this.attenuation = attenuation;\n    }\n\n    public String getAttenuationInfo() {\n            return attenuation.toString();\n    }\n\n    public String getRandomInfo() {\n            return random.toString();\n    }\n\n    public double getRandomRange() {\n            return range;\n    }\n\n    public double getSeed(final int seedPosition) {\n            return seeds[seedPosition];\n    }\n\n    public int getSide() {\n            return side;\n    }\n\n    Attenuation getAttenuation() {\n            return attenuation;\n    }\n\n    Random getRandom() {\n            return random;\n    }\n\n    private double[] randomizeNeverAssignedSeeds(final Random random, final double[] seeds, final double range) {\n            final double[] properlyRandomizingSeeds = seeds;\n            for (int i = 0 ; i &lt; seeds.length ; i++)\n                    if (seeds[i] == Builder.NEVER_ASSIGNED)\n                            properlyRandomizingSeeds[i] = random.nextRandomValueInside(range);\n\n            return properlyRandomizingSeeds;\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>This is the bulk of the algorithm:</p>\n\n<pre><code>    package noise;\n\n    public final class DiamondSquare {\n\n    public static Noise generate(final DiamondSquareSettings settings) {\n            validateSettings(settings);\n            final DiamondSquareStep stepper = new DiamondSquareStep();\n            double[][] noiseArray = new double[settings.getSide()][settings.getSide()];\n            setupSeeds(settings, noiseArray);\n            final RandomNumberProcessor processor =\n                            new RandomNumberProcessor(settings.getRandomRange(), settings.getRandom(), settings.getAttenuation());\n            noiseArray = processDiamondSquare(settings, stepper, noiseArray, processor);\n            return new Noise(noiseArray);\n    }\n\n    private static double[][] processDiamondSquare(final DiamondSquareSettings settings,\n                    final DiamondSquareStep stepper, double[][] noiseArray, final RandomNumberProcessor processor) {\n            int stepSize = settings.getSide() - 1;\n            while (stepSize &gt;= 1) {\n                    noiseArray = stepper.diamondSquare(stepSize, noiseArray, processor);\n                    processor.nextStage();\n                    stepSize /= 2;\n            }\n            return noiseArray;\n    }\n\n    private static void setupSeeds(final DiamondSquareSettings settings, final double[][] noiseArray) {\n            noiseArray[0][0] = settings.getSeed(0);\n            noiseArray[settings.getSide() - 1][0] = settings.getSeed(1);\n            noiseArray[0][settings.getSide() - 1] = settings.getSeed(2);\n            noiseArray[settings.getSide() - 1][settings.getSide() - 1] = settings.getSeed(3);\n    }\n\n    private static void validateSettings(final DiamondSquareSettings settings) {\n            if (settings == null)\n                    throw new IllegalArgumentException(\"settings == null!\");\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>This are the other steps of the algorithm:</p>\n\n<pre><code>package noise;\n\n\nfinal class DiamondSquareResolver {\n\n    private static final double OUT_OF_RANGE = 0; //TODO this code smells. It alters slightly the final result. Should be gone.\n    private static final double DISAMBIGUATION = 0.00001;\n\n    public double diamondStep(final int i, final int j, final int halfStep, final double[][] noise,\n                    final RandomNumberProcessor processor) {\n            final double left = initializeLeft(i - halfStep, j, noise);\n            final double right = initializeRight(i + halfStep, j, noise);\n            final double top = initializeTop(i, j - halfStep, noise);\n            final double bot = initializeBot(i, j + halfStep, noise);\n            final int divisor = processDivisor(left, right, top, bot);\n            return (left + right + top + bot) / divisor + processor.generateNumber();\n    }\n\n    public double squareStep(final int i, final int j, final int halfStep, final double[][] noise,\n                    final RandomNumberProcessor processor) {\n            final double topLeft = noise[i - halfStep][j - halfStep];\n            final double topRight = noise[i + halfStep][j - halfStep];\n            final double bottomLeft = noise[i - halfStep][j + halfStep];\n            final double bottomRight = noise[i + halfStep][j + halfStep];\n            return (topLeft + topRight + bottomLeft + bottomRight) / 4 + processor.generateNumber();\n    }\n\n    private double initializeBot(final int i, final int bottomCoordinate, final double[][] noise) {\n            final int height = noise[0].length;\n            if (! (bottomCoordinate &gt;= height))\n                    return validatedPosition(noise[i][bottomCoordinate]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private double initializeLeft(final int leftCoordinate, final int j, final double[][] noise) {\n            if (! (leftCoordinate &lt; 0))\n                    return validatedPosition(noise[leftCoordinate][j]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private double initializeRight(final int rightCoordinate, final int j, final double[][] noise) {\n            final int width = noise.length;\n            if (! (rightCoordinate &gt;= width))\n                    return validatedPosition(noise[rightCoordinate][j]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private double initializeTop(final int i, final int topCoordinate, final double[][] noise) {\n            if (! (topCoordinate &lt; 0))\n                    return validatedPosition(noise[i][topCoordinate]);\n            else\n                    return OUT_OF_RANGE;\n    }\n\n    private int processDivisor(final double ... sides) { //TODO remove varagrs argument, as it is not proper.\n            int divisor = 4;\n            for (final double side : sides)\n                    if (side == OUT_OF_RANGE)\n                            divisor--;\n            return divisor;\n    }\n\n    private double validatedPosition(final double value) {\n            return value != OUT_OF_RANGE ? value : value + DISAMBIGUATION;\n    }\n</code></pre>\n\n<p>}</p>\n\n<pre><code>final class DiamondSquareStep {\n\n    public double[][] diamondSquare(final int step, final double[][] noise, final RandomNumberProcessor processor) {\n            final double[][] steppedNoise = copyNoise(noise);\n            final DiamondSquareResolver solver = new DiamondSquareResolver();\n            final int halfStep = step / 2;\n            performSquareSteps(step, steppedNoise, processor, solver, halfStep);\n            performDiamondSteps(step, steppedNoise, processor, solver, halfStep);\n            return steppedNoise;\n    }\n\n    private double[][] copyNoise(final double[][] noise) {\n            final double[][] steppedNoise = new double[noise.length][noise[0].length];\n            for (int i = 0 ; i &lt; noise.length ; i++)\n                    for (int j = 0 ; j &lt; noise[0].length ; j++)\n                            steppedNoise[i][j] = noise[i][j];\n            return steppedNoise;\n    }\n\n    private void performDiamondSteps(final int step, final double[][] noise, final RandomNumberProcessor processor,\n                    final DiamondSquareResolver solver, final int halfStep) {\n            for (int i = 0 ; i &lt; noise.length ; i += step)\n                    for (int j = 0 ; j &lt; noise[0].length ; j += step) {\n                            if (i + halfStep &lt; noise.length)\n                                    noise[i + halfStep][j] = solver.diamondStep(i + halfStep, j, halfStep, noise, processor);\n                            if (j + halfStep &lt; noise[0].length)\n                                    noise[i][j + halfStep] = solver.diamondStep(i, j + halfStep, halfStep, noise, processor);\n\n                    }\n    }\n\n    private void performSquareSteps(final int step, final double[][] noise, final RandomNumberProcessor processor,\n                    final DiamondSquareResolver solver, final int halfStep) {\n            for (int i = halfStep ; i &lt; noise.length ; i += step)\n                    for (int j = halfStep ; j &lt; noise[0].length ; j += step)\n                            noise[i][j] = solver.squareStep(i, j, halfStep, noise, processor);\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["unit-testing","testing","interview"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12991702,"title":"Testing a function: what more should be tested?","body":"<p>I am writing a function that takes three integer inputs and based on a relation between the three, it returns a value or error. To test this, I have written some test cases which include testing illegal values, boundary conditions for integers including overflows and some positive tests too. I am wondering what else should be tested for this simple function? </p>\n\n<p>Can testing on different platforms make sense as a test case for such a small function?\nAlso, testing execution times is another thing that I wanted to add as a test case. \nCan doing static and dynamic analysis be a part of the test cases? \nAnything else that should be tested?</p>\n\n<pre><code>int foo(int a, int b, int c) {\n   return a value based on a, b, and c. \n}\n</code></pre>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":227,"score":0,"question_id":4812572,"title":"Mock created using PHPUnit return \"NULL\" when class was called","body":"<p>Code:</p>\n\n<pre>\n\n$mockObject = $this->getMock('ORM_User');\n\n$mockObject->expects($this->at(0))\n    ->method('xxx')\n    ->with($this->equalTo('a'))\n    ->will($this->returnValue('aaa'));\n\n$mockObject->expects($this->at(1))\n    ->method('xxx')\n    ->with($this->equalTo('b'))\n    ->will($this->returnValue('bbb'));\n\nvar_dump(\"-\".$mockObject->xxx('a'));\nvar_dump($mockObject->xxx('b'));  \n\n$tmp = new ORM_User();\nvar_dump($tmp->xxx('a'));\nvar_dump($tmp->xxx('b'));\n</pre>\n\n<p>Output:</p>\n\n<pre>\n\n\nstring(4) \"-aaa\"\nstring(3) \"bbb\"\nNULL\nNULL\n\n</pre>\n"},{"tags":["c","unit-testing","tdd","pthreads","testability"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12991361,"title":"Testable C application using posix threads","body":"<p>I have to write code that would look do something like that (of course much more complicated):</p>\n\n<pre><code>int stop;\nint isStopped;\n\nvoid workerFunction(){\n    while(!stop){\n        //...\n    }\n    isStopeed = 1;\n}\n\nstartThread(){\n    int newThreadPid = pthread_create(..., NULL, workerFunction, NULL);\n}\n\nstopThread(){\n    stop = 1;\n}\n</code></pre>\n\n<p>My question is: are there any techniques that can make such code testable? I don't think writing tests like :</p>\n\n<pre><code>startThread();\nstopThread();\nsleep(1);\nASSERT(isStopped);\n</code></pre>\n\n<p>is the best idea. How to test stopThread() function without calling system function? Is there any way to mock pthread_create?</p>\n"},{"tags":["visual-studio","unit-testing","winrt","windows-store-apps","ui-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12983903,"title":"Unit testing a custom control in a windows store project","body":"<p>I want to unit test the custom controls I create for a windows store project. Just simple things like \"there is a button when X is true\".</p>\n\n<p>However, I can't seem to even instantiate the controls in a testing context. Whenever I try to invoke the constructor, I get an exception related to not being run in the UI context. I've also been unable to create coded UI test projects that target windows store projects.</p>\n\n<ul>\n<li>How do I programmatically instantiate a control to test? How do I create a WinRT UI synchronization context?</li>\n<li>How do I programmatically send \"user\" command events to a control?</li>\n<li>How do I programmatically instantiate/teardown the entire application?</li>\n</ul>\n"},{"tags":["python","django","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12981990,"title":"Django debug tests","body":"<p>How do I debug my tests? For example, I POST to create an entry and expect it to validate and return a particular page. It works in the browser and in the shell, but the test is the only thing that fails (ironically!). I would like to print the response to the console or something so I could read errors or what have you. But I can only see things that I <code>print</code> in e.g. the view.</p>\n\n<p>Not sure it's necessary, but here's the test code in question from <code>tests.py</code>:</p>\n\n<pre><code>    resp = self.client.post('/meal/invite/', \n        {'summary': 'Test munch', 'when': now(), 'max_diners': '1', 'description': 'Munchies'}, follow=True)\n    self.assertEqual(resp.status_code, 200)\n    self.assertContains(resp, 'Test munch', 1)\n    self.assertContains(resp, 'You are hosting this meal', 1)\n</code></pre>\n\n<p>The final assertion is incorrect. If I change it to a value present in the original form page showing 'field required' errors, it passes. I just can't see what I'm missing.</p>\n\n<p>I have a few other tests working, but I just don't know how to debug this.</p>\n\n<p>How's it done?\nThanks</p>\n"},{"tags":["asp.net-mvc","unit-testing","integration-testing","asp.net-mvc-3"],"answer_count":3,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":1011,"score":16,"question_id":4278790,"title":"MvcIntegrationTestFramework or an alternative updated for ASP.NET MVC 3","body":"<p>I'm interested in using Steve Sanderson’s <a href=\"http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/\" rel=\"nofollow\">MvcIntegrationTestFramework</a> <strong>or a very similar alternative</strong> with ASP.NET MVC 3 Beta.</p>\n\n<p>Currently when compiling <strong>MvcIntegrationTestFramework</strong> against MVC 3 Beta I get the following error due to changes in MVC:</p>\n\n<p><code>Error  6</code>\n<code>'System.Web.Mvc.ActionDescriptor.GetFilters()' is obsolete: '\"Please call System.Web.Mvc.FilterProviders.Providers.GetFilters() now.\"'</code>    <code>\\MvcIntegrationTestFramework\\Interception\\InterceptionFilterActionDescriptor.cs Line 18</code></p>\n\n<h2>Questions</h2>\n\n<h3>1. Can anybody provide the MvcIntegrationTestFramework working for ASP.NET MVC 3 Beta?</h3>\n\n<p>--- and / or ---</p>\n\n<h3>2. Are there similar alternatives you would recommend?</h3>\n\n<hr>\n\n<p><strong>EDIT #1:</strong> Note I have e-mailed Steve the creator of MvcIntegrationTestFramework, also hoping for some feedback there.</p>\n\n<p><strong>EDIT #2 &amp; #3:</strong> I have received a message from Steve. Quoted for your reference:<br>\n<em>I haven't needed to use that project with MVC 3, so sorry, I don't have an updated version of it. As far as I'm aware it should be possible to update it to work on MVC 3, but you'd need to figure that out perhaps by inspecting the MVC 3 source code to notice any changes in how actions, filters, etc are invoked now. If you do update it, and if you decide to adopt it as an ongoing project (e.g., putting it on Github or similar), let me know and I'll post a link to it!</em> (Thanks Steve!)</p>\n\n<p><strong>EDIT #4:</strong> Honestly had a quick stab at using <code>System.Web.Mvc.FilterProviders.Providers.GetFilters()</code> didn't get anywhere fast and simply adding the <code>[Obsolete]</code> found that there was an error in the internals of the MVC requests. Anybody else had a dabble?</p>\n\n<p><strong>EDIT #5:</strong> Please comment if you are using an alternative Integration Test Framework with MVC 3. </p>\n"},{"tags":["unit-testing","symfony2","phpunit","symfony-2.1"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":133,"score":1,"question_id":12355821,"title":"Best Bundle for Selenium 2 (WebDriver) and Phpunit with Symfony 2.1","body":"<p>I have a question about Selenium V2 (Webdriver) and phpUnit,so what the best between this bundles to use it : </p>\n\n<ul>\n<li><a href=\"https://github.com/Nearsoft/PHP-SeleniumClient.git\" rel=\"nofollow\">PHP-Selenium</a></li>\n<li><a href=\"https://github.com/fbrnc/Menta.git\" rel=\"nofollow\">Menta</a></li>\n<li><a href=\"https://github.com/facebook/php-webdriver.git\" rel=\"nofollow\">Facbook-php-webdriver</a></li>\n</ul>\n\n<p>I want to know your opinion about the good and rish one to use it in my project developed with symfony 2.1?</p>\n"},{"tags":["android","unit-testing","testing","monkey","android-monkey"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1258,"score":0,"question_id":4798950,"title":"Android Test Monkey - Set Verbosity?","body":"<p>How can I change the verbosity level when running Test Monkey from the command line?</p>\n\n<p>These two commands work:\nadb shell monkey -p com.my.package 5000\nadb shell monkey -p com.my.package -v 5000</p>\n\n<p>The Developer docs say, \"Each -v on the command line will increment the verbosity level. Level 0 (the default) provides little information beyond startup notification, test completion, and final results. Level 1 provides more details about the test as it runs, such as individual events being sent to your activities. Level 2 provides more detailed setup information such as activities selected or not selected for testing.\"</p>\n\n<p>However, when I try:  adb shell monkey -p com.my.package -v -v 5000</p>\n\n<p>I get a \"segmentation fault    monkey -p com.my...\" when I try the following:</p>\n\n<p>I tried adb shell monkey -p com.my.package -v 2 5000, but monkey reads \"2\" as the count, rather than the value for -v.</p>\n\n<p>Help?  :)</p>\n"},{"tags":["java","unit-testing","exception","junit"],"answer_count":7,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":363,"score":1,"question_id":10140517,"title":"Junit: Testing for an exception of certain type","body":"<p>I am wanting to know if I can test (using JUnit) that a specific message generated by an exception gets thrown rather than just \"whether or not\" an exception was thrown.\nFor example the JunitTest.java code will actually pass the test because an exception was thrown but if I also wanted to test that the string generated by the exception was equal to: <em>\"Test Exception: Integer may not be negative..\"</em> is this possible?</p>\n\n<p><strong>TestException.java</strong></p>\n\n<pre><code>public class TestException extends Exception {  \n    /**\n     * @param message informative message about the problem found\n     */\n    public TestException (String message) {\n    super(\"Test Exception: \" + message);\n    }\n}\n</code></pre>\n\n<p><strong>Test.java</strong></p>\n\n<pre><code>public void function(Integer mustBePositive) throws TestException {\n    if (mustBePositive &lt; 0) {\n        throw new TestException(\"Integer may not be negative..\");\n    }\n    else {\n        mustBePositive = myNum\n    }\n</code></pre>\n\n<p><strong>JunitTest.java</strong></p>\n\n<pre><code>  import org.junit.*;\n\n  public class JUnitTest {\n\n  @Test(expected = TestException.class)\n  public void functionTest() throws TestException {\n  function(-1);\n}\n</code></pre>\n"},{"tags":["unit-testing","embedded","arduino","avr","avr-gcc"],"answer_count":13,"favorite_count":24,"up_vote_count":30,"down_vote_count":0,"view_count":14974,"score":30,"question_id":780819,"title":"How can I unit test Arduino code?","body":"<p>I'd like to be able to unit test my Arduino code. Ideally, I would be able to run any tests without having to upload the code to the Arduino. What tools or libraries can help me with this?</p>\n\n<p>There is an <a href=\"http://radpartbrainmat.blogspot.com/search/label/arduemu\" rel=\"nofollow\">Arduino emulator in development</a> which could be useful, but it doesn't yet seem to be ready for use.</p>\n\n<p><a href=\"http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=2725\" rel=\"nofollow\">AVR Studio</a> from Atmel contains a chip simulator which could be useful, but I can't see how I would use it in conjunction with the Arduino IDE.</p>\n"},{"tags":["javascript","unit-testing","testing","selenium"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12977684,"title":"Programatically retrieve count of javascript errors on page","body":"<p>I'd like to write a test case (using Selenium, but not the point of this question) to validate that my web application has no script errors\\warnings or unhanded exceptions at certain points in time (like after initializing a major library).</p>\n\n<p>This information can easily be seen in the debug consoles of most browsers. Is it possible to execute a javascript statement to get this information programatically?</p>\n\n<p>It's okay if it's different for each browser, I can deal with that.</p>\n"},{"tags":["java","unit-testing","netbeans","ant","rmic"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12984478,"title":"ant task to rmic test class","body":"<p>I am working on a java project that MUST use rmic (so automatic stub generation provided by java 1.5+ is NOT an option).\nAs part of the developing process, I created several JUnit tests, and used the rmic ant task to create the stubs and skeletons as a post-compile task.\nThe problem I am facing is that rmic does not create stubs and skeletons for test classes. Is there any way I can achieve that?\nI am posting a link with a tiny Netbeans project with classes with no body that shows my problem. I created an ant task call 'clean-and-compile-all' that does trigger the rmic ant task, but it is not working as I expect: it just creates the stubs and skeletons for the source directory, nothing for the classes implementing Remote that are in the test one.\nI don't want to clutter my source code with test classes.\nI will really appreciate if any of you can tell me what I am doing wrong here.</p>\n\n<hr>\n\n<p>link to test project: <a href=\"https://dl.dropbox.com/u/7707848/Netbeans/RmicTest.zip\" rel=\"nofollow\">NetBeans Test Project link...</a></p>\n"},{"tags":["unit-testing","nunit","fixtures"],"answer_count":7,"favorite_count":3,"up_vote_count":19,"down_vote_count":0,"view_count":6412,"score":19,"question_id":212718,"title":"When do I use the TestFixtureSetUp attribute instead of a default constructor?","body":"<p>The NUnit documentation doesn't tell me when to use a method with a testfixturesetup en when to do the setup in  the constructor</p>\n\n<pre><code>public class MyTest\n{\n    private MyClass myClass;\n\n    public MyTest()\n    {\n        myClass = new MyClass();\n    }\n\n    [TestFixtureSetUp]\n    public void Init()\n    {\n        myClass = new MyClass();\n    }\n}\n</code></pre>\n\n<p>Are there any good/bad practices about the TestFixtureSetup versus default constructor or isn't there any difference?</p>\n"},{"tags":["unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":156,"score":2,"question_id":3014566,"title":"How to copy resource (any content) files to output folder when NUnit's shadow copying is turned on?","body":"<p>Of course there is an option to turn it off (by default it is on.) However I like to be able to make incremental changes to the DLL while a copy of NUnit GUI is up.</p>\n\n<p>However I couldn't find much documentation for this feature (apart from <a href=\"http://osdir.com/ml/windows.dotnet.nunit.devel/2004-04/msg00005.html\" rel=\"nofollow\">the need</a>)\nSo the problem is like this</p>\n\n<p>With Shadow copy enabled in NUnit,<br>\nmy SUT (Dll) invokes an executable (also in the output folder ; via references). Now this executable needs certain configuration/modifier files to be in the same folder as the executable. How do I ensure that my reference modifier files are reachable by the executable during the test ? </p>\n\n<p>Does NUnit shadow copy just the SUT dll or all the linked/referenced dlls/execs ? What do I need to do in the test setup such that any supporting files for the SUT are copied correctly?</p>\n\n<p>I see that </p>\n\n<ul>\n<li>executingAssembly.Codebase gives me the original output folder </li>\n<li>executingAssembly.Location gives me the shadow copy folder.</li>\n</ul>\n\n<p>I'm not sure if I am being lucid here - let me know if I need to update </p>\n"},{"tags":["unit-testing","visual-studio-2012","mbunit","gallio","resharper-7.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12982978,"title":"How to support MBUnit tests in Resharper 7","body":"<p>Since I upgraded to VS2012, my R#5 license was not useful anymore. After downloading the R#7.0.1 and installing I realized that MbUnit no longer had builtin support for R#7.</p>\n\n<p>Since I spent some time figuring out how to get the plugin running, I will post here to save anyone else the time (And in order for myself to find it back if I need to do it again...)</p>\n"},{"tags":["javascript","unit-testing","qunit","phantomjs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12981822,"title":"PhantomJS QUnitTeamCityDriver QUnit test run","body":"<p>I would like to use unit testing for JavaScript in TeamCity.</p>\n\n<p>I am using QUnit, and I have seen a  couple of places that suggest using phantomjs and QUnitTeamCityDriver.  I just have not been able to get it to work...</p>\n\n<p>I don't have a lot of experience in this, and can't seem to even get phantomjs to run unit tests in command line.</p>\n\n<p>I literally copied the example from QUnitTeamCityDriver: simple_test.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;title&gt;QUnit Example&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" href=\"test_tools/qunit-1.10.0.css\"&gt;\n  &lt;script type=\"text/javascript\" src=\"resources/jquery-1.8.1.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"text/javascript\" src=\"test_tools/qunit-1.10.0.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"text/javascript\" src=\"qunit_teamcity_driver/QUnitTeamCityDriver.js\"&gt;&lt;/script&gt; \n  &lt;script type=\"text/javascript\" src=\"tests.js\"&gt;&lt;/script&gt; \n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"qunit\"&gt;&lt;/div&gt;\n  &lt;h1 id=\"qunit-header\"&gt;QUnit example&lt;/h1&gt;\n  &lt;h2 id=\"qunit-banner\"&gt;&lt;/h2&gt;\n  &lt;div id=\"qunit-testrunner-toolbar\"&gt;&lt;/div&gt;\n  &lt;h2 id=\"qunit-userAgent\"&gt;&lt;/h2&gt;\n  &lt;ol id=\"qunit-tests\"&gt;&lt;/ol&gt;\n  &lt;div id=\"qunit-fixture\"&gt;test markup, will be hidden&lt;/div&gt;   \n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>tests.js has some simple tests that work or not, if I try it with the simple_test.html.</p>\n\n<p>The other referenced files, in the html, are in the respective folders, of course.</p>\n\n<p>phantomjs.exe, tests.js and simple_test.html are in the root of the directory I am calling from.</p>\n\n<p>The directions for TeamCity build are:</p>\n\n<pre><code>Add a \"Command Line\" Build Step to your build in TeamCity which executes Tests.htm via PhantomJS\nCommand executable: C:\\PhamtomJS\\phantomjs.exe\nCommand parameters: \\Scripts\\QUnitTeamCityDriver.phantom.js Tests.htm\n</code></pre>\n\n<p>(which doesn't work, so I want to test on actual command line before putting in the command line inside TeamCity)</p>\n\n<p>Some things I have tried:</p>\n\n<pre><code>phantomjs.exe tests.js\nphantomjs.exe tests.js simple_test.html\nphantomjs.exe simple_test.html\nphantomjs.exe test_tools\\qunit-1.10.0.js tests.js simple_test.html\nphantomjs.exe qunit_teamcity_driver/QUnitTeamCityDriver.phantom.js simple_test.html\n</code></pre>\n\n<p>result: either Parse error or Can't find variable: test</p>\n\n<p>Please, can someone point me in the right direction, give me an example, tell me what I am doing wrong ? Thank you very much.</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12780725,"title":"Unit testing data access layer using Shims Visual Studio 2012","body":"<p>I have lagecy ASP.Net code which accesses database. There is data access layer which forms sqlcommands and executes on the database.</p>\n\n<p>What is the best way to unit test the data access layer? Should we actually connect to database and execute test case or just use fakes?</p>\n\n<p>Is it a good idea to use shim (described in below post)?</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/hh549176.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/hh549176.aspx</a></p>\n"},{"tags":["c#",".net","unit-testing","guid"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":59,"score":1,"question_id":12981633,"title":"Unit tests with GUID","body":"<p>Is it possible to create GUIDS with a manually defined value? </p>\n\n<p>I need to know the value of the GUID in advance to do some unit tests.</p>\n"},{"tags":["c#","wpf","unit-testing","mvvm","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":12920824,"title":"Why does this unit test pass on my machine but fail on the build server?","body":"<p>I am using VS2010, writing unit tests with MSTest. My project uses WPF, MVVM and the PRISM framework. I am also using Moq to mock interfaces.</p>\n\n<p>I am testing the interaction between a command and a selected item in a list. The interaction is encapsulated in a ViewModel according to the MVVM pattern. Basically, when the SelectedDatabase is set, I want the Command to raise CanExecute. I have written this test for the behaviour:</p>\n\n\n\n<pre class=\"lang-cs prettyprint-override\"><code>public void Test()\n{\n    var databaseService = new Mock&lt;IDatabaseService&gt;();\n    var databaseFunctionsController = new Mock&lt;IDatabaseFunctionsController&gt;();\n\n    // Create the view model\n    OpenDatabaseViewModel viewModel\n         = new OpenDatabaseViewModel(databaseService.Object, databaseFunctionsController.Object);\n\n    // Mock up the database and its view model\n    var database = TestHelpers.HelpGetMockIDatabase();\n    var databaseViewModel = new DatabaseViewModel(database.Object);\n\n    // Hook up the can execute changed event\n    var resetEvent = new AutoResetEvent(false);\n    bool canExecuteChanged = false;\n    viewModel.OpenDatabaseCommand.CanExecuteChanged += (s, e) =&gt;\n        {\n             resetEvent.Set();\n             canExecuteChanged = true;\n        };\n\n    // Set the selected database\n    viewModel.SelectedDatabase = databaseViewModel;\n\n    // Allow the event to happen\n    resetEvent.WaitOne(250);\n\n    // Check that it worked\n    Assert.IsTrue(canExecuteChanged,\n        \"OpenDatabaseCommand.CanExecuteChanged should be raised when SelectedDatabase is set\");\n}\n</code></pre>\n\n<p>On the <code>OpenDatabaseViewModel</code>, the <code>SelectDatabase</code> property is as follows:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    public DatabaseViewModel SelectedDatabase\n    {\n        get { return _selectedDatabase; }\n        set\n        {\n            _selectedDatabase = value;\n            RaisePropertyChanged(\"SelectedDatabase\");\n            // Update the can execute flag based on the save\n            ((DelegateCommand)OpenDatabaseCommand).RaiseCanExecuteChanged();\n        }\n    }\n</code></pre>\n\n<p>And also on the viewmodel:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    bool OpenDatabaseCanExecute()\n    {\n        return _selectedDatabase != null;\n    }\n</code></pre>\n\n<p><code>TestHelpers.HelpGetMockIDatabase()</code> just gets a mock <code>IDatabase</code> with some properties set.</p>\n\n<p>This test passes when I run the test from VS2010, but fails when executed as part of an automated build on the server. I put in the <code>AutoResetEvent</code> to try to fix the problem, but it's had no effect.</p>\n\n<p>I discovered that the automated tests were using the <code>noisolation</code> flag in the MSTest command line, so I removed that. However, that produced a 'pass' once, but a 'fail' the next.</p>\n\n<p>I think I am missing something important in all of this, but I can't figure out what it is. Can anyone help by telling me what I'm doing wrong?</p>\n"},{"tags":["c#","visual-studio","unit-testing","tdd","bdd"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":12981046,"title":"Run unit test before check in","body":"<p>Using Visual Studio and TFS &amp; preferably Specflow or standard unit test.</p>\n\n<p>I want devs to run ALL unit test as a policy before check in. If a unit test breaks, then vS should stop them from checking in, just like when running across a merge conflict.</p>\n\n<p>I know there're post build scripts that will do this, but really if unit test breaks, I rather that it doesn't get into source control at all. Plus the turn around is rather slow to wait for the full build. And then there's the bickering on who breaks whose stuff.</p>\n\n<p>So no, I want unit test to pass locally before a check in. How would I do that? Yes they can just hit the button, but I like to get them a bit more \"incentive\" than that.</p>\n"},{"tags":["c#","unit-testing","mocking","fakeiteasy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12980631,"title":"FakeItEasy - Is it possible to intercept a method and replace it with my own implementation?","body":"<p>I'm not sure how I should ask this question so feel free to edit the title. I have the following interface :</p>\n\n<pre><code>public interface IOuputDestination\n{\n    void Write(String s);\n}\n</code></pre>\n\n<p>In my unit test, I mock it like so :</p>\n\n<pre><code>var outputDestination = A.Fake&lt;IOutputDestination&gt;();\n</code></pre>\n\n<p>What I want to do, is intercept the Write method so that it uses my custom implementation that I define in my test. Something like this :</p>\n\n<pre><code>String output = \"\";\nA.CallTo(() =&gt; outputDestination.Write(A&lt;String&gt;.Ignored)).Action(s =&gt; output += s);\n              //Is something like this even possible ? ----^\n</code></pre>\n\n<p>Here the <code>Action</code> method does not exist, but what I would like to happen is that any parameter passed into <code>outputDestination.Write</code> be redirected to my custom action. Is this possible using FakeItEasy? If not, is there another mocking framework that allows this kind of behavior ?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","controller","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3853,"score":4,"question_id":5670902,"title":"Moq - Why does the property i want to mock need to be virtual?","body":"<p>I'm doing some unit testing, and mocking some properties using <strong>Moq</strong>.</p>\n\n<p>Now, this is a <strong>Controller</strong> test (ASP.NET MVC 3). My Controllers derive from an <em>abstract</em> controller, called <strong>AbstractController</strong>.</p>\n\n<p>This controller has a dependency on the Http Context (in order to do things like theming, domain-specific logic based on HTTP HOST headers, etc).</p>\n\n<p>This is done via a property called <strong>WebSiteSettings</strong>:</p>\n\n<pre><code>public abstract class AbstractController : Controller\n{\n   public WebSiteSettings WebSiteSettings { get; private set; }\n\n   // other code\n}\n</code></pre>\n\n<p>Notice the private set - the ctor sets it up. So, i changed it to used an interface, and that's what i've mocked:</p>\n\n<pre><code>public IWebSiteSettings WebSiteSettings { get; private set; }\n</code></pre>\n\n<p>I then created a \"FakeWebSiteSettings\", which mocks the Http Context in order for it to read the HTTP headers.</p>\n\n<p>The problem is, when i run the test, i get a <strong>NotSupportedException:</strong></p>\n\n<blockquote>\n  <p>Invalid setup on a non-virtual (overridable in VB) member: x => x.WebSiteSettings</p>\n</blockquote>\n\n<p>Here's the relevant mocking code:</p>\n\n<pre><code>var mockWebSiteSettings = new Mock&lt;FakeWebSiteSettings&gt;();\nvar mockController = new Mock&lt;MyController&gt;(SomeRepository);\nmockController.Setup(x =&gt; x.WebSiteSettings).Returns(mockWebSiteSettings.Object);\n\n_controller = mockController.Object;\n\nvar httpContextBase = MvcMockHelpers.FakeHttpContext();\nhttpContextBase.Setup(x =&gt; x.Request.ServerVariables).Returns(new NameValueCollection\n    {\n        {\"HTTP_HOST\",\"localhost.www.mydomain.com\"}, \n});\n_controller.SetFakeControllerContext(httpContextBase.Object);\n</code></pre>\n\n<p>If i make the <code>WebsiteSettings</code> property <strong>virtual</strong> - the test passes.</p>\n\n<p>But i can't understand why i need to do this. I'm not actually <em>overriding</em> the property, i'm simply mocking how it is setup. </p>\n\n<p>Am i missing something, or doing this wrong?</p>\n"},{"tags":["c#","unit-testing","c#-4.0","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12957537,"title":"How do I Moq a method that has an optional argument in its signature without explicitly specifying it or using an overload?","body":"<p>Given the following interface:</p>\n\n<pre><code>public interface IFoo\n{\n    bool Foo(string a, bool b = false);\n}\n</code></pre>\n\n<p>Attempting to mock it using Moq:</p>\n\n<pre><code>var mock = new Mock&lt;IFoo&gt;();\nmock.Setup(mock =&gt; mock.Foo(It.IsAny&lt;string&gt;())).Returns(false);\n</code></pre>\n\n<p>gives the following error at compile time:</p>\n\n<pre><code>An expression tree may not contain a call or invocation that uses optional arguments\n</code></pre>\n\n<p>I've found the issue above raised as an <a href=\"http://code.google.com/p/moq/issues/detail?id=284\" rel=\"nofollow\">enhancement</a> in Moq's list of issues and it appears to be assigned to the 4.5 release (whenever that is).</p>\n\n<p>My question is: what should I do given that the above is not going to be fixed anytime soon? Are my options only to either explicitly set the default value of the optional parameter everytime I mock it (which kinda defeats the point of specifying one in the first place) or to create an overload without the bool (like what I would have done prior to C# 4)?</p>\n\n<p>Or has anyone come across a more clever way to overcome this issue?</p>\n"},{"tags":["unit-testing","testing","c++builder"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":12972509,"title":"How to test application in borland c++ 6?","body":"<p>I am using Borland C++ Builder 6. Does anybody know what unit-test library works in this IDE? </p>\n"},{"tags":["android","unit-testing","junit"],"answer_count":1,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":2138,"score":6,"question_id":5395216,"title":"Creating an Android JUnit Test project in Eclipse","body":"<p>How do I create an Android Test project in Eclipse in the target project's <code>/test</code> directory?</p>\n\n<p>Note: I'm just doing my own Q+A for people according to the Stackoverflow FAQ on answering your own question.</p>\n"},{"tags":["unit-testing","http","rest","jax-rs","resteasy"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12976102,"title":"Resteasy, Make a Http-Put or Http-Post with Server-side Mock Framework of RestEasy","body":"<p>I wrote a Rest-Service which i would like to test.\nI wanna run a JUnit test without having my server run. For this I am using the Server-side Mock Framework of RestEasy. </p>\n\n<p>My question is, how can I make a Http-Put or Http-Post request with this framework with an marshalled Java Object in the Http-Body???</p>\n\n<p>The Code below runs fine for an Http-Get, but how to make a Put or Post, maybe someone got some example code for this???</p>\n\n<pre><code>@Test\npublic void testClient() throws Exception {\n\n    Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();\n\n    POJOResourceFactory noDefaults = new POJOResourceFactory(\n            MyClass.class);\n    dispatcher.getRegistry().addResourceFactory(noDefaults);\n\n    {\n        MockHttpRequest request = MockHttpRequest.get(\"/message/test/\"\n                + requestParam);\n        MockHttpResponse response = new MockHttpResponse();\n\n        dispatcher.invoke(request, response);\n        assertEquals(HttpServletResponse.SC_OK, response.getStatus());\n\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","corona","coronasdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12951166,"title":"Corona unit testing on linux","body":"<p>I want to create automatic unit tests for Corona on every push to a git repository. These unit tests should run on a Linux server. However, there is no Linux version of the Corona SDK. Is it possible to run unit tests for Corona on Linux? And if so, how?</p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":95,"score":4,"question_id":12973631,"title":"How to unit test a project outside visual studio","body":"<p>I have made a project in visual studio and also implemented unit testing.\nThe code working fine with the unit testing.</p>\n\n<p>Now I have a doubt that is it possible to implement unit testing outside the visual studio environment such that I only use the exe generated by my project and test it for multiple cases?</p>\n\n<p>I am looking for an option which can utilise my current unit testing implementation</p>\n\n<p>I am new to unit testing, so any help would be appreciated</p>\n\n<p>thanks in advance</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12973847,"title":"Method isn't invoked in Moq","body":"<p>I'm quite lost in trying to understand why a method doesn't get invoked.\nI created a little test code that reproduces the problem.</p>\n\n<pre><code>public interface ILoader\n{\n    IEnumerable&lt;string&gt; LoadAll();\n\n    string LoadItem(int key);\n}\n\npublic interface IStore\n{\n    IQueryable&lt;string&gt; Items { get; }\n}\n\npublic abstract class StoreBase : IStore\n{\n    public void Load()\n    {\n        Items = LoadItems().ToArray().AsQueryable();\n    }\n\n    protected abstract IEnumerable&lt;string&gt; LoadItems();\n\n    public IQueryable&lt;string&gt; Items { get; private set; }\n}\n\npublic abstract class StoreBase2 : StoreBase\n{\n    private readonly ILoader _loader;\n\n    protected StoreBase2(ILoader loader)\n    {\n        _loader = loader;\n    }\n\n    protected override IEnumerable&lt;string&gt; LoadItems()\n    {\n        return _loader.LoadAll();\n    }\n}\n</code></pre>\n\n<p>end here is the body of the test</p>\n\n<pre><code>Mock&lt;ILoader&gt; mockLoader = new Mock&lt;ILoader&gt;();\nmockLoader.Setup(p =&gt; p.LoadAll()).Returns(() =&gt; Enumerable.Range(1, 10).Select(i =&gt; string.Format(\"Item: {0}\", i)));\nmockLoader.Setup(p =&gt; p.LoadItem(It.IsAny&lt;int&gt;())).Returns((int i) =&gt; string.Format(\"Item: {0}\", i));\n\nMock&lt;StoreBase2&gt; mockStore = new Mock&lt;StoreBase2&gt;(mockLoader.Object);\nmockStore.Object.Load();\n\nmockLoader.Verify(p =&gt; p.LoadAll());\n</code></pre>\n\n<p>If I introduce a concrete implementation of StoreBase2 (sorry for the naming), and I use it instead of mocking the base class, it works.</p>\n\n<pre><code>public class StoreBaseImpl : StoreBase2\n{\n    public StoreBaseImpl(ILoader loader) : base(loader) {}\n}\n\nvoid MyTest() \n{\n    Mock&lt;ILoader&gt; mockLoader = new Mock&lt;ILoader&gt;();\n    mockLoader.Setup(p =&gt; p.LoadAll()).Returns(() =&gt; Enumerable.Range(1, 10).Select(i =&gt; string.Format(\"Item: {0}\", i)));\n    mockLoader.Setup(p =&gt; p.LoadItem(It.IsAny&lt;int&gt;())).Returns((int i) =&gt; string.Format(\"Item: {0}\", i));\n\n    var store = new StoreBaseImpl(mockLoader.Object);\n    store.Load();\n    mockLoader.Verify(p =&gt; p.LoadAll());\n}   \n</code></pre>\n\n<p>Am I missing something?</p>\n\n<p>EDIT: added on paste bin for easier access to the code: <a href=\"http://pastebin.com/ggV20wAw\" rel=\"nofollow\">http://pastebin.com/ggV20wAw</a></p>\n"},{"tags":["c++","linux","eclipse","unit-testing","boost"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":494,"score":0,"question_id":5914632,"title":"eclipse and boost unit_test_framework failing syntax check using c++","body":"<p>i have the following Problem.\nI started to use the boost library version 1.40, for unit testing. \nSince some other people working on the project and not all of them are using eclipse, the program has to be compilable with a makefile. So we used cmake to generate one. \nThe good thing is, the test is building and working perfectly fine.</p>\n\n<p>But the problem is, when using eclipse (created a c++ makefile project), it complains about several syntax errors (in the sourcecode view). \nSomething like:<BR>\n    <code>BOOST_AUTO_TEST_CASE( my_test )\n{ some code }</code>     <BR>\nwill be detected as a syntax error by eclipse. It is really annoying having all these error messages in the IDE. Since after the first line nearly every line in the <code>some code</code> block is marked as having syntax errors as well.<BR><BR>\nSo here is what i tried already: <BR></p>\n\n<ul>\n<li> I added    `/usr/include/boost/`     to the GNU C++ path options. (properties->C/C++ General->Path and Symbols->Path). This works normally for other external libs that are included by FindPkgConfig in the cmake file. So that the auto completion in eclipse can find the correct classes and function names.</li>\n<li>Same way included     `/usr/include/boost/test/`    directly.</li>\n<li>Adding     `/usr/lib/libboost_unit_test_framework.so.1.40.0`    to the Libraries list. </li>\n<li>Adding    `/usr/lib`     to the Library Paths.</li>\n</ul>\n\n<p>So anyone has a hint how to teach eclipse that the syntax of the boost Macros is correct??</p>\n\n<p><strong>Update</strong>:<br>\nI forgot:<br>\nSystem is Linux and Eclipse Version is 3.6.1, CDT Version is:<br>\nVersion: 1.0.0.201009141542<br>\nBuild id: 201009141542  </p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","unit-testing","razor","razorgenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":11792971,"title":"How can I install RazorGeneratorSupportForVbhtmlFiles?","body":"<p>I read David Ebbo's <a href=\"http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html\" rel=\"nofollow\">blog post</a> about precompiling razor views for use in unit testing.  The original project only supports C# (cshtml) files, but there is a fork <a href=\"http://razorgenerator.codeplex.com/SourceControl/network/forks/1QuickNick/RazorGeneratorSupportForVbHtmlFiles\" rel=\"nofollow\">fork</a> by 1QuickNick which is supposed to have added support for VB (vbhtml) files to the project.</p>\n\n<p>There's no nuget package for the fork that I see, so I'm not quite sure how to install it.  I cloned the fork with hg on my machine and built it, but I cannot figure out how to make it available as a custom tool.  I put the generated DLL's (RazorGenerator.Core.dll and RazorGenerator.dll) into my web project's lib folder and added a reference, but I get an error when I try to use <code>RazorGenerator</code> as a custom tool.</p>\n"},{"tags":["unit-testing","cmake","googletest"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2647,"score":3,"question_id":8507723,"title":"How to start working with GTest and CMake","body":"<p>I have recently been sold on using CMake for compiling my C++ projects, and would now like to start writing some unit tests for my code. I have decided to use the Google Test utility to help with this, but require some help in getting started.</p>\n\n<p>All day I have been reading various guides and examples include the <a href=\"http://code.google.com/p/googletest/wiki/V1_6_Primer\" rel=\"nofollow\">Primer</a>, an <a href=\"http://www.ibm.com/developerworks/aix/library/au-googletestingframework.html?ca=drs-\" rel=\"nofollow\">introduction at IBM</a> and some questions on SO (<a href=\"http://stackoverflow.com/a/4222169/769220\">here</a> and <a href=\"http://stackoverflow.com/a/5901489/769220\">here</a>) as well as other sources I've lost track of. I realise there's plenty out there but somehow I am still having difficulties.</p>\n\n<p>I'm currently trying to implement the most basic test, to confirm I've compiled/installed gtest right and it's not working. The only source file (testgtest.cpp) is taken almost exactly from <a href=\"http://stackoverflow.com/a/4222169/769220\">this</a> previous answer:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include \"gtest/gtest.h\"\n\nTEST(sample_test_case, sample_test)\n{\n    EXPECT_EQ(1, 1);\n}\n</code></pre>\n\n<p>and my associated CMakeLists.txt is as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(basic_test)\n\n# Setup testing\nenable_testing()\nfind_package(GTest REQUIRED)\ninclude_directories(${GTEST_INCLUDE_DIR})\n\n# Add test cpp file\nadd_executable(runUnitTests\n    testgtest.cpp\n)\n\n# Link test executable against gtest &amp; gtest_main\ntarget_link_libraries(runUnitTests ${GTEST_LIBRARY_DEBUG} ${GTEST_MAIN_LIBRARY_DEBUG})\n\nadd_test(\n    NAME runUnitTests\n    COMMAND runUnitTests\n)\n</code></pre>\n\n<p>Note that I have chosen to link against gtest_main instead of providing the main at the end of the cpp file as I believe this will allow me to scale testing up more easily to multiple files.</p>\n\n<p>When building the generated .sln file (in Visual C++ 2010 Express) I unfortunately get a long list of errors of the form</p>\n\n<pre><code>2&gt;msvcprtd.lib(MSVCP100D.dll) : error LNK2005: \"public: virtual __thiscall std::basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;::~basic_iostream&lt;char,struct std::char_traits&lt;char&gt; &gt;(void)\" (??1?$basic_iostream@DU?$char_traits@D@std@@@std@@UAE@XZ) already defined in gtestd.lib(gtest-all.obj)\n</code></pre>\n\n<p>which I think means that I'm not successfully linking to the gtest libraries. I have made sure that when linking against the debug libraries, I have then tried to build in debug mode.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Having done some more digging, I think my issue is something to do with the type of library I am building gtest into. When building gtest with CMake, if <code>BUILD_SHARED_LIBS</code> is un-checked, and I link my program against these .lib files I get the errors mentioned above. However, if <code>BUILD_SHARED_LIBS</code> is checked then I produce a set of .lib and .dll files. When now linking against these .lib files the program compiles, but when run complains that it can't find gtest.dll.</p>\n\n<p>What are the differences between a <code>SHARED</code> and a not <code>SHARED</code> library, and if I choose not shared, why doesn't it work? Is there an option in the CMakeLists.txt for my project that I am missing?</p>\n\n<p><strong>EDIT - Solution</strong></p>\n\n<p>I've included the working CMakeLists.txt below if it is helpful to anyone. This involves putting the gtest source directory as a subdirectory of your project.</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\nproject(basic_test)\n\n################################\n# GTest\n################################\nADD_SUBDIRECTORY (gtest-1.6.0)\nenable_testing()\ninclude_directories(${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})\n\n################################\n# Unit Tests\n################################\n# Add test cpp file\nadd_executable( runUnitTests testgtest.cpp )\n# Link test executable against gtest &amp; gtest_main\ntarget_link_libraries(runUnitTests gtest gtest_main)\nadd_test( runUnitTests runUnitTests )\n</code></pre>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":2618,"score":5,"question_id":1646671,"title":"Is it possible to programmatically generate JUnit test cases and suites?","body":"<p>I have to write a very large test suite for a complex set of business rules that are currently captured in several tabular forms (e.g., if parameters X Y Z are such and such, the value should be between V1 and V2). Each rule has a name and its own semantics.</p>\n\n<p>My end goal is to have a test suite, organized into sub test suites, with a test case to each rule.</p>\n\n<p>One option is to actually hard code all these rules as tests. That is ugly, time consuming, and inflexible.</p>\n\n<p>Another is to write a Python script that would read the rule files and generate Java classes with the unit tests. I'd rather avoid this if I can. Another variation would be to use Jython.</p>\n\n<p>Ideally, however I would like to have a test suite that would read the files, and would then define sub-suites and tests within them. Each of these tests might be initialized with certain values taken from the table files, run fixed entry points in our system, and then call some validator function on the results based on the expected value. </p>\n\n<p>Is there a reasonable way to pull this off using only Java?</p>\n\n<p>Update: I may have somewhat simplified our kind of rules. Some of them are indeed tabular (excel style), others are more fuzzy. The general question though remains as I'm probably not the first person to have this problem.</p>\n"},{"tags":["unit-testing","jsf","tomcat"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12971961,"title":"managed beans not instantiated with embedded tomcat 7","body":"<p>I have a fairly small JSF 2 application using myfaces and primefaces. It is setup as a as a tomcat 7 service in Eclipse and works fine, including ajax and the works.</p>\n\n<p>However, I want to unit test it, so I've added Tomcat 7 as a test dependency and create the appropriate startup code.</p>\n\n<pre><code>// create tomcat\nTomcat tomcat = new Tomcat();\ntomcat.setPort(HTTP_PORT);\n\n// add \"web\" as a webapp, all classes that are in the current classpath (all in eclipse) are available\nContext ctx = tomcat.addWebapp(\"/\" + CONTEXT_PREFIX, new File(\"src/main/webapp\").getAbsolutePath());\n\n// start the server (but do not wait)\ntomcat.start();\n</code></pre>\n\n<p>This also starts correctly, but the managed beans are not loaded. So even though the pages look good, there is no behavior. The problems seems to be similar to this Jetty blog, talking about how Jetty only searches for managed beans in a certain location.</p>\n\n<p><a href=\"http://musingsofaprogrammingaddict.blogspot.com.au/2009/12/running-jsf-2-on-embedded-jetty.html\" rel=\"nofollow\">http://musingsofaprogrammingaddict.blogspot.com.au/2009/12/running-jsf-2-on-embedded-jetty.html</a></p>\n\n<p>The web deployment assembly in Eclipse for the Tomcat server has it place all the class files in WEB-INF/classes, so that probably is the problem. </p>\n\n<p>Is it possible for embedded Tomcat 7 to use addWebapp (in order to unit test the web.xml) but redirect WEB-INF/classes to the correct directory?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":12961380,"title":"using Moq to verify a CommandHandler method call with correct Command Parameters","body":"<p>I have the following test case:</p>\n\n<pre><code>    [Test]\n    public void MarkAsSuccessfulTest()\n    {\n        //setup data\n        var payment = Util.DbUtil.CreateNewRecurringProfilePayment();\n\n        //unit test\n\n        var mockNotificationSender = new Mock&lt;IMarkAsSuccessfulNotificationSender&gt;();\n        var mockCommandHandler = new Mock&lt;IDbCommandHandler&lt;RecurringPaymentMarkAsSuccessfulCommand&gt;&gt;();\n\n        var classUnderTest = new RecurringProfileMarkLastPaymentAsSuccessful(mockCommandHandler.Object, mockNotificationSender.Object);\n\n        classUnderTest.MarkAsSuccessful(payment.RecurringProfile);\n        mockCommandHandler.Verify(x=&gt;x.Handle(It.IsAny&lt;RecurringPaymentMarkAsSuccessfulCommand&gt;()), Times.Once());\n        mockNotificationSender.Verify(x=&gt;x.SendNotification(payment), Times.Once());\n\n    }\n</code></pre>\n\n<p>The issue is with the line:</p>\n\n<pre><code>mockCommandHandler.Verify(x=&gt;x.Handle(It.IsAny&lt;RecurringPaymentMarkAsSuccessfulCommand&gt;()), Times.Once())\n</code></pre>\n\n<p>This verifies that the <code>.Handle()</code> method was called. However, this is not enough for the test - This <code>.Handle()</code> takes a command parameter, which has one property - <code>Payment</code>.  I would like to verify that this parameter was actually matching the <code>payment</code> variable.</p>\n\n<p>Is this possible, or is there an issue with some of the code-design?</p>\n"},{"tags":["python","django","unit-testing","factory-boy"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12970932,"title":"Rewrite model @property in Factory Boy's object factory","body":"<p>I want to find a way to properly test my code with Factory Boy.</p>\n\n<p>There are a model, like this:</p>\n\n<pre><code>from django.db import models\n\nclass MyModel(models.Model):\n    param1 = &lt;some field&gt;\n    param1 = &lt;some field&gt;\n    param1 = &lt;some field&gt;\n\n    @property\n    def is_smth(self):\n        &lt;some complicated code that returns boolean&gt;\n</code></pre>\n\n<p>There is a factory for this model:</p>\n\n<pre><code>import factory\n\nclass MyModelFactory(factory.DjangoModelFactory):\n    param1 = &lt;some value&gt;\n    param2 = &lt;some value&gt;\n    param3 = &lt;some value&gt;\n\n    # And here i need to \"rewrite\" property of the model\n    # so that it would always return true\n</code></pre>\n\n<p>Can anyone help me with that? I didn't found mentions about this in factory boy's documentation, and various variants i've tried doesn't seem to work.</p>\n"},{"tags":["java","unit-testing","netbeans"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12967726,"title":"Testing Java with NetBeans","body":"<p>I have a project named JavaProject2 which contains one package named <code>some.myPackage</code>. That package contains three .java files. Now I want to add a .java file (ie Mytest.java) that does testing with JUnit. \nWhere should I put that file? I put it on the source files but there are no testing results. If I place it on a Test Package then I will not be able to use the public classes and functions I have made in the other files. \nIn the beginning of the source file it has <code>package some.myPackage;</code>. Whenever I run test it always gives me an error.</p>\n\n<p>ERROR \n<code>Unknown caused an error (0.0 s)</code></p>\n\n<p>It displays the same error whether I have or not the Mytest.java file is present.</p>\n\n<p>Can anyone help me resolve this error? Please don't give me a downvote, I have been trying to figure this out for the last 4 hours. </p>\n\n<p>Can I remain having one and only source package? Or have I got to make an additional test package? </p>\n"},{"tags":["java","unit-testing","testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12965423,"title":"why have JUnit MethodRule and TestWatchman have been deprecated?","body":"<p>org.junit.rules.MethodRule and org.junit.rules.TestWatchman have been deprecated.</p>\n\n<p>one interesting note was at: <a href=\"https://github.com/KentBeck/junit/pull/519\" rel=\"nofollow\">https://github.com/KentBeck/junit/pull/519</a> , in part:\n\"Many developers are legitimate reasons to stick with MethodRule and the JUnit team has no plans to remove support for MethodRule...\"</p>\n\n<p><a href=\"http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestWatchman.html\" rel=\"nofollow\">http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/TestWatchman.html</a> documents:\n\"Deprecated. MethodRule is deprecated. Use TestWatcher implements TestRule instead.\" and provides some example code.</p>\n\n<p>What is the reasoning behind marking these deprecated? \nWhat is the tradeoff between TestWatcher and the deprecated TestWachman?\nDo you have a good link for a synopsis or overview on this specific topic?</p>\n"},{"tags":["unit-testing","junit","selenium-rc","testng"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":8134331,"title":"Reports Generation for Web Based Application Using Selenium Tool","body":"<p>Currently we are generating HTML Reports for  Automation, but those reports are not good enough to explain number of scenario which we cover in Automation, Is there anything we can use with Selenium to generate a proper reports which can give a complete overview and can easily understand by anyone</p>\n\n<p>First Thing we can show a complete pie charts which cover number of test case passed and Failed.\nSecond thing we  can show, what are test cases are there in this build.</p>\n"},{"tags":["visual-studio-2010","unit-testing","sql-server-2008-r2","sqlclr"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":339,"score":0,"question_id":9470150,"title":"CREATE ASSEMBLY in SQLCLR using assembly byte string failed because it could not open the physical file","body":"<p>I am trying to add <a href=\"http://technet.microsoft.com/en-us/library/ms131057%28v=sql.105%29.aspx\" rel=\"nofollow\">user-defined aggregates</a> to a SQL Server 2008 database whose schema is defined in my Visual Studio 2010 solution file.  The code for this custom aggregate lives in a SQLCLR project within the same solution, but I am having a lot of difficulty getting my unit tests to pass.  For unit testing this project, I am using a method similar to the one <a href=\"http://stackoverflow.com/questions/2885335/clr-sql-assembly-get-the-bytestream\">here</a> to get the byte string of the assembly.  The test suite or a post-build event needs to automatically update my script to create the assembly each time, because after any sort of MSBuild (from the command line or Visual Studio), the assembly bits change.</p>\n\n<p>The script seems to be updating its assembly bit string to correctly match the current assembly bits for each run.  But the unit test still fails, with an underlying SQLException saying, \"CREATE ASSEMBLY failed because it could not open the physical file \"0xDEADBEEF\": 3(The system cannot find the path specified.).  (I've removed the real assembly bits from that message.)  Why would this error come up when the assembly bits appear to be correct?  How should I fix this?</p>\n\n<p>The length of the actual assembly bit string is about 16 KB.  Would this be a problem?  Does CREATE ASSEMBLY need to have the bits for the whole assembly or just a header, and how would I get only the header?</p>\n\n<p>We already have the unit test infrastructure in place to deploy this database, including running pre- and post-deployment scripts.  We also have an authorization set up that our user-defined functions and aggregates need to have.</p>\n\n<p>Here is my post-deployment script:</p>\n\n<pre><code>IF EXISTS (SELECT name FROM sys.assemblies WHERE name = 'foo')\n   DROP ASSEMBLY foo\ngo\n\n-- The assembly bits change after every build from the command line or Visual Studio.  \n-- This variable needs to change each time the foo assembly changes.\ndeclare @assemblyBits as varchar(max)\n-- This string is really about 15000 characters, including some newlines which are removed\n-- in the next block.  Word-wrapping this line or not word-wrapping it seems to have no \n-- effect.\nset @assemblyBits = '0x42'\n\n-- Trim whitespace from assembly bits.\ndeclare @sanitizedBits as varchar(max)\nset @sanitizedBits = Replace(Replace(Replace(@assemblyBits, Char(10), ''), Char(13), ''), Char(9), '')\n\nCREATE ASSEMBLY foo\nAUTHORIZATION bar\nfrom @sanitizedBits \nGO\n\nIF EXISTS (SELECT name FROM sysobjects WHERE name = 'Product')\n   DROP AGGREGATE Product\ngo\n\nCREATE AGGREGATE [Aggregations].[Product]\n    (@value float,\n    @weight float)\n    RETURNS float\n    EXTERNAL NAME foo.[foo.Product]\ngo\n</code></pre>\n"},{"tags":["visual-studio-2010","unit-testing","xaml","visual-studio-2012","code-analysis"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12950163,"title":"Creating custom Code Analysis rules for XAML","body":"<p>I'm interested in creating custom rules for Code Analysis (Visual Studio 2010) <em>which target the XAML specifically</em>.</p>\n\n<p>I've read about <a href=\"http://blogs.msdn.com/b/codeanalysis/archive/2010/03/26/how-to-write-custom-static-code-analysis-rules-and-integrate-them-into-visual-studio-2010.aspx\" rel=\"nofollow\">creating custom rules</a> and even about FXCop + <a href=\"http://archive.msdn.microsoft.com/XAML\" rel=\"nofollow\">XAML Toolkit</a>, but the latest is now archived and doesn't support latest versions of FXCop (i.e. the version that Code Analysis works with).\nI've also looked at other tools such as <a href=\"http://www.ndepend.com/Features.aspx\" rel=\"nofollow\">NDepend</a> but it doesn't seem to support this either.</p>\n\n<p>An example for a custom rule I'd like to make:\n<em>Make sure no elements in the XAML have the <strong>Width</strong> property set to a constant.</em></p>\n\n<p>Any ideas on how to do this in VS 2010/VS 2012 (any external tool that integrates with Visual studio is also an option)?</p>\n"},{"tags":["c++","unit-testing","cppunit"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12967948,"title":"How to display hex value when cppunit assert failed","body":"<p>I use CPPUNIT_ASSERT_EQUAL(a, b) to check the value a and b. The a and b are unsigned char type. So, when this assertion failed it will display the expected and actual value. Because the type is unsigned char, the expected and actual value will be displayed as characters. For example, 35 will be displayed as #. But this is not what I want. Of course, CPPUNIT_ASSERT_EQUAL((int)a, (int)b) may be a solution but it looks like strange. In addition, it would be better if the values are displayed as hex format. But I don't know how to reach this. It would be highly appreciated if somebody gives a answer.</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":12964956,"title":"How to use a spy with toHaveBeenCalledWith and a mutable array in Jasmine.js?","body":"<p>I have some code which calls a callback function with an array as single argument. After calling the callback, the code changes the array contents. It is similar to this code:</p>\n\n<pre><code>function myCode( callback ) {\n    var someArray = [ 1, 2, 3, 4 ];\n    callback( someArray );\n\n    // change someArray in arbitrary ways\n    someArray.splice( 2 );\n    ...\n}\n</code></pre>\n\n<p>Now, I want to verify that the callback is called with the correct array content. Using Jasmine.js I would write my spec like this:</p>\n\n<pre><code>describe( \"My code\", function() {\n    var callback;\n\n    beforeEach( function() {\n        callback = jasmine.createSpy( \"My callback\" );\n        myCode( callback );\n    });\n\n    it( \"calls the callback and passes the correct array\", function() {\n        expect( callback ).toHaveBeenCalledWith( [ 1, 2, 3, 4 ] );\n    });\n});\n</code></pre>\n\n<p>This fails. The problem is, that Jasmine.js records the array but does not make a copy of it. Since the array is changed after the call, the expect()-Line fails, even though the actual call fulfilled the expectation. The same problem occurs with mutable objects.</p>\n\n<p>How can I test such code?</p>\n"},{"tags":["c#","unit-testing","mstest","code-coverage"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":66,"score":3,"question_id":12947507,"title":"MSTest Shows Partial Code Coverage on Compound Boolean Expressions","body":"<p>From Microsoft's documentation, partially covered code is <em>\"...where some of the code blocks within the line were not executed.\"</em> I'm pretty stumped on this one (simplified for brevity):</p>\n\n<p>Given this method:</p>\n\n<pre><code>public List&lt;string&gt; CodeUnderTest()\n{\n    var collection = new List&lt;string&gt; { \"test1\", \"test2\", \"test3\" };\n    return collection.Where(x =&gt; x.StartsWith(\"t\") &amp;&amp; x == \"test2\").ToList();\n}\n</code></pre>\n\n<p>And this test:</p>\n\n<pre><code>[TestMethod]\npublic void Test()\n{\n    var result = new Class1().CodeUnderTest();\n    CollectionAssert.Contains(result, \"test2\");\n}\n</code></pre>\n\n<p>Code coverage results shows that the expression <code>x.StartsWith(\"t\") &amp;&amp; x == \"test2</code> is only partially covered. I'm not sure how that's possible unless the compiler or CLR has some sort of eager condition matching stuff, but maybe I just need to have it explained.</p>\n"},{"tags":["python","unit-testing","decorator","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12965067,"title":"Python Unit-Testing: Nose @with_setup failing","body":"<p>I'm doing some tests. A bunch of my test functions have common setups, so I decided I should use <code>@with_setup</code> decorator from <code>nose.tools</code>. I've simplified my problem down to this:</p>\n\n<pre><code>from nose.tools import with_setup\n\nclass TestFooClass(unittest.TestCase):\n   def setup_foo_value(self):\n      self.foo = 'foobar'\n\n   @with_setup(setup_foo_value)\n   def test_something(self):\n      print self.foo\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>$ python manage.py test tests/test_baz.py\n\nE\n======================================================================\nERROR: test_something (project.tests.test_baz.TestFooClass)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/user/Coding/project-backend/project/../project/tests/test_baz.py\", line 17, in test_something\n    print self.foo\nAttributeError: 'TestFooClass' object has no attribute 'foo'\n\n----------------------------------------------------------------------\n</code></pre>\n\n<p>It's like <code>setup_foo_value</code> is not being run at all. Any help would be really appreciated!</p>\n"},{"tags":["unit-testing","frameworks","fortran"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":11931853,"title":"Find out the parts of my FORTRAN project which were not unit-tested","body":"<p>i am currently switching to funit to fully test my rather big Fortran-Project. \nIs there a tool that allows me to find out which lines of my project were not \nyet tested? I use emacs, so is there a simple script that would allow me to \neasily see which parts of my file are not yet tested?</p>\n\n<p>I could imagine recruiting the -prof compiler for something like that, but \ni am just starting out. So i definitely cannot do this on my own. </p>\n"},{"tags":["c#","unit-testing","rhino-mocks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12963744,"title":"Rhino Mocks' AssertWasCalled on a mock's property assignment in a tested method","body":"<p>Using Rhino Mocks 3.6, given the code below I would expect the AssertWasCalled assertion to pass, but it does not. Instead there is the failed assertion message: </p>\n\n<blockquote>\n  <p>\"Rhino.Mocks.Exceptions.ExpectationViolationException:\n  IBar.set_Model(7); Expected #1, Actual #0.\"</p>\n</blockquote>\n\n<p>Trying IgnoreArguments() does not change the result, but changing the IBar property to a method and asserting the method is called with the argument does work.</p>\n\n<p>What am I missing here?</p>\n\n<pre><code>using Microsoft.VisualStudio.TestTools.UnitTesting;\nusing Rhino.Mocks;\n\npublic interface IFoo { }\npublic interface IBar { int Model { get; set; } }\npublic class Bar : IBar { public int Model { get; set; } }\n\npublic class Foo : IFoo\n{\n    public void MyMethod(IBar bar)\n    {\n        bar.Model = 7;\n    }\n}\n\n[TestClass]\npublic class TestFoo\n{\n    [TestMethod]\n    public void MyMethod()\n    {\n        var foo = new Foo();\n\n        var mockBar = MockRepository.GenerateStub&lt;IBar&gt;();\n        foo.MyMethod(mockBar);\n\n        mockBar.AssertWasCalled(b =&gt; b.Model = 7);\n    }\n}\n</code></pre>\n"},{"tags":["mysql","sql","unit-testing","hsqldb","group-concat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12963700,"title":"How to add group_concat to hsqldb with distinct?","body":"<p>I am trying to add the group_concat function to hsqldb so that I can properly test a query as a unit/integration test. The query works fine in mysql, so I need it to work in hsqldb (hopefully).</p>\n\n<pre><code>        // GROUP_CONCAT\n        jdbcTemplate.update(\"DROP FUNCTION GROUP_CONCAT IF EXISTS;\");\n        jdbcTemplate.update(\n            \"create aggregate function group_concat(in val varchar(100), in flag boolean, inout buffer varchar(1000), inout counter int) \" +\n            \"   returns varchar(1000) \" +\n            \"   contains sql \" +\n            \"begin atomic \" +\n            \"   if flag then\" +\n            \"      return buffer;\" +\n            \"   else\" +\n            \"      if val is null then return null; end if;\" +\n            \"      if buffer is null then set buffer = ''; end if;\" +\n            \"      if counter is null then set counter = 0; end if;\" +\n            \"      if counter &gt; 0 then set buffer = buffer || ','; end if;\" +\n            \"      set buffer = buffer + val;\" +\n            \"      set counter = counter + 1;\" +\n            \"      return null;\" +\n            \"   end if;\" +\n            \"end;\"\n        );\n</code></pre>\n\n<p>Adding this aggregation function solves most of the problem. It will correctly behave like mysql's group_concat. However, what it won't do is let me use the distinct keyword like this:</p>\n\n<pre><code>group_concat(distinct column)\n</code></pre>\n\n<p>Is there any way to factor in the distinct keyword? Or do I rewrite the query to avoid the distinct keyword altogether?</p>\n"},{"tags":["unit-testing","mef","system.componentmodel"],"answer_count":3,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":2313,"score":4,"question_id":2851140,"title":"MEF and unit testing with NUnit","body":"<p>A few weeks ago I jumped on the MEF (ComponentModel) bandwagon, and am now using it for a lot of my plugins and also shared libraries.  Overall, it's been great aside from the frequent mistakes on my part, which result in frustrating debugging sessions.</p>\n\n<p>Anyhow, my app has been running great, but my MEF-related code changes have caused my automated builds to fail.  Most of my unit tests were failing simply because the modules I was testing were dependent upon other modules that needed to be loaded by MEF.  I worked around these situations by bypassing MEF and directly instantiating those objects.</p>\n\n<p>In other words, via MEF I would have something like</p>\n\n<pre><code>[Import]\npublic ICandyInterface ci { get; set; }\n</code></pre>\n\n<p>and </p>\n\n<pre><code>[Export(typeof(ICandyInterface))]\npublic class MyCandy : ICandyInterface\n{\n    [ImportingConstructor]\n    public MyCandy( [Import(\"name_param\")] string name) {}\n    ...\n}\n</code></pre>\n\n<p>But in my unit tests, I would just use</p>\n\n<pre><code>CandyInterface MyCandy = new CandyInterface( \"Godiva\");\n</code></pre>\n\n<p>In addition, the CandyInterface requires a connection to a database, which I have worked around by just adding a test database to my unit test folder, and I have NUnit use that for all of the tests.</p>\n\n<p>Ok, so here are my questions regarding this situation:</p>\n\n<ol>\n<li>Is this a Bad Way to do things?</li>\n<li>Would you recommend composing parts in [SetUp]</li>\n<li>I haven't yet learned how to use mocks in unit testing -- is this a good example of a case where I might want to mock the underlying database connection (somehow) to just return dummy data and not really require a database?</li>\n<li>If you've encountered something like this before, can you offer your experience and the way you solved your problem?  (or should this go into the community wiki?)</li>\n</ol>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12962772,"title":"How to stop Python unittest from printing test docstring?","body":"<p>I've noticed that, when my Python unit tests contain documentation at the top of the function, sometimes the framework prints them in the test output. Normally, the test output contains one test per line:</p>\n\n<pre><code>&lt;test name&gt; ... ok \n</code></pre>\n\n<p>If the test has a docstring of the form</p>\n\n<pre><code>\"\"\"\ntest that so and so happens\n\"\"\"\n</code></pre>\n\n<p>than all is well. But if the test has a docstring all on one line:</p>\n\n<pre><code>\"\"\"test that so and so happens\"\"\"\n</code></pre>\n\n<p>then the test output takes more than one line and includes the doc like this:</p>\n\n<pre><code>&lt;test name&gt;\ntest that so and so happens ... ok\n</code></pre>\n\n<p>I can't find where this is documented behavior. Is there a way to turn this off?</p>\n"},{"tags":["java","android","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12890030,"title":"Test app lifecycle, destruction and creation","body":"<p>I need to test my apps lifecycle and its destruction and re-creation, because when the keyboard slides in/out (or is rotated), the app is destroyed and re-created. I also need to test for memory leaks when it does this.</p>\n\n<p>I saw in the tutorial <a href=\"http://developer.android.com/tools/testing/activity_test.html#StateManagementTests\" rel=\"nofollow\">http://developer.android.com/tools/testing/activity_test.html#StateManagementTests</a></p>\n\n<pre><code>Terminate the activity and restart it:\nmActivity.finish();\nmActivity = this.getActivity();\n</code></pre>\n\n<p>However this is very simplified. My logging seems to indicate that calling finish() spawns a background thread with a different thread id which then calls onPause(), finish(), onStop(), and onDestroy(). I even tried <code>getInstrumentation().waitForIdleSync();</code> to try to wait for that background thread to complete, but I still get race conditions when I test for expected values.</p>\n\n<p>Not only that, but when it re-creates the Activity (when the 1st race condition doesn't occur or I comment out the assert), with getActivity(), then it just returns the exact same object that I just finished! I can tell because I log <code>this</code> in my onXXX...() methods. </p>\n\n<p>This differs from the orientation rotation / keyboard sliding app lifecycle, which always creates a new Activity object.</p>\n\n<p>So how can I test this destruction / reincarnation scenario?</p>\n"},{"tags":["unit-testing"],"answer_count":22,"favorite_count":4,"up_vote_count":29,"down_vote_count":0,"view_count":1543,"score":29,"question_id":2933391,"title":"Any good arguments for not writing unit tests?","body":"<p>I have read a lot of threads about the joys and awesome points of unit testing. My question is, does anyone have a good argument against unit testing?</p>\n"},{"tags":["visual-studio-2010","unit-testing","c#-4.0","dynamics-crm-2011"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12961900,"title":"Unit Test Project Accessor does not create all private methods","body":"<p>I had a project that I had previously created a unit test for which required the autogenerated Accessor class.  Everything worked great.  But then I created a new class in the same project, that I needed to unit test.  When I looked at the Accessor class, the new method wasn't there (although some other proetected methods were).</p>\n\n<p>I went to the class file and right clicked and selected Created Private Accessor, but was greeted by two error messageboxes, \"Private accessor creation failed for 'Foo'.\", and \"A reference to the component 'Foo' already exists in the project.\"</p>\n\n<p>A little more trouble shooting and I discovered that if any private method had a parameter that was one of my auto generated CRM entity types it wouldn't show up in the Accessor class.  (not sure if it was CRM related, or just the dll itself).  Why won't my methods show up?</p>\n"},{"tags":["c","unit-testing","embedded"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12960905,"title":"Unit testing procedural C code","body":"<p>I just went through this <a href=\"http://www.youtube.com/watch?v=wEhu57pih5w\" rel=\"nofollow\">video</a> on unit testing. It gives good pointers on unit testing object oriented code. Are there any good documents / books / tips to write a unit testable procedural <code>C</code> code ?</p>\n"},{"tags":["ios","unit-testing","core-data","gh-unit"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12960816,"title":"iOS GHUnit and Core Data","body":"<p>ers,</p>\n\n<p>I recently integrated CoreData into my existing iOS application.  I have previously existing tests written around some domain and network functionality; that now needs to be retrofitted to use CoreData (instead of storing in userDefaults).</p>\n\n<p>I have <code>GHUnitIOS.framework</code> included in my project.  However, all my tests are failing because the TestAppDelegate knows nothing about CoreData's <code>managedObjectContext</code>.  For reference as to what I'm seeing:</p>\n\n<p><code>[GHUnitIOSAppDelegate managedObjectContext]: unrecognized selector sent to instance</code></p>\n\n<p>This makes sense - the test app delegate doesn't have managedObjectContext as a property.  I'd love to add it, but since I only have access to the header files when using the framework, I can't really modify it for my needs.  I could download the GHUnit source and modify the implementation files, but I'd rather not do that if there's another option.</p>\n\n<p><em>How have others solved this problem?  IE, how can I fix my tests to support CoreData using GHUnit?</em></p>\n\n<p>Much thanks.</p>\n"},{"tags":["java","unit-testing","swing"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":859,"score":3,"question_id":3086607,"title":"unit test for Java Swing application","body":"<p>I'm looking to Unit Test a Swing application and was wondeing what would eb the best(easiest) approach to achieve this objective with almost full line coverage. If it matters, I'm using Eclipse Galileo for developemnt.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","unit-testing","java-ee"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12960094,"title":"Automated integration tests on deployed j2ee environment?","body":"<p>Our team is currently introducing automated testing to an existing J2EE web application that is deployed on Weblogic. We've had success with unit testing using JUnit and Mockito which are automatically run when our app is built and deployed by Jenkins.</p>\n\n<p>Integration testing has been more challenging because our application relies on components provided by the J2EE container such as WorkManager. There are several Spring beans which require these components to initialize properly. One way we've been able to get around it is to create custom application context configuration files which create mocks of the components that we don't really need for testing but still require to initialize the bean. This has been somewhat of a maintenance nightmare because each integration test needs it's own config and some can be quite involved.</p>\n\n<p>What we really want is to be able to have the entire application initialized with the normal configuration used in a deployed environment when running our integration tests. Is there a way to have integration tests automatically execute after deployment through Jenkins or another tool? </p>\n"},{"tags":["unit-testing","scala","parallel-processing","mpi","scalacheck"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12883741,"title":"Scalacheck, unit testing multi-process algorithms","body":"<p>I am currently developing a Scala framework for multi-process, parallel algorithms using MPJ-Express (i.e. a Java MPI-variant).</p>\n\n<p>MPJ-Express, and basically all MPI-variants, work by starting many processes with the same program. Since I have no control over the processes at runtime (my program does not spawn processes), I can't use standard unit testing frameworks due to the following reasons:</p>\n\n<ol>\n<li><p>Not all processes will own a local copy of the results after execution (ideally, the results should be collected at an arbitrary root-process)</p></li>\n<li><p>Lack of control over standard-output. It is not easily possible to get output only from a single process.</p></li>\n<li>Lack of flow control. All processes must enter the same test at the same time to allow single-program multiple data algorithms.</li>\n</ol>\n\n<p>Number 2 is mainly the problem, as 3 might work as expected and 1 can be fixed with an extra communication operation. Does anyone have practical experience, or know of better unit testing strategies for multi-process algorithms?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Right now, I seem to be having luck with the following code using <em>scalacheck</em>:</p>\n\n<pre><code>package it.vigtig.thesis.collection.scalacheck\n\nimport java.io.OutputStream\nimport java.io.PrintStream\n\nimport org.scalacheck.Prop.forAll\nimport org.scalacheck.Properties\n\nimport it.vigtig.thesis.env.DistEnv.globalRank\nimport it.vigtig.thesis.env.DistEnv.parallelize\n\nobject CollectionCheck {\n\n  def main(args: Array[String]) {\n\n    parallelize(args) {\n\n      if (globalRank &gt; 0) {\n        Console.setOut(new PrintStream(new OutputStream() {\n          def write(b: Int) { //nop    \n          }\n        }))\n      }\n\n      ST.main(Array())\n    }\n\n  }\n\n}\n\nobject ST extends Properties(\"String\") {\n\n  //  def println(a: String*) = gprintln(a)\n  property(\"startsWith\") = forAll((a: String, b: String) =&gt; (a + b).startsWith(a))\n\n  property(\"concatenate\") = forAll((a: String, b: String) =&gt;\n    (a + b).length &gt; a.length &amp;&amp; (a + b).length &gt; b.length)\n\n  property(\"substring\") = forAll((a: String, b: String, c: String) =&gt;\n    (a + b + c).substring(a.length, a.length + b.length) == b)\n\n}\n</code></pre>\n\n<p>The above code reroutes the scala-println method to a nop-operation for all other processes than p=0. I should be able to run the test-suites with parallel-methods, allowing only the root process to verify the results. The above yields the following output:</p>\n\n<pre><code>MPJ Express (0.38) is started in the multicore configuration\nrank-0: 0.212437745 time taken for initialize\n+ String.startsWith: OK, passed 100 tests.\n! String.concatenate: Falsified after 0 passed tests.\n&gt; ARG_0: \n&gt; ARG_1: \n+ String.substring: OK, passed 100 tests.\n</code></pre>\n"},{"tags":["ruby","unit-testing","time"],"answer_count":11,"favorite_count":7,"up_vote_count":29,"down_vote_count":0,"view_count":4364,"score":29,"question_id":1215245,"title":"Ruby unit testing: how to fake Time.now?","body":"<p>What's the best way to set Time.now for the purpose of testing time-sensitive methods in a Unit test?  Thanks!</p>\n"},{"tags":["c#","unit-testing","rest","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":435,"score":4,"question_id":7363021,"title":"Unit testing a REST client","body":"<p>I'm fairly new to unit testing but I'm trying to incorporate it into my development process for any new code I write (including bug fixes). </p>\n\n<p>I'm working a REST client to communicate with Highrise (37Signals). How can I unit test this without relying on the external dependency? (The REST service). </p>\n\n<p>For instance I'll have a method called <code>GetPeople()</code></p>\n\n<p>Things I'll want to unit test...</p>\n\n<ol>\n<li>The method returns the correct number of people in the account.</li>\n<li>The method returns null if there are no people in the account</li>\n<li>The method throws an exception if it can't connect to the service. </li>\n</ol>\n\n<p>What do I do to test that the service still functions the same. I.E person still has a First Name? Can I unit test this or is this more of an integration test? </p>\n"},{"tags":["wpf","unit-testing","nunit","codebehind"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12957518,"title":"Performing unit tests in a code behind file","body":"<p>I'm implementing a WPF application using the MVVM pattern.</p>\n\n<p>The application is basically a communications panel (comms panel) with control widgets laid on top of it (e.g., dial pads, intercom lines, etc). The control widgets have also been implemented using the MVVM pattern, as this allows us to easily test them on an individual basis.</p>\n\n<p>A few hours ago, I posted <a href=\"http://stackoverflow.com/questions/12952871/binding-a-variable-inside-a-viewmodel-to-a-different-variable-in-another-viewmod\">here</a> because I was having problems in order to link things between a DialPad and CommsPanels viewmodels. After a long chat with another SO member, I managed to get the link working. However, in doing that, I made heavy modifications in the DialPad code, such as getting rid of its model and moving the viewmodel code to the codebehind file. The problem is, not my unit tests are not working, mainly because NUnit is throwing an exception everytime I tried to instantiate a DialPad codebehind's class, which inherits from UserControl. Is there any way to write unit tests for a class that inherits from a WPF class (such as UserControl)?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["unit-testing","ruby-on-rails-3","tutorials","rspec","video-tutorials"],"answer_count":4,"favorite_count":8,"up_vote_count":20,"down_vote_count":0,"view_count":11076,"score":20,"question_id":5255506,"title":"Good tutorial for RSpec With Rails 3","body":"<p>I am looking for a good <em>free</em> tutorial which implements RSpec with Rails 3. I have found many tutorials which work for Rails 2.x but leads you into issues when trying the same in Rails 3. Rspec Gem also has updated , coming off the age.. Leading into compatibility issues.</p>\n\n<p>I am able to setup RSpec in my app but I can't fix issues I am getting into. Its like i am implementing a customized app without get an overall idea of what changes I would have to carefully incorporate due to usage of the latest Rails ( say 3.0 ) and the latest RSpec gem 2.5. I am also making use of rspec-rails 2.5 gem.</p>\n\n<p>Such tutorials( based on earlier versions of Rails and Rspec ) I have seen so far include:</p>\n\n<p><a href=\"http://fr.ivolo.us/posts/rspec-tutorial-part-2-a-simple-test\" rel=\"nofollow\">http://fr.ivolo.us/posts/rspec-tutorial-part-2-a-simple-test</a></p>\n\n<p><a href=\"http://blog.davidchelimsky.net/2007/05/14/an-introduction-to-rspec-part-i/\" rel=\"nofollow\">http://blog.davidchelimsky.net/2007/05/14/an-introduction-to-rspec-part-i/</a></p>\n\n<p>I am unable to find Part 2 of David's tutorial also. I wonder where I could find that.</p>\n\n<p>I also have seen a similar questions on stackoverflow.com like:-</p>\n\n<p><a href=\"http://stackoverflow.com/questions/4618241/rails-good-rspec2-example-usage-also-cucumber-pickle-capybara/4618392#4618392\">Rails: Good Rspec2 example usage? (Also: Cucumber, Pickle, Capybara)</a></p>\n\n<p>The only free tutorial relevant to Rspec with Rails 3 that I could find so far is:-</p>\n\n<p><a href=\"http://ruby.railstutorial.org/ruby-on-rails-tutorial-book\" rel=\"nofollow\">http://ruby.railstutorial.org/ruby-on-rails-tutorial-book</a></p>\n\n<p>I am using ruby 1.9.2 and rails 3.0.3 along with Ubuntu 10.04 .</p>\n\n<p>Thanks for any suggestions you can help me with.</p>\n"},{"tags":["unit-testing","monotouch","nunit","monodevelop","touch.unit"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":71,"score":4,"question_id":12369434,"title":"Best way for Unit Testing MonoTouch Projects?","body":"<p>Is there actually a good way to unit test MonoTouch projects using NUnit and the MonoDevelop test runner? </p>\n\n<p>I know there is the official MonoTouch unit tests project type, but running tests within the simulator isn't the way I want to go. For now I want to run tests with the MonoDevelop test runner, later everything should work with Jenkins (CI).</p>\n\n<p>I know the limitations about UI specific code, so everything I want to test has nothing to do with MonoTouch itself, it's all about business logic placed within separete projects.</p>\n\n<p>By adding tests to MonoTouch Library type projects, I am getting System.IO.FileNotFoundException's as described here: <a href=\"http://ben.phegan.name/index.php/2011/02/28/monotouch-and-unit-testing/\" rel=\"nofollow\">http://ben.phegan.name/index.php/2011/02/28/monotouch-and-unit-testing/</a></p>\n\n<p>By using a separate NUnit test project, I can't reference my system under test, because its project type is of type MonoTouch library project, which, of course, has an incompatible target framework (vMonoTouch).</p>\n\n<p>So, there isn't any real alternative to Touch.Unit, is it?</p>\n"},{"tags":["unit-testing","node.js","gruntjs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12952506,"title":"How do I run the GruntJS tests?","body":"<p>I just cloned the <a href=\"https://github.com/gruntjs\" rel=\"nofollow\">gruntjs repository</a>.</p>\n\n<p>How do I actually run the tests for GruntJS?</p>\n\n<p>(I don't mean I want to run my own tests using GruntJS. I mean that I want to run the tests for GruntJS itself.)</p>\n"},{"tags":["unit-testing","tdd","mocking","moq","typemock"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":619,"score":7,"question_id":2376405,"title":"Any teams out there using TypeMock? Is it worth the hefty price tag?","body":"<p>I hope this question is not 'controversial' - I'm just basically asking - has anyone here purchased TypeMock and been happy (or unhappy) with the results?</p>\n\n<p>We are a small dev shop of only 12 developers including the 2 dev managers. We've been using NMock so far but there are limitations. I have done research and started playing with TypeMock and I love it. It's super clean syntax and lets you basically mock everything, which is great for legacy code.</p>\n\n<p>The problem is - how do I justify to my boss spending 800-1200$ per license for an API which has 4-5 competitors that are completly free? 800-1200$ is how much Infragistrics or Telerik cost per license - and there sure as hell isn't 4-5 open source comparable UI frameworks... Which is why I find it a bit overpriced, albeit an awesome library...</p>\n\n<p>Any opinions / experiences are greatly appreciated.</p>\n\n<p><em><strong>EDIT: after finding MOQ I thought I fell in love - until I found out that it's not fully supported in VB.NET because VB lacks lambda sub routines =(. Is anyone using MOQ for VB.NET? The problem is we are a mixed shop - we use C# for our CRM development and VB for everything else. Any guidence is greatly appreciated again</em></strong></p>\n\n<p><em><strong>Edit: hmm.. I can't find Isolate.WhenCalled() equivalen in Moq... Any help here? I want to stub/mock out a ReadOnly property of a CONCRETE object (not of a mocked object)... I could easily do this with Isolate.WhenCalled with TM. How with Moq???</em></strong></p>\n"},{"tags":[".net","unit-testing","telerik","typemock","justmock"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":658,"score":3,"question_id":3319125,"title":"JustMock vs. TypeMock vs. Other","body":"<p>With Telerik's JustMock product newly available, it has a lot of similarities to TypeMock, in the ability to mock concrete classes, not just abstract classes or interfaces.  I was just curious your opinion on one or both of the products.  What do you like or dislike?</p>\n\n<p>Seems like JustMock might be shy on some of the features (TypeMock has been around for a while), but it had some good features.  Or if you have any others you feel are similar in features.</p>\n"},{"tags":["c#","sql-server-2008","unit-testing","teamcity","business-intelligence"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":244,"score":0,"question_id":10519736,"title":"Unit test (connect to Analysis Services) fails on TeamCity - but not on VS 2010 on the same machine","body":"<p>I've written some code that runs an MDX query against an SQL Server Analysis services. Unit tests on my dev machine work fine - however the TeamCity installation also runs the unit tests and only the ones connecting to the analysis services give an exception stating:</p>\n\n<pre><code>Test method GetNumCompaniesPerIndustryTest threw exception: \nMicrosoft.AnalysisServices.AdomdClient.AdomdConnectionException: The connection either timed out or was lost. \n---&gt; System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. \n---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host\n</code></pre>\n\n<p>This is the error I was getting before when my connection string wasn't right. The weird thing is that the server with TeamCity also has a VS 2010 installation so I can open the solution form the /buildAgent/work folder and run the unit tests. All tests work fine from VS - so there's no connection problem it seems.\nConnection string is in a settings file inside the DLL in application scope.</p>\n"},{"tags":["java","eclipse","unit-testing","junit"],"answer_count":4,"favorite_count":7,"up_vote_count":17,"down_vote_count":0,"view_count":313,"score":17,"question_id":12513184,"title":"Solid Java unit test automation? (JUnit/Hamcrest/...)","body":"<h2>Intent</h2>\n\n<p>I am looking for the following:</p>\n\n<ul>\n<li>A solid unit testing methodology\n<ol>\n<li>What am I missing from my approach?</li>\n<li><strong>What am I doing wrong</strong>?</li>\n<li><em>What am I doing which is unnecessary?</em></li>\n</ol></li>\n<li>A way to get as much as possible done automatically</li>\n</ul>\n\n<h2>Current environment</h2>\n\n<ul>\n<li><strong><a href=\"http://eclipse.org/\">Eclipse</a></strong> as IDE</li>\n<li><strong><a href=\"http://www.junit.org/\">JUnit</a></strong> as a testing framework, integrated into Eclipse</li>\n<li><strong><a href=\"http://code.google.com/p/hamcrest/\">Hamcrest</a></strong> as a \"matchers\" library, for better assertion readability</li>\n<li><strong><a href=\"http://code.google.com/p/guava-libraries/\">Google Guava</a></strong> for precondition validation</li>\n</ul>\n\n<h2>Current approach</h2>\n\n<h3>Structure</h3>\n\n<ul>\n<li>One test class per class to test</li>\n<li>Method testing grouped in static nested classes</li>\n<li>Test method naming to specify behaviour tested + expected result</li>\n<li>Expected exceptions specified by Java <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html\">Annotation</a></strong>, not in method name</li>\n</ul>\n\n<h3>Methodology</h3>\n\n<ul>\n<li>Watch out for <code>null</code> values</li>\n<li>Watch out for empty <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html\">List&lt;E&gt;</a></strong></li>\n<li>Watch out for empty <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html\">String</a></strong></li>\n<li>Watch out for empty arrays</li>\n<li>Watch out for object state invariants altered by code (post-conditions)</li>\n<li>Methods accept documented parameter types</li>\n<li>Boundary checks (e.g. <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE\">Integer.MAX_VALUE</a></strong>, etc...)</li>\n<li>Documenting immutability through specific types (e.g. <strong>Google Guava <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html\">ImmutableList&lt;E&gt;</a></strong>)</li>\n<li><em>... is there a list for this? Examples of nice-to-have testing lists:</em>\n<ul>\n<li>Things to check in database projects (e.g. CRUD, connectivity, logging, ...)</li>\n<li>Things to check in multithreaded code</li>\n<li>Things to check for EJBs</li>\n<li>... ?</li>\n</ul></li>\n</ul>\n\n<h2>Sample code</h2>\n\n<p><em>This is a contrived example to show some techniques.</em></p>\n\n<hr>\n\n<h3>MyPath.java</h3>\n\n<pre><code>import static com.google.common.base.Preconditions.checkArgument;\nimport static com.google.common.base.Preconditions.checkNotNull;\nimport java.util.Arrays;\nimport com.google.common.collect.ImmutableList;\npublic class MyPath {\n  public static final MyPath ROOT = MyPath.ofComponents(\"ROOT\");\n  public static final String SEPARATOR = \"/\";\n  public static MyPath ofComponents(String... components) {\n    checkNotNull(components);\n    checkArgument(components.length &gt; 0);\n    checkArgument(!Arrays.asList(components).contains(\"\"));\n    return new MyPath(components);\n  }\n  private final ImmutableList&lt;String&gt; components;\n  private MyPath(String[] components) {\n    this.components = ImmutableList.copyOf(components);\n  }\n  public ImmutableList&lt;String&gt; getComponents() {\n    return components;\n  }\n  @Override\n  public String toString() {\n    StringBuilder stringBuilder = new StringBuilder();\n    for (String pathComponent : components) {\n      stringBuilder.append(\"/\" + pathComponent);\n    }\n    return stringBuilder.toString();\n  }\n}\n</code></pre>\n\n<hr>\n\n<h3>MyPathTests.java</h3>\n\n<pre><code>import static org.hamcrest.Matchers.is;\nimport static org.hamcrest.collection.IsCollectionWithSize.hasSize;\nimport static org.hamcrest.collection.IsEmptyCollection.empty;\nimport static org.hamcrest.collection.IsIterableContainingInOrder.contains;\nimport static org.hamcrest.core.IsEqual.equalTo;\nimport static org.hamcrest.core.IsNot.not;\nimport static org.hamcrest.core.IsNull.notNullValue;\nimport static org.junit.Assert.assertThat;\nimport org.junit.Test;\nimport org.junit.experimental.runners.Enclosed;\nimport org.junit.runner.RunWith;\nimport com.google.common.base.Joiner;\n@RunWith(Enclosed.class)\npublic class MyPathTests {\n  public static class GetComponents {\n    @Test\n    public void componentsCorrespondToFactoryArguments() {\n      String[] components = { \"Test1\", \"Test2\", \"Test3\" };\n      MyPath myPath = MyPath.ofComponents(components);\n      assertThat(myPath.getComponents(), contains(components));\n    }\n  }\n  public static class OfComponents {\n    @Test\n    public void acceptsArrayOfComponents() {\n      MyPath.ofComponents(\"Test1\", \"Test2\", \"Test3\");\n    }\n    @Test\n    public void acceptsSingleComponent() {\n      MyPath.ofComponents(\"Test1\");\n    }\n    @Test(expected = IllegalArgumentException.class)\n    public void emptyStringVarArgsThrows() {\n      MyPath.ofComponents(new String[] { });\n    }\n    @Test(expected = NullPointerException.class)\n    public void nullStringVarArgsThrows() {\n      MyPath.ofComponents((String[]) null);\n    }\n    @Test(expected = IllegalArgumentException.class)\n    public void rejectsInterspersedEmptyComponents() {\n      MyPath.ofComponents(\"Test1\", \"\", \"Test2\");\n    }\n    @Test(expected = IllegalArgumentException.class)\n    public void rejectsSingleEmptyComponent() {\n      MyPath.ofComponents(\"\");\n    }\n    @Test\n    public void returnsNotNullValue() {\n      assertThat(MyPath.ofComponents(\"Test\"), is(notNullValue()));\n    }\n  }\n  public static class Root {\n    @Test\n    public void hasComponents() {\n      assertThat(MyPath.ROOT.getComponents(), is(not(empty())));\n    }\n    @Test\n    public void hasExactlyOneComponent() {\n      assertThat(MyPath.ROOT.getComponents(), hasSize(1));\n    }\n    @Test\n    public void hasExactlyOneInboxComponent() {\n      assertThat(MyPath.ROOT.getComponents(), contains(\"ROOT\"));\n    }\n    @Test\n    public void isNotNull() {\n      assertThat(MyPath.ROOT, is(notNullValue()));\n    }\n    @Test\n    public void toStringIsSlashSeparatedAbsolutePathToInbox() {\n      assertThat(MyPath.ROOT.toString(), is(equalTo(\"/ROOT\")));\n    }\n  }\n  public static class ToString {\n    @Test\n    public void toStringIsSlashSeparatedPathOfComponents() {\n      String[] components = { \"Test1\", \"Test2\", \"Test3\" };\n      String expectedPath =\n          MyPath.SEPARATOR + Joiner.on(MyPath.SEPARATOR).join(components);\n      assertThat(MyPath.ofComponents(components).toString(),\n          is(equalTo(expectedPath)));\n    }\n  }\n  @Test\n  public void testPathCreationFromComponents() {\n    String[] pathComponentArguments = new String[] { \"One\", \"Two\", \"Three\" };\n    MyPath myPath = MyPath.ofComponents(pathComponentArguments);\n    assertThat(myPath.getComponents(), contains(pathComponentArguments));\n  }\n}\n</code></pre>\n\n<hr>\n\n<h2>Question, phrased explicitly</h2>\n\n<ul>\n<li><p>Is there a list of techniques to use to build a unit test? Something much more advanced than my oversimplified list above (e.g. check nulls, check boundaries, check expected exceptions, etc.) perhaps available in a book to buy or a URL to visit?</p></li>\n<li><p>Once I have a method that takes a certain type of parameters, can I get any <strong><a href=\"http://eclipse.org/\">Eclipse</a></strong> plug-in to generate a stub for my tests for me? Perhaps using a Java <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Annotation.html\">Annotation</a></strong> to specify metadata about the method and having the tool materialise the associated checks for me? (e.g. @MustBeLowerCase, @ShouldBeOfSize(n=3), ...)</p></li>\n</ul>\n\n<p>I find it tedious and robot-like to have to remember all of these \"QA tricks\" and/or apply them, I find it error-prone to copy and paste and I find it not self-documenting when I code things as I do above. Admittedly, Hamcrest <a href=\"http://code.google.com/p/hamcrest/wiki/MatcherLibraries\">libraries</a> go in the general direction of specialising types of tests (e.g. on <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html\">String</a></strong> objects using RegEx, on <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/File.html\">File</a></strong> objects, etc) but obviously do not auto-generate any test stubs and do not reflect on the code and its properties and prepare a harness for me.</p>\n\n<p>Help me make this better, please.</p>\n\n<h2>PS</h2>\n\n<p><em>Do not tell me that I am just presenting code which is a silly wrapper around the concept of creating a Path from a list of path steps supplied in a static factory method please, this is a totally made-up example but it shows a \"few\" cases of argument validation... If I included a much longer example, who would really read this post?</em></p>\n"},{"tags":["c#","unit-testing","autofixture"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":92,"score":4,"question_id":12930963,"title":"Creating a struct with autofixture throws no public constructor error","body":"<p>I have a struct e.g.:</p>\n\n<pre><code>public struct Foo\n{\n    public int Bar;\n    public string Baz;\n}\n</code></pre>\n\n<p>and would like to create it in my unit tests using autofixture. I tried using the following:</p>\n\n<pre><code>IFixture fixture = new Fixture();\nvar f = fixture.CreateAnonymous&lt;Foo&gt;();\n</code></pre>\n\n<p>But this throws an <code>AutoFixture was unable to create an instance</code> error. Is it possible to auto create a struct with autofixture? How could this be done? Please note, that I am working on legacy code and thus need to deal with structs. :)</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Changed </p>\n\n<pre><code>IFixture fixture = new Fixture().Customize(new AutoMoqCustomization());\n</code></pre>\n\n<p>To</p>\n\n<pre><code>IFixture fixture = new Fixture();\n</code></pre>\n\n<p>Since it wasn't relevant for the question.</p>\n"},{"tags":["hibernate","unit-testing","transactions","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12916014,"title":"Test DAO in java using Junit4 and Hibernate","body":"<p>Testing DAO'm using junit and mainly what I do is start a transaction in hibernate, call the compare function, and then roll back the transaccion.El problem is that if I'm Testing function is a transaction error I can not strip nest, I thought about the idea of ​​implementing DBUnit xml but management does not seem a good idea and less in this instance that I did enough test cases with this method.\nAnyone have any idea how to fix it without having to use anything other than Junit or hibernate?</p>\n\n<p>This is a example</p>\n\n<pre><code>@Test\npublic void Test1GetByCodigo(){\n    String cod = \"999999999\";\n    DBTenant dbTenant = null; \n    Session sess = null;\n    Transaction trans = null;\n    ClienteBO cli = null;\n    Clientes clie = null;\n    try{\n        try{\n            dbTenant = new DBTenant();\n            sess = dbTenant.getTenantSession();\n            trans = sess.beginTransaction();\n        }\n        catch(Exception e){\n            fail(\"Error en la carga de la transaccion.Quedo alguna transaccion abierta?\");\n        }   \n        clie  = CargaCliente(cod);\n        sess.save(clie);\n        cli = cliBL.getByCodigo(cod);\n    }\n    catch(Exception e){\n        trans.rollback();\n        dbTenant.closeSession();\n        fail(\"Error la carga del cliente.Se modifico la bse de datos Clientes??\");\n    }\n    trans.rollback();\n    sess.clear();\n    dbTenant.closeSession();\n    ClienteBO clieEsp = CargaClienteBO(clie);\n    assertNotNull(clieEsp);\n    assertNotNull(cli);\n    assertEquals(\"Error el cliente no coincide\",clieEsp,cli);\n}\n</code></pre>\n\n<p>if cliBL.getbycodigo function () tubiera a transaction would have a bug, thank you for your help thanks</p>\n"},{"tags":["objective-c","ios","unit-testing","testing","software-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":43,"score":-1,"question_id":12949905,"title":"Test Case Generation Tools for Objective-C","body":"<p>I am looking for a tool that can generate test cases automatically for Objective-C. I know some existing tools like <a href=\"http://www.agitar.com/solutions/products/automated_junit_generation.html\" rel=\"nofollow\">AgitarOne</a>\n for Java and <a href=\"http://research.microsoft.com/en-us/projects/pex/\" rel=\"nofollow\">Pex</a> for .NET, but none of these tools work for objective-c. </p>\n\n<p>Is there any similar tools for Objective-C?</p>\n"},{"tags":["android","multithreading","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12945376,"title":"Android Unit testing - Have a test wait on a response","body":"<p>So I've got an Android library that I need to do unit testing on. You pass the library some handlers, and I need to unit test based on the messages sent to those handlers from the library.</p>\n\n<p>The problem is, I don't know how to tell a test to wait until I get a response back. I have a timer checking the response every 10 seconds in my test method and if it sees a response is does an assert, but the test method schedules the timer task and then finishes as successful instead of waiting for an assert in the timer task.</p>\n\n<p>Is there a way to have the test explicitly wait until it runs into an assert before finishing? Or some other way of accomplishing this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","phantomjs","casperjs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":125,"score":1,"question_id":12920828,"title":"Using jquery with casperJs test","body":"<p>I have a web application which is not relying on jquery.</p>\n\n<p>I am doing functional tests thanks to (the great :) ) casperjs.</p>\n\n<p>Now I would like to use jquery in my tests. So I tried to inject it as indicated here <a href=\"http://casperjs.org/faq.html#faq-jquery\" rel=\"nofollow\">http://casperjs.org/faq.html#faq-jquery</a>. Well, it's not working.</p>\n\n<p>Here is my code if you can help me - is there something wrong? :</p>\n\n<pre><code>casper.start('http://localhost:8080/xxxxxx/xxxxxDialogTests.html');\n\ncasper.echo(\"page = \" + casper.page); // -&gt; it works, the page is there \ncasper.page.injectJs(\"../tools/jquery-1.7.2.js\");\n\ncasper.waitFor(function check()\n{\n   return this.visible('#button_create');\n},\nfunction then()\n{\n   this.click('#button_create');\n   casper.waitFor(function check()\n   {\n        return this.visible('#dialog_document_name');\n   },\n   function then()\n   {\n           console.log(\"element : \", this.evaluate(function ()\n           {\n               var el = $(\"input#dialog_document_name\");\n\n               return el;\n           }));  \n   });\n});\n</code></pre>\n\n<p>I removed the test as it is not the point...</p>\n\n<p>thanks!</p>\n"},{"tags":["c#","unit-testing","mstest","moles"],"answer_count":6,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":3752,"score":3,"question_id":4105604,"title":"How To Read UnitTest Project's App.Config From Test With HostType(\"Moles\")","body":"<p>I have the folowing tests:</p>\n\n<pre><code>[TestClass]\npublic class GeneralTest\n{\n    [TestMethod]\n    public void VerifyAppDomainHasConfigurationSettings()\n    {\n        string value = ConfigurationManager.AppSettings[\"TestValue\"];\n        Assert.IsFalse(String.IsNullOrEmpty(value), \"No App.Config found.\");\n    }\n\n    [TestMethod]\n    [HostType(\"Moles\")]\n    public void VerifyAppDomainHasConfigurationSettingsMoles()\n    {\n        string value = ConfigurationManager.AppSettings[\"TestValue\"];\n        Assert.IsFalse(String.IsNullOrEmpty(value), \"No App.Config found.\");\n    }\n}\n</code></pre>\n\n<p>The only difference between them is <code>[HostType(\"Moles\")]</code>. But the first passes and the second fails. How can I read App.config from the second test?</p>\n\n<p>Or may be I can add some another config file in other place?</p>\n"},{"tags":["eclipse","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12933565,"title":"JUnit Fork-Mode in Java Classes","body":"<p>There's support for <code>forkMode</code> in Ant and Maven and occasionally we use it with value <code>perTest</code>. However, the JUnit-tests in Eclipse still fail when we run the tests on a class or on a project (Run As -> JUnit Test). Obviously JUnit uses default settings or behaviour and executes the tests in parallel causing some red crosses in the JUnit-view.</p>\n\n<ol>\n<li>Is there a way to code something into the test-class that lets JUnit behave like the <code>forkMode</code> setting? We don't mind if there's an Eclipse-only solution for this.</li>\n<li>Or can this be done with a Run Configuration in Eclipse?</li>\n</ol>\n\n<p>EDIT:<br>\nI understand that the problems are based on data remaining after tests and further tests will fail due to that. While this makes sense, please understand that this doesn't answer my question. Think of my situation as being part of some sort of a Tiger Team. We have a bunch of issues and fixing that part of existing tests is just one of them. Trust me, we will try to cover everything... (<em>I haven't heard that in a while</em>)</p>\n"},{"tags":["java","unit-testing","mocking","abstract-class","mockito"],"answer_count":7,"favorite_count":12,"up_vote_count":24,"down_vote_count":0,"view_count":11602,"score":24,"question_id":1087339,"title":"Using Mockito to test abstract classes","body":"<p>I'd like to test an abstract class. Sure, I can <a href=\"http://stackoverflow.com/questions/243274/best-practice-unit-testing-abstract-classes\">manually write a mock</a> that inherits from the class.</p>\n\n<p>Can I do this using a mocking framework (I'm using Mockito) instead of hand-crafting my mock? How?</p>\n"},{"tags":["unit-testing","node.js","rest","mongoose","expressjs"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":150,"score":1,"question_id":12245624,"title":"How to unit test a NodeJs REST API server built using Express + Mongoose?","body":"<p>I have a REST API server that uses Express, Mongoose and <a href=\"https://github.com/lorenwest/node-config\" rel=\"nofollow\">config</a>. I want to unit test my API. Basically, bring up a temporary web server on port x, an empty mongo-database on port y, do some API calls (both gets and puts) and validate what I get back and then shutdown temporary server and drop test database once my tests finish. What is the best way to do this? I have been looking at <a href=\"http://visionmedia.github.com/mocha/\" rel=\"nofollow\">mocha</a>/<a href=\"http://jhnns.github.com/rewire/\" rel=\"nofollow\">rewire</a> but not sure how to set up temporary server and db and not sure what the best practices are.</p>\n"},{"tags":["unit-testing","appharbor","xunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12930045,"title":"How does AppHarbor select what to unit-test?","body":"<p>I have just created a small project with AppHarbor, composed of a single .csproj that uses xUnit. It's using NuGet to recover the xUnit framework. AppHarbor recognized it was a test project and executed the tests that were present.</p>\n\n<p>I want to know how AppHarbor select which projects to unit test. Does it look at the referenced assemblies of the dll/exe (perhaps through reflection)? (for example if the dll/exe references xunit.dll then it's probably a test project). Does it look at the .csproj file looking for the references? Does it run all the assemblies through all the runners?</p>\n"},{"tags":["unit-testing","jasmine","snapshot","phantomjs"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":308,"score":4,"question_id":10522773,"title":"Taking snapshots of the webpage while unit testing using phantomjs and jasmine","body":"<p>I can't seem to get communication of jasmine and phantomjs working.  I'm using the run-jasmine.js file in the examples folder for phantomjs.  The problem I get is that the file can't find system so it can't require it.</p>\n\n<p>This is the specific message:</p>\n\n<pre><code>undefined:0 Unknown module system for require()\n</code></pre>\n\n<p>On top of that, I was wondering how to get dom manipulation of the html file working with jasmine.</p>\n\n<p>EDIT: It looks like the DOM issue was simple since it's just using phantom js's headless browser functionality.  I still have the system problem, and I'm wondering how to call render page in between each test rather than when the page is done loading.</p>\n"},{"tags":["android","sqlite","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12943230,"title":"Testing a SQLite database on Android","body":"<p>I am working on JUnit tests for my Android app which uses a SQLite database. I need to create  a test database which can be manipulated by test cases. The database needs to start in a known configuration and reset for each test case. I figured out that I can use an in-memory database by passing the SQLiteOpenHelper a <code>null</code> value as the file name for the database (<a href=\"http://attakornw.wordpress.com/2012/02/25/using-in-memory-sqlite-database-in-android-tests/\" rel=\"nofollow\">see this article for details</a>). Now I also want to populate the database table for some of my tests. I have a CSV file on my local file system with some data that I can use for testing. How do I get this data into my SQLite database on an emulator or other device for testing?</p>\n"},{"tags":["unit-testing","selenium","ui-testing"],"answer_count":5,"favorite_count":16,"up_vote_count":14,"down_vote_count":0,"view_count":2857,"score":14,"question_id":99876,"title":"Selenium Critique","body":"<p>I just wanted some opinions from people that have run Selenium (<a href=\"http://selenium.openqa.org\" rel=\"nofollow\">http://selenium.openqa.org</a>) I have had a lot of experience with WaTiN and even wrote a recording suite for it. I had it producing some well structured code but being only maintained by me it seems my company all but abandoned it. If you have run selenium have you had a lot of success? I will being using .NET 3.5, does Selenium work well with it? Is the code produced clean or simply a list of all the interaction? (<a href=\"http://blogs.conchango.com/richardgriffin/archive/2006/11/14/Testing-Design-Pattern-for-using-WATiR_2F00_N.aspx\" rel=\"nofollow\">http://blogs.conchango.com/richardgriffin/archive/2006/11/14/Testing-Design-Pattern-for-using-WATiR_2F00_N.aspx</a>) How well does the distributed testing suite fair?</p>\n\n<p>Any other gripes or compliments on the system would be greatly appreciated!</p>\n"},{"tags":["android","eclipse","unit-testing","ant"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12905452,"title":"Running unit tests with ant on an eclipse project","body":"<p>Alright, so I've spent a good 3 days now combing the net trying to figure out how to run some unit tests with ant from the command line for my eclipse project.</p>\n\n<p>I can run the tests in Eclipse via \"Run As\" -> \"Android JUnit Test\"</p>\n\n<p>What I want now is to be able to run the tests via the command line. That's it.</p>\n\n<p>I can't seem to find any guides on this that were not written in 2010, but trying to follow them nonetheless I have gotten as far as installing ant and creating a build.xml file inside my project that I copy-pasta'd from a guide. Since I can only guess at what is going on in the build file (have never worked with ant before), when a problem rears its ugly head I'm pretty much SOL.</p>\n\n<p>Currently when I try and run it, it says \"package android.app does not exist\" (I'm using the Activity class), and the same for a library jar file I've included in the project's \"/libs\" folder.</p>\n\n<p>It seems pretty clear that somewhere I'm missing some kind of path declaration, but nothing I try seems to work.</p>\n\n<p>EDIT (added code):\nThis is MockTester.java -</p>\n\n<pre><code>package com.android.mocksdktester;\n\nimport static org.junit.Assert.*;\nimport android.app.Activity;    \nimport android.test.AndroidTestCase;\n\nimport com.mock.android.lib.*;\n\npublic class MockTester extends AndroidTestCase\n{\n    Activity mActivity;\n    MockFeature mFeature;\n\n    public MockTester()\n    {   \n    }\n\n\n    public void testExists()\n    {\n        String test = null;\n        assertNull(test);\n    }\n}\n</code></pre>\n\n<p>As you can see, not a lot going on. \nThis is the build.xml file I've got, and as I mentioned, I can only make guesses as to what it's doing.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!-- to save as \"build.xml\" --&gt;\n&lt;project name=\"Mock Unit Tests\" default=\"run\" basedir=\".\"&gt;\n    &lt;path id=\"junit_classpath\"&gt; \n        &lt;pathelement location=\"C:\\eclipse\\plugins\\org.junit_4.8.2.v4_8_2_v20110321-1705\\junit.jar\"/&gt;\n    &lt;/path&gt;\n\n    &lt;!-- Library Project Here --&gt;\n    &lt;fileset dir=\"libs\" includes=\"*.jar\"/&gt;\n\n\n    &lt;!-- build all classes in this directory --&gt;\n    &lt;!-- To run this: use \"ant build\" --&gt;\n    &lt;!-- need to include junit.jar in the classpath --&gt;\n    &lt;target name=\"build\"&gt;   \n        &lt;javac srcdir=\"${basedir}\"/&gt;\n        &lt;echo message=\"Build done\" /&gt;\n    &lt;/target&gt;\n\n    &lt;!-- Test and build all files  --&gt;\n    &lt;!-- To run this: use \"ant\" (default) or \"ant run\" --&gt;\n    &lt;target name=\"run\" depends=\"build\"&gt;\n        &lt;java taskname=\"Test\" classname=\"MockTester\" fork=\"true\" failonerror=\"true\" /&gt;\n        &lt;echo message=\"Unit Tests done\" /&gt;\n    &lt;/target&gt;\n\n    &lt;!-- delete all class files --&gt;\n    &lt;!-- To run this: use \"ant clean\" --&gt;\n    &lt;target name=\"clean\"&gt;\n        &lt;delete&gt;\n            &lt;fileset dir=\"${basedir}\" includes=\"*.class\" /&gt;\n        &lt;/delete&gt;\n        &lt;echo message=\"clean done\" /&gt;\n    &lt;/target&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>It was complaining about not seeing junit in the past but I managed to fix that. I'm just not sure what to do when it's missing Android-related classes, and a jar file included in the project (though I've read this is a bug).</p>\n\n<p>Errors:</p>\n\n<pre><code>build:\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\build.xml:16: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds\n[javac] Compiling 3 source files\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:14:error: package android.app does not exist\n[javac] import android.app.Activity;\n[javac]                   ^\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:15:error: package android.test does not exist\n[javac] import android.test.AndroidTestCase;\n[javac]                    ^\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:18:error: package com.mock.android.lib does not exist\n[javac] import com.mock.android.lib.*;\n[javac] ^\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:20:error: cannot find symbol\n[javac] public class MockTester extends AndroidTestCase\n[javac]                                  ^\n[javac]   symbol: class AndroidTestCase\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:22:error: cannot find symbol\n[javac]     Activity mActivity;\n[javac]     ^\n[javac]   symbol:   class Activity\n[javac]   location: class MockTester\n[javac] C:\\&lt;my workspace&gt;\\mock\\mock_sdk_android\\trunk\\source\\MockSDKTest\\src\\com\\android\\mocksdktester\\MockTester.java:23:error: cannot find symbol\n[javac]     MockFeature mFeature;\n[javac]     ^\n[javac]   symbol:   class MockFeature\n[javac]   location: class MockTester\n[javac] 6 errors\n\nBUILD FAILED\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","gwt","testing","maven"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12826026,"title":"In a multi-module GWT application with one entry point, is there a way to run GWT tests from sub modules only in the entry point GWT module?","body":"<p>As an additional note, we manage our project builds with Maven.</p>\n\n<p>Let's say we have three GWT modules, only one of which has an entry point. The other two modules are inherited by the module containing the entry point. </p>\n\n<p>We practice MVP and strive to keep the majority of our testing as normal JUnit tests, but some integration tests require us to use GWTTest. We keep these to a minimum.</p>\n\n<p>We would like to keep the actual tests with the modules containing the code they are testing. My thought was to ensure that maven only executes JUnit tests for the sub-module builds. The GWTTests in the submodules would be rolled up into a test suite. Then, the entry point project would contain a GWTTestSuite which rolls up the submodule test suites along with and other GWTTests that the entry point module may have.</p>\n\n<p>At this point, my problem is that the entry point GWTTestSuite can't resolve the tests from the submodules (<code>\"no source code is available........did you forget to inherit a required module\"</code>). I've tried creating the test-jars for the submodules and adding them as dependencies to the test scope, but when GWT is executing the primary GWTTestSuite, it can't find the submodule test suites (or their underlying gwt tests). I can see the GWTTests in the .m2 repo test jars.</p>\n\n<p>So, how do I get the GWT compiler to \"see\" the submodule tests?</p>\n\n<p>Update:\nI have not yet been able to figure out how to do this. The cleanest thing I can manage is to keep the normal JUnit tests co-located with the submodules, but keep all GWT Tests for all modules in the main module.</p>\n"},{"tags":["unit-testing","signals","ironpython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12922336,"title":"IronPython.Modules.PythonSignal Throwing Exception when importing unittest module","body":"<p>Interesting case here:  I'm using IronPython 2.7.3 on my home machine and at work.  Import unittest works fine at home but not at work:</p>\n\n<p><img src=\"http://i.stack.imgur.com/qUJPf.png\" alt=\"Iron Python error\"></p>\n\n<p>Any idea what's going on?  The odd thing is the fact I un-installed Iron Python, re-installed, and I was able to import unittest for an hour with no problems.  I stepped out for a bit and tried to run additional tests but it is broken again.  Any idea what could be the cause?</p>\n\n<p>Edit:  Followed Jeff's suggestion and the base exceptions are:\n<img src=\"http://i.stack.imgur.com/XtuE8.png\" alt=\"enter image description here\"></p>\n"},{"tags":["unit-testing","typescript"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":993,"score":1,"question_id":12695934,"title":"Unittesting in TypeScript","body":"<p>I know, TypeScript is one day old. But I`m curious if is here somekind unit test framework or way how to write and run unit tests for TypeScript?</p>\n\n<p>TypeScript can be compiled to JavaScript and I can write test for that JavaScript, but it`s not what I want.</p>\n"},{"tags":[".net","unit-testing","web-api","url-parameters","controller-action"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12918328,"title":"Unit Testing Action Parameters in the WebAPI","body":"<p>I'm writing some unit tests for WebAPI controllers, and one of the aspects that I want to assert is that the parameters match.</p>\n\n<p>I've followed the method used in <a href=\"http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/\" rel=\"nofollow\">Filip Wojcieszyn's blog</a>, which is working fine, but I'm now looking to extend its assertions.</p>\n\n<p>I have three actions on a controller (all three of which have been verified through actual use):</p>\n\n<pre><code>[HttpGet]\npublic IEnumerable&lt;Task&gt; Get()\n\n[HttpGet]\npublic IEnumerable&lt;Task&gt; Get(string elementType)\n\n[HttpGet]\npublic Task Get(long id)\n</code></pre>\n\n<p>And I have the following code</p>\n\n<pre><code>var actionSelector = new ApiControllerActionSelector();\nvar descriptor = actionSelector.SelectAction(_controllerContext);\nreturn descriptor.GetParameters();\n</code></pre>\n\n<p>The problem is that when I call descriptor.GetParameters() on the parameterless route it returns a collection containing 1 parameter - the \"long id\" param.</p>\n\n<p>Can anyone explain why it returns only this and neither of the other two overloads, and if it's possible to obtain the overload possibilities?</p>\n"},{"tags":["unit-testing","testing","language-agnostic"],"answer_count":20,"favorite_count":11,"up_vote_count":45,"down_vote_count":0,"view_count":6998,"score":45,"question_id":105007,"title":"Should I test private methods or only public ones?","body":"<p>I have read <a href=\"http://stackoverflow.com/questions/34571/whats-the-best-way-of-unit-testing-private-methods\">this post</a> about how to test private methods. I usually do not test them, because I always thought it's faster to test only public methods that will be called from outside the object. Do you test private methods? Should I always test them?</p>\n"},{"tags":["c#","asp.net-mvc-3","visual-studio-2010","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12910232,"title":"Finding difficulty in unit testing a Controller Action method using NUnit","body":"<p>I want to Unit test the method ExecLogin() using NUnit testing framework. But I'm having problem while writing code for the testing because the GenerateInput() method is declared as internal virtual. So, I'm not being able pass the SessionUserId parameter to it which I think is needed. Please guide me how to write the unit test code for ExecLogin(). I'm new to testing.</p>\n\n<p>This is related to ASP.NET MVC3 testing controller actions.</p>\n\n<pre><code>    public class BaseController : Controller\n    {\n        public string SessionUserId\n        {\n            get { return Session[\"UserId\"] as string; }\n            set { Session[\"UserId\"] = value; }\n        }\n\n        internal virtual SomeType GenerateInput(SomeType inputData)\n        {\n             var finalInput = new StringBuilder(600);\n\n             finalInput.Append(\"&lt;Root&gt;\")\n             .Append(\"&lt;UserId&gt;\")\n             .Append(SessionUserId)\n             .Append(\"&lt;/UserId&gt;\")\n             .Append(\"&lt;IPAddress&gt;\")\n             .Append(this.GetClientIpAddress())\n             .Append(\"&lt;/IPAddress&gt;\")\n             .Append(inputData.InputValue)\n             .Append(\"&lt;/Root&gt;\");\n\n             inputData.InputValue = finalInput.ToString();\n             return inputData;\n        }\n    }\n\n    public class LoginController : BaseController\n    {\n        [HttpPost]\n        public JsonResult ExecLogin(JsonRequest&lt;LoginModel&gt; request)\n        {\n            var loginObj = request.InputObject;\n\n            var login = new StringBuilder(300);\n            login.Append(\"&lt;UserName&gt;\").Append(loginObj.UserName).Append(\"&lt;/UserName&gt;\")\n                .Append(\"&lt;Password&gt;\").Append(EncodingHelper.GetHashedPassword(loginObj.Password)).Append(\"&lt;/Password&gt;\")\n                .Append(\"&lt;RememberMe&gt;\").Append(loginObj.RememberMe).Append(\"&lt;/RememberMe&gt;\")\n                ;\n        var input = new SomeType { Operation = request.Operation, PageName = ActionName, InputValue = login.ToString() };\n\n        var returnValue = SomeDelegate.Instance.ExecuteOperation(GenerateInput(input));\n        return Json(new JsonResponse&lt;string&gt; { Status = returnValue.Status, Result = this.PopulateSession(returnValue) });\n        }\n    }\n</code></pre>\n\n<p>This is our model classes:</p>\n\n<pre><code>   public class LoginModel\n   {\n       public string UserId { get; set; }\n       public string UserName { get; set; }\n       public string Password { get; set; }\n       public bool RememberMe { get; set; }\n       public bool IsValidUser { get; set; }\n   }\n\n   public class JsonRequest&lt;T&gt;\n   where T : class\n   {\n       public string Operation { get; set; }\n       public T InputObject { get; set; }\n   }\n</code></pre>\n\n<p>While learning Dependency Injection pattern I came to know that use of concrete classes makes code more tightly coupled. And the more tightly coupled the code the harder it becomes to test. Is this why I'm not being able to test it properly? Please help.</p>\n"},{"tags":["python","unit-testing","exception-handling","warnings"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":338,"score":5,"question_id":3892218,"title":"How to test with Python's unittest that a warning has been thrown?","body":"<p>I have a following function in Python and I want to test with unittest that if the function gets 0 as argument, it throws a warning. I already tried assertRaises, but since I don't raise the warning, that doesn't work. </p>\n\n<pre><code>   def isZero( i):\n       if i != 0:\n         print \"OK\"\n       else:\n         warning = Warning( \"the input is 0!\") \n         print warning\n       return i\n</code></pre>\n\n<p>Thank you, Tomas</p>\n"},{"tags":["android","unit-testing","broadcastreceiver","intentservice","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":181,"score":3,"question_id":11677320,"title":"Robolectric and IntentServices","body":"<p>Using Robolectric, how would one go about testing an IntentService that broadcasts intents as a response?</p>\n\n<p>Assuming the following class:</p>\n\n<pre><code>class MyService extends IntentService {\n    @Override\n    protected void onHandleIntent(Intent intent) {\n        LocalBroadcastManager.getInstance(this).sendBroadcast(new Intent(\"action\"));\n    }\n}\n</code></pre>\n\n<p>In my test case, I'm attempting to do something like this:</p>\n\n<pre><code>@RunWith(RobolectricTestRunner.class)\npublic class MyServiceTest{\n    @Test\n    public void testPurchaseHappyPath() throws Exception {\n\n        Context context = new Activity();\n\n        // register broadcast receiver\n        BroadcastReceiver br = new BroadcastReceiver() {\n\n            @Override\n            public void onReceive(Context context, Intent intent) {\n                // test logic to ensure that this is called\n            }\n\n        };\n        context.registerReceiver(br, new IntentFilter(\"action\"));\n\n        // This doesn't work\n        context.startService(new Intent(context, MyService.class));\n\n    }\n\n}\n</code></pre>\n\n<p>MyService is never started using this approach. I'm relatively new to Robolectric, so I'm probably missing something obvious. Is there some sort of binding I have to do before calling startService? I've verified that broadcasting works by just calling sendBroadcast on the context. Any ideas?</p>\n"},{"tags":["unit-testing","grails","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12931018,"title":"Grails: Returning a mocked object from a mocked service","body":"<p>I have a problem trying to unit test a service in Grails (1.3.6).</p>\n\n<p>The service has an instance of another service which it uses to create an object.  I am trying to mock the creator service and also the object that it returns.</p>\n\n<p>In the test class:</p>\n\n<pre><code>mockMyService = new MyService() // service under test\n\n// Fake Asset object to 'create'\nasset = mockFor(Asset)\nasset.createMock()\n\n// Mock the CreatorService and return the mocked asset\nmockCreatorService = mockFor(CreatorService)\nmockCreatorService.demand.generateAsset(){Section s, Date d, User u, AssetStatus a, String name -&gt; return asset}\n\nmockMyService = new MyService()\nmockMyService.assetService = mockCreatorService.createMock()\n</code></pre>\n\n<p>From debugging and inspecting I'm fairly sure that the mock object is created ok and the service is mocked correctly and faking the generateAsset call.</p>\n\n<p>In MyService, the call to the other (creator) service is:</p>\n\n<pre><code>Asset asset = creatorService.generateAsset(section, date, author, status, assetName)\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<p>Cannot cast object 'grails.test.GrailsMock@56c88357' with class 'grails.test.GrailsMock' to class 'com.xxxxxx.Asset</p>\n\n<p>Which I think is due to the assigning of the mocked Asset in the call to generateAsset by MyService. </p>\n\n<p>Can anyone shed light on this?  If the reason is due to the assignment, is there a way around it?  Or am I approaching this wrongly or have I missed something obvious.</p>\n\n<p>It's grails 1.3.6 (the port to Grails 2 won't be complete for a while so stuck with this version this for a while).</p>\n\n<p>Thanks.</p>\n\n<p>Update:</p>\n\n<p>OK so I've got around the cast exception by declaring the mocked objects like:  </p>\n\n<pre><code>def testAssets = [\n new Asset(id:123, name:......)]\nmockDomain(Asset, testAssets)\n</code></pre>\n\n<p>But now it seems I have to declare <em>all</em> the non-null properties for the test Asset.  This doesn't seem right.  For testing, I don't care about the Asset at all, apart from the Id it has.</p>\n"},{"tags":["visual-studio","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":224,"score":3,"question_id":3654528,"title":"How to play sound after running unit tests in Visual Studio","body":"<p>When I am developing on my local machine, I want Visual Studio to play a happy sound when I run my unit tests and they pass and a sad sound when one fails and a <em>really</em> sad one when more than one fails. How do I do this?</p>\n\n<p>I assume that I need to write a macro, but I can't find any environment events that relate to unit tests. I am using Visual Studio 2010, but it would be nice to have a general solution for most or all versions of Visual Studio.</p>\n"},{"tags":["ruby","unit-testing","rspec","mocking","tdd"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":9217615,"title":"How to test subject with dependency?","body":"<p>I want to develop a card-base game in Ruby, and I want to do it in <strong>TDD</strong> way.</p>\n\n<p>The first class I want to write is <strong>Player</strong>.\nEach player has a <strong>hand</strong> with 13 cards and on his/her turn can choose and play 1 card to pass.</p>\n\n<p>I have not developed any other classes (like card, hand, ..), I want to know how I can test this subject which has dependency to other classes?</p>\n\n<p>I know about Mocks but I don't know how can I use them.</p>\n\n<p>For example in this scenario we know that when a player <strong>plays</strong> one card that card should have to be removed from his/her hand.</p>\n\n<p>This is my code :</p>\n\n<pre><code>require \"rspec\"\nrequire \"lib/player\"\n\ndescribe Player do\n  before(:each) do\n    hand=mock(\"Hand\")\n    hand.should_receive(:count).and_return(13)\n    subject.hand=hand\n  end\n\n  it \"should choose and play a card from her/his hand\" do\n      subject.hand.count.should==13\n      card_selected=subject.play(2)      # card #2 in his/her hand\n      subject.hand.count.should=12\n   end\nend\n</code></pre>\n\n<p>Also, in the implementation we are dependent to the Hand class, how can I handle it ?</p>\n"},{"tags":["java","unit-testing","tdd","mocking"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":8520207,"title":"Tests granularity when using mock object","body":"<p>I have Struts 1 action and want to test it in isolation.\nWhat this action do is as follows:</p>\n\n<ul>\n<li>load data using parameters from request</li>\n<li>build xml-based representation of this data</li>\n<li>send this response directly to client</li>\n</ul>\n\n<p>I use jMock for testing but have one doubt here.\nMy first test is</p>\n\n<pre><code>public void shouldActionInvocationPrintValidResponse() {\n    ProcessingAction action = new ProcessingAction();\n\n    DBService service = mock(DBService.class);\n    List records = new ArrayList();\n    when(service.loadData()).thenReturn(records);\n\n    ResponseBuilder builder = mock(ResponseBuilder.class);\n    when(builder.buildResponse(records)).thenReturn(\"fake response\");\n\n    action.execute(null, null, null, null);\n\n    assertEquals(\"fake response\", writer.getContentWritten());\n}\n</code></pre>\n\n<p>And my prod code evaluated to this:</p>\n\n<pre><code>public String execute(...) {\n    List recordsList = service.loadData();\n    String response = responseBuilder.buildResponse(recordsList);\n    response.getWriter().print(response);\n}\n</code></pre>\n\n<p>My doubt here is if such test isn't too big here. I check whole succesful flow here. Shouldn't there be separate tests for checking every single dependency call in their own tests?</p>\n\n<p>I wonder because I had troubles with this test's name. My ideas at the beginning were something like</p>\n\n<pre><code>shouldFetchDataThenFormatThemAndSendResponse\n</code></pre>\n\n<p>As this is all the tests does, the name shows it probably does too much (look at the \"and\" e.g. in the test name)</p>\n\n<p>And should I have whole test written at once, or just add dependencies calls step-by-step?</p>\n\n<p>EDIT: \nDetailed code for test and action provided.</p>\n"},{"tags":["unit-testing","tdd","mocking"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":373,"score":6,"question_id":1595952,"title":"How to write tests without so many mocks?","body":"<p>I am a heavy advocate of proper Test Driven Design or Behavior Driven Design and I love writing tests. However, I keep coding myself into a corner where I need to use 3-5 mocks in a particular test case for a single class. No matter which way I start, top down or bottom up I end up with a design that requires at least three collaborators from the highest level of abstraction. </p>\n\n<p>Can somebody give good advice on how to avoid this pitfall? </p>\n\n<p>Here's a typical scenario. I design a Widget that produces a Midget from a given text value. It always starts really simple until I get into the details. My Widget must interact with several hard to test things like file systems, databases, and the network. </p>\n\n<p>So, instead of designing all that into my Widget I make a Bridget collaborator. The Bridget takes care of one half of the complexity, the database and network, allowing me to focus on the other half which is multimedia presentation. So, then I make a Gidget that performs the multimedia piece. The entire thing needs to happen in the background, so now I include a Thridget to make that happen. When all is said and done I end up with a Widget that hands work to a Thridget which talks over a Bridget to give its result to a Gidget.</p>\n\n<p>Because I'm working in CocoaTouch and trying to avoid mock objects I use the self-shunt pattern where abstractions over collaborators become protocols that my test adopts. With 3+ collaborators my test balloons and become too complicated. Even using something like OCMock mock objects leaves me with an order of complexity that I'd rather avoid. I tried wrapping my brain around a daisy-chain of collaborators (A delegates to B who delegates to C and so on) but I can't envision it.</p>\n\n<p><em><strong>Edit</em></strong>\nTaking an example from below let's assume we have an object that must read/write from sockets and present the movie data returned.</p>\n\n<pre><code>//Assume myRequest is a String param...\nInputStream   aIn  = aSocket.getInputStram();\nOutputStream  aOut = aSocket.getOutputStram();\nDataProcessor aProcessor = ...;\n\n// This gets broken into a \"Network\" collaborator.\nfor(stuff in myRequest.charArray()) aOut.write(stuff);\nObject Data = aIn.read(); // Simplified read\n\n//This is our second collaborator\naProcessor.process(Data);\n</code></pre>\n\n<p>Now the above obviously deals with network latency so it has to be Threaded. This introduces a Thread abstraction to get us out of the practice of threaded unit tests. We now have</p>\n\n<pre><code>AsynchronousWorker myworker = getWorker(); //here's our third collaborator\nworker.doThisWork( new WorkRequest() {\n//Assume myRequest is a String param...\nDataProcessor aProcessor = ...;\n\n// Use our \"Network\" collaborator.\nNetworkHandler networkHandler = getNetworkHandler();\nObject Data = networkHandler.retrieveData(); // Simplified read\n\n//This is our multimedia collaborator\naProcessor.process(Data);\n})\n</code></pre>\n\n<p>Forgive me for working backwards w/o tests but I'm about to take my daughter outside and I'm rushing thru the example. The idea here is that I'm orchestrating the collaboration of several collaborators from behind a simple interface that will get tied to a UI button click event. So the outter-most test reflects a Sprint task that says given a \"Play Movie\" button, when it is clicked, the movie will play.\n<strong><em>Edit</em></strong>\nLets discuss.</p>\n"},{"tags":["c#","unit-testing","mocking","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12919969,"title":"Mocking up a list of Moqs that sits on a parent object","body":"<p>I'm doing some unit testing with Moq and I'd like to do the equivalent of:            </p>\n\n<pre><code>Location location = new Location();\nLocationTimes locationTimes = new LocationTimes();\nlocation.LocationTimes.Add(locationTimes);\n</code></pre>\n\n<p>So I tried this:</p>\n\n<pre><code>var mockLocation = new Mock&lt;Location&gt;();\nvar mockLocationTime = new Mock&lt;LocationTimes&gt;();\n\nmockLocationTime.SetupProperty(f =&gt; f.isEarlyHoursSupported, true);\nmockLocationTime.SetupProperty(f =&gt; f.isEarlyHoursSupportedManual, true);\n\nvar mockLocationTimeList = new List&lt;Mock&lt;LocationTimes&gt;&gt;();\nmockLocationTimeList.Add(mockLocationTime);\n\nthis.mockLocation1 = new Mock&lt;Location&gt;();\nmockLocation1.SetupProperty(f =&gt; f.LocationTimes, mockLocationTimeList);\n</code></pre>\n\n<p>...but I'm getting an error on the last line, as mockLocationTimeList is now a list of moqs.</p>\n\n<p>How am I supposed to be doing this?</p>\n"},{"tags":["c#","unit-testing","mocking","tdd","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12927118,"title":"mocking a method with an anonymous type argument","body":"<p>I have the following code:</p>\n\n<pre><code>var connector = new Mock&lt;IConector&gt;();\n\nconnector\n    .Setup(cn =&gt; cn.listar(\"FetchEstandar\", new Estandar(), new {Id = 1}))\n    .Returns(new List&lt;Estandar&gt;{ new Estandar {Id = 1} });\n\n var entidad = connector.Object\n     .listar(\"FetchEstandar\", new Estandar(), new {Id = 1});\n</code></pre>\n\n<p>when I call <code>listar</code> on the connector Object, I get an <code>\"Expression Cannot Contain an Anonymouse Type\"</code> error. I've tried with rhino mocks and moq. </p>\n\n<p>Is there any way I can mock this method? am I doing something wrong? alternatively, I could ignore this parameter but I don't know how. I really just need to test the value of the first parameter and ignorearguments works but I have no idea whether or how I can get this value if I use it</p>\n"},{"tags":["c#",".net","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12871897,"title":"How to setup a method twice for different parameters with mock","body":"<p>I would like to setup a method with Moq twice but it seems that the last one overrides the previous ones. Here's my initial setup:</p>\n\n<pre><code>string username = \"foo\";\nstring password = \"bar\";\n\nvar principal = new GenericPrincipal(\n    new GenericIdentity(username),\n    new[] { \"Admin\" });\n\nvar membershipServiceMock = new Mock&lt;IMembershipService&gt;();\nmembershipServiceMock.Setup(ms =&gt;\n    ms.ValidateUser(username, password)\n).Returns(new ValidUserContext { \n    Principal = principal\n});\n</code></pre>\n\n<p>This works out fine but I want this to return <code>new ValidUserContext()</code> if the username or password is rather than the <code>username</code> and <code>password</code> variables as above. To do that, I added another setup but this time it overrides the above one and always applies it:</p>\n\n<pre><code>membershipServiceMock.Setup(ms =&gt;\n    ms.ValidateUser(It.IsAny&lt;string&gt;(), It.IsAny&lt;string&gt;())\n).Returns(\n    new ValidUserContext()\n);\n</code></pre>\n\n<p>What is the most elegant way of handling this type of situations with Moq?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I solved the problem with the below approach but I guess there is a better way of handling this:</p>\n\n<pre><code>var membershipServiceMock = new Mock&lt;IMembershipService&gt;();\nmembershipServiceMock.Setup(ms =&gt;\n    ms.ValidateUser(It.IsAny&lt;string&gt;(), It.IsAny&lt;string&gt;())\n).Returns&lt;string, string&gt;((u, p) =&gt; \n    (u == username &amp;&amp; p == password) ?\n    new ValidUserContext { \n        Principal = principal\n    }\n    : new ValidUserContext()\n);\n</code></pre>\n"},{"tags":["unit-testing","code-coverage","gcov"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1723,"score":2,"question_id":4643158,"title":"Code coverage with GCOV can't produce .gcda file","body":"<p>I want to get code coverage with GCOV, I set build setting by  <a href=\"http://developer.apple.com/library/mac/#qa/qa2007/qa1514.html\" rel=\"nofollow\">http://developer.apple.com/library/mac/#qa/qa2007/qa1514.html</a></p>\n\n<ul>\n<li>add \"-lgcov\" to \"Other Linker Flags\"</li>\n<li>check \"Instrument Program Flow\"</li>\n<li>check \"Generate Test Coverage Files\"</li>\n</ul>\n\n<p>but I can't produce the .gcda file, could anyone help?</p>\n"},{"tags":["iphone","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12927764,"title":"iOS FrameWork UnitTesting","body":"<p>I have created a iOS framework and want to use that framework in one of my application. </p>\n\n<p>My question is about the UnitTesting of the framework. \nI have read about the inbuilt xcode unittest framework, but not sure how to get started on testing the framework.</p>\n\n<p>Or do I have to import the framework in one of my apps and then perform the testing of the framework via </p>\n\n<p>Regards,</p>\n\n<p>Nirav</p>\n"},{"tags":["perl","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12923821,"title":"Perl release tests vs install time tests","body":"<p>I'm writing a Perl module that I want to upload to CPAN soon.  I have written a test suite for it to make sure I don't break anything between releases.  What kind of tests should be run at install time versus only at release time?  The only ones I can really nail down that are release time only are POD checkers, Perl critic checks, etc.</p>\n"},{"tags":["php","unit-testing","mvc","activerecord","fuelphp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12926411,"title":"Unit Testing a FuelPHP Model","body":"<p>So I have a very simple (at least right now it is) model that returns a contact via it's primary key ID:</p>\n\n<pre><code>class Model_Contact extends \\Fuel\\Core\\Model\n{\n    public function get_by_id($contact_id)\n    {\n        return Entity_Contact::find_by_pk($contact_id);\n    }\n}\n</code></pre>\n\n<p>The <code>Entity_Contact</code> class looks like this (irrelevant array content omitted):</p>\n\n<pre><code>class Entity_Contact extends \\Core\\Entity_Base\n{\n    protected static $_table_name = 'contacts';\n    protected static $_properties = array(...);\n    protected static $_public_settable_properties = array(...);\n    protected static $_rules = array(...);\n}\n</code></pre>\n\n<p>Note: <code>\\Core\\Entity_Base</code> extends <code>\\Fuel\\Core\\Model_Crud</code></p>\n\n<p>I might use this in a controller like so:</p>\n\n<pre><code>$model = new Model_Contact();\n$contact = $model-&gt;get_by_id(4);\n</code></pre>\n\n<p>I know that in order to unit test this, I should mock out the actual database call (<code>Entity_Contact::find_by_pk</code>), but I'm not sure how to do this. Since I'm using Fuel's <code>Model_crud</code> functionality (where the DB accessors are actually a part of the domain object model), I'm not sure that I can completely mock the database---or maybe I'm missing something.</p>\n\n<p>So the question: how would you write a test for <code>Model_Contact::get_by_id()</code>?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c#",".net","unit-testing","nunit","nunit-2.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12876423,"title":"How to run test method by the testfixture parameter?","body":"<p>I have a test class and a class like below.</p>\n\n<pre><code>public class Foo\n{\n    private IDbOjbect _db;\n\n    public Foo(string conn)\n    {\n        _db = new DbOjbect(conn);\n    }\n\n    internal Foo(IDbObject db)\n    {\n        _db= db;\n    }\n\n    internal bool TestOne()\n    {\n        if (_db.CurrentDbType == DBType.Oracle)\n        {\n            //do something\n            return true;\n        }\n        return false;\n    }\n\n    internal bool TestTwo()\n    {\n        if (_db.CurrentDbType == DBType.SqlServer || \n            _db.CurrentDbType == DBType.SqlServerCE)\n        {\n            //do something\n            return true\n        }\n        return false;\n    }\n\n    internal bool TestThree()\n    {\n        if (_db.CurrentDbType == DBType.MySql || \n            _db.CurrentDbType == DBType.PostgreSQL || \n            _db.CurrentDbType == DBType.SQLite)\n        {\n            //do something\n            return true\n        }\n        return false;\n    }\n\n    public void RunProcesses()\n    {\n         TestOne();\n         TestTwo();\n         TestThree();\n    }\n}\n\n[TestFixture(\"sqlserver\")]\n[TestFixture(\"sqlserverce\")]\n[TestFixture(\"oracle\")]\n[TestFixture(\"mysql\")]\n[TestFixture(\"sqlite\")]\n[TestFixture(\"postgre\")]\npublic class Tests\n{\n   private string _conn;\n   private Foo f;\n\n   public Tests(string conn)\n   {\n       _conn = conn;\n   }\n\n    [SetUp]\n    public void SetUp()\n    {\n        db = new Mock&lt;IDbObject&gt;();\n        switch (_conn)\n        {\n            case \"sqlserver\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.SqlServer);\n                break;\n            case \"sqlserverce\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.SqlServerCE);\n                break;\n            case \"mysql\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.MySql);\n                break;\n            case \"postgre\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.PostgreSQL);\n                break;\n            case \"sqlite\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.SQLite);\n                break;\n            case \"oracle\":\n                db.Setup(x =&gt; x.CurrentDbType).Returns(DBType.Oracle);\n                break;\n        }\n\n        f = new Foo(db.Object);\n    }\n\n   [Test]\n   public void TestOne()\n   {\n       Assert.IsTrue(f.TestOne());\n   }\n\n   [Test]\n   public void TestTwo()\n   {\n       Assert.IsTrue(f.TestTwo());\n   }\n\n   [Test]\n   public void TestThree()\n   {\n       Assert.IsTrue(f.TestThree());\n   }\n}\n</code></pre>\n\n<p>When the _conn is oracle, I want to be run the TestOne method.\nWhen the _conn is sqlserver or sqlserverce, I want to be run the TestThree method.\nWhen the _conn is mysql,sqlite or postgre, I want to be run the TestTwo method.\nHow can I do this ? Is there an attribute of nunit for this ? </p>\n"},{"tags":[".net","unit-testing","moq","mocking","typemock"],"answer_count":17,"favorite_count":23,"up_vote_count":72,"down_vote_count":1,"view_count":14703,"score":71,"question_id":64242,"title":"Rhino Mocks, TypeMock, Moq, or NMock? Which one do you use and why?","body":"<p>Which one do you use (if you use the listed ones) and what do you love and even hate about it?</p>\n"},{"tags":["c#",".net","unit-testing","c#-4.0","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":745,"score":6,"question_id":6669623,"title":"C# Mocking Framework that supports optional parameters and .Net 4.0","body":"<p>Is there a mocking framework that exists for C# that supports .Net 4.0 and C# completely.  Specifically, I'm looking for it to support optional parameters.</p>\n"},{"tags":["c#","sqlite","unit-testing","visual-studio-2012","dispose"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":143,"score":1,"question_id":12919447,"title":"SQLite.Interop.dll locked after running Visual Studio 2012 Unit Test Framework tests","body":"<ul>\n<li>Visual Studio 2012</li>\n<li>SQLite 1.0.82.0 (from nuget)</li>\n</ul>\n\n<p>I am trying to use the \"Run All\" command in the \"Test Explorer\"\nThe following error happens after you run the test once ... after that it will not build anymore, until you restart visual studio</p>\n\n<p>Here is the build error </p>\n\n<blockquote>\n  <p>The Process cannot access the file 'SQLite.Interop.dll' because it is\n  being used by another process</p>\n</blockquote>\n\n<p>here is the code</p>\n\n<pre><code>using System.Data.SQLite;\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\n\nnamespace Test.Sqlite\n{\n    [TestClass]\n    public class Test_Sqlite_Locking\n    {\n        [TestMethod]\n        public void can_create_table()\n        {\n            using(var fact = new SQLiteFactory())            \n            using (var conn = fact.CreateConnection())\n            {\n                conn.ConnectionString = \"Data Source=:memory:;Version=3;New=True;\";\n                conn.Open();\n                //conn.Close();                \n            }\n\n            //SQLiteConnection.ClearAllPools();\n            //GC.Collect();\n        }\n    }\n}\n</code></pre>\n\n<p>I have tried, closing connection, calling ClearAllPools, GC.Collect, and creating the SQLiteConnection directly (instead of the Factory) ... still same issue</p>\n\n<p>This DOES work if you DEBUG ALL TESTS ... but it is when you just Run the tests that this seems to lock it up</p>\n"},{"tags":["unit-testing","functional-programming","functional-testing","solid-principles","srp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":11852173,"title":"Functional Programming, SRP, testability and classes with static and instance mutable fields","body":"<p>I hope I can phrase this question correctly. I have a concern when dealing with state and test-ability in classes with static and instance mutable fields.</p>\n\n<p>Do the static fields essentially constitute a different class/responsibility/instance due to the difference in their lifetime/scope?</p>\n\n<p>If so: then shouldn't the instance fields also be a separate class/data structure?</p>\n\n<p>And then: and if that is so, then shouldn't all classes be stateless only receiving their dependencies on construction and should all then be immutable?</p>\n\n<p>And finally, would this mean that functional programming is the right way to do object oriented programming as well?</p>\n"},{"tags":["unit-testing","google-app-engine","go"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":285,"score":7,"question_id":7858711,"title":"How to run unit tests for code that uses App Engine services in Go?","body":"<p>I was told the best solution to run unit tests for code that uses App Engine services such as datastore or memcache was to run the development server in a child process, but I'm not sure how. Anybody successfully ran this kind of test and can share a solution?</p>\n\n<p>App Engine SDK for Go uses the Python dev_appserver; <a href=\"http://groups.google.com/group/google-appengine-go/msg/d0cb913f1f03155c\" rel=\"nofollow\">see this thread</a>.</p>\n"},{"tags":["unit-testing","dry","code-duplication"],"answer_count":11,"favorite_count":6,"up_vote_count":26,"down_vote_count":0,"view_count":1229,"score":26,"question_id":129693,"title":"Is duplicated code more tolerable in unit tests?","body":"<p>I ruined several unit tests some time ago when I went through and refactored them to make them more <a href=\"http://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a>--the intent of each test was no longer clear.  It seems there is a trade-off between tests' readability and maintainability.  If I leave duplicated code in unit tests, they're more readable, but then if I change the <a href=\"http://en.wikipedia.org/wiki/System_Under_Test\" rel=\"nofollow\">SUT</a>, I'll have to track down and change each copy of the duplicated code.</p>\n\n<p>Do you agree that this trade-off exists?  If so, do you prefer your tests to be readable, or maintainable?</p>\n"},{"tags":["visual-studio-2010","unit-testing","visual-studio-2012","shim","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":12228118,"title":"How to resolve method name conflict in VS2012 Fakes framework","body":"<p>I am using VS2012 Fakes and MSTEST framework to do unit test. I have a third party dll and I need to fake it. However there is a method (getItemAt(int)) in the dll that seems to conflict with a method that exits in Fakes. </p>\n\n<p>The error message I get during compile is:</p>\n\n<blockquote>\n  <p><strong>Error   2</strong> The type 'MyObject.Fakes.ShimList' already contains a\n  definition for 'get_ItemAtInt32'\n  [D:\\Dev\\Test\\obj\\Debug\\Fakes\\o\\f.csproj]  D:\\Dev\\Teste\\f.cs   6933    111 Test</p>\n</blockquote>\n\n<p>Any solution to pass by this error to continue work with Fakes?</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","microsoft-fakes"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":155,"score":2,"question_id":12243989,"title":"How do I remove a Fakes assembly from a Visual Studio 2012 project?","body":"<p>I've added a <a href=\"http://www.peterprovost.org/blog/2012/04/15/visual-studio-11-fakes-part-1\" rel=\"nofollow\">Fakes assembly</a> to a Visual Studio 2012 C# unit test project, via the \"Add Fakes Assembly\" reference context menu option. What's the procedure to completely remove the Fakes assembly, i.e. to undo my adding it to the project?</p>\n"},{"tags":["ios","unit-testing","tdd","ios6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12921007,"title":"Unit testing (Kiwi): Property is always nil in test after loadView and viewDidLoad are called","body":"<p>I am writing a unit test template project for my own reference's sake. This includes template code for all the basic tasks, such as verifying that a UILabel's text property is set as expected after viewDidLoad. </p>\n\n<p>I have a storyboard with a ViewController with one UILabel. In viewDidLoad I set it's text. The test then asserts whether or not the text has been set as expected, but for some reason, the UILabel is always nil. Everything works as expected (thank god) when I run the app; a white view is shown with a label with the expected text.</p>\n\n<p>I am using Kiwi as my test framework and Xcode v4.5.</p>\n\n<p>Here's some code:</p>\n\n<p><strong>ViewController.h:</strong></p>\n\n<pre><code>@property (strong, nonatomic) IBOutlet UILabel *myLabel;\n</code></pre>\n\n<p><strong>ViewController.m:</strong></p>\n\n<pre><code>- (void)viewDidLoad {\n    myLabel.text = @\"test\";\n}\n</code></pre>\n\n<p><strong>ViewControllerTests.m:</strong></p>\n\n<pre><code>ViewController *vc = [[ViewController alloc] init];\n\n// create view in memory by calling view's getter\n[vc view];\n\n// set myLabel.text to \"test\"\n[vc viewDidLoad];\n\n[vc.myLabel shouldNotBeNil];\n[[vc.myLabel.text should] equal:@\"test\"];\n</code></pre>\n\n<p>The above test fails, telling me that myLabel is nil.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8687378/iphone-testing-testing-iboutlets\">This StackOverflow answer</a> states that calling loadView will create the view hierarchy in memory and thereby prepare any subviews for use. <a href=\"http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html\" rel=\"nofollow\">According to the documentation</a>, simply calling a ViewController view's getter will call loadView for you and create all views. Therefore, I find it extremely odd that myLabel = nil at the time of testing.</p>\n"},{"tags":["unit-testing"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1482,"score":6,"question_id":6197370,"title":"Should unit tests be written for getter and setters?","body":"<p>Are we supposed to write tests for our getters and setters or is it overkill?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12921279,"title":"Are unittest attributes mutable in Python?","body":"<p>Suppose I have this integration test</p>\n\n<pre><code>class TestClass(unittest.TestCase):\n    @classmethod\n    def setUpClass(cls):\n        cls.key = '123'\n\n    def test_01_create_acc(self):\n       user = create_account(...)\n       self.key = user.key\n\n    def test_02_check_account(self):\n       user = check_account(..)\n       self.assertEqual(self.key, user.key)\n</code></pre>\n\n<p>It looks like the attribute <code>self.key</code> is not mutable. It stays with the old value from <code>setUpClass</code>. But isn't <code>setUpClass</code> only called once? </p>\n\n<p>The account function creates a key randomly for security reason, so I am not allowed to pass in my secret key. It returns the key, so I need to modify that attribute. Can I?</p>\n\n<p>It looks like each <code>test_</code> case is isolated. </p>\n\n<pre><code>my_gloabl = None\n\ndef setUpClass(cls):\n    cls.key = my_global\n</code></pre>\n\n<p>If I change <code>my_global</code> in test1, test2 will get <code>None</code>.</p>\n"},{"tags":["unit-testing","mocking","nsubstitute","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12839158,"title":"Is it OK to use MS Fakes shims with NSubstitute mocks?","body":"<p>We are using <a href=\"http://nsubstitute.github.com/\" rel=\"nofollow\">NSubstitute</a> to mock external objects for our unit tests. However many legacy classes are not called via interfaces and can't be easily replaced with mocks.</p>\n\n<p>I've considered to use <a href=\"http://richonsoftware.cloudapp.net/post/2012/04/05/Using-Stubs-and-Shim-to-Test-with-Microsoft-Fakes-in-Visual-Studio-11.aspx\" rel=\"nofollow\">Microsoft Fakes</a>, but according to <a href=\"http://stackoverflow.com/questions/9677445/mock-framework-vs-ms-fakes-frameworks/9684782#9684782\">the answer</a>  for the question <a href=\"http://stackoverflow.com/questions/9677445/mock-framework-vs-ms-fakes-frameworks/9684782#9684782\">\"Mock framework vs MS Fakes frameworks</a>\"</p>\n\n<blockquote>\n  <p>\" if you're already using a more full-featured mocking framework, you\n  might feel like there are some important pieces missing from Fakes\n  stubs.\"</p>\n</blockquote>\n\n<p>Would it be possible to use MS Fakes shims  with NSubstitute mocks in the same tests? </p>\n\n<p>Should we expect any compatibility problems?</p>\n"},{"tags":["unit-testing","naming-conventions","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12900507,"title":"Visual Studio Test Explorer wildcard or pattern filter","body":"<p>Everybody mentions that you can \"organize\" tests in the new VS2012 with filters, but I've yet to google an actual <em>example</em> of said filtering.</p>\n\n<p><strong>Background</strong></p>\n\n<p>Because of the lack of \"useful\" grouping, you can no longer rely on the actual test structure, <a href=\"http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx\" rel=\"nofollow\">as sometimes recommended</a>.  In VS2012 Test Explorer you have to rely on a naming scheme for your test <em>methods</em> to organize them visually in the Explorer.  Something like:</p>\n\n<p><code>{class}_{method}_{scenario}</code></p>\n\n<p>e.g.</p>\n\n<ul>\n<li><code>StringService_InsertString_NormalUsage</code></li>\n<li><code>StringService_InsertString_AttemptedEmpty</code></li>\n<li><code>StringService_InsertString_TooLong</code></li>\n<li><code>BaseballService_PlayBall</code></li>\n<li><code>BaseballService_PlayBall_TeamUnavailable</code></li>\n<li><code>Integration_BaseballService_PlayBall</code></li>\n<li><code>Integration_BaseballService_PlayBall_TeamUnavailable</code></li>\n<li>etc</li>\n</ul>\n\n<p>My scenario: One file per tested class, one class per tested class, multiple test methods correspond to each tested method.  Integration tests in different file than unit tests, integration test methods prefixed with \"Integration_\".</p>\n\n<p><strong>The Question</strong></p>\n\n<p>Given that you could/would/should end up with multiple tests in multiple files, how do you filter the tests so that only a specific functional subset is run?  How do you filter so a specific subset is <strong>not</strong> run?</p>\n\n<p>I just want to run all my unit tests (across multiple files) but not my integration tests (also across multiple files), which would be simple(r) if I could use wildcards and/or patterns in the existing filters.</p>\n\n<p>Similar to these questions:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/12507570/how-can-i-filter-unit-test-in-visual-studio-2012-by-category\">how can I filter unit test in visual studio 2012 by category?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11783969/visual-studio-2012-rc-run-unit-tests-after-build-specify-test-categories-to\">Visual Studio 2012 RC - Run Unit Tests after build - Specify test categories to run</a></li>\n<li><a href=\"http://stackoverflow.com/questions/11057658/visual-studio-2012-test-explorer\">Visual Studio 2012 Test Explorer</a></li>\n</ul>\n"},{"tags":["java","android","unit-testing","testing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12917323,"title":"How to simulate client-side delay on Android without hanging the UI?","body":"<p>I have an Androd application that talks to a back-end web service.  As part of the testing, I need to simulate different lengths of client-side delay when a submit button is pressed.</p>\n\n<p>Right now, I am using a Thread.sleep() in my OnClickListener for my submit button, but sleeping the UI thread like this has the unintended consequence of causing the app to appear to \"freeze\" completely - the button stays highlighted until the thread wakes up and my ProgressBar is likewise completely frozen.  Here is my code:</p>\n\n<pre><code>public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_checkout);\n\n    pBar = (ProgressBar) findViewById(R.id.progressBar1);\n    pBar.setVisibility(View.INVISIBLE);\n\n    Button submitButton = (Button) findViewById(R.id.btnSubmit);\n    submitButton.setOnClickListener(new OnClickListener() {\n\n        @Override\n        public void onClick(View v) {\n            pBar.setVisibility(View.VISIBLE);\n            try {\n                Thread.sleep(3000); //eventually this delay will be random\n                                    //right now it obviously hangs the UI\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            performMyAppSpecificWorkHere();\n            pBar.setVisibility(View.INVISIBLE);\n            CheckoutActivity.this.finish();\n        }\n    });  \n}\n</code></pre>\n\n<p>I'm looking for ways I could simulate a delay without hanging the entire UI.  Any ideas are welcome.  Thanks!</p>\n\n<p><strong>edit</strong></p>\n\n<p>Some clarification here!  Part of what I need to do is make simulate a delay and allow the user interface to handle it cleanly (which is what's NOT happening now).</p>\n\n<p>ie...if there is a delay on either the client or the web service, the client should handle it by letting the spinner spin while it waits.  The ability to simulate a back-end delay is already done and that works the way I want it to, but I want to simulate a delay on the client without hanging the UI thread.</p>\n"},{"tags":["c#",".net","unit-testing","selenium","webdriver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12912011,"title":"Selenium RemoteWebDriver memory issues","body":"<p>I'm running a Selenium Standalone Server, version 2.25.0</p>\n\n<p>I run a program in c# executing the driver by:</p>\n\n<pre><code>DesiredCapabilities capabilities = DesiredCapabilities.HtmlUnit();\ncapabilities.IsJavaScriptEnabled = false;\nIWebDriver driver = new RemoteWebDriver(new Uri(\"http://127.0.0.1:4444/wd/hub\"), capabilities);\n</code></pre>\n\n<p>Then I collect some information via <code>driver.FindElement(By.)</code>.</p>\n\n<p>everything works fine.</p>\n\n<p>After i executed all</p>\n\n<p>I quit the driver by:</p>\n\n<pre><code>driver.Quit();\n</code></pre>\n\n<p>The test works fine. But when I take a look into the task-manager while executing I can see \"java.exe\" (the selenium server) grabbing memory and afterwards not releasing it.</p>\n\n<p>How can i solve this problem? Any Ideas?</p>\n"},{"tags":["javascript","unit-testing","coffeescript"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":96,"score":3,"question_id":12904317,"title":"How to start testing javascript code","body":"<p>What parts of code should I be testing? How do I test DOM-specific things?</p>\n\n<p>What framework would you recommend?</p>\n\n<p>As I understand it, I should be using <a href=\"https://github.com/ariya/phantomjs\" rel=\"nofollow\" title=\"phantomjs\">phantomjs</a> with a testing framework.</p>\n\n<p>I know the question's rather vague, but I'd really appreciate some info from js-testing developers.</p>\n\n<p>I am writing Coffeescript @ Ubuntu</p>\n"},{"tags":["javascript","jquery","unit-testing","qunit","sinon"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12902652,"title":"Sinon.js stub and test external function call with object as parameter later modified by ref","body":"<p>I'm looking to test the call my function makes to another function, particularly an argument that is an object.  </p>\n\n<p>The issue is that sinon.js seems to store a reference to the object parameter given in its arguments array, which is naturally expected.  However, this creates a problem when the parameter is later modified by ref, which changes the <em>apparent</em> value of those parameters at the time the function was called.</p>\n\n<p>What's the best way to unit test a situation like this?</p>\n\n<p>Here is a contrived example:</p>\n\n<h2><a href=\"http://jsfiddle.net/xtfQu/\" rel=\"nofollow\">http://jsfiddle.net/xtfQu/</a></h2>\n\n<pre><code>var view = Backbone.View.extend({\n    initialize: function () {\n        _.bindAll(this);    \n    },\n\n    dostuff: function () {\n        var coords = { x: 0, y: 0 };\n        for (var i = 0; i &lt; 10; i++) {\n            this.otherstuff(coords);\n\n            coords.x += 10;\n        }\n    },\n\n    otherstuff: function (coord) {\n        // Stubbed\n    }\n});\n\ntest(\"a test\", function() {\n    // Arrange\n    var blah = new view();\n\n    sinon.stub(blah, 'otherstuff');\n\n    // Act\n    blah.dostuff();\n\n    // Assert\n    var expectedFirstCallCoords = { x: 0, y: 0 };\n\n    // All assertions on the value of x for a particular call would seem to be impossible.\n    // blah.otherstuff.firstCall.args[0].x --&gt; 100\n    deepEqual(blah.otherstuff.firstCall.args[0], expectedFirstCallCoords, 'parameter changed by ref, untestable?');\n});​\n</code></pre>\n\n<p>I can think of various hacks around this 'issue'.  Is there a cleaner approach that doesn't involve cloning the object or modifying my production code simply for the sake of getting sinon to work?</p>\n"},{"tags":["django","unit-testing","django-views","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":162,"score":2,"question_id":3669345,"title":"Django Testing: determine which view was executed","body":"<p>In the Django <a href=\"http://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client\" rel=\"nofollow\">testing documentation</a> they promise that you can \"Test that the correct view is executed for a given URL.\"</p>\n\n<p>However I didn't find any possibility how to test which view was executed. I would expect that in the <a href=\"http://docs.djangoproject.com/en/dev/topics/testing/#django.test.client.Response\" rel=\"nofollow\"><code>Response</code> class</a> but there's nothing about the executed view. </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","abap"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":125,"score":3,"question_id":12753341,"title":"Can ABAP UNIT tests be used in classic ABAP programs?","body":"<p>I would like to implement Abap Unit tests into my ABAP programs.  My first report is a classic form ABAP--no OO classes, etc. </p>\n\n<p>Is this even possible?  Is ABAP UNIT meant explicitly test OO classes? </p>\n\n<p>Or, can it also test typical forms?  So, if I had a form called \n\"PERFORM get_date_range using sy-date changing lv_fromdate lv_todate.\"  Can I write a ABAP Unit test for that?  Or must it be a method in a class?</p>\n\n<p>Btw.. I'm a long time Java developer learning ABAP, and wanting to use ABAP UNIT.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","asp.net-web-api"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":624,"score":2,"question_id":9789944,"title":"How can I test a custom DelegatingHandler in the ASP.NET MVC 4 Web API?","body":"<p>I've seen this question come up in a few places, and not seen any great answers. As I've had to do this myself a few times, I thought I'd post my solution. If you have anything better, please post.</p>\n\n<p>N.B. This is using ASP.NET MVC 4 Beta 2 version of Web API - future versions may change!</p>\n\n<p>Update: This still works in ASP.NET MVC 4 RC</p>\n"},{"tags":["c#","unit-testing","dependency-injection","ninject"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":12896480,"title":"unit testing & constructor dependency injection","body":"<p>I have an issue regarding how one would go about designing an application suited for unit-testing.</p>\n\n<p>I am trying to implement the SRP (Single-Responsibility Principle), and from what I understood this involves splitting out most functionality in seperate, dedicated classes to keep code more organised.  For example, I have this specific scenario.</p>\n\n<p>A class <code>RecurringProfile</code>, which has a method <code>.ActivateProfile()</code>.  What this method does is mark the status as activated, and create the next (first) recurring payment for the next due date.  I was going to split out the functionality to create the next recurring payment in a seperate class, for example <code>RecurringProfileNextPaymentCreator</code>.    My instant idea is to have this class take the <code>'RecurringProfile'</code> as a parameter in it's constructor:</p>\n\n<pre><code>RecurringProfileNextPaymentCreator(IRecurringProfile profile)\n</code></pre>\n\n<p>However, I think this would be problematic for unit-testing.   I would like to create a unit-test which tests out the <code>ActivateProfile</code> functionality.  This method would get an instance of an <code>IRecurringProfileNextPaymentCreator</code> via dependency injection (Ninject), and call the method <code>.CreateNextPayment</code>.</p>\n\n<p>My idea to create a unit-test was to create a mock of an <code>IRecurringProfileNextPaymentCreator</code>, and substitue that so that I can verify that the <code>.ActivateProfile()</code> actually called the method.  However, due to the constructor parameter, this would not fit as a default constructor for NInject.  Having to create a custom NInject provider just for such a case (where I can have many such classes all over the solution) would be a bit overkill.</p>\n\n<p>Any ideas / best practices how one would go about this?</p>\n\n<p>--\nBelow is a sample code regarding the above example: (Please note that the code is hand-written, and is not syntactically 100% correct)</p>\n\n<pre><code>public class RecurringProfile\n{\n    public void ActivateProfile()\n    {\n        this.Status = Enums.ProfileStatus.Activated;\n        //now it should create the first recurring payment\n        IRecurringProfileNextPaymentCreator creator = NInject.Get&lt;IRecurringProfileNextPaymentCreator&gt;();\n        creator.CreateNextPayment(this); //this is what I'm having an issue about \n    }\n}\n</code></pre>\n\n<p>And a sample unit-test:</p>\n\n<pre><code>public void TestActivateProfile()\n{   \n    var mockPaymentCreator = new Mock&lt;IRecurringProfileNextPaymentCreator&gt;();\n    NInject.Bind&lt;IRecurringProfileNextPaymentCreator&gt;(mockPaymentCreator.Object);\n\n    RecurringProfile profile = new RecurringProfile();\n    profile.ActivateProfile();\n    Assert.That(profile.Status == Enums.ProfileStatus.Activated);\n    mockPayment.Verify(x =&gt; x.CreateNextPayment(), Times.Once());\n\n}\n</code></pre>\n\n<p>Going up to the sample code, my issue is whether it is a good practice to pass over the RecurringProfile as a parameter to the <code>creator.CreateNextPayment()</code> method, or whether it makes more sense to somehow pass the <code>RecurringProfile</code> to the DI-framework, when getting an instance of an <code>IRecurringProfileNextPaymentCreator</code>, considering that the <code>IRecurringProfileNextPaymentCreator</code> will always act on an <code>IRecurringProfile</code> to create the next payment. Hope this makes the question a bit more clear.</p>\n"},{"tags":["java","hibernate","unit-testing","tdd"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":106,"score":3,"question_id":12899103,"title":"How to test the hibernate generic dao pattern","body":"<p>I'm starting a project using Google Guice and Hibernate and, in the way to configure the database access layer, I got troubled with several doubts along this process.</p>\n\n<p>I'm using JPA annotations in my POJOs and my Generic DAO implementation uses an EntityManager object to communicate with the database. I did several \"manual\" tests and I saw it was working fine but I prefer to follow a TDD methodology to enforce my knowledge in this kind of methodologies. I'm not sure what is the best way to test generics in java and even less the best solution for testing the Hibernate Generic DAO pattern.</p>\n\n<p>I have read several solutions but I don't feel really comfortable with none of them:</p>\n\n<ul>\n<li>One of them is to make an abstract class to test the Generic DAO and use abstract methods to get the specific DAO and to get the instances to persist, etc.</li>\n<li>Another solution consist on use an abstract class (like the previous solution) and use factories instead of abstract methods: With these two solutions I don't know if it's worth to have a method to get an entity to test every each case in my project.</li>\n<li>Another one solution could be to test every functionality in the specific DAO better than in the generic dao: I think this is the worst solution because, in the most of cases, I will have to repeat a lot of code to test the same thing.</li>\n</ul>\n\n<p>Apart from that, I have read that it could be better to remove the DAO layer and use the entity manager directly from services: I don't think this is the best way because you are mixing the database layer with the service layer.</p>\n\n<p>Anyone who could help me please?!</p>\n"},{"tags":["java","unit-testing","mocking","mockito","superclass"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12826871,"title":"Does any mocking framework allow spying on a super classes method?","body":"<p>We are using spring oauth and there are several places where we need to use inheritance.</p>\n\n<p>In the immediate case we are extending TokenEndpoint</p>\n\n<pre><code>public class MyTokenEndpoint extends TokenEndpoint {\n    //...\n    public ResponseEntity&lt;OAuth2AccessToken&gt; getAccessToken(\n            Principal principal,\n            MyParams myParams,\n            @RequestParam Map&lt;String, String&gt; allParams) {\n\n        // .. Stuff Happens\n\n        updateParamsWithStuff(allParams);\n\n        return super.getAccessToken(\n        principal, myParams.grantType(), allParams);\n    }\n    //...\n}\n</code></pre>\n\n<p>Now what I want to test is if the map passed to super.getAcccessToken has been filled with Stuff.  My simple way was to spy on the map passed in, but this relies on implemetation details and does not actually insure that stuff is in the map passed super.getAccessToken</p>\n\n<p>We are using Mockito, I have seen comments that this will not work, and one that implies it may.  Can this be done in any of the mocking frameworks?</p>\n\n<p>See both answers on ( <a href=\"http://stackoverflow.com/questions/9957102/can-i-mock-a-superclasss-constructor-with-mockito-powermock\">Can I mock a superclass&#39;s constructor with Mockito/Powermock?</a>, the checked one says impossible, but given the discussion on the second answer I just had to try.)</p>\n\n<p>After reading that I tried the following:</p>\n\n<pre><code>MyTokenEndpoint spyEndpoint = Mockito.spy(endpoint); //endpoint Set-up previously\n\nMockito.doAnswer(new Answer&lt;ResponseEntity&lt;OAuth2AccessToken&gt;&gt;() {\n    @Override\n    public ResponseEntity&lt;OAuth2AccessToken&gt; \n           answer(InvocationOnMock invocation) {\n       Object[] args = invocation.getArguments();\n       Map&lt;String, String&gt; params = (Map&lt;String, String&gt;) args[2];\n       System.out.printf(\"%s\\n\", params.toString());\n       return new ResponseEntity&lt;OAuth2AccessToken&gt;(HttpStatus.ACCEPTED);\n    }\n}).when(((TokenEndpoint) spyEndpoint))\n.getAccessToken(any(Principal.class), \n                anyString(), (Map&lt;String, String&gt;) anyMap());\n\ntheResponse = spyEndpoint\n                .getAccessToken(principal, \n                                myPrams,\n                                currentMap);\n</code></pre>\n\n<p>But the code in answer never gets called.</p>\n\n<p>Am I barking up the wrong tree??  Is this possible in any mocking framework?</p>\n"},{"tags":["c#","unit-testing","tdd","vs-unit-testing-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12880460,"title":"Best Practice for Unit Testing valid characters","body":"<p>Given that a method accepts a string as input parameter and given that this string must only contain numbers from 1 to 8 and a dash (\"/\").</p>\n\n<p>When developing test driven, how would you write a unit test to validate that the method does a proper argument check?</p>\n\n<p>My first thought was reversing the requirement and testing for an ArgumentException, i.e. having a data driven unit test that calls the method with every other possible character and expects an ArgumentException. However,... that feels a little like cracking nuts with a sledgehammer... </p>\n\n<p>Are there any best practices for situations like that?</p>\n"},{"tags":[".net","visual-studio-2010","unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12899202,"title":"Why does NUnit expect an older version of the framework?","body":"<p>This is the first time I'm attempting to use NUnit.  I've installed NUnit into my Visual Studio project, using NuGet.  As you can see in the image below, it references nunit.framework, version 2.6.1.12217...</p>\n\n<p><img src=\"http://i.stack.imgur.com/E2U7q.jpg\" alt=\"Visual Studio project\"></p>\n\n<p>... then I installed the latest Windows app (NUnit-2.6.1.msi)....</p>\n\n<p><img src=\"http://i.stack.imgur.com/aRwqn.jpg\" alt=\"Windows App\"></p>\n\n<p>... and tried to load my test assembly... </p>\n\n<p><img src=\"http://i.stack.imgur.com/Pobrb.jpg\" alt=\"Load fail\"></p>\n\n<p>... but for some reason, it's expecting version 2.5.10.11092 of nunit.framework.</p>\n\n<p>Any idea if I'm doing something wrong?</p>\n"},{"tags":["java","unit-testing","java-ee","mocking","ejb"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12891869,"title":"EJB 3.1 Unit Test, two Beans, one @DependsOn the other, exchange through mock","body":"<p>I currently working on my first EJB project with Glassfish 3.1.2.2. I have two beans:</p>\n\n<pre><code>@Singleton\n@Startup\npublic class ABean implements AInterface {\n//implementation\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@DependsOn(\"ABean\")\n@Startup\n@Singleton\n@EJB(name = \"ABean\", beaninterface = AInterface)\npublic class BBean implements BInterface {\n//implementation\n}\n</code></pre>\n\n<p>I want to unit test the \"BBean\" and mock the \"ABean\". Currently, when I'm starting the JUnitTest the \"ABean\" will be started but <strong>is there a way to exchange the \"ABean\" with a \"ABeanMock\"?</strong> </p>\n\n<p>I need a automatic mechanism to exchange the implementation with the mock as these tests will be run on a jenkins server. So a manual adoption of the code is ok for single manual test but cannot be made for automatic testing.</p>\n\n<p>I'm using the Glassfish Embedded API for unit tests.</p>\n\n<p>Thanks for help.</p>\n"},{"tags":["php","unit-testing","dependency-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12906910,"title":"Is this the right way to write code aimed for better unit test?","body":"<p>I'm trying to find out the best way to write my code for better unit testing and such. Currently I have 2 main concerns:</p>\n\n<ol>\n<li>I use the service container to get the service I need within a class method, I'm concerned that this may not be the best way to do it as I rely on those services to be ready first</li>\n<li>I also use a main \"settings\" class which I can access many settings across modules/plugins. I'm also concerned that this creates an unnecessary dependency on this settings</li>\n</ol>\n\n<p>Some sample code to clarify my issues:</p>\n\n<pre><code>class ABC\n{\n    function someFunction(){\n        if(Container::get('settings')-&gt;get('status'))\n        {\n            Container::get('mailer')-&gt;send();\n        }\n    }\n}\n</code></pre>\n\n<p>Perhaps all I should do is to inject these via the constructor method first?</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","controller"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":212,"score":0,"question_id":7859032,"title":"RSpec controller test fails for simple route","body":"<p>This is probably a very basic error, but I am still learing. =)</p>\n\n<p>My routes.rb consists only of</p>\n\n<pre><code>WebPortal::Application.routes.draw do\n  resources :categories\nend\n</code></pre>\n\n<p>If I understand this correctly, this should (among others) map <code>/categories</code> to <code>CategoriesController.index</code>. This controller looks like</p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  def index\n  end\nend\n</code></pre>\n\n<p>The corresponding view file exists, and rails server serves this page fine. But my RSpec test</p>\n\n<pre><code>describe CategoriesController do\n  describe \"GET :index\" do\n    it \"should be succesful\" do\n      get :index\n      response.should be_succes\n    end\n  end\nend\n</code></pre>\n\n<p>fails with the message </p>\n\n<pre><code>Failure/Error: get :index\n    ActionController::RoutingError:\n    No route matches {:controller=&gt;\"categories\"}\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n\n<p><strong>Edit:</strong> </p>\n\n<p>The command <code>rake routes</code> gives</p>\n\n<pre><code> rake routes\n   categories GET    /categories(.:format)          {:action=&gt;\"index\", :controller=&gt;\"categories\"}\n              POST   /categories(.:format)          {:action=&gt;\"create\", :controller=&gt;\"categories\"}\n new_category GET    /categories/new(.:format)      {:action=&gt;\"new\", :controller=&gt;\"categories\"}\nedit_category GET    /categories/:id/edit(.:format) {:action=&gt;\"edit\", :controller=&gt;\"categories\"}\n     category GET    /categories/:id(.:format)      {:action=&gt;\"show\", :controller=&gt;\"categories\"}\n              PUT    /categories/:id(.:format)      {:action=&gt;\"update\", :controller=&gt;\"categories\"}\n              DELETE /categories/:id(.:format)      {:action=&gt;\"destroy\", controller=&gt;\"categories\"}\n</code></pre>\n"},{"tags":["python","unit-testing","wsgiref"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1039,"score":2,"question_id":634485,"title":"using wsgiref.simple_server in unittests","body":"<p>I have some functions like this one:</p>\n\n<pre>\n<code>\nURL = 'http://localhost:8080'\ndef func():\n    response = urlopen(URL)\n    return process(response)\n</code>\n</pre>\n\n<p>And i want to test it with unittest.</p>\n\n<p>I did something like this:</p>\n\n<pre><code>\nfrom wsgiref.simple_server import make_server\ndef app_200_hello(environ,start_response):\n    stdout = StringIO('Hello world')\n    start_response(\"200 OK\", [('Content-Type','text/plain')])\n    return [stdout.getvalue()]\n\ns = make_server('localhost', 8080, app_200_hello)\n\nclass TestFunc(unittest.TestCase):\n    def setUp(self):\n        s.handle_request()\n\n    def test1(self):\n        r = func()\n        assert r, something\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>At setUp() my tests stop because s.handle_request() waits for request. How i can get around that? Run s.handle_request() in another thread? or maybe there is another \nsolution?</p>\n\n<p>EDIT:\nI want to test \"func\" function, not \"app_200_hello\"</p>\n"},{"tags":["c#","visual-studio","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1319,"score":4,"question_id":3777970,"title":"Visual Studio Unit Test: why test run inconclusive whereas testing same float values?","body":"<p>I'm learning VS Unit test and tried this:</p>\n\n<pre><code>    [TestMethod()]\n    public void calcTest()\n    {\n        double expected = 1.234F; // TODO: Initialize to an appropriate value\n        double actual;\n        actual = 1.234F;\n        Assert.AreEqual(expected, actual);\n        Assert.Inconclusive(\"Verify the correctness of this test method.\");\n    }\n</code></pre>\n\n<p>When running this test method, it says inconclusive ??? Why ?</p>\n\n<p>Update: Hi Guys ok to tell don't compare floats but Business Requirements are what they are so what should I do if I need to compare them ?</p>\n\n<p>Do you mean it's impossible to test floating calculation without headache ? Then if testing is such a headache in financial calculation isn't it better to not do testing at all ?</p>\n\n<p>Seems like a huge bug or design flaw in vs test framework rather :) as it is said here\n<a href=\"http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert.inconclusive%28VS.80%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert.inconclusive%28VS.80%29.aspx</a></p>\n\n<p>Indicates that an assertion cannot be proven true or false.</p>\n\n<p>Since I compare 2 same litterals sure it is true !</p>\n"},{"tags":["java","unit-testing","testing","tdd"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12900613,"title":"testing a huge decomposed method and its inner helper methods","body":"<p>I've been writing a lot of unit tests recently. There's a scenario to which I cannot find a clean solution...</p>\n\n<p>Let's say you have a beast of a method:</p>\n\n<pre><code>public void bigMethod() {\n    // a lot of code goes in here\n}\n</code></pre>\n\n<p>To make your life easier and your code cleaner you'd usually decompose such a beast into smaller inner methods:</p>\n\n<pre><code>public void bigMethod() {\n    a();\n    b();\n    c();\n    // etc.\n}\n</code></pre>\n\n<p>You can test all of the inner methods (a(), b(), c() etc.) independently. The problem is the bigMethod() which should also be tested but the only thing it's doing is chaining calls of some other methods and those have been thoroughly tested already!</p>\n\n<p>How do you approach such a scenario? You cannot just leave bigMethod() untested because you need to be sure that a(), b() and c() are called in there IN PROPER ORDER. But writing a test for bigMethod() will lead to a lot of DUPLICATION IN TESTS. And reducing this duplication there every time is a lot of hassle since you'll be doing that OFTEN.</p>\n\n<p>One idea that comes to my mind is:</p>\n\n<pre><code>public void bigMethod() {\n    helperA.a();\n    helperB.b();\n    helperC.c();\n    // etc.\n}\n</code></pre>\n\n<p>In this scenario you test every helper class and then make sure bigMethod() calls them inOrder. Nice and clean but introduces a lot of very small classes into the project.</p>\n\n<p>Help test ninjas!</p>\n"},{"tags":["eclipse","unit-testing","swt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12910528,"title":"Mocking eclipse SWT/JFACE dialogs and widgets","body":"<p>Is there a way how to unit test eclipse dialogs and SWT/Jface widgets? Or even better - is there some jar/framework which can help me mock Shell or Composite (in that way so I wouldn't have to mock too many their methods) ?</p>\n"},{"tags":["php","unit-testing","testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":12909550,"title":"How would you write a test for such class?","body":"<pre><code>class Documentation\n{\n    private $_text;\n\n    public function __construct($text)\n    {\n        $this-&gt;_text = $text;\n    }\n\n    public function generate()\n    {\n        return new \\DOMElement('documentation', $this-&gt;_text);\n    }\n}\n</code></pre>\n\n<p>The obvious solution I can think of is to create new <code>DOMDocument</code>, append the result of <code>generate()</code> function call and to compare with expected element using <code>$this-&gt;assertEqualXMLStructure</code>, but for some reason I don't like it and am sure there are alternatives.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>UPD</strong>: seems like I've missed something important: what I want to make sure of is that the element of a particular type with a particular content is returned. How to do that?</p>\n\n<p><strong>UPD 2</strong>:</p>\n\n<p>this is what I currently could create, but it's ugly, isn't it?</p>\n\n<pre><code>public function testGenerate()\n{\n    $expected = new \\DOMDocument();\n    $expected-&gt;loadXML('&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;documentation&gt;foo&lt;/documentation&gt;');\n\n    $documentation = new Documentation('foo');\n    $actual = new \\DOMDocument('1.0', 'utf-8');\n    $actual-&gt;appendChild($documentation-&gt;generate());\n\n    $this-&gt;assertEqualXMLStructure($expected, $actual);\n}\n</code></pre>\n"},{"tags":["unit-testing","testing","tdd","private-methods"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12887692,"title":"Unit testing private methods seems to make the whole solution easier","body":"<p>Let's suppose there is an utility class (no data) with one complex (as in, hard-to-test) public method. It uses random number generation, return large arrays of data and that fun stuff. However, if you implement it in small private methods, every private method would be easy to test, and thus the whole thing would be easier to test. From the application point of view, only the big method needs to be public, and the other should be private. Yet, testing the private methods results in an easier to test class. How should I approach this problem?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":152,"score":2,"question_id":12888562,"title":"How to run the same unittest suite with several backends","body":"<p>I have a JSON parser library (<a href=\"https://github.com/isagalaev/ijson\" rel=\"nofollow\">ijson</a>) with a test suite using unittest. The library actually has several parsing implementations — \"backends\" — in the form of a modules with the identical API. I want to automatically run the test suite several times for each available backend. My goals are:</p>\n\n<ul>\n<li>I want to keep all tests in one place as they are backend agnostic.</li>\n<li>I want the name of the currently used backend to be visible in some fashion when a test fails.</li>\n<li>I want to be able to run a single TestCase or a single test, as unittest normally allows.</li>\n</ul>\n\n<p>So what's the best way to organize the test suite for this? Write a custom test runner? Let TestCases load backends themselves? Imperatively generate separate TestCase classes for each backend?</p>\n\n<p>By the way, I'm not married to unittest library in particular and I'm open to try another one if it solves the problem. But unittest is preferable since I already have the test code in place.</p>\n"},{"tags":["unit-testing","design-patterns","java-ee-5"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12892524,"title":"How can I refactor and unit test complex legacy Java EE5 EJB methods?","body":"<p>My colleagues and I are currently introducing unit tests to our legacy Java EE5 codebase. We use mostly JUnit and Mockito. In the process of writing tests, we have noticed that several methods in our EJBs were hard to test because they did a lot of things at once.</p>\n\n<p>I'm fairly new to the whole testing business, and so I'm looking for insight in how to better structure the code or the tests. My goal is to write good tests without a headache.</p>\n\n<p>This is an example of one of our methods and its logical steps in a service that manages a message queue:</p>\n\n<ul>\n<li><p>consumeMessages</p>\n\n<ul>\n<li><p>acknowledgePreviouslyDownloadedMessages</p></li>\n<li><p>getNewUnreadMessages</p></li>\n<li><p>addExtraMessages (depending on somewhat complex conditions)</p></li>\n<li><p>markMessagesAsDownloaded</p></li>\n<li><p>serializeMessageObjects</p></li>\n</ul></li>\n</ul>\n\n<p>The top-level method is currently exposed in the interface, while all sub-methods are private. As far as I understand it, it would be bad practice to just start testing private methods, as only the public interface should matter.</p>\n\n<p>My first reaction was to just make all the sub-methods public and test them in isolation, then in the top-level method just make sure that it calls the sub-methods. But then a colleague mentioned that it might not be a good idea to expose all those low-level methods at the same level as the other one, as it might cause confusion and other developers might start using when they should be using the top-level one. I can't fault his argument.</p>\n\n<p>So here I am.</p>\n\n<p>How do you reconcile exposing easily testable low-level methods versus avoiding to clutter the interfaces? In our case, the EJB interfaces.</p>\n\n<p>I've read in other unit test questions that one should use dependency injection or follow the single responsibility principle, but I'm having trouble applying it in practice. Would anyone have pointers on how to apply that kind of pattern to the example method above?</p>\n\n<p>Would you recommend other general OO patterns or Java EE patterns?</p>\n"},{"tags":["c#","unit-testing","windows-8","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":129,"score":3,"question_id":12837128,"title":"Unit testing async method for specific exception","body":"<p>Does anyone have an example of how to unit test an async method in a Windows 8 Metro application, to ensure that it throws the required exception?</p>\n\n<p>Given a class with an async method</p>\n\n<pre><code>public static class AsyncMathsStatic\n{\n    private const int DELAY = 500;\n\n    public static async Task&lt;int&gt; Divide(int A, int B)\n    {\n        await Task.Delay(DELAY);\n        if (B == 0)\n            throw new DivideByZeroException();\n        else\n            return A / B;\n    }\n}\n</code></pre>\n\n<p>I want to write a test method using the new Async.ExpectsException construction. I've tried :-</p>\n\n<pre><code>[TestMethod]\npublic void DivideTest1()\n{\n    Assert.ThrowsException&lt;DivideByZeroException&gt;(async () =&gt; { int Result = await AsyncMathsStatic.Divide(4, 0); });\n}\n</code></pre>\n\n<p>but of course the test doesn't wait for the async method to complete, and so results in a failed test that the exception hasn't been thrown.</p>\n"},{"tags":["c#","visual-studio","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":108,"score":2,"question_id":10011606,"title":"Different Test Settings per project in same solution Visual Studio","body":"<p><strong><b>Tools:</b></strong></p>\n\n<p>1.Visual Studio 2010</p>\n\n<p>2.Visual Studio Unit tests.</p>\n\n<p><strong><B>Story:</B></strong></p>\n\n<p>We develop a solution that has <b>several projects</b>, \nfor each project there is a test project. \nEach test project has its <b>deployment items</b> that it needs. That's why every test project has its <b>own test settings</b>. </p>\n\n<p><strong>Question:</strong></p>\n\n<p>I would like to be able to run all the test projects at once to get statistics for all the solution (code coverage, etc..). </p>\n\n<p>Is there any way to do this without merging all test settings into one (this solution maybe problematic)?</p>\n\n<p><strong>EDITED</strong></p>\n\n<p>Any other solution to test all the solution will be highly appreciated.</p>\n"},{"tags":["unit-testing","visual-studio-2008","continuous-integration","tfs2008","team-build"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":10142647,"title":"How can I get unit tests to run as part of a TFS2008 build?","body":"<p>I'm trying to get my continuous integration setup to run my unit tests for me, so I've set </p>\n\n<pre><code>&lt;RunTest&gt;true&lt;/RunTest&gt;\n</code></pre>\n\n<p>And I've setup the tests to auto-discover:</p>\n\n<pre><code>&lt;ItemGroup&gt;\n  &lt;TestContainer Include=\"$(OutDir)%2a.Test.dll\" /&gt;\n&lt;/ItemGroup&gt;\n</code></pre>\n\n<p>Running the build on my development machine runs my unit tests, and reports that the Build succeeded; When run as an automated build, the tests run (according to the BuildLog), but I'm seeing this in the log:</p>\n\n<blockquote>\n  <p>Publishing results of test run tfs_service@TFS-BUILD 2012-04-13 14:13:59_Any CPU_Release to <a href=\"http://mycompany-tfs:8080/Build/v1.0/PublishTestResultsBuildService2.asmx\" rel=\"nofollow\">http://mycompany-tfs:8080/Build/v1.0/PublishTestResultsBuildService2.asmx</a>...</p>\n  \n  <p>.The drop share directory \"\\tfs-build\\Builds\\Test\\MyProduct Test_20120413.2\" could not be accessed.</p>\n  \n  <p>The drop share directory \"\\tfs-build\\Builds\\Test\\MyProduct Test_20120413.2\" could not be accessed.</p>\n  \n  <p>MSBUILD : warning MSB6006: \"MSTest.exe\" exited with code 1.</p>\n  \n  <p>The previous error was converted to a warning because the task was called with ContinueOnError=true.</p>\n</blockquote>\n\n<p>This is odd, as the binaries publish quite merrily.</p>\n\n<p>I tried to diagnose the issue, by logging on to the console of the build server, running up a Visual Studio 2008 Command Prompt, navigating to the source location, and invoking MSBuild, it doesn't appear to even attempt to invoke the unit tests?</p>\n\n<p>Ultimately, I'm more interested in playing \"guess why the drop of the results failed\" - could it be the embedded space in my build definition name? What else could I check, given the binaries publish OK?</p>\n"},{"tags":["c#","web-services","unit-testing","soap","automated-tests"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12899531,"title":"Exporting the C# Unitest Results to a Textfile","body":"<p>I am Fresher in c# testing.. I am writing unit tests for web services testing. I have added a service reference to the C# unit tests solution and started consuming the classes in the web services for the testing. I have also added an Excel file to provide unit test values. </p>\n\n<p>Below is a example about what I was doing before  </p>\n\n<pre><code>[DataSource(\"System.Data.Odbc\"\n ,\"Dsn=Excel Files;dbq=|DataDirectory|\\\\TestData.xlsx;defaultdir=C:\\\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5\"\n ,\"Sheet1$\"\n ,DataAccessMethod.Sequential)\n ,DeploymentItem(\"TestProject1\\\\TestData.xlsx\")\n ,Owner(\"\")\n ,Description(\"\")\n ,TestMethod()]\npublic void test1()\n{\n    try\n    {\n        var Service = new Service.ServiceClient();\n        var Cid = testContextInstance.DataRow[\"CId\"].ToString();\n        var MNumber = testContextInstance.DataRow[\"MNumber\"].ToString();\n        var VID = testContextInstance.DataRow[\"VID\"].ToString();\n        var isVisit = new Service.ISVisit()\n        {\n            CID = Cid,\n            MNum = MNumber,\n            VCode = VID\n        };\n\n    var first = Service.Medis(isVisit).Cast&lt;Service.ISMedi&gt;().FirstOrDefault();\n    // Assert\n    Assert.AreEqual(\"12345678\", first.Proc.ProcID);\n    }\n    catch (Exception ex1)\n    {\n        if (ex1.InnerException != null)\n            Debug.WriteLine(ex1.InnerException.Message);\n        Assert.Fail(ex1.Message);\n    }\n}\n</code></pre>\n\n<p>.Medis()<code>,</code>IsVisit` are classes in the services.i am using excel sheet to provide values for the untitest.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9MPVE.png\" alt=\"enter image description here\"></p>\n\n<p>And the unit is passed</p>\n\n<p><img src=\"http://i.stack.imgur.com/fiWKJ.png\" alt=\"enter image description here\"></p>\n\n<p>Now the requirement is to Export this test results to a Txt file or CSV or Excel file in this order </p>\n\n<p>Test 1 : Test result + Duration + Output Soap Message.</p>\n\n<p>Test 2 : Test result + Duration + Output Soap Message. </p>\n\n<p>Test 3 : Test result + Duration + Output Soap Message.  </p>\n\n<p>Please help me with this. I am using Visual Studio team system to write the unittests .</p>\n"},{"tags":["c#","unit-testing","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":4165,"score":4,"question_id":3702461,"title":"C# - Unit test, Mock?","body":"<p>The builtin unit test generator(VS) for the target classes should that be used or should I learn myself how to write a unit test? And whats this \"Mock\" thing? I hear it over and over but none cares to give a good explanation.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","testing","exception-handling","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12904224,"title":"JUnit test passes whether I throw exception or not","body":"<p>I am just starting to learn JUnit.  I tried looking elsewhere for this answer but I couldn't find it.  Suppose I write a JUnit test method that expects an exception, something like this:  (math being an instance of the class I wrote)</p>\n\n<pre><code> @Test(expected = NumberFormatException.class)\n    public void testAdd_String() {\n        System.out.println(\"testing add number to string\");\n        double result = math.add(\"lakd\", \"2\");\n    }\n</code></pre>\n\n<p>Now for the method I would like to test: </p>\n\n<pre><code>public double add(String operand1, String operand2) {\n    int num1 = Integer.parseInt(operand1);\n    int num2 = Integer.parseInt(operand2);\n    return num1 + num2;\n}\n</code></pre>\n\n<p>My test passes both when I have <code>throws NumberFormatException</code> on the method header and when it is not there.  Is this the expected behavior or JUnit?  Is there a way through a JUnit test to ensure that the throws clause is present in my method?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec","capybara"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12905609,"title":"Determining Form Submission with RSpec/Capybara","body":"<p>I have a project in which I am using RSpec and Capybara to do unit testing. I have fully flushed out model and controller tests which are passing nicely and handle the heavy lifting for pre-database validation.</p>\n\n<p>I am now testing user experience and front end items and want to know how i could verify that a form did NOT submit. If a user mismatches passwords or some other erred data, I have script to set the error and prevent submission. </p>\n\n<p>I know i could search for error text but where there a way to check that the 'submit' never happened and feel confident that no server trip was made.</p>\n\n<p>I want something like:</p>\n\n<pre><code>it \"should not sumbit if user name is less than 3 characters\" do\n  visit /edit_account_settings(@user)\n  fill_in \"username\", :with =&gt; \"fo\"\n  click_button \"SAVE\"\n\n  # HOW DO I DO THIS?\n  expect( ... ).not_to submit_to_server \nend\n</code></pre>\n"},{"tags":["asp.net","vb.net","unit-testing","usercontrols"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12905377,"title":"Unit testing custom user controls - Why is the control not initialized?","body":"<p>With a custom control (lets call it TwoLists) that contains two <code>asp:DropDownList</code> (defined in .ascx), I create an instance of TwoLists in my unit test, to find its child lists are nothing. </p>\n\n<pre><code>Public Sub test_TwoLists()\n    Dim instance As TwoLists = New TwoLists()\n    Dim list1 As DropDownList = instance.FindControl(\"list1\")\n    Dim list2 As DropDownList = instance.FindControl(\"list2\")\n    Assert.IsNotNull(list1)\n    Assert.IsNotNull(list2)\nEnd Sub\n</code></pre>\n\n<p>Why is the control not initialized with it's child controls?</p>\n\n<p>Note: This control is created/intialised and works fine when being used in an .aspx and I navigate to the page. </p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12901338,"title":"Python unittest: cancel all tests if a specific test fails","body":"<p>I'm using <code>unittest</code> to test my Flask application, and <code>nose</code> to actually run the tests. My first set of tests is to ensure the testing environment is clean and prevent running the tests on the Flask app's configured database. I'm confident that I've set up the test environment cleanly, but I'd like some assurance of that without running all the tests.</p>\n\n<pre><code>import unittest\n\nclass MyTestCase(unittest.TestCase):\n    def setUp(self):\n        # set some stuff up\n        pass\n\n    def tearDown(self):\n        # do the teardown\n        pass\n\nclass TestEnvironmentTest(MyTestCase):\n    def test_environment_is_clean(self):\n        # A failing test\n        assert 0 == 1\n\nclass SomeOtherTest(MyTestCase):\n    def test_foo(self):\n        # A passing test\n        assert 1 == 1\n</code></pre>\n\n<p>I'd like the <code>TestEnvironmentTest</code> to cause <code>unittest</code> or <code>nose</code>to bail if it fails, and prevent <code>SomeOtherTest</code> and any further tests from running. Is there some built-in method of doing so in either <code>unittest</code> (preferred) or <code>nose</code> that allows for that?</p>\n\n<h2>Update</h2>\n\n<p>With Colleen's help I've updated my example with a kinda-working solution:</p>\n\n<pre><code>import unittest\n\nclass MyTestCase(unittest.TestCase):\n    def setUp(self):\n        # set some stuff up\n        self.environment_is_clean()\n\n    def tearDown(self):\n        # do the teardown\n        pass\n\n    def environment_is_clean(self):\n        try:\n            # A failing test\n            assert 0 == 1\n        except Exception as e:\n            print \"Test environment is not clean!\"\n            raise e\n\nclass SomeTest(MyTestCase):\n    def test_foo(self):\n        # A passing test\n        assert 1 == 1\n\nclass SomeOtherTest(MyTestCase):\n    def test_bar(self):\n        # A passing test\n        self.assertIn('foo', 'foobar')\n</code></pre>\n\n<p>All the tests still run, but if the test environment for any of them isn't clean (all in this case), all of the tests will fail before actually running their test code. This isn't perfect, but it does give me some assurance if my test environment is sane.</p>\n"},{"tags":["javascript","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12903189,"title":"Options for automated JS unit testing with proprietary embedded browser","body":"<p>I am trying to introduce a unit testing framework as part of our CI process with JavaScript that runs within a proprietary browser on an embedded platform. I've seen the well written JS Test Framework comparison thread on Stackoverflow already, but wanted to see what my options were with having a proprietary browser...Basic desires are:</p>\n\n<ul>\n<li>Must be runnable via on a linux server so Jenkins can run them on demand as part of the build</li>\n</ul>\n\n<p>Is there a way for me to leverage something like Googles JSTestDriver so that the unit tests can execute in this custom browser or will that only work for main stream browsers such as Firefox, IE, Chrome, etc? How easy is it to automated the execution of this into an automated headless build process with Jenkins?</p>\n\n<p>Currently I'm looking into using Casperjs + Phantomjs, which seems like a great solution. I won't be able to test any custom browser extensions, but that's ok as those will be tested with integration tests anyway...my thought with unit testing is that they should just test pure JS. This solution was also very easy to integrate with Jenkins and seems to cover my needs, wanted to see if anyone had any thoughts on this?</p>\n"},{"tags":["unit-testing","spring-mvc","controller","nullpointerexception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":12902247,"title":"Spring 3.1 Dependency Injection - JUnit Testing","body":"<p>I'm using Spring MVC 3.1 and I am attempting to test a controller class called LoginController. I get a null pointer exception in the authenticate method when the method attempts to make a call using reference authenticationService, which is Autowired in the LoginController class. I have referenced this <a href=\"http://stackoverflow.com/questions/4396786/spring-ioc-dependency-injection-nullpointerexception\"> link </a> as well as <a href=\"http://stackoverflow.com/questions/3133544/autowire-throws-a-nullpointerexception\">this one</a> .   Please see code below for clarity</p>\n\n<p><strong>LoginControllerTest.java</strong></p>\n\n<pre><code> @RunWith(SpringJUnit4ClassRunner.class)\n @ContextConfiguration(locations = {\"classpath:servlet-context.xml\"})\npublic class LoginControllerTest extends DatabaseSupport {\n\n@Autowired\nprivate ApplicationContext applicationContext;\n\n@Autowired\nprivate LoginController loginController;\n\n @Autowired\nprivate AuthenticationService authenticationService;\n\nprivate MockHttpServletRequest request;\nprivate MockHttpServletResponse response;\nprivate RequestMappingHandlerAdapter handlerAdapter;\n\nprivate LoginForm loginForm;\n\n\n@Before\npublic void setUp() {\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n\n    handlerAdapter = applicationContext.getBean(RequestMappingHandlerAdapter.class);\n    authenticationService = applicationContext.getAutowireCapableBeanFactory()\n                           .createBean(AuthenticationService.class);\n    loginController = new LoginController();\n    loginForm = new LoginForm();\n\n}\n\n\n@Test\npublic void loginTest() throws Exception {\n    final String expectedMessage = \"login\";\n    final String requestUri = \"/\";\n    final HandlerMethod expectedHandlerMethod;\n\n    final MockHttpServletRequest request;\n    final MockHttpServletResponse response;\n\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    request.setMethod(\"GET\");\n\n    request.setRequestURI(requestUri);\n\n    expectedHandlerMethod = new HandlerMethod(loginController, \"login\");\n    ModelAndView mav = handlerAdapter.handle(request, response, expectedHandlerMethod); //this.getHandler(request);\n\n\n    assertViewName(mav, expectedMessage);\n}\n\n\n@Test\npublic void logoutTest() throws Exception {\n    final String expectedMessage = \"login\";\n    final String requestUri = \"/\";\n    final HandlerMethod expectedHandlerMethod;\n\n    final MockHttpServletRequest request;\n    final MockHttpServletResponse response;\n\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    request.setMethod(\"GET\");\n\n    request.setRequestURI(requestUri);\n\n    expectedHandlerMethod = new HandlerMethod(loginController, \"logout\");\n    ModelAndView mav = handlerAdapter.handle(request, response, expectedHandlerMethod); //this.getHandler(request);\n\n\n    assertViewName(mav, expectedMessage);\n}\n\n\n@Test\npublic void authenticateTest() throws Exception {\n    //final String expectedMessage = \"redirect:search/\";\n    final String requestUri = \"/\";\n    final HandlerMethod expectedHandlerMethod;\n    final Map mav;\n\n    final MockHttpServletRequest request;\n    final MockHttpServletResponse response;\n\n    loginForm.setUserName(\"abell\");\n    loginForm.setPassWord(\"PassW0rd\");\n\n    request = new MockHttpServletRequest();\n    response = new MockHttpServletResponse();\n    request.setMethod(\"GET\");\n    request.setRequestURI(requestUri);\n    mav = new HashMap();\n\n      //authenticate(@ModelAttribute(\"loginForm\") LoginForm loginForm, Map model, HttpServletRequest request)\n    //expectedHandlerMethod = new HandlerMethod(loginController, \"authenticate\");\n    //ModelAndView mav = handlerAdapter.handle(request, response, expectedHandlerMethod); //this.getHandler(request);\n    String expectedMessage = loginController.authenticate(loginForm, mav, request);\n\n    assertTrue(expectedMessage.equalsIgnoreCase(\"redirect:search/\"));\n}\n\n\nprivate Object getHandler(MockHttpServletRequest request) throws Exception {\n    HandlerExecutionChain chain = null;\n\n    Map&lt;String, HandlerMapping&gt; map = applicationContext.getBeansOfType(HandlerMapping.class);\n    Iterator&lt;HandlerMapping&gt; itt = map.values().iterator();\n\n\n    while (itt.hasNext()) {\n        HandlerMapping mapping = itt.next();\n        chain = mapping.getHandler(request);\n        if (chain != null) {\n            break;\n        }\n    }\n\n    if (chain == null) {\n        throw new InvalidParameterException(\"Unable to find handler for request URI: \" + request.getRequestURI());\n    }\n\n    return chain.getHandler();\n   }\n}\n</code></pre>\n\n<p><br/>\n<strong>LoginController.java</strong></p>\n\n<pre><code>@Controller\n@SessionAttributes\n@RequestMapping(\"/\")\npublic class LoginController {\n\n    private static final Logger logger = LoggerFactory.getLogger(LoginController.class);\n\n    @Autowired\n    private AuthenticationService authenticationService;\n\n    @Autowired\n    private WloanInfoDao wloanInfoDao;\n\n    @Autowired\n    private UserProfile userProfile;\n\n\n    @RequestMapping(value = \"/\", method = RequestMethod.GET)\n    public String login() {\n\n            return \"login\";\n    }\n\n    @RequestMapping(value = \"/logout\", method = RequestMethod.GET)\n    public String logout() {\n            logger.info(\"Logout\");\n            return \"login\";\n\n    }\n\n    @RequestMapping(value=\"/authenticate\", method = RequestMethod.POST)\n    public String authenticate(@ModelAttribute(\"loginForm\") LoginForm loginForm, Map    model, HttpServletRequest request) throws AuthenticationException {\n            try {\n                    boolean authenticated = authenticationService.authenticate(loginForm.getUserName(), loginForm.getPassWord());\n\n                    if (authenticated) {\n                            userProfile.setUsername(loginForm.getUserName());\n                            userProfile.setAuthenticated(true);\n                            return \"redirect:search/\";\n                    }\n\n                    model.put(\"loginForm\", loginForm);\n                    request.setAttribute(\"errorMessage\",\"Invalid username or password.\");\n            } catch (AuthenticationException e) {\n                    logger.error(\"Error occurring during login: \" + e.getMessage(), e);\n                    throw new AuthenticationException(e);\n            }\n            return \"login\";\n            }\n\n             }\n</code></pre>\n\n<p><br/>\n<strong>AuthenticationService.java</strong>\n<br/></p>\n\n<pre><code> @Service(\"authenticationService\")\n public class AuthenticationService {\n\nprivate static final Logger logger =    LoggerFactory.getLogger(AuthenticationService.class);\nprivate static final String APPNAME = \"ULDD\";\n\npublic boolean authenticate(String username, String password) throws AuthenticationException {\n    try {\n        final ServiceConnectionInfo sci = new ServiceConnectionInfo();\n\n        PropertyManager props = new DbPropertyManager(APPNAME);\n\n        logger.info(\"Calling service authentication webservice: \" + props.getString(\"auth.url\"));\n        logger.info(\"Authentication user \" + username);\n\n        sci.setUrl(props.getString(\"auth.url\"));\n        sci.setUsername(props.getString(\"auth.username\"));\n        sci.setPassword(props.getString(\"auth.password\"));\n\n        final IServiceClient serviceClient = new Axis1ServiceClient(sci);\n        final AuthenticationServiceClient asc = new AuthenticationServiceClient(serviceClient, \"AuthenticationServiceClientTest\");\n\n        final AuthServiceResponse ret;\n\n        ret = asc.authenticate(username, password, AuthServiceRequest.Domain.INTERNAL, Arrays.asList(new String[] { APPNAME }));\n        ret.next();\n\n        return ret.isAuthenticated();\n\n    } catch (ServiceClientException e) {\n        throw new AuthenticationException(\"Error calling authentication service\", e);\n    } catch (Exception e) {\n        throw new AuthenticationException(\"Error authenticating username: \" + username, e);\n    }\n   }\n  }\n</code></pre>\n\n<p><br/>\n<strong>servlet-context.xml</strong></p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n &lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n   xmlns:p=\"http://www.springframework.org/schema/p\"\n   xmlns:context=\"http://www.springframework.org/schema/context\"\n   xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n   xmlns:aop=\"http://www.springframework.org/schema/aop\"\n   xmlns:tx=\"http://www.springframework.org/schema/tx\"\n   xsi:schemaLocation=\"\n   http://www.springframework.org/schema/beans\n   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n   http://www.springframework.org/schema/context\n   http://www.springframework.org/schema/context/spring-context-3.0.xsd\n   http://www.springframework.org/schema/mvc\n   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\n   http://www.springframework.org/schema/aop\n   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\n   http://www.springframework.org/schema/tx\n   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\"&gt;\n\n    &lt;!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure --&gt;\n\n    &lt;!-- Enables the Spring MVC @Controller programming model --&gt;\n    &lt;mvc:annotation-driven/&gt;\n\n    &lt;aop:aspectj-autoproxy proxy-target-class=\"true\"/&gt;\n\n    &lt;import resource=\"hibernate-context.xml\"/&gt;\n\n    &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory --&gt;\n    &lt;mvc:resources mapping=\"/media/**\" location=\"/media/\"/&gt;\n\n    &lt;!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory --&gt;\n    &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt;\n            &lt;property name=\"prefix\" value=\"/WEB-INF/views/\"/&gt;\n            &lt;property name=\"suffix\" value=\".jsp\"/&gt;\n    &lt;/bean&gt;\n    &lt;!-- Spring is retarded, --&gt;\n    &lt;bean class=\"org.springframework.beans.factory.config.CustomScopeConfigurer\"&gt;\n            &lt;property name=\"scopes\"&gt;\n                    &lt;map&gt;\n                            &lt;entry key=\"session\"&gt;\n                                    &lt;bean class=\"org.springframework.context.support.SimpleThreadScope\"/&gt;\n                            &lt;/entry&gt;\n                    &lt;/map&gt;\n            &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"multipartResolver\"\n          class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"&gt;\n\n            &lt;!-- one of the properties available; the maximum file size in bytes --&gt;\n            &lt;property name=\"maxUploadSize\" value=\"100000\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;context:component-scan base-package=\"com.everbank.uldd\" scoped-proxy=\"targetClass\"/&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["python","unit-testing","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12901941,"title":"How to properly make unit tests cleanup a socket","body":"<p>I've been working with some sockets lately, and while writing some unit test cases with a listening socket I repeatedly get <code>error: [Errno 98] Address already in use</code>.</p>\n\n<p>This is some example code that shows the error.</p>\n\n<pre><code>import unittest\nimport socket\n\nclass TestUnit(unittest.TestCase):\n    def setUp(self):\n        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        self.socket.bind((socket.gethostname(), 10000))\n        self.socket.listen(10)\n        self.addCleanup(self.clean)\n\n    def test_nothing(self):\n        self.assertEqual(False, False)\n\n    def test_something(self):\n        self.assertEqual(True, True)\n\n    def clean(self):\n        self.socket.close()\n</code></pre>\n\n<p>It seems to occur when one of the tests throw an exception. Without an exception it works as expected. But that kinda makes the test useless since all tests after the first that throws an exception also throw an exception.</p>\n"},{"tags":["c#","web-services","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12789391,"title":"Using Excel file to retrieve data for Unit testing c#","body":"<p>I am writing unit tests for web services testing. I have added a service reference to the C# unit tests solution and started consuming the classes in the web services for the testing. I have also added an Excel file to provide unit test values. </p>\n\n<p>Below is a example about what I was doing before  </p>\n\n<pre><code>[DataSource(\"System.Data.Odbc\"\n ,\"Dsn=Excel Files;dbq=|DataDirectory|\\\\TestData.xlsx;defaultdir=C:\\\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5\"\n ,\"Sheet1$\"\n ,DataAccessMethod.Sequential)\n ,DeploymentItem(\"TestProject1\\\\TestData.xlsx\")\n ,Owner(\"\")\n ,Description(\"\")\n ,TestMethod()]\npublic void test1()\n{\n    try\n    {\n        var Service = new Service.ServiceClient();\n        var Cid = testContextInstance.DataRow[\"CId\"].ToString();\n        var MNumber = testContextInstance.DataRow[\"MNumber\"].ToString();\n        var VID = testContextInstance.DataRow[\"VID\"].ToString();\n        var isVisit = new Service.ISVisit()\n        {\n            CID = Cid,\n            MNum = MNumber,\n            VCode = VID\n        };\n\n    var first = Service.Medis(isVisit).Cast&lt;Service.ISMedi&gt;().FirstOrDefault();\n    // Assert\n    Assert.AreEqual(\"12345678\", first.Proc.ProcID);\n    }\n    catch (Exception ex1)\n    {\n        if (ex1.InnerException != null)\n            Debug.WriteLine(ex1.InnerException.Message);\n        Assert.Fail(ex1.Message);\n    }\n}\n</code></pre>\n\n<p>This test1 has passed <code>.Medis()</code>, <code>IsVisit</code> are classes in the services. Until now I just had one row in the Excel file and I was able to retrieve the data and test it.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aqpIq.png\" alt=\"enter image description here\"></p>\n\n<p>But now the requirement is that if there are more than one row in the excel file, the unit test should loop through each row and test each row to see pass/fail.</p>\n\n<p><img src=\"http://i.stack.imgur.com/9MPVE.png\" alt=\"enter image description here\"></p>\n\n<p>Please Help me with this.How to loop through each row in the excel file in and check the test results.How to handle this situation in c# unitesting.Thank you</p>\n"},{"tags":["python","unit-testing","assertraises"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12889366,"title":"Exception statement not covered by self.assertRaises in python unit test cases","body":"<p>This is my function:</p>\n\n<pre><code>def get_value(request, param):\n  s = get_string(request, param)\n  value = re.search('(\\\\d\\\\d\\\\d\\\\d)-(\\\\d\\\\d)-(\\\\d\\\\d)', s)\n  if not value:\n    print 'match not found!'  \n    raise Exception('incorrect format: %s' % param)\n</code></pre>\n\n<p>test function:</p>\n\n<pre><code>def test_get_value(self):\n    m = test_mocks.HttpRequestMock(REQUEST = {'start_date': '2011.07.31'})\n    print '*************************'\n    print 'date format changed'\n    self.assertRaises(Exception, get_value, (m, 'start_date'))\n    print '*********************\n</code></pre>\n\n<p><code>get_value</code> doesn't print: <em>match not found</em>!</p>\n"},{"tags":["unit-testing","wicket","guice"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12762423,"title":"Wicket and Guice, injection in the webpage, and testabilitiy","body":"<p>I've been trying to get wicket and guice working together, more specifically injecting a facade (or a controller, whatever) into the webpage, with guice. The problem seems to be that I cannot do any other injection than field injection, in the webpage. If I try to use setter injection, the setter just doesn't get called. Constructor injection into the webpage doesn't seem to be possible (or I didn't find how). </p>\n\n<p>So, I seem to be left with field injection as the only possibility when injecting in the webpage.</p>\n\n<p>Can anybody, first of all, confirm that this is correct? I seem to have found on the site of apache that setter injection doesn't work as of wicket 1.5 (I'm on 6 by the way) but haven't found any more information about it.</p>\n\n<p>Secondly, if, indeed, it's only possible to do field injection in the webpage, how can I cleanly unit test field injection with guice? (I'm thinking about a mock test, all I need to know is that the facade in question is correctly called with the correct arguments after pressing a button, the facade itself can be tested in another unit test).</p>\n\n<p>Didn't supply any code, because the question seems to be rather basic. If needs be, I'll put in some snippets</p>\n\n<p>Kasper</p>\n"},{"tags":["php","unit-testing","phpunit","simpletest"],"answer_count":9,"favorite_count":23,"up_vote_count":64,"down_vote_count":0,"view_count":13278,"score":64,"question_id":34312,"title":"Simple test vs PHPunit","body":"<p>I was wondering if anyone that have experience in both these stuff can shed some light on the <em>significant</em> difference between the two, if any?</p>\n\n<p>Any specific strength of each that makes it suitable for any specific case?</p>\n"},{"tags":["objective-c","cocoa-touch","unit-testing","ios-simulator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12898655,"title":"iOS Simulator access test resources","body":"<p>I'm currently implementing some simple Unit Tests for my app.</p>\n\n<p>One simple Testcase is instantiating an AVAudioPlayer with a predefined file. This test works perfectly on the device. However if I use the Simulator to test the App, apparently an other folder structure is used, because the Test Resources are not copied to the tmp folder.</p>\n\n<p>This is the path used on the phone:</p>\n\n<pre><code>soundPath = [[NSString alloc] initWithFormat:@\"%@Tests.octest/%@\", NSTemporaryDirectory(), fileName];\n</code></pre>\n\n<p>I have implemented a simple check if I'm on the simulator:</p>\n\n<pre><code> if (TARGET_IPHONE_SIMULATOR)\n        soundPath = @\"\";\n    else\n      ...\n</code></pre>\n\n<p>So which path should I use if I'm on the Simulator? (I know I could use the hardcoded Path to the resource, but this project will run on different Computers, so I can't put it in there..)</p>\n\n<p>Thanks for your help...</p>\n"},{"tags":["c#",".net","unit-testing","pex"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":65,"score":6,"question_id":12880966,"title":"Can Pex automatically discover type overflow / underflow conditions?","body":"<p>Suppose there is a method like this (C#):</p>\n\n<pre><code>public static int Add(int x, int y)\n{\n    return x + y;\n}\n</code></pre>\n\n<p>If the sum does not fit into the <code>int</code> data type it is probably an error situation which is worth a unit test. Is Pex able to identify such errors and generate unit tests for those?</p>\n"},{"tags":["c#","unit-testing","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":126,"score":2,"question_id":12891229,"title":"How can you unit test ASP.NET Web API routing?","body":"<p>I'm trying to write some unit tests to ensure that requests made to my Web API are routed to the expected API controller action with the expected arguments.</p>\n\n<p>I've tried to create a test using the <code>HttpServer</code> class, but I get 500 responses from the server and no information to debug the problem.</p>\n\n<p>Is there a way to create a unit tests for the routing of an ASP.NET Web API site?</p>\n\n<p>Ideally, I'd like to create a request using <code>HttpClient</code> and have the server handle the request and pass it through the expected routing process.</p>\n"},{"tags":["unit-testing","moles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12896993,"title":"Moles framework: How does it drill through?","body":"<p>When Moles framework is used, it allows any function call to be mocked up. This is aquote from here: <a href=\"http://msdn.microsoft.com/en-us/library/ff798308.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ff798308.aspx</a></p>\n\n<blockquote>\n  <p>When execution enters a method, such as the DateTime.Now property\n  getter, the Moles framework checks to see whether the test class has\n  defined a detour for that method. If a detour is defined, the\n  framework redirects the call to the detour delegate. If a detour is\n  not defined, the call is directed to the real implementation of the\n  method.</p>\n</blockquote>\n\n<p>My question is: <em>How do you define a detour in the test class?</em></p>\n\n<p>FYI:\n<a href=\"http://stackoverflow.com/questions/3021797/how-moles-isolation-framework-is-implemented\">This</a> question addresses how Moles is internally implemented.</p>\n"},{"tags":["php","unit-testing","dependencies","legacy-code"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12896342,"title":"Unit testing legacy PHP class with heavy DB dependency","body":"<p>I am trying to implement some unit tests into a legacy PHP application.</p>\n\n<p>There have been a number of challenges with this, but in particular for this question, I am currently looking at a small class that manages the app config.</p>\n\n<p>The class interface is pretty simple; it does the following:</p>\n\n<ul>\n<li>The constructor calls a Populate method, that uses our Recordset class to load the config for the requested module from the database.</li>\n<li>Get method, which returns a specified config value.</li>\n<li>Set method, which sets the config value in memory.</li>\n<li>Save method, which writes the config update(s) back to the DB.</li>\n</ul>\n\n<p>Testing the Get/Set methods is straightforward; they map directly to private array, and work pretty much as you'd expect.</p>\n\n<p>The problem I have is with testing the database handling. The class uses a number of fields on the config table (module name, language, etc) to determine which config items to load and in what priority. In order to do so, it constructs a series of elaborate SQL strings, and then makes direct calls to the DB to get the correct config data.</p>\n\n<p>I have no idea how to go about writing a unit test for this. Aside from the Get/Set methods, the class consists pretty much entirely of building SQL strings and running them.</p>\n\n<p>I can't see a way to test it sensibly without actually running it against a real DB, and all the issues that go with that -- if nothing else, the complexity of the config loader would mean I'd need at least seven or eight test databases populated with slightly different config. It seems like it would be unmanageable and fragile, which would defeat the point somewhat.</p>\n\n<p>Can anyone suggest how I should proceed from here? Is it even possible to unit test this kind of class?</p>\n\n<p>Many thanks.</p>\n"},{"tags":["unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12895709,"title":"Coded UI Test Method failed inconsistently","body":"<p>The following exception failing my UI automation test.</p>\n\n<pre><code>Message: Test method\nCodedUITestMethod1 throw exception:\nThe playback failed to find the control with the given search properties. Additional Details:\n TechnologyName:  'UIA'\n ControlType:  'MenuItem'\n Name:  'MyViewModel' ---&gt; system.runtime.interopservices.comexception error hresult e_fail has been returned from a call to a COM component\n</code></pre>\n\n<p>please any one give me a solution for these type of exceptions.</p>\n"},{"tags":["unit-testing","testing","user-interface"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":364,"score":3,"question_id":8642846,"title":"Is it possible to run a CodedUI test with the screen locked?","body":"<p>I wrote a auto UI test project (using Coded UI framework) and deployed it on a server.<br/>\nI want to schedule the testing task, to run every night say 12:00.</p>\n\n<p>My problem is when the server is locked (the user is still logged on), it cannot run successfully and the error message is:</p>\n\n<blockquote>\n  <p>Automation engine is unable to playback the test because it is not\n  able to interact with the desktop.  This could happen if the computer\n  running the test is locked or it’s remote session window is minimized.</p>\n</blockquote>\n\n<p>Is there any way I can schedule the Coded UI test on the server too always run?</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","actioncontroller"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12894013,"title":"How can I test ActionController extensions within Rails 3.2?","body":"<p>I wrote an extension for ActionController::Base in Rails 3.2. Now I want to test it. But because the gem I created is no application it has neither specific controllers nor routes, so I cannot use \"get\" or \"post\" to call any action.<br>\nIs there any module which can create generic controllers on the fly (like <a href=\"https://github.com/nakajima/acts_as_fu\" rel=\"nofollow\">acts_as_fu</a> does with ActiveRecord models)? Or is there any testing pattern I can relate to?</p>\n\n<p>I have found this <a href=\"http://stackoverflow.com/questions/251225/how-to-test-controller-filters-in-ruby-on-rails-and-testunit\">article</a> which explains how to test a before_filter. So far so good although the solutions are to some extend heavy-weight or unclean.</p>\n\n<p>Edit: In particular I want to test an around_filter (if it works and if it redirects correctly) which is created by my extension.</p>\n\n<p>I'm looking forward to your answers.<br>\nThanks and kind regards.</p>\n"},{"tags":[".net","database","unit-testing","transactions"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":256,"score":2,"question_id":6258187,"title":"Using TransactionScope does not reseed identity column","body":"<p>I've started using <a href=\"http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx\" rel=\"nofollow\">TransactionScope</a> to help with my unit tests, in order to put my test database back to it's previous state. Using this with SpecFlow, I have a base class like so:</p>\n\n<pre><code>public class TransactionScopedFeature\n{\n    private TransactionScope Scope { get; set; }\n\n    [BeforeScenario]\n    public void BaseSetup()\n    {\n        this.Scope = new TransactionScope(TransactionScopeOption.RequiresNew);\n    }\n\n    [AfterScenario]\n    public void BaseCleanup()\n    {\n        if (this.Scope != null)\n        {\n            this.Scope.Dispose();\n        }\n    }\n}\n</code></pre>\n\n<p>All of the above works, in that when I add records to the database, when I then query the tables after the tests have finished, those tables are empty. Great stuff, and very clever indeed!</p>\n\n<p>My question relates to identity columns in these tables. What I've noticed is that, when I run my tests numerous times, the ID column of my test table increases by 1. I assumed that since the TransactionScope would rollback the changes, that the identity seed would also be rolled back.</p>\n\n<p>Am I wrong in making this assumption - is this just how databases work? If that is the case, I could also run a SQL script before each of my scenarios that does this:</p>\n\n<p><code>DBCC CHECKIDENT ('dbo.Items', reseed, 0)</code></p>\n\n<p>I just wanted to check in case I was doing something wrong, or this is normal database behaviour.</p>\n\n<p>Cheers.\nJas.</p>\n"},{"tags":["unit-testing","windows-phone-7"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12843487,"title":"Where is library Microsoft.Silverlight.Testing.dll in Silverlight Toolkit?","body":"<p>I am watching <a href=\"http://msdn.microsoft.com/en-us/hh849671.aspx\" rel=\"nofollow\">this video</a> about Silverlight unit tests. But I cannot find necessary libraries. Even if I install Silverlight Toolkit, Windows cannot find Microsoft.Silverlight.Testing.dll file.</p>\n\n<p>So where can I get it?</p>\n\n<hr>\n\n<p>Ok. <strong>Do not ever use Windows system to find a file</strong>! (I have Windows 7)\nI have wasted 2 hours finding solution in Internet! Never trust your Windows system :)</p>\n\n<p>File Microsoft.Silverlight.Testing.dll is here \n<strong>C:\\Program Files (x86)\\Microsoft SDKs\\Silverlight\\v5.0\\Toolkit\\dec11\\Testing</strong></p>\n\n<hr>\n\n<p>One more, very important thing. Windows Phone 7.1 uses Silverlight 4.0 and special Microsoft.Silverlight.Testing.dll for Windows Phone. So, if you want to develop Windows 7.1 application and have UT, you must use <a href=\"http://www.jeff.wilcox.name/2011/06/updated-ut-mango-bits\" rel=\"nofollow\">this</a></p>\n"},{"tags":["asp.net-mvc","unit-testing","c#-4.0","asp.net-mvc-4","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12889673,"title":"Write a Ninject test with mvc4","body":"<p>I am really new to ninject and testing too.</p>\n\n<p>I have an mvc4 application that I want to start writing tests for. (Yes I know I am meant to write them as I go:) )</p>\n\n<p>Within my NinjectWebCommon</p>\n\n<pre><code>  private static IKernel CreateKernel()\n    {\n        var kernel = new StandardKernel();\n        kernel.Bind&lt;Func&lt;IKernel&gt;&gt;().ToMethod(ctx =&gt; () =&gt; new Bootstrapper().Kernel);\n        kernel.Bind&lt;IHttpModule&gt;().To&lt;HttpApplicationInitializationHttpModule&gt;();\n\n        RegisterServices(kernel);\n        return kernel;\n    }\n\n    private static void RegisterServices(IKernel kernel)\n    {\n        kernel.Bind&lt;IConsumerRepository&gt;().To&lt;ConsumerRepository&gt;();\n    }\n</code></pre>\n\n<p>I have written everything in repository's within my application for example I have</p>\n\n<pre><code>public interface IConsumerRepository\n{\n    ConsumerModel GetConsumerByUserId(Guid userId);\n}\npublic ConsumerModel GetConsumerByUserId(Guid userId)\n    {\n        if (HttpContext.Current.Session[\"ConsumerInfo\"] == null)\n        {\n            var data = RestSharperHelper.GetById&lt;ConsumerModel&gt;(\"id\", userId, ApiEndPointConstants.GetConsumerById);\n            LogMessage(data.UserName);\n            HttpContext.Current.Session[\"ConsumerInfo\"] = data;\n            return data;\n        }\n        else\n        {\n            return (ConsumerModel)HttpContext.Current.Session[\"ConsumerInfo\"];\n        }\n    }\n</code></pre>\n\n<p>Whats the best way for me to write a test to check that a ConsumerModel is returned from web applications repository? I want it be flexible as in time I want to write more complicated tests and provide a mock ConsumerModel instead of calling the api like the above everytime</p>\n\n<p>Thank you for any suggestions!</p>\n"},{"tags":["python","regex","json","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":65,"score":-1,"question_id":12890652,"title":"check whether data is in json format or not in python","body":"<blockquote>\n  <p>This is my test class  and i am trying to unittest my method that is createaccount()</p>\n</blockquote>\n\n<pre><code>class CreateAccountTest1(unittest.TestCase):\n    def testCreateAccount_1(self,data):\n        text = \"{'user_id':'abc123','action':'add','names':['hello','world']}\"\n        regex = !(/[^,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]/.test(text.replace(/\"(\\\\.|   [^\"\\\\])*\"/ g, ''))) &amp;&amp; eval('(' + text + ')')\n        self.assertRegexpMatches(text, reg, 'my msg')\n</code></pre>\n\n<blockquote>\n  <p>createaccount() method is </p>\n</blockquote>\n\n<pre><code>class CreateAccountClass():\n    def CreateAccount(self,data):\n</code></pre>\n\n<p>Now i have to check whether the parameter of the <code>createaccount()</code> is in json format or not.</p>\n\n<p>if i pass <code>data=</code></p>\n\n<pre><code> { \"_id\" : \"user@gmail.com\", \"H_id\" : \"smsg0\", \"name\" : \"vish\", \"passwrd\" : \"xj45cd\" }\n</code></pre>\n\n<p>it should check whether it is json or not,\nand i am sure that this is in json format.\nnow in my method <code>createaccount()</code> it should check whether the <code>data</code> is in json format or not,\nif not it should print error message, if it works with <code>regex</code> ? or any suggestions,\nThanks, </p>\n"},{"tags":["unit-testing","teamcity","mspec"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12889051,"title":"Why do i get MissingMethodException when I use MSpec on my TeamCity build server?","body":"<p>Lately I've been having problems running my MSpec tests in the TeamCity build. This is happening on two different (unrelated) projects. Everything will work fine locally, but when the TeamCity build runs I get MissingMethodExceptions for some of the MSpec types.</p>\n\n<p>The build then goes on to run all 5 (so far) of my specs, <em>all of which pass</em>. the build fails though, because the step finishes with an error.</p>\n\n<p>If it makes any difference, I'm targetting .NET 4.5 and using mspec-clr4.exe to run the tests on the TeamCity server. I use MSpec 0.5.9 and use TeamCity's NuGet installer to pull it directly from NuGet. We're on TeamCity 7.1</p>\n\n<p>Here's my build step configuration\n<img src=\"http://i.stack.imgur.com/ldOFB.png\" alt=\"TeamCity build step configuration for MSpec test runner\"></p>\n\n<p>An here's a segment of the log file output:</p>\n\n<pre>[04:27:12]Step 3/4: Unit test and Code Coverage (MSpec) (47s)\n[04:27:12]Starting: C:\\BuildAgent\\plugins\\dotnetPlugin\\bin\\JetBrains.BuildServer.NUnitLauncher.exe #TeamCityImplicit\n[04:27:12]in directory: C:\\BuildAgent\\work\\13af8c5b6a6273c6\n[04:27:22]JetBrains dotCover Console Runner v2.0.425.72. Copyright (c) 2009-2012 JetBrains s.r.o. All rights reserved.\n[04:27:22]\n[04:27:39][JetBrains dotCover] Coverage session started [15/10/2012 04:25:58]\n[04:27:45]Running specifications.\n[04:27:47]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]\n\nSystem.MissingMethodException: No parameterless constructor defined for this object.\n   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)\n   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type, Boolean nonPublic)\n   at System.Activator.CreateInstance(Type type)\n   at Machine.Specifications.Explorers.AssemblyExplorer.CreateContextFrom(Type type)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.StartRun(IDictionary`2 contextMap)\n   at Machine.Specifications.Runner.Impl.DefaultRunner.RunAssembly(Assembly assembly)\n   at Machine.Specifications.Runner.Impl.AppDomainRunner.AssemblyRunner..ctor(ISpecificationRunListener listener, Assembly assembly, RunOptions options)\n[04:27:48]Running specifications in Tigra.Graffiti.Specifications\n[04:27:48]Tigra.Graffiti.Specifications (2s)\n[04:27:50]CalendarFunctions CSS based formatting, when building calendar day listitem > should produce expected html\n[04:27:50]CalendarFunctions CSS based formatting, when building calendar day listitem for event day > should produce html with event date css class\n[04:27:51]CalendarFunctions CSS based formatting, when building calendar day listitem for day with events > should produce html with hasEvents css class\n[04:27:51]CalendarFunctions CSS based formatting, when building calendar day listitem for day with events and is event date > should produce html with event date css class\n[04:27:51]CalendarFunctions CSS based formatting, when building calendar day listitem for day with events and events are included > should produce html with event date css class\n[04:27:51]Runner failure: System.Runtime.Serialization.SerializationException: Type is not resolved for member 'Machine.Specifications.Runner.RunOptions,Machine.Specifications, Version=0.5.9.0, Culture=neutral, PublicKeyToken=null'.\n[04:27:51]   at System.AppDomain.CreateInstanceAndUnwrap(String assemblyName, String typeName, Boolean ignoreCase, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes, Evidence securityAttributes)\n[04:27:51]   at Machine.Specifications.Runner.Impl.AppDomainRunner.CreateRunnerAndUnloadAppDomain(String runMethod, AppDomain appDomain, Assembly assembly, Object[] args)\n[04:27:51]Type is not resolved for member 'Machine.Specifications.Runner.RunOptions,Machine.Specifications, Version=0.5.9.0, Culture=neutral, PublicKeyToken=null'.\n[04:27:57][JetBrains dotCover] Coverage session finished [15/10/2012 04:26:16]\n[04:27:57][JetBrains dotCover] Analysed application exited with code '-1'</pre>\n"},{"tags":["objective-c","unit-testing","nsurlconnection","gh-unit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12888776,"title":"GHUnit test with async HTTP get action","body":"<p>I want to test async HTTP get action.</p>\n\n<pre><code>@interface Sender : NSObject&lt;NSURLConnectionDataDelegate, NSURLConnectionDelegate&gt;\n{\n    NSMutableData       *buffer;\n    NSString            *_html\n}\n\n- (void)getHtml;\n\n@end\n\n@implementation Sender\n\n- (void)getHtml\n{\n    NSString *urlstr = @\"http://www.yahoo.co.jp\";\n    NSURL *url = [NSURL URLWithString:urlstr];\n    NSURLRequest *request = [NSURLRequest requestWithURL:url];\n    NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self];\n    if (conn) {\n        buffer = [NSMutableData data];\n    } else {\n        // error handling\n    }\n}\n\n- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data\n{\n    [buffer appendData:data];\n}\n\n-(void)connectionDidFinishLoading:(NSURLConnection *)connection\n{\n    NSLog(@\"Succeed!! Received %d bytes of data\", [buffer length]);\n    _html = [[NSString alloc] initWithData:buffer encoding:NSUTF8StringEncoding];\n    NSLog(@\"%@\", _html);\n}\n\n@end\n</code></pre>\n\n<p>I have to let <code>_html</code> <strong>property</strong> ?</p>\n\n<pre><code>#import \"SenderTestCase.h\"\n#import \"Sender.h\"\n\n@implementation SenderTestCase\n\n- (void)setUpClass\n{\n    sender = [[Sender alloc] init];\n}\n\n- (void)testGetHtml\n{\n    [self prepare];\n    [sender getHtml];\n    [self performSelector:@selector(_succeedGetHtml) withObject:nil afterDelay:3.0];\n    [self waitForStatus:kGHUnitWaitStatusSuccess timeout:4.0];\n}\n\n- (void)_succeedGetHtml\n{\n    if (sender.html != nil) {\n        [self notify:kGHUnitWaitStatusSuccess forSelector:@selector(testGetHtml)];\n    };\n}\n\n@end\n</code></pre>\n\n<p>If there is more nice way, please tell me.\nThank you for your kindness.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12713156,"title":"How to separate TestCases by used storage?","body":"<p>I have a test for testing data model:</p>\n\n<pre><code>&lt;?php\nnamespace Tests\\Model\\SQL;\n\n/**\n * @group Model_Users\n * @group Model\n */\nclass UsersTest extends TestCase {\n\n/** @var Users */\nprivate $model;\n\npublic function setUp() {\n    parent::setUp();\n    $this-&gt;connection-&gt;execute( file_get_contents(\n        __DIR__ . '/fixtures/countries.sql' ) );\n    $this-&gt;model = new \\Users(\n        $this-&gt;connection\n    );\n}\n\n    public function testUserExists() {\n            $exists = $this-&gt;model-&gt;userExists( 'johndoe' );\n            $this-&gt;assertTrue( $exists );\n    }\n\n}\n</code></pre>\n\n<p>The <code>Tests\\Model\\SQL\\TestCase</code> uses <strong>SQLite</strong> as a database to keep tests as fast as possible.\nAnyway, as you may expect, SQLite is not the same database as <strong>Postgres</strong>, therefore there could be some specialites, which will fail on SQLite and pass on PostgreSQL and vice versa.</p>\n\n<p><strong>My question is</strong>:</p>\n\n<p>How to effectively (when keeping DRY in mind) design the architecture to be able to run tests only with SQLite and then only with Postgres.</p>\n\n<p>When I am saying <a href=\"http://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a>, I mean ideally case, when I write only one testcase for one model and the architecture of my tests will take care of that, so I will be able to run tests like this:</p>\n\n<pre><code>php tests/run.php --group=MockedDbWithSqlite # fast way, prefered, default\n\nphp tests/run.php --group=RealDb # slower way, but with more precise results\n</code></pre>\n"},{"tags":["php","wordpress","unit-testing","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12718974,"title":"PHPUnit 3.4.15, PHP 5.2.6, and the WordPress Core Tests - Will this even work?","body":"<ul>\n<li>PHP: 5.2.6</li>\n<li>PHPUnit: 3.4.15</li>\n<li>XAMPP Stack</li>\n<li>Windows 7</li>\n<li>User experience: Little to none</li>\n<li>Frustration level:  Severe</li>\n</ul>\n\n<p>Let me cut to the chase.  I'm trying to get the WordPress core tests to run, and they won't.  I'm not sure if its even possible with my versions... </p>\n\n<p>Here's what I've done so far:  I created a very simple test in test_unit.php:</p>\n\n<pre><code>require_once ('PHPUnit\\Framework.php');\nclass SimpleTest extends PHPUnit_Framework_TestCase\n{\n    public function testSomething()\n    {\n        $this-&gt;assertEquals(true, false);\n    }\n}\n</code></pre>\n\n<p>I run <code>phpunit test_unit.php</code> and it works (1 test, 1 assertion, 1 failure).</p>\n\n<p>I still have some confusion about how PHPUnit is included, and I think someone said it changed to an autoloader of some kind in a newer version.</p>\n\n<p>When I go to the wordpress tests folder, the directions say just run <code>phpunit</code> in that dir.  This does not work.  I've tried targeting specific files, using --configuration and --bootstrap flags to target those files specifically, and all that happens is the same thing:  It gives me 1 blank line, and then returns to the command prompt.</p>\n\n<p>Is there a specific file I need to include somewhere to get the WP test to run?  A more important question:  Will the WP tests even run w/ my outdated version of PHPUnit?</p>\n\n<p>Your help is greatly appreciated!</p>\n"},{"tags":["java","unit-testing","testng","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12886452,"title":"Making inherited getters to return mock objects","body":"<p>I want the inherited getters in class A to return Mock of MyObject. How can I do that without directly stubbing getMyObject() method in A (i.e. via using some MockBase class) ?</p>\n\n<pre><code>     public class Base {\n         @Autowired\n         private MyObject obj;\n         public MyObject getMyObject(){\n            return obj;\n         }\n     }\n\n\n    public class A extends Base {\n     @Autowired\n     private SomeObject xyz; \n\n     public void myMethod(){\n       MyObject  obj = getMyObject();\n       //do something here\n      }\n\n    }\n\n  public void MockBase {\n      @Mock\n      protected MyObject obj;\n\n      public MyObject getMyObject(){\n            return obj;\n      }\n  }\n\n  public class ATest extends MockBase  {\n    @InjectMocks\n    private A a;\n\n    @Mock\n    private SomeObject xyz;\n\n\n    @BeforeMethod\n    public void setUp(){\n        MockitoAnnotations.initMocks(this);\n    } \n\n    public void MyMethod_SomeCondition_ExpectedResult{\n       a.myMethod();\n    }\n   }\n</code></pre>\n"},{"tags":["android","unit-testing","testing","gps","integration-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12887035,"title":"How to test location based android app?","body":"<p>I've been working on an Android app that helps detect speed traps. It works a little like this:</p>\n\n<ul>\n<li>It gets the user's GPS location (speed and bearing too)</li>\n<li>It sends that to the server, and the server responds with a list of speed traps within a certain radius</li>\n<li>The application repeatedly sleeps and wakes up to get the user's lat and long only and then: \n<ul>\n<li>warns the user</li>\n<li>sleeps for some more time, or</li>\n<li>figures out that the traps are out of date and goes back to step 1</li>\n</ul></li>\n</ul>\n\n<p>The code is organized into \"modules\" that communicate with intents, i.e. there is a location services modules, a trap getting module, etc.</p>\n\n<p>The problem is that, while I know most of the individual modules work separately (communication with the server, location grabbing, direction calculations), I can't think of a way to test them all together besides just getting in my car and doing manual testing. </p>\n\n<p>I know there are some android testing frameworks out there that can mock locations but it seems like there are many states the app could be in at any time, how could I be sure that I would be testing all the corner cases?</p>\n\n<p>Any advice from experienced testers? How do you test long running applications that seem messy?</p>\n\n<p>My app code is all posted here: <a href=\"https://github.com/Android-CMD-Group/Radar-Detector\" rel=\"nofollow\">https://github.com/Android-CMD-Group/Radar-Detector</a></p>\n\n<p>My server code is here: <a href=\"https://github.com/Android-CMD-Group/Radar-Server-in-Python\" rel=\"nofollow\">https://github.com/Android-CMD-Group/Radar-Server-in-Python</a></p>\n"},{"tags":["unit-testing","maven-2","junit4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":416,"score":1,"question_id":8210269,"title":"Can't run single test method with maven","body":"<p>i know how to run <strong>Junit test class:</strong></p>\n\n<pre><code>mvn test -Dtest=classname\n</code></pre>\n\n<p>but when i tried to run a <strong>single unit test method</strong> as follows:</p>\n\n<pre><code>mvn test -Dtest=classname#methodname\n</code></pre>\n\n<p>i always get the error: that <strong>no test were executed</strong></p>\n\n<p>References:</p>\n\n<p><a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html\" rel=\"nofollow\">http://maven.apache.org/plugins/maven-surefire-plugin/examples/single-test.html</a>\nhttp://stackoverflow.com/questions/1873995/run-a-single-test-method-with-maven</p>\n\n<p>please advise why my test method is not getting execusted, i am using <strong>maven 2</strong> and <strong>junit 4.7</strong> .</p>\n"},{"tags":["java","unit-testing","maven-2"],"answer_count":8,"favorite_count":16,"up_vote_count":45,"down_vote_count":0,"view_count":20245,"score":45,"question_id":1873995,"title":"Run a single test method with maven","body":"<p>I know you can run all the tests in a certain class using:</p>\n\n<p>mvn test -Dtest=classname</p>\n\n<p>But I want to run an individual method and -Dtest=classname.methodname  doesn't seem to work.</p>\n\n<p>Thanks\n-Bill</p>\n"},{"tags":["linux","unit-testing","ioctl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12886772,"title":"Trapping ioctl()s on virtual filehandle","body":"<h2>Question:</h2>\n\n<p>How do I create a filehandle such that I could trap ioctl()s called on it?</p>\n\n<h2>Background:</h2>\n\n<p>I have code which pushes and pulls data to/from /dev/random on Linux using the RNDADDENTROPY ioctl. I wish to write unit tests for it.</p>\n\n<p>Now, the problem is, it doesn't make sense for me to feed data into the kernel entropy pool and then ask what the value is in that entropy pool; I have to expect that any number of other things might be pushing or pulling data on that pool. I'd <em>prefer</em> to have a stub filehandle I can provide the code, and then trap the ioctl() call the code uses to add the entropy.</p>\n\n<p>But how do I do that?</p>\n\n<p>Among other things, I have at my disposal \"The Linux Programming Interface\" and all the manpages one might expect to find on Gentoo, Debian or Ubuntu...so if there's a particular place in any of those I should read, I'd be happy for a pointer to dereference...</p>\n"},{"tags":["python","unit-testing","subclass"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12885748,"title":"Python TypeError when attempting to pass parameters to unittest subclass","body":"<p>I'm attempting to pass parameters to unittest subclass methods.  Please forgive my ignorance - I've only started coding in Python a few days ago.  I could obviously just hardcode the parameters in the subclass itself but that would eliminate its reuse with other username/password combos.  When I run run_tests.py below, I get the error \"TypeError: runTest() takes exactly 3 arguments (4 given)\". </p>\n\n<p>Here is run_tests.py:</p>\n\n<pre><code>from selenium import webdriver\nimport unittest\nfrom testcases import login\n\n\ndef my_suite():\n\n    suite = unittest.TestSuite()\n    suite.addTest (login.Login().runTest(\"username1\", \"password1\", \"page title\"))\n    return suite\n\n\nif __name__ == '__main__':\n    runner = unittest.TextTestRunner()\n    runner.run(my_suite())\n</code></pre>\n\n<p>Here is testcases/basetestcase.py:</p>\n\n<pre><code>from selenium import webdriver\nimport unittest\n\nclass BaseTestCase (unittest.TestCase):\n\ndef setUp(self):\n    self.driver = webdriver.Firefox()\n\n    self.driver.implicitly_wait(30)\n    self.base_url = \"http://website\"\n\ndef tearDown(self):\n    self.driver.quit()\n</code></pre>\n\n<p>Here is testcases/login.py</p>\n\n<pre><code>import common_page_elements\nfrom basetestcase import BaseTestCase\n\nclass Login (BaseTestCase):\n    def runTest(username, password, verification):\n        \"\"\" Test logging in. \"\"\"\n        driver = self.driver\n        driver.get(self.base_url)\n        driver.find_element_by_id(common_page_elements.textfield_username).clear()\n        driver.find_element_by_id(common_page_elements.textfield_username).send_keys(username)\n        driver.find_element_by_id(common_page_elements.textfield_password).clear()\n        driver.find_element_by_id(common_page_elements.textfield_password).send_keys(password)\n        driver.find_element_by_name(common_page_elements.button_submit).click()        \n\n        self.assertTrue(verification in self.driver.title)\n</code></pre>\n"},{"tags":["java","unit-testing","spring","spring-mvc","spring-annotations"],"answer_count":3,"favorite_count":6,"up_vote_count":7,"down_vote_count":0,"view_count":3673,"score":7,"question_id":2314377,"title":"Testing Spring @MVC annotations","body":"<p>I ran into a problem the other day where a @Valid annotation was accidentally removed from a controller class.  Unfortunately, it didn't break any of our tests.  None of our unit tests actually exercise the Spring <code>AnnotationMethodHandlerAdapter</code> pathway.  We just test our controller classes directly.</p>\n\n<p>How can I write a unit or integration test that will correctly fail if my @MVC annotations are wrong?  Is there a way I can ask Spring to find and exercise the relevant controller with a MockHttpServlet or something?</p>\n"},{"tags":["unit-testing","maven-plugin","maven-3","js-test-driver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":11433352,"title":"JsTestDriver - Missing artifact error","body":"<p>I'm trying to integrate <strong>JsTestDriver</strong> to <strong>Maven</strong> to test also my scripts before deploying.\nActually I follow up the steps described at Google Code <a href=\"http://code.google.com/p/jstd-maven-plugin/wiki/GettingStarted\" rel=\"nofollow\">here</a>. But unfortunately I'm not able to resolve dependency. Despite I added repository and plugin-repository to my Maven <strong>settings.xml</strong>, I still get error '<strong>Missing artifact com.googlecode.jstd-maven-plugin:jstd-maven-plugin:jar:1.3.2.5</strong>'. </p>\n\n<p>I'll be so happy if someone can corrent/guide me.</p>\n\n<p>Thanks in advance.</p>\n\n<p>With regards.</p>\n\n<p><strong>settings.xml</strong></p>\n\n<pre><code>// ..................\n&lt;repository&gt;\n    &lt;id&gt;jstd-maven-plugin google code repo&lt;/id&gt;\n    &lt;url&gt;http://jstd-maven-plugin.googlecode.com/svn/maven2&lt;/url&gt;\n&lt;/repository&gt;\n&lt;pluginRepository&gt;\n    &lt;id&gt;jstd-maven-plugin google code repo&lt;/id&gt;\n    &lt;url&gt;http://jstd-maven-plugin.googlecode.com/svn/maven2&lt;/url&gt;\n&lt;/pluginRepository&gt;\n// ..................\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>// ..................\n&lt;properties&gt;\n    &lt;jstd.version&gt;1.3.2.5&lt;/jstd.version&gt;\n&lt;/properties&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.jstd-maven-plugin&lt;/groupId&gt;\n    &lt;artifactId&gt;jstd-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${jstd.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;plugin&gt;\n&lt;groupId&gt;com.googlecode.jstd-maven-plugin&lt;/groupId&gt;\n&lt;artifactId&gt;jstd-maven-plugin&lt;/artifactId&gt;\n&lt;version&gt;${jstd.version}&lt;/version&gt;\n&lt;configuration&gt;\n    &lt;port&gt;9876&lt;/port&gt;\n    &lt;reset&gt;true&lt;/reset&gt;\n    &lt;verbose&gt;true&lt;/verbose&gt;\n    &lt;server&gt;localhost:9876&lt;/server&gt;\n    &lt;runnerMode&gt;INFO&lt;/runnerMode&gt;\n    &lt;config&gt;src/test/resources/jsTestDriver.conf&lt;/config&gt;\n    &lt;jar&gt;src/test/resources/JsTestDriver-1.3.4.b.jar&lt;/jar&gt;\n&lt;/configuration&gt;\n&lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;run-tests&lt;/id&gt;\n        &lt;phase&gt;test&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;test&lt;/goal&gt;\n        &lt;/goals&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n&lt;/plugin&gt;\n// ..................\n</code></pre>\n"},{"tags":["unit-testing","apache-mina"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12097634,"title":"Unit testing of an apache mina client","body":"<p>I have a mina client whose connector is a NioSocketConnector. I have written integration tests of this client with real server. However, I could not find a way to do <strong>unit tests</strong>. For example, I want to test my custom decoder and encoder works correctly without opening a real socket. And, I want to test my messages are queued correctly in the buffer etc.</p>\n\n<p>I found a DummySession class for testings but I am not sure if this class is enough for a complete unit testing of the client.</p>\n\n<p>Mina suggests unit testing is easy with it so I really wonder how can I do this. Please help with your ideas or links to sample code.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":12880726,"title":"How do you write your unit tests?","body":"<p>Do you follow any specific naming conventions? How do you structure your tests? Do you use nested test fixtures or just a flat structure? Do you have one test class per class to test? <em>Why</em> do you write them like this?</p>\n"},{"tags":["java","hibernate","unit-testing","hsqldb","schemaexport"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12867383,"title":"Hsqldb errors during SchemaExport using Hibernate 4.1","body":"<p>How do I get rid of these errors below when running Hibernate's SchemaExport? It doesn't seem to cause a problem actually - my tests still run just fine - but I don't like seeing the errors and having to scroll down a lot just to see what went wrong with a test.</p>\n\n<p>Is there any way to get rid of them - by either solving the error or just making it quiet?</p>\n\n<pre><code>17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588CBB8DB5\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C5885AC11C60\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C58841979673\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588430DFF29\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588B6909BE1\n17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK\n17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table comment drop constraint FK38A5EE5FCBB8DB5\n</code></pre>\n"},{"tags":["java","unit-testing","reflection","junit"],"answer_count":4,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2746,"score":5,"question_id":1230706,"title":"running a subset of JUnit @Test methods","body":"<p>We're using JUnit 4 to test: we have classes that don't are a subclass of <code>TestCase</code>, and they have public methods annotated with <code>@Test</code>. We have one file with many <code>@Test</code> methods. It would be nice to be able to run a subset of them via Ant from the command line, in the style of this recipe for JUnit 3:</p>\n\n<pre><code>ant runtest -Dtest=MyTest -Dtests=testFoo,testBar\n</code></pre>\n\n<p><a href=\"http://today.java.net/pub/a/today/2003/09/12/individual-test-cases.html\" rel=\"nofollow\">http://today.java.net/pub/a/today/2003/09/12/individual-test-cases.html</a></p>\n\n<p>I've been trying to think of ways to achieve this with Java reflection, etc. Since there doesn't seem to be any way to \"hide\" <code>@Test</code> methods or remove their annotations at runtime, the only option seems to be using the ClassLoader's <code>defineClass</code> method, which seems quite difficult.</p>\n\n<p>P.S. The Right Thing in this situation would be to split up the file, but are there alternatives?</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["performance","spring","hibernate","unit-testing","dbunit"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":143,"score":2,"question_id":12876278,"title":"Improving performance of database tests using Spring 3.1, Hibernate 4.1, Dbunit, etc","body":"<p>I'm currently starting a new project, and I've got around 190 repository tests. One thing I've noticed - and I am not entirely sure why this happening - is that the integration tests against HSQLDB (2.2.8) are running a lot slower than I think they should be.</p>\n\n<p>I think I've tracked the bottleneck to the insertion of data before each test. For most tests, it ranges from .15 to .38 seconds just to setup the database. This is unacceptable. I would have imagined that an in-memory database would be much faster :(</p>\n\n<p>Here is the database test class that all of my repository tests extend from:</p>\n\n<pre><code>@ContextConfiguration(locations = {\"classpath:applicationContext.xml\"})\n@RunWith(SpringJUnit4ClassRunner.class)\n@TransactionConfiguration(defaultRollback=true)\n@Transactional\npublic abstract class DatabaseTest {\n\n    public static final String TEST_RESOURCES = \"src/test/resources/\";\n\n    @Autowired\n    protected SessionFactory sessionFactory;\n\n    @Autowired\n    protected UserRepository userRepository;\n\n    @Autowired\n    protected DataSource dataSource;\n\n    protected IDatabaseTester databaseTester;\n\n    protected Map&lt;String, Object&gt; jdbcMap;\n    protected JdbcTemplate jdbcTemplate;\n\n    @PostConstruct\n    public void initialize() throws SQLException, IOException, DataSetException {\n        jdbcTemplate = new JdbcTemplate(dataSource);\n\n        setupHsqlDb();\n\n        databaseTester = new DataSourceDatabaseTester(dataSource);\n        databaseTester.setSetUpOperation(DatabaseOperation.CLEAN_INSERT);\n        databaseTester.setTearDownOperation(DatabaseOperation.NONE);\n        databaseTester.setDataSet(getDataSet());\n    }\n\n    @Before\n    public void insertDbUnitData() throws Exception {\n        long time = System.currentTimeMillis();\n\n        databaseTester.onSetup();\n\n        long elapsed = System.currentTimeMillis() - time;\n        System.out.println(getClass() + \" Insert DB Unit Data took: \" + elapsed);\n    }\n\n    @After\n    public void cleanDbUnitData() throws Exception {\n        databaseTester.onTearDown();\n    }\n\n    public IDataSet getDataSet() throws IOException, DataSetException {\n        Set&lt;String&gt; filenames = getDataSets().getFilenames();\n\n        IDataSet[] dataSets = new IDataSet[filenames.size()];\n        Iterator&lt;String&gt; iterator = filenames.iterator();\n        for(int i = 0; iterator.hasNext(); i++) {\n            dataSets[i] = new FlatXmlDataSet(\n                new FlatXmlProducer(\n                    new InputSource(TEST_RESOURCES + iterator.next()), false, true\n                )\n            );\n        }\n\n        return new CompositeDataSet(dataSets);\n    }\n\n    public void setupHsqlDb() throws SQLException {\n        Connection sqlConnection = DataSourceUtils.getConnection(dataSource);\n        String databaseName = sqlConnection.getMetaData().getDatabaseProductName();\n        sqlConnection.close();\n\n        if(\"HSQL Database Engine\".equals(databaseName)) {\n            jdbcTemplate.update(\"SET DATABASE REFERENTIAL INTEGRITY FALSE;\");\n\n            // MD5\n            jdbcTemplate.update(\"DROP FUNCTION MD5 IF EXISTS;\");\n            jdbcTemplate.update(\n                \"CREATE FUNCTION MD5(VARCHAR(226)) \" +\n                    \"RETURNS VARCHAR(226) \" +\n                    \"LANGUAGE JAVA \" +\n                    \"DETERMINISTIC \" +\n                    \"NO SQL \" +\n                    \"EXTERNAL NAME 'CLASSPATH:org.apache.commons.codec.digest.DigestUtils.md5Hex';\"\n            );\n        } else {\n            jdbcTemplate.update(\"SET foreign_key_checks = 0;\");\n        }\n    }\n\n    protected abstract DataSet getDataSets();\n\n    protected void flush() {\n        sessionFactory.getCurrentSession().flush();\n    }\n\n    protected void clear() {\n        sessionFactory.getCurrentSession().clear();\n    }\n\n    protected void setCurrentUser(User user) {\n        if(user != null) {\n            Authentication authentication = new UsernamePasswordAuthenticationToken(user,\n                user, user.getAuthorities());\n\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n    }\n\n    protected void setNoCurrentUser() {\n        SecurityContextHolder.getContext().setAuthentication(null);\n    }\n\n    protected User setCurrentUser(long userId) {\n        User user = userRepository.find(userId);\n\n        if(user.getId() != userId) {\n            throw new IllegalArgumentException(\"There is no user with id: \" + userId);\n        }\n\n        setCurrentUser(user);\n\n        return user;\n    }\n\n    protected User getCurrentUser() {\n        return (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n    }\n\n}\n</code></pre>\n\n<p>Here is the relevant beans on my application context:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n    &lt;property name=\"locations\" value=\"classpath:applicationContext.properties\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"\n      destroy-method=\"close\"&gt;\n    &lt;property name=\"driverClass\" value=\"${database.driver}\"/&gt;\n    &lt;property name=\"jdbcUrl\" value=\"${database.url}\"/&gt;\n    &lt;property name=\"user\" value=\"${database.username}\"/&gt;\n    &lt;property name=\"password\" value=\"${database.password}\"/&gt;\n    &lt;property name=\"initialPoolSize\" value=\"10\"/&gt;\n    &lt;property name=\"minPoolSize\" value=\"10\"/&gt;\n    &lt;property name=\"maxPoolSize\" value=\"50\"/&gt;\n    &lt;property name=\"idleConnectionTestPeriod\" value=\"100\"/&gt;\n    &lt;property name=\"acquireIncrement\" value=\"2\"/&gt;\n    &lt;property name=\"maxStatements\" value=\"0\"/&gt;\n    &lt;property name=\"maxIdleTime\" value=\"1800\"/&gt;\n    &lt;property name=\"numHelperThreads\" value=\"3\"/&gt;\n    &lt;property name=\"acquireRetryAttempts\" value=\"2\"/&gt;\n    &lt;property name=\"acquireRetryDelay\" value=\"1000\"/&gt;\n    &lt;property name=\"checkoutTimeout\" value=\"5000\"/&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"sessionFactory\"\n      class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;...&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"namingStrategy\"&gt;\n        &lt;bean class=\"org.hibernate.cfg.ImprovedNamingStrategy\"/&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2ddl.auto}\n            &lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;false&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.show_sql\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.cache.use_second_level_cache\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.cache.provider_class\"&gt;\n\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean class=\"org.springframework.orm.hibernate4.HibernateExceptionTranslator\"/&gt;\n\n&lt;bean id=\"transactionManager\"\n      class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>In order to try and insert less data, I allow each test class to pick a DataSet enum that only loads the data it needs. It's specified like this:</p>\n\n<pre><code>public enum DataSet {\n    NONE(create()),\n    CORE(create(\"core.xml\")),\n    USERS(combine(create(\"users.xml\"), CORE)),\n    TAGS(combine(create(\"tags.xml\"), USERS)),\n</code></pre>\n\n<p>Could this be causing it to run slower rather than faster? The idea is that if I only want the core xml (languages, provinces, etc.), I only have to load those records. I thought this would make the test suite faster, but it's still too slow.</p>\n\n<p><strong>I can save some time by creating a separate xml dataset specifically designed for each test class. This chops out some of the insert statements. But even when I have 20 insert statements in a single xml dataset (thus, the minimum I/O loss other than in-lining the dataset right into java code directly), each test still takes .1 to .15 seconds during the initialization of the database data!</strong> I am in disbelief that it takes .15 seconds to insert 20 records into memory.</p>\n\n<p>In my other project using Spring 3.0 and Hibernate 3.x, it takes 30 milliseconds to insert everything before each test, but it's actually inserting 100 or more rows per test. For the tests that only have 20 inserts, they are flying as if there was no delay at all. This is what I expected. I'm starting to think the problem is with Spring's annotations - or the way I have them setup in my <code>DatabaseTest</code> class. This is basically the only thing different now.</p>\n\n<p>Also, my repositories are using the sessionFactory.getCurrentSession() instead of the HibernateTemplate. This is the first time I started using the annotation-based unit test stuff from Spring, since the Spring test classes are deprecated. Could that be the reason they are going slow?</p>\n\n<p>If there's anything else you need to know to help figure it out, please let me know. I am sort of stumped.</p>\n\n<p>EDIT: I put in the answer. The problem was hsqldb 2.2.x. Reverting to 2.0.0 fixes the problem.</p>\n"},{"tags":["unit-testing","testing","random","tdd","fractals"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":12877260,"title":"Unit testing algorithms that involve random numbers","body":"<p>I'm writting some code about fractals and random terrain generation. Specifically, I'm using the Diamond-Square algorithm as of now. For those of you who don't know, it basically obtains the average of four values, and adds a random number, every step. How wouldI go about testing the result? Should I use a known seed and calculate by hand the average plus the random value, or what? Should I, instead, calculate the result in the code, using the random numbers? Or is there another way? Also, some thought on the reverse process (a.k.a. TDD, writting tests before code) would be much appreciated).</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12875337,"title":"How do I make it so I can write unit tests for this code that relies on System.Random?","body":"<p>The below code lives in an instance class with no constructor, I don't know from where to start writing unit tests for it.</p>\n\n<p><em>E.g price is \"2/9\" so secondPart is 9</em> also the _random is an object of Random class</p>\n\n<pre><code>    public string RefreshPrice(string price, out bool isUpOrDown, out bool isChanged)\n    {\n        if (string.IsNullOrEmpty(price))\n        {\n            isUpOrDown = false;\n            isChanged = false;\n            return price;\n        }\n\n        int secondPart;\n        string[] priceParts = price.Split('/');\n        int newPrice = 0;\n        if(int.TryParse(priceParts[1], out secondPart))\n        {\n            newPrice = secondPart &gt;= 2 ? _random.Next(2, 20) : 2;\n        }\n\n        isUpOrDown = (newPrice &gt; secondPart);\n        isChanged = (newPrice != secondPart);\n\n        secondPart = newPrice;\n        return string.Format(\"{0}/{1}\", priceParts[0], secondPart);\n    }\n</code></pre>\n"},{"tags":["ios","unit-testing","xcode4","ocunit","sentestingkit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":107,"score":1,"question_id":11832473,"title":"iOS Application Test static library initialization","body":"<p>I'm trying to write tests for an iOS app with a legacy C++ library dependency. The legacy library has initialization routines and static variables that must be run/set once per app cycle.</p>\n\n<p>I've created a test target that is working correctly. My test target is set to use my app as a Test Host through the Bundle Loader. This launches the iOS app and then uses [SenTestCase invoke test] to run the tests. Given this setup, I am hoping to let the app initialize the library and let the tests run in a \"library already initialized\" state. This seems to fit the Apple Application Test paradigm. However, the legacy libraries' static variables initialized during app launch are NULL when the tests are run. There is no user code that would reset the variables.</p>\n\n<p>I am expecting my Application Tests to be able to access my app's static variables. Is there something I can configure to allow this? Am I missing something?</p>\n\n<hr>\n\n<p>To clarify, the troublesome static variables are in the linked c++ library. The app and unit tests do not seem to share the same application scope.</p>\n"},{"tags":["c#","asp.net","unit-testing","moq"],"answer_count":3,"favorite_count":2,"up_vote_count":16,"down_vote_count":0,"view_count":7344,"score":16,"question_id":2416362,"title":"Mock static property with moq","body":"<p>I am pretty new to use <a href=\"http://code.google.com/p/moq/\" rel=\"nofollow\">moq</a>. I am into creating some unit test case to <code>HttpModule</code> and everything works fine until I hit a <code>static</code> property as follows           </p>\n\n<pre><code>this.applicationPath = (HttpRuntime.AppDomainAppVirtualPath.Length &gt; 1) ? HttpRuntime.AppDomainAppVirtualPath : String.Empty;\n</code></pre>\n\n<p>I do not know how create mocks for <code>static</code> class and property like <code>HttpRuntime.AppDomainAppVirtualPath</code>. The <code>context</code>, <code>request</code> and <code>response</code> have been mocked well with sample code I get from moq.  I will appreciate if somebody can help me on this.</p>\n\n<p>Thanks in advance.  </p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answer_count":2,"favorite_count":9,"up_vote_count":29,"down_vote_count":1,"view_count":30573,"score":28,"question_id":2276271,"title":"How to make mock to void methods with mockito","body":"<p>How to make  mock  void  methods.I performed  observer pattern but i cant mock  with mockito because i dont know the  mock way with  mockito.And i search from the internet i cant find properly sample.\nMy class  looks like</p>\n\n<pre><code>public class World{\n\n    List&lt;Listener&gt; listeners;\n    void addListener(Listener item)\n    {\n        listeners.add(item);\n    }\n    void doAction(Action goal,Object obj){\n        setState(\"i received\");\n        goal.doAction(obj);\n        setState(\"i finished\");\n    }\n    private string state;\n    //setter getter state\n} \n\npublic class WorldTest implements Listener{\n\n    @Test public void word{\n    World  w= mock(World.class);\n    w.addListener(this);\n    ...\n    ...\n\n    }\n}\n\ninterface Listener{\n    void doAction();\n}\n</code></pre>\n\n<p>The system are not triggered with mock. =(\nI want to show abovementioned system state. and i make   assertion according to them.\nPls  show me some  way for solving this problem...</p>\n"},{"tags":["java","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12860657,"title":"Unit testing \"glue\" code or code without any real logic","body":"<p>My question will be at the hand of a simplified example (in Java):</p>\n\n<pre><code>public class VehicleRepository {\n  // DAOs responsible for fetching objects from data store (injected)\n  private IChassisDAO chassisDAO;\n  private IEngineDAO engineDAO;\n  private IWheelDAO wheelDAO;\n  private IAccessoryDAO accessoryDAO;\n\n  public Vehicle getLuxuryCar() {\n    VehicleBuilder builder = getVehicleBuilder();\n    builder.setChassis(chassisDAO.findBySize(ChassisSize.NORMAL));\n    builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));\n    builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.NORMAL));\n    builder.setAccessories(accessoryDAO.findByType(Accessory.LUXURY));\n    return builder.build();\n  }\n\n  public Vehicle getOffroadCar() {\n    VehicleBuilder builder = getVehicleBuilder();\n    builder.setChassis(chassisDAO.findBySize(ChassisSize.LARGE));\n    builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));\n    builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.LARGE));\n    return builder.build();\n  }\n\n  // Similar operations ...\n}\n</code></pre>\n\n<p>How would you go about unit testing this class?\nI've thought on this for a bit, and I've identified a few options:</p>\n\n<p><strong>Test against the returned Vehicle without mocking the builder</strong><br>\nFrom an interface perspective this is the best option, but it won't be an isolated unit test on VehicleRepository. I can't see any real advantage to testing the VehicleRepository along with the VehicleBuilder as opposed to only testing the VehicleBuilder. The VehicleBuilder might also have complex logic (such as checks against which Accessories are present), which leads to multiple execution paths and which would make VehicleRepository's test very complex.</p>\n\n<p><strong>Refactor the code in order to test the state of the builder</strong><br>\nAn example would be splitting the getLuxuryCar operation into two operations:</p>\n\n<pre><code>public Vehicle getLuxuryCar() {\n  VehicleBuilder builder = getLuxuryCarBuilder();\n  return builder.build();\n}\n\n// Visible for testing in the same package\nprotected VehicleBuilder getLuxuryCarBuilder() {\n  VehicleBuilder builder = getVehicleBuilder();\n  builder.setChassis(chassisDAO.findBySize(ChassisSize.NORMAL));\n  builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));\n  builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.NORMAL));\n  builder.addAccessory(accessoryDAO.findByType(Accessory.LUXURY));\n  return builder;\n}\n</code></pre>\n\n<p>I prefer the state testing to behaviour testing, and the test will probably be more resilient, but I'm not very fond of the resulting code (especially the getLuxuryCar() method which doesn't really do anything).</p>\n\n<p><strong>Mock the VehicleBuilder and test the behaviour</strong><br>\nI believe that such a unit test will just be a replica of the actual operation being tested, and won't add any real benefit. It would also be very fragile and completely dependent on the internals of the operation being tested. A likely unit test (using JMock) would be something like:</p>\n\n<pre><code>@Test\npublic void shouldBuildLuxuryCar() {\n  context.checking(new Expectations() {{\n    oneOf(chassisDAOmock).findBySize(ChassisSize.NORMAL);\n    oneOf(vehicleBuilderMock).setChassis(with(any(Chassis.class)));\n\n    oneOf(engineDAOmock).findByPower(EnginePower.HIGH);\n    oneOf(vehicleBuilderMock).setEngine(with(any(Engine.class)));\n\n    oneOf(wheelDAOmock).findBySize(WheelSize.NORMAL));\n    oneOf(vehicleBuilderMock).setWheelTemplate(with(any(Wheel.class)));\n\n    oneOf(accessoryDAOmock).findByType(Accessory.LUXURY));\n    oneOf(vehicleBuilderMock).setAccessories(with(any(Set.class)));\n\n    oneOf(vehicleBuilderMock).build();\n  }});\n\n  context.assertIsSatisfied();\n}\n</code></pre>\n\n<p><strong>Don't unit test it</strong><br>\nI'm leaning towards this option as I'm not happy with any of the alternatives, and as the operations don't seem to really require any testing. To clarify, I'll still unit test the VehicleBuilder in isolation, but not the VehicleRepository. This doesn't seem to be the prevailing opinion however, as can be seen for example with this question: <a href=\"http://stackoverflow.com/questions/1316848/unit-testing-what-not-to-test\">Unit Testing - What not to test</a></p>\n"},{"tags":["asp.net-mvc-3","unit-testing","entity-framework-4.1","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12863452,"title":"ASP.NET MVC 3 - Unit Test in Respository","body":"<p>I'm using a class test that checks login entity that is being done correctly, but an error occurs that does not seem to return the query in the database, but the application developed in ASP.NET MVC 3 Code First query returns data, I would to know what is wrong and what can be done to solve it.</p>\n\n<p>Upon return of the query gives the following message in the variable:\n<strong><em>\"Enumeration yielded no results\"</em></strong></p>\n\n<p>Test Method:</p>\n\n<pre><code>[TestMethod()]\npublic void efetuarLoginTest()\n{\n            EntidadeRepository target = new EntidadeRepository();\n            string cnpj = \"12345678\";\n            string senha = \"lalado\";\n            Entidade expected = null; // TODO: Initialize to an appropriate value\n            Entidade actual;\n            actual = target.efetuarLogin(cnpj, senha);\n            Assert.AreNotEqual(expected, actual);\n}\n</code></pre>\n\n<p>Method repository of the entity with the task of returning to the login query:</p>\n\n<pre><code>public Entidade efetuarLogin(string cnpj, string senha)\n        {\n\n            var consulta = from usu in bd.Entidades\n                           where usu.cnpj == cnpj &amp;&amp; usu.senha == senha\n                           select usu;\n\n            if (consulta.Count() &gt; 0)\n            {\n                Entidade e = new Entidade();\n                e.id_entidade = consulta.First().id_entidade;\n                e.razao_social = consulta.First().razao_social;\n                e.cnpj = consulta.First().cnpj;\n                e.senha = consulta.First().senha;\n\n                return e;\n            }\n            else\n            {\n                return null;\n            }\n        }\n</code></pre>\n\n<p>Class persistence database using the Entity Framework 4.1:</p>\n\n<pre><code>internal class BancoDados: DbContext\n    {\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;System.Data.Entity.ModelConfiguration.Conventions.PluralizingEntitySetNameConvention&gt;();\n            modelBuilder.Conventions.Remove&lt;System.Data.Entity.ModelConfiguration.Conventions.PluralizingTableNameConvention&gt;();\n\n            base.OnModelCreating(modelBuilder);\n        }\n\n        public DbSet&lt;Entidade&gt; Entidades { get; set; }\n        public DbSet&lt;Estado&gt; Estados { get; set; }\n        public DbSet&lt;Administrador&gt; Administradores { get; set; }\n        public DbSet&lt;Leilao&gt; Leiloes { get; set; }\n        public DbSet&lt;Lance&gt; Lances { get; set; }\n    }\n</code></pre>\n\n<p>Thank You.</p>\n"},{"tags":["unit-testing","moles","microsoft-fakes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":217,"score":0,"question_id":12017711,"title":"Moles/Fakes: How do I implement a test setup?","body":"<p>I have been recently working with Moles and I am now switching to Fakes. In my old test project I had a test setup, which looked like this:</p>\n\n<pre><code>[TestInitialize]\npublic void Setup()\n{\n    //...\n}\n</code></pre>\n\n<p>In there I did some necessary setup just like setting up some of my moles objects. </p>\n\n<p>A test method in moles looked somehow like that (with also the [HostType(\"Moles\")] specifying that it uses the moles objects.</p>\n\n<pre><code>[TestMethod]\n[HostType(\"Moles\")]\npublic void MolesTestMethod()\n{\n    //...\n}\n</code></pre>\n\n<p>Now, in Fakes they do not use the HostType Attribute anymore. Instead they use a ShimsContext in which you can use your \"mocked\" classes. It looks somehow like this:</p>\n\n<pre><code>[TestMethod]\npublic void FakesTestMethod()\n{\n    using (ShimsContext.Create())\n    {\n        //...\n    }\n}\n</code></pre>\n\n<p>If you do not use this context you might end up with an error message. It basically says that there was an ShimInvalidOperationException in the FakesTestMethod and you have to use the ShimsContext.Create() in the way described below)</p>\n\n<pre><code>-- C#:\nusing Microsoft.QualityTools.Testing.Fakes;\n\nusing(ShimsContext.Create())\n{\n    // your test code using Shims here\n}\n\n-- VisualBasic.NET\nImports Microsoft.QualityTools.Testing.Fakes\n\nUsing ShimsContext.Create\n    ' your test code using Shims here\nEnd Using  \n</code></pre>\n\n<p>So I tried to put my setup calls into that context and ended up with something like this:</p>\n\n<pre><code>[TestInitialize]\npublic void Setup()\n{\n    using(ShimsContext.Create())\n    {\n        //...\n    }\n}\n</code></pre>\n\n<p>Now, if I use this context in my Setup method, all the setup that is done there, will run out of context afterwards and will not be valid anymore when the unit tests are actually about to run, which is not really what I want from a test setup method.</p>\n\n<p>I fixed this issue by putting the using inside the test method itself and just call a private setup method right inside this context and before the test code. This setup method now does all the handling, which before the [TestInitialize] setup method did. The code looks somehow like this:</p>\n\n<pre><code>[TestMethod]\npublic void PerformActionFromConfigActionStateActionIdIsSet()\n{\n    using (ShimsContext.Create())\n    {\n        Setup();\n\n        //...\n    }\n}\n</code></pre>\n\n<p>My problem with this issue is now, that this solution completely \"kills\" the idea of the [TestInitialize] setup method. I have to duplicate this code into EACH test method and the most important part: the objects created in this Setup() method will be created and destroyed for EACH test, which is not ideal at all!</p>\n\n<p>Is there any other way to setup test data in Fakes? Any help is appreciated!</p>\n"},{"tags":["unit-testing","testing","nunit","monodevelop"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":981,"score":8,"question_id":4868276,"title":"How to debug unit test with MonoDevelop?","body":"<p>I have MonoDevelop 2.4.2 on OSX. I have a failing unit test that I would like to debug. Is there a way to do it? I found a <a href=\"http://lists.ximian.com/pipermail/monodevelop-list/2009-July/010039.html\">reference</a> on MonoDevelop mailing list but my version  does not have mentioned option. </p>\n\n<p>Am I missing something?</p>\n"},{"tags":["python","unit-testing","gdb","pretty-print"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12870256,"title":"How can I unit test a GDB pretty-printer written in Python?","body":"<p>I have written a pretty-printer using the GDB Python interface for a (C) struct that has a tendency to change between software releases. Since the format is fluctuating I have tried to make the printer dynamic enough to adapt and always try to print something useful instead of throwing a Python exception.</p>\n\n<p>Right now there are two major formats that I need to support but there is likely to be a few more in the future. I would like to write some unit tests for the printer to avoid having to manually load coredumps from different releases to test it.</p>\n\n<p>I thought that maybe I could serialize the gdb.Value from within a debugging session and load them in my unit tests but I wasn't able to do it (pickle didn't work with gdb.Value). The core-dumps are really large so storing them with the pretty-printer and script GDB for the tests is not an option.</p>\n\n<p>How can I unit-test my pretty printer without keeping huge core-dumps around?</p>\n"},{"tags":["c#",".net","unit-testing","tdd","bdd"],"answer_count":7,"favorite_count":1,"up_vote_count":17,"down_vote_count":0,"view_count":531,"score":17,"question_id":12846428,"title":"Is it good practise to do unit test coverage for even plain classes","body":"<p>Here is an example of an class with no behaviour at all. So the question is should I be doing unit test coverage for it, as I see it as unnecessary for it does have any behaviour in it.</p>\n\n<pre><code>public class Employee\n{\n    public int Id { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public Address Address { get; set; }\n}\n</code></pre>\n\n<p><em><strong>My code coverage result complains that I have not done any coverage for the class</em></strong></p>\n"},{"tags":[".net","unit-testing","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12864968,"title":"Differences between copies of Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll","body":"<p>I created a console app in VS2012 and tried to add the MS unit test dll. But there are 5 of them. Which one should I use for .NET 4.0 with VS2012 and what are the other ones anyways?</p>\n\n<pre><code>Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll\n\nVersion:  9.0.0.0         File Version:  9.0.30729.1\nVersion: 10.0.0.0         File Version: 11.0.30319.1\nVersion: 10.0.0.0         File Version: 11.0.50727.1\n\nVersion: 10.1.0.0         File Version: 11.0.40219.1\nVersion: 10.1.0.0         File Version: 11.0.50727.1\n</code></pre>\n"},{"tags":["python","unit-testing","import"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":236,"score":1,"question_id":6925050,"title":"How do I import a module from a parent directory? (unittest purposes)","body":"<p>I have just finished writing the core section of a project I am working on and I want to write test for it using unittest before I continue. I am aware that I should have done this before, but when I started I didn't know Python, so.. whatever..</p>\n\n<p>What I would like to achieve: I have a sub-package of the main package which contains all the modules I want to test inside it. I want to put a subsubpackage inside that called 'tests' or something which then contains all of my test cases, which I'd like to be able to aggregate into a test suite from outside the package so eventually I can run all the test for the entire project in one go.</p>\n\n<p>The structure is something like this:</p>\n\n<pre><code>/projectPackage\n/projectPackage/package\n/projectPackage/package/\\__init__.py (empty)\n/projectPackage/package/someModule.py\n/projectPackage/package/... (more modules)\n/projectPackage/package/testing.py (runs all the tests in /tests/)\n/projectPackage/package/tests\n/projectPackage/package/tests/\\__init__.py (empty)\n/projectPackage/package/tests/someModuleTests.py\n</code></pre>\n\n<p>Problem I am having:</p>\n\n<p>someModuleTests has to import someModule from the parent package so it can test its methods. This doesn't seem to work. I get various errors like:</p>\n\n<pre><code>Attempted relative import beyond toplevel package\n</code></pre>\n\n<p>Anyway, I expect it's just because I am a Python noob! I have my own ideas on how I am going to do it for this project, because of course each is different, but any general advice on the structuring of medium-large python projects is also appreciated.</p>\n"},{"tags":["unit-testing","microsoft-fakes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12114964,"title":"Using Microsoft Fakes to Shim a method with ref parameters","body":"<p>I have a static method with ref parameters in my legacy (untestable) dll. I am trying to write unit tests for a class that calls into this method. </p>\n\n<pre><code>public static class Branding\n{\n    ...\n    ...\n\n    static public bool GetBranding(Int32 providerId,\n        Int32 employerId,\n        string brandingElement,\n        ref string brandingValue)\n\n    ...\n    ...\n}\n</code></pre>\n\n<p>I need help writing a shim statement for this call</p>\n\n<pre><code>ShimBranding.GetBrandingInt32Int32StringStringRef = \n    ( providerId, employerId, element, { ====&gt; WHAT GOES HERE &lt;===== } )\n    =&gt; \n    true;\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":11909377,"title":"client-side unit testing on Google App Engine","body":"<p>Is there a simple and straightforward tutorial on client-side (as in on your development workstation, using testbed and checking both backend functionality and rendered HTML) unit and integration testing on the Google App Engine Python SDK? Something I can point other developers to?</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","clr","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12859476,"title":"VS2010: Code coverage for c++ DLL (/clr)","body":"<p>According to <a href=\"http://msdn.microsoft.com/en-us/library/ms243171(v=vs.100).aspx\" rel=\"nofollow\">Microsoft</a> project which has been compiled with <i>/clr</i> and <i>/clr:pure</i> options doesn't support unit testing.</p>\n\n<p>However, I can create unit test project and use it for testing <i>/clr</i> and <i>/clr:pure</i> project. But <b><i>code coverage</i></b> is not supported at this time.</p>\n\n<p>How can I determine code coverage for C++ project which compiled into DLL with <i>/clr</i> option?</p>\n"},{"tags":["unit-testing","node.js","jasmine","mocha"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":451,"score":0,"question_id":11429332,"title":"Unit Tests of Node.js REST services with Mocha or Jasmine","body":"<p>I have node module that exports REST methods for express.js (index, show, update, delete)..</p>\n\n<p>What is the best approach to test mocha or jasmine unit test framework?</p>\n\n<p>How should I describe my test? </p>\n\n<p>Thanks. </p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12867069,"title":"Unit test insert method","body":"<p>How do you unit test a method that inserts data into the database?</p>\n\n<p>I have a service I'm creating and don't know how to Unit test it.</p>\n\n<pre><code>public class EnterpriseDownloadRepository : IEnterpriseDownloadRepository\n{\n    public int AddFileDownloadEntry(Contract.Data.FileDownloadEntry fileDownloadEntry)\n    {\n        using (var context = new EFFileDownloadEntryEntitites()) \n        {\n            int returnValue =context.FileDownloadEntries.AddObject(fileDownloadEntry);\n            context.SaveChanges();\n            return returnValue;\n        }\n\n\n\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":798,"score":4,"question_id":12171933,"title":"Running unit tests","body":"<p>In our solution we have several test projects. Most of them contain unit tests that run fast but some are for integration, acceptance and UI tests which take quite some time to finish.\nNow I'd like to have a convenient way of running only the unit tests. Either by using the hotkey to run all or using the new feature to run tests after each build.</p>\n\n<p>Unfortunately VS also runs all the slow tests as well. In VS10 I grouped the tests in Test View by project and selected only the ones containing unit tests. It's not as easy as I wished it to be but at least it was possible. Now there doesn't seem to be a way around running all tests in a solution.</p>\n\n<p>The only alternative that I see at the moment is to remove all but the unit tests from the solution but this would limit the refactoring capabilities.</p>\n\n<p>So does anyone know how to easily group and run only unit tests in the new VS?</p>\n"},{"tags":["c#",".net","sql","unit-testing","linq-to-sql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12866988,"title":"\"Cannot find data type Variant\" error on Linq-to-SQL CreateDatabase","body":"<p>I'm Unit Testing a repository that implements a Linq-to-sql Data Context.  As part of the class initialize, I'm creating the db:</p>\n\n<pre><code>using (var setupContainer = new MyDataContext(MyConnectionString))\n            {\n                if (setupContainer.DatabaseExists())\n                {\n                    setupContainer.DeleteDatabase();\n                }\n                setupContainer.CreateDatabase();\n            }\n</code></pre>\n\n<p>The problem is that Data Context has a table which contains a Variant data type. On CreateDatabase() I get this error:</p>\n\n<blockquote>\n  <p>{System.Data.SqlClient.SqlException (0x80131904): Column, parameter, or variable #6: Cannot find data type Variant.}</p>\n</blockquote>\n\n<p>I should state that I don't have the ability to change the field from Variant, as my impression is that's the first problem...</p>\n\n<p>Hope this is enough info to go by, can add anything else if needed. Thanks!</p>\n"},{"tags":["java","unit-testing","dbunit","unitils"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":542,"score":1,"question_id":5713433,"title":"Unitils/DBunit and database test","body":"<p>I want to try to make unit test with DBUnit but I have a problem with my dataset.</p>\n\n<p>Here is my persistence object:</p>\n\n<pre><code>@Entity\n@Table(name = \"personnes\")\npublic class Personne implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Integer pk;\n\n    @Column\n    private String name;\n}\n</code></pre>\n\n<p>And my dataset:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;dataset&gt;\n    &lt;personnes name=\"toto\"  pk=\"1\" /&gt;\n&lt;/dataset&gt;\n</code></pre>\n\n<p>My problem is with the name column, I get this error:</p>\n\n<pre><code>org.dbunit.dataset.NoSuchColumnException: personnes.NAME -  (Non-uppercase input column: name) in ColumnNameToIndexes cache map. Note that the map's column names are NOT case sensitive.\n</code></pre>\n\n<p>I don't understand why dbunit search a column \"NAME\" whereas my column is \"name\".</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12792593,"title":"unit testing public methods with tested internal methods","body":"<p>I find myself falling into this pattern quite a lot, I write a class composed of very small methods which are completely exercised by my unit tests. Then I find I need to build another method that calls these methods and I have to write a more complicated unit test for that – a simple example would be illustrative:</p>\n\n<pre><code>namespace FooRequest\n{\n    static public class Verifier\n    {\n        static public bool IsValid(string request)\n        {\n            return (!IsAllCaps(request) &amp;&amp; !ContainsTheLetterB(request));\n        }\n\n        static internal bool IsAllCaps(string request)\n        {\n            return (request.Equals(request.ToUpper()));\n        }\n\n        static internal bool ContainsTheLetterB(string request)\n        {\n            return request.ToLower().Contains(\"b\");\n        }\n    }\n}\n</code></pre>\n\n<p>For code I’d write unit tests to cover the two internal methods like this:</p>\n\n<pre><code>namespace UnitTest\n{\n    using Microsoft.VisualStudio.TestTools.UnitTesting;\n    using FooRequest;\n\n    public class VerifierTest\n    {\n        [TestClass]\n        public class ContainsTheLetterB\n        {\n            [TestMethod]\n            public void ShouldReturnTrueForStringContainsB()\n            {\n                Assert.IsTrue(Verifier.ContainsTheLetterB(\"burns\"));\n            }\n\n            [TestMethod]\n            public void ShouldReturnFakseForStringDoesNotContainB()\n            {\n                Assert.IsFalse(Verifier.ContainsTheLetterB(\"urns\"));\n            }\n        }\n\n        [TestClass]\n        public class IsAllCaps\n        {\n            [TestMethod]\n            public void ShouldReturnTrueForStringIsAllCaps()\n            {\n                Assert.IsTrue(Verifier.IsAllCaps(\"IAMALLCAPS\"));\n            }\n\n            [TestMethod]\n            public void ShouldReturnFakseForStringDoesNotContainB()\n            {\n                Assert.IsFalse(Verifier.IsAllCaps(\"IAMnotALLCAPS\"));\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>For the public method I really just want to test “if the methods you call return false, then return false” – it’s annoying that I have to set up the input in such a way to force my internal methods to return true or false – my test for this method shouldn’t care about the internal methods it calls (right?)</p>\n\n<pre><code>    [TestClass]\n    public class IsValid\n    {\n        [TestMethod]\n        public void ShouldReturnFalseForInvalidStringBecauseContainsB()\n        {\n            Assert.IsFalse(Verifier.IsValid(\"b\"));\n        }\n\n        [TestMethod]\n        public void ShouldReturnFalseForInvalidStringBecauseIsAllCaps()\n        {\n            Assert.IsFalse(Verifier.IsValid(\"CAPS\"));\n        }\n\n        [TestMethod]\n        public void ShouldReturnTrueForValidString()\n        {\n            Assert.IsTrue(Verifier.IsValid(\"Hello\"));\n        }\n    }\n</code></pre>\n\n<p>Obviously for this example, that’s not too bad, but when there are lots of internal methods and the input is non-trivial to configure, testing my public “Is This Input Valid” method gets complicated.</p>\n\n<p>Should I create an interface for all my internal methods then stub it out for the tests or is there a neater way?</p>\n"},{"tags":["java","android","unit-testing","junit","powermock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":11313656,"title":"VerifyError with PowerMock on Android","body":"<p>I'm trying to use PowerMock to mock some classes used in testing our Android app (BluetoothSocket for example).</p>\n\n<p>I have downloaded the zip file on PowerMock's google code page with all dependencies and added them to my Android test project (including build path).</p>\n\n<p>However when I try to use PowerMock like this:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class )\n@PrepareForTest( NetworkUtil.class )\npublic class TestSendAck extends TestCase{\n\n    @Test\n    public void testGenerateURL() {\n         PowerMock.mockStatic( NetworkUtil.class );\n\n         EasyMock.expect( NetworkUtil.getLocalHostname() ).andReturn( \"triumph\" );\n\n         PowerMock.replayAll();\n         PowerMock.verifyAll();\n    }\n}\n</code></pre>\n\n<p>I get the following stack trace:</p>\n\n<pre><code>java.lang.ExceptionInInitializerError\nat org.easymock.internal.ClassProxyFactory.createEnhancer(ClassProxyFactory.java:249)\nat org.easymock.internal.ClassProxyFactory.createProxy(ClassProxyFactory.java:159)\nat org.easymock.internal.MocksControl.createMock(MocksControl.java:59)\nat org.powermock.api.easymock.PowerMock.doCreateMock(PowerMock.java:2212)\nat org.powermock.api.easymock.PowerMock.doMock(PowerMock.java:2163)\nat org.powermock.api.easymock.PowerMock.mockStatic(PowerMock.java:287)\nat se.metrima.mafield.test.TestSendAck.testGenerateURL(TestSendAck.java:19)\nat java.lang.reflect.Method.invokeNative(Native Method)\nat android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\nat android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\nat android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)\nat android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)\nCaused by: java.lang.VerifyError: net.sf.cglib.core.ReflectUtils\nat net.sf.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\nat net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\nat net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\nat net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\nat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:116)\nat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)\nat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)\nat net.sf.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\n... 19 more\n</code></pre>\n\n<p>I only get this error when running the test project as an Android JUnit Test, if I run it as a regular JUnit test powermock works, but then all my tests that needs the Android framework naturally fails.</p>\n\n<p>How can I solve this? I'm very new to unit testing so I don't really understand all concepts yet.</p>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12863889,"title":"boost Unit test doesn't fail","body":"<p>I am learning about boost unit tests, I found out, happily, that it can detect memory leaks, so I am testing it. I created the following horrible method:</p>\n\n<pre><code>int ForTest::Compare(const ForTest item)\n{\n    ForTest* existing_item = this;\n    char* x=new char[1024];\n    m_name = std::string(x);\n    if (existing_item-&gt;m_count * existing_item-&gt;m_price == item.m_count * item.m_price) return 0;\n    if (existing_item-&gt;m_count * existing_item-&gt;m_price &gt; item.m_count * item.m_price) return 1;    \n    return -1;\n}\nBOOST_AUTO_TEST_CASE( a_test_case)\n{\n    BOOST_TEST_CHECKPOINT(\"weird...\");\n\n    ForTest alpha(\"Pen\", 4, 4.3);\n    ForTest beta;\n\n    BOOST_CHECK_EQUAL(alpha.Compare(beta), 1);  \n}\n</code></pre>\n\n<p>I am obviously creating 2 memory leaks here. Why doesn't the tester care ? My test passes with flying colors.</p>\n\n<p>I don't want to have to modify actual code, as I saw here: <a href=\"http://www.boost.org/doc/libs/1_35_0/libs/test/example/exec_mon_example.cpp\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_35_0/libs/test/example/exec_mon_example.cpp</a></p>\n\n<p>Why am I not getting an error ?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12859172,"title":"Why Unit test fails using mstest command line but not in VS2010 Professional?","body":"<p>I have a little problem with UnitTests for asp.net mvc3 application.</p>\n\n<p>If I run some unit-tests in Visual Studio 2010 <strong>Professional</strong>, they have been passed successfully.</p>\n\n<p>If I use the Visual Studio 2010 Professional command line</p>\n\n<pre><code>mstest /testcontainer:MyDLL.dll /detail:errormessage /resultsfile:\"D:\\A Folder\\res.trx\"\n</code></pre>\n\n<p>Then the error occurred:</p>\n\n<pre><code>[errormessage] = Test method MyDLL.AController.IndexTest threw exception:\nSystem.NullReferenceException: Object reference not set to an instance of an object.\n</code></pre>\n\n<p>and <strong>my controller</strong>:</p>\n\n<pre><code>public ActionResult Index(){\n   RedirectToAction(\"AnotherView\");\n}\n</code></pre>\n\n<p>and in the <strong>test</strong></p>\n\n<pre><code>AController myController = new AController();\nvar result = (RedirectToRouteResult)myController.Index();\n\nAssert.AreEqual(\"AnotherView\", result.RouteValues[\"action\"]);\n</code></pre>\n\n<p>How to solve this to work properly in both situations (VS2010 and mstest.exe) ?</p>\n\n<p>Thank you</p>\n\n<p>PS: I read <a href=\"http://stackoverflow.com/questions/2761587/test-run-errors-with-mstest-in-vs2010\">Test run errors with MSTest in VS2010</a> but that could solve if I have VS2010 Ultimate/Premium.</p>\n"},{"tags":["javascript","unit-testing","mocking","yui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12863935,"title":"YUI Testing Mocks - Can I verify a method is called 3x with 3 different values?","body":"<p>I am using the latest version of YUI Test for testing my project.</p>\n\n<p>I have a situation where I create a Mock with method Foo.  I expect that Foo will be called three times.  The first time, it will be called with value \"A\", the second time, it will be called with value \"B\", and the third time, it will be called with value \"C\".  The third time it is called, it should return true.</p>\n\n<p>Here is an example of what I would like to write, however this doesn't appear to work, and only the last condition is validated.</p>\n\n<pre><code>var mock = Y.Mock();\nY.Mock.expect(mock, { method: \"foo\", args: [\"A\"] });\nY.Mock.expect(mock, { method: \"foo\", args: [\"B\"] });\nY.Mock.expect(mock, { method: \"foo\", args: [\"C\"], returns: true });\n</code></pre>\n"},{"tags":["unit-testing","winrt"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":35,"score":0,"question_id":12864822,"title":"How can i export the test result of WinRT Unit testing report?","body":"<p>I have written the unit test cases for WinRT, but I am not able to export the test result into HTML or XML format which I can use for further process. Please suggest me where I can find the test result details. </p>\n"},{"tags":["ruby","windows","unit-testing","rubymine"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":219,"score":9,"question_id":11819770,"title":"Rake tests running very slow","body":"<p>After running some tests, I'm convinced there has to be something wrong with my setup (windows, rubymine and latest ruby versions). My times right now are:</p>\n\n<pre><code>Finished tests in 14.289817s, 0.0700 tests/s, 0.3499 assertions/s.\n\n1 tests, 5 assertions, 0 failures, 0 errors, 0 skips\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>With 5 VERY easy tests (just checking if validation on empty fields works). The total time for these 5 unit tests is 160 seconds, over 2 minutes.</p>\n\n<p>What could I do to improve this speed?</p>\n\n<p>Here are the tests:</p>\n\n<pre><code>require 'test_helper'\n\nclass ItemTest &lt; ActiveSupport::TestCase\n  test 'item attributes must not be empty' do\n    item = Item.new\n    assert item.invalid?\n    assert item.errors[:name].any?\n    assert item.errors[:description].any?\n    assert item.errors[:image_url].any?\n    assert item.errors[:rating].any?\n  end\nend\n</code></pre>\n"},{"tags":["c#","unit-testing","fakeiteasy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12846484,"title":"MustHaveHappened fails when called twice on the same object","body":"<p>Given the following class under test (and associated DTO class and interface):</p>\n\n<pre><code>public class Foo\n{\n    private readonly IBar _bar;\n\n    public Foo(IBar bar) { _bar = bar; }\n\n    public void DoStuff()\n    {\n        var dto = new DTO();\n\n        dto.Num = 1;\n        _bar.Test(dto);\n\n        dto.Num = 2;\n        _bar.Test(dto);\n    }\n}\n\npublic class DTO { public int Num { get; set; } }\n\npublic interface IBar { void Test(DTO dto); }\n</code></pre>\n\n<p>And this test method (which attempts to verify that IBar.Test() gets called twice: once with Num = 1 and once with Num = 2):</p>\n\n<pre><code>public void TestMethod1()\n{\n    var bar = A.Fake&lt;IBar&gt;();\n    var foo = new Foo(bar);\n    foo.DoStuff();\n\n    A.CallTo(() =&gt; bar.Test(A&lt;DTO&gt;.That.Matches(x =&gt; x.Num == 1))).MustHaveHappened();\n    A.CallTo(() =&gt; bar.Test(A&lt;DTO&gt;.That.Matches(x =&gt; x.Num == 2))).MustHaveHappened();\n}\n</code></pre>\n\n<p>The first 'MustHaveHappened' call fails. I have discovered that it is because the DTO used by both calls to IBar.Test() is the same instance.  If I change the code to call IBar.Test() with two different DTO's it works as expected.</p>\n\n<p>My question is: is this a bug in FakeItEasy or am I doing something wrong?</p>\n"},{"tags":["python","unit-testing","import","python-module"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":7460363,"title":"re-import module-under-test to lose context","body":"<p>Many Python modules preserve an internal state without defining classes, e.g. <code>logging</code> maintains several loggers accessible via <code>getLogger()</code>.</p>\n\n<p><strong>How do you test such a module?</strong><br> Using the standard <a href=\"http://docs.python.org/library/unittest.html\" rel=\"nofollow\"><code>unittest</code></a> tools, I would like the various tests inside a <code>TestCase</code> class to re-import my module-under-test so that each time it loses its context. Can this be done?</p>\n"},{"tags":["objective-c","unit-testing","grand-central-dispatch"],"answer_count":3,"favorite_count":13,"up_vote_count":16,"down_vote_count":0,"view_count":4415,"score":16,"question_id":4326350,"title":"How do I wait for an asynchronously dispatched block to finish?","body":"<p>I am testing some code that does asynchronous processing using Grand Central Dispatch. The testing code looks like this:</p>\n\n<pre><code>[object runSomeLongOperationAndDo:^{\n    STAssert…\n}];\n</code></pre>\n\n<p>The tests have to wait for the operation to finish. My current solution looks like this:</p>\n\n<pre><code>__block BOOL finished = NO;\n[object runSomeLongOperationAndDo:^{\n    STAssert…\n    finished = YES;\n}];\nwhile (!finished);\n</code></pre>\n\n<p>Which looks a bit crude, do you know a better way? I could expose the queue and then block by calling <code>dispatch_sync</code>:</p>\n\n<pre><code>[object runSomeLongOperationAndDo:^{\n    STAssert…\n}];\ndispatch_sync(object.queue, ^{});\n</code></pre>\n\n<p>…but that’s maybe exposing too much on the <code>object</code>.</p>\n"},{"tags":["ios","unit-testing","core-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12861319,"title":"Error while creating coredata file in unit test","body":"<p>I have a coredata file in a static library and I'm creating unit tests for it. I get this error when i try to create the sqlite file in the following step during the unit test execution</p>\n\n<pre><code>_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];\n    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType\n                                                   configuration:nil\n                                                             URL:storeURL\n                                                         options:nil\n                                                           error:&amp;error])\n    { [...] }\n</code></pre>\n\n<blockquote>\n  <p>Test Case '-[PersonTest testAddPerson]' started. 2012-10-12\n  07:19:23.989 otest[11852:7e03] Unresolved error Error\n  Domain=NSCocoaErrorDomain Code=512 \"The operation couldn’t be\n  completed. (Cocoa error 512.)\" UserInfo=0x216a320 {reason=Failed to\n  create file; code = 2}, {\n      reason = \"Failed to create file; code = 2\"; }</p>\n</blockquote>\n"},{"tags":["java","multithreading","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12861330,"title":"Unit testing blocking processes","body":"<p>I have a worker processes working on a data queue. A <code>training worker</code> reads and processes data from the <code>training queue</code>. It continues to poll and on the look out for new data written to the queue.</p>\n\n<p>I have implemented the worker as follows:</p>\n\n<pre><code>public static void main(String[] args) {\n  startTraining()\n}\n\npublic static boolean startTraining() {\n  trainingWorker = new WorkerImpl(config);\n  final Thread workerThread = new Thread(trainingWorker);\n\n  WorkerListener listener = new WorkerListener() {\n    public void onEvent(WorkerEvent event, Worker worker, String queue, Job job, \n                        Object runner, Object result, Exception ex) {\n      if(event.equals(WorkerEvnet.JOB_SUCCESS) {\n        //get data\n        //process data\n        //send data\n      }\n    }\n  }\n\n  trainingWorker.addListener(listener, WorkerEvent.JOB_SUCCESS, WorkerEvent.JOB_FAILURE,\n                     WorkerEvent.WORKER_ERROR, WorkerEvent.WORKER_POLL);\n  workerThread.start();\n  workerThread.join();\n}\n</code></pre>\n\n<p>I want unit tests to see if the worker read the data properly, processed it correctly and successfully sent it. The problem is because of <code>Thread.join()</code>; the call to the main function never returns (as the worker is suppose to run continuously). In this case should I not write unit tests for it? If yes, how can I write some other form of test that will ensure the worker is working  as desired?</p>\n"},{"tags":["unit-testing","compact-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":11866011,"title":".NET CF UnitTesting with emulator - Test run error","body":"<p>Test run error:</p>\n\n<p>The test adapter ('Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestAdapter, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.Adapter, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a') required to execute this test could not be loaded. Check that the test adapter is installed properly. Error: Smart device host adapter failed to initialize.</p>\n\n<p>Actual situation:\nKnown issue \"Exceptions in unit tests in secondary threads kills vstesthost\"</p>\n\n<p>has been solved with adding to \nC:\\Program Files\\Microsoft Visual Studio 9.0\\Common7\\IDE\\VSTestHost.exe.config</p>\n\n<p>the following line:</p>\n\n<p></p>\n\n<p>Microsoft.VisualStudio.SmartDevice.UnitTestFramework.dll has been added to GAC:</p>\n\n<p>\"C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0A\\bin\\gacutil.exe\" -i \"C:\\Program Files\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PublicAssemblies\\Microsoft.VisualStudio.SmartDevice.UnitTestFramework.dll\"</p>\n\n<p>But I still receive error message and can not run unit tests on emulator.</p>\n\n<p>Or may be this is still unresolved issue of Visual Studio 2008 and I should try another tools/possibilities?</p>\n\n<p><img src=\"http://i.stack.imgur.com/27Qbw.png\" alt=\"enter image description here\"></p>\n\n<p>System.IO.FileNotFoundException was unhandled</p>\n\n<p>System can not find file</p>\n\n<p>Source=\"Device Connection Manager\"\n  StackTrace:\n       at Microsoft.VisualStudio.DeviceConnectivity.Interop.ConManServerClass.DownloadPackage(String pwszPackageId)\n       at Microsoft.SmartDevice.Connectivity.FileDeployer.DownloadPackage(ObjectId packageId)\n       at Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.RunConfigDevice.InitializeStreamingWithDevice()\n       at Microsoft.VisualStudio.SmartDevice.TestHostAdapter.DeviceAgent.DeviceHostAdapter.initializeInternal()\n       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\n       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n       at System.Threading.ThreadHelper.ThreadStart()\n  InnerException: </p>\n\n<p><a href=\"http://img688.imageshack.us/img688/2025/20120808testrunerrorexc.gif\" rel=\"nofollow\">http://img688.imageshack.us/img688/2025/20120808testrunerrorexc.gif</a></p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":8,"favorite_count":9,"up_vote_count":40,"down_vote_count":0,"view_count":12484,"score":40,"question_id":473401,"title":"Get name of currently executing test in JUnit 4","body":"<p>In JUnit 3, I could get the name of the currently running test like this:</p>\n\n<pre><code>public class MyTest extends TestCase\n{\n    public void testSomething()\n    {\n        System.out.println(\"Current test is \" + getName());\n        ...\n    }\n}\n</code></pre>\n\n<p>which would print \"Current test is testSomething\". </p>\n\n<p>Is there any out-of-the-box or simple way to do this in JUnit 4?</p>\n\n<p>Background: Obviously, I don't want to just print the name of the test. I want to load test-specific data that is stored in a resource with the same name as the test. You know, <a href=\"http://en.wikipedia.org/wiki/Convention_over_Configuration\" rel=\"nofollow\">convention over configuration</a> and all that.</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","unit-testing","testing","cookies","browser-extension"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12858848,"title":"How to test Javascript that triggers 3rdparty cookies being set","body":"<p>I want to run automated tests that will execute a Javascript file. The JS calls a number of URLs through AJAX calls and image loads, each of which leads to the site being called dropping a cookie.</p>\n\n<p>Since I cannot read those cookies with Javascript, I don't know whether I can actually test this script.</p>\n\n<p>What is the best way of approaching this problem? Browser extensions?</p>\n"},{"tags":["unit-testing","powershell","tdd","pester"],"answer_count":6,"favorite_count":11,"up_vote_count":26,"down_vote_count":1,"view_count":3242,"score":25,"question_id":940497,"title":"How to do TDD and unit testing in powershell?","body":"<p>With MS ramming powershell into all new server products, I'm starting to (reluctantly) think I need to take it seriously. Part of \"taking it seriously\" is TDD. Have you found good methods to unit test power shell scripts? </p>\n\n<p>I've found samples of mocking from <a href=\"http://www.peterprovost.org/blog/post/TDD-with-PowerShell-Mocking-Things.aspx\">Mr Geek Noise</a> - but I'd really like something like <a href=\"http://ayende.com/projects/rhino-mocks.aspx\">RhinoMocks</a>. <a href=\"http://blog.brianhartsock.com/2009/03/27/tdd-with-powershell-from-the-client-perspective/\">Brian Hartsock</a> has a sample of running tests on powershell strings from MS Test. A little hacky, but it seems to work. </p>\n\n<p>What I want is a Powershell TDD experience that is as clean as it is in \"real\" languages. </p>\n\n<p><hr /></p>\n\n<p><strong>Update to clarify:</strong></p>\n\n<p>The first two answers attempt to steer me away from testing Powershell. The opinions are interesting. I don't want to know if it's a good idea to test in powershell. That's a subjective question that should be asked in a different forum. I want a solution to unit testing powershell. I you think it's a bad idea (might be), treat it as a fun academic question.</p>\n\n<ul>\n<li>Yes, scripting languages glue together disparate systems. However, as already pointed out, it's also easy to mock and break seams in a dynamic language. </li>\n<li>I'm not asking about \"debugging\". Debugging is an extremely useful topic. I'll let someone else ask it. </li>\n<li>Maybe PS scripts should be simple. The language supports modularity and it is inevitable that complex processes will be implemented in PS (even if a bad idea). </li>\n<li>The answer to this question is not \"You can't\". I can see (from linked blogs - which are a little old) that some people have made headway on the problem.  </li>\n</ul>\n\n<p>To re-state: <strong>How do you implement an automated testing of Powershell logic in the style of xUnit?</strong>  Integration tests are interesting, unit tests that break dependencies most interesting. </p>\n"},{"tags":["c#","visual-studio-2010","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12744546,"title":"Unit testing a method that returns a collection","body":"<p>I'm trying to write some unit tests for a service which returns collections of complex objects (<code>IQueriable&lt;MyObject&gt;</code> to give an idea) and I'm not sure how to approach the problem.</p>\n\n<p>Consider this:</p>\n\n<p><code>public IQueriable&lt;MyObject&gt; GetMyObjects(int someParameterA, int someParameterB)\n{...}</code></p>\n\n<p>Basically, a method that, depending on the passed parameters, will output a collection of rather complex objects.</p>\n\n<p>Since the application is under development, I can use a local SQL instance and I've created a method which will populate this DB with some sample data, so the service has something to work with.</p>\n\n<p>I don't have much experience in writing unit tests. OK, I'll be honest, I don't have ANY experience in writing unit tests. -_- And most of the examples I saw were for methods that do some calculations and return a single result. It is thus possible to attach a data source for the test with test cases. If a method was to return the sum of two numbers, the data source would consist of three columns: the two numbers and the expected result.</p>\n\n<p>So, with my limited knowledge about unit tests, I'm trying to apply the same logic to test a method that returns a collection... and I've no idea what the test should consist of (I know I could easily test the number of returned elements), let alone what the test data source with test cases should look like.</p>\n\n<p>I know the VS2010 has <code>CollectionAssert</code>, but I guess my problem is that I don't know how to create the \"expected\" values in this case.</p>\n\n<p>What's the best way to approach unit tests for such methods?</p>\n"},{"tags":["java","spring","unit-testing","rest","servlets"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12815883,"title":"Passing an HTTP call inside a test context","body":"<p>I am trying to unit test a Spring bean I implemented, but come across a difficulty here. This bean is to call a distant REST service on certain occasions.</p>\n\n<p>However, in my tests, I would like it to call a mock servlet <em>inside</em> my test context, not a distant server.</p>\n\n<p>The call is made using Apache's httpclient library, the URL is set in the applicationContext (so I can provide any fake URI to the bean when testing). The service should return a stream.</p>\n\n<p>The call looks like the following:</p>\n\n<pre><code>HttpClient client = new DefaultHttpClient();\nURIBuilder builder = new URIBuilder(theURIProvidedInContext);\n// set parameters on builder\nURI uri = builder.build();\n\nHttpGet get = new HttpGet(uri);\nHttpEntity entity = client.execute(get).getEntity();\nreturn entity.getContent();\n</code></pre>\n\n<p>I searched Google all morning but only found how to unit-test servlets. Can anybody give some insight here?</p>\n"},{"tags":["java","multithreading","unit-testing","powermock"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12853828,"title":"how to test a thread using powermock?","body":"<p>There's a piece of code im trying to test,</p>\n\n<p>which goes something like this:</p>\n\n<pre><code>class Foo {\n    //do some operations\n    SwingUtilities.invokeLater(new Runnable() {\n        public void run() {\n            //some piece of code\n        }\n    }\n}\n</code></pre>\n\n<p>So how do i test the code within the run function.\nI am using powermock, </p>\n\n<p>The thread is started in another class so i should not invoke it there right??</p>\n\n<p>im still a beginner.</p>\n"},{"tags":["php","unit-testing","testing","correctness"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":509,"score":3,"question_id":762192,"title":"Assert multiple conditions in a single test, or split into multiple tests?","body":"<p>If you were testing a count function like the one below, is it considered to be 'right' or 'wrong' to test multiple things for the function in one function vs having a test function for each of the tests?</p>\n\n<pre><code>    function testGetKeywordCount()\n    {\n        $tester = $this-&gt;getDatabaseTester($this-&gt;CompleteDataFile);\n\n        $tester-&gt;onSetUp();\n\n        $KeywordID = 0;\n\n        $this-&gt;setExpectedException('InvalidArgumentException');\n        $this-&gt;keyword-&gt;getKeywordCount($KeywordID,'Active');\n\n        $KeywordID = 1;\n\n        $this-&gt;setExpectedException('InvalidArgumentException');\n        $this-&gt;keyword-&gt;getKeywordCount($KeywordID,'InvalidStatus');\n\n        $this-&gt;assertEquals(1, $this-&gt;keyword-&gt;getKeywordCount($KeywordID,'Active'));\n\n        $tester-&gt;onTearDown();\n    }\n</code></pre>\n"},{"tags":["c#","unit-testing","delegates","moq"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":152,"score":4,"question_id":10998455,"title":"Verifying a delegate was called with Moq","body":"<p>i got a class that gets by argument a delegate.\nThis class invokes that delegate, and i want to unit test it with Moq.\nhow do i verify that this method was called ?</p>\n\n<p>example class :</p>\n\n<pre><code>public delegate void Foo(int number);\n\npublic class A\n{\n   int a=5;\n\n   A (Foo myFoo)\n   {\n      Foo(a);\n   }\n}\n</code></pre>\n\n<p>and I want to check that Foo was called.\nThank you.</p>\n"},{"tags":["php","linux","unit-testing","netbeans","phpunit"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":4037,"score":6,"question_id":6063045,"title":"Problems with PHPUnit (Linux) - PHP Fatal Error","body":"<p>I successfully installed PHPUnit on my desktop PC and decided to have it on my laptop PC, but... then I try to create PHPUnit test Netbeans throws an error \"Selected PHPUnit (version ?.?.?) is to old, upgrade it if possible (the minimum version is 3.3.0).\".</p>\n\n<p>Of course my PHPUnit version is newer - 3.5.5-2. Where is the problem?</p>\n\n<p>I am using </p>\n\n<ul>\n<li>Ubuntu 11.04</li>\n<li>Netbeans 6.9</li>\n<li>PEAR Version: 1.9.1</li>\n<li>PHP Version: 5.3.5-1ubuntu7.2</li>\n<li>Zend Engine Version: 2.3.0</li>\n</ul>\n\n<p>As I understand the problem is with PHPUnit. When I try to call \"phpunit\" command in terminal I receive PHP Fatal error:</p>\n\n<pre><code>root@ubuntu:~# phpunit –version\nPHP Warning:  require_once(PHP/CodeCoverage/Filter.php): failed to open stream: No such file or directory in /usr/bin/phpunit on line 38\nPHP Stack trace:\nPHP   1. {main}() /usr/bin/phpunit:0\nPHP Fatal error:  require_once(): Failed opening required 'PHP/CodeCoverage/Filter.php' (include_path='.:/usr/share/php:/usr/share/pear') in /usr/bin/phpunit on line 38\nPHP Stack trace:\nPHP   1. {main}() /usr/bin/phpunit:0\nroot@ubuntu:~# find / -name CodeCov*\nroot@ubuntu:~#\n</code></pre>\n\n<p>As you can see there is no such file or folder in my PC. What to do?</p>\n\n<p>I tried to reinstall it many times (with apt-get, pear, Synaptic PM...), but always get the same result.</p>\n"},{"tags":["unit-testing","ios5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12588544,"title":"DIfficulty mocking core data objects","body":"<p>I am running unit testing for a model file which uses core data. The test target builds successfully, but i am seeing the following errors : </p>\n\n<p>error: testThatDistinguishedFolderTypeForTheAccountExists (FolderDALTests) failed: +entityForName: could not locate an entity named 'Folder' in this model.</p>\n\n<p>error: testThatFindByExchageAccountReturnsFolders (FolderDALTests) failed: +entityForName: could not locate an entity named 'ExchangeAccount' in this model.</p>\n\n<p>However, i feel that the problem is caused due to the \"setup\" method, where the NSManagedObjectModel is not created using merging all the models found in bundles.</p>\n\n<pre><code>-(void)testThatDistinguishedFolderTypeForTheAccountExists\n {\n   Folder *inbox = [NSEntityDescription insertNewObjectForEntityForName:@\"Folder\" \n   inManagedObjectContext:self.context];\n   inbox.distinguishedFolderType = @\"inbox\";\n   ExchangeAccount *account = [NSEntityDescription insertNewObjectForEntityForName:@\"ExchangeAccount\" inManagedObjectContext:self.context];\n   id&lt;FolderProtocol&gt; folder = [FolderDAL findWithAccount:account DistinguishedFolderType:@\"inbox\" withManagedContext:self.context];\n\nSTAssertTrue([folder.folderDistinguishedFolderType isEqualToString:@\"inbox\"], @\"Unable to find the folder with the given distinguished type\");\n</code></pre>\n\n<p>}</p>\n\n<p>And the other method is : </p>\n\n<pre><code>- (void)testThatFindByExchageAccountReturnsFolders\n  {\n      ExchangeAccount *account = [NSEntityDescription          insertNewObjectForEntityForName:@\"ExchangeAccount\" inManagedObjectContext:self.context];\n\n     Folder *inbox = [NSEntityDescription insertNewObjectForEntityForName:@\"Folder\"     inManagedObjectContext:self.context];\n     inbox.displayName = @\"Inbox\";\n     inbox.exchangeAccount = account;\n\n     Folder *calendars = [NSEntityDescription insertNewObjectForEntityForName:@\"Folder\" inManagedObjectContext:self.context];\n     calendars.displayName = @\"Calendars\";\n     calendars.exchangeAccount = account;\n\n     NSArray *folders = [FolderDAL findByExchangeAccount:account withContext:self.context];\n\n     STAssertTrue([folders count] &gt; 0, @\"No folders were returned\");\n  }\n</code></pre>\n\n<p>The setup method is : </p>\n\n<pre><code>- (void)setUp\n{\n  [super setUp];\n\n  NSManagedObjectModel *objectModel = [NSManagedObjectModel mergedModelFromBundles:[NSArray arrayWithObject:[NSBundle mainBundle]]];\n  NSPersistentStoreCoordinator *storeCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:objectModel];\n  STAssertTrue([storeCoordinator addPersistentStoreWithType:NSInMemoryStoreType configuration:nil URL:nil options:nil error:NULL] ? YES : NO, @\"Should be able to add in-memory store\");\n  self.context = [[NSManagedObjectContext alloc] init];\n  self.context.persistentStoreCoordinator = storeCoordinator;\n</code></pre>\n\n<p>}</p>\n\n<p>Here, \"Folder\" and \"ExchangeAccount\" are the core data entities. And their corresponding DAL(Data Access Layer) files have some of their business logic</p>\n"},{"tags":["python","string","unit-testing","subprocess","pyunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12852764,"title":"Error comparing long string output in Python test","body":"<p>I'm testing a Python script who throws a bunch of bytes (as a string) as the result of his execution.</p>\n\n<p>Firstly, I get the result with: </p>\n\n<pre><code>myOutput = subprocess.check_output([\"python\",\"../src/myScript.py\"])\n</code></pre>\n\n<p>With this, I execute the script and get the output.  </p>\n\n<p>Then I compare this result with a really long expected output:</p>\n\n<pre><code>expOutput = \"382d006e756c6c2c7465737453657450726f706572747953823c75652c6c75614170702c63617074696f6e2c486f6c61206d756e646f203200\"\nself.assertEqual(myOutput, expOutput, \"Script output is not the expected\") \n</code></pre>\n\n<p>(It's just a silly test, I'm trying the get things to work).</p>\n\n<p><strong>Problem:</strong> My test FAILS. Debugging I founded the values are equal.</p>\n\n<p>Can anyone help me? </p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net","unit-testing","testing","automated-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12851409,"title":"UnitTest .Net with Ajax Application","body":"<p>I need make some unit test or some kind of testing which make me help to every time easily to check all my forms are working correctly. </p>\n\n<p>I am developing all application in .Net with c#. but with HTML controls only not a single .Net control.</p>\n\n<p>Mostly work with jQuery Ajax for posting form.</p>\n\n<p>How do I make some testing which help me for all validation. and all front validation is working good and database entry is going good.</p>\n"},{"tags":["c","unit-testing","design","hashmap"],"answer_count":3,"favorite_count":6,"up_vote_count":3,"down_vote_count":0,"view_count":3426,"score":3,"question_id":838404,"title":"Implementing a HashMap","body":"<p>How to go about creating a Hashmap in C from scratch ? \nWhat would be the parameters taken into consideration and what how would you test the hashmap as to how good it is ? As in what would be benchmark test cases which you require to run before you say that your hash map is complete.</p>\n"},{"tags":["unit-testing","tfs2010","continuous-integration","build-automation"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":541,"score":4,"question_id":9071807,"title":"TFS Build and Test Impact","body":"<p>I'm playing around with the Test Impact feature of TFS build.\nIt seems like you cannot use this feature if you are using a .vsdmi file, but only if you use a .testsettings file (although the VSDMI file includes a reference to the test settings file).</p>\n\n<p>I have allowed Test Impact in the test settings file, and so on the TFS build configuration.\nThe reason I need to use the VSDMi file is that I created a test  list that i want to be executed in CI. The problem is that all builds show \"No Impacted Test\" though I know there are some.</p>\n\n<p>Am I missing something here? Please find attached the vsdmi file, the testsettings file and a snapshot of the TFS build configuration.</p>\n\n<p><img src=\"http://i.stack.imgur.com/wejl7.png\" alt=\"Config\"></p>\n\n<p>Here is the content of the .testsettings file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;TestSettings name=\"Master\" id=\"68af9170-92f5-49d8-83dd-827359a79042\" xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\"&gt;\n  &lt;Description&gt;These are default test settings for a local test run.&lt;/Description&gt;\n  &lt;Deployment&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Data.Test\\TpEnvFileParser\\InputFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Fake\\FakeData\\HSW\\Resources\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Engines.Build\\Tpie.Engines.Build.Test\\ExpectedFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Engines.Build\\Tpie.Engines.Build.Test\\Resources\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Model\\bin\\Debug\\TerraEntitiesModel.ssdl\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Model\\bin\\Debug\\TerraEntitiesModel.csdl\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Data.Test\\PListFileParser\\InputFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Common\\Terra.Environment.Common.Model\\bin\\Debug\\TerraEntitiesModel.msl\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Client\\Tpie.Client.Common.Test\\ExcelParsers\\InputFiles\\\" /&gt;\n    &lt;DeploymentItem filename=\"..\\Tpie.Engines.Build\\Tpie.Engines.Build.TestProgram\\Templates\\\" /&gt;\n  &lt;/Deployment&gt;\n  &lt;Execution&gt;\n    &lt;ExecutionThread apartmentState=\"MTA\" /&gt;\n    &lt;Timeouts runTimeout=\"1800000\" testTimeout=\"300000\" /&gt;\n    &lt;TestTypeSpecific&gt;\n      &lt;UnitTestRunConfig testTypeId=\"13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b\"&gt;\n        &lt;AssemblyResolution&gt;\n          &lt;TestDirectory useLoadContext=\"true\" /&gt;\n        &lt;/AssemblyResolution&gt;\n      &lt;/UnitTestRunConfig&gt;\n      &lt;WebTestRunConfiguration testTypeId=\"4e7599fa-5ecb-43e9-a887-cd63cf72d207\"&gt;\n        &lt;Browser name=\"Internet Explorer 7.0\"&gt;\n          &lt;Headers&gt;\n            &lt;Header name=\"User-Agent\" value=\"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)\" /&gt;\n            &lt;Header name=\"Accept\" value=\"*/*\" /&gt;\n            &lt;Header name=\"Accept-Language\" value=\"{{$IEAcceptLanguage}}\" /&gt;\n            &lt;Header name=\"Accept-Encoding\" value=\"GZIP\" /&gt;\n          &lt;/Headers&gt;\n        &lt;/Browser&gt;\n      &lt;/WebTestRunConfiguration&gt;\n    &lt;/TestTypeSpecific&gt;\n    &lt;AgentRule name=\"LocalMachineDefaultRole\"&gt;\n      &lt;DataCollectors&gt;\n        &lt;DataCollector uri=\"datacollector://Microsoft/TestImpact/1.0\" assemblyQualifiedName=\"Microsoft.VisualStudio.TraceCollector.TestImpactDataCollector, Microsoft.VisualStudio.TraceCollector, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\"&gt;\n        &lt;/DataCollector&gt;\n      &lt;/DataCollectors&gt;\n    &lt;/AgentRule&gt;\n  &lt;/Execution&gt;\n&lt;/TestSettings&gt;\n</code></pre>\n\n<p>And here is the .vsmdi file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;TestLists xmlns=\"http://microsoft.com/schemas/VisualStudio/TeamTest/2010\"&gt;\n  &lt;TestList name=\"TPIE Auto Build\" id=\"2cbc1525-8079-4959-a126-4d4fb8fdb803\" parentListId=\"8c43106b-9dc1-4907-a29f-aa66a61bf5b6\"&gt;\n    &lt;TestLinks&gt;\n      &lt;TestLink id=\"ee8dae77-c23e-df6b-c6b5-4be930087750\" name=\"LevelTestConditionGroupCheckCalculationDataTypeVoltageTest\" storage=\"..\\tpie.client\\tpie.client.common.test\\bin\\debug\\tpie.client.common.test.dll\" type=\"Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n      &lt;TestLink id=\"74441000-f8e5-ac1b-fbd6-bb94da0bf3ce\" name=\"LevelPowerSequenceBlockCheckSequenceElementTest\" storage=\"..\\tpie.client\\tpie.client.common.test\\bin\\debug\\tpie.client.common.test.dll\" type=\"Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n      &lt;TestLink id=\"afb21bed-4eff-9f9f-7e58-c72e7d133b32\" name=\"TestGetMiscEnvironmentVariables\" storage=\"..\\server\\terra.binmatrix.server.test\\bin\\debug\\terra.server.bl.test.dll\" type=\"Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestElement, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.ObjectModel, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n    &lt;/TestLinks&gt;\n  &lt;/TestList&gt;\n  &lt;TestList name=\"Lists of Tests\" id=\"8c43106b-9dc1-4907-a29f-aa66a61bf5b6\"&gt;\n    &lt;RunConfiguration id=\"68af9170-92f5-49d8-83dd-827359a79042\" name=\"Master\" storage=\"master.testsettings\" type=\"Microsoft.VisualStudio.TestTools.Common.TestRunConfiguration, Microsoft.VisualStudio.QualityTools.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n  &lt;/TestList&gt;\n&lt;/TestLists&gt;\n</code></pre>\n\n<p>Thanks,\nBusi</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12822886,"title":"Individual timeout in nose multiprocessing plugin","body":"<p>I have started using nose to run tests. I discovered the multiprocessing plugin has a timeout, that I can change on the command line.</p>\n\n<p>Is there a way to extend the timeout for individual tests (in the test code) so I don't have a massive global timeout?</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","rspec-rails","rails-postgresql","pg"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12847945,"title":"Cannot create test database in rails 3.2 with postgres","body":"<p>This is an extremely strange one.  Im trying to do a simple <code>rake db:test:clone</code> or create and no matter what I do, from clearing the gemset to trying all sorts of database.yml configs, Im getting the oddest error:</p>\n\n<pre><code>LINE 1: CREATE DATABASE \"tdt_test\"0.0\n</code></pre>\n\n<p>Has anyone ever seen anything like this before?  WTF is that \"0.0!?\" Im running Rails 3.2, RSpec and pg gem 0.14.1</p>\n\n<pre><code> 04:15 PM ~/projects/dmvcs (feature/helpdesk) =&gt; RAILS_ENV=test rake db:create\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require': iconv will be deprecated in the future, use String#encode instead.\n  Notice: for 10x faster LSI support, please install http://rb-gsl.rubyforge.org/\n  PG::Error: ERROR:  syntax error at or near \"0.0\"\n  LINE 1: CREATE DATABASE \"tdt_test\"0.0\n                                    ^\n  : CREATE DATABASE \"tdt_test\"0.0\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:654:in `async_exec'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:654:in `block in execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:653:in `execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:768:in `create_database'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:107:in `rescue in create_database'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:51:in `create_database'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (3 levels) in &lt;top (required)&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `each'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (2 levels) in &lt;top (required)&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'\n  /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `&lt;top (required)&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `&lt;main&gt;'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/bin/ruby_noexec_wrapper:14:in `eval'\n  /Users/jlippiner/.rvm/gems/ruby-1.9.3-p194@dmvcs/bin/ruby_noexec_wrapper:14:in `&lt;main&gt;'\n  Couldn't create database for {\"adapter\"=&gt;\"postgresql\", \"encoding\"=&gt;\"unicode\", \"database\"=&gt;\"tdt_test\", \"username\"=&gt;\"jlippiner\", \"pool\"=&gt;5, \"password\"=&gt;nil}\n  /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:167:in `block in non_options': file not found: db:create (ArgumentError)\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:146:in `map!'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:146:in `non_options'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:207:in `non_options'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:52:in `process_args'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:891:in `_run'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:21:in `run'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'\n    from /Users/jlippiner/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'\n</code></pre>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12847709,"title":"How to pause a Boost unit test?","body":"<p>I'm writing a unit test for a timer I created and I'm running into a problem I encounter often with other projects. I would like to create a unit test that starts my timer, waits a few moments, and then checks the value of my timer after the timer has been run. I could then test all the functionality I have in my timer. </p>\n\n<p>Is there a way to do this? I don't see anything in the documentation. If this is not a good practice, please advise what I should do instead.</p>\n"},{"tags":["javascript","unit-testing","confirm","js-test-driver"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":167,"score":0,"question_id":7965292,"title":"How to handle Confirm Box within JsTestDriver","body":"<p>I am using JsTestDriver for unit tests in JS. One section of my code uses a confirm box to allow users to confirm or cancel a decision.</p>\n\n<p>How to I test both the confirm and cancel selections of this confirm box automatically within the scope of JsTestDriver</p>\n"},{"tags":["c#","unit-testing","visual-studio-2008","binaryfiles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12847773,"title":"How to UnitTest in VisualStudio 2008 looking up records from a DataSet (created by reading a binary file)","body":"<p>I am writing a unit test for how to build retrieval strings from selected records.  I want to initialize my test method so it can get records from the DataSource.  However, my application doesn't use SQL.  It is a desktop C# .NET application that creates a DataTable from binary files.  Should I find some other way besides unit testing to test building the retrieval strings?  The application always creates the DataTable by reading the files.  We don't have a SQL database.  Should I be creating one for testing?  Then how can I test whether the DataSource is created properly if I can't read the files in my unit test?  And how do all the developers who run unit tests get the same file (where to deploy the SQL file and/or the binary files used to create it).</p>\n"},{"tags":["java","unit-testing","struts2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12838521,"title":"Unit testing in struts 2: Not able to inherit protected variables","body":"<p>I have a weird problem. I created a test class by extending <code>StrutsTestCase</code>.</p>\n\n<pre><code>   public class MyActionTest extends StrutsTestCase{\n\n      public void helloTest()\n      {\n\n      }\n  }\n</code></pre>\n\n<p>The struts documentation says <code>request</code> of <code>MockHttpServletRequest</code> will be available by extending <code>StrutsTestCase</code>. Fair enough, it's a protected variable in <code>StrutsTestCase</code> so we should have access to it once we extend the class.</p>\n\n<p>But for some reason, NO protected attribute or method of <code>StrutsTestCase</code> is visible in my <code>MyActionTest</code>.</p>\n\n<p>I don't know if I am missing something, but everything seems straight forward, but yet doesn't work.</p>\n\n<p>Any idea as to why the protected methods of super class are not accessible in subclass ? Should I use some specific package or something ?</p>\n\n<p>List of jars I use for this task :</p>\n\n<ol>\n<li>spring-2.5.3.jar</li>\n<li>spring-mock-1.2.6.jar</li>\n<li>struts2-core-2.0.11.jar</li>\n<li>xwork-core-2.3.1.jar</li>\n</ol>\n\n<p>Am I missing  something ?</p>\n"},{"tags":[".net","visual-studio-2010","unit-testing","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12845394,"title":"Unable to execute test","body":"<p>Any one got any ideas on whats going on. Visual Studio does not execute my tests, the test runner just sits there. \nSee image below where i created a new project, a new test project with a single test. </p>\n\n<p><img src=\"http://i.stack.imgur.com/FLn05.jpg\" alt=\"Screen shoot of test run\"></p>\n"},{"tags":["unit-testing","grails","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3254,"score":0,"question_id":1209080,"title":"Grails domain unit testing - mockFor()","body":"<p>This is the domain class:</p>\n\n<pre><code>class Registration {\n\n  String email\n  String generatedKey\n\n  def beforeInsert = {\n      String newToken = GlobalHelper.getRandomString()\n      generatedKey = newToken\n  }\n}\n</code></pre>\n\n<p>and this is the relevant part of the unit test:</p>\n\n<pre><code>    def c = mockFor(GlobalHelper)\n    c.demand.static.getRandomString {-&gt; return \"nestoABC\" }\n    c.createMock()\n    reg.beforeInsert()\n</code></pre>\n\n<p>When running the test, I get this error:</p>\n\n<p><hr /></p>\n\n<p>No such property: GlobalHelper for class: RegistrationTests</p>\n\n<p>groovy.lang.MissingPropertyException: No such property: GlobalHelper for class: RegistrationTests\nat RegistrationTests.testConstraints(RegistrationTests.groovy:57)</p>\n\n<p><hr /></p>\n\n<p>The GlobalHelper class is located in Groovy source folder, and the mentioned line 57 is the line with the mockFor() method.</p>\n\n<p>Grails Testing docs were not very helpfull regarding this issue...</p>\n\n<p>I know this would be easily solved using integration tests, but I think it should also work this way.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["unit-testing","embedded","continuous-integration","embedded-linux"],"answer_count":5,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":1053,"score":10,"question_id":5904335,"title":"Continuous Integration/ Unit testing in embedded C++ systems","body":"<p>What tools are generally used for unit testing and especially continuous integration for embedded systems?</p>\n\n<p>I am especially thinking that you usually have to cross-compile and deploy, and also that you can't easily visualize the target platform.  Also it can be difficult to run test-code and frameworks.</p>\n\n<p>What could I use too alleviate these difficulties?</p>\n\n<p>(I think it should be some kind of dual targeting, where the build server runs its tests on a easier target) </p>\n"},{"tags":["c#","unit-testing","asynchronous","task-parallel-library"],"answer_count":3,"favorite_count":6,"up_vote_count":12,"down_vote_count":0,"view_count":298,"score":12,"question_id":7852960,"title":"How to write unit tests with TPL and TaskScheduler","body":"<p>Imagine a function like this:</p>\n\n<pre><code>private static ConcurrentList&lt;object&gt; list = new ConcurrentList&lt;object&gt;();\npublic void Add(object x)\n{\n   Task.Factory.StartNew(() =&gt;\n   {\n      list.Add(x); \n   }\n}\n</code></pre>\n\n<p>I don't care WHEN exactly the fentry is added to the list, but i need it to be added in the end ( obviously ;) )</p>\n\n<p>I don't see a way to properly unittest stuff like this without returning any callback-handler or sth. and therefor adding logic that's not required for the program</p>\n\n<p>How would you do it?</p>\n"},{"tags":["asp.net","visual-studio-2010","unit-testing"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2852,"score":3,"question_id":5713926,"title":"VS2010 and ASP.NET unit test problems / WebHostAdapter exception","body":"<p>I've spent half a day trying to get an ASP.NET unit test to work as described in <a href=\"http://www.gangleri.net/2007/12/29/UnitTestingASPNetApplicationsWithVisualStudio2008.aspx\" rel=\"nofollow\">Alan's Development Blog</a>. I don't have VS2008 but VS2010 with SP1 and Resharper 5.1, and no matter what I try I just run into different kinds of errors. </p>\n\n<p>When I add a test project with a test method as follows and specify .NET 4 as target framework, I run into exception</p>\n\n<p><strong>Updated to show more detailed information about the exception</strong></p>\n\n<p><em>\"The test adapter 'WebHostAdpater' threw an exception while running test 'TestMethod1'. The web site could not be configured correctly; getting ASP.NET process information failed. Requesting 'http://localhost:49676/VSEnterpriseHelper.axd' returned an error: The remote server returned an error: (500) Internal Server Error...\"</em></p>\n\n<pre><code>[TestMethod]\n[HostType( \"ASP.NET\" )]\n[UrlToTest( \"http://localhost:49676/Default.aspx\" )]\n[AspNetDevelopmentServerHost( @\"C:\\...\\Projects\\ProjectX\\ProjectX\\\", \"/Default.aspx\") ]\npublic void TestMethod1()\n{\n\n}\n</code></pre>\n\n<p>I've performed numerous searches on the internet regarding this error message, but never really found a solution - I tried adding a section so all users would be allowed access to \"VSEnterpriseHelper.axd\" which is also mentioned in the error message, but it didn't help.</p>\n\n<p>Trying to set the test project's target framework to .NET 3.5 also doesn't help and returns the same error.</p>\n\n<p>While playing around with different settings I also happened to get the error message that the assembly \"Microsoft.VisualStudio.QualityTools.CommandLine\" couldn't be loaded, even though I added the correct version (with the correct public key token) as reference.</p>\n\n<p>Maybe the combination of things (ReSharper, .NET target framework, ...) messes things up, but I also tried disabling the ReSharper unit testing so that MSTest would be used, unfortunately to no avail.</p>\n\n<p>The description in Alan's blog post seems to be quite straightforward, but it doesn't want to work for me.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I also tried to run the example projects from Alan's page in VS2008, but the error is still the same as in VS2010 SP1.</p>\n\n<p><strong>Update 3</strong></p>\n\n<p>Still no luck, but I've added the file <em>Microsoft.VisualStudio.Enterprise.AspNetHelper.dll</em> (located in <em>%PROGRAMFILES%\\Microsoft Visual Studio 10.0\\Common7\\IDE\\PrivateAssemblies</em>) to the web.config as a <em>ConfigurationErrorException</em> in the Windows Event Log indicated that this file was not found:</p>\n\n<pre><code>&lt;dependentAssembly xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n    &lt;assemblyIdentityVersion name=\"Microsoft.VisualStudio.Enterprise.AspNetHelper\" publicKeyToken=\"b03f5f7f11d50a3a\" culture=\"neutral\" /&gt;\n    &lt;codeBase version=\"10.0.0.0\" href=\"file:///C:/Program%20Files%20(x86)/Microsoft%20Visual%20Studio%2010.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.AspNetHelper.dll\" /&gt;\n&lt;/dependentAssembly&gt;\n</code></pre>\n\n<p>This fixed the problem with the AspNetHelper.dll, but I get the same error message for the <em>AspNetAdatpter</em>, but amending the web.config in the same way doesn't work as the error persists. Within Visual Studio I can also see that (when I try to add a handler entry as shown below) the <em>QualityTools.HostAdapters.ASPNETAdapter</em> part is shown in red, indicating in a tooltip \"Cannot resolve symbol 'QualityTools'\":</p>\n\n<pre><code>&lt;add name=\"HostAdapter\" verb=\"GET\" path=\"ASPNETAdapter\" type=\"Microsoft.VisualStudio.QualityTools.HostAdapters.ASPNETAdapter, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n</code></pre>\n\n<p>This is all a big mess, and it seems I've completely lost track, why does it seem to be impossible to run ASP.NET unit tests within VS2010? Is there nobody else who's got the same kind of problems (or, ask the question differently, is there anybody who can run ASP.NET unit test in VS2010 without problems)?</p>\n\n<p>Still trying to get things working...</p>\n\n<p><strong>Update 4</strong></p>\n\n<p>Still no luck, am I the only one? Who can run such tests?</p>\n\n<p><strong>End of update</strong></p>\n\n<p>Any ideas what I'm doing wrong here? Thanks in advance for any pointers into the right direction</p>\n\n<p>G.</p>\n"},{"tags":["java","unit-testing","struts2","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12839655,"title":"How to test struts 2.0.x applications","body":"<p>How do we test action classes of Applications written in 2.0.x version?</p>\n\n<p>I read through <a href=\"http://struts.apache.org/2.x/docs/junit-plugin.html\" rel=\"nofollow\">this link</a> and found out that, struts-junit plugin is only available for struts 2.1.1 or later.</p>\n\n<p>My application is written using struts 2.0.11 and I don't think upgrading the version is easy in my project.</p>\n\n<p>How do we unit test Action classes,given these limitations ?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12840020,"title":"Why visual studio perform skipping tests?","body":"<p>I try to run Visual Studio tests in ASP.NET MVC by pressing \"Run All\" but all tests was skipped, why it happend, how to run all tests? Here is screenshot:</p>\n\n<p><img src=\"http://i.stack.imgur.com/M89Mt.png\" alt=\"enter image description here\"></p>\n"},{"tags":["unit-testing","node.js","requirejs","require","mocha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12836030,"title":"What is the cost of require() in node.js?","body":"<p>I have a test suite using <code>mocha.js</code> that I run to ensure that everything works as it should. For every module I require, I notice about 100ms increase in testing time. And that's on a powerful quad-core machine with 8GB of memory.</p>\n\n<p>What is the real cost of calling <code>require</code> and does it affect application performance or only testing performance?</p>\n\n<p>Version of node is <code>0.8.11</code> if that's relevant.</p>\n"},{"tags":[".net","unit-testing","collections","autofixture","semantic-comparison"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":161,"score":7,"question_id":11718761,"title":"Applying [AutoFixture] SemanticComparison OfLikeness to sequences / collections / arrays / IEnumerable","body":"<p>We have written a test which looks like the following. This test requires that we have created en <code>Equal</code>-overload for the <code>CodeTableItem</code>-class:</p>\n\n<pre><code>ICollection&lt;CodeTableItem&gt; expectedValutaList = new List&lt;CodeTableItem&gt;();\nexpectedValutaList.Add(new CodeTableItem(\"DKK\", \"DKK\"));\nexpectedValutaList.Add(new CodeTableItem(\"EUR\", \"EUR\"));\nRepoDac target = new RepoDac(); \n\nvar actual = target.GetValutaKd();\n\nCollectionAssert.AreEqual(expectedValutaList.ToList(),actual.ToList());\n</code></pre>\n\n<p>The test works fine, but has the unfortunate dependency to the <code>Equality</code>-function, meaning if I extend the <code>CodeTableItem</code>-class with one more field, and forgets to extend the <code>Equals</code>-function, the unit test still runs green, although we do not test for all fields. We want to avoid this <code>Equality</code> pollution (see <a href=\"http://xunitpatterns.com/test-specific%20equality.html\" rel=\"nofollow\">Test Specific Equality</a>), which has been written only  to conform to the test.</p>\n\n<p>We have tried using <code>OfLikeness</code>, and have rewritten the test in this way:</p>\n\n<pre><code>ICollection&lt;CodeTableItem&gt; expectedValutaList = new List&lt;CodeTableItem&gt;();\nexpectedValutaList.Add(new CodeTableItem(\"DKK\", \"DKK\"));\nexpectedValutaList.Add(new CodeTableItem(\"EUR\", \"EUR\"));\nvar expectedValutaListWithLikeness = \n          expectedValutaList.AsSource().OfLikeness&lt;List&lt;CodeTableItem&gt;&gt;();\n\nRepoDac target = new RepoDac(); \nICollection&lt;CodeTableItem&gt; actual;\n\nactual = target.GetValutaKd();\n\nexpectedValutaListWithLikeness.ShouldEqual(actual.ToList());\n</code></pre>\n\n<p>But the test fails because the <code>Capacity</code> is not equal. I have written code that runs through reflection many times, and typically ended up implementing overloads for ignoring fields. Is there a way to ignore certain fields with the <code>OfLikeness</code> or <code>ShouldEqual</code>? Or is there some other way of solving this issue?</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","factory-girl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12836677,"title":"Factory Girl: can one reopen factory definitions and complete them?","body":"<p>Hi have this special use case, in which I have to define a factory in one file without a certain parameter, and then insert it in the factory definition later. This is a case where I am importing factory definitions from an external dependency (gem, plugin, whtv) and I need to extend it in my project. Something like: </p>\n\n<pre><code># external def\nFactoryGirl.define do\n  factory :user do\n    email \"somebody@somebodysworld.com\"\n  end\nend\n\n\n# proj def\nFactoryGirl.define do\n  factory :user do\n    password \"qwerty\"\n  end\nend\n</code></pre>\n\n<p>this code doesn't work, cuz factory girl thinks I'm redefining the factory. But what I'd really want would be extending it. Is this possible?</p>\n"},{"tags":["spring","hibernate","unit-testing","cucumber","hibernate-4.x"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12836548,"title":"How to exposeTransactionAware on a 2nd sessionFactory in hibernate4 + spring?","body":"<p>The test below was working in my application with Hibernate3. When I upgraded it to hibernate4, it started failing.</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(inheritLocations=false,locations={\n\"/hibernate/spring-SF-tests.xml\",\n\"/hibernate/spring-transaction.xml\",\n\"/hibernate/testBeans.xml\"\n,\"/hibernate/spring-audit.xml\",\n\"/hibernate/iwrs-mail-beans-test.xml\",\n\"/hibernate/fake-audit-meaning.xml\"\n})\n@TransactionConfiguration(transactionManager=\"txManager\", defaultRollback=true)\npublic class CodeAuditIntegrationTest extends CodeIntegrationTest {\n\n@Autowired\nprivate SessionFactory auditFactory;\n\n\n@Before\npublic void cleanAudit(){\nauditFactory.getCurrentSession().createQuery(\"delete from AuditLogRecord\").executeUpdate();\n}\n\n@Test\npublic void clinicalTrialAssociationTest() {\nsuper.clinicalTrialAssociationTest();\n}\n\n}\n</code></pre>\n\n<p>Which is failing with:</p>\n\n<blockquote>\n  <p>org.hibernate.HibernateException: No Session found for current thread\n    at\n  org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\n    at\n  org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:881)</p>\n</blockquote>\n\n<p>I have 2 different session factories in my app: sessionFactory and auditFactory. Both are configured in spring (see [1]).</p>\n\n<p>The problem is that in an hibernate4 configuration <strong>the property exposeTransactionAwareSessionFactory was removed</strong>. I had that set to true for my auditFactory. I believe removing this property makes the injected auditFactory not being able to pick up the session in the transaction (as txManger is configured for sessionFactory), therefore yielding the error.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><strong>how can I make the auditFactory have transactions managed by spring on this test?</strong></li>\n<li><strong>Is that what was happening with the exposeTransactionAwareSessionFactory property in hibernate 3?</strong></li>\n</ol>\n\n<p>The only alternative I see is to wrap all the code that uses auditFactory in a Helper class annotated with @Transactional(otherTxManager). I did try that, but I got a couple of additional problems there:</p>\n\n<ol>\n<li>I needed to use a separate DataSource (else I'd get [2])</li>\n<li>Using 2 separate datasources I'll get a similar error on my Cucumber tests, now related with the transactionManager [3]</li>\n</ol>\n\n<p>[1] The relavant XML configuration:</p>\n\n<pre><code>&lt;bean id=\"txManager\"\nclass=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n&lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n\n&lt;tx:annotation-driven transaction-manager=\"txManager\" /&gt;\n\n        &lt;bean id=\"sessionFactory\" scope=\"singleton\"\nclass=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n&lt;property name=\"hibernateProperties\"&gt;\n&lt;props&gt;\n&lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2dll}&lt;/prop&gt;\n&lt;prop key=\"hibernate.hbm2ddl.import_files\"&gt;${hibernate.sql_scripts}&lt;/prop&gt;\n&lt;/props&gt;\n&lt;/property&gt;\n&lt;property name=\"packagesToScan\"&gt;...&lt;/property&gt;\n&lt;property name=\"annotatedPackages\"&gt;...&lt;/property&gt;\n&lt;property name=\"mappingLocations\"&gt;...&lt;/property&gt;\n\n&lt;property name=\"dataSource\" ref=\"c3p0DataSource\" /&gt;\n&lt;property name=\"entityInterceptor\" ref=\"auditInterceptor\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"auditFactory\" scope=\"singleton\"\nclass=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n&lt;property name=\"exposeTransactionAwareSessionFactory\"&gt; --&gt;needs to be removed in hibernate4!\n&lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;property name=\"mappingLocations\"&gt;...&lt;/property&gt;\n&lt;property name=\"packagesToScan\"&gt;...&lt;/property&gt;\n&lt;property name=\"hibernateProperties\"&gt;\n&lt;props&gt;\n&lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2dll}&lt;/prop&gt;\n&lt;/props&gt;\n&lt;/property&gt;\n&lt;property name=\"dataSource\" ref=\"c3p0DataSource\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>[2] Problem with using the same dataSource for the two factories:</p>\n\n<blockquote>\n  <p>org.springframework.transaction.IllegalTransactionStateException: Pre-bound JDBC Connection found! HibernateTransactionManager does not support running within DataSourceTransactionManager if told to manage the DataSource itself. It is recommended to use a single HibernateTransactionManager for all transactions on a single DataSource, no matter whether Hibernate or JDBC access.\n      at org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:329)</p>\n</blockquote>\n\n<p>[3] Problem in cucumber tests due to declaring 2 transaction managers:</p>\n\n<blockquote>\n  <p>org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.springframework.transaction.PlatformTransactionManager] is defined: expected single bean but found 2: txAudit,txManager</p>\n</blockquote>\n"},{"tags":["unit-testing","grails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12835257,"title":"Grails unit testing and bootstrap","body":"<p>I wrote an unit test for a controller.</p>\n\n<p>I have a Bootstrap file which alter the metaclass of domain classes by adding a method <code>asPublicMap()</code>. I use this method in the controller to return domain classes as json but only some selected <em>public</em> fields.</p>\n\n<p>My unit test failed because of <code>MissingMethodException</code> for <code>asPublicMap()</code>. As I understood, bootstrap classes are not loaded for unit tests, only for integration tests. That's why I got this error.</p>\n\n<p>My question is : Is there another place to put metaclass manipulation in order to take them into account during unit tests ?</p>\n"},{"tags":["unit-testing","testing","googletest","gmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12836287,"title":"gmock unit test","body":"<p>Consider this situation</p>\n\n<pre><code>class A\n{\n   A(){}\n   virtual int Method1(){return 0;}\n};\n\nclass B\n{\n   static int Method2(){ return a.Method1();}\n   A a;\n};\n</code></pre>\n\n<p>I need to test class B, so I want to use mocked Method1 to replace real Method1 but not changing class B's code. variable a of class B is neither pointer nor reference, so is there any ways or walk-around to solve this problem. </p>\n"},{"tags":["html","css","unit-testing","cross-browser","automated-tests"],"answer_count":5,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":2118,"score":1,"question_id":4043706,"title":"Automated testing of CSS and HTML front-end coding","body":"<p>I'm a front-end developer coding CSS, HTML and Javascript (in that order) and most of the work I do is design-lead.  Whilst the quality of the <em>designs</em> I create with CSS is subjective, much of the coding is purely functional / layout and I am interested in any way to automate the testing of my page.</p>\n\n<p>My question can be split into two parts</p>\n\n<ol>\n<li><p>Does anyone have any existing\ntechniques or suggestions for\nautomatically testing CSS or HTML,\nparticularly with regard\ncross-browser compatibility?</p></li>\n<li><p>As CSS can be roughly divided\ninto properties that control layout\nand those that control design, is\nautomated testing only viable for\n<strong>layout</strong> (it can't be possible to\nautomatically and valuably test that\na <em>colour</em> is correct, for example)?  If so, what\nsort of CSS values might be suitable\nfor boolean acceptance tests?</p></li>\n</ol>\n\n<p>Here are my initial examples of boolean layout values that could be tested - there must be others? </p>\n\n<ul>\n<li>Does a pop-up appear above other content (z-index)</li>\n<li>Does a footer clear all other content (float)</li>\n</ul>\n\n<p>Thanks for your help.  Part three of the question is of course \"Am I wasting my time going down this route?\".</p>\n\n<p><em><strong></em>* edit <em>*</em></strong></p>\n\n<p>I have found this article that asks the same questions I've asked, but more in depth and perhaps a little more eloquently.  </p>\n\n<p><a href=\"http://morethanseven.net/2008/10/13/unit-testing-css-looking-solution.html\" rel=\"nofollow\">http://morethanseven.net/2008/10/13/unit-testing-css-looking-solution.html</a></p>\n\n<p>Moving forward I am trying to isolate some examples from my work where CSS alone has caused functional errors however those that I've found so far are bugs with JS <strong>and</strong> CSS combined.  I would still like to automatically test these sorts of errors, but appreciate that with javascript used it is beyond the scope of my original question.</p>\n\n<p><em><strong></em>* edit 2 <em>*</em></strong></p>\n\n<p>I've since blogged about how I set about solving this problem, available here:</p>\n\n<p><a href=\"http://blog.ajcw.com/2010/12/automated-css-testing-or-how-one-css-coder-is-now-responsible-for-breaking-%E2%80%93-and-fixing-%E2%80%93-the-build/\" rel=\"nofollow\">http://blog.ajcw.com/2010/12/automated-css-testing-or-how-one-css-coder-is-now-responsible-for-breaking-%E2%80%93-and-fixing-%E2%80%93-the-build/</a></p>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12363319,"title":"Error running 'Cedar' unit tests from command line","body":"<p>I'm using the cedar testing framework and trying to run the tests from command line.\nThe build crashes with this error:</p>\n\n<pre><code>Unresolved error Error Domain=NSCocoaErrorDomain Code=512 \"The operation couldn’t be completed. (Cocoa error 512.)\" UserInfo=0x6c5c6c0 {reason=Failed to create file; code = 2}, {\nreason = \"Failed to create file; code = 2\";\n}\n</code></pre>\n\n<p>The tests run from xcode without any problems, I just can't get them to work from command line.\nAny ideas?\nThanks</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","console","visual-studio-express"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1079,"score":4,"question_id":6137009,"title":"Microsoft Visual Studio: How to keep the console open without manually reading input?","body":"<p>I'm writing some C++ with Microsoft Visual Studio 2010 Express, and I'm wondering if there is a way to display command output somewhere in the IDE instead of an external console window, or at least keep that window open.</p>\n\n<p>Reading something from STDIN would work for a console application, but this is a unit test case and I don't want to modify the generated main function. Is there another way?</p>\n"},{"tags":["android","unit-testing","android-resources","android-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12822183,"title":"Accessing resource of a library referenced by a referenced project","body":"<p>I have a test project X that tests project Y. Project Y has library Z as reference. library Z has a raw resource R1 which I'm trying to open but I keep getting resource not found. The raw resource is in res/raw folder within the library.</p>\n\n<p>I tried openRawResource with the relevant packageManager but it did not seem to help.\nAny idea? Is there any logical mistake in my resource allocation?</p>\n\n<p>didn't work:</p>\n\n<pre><code>PackageManager pmMgr = getInstrumentation().getTargetContext().getPackageManager();\nResources rMgr = pmMgr.getResourcesForApplication(\"PROJECT.Y.PACKAGE\");\nInputStream is = rMgr.openRawResource(package.library.z.raw.R1);\n</code></pre>\n\n<p>neither did</p>\n\n<pre><code>PackageManager pmMgr = getInstrumentation().getContext().getPackageManager();\nResources rMgr = pmMgr.getResourcesForApplication(\"PROJECT.Y.PACKAGE\");\nInputStream is = rMgr.openRawResource(package.library.z.raw.R1);\n</code></pre>\n\n<p>P.S.\nI verified that R1 is wrapped into the .apk of the referenced project (Y) under res/raw as well.</p>\n"},{"tags":["unit-testing","cakephp","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":103,"score":4,"question_id":11579508,"title":"Cakephp 2.0 mock auth","body":"<p>I am developing an app in Cake 2.2,\nand am currently writing some unit tests.\nThe model tests are working fine, i have some issues with the controller tests in general.</p>\n\n<p>The situation:\n- most of the actions require a user login\n- there are custom components and vendor libraries\n- I have fixtures for all tables</p>\n\n<p>The problem:\n- Many actions use the \"$this->Auth->user()\" method to get the user-data\n- If i write a test for that action, the user-data is (obviously) not existant</p>\n\n<p>My (not working) solution:\n - I tried to mock the auth component, so that it would contain the user-method and always return a static array containing the user data, but it returns null, here's the code:</p>\n\n<pre><code>$Days = $this-&gt;generate('Days', array('components' =&gt; 'Auth'));\n$Days-&gt;Auth-&gt;expects($this-&gt;once())-&gt;method('user')-&gt;will($this-&gt;returnValue(array(..userdata etc.)));\n$result = $this-&gt;testAction('/days/settings');\n</code></pre>\n\n<p>It just keeps saying that the method was not called (altough the settings method inside the Days controller calls it exactly one time).\nWhat is wrong with the mockup? Hmmm..</p>\n\n<p>Any help would be appreciated!</p>\n\n<p>-edit-\nThe code of the method that is being tested:</p>\n\n<pre><code>public function myDays()\n{\n   $user = $this-&gt;Auth-&gt;user();\n   $days = $this-&gt;Day-&gt;find('all', array('conditions' =&gt; array('user_id' =&gt; $user['id'], 'active' =&gt; 1)));\n   $this-&gt;set('days', $days);\n}\n</code></pre>\n"},{"tags":["unit-testing","testing","nunit","signalr"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":346,"score":6,"question_id":10797368,"title":"Unittest SignalR Hubs","body":"<p>I Would like to test my Hub in SignalR, what is the best approach? </p>\n\n<p>Possible solutions I have thought about so far:</p>\n\n<ul>\n<li>Create a testable Hub</li>\n<li>Abstract logic to separate class</li>\n<li>Selenium (would like to test smaller units)</li>\n<li>Or is it some SignalR testing features have overlooked</li>\n</ul>\n\n<p>Currently using SignalR 0.4, and NUnit as the testing framework.</p>\n"},{"tags":["objective-c","unit-testing","mocking","class-method","ocmock"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":999,"score":1,"question_id":5600145,"title":"OBjective C & OC Mock - Mocking a class method?","body":"<p>I need to be able to determine whether a class method was called or not.\nHow can I do this with OCMock?</p>\n"},{"tags":["ruby-on-rails","unit-testing","rspec","jbuilder"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":209,"score":2,"question_id":9946326,"title":"How to use RSpec with JBuilder?","body":"<p>I'm looking for a clean way to use <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow\">JBuilder</a> and test the json output with RSpec. The popular way for JSON testing is to implement the as_json method, and then in RSpec compare the received object with the object.to_json method. But a large reason I'm using JBuilder is that I don't want all the attributes that to_json spits out; so this breaks comparison.</p>\n\n<p>Currently with JBuilder I'm having to do the following to test the RSpec results:</p>\n\n<p>1) Create a Factory object: @venue</p>\n\n<p>2) Create a hash inside my RSpec test that contains the \"expected\" JSON string back</p>\n\n<pre><code>@expected =&gt; {:id =&gt; @venue.id,:name=&gt;@venue.name..........}\n</code></pre>\n\n<p>2) Compare the @expected string to the results.response.body that is returned from the JSON call.</p>\n\n<p>This seems simple, except I have objects being rendered with 15+ attributes, and building the @expected hash string is cumbersome and very brittle. Is there a better way to do this?</p>\n"},{"tags":["javascript","unit-testing","mstest","jasmine"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":368,"score":4,"question_id":6526959,"title":"Does anyone have an mstest runner for Jasmine?","body":"<p>Given the rather extensive existing library of tests in MStest, I would like to add jasime for testign javascript and inbclude those new test in the MSTesting framework so that there is minimal disruption to current TDD patterns...</p>\n\n<p>If anyone knows of an existing mstest runner for Jasmine, I would appreciate it.  Would save time now having ot build one myself.  Also opne to other MSTest integration ideas as well, just in case I'm chasing the wrong solution...</p>\n\n<p>Our current continuos integration/source control solution is TFS 2010.</p>\n\n<p>Development is with VS 2010 and the resharper plugin.</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12796813,"title":"Nunit execution Process","body":"<p>I am running my unit test using nunit.exe. The first time it runs successfully. When I click the run button the second time it gives the following error.</p>\n\n<p>In The first route in the global.aspx file.</p>\n\n<p>Error</p>\n\n<pre><code>UnitTestSample.Tests.Controllers.DownloadControllerTest.TestEvalstart:\nSystem.ArgumentException : A route named 'GoogleNotification' is already in the route collection. Route names must be unique.\nParameter name: name\n</code></pre>\n\n<p>Can you please let me know how to resolve this problem?</p>\n"},{"tags":["android","unit-testing","bundle","parcelable"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12829700,"title":"Android Unit Testing: Bundle/Parcelable","body":"<p>How do you unit test Parcelable?  I created a Parcelable class, and wrote this unit test</p>\n\n<pre><code>TestClass test = new TestClass();\nBundle bundle = new Bundle();\nbundle.putParcelable(\"test\", test);\n\nTestClass testAfter = bundle.getParcelable(\"test\");\nassertEquals(testAfter.getStuff(), event1.getStuff());\n</code></pre>\n\n<p>I purposely try to fail the test by returning null in the <code>createFromParcel()</code>, but it seems to succeed. It looks like it doesn't get parceled until it's needed. How do I force the Bundle to..bundle?</p>\n"},{"tags":["python","unit-testing","pyunit"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":5777,"score":2,"question_id":1230498,"title":"python unittest assertRaises throws exception when assertRaises fails","body":"<p>I've got code where assertRaises throws an exception when assertRaises fails.  I thought that if assertRaises fails then the test would fail and I'd get a report at the end that says the test failed.  I wasn't expecting the exception to be thrown.  Below is my code.  I'm I doing something wrong?  I'm using Python 2.6.2.</p>\n\n<pre><code>import unittest\n\nclass myClass:\n\n    def getName(self):\n\n        raise myExcOne, \"my exception one\"\n        #raise myExcTwo, \"my exception two\"\n        #return \"a\"\n\nclass myExcOne(Exception):\n    \"exception one\"\n\nclass myExcTwo(Exception):\n    \"exception two\"\n\n\nclass test_myClass(unittest.TestCase):\n\n    def setUp(self):\n\n        self.myClass = myClass()\n\n    def testgetNameEmpty(self):\n        #self.assertRaises(myExcOne,self.myClass.getName)\n        #self.assertRaises(myExcTwo,self.myClass.getName)\n\n        try:\n            self.assertRaises(myExcTwo,self.myClass.getName)\n        except Exception as e:\n            pass\n\nif __name__ == \"__main__\":\n\n    #unittest.main()\n\n    suite = unittest.TestLoader().loadTestsFromTestCase(test_myClass)\n    unittest.TextTestRunner(verbosity=2).run(suite)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","unit-testing","acceptance-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12826440,"title":"ATDD - Where do acceptance tests start?","body":"<p>I am trying to understand acceptance tests, but I am confused where it starts or what kind of test/s is/are involved.\nDo I have to use automating GUI test frameworks or do I have to use unit tests? What is the boundary of an acceptance test?</p>\n\n<p>Edit: My question is about <strong>automated</strong> acceptance tests.</p>\n"},{"tags":["unit-testing","mocking","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12827580,"title":"Mocking vs. Spying in mocking frameworks","body":"<p>In mocking frameworks, you can mock an object or spy on it. What's the difference between the two and when would/should I use one over the other? Looking at mockito, for example, I see similar things being done using spies and mocks, but I am unsure as to the distinction between the two.</p>\n"},{"tags":["unit-testing","node.js","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12823813,"title":"How should I organize my unit & integration tests?","body":"<p>I am working with whats going to turn into quite a big <code>node.js</code>-based javascript application and started to think about how I should organize my testing.<br>\nThe application is basically a REST API, so requests are authenticated, user submitted data is validated and then persisted in a database.</p>\n\n<p>I am completely unfamiliar on how to organize the testing of a project of this size. </p>\n\n<p>Should I test each resource separately starting with modular unit testing, ending with full scale integration testing?<br>\nOr should I test layerwise - ie authentication, validation, persistence &amp; integration separately for each resource?</p>\n\n<p><strong>What is common sense?</strong></p>\n"},{"tags":["java","spring","unit-testing","spring-mvc","spring-test-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12820053,"title":"Easier way to test with Spring-test-mvc in IntelliJ IDEA? Alternatives?","body":"<p>I've been recently trying out spring-test-mvc since using the handlerAdapter and handlerMapping objects in the application context no longer support session attributes when you pass objects in that way like they used to in Spring 3.0.</p>\n\n<p>Is there any way to ease the coding of these tests from IntelliJ IDEA? Having to import so many static methods is rather time-consuming, and to be honest, I preferred my older method of testing a lot more (but I can no longer do it that way in 3.1). Is there any way to tell IntelliJ IDEA: \"If I type <code>get()</code>, automatically import that method statically\" ?</p>\n\n<p>Are there any other alternatives to spring-test-mvc that are easier to code against but also test request mappings in addition to controller logic? I also need to support session attributes.</p>\n\n<p>In addition to the weird syntax of writing tests in spring-test-mvc, it seems really odd to pass in session attributes into the controller. They seem to encourage creating an object constructor where you pass the session objects in that way... but I don't want to make this constructor on my controllers when it is not used during production. That's gotta be a testing anti-pattern, but I don't see any other way to pass in a session object as part of the request and their examples encourage making this object constructor.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","unit-testing","automated-tests","automated-testing"],"answer_count":8,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":500,"score":3,"question_id":3252883,"title":"Creating a test case for a buffer overflow error (C/c++)","body":"<p>How do you create a unit test case in c for a buffer overflow that does not cause a memory error such as a segfault?</p>\n\n<p>I.e. Given a simple buffer overflow, such as</p>\n\n<pre><code>int function () {\n    int exampleArray[10];\n    exampleArray[10] = 5;\n    return 0;\n}\n</code></pre>\n\n<p>How do you create a unit test for this code? There is clearly an error, we are writing past the end of an array. However, you can run a function like this without any evidence of the error.</p>\n\n<p>Note: I need to be able to create test cases for when the index to the array is supplied at run time by the user as well as the above simplified case.</p>\n\n<p>In a managed language like Java the code will throw an exception (ArrayIndexOutOfBoundsException) which can be caught. So creating a test case is straightforward (a try-catch block for the exception).</p>\n\n<p>How would such a test be created in c? Can any of the unit testing frameworks for C handle such a situation?</p>\n\n<p>Background Information:  I'm trying to do automatic test case generation. I know where the errors are and would like to be able to create a unit test to fail on these bugs.</p>\n\n<p>However I wouldn't have the faintest idea how to create a test case that fails for a buffer overflow bug that doesn't crash the application.</p>\n"},{"tags":["c#",".net","unit-testing","nunit","testcasesource"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12821867,"title":"TestCaseSource in N-Unit","body":"<p>I'm writing some N-Unit tests and I'm having a little difficulty. I'm trying to wire up a Test to a <code>TestCaseSource</code> in my code, but it doesn't seem to be constructing the objects correctly.</p>\n\n<p>Here is my Test Method:</p>\n\n<pre><code>    [Test, TestCaseSource(typeof(TestCaseStuff), \"GetTestCases\", Category = \"Release\")]\n    public void WithdrawMoney(TestCaseStuff tc)\n    {\n        double newBalance = AccountBalance - tc.amt;\n        if (newBalance &lt; 0)\n        {\n            Assert.Fail(String.Format(\"You can't withdraw {0}! You've maxed\" +\n                \"out your bank account.\", tc.amt.ToString(\"C2\")));\n        }\n\n        AccountBalance = newBalance;\n        Assert.Pass(String.Format(\"Your new balance is {0}.\", \n        (AccountBalance).ToString(\"C2\")));\n    }\n</code></pre>\n\n<p>And my <code>TestCaseSource</code>:</p>\n\n<pre><code>public class TestCaseStuff\n{\n    public double amt { get; set; }\n\n    public TestCaseStuff()\n    {\n        Random rnd = new Random();\n        this.amt = rnd.Next(0, 20);\n    }\n\n    [Category(\"Release\")]\n    public IEnumerable&lt;TestCaseData&gt; GetTestCases()\n    {\n        for (int i = 0; i &lt; 500; i++)\n        {\n            yield return new TestCaseData(this);\n        }\n    }\n}\n</code></pre>\n\n<p>The is mostly serving as proof of concept, so that when it comes time to write an actual test with complex objects, I'll know that I can just write a loop like the one above and put random values in my object. However, every instance of <code>TestCaseStuff</code> that is returned to my test method is the same.</p>\n\n<p>Update:</p>\n\n<p>The answer below is correct. When I was passing it into N-Units <code>TestCaseData</code> object, I assumed (incorrectly) that it would simply pass that instance in by value. Apparently, it is done by reference which is why the value was always the same. </p>\n\n<p>On top of that, I was using the <code>Random</code> class incorrectly. It isn't something I deal with usually, but I failed to read up on it properly. As explained in the link below, when using <code>Random</code> with it's default constructor, the seed value is derived from the system clock. As a result, if you instantiate several <code>Random</code> objects in quick succession they will share the same default seed value and produce the same values.</p>\n\n<p>So, as a result of these developments, my code now reads:</p>\n\n<pre><code>public class TestCaseStuff\n{\n    public double amt { get; set; }\n    private static readonly Random rnd = new Random();\n\n    public TestCaseStuff()\n    {\n        this.amt = rnd.Next(0, 20);\n    }\n\n    [Category(\"Release\")]\n    public IEnumerable&lt;TestCaseData&gt; GetTestCases()\n    {\n        for (int i = 0; i &lt; 500; i++)\n        {\n            yield return new TestCaseData(new TestCaseStuff());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["unit-testing","maven-2"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":898,"score":3,"question_id":2978471,"title":"How to use maven resources also as test resources","body":"<p>I have a maven project that loads an xslt file and executes the transformation along with other processing on the result. Normally when the user runs the application, the user provides the xslt file path to be loaded. But I include some default xslt files bundled inside my application that the user can use without loading any external xslt file. I do this by adding them to src/main/resources/xslt. My problem is that I want to run tests against those xslt files in testing phase. How can I achieve this? Should I copy the src/main/resources/xslt contents to target/somewhere and load these in my test classes code? Which plugin is used for that?</p>\n"},{"tags":["python","unit-testing","functional-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":12824282,"title":"print statement is not working in python proboscis","body":"<p>We started writing our functional and unit test cases in python using nose framework. We started  learning python while writing these tests. Since there are lot of dependencies between our test classes/functions, we decided to use <a href=\"http://packages.python.org/proboscis/\" rel=\"nofollow\">proboscis framework</a> on top of nose to control order of execution.</p>\n\n<p>We have quite a few 'print' statements in our tests and proboscis seems to be ignoring these! Tests are running in expected order and testing them all but not printing our print statement data to console. Any idea what we are missing here?</p>\n\n<p>BTW, we stopped deriving our classes from 'unittest.TestCase' once we moved to proboscis and decorated all classes and their member functions with @test.</p>\n"},{"tags":["c#",".net","unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":118,"score":4,"question_id":12716777,"title":"Test Explorer > Run All : System.Exception: Failed to find the main application assembly","body":"<p>When I run a selected test, the test run correctly in Test Explorer. However, when use the <code>Run All</code> button, VS2012 throws a <code>System.Exception</code> that states </p>\n\n<blockquote>\n  <p>Failed to find the main application assembly...</p>\n</blockquote>\n\n<p>Is there a place that I can configure the Test Explorer to find the application assembly?</p>\n\n<p>An example would be greatly appreciated.</p>\n"},{"tags":["unit-testing","legacy-code"],"answer_count":6,"favorite_count":6,"up_vote_count":19,"down_vote_count":0,"view_count":1843,"score":19,"question_id":1541568,"title":"Adding unit tests to legacy code","body":"<p>Have you ever added unit tests, after the fact, to legacy code?  How complicated was code and how difficult to stub and mock everything?  Was the end result worthwhile?</p>\n"},{"tags":[".net","unit-testing","anonymous-types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12801259,"title":"How can I Assert on anonymous types in c#","body":"<p>I have a logic type that returns an array of anonymous types. Is there a way for me to assert on the value of these types? Here's what I'm thinking but that doesn't work.</p>\n\n<pre><code>[TestMethod]\npublic void TestStuff()\n{\n    var actual = GetAnonymousThings();\n    // how can I assert the first b is \"one\"?\n    Assert.AreEqual(\"one\", actual[0].b); // does not compile natch\n}\n// this is just a stub example of the code under test\nprivate static object[] GetAnonymousThings()\n{\n    return new object[] { new { a = 1, b = \"one\" }, new { a = 2, b = \"two\" } };\n}\n</code></pre>\n\n<p>Thanks for the comments guys. I would like to add this comment under yours as appropriate but I don't seem to have sufficient reputation!  And now I can't see them from this edit page, so bear with me.\nAs for how the anonymous types are used... they are serialized to JSON for the client so I could test them there I suppose is your point.</p>\n"},{"tags":["visual-studio","unit-testing","visual-studio-2012","gallio","test-runner"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":189,"score":3,"question_id":12730640,"title":"How do I configure VS2012 test runner to pick up and run Gallio unit tests?","body":"<p>I've recently upgraded to VS2012 to iron out problems ahead of my team.  We use Gallio 3.3 as a unit tests framework and have numerous tests written which work in VS2010.  However, VS2012 does not appear to recognise them.</p>\n\n<p>The VS2012 Test Explorer windows says \"Build your solution to discover all available tests\".  I have done several clean builds, and the system runs in VS2012, but no tests appear.</p>\n\n<p>Is there any configuration I need to put in, or any way I can get these tests to run in VS2012?</p>\n"},{"tags":["html5","unit-testing","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12823029,"title":"Unit Testing AJAX-y UI with Visual Studio","body":"<p>I have a UI that is going to leverage HTML 5, css, jquery, and kendo very heavily. Ideally, I'd really like to write tests that simulate a user performing actions. I'm kind of new to this whole unit testing thing. I understand how it works with procedural code. However, I'm not sure how it works with event-based code such as a HTML 5 UI.</p>\n\n<p>Can someone give me some ideas of how to automate testing a HTML UI with visual studio?</p>\n\n<p>Thank you!</p>\n"},{"tags":["python","unit-testing","monkeypatching"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":62,"score":4,"question_id":12822355,"title":"How do I unit test a monkey patch in Python","body":"<p>I have a utility method that behaves like this</p>\n\n<pre><code>def my_patch_method(self):\n    pass\n\ndef patch_my_lib():\n    from mylib import MyClass\n    MyClass.target_method = my_patch_method\n    return MyClass()\n</code></pre>\n\n<p>This test fails:</p>\n\n<pre><code>self.assertEqual(my_patch_method, patch_my_lib().target_method)\n</code></pre>\n\n<p>Whereas this one works:</p>\n\n<pre><code>self.assertEqual(my_patch_method.__name__, patch_my_lib().target_method.__name__)\n</code></pre>\n\n<p>As the patch method does not have the same name, this is still acceptable proof that <code>patch_my_lib()</code> is doing what it's payed for but why doesn't the first work as I would expect ? And, is there a way to \"fix\" it ?</p>\n"},{"tags":["unit-testing","cakephp","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12712865,"title":"Use a different email config during unit testing in CakePHP","body":"<p>I'm sending an email using the CakeEmail class in an action of one of my controllers. I have a unit test for this controller that was working fine before adding the email code. After adding the email I get this error:</p>\n\n<blockquote>\n  <p>SocketException: Could not send email.</p>\n</blockquote>\n\n<p>This is down to the fact that I don't have any way of sending emails off my local machine.</p>\n\n<p>So I thought that maybe a good idea would be to have two different configuration options inside the EmailConfig class in Config/email.php (Similar to how the database config file works). The default using the Mail transport, and a test using the Debug transport. The issue with this is that, unlike the database config, Cake doesn't automatically switch between the two during testing.</p>\n\n<p>The only thing I have thought of is to add a constructor to the EmailConfig class and test if we're unit testing, but I'm not sure what the check should be.</p>\n\n<p>Something along the lines of this:</p>\n\n<pre><code>class EmailConfig {\n\n    public $default = array(\n        'transport' =&gt; 'Mail'\n    );\n\n    public $test = array(\n        'transport' =&gt; 'Debug'\n    );\n\n    public function __construct() {\n        if ($isUnitTesting) {\n            $this-&gt;default = $this-&gt;test;\n        }\n    }\n\n}\n</code></pre>\n\n<p>Would my way suggested above be a good idea? If not, what other ways can I use a different transport for the email during unit testing?</p>\n\n<hr>\n\n<p><strong>Update - 4/10/2012</strong></p>\n\n<p>I think I was going about this the wrong way. Looking at <a href=\"http://stackoverflow.com/a/8600556/343465\">this answer</a> it seems that even the <code>$default</code> config isn't loaded by default, you have to specify it by calling the <code>CakeEmail::config()</code> method or give it in the constructor. So I think this leaves me two options now:</p>\n\n<ol>\n<li>In the controller check if we're unit testing (somehow?) and then use the 'test' config.</li>\n<li>Set up my computer to be able to send emails.</li>\n</ol>\n\n<p>I'd rather do the first but unsure how this can be done without bloating the controller action with checks if we're unit testing, it seems wrong to do this.</p>\n"},{"tags":["python","unit-testing","python-2.7","python-mock"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12821090,"title":"How to assert a mock was invoked with a specific type rather than instance?","body":"<p>I'm using the latest version of mock and python 2.7.3</p>\n\n<p>I'm building my first flask app and I'm testing some basic middleware to see if flask.abort() happens (and when it does, I assert a method was called with the Unauthorized exception)</p>\n\n<pre><code>    def test_invokes_raise_http_exception_when_apply_blows_up(self):\n        start_response = mock.Mock()\n        self.sut = BrokenMiddleware(self.app)\n        with mock.patch.object(self.sut, 'raise_http_exception') as raise_up:\n            self.sut.__call__({}, start_response)\n        raise_up.assert_called_once_with(Unauthorized(), start_response)\n\nclass BrokenMiddleware(Middleware):\n\n    def apply_middleware(self, environ):\n        flask.abort(401) \n</code></pre>\n\n<p>Here is my production code</p>\n\n<pre><code>class Middleware(object):\n    def __call__(self, environ, start_response):                                                                               \n        try:\n            self.apply_middleware(environ)\n        except Exception as e:\n            return self.raise_http_exception(e, start_response)\n\n    def raise_http_exception(self, exception, start_response):\n        pass\n</code></pre>\n\n<p>The issue I'm having is that mock fails the assert because the 401 raised is not the same as the one I'm expecting in the assertion itself.</p>\n\n<p>If I only care about the type, not the actual instance how could i rewrite the assertion?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","moq","elmah"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":336,"score":1,"question_id":10657961,"title":"Elmah error logging FromCurrentContext breaks when unit testing","body":"<p>When writing unit tests using Moq anytime I call the <code>Elmah.ErrorSignal.FromCurrentContext</code> it fails with a null reference exception. I am able to mock the <code>ControllerContext</code> and I would like to just use an error log command like this..</p>\n\n<pre><code>Elmah.ErrorSignal.FromContext(ControllerContext.HttpContext).Raise(e);\n</code></pre>\n\n<p>but unfortunately the <code>ControllerContext.HttpContext</code> is of type <code>HttpContextBase</code> and won't work with this error logging method. </p>\n\n<p>Is there a better way to call the Elmah error logging directly? Unfortunately the <code>Application.HttpContext</code> object cannot be mocked (below example) or that would also serve the purpose. </p>\n\n<p>Mock <code>Application</code> and <code>Application.HttpContext</code>:</p>\n\n<pre><code>ctrlCtx.SetupGet(x =&gt; x.HttpContext.ApplicationInstance)\n           .Returns(new Mock&lt;HttpApplication&gt;().Object);\nctrlCtx.SetupGet(x =&gt; x.HttpContext.ApplicationInstance.Context)\n           .Returns(new Mock&lt;HttpContext&gt;().Object);\n</code></pre>\n\n<p>Error Produced:</p>\n\n<p>Invalid setup on a non-virtual (overridable in VB) member</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":6,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":2991,"score":8,"question_id":2463232,"title":"PHPUnit: force display of asserted values","body":"<p>When in PHPUnit test fails, actual and expected values are displayed.<br>\nBut when the test passes, this information is not displayed.</p>\n\n<p>How to force PHPUnit to always display expected and actual assertion result?</p>\n"},{"tags":["visual-studio-2008","unit-testing","nunit","mstest","integration-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":570,"score":0,"question_id":2901219,"title":"Ms Test or NUnit?","body":"<p>Is there any advantage to picking NUnit for unit/integration testing vs the built in MsTest?  </p>\n"},{"tags":["java","unit-testing"],"answer_count":6,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":12820935,"title":"How to make all unit tests fail","body":"<p>I would like to find unit tests (written with JUnit) which never fail. I.e. tests which have something like </p>\n\n<pre><code>try {\n// call some methods, but no assertions\n} catch(Throwable e) {\n// do nothing\n}\n</code></pre>\n\n<p>Those tests are basically useless, because they will never find a problem in the code. So is there a way to make each (valid) unit test fail? For instance each call to any assert method would throw an exception? Then tests which still remain green are useless.</p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12820881,"title":"There are an execution context for unit tests in C#?","body":"<p>I know that <code>HttpContext</code> is for ASP.NET service and <code>OperationContext</code> is for WCF service method.</p>\n\n<p>What is the execution context for Unit test methods ?</p>\n\n<p>I have a function which construct an url based on given controller and action but it is used inside unit test method.</p>\n\n<pre><code>[TestMethod]\npublic void GetUrlFromSpecificController(){\n   Assert.IsTrue(string.IsNullOrEmpty(MyClass.TransformUrl(\"AController\", \"AnAction\")));\n}\n</code></pre>\n\n<p>And the method:</p>\n\n<pre><code>public static string GetUrlFromSpecificController(string controller, string action)\n{\n   UriBuilder urlBuilder = null;\n\n   if(HttpContext.Current != null){\n      UrlHelper urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);\n      urlBuilder = new UriBuilder(HttpContext.Current.Request.Url.AbsoluteUri) {\n         Path = urlHelper.Action(action, controller)\n      }; \n   } else {\n      string url = OperationContext.Current.IncomingMessageHeaders.To.AbsoluteUri; // for WCF service\n      urlBuilder = new UriBuilder(url);\n      urlBuilder.Path = string.Concat(urlBuilder.Path, \"/\", controller, \"/\", action);\n   }\n\nreturn HttpUtility.UrlDecode(urlBuilder.ToString());\n}\n</code></pre>\n\n<p>How if is possible to construct the request url using UnitTest (by calling HttpContext or OperationContext) ?</p>\n\n<p>I have to set up something in UnitTests before ?</p>\n\n<p>I have also put in UnitTest using the <a href=\"http://stackoverflow.com/users/250230/anton\">Anton</a>'s advice here: <a href=\"http://stackoverflow.com/questions/3234693/using-httpcontext-in-unit-test\">Using httpcontext in unit test</a> but without success.</p>\n"},{"tags":["c#","sql-server","sqlite","unit-testing","unity"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12819728,"title":"Leaving a Database Connection Open?","body":"<p>My web application has the following class:</p>\n\n<pre><code>public class DatabaseProvider {\n    private readonly IDbConnection _cn;\n\n    public DatabaseProvider(IDbConnection cn) {\n        _cn = cn;\n    }\n\n    public void ExecuteNonQuery(string query) {\n        // Execute the query\n        var cmd = _cn.CreateCommand();\n        cmd.CommandText = query;\n        cmd.ExecuteNonQuery();\n    }\n}\n</code></pre>\n\n<p>Where the IDbConnection dependency is declared using the following code (with Microsoft Unity):</p>\n\n<pre><code>container.RegisterType&lt;IDbConnection&gt;(new InjectionFactory(c =&gt; {\n    var cn = new SqlConnection(\"...\");\n    cn.Open();\n    return cn;\n}));\n</code></pre>\n\n<p>This allows me to swap out the connection to SQLite like so:</p>\n\n<pre><code>container.RegisterType&lt;IDbConnection&gt;(new InjectionFactory(c =&gt; {\n    var cn = new SQLiteConnection(\"Data Source=:memory:;Version=3;\");\n    cn.Open();\n    return cn;\n}));\n</code></pre>\n\n<p>I use SQLite when testing and the connection must remain open otherwise the data is lost. Therefore I can't just open and close the connection when needed.</p>\n\n<p>I have always opened the connection to the database when it was needed and was wondering whether this will scale for large applications?</p>\n\n<p>I'd appreciate any advice on how this can be improved. Thanks</p>\n"},{"tags":["java","unit-testing","google-app-engine","memcached","testng"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12809336,"title":"NullPointerException calling tearDown() on Google App Engine LocalSErviceTestHelper","body":"<p>I am writing tests (integration and unit) for a Google App Engine Java app that relies heavily on Google App Engine services such as Memcache and Datastore. In order to test my application locally using these services, I have this line in the parent class of all my test cases:</p>\n\n<pre><code>private final LocalServiceTestHelper helper = new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig(), new LocalMemcacheServiceTestConfig());\n</code></pre>\n\n<p>I begin every test with this function call (via TestNG's <code>@BeforeMethod</code> annotation):</p>\n\n<pre><code>helper.setUp();\n</code></pre>\n\n<p>And I end every test with this function call (via TestNG's <code>@AfterMethod</code> annotation):</p>\n\n<pre><code>helper.tearDown();\n</code></pre>\n\n<p>(Here's a reference to <a href=\"http://testng.org/doc/documentation-main.html#annotations\" rel=\"nofollow\">TestNG annotations</a> and <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting\" rel=\"nofollow\">local unit testing for Google App Engine's Java Runtime</a>, in case you need it. Especially for the latter link, note that my code strictly follows the examples given by Google)</p>\n\n<p>One thing to note is that one of my servlets in the Java app uses an instance of MemcacheService. It is injected into the servlet's constructor by Guice.</p>\n\n<p>Now, I build my code and run it via a call to <code>mvn clean install</code>, which will start an instance of <em>Jetty</em> and run my tests after the code has been compiled. <strong>Much to my chagrin,</strong> I get this stack trace printed before TestNG reports mass test failure:</p>\n\n<pre><code>SEVERE: Received exception tearing down config of type com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig\njava.lang.NullPointerException\nat com.google.appengine.tools.development.testing.LocalServiceTestHelper.getLocalService(LocalServiceTestHelper.java:495)\nat com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig.getLocalMemcacheService(LocalMemcacheServiceTestConfig.java:71)\nat com.google.appengine.tools.development.testing.LocalMemcacheServiceTestConfig.tearDown(LocalMemcacheServiceTestConfig.java:47)\nat com.google.appengine.tools.development.testing.LocalServiceTestHelper.tearDown(LocalServiceTestHelper.java:438)\nat com.ea.pogosocial.AbstractTest.tearDown(AbstractTest.java:65)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:616)\nat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)\nat org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:564)\nat org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\nat org.testng.internal.Invoker.invokeMethod(Invoker.java:796)\nat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:907)\nat org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1237)\nat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)\nat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\nat java.lang.Thread.run(Thread.java:679)\n</code></pre>\n\n<p>I have tried almost everything I can thnk of to fix the problem, but I still run into this tearDown() problem, which is really stumping me. Beside put() and get(), I don't do anything fancy with the memcache instance in my servlet. Does anyone have any ideas as to what I should do?</p>\n\n<p>If more information or code is needed, I will be glad to provide. One thing to note: when I instead start my Jetty server with <code>mvn gae:run</code> and I execute the TestNG tests through Eclipse, I do not run into this issue. Perhaps this is because my servlet is being injected a non-local unit test helper instance of memcache, but rather an actual version of a memcache service.</p>\n"},{"tags":["java","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":78,"score":-1,"question_id":12814821,"title":"How to verify that a superclass' constructor is being called","body":"<p>Let's say there is a super-class </p>\n\n<pre><code>class SuperClass {\n    SuperClass(Foo foo) {\n        this.foo = foo;\n    }\n\n    SuperClass() {\n        this.foo = new DefaultFoo();\n    }\n}\n</code></pre>\n\n<p>And there's a sub-class</p>\n\n<pre><code>class SubClass extends SuperClass {\n     SubClass(Foo foo) {\n        super(foo);\n    }\n}\n</code></pre>\n\n<p>The class under test is <code>SubClass</code>. I want to verify that <code>SubClass'</code> constructor is indeed invoking it's superclass' non-empty constructor. Is there any way to achieve this? </p>\n"},{"tags":["c#",".net","unit-testing","automapper"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12457516,"title":"AutoMapper IsSourceValueNull Condition doesn't work","body":"<p>I'm using this <a href=\"http://stackoverflow.com/questions/3704512\">Automapper - Using DynamicMap() and ignore null source value</a> approach to make the mapper ignore properties with NULL values on the source, but this doesn't appear to work in version <strong>2.1.267.0</strong> (current).</p>\n\n<p>Here's my mapping config:</p>\n\n<pre><code>Mapper.CreateMap&lt;PersonDTO, Person&gt;().ForAllMembers(\n    opt =&gt; opt.Condition(srs =&gt; !srs.IsSourceValueNull));\n</code></pre>\n\n<p>Here's my test:</p>\n\n<pre><code>// Arrange   \nvar Person = new Person { FirstName = \"Bruce\", Surname = \"Lee\"};\nvar PersonDto = new PersonDTO { FirstName = \"Jet\", Surname = null };\n\n// Act\nMapper.Map(PersonDto, Person);\n\n// Assert\nAssert.AreEqual(\"Jet\", Person.FirstName); // Assert.AreEqual failed. Expected:&lt;Jet&gt;. Actual:&lt;Bruce&gt;. \nAssert.AreEqual(\"Lee\", Person.Surname, \"Surname field with NULL value should not have been mapped\");\n</code></pre>\n\n<p>Does it work for you? And if so, can you spot the problem in my code?</p>\n"},{"tags":["asp.net","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12816473,"title":"Unit testing ASP.NET Legacy code","body":"<p>I have list of ASP.NET legacy projects. In these projects business logic is tightly bound with the Pages. All the authentication and other stuff is written in load and click events in the code behind. I am using Visual Studio 2012.</p>\n\n<p>What is the best way to unit testing these projects?</p>\n"},{"tags":["unit-testing","nunit","moq","moles","pex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12816320,"title":"Can I use PEX with a differnet mocking framework then moles/fakes?","body":"<p>Currently I am using Nunit and Moq for unit testing in my C# projects. Now I want to try the automatic unit-test generation tool PEX. \nI read some articles and watched the videos on channel9. As I understand PEX will automatic generate nUnit tests for me, but there are still some unanswered questions. </p>\n\n<p>My main issue is that, as i said, I am using moq and I can not change this. Is moles/fakes needed to run PEX properly, or could I also use PEX in comibination with a different mocking framework ? </p>\n"},{"tags":["python","unit-testing","migration","tornado","cyclone"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12807992,"title":"How do I write tests for Cyclone in the style of Tornado?","body":"<p>I have been googling and asking on IRC to no avail. <a href=\"http://cyclone.io/\" rel=\"nofollow\">Cyclone</a> is supposed to be a Tornado-like protocol for Twisted. But, there are no tests in the Cyclone repository and no-one has written up how to convert <code>tornado.testing.AsyncHTTPTestCase</code> tests to exercise code written against Cyclone.</p>\n\n<ol>\n<li>How do I start a server to test the web interface?</li>\n<li>Where is the <code>self.fetch()</code>?</li>\n<li>Where is the documentation in Cyclone to describe how to convert an existing Tornado app?</li>\n</ol>\n"},{"tags":["asp.net-mvc","unit-testing","c#-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12815749,"title":"Amazon email delivery notification","body":"<p>I am using Amazon Simple Email service to send email. Can i get email delivery notification in case of failure occur in sending process when use Amazon webservices? If so can you please tell me how to get the notification in amazon web service.</p>\n\n<p>Thanks</p>\n"},{"tags":[".net","asp.net","unit-testing","sitemap"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":447,"score":2,"question_id":5120352,"title":"Could not load type 'MapProvider' from assembly during .Net unit test","body":"<p>I'm receiving a <code>System.Configuration.ConfigurationErrorsException</code> with the message <code>Could not load type 'XxxSiteMapProvider' from assembly 'System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'.</code> </p>\n\n<p>I'm trying to unit test a separate class in the the same project as the <code>XxxSiteMapProvider</code> custom class. The error message indicates the proper point of the App.config for picking up the custom SiteMapProvider and I did a search across the solution and the class name is not duplicated anywhere. (I saw from searches that conflicting class names may cause this error.)</p>\n\n<p>Any suggestions on how to debug this?</p>\n"},{"tags":["unit-testing","exception","resharper","code-contracts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12754678,"title":"Code Contracts throws MethodAccess Exception when unit testing","body":"<p>I'm not quite sure why, but when I enable runtime contract checking, I'm getting a <code>MethodAccessException</code> during unit testing. I use the <em>Machine.Specifications</em> test framework and the ReSharper/dotCover test runner. When I test my assembly containing code contracts, I get this <code>MethodAccessException</code>:</p>\n\n<pre><code>Machine.Specifications.SpecificationException Should be of type System.ArgumentNullException but is of type System.MethodAccessException\n    at BusinessLogic.Specifications.When_testing_whether_a_set_of_cart_items_contains_a_product_and_a_null_set_is_passed.&lt;.ctor&gt;b__3()\n    in CartItemQuerySpecs.cs: line 66\n</code></pre>\n\n<p>The specification looks like this:</p>\n\n<pre><code>[Subject(typeof(ShoppingCartQueries), \"Cart contains product\")]\npublic class When_testing_whether_a_set_of_cart_items_contains_a_product_and_a_null_set_is_passed\n    : with_fake_shopping_cart_repository\n    {\n    Establish context = () =&gt; QueryResult = CartItems.AsQueryable().ForUser(UserWithNoProductsInCart);\n    Because of = () =&gt; Thrown = Catch.Exception(() =&gt; result = QueryResult.ContainsProduct(100));\n    It should_throw = () =&gt; Thrown.ShouldBeOfType&lt;ArgumentNullException&gt;();\n    static bool result;\n    }\n</code></pre>\n\n<p>The unit under test looks like this:</p>\n\n<pre><code>[Pure]\npublic static bool ContainsProduct(this IQueryable&lt;CartItem&gt; items, int id)\n    {\n    Contract.Requires&lt;ArgumentNullException&gt;(items != null);\n    return (items.Any(item =&gt; item.ProductId.Equals(id)));\n    }\n</code></pre>\n\n<p>Why would I get a <code>MethodAccessException</code>?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12813633,"title":"How to assert two list contain the same elements in Python?","body":"<p>When writing test cases, I often need to assert that two list contain the same elements without regard to their order.</p>\n\n<p>I have been doing this by converting the lists to sets.</p>\n\n<p>Is there any simpler way to do this?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>As @MarkDickinson pointed out, I can just use <a href=\"http://docs.python.org/library/unittest.html#unittest.TestCase.assertItemsEqual\" rel=\"nofollow\">TestCase.assertItemsEqual</a>.</p>\n\n<p>Notes that <code>TestCase.assertItemsEqual</code> is new in Python2.7.\nIf you are using an older version of Python, you can use <a href=\"http://pypi.python.org/pypi/unittest2\" rel=\"nofollow\">unittest2</a> - a backport of new features of Python 2.7.</p>\n"},{"tags":[".net","visual-studio-2010","unit-testing","mstest","ordered-test"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12815051,"title":"How to get the name of the currently executing OrderedTest","body":"<p>I have some ordered tests containing test methods. Some test methods are used in multiple ordered tests.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;OrderedTest name=\"orderedtest_A\" ...&gt;\n  ...\n  &lt;TestLinks&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_A\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_B\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_G\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_Z\" ... /&gt;\n  &lt;/TestLinks&gt;\n&lt;/OrderedTest&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;OrderedTest name=\"orderedtest_B\" ...&gt;\n  ...\n  &lt;TestLinks&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_A\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_M\" ... /&gt;\n    &lt;TestLink id=\"...\" name=\"testmethod_E\" ... /&gt;\n  &lt;/TestLinks&gt;\n&lt;/OrderedTest&gt;\n</code></pre>\n\n<p>As you can see, <code>testmethod_A</code> is used in <code>orderedtest_A</code> and in <code>orderedtest_B</code>\nAt execution time, I need to get <strong>the name of the ordered test</strong> that is currently running, e.g. <code>orderedtest_B</code>.</p>\n\n<p>I know that I can get the name of currently running <strong>test mehod</strong> by reading the <code>TestContext.TestName</code> property (e.g. <code>testmethod_B</code>)</p>\n\n<p>This would be fine if each test method was only used in one ordered test (then I could read all <code>*.orderedtest</code> xml-files and search for the test method with the given name) - but this is not the case! (as described above: see <code>testmethod_A</code>)</p>\n\n<p>In VS2010, the name of the ordered test is used quite often:</p>\n\n<ul>\n<li>In the test list editor</li>\n<li>In the test results list</li>\n<li>In the test view</li>\n</ul>\n\n<p>So maybe there <em>is</em> a possibility to read the name of the ordered test but is there also a way to get it at runtime?</p>\n\n<p><em>(BTW - To be exact, I want the name of the test as it is shown in the test results list.)</em></p>\n"},{"tags":["java","unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12801740,"title":"Getting started with JUnit 4","body":"<p>because my project wants to start test-driven development I decided to write a small tutorial about Junit 4 (currently JUnit 4.10 with Eclipse Juno) for my project.</p>\n\n<p><strong>Bill.java</strong></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\n/**\n * @author funkymonkey\n * \n *         Class Bill can store an id and a priceList (List&lt;Float&gt;)\n *         - id with setter and getter\n *         - prices can be added to the priceList\n *         - getter for priceList\n *         - total amount of price in priceList can be calculated\n */\n\npublic class Bill {\n   private Integer     id;       // invoice number (one for every Bill)\n\n   private List&lt;Float&gt; priceList; // list will contain prices of the products\n\n   public Bill() {\n      priceList = new ArrayList&lt;Float&gt;();\n   }\n\n   public Bill(Integer id) {\n      this.id = id;\n\n      priceList = new ArrayList&lt;Float&gt;();\n   }\n\n   public Integer getId() {\n      return id;\n   }\n\n   public void setId(Integer id) {\n      this.id = id;\n   }\n\n   public List&lt;Float&gt; getPriceList() {\n      return priceList;\n   }\n\n   public void addPrice(Float price) {\n      if (price &lt;= 0) {\n         throw new IllegalArgumentException(\"Value is less or equal zero\");\n      }\n\n      priceList.add(price);\n   }\n\n   public float getTotalPrice() {\n      float totalPrice = 0;\n\n      for (Float p : priceList) {\n         totalPrice = totalPrice + p;\n      }\n      return totalPrice;\n   }\n}\n</code></pre>\n\n<p><strong>BillTest.java</strong></p>\n\n<pre><code>import static org.junit.Assert.assertArrayEquals;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertThat;\nimport static org.junit.Assert.assertTrue;\nimport static org.junit.matchers.JUnitMatchers.hasItems;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class BillTest {\n\n   private static Bill       jBill1;\n   private static final float FLOAT_1        = (float) 1;\n   private static final float FLOAT_20       = (float) 20;\n   private static final float FLOAT_3P345    = (float) 3.345;\n   private static final float FLOAT_0P000001 = (float) 0.000001;\n\n   @Before\n   // initialize objects before running tests\n   public void setUp() throws Exception {\n      jBill1 = new Bill();\n   }\n\n   @After\n   // something which should be done after running a single test\n   public void tearDown() throws Exception {\n   }\n\n   @Test\n   // test addPrice()\n   public final void testAddPrice_priceIsGreaterThanZero() {\n      jBill1.addPrice(FLOAT_1);\n      jBill1.addPrice(FLOAT_20);\n      jBill1.addPrice(FLOAT_3P345);\n      jBill1.addPrice(FLOAT_0P000001);\n\n      // check if expected values == results\n\n      // we are comparing lists so we are using assertEquals(expected, result)\n      List&lt;Float&gt; expectedList = new ArrayList&lt;Float&gt;();\n      expectedList.add(FLOAT_1);\n      expectedList.add(FLOAT_20);\n      expectedList.add(FLOAT_3P345);\n      expectedList.add(FLOAT_0P000001);\n      List&lt;Float&gt; resultList = jBill1.getPriceList();\n\n      assertEquals(expectedList, resultList);\n\n      // we are comparing arrays so we can use assertArrayEquals(expected, result)\n      Object[] expectedArray = { FLOAT_1, FLOAT_20, FLOAT_3P345, FLOAT_0P000001 };\n      Object[] resultArray = jBill1.getPriceList().toArray();\n\n      assertArrayEquals(expectedArray, resultArray);\n\n      // we are comparing strings to we can use assertEquals(expected, result)\n      String expectedString = expectedList.toString();\n      String resultString = jBill1.getPriceList().toString();\n\n      assertEquals(expectedString, resultString);\n\n      // let us compare the size of the lists using assertTrue (boolean condition)\n      Integer expectedLength = expectedList.size();\n      Integer resultLength = jBill1.getPriceList().size();\n\n      assertTrue(expectedLength == resultLength);\n      // or use assertTrue(expectedLength.equals(resultLength));\n\n      // you can also use your own matchers by using assertThat(result, matcher)\n      assertThat(resultList, hasItems(expectedList.toArray(new Float[expectedList.size()])));\n      // or assertThat(resultList, hasItems(FLOAT_1, FLOAT_20, FLOAT_3P345, (float)\n      // 0.000001));\n\n   }\n\n   @Test(expected = IllegalArgumentException.class)\n   // test will pass if exception is thrown from addPrice()\n   public final void testAddPrice_priceIsZero() {\n      // this will throw the exception IllegalArgumentException\n      jBill1.addPrice((float) 0);\n   }\n\n   @Test(expected = IllegalArgumentException.class)\n   // test will pass if exception is thrown from addPrice()\n   public final void testAddPrice_priceIsLessThanZero() {\n      // this will throw the exception IllegalArgumentException\n      jBill1.addPrice((float) -1);\n   }\n\n   @Test\n   // test if calculating works via getTotalPrice()\n   public final void testGetTotalPrice() {\n      jBill1.addPrice(FLOAT_1);\n      jBill1.addPrice(FLOAT_20);\n      jBill1.addPrice(FLOAT_3P345);\n      jBill1.addPrice(FLOAT_0P000001);\n\n      Float expectedValue = FLOAT_1 + FLOAT_20 + FLOAT_3P345 + FLOAT_0P000001;\n      Float resultValue = jBill1.getTotalPrice();\n\n      // we are comparing float values so we can use assertEquals(expected, result)\n      assertEquals(expectedValue, resultValue);\n   }\n}\n</code></pre>\n\n<p>My questions are:</p>\n\n<ul>\n<li>how to explain an old fashioned coder (waterfall model) how he/she could benefit from JUnit</li>\n<li>additional package which could be useful (mocking frameworks?)</li>\n<li>most important methods in JUnit?</li>\n<li>is the example code useful to explain somebody the functionality of junit?</li>\n</ul>\n"},{"tags":["unit-testing","cakephp","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":10575962,"title":"Multiple calls to staticExpects on mocked objects","body":"<p>I am tring to write test cases for my controller in cakephp, so far i have managed to mock the controller and include the auth component which is used in my controller function. the problem is it seems that i can call staticExpects only once, which means that i can define a return value for only one function call, i don't want that, i need to call staticExpects more than once within the same test case.</p>\n\n<p>Here is a part of my code.</p>\n\n<pre><code>$this-&gt;TasksController = $this-&gt;generate('Tasks', array(\n'components' =&gt; array('Session','Auth' =&gt; array('User'), ) ));\n\n  $this-&gt;TasksController-&gt;Auth-&gt;staticExpects($this-&gt;any())\n    -&gt;method('User')\n    -&gt;with('userID')\n    -&gt;will($this-&gt;returnValue(224));\n     $this-&gt;TasksController-&gt;Auth-&gt;staticExpects($this-&gt;any())\n    -&gt;method('User')\n    -&gt;with('accID')\n    -&gt;will($this-&gt;returnValue('some ID here'));\n</code></pre>\n\n<p>whenever i do this and run the test it gives me this error</p>\n\n<p>Expectation failed for method name is equal to  when invoked zero or more times\nParameter 0 for invocation AuthComponent::user('userID') does not match expected value.\nFailed asserting that two strings are equal.</p>\n\n<p>Please help :)</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12742726,"title":"Jasmine: How to get name of current test","body":"<p>Is there a way of getting the name of the currently running test?</p>\n\n<p>Some (heavily simplified) code may help explain. I want to avoid the duplication of <code>\"test1\" / \"test2\"</code> in the calls to <code>performTest</code>:</p>\n\n<pre><code>describe(\"some bogus tests\", function () {\n\n    function performTest(uniqueName, speed) {\n        var result = functionUnderTest(uniqueName, speed);\n        expect(result).toBeTruthy;\n    }\n\n    it(\"test1\", function () {\n        performTest(\"test1\", \"fast\");\n    });\n\n    it(\"test2\", function () {\n        performTest(\"test2\", \"slow\");\n    });\n});\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong>\nI see the information I need is in:</p>\n\n<pre><code>jasmine.currentEnv_.currentSpec.description\n</code></pre>\n\n<p>or probably better:</p>\n\n<pre><code>jasmine.getEnv().currentSpec.description\n</code></pre>\n"},{"tags":["unit-testing","scala","maven","scalatest","scala-2.9"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":12812458,"title":"Getting started with Scala, Scalatest, and Maven","body":"<p>I created a new scala project with the following:</p>\n\n<pre><code>mvn org.apache.maven.plugins:maven-archetype-plugin:2.2:generate \n    -DarchetypeGroupId=org.scala-tools.archetypes \n    -DarchetypeArtifactId=scala-archetype-simple \n    -DarchetypeVersion=1.3 \n    -DgroupId=myGroup \n    -DartifactId=myProject\n    -Dversion=0.1.0 \n    -DinteractiveMode=false\n</code></pre>\n\n<p>Which gives me the following POM:</p>\n\n<pre><code> &lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;groupId&gt;myGroup&lt;/groupId&gt;\n   &lt;artifactId&gt;myProject&lt;/artifactId&gt;\n   &lt;version&gt;0.1.0&lt;/version&gt;\n   &lt;name&gt;${project.artifactId}&lt;/name&gt;\n   &lt;description&gt;My wonderfull scala app&lt;/description&gt;\n   &lt;inceptionYear&gt;2010&lt;/inceptionYear&gt;\n   &lt;licenses&gt;\n     &lt;license&gt;\n       &lt;name&gt;My License&lt;/name&gt;\n       &lt;url&gt;http://....&lt;/url&gt;\n       &lt;distribution&gt;repo&lt;/distribution&gt;\n     &lt;/license&gt;\n   &lt;/licenses&gt;\n\n   &lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.5&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.5&lt;/maven.compiler.target&gt;\n     &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n     &lt;scala.version&gt;2.8.0&lt;/scala.version&gt;\n   &lt;/properties&gt;\n\n &lt;!--\n   &lt;repositories&gt;\n     &lt;repository&gt;\n       &lt;id&gt;scala-tools.org&lt;/id&gt;\n       &lt;name&gt;Scala-Tools Maven2 Repository&lt;/name&gt;\n       &lt;url&gt;http://scala-tools.org/repo-releases&lt;/url&gt;\n     &lt;/repository&gt;\n   &lt;/repositories&gt;\n\n   &lt;pluginRepositories&gt;\n     &lt;pluginRepository&gt;\n       &lt;id&gt;scala-tools.org&lt;/id&gt;\n       &lt;name&gt;Scala-Tools Maven2 Repository&lt;/name&gt;\n       &lt;url&gt;http://scala-tools.org/repo-releases&lt;/url&gt;\n     &lt;/pluginRepository&gt;\n   &lt;/pluginRepositories&gt;\n --&gt;\n   &lt;dependencies&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n       &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n       &lt;version&gt;${scala.version}&lt;/version&gt;\n     &lt;/dependency&gt;\n\n     &lt;!-- Test --&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;junit&lt;/groupId&gt;\n       &lt;artifactId&gt;junit&lt;/artifactId&gt;\n       &lt;version&gt;4.8.1&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.scala-tools.testing&lt;/groupId&gt;\n       &lt;artifactId&gt;specs_${scala.version}&lt;/artifactId&gt;\n       &lt;version&gt;1.6.5&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n     &lt;dependency&gt;\n       &lt;groupId&gt;org.scalatest&lt;/groupId&gt;\n       &lt;artifactId&gt;scalatest&lt;/artifactId&gt;\n       &lt;version&gt;1.2&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n     &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n     &lt;sourceDirectory&gt;src/main/scala&lt;/sourceDirectory&gt;\n     &lt;testSourceDirectory&gt;src/test/scala&lt;/testSourceDirectory&gt;\n     &lt;plugins&gt;\n       &lt;plugin&gt;\n         &lt;groupId&gt;org.scala-tools&lt;/groupId&gt;\n         &lt;artifactId&gt;maven-scala-plugin&lt;/artifactId&gt;\n         &lt;version&gt;2.15.0&lt;/version&gt;\n         &lt;executions&gt;\n           &lt;execution&gt;\n             &lt;goals&gt;\n               &lt;goal&gt;compile&lt;/goal&gt;\n               &lt;goal&gt;testCompile&lt;/goal&gt;\n             &lt;/goals&gt;\n             &lt;configuration&gt;\n               &lt;args&gt;\n                 &lt;arg&gt;-make:transitive&lt;/arg&gt;\n                 &lt;arg&gt;-dependencyfile&lt;/arg&gt;\n                 &lt;arg&gt;${project.build.directory}/.scala_dependencies&lt;/arg&gt;\n               &lt;/args&gt;\n             &lt;/configuration&gt;\n           &lt;/execution&gt;\n         &lt;/executions&gt;\n       &lt;/plugin&gt;\n       &lt;plugin&gt;\n         &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n         &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n         &lt;version&gt;2.6&lt;/version&gt;\n         &lt;configuration&gt;\n           &lt;useFile&gt;false&lt;/useFile&gt;\n           &lt;disableXmlReport&gt;true&lt;/disableXmlReport&gt;\n           &lt;!-- If you have classpath issue like NoDefClassError,... --&gt;\n           &lt;!-- useManifestOnlyJar&gt;false&lt;/useManifestOnlyJar --&gt;\n           &lt;includes&gt;\n             &lt;include&gt;**/*Test.*&lt;/include&gt;\n             &lt;include&gt;**/*Suite.*&lt;/include&gt;\n           &lt;/includes&gt;\n         &lt;/configuration&gt;\n       &lt;/plugin&gt;\n     &lt;/plugins&gt;\n   &lt;/build&gt;\n &lt;/project&gt;\n</code></pre>\n\n<p>I can run <code>mvn test</code> and the sample tests run successfully.  I'd like to use the most recent version of scala (I downloaded / installed 2.9.2...), but the <a href=\"http://mvnrepository.com/artifact/org.scala-tools.testing\" rel=\"nofollow\">most recent version of the org.scala-tools.testing scala_VERSION dependency seems to be 2.9.1</a>.  I made the following changes in my POM:</p>\n\n<pre><code>    &lt;scala.version&gt;2.9.1&lt;/scala.version&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>    &lt;dependency&gt;\n       &lt;groupId&gt;org.scala-tools.testing&lt;/groupId&gt;\n       &lt;artifactId&gt;specs_${scala.version}&lt;/artifactId&gt;\n       &lt;version&gt;1.6.5&lt;/version&gt;\n       &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Now, running <code>mvn test</code> gives </p>\n\n<pre><code> -------------------------------------------------------\n  T E S T S\n -------------------------------------------------------\n Running samples.ListSuite\n Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.674 sec &lt;&lt;&lt; FAILURE!\n initializationError(samples.ListSuite)  Time elapsed: 0.003 sec  &lt;&lt;&lt; ERROR!\n java.lang.ClassCastException: scala.collection.immutable.Set$EmptySet$ cannot be\n  cast to scala.collection.generic.Addable\n         at org.scalatest.FunSuite$class.test(FunSuite.scala:1039)\n         at samples.ListSuite.test(scalatest.scala:59)\n         at samples.ListSuite.&lt;init&gt;(scalatest.scala:61)\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n         at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n         at java.lang.Class.newInstance0(Class.java:372)\n         at java.lang.Class.newInstance(Class.java:325)\n         at org.scalatest.junit.JUnitRunner.&lt;init&gt;(JUnitRunner.scala:62)\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\n         at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\n         at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n         at java.lang.reflect.Constructor.newInstance(Constructor.java:525)\n         at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)\n         at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)\n         at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n         at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)\n         at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)\n         at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)\n         at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)\n         at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:120)\n         at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:103)\n         at org.apache.maven.surefire.Surefire.run(Surefire.java:169)\n         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n         at java.lang.reflect.Method.invoke(Method.java:601)\n         at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:350)\n         at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1021)\n\n Running samples.StackSuite\n Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.12 sec\n Running samples.AppTest\n Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec\n\n Results :\n\n Tests in error:\n   initializationError(samples.ListSuite)\n\n Tests run: 4, Failures: 0, Errors: 1, Skipped: 0\n\n [INFO] ------------------------------------------------------------------------\n [INFO] BUILD FAILURE\n [INFO] ------------------------------------------------------------------------\n [INFO] Total time: 6.880s\n [INFO] Finished at: Wed Oct 10 01:10:56 ADT 2012\n [INFO] Final Memory: 9M/112M\n [INFO] ------------------------------------------------------------------------\n [ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.6:test (default-test) on project myProject: There are test failures.\n [ERROR]\n [ERROR] Please refer to C:\\Dropbox\\work\\dev\\scalasandbox\\target\\surefire-reports for the individual test results.\n [ERROR] -&gt; [Help 1]\n [ERROR]\n [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n [ERROR] Re-run Maven using the -X switch to enable full debug logging.\n [ERROR]\n [ERROR] For more information about the errors and possible solutions, please read the following articles:\n [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n\n<p>I presumably have some of the most simple tests possible (samples created by the maven archetype plugin), and bumping scala by a single minor version is breaking them?  Should I just stick with scala 2.8 until the maven tools catch up?</p>\n"},{"tags":["unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12813169,"title":"Unit testing for Javascript","body":"<p>Can any one tell me is it possible to create nunit test case for javascript and jquery? if it is possible how to unit test the javascript and jquery?</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","tdd","visual-studio-2012","coded-ui-tests"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":306,"score":1,"question_id":12582025,"title":"How To Exclude Tests From VS2012 Test Runner","body":"<p>I am using Visual Studio 2012 and am keen to take advantage of the new features.</p>\n\n<p>I have attributes on certain tests that I ideally don't want to run on every build. Most of my tests are normal unit tests and I do want them to run on every build.</p>\n\n<p>So how can I exclude a test by category or project type?</p>\n\n<p>For example, exclude Coded UI tests:</p>\n\n<pre><code>[CodedUITest]\npublic class SearchViewTests\n</code></pre>\n\n<p>Or exclude tests in a given Test Category:</p>\n\n<pre><code>[TestMethod]\n[TestCategory(\"Database Integration\")]\npublic void ContactRepositoryGetByIdWithIdExpectCorrectContact()\n</code></pre>\n\n<p>I particularly want to exclude the coded UI tests as they disrupt my ability to continue working, whereas all the other tests will happily run in the background without disturbing me.</p>\n"},{"tags":["java","spring","hibernate","unit-testing","exception"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":12808388,"title":"Spring 3.1 and Hibernate 4: \"HibernateException: No Session found for current thread\" When calling DAO method from unit test","body":"<p>I'm using Spring 3.1 and Hibernate 4.1, and I'm currently getting the following exception when I run a repository test:</p>\n\n<pre><code>Caused by: org.hibernate.HibernateException: No Session found for current thread\n    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)\n    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1041)\n</code></pre>\n\n<p>Here's what a DAO looks like. It uses the same generics dao pattern that basically everyone else is using:</p>\n\n<pre><code>@Repository\npublic class UserRepository extends RepositorySupport&lt;User&gt; {\n\n    public UserRepository() {\n        super(User.class);\n    }\n\n    public User findByUsername(final String username) {\n        Query query = getCurrentSession().createQuery(\n            \"from User user \" +\n            \"where user.username = :username\"\n        );\n\n        return (User) query.setParameter(\"username\", username)\n            .uniqueResult();\n    }\n</code></pre>\n\n<p>The only thing different here that I normally wouldn't do is that I am not using <code>getHibernateTemplate()</code> anymore - and that's why I suspect things aren't working. I'd rather not use this method if I can avoid it, as the resultant code looks horrible.</p>\n\n<p>My hibernate beans look like this:</p>\n\n<pre><code>&lt;bean id=\"sessionFactory\"\n      class=\"org.springframework.orm.hibernate4.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt;\n    &lt;property name=\"mappingResources\"&gt;\n        &lt;list&gt;\n            &lt;value&gt;hibernate/tag.hbm.xml&lt;/value&gt;\n            &lt;value&gt;hibernate/address.hbm.xml&lt;/value&gt;\n            &lt;value&gt;hibernate/user.hbm.xml&lt;/value&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n    &lt;property name=\"namingStrategy\"&gt;\n        &lt;bean class=\"org.hibernate.cfg.ImprovedNamingStrategy\"/&gt;\n    &lt;/property&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;props&gt;\n            &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.dialect\"&gt;${hibernate.dialect}&lt;/prop&gt;\n            &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;${hibernate.hbm2ddl.auto}\n            &lt;/prop&gt;\n            &lt;prop key=\"hibernate.generate_statistics\"&gt;false&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.show_sql\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n\n            &lt;prop key=\"hibernate.cache.use_second_level_cache\"&gt;false&lt;/prop&gt;\n            &lt;prop key=\"hibernate.cache.provider_class\"&gt;\n\n            &lt;/prop&gt;\n        &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean class=\"org.springframework.orm.hibernate4.HibernateExceptionTranslator\"/&gt;\n\n&lt;bean id=\"transactionManager\"\n      class=\"org.springframework.orm.hibernate4.HibernateTransactionManager\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n\n&lt;!--\n&lt;bean id=\"hibernateInterceptor\"\n      class=\"org.springframework.orm.hibernate4.HibernateInterceptor\"&gt;\n    &lt;property name=\"sessionFactory\" ref=\"sessionFactory\"/&gt;\n&lt;/bean&gt;\n--&gt;\n\n&lt;tx:advice id=\"transactionAdvice\" transaction-manager=\"transactionManager\"&gt;\n    &lt;tx:attributes&gt;\n        &lt;tx:method name=\"find*\" read-only=\"true\" propagation=\"REQUIRED\"/&gt;\n        &lt;tx:method name=\"get*\" read-only=\"true\" propagation=\"REQUIRED\"/&gt;\n        &lt;tx:method name=\"*\" propagation=\"REQUIRED\"/&gt;\n    &lt;/tx:attributes&gt;\n&lt;/tx:advice&gt;\n\n&lt;aop:config&gt;\n    &lt;aop:advisor advice-ref=\"transactionAdvice\"\n                 pointcut=\"execution(* *..service.*.*(..))\" order=\"1\"/&gt;\n    &lt;!-- gets sub packages like service.user --&gt;\n    &lt;aop:advisor advice-ref=\"transactionAdvice\"\n                 pointcut=\"execution(* *..service.*.*.*(..))\" order=\"2\"/&gt;\n&lt;/aop:config&gt;\n\n&lt;bean id=\"validator\"\n      class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\"/&gt;\n\n&lt;context:annotation-config/&gt;\n&lt;context:spring-configured/&gt;\n&lt;context:component-scan base-package=\"com.realtywebsite.repositories,com.realtywebsite.service\"/&gt;\n\n&lt;task:annotation-driven /&gt;\n</code></pre>\n\n<p>My test code looks something like this (I have to flatten it because my tests extend from a common parent test class):</p>\n\n<pre><code>@ContextConfiguration(locations = {\n    ObjectMother.APPLICATION_CONTEXT,\n    ObjectMother.WEB_CONTEXT\n})\npublic abstract class DatabaseTest extends AbstractTransactionalJUnit4SpringContextTests {\n\n\n    @Test\n    public void delete() {\n        userRepository.delete(1);\n        flush();\n\n        assertFalse(userRepository.exists(1));\n    }\n\n    ...\n</code></pre>\n\n<p>Thanks for the help!</p>\n"},{"tags":["visual-studio-2010","unit-testing","testing","tfs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12812118,"title":"Coded UI: assertion on password","body":"<p>i m working on login Screen in CodeUI. i have done assertion on UserName and Password Textbox. But Password assertion is no working. Because it don't contain Any text property like username.</p>\n\n<p>Please guide me if i m wrong...</p>\n\n<p>Thanks,\nJohn </p>\n"},{"tags":["php","unit-testing","routes","phpunit","zend-framework2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12783622,"title":"Routing tests in ZF2 / ZF2 equivalent of Zend_Test_PHPUnit_Controller_TestCase?","body":"<p>Thus far I've been testing my ZF2 controllers as follows:</p>\n\n<pre><code>namespace Application\\Controller;\n\nuse Application\\Controller\\IndexController;\nuse Zend\\Http\\Request;\nuse Zend\\Http\\Response;\nuse Zend\\Mvc\\MvcEvent;\nuse Zend\\Mvc\\Router\\RouteMatch;\nuse PHPUnit_Framework_TestCase;\n\nclass IndexControllerTest extends PHPUnit_Framework_TestCase\n{\n    public function testIndexActionCanBeAccessed()\n    {\n        $this-&gt;routeMatch-&gt;setParam('action', 'index');\n\n        $result   = $this-&gt;controller-&gt;dispatch($this-&gt;request);\n        $response = $this-&gt;controller-&gt;getResponse();\n\n        $this-&gt;assertEquals(200, $response-&gt;getStatusCode());\n        $this-&gt;assertInstanceOf('Zend\\View\\Model\\ViewModel', $result);\n    }\n\n    protected function setUp()\n    {\n        \\Zend\\Mvc\\Application::init(include 'config/application.config.php');\n\n        $this-&gt;controller = new IndexController();\n        $this-&gt;request    = new Request();\n        $this-&gt;routeMatch = new RouteMatch(array('controller' =&gt; 'index'));\n        $this-&gt;event      = new MvcEvent();\n        $this-&gt;event-&gt;setRouteMatch($this-&gt;routeMatch);\n        $this-&gt;controller-&gt;setEvent($this-&gt;event);\n    }\n\n    protected $controller = null;\n    protected $event = null;\n    protected $request = null;\n    protected $response = null;\n    protected $routeMatch = null;\n}\n</code></pre>\n\n<p>This allows me to test that the ViewModel is having the correct data (if any) assigned to it before the view is rendered. This serves that purpose just fine, but what it doesn't do is test that my routing is working correctly like the ZF1 <code>Zend_Test_PHPUnit_Controller_TestCase</code> tests would.</p>\n\n<p>In those, I'd kick off the test by running <code>$this-&gt;dispatch('/some/relative/url')</code> and only get positive test results if the routes were set up correctly. With these ZF2 tests, I'm specifically telling it which route to use, which doesn't necessarily mean that a real request will be routed correctly.</p>\n\n<p>How do I test that my routing is working correctly in ZF2?</p>\n"},{"tags":["ruby-on-rails","ruby","ruby-on-rails-3","unit-testing","rspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12811207,"title":"comparison of Date with ActiveSupport::TimeWithZone failed","body":"<p>I have an <code>age</code> method on my <code>Waiver</code> model that looks like:</p>\n\n<pre><code>  def age(date = nil)\n\n    if date.nil?\n      date = Date.today\n    end\n    age = 0\n    unless date_of_birth.nil?\n      age = date.year - date_of_birth.year\n      age -= 1 if date &lt; date_of_birth + age.years #for days before birthday\n    end\n    return age\n  end\n</code></pre>\n\n<p>I then have a spec that looks like:</p>\n\n<pre><code>it \"calculates the proper age\" do\n waiver = FactoryGirl.create(:waiver, date_of_birth: 12.years.ago)\n waiver.age.should == 12\nend\n</code></pre>\n\n<p>When I run this spec I get <code>comparison of Date with ActiveSupport::TimeWithZone failed</code>. What am I doing wrong?</p>\n\n<pre><code>Failures:\n\n  1) Waiver calculates the proper age\n     Failure/Error: waiver.age.should == 12\n     ArgumentError:\n       comparison of Date with ActiveSupport::TimeWithZone failed\n     # ./app/models/waiver.rb:132:in `&lt;'\n     # ./app/models/waiver.rb:132:in `age'\n     # ./spec/models/waiver_spec.rb:23:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n"},{"tags":["python","unit-testing","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12809970,"title":"python, unittest, test a script with command line args","body":"<p>I've written a python script that takes command line arguments and plays one round of Tic Tac Toe.<br>\nrunning it looks like this...</p>\n\n<blockquote>\n  <p>run ttt o#xo##x## x 0 1 </p>\n</blockquote>\n\n<p>If the move is legal it then prints the new board layout and whether anyone won the game</p>\n\n<p>I have to write tests for it using unittest. I dont know how to test the whole script with various command line parameters, all the examples I've seen seem to just test individual functions within the script.\nAlso the script uses <code>argparse</code> to parse the parameters</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","unit-testing","spring-mvc","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":118,"score":1,"question_id":12775539,"title":"With Spring 3.1, How do you test urls for your controllers?","body":"<p>In prior versions of spring (3.0), it was possible to test your controllers via the correct urls using the RequestMappingHandlerAdapter and HandlerMapping objects in the ApplicationContext. However, in Spring 3.1, things have changed and the code I used to use to make this work no longer functions.</p>\n\n<p>How do you test Spring controller urls in Spring 3.1? For example, I'd like to write code that looks like this:</p>\n\n<pre><code>ModelAndView modelAndView = handle(\"GET\", \"/businesses\");\n</code></pre>\n\n<p>That way I'm testing my mappings in addition to the controller's action logic.</p>\n\n<p>In particular, I am most interested in making sure that I can pass session attributes and have them correctly passed to my controller actions's @Valid annotation.</p>\n\n<p>Is there any way to accomplish this with Spring 3.1?</p>\n\n<p>This is the code I was using:</p>\n\n<pre><code>protected ModelAndView handle(HttpServletRequest request, HttpServletResponse response) throws Exception {\n    final HandlerMapping handlerMapping = applicationContext.getBean(RequestMappingHandlerMapping.class);\n\n    final HandlerExecutionChain handler = handlerMapping.getHandler(request);\n    assertNotNull(\"No handler found for request, check you request mapping\", handler);\n\n    final Object controller = handler.getHandler();\n\n    final HandlerInterceptor[] interceptors = handlerMapping.getHandler(request).getInterceptors();\n    for (HandlerInterceptor interceptor : interceptors) {\n        final boolean carryOn = interceptor.preHandle(request, response, controller);\n        if (!carryOn) {\n            return null;\n        }\n    }\n\n    return handlerAdapter.handle(request, response, controller);\n}\n\nprotected ModelAndView handle(String method, String path, String queryString) throws Exception {\n    request.setMethod(method);\n    request.setRequestURI(path);\n\n    if(queryString != null) {\n        String[] parameters = queryString.split(\"&amp;\");\n        for(String parameter : parameters) {\n            String[] pair = parameter.split(\"=\");\n            if(pair.length == 2) {\n                request.setParameter(pair[0], pair[1]);\n            } else {\n                request.setParameter(pair[0], \"\");\n            }\n        }\n    }\n\n    return handle(request, response);\n}\n\nprotected ModelAndView handle(String method, String path, String attribute, Object object) throws Exception {\n    MockHttpSession session = new MockHttpSession();\n    session.setAttribute(attribute, object);\n    request.setSession(session);\n\n    return handle(method, path, null);\n}\n\nprotected ModelAndView handle(String method, String path) throws Exception {\n    return handle(method, path, null);\n}\n\nprotected void assertContentType(ModelAndView modelAndView, String contentType) {\n    assertEquals(contentType, modelAndView.getView().getContentType());\n}\n</code></pre>\n"},{"tags":["javascript","unit-testing","node.js"],"answer_count":4,"favorite_count":8,"up_vote_count":38,"down_vote_count":0,"view_count":7185,"score":38,"question_id":7254025,"title":"Node.js Unit Testing","body":"<p>Are there any good node.js (server side js) unit testing frameworks currently out there?  I'm looking for something a little deeper than the Assert module provided.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","unit-testing","tdd"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12809517,"title":"Initializing class C#","body":"<p>What is the best way of initiating the class and hold that initialization in a variable for other method to use instead of initiating every time.</p>\n\n<p>here is my code:</p>\n\n<pre><code>private Employee employee;\npublic Employee SystemUnderTest\n{\n   get \n   {\n       if (employee == null)\n       {\n          employee = new Employee();\n       }\n      return employee;\n   }\n}\n\n//..method1 Test1\n   public void TestMethod1()\n   {\n     Assert.IsTrue(SystemUnderTest.IsActive());\n   }\n\n   //..method2 Test   \n   public void TestMethod2()\n   {\n     Assert.IsTrue(SystemUnderTest.IsEmployeeExists());\n   }\n</code></pre>\n\n<p>PS: when debugging I noticed that it does initialize Employee object with every method.</p>\n\n<p>using 3.5 framework.</p>\n"},{"tags":[".net","unit-testing","asynchronous","nunit","async-await"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":303,"score":5,"question_id":12191831,"title":"How do I test an async method with NUnit, eventually with another framework?","body":"<p>I have an ASP.NET Web API application, with an ApiController that features asynchronous methods, returning <code>Task&lt;&gt;</code> objects and marked with the <code>async</code> keyword.</p>\n\n<pre><code>public class MyApiController : ApiController\n{\n    public async Task&lt;MyData&gt; GetDataById(string id)\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>How can I write NUnit tests for the ApiController's asynchronous methods? If I need to use another testing framework I'm open for that too. I'm fairly new to .NET unit testing in general, so I'm interested in learning best practices.</p>\n"},{"tags":["javascript","unit-testing","automated-tests","yui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12809338,"title":"Where do I get the jar files for YUI Test code coverage?","body":"<p>The <a href=\"https://github.com/yui/yuitest/wiki/Code-Coverage\" rel=\"nofollow\">YUI Test -Code Coverage Utility documentation</a> suggests that we need some jar files to instrument the code:</p>\n\n<pre><code>yuitest-coverage-x.y.z.jar - used to instrument JavaScript code.\nyuitest-coverage-report-x.y.z.jar - used to generate reports from the JSON code coverage output.\n</code></pre>\n\n<p>where do I get these jar files?  Please tell me there is a bin somewhere that I can download.</p>\n"},{"tags":["unit-testing","testing","grails","spring-security"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":12806931,"title":"Grails Spring Security Testing","body":"<p>I use the Grails Spring Security Plugin for my project and now want to unit test my code. I have the following code in my controller:</p>\n\n<pre><code>def index() {\n    redirect action: 'show', params: [id: springSecurityService.currentUser.id]\n}\n</code></pre>\n\n<p>My Test Class has the following code:</p>\n\n<pre><code>void testIndex() {      \n    controller.index()\n    assert \"/user/list\" == response.redirectedUrl\n}\n</code></pre>\n\n<p>This test fails:</p>\n\n<pre><code>| Running 8 unit tests... 1 of 8\n| Failure:  testIndex(xxx.UserControllerTests)\n|  java.lang.NullPointerException: Cannot get property 'currentUser' on null object\n    at xxx.UserController.index(UserController.groovy:12)\n    at xxx.UserControllerTests.testIndex(UserControllerTests.groovy:19)\n</code></pre>\n\n<p>How can I authenticate a spring security user in a test case? How would you write the unit test?</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12805305,"title":"How to embed a JUnit Test Suite in another Suite","body":"<p>I have an old Junit3 TestSuite I am trying to upgrade. I see this in the setup...</p>\n\n<p>suite.addTest(AllSubTests.suite());</p>\n\n<p>What is the equivalent in Junit 4?</p>\n"},{"tags":["java","unit-testing","testing","null","guava"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12791737,"title":"guava-testlib future version JAR","body":"<p>Today, the current Guava version seems to be:</p>\n\n<p><code>release is 13.0.1, August 3, 2012.</code></p>\n\n<p>but I checked out the source off of:</p>\n\n<p><code>git clone https://code.google.com/p/guava-libraries/</code></p>\n\n<p>and got intrigued by what seems like an <em>extremely</em> useful testing tool to me:</p>\n\n<p><a href=\"http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java\" rel=\"nofollow\">http://code.google.com/p/guava-libraries/source/browse/guava-testlib/src/com/google/common/testing/NullPointerTester.java</a></p>\n\n<p>I am trying to verify that all of my methods detest <code>null</code> just as much as Doug Lea ( <a href=\"http://gee.cs.oswego.edu/dl/html/vita.html\" rel=\"nofollow\">http://gee.cs.oswego.edu/dl/html/vita.html</a> ) seems to do, unless Joshua Bloch misquotes him ( <a href=\"http://www.youtube.com/watch?v=ZeO_J2OcHYM#t=26m35s\" rel=\"nofollow\">http://www.youtube.com/watch?v=ZeO_J2OcHYM#t=26m35s</a> ) in being \"null-hostile\".</p>\n\n<p>Anyway, <code>NullPointerTester.java</code> seems to be just perfect so I am trying to build it into my project.</p>\n\n<p>Following the dependencies (<code>NullPointerTester</code> -> <code>Invokable&lt;?, ?&gt;</code>, -> ... for example) is tedious as I run into classes that are <code>@since 14.0</code>, basically belong to a future version.</p>\n\n<p>What's the best way to build a self-contained JAR of the next/future version of Guava, with all dependencies being taken care of for me? Note: the sources seem to be \"all\" on <code>git</code>...</p>\n\n<hr>\n\n<p><em>You can stop reading here.</em></p>\n\n<p>I can't wait to be doing stuff like this, which is really cool I think:</p>\n\n<ul>\n<li><a href=\"http://www.massapi.com/class/nu/NullPointerTester.html\" rel=\"nofollow\">http://www.massapi.com/class/nu/NullPointerTester.html</a></li>\n</ul>\n\n<p>Note: what's missing are \"security checks\", as in \"if the constructor has been made private, check that I cannot reflect-invoke it anyway...</p>\n\n<p>If I were a better coder I'd contribute, but this is all I can do and it's very poor, although the intent should be clear?</p>\n\n<pre><code>static boolean isDefaultConstructorDisabled(Class&lt;?&gt; type) {\n  boolean isDefaultConstructorDisabled = false;\n  Constructor&lt;?&gt;[] declaredConstructors = type.getDeclaredConstructors();\n  Constructor&lt;?&gt; defaultContructor = declaredConstructors[0];\n  defaultContructor.setAccessible(true);\n  try {\n    defaultContructor.newInstance();\n  } catch (InvocationTargetException invocationTargetException) {\n    Throwable cause = invocationTargetException.getCause();\n    if (cause instanceof UnsupportedOperationException\n        &amp;&amp; cause.getMessage().contains(\n            ErrorMessage.DefaultConstructor.DISABLED)) {\n      isDefaultConstructorDisabled = true;\n    }\n  } catch (Throwable throwable) {\n    throwable.printStackTrace();\n  }\n  return isDefaultConstructorDisabled;\n}\n</code></pre>\n"},{"tags":["c#",".net","unit-testing","mongodb","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":103,"score":4,"question_id":12804662,"title":"Mongodb unit testing in .NET","body":"<p>I am trying to do tdd and use mongodb as database. But i cant resolve problem of mocking mongodb. Is there any ability to mock mongodb for unit testing in .NET? </p>\n\n<hr>\n\n<p>Update</p>\n\n<p>I found very good soltion reading blog.\nYou can find it <a href=\"http://thoai-nguyen.blogspot.com/2012/06/how-i-mock-mongo-collection.html\" rel=\"nofollow\">here</a>:</p>\n"},{"tags":["c","unit-testing","makefile"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12778430,"title":"creating unit testing using makefile","body":"<pre><code>gcc 4.7.2\nc89\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I am wondering does any one know of any tutorials or text books that cover using makefile to create some simple unit testing for my c programs.</p>\n\n<p>I would like to run some automated testing that will create a test suite and add this to my Makefile.</p>\n\n<p>Just want some ideas on how to get started. </p>\n\n<p>Many thanks for any suggestions</p>\n"},{"tags":["c#",".net","unit-testing"],"answer_count":5,"favorite_count":7,"up_vote_count":28,"down_vote_count":0,"view_count":9293,"score":28,"question_id":358196,"title":"C# \"internal\" access modifier when doing unit testing","body":"<p>I'm new in unit testing and I'm trying to figure out if I should start using more of 'internal' access modifier. I know that if we use 'internal' and set the assembly variable  'InternalsVisibleTo', we can test functions that we don't want to declare public from the testing project. This makes me think that I should just always use 'internal' because at least each project (should?) has it's own testing project. Can you guys tell me a reason why I shouldn't do this? When should I use 'private'?</p>\n"},{"tags":["visual-studio-2010","unit-testing",".net-4.0","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":12799289,"title":"Setting test settings within unit test class","body":"<p>Is there a way to programatically set which test settings to use within the TestClass or TestMethods themselves? Currently i've been switching the test settings manually, but would prefer to switch with code if possible.</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12797092,"title":"Unexpected behavior at the IDE","body":"<p>MS Visual Studio 2010 SP1.</p>\n\n<p>I have wrote some class. Then I have wrote unit tests for it. Please, look at the my first screen:</p>\n\n<p><img src=\"http://i.stack.imgur.com/OctDC.png\" alt=\"enter image description here\"></p>\n\n<p>If I run unit test via \"1\" button, then  a code works as I have expect, but if I run unit test via \"2\" button, then I have unexpected behavior. Please, look at the my second screen:</p>\n\n<p><img src=\"http://i.stack.imgur.com/LjN83.png\" alt=\"enter image description here\"></p>\n\n<p>When the condition </p>\n\n<pre><code>if (null == acadRegistryKey)\n</code></pre>\n\n<p>is true, I press the <kbd>F10</kbd> key and go to row number 175. I press <kbd>F10</kbd> key again, and... I go to row number 177. Why it happens??? After row number 175 I must have return from method, because exception must occur.</p>\n\n<p>Best Regards, \nAndrey</p>\n"},{"tags":["ruby-on-rails","unit-testing","activerecord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12794528,"title":"Test the number of activerecord queries in ruby unit test","body":"<p>Is there a way to test for the number of mysql queries made by a specific function ? Just want to keep a check on the query limit, as a minor change in the function would trigger 1000 queries in place of just one. </p>\n"},{"tags":["c#","asp.net-mvc-3","unit-testing","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":143,"score":2,"question_id":12792378,"title":"System.ArgumentNullException: Value cannot be null","body":"<p>I'm creating a Unit Test for my CRUD and receiving this kind of error in my Delete test method: </p>\n\n<pre><code>System.ArgumentNullException: Value cannot be null.\n</code></pre>\n\n<p>I checked and found out that whenever I'm running the test, the contents under my userID was already deleted but receiving a \"Failed\" status in my Test Results bar. Can anyone help me resolve my issue?</p>\n\n<pre><code>Error Message: Test method TestProject1.UserTest.Delete threw exception: \nSystem.ArgumentNullException: Value cannot be null.\nParameter name: entity\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>[TestMethod]\npublic void Delete()\n{\ntaskModelContainer db = new taskModelContainer();\n\nint userID = 7;\n\nTaskMgr.Models.User UserEntity = new TaskMgr.Models.User();\n\nUserEntity.userID = userID;\n\nUserController User = new UserController();\n\nActionResult result = User.DeleteConfirmed(UserEntity.userID);\nint id = Convert.ToInt32(User.ViewBag.id);\nUser Users = db.Users.Single(e =&gt; e.userID == id);\n\n\nAssert.IsNull(Users.userID);\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost, ActionName(\"Delete\")]\n    public ActionResult DeleteConfirmed(int id)\n    {\n        User user = db.Users.Find(id);\n        db.Users.Remove(user);\n        db.SaveChanges();\n        var qry = from e in db.Users orderby e.userID descending select e.userID;\n        int eID = qry.First();\n        ViewBag.id = user.userID;\n        return RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<p>It stops at this line of the controller: db.Users.Remove(user);</p>\n"},{"tags":["unit-testing","testing","testng","jmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12778616,"title":"Why do TestNG tests passe individually but, fail when run in suite?","body":"<p>My TestNG tests passes individually, but fails when running in suite.I use JMock as my mock framework. I downloaded the source of TestNG and JMock, in order to be able to debug the code.</p>\n\n<p>When I debug the code of the testing framework (the code that runs the tests) I noticed that the assertions that JMock verifies were 13 assertions but, my test has 2 assertions.</p>\n"},{"tags":["ruby-on-rails","unit-testing","testcase"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12636119,"title":"What's the difference between \"setup do\" and \"def setup\" in ActiveSupport::TestCase?","body":"<p>I'm using Ruby 1.8.7 and Rails 2.3.6. While creating a couple of unit tests, I got curious about the difference between <code>setup</code> block and <code>setup</code> method in a test.</p>\n\n<p>First, I used setup block:</p>\n\n<pre><code>setup do                   \n  attr = {:title =&gt; \"Untitled\", :content =&gt; \"content\"} \n  @post = Post.create!(attr)\nend\n\ntest \"title\" do\n  assert_equal \"Untitled\", @post.title\nend\n</code></pre>\n\n<p>The test failed because <code>@post</code> was nil.</p>\n\n<p>Then I used setup method:</p>\n\n<pre><code>def setup                    \n  attr = {:title =&gt; \"Untitled\", :content =&gt; \"content\"} \n  @post = Post.create!(attr)\nend\n\ntest \"title\" do\n  assert_equal \"Untitled\", @post.title\nend\n</code></pre>\n\n<p>And the test passed.</p>\n\n<p>What makes the result different? I read <a href=\"http://blog.tddium.com/tag/activesupporttestcase/\" rel=\"nofollow\">this post</a> but I can't understand the difference clearly. How can I pass the test using <code>setup</code> block? </p>\n\n<p>Thanks for any advices/corrections.</p>\n"},{"tags":["unit-testing","clojure"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":12787193,"title":"Is it possible to tweak the output of clojure.test?","body":"<p>I have this test:</p>\n\n<pre><code>(ns opengltuts.core-test\n  (:use clojure.test\n        opengltuts.util)\n  (:import (org.lwjgl.opengl\n             GL11 GL12 GL13 GL14 GL15 GL20 GL21 GL30 GL31 GL32 GL33)))\n\n(def gl-classes [GL11 GL12 GL13 GL14 GL15 GL20 GL21 GL30 GL31 GL32 GL33])\n\n(deftest find-method-test\n  (testing \"find-method finds method in single class\"\n    (is (= (find-method \"toString\" Object)\n           [\"public java.lang.String java.lang.Object.toString()\"])))\n  (testing \"find-method finds all methods in list of classes\"\n    (is (= (apply find-method \"glShaderSource\" gl-classes)\n           (comment \"Omitted a 'p' to trigger failure\")\n           [\"ublic static void org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\"\n            \"public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\"\n            \"public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\"]))))\n</code></pre>\n\n<p>Now I made sure this fails, I get output like</p>\n\n<pre><code>lein test opengltuts.core-test\n\nFAIL in (find-method-test) (core_test.clj:14)\nfind-method finds all methods in list of classes\nexpected: (= (apply find-method \"glShaderSource\" gl-classes) [\"ublic static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\"])\n      actual: (not (= (\"public static void org.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\") [\"ublic static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.nio.ByteBuffer)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence)\" \"public static void \norg.lwjgl.opengl.GL20.glShaderSource(int,java.lang.CharSequence[])\"]))\n\nRan 1 tests containing 2 assertions.\n1 failures, 0 errors.\nTests failed.\n</code></pre>\n\n<p>I find this fairly unreadable. Rather than that, I would prefer output like:</p>\n\n<pre><code>&lt;all that info stuff, like the name of the test&gt;\nExpected: [something]\nGot: [something-else]\n</code></pre>\n\n<p>As is, I have troubles just figuring out what I was comparing with what.</p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":41,"score":4,"question_id":12791155,"title":"How to have a real atomic test in QUnit?","body":"<p>Say that I have two classes called <code>Book</code> and <code>Library</code> as follow:</p>\n\n<pre><code>var Book = function(title, author)\n{\n   this.title = title;\n   this.author = author;\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>var Library = function()\n{\n   var dbName = 'test';\n\n   this.getLibrary = function() {\n      return JSON.parse(window.localStorage.getItem(dbName));\n   };\n\n   this.save = function(library) {\n      window.localStorage.setItem(dbName, JSON.stringify(library));\n   };\n}\n\nLibrary.prototype.addBook = function(book) {\n   var library = this.getLibrary();\n   library.push(book);\n\n   this.save(library);\n\n   return library;\n};\n\nLibrary.prototype.removeBook = function(book) {\n   var library = this.getLibrary();\n\n   // Find and delete the right book\n\n   this.save(library);\n\n   return library;\n};\n</code></pre>\n\n<p>My question is: How can I Unit testing the <code>Library</code> class using QUnit to have a real atomic and independent test?</p>\n\n<p>I wrote this test function but it has not satisfied me. It does not seem to be very atomic and independent since it mix several functions that I think should be tested independently. I'd like to know if there's a better way or I'm testing it good already.</p>\n\n<pre><code>test(\"test\", function() {\n   var library = new Library();\n\n   deepEqual(library.getLibrary(), []);\n\n   // Add book1\n   var book1 = new Book(\"A book\", \"An author\");\n   deepEqual(library.addBook(book1), [book1]);\n   deepEqual(library.getLibrary(), [book1]);\n\n   // Add book2    \n   book2 = new Result(\"A new book\", \"Another author\");\n   deepEqual(library.addBook(book2), [book2, book1]);\n   deepEqual(library.getLibrary(), [book2, book1]]);\n\n   // Remove book1\n   deepEqual(library.removeResult(book1), [book2]);\n   deepEqual(library.getLibrary(), [book2]);\n\n   // Remove book2\n   deepEqual(library.removeResult(book2), []);\n   deepEqual(library.getLibrary(), []);\n});\n</code></pre>\n"},{"tags":["c++","multithreading","unit-testing","concurrency","boost-test"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":155,"score":3,"question_id":12304927,"title":"Is there a way to run C++ Unit Tests tests in parallel?","body":"<p>I'm using Boost Test for a long time now and I ends up having my tests running too slowly. As each test is highly parallel, I want them to run concurrently with all my cores. </p>\n\n<p>Is there a way to do that using the Boost Test Library ? I didn't found any solution. I tried to look a how to write custom test runner, but I didn't much documentation on that point :(</p>\n\n<p>If there is no way, does someone know a good C++ Test Framework to achieve that goal ? I was thinking that Google Test would do the job but apparently it cannot run test in parallel either. Even if the framework has less features than other more known framework, it is not a problem, I just need simple assertions and multi-threaded execution. </p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","unit-testing","naudio"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12780411,"title":"Unit Testing NAudio with ManualResetEvent Locks Up Test","body":"<p>Alright, I'm trying to unit test NAudio against a wrapper I created for a recording session, here is the code that starts and stops a recording session ...</p>\n\n<pre><code>public void StartRecording(string claimNo, string ip_no, string ip_name)\n{\n    if (this.IsRecording)\n    {\n        return;\n    }\n\n    this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name));\n    if (this.MicrophoneLevel == default(float))\n    {\n        this.MicrophoneLevel = .75f;\n    }\n\n    _aggregator.Reset();\n\n    _input = new WaveIn();\n    _input.WaveFormat = _waveFormat;\n\n    _input.DataAvailable += (s, args) =&gt;\n        {\n            _writer.Write(args.Buffer, 0, args.BytesRecorded);\n            byte[] buffer = args.Buffer;\n            for (int index = 0; index &lt; args.BytesRecorded; index += 2)\n            {\n                short sample = (short)((buffer[index + 1] &lt;&lt; 8) | buffer[index + 0]);\n                float sample32 = sample / 32768f;\n                _aggregator.Add(sample32);\n            }\n\n            if (this.DataAvailable != null)\n            {\n                this.DataAvailable(s, args);\n            }\n\n            if (!this.IsRecording)\n            {\n                _writer.Close();\n                _writer.Dispose();\n                _writer = null;\n            }\n        };\n    _input.RecordingStopped += (s, args) =&gt;\n        {\n            _input.Dispose();\n            _input = null;\n\n            if (this.RecordingStopped != null)\n            {\n                this.RecordingStopped(s, args);\n            }\n        };\n\n    _writer = new WaveFileWriter(this.CurrentRecording.FileName, _input.WaveFormat);\n\n    _input.StartRecording();\n    this.IsRecording = true;\n}\n\npublic void StopRecording()\n{\n    if (!this.IsRecording)\n    {\n        return;\n    }\n\n    this.CurrentRecording.Stop();\n\n    this.IsRecording = false;\n    _input.StopRecording();\n}\n</code></pre>\n\n<p>... and below is my unit test. I'm using a <code>ManualResetEvent</code> to assert the success of the event being fired and it's declared like this ...</p>\n\n<pre><code>private ManualResetEvent _eventRaised = new ManualResetEvent(false);\n</code></pre>\n\n<p>... however, the issue is that the test below simply locks up and the event is never fired. <strong>Can you confirm that the issue is that the <code>WaitOne</code> is not allowing the event to fire because it's locking the same thread?</strong></p>\n\n<pre><code>bool success = false;\n_eventRaised.Reset();\n\nvar target = new RecordingSession();\ntarget.StartRecording(\"1\", \"01\", \"Test Name\");\n\ntarget.RecordingStopped += (s, args) =&gt;\n    {\n        success = (target.CurrentRecording.Duration.TotalSeconds &gt; 4);\n        _eventRaised.Set();\n    };\n\nThread.Sleep(4000);\ntarget.StopRecording();\n\n_eventRaised.WaitOne();\n\nAssert.IsTrue(success);\n</code></pre>\n\n<p><strong>And if so, can you help me with this test?</strong> I need some enlightenment.</p>\n\n<p>I've used the <code>ManualResetEvent</code> many times to test events on other classes and it's worked, but something is different here.</p>\n"},{"tags":["android","unit-testing"],"answer_count":7,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1071,"score":2,"question_id":4116604,"title":"Android Test Automation","body":"<p>How can i automate Android Apis for better quality ? How can i test the android applications to get a better quality of this software..? </p>\n"},{"tags":["visual-studio-2010","unit-testing","specflow"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":582,"score":3,"question_id":6086889,"title":"SpecFlow - running parallel tests","body":"<p>I'm implementing tests using SpecFlow that have nothing to do with each other. Is there config option for SpecFlow that enables parallel test execution? I'm using VS10 and MSTest runner that supports running \"up to 5 parallel unit tests\" as they claim in documentation.</p>\n\n<p>Thanks,\nmax.yz</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":89,"score":3,"question_id":12783277,"title":"Mocking static method in ASP.NET MVC Test project","body":"<p>I have a method which looks like the one below</p>\n\n<pre><code>public List&lt;Rajnikanth&gt; GetRajnis()\n{\n    string username = Utility.Helpers.GetLoggedInUserName();\n    return _service.GetRajni(username);\n}   \n</code></pre>\n\n<p>Utility.Helper is a static class,\npublic static class Helpers\n{</p>\n\n<pre><code>public static String GetLoggedInUserName()\n{\n    string username = \"\";\n    if (System.Web.HttpContext.Current.User.Identity.IsAuthenticated)\n    {\n        username = ((System.Web.Security.FormsIdentity)HttpContext.Current.User.Identity).Ticket.Name;\n    }\n    return username;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I want to <strong>test</strong> : GetRajnis()</p>\n\n<p>I want to <strong>mock</strong> : GetLoggedInUserName()</p>\n\n<p>So my test method looks something like...</p>\n\n<pre><code>[TestMethod]\npublic void TestGetRajnis()\n{\n    SomeController s = new SomeController(new SomeService());\n    var data = s.GetRajnis();\n    Assert.IsNotNull(data);\n}\n</code></pre>\n\n<p>how do I mock the static method GetLoggedInUserName() ?</p>\n"},{"tags":["c#","entity-framework","unit-testing","dbcontext"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":97,"score":4,"question_id":12786254,"title":"Should unit test project has reference to EF dll when context is abstracted","body":"<p>I am abstracting my DbContext in an attempt to address Separate of Concerns and make my code unit-testable. In order to do that I have come up with following interface.</p>\n\n<p>This interface below is hosted in Assembly named <strong>AllInterfaces</strong>. This project has a reference to EF dll due to IDbSet in declaration below.</p>\n\n<pre><code>public interface ISalesContext : IDisposable   \n{   \n  IDbSet&lt;Customer&gt; Customers { get; }   \n  IDbSet&lt;Order&gt; Orders { get; }   \n  IDbSet&lt;Product&gt; Products { get; }    \n}    \n</code></pre>\n\n<p>I also created a fake db set as follows.</p>\n\n<pre><code>public class FakeDataSet&lt;T&gt; : IDbSet&lt;T&gt; where T: class, new()\n{\n .......\n}\n</code></pre>\n\n<p>So for my Customer object, this fake dataset look like below.</p>\n\n<pre><code>public class FakeCustomerDbSet : FakeDbSet&lt;Customer&gt;\n    {\n     ..............\n    }\n</code></pre>\n\n<p>Then I created my fake context as follows.</p>\n\n<pre><code>public class FakeSalesContext : ISalesContext \n    {\n        public FakeSalesContext ()\n        {\n            Customers = new FakeCustomerDbSet ();\n\n        }\n\n        public IDbSet&lt;Customer&gt; Customers { get; set; }\n        public IDbSet&lt;Order&gt; Orders{ get; private set; }\n        public IDbSet&lt;Product&gt; Products { get; private set; }\n\n        public void Dispose()\n        {\n\n        }\n    }\n</code></pre>\n\n<p>All the above classes (FakeDataSet,  FakeCustomerDbSet and FakeSalesContext ) related to fake objects live in an assembly <strong>AllFakes</strong>. I had to add a reference to EF dll as IDbSet interface is referred in these fake classes as well.</p>\n\n<p>Then I have my unit test project where I am using fake objects for performing unit testing. </p>\n\n<pre><code>ISalesContext Context = new FakeSalesContext ();\nContext.Customers.Add(new Customer() { Id = 1, LastName = \"Karen\" } );\n</code></pre>\n\n<p>Problem is that this unit test requires me to add reference to Entity framework dll. If I remove EF reference, I get following compilation error.</p>\n\n<blockquote>\n  <p>The type 'System.Data.Entity.IDbSet`1' is defined in an assembly\n  that is not referenced. You must add a reference to assembly\n  'EntityFramework, Version=4.4.0.0, Culture=neutral,\n  PublicKeyToken=b77a5c561934e089'.</p>\n</blockquote>\n\n<p>If I remove EF dll reference from AllFakes assembly, I get following  error. </p>\n\n<blockquote>\n  <p>The type or namespace name 'IDbSet' could not be found (are you \n  missing a using directive or an assembly reference?)</p>\n</blockquote>\n\n<p>Does it make sense to add a reference to EF dll to all these assemblies? To me, since I have abstracted my db context, it should not be needed here. Any suggestions on how to accomplish that?</p>\n"},{"tags":["unit-testing","boost","clang","libc++"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12732997,"title":"boost unit test framework aborts with clang and libc++","body":"<p>I am using:</p>\n\n<p>SLES 11 x86_64</p>\n\n<p><strong>Boost 1.51.0</strong> compiled with the following:\n./b2 toolset=clang cxxflags=\"-stdlib=libc++ -std=c++11\" linkflags=\"-stdlib=libc++\" </p>\n\n<p><strong>clang</strong> from svn (around two weaks old)</p>\n\n<p><strong>libc++</strong> from svn (nearly the latest)</p>\n\n<p>The test is aborted(SIGABORT) just at the end:</p>\n\n<pre><code>./unitTest\nRunning 3 test cases...\nModelTest.cpp(28): error in \"GameField_added_correctly\": check objects.size() == std::size_t{1} failed [0 != 1]\nModelTest.cpp(37): error in \"Spaceship_added_correctly\": check objects.size() == std::size_t{1} failed [0 != 1]\nModelTest.cpp(52): error in \"Spaceship_out_of_GameField_is_demolished_after_tick\": check objects.size() == std::size_t{2} failed [0 != 2]\nModelTest.cpp(59): error in \"Spaceship_out_of_GameField_is_demolished_after_tick\": check objects.size() == std::size_t{1} failed [0 != 1]\n\nAborted\n</code></pre>\n\n<p>Here is a very interesting backtrace:</p>\n\n<pre><code>Program received signal SIGABRT, Aborted.\n0x00007ffff7183945 in *__GI_raise (sig=&lt;optimized out&gt;) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n        in ../nptl/sysdeps/unix/sysv/linux/raise.c\n(gdb) bt\n#0  0x00007ffff7183945 in *__GI_raise (sig=&lt;optimized out&gt;) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00007ffff7184f21 in *__GI_abort () at abort.c:92\n#2  0x00007ffff796020f in std::uncaught_exception () at ../src/exception.cpp:110\n#3  0x00007ffff7968784 in std::__1::basic_ostream&lt;char&gt;::sentry::~sentry (this=0x7fffffffcd18) at ../include/ostream:243\n#4  0x000000000042a348 in std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp; std::__1::operator&lt;&lt; &lt;std::__1::char_traits&lt;char&gt; &gt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, char) ()\n#5  0x000000000042b85f in boost::unit_test::results_reporter::make_report(boost::unit_test::report_level, unsigned long) ()\n#6  0x0000000000431e22 in boost::unit_test::unit_test_main(boost::unit_test::test_suite* (*)(int, char**), int, char**) ()\n#7  0x00007ffff716fbc6 in __libc_start_main (main=0x432110 &lt;main&gt;, argc=1, ubp_av=0x7fffffffced8, init=0x45d380 &lt;__libc_csu_init&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffcec8) at libc-start.c:226\n#8  0x0000000000405ec9 in _start () at ../sysdeps/x86_64/elf/start.S:113\n(gdb)\n</code></pre>\n\n<p>It fails when it wants to print out the test results. The same happens when all the test cases passes.\nIt can be seen, that somehow during the destruction of std::ostream there is an exception.\nIt is strange, that the std::uncaught_exception is not from libc++ inline namespace (__1).</p>\n\n<p>Have any of you met similar problem before? What could be wrong?</p>\n\n<p>Update:\nPossible bug in libcxx:\n<a href=\"http://llvm.org/bugs/show_bug.cgi?id=13669\" rel=\"nofollow\">http://llvm.org/bugs/show_bug.cgi?id=13669</a></p>\n"},{"tags":["iphone","objective-c","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":12781589,"title":"Adding Logic Tests to the project in Xcode 4.5","body":"<p>I'm using xcode 4.5 and trying to add logic tests to the project. (This is actually a test, newly created project without unit tests). I'm following this guide:\n<a href=\"http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\" rel=\"nofollow\">http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html</a>\nSo, what i've done so far:</p>\n\n<ol>\n<li>Created a new project (View Based Application template)</li>\n<li>Click on File -> New- CocoaTouchUnitTestBundle\nThat's it. The tests (as documentation states) are ready to use.\nBut I have the following problems:\nThe SenTestinKit.framework appears in red\n<img src=\"http://i.stack.imgur.com/S1Ss2.png\" alt=\"enter image description here\"></li>\n</ol>\n\n<p>If I press Test button issue navigator shows nothing:\n<img src=\"http://i.stack.imgur.com/gDcgE.png\" alt=\"enter image description here\"></p>\n\n<p>If I select another debugger here(LLDB by default, trying to select GDB):</p>\n\n<p><img src=\"http://i.stack.imgur.com/ocmzW.png\" alt=\"enter image description here\"></p>\n\n<p>Xcode just hangs out:\n<img src=\"http://i.stack.imgur.com/oxb4W.png\" alt=\"enter image description here\"></p>\n\n<p>P.S I also tried to remove SenTestingKit.framework (which is in red) and add new. Nothing changed.</p>\n\n<p>What am I doing wrong ?? I suppose to see something like this(screenshot from apple guide):\n<img src=\"http://i.stack.imgur.com/D7L15.png\" alt=\"enter image description here\"></p>\n\n<p>Any help will be greatly appriciated!</p>\n"},{"tags":["unit-testing","spring","dependency-injection"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1664,"score":6,"question_id":2843281,"title":"How to override the behavior of Spring @Autowired","body":"<p>a little background:</p>\n\n<p>I am Using Spring 2.5, and specifically spring IOC and annotations.</p>\n\n<p>I am using @Autowired in my code (the Autowiring is done by type)\nand use  @Component for exposing Classes to the Automatic wiring.</p>\n\n<p>The situation described bellow arose while i tried to test my code.</p>\n\n<p>now to the problem:</p>\n\n<p>Note: i use a different Spring Context for the Test environment.</p>\n\n<p>I have a class FOO which is @Autowired but in the test context i want to use a different class of the same type MockFoo (extends FOO)</p>\n\n<p>The Spring Setup of course fails do so automatically due to multiple options for the Dependency Injection of the FOO class (both FOO and MockFOO comply to the Type check)</p>\n\n<p>I am looking for a way to inject the test bean instead of the original bean.</p>\n\n<p>I expected Spring to allow using the Context configurion file to override a bean injection or to order Spring not to autowire a specific bean </p>\n\n<p>BUT </p>\n\n<p>All these option seem to exists only for the beans which were originally defined in the Spring Context Configuration file</p>\n"},{"tags":["django","unit-testing","django-forms"],"answer_count":8,"favorite_count":10,"up_vote_count":9,"down_vote_count":0,"view_count":3630,"score":9,"question_id":2257958,"title":"Django unit testing for form edit","body":"<p>Someone has probably already developed a technique for relieving the tedium for the following idiomatic unit test:</p>\n\n<ol>\n<li>GET a url with form data already populated</li>\n<li>POST a revised form with one or more fields edited</li>\n<li>Check response (profit!)</li>\n</ol>\n\n<p>Step 2 is the most tedious, cycling through the form fields.  Are there any time-saving hacks for testing Django forms?</p>\n\n<p>[<em>Update</em>: I'm not testing Django forms handling.  I'm verifying that my application produces correct responses when a user makes changes to a form.  This is an application which processes clinical information, hence a lot of possible responses to test.]</p>\n"},{"tags":["android","unit-testing","junit","guice","roboguice"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12781209,"title":"Roboguice Not Working in JUnit Testing","body":"<p>I am trying to write some tests with classes that use roboguice. Unfortunately it seems that guice is not injecting anything at all.</p>\n\n<p>My setup is like so...</p>\n\n<ul>\n<li>I am using Intellij</li>\n<li>I have 2 intellij modules (1 for code, 1 for tests)</li>\n<li>I have 2 seperate module classes that extends AbstractModule(roboguice class) that define the bindings</li>\n<li>I have 2 roboguice.xml files that point to the package like this...</li>\n</ul>\n\n<blockquote>\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n         &lt;resources&gt;\n             &lt;string-array name=\"roboguice_modules\"&gt;\n                &lt;item&gt;com.evertaletest&lt;/item&gt;\n             &lt;/string-array&gt;\n         &lt;/resources&gt;\n</code></pre>\n</blockquote>\n\n<p>Does this setup seems correct? Any class that is injected is null at the moment</p>\n"},{"tags":["unit-testing","sha","sha-3","keccak"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":409,"score":1,"question_id":12716204,"title":"Have Keccak (SHA-3) example hashes (test vectors) been made available?","body":"<p>I'm interested in implementing Keccak (SHA-3) and would like a set of input/expected output pairs to test against. Have any official test vectors been released? I recall having some for the other SHA routines and they were very helpful.</p>\n"},{"tags":["unit-testing","gwt","mocking","junit4","httpsession"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":227,"score":0,"question_id":6028003,"title":"How can I mock a container-provided object (e.g HttpSession) when Unit testing a GWT app?","body":"<p>I am currently trying to unit test my Service layer (all *Impl.java classes) in a GWT app. Well the problem is that in the code, I have a dependency which targets an object provided by the Httpsession. Actually, I'm storing a User object (the currently logged in user) in the httpSession.</p>\n\n<p>In order to get it back from the HttpSession (in the *Impl.java class), I am using this :</p>\n\n<blockquote>\n  <p><strong>User user = ServiceUtil.getUser(getThreadLocalRequest().getSession());</strong></p>\n</blockquote>\n\n<p>How can I mock this object from my Unit test code ?</p>\n\n<p>thanks a lot,</p>\n"},{"tags":["python","eclipse","unit-testing","pydev"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12779784,"title":"How do I connect PostgreSQL with PyDev in Eclipse","body":"<p>I'm developing a module for Tryton, and when I'm trying to run unittest test in Eclipse with PostgreSQL and PyDev, Eclipse is not enable to connect to PostgreSQL, so test fails and raises this message: OperationalError: fe_sendauth: no password supplied</p>\n\n<p>The unittest test file is correct because if I run it in a Python console, it works correctly.</p>\n\n<p>How can I integrate unittest test in Eclipse with PostgreSQL and PyDev?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","unit-testing","nunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":98,"score":2,"question_id":12012044,"title":"TryUpdateModel fails only in unit tests to update child objects","body":"<p>I am able to get the following code to work on the server, but not in a unit test. In the unit test, the simple properties are set correctly, but the child objects are not. I've been beating my head against the wall for too long, so any advice would be welcome.</p>\n\n<h3>Controller:</h3>\n\n<pre><code>[HttpPost]\npublic bool Save(int id)\n{\n        var itemFromRepository = this.itemRepository.FetchById(id);\n\n        if (itemFromRepository != null)\n        {\n            this.TryUpdateModel(\n                itemFromRepository,\n                \"Item\",\n                new[] { \n                    \"AnIntProperty\", \n                    \"AStringProperty\",\n                    \"Category.Id\"\n                });\n\n            if (itemFromRepository.Category!= null)\n            {\n                itemFromRepository.Category= this.categoryRepository.FetchById(itemFromRepository.Category.Id);\n            }\n\n            if (ModelState.IsValid)\n            {\n                this.itemRepository.Update(itemFromRepository);\n                return true;\n            }\n        }\n\n        return false;\n}\n</code></pre>\n\n<h3>UnitTest:</h3>\n\n<pre><code>    this._controller.ControllerContext = new ControllerContext();\n    Item item = this.items.First();\n    var updatedCategory = this.categories.Last();\n    var updatedStringProperty = \"Fake Value\";\n    var updatedIntProperty = 4;\n\n    var formValues = new FormCollection {\n        { \"Item.AnIntProperty\", updatedStringProperty},\n        { \"Item.Category.Id\", updatedCategory.Id.ToString() },\n        { \"Item.AStringProperty\", updatedIntProperty.ToString() }\n    };\n\n    var result = this._controller\n        .WithIncomingValues(formValues)\n        .Save(item.Id);\n</code></pre>\n\n<p>This passes:</p>\n\n<pre><code>    Assert.That(\n        item.AStringProperty,\n        Is.EqualTo(updatedStringProperty));\n    Assert.That(\n        item.AnIntProperty,\n        Is.EqualTo(updatedIntProperty));\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>    Assert.That(\n        item.Category,\n        Is.Not.Null);\n    Assert.That(\n        item.Category.Name,\n        Is.EqualTo(updatedCategory.Name));\n</code></pre>\n"},{"tags":["asp.net-mvc","unit-testing","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12776594,"title":"Unittesting with ASP MVC: Validator.TryValidateObject returns always true","body":"<p>I'm trying to validate a MVC-model with Validator.TryValidateObject. \nThis works in production mode, but not in the unittest code.\nValidator.TryValidateObject give me alwasy true.</p>\n\n<p>The code parts: </p>\n\n<p>In the Controller-Constructor, I inject the Model:</p>\n\n<pre><code>private IEmailModel model;  \npublic JoggenController(IEmailModel m)  \n{  \n this.model = m;  \n}  \n</code></pre>\n\n<p>In the action-methode I validate the model, works fine in production mode, isValid is true or false:        </p>\n\n<pre><code>public ViewResult AddEmail(String email)  \n{  \nmodel.Email = email;  \nvar context = new ValidationContext(model, null, null);  \nvar list = new List&lt;ValidationResult&gt;();   \nvar isValid = Validator.TryValidateObject(model, context, list, true);              \n //...\n</code></pre>\n\n<p>Now I will test my AddEmail() and use this testcode:        </p>\n\n<pre><code>var emailModel = new Mock&lt;IEmailModel&gt;();  \nemailModel  \n     .Setup(p =&gt; p.Email)  \n     .Returns(\"xxx\");  \n\nvar controller = new Controller(emailModel.Object);  \n\n//should Faking ModelState.IsValid = false             \ncontroller.ModelState.Add(\"testError\", new ModelState());  \ncontroller.ModelState.AddModelError(\"testError\", \"test\");  \n\nvar result = controller.AddEmail(\"xxx\") as ViewResult;      \n//...  \n</code></pre>\n\n<p>If I debug the testcode, var isValid = Validator.TryValidateObject returns always true.\nWhats the Problem?</p>\n\n<p>Thanks</p>\n"},{"tags":["unit-testing","vc6"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":405,"score":2,"question_id":2430613,"title":"unit testing framework for Microsoft Visual C++ 6.0","body":"<p>Is there a unit testing framework for Microsoft Visual C++ 6.0?</p>\n"},{"tags":["c#",".net","unit-testing","mstest"],"answer_count":3,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":1266,"score":9,"question_id":5194966,"title":"MSTest: CollectionAssert.AreEquivalent failed. The expected collection contains 1 occurrence(s) of","body":"<p><strong>Question</strong>:</p>\n\n<p>Can anyone tell me why my unit test is failing with this error message?</p>\n\n<blockquote>\n  <p>CollectionAssert.AreEquivalent failed. The expected collection contains 1\n      occurrence(s) of . The actual\n      collection contains 0 occurrence(s).</p>\n</blockquote>\n\n<p><strong>Goal</strong>:</p>\n\n<p>I'd like to check if two lists are identical. They are identical if both contain the same elements with the same property values. The order is irrelevant.</p>\n\n<p><strong>Code example</strong>:</p>\n\n<p>This is the code which produces the error. <code>list1</code> and <code>list2</code> are identical, i.e. a copy-paste of each other.</p>\n\n<pre><code>[TestMethod]\npublic void TestListOfT()\n{\n    var list1 = new List&lt;MyPerson&gt;()\n    {\n        new MyPerson()\n        {\n            Name = \"A\",\n            Age = 20\n        },\n        new MyPerson()\n        {\n            Name = \"B\",\n            Age = 30\n        }\n    };\n    var list2 = new List&lt;MyPerson&gt;()\n    {\n        new MyPerson()\n        {\n            Name = \"A\",\n            Age = 20\n        },\n        new MyPerson()\n        {\n            Name = \"B\",\n            Age = 30\n        }\n    };\n\n    CollectionAssert.AreEquivalent(list1.ToList(), list2.ToList());\n}\n\npublic class MyPerson\n{\n    public string Name { get; set; }\n    public int Age { get; set; }\n}\n</code></pre>\n\n<p>I've also tried this line (<a href=\"http://stackoverflow.com/questions/2441188/mstest-collectionassert-use-with-generics/2441448#2441448\">source</a>)</p>\n\n<pre><code>CollectionAssert.AreEquivalent(list1.ToList(), list2.ToList());\n</code></pre>\n\n<p>and this line (<a href=\"http://stackoverflow.com/questions/662458/unittesting-ilist-with-collectionassert/662474#662474\">source</a>)</p>\n\n<pre><code>CollectionAssert.AreEquivalent(list1.ToArray(), list2.ToArray());\n</code></pre>\n\n<p>P.S.</p>\n\n<p>Related Stack Overflow questions:</p>\n\n<p>I've seen both these questions, but the answers didn't help.</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/2441188/mstest-collectionassert-use-with-generics\"> CollectionAssert use with generics?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/662458/unittesting-ilist-with-collectionassert\">Unittesting IList with CollectionAssert</a></li>\n</ul>\n"},{"tags":["unit-testing","testing","testng","jmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12777095,"title":"Why does this TestNG test pass although the mock method is not invoked?","body":"<p>I user TestNG and jMock for my unit test but, I have a problem with TestNG. It marks the test as passed when I expect mock object method to be invoked and it is not!</p>\n\n<pre><code>public class SomeTestTest {\n\n\n  Mockery mocker = new Mockery();\n\n  SomeInterface someInterface = mocker.mock(SomeInterface.class);\n\n  @Test\n  public void testName() throws Exception {\n    mocker.checking(new Expectations() {{\n      oneOf(someInterface).someMethod();\n    }});\n  }\n}\n</code></pre>\n\n<p>and this is the report I get </p>\n\n<pre><code>Custom suite\nTotal tests run: 1, Failures: 0, Skips: 0\n</code></pre>\n"},{"tags":["javascript","unit-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1065,"score":6,"question_id":716207,"title":"Testing private functions in javascript","body":"<p>I'm using the module pattern in Javascript to separate my public interface from the private implementation. To simplify what I'm doing, my code generates a chart. The chart consists of multiple parts (axises, labels, plot, legend, etc.) My code looks like:</p>\n\n<pre><code>var Graph = function() {\n  var private_data;\n  function draw_legend() { ... }\n  function draw_plot() { ... }\n  function helper_func() { ... }\n  ...\n\n  return {\n    add_data: function(data) {\n      private_data = data;\n    },\n    draw: function() {\n      draw_legend()\n      draw_plot()\n    }\n  }\n}\n</code></pre>\n\n<p>Some people advocate only testing the public interface of your classes, which makes sense, but I'd really like to get in some tests to test each of the components separately. If I screw up my draw_legend() function, I'd like that test to fail, not a test for the public draw() function. Am I on the wrong track here?</p>\n\n<p>I could separate each of the components in different classes, for example make a Legend class. But it seems silly to create a class for what's sometimes just 5-10 lines of code, and it would be uglier because I'd need to pass in a bunch of private state. And I wouldn't be able to test my helper functions. Should I do this anyway? Should I suck it up and only test the public draw()? Or is there some other solution?</p>\n"},{"tags":["unit-testing","visual-studio-2012","test-runner","test-explorer"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12772528,"title":"How do you disable the test explorer in Visual Studio 2012","body":"<p>I use ReSharper to run unit tests from within Visual Studio 2012.</p>\n\n<p>Every now and then I accidentally invoke the in-built test explorer by accident when running unit tests, instead of the ReSharper test runner.</p>\n\n<p>How do you disable the test explorer in Visual Studio 2012, so I can not accidentally invoke it?</p>\n"},{"tags":["unit-testing","testing","tdd","software-engineering"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":12724679,"title":"Software methodologies based on partial unit testing","body":"<p>Considering that there are so many names for so many software methodologies out there, I would like to know if there is any recommending only partial unit testing.</p>\n\n<p>I am a TDD believer, but sometimes I get the feeling of these two things:</p>\n\n<ol>\n<li><p>Most of the thinking for a better and more maintainable structure/design is achieved mostly with the first tests of a class.</p></li>\n<li><p>Unit tests are more important when working on someone else code</p></li>\n</ol>\n\n<p>Therefore I suppose that out there, some people is writing about their experiences using a mid approach. I would like to do some self research on the topic and find out if I can get a \"plan B\" when pushing some TDD practices.</p>\n\n<p>Is there any software methodology or trend based on partial unit testing?</p>\n"},{"tags":["java","unit-testing","testing","junit","mocking"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":245,"score":2,"question_id":11071652,"title":"Unit Test Best Practices: Empty Constructor or Mock Object?","body":"<p>Let's suppose I've to test this Java <code>ClassA</code> that depends on the difficult to instantiate <code>ClassB</code>:</p>\n\n<pre><code>public class ClassA\n{\n    public ClassA()\n    {\n        String configFile = \"config_file.xml\";\n\n        // I have to pass configFile to instantiate ClassB.\n        // And for example if configFile does not exists in the testing machine?\n        // Wouldn't it be easier to have an empty constructor for classB to test ClassA?\n        ClassB classB = new ClassB(configFile);\n    }\n\n    // ...\n}\n</code></pre>\n\n<p><code>ClassB</code>:</p>\n\n<pre><code>class ClassB\n{\n    ClassB(String configFile)\n    {\n        // Set up configs.\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>Is it bad practice to create an empty constructor inside <code>classB</code> only for testing purposes?\nOr is it better to rewrite a simplified mock <code>ClassB</code> for that?</p>\n"},{"tags":["javascript","unit-testing","testing","test-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":187,"score":1,"question_id":9142838,"title":"What is a pure in-browser JavaScript test framework?","body":"<p>I want a unit-test framework for JavaScript which <em>runs in the browser</em>. Not with an external browser-automation system as in Selenium, or a non-browser JS environment, but just one .html which loads the test framework and test suite and displays the results in that page. My searches have found only the other two kinds.</p>\n\n<p>I am primarily interested in testing JavaScript code for expected results and not crashing, not DOM/events or visual appearance.</p>\n\n<p>Nice-to-haves:</p>\n\n<ul>\n<li>Performance testing/benchmarking as well as correctness testing.</li>\n<li><em>Optional</em> external automation so a shell command can run the test suite and check if it succeeded.</li>\n</ul>\n\n<p>The motivation for the requirements is:</p>\n\n<ul>\n<li>My application under test is currently itself pure JavaScript, and I'd like to keep it that way (without platform or other-language dependencies).</li>\n<li>I am using many newer or bleeding-edge features such as ECMAScript 5, Typed Arrays, WebGL, and Local Storage. I want to test the actual interaction with these facilities, not stubs.</li>\n</ul>\n"},{"tags":["unit-testing","intellij-idea"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12771472,"title":"How to create test stub for a new method using IDEA?","body":"<p>Suppose you have a new Main class, with 2 methods a and b</p>\n\n<p>Pressing <code>Control-Shift-T</code> allows us to create new test class and create stubs for both methods</p>\n\n<p><img src=\"http://i.stack.imgur.com/Fjgop.png\" alt=\"enter image description here\"></p>\n\n<p>Ok, now if i add 1 more method <code>c</code>, i'd like to add a test for it in already existing MainTest class</p>\n\n<p>How can this be done please using IDEA? <code>Control-Shift-T</code> does not work as it attempts to create an already existing test class. </p>\n"},{"tags":["python","unit-testing","sqlalchemy","flask","flask-sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12766078,"title":"How to properly test a Python Flask system based on SQLAlchemy Declarative","body":"<p><strong>Update: Based on what I found and how I got it working, here is a template solution that works for testing the underlying SQLAlchemy systems using the Declarative extension.</strong></p>\n\n<pre><code>import unittest\nfrom database import Base\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import scoped_session, sessionmaker\n\nimport models\n\nclass StopsTestCase(unittest.TestCase):\n\n    def setUp(self):\n        self.engine = create_engine('sqlite:///:memory:')\n        self.session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=self.engine))\n        Base.query = self.session.query_property()\n\n        Base.metadata.create_all(bind=self.engine)\n\n        #Create objects here\n        #These will likely involve something like the following for one of my stops\n\n        # stop1 = models.Stop(id=1, name=\"Stop 1\")\n        # self.session.add(stop1)\n        # self.session.commit()\n\n        # But adding a stop to the database here will break the test below. Just saying.\n\n\n    def test_empty_db(self):\n        stops = self.session.query(models.Stop).all()\n        assert len(stops) == 0\n\n    def tearDown(self):\n        self.session.remove()\n</code></pre>\n\n<hr>\n\n<p>I have a project that I've been working on for a while, which is written in Flask, and uses SQLAlchemy with the Declarative extension <a href=\"http://flask.pocoo.org/docs/patterns/sqlalchemy/\" rel=\"nofollow\">http://flask.pocoo.org/docs/patterns/sqlalchemy/</a>. I've recently decided to start unit testing my project, but for the life of me, I can't seem to figure out how to make it work. </p>\n\n<p>I looked at <a href=\"http://flask.pocoo.org/docs/testing/\" rel=\"nofollow\">http://flask.pocoo.org/docs/testing/</a>, but I can't seem to make it work. </p>\n\n<p>I tried a mix of things from different websites, but am unable to find something that works correctly. </p>\n\n<pre><code>class StopsTestCase(unittest.TestCase):\n\n    def setUp(self):\n        self.engine = create_engine('sqlite:///:memory:')\n        self.session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=self.engine))\n        models.Base = declarative_base()\n        models.Base.query = self.session.query_property()\n\n        models.Base.metadata.create_all(bind=self.engine)\n\n    def test_empty_db(self):\n        stops = session.query(models.Stop).all()\n        assert len(stops) == 0\n\n    def tearDown(self):\n        session.remove()\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>Unfortunately, the best I can seem to get, causes the following error.</p>\n\n<pre><code>OperationalError: (OperationalError) no such table: stops u'SELECT stops.agency_id AS stops_agency_id, stops.id AS stops_id, stops.name AS stops_name, stops.\"desc\" AS stops_desc, stops.lat AS stops_lat, stops.lon AS stops_lon, stops.zone_id AS stops_zone_id \\nFROM stops' ()\n\n----------------------------------------------------------------------\nRan 1 test in 0.025s\n\nFAILED (errors=1)\n</code></pre>\n\n<p>Any help on this would be greatly appreciated. If someone has ever been through this before, and made it work, I would like some pointers! Thanks in advance.</p>\n"},{"tags":["unit-testing","design-by-contract"],"answer_count":9,"favorite_count":24,"up_vote_count":45,"down_vote_count":0,"view_count":1906,"score":45,"question_id":2965483,"title":"Unit tests - The benefit from unit tests with contract changes?","body":"<p>Recently I had an interesting discussion with a colleague about unit tests. We were discussing when maintaining unit tests became less productive, when your contracts change.</p>\n\n<p>Perhaps anyone can enlight me how to approach this problem. Let me elaborate:<br></p>\n\n<p>So lets say there is a class which does some nifty calculations. The contract says that it should calculate a number, or it returns -1 when it fails for some reason.</p>\n\n<p>I have contract tests who test that. And in all my other tests I stub this nifty calculator thingy.</p>\n\n<p>So now I change the contract, whenever it cannot calculate it will throw a CannotCalculateException. </p>\n\n<p>My contract tests will fail, and I will fix them accordingly. But, all my mocked/stubbed objects will still use the old contract rules. These tests will succeed, while they should not!</p>\n\n<p>The question that rises, is that with this faith in unit testing, how much faith can be placed in such changes... The unit tests succeed, but bugs will occur when testing the application. The tests using this calculator will need to be fixed, which costs time and may even be stubbed/mocked a lot of times...</p>\n\n<p>How do you think about this case? I never thought about it thourougly. In my opinion, these changes to unit tests would be acceptable. If I do not use unit tests, I would also see such bugs arise within test phase (by testers). Yet I am not confident enough to point out what will cost more time (or less).</p>\n\n<p>Any thoughts?</p>\n"},{"tags":["unit-testing","node.js","mocha","apn"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1652,"score":3,"question_id":8360318,"title":"global leak errors in mocha","body":"<p>Was trying to unit test the apple push notification library </p>\n\n<p><a href=\"https://github.com/argon/node-apn\" rel=\"nofollow\">https://github.com/argon/node-apn</a></p>\n\n<p>but I get a global leak error when I try to open up an APN connection.  Is that a configuration error on my part or an error in node-apn or mocha?</p>\n\n<p>I'm not sure I understand what checkGlobals is doing... is it just checking to see if any global variable are being set?</p>\n\n<p>0) Feed \"before all\" hook:\n     Error: global leak detected: hasCert\n      at Runner.checkGlobals (/usr/lib/node_modules/mocha/lib/runner.js:96:21)\n      at Runner. (/usr/lib/node_modules/mocha/lib/runner.js:41:44)\n      at Runner.emit (events.js:64:17)\n      at /usr/lib/node_modules/mocha/lib/runner.js:159:12\n      at Hook.run (/usr/lib/node_modules/mocha/lib/runnable.js:114:5)\n      at next (/usr/lib/node_modules/mocha/lib/runner.js:157:10)\n      at Array. (/usr/lib/node_modules/mocha/lib/runner.js:165:5)\n      at EventEmitter._tickCallback (node.js:126:26)</p>\n"},{"tags":["ios","unit-testing","xcode4","apple"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":166,"score":0,"question_id":9227384,"title":"Linker error for unit test Xcode 4","body":"<p>my application builds fine when i run it and unit tests built fine as well</p>\n\n<p>unit tests failed(application still fine) when i added some code for CGAffineTransform</p>\n\n<p>behaviour is the same for both simulator and device</p>\n\n<p>error message:</p>\n\n<pre><code>Undefined symbols for architecture i386:\n  \"_CGAffineTransformMakeTranslation\", referenced from:\n      -[PhysicsObject hasPoint:] in PhysicsObject-23B4A02B8F0621AD.o\n  \"_CGAffineTransformMakeRotation\", referenced from:\n      -[PhysicsObject hasPoint:] in PhysicsObject-23B4A02B8F0621AD.o\n  \"_CGAffineTransformConcat\", referenced from:\n      -[PhysicsObject hasPoint:] in PhysicsObject-23B4A02B8F0621AD.o\nld: symbol(s) not found for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I have tried suggestions from </p>\n\n<p><a href=\"http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/\" rel=\"nofollow\">http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/</a>\n<a href=\"http://sealedabstract.com/code/tired-of-getting-mach-o-linker-errors-when-unit-testing/\" rel=\"nofollow\">http://sealedabstract.com/code/tired-of-getting-mach-o-linker-errors-when-unit-testing/</a>\n<a href=\"http://stackoverflow.com/questions/5329001/apple-mach-o-linker-error-when-compiling-for-device\">Apple Mach-O Linker Error when compiling for device</a></p>\n\n<p>and nothing works :( i suspect this is related to a framework in particular not being found. I cant seem to identify which though. help is much appreciated.</p>\n"},{"tags":["unit-testing","hudson","automated-tests"],"answer_count":4,"favorite_count":6,"up_vote_count":19,"down_vote_count":0,"view_count":1412,"score":19,"question_id":947376,"title":"Are there any free hosters of continuous integration servers?","body":"<p>I have just started up a simple open source project and hosted it on google but I would love it if there was a free CI server I could create a job on to monitor my source.</p>\n\n<p>I've had a little search around and couldn't find anything.</p>\n\n<p>Ideally, I'd like a Hudson server somewhere that is free for me to use that I can create a Job on to monitor my google subversion repository.</p>\n\n<p>I doubt any exist since I could write malicious code, or just poor, slow code with infinite loops etc.</p>\n\n<p>I work on this code from multiple machines and I don't have my own server on 24/7 which is why such a service would be handy.</p>\n"},{"tags":["javascript","ios","unit-testing","automated-tests","ui-automation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12384444,"title":"UIAutomation [UITextField resignFirstResponder]","body":"<p>How can I get the keyboard dismissed when using UI Automation tests?\nI've been looking at <a href=\"http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIAElementClassReference/UIAElement/UIAElement.html#//apple_ref/doc/uid/TP40009903\" rel=\"nofollow\">UIAElement</a> and <a href=\"http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATextFieldClassReference/UIATextField/UIATextField.html#//apple_ref/doc/uid/TP40009925\" rel=\"nofollow\">UIATextField</a> documentation but couldn't find something that suggests so.</p>\n\n<pre><code>var textField = toolbar.textFields()[0];\nvar textView = toolbar.textViews()[0];\nfunction testFeature1() {\n    if (textField.hasKeyboardFocus() || textView.hasKeyboardFocus()) {\n        // Resign first responder .. How?\n    }\n    // Do my tests\n}\n</code></pre>\n"},{"tags":["unit-testing","microsoft-fakes"],"answer_count":4,"favorite_count":2,"up_vote_count":10,"down_vote_count":1,"view_count":1280,"score":9,"question_id":9677445,"title":"Mock framework vs MS Fakes frameworks","body":"<p>A bit confused on the differences of Mock frameworks like NMock vs the VS 2011 Fakes Framework.\nGoing through MSDN, what I understand is that Fakes allow you to mock your dependencies just like RhinoMock or NMock, however the approach is different, Fakes generates code to achive this functionality but Mocks framework does not. So is my understanding correct?  Is Fakes just another Mock framework</p>\n"},{"tags":["java","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":34,"score":0,"question_id":12763648,"title":"Test Cases: Need to figure out how to make two test cases that test my methods that round double(s)","body":"<p>I'm trying to make a test case that enables me to check if my methods work. One method accepts  a double and converts it into a string that is rounded to two decimal places and the other rounds the double to a whole number. If anyone has any advice or can help me out please let me know. Thank you!</p>\n"},{"tags":["c#","unit-testing","windows-8","mediaelement"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":167,"score":2,"question_id":12754755,"title":"Unit testing MediaElement in Windows 8 (C#/XAML)","body":"<p>I've got a class with a MediaElement that I'm trying to write unit tests for, but I can't figure out how to unit test the parts that interact with the MediaElement. Specifically, I want to ensure that opening a file triggers the right code, and that my own class's state is updating along with the MediaElement's.</p>\n\n<p>I'm using the ExecuteOnUIThread() trick mentioned <a href=\"http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/57815826-8cbb-4206-b2a6-3a3383dfe6ad\" rel=\"nofollow\">here</a> to create and work with the MediaElement, since I will get an RPC_E_WRONG_THREAD exception otherwise.</p>\n\n<p>Then I use <a href=\"http://www.philosophicalgeek.com/2007/12/27/easily-unit-testing-event-handlers/\" rel=\"nofollow\">this trick</a> to be able to test my own class's events, which connect to the MediaElement's own MediaOpened and CurrentStateChanged events.</p>\n\n<p>However, I'm not seeing anything getting activated when I open an MP3 file from the internet, no matter how long I set the WaitOne to be. I've tried just bypassing my own class and testing MediaElement directly, but the events do not seem to fire at all.</p>\n\n<p>Here is the test method I'm working with:</p>\n\n<pre><code>[TestMethod]\npublic async Task TestMethod1()\n{\n    await ExecuteOnUIThread(() =&gt;\n    {\n        var me = new MediaElement();\n        bool opened = false;\n        var mre = new ManualResetEvent(false);\n        me.MediaOpened += delegate\n        {\n            opened = true;\n            mre.Set();\n        };\n        me.Source = new Uri(\"http://dl.dropbox.com/u/52389/test-song.mp3\");\n        mre.WaitOne(5000);\n\n        Assert.IsTrue(opened);\n    });\n}\n</code></pre>\n"},{"tags":["c#","unit-testing","tdd","moq","mstest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12760930,"title":"Mock extension methods as an interface","body":"<p>Its already researched about it and found several interesting links <a href=\"http://stackoverflow.com/questions/2295960/mocking-extension-methods-with-moq\">like this</a>.\n<strong>But to my problem, they have not helped me.</strong></p>\n\n<h1>Code</h1>\n\n<p><strong>I have the following interface</strong></p>\n\n<pre><code>public interface IViewFolderReference\n{\n    string FolderName { get; set; }\n}\n</code></pre>\n\n<p><strong>Extension</strong></p>\n\n<pre><code>public static ICollection&lt;TFile&gt; GetFiles&lt;TFile&gt;(this IViewFolderReference view)\n    where TFile: class, IFile\n{\n    var folder = view.GetFolder();\n    return folder.Exists ? \n        Mapper.Map&lt;ICollection&lt;TFile&gt;&gt;(folder.GetFiles())\n        : null;\n}\n</code></pre>\n\n<p><strong>Concret class</strong></p>\n\n<pre><code>public class ProcessoViewModel : IViewFolderReference\n{\n    public string FolderName { get; set; }\n    public ICollection&lt;File&gt; Arquivos { get; set; }    \n    ...\n}\n</code></pre>\n\n<p><strong>Test method</strong></p>\n\n<pre><code>[TestMethod]\npublic void Ao_salvar_processo_adicionar_dois_itens()\n{\n    // Arrange\n    var vm = new Mock&lt;ProcessoViewModel&gt;();\n    vm.Object.Arquivos = new List&lt;File&gt;() {\n        new File { FileName = \"Arquivo 1.jpg\", DisplayName = \"Arquivo 1\" }\n        ,new File { FileName = \"Arquivo 2.doc\", DisplayName = \"Arquivo 2\" }\n    };\n\n    //Act\n    controller.salvar(vm.Object); // Problem here!! (GetFiles is called, How can mock the result??)\n\n    //Assert\n    var processoDb = repositorio.Query&lt;Processo&gt;().SingleOrDefault(p =&gt; p.Imovel == vm.Object.Imovel &amp;&amp; vm.Object.DataEntrada == p.DataEntrada);\n    Assert.IsNotNull(processoDb.Arquivos);\n    Assert.AreEqual(processoDb.Arquivos.Count, 2);\n}\n</code></pre>\n"},{"tags":["python","unit-testing","google-app-engine","webapp2","babel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12753595,"title":"Python Unit test with i18 but without webapp2","body":"<p>I encountered a problem with unit tests when use i18 in my project.\nMy project uses framewoks i18 and webapp2\nThe function uses the translation by i18. But when I test, I get the error - missing global variable request.\nFor example it is:\n<code></p>\n\n<pre><code>from unittest import TestCase, main\nfrom webapp2_extras.i18n import lazy_gettext as _\n\ndef Hello(a):\n    if a &gt; 0:\n       message = _('My great message!11 a &gt; 0')\n    else:\n       message = _('My great message!11 a =&lt; 0')\n    return message\n\nclass TestHandler(TestCase):\n\n    def testHello0(self):\n        self.assertEqual(Hello(0), 'My great message!11 a =&lt; 0')\n\n    def testHello3(self):\n        self.assertEqual(Hello(3), 'My great message!11 a &gt; 0')\n\nif __name__ == '__main__':\n     main()\n</code></pre>\n\n<p>and I have message:</p>\n\n<pre><code>FAIL: testHello0 (text3.TestHandler)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/text3.py\", line 14, in testHello0\n    self.assertEqual(Hello(0), 'My great message!11 a =&lt; 0')\nAssertionError: Request global variable is not set.\n</code></pre>\n\n<p>I have a solution to this problem, but I do not like it. This is a crutch. How can you test my function without using framewoks on similarity webapp2</p>\n\n<pre><code>from unittest import TestCase, main\nfrom webapp2_extras.i18n import lazy_gettext as _\nimport webapp2\n\ndef Hello(a):\n    if a &gt; 0:\n        message = _('My great message!11 a &gt; 0')\n    else:\n        message = _('My great message!11 a =&lt; 0')\n    return message\n\n\nclass OneHandler(webapp2.RequestHandler):\n    def get(self):\n        myNumber = self.request.get('myNumber')\n        myNumber = int(myNumber)\n        message = Hello(myNumber)\n        self.response.write(message)\n\n\nroutes = [('/One', OneHandler)]\napp = webapp2.WSGIApplication(routes = routes)\n\nclass TestHandler(TestCase):\n\n    def testHello0(self):\n        myNumber = 0\n        URL = '/One?myNumber=%s' % myNumber\n\n        self.response = app.get_response(URL)\n        self.mess = self.response.body\n        self.assertEqual(self.mess, 'My great message!11 a =&lt; 0') \n\n    def testHello3(self):\n        myNumber = 3\n        URL = '/One?myNumber=%s' % myNumber\n\n        self.response = app.get_response(URL)\n        self.mess = self.response.body\n        self.assertEqual(self.mess, 'My great message!11 a &gt; 0') \n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>and well done!</p>\n\n<pre>Ran 2 tests in 0.047s\n\nOK\n</code></pre>\n\n<p>But it's not a good solution. How I can testing my function and dont use webapp2, etc?</p>\n"},{"tags":["php","unit-testing","yii"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12760644,"title":"Fatal error: Class 'CDbTestCase' not found yii framework","body":"<p>I'm following the \"Agile web application development with yii 1.1 and php5\" book and i'm at the testing with fixtures section. I followed their code but i can't access to the fixture...</p>\n\n<p>I'm running my unit test at chapter 6 after configuring fixture with PHPunit and it returns me this</p>\n\n<pre><code>Last login: Sat Oct  6 20:09:36 on ttys000\nxyz-MacBook-Pro:~ inganious$ /usr/local/bin/phpunit/phpunit /Applications/MAMP/htdocs/trackstar/protected/tests/unit/ProjectTest.php\n\nFatal error: Class 'CDbTestCase' not found in /Applications/MAMP/htdocs/trackstar/protected/tests/unit/ProjectTest.php on line 3\nxyz-MacBook-Pro:~ inganious$ \n</code></pre>\n\n<p>Here is my ProjectTest.php file</p>\n\n<pre><code>class ProjectTest extends CDbTestCase\n{\n\n    public $fixtures=array\n    (\n            'projects'=&gt;'Project',\n    );\n\n    public function testCreate()\n      {\n        //CREATE a new Project\n        $newProject=new Project;\n        $newProjectName = 'Test Project Creation';\n        $newProject-&gt;setAttributes(array(\n        'name' =&gt; $newProjectName,\n        'description' =&gt; 'This is a test for new project creation',\n        'createTime' =&gt; '2009-09-09 00:00:00',\n        'createUser' =&gt; '1',\n        'updateTime' =&gt; '2009-09-09 00:00:00',\n        'updateUser' =&gt; '1',\n        )\n      );\n        $this-&gt;assertTrue($newProject-&gt;save(false));\n        //READ back the newly created Project to ensure the creation worked\n\n        $retrievedProject=Project::model()-&gt;findByPk($newProject-&gt;id);\n        $this-&gt;assertTrue($retrievedProject instanceof Project);\n        $this-&gt;assertEquals($newProjectName,$retrievedProject-&gt;name);\n      }\n        public function testRead()\n      {\n        $retrievedProject = $this-&gt;projects('project1');\n        $this-&gt;assertTrue($retrievedProject instanceof Project);\n        $this-&gt;assertEquals('Test Project 1',$retrievedProject-&gt;name);\n      }\n        public function testUpdate()\n      {\n        $project = $this-&gt;projects('project2');\n        $updatedProjectName = 'Updated Test Project 2';\n        $project-&gt;name = $updatedProjectName;\n        $this-&gt;assertTrue($project-&gt;save(false));\n        //read back the record again to ensure the update worked\n        $updatedProject=Project::model()-&gt;findByPk($project-&gt;id);\n        $this-&gt;assertTrue($updatedProject instanceof Project);\n        $this-&gt;assertEquals($updatedProjectName,$updatedProject-&gt;name);\n      }\n        public function testDelete()\n      {\n        $project = $this-&gt;projects('project2');\n        $savedProjectId = $project-&gt;id;\n        $this-&gt;assertTrue($project-&gt;delete());\n        $deletedProject=Project::model()-&gt;findByPk($savedProjectId);\n        $this-&gt;assertEquals(NULL,$deletedProject);\n    }\n}\n</code></pre>\n\n<p>Can anyone help please ?</p>\n"},{"tags":["ruby-on-rails","unit-testing","ruby-on-rails-3.2","minitest","counter-cache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12760609,"title":"How can I ensure that counter_cache is updated correctly in rails unit tests?","body":"<p>I've got a normal <code>counter_cache</code> set up for my Rails 3.2.6 model. It works flawlessly in the webapp, but fails in unit tests.</p>\n\n<p>The following snippet illustrates the issue at hand:</p>\n\n<pre><code>test \"counter_cache ...\" do\n    u = FactoryGirl.create(:customer)\n    FactoryGirl.create(:order, :customer =&gt; u)\n\n    # u.orders.count == 1; rest is always 0\n    assert_equal u.orders.count, u.orders_count  # FAILS!\n    assert_equal u.orders.count, u.orders.size   # FAILS!\n    assert_equal u.orders.count, u.orders.length # FAILS!\nend\n</code></pre>\n\n<p><em>Note that I tried the same without the use of FactoryGirl, which still failed.</em></p>\n\n<p><strong>How can I ensure that counter_cache is updated correctly in unit tests?</strong></p>\n"},{"tags":["c#","unit-testing","nunit","expectedexception"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":6925354,"title":"Is there a way to provide failure message with ExpectedException attribute?","body":"<p>I want to provide a message when assertion has failed but I can't figure out a way to do it.</p>\n\n<pre><code>[Test]\npublic void CreateInstanceTest()\n{\n    SomeClass someClass = new SomeClass();\n    Assert.IsNotNull(someClass, \"Constructor could not return an instance\");\n    //provide failure message here\n}\n</code></pre>\n\n<p>How do I do it in this test?</p>\n\n<pre><code>[Test]\n[ExpectedException(typeof(ArgumentNullException))]\npublic void EmptyNameInConstructorThrowsExceptionTest()\n{\n    SomeClass someClass = new SomeClass(null);\n}\n</code></pre>\n"},{"tags":["git","unit-testing","git-bisect"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12760450,"title":"How to use git bisect: Using unit tests for determining the errorneous commit?","body":"<p>I'm new to git and just discovered \"git bisect\". How is it generally used when you can check for the error using a newly written unit test (that wasn't there beforehand)?</p>\n\n<p>Say we have a repository containing unit tests, but - as so often - they weren't complete. In some version we discover that a feature isn't working, but we know it was in some version before. Unfortunately that feature wasn't checked by a unit test. What I'd like to do now is:</p>\n\n<ol>\n<li>Write the test case (that fails at first of course)</li>\n<li>Look for the commit introducing the error using git bisect using this test case</li>\n<li>Correcting the error and committing the fix (and the test case)</li>\n</ol>\n\n<p>This use case has one problem. As git bisect checks out old versions, the just inserted test case won't be there, so I can't use it to check for the error. I can try to not commit the test, but to keep the it as local change. But imagining that the tests file was changed in some version inbetween, I'm likely to run into merge conflicts.</p>\n\n<p>So what to do? How is git bisect generally used?</p>\n"},{"tags":["python","django","unit-testing","tdd"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1114,"score":3,"question_id":3817213,"title":"Proper way to test Django signals","body":"<p>I'm trying to test sent signal and it's providing_args. Signal triggered inside <code>contact_question_create</code> view just after form submission.</p>\n\n<p>My TestCase is something like:</p>\n\n<pre><code>    def test_form_should_post_proper_data_via_signal(self):\n        form_data = {'name': 'Jan Nowak'}\n        signals.question_posted.send(sender='test', form_data=form_data)\n        @receiver(signals.question_posted, sender='test')\n        def question_posted_listener(sender, form_data):\n            self.name = form_data['name']\n        eq_(self.name, 'Jan Nowak')\n</code></pre>\n\n<p>Is this the proper way to test this signal? Any better ideas?</p>\n"},{"tags":["algorithm","unit-testing","tdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":11418003,"title":"TDD Naïve Text Search Algorithm","body":"<p>I need to test drive Naïve string search algorithm.\n<a href=\"http://en.wikipedia.org/wiki/String_searching_algorithm\" rel=\"nofollow\">http://en.wikipedia.org/wiki/String_searching_algorithm</a></p>\n\n<p>Can someone shed some light on how I could approach the issue.</p>\n\n<p>should my tests only be testing outside behaviour? (i.e. the pattern occuring indexes irrespective of the algorithm used? )</p>\n\n<p>Or should I be algorithm specific and test drive algorithm specific implementations?</p>\n"},{"tags":["unit-testing","cakephp","netbeans","phpunit","assertion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12745760,"title":"Displaying Result and Expected values of an Assertion in CakePHP testing","body":"<p>Does anyone know if there is a way to force CakePHP TestSuite to view the Expected and Result values of an assertion when it fails? Typical PHPUnit tests are showing it by default in the output but not Cake's TestSuite (which uses PHPUnit). A side from that, when i debug a test case in NetBeans i get some kind of Socket Exception whenever i try to set a watch for a variable, and it only happens in CakePHP test cases, it works fine in evry other source file. Is there a solution for this aswell?</p>\n"},{"tags":["unit-testing","versioning"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":12756535,"title":"unit testing with Alienbrain","body":"<p>We use Alienbrain at my company and have a custom Python access script to allow us to more easily work with it from our Python code. We're not very good at maintaining this script, yet everything is built around it. I'd like full unit test coverage of this script, but haven't figured out yet how to handle in a script the spawning of a repository, creating of multiple users, and testing things like trying to check out a file by two users in a repo that doesn't allow concurrent checkouts. I've been thinking of setting up a repo somewhere, copying it, using it in the unit tests, then copying that back over the original to refresh it after each test, but I'd prefer to hear more solid workarounds others may have found.</p>\n"},{"tags":["unit-testing","mstest","rowtest","datadriven"],"answer_count":4,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":2109,"score":18,"question_id":347535,"title":"How to RowTest with MSTest?","body":"<p>I know that MSTest doens't support RowTest and similar tests.</p>\n\n<p>What MSTests users do? How is it possible to live without RowTest support? </p>\n\n<p>I've seen DataDriven test features but sounds like too much overhead, is there any 3rd patch or tool which allow me to do RowTest similar tests in MSTest ?</p>\n"},{"tags":["python","unit-testing","testing","mocking","mox"],"answer_count":0,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12755510,"title":"Why do I get ValueError(\"There must be at least one expected method\") from mox, when I know that the function I've mocked out is getting called?","body":"<p>I'm using mox to stub out an email-sending function in my code. I want to verify that the function is called N times, with a certain set of params each time. </p>\n\n<p>Mox is raising ValueError(\"There must be at least one expected method\") as if the function calls that I've stubbed out are not happening, but they actually seem to be happening.</p>\n\n<p>Watching my logs, I can see the functions being called and see all the log messages / updates in my DB that tell me the code being tested is in fact working. I also have 14 other unit tests verifying that, so I'm confident this is a problem with the test rather than the underlying code.</p>\n\n<p>Here is my test: </p>\n\n<pre><code>class MyTestSuite(mox.MoxTestBase):\n    def test_my_send_function(self):\n        self.mox.StubOutWithMock(module_path, \"my_send_function\")\n        for state in SEQUENCE: # defined elsewhere, assume 5 states in sequence\n            module_path.my_send_function(to_email_address, subject, IgnoreArg())\n    self.mox.ReplayAll()\n\n    module_path.my_send_function_parent() # loops over the 5 states in SEQUENCE and calls my_send_function()\n\n    # Verify() and UnsetStubs() are done automatically because I subclasses MoxTestBase\n</code></pre>\n\n<p>Why is mox saying the calls never happened when they are? I could not find anything about this in the mox docs or elsewhere here on SO.</p>\n"},{"tags":["java","unit-testing","maven","junit","maven-failsafe-plugin"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":255,"score":4,"question_id":11542530,"title":"Using JUnit Categories with Maven Failsafe plugin","body":"<p>I'm using JUnit Categories to separate integration tests from unit tests. The Surefire plugin configuration works - it skips the tests annotated with my marker interface IntegrationTest.</p>\n\n<p>However, the Failsafe plugin doesn't pick the integration tests. I've even tried to specify the junit47 provider, but zero tests are run in the integration-test phase.</p>\n\n<p>Here is the pom.xml fragment:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.12&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;integration-test&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;groups&gt;com.mycompany.test.IntegrationTest&lt;/groups&gt;\n                &lt;excludedGroups&gt;com.mycompany.test.UnitTest&lt;/excludedGroups&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n                    &lt;artifactId&gt;surefire-junit47&lt;/artifactId&gt;\n                    &lt;version&gt;2.12&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Here is the Failsafe part of the log:</p>\n\n<pre><code>[INFO] --- maven-failsafe-plugin:2.12:integration-test (default) @ MyProject.war ---\n[INFO] Failsafe report directory: /home/stoupa/MyProject/war/target/failsafe-reports\n[INFO] Using configured provider org.apache.maven.surefire.junitcore.JUnitCoreProvider\n\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nConcurrency config is parallel='none', perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false\n\nResults :\n\nTests run: 0, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>\n\n<p>Is the provider org.apache.maven.surefire.junitcore.JUnitCoreProvider that can be seen in the log output the right one?</p>\n"},{"tags":["c#","unit-testing","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12753373,"title":"Testing timer with Moq","body":"<p>I'm trying to learn TDD and Unit Testing and I'm building a small application for the purpose. </p>\n\n<p>I'm building a timer class but I can't make a test pass. I want to test that a method is called when the time on the timer is elapsed.</p>\n\n<p>I have the following class:</p>\n\n<pre><code>public class TimeOutTimer\n{\n    private readonly ISubscriber _subscriber;\n    private Timer _timer;\n\n    public TimeOutTimer(ISubscriber subscriber)\n    {\n        _subscriber = subscriber;\n    }\n\n    public void Start()\n    {\n        _timer = new Timer(1000);\n        _timer.Start();\n        _timer.Elapsed += TimerOnElapsed;\n    }\n\n    private void TimerOnElapsed(object sender, ElapsedEventArgs elapsedEventArgs)\n    {\n        _subscriber.TimeReached();   \n    }\n}\n</code></pre>\n\n<p>And the test, using Moq:</p>\n\n<pre><code>[Test]\npublic void Start_WithValidParameters_TriggersTimeReached()\n{\n    var subscriberMock = new Mock&lt;ISubscriber&gt;();\n    var timer = new TimeOutTimer(subscriberMock.Object);\n\n    timer.Start();\n\n    subscriberMock.Verify(subscriber =&gt; subscriber.TimeReached());\n}\n</code></pre>\n\n<p>If I take the Timer out and make a direct call to _subscriber.TimeReached(), it works.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["ruby-on-rails","unit-testing","configuration","deprecated","shoulda"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1226,"score":4,"question_id":4901306,"title":"How can I mute Rails 3 deprecation warnings selectively?","body":"<p>I am upgrading a Rails 2 to Rails 3 application (code not written by me).\nThe (well tested code) uses shoulda and Test::Unit, and extensively uses the macros should_create and should_change.</p>\n\n<p>I understand from <a href=\"http://robots.thoughtbot.com/post/731871832/this-should-change-your-mind\" rel=\"nofollow\">this discussion</a> that the shoulda maintainers want to get rid of both methods but that people using Test::Unit don't find it necessary (not sure I am grasping the whole discussion though).</p>\n\n<p>Anaway, is there a way to selectively turn of the deprecation warnings for specified macros?  I already know from <a href=\"http://stackoverflow.com/questions/2689377/silencing-deprecation-warnings-in-rails-3\">this posting</a> that you can turn off the deprecation warnings in the Rake test output entirely by setting:</p>\n\n<pre><code>ActiveSupport::Deprecation.silenced = true\n</code></pre>\n\n<p>in your the test environment file and I also know that you can put specific pieces of code in a block to get them silenced:</p>\n\n<pre><code>ActiveSupport::Deprecation.silence do\n# no warnings for any use of deprecated methods here\nend\n</code></pre>\n\n<p>The latter is an option but would require me to go over all the tests and enclose the should_create macros in such a block.  So I was wondering there was a way to eliminate warnings for specific macros entirely with one configuration setting?</p>\n"},{"tags":["java","unit-testing","junit","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":113,"score":2,"question_id":12750193,"title":"how to unit test a class which creates new objects","body":"<p>I'm using JUnit and Mockito to test some classes. The class itself creates an object from another class. A list called testList. Here my code:</p>\n\n<pre><code>public class A {\n       private List&lt;B&gt; bList;\n\n       //returns the bList\n       public List&lt;B&gt; getBList() {\n          return bList;\n       }\n\n       //checks the status by calling getStatus in class B\n       public Status getStatus() {\n          //status is an enum consists of PASSED and FAILED\n          Status finalStatus = Status.PASSED;\n          for (B be : this.getTestList()) {\n             if (be.getStatus() != Status.PASSED) {\n                finalStatus = Status.FAILED;\n                break;\n             }\n          }\n          return status;\n       }\n    }\n\n\n    public Class B {\n       private Status status = Status.FAILED;   \n\n       public getStatus() {\n          return status;\n       }\n\n       public void setStatus(Status status) {\n          this.status = status;\n       }\n    }\n</code></pre>\n\n<p>What would be the best way to test the getStatus and getTestList methods in the class called Test.</p>\n\n<p>Thank you very much....</p>\n"},{"tags":["objective-c","unit-testing","testing","assert"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12750407,"title":"Using SenTest to test an assertion","body":"<p>I have code in method which asserts( ) that a parameter falls within a given range. I'd like to test illegal parameters using a SenTest test case.</p>\n\n<p>My first assumption was that I should use STAssertThrows( ... ) however this reports no exception is thrown when the assert fails. Can I catch assert() fails with an STAssert... macro?</p>\n\n<p>[updated to provide an example]</p>\n\n<p>In class Foo.m</p>\n\n<pre><code>@interface Foo : NSObject {\n    NSUInteger count;\n    NSUInteger max;\n}\n@end\n\n@implementation Foo\n-(void) bar:(char) c {\n    assert( count &lt; max );\n    ...\n}\n@end\n</code></pre>\n\n<p>In class TestFoo.m</p>\n\n<pre><code>@interface TestFoo : SenTestCase {\n    Foo testFoo_;\n}\n@end\n\n@implementation TestFoo\n    -(void) testBar {\n        STAssertXXX( YYY );\n    }\n@end\n</code></pre>\n\n<p>What XXX and YYY can I use to test the failure or otherwise of the assertion in method bar: ?</p>\n"},{"tags":["python","unit-testing","scrapy","nose"],"answer_count":3,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":498,"score":9,"question_id":6456304,"title":"Scrapy Unit Testing","body":"<p>I'd like to implement some unit tests in a Scrapy (screen scraper/web crawler).  Since a project is run through the \"scrapy crawl\" command I can run it through something like nose.  Since scrapy is built on top of twisted can I use its unit testing framework Trial? If so, how? Other wise I'd like to get nose working.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I've been talking on <a href=\"http://groups.google.com/group/scrapy-users/browse_thread/thread/ba1fadfd40916e71\">Scrapy-Users</a> and I guess I am supposed to \"build the Response in the test code, and then call the method with the response and assert that [I] get the expected items/requests in the output\".  I can't seem to get this to work though.</p>\n\n<p>I can build a unit-test test class and in a test:</p>\n\n<ul>\n<li>create a response object</li>\n<li>try to call the parse method of my\nspider with the response object</li>\n</ul>\n\n<p>However it ends up generating <a href=\"https://gist.github.com/1044924\">this</a> traceback.  Any insite as to why?</p>\n"},{"tags":["c++","python","unit-testing","exception","quickfix"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12697269,"title":"Catching C++ exceptions from python while building quickfix 1.13.3","body":"<p>I'm building Quickfix 1.13.3 on Linux Fedora. The python unit tests are failing. The test passes erroneous FIX messages to python, and python is supposed to catch the errors, and throw the appropriate exception. Whats' happening, is that the c++ layer is catching the error, throwing a c++ exception, and the test fails with a c++ core dump. I'm assuming that python is supposed to be catching these exceptions, but it isn't </p>\n\n<p>Anyone have any experience with this?</p>\n"},{"tags":["c#",".net","unit-testing","exception"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":889,"score":5,"question_id":6125143,"title":"How can a unit test confirm an exception has been thrown","body":"<p>Im writing a unit test for a c# class, One of my tests should cause the method to throw an exception when the data is added. How can i use my unit test to confirm that the exception has been thrown?</p>\n"},{"tags":["unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":12719976,"title":"Why the unit test frameworks/tools show first the amount of tests passed or total instead of failures?","body":"<p>I know several unit tests frameworks and tools (for .net, java and javascript) and I don't remember one that shows first the amount of tests failed, several of them shows the results in this order: passed, failed and total (or some variations, but keeping failed with a poor evidence)</p>\n\n<p>I think that the amount of test failed should always be in evidence, so showed at least first.</p>\n\n<p>Why a lot of them do this (showing the passed or total tests first) ? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As this isn't a isolated aspect or feature of one or two framework or tool, <strong>my curiosity was aroused and then, I'm asking if there is a known reason for them to be so</strong>.</p>\n\n<p>Search for \"unit test result\" in internet (try google images), you will see a lot of output samples where rarely the amount of failed cases are in a good highlight, several of them are in the format PASSED, TOTAL, FAILED, or some others variations but the passed or total amount usually are shown as the more important information in the results. </p>\n\n<p>With the exception of those that aren't thus and show the FAILED in a good evidence/highlight, <strong>I thought that the others may follow a simple way to show the amount from total: \"AMOUNT/TOTAL\"</strong>, being the amount the one that reach the total, so the PASSED TESTS, but this isn't totally true, so now I guess that my question has no answer.</p>\n\n<p>But, following is a short list of some samples found now from a simple search in the internet, look that even those that has a good or some highlight that signs that some was wrong, the amount of failures rarely is the one that is showed as the more important information:</p>\n\n<ul>\n<li><a href=\"http://www.jetbrains.com/idea/webhelp/test-runner-tab.html#\" rel=\"nofollow\">IntelliJ IDEA</a> - Amount/Total, and Failed at the end, but has a nice graphical highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/fMKaS.png\" alt=\"IntelliJ IDEA\"></p>\n\n<ul>\n<li><a href=\"http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/unit_test_runner.xml\" rel=\"nofollow\">DevExpress in Visual Studio</a> - Total, Passed, and Failed at the end, but has a nice graphical highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/J9POk.png\" alt=\"DevExpress in Visual Studio\"></p>\n\n<ul>\n<li><a href=\"http://httpcode.google.compfrizionewikiTestService\" rel=\"nofollow\">Frizione</a> - Total, Failures and errors at the end, poor highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/qYed7.png\" alt=\"Frizione\"></p>\n\n<ul>\n<li><a href=\"http://community.sharpdevelop.net/blogs/mattward/archive/2010/06/01/UnitTestingWithIronPython.aspx\" rel=\"nofollow\">IronPhyton</a> - Total, and Failures at the end, but has a nice highlight at the last line.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/mQjNc.png\" alt=\"IronPhyton\"></p>\n\n<ul>\n<li><a href=\"http://pivotal.github.com/jasmine/\" rel=\"nofollow\">Jasmine</a> - Total, and Failures at the end, but has a nice graphical highlight when has failures.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/n3BLH.png\" alt=\"Jasmine\"></p>\n\n<ul>\n<li><a href=\"http://code.google.com/p/js-test-driver/\" rel=\"nofollow\">jsTestDriver</a> - Total, Passed, and Failed at the end, very poor highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/kQt6u.png\" alt=\"jsTestDriver\"></p>\n\n<ul>\n<li><a href=\"http://www.jsunit.net/runner/testRunner.html\" rel=\"nofollow\">jsUnit Test Runner</a> - Total, Errors and Failed at the end.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/gTLSs.png\" alt=\"jsUnit Test Runner\"></p>\n\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/ms182527%28v=vs.90%29.aspx\" rel=\"nofollow\">MSTest</a> - Passed / Total (I don't remember if it shows the failed amount), but has a nice failure highlight.</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/6UFVg.png\" alt=\"MSTest\"></p>\n\n<ul>\n<li><a href=\"http://community.sharpdevelop.net/blogs/mattward/archive/2012/05/06/UsingMSTestWithSharpDevelop.aspx\" rel=\"nofollow\">MSTest - Text output</a> - Passed / Total, and the Failed at the end (poor highlight).</li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/vSkAi.png\" alt=\"MSTest - Text output\"></p>\n\n<ul>\n<li><a href=\"http://www.nunit.org/index.php?p=nunit-gui&amp;r=2.4\" rel=\"nofollow\">NUnit GUI Runner</a> </li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/Leohy.png\" alt=\"NUnit GUI Runner\"></p>\n\n<ul>\n<li><a href=\"http://visualstudiogallery.msdn.microsoft.com/c8164c71-0836-4471-80ce-633383031099\" rel=\"nofollow\">Visual NUnit</a></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/vrXSn.png\" alt=\"Visual NUnit\"></p>\n\n<ul>\n<li><a href=\"http://qunitjs.com/intro/\" rel=\"nofollow\">QUnit</a></li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/e8IuZ.png\" alt=\"QUnit\"></p>\n\n<p><a href=\"http://www.codeproject.com/Articles/11812/Unit-Test-s-Reporter\" rel=\"nofollow\">Unit Test's Reporter</a></p>\n\n<p><img src=\"http://i.stack.imgur.com/Zda67.png\" alt=\"Unit Test's Reporter\"></p>\n"},{"tags":[".net","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":827,"score":3,"question_id":1342918,"title":"Should I unit test event handlers","body":"<p>I tend to veer towards the opinion that only public interfaces should be tested, thereby covering testing of private procedures. However, an interesting question arose yesterday - should one test event handlers? My gut instinct is that logic should be stored in self-contained procedures invoked by the handlers themselves, but this is subjective and would more than likely result in private procedures rather than public ones that are being tested. Should I be unit testing event handlers and, if so, what are the best practices for doing so?</p>\n"},{"tags":["java","unit-testing","spring","junit4","spring-aop"],"answer_count":1,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":3611,"score":5,"question_id":4278788,"title":"injecting mock beans into spring context for testing","body":"<p>I know similar questions have been asked, e.g. <a href=\"http://stackoverflow.com/questions/565334/spring-beans-redefinition-in-unit-test-environment\">here</a>, but having done a search, I've come upon a solution I'm much happier with <a href=\"http://forum.springsource.org/archive/index.php/t-46824.html\">here</a></p>\n\n<p>My only problem however, is that I'm not sure how to implement this solution.</p>\n\n<p>What I want to be able to do is via the HotswappableTargetSource override the bean definitions of select beans in my application context with my test versions and then run the test. </p>\n\n<p>Then for each test case I'd like to specify which beans I want to be hot swappable and then each test  must be able to create its own mock versions and swap those in, and be able to swap back again.</p>\n\n<p>I am able to get the Application Context the test is running with but what I don't know is how to configure a bean to be hot swappable. I know how to do it when configuring beans with xml but I don't want to go back to using xml to configure beans.</p>\n"},{"tags":["c#",".net","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12745742,"title":"Error Setting up Property During Unit Testing Using Moq","body":"<p>Alright, let's assume I have a class like the following ...</p>\n\n<pre><code>public class Foo : IFoo\n{\n    public string Bar\n    {\n        get { ... }\n    }\n\n    public void Initialize()\n    {\n        ...\n    }\n}\n</code></pre>\n\n<p>... and as you can see it implements an interface so I can mock it. Now, in my unit test I'm building the mock like this ...</p>\n\n<pre><code>var mock = new Mock&lt;IFoo&gt;();\nmock.SetupProperty(p =&gt; p.Bar).SetReturnsDefault(\"Some static value here.\");\n</code></pre>\n\n<p>... however, when the test runs I get the following error ...</p>\n\n<blockquote>\n  <p>System.ArgumentException: Property IFoo.Bar is read-only.\n  Parameter name: expression</p>\n</blockquote>\n\n<p>So, three questions:</p>\n\n<ol>\n<li>What am I doing wrong?</li>\n<li>What do I need to do?</li>\n<li>Can you please explain how I misunderstood <code>SetReturnsDefault</code>?</li>\n</ol>\n\n<p>Thanks all!</p>\n"},{"tags":[".net","unit-testing","resharper","testdriven.net"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":829,"score":1,"question_id":5034050,"title":"Why use TestDriven.net when you have Resharper?","body":"<p>As far as I can tell, TestDriven.net is focused on giving direct access to running tests from within Visual Studio. Yet, Resharper, while being a more general tool, provides this functionality as well. If one uses Resharper, is there any point in using TestDriven.net?</p>\n"},{"tags":["unit-testing","system.reactive"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12508657,"title":"How does the TestScheduler in Reactive Extensions v2 work","body":"<p>I have been reading this: <a href=\"http://blogs.msdn.com/b/rxteam/archive/2012/06/14/testing-rx-queries-using-virtual-time-scheduling.aspx\" rel=\"nofollow\">Testing Rx Queries using Virtual Time Scheduling</a></p>\n\n<p>I got to the part \"Using Unit Test projects\" (about halfway down the page) and tried it myself (using VS2012 &amp; MSTest) but my results are not the same as in the document. Specifically, my assertions fail.</p>\n\n<p>Here is my test code:</p>\n\n<pre><code>[TestMethod]\npublic void TestMethod1()\n{\n    var scheduler = new TestScheduler();\n\n    var xs = scheduler.CreateColdObservable(\n        OnNext(10, 42),\n        OnCompleted&lt;int&gt;(20));\n\n    var observer1 = scheduler.CreateObserver&lt;int&gt;();\n    scheduler.Schedule(TimeSpan.FromTicks(190), \n                       (s, t) =&gt; xs.Subscribe(observer1));\n\n    var observer2 = scheduler.CreateObserver&lt;int&gt;();\n    scheduler.Schedule(TimeSpan.FromTicks(220), \n                       (s, t) =&gt; xs.Subscribe(observer2));\n\n    scheduler.Start();\n\n    observer1.Messages.AssertEqual(\n        OnNext(200, 42),\n        OnCompleted&lt;int&gt;(210));\n\n    observer2.Messages.AssertEqual(\n        OnNext(230, 42),\n        OnCompleted&lt;int&gt;(240));\n}\n</code></pre>\n\n<p>One change I had to make was this:</p>\n\n<pre><code>scheduler.Schedule(TimeSpan.FromTicks(190),\n                   () =&gt; xs.Subscribe(observer1));\n</code></pre>\n\n<p>became:</p>\n\n<pre><code>scheduler.Schedule(TimeSpan.FromTicks(190), \n                   (s, t) =&gt; xs.Subscribe(observer1));\n</code></pre>\n\n<p>To be perfectly honest I don't grasp the impact of this change (I haven't been coding in C# that long!).</p>\n\n<p>And here are the results:</p>\n\n<pre><code>Assert.Fail failed. \nExpected: [OnNext(42)@200, OnCompleted()@210]\nActual..: [OnNext(42)@11, OnCompleted()@21]\n</code></pre>\n\n<p>The way I understand it is that I am creating a cold observable that will return the value 42 on the 10th tick and the sequence completes on the 20th tick. I then create and observer that subscribes to this observable indicating that I want the schedule to start at tick 190. Hence the test for value 42 at tick 200 (190 + 10) and the completion time at tick 210. I however get ticks 11 and 21 respectively.</p>\n\n<p>The document is based on a pre-RTM of V2 so I am not sure if the behavior of the TestScheduler has been changed in the RTM or whether I made a mistake somewhere. I'd appreciate if someone could explain what is happening.</p>\n"},{"tags":["visual-studio-2010","unit-testing","templates","silverlight-5.0","silverlight-toolkit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12743907,"title":"Silverlight Toolkit UT Template installation in Visual Studio 2010 Express","body":"<p>I just have installed Visual Studio 2010 Express for Windows Phone developers. This version has some limitations.</p>\n\n<p>I noticed, there are UT templates in Silverlight Toolkit. I have found toolkit library. Templates were here: <em>C:\\Program Files (x86)\\Microsoft SDKs\\Silverlight\\v5.0\\Toolkit\\dec11\\Source</em> as ZIP file</p>\n\n<p>But I cannot install templates into <em>C:\\Users\\user\\Documents\\Visual Studio 2010\\Templates\\ItemTemplates\\Visual C# (and ProjectTemplates\\Visual C#)</em>. </p>\n\n<p>I have tried also to make a shortcuts with parameter\n<em>\"C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\VPDExpress.exe\" /installvstemplates</em> and execute...</p>\n\n<p>but nothing happend.</p>\n\n<p>What should I do to install Windows Phone UT templates?</p>\n"},{"tags":["eclipse","unit-testing","proxy","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":870,"score":2,"question_id":1497957,"title":"Failed web service unit tests behind a proxy in Eclipse","body":"<p>I have a problem executing unit tests in Eclipse behind a proxy, as the classes used by the unit tests call some web services, which are behind a proxy. In Tomcat I can of course specify a proxy to be used, but when I run unit tests directly from Eclipse, the proxy configuration of Eclipse seems to be ignored. How can I configure my unit tests or Eclipse to use a proxy in this case? </p>\n"},{"tags":["javascript","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":36,"score":5,"question_id":12743015,"title":"Unit tests with Javascript","body":"<p>I want to start Unit tests in javascript, But i never done this before. <br />\nSo I start with this code:</p>\n\n<pre><code>window.onload = function(){\n        var color = document.getElementById('wrapper').style.backgroundColor;   \n             if(color == \"red\"){\n                  alert(\"The Background color is correct\");\n              } };\n</code></pre>\n\n<p>But it's too complicated in my version, so how you do unit tests in javascript? <br />\nAnywhere a good tutorial?</p>\n"},{"tags":["unit-testing","asynchronous","synchronous","await"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12641147,"title":"How to unit test a synchronous method calling asynchronous method?","body":"<p>What is the correct way to write a unit test for a synchronous method calling async methods. \nRight now my unit test are passing, but when I try to open the page, it never returns.\nWhy isn't my unit test failing? How can I make it fail?</p>\n\n<p>I replicated my problem with this simple code:</p>\n\n<p>My passing test:</p>\n\n<pre><code>   [TestMethod]\n   public void DoSomeWork_WhenWeDoSomeWork_ShouldReturnDone()\n   {\n      var service = new SyncService();\n\n      const string expected = \"Done\";\n      var actual = service.DoSomeWork();\n\n      Assert.AreEqual(expected, actual);\n\n   }\n</code></pre>\n\n<p>My view that never returns:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n       var syncService = new SyncService();\n\n        return View((object)syncService.DoSomeWork());\n    }\n</code></pre>\n\n<p>My service that never returns to view:</p>\n\n<pre><code>    public class SyncService\n    {\n       public string DoSomeWork()\n       {\n          return SomeWork().GetAwaiter().GetResult();\n       }\n\n       private async Task&lt;string&gt; SomeWork()\n       {\n          var task1 = Task.Delay(1000);\n          var task2 = Task.Delay(1000);\n\n          await Task.WhenAll(task1, task2);\n\n          return \"Done\";\n       }\n    }\n</code></pre>\n"},{"tags":["python","unit-testing","parameterized-unit-test"],"answer_count":3,"favorite_count":6,"up_vote_count":13,"down_vote_count":0,"view_count":2347,"score":13,"question_id":32899,"title":"How to generate dynamic (parametrized) unit tests in python?","body":"<p>I have some kind of test data and want to create an unit test for each item. My first idea was to do it like this:</p>\n\n<pre><code>import unittest\n\nl = [[\"foo\", \"a\", \"a\",], [\"bar\", \"a\", \"b\"], [\"lee\", \"b\", \"b\"]]\n\nclass TestSequence(unittest.TestCase):\n    def testsample(self):\n        for name, a,b in l:\n            print \"test\", name\n            self.assertEqual(a,b)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>The downside of this is that it handles all data in one test. I would like to generate one test for each item on the fly. Any suggestions?</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12734289,"title":"weird issue with python unittest","body":"<p>the following super simple unit test runs fine under python2.7, but gave the following error\n\"no method runTest()\" in 2.6, why is that?</p>\n\n<p>thanks!\nyang</p>\n\n<pre><code>myuser@myhost /tmp $ python26 -m unittest a.AA\nTraceback (most recent call last):\n  File \"/usr/lib64/python2.6/runpy.py\", line 122, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib64/python2.6/runpy.py\", line 34, in _run_code\n    exec code in run_globals\n  File \"/usr/lib64/python2.6/unittest.py\", line 874, in &lt;module&gt;\n    main(module=None)\n  File \"/usr/lib64/python2.6/unittest.py\", line 815, in __init__\n    self.parseArgs(argv)\n  File \"/usr/lib64/python2.6/unittest.py\", line 842, in parseArgs\n    self.createTests()\n  File \"/usr/lib64/python2.6/unittest.py\", line 848, in createTests\n    self.module)\n  File \"/usr/lib64/python2.6/unittest.py\", line 612, in loadTestsFromNames\n    suites = [self.loadTestsFromName(name, module) for name in names]\n  File \"/usr/lib64/python2.6/unittest.py\", line 597, in loadTestsFromName\n    test = obj()\n  File \"/usr/lib64/python2.6/unittest.py\", line 215, in __init__\n    (self.__class__, methodName)\nValueError: no such test method in &lt;class 'a.AA'&gt;: runTest\nmyuser@myhost /tmp $ vi a.py\nmyuser@myhost /tmp $ cat a.py\nimport unittest\n\nclass AA(unittest.TestCase):\n    pass\n</code></pre>\n"},{"tags":["python","tdd","unit-testing"],"answer_count":7,"favorite_count":10,"up_vote_count":17,"down_vote_count":0,"view_count":3017,"score":17,"question_id":2798956,"title":"Python unittest: Generate multiple tests programmatically?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a function to test, <code>under_test</code>, and a set of expected input/output pairs:</p>\n\n<pre><code>[\n(2, 332),\n(234, 99213),\n(9, 3),\n# ...\n]\n</code></pre>\n\n<p>I would like each one of these input/output pairs to be tested in its own <code>test_*</code> method. Is that possible?</p>\n\n<p>This is sort of what I want, but forcing every single input/output pair into a single test:</p>\n\n<pre><code>class TestPreReqs(unittest.TestCase):\n\n    def setUp(self):\n        self.expected_pairs = [(23, 55), (4, 32)]\n\n    def test_expected(self):\n        for exp in self.expected_pairs:\n            self.assertEqual(under_test(exp[0]), exp[1])\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>(Also, do I really want to be putting that definition of <code>self.expected_pairs</code> in <code>setUp</code>?)</p>\n\n<p><strong>UPDATE:</strong> Trying <strong>doublep</strong>'s advice:</p>\n\n<pre><code>class TestPreReqs(unittest.TestCase):\n\n    def setUp(self):\n        expected_pairs = [\n                          (2, 3),\n                          (42, 11),\n                          (3, None),\n                          (31, 99),\n                         ]\n\n        for k, pair in expected_pairs:\n            setattr(TestPreReqs, 'test_expected_%d' % k, create_test(pair))\n\n    def create_test (pair):\n        def do_test_expected(self):\n            self.assertEqual(get_pre_reqs(pair[0]), pair[1])\n        return do_test_expected\n\n\nif __name__ == '__main__':\n    unittest.main()   \n</code></pre>\n\n<p>This does not work. 0 tests are run. Did I adapt the example incorrectly?</p>\n"},{"tags":["python","unit-testing","testcase","parameterized-unit-test"],"answer_count":6,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":682,"score":5,"question_id":1676269,"title":"Writing a re-usable (parametrized) unittest.TestCase method","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm writing tests using the unittest package, and I want to avoid repeated code. I am going to carry out a number of tests which all require a very similar method, but with only one value different each time. A simplistic and useless example would be:</p>\n\n<pre><code>class ExampleTestCase(unittest.TestCase):\n\n    def test_1(self):\n        self.assertEqual(self.somevalue, 1)\n\n    def test_2(self):\n        self.assertEqual(self.somevalue, 2)\n\n    def test_3(self):\n        self.assertEqual(self.somevalue, 3)\n\n    def test_4(self):\n        self.assertEqual(self.somevalue, 4)\n</code></pre>\n\n<p>Is there a way to write the above example without repeating all the code each time, but instead writing a generic method, e.g.</p>\n\n<pre><code>    def test_n(self, n):\n        self.assertEqual(self.somevalue, n)\n</code></pre>\n\n<p>and telling unittest to try this test with different inputs?</p>\n"},{"tags":["ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12739389,"title":"How to use Test:Unit on a ruby file without classes (only methods)","body":"<p>I have to write code for an homework and I wish to do TDD from the start.\nThe homework consists of one ruby file with methods in it, no class.</p>\n\n<p>All examples I find on the Internet test against classes.  How could I test the following method?</p>\n\n<p><strong>homework.rb</strong></p>\n\n<pre><code>#!/usr/bin/env ruby\n\ndef count_words(str)\n  # SOME CODE HERE\nend\n</code></pre>\n\n<p>There is an auto-grading system that take one ruby file with the methods defined for the homework as an input.  So, I have to write my tests in a separate file (test_homework.rb) or comment out my test before submitting (which I found counter productive...). </p>\n\n<p>How will I test the count_words method using Test:Unit?</p>\n"},{"tags":["unit-testing","codeigniter","phpunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12739470,"title":"Auto genarate testcases for codeigniter","body":"<p>How to genarate testcases for codeigniter or any other MVC based project using the command <strong>phpunit-skelgen</strong> and I have to create testcases with assertions automatically.</p>\n\n<p>Thank u all.</p>\n"},{"tags":["string","unit-testing","data-structures","index","googletest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12701675,"title":"Unit testing a Text Index","body":"<p>Consider a text index such as a suffix tree or a suffix array supporting <em>Count</em> queries (number of occurrences of a pattern) and <em>Locate</em> queries (the positions of all the occurrences of a pattern). How   would you go about unit testing such a class ?</p>\n\n<p>What I have in mind is to generate a <em>big</em> random string then extract a random substring from this big string and compare the results of both queries with naive implementations (such as string::find). Another idea I have is to find the most frequent substring of length <code>l</code> appearing in the original string (using perhaps a naive method) and use these substrings for testing the index.</p>\n\n<p>This isn't the best way, so what would be a good design of the unit tests for a text index ?</p>\n\n<p>In case it matters, this is in C++ using googletest.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":181,"score":2,"question_id":11991232,"title":"How to unit test WCF ServiceHost.Faulted event","body":"<p>Lets say I have the following classes (removing exception handling, etc):</p>\n\n<pre><code>[ServiceBehavior(InstanceContextMode = ..., ConcurrencyMode = ..., etc)]\npublic class MyService : IMyService  \n{\n    ServiceReferenceMethodsHere....\n}\n\npublic class HostStartup : IHostStartup\n{\n    private ServiceHost _myHost;\n\n    public ServiceHost myHost\n    {\n       get { return _myHost; }\n       set { _myHost= value; }\n    }\n\n    public void StartService(IMyService instance)\n    {\n        _myHost = new ServiceHost(instance);\n    }\n\n    public void StopService()\n    }\n        _myHost.Close();\n    {\n}\n</code></pre>\n\n<p>Now, subscribe to the <code>ServiceHost.Faulted</code> event:</p>\n\n<pre><code>// Note: Interfaces are registered via unity container and dependency injection.\n// Unity bootstrapper class not shown. \npublic class TestHost : ITestHost\n{\n    private IHostStartup _hostStartup;\n    private IMyService _myService\n\n    public TestHost(IHostStartup hostStartup, IMyService myService)\n    {\n        _hostStartup = hostStartup;\n        _myService = myService;\n        hostStartup.StartService(_myService);\n        hostStartup.myHost.Faulted += HandleHostFault;\n    }\n\n    private void HandleHostFault(object sender, EventArgs e)\n    {\n        HandleFaultHere.....\n    }\n}\n</code></pre>\n\n<p>Okay, great, now I have code to handle a <code>ServiceHost.Faulted</code> event. (Of course I have not shown all the other WCF guts that really make my service work...)</p>\n\n<p><strong>My question is</strong>, how to unit test my private HandleHostFault method without cheating and setting it to public (we all want to do that at times).<br>\nIn other words, is it possible to raise <code>ServiceHost.Faulted</code> event in unit testing environment?</p>\n\n<p>I prefer to use NSubstitute for my unit testing.  I have tried the following:</p>\n\n<pre><code>private IHostStartup _hostStartup;\nprivate IMyService _myService;\nprivate TestHost _testHost;\n\npublic void MyTestInitialize()\n{\n    _hostStartup = Substitute.For&lt;IHostStartup&gt;();\n    _myService = Substitute.For&lt;IMyService&gt;();\n    _hostStartup.When(x =&gt; x.StartService(Arg.Any&lt;IMyService&gt;())).Do(x =&gt;\n                 {\n                    _hostStartup.myHost = Substitute.For&lt;ServiceHost&gt;();\n                 });\n    _testHost  = new TestHost(_hostStartup, _myService);\n}\n\npublic void HandleHostFault_InitializeHost_ServiceHostStatusOpen()\n{\n     // Arrange\n\n     // Act\n     hostStartup.myHost.Faulted += Raise.Event();\n\n\n     // Assert\n}\n</code></pre>\n\n<p><code>hostStartup.myHost.Faulted += Raise.Event()</code> does not raise the faulted event. </p>\n\n<p><strong>Any ideas how to raise this servicehost.faulted event?  Is it possible?</strong> </p>\n\n<p>** UPDATE **</p>\n\n<p>I decided not to test ServiceHost communication object directly. I decided it was \"not testable using NSubstitute\". I now handle the ServiceHost.Faulted event from my HostStartup class.</p>\n\n<pre><code>public class HostStartup : IHostStartup\n{\n    public event EventHandler&lt;EventArgs&gt; OnHostFault;\n\n    public ServiceHost MyHost { get; private set; }\n\n    public void StartService(IMyService instance)\n    {\n        MyHost = new ServiceHost(instance);\n        MyHost.Faulted += HandleFault;\n    }\n\n    public void StopService()\n    }\n        _myHost.Close();\n    {\n\n    private void InvokeOnServiceHostFault(EventArgs eventArgs)\n    {\n        EventHandler&lt;EventArgs&gt; handler = OnHostFault;\n        if (handler != null) handler(this, eventArgs);\n    }\n\n    private void HandleFault(object sender, EventArgs eventArgs)\n    {\n        InvokeOnServiceHostFault(eventArgs);\n    }\n}\n\n// Note: Interfaces are registered via unity container and dependency injection.\n// Unity bootstrapper class not shown. \npublic class TestHost : ITestHost\n{\n    private IHostStartup _hostStartup;\n    private IMyService _myService\n\n    public TestHost(IHostStartup hostStartup, IMyService myService)\n    {\n        _hostStartup = hostStartup;\n        _myService = myService;\n        hostStartup.StartService(_myService);\n        hostStartup.OnHostFault += HandleHostFault;\n    }\n\n    private void HandleHostFault(object sender, EventArgs e)\n    {\n        HandleFaultHere.....\n    }\n}\n</code></pre>\n\n<p>and finally the unit test action works great:</p>\n\n<pre><code>public void HandleHostFault_InitializeHost_ServiceHostStatusOpen()\n{\n     // Arrange\n\n     // Act\n     hostStartup.OnHostFault += Raise.Event();  // works great!! :)\n\n\n     // Assert\n}\n</code></pre>\n"},{"tags":["java","android","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12311774,"title":"null point exception when I segregate the code in different files to run the test case using robotium","body":"<p>I am new to Android world and Android automation. I am working on test automation for banking app, where first is login page after login successful there will be transaction page and setting pages. I wrote 3 classes, one for instrumentation with <code>ActivityInstrumentation</code> class which creates the handle of <code>msolo</code>, 2nd is <code>AppTest</code> which is my test class where I will write my test cases, and 3rd is <code>AppUIHelper</code> where I will have my test helper methods.</p>\n\n<p>Below is my error that I am getting.</p>\n\n<pre><code>java.lang.NullPointerException\n    at com.androidApp.Business.AppUILayer.PendingDevice(AppUILayer.java:34)\n    at com.androidApp.Test.AppTest.testPendingDevice(AppTest.java:72)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:204)\n    at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:194)\n    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)\n    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)\n    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:520)\n    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1447)\n</code></pre>\n\n<p>Where am I making a mistake? Please help me solve this issue please.</p>\n\n<p>Below are my class files:</p>\n\n<p><strong>Used for android activity instrumentation: Instrumentation class:</strong>  </p>\n\n<pre><code>public class InstrumentationHandle extends ActitvityInstrumentationTestCase2\n{\n    protected Solo msolo;\n    private static final String TARGET_PACKAGE_ID=\"com.android.mobileandroidapp\";\n    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME=\"com.android.mobileandroidapp.LoginActivity\";\n    private static Class launcherActivityClass;\n    Logger log = new Logger();\n    public AppUILayer appUI = null;\n\n    static {\n\n        try {\n            launcherActivityClass=Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);\n        } catch (ClassNotFoundException e)  {\n            throw new RuntimeException(e);\n        }\n    }\n\n    /// Constructer\n    public InstrumentationHandle() throws ClassNotFoundException {\n        super(TARGET_PACKAGE_ID,launcherActivityClass);\n    }\n\n    protected void setUp() {\n        msolo = new Solo(getInstrumentation(), getActivity());\n    }\n\n    public Solo getSolo() {\n        return msolo;\n    }\n}\n</code></pre>\n\n<p><strong>Second file is: <code>AppTest</code> (where I am thinking to write all the test cases)</strong></p>\n\n<pre><code>public class AppTest extends InstrumentationHandle {\n    public boolean result;\n    public AppUILayer app= new AppUILayer();\n\n    public AppTest() throws ClassNotFoundException {\n        super();\n    }\n\n    protected void setUp() { \n        super.setUp();\n    }\n\n    public void testPendingDevice() throws InterruptedException {\n        String loginID=\"MobileCNP1\";\n        String password=\"CNPMobile1\";\n        result= app.PendingDevice(loginID, password);\n        assertTrue(result);\n    }\n\n    public void tearDown() throws Exception {\n        //solo.finishOpenedActivities();\n    }\n}\n</code></pre>\n\n<p><strong>3rd is the Helper class for test cases: <code>AppUIHelper</code></strong></p>\n\n<pre><code>public class AppUIHelper extends InstrumentationHandle {\n    public AppUILayer() throws ClassNotFoundException {\n    }\n\n    public boolean result= false;\n\n    public boolean PendingDevice(String login, String password) throws InterruptedException {\n        msolo.enterText(0, login); \n        msolo.enterText(1, password);\n        //Click on Login button\n        msolo.clickOnButton(0);\n        Thread.sleep(5000);\n        result=msolo.waitForText(\"The mobile Device has already been registered but is pending approval by the account administrator\");\n        msolo.clickOnButton(\"OK\");\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","cakephp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":12736869,"title":"Checking the HTTP Response status in a CakePHP controller unit test","body":"<p>I want to write a unit test that checks to verify that my CakePHP Controller will return a successful HTTP status code.  The <a href=\"http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers\" rel=\"nofollow\">manual</a> does not make the process for doing this obvious.  How exactly can I test that assertion?</p>\n"},{"tags":["java","unit-testing","integration-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":69,"score":4,"question_id":12735874,"title":"How do I skip a section of code when unittesting in java","body":"<p>I am working on a Java web app with unit/integration tests. App gets deployed to Jetty and uses H2 db while running the integration test phase of maven. I've one oracle function which is called from dao layer which can not be migrated to H2 db, hence i want to mock/skip this part in code while running the test cases. </p>\n\n<p>I thought of having a flag which can tell if i'm running application in test mode and put the condition in code for it, but doesn't look like cleaner approach to me. Please suggest best approach to achieve this.</p>\n"},{"tags":["c#","unit-testing","reflection"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12734724,"title":"Get Assemblies with Attribute in Unit Test Project","body":"<p>Is it possible to get all the referenced assemblies (within a Unit Test project) that have a custom attribute applied. I use the following code withing my application which works successfully:</p>\n\n<pre><code>var assemblies = System.Web.Compilation.BuildManager.GetReferencedAssemblies().Cast&lt;Assembly&gt;().Where(a =&gt; a.GetCustomAttributes(false).OfType&lt;AssemblyCategoryAttribute&gt;().Any()).ToList();\n</code></pre>\n\n<p>However System.Web.Compilation.BuildManager doesn't work in my test project so I tried:</p>\n\n<pre><code>Assembly.GetExecutingAssembly().GetReferencedAssemblies().Select(a =&gt; Assembly.ReflectionOnlyLoad(a.FullName).Where(a =&gt; a.GetCustomAttributes(false).OfType&lt;AssemblyCategoryAttribute&gt;().Any()).ToList();\n</code></pre>\n\n<p>But this threw the error:</p>\n\n<blockquote>\n  <p>It is illegal to reflect on the custom attributes of a Type loaded via\n  ReflectionOnlyGetType (see Assembly.ReflectionOnly) -- use\n  CustomAttributeData instead.</p>\n</blockquote>\n\n<p>I'd appreciate it if someone could show me how to do this. Thanks</p>\n"},{"tags":["c#",".net","unit-testing","nunit","moq"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":102,"score":2,"question_id":12731386,"title":"How to unit test this? Big foreach with lots of db calls","body":"<p>I have to make a program that basically reads x lines from a file and then tries to find it in the db then take some of the info in the file and update the info of the row in the db.</p>\n\n<p>If all else fails insert it as a new row in db. </p>\n\n<p>So basically alot of inserting and updating.</p>\n\n<p>I trying to unit test as I am updating a lot of fields I want to make sure that each piece of info is going to right spot(ie not email address is being set with firstname or something like that).</p>\n\n<p>However I am not sure how to do it as I see this being the program method</p>\n\n<pre><code>// get records from file\n\nforeach record in file\n{\n   db record = find if it is in db\n\n   if(record != null)\n   {\n        if(do another logic check)\n         {\n             // update record\n         }\n         else if(do another logic check)\n         { \n            // update record\n         }\n        else\n        {\n           // do some more logic \n\n            if(do another check)\n             {\n               // update record\n             }\n        }\n   }\n   else\n   {\n      // do some more logic checks and do inserts.\n   }\n}\n</code></pre>\n\n<p>I see this in a void method with maybe some private methods(for say update record part). Now how should I be unit testing this? I want to unit test the first if(do another logic check) and if say some record I send in meets those conditions.</p>\n\n<p>However since those would be private methods I can't unit test them, right now I don't see the the method returning anything since it will go through hundreds of records and I probably will be printing out most of stuff into a error log file or something.</p>\n\n<p>the code I showed you is in a service layer. I would mock out the db method calls with moq.</p>\n\n<p>The application is a console app.</p>\n\n<p>Any suggestions how I could better break this up so I could check the logic?</p>\n"},{"tags":["java","unit-testing","testng"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1397,"score":1,"question_id":3677271,"title":"TestNG: How to test for mandatory exceptions?","body":"<p>I'd like to write a TestNG test to make sure an exception is thrown under a specific condition, and fail the test if the exception is not thrown. Is there an easy way to do this without having to create an extra boolean variable?</p>\n\n<p>A related blog post on this subject: <a href=\"http://konigsberg.blogspot.com/2007/11/testng-and-expectedexceptions-ive.html\" rel=\"nofollow\">http://konigsberg.blogspot.com/2007/11/testng-and-expectedexceptions-ive.html</a></p>\n"},{"tags":["xcode","unit-testing","ios6"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1166,"score":5,"question_id":11688720,"title":"Unit Test target doesn't run on XCode 4.5","body":"<p>I'm on the latest beta version of Xcode (Xcode 4.5 with iOS 6.0). I've got an xcode project for an iphone app and I want to add a Unit Test target on it. I've followed carefully the instructions given on <a href=\"http://developer.apple.com/library/ios/#DOCUMENTATION/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\">this page</a>  but I can't run the tests. Here's the message I read in the console:  </p>\n\n<pre><code>Failed to find SDK: '6.0'  \nerror: failed to attach to process ID 0\n</code></pre>\n\n<p>The target corresponding to the main application runs perfectly well on the iPhone 6.0 simulator though. </p>\n\n<p>Where can I have made a mistake?</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","file-io"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12726472,"title":"Can we do unit testing for the file I/o operations","body":"<p>Can we do unit testing for the file I/o operations in C# using VS2010? Since the unit testing is not efficient to access the data layer, do we need to unit test operation or is there any mock or fake operations to do so</p>\n"},{"tags":["xcode","osx","unit-testing","command-line","breakpoints"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12727385,"title":"Xcode 4, breakpoints not working in unit tests for Mac OS command line tool","body":"<p>I have a simple <em>Mac OS X</em> <strong>Command Line Tool</strong> project in Xcode 4.5. I manually added a unit test target off of the <strong>Cocoa Unit Testing Bundle</strong> template (the Command Line Tool template doesn't have an <em>Include Unit Tests</em> switch). The problem: I can't get the debugger to stop on a breakpoint when running tests (Product > Test).</p>\n\n<p>As I did a google search before asking, these are some things I already tried/checked:</p>\n\n<ul>\n<li>The unit tests do run (they correctly fail on e.g. STFail()).</li>\n<li>The master <em>Breakpoints</em> switch on the top bar is on (turning it off and on doesn't help).</li>\n<li><em>Build Configuration</em> is set to <em>Debug</em> on the test target (debugger is LLDB, changing to GDB doesn't help).</li>\n<li>Debugging in general works. In the main console app target breakpoints are hit just fine so it's just the unit tests that have a problem. Also, I made a test iOS app with unit tests included -- both the app and unit tests break fine.</li>\n<li>The build settings look fine (let me know if there are other I ought to check):\n<ul>\n<li>Generate Debug Symbols = Yes</li>\n<li>Optimization Level = None [-O0] (for Debug)</li>\n</ul></li>\n<li>Setting a symbolic breakpoint (on -[NSException raise] or objc_exception_throw) doesn't help.</li>\n<li>Reloading project or restarting Xcode doesn't help.</li>\n</ul>\n\n<p>What else can I do to hit a breakpoint in my unit tests?</p>\n"},{"tags":["visual-studio-2010","visual-studio","unit-testing","load-testing","data-driven-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12710732,"title":"Visual Studio Load Test to simulate many users in Data Driven fashion?","body":"<p>I'm trying to load test a web service.</p>\n\n<p>I've got a simple method that takes 2 params that get sent to the web service and returns the response, and I created a Unit Test from this method.</p>\n\n<p>Because I <strike>want</strike> <strong>need</strong> to test various different inputs to effectively test the service, I setup a CSV with ~1000 rows as a DataSource for the Unit Test.</p>\n\n<p>I can run this one Unit Test and it will spin through all the rows, sequentially calling the web service with different values. </p>\n\n<p><strong>However</strong>, this is not what I need. I <strong>need</strong> each row to correspond to a different user on a different thread, using the Load Test configuration to include think times, ramp up users with step load, test mix config, etc. </p>\n\n<p>I can achieve this by removing my data source from the unit test and hard-coding values .. <strong><em>but this is a fundamentally flawed test:</em></strong> In order to <em>really</em> test the web service, I need each <strong>user</strong> to be sending different values and getting different results. </p>\n\n<p>...</p>\n\n<p>So, how can I hook a data source to a load test and have that load test start each user's instance of a unit test with different values?</p>\n"},{"tags":["unit-testing","triggers","salesforce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12714959,"title":"Writing a test class on a Trigger in Salesforce","body":"<p>I am a complete code noob and need help writing a test class for a trigger in Salesforce.  Any help would be greatly appreciated.</p>\n\n<p>Here is the trigger:</p>\n\n<pre><code>trigger UpdateWonAccounts on Opportunity(before Update) {\n  Set &lt; Id &gt; accountIds = new Set &lt; Id &gt; ();\n\n  //Collect End user Ids which has won Opportunities\n  for (Opportunity o : Trigger.new) {\n    if (o.isWon &amp;&amp; o.EndUserAccountName__c != null) {\n      accountIds.add(o.EndUserAccountName__c);\n    }\n  }\n\n  List &lt; Account &gt; lstAccount = new List &lt; Account &gt; ();\n\n  //Iterate and collect all the end user records\n  for (Account a : [Select Id, Status__c From Account where Id IN : accountIds]) {\n    lstAccount.add(new Account(Id = a.Id, Status__c = true));\n  }\n\n  //If there are any accounts then update the records\n  if (!lstAccount.isEmpty()) {\n    update lstAccount;\n  }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","unit-testing","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12728491,"title":"Developing Unit Tests around an ORM-based MVC project","body":"<p>I'm a bit lost as to how unit tests could tie in to my current project's design.  My current tests are all integration tests which end up pretty much just testing the third party ORM.  I was thinking I needed to use the Repository pattern but its not clear to me how exactly how to add that as a layer in my application.  Here is a basic object I am working with for an example:</p>\n\n<pre><code>public class Venue : ModelBase&lt;Venue&gt;\n{\n    public Venue ()\n        : base()\n    {\n    }\n\n    public virtual string VenueName { get; set; }\n}\n</code></pre>\n\n<p>And its actions:</p>\n\n<pre><code>    [HttpGet]\n    public ActionResult Create ()\n    {\n        return View();\n    }\n\n    public ActionResult Create ([ModelBinder(typeof(VenueBinder))]Venue Venue)\n    {\n        Venue.Save();\n        return RedirectToAction(\"List\", \"Venue\");\n    }\n\n    [HttpGet]\n    public ActionResult Edit (long id) \n    {\n        return View(Venue.Load(id));    \n    }\n\n    [HttpPost]\n    public ActionResult Edit ([ModelBinder(typeof(VenueBinder))]Venue v, long id)\n    {\n        VenueBinder.EditModel(v, id);\n        return RedirectToAction(\"List\", \"Venue\");\n    }\n\n    public ActionResult Delete (long id)\n    {\n        Venue temp = Venue.Load(id);\n        var eventController = new EventController();\n        foreach (var e in Event.All().ToList().FindAll(x =&gt; x.Venue.ID == id))\n        {\n            eventController.Delete(e.ID);\n        }\n        temp.Delete();\n        return RedirectToAction(\"List\", \"Venue\");\n\n    }       \n</code></pre>\n\n<p>and model binder:</p>\n\n<pre><code>public class VenueBinder : IModelBinder\n{\n    /// &lt;summary&gt;\n    /// bind form data to Venue model\n    /// &lt;/summary&gt;\n    public object BindModel (ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        return new Venue\n        {\n            VenueName = bindingContext.ValueProvider.GetValue(\"name\").AttemptedValue\n        };\n    }\n\n    /// &lt;summary&gt;\n    /// edits an existing Venue object\n    /// &lt;/summary&gt;\n    public static void EditModel (Venue v, long id)\n    {\n        Venue temp = Venue.Load(id);\n        temp.VenueName = v.VenueName;\n        temp.Save();\n    }\n}\n</code></pre>\n"},{"tags":["wordpress","unit-testing","selenium"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":12728563,"title":"Can I get at my application code from inside a Selenium test?","body":"<p>I'm writing unit and integration tests for a WordPress site, using PHPUnit and Selenium. There's a useful WP test library for PHPUnit, used by extending a special WP_UnitTestCase instead of PHPUnit_TestCase.</p>\n\n<p>So far so good. What would be truly useful, though, would be if my Selenium tests could also execute code in the context of WordPress. So for example, I could build and manipulate users, posts etc while testing client-side behaviour, much in the way you can do with a Rails integration test.</p>\n\n<p>Is there any way I can use the features of a WP_UnitTestCase in the context of a Selenium test?</p>\n"},{"tags":["java","unit-testing","servlets","testng","mockrunner"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2666,"score":3,"question_id":2570875,"title":"Servlet unit test","body":"<p>Currently I'm using TestNG framework for testing application business logic, i added some Servlet classes recently.</p>\n\n<p>How do I unit test these Servlet classes in TestNg framework? </p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":12727877,"title":"Path not found at \"Out\\Foldername\\\" on unit test run in VS2010","body":"<p>I am using VS2010 for development and unit testing. one of my module reads some dlls from specific folder (say \".\\Plugin\"). When I run unit test , it fails saying part of path not found \"\\TestResult\\Out\\Plugin\". This is because I dont have \"Plugin\" in out directory. </p>\n\n<p>How do I create \"Plugin\" folder in Out directory on every test run.</p>\n"},{"tags":["java","unit-testing","junit","spring-webflow","spring-webflow-2"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":560,"score":6,"question_id":2945494,"title":"Unit testing nested subflows (subflows of subflows)","body":"<p>I'm trying to write unit test for a flow, which has subflow, which, itself, has another subflow.</p>\n\n<p>I register first flow using\n<code>FlowDefinitionResource getResource(FlowDefinitionResourceFactory resourceFactory)</code>.</p>\n\n<p>Then I register subflow definitions during test execution in <code>FlowDefinitionRegistry</code> before transitioning to them.</p>\n\n<p>Transitioning to \"first level\" subflow goes ok. The result of transitioning to subflow of current subflow - <code>NoSuchFlowDefinitionException</code>.</p>\n\n<p>The problem is that subflow definitions are all seem attached to the primary flow of the test and subflow can't be found within another subflow.</p>\n\n<p>Is there any way to attach subflow definition to another subflow in tests, which extend <code>AbstractXmlFlowExecutionTests</code>?</p>\n"},{"tags":["java","unit-testing","tdd","mvp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12719650,"title":"MVP, testing, and private methods","body":"<p>I've switched to an MVP architecture and am trying to test it.  I have some question on how to structure my Presenter.</p>\n\n<pre><code>public class Presenter\n{\n    public void onResume()\n    {\n        doA();\n        doB();\n        doC();\n    }\n\n    protected void doA() {};\n    protected void doB() {};\n    protected void doC() {};\n}\n\npublic class MyScreen implements MyScreenView\n{\n    private Presenter presenter;\n\n    public MyScreen()\n    {\n        presenter = new Presenter(this);\n    }\n\n    public OnResume()\n    {\n        presenter.OnResume();\n    }\n}\n</code></pre>\n\n<p>In the above code, when the view is resumed, the view simply calls the presenter OnResume().  The presenter internally calls 3 methods, doA(), doB(), and doC() to do whatever it has to do.</p>\n\n<p>Alternatively, I can just call doA(), doB() and doC() in the view directly like so:</p>\n\n<pre><code>public class Presenter\n{\n    public void doA() {};\n    public void doB() {};\n    public void doC() {};\n}\n\npublic class MyScreen implements MyScreenView\n{\n    private Presenter presenter;\n\n    public MyScreen()\n    {\n        presenter = new Presenter(this);\n    }\n\n    public OnResume()\n    {\n        presenter.doA();\n        presenter.doB();\n        presenter.doC();\n    }\n}\n</code></pre>\n\n<p>My question is, its easier for me to test the second solution, since the presenter is cleanly broken up into 3 seperate public methods of individual responsibility, I can write tests for doA, doB and doC individually instead of one monolithic test for the presenter.onResume() method of solution 1.</p>\n\n<p>In the first solution, I have to write tests for onResume(), which has a combined responsibility of calling these 3 methods.  This means its harder to test, as its much easier to test smaller functions of individual responsibility than fucntions that call other private functions.  However, the second solution doesn't feel like a good MVP in my belief, since it seems to know what the presenter is doing and is just not letting the presenter do what it should do in the onResume() method of the first solution.</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12700415,"title":"NullReferenceException when calling UrlHelper.Content(string) in a unit test","body":"<p>I have a few <code>UrlHelper</code> extension methods that I'd like to unit test.  However, I'm getting a <code>NullReferenceException</code> from the <code>UrlHelper.Content(string)</code> method when the path begins with \"~/\".  Anyone know what the issue is?</p>\n\n<pre><code>[Test]\npublic void DummyTest()\n{\n    var context = new Mock&lt;HttpContextBase&gt;();\n    RequestContext requestContext = new RequestContext(context.Object, new RouteData());\n    UrlHelper urlHelper = new UrlHelper(requestContext);\n\n    string path = urlHelper.Content(\"~/test.png\");\n\n    Assert.IsNotNullOrEmpty(path);\n}\n</code></pre>\n"},{"tags":["unit-testing","grails","classpath"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12500389,"title":"Can I configure Grails to see test classes in my plugin?","body":"<p>I have a large grails project split into several 'in place' plugins to keep things nice and modular.  One of my plugins, called 'core services', contains all my domain classes, and also some nice set up work in an abstract test class (adding mock domain instances, etc) that is shared by a number of unit tests.</p>\n\n<p>This is all great for unit tests that also live in the plugin, but I'd like to use that abstract test class to set up mock data in other grails projects' tests that uses that plugin.  It doesn't seem that plugins' test classes are included on the classpath when running tests.  Is there a way I can tell Grails to include them?:</p>\n\n<pre><code>//this abstract test class is in the core service plugin's test directory.  My IDE has no problem with this import\nimport com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest \n\n//this test class is in the project that uses the plugin\nclass ClaimGiftControllerTests extends AbstractGiftInstanceRelatedUnitTest { \n\n.. my tests\n}\n</code></pre>\n\n<p>And the output (non important parts removed):</p>\n\n<pre><code>| Error Compilation error compiling [unit] tests: startup failed:\n...../test/unit/com/myproject/ClaimGiftControllerTests.groovy: 3: unable to resolve class com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest\n @ line 3, column 1.\n   import com.myproject.coreservices.service.AbstractGiftInstanceRelatedUnitTest\n   ^\n</code></pre>\n"},{"tags":["unit-testing","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":38,"score":-2,"question_id":12708153,"title":"How to run Nunit test?","body":"<p>Can any one please tell me what is the result in Nunit Test?\nWhether it will produce pass or fail (with error message) or it will give in which point it will produce the error and more details?\nCan we store the error results in an XML file?</p>\n"},{"tags":["python","unit-testing","py.test"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12582503,"title":"Test gathering/identification failure.","body":"<p>Using py.test, two test called the same in different directory causes py.test to fail. Why is that?  How can I change this without renaming all the tests? </p>\n\n<p>To duplicate do:</p>\n\n<pre><code>; cd /var/tmp/my_test_module\n; mkdir -p ook/test           \n; mkdir -p eek/test\n; touch ook/test/test_proxy.py\n; touch eek/test/test_proxy.py\n; py.test\n============================= test session starts ==============================\nplatform linux2 -- Python 2.7.3 -- pytest-2.2.4\ncollected 0 items / 1 errors \n\n==================================== ERRORS ====================================\n___________________ ERROR collecting ook/test/test_proxy.py ____________________\nimport file mismatch:\nimported module 'test_proxy' has this __file__ attribute:\n  /home/ygolanski/code/junk/python/mymodule/eek/test/test_proxy.py\nwhich is not the same as the test file we want to collect:\n  /home/ygolanski/code/junk/python/mymodule/ook/test/test_proxy.py\nHINT: remove __pycache__ / .pyc files and/or use a unique basename for your test file modules\n=========================== 1 error in 0.01 seconds ============================\n</code></pre>\n"},{"tags":["c++","unit-testing","function-pointers","googletest","member-function-pointers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12723163,"title":"C++ GoogleTest using fixture - function pointer definition not accessible","body":"<p>I implemented a googletest, with fixture class <code>UnitTest_solver</code>. Implementation for the fixture is the following. It contains helper functions </p>\n\n<pre><code>class UnitTest_solver : public ::testing::Test\n{\n\nprotected:\n\n    static void SetUpTestCase()\n    {\n        // setup table with data\n        m_col = 2; \n        m_row = 100;\n        //  other things to initialize m_test_data \n    }\n\n\n\n    static void TearDownTestCase()\n    {\n        for(int i = 0 ; i &lt; m_row ; i++)\n            delete[] m_test_data[i];\n        delete[] m_test_data;\n    }\n\n\n\n    static double chi_sqr(double* x)\n    {\n        if(m_col &lt; 2)\n            return 0;\n\n        double fx = 0;\n\n        double * row_i = new double[m_col - 1];\n\n        for(int i = 0 ; i &lt; m_row ; i++)\n        {\n            for(int j = 0 ; j &lt; m_col - 1 ; j++)\n                row_i[j] = m_test_data[i][j];\n\n            fx += pow(m_test_data[i][0] - func_1(x, row_i, m_col - 1), 2.0); \n        }\n    return fx;\n    }\n\n\n    static double func_1(double* x, double* dbl, int nb_param)\n    {\n        if(nb_param != 2)\n            return 0;\n\n        return x[0] * exp(-1 * x[1] * dbl[0]);\n    }\n\n    static double UnitTest_solver::functPtr( double * parameters, void * userinfo)\n    {\n        return  chi_sqr(parameters);\n    }\n\n    static ofstream thing;\n    static double** m_test_data;\n    static int m_col, m_row;\n\n };\n</code></pre>\n\n<p>Also, out of the fixture scope, i initialize static variables. Last is function pointer. is definition syntax ok ?</p>\n\n<pre><code>double** UnitTest_solver::m_test_data = 0;\nint UnitTest_solver::m_col = 0;\nint UnitTest_solver::m_row = 0;\n\ndouble (UnitTest_solver::*functPtr)(double * , void *) = 0;\n</code></pre>\n\n<p>then, i have a test case, with link to fixture UnitTest_solver. </p>\n\n<pre><code>TEST_F(UnitTest_solver, testFunc1)\n{\n    Solver* solversqp = new Solver();\n    solversqp-&gt;set_pointer_to_function(UnitTest_solver::functPtr, (void*)0);\n    //...\n}\n</code></pre>\n\n<p>second line show compile time error with <code>UnitTest_solver::functPtr</code> : when mouse is over the error, info is 'function defined at line xxx is unacessible', with xxx pointing to <code>functPtr</code> definition inside the fixture.</p>\n\n<p>If i run the ggltest commenting the last line, <code>solversqp-&gt;set_pointer_to_function(UnitTest_solver::functPtr, (void*)0);</code>, test is finishing (if i put a trivial ASSERT, it is successful).</p>\n\n<p>Whats wrong with my function pointer definition.</p>\n"},{"tags":["java","unit-testing","clover"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12723451,"title":"clover: how does it work?","body":"<p>I am evaluating clover currently and wonder how to use it best. First I'd like to understand how it works conceptually.</p>\n\n<p>1) What does instrumentation mean? Are the test-calls attached to implementation's statements? </p>\n\n<p>2) How is this done? Are the tests actually executed with some fancy execution context (similar to JRebel e.g.) for this? Or is it more like static analysis ?</p>\n\n<p>3) After a \"clover-run\", some DB is saved to disk, and based on this, reports are generated right? Is the DB-Format accessible? I mean Can I launch my own analysis on it, e.g. using my own reporting tools ? What information does the DB contain exactly? Can I see the mapping between test and implementation there ?</p>\n\n<p>4) Are there other tools that find the mapping between test and implementation? Not just the numbers, but which test, actually covers a line of code ...</p>\n\n<p>Thanks, Bastl.</p>\n"},{"tags":["c++","eclipse","unit-testing","googletest","cunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":12719186,"title":"Setting Up Google Test to Run through C/C++ Test Runner Plug-In in Eclipse on Ubuntu 12.04","body":"<p>Here's what I've tried:</p>\n\n<p>In project properties I have included libgtest_main.a and libgtest.a under the libaries tab.</p>\n\n<p>In run configurations under the C++ Unit tab, I have set C/C++ testing to Google Tests Runner.</p>\n\n<p>In run configs, under the main tab, the C/C++ application is set as the binary file that was created during the build of my project. </p>\n\n<p>I have created a test folder as part of my project and written my tests in there.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include \"../src/agent.h\"\n#include \"../src/agent.cpp\"\n#include \"gtest/gtest.h\"\n\nTEST(AgentTest, voidConstructorWorksProperly) {\nAgent testAgent = Agent();\nASSERT_EQ(0, testAgent.getBrain());\n}\n\n\nint main(int argc, char **argv) {\n    testing::InitGoogleTest(&amp;argc, argv);\n    return RUN_ALL_TESTS();\n\n}\n</code></pre>\n\n<p>I'm getting a syntax error on on the TEST function and a \"could not be resolved\" on the InitGoogleTest and RUN_ALL_TESTS.</p>\n\n<p>Hope someone can help - I've been at this for hours and it seems like something simple I've missed.</p>\n"},{"tags":["iphone","objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12718057,"title":"Can't test my class in basic Unit Test setup","body":"<p>I've successfully added a normal Unit Testing Bundle to my project, <a href=\"https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html\" rel=\"nofollow\">following these instructions</a>. I can build and run my test target and the one sample test works fine.</p>\n\n<p>Things start to go downhill when I try to test a specific class.</p>\n\n<p>In my App, many of my .h files are included in the .pch file. Also, MyModel interacts with other classes. Because of this, when I import MyModel.h and use it in my test, I get a bunch of errors pertaining to the fact that other files couldn't be loaded. My workaround to this is to simply add the same files in my test target's .pch file and also add those files to the test target's \"compile sources\" list.</p>\n\n<p>So I add those classes to the test target and to the .pch, try to run, and I just end up in an endless loop, always needing to require more files. When I finally add every .m to my project, running the tests still fails spectacularly.</p>\n\n<p>Any idea how I need to set up my project correctly so that I can just simply <code>#import \"MyModel.h\"</code> into my test file and write/run my tests? Is it possible that my project is configured in a way that will make testing impossible?</p>\n\n<p><strong>Update 1</strong>\nFollowed Carl's suggestions but can't get past step 2. I get:</p>\n\n<pre><code>Undefined symbols for architecture i386:\n  \"_OBJC_CLASS_$_MyModel\", referenced from:\n      objc-class-ref in BaseUnitTests.o\nld: symbol(s) not found for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>It's at this point where I would then add MyModel.m to \"Build Phases/Compile Sources\" and go down the endless path of adding every other .m file to the test target's \"Compile Sources\".</p>\n"},{"tags":["unit-testing","visual-studio-2010","asp.net-mvc-2","vsts2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1638,"score":1,"question_id":3908368,"title":"Cannot find any coverage data (ASP.NET MVC2)","body":"<p>I am having some issues with getting Code Coverage working with an out-of-the-box ASP.NET MVC2 Web App</p>\n\n<p>VS2010 Ultimate, File > New Project > ASP.NET MVC 2 Web Application > Yes, Create unit test project with Visual Studio Unit Test.  I then Rebuild All, Run All Unit Tests, Go to Code Coverage and get the following message:</p>\n\n<blockquote>\n  <p>Cannot find any coverage data (.coverage or .coveragexml) files.  Check test run details for possible errors.</p>\n</blockquote>\n\n<p>All the unit tests passed.  (And I haven't touched a line of code yet)</p>\n\n<p>I did find the following on the web:<br>\n<a href=\"http://www.vbforums.com/showthread.php?t=615377\" rel=\"nofollow\">http://www.vbforums.com/showthread.php?t=615377</a><br>\nwhich says to do the following:</p>\n\n<blockquote>\n  <p>Test -> Edit Test Settings -> Local<br>\n  In the test settings dialog, click\n  \"Data and Diagnostics\"   Ensure \"Code\n  Coverage\" are checked, and\n  double-click on it Check of the dll's\n  you want code coverage enabled for.</p>\n</blockquote>\n\n<p>But, when I go to Test > Edit Test Seetings, all I see is the grayed out menu item stating \"No Test Settings Available\".</p>\n\n<p>Any ideas?</p>\n\n<p>Edit: slowly gaining traction. See: <a href=\"http://stackoverflow.com/questions/1155743/how-to-create-the-vsmdi-testrunconfig-file-when-importing-a-visual-studio-test-pr\">How to create the vsmdi/testrunconfig file when importing a Visual Studio test project?</a></p>\n"},{"tags":["iphone","ios","unit-testing"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":100,"score":4,"question_id":12714980,"title":"When to use unit tests?","body":"<p>I understand how to implement unit tests, I'm just struggling figure out when to use them.</p>\n\n<p>Let's say I have a basic Reminders App. A user can add/edit/delete reminders and view them in a tableview. What parts of the app would I want to set up unit tests for?</p>\n"},{"tags":["unit-testing","visual-studio-2008"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12715343,"title":"Visual Studio 2008 Unit Test failing on static function call of external dll","body":"<p>I am new to unit testing in visual studio 2008. I am using the integrated test project method for my unit tests. I have a class I am trying to run unit tests against, but when I debug the unit test and step into the function call of that class, I get an \"Object reference not set to the instance of an object\" when I hit the line of code that calls a static method from an externally referenced library. </p>\n\n<p>I have references to that same library in my unit test project. I dont understand what else I need to configure so that the static method of that library does not throw this exception. </p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["unit-testing","node.js","mongoose","winston"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":12715392,"title":"How to log errors in mongoose, but unit testable?","body":"<p>I would like to log errors in my data access layer which uses mongoose. </p>\n\n<p>How do I make it easy to unit test? What is the best way to integrate <strong>mongoose</strong>(data access + middleware) with <strong>winston</strong>(logger). </p>\n\n<p>Thank you,</p>\n\n<p>Pavel</p>\n"},{"tags":["unit-testing","class","for-loop","salesforce"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12713407,"title":"How do you properly test for loop queries within test classes?","body":"<p>I have a Schedulable class which will get called once per night.  I have run the code anonymously and everything works as it should.  The problem I am having is that I cannot get proper test coverage on it!  I have written a test class that I believe should work, but for some reason any lines within my for-loops are not being covered.</p>\n\n<p>I assume that it is because no data is being returned from these queries, however there are thousands of records that should be returned.  I have run the queries on the production environment without any issues.</p>\n\n<p>Is there a separate process for running queries in a schedulable class?</p>\n\n<p><strong>Here's part of my class:</strong></p>\n\n<pre><code>global class UpdateUnitPrice  implements Schedulable{\n\n    global void execute(SchedulableContext sc){\n\n        // OwnerId -&gt; List of Strings with Row Contents\n        Map&lt;Id,Map&lt;Id,Map&lt;String,String&gt;&gt;&gt; updateContainer = new Map&lt;Id,Map&lt;Id,Map&lt;String,String&gt;&gt;&gt;{};  // Covered\n\n        List&lt;Id&gt; ownerContainer = new List&lt;Id&gt;{};  // Covered\n\n        String EmailMessage;     // Covered\n        String EmailLine;        // Covered\n        String EmailAddedLines;  // Covered\n\n        String CurrentEmailLine; // Covered\n        String NewEmailLine;     // Covered\n\n        List&lt;Id&gt; opportunityList = new List&lt;Id&gt;{};  // Covered\n\n        for(Opportunity thisOpp :[SELECT Id,Name FROM Opportunity WHERE Order_Proposed__c = null])\n        {\n            // Thousands of records should be returned\n\n            opportunityList.add(thisOpp.Id); // NOT COVERED!!\n\n        }\n\n        List&lt;OpportunityLineItem&gt; OppLineItemList = new List&lt;OpportunityLineItem&gt;{};  // Covered\n\n        for(OpportunityLineItem thisOppProd : [SELECT Id,OpportunityId,Opportunity.OwnerId,Opportunity.Name,Product_Name__c,UnitPrice,ListPrice \n                                               FROM OpportunityLineItem \n                                               WHERE OpportunityId IN :opportunityList\n                                               AND UnitPrice_lt_ListPrice__c = 'True'\n                                               ORDER BY OpportunityId ASC])\n        {\n\n            . . . // NO LINES COVERED WITHIN THIS LOOP\n\n        }\n\n\n      . . .\n\n    }\n\n}\n</code></pre>\n\n<p><strong>Here's my test class:</strong></p>\n\n<pre><code>@isTest\nprivate class UpdateUnitPriceTest {\n\n    static testMethod void myUnitTest() {\n\n        Test.startTest();\n\n        // Schedule the test job \n        String jobId = System.schedule('UpdateUnitPrice','0 0 0 3 9 ? 2022',new UpdateUnitPrice());\n\n        // Get the information from the CronTrigger API object\n        CronTrigger ct = [SELECT Id, CronExpression, TimesTriggered, NextFireTime FROM CronTrigger WHERE id = :jobId];\n\n        // Verify the expressions are the same\n        System.assertEquals(ct.CronExpression,'0 0 0 3 9 ? 2022');\n\n        // Verify the job has not run\n        System.assertEquals(0, ct.TimesTriggered);\n\n        // Verify the next time the job will run\n        System.assertEquals('2022-09-03 00:00:00', String.valueOf(ct.NextFireTime));\n\n        Test.stopTest();\n\n    }\n}\n</code></pre>\n\n<p>Am I supposed to specifically reference something within these for-loops for them to fire?  This Class should be able to just run everything on it's own without inserting records for testing.  What am I missing?</p>\n\n<p>Thanks in advance for any help given!</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12707609,"title":"How to match null passed to parameter of Class<T> with Mockito","body":"<p>I have methods like these: </p>\n\n<pre><code>public &lt;T&gt; method(String s, Class&lt;T&gt; t) {...}\n</code></pre>\n\n<p>That I need to check that <code>null</code> is passed to the second argument when using matchers for the other parameters, I have been doing this : </p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nverify(client).method(eq(\"String\"), any(Class.class));\n</code></pre>\n\n<p>But is there a better way (without suppress warnings) ? <code>T</code> represents the return type of some other method, which is sometimes <code>void</code> and in these cases <code>null</code> is passed in.</p>\n"},{"tags":["unit-testing","testing","tdd","sencha-touch-2"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":188,"score":3,"question_id":11411500,"title":"Testing Sencha touch 2 apps","body":"<p>I'm looking for best practices to test Sencha Touch 2 apps. ideally, i would like to automate the execution of test sets (Via CI for example).</p>\n\n<p>I've Looked for test frameworks like Jasmine, JSTestdriver. There is not a lot of feedback about using those frameworks with ST2.</p>\n\n<p>Any ideas ?</p>\n"},{"tags":["unit-testing","testing","automated-tests"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12711715,"title":"Test Optimization","body":"<p>We've just inherited a new codebase which has a bunch of automated tests. We've been 'going with the flow' and running them before each merge and deployment. Some of our staff have even been adding to the collection of tests when they write new functionality.</p>\n\n<p>I've been trying my best to convince the team that we need to drop these things like a hot potatoe but there is a lot of internal bickering about it.</p>\n\n<p>As I see it, the problem is as follows - these tests take a very long time to run (up to 10 minutes on one developer's older machine!). They keep breaking - I don't know about you but I hate it when my software breaks. If we just got rid of all this buggy code, we would reduce the number of bugs by a factor of 10 at the least. The developers who have been writing new ones are taking at least twice as long to do anything as the others. This is ridiculous, we are already working with tight deadlines and now progress is slowing down even further, for this project, at least. I was looking at one of the commits made by one of these devs and the feature was just over 100 LOC, the tests were close to 250 LOC!</p>\n\n<p>My question is how can we strip out all of this buggy, unmaintanable code which breaks every five minutes (I don't just want to do a search and replace in case actual features start breaking as a result of it) and convince our developers to stop wasting time?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12713623,"title":"How would I reference a viewModel in a unit test?","body":"<p>I have the following action:</p>\n\n<pre><code>public ViewResult Index()\n{\n    var model = new MyIndexViewModel { TotalTips = (decimal)7.51 };\n    return View(model);\n}\n</code></pre>\n\n<p>I would like to write a unit test that verifies that model.TotalTips is 7.51.</p>\n\n<p>I am trying something like this:</p>\n\n<pre><code>[TestMethod]\npublic void Test()\n{\n    // Arrange\n    var controller = new MyController(_mockRepository.Object);\n    MyIndexViewModel test = new MyIndexViewModel{TotalTips = (decimal)7.51};\n\n    // Action\n    ViewResult result = controller.Index();\n\n    // Assert\n    Assert.AreEqual(result.ViewData.Model.TotalTips, test.TotalTips); // Problem line\n}\n</code></pre>\n\n<p>But I cannot resolve <code>TotalTips</code> on <code>result.ViewData.Model.TotalTips</code>.  </p>\n\n<p>I know this is wrong, but cannot figure out how to properly resolve the model I am posting to the Index view.</p>\n"},{"tags":["ruby-on-rails","unit-testing","validation","mocking","ruby-on-rails-3.2"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":11796683,"title":"Temporarily setting system time with Ruby for unit testing","body":"<p>I've created a custom validation on a Apt model that verifies that an appointment can't be booked for the next day if the form submission is done after 3 PM and I'm trying to determine the best way to run the unit tests to verify that my custom validation is working correctly.</p>\n\n<p>Currently, my test contains an if statement to to check if the test is run before or after 3 PM and uses a different test based on the current system time. However, I'd like to be able to test both cases no matter what the system time is.</p>\n\n<pre><code>test \"booking appointment for tomorrow before/after three pm\" do\n  a = appointments(:aptone)\n\n  # Set appointment date to tomorrow\n  a.apt_date = DateTime.current + 1.day\n\n  if (Time.current.hour &gt;= 12)\n    assert(a.invalid?, 'Appointment CANNOT be booked after 3 PM')\n  elsif\n    assert(a.valid?, 'Appointment CAN be booked before 3 PM')\n  end\nend\n</code></pre>\n\n<p>I'm wondering if there is a way to temporarily set the system time while running the test so that I can test both assertions regardless of when the tests are ran.</p>\n"},{"tags":["c#","visual-studio-2010","visual-studio","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12708943,"title":"How tear down integration tests","body":"<p>I want to do some integration tests on my project. Now I am looking for a mechanism that allow me execute some code before all tests begin and execute some code after all tests ends.</p>\n\n<p>Note that I can have set up methods and tear down method for each tests but I need the same functionality for all tests as a whole.</p>\n\n<p>Note that I using Visual Studio, C# and NUnit.</p>\n"},{"tags":["objective-c","unit-testing","ocunit"],"answer_count":3,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":2233,"score":3,"question_id":6190486,"title":"SenTestingKit in Xcode 4: Asynchronous testing?","body":"<p>I have been searching for a way to use SenTestingKit to do some integration testing between my client-side code and our server. I haven't had any luck. It seems that once the code is run in a method, the object gets destroyed. This means that any asynchronous responses never call the selectors.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li>Is there a way to keep the object instantiated until such time as I see fit to destroy it - ie. after the tests have completed?</li>\n<li>If not, how could I create a class that blocks (ie. acts synchronously) until the tests are completed?</li>\n</ol>\n\n<p>FYI, I'm running a test server where I know the expected results.</p>\n\n<p>I've done a fair bit of Googling but haven't seen proof one way or another about this. I'm sure others would be interested as well.</p>\n"},{"tags":["c++","unit-testing","testing","fixtures","googletest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12709353,"title":"C++ ggltest - static helper function defined in fixture is unknown in TEST_F","body":"<p>I have implemented a test class, using a fixture. In fixture, i define several static member functions. </p>\n\n<p>in the body of one TEST_F, i would like to call these static functions. however, at compile time these functions are not bound to scope of TEST_F. i dont know why and cannot find relative ggltest doc. </p>\n\n<p>is these any possibility to define functions inside the fixture? how should i do if not? </p>\n\n<p>i paste here the whole code for my ggltest class. </p>\n\n<pre><code>#include \"solver.h\"\n\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nclass UnitTest_solver : public ::testing::Test\n{\nprotected:\n\n    static void SetUpTestCase()\n    {\n        // setup table with data\n        m_col = 2; \n        m_test_data = new double*[m_row];\n        for(int i = 0 ; i &lt; m_col ; i++)\n            m_test_data[i] = new double[m_row];\n\n        ifstream data_x;\n        data_x.open(\"exponential2X.txt\");\n\n        // etc... : i setup table m_test_data in a few more lines\n}\n\n\n\nstatic void TearDownTestCase()\n{\n    for(int i = 0 ; i &lt; m_row ; i++)\n        delete[] m_test_data[i];\n    delete[] m_test_data;\n}\n\n\n\n double chi_sqr(double* x, double(*func)(double*, double*, int))\n {\n    if(ncol &lt; 2)\n        return;\n\n    double fx = 0;\n\n    double * row_i = new double[ncol - 1];\n\n    for(int i = 0 ; i &lt; nrow ; i++)\n    {\n        for(int j = 0 ; j &lt; ncol - 1 ; j++)\n            row_i[j] = data[i][j];\n\n        fx += pow(data[i][0] - (*func)(x, row_i, ncol - 1), 2.0); \n    }\n\n    return fx;\n }\n\n\n double func_1(double* x, double* dbl, int nb_param)\n {\n    if(nb_param != 2)\n         return 0;\n\n    return x[0] * exp(-1 * x[1] * dbl[0]);\n }\n\n\n double warpPt2apply_func(double * parameters, int ncol, void * userinfo, int nb_p)\n {\n      return  chi_sqr(parameters, (ncol - 1), (*func_1));\n }\n\n  static double** m_test_data;\n  static int m_col, m_row;\n\n};\n\n\nTEST_F(UnitTest_solver, testFunc1)\n{\n    Solver* solver = new Solver();\n    solver-&gt;set_pointer(warpPt2apply_func, (void*)NULL);\n}\n</code></pre>\n\n<p>i have a fixture, with three 'helper functions' : <code>chi_sqr(...)</code>, <code>func_1(...)</code>, <code>warpPt2apply_func</code></p>\n\n<p>i could define these functions outside the scope of the ficture. however, then, i cannot access ficture members (or can i?). then, i struggle with signatures handling.</p>\n\n<p>preferably, i would like to keep helper functions in the fixture. is that possible?</p>\n\n<p>thanks!</p>\n\n<p>EDIT</p>\n\n<p>more precisely: in <code>solver-&gt;set_pointer(warpPt2apply_func, (void*)NULL);</code>, <code>warpPt2apply_func</code> is undefined identifier.</p>\n\n<p>Any clue? </p>\n\n<p>i find my example close to example: <a href=\"http://code.google.com/p/googletest/source/browse/trunk/samples/sample3_unittest.cc\" rel=\"nofollow\">http://code.google.com/p/googletest/source/browse/trunk/samples/sample3_unittest.cc</a></p>\n\n<p>but it seems to me that it stick to this example...</p>\n"},{"tags":["c#","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12709441,"title":"TestContext in Unit Testing","body":"<p>I generated the unit test for my project using MS Visual Studio. I need a clear explanation for using TestContext class. Some of the links I found are:</p>\n\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/ms404699%28v=vs.80%29.aspx\" rel=\"nofollow\">Using the TestContext Class</a></li>\n<li><a href=\"http://blogs.msdn.com/b/vstsqualitytools/archive/2006/01/10/511030.aspx\" rel=\"nofollow\">Using TestContext in Unit Tests</a></li>\n</ul>\n\n<p>But I didn't find examples that are clear for me.\nWhere can I find a clear material about this class?</p>\n"},{"tags":["c#","java","unit-testing","junit","nunit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12706525,"title":"How to unit test methods that use threads?","body":"<p>How to write unit tests for methods that use threads.</p>\n\n<p>In example below how to test someMethod method ?</p>\n\n<pre><code>    public class SomeClass {\n\n    private final SomeOtherClass someOtherClassInstance = IoC.getInstance(SomeOtherClass.class);\n\n    private final ExecutorService executorService = Executors.newCachedThreadPool();\n\n    public void someMethod() {\n        executorService.execute(new Runnable() {\n            @Override\n            public void run() {\n                someOtherClassInstance.someOtherMethod();\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Are there any solutions in java and .net for this purpose?</p>\n"},{"tags":["unit-testing","refactoring","nunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12639624,"title":"How to unit test public methods that use same private methods?","body":"<p>I need some guidance with my software testing.</p>\n\n<p>I'm over-complicating things, but I'm too fixated to see what I'm doing wrong, or an alternate way of doing things.</p>\n\n<p>I have several public methods that are using the same private method.</p>\n\n<p>The private method itself:</p>\n\n<ul>\n<li>has to handle many scenarios for its specific role</li>\n<li>works closely with fields/properties/methods in the same instance</li>\n</ul>\n\n<p>Say that the private method needs 5 tests to cover all scenarios, and is used by 6 public methods.</p>\n\n<p><strong>Question</strong></p>\n\n<ul>\n<li><p><em>Do I then need at least <code>5x6</code> tests?</em></p></li>\n<li><p><em>How can I re-use the private method's tests for each public method?</em></p></li>\n<li><p><em>Are there any examples/articles out there on refactoring repeated tests?</em></p></li>\n</ul>\n\n<p><strong>Example</strong></p>\n\n<p><em>OnStartup()</em></p>\n\n<pre><code>- if_file_exists_load_entries           ()\n- if_file_missing_load_last             ()\n- if_no_files_create_new_entries        ()\n- if_exception_clear_entries_and_log    ()\n- loaded_entries_init_called            ()\n- Other tests\n</code></pre>\n\n<p><em>OnUserLoadCustom()</em></p>\n\n<pre><code>- if_file_exists_load_entries           _AND_STORE_AS_LAST()\n- if_file_missing_load_last             _AND_STORE_AS_LAST_AND_WARNING_MESSAGE()\n- if_no_files_create_new_entries        _AND_WARNING_MESSAGE()\n- if_exception_clear_entries_and_log    _AND_ERROR_MESSAGE()\n- loaded_entries_init_called            _AND_SUCCESS_MESSAGE()\n- Other tests\n</code></pre>\n\n<p><em>OnRecover()</em></p>\n\n<pre><code>- if_file_exists_load_entries           _AND_INFO_MESSAGE()\n- if_file_missing_load_last             _AND_INFO_MESSAGE()\n- if_no_files_create_new_entries        _AND_INFO_MESSAGE()\n- if_exception_clear_entries_and_log    _AND_ERROR_MESSAGE_AND_SHUTDOWN()\n- loaded_entries_init_called            _AND_SUCCESS_MESSAGE()\n- Other tests\n</code></pre>\n\n<p>I'm considering encapsulating the private method using the Strategy pattern, so I can test it (and the public methods) in isolation.</p>\n\n<p>However, I don't feel right using one because:</p>\n\n<ul>\n<li>I do not intend to have interchangeable behaviours at runtime</li>\n<li>Using the pattern for the sake of easier testing seems wrong</li>\n</ul>\n\n<p><strong>Update #1</strong></p>\n\n<p>My question pertains to testing the public interface for the private method's behaviour. But I end up with lots of duplicate test methods (see my examples above). </p>\n\n<p>With a strategy pattern, I reckon all I need are:</p>\n\n<ul>\n<li>Test all the paths in the strategy (essentially, testing the private\nmethod) </li>\n<li>Verify that all public methods invokes the strategy (Can easily use a mock object here, and verify that it's been called)</li>\n</ul>\n\n<p>But like I mentioned, I don't think I should introduce a pattern just for the sake of easier testing. I'm holding off on this approach unless I really have to.</p>\n\n<p><hr>\n<strong>Update #2</strong></p>\n\n<p>First attempt at reducing duplication:</p>\n\n<ul>\n<li><p>Private method tests grouped into its own class (Behaviour1Test)</p>\n\n<ul>\n<li>GetTestCases() returns list of test cases related to this behaviour</li>\n</ul></li>\n<li><p>All public methods that needs this test implements interface that exposes</p>\n\n<ul>\n<li>Arrange()</li>\n<li>Act()</li>\n<li>Assert()</li>\n</ul></li>\n</ul>\n\n<p>For example:</p>\n\n<pre><code>// Public method tests\n[TestFixture]\npublic class PublicMethodTests: IBehaviour1Test\n{\n    // Behaviour 1\n    Behaviour1Test _behaviour1;\n    IEnumerable&lt;TestCaseData&gt; Behaviour1TestCases{ get { return _behaviour1.GetTestCases(); } }\n    [Test]\n    [TestCaseSource(\"Behaviour1TestCases\")]\n    public void RunBehaviour1Test(Action&lt;IBehaviour1Test&gt; runTestCase)\n    {\n        runTestCase(this);\n    }\n\n    // ==============================\n    // Behaviour 1 Arrange/act/assert\n    void IBehaviour1Test.Arrange(){}\n    void IBehaviour1Test.Assert(object result){}\n    object IBehaviour1Test.Act()\n    {\n        return _model.PublicMethod();        \n    }\n\n    // Other tests\n}\n\n// Implement this in order to run Behaviour1 test cases\ninterface IBehaviour1Test\n{\n    void Arrange(); \n    object Act();\n    void Assert(object retValue);\n}\n\n// Collection of tests for behaviour 1\npublic class Behaviour1Test\n{\n    // Generate test cases\n    IEnumerable&lt;TestCaseData&gt;() GetTestCases()\n    {\n        yield return new TestCaseData((Action&lt;IBehaviour1Test&gt;)Test_1);\n        yield return new TestCaseData((Action&lt;IBehaviour1Test&gt;)Test_2);\n        yield return new TestCaseData((Action&lt;IBehaviour1Test&gt;)Test_3);\n    }\n\n    void Test_1(IBehaviour1Test impl)\n    {\n        // Arrange\n        impl.Arrange(); // public method's arrange\n        Test1Setup(); // Arrange for this test\n\n        // Act\n        var result = impl.Act();\n\n        // Assert\n        Test1Assert(result); // Assert for this test\n        impl.Assert(result); // Assert on public method\n\n    }\n\n    void Test_2(IBehaviour1Test impl){}\n    void Test_3(IBehaviour1Test impl){}\n}\n</code></pre>\n\n<p>This way, if I need to add a new test case for the private method's behaviour, I just need to add it once in the BehaviourTest, and all public method tests that contains it will be updated.</p>\n\n<p><img src=\"http://i.stack.imgur.com/ocBzi.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","unit-testing","mocking","inversion-of-control","umbraco"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":12476209,"title":"Unit testing umbraco based sites","body":"<p>Is there a way to test code which relies on umbraco. i.e. within my model i'm calling getNode or using uquery to get nodes but i can't test those classes because they rely on umbraco...</p>\n\n<p>i guess one way to resolve this issue is by mocking, but how can you mock uquery or nodefactory?</p>\n"},{"tags":["asp.net-mvc","unit-testing","moq","repository-pattern"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12706809,"title":"Unit testing method in service layer","body":"<p>I have started thinking about adding some unit tests around some business logic in my project.</p>\n\n<p>The first method that I would like to test is a method in my service layer that returns a list of child nodes for a given node. </p>\n\n<p>The method looks like this:</p>\n\n<pre><code>public List&lt;Guid&gt; GetSubGroupNodes(string rootNode)\n{\n    List&lt;Tree&gt; tree = ssdsContext.Trees.ToList();\n    Tree root = ssdsContext.Trees.Where(x =&gt; x.UserId == new Guid(rootNode)).FirstOrDefault();\n    return GetChildNodeIds(root, tree);\n} \n\nprivate List&lt;Tree&gt; GetChildNodes(Tree rootNode, List&lt;Tree&gt; tree)\n{\n    kids.Add(rootNode);\n    foreach (Tree t in FindChilden(rootNode, tree))\n    {\n        GetChildNodes(t, tree);\n    }\n     return kids;\n}\n</code></pre>\n\n<p>The way I'd imaginge testing something like this is to provide a fake Tree structure and then test that a providing a node returns the correct subnodes.</p>\n\n<p><code>ssdsContext</code> is an <code>ObjectContext</code>.</p>\n\n<p>I've seen that its possible to extract and interface for the <code>ObjectContext</code> <a href=\"http://stackoverflow.com/questions/415432/how-to-mock-objectcontext-or-objectqueryt-in-entity-framework\">How to mock ObjectContext or ObjectQuery&lt;T&gt; in Entity Framework?</a> but I've also read that mocking a <code>DBContext</code> is a waste of time <a href=\"http://stackoverflow.com/questions/6766478/unit-testing-dbcontext\">Unit Testing DbContext</a>.</p>\n\n<p>I have also read that as Entity Framework is an implementation of the repository pattern and unit of work patten here: <a href=\"http://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point\">Generic Repository With EF 4.1 what is the point</a>.</p>\n\n<p>This has all left me a bit confused...is the only real way to test a method like this to create a Repository Layer? Is it even worth unit testing this method?</p>\n"},{"tags":["unit-testing","warnings","xcode4.4"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":329,"score":2,"question_id":11774400,"title":"Xcode4.4 unittest did not finish","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12308297/some-of-my-unit-tests-tests-are-not-finishing-in-xcode-4-4\">Some of my unit tests tests are not finishing in XCode 4.4</a>  </p>\n</blockquote>\n\n\n\n<p>I've just upgraded to XCode 4.4. I've created a new project and included unittesting. When running the tests I get a warning \"All tests did not finish\".</p>\n\n<p>Colleagues with clean installs of xcode 4.4 have exactly the same problem. They did not type a single letter of code and only created a new project that included unittests.</p>\n\n<p>What did we do wrong and how can we solve the problem?</p>\n\n<p><img src=\"http://i.stack.imgur.com/zt51p.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","unit-testing","mocking","spring-roo"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":118,"score":2,"question_id":12583978,"title":"Mocking a persistence layer generated with Roo","body":"<p>I have some Roo-generated entities, with dynamic finders.</p>\n\n<p>I'm trying to unit test a class that, basically, loads some data from different tables on the DB, runs some calculations and then outputs a structured object made of the results of these calculations, and i'd like to mock the persistence layer in order to be able to run the test without the DB (e.g. on Jenkins).</p>\n\n<p>However, i can't find a simple solution to do this: i tried adding <code>@MockStaticEntityMethods</code>, but the static methods for finders created by Roo return <code>TypedQuery</code> instead of the actual entities, so i'm unable to pass the mocked objects to <code>AnnotationDrivenStaticEntityMockingControl.expectReturn</code>.</p>\n\n<p>I also tried using Mockito and Powermock, but i still can't seem to get over the problem that static finder methods return <code>TypedQuery</code> and not the real entities.</p>\n\n<p>What is the standard way of mocking Roo-generated finders, then?</p>\n"},{"tags":["ruby","unit-testing","cucumber"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12651444,"title":"Testing ruby script","body":"<p>I'm creating a Ruby (not Rails) script and I have to test using standard Rails unit tests and Cucumber. I can't use RSpec. </p>\n\n<p>So how do I test a ruby script with Cucumber and Rails Test::Unit? Is it possible?</p>\n"},{"tags":["ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12701643,"title":"ruby koans comment","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1972266/obj-nil-vs-obj-nil\">obj.nil? vs. obj == nil</a>  </p>\n</blockquote>\n\n\n\n<p>Working through ruby koans now and found this comment embedded in one of the .rb files:</p>\n\n<pre><code>    # THINK ABOUT IT:\n#\n# Is it better to use\n#    obj.nil?\n# or\n#    obj == nil\n# Why?\n</code></pre>\n\n<p>I know from convention the answer is obj.nil? but I could not tell you why.  Anyone have any ideas?</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","unity","automocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12700988,"title":"Unit test MVC Controller with UnityAutoMoq resolving an interface that takes constructor parameteres","body":"<p>As the title says, I'm attempting to resolve an interface that implements a concrete class that also takes a constructor.</p>\n\n<p>Here's the concrete service class as an example:</p>\n\n<pre><code>public class MessageService : IMessageService\n{\n    private readonly IMessageGenerator _messageGenerator;\n\n    public MessageService(IMessageGenerator messageGenerator)\n    {\n        _messageGenerator = messageGenerator;\n    }\n\n    public string GetMessage()\n    {\n        return string.Concat(_messageGenerator.GetMessage(), \"\");\n    }\n}\n</code></pre>\n\n<p>As you can see this service class also requires an interface as a constructor parameter. The MVC controller constructor looks like this:</p>\n\n<pre><code>    private readonly IMessageService _messageSvc;\n\n    public HomeController(IMessageService messageSvc)\n    {\n        _messageSvc = messageSvc;\n    }\n</code></pre>\n\n<p>I have resolved the interfaces in a Bootstrapper thanks to Unity.Mvc3</p>\n\n<pre><code>var container = new UnityContainer();\n\ncontainer\n        .RegisterType&lt;IMessageService, MessageService&gt;()\n        .RegisterType&lt;IMessageGenerator, MessageGenerator&gt;();\n</code></pre>\n\n<p>So the main issue I'm having is how can I pass a mocked instance of the IMessageGenerator interface to the IMessageService inside a unit test using UnityAutoMoq? I would think that something like this would work, but it doesn't:</p>\n\n<pre><code>    [TestMethod]\n    public void Index()\n    {\n        var container = new UnityAutoMoqContainer();\n        var controllerContext = container.Resolve&lt;ControllerContext&gt;();\n        var nMsgSvc = container.Resolve&lt;IMessageService&gt;(container.Resolve&lt;IMessageGenerator&gt;);\n        var sut = new HomeController(nMsgSvc) { ControllerContext = controllerContext };\n\n        ViewResult result = sut.Index() as ViewResult;\n\n        Assert.AreEqual(\"Hello from the MessageGenerator via the MessageService\", result.ViewBag.Message);\n    }\n</code></pre>\n"},{"tags":["c","unit-testing","hudson","cunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":138,"score":2,"question_id":10623800,"title":"CUnit failures in hudson show success","body":"<p>i put unit tests in C running over hudson, but when i have a test that failures it shows a success in the build, but must to appear fail!</p>\n\n<p>I'm using gcc to compile and run the executable in hudson like that:</p>\n\n<pre><code>gcc -lcunit test_ctesting.c -o testing\n./testing\n</code></pre>\n\n<p>it's in a shell command, how can i get the failures and show it?</p>\n"},{"tags":["python","unit-testing","testing","sqlalchemy","flask"],"answer_count":2,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1836,"score":8,"question_id":5025720,"title":"How do you set up a Flask application with SQLAlchemy for testing?","body":"<p>It seems common practice in Flask to start like this:</p>\n\n<pre><code>from flask import Flask\nfrom flaskext.sqlalchemy import SQLAlchemy\napp = Flask(__name__)\nSQLALCHEMY_DATABASE_URI = 'something'\napp.config.from_object(__name__)\ndb = SQLAlchemy(app)\n</code></pre>\n\n<p>And then import and use <code>app</code> and <code>db</code> everywhere.  But when you create <code>db</code> like this, it grabs configuration from the app, and it seems that this configuration can't ever be overridden once it happens.  There are some pages on Flask's website about making application factories, but it's not clear how I would be able to still use <code>app</code> and <code>db</code> everywhere if I did that.</p>\n\n<p>How do I write a script to test my Flask application with a different database?  How should I structure my application to make this possible?  Do I have to use <code>module</code>s ?</p>\n"},{"tags":["cocoa","unit-testing","core-data","ocmock","mogenerator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12697058,"title":"OCMock with Core Data/Mogenerator throws exception NSInvalidArgumentException [NSProxy doesNotRecognizeSelector]","body":"<p>I am using OCMock to mock NSManagedObjects in my unit tests. I use Mogenerator to generate machine and human readable files for my core data objects. I am trying to mock an NSManagedObject to return a boolean value and a string. Both are attributes on my core data entity. When I mock the <code>BOOL</code>, the value is returned from the object correctly, my class uses it, and the test passes successfully. When I attempt to stub an <code>NSString</code> property on the same object, it throws an <code>NSInvalidArgumentException [NSProxy doesNotRecognizeSelector]</code>.</p>\n\n<p>Here is the calling code:</p>\n\n<pre><code>id biller = [OCMockObject mockForClass:[Biller class]];\n// passes\n[[[biller stub] andReturnValue:OCMOCK_VALUE((BOOL){NO})] billerValidatedValue];\n// throws exception\n[[[biller stub] andReturn:@\"Test\"] name];\n</code></pre>\n\n<p>Here is the exception:</p>\n\n<pre><code>*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSProxy doesNotRecognizeSelector:name] called!'\n</code></pre>\n\n<p>I know there are <a href=\"http://iamleeg.blogspot.com/2009/09/unit-testing-core-data-driven-apps.html\" rel=\"nofollow\">some recommendations</a> to have an interface that sits in front of the NSManagedObject for testing purposes, but this seems to be adding complexity on top of the Mogenerator machine/human files. </p>\n\n<p>Are there any other suggestions around this without completely reconfiguring this code? This code is already in production, and we are trying to add unit tests in as we develop new features.</p>\n"},{"tags":["c#","unit-testing","mocking","mspec"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12693395,"title":"Unit test performancemonitor functionality using a network card","body":"<p>I have written a class which wraps up various calls to the PerformanceMonitor Api to do with the Network Interface.</p>\n\n<p>Currently to test various calls which calculate the video on demand bandwidth, utilization etc I have to copy a large file manually to a shared drive and then run my test.</p>\n\n<p>Clearly not ideal.</p>\n\n<p>How can I automate this or is there some sort of tool/emulator which hits the network card so that I can run my unit tests under load so that the correct values are produced?</p>\n"},{"tags":["unit-testing","vb6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12697175,"title":"Visual Basic 6 and unit testing","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/467789/are-there-any-good-tdd-tools-or-resources-for-vb6\">Are there any good TDD tools or resources for VB6?</a>  </p>\n</blockquote>\n\n\n\n<p>I have been tasked with creating some upgrades for a older VB6 application.\nAre there any unit testing solutions that VB6 could easily implement?</p>\n\n<p>I honestly haven't looked at any VB6 since 1999!</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":14,"up_vote_count":32,"down_vote_count":0,"view_count":3469,"score":32,"question_id":5696884,"title":"Python nose vs. unittest","body":"<p>What are the advantages and disadvantages of Python's nose library versus unittest.</p>\n"},{"tags":["python","unit-testing","pyunit"],"answer_count":4,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":3724,"score":11,"question_id":1068246,"title":"Python unittest: how to run only part of a test file?","body":"<p>I have a test file that contains tests taking quite a lot of time (they send calculations to a cluster and wait for the result). All of these are in specific TestCase class.</p>\n\n<p>Since they take time and furthermore are not likely to break, I'd want to be able to choose whether this subset of tests does or doesn't run (the best way would be with a command-line argument, ie \"<code>./tests.py --offline</code>\" or something like that), so I could run most of the tests often and quickly and the whole set once in a while, when I have time.</p>\n\n<p>For now, I just use <code>unittest.main()</code> to start the tests.</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","postgresql","jpa","continuous-integration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":11473452,"title":"How can I make unit tests for my JPA code without requiring that the presence of our postgres server?","body":"<p>Our database is a postgresql.  We use the JPA to manage our persistence tasks.  Currently, our tests require the presence of a postgres server in order to execute.  This makes our running our tests on a dev box as  hassle, because the dev has to first install a postgres server, and it makes portability to various build server environments, from CI to our release build environment, difficult.  </p>\n\n<p>It seems to me that I should be able to switch out the heavy weight db server for a lightweight in memory version.  We dont do any postgres specific things.  Our code is mostly pure JPA with a touch of hibernate specific functionality accessed.  </p>\n"},{"tags":["unit-testing","qt","googletest","qtestlib","qttest"],"answer_count":8,"favorite_count":6,"up_vote_count":13,"down_vote_count":0,"view_count":7954,"score":13,"question_id":1524390,"title":"What unit-testing framework should I use for Qt?","body":"<p>I am just starting up a new project that needs some cross-platform GUI, and we have chosen Qt as the GUI-framework.</p>\n\n<p>We need a unit-testing framework, too. Until about a year ago we used an in-house developed unit-testing framework for C++-projects, but we are now transitioning to using Google Test for new projects.</p>\n\n<p>Does anyone have any experience with using Google Test for Qt-applications? Is QtTest/QTestLib a better alternative?</p>\n\n<p>I am still not sure how much we want to use Qt in the non-GUI parts of the project - we would probably prefer to just use STL/Boost in the core-code with a small interface to the Qt-based GUI.</p>\n\n<p><em>EDIT:</em> It looks like many are leaning towards QtTest. Is there anybody who has any experience with integrating this with a continous integration server? Also, it would seem to me that having to handle a separate application for each new test case would cause a lot of friction. Is there any good way to solve that? Does Qt Creator have a good way of handling such test cases or would you need to have a project per test case?</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12692126,"title":"How to trace the values in a junit test?","body":"<p>I am running a simple test case where I test if there is no id in the db and i get an expected exception back.</p>\n\n<p>But it does not work. So my question is how to trace the values of a test in junit? Any good solutions?</p>\n\n<p>I appreaciate your answer!!!</p>\n\n<p>UPDATE:\ntest case:</p>\n\n<pre><code>@Test(expected = SQLException.class)\npublic void testDeleteID(){\n    ArrayList&lt;Produkt&gt; queryResult=new ArrayList&lt;Produkt&gt;();\n    shandler.deleteProdukt(666);\n    queryResult=shandler.findAll();\n\n}\n</code></pre>\n\n<p>IDE: eclipse</p>\n"},{"tags":["unit-testing","rhino-mocks","mvccontrib","mvccontrib-testhelper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":142,"score":1,"question_id":11075186,"title":"MVCContrib TestHelper and User.Identity.Name, Server.MapPath and Form Collection","body":"<p>I am new to MVCContrib Testhelper and mocking with Rhino.</p>\n\n<p>I am needing assistance with unit testing a controller which relies on User.Identity.Name, Server.MapPath and Form Collection.</p>\n\n<p>I started off with </p>\n\n<pre><code>var controller = new SubmitController();\nvar builder = new TestControllerBuilder();\nbuilder.InitializeController(controller);\n</code></pre>\n\n<p>I found <a href=\"http://www.mfranc.com/tag/mvc-contrib/\" rel=\"nofollow\">this post</a> for setting User.Identity.Name </p>\n\n<pre><code>controller.ControllerContext = TestHelper.MockControllerContext(controller).WithAuthenticatedUser(\"domain\\\\username\");\n</code></pre>\n\n<p>At this point, in my controller i am now able to get to the User.Identity.  The problem then became how to i set Form Collection variables.  Setting</p>\n\n<pre><code>builder.Form.Add(\"testvar\",\"1\");\n</code></pre>\n\n<p>no longer worked.  It seemed that now I had to access via </p>\n\n<pre><code>controller.HttpContext.Request.Form.Add(\"testvar\",\"1)\n</code></pre>\n\n<p>This seemed to work, but at this point, i was no longer using builder(TestControllerBuilder) above.</p>\n\n<p>I then had to mock Server which raised up more issues.  How can I continue to use builder but use mocks or stubs for httpContext, HttpRequest, Server etc.  I was sort of expecting that builder would have methods for setting expected values for HttpRequest, Server etc.</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","unit-testing","jasmine"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":1689,"score":7,"question_id":7672389,"title":"Testing DOM manipulating in Jasmine test","body":"<p>I'm creating a js widget and first part is to add scipt width javascript, some thing like this (example from google analytics):</p>\n\n<pre><code>(function() {\n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n})();\n</code></pre>\n\n<p>I don't know how to test it with jasmine (using fixtures?) does any one can help?</p>\n"},{"tags":["c++","unit-testing","googletest","googlemock"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12689052,"title":"Creating a unit test mock for a C like interface","body":"<p>I receive a C interface from a C API containing a set of function pointers:</p>\n\n<pre><code>struct Interface\n{\n   int (*get)(const char *name)\n   void (*set)(const char *name)\n   ...\n};\n</code></pre>\n\n<p>I have a C++ Wrapper class which wraps this interface (takes a copy via its constructor) and I'm trying to unit test this wrapper.</p>\n\n<p>I need to assign functionA with a mock. A naive approach is as follows:</p>\n\n<pre><code>int mockGet(const char *name)\n{\n  names.push_back(name);\n  return mockGetReturnValue;\n}\n</code></pre>\n\n<p>but the global <code>names</code> and <code>mockFunctionAReturnValue</code> objects will need to be reset between each test and this is really nasty.</p>\n\n<p>How should I do this? I'd like to do this using Google Mock if possible.</p>\n"},{"tags":["java","svn","unit-testing","code-coverage","sonar"],"answer_count":3,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":456,"score":9,"question_id":5173455,"title":"Ensure minimal coverage on new Subversion commits","body":"<p>We have a massive project with almost no unit tests at all. I would like to ensure from now on that the developers commit new features (or bugs!) without minimal coverage for corresponding unit tests.</p>\n\n<p>What are some ways to enforce this?</p>\n\n<p>We use many tools, so perhaps I can use a plugin (jira, greenhopper, fisheye, sonar, hudson). I was also thinking perhaps a Subversion pre-commit hook, the Commit Acceptance Plugin for jira, or something equivalent.</p>\n\n<p>Thoughts?</p>\n"},{"tags":["javascript","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12687102,"title":"In JS how can inner functions be unit tested?","body":"<p>Consider function <code>f</code> defined as follows:</p>\n\n<pre><code>(function() {\n\n    var f = function(x) {\n        return x;\n    }\n\n    return f(1);\n})();\n</code></pre>\n\n<p>How can I unit test <code>f</code>, or what is the recommended way to refactor this code so <code>f</code> can be unit tested?</p>\n"},{"tags":["java","unit-testing","static-analysis","emma"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":105,"score":4,"question_id":12673912,"title":"Java test coverage: who covers what?","body":"<p>Is there a tool similar to emma, that reports <em>which</em> test covers a specific implementation ?</p>\n"},{"tags":["c++","visual-studio-2010","unit-testing","marmalade"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":12670014,"title":"Unit testing in Visual Studio that support Marmalade SDK","body":"<p>We are working with <a href=\"http://www.madewithmarmalade.com/\" rel=\"nofollow\">Marmalade SDK</a> in Visual Studio and sharing files via git with a team. And we would love to use unit tests.</p>\n\n<p>There are many possibilities</p>\n\n<ul>\n<li><p>We tried to implement unit tests with built-in function of Visual Studio, so we just created a new test project in same solution. Everything looked fine until we try to included Marmalade SDK files. There was a problem with compiler. Marmalade SDK generates his own project properties, there are compilers like \"ARM (x86) Debug\" and many more, and in Test project are just defaults like Debug, Release. So the code can't be compiled correctly. Can I just copy those properties to Test project? Will it work?  It will be much better if we will find answer on this option.</p></li>\n<li><p>But also, we can use some unit test c++ framework. Link it in same main project as Marmalade SDK create. But which framework will be the best? There are plenty of them and I couldn't find out what will be the best. Also, we will need to do special main.cpp for running unit tests, right? If you can provide best test framework for easy to implement in Visual Studio with some tutorial I will really appreciate it.</p></li>\n</ul>\n\n<p>Thank you for any answer!</p>\n"},{"tags":["visual-studio-2010","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12686360,"title":"VS2010 Unit test “Pending” and the test cannot be completed","body":"<p>I'm using VS2010 (with windows 7).</p>\n\n<p>Every time I try to run a unit test it stays on \"Pending\" and the test cannot be completed.</p>\n\n<p>I tried to follow this <a href=\"http://msdn.microsoft.com/en-us/library/ms182532%28v=vs.100%29.aspx\" rel=\"nofollow\">msdn instructions</a>.</p>\n\n<p>I tried debugging test method (test view/debug selection), set breakpoints, but VS2010 indicates: the breakpoint will not currently be hit... I'm in debug configuration.</p>\n\n<p>Any advice?</p>\n"},{"tags":["php","unit-testing","zend-framework","session","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12667254,"title":"Unit testing with Zend_Session_Namespace","body":"<p>I'm writing unit tests for a login system - but having difficulties with interacting with the Zend_Session_Namespace object. I'm using the Zend_Test extensions to the PHPUnit framework (ZF 1.10, PHPUnit 3.4.5)</p>\n\n<p>Test</p>\n\n<pre><code>public function testAuthFailure()\n{\n  $request = $this-&gt;getRequest();\n  $request-&gt;setMethod(\"POST\");\n  $request-&gt;setPost(\"username\", \"testUser\");\n  $request-&gt;setPost(\"password\", \"testPassword\");\n\n  $this-&gt;dispatch(\"/auth/login\");\n\n  $this-&gt;assertModule(\"auth\");\n  $this-&gt;assertController(\"login\");\n  $this-&gt;assertAction(\"validate\");\n\n  $loginSession = new Zend_Session_Namespace(\"login\");\n  $this-&gt;assertFalse(is_null($loginSession));\n  $this-&gt;assertObjectHasAttribute(\"messages\", $loginSession);\n  $this-&gt;assertFalse(empty($loginSession-&gt;messages));\n  $this-&gt;arrayHasKey(\"error\", $loginSession-&gt;messages[\"error\"]);\n  $this-&gt;assertEquals($loginSession-&gt;messages[\"error\"], \"Could not log you in with that username and/or password\");\n}\n</code></pre>\n\n<p>Current controller/action code</p>\n\n<pre><code>public function validateAction()\n{\n  $loginSession = new Zend_Session_Namespace(\"login\");\n\n  if (!$this-&gt;buildForm()-&gt;isValid($this-&gt;getRequest()-&gt;getPost())) {\n    $loginSession-&gt;messages[\"error\"][] = \"Please enter your username and password\";\n  }\n\n  $loginSession-&gt;messages[\"error\"][] = \"Could not contact the authentication server\";\n\n  $this-&gt;getResponse()\n    -&gt;setHttpResponseCode(303)\n    -&gt;setHeader(\"Location\", \"/auth/login\");\n}\n</code></pre>\n\n<p>My unit test is failing at <code>$this-&gt;assertObjectHasAttribute(\"messages\", $loginSession);</code> - whereas I would expect it to fail on the actual content of the message.</p>\n\n<p>I have these lines in my phpunit bootstrap:</p>\n\n<pre><code>Zend_Session::$_unitTestEnabled = true;\nZend_Session::start();\n</code></pre>\n\n<p>How do I confirm that the session message is correctly set?</p>\n"},{"tags":["c#","unit-testing","integration-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12684452,"title":"Should I make copies of my unit tests that use mocks and change them to a real database for integration testing?","body":"<p>I am currently unit testing my code with a mocking library. I am now at the point where I want to test that everything plays nicely with the database and works as expected.</p>\n\n<p>Does it make sense to copy a lot of my unit tests and adjust them to use a test database?</p>\n"},{"tags":["c++","unit-testing","googletest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12610239,"title":"Grouping googletest unit tests by categories","body":"<p>Can googletest unit tests be grouped by categories?  For example \"SlowRunning\", \"BugRegression\", etc.  The closest thing I have found is the --gtest_filter option.  By appending/prepending category names to the test or fixture names I can simulate the existence of groups.  This does not allow me to create groups that are not normally run.</p>\n\n<p>If categories do not exist in googletest, is there a good or best practice workaround?</p>\n\n<p>Edit: Another way is to use the --gtest_also_run_disabled_tests.  Adding DISABLED_ in front of tests gives you exactly one conditional category, but I feel like I'm misusing DISABLED when I do it.</p>\n"},{"tags":["python","unit-testing","nosetests","python-nose"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":1730,"score":7,"question_id":4219717,"title":"How to assert output with nosetest/unittest in python?","body":"<p>I'm writing tests for a function like next one:</p>\n\n<pre><code>def foo():\n    print 'hello world!'\n</code></pre>\n\n<p>so when i want to test this function the code will be like this:</p>\n\n<pre><code>import sys\nfrom foomodule import foo\ndef test_foo():\n    foo()\n    output = sys.stdout.getline().strip() # because stdout is an StringIO instance\n    assert output == 'hello world!'\n</code></pre>\n\n<p>but if i run nosetests with -s parameter the test crashes. How can i catch the output with unittest or nose module?</p>\n"},{"tags":["unit-testing","ios6","xcodebuild","xcode4.5"],"answer_count":3,"favorite_count":13,"up_vote_count":14,"down_vote_count":0,"view_count":1470,"score":14,"question_id":12557935,"title":"Xcode 4.5 command line unit testing","body":"<p>Having an issue since updating to Xcode 4.5 when running my unit tests via command line.\nThe following is the output i'm seeing when i try to run my tests</p>\n\n<pre><code>Unknown Device Type. Using UIUserInterfaceIdiomPad based on screen size\nTerminating since there is no workspace.\n/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:334: note: Passed tests for architecture 'i386' (GC OFF)\n\n/Applications/Xcode.app/Contents/Developer/Tools/RunPlatformUnitTests.include:345: note: Completed tests for architectures 'i386'\n</code></pre>\n\n<p>Even though it does say the tests have passed and completed, I don't think they have actually have been run. </p>\n\n<p>I'm using the following command to run the tests\nxcodebuild -workspace MyApp.xcworkspace -scheme MyAppTests -sdk iphonesimulator -configuration Debug clean build TEST_AFTER_BUILD=YES</p>\n\n<p>Has anyone run into the same problem and can offer a solution?</p>\n"},{"tags":["python","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12682255,"title":"python unittests, do I need to import from the tests/__init__.py?","body":"<p>I have my code organized like this:</p>\n\n<p>base_project_dir/src\n                /tests\n                      /test1.py\n                      /test2.py</p>\n\n<p>in test1.py and test2.py I have the classes extending unittest.TestCase</p>\n\n<p>according to python API doc, I should be able to run</p>\n\n<p>python -m unittest tests   from base dir and run all tests.\nbut doing so shows that it finds 0 tests.  so I added \nfrom test1 import *\nfrom test2 import *</p>\n\n<p>into tests/<strong>init</strong>.py</p>\n\n<p>now the above command works. but when I want to run individual tests, it sources the module <strong>init</strong>, which forcefully run all tests.</p>\n\n<p>what is the correct way to organize this?</p>\n\n<p>thanks\nYang</p>\n"},{"tags":["java","unit-testing","google-app-engine","channel-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12678384,"title":"How to unit test code relying on Channel API (Google App Engine, Java)","body":"<p>I have Java servlets that rely on the Channel API, from Google App Engine. I am trying to write unit tests for that code, but I am quite stumped with how to write a stub client to receive a response message from the servlet, instead of me always having to rely on using an actual web page as my test client. My servlet is quite simple:</p>\n\n<pre><code>ChannelService channelService = ChannelServiceFactory.getChannelService();\nchannelService.sendMessage(new ChannelMessage(someKey, \"ECHO: \" + someMsg));\n</code></pre>\n\n<p>Usually, I read this in my test client, which is a web page. But, I want to write unit tests that I can test using a framework like jUnit or TestNG. After reading Google's <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting\" rel=\"nofollow\">page about unit testing their Java services</a>, I tried stuff such as using a <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalServiceTestHelper\" rel=\"nofollow\">LocalServiceTestHelper</a> object in my test class and configure it with a <a href=\"https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/LocalChannelServiceTestConfig\" rel=\"nofollow\">LocalChannelServiceTestConfig</a> object. The result of this is that my test class can create an instance of <code>LocalChannelService</code>, a class which seems to implement the same methods as <code>ChannelService</code>.</p>\n\n<p><strong>However:</strong></p>\n\n<ul>\n<li>Neither classes have any robust relationship to each other (don't implement a similar interface, are not in the same class hierarchy...). Makes it impossible for me to inject a LocalChannelService object into my servlet as a mock object.</li>\n<li>No documentation whatsoever on LocalChannelService API (Thanks a lot, Google).</li>\n<li>Also no documentation on their Local Unit Testing page for how to test the Channel API (again, thanks a lot Google)</li>\n</ul>\n\n<p>So then I came across this <a href=\"http://stackoverflow.com/questions/11172174/how-can-i-unit-test-the-appengine-channel-service\">post</a> about how to test <code>ChannelService</code> in Java code. Unfortunately, the only relevant answer given was for <em>Python</em>. Well, lo and behold, Google indeed does provide Python GAE server developers with tools for writing stub clients for Google services, as outline in their <a href=\"https://developers.google.com/appengine/docs/python/tools/localunittesting?hl=en\" rel=\"nofollow\">Python Local Unit Testing guide</a>. Unbelievable how they neglected to do the same for Java!</p>\n\n<hr/>\n\n<p>Now that I've gotten all that off my chest (apologies if I sounded a bit too flustered), I would really like to know, what is the best way for testing Java code relying on Google App Engine's Channel API? I really wish to rely on testing tools instead of web pages. do I have to somehow call Google's <a href=\"https://developers.google.com/appengine/docs/java/channel/javascript\" rel=\"nofollow\">Javascript Client for Channel API</a> from Java? There must be a better way in which I can use a mock object or stub.</p>\n\n<hr/>\n\n<h3>Update 1</h3>\n\n<p>Used a better name, \"Google App Engine\" instead of just \"App Engine\"</p>\n"},{"tags":["unit-testing","f#","signature"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":121,"score":4,"question_id":12675808,"title":"Learning F#: Is it possible to create a test case to verify a signature?","body":"<p>With unit-testing several hundred lines of F# code I realized that it would be advantageous to not only check the output but also the signatures. The reason being if the code is validated for a release and then changes are made after the release that modify the signature, one would want to know why the signature changed so that either the test case can be updated for the new signature or to flag the change as causing a problem. </p>\n\n<p>Is it possible to create a test case to verify a signature? If so, how?</p>\n"},{"tags":["android","unit-testing","junit","android-testing"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12676539,"title":"How can I to write unit-test for my android method?","body":"<p>I wrote some code. Now I need to write unit-test for it. I do not know how to write it for this method:</p>\n\n<pre><code>    public void parceAuthResult()\n{\n    NodeList nodeList = baseDocElement.getElementsByTagName(\"LoginResult\");\n    if(nodeList != null &amp;&amp; nodeList.getLength() &gt; 0)\n    {\n        for(int i = 0 ; i &lt; nodeList.getLength();i++)\n        {\n            Element el = (Element)nodeList.item(i);\n            NodeList rootResults = el.getElementsByTagName(\"a:RootResults\");\n            if (rootResults.getLength() != 0)\n                authResult = true;\n            else\n                authResult = false;\n        }\n    }\n}\n</code></pre>\n\n<p>baseDocElement and authResult is defined as</p>\n\n<pre><code>private Element     baseDocElement;\nprivate Boolean     authResult;\n</code></pre>\n\n<p>some other methods I tested using <strong>junit</strong> and <strong>reflection</strong></p>\n\n<p>help please, I have no idea how to test that.</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12675975,"title":"JUnit - IllegalArgumentException.class failes?","body":"<p>I have created an extremely simple junit test, which creates a null product in the product table in the db.</p>\n\n<pre><code>@Test(expected = IllegalArgumentException.class)\npublic void testCreate_NULL() {\n    Product p = null;\n    createProduct(p);\n}\n</code></pre>\n\n<p>but when I do the junit test it turns blue.</p>\n\n<p>btw. other tests like creating a product, deleting ect. are all green...</p>\n\n<p>I appreciate your answer!!!</p>\n\n<p>PS.: I am using hsql db!</p>\n\n<p>PPS.: The error is:</p>\n\n<blockquote>\n  <p>java.lang.AssertionError: Expected exception:\n  java.lang.IllegalArgumentException    at\n  org.junit.internal.runners.statements.ExpectException.evaluate(ExpectException.java:35)\n    at\n  org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    at\n  org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)  at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:300)     at\n  org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at\n  org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)</p>\n</blockquote>\n\n<p>UPDATE:</p>\n\n<p>my createProduct Method justs inserts a product into the db and before it checks:</p>\n\n<pre><code>    if(p==null) {\n        throw new IllegalArgumentException(\"null objects impossible\");\n    }\n</code></pre>\n"},{"tags":["xcode","unit-testing","jenkins","xcodebuild"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":423,"score":4,"question_id":12604628,"title":"Running iOS Unit Tests from Command Line with Xcode 4.5","body":"<p>While running Unit Tests from command line (necessary for Jenkins) used to work until Xcode 4.4.1 with <a href=\"http://www.raingrove.com/2012/03/28/running-ocunit-and-specta-tests-from-command-line.html\" rel=\"nofollow\">this hack</a>, it does not seem to work anymore with Xcode 4.5.</p>\n\n<p>Now I get the following error message:</p>\n\n<pre><code>....MyTests.build/Script-641C6E0115D3BECD004175F...: line 3: 16669 Segmentation fault: 11  \"${SYSTEM_DEVELOPER_DIR}/Tools/RunUnitTests\"\n</code></pre>\n\n<p>Any ideas how to make it work again?</p>\n"},{"tags":[".net","visual-studio","unit-testing"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12674606,"title":"Can Visual Studio 2012 run unit tests in parallel?","body":"<p>Can Visual Studio 2012 run unit tests in parallel? Visual Studio 2010 has an option to do this (see <a href=\"http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx</a>) but I can't find anything similar in Visual Studio 2012.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing","discover"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12674167,"title":"Python unittest discovery with subfolders","body":"<p>My unittest folder is organized this way.</p>\n\n<pre><code>.\n|-- import\n|   |-- import.kc\n|   |-- import.kh\n|   `-- import_test.py\n|-- module\n|   |-- module.kc\n|   |-- module.kh\n|   `-- module_test.py\n`-- test.py\n</code></pre>\n\n<p>I'd want to simply run <code>test.py</code> to run each of my <code>*_test.py</code> using unittest python module.\nCurrently, my test.py contains</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport unittest\n\nif __name__ == \"__main__\":\n    suite = unittest.TestLoader().discover('.', pattern = \"*_test.py\")\n    unittest.TextTestRunner(verbosity=2).run(suite)\n</code></pre>\n\n<p>The python documentation says that it should automatically discover my test in the subfolders. But it does not.</p>\n\n<p>At the moment, it only outputs</p>\n\n<pre><code>----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>I'm sure it is not a problem with my <code>*_test.py</code> file, because when I move them into the root directory, it works fine..\nWhat am I doing wrong ?</p>\n"},{"tags":["ruby-on-rails","unit-testing","fixtures","rubymine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12666811,"title":"Errro while running test cases in RubyMine 4.3.5 Rails 3.2","body":"<p>I am unable to run any single test case in RubyMine 4.3.5 Rails 3.2 .\nI have done <code>db:migrate</code> to test environment.\nTried doing <code>test:clone:structure</code> and selected development and I get this error:</p>\n\n<blockquote>\n  <p>'sqlite3' is not recognized as an internal or external command</p>\n</blockquote>\n\n<p>Also a <code>structure.sql</code> file gets created instead in the db folder.\nAlso, when I generate the <code>test.sqlite3</code> file and do <code>test:clone:structure</code>, I get the <code>permission denied</code> error on <code>test.sqlite3</code>.\nAnd when I run any test case, I get the following error:</p>\n\n<blockquote>\n  <p>Error:Fixture:Format</p>\n</blockquote>\n"},{"tags":["java","unit-testing","tree","tdd"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":450,"score":1,"question_id":1415013,"title":"Unit test proper data structure creation","body":"<p>How would one test whether data structure built properly? I'm implementing kind of modified radix tree, and been wondering how do you check if your data structure builds up correctly.</p>\n\n<p>Consider a tree of <code>TreeNode {String, Int}</code> nodes.\nYou always want to append new child to deepest node of value equal to 0, as in following example:</p>\n\n<pre>\nRoot, 0\n- Child_1, 5\n- Child_2, 0\n   - Child_3, 1\n</pre>\n\n<p>Question is, how to unit test if <strong>tree structure</strong> builds up as you wished? TreeNode only has one method, which would be <code>insert</code>.</p>\n\n<p>My idea so far was to write <code>TreeVisitor</code> that would walk through tree and convert each node to string. \nTree from example above, could look like this:</p>\n\n<pre>\n[Root, 0 [Child_1, 5][Child_2, 0 [Child_3, 1]]]\n</pre>\n\n<p>Knowing algorithm that builds tree, I can create such string manually if I have idea what elements I'm inserting. My unit test would look like this (using same example).</p>\n\n<pre><code>TreeNode root = new TreeNode(\"Root\", 0);\nroot.insert(new TreeNode(\"Child_1\", 5));\nroot.insert(new TreeNode(\"Child_2\", 0));\nroot.insert(new TreeNode(\"Child_3\", 1));\nTreeVisitor visitor = new TreeVisitor();\nString expected = \"[Root, 0 [Child_1, 5][Child_2, 0 [Child_3, 1]]]\";\nasssertEquals(expected, visitor.visit(root));</code></pre>\n\n<p>I got the feeling it's not best approach. To start of, as soon as visitor changes, all tests will fail (simply put change <code>[ ]</code> to <code>( )</code>). Also, this approach allows me to test pretty small trees (as big as I can compute manually). How would you test bigger ones?</p>\n\n<p>General question is, <strong>how to write tests checking whether data structure builds up correctly</strong>? </p>\n\n<p>I assume I might be getting whole testing idea wrong, as I'm fresh from dozen tutorials where people test whether .Sum(a, b) works as expected :-) </p>\n"},{"tags":["c","unit-testing","stdin"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":178,"score":0,"question_id":5740176,"title":"How do I write a testing function for another function that uses stdin input?","body":"<p>I have the following functions as part of a college assignment:</p>\n\n<pre><code>int readMenuOption()\n{\n   /* local declarations */\n   char option[2];\n   /* read in 1 char from stdin plus 1 char for string termination character */\n   readStdin(1 + 1, option);\n   return (int)option[0] &lt;= ASCII_OFFSET ? 0 : (int)option[0] - ASCII_OFFSET;\n}\n\nint readStdin(int limit, char *buffer) \n{\n   char c;\n   int i = 0;\n   int read = FALSE;\n   while ((c = fgetc(stdin)) != '\\n') {\n      /* if the input string buffer has already reached it maximum\n       limit, then abandon any other excess characters. */\n      if (i &lt;= limit) {\n         *(buffer + i) = c;\n         i++;\n         read = TRUE;\n      }\n   }\n   /* clear the remaining elements of the input buffer with a null character. */\n   for (i = i; i &lt; strlen(buffer); i++) {\n      *(buffer + i) = '\\0';\n   }\n   return read;\n}\n</code></pre>\n\n<p>It works perfectly for what I need it to do (take in input from keyboard).  I've had to do it using stdin (like I have) because of a number of requirements outlined by my professor.</p>\n\n<p>I want to write a series of \"unit tests\" for the assignment, but I dont know how to get my testing functions to call <code>readMenuOption()</code> and pass in input to it (without having to do it at run-time).</p>\n\n<p>Is this possible, and if so, how can I do it? (i.e., is it possible to write to stdin)?</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":47,"score":4,"question_id":12666479,"title":"How to bundle PHPUnit with my code?","body":"<p>I would like to:</p>\n\n<ul>\n<li>Run tests with PHPUnit regardless of my environment (and if PHPUnit or PEAR is installed or not)</li>\n<li>Show test results on screen if possible</li>\n</ul>\n\n<p>How can I do this? I tried downloading the code <a href=\"http://pear.phpunit.de/\" rel=\"nofollow\">here</a> and including <code>Autoload.php</code> but it still have some dependencies. Maybe there's some better approach for this than trying to bundle it with my code...?</p>\n"},{"tags":["asp.net","unit-testing","events","event-handling","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12669408,"title":"event expected not to raise is raising","body":"<p>I have an <strong>event</strong> and a <strong>raising method</strong> as below :</p>\n\n<pre><code>public class Events {\n\n    public event EventHandler&lt;CustomEventArgs&gt; Succeed;\n\n    public virtual void OnSucceed(object sender, params object[] data)\n    {\n        CustomEventArgs args = new CustomEventArgs(data);\n\n        EventHandler&lt;CustomEventArgs&gt; _succeed = Succeed;\n\n        if (_succeed != null)\n        {\n            _succeed(sender, args);\n        }\n\n    }}\n</code></pre>\n\n<p>I have created a <strong>unit test</strong> for the <strong>OnSucceed</strong> method (using <a href=\"http://fluentassertions.codeplex.com/\" rel=\"nofollow\">FluentAssertions</a> ):</p>\n\n<pre><code>    [Test]\n    public void SucceedShouldNotBeRaisedTest()\n    {\n        Events events = new Events();\n\n        events.MonitorEvents();\n\n        events.OnSucceed(this,\"somedata\");\n\n        events.ShouldNotRaise(\"Succeed\");\n    }\n</code></pre>\n\n<p>as there is no subscriber to the event then I expect it not to raise Succeed event  </p>\n\n<p>but the test fails as Succeed event <strong>is raised</strong> . what's wrong with this ?!</p>\n"},{"tags":["c#","unit-testing"],"answer_count":6,"favorite_count":12,"up_vote_count":40,"down_vote_count":0,"view_count":53449,"score":40,"question_id":2101,"title":"What are some good unit testing examples?","body":"<p>I've now found out <a href=\"http://stackoverflow.com/questions/1383/#1393\">what unit testing is</a>. Is there an example of unit testing in C#?</p>\n"},{"tags":["unit-testing","android-intent","robolectric"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12651865,"title":"robolectric, no intent matches for `receiveResult`","body":"<p>See my code:</p>\n\n<pre><code>doSomeActionWillStartNewIntentToSelectImage();\n\n// check started intent\nIntent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI);\nAssert.assertThat(activity, new StartedMatcher(intent));\n\n// simulate the returning result\nshadowOf(activity).receiveResult(\n        new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI),\n        Activity.RESULT_OK,\n        new Intent().setData(activity.drawableId2Uri(R.drawable.icon_ok)));\n</code></pre>\n\n<p>But it reports an error:</p>\n\n<pre><code>java.lang.RuntimeException: No intent matches \n    Intent{action=android.intent.action.PICK, data=content://media/internal/images/media} among \n   [Intent{action=android.intent.action.PICK, data=content://media/internal/images/media}]\nat com.xtremelabs.robolectric.shadows.ShadowActivity.receiveResult(ShadowActivity.java:381)\n</code></pre>\n\n<p>It's strange that <code>Intent{action=android.intent.action.PICK, data=content://media/internal/images/media}</code> is exactly the same as the later one.</p>\n\n<p>Where is wrong and how to fix it?</p>\n"},{"tags":["c++","windows","unit-testing","boost-test","divide-by-zero"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":250,"score":2,"question_id":8482490,"title":"How to handle Integer Division By Zero exception using Boost.Test library?","body":"<p>I'm writing unit tests using Boost.Test against some old C math library. One of tested functions in known to raise Integer Division By Zero system exception for some specified input. Let's say it's desired behavior and I want to write negative test for this case.</p>\n\n<p><code>BOOST_REQUIRE_THROW(statement, exception);</code> is not working for me as it is not C++ style exception (this macro is using <code>try {} catch {}</code> internally). </p>\n\n<p>What is the correct way to handle case when I'm expecting failure on system level?</p>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":71,"score":-1,"question_id":12662690,"title":"How to create Unit-test Project in Visual Studio 2012 RC","body":"<p>I have a Project, and now I want to create new unittest project for it. But I don't know the way to do this. I have been add new Test Project to solution, how to point this test project to my target. Please help :)</p>\n"},{"tags":["c#","asp.net","unit-testing","events"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":73,"score":4,"question_id":12665159,"title":"How should events be unit tested in ASP.Net?","body":"<p>I have defined two events with custom event arguments and associated raising methods.  Now I wonder what and how the event should be tested.  How should I analyze the code to find candidates for unit testing?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12664966,"title":"uninitialized constant Test::Unit::UI::XML (NameError) in Rails (or Ruby)","body":"<p>I'm trying to create an xml runner to make a result report of Rails unit testing. Here is a code I have:</p>\n\n<pre><code>require 'test/unit'\nrequire 'test/unit/ui/console/testrunner'\n\nclass FastFailRunner &lt; Test::Unit::UI::Console::TestRunner\n  def add_fault(fault)\n    @faults &lt;&lt; fault\n    nl\n    output(\"%3d) %s\" % [@faults.length, fault.long_display])\n    output(\"--\")\n    @already_outputted = true\n  end\n\n  def finished(elapsed_time)\n    nl\n    output(\"Finished in #{elapsed_time} seconds.\")\n    nl\n    output(@result)\n  end\nend\n\nTest::Unit::AutoRunner::RUNNERS[:fastfail] = proc do |r|\n  FastFailRunner\nend\n</code></pre>\n\n<p>When I run it as <code>TESTOPTS=\"/home/alex/RubymineProjects/app2/test/unit/runner.rb --runner=xml\" rake test</code> </p>\n\n<p>... I get an error (pretty weird error)</p>\n\n<pre><code>/home/alex/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Test::Unit::UI::XML (NameError)\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/runner/xml.rb:5:in `block in &lt;module:Unit&gt;'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `[]'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:58:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit.rb:501:in `block in &lt;top (required)&gt;'\ngem install minitest\n/home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/runner/xml.rb:5:in `block in &lt;module:Unit&gt;': uninitialized constant Test::Unit::UI::XML (NameError)\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `[]'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:389:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit/autorunner.rb:58:in `run'\n    from /home/alex/.rvm/gems/ruby-1.9.3-p194/gems/test-unit-2.5.2/lib/test/unit.rb:501:in `block in &lt;top (required)&gt;'\nErrors running test:units! #&lt;RuntimeError: Command failed with status (1): [/home/alex/.rvm/rubies/ruby-1.9.3-p194/bin...]&gt;\nErrors running test:functionals! #&lt;RuntimeError: Command failed with status (1): [/home/alex/.rvm/rubies/ruby-1.9.3-p194/bin...]&gt;\n</code></pre>\n\n<p>I tried to require <code>test/unit/ui/xml/testrunner.rb</code> but no luck.\nAny thoughts?</p>\n"},{"tags":["java","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12665049,"title":"Patching Java classes with a mock implementation in a unit test","body":"<p>I have a class A which instantiates an object from class B internally.  That second class has lots of external side-effects, e.g. it uses a network connection.</p>\n\n<pre><code>public class A {\n  private B b;\n  public A() {\n    b = new B(); // 3rd party class that calls out externally (e.g. to a db)\n  }\n}\n</code></pre>\n\n<p>I would like to unit test class A by providing a mock implementation of class B.  I can easily create a mocked version of B by writing my own class or using something like Mockito and other frameworks, but how do I inject this mock implementation into class A's code?</p>\n\n<p>I guess I could ask for an instance of class B in class A's constructor, but that seems ugly.  No one really needs to know how class A does it's  business.</p>\n\n<p>Python has a \"mock\" library that allows you to \"patch\" functions at run time during a test.  Does Java have something similar?</p>\n"},{"tags":["android","unit-testing","android-service"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12309185,"title":"Accessing raw resource from ServiceTestCase","body":"<p>I am trying to write a <code>ServiceTestCase</code> that requires access to my target project's raw resources and use them before passing an intent to start a service. </p>\n\n<p>I read about using <code>ActivityTestCase</code> from a solution given on stackoverflow, which has a procedure as given below:</p>\n\n<pre><code>Context testContext = getInstrumentation().getTargetContext();\nResources testRes = testContext.getResources();\nInputStream ts = testRes.openRawResource(com.my.example.R.raw.proplist);\n</code></pre>\n\n<p>I get a <code>ResourceNotFoundException</code> with those steps. </p>\n\n<p>Is there a way to make it work in an <code>ActivityTestCase</code> and also replicate it for a <code>ServiceTestCase</code>?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","unit-testing","junit","mocking"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12661989,"title":"Mockito how do I mock this method?","body":"<p>I am new to mocking and so I'm playing around with this scenario. I have a method <code>MyClass.process()</code> which calls <code>MyClass.getFactory()</code>. I want to mock <code>getFactory()</code> to fail so that I can assure <code>process()</code> recovers correctly.</p>\n\n<p>It seems that if I call <code>getFactory()</code> after the mock it throws the exception correctly, but if it is called through the original <code>process()</code> method the exception is not thrown.</p>\n\n<pre><code>public class MyClass {\n\n    public MyFactory getFactory() throws FactoryException {\n        return ...\n    }\n\n    public String process() {\n        try {\n            MyFactory factory = getFactory();\n            ...\n        }\n        catch(FactoryException ex) {\n            ...\n        }\n    }\n\n}\n</code></pre>\n\n<p>Test class:</p>\n\n<pre><code>public class MyClassTest {\n\n    @Test\n    public void testGetFactoryFails() {\n        try {\n            MyClass mockMyClass = mock(MyClass.class);\n            when(mockMyClass.getFactory()).thenThrow(new FactoryException());\n            mockMyClass.process();\n            fail(\"FactoryException should have been thrown.\");\n        }\n        catch(FactoryException ex) {\n            // all good\n        }\n    }\n\n}\n</code></pre>\n\n<p>Thanks for all the feedback. I can see how mocking single methods under more complex environments would quickly become unmanageable. The contents of getFactory() is not important as this is concept code, not production code.</p>\n\n<p>One way I tried that works well:</p>\n\n<pre><code>public class MyClassTest {\n\n    class MyClassMock1 extends MyClass {\n\n        @Override\n        public MyFactory getFactory() throws FactoryException {\n            throw new FactoryException(\"Bad factory instance.\");\n        }\n\n    }\n\n    @Test\n    public void testGetFactoryFails() {\n        try {\n            MyClassMock1 mockMyClass = new MyClassMock1();\n            mockMyClass.process();\n            fail(\"FactoryException should have been thrown.\");\n        }\n        catch(FactoryException ex) {\n            assertEquals(\"Bad factory instance.\", ex.getMessage());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["unit-testing","jenkins","mocha"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12624030,"title":"Unit tests sometimes failing, sometimes passing","body":"<p>I have a mocha unit test suite.</p>\n\n<p>When I run them locally, everything works fine. When I run them on our Jenkins CI server, they sometimes fail, sometimes pass.</p>\n\n<p>I'm just not able to reproduce why they fail. What might cause this behavior?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","reflection","custom-attributes"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":84,"score":2,"question_id":12658949,"title":"How to check if method has an attribute (with interfaces, casting and abstract)","body":"<p>After reading the post \"<a href=\"http://stackoverflow.com/questions/8817031/how-to-check-if-method-has-an-attribute\">How to check if method has an attribute</a>\" I'm one step to solve a problem that keeps me awake. </p>\n\n<h1>I present the situation :</h1>\n\n<p>( I'm working with ASP.Net MVC 4 )</p>\n\n<p><strong>These interfaces</strong>:</p>\n\n<pre><code>public interface IFlyable\n{\n    ActionResult Fly();\n}    \n\npublic interface IRunnable\n{\n    ActionResult Run();\n}\n</code></pre>\n\n<p><strong>This abstract class</strong> :</p>\n\n<pre><code>public abstract class SuperHero : Controller\n{\n    public void SavePeople()\n    {\n    }    \n}\n</code></pre>\n\n<p><strong>This controller :</strong></p>\n\n<pre><code>public class SuperManController : SuperHero,IFlyable,IRunnable {\n\n    [Authorize]\n    public ActionResult Fly(){\n        // Flying...\n    }    \n\n    [Authorize]\n    public ActionResult Run(){\n        // Running...\n    }    \n\n}\n</code></pre>\n\n<p><strong>This abstract class ( for tests )</strong></p>\n\n<pre><code>[TestClass]\npublic abstract class SuperHeroTest&lt;TSuperHero&gt;{\n\n    protected abstract TSuperHero GetSuperHero();\n\n    [TestMethod]\n    public void IfSuperHeroCanFlyMustHaveAuthorizeAttribute(){\n\n        var superHero=GetSuperHero();\n\n        if(superHero is IFlyable)\n        {\n            var superHeroFlyable = (IFlyable) superHero;\n\n            var have = MethodHasAuthorizeAttribute(() =&gt; superHeroFlyable.Fly());\n\n            Assert.IsTrue(have);\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>And finally this class inherited from <code>SuperHeroTest</code> to test <code>SuperManController</code>:</strong></p>\n\n<pre><code>[TestClass]\npublic class SuperManControllerTest : SuperHeroTest&lt;SuperManController&gt;{\n\n    private SuperManController _superManController;\n\n    public SuperManControllerTest(){\n        _superManController=new SuperManController();\n    } \n\n\n    protected override SuperManController GetSuperHero()\n    {\n        return _superManController;\n    }\n\n}\n</code></pre>\n\n<p><strong>Method <code>MethodHasAuthorizeAttribute</code> is :</strong> (from the post above)</p>\n\n<pre><code>public static MethodInfo MethodOf(Expression&lt;System.Action&gt; expression)\n{\n    MethodCallExpression body = (MethodCallExpression)expression.Body;\n    return body.Method;\n}\n\npublic static bool MethodHasAuthorizeAttribute( Expression&lt;System.Action&gt; expression )\n{\n    var method = MethodOf( expression );\n\n    const bool includeInherited = false;\n    return method.GetCustomAttributes(typeof(AuthorizeAttribute),includeInherited).Any();\n}\n</code></pre>\n\n<h1>My problem is:</h1>\n\n<p>The call <code>MethodHasAuthorizeAttribute(() => superHeroFlyable.Fly())</code> in <code>SuperHeroTest</code> class return <code>false</code> when it should return <code>true</code>.</p>\n\n<p>(The implemented method <code>Fly</code> in class <code>SuperManController</code> has the attribute <code>Authorize</code> ).</p>\n\n<p>I added the attribute <code>Authorize</code> in method <code>Fly</code> into <code>IFlyable</code> and then returns <code>true</code>.</p>\n\n<pre><code>public interface IFlyable\n{\n    [Authorize]\n    ActionResult Fly();\n}  \n</code></pre>\n\n<p>How I can do to make <code>MethodHasAuthorizeAttribute</code> inspect the implementation rather than the interface?</p>\n"},{"tags":["python","unit-testing","google-app-engine","datastore","testbed"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12653980,"title":"gae python changing datastore in testing proces","body":"<p>I solve the problem:</p>\n\n<p>I'm trying to test my app using <code>testbed</code> and <code>webtest</code>. And I want to see how handler method changing my datastore. Then after I start testing, I initialise <code>MyModel</code> instance object testmodel using <code>Testbed</code> and send it to <code>MyHandler</code> <code>MyMethod</code>.</p>\n\n<p>It's going there, <code>MyMethod</code> finds it by gql request and changes it. However, when it returns to test after response - <code>testmodel</code> stand without this changes.</p>\n\n<p>I suppose that this is due to <code>Testbed</code> and <code>init_datastore_v3_stub()</code> and its settings, but cant find any documents for exactly this case.  Can someone help me fix this problem?</p>\n\n<p>My code:</p>\n\n<pre><code>class MyModel(db.Model):\n    name = db.StringProperty()\n    code = db.IntegerProperty()\n\nclass MyHandler(webapp2.RequestHandler):\n\n    def MyMethod(self, name):\n        if self.request.method == 'POST':\n            model = MyModel.gql(\"WHERE name=:1\", name).get()\n            model.code = SOME_CODE\n            model.put()\n</code></pre>\n\n<p>And my tests code:</p>\n\n<pre><code>from google.appengine.ext import testbed\nimport unittest\nimport webtest\nimport MyModel\nfrom main import api_routes '''my WSGIapplication routes '''\n\nclass MyTestClass(unittest.TestCase):\n\n    def setUp(self):\n        app = webapp2.WSGIApplication(routes=api_routes)\n        self.testapp = webtest.TestApp(app)\n        self.testbed = testbed.Testbed()\n        self.testbed.activate()\n        self.testbed.init_datastore_v3_stub()\n        self.testmodel = MyModel(name='testname')\n        self.testmodel.put()\n\n    def tearDown(self):\n        self.testbed.deactivate()\n\n    def testOne(self):\n        url = SOME_URL # which call MyHandler MyMethod\n        params = {'name':'testname'}\n        response = self.testapp.post(url,params)\n        SOMEASSERTS\n</code></pre>\n\n<p>For solving I added get() reques after any response:</p>\n\n<pre><code>def testOne(self):\n        url = SOME_URL # which call MyHandler MyMethod\n        params = {'name':'testname'}\n        response = self.testapp.post(url,params)\n        model = MyModel.gql(\"WHERE name=:1\",'testname').get()\n        self.assertTrue(model.code == SOME_CODE)          \n</code></pre>\n"},{"tags":["database","unit-testing","node.js","mongodb","mocking"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":163,"score":2,"question_id":12526160,"title":"Mocking database in node.js?","body":"<p>How would I mock out the database in my node.js application, which in this case uses <code>mongodb</code> as the backend for a blog REST API ?</p>\n\n<p>Sure, I could set the database to a specific <code>testing</code> -database, but I would still save data and not test my code only, but also the database, so I am actually not doing unit testing but integration testing.<br>\n So what should one do? Create database wrappers as a middle layer between application and db and replace the DAL when in testing?</p>\n\n<pre><code>// app.js  \nvar express = require('express');\n    app = express(),\n    mongo = require('mongoskin'),\n    db = mongo.db('localhost:27017/test?auto_reconnect');\n\napp.get('/posts/:slug', function(req, res){\n    db.collection('posts').findOne({slug: req.params.slug}, function (err, post) {\n        res.send(JSON.stringify(post), 200);\n    });\n});\n\napp.listen(3000);\n</code></pre>\n\n<hr>\n\n<pre><code>// test.js\nr = require('requestah')(3000);\ndescribe(\"Does some testing\", funtion() {\n\n  it(\"Fetches a blogpost by slug\", function(done) {\n    r.get(\"/posts/aslug\", function(res) {\n      expect(res.statusCode).to.equal(200);\n      expect(JSON.parse(res.body)[\"title\"]).to.not.equal(null);\n      return done();\n    });\n\n  });\n));\n</code></pre>\n"},{"tags":["c++","unit-testing","unix","cmake","googletest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":124,"score":1,"question_id":12657596,"title":"Gtest: Undefined References","body":"<p>I am trying to use GoogleTest to test a simple function, but as I run <code>make</code> in my build folder, the compiler throws <code>Undefined Reference</code> error messages at me. I've referenced the gtest header file, so I'm not sure what is wrong. Any ideas? I'm new to the entire subject of both unix and unit testing , so I could very well be missing something simple. Thanks in advance!</p>\n\n<p>Error Messages:</p>\n\n<pre><code>CMakeFiles/Proj2.dir/main.cpp.o: In function `main':\nmain.cpp:(.text+0x1e): undefined reference to `testing::InitGoogleTest(int*, char**)'\nmain.cpp:(.text+0x23): undefined reference to `testing::UnitTest::GetInstance()'\nmain.cpp:(.text+0x2b): undefined reference to `testing::UnitTest::Run()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n\nint main(int argc, char **argv) {\n    ::testing::InitGoogleTest(&amp;argc, argv);\n    return RUN_ALL_TESTS();\n}\n</code></pre>\n\n<p>Test.cpp</p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"Testable.h\"\n\nTEST(GetTwoTest, Two) {\n    EXPECT_EQ(2, GetTwo());\n}\n</code></pre>\n\n<p>Testable.cpp</p>\n\n<pre><code>#include \"Testable.h\"\n\nint GetTwo() {\n    return 3;\n}\n</code></pre>\n\n<p>Here is my CMakeLists.txt file:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.6)\n\nSET(CMAKE_CXX_FLAGS \"-std=gnu++11\") #Turn on C++11 Support\n\nset(FILES_TO_TEST Testable.cpp)\nset(UNIT_TESTS Test.cpp)\nset(MAIN_FILE main.cpp)\n\nadd_subdirectory(gtest) #Build all the gtest stuff\ninclude_directories(gtest/include)\ninclude_directories(.)\nadd_library(codeToTest ${FILES_TO_TEST})\n\nadd_executable(Proj2 ${MAIN_FILE})\ntarget_link_libraries(Proj2 codeToTest)\n\nadd_executable(unit-test ${UNIT_TESTS})\ntarget_link_libraries(unit-test gtest gtest_main rt pthread codeToTest)\n</code></pre>\n"},{"tags":["unit-testing","maven","logging","solr","solrj"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12570154,"title":"How to disable solr logging with SolrJ?","body":"<p>I am using SolrJ for the purposes of an embedded solr server for my unit tests.</p>\n\n<p>The problem is that my maven output is littered with solr logs that I don't really want. For example, I am purposefully triggering a bad query as part of my test. My test passes, but it's very hard to see that because the screen is filled with Solr errors.</p>\n\n<p>I'm not clear how to get around this with SolrJ. I'd like to do this as part of my POM file so that if a test fails, a dev can edit the POM to expose more information.</p>\n\n<p>EDIT:</p>\n\n<p>Solr is instantiated this way:</p>\n\n<pre><code>System.setProperty(\"solr.solr.home\", \"solr/\")\ndef coreInitter = new CoreContainer.Initializer()\ndef core = coreInitter.initialize()\nthis.server = new EmbeddedSolrServer(core, \"\")\n</code></pre>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","rspec"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12656707,"title":"Get extra info within after(:each) in RSpec","body":"<p>I'm using RSpec and I want to get result (passed or not), class name, test name (or description) <strong>and error message</strong> (if present) of each test after once it finished.</p>\n\n<p>So here is a pretty simple code </p>\n\n<pre><code>  describe MyClass do\n\n    after :each do\n      #how do I know a test passed, its name, class name and error message?\n    end\n\n    it \"should be true\" do \n        5.should be 5\n    end\n\n    it \"should be false\" do \n        5.should be 6\n    end\n\n   end\n</code></pre>\n\n<p>Your suggestions?</p>\n"},{"tags":["android","unit-testing","robotium"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":11684346,"title":"How to Type Chars From Android KeyBoard(Virtual) in Robotium","body":"<p>please give any suggestion except than solo.clickOnText(). It doesn't work.</p>\n\n<p>and also I don't want to use enterText() either, as that is not a good alternative.</p>\n"},{"tags":["unit-testing","tdd","anti-patterns"],"answer_count":30,"favorite_count":130,"up_vote_count":133,"down_vote_count":3,"view_count":8367,"score":130,"question_id":333682,"title":"TDD Anti-patterns catalogue","body":"<p><strong><a href=\"http://en.wikipedia.org/wiki/Anti-pattern\" rel=\"nofollow\">anti-pattern</a></strong> : there must be at least two key elements present to formally distinguish an actual anti-pattern from a simple bad habit, bad practice, or bad idea:</p>\n\n<ul>\n<li>Some repeated pattern of action, process or structure that initially appears to be beneficial, but ultimately produces more bad consequences than beneficial results, and</li>\n<li>A refactored solution that is clearly documented, proven in actual practice and repeatable.</li>\n</ul>\n\n<p>Vote for the TDD anti-pattern that you have seen \"in the wild\" one time too many.<br />\n<a href=\"http://blog.james-carr.org/2006/11/03/tdd-anti-patterns/\" rel=\"nofollow\">The blog post by James Carr</a> and   <a href=\"http://tech.groups.yahoo.com/group/testdrivendevelopment/message/20745\" rel=\"nofollow\">Related discussion on testdrivendevelopment yahoogroup</a></p>\n\n<p>If you've found an 'unnamed' one.. post 'em too. <strong>One post per anti-pattern please</strong> to make the votes count for something.</p>\n\n<p><em>My vested interest is to find the top-n subset so that I can discuss 'em in a lunchbox meet in the near future.</em></p>\n"},{"tags":["javascript","unit-testing","qunit"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":583,"score":2,"question_id":9431597,"title":"Unit testing AJAX requests with QUnit","body":"<p>We are trying to implement QUnit JavaScript tests for a JS-heavy web app. We are struggling to find a way to successfully test methods that involve jQuery AJAX requests. For example, we have the following constructor function (obviously this is a very simplistic example):</p>\n\n<pre><code>var X = function() {\n    this.fire = function() {\n        $.ajax(\"someURL.php\", {\n            data: {\n                userId: \"james\"\n            },\n            dataType: \"json\",\n            success: function(data) {\n                //Do stuff\n            }\n        });\n    };\n};\nvar myX = new X();\nmyX.fire();\n</code></pre>\n\n<p>We are trying to find a way to test the <code>fire</code> method, preferably with a stubbed URL instead of the real <code>someURL.php</code>. </p>\n\n<p>The only obvious solution to me at the moment is add the URL, and the <code>success</code> callback, as arguments to the constructor function. That way, in the test, we can create a new instance of <code>X</code> and pass in the stub URL, and a callback to run when the stub returns a response. For example:</p>\n\n<pre><code>test(\"Test AJAX function\", function() {\n    stop();\n    var myX = new X();\n    //Call the AJAX function, passing in the stub URL and success callback\n    myX.fire(\"stub.php\", function(data) {\n        console.log(data);\n        start();\n    });\n});\n</code></pre>\n\n<p>However, this doesn't seem like a very nice solution. Is there a better way?</p>\n"},{"tags":["c++","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":205,"score":1,"question_id":3665089,"title":"How to write unit tests for widget code?","body":"<p>Now I'm experiencing a problem about in testing,\nWe have developed a platform with C++, and this platform include 2 layers, one is engine layer, the other one is widget layer, and I'm a dev in widget layer, \nThe widget layer used by client app (those app is our product), now the problem is this:</p>\n\n<p>1, We want to add some unit test for widget layer to enhance our whole platform quality and reliability, but in fact, this platform has been release for several versions, so now, what's kind of unit test could be most suitable for our project? To add some unit test in kinds of validation/bad input/path cover/stress or to add some unit test that simulate the client scenario? I think the former one will enhance code coverage very well, but i also think about that if we can simulate how our client using those api in their application, those unit test maybe more make sense for our platform, right?</p>\n\n<p>2, just as i mentioned before, i'm in widget layer which is above and depended on engine layer, but we has no authority for engine layer code, and almost all widget API could call in engine layer, so it's difficult for us to implement good path cover unit test for those api, because we have no idea(and no document)about engine layer code, but i still want to ask, is there any ways, tools or frameworks could make someone write high quality unit test to cover path for those black box API?</p>\n"},{"tags":["c#","visual-studio","unit-testing","network-drive","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12655187,"title":"Test Explorer Not Showing List of Unit Tests with Network Drive","body":"<p>I had a simple C# program that had a set of Unit Tests.  This was developed on Visual Studio 2010.  Now on another computer I tried to reload this solution with Visual Studio 2012 and run the tests.  I was able to rebuild the solution successfully however none of the unit tests show up in Test Explorer.  The Visual Studio project (solution) was located on a LaCie Ethernet network drive.  I copied the entire solution to my local C: drive, closed the solution from the network drive and reopened the copied one on local C: drive.  Now when I build solution Test Explorer shows all tests.  I went back and opened the copy on the network drive and again Test Explorer shows no tests. It says to build the solution to see a list of tests, but after successfully building the solution which includes the main project and the unit test project it still displays the same message. See image below:\n<img src=\"http://i.stack.imgur.com/DErA0.png\" alt=\"enter image description here\"></p>\n\n<p>Why is it having project located on network drive causes Unit Testing to fail like this with no failure message at all?</p>\n"},{"tags":["unit-testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":7337603,"title":"Organizing JUnit tests","body":"<p>In the past I would make a test suite per package, that would hold all of the tests in that package.\nthen I would roll up all of the package test suites into a master test suite, which would hold all of the package test suites.\nAnyone know of a better idea?</p>\n"},{"tags":["ruby-on-rails","ruby","unit-testing","testunit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12652714,"title":"Handle any error in Ruby Test::Unit","body":"<p>A question is similar to <a href=\"http://stackoverflow.com/questions/12542073/handle-any-error-in-nunit/12542135\">Handle any error in NUnit</a></p>\n\n<p>Now I'm using Ruby <code>Test::Unit</code> framework and want to handle a result of <strong>each</strong> test at <code>teardown</code>. By handle I mean getting a test's name, a status (success/fail) and a message if a test failed. Of course, I want to do that <strong>without</strong> modifying the body of a test method.</p>\n\n<p>How can I reach it?</p>\n\n<p><strong>UPDATE</strong>: Here is what could do. The only difficult I have is that I'm not aware how to get error message (like <code>&lt;15&gt; expected but was &lt;151&gt;</code>)</p>\n\n<pre><code>  def teardown\n     super\n     puts \"self.passed? - #{self.passed?}\" \n     puts \"self.class.name - #{self.class.name}\"\n     puts \"self.method.name - #{self.__name__}\"\n     #puts \"self.message - #{self.message.methods}\" #is not what I need!\n\n  end\n</code></pre>\n"},{"tags":["ruby-on-rails-3","unit-testing","testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":12651476,"title":"strategy to add tests to a no-tests rails 3.0 app prior to migrating to 3.2?","body":"<p>For a new client I'm going to be (a) converting a Rails 3.0/ruby 1.9.2 app to Rails 3.2 and (b) moving their app from mysql to postgres and (c) moving the hosting to Heroku, then (d) adding a fair number of features. The current code base is moderate size (12K lines of code, 500 methods).</p>\n\n<p>The app has no tests... it's been a very small team manually testing as they code. </p>\n\n<p>It seems the majority of posts on SO and elsewhere say that trying to add test coverage to existing, working code is pointless, and that failing tests should be added when fixing bugs and adding features.</p>\n\n<p>But it seems to me that prior to migrating the platform would be the right time to introduce SOME degree of test coverage. There's a lot of stuff that could get broken en route from 3.0 to 3.2, so at a minimum I'd like to devote time up front to (at a minimum) putting some 'smoke tests' in place before the transition.</p>\n\n<p>I'm not going to be able to introduce a lot of test coverage at this stage... but I have a budget of 120 hours to pre-migration test development... so what will give me the most bang for the buck (given a working app that is about to significant changes to its running environment &amp; platform)?</p>\n\n<p>Should I stick to building some integration test scenarios of factory users creating accounts and using the system (create account, add some data, browse the 20-something different screens)? </p>\n\n<p>Or should I take the opposite approach and focus on unit tests for the more complex models and methods?</p>\n"},{"tags":[".net","unit-testing","moles"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":297,"score":4,"question_id":5514318,"title":"How to run unit tests written with Microsoft Moles without installing it?","body":"<p>Our team is working on writing unit tests for a big .Net project, using “Visual Studio 2010” IDE and “NUnit” (v. 2.5.9) unit-testing framework. Also we use “Microsoft Moles” type-isolating framework. After we finished writing tests for specific module we have to build all the modules and run unit tests on different machine where the Moles is not installed.</p>\n\n<p>Is it possible to run unit tests written with moles without actually installing moles framework but only by copying and/or registering (in GAC or in System Registry) specific components? And if so, what are these components?</p>\n\n<hr>\n\n<p>For example, we have found out that it needs to register “Microsoft.ExtendedReflection.ClrMonitor.x86” in the Windows registry in order to run unit tests.</p>\n"},{"tags":["java","bash","unit-testing","input","io-redirection"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12648101,"title":"Bash input redirection with newlines","body":"<p>So for an assignment at school I am required to make a program in java that manages some students at a college, the user may invoke a number of function, but I started by testing 'add'.</p>\n\n<p>My prof recommends that I use input redirection, because I can easily test the program over and over, without much typing.  Now here is the issue.</p>\n\n<pre><code>echo `&lt; input.txt`\nadd Student Name 123 Street,City,Province,Postal Code q\n#Input rediraction ate my newlines\ncat input.txt\nadd\nStudent Name\nStreet,City,Province,Postal Code\nq\n#What I actually want to run\njava -cp . TestCollege &lt; input.txt #fail horribly\n</code></pre>\n\n<p>As you can see bash removes the newline characters I use to delimit my input, and thus my program crashes, because when you run it in interactive mode, Scanner.getLine() just blocks until input occurs.</p>\n\n<p>Any idea how I can give my program the input with the newlines, it seems to work fine in windows \"cmd\" but not in \"bash\".</p>\n"},{"tags":["php","html","unit-testing","templates"],"answer_count":5,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":492,"score":7,"question_id":3429218,"title":"Unit tests for HTML Output?","body":"<p>This may be a dumb question, but do you make unit tests for the HTML output of your PHP functions/scripts?</p>\n\n<p>I try to keep my HTML and my PHP separate - i.e. HTML includes with placeholders, and functions for certain recurring elements (tabular data / any sort of looped output) - but I'm not sure how to go about verifying this.</p>\n\n<p>Is there a standard way to go about such things, or is it mainly a matter of using regular unit tests on functions which <em>create</em> the inserted content, and then making sure it looks correct in the browser/W3C Validator?</p>\n\n<p>Thanks.</p>\n\n<p>Edit: I guess a corollary to this would be: are these sorts of unit tests even worth having? If you're keeping your content and structure properly separated, then you would really only be testing a handful of includes in very limited scenarios (presumably, anyway). Is it really worth it to semi-hand-craft full pages just to have a file to compare to?</p>\n"},{"tags":["unit-testing","language-agnostic","tdd","mocking"],"answer_count":9,"favorite_count":7,"up_vote_count":27,"down_vote_count":0,"view_count":6388,"score":27,"question_id":6484,"title":"How do you mock a Sealed class?","body":"<p><a href=\"http://www.google.com/search?q=how%20to%20mock%20sealed%20class\" rel=\"nofollow\">Mocking sealed classes</a> can be quite a pain.  I currently favor an <a href=\"http://en.wikipedia.org/wiki/Adapter_pattern\" rel=\"nofollow\">Adapter pattern</a> to handle this, but something about just keeps feels weird.  </p>\r\n\r\n<p><strong>So, What is the best way you mock sealed classes?</strong></p>\r\n\r\n<p><em>Java answers are more than welcome</em>.  In fact, I would anticipate that the Java community has been dealing with this longer and has a great deal to offer.</p>\r\n\r\n<p>But here are some of the .NET opinions:</p>\r\n\r\n<ul>\r\n<li><a href=\"http://haacked.com/archive/2007/08/19/why-duck-typing-matters-to-c-developers.aspx\" rel=\"nofollow\">Why Duck Typing Matters for C#\r\nDeveloepers</a> </li>\r\n<li><a href=\"http://cs.rthand.com/blogs/blog_with_righthand/archive/2008/07/22/Creating-wrappers-for-sealed-and-other-types-for-mocking.aspx\" rel=\"nofollow\">Creating wrappers\r\nfor sealed and other types for\r\nmocking</a></li>\r\n<li><a href=\"http://weblogs.asp.net/cibrax/archive/2008/05/16/unit-tests-for-wcf.aspx\" rel=\"nofollow\">Unit tests for WCF (and Moq)</a></li>\r\n</ul>"},{"tags":["c#","unit-testing","tdd"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":84,"score":6,"question_id":12281927,"title":"How can I keep my unit tests independent of each other in this simple case?","body":"<p>I'm writing a small game in C# using Test Driven Development approach. I'm facing a problem:</p>\n\n<p>I have a class <code>CheckersBoard</code>:</p>\n\n<pre><code>public class CheckersBoard\n{\n    private const string InitialBoardPattern = \"B-B-B-B-\" +\n                                               \"-B-B-B-B\" +\n                                               \"B-B-B-B-\" +\n                                               \"--------\" +\n                                               \"--------\" +\n                                               \"-W-W-W-W\" +\n                                               \"W-W-W-W-\" +\n                                               \"-W-W-W-W\";\n\n    public SquareStatus[,] Squares { get; private set; }\n\n    public CheckersBoard(IBoardGenerator boardGenerator)\n    {\n        Squares = boardGenerator.GenerateFromPattern(InitialBoardPattern, 8, 8);\n    }\n\n    //....\n}\n</code></pre>\n\n<p>And a class <code>BoardGenerator</code>:</p>\n\n<pre><code>public class BoardGenerator : IBoardGenerator\n{\n\n    public SquareStatus[,] GenerateFromPattern(string pattern, int width, int height)\n    {\n        //....\n    }\n\n}\n</code></pre>\n\n<p><code>BoardGenerator</code> allows me to initialize <code>CheckersBoard</code> in a very readable way. So, I really would like to use <code>BoardGenerator</code> in my unit tests to avoid ugly array initialization. </p>\n\n<p>But it's against the rule that says that I must keep all my unit tests independent of each other. If the test of <code>GenerateFromPattern</code> fails, that will produce a \"cascade\" effect and all the tests which use <code>GenerateFromPattern</code> will fail too.</p>\n\n<p>This is the first time I have ever used unit tests so I'm a little bit confused. How can I avoid this problem? Is there something wrong with my design? </p>\n"},{"tags":["ruby-on-rails","unit-testing","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12643913,"title":"Rails \"validates inclusion\" strange behavior in unit test","body":"<p>I have a model, Address, with a type attribute and the following validations:</p>\n\n<pre><code>class Address &lt; ActiveRecord::Base\n\n  TYPES = {\n    main: 1,\n    warehouse: 2,\n    invoicing: 3 \n  }\n\n  attr_accessible :type\n\n  # validations\n  validates :type, presence: true\n  validates :type, :inclusion =&gt; { :in =&gt; Address::TYPES.values,:message =&gt; \"%{value} is not a valid address type\" }\nend\n</code></pre>\n\n<p>The fact is that when I run this validation in rails console, I woks as expected:</p>\n\n<pre><code>1.9.3p194 :001 &gt; a = Address.first\n1.9.3p194 :007 &gt; a.address_type = 4\n=&gt; 4 \n1.9.3p194 :008 &gt; a.valid?\n=&gt; false \n</code></pre>\n\n<p>I have created a unit test to test this, as follows:</p>\n\n<pre><code>test \"address type should have a valid value\" do\n  address = Address.first\n  address.address_type = 4\n  assert address.invalid?, \"address is valid with an invalid type value\"\nend\n</code></pre>\n\n<p>But the test is executing just OK with no failures.\nIs there something I'm missing or doing wrong in the test so it's not working as when I try it on the rails console?</p>\n\n<p>Tank you very much in advance.</p>\n"},{"tags":["python","django","unit-testing","nose","django-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12487337,"title":"optimizing setup and teardown for sample django model using django_nose and django-dynamic-fixture","body":"<p>Given my model is following:</p>\n\n<pre><code>class Author(models.Model):\n    name = models.CharField(max_length=100)\n    description = models.TextField()\n\nclass Book(models.Model):\n    title = models.CharField(max_length=100)\n    author = models.ManyToManyField(Author) \n</code></pre>\n\n<p>I am using <a href=\"https://github.com/paulocheque/django-dynamic-fixture\" rel=\"nofollow\">django-dynamic-fixture</a> to generate model fixtures easily for the test. I am also using <a href=\"https://github.com/jbalogh/django-nose\" rel=\"nofollow\">django_nose</a> which helps me run and manage tests pretty nicely.\nHaving setup the test_runner in settings.py file and putting all installables at place. </p>\n\n<p>To generate a model as above the test should be </p>\n\n<pre><code>from django_dynamic_fixture import G\n\n\nclass BookModelTest(TestCase):\n\n     def test_book_creation(self):\n         author1 = G(Author)\n         author2 = G(Author)\n         book = G(Book, author=[author1])\n         book_obj = Book.objects.all()\n         self.assertEquals(book_obj.count(), 1)\n         self.assertEquals(list(book_obj[0].author), [author1])\n         self.assertEquals(book_obj[0].title, book.title)\n         self.assertNotEquals(list(book_obj[0].author), [author1])\n\n    def another_test(self):\n       \"Here as well i need the same, author1, author2 and book\n</code></pre>\n\n<p>Also if i write      </p>\n\n<pre><code>class AuthorModelTest(TestCase):\n\n   def test_some_stuff()             \n</code></pre>\n\n<p>I would be needing some fixture value. \nSo following are the queries i had:</p>\n\n<p>How do i keep my fixture generation DRY. Meaning not creating book and author fixtures from <code>G</code> in each of the functions?</p>\n\n<p>django_nose helps to optimize the setUp and tearDown methods and improves speed, how can I use them here? Just putting *django_nose.FastFixtureTestCase* will take care of setUp tearDown pains? Or do I need to use <em>TransactionTestCase</em>? How do I optimize the above fixture and test? </p>\n"},{"tags":["java","unit-testing","ampq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":353,"score":0,"question_id":2710270,"title":"Simple Java AMPQ server","body":"<p>Are there any simple AMPQ server/broker implementation written in Java?</p>\n\n<p>I need to use it for local integration tests.  I would like to start it from ant/maven, and I don't need any features like clustering, persistence, performance and so on. Just a mock RabbitMQ-like instance, without installation (just as a dependency at maven pom) and configuration.</p>\n"},{"tags":["unit-testing","grails","groovy","httpbuilder"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12534335,"title":"Groovy HTTPBuilder Mocking the Client","body":"<p>This question is closely related to <a href=\"http://stackoverflow.com/questions/9101084/groovy-httpbuilder-mocking-the-response\">this question</a>. The difference is that I'd like to follow the recommended approach of mocking the client. So, I have the following HTTPBuilder defined:</p>\n\n<pre><code>protected readUrl() {\n    def http = new HTTPBuilder(\"http://example.com\")\n    def status = http.request(Method.GET, ContentType.JSON) {req -&gt;\n        response.success = {resp, json -&gt;\n            result = json.toString()\n            new Success&lt;String&gt;(result)\n        }\n        response.'401' = {resp -&gt;\n            final String errMsg = \"Not Authorized\"\n            new Failed(Failable.Fail.ACCESS_DENIED, errMsg)\n        }\n        response.failure = {resp -&gt;\n            final String errMsg = \"General failure ${resp.statusLine}\"\n            new Failed(Failable.Fail.UNKNOWN, errMsg)\n        }\n    }\n}\n</code></pre>\n\n<p>What I'd like to do is find a way to unit test this code block. I wanted to mock the response so I could specifically set the response codes, if possible.  Could someone please show me a way to do this?</p>\n"},{"tags":["unit-testing","phpunit","code-coverage"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":12641870,"title":"Generate new code coverage for a single file without clearing all other coverage reports in PHPUnit","body":"<p><strong>First the question:</strong>\nIn PHPUnit 3.5, is there a way to generate a coverage report for a single test without the report for the entire test suite being overwritten. I.e. only update the coverage report for the affected files? I still want the output to go to the same folder.</p>\n\n<p><strong>For those that want a bit of background:</strong></p>\n\n<p>Working with PHPUnit 3.5, I have a project which retroactively needs to be covered with unit tests. Now in order to know which classes still need tests I run the entire test suite and generate a html coverage report on it. Because running the complete suite takes some time, I would like to avoid having to run it every time I want to check which tests still need to be implemented. But at the same time I also want the coverage report for the unit test that I'm currently working on, so that I can make sure I'm executing each line of code in a class (this of course is very fast back and forth, so it makes no sense to run the entire suite just to generate this report). I can generate the report for a single test, and I can generate it for the entire suite. But what I'm looking for is a hybrid, which would allow me to first generate a report for the entire suite, and then just update the report with coverage information for the test I'm currently working on.</p>\n\n<p>I've set up a ruby script which will simply run the test for the current file I'm working on and generate a coverage report on that file. But working like that, it always resets the coverage report for all other files also, even if the test did not execute anything in those classes.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","unit-testing","python-mock"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12621049,"title":"Patching a function with Mock only for one module?","body":"<p>I need to patch <code>os.listdir</code> and other <code>os</code> functions to test my Python function. But when they're patched, the <code>import</code> statement fails. Is it possible to patch this function only inside that single module, the real one, and leave tests.py work normally?</p>\n\n<p>Here's an example that breaks <code>import</code>:</p>\n\n<pre><code>import os\nfrom mock import patch\n\n# when both isdir and isfile are patched\n# the function crashes\n@patch('os.path.isdir', return_value=False)\n@patch('os.path.isfile', return_value=False)\ndef test(*args):\n    import ipdb; ipdb.set_trace()\n    real_function(some_arguments)\n    pass\n\ntest()\n</code></pre>\n\n<p>I want <code>real_function</code> to see a patched <code>os.path</code>, and tests to see normal functions.</p>\n\n<p><strong><a href=\"http://pastebin.com/Vp1p511V\" rel=\"nofollow\">here's the traceback</a></strong></p>\n"},{"tags":["visual-studio-2010","wcf","unit-testing","mstest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12640791,"title":"Missing app.config when running test with MSTest.exe","body":"<p>For my web application I have a test for login users. The login is achieved with a WCF service that asks the backend database. For using the WCF service I need an endpoint that is defined in the <code>web.config</code> of my web application. For running the test I need the same endpoint in the test project's <code>app.config</code>.  </p>\n\n<p>So far it works when I run the test within Visual Studio. But when I run that same test on our CruiseControl server the test fails with <code>Could not find default endpoint element that references contract...</code>. So actually the <code>app.config</code> is not loaded.    </p>\n\n<p>I have the same behavior locally when calling the <code>MSTest.exe</code>.    </p>\n\n<p>I tried a lot of things like using <code>[DeploymentItem(\"app.config\")]</code>, using <code>testsettings</code>, copying the <code>app.config</code> by <code>Copy to Output Directory</code> and so on. No success.    </p>\n\n<p>Anyone having an idea?    </p>\n\n<p>Simon</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":12640275,"title":"Exit tests on condition in setUp","body":"<p>I have a set of tests implemented with unittest, which are run automatically. I would like to run them at most once an hour and I have a method checking this condition, and returns True (if it's ok to run them) or False (if should exit tests).</p>\n\n<p>How can I integrate this with unittest such that setUpClass or setUp methods exit (and do not fail) if the check function returns False?</p>\n\n<p>PS: I am using python 2.6, so I can't use <a href=\"http://docs.python.org/py3k/library/unittest.html#skipping-tests-and-expected-failures\" rel=\"nofollow\">these</a></p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","unit-testing","process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12579500,"title":"Exe Process only works in VS2010 unit tests, not from MVC app","body":"<p>I have a class which handles execution of an exe process, which is a console application (written in Fortran!). When running this program, the user must first enter the name of an input file (which must exist in the same location as the exe), and an output file (which does not yet exist, but is produced by the exe.</p>\n\n<p>In my unit tests for the Execute method (see below), everything works fine. The output file is produced correctly. However when I hit this method from my MVC application, the exe fails to find the input file, even though it does exist. The only explanation I can think of for this is that the \"TestResults\" folders automatically created by VS2010 are different somehow in terms of permissions, or that the unit testing process is different somehow.</p>\n\n<pre><code>    public void Execute(string inputFileName, string outputFileName, int timeoutMilliseconds)\n    {\n        if (outputFileName == null)\n            throw new ArgumentNullException(\"outputFileName\");\n        else if (inputFileName == null)\n            throw new ArgumentNullException(\"inputFileName\");\n\n        if (outputFileName == string.Empty)\n            throw new ArgumentException(\"outputFileName must not be an empty string\");\n        else if (inputFileName == string.Empty)\n            throw new ArgumentException(\"inputFileName must not be an empty string\");\n\n        if (!File.Exists(ConfigurationManager.AppSettings[\"dataPath\"]  + inputFileName))\n            throw new FileNotFoundException(\"File not found.\", inputFileName);            \n\n        Process p = new Process();\n        p.StartInfo = GetProcessStartInfo();\n        p.Start();\n\n        string output = \"\";\n\n        // Read up to line where program asks for input file name.\n        while (output == \"\")            \n            output = p.StandardOutput.ReadLine();            \n\n        // Write the input file name.\n        p.StandardInput.WriteLine(inputFileName);\n\n        // Read up to line where program asks for output file name.\n        output = \"\";\n        while (output == \"\")            \n            output = p.StandardOutput.ReadLine();            \n\n        // Write the output file name.\n        p.StandardInput.WriteLine(outputFileName);\n\n        if(!p.WaitForExit(timeoutMilliseconds))\n            throw new ApplicationException(\"The process timed out waiting for a response.\");            \n    }\n\n    private ProcessStartInfo GetProcessStartInfo()\n    {\n        var startInfo = new ProcessStartInfo();\n        startInfo.CreateNoWindow = true;\n        startInfo.UseShellExecute = false;\n        startInfo.RedirectStandardOutput = true;\n        startInfo.RedirectStandardInput = true;\n        startInfo.FileName = _exeFileLocation;\n        startInfo.WindowStyle = ProcessWindowStyle.Hidden;            \n        return startInfo;\n    }\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I have discovered that the unit test also fails if I try to run the process from a location on my C drive. In the code below if I set \"dataPath\" to a hard disk location (e.g. \"C:\\DATALOCATION\"), the process fails saying it can't locate the input file. However if I leave \"dataPath\" in the config to an empty string, the unit test automatically runs the process from a subdirectory of the TestResults folder, and all works!</p>\n\n<pre><code>    [TestMethod]\n    public void ExeRunnerTest()\n    {\n        var studyData = // populate study data here\n        var writer = new StudyDataFileWriter(studyData);\n\n        // Write input\n        string fileName = writer.WriteToFile();\n\n        // Run \n        var exeRunner = new ExeRunner(ConfigurationManager.AppSettings[\"dataPath\"] + \"myProcess.exe\");\n        exeRunner.Execute(fileName, \"outputFile\", 10000);\n\n        // Read output\n        IStudyOutputFileReader reader = new StudyOutputFileReader(ConfigurationManager.AppSettings[\"dataPath\"] + \"outputFile\");\n        StudyOutput output = reader.Read();\n\n        // Tests\n        Assert.AreEqual(1, output.ConsumerSummary.ConsumerTypes.Count());\n    }\n</code></pre>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12625002,"title":"Unit test for method that calls multiple other methods using Mockito","body":"<p>Perhaps I have completely fallen short in my search, but I cannot locate any documentation or discussions related to how to write a unit test for a Java class/method that in turn calls other non-private methods.  Seemingly, Mockito takes the position that there is perhaps something wrong with the design (not truly OO) if a spy has to be used in order to test a method where mocking internal method calls is necessary.  I'm not certain this is always true.  But using a spy seems to be the only way to accomplish this.    For example, why could you not have a \"wrapper\" style method that in turn relies on other methods for primitive functionality but additionally provides functionality, error handling, logging, or different branches dependent on results of the other methods, etc.?</p>\n\n<p>So my question is two-fold:</p>\n\n<ol>\n<li>Is it poorly designed and implemented code to have a method that internally calls other methods?</li>\n<li>What is the best practice and/or approach in writing a unit test for such a method (assuming it is itself a good idea) if one has chosen Mockito as their mocking framework? </li>\n</ol>\n\n<p>This might be a difficult request, but I would prefer for those who decide to answer to not merely re-publish the Mockito verbiage and/or stance on spies as I already am aware of that approach and ideology.  Also, I've used Powermockito as well.  To me, the issue here is that Mockito developed this framework where additional workarounds had to be created to support this need.  So I suppose the question I am wanting an answer to is if spies are \"bad\", and Powermockito were not available, how is one supposed to unit test a method that calls other non-private methods?   </p>\n"},{"tags":["unit-testing","mocking","moq"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":118,"score":4,"question_id":12580015,"title":"How to mock static methods in c# using MOQ framework?","body":"<p>I have been doing unit testing recently and i successfully mocked various scenario with using MOQ framework and MS Tests by creating unit testing. As i know we can't do test private methods but using reflection but i want to know how can we test and mock unit tests by using MOQ framework.</p>\n"},{"tags":["unit-testing","testing","integration-testing","system-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":64,"score":-2,"question_id":11729836,"title":"Types of techniques used in each testing method","body":"<p>I have been research on what is unit testing, integration testing and system testing.</p>\n\n<p>I am writing a thesis on an exam system I am creating using php, jquery, javascript and mysqli programming. It is basically an exam system which connects to the database where the teachers are able to create exams and students take the created exams.</p>\n\n<p>Anyway what my question is that does anyone have an examples or know any useful websites of different techniques to use to be able to fulfil these types of testing methods. If you can name these procedures then I will be more than happy to research those methods and be able to include those in my testing methods in my thesis.</p>\n\n<p>When you provide an example or name the techniques, can you state if they are either unit testing, integration testing and system testing.</p>\n\n<p>Thank you very much :)</p>\n"},{"tags":["java","unit-testing","testing"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":151,"score":1,"question_id":11731053,"title":"Code testing for beginners - how to do?","body":"<p>Lets say that I have a lot of nested loops (3-4 levels) in a java method and each of these loops can have some if-else blocks. How can I check if all these things are working properly ? I am looking for a logical way to test this instead of using a brute force approach like substituting illegal values.</p>\n\n<p>EDIT:\nCan you also suggest some good testing books for beginners ?  </p>\n"},{"tags":[".net","unit-testing","code-coverage"],"answer_count":13,"favorite_count":24,"up_vote_count":63,"down_vote_count":0,"view_count":10468,"score":63,"question_id":38360,"title":"Can you recommend an alternative for NCover?","body":"<p>I'm looking for a good .Net code coverage alternative to NCover (insufficient .Net 3.5 coverage and now pay-for) or VSTS (way too expensive).</p>\n\n<p>We currently test with NUnit, but could switch to something with a similar 'layout' for its text fixtures if it were better integrated.</p>\n"},{"tags":["visual-studio-2010","unit-testing","relative-path","absolute-path"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12633534,"title":"Data Driven Unit Testing","body":"<p>Following code is used to inject data to the unit test from a CSV file. </p>\n\n<p>[DataSource(\"Microsoft.VisualStudio.TestTools.DataSource.CSV\", \"|DataDirectory|\\CalculatePowerInputFraction05.csv\", \"CalculatePowerInputFraction05#csv\", DataAccessMethod.Sequential), DeploymentItem(\"Simulation.Test\\CalculatePowerInputFraction05.csv\"), TestMethod]</p>\n\n<p>public void CalculatePowerTest3()\n{  }</p>\n\n<p>I am setting the above properties by</p>\n\n<p>Right Click on the test in test view -> Properties -> Connection String -> Choose CSV file</p>\n\n<p>The problem I am facing is, |DataDirectory| contains absolute path. I am unable to run the tests in any other system. Is there any other way to provide input to TestContext so that problem with absolute path can be solved by giving relative path? </p>\n"},{"tags":["vb.net","unit-testing","events"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12599835,"title":"How to manupilate parameters/arguments parsed through Raised Events?","body":"<p>I have this text loader class that I'm trying to write tests for. And one of it's methods does a RaiseEvent with a CancelEventArgs parsed in as an argument, so something like this:</p>\n\n<pre><code>Private Sub FireThisEvent()\n    cancelEvent created here\n    RaiseEvent HelloWorld(cancelEvent)\n\n    If cancelEvent.Cancel Then\n        'do smthg\n    End If\nEnd Sub\n</code></pre>\n\n<p>The handler for <code>HelloWorld</code> event is my UI class that makes a pop-up for the user to \ndecide Yes or No, which then sets <code>cancelEvent.Cancel</code> to either <code>True</code> or <code>False</code>. And then the above method checks on <code>cancelEvent</code> and does an action accordingly.</p>\n\n<p>My question is, since I'm only testing the loader class (and not the UI), how do I manipulate the <code>cancelEvent</code> after the event is raised so that I can test for when <code>cancelEvent.Cancel</code> is <code>True</code> and then , when it is <code>False</code>. Thank you.</p>\n\n<p>Would I have mock the UI class?</p>\n"},{"tags":["c#","visual-studio-2010","unit-testing","mediator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12633065,"title":"Unit Test methods that contain a mediator using c#","body":"<p>I am currently unit testing a university register system, while it always has error when a method I am going to test contains a mediator which will contact to the University with served as a mediator. Is there any ideas of how to test this method? </p>\n\n<p>The method is:</p>\n\n<pre><code>public void SelectCourse(List&lt;Course&gt; courses)\n    {\n        if (this.IsFullTime)\n        {\n            while (_CurrentCourses.Count &lt; LEAST_NUM_OF_COURSES_FULLTIME)\n            {\n                Random rand = new Random();\n                byte[] b = new byte[1];\n                rand.NextBytes(b);\n                int i = rand.Next(courses.Count);\n                Course c = courses.ToArray()[i];\n                ((University)mediator).RegisterStudentForCourse(this, c);\n            }\n        }\n        else\n        {\n            while (_CurrentCourses.Count &lt; LEAST_NUM_OF_COURSES_PARTTIME)\n            {\n                Random rand = new Random();\n                byte[] b = new byte[1];\n                rand.NextBytes(b);\n                int i = rand.Next(courses.Count);\n                Course c = courses.ToArray()[i];\n\n                // I always //has unit test error with this line!!:\n                ((University)mediator).RegisterStudentForCourse(this, c);\n            }\n        }\n        System.Console.WriteLine(\"Student: \"\n                                 + this.Name \n                                 + \", with student number: (\" \n                                 + this.StudentNumber \n                                 +  \") registered.\");\n    }\n</code></pre>\n"},{"tags":["unit-testing","integration-testing","qa"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":1034,"score":2,"question_id":477911,"title":"What are the challenges you have faced in writing integration tests?","body":"<p>What are the challenges you have faced in writing integration tests? Does writing unit tests help in writing integration tests?</p>\n"},{"tags":["spring","unit-testing","spring-mvc","spring-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12622979,"title":"Trying to pass objects to controller(Spring MVC)","body":"<p>I am trying to test my controller. Spring populates my Profile object but it is empty. I can set the email before the call bu it still is null. How to jag pass a Profile in a proper way?</p>\n\n<pre><code>    private MockHttpServletRequest request;\n    private MockHttpServletResponse response;\n\n    @Autowired\n    private RequestMappingHandlerAdapter handlerAdapter;\n\n    @Autowired\n    private RequestMappingHandlerMapping handlerMapping;\n\n    @Before\n    public void setUp() throws Exception {\n        this.request = new MockHttpServletRequest();\n        request.setContentType(\"application/json\");\n        this.response = new MockHttpServletResponse();\n    }\n\n    @Test\n    public void testPost() {\n        request.setMethod(\"POST\");\n        request.setRequestURI(\"/user/\"); // replace test with any value\n\n        final ModelAndView mav;\n        Object handler;\n\n        try {\n\n            Profile p = ProfileUtil.getProfile();\n            p.setEmail(\"test@mail.com\");\n\n            request.setAttribute(\"profile\", p);\n\n            System.out.println(\"before calling the email is \" + p.getEmail());\n\n            handler = handlerMapping.getHandler(request).getHandler();\n            mav = handlerAdapter.handle(request, response, handler);\n            Assert.assertEquals(200, response.getStatus());\n            // Assert other conditions.\n        } catch (Exception e) {\n\n        }\n    }\n</code></pre>\n\n<p>This is the controller</p>\n\n<pre><code>@RequestMapping(value = \"/\", method = RequestMethod.POST)\npublic View postUser(ModelMap data, @Valid Profile profile, BindingResult bindingResult) {\n\n    System.out.println(\"The email is \" + profile.getEmail());\n\n\n}\n</code></pre>\n"},{"tags":["java","web-services","unit-testing","junit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":408,"score":2,"question_id":8538913,"title":"Unit testing web service calls","body":"<p>I am working on a Java project that is split up into a web project and a back-end project.  The web talks to the back-end via web service calls.  </p>\n\n<p>There is one class in the web project that makes all of the web service calls and I would like to add testing around this class.  I want to do unit testing, and not functional testing, so I do not want to have to have the web service actually running to run the tests. If this class were simply passing the calls through to the back-end, I might be willing to overlook testing it, however there is caching happening at this point, so I want to test that it is working correctly.</p>\n\n<p>When the web service is generated jax-ws wsgen it creates an interface that the front end uses.  I have used this generated interface in order to create a fake object for testing.  This works pretty well, but there are issues with this approach.</p>\n\n<p>I am currently the only one on my team that is doing unit testing, and so am the only one maintaining the test code.  I would like to be able to have the test code be built when the rest of the code is built, but if someone else introduces a new method into one of the web service classes, then the interface will have the new method on it, and my fake object will not implement it, and will therefor be broken.</p>\n\n<p>The web and the back end code projects are not dependent on one another, and I do not want to introduce a dependency between them.  So, introducing an interface on top of the web service endpoint does not seem plausible since if I put it in the back-end, my web code needs to reference it, and if I put it in the front-end, my back-end code needs to reference it.  I also cannot extend the endpoint since this will also introduce a dependency between the projects.</p>\n\n<p>I am unfamiliar with how web services work, and how the classes are generated for the web project to be able to refer to them.  So, I do not know how to create an interface in the back end that will be available for me to use in the web project.</p>\n\n<p>So, my question is, how would I get the interface available to my front-end project without introducing a project dependency (in Eclipse build path)?  Or, is there another, better way to fake out the back-end web service that I am calling?</p>\n"},{"tags":["unit-testing","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12630720,"title":"Unit Testing: Is it valid to do a minimal test?","body":"<p>I have a basic question about unit tests.  I found a crash in my code, and I wrote a test to reproduce the bug.  I then fixed the bug and verified that it passes the test.  My question, is if I took the best approach.  Here is a simplified example:</p>\n\n<pre><code>public class ClassC\n{\n    private int internalFlag;\n\n    void all(Dependency dep1, Dependency dep2, Dependency dep3, Dependency dep4)\n    {\n        a(dep1);\n        b(dep2)\n        c(dep3)\n        d(dep4)\n        e();\n        f();\n    }\n\n    void e()\n    {\n        if (some logic based on dep3)\n        {\n            internalFlag = 2;\n        }\n    }\n\n    void f()\n    {\n        if (internalFlag == 2)\n        {\n            Log(\"All is well\");\n        }\n        else\n        {\n            Log(\"Crash occurs\")\n        }\n    }\n}\n</code></pre>\n\n<p>In the above example, I have a method called \"all\" that calls methods a, b, c, d, e, f.  Now, I found a crash in \"f\" because the \"internalVar\" was not an expected value.  This 'internalVar\" was set in \"e\", but as you can see \"e\" does not set the internalFalg to anything if the condition is false.  So the bug is in e.</p>\n\n<p>I was able to write the test to isolate the bug.  Then I fixed the bug and found that the test past.  Thats great, but in order to do it I had to do something like:</p>\n\n<pre><code>void testAll()\n{\n    mockDep1 = mock(dep1);\n    mockDep2 = mock(dep2);\n    mockDep3 = mock(dep3);\n    mockDep4 = mock(dep4);\n\n    all(mockDep1, mockDep2, mockDep3, mockDep4);\n}\n</code></pre>\n\n<p>Now the part where I make mockDep1..4 is very simple here in this example, but it was actually very long laborious code.  My question is, is it valid instead just to do the minimal calls to reproduce the crash:</p>\n\n<pre><code>void testCrash()\n{\n   mockDep3 = mock(dep3);\n   c(mockDep3)    \n   e()\n   f();\n}\n</code></pre>\n\n<p>This would be all I would be required to do to reproduce and test the crash, except that its not exactly how the code would be called in the actual method \"all\", that calls each method.  It just seems like writing testAll above including all the mocks over and over again for each bug is a bit tedius.  But then again, thats how the actual method \"all\" would work.  So is it better instead to isolate the bug, even if the isolation is not exactly how it would work if the full method was called?</p>\n"},{"tags":["android","edittext","unit-testing"],"answer_count":1,"favorite_count":3,"up_vote_count":17,"down_vote_count":0,"view_count":5390,"score":17,"question_id":3216294,"title":"android: programatically add id to R.id","body":"<p>i am creating an EditText object which i then try to reference in a unit test.  what is the best way to add a new 'id' to R.id for this dynamically created object so that i can later reference it via findViewById() in the unit test?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":521,"score":0,"question_id":6044376,"title":"How do I unit test private controller methods in ASP.NET MVC?","body":"<p>What is the best practice to unit-test private methods inside a controller in ASP.NET MVC? The Currently, if I want to unit-test a private method inside a controller I have to set it to public but when I do, that method is exposed to the web.</p>\n\n<p>Is the best way to move the method to a helper class?</p>\n"},{"tags":["php","unit-testing","testing","symfony2","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":12623797,"title":"PHPUnit test always succeeds, both with $this->once() and $this->never()?","body":"<p>I know I'm doing something wrong because this is very strange, I'm learning PHPUnit since a few days. The test subject is <code>receive()</code> controller action:</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class ReportController\n{\n    /**\n     * @var \\Symfony\\Component\\EventDispatcher\\EventDispatcherInterface\n     */\n    private $dispatcher;\n\n    public function __construct(EventDispatcherInterface $dispatcher)\n    {\n        $this-&gt;dispatcher = $dispatcher;\n    }\n\n    /**\n     * @param \\Gremo\\SkebbyBundle\\Message\\InboudSkebbyMessage $message\n     * @return \\Symfony\\Component\\HttpFoundation\\Response\n     */\n    public function receive(InboudSkebbyMessage $message)\n    {\n        $this-&gt;dispatcher-&gt;dispatch(SkebbyEvents::MESSAGE_RECEIVED,\n            new InboundMessageEvent($message)\n        );\n\n        return new Response();\n    }\n}\n</code></pre>\n\n<p>As the controller throws an event, I need to mock an event subscriber (implements <a href=\"https://github.com/symfony/symfony/blob/master/src/Symfony/Component/EventDispatcher/EventSubscriberInterface.php\" rel=\"nofollow\"><code>Symfony\\Component\\EventDispatcher\\EventSubscriberInterface</code></a>). There is a static method <code>getSubscribedEvents()</code>. Test method helper (to get the mock):</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>public function getMockSubscriber(array $events)\n{\n    $class = $this-&gt;getMockClass(\n        'Symfony\\Component\\EventDispatcher\\EventSubscriberInterface',\n        array_merge(array_values($events), array('getSubscribedEvents'))\n    );\n\n    // Static stub method\n    $class::staticExpects($this-&gt;once())\n        -&gt;method('getSubscribedEvents')\n        -&gt;will($this-&gt;returnValue($events))\n    ;\n\n    return new $class;\n}\n</code></pre>\n\n<p>Then in my test method I'm registering the (mock) subscriber, making the request and checking that <code>onMessageReceived()</code> is invoked exactly one time. The (big, actually) problem is <strong>test always succeeds</strong>, even if i change the mock to <code>$subscriber-&gt;expects($this-&gt;never())-&gt;method('onMessageReceived')</code>. Implementation:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>public function testApiCall()\n{\n    $client = $this-&gt;createClient();\n\n    // Router (for route generation) and dispatcher (for subscribing the mock)\n    $router    = $client-&gt;getContainer()-&gt;get('router');\n    $dispatcer = $client-&gt;getContainer()-&gt;get('event_dispatcher');\n\n    // Get mock event subscriber\n    $subscriber = $this-&gt;getMockSubscriber(array(\n        'messsage.received' =&gt; 'onMessageReceived'\n    ));\n\n    // Register the mock subscriber with the dispatcher\n    $subscriber-&gt;expects($this-&gt;once())-&gt;method('onMessageReceived');\n    $dispatcer-&gt;addSubscriber($subscriber);\n\n    // Make the request\n    $request  = Request::create(\n        $router-&gt;generate('controller_receive'),\n        'POST',\n        array(\n            'sender'    =&gt; 'sender',\n            'receiver'  =&gt; 'receiver',\n            'text'      =&gt; 'text',\n            'timestamp' =&gt; time(),\n            'smsType'   =&gt; 'smsType'\n        )\n    );\n\n    $client-&gt;getKernel()-&gt;handle($request);\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: mock subscriber is correctly registered with the dispatcher. <code>var_dump($dispatcher-&gt;getListeners())</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>array(7) {\n  'messsage.received' =&gt;\n  array(1) {\n    [0] =&gt;\n    array(2) {\n      [0] =&gt;\n      class Mock_EventSubscriberInterface_19b191af#34 (2) {\n        ...\n      }\n      [1] =&gt;\n      string(17) \"onMessageReceived\"\n    }\n  }\n</code></pre>\n"},{"tags":["c++","string","unit-testing","visual-c++","std"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":12628927,"title":"Why doesn't Assert::AreEqual in the VS UnitTesting framework work with std::string?","body":"<p>I am trying to do a unit test on some c++ code but am running into some trouble.</p>\n\n<p>I have something similar to the following lines of code...</p>\n\n<pre><code>std::string s1 = obj-&gt;getName();\nstd::string s2 = \"ExpectedName\";\nAssert::AreEqual(s1, s2, \"Unexpected Object Name\");\n</code></pre>\n\n<p>And I'm getting the following compiler error...</p>\n\n<pre><code>error C2665: 'Microsoft::VisualStudio::TestTools::UnitTesting::Assert::AreEqual' :\nnone of the 15 overloads could convert all the argument types\n</code></pre>\n\n<p>It seems like it should be a match with <a href=\"http://msdn.microsoft.com/en-us/library/ms243446%28v=vs.80%29.aspx\" rel=\"nofollow\">the following overload</a>:</p>\n\n<pre><code>AreEqual&lt;(Of &lt;(T&gt;)&gt;)(T, T, String) \n</code></pre>\n\n<p>Isn't the above overload a template overload that should support any object, as long as arguments 1 and 2 are of the same type? Or am I missing something?</p>\n\n<p>Is there some other way that I can accomplish this Assert?</p>\n"},{"tags":["unit-testing","maps","biztalk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":67,"score":-1,"question_id":12582291,"title":"BizTalk Test Flat-File Map","body":"<p>I've written a unit test for a map which has XML as the source and a flat file schema as the target. </p>\n\n<p>I can set the \"TestMap Output\" property of the map to XML or native. When I then right-click the map in solution explorer and select Test Map, it works great, I get either an XML file or a flat file depending in the value I selected for the \"TestMap Output\" property. In both cases all expected fields are populated with the correct value from the input XML document. </p>\n\n<p>My problem comes when I execute a unit test using the TestMap method of the class Microsoft.BizTalk.TestTools.Mapper.TestableMapBase. I am getting the error \"Object reference not set to an instance of an object\", here is the stack trace:</p>\n\n<pre><code>at Microsoft.BizTalk.TOM.CXSDSchemaTree.CreateNativeInstance(String strXMLInstFileName, String strNativeInstanceOutputFileName, InstanceGenerationOptions options, ITOMErrorInfo[]&amp; errInstanceCreationErrors)\nat Microsoft.BizTalk.TOM.CXSDSchemaTree.CreateNativeInstanceFromXMLInstance(String strXMLInstFileName, String strNativeInstFileName, ITOMErrorInfo[]&amp; errInstCreationErrors)\nat Microsoft.BizTalk.TestTools.Mapper.TestableMapBase.TestMap(String inputInstanceFilename, InputInstanceType inputType, String outputInstanceFilename, OutputInstanceType outputType)\nat x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.CallMap(TestableMapBase target) in C:\\Development\\x.Int.WMS\\Dev\\V1.0\\Src\\Solutions\\WMS\\x.Int.WMS.Testing.Unit\\UnitTests\\FromCanonical\\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 68\nat x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.SetupTest() in C:\\Development\\x.Int.WMS\\Dev\\V1.0\\Src\\Solutions\\WMS\\x.Int.WMS.Testing.Unit\\UnitTests\\FromCanonical\\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 33\nat x.Int.WMS.Testing.Unit.UnitTests.FromAx.UnitTest_CanonicalCustomer_2_MLS_MRE.RecordID_IsMapped() in C:\\Development\\x.Int.WMS\\Dev\\V1.0\\Src\\Solutions\\WMS\\x.Int.WMS.Testing.Unit\\UnitTests\\FromCanonical\\UnitTest_CanonicalCustomer_2_MLS_MRE.cs:line 45\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","unit-testing","generics","type-conversion"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12625995,"title":"Assert.AreEqual<T> (and Related Generic Functions) Don't Enforce Their Argument Types","body":"<p>I am writing some unit tests, well actually I'm fixing unit tests after a refactor, and I noticed some very odd behavior. The original assertion used the non-generic flavor of the AreEqual method.</p>\n\n<pre><code>Assert.AreEqual(Foo.Do(...), Bar.Do(...).Conversion(...));\n</code></pre>\n\n<p>After some refactoring, Foo.Do() no longer returned the same type and needed additional conversion to maintain the equivalence. However, the AreEquals function happily takes any objects so the tests failed at run-time instead of compile-time like one would hope.</p>\n\n<p>So, I decided to change the assertions to their generic counterparts to enforce that changes like this in the future would turn into compile-time errors.</p>\n\n<pre><code>Assert.AreEqual&lt;X&gt;(Foo.Do(...), Bar.Do(...).Conversion(...));\n</code></pre>\n\n<p>At this point, I haven't changed Foo.Do() to return the correct type, so I should get a compile error that Foo.Do()'s return is not a X. To my surprise, nothing happens. The compile succeeds just fine. I assume there must be an implicit conversion between the types somewhere, but a little experimenting shows there isn't. I have tried a few other mock examples to see if having non-generic and generic flavors of functions would interact this way, but I can't reproduce this behavior except with this class.</p>\n\n<p>Why does the compiler not enforce that both values be of type X, even if that is what it appears to imply if you hover over the function in Visual Studio?</p>\n"},{"tags":[".net","unit-testing"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1132,"score":4,"question_id":601075,"title":"What's the difference between the .NET Unit Testing framework out there?","body":"<p>I've heard many different opinions as to what makes one better than another. But can anyone provide a technical explanation as to why I should choose one unit testing framework over another. For example, I use Visual Studio Team System. Why would I choose an Open Source testing framework (NUnit, xUnit, MbUnit, etc) over Visual Studio's built-in unit testing capabilities? Does it matter?</p>\n\n<p>Edit: To be clear, I'm not looking for an opinion on \"Which unit testing framework is best\"...I'm looking for technical details as to how they are different,.</p>\n"},{"tags":["c#",".net","unit-testing","list"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12620367,"title":"List value comparison","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6196526/how-to-find-out-whether-two-string-arrays-are-equal-to-other\">How to find out whether two string arrays are equal to other</a>  </p>\n</blockquote>\n\n\n\n<p>how to assert that both lists contain same items?</p>\n\n<pre><code>string[] arr1 = listvalue.ToArray();\nstring[] arr2 = listvalueMain.ToArray();\nfor (int i = 0; i &lt; 5; i++)\n{\n    Assert.AreEqual(arr1[i], arr2[i]);\n}\n</code></pre>\n\n<p>This shows an error.</p>\n"},{"tags":["unit-testing","testing","ruby-on-rails-3.2","rails-migrations","test-environments"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12608928,"title":"Running migration script on test environment only","body":"<p>Is there a way to only run migrations in the test environment?</p>\n\n<p>I'd like to create tables and seed the data in only the test environment since the staging and production databases already exist.</p>\n"},{"tags":["java","unit-testing","hamcrest"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12606196,"title":"What is the alternative to using the Deprecated Hamcrest method is()?","body":"<p>I use the following code at the moment to assert on a <code>boolean</code> value, however the method <code>org.hamcrest.Matchers.is()</code> is deprecated.</p>\n\n<pre><code>assertThat(someValue, is(false));\n</code></pre>\n\n<p>Is there a simple alternative syntax to test for boolean values without resorting to <code>assertTrue()</code> which gives you poor failure messages like \"java.lang.AssertionError\"</p>\n\n<hr>\n\n<p><strong>Edit</strong> after receiving comments/answers</p>\n\n<p>My initial concerns were raised because Eclipse shows the following import statement as deprecated </p>\n\n<p><img src=\"http://i.stack.imgur.com/2fvDL.png\" alt=\"enter image description here\"></p>\n\n<p>On viewing the <a href=\"http://www.jarvana.com/jarvana/view/org/hamcrest/hamcrest-library/1.2.1/hamcrest-library-1.2.1-javadoc.jar!/org/hamcrest/Matchers.html\" rel=\"nofollow\">Hamcrest API</a> docs there are 3 overloaded variations of the <code>is()</code> method, only one of which is deprecated.</p>\n\n<p>Therefore, to clarify the comment from @mark and the answer from @matt, the use of <code>is()</code> that I have posted above is valid and not deprecated.</p>\n"},{"tags":["unit-testing","grails","groovy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12567485,"title":"Grails set System property for test","body":"<p>Is it possible to directly set a System.property for a particular method of a Grails unit test class?</p>\n\n<p>I've got a Filters class that blocks some actions if a system property is set in Config.groovy:</p>\n\n<pre><code>class MyFilters {\ndef filters = \n{\n    if ('true'.equals(System.properties.getProperty('myProperty', 'false'))){\n        writeFilter(controller: \"myController\", action: \"update\")\n        {\n            before =\n            {\n                response.sendError(HttpServletResponse.SC_FORBIDDEN);\n                return false;\n</code></pre>\n\n<p>In MyControllerTests, I'm trying to implement a test for the filter:</p>\n\n<pre><code>void testMyFilter(){\n    System.properties.setProperty('myProperty', 'true')\n    withFilters(action:\"update\") {\n        controller.update()\n    }\n    assert response.status ==  HttpServletResponse.SC_FORBIDDEN\n}\n</code></pre>\n\n<p>But the filter class is already mocked at this stage (using the default 'false' property value from Config) so the change of the property in the test has no effect.</p>\n\n<p>Is there a way around this, or a way to force Grails to reload the Filters class after the prop is changed?  I can't change the default property in Config as the other controller tests will break, it's just for a particular environment where this prop will be set so I'd like the scenario covered by a test that checks the Filter will kick in.</p>\n\n<p>Thanks.</p>\n"},{"tags":["unit-testing","visual-studio-2010","c++-cli","code-coverage","testrunconfig"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":462,"score":0,"question_id":2872158,"title":"Why don't I get code coverage results for C++/CLI project in Visual Studio 2010?","body":"<p>I've recently upgrade my solution to Visual Studio 2010.</p>\n\n<p>I have 4 projects I want to cover using unit tests - 3 C# and 1 C++/CLI.</p>\n\n<p>I get coverage for the C# projects but not for the C++/CLI project.</p>\n\n<p>I did get for all of them in Visual Studio 2008.</p>\n\n<p>I've configured the assemblies using testrunconfig -> Data and Diagnostics -> Code Coverage -> Configure.</p>\n\n<p>Why don't I get code coverage result for the C++/CLI project?</p>\n"},{"tags":["ruby-on-rails","ruby-on-rails-3","unit-testing","session","integration-testing"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":515,"score":1,"question_id":8156559,"title":"How to access session from Rails Integration Test?","body":"<p>Consider the following integration test:</p>\n\n<pre><code>test \"if there is no user in session, redirect to index and flash message\" do\n  open_session do |sess|\n    post '/login', :email =&gt; users(:client).email, :password =&gt; 'rumpelstiltskin'\n    sess[:user] = nil\n    get '/user_page'\n    assert_redirected_to index_path\n    assert_equal \"Your session has expired. Please log in again\", flash[:notice]\n  end    \nend\n</code></pre>\n\n<p>This generates error: <code>undefined method '[]='</code></p>\n\n<p>And, changing to <code>sess.session[:user] = nil</code> generates an error as well: <code>NoMethodError: undefined method 'session' for nil:NilClass</code></p>\n\n<p>How do you modify the session params from an integration test in Rails?</p>\n\n<p>Working in Rails 3.0.7, Ruby 1.9.2p180, Unit test framework.</p>\n\n<p>EDIT:<br>\n<code>get '/user_page', nil, {:user =&gt; nil}</code> and <code>get ('/user_page', nil, {:user =&gt; nil} )</code> generate errors.</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12625080,"title":"JUnit testing - Whats wrong with a test that`s expected result should be passed?","body":"<p>I am testing a simple thing in my DB-Application. To create a product. For this I use Junit tests and here is the test that always fail, instead the expected result to turn green(passes)...</p>\n\n<pre><code>@Test\npublic void testCreate(){\n    Produkt test = new Produkt(20, \"junit\", \"junitk\", false, 900.67, true, true);\n    handler.createProdukt(test);\n}\n</code></pre>\n\n<p>when I try it out simply with a main method(just creating a new Produkt and look if that works...) the create function works great and created this Produkt.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>PS.: here is the code where I set up the tests:</p>\n\n<pre><code>@Before\npublic void setUp() throws SQLException, ClassNotFoundException{\n    try {\n        this.shandler = new ServiceHandler();\n        this.setServiceHandler(shandler);\n        manager.getConnection();\n        manager.getConnection().setAutoCommit(false);\n    } catch (SQLException ex) {\n        System.err.println(\"ERROR:\");\n        ex.printStackTrace();\n    }\n\n}\n\n@After\npublic void tearDown() throws SQLException, ClassNotFoundException{\n    manager.getConnection().rollback();\n    manager.closeConnection();\n}\n</code></pre>\n\n<p><strong>UPDATE</strong>\nI guess you mean the failure trace:</p>\n\n<blockquote>\n  <p>java.lang.NullPointerException    at\n  tests.JUnitAbstractTests.testCreate(JUnitAbstractTests.java:35)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)     at\n  org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\n    at\n  org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at\n  org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\n    at\n  org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\n    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)  at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:300)     at\n  org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at\n  org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at\n  org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)</p>\n</blockquote>\n"},{"tags":["unit-testing","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12614502,"title":"Unit Tests Not Appearing","body":"<p>Right now, I'm using the Visual Studio Express 2012 on the Windows release preview and I can't seem to get my unit tests to appear in the test explorer... Is there something special that I need to do before they appear? The test explorer simply says that I need to do \"Run All\" and they'll appear.</p>\n\n<p>I have a class called TestApp.Entity, and TestApp.EntityTest... </p>\n\n<p>Here is my code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing Microsoft.VisualStudio.TestPlatform.UnitTestFramework;\nusing System.Net.Http;\nusing TestApp.Domain;\n\nnamespace TestApp.Entity.Test\n{\n[TestClass]\npublic class EntityTests\n{\n    [TestMethod]\n    public async void TestObject1Deserialize()\n    {\n        Uri agencyUri = new Uri(\"*removed*\");\n        HttpClient httpClient = new HttpClient();\n        HttpResponseMessage response = await httpClient.GetAsync(agencyUri);\n\n        string responseBodyAsText = await response.Content.ReadAsStringAsync();\n        List&lt;Agency&gt; agencyList = Deserializers.AgencyDeserialize(responseBodyAsText);\n\n        CollectionAssert.Contains(agencyList, new Agency() { Tag = \"*removed*\", Title = \"*removed*\", ShortTitle = \"\", RegionTitle = \"*removed*\" });\n    }\n\n}\n}\n</code></pre>\n\n<p>I assume that's all I needed to do, but they still don't appear in the test explorer. Any advice would be helpful.</p>\n"},{"tags":["python","unit-testing","foreign-keys","sqlalchemy","elixir"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12598050,"title":"UnitTest : Can't add many to many relations : Integrity error (seems delete do not do his job)","body":"<p>I have two tables : Person &amp; Team ; each has a ManyToMany relation with the other.</p>\n\n<p>I do this in the <code>setUp</code> function (called <strong>before</strong> each function of testing, 3 times in my case)</p>\n\n<pre><code>p = Person(fname=u\"John\", lname=u\"Doe\")\nTeam(name=u\"Anon\", persons=[p])\nsession.commit()\n</code></pre>\n\n<p>And my <code>tearDown</code> function (called <strong>after</strong> each function of testing)</p>\n\n<pre><code>Person.query.delete()\nTeam.query.delete()\nsession.commit()\n</code></pre>\n\n<p>The first test passes, but when <code>setUp</code> is called the second time, I got this :\n<code>IntegrityError: (IntegrityError) columns person_id, team_id are not unique u'INSERT INTO team_persons__person_teams (person_id, team_id) VALUES (?, ?)' (5, 1)</code></p>\n\n<p>It seems like delete did not really delete the rows the first time...\nI can't figure out why this happens.</p>\n\n<p>Any ideas ?\nThank you !</p>\n"},{"tags":[".net","unit-testing","resharper","mstest","team-build"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1381,"score":4,"question_id":4733592,"title":"Assert.Inconclusive and IgnoreAttribute","body":"<p>What is the right way to use <code>Assert.Inconclusive</code> and <code>IgnoreAttribute</code> in MS Unit test framework?</p>\n\n<p>We are using <code>Assert.Inconclusive</code> mainly for tests which are:</p>\n\n<ul>\n<li>Not implemented yet</li>\n<li>Somehow broken or incomplete = requires futher attention</li>\n<li>When test body is for any reason commented out</li>\n</ul>\n\n<p>We are doing this because:</p>\n\n<ul>\n<li>Inconclusive test can have message</li>\n<li>We want to see such tests in test results on TFS</li>\n</ul>\n\n<p>Our problem is that <code>Inconclusive</code> tests are marked as error in both TFS and Resharper. If we use <code>IgnoreAttribute</code> instead we will see these tests in Resharper but MS Test runner and TFS will ignore them at all. Using <code>IgnoreAttribute</code> in TFS and MS Test runner is same like commenting whole test which is useless.</p>\n"},{"tags":["asp.net-mvc-3","unit-testing","routing","mvccontrib"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12620121,"title":"Unit Test ASP MVC Route with Constraint","body":"<p>I have a route that is defined like this:</p>\n\n<pre><code>routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional, area = \"\" }, // Parameter defaults\n            new { home = new HomePageConstraint() }\n        );\n\npublic class HomePageConstraint : IRouteConstraint\n{\n    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)\n    {\n        return !httpContext.Request.RawUrl.StartsWith(\"/home\", StringComparison.InvariantCultureIgnoreCase);\n    }\n}\n</code></pre>\n\n<p>And I am trying to test it like this:</p>\n\n<pre><code>[Test]\npublic void Home_Load_Homepage()\n{\n    \"~/\".ShouldMapTo&lt;HomeController&gt;(x =&gt; x.Index());\n}\n</code></pre>\n\n<p>The problem I have is that the <code>httpContext</code> is null, so the test fails. how can I inject http context into a constraint?</p>\n"},{"tags":["unit-testing","testing","grails","intellij-idea"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12620503,"title":"Slow Grails test starting in Intellij IDEA","body":"<p>IDEA is starting a new Grails instance every time I wan't to run a single test.</p>\n\n<p>Is there a way to use regular Grails runner but using interactive mode?\nRunning tests in interactive mode id blazing fast :-)</p>\n"},{"tags":["c#",".net","visual-studio-2010","unit-testing","mstest"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12619911,"title":"Generate runnable exe from MSTest test","body":"<p>I have a [TestMethod] in a visual studio test project. If I build the project, I get a dll. I dont want to run the tests from the visual studio User Interface.</p>\n\n<ol>\n<li><p>Is there any way to generate an exe of a test project so that i can run the tests from command prompt?</p></li>\n<li><p>If I change the project type from Class Library to Console Application, then it requires a Main function. Is there any way to call a TestMethod from the Main() </p></li>\n</ol>\n"},{"tags":["eclipse","unit-testing","maven","maven-plugin","classnotfoundexception"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3459,"score":1,"question_id":5974432,"title":"ClassNotFoundException when running JUnit unit tests within Eclipse (using Maven)","body":"<p>I have just upgraded my SpringSource Tools Suite (STS, a variant IDE of Eclipse) to the latest version (v3.6.1). Then all my JUnit unit tests can not be run again. I am getting this error:</p>\n\n<pre><code>Class not found ClassToTest\njava.lang.ClassNotFoundException: ClassToTest\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)\n</code></pre>\n\n<p>According to this blog:\n<a href=\"http://blog.andrewbeacock.com/2008/11/classnotfoundexception-when-running.html\" rel=\"nofollow\">ClassNotFoundException when running JUnit unit tests within Eclipse (using Maven)</a>,\nit is because of some misconfiguration of Maven plugin in Eclipse. However, in STS 3.6.2 I cannot find this option \"Include Modules\" in the Maven plugin. How can I fix this problem and re-enable my unit tests?</p>\n"},{"tags":["java","eclipse","unit-testing","testing","junit"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12617391,"title":"JUnit - assertFalse does not except == Operator?","body":"<p>I am currently writing junit tests for my program.</p>\n\n<p>One of my tests updated an existing product. Here`s the code:</p>\n\n<pre><code>@Test\npublic void testUpdate(){\n    Produkt p = new Produkt(1, \"apple\", \"food\", true, 2.00, false, true);\n    assertFalse(handler.updateProdukt(p)==0);;  \n} \n</code></pre>\n\n<p>but eclispe always says:</p>\n\n<blockquote>\n  <p>The operator == is undefined for the argument type(s) void, int</p>\n</blockquote>\n\n<p>if I write null nothing changes...</p>\n\n<p>Is there a possibility to test whether the updatedProdukt is null or not?</p>\n\n<p>I really appreaciate your answer!!!</p>\n"},{"tags":["java","unit-testing","mockito"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12606148,"title":"passing Parameterized input using Mockitos","body":"<p>I am using Mockito for unit testing. I am wondering if its possible to send Parametrized input parameters with as in Junit testing<br>\ne.g</p>\n\n<pre><code>@InjectMocks\nMockClass mockClass = new MockClass();\n\n@Test\npublic void mockTestMethod()\n    {\n    mockClass.testMethod(stringInput); \n// here I want to pass a list of String inputs \n// this is possible in Junit through Parameterized.class.. \n// wondering if its can be done in Mockito\n    } \n</code></pre>\n"},{"tags":["c++","unit-testing","mocking","virtual"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":112,"score":5,"question_id":12614870,"title":"Should I make a member function virtual just to make a class testable?","body":"<p>I'm working on a class whose simplified version looks like this:</p>\n\n<pre><code>class Http_server {\npublic:\n    void start(int port)\n    {\n        start_server();\n        std::string content_type = extract_content_type(get_request());\n    }\n\nprivate:\n    void start_server()\n    {\n        ...\n    }\n\n    std::string get_request()\n    {\n        ...\n    }\n\n    std::string extract_content_type(const std::string&amp; request) const\n    {\n        ...\n    }\n};\n</code></pre>\n\n<p>Now I want to write a test case for <code>extract_content_type</code>. The problem is: it's private, so I cannot call it from the outside. The only function I can test is <code>start</code>, but that one would actually start the server (<code>start_server</code>) and wait for a request (<code>get_request</code>).</p>\n\n<p>How I see it, I've got three options:</p>\n\n<ol>\n<li>Make <code>extract_content_type</code> public</li>\n<li>Extract <code>extract_content_type</code> into a utility class or namespace</li>\n<li>Make <code>start_server</code> and <code>get_request</code> virtual and create a mock object that overrides them</li>\n</ol>\n\n<p>I don't want to make anything public or move to a utility namespace that's just used once in a single class, so the least evil is option 3.</p>\n\n<p>I've seen at least one example of this in the V8 code base:\n<a href=\"http://code.google.com/p/v8/source/browse/trunk/test/cctest/test-date.cc\">http://code.google.com/p/v8/source/browse/trunk/test/cctest/test-date.cc</a></p>\n\n<p>Still, I'm not sure if it's a good idea. <code>virtual</code> isn't the default in C++ for two reasons:</p>\n\n<ol>\n<li>It would induce performance/memory overhead (probably won't matter in my case though)</li>\n<li>Not every class is supposed to be used as a base class, making it explicit was also a design decision</li>\n</ol>\n\n<p>What would you do? Live with the useless virtual? Or rather not test the function at all? I'm not into TDD, nor do I want to be, but it's just easier to develop functions like <code>extract_content_type</code> against a test.</p>\n"},{"tags":["unit-testing","language-agnostic","tdd"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12569363,"title":"unit-test the template method design pattern","body":"<p>Suppose the following template method implementation:  </p>\n\n<pre><code>public abstract class Abs\n  {\n    void DoYourThing()\n    {\n      log.Info(\"Starting\");\n      try\n      {\n        DoYourThingInternal();\n        log.Info(\"All done\");\n      }\n      catch (MyException ex)\n      {\n        log.Error(\"Something went wrong here!\");\n        throw;\n      }\n    }\n\n    protected abstract void DoYourThingInternal();\n\n  }\n</code></pre>\n\n<p>Now, there are plenty of info around on how to test the <code>Abs</code> class, and make sure that <code>DoYourThingInternal</code> is called.<br>\nHowever, suppose I want to test my <code>Conc</code> class:</p>\n\n<pre><code> public class Conc : Abs\n  {\n    protected override void DoYourThingInternal()\n    {\n      // Lots of awesome stuff here!\n    }\n  }\n</code></pre>\n\n<p>I wouldn't want to do <code>conc.DoYourThing()</code>, since this will invoke the parent method, which was already tested separately.   </p>\n\n<p>I would like to test only the overriding method.   </p>\n\n<p>Any ideas?  </p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12604067,"title":"Hook into PHPUnit overall test state at runtime","body":"<p>I have a PHPUnit bootstrap file that creates a test DB used for DB-related unit tests, and registers a shutdown function to destroy the DB once the tests complete. A fresh database for every run!</p>\n\n<p>The problem: when tests fail, I want to hold onto the database for debugging purposes. At present, I have to manually disable my <code>register_shutdown_function()</code> call and then rerun the tests.</p>\n\n<p><strong>If I could access PHPUnit's final success/fail state for the run, I could dynamically trigger the database destruction process based on a switch within the PHPUnit bootstrap file.</strong></p>\n\n<p>PHPUnit stores this info somewhere in order to trigger the proper outcome event, i.e. the output <code>OK</code> vs <code>FAILURES!</code>. However from what I've uncovered, this information is not exposed to a user-level bootstrap file. Anyone ever done anything like this?</p>\n\n<p>If you want to explore, here's a stack trace of PHPUnit that occurs when you run PHPUnit from the command line...</p>\n\n<pre><code>PHP   1. {main}() /usr/bin/phpunit:0\nPHP   2. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46\nPHP   3. PHPUnit_TextUI_Command-&gt;run() /usr/share/php/PHPUnit/TextUI/Command.php:130\nPHP   4. PHPUnit_TextUI_Command-&gt;handleArguments() /usr/share/php/PHPUnit/TextUI/Command.php:139\nPHP   5. PHPUnit_TextUI_Command-&gt;handleBootstrap() /usr/share/php/PHPUnit/TextUI/Command.php:620\nPHP   6. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/php/PHPUnit/TextUI/Command.php:867\nPHP   7. PHPUnit_Util_Fileloader::load() /usr/share/php/PHPUnit/Util/Fileloader.php:79\nPHP   8. include_once() /usr/share/php/PHPUnit/Util/Fileloader.php:95\nPHP   9. [YOUR PHPUNIT BOOTSTRAP RUNS HERE]\n</code></pre>\n"},{"tags":["unit-testing","testing","windows-services","instrumentation","moles"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1086,"score":1,"question_id":5954043,"title":"Moles VS2010 Unit Testing of Windows Service Fails","body":"<p>I am writing a relatively small and simple Windows Service, and using Moles to mock unit tests.  Due to the small code, I decided to use Moles instrumentation, rather than segmenting the code with stubs.  When I execute any unit test against the moled assembly, I receive an error:</p>\n\n<blockquote>\n  <p>InitilaizationDetectsMissingMonitorDirectory\n  has failed:   Test method\n  FtpDirWatcher.Test.FileWatcherTest.InitilaizationDetectsMissingMonitorDirectory\n  threw exception:\n  Microsoft.Moles.Framework.Moles.MoleInvalidOperationException:</p>\n  \n  <p><strong>Moles requires tests to be IN an instrumented process.</strong> </p>\n  \n  <p>In Visual Studio Test, add the following attribute your unit test method:  </p>\n  \n  <p>[TestMethod]</p>\n  \n  <p>[HostType(\"Moles\")] // add this attribute</p>\n  \n  <p>public void\n  Test()    { ... }</p>\n</blockquote>\n\n<p>I'm not sure what it means that \"Moles requires tests to be <strong>IN</strong> an instrumented process.\"  Note the \"IN\" means this is not the usual \"Moles requires tests to be an instrumented process.\"  I have looked back through documentation, to see if there is anything I have missed.  I am obviously still missing something important.</p>\n\n<p>The target assembly (\"FtpDirWatcher\") is indeed instrumented by Moles (evidenced by the presence of the MFileWatcher object), and I have the proper attributes in place on the test method.  I even tried converting the target property to a method, to no avail.  So, what's going on?</p>\n\n<p>This is condensed code, so no criticisms!</p>\n\n<pre><code>using System;\nusing System.IO;\nusing System.Linq;\nusing FtpDirWatcher.Moles;\nusing Microsoft.Moles.Framework;\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\n[assembly: MolesAssemblySettings(Bitness = MolesBitness.AnyCPU)]\n\nnamespace .Test  // Test project namespace\n{\n    [TestClass]\n    public class FileWatcherTest\n    {\n        readonly string _invalidDirectory = @\"B:\\invaliddirectory\";\n\n        [TestMethod]\n        [DeploymentItem(\"FileWatcher.exe\")]\n        [HostType(\"Moles\")]\n        public void InitilaizationDetectsMissingMonitorDirectory()\n        {\n            Assert.IsFalse(Directory.Exists(_invalidDirectory));\n\n            // THE FOLLOWING LINE OF CODE THROWS THE ERROR.\n            // Use moles to detour the MonitorDirectory property's Get\n            // method to a delegate.\n            MFileWatcher.AllInstances.MonitorDirectoryGet = watcher =&gt; \n                new DirectoryInfo(_invalidDirectory);\n\n            // Don't use the accessor -- no private fields are accessed.\n            var target = new FileWatcher();\n            Assert.IsFalse(target.IsConfigurationOk);\n        }\n    }\n}\n</code></pre>\n\n<p>Any help is appreciated!  </p>\n\n<p><strong>UPDATE:</strong> Added the following build output. Included the bitness setting in the code, above, to show that it should not be an issue.</p>\n\n<blockquote>\n  <p>------ Rebuild All started: Project: Common, Configuration: Debug x86 ------</p>\n  \n  <p>Common -> C:...\\Common\\bin\\x86\\Debug\\Common.dll</p>\n  \n  <p>------ Rebuild All started: Project: FtpDirWatcher, Configuration: Debug x86 ------</p>\n  \n  <p>FtpDirWatcher -> C:...\\FtpDirWatcher\\bin\\Debug\\FtpDirWatcher.exe</p>\n  \n  <p>------ Rebuild All started: Project: FtpDirWatcher.Test, Configuration: Debug x86 ------</p>\n  \n  <p>Microsoft Moles v0.94.51023.0 - <a href=\"http://research.microsoft.com/moles\" rel=\"nofollow\">http://research.microsoft.com/moles</a> - .NET v4.0.30319</p>\n  \n  <p>Copyright (c) Microsoft Corporation 2007-2010. All rights reserved.</p>\n  \n  <p>00:00:00.00> moles</p>\n\n<pre><code>Moles : info : metadata : ignoring reference C:\\...\\FtpDirWatcher.Test\\MolesAssemblies\\FtpDirWatcher.Moles.dll\n\nMoles : info : metadata : incompatible assembly bitness, using reflection only\n\nMoles : info : metadata : loading C:\\...\\FtpDirWatcher\\bin\\Debug\\FtpDirWatcher.exe (reflection only)\n\nMoles : info : compilation : output assembly name: FtpDirWatcher.Moles\n\nMoles : info : code : found 4 types\n\nMoles : info : code : visibility: exported or assembly(FtpDirWatcher.Moles)\n\n00:00:00.37&gt; code generation\n\n  Moles : info : code : generating code at C:\\...\\FtpDirWatcher.Test\\obj\\x86\\Debug\\Moles\\befw\\m.g.cs\n\n  00:00:00.52&gt; stubs generation\n\n    Moles : info : code : generated 2 stub types\n\n  00:00:00.89&gt; moles generation\n\n    Moles : info : code : generated 2 mole types\n\n00:00:01.45&gt; compiling\n\n  Moles : info : compilation : Moles assembly: C:\\...\\FtpDirWatcher.Test\\MolesAssemblies\\FtpDirWatcher.Moles.dll\n</code></pre>\n  \n  <p>00:00:02.37> moles generator 0 errors, 0 warnings</p>\n  \n  <p>FtpDirWatcher.Test -> C:...\\FtpDirWatcher.Test\\bin\\x86\\Debug\\FtpDirWatcher.Test.dll\n  ========== Rebuild All: 3 succeeded, 0 failed, 0 skipped ==========</p>\n</blockquote>\n"},{"tags":["visual-studio-2010","unit-testing","c#-4.0","moles","pex"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12594514,"title":"Moles not Woking with VS2010 Framework 4 Client Profile","body":"<p>I have build a solution in .net4 Client Profile. Now i have add the test project &amp; tried to add Moles assembly for the my dll.it gives an error saying that</p>\n\n<p>\"The Command \"path to the Mole.exe\" @\"path of Mole.args\" exited with code - 1008</p>\n\n<p>\"Error  210 The command \"\"C:\\Program Files\\Microsoft Moles\\bin\\moles.exe\" @\"D:\\Fdi_MainTrack_SCA\\FDI UID Renderring\\Main_Track\\FDI UID Renderer\\Fdi.UidRenderer\\Fdi.UidRenderer.ObjectManager.Tests\\obj\\Debug\\Moles\\moles.args\"\" exited with code -1008.\"</p>\n\n<p>can you any one know why this is happening ?</p>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12611232,"title":"Can you include phone shutdown in iOS unit testing?","body":"<p>I was wondering if it was possible to test iOS phone state in your unit testing? Is it possible to shutdown the phone and then turn it back on in your unit test? Is there a third party software that could test this?</p>\n\n<p>thanks in advance!!</p>\n"},{"tags":["c#","unit-testing"],"answer_count":10,"favorite_count":8,"up_vote_count":27,"down_vote_count":0,"view_count":2746,"score":27,"question_id":347156,"title":"Do you put unit tests in same project or another project?","body":"<p>Do you put unit tests in the same project for convenience or do you put them in a separate assembly?</p>\n\n<p>If you put them in a separate assembly like we do, we end up with a number of extra projects in the solution.  It's great for unit testing while coding but how do you release the application without all of these extra assemblies?</p>\n"},{"tags":["c#","unit-testing","rhino-mocks"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":329,"score":3,"question_id":9435140,"title":"Rhino Mocks IgnoreArguments() and testing if a lambda was called correctly","body":"<p>Here's what I have:</p>\n\n<pre><code>   public interface IDataCenterMsmqWriter\n   {\n      void UpdateData(Action&lt;DataCenterWcfProxy&gt; action);\n   }\n</code></pre>\n\n<p>System under test:</p>\n\n<pre><code>public class WcfService : IWcfService\n{\n    private readonly IDataCenterMsmqWriter _writer;\n\n    public WcfService(IDataCenterMsmqWriter writer)\n    {\n        _writer = writer;\n    }\n\n    #region IWcfService members\n\n    public void SendData(SomeData data)\n    {\n        _writer.UpdateData(d =&gt; d.SendVarData(data));\n    }\n\n    // other members of IWcfService elided\n    #endregion\n}\n</code></pre>\n\n<p>How do I test with Rhino Mocks setting the _writer as a Mock and want to test that the correct Action was called in the UpdateData method.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>// _writer is setup as a mock\nvar data = new SomeData();\n_wcfServiceSUT.SendData(data);\n_writer.AssertWasCalled(d =&gt; d.UpdateData(x =&gt; x.SendVarData(data));\n</code></pre>\n\n<p>doesn't work.</p>\n\n<p>I can add the:</p>\n\n<p>, p => p.IgnoreArguments() after the UpdateData inside the AssertWasCalled, but that does not give me what I want, to make sure SendVarData was called with the data variable.</p>\n\n<p>I've looked at this:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/6413040/rhino-mocks-how-to-assert-that-an-action-was-called\">Rhino Mocks- How to assert that an action was called</a></p>\n\n<p>but my Action isn't mocked like mockDialogService in his example.</p>\n\n<p>Is there a way to test if an Action or Func was called properly with the right input parameters, etc?</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12604197,"title":"how to throw IOException while reading a file using Mockito?","body":"<p>I have to throw an <code>IOException</code> using Mockito for a method, which is reading an input stream like given below. Is there any way to do it?</p>\n\n<pre><code>public void someMethod(){\n try{\n  BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));\n  firstLine = in.readLine();\n }catch(IOException ioException){\n  //Do something\n }\n</code></pre>\n\n<p>I tried mocking like</p>\n\n<pre><code>  BufferedReader buffReader = Mockito.mock(BufferedReader.class);\n  Mockito.doThrow(new IOException()).when(buffReader).readLine();\n</code></pre>\n\n<p>but didn't work out :(</p>\n"},{"tags":["oracle","unit-testing","plsql","sql-developer"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":176,"score":2,"question_id":12594478,"title":"Validating a PL/SQL Stored Procedure OUT REF CURSOR in SQL Developer's Unit Testing framework","body":"<p>I am developing a series of PL/SQL Stored Procedures in a package that open REF CURSORs that are passed to the caller as OUT parameters for purposes of interoperability with another framework. I am using SQL Developer and recently started looking into using the testing features built into it.</p>\n\n<p>I am looking for a way to validate the results of a REF CURSOR using SQL Developer's Unit Testing framework. I developed some paging logic, and I want to ensure that it is operating correctly so I was hoping I could verify that I have the correct number of rows and that their row numbers are within the range of the appropriate page.</p>\n\n<p>I found a similar question <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=2131008\" rel=\"nofollow\">here</a>, but that solution renders the unit tests absolutely useless (at least as far as I can tell) because it doesn't actually perform any validation after running the procedure. If someone could explain how to validate it or show me what I'm missing from the solution from Oracle's Forums, I would appreciate it.</p>\n"},{"tags":["ruby-on-rails","unit-testing","testing","functional-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":12608862,"title":"How to use dom_id on non-saved/mock objects in Rails?","body":"<p><strong>Note: I'm only posting this question so that others may find it if they ever need to, as I have found a good solution.</strong></p>\n\n<p>In my controller tests, I don't want to commit to the database, but I still want the controllers to use finder methods to get mock objects (by mocking the <code>find</code> method), but then I want to use <code>dom_id</code> on those mocks in <code>assert_select</code>, to verify that they're being displayed.</p>\n\n<p>However, since they're non-saved objects, <code>dom_id</code> keeps returning <code>new_object</code> instead of <code>object_1</code>, <code>object_2</code>, et cetera.</p>\n\n<p>Is there any quick way to get it to work? I really don't want to persist real records in tests.</p>\n"},{"tags":["java","unit-testing","xmlunit"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":12606959,"title":"Using RecursiveElementNameAndTextQualifier(XMLUnit)","body":"<p>I need to compare two XML files where both have different order of entities.  </p>\n\n<pre><code> &lt;root&gt; \n  &lt;parent1&gt; \n   &lt;parent2&gt; \n     &lt;value&gt;1&lt;/value&gt;  \n   &lt;/parent2&gt; \n   &lt;parent2&gt; \n    &lt;value&gt;2&lt;/value&gt;  \n   &lt;/parent2&gt; \n  &lt;/parent1&gt;  \n  &lt;parent1&gt; \n   &lt;parent2&gt; \n     &lt;value&gt;3&lt;/value&gt;  \n   &lt;/parent2&gt; \n   &lt;parent2&gt; \n     &lt;value&gt;4&lt;/value&gt;  \n   &lt;/parent2&gt; \n  &lt;/parent1&gt; \n&lt;/root&gt;\n</code></pre>\n\n<p>As in the above example, if I swap the position of 1 and 2 in the other xml file, the test should pass. I am using <code>diff.overrideElementQualifier(new RecursiveElementNameAndTextQualifier())</code> for this purpose but it keeps failing the test!</p>\n\n<p>Could you please advise on what the problem is?</p>\n"},{"tags":["unit-testing","asp.net-web-api","moq","xunit","autofixture"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":66,"score":3,"question_id":12605977,"title":"Autofixture and WebApi Controller","body":"<p>I am using AutoFixture to try to test my controllers for a WebApi site.  I am using the AutoData feature with Moq as noted on <a href=\"http://blog.ploeh.dk/2010/10/08/AutoDataTheoriesWithAutoFixture.aspx\" rel=\"nofollow\">Ploeh's blog</a>.</p>\n\n<p>My controller takes an IDepartmentManager in the constructor.  Here is my test:</p>\n\n<pre><code>[Theory, AutoMoqData]\npublic void GetCallsManagerCorrectly(\n    [Frozen]Mock&lt;IDepartmentManager&gt; departmentManagerMock,\n    DepartmentsController sut)\n{\n    // Fixture setup\n    // Exercise system\n    sut.Get();\n    // Verify outcome\n    departmentManagerMock.Verify(d =&gt; d.GetAllDepartments(), Times.Exactly(1));\n    // Teardown\n}\n</code></pre>\n\n<p>When I run this test it fails with the following:</p>\n\n<blockquote>\n  <p>GetCallsManagerCorrectly has failed:<br>\n  System.InvalidOperationException : An exception was thrown while\n  getting data for theory\n  Provision.Tests.WebApiControllerTests.DepartmentControllerTests.GetCallsManagerCorrectly:\n  System.Reflection.TargetInvocationException: Exception has been thrown\n  by the target of an invocation. ---> System.ArgumentException: Only\n  'http' and 'https' schemes are allowed.   Parameter name: value   at\n  System.Net.Http.HttpRequestMessage.set_RequestUri(Uri value)</p>\n</blockquote>\n\n<p>First of all, is this still a valid and recommended way to write these tests?  I love how small it makes everything.</p>\n\n<p>Secondly, what should I do to fix this?  If I change my test to this:</p>\n\n<pre><code>[Theory, AutoMoqData]\npublic void GetCallsManagerCorrectly(\n    [Frozen]Mock&lt;IDepartmentManager&gt; departmentManagerMock)\n{\n    // Fixture setup\n    DepartmentsController sut =\n        new DepartmentsController(departmentManagerMock.Object);\n    // Exercise system\n    sut.Get();\n    // Verify outcome\n    departmentManagerMock.Verify(d =&gt; d.GetAllDepartments(), Times.Exactly(1));\n    // Teardown\n}\n</code></pre>\n\n<p>it passes, but then I lose the ability to have the controller built up automatically and still be ok if I add parameters to the constructor.</p>\n"},{"tags":["php","unit-testing","testing","constructor","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12606232,"title":"If testing accessors is a waste of time, what about testing the constructor logic?","body":"<p>It seems that many people think that unit testing setters and getters is just a waste of time, and the accessors should be tested only when contain some sort of logic. I agree.</p>\n\n<p>But what about properties that require some (small amout of) logic?</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class DeliveryReportEvent extends Event\n{\n    private static $reasonMap = array(\n        '401' =&gt; \"Message expired (device off/not reachable)\",\n        '201' =&gt; \"Operator network malfunctioning\",\n        '203' =&gt; \"Recipient unreachable (in roaming)\",\n        '301' =&gt; \"Invalid recipient (nonexistent/on portability/not enabled)\",\n        '302' =&gt; \"Wrong number\",\n        '303' =&gt; \"SMS service not enabled\",\n    );\n\n    private $errorCode;\n\n    public function __construct($errorCode)\n    {\n        $this-&gt;errorCode = $errorCode;\n\n        if(array_key_exists($errorCode, self::$reasonMap)) {\n            $this-&gt;errorReason = self::$reasonMap;\n        }\n    }\n\n    public function getErrorCode()\n    {\n        return $this-&gt;errorCode;\n    }\n\n    public function getErrorReason()\n    {\n        return $this-&gt;errorReason;\n    }\n}\n</code></pre>\n\n<p>While testing <code>getErrorCode()</code> may sound stupid (because the absence of logic and IDE features), do you thing that testing <code>getErrorReason()</code> makes sense?</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>/**\n * @dataProvider getKnownErrorCodesAndReasons\n */\npublic function testErrorReasonWithKnownErrorCodes($knownErrorCode,\n    $expectedErrorReason)\n{\n    $event = $this-&gt;getMockDeliveryReportEvent($knownErrorCode);\n\n    $actualErrorReason = $event-&gt;getErrorReason();\n\n    $this-&gt;assertNotNull($errorReason);\n    $this-&gt;assertContains($expectedErrorReason, $actualErrorReason, '', true);\n}\n\npublic function getKnownErrorCodesAndReasons()\n{\n    return array(\n        array('401', \"expired\"),\n        array('201', \"network malfunctioning\"),\n        array('203', \"unreachable\"),\n        array('301', \"invalid recipient\"),\n        array('302', \"wrong number\"),\n        array('303', \"not enabled\"),\n    );\n}\n</code></pre>\n"},{"tags":["c#","unit-testing"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12606214,"title":"Why the test 'Assert.AreEqual' has failed when I compare two empty list?","body":"<p>I have a class MyCustomClass:</p>\n\n<pre><code>public MyCustomClass\n{\n    public MyCustomClass()\n    {\n        MyObject = new List&lt;MyCustomObject&gt;();\n    }\n\n    public List&lt;MyCustomObject&gt; MyObject {get; set;}\n}\n</code></pre>\n\n<p>In the Test:</p>\n\n<pre><code>List&lt;MyCustomObject&gt; aux = new List&lt;MyCustomObject&gt;();\nMyCustomClass oClass = new MyCustomClass();\nAssert.AreEqual(aux, oClass.MyObject)\n</code></pre>\n\n<p>The test has failed, why? Every property, static member, etc are the same.</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1809,"score":4,"question_id":7493102,"title":"PHPUnit: CLI output during test debugging possible?","body":"<p>When running a PHPUnit test, I would like to be able to dump output so I can debug one or two things.</p>\n\n<p>I have tried the following (similar to the <a href=\"http://www.phpunit.de/manual/current/en/fixtures.html#fixtures.examples.TemplateMethodsTest.php\" rel=\"nofollow\">PHPUnit Manual example</a>);</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>class theTest extends PHPUnit_Framework_TestCase\n{\n    /**\n     * @outputBuffering disabled\n     */\n    public function testOutput() {\n        print_r(\"Hello World\");\n        print \"Ping\";\n        echo \"Pong\";\n        $out = \"Foo\";\n        var_dump($out);\n    }   \n}\n</code></pre>\n\n<p>With the following result:</p>\n\n<pre><code>PHPUnit @package_version@ by Sebastian Bergmann.\n\n.\n\nTime: 0 seconds, Memory: 3.00Mb\n\nOK (1 test, 0 assertions)\n</code></pre>\n\n<p>Notice there is none of the expected output.</p>\n\n<p>I'm using the HEAD versions of the <a href=\"https://github.com/sebastianbergmann/phpunit\" rel=\"nofollow\">git repos</a> as of September 19th, 2011.</p>\n\n<p>Output of <code>php -version</code>:</p>\n\n<pre><code>$ php -version\nPHP 5.2.9 (cli) (built: Dec  8 2010 11:36:37) \nCopyright (c) 1997-2009 The PHP Group\nZend Engine v2.2.0, Copyright (c) 1998-2009 Zend Technologies\n    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans\n</code></pre>\n\n<p>Is there anything I'm doing wrong, or is this potentially a PHPUnit bug?</p>\n"},{"tags":["visual-studio-2010","unit-testing","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12599728,"title":"Calling a method twice with different values Unit testing using MOQ","body":"<p>I want to test a construct which calls a method within it twice to get two different values</p>\n\n<pre><code>public class  stubhandler\n{\n\npublic stubhandler()\n{\n\nstring codetext = model.getValueByCode(int a,string b); // 1,\"High\"    result Canada\nstring datatext = model.getValueByCode(int a,string b); // 10, \"Slow\"   result Motion\n\n}\n\n}\n</code></pre>\n\n<p>To test the above i use a unit test class</p>\n\n<pre><code>[TestMethod]\npublic void StubHandlerConstructor_Test()\n{\nMock&lt;Model&gt; objMock = new Mock&lt;&gt;(Model);\nobjMock.Setup(m =&gt; m.getValueByCode(It.IsAny&lt;int&gt;,It.IsAny&lt;string&gt;)).Returns(\"Canada\");\n\nobjMock.Setup(m =&gt; m.getValueByCode(It.IsAny&lt;int&gt;,It.IsAny&lt;string&gt;)).Returns(\"Motion\");\n\nstubhandler  classstubhandler = new stubhandler();\n\n}\n</code></pre>\n\n<p>The above method pass but codetext and datatext contains same value Motion\ni want them to set to </p>\n\n<pre><code>codetext = Canada\ndatatext = Motion\n</code></pre>\n\n<p>How can i achieve this?</p>\n\n<p>I have tried <code>objMock.VerifyAll()</code> which fails the test ??</p>\n"},{"tags":["c#","unit-testing","events","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12605044,"title":"Using Moq to test events that are not in an interface","body":"<p>Is there a way to unit test raising an event with moq if an event that is used in an interface implementation does not appear in the interface you are mocking? </p>\n\n<p>Note: My interface doesn't have anything to do with my UI and my events are just used for UI notifications, so I wanted to decouple that behavior from the actual interface as the repository is in a separate library from the client/UI. </p>\n\n<p>For example:</p>\n\n<pre><code>    [Test]\n    public void TestRaiseBarProcessed()\n    {\n        ManualResetEvent barProcessedEvent = new ManualResetEvent(false);\n        bool called = false;\n\n        //Arrange\n        Mock&lt;IFooRepository&gt; mockFooRepository = new Mock&lt;IFooRepository&gt;();\n\n        mockSourceRepository\n            .Setup(a =&gt; a.SearchForBar(barsToFind))\n            .Returns(barsFound)\n            .Raises(\n                a =&gt; a.BarProcessed += null, \n                new BarFoundEventArgs(It.IsAny&lt;string&gt;()));\n\n        IList&lt;IFooRepository&gt; mockFooRepositories = \n            new List&lt;IFooRepository&gt;();\n\n        mockFooRepositories.Add(mockFooRepository.Object);\n\n        FooBar fooBar = new FooBar(mockFooRepositories, FooList);\n\n        fooBar.CurrentBarBeingProcessedInfo += (sender, e) =&gt;\n            {\n                barProcessedEvent.Set();\n                called = true;\n            };\n\n        //Act\n        fooBar.CallFooRepositoryMethod();\n\n        barProcessedEvent.WaitOne(25, false);\n\n        //Assert\n        mockFooRepository.Verify(\n            a =&gt; a.SearchForBar(barsToFind),\n            Times.Once());\n\n        Assert.AreEqual(true, called);\n    }\n</code></pre>\n\n<p>Let me know if any of this needs more clarification. </p>\n"},{"tags":["javascript","unit-testing","visual-studio-2012","chutzpah"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12604648,"title":"JavaScript test fails in Visual Studio 2012 test explorer but succeeds in resharper","body":"<p>I've come across a very annoying problem writing my JavaScript test for the present project I'm in.</p>\n\n<p>Chutzpah Test Adapter for Visual Studio 2012 is installed (uninstalled and installed once a again)</p>\n\n<p>All other JavaScript tests runs smoothly except one (the reason why I'm asking for help here)</p>\n\n<p>The JavaScript tests succeeded if I run them in Resharper, but when I run them in Visual Studio 2012 test explorer one of them as mentioned above) won't succeed.</p>\n\n<p>I've debugged the whole code, restarted Visual Studio, restarted my computer, deleted my project and downloaded it again from our Team Foundation Server, I also deleted and created new a workspace, but nothing helps, this is really frustrating. I've search all over internet but haven't found anything or anyone who stumbled upon this problem...</p>\n\n<p>the build is fine and the application runs perfectly...</p>\n\n<p>If you have any idea why this one doesn't work, pls let me know!</p>\n"},{"tags":["ios","unit-testing","core-animation","core-graphics","instruments"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12602758,"title":"Automating Core Graphics with Instruments to measure average/max/min FPS when tweaking settings","body":"<p>I'm wondering if there is any way to automate testing my UI when making small changes to see what yields better FPS. When I'm doing the testing myself there are always small discrepencies with each test that could alter my results. I'm talking about trying to squeeze 1-2 fps out of minor, incremental changes.</p>\n\n<p>Is there a way in Instruments or a third-party resource to do any UI automation so that I can get a consistant test to measure average/max/min FPS?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","api","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12597925,"title":"Unit testing Web API consumer module","body":"<p>My code is the consumer of an API (www.abc.com/public/news/apple.json). I get a json array in return which I then parse and populate in my own data structure. the code responsible for doing this is:</p>\n\n<pre><code>    public Map&lt;String,List&lt;NewsItem&gt;&gt; populateNewsArray() throws Exception\n        {\n            url = domain + newsApiStr;\n            InputStream stream = getNews(url, true);\n\n           //jackson library object mapper\n           ObjectMapper mapper = new ObjectMapper();\n\n          //NewsApiObject class implements the structure of the json array returned.\n           List&lt;NewsApiObject&gt; mappedData = mapper.readValue(stream, NewsApiObject.class));\n\n           //populate the properties in a HashMap.\n          //return HashMap\n     }\n\n     public InputStream getNews(String request, boolean bulk) throws Exception\n     {\n        URL url = new URL(request); \n        connection = (HttpURLConnection) url.openConnection();           \n        connection.setDoOutput(true);\n        connection.setInstanceFollowRedirects(false);\n        connection.setRequestMethod(\"GET\"); \n        connection.setRequestProperty(\"Content-Type\", \"text/plain\"); \n        connection.setRequestProperty(\"charset\", \"utf-8\");\n        connection.connect();\n\n        return connection.getInputStream();\n     }\n</code></pre>\n\n<p>As you can see I am not the controller of the api, only the consumer. It is said that in unit tests, one is not suppose to make http requests. In this scenario, how can I unit test the populateNewsArray() function to see if the object mapping was correct (without any exceptions) and a valid hashmap was returned? </p>\n"},{"tags":["sql-server","unit-testing","tsqlt"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":12600488,"title":"tsqlt error handling trumping stored procedure (unit) error handler","body":"<p>When trying to validate a user supplied GUID within a stored procedure a simple approach was used; take the user input as a CHAR(36) then explicitly CAST it as a UNIQUEIDENTIFIER within a TRY CATCH. The CATCH then bubbles the error with a custom error description using a RAISERROR.</p>\n\n<p>Running the stored procedure manually everything performs as expected and the error is raised.</p>\n\n<p>Create a tSQLt test to call the unit (the procedure with GUID validation) and handle the error that is output and compare with the expected error continually fails with a transaction error; tSQLt has detected an error and handled within the tSQLt framework.</p>\n\n<p>This suggests to me that the severity of a failure to CAST to a different datatype is being handled by tSQLt and it is preventing the TRY/CATCH within the stored procedure to handle it. Much like nested procedures sometimes ignore the TRY/CATCH within the child procedure and bubble up to the parent procedure; example being if the child proc. references a table that doesn't exist.</p>\n\n<p>Has anyone had a similar issue? Just simply to validate my current line of thinking.</p>\n\n<p>I've removed the test and it's being tested elsewhere, but this has caused me a 'hole' it my DB unit tests.</p>\n\n<p>Finally, I think I should mention that I know I can perform a different validation on a supplied CHAR parameter, other than a CAST, and raise an error that way, but this is a tSQLt query and not a tSQL query.</p>\n\n<p>EDIT</p>\n\n<p>Example of the code:</p>\n\n<p>@sGUID is a CHAR(36) and is a parameter passed to the procedure.</p>\n\n<pre><code>BEGIN TRY\n    SELECT CAST(@sGUID AS UNIQUEIDENTIFIER)\nEND TRY \nBEGIN CATCH\n    RAISERROR('Invalid GUID format',16,1)\nEND CATCH\n</code></pre>\n\n<p>The SELECT line never triggers the CATCH tSQLt appears to intervene before hand and throws the ROLLBACK transaction error.</p>\n"},{"tags":["c#","unit-testing","nunit","mocking"],"answer_count":11,"favorite_count":11,"up_vote_count":22,"down_vote_count":0,"view_count":14657,"score":22,"question_id":489819,"title":"Unit test HttpContext.Current.Cache or other server-side methods in C#?","body":"<p>When creating a unit test for a class that uses the <a href=\"http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx\"><code>HttpContext.Current.Cache</code> class</a>, I get an error when using NUnit.  The functionality is basic - check if an item is in the cache, and if not, create it and put it in:</p>\n\n<pre><code>if (HttpContext.Current.Cache[\"Some_Key\"] == null) {\n    myObject = new Object();\n    HttpContext.Current.Cache.Insert(\"Some_Key\", myObject);\n}\nelse {\n    myObject = HttpContext.Current.Cache.Get(\"Some_Key\");\n}\n</code></pre>\n\n<p>When calling this from a unit test, it fails with at <code>NullReferenceException</code> when encountering the first <code>Cache</code> line.  In Java, I would use <a href=\"http://jakarta.apache.org/cactus/index.html\">Cactus</a> to test server-side code.  Is there a similar tool I can use for C# code?  <a href=\"http://stackoverflow.com/questions/244280/creating-a-system-web-cachcing-cache-object-in-a-unit-test\">This SO question</a> mentions mock frameworks - is this the only way I can test these methods?  Is there a similar tool to run tests for C#?</p>\n\n<p>Also, I don't check if the <code>Cache</code> is null as I don't want to write code specifically for the unit test and assume it will always be valid when running on a server.  Is this valid, or should I add null checks around the cache?</p>\n"},{"tags":["php","unit-testing","symfony2","mocking","phpunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12599957,"title":"Undefined method on mock object implementing a given interface in PHPUnit?","body":"<p>I'm new to unit testing and PHPUnit.</p>\n\n<p>I need a mock, on which I have a full control, implementing <code>ConfigurationInterface</code> interface. Test subject is <code>ReportEventParamConverter</code> object and test must check the interaction between my object and the interface.</p>\n\n<p><code>ReportEventParamConverter</code> object (here simplified):</p>\n\n\n\n<pre class=\"lang-php prettyprint-override\"><code>class ReportEventParamConverter implements ParamConverterInterface\n{\n    /**\n     * @param Request $request\n     * @param ConfigurationInterface $configuration\n     */\n    function apply(Request $request, ConfigurationInterface $configuration)\n    {\n        $request-&gt;attributes-&gt;set($configuration-&gt;getName(), $reportEvent);\n    }\n\n    /**\n     * @param ConfigurationInterface $configuration\n     * @return bool\n     */\n    function supports(ConfigurationInterface $configuration)\n    {\n        return 'My\\Namespaced\\Class' === $configuration-&gt;getClass();\n    }\n}\n</code></pre>\n\n<p>And this is the way I'm trying to mock the interface:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$cls = 'Sensio\\Bundle\\FrameworkExtraBundle\\Configuration\\ConfigurationInterface';\n$mock = $this-&gt;getMock($mockCls);\n</code></pre>\n\n<p>I need to simulate the returned values for two methods: <code>getClass()</code> and <code>getName()</code>. For example:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$mock-&gt;expects($this-&gt;any())\n    -&gt;method('getClass')\n    -&gt;will($this-&gt;returnValue('Some\\Other\\Class'))\n;\n</code></pre>\n\n<p>When i create a new <code>ReportEventParamConverter</code> and test <code>supports()</code> method, i get the following PHPUnit error:</p>\n\n<blockquote>\n  <p>Fatal error: Call to undefined method\n  Mock_ConfigurationInterface_21e9dccf::getClass().</p>\n</blockquote>\n\n<pre class=\"lang-php prettyprint-override\"><code>$converter = new ReportEventParamConverter();\n$this-&gt;assertFalse($converter-&gt;supports($mock));\n</code></pre>\n"},{"tags":["ios","xcode","unit-testing"],"answer_count":3,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":2629,"score":16,"question_id":6302362,"title":"xcode 4 fails to initiate unit tests (with linker error) after I created a new scheme","body":"<p>My unit tests worked fine in xcode4 until I had to create a new schema to compile a package to run on my device for testing. </p>\n\n<p>All I did was creating  a new Target and a new Scheme, now I try to run the unit tests and get the following error: </p>\n\n<p><strong>The test bundle at [...]Tests.octest could not be loaded because a link error occurred.  It is likely that dyld cannot locate a framework framework or library that the the test bundle was linked against, possibly because the framework or library had an incorrect install path at link time.</strong></p>\n\n<p>What did I break?</p>\n"},{"tags":["asp.net-mvc","unit-testing","httpwebrequest","nunit","rhino-mocks"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12600118,"title":"Unit testing using multiple Http Requests vs multiple threads","body":"<p><strong>Summary</strong>:<br>\nI want to be able to mimic multiple Http Requests in my Unit Tests (as opposed to multiple threads).  </p>\n\n<p><strong>Detail</strong>:<br>\nI had a TCP client that had been held in the web cache - the problem was that when one Web Request finished it cleaned up it's resources, and closed/disposed the TCP client's connection.  Another Request was using the same instance of the TCP client and therefore threw an exception because it had been disposed.</p>\n\n<p>I therefore moved the TCP Client into the HttpContext's Current Items collection (which is \"Request Safe\").  I now want to create some unit tests to show that when one Request finishes it does NOT affect the TCP client being used by the other Request.</p>\n\n<p>If my Unit test spawns different worker threads, then these effectively operate in the same request, not different requests.  Any ideas on how best to approach this?</p>\n\n<p>Thanks</p>\n\n<p>Griff</p>\n"},{"tags":["php","unit-testing","phpunit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12597432,"title":"PHPUnit - Running all tests twice with cache on/off?","body":"<p>I'd like to make sure my code always works as intended whether a memcached server is available or not.</p>\n\n<p>Most of my functions look like this:</p>\n\n<pre><code>function foo($parameter,$force = FALSE)\n{\n    $result = Cache::get('foo_'.$parameter);\n\n    if (empty($result) || $force)\n    {\n        // Do stuff with the DB...\n        $result = \"something\";\n        Cache::put('foo_'.$parameter,$result,$timeout);\n    }\n\n    return $result;\n}\n</code></pre>\n\n<p>Now in a TestCase I'm doing this:</p>\n\n<pre><code>class MyClassTest extends PHPUnit_Framework_TestCase {\n    function testFoo()\n    {\n        $result = MyClass-&gt;foo($parameter);\n        $this-&gt;assertSomething($result);\n    }\n}\n</code></pre>\n\n<p>I can disable caches globally during PHPUnit's <code>setUp()</code> like this:</p>\n\n<pre><code>class MyClassTest extends PHPUnit_Framework_TestCase {\n\n    protected function setUp()\n    {\n        Cache-&gt;disable();\n    }\n}\n</code></pre>\n\n<p>After calling <code>Cache-&gt;disable()</code>, all calls to <code>Cache-&gt;get()</code> will return <code>false</code> during that request. Now, I want to run all tests in this class twice, once with <code>Cache-&gt;disable();</code> and once without.</p>\n\n<p>Any ideas on how to do that?</p>\n"},{"tags":["eclipse","unit-testing","cppunit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":12579483,"title":"How to let eclipse ignore specific sub-folder","body":"<p>I'm not familiar with eclipse. I have a question as this topic title. The scenario is that I want create a sub-folder \"test\" (for unit test) in folder src. But after the creation of folder \"test\", eclipse will automatically add this \"test\" folder and its content to current project. This leads to an error of multiple definition of \"main\" function because under \"test\" folder there is also a cpp file that contains main function. What I want is that put the \"test\" folder in src folder but this folder is not belong to current project, this means that when I compile current project the files under \"test\" won't be compiled (There is another test project do this). Anybody know? Thank you in advance!</p>\n"},{"tags":["python","unit-testing","python-3.x","arguments","software-design"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":82,"score":4,"question_id":12576724,"title":"file name vs file object as a function argument","body":"<p>If a function takes as an input the name of a text file, I can refactor it to instead take a file object (I call it \"stream\"; is there a better word?). The advantages are obvious - a function that takes a stream as an argument is:</p>\n\n<ul>\n<li>much easier to write a unit test for, since I don't need to create a temporary file just for the test</li>\n<li>more flexible, since I can use it in situations where I somehow already have the contents of the file in a variable</li>\n</ul>\n\n<p>Are there any disadvantages to streams? Or should I always refactor a function from a file name argument to a stream argument (assuming, of course, the file is text-only)?</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12598551,"title":"How to check the data are entered into 3rd party website using unit test?","body":"<p>I am using MVC application for my website. In my website i am pushing some information to 3rd party website from my website. Can we check whether the data are entered into 3rd party website or not using unit tests?</p>\n\n<p>Also can we check the data are entered in to my own database using unit tests?</p>\n"},{"tags":["database","visual-studio","unit-testing","options","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12598274,"title":"\"Create Unit Test\" option greyed out in Visual Studio Premium 2010","body":"<p>Unitll couple of days before, every thing was working and today \"Create Unit Test\" option in the Database schema view is greyed out. I have checked all the references and are in place properly. Any suggestions please?</p>\n"},{"tags":["unit-testing","maven","jenkins","sonar"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12598086,"title":"Unit test results not showing in Sonar when building child projects in Jenkins","body":"<p>I have some maven projects configured in Jenkins, and I execute them from a parent project (which have them as <code>&lt;modules</code>> in its pom.xml, the children have this project defined as <code>&lt;parent</code>>). </p>\n\n<p>The unit tests execute successfully for each project in Jenkins and it shows the results, but then in Sonar all projects appear as having no unit tests.</p>\n\n<p>The sonar configuration for each project is</p>\n\n<pre><code>sonar.projectKey=project:key\nsonar.projectName=project_name\nsonar.projectVersion=1.0\nsources=src/main/java\ntests=src/test/java\nbinaries=target/classes\n</code></pre>\n\n<p>Do I have to do anything else in order for Sonar to pick up the results of the unit tests being executed?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["unit-testing","fitnesse","fitsharp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12578554,"title":"FitNesse value comparison fails even though the actual and expected is the same","body":"<p>I run a function in SQL Server that returns some calculated values. When testing the results in FitNesse using dbFit it claims that the values are not the same (see the screenshot below). </p>\n\n<p>The values are returned as floats and fails on the comparison of all decimals - even though it only displays two. Is there a way to limit the range of decimals that gets compared?</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZXij6.png\" alt=\"FitNesse values that are mismatched\"></p>\n"},{"tags":["java","unit-testing","hudson","testng","sonar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12588917,"title":"Is there an way to get an accurate count of testng tests via Sonar or Hudson?","body":"<p>Hudson and/or Sonar seem to report the number of test invocations, but not the number of tests.</p>\n\n<p>So if you have </p>\n\n<pre><code>@Test(invocationCount=1000)\ntestFoo() {}\n</code></pre>\n\n<p>Both hudson and sonar will say there are 1000 tests when there really is only one.  Other than wc'ing the number of @Test tags, is there a way to see this value?</p>\n"},{"tags":["c#","unit-testing","mocking","ews","exchangewebservices"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12563499,"title":"Best Strategy for Testing Exchange Web Services API","body":"<p>I'm developing a new C# 3.5 app that needs to monitor an Exchange mailbox and perform some operations when emails are received. I'm aware that Microsoft now <a href=\"http://msdn.microsoft.com/en-us/library/exchange/bb204040%28v=exchg.140%29.aspx\" rel=\"nofollow\">recommends</a> using Exchange Web Services to perform operations on Exchange servers so I've decided to use that.</p>\n\n<p>I also found the <a href=\"http://msdn.microsoft.com/en-us/library/dd633709%28v=exchg.80%29.aspx\" rel=\"nofollow\">Exchange Web Services Managed API</a> (using version 1.2.1) which definitely seems to make the task of calling these web services much easier.</p>\n\n<p>My question is, does anyone have any experience in creating automated unit/integration tests using the Managed API? </p>\n\n<p>At the moment I have no Exchange server so really I'd like to create some kind of mock (I usually use Moq) but <code>Microsoft.Exchange.WebServices.Data.ExchangeService</code> doesn't implement any kind of interface that I can mock. My code is all coded to interface and designed for dependency injection, but I can't think of a good way to abstract out the EWS API dependency.</p>\n"},{"tags":["unit-testing","lambda","rhino-mocks"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12595972,"title":"RhinoMocks and Lambda Expression","body":"<p>With the interface below:</p>\n\n<pre><code>public interface IRepository&lt;T&gt;\n{\n    T FirstOrDefault(Func&lt;T, bool&gt; predicate);\n}\n</code></pre>\n\n<p>Implemented like so:</p>\n\n<pre><code>private IRepository&lt;Foo&gt; Repository {get;set;}\npublic FooService(IRepository&lt;Foo&gt; repository)\n{\n    Repository = repository;\n}    \n\npublic void Foo(int bar)\n{\n    var result = Repository.FirstOrDefault(x =&gt; x.Id.Equals(bar));\n    if (result == null)\n    {\n        throw new Exception(\"Returned null, not what I expected!\");\n    }\n}\n</code></pre>\n\n<p>If I write a test like this:</p>\n\n<pre><code>repos = MockRepository.GenerateMock&lt;IRepository&lt;Foo&gt;&gt;(null);\nrepos.Expect(x =&gt; x.FirstOrDefault(y =&gt; y.Id.Equals(Arg&lt;int&gt;.Is.Anything))).Throw(new Exception(\"This exception should be thrown!\"));\n\nFooService f = new FooService(repos);\nf.Foo(1);\n//expecting exception to be thrown\n</code></pre>\n\n<p>I do not get the expected exception thrown, so I am presuming that mocked call is being ignored/not called.</p>\n\n<p>However if I add <code>IgnoreArguments()</code> it <em>is</em> called and I do get the expected exception.</p>\n\n<pre><code>repos.Expect(x =&gt; x.FirstOrDefault(y =&gt; y.Id.Equals(Arg&lt;int&gt;.Is.Anything))).IgnoreArguments().Throw(new Exception(\"This exception should be thrown!\"));\n</code></pre>\n\n<p>Any thoughts as to what it is I am doing wrong?</p>\n"},{"tags":["php","unit-testing","zend-framework","dependency-injection","phpunit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":262,"score":2,"question_id":6273541,"title":"How to inject mock classes into controllers (without having the controller aware of the tests)","body":"<p>This is a follow-on from a previous question I had: <a href=\"http://stackoverflow.com/questions/6222001/how-to-decouple-my-data-layer-better-and-restrict-the-scope-of-my-unit-tests\">How to decouple my data layer better and restrict the scope of my unit tests?</a></p>\n\n<p>I've read around on Zend and DI/IoC and came up with the following changes to my code:</p>\n\n<p><strong>Module Bootstrap</strong></p>\n\n<pre><code>class Api_Bootstrap extends Zend_Application_Module_Bootstrap\n{\n    protected function _initAllowedMethods()\n    {\n        $front = Zend_Controller_Front::getInstance();\n        $front-&gt;setParam('api_allowedMethods', array('POST'));\n    }\n\n    protected function _initResourceLoader()\n    {\n        $resourceLoader = $this-&gt;getResourceLoader();\n        $resourceLoader-&gt;addResourceType('actionhelper', 'controllers/helpers', 'Controller_Action_Helper');\n    }\n\n    protected function _initActionHelpers()\n    {\n        Zend_Controller_Action_HelperBroker::addHelper(new Api_Controller_Action_Helper_Model());\n    }\n}\n</code></pre>\n\n<p><strong>Action Helper</strong></p>\n\n<pre><code>class Api_Controller_Action_Helper_Model extends Zend_Controller_Action_Helper_Abstract\n{\n    public function preDispatch()\n    {\n        if ($this-&gt;_actionController-&gt;getRequest()-&gt;getModuleName() != 'api') {\n            return;\n        }\n\n        $this-&gt;_actionController-&gt;addMapper('account', new Application_Model_Mapper_Account());\n        $this-&gt;_actionController-&gt;addMapper('product', new Application_Model_Mapper_Product());\n        $this-&gt;_actionController-&gt;addMapper('subscription', new Application_Model_Mapper_Subscription());\n    }\n}\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class Api_AuthController extends AMH_Controller\n{\n    protected $_mappers = array();\n\n    public function addMapper($name, $mapper)\n    {\n        $this-&gt;_mappers[$name] = $mapper;\n    }\n\n    public function validateUserAction()\n    {\n        // stuff\n\n        $accounts = $this-&gt;_mappers['account']-&gt;find(array('username' =&gt; $username, 'password' =&gt; $password));\n\n        // stuff\n    }\n}\n</code></pre>\n\n<p>So, now, the controller doesn't care what specific classes the mappers are - so long as there is a mapper...</p>\n\n<p>But <strong>how do I now replace those classes with mocks for unit-testing without making the application/controller aware that it is being tested?</strong> All I can think of is putting something in the action helper to detect the current application enviroment and load the mocks directly:</p>\n\n<pre><code>class Api_Controller_Action_Helper_Model extends Zend_Controller_Action_Helper_Abstract\n{\n    public function preDispatch()\n    {\n        if ($this-&gt;_actionController-&gt;getRequest()-&gt;getModuleName() != 'api') {\n            return;\n        }\n\n        if (APPLICATION_ENV != 'testing') {\n            $this-&gt;_actionController-&gt;addMapper('account', new Application_Model_Mapper_Account());\n            $this-&gt;_actionController-&gt;addMapper('product', new Application_Model_Mapper_Product());\n            $this-&gt;_actionController-&gt;addMapper('subscription', new Application_Model_Mapper_Subscription());\n        } else {\n            $this-&gt;_actionController-&gt;addMapper('account', new Application_Model_Mapper_AccountMock());\n            $this-&gt;_actionController-&gt;addMapper('product', new Application_Model_Mapper_ProductMock());\n            $this-&gt;_actionController-&gt;addMapper('subscription', new Application_Model_Mapper_SubscriptionMock());\n        }\n    }\n}\n</code></pre>\n\n<p>This just seems wrong...</p>\n"},{"tags":["javascript","unit-testing","node.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12595325,"title":"JavaScript unit tests: where to keep test/specs files (Client and Node)","body":"<p>Is it ok to store test file in the location of module itself:</p>\n\n<p>Lets say I have a structure:</p>\n\n<pre><code>project\\\n  module1\\\n    submodule\\\n       submodule.js\n       submodule.test.js\n</code></pre>\n\n<p>Or it is better to make a separate location that will repeat the structure of the project:</p>\n\n<pre><code>project\\\n  module1\\\n    submodule\\\n       submodule.js\ntests\\\n  module1\\\n    submodule\\\n       submodule.js\n</code></pre>\n\n<p>I've seen both variants. What considerations should be taken?</p>\n"},{"tags":["c#","unit-testing","visual-studio-2012","class-library"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":254,"score":2,"question_id":12594018,"title":"Cannot debug a unit testing project in Visual Studio 2012","body":"<p>I couldn't find a post similar to this, so I hope this isn't a duplicate. </p>\n\n<p>I have a c# class library that I'm trying to run unit tests on in Visual Studio 2012. I've added a new Unit Test Project to my solution, and added my main project as a reference there. I've set my unit test project as the Startup Project. When I try to debug, I get an error message </p>\n\n<p>\"A project with an Output Type of Class Library cannot be started directly. In order to debug this project, add an executable project to this solution which references the library project. Set the executable project as the startup project.\"</p>\n\n<p>According to the walkthrough at <a href=\"http://msdn.microsoft.com/en-us/library/ms182532.aspx\" rel=\"nofollow\">msdn</a>, it should be running the tests when I hit debug. Any thoughts? Here is my unit test code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\n\nusing Microsoft.VisualStudio.TestTools.UnitTesting;\nusing Common;\nusing Messages;\n\nnamespace MessageUnitTests\n{\n    [TestClass]\n    class RegistrationTester\n    {\n        [TestMethod]\n        public void RegistrationRequest_TestConstructorsAndFactories()\n        {\n            RegistrationRequest rr1 = new RegistrationRequest(\"myhandle\");\n            Assert.AreEqual(\"myhandle\", rr1.Handle);\n\n            rr1 = new RegistrationRequest(\"longHandle-ABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789'|;:',.=-_+!@#$%^&amp;*()\");\n            Assert.AreEqual(\"longHandle-ABCDEFGHIJKLMNOPQRSTUVWXYZ-0123456789'|;:',.=-_+!@#$%^&amp;*()\", rr1.Handle);\n\n            rr1 = new RegistrationRequest(\"\");\n            Assert.AreEqual(\"\", rr1.Handle);\n\n            rr1 = new RegistrationRequest(null);\n            Assert.AreEqual(null, rr1.Handle);\n\n            rr1 = new RegistrationRequest(\"myhandle\");\n            ByteList bytes = new ByteList();\n            rr1.Encode(bytes);\n\n            RegistrationRequest rr2 = RegistrationRequest.Create(bytes);\n            Assert.IsNotNull(rr2);\n            Assert.AreEqual(rr1.IsARequest, rr2.IsARequest);\n            Assert.AreEqual(rr1.MessageNr.ProcessId, rr2.MessageNr.ProcessId);\n            Assert.AreEqual(rr1.MessageNr.SeqNumber, rr2.MessageNr.SeqNumber);\n            Assert.AreEqual(rr1.ConversationId.ProcessId, rr2.ConversationId.ProcessId);\n            Assert.AreEqual(rr1.ConversationId.SeqNumber, rr2.ConversationId.SeqNumber);\n            Assert.AreEqual(rr1.RequestType, rr2.RequestType);\n            Assert.AreEqual(rr1.SessionId, rr1.SessionId);\n            Assert.AreEqual(rr1.Handle, rr2.Handle);\n        }\n\n        //[TestMethod]\n        //public void RegistrationRequest_EncodingDecoding()\n        //{\n        //    Message m1 = new RegistrationRequest(\"myhandle\");\n        //    m1.MessageNr = MessageNumber.Create(10, 14);\n        //    m1.ConversationId = MessageNumber.Create(10, 12);\n        //    ByteList bytes = new ByteList\n        //}\n    }\n}\n</code></pre>\n"},{"tags":["unit-testing","dependency-injection","requirejs","jasmine","testr.js"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":127,"score":4,"question_id":12519470,"title":"JavaScript dependency injection using RequireJS, Jasmine and testr","body":"<p>I've just looking for dependency injection in my unit test strategy using RequireJS and Jasmine. I really like the idea behind <a href=\"https://github.com/mattfysh/testr.js\" rel=\"nofollow\">testr</a> and I have tried to setup testr following the examples in github but I can't figure out what is wrong. I always get the error</p>\n\n<blockquote>\n  <p>Error: module has not been loaded: <strong>today</strong></p>\n</blockquote>\n\n<p>when testr tries to load the module that is going to be tested.</p>\n\n<p>Here some context..</p>\n\n<p><strong>index.html</strong>\n..</p>\n\n<pre><code>&lt;script data-main=\"config\" src=\"../../assets/js/libs/require.js\"&gt;&lt;/script&gt;\n&lt;script src=\"vendor/testr.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>config.js</strong>\n..</p>\n\n<pre><code>require.config({\n\n  // Initialize specs.\n  deps:[\"main\"],\n...\n...\n});\n</code></pre>\n\n<p><strong>main.js</strong>\n..</p>\n\n<pre><code>require([\n  // Load the example spec, replace this and add your own spec\n  \"spec/today\"\n], function() {\n  var jasmineEnv = jasmine.getEnv();\n  jasmineEnv.execute();\n});\n</code></pre>\n\n<p><strong>spec\\today.js</strong>\n..</p>\n\n<pre><code>describe('Today print', function() {\n  var date = {}, today;\n  beforeEach(function() {\n     date.today = new Date(2012, 3, 30);\n     today = testr('today', {'util/date': date});  //Here is where the error is thrown\n  });\n\n  it('is user-friendly', function() {\n     expect(today.getDateString()).toBe('Today is Monday, 30th April, 2012');\n  });\n});\n</code></pre>\n\n<p><strong>today.js</strong>\n.. </p>\n\n<pre><code>define(['string', 'util/date'], function(string, date) {\n  return {\n    getDateString: function() {\n      return string.format('Today is %d', date.today);\n    }\n  }\n});\n</code></pre>\n\n<p>Is there anybody that have been with the same kind of trouble? . I'm using RequireJS 2.0.6</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing","discover"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12591832,"title":"python unittest discover","body":"<p>I don't understand something, with the python unittest discover.\nI made this project:</p>\n\n<pre><code>project/\n    __init__.py\n    src/\n        __init__.py\n        criteria.py\n    tests/\n        __init__.py\n        criteria_test.py\n</code></pre>\n\n<p>And to be able to know if I loaded the test correctly I ensure myself to make it fail with the code below</p>\n\n<pre><code># coding: utf-8\nimport unittest\n\nclass TestCriteria(unittest.TestCase):\n    def setUp(self):\n        pass\n    def test_criteriaFailure(self):\n        self.assertTrue(False)\n</code></pre>\n\n<p>When I do the command in the command-line, I'm at the file project (the root of my packages), I guess everything can be imported.</p>\n\n<p>I tried:</p>\n\n<pre><code>python -m unittest discover\npython -m unittest discover -s tests -p '*_test.py'\n</code></pre>\n\n<p>but it always return me this output:</p>\n\n<pre><code>Ran 0 tests in 0.000s\n\nOk\n</code></pre>\n\n<p>I'd like to understand how to use this feature (I'm using python3.2.3) without having to download and install Nose. </p>\n\n<p>Thanks you</p>\n"},{"tags":["android","unit-testing","applicationcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12590048,"title":"Android Unit Test, context is passed between activities in tests","body":"<p>I want to run a number of unit tests on a clean instance of my application and thought I could do that by creating an instance with getActivity and finish it at the end of the test. However, I noticed that the actions in the previous test had effect on the next one. I wrote the following simple application to reproduce the issue.</p>\n\n<p>The test setup shows a number of tests where I get the activity and finish it in each test. During the creation of the activity a counter is incremented in the onCreate. I expect that it is 1 at all 3 tests but I see that it is 3 at the latest test. Somehow the context is reused.</p>\n\n<p>Can somebody explain and show how I can test an application from scratch in each test?</p>\n\n<pre><code>import com.example.activitykeepscontext.MainActivity;\n\npublic class MainActivityTest  extends ActivityInstrumentationTestCase2&lt;MainActivity&gt; {\n\n   public MainActivityTest() {\n        super(\"com.example.activitykeepscontext\", MainActivity.class);\n    }\n\n   public void testCount1() {\n       MainActivity mainActivity = getActivity();\n       mainActivity.finish();\n   }\n\n   public void testCount2() {\n       MainActivity mainActivity = getActivity();\n       mainActivity.finish();\n   }\n\n   public void testCount3() {\n       MainActivity mainActivity = getActivity();\n       mainActivity.finish();\n   }\n\n}\n</code></pre>\n\n<p>This is the application:</p>\n\n<pre><code>package com.example.activitykeepscontext;\n\nimport android.os.Bundle;\nimport android.app.Activity;\nimport android.content.Context;\nimport android.util.Log;\nimport android.view.Menu;\n\npublic class MainActivity extends Activity {\n\n    private static final String TAG = \"MainActivity\";\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        AppData appData = (AppData)getApplicationContext();\n        appData.count++;\n\n        Log.i(TAG, \"Count: \" + appData.count);\n    }\n}\n</code></pre>\n\n<p>and this is the class used to pass the data via the application context.</p>\n\n<pre><code>package com.example.activitykeepscontext;\n\nimport android.app.Application;\n\npublic class AppData  extends Application {\n    public int count;\n}\n</code></pre>\n"},{"tags":["unit-testing","nunit","resharper"],"answer_count":2,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":1648,"score":10,"question_id":1479075,"title":"ReSharper Unit Test Runner - TestCase","body":"<p>I like using the ReSharper unit test runner, but it doesn't support the TestCase attribute that was added in NUnit 2.5. Is there any hack to get round this?</p>\n\n<p>I can obviously use another test runner, but I like the ReSharper one.</p>\n"},{"tags":["c++","unit-testing","winrt","visual-studio-2012","c++-cx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":12581714,"title":"Why my C++/CX unit-test does not fail?","body":"<p>I have the following \"Windows Store/Metro Style\" test methods in VS 2012 C++/CX</p>\n\n<p>This one succeeds, which is ok</p>\n\n<pre><code>TEST_METHOD(TestMethod)\n{\n    bool passed = false;\n    concurrency::event finished;\n    finished.reset();                                   \n    auto testTask = concurrency::create_task( [&amp;finished, &amp;passed]()\n    {   \n        passed = true;\n        finished.set();\n    }); \n    finished.wait(100000);\n    Assert::IsTrue(passed);\n}\n</code></pre>\n\n<p>This one fails, which is also ok:</p>\n\n<pre><code>TEST_METHOD(TestMethod)\n{\n    bool passed = true;\n    concurrency::event finished;\n    finished.reset();                                   \n    auto testTask = concurrency::create_task( [&amp;finished, &amp;passed]()\n    {   \n        passed = false;\n        finished.set();\n    }); \n    finished.wait(100000);\n    Assert::IsTrue(passed);\n}\n</code></pre>\n\n<p>But for some reason, this test does not fail:</p>\n\n<pre><code>TEST_METHOD(FailedTest)\n{\n    concurrency::event finished;\n    finished.reset();                                   \n    auto testTask = concurrency::create_task( [&amp;finished]()\n    {   \n        Assert::IsTrue(false);\n        finished.set();\n    });\n    finished.wait(100000);          \n}\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n\n<p>As a side note, a possible work-around could be to put all the results of my tests in variables and \"test\" them all after <code>finished.wait(100000);</code>, but I still would like to know if there is something actually wrong whit what I am doing.</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":135,"score":1,"question_id":12587108,"title":"How do you set ApiController.User","body":"<p>In my apicontroller I use base.user to identify the authenticated user to use in a lookup.  Now I am writing a unit test for this but I cannot figure out how to mock apicontroller.user.  Do I need to create a request and set the user there?  Or is there another way to set the controller.user?</p>\n\n<p>Here is my controller; I have already mocked repository and membershipservice.</p>\n\n<pre><code>[Authorize]\npublic class DocumentController : ApiController\n{\n    DocumentRepository _repository;\n    IStaticMembershipService _membership;\n\n\n    public IEnumerable&lt;Document&gt; GetDocuments()\n    {\n\n        MembershipUser userAccount = _membership.GetUser(base.User);\n        IEnumerable&lt;Document&gt; docs = null;\n\n        if (userAccount != null)\n        {\n            docs = _repository.GetDocumentsByUserId((Guid)userAccount.ProviderUserKey);\n        }\n\n        return docs;\n    }\n</code></pre>\n\n<p>Here is my unit test:</p>\n\n<pre><code>[TestClass]\npublic class DocumentControllerWebService\n{\n    private DocumentsContext _context;\n    private DocumentRepository _repository;\n    private DocumentController _controller;\n    private FakeMembershipService _membership;\n    private TestContext testContextInstance;\n\n    [TestInitialize]\n    public void MyTestInitialize()\n    {\n        // Create a context with a fake data set provider\n        _context = new DocumentsContext(new FakeDbSetProvider());\n\n        _repository = new DocumentRepository(_context);\n\n        _membership = new FakeMembershipService();\n\n        _controller = new DocumentController(_repository, _membership);\n\n    }\n\n    public void GetDocumentsTest()\n    {\n\n        string userName = \"someUser\";\n\n        MembershipUser userAccount = _membership.GetUser(userName);\n\n        Guid userId = (Guid)userAccount.ProviderUserKey;\n        Guid anotherUserId = Guid.NewGuid();\n\n        // Get some dummy data and insert it into the fake repository\n        List&lt;Document&gt; forms = DocumentDummyData.GetListOfDummyData(userId, anotherUserId);\n        forms.ForEach(f =&gt; _repository.InsertDocument(f));\n\n        // I would like to do this but User is readonly\n        _controller.User = userName;\n\n        List&lt;Document&gt; docs = _controller.GetDocuments().ToList();\n        foreach (Document expected in forms.Where(d =&gt; d.UserId == userId))\n        {\n            Document actual = docs.Where(d =&gt; d.DocumentID == expected.DocumentID).FirstOrDefault();\n            Assert.IsNotNull(actual);\n            Assert.AreEqual(expected.DocumentID, actual.DocumentID);\n        }\n\n\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["asp.net-mvc-3","sql-server-2008","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12584729,"title":"C# test project Wipe database before the tests are run","body":"<p>I have a ASP.NET MVC3 application, where i need to test a database wrapper class. This is up and running. But i need to recreate the database, when the test starts. I need to wipe all data in database. The database is a test double.</p>\n\n<p>I have the SQL script creating the database. For now im running this manualy in \"SQL Server Manager\" and it works. But I would like to have the script run before a new test run.</p>\n\n<p>Anyone know how to do this?</p>\n"},{"tags":["unit-testing","batch-file","automated-tests"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":165,"score":5,"question_id":6612415,"title":"Is there a unit-test framework for Windows batch files?","body":"<p>I need just something very simple like \"run this command and succeed if there is 'this string' somewhere in the console output, fail otherwise\". Is there such a tool?</p>\n"},{"tags":[".net","wcf","unit-testing","mocking","moq"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":581,"score":0,"question_id":4149982,"title":"Mocking WCF client's IQueryable members","body":"<p>I have a WCF data service that exposes interfaces:</p>\n\n<pre><code>public interface IAccountService\n{\n    IQueryable&lt;Account&gt; Accounts { get; }\n    IQueryable&lt;Contract&gt; Contracts { get; }\n}\n\n[DataServiceKey(\"ID\")]\npublic class Account\n{\n    public virtual Guid ID { get; set; }\n    public virtual string AccountName { get; set; }\n    public virtual string Address1 { get; set; }\n    public virtual string Address2 { get; set; }\n    public virtual string City { get; set; }\n    public virtual string State { get; set; }\n    public virtual string Zip { get; set; }\n    public virtual string Phone { get; set; }\n    public virtual string Fax { get; set; }\n    public virtual string Status { get; set; }\n    public virtual DateTime StartDate { get; set; }\n    public virtual IEnumerable&lt;Contract&gt; Contracts { get; set; }\n}\n\n[DataServiceKey(\"ID\")]\npublic class Contract \n{\n    public virtual Guid ID { get; set; }\n    public virtual string ContractCode { get; set; }\n    public virtual string ContractName { get; set; }\n    public virtual DateTime StartDate { get; set; }\n    public virtual int UnitQty { get; set; }\n    public virtual double UnitPrice { get; set; }\n}\n</code></pre>\n\n<p>I want to mock the service client for unit testing. I would like to write a test like:</p>\n\n<pre><code>[Test]\npublic void MockContractsFromAccount()\n{\n    var acctSvc = new Mock&lt;IAccountService&gt;();\n    var blah = new Contract[] { new Contract { ContractCode = \"BLAH001\", ContractName = \"blah 1\" }, \n        new Contract { ContractCode = \"BLAH002\", ContractName = \"blah 2\" } };\n    var blee = new Contract[] { new Contract { ContractCode = \"BLEE001\", ContractName = \"blee 1\" } };\n    var accts = new Account[] { new Account { AccountName = \"blah\", State = \"WY\", Contracts = new DataServiceCollection&lt;Contract&gt;(blah) }, \n        new Account { AccountName = \"blee\", State = \"CO\", Contracts = new DataServiceCollection&lt;Contract&gt;(blee) } };\n    acctSvc.SetupGet(x =&gt; x.Accounts).Returns(accts.AsQueryable());\n\n    var result = from x in acctSvc.Object.Accounts\n                 where x.State == \"CO\"\n                 select x;\n    Assert.That(result, Has.Count.EqualTo(1));\n    Assert.That(result.First().Contracts, Has.Count.EqualTo(2));\n    Assert.That(result, Is.All.EquivalentTo(blah));\n}\n</code></pre>\n\n<p>But the code fails at <code>new DataServiceCollection&lt;Contract&gt;(blah)</code> with the error message </p>\n\n<blockquote>\n  <p>SomeTests.MockContractsFromAccount:\n  System.ArgumentException : The DataServiceContext to which the DataServiceCollection instance belongs could not be determined. The DataServiceContext must either be supplied in the DataServiceCollection constructor or be used to create the DataServiceQuery or QueryOperationResponse object that is the source of the items in the DataServiceCollection</p>\n</blockquote>\n\n<p>This seems like it is getting very complicated. Is there a way to just have Visual Studio generate interfaces for Account &amp; Contract or to have <code>accts.Contracts</code> return an <code>IQueryable&lt;Contract&gt;</code> instead of <code>DataServiceCollection&lt;Contract&gt;</code>? Maybe some other simple solution to mock this service?</p>\n\n<hr>\n\n<p>For the sake of clarity, svcUtil.exe is generating an Account class that looks something like this:</p>\n\n<pre><code>public class Account \n{\n    public Guid ID { get; set; }\n    public string AccountName { get; set; }\n    public string Address1 { get; set; }\n    public string Address2 { get; set; }\n    public string City { get; set; }\n    public string State { get; set; }\n    public string Zip { get; set; }\n    public string Phone { get; set; }\n    public string Fax { get; set; }\n    public string Status { get; set; }\n    public DateTime StartDate { get; set; }\n    // It descends from IEnumerable&lt;Contract&gt;\n    public DataServiceCollection&lt;Contract&gt; Contracts { get; set; }\n}\n</code></pre>\n"},{"tags":["objective-c","xcode","unit-testing","ios-simulator","ocunit"],"answer_count":4,"favorite_count":12,"up_vote_count":7,"down_vote_count":0,"view_count":2735,"score":7,"question_id":6596741,"title":"OCUnit Application Test with Simulator in terminal","body":"<p>Is it possible to start an application test that runs in the simulator with a terminal command(s)?</p>\n\n<p>Thanks</p>\n"},{"tags":["ruby","unit-testing","testunit"],"answer_count":11,"favorite_count":15,"up_vote_count":10,"down_vote_count":0,"view_count":8862,"score":10,"question_id":255969,"title":"In Ruby's Test::Unit::TestCase, how do I override the initialize method?","body":"<p>I'm struggling with Test::Unit.  When I think of unit tests, I think of one simple test per file.  But in Ruby's framework, I must instead write:  </p>\n\n<pre><code>class MyTest &lt; Test::Unit::TestCase \n   def setup \n   end\n\n   def test_1 \n   end\n\n   def test_1 \n   end\nend\n</code></pre>\n\n<p>But setup and teardown run for every invocation of a test_* method.  This is exactly what I don't want.  Rather, I want a setup method that runs just once for the whole class.  But I can't seem to write my own initialize() without breaking TestCase's initialize.</p>\n\n<p>Is that possible?  Or am I making this hopelessly complicated?</p>\n"},{"tags":["java","unit-testing","maven","eclipse-plugin","code-coverage"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":12584544,"title":"Eclipse, Maven and code coverage","body":"<p><strong>Is there any Eclipse plug-in that gives the code coverage</strong> directly within the Eclipse JAVA editor, just like <a href=\"http://ecobertura.johoop.de/\" rel=\"nofollow\">eCobertura</a> or <a href=\"http://www.eclemma.org/\" rel=\"nofollow\">EclEmma</a>, but that launches the tests <strong>using the Maven goal <code>test</code> (i.e. <code>mvn test</code>)?</strong></p>\n\n<p>I need to specify a Maven profile to get some properties filtered (i.e. <code>mvn -P dev test</code>), but the two solutions given above don't allow us to work with Maven (AFAIK).</p>\n\n<p>PS: I know I could use the <code>clean site</code> Maven goals (i.e. <code>mvn -P dev clean site</code>) or the Cobertura Maven Plugin (i.e. <code>mvn -P dev cobertura:cobertura</code>) to get a code coverage report, but I would like to get the coverage directly within the Eclipse JAVA editor. <em>Convenience-addict</em>.</p>\n"},{"tags":["c#","unit-testing"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12583868,"title":"Testing code which uses preprocessor constants","body":"<p>Currently I'm doing Unit testing of some project and all is fine except for the places where developers used something like this: </p>\n\n<pre><code>#if USING_EMULATOR\n{ do nothing }\n#else\n{ do a lot of things }\n#endif\n</code></pre>\n\n<p>or </p>\n\n<pre><code>#if USING_EMULATOR\n  return;\n#endif\n{ do a lot of things }\n</code></pre>\n\n<p>Where the code under <code>USING_EMULATOR</code> was done for debug purposes I think. Also sometimes <code>#if DEBUG</code> appears. How can I check the actual piece of code if now the one for the debugging purposes only is trying to execute? \n<code>#undef USING_EMULATOR</code> doesn't help. I don't understand very clearly preprocessor constants and in C# they are even can't be set only defined/undefined so maybe I just do smth wrong?</p>\n"},{"tags":["java","spring","unit-testing","maven","junit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12583073,"title":"Specifying a Maven profile when running JUnit tests within a Spring webapp","body":"<p><strong>Background</strong></p>\n\n<p>/pom.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>...\n&lt;properties&gt;\n    ...\n    &lt;jdbc.driver&gt;com.mysql.jdbc.Driver&lt;/jdbc.driver&gt;\n    &lt;jdbc.url&gt;jdbc:mysql://${database.host}/${database.name}&lt;/jdbc.url&gt;\n    &lt;jdbc.user&gt;${database.user}&lt;/jdbc.user&gt;\n    &lt;jdbc.password&gt;${database.password}&lt;/jdbc.password&gt;\n    ...\n&lt;/properties&gt;\n...\n&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;dev&lt;/id&gt;\n        &lt;properties&gt;\n            ...\n            &lt;database.name&gt;database&lt;/database.name&gt;\n            &lt;database.host&gt;localhost&lt;/database.host&gt;\n            &lt;database.user&gt;root&lt;/database.user&gt;\n            &lt;database.password&gt;&lt;/database.password&gt;\n            ...\n        &lt;/properties&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n...\n</code></pre>\n\n<p>/src/main/resources/database.properties</p>\n\n<pre><code>...\njdbc.driver=${jdbc.driver}\njdbc.url=${jdbc.url}\njdbc.user=${jdbc.user}\njdbc.password=${jdbc.password}\n...\n</code></pre>\n\n<p>/src/main/resources/spring/applicationContext.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;beans ... xmlns:p=\"http://www.springframework.org/schema/p\" ...&gt;\n    ...\n    &lt;bean\n        id=\"dataSource\"\n        ...\n        p:driverClassName=\"${jdbc.driver}\"\n        p:url=\"${jdbc.url}\"\n        p:username=\"${jdbc.user}\"\n        p:password=\"${jdbc.password}\"\n        ... /&gt;\n    ...\n&lt;/beans&gt;\n</code></pre>\n\n<p>/src/<strong>test</strong>/java/com/company/project/service/MyItemServiceImplTest.java</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(locations = { \"/spring/applicationContext.xml\" })\npublic class MyItemServiceImplTest {\n\n    @Resource\n    private MyItemService myItemService;\n\n    @Test\n    public void testSave() {\n        MyItem myItem = new MyItem();\n        myItemService.save(myItem);\n        ...\n    }\n\n}\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>When running the tests, it throws an exception:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n...\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [spring/applicationContext.xml]: Could not resolve placeholder 'database.password'\n...\n</code></pre>\n\n<p>I guess it's because I need to run the tests while specifying the <code>dev</code> profile like I do when I launch the webapp (using <code>-P dev</code>). But I can't make it work. Is it even possible?</p>\n\n<p><strong>PS</strong></p>\n\n<p>The filtered applicationContext.xml file (i.e. the one in /target/classes/spring/applicationContext.xml) is identical to the one in /src/*, but the filtered database.properties file (i.e. /target/classes/database.properties) looks like</p>\n\n<pre><code>jdbc.driver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://${database.host}/${database.name}\njdbc.user=${database.user}\njdbc.password=${database.password}\n</code></pre>\n\n<p>It means that from the pom.xml file to the .properties one, the properties have been well filtered, but within the pom.xml itself, the properties that depend on the chosen profile won't get filtered. Probably because I want to specify anywhere the profile I need when launching the tests. But as I said before, <code>-P dev</code> doesn't seem work with JUnit...</p>\n"},{"tags":["asp.net-mvc-3","unit-testing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12470278,"title":"How to unit test the ASP.NET MVC view?","body":"<p>Can any one give me the example to unit test the ASP.NET MVC view? IS it possible to unit test the view page?</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12579403,"title":"The source is not working when use mock in unit test project","body":"<p>when i use mock concepts to initialize httpcontext.Request.Url in unit test project then source project is not initialized. So it throws null refernce exception. Can you please let me know how to fix this issue?</p>\n\n<p>Ex:</p>\n\n<p>Actual Code</p>\n\n<pre><code>class sample\n\n{\n    public void sample_method()\n    {\n        string url=Request.Url.ToString();\n    }\n}\n</code></pre>\n\n<p>Updated Code for unit test</p>\n\n<pre><code>​\n\nclass sample: IRequestAttr\n{\n    private readonly IRequestAttr _attr;\n\n    public sample(IRequestAttr attr)\n    {\n        _attr=attr;\n    }\n\n    public string URL\n    {\n        return HttpContext.Request.Url.ToString();\n    }\n\n    public void sample_method()\n    {\n        string url=_attr.URL();\n    }\n}\n\npublic interface IRequestAttr\n{\n    string URL();\n}\n</code></pre>\n"},{"tags":["javascript","unit-testing","testing","jasmine","jasmine-jquery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12577905,"title":"Testing AJAX calls with Jasmine-Maven","body":"<p>For my current project, I'm setting up JS testing with Jasmine. We want our tests to run automatically on each build, so I plugged it into our Maven build. I can run some basic tests of the Javascript, and everything is working peachy. So far so good! </p>\n\n<p>However, we are building a rich client interface, and doing a lot of callbacks to the server - so, we have a lot of $.ajax calls in our code. Whenever I try to load our JS files that contain the call (<em>not</em> execute tests, the processing isn't even there yet), the Maven build crashes each time, because it tries to do the callback already: </p>\n\n<pre><code>[ERROR] Caused by: java.io.FileNotFoundException: F:\\Users\\gjoris\\Development\\Source\\xxx\\xxx-war\\target\\jasmine\\rest\\xxx\\search (The system cannot find the path specified)\n</code></pre>\n\n<p>So, just to make it very clear: I'm <em>not</em> running tests here, I'm just loading the sources. This is the configuration for my plugin thusfar:</p>\n\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;com.github.searls&lt;/groupId&gt;\n            &lt;artifactId&gt;jasmine-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.2.0.0&lt;/version&gt;\n            &lt;extensions&gt;true&lt;/extensions&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;test&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;sourceIncludes&gt;\n                    &lt;include&gt;sorting*.js&lt;/include&gt;\n                    &lt;include&gt;*blabla*.js&lt;/include&gt;\n                &lt;/sourceIncludes&gt;\n                &lt;jsSrcDir&gt;${project.basedir}/src/main/webapp/resources/scripts/&lt;/jsSrcDir&gt;\n                &lt;jsTestSrcDir&gt;${project.basedir}/src/test/javascript&lt;/jsTestSrcDir&gt;\n                &lt;timeout&gt;300&lt;/timeout&gt;\n                &lt;preloadSources&gt;\n                    &lt;!-- Load basic libraries for application--&gt;\n                    &lt;source&gt;${project.basedir}/src/main/webapp/resources/scripts/libs/knockout-2.1.0.js&lt;/source&gt;\n                    &lt;source&gt;${project.basedir}/src/main/webapp/resources/scripts/libs/jquery-1.7.2.min.js&lt;/source&gt;\n                    &lt;!-- Load all necessary Jasmine plugins --&gt;\n                    &lt;source&gt;${project.basedir}/src/test/javascript/libs/jasmine-ajax/mock-ajax.js&lt;/source&gt;\n                    &lt;source&gt;${project.basedir}/src/test/javascript/libs/jasmine-jquery/jasmine-jquery.js&lt;/source&gt;\n                    &lt;!-- Load our own mocks --&gt;\n                    (some of our mocks in JS go here)\n                    &lt;!-- Load additional libraries, application specific, which are needed to run --&gt;\n                    (some general JS, which are used everywhere)\n                &lt;/preloadSources&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Anybody any experience with this, and knows how I have to configure it? </p>\n"},{"tags":["android","unit-testing","shell"],"answer_count":5,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":5871,"score":7,"question_id":3299006,"title":"Running android unit tests from the command line?","body":"<p>I'm trying to run unit tests on the android platform in accordance with <a href=\"http://developer.android.com/guide/topics/testing/testing_android.html\">tutorial</a>. Say, for example, I want to run tests for Email application. I open <code>/apps/Email/tests/AndroidManifest.xml</code> file, look for the <code>&lt;manifest&gt;</code> element, and look at the <code>package</code> attribute, which is <code>com.android.email.tests</code>, and in the <code>&lt;instrumentation&gt;</code> element I look at the <code>android:name</code> attribute, which is <code>android.test.InstrumentationTestRunner</code>. Now I open the console, and run</p>\n\n<pre><code>$ . build/envsetup.sh\n$ lunch 1\n$ adb shell am instrument -w com.android.email.tests/android.test.InstrumentationTestRunner\n</code></pre>\n\n<p>But that fails:</p>\n\n<pre><code>INSTRUMENTATION_STATUS: id=ActivityManagerService\nandroid.util.AndroidException: INSTRUMENTATION_FAILED: com.android.email.tests/android.test.InstrumentationTestRunner\nINSTRUMENTATION_STATUS: Error=Unable to find instrumentation info for: ComponentInfo{com.android.email.tests/android.test.InstrumentationTestRunner}\n</code></pre>\n\n<p>So.. What am I doing wrong?</p>\n"},{"tags":["unit-testing","code-analysis","quality"],"answer_count":34,"favorite_count":14,"up_vote_count":47,"down_vote_count":2,"view_count":2838,"score":45,"question_id":1076575,"title":"Why is code quality not popular?","body":"<p>I like my code being in order, i.e. properly formatted, readable, designed, tested, checked for bugs, etc. In fact I am fanatic about it. (<a href=\"http://en.wikipedia.org/wiki/Obsessive-compulsive_disorder\">Maybe even more than fanatic...</a>) But in my experience actions helping code quality are hardly implemented. (By code quality I mean the quality of the code you produce day to day. The whole topic of software quality with development processes and such is much broader and not the scope of this question.)</p>\n\n<p>Code quality does not seem popular. Some examples from my experience include</p>\n\n<ul>\n<li><p>Probably every Java developer knows JUnit, almost all languages implement xUnit frameworks, but in all companies I know, only very few proper unit tests existed (if at all). I know that it's not always possible to write unit tests due to technical limitations or pressing deadlines, but in the cases I saw, unit testing would have been an option. If a developer wanted to write some tests for his/her new code, he/she could do so. My conclusion is that developers do not want to write tests.</p></li>\n<li><p>Static code analysis is often played around in small projects, but not really used to enforce coding conventions or find possible errors in enterprise projects. Usually even compiler warnings like potential null pointer access are ignored.</p></li>\n<li><p>Conference speakers and magazines would talk a lot about EJB3.1, OSGI, Cloud and other new technologies, but hardly about new testing technologies or tools, new static code analysis approaches (e.g. SAT solving), development processes helping to maintain higher quality, how some nasty beast of legacy code was brought under test, ... (I did not attend many conferences and it probably looks different for conferences on agile topics, as unit testing and CI and such has a higher value there.)</p></li>\n</ul>\n\n<p>So why is code quality so unpopular/considered boring?</p>\n\n<p><strong>EDIT:</strong><br>\nThank your for your answers. Most of them concern unit testing (and has been discussed in a <a href=\"http://stackoverflow.com/questions/557764/if-unit-testing-is-so-great-why-arent-more-companies-doing-it\">related question</a>). But there are lots of other things that can be used to keep code quality high (see <a href=\"http://stackoverflow.com/questions/534624/how-do-you-ensure-code-quality\">related question</a>). Even if you are not able to use unit tests, you could use a daily build, add some static code analysis to your IDE or development process, try pair programming or enforce reviews of critical code. </p>\n"},{"tags":["javascript","jquery","unit-testing","mocking","qunit"],"answer_count":14,"favorite_count":23,"up_vote_count":30,"down_vote_count":0,"view_count":6915,"score":30,"question_id":209418,"title":"What are some JavaScript Unit Testing and Mocking Frameworks you have used?","body":"<p>My main JavaScript framework is <a href=\"http://jquery.com/\" rel=\"nofollow\">jQuery</a> so I would like my unit test and mocking frameworks to be compatible with that. I'd rather not have to introduce another JavaScript framework.</p>\n\n<p>I am currently using <a href=\"http://docs.jquery.com/QUnit\" rel=\"nofollow\">QUnit</a> for unit testing and <a href=\"http://boss.bekk.no/display/BOSS/Jack\" rel=\"nofollow\">Jack</a> for mocking, but I am pretty new to the whole unit testing of JavaScript.</p>\n\n<p>Does anyone else have a better tool to suggest? What has worked for you? </p>\n"},{"tags":["javascript","unit-testing","jsunit"],"answer_count":4,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":4296,"score":14,"question_id":1692873,"title":"Javascript Unit Testing Frameworks?","body":"<p>Can anybody recommend a Javascript unit testing framework. I've found JsUnit (<a href=\"http://www.jsunit.net/\" rel=\"nofollow\">http://www.jsunit.net/</a>) and will start evaluating it. I just thought it would be good to get some input from the community.</p>\n"},{"tags":["javascript","jquery","unit-testing","ant","automation"],"answer_count":12,"favorite_count":30,"up_vote_count":41,"down_vote_count":0,"view_count":12675,"score":41,"question_id":96066,"title":"Automated Unit Testing with JavaScript","body":"<p>I'm trying to incorporate some JavaScript unit testing into my automated build process.  Currently JSUnit works well with JUnit, but it seems to be abandonware and lacks good support for AJAX, debugging, and timeouts.  </p>\n\n<p>Has anyone had any luck automating (with ANT) a unit testing library such as YUI test, JQuery's QUnit, or jQUnit (<a href=\"http://code.google.com/p/jqunit/\" rel=\"nofollow\">http://code.google.com/p/jqunit/</a>)?</p>\n\n<p>Note:  I use a custom built AJAX library, so the problem with Dojo's DOH is that it requires you to use their own AJAX function calls and event handlers to work with any AJAX unit testing.</p>\n"},{"tags":["c#",".net","unit-testing","code-generation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12565137,"title":"How effective / dangerous is it to use code generation for unit tests for a simple finite state machine?","body":"<p>In a current project, I am dealing with a client who insists that code generation is evil for unit testing. Some of the technical/evaluation staff on their team are extremely experienced developers so this surprises me. So much so, that after seeing their profiles, I am soliciting community opinion on a subject I would not otherwise question (i.e. automation).</p>\n\n<p>The title refers to code generation for creating unit tests. That can be done to various extents depending on the scenario. I wrote this particular library myself and consider it to be very simple in terms of branching, complexity, maintainability, etc. An abstract is listed below to illustrate the same.</p>\n\n<p>The library in question is a generic finite state machine that makes use of two enumerations to determine a list of possible <code>states</code> and <code>commands</code>. Commands are used to specify an abstract transaction while an explicit arbitrary state may also be requested without a command as long as it is legal. Examples of states include Processing, Cancelled, WaitingForUserInput, etc. Examples of commands include WakeUp, Sleep, StartProcessing, etc.</p>\n\n<p>The decleration is as follows:</p>\n\n<pre><code>// Both [TState] and [TCommand] will ALWAYS be enumerations.\npublic abstract class StateMachineBase&lt;TState, TCommand&gt;: IDisposable\n{\n    public delegate void DelegateStart (StateMachineBase&lt;TState, TCommand&gt; sender, EventArgs e);\n    public delegate void DelegateStop (StateMachineBase&lt;TState, TCommand&gt; sender, EventArgs e);\n    public delegate void DelegateTransitionRequest (StateMachineBase&lt;TState, TCommand&gt; sender, TransitionRequestEventArgs&lt;TState, TCommand&gt; e);\n    public delegate void DelegateTransitionComplete (StateMachineBase&lt;TState, TCommand&gt; sender, TransitionCompletedEventArgs&lt;TState, TCommand&gt; e);\n\n    public event DelegateStart OnStart = null;\n    public event DelegateStop OnStop = null;\n    public event DelegateTransitionRequest OnTransitionRequest = null;\n    public event DelegateTransitionComplete OnTransitionComplete = null;\n\n    private readonly object _SyncRoot = new object(); // Thread safety.\n    public bool Running { get; private set; }\n    public TState State { get; private set; }\n    private TCommand Command { get; set; }\n    private List&lt;Transition&lt;TState, TCommand&gt;&gt; AllowedTransitions { get; set; }\n\n    // Will not work if the machine is running.\n    protected void AddTransition (TState from, TState to, TCommand command) { ... }\n    public void Start () { ... }\n    public void Stop () { ... }\n    public bool CanTransit (TState state) { ... }\n    public bool CanTransit (TCommand command) { ... }\n    public bool Request (TState state) { ... }\n    public bool Request (TCommand command) { ... }\n}\n</code></pre>\n\n<p>I do realize that in some cases, using code generation may defeat the purpose of writing unit tests but I am sure many developers do use it in specific scenarios. I figure, if I have written the library myself, I should be able to get the unit tests right whether by hand or reflection.</p>\n\n<p>The question is, is it wise to use code generation in this case? If not, what unintended consequences could I be overlooking?</p>\n"},{"tags":["javascript","unit-testing","debugging","phantomjs","chutzpah"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12561362,"title":"How do I debug my JavaScript that is being executed by Chutzpah/PhantomJS","body":"<p>I am using Chutzpah to execute my JavaScript unit tests.</p>\n\n<p>I reference paths to my source files and below have a series of tests. Text Explorer in Visual Studio lists my tests and I can execute them directly from the IDE, so everything seems to be working correctly.</p>\n\n<p>However I would like to step into the source code that is being executed when my tests are run.</p>\n\n<p>Is this possible?</p>\n"},{"tags":["c#","unit-testing","nunit","projects-and-solutions"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12573127,"title":"Referencing Main Project from a separate NUnit Test Library","body":"<p>I'm brand new to Unit Testing, fresh out of college, and suddenly responsible for developing and maintaining a fairly large application by myself. The previous developer (who just left the company) included NUnit with the project references, wrote a few empty test fixtures at the bottom of a couple classes, and never did anything else with it.</p>\n\n<p>I'm afraid if I don't start writing unit tests now, while I'm refactoring and learning the system, I'll never get them done, but I'm having trouble understanding how to properly set up my test project.</p>\n\n<p>I was told that I should keep my test project as a separate <code>Class Library</code> within the same solution, so I've made an OurApplication.Test Library project. I don't know how I reference the project that I'll be testing within it, though. </p>\n\n<p>Guides online say to point it to my <strong>main project's .DLL</strong>... but there <strong>isn't</strong> one. Our project is a standalone application that doesn't generate a dll, and I'm not sure what I'm supposed to do in this case. </p>\n\n<p>Any advice on what's wrong here, or pointers to more comprehensive guides would be greatly appreciated. I'd like to get this done the right way, and as soon as I can.</p>\n"},{"tags":["c#",".net","unit-testing","testing","console-application"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12572053,"title":"Simple console app tests","body":"<p>I'm currently doing some trainee work &amp; looking for a bit of advice.</p>\n\n<p>I've been set a pretty simple task of writing some unit tests for a service application in C#. The service mainly has methods which query and look up and SQL database for various things. I've been asked to write unit tests for the majority of these methods and other things like simply checking the connection and stuff. I've been told to keep it simple and probably just write the tests in a Console application. I'm wondering what the best way to go about this would be?</p>\n\n<p>Would simply calling the methods from a console app with hardcoded input be suitable? Then just check what the output is &amp; write whether is passes in the console? Or is this too simple and nasty?</p>\n"},{"tags":["c#","unit-testing","compilation","strong-typing"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":126,"score":1,"question_id":12565690,"title":"How to unit test C# code that's expected to fail compilation for negative testing?","body":"<p>We're meant to generate a string output that's required to adhere to a particular set of syntactical rules. I created an object model in order to enforce that syntax via C#'s strong-typing with the intent to prevent the possibility of generating invalid output.</p>\n\n<p>I can create positive tests, i.e. valid C# generating valid output. What I'm unable to do is run negative tests, i.e. ensuring that attempting to generate invalid output will throw errors at compilation.</p>\n\n<p>Explicit example:</p>\n\n<pre><code>namespace Abstract\n{\n    public interface FooType { }\n    public interface FooString : FooType { }\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>public interface Integer : Abstract.FooType { }    \npublic interface SingleLine : Abstract.FooString { }\npublic interface MultiLine : Abstract.FooString { }\n\npublic class Bar&lt;T&gt;\n    where T : Abstract.FooType\n{\n    public Bar(string s) {\n        // do stuff with s and T, where T is SingleLine or MultiLine\n    }\n\n    public Bar(int i) {\n        // do stuff with i and T, where T is Integer\n    }\n}\n\npublic static class Foo\n{\n    public static Bar&lt;T&gt; Bar&lt;T&gt;(int i) where T : Integer {\n        return new Bar&lt;T&gt;(i);\n    }\n\n    public static Bar&lt;SingleLine&gt; Bar(string s) {\n        return new Bar&lt;SingleLine&gt;(s);\n    }\n\n    public static Bar&lt;T&gt; Bar&lt;T&gt;(string s) where T : Abstract.FooString {\n        return new Bar&lt;T&gt;(s);\n    }\n}\n</code></pre>\n\n<p>All of that just so I can do:</p>\n\n<pre><code>Foo.Bar&lt;SingleLine&gt;(\"some string\");  // ok\nFoo.Bar(\"another string\");           // ok\nFoo.Bar&lt;MultiLine&gt;(\"more\\nstrings\"); // still ok\nFoo.Bar&lt;Integer&gt;(24)                 // also ok\n\n// How to test these lines for compilation failure?\nFoo.Bar&lt;Integer&gt;(\"no good\");\nFoo.Bar&lt;MultiLine&gt;(-1);\n</code></pre>\n\n<p>In case it matters, I'm using VS2012 Express for Desktop.</p>\n"},{"tags":["c#","asp.net","unit-testing","testing"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":63,"score":1,"question_id":12519259,"title":"Testing asp.net pages programmatically","body":"<p>Suggest a testing framework, which could autofill forms, simulate a button click and navigate to next page.</p>\n\n<p>I am trying to automate this task to reduce development time.</p>\n\n<p>EDIT :\nFrom the list suggested by Arran, Coded UI seems to be the most feasible option. (Considering enterprise restrictions, I cannot install new softwares). </p>\n\n<p>Please suggest some directions to write something on my own or using Microsoft Coded UI.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","unit-testing","testing","junit","junit4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12568764,"title":"JUnit Tests With and Without Certain Classpath File","body":"<p>The Java library that I'm currently working on can be configured with a <code>.properties</code> file in the classpath. Now I want to write JUnit tests that do the following:</p>\n\n<ol>\n<li>If the file exists, assert that the values in there are loaded.</li>\n<li>If the file does <em>not</em> exit, assert that the default values are loaded.</li>\n</ol>\n\n<p>Is that sort of thing possible?</p>\n"},{"tags":["unit-testing","junit","jenkins"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12559010,"title":"Collect running time of each JUnit test","body":"<p>Is there a way to easily collect running times of each unit test (for example with either  surefire or some Jenkins plugin) so that I could for example list my Top 10 slowest unit tests?</p>\n"},{"tags":["c#","unit-testing","mstest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":62,"score":1,"question_id":12569099,"title":"How to make this Unit Testable","body":"<p>Below I have some code that that I cannot Unit test because it tries to read settings from IIS7 and unfortunately our nightly build machine does not have IIS7. The only thing I can think of is to pass the ServerManager into the method, but then again in the caller I will have a ServerManager that will make that method unable to be unit tested. We use MOQ for our Mock library.</p>\n\n<pre><code>        public ISection GetCurrentSettings(string location, Action&lt;string&gt; status)\n    {\n        #region Sanity Checks\n\n        if (string.IsNullOrEmpty(location))\n        {\n            throw new ArgumentNullException(\"location\");\n        }\n        if (status == null)\n        {\n            throw new ArgumentNullException(\"status\");\n        }\n        #endregion\n\n        ISection section = null;\n\n        _logger.Debug(string.Format(\"Retrieving current IIS settings for app at {0}.\", location));\n        status(\"Getting current IIS settings.\");\n        using (ServerManager manager = new ServerManager())\n        {\n            var data = (from site in manager.Sites\n                        from app in site.Applications\n                        from vdir in app.VirtualDirectories\n                        where vdir.PhysicalPath.Equals(location, StringComparison.CurrentCultureIgnoreCase)\n                        select new {Website = site, App = app}).SingleOrDefault();\n\n            if (data == null)\n            {\n                _logger.Debug(string.Format(\"Could not find an application at {0} in IIS. Going to load the defaults instead.\", location));\n                //ToDo possibly load defaults\n            }\n            else\n            {\n               _logger.Debug(string.Format(\"Application found in IIS with website: {0} and a path of {1}\", data.Website.Name, data.App.Path));\n                int port =\n                    data.Website.Bindings.Where(b =&gt; b.EndPoint != null).Select(b =&gt; b.EndPoint.Port).Single();\n\n\n                section = new IISSection\n                    {\n                        ApplicationPoolName = data.App.ApplicationPoolName,\n                        VirtualDirectoryAlias = data.App.Path,\n                        WebsiteName = data.Website.Name,\n                        WebsiteRoot = data.App.VirtualDirectories[0].PhysicalPath,\n                        Port = port.ToString(CultureInfo.InvariantCulture),\n                        WillApply = true,\n                        AnonymousUser = _userService.GetUserByType(UserType.Anonymous)\n                    };\n            }\n\n            return section;\n\n        }\n</code></pre>\n"},{"tags":["objective-c","unit-testing","xcode4"],"answer_count":2,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":1268,"score":11,"question_id":6720557,"title":"\"Test After Build\" option in XCode 4 not working","body":"<p>So, I am having a bear of a time figuring this one out.  I have looked around, and cannot seem to find any information on this.</p>\n\n<p>What I want to do is have my unit tests ALWAYS run EVERY time I build my code in XCode.  I have read a number of posts, including <a href=\"http://stackoverflow.com/questions/6673333/how-do-i-automatically-perform-unit-tests-on-each-build\">this question</a> here.  I have followed the instructions to the letter, and the build will not run the tests.</p>\n\n<p>What I have done:</p>\n\n<ul>\n<li>My Test suite is a target dependency of my main build</li>\n<li>My main build has \"Test After Build\" set to Yes</li>\n<li>All of the tests under the \"test\" phase in the Scheme are there, and checked</li>\n</ul>\n\n<p>If I run the tests manually - through cmd+U or the menu - the tests run.  I have added a failing test to try and force the build to fail - so I can be sure they are running.  The build continues to pass fine, and the tests are never run.</p>\n\n<p>I am positive I have missed a step in here, but for the life of me I cannot find any documentation related to it.  Anyone have any other advice or steps I should be doing?</p>\n"},{"tags":["unit-testing","maven","junit","junit4","junit3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12567991,"title":"Do we have a @beforeTests method which can run once, before all the tests starts","body":"<p>In Junit, I know there is a @beforeclass  , @before annotation, do we have a annotation or design, \nallow us to write a method to run ONLY once before the whole testing process?</p>\n\n<p>we have a script, which setup some database data (config, static, lookup table etc.....) for the test, but its too expensive to run before each individual test, we would like it to set it, only once before start running any test.</p>\n\n<p>thanks!</p>\n"},{"tags":["c++","linux","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":72,"score":0,"question_id":12565603,"title":"Proper way to test for readability/writability of a folder","body":"<p>I have written a function to test for the readability/writability of a folder.</p>\n\n<p>For unit testing it, I need to produce the different cases:</p>\n\n<ul>\n<li>a folder with readable and writable files</li>\n<li>a folder with readable files (not writable)</li>\n<li>a folder not writable and not readable.</li>\n</ul>\n\n<p>Here is the code for the function I came to, up to this point:</p>\n\n<pre><code>void FileUtils::checkPath(std::string path, bool &amp;readable, bool &amp;writable)\n{\n   namespace bf = boost::filesystem;\n   std::string filePath = path + \"/test.txt\";\n\n   // remove a possibly existing test file\n   remove(filePath.c_str());\n\n   // check that the path exists\n   if(!bf::is_directory(path))\n   {\n      readable = writable = false;\n      return;\n   }\n\n   // try to write in the location\n   std::ofstream outfile (filePath.c_str());\n   outfile &lt;&lt; \"I can write!\" &lt;&lt; std::endl;\n   outfile.close();\n\n   if(!outfile.fail() &amp;&amp; !outfile.bad())\n   {\n      writable = true;\n   }\n\n   // look for a file to read\n   std::ifstream::pos_type size;\n   char * memblock;\n   for (bf::recursive_directory_iterator it(path); it != bf::recursive_directory_iterator(); ++it)\n   {\n      if (!is_directory(*it))\n      {\n         std::string sFilePath = it-&gt;path().string();\n         std::ifstream file(sFilePath.c_str(), std::ios::in|std::ios::binary|std::ios::ate);\n         if (file.is_open())\n         {\n           size = file.tellg();\n           if(size &gt; 0)\n           {\n              memblock = new char [1];\n              file.seekg (0, std::ios::beg);\n              file.read (memblock, 1);\n              file.close();\n              delete[] memblock;\n              if(!file.fail() &amp;&amp; !file.bad())\n              {\n                 readable = true;\n              }\n              break;\n           }\n         }\n         else\n         {\n            // there is a non readable file in the folder\n            // readable = false;\n            break;\n         }\n      }\n   }\n\n   // delete the test file\n   remove(filePath.c_str());\n}\n</code></pre>\n\n<p>Now with the tests (done with Google tests):</p>\n\n<pre><code>TEST_F(FileUtilsTest, shouldCheckPath)\n{\n   // given an existing folder\n   namespace fs = boost::filesystem;\n   fs::create_directory(\"/tmp/to_be_deleted\");\n\n   bool readable = false, writable = false;\n\n   FileUtils::checkPath(\"/tmp/to_be_deleted\",readable, writable);\n\n   fs::boost::filesystem::remove_all(\"/tmp/to_be_deleted\");\n\n   EXPECT_TRUE(readable &amp;&amp; writable);\n}\n</code></pre>\n\n<p>I will add more for the other cases when I will have gone further.</p>\n\n<p>Now the game is open to propose a better solution :-)</p>\n"},{"tags":["sqlite","unit-testing","fluent-nhibernate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12566254,"title":"Handling \"schema\" in SQLite Unit Tests","body":"<p>I have a project where I'm using Fluent NHibernate to map an SQL Server database and I generate data from another Fluent NHibernate mapped SQL Server database which is our source.</p>\n\n<p>I'm currently writing some unit tests which is to check the functions that read from one database and create records in the other.\nI've created an in-memory SQLite database of my db for creating records, and it works fine. But when I try to create a similar SQLite database for my \"source\" database I get failures which claim \"no such table\".</p>\n\n<p>This seems to be because in the Fluent NHibernate dll for the source database they've given names like \"dbo.table\" and since there's no schema in my SQLite test database it's not able to create a test table.</p>\n\n<p>Is there a way to handle this \"dbo.\" name in SQLite when creating the test database?</p>\n"},{"tags":["python","unit-testing","python-3.x","unittest2","python-3.1"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12566993,"title":"python -m unittest2 discover not working","body":"<p>I'm using the excellent Tox tool to test my code. Here is my <code>tox.ini</code>:</p>\n\n<pre><code>[tox]\nenvlist = py26,py27,py31,py32,py33\n\n[testenv]\ndeps = ParamUnittest\ncommands = python -m unittest discover tests\ndownloadcache = build\n\n[testenv:py26]\ndeps = https://github.com/rik0/ParamUnittest/tarball/master\n       unittest2\n       importlib\ncommands = python -m unittest2.__main__ discover tests\n\n[testenv:py31]\ndeps = https://github.com/rik0/ParamUnittest/tarball/master\n       unittest2py3k\ncommands = python -m unittest2 discover tests\n</code></pre>\n\n<p>When running it all tests are executed on all versions except 3.1. Tox shows:</p>\n\n<pre><code>py31 sdist-reinst: /home/miki/exp/radon/.tox/dist/radon-0.1.zip\npy31 runtests: commands[0]\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>Why tests are not executed? System layout is as follows:</p>\n\n<pre><code>tests/\n    test_internals.py\n    test_complexity.py\n    ...\nradon/\n...\nsetup.py\ntox.ini\n</code></pre>\n"},{"tags":["java","android","unit-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12567004,"title":"AndroidTestCase test: loading text file that isn't part of the project under test","body":"<p>I am writing a simple Android unit test to verify that a parser I have written works correctly on a given input string.  The test needs to parse ~1500 lines of text.  Because Java has poor support for multi-line strings in source code, I want to load this text from a file <code>a_test_plist.txt</code> that I've pasted the text into.  My question is, how does one load this <code>.txt</code> file in the test, given that this is not a file I want to actually include as a resource in the project under test?</p>\n\n<p>Below is my test class.  At the moment it generates a <code>FileNotFoundException</code> in the test setup:</p>\n\n<pre><code>package com.brycestrosoft.jcunav.places.parsers.test;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\nimport com.brycestrosoft.jcunav.places.Building;\nimport com.brycestrosoft.jcunav.places.Place;\nimport com.brycestrosoft.jcunav.places.parsers.BuildingParser;\nimport com.brycestrosoft.jcunav.places.parsers.PlaceParser;\nimport com.dd.plist.NSDictionary;\nimport com.dd.plist.PropertyListParser;\n\nimport android.test.AndroidTestCase;\n\npublic class BuildingParserTest extends AndroidTestCase {\n\n    NSDictionary rootDict;\n\n    public BuildingParserTest() {\n        super();\n    }\n\n    @Override\n    public void setUp() throws Exception {\n        super.setUp();\n\n        // java has lousy support for multiline strings, so we \n        // take the more error-prone approach of reading the\n        // string from a file\n        File file = new File(\"src/com/brycestrosoft/jcunav/places/parsers/test/a_test_plist.txt\");\n        rootDict = (NSDictionary)PropertyListParser.parse(file);\n    }\n\n\n    public void testParsePlaces() {\n        PlaceParser parser = new BuildingParser();\n        ArrayList&lt;Place&gt; places = parser.parsePlaces(rootDict);\n        for (Place p: places) {\n            Building b = (Building)p;\n            if (b.getNumber() == 27) {\n                assertEquals(b.getName(), \"Law, Business &amp; Creative Arts\");\n            }\n        }\n    }\n\n\n    @Override\n    public void tearDown() throws Exception {\n        super.tearDown();\n    }\n\n}\n</code></pre>\n"},{"tags":[".net","unit-testing","mocking","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12349069,"title":"moq: How do I setup behaviour of constructor in generated proxy?","body":"<p>I have an abstract class (let's call it <code>AbstractOutputter</code>). When I derive from it, I make calls to a protected method in the constructor of the derived class. </p>\n\n<p><strong>AbstractOutputter</strong></p>\n\n<pre><code>public abstract class IOutputter&lt;T&gt;\n{\n  protected void Write(Func&lt;T, string&gt; output)\n  {\n   ... \n  }\n}\n</code></pre>\n\n<p><strong>Derived class</strong></p>\n\n<pre><code>public class WotsitOutputter: AbstractOutputter&lt;Wotsit&gt;\n{\n  public WotsitOutputter()\n  {\n    Write(x =&gt; x.Property1.ToString());\n    Write(x =&gt; x.Property2.ToString());\n  }\n}\n</code></pre>\n\n<p>The pattern is identical to creating validator classes in FluentValidation:</p>\n\n<p><a href=\"http://fluentvalidation.codeplex.com/\" rel=\"nofollow\">http://fluentvalidation.codeplex.com/</a></p>\n\n<p>I would like Moq to create me a class deriving from <code>AbstractOutputter</code>, in order to unit test how it responds to various permutations of calls to <code>Write()</code>.. I would need to do something like this:</p>\n\n<pre><code>Mock&lt;AbstractOutputter&lt;Wotsit&gt;&gt; mockOutputter = new Mock&lt;AbstractOutputter&lt;Wotsit&gt;&gt;();\n// Instruct Moq to make various calls to protected method in constructor of mock class\n</code></pre>\n\n<p>Is it possible to do this? Can I somehow tell Moq to perform certain actions within the constructor of the proxy it creates? Or will I need to define real classes extending <code>AbstractOutputter</code> just for unit testing?</p>\n"},{"tags":["asp.net","unit-testing","nunit","moq","nmock"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12565944,"title":"NMock with Unity framework","body":"<p>I'm trying to write some Unit Tests in my ASP.Net application using NUnit and NMock.\nI Used MOQ and i wrote a test like below.</p>\n\n<pre><code>[Test]\n    public void ExecutePostProcessingAsyncAndFileCountTest()\n    {\n        var storage=new Mock&lt;IStorageService&gt;();\n        storage.Setup(x=&gt;x.UploadContent(\"\"));\n        var uc = new UnityContainer();\n        uc.RegisterInstance(typeof (IStorageService), storage.Object);\n        var mprovider=uc.Resolve&lt;StorageMultipartProvider&gt;();\n        mprovider.ExecutePostProcessingAsync();\n        Assert.True(mprovider.Files.Count&gt;0);\n    }\n</code></pre>\n\n<p>Here as u can see, I am using Unity framework with MOQ. What I want to do is to do the same thing with NMock. Is this possible? I mean, does NMock supports Unity framework?</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thank you.</p>\n"},{"tags":["c++","unit-testing","testing","image-processing"],"answer_count":10,"favorite_count":5,"up_vote_count":15,"down_vote_count":0,"view_count":711,"score":15,"question_id":1283147,"title":"Is it possibile to use TDD with image processing algorithms?","body":"<p>Recently, I have worked in a project were TDD (Test Driven Development) was used. The project was a web application developed in Java and, although unit-testing web applications <a href=\"http://codebetter.com/blogs/ian%5Fcooper/archive/2008/07/07/tdd-and-hard-to-test-areas-part1.aspx\" rel=\"nofollow\">may not be trivial</a>, it was possible using mocking (we have used the Mockito framework).</p>\n\n<p>Now I will start a project where I will use C++ to work with image processing (mostly image segmentation) and I'm not sure whether using TDD is a good idea. The problem is that is very hard to tell whether the result of a segmentation is right or not, and the same problem applies to many other image processing algorithms.</p>\n\n<p>So, what I would like to know is if someone here have successfully used TDD with image segmentation algorithms (not necessarily segmentation algorithms).</p>\n"},{"tags":["java","unit-testing","junit","intellij-idea","lombok"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":226,"score":4,"question_id":10643936,"title":"Can't seem to get Lombok to work in unit tests","body":"<p>We've been putting together some (really simple) code in order to test out and introduce Lombok annotations into our project to make our code a bit nicer. Unfortunately, seems to break in testing, both through Maven and when the tests are run through IntelliJ.</p>\n\n<p>Our domain classes look something like:</p>\n\n<pre><code>package foo.bar;\n\nimport lombok.Data;\n\n@Data\npublic class Noddy {\n\n    private int id;\n    private String name;\n\n}\n</code></pre>\n\n<p>With a corresponding test:</p>\n\n<pre><code>package foo.bar;\n\nimport org.junit.Test;\nimport static org.junit.Assert.assertEquals;\n\npublic class NoddyTest {\n\n    @Test\n    public void testLombokAnnotations(){\n        Noddy noddy = new Noddy();\n        noddy.setId(1);\n        noddy.setName(\"some name\");\n        assertEquals(noddy.getName(), \"some name\");\n    }\n}\n</code></pre>\n\n<p>We have the aspectjrt dependency in Maven (as well as the relevant plugin in IntelliJ), and the aspectj-maven-plugin.</p>\n\n<p>We're running with Maven 2-style POMs, JSDK 1.6.0_31, Lombok 0.11.0:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;0.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Are we doing something stupid or missing something obvious?</p>\n\n<p>It would be great if we can get this working, as I've had an eye to using Lombok in production for some time now.</p>\n\n<p>Many thanks,</p>\n\n<p>P.</p>\n\n<p>(FWIW, IntelliJ 11.1.2 has the Lombok plugin 0.4 and seems to be using ACJ for this project)</p>\n"},{"tags":["unit-testing","language-agnostic","dependency-injection"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12512985,"title":"Getting rid of 'new' operators for subcomponents objects","body":"<p>I've been reading Misko Hevery's <a href=\"http://misko.hevery.com/2008/10/21/dependency-injection-myth-reference-passing/\" rel=\"nofollow\">classic</a> <a href=\"http://misko.hevery.com/2008/07/08/how-to-think-about-the-new-operator/\" rel=\"nofollow\">articles</a> about Dependency injection, and basically 'separating the object graph creation code from the code logic'. </p>\n\n<p>The main idea seems to be \"get rid of the 'new' operators\", put them in dedicated objects ('Factories') and inject everything you depend on.\" </p>\n\n<p>Now, I can't seem to wrap my head about how to make this works with objects that are composed of several other components, and whose job is to isolate those components to the outerworld. </p>\n\n<h2>Lame example</h2>\n\n<p>A View class to represent a combination of a few fields, and a button. All the components depend on a graphical ui context, but you want to hide it behind the interfaces of each sub-component. </p>\n\n<p>So something like (in pseudo-code, language does not really matter I guess): </p>\n\n<pre><code>\nclass CustomView() {\n\n   public CustomView(UIContext ui) {\n        this.ui = ui\n   }\n\n   public void start() {\n\n      this.field = new Field(this.ui);\n      this.button = new Button(this.ui, \"ClickMe\");\n\n      this.button.addEventListener(function () {\n           if (field.getText().isEmtpy()) {\n              alert(\"Field should not be empty\");\n           } else {\n              this.fireValueEntered(this.field.getText());\n           }\n      });\n   }\n\n   // The interface of this component is that callers\n   // subscribe to \"addValueEnteredListener\"..)\n   public void addValueEnteredListener(Callback ...) {\n   }\n\n   public void fireValueEnteredListener(text) {\n     // Would call each listeners in turn\n   }\n}\n</code></pre>\n\n<p>The callers would do something like : </p>\n\n<pre><code>\n\n// Assuming a UIContext comes from somewhere...\nui = // Wherever you get UI Context from ?\nv = new CustomView(ui);\nv.addValueEnteredListener(function (text) {\n // whatever...\n});\n\n</code></pre>\n\n<p>Now, this code has three 'new' operators, and I'm not sure which one Misko (and other DI proponents) are advocating to rid off, or how.  </p>\n\n<h2>Getting rid of new Field() and new Button()</h2>\n\n<h3>Just Inject it</h3>\n\n<p>I don't think the idea here is to actually <em>inject</em> the instances of Field and Button , which could be done this way : </p>\n\n<pre><code>\nclass CustomView() {\n\n   public CustomView(Field field, Button button) {\n        this.field = field;\n        this.button = button;\n   }\n\n   public void start() {\n\n      this.button.addEventListener(function () {\n           if (field.getText().isEmtpy()) {\n              alert(\"Field should not be empty\");\n           } else {\n              this.fireValueEntered(this.field.getText());\n           }\n      });\n   }\n\n   // ... etc ... \n</code></pre>\n\n<p>This makes the code of the component lighter, surely, and it actually hides the notion of UI, so the MetaForm component has clearly been improved in terms of readability and testability.</p>\n\n<p><em>However</em>, the burden is now on the client to create those things : </p>\n\n<pre><code>\n\n// Assuming a UIContext comes from somewhere...\n\nui = // wherever ui gets injected from \n\nform = new Form(ui);\nbutton = new Button(ui);\n\nv = new CustomView(form, button);\nv.addValueEnteredListener(function (text) {\n // whatever...\n});\n\n</code></pre>\n\n<p>That sounds really troubling to me, espacially since the client know has to all the inners of the class, which sounds silly.</p>\n\n<h3>Mama knows, inject her instead</h3>\n\n<p>What the articles seems to advocate is instead injecting a Factory to create the components elements.</p>\n\n<pre><code>\nclass CustomView() {\n\n   public CustomView(Factory factory) {\n      this.factory = factory;\n   }\n\n   public void start() {\n\n      this.field = factory.createField();\n      this.button = factory.createButton();\n\n      this.button.addEventListener(function () {\n           if (field.getText().isEmtpy()) {\n              alert(\"Field should not be empty\");\n           } else {\n              this.fireValueEntered(this.field.getText());\n           }\n      });\n   }\n\n   // ... etc ... \n</code></pre>\n\n<p>And then everything gets nice for the caller, because its just has to get <em>the factory</em> from somewhere (and this factory will be the only to know about the UI context, so hurray for decoupling.)</p>\n\n<pre><code>\n\n// Assuming a UIContext comes from somewhere...\n\nfactory = // wherever factory gets injected from \n\nv = new CustomView(factory);\nv.addValueEnteredListener(function (text) {\n // whatever...\n});\n\n</code></pre>\n\n<p>A possible drawback is that when testing the MetaForm, you will typically have to use a 'Mock' Factory that ... create Mocks version of the Field &amp; Button classes. But obviously there is another drawback ... </p>\n\n<h3>Yo' Factory so fat!!</h3>\n\n<p>How big will the Factory get ? If you follow the pattern rigorously, then every single frigging component you ever want to create in you application at runtime (wich is typically the case for UI, right) will have to get its own createXXXXX methods in at least one factory. </p>\n\n<p>Because now you need : </p>\n\n<ul>\n<li>Factory.createField to create the field</li>\n<li>Factory.createButton to create the button</li>\n<li>Factory.createMetaForm to create the field, the button and the MetaForm when a client (say the MetaEditPage wants to use one)</li>\n<li>And obviously a Factory.createMetaEditPage for the client..</li>\n<li>... and its turtles all the way. </li>\n</ul>\n\n<p>I can see some strategies to simplify this : </p>\n\n<ul>\n<li>As much as possible, separate the parts of the graph that are created at \"startup\" time from the parts that are created at runtime (using an DI framework like Spring for the former, and factories for the latter)</li>\n<li>Layer the factories, or collocate related objects in the same factories (a UIWidgetFactory would make sense for Field and Button, but where would you put the other ones ? In a Factory linked to the Application ? To some other logical level ?)</li>\n</ul>\n\n<p><i>I can almost hear all the jokes from C guys that no Java app can do anything without calling a ApplicationProcessFactoryCreator.createFactory().createProcess().startApplication() chain of nonsense...</i></p>\n\n<p>So my questions are : </p>\n\n<ul>\n<li>I am completely missing a point here ? </li>\n<li>If not, which strategy would you suggest to make the things bearable ?</li>\n</ul>\n\n<h2>Addendum : why I'm not sure dependency injection would help</h2>\n\n<p>Assume I decide to use dependency injection, with a guice-like framework. I would end up writing code like this : </p>\n\n<pre><code>\nclass CustomView\n\n    @Inject\n    private Field fiedl;\n\n    @Inject\n    private Button button;\n\n    public void start() {\n      this.button.addEventListener(....\n\n// etc...\n</code></pre>\n\n<p>And then what ? </p>\n\n<p>How would my \"Composition Root\" make use of that ? I can certainely not configure a \"singleton\" (with a lowercase 's', as in 'the single instance of a class) for the Field and the Button (since I want to create as many instances of them as instances of MetaForm ? </p>\n\n<p>It would not make sense to use a Provider, since my problem is not which instance of buttons I want to create, but just that I want to create it lately, with some configuration (for example its text) that only makes sense for this form. </p>\n\n<p>To me DI is not going to help because I am new-ing <em>parts</em> of <em>my</em> component rather than Dependencies. And I suppose I could turn any subcomponent into a dependency, and let a framework inject them. It's just that injecting subcomponents looks <em>really</em> artificial and couter-intuitive to me, in this case... so again, I must be missing something ;)</p>\n"},{"tags":["asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":12558739,"title":"How to unit test the global.asax file?","body":"<p>In my application some variables are initialized when application start .i.e in global.aspx file</p>\n\n<pre><code>Application_start() \n{\n    //velocityhelper.TemplateLocatio is static class.\n    VelocityHelper.TemplateLocation = ConfigurationHelper.ContentLocation + \"/\"\n        + ConfigurationHelper.CultureId + \"/\" + \"Templates/\";    \n}\n</code></pre>\n\n<p>When we access the templatelocation variable it will returns null always. Can you please let me know how to initailze this template location.</p>\n"},{"tags":["java","unit-testing","junit","mockito","guidelines"],"answer_count":3,"favorite_count":0,"up_vote_count":10,"down_vote_count":0,"view_count":143,"score":10,"question_id":12539365,"title":"When to use Mockito.verify()","body":"<p>I write JUnits for 3 purposes:</p>\n\n<ol>\n<li>To ensure that my code satisfies all of the required functionality, under all (or most of) the input combinations/values.</li>\n<li>To ensure that I can change the implementation, and relay on JUnits to tell me that all my functionality is still satisfied.</li>\n<li>As a documentation of all the usecases my code handles, and act as a spec for refactoring - should the codeset ever needs to be rewritten. (Refactor the code, and if my jUnits fail - you probably missed some usecase).</li>\n</ol>\n\n<p>I do not understand why or when <em>Mockito.verify()</em> should be used. When I see <em>verify()</em> being called, it is telling me that my JUnit is becoming aware of the implementation. (Thus changing my implementation would break my jUnits, even though my functionality was unaffected). </p>\n\n<p>I'm looking for:</p>\n\n<ol>\n<li><p>What should be the guidelines for appropriate usage of <em>Mockito.verify()</em></p></li>\n<li><p>Is it fundamentally correct for jUnits to be aware of/tighty coupled to the implementation of the class under test?</p></li>\n</ol>\n"},{"tags":["javascript","eclipse","unit-testing"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1691,"score":2,"question_id":1968950,"title":"Javascript unit testing in eclipse","body":"<p>I am doing a firefox extension using eclipse and need to know how I can do unit testing for that project.</p>\n"},{"tags":["unit-testing","tdd"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":126,"score":0,"question_id":12489394,"title":"Is test driven development a form of unit testing","body":"<p>Our company is in the process of improving the code quality and processes to adopt when delivering a piece of code. My question is concerned to unit testing and I wanted to gather information on the processes you adopt when you are asked to implement a functionality.</p>\n\n<p>Is TDD a form of unit test. From what i understand in TDD, you write your test first (which fails), write your code and then run your test which should pass. It may be that the code will make external method call. But how are we suppose to know about the stubbing required when we are writing our test first?</p>\n\n<p>When you are building your application prior release, what kind of test do you include in the build? Does the build run your integration test or does it run only your unit test?</p>\n\n<p>Apart from TDD, do you write any other kind of test. Sorry if the question are slightly distorted. Your experience on how you undertake development is highly appreciated. Thanks</p>\n"},{"tags":["ios","unit-testing","core-data","nsfetchedresultscontrolle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12561309,"title":"Why is NSFetchedResultsController not calling controllerDidChangeContent: in my Kiwi test?","body":"<p><strong>What I Want</strong></p>\n\n<ul>\n<li>I want to test that when I set dependent properties on my Core Data object, NSFetchedResultsController updates correctly</li>\n</ul>\n\n<p><strong>The Problem</strong></p>\n\n<ul>\n<li>The controllerDidChangeContent: method is never called</li>\n</ul>\n\n<p><strong>What I've Tried</strong></p>\n\n<ul>\n<li>Simplified test - I was testing on a calculated dependent attribute. Now testing on isActive which is a simple Core Data attribute</li>\n</ul>\n\n<p><strong>The Setup</strong></p>\n\n<ul>\n<li>Kiwi for testing</li>\n<li>Core Data and mogenerator</li>\n<li><p>RestKit gives me helper methods</p>\n\n<ul>\n<li><code>object</code></li>\n<li><code>fetchAllSortedBy:ascending:withPredicate:groupBy:</code></li>\n</ul></li>\n<li><p>A dummy test delegate that waits until it's sent a <code>controllerDidChangeContent:</code> call</p></li>\n</ul>\n\n<p><strong>Code</strong></p>\n\n<p><strong>Kiwi Test - KPClientSpec</strong></p>\n\n<pre><code>describe(@\"#billAndPayBeingUpdated\", ^{\n    __block KPClient *clientA;\n    __block NSFetchedResultsController *controller;\n    context(@\"with two bill and pay clients\", ^{\n        beforeEach(^{\n            [KPCoreDataStoreResetter deleteAllObjects];\n\n            clientA = [KPClient object];\n            [clientA setName:@\"\"];\n            [clientA setIsSelfBillingValue:NO];\n            [clientA setIsScheduledValue:NO];\n            [clientA setIsActiveValue:YES];\n        });\n\n        // *** This passes.\n        it(@\"fetched objects result controller should show all self billing clients\", ^{\n            controller = [KPClient fetchAllSortedBy:@\"name\" ascending:NO withPredicate:[KPPredicateFactory activeClientsPredicate] groupBy:nil];\n            [[[controller fetchedObjects] should] haveCountOf:1];\n        });\n\n        // *** This fails.\n        it(@\"fetched results controller should change the number of clients when one is changed\", ^{\n            KPTestFetchedResultsControllerDelegate *testDelegate = [KPTestFetchedResultsControllerDelegate new];\n\n            controller = [KPClient fetchAllSortedBy:@\"name\" ascending:NO withPredicate:[KPPredicateFactory activeClientsPredicate] groupBy:nil];\n            [controller setDelegate:testDelegate];\n\n            [clientA setIsActiveValue:NO];\n            [testDelegate waitForControllerDidChangeContent];\n            [[[testDelegate latestObjects] should] haveCountOf:0];\n        });\n    });\n\n});\n</code></pre>\n\n<p><strong>KPPredicateFactory</strong></p>\n\n<pre><code>@implementation KPPredicateFactory\n\n+(NSPredicate *)shownTimesheetsPredicate {\n    NSPredicate *activeBillAndPayAgenciesPredicate = [NSPredicate predicateWithFormat:@\"isArchived == 0 AND client.isActive == 1 AND client.isBillAndPay == 1\"];\n    return activeBillAndPayAgenciesPredicate;\n}\n\n+(NSPredicate *)activeClientsPredicate {\n    NSPredicate *activeBillAndPayAgenciesPredicate = [NSPredicate predicateWithFormat:@\"isActive == 1 AND isBillAndPay == 1\"];\n    return activeBillAndPayAgenciesPredicate;\n}\n\n@end\n</code></pre>\n\n<p><strong>KPTestFetchedResultsControllerDelegate</strong></p>\n\n<pre><code>@implementation KPTestFetchedResultsControllerDelegate\n\n-(id)init {\n    self = [super init];\n    if (self) {\n        [self setTimeout:4];\n        _waitingForControllerDidChangeContent = YES;\n        _latestObjects = [NSArray array];\n    }\n\n    return self;\n}\n\n-(void)waitForControllerDidChangeContent {\n    NSDate *startDate = [NSDate date];\n\n    RKLogTrace(@\"%@ Awaiting response loaded from for %f seconds...\", self, self.timeout);\n    while (_waitingForControllerDidChangeContent) {\n        [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.01]];\n        if ([[NSDate date] timeIntervalSinceDate:startDate] &gt; self.timeout) {\n            [NSException raise:NSInternalInconsistencyException format:@\"*** Operation timed out after %f seconds...\", self.timeout];\n        }\n    }\n}\n\n-(void)controllerDidChangeContent:(NSFetchedResultsController *)controller {\n    _waitingForControllerDidChangeContent = NO;\n    _latestObjects = [controller fetchedObjects];\n}\n\n@end\n</code></pre>\n"},{"tags":["c#","asp.net","unit-testing","generic-handler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":12560213,"title":"Unit Testing ASP.NET Generic Handlers without using HttpWebRequest","body":"<p>I need to create Unit test cases for my ASP.NET generic Handler. My Handler code is as below:</p>\n\n<pre><code>    public class MyHandler : IHttpHandler\n    {\n\n        public void ProcessRequest(HttpContext context)\n        {\n            context.Response.ContentType = \"text/plain\";\n            context.Response.Write(\"Hello World\");\n            var data = context.Request.InputStream;\n            //Here logic read the context.Request.InputStream\n            //All the data will be posted to this Stream\n            //Calling of business logic layer Methods\n        }\n\n        public bool IsReusable\n        {\n            get\n            {\n                return false;\n            }\n        }\n    }\n</code></pre>\n\n<p>Now, I need to create the Unit test cases for this Handler. I have tried following ways to do unit test cases.</p>\n\n<ul>\n<li>Making an <code>HttpWebRequest</code> to this handle and writing all the data to request stream. I don't want to proceed with this as we have separate tool which makes <code>HttpWebRequest</code> to test all handlers </li>\n<li>Creating Unit test cases for Business methods but in this i am unable to check some logic written in handler level.</li>\n</ul>\n\n<p>I have tried to Mock the HttpContext but it's not allowing to mock this (is it possible to to Mock HttpContent?). I tried<br>\n<a href=\"http://www.mattwrock.com/post/2011/12/07/Unit-Testing-ASPNet-Http-Handlers-and-a-discussion-of-Auto-Mocking-and-the-Testable-pattern.aspx\" rel=\"nofollow\">this</a> way but this needs modification to my handler also but i don't have provision to do this.</p>\n\n<p>Finally my questions is, Is there any other way to unit test handler?</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["c#","unit-testing","mocking","vsto","nsubstitute"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":301,"score":1,"question_id":9816243,"title":"Mocked object doesn't have all properties shown in Intellisense - in one project but has them in the other","body":"<p>I'm mocking VSTO objects and in one project (I didn't write) it has this code:</p>\n\n<pre><code>var listOfSheets = new List&lt;Worksheet&gt;();\nvar mockSheets = Substitute.For&lt;Sheets&gt;();\nmockSheets.Count.Returns(listOfSheets.Count);\n</code></pre>\n\n<p>The Intellisense ToolTip for the mockSheets shows 6 properties:</p>\n\n<p><img src=\"http://i.stack.imgur.com/tc36r.png\" alt=\"NSubstitute All Properties\"></p>\n\n<p>The line with the break  point works in this project.</p>\n\n<p>However I have the same code in a different project (same references, namespaces, etc.), yet the Intellisense ToolTip for the mockSheets only shows 1 property: </p>\n\n<p><img src=\"http://i.stack.imgur.com/Ikp1O.png\" alt=\"NSubstitute Only one Property\"></p>\n\n<p>I know this is the root cause that I'm trying to solve, but fyi the actual problem is: </p>\n\n<blockquote>\n  <p>Cannot perform runtime binding on a null reference</p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/R1IVD.png\" alt=\"Cannot perform runtime binding on a null reference\"></p>\n\n<p>EDIT:</p>\n\n<p>The Sheet Object is mocked:</p>\n\n<pre><code>public static Worksheet Sheet\n{\n    get\n    {\n        var mockSheet = Substitute.For&lt;Worksheet&gt;();\n        mockSheet.Name = MockSheetName;\n        mockSheet.Visible = XlSheetVisibility.xlSheetVisible;\n\n        return mockSheet;\n    }\n}\n\npublic static Workbook Workbook()\n{\n    return Workbook(1);\n}\n</code></pre>\n"},{"tags":["unit-testing","productivity"],"answer_count":14,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":880,"score":6,"question_id":1264568,"title":"How does unit testing improve productivity?","body":"<p>I'm currently looking for ways to improve the productivity of our team. I've read in a number of places that unit testing can be used to improve productivity. I can imagine writing unit tests now can be helpful in the future, but does it help in the short term too? Because I don't understand how writing more code (=more potential bugs) can help us meet deadlines. </p>\n"},{"tags":["unit-testing","phpunit","zend-studio","zend-debugger"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12557676,"title":"Running PHPUnit Tests is Separate Processes","body":"<p>I'm working on an AOP framework so I need to redeclare some environment variables and re-include files which are re-compiled by the framework on each test. I'm trying to run each test in a separate process so that I can do this but I'm not sure of how to do this in Zend Studio.</p>\n\n<p>I've added the <code>@runTestsInSeparateProcesses</code> annotation to my tests but this causes the tests to fail with the error message:</p>\n\n<pre><code>testName: [Zend Debugger] Cannot receive start command\n</code></pre>\n\n<p>Has anyone been able to solve this error or find another way to run each test in a separate process in Zend?</p>\n"},{"tags":["python","unit-testing","template-method-pattern"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12545539,"title":"Template method invocation order in python","body":"<p>What would be the simplest way to unit-test <em>run</em> function? Here I'm not interested in what <em>fun</em>* functions do, but only if the order of their invocation is correct.</p>\n\n<pre><code>from mock import Mock\n\n(many, arguments, four, fun) = ('many', 'arguments', 'four', 'fun') \n\nclass TemplateMethod(object):\n\n    def fun1(self, many, parameters, go, here):\n        raise NotImplementedError()\n\n    @classmethod\n    def fun2(cls, many, parameters, go, here):\n        pass\n\n    @staticmethod\n    def fun3(many, parameters, go, here):\n        pass\n\n    def run(self):\n        result1 = self.fun1(many, arguments, four, fun)\n        result1.do_something()\n\n        self.fun2(many, arguments, four, fun)\n        self.fun3(many, arguments, four, fun)\n</code></pre>\n\n<p>The only requirement for the solution is non-intrusiveness towards the class under test.</p>\n\n<p><strong>SOLUTION:</strong></p>\n\n<p>This is somewhat of a draft, actually, and this simple class could be fixed and extended in so many ways that I don't care even to think about it. The point is that you can now simply record all the invocations of all the methods in a template method. You can also specify a list of object that shouldn't be mocked by the class (i.e. the function you are recording invocations for).</p>\n\n<p>Special thanks go to @Damian Schenkelman, who gave me some important pointers.</p>\n\n<pre><code>class MockingInvocationRecorder(object):\n\n    FUNCTION_TYPES = ('function', 'classmethod', 'staticmethod')\n\n    def __init__(self, obj, dont_mock_list):\n        self._invocation_list = []\n\n        name_list = [exc.__name__ for exc in dont_mock_list]\n        self._wrap_memfuns(obj, name_list)\n\n    @property\n    def invocations(self):\n        return tuple(self._invocation_list)\n\n    def _wrap_single(self, memfun, exclude_list):\n        def wrapper(*args, **kwargs):\n            self._invocation_list.append(memfun.__name__)\n\n            if memfun.__name__ in exclude_list:\n                return memfun(*args, **kwargs)\n            else:\n                return Mock()\n\n        return wrapper\n\n    def _wrap_memfuns(self, obj, exclude_list):\n        for (mem_name, mem) in type(obj).__dict__.iteritems():\n            if type(mem).__name__ in self.FUNCTION_TYPES:\n                wrapper = self._wrap_single(getattr(obj, mem_name), exclude_list)\n                setattr(obj, mem_name, wrapper)\n</code></pre>\n\n<p>You can now test invocation order by something like this:</p>\n\n<pre><code>tm = TemplateMethod()\nir = MockingInvocationRecorder(tm, [tm.run])\n\ntm.run()\n\nprint ir.invocations =&gt; ('run', 'fun1', 'fun2', 'fun3')\n</code></pre>\n\n<p>You can reference a member by class name:</p>\n\n<pre><code>ir = MockingInvocationRecorder(tm, [TemplateMethod.run])\n</code></pre>\n\n<p>Just be careful that you enlist all the methods that shouldn't be mocked away.</p>\n"},{"tags":["objective-c","unit-testing","gh-unit"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":236,"score":4,"question_id":5542430,"title":"How start GHUnit tests without tapping Run button?","body":"<p>I use GHUnit framework for testing static library. At this moment I need tap the button Run to start my tests. But I would like to start tests when application launched because I need teamcity launch my testApp. So how can I modified standart UI and start tests automatic?</p>\n"},{"tags":["unit-testing","mocking","tdd","winrt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12549162,"title":"TDD for Windows Store app development without mocks","body":"<p>Has anyone come up with a good TDD setup for Windows Store App development? I'm so used to using mocking frameworks, but this is no-longer an option since dynamic assembly generation is missing in WinRT. </p>\n\n<p>I have seen the alpha MoqRT framework, but I am hoping to avoid something in such experimental stages. I have also been so spoiled with using mock objects that I balk at using the stubs or shims offered as an alternative from Microsoft (Microsoft Fakes).</p>\n\n<p>Have any of you successfully figured out good techniques for doing Windows Store App development using DI and properly-isolated TDD-style unit tests? If so, what have you done?</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>I also notice that the \"Add Fakes Assembly\" option isn't present in my \"Windows Store App\" unit test project, so that maybe isn't an option.</p>\n"},{"tags":["unit-testing","inversion-of-control","integration-testing","mstest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12504371,"title":"Using IOC To Configure Unit and Integration Tests","body":"<p>I have a unit test project which uses Ninject to mock the database repositories. I would like to use these same tests as integration tests and use Ninject to bind my real database repositories back into their respective implementations so as to test/stress the application into the DB.</p>\n\n<p>Is there a way to do this with Visual Studio 2012 or is there another test framework, other than MSTest, which allows for this type of configuration?</p>\n\n<p>I would really hate to rewrite/copy these unit tests into an integration test project but I suspect I could copy the files in as links and have a single test file compiled into two projects (Unit and Integration).</p>\n\n<p>Thanks\nTodd</p>\n"},{"tags":["asp.net","unit-testing","mocking","webformsmvp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12555415,"title":"is there any way to mock an implemented class","body":"<p>I want to <strong>unit test</strong> a <strong>MVP</strong> presenter class . but its interaction to the <strong>service</strong> is not through interface ( it uses a concrete class ) . now I wonder is there anyway to <strong>mock</strong> service class without being have to change the structure ? </p>\n"},{"tags":["unit-testing","gmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":11133758,"title":"how to use gmock to mock this class that its instance as a class member in other class","body":"<p>I am a new user with gmock.\ni don't know how to use gmock to mock this class that its instance as a class member in other class.\nThe codes looks like below:</p>\n\n<pre><code>classs B\n{\n    B_fun();\n};\nclass A\n{\n    B b;\n    A_fun()\n    {\n    if( b.B_fun() === XXX )\n    {\n     doXXXXX...\n    }\n}\n</code></pre>\n\n<p>Now,I want to use gmock to mock B and then use mockB in the A's UnitTest.\nCould you please tell me how to do it.\nThanks!</p>\n"},{"tags":["java","unit-testing","testing","mocking","mockito"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1516,"score":6,"question_id":3793791,"title":"Final method mocking","body":"<p>I need mock some class with final method using mockito. I have wrote something like this </p>\n\n<pre><code>@Test\npublic void test() {\n    B b = mock(B.class);\n    doReturn(\"bar called\").when(b).bar();   \n    assertEquals(\"must be \\\"overrided\\\"\", \"bar called\", b.bar());\n    //bla-bla\n}\n\n\nclass B {\n    public final String bar() {\n        return \"fail\";\n    }\n}\n</code></pre>\n\n<p>But it fails. \nI tried some \"hack\" and it works.</p>\n\n<pre><code>   @Test\n   public void hackTest() {\n        class NewB extends B {\n            public String barForTest() {\n                return bar();\n            }\n        }\n        NewB b = mock(NewB.class);\n        doReturn(\"bar called\").when(b).barForTest();\n        assertEquals(\"must be \\\"overrided\\\"\", \"bar called\", b.barForTest());\n    }\n</code></pre>\n\n<p>It works, but \"smells\".</p>\n\n<p>So, Where is the right way?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12504938,"title":"ATDD Google App Engine with Python - Trouble with Keys","body":"<p>My approach to this question might be completely wrong, so please don't hesitate to correct it. I also added ATDD in the question title, because I am trying to test the output of my web api which is bigger than just a unit test.</p>\n\n<p>I am using:</p>\n\n<ul>\n<li>Google App Engine 1.7.1</li>\n<li>GAE High Replication Datastore </li>\n<li>Python 2.7.3</li>\n</ul>\n\n<p>I setup my tests using the boilerplate code:</p>\n\n<pre><code>self.testbed = testbed.Testbed()\nself.testbed.activate()\nself.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=0)\nself.testbed.init_datastore_v3_stub()\n</code></pre>\n\n<p>Then I call a mock object setup to setup my entities and persist them to the testbed datastore. I use a counter to add 5 artists with artist_id 1 - 5:</p>\n\n<pre><code>def add_mock_artist_with(self, artist_id, link_id, name):\n    new_artist = dto.Artist(key_name=str(artist_id),\n        name=name,\n        link_id= str(link_id))\n    new_artist.put()\n</code></pre>\n\n<p>My test is that my web api returns:</p>\n\n<pre><code>{\n    \"artists\": [\n            {\n            \"artist\": {\n                \"name\": \"Artist 1\",\n                \"links\": {\n                    \"self\": {\n                        \"href\": \"https://my_server.com/artist/1/\"\n                    }\n                }\n            }\n        },\n.\n.\n.      \n            {\n            \"artist\": {\n                \"name\": \"Artist 5\",\n                \"links\": {\n                    \"self\": {\n                        \"href\": \"https://my_server.com/artist/5/\"\n                    }\n                }\n            }\n        }\n    ],\n    \"links\": {\n        \"self\": {\n            \"href\": \"https://my_server.com/artists/\"\n        }\n    }\n}\n</code></pre>\n\n<p>Initially I thought that if I were to startup a new test bed every time I run the tests, I could count on my artists being entered sequentially into the data store and therefore would get ids 1 - 5. My tests passed initially, but over time started to fail because of ids not matching (I would get a link like:  \"href\": \"https://my_server.com/artist/78/\"). I felt a little guilty relying on ids being generated sequentially, so I resolved to fix it. I stumbled upon the concept of a key being either a name or a generated id. I updated my templates for the returned JSON to use:   </p>\n\n<pre><code>artist.key().id_or_name()\n</code></pre>\n\n<p>In the case of a mock object, I supplied the key name on construction with:</p>\n\n<pre><code>key_name=str(artist_id) \n</code></pre>\n\n<p>For non-mock construction, I did not include that line of code and let GAE assign the id. </p>\n\n<p>Since my template used key().id_or_name() to output the property, all went well and the tests passed. </p>\n\n<p>However, now when I test the return of an individual artist which would be available by following <a href=\"http://my_server.com/artist/5/\" rel=\"nofollow\">http://my_server.com/artist/5/</a>, my test fails. To grab the artist out of the datastore, I use the following code:</p>\n\n<pre><code>def retrieve_artist_by(id):\n    artist = dto.Artist.get_by_id()\n</code></pre>\n\n<p>In production, this will work fine because it will all be id based. However, in my test, it is not finding anything because I have used the key_name=str(artist_id) in my mock construction, and the name is not the same as the id.</p>\n\n<p>I was hoping for something similar to:</p>\n\n<pre><code>artist = dto.Artist.get_by_id_or_name()\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["c#",".net","wpf","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12541027,"title":"Unit testing of WPF application","body":"<p>Here is a part of a code of a simple WPF application: 3 textboxes, a dropdownList and a button. By clicking a button, there will be checking of input values. </p>\n\n<pre><code>   private void Button_Click_1(object sender, RoutedEventArgs e)\n    {\n        if (textBox1.Text.Length&gt;127)\n            throw new ArgumentException();\n        if (string.IsNullOrEmpty(textBox2.Text))\n            errorsList.Add(\"You must to fill out textbox2\");\n        else if (string.IsNullOrEmpty(textBox3.Text))\n           errorsList.Add(\"You must to fill out textbox3\"); \n       else if\n        {\n            Regex regex = new Regex(@\".........\");\n            Match match = regex.Match(emailTxt.Text);\n            if (!match.Success)\n                errorsList.Add(\"e-mail is inlvalid\");\n        }\n        //.....\n     }\n</code></pre>\n\n<p>I have to test it by using any Unit testing Framework. I wonder is it possible to do Unit testing here? I guess it is not, right?</p>\n"},{"tags":["java","unit-testing","junit","text-files"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":737,"score":5,"question_id":3715743,"title":"How can I compare files in a JUnit test case?","body":"<p>I want to implement JUnit on a small project I'm working on because I want to learn a little bit about it.</p>\n\n<p>The tutorials that I read all make reference to methods that have a particular output.</p>\n\n<p>In my case my output are files, how can I do this? any simple example?\nany approach that could help me with this?</p>\n\n<p>The files are raw text files that are build by a void private method.</p>\n"},{"tags":["unit-testing","mocking","data-access-layer"],"answer_count":8,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":3281,"score":18,"question_id":310307,"title":"Mocking vs. Test DB?","body":"<p>Earlier I asked this question <a href=\"http://stackoverflow.com/questions/309708/how-to-correctly-unit-test-my-dal\">How to correctly unit test my DAL?</a>, one thing left unanswered for me is if to really test my DAL is to have a Test DB, then what is the role of mocking vs. a testing DB?</p>\n\n<p>To add on this, another person suggested to \"use transactions and rollback at the end of the unit test, so the db is clean\", test db that is.  What do you guys think of this testing + test DB + transaction rollback (so db is not really written) approach to test DAL?</p>\n\n<p>To be complete, my DAL is built with Entity Framework, there is no stored proc in DB.  Since EF is so new, I really need to test DAL to make sure they work correctly.</p>\n"},{"tags":["c++","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":7738549,"title":"Microsoft::VisualStudio::TestTools::UnitTesting to test c++ projects","body":"<p>Can I use Microsoft::VisualStudio::TestTools::UnitTesting to test C++ code?\nI mean I already have an existing C++ project which doesn't use .NET.</p>\n\n<p>Now I want to write unit tests to test this code.</p>\n\n<p>Can I use UnitTesting framework from Microsoft to test this native Cpp code?</p>\n\n<p>Thanks a lot </p>\n\n<p>Best Regards,\nMarc</p>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12536590,"title":"Using Boost C++ unit tests with visual studio and can't find .cpp files in other project","body":"<p>I have a solution where I've added and setup boost unit tests. The problem is that I have another project I'd like to test that has some classes in it. In fact, that project is the main reason I added boost.</p>\n\n<p>My project that needs testing is set to output as a .dll. And the problem is that, whenever my tests project needs to access code from the other projects, it can access the header just fine. However, if the header has unresolved code in it that's otherwise resolved in a .cpp file of the project with the objects, I receive a linking error. Is there a way around this? I'd ideally like to keep my objects in my other dll and then test them in my tests project. </p>\n"},{"tags":["unit-testing","testing","language-agnostic","white-box-testing","on-unit"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":12538420,"title":"What is an ON-unit?","body":"<p><a href=\"http://rads.stackoverflow.com/amzn/click/1118031962\" rel=\"nofollow\">The Art of Software Testing</a> contains several references to \"<em>ON</em>-units\". Here is an example from the section on test-case design:</p>\n\n<blockquote>\n  <p>Decision coverage usually can satisfy statement coverage. Since every statement is on some subpath emanating either from a branch statement or from the entry point of the program, every statement must be executed if every branch direction is executed. There are, however, at least three exceptions:</p>\n  \n  <ul>\n  <li>Programs with no decisions.</li>\n  <li>Programs or subroutines/methods with multiple entry points. A given statement might be executed only if the program is entered at a particular entry point.</li>\n  <li>Statements within <em>ON</em>-units. Traversing every branch direction will not necessarily cause all <em>ON</em>-units to be executed.</li>\n  </ul>\n</blockquote>\n\n<p>I haven't seen the term <em>ON</em>-unit before, and I'm having trouble finding a definition on google. What is an <em>ON</em>-unit?</p>\n"},{"tags":["perl","unit-testing","perl-module"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12523453,"title":"Test::Base::Filter arguments","body":"<p>In the <a href=\"http://search.cpan.org/perldoc?Test%3a%3aBase#Rolling_Your_Own_Filters\" rel=\"nofollow\">POD for Test::Base</a>, there is an example on rolling my own filters, which the documentation says is \"self explanatory\". I am having trouble understanding it and I think it may be a problem in my filter writing. The code is reproduced below:</p>\n\n<pre><code>use Test::Base;\n\nfilters 'foo', 'bar=xyz';\n\nsub foo {\n    transform(shift);\n}\n\nsub Test::Base::Filter::bar {\n    my $self = shift;       # The Test::Base::Filter object\n    my $data = shift;\n    my $args = $self-&gt;current_arguments;\n    my $current_block_object = $self-&gt;block;\n    # transform $data in a barish manner\n    return $data;\n}\n</code></pre>\n\n<p>The <code>filters</code> function sets the named subroutines as filters on the incoming data. The declared filters are 'foo' and 'bar', which has arguments. </p>\n\n<p>My question is why the structure of foo and bar are so different. Why is foo in the current namespace while bar is declared in the Test::Base::Filter namespace? And why does foo alter its first argument, while bar must grab the data from the second argument?</p>\n\n<p>Another example. In MyTest.pm:</p>\n\n<pre><code>package t::MyTest;\nuse Test::Base -Base;\n#some stuff here\n\npackage t::MyTest::Filter;\nuse base 'Test::Base::Filter';\n\nsub choose {\n    print @_;\n    return {foo =&gt; 'bar'} if($_[0] eq '1');\n    return undef;\n}\nsub is_defined{ \n    print @_;\n    defined $_[0];\n}\n</code></pre>\n\n<p>And in test.t:</p>\n\n<pre><code>use t::MyTest;\n\nfilters {input =&gt; [qw(choose is_defined)] };\n__END__\n=== First\n--- input\n1\n--- expected: 1\n=== Second\n--- input\n0\n--- expected: 0\n</code></pre>\n\n<p>If you place both of those in a \"t\" folder and run <code>prove -v</code>, this is the output:</p>\n\n<pre><code>t\\01-test.t .. Use of uninitialized value $_[1] in print at t/MyTest.pm line 14,\n &lt;DATA&gt; line 1.\n\n1\nt::MyTest::Filter=HASH(0x2af1670)ok 1 - First\n1..1\nFailed 1/1 subtests\n\nTest Summary Report\n-------------------\nt\\01-test.t (Wstat: 0 Tests: 0 Failed: 0)\n  Parse errors: Bad plan.  You planned 1 tests but ran 0.\nFiles=1, Tests=0,  1 wallclock secs ( 0.06 usr +  0.23 sys =  0.30 CPU)\nResult: FAIL\n</code></pre>\n\n<p>Nevermind the warning (which I don't completely understand the root of). Why is the first filter passed the input (like it's supposed to be), but the second one is passed some Filter object? Shouldn't the input of the second filter be the output of the first? If it isn't, then I have to worry about filter ordering all over the place.</p>\n"},{"tags":["c++","unit-testing","parsing","stub"],"answer_count":9,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":2021,"score":7,"question_id":236086,"title":"Parsing C++ to generate unit test stubs","body":"<p>I've recently been trying to create units tests for some legacy code.</p>\n\n<p>I've been taking the approach of using the linker to show me which functions cause link errors, greping the source to find the definition and creating a stub from that. </p>\n\n<p>Is there an easier way? \nIs there some kind of C++ parser that can give me class definitions, in some easy to use form, from which I can generate stubs?</p>\n"},{"tags":["c#","unit-testing","vs-unit-testing-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12468330,"title":"VS2012 run new instance of program after test method is run","body":"<p>I have a static configuration class that gets loaded up with values when the program starts, and any further attemps to modify it throw exceptions.</p>\n\n<p>Unfortunately, VS2012's unit testing suite retains the same instance of the program running throughout tests, and on different tests I want to test different configurations. Is there a way to force the runner to \"reset\" the program or run further tests in a new instance of it? I'd like to do this in a way that avoids adding workaround code to the configuration class just to fit this scenario.</p>\n"},{"tags":["c++","unit-testing","gmock"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12543274,"title":"GMOCK Error: Is MOCK_METHOD11 not allowed","body":"<p>When I am mocking a function that has 11 parameters it gives an error message:</p>\n\n<blockquote>\n  <p>error: 'function_name' is not a type</p>\n</blockquote>\n\n<p>I am using</p>\n\n<pre><code>MOCK_METHOD11(function_name,int(param1,param2,....,param11);\n</code></pre>\n\n<p>Is it that functions with 11 parameters cant be mocked?</p>\n"},{"tags":["unit-testing","ruby-on-rails-3.2","depot"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":10270379,"title":"Why is my image_url Unit Test failing? (from Agile Web Development with Rails 'Depot' tutorial)","body":"<p>I'm new and trying to learn Rails using the book <em>Agile Web Development with Rails, Fourth Edition</em> (for Rails 3.2). Been able to get through all of the chapters so far without hiccups. If there were errors, it was usually my sloppy code (forgetting a comma, 'end' statement, etc.). But now I've hit a snag in the chapter on Unit Testing for Models. At the part where we're validating that the image URL ends with either .gif, .jpg, or .png.</p>\n\n<p>I copied the code verbatim from the book for the depot/test/product_test.rb file:</p>\n\n<pre><code>    test \"image url\" do\n    ok = %w{ fred.gif fred.jpg fred.png FRED.JPG FRED.Jpg http://a.b.c/x/y/z/fred.gif }\n    bad = %w{ fred.doc fred.gif/more fred.gif.more }\n\n    ok.each do |name|\n        assert new_product(name).valid?, \"#{name} shouldn't be invalid\"\n    end\n    bad.each do |name|\n        assert new_product(name).invalid?, \"#{name} shouldn't be valid\"\n    end\n</code></pre>\n\n<p>But when I run the <strong>rake test:units</strong> command, I get the following failure...</p>\n\n<pre><code>1) Failure:\ntest_image_url(ProductTest)[../depot/test/unit/product_test.rb:46]:\nfred.gif shouldn't be invalid\n\n4 tests, 13 assertions, 1 failures, 0 errors, 0 skips\nrake aborted!\n</code></pre>\n\n<p>Does this mean that the image URL it's testing is invalid? Why is the test failing if what it says \"fred.gif shouldn't be invalid\" is correct?</p>\n\n<p>I'm pretty confident that it's this part of the test that must be incorrect because the other tests I have in there (ex. \"product attributes must not be empty\", \"product price must be positive\", etc.) run just fine. I get no failures if I take out the \"test image url\" code block.</p>\n\n<p>Please let me know what I'm doing wrong. If you need me to post the entirety of the ProductTest, I can.</p>\n"},{"tags":["php","unit-testing","tdd","phpunit"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":951,"score":6,"question_id":3917909,"title":"How to indicate that a PHPUnit test is expected to fail?","body":"<p>Is it possible to mark a test as \"expected to fail\" with PHPUnit?  This would be useful when performing TDD, and you want to distinguish between genuinely failed tests, and tests that happen to fail because the associated code hasn't been written yet.</p>\n"},{"tags":["ruby-on-rails-3","unit-testing","multiple-databases"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12543602,"title":"unit test with multiple database is not clearing test data","body":"<p>I am using multiple database in my application and I started to write unit test case(some of the model belongs to test and some other belongs to test_lis).\nwhen I run test case for model the test database defined in database.yml is cleared down between each test however test databases used with <strong>establish_connection</strong> in the AR models are not cleared down.For example</p>\n\n<p>database.yml.</p>\n\n<pre><code>test:\n   adapter: mysql2\n   database: mul_db_test\n   host: localhost\n   username: \n   password: \n\ntest_lis:\n   adapter: mysql2\n   database: mul_db_lis_test\n   host: localhost\n   username: \n   password: \n</code></pre>\n\n<p>model</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\nend\n\nclass User &lt; ActiveRecord::Base\n  establish_connection Rails.configuration.database_configuration[\"#{Rails.env}_lis\"]\nend\n</code></pre>\n\n<p>I have written test case for Student and User model.\n<strong>Student</strong> test data is cleared after executing test case. But <strong>User</strong> test data is persist in table even after executing User test case</p>\n\n<p>same problem was posted in <a href=\"https://github.com/rspec/rspec-rails/issues/390\" rel=\"nofollow\">https://github.com/rspec/rspec-rails/issues/390</a></p>\n\n<p>Please any one help me to solve this problem</p>\n"},{"tags":["unit-testing","using","windows-store-apps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12543130,"title":"How to add namespace in Unit Test Library(Windows store apps)?","body":"<p>I have some test class</p>\n\n<pre><code>using System;\nusing Microsoft.VisualStudio.TestPlatform.UnitTestFramework;\nusing Praktyka.Models;\n\nnamespace PraktykaTest\n{\n    [TestClass]\n    public class PictureManagerTest\n    {\n        [TestMethod]\n        public void LoadImagesTest()\n        {\n           var pic = new PictureManager();\n            pic.LoadImages(new List&lt;String&gt;\n                                               {\n                                                   \"1.jpg\",\n                                                   \"2.jpg\"\n                                               });\n\n          // Assert.AreEqual(@\"dataImages\\1.jpg\",pic.Current().UriSource);\n           Assert.AreEqual(\"test\",\"test\");\n        }\n    }\n}\n</code></pre>\n\n<p>I have compile error</p>\n\n<pre><code>The type or namespace name 'List' could not be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Cannot initialize object of type 'List&lt;string&gt;' with a collection initializer\n</code></pre>\n\n<p>How to add reference for correct working with Lists ?</p>\n"},{"tags":["c#",".net","unit-testing","junit","nunit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12542073,"title":"Handle any error in NUnit","body":"<p>I have got a standard NUnit unit test. </p>\n\n<pre><code>    [TestFixture]\n    public class MyTest\n    {\n        [SetUp]\n        public virtual void Setup()\n        {   \n        }\n\n        [TearDown]\n        public void CleanUp()\n        {\n        }\n\n        [Test]\n        public void Test01()\n        {\n            Assert.AreEqual(10, 10);\n        }\n\n        [Test]\n        public void Test02()\n        {\n            Assert.AreEqual(4, 1);\n        }\n\n        [Test]\n        public void Test03()\n        {\n            Assert.AreEqual(1, 51);\n        }\n\n        //......a huge amount of Tests\n        [Test]\n        public void TestN()\n        {\n            Assert.AreEqual(1, 1);\n        }\n }\n</code></pre>\n\n<p>As you see, there are a lot of tests here. What I need to do is to handle any error in each test and to get the information about the error <strong>without</strong> modifying the body of a test method.</p>\n\n<p>So in <code>JUnit</code> there is an interface called <code>TestListener</code> which allows to handle any test error, see the error message, see the name of the test,  etc.</p>\n\n<p>I didn't find something similar in <code>NUnit</code>. Does it exist? Or is there is a way to do it?</p>\n"},{"tags":["objective-c","xcode","unit-testing","ocunit","xcode4.4"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":275,"score":2,"question_id":12308297,"title":"Some of my unit tests tests are not finishing in XCode 4.4","body":"<p>I have seen people posting about this here and elsewhere, but I haven't found any solution that works. I am using XCode 4.4 and have a bunch of unit tests set up. I have ran them all before on this project, so I know that they do pass/fail when they are supposed to if they are actually ran.</p>\n\n<p>I have about 15 test suits, and each one contains 1-7 tests. On most attempts, all of the test suits finished (and passed) except for 1 (FooTests). It gives the warning:</p>\n\n<pre><code>FooTests did not finish\n    testFoo did not finish\n</code></pre>\n\n<p>XCode will report that testing was successful, regardless of what happens in unfinished tests. Another thing to note, sometimes it is a different test that will not finish, and sometimes multiple suites will not finish. I have not noticed a case where all tests do finish, but judging by this seemingly random behaviour I believe that it is possible.</p>\n\n<p>So, is this a bug in XCode? I can't think of any other reason that tests randomly don't finish and then cause XCode to report that everything was successful. Are there any solutions?</p>\n"},{"tags":["python","django","unit-testing","tornado"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":125,"score":3,"question_id":10754912,"title":"Tornado. Django-like testrunner and test database","body":"<p>I like django unit tests, cause they create and drop test database on run. </p>\n\n<p>What ways to create test database for tornado exists? </p>\n\n<p><strong>UPD:</strong> I'm interested in postgresql test database creation on test run. </p>\n"},{"tags":["c++","unit-testing","boost"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12529470,"title":"Boost unit testing main function?","body":"<p>How do I define my own <code>main()</code> function when testing with boost?</p>\n\n<p>Boost is using it's own main function, but I'm using a custom memory manager and it needs to be initialized before any memory is allocated, otherwise I'll get errors.</p>\n"},{"tags":["python","unit-testing","debugging","return"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12540503,"title":"Function not returning what is expected, even when it appears to in debugger","body":"<p>Just a little background: This is for a STRIPS like program.\nThis test keeps returning false, even though it should be true. From what I can see in the debugger it should be true, and I can't see why it would be returning false.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aaq1W.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks for your help.\nDebugger image:</p>\n\n<p>World:</p>\n\n<pre><code>def __init__(self):\n    self.logic = {}\n    self.actions = {}\n    self.goals = set()\n    self.curr_state = set()\n</code></pre>\n\n<p>Testcase:</p>\n\n<pre><code>def setUp(self):\n    self.world = World()\n\ndef testWorldis_true(self):\n     pred = \"on\"\n     params = (\"A\", \"B\")\n     self.assertFalse(self.world.is_true(pred, params))\n     self.world.logic[pred] = params\n     self.assertTrue(self.world.is_true(pred, params))\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>======================================================================\nFAIL: testWorldis_true (objorstrippertests.TestWorldFunctions)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \".stripperAssignment\\src\\objorstrippertests.py\", line 54, in testWorldis_true\n    self.assertTrue(self.world.is_true(pred, params))\nAssertionError: False is not true\n</code></pre>\n"},{"tags":["iphone","objective-c","ios","xcode","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":9609850,"title":"performSelector not working in unit test Objective-C","body":"<p>I am trying to make a unit test for my application but performSelector doesn't work.\nI've tried</p>\n\n<p><code>[self performSelector:@selector(checkIDs:) withObject:nil];</code></p>\n\n<p>and performSelectorOnMainThread but for some reason the method doesn't get called.</p>\n\n<pre><code> [self checkIDs:nil] \n</code></pre>\n\n<p>seems to work fine but performSelector doesn't. Getting this method to get called is not my main concern. The reason for me asking is because I have a bigger problem but I think the reason is because performSelector isn't working.</p>\n\n<p>Am I missing something? Once again, this is for a Unit Test. Thanks!</p>\n"}]}
