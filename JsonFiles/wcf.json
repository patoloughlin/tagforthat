{"count":25738,"tag":"wcf","questions":[{"tags":["wcf","web-services","appharbor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13278870,"title":"Error deploying a webservice on appharbor","body":"<p>I'm deploying a webservice on app harbor via git, it's url is <a href=\"http://inmaps.apphb.com/Service1.svc\" rel=\"nofollow\">http://inmaps.apphb.com/Service1.svc</a> </p>\n\n<p>It says that i can access the services description as a single file with this other url: ip-0a7a164f:14460/Service1.svc?singleWsdl but this one gives me a 404 error.</p>\n\n<p>I try to add this services as a reference to proyect and it also throws a 404 error.</p>\n\n<p>What can i do?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","wcf","http"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":13063983,"title":"Run asynchronous operation in one controller method and get that operation's result in another","body":"<p>I have a long running operation you might read in couple of my another questions (for your reference here is <a href=\"http://stackoverflow.com/questions/12836060/articles-on-how-to-organize-background-queue-operations\">first</a> and <a href=\"http://stackoverflow.com/questions/12900382/how-to-determine-progress-of-pending-operations-in-queue\">second</a>). </p>\n\n<p>In the beginning of whole deal, project expose a form in which user should specify all necessary information about XML file and upload XML file itself. In that method all user input data caught and went to an WCF service that handles such king of files. Controller got only task id of such processing. \nThen user got redirected to progress bar page and periodically retrieves status of task completeness, refreshes the progress bar.</p>\n\n<p>So here is my issue comes. When processing of XML file if over, how can I get results back and show them to user?</p>\n\n<p>I know that HTTP is stateless protocol but there is cookie mechanism that could help in this situation. Of course, I may just save processing results to some temporary place, like a static class in WCF server, but there is a high load on service, so it will eat all of supplied memory.</p>\n\n<p>In other words, I would like to pass task to WCF service (using netNamedPipeBinding) and receive results back as fast as it really possible. I want to escape temporary saving result to some buffer and wait until client will gather it back.</p>\n\n<hr>\n\n<p>As far as I go is using temporary buffer not on service side but at client's:</p>\n\n<pre><code>using (XmlProcessingServiceClient client = new XmlProcessingServiceClient())\n{\n    client.AnalyzeXmlAsync(new Task { fileName = filePath, id = tid });\n    client.AnalyzeXmlCompleted += (sender, e) =&gt;\n    {\n        System.Web.HttpContext.Current.Application.Lock();\n        // here is I just use single place for all clients. I know it is not right, it is just for illustrating purposes.\n        System.Web.HttpContext.Current.Application[\"Result\"] = e;\n        System.Web.HttpContext.Current.Application.UnLock();\n    };\n}\n</code></pre>\n"},{"tags":["wcf","serialization","msmq"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":269,"score":0,"question_id":8410408,"title":"Deserializing an object graph from MSMQ that was enqueued using WCF and NetMsmqBinding","body":"<p>I've done some work using MSMQ with WCF and the NetMsmqBinding to generate messages and dequeue them as they arrive.  I've also standardized my solution by using an object graph as the message body.  This object contains meta data and an internal payload.</p>\n\n<p>I'd like to construct an admin tool that can monitor queues and peek at the contents of messages.  So far I've been unsuccessful figuring out how to deserialize the Message.Body back into the object graph using the System.Messaging libraries. </p>\n\n<p>Any ideas?  </p>\n"},{"tags":["c#","wcf","rest","iis7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13174246,"title":"how to restrict access to WCF restful function to specific IP range?","body":"<p>I've built a Restful WCF service with few simple functions. a new requirememt has been raised. </p>\n\n<p>one of the functions should be accessible only to a specific ip range.</p>\n\n<p>what is the best way to implement this? I thought that an easy way is to simply configure the IIS with a rule that will block ip range according the request pattern - cant find such option.. </p>\n\n<p>Thanks!\nofer</p>\n"},{"tags":["c#","wcf","web-services","error-handling","windows-server-2003"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13279350,"title":"How do I disable the Visual C++ Runtime Error in a Web Server?","body":"<p>A production web service that runs WCF on a Windows Server 2003 machine was non-responsive.  I captured a memory dump file for analysis in <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=26798\" rel=\"nofollow\">DebugDiag 1.2</a>.</p>\n\n<p>DebugDiag revealed that a thread encountered an OutOfMemoryException.  Normally, we try to trap all exceptions, print them to the event log, and then return them as a WCF fault.</p>\n\n<p>This OutOfMemoryException was somehow not caught and resulted in a C++ error.  I accept that the .NET runtime was unable to handle this error.  When you're out of memory, you're out of memory.</p>\n\n<p>The analysis revealed that the that one of the threads was attempting to display the Visual C++ runtime error:</p>\n\n<blockquote>\n  <p>Microsoft Visual C++ Runtime Library Runtime Error!  Program: C:\\windows\\system32\\inetsrv\".</p>\n</blockquote>\n\n<p>The stack trace looked like this:</p>\n\n<pre><code>ntdll!KiFastSystemCallRet    \nntdll!ZwRaiseHardError+c    \nuser32!ServiceMessageBox+145    \nuser32!MessageBoxWorker+13e    \nuser32!MessageBoxTimeoutW+7a    \nuser32!MessageBoxTimeoutA+9c    \nuser32!MessageBoxExA+1b    \nuser32!MessageBoxA+45    \nmsvcr71!__crtMessageBoxA+f4   f:\\vs70builds\\3052\\vc\\crtbld\\crt\\src\\crtmbox.c @ 118 + 10 \nmsvcr71!_NMSG_WRITE+12e  f:\\vs70builds\\3052\\vc\\crtbld\\crt\\src\\crt0msg.c @ 240 + 10 \nmsvcr71!abort+7   f:\\vs70builds\\3052\\vc\\crtbld\\crt\\src\\abort.c @ 48 \nkernel32!UnhandledExceptionFilter+12a    \nkernel32!BaseThreadStart+4a    \nkernel32!_except_handler3+61    \nntdll!ExecuteHandler2+26    \nntdll!ExecuteHandler+24    \nntdll!RtlRaiseException+3d    \nkernel32!RaiseException+53    \nmsvcr80!_CxxThrowException+46    \nmscorwks!ThrowOutOfMemory+24 \n</code></pre>\n\n<p>The documentation of <a href=\"http://msdn.microsoft.com/en-us/library/k089yyh0.aspx\" rel=\"nofollow\">abort</a> says:</p>\n\n<blockquote>\n  <p>In a single or multithreaded Windows-based application, abort calls\n  the Windows MessageBox function to create a message box to display the\n  message with an OK button. When the user clicks OK, the program aborts\n  immediately. The message can be suppressed by calling\n  <a href=\"http://msdn.microsoft.com/en-us/library/e631wekh%28v=vs.80%29.aspx\" rel=\"nofollow\">_set_abort_behavior</a> with the appropriate arguments.</p>\n</blockquote>\n\n<p>This message box hung the server.  One thread had triggered a GC, but this thread had disabled preemptive GC.  Most of the rest of the threads where blocking while waiting for the GC to complete.</p>\n\n<p><strong>How do I <a href=\"http://stackoverflow.com/questions/1938715/disable-microsoft-visual-c-runtime-error\">disable the Visual C++ Runtime Error dialog</a> for a web server?</strong></p>\n"},{"tags":[".net","wcf","exception-handling","faultexception","faultcontract"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13279736,"title":"Handling managed fault from nested WCF service call","body":"<p>I've got a WCF service (Service1) that itself calls another WCF service (Service2). Service1 is called from a silverlight client. On the silverlight side I've got an postsharp aspect to handle managed (i.e. typed) fault exceptions in a consistent way. Unmanaged faults (i.e. not typed) are not handled in the same way by the postsharp aspect.</p>\n\n<p>If I throw a managed fault directly from Service1 the postsharp aspect handles everything appopriately as the typed fault contract is known on the silverlight side. Both Service1 and Service2 operation is decorated with the FaultContractAttribute such as follows:</p>\n\n<pre><code>[FaultContract(typeof(SimpleMessageFault))]\nvoid Operation(string arg);\n</code></pre>\n\n<p>If I throw a managed FaultException from Service2 (using the same fault contract type i.e. SimpleMessageFault), I can catch this in Service1 as a managed fault, but it doesnt get handled correctly on the silverlight side where it comes through as an UNmanaged fault exception. </p>\n\n<p>I believe this has something to do with the <em>Action</em> of the managed fault exception coming from Service2. I dont specify an <em>Action</em> when I throw the fault in Service2:</p>\n\n<pre><code>throw new FaultException&lt;SimpleMessageFault&gt;(new SimpleMessageFault(\"bad Bad BAD!!!\"));\n</code></pre>\n\n<p>but if I catch the exception in the Service1 operation that calls the Service2 operation there IS an action on the managed fault exception that is caught. The action is something like <pre>http://tempuri.org/IService2/Service2OperationSimpleMessageFaultFault</pre>, which appears to have been automatically generated.</p>\n\n<p>As shown below if I create a <em>new</em> fault exception in Service1 and throw this, this gets passed correctly back to the silverlight side as a managed exception. If I rethrow the managed fault from Service2 (which specifies an action ) it gets back to the silverlight side as an UNmanaged fault:</p>\n\n<pre><code>catch (FaultException&lt;SimpleMessageFault&gt; fex)\n{\n    //this works\n    throw new FaultException&lt;SimpleMessageFault&gt;(fex.Detail);\n\n    //this does not work\n    throw fex;\n}\n</code></pre>\n\n<p>Has anyone come across this sort of behaviour, or does anyone know how to resolve this...</p>\n"},{"tags":["wcf","threadstatic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13262979,"title":"ThreadStatic - Does a WCF method call execute exclusively on a single thread?","body":"<p>One of the libraries our WCF service references uses a ThreadStatic variable.  The service method sets its value at the beginning of each call.  I'm wondering if this is safe - in other words, can we guarantee that exactly one thread will be used exclusively for the entire call?  Or is it possible that a call could begin on one worker thread and finish on another?  Or could a worker thread be swapped to a different method call and then back again?</p>\n\n<p>We are using the defaults of ConcurrencyMode.Single and InstanceContextMode.PerSession.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The only information I have been able to find so far is this blog post, which states that it is possible for a call to be processed by multiple threads:</p>\n\n<p><a href=\"http://blogs.microsoft.co.il/blogs/applisec/archive/2009/11/23/wcf-thread-affinity-and-synchronization.aspx\" rel=\"nofollow\">http://blogs.microsoft.co.il/blogs/applisec/archive/2009/11/23/wcf-thread-affinity-and-synchronization.aspx</a></p>\n\n<p>Is this guy correct?  Is there any definitive information from Microsoft?</p>\n"},{"tags":["wcf","azure","tcp","windows-8","port"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13272013,"title":"Windows 8 Azure Emulator is Remapping Port 80 to 81","body":"<p>I was developing a project with a WCF REST and TCP(inter-role) endpoint on Windows 7. I just upgraded to Windows 8 and now I have serious problems with it. </p>\n\n<p>First of all, when I deploy my project to azure I get these warnings:</p>\n\n<pre><code>Windows Azure Tools: Warning: Remapping private port 80 to 81 in role 'OfisimCRM.WebClient' to avoid conflict during emulation.\n\nWindows Azure Tools: Warning: Remapping private port 443 to 446 in role 'OfisimCRM.WebClient' to avoid conflict during emulation.\n</code></pre>\n\n<p><strong>Skype is disabled and it is not the issue.</strong></p>\n\n<p>this is not so important but the important thing is I'm getting more serious errors from my interrole communication requests although I disabled firewall completely. Here it is:</p>\n\n<pre><code>Could not connect to net.tcp://127.255.0.0:22000/NotifyService. The connection attempt lasted for a time span of 00:00:01.1820716. TCP error code 10061: No connection could be made because the target machine actively refused it 127.255.0.0:22000.  - \nServer stack trace: \n   at System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)\n   at System.ServiceModel.Channels.BufferedConnectionInitiator.Connect(Uri uri, TimeSpan timeout)\n   at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)\n   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)\n   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)\n   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n</code></pre>\n\n<p>TCP client code:</p>\n\n<pre><code>public static LicenseItem CheckLicense(int userID)\n{\n    // This instance does not exist in memory cache. Check if other servers in the same web role know anything about this instance.\n    var webRoles = RoleEnvironment.Roles[\"OfisimCRM.WebClient\"];\n    var myID = RoleEnvironment.CurrentRoleInstance.Id;\n    LicenseItem remoteValue = null;\n    foreach (var targetInstance in webRoles.Instances)\n    {\n        // I am currently going through a loop of instances. Check if the current enumaration shows my address.\n        if (targetInstance.Id == myID)\n        {\n            // Skip.\n        }\n        else\n        {\n            // This is a neighbour instance. Check to see if it knows about the instance I'm looking for.\n            NetTcpBinding binding = new NetTcpBinding(SecurityMode.None);\n\n            EndpointAddress targetAddress = new EndpointAddress(\n                String.Format(\"net.tcp://{0}/NotifyService\", targetInstance.InstanceEndpoints[\"NotificationServiceEndPoint\"].IPEndpoint)\n                );\n\n            ChannelFactory&lt;INotifyService&gt; channelFactory = new ChannelFactory&lt;INotifyService&gt;(binding, targetAddress);\n            INotifyService targetClient = channelFactory.CreateChannel();\n\n            try\n            {\n                remoteValue = targetClient.CheckLicense(userID);\n                if (channelFactory.State != System.ServiceModel.CommunicationState.Faulted)\n                {\n                    channelFactory.Close();\n                }\n            }\n            catch (TimeoutException timeoutException)\n            {\n                Trace.TraceError(\"Unable to check license on web role instance '{0}'. The service operation timed out. {1}\", myID, timeoutException.Message);\n                ((ICommunicationObject)targetClient).Abort();\n            }\n            catch (CommunicationException communicationException)\n            {\n                Trace.TraceError(\"Unable to check instance on web role instance '{0}'. There was a communication problem. {1} - {2}\", myID, communicationException.Message, communicationException.StackTrace);\n                ((ICommunicationObject)targetClient).Abort();\n            }\n        }\n    }\n    return remoteValue;\n}\n</code></pre>\n"},{"tags":["javascript","xml","wcf","soap","cross-domain"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13279502,"title":"Javascript Cross Domain WCF Self Hosted Restrictions","body":"<p>I have a somewhat unique problem. I have a static HTML and Javascript page that needs to make calls from Javascript to a web service. This WCF web service will be self hosted as a Windows Service on a separate server. I'm running into issues when trying to communicate between the javascript page and the web service, due to Cross-Domain restrictions. I've seen a few examples on how to get around this, but since my web page is going to be static and not served from IIS I'm not sure how to go about it. </p>\n\n<p>I've attached some of my code below. Any help would be appreciated. </p>\n\n<p><strong>App.Config</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;configSections&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"test.XKORE.MobileDeviceServices.Properties.Settings.ConnectionString\"\n      connectionString=\"Data Source=tester;Initial Catalog=test;User ID=testc;Password=testp\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\"/&gt;\n  &lt;/system.web&gt;\n  &lt;!-- When deploying the service library project, the content of the config file must be added to the host's \n  app.config file. System.Configuration does not support config files for libraries. --&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"test.XKORE.MobileDeviceServices.XKOREMobileService\" behaviorConfiguration=\"XKOREMobileServiceBehavior\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8523/test/XKORE/XKOREMobileService\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"test.XKORE.MobileDeviceServices.IXKOREMobileService\" bindingNamespace=\"http://test.XKORE.MobileDeviceServices\" /&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"test.XKORE.MobileDeviceServices.IXKOREMobileService\" bindingNamespace=\"http://test.XKORE.MobileDeviceServices\" /&gt;\n\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"XKOREMobileServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n\n&lt;startup&gt;&lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.0\"/&gt;&lt;/startup&gt;&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>Interface</strong></p>\n\n<pre><code>[ServiceContract]\n    public interface IXKOREMobileService\n    {\n        [OperationContract]\n        string GetChartData();\n\n        // TODO: Add your service operations here\n    }\n</code></pre>\n\n<p><strong>SOAP Request</strong></p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;s:Header&gt;\n    &lt;Action s:mustUnderstand=\"1\" xmlns=\"http://schemas.microsoft.com/ws/2005/05/addressing/none\"&gt;http://tempuri.org/IXKOREMobileService/GetChartData&lt;/Action&gt;\n  &lt;/s:Header&gt;\n  &lt;s:Body&gt;\n    &lt;GetChartData xmlns=\"http://tempuri.org/\" /&gt;\n  &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p><strong>Javascript (Not Working)</strong></p>\n\n<pre><code>var response = BuildSOAPMessage('GetChartData');\nalert(response);\n\nfunction BuildSOAPMessage (func) {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open(\"POST\", \"http://localhost:8523/test/XKORE/XKOREMobileService\", false);\n\n    var msg = '';\n    msg += '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;'\n    msg += '&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\"&gt;'\n    msg += '&lt;soapenv:Header/&gt;'\n    msg += '&lt;soapenv:Body&gt;'\n    msg += '&lt;tem:' + func + '/&gt;'\n    msg += '&lt;/soapenv:Body&gt;'\n    msg += '&lt;/soapenv:Envelope&gt;'\n    alert (msg);\n\n     // Send the POST request\n     xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n     xmlhttp.setRequestHeader(\"SOAPAction\", \"http://tempuri.org/IXKOREMobileService/GetJSONChartData\");\n     xmlhttp.send(msg);\n\n    return xmlhttp.responseXML;\n}\n</code></pre>\n"},{"tags":["javascript","wcf","soap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13276618,"title":"Javascript SOAP Request, Return String","body":"<p>What I'm attempting seems relatively simple, but I can't seem to find a simple answer on how to do it. I have a WCF Web Service that is self hosted. It has one function that accepts zero parameters and returns a string. All I want to do is request that method from javascript and capture that string response in javascript</p>\n\n<p>Here is the code I have, and so far it won't even return anything. I can get requests easily if I use something like SOAPUI. </p>\n\n<p><strong>App.Config</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;configSections&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"test.XKORE.MobileDeviceServices.Properties.Settings.ConnectionString\"\n      connectionString=\"Data Source=tester;Initial Catalog=test;User ID=testc;Password=testp\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\"/&gt;\n  &lt;/system.web&gt;\n  &lt;!-- When deploying the service library project, the content of the config file must be added to the host's \n  app.config file. System.Configuration does not support config files for libraries. --&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"test.XKORE.MobileDeviceServices.XKOREMobileService\" behaviorConfiguration=\"XKOREMobileServiceBehavior\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8523/test/XKORE/XKOREMobileService\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"test.XKORE.MobileDeviceServices.IXKOREMobileService\" bindingNamespace=\"http://test.XKORE.MobileDeviceServices\" /&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"test.XKORE.MobileDeviceServices.IXKOREMobileService\" bindingNamespace=\"http://test.XKORE.MobileDeviceServices\" /&gt;\n\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"XKOREMobileServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n\n&lt;startup&gt;&lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.0\"/&gt;&lt;/startup&gt;&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>Interface</strong></p>\n\n<pre><code>[ServiceContract]\n    public interface IXKOREMobileService\n    {\n        [OperationContract]\n        string GetChartData();\n\n        // TODO: Add your service operations here\n    }\n</code></pre>\n\n<p><strong>SOAP Request</strong></p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;s:Header&gt;\n    &lt;Action s:mustUnderstand=\"1\" xmlns=\"http://schemas.microsoft.com/ws/2005/05/addressing/none\"&gt;http://tempuri.org/IXKOREMobileService/GetChartData&lt;/Action&gt;\n  &lt;/s:Header&gt;\n  &lt;s:Body&gt;\n    &lt;GetChartData xmlns=\"http://tempuri.org/\" /&gt;\n  &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p><strong>Javascript (Not Working)</strong></p>\n\n<pre><code>var response = BuildSOAPMessage('GetChartData');\nalert(response);\n\nfunction BuildSOAPMessage (func) {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.open(\"POST\", \"http://localhost:8523/test/XKORE/XKOREMobileService\", true);\n\n    var msg = '';\n    msg += '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;'\n    msg += '&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\"&gt;'\n    msg += '&lt;soapenv:Header/&gt;'\n    msg += '&lt;soapenv:Body&gt;'\n    msg += '&lt;tem:' + func + '/&gt;'\n    msg += '&lt;/soapenv:Body&gt;'\n    msg += '&lt;/soapenv:Envelope&gt;'\n    alert (msg);\n\n     // Send the POST request\n     xmlhttp.setRequestHeader('Content-Type', 'text/xml');\n     xmlhttp.setRequestHeader(\"SOAPAction\", \"http://tempuri.org/IXKOREMobileService/GetJSONChartData\");\n     xmlhttp.send(msg);\n\n    return xmlhttp.responseXML;\n}\n</code></pre>\n"},{"tags":["wcf","visual-studio-2008"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13278654,"title":"Windows Service Host opens WCF webservice, but is not initialized","body":"<p>I have Wcf webservice hosted in a Windows service. \nThe host opens the service, but when I try to access it from <strong>client code</strong>, I get an error message: 'Object reference not set to an instance of an object.'</p>\n\n<p>Looks like the AMWebService is not initialized, even after the ServiceHost is open.\nWhat am I doing here wrong? The code:</p>\n\n<p>=============== Webservice code</p>\n\n<p><em><strong></em>**<em>*</em>**<em>*</em>**</strong>(No end points defined in the web service)  </p>\n\n<pre><code>   Public Class AMWebService\n      Implements IAMWebService\n\n       Public Sub New()\n\n   End Sub\n\n   Public Function TestFunction() As String Implements IAMWebService.TestFunction\n    Return \"Returned from TestFunction\"\n   End Function\n\n   Protected Overrides Sub Finalize()\n        MyBase.Finalize()\n   End Sub\n</code></pre>\n\n<p>======================Windows Host Code==============================\n<strong><em>*</em>**<em>*</em>**<em>*</em>*</strong>*2 endpoints defined here</p>\n\n<pre><code>   Public Class AMWebServiceHost\n    Private Log As EventLog\n    Private ServiceHost As ServiceHost\n\n    Public Sub New()\n        InitializeComponent()\n    End Sub\n\n   Protected Overrides Sub OnStart(ByVal args() As String)\n        ServiceHost = New ServiceHost(GetType(AMWebServiceLibrary.AMWebService))\n        ServiceHost.Open()\n   End Sub\n\n   Protected Overrides Sub OnStop()\n    If (ServiceHost IsNot Nothing) And (ServiceHost.State = CommunicationState.Opened) Then\n        ServiceHost.Close()\n    End If\n   End Sub\n</code></pre>\n"},{"tags":["java","wcf","web-services","soap","svc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2900,"score":0,"question_id":7544685,"title":"Consume a wcf Service with a Java Client","body":"<p>I try to consume a wcf service hosted on an iis with a simple java client.</p>\n\n<p>my service is a basicHttpService.</p>\n\n<p>now my Question. What do i need in java to access the service methods?</p>\n\n<p>i build a little example:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.Text;\nusing System.ServiceModel.Web;\n\n\nnamespace android.Web\n{\n    [ServiceContract]\n    public interface ITestService\n    {\n        [OperationContract]\n        void DoWork();\n        [WebGet(UriTemplate = \"Login/\")]\n        String Login();\n    }\n}\n</code></pre>\n\n<p>the login Method only returns a simple string that  want to test in my java client.\nI tried some tutorials found in the internet, but nothing wokrs ;)</p>\n\n<p>thx alot.</p>\n"},{"tags":["wcf","datacontract"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":262,"score":0,"question_id":5799541,"title":"Accessing WCF service inside DataContract set accessors?","body":"<p>G'day,</p>\n\n<p>I am trying to work out how (if it is even possible) to access the WCF Service object from within a set accessor for the datacontract property.</p>\n\n<p>For instance:</p>\n\n<pre><code>class MyService:IMyService\n{\n...\npublic string SomeMethod(int property)\n...\n}\n\n[DataContract]\nclass MyType\n{\n[DataMember]\npublic int MyProperty\n{\n  ...\n  set\n  {\n    // Use a call to the already created WCF instance inside the set accessor\n    _otherValue = WCFInstance.SomeMethod(value);\n  }\n}\n...\n}\n</code></pre>\n\n<p>This is probably not best practice, but is this even possible?  I can instantiate a new instance of the MyService class to make the call in the above situation, but it seems a waste when there is already one in memory processing the WCF request.</p>\n\n<p>Any assistance would be heaps appreciated.  Any questions or more information required, please feel free to ask.</p>\n\n<p>Many thanks,\nSteve</p>\n"},{"tags":["c#","wcf","rest","stream","basichttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13278487,"title":"WCF MemoryStream data corruption issue","body":"<p>I have created a simple REST based WCF service which runs on BasicHttpBinding. In one of my webmethod, I am  returning a Stream which points to a JSON response. </p>\n\n<p>The Method looks like : </p>\n\n<pre><code>[OperationContract]\n        [FaultContract(typeof(ApplicationFault))]\n        [WebInvoke(Method = \"POST\", UriTemplate = \"GetActiveCalls/{nurseid}\")]\n        Stream GetActiveCalls(string nurseid);\n</code></pre>\n\n<p>From the body of the GetActiveCalls, I am creating an object of MemoryStream and returning the same as response. The code looks like  </p>\n\n<pre><code>// Serialize the results as JSON\n                string jsonResult = new JavaScriptSerializer().Serialize(baseResponses);\n\n// ContentType json\nWebOperationContext.Current.OutgoingResponse.ContentType = \"application/json\";\n                WebOperationContext.Current.OutgoingResponse.Headers.Add(\"Cache-Control\", \"no-cache\");\n                var bytes = Encoding.UTF8.GetBytes(jsonResult);\n                //Parse to memorystream\n                var ms = new MemoryStream(bytes);\n                ms.Seek(0, SeekOrigin.Begin);\n                ms.SetLength(bytes.LongLength);\n                return ms;\n</code></pre>\n\n<p>When trying this from client, I get result like</p>\n\n<p>{\"LastEvents\":[{\"FormatValues\":\"Klic 2 3 4\",\"Icon\":null,\"Color\":\"Red\",\"Acknowledged\":false,\"EventID\":28566}],\"Message\":\"\",\"Status\":true}</p>\n\n<p>But sometimes after invoking the same method for multiple times, I start getting the response as : </p>\n\n<p>{\"LastEvents\":[{\"FormatValues\":\"Klic 2 3 4\",\"Icon\":null,\"Color\":\"Red\",\"Acknowledged\":false,\"EventID\":28566}],\"Message\":\"\",\"Statu{\"LastEv</p>\n\n<p>You can see after \"Statu on the JSON response, the stream gets reset and starts getting data from the beginning. </p>\n\n<p>It looks strange to me. Can someone point to if I am missing something. </p>\n\n<p>*From server side, when I put breakpoint, it seems the MemoryStream has correct response.</p>\n"},{"tags":["asp.net",".net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13276846,"title":"How to get the binding address from a WSDL file","body":"<p>I generated a proxy class given a URL to a WSDL.</p>\n\n<p>I need to let the end-user change the service's URL to his specific URL, like this:</p>\n\n<pre><code>ServiceProxy.Url = [URL set by end-user];\n</code></pre>\n\n<p>The issue is that this URL should not point to the WSDL, it should be the binding address which is found within the WSDL (wsdl:service -> wsdl:port -> wsdl:address) (this is a SAP web service, I understand that is why I must use the binding address).</p>\n\n<p>I am thinking of using the XDocument class to get that value, but I am wondering if there is any \"built-in\" functionality in WCF or web services to get the binding address. Thank you.</p>\n"},{"tags":["wcf","nhibernate","ria"],"answer_count":2,"favorite_count":4,"up_vote_count":0,"down_vote_count":0,"view_count":544,"score":0,"question_id":4921465,"title":"WCF RIA SubmitChanges doesn't send master properties back to the server side","body":"<p>Look, I have these pretty simple model Master-Detail:</p>\n\n<p>Hand is master of Fingers (finger is a detail of hand)</p>\n\n<p>So on the client side:</p>\n\n<pre><code>Hand hand = domainService.Hands[0];                 //  get some hand, doesn't matter\n...\nFinger f = new Finger() { f.Id = Guid.NewId() };\nf.Hand = hand;                                      //  make connection !!\ndomainService.Fingers.Add(f);\ndomainService.SubmitChanges(OnSubmitCompleted, null);   //  error is here\n</code></pre>\n\n<p>On the Server Side:</p>\n\n<pre><code>public void Insert&lt;T&gt;(T obj)\n{\n    try\n    {\n        using (ISession session = _factory.OpenSession())\n        using (ITransaction transaction = session.BeginTransaction())\n        {\n            session.SaveOrUpdate(obj);   //  NHibernate error: not-null property references a null or transient value\n            transaction.Commit();\n        }\n    }\n    catch (Exception ex)\n    {\n        throw ;\n    }\n}\n</code></pre>\n\n<p><em><strong>The problem actually is about not sending associations back via WCF wire. So On the server side the Hand property is NULL, but it shouldn't (violation) - I just want to refresh my finger.Hand property</em></strong></p>\n\n<p>It's not even a composition - I don't need this cause of its limitations</p>\n\n<p>here is the metaAttribute class:</p>\n\n<pre><code>    [MetadataType(typeof(Finger.FingerMetadata))]\npublic partial class Finger\n{\n    //[Required(AllowEmptyStrings = true)]\n    //[Exclude]\n    public virtual Guid HandID { get; set; }\n    //{\n    //    get { return Hand.Id; }\n    //}\n\n    internal sealed class FingerMetadata\n    {\n        [Key]\n        public Guid Id  { get; set; }\n\n        [Include]\n        //[RoundtripOriginal]\n        //[ExternalReference]\n        [Association(\"Finger-Hand\", \"HandID\", \"Id\")]\n        //[ConcurrencyCheck]\n        //[Composition]\n        public Hand Hand { get; set; }\n    }\n}\n\n[MetadataType(typeof(Hand.HandMetadata))]\npublic partial class Hand\n{\n    internal sealed class HandMetadata\n    {\n        [Key]\n        public Guid Id  { get; set; }\n\n        [Include]\n        //[ExternalReference]\n        [Association(\"Hand-Finger\", \"Id\", \"HandID\")]\n        //[Composition]\n        public IList&lt;Finger&gt; Fingers { get; set; }\n    }\n}\n</code></pre>\n\n<p>I saw the same problem here <a href=\"http://forums.silverlight.net/forums/p/205220/480824.aspx\" rel=\"nofollow\">http://forums.silverlight.net/forums/p/205220/480824.aspx</a>, but nobody knows..\nPlease help!</p>\n\n<p>Thanks!</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13277151,"title":"Long Running WCF Service","body":"<p>I want to build a service that creates a thread on startup. The WCF service then receives requests and puts work onto the queue to be processed by the background thread. </p>\n\n<p>Ideally, I think this would be easiest if the WCF service is hosted by IIS, but it doesn't seem that you can create a long running background thread like this. </p>\n\n<p>How can I accomplish this with WCF?</p>\n"},{"tags":["wcf","service","callback","handshake"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13263241,"title":"Implementing handshaking in wcf callback client","body":"<p>In an application, I have a client callback that the service calls into when it has completed processing a request. The callback contract (IXCallBack) is exposed by the service itself, and I just provide an implementation for it. </p>\n\n<pre><code>public class XClientCallBack : IXCallBack\n{\n    public void RequestCompleted(int statusNbr)\n    {\n      // provided implementation\n    }\n}\n</code></pre>\n\n<p>Now, I want to enhance the client callback to enable sending request parameters to the service. That is, the client callback service will now take information from the application and send them to the service to create the request, and then it will send back the newly created request identifier to the application. Then when the service completes processing the request, it will callback onto it to inform the completion of the request. First of all, can someone please tell me if it is possible? I don't own the service nor the callback contract, so I cannot change it.</p>\n\n<p>I have just the callback client, and it works fine. I am not sure how to do the enhancement as above. Any help will be greatly appreciated.</p>\n"},{"tags":["c#","wcf","logging"],"answer_count":5,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":4935,"score":4,"question_id":1927975,"title":"Best way to log errors in WCF","body":"<p>What's the best way to catch and log errors when developing a WCF service layer, and why?</p>\n\n<p>I can think of three ways,</p>\n\n<p>1) Manual try/catches around each method.</p>\n\n<p>2) Leave the responsibility to the WCF engine.</p>\n\n<p>3) Use a third party library such as Enterprise Library Policy Injection/Logging.</p>\n"},{"tags":["c#","wcf","web-services","logging"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":589,"score":3,"question_id":7328743,"title":"log soap request and response from Wcf web service to a text file using log4net","body":"<p>Is there there any simple way of getting a WCF Service to log SOAP requests and responses to a text file.</p>\n\n<p>I want to log the messages on server, just to clarify.</p>\n"},{"tags":["xml","wcf","mtom"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":14,"score":-4,"question_id":13276900,"title":"WCF Compatibility with MTOM sample","body":"<p>I am looking for a working sample that help me to understand MTOM working on WCF for binary file trasfer.</p>\n\n<p>The sample application I prepared is not working and trhowing some wieard error. I used tracking...logging ... and google to find error resolution but not find the luck...</p>\n\n<p>I not a expert but good to understand the things quckly. Please if you have any sample solution send it at amitjain.in at gmail.com...thanks.</p>\n\n<p>Content Type multipart/related; type=\"application/xop+xml\";start=\"&lt;..tempuri....>\";boundary=\"uuid:19ae81cd-b951-41e6-b94d-8f8852fdac44+id=1\";start-info=\"text/xml\" was not supported by service ........  The client and service bindings may be mismatched.</p>\n"},{"tags":[".net","wcf","serialization","json.net","deserialization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13273033,"title":"Json.net loose vs strict type deserialization","body":"<p>At the project I am working on, we started to use the Json.Net library.</p>\n\n<p>However, I just found out that json.net is 'loose' on string type.</p>\n\n<p>Here's an example:</p>\n\n<p>The DTO class</p>\n\n<pre><code>[JsonObject]\npublic class DTO\n{\n    [JsonProperty]\n    public string type;\n}\n</code></pre>\n\n<p>The deserialization</p>\n\n<pre><code>byte[] rawBody = GetBytes(@\"{\"\"type\"\":true}\");\nusing (MemoryStream ms = new MemoryStream(rawBody))\n{\n    using (StreamReader sr = new StreamReader(ms))\n    {\n        var serializer = new JsonSerializer();\n\n        return serializer.Deserialize(sr, typeof(DTO));\n     }\n }\n</code></pre>\n\n<p>This will deserialize the 'type' attribute as \"True\". However, I would expect it to fail and throw an exception as there's a type mismatch.\nIt does the same if I replace true by 1 in the json. The property 'type' value will be \"1\".</p>\n\n<p>questions:</p>\n\n<ol>\n<li><p>Is there a way to enforce strict serialization?</p></li>\n<li><p>Is there other types than string that have implicit conversion like what we see here?</p></li>\n</ol>\n\n<p>Thank you.</p>\n\n<p>JF</p>\n"},{"tags":["c#","wpf","wcf","mvvm","user-roles"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":13206409,"title":"Assigning Roles to Application Users","body":"<p>As in all the Line-Of-Business Applications, an application may have multiple <code>Users</code> with some <code>Roles</code> assigned to them. We have recently shifted to WPF MVVM Architecture and looking for best way to assign role to each logged in user. There are many terms floating over internet like Authentication, RoleManager, LoginService etc, but I am not sure which to work out with.</p>\n\n<p><strong>Here is what we have:</strong></p>\n\n<p>A small business application (With 20 Forms), developed within a single-project. We use <code>MVVM</code> architecture, <code>LINQ-to-SQL</code> as DataAccess and <code>Model</code>, with <code>Repository pattern</code> and <code>Unit Of Work</code>.</p>\n\n<p><strong>What we want:</strong></p>\n\n<p>There are different forms and each form has <em>insert</em>, <em>update</em>, <em>delete</em>, <em>print</em> etc operations. What we want is to restrict a logged in user according to his role - to the task he can perform. i.e for e.g. Admin is free to do \"<em>anything</em>\" with the application, while some other users may not be allowed to view some forms or carry out some operations (viz. update or delete).</p>\n\n<p>So how can we achieve this; what kind of service could be used for carrying out this complete mechanism using MVVM architecture within a Desktop LOB application. A technical term or tutorial link will be helpful.</p>\n\n<p>I hope I am clear and thank you very much in advance.</p>\n\n<p><strong>Edit:</strong>  I went through many forums and articles around, but all of them focuses on ASP.NET. Still cannot find a concrete implementation for assignment of roles within WPF. And the sources on ASP.NET doesn't comply well with WPF.  </p>\n"},{"tags":["objective-c","ios","wcf","rest","afnetworking"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13274689,"title":"AFNetworking JSON request to WCF REST service","body":"<p>I'm using AFNetworking for my REST service (WCF). Here is code:</p>\n\n<pre><code>  NSDictionary *userName = [NSDictionary dictionaryWithObject:@\"user\" forKey:@\"UserNameOrEmail\"];\n  NSDictionary *pass = [NSDictionary dictionaryWithObject:@\"123\" forKey:@\"Password\"];\n  NSArray *credentials = [NSArray arrayWithObjects:userName,pass,nil];\n  NSDictionary *params = [NSDictionary dictionaryWithObject:credentials forKey:@\"request\"];\n\n\n  AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:\n  [NSURL URLWithString:@\"http://server\"]];\n\n  [client postPath:@\"/ProfileWebService.svc/login\" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {\n    NSString *text = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];\n    NSLog(@\"Response: %@\", text);\n} failure:^(AFHTTPRequestOperation *operation, NSError *error) {\n    NSLog(@\"%@\", [error localizedDescription]);\n}];\n</code></pre>\n\n<p>but I get 400 HTTP Error.</p>\n\n<p>Using HTML and AJAX it looks like:</p>\n\n<pre><code>        $(document).ready(function () {\n\n            $(\"#login_call\").click(function () {\n                $.ajax({\n                    type: 'POST',\n                    url: 'http://server/ProfileWebService.svc/login',\n                    contentType : 'application/json',\n                    dataType: 'json',\n                    data: JSON.stringify({request: {UserNameOrEmail: $('#login_username').val(), Password: $('#login_password').val()}}),\n                    success: function (data) {\n                        $('#login_result').val('Code: ' + data.LoginResult.Code + '\\nFault String: ' + data.LoginResult.FaultString);\n                    }\n                });\n            });\n\n        });\n</code></pre>\n\n<p>and works fine.     </p>\n\n<p>What's wrong with parameters.</p>\n"},{"tags":["wcf","rest","google-analytics"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13267791,"title":"Track WCF REST using GoogleAnalyticsTracker","body":"<p>I have a restful WCF at <a href=\"http://myapp.cloudapp.net/Service1.svc\" rel=\"nofollow\">http://myapp.cloudapp.net/Service1.svc</a> that returns json data. The wcf is in Azure right now.\nI want to track the usage of the WCf using googleAnalyticsTracker. All clients that use my WCf by sending http request to it, i want them tracked by googleAnalytics.</p>\n\n<p>I have created an accout at googleAnalytics and provide the same url as above for the service to track.</p>\n\n<p>The only operatin GetData() in Service1.svc is called when that http.../Service1.svc is browsed, with this code for Trakcer in GetData():</p>\n\n<pre><code>Tracker tracker = new Tracker(\"UA-xxxxx-x\", \"http://myapp.cloudapp.net/\");\n\n        //var request = svcSecurityContext;\n        tracker.SetCustomVariable(1, \"Time\", DateTime.Now.ToShortDateString());\n        tracker.SetCustomVariable(2, \"UserName\", \"myname\");\n\n        tracker.SetCustomVariable(3, \"Service accessed\",     OperationContext.Current.RequestContext.RequestMessage.Headers.To.ToString());\n\n        tracker.TrackPageView(\"My API - Create\", \"api/create\");\n</code></pre>\n\n<p>The service return the data and i wheb go to mydashboard at googleAnalytics, i cannot see Visits being incremented. I need help to figure out if i am using googleanalyticstracker correctly.</p>\n\n<p>Is it possible to do like iam doing using googleanalytics with a wcf or it just can be used with web pages?</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","iis","asp.net-mvc-4",".net-4.5"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13270255,"title":".Net 4.5 WCF Error 404.3 on IIS 7.5","body":"<p>I deployed a MVC4 web application including a wcf service.\nwhen i try to browse to the .svc file i receive Error 404.3 (Error Code 0x80070032).</p>\n\n<p>I tried all the relevant answers i read:\n1. adding a .svc mime\n2. checking that the server's ISAPI filter include ASP.Net 4 bothe 32bit and 64bit.\n3. checking that Server Managers Features include WCF Activation.</p>\n\n<p>I already have a MVC3 web application with WCF service running on the same server.</p>\n\n<p>Can you please point me to what can cause this problem?</p>\n\n<p>I noticed that on IIS Manager in Handler Mapping there is a difference between the two domains running the applications. the working one is almost empty (include only StaticFile) while the new one has a long list of handlers enabled (I don't know if it is relevant or not).</p>\n\n<p>Thank You!</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13273122,"title":"Best way of validating WCF input","body":"<p>In my services all the methods except certain mandatory parameters and all the input parameters are encapsulated inside message contract.</p>\n\n<p>Right now, we are validating the input in each and every service method, Its like duplicating validation logic in all the service methods. Is there any way I can move all these validation to common place and more over I don't want my service method to be executed as the input is not valid.</p>\n\n<p>Appreciate your suggestions.</p>\n"},{"tags":["wcf","silverlight-5.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13272797,"title":"Is there a way to build a SL-enabled WCF Service for two way binding?","body":"<p>I'm interested in building a Silverlight-enabled WCF Service for use in a two way binding scenario.</p>\n\n<p>The construction of a WCF service without the SL-enabled template is a bit cumbersome, and in my case the SL-enabled template seems to be sufficient, so far!.</p>\n"},{"tags":["wcf","web-services","custom-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":17,"score":0,"question_id":13272756,"title":"WCF customBinding over HTTPS","body":"<p>I have a situation where i need to sign a soap request w/ a X509 certificate for consumption by a java web service.  Thru the magic of WCF we were able to get the envelope formed properly and all looks great over standard http.  However, once we move to HTTPS (required by client), we start receiving errors \"Could not establish trust relationship for the SSL/TLS secure channel with authority\" .. We've tried tweaking some settings and changing the target domain to other known HTTPS sites and we still receive the same error.  Below is our client configuration, thanks so much in advance!</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding\n          name=\"myCustomBinding\"\n          closeTimeout=\"00:01:00\"\n          openTimeout=\"00:01:00\"\n          receiveTimeout=\"00:10:00\"\n          sendTimeout=\"00:01:00\"&gt;\n          &lt;textMessageEncoding\n                  messageVersion=\"Soap11\" /&gt;\n          &lt;security\n            allowInsecureTransport=\"true\"\n            authenticationMode=\"MutualCertificate\"\n            requireDerivedKeys=\"false\"\n            keyEntropyMode=\"ClientEntropy\"\n            includeTimestamp=\"false\"\n            securityHeaderLayout=\"Lax\"\n            messageProtectionOrder=\"SignBeforeEncrypt\"\n            messageSecurityVersion=\"WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10\"&gt;\n            &lt;secureConversationBootstrap /&gt;\n          &lt;/security&gt;\n          &lt;httpsTransport /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"wsHttpCertificateBehavior\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate\n              findValue=\"MyCertName\"\n              storeLocation=\"LocalMachine\"\n              x509FindType=\"FindByIssuerName\"/&gt;\n            &lt;serviceCertificate&gt;\n              &lt;authentication\n                revocationMode=\"NoCheck\"\n                trustedStoreLocation=\"LocalMachine\" /&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;client&gt;\n      &lt;endpoint\n        address=\"https://www.SomeUrl.com\"\n        binding=\"customBinding\"\n        bindingConfiguration=\"myCustomBinding\"\n        behaviorConfiguration=\"wsHttpCertificateBehavior\"\n        contract=\"ServiceReference1.ServiceTest\"\n        name=\"untk48_dfSoap\"&gt;\n        &lt;identity&gt;\n          &lt;certificateReference findValue=\"MyCertName\" storeLocation=\"LocalMachine\" x509FindType=\"FindByIssuerName\"/&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;startup&gt;\n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["jquery","wcf","soap","wcf-binding","wshttpbinding"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":13249675,"title":"How can I implement WS-Security at JQuery end?","body":"<p>I followed this codeproject <a href=\"http://www.codeproject.com/Articles/311908/Calling-WCF-service-exposed-with-different-binding\" rel=\"nofollow\">sample</a>.<br>\nAt the <strong>Consuming the Service Exposed with wsHttpBinding in JQuery</strong> section it's written that:  </p>\n\n<blockquote>\n  <p>A service exposed with wsHttpBinding binding implements WS-Security\n  of WS-* family of web service specifications. As the binding uses\n  security, the request will be rejected. The service cannot be called\n  without implementing WS-Security at JQuery end. So, in order to call\n  the service method, we have to compromise with the security.</p>\n</blockquote>\n\n<p>and they are implementing a Non-secure <code>&lt;wsHttpBinding&gt;</code> Endpoint.</p>\n\n<p>But I want my <code>&lt;wsHttpBinding&gt;</code> will be <code>&lt;security mode=\"Message\"&gt;</code>,<br>\nThis off-course doesn't works and returning the following error:  </p>\n\n<blockquote>\n  <p>The message could not be processed. This is most likely because the\n  action\n  'http://www.enghouse.com/CosmoCom/WebAdminAPIServiceLibrary/IQueue/GetAllQueues'\n  is incorrect or because the message contains an invalid or expired\n  security context token or because there is a mismatch between\n  bindings. The security context token would be invalid if the service\n  aborted the channel due to inactivity. To prevent the service from\n  aborting idle sessions prematurely increase the Receive timeout on the\n  service endpoint's binding.</p>\n</blockquote>\n\n<p>If I will change this to <code>&lt;security mode=\"None\"&gt;</code> it works perfectly.  </p>\n\n<p>So my question is how can I implement <code>&lt;security mode=\"Message\"&gt;</code>?<br>\nWhat I need to do?</p>\n\n<p>Thanks! </p>\n"},{"tags":[".net","wcf","web-services","wif","sts-securitytokenservice"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13177307,"title":"Validating Security Token issued by STS while calling WCF services","body":"<p>We have extended <code>SecurityTokenService</code> provided by <code>Windows Identity Foundation</code> (WIF). It issues token as expected and the SAML token is added in the SOAP header while calling every other WCF service we have.</p>\n\n<p>I can see correct values in the <code>NotBefore</code> and <code>NotOnOrAfter</code> Saml Conditions present in the security token.</p>\n\n<p>But surprisingly every call to other WCF services succeeds even when service is called after the time stamp present in <code>NotOnOrAfter</code> Saml condition that's present in the security token in the SOAP header.</p>\n\n<ol>\n<li>I do not understand why it happens. Do I need to write some code to reject the call having expired security token?</li>\n<li>Do I need to create custom binding or behavior for  it?</li>\n<li>Does not WIF or WCF take care of this basic thing automatically?</li>\n<li>Great if you could point me to some good documentation that explains things happening under the hood !</li>\n</ol>\n\n<p>I am using .NET 4.0</p>\n"},{"tags":["wcf","sql-server-2008-r2","sql-server-ce","microsoft-sync-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13272164,"title":"\"The column name is not valid. [ Node name (if any) = ut0,Column name = __sysTrackingContext ]\"","body":"<p>I have used Visual Studio 2010 , SQL Server 2008 R2, Sync Framework, and SQLCE &amp; WCF in my project.</p>\n\n<p>I tried to sync a table which is manually configured in client database(*.sdf) file.\nSo this error occurred \"The column name is not valid. [ Node name (if any) = ut0,Column name = __sysTrackingContext ]\"</p>\n\n<p>If i sync this table first time directly from server then its working fine second time and it is syncing the data to server but if i want to do manually configuration to client DB then i got this error....</p>\n"},{"tags":["wcf","rest","azure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":658,"score":0,"question_id":5526725,"title":"CheckAccessCore not being called in custom ServiceAuthorizationManager","body":"<p>I am working on a WCF REST service that will be hosted within Azure and want to check the user id. To this end I have created a custom ServiceAuthorizationManager.</p>\n\n<pre><code>namespace SecureService\n{\n    public class AccessControlServiceAuthorizationManager : ServiceAuthorizationManager \n    {\n        String serviceNamespace      = String.Empty;\n        String acsHostname           = String.Empty;\n        String trustedTokenPolicyKey = String.Empty;\n        String trustedAudience       = String.Empty;\n\n        public AccessControlServiceAuthorizationManager()\n        {\n            try\n            {\n                serviceNamespace      = RoleEnvironment.GetConfigurationSettingValue(\"serviceNamespace\");\n                acsHostname           = RoleEnvironment.GetConfigurationSettingValue(\"acsHostname\");\n                trustedTokenPolicyKey = RoleEnvironment.GetConfigurationSettingValue(\"trustedTokenPolicyKey\");\n                trustedAudience       = RoleEnvironment.GetConfigurationSettingValue(\"trustedAudience\");\n            }\n            catch\n            {\n                GenerateErrorResponse();\n            }\n            finally\n            {\n\n            }\n        }                                   // end AccessControlServiceAuthorizationManager() Constructor\n\n        protected override bool CheckAccessCore(OperationContext operationContext)\n        {\n            String headerValue = WebOperationContext.Current.IncomingRequest.Headers[HttpRequestHeader.Authorization];\n            String token = String.Empty;\n            string[] nameValuePair = null;\n            TokenValidator validator = null;\n\n\n            if (String.IsNullOrEmpty(headerValue))\n            {\n                GenerateErrorResponse();\n                return false;\n            }\n\n            if (!headerValue.StartsWith(\"WRAP \"))\n            {\n                GenerateErrorResponse();\n                return false;\n            }\n\n            nameValuePair = headerValue.Substring(\"WRAP \".Length).Split(new char[] { '=' }, 2);\n\n            if (nameValuePair.Length != 2 || \n                nameValuePair[0] != \"access_token\" || \n                !nameValuePair[1].StartsWith(\"\\\"\") || \n                !nameValuePair[1].EndsWith(\"\\\"\"))\n            {\n                GenerateErrorResponse();\n                return false;\n            }\n\n            token     = nameValuePair[1].Substring(1, nameValuePair[1].Length - 2);\n            validator = new TokenValidator(acsHostname, serviceNamespace, trustedAudience, trustedTokenPolicyKey);\n\n            if (!validator.Validate(token))\n            {\n                GenerateErrorResponse();\n                return false;\n            }\n\n            return true;\n        }\n\n        public void GenerateErrorResponse()\n        {\n\n        }\n    }\n}\n</code></pre>\n\n<p>My Web.config is as follows;</p>\n\n<p>\n\n    \n        \n            \n                \n                    \n                \n            \n        \n    \n    \n        \n    </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"/&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"Secure\"&gt;\n                &lt;serviceAuthorization serviceAuthorizationManagerType=\"SecureService.AccessControlServiceAuthorizationManager\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n        &lt;endpointBehaviors&gt;\n            &lt;behavior name=\"webBehavior\"&gt;                       \n                &lt;webHttp /&gt;\n            &lt;/behavior&gt;\n        &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n        &lt;service name=\"SecureService.Demo\"&gt;\n            &lt;endpoint address=\"\" behaviorConfiguration=\"webBehavior\" binding=\"webHttpBinding\" bindingConfiguration=\"\" contract=\"SecureService.IDemo\" /&gt;\n            &lt;endpoint address=\"rest\" behaviorConfiguration=\"webBehavior\" binding=\"webHttpBinding\" bindingConfiguration=\"\" contract=\"SecureService.IDemo\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n&lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n        &lt;add name=\"UrlRoutingModule\" type=\"System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n    &lt;/modules&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p></p>\n\n<p>However the CheckAccessCore() method does not seem to be called when I call the service via IE. So the question is how can I ensure it is called and therefore ensure that my users are validated.</p>\n\n<p>I have put a break point in the CheckAccessCore and it never seems to get hit.</p>\n\n<p>And just to make things really interesting - I will need to call this webservice from within Silverlight.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["visual-studio-2010","wcf","windows-services","hosting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3,"score":0,"question_id":13271865,"title":"Can I make \"Discover services in Solution\" work for Windows service based WCF services?","body":"<p>I've got a VS2010 solution with two projects, each containing a Windows service hosting a WCF service. I also have another project as part of the solution that consumes these services.</p>\n\n<p>When I deploy the Windows service based WCF services and then add a service reference via VS everything works fine, but I'd like to add a service reference via <code>Add Service Reference</code> => <code>Discover</code> => <code>Services in Solution</code>. Unfortunately this only seems to work for projects based directly on the WCF service template which I cannot use. I also tried editing the .csproj files for the respective projects as suggested <a href=\"http://social.msdn.microsoft.com/forums/en-US/wcf/thread/bbc6d1f6-15f1-40b6-a96d-ab8a9fb52048/\" rel=\"nofollow\">on MSDN</a>, but this also didn't work.</p>\n\n<p>Is there a way to make this work so I don't have to deploy my services to a test server and then add a service reference using its URL?</p>\n"},{"tags":["wcf","web-services","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13271674,"title":"WCF - The HTTP request was forbidden with client authentication scheme 'Anonymous'","body":"<p>I know this is a very common scenario, but I've still, after two days of searching, not found a solution to this problem.</p>\n\n<p>I've got a WCF Service and a client (web site), using SSL and a client certificate.</p>\n\n<p>Relevant service config section:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"HOLBinding\"&gt;\n                &lt;security mode=\"Transport\"&gt;\n                    &lt;transport clientCredentialType=\"Certificate\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"HOLServiceBehaviour\"&gt;\n          &lt;serviceCredentials&gt;\n            &lt;clientCertificate&gt;\n        &lt;authentication certificateValidationMode=\"PeerOrChainTrust\" trustedStoreLocation=\"LocalMachine\" /&gt;\n        &lt;/clientCertificate&gt;\n          &lt;/serviceCredentials&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" httpsGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n&lt;services&gt;\n      &lt;service name=\"HOL.Core.Service.HOLService\" behaviorConfiguration=\"HOLServiceBehaviour\"&gt;\n        &lt;endpoint address=\"bh\" bindingConfiguration=\"HOLBinding\" binding=\"basicHttpBinding\" contract=\"HOL.Core.Service.IHOLService\" /&gt;\n        &lt;endpoint address=\"wb\" behaviorConfiguration=\"WebBehaviour\" binding=\"webHttpBinding\" contract=\"HOL.Core.Service.IHOLService\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n</code></pre>\n\n<p>Relevant client service config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"HOLServiceEndpointBehaviour\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate storeLocation=\"LocalMachine\" \n                   findValue=\"mythumbprint\" \n                               x509FindType=\"FindByThumbprint\" storeName=\"TrustedPeople\" /&gt;\n\n            &lt;serviceCertificate&gt;\n               &lt;authentication certificateValidationMode=\"PeerOrChainTrust\"/&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_IHOLService\" maxBufferPoolSize=\"20000000\" maxReceivedMessageSize=\"20000000\"&gt;\n            &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Certificate\" /&gt;\n         &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"https://www.myhttpsite.co.uk/Service/HOLService.svc/bh\" binding=\"basicHttpBinding\" \n                bindingConfiguration=\"BasicHttpBinding_IHOLService\" contract=\"HOLCoreService.IHOLService\" \n                name=\"BasicHttpBinding_IHOLService\" behaviorConfiguration=\"HOLServiceEndpointBehaviour\"&gt;\n    &lt;/endpoint&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>My certificate is being found, so that's not the problem (took me a day to fix that problem too!)</p>\n\n<p>I believe the error is that the client calling the WCF Service simply isn't sending through the correct details to authenticate... but why?</p>\n"},{"tags":["wcf","security","authorization"],"answer_count":6,"favorite_count":3,"up_vote_count":24,"down_vote_count":0,"view_count":39427,"score":24,"question_id":1026855,"title":"WCF - Windows authentication - Security settings require Anonymous","body":"<p>I am struggling hard with getting WCF service running on IIS on our server. After deployment I end up with an error message:</p>\n\n<p><em>Security settings for this service require 'Anonymous' Authentication but it is not enabled for the IIS application that hosts this service.</em> </p>\n\n<p>I want to use Windows authentication and thus I have Anonymous access disabled. Also note that there is aspNetCompatibilityEnabled (if that makes any difference).</p>\n\n<p>Here's my web.config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n\t&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n\t&lt;bindings&gt;\n\t\t&lt;webHttpBinding&gt;\n\t\t\t&lt;binding name=\"default\"&gt;\n\t\t\t\t&lt;security mode=\"TransportCredentialOnly\"&gt;\n\t\t\t\t\t&lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"Windows\"/&gt;\n\t\t\t\t&lt;/security&gt;\n\t\t\t&lt;/binding&gt;\n\t\t&lt;/webHttpBinding&gt;\n\t&lt;/bindings&gt;\n\t&lt;behaviors&gt;\n\t\t&lt;endpointBehaviors&gt;\n\t\t\t&lt;behavior name=\"AspNetAjaxBehavior\"&gt;\n\t\t\t\t&lt;enableWebScript /&gt;\n\t\t\t\t&lt;webHttp /&gt;\n\t\t\t&lt;/behavior&gt;\n\t\t&lt;/endpointBehaviors&gt;\n\t\t&lt;serviceBehaviors&gt;\n\t\t\t&lt;behavior name=\"defaultServiceBehavior\"&gt;\n\t\t\t\t&lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"false\" /&gt;\n\t\t\t\t&lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n\t\t\t\t&lt;serviceAuthorization principalPermissionMode=\"UseWindowsGroups\" /&gt;\n\t\t\t&lt;/behavior&gt;\n\t\t&lt;/serviceBehaviors&gt;\n\t&lt;/behaviors&gt;\n\t&lt;services&gt;\n\t\t&lt;service name=\"xxx.Web.Services.RequestService\" behaviorConfiguration=\"defaultServiceBehavior\"&gt;\n\t\t\t&lt;endpoint behaviorConfiguration=\"AspNetAjaxBehavior\" binding=\"webHttpBinding\"\n\t\t\t contract=\"xxx.Web.Services.IRequestService\" bindingConfiguration=\"default\"&gt;\n\t\t\t&lt;/endpoint&gt;\n\t\t\t&lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" name=\"mex\" contract=\"IMetadataExchange\"&gt;&lt;/endpoint&gt;\n\t\t&lt;/service&gt;\n\t&lt;/services&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I have searched all over the internet with no luck. Any clues are greatly appreciated.</p>\n"},{"tags":["wcf","silverlight-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":183,"score":0,"question_id":9191934,"title":"how to create virtual directory to my silverlight application in Local IIS","body":"<p>I developed Silverlight Project With Wcf and linq to sql.</p>\n\n<p>Now I Created Virtual Directory to My Project And I Executed My Project then i got Error like This:</p>\n\n<pre><code>Error 1 It is an error to use a section registered as allowDefinition='MachineToApplication'; beyond application level. This error can be caused by a virtual directory not being configured as an application in IIS. `\n\nE:\\vijay\\FirstGuardianSecure\\FirstGuardian.Web\\Web.config\n</code></pre>\n\n<p>Please Give me idea how to solve my problem.</p>\n"},{"tags":["asp.net","wcf","azure"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":216,"score":4,"question_id":12594043,"title":"HttpModule EndRequest handler called twice","body":"<p>I am attempting to implement authentication for a REST service implemented in WCF and hosted on Azure.  I am using HttpModule to handle the AuthenticationRequest, PostAuthenticationRequest and EndRequest events.  If the Authorization header is missing or if the token contained therein is invalid, during EndRequest I am setting the StatusCode on the Response to 401.  However, I have determined that EndRequest is called twice, and on the second call the response has already had headers set, causing the code which sets the StatusCode to throw an exception.</p>\n\n<p>I added locks to Init() to ensure that the handler wasn't being registered twice; still ran twice.  Init() also ran twice, indicating that two instances of the HttpModule were being created.  However, using Set Object ID in the VS debugger seems to indicate that the requests are actually different requests.  I've verified in Fiddler that there is only one request being issued to my service from the browser.</p>\n\n<p>If I switch to using global.asax routing instead of depending on the WCF service host configuration, the handler is only called once and everything works fine.</p>\n\n<p>If I add configuration to the system.web configuration section as well as the system.webServer configuration section in Web.config, the handler is only called once and everything works fine.</p>\n\n<p>So I have mitigations, but I really dislike behavior I don't understand.  Why does the handler get called twice?</p>\n\n<p>Here is a minimal repro of the problem:</p>\n\n<p>Web.config:</p>\n\n<pre><code>  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n    &lt;!--&lt;httpModules&gt;\n      &lt;add name=\"AuthModule\" type=\"TestWCFRole.AuthModule, TestWCFRole\"/&gt;\n    &lt;/httpModules&gt;--&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"WebBehavior\"&gt;\n          &lt;webHttp/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" aspNetCompatibilityEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service name=\"TestWCFRole.Service1\"&gt;\n        &lt;endpoint binding=\"webHttpBinding\" name=\"RestEndpoint\" contract=\"TestWCFRole.IService1\" bindingConfiguration=\"HttpSecurityBinding\" behaviorConfiguration=\"WebBehavior\"/&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;standardEndpoints&gt;\n      &lt;webHttpEndpoint&gt;\n        &lt;standardEndpoint name=\"\" helpEnabled=\"true\" automaticFormatSelectionEnabled=\"true\"/&gt;\n      &lt;/webHttpEndpoint&gt;\n    &lt;/standardEndpoints&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"HttpSecurityBinding\" &gt;\n          &lt;security mode=\"None\" /&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n      &lt;add name=\"AuthModule\" type=\"TestWCFRole.AuthModule, TestWCFRole\"/&gt;\n    &lt;/modules&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n</code></pre>\n\n<p>Http module:</p>\n\n<pre><code>using System;\nusing System.Web;\n\nnamespace TestWCFRole\n{\n    public class AuthModule : IHttpModule\n    {\n        /// &lt;summary&gt;\n        /// You will need to configure this module in the web.config file of your\n        /// web and register it with IIS before being able to use it. For more information\n        /// see the following link: http://go.microsoft.com/?linkid=8101007\n        /// &lt;/summary&gt;\n        #region IHttpModule Members\n\n        public void Dispose()\n        {\n            //clean-up code here.\n        }\n\n        public void Init(HttpApplication context)\n        {\n            // Below is an example of how you can handle LogRequest event and provide \n            // custom logging implementation for it\n            context.EndRequest += new EventHandler(OnEndRequest);\n        }\n\n        #endregion\n\n        public void OnEndRequest(Object source, EventArgs e)\n        {\n            HttpContext.Current.Response.StatusCode = 401;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["wcf","service","dns","forward"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13268510,"title":"create WCF dns-router","body":"<p>I have a winforms application that is consuming a WCF service.  So far, the WCF service is a selfhosted service on the local pc.  It contains several interfaces (one per program functionallity).\nAs an improvement I want to expose the service to the internet, so I can call it using a new mobile app.  This can be easily done by configuring the router/firewall and use some kind of dynamic dns or remember the ip address (in worst case scenario).</p>\n\n<p>But now, here comes the real question:\nIn a next step I will distribute the winforms app to several locations (call it customers), acompagnied with their local WCF service en their mobile app.  In order to allow the customer to connect to their wcf service (using the mobile app), I can set up now a dynamic dns for each customer, but I don't want to do that.  First of all, the best dyndns services are not free, or you have to renew periodically.  Second, I want to offer the customers my own dns service so I can 'forward' their wcf call to their own local service.\nThe wcfdnsrouter should be located at a public webhost, where the customers ip address is provided with an ip-updater (as it is often the case for other dyndns services)</p>\n\n<p>As an example, imagine this:</p>\n\n<p>Customer A; IP1; endpoint: <a href=\"http://wcfdnsrouter.com/A\" rel=\"nofollow\">http://wcfdnsrouter.com/A</a></p>\n\n<p>Customer B; IP2; endpoint: <a href=\"http://wcfdnsrouter.com/B\" rel=\"nofollow\">http://wcfdnsrouter.com/B</a></p>\n\n<p>Where I want that \nwcfdnsrouter.com/<strong>A</strong> will forward (or route?) ALL calls to <strong>IP1</strong> \nand\nwcfdnsrouter.com/<strong>B</strong> will forward (or route?) ALL calls to <strong>IP2</strong>  </p>\n\n<p>With this scenario, the customer can access his service using mobile app from every place on earth.  Hardware configuration on customers site is not a problem.</p>\n\n<p>The goal is to use a parameter, rather than having an other url per customer.  This should reduce the configuration and avoid duplicating my service.  However, it is still an open trace (in this case, I need to create a subdomain and copy the wcfdnsrouter that is nothing more than a ordinary routingservice).</p>\n\n<p>So, the entry point seems to be a restfull service that routes the message to another ip address\\service.\nI did already some research about routingservices, but I think I'll not get where I want.  Contentbased routing is not an option since I don't want to change all my interfaces to have a criteria.  I do not see how to make the link between the parameter in the restfull service with the ip addres I need to call (so another service).</p>\n\n<p>Security is not realy a issue at this moment.</p>\n\n<p>Please note that is question is NOT about (free) dns services.  The purpose is to create it myself.  Activating a new customer should not be more than installing the auto-ip-updater and assigning some kind of code (like A and B) in the example.</p>\n\n<p>I need some advice how to do that.  Maybe I'm on the wrong track thinking about routing?  Maybe there is a very easy way that I mis?</p>\n\n<p>Thanks in advance!  </p>\n"},{"tags":["asp.net",".net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13267630,"title":"Add reference to service within same project","body":"<p>I'm wondering if it is okay to add a reference to a web service within the same project (web application), i.e. I'm adding a reference in the same project where the service is defined.</p>\n\n<p>The reason for doing so is because  </p>\n\n<ul>\n<li>Hosting the service becomes easier (gets automatically hosted when hosting the web app).</li>\n<li>Invoking the service is done dynamically, i.e. the service url is fetched (from db) at run time and methods on that particular service are invoked. (this is a web app which is hosted on many domains. each app knows the service url of other apps (urls stored in db). since I have a reference to the service, I can change the url at runtime by updating the <code>Url</code> of the proxy and invoke it.)</li>\n</ul>\n\n<p>Also, I'm not sure if this is the way to go about it. I have seen a lot of people suggest using WCF instead of a web service, but I don't see how I could accomplish the same thing with WCF.</p>\n\n<p>There is already a question regarding this on SO - <a href=\"http://stackoverflow.com/questions/2135954/add-service-reference-to-wcf-service-within-same-project\">Add Service Reference to WCF Service within Same Project</a>, but i don't think it is valid for my situation.</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13267357,"title":"How to implement one time authentication for wcf service?","body":"<p><strong>I am creating one API using WCF, I want to implement one time authentication for that WCF service. So that for next request there is no need to pass username and password.</strong></p>\n\n<p>So please  suggest me best way to implement this.</p>\n\n<p>Please provide some references.</p>\n"},{"tags":["wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13265872,"title":"Does a WCF application using IIS require any additional installation for the customer?","body":"<p>Going to work on a WCF application that will communicate with an apache server (that we host), as well as sharepoint (customer hosted). The WCF application will also be deployed on the customers side. </p>\n\n<p>My question is if this will require the customer to install something (IIS?) before it will work for them? Of course we would prefer that they wouldn't have to.</p>\n"},{"tags":["php","wcf","wsdualhttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13262768,"title":"How to consume wcf service with callback in web?","body":"<p>I have a project that requires PHP to connect into WCF self host. The structure was, I have a selfhost wcf with tcp and WSDualHttpBinding protocols. I've used PHP SOAP version 1 and wcf has EnvelopVersion Soap12. I tried to test PHP code below but unfortunately couldn't make it work. I try to type the Url in my browser \"http://...:8009/Service/Service/?wsdl\" to test if my WCF was up and xml was appeared so it means wcf is up and running. Is it possible to notify web client if I have callback in the my self host service? Thanks in advance.</p>\n\n<pre><code>    &lt;?php\n\ntry\n{\n    $client = new SoapClient('http://...:8009/Service/Service/?wsdl',\n    array(\n                'location' =&gt; 'http://...:8009/Service/Service/',\n                'trace' =&gt; true,\n                'soap_version' =&gt; SOAP_1_1,\n                'cache_wsdl' =&gt; WSDL_CACHE_MEMORY\n        )); \n        .\n        .\n        .\n\n} catch ( Exception $e )\n{\n    echo \"Error:\".$e-&gt;getMessage();\n}\n\n?&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","wcf","restful-authentication","basichttpbinding"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13266932,"title":"The HTTP request is unauthorized with client authentication scheme 'Anonymous'?","body":"<p>While trying to invoke a RESTful service(i have used UserNameAuthenticator from this sample for RESTful service <a href=\"http://stackoverflow.com/questions/4715752/adding-basic-http-auth-to-a-wcf-rest-service\">Adding basic HTTP auth to a WCF REST service</a>) from my web client application am getting an error like   </p>\n\n<pre><code>The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was 'Basic Realm'.\n</code></pre>\n\n<p>Client CS code</p>\n\n<pre><code>BasicHttpBinding binding = new BasicHttpBinding();\nbinding.SendTimeout = TimeSpan.FromSeconds(25);\nbinding.Security.Transport.ClientCredentialType =\nHttpClientCredentialType.Basic;\nEndpointAddress address = new  EndpointAddress(\"http://localhost:12229/RestServiceImpl.svc\");\nChannelFactory&lt;RestService.IRestServiceImpl&gt; factory =\nnew ChannelFactory&lt;RestService.IRestServiceImpl&gt;(binding, address);\nRestService.IRestServiceImpl channel = factory.CreateChannel();\nchannel.GetStudent();\n</code></pre>\n\n<p>Client Web.config</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"RestService.RestServiceImpl\"&gt;\n        &lt;endpoint address=\"http://localhost:12229/RestServiceImpl.svc\"\n          binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ExternalSystemsService_v1Interface\"\n          contract=\"RestService.IRestServiceImpl\"\n          name=\"ExternalSystemsService_v1Port\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_ExternalSystemsService_v1Interface\"\n                         closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\"\n                         sendTimeout=\"00:01:00\" allowCookies=\"false\" bypassProxyOnLocal=\"false\"\n                         hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"65536\"\n                         maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                         messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                         useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"TransportCredentialOnly\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>and RESTful service Web.config</p>\n\n<pre><code> &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"webHttpTransportSecurity\"&gt;\n          &lt;security mode=\"TransportCredentialOnly\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n          &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service name=\"RestService.RestServiceImpl\"&gt;\n        &lt;endpoint name=\"ExternalSystemsService_v1Port\" address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ExternalSystemsService_v1Interface\" contract=\"RestService.IRestServiceImpl\"&gt;&lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"SecureRESTSvcTestBehavior\"&gt;\n&lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"RESTfulSecuritySH.CustomUserNameValidator, RESTfulSecuritySH\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Any suggestion?</p>\n"},{"tags":["wcf","silverlight","visual-studio-2012","ria"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13266508,"title":"Silverlight with RIA WCF project can't add regular WCF service reference","body":"<p>I don't know if this is a bug/feature but I need to find a way to make it work.</p>\n\n<p>To recreate, use VS2012, open a new SL5 project with RIA services enabled. Create another project, add a simple WCF service (or a SL enabled WCF) and add a method that accepts or returns a simple object (I have an object with one string property in it). Try and add this as a service reference to your SL project. You'll receive this error, among others, in the warnings: </p>\n\n<blockquote>\n  <p>Custom tool warning: \n  No endpoints compatible with Silverlight 5 were found. The generated client class will not be usable unless endpoint information is provided via the constructor.</p>\n</blockquote>\n\n<p>and no generated code is actually generated.</p>\n\n<p>I found that if I remove the object from the service method and use a simple string/int/bool instead, the reference is added just fine. Also, if I add the same service to a regular SL app without RIA, everything works like you would expect it to. Once I enable RIA on this app where the service is working, and update the service reference, the generated code is gone again.</p>\n\n<p>I remember this used to work because I had projects that used both RIA and external WCF services. Is this a new VS2012 thing? Is there a way to solve this issue?</p>\n\n<p>Thanks,</p>\n\n<p>Eyal</p>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":420,"score":2,"question_id":11043909,"title":"how to detect WCF service shutdown or disconnect from client?","body":"<p>I'm building a WCF service,after a client connects to this service,when the service disconnect, the client doesn't notice that, and it doesn't fire any action, i would like to close client form whenever the connection lost,so how would i detect WCF service disconnect or shutdown from client side.</p>\n"},{"tags":[".net","wcf","iis","configuration","self-hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13265432,"title":"Max amount of sessions on my WCF service?","body":"<p>I have a WCF service running InstanceContextMode = PerCall, ConcurrencyMode = Multiple, TCP and is hosted in Selfhost(Windows Service) and IIS7/IIS8.</p>\n\n<p>The throttling is set to this : </p>\n\n<pre><code>&lt;serviceThrottling maxConcurrentCalls=\"2000\" maxConcurrentSessions=\"2147483647\" maxConcurrentInstances=\"2000\"/&gt;\n</code></pre>\n\n<p>And the binding looks like this : </p>\n\n<pre><code>&lt;binding name=\"netTcpRegular\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"infinite\" sendTimeout=\"01:00:00\" transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\" hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"1000\" maxBufferPoolSize=\"2147483647\" maxBufferSize=\"2147483647\" maxConnections=\"200\" maxReceivedMessageSize=\"2147483647\"&gt;\n          &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\"/&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"infinite\" enabled=\"false\"/&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n</code></pre>\n\n<p>We are keeping state at the serivce so every user will have there own objects that is fetched on every call.</p>\n\n<p><strong>The question is how many concurrent users (sessions) can we have with these settings and what settings is affecting this?</strong></p>\n"},{"tags":["asp.net-mvc-3","wcf","ninject"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13232024,"title":"consume wcf services in mvc3 project using ninject","body":"<p>I have a project that has WCF running. Now I have added that WCF as a Web Service in another MVC3 project.</p>\n\n<p>Now I want to use ninject so that I can use all the services available by using only reference  ,something like </p>\n\n<pre><code>using ninject.wcf\n</code></pre>\n\n<p>but not creating the instance of the wcf time and again for each controller.</p>\n\n<p>any help about how should I begin. Any step by step example would be much helpful. Because i am am completely new in wcf and mvc3 and never used ninject before.</p>\n\n<p>I have few controllers and each of them will diffrent services from the client i created in my new mvc project. But i dont want to initialize the client for each controller by e.g wcf client = new wcf(); rather i want to inject it so that the client is created once and i can use it for all the controller.</p>\n\n<p>more clearly, i have all the user related information stored in the DB. My wcf is dealing with that in one project on the server. Now in my mvc project I am calling that wcf by the name wcfclient. So, when i try to use a service lets say get userId and Password, i dont have to connect to the DB. I am trying to implement a custom login screen. But cant figure out where to begin.</p>\n"},{"tags":["c#","wcf","authorization","role"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13206862,"title":"WCF service Role-based authorization. Retrieving roles from database","body":"<p>I have Wcf service (Instanscontext mode - PerCall, concurrency - Multiple) and I want to use this thing:</p>\n\n<pre><code>    [PrincipalPermission(SecurityAction.Demand, Role = \"customrole\")]\n    public string AnyMethod()\n    {\n        //any implementation\n    }\n</code></pre>\n\n<p>According this <a href=\"http://msdn.microsoft.com/en-us/magazine/cc948343.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/magazine/cc948343.aspx</a>\nGetRolesForUser looks like this:</p>\n\n<pre><code>    class CustomRoleProvider : RoleProvider\n    {\n         public override string[] GetRolesForUser(string username)\n         {\n              //?? n Hibernate initialization\n\n              //implementation role retrieving from database\n         }\n\n         public override bool IsUserInRole(string username, string roleName)\n         {\n              return GetRolesForUser(username).Contains(roleName);\n         }\n    }\n</code></pre>\n\n<p>I need to retrieve roles from database and I don't want to initialize n Hibernate inside GetRolesForUser. What should i do to avoid initialize n Hibernate in GetRolesForUser ?\nIs there a good approach initialize ORM from service class constructor?</p>\n"},{"tags":["multithreading","wcf","postgresql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13263546,"title":"Multi-threaded WCF with PosgreSQL","body":"<p>I'm pretty new in WCF. My WCF-service should work as a wrapper between clients and database, and also I wanted my WCF-service to handle over 100 connetions simultaneously.\nFor that I use PerSession InstanceContextMode and Multiple ConcurrencyMode:</p>\n\n<pre><code>[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Multiple)]\n    public class Service:IService\n    {\n\n       public MyType_1 GetData(MyType_2  value)\n       {\n           ... query to database ....\n           return new MyType_1 { result }\n       }\n    }\n</code></pre>\n\n<p>Service works fine and handles more than 100 connections, shows reasonable results when transfer more than 5mb of data simultaneously.</p>\n\n<p>The problem is that I have to use PostgreSQL on Windows, and I'm not allowed to make more than 30 connections (in other words I'm not allowed to make more than 30 client sessions). I think it's some kind of an operations system limitation, beacause PostgreSQL on Windows creates a new process on each client conneciton, so more than 30 processes created be one - it's not what I'm looking for.</p>\n\n<p>It's seems to me that there is only one reasonable way to solve the problem - add ability for my wcf-service to handle only one connection to database in the background, but how can I do that? And how can other session threads safety work with that?</p>\n\n<p>Any ideas will be appreciated! :)</p>\n"},{"tags":["c#","php","wcf","flash","real-time"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13262992,"title":"real-time web update using WCF","body":"<p>I have been reading a lot of forums regarding the use of WCF in web, most specifically, this topic: <a href=\"http://stackoverflow.com/questions/3306744/wcf-with-flash-tutorial\">WCF with Flash tutorial</a>, but I am really confused. </p>\n\n<p>I have an existing feed server that is using WCF service. It is, with no problems, supplying real-time information to its windows applications clients. What i would like to do is to have a web application to subscribe to the feeds that i am supplying to the windows application clients. With the forum that i have read (the one i have indicated), it seems like it will be a request reply method. And i think, using that, i wouldn't be able to achieve the real-time transfer of feeds for it. </p>\n\n<p>I would like to know if there is an equivalent for the callback function in web development.</p>\n"},{"tags":[".net","json","wcf","frameworks","aspnet-regiis.exe"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":36,"score":4,"question_id":13261887,"title":"Invalid JSON being randomly returned by WCF","body":"<p>I am running an ASP.Net app on Windows Server 2008 R2. I have up to .NET Framework 4.5 installed. Upon migrating from .NET Framework v2.0 to v4.0 I began to experience random behavior from WCF. </p>\n\n<p>My web service returns JSON. Upon restarting IIS the service will return perfectly valid JSON about 3 to 5 times. After that, the JSON becomes invalid. I have inspected what is coming across the wire via Fiddler and also my own logs on both client app (an Adobe AIR app that calls the service) and on the server itself. </p>\n\n<p>Fiddler shows that the raw response does in fact contain invalid JSON. It appears very much that a some random point in the JSON the response JSON begins to get written out again!, overwriting what should be there and producing mangled JSON in the process. </p>\n\n<p>See this concatenated example:</p>\n\n<pre><code>{\"responseCode\":0,\"actionCode\":\"OK\",\"cdn{\"responseCode\":0, \"actionCode\".....\n</code></pre>\n\n<p>Note how \"responseCode\" (which should only appear at the beginning of the JSON response) suddenly appears again in the JSON further on. <code>\"cdn{\"responseCode\":0</code> is of course invalid JSON.</p>\n\n<p>I have tried numerous patches. I've tried running <em><code>ServiceModelReg.exe</code></em> and <em><code>aspnet_regiis.exe</code></em> from under different frameworks and in different combinations. Same behavior. If I revert to previous code under v2.0 and switch the App Pool back to v2.0 then everything works fine.  </p>\n\n<p>I believe this to be a bug deep in WCF. Any ideas? </p>\n\n<p>The only recourse I have at this point is to rip out WCF and switch to something like ServiceStack where I can debug into all the code if necessary.   </p>\n"},{"tags":["asp.net","wcf","rest","azure","servicebus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12847005,"title":"Hosting a WCF REST service on IIS 6 that also exposes a webHttpRelayBinding to service bus","body":"<p>I have a WCF REST service that is exposed both \"locally\" and in the cloud via the webHttpRelayBinding and the Azure Service Bus.</p>\n\n<p>This works great on my IIS 7.5 Express instance, but when I deploy it to an Windows Server 2003 / IIS 6 environment, I start getting the following error:</p>\n\n<blockquote>\n  <p>The service cannot be activated because it does not support ASP.NET compatibility. ASP.NET compatibility is enabled for this application. Turn off ASP.NET compatibility mode in the web.config or add the AspNetCompatibilityRequirements attribute to the service type with RequirementsMode setting as 'Allowed' or 'Required'. </p>\n</blockquote>\n\n<p>I've read that I need to completely remove any dependencies to ASP.NET to resolve this problem (see <a href=\"http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/17/wcf-rest-http-application-connecting-azure-service-bus-using-webhttprelaybinding-causes-aspnetcompatibilityenabled-error.aspx\" rel=\"nofollow\">here</a>). I've refactored my code so that the assembly that contains the service definition doesn't have any reference to System.Web, but I still get the error.</p>\n\n<p>So I assume what this means is that I can't host the service in IIS at all. If that's the case, is my only option have a Windows Service do the hosting? WAS isn't available on Win2k3.</p>\n"},{"tags":["asp.net","wcf","endpoint"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":294,"score":1,"question_id":10187052,"title":"Changing the Endpoint.Binding of a WCF System.ServiceModel.ClientBase doesn't work","body":"<p>I'm working with a programmatically configurated WCF Client (System.ServiceModel.ClientBase). This WCF Client is configured using a CustomBinding, which has a TextMessageEncodingBindingElement by default.</p>\n\n<p>Now when I try to switch to Mtom encoding, I change the Client's Endpoint.Binding property, which works fine. The Endpoint.Binding property show's it has changed.</p>\n\n<p>Unfortunately when I execute one of the methods the WCF service exposes, it still uses TextMessageEncoding and I can't figure out why.</p>\n\n<p>I've got it working though, by constructing a new ClientBase and passing the new EndPointBinding in the constructor:</p>\n\n<pre><code>socialProxy = new SocialProxyClient(SocialProxyClientSettings.SocialProxyMTomEndPointBinding, new EndpointAddress(SocialProxyClientSettings.SocialProxyEndPointAddress));\n</code></pre>\n\n<p>But when I try this it doesn't work:</p>\n\n<pre><code>socialProxy.Endpoint.Binding = SocialProxyClientSettings.SocialProxyMTomEndPointBinding;\n</code></pre>\n\n<p>These are my definitions for the EndPointBindings:</p>\n\n<pre><code>public static TextMessageEncodingBindingElement TextMessageEncodingBindingElement\n{\n    get\n    {\n        if (_textMessageEncodingBindingElement == null)\n        {\n            _textMessageEncodingBindingElement = new TextMessageEncodingBindingElement() { MessageVersion = MessageVersion.Soap11 };\n            _textMessageEncodingBindingElement.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas()\n            {\n                MaxDepth = 32,\n                MaxStringContentLength = 5242880,\n                MaxArrayLength = 204800000,\n                MaxBytesPerRead = 5242880,\n                MaxNameTableCharCount = 5242880\n            };\n        }\n        return _textMessageEncodingBindingElement;\n    }\n}\n\npublic static MtomMessageEncodingBindingElement MtomMessageEncodingBindingElement\n{\n    get\n    {\n        if (_mtomMessageEncodingBindingElement == null)\n        {\n            _mtomMessageEncodingBindingElement = new MtomMessageEncodingBindingElement();\n            _mtomMessageEncodingBindingElement.MaxReadPoolSize = TextMessageEncodingBindingElement.MaxReadPoolSize;\n            _mtomMessageEncodingBindingElement.MaxWritePoolSize = TextMessageEncodingBindingElement.MaxWritePoolSize;\n            _mtomMessageEncodingBindingElement.MessageVersion = TextMessageEncodingBindingElement.MessageVersion;\n            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxDepth = TextMessageEncodingBindingElement.ReaderQuotas.MaxDepth;\n            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxStringContentLength = TextMessageEncodingBindingElement.ReaderQuotas.MaxStringContentLength;\n            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxArrayLength = TextMessageEncodingBindingElement.ReaderQuotas.MaxArrayLength;\n            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxBytesPerRead = TextMessageEncodingBindingElement.ReaderQuotas.MaxBytesPerRead;\n            _mtomMessageEncodingBindingElement.ReaderQuotas.MaxNameTableCharCount = TextMessageEncodingBindingElement.ReaderQuotas.MaxNameTableCharCount;\n        }\n        return _mtomMessageEncodingBindingElement;\n    }\n}\n</code></pre>\n\n<p>Can someone explain why changing the Endpoint.Binding programmatically doesn't work?</p>\n"},{"tags":["wcf","web-services","amazon-ec2","asp.net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13243451,"title":"How to fix 'Access Denied' error with a .Net WCF service running on Amazon EC2?","body":"<p>I am new to the AWC/EC2 environment and created a .Net WCF service on my EC2 instance of Windows Server and IIS.  </p>\n\n<p>Navigating to <a href=\"http://www.websiteservice.com/MyWebsiteFeederService.svc?wsdl\" rel=\"nofollow\">http://www.websiteservice.com/MyWebsiteFeederService.svc?wsdl</a> brings up the WSDL.</p>\n\n<p>Now, in www.mywebsite.com, that is also sitting on the same machine, I have consumed the web service.  Unfortunately whenever I try to access the service through the site, I continue to receive the \"Access is Denied\" error message:</p>\n\n<blockquote>\n  <p>Exception Details:\n  System.ServiceModel.Security.SecurityAccessDeniedException: Access is\n  denied.</p>\n</blockquote>\n\n<p>I don't believe this is related to the <a href=\"http://stackoverflow.com/questions/4322187/amazon-aws-s3-access-denied-error\">AWS-S3 error - Access is Denied</a> error, as I am not using buckets.</p>\n\n<p>In the site's Web.config, I turned on the trace listener and took a look at the Service Trace Viewer.</p>\n\n<p>The information doesn't seem to be useful, as this is what I get:</p>\n\n<blockquote>\n  <p>[TraceRecord] Severity    Warning\n  TraceIdentifier   <a href=\"http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</a>\n  Description   Throwing an exception.\n  AppDomain /LM/W3SVC/4/ROOT-2-129966419874659765</p>\n</blockquote>\n\n<p>Here is the full XML of Warning level:</p>\n\n<pre><code>&lt;E2ETraceEvent xmlns=\"http://schemas.microsoft.com/2004/06/E2ETraceEvent\"&gt;\n&lt;System xmlns=\"http://schemas.microsoft.com/2004/06/windows/eventlog/system\"&gt;\n&lt;EventID&gt;131075&lt;/EventID&gt;\n&lt;Type&gt;3&lt;/Type&gt;\n&lt;SubType Name=\"Warning\"&gt;0&lt;/SubType&gt;\n&lt;Level&gt;4&lt;/Level&gt;\n&lt;TimeCreated SystemTime=\"2012-11-06T02:19:47.8029428Z\" /&gt;\n&lt;Source Name=\"System.ServiceModel\" /&gt;\n&lt;Correlation ActivityID=\"{b6efab70-63ad-4bdd-85c6-5c49a907c210}\" /&gt;\n&lt;Execution ProcessName=\"w3wp\" ProcessID=\"3472\" ThreadID=\"1\" /&gt;\n&lt;Channel /&gt;\n&lt;Computer&gt;AMAZONA-0O29FFR&lt;/Computer&gt;\n&lt;/System&gt;\n&lt;ApplicationData&gt;\n&lt;TraceData&gt;\n&lt;DataItem&gt;\n&lt;TraceRecord xmlns=\"http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord\" Severity=\"Warning\"&gt;\n&lt;TraceIdentifier&gt;http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx&lt;/TraceIdentifier&gt;\n&lt;Description&gt;Throwing an exception.&lt;/Description&gt;\n&lt;AppDomain&gt;/LM/W3SVC/4/ROOT-2-129966419874659765&lt;/AppDomain&gt;\n&lt;Exception&gt;\n&lt;ExceptionType&gt;System.ServiceModel.Security.SecurityAccessDeniedException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/ExceptionType&gt;\n&lt;Message&gt;Access is denied.&lt;/Message&gt;\n&lt;StackTrace&gt;\nat System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)\nat System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp;amp; rpc)\nat System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\nat System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\nat System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\nat System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;amp; msgData, Int32 type)\nat MyWebsiteFeederService.IFeederService.GetWebsiteConfiguration(String websiteGuid, String websitePW)\nat MyWebsiteFeederService.FeederServiceClient.GetWebsiteConfiguration(String websiteGuid, String websitePW)\nat Inquiro.Models4.ModelsBaseClass.GetWebsiteConfiguration(String websiteGuid, String websitePW)\nat Inquiro.Websites.MvcApplication.LoadWebsiteConfiguration()\nat Inquiro.Websites.MvcApplication.Application_Start()\nat System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp;amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner)\nat System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)\nat System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)\nat System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\nat System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)\nat System.Web.HttpApplication.InvokeMethodWithAssert(MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs)\nat System.Web.HttpApplication.ProcessSpecialRequest(HttpContext context, MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs, HttpSessionState session)\nat System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app)\nat System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers)\nat System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context)\nat System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context)\nat System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext)\n&lt;/StackTrace&gt;\n&lt;ExceptionString&gt;System.ServiceModel.Security.SecurityAccessDeniedException: Access is denied.&lt;/ExceptionString&gt;\n&lt;/Exception&gt;\n&lt;/TraceRecord&gt;\n&lt;/DataItem&gt;\n&lt;/TraceData&gt;\n&lt;/ApplicationData&gt;\n&lt;/E2ETraceEvent&gt;\n</code></pre>\n\n<p>I have the exact same service running on another, non-Amazon server and it is working fine.  I don't recall setting up any special permissions, or \"run as [user]\" - have no additional users setup in IIS Manager Permissions.</p>\n\n<p>I have also confirmed from the command prompt on that server, using sqlcmd, that I can connect to the RDS database server.</p>\n\n<p>I'm basically going in circles at this point and would appreciate some assistance.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","wcf","x509certificate","ws-security"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":318,"score":6,"question_id":12832213,"title":"How to make WCF Client conform to specific WS-Security - sign UsernameToken and SecurityTokenReference","body":"<p>I need to create a wcf client to call a service that I have no control over. </p>\n\n<p>I have been given a wsdl and a working soapui project.</p>\n\n<p>The service uses both a username/password and a x509 certificate.</p>\n\n<hr>\n\n<p>UPDATE</p>\n\n<p>I now understand what the problem is, but am still unsure what steps I need to take to be able to create the required message, so any help would be much appreciated.</p>\n\n<p>I need to sign both the UsernameToken and the SecurityTokenReference.</p>\n\n<p>The code I had to create the custom binding has been removed from this post as its no longer used. I no longer add a SecurityBindingElement to the binding, instead I add a new behaviour that writes the security element into the header.</p>\n\n<p>So the security node is created from scratch by subclassing the SignedXml class, adding signing references and then calling ComputeSignature to create the Signature node within the Security header.</p>\n\n<p>You need to pass the xml to sign into the SignedXml constructor for this to work. It is no problem passing in the UsernameToken and this appears to be signed correctly.</p>\n\n<p>The problem is that the SecurityTokenReference is only created when ComputeSignature() is called, so I'm not able to add a signing Reference to this element, as it does not exist at the time it is required (within the overridden GetIdElement method of SignedXml which is called prior to ComputeSignature())</p>\n\n<hr>\n\n<p>The code I'm using to create the signature block to insert into the Security header is as follows</p>\n\n<pre><code>   string certificatePath = System.Windows.Forms.Application.StartupPath + \"\\\\\" + \"Certs\\\\sign-and-    enc.p12\";\n\n    XmlDocument xd = new XmlDocument();\n    xd.LoadXml(xml);\n\n    // Set Certificate \n    System.Security.Cryptography.X509Certificates.X509Certificate2 cert = new X509Certificate2(certificatePath, \"password\");\n    MySignedXml signedXml = new MySignedXml(xd);\n    signedXml.SigningKey = cert.PrivateKey;\n\n    // Create a new KeyInfo object. \n    KeyInfo keyInfo = new KeyInfo();\n    keyInfo.Id = \"\";\n\n    MemoryStream keyInfoStream = new MemoryStream();\n    XmlWriter keyInfoWriter = XmlWriter.Create(keyInfoStream);\n\n    WSSecurityTokenSerializer.DefaultInstance.WriteKeyIdentifierClause(keyInfoWriter, new LocalIdKeyIdentifierClause(\"token_reference\", typeof(X509SecurityToken)));   \n\n    keyInfoWriter.Flush();\n    keyInfoStream.Position = 0;\n    XmlDocument keyInfoDocument = new XmlDocument();\n    keyInfoDocument.Load(keyInfoStream);\n\n    XmlAttribute attrib = keyInfoDocument.CreateAttribute(\"ValueType\");\n    attrib.InnerText = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\";\n    keyInfoDocument.ChildNodes[1].ChildNodes[0].Attributes.Append(attrib);\n\n    KeyInfoNode keyInfoNode = new KeyInfoNode();\n    keyInfoNode.LoadXml(keyInfoDocument.DocumentElement);\n    keyInfo.AddClause(keyInfoNode);\n\n    // Add the KeyInfo object to the SignedXml object. \n    signedXml.KeyInfo = keyInfo;\n\n    // Need to use External Canonicalization method. \n    signedXml.SignedInfo.CanonicalizationMethod = \"http://www.w3.org/2001/10/xml-exc-c14n#\";\n\n    // Create a reference to be signed. \n    Reference reference = new Reference();\n    reference.Uri = \"#UsernameToken-1\";\n\n    XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform();\n    env.Algorithm = \"http://www.w3.org/2001/10/xml-exc-c14n#\";\n    reference.AddTransform(env);\n    reference.DigestMethod = \"http://www.w3.org/2000/09/xmldsig#sha1\";\n    signedXml.AddReference(reference);\n\n\n    Reference reference2 = new Reference();\n    reference2.Uri = \"#token_reference\";\n    XmlDsigEnvelopedSignatureTransform env2 = new XmlDsigEnvelopedSignatureTransform();\n    env2.Algorithm = \"http://www.w3.org/2001/10/xml-exc-c14n#\";\n    reference2.AddTransform(env2);\n    reference2.DigestMethod = \"http://www.w3.org/2000/09/xmldsig#sha1\";\n    signedXml.AddReference(reference2);\n\n    // Add the Signature Id \n    signedXml.Signature.Id = \"MYSIG_ID\";\n\n    // Compute the signature. \n    signedXml.ComputeSignature();\n\n    XmlElement xmlDigitalSignature = signedXml.GetXml();\n</code></pre>\n\n<p>where the xml variable is the the UsernameToken xml string, and the MySignedXml class is a subclassed SignedXml with the GetIdElement method overridden (to try to find and correctly refreence the non-existant SecurityTokenReference)</p>\n\n<p>I've spend days researching and testing this now, and unfortunately the company supplying the service isn't any help - but I need to use their service.</p>\n\n<p><strong>Full working soap message (soapUI project)</strong></p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:urn=\"urn:XXXXX\"&gt;\n   &lt;soapenv:Header xmlns:ebxml=\"http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/\"&gt;\n   &lt;wsse:Security soapenv:mustUnderstand=\"1\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n    &lt;wsse:BinarySecurityToken EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\" ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\" wsu:Id=\"CertId-D05E596B5ABC341FEB13505090224061\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;MIIEnDCCBAWgAwIBAgIBAjANBgkqhkiG9w0BAQUFADCBxDELMAkGA1UEBhMCTloxDTALBgNVBAgTBFdHVE4xEzARBgNVBAcTCldlbGxpbmd0b24xGDAWBgNVBAoTD0lSRFN0dWR5bGlua0IyQjEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxHjAcBgNVBAMTFWRldmNhLmIyYi5pcmQuZ292dC5uejEXMBUGA1UEKRMORGV2ZWxvcG1lbnQgQ0ExKDAmBgkqhkiG9w0BCQEWGWNocmlzLnNjaHVsdHpAaXJkLmdvdnQubnowHhcNMTEwOTE1MDIwNjIwWhcNMjEwOTEyMDIwNjIwWjCByTELMAkGA1UEBhMCTloxDTALBgNVBAgTBFdHVE4xEzARBgNVBAcTCldlbGxpbmd0b24xGDAWBgNVBAoTD0lSRFN0dWR5bGlua0IyQjEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxJTAjBgNVBAMTHHNpZ24tYW5kLWVuYy5kZXYuaXJkLmdvdnQubnoxFTATBgNVBCkTDHNpZ24tYW5kLWVuYzEoMCYGCSqGSIb3DQEJARYZY2hyaXMuc2NodWx0ekBpcmQuZ292dC5uejCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAykyZHVnXjsG220zB3kNOsGBeGP2rdNbLlIqW1D8yZO1fcj3/RhRiqsopbUrb8AU1ClpfhbH2K68kg7V91VAY0qrwNxP+pPPo1vYKMU6pT38qJGQzffr+iV2BCJshZvSk9E7QSWO5mFNstdg19xc+5ST1Lgb3fefuRG2KZVxPx0sCAwEAAaOCAZUwggGRMAkGA1UdEwQCMAAwEQYJYIZIAYb4QgEBBAQDAgZAMDQGCWCGSAGG+EIBDQQnFiVFYXN5LVJTQSBHZW5lcmF0ZWQgU2VydmVyIENlcnRpZmljYXRlMB0GA1UdDgQWBBSczRKXKPe3Sin7eFrVXfI7MXckzzCB+QYDVR0jBIHxMIHugBSLWxPSZd9otEj16vhLyovMCI9OMaGByqSBxzCBxDELMAkGA1UEBhMCTloxDTALBgNVBAgTBFdHVE4xEzARBgNVBAcTCldlbGxpbmd0b24xGDAWBgNVBAoTD0lSRFN0dWR5bGlua0IyQjEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxHjAcBgNVBAMTFWRldmNhLmIyYi5pcmQuZ292dC5uejEXMBUGA1UEKRMORGV2ZWxvcG1lbnQgQ0ExKDAmBgkqhkiG9w0BCQEWGWNocmlzLnNjaHVsdHpAaXJkLmdvdnQubnqCCQDL/qDdlx2j6DATBgNVHSUEDDAKBggrBgEFBQcDATALBgNVHQ8EBAMCBaAwDQYJKoZIhvcNAQEFBQADgYEAS4ZPIVVpgTOGN4XcIC3SiYlxF8wYg7qnUhH5wJsAD3VCKfj68j9FSJtdBWLlWvvRxEoDP2lZ0IbFl6Rjnl+2ibzFnyac2G1AVm5mwPrNKHBQJ9J5eDJi0iUVY7Wphz86tKnqj34GvlHPNXmrF7oGEcDhPwK0T8zRdE/pvKIUiJc=&lt;/wsse:BinarySecurityToken&gt;\n    &lt;ds:Signature Id=\"Signature-2\" xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n        &lt;ds:SignedInfo&gt;\n            &lt;ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n            &lt;ds:SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/&gt;\n            &lt;ds:Reference URI=\"#CertId-D05E596B5ABC341FEB13505090224061\"&gt;\n                &lt;ds:Transforms&gt;\n                    &lt;ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n                &lt;/ds:Transforms&gt;\n                &lt;ds:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/&gt;\n                &lt;ds:DigestValue&gt;3iVAUEAt8vAb7Ku+jf2gwSkSm0Q=&lt;/ds:DigestValue&gt;\n            &lt;/ds:Reference&gt;\n            &lt;ds:Reference URI=\"#UsernameToken-1\"&gt;\n                &lt;ds:Transforms&gt;\n                    &lt;ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n                &lt;/ds:Transforms&gt;\n                &lt;ds:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/&gt;\n                &lt;ds:DigestValue&gt;r4HLEAWJldJwmEmcAqV6Y8rnTPE=&lt;/ds:DigestValue&gt;\n            &lt;/ds:Reference&gt;\n        &lt;/ds:SignedInfo&gt;\n        &lt;ds:SignatureValue&gt;\n        YGh2I3VcukqjT0O7hKItiykWN5tlID18ZXRCwQjXriHmnVsO4wGcHjWfmhuNDecq+xRN+SjG8E7M\n        2Rx/5/BbFKbVlNOkQOSbSxIs1YT9GaThK16pMrX5KRkkJme1W3R0pGIIQh6gGRSUf79RZUIYxyVl\n        LqdIe561TXXDdtbt/6Q=\n        &lt;/ds:SignatureValue&gt;\n        &lt;ds:KeyInfo Id=\"KeyId-D05E596B5ABC341FEB13505090224372\"&gt;\n            &lt;wsse:SecurityTokenReference wsu:Id=\"STRId-D05E596B5ABC341FEB13505090224373\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n                &lt;wsse:Reference URI=\"#CertId-D05E596B5ABC341FEB13505090224061\" ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\"/&gt;&lt;/wsse:SecurityTokenReference&gt;\n        &lt;/ds:KeyInfo&gt;\n    &lt;/ds:Signature&gt;\n    &lt;wsse:UsernameToken wsu:Id=\"UsernameToken-1\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n        &lt;wsse:Username&gt;XXXXXX&lt;/wsse:Username&gt;\n        &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;XXXXXXX&lt;/wsse:Password&gt;\n        &lt;/wsse:UsernameToken&gt;\n    &lt;/wsse:Security&gt;\n  &lt;ebxml:Messaging xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n     &lt;ebxml:UserMessage&gt;\n        &lt;ebxml:MessageInfo&gt;\n           &lt;ebxml:Timestamp&gt;2002-02-02T14:18:02.0Z&lt;/ebxml:Timestamp&gt;\n           &lt;ebxml:MessageId&gt;bf9433d9-c6e9-4c12-9c98-724008a09c21&lt;/ebxml:MessageId&gt;\n        &lt;/ebxml:MessageInfo&gt;\n        &lt;ebxml:PartyInfo&gt;\n           &lt;ebxml:From&gt;\n              &lt;ebxml:PartyId type=\"identifier\"&gt;Trading Partner X&lt;/ebxml:PartyId&gt;\n              &lt;ebxml:Role&gt;Provider&lt;/ebxml:Role&gt;\n           &lt;/ebxml:From&gt;\n           &lt;ebxml:To&gt;\n              &lt;ebxml:PartyId type=\"identifier\"&gt;XXXXXXX&lt;/ebxml:PartyId&gt;\n              &lt;ebxml:Role&gt;Requestor&lt;/ebxml:Role&gt;\n           &lt;/ebxml:To&gt;\n        &lt;/ebxml:PartyInfo&gt;\n        &lt;ebxml:CollaborationInfo&gt;\n           &lt;ebxml:AgreementRef&gt;urn:XXXXXXXXX&lt;/ebxml:AgreementRef&gt;\n           &lt;ebxml:Service type=\"Web Service\"&gt;urn:XXXXXXXX&lt;/ebxml:Service&gt;\n           &lt;ebxml:Action&gt;customerInformation&lt;/ebxml:Action&gt;\n           &lt;ebxml:ConversationId&gt;e302426a-b2d9-4ff1-a14b-fbbc2f40a017&lt;/ebxml:ConversationId&gt;\n        &lt;/ebxml:CollaborationInfo&gt;\n     &lt;/ebxml:UserMessage&gt;\n  &lt;/ebxml:Messaging&gt;\n   &lt;/soapenv:Header&gt;\n   &lt;soapenv:Body&gt;\n  &lt;urn:ConnectionTest&gt;\n     &lt;Message&gt;Bonjour&lt;/Message&gt;\n  &lt;/urn:ConnectionTest&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>We were supplied with some documentation. The security section is copied below</p>\n\n<p>The following security must be applied to each request in the following order:\nA wsse:UsernameToken must be included and contain:</p>\n\n<ol>\n<li>The Agents Portal Username for the value of the wsse:Username element</li>\n<li><p>The Agents Portal Password for the value of the wsse:PasswordText (clear text) in the Password element\nA Signature block:\nDigital Signatures are created using x509 certificates. Each software provider is required to hold and protect a valid certificate and private key issued by [To Be Determined]. With each service request the software must:</p></li>\n<li><p>Include the Certificate that matches the private key used for signing as a wsse:BinarySecurityToken and use it as the wsse:SecurityTokenReference for the Signature</p></li>\n<li>Sign the wsse:BinarySecurityToken</li>\n<li>Sign the wsse:UsernameToken</li>\n<li>Use Canonicalization Method Algorithm: <a href=\"http://www.w3.org/2001/10/xml-exc-c14n#\" rel=\"nofollow\">http://www.w3.org/2001/10/xml-exc-c14n#</a></li>\n<li>Use Signature Method Algorithm: <a href=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" rel=\"nofollow\">http://www.w3.org/2000/09/xmldsig#rsa-sha1</a></li>\n<li>Use Digest Method Algorithm: <a href=\"http://www.w3.org/2000/09/xmldsig#sha1\" rel=\"nofollow\">http://www.w3.org/2000/09/xmldsig#sha1</a></li>\n</ol>\n"},{"tags":["c#","asp.net",".net","wcf","iis7"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13261184,"title":"How to open service port?","body":"<p>I'm getting an error code 10061 when calling a WCF service.  The error is </p>\n\n<blockquote>\n  <p>Could not connect to <code>&lt;service uri</code>>.  The connection attempt lasted for a time span of   xxxx.  TCP error code 10061.  No connection could be made because the target machine actively refused it.</p>\n</blockquote>\n\n<p>When I do a </p>\n\n<pre><code>netstat -a\n</code></pre>\n\n<p>I don't see that the port this net.tcp service address should be on is listening.  In IIS, the website this service is under has started.  Any ideas why the port isn't listed in TCP as listening or how I can get it to listen?</p>\n"},{"tags":["c#","wcf","azure","servicebus","azureservicebus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12896570,"title":"Microsoft ServiceBus - The argument entityName is null or empty","body":"<p>I am using Servicebus as a link between a web-application and BizTalk.\nIn the web-application i earlier had the whole endpoint defined in the web.config but the endpoints has to be dynamic so i tried to set the endpoint by code.</p>\n\n<p>After the change i only get an exception when i try to send a message to the queue. (ArgumentException - The argument entityName is null or empty)</p>\n\n<p>Here is the code sending the message to the queue:</p>\n\n<pre><code>string queuename = Company.GetQueueName(O.companyId);\nvar factory = new ChannelFactory&lt;IOrder&gt;(\"requestQueueClientEndpoint\", new EndpointAddress(ServiceBusEnvironment.CreateServiceUri(\"sb\", queuename, string.Empty)));\nvar OrdRspChannel = factory.CreateChannel();\n\nOrdRspChannel.Order(O);\n</code></pre>\n\n<p>And here is the configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n&lt;behaviors&gt;\n  &lt;endpointBehaviors&gt;\n    &lt;behavior name=\"securityBehavior\"&gt;\n      &lt;TransportClientEndpointBehavior&gt;\n        &lt;tokenProvider&gt;\n          &lt;sharedSecret issuerName=\"owner\" issuerSecret=\"SECRET REMOVED\" /&gt;\n          &lt;serviceCertificate&gt;\n            &lt;authentication revocationMode=\"NoCheck\"/&gt;\n          &lt;/serviceCertificate&gt;\n        &lt;/tokenProvider&gt;\n      &lt;/TransportClientEndpointBehavior&gt;\n    &lt;/behavior&gt;\n  &lt;/endpointBehaviors&gt;\n&lt;/behaviors&gt;\n\n&lt;bindings&gt;\n  &lt;netMessagingBinding&gt;\n    &lt;binding name=\"netMessagingBinding\" sendTimeout=\"00:10:00\" receiveTimeout=\"00:10:00\" openTimeout=\"00:10:00\" closeTimeout=\"00:10:00\" sessionIdleTimeout=\"00:10:00\" prefetchCount=\"-1\"&gt;\n      &lt;transportSettings batchFlushInterval=\"00:00:01\" /&gt;\n    &lt;/binding&gt;\n  &lt;/netMessagingBinding&gt;\n&lt;/bindings&gt;\n\n&lt;client&gt;\n  &lt;!-- Invoke BizTalk via Service Bus Queue --&gt;\n  &lt;endpoint address=\"ADDRESS REMOVED\" behaviorConfiguration=\"securityBehavior\" binding=\"netMessagingBinding\" bindingConfiguration=\"netMessagingBinding\" contract=\"Procurement_MVC3.IOrder\" name=\"requestQueueClientEndpoint\" /&gt;\n&lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Here is the StackTrace:</p>\n\n<pre><code>{System.ArgumentException: The argument entityName is null or empty.\nParameter name: entityName\n\nServer stack trace: \n   at Microsoft.ServiceBus.Messaging.MessagingFactory.CheckValidEntityName(String entityName, Int32 maxEntityNameLength, Boolean allowSeparator, String paramName)\n   at Microsoft.ServiceBus.Messaging.MessagingFactory.&lt;&gt;c__DisplayClass1d.&lt;BeginCreateMessageSender&gt;b__1b(AsyncCallback c, Object s)\n   at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.BeginOpenCompleted(IAsyncResult result)\n   at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.BeginOpen()\n   at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1..ctor(OpenOnceManager openOnceManager, TimeSpan openTimeout, AsyncCallback callback, Object state, Func`3 beginOperation, EndOperation`1 endOperation)\n   at Microsoft.ServiceBus.Messaging.OpenOnceManager.Begin[T](AsyncCallback callback, Object state, Func`3 beginOperation, Func`2 endOperation)\n   at Microsoft.ServiceBus.Messaging.MessagingFactory.BeginCreateMessageSender(String entityPath, TimeSpan timeout, AsyncCallback callback, Object state)\n   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusOutputChannel.OpenMessagingFactoryAndMessageSenderAsyncResult.CreateFactoryComplete(IAsyncResult result)\n   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusOutputChannel.OpenMessagingFactoryAndMessageSenderAsyncResult..ctor(ServiceBusOutputChannel outputChannel, TimeSpan timeout, AsyncCallback callback, Object state)\n   at Microsoft.ServiceBus.Messaging.Channels.ServiceBusOutputChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)\n   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n\nException rethrown at [0]: \n   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n   at Procurement_MVC3.IOrder.Order(Order Order)\n   at Procurement_MVC3.Controllers.HomeController.ViewOrder(String id, Nullable`1 date, Nullable`1 confirmqty, String orderrowid, String supplierorderId, Boolean confirm) in c:\\Projects2\\trunk\\Procurement_MVC3\\Procurement_MVC3\\Controllers\\HomeController.cs:line 229}\n</code></pre>\n\n<p>I have searched both Google and StackOverflow for similar scenarios but found nothing.\nI also have to update a production-environment with this code and this is the last piece of the puzzle so it's starting to drag on.</p>\n"},{"tags":["wcf","interop","ws-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12925642,"title":"Signature Reference URI incorrect mapping to SecurityTokenReference","body":"<p>I have a wcf client where I am required to use both certificate and username security.</p>\n\n<p>Within the header signature that I output, two reference elements exist. One maps (via URI) to the UsernameToken and my understanding is that the other reference element should map to the SecurityTokenReference, but it isn't.</p>\n\n<p>The security section of my outgoing soap header is as follows</p>\n\n<pre><code>&lt;o:UsernameToken u:Id=\"uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-1\"     xmlns:u=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n &lt;o:Username&gt;xxxxxxx&lt;/o:Username&gt;\n &lt;o:Password o:Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-    profile-1.0#PasswordText\"&gt;xxxxxxx&lt;/o:Password&gt;\n&lt;/o:UsernameToken&gt;\n&lt;Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n &lt;SignedInfo&gt;\n  &lt;CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n  &lt;SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/&gt;\n  &lt;Reference URI=\"#_1\"&gt;\n   &lt;Transforms&gt;\n    &lt;Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n   &lt;/Transforms&gt;\n   &lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/&gt;&lt;DigestValue&gt;FNjRLXvhojvaLY/4MhdtsK1cicE=&lt;/DigestValue&gt;\n  &lt;/Reference&gt;\n  &lt;Reference URI=\"#uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-1\"&gt;\n   &lt;Transforms&gt;\n    &lt;Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n   &lt;/Transforms&gt;\n   &lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/&gt;&lt;DigestValue&gt;ZhCGi22F57ASm5YGVjLxe/s5wyY=&lt;/DigestValue&gt;\n  &lt;/Reference&gt;\n &lt;/SignedInfo&gt;\n &lt;SignatureValue&gt;CvxcSSur/epImkRyDh8AywiE3E6GabKzhQhGm/ISpHroWFEryIgpFCStZpGdvt6/QxXskgIiP39eQQILRm1CsTFBZkzP+mb1ktis2OlyiGOFfVNnOXVseOktMGt1WpeNlssFNk0prP9gy5EU3lWwxENvHFy8/IZZWCR8A4Cm+yA=&lt;/SignatureValue&gt;\n &lt;KeyInfo&gt;\n  &lt;o:SecurityTokenReference&gt;\n   &lt;o:Reference ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\" URI=\"#uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-3\"/&gt;\n  &lt;/o:SecurityTokenReference&gt;\n &lt;/KeyInfo&gt;\n&lt;/Signature&gt;\n</code></pre>\n\n<p>You can see that one Reference URI maps to the Id of the UsernameToken, but the other Reference URI is #_1 when I am expecting it to be #uuid-89f26492-f6ad-4e9d-9106-03ae8dfd6774-3 (the URI of the SecurityTokenReference)</p>\n\n<p>My code to create the custom binding is as follows</p>\n\n<pre><code>    private System.ServiceModel.Channels.Binding GetBinding()\n    {\n        System.ServiceModel.Channels.AsymmetricSecurityBindingElement asbe = new AsymmetricSecurityBindingElement();\n        asbe.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;\n        asbe.InitiatorTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters();\n        asbe.RecipientTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters();\n        asbe.MessageProtectionOrder = System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt;\n        asbe.SecurityHeaderLayout = SecurityHeaderLayout.Strict;\n        asbe.IncludeTimestamp = false;\n        asbe.SetKeyDerivation(false);\n        asbe.DefaultAlgorithmSuite = System.ServiceModel.Security.SecurityAlgorithmSuite.Basic128Rsa15;\n\n        asbe.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters());\n\n        CustomBinding myBinding = new CustomBinding();\n        myBinding.Elements.Add(asbe);\n        myBinding.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8));\n\n        HttpsTransportBindingElement httpsBindingElement = new HttpsTransportBindingElement();\n        httpsBindingElement.RequireClientCertificate = true;\n        myBinding.Elements.Add(httpsBindingElement);\n\n        return myBinding;\n    }\n</code></pre>\n\n<p>Does anyone know what config setting(s) I need to change to get the reference sucessfully mapping to the SecurityToken?</p>\n\n<p>Just a note that this question is really a sub question of my main issue which I've detailed at <a href=\"http://stackoverflow.com/questions/12832213/how-to-make-wcf-client-conform-to-specific-ws-security-x509-username-passwor\">How to make WCF Client conform to specific WS-Security - x509 + username/password</a>.  It looks like signing the certificate is not something that can be done via ootb config or property settings, so the answer may lie in writing the signature block manually. This is what I'm looking at next.</p>\n"},{"tags":["wcf","com","components"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":982,"score":6,"question_id":297985,"title":"Is COM dead?","body":"<p>What are profound advantages that one get when using COM for developing components over the WCF ?? Is there anything that can be done with COM and not with WCF ??</p>\n"},{"tags":["wpf","wcf","timeout","client","godaddy"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":13112653,"title":"(SOLVED) WCF 4.0 Service Hangs after First Call + 15 seconds Hosted on GoDaddy","body":"<p>I am trying to deploy a WCF 4.0 service at Godaddy and having trouble. Everything works fine on my local machine but when deployed I get an odd hang after the first call + 15 seconds that I can't figure out.</p>\n\n<p>At first I thought it was my Client as the Server's trace wasn't showing any faults. Then I found someone else's service with basicHttpBinding hosted online @ <a href=\"http://www.dimmiunapassword.com/wcf/PwdService.svc\" rel=\"nofollow\">http://www.dimmiunapassword.com/wcf/PwdService.svc</a> that works fine. I can make a request, wait 20 seconds, make another and its successful.</p>\n\n<p>I thought it may be a problem with something I am doing in my service then, so I created a new basic service that returns a modified string... it's actually the New Project Template with nothing changed. That way I knew it was nothing with my more complex service returning larger amounts of data (although it works fine on my localhost). Unfortunately I'm having the same issue. I can make the first call fine and subsequent calls within 15 seconds go through fine, but if I wait 20 seconds- the Client will Timeout on the 1 minute default mark.</p>\n\n<p>After the Client times out, I can recall the service and the call goes through fine but exhibits the same 15 second behavior. If I wait long enough after the first call, say 10 minutes, another call will go through fine as well, almost like a Timeout is being triggered on the server and then resets to work again. On the flip-side, if the Client times out at the 1 minute default, it's almost like that resets the server as well.</p>\n\n<p>I've tried closing the service after each call. I've tried wrapping the channel and closing/disposing. I've tried a Using statement to close. Nothing worked. I think I've tried nearly every configuration for Concurrency, Instancing, Throttling, Sessioning, Timeouts, and Size limits with no luck. I've also traced the client and server, the client shows a timeout fault and the server shows nothing but the last successful request. The only thing I can notice is the \"Thread ID\" in the Clients trace changes and every time, it fails throwing a Timeout fault @ 1 minute (default). I can request 10+ calls within 15 seconds of the first call and they all process on the same \"Thread ID\" in the trace... as soon as it hits 15 seconds, the Thread ID changes and that's when the Client just hangs until the Timeout.</p>\n\n<p>I am stumped. I've been having this problem for about two weeks and I'm out of idea's. I'm not sure what I am doing wrong or if this is a IIS/GoDaddy problem?</p>\n\n<h2>The Service Hosted in IIS/Godaddy</h2>\n\n<p>Here is the <strong>IService1.vb</strong>:</p>\n\n<pre><code>&lt;ServiceContract()&gt;\nPublic Interface IService1\n\n    &lt;OperationContract()&gt;\n    Function GetData(ByVal value As Integer) As String\n\n    &lt;OperationContract()&gt;\n    Function GetDataUsingDataContract(ByVal composite As CompositeType) As CompositeType\n\nEnd Interface\n\n\n&lt;DataContract()&gt;\nPublic Class CompositeType\n\n    &lt;DataMember()&gt;\n    Public Property BoolValue() As Boolean\n\n    &lt;DataMember()&gt;\n    Public Property StringValue() As String\n\nEnd Class\n</code></pre>\n\n<p>Here is the <strong>Service1.svc.vb</strong>:</p>\n\n<pre><code>&lt;ServiceBehavior()&gt;\nPublic Class Service1\nImplements IService1\n\nPublic Sub New()\nEnd Sub\n\nPublic Function GetData(ByVal value As Integer) As String Implements IService1.GetData\n    Return String.Format(\"You entered: {0}\", value)\nEnd Function\n\nPublic Function GetDataUsingDataContract(ByVal composite As CompositeType) As CompositeType Implements IService1.GetDataUsingDataContract\n    If composite Is Nothing Then\n        Throw New ArgumentNullException(\"composite\")\n    End If\n    If composite.BoolValue Then\n        composite.StringValue &amp;= \"Suffix\"\n    End If\n    Return composite\n\nEnd Function\n\nEnd Class\n</code></pre>\n\n<p>Here is the <strong>Web.config</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" strict=\"false\" explicit=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.serviceModel&gt;\n\n    &lt;services&gt;\n      &lt;service name=\"wcfTestHost.Service1\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://www.website.com/wcf/Service1.svc\"&gt;&lt;/add&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n\n        &lt;endpoint binding=\"basicHttpBinding\" contract=\"wcfTestHost.IService1\"&gt;\n\n        &lt;/endpoint&gt;\n\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n\n      &lt;/service&gt;  \n    &lt;/services&gt;\n\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n\n  &lt;/system.serviceModel&gt;\n\n\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n    &lt;!--\n        To browse web app root directory during debugging, set the value below to true.\n        Set to false before deployment to avoid disclosing web app folder information.\n      --&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<h2><strong>As for the WPF Client test App</strong></h2>\n\n<p>Here is the <strong>app.config</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;system.diagnostics&gt;\n        &lt;sources&gt;\n            &lt;source name=\"DefaultSource\" switchName=\"DefaultSwitch\"&gt;\n                &lt;listeners&gt;\n                    &lt;add name=\"FileLog\"/&gt;\n                &lt;/listeners&gt;\n            &lt;/source&gt;\n        &lt;/sources&gt;\n        &lt;switches&gt;\n            &lt;add name=\"DefaultSwitch\" value=\"Information\" /&gt;\n        &lt;/switches&gt;\n        &lt;sharedListeners&gt;\n            &lt;add name=\"FileLog\"\n                 type=\"Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL\"\n                 initializeData=\"FileLogWriter\"/&gt;\n        &lt;/sharedListeners&gt;\n    &lt;/system.diagnostics&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding name=\"BasicHttpBinding_IService1\" /&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://www.website.com/wcf/Service1.svc\"\n                binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IService1\"\n                contract=\"TestService.IService1\" name=\"BasicHttpBinding_IService1\" /&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Here is the <strong>MainWindow.xaml.vb</strong>:</p>\n\n<p><strong>Just add a Button thats linked up to the \"TestBtn_Click\"</strong></p>\n\n<p><strong>And throw a Label on your window called \"lblTime\".</strong></p>\n\n<pre><code>Class MainWindow \n\n    Dim cTimer As New Timers.Timer\n    Dim iTime As Integer = 0\n\n    Public Delegate Sub UpdateLabel(ByVal whatLabel As Label, ByVal sWhat As String)\n    Public Sub _UpdateLabel(ByVal whatLabel As Label, ByVal sWhat As String)\n        whatLabel.Content = sWhat\n    End Sub\n\n\n\n    Private Sub TestBtn_Click(sender As Object, e As RoutedEventArgs)\n        AddHandler cTimer.Elapsed, AddressOf cTimer_Elapsed\n        cTimer.Interval = 1000\n        cTimer.Start()\n        iTime = 0\n\n        Using lb As New TestService.Service1Client\n            Dim st As String = lb.GetData(\"5\")\n            lb.Close()\n            MsgBox(st)\n        End Using\n\n        cTimer.Stop()\n\n        iTime = 0\n        cTimer.Start()\n    End Sub\n\n\n    Public Sub cTimer_Elapsed()\n        iTime += 1\n\n        lblTime.Dispatcher.Invoke(New UpdateLabel(AddressOf _UpdateLabel), lblTime, \"Time: \" &amp; iTime)\n    End Sub\nEnd Class\n</code></pre>\n\n<p>I don't want to wait for the WCF Service to timeout, then make another call every time. I don't need sessions either. I would like the Service to either stay connected/open->send/receive or connect/send/receive/close without a timeout exception every other call outside 15 seconds of the first. I have to be doing something wrong and if not, has anyone else experienced this on Godaddy or any other hosting environment?</p>\n\n<p>I think I've included everything someone will need to help me out. If not, please let me know and I will add. I normally don't ask questions like this as I can usually debug myself but this has got me. Any help at all would be greatly appreciated! Thanks </p>\n\n<h1>Edit #1</h1>\n\n<p>I came across this url <a href=\"http://blogs.msdn.com/b/wenlong/archive/2010/02/11/why-does-wcf-become-slow-after-being-idle-for-15-seconds.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/wenlong/archive/2010/02/11/why-does-wcf-become-slow-after-being-idle-for-15-seconds.aspx</a> which I believe may be the problem/work-around. It talks about WCF becoming slow after the threads idle for 15 seconds but in my case it flat times out. In the Trace Logs I noticed the Thread ID changing after 15 seconds and that sounds exactly like this Threadpool issue though. I'm going to give this a try and see if it works tonight or tomorrow. I'll report back.</p>\n\n<h1>Edit #2</h1>\n\n<p>Edit #1 did not help so to further test\\debug, I managed to host the same WCF Service on a different Server/Domain than Godaddy and the WCF Service worked as it should. No problems at all. \nI'm in the process of trying to solve this through Godaddy now, it really seems like something on their end. I'll update the thread with anything new once I find out.</p>\n\n<h1>Edit #3</h1>\n\n<p>After about 2 weeks of trying to debug myself and another week waiting for GoDaddy to understand what my problem was <em>(I finally directed them to this StackOverflow page)</em>, the WCF Service is finally working correctly. Turns out, it was something with GoDaddy's server. I'm not exactly sure what was causing the issue but they migrated me to another server and whala, works perfect. Hopefully this saves someone time.</p>\n"},{"tags":["c#",".net","wcf","wcf-client","wcf-hosting"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1493,"score":1,"question_id":1959383,"title":"Hosting and Consuming WCF Service from Same Process","body":"<p>Can you become a client of a WCF Service from with the Process that is hosting the WCF Service?  I have tried creating seperate App Domains within the same process and still no success.  The service is confirmed to be available on Http, Net.TCP and Net.Pipe.</p>\n\n<p>Thank you for any help!</p>\n\n<p>Nat</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13260328,"title":"WCF Service request and parameters sent via URL","body":"<p>I'm creating a WCF service (.net 4.5 - Visual Studio 2012) and I need to be abble to call my service operations and pass the right parameters via URL.</p>\n\n<p>What do I need to change to allow this?</p>\n\n<p>When I use the following URL: \".../MyService.svc/GetData?value=2\", I get HTTP/1.1 400 Bad Request.</p>\n\n<p>Here is my web.config:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\"?&gt;\n    &lt;configuration&gt;\n\n      &lt;appSettings&gt;\n        &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n      &lt;/appSettings&gt;\n      &lt;system.web&gt;\n        &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n        &lt;httpRuntime targetFramework=\"4.5\"/&gt;\n      &lt;/system.web&gt;\n      &lt;system.serviceModel&gt;\n        &lt;services&gt;\n          &lt;service behaviorConfiguration=\"ofertaServiceBehavior\" name=\"Oferta\" &gt;\n            &lt;endpoint binding=\"webHttpBinding\" bindingConfiguration=\"\"                 contract=\"GeoOfertas.IOfertaService\" /&gt;\n          &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;behaviors&gt;\n          &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"ofertaServiceBehavior\"&gt;\n              &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\" /&gt;\n              &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n            &lt;/behavior&gt;\n          &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;protocolMapping&gt;\n            &lt;add binding=\"basicHttpsBinding\" scheme=\"https\" /&gt;\n        &lt;/protocolMapping&gt;    \n        &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"         multipleSiteBindingsEnabled=\"true\" /&gt;\n      &lt;/system.serviceModel&gt;\n      &lt;system.webServer&gt;\n        &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n        &lt;!--\n            To browse web app root directory during debugging, set the value below to true.\n            Set to false before deployment to avoid disclosing web app folder information.\n          --&gt;\n        &lt;directoryBrowse enabled=\"true\"/&gt;\n      &lt;/system.webServer&gt;\n\n    &lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf","wcf-binding","wcf-client"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13258486,"title":"WCF works in VS but not in IIS","body":"<p>Have a web application.  It runs 2 wcf services, and is a client for another.  One wcf service works fine, the other does not work on the dev server but does work locally.  The error is \"The content type text/html; charset=UTF-8 of the response message does not match the content type of the binding\"</p>\n\n<p>The the wcf part of the web application config is</p>\n\n<pre><code> &lt;system.serviceModel&gt;\n&lt;diagnostics&gt;\n  &lt;messageLogging logMalformedMessages=\"true\" logMessagesAtTransportLevel=\"true\" /&gt;\n&lt;/diagnostics&gt;\n&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;services&gt;\n  &lt;service name=\"company.eShopWorld.Wcf.eShopWorldWCFService\" behaviorConfiguration=\"company.Web.Wcf.ServiceBehavior\"&gt;\n   &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"Nad.CheckoutVendor.Interfaces.ICheckoutVendorService\" /&gt; \n   &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n  &lt;/service&gt;\n    &lt;service name=\"company.Mobile.Wcf.MobileService\" behaviorConfiguration=\"company.Mobile.Wcf.ServiceBehavior\" /&gt;\n        &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n    &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"company.Web.Wcf.ServiceBehavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n    &lt;/behavior&gt;\n\n      &lt;behavior name=\"company.Mobile.Wcf.ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;bindings /&gt;\n&lt;client&gt;\n  &lt;endpoint address=\"http://123.123.123.123:501/shipmentservice.svc\" binding=\"basicHttpBinding\" bindingConfiguration=\"\" contract=\"Shipping.IShipmentWcfService\" name=\"WSHttpBinding_IShipmentWcfService\"&gt;\n  &lt;/endpoint&gt;\n&lt;/client&gt;\n</code></pre>\n\n<p></p>\n\n<p>The test client wcf part of the config is </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_ICheckoutVendorService\" closeTimeout=\"00:02:00\"\n                openTimeout=\"00:02:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:02:00\"\n                allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n            &lt;binding name=\"BasicHttpBinding_ICheckoutVendorService1\" closeTimeout=\"00:02:00\"\n                openTimeout=\"00:02:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:02:00\"\n                allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://test.com:50128/eShopWorldService.svc\"\n            binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ICheckoutVendorService1\"\n            contract=\"eShopWorldSvc.ICheckoutVendorService\" name=\"BasicHttpBinding_ICheckoutVendorService\" /&gt;\n    &lt;/client&gt;\n</code></pre>\n\n<p></p>\n\n<p>The mobile service works, so I assume iis is set up correctly.\nIf I put the svc url in a browser it shows me service page and if I add the wsdl to the url is shows the wsdl.</p>\n\n<p>Have been beating my head against this for 2 days now and cannot find a problem.</p>\n\n<p>Any help is sorley appreciated </p>\n\n<p>So trying Dimitri's suggestion my web.config now looks like this </p>\n\n<pre><code> &lt;services&gt;\n        &lt;service name=\"company.eShopWorld.Wcf.eShopWorldWCFService\" behaviorConfiguration=\"company.Web.Wcf.EshopServiceBehavior\"&gt;\n            &lt;endpoint address=\"/eShopWorldService.svc\" binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ICheckoutVendorService\" contract=\"Nad.CheckoutVendor.Interfaces.ICheckoutVendorService\"/&gt;\n            &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n        &lt;/service&gt;\n        &lt;service name=\"company.Mobile.Wcf.MobileService\" behaviorConfiguration=\"company.Mobile.Wcf.ServiceBehavior\" &gt;\n            &lt;endpoint address=\"/MobileService.svc\" binding=\"basicHttpBinding\" contract=\"company.Mobile.Wcf.IMobileService\" /&gt;\n            &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"company.Web.Wcf.EshopServiceBehavior\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n            &lt;/behavior&gt;\n\n            &lt;behavior name=\"company.Mobile.Wcf.ServiceBehavior\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_ICheckoutVendorService\" closeTimeout=\"00:02:00\"\n                openTimeout=\"00:02:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:02:00\"\n                allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n</code></pre>\n\n<p>But I still have the error.  Note that I had to include the name of the service to prevent a 404 error</p>\n\n<p>I am somewhat confused by the fact that each of the services have their own web.config as well as the web app's web.config.  I assume they somehow get rolled up into the project when compiled as if there are errors in them they get thrown.  Any other ideas?\nthnx</p>\n"},{"tags":["wcf","rest","soap","behavior","endpoint"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13252198,"title":"WCF Service exposing some functions as REST","body":"<p>I have a WCF SOAP Service with about 100 functions. I only want to expose some of them to REST endpoints. Isnt it possible to do this with only one contract?</p>\n\n<p>I added a rest behavior and rest endpoint like this:</p>\n\n<pre><code>&lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"RestBehavior\"&gt;\n          &lt;webHttp helpEnabled=\"true\" defaultOutgoingResponseFormat=\"Json\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n\n\n&lt;endpoint address=\"json\" binding=\"webHttpBinding\" behaviorConfiguration =\"RestBehavior\" contract=\"Test.IService\" /&gt;\n&lt;endpoint address=\"\" binding=\"customBinding\" bindingConfiguration=\"BufferedHttpBinaryBusiness\"\n          bindingName=\"BufferedHttpBinaryBusiness\" contract=\"Test.IService\" /&gt;\n</code></pre>\n\n<p>and added <code>WebGet</code> attribute to the function I want to expose on rest endpoint:</p>\n\n<pre><code>&lt;WebGet(BodyStyle:=WebMessageBodyStyle.Wrapped, RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json, UriTemplate:=\"/IsRegistered?Id={Id}\")&gt;\n    &lt;ServiceModel.OperationContract()&gt;\n    Function IsRegistered(ByVal Id As String) As Boolean\n</code></pre>\n\n<p>But I also have my other functions which I dont want to expose as REST.</p>\n\n<pre><code>&lt;ServiceModel.OperationContract()&gt; \nFunction GetName(ByVal x As Long, ByVal y As String) As String\n&lt;ServiceModel.OperationContract()&gt; \nFunction GetId(ByVal name As String) As String\n</code></pre>\n\n<p>The error I got is:</p>\n\n<pre><code>System.InvalidOperationException: Operation 'GetName' of contract 'IService' specifies multiple request body parameters to be serialized without any wrapper elements. At most one body parameter can be serialized without wrapper elements. Either remove the extra body parameters or set the BodyStyle property on the WebGetAttribute/WebInvokeAttribute to Wrapped.\n   at System.ServiceModel.Description.WebHttpBehavior.TryGetNonMessageParameterType(MessageDescription message, OperationDescription declaringOperation, Boolean isRequest, Type&amp; type)\n   at System.ServiceModel.Description.WebHttpBehavior.ValidateBodyStyle(OperationDescription operation, Boolean request)\n   at System.ServiceModel.Description.WebHttpBehavior.&lt;&gt;c__DisplayClass10.&lt;&gt;c__DisplayClass13.&lt;GetRequestDispatchFormatter&gt;b__d()\n   at System.ServiceModel.Description.WebHttpBehavior.&lt;&gt;c__DisplayClass10.&lt;GetRequestDispatchFormatter&gt;b__c()\n   at System.ServiceModel.Description.WebHttpBehavior.HideReplyMessage(OperationDescription operationDescription, Effect effect)\n   at System.ServiceModel.Description.WebHttpBehavior.GetRequestDispatchFormatter(OperationDescription operationDescription, ServiceEndpoint endpoint)\n   at System.ServiceModel.Description.WebHttpBehavior.ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)\n   at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)\n   at System.ServiceModel.ServiceHostBase.InitializeRuntime()\n   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at Microsoft.Tools.SvcHost.ServiceHostHelper.OpenService(ServiceInfo info)\n</code></pre>\n\n<p>When I add WebGet attribute to this function, then the same error happens for another soap function. It seems that it requires me to apply WebGet attribute to all functions. In other words, it requires me to expose all functions in contract to expose to REST endpoint. But I want only some of them to expse as REST. Isnt it possible? </p>\n"},{"tags":["silverlight","wcf","session","basichttpbinding"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2044,"score":4,"question_id":6279720,"title":"WCF + Silverlight + HttpContext.Current.Session is null","body":"<p>my problem....</p>\n\n<p>i am tryingo to access session from Silverlight and WCF basicHttpBinding...</p>\n\n<p>i saw some posts where it's possible (http://www.dotnetspider.com/Silverlight-Tutorial-317.aspx)</p>\n\n<p>Mys cenario is:</p>\n\n<p>Silvelright 4 FW 3.5</p>\n\n<p>in web.config i have</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"ViewModelDemo.Web.Service1Behavior\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n        &lt;service behaviorConfiguration=\"ViewModelDemo.Web.Service1Behavior\" name=\"ViewModelDemo.Web.Service1\"&gt;\n            &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"ViewModelDemo.Web.Service1\"&gt;\n                &lt;identity&gt;\n                    &lt;dns value=\"localhost\" /&gt;\n                &lt;/identity&gt;\n            &lt;/endpoint&gt;\n            &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>and my service:</p>\n\n<pre><code>[ServiceContract]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\n[ServiceBehavior(IncludeExceptionDetailInFaults = true)]\npublic class Service1\n{\n    [OperationContract]\n    publicvoid Test()\n    {\n        var session = System.Web.HttpContext.Current.Session;\n    }\n}\n</code></pre>\n\n<p>and it''s call</p>\n\n<pre><code>                var client = new Service1Client();\n                client.GetUserMacroFunctionsCompleted += new System.EventHandler&lt;GetUserMacroFunctionsCompletedEventArgs&gt;(client_GetUserMacroFunctionsCompleted);\n                client.GetUserMacroFunctionsAsync();\n\n\nvoid client_GetUserMacroFunctionsCompleted(object sender, GetUserMacroFunctionsCompletedEventArgs e)\n    {\n        var test =  ((Collection&lt;Function&gt;)e.Result);\n    }\n</code></pre>\n\n<p>HttpContext.Current is always null!</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":152,"score":3,"question_id":12889947,"title":"The remote server returned an error: (413) Request Entity Too Large + WCF","body":"<p>May be this question is a duplicate. I have a WCF upload service through which the client uploads a particular file to the server. </p>\n\n<p>I could successfully send files of size 12MB through the service.</p>\n\n<p>Now I have integrated a self certified SSL certificate to the WCF Service. The same application which was working fine without SSL now returns an error saying Remote server returned an error (413) request entity too large.</p>\n\n<p>how do I fix this error is this something to do with SSL ?</p>\n\n<p>where am I going wrong.</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n\n&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"customHttpBinding\" openTimeout=\"00:10:00\" sendTimeout=\"00:10:00\"\n     maxReceivedMessageSize=\"10067108864\"\n      messageEncoding=\"Mtom\" transferMode=\"Streamed\"&gt;          \n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Certificate\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/bindings&gt;\n\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"customServiceBehavior\"&gt;\n      &lt;serviceMetadata httpsGetEnabled=\"true\"/&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n\n      &lt;serviceCredentials&gt;\n        &lt;clientCertificate&gt;\n          &lt;authentication certificateValidationMode=\"PeerOrChainTrust\" trustedStoreLocation=\"LocalMachine\"/&gt;\n        &lt;/clientCertificate&gt;\n      &lt;/serviceCredentials&gt;\n\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"customServiceBehavior\" name=\"FileTransferService\"&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"customHttpBinding\"\n      contract=\"IFileTransferService\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<p></p>\n\n<p>thanks</p>\n"},{"tags":["wcf","wcf-binding"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13258950,"title":"WCF 4.5 Change EndPoint URI in Code?","body":"<p>I have a self-hosted WCF service (no IIS) and it lives behind a load balancer horizontally scaled with other installations. I want the WSDL to show a pre-configured IP address as the location, which will be for example \"http://something.something.com/something?wsdl\" and not the actual address of the server which will be \"http://0.0.0.0/something?wsdl\". My service dos not use a config file at all, all configuration is completely programmatic.</p>\n\n<p>I saw something in the WCF Extras space (http://wcfextras.codeplex.com/releases/view/22256 ) but that appears to be pretty dated, so I am wondering if there is a newer way to do that with WCF 4.5.</p>\n\n<p>Thanks.</p>\n"},{"tags":["wcf","tfs","tfsbuild"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13258830,"title":"Rejected gated check-in with tfspreview","body":"<p>I'm attempting a gated checkin using tfspreview no known as visualstudio.com.</p>\n\n<p>I have had a few errors which I've been able to resolve but I'm down to one that utilizes WCF and the System.ServiceModel.PollingDuplex library.</p>\n\n<p>Heres what I get</p>\n\n<pre><code>Debug | Mixed Platforms\n0 error(s), 1 warning(s)\n\n$/solution.sln - 0 error(s), 1 warning(s),View Log File\n\nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Microsoft.Common.targets (1578): Could not resolve this reference. Could not locate the assembly \"System.ServiceModel.PollingDuplex\". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. \n\n$/solution.sln compiled\nNo Test Results\nNo Code Coverage Results\nOther Errors and Warnings\n\n1 error(s), 0 warning(s)\n\nException Message: MSBuild error 1 has ended this build. You can find more specific information about the cause of this error in above messages. (type BuildProcessTerminateException)\n\nException Stack Trace:    at System.Activities.Statements.Throw.Execute(CodeActivityContext context)\n\nat System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager)\n\nat System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor executor, BookmarkManager bookmarkManager, Location resultLocation) \n</code></pre>\n\n<p>However the service builds and runs fine locally. What could cause the warning to create a build error... but further more... why can't this library be found if its set as an embedded resource in my references?</p>\n"},{"tags":["asp.net","wcf"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13258563,"title":"when to use WCF desktop client application and when web application (asp.net)?","body":"<p>Well, when I wnat to make and application that need to access to the database of the company, I have two options. One create a desktop application that use WCF and the other option is create a web application with ASP.</p>\n\n<p>I know that with ASP I can do many things, like charts, table, forms, tables to show the result of the queries...</p>\n\n<p>So my doubt is when to use a desktop application with WCF and when to create a web application with ASP. I guess that the two options has positive and negative points.</p>\n\n<p>Thanks.\nDaimroc.</p>\n"},{"tags":["c#","wcf","serialization","datacontract"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13257301,"title":"WCF - Entity framework, generated entities serialization error","body":"<p>I'm new to WCF and today I have encountered a problem with DataContracts. I'm getting exception when objects are returned to client from WCF Service.</p>\n\n<p>SvcTraceViewer shows the next exception:</p>\n\n<blockquote>\n  <p><strong>Type</strong>\n  'System.Data.Entity.DynamicProxies.Person_7C797A477DD73534D4E8E743E1FCC1C75DAB75933D03B845A097A8B83F2DD748'\n  <strong>with data contract name</strong>\n  'Person_7C797A477DD73534D4E8E743E1FCC1C75DAB75933D03B845A097A8B83F2DD748:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies'\n  <strong>is not expected.</strong> Consider using a DataContractResolver or add any\n  types not known statically to the list of known types - for example,\n  by using the KnownTypeAttribute attribute or by adding them to the\n  list of known types passed to DataContractSerializer.</p>\n</blockquote>\n\n<p>I have several projects in solution.</p>\n\n<ul>\n<li>DataAccess (EntityFramework EDMX file is placed here)</li>\n<li>Model (Entities generated by DbContextGenerator are here)</li>\n<li>WCF Service (DataContracts are implemented in <code>Model</code> project)</li>\n<li>WPF Application (runs ServiceHost)</li>\n<li>Console Application (calls WCF project or service hosted in WPF Application)</li>\n</ul>\n\n<p>Here is operation contract in WCF:</p>\n\n<pre><code>[OperationContract]\nPerson[] GetAllPersons(int version);\n</code></pre>\n\n<p>interface implementation:</p>\n\n<pre><code>public Person[] GetAllPersons(int version)\n{\n    return StorageService.GetAllPersons(version);\n}\n</code></pre>\n\n<p>The excepion is thrown when the data is recieved on the client side (ConsoleApp).</p>\n\n<p>I guess the problem is related to generated entities, because they are partial classes</p>\n\n<p>Here is Person class:</p>\n\n<pre><code>public partial class Person\n{\n    public Person()\n    {\n        this.Project = new HashSet&lt;Project&gt;();\n    }\n\n    public int Id { get; set; }\n    public Nullable&lt;long&gt; AddressId { get; set; }\n    public string LastName { get; set; }\n    public string MiddleName { get; set; }\n    public string FirstName { get; set; }\n    public Nullable&lt;long&gt; GeoLocationId { get; set; }\n    public string FullGeoLocationName { get; set; }\n    public Nullable&lt;long&gt; SupervisorId { get; set; }\n    public Nullable&lt;long&gt; PositionId { get; set; }\n    public string Position { get; set; }\n    public string Office { get; set; }\n    public string NativeName { get; set; }\n    public string Location { get; set; }\n    public string FullName { get; set; }\n    public Nullable&lt;long&gt; PmcPersonId { get; set; }\n\n    public virtual ICollection&lt;Project&gt; Project { get; set; }\n    public virtual PersonDataVersion DataVersion { get; set; }\n    public virtual Workspace Workspace { get; set; }\n}\n</code></pre>\n\n<p>I tried to mark class and it's members with <code>[DataContract]</code> and <code>[DataMember]</code> attributes, but error still happens. <code>[KnownType(typeof(Person)]</code> attribute also didn't help.</p>\n\n<p>Is it possible to use generated entities as data contracts?</p>\n"},{"tags":["c#","multithreading","wcf","socket-timeout-exception"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":110,"score":3,"question_id":12977580,"title":"Starting multiple services on threads","body":"<p>I am trying to open a proxy on a thread (in background), the thread makes a new instance of the proxy, calls a method of the service and immediately after disposes the service.</p>\n\n<p>All of this happens on a thread :</p>\n\n<pre><code>var background = new Thread(() =&gt;\n{\n    var proxy = new AssignmentSvcProxy(new EndpointAddress(worker.Address));              \n\n    try\n    {\n        proxy.Channel.StartWork(workload);\n        proxy.Dispose();                   \n    }\n    catch (EndpointNotFoundException ex)\n    {\n        logService.Error(ex);                        \n        proxy.Dispose();\n        proxy = null;\n    }\n    catch (CommunicationException ex)\n    {\n        logService.Error(ex);\n        proxy.Dispose();\n        proxy = null;\n    }\n    catch (TimeoutException ex)\n    {\n        logService.Error(ex);                    \n        proxy.Dispose();\n        proxy = null;\n    }\n    catch (Exception ex)\n    {\n        logService.Error(ex);                    \n        proxy.Dispose();\n        proxy = null;\n    }                \n\n}) { IsBackground = true };\n\nbackground.Start();\n</code></pre>\n\n<p>I keep seeing intermittent timeout issues happening even though I have set the timeout to max for CloseTimeout, OpenTimeout, ReceiveTimeout, SendTimeout.</p>\n\n<p>I just want to make sure design wise this is not an issue i.e. opening a service on a thread and disposing it?</p>\n\n<p>EDIT :</p>\n\n<p>Proxy internally establishes a channel with custom binding on different endpoints for each thread.</p>\n"},{"tags":["wcf","serialization","datacontract","datamember"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":703,"score":2,"question_id":3358548,"title":"Can I prevent a specific datamember from being deserialized?","body":"<p>I have a datacontract like this</p>\n\n<pre><code>[DataContract]\nclass MyDC \n{\n    [DataMember]\n    public string DM1;\n\n    [DataMember]\n    public string DM2;\n\n    [DataMember]\n    public string DM3;\n}\n</code></pre>\n\n<p>and <em>sometimes</em> I want to prevent DM2 from being deserialized when being returned from an OperationContract. Something like this: </p>\n\n<pre><code>[OperationContact]\npublic MyDC GetMyDC()\n{\n    MyDC mdc = new MyDC();\n\n    if (condition)\n    {\n        // Code to prevent DM2 from being deserialized  \n    }\n\n    return mdc;\n}\n</code></pre>\n\n<p>I could always make a new DataContract that has only DM1 and DM3 and generate that from the MyDC instance but I want to see if it is possible to programatically remove DM2. Is it  possible? How?</p>\n"},{"tags":["asp.net-mvc-3","wcf","iis","service"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13255696,"title":"My WCF Service does not see my MVC3 app environment","body":"<p>I have an MVC3 application that uses castlewindsor container. Now i have created a wcfservice to allow other application to be able to update data that my MVC application uses (this service is hosted in iis7). The problem is that It seems that my wcf service does not see the MVC app context since im not able to access the container. </p>\n\n<p>I mean, in the following sentence the variable c is null:</p>\n\n<pre><code>IClientService c = DependencyResolver.Current.GetService(typeof(IClientService)) as IClientService;\n</code></pre>\n\n<p>How can i make the wcf service to see the MVC application container?</p>\n"},{"tags":["wcf","security","certificate"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":7291,"score":5,"question_id":1701437,"title":"WCF service certificate and client side endpoint identity - why it doesn't work?","body":"<p>[Update] - I attach also full config files, for <a href=\"http://gist.github.com/230024\">service</a>, and for <a href=\"http://gist.github.com/230026\">client</a> (outside of here, not to flood the topic)</p>\n\n<p>I'm having situation pretty much identical to the one outlined in <a href=\"http://stackoverflow.com/questions/1577115/wcf-service-certificate-implications-of-certificatevalidationmodenone-and-revo\">this</a> question, however my question is somewhat different.</p>\n\n<ul>\n<li>I'm using NetTcpBinding with security\nset to TransportWithMessageCredential</li>\n<li>I'm using Password/Username\ncredentials backed up by ASP.NET\nprovider</li>\n<li>My service is self hosted in Windows\nService</li>\n<li>I <strong>do</strong> have in my endpoint behavior\nspecified authentication\nrevocationMode=\"NoCheck\"</li>\n</ul>\n\n<p>It is required that the service provides a certificate to authenticate itself to clients. That's OK, I just do:</p>\n\n<pre><code>&lt;serviceCertificate findValue=\"***\"\n                    storeLocation=\"CurrentUser\"\n                    storeName=\"My\"\n                    x509FindType=\"FindByThumbprint\"/&gt;\n</code></pre>\n\n<p>Now, I somewhat imagined that now the client would end up having</p>\n\n<pre><code>&lt;identity&gt;\n  &lt;certificate encodedValue=\"encoded certificate\"/&gt;\n&lt;/identity&gt;\n</code></pre>\n\n<p>And it will be able to verify service's credentials <strong>without having that certificate installed in the store on client machine</strong>.</p>\n\n<p>I was surprised <a href=\"http://msdn.microsoft.com/en-us/library/ms733130.aspx\">to learn</a> that although I set the service credentials to certificate, <a href=\"http://en.wikipedia.org/wiki/Web%5FServices%5FDescription%5FLanguage\">WSDL</a> exposes </p>\n\n<pre><code>&lt;Identity&gt;\n   &lt;Dns&gt;Foo&lt;/Dns&gt;\n&lt;/Identity&gt;\n</code></pre>\n\n<p>Again, on service I can set Identity to CertificateReference and hook it up to the same certificate, and then WSDL will expose identity as X509Certificate, but when I run the client that setting is ignored, and I end up with error message:</p>\n\n<blockquote>\n  <p>System.ServiceModel.Security.SecurityNegotiationException:\n  The X.509 certificate CN=xxx is not in\n  the trusted people store. The X.509\n  certificate CN=xxx chain building\n  failed. The certificate that was used\n  has a trust chain that can not be\n  verified. Replace the certificate or\n  change the certificateValidationMode.\n  A certificate chain processed, but\n  terminated in a root certificate which\n  is not trusted by the trust provider.</p>\n</blockquote>\n\n<p>Is there a way to make client use that value from config and work without having to install a service certificate (nor its root) on client' machine?</p>\n\n<p><strong>[UPDATE]</strong>\nWhile setting certificateValidationMode to none will make the exception go away, it is unacceptable solution from security point of view.</p>\n\n<p>It makes the client merely acknowledge that it receive ''some'' certificate, without getting into details. This makes all range of man in the middle attacks possible. It still won't validate the information sent by (alleged) service against the certificate dumped in the config.</p>\n"},{"tags":["wcf","concurrency"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13254962,"title":"Can't get concurrent calls to WCF web service to work","body":"<p>I've got a WCF web service, as a test it contains a method which calls a stored procedure which waits for 10 seconds then returns.</p>\n\n<p>I have a test program which starts 20 threads all calling this web service method at the same time. The result I get is two calls return in 10 seconds, then 10 seconds later another two calls return, and so on. So the web service is processing the calls only two at a time.</p>\n\n<p>Now the simple answer may be to change ConcurrencyMode to Multiple, and maybe change the throttling settings, but when I do this it doesn't have any effect.</p>\n\n<p>The web service is hosted on IIS 7.5. Currently all the settings are as default, although as I said I've tried setting ConcurrencyMode to Multiple.</p>\n\n<p>If anyone can help me with this I'd really appreciate it.</p>\n\n<p>Thanks,\nMark</p>\n"},{"tags":[".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13253552,"title":"disconnecting issues in wcf clients","body":"<p>i have a WCF multiple game service.the clients connect to server and call some methods.\nif one client lost connection,how to reconnect to the server?is there any event for connection lost?\nhow server resume its session and return result of method call that was called before disconnection?\ncan anyone give me some posts or articles about this issues.\nsorry for bad English.\nthanks for help</p>\n"},{"tags":["asp.net","wcf","architecture","soa","n-tier"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":270,"score":4,"question_id":8512141,"title":"WCF Routing/ESB Architecture?","body":"<p>I've been working on building a set of enterprise services using WCF 4 within my organization and could use some guidance. The setup/architecture I've designed thus far is similar to a lightweight custom ESB. I have one main \"broker\" service (using wsHttp), that connects to three underlying netTcp services. Both the broker and underlying services share a common assembly that contains the model, as well as the contract interfaces. In the broker service I can choose which operations from the underlying services I want to expose. The idea is that potentially we can have a core of set of services and few different brokers on top of them depending on the business need. We plan on hosting everything (including the netTcp services) in IIS 7.5 leveraging AppFabric and WAS.</p>\n\n<p>Here's my question, is such a design good practice and will it scale? These services should be able to handle thousands of transactions per day.</p>\n\n<p>I've played around with the routing in WCF 4 in lieu of the broker service concept I've mentioned, however, have not seen much value in it as it just simply does a redirect.</p>\n\n<p>I'm also trying to figure out how to optimize the proxies that the broker service (assuming this practice is advisable) has to the underlying services. Right now I simply have the proxies as private members within the brokers main class. Example:</p>\n\n<pre><code>private UnderlyingServiceClient _underlyingServiceClient = new UnderlyingServiceClient();\n</code></pre>\n\n<p>I've considered caching the proxy, however, am concerned that if I run into a fault that the entire proxy at that point would be faulted and cannot be reused (unless I catch the fault and simply re-instantiate).</p>\n\n<p>My goal with these services is to ensure that the client consuming them can get \"in and out\" as quickly as possible. A quick request-reply.</p>\n\n<p>Any input/feedback would be greatly appreciated.</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","wcf","web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13254185,"title":"Web Api call not returning __type in JSON response","body":"<p>We have an MVC website that was calling through to WCF Restful services but we are now replacing them with Web Api calls.  The problem is that existing code in some of the MVC controllers is relying on the \"__type\" attribute being returned for each object in the JSON so it can do different things depending on the type of the object.</p>\n\n<p>However, in the new Web Api responses, each of the objects returned don't have the \"__type\" entries in the JSON so the code is failing.</p>\n\n<p>Does anyone know how this is done?  I've found plenty about removing the __type entries for WCF services but nothing yet for making sure they're in for Web Api.</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","channel","channelfactory"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13237766,"title":"WCF ChannelFactory IDuplexSessionChannel","body":"<p>I am using a <code>ChannelFactory</code> to communicate with external services by sending raw soap requests. I have a NetTcp endpoint that uses the <code>IDuplexSessionChannel</code>. I tried creating a <code>IRequestChannel/IRequestSessionChannel</code> using <code>binding.BuildChannelFactory&lt;T&gt;()</code>, but that did not work (threw exception). From what I read online, duplex channels can be used like request channels, where you call a service method and get an immediate response. I want to know if the below code accomplishes that. I searched everywhere to see an example of <code>ChannelFactory</code> and <code>IDuplexSessionChannel</code>, but could not find anything. Lastly, if this were an IDuplexChannel instead of an IDuplexSessionChannel, would the implementation be any different since one is sessionful and the other isn't?</p>\n\n<pre><code>IChannelFactory factory;\nIChannel        channel;\n\nBinding         binding = GetBindingFromConfig( bindingName );\nEndpointAddress address = new EndpointAddress( endpointAddress );\n\nif( binding.CanBuildChannelFactory&lt;IDuplexSessionChannel&gt;() )\n{\n    factory = binding.BuildChannelFactory&lt;IDuplexSessionChannel&gt;();\n    factory.Open();\n    channel = ( (IChannelFactory&lt;IDuplexSessionChannel&gt;)factory ).CreateChannel( address );\n    channel.Open();\n\n    ( (IDuplexSessionChannel)channel ).Send( requestMessage );\n    ( (IDuplexSessionChannel)channel ).TryReceive( Timespan.MaxValue, out responseMessage );\n}\n</code></pre>\n\n<p>Here is my configuration file:</p>\n\n<pre><code>&lt;netTcpBinding&gt;\n    &lt;binding\n        name=\"xyz\"\n        closeTimeout=\"00:01:00\"\n        openTimeout=\"00:01:00\"\n        receiveTimeout=\"00:10:00\"\n        sendTimeout=\"00:01:00\"\n        transactionFlow=\"false\"\n        transferMode=\"Buffered\"\n        transactionProtocol=\"OleTransactions\"\n        hostNameComparisonMode=\"StrongWildcard\"\n        listenBacklog=\"10\"\n        maxBufferPoolSize=\"524288\"\n        maxBufferSize=\"10485760\"\n        maxConnections=\"10\"\n        maxReceivedMessageSize=\"10485760\"&gt;\n\n        &lt;readerQuotas\n            maxDepth=\"32\"\n            maxStringContentLength=\"8192\"\n            maxArrayLength=\"10485760\"\n            maxBytesPerRead=\"4096\"\n            maxNameTableCharCount=\"16384\" /&gt;\n\n        &lt;reliableSession\n            ordered=\"true\"\n            inactivityTimeout=\"00:10:00\"\n            enabled=\"false\" /&gt;\n\n        &lt;security mode=\"Transport\" /&gt;\n    &lt;/binding&gt;\n&lt;/netTcpBinding&gt;\n</code></pre>\n"},{"tags":["c#","wcf","silverlight","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13254994,"title":"WCF throwing random ServiceActivationException","body":"<p>I am working on a Silverlight Project that uses WCF as backend.\nThe project uses Autofac for IoC (both frontend as backend).</p>\n\n<p>The WCF Services are hosted in IIS7 &amp; have configured correctly (endpoints, aspnetcompatibilityenabled, ..).</p>\n\n<p>When debugging the project in VS 2012, random services sometimes throw a ServiceActivationException, without any information. \nSometimes a rebuild fixes the problem, sometimes IISReset, sometimes invoking the service with the wcftestclient. The last solution always works though..</p>\n\n<p>Has anyone experienced similar problems? </p>\n\n<p>Please don't hesitate to ask for more info if needed..</p>\n\n<p>Thnx!</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13253817,"title":"DataContract not working and classes are not showing on the client","body":"<pre><code>[ServiceContract(SessionMode = SessionMode.Required)]\n    public interface IActionService\n    {\n        [OperationContract]\n        MovieResponse GetReviews(MovieRequest request);\n\n        [OperationContract]\n        UserResponse GetUsers(UserRequest request);\n\n        [OperationContract]\n        UserResponse InsertUser(UserRequest request);\n    }\n\n    [DataContract]\n    public class UserRequest\n    {\n        [DataMember]\n        public int userId;\n\n        [DataMember]\n        public User user;\n    }\n</code></pre>\n\n<p>I cant see the userrequest and userresponse in my ServiceReference at the client. Why?</p>\n"},{"tags":["c#","wcf","nhibernate"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":209,"score":0,"question_id":4728003,"title":"private initialized variable not initializing","body":"<p>I have a datacontract on an inherited, partial class like this:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\n\nnamespace Domain\n{\n  [DataContract]\n  public partial class IdCard : DomainObject&lt;System.Int64&gt;\n  {\n    private Group _grp;\n\n    [DataMember]\n    public virtual Group Grp\n    {\n        get { return _grp; }\n        set { _grp = value; }\n    }\n\n    private bool _unproxized = true;\n    public override object UnProxy()\n    {\n        if (this._unproxized)  // this prevents stackoverflow with cyclical references\n        {\n            this.Grp = (Group)this.Grp.UnProxy();\n            this._unproxized = false;\n        }\n\n        return this;\n    }\n  }\n}\n</code></pre>\n\n<p>For some reason, the _unproxized is never set to true;  Any ideas why?</p>\n\n<p>I know I can simply switch the logic around, but I'm curious why the member variable is not being initialized.</p>\n"},{"tags":["c#","c++","wcf","service"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13253494,"title":"Automatically restart a self hosted wcf service on crash","body":"<p>I have a self hosted wcf service that is using legacy c++ code via dll import and pinvoke. There are some instances in the old code where exceptions arise from the functions (that were handled in the old app, but not in the service) and when they occur my service is stopping. The exceptions are rare; however, I do not want my service just randomly stopping as a result of a crash in another assembly. The exceptions are not bubbling up to the service so I cannot try/catch them in the service. Is there a way to automatically have the service restart on crash? </p>\n\n<p><strong>It is self hosted, not through IIS.</strong> </p>\n\n<p>Thanks in advance!!</p>\n"},{"tags":["c#","wcf",".net-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13253830,"title":"wcf's MaxRetryCount misunderstanding?","body":"<p><code>MaxRetryCount</code>   - msdn :</p>\n\n<blockquote>\n  <p>Gets or sets the maximum number of times that a message attempts to be\n  transferred during the reliable session.</p>\n  \n  <p>If an acknowledgment has not been received within a certain amount of\n  time for a message that has been transmitted, the infrastructure\n  automatically retransmits the message. The infrastructure tries to\n  send the message for, at most, a MaxRetryCount number of times</p>\n</blockquote>\n\n<p>Question : </p>\n\n<p>\"<code>A certain amount of time</code>\" <strong>?</strong></p>\n\n<ul>\n<li><p>What if my operation is a heavy db IO operation ?</p></li>\n<li><p>Can I decide on what operations the Retry will happen ?  ( for example : for error 500 don't , but for timeout - do) ?</p></li>\n</ul>\n"},{"tags":["android","wcf","inputstream"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13226876,"title":"Android can not write newly created bitmap stream to WCF service","body":"<p>I have a strange issue with writing a bitmap stream to WCF DataOutputStream request. I am getting:</p>\n\n<blockquote>\n  <p>IOException: expected bytes XXX but received XXX </p>\n</blockquote>\n\n<p>I have tested it with FileInputStream and it's uploading perfectly, but when I convert the bitmap to an InputStream it throws an <code>IOException</code>. Any help will be highly appreciated.</p>\n\n<p>Below is my function with which I call an AsyncTask:</p>\n\n<pre><code>public static Boolean AddAdItemImage(int AdItemId,File ThisFile)\n{\n    HttpURLConnection conn = null;\n    DataOutputStream dos = null;\n    DataInputStream inStream = null;\n    InputStream fileInputStream = null;\n    ByteArrayOutputStream stream = null;\n\n    try \n    {    \n        if (ThisFile.isFile()) \n        {\n            Bitmap Bm = Utility.decodeSampledBitmapFromResource(ThisFile.getPath(), 640, 480);\n            stream = new ByteArrayOutputStream();\n            Bm.compress(CompressFormat.JPEG, 100, stream);\n            fileInputStream = new ByteArrayInputStream(stream.toByteArray());\n\n            //fileInputStream = new FileInputStream(ThisFile);\n\n            conn = (HttpURLConnection) new URL(Params.GetServiceUrl()+\"/AddAdImage?AdItemId=\"+String.valueOf(AdItemId)+\"&amp;ContentType=\"+Utility.GetFileMimeType(ThisFile)+\"&amp;apikey=\"+Params.GetApiKey()).openConnection();\n            conn.setDoInput(true);\n            conn.setDoOutput(true);\n            conn.setUseCaches(false);\n            conn.setRequestMethod(\"POST\");\n\n            conn.setFixedLengthStreamingMode((int) ThisFile.length());// works fine till 24 mb file\n            conn.setRequestProperty(\"Connection\", \"Keep-Alive\");\n            conn.setRequestProperty(\"Content-Type\",\"application/stream\");\n\n            dos = new DataOutputStream(conn.getOutputStream());\n\n            int maxBufferSize =  1 * 1024 * 1024;\n            int bytesAvailable = fileInputStream.available();\n            int bufferSize = Math.min(bytesAvailable,maxBufferSize);\n\n            byte[] buffer = new byte[bufferSize];\n\n            Log.i(\"Upload Ad Image\", \"Writing Stream\");\n\n            while ((bufferSize = fileInputStream.read(buffer)) &gt; 0)\n            {\n                dos.write(buffer, 0, bufferSize);\n            }\n\n            Log.i(\"Upload Ad Image\", \"Stream Written\");\n\n            //dos.write(stream.toByteArray());\n\n            String lineEnd = \"\";\n\n            dos.writeBytes(lineEnd);\n\n            Log.i(\"Upload Ad Image\", \"Line Written\");\n\n            // read the SERVER RESPONSE\n            inStream = new DataInputStream(conn.getInputStream());\n            String str = new String();\n            String strResponse = new String();\n\n            while ((str = inStream.readLine()) != null) \n            {\n                strResponse += str;\n            }\n\n            inStream.close();\n\n            dos.flush();\n            dos.close();\n\n            return Boolean.valueOf(strResponse);\n        } \n    }\n    catch (MalformedURLException ex)\n    {\n        Log.e(\"AddAdItemImage\", \"MalformedURLException: \" + ex.getMessage(),ex);\n    } \n    catch (IOException ioe)\n    {\n        Log.e(\"AddAdItemImage\", \"IOException: \" + ioe.getMessage(),ioe);\n    }\n    catch (IllegalStateException e)\n    {\n        Log.e(\"AddAdItemImage\", \"IllegalStateException: \" + e.getMessage(),e);\n    }\n    catch (Exception e)\n    {\n        Log.e(\"AddAdItemImage\", \"Exception: \" + e.getMessage(),e);\n    }\n    finally\n    {\n        try\n        {\n            if(fileInputStream != null)\n                fileInputStream.close();\n        }\n        catch (IOException e){} \n\n        try \n        {   \n            if(stream!=null)\n                stream.close();\n        }\n        catch (IOException e) {}\n    }   \n\n    return false;\n}\n</code></pre>\n"},{"tags":["wcf","exception","generics","faultexception"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13252504,"title":"Creating generic WCF Fault Exception within Message Inspector, will not be caught","body":"<p>The problem is that Im creating a <code>FaultException&lt;JoBlogsWebServiceFaultDetail&gt;</code> as the response message for a replacement operation in a <code>IClientMessageInspector</code> implementation, however in the client the error is not caught by <code>catch (FaultException&lt;JoBlogsWebServiceFaultDetail&gt; ex)</code> but instead by the <code>catch (FaultException ex)</code> filter.</p>\n\n<p>*Comments have been removed for brevity </p>\n\n<p>The data contract:</p>\n\n<pre><code>[DataContract]\npublic class JoBlogsWebServiceFaultDetail\n{\n    [DataMember]\n    public string MessageDetail { get; set; }\n\n    [DataMember]\n    public string MessageType { get; set; }\n\n    [DataMember]\n    public string TransactionComplete { get; set; }\n\n    [DataMember]\n    public string TransactionSuccess { get; set; }\n\n    public override string ToString()\n    {\n        return string.Format(\"Detail[MessageDetail={0}] [MessageType={1}] [TransactionComplete={1}] [TransactionSuccess={1}]\", MessageDetail);\n    }\n}\n</code></pre>\n\n<p>The message inspector:</p>\n\n<pre><code>internal class ResponseMessageInspector : System.ServiceModel.Dispatcher.IClientMessageInspector\n{\n    private static NLog.Logger _logger = NLog.LogManager.GetCurrentClassLogger();\n\n    public void AfterReceiveReply(ref Message reply, object correlationState)\n    {\n        MessageBuffer bufferedMessage = null;\n\n        try\n        {\n            bufferedMessage = reply.CreateBufferedCopy(Int32.MaxValue);\n\n            Message replacedMessage = bufferedMessage.CreateMessage();\n\n            if (bufferedMessage.MessageContentType != \"application/soap+msbin1\" || reply.IsEmpty || reply.IsFault)\n            {\n                reply = replacedMessage;\n                return;\n            }\n\n            bool isErrorMessage;\n\n            var messageReader = replacedMessage.GetReaderAtBodyContents();\n\n            isErrorMessage = (messageReader.Name == \"TransactionReport\");\n\n            if (isErrorMessage)\n            {\n                string transactionComplete = \"\",\n                    transactionSuccess = \"\",\n                    messageType = \"\",\n                    messageDetail = \"\",\n                    messageBrief = \"\";\n\n                while (messageReader.Read())\n                {\n                    if (messageReader.NodeType == XmlNodeType.Element &amp;&amp; !messageReader.IsEmptyElement)\n                    {\n                        switch (messageReader.Name)\n                        {\n                            case \"TransactionComplete\":\n                                transactionComplete = messageReader.ReadString();\n                                break;\n\n                            case \"TransactionSuccess\":\n                                transactionSuccess = messageReader.ReadString();\n                                break;\n\n                            case \"MessageType\":\n                                messageType = messageReader.ReadString();\n                                break;\n\n                            case \"MessageDetail\":\n                                messageDetail = messageReader.ReadString();\n                                break;\n\n                            case \"MessageBrief\":\n                                messageBrief = messageReader.ReadString();\n                                break;\n\n                            default:\n                                break;\n                        }\n                    }\n                }\n\n                if (string.IsNullOrEmpty(messageBrief))\n                {\n                    messageBrief = \"JoBlogs response processing fault: {Unable to obtain error message from JoBlogs response, enable WCF message tracing for more detailed information}\";\n\n                    _logger.Warn(messageBrief);\n                }\n\n                FaultException ex = new FaultException&lt;JoBlogsWebServiceFaultDetail&gt;(\n                    new JoBlogsWebServiceFaultDetail\n                    {\n                        TransactionComplete = transactionComplete,\n                        TransactionSuccess = transactionSuccess,\n                        MessageDetail = messageDetail,\n                        MessageType = messageType\n                    },\n                    new FaultReason(messageBrief));\n\n                Message faultMessage = Message.CreateMessage(reply.Version, ex.CreateMessageFault(), null);\n\n                faultMessage.Headers.CopyHeadersFrom(reply.Headers);\n                faultMessage.Properties.CopyProperties(reply.Properties);\n\n                reply = faultMessage;\n            }\n            else\n                reply = bufferedMessage.CreateMessage();\n        }\n        finally\n        {\n            if (bufferedMessage != null)\n                bufferedMessage.Close();\n        }\n    }\n\n    public object BeforeSendRequest(ref Message request, System.ServiceModel.IClientChannel channel)\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>The client code that is reciving the <code>FaultException</code> but not a <code>FaultException&lt;JoBlogsWebServiceFaultDetail&gt;</code> </p>\n\n<pre><code> internal static T TrySendToJoBlogsWebService&lt;T&gt;(\n        CallWebServiceDelegate&lt;T&gt; callWebService,\n        bool expectResponce,\n        out MessageProcessorResult result) where T : class\n    {\n        T JoBlogsWebServiceResponce = null;\n\n        result = new MessageProcessorResult();\n\n        using (ServiceRequestConnectorServiceSoapClient ws =\n          new ServiceRequestConnectorServiceSoapClient())\n        {\n            try\n            {\n                JoBlogsWebServiceWebServiceHelper.LogOn(ws);\n                JoBlogsWebServiceResponce = callWebService(ws);\n                if (expectResponce &amp;&amp; JoBlogsWebServiceResponce == null)\n                {\n                    result.ShouldRetry = true;\n                    result.RetryReason = \"Unexpected JoBlogsWebService web service response. The response was null\";\n                }\n            }\n            catch (FaultException&lt;JoBlogsWebServiceFaultDetail&gt; ex)\n            {\n                result.Exception = ex;\n                result.ShouldRetry = true;\n                result.RetryReason = string.Format(\"An Exception was raised calling the JoBlogsWebService web service: Reason:{0}  /r/nDetails: {1}\", ex.Reason, ex.Detail.ToString());\n                _logger.ErrorException(result.RetryReason, ex);\n            }\n            catch (FaultException ex)\n            {\n                result.Exception = ex;\n                result.ShouldRetry = true;\n                result.RetryReason = string.Format(\"An Exception was raised calling the JoBlogsWebService web service: {0}\", ex.Message);\n                _logger.ErrorException(ex.Message, ex);\n            }\n            finally\n            {\n                JoBlogsWebServiceWebServiceHelper.LogOff(ws);\n            }\n        }\n\n        return JoBlogsWebServiceResponce;\n    }\n</code></pre>\n"},{"tags":["wcf","windows-7","windows-8","visual-studio-2012","windows-server-2008"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13252932,"title":"WCF Service strange Exception from Windows 8 Machine","body":"<p>I have a WCF Service that I am consuming in a web-application and I get strange behaviour from my Windows 8 machine:</p>\n\n<p>When I compile the project from Windows 8, I get the following exception when trying to connect to the WCF Service: </p>\n\n<blockquote>\n  <p>The underlying connection was\n  closed: A connection that was expected to be kept alive was closed by\n  the server.</p>\n</blockquote>\n\n<p>I get the same exception when I deploy it onto a Windows Server 2008.</p>\n\n<p>However, if I compiled the project from Windows 7 and deploy it to the server, it works just fine.</p>\n\n<p>I am using Visual Studio 2012 in both cases, although one is Premium and one is Ultimate.</p>\n\n<p>After a lot of testing, it seems like when I just build and deploy the project often enough, at some point it will work, without having changed anything. It seems like the chance of getting a working project is about one in five. The Service works consistently, then, though.</p>\n\n<p>If any of you have an idea what could be going on, that would be nice. If you need more info let me know.</p>\n"},{"tags":["c#","wcf","iis-7.5"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":369,"score":3,"question_id":11455273,"title":"Remove Server from HTTP Response in WCF","body":"<p>I have an internet exposed WCF service running on IIS 7.5 that I need to secure.\nI would like to remove the \"Server\" header in the HTTP response.</p>\n\n<p>I've implemented an IDispatchMessageInspector with code as follows.</p>\n\n<pre><code>public void BeforeSendReply(ref Message reply, object correlationState)\n{\n    var context = WebOperationContext.Current;\n    if (context != null)\n    {\n        context.OutgoingResponse.Headers.Remove(\n            HttpResponseHeader.Server);\n    }\n}\n</code></pre>\n\n<p>However, the Server header is still in the response.\nOn debugging I can see that the <code>OutgoingResponse.Headers</code> does not include <code>HttpResonseHead.Server</code>, and if I write my own value it is clearly being overriten by something further down the line in the IIS pipeline.</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Tried the following, no good either</p>\n\n<pre><code>public class SecureServerHeaderModule : IHttpModule\n{\n    #region Implementation of IHttpModule\n\n    public void Init(HttpApplication context)\n    {\n        context.PreSendRequestHeaders += OnPreSendRequestHeaders;\n    }\n\n    public void Dispose() { }\n\n    #endregion\n\n    private static void OnPreSendRequestHeaders(object sender, EventArgs e)\n    {\n        var context = HttpContext.Current;\n        if (context != null)\n        {\n            context.Response.Headers.Remove(\"Server\");                \n        }\n    }\n}\n\n&lt;system.web&gt;\n  &lt;httpModules&gt;\n    &lt;add \"snip\" /&gt;\n  &lt;/httpModlules&gt;\n&lt;/system.web&gt;\n&lt;system.webServer&gt;\n  &lt;modules&gt;\n    &lt;add \"snip\" /&gt;\n  &lt;/modlules&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Also did not work.</p>\n\n<pre><code>public void BeforeSendReply(ref Message reply, object correlationState)\n{\n    var context = OperationContext.Current;\n    if (context != null)\n    {\n        context.OutgoingMessageProperties.Remove(\n            HttpResponseHeader.Server.ToString());\n        context.OutgoingMessageProperties.Add(\n            HttpResponseHeader.CacheControl.ToString(), \"no-store\");\n    }\n}\n</code></pre>\n"},{"tags":["c#","wcf","datacontract"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":176,"score":1,"question_id":11242836,"title":"Replace property values of unknown DataContract in WCF client proxy","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3586877/wcf-data-contract-being-converted-to-message-contract\">WCF: Data contract being converted to message contract</a>  </p>\n</blockquote>\n\n\n\n<p>I have a generic WCF proxy, for those unfamiliar with that it is a class with a method with the below OperationContract.</p>\n\n<pre><code>[OperationContract(Action = \"*\", ReplyAction = \"*\")]\nvoid Proxy(Message requestMessage);\n</code></pre>\n\n<p>One of the requirements that has recently emerged, is I need to replace all properties in the Message that are of type IPAddress, to the IPAddress value of those that supplied the request message.</p>\n\n<p>I.e. something like,</p>\n\n<pre><code>public void Proxy(Message requestMessage)\n{\n    try\n    {\n        // Client IP address, not currently used!\n        IPAddress clientIP = IPAddress.Parse((requestMessage\n            .Properties[RemoteEndpointMessageProperty.Name] \n            as RemoteEndpointMessageProperty).Address);\n        var factory = new ChannelFactory&lt;IDmzProxy&gt;(\"client\");\n        IDmzProxy dmzProxy = factory.CreateChannel();\n        dmzProxy.Proxy(requestMessage);\n        factory.Close();\n    }\n\n    // No leakage of data!  Any exceptions still return void!\n    catch (Exception exception)\n    {\n        Log.Fatal(\n            \"Exception occurred on proxying the request\",\n            exception);\n        return;\n    }\n}\n</code></pre>\n\n<p>The question now is how to set the element in requestMessage of type IPAddress to the clientIP that I have retrieved?</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Things I have tried and failed,</p>\n\n<pre><code>requestMessage.GetBodyAttribute(\"ipAddress\", \"http://schemas.datacontract.org/2004/07/System.Net\")\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p>One method seems to be replacing the XML of the MessageBody.  It seems like overkill to me (what's the point of WCF then?).</p>\n\n<p>It also isn't particularly easy as the MessageBody needs to match an element by its attribute names rather than the element name.</p>\n\n<pre><code>  &lt;ipAddress xmlns:a=\"http://schemas.datacontract.org/2004/07/System.Net\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;a:m_Address&gt;3772007081&lt;/a:m_Address&gt;\n    &lt;a:m_Family&gt;InterNetwork&lt;/a:m_Family&gt;\n    &lt;a:m_HashCode&gt;0&lt;/a:m_HashCode&gt;\n    &lt;a:m_Numbers xmlns:b=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\"&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n      &lt;b:unsignedShort&gt;0&lt;/b:unsignedShort&gt;\n    &lt;/a:m_Numbers&gt;\n    &lt;a:m_ScopeId&gt;0&lt;/a:m_ScopeId&gt;\n  &lt;/ipAddress&gt;\n</code></pre>\n\n<p><strong>Edit 3</strong></p>\n\n<p>Certainly not a duplicate, here is something that's roughly working, needs some work still to replace the node I am after,</p>\n\n<pre><code>    public void Proxy(Message requestMessage)\n    {\n        try\n        {\n            Log.Info(\"Received request\");\n            requestMessage = SourceNATMessage(requestMessage);\n\n            // Check if there is an accepted action we have to catch\n            // If the Accepted Action is set, and the action is not the same\n            // then just return);)\n            if (!String.IsNullOrEmpty(AcceptedAction) &amp;&amp;\n                !requestMessage.Headers.Action.EndsWith(AcceptedAction))\n            {\n                Log.WarnFormat(\n                    \"Invalid request received with the following action {0}\\n\" +\n                    \"expected action ending with {1}\",\n                    requestMessage.Headers.Action,\n                    AcceptedAction);\n                return;\n            }\n\n            // otherwise, let's proxy the request\n            Log.Debug(\"Proceeding with forwarding the request\");\n            var factory = new ChannelFactory&lt;IDmzProxy&gt;(\"client\");\n            IDmzProxy dmzProxy = factory.CreateChannel();\n            dmzProxy.Proxy(requestMessage);\n            factory.Close();\n        }\n\n        // No leakage of data!  Any exceptions still return void!\n        catch (Exception exception)\n        {\n            Log.Fatal(\n                \"Exception occurred on proxying the request\",\n                exception);\n            return;\n        }\n    }\n\n    private static Message SourceNATMessage(Message message)\n    {\n        IPAddress clientIp =\n                IPAddress.Parse(\n                    ((RemoteEndpointMessageProperty)\n                     message.Properties[\n                         RemoteEndpointMessageProperty.Name]).Address);\n\n        Log.DebugFormat(\"Retrieved client IP address {0}\", clientIp);\n\n        var stringBuilder = new StringBuilder();\n        XDocument document;\n\n        using (XmlWriter writer = XmlWriter.Create(stringBuilder))\n        {\n            message.WriteBody(writer);\n            writer.Flush();\n            document = XDocument.Parse(stringBuilder.ToString());\n        }\n\n        var deserializer = new DataContractSerializer(typeof(IPAddress));\n\n        foreach (XElement element in\n            from element in document.DescendantNodes().OfType&lt;XElement&gt;()\n            let aNameSpace = element.GetNamespaceOfPrefix(\"a\")\n            let iNameSpace = element.GetNamespaceOfPrefix(\"i\")\n            where\n                aNameSpace != null &amp;&amp;\n                aNameSpace.NamespaceName.Equals(SystemNetNameSpace) &amp;&amp;\n                iNameSpace != null &amp;&amp;\n                iNameSpace.NamespaceName.Equals(XmlSchemaNameSpace) &amp;&amp;\n                deserializer.ReadObject(element.CreateReader(), false) is IPAddress\n            select element)\n        {\n            element.ReplaceWith(new XElement(element.Name, deserializer.WriteObject());\n        }\n\n        return Message.CreateMessage(message.Version,\n                                     message.Headers.Action,\n                                     document.CreateReader());\n    }\n</code></pre>\n\n<p><strong>Edit 4</strong></p>\n\n<p>Working code for those interested, can't post as an answer as the question is closed.</p>\n\n<pre><code>private static Message SourceNatMessage(Message message)\n{\n    IPAddress clientIp =\n            IPAddress.Parse(\n                ((RemoteEndpointMessageProperty)\n                    message.Properties[\n                        RemoteEndpointMessageProperty.Name]).Address);\n\n    Log.DebugFormat(\"Retrieved client IP address {0}\", clientIp);\n\n    var stringBuilder = new StringBuilder();\n    XDocument document;\n\n    using (XmlWriter writer = XmlWriter.Create(stringBuilder))\n    using (XmlDictionaryWriter dictionaryWriter =\n        XmlDictionaryWriter.CreateDictionaryWriter(writer))\n    {\n        message.WriteBodyContents(dictionaryWriter);\n        dictionaryWriter.Flush();\n        document = XDocument.Parse(stringBuilder.ToString());\n    }\n\n    var deserializer = new DataContractSerializer(typeof(IPAddress));\n    var clientIpXml = new StringBuilder();\n    using (var xmlWriter = XmlWriter.Create(clientIpXml))\n    {\n        deserializer.WriteObject(xmlWriter, clientIp);\n        xmlWriter.Flush();\n    }\n\n    var clientElement = XElement.Parse(clientIpXml.ToString());\n\n    foreach (XElement element in\n        from element in document.DescendantNodes().OfType&lt;XElement&gt;()\n        let aNameSpace = element.GetNamespaceOfPrefix(\"a\")\n        let iNameSpace = element.GetNamespaceOfPrefix(\"i\")\n        where\n            aNameSpace != null &amp;&amp;\n            aNameSpace.NamespaceName.Equals(SystemNetNameSpace) &amp;&amp;\n            iNameSpace != null &amp;&amp;\n            iNameSpace.NamespaceName.Equals(XmlSchemaNameSpace) &amp;&amp;\n            element.NodeType == XmlNodeType.Element\n        select element)\n    {\n        try\n        {\n            deserializer.ReadObject(element.CreateReader(), false);\n            element.ReplaceNodes(clientElement);\n        }\n        catch (SerializationException) { }\n    }\n\n    Message sourceNatMessage = Message.CreateMessage(message.Version,\n                                    null,\n                                    document.CreateReader());\n    sourceNatMessage.Headers.CopyHeadersFrom(message);\n    sourceNatMessage.Properties.CopyProperties(message.Properties);\n\n    return sourceNatMessage;\n}\n</code></pre>\n"},{"tags":[".net","wcf","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13251988,"title":"Unable to find x509 Cert WCF error","body":"<p>I created a wcf and deployed it ssl enabled on server. I am able to access service by using url in browser and can see meta data but unable to access it from client. I am getting error as X509 cert cannot be found. Please find the config files i am using on client and service end. I have the wcf installed on a server along with certificate and trying to access it from my local machine. Do i need to do anything on my local machine to be able to access cert.</p>\n\n<p>Service:</p>\n\n<pre><code>&lt;system.serviceModel&gt;    \n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"wsHttpBinding\"&gt;         \n          &lt;security mode=\"Transport\"&gt;\n            &lt;transport clientCredentialType=\"Basic\"/&gt;\n            &lt;message clientCredentialType=\"None\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"testBehavior\" name=\"TestService\"&gt;\n        &lt;endpoint address=\"wsHttpBinding\"\n          binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpBinding\" name=\"sWsHttpBinding\"\n          contract=\"ITestContract\" &gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;      \n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"testBehavior\"&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;                 \n          &lt;serviceCredentials&gt;\n            &lt;clientCertificate&gt;\n              &lt;authentication certificateValidationMode=\"None\" revocationMode=\"NoCheck\"/&gt;\n            &lt;/clientCertificate&gt;\n            &lt;serviceCertificate findValue=\"112337B641609C08C6AEAA01FDFDFDFDFASF2334\"\n              storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindByThumbprint\"/&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"True\"&gt;&lt;/serviceHostingEnvironment&gt;\n  &lt;/system.serviceModel&gt;\n\nClient:\n&lt;system.serviceModel&gt;\n  &lt;bindings&gt;\n    &lt;wsHttpBinding&gt;\n      &lt;binding name=\"wsHttpBinding\"&gt;\n        &lt;security mode=\"Transport\"&gt;\n          &lt;transport clientCredentialType=\"Basic\" /&gt;\n        &lt;/security&gt;\n      &lt;/binding&gt;\n    &lt;/wsHttpBinding&gt;\n  &lt;/bindings&gt;\n  &lt;client&gt;   \n    &lt;endpoint address=\"http://myserver/sWsHttpBinding\"\n         behaviorConfiguration=\"endpointBehavior\" binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpBinding\"\n        contract=\"ITestContract\" name=\"sWsHttpBinding\"&gt;\n    &lt;/endpoint&gt;\n  &lt;/client&gt;\n  &lt;behaviors&gt;\n    &lt;endpointBehaviors&gt;\n      &lt;behavior name=\"endpointBehavior\"&gt;\n        &lt;clientCredentials&gt;\n          &lt;serviceCertificate&gt;\n            &lt;authentication certificateValidationMode=\"PeerTrust\" revocationMode=\"NoCheck\"/&gt;\n          &lt;/serviceCertificate&gt;\n          &lt;clientCertificate storeLocation=\"LocalMachine\" storeName=\"My\" findValue=\"112337B641609C08C6AEAA01FDFDFDFDFASF2334\" x509FindType=\"FindByThumbprint\"/&gt;\n        &lt;/clientCredentials&gt;\n      &lt;/behavior&gt;\n    &lt;/endpointBehaviors&gt;\n  &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["wcf","ssl","certificate","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13249041,"title":"X.509 certificate can't find with \"FindBySubjectName\"","body":"<p>After a brutal struggle with WCF Security, I think I'm at the final stage now and can see the light.</p>\n\n<p>I've got a Client certificate installed on my server, and is now, as advised, in the Trusted People folder of the certificate store.</p>\n\n<p>However, when I try and read the certificate application -> service, I get this error:</p>\n\n<p><strong>Cannot find the X.509 certificate using the following search criteria: StoreName 'My', StoreLocation 'CurrentUser', FindType 'FindBySubjectName', FindValue 'Forename Surname'.</strong></p>\n\n<p>With the \"Forename Surname\" being the \"Issued to\" part of my certificate. In all tutorials I have seen, this is just one word; is this the problem? I received my certificate from my CA with these two words, with a space.</p>\n\n<p>Anyone ever come across this, is there something I'm blatantly doing wrong?</p>\n\n<p>Update, cert can be seen here:</p>\n\n<p><img src=\"http://i.stack.imgur.com/6XM9s.jpg\" alt=\"enter image description here\"></p>\n\n<p>Update: </p>\n\n<p>It gets even more strange:</p>\n\n<p>I installed Visual Studio on my web server, and used the following code to pick up the cert by Thumbprint: </p>\n\n<pre><code>var store = new X509Store(StoreName.TrustedPeople, StoreLocation.CurrentUser);\n        store.Open(OpenFlags.ReadOnly);\n        var certs = store.Certificates.Find(X509FindType.FindByThumbprint, \"71995159BFF803D25BFB691DEF7AF625D4EE6DFB\", false);\n</code></pre>\n\n<p>This actually RETURNS a valid result. When I put this information into the web.config of my service/client though, I still get the error.</p>\n"},{"tags":["c#","wcf","service","nettcpbinding","windowservice"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13246828,"title":"wcf error \"Sequence contains no elements\" - \"Collection was Out Of fixed size\"","body":"<p>i am new in wcf. i start to create a wcf project that save people information in EF database.\ni had lots of error and fix them by searching in sites but recently i stoped by some error and cant fix them.</p>\n\n<p>my project is <strong>n-tier with Entity framework</strong> data model. there is 4 layer for server.</p>\n\n<p><strong>DAL</strong>(Contain EF dataModel)--><strong>BLL</strong>(Class library for insert/update/Delete Functions)--><strong>Service Layer</strong>(wcf class library)--><strong>Host Layer</strong>(windows service)</p>\n\n<p>i host my service with Windows Service. and the service binding is nettcpbinding. i configure service true so no problem here.</p>\n\n<p>i have a Project with name \"Common\"(class library) that All 4 project access to it and as you know i create a code generator and pasted generated class to common.(Separate class model with DAL).</p>\n\n<p>now Client has just (Host Layer) service reference.in client, i have all entity classes in service class.</p>\n\n<p>The Problem Occure When I want to insert object to data base See Code below :</p>\n\n<p><strong>Server Side (This Is in BLL And Service Layer):</strong></p>\n\n<pre><code>namespace BLL\n{\n    public static class bz\n    {\n        public static class People\n        {\n            public static void myInsert(Common.People p, out bool Result)\n            {\n                Result = false;\n\n                Common.EFContainer cntx = new Common.EFContainer();\n                cntx.ContextOptions.ProxyCreationEnabled = false;\n                cntx.ContextOptions.LazyLoadingEnabled = false;\n\n                if (p.FirstName == \"\" || p.FirstName == null)\n                {\n                   throw new Exception(\"Fill Fist Name\") ;\n                }\n                //  ... more validate\n                //--&gt;I Do not use first or single etc in validating&lt;--\n                try\n                {\n\n                    cntx.Peoples.AddObject(p);\n                    cntx.SaveChanges();\n                    Result = true;\n                }\n                catch (Exception ex)\n                {\n                    throw ex;\n                }\n            }\n        }\n        public static class Gender\n        {\n             public static List&lt;Common.Gender&gt; GetData()\n             {\n                Common.EFContainer cntx = new Common.EFContainer();\n                cntx.ContextOptions.ProxyCreationEnabled = false;\n                cntx.ContextOptions.LazyLoadingEnabled = false;\n\n                return cntx.Genders.ToList();\n             }\n        }\n    }\n}\n\nnamespace ServiceLayer\n{\n\n[ServiceContract(SessionMode = SessionMode.Required)]\npublic interface IService\n{\n    [FaultContract(typeof(NormalExeption))]\n    [OperationContract]\n    bool AddToPeople(Common.People p);\n\n    [OperationContract]\n    List&lt;Common.Gender&gt; GetGenders();\n}\n\n  [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode =     System.ServiceModel.ConcurrencyMode.Single)]\n public class myService : IService\n {\n    [OperationBehavior]\n    public bool AddToPeople(Common.People p)\n    {\n      try\n        {\n            BLL.bz.People.myInsert(p, out result);\n\n             return result;\n        }\n        catch (Exception ex)\n        { \n           var exep = new NormalExeption(ex.Message, ex.Source, 0, Icons.Error);\n           throw new FaultException&lt;NormalExeption&gt;(exep, new FaultReason(new FaultReasonText(ex.Message)));\n        }\n    }\n    [OperationBehavior]\n    public  List&lt;Common.Gender&gt; GetGenders()\n    {\n       return BLL.bz.Gender.GetData();\n    }\n }\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Client Sied :</strong></p>\n\n<pre><code>ServiceRef.People p = new ServiceRef.People();\nServiceRef.myServiceClient client=new ServiceRef.myServiceClient();\n\np.FirstName=\"S\";\n\n//... Fill Other Fields \n\np.Childs=new List&lt;ServiceRef.Child&gt;();\np.Childs.Add(new ServiceRef.Child(){FirstName=\"A\"});\n\np.Gender=client.GetGenders.first();\n\n//... ---&gt;No Error Happen Till Here Error Is After This in Service&lt;---\n\n\ntry\n{\n  client.AddToPeople(p);\n}\nCatch(FaultException fe)\n{\n  messagebox.show(fe.Detail.Message);\n}\n</code></pre>\n\n<p><strong>My Problems :</strong></p>\n\n<p>Both Error occure in client side after insert people object.</p>\n\n<p>When i use Poco Code Generator For My EF I Recive this error :</p>\n\n<p>\"Collection Was Out Of Fixed Size\" </p>\n\n<p>This Error occure in poco classes definition.</p>\n\n<p>When i use Self Tracking Code Generator For My EF I Recive this error :</p>\n\n<p>\"Sequence contains no elements\"</p>\n\n<p>i think This Error occure in contex.addobject(p) and I Dont Use Any Single Or First in my code that return this exception.</p>\n\n<p>some one help me witch code generator has not error that i can use it or how can i fix these errors .i have VS 2010.</p>\n\n<p>Edit : Service Work When server send objects to client but when client insert it fail. in client service reference config i change collection type to : system.collection.generic.list </p>\n"},{"tags":["c#","asp.net",".net","wcf"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":13218777,"title":"Can I edit Resource file at runtime","body":"<p>I have a WCF service, it response with JSON.  I need to create a language file, which I can edit on production server.  no problem if I will need to recycle App pool.</p>\n\n<p>I was about to use Resource file, but I was worry that it is not editable by end user.\nI don't need to edit it pragmatically, the end user will edit it by opening the file in notepad without recompiling the application.  </p>\n\n<p>What do you suggest? </p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","wcf","wsdl","wcf-client"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13229929,"title":"Importing WSDL into a .NET project only creates an empty namespace","body":"<p>I'm trying to use WCF for the first time. Here's what I did:</p>\n\n<ol>\n<li>Created a console .NET 4 project in VS 2010</li>\n<li>Added a WSDL file as a service reference.</li>\n</ol>\n\n<p>However, I can't seem to be able to use the service, because no classes were created. The service reference is just an empty namespace.</p>\n\n<p>What am I missing?</p>\n\n<p>Here is the WSDL:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- edited with XMLSPY v2004 rel. 3 U (http://www.xmlspy.com) by Christophe Duquesne (DRYADE SA) --&gt;\n&lt;!-- edited with XMLSpy v2007 rel. 3 U (http://www.altova.com) by Nick js Knowles (Kizoom) --&gt;\n&lt;definitions xmlns=\"http://schemas.xmlsoap.org/wsdl/\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:http=\"http://schemas.xmlsoap.org/wsdl/http/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:mime=\"http://schemas.xmlsoap.org/wsdl/mime/\" xmlns:siriWS=\"http://new.webservice.namespace\" xmlns:siri=\"http://www.siri.org.uk/siri\" xmlns:ns=\"http://datex2.eu/schema/1_0/1_0\" xmlns:ns1=\"http://www.ifopt.org.uk/acsb\" xmlns:ns2=\"http://www.ifopt.org.uk/ifopt\" targetNamespace=\"http://new.webservice.namespace\"&gt;\n  &lt;types&gt;\n        &lt;xsd:schema targetNamespace=\"http://new.webservice.namespace\"&gt;\n            &lt;xsd:import schemaLocation=\"siri.xsd\" namespace=\"http://www.siri.org.uk/siri\"/&gt;\n        &lt;/xsd:schema&gt;\n    &lt;/types&gt;\n    &lt;message name=\"StopMonitoringServiceRequest\"&gt;\n        &lt;part name=\"Request\" type=\"siri:ServiceRequestStructure\"/&gt;\n    &lt;/message&gt;\n    &lt;message name=\"StopMonitoringServiceDelivery\"&gt;\n        &lt;part name=\"Answer\" type=\"siri:ServiceDeliveryStructure\"/&gt;\n    &lt;/message&gt;\n    &lt;portType name=\"SOAP-Port\"&gt;\n        &lt;operation name=\"GetStopMonitoringService\"&gt;\n            &lt;input message=\"siriWS:StopMonitoringServiceRequest\"/&gt;\n            &lt;output message=\"siriWS:StopMonitoringServiceDelivery\"/&gt;\n        &lt;/operation&gt;\n    &lt;/portType&gt;\n    &lt;binding name=\"SiriSOAPBinding\" type=\"siriWS:SOAP-Port\"&gt;\n        &lt;soap:binding style=\"rpc\" transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n        &lt;!-- ====general  services ===== --&gt;\n        &lt;!-- ====SIRI services ===== --&gt;\n        &lt;operation name=\"GetStopMonitoringService\"&gt;\n            &lt;soap:operation soapAction=\"GetStopMonitoringService\"/&gt;\n            &lt;input&gt;\n                &lt;soap:body use=\"literal\"/&gt;\n            &lt;/input&gt;\n            &lt;output&gt;\n                &lt;soap:body use=\"literal\"/&gt;\n            &lt;/output&gt;\n        &lt;/operation&gt;\n    &lt;/binding&gt;\n    &lt;service name=\"SiriServices\"&gt;\n        &lt;port name=\"SiriWSPort\" binding=\"siriWS:SiriSOAPBinding\"&gt;\n            &lt;soap:address location=\"http://www.siri-service-location.com\"/&gt;\n        &lt;/port&gt;\n    &lt;/service&gt;\n    &lt;!--General messages--&gt;\n    &lt;!--SIRI Functional services--&gt;\n    &lt;!--Capabilities--&gt;\n    &lt;xsd:annotation&gt;\n        &lt;xsd:appinfo xmlns:gms=\"http://www.govtalk.gov.uk/CM/gms\"&gt;\n            &lt;Metadata xmlns=\"http://www.govtalk.gov.uk/CM/gms-xs\"&gt;\n                &lt;Aggregation&gt;main schema&lt;/Aggregation&gt;\n                &lt;Audience&gt;e-service developers&lt;/Audience&gt;\n                &lt;Contributor&gt;Nicholas Knowles, KIZOOM LTD., London EC4A 1LT&lt;/Contributor&gt;\n                &lt;Coverage&gt;Europe&lt;/Coverage&gt;\n                &lt;Creator&gt;&gt;Drafted for version 1.0, by  Cen TC278 WG3 SG7 Christophe Duquesne DRYADE SA mailto:schemer@siri.org.uk&lt;/Creator&gt;\n                &lt;Date&gt;\n                    &lt;Created&gt;2005-03-01&lt;/Created&gt;\n                &lt;/Date&gt;\n                &lt;Date&gt;\n                    &lt;Modified&gt;2005-05-11&lt;/Modified&gt;\n                &lt;/Date&gt;\n                &lt;Date&gt;\n                    &lt;Modified&gt;2007-01-30&lt;/Modified&gt;\n                &lt;/Date&gt;\n                &lt;Date&gt;\n                    &lt;Modified&gt;2007-04-17&lt;/Modified&gt;\n                    &lt;!-- Name Space changes --&gt;\n                &lt;/Date&gt;\n                &lt;Date&gt;\n                    &lt;Modified&gt;2008-02-12&lt;/Modified&gt;\n                    &lt;!-- Situation  Exchnages --&gt;\n                &lt;/Date&gt;\n                &lt;Date&gt;\n                    &lt;Modified&gt;2007-04-17&lt;/Modified&gt;\n                    &lt;!-- Name Space correction  --&gt;\n                    &lt;!-- Add  StopMonitoringMultipleRequest  --&gt;\n                &lt;/Date&gt;\n                &lt;Description&gt;\n                    &lt;p&gt;SIRI is a European CEN standard for the exchange of real time information. This describes WSDL Server binding&lt;/p&gt;\n                &lt;/Description&gt;\n                &lt;Format&gt;\n                    &lt;MediaType&gt;text/xml&lt;/MediaType&gt;\n                    &lt;Syntax&gt;http://www.w3.org/2001/XMLSchema&lt;/Syntax&gt;\n                    &lt;Description&gt;XML schema, W3C Recommendation 2001&lt;/Description&gt;\n                &lt;/Format&gt;\n                &lt;Identifier&gt;{http://www.siri.org.uk/schemas/1.3/siri}siri_wsProducer.wsdl&lt;/Identifier&gt;\n                &lt;Language&gt;[ISO 639-2/B] ENG&lt;/Language&gt;\n                &lt;Publisher&gt;Kizoom, 109-123 Clifton Street, London EC4A 4LD &lt;/Publisher&gt;\n                &lt;Rights&gt;Unclassified\n                             &lt;Copyright&gt;CEN, VDV, RTIG 2005-2008&lt;/Copyright&gt;\n                &lt;/Rights&gt;\n                &lt;Source&gt;\n                    &lt;ul&gt;\n                        &lt;li&gt;SIRI is derived from the VDV, RTIGXML and Trident standards.&lt;/li&gt;\n                    &lt;/ul&gt;\n                &lt;/Source&gt;\n                &lt;Status&gt;Version 1.0 Draft for approval&lt;/Status&gt;\n                &lt;Subject&gt;\n                    &lt;Category&gt;Arts, recreation and travel, Tourism, Travel (tourism), Transport,\n Air transport, Airports,\n Ports and maritime transport, Ferries (marine),\n Public transport, Bus services, Coach services, Bus stops and stations,\n Rail transport, Railway stations and track, Train services, Underground trains,\n Business and industry, Transport, Air transport , Ports and maritime transport, Public transport,\n Rail transport, Roads and road transport\n &lt;/Category&gt;\n                    &lt;Project&gt;Cen TC278 WG3 SG7&lt;/Project&gt;\n                &lt;/Subject&gt;\n                &lt;Title&gt;SIRI XML schema. WSDL Server binding. &lt;/Title&gt;\n                &lt;Type&gt;Standard&lt;/Type&gt;\n            &lt;/Metadata&gt;\n        &lt;/xsd:appinfo&gt;\n    &lt;/xsd:annotation&gt;\n    &lt;!-- ======== All the structures are comming from siri.xsd ========= --&gt;\n    &lt;!-- ======== Descritions of request parameters (requests and answers) ========= --&gt;\n    &lt;!-- ========Service Requests ========= --&gt;\n    &lt;!-- ====StopMonitoring== --&gt;\n    &lt;!-- ====PORTS ================ --&gt;\n    &lt;!-- ====BINDINGS  ================ --&gt;\n&lt;/definitions&gt;\n</code></pre>\n"},{"tags":["wcf","wcf-data-services","wcf-binding","wcf-client"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13192198,"title":"WCF streaming large file","body":"<p>I read this article <a href=\"http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP\" rel=\"nofollow\">http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP</a> to upload large file via WCF. </p>\n\n<p>I've created the same configuration but I've just upload file 48kb even I added attribute <code>maxReceivedMessageSize =\"2147483647\"</code>. When I try to upload file over 48kb I got an error</p>\n\n<blockquote>\n  <p><em>The remote server returned an error: (413) Request Entity Too\n  Large.</em></p>\n</blockquote>\n\n<p>Did I get wrong or miss something? Below is my config</p>\n\n<p>Server config: </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n    &lt;httpRuntime executionTimeout=\"4800\" maxRequestLength=\"2097150\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;!--BINDING--&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"TransferService\" \n                 closeTimeout=\"00:10:00\"\n                 maxBufferPoolSize=\"2147483647\"\n                 maxBufferSize=\"2147483647\"\n                 maxReceivedMessageSize =\"2147483647\" \n                 openTimeout=\"00:10:00\" \n                 receiveTimeout=\"00:10:00\" \n                 sendTimeout=\"00:10:00\" \n                 messageEncoding=\"Text\"\n                 transferMode=\"Streamed\"\n                 &gt;\n          &lt;readerQuotas\n            maxDepth=\"2147483647\" \n            maxStringContentLength=\"2147483647\"\n            maxBytesPerRead=\"2147483647\" \n            maxNameTableCharCount=\"2147483647\" \n            maxArrayLength=\"2147483647\"/&gt;\n        &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n\n    &lt;!--SERVICE--&gt;\n    &lt;services&gt;\n      &lt;service name=\"TransferService.TransferService\" \n               behaviorConfiguration=\"TransferServiceBehavior\" &gt;\n         &lt;endpoint  \n             address=\"\" \n             binding=\"basicHttpBinding\" \n             bindingConfiguration=\"TransferService\" \n             contract=\"TransferService.ITransferService\" &gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;!--BEHAVIOR--&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"TransferServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"  /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n          &lt;serviceThrottling maxConcurrentCalls=\"500\" maxConcurrentSessions=\"500\" maxConcurrentInstances=\"500\" /&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n   &lt;security&gt;\n     &lt;requestFiltering&gt;\n       &lt;requestLimits maxAllowedContentLength=\"500000000\"&gt;&lt;/requestLimits&gt;\n     &lt;/requestFiltering&gt;\n   &lt;/security&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Web client config: </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_ITransferService\" /&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint name=\"BasicHttpBinding_ITransferService\" \n          address=\"http://localhost/transfer/TransferService.svc\"\n          binding=\"basicHttpBinding\" \n          bindingConfiguration=\"BasicHttpBinding_ITransferService\"\n          contract=\"TransferService.ITransferService\" /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Please suggest any solutions. </p>\n\n<p>Thanks in advance</p>\n\n<hr>\n\n<p>Now I've changed config as your suggest but it's still raise the same error 400 or 413. Below is my test project. I don't know reason why? (Environment: Window 7 Pro 64 bit, IIS7 , WCF 4.0)</p>\n\n<p><a href=\"https://skydrive.live.com/redir?resid=BFE92959302FBAA0!105&amp;authkey=!ANO_URChpql9gKE\" rel=\"nofollow\">https://skydrive.live.com/redir?resid=BFE92959302FBAA0!105&amp;authkey=!ANO_URChpql9gKE</a></p>\n\n<p>I'm spent two week to research and but it's the same error.</p>\n\n<p>Please help me. Thanks in advance.</p>\n"},{"tags":["wcf","webservice-client"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13248434,"title":"how to dynamic binding of web service URL","body":"<p>i store web service url in web.config or app.config. when i call web service like</p>\n\n<pre><code> ServiceAvailabilityTestClient.TestClient servAvailClient = new ServiceAvailabilityTestClient.TestClient();\nservAvailClient.url= myapp.config url here.\nservAvailClient.CallValidateCityPostalCodeZip();\n</code></pre>\n\n<p>the problem is the property called url is not appearing. sp please tell me what to do.\ni just add wsdl file location as service reference because web service path called not being added. web service url which i try to add as web service reference is</p>\n\n<p><a href=\"https://devwebservices.purolator.com/EWS/V1/ServiceAvailability/ServiceAvailabilityService.asmx\" rel=\"nofollow\">https://devwebservices.purolator.com/EWS/V1/ServiceAvailability/ServiceAvailabilityService.asmx</a></p>\n\n<p>1) i just not being able why i am not being able to add this web service url as service reference</p>\n\n<p>2) why url property is not exposed in client side.</p>\n\n<p>can anyone guide me what is the matter. thanks</p>\n"},{"tags":["wcf","web-services","soap","soapheader","endpointbehavior"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13222300,"title":"WCF message: protocol in To element changes","body":"<p>I have a WCF service to consume in .NET. As per requirement the Action element in the header has to be <strong>\"http://abc\"</strong> and the To element has to be <strong>\"ws://xyz\"</strong> in order for the service to recognize and respond to the request. The soapAction of the operation is however blank in WSDL and it can't be changed.</p>\n\n<p>My service configuration built programmatically is this:</p>\n\n<ul>\n<li>text message encoding binding with Soap11 envelope version and WSAddressing10 addressing version</li>\n<li>no security biding</li>\n<li>http transport binding</li>\n</ul>\n\n<p>The setup I found achieving this requirement is \"ws://xyz\" as the endpoint URL and Request.Headers.Action set to \"http://abc\" in BeforeSendRequest using a message inspector added using an endpoint behaviour attached to the endpoint. Then I also attach a ClientViaBehavior with the URL of \"http://abc\".</p>\n\n<p>On my development machine this causes as required</p>\n\n<pre><code>&lt;a:Action&gt;http://abc&lt;/a:Action&gt;\n&lt;a:To&gt;ws://xyz&lt;/a:To&gt;\n</code></pre>\n\n<p>However on the test server it generates</p>\n\n<pre><code>&lt;a:Action&gt;http://abc&lt;/a:Action&gt;\n&lt;a:To&gt;http://xyz&lt;/a:To&gt;\n</code></pre>\n\n<p>I don't know exact configuration of the server but I believe it is Windows server as is my development box. Does the same code generates different messages on two different machines or how else would I achieve this? I should also say it worked fine for several weeks and stopped last Monday.</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1124,"score":0,"question_id":4035523,"title":"WCF: Fix the Endpoint Address When Using externalMetadataLocation","body":"<p>WCF allows you to specify an external WSDL file that should be published with the service rather than WCF's generated WSDL.  In a WSDL-first design approach, it makes a lot of sense to publish the source WSDL rather than the generated WSDL.</p>\n\n<p>This is set using the externalMetadataLocation:</p>\n\n<pre><code>&lt;serviceBehaviors&gt;\n  &lt;behavior&gt;\n    &lt;serviceMetadata httpGetEnabled=\"true\" externalMetadataLocation=\"path_to_my_wsdl.wsdl\"/&gt;\n    &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n  &lt;/behavior&gt;\n&lt;/serviceBehaviors&gt;\n</code></pre>\n\n<p>The problem I'm encountering is that when I do this, it serves the WSDL straight-up, which has the wrong endpoint address.  I want the endpoint address to be replaced at run-time with the real endpoint address of the service (which will differ depending on where it is deployed).</p>\n\n<p>Is there an easy way to do this?</p>\n"},{"tags":["c#","javascript","asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":96,"score":3,"question_id":13236592,"title":"Website running JavaScript setInterval starts to fail after ~1day","body":"<p>I wish I could be more specific here, but unfortunately this might be hard. I basically hope this is some \"well\"-known timeout or setup issue.</p>\n\n<p>We have a website running an (JS/html - ASP.net project) website overview on a screen at a factory. This screen has no keyboard so it should keep refreshing the page forever - years perhaps (though 1 week might be okay).\n(It is used by factory workers to see incoming transports etc.)</p>\n\n<p>This all works perfectly; the site continuously updates itself and gets the new correct data.\nThen, sometimes, in the morning this \"overview\" screen has no data and the workers have to manually refresh the site using the simple refresh button or F5 - which fixes everything.</p>\n\n<p>I have tried a few things trying to reproduce the error myself including:</p>\n\n<ol>\n<li>Cutting the internet  connection and MANY other ways of making it timeout (breakpoints, stopping services etc.).</li>\n<li>Setting the refresh time of setInterval to 100ms and letting the site run 3-5 minutes. (normal timer is 1 minute)</li>\n<li>setInterval SHOULD run forever according to the internet searching I have done.</li>\n<li>Checked that \"JavaScript frequency\" has not been turned down in power saving settings.</li>\n</ol>\n\n<p>No matter what; the site resumes correct function WITHOUT a refresh as soon as I plug in the internet cable or whatever again - I can't reproduce the error.</p>\n\n<p>The website is dependent on a backend WCF service and project integration, but since the workers are fixing this with a simple refresh I am assuming this has not crashed.</p>\n\n<p>EDIT: The browser I tried to reproduce the error in was IE/win7. I will ask about the factory tomorrow, but I am guessing IE/win? also.</p>\n\n<p>Is setInterval in fact really infinite or is there something else wrong here?</p>\n\n<p>All help much appreciated. 0.5 bitcoin reward for solving answer ;)</p>\n\n<p>UPDATE:\nI came in this morning after leaving the website running in debug mode with a breakpoint in the catch clause of the site updating code.\nThere was a 2 min. timeout error (busy server cleanup during the night likely) and THEN forever after that a null-reference error at this line:</p>\n\n<pre><code>var showHistory = (bool)Session.Contents[\"ShowHistory\"];\n</code></pre>\n\n<p>I fixed it with a refresh like the workers.\nI am now thinking it may be a session timeout all though we keep pinging the server..\nOf course my particular session timeout may have been caused by the breakpoint making it hang forever at the first timeout - still the behavior is the same as at the factory.\nI will make sure to update you guys with the final solution later.</p>\n"},{"tags":["c#","wcf","serialization","exception-handling","datacontract"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13245917,"title":"DataContract runtime error - Type 'myType' cannot be serialized. What i'm doing wrong?","body":"<p>Trying to pass \"complex\" class type that contains primitive types with interfaces and lists of interfaces/classes.</p>\n\n<p>I guess the problematic member is:</p>\n\n<pre><code>public List&lt;IMyInterface&gt; IntrfList\n</code></pre>\n\n<p>Runtime Error:</p>\n\n<blockquote>\n  <p>An error occurred while receiving the HTTP response to http:/localhost/xxxxxx/xxxxxService.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.</p>\n</blockquote>\n\n<p>The descriptive error from MS Service Trace Viewer (SvcTraceViewer):</p>\n\n<blockquote>\n  <p>Type 'myType' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute.  If the type is a collection, consider marking it with the CollectionDataContractAttribute.  See the Microsoft .NET Framework documentation for other supported types.</p>\n</blockquote>\n\n<p>I did as the explanation suggests but didn't help.</p>\n\n<p>The \"shared\" class:</p>\n\n<pre><code>[System.Runtime.Serialization.DataContract]\n    public class ServerState\n    {\n        private Queue&lt;IJob&gt; _mWaitingQueue;\n        public Queue&lt;IJob&gt; mWaitingQueue\n        {\n            get\n            {\n                lock (_LockObjWaiting)\n                {\n                    return _mWaitingQueue;\n                }\n            }\n            private set\n            {\n                _mWaitingQueue = value;\n            }\n        }\n        private object _LockObjWaiting = new object();\n\n        private List&lt;IJob&gt; _mInPrograssList = new List&lt;IJob&gt;();\n\n        [DataMember]\n        public List&lt;IJob&gt; mInPrograssList\n        {\n            get\n            {\n                    return _mInPrograssList;\n            }\n            private set\n            {\n                _mInPrograssList = value;\n            }\n        }\n}\n</code></pre>\n\n<p>IJob is an interface.\nThe structure of IJob is like this:</p>\n\n<pre><code>IJob (Interface)\n  - JobBase (Abstract class)\n    - JobA (Driven from JobBase)\n    - JobB (Driven from JobBase)\n</code></pre>\n"},{"tags":["wcf","web-services","soap","wsdl","wcf-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13208232,"title":"WCF routing and service metadata","body":"<p>I'm building a WCF router which needs to act as a proxy for a number of internal web services (WCF and ASMX). The routing part is fairly straight-forward, but I can't understand how the service metadata exchange would work in this solution.</p>\n\n<p>In other words: how would a client obtain metadata for an internal service behind the router? Do I need to manually supply WSDL files to the consumer? Can I somehow setup the router to return the metadata for an appropriate internal service?</p>\n\n<p>Or perhaps my architecture is completely wrong?</p>\n"},{"tags":[".net","wcf","architecture","windows-services","cloud"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13244604,"title":"Architecture to manage multiple instances of a worker?","body":"<p>What architecture should I go for? There is a worker process which takes messages off a queue and does processing one by one. Now I can have many windows service instances do this job, or I can have one WCF service hosted as a windows service to act as some sort of a server on which I can start a thread for each instance.</p>\n\n<p>Which approach would scale better? I want viewpoints when we are talking about cloud like infrastructure where scaling is very quick, as well as, non-cloud based infrastructure.</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":14,"score":-2,"question_id":13246881,"title":"How to trace what xml is getting pass from client to server when we call wcf service","body":"<p>i got instructed that i can inspect and see the xml by this way</p>\n\n<h2>instruction here</h2>\n\n<p>I think you meant that you want to see the XML at the client, not trace it at the server. In that case, your answer is in the question I linked above, and also at How to Inspect or Modify Messages on the Client. But, since the .NET 4 version of that article is missing its C#, and the .NET 3.5 example has some confusion (if not a bug) in it, here it is expanded for your purpose.</p>\n\n<p>You can intercept the message before it goes out using an IClientMessageInspector:</p>\n\n<pre><code>using System.ServiceModel.Dispatcher;\npublic class MyMessageInspector : IClientMessageInspector\n{ }\n</code></pre>\n\n<p>The methods in that interface, BeforeSendRequest and AfterReceiveReply, give you access to the request and reply. To use the inspector, you need to add it to an IEndpointBehavior:</p>\n\n<pre><code>using System.ServiceModel.Description;\npublic class InspectorBehavior : IEndpointBehavior\n{\npublic void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)\n{\n    clientRuntime.MessageInspectors.Add(new MyMessageInspector());\n}\n}\n</code></pre>\n\n<p>You can leave the other methods of that interface as empty implementations, unless you want to use their functionality, too. Read the how-to for more details.</p>\n\n<p>After you instantiate the client, add the behavior to the endpoint. Using default names from the sample WCF project:</p>\n\n<pre><code>ServiceReference1.Service1Client client = new ServiceReference1.Service1Client();\nclient.Endpoint.Behaviors.Add(new InspectorBehavior());\nclient.GetData(123);\n</code></pre>\n\n<p>Set a breakpoint in MyMessageInspector.BeforeSendRequest(); request.ToString() is overloaded to show the XML.</p>\n\n<p>If you are going to manipulate the messages at all, you have to work on a copy of the message. See Using the Message Class for details.</p>\n\n<p>when i use Endpoint then i am getting error. any help.</p>\n"},{"tags":["c#","wpf","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13239160,"title":"WCF Service TargetInvocationException - Possible Cyclic Reference","body":"<p>I need a little help with an Exception being thrown at my WCF service. The point is: I need to develop a WPF application and I've heard that to treat data WCF is the best choice so I used it only with basic knowledge and now I have this problem.</p>\n\n<p>The point is, I have a Customer class, a Supplier class and an Order class. I have then two services: the first one has all methods to add, read and edit customers and suppliers from database. This service works perfectly fine. The second service has methods to add new orders, edit orders and read them from database, and this service has a problem.</p>\n\n<p>The class Customer has a list of Suppliers (the suppliers from which the customer buys), the class Supplier has a list of Customers (the customers that buy from that supplier). The class order has a Customer, a Supplier and a list of Itens (and the itens are added to the database together with the order).</p>\n\n<p>The method for adding an order works fine, however, once an order has been added, the method to list the orders throws the TargetInvocationException. I searched a lot on the internet and the best answer I've found is that it's possibly a \"Ciclyc Reference\".</p>\n\n<p>The method to list the orders is inside the repository class and is simply:</p>\n\n<pre><code>public IQueryable&lt;Order&gt; ListOrders()\n{\n    return Context.Set&lt;Order&gt;().Include(x =&gt; x.Customer).Include(x =&gt; x.Supplier);\n}\n</code></pre>\n\n<p>Where Context is the entity framework context. I tried to remove the includes and load the customer and supplier separately, but the result was the same exception.</p>\n\n<p>Can someone please help me ? If I need to post more information just tell me. And sorry if this matter is trivial, I'm new to WPF and WCF so I'm still a little confused.</p>\n\n<p>Thanks a lot in advance.</p>\n\n<p><strong>EDIT</strong> Exception below</p>\n\n<blockquote>\n  <p>An error occurred while receiving the HTTP response to\n  <a href=\"http://SomeService.com/OrdersService.svc\" rel=\"nofollow\">http://SomeService.com/OrdersService.svc</a>. This could be due to the\n  service endpoint binding not using the HTTP protocol. This could also\n  be due to an HTTP request context being </p>\n  \n  <p>aborted by the server (possibly due to the service shutting down). See\n  server logs for more details.</p>\n  \n  <p>Server stack trace:     at\n  System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException\n  webException, HttpWebRequest request, HttpAbortReason abortReason)<br>\n  at\n  System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.RequestChannel.Request(Message message,\n  TimeSpan timeout)    at\n  System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message\n  message, TimeSpan timeout)    at\n  System.ServiceModel.Channels.ServiceChannel.Call(String action,\n  Boolean oneway, ProxyOperationRuntime operation, Object[] ins,\n  Object[] outs, TimeSpan timeout)    at\n  System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage\n  methodCall, ProxyOperationRuntime operation)    at\n  System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage\n  message)</p>\n  \n  <p>Exception rethrown at [0]:     at\n  System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage\n  reqMsg, IMessage retMsg)    at\n  System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;\n  msgData, Int32 type)    at IOrdersService.ReturnOrders()    at\n  OrdersServiceClient.ReturnOrders()</p>\n  \n  <p>Inner Exception: The underlying connection was closed: An unexpected\n  error occurred on a receive.    at\n  System.Net.HttpWebRequest.GetResponse()    at\n  System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan\n  timeout)</p>\n  \n  <p>Inner Exception: Unable to read data from the transport connection: An\n  existing connection was forcibly closed by the remote host.    at\n  System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset,\n  Int32 size)    at System.Net.PooledStream.Read(Byte[] buffer, Int32\n  offset, Int32 size)    at\n  System.Net.Connection.SyncRead(HttpWebRequest request, Boolean\n  userRetrievedStream, Boolean probeRead)</p>\n  \n  <p>Inner Exception: An existing connection was forcibly closed by the\n  remote host    at System.Net.Sockets.Socket.Receive(Byte[] buffer,\n  Int32 offset, Int32 size, SocketFlags socketFlags)    at\n  System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset,\n  Int32 size)</p>\n</blockquote>\n"},{"tags":["json","wcf","rest"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13225272,"title":"Force WCF Rest client to use Json deserializer regardless of content-type","body":"<p>How to force WCF Rest client to use Json deserializer regardless of content-type?</p>\n\n<p>I am invoking a REST based web service through WCF.</p>\n\n<p>The service returns JSON body, but has content-type \"Application/xml\". The WCF framework is now giving me the XmlException.</p>\n\n<pre><code>public class MessageFormatter : IClientMessageFormatter\n{\n    private readonly IClientMessageFormatter _formatter;\n\n    public MessageFormatter(IClientMessageFormatter formatter)\n    {\n        _formatter = formatter;\n    }\n\n    public object DeserializeReply(System.ServiceModel.Channels.Message message, object[] parameters)\n    {\n        return _formatter.DeserializeReply(message, parameters);\n    }\n}\n</code></pre>\n\n<p>that _formatter.DeserializeReply is throwing XmlException. I can't find any example anywhere to force json deserialization on reply.</p>\n\n<p>Edit - The \"message\" object when moused over is throwing \"{... Error reading body: System.Xml.XmlException: The data at the root level is invalid. Line 1, position 1. ...}\"</p>\n\n<p>That same object in another one of my project that communicate with a different REST service (Picasa web services) has a what seems like a xml serialised version of JSON object?? So the problem seems further up the stream. I need to find where this object is originating from. I'll go play around with MessageEncoder class.</p>\n\n<p>Edit - (Adding more info)</p>\n\n<pre><code>public class MyBinding : WebHttpBinding\n{\n    public MyBinding(WebHttpSecurityMode mode)\n        : base(mode)\n    {\n\n    }\n\n    public override BindingElementCollection CreateBindingElements()\n    {\n        var result = base.CreateBindingElements();\n\n        var replacements = result.OfType&lt;MessageEncodingBindingElement&gt;().ToList();\n        foreach (var messageEncodingBindingElement in replacements)\n        {\n            var index = result.IndexOf(messageEncodingBindingElement);\n            result.Remove(messageEncodingBindingElement);\n            result.Insert(index, new MyMessageEncodingBindingElement(messageEncodingBindingElement));\n        }\n\n        return result;\n    }\n}\n\npublic class MyMessageEncodingBindingElement : MessageEncodingBindingElement\n{\n    private readonly MessageEncodingBindingElement _element;\n\n    public MyMessageEncodingBindingElement(MessageEncodingBindingElement element)\n    {\n        _element = element;\n    }\n\n    public override BindingElement Clone()\n    {\n        var result = _element.Clone();\n\n        if (result is MessageEncodingBindingElement)\n            return new MyMessageEncodingBindingElement(result as MessageEncodingBindingElement);\n\n        return result;\n    }\n\n    public override MessageEncoderFactory CreateMessageEncoderFactory()\n    {\n        return new MyMessageEncoderFactory(_element.CreateMessageEncoderFactory());\n    }\n}\n</code></pre>\n\n<p>The method CreateMessageEncoderFactory() is never called even when the constructor and Clone method are hit when breakpoints are set. Any help? I'm trying to set a custom MessageEncoder and MessageEncoderFactory class to modify the instantiation process of the Message object.</p>\n"},{"tags":["c#","wcf","cors"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":13228995,"title":"WCF error : 405 Method Not Allowed","body":"<p>Going nuts with this issue. I have a solution with 2 projects, one of them is a plain old html with jquery ajax call while the other is a WCF service. The html page will issue a ajax call to the WCF service to get a json string and use it for display purpose.</p>\n\n<p>Now the issue is whenever i run in debug mode, both the html page and the WCF will be started with different port. And this has created a cross-origin issue for me when i perform testing (i.e. getting a 405 Method Not Allowed error with the calling type = OPTIONS in Firefox). I'd triple check the call method on my ajax script and the WCF service is the same (GET).</p>\n\n<p>I'd search google but found that either i have to install a extension or perform some configuration on IIS, which i found cumbersome since what i'm doing is something simple. Following one example, I'd add in the following configuration in my web.config but it didn't work:</p>\n\n<pre><code>    &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"crossDomain\" crossDomainScriptAccessEnabled=\"true\" /&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"MobileService.webHttpBehavior\"&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"MyServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"  /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service name=\"MobileService.SimpleMemberInfo\" behaviorConfiguration=\"MyServiceBehavior\"&gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" contract=\"MobileService.IMemberInfo\" bindingConfiguration=\"crossDomain\" behaviorConfiguration=\"MobileService.webHttpBehavior\"&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;httpProtocol&gt;\n      &lt;customHeaders&gt;\n        &lt;add name=\"Access-Control-Allow-Origin\" value=\"*\" /&gt;\n        &lt;add name=\"Access-Control-Allow-Methods\" value=\"GET\" /&gt;\n        &lt;add name=\"Access-Control-Allow-Headers\" value=\"Content-Type, Accept\" /&gt;\n      &lt;/customHeaders&gt;\n    &lt;/httpProtocol&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n    &lt;/system.webServer&gt;\n</code></pre>\n\n<p>Any one has any idea to get rid of this annoying issue?</p>\n\n<p><strong>EDIT:</strong> Just to add, I'm running the debug with IIS Express that comes together with the VS Studio 2012</p>\n\n<p><strong>Add in WCF Code and Updated web.config</strong></p>\n\n<pre><code>[ServiceContract]\npublic interface IMemberInfo\n{\n    [WebInvoke(Method = \"GET\",\n           BodyStyle = WebMessageBodyStyle.Wrapped,\n           ResponseFormat = WebMessageFormat.Json\n    )]\n    [OperationContract]\n    string GetMemberInfoById();\n    // TODO: Add your service operations here\n}\n</code></pre>\n\n<p>My Script:</p>\n\n<pre><code>$(document).ready(function () {\n    $.ajax(\"http://localhost:32972/SimpleMemberInfo.svc/GetMemberInfoById\", {\n        cache: false,\n        beforeSend: function (xhr) {\n            $.mobile.showPageLoadingMsg();\n        },\n        complete: function () {\n            $.mobile.hidePageLoadingMsg();\n        },\n        contentType: 'application/json',\n        dataType: 'json',\n        type: 'GET',\n        error: function () {\n            alert('Something awful happened');\n        },\n        success: function (data) {\n            var s = \"\";\n\n            s += \"&lt;li&gt;\" + data + \"&lt;/li&gt;\";\n            $(\"#myList\").html(s);\n\n        }\n    });\n});\n</code></pre>\n"},{"tags":["jquery","asp.net","wcf","datetime"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12645147,"title":"WCF is changing my DateTime returned from a jQuery .axaj call in JSON format","body":"<p>I know this question has been asked many times here, but no answer has provided me with a solution yet. Please help, I'm beating my head against the wall.</p>\n\n<p>Problem:\nI have a simple ASP.NET web forms app with one page - Default.aspx. This page has jQuery, JSON2, Rick Strahl's ServiceProxy.js, and my javascript file referenced (timezone.js). In the same project I have a WCF service that I call from timezone.js using ServiceProxy (which is a convenient wrapper around jQuery's .ajax POST). The call should return an object that has a DateTime property. I am testing on two client machines in different time zones and getting different results. \nHere are the screenshots of the app hosted is IIS:</p>\n\n<p>EDIT: Looks like StackOverflow isn't letting me post images. Here is the rendered text...</p>\n\n<p>On the GMT machine I get:\nDate rendered by js from WCF call: <b>Fri Sep 28 13:30:00 UTC+0100 2012</b></p>\n\n<p>On the Eastern Standard Time machine I get: Date rendered by js from WCF call: \n<b>Fri Sep 28 08:30:00 EDT 2012</b></p>\n\n<p>As you can see on the right side of both screenshots, the WCF call results in different times.</p>\n\n<p>I want complete control over what dates are sent back and I'm this close to converting it to a string on the server and parsing the string in javascript. I also must use POST to a WCF Enabled Ajax Service.</p>\n\n<p>Here is the code behind for Default.aspx</p>\n\n<pre><code>public class DateContainerObject\n{\n    public DateTime theDate { get; set; }\n}\n\npublic static class DateMaker\n{\n    public static DateContainerObject MakeDateObj()\n    {\n        DateContainerObject obj = new DateContainerObject();\n        DateTime origUTCDate = new DateTime(2012, 9, 28, 13, 30, 0);\n        DateTime newKindDate = DateTime.SpecifyKind(origUTCDate, DateTimeKind.Unspecified);\n        obj.theDate = newKindDate;\n\n        return obj;\n    }\n}\n\npublic partial class Default : System.Web.UI.Page\n{\n    protected void Page_Load(object sender, EventArgs e)\n    {\n        Literal1.Text = DateMaker.MakeDateObj().theDate.ToString();\n    }\n}\n</code></pre>\n\n<p>Here is the WCF Service code:</p>\n\n<pre><code>[ServiceContract(Namespace = \"\")]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class TimeZoneService\n{\n    [OperationContract]\n    public DateContainerObject GetDateObject()\n    {\n        return DateMaker.MakeDateObj();\n    }\n}\n</code></pre>\n\n<p>This is the timezone.js code:</p>\n\n<p>$(function () {</p>\n\n<pre><code>var dObj = {};\nvar proxy = new ServiceProxy(\"/TimeZoneService.svc/\", { isWcf: true });\nproxy.invoke(\"GetDateObject\",\n        dObj,\n        function (result) {\n            $('#spanDateJSRender').text(result.theDate);\n        },\n        function (e) {\n            alert(e);\n        },\n        function () { },\n        false\n        );\n</code></pre>\n\n<p>});</p>\n\n<p>I've tried specifying the DateTimeKind to all different values, but it doesn't give me accurate date and time. I've also tried using DateTimeOffset and I get the same results.\nWhat can I do with this example to get the exact DateTimes that are created on the server to render in the browser?\nThanks for your help.</p>\n"},{"tags":["winforms","wcf","permissions","hosting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":128,"score":1,"question_id":7259263,"title":"WCF Winform Hosting","body":"<p>I have a WCF service hosted in a Winforms application, it's running on a vista machine and I've used netsh to allow the application to listen on port 6003.</p>\n\n<p>I have a client application which can call the WCF service when it is running on the same machine.</p>\n\n<p>The problem is I cannot access the WCF service from any other PC on the network.</p>\n\n<p>I've run netstat and it's definately listening on the port.</p>\n\n<p>I'm using the basicHttpBinding, and it's .Net 4.</p>\n\n<p>Any help would be great.</p>\n\n<p>Regards</p>\n\n<p>Steve</p>\n"},{"tags":["wcf","sql-server-2008-r2","sql-server-ce","microsoft-sync-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13229376,"title":"The underlying connection was closed: The connection was closed unexpectedly","body":"<p>I am using Visual Studio 2010 &amp; SQL Server 2008 R2. I have created a project to sync SQL Server CE (<code>*.sdf</code>) file to SQL Server using a WCF service.</p>\n\n<p>It is working fine when I have small SQL Server CE file (18 MB) but when I tried to sync using a large SQL Server CE file (38 MB) then an error happens.</p>\n\n<p>I have increased size of many parameters in <code>web.config</code> of the WCF service &amp; <code>app.config</code> of my application.</p>\n\n<p>But the error keeps occurring.....</p>\n\n<blockquote>\n  <p><em>The underlying connection was closed: The connection was closed\n  unexpectedly.</em></p>\n  \n  <p><em>StackTrace :</em>  </p>\n  \n  <p>at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)<br>\n  at System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)<br>\n  at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)<br>\n  at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)<br>\n  at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)<br>\n  at Microsoft.Synchronization.Data.ServerSyncProviderProxy.GetChanges(SyncGroupMetadata groupMetadata, SyncSession syncSession)<br>\n  at Microsoft.Synchronization.SyncAgent.DownloadChanges(SyncGroupMetadata groupMetadata)<br>\n  at Microsoft.Synchronization.SyncAgent.DataSynchronize()<br>\n  at Microsoft.Synchronization.SyncAgent.Synchronize()<br>\n  at SyncSample.AccountsListing.btnSync_Click(Object sender, EventArgs e)  </p>\n</blockquote>\n"},{"tags":["wcf","service","intellisense"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1068,"score":1,"question_id":2507889,"title":"Type not exposed by WCF Service","body":"<p>I have a small test web service to emulate something odd I'm noticing in a real world app. As the demo shows the same behaviour as the app I will use the demo for brevity.</p>\n\n<p>In short My service interface file looks as follows (as you can see it is the default WCF service created by VS2008 but I have added a new public method (GetOtherType()) and two new classes at the bottom (SomeOtherType and SomeComplexType). SomeOtherType manages a generic List of type SomeComplexType</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.Text;\n\nnamespace WCFServiceTest\n{\n\n    [ServiceContract]\n    public interface IService1\n    {\n        [OperationContract]\n        string GetData(int value);\n\n        [OperationContract]\n        CompositeType GetDataUsingDataContract(CompositeType composite);\n\n        [OperationContract]\n        SomeOtherType GetOtherType();\n\n    }\n\n\n    [DataContract]\n    public class CompositeType\n    {\n        bool boolValue = true;\n        string stringValue = \"Hello \";\n\n        [DataMember]\n        public bool BoolValue\n        {\n            get { return boolValue; }\n            set { boolValue = value; }\n        }\n\n        [DataMember]\n        public string StringValue\n        {\n            get { return stringValue; }\n            set { stringValue = value; }\n        }\n    }\n\n    [DataContract]\n    public class SomeOtherType\n    {\n        public List&lt;SomeComplexType&gt; Items { get; set; }    \n    }\n\n    [DataContract]\n    public class SomeComplexType\n    {\n\n    }\n}\n</code></pre>\n\n<p>My Service is implemented as follows</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.Text;\n\nnamespace WCFServiceTest\n{\n\n    public class Service1 : IService1\n    {\n\n\n        #region IService1 Members\n\n        public string GetData(int value)\n        {\n            throw new NotImplementedException();\n        }\n\n        public CompositeType GetDataUsingDataContract(CompositeType composite)\n        {\n            throw new NotImplementedException();\n        }\n\n        #endregion\n\n        #region IService1 Members\n\n\n        public SomeOtherType GetOtherType()\n        {\n            throw new NotImplementedException();\n        }\n\n        #endregion\n    }\n}\n</code></pre>\n\n<p>The problem I have is that if I include a service reference to this service in an ASP.NET Web Application, I cannot see SomeComplexType via intellisense. The error relates to the type or namespace cannot be found. However, SomeOtherType can be found (I'm assuming as the type is a return type from one of the public methods).</p>\n\n<p>Am I right in thinking I can't expose a type from a WCF Service if that type is not featured in the method signature of one of my public methods (either return type or argument)? If so, how would I be able to iterate over the Items inside an instance of SomeOtherType on the client?</p>\n\n<p>Many Thanks and I hope this is clear.</p>\n\n<p>Simon</p>\n"},{"tags":["wcf","wcf-client","svcutil.exe"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13091195,"title":"access wsdl file and display methods and parameters in c#","body":"<p>Hello I am very new to WCF Services kindly excuse me for wrong terminology. I need to display all the methods in a list and when the method is selected I need to show the parameters so the user can enter the parameter value like id and name so that we can invoke the service and compare the result with expected and actual result.</p>\n\n<p>Note: the user will only provide the WSDL URL, and from there I can generate a dynamic proxy because our services usually change using (http://blogs.msdn.com/b/vipulmodi/archive/2006/11/16/dynamic-programming-with-wcf.aspx).</p>\n\n<p>How do I get the operation and parameter types so that we can generate client and invoke service with the parameters. Just want to display methods get the values for parameters from user and invoke the service in a C# windows application.</p>\n"},{"tags":["wcf","iis7","msmq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13241423,"title":"MSMQ + WCF, IIS7 - Messages are being journaled, but never hitting the service","body":"<p>Standard set up I think. I've followed: <a href=\"http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx</a> mainly, but used other sources as needed.</p>\n\n<p>So far here is what happens:</p>\n\n<ol>\n<li>Client sends a message</li>\n<li>I see the message in the Journal Messages for the appropriate queue</li>\n<li>Service never seems to be called. I have a ton of logging that would output logs on service called and / or errors in the service method.</li>\n</ol>\n\n<p>I have shut down the service and the message still ends up in the Journal Messages - not sure why that is.</p>\n\n<p>Queue: bretrace/bretraceservice.svc (anonymous access, with full permissions granted)</p>\n\n<p>Client Web.config</p>\n\n<pre><code>&lt;netMsmqBinding&gt;\n    &lt;binding name=\"MsmqBreTrace\" receiveErrorHandling=\"Move\"&gt;\n        &lt;security mode=\"None\" /&gt;\n    &lt;/binding&gt;\n&lt;/netMsmqBinding&gt;\n\n&lt;endpoint address=\"net.msmq://wcfserver/private/bretrace/bretraceservice.svc\" binding=\"netMsmqBinding\"\n    bindingConfiguration=\"MsmqBreTrace\" name=\"MsmqBreTraceService\"\n    contract=\"C.BusinessRuleController.Services.BoschProxy.Trace.IQueuingTraceContract\"/&gt;\n</code></pre>\n\n<p>Service Web.config</p>\n\n<pre><code>&lt;bindings&gt;\n    &lt;netMsmqBinding&gt;\n        &lt;binding name=\"MsmqBreTraceReader\" receiveErrorHandling=\"Move\"&gt;\n            &lt;security mode=\"None\" /&gt;\n        &lt;/binding&gt;\n    &lt;/netMsmqBinding&gt;\n&lt;/bindings&gt;\n&lt;services&gt;\n    &lt;service name=\"C.BusinessRuleController.Services.QR.BreTraceService\"&gt;\n        &lt;endpoint address=\"\"\n            binding=\"netMsmqBinding\" bindingConfiguration=\"MsmqBreTraceReader\"\n            contract=\"C.BusinessRuleController.Services.BoschProxy.Trace.IQueuingTraceContract\" /&gt;\n    &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<p>I have also activated system.diagnostics, and it seems to be calling the service, under activity I see:</p>\n\n<ul>\n<li>\"Process Action: 'http://tempuri.org/IQueuingTraceContract/LogTrace'.\" <strong>I'm not sure if the tempuri.org is a problem or not?</strong></li>\n<li><p>\"Execute C.BusinessRuleController...\" as another activity.</p>\n\n<p>\n   \n     \n       \n         \n       \n     \n     \n       \n         \n       \n     \n     \n       \n         \n       \n     \n   \n   \n     \n   \n  </p></li>\n</ul>\n"},{"tags":["wcf","streaming","buffering","maxreceivedmessagesize"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":13127388,"title":"WCF Streaming and maxReceivedMessageSize","body":"<p>Why is the maxReceivedMessageSize property relevant when implementing WCF Streaming? Since buffering and persistence is handled by the consumer of the stream, why does WCF concern itself with how big or long a single service operation could take?</p>\n\n<p>I'm working on a project which could handle large files from server to client and back. I figured WCF streaming is an excellent choice as it SHOULD allow for theoretically infinite file sizes to be handled. Both my client and server have transportMode (on the binding) set to \"Streamed\" and messages designed to contain Streams. This is not enough, however, as I get a CommunicationException indicating I need to increase the maxReceivedMessageSize property. Following the exception's advice, increasing the property magically allows everything to work perfectly. </p>\n\n<p>I'm concerned that WCF is forcing me to \"cap\" how much my service/client can handle even though streaming is supposed to be \"infinite.\" If a file comes along that happens to be bigger than my binding's config, the same CommunicationException will occur. I don't see why WCF is arbitrarily limiting my capacity to handle large files, \"when\" and \"how\" I send and store these files is now \"my\" business because I have a stream to consume however I wish.</p>\n\n<p>Am I missing something?</p>\n"},{"tags":["asp.net","wcf","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13238525,"title":"WCF Update Service Reference fails","body":"<p>When trying to update service reference I get following error - </p>\n\n<p><img src=\"http://i.stack.imgur.com/GQQ1l.png\" alt=\"enter image description here\"></p>\n\n<p>I read guide-line at many places that we should checkin only <code>Reference.cs</code>. But I have checked in other ServiceReference files, (like wsdl, xsd etc) as well.</p>\n\n<p>Can this be a cause of UpdateService Reference to failure?</p>\n"},{"tags":[".net","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13239556,"title":"Windows Communication Foundation (WCF) can be assumed as Middlware Technology","body":"<p>I have know that Windows Communication Foundation (WCF) is a code library to connect between different applications. I have once used Inter-Process Communication technology to connect two different applications written in two different languages (vb.net and C#.net). Therefore, I want to know that </p>\n\n<p>Windows Communication Foundation (WCF) of .Net Framework can be assumed as Middleware Technology for .Net Applications?</p>\n"},{"tags":["wcf","handler","nservicebus","calling","saga"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13233714,"title":"NServiceBus Saga/Handler Calling Wcf Service","body":"<p>Is anyone able to help me correctly call a Wcf service from within an NServiceBus Saga\\Handler?</p>\n\n<p>Presently I am making a synchronous call from within a Handler.  </p>\n\n<p>However, IIRC, in a while ago on the NServiceBus documentation pages it recommended using a Saga but provided no further details.</p>\n\n<p>My understanding is that a Saga is preferred as it can be persisted while the Wcf call is being processed and then resumed to receive the response.\n(The only other thought is that a Saga is preferred as they are generally longer running than Handlers).</p>\n\n<p>What I need help with is the most appropriate way to resume the Saga instance on the reply from the Wcf service.</p>\n\n<p>Thanks\nMark</p>\n"},{"tags":["wcf","timeout"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":835,"score":2,"question_id":9567999,"title":"WCF service timeout","body":"<p>Is there a way to set a tiemout on the service side so that the request stops processing if it exceeds the timeout?  I know I can time the request out on the client side, but that doesn't stop the processing of the request on the server.</p>\n\n<p>I've tried adding the following binding:</p>\n\n<pre><code>&lt;basicHttpBinding&gt;\n    &lt;binding name=\"timeout\" receiveTimeout=\"00:01:00\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" sendTimeout=\"00:01:00\" /&gt;\n&lt;/basicHttpBinding&gt;\n</code></pre>\n\n<p>I've also tried adding the following in the system.web node (separately and together with the above):</p>\n\n<pre><code>&lt;httpRuntime executionTimeout=\"60\" /&gt; &lt;!-- timeout after 60 seconds --&gt;\n</code></pre>\n"},{"tags":["java","wcf","wsdl","biztalk"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":26,"score":3,"question_id":13225327,"title":"Importing key/value complexType definition from WSDL in WCF and Biztalk","body":"<p>I've been struggling with this for days without any idea in how to solve it. Basically I have the following WSDL service definition:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;&lt;!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. --&gt;&lt;!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. --&gt;&lt;definitions xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" xmlns:wsp=\"http://www.w3.org/ns/ws-policy\" xmlns:wsp1_2=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:tns=\"http://sample.org/schemas/2012\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://schemas.xmlsoap.org/wsdl/\" targetNamespace=\"http://sample.org/schemas/2012\" name=\"SampleServiceImplService\"&gt;\n&lt;types&gt;\n&lt;xsd:schema&gt;\n&lt;xsd:import namespace=\"http://sample.org/schemas/2012\" schemaLocation=\"http://localhost:8080/sampleServices_war_exploded/sample?xsd=1\"/&gt;\n&lt;/xsd:schema&gt;\n&lt;/types&gt;\n&lt;message name=\"ExecuteSample\"&gt;\n&lt;part name=\"parameters\" element=\"tns:ExecuteSample\"/&gt;\n&lt;/message&gt;\n&lt;message name=\"ExecuteSampleResponse\"&gt;\n&lt;part name=\"parameters\" element=\"tns:ExecuteSampleResponse\"/&gt;\n&lt;/message&gt;\n&lt;message name=\"SampleException\"&gt;\n&lt;part name=\"fault\" element=\"tns:SampleException\"/&gt;\n&lt;/message&gt;\n&lt;portType name=\"SampleService\"&gt;\n&lt;operation name=\"ExecuteSample\"&gt;\n&lt;input wsam:Action=\"http://sample.org/schemas/2012/SampleService/ExecuteSampleRequest\" message=\"tns:ExecuteSample\"/&gt;\n&lt;output wsam:Action=\"http://sample.org/schemas/2012/SampleService/ExecuteSampleResponse\" message=\"tns:ExecuteSampleResponse\"/&gt;\n&lt;fault message=\"tns:SampleException\" name=\"SampleException\" wsam:Action=\"http://sample.org/schemas/2012/SampleService/ExecuteSample/Fault/SampleException\"/&gt;\n&lt;/operation&gt;\n&lt;/portType&gt;\n&lt;binding name=\"SampleServiceImplPortBinding\" type=\"tns:SampleService\"&gt;\n&lt;soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\" style=\"document\"/&gt;\n&lt;operation name=\"ExecuteSample\"&gt;\n&lt;soap:operation soapAction=\"\"/&gt;\n&lt;input&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/input&gt;\n&lt;output&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/output&gt;\n&lt;fault name=\"SampleException\"&gt;\n&lt;soap:fault name=\"SampleException\" use=\"literal\"/&gt;\n&lt;/fault&gt;\n&lt;/operation&gt;\n&lt;/binding&gt;\n&lt;service name=\"SampleServiceImplService\"&gt;\n&lt;port name=\"SampleServiceImplPort\" binding=\"tns:SampleServiceImplPortBinding\"&gt;\n&lt;soap:address location=\"http://localhost:8080/sampleServices_war_exploded/sample\"/&gt;\n&lt;/port&gt;\n&lt;/service&gt;\n&lt;/definitions&gt;\n</code></pre>\n\n<p>With the following accompanied XSD file definition:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;&lt;!-- Published by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.2.0-1 (tags/2.2.0u1-7139; 2012-06-02T10:55:19+0000) JAXWS-RI/2.2.6-2 JAXWS/2.2 svn-revision#unknown. --&gt;&lt;xs:schema xmlns:tns=\"http://sample.org/schemas/2012\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" version=\"1.0\" targetNamespace=\"http://sample.org/schemas/2012\"&gt;\n&lt;xs:element name=\"ExecuteSample\" type=\"tns:ExecuteSample\"/&gt;\n&lt;xs:element name=\"ExecuteSampleResponse\" type=\"tns:ExecuteSampleResponse\"/&gt;\n&lt;xs:element name=\"SampleException\" nillable=\"true\" type=\"tns:faultInfo\"/&gt;\n&lt;xs:complexType name=\"ExecuteSample\"&gt;\n&lt;xs:sequence&gt;\n&lt;xs:element name=\"name\" type=\"xs:string\" minOccurs=\"0\"/&gt;\n&lt;xs:element name=\"values\"&gt;\n&lt;xs:complexType&gt;\n&lt;xs:sequence&gt;\n&lt;xs:element name=\"entry\" minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n&lt;xs:complexType&gt;\n&lt;xs:sequence&gt;\n&lt;xs:element name=\"key\" minOccurs=\"0\" type=\"xs:string\"/&gt;\n&lt;xs:element name=\"value\" minOccurs=\"0\" type=\"xs:string\"/&gt;\n&lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n&lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n&lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=\"ExecuteSampleResponse\"&gt;\n&lt;xs:sequence/&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=\"faultInfo\"&gt;\n&lt;xs:sequence/&gt;\n&lt;/xs:complexType&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>Ok, the documents looks fine, we define a complexType named ExecuteSample (the request type) that contains two members, name and values, the last one is another complex type with an entry named 'entry' with key and values.</p>\n\n<p>This looks like a dictionary, and in fact is a dictionary. It even uses the 'suggested' way of exposing dictionaries with the only difference that is wrapped inside an 'entry' parameter.</p>\n\n<p>Well, guess what, WCF svcutil neither biztalk can recognize the WSDL. SVCUtil and Visual Studio fails with a very stupid error telling me something like:</p>\n\n<pre><code>Warning 1   Custom tool warning: Cannot import wsdl:portType\nDetail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter\nError: Object reference not set to an instance of an object.\nXPath to Error Source: //wsdl:definitions[@targetNamespace='http://sample.org/schemas/2012']/wsdl:portType[@name='SampleService']   C:\\src\\biztalk\\ConsoleApplication6\\ConsoleApplication6\\Service References\\ServiceReference1\\Reference.svcmap    1   1   ConsoleApplication6\n</code></pre>\n\n<p>The biztalk WSDL import wizard fails without any error message, just telling me that something was wrong...</p>\n\n<p>I've tried everything and looked everything possible in the web, nothing really pops.. I'm desperate and have no idea what the hell is happening, everything looks fine but is not working...</p>\n\n<p>Weird... any idea?</p>\n"},{"tags":["wcf","visual-studio-2012","wssf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13237023,"title":"Web Service Software Factory install with Visual Studio 2012","body":"<p>I have a number of WCF services implemented using Web Service Software Factory from <a href=\"http://servicefactory.codeplex.com\" rel=\"nofollow\">http://servicefactory.codeplex.com</a></p>\n\n<p>All these services were implemented using Visual Studio 2010. Has anyone used Web Service Software Factory with Visual Studio 2012? On the website I see a zip file which has just the source code. I am not sure by the documentation given on the website if there in an install available for visual studio 2012. If it is, how can I install it? Where are the install files available and what order to install them? </p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":10,"score":0,"question_id":13236675,"title":"WPF application calls WCF service method and and then wpf app hangs","body":"<p>I have a wpf application which calls a wcf service method. The method runs fine in debugging mode but the method doesnt return back to the client call.</p>\n\n<pre><code>Here is the code.\nClient:\npublic class Provider\n    {\n        private static ActionServiceClient Client { get; set; }\n        static Provider()\n        {\n            Client = new ActionServiceClient();\n        }\n\n        public UserResponse GetUsers(UserRequest request)\n        {\n            UserResponse resp = new UserResponse();\n            resp = Client.GetUsers(request);\n            return resp;\n        }\n    }\nWCF Service :\n[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Reentrant, UseSynchronizationContext = false)]\n    public class ActionService : IActionService\n    {\n        public MovieResponse GetReviews(MovieRequest request)\n        {\n            List&lt;MovieReview&gt; reviews = DataAccess.GetMovieReviews(0);\n            MovieResponse response = new MovieResponse();\n            response.movieReviews = reviews;\n            return response;\n        }\n\n        public UserResponse GetUsers(UserRequest request)\n        {\n            List&lt;User&gt; users = DataAccess.GetUsers(0);\n            UserResponse resp = new UserResponse();\n            resp.users = users;\n            return resp;\n        }\n\n[DataContract]\n    public class UserResponse\n    {\n        [DataMember]\n        public List&lt;User&gt; users;\n    }\n\n[DataContract]\n    public class UserRequest\n    {\n        [DataMember]\n        public int userId;\n    }\n</code></pre>\n\n<p>I run the program in debug mode and after completion of the service call the wpf application hangs....</p>\n"},{"tags":["wcf","performance","windows-8","winrt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13231754,"title":"Why is my ARM chip/Surface processing WCF calls a lot slower than my i7 laptop, and is there anything I can do to speed it up?","body":"<p>I am diagnostic testing my winRT store application, and am noticing considerable performance differences between my Surface RT device and my i7 laptop.</p>\n\n<p>Now - i know there is a big difference in expected performance between an ARM CPU and an i7 - but when my average WCF web call on my i7 takes ~0.2s, and my surface device takes ~1.2s I am forced to start looking at optimization and improvements. If the performance difference between the two was only a few hundred milliseconds then I wouldn't mind so much, but the surface device does feel a little bit clunky - and the only bottleneck seems to be the services!</p>\n\n<p>Does anyone have an explanation, or even some performance improvements tips? I should mention that I am running the services across basicBinding with binary serialization. </p>\n"},{"tags":["ruby-on-rails","ruby","wcf","nokogiri"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":11521095,"title":"Nokogiri communication with Microsoft WCF (Binary)?","body":"<p>I am using Ruby (Nokogiri) to talk to a service written in Microsoft WCF.  Recently developers have changed this to use a binary representation instead of plain text. Does Nokogiri support this?</p>\n"},{"tags":["wcf","odata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13203525,"title":"How to call WCF Data Service that returns bool Getting \"Cannot include key predicates or empty parenthesis.\"","body":"<p>I have a WCF with the following signature:</p>\n\n<pre><code>    [WebGet]\n    public bool UserHasRoles(string UserName, string ApplicationName)\n    {\n        if (SecurityCheck())\n        {\n            UserRightsApplicationEntities context = new UserRightsApplicationEntities();\n            return context.UserRolesAndFunctions.Where(urf =&gt; urf.LogonName == UserName &amp;&amp; urf.ApplicationName == ApplicationName).Count() &gt; 0;\n        }\n\n        return false;\n    }\n</code></pre>\n\n<p>I can compile and run the service, but when I call it I get the error; \"The request URI is not valid. The segment 'UserHasRoles' cannot include key predicates or empty parenthesis\".</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Here's the calling code:</p>\n\n<pre><code>    public static bool UserHasRoles(string applicationName, string userName)\n    {\n        DataServiceQuery&lt;bool&gt; q = GetApplicationServicesDataContext()\n            .CreateQuery&lt;bool&gt;(Constants.ServiceOperations.UserHasRoles)\n            .AddQueryOption(Constants.ClassProperties.Application.ApplicationName, string.Format(\"'{0}'\", applicationName))\n            .AddQueryOption(Constants.ClassProperties.User.UserName, string.Format(\"'{0}'\", userName));\n\n        bool userHasRoles = q.Execute().FirstOrDefault();\n        return userHasRoles;\n    }\n</code></pre>\n\n<p>Here's the web call:</p>\n\n<p><code>\n   \"http://svr-webdev1:8081/UserRightsApplicationService.svc/UserHasRoles()?ApplicationName='User Rights Management'&amp;UserName='domain\\username'\" </code></p>\n\n<p>And what's interesting is that if I remove the parenthesis from UserHasRoles such as:</p>\n\n<p><code>\n   \"http://svr-webdev1:8081/UserRightsApplicationService.svc/UserHasRoles?ApplicationName='User Rights Management'&amp;UserName='domain\\username'\" </code></p>\n\n<p>It works correctly.</p>\n\n<p>Ok, so I tried a different approach that seems to work, but not really sure why:</p>\n\n<pre><code>    public static bool DoesUserHaveRoles(string applicationName, string userName)\n    {\n        string queryString = string.Format(\"UserHasRoles?ApplicationName='{0}'&amp;UserName='{1}'\", applicationName, userName);\n\n        bool doesUserHaveRoles = (GetApplicationServicesDataContext().Execute&lt;bool&gt;(new Uri(queryString, UriKind.Relative))).FirstOrDefault();\n        return doesUserHaveRoles;\n    }\n</code></pre>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":13235010,"title":"Client hangs after completing wcf service call","body":"<p>Service:</p>\n\n<pre><code>public MoviesResponse GetMoviesList(MoviesRequest request)\n{\n    List&lt;Movie&gt; movies = DataAccess.GetMovies(0);\n    MoviesResponse response = new MoviesResponse();\n    response.movies = movies;\n    return response;\n}\n\n[DataContract]   \npublic class MovieResponse\n{\n    [DataMember]\n    public IList&lt;MovieReview&gt; movieReviews;\n}\n\n[DataContract]    \npublic class MoviesResponse\n{\n    [DataMember]\n    public IList&lt;Movie&gt; movies;\n}\n\n[DataContract]\npublic class MovieRequest\n{\n    [DataMember]\n    public int movieId;\n}\n\n[DataContract] \npublic class MoviesRequest\n{\n    [DataMember]\n    public int movieId;\n}\n</code></pre>\n\n<p>Client:        </p>\n\n<pre><code>MoviesResponse response = Client.GetMoviesList(request);\n</code></pre>\n\n<p>Service call completes but never returns to the client.</p>\n"},{"tags":["visual-studio-2010","wcf","webdeploy"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12810568,"title":"Publishing a WCF service using web deployment failed on Windows 8","body":"<p>I am trying to publish a WCF service to IIS in Windows 8 using Web deploy. The publish process is failing with the following error:</p>\n\n<p>Web Deployment task failed. There was an error reading IIS configuration schema from 'C:\\windows\\system32\\inetsrv\\config\\schema</p>\n\n<p>Yes, I am running VS2010 in admin mode.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#","visual-studio-2010","wcf","web-services","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13235345,"title":"How can I mark the methods in a WCF client proxy generated class as virtual","body":"<p>In VS 2010 I'm creating a service reference which code generates the WCF client proxy class Refernce.cs.  I need the methods in this class to have the Virtual modifier so they can be used in Mock.</p>\n\n<p>Of course I can hand edit the generated code, but every time I update the reference the code is going to be regenerated and wipe out my changes.</p>\n\n<p>Do I have more control of how the WCF client proxy class is generated?  Is there any way to have the code generator always add the Virtual modifier?  I would like this to be more automated so that when other developers need to update the reference, they don't have to know or remember to hand edit the generated code and add the the virtual modifier.</p>\n"},{"tags":["c#",".net","wcf","compression"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":54,"score":2,"question_id":13230910,"title":"Compress all traffic to WCF","body":"<p>We have a couple of WCF (data) services. Because few of our clients are connecting to those services via a terrible network connection, we would like to assure that <strong>ALL</strong> traffic is compressed. So, we would like to compress each request and response to the server <strong>automatically</strong>.</p>\n\n<p>We use IIS 8 right now and <strong>.NET 4+</strong>.</p>\n\n<p>How can we do that in the most natural way? (Via XML configs etc.)</p>\n"},{"tags":["c#","wcf","web-config","wshttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13201954,"title":"Could not find a base address that matches scheme http for the endpoint with binding WSHttpBinding. Registered base address schemes are [https]","body":"<p>I've been to several sites on how to correct this error and can't get rid of the error. I'm hosting it on IIS 6 with SSL enabled. Below is my configuration</p>\n\n<pre><code> &lt;services&gt;\n            &lt;service behaviorConfiguration=\"UsernamePasswordBehavior\" name=\"DataServices.BEService\"&gt;    \n\n                &lt;endpoint address=\"mex\" binding=\"mexHttpsBinding\" name=\"mex\" contract=\"IMetadataExchange\"  listenUri=\"https://mysite/beservice.svc\"/&gt;\n\n                &lt;endpoint address=\"wsbe\" binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpWithUsernamePassword\"\n                    name=\"BEwsHttp\" contract=\"DataServices.IBEService\" listenUri=\"https://mysite/beservice.svc\" /&gt;               \n            &lt;/service&gt;\n&lt;/services&gt;\n\n    &lt;bindings&gt;          \n        &lt;wsHttpBinding&gt;\n                    &lt;binding name=\"wsHttpWithUsernamePassword\" sendTimeout=\"00:06:00\"  receiveTimeout=\"00:06:00\"&gt;\n                        &lt;security mode=\"Message\"&gt;\n                            &lt;message clientCredentialType=\"UserName\"/&gt;\n                            &lt;/security&gt;                    \n                    &lt;/binding&gt;\n            &lt;/wsHttpBinding&gt;\n        &lt;/bindings&gt;\n\n\n     &lt;behaviors&gt;\n                &lt;serviceBehaviors&gt;\n                   &lt;behavior name=\"UsernamePasswordBehavior\"&gt;\n                        &lt;serviceMetadata httpsGetEnabled=\"true\"/&gt;\n                        &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;                    \n                        &lt;serviceCredentials&gt;\n                            &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"DataServices.CustomUsernameValidator, DataServices\" /&gt;\n                            &lt;serviceCertificate findValue=\"*.mysite.com\" storeLocation=\"LocalMachine\" storeName=\"My\"  x509FindType=\"FindBySubjectName\"/&gt;                        \n                        &lt;/serviceCredentials&gt;                                      \n                    &lt;/behavior&gt;                \n                &lt;/serviceBehaviors&gt;\n            &lt;/behaviors&gt;\n</code></pre>\n\n<p>Hope someone can help!</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13197838,"title":"Why are Windows ClientCredential on endpoint not being used?","body":"<p>I have a WCF Channel Factory that has its endpoint modified for a WCF service call. What I want is for the service call to be done on a different context which ordinarily is straight forward. However it is not working for me. I can successfully add the credentials to the endpoint behavior, inspect them, and see them but the call is not made using the 'NewUser' credentials.</p>\n\n<pre><code>internal static void UpdateChannelClientBehavior(ChannelFactory factory)\n{\n   factory.Endpoint.Behaviors.Remove&lt;ClientCredentials&gt;();\n   //MyCustomCredentials is a custom class class variable that inherits System.ServiceModel.Description.ClientCredentials\n   MyCustomCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;\n   MyCustomCredentials.Windows.ClientCredential = new NetworkCredential(\"NewUser\", \"password\", \"MyDomain\");\n   factory.Endpoint.Behaviors.Add(MyCustomCredentials);\n   return;\n}\n</code></pre>\n\n<p>So after this code the endpoint indeed has the new Windows Credentials but server side it is still being called under the default context and <em>not</em> with the 'NewUsers' credentials. What am I doing incorrectly to make this work?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#",".net","wcf","azure","wif"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13226508,"title":"Error while accessing Custom STS(WCF Service) on Azure","body":"<p>I've a custom STS having active federation endpoint that works well on local box. \nLocal Url is \"https://localhost/CustomIDP/Service.svc\"</p>\n\n<p>After hosting on Azure on the final step of acquiring SAML token I am getting the following error:</p>\n\n<p>[System.ServiceModel.CommunicationException] \n{\"An error occurred while receiving the HTTP response to \"https://<em>mysts</em>.cloudapp.net/Service.svc\". This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.\"}</p>\n\n<p>InnerException:\n[System.Net.WebException]: {\"The underlying connection was closed: An unexpected error occurred on a receive.\"}</p>\n\n<p>InnerException:\n[System.IO.IOException]:{\"Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.\"}</p>\n\n<p>InnerException:\n[System.Net.Sockets.SocketException]: {\"An existing connection was forcibly closed by the remote host\"}:    at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)\n   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)    </p>\n\n<p>Appreciate any inputs. Please find below the code snippet used. The error occurs at channel.Issue statement.</p>\n\n<pre><code>        using (var factory = new WSTrustChannelFactory(\n            new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),\n            new EndpointAddress(new Uri(stsEndpoint))))\n        {\n            factory.Credentials.UserName.UserName = username;\n            factory.Credentials.UserName.Password = password;\n            factory.TrustVersion = TrustVersion.WSTrust13;\n\n            WSTrustChannel channel = null;\n\n            try\n            {\n                var rst = new RequestSecurityToken\n                              {\n                                  RequestType = WSTrust13Constants.RequestTypes.Issue,\n                                  AppliesTo = new EndpointAddress(realm),\n                                  KeyType = KeyTypes.Bearer,\n                              };\n\n                channel = (WSTrustChannel)factory.CreateChannel();\n\n                return channel.Issue(rst);\n            }\n            finally\n            {\n                if (channel != null)\n                {\n                    channel.Abort();\n                }\n\n                factory.Abort();\n            }\n        }\n</code></pre>\n\n<p>Service Configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"Microsoft.IdentityModel.Protocols.WSTrust.WSTrustServiceContract\" behaviorConfiguration=\"ServiceBehavior\"&gt;\n        &lt;endpoint address=\"\" binding=\"ws2007HttpBinding\" contract=\"Microsoft.IdentityModel.Protocols.WSTrust.IWSTrust13SyncContract\"  bindingConfiguration=\"ws2007HttpBindingConfiguration\"/&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpsBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;ws2007HttpBinding&gt;\n        &lt;binding name=\"ws2007HttpBindingConfiguration\"&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;message clientCredentialType=\"UserName\" establishSecurityContext=\"false\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/ws2007HttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;serviceCertificate x509FindType=\"FindByThumbprint\" findValue=\"[thumbprint]\" storeLocation=\"LocalMachine\" storeName=\"My\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n\n  &lt;microsoft.identityModel&gt;\n    &lt;service&gt;\n      &lt;!-- User name and password are not authenticated by windows authentication but a custom verification is done --&gt;\n      &lt;securityTokenHandlers&gt;\n        &lt;remove type=\"Microsoft.IdentityModel.Tokens.WindowsUserNameSecurityTokenHandler, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n        &lt;add type=\"ActiveIdPSite.CustomUserNameSecurityTokenHandler, ActiveIdPSite\" /&gt;\n      &lt;/securityTokenHandlers&gt;\n      &lt;serviceCertificate&gt;\n        &lt;certificateReference x509FindType=\"FindByThumbprint\" findValue=\"[thumbprint]\" storeLocation=\"LocalMachine\" storeName=\"My\" /&gt;\n      &lt;/serviceCertificate&gt;\n      &lt;certificateValidation certificateValidationMode=\"None\" /&gt;\n    &lt;/service&gt;\n  &lt;/microsoft.identityModel&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","wcf"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13233541,"title":"Add WCF service to website project","body":"<p>I have an asp.net Website that has access to database and has functions which I want to allow 3rd party users to use.</p>\n\n<p>Is it possible to add WCF project/ WCF service to my solution so i could let 3rd party member having access to my methods?</p>\n\n<p>We tried myWebsite->Add New Item-> Wcf service/wcf data service but that doesn't seem to work.</p>\n\n<p>Any help would be great.</p>\n"},{"tags":["wcf","gsoap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13160675,"title":"gSOAP instance of .NET service","body":"<p>I have a linux c++ client (via gSOAP) to WCF c# server. The WCF c# service contains list of objects, on which some action is executed. Each time i call some function on service, the new object is created, action on that object is executed and that object lands into list in service. at the end i am calling another function on service, which loops over all objects in a list and executes another call on them. this works as intended on c#, with both client and service pure WCF. </p>\n\n<p>it works different via gSOAP. each time i call a first function on service via gSOAP, that action is executed and list is updated. but it is each time new service. so basically i am dealing each time with new service. i do not wont serialize/deserialize object itself, to have it on inux side.</p>\n\n<p>any ideas how to solve this?</p>\n\n<p>on c# side i have something like (unnecessery details skipped)</p>\n\n<pre>\n\n    class Service : IService\n    {\n        List list = new List();\n        void func1(int i)\n        {\n           Class1 c = new Class1(i);\n           c.create();\n           list.Add(c);\n        }\n        void func2()\n        {\n           foreach(Class1 c in list)\n           {\n               c.close();\n           }\n        }\n    }\n\n</pre>\n\n<p>on gSOAP side i have something like</p>\n\n<pre>\n\n    Proxy service (endpoint);\n    service.func1(1);\n    service.func1(2);\n    //...\n    service.func2();\n\n</pre>\n\n<p>as i said problem is: when func2() is executed it operates on empty list, meaning gSOAP object of Proxy service does not contain c# object of service.</p>\n\n<p>Help, help!</p>\n\n<p>ps.\nthe solution is found: container made \"static\" does the trick.</p>\n"},{"tags":["wcf"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":4867,"score":1,"question_id":6173612,"title":"method not allowed error while using wcf webinvoke post","body":"<p>Hi following is Operation Contract , where im trring to insert some data , so im using WebInvoke POST method, but when im calling this method its giving me an error saying \"Method not allowed\"</p>\n\n<p>do i have to change any configuration settings for allowing POST calls in web.config?</p>\n\n<pre><code> [OperationContract]\n [WebInvoke(\n UriTemplate = \"/Album/PostData?name={name}&amp;CrBy={createdBy}\" , \n Method=\"POST\")]\n void PostUserData(string name, string createdBy);\n</code></pre>\n\n<p>and im calling my service as below</p>\n\n<p><a href=\"http://localhost:2170/MySampleService.svc/xml/Album/PostData?name=devpost&amp;CrBy=postadmin\" rel=\"nofollow\">http://localhost:2170/MySampleService.svc/xml/Album/PostData?name=devpost&amp;CrBy=postadmin</a></p>\n"},{"tags":["c#",".net","wcf","app-config","service-reference"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13231086,"title":"Why is the <system.serviceModel> section missing from app.config?","body":"<p>I'm trying to consume a WCF service. I added a Service Reference, and now I'm trying to call it:</p>\n\n<pre><code>BusStopServiceBinding.BusStopPortTypeClient client = new BusStopServiceBinding.BusStopPortTypeClient();\n</code></pre>\n\n<p>However, I'm getting this error:</p>\n\n<blockquote>\n  <p>Could not find default endpoint element that references contract\n  'BusStopServiceBinding.BusStopPortType' in the ServiceModel client\n  configuration section. This might be because no configuration file was\n  found for your application, or because no endpoint element matching\n  this contract could be found in the client element.</p>\n</blockquote>\n\n<p>My <code>app.config</code> file looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;configSections&gt;\n&lt;/configSections&gt;\n&lt;startup&gt;&lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.0\"/&gt;&lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>No <code>serviceModel</code> section, as you can see. Should I add it manually, and if so, what should I put in it?</p>\n"},{"tags":["wcf","silverlight","ria"],"answer_count":10,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":12638,"score":7,"question_id":1869663,"title":"WCF RIA Service deployment issue","body":"<p>I have a very simple sample silverlight application. I added a domain service to it with an entity model that has one entity. The client app simply loads all rows in the entity at startup. When I run this on my development box, it works as expected. However, when I move it to our test server I get an exception saying that the method I am calling cannot be found (Load operation failed for query 'GetCTCStation'. The remote server returned an error. NotFound.). When I inspected the client/server communication more closely with Fiddler I found out that the request is going to <strong><a href=\"http://%5Bserver\" rel=\"nofollow\">http://%5Bserver</a> url]/ClientBin/SilverlightApplication7-Client-Web-CTCService.svc/binary</strong>. \nI added the domain service to the root of the web project, so I don't understand why the client is looking for it in the ClientBin directory. It's obviously not there. What am I doing wrong here? I have never had any issues with July preview version of RIA.</p>\n\n<p><hr></p>\n\n<p>It is relative, but that is handled in the Generated_Code file automatically. And there is nothing in the webconfig to configure. I used default settings when creating a domain service. I tried explicitly setting the uri when instantiating the service and same exception occurred.</p>\n"},{"tags":[".net","wcf","web-services","soap","certificate"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13161218,"title":"WCF: Consume WebService using both certificate and username authentication","body":"<p>I've been struggling for a while trying to consume a web-service hosted in a server <strong>which I do not have control</strong> (so I can't really do any configuration on the server part).</p>\n\n<p>I've been using WCF to try to consume a web-service that has both Username/Password and Certificate authentication requirements (as well as a HTTPS connection).</p>\n\n<p>The code that I have is this:</p>\n\n<pre><code>        EndpointAddress ea = new\n                EndpointAddress(\"https://the.server.address\");\n\n        BasicHttpBinding bs = new BasicHttpBinding();\n\n        bs.Security.Mode = BasicHttpSecurityMode.TransportWithMessageCredential;\n        bs.Security.Transport.ClientCredentialType =\n            HttpClientCredentialType.Certificate;\n\n        //here if I put username I get a 'message is not signed' error. \n           If I put credentials I get an 'invalid username/password'.\n        bs.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.Certificate;\n\n        var svc = new myWebServiceClient(bs, ea);\n\n        var request = new ObjectWS();\n\n        svc.ClientCredentials.ClientCertificate.SetCertificate(\n                                        StoreLocation.CurrentUser,\n                                                 StoreName.Root,\n                                X509FindType.FindBySerialNumber,\n                                \"the serial\");\n\n        svc.ClientCredentials.UserName.UserName = \"user\";\n        svc.ClientCredentials.UserName.Password = \"pass\";\n\n        //the call to the method in the WS\n        request= svc.getValue(\"param\");\n</code></pre>\n\n<p>The problem is that, as I'm a newbie in WCF (and in WebServices in general), I don't actually know how to consume the web-service using both username and certificate authentication, nor do I know if that makes any sense at all.</p>\n\n<p>In the line:</p>\n\n<pre><code>bs.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.Certificate;\n</code></pre>\n\n<p>if I set the credential type to Certificate I get an Invalid Username/Password. in the other hand if I set it to Username I'll get a 'Message not signed error'.</p>\n\n<p>I would really appreciate some feedback/help in this issue. Regards!</p>\n"},{"tags":["wcf","rest","windows-phone-8"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13229762,"title":"Windows Phone 8 and REST","body":"<p>I need to use REST web services under Windows Phone 8, but there is no System.ServiceModel.Web  namespace in WP framework so I cannot use WebGet and WebInvoke annotations.</p>\n\n<p>How am I supposed to do HTTP GET calls using WCF? Is WCF supported in Windows Phone 8?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The only approach that I can think off now is to use direct approach using HttpWebRequest and handle everything by hand. I wanted to avoid this since this approach brings too much boilerplate code inside the production code. This is why WCF is here. I can't even use RealProxy to implement some basic facilities myself since it's not supported either. The only solution that brings some automation and removes boilerplate code is to use dynamic and DLR features with DynamicObject, that will resolve the calls in runtime, but this will strip me of from static compiler checking.</p>\n\n<p>Why did Microsoft remove crucial parts of framework from WP8? I don't get it.</p>\n"},{"tags":["c#",".net","wcf","design-patterns",".net-4.0"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":13222144,"title":"Wcf services and Db settings?","body":"<p>I was asked to build different <code>WCF</code> services where each do other work against sql.</p>\n\n<p>We have <em>5</em> db's. All db's+connection string are in <em>1</em> xml file. ( file-system file)</p>\n\n<p>The services are hosted under <code>WAS</code> iis 7.5.</p>\n\n<p>since each service should read from db , each service references a <code>DAL dll</code> file.</p>\n\n<p>So here are our components : </p>\n\n<p><img src=\"http://i.stack.imgur.com/Ww7rC.jpg\" alt=\"enter image description here\"></p>\n\n<p>I would like to read the xml data to <code>CACHE</code> ( at the first request) and from now on - read from cache. (reading the file each reqeust is <em>out of the question</em>). </p>\n\n<ul>\n<li>idea #1  = the dll , in his ctor   , at first request will read the xml file and load it to <strong>its</strong> cache.</li>\n</ul>\n\n<p>so the <code>dal</code> will look like this :</p>\n\n<p><img src=\"http://i.stack.imgur.com/Fz0Pc.jpg\" alt=\"enter image description here\"></p>\n\n<p>so now each service can access the DLL's cache object via property. ( one advantage is when dealing with <code>cache dependency</code> on a single file - so when it is changing    , we should reload only to <em>one</em> location).</p>\n\n<ul>\n<li>idea #2 = when service is up , load the xml into <strong>its</strong> <code>cache</code>.</li>\n</ul>\n\n<p>so now , each service will look like this : </p>\n\n<p>Service #1  : </p>\n\n<p><img src=\"http://i.stack.imgur.com/iRHhv.jpg\" alt=\"enter image description here\"></p>\n\n<p>Service #2  : </p>\n\n<p><img src=\"http://i.stack.imgur.com/iRHhv.jpg\" alt=\"enter image description here\"></p>\n\n<p>..</p>\n\n<p>the downside is many cache dependencies on the same file</p>\n\n<p><kbd>Question : </kbd></p>\n\n<p>By the best practice experience and by design pattern <em>POV</em> : which is the preferred way ? </p>\n\n<p><em>p.s. the xml file change frequency 1/(1 month)</em></p>\n"},{"tags":["c#","wcf","visual-studio","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13228913,"title":"Expose EF project to WCF service","body":"<p>I have made a complex solution using EF5 (Lets call it EF5), this solution works perfectly fine and has a Logic.cs file,lies at the app_code, which has multiple functions that access , control and modify this solution, So far so good.</p>\n\n<p>I would like that my business' clients to access these function and I'd like to expose these functions by using WCF.</p>\n\n<p>The steps I did are the following.</p>\n\n<ol>\n<li>Adding WCF project to the solution where the EF5 project is.</li>\n<li>Writing \"OperationContract\"s for each of the functions I'd like to expose to my client.</li>\n<li>Try implementing each of the functions by calling the EF5 functions.</li>\n</ol>\n\n<p>The problem lies at the implementation, VS fails to recognize the logic.cs file , and therefore I cannot call the functions and expose my EF5 project to my clients.</p>\n\n<p>I am new with WCF, obviously I'm doing something wrong here.</p>\n\n<p>My question is, how do I expose EF5 project's functions, that lies in a .cs class , to WCF?</p>\n\n<p>I believe that the major mistake that I made was that I didn't make a WCF project and added EF5 item to it, but I'm not entirely sure.</p>\n\n<p>Here are the screenshots that displays my steps to add the EF5 Reference to the WCF project.</p>\n\n<p><img src=\"http://i.stack.imgur.com/cMrIT.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/EPN6S.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/WZISZ.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks </p>\n"},{"tags":["wcf","silverlight","gzip","outofmemoryexception"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13207177,"title":"OutOfMemory exception when large number of records is sent from WCF to Silverlight","body":"<p>I have a Silverlight application in which I call my WCF service to get data from the database. If there is a small number of records then it's working fine, but if there are many records then it throws a System.OutOfMemory exception.</p>\n\n<p>I have traced it in a WCF error log file. Are there any ways to compress the data which is coming from WCF to the Silverlight application?</p>\n"},{"tags":[".net","wcf","web-config","iis-7.5"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1487,"score":0,"question_id":6645842,"title":"WCF and windows authentication not working","body":"<p>I cant get my WCF serve to windows authenticate</p>\n\n<p>If I allow anonymous everything works, no errors.</p>\n\n<p>I'm running .Net 3.5 on windows  2008 r2 standard SP1\nIIS 7.5, if it matters VS 2010</p>\n\n<p>I have used the WCF Service configuration editor to try and validate what I am doing, still no luck</p>\n\n<p>I get the error after a decent wait 20-30 seconds</p>\n\n<pre><code>Security settings for this service require 'Anonymous' Authentication but it is not enabled for the IIS application that hosts this service. \nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.NotSupportedException: Security settings for this service require 'Anonymous' Authentication but it is not enabled for the IIS application that hosts this service.\n</code></pre>\n\n<p>my web.config is</p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"/&gt;\n\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"AmjBasicHttpEndpointBinding\"&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"SMS.Services.BEIMBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"SMS.Services.BEIMBehavior\" name=\"SMS.Services.BEIM\"&gt;\n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"AmjBasicHttpEndpointBinding\"\n          name=\"BeimServices\" contract=\"SMS.Services.IBEIM\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>EDIT\nthe error message is on the web page. <a href=\"http://Servername/Directory/pageName.svc\" rel=\"nofollow\">http://Servername/Directory/pageName.svc</a></p>\n"},{"tags":["c#","wcf","architecture","vb6","windows-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":64,"score":-1,"question_id":13228803,"title":"C# services and architecture","body":"<p>In a nutshell: I have to develop a Windows service that basically consumes web services and read/write a local database. The service environment will be developed with C#.</p>\n\n<p>The Windows service functions as an extension to a legacy application. The current application is build in VB6 with a Access 2000 database. </p>\n\n<p>Functions within the service are initiated by a schedular and/or are called from the VB6 application.</p>\n\n<p>My idea is to host a WCF service in a Windows service. The Windows service contains the schedular to call functions of the hosted WCF service, and the Windows service has to act as a point of entry for the VB6 application to recieve calls and start functions.</p>\n\n<p>My question:\nIs this approach feasible? My knowledge of VB6 is too small to assess potential problems.</p>\n\n<p>If someone has a better suggestion, or has some interesting pointers, please let me know!</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["wcf","named-pipes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13192609,"title":"WCF named pipe application crashing","body":"<p>I am facing strange issue with WCF named pipes.</p>\n\n<p>I have app (App1) installed on my machine, which is using WCF named pipes. It is running fine without UAC. And later I am installing another application, App2, which is not using any components of App1, But still App1 crashing, due to System.ServiceModel.EndpointNotFoundException. And if I run the App1 as Administrator it is working without any issue. And this crash is not happening, if I uninstall the App2 from the system.</p>\n\n<p>Please help</p>\n"},{"tags":["wcf","impersonation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13198604,"title":"Unintentional impersonation in WCF service","body":"<p>(Note: I finally resolved this myself and the impersonation turned out not to be the main problem; however, if anyone knows why the impersonation takes place, please let me know.)</p>\n\n<p>We have a WCF service that is being called from a Silverlight application (they are hosted by the same web application). Calling the service is surprisingly slow compared to how much time the operation itself takes. The WCF trace log makes it look like more than two seconds are spent on impersonation (see the fifth line):</p>\n\n<pre><code>[15:32:3.193] From: Processing message 1.\n[15:32:3.193] Activity boundary.\n[15:32:3.193] Received a message over a channel.\n[15:32:3.194] ServiceChannel information.\n[15:32:5.539] Security Impersonation succeeded at the server.\n[15:32:5.540] To: Execute 'MyNamespace.GetFloorplan'.\n[15:32:5.540] Activity boundary.\n[15:32:6.302] From: Execute 'MyNamespace.GetFloorplan'.\n[15:32:6.302] Activity boundary.\n[15:32:6.305] Sent a message over a channel.\n[15:32:6.306] Activity boundary.\n</code></pre>\n\n<p>This baffles me, because I thought that impersonation was something you needed to explicitly enable in the configuration (or trigger from the code). I was just brought in on this project as a consultant, so I don't have a full overview of the entire source code yet, but the text \"impersonate\" or \"impersonation\" does not exist anywhere in the source code. Adding to the confusion, <code>System.Threading.Thread.CurrentPrincipal.Identity</code> from inside the service returns an unauthenticated identity with no name, and <code>System.Security.Principal.WindowsIdentity.GetCurrent().Name</code> returns <code>IIS APPPOOL\\MyCustomAppPool</code>, so the impersonation doesn't really seem to have accomplished anything.</p>\n\n<p>We use forms authentication and ASP.NET compatibility mode. When I disable the latter (which I'm not sure I can do permanently, because there might be functionality that depends on it that I don't know about yet), <code>Security Impersonation succeeded at the server</code> disappears from the log, but the time difference between <code>Received a message over a channel.</code> and <code>To: Execute 'MyNamespace.GetFloorplan'.</code> is still almost two seconds. Adding <code>[OperationBehavior(Impersonation = ImpersonationOption.NotAllowed)]</code> to the operation does not help.</p>\n\n<p>Does anyone understand what is going on here? (My goal is to get rid of the impersonation or whatever it is that takes up those two extra seconds.)</p>\n\n<hr>\n\n<p>We have the following attributes on the service class (I know they should ideally be on the interface, but I haven't found out yet whether there is a reason they were placed on the service in the first place):</p>\n\n<pre><code>[ServiceContract(Namespace = \"\")]\n[SilverlightFaultBehavior]\n[AspNetCompatibilityRequirements(RequirementsMode = \n                                 AspNetCompatibilityRequirementsMode.Allowed)]\n</code></pre>\n\n<p>Here is our service configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" \n                             multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;behaviors&gt;\n    &lt;serviceBehaviors&gt;\n      &lt;behavior name=\"\"&gt;\n        &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n        &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n      &lt;/behavior&gt;\n    &lt;/serviceBehaviors&gt;\n  &lt;/behaviors&gt;\n  &lt;bindings&gt;\n    &lt;customBinding&gt;\n      &lt;binding name=\"SilverlightServiceBinding\"&gt;\n        &lt;binaryMessageEncoding /&gt;\n        &lt;httpTransport /&gt;\n      &lt;/binding&gt;\n    &lt;/customBinding&gt;\n  &lt;/bindings&gt;\n  &lt;services&gt;\n    &lt;service name=\"MyNamespace.FloorplanService\"&gt;\n      &lt;endpoint address=\"\" binding=\"customBinding\" \n                bindingConfiguration=\"SilverlightServiceBinding\" \n                contract=\"MyNamespace.FloorplanService\" /&gt;\n      &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" \n                contract=\"IMetadataExchange\" /&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>And our client configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;bindings&gt;\n    &lt;basicHttpBinding&gt;\n      &lt;binding name=\"BasicHttpBinding_FloorplanService\" \n               maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"&gt;\n        &lt;security mode=\"None\" /&gt;\n      &lt;/binding&gt;\n    &lt;/basicHttpBinding&gt;\n  &lt;/bindings&gt;\n  &lt;client&gt;\n    &lt;endpoint address=\"../Floorplan/FloorplanService.svc\"\n              binding=\"basicHttpBinding\" \n              bindingConfiguration=\"BasicHttpBinding_FloorplanService\"\n              contract=\"FloorplanServiceProxy.FloorplanService\" \n              name=\"BasicHttpBinding_FloorplanService\" /&gt;\n  &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["asp.net","wcf","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13206913,"title":"webclient uri formats are not supported","body":"<pre><code>WebClient fileReader = new WebClient();\nfileAddress = listItem;    \n\n//error here uri formats are not supported\nfileReader.DownloadFile(fileAddress, saveTo);\n</code></pre>\n\n<p>here in fileaddress address coming </p>\n\n<pre><code>http://pcdev04.pcsolution.net:83\\Update32\\rts\\RTSUpdate.dll\n</code></pre>\n"},{"tags":["c#","wcf","wcf-security","basichttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13226682,"title":"WCF Authentication using basicHttpBinding and custom UserNamePasswordValidator?","body":"<p>Here i am implementing custom usernamepasswordvalidator in WCF RESTfull service.What i need is while invoking this one <code>http://localhost:12229/RestServiceImpl.svc/GetStudentObj</code> through Chrome REST Client it is not validating the username password..it directly invoke this method and fetching the result.What am i doing wrong here??</p>\n\n<p>My interface</p>\n\n<pre><code> [ServiceContract]\n    public interface IRestServiceImpl\n    {\n        [OperationContract]\n        [WebInvoke(Method = \"GET\", UriTemplate = \"/GetStudentObj\", RequestFormat = WebMessageFormat.Json,\n           ResponseFormat = WebMessageFormat.Json)]\n        Student GetStudent();\n    }\n</code></pre>\n\n<p>SVC</p>\n\n<pre><code>public class RestServiceImpl : IRestServiceImpl\n    {\n        public Student GetStudent()\n        {\n                Student stdObj = new Student\n                {\n                    StudentName = \"Foo\",\n                    Age = 29,\n                    Mark = 95\n                };\n                return stdObj;\n\n        }\n\n        public class CustomUserNameValidator : UserNamePasswordValidator\n        {\n           public override void Validate(string userName, string password)\n            {\n\n                if (null == userName || null == password)\n                {\n                    throw new ArgumentNullException(\"You must provide both the username and password to access this service\");\n                }\n\n                if (!(userName == \"user1\" &amp;&amp; password == \"test\") &amp;&amp; !(userName == \"user2\" &amp;&amp; password == \"test\"))\n                {\n\n                     throw new SecurityTokenException(\"Unknown Username or Incorrect Password\");\n                }\n            }\n        }\n\n    }\n</code></pre>\n\n<p>and Web.Config</p>\n\n<pre><code> &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"webHttpTransportSecurity\"&gt;\n          &lt;security mode=\"Transport\"&gt;\n            &lt;transport clientCredentialType=\"Basic\"&gt;&lt;/transport&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;protocolMapping&gt;\n      &lt;add scheme=\"http\" binding=\"webHttpBinding\"/&gt;\n    &lt;/protocolMapping&gt;\n    &lt;services&gt;\n      &lt;service name=\"RestService.RestServiceImpl\" &gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" contract=\"RestService.IRestServiceImpl\"&gt;&lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior &gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"SecureRESTSvcTestBehavior\"&gt;\n&lt;serviceMetadata httpGetEnabled=\"false\" httpsGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n          &lt;serviceCredentials&gt;\n            &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"RESTfulSecuritySH.CustomUserNameValidator, RESTfulSecuritySH\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Any suggestion??</p>\n"},{"tags":[".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13195092,"title":"WCF unable to handle custom thrown exception","body":"<p>I have created a WCF service and deployed it on the server. It works fine until I throw a custom exception (when data returned from the database is invalid). </p>\n\n<p>I need to catch the exception, and want to capture the message in the exception on the client end and show it to him. However, it shows the exception as:</p>\n\n<blockquote>\n  <p>service endpoint binding not using the HTTP protocol</p>\n</blockquote>\n\n<p>This is the code I'm currently using.</p>\n\n<p><strong>Contract:</strong></p>\n\n<pre><code>[FaultContract(typeof(DefinedException))]\n[OperationContract]\nMyData GetData(TestValues values);\n</code></pre>\n\n<p><strong>Business Layer:</strong></p>\n\n<pre><code>public MyData GetData (TestValues values)\n{\n    try\n    {\n        data = db.GetData (values);\n\n        if (data == null)\n        {\n            throw new DefinedException();\n        }               \n    }\n    catch (Exception ex)\n    {\n        throw ex;\n    }\n    return data;\n}\n</code></pre>\n\n<p><strong>SVC File:</strong></p>\n\n<pre><code>public MyData GetData (TestValues values)\n{\n    try\n    {\n        Bo.GetData(values);\n    }\n    catch (DefinedException exp)\n    {\n        throw new FaultException&lt; DefinedException &gt;( exp);\n    }\n    catch (Exception ex)\n    {\n        throw new FaultException(ex.Message.ToString());\n    }\n    return data;\n}\n</code></pre>\n\n<p><strong>Defined Exception:</strong></p>\n\n<pre><code>public class DefinedException: System.ApplicationException\n{ }\n</code></pre>\n\n<p><strong>Config:</strong></p>\n\n<pre><code>&lt;system.serviceModel&gt;   \n    &lt;diagnostics wmiProviderEnabled=\"false\" performanceCounters=\"Off\"&gt;\n      &lt;messageLogging logEntireMessage=\"true\"\n        logMalformedMessages=\"true\" logMessagesAtServiceLevel=\"true\"\n        logMessagesAtTransportLevel=\"true\" maxMessagesToLog=\"100\" /&gt;\n      &lt;endToEndTracing propagateActivity=\"true\" activityTracing=\"true\" messageFlowTracing=\"true\" /&gt;\n    &lt;/diagnostics&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"wsHttpBinding\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n          transactionFlow=\"false\"  hostNameComparisonMode=\"StrongWildcard\"  maxBufferPoolSize=\"2147483647\"\n           maxReceivedMessageSize=\"2147483647\"&gt;\n          &lt;readerQuotas maxDepth=\"128\" maxStringContentLength=\"2147483647\"\n            maxArrayLength=\"16384\" maxBytesPerRead=\"16384\" maxNameTableCharCount=\"2147483647\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n            enabled=\"false\" /&gt; \n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"sb \" name=\"DataService \"&gt;\n        &lt;endpoint address=\"wsHttpBinding\"\n          binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpBinding\" name=\" wsHttpBinding\" contract=\"IData\" &gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"NewBehavior\"&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\" sb \"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Please advise me what I need to change to fix this.</p>\n"},{"tags":["wcf","web-services","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":484,"score":1,"question_id":5684850,"title":"Overriding the Default WCF REST 4.0 helppage","body":"<p>I've been trying to find a way to override the default WVF REST 4.0 helppage with my own one, and came across this post:</p>\n\n<p><a href=\"http://code.msdn.microsoft.com/WCF-Custom-Help-Page-6f5a90f0\" rel=\"nofollow\">http://code.msdn.microsoft.com/WCF-Custom-Help-Page-6f5a90f0</a></p>\n\n<p>I've been trying to use the same approach in an IIS hosted service using the following code:</p>\n\n<pre><code>namespace WcfHelpRestService\n{\n    public class Global : HttpApplication\n    {\n        void Application_Start(object sender, EventArgs e)\n        {\n            RegisterRoutes();\n        }\n\n        private void RegisterRoutes()\n        {\n            // Edit the base address of Service1 by replacing the \"Service1\" string below\n            var factory = new MyServiceHostFactory();\n\n            RouteTable.Routes.Add(new ServiceRoute(\"Service1\", factory, typeof(Service1)));\n        }\n    }\n}\n\nnamespace WcfHelpRestService\n{\n    public class MyServiceHostFactory : WebServiceHostFactory\n    {\n        public MyServiceHostFactory ()\n        {\n\n        }\n        protected override System.ServiceModel.ServiceHost CreateServiceHost(Type             serviceType, Uri[] baseAddresses)\n        {\n            return new MyServiceHost(serviceType, baseAddresses);\n        }\n    }\n}\n\nnamespace WcfHelpRestService\n{\n    public class MyServiceHost : WebServiceHost\n    {\n        public MyServiceHost(Type serviceType, Uri[] baseAddresses): base(serviceType,  baseAddresses)   \n        {\n\n        }\n        public override void AddServiceEndpoint(System.ServiceModel.Description.ServiceEndpoint endpoint)\n        {\n            endpoint.Behaviors.Add(new HelpPageEndpointBehavior(\"ACME LLC\"));\n            base.AddServiceEndpoint(endpoint);\n        }\n    }\n}\n</code></pre>\n\n<p>however I keep getting the error:</p>\n\n<blockquote>\n  <p>[AddressAlreadyInUseException: HTTP\n  could not register URL\n  <a href=\"http://+:51443/Service1/help/\" rel=\"nofollow\">http://+:51443/Service1/help/</a> because\n  TCP port 51443 is being used by\n  another application.]<br>\n  System.ServiceModel.Channels.SharedHttpTransportManager.OnOpen()\n  +1106</p>\n</blockquote>\n\n<p>not quite sure what I'm doing wrong, so any help would be greatly appreciated.</p>\n\n<p>TIA</p>\n\n<p>Sren</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13222551,"title":"WCF DataSources folder","body":"<p>I have a solution with a WCF service, and a few projects with a reference to it.\nFor some reason, 1 of the projects has a DataSources folder within its Properties folder, in which all my entities are present under the form of files named MyNamespace.MyEntity.datasource.</p>\n\n<p>How come the other projects don't have that and still work fine?\nOr how come this one has it?\nIs there a specific condition that must be met for the folder and entities to be created?</p>\n"},{"tags":["c#","wcf","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13222901,"title":"RESTful C# WCF Post to function","body":"<p>I have created a very simple RESTful web service using C#. I have an ADO.NET Entity Model and a WCF Data Service. This is working fine for retrieving information on my remote application. I am now however trying to create a RESTful function that reacts to posted data and adds it into my database. Here is the code I have so far to share the data:</p>\n\n<pre><code>namespace WcfService10\n{\n    public class GetInformation : DataService&lt;DBLocalEntities&gt;\n    {\n        // This method is called only once to initialize service-wide policies.\n        public static void InitializeService(DataServiceConfiguration config)\n        {\n            // TODO: set rules to indicate which entity sets and service operations are visible, updatable, etc.\n            // Examples:\n            config.SetEntitySetAccessRule(\"users\", EntitySetRights.AllRead);\n            // config.SetServiceOperationAccessRule(\"MyServiceOperation\", ServiceOperationRights.All);\n            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;\n        }\n    }\n}\n</code></pre>\n\n<p>In order to add a way of processing posted information to my restful service, how would I go about this? Is it as simple as adding a WCF Service or should it be different in order to work via REST? </p>\n"},{"tags":["wcf","timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3040,"score":1,"question_id":415356,"title":"Induce WCF openTimeout closeTimeout","body":"<p>I wish to test and observe timeout behaviours between a WCF client and service host. For receiveTimeout and sendTimeout, it is probably easy to transmit a large byte stream that takes more than a few seconds and set those timeout attributes to ridiculously low values.</p>\n\n<p>However, since there is nothing that can be done beyond the calling of a serviceProxy.Open() or .Close() methods, I am thinking what is a good way to delay the opening and closing of WCF connections, to cross the thresholds of openTimeout and closeTimeout?</p>\n"},{"tags":["wcf","service","soa","svcutil.exe","service-reference"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13222936,"title":"generating service references of wcf endpoints in client","body":"<p>I am currently working with WCF services. I am writing both the client (consuming application) and host (services application).</p>\n\n<p>Working on the client, I am writing the code for it, I have 3 options.</p>\n\n<ul>\n<li>Add Service Reference to the endpoint in the client</li>\n<li>Generate service reference using svc util </li>\n<li>Write the Channel and Service reference etc and share\na library between the host and client containing the request and\nresponse objects</li>\n</ul>\n\n<p>I am currently leaning towards option 2, using svc util. I have done this in the past with a command similar to this:</p>\n\n<pre><code>svcutil /t:code http://localhost.myapp.com/MyService.svc /out:\"..\\Folder\\MyServiceReference.cs\" /n:*,MyNamespace.MyApp.MyService/UseSerializerForFaults /ct:System.Collections.Generic.List`1\n</code></pre>\n\n<p>From the above, it generates the service reference in to the one class. I would like to be able to modify this so that each class from the service reference generation is added to separate classes. For example, all request objects and generated in to the Request folder, response objects in to Response folder, Channel in to a Channels folder and all other entites in another folder.</p>\n\n<p>Firstly, feedback on the my choice of the second alternative? And also, is it possible to use svcutil to generate classes as outlined above?</p>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13224182,"title":"Restrict Access to a DataMember on few Endpoints","body":"<p>Consider following dataContract class. <code>MyHiddenProperty</code> is an optional <code>DataMember</code> -</p>\n\n<pre><code>[DataContract]\npublic class CompositeType\n{        \n    string stringValue = \"Hello \";\n\n    [DataMember]\n    public string StringValue\n    {\n        get { return stringValue; }\n        set { stringValue = value; }\n    }\n\n    [IgnoreDataMember] //for IRestricted\n    [DataMember]//for IAllowed\n    public string MyHiddenProperty { get; set; }\n}\n</code></pre>\n\n<p>I need to make sure that <code>MyHiddenProperty</code> is exposed only at one endpoint and restricted at other.</p>\n\n<p>For this purpose I have created two distinct <code>Service Contract</code>, </p>\n\n<pre><code>[ServiceContract]\npublic interface IAllowed\n{\n    [OperationContract]\n    string GetData(int value);\n\n    [OperationContract]\n    //would expose MyHiddenProperty\n    CompositeType GetDataUsingDataContract(CompositeType composite);\n\n}\n\n[ServiceContract]\npublic interface IRestricted\n{\n    [OperationContract]\n    string GetData(int value);\n\n    [OperationContract]\n    //should not expose MyHiddenProperty\n    CompositeType GetDataUsingDataContract(CompositeType composite);\n\n}\n</code></pre>\n\n<p>With an expection to expose them as follows -</p>\n\n<pre><code>&lt;endpoint address=\"allowedEndpoint\" binding=\"basicHttpBinding\" contract=\"WcfServiceLibrary1.IAllowed\"&gt;\n  &lt;identity&gt;\n    &lt;dns value=\"localhost\" /&gt;\n  &lt;/identity&gt;\n&lt;/endpoint&gt;\n&lt;endpoint address=\"restrictedEndPoint\" binding=\"basicHttpBinding\" contract=\"WcfServiceLibrary1.IRestricted\"&gt;\n  &lt;identity&gt;\n    &lt;dns value=\"localhost\" /&gt;\n  &lt;/identity&gt;\n&lt;/endpoint&gt;   \n</code></pre>\n\n<p>I understand <code>WCF Authorization</code> mechanism can helpful to restrict access to a particular operation. </p>\n\n<p>How ever it seems a bit tricky to apply restriction at <code>dataContract</code> level. Can we leverage WCF Extensibility points for this scenario?</p>\n"},{"tags":[".net","wcf","performance","serialization",".net-4.5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13223062,"title":"direct project reference or communication via wcf","body":"<p>I am currently architecting my .net 4.5 applications. At present I have web layer and a wcf services layer. They communicate to each other over soap.</p>\n\n<p>Both layers are co located on the one server.</p>\n\n<p>I am considering moving from communicating over soap to direct project references. So that it moves from one application from two. Main motivation behind this is to improve performance of not having to undergo serializing and deserializing of communication between web and services.</p>\n\n<p>What I lose from this change, is scalability of moving my services layer to a separate tier in the future, ie a different server.</p>\n\n<p>I am looking for feedback on this, is there a major performance hit from the serialization. Thoughts on the above? Anything that I should consider that I have omitted.</p>\n"},{"tags":["wcf","serialization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13220938,"title":"Ignore auto-generated data member","body":"<p>I am currently writing a client for a JAX-WS web service. I have to escape the value of a data member by encapsulating it into CDATA. This thread here helped me a lot: <a href=\"http://stackoverflow.com/questions/1374062/using-cdata-with-wcf-rest-starter-kits\">Using CDATA with WCF REST starter kits</a>. What I did is I extended the auto-generated partial data contract class with an additional property of type CDataWrapper. </p>\n\n<pre><code>public partial class Message\n{\n    [DataMember(Name = \"MessageText\", EmitDefaultValue = false)]\n    private CDataWrapper MessageTextCData\n    {\n        get { return this.MessageText; }\n        set { this.MessageText = value; }\n    }\n}\n</code></pre>\n\n<p>Now when running the client I recieve the following error: </p>\n\n<p>Type 'MessageService.Client.MessageServiceReference.Message' contains two members 'MessageText' 'and 'MessageTextCData' with the same data member name 'MessageText'. </p>\n\n<p>The solution is to edit the auto-generated data member in Reference.cs and add a IgnoreDataMember attribute to it. I would have to do this every time I update the reference, so I figure this is not a good solution. How can I ignore an auto-generated data member, or is there any different way of doing this?</p>\n"},{"tags":["c#","wcf","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13220511,"title":"How to pass http header value to WCF rest service operation?","body":"<p>Is there any way to extract http header value and pass it to WCF rest service operation at global extension point, e.g. customized IParameterInspector? Thanks in advance.</p>\n"},{"tags":[".net","wcf","monotouch","slsvcutil"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13214286,"title":"Monotouch: WCF Client Example Needed","body":"<p>I am trying to create a WCF client to connect to my server using MonoTouch. Since Monotouch doesn't support dynamic code generation I tired using slscvutil.exe to generate the client code. The output I get from that does not compile. It tries to use <code>ChannelBase</code> as a generic class <code>ChannelBase&lt;T&gt;</code>, but it is not generic. Additionally all examples I can find use <code>ChannelBase</code> as a generic class. Does anyone have a sample of a MonoTouch WCF client in .net 4.0? Thanks!</p>\n"},{"tags":["c#","wcf"],"answer_count":5,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":340,"score":6,"question_id":8882730,"title":"Is a WCF service a web service?","body":"<p>Is it correct to call a WCF Service a web service?</p>\n\n<p>I am working on a assigment for school, and I made a RESTful WCF service and in the report I refered to it at times as a web service. Is it correct to refer to a WCF Service as a web service?</p>\n"},{"tags":["wcf","silverlight","class","partial"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13218192,"title":"Partial Class with CollectionDataContract Attribute not partial after reference update","body":"<p>I've a Silverlight application with wcf service. I defined a partial class server side like this</p>\n\n<pre><code>[CollectionDataContract(Namespace = \"http://test/datacontract\")]\n public partial class ItemTypeObjectList : List&lt;ItemTypeObject&gt;, IWcfObject\n {\n }\n</code></pre>\n\n<p>If I execute the \"Update Service Reference\" on the Service Reference (clientside), the \"partial\" modifier is not existing in Reference.cs. In Refernce.cs it looks like this:</p>\n\n<pre><code>[System.Diagnostics.DebuggerStepThroughAttribute()]\n [System.CodeDom.Compiler.GeneratedCodeAttribute(\"System.Runtime.Serialization\", \"4.0.0.0\")]\n [System.Runtime.Serialization.CollectionDataContractAttribute(Name=\"ItemTypeObjectList\", Namespace=\"http://test/datacontract\", ItemName=\"ItemTypeObject\")]\n public class ItemTypeObjectList : System.Collections.Generic.List&lt;Test.DataContract.ItemTypeObject&gt; {\n }\n</code></pre>\n\n<p>The \"partial\" is missing -> Why?</p>\n\n<p>Thank you very much for a solution.</p>\n\n<p>Best regards.\n Ivan</p>\n"},{"tags":[".net","wcf","msbuild","msdeploy","msbuild-task"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13217249,"title":"multiple build profiles utilizing csproj files in Visual Studio 2010","body":"<p>I am creating a WCF service that will be deployed to more than on place for a single build.</p>\n\n<ul>\n<li>I want to deploy to an IIS location with one web.config, and on another IIS for debug on local machine.</li>\n<li>Deploy on same machine on another IIS with another web.config for Live version on local</li>\n<li>Deploy on another machine using a set of credentials from the domain on that IIS, another web.config for other cases.</li>\n</ul>\n\n<p>Can you please point me to some existing working examples for these cases?</p>\n\n<p>p.s. I managed to manipulate the csproj files to customize my build. Because that is usually done with MSBUILD it would be great if you have examples with this dll it's very good.</p>\n"},{"tags":["wcf","silverlight","mvvm","silverlight-4.0","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13216672,"title":"Async await in mvvm silverlight 4","body":"<p>In my silverlight mvvm application i am using wcf service to fill listbox which is taking time to load so i need to use async and await in that. how can i use it in the bellow code.</p>\n\n<p>my code in view model:</p>\n\n<pre><code>    private void GetLanguage()\n    {\n        ServiceAgent.GetLanguage((s, e) =&gt;Language = e.Result);\n    }\n</code></pre>\n\n<p>my code in service agent</p>\n\n<pre><code>    public void GetLanguage(EventHandler&lt;languageCompletedEventArgs&gt; callback)\n    {\n        _Proxy.languageCompleted += callback;\n        _Proxy.languageAsync();\n    }\n</code></pre>\n\n<p>Can anyone help me</p>\n"},{"tags":[".net","wcf","web-services","c#-4.0","wsdl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13216526,"title":"Expose different WSDL for different clients","body":"<p>I have developed a WCF application which is being consumed by three .NET web service clients. So far so good.</p>\n\n<p>But now I should change the WCF application in such a way that a different schema is published to different clients.</p>\n\n<p>For example:</p>\n\n<pre><code>class A : IMyServices\n{\n    public string GetName() {}\n\n    public Order GetOrderInfo(string orderId) {}\n\n    public Payment GetPaymentDetails(Order order) {}\n}\n</code></pre>\n\n<p>One of my clients should not see <code>GetPaymentDetails</code> (I should basically hide this GetPaymentDetails and Payment class schema from the WSDL that is being created by that one client). Other clients will have restrictions on other methods.</p>\n\n<p>In some scenarios some of the <code>Payment</code> class's properties should not be exposed to a client even it has access to the <code>GetPaymentDetails</code> operation.</p>\n\n<p>Is there any way to expose different schemas for different clients and that requires minimum changes at my end?</p>\n\n<p>One thing to keep in mind: my service is developed using WCF, and clients consuming my services use traditional .NET web service.</p>\n"},{"tags":["wcf","iis7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13211507,"title":"WCF set up on iis","body":"<p>I'm getting the following error when I try to browse a web service that i added on IIS 7.\nWhen I go to content view i can browse the end points.\"HTTP Error 403.14 - Forbidden The Web server is configured to not list the contents of this directory\".</p>\n\n<p>If it is related to giving user permissions to an III user, how do I go about doing that?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":401,"score":0,"question_id":5413648,"title":"There was no endpoint listening at http://169.254.2.2:8000/calculator/Calculator","body":"<p>I am getting the below errror when calliong WCF method from windows mobile. </p>\n\n<blockquote>\n  <p>There was no endpoint listening at\n  <a href=\"http://169.254.2.2:8000/calculator/Calculator\" rel=\"nofollow\">http://169.254.2.2:8000/calculator/Calculator</a> that could accept the message. This is\n  often caused by an incorrect address\n  or SOAP action. See InnerException, if\n  present, for more details.</p>\n</blockquote>\n\n<ul>\n<li>I am able to ping to mobile</li>\n<li>Port # 8000 is enabled in my PC Firewall. </li>\n<li>I used the basichttpbinding both PC and Mobile side. </li>\n</ul>\n\n<p>Still i am not able to call method from WCF service.</p>\n"},{"tags":[".net","wcf","c#-4.0","versioning"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13073339,"title":"WCF 4.5 Versioning","body":"<p>I have a WCF service with a data contract and etc...</p>\n\n<p>I need to make some changes in the contract, because some customers I had to change the business logic and add two data members in the data contract. The catch is, the Java client is breaking, even with <code>IsRequired = false</code>, only he don't accept this change, clients in PHP, Ruby and Python accepts the change.</p>\n\n<p>How can I solve this? There's some way to fix this on .NET side or another way to version the service?</p>\n"},{"tags":["wcf","rest","autofac"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12608329,"title":"Service implements multiple ServiceContract types then Restful Service throws ServiceActivationException","body":"<p>So, due to some concerns, I've split up what was intially a single interface contract into two seperate ones. Now, I have only one class (partial) implementing both interfaces, and I want to make them all available as REST-services through WCF. The contracts are listed below:</p>\n\n<p>I am using Autofac for WCF service host.</p>\n\n<p>Below is my .svc file code</p>\n\n<p>For WCF service: <code>Factory=\"Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf\"</code></p>\n\n<p>For RESTful service: <code>Factory=\"Autofac.Integration.Wcf.AutofacWebServiceHostFactory, Autofac.Integration.Wcf\"</code></p>\n\n<p><strong>WCF Example</strong>:</p>\n\n<p>For wcf service </p>\n\n<pre><code>public interface IEmployeeCommandService {}\npublic interface IEmployeeQueryService {}\npublic partial class EmployeeService : IEmployeeCommandService {}\npublic partial class EmployeeService : IEmployeeQueryService {}\npublic partial class EmployeeService {}\n</code></pre>\n\n<p>And my Web.config file looks like below</p>\n\n<pre><code>&lt;service behaviorConfiguration=\"ServiceBehavior\" name=\"Application.EmployeeService\"&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"Application.IEmployeeCommandService\" /&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"Application.IEmployeeQueryService\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n&lt;/service&gt;\n</code></pre>\n\n<p>And my <strong>EmployeeService.svc</strong> code looks like </p>\n\n<pre><code>&lt;%@ ServiceHost Service=\"Application.EmployeeService, Application\"\nFactory=\"Autofac.Integration.Wcf.AutofacServiceHostFactory, Autofac.Integration.Wcf\"%&gt;\n</code></pre>\n\n<p>with this approach the plain WCF service working fine for me. When browse the <strong>EmployeeService.svc</strong> i can see both command &amp; Query service operations.</p>\n\n<p>Simillar approach i am trying for RESTFul service as mentioned like below. But i am getting error when i browse my RESTFul service.</p>\n\n<p><strong>RESTFul Example</strong>:</p>\n\n<pre><code>public interface IEmployeeRESTfulQueryService {}\npublic interface IEmployeeRESTfulCommandService {}\npublic partial class EmployeeRESTfulService {}\npublic partial class EmployeeRESTfulService : IEmployeeRESTfulCommandService {}\npublic partial class EmployeeRESTfulService : IEmployeeRESTfulQueryService {}\n</code></pre>\n\n<p>And My web.confing looks like below</p>\n\n<pre><code>  &lt;service behaviorConfiguration=\"ServiceBehavior\" name=\"Application.EmployeeRESTfulService\"&gt;\n    &lt;endpoint name=\"Command\" address=\"Command\" behaviorConfiguration=\"webHttp\" binding=\"webHttpBinding\" contract=\"Application.IEmployeeRESTfulCommandService\" /&gt;\n    &lt;endpoint name=\"Query\" address=\"Query\" behaviorConfiguration=\"webHttp\" binding=\"webHttpBinding\" contract=\"Application.IEmployeeRESTfulQueryService\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n\n&lt;behavior name=\"webHttp\"&gt;\n &lt;webHttp helpEnabled=\"true\" automaticFormatSelectionEnabled =\"true\" /&gt;\n&lt;/behavior&gt;\n</code></pre>\n\n<p>If i browse my .svc (RESTFul) i endup with below error.. </p>\n\n<p><strong>Error</strong>: </p>\n\n<p>Service 'EmployeeRESTfulService' implements multiple ServiceContract types, and no endpoints are defined in the configuration file. WebServiceHost can set up default endpoints, but only if the service implements only a single ServiceContract. Either change the service to only implement a single ServiceContract, or else define endpoints for the service explicitly in the configuration file.</p>\n"},{"tags":["wcf","odata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13215146,"title":"OData Exceptions At Startup are not not trapped","body":"<p>I am running into a delima when I try to trap a specific exception in WCF Data Services. The exception happen really early. I am hosting the service inside IIS. Here are the steps that I took: </p>\n\n<p>My first attempt was to capture in my HandleException() override that is in my DataService class. However, that doesn't get called for this particular case. The error is happening very early in the life cycle. Any errors that happen later on would show up in that method. So, I tried to see if it hits in Global.asax. The Application_Error is never been called. I even subscribed to the AppDomain.CurrentDomain.UnhandledException event as the last attempt. Needless to say, I still can't trap it. </p>\n\n<p>I am including three simple classes to show you the scenario also I included Global.asax class. I am interested in capturing the error that is happening inside the constructor of the Team class. I am not interested in capturing any exceptions that happen later on. I can rely on the HandleException() but this one is leaving my in agony. Any ideas are appreciated! </p>\n\n<pre><code>    public class Global : System.Web.HttpApplication\n    {\n      protected void Application_Start(object sender, EventArgs e)\n      {\n        AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;\n        RouteTable.Routes.Add(new ServiceRoute(\"Faulty\", new WebServiceHostFactory(), typeof(FaultyDataService))); \n      }\n\n      void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)\n      {\n      // This never hit\n      }\n\n      protected void Application_Error(object sender, EventArgs e)\n      {\n        var srv = HttpContext.Current.Server;\n        if (srv != null)\n        {\n          var ex = srv.GetLastError().GetBaseException();\n          // Log Exception \n        }\n       }\n    }\n\n\n    [DataServiceKey(\"Name\")]\n    public class TeamMember\n    {\n      public string Name\n      {\n        get;\n        set;\n      }\n    }\n\n    public class Team\n    {\n      private IQueryable&lt;TeamMember&gt; _teamMembers = new List&lt;TeamMember&gt;() { new TeamMember { Name = \"Testing\" } }.AsQueryable();\n      public Team()\n      {\n        // I can't catch this exception to handle it.\n        throw new ArgumentException(\"Uncaught Exception\");\n      }\n\n      public IQueryable&lt;TeamMember&gt; Members\n      {\n        get\n        {\n          return _teamMembers;\n        }\n      }\n    }\n\n    public class FaultyDataService : DataService&lt;Team&gt;\n    {\n      public static void InitializeService(DataServiceConfiguration config)\n      {\n        config.SetEntitySetAccessRule(\"*\", EntitySetRights.AllRead);\n        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;\n      }\n\n      protected override void OnStartProcessingRequest(ProcessRequestArgs args)\n      {\n        base.OnStartProcessingRequest(args);\n      }\n\n      protected override void HandleException(HandleExceptionArgs args)\n      {\n        args.Exception = new DataServiceException(\n        args.ResponseStatusCode, \"Invalid Request\", \"The Request is not composed properly\", System.Globalization.CultureInfo.CurrentCulture.Name, null);\n        base.HandleException(args);\n      }\n    }\n</code></pre>\n\n<p>I came up with a solution. However, I feel it is a band aid. I still think it can be done better. </p>\n\n<p>I ended up overriding CreateDataSource() to handle this exception. </p>\n\n<pre><code>protected override Team CreateDataSource()\n{\n  Team team = null;\n  try\n  {\n    team =  base.CreateDataSource();\n  }\n  catch (Exception e)\n  {\n    LogException(e);\n  }\n\n  return team;\n}\n</code></pre>\n"},{"tags":["wcf","naming"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":1,"view_count":234,"score":5,"question_id":7216401,"title":"WCF Naming Guidelines/Best Practices","body":"<p>What are the best practices for naming WCF endpoints and methods? What are the conventions you usually follow?</p>\n"},{"tags":["wcf","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13184104,"title":"Sending to authenticated queue","body":"<p>I have a transactional private queue on my local machine.  If the queue is not authenticated, the message goes into the queue.  If I set the queue to be authenticated, it doesn't.  The application sending to the queue is running as myself (and I have full control on the queue).  Anonymous users also have Send Message permissions on the queue.  I'm confused as to what I need to do to send a message to an authenticated queue.</p>\n\n<p>Here is the binding that I am using:</p>\n\n<pre><code>NetMsmqBinding msmq = new NetMsmqBinding(NetMsmqSecurityMode.None);\nmsmq.MaxReceivedMessageSize = int.MaxValue;\nmsmq.CloseTimeout = TimeSpan.FromMinutes(3);\nmsmq.SendTimeout = TimeSpan.FromMinutes(3);\nmsmq.ReceiveTimeout = TimeSpan.FromMinutes(3);\nmsmq.ReaderQuotas.MaxDepth = int.MaxValue;\nmsmq.ReaderQuotas.MaxStringContentLength = int.MaxValue;\nmsmq.ReaderQuotas.MaxArrayLength = int.MaxValue;\nmsmq.ReaderQuotas.MaxBytesPerRead = int.MaxValue;\nmsmq.ReaderQuotas.MaxNameTableCharCount = int.MaxValue;\nmsmq.ExactlyOnce = true;\nmsmq.Durable = true;\nmsmq.TimeToLive = TimeSpan.FromHours(1);\n</code></pre>\n\n<p>Ideally, I would like to have everyone (including unrecognized users) be able to send messages, but limit who can peek and receive messages.  I'm not sure if this is possible.</p>\n\n<p>So, the first question:  How can I get a message into an authenticated queue?</p>\n"},{"tags":["wcf"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":377,"score":1,"question_id":1712778,"title":"How do I host a wcf service on the internet?","body":"<p>This is probably a basic networking issue, but I am new to this stuff and just do not know the answer.</p>\n\n<p>I have written a wcf service and client.  I can use one of the http bindings and get the service to work correctly when I put my machine's network IP address as the endpoint address and run the client and server from the same machine.  Now, I want to be able to connect to this service from a different machine over the internet.  Clearly it does not work when I use my network IP address in this scenario, but simply putting in my router's broadband IP address does not seem to be doing the trick, either.  Am I just missing a firewall port that I need to open up, or am I trying to do something that should not be possible?</p>\n"},{"tags":["wcf","windows-8","mtom"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13207403,"title":"mtomMessageEncoding in Windows Store Apps","body":"<p>I have written the following program in Windows Store Apps.</p>\n\n<pre><code>CustomBinding b = new CustomBinding() ;\nTextMessageEncodingBindingElement t = new TextMessageEncodingBindingElement();\nHttpTransportBindingElement h = new HttpTransportBindingElement();          \nb.Elements.Add(t);\nb.Elements.Add(h);\n\nMyService client = new MyService(b, new EndpointAddress(\"http://localhost:8080/\"));\n\nvar request = ...;\nvar response = client.Service000(request);\n</code></pre>\n\n<p>In Service000, request message is Utf-8 encoding, but response message is Mtom Encoding like following.</p>\n\n<pre><code>mime-version: 1.0\nContent-Type: Multipart/Related;\nboundary=4aa7d814-adc1-47a2-8e1c-07585b9892a4;\ntype=application/xop+xml;\nstart=&lt;14629f74-2047-436c-8046-5cac76d280fc@uuid&gt;;\nstartinfo=application/soap+xml\n\n--4aa7d814-adc1-47a2-8e1c-07585b9892a4\nContent-Type: application/xop+xml; type=\"application/soap+xml\"\n                charset=UTF-8\nContent-Transfer-Encoding: binary\nContent-ID: &lt;14629f74-2047-436c-8046-5cac76d280fc@uuid&gt;\n\n&lt;soap:Envelope&gt;\n....\n&lt;/soap:Envelope&gt;\n\n--4aa7d814-adc1-47a2-8e1c-07585b9892a4\nContent-Type: image/jpeg;\nContent-Transfer-Encoding: binary\nContent-ID: &lt;1c696bd7-005a-48d9-9ee9-9adca11f8892@uuid&gt;\n\nBinary Scan Data\n--4aa7d814-adc1-47a2-8e1c-07585b9892a4--\n</code></pre>\n\n<p>I want to process response message by MtomMwssageEncodeingBindingElement.\nBut WinRT doesn't support MtomMwssageEncodeingBindingElement.\nIs there any way to  process Mtom Enconding message?</p>\n"},{"tags":["wcf","windows-server-2003"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13207900,"title":"WCF does not working properly on Server 2003 with IIS6","body":"<p>I am trying to setup WCF on IIS6, Windows Server 2003 SP2. Currently if I access the .svc in my browser it gives the expected page, and .svc?wsdl can give me the correct SOAP definition. However, if I try to add an ajax endpoint, it will just response me with 400.</p>\n\n<p>The web.config corresponding part is as following:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n        &lt;standardEndpoints&gt;\n            &lt;webHttpEndpoint&gt;\n                &lt;standardEndpoint name=\"ajaxEndpointConfig\" crossDomainScriptAccessEnabled=\"false\" /&gt;\n            &lt;/webHttpEndpoint&gt;\n        &lt;/standardEndpoints&gt;\n        &lt;bindings&gt;\n            &lt;webHttpBinding /&gt;\n        &lt;/bindings&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"\"&gt;\n                    &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;services&gt;\n            &lt;service name=\"PartyBuilding.Service.IPublic\"&gt;\n                &lt;endpoint address=\"ajax\" kind=\"webHttpEndpoint\" endpointConfiguration=\"ajaxEndpointConfig\" contract=\"PartyBuilding.Service.IPublic\"/&gt;\n            &lt;/service&gt;\n            &lt;service name=\"PartyBuilding.Service.IAdminService\"&gt;\n                &lt;endpoint address=\"ajax\" kind=\"webHttpEndpoint\" endpointConfiguration=\"ajaxEndpointConfig\" contract=\"PartyBuilding.Service.IAdminService\"/&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I try to access the empty service method DoWork() but it just give me 400.</p>\n\n<p>The same code works properly on my Server 2008 R2. My guess is there are some hidden settings on Server 2003 with IIS6 which block.</p>\n\n<p>[Update]</p>\n\n<p>I turned on server trace and here is the error message if I try to access the ajax endpoint.</p>\n\n<pre><code>There is a problem with the XML that was received from the network. See inner exception for more details.\n</code></pre>\n\n<p>I already specified that the request format is JSON.</p>\n\n<pre><code>    [OperationContract]\n    [WebGet(BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\n    void DoWork();\n</code></pre>\n\n<p>The VS WcfTestClient tool can invoke the service methods with TCP with no problem</p>\n\n<p>Any idea?\nThanks.</p>\n\n<p><b>[Solved]</b>\nIt was not about IIS 6 or Server 2003. It was really stupid mistake. In the web.config file, the definition of the endpoint: <code>&lt;service name=\"PartyBuilding.Service.IPublic\"&gt;</code>. The name should be the service name instead of the name of the interface. After I change it to <code>&lt;service name=\"PartyBuilding.Service.Public\"&gt;</code> everything works.</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13159956,"title":"WCF 4.0 template project & trying to validate a user","body":"<p>Am using WCF 4.0 template project &amp; trying to validate a user using </p>\n\n<p>`public class CustomUserNameValidator : UserNamePasswordValidator\n{</p>\n\n<p>}`</p>\n\n<p>but ,this is not working or hitting the break point ,</p>\n\n<p>my web.config as given below . am checking in VS, No certificate used</p>\n\n<p></p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;webHttpBinding&gt;\n    &lt;binding name=\"CustomUserNamePassword\"&gt;\n      &lt;security mode=\"TransportCredentialOnly\"&gt;\n        &lt;transport clientCredentialType=\"Basic\"&gt;&lt;/transport&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;\n&lt;/bindings&gt;\n\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"CustomUserNamePassword\"&gt;\n      &lt;serviceCredentials&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"corker.CustomUserNameValidator, corker\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n\n\n&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n\n&lt;standardEndpoints&gt;\n  &lt;webHttpEndpoint&gt;\n    &lt;standardEndpoint name=\"\" helpEnabled=\"true\" automaticFormatSelectionEnabled=\"true\" faultExceptionEnabled=\"true\"&gt;\n    &lt;/standardEndpoint&gt;\n  &lt;/webHttpEndpoint&gt;\n&lt;/standardEndpoints&gt;\n</code></pre>\n\n<p></p>\n\n<p>Can any one help me out of this.</p>\n"},{"tags":["c#","wcf","iis-7.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13201526,"title":"Problems accessing WCF service via the web","body":"<p>Thanks to stackoverflow (mostly), I have created a WCF service that is able to pull data from our ms sql database and relay it back in a json format. The service works as expected locally and on its home server within our network. However, I can't seem to access the service when outside the network.</p>\n\n<p>Are there additional parameters needed in the code to accommodate being published over the web or is it possibly just a host setup and has nothing to do with WCF or the service?</p>\n\n<p>The server is 2008 R2 &amp; IIS 7.5 which is currently hosting a dozen or so of our websites.  We have setup a port for the service as well.</p>\n\n<p>This is the web.config file I am using:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;customErrors mode=\"Off\" /&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"&gt;\n    &lt;/serviceHostingEnvironment&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"SrvcBehavior\" name=\"Service.svc\"&gt;\n        &lt;endpoint address=\"JSON\" behaviorConfiguration=\"JSONEndpointBehavior\" binding=\"webHttpBinding\" bindingConfiguration=\"\" name=\"RESTEP\" contract=\"Service.Isvc\" /&gt;\n        &lt;endpoint address=\"SOAP\" binding=\"basicHttpBinding\" name=\"Basic\" contract=\"Service.Isvc\" /&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"JSONEndpointBehavior\"&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"SrvcBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"conn\" connectionString=\"server=SERVER-DATABASE\\SQL2005;database=myDatabase;uid=USERID;password=USERPASSWORD;\" /&gt;\n  &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#",".net","json","wcf","wcf-ria-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13206079,"title":"How to get the response and request in JSON format?","body":"<p>I'm not getting the output in JSON Format. Here is the code</p>\n\n<p>---- <strong>IService1.cs</strong> ----</p>\n\n<pre><code>[ServiceContract]\npublic interface IService1\n{\n    [OperationContract]\n    [WebInvoke(Method = \"GET\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = \"currency\")]\n    List&lt;Employee&gt; GetAllEmployeesMethod();\n\n     [OperationContract]\n     string TestMethod();\n\n     [OperationContract]\n     [WebInvoke(Method = \"GET\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = \"players\")]\n     List&lt;Person&gt; GetPlayers();\n\n}\n</code></pre>\n\n<p>---- <strong>Service1.svc.cs</strong> ----</p>\n\n<pre><code>public List&lt;Employee&gt; GetAllEmployeesMethod()\n{\n    List&lt;Employee&gt; mylist = new List&lt;Employee&gt;();\n\n    using (SqlConnection conn = new SqlConnection(\"--connection string--\"))\n    {\n        conn.Open();\n\n        string cmdStr = String.Format(\"Select customercode,CurrencyCode,CurrencyDesc from Currency\");\n        SqlCommand cmd = new SqlCommand(cmdStr, conn);\n        SqlDataReader rd = cmd.ExecuteReader();\n\n        if (rd.HasRows)\n        {\n            while (rd.Read())\n                mylist.Add(new Employee(rd.GetInt32(0), rd.GetString(1), rd.GetString(2)));\n        }\n        conn.Close();\n    }\n\n\n    return mylist;\n}\n</code></pre>\n\n<p>---- <strong>web.config</strong> ----</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;?xml version=\"1.0\"?&gt;\n  &lt;configuration&gt;\n &lt;appSettings/&gt;\n &lt;connectionStrings/&gt;\n &lt;system.web&gt;\n&lt;compilation debug=\"true\" targetFramework=\"4.0\"/&gt;   \n&lt;authentication mode=\"Windows\"/&gt;    \n\n&lt;pages controlRenderingCompatibilityVersion=\"3.5\" clientIDMode=\"AutoID\"/&gt;\n&lt;/system.web&gt;\n &lt;system.webServer&gt;\n&lt;directoryBrowse enabled=\"true\"/&gt;\n&lt;/system.webServer&gt;\n &lt;system.serviceModel&gt;\n&lt;services&gt;\n  &lt;service name=\"JSONSerialization.Service1\" behaviorConfiguration=\"EmpServiceBehaviour\"&gt;\n    &lt;!-- Service Endpoints --&gt;\n    &lt;endpoint address=\"\" binding=\"webHttpBinding\" contract=\"JSONSerialization.IService1\" behaviorConfiguration=\"web\" &gt;\n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"EmpServiceBehaviour\"&gt;        \n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;          \n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n  &lt;endpointBehaviors&gt;\n    &lt;behavior name=\"web\"&gt;\n      &lt;webHttp automaticFormatSelectionEnabled=\"true\" defaultOutgoingResponseFormat=\"Json\" helpEnabled=\"true\" defaultBodyStyle=\"Bare\"/&gt;          \n    &lt;/behavior&gt;\n  &lt;/endpointBehaviors&gt;\n  &lt;/behaviors&gt;   \n  &lt;/system.serviceModel&gt;  \n  &lt;/configuration&gt;\n</code></pre>\n\n<p>and when I run this service, I get the data in \n<img src=\"http://i.stack.imgur.com/Bt4Pq.jpg\" alt=\"out put\"></p>\n\n<p>but I want the result to be in JSON format \n<br><strong>Example:</strong> <code>{\"currencycode\":\"INR\",\"DESCRIPTION\":\"Indian Rupees\",\"customercode\" : \"1001\"},....</code></p>\n"},{"tags":["c#","wcf","rest"],"answer_count":3,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":151,"score":11,"question_id":12783677,"title":"WCF REST Push Stream Service","body":"<p>Need some help figuring out what I am looking for. Basically, I need a service in which the <code>Server</code> dumps a bunch of XML into a stream (over a period of time) and every time the dump occurs <code>N</code> number of clients read the dump.</p>\n\n<p><strong>Example</strong>: Every time one of a <code>1000</code> stocks goes up by <code>5</code> cents, the service dumps some XML into a stream. The connecting applications grab the information from the stream.</p>\n\n<p>I don't think the connection will ever close, as there needs to be something reading the stream for new data.</p>\n\n<p>This needs to adhere to WCF REST standards, is there something out there that I'm looking for?  <br>In the end, it's just a non-stop stream of data.</p>\n\n<p>Update: Looks like the service needs to be a multi-part/mixed content type.</p>\n"},{"tags":["c#","asp.net","wcf","printing","shdocvw"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":153,"score":0,"question_id":12423108,"title":"SHDocVw InternetExplorer printing Serverside failing -- COM exception","body":"<p>Am trying to print a file from server side via a WCF service deployed on IIS machine.\nThe following code gets worked on Win 2oo3 machine perfectly. But the same code is throwing a COM exception. Any idea about this. I guess its related to some permissions.\nHere is the code </p>\n\n<pre><code>public void Print(string htmlFilename, string printer, short copies)\n        {\n            string currDefault = string.Empty;\n            try\n            {\n                currDefault = GetDefaultPrinter();\n                myPrinters.SetDefaultPrinter(printer);\n                for (int i = 0; i &lt; copies; i++)\n                {\n                    documentLoaded = false;\n                    documentPrinted = false;\n\nInternetExplorer  ie = new InternetExplorer  ();\n                    ie.DocumentComplete += new SHDocVw.DWebBrowserEvents2_DocumentCompleteEventHandler(ie_DocumentComplete);\n                    ie.PrintTemplateTeardown += new SHDocVw.DWebBrowserEvents2_PrintTemplateTeardownEventHandler(ie_PrintTemplateTeardown);\n                    object missing = Missing.Value;\n\n                    ie.Navigate(htmlFilename, ref missing, ref missing, ref missing, ref missing);\n                    while (!documentLoaded &amp;&amp; ie.QueryStatusWB(SHDocVw.OLECMDID.OLECMDID_PRINT) != SHDocVw.OLECMDF.OLECMDF_ENABLED)\n                        Thread.Sleep(100);\n\n\n                    ie.ExecWB(SHDocVw.OLECMDID.OLECMDID_PRINTPREVIEW, SHDocVw.OLECMDEXECOPT.OLECMDEXECOPT_DODEFAULT, ref missing, ref missing);\n\n                    ie.ExecWB(SHDocVw.OLECMDID.OLECMDID_PRINT, SHDocVw.OLECMDEXECOPT.OLECMDEXECOPT_DONTPROMPTUSER, ref missing, ref missing);\n                    while (!documentPrinted)\n                        Thread.Sleep(100);\n\n                    ie.DocumentComplete -= ie_DocumentComplete;\n                    ie.PrintTemplateTeardown -= ie_PrintTemplateTeardown;\n                    ie.Quit();\n                }\n            }\n            catch { throw; }\n            finally\n            {\n                myPrinters.SetDefaultPrinter(currDefault);\n            }\n        }\n</code></pre>\n\n<p>And the Com Exception is as below exactly while creating an object for internetexplorer.</p>\n\n<blockquote>\n  <p>[ERRORLOG] Retrieving the COM class factory for component with CLSID\n  {0002DF01-0000-0000-C000-000000000046} failed due to the following\n  error: 80080005 Server execution failed (Exception from HRESULT:\n  0x80080005 (CO_E_SERVER_EXEC_FAILURE)). :    at\n  System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean\n  publicOnly, Boolean noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck)    at\n  System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean\n  skipCheckThis, Boolean fillCache)    at\n  System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly,\n  Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean\n  fillCache)    at System.Activator.CreateInstance(Type type, Boolean\n  nonPublic)    at System.Activator.CreateInstance(Type type) \n  [/ERRORLOG]</p>\n</blockquote>\n\n<p>Moreover if i try to create an object as InternetExplorerMedium. then its working in 2008 but not in Win server 2003. I was very much clue less... Any help regarding will help a lot.</p>\n\n<p>Regards,\nPavan N </p>\n"},{"tags":["multithreading","wcf","asynchronous","reporting-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":16,"score":-2,"question_id":13205422,"title":"ReportExecution2005.asmx pdf multithreading","body":"<p>I have created a web service that consumes reportexecution2005.asmx that calls 4 different reports (one for each department) about 150 times each report(with different parameters) and generates about 600 pdfs using file IO. Ideally I want it to be multithreaded so it can run multiple reports at the same time and start generating the pdf. \nI'd appreciate any help on this.</p>\n"},{"tags":["wcf","asp-classic","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12734931,"title":"Problems deserialize Message Queue (Modified)","body":"<p>I am making a WCF service with MSMQ, the service sends an instance of the Person class, this instance is the content of the message from the queue. When mansaje is sent to the queue is serialized in a way that does not remain as an XML structure, otherwise as binary serialized in a message. I would like to know how to serialize the message so that it is not in binary and can be deserialized as xml or deserialize the message in binary.</p>\n\n<pre><code>00 01 00 01 04 02 23 6E ......#n\n65 74 2E 6D 73 6D 71 3A et.msmq:\n2F 2F 6C 6F 63 61 6C 68 //localh\n6F 73 74 2F 70 72 69 76 ost/priv\n61 74 65 2F 6D 69 63 6F ate/mico\n6C 61 03 07 56 02 0B 01 la..V...\n73 04 0B 01 61 06 56 08 s...a.V.\n44 0A 1E 00 82 99 36 68 D...??6h\n74 74 70 3A 2F 2F 74 65 ttp://te\n6D 70 75 72 69 2E 6F 72 mpuri.or\n67 2F 49 50 72 6F 63 65 g/IProce\n73 61 72 52 65 67 69 73 sarRegis\n74 72 6F 73 2F 50 72 6F tros/Pro\n63 65 73 61 72 52 65 67 cesarReg\n69 73 74 72 6F 44 0C 1E istroD..\n00 82 99 23 6E 65 74 2E .??#net.\n6D 73 6D 71 3A 2F 2F 6C msmq://l\n6F 63 61 6C 68 6F 73 74 ocalhost\n2F 70 72 69 76 61 74 65 /private\n2F 6D 69 63 6F 6C 61 01 /micola.\n56 0E 40 10 50 72 6F 63 V.@.Proc\n65 73 61 72 52 65 67 69 esarRegi\n73 74 72 6F 08 13 68 74 stro..ht\n74 70 3A 2F 2F 74 65 6D tp://tem\n70 75 72 69 2E 6F 72 67 puri.org\n2F 09 01 69 29 68 74 74 /..i)htt\n70 3A 2F 2F 77 77 77 2E p://www.\n77 33 2E 6F 72 67 2F 32 w3.org/2\n30 30 31 2F 58 4D 4C 53 001/XMLS\n63 68 65 6D 61 2D 69 6E chema-in\n73 74 61 6E 63 65 40 08 stance@.\n5F 70 65 72 73 6F 6E 61 _persona\n40 06 43 65 64 75 6C 61 @.Cedula\n99 07 31 32 33 34 35 36 ?.123456\n37 40 06 4E 6F 6D 62 72 7@.Nombr\n65 99 06 52 6F 62 65 72 e?.Rober\n74 40 0E 50 72 69 6D 65 t@.Prime\n72 41 70 65 6C 6C 69 64 rApellid\n6F 99 07 53 70 65 6E 63 o?.Spenc\n65 72 40 0F 53 65 67 75 er@.Segu\n6E 64 6F 41 70 65 6C 6C ndoApell\n69 64 6F 99 04 48 61 6C ido?.Hal\n6C 40 09 44 69 72 65 63 l@.Direc\n63 69 6F 6E 99 15 55 6E cion?.Un\n69 74 65 64 20 53 74 61 ited Sta\n74 65 2C 20 46 6C 6F 72 te, Flor\n69 64 61 01 01 01 01    ida....\n</code></pre>\n"},{"tags":[".net","wcf","wcf-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13204107,"title":"Can I have a WCF application that has two endpoints. One with Windows Security and one without?","body":"<p>I have read several posts (here on SO and on MSDN) that supposedly show how I can have two endpoints for my WCF service.  But and I can't seem to get this to work.  I tried what they show, but it still does not work.</p>\n\n<p>Here is what I have now:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;services&gt;\n    &lt;service name=\"MyServiceProject.MyServiceClass\"&gt;\n      &lt;endpoint address=\"MyService.svc\"\n                  binding=\"basicHttpBinding\"\n                  bindingName=\"normalBasicHttpBinding\"\n                  contract=\"MyContractsProject.IMyServiceClass\" /&gt;\n\n        &lt;endpoint address=\"SecuredMyService.svc\"\n                  binding=\"basicHttpBinding\"\n                  bindingName=\"secureBasicHttpBinding\"\n                  contract=\"MyContractsProject.IMyServiceClass\" /&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n  &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n          &lt;binding name=\"normalBasicHttpBinding\" maxBufferSize=\"5242880\"\n                    maxBufferPoolSize=\"5242880\"\n                    maxReceivedMessageSize=\"5242880\"&gt;\n              &lt;readerQuotas maxArrayLength=\"16384\"\n                            maxStringContentLength=\"5242880\" /&gt;\n          &lt;/binding&gt;\n\n        &lt;binding name=\"secureBasicHttpBinding\" maxBufferSize=\"5242880\"\n                    maxBufferPoolSize=\"5242880\"\n                    maxReceivedMessageSize=\"5242880\"&gt;\n          &lt;security mode=\"Transport\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" /&gt;\n          &lt;/security&gt;\n          &lt;readerQuotas maxArrayLength=\"16384\"\n                        maxStringContentLength=\"5242880\" /&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n  &lt;/bindings&gt;\n  &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n          &lt;behavior&gt;\n              &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n              &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n  &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Variations on this that I have tried:</p>\n\n<ul>\n<li>Taking out the security</li>\n<li>Having the first address be blank and the second just \"secure\" then going to <code>http://MyNormalEndpoint/MyService.svc/secure</code> (was blank and WCF Storm could not connect)</li>\n<li>Adding a &lt;<code>Host&gt;</code> section that is a hard reference to the deploy path.  (I don't want to do this as my service has to deploy to several different locations.  But it did not work anyway)</li>\n<li>Having just one endpoint (the secure one)</li>\n<li>Using two different binding types (wsHttpBinding).</li>\n</ul>\n\n<p>None of these has worked.</p>\n\n<p>And now calls to my normal service are returning 404.  (So I have messed something up).  If you want to see my original (working) config it can be found <a href=\"https://gist.github.com/4004836\" rel=\"nofollow\">here</a>.</p>\n\n<p>Thanks for any help.</p>\n"},{"tags":["visual-studio","wcf"],"answer_count":7,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":4024,"score":6,"question_id":199014,"title":"Getting \"Object is read only\" error when setting ClientCredentials in WCF","body":"<p>I have a proxy object generated by Visual Studio (client side) named ServerClient. I am attempting to set ClientCredentials.UserName.UserName/Password before opening up a new connection using this code:</p>\n\n<pre><code>InstanceContext context = new InstanceContext(this);\n\nm_client = new ServerClient(context);\nm_client.ClientCredentials.UserName.UserName = \"Sample\";\n</code></pre>\n\n<p>As soon as the code hits the UserName line it fails with an \"Object is read-only\" error. I know this can happen if the connection is already open or faulted, but at this point I haven't called context.Open() yet. </p>\n\n<p>I have configured the Bindings (which uses netTcpBinding) to use Message as it's security mode, and MessageClientCredentialType is set to UserName.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["wcf","web-services","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":13,"score":2,"question_id":13201173,"title":"Is there something similar to named pipe transport for wcf in IIS6?","body":"<p>I have a web service that will only be called from the same box.  In IIS 7 I have used named pipe endpoints for security and speed.  the project I am working on now has the same requirements but will be on server 2003 IIS 6.  What are my options to restrict access to only the local machine?  Thanks!</p>\n"},{"tags":["c#","wcf","design-patterns",".net-3.5","progress-bar"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13201631,"title":"Show Progress Bar for task of one Process in another Process","body":"<p>I have a system with the following components:</p>\n\n<p>Process A - A console app that acts as a service - Services clients through WCF</p>\n\n<p>Process B - A console app that acts as a service - Services clients through WCF</p>\n\n<p>Process C - A small WInForm app that acts as a service - Services clients through WCF</p>\n\n<p>Though we can start each of the above processes individually by double clicking but we decided to have another Process \"Service Manager\" that hides the individual UI's and starts all the processes above and shows a kind of consolidated UI. The communication between the Service Manager Process and the different processes is right now done through TCP but we can move that to WCF anytime we wish.\nBefore anybody asks, so TCP was initially used for \"Mono\" but that is not on the cards right now.</p>\n\n<p>Now when Process A is started from the ServiceManager, lets say Process A is performing a time consuming task, since it does not have its own UI, so Service Manager needs to show a progress bar for the Process A task.</p>\n\n<p>In Process A i have every information to show a deterministic progress bar, but how do i send that data over to the Service Manager. Like \"Step 1 of 1000\" etc.</p>\n\n<p>Is there a recommended \"Design Pattern\" or any ideas that i can start with.\nEvery process started from the Service Manager needs to use the same code for sending any progress task data over to the Service Manager(basically implement some interface). Every Process has its own progress bar on the Service Manager UI.</p>\n\n<p>.Net 3.5</p>\n\n<p>used\nLanguage C#</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","wcf","weboperationcontext","operationcontext"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13201487,"title":"WCF how can I get the current configuration for an existing serviceContract instance","body":"<p>I'm building a WCF service that will be hosted in an mvc application via a service route.  I'm trying to test the service.  My issue is in the middle of the call, the service calls out to another service. I want to use</p>\n\n<pre><code>class MyService{\n     private IOtherService _otherSvc;\n     public MyService(IOtherService otherSvc){\n      _otherSvc = otherSvc;\n     }\n\n  public Foo(string arg){\n      //****here is my problem\n      using(new OperationContextScope(***I want to use the _otherSvc instance cast as IContextChannel***){\n         /*\n            an exception gets thrown here. \n            I can cast to IContextChannel but the\n            exception is thrown because there is no configuration for the endpoint.\n            How can I correct this?\n         */\n         return _otherSvc.GetFoo(arg); \n      }\n  }\n}\n</code></pre>\n"},{"tags":["wcf","http","rest","https","webhttpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2852,"score":0,"question_id":3066127,"title":"WCF configuration for WebHttpBinding(Restful) for supporting both HTTP and HTTPS","body":"<p>We are using AJAX Cascading dropdown and AutoComplete functionality with Restful WebService Services providing data. With one endpoint(non-secured) eveything was working fine, until we tried same web page with https. Our Webappplication needs to support both. Our of very few articiles/blogs on this issue I found 2 which applies to my requirements.   </p>\n\n<ol>\n<li><a href=\"http://blog.abstractlabs.net/2009/02/ajax-wcf-services-and-httphttps.html\" rel=\"nofollow\">http://blog.abstractlabs.net/2009/02/ajax-wcf-services-and-httphttps.html</a>  </li>\n<li><a href=\"http://www.mydotnetworld.com/post/2008/10/18/Use-a-WCF-Service-with-HTTP-and-HTTPS-in-C.aspx\" rel=\"nofollow\">http://www.mydotnetworld.com/post/2008/10/18/Use-a-WCF-Service-with-HTTP-and-HTTPS-in-C.aspx</a>  </li>\n</ol>\n\n<p>I followed same pattern, added 2 endpoints, assuming WCF will pickup appropriate endpoint looking at HTTP or HTTPS protocol. Worked like a charm in my dev machine(XP-IIS5) and 1 Server 2003R2(IIS6), however did work in Production server 2003-IIS6. Website in IIS is exact same(including permission etc).\nThe error it throws - Error 500(Could not find a base address that matches scheme https for the endpoint with binding WebHttpBinding. Registered base address schemes are [http]..)</p>\n\n<p>Here's the sample configuration(ignore typos)</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"SecureBinding\"&gt;\n          &lt;security mode=\"Transport\"/&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"SearchServiceAspNetAjaxBehavior\"&gt;\n          &lt;enableWebScript /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service name=\"SearchService\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"SearchServiceAspNetAjaxBehavior\"\n            binding=\"webHttpBinding\" contract=\"SearchServiceContract\" /&gt;\n       &lt;endpoint address=\"\" behaviorConfiguration=\"SearchServiceAspNetAjaxBehavior\"\n            binding=\"webHttpBinding\" bindingConfiguration=\"SecureBinding\" contract=\"SearchServiceContract\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Any help on this is highly appreciated ?</p>\n\n<p>Thanks\nKSS</p>\n"},{"tags":[".net","wcf","silverlight","asynchronous",".net-4.5"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13200145,"title":"usage of async methods for webservice","body":"<p>I want to program a little Silverlight application where I have three DataGrids.\nEach Datagrid gets its data from a webservice using async methods. \nNow I want the first data grid to get the data from the webservice and than get the second datagrid the data from the webservice with parameters from the selected row in the first datagrid and the third datagrid with parameters from the first two datagrids.\nThe first datagrid gets the data in the MainPage method via registering the event handler and than use the async method.</p>\n\n<p>Now my problem is that I use the async methods for the other datagrids in the SelectionChanged (event handling) methods and I guess that the concept of this is wrong, because after selecting something in datagrid 2 and going back to datagrid 1 all datagrids dissapear.</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Net;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.Windows.Documents;\nusing System.Windows.Input;\nusing System.Windows.Media;\nusing System.Windows.Media.Animation;\nusing System.Windows.Shapes;\nusing System.ServiceModel;\nusing Rebat.SymptomeService;\n\n\nnamespace Rebat\n{\n    public partial class MainPage : UserControl\n    {\n        ServiceClient client = new ServiceClient();\n\n        public MainPage()\n        {\n            InitializeComponent();\n            ServiceClient client = new ServiceClient();\n           client.SymptomeListCompleted += new EventHandler&lt;SymptomeListCompletedEventArgs&gt;(client_SymptomeListCompleted);\n            client.SymptomeListAsync();\n        }\n\n\n        void client_SymptomeListCompleted(object sender, SymptomeListCompletedEventArgs e)\n        {\n            CustomerGrid.ItemsSource = e.Result;\n        }\n        void client_CustomerListCompleted(object sender, CustomerListCompletedEventArgs e)\n        {\n           CustomerGrid2.ItemsSource = e.Result;\n        }\n        void client_SalzListCompleted(object sender, SalzListCompletedEventArgs e)\n        {\n            SalzGrid.ItemsSource = e.Result;\n        }\n\n        private void CustomerGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)\n        {\n            Symptome sympt = CustomerGrid.SelectedItem as Symptome;\n            client.CustomerListCompleted += new EventHandler&lt;CustomerListCompletedEventArgs&gt;(client_CustomerListCompleted);\n            client.CustomerListAsync(sympt.sId.ToString());\n\n        }\n\n        private void CustomerGrid2_SelectionChanged(object sender, SelectionChangedEventArgs e)\n        {\n            Symptome2 sympt2 = CustomerGrid2.SelectedItem as Symptome2;\n            client.SalzListCompleted += new EventHandler&lt;SalzListCompletedEventArgs&gt;(client_SalzListCompleted);\n            //this is the PROBLEM:\n            client.SalzListAsync(sympt2.sy1.ToString(), sympt2.sy2.ToString());\n        }\n\n    }\n}\n</code></pre>\n\n<p>What do I have to change, or how do I have to use the async methods?\nCan you use an async method within an event handling method? Does this apply to the usage of consuming a webservice?</p>\n"},{"tags":["asp.net","wcf","ninject"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13200105,"title":"Ninject Wcf Constructor Injection Not Working","body":"<p>I am trying to get constructor injection working in a WCF Application but it is calling my parameter-less constructor instead of the one that has [inject] as the parameter.  I installed Ninject WCF via Nuget and it installed the dependencies for me.</p>\n\n<p>Here are my packages:</p>\n\n<pre><code>&lt;packages&gt;\n    &lt;package id=\"Microsoft.Web.Infrastructure\" version=\"1.0.0.0\" targetFramework=\"net40\" /&gt;\n    &lt;package id=\"Ninject\" version=\"3.0.1.10\" targetFramework=\"net40\" /&gt;\n    &lt;package id=\"Ninject.Extensions.Wcf\" version=\"3.0.0.5\" targetFramework=\"net40\" /&gt;\n    &lt;package id=\"Ninject.Web.Common\" version=\"3.0.0.7\" targetFramework=\"net40\" /&gt;\n    &lt;package id=\"WebActivator\" version=\"1.5.1\" targetFramework=\"net40\" /&gt;\n&lt;/packages&gt;\n</code></pre>\n\n<p>It created a NinjectWebCommon.cs class for me and put it in App_Start.  Below are my kernal bindings from that file.  Note: I am using entity framework pocos and the context is required in order to instantiate a repo.</p>\n\n<pre><code>private static void RegisterServices(IKernel kernel)\n{\n    var camContext = new STCAMx0Entities();\n    var iseaContext = new iseaEntities();\n\n    kernel.Bind&lt;IRepository&lt;EnrgyProfl&gt;&gt;().To&lt;EnrgyProflRepository&gt;().InRequestScope().WithConstructorArgument(\"context\", camContext);\n    kernel.Bind&lt;IRepository&lt;GenUnitCost&gt;&gt;().To&lt;GenUnitCostRepository&gt;().InRequestScope().WithConstructorArgument(\"context\", camContext);\n    kernel.Bind&lt;IRepository&lt;LglGenUnit&gt;&gt;().To&lt;LglGenUnitRepository&gt;().InRequestScope().WithConstructorArgument(\"context\", camContext);\n\n    kernel.Bind&lt;IRepository&lt;dly_sch&gt;&gt;().To&lt;DlySchRepository&gt;().InRequestScope().WithConstructorArgument(\"context\", iseaContext);\n    kernel.Bind&lt;IRepository&lt;DealModel&gt;&gt;().To&lt;WtDealRepository&gt;().InRequestScope().WithConstructorArgument(\"context\", iseaContext);\n    kernel.Bind&lt;IRepository&lt;EnrgyProfl&gt;&gt;().To&lt;WtEnergyProfileRepository&gt;().InRequestScope().WithConstructorArgument(\"context\", iseaContext);\n}    \n</code></pre>\n\n<p>In my service, I have this as my constructor:</p>\n\n<pre><code>[Inject]\npublic CamService(IRepository&lt;dly_sch&gt; dlySchRepo, IRepository&lt;dly_unit&gt; dlyUnitRepo, IRepository&lt;LglGenUnit&gt; lglGenRepo, IRepository&lt;EnrgyProfl&gt; enrgyProflRepo, IRepository&lt;DealModel&gt; wtDealRepo)\n{\n    _dlySchRepo = dlySchRepo;\n    _dlyUnitRepo = dlyUnitRepo;\n    _lglGenRepo = lglGenRepo;\n    _enrgyProflRepo = enrgyProflRepo;\n    _wtDealRepo = wtDealRepo;\n}\n</code></pre>\n\n<p>Here is an example of one of my repositories:</p>\n\n<pre><code>public class DlySchRepository : IRepository&lt;dly_sch&gt;\n{\n    private static readonly CommonLogger Log = LogFactory.Singleton.Create(typeof (DlySchRepository));\n    private iseaEntities _context = new iseaEntities();\n    public DlySchRepository(iseaEntities context) { _context = context; }\n    public DlySchRepository() { }\n...\n</code></pre>\n\n<p>Please help!!!!</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","wcf"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":971,"score":2,"question_id":8448147,"title":"Problems with X509Store Certificates.Find FindByThumbprint","body":"<p>I'm having a problem when I use the method <code>X509Store.Certificates.Find</code></p>\n\n<pre><code>public static X509Certificate2 FromStore(StoreName storeName, StoreLocation storeLocation, X509FindType findType, string findValue)\n{\n    X509Store store = new X509Store(storeName, storeLocation);\n    store.Open(OpenFlags.ReadOnly);\n    try\n    {\n        //findValue = \"7a6fa503ab57b81d6318a51ca265e739a51ce660\"\n        var results = store.Certificates.Find(findType, findValue, true);\n\n        return results[0];                \n    }\n    finally\n    {\n        store.Close();\n    }\n}\n</code></pre>\n\n<p>In this case the Find Method returns 0 results (<code>results.Count == 0</code>), but if I put the findValue as constant the method find the certificate.</p>\n\n<pre><code>public static X509Certificate2 FromStore(StoreName storeName, StoreLocation storeLocation, X509FindType findType, string findValue)\n{\n    X509Store store = new X509Store(storeName, storeLocation);\n    store.Open(OpenFlags.ReadOnly);\n    try\n    {         \n        //findValue= \"7a6fa503ab57b81d6318a51ca265e739a51ce660\"\n        var results = store.Certificates.Find(findType, \"7a6fa503ab57b81d6318a51ca265e739a51ce660\", true);\n        return results[0];\n    }\n    finally\n    {\n        store.Close();\n    }\n}\n</code></pre>\n"},{"tags":[".net","vb.net","wcf","soap","wcf-security"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13125367,"title":"Why is my client certificate not being included in the TLS handshake?","body":"<p>I wrote a Windows service a few years back that processed data from several sources, one of which was a third party SOAP Web Service. It authenticated with this Web Service using a client certificate provided by the third party. This worked fine at the time, and is still working fine on the original machine it was deployed to, but now they are migrating to a new machine where the connection attempt is throwing an exception with the message:</p>\n\n<blockquote>\n  <p>The HTTP request was forbidden with client authentication scheme\n  'Anonymous'</p>\n</blockquote>\n\n<p>The same thing is now also occurring on my development machine. This is the code that configures the connection to the web service:</p>\n\n<pre><code>Friend Shared Function GetProperlyConfiguredConnection() As SEMOService.MIWebServiceClient\n    ' Ensure that the settings are valid\n    ValidateSettings()\n\n    Dim destAddress As New System.ServiceModel.EndpointAddress(Url)\n    ' The service uses SOAP 1.1 which is what BasicHttpBinding uses. WSHttpBinding uses SOAP 1.2.\n    'Dim destBinding As New System.ServiceModel.WSHttpBinding\n    Dim destBinding As New System.ServiceModel.BasicHttpBinding\n    With destBinding\n        .CloseTimeout = New TimeSpan(0, 1, 0)\n        .OpenTimeout = New TimeSpan(0, 1, 0)\n        .ReceiveTimeout = New TimeSpan(0, 10, 0)\n        .SendTimeout = New TimeSpan(0, 1, 0)\n        .BypassProxyOnLocal = False\n        .HostNameComparisonMode = ServiceModel.HostNameComparisonMode.StrongWildcard\n        .MaxBufferPoolSize = 524288\n        .MaxReceivedMessageSize = 2147483647\n        .MessageEncoding = ServiceModel.WSMessageEncoding.Text\n        .TextEncoding = System.Text.Encoding.UTF8\n        .UseDefaultWebProxy = True\n        .AllowCookies = False\n\n        With .ReaderQuotas\n            .MaxDepth = 32\n            .MaxStringContentLength = 2147483647\n            .MaxArrayLength = 50000000\n            .MaxBytesPerRead = 4096\n            .MaxNameTableCharCount = 16384\n        End With\n\n        .Security.Mode = ServiceModel.BasicHttpSecurityMode.Transport\n        .Security.Transport.ClientCredentialType = ServiceModel.HttpClientCredentialType.Certificate\n    End With\n\n    Dim wcfService As New SEMOService.MIWebServiceClient(destBinding, destAddress)\n\n    ' Load the certificate from the specified file.\n    Dim keyData As Byte()\n    Dim keyFileInfo As New IO.FileInfo(SEMOServiceSettings.KeyFilePath)\n    Dim keyFileReader As New IO.BinaryReader(New IO.FileStream(SEMOServiceSettings.KeyFilePath, IO.FileMode.Open, IO.FileAccess.Read))\n    keyData = keyFileReader.ReadBytes(keyFileInfo.Length)\n    keyFileReader.Close()\n\n    Dim cert As New X509Certificates.X509Certificate2\n    cert = New X509Certificates.X509Certificate2(keyData, SEMOServiceSettings.KeyFilePassword)\n\n    wcfService.ClientCredentials.ClientCertificate.Certificate = cert\n\n    Return wcfService\nEnd Function\n</code></pre>\n\n<p>It is not actually a WCF web service, but Visual Studio didn't seem to mind when auto-generating the client code from the WSDL. The client certificate is loaded up from a file rather than from the certificate store. The same certificate file is in use on all the machines, and appears to be loaded up fine when stepping through the code.</p>\n\n<p>I compared the requests being made from the machine that works to one from my dev machine using WireShark, and it appears that the client certificate is not being included in the handshake when it should be:</p>\n\n<p><a href=\"http://i.imgur.com/meZa2.png\" rel=\"nofollow\">No client certificates</a></p>\n\n<p>This is the corresponding packet from a request on the machine that works:</p>\n\n<p><a href=\"http://i.imgur.com/zMchd.png\" rel=\"nofollow\">Full certificate chain</a></p>\n\n<p>There is much about WCF, SOAP and cryptography that I don't understand, so I am at a bit of a loss as to what could be different about the environments to result in this behaviour, and what needs to change to correct it.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/4090975/how-to-force-wcf-client-to-send-client-certificate\">This question</a> seems to be related, but I can't seem to access any <code>RequireClientCertificate</code> property through code, and am not using an app.config to configure the binding.</p>\n\n<p>It is possible to add a callback to the ServicePointManager class for performing custom validation of the server certificate. Does the base client class or the binding perform some validation of the client certificate before sending it to the server? If so, is there a way I can intervene in that process in the same way that I can for the server certificate validation, so that I can see what is going on?</p>\n"},{"tags":[".net","wcf","proxy","fiddler"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13195265,"title":"WCF service only accessible when Fiddler is turned on","body":"<p>My client application which is on one machine is trying to access a WCF service which is on another machine. </p>\n\n<p>The client application can only access the web service when Fiddler,on the client machine, is switched on. When the latter is switched off, I get the following error:</p>\n\n<blockquote>\n  <p>System.ServiceModel.EndpointNotFoundException: There was no endpoint\n  listening at <a href=\"http://ourServer.com/ProductDataServiceV1.svc\" rel=\"nofollow\">http://ourServer.com/ProductDataServiceV1.svc</a> that could\n  accept the message. This is often caused by an incorrect address or\n  SOAP action. See InnerException, if present, for more details. --->\n  System.Net.WebException: Unable to connect to the remote server --->\n  System.Net.Sockets.SocketException: No connection could be made\n  because the target machine actively refused it 127.0.0.1:8888</p>\n</blockquote>\n\n<p>In the hosts file I've got </p>\n\n<blockquote>\n  <p>192.168.33.55   ourServer.com</p>\n</blockquote>\n\n<p>I've looked at the proxy settings in Windows explorer and all the checkboxes are turned off. I've also done a search for \"127.0.0.1:8888\" on the client machine but couldn't find anything of note. </p>\n\n<p>Moreover, I am able to \"see\" the service <a href=\"http://ourServer.com/ProductDataServiceV1.svc\" rel=\"nofollow\">http://ourServer.com/ProductDataServiceV1.svc</a> in a web browser.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["wcf","wcf-binding","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13198489,"title":"Is there a performance issue if we increase maxStringContentLength to 200000000 in WCF Client configuration file?","body":"<p>I get this exception when I use the default binding settings in configuration file.</p>\n\n<p>The maximum string content length quota (8192) has been exceeded while reading XML data. This quota may be increased by changing the MaxStringContentLength property on the XmlDictionaryReaderQuotas object used when creating the XML reader.</p>\n\n<p>I was able to resolve the error by increasing the maxStringContentLength to 200000000. I also increased the other max sizes to 200000000 as shown below. I am not sure if changing the max sizes randomly to a larger number will cause any performance issues? Do I need to figure out the ideal max sizes depending on how much data will be sent or received in my case? Thank you for any advice.</p>\n\n<pre><code>    &lt;basicHttpBinding&gt;\n      &lt;binding name=\"EPSoap\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n          receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n          bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n          maxBufferSize=\"20000000\" maxBufferPoolSize=\"20000000\" maxReceivedMessageSize=\"20000000\"\n          messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n          useDefaultWebProxy=\"true\"&gt;\n        &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"200000000\" maxArrayLength=\"200000000\"\n            maxBytesPerRead=\"200000000\" maxNameTableCharCount=\"200000000\" /&gt;\n        &lt;security mode=\"Transport\"&gt;\n          &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n              realm=\"\" /&gt;\n          &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n        &lt;/security&gt;\n      &lt;/binding&gt;\n    &lt;/basicHttpBinding&gt;\n</code></pre>\n"},{"tags":["c#",".net","wcf",".net-4.0","request"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13195959,"title":"Wcf - 3 retries before exception?","body":"<p>I was asked to build a mechanism for 3 retries before generating a request exception.</p>\n\n<p>We have this topology : </p>\n\n<p><img src=\"http://i.stack.imgur.com/mBGWv.jpg\" alt=\"enter image description here\"></p>\n\n<p><code>Service1</code> calls <code>Service2</code>.</p>\n\n<p>If 3 times in a row has failed - generate an excpetion.</p>\n\n<p>Is there any retry mechanism in <code>WCF</code> ?</p>\n"},{"tags":["c#","wcf","castle-windsor","aop"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13198224,"title":"Setup Windsor to wrap exceptions in FaultException","body":"<p>I'm thinking of an aspect or interceptor in terms of Windsor that could catch known exceptions thrown from the web service and retrhow it wrapped in <code>FaultException&lt;T&gt;</code>.</p>\n\n<p>Suppose there's a contract</p>\n\n<pre><code>[ServiceContract]\npublic interface IMyContract\n{\n    [OperationContract]\n    [FaultContract(typeof(MyException))]\n    void DoSome();\n}\n</code></pre>\n\n<p>The interceptor bound to the implementing class would find <code>FaultContractAttribute</code> defined on <code>DoSome</code> operation and rethrow <code>FaultException&lt;MyException&gt;</code> when it catches <code>MyException</code>.</p>\n\n<p>Does it make any sense at all? Are there any caveats?</p>\n\n<p>Can you suggest an implementation that would recognize when it's executing in WCF context and do so in that case. And that would rethrow all exceptions when executing not as WCF service (in Unit tests, for example).</p>\n"},{"tags":[".net","wcf","web-services"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":2897,"score":7,"question_id":5807147,"title":"Web Service Configuration Problem","body":"<p>I host 2 WCF web services and 1 standard .NET web service from an application directory.  The .NET service and 1 of the WCF services works perfectly; however, the other WCF service is returning the following error:</p>\n\n<blockquote>\n  <p>The service cannot be activated because it does not support ASP.NET compatibility. ASP.NET compatibility is enabled for this application. Turn off ASP.NET compatibility mode in the web.config or add the AspNetCompatibilityRequirements attribute to the service type with RequirementsMode setting as 'Allowed' or 'Required'.</p>\n</blockquote>\n\n<p>Both WCF web services have the line</p>\n\n<pre><code>&lt;AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)&gt; _\n</code></pre>\n\n<p>and the web.config file has </p>\n\n<pre><code>&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n</code></pre>\n\n<p>To add more confusion to the mix, when I change</p>\n\n<pre><code>AspNetCompatibilityRequirementsMode.Allowed\n</code></pre>\n\n<p>to</p>\n\n<pre><code>AspNetCompatibilityRequirementsMode.Required\n</code></pre>\n\n<p>the service works just fine.</p>\n\n<p>Also, changing</p>\n\n<pre><code>&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"false\" /&gt;\n</code></pre>\n\n<p>in the web.config also allows all web services to function.</p>\n\n<p>This problem is presenting on both IIS7 and our staging enviorment hosted on SBS2003 running IIS6.</p>\n\n<p>Thank you in advance for all of your help.<br>\nJake</p>\n\n<p><strong>UPDATE:</strong><br>\nI was able to get it to work by deleting the application on my development system; however, the problem still persists on our staging server, even after deleting the application and recreating it there.</p>\n\n<p><strong>WORK AROUND:</strong>  </p>\n\n<ol>\n<li>Delete the Application from IIS</li>\n<li>Recreate the direcotry</li>\n<li>Create a New Application Pool</li>\n<li>In the properties of the direcotry, create the Application and associate it to the new Application Pool.</li>\n</ol>\n\n<p>What a pain.</p>\n"},{"tags":[".net","wcf","nancy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13182956,"title":"Nancy website and Nancy wcf host in different projects","body":"<p>I want to have Nancy powered website with <code>Nancy.Hosting.Aspnet</code> dependency in one VS project and dedicated project for WCF service hosting this web site. The idea behind to test performance and have ability to choose what to use IIS or my own service.</p>\n\n<p>To the references of WCF project I've added web site project. How it might become possible to host Nancy that way?</p>\n\n<p>How to tell Nancy to search Modules not in the current executable, but in DLL attached to it? What conditions should be met? The best guess for now is to make Namespaces agree, but no luck for now. If it helps here is the code I'm using to run Nancy from WCF executable (it's standard):</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>class Program\n{\n    private static readonly Uri BaseUri = new Uri(\"http://localhost:1234/\");\n\n    static void Main(string[] args)\n    {\n        AppDomainAssemblyTypeScanner.LoadAssemblies(\"Basta.dll\");\n\n        using (CreateAndOpenWebServiceHost())\n        {\n            Console.WriteLine(\"Service is now running on: {0}\", BaseUri);\n            Console.ReadLine();\n        }\n    }\n\n    private static WebServiceHost CreateAndOpenWebServiceHost()\n    {\n        var host = new WebServiceHost(\n            new NancyWcfGenericService(new Basta.Bootstrapper()),\n            BaseUri);\n\n        host.AddServiceEndpoint(typeof(NancyWcfGenericService), new WebHttpBinding(), \"\");\n        host.Open();\n\n        return host;\n    }\n}\n</code></pre>\n\n<p>I've used approach from <a href=\"http://stackoverflow.com/q/8139096/1047741\">this question</a> (by calling <code>AppDomainAssemblyTypeScanner.LoadAssemblies</code>), but didn't worked, unfortunately.</p>\n"},{"tags":["asp.net","ajax","wcf","identity","wif"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":729,"score":1,"question_id":6761404,"title":"Using Identity Foundation with a WCF Web Api","body":"<p>I have a bunch of websites that are setup identically to use a WIF identity provider. I've recently moved the business logic out of the web applications and into a Web Api service application. This runs in a different virtual directory to the other sites. The idea being that browser will put the data into the page AJAXy.</p>\n\n<p>The issue I have is with securing the web API. It seems that WIF single sign-on works okay with traditional sites. The user can access one website, get redirected to the identity provider, login and get redirected back to the website they wanted. When they access another site they also get redirected back to the identity provider but needn't log in as a FEDAUTH cookie exists so they automatically get authenticated and redirected to the second site.</p>\n\n<p>This doesn't work for the Web Api scenario because when the browser perhaps makes a GET to it, the Api will return a redirect to the calling javascript when it should be expecting JSON.</p>\n\n<p>Is it even possible to secure Web Api with WIF?</p>\n"},{"tags":["jquery","asp.net-mvc","wcf","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13196887,"title":"jQuery Autocomplete tied to WCF Service ASP.NET MVC","body":"<p>New to ASP.NET MVC and programming, and I have searched high and low for materials on this subject but haven't found a concrete answer for my particular problem.</p>\n\n<p>The project I am working on requires the use of WCF services.  Initially I started with a jQuery autocomplete function that worked, however moving the code to a WCF service has broken some communication.  The autocomplete functionality no longer works  </p>\n\n<p>WCF Service</p>\n\n<pre><code>public IList&lt;Location&gt; QuickSearchLocation(string term)\n    {\n        using (var db = new InspectionEntities())\n        {\n            //return all locations except the reserved \"Other\"\n            return db.Locations\n                .Where(r =&gt; r.LocationName.Contains(term) &amp;&amp; r.LocationId !=    Constants.OtherId)\n                .ToList();\n        }\n    } \n</code></pre>\n\n<p>The above code is meant to takes user input based on relation to child table.  If user input does not match data in child table, the users entry is saved to an \"other\" column in the main db.</p>\n\n<p>Controller</p>\n\n<pre><code>public ActionResult QuickSearchLocation(string term)\n    {\n        return Json(_service.QuickSearchLocation(term), JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>View</p>\n\n<pre><code>div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(m=&gt;m.LocationId,new {data_autocomplete =     Url.Action(\"QuickSearchLocation\", \"Inspection\")})\n</code></pre>\n\n<p>script</p>\n\n<pre><code>$(document).ready(function () {\n\n$(\":input[data-autocomplete]\").each(function () {\n\n    $(this).autocomplete({ source: $(this).attr(\"data-autocomplete\")});\n});\n</code></pre>\n\n<p>Any insight on my problem would be helpful.</p>\n"},{"tags":["asp.net","wcf","long-polling","long-running-processes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13196508,"title":"Getting a status update from WCF to an asp.net page","body":"<p>I'm wondering if I can access a static variable in a WCF service for status updates and how to do this if you can? </p>\n\n<p>I have a long process that updates 1000s of products. This process is fired off from an asp.net page and the user wants status updates from the service as the process runs, i.e. 'processing product 123'. I have the service and I have a timer control inside an update panel that I want to use to poll the service for status updates. I was thinking as the timer control posts back, I'd query the service using a GetStatus method to get the current status but I think the status message would always be the same because a new instance of the service would be created on Page_Load. So, how can I get a running status variable from a WCF service to an asp.net page?</p>\n\n<pre><code>protected void Timer1_Tick(object sender, EventArgs e)\n{\n    if (statusMessage == null)\n    {\n        // feed operation finished or timer is running invalid\n        Timer1.Enabled = false;\n    }\n\n    try\n    {\n        UpdateStatusDisplay();\n    }\n    catch (Exception exp)\n    {\n        ....\n    }\n}\n</code></pre>\n\n<p>In my WCF service</p>\n\n<pre><code>public string Status = \"\";\n\n    public void BeginImport(ImportOptions options)\n    {\n        _options = options;\n\n        string conString = ConfigurationManager.ConnectionStrings[\"String1\"].ConnectionString;\n        using (var con = new SqlConnection(conString))\n        {\n            con.Open();\n\n            var products = con.Query(\"SELECT * FROM PRODUCTS\");\n\n            foreach (var product in products)\n            {\n                Status = \"Processing product \" + product.ProductName);\n            }\n\n        }\n    }\n\n    public string GetStatus()\n    {\n        return Status;\n    }\n</code></pre>\n\n<p>EDIT:\nI just read about [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)], is this all I'd need to do?</p>\n"},{"tags":["asp.net","wcf","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13179164,"title":"bidirectional communication using wcf for messaging","body":"<p>I am creating a messaging module in our asp.net application by using WCF service. The functionality will be like a loggedin user can communicate with other logged in users. This type of functionality I have already done by using Web service, but now in this application I want to use WCF.</p>\n\n<p>In my previous application we ware calling the web service method in fixed interval to get the message\nbut this approach unnecessary creating load on server which we want to avoid in this new application.</p>\n\n<p>So I want to something like</p>\n\n<p>When user sent message (Make a call to WCF service and store message) to other the notification should raise for that user then after that target user make call to WCF service for their message.</p>\n\n<p>or</p>\n\n<p>WCF service directly forward message to target user</p>\n\n<p>Pleas suggest me is it possible by using wcf.? or what will be the best way to avoid unnecessary call to service. ? </p>\n"},{"tags":["c#",".net","wcf","nettcpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13196288,"title":"WCF InstanceContext Single or InstanceContext PerSession with static member","body":"<p>I am designing and PubSub system with WCF (for learning purposes) using netTcpBinding and Duplex Communication. In my publisher ServiceContract I have a dictionary that I need to share between all sesions, and list that I need to be session specific.</p>\n\n<p>What would be the best option for this case?</p>\n\n<ol>\n<li><strong>InstanceContext.PerSession</strong> -  with dictionary as static member, and\nlist as private member </li>\n<li><strong>InstanceContextMode.Single</strong> - dictionary as\nprivate, list will transfered to dictionary(key -user, value -\nuser's list)</li>\n</ol>\n\n<p>Another question I have, I am comming from NodeJS/EventMachine background, and I want to don't what will be more performance-wise for this kind of service - ConcurrenyMode.<strong><em>Multiple</em></strong> or ConcurrencyMode.<strong><em>Reentrant</em></strong>?</p>\n\n<p>Thanks in Advanced</p>\n"},{"tags":["asp.net","wcf","iis","iis7","url-rewriting"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":110,"score":2,"question_id":12534543,"title":"IIS 7 URL Redirect based on URL path","body":"<p>I have a WCF Web Service hosted inside a ASP.NET 4 environment (IIS 7.5 on Windows 7), and I would like to use URL Rewriting / Redirection. \nThe reason I need to do this is because I can't change some mobile device code to just insert the parameter.</p>\n\n<p>Here is the URL I want:</p>\n\n<blockquote>\n  <p><a href=\"http://server.test.com/VirtualDirectory/theOrganization/RequestService.svc/REST/GetIssueTypes\" rel=\"nofollow\">http://server.test.com/VirtualDirectory/theOrganization/RequestService.svc/REST/GetIssueTypes</a></p>\n</blockquote>\n\n<p>The real URL is:</p>\n\n<blockquote>\n  <p><a href=\"http://server.test.com/VirtualDirectory/RequestService.svc/REST/GetIssueTypes?organization=theOrganization\" rel=\"nofollow\">http://server.test.com/VirtualDirectory/RequestService.svc/REST/GetIssueTypes?organization=theOrganization</a></p>\n</blockquote>\n\n<p>Notice how I want to remove theOrganization and appended it to the Query string for redirection.</p>\n\n<pre><code>&lt;rule name=\"test\" stopProcessing=\"true\"&gt;\n    &lt;match url=\"(.+\\.?)/(.+)/RequestService.svc/(.+)\" /&gt;\n    &lt;action type=\"Redirect\" url=\"{R:1}/RequestService.svc/{R:3}?organization={R:2}\"\n    redirectType=\"Permanent\" /&gt;\n&lt;/rule&gt;\n</code></pre>\n\n<p>I know it's a little odd of a rule to write. Thinks i have my regular expression correct for matching. I run the expression in the URL Rewrite tester in IIS Manager, and it seems like it's matching what I want. Also, I do have IIS URL Rewrite installed, and I made a simple rule up and it worked.</p>\n\n<p>However, when I try it using a browser, it failed to redirect and results in a 404. I was hoping a IIS Rewrite expert could chime in, as I am fairly new at it.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#",".net","wcf","web-services"],"answer_count":7,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":29023,"score":8,"question_id":5243929,"title":"WCF Service Client: The content type text/html; charset=utf-8 of the response message does not match the content type of the binding","body":"<p>I've got a WCF Service running on my local IIS server. I've added it as a service reference to a C# Website Project and it adds fine and generates the proxy classes automatically.</p>\n\n<p>However, when I try and call any of the service contracts, I get the following error:</p>\n\n<blockquote>\n  <p><strong>Description:</strong> An unhandled exception occurred during the\n  execution of the current web  request.\n  Please review the stack trace for more\n  information about the error and where\n  it originated in the code.</p>\n  \n  <p><strong>Exception Details:</strong> System.ServiceModel.ProtocolException:\n  The content type text/html;\n  charset=utf-8 of the response message\n  does not match the content type of the\n  binding (application/soap+xml;\n  charset=utf-8). If using a custom\n  encoder, be sure that the\n  IsContentTypeSupported method is\n  implemented properly. The first 1024\n  bytes of the response were: '\n       function\n  bredir(d,u,r,v,c){var w,h,wd,hd,bi;var\n  b=false;var p=false;var\n  s=[[300,250,false],[250,250,false],[240,400,false],[336,280,false],[180,150,false],[468,60,false],[234,60,false],[88,31,false],[120,90,false],[120,60,false],[120,240,false],[125,125,false],[728,90,false],[160,600,false],[120,600,false],[300,600,false],[300,125,false],[530,300,false],[190,200,false],[470,250,false],[720,300,true],[500,350,true],[550,480,true]];if(typeof(window.innerHeight)=='number'){h=window.innerHeight;w=window.innerWidth;}else\n  if(typeof(document.body.offsetHeight)=='number'){h=document.body.offsetHeight;w=document.body.offsetWidth;}for(var\n  i=0;i  \n</blockquote>\n\n<p>I also have a console application which also communicates with the WCF Service and the console app is able to call methods fine without getting this error.</p>\n\n<p>Below are excerpts from my config files.</p>\n\n<p>WCF Service Web.Config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n   &lt;services&gt;\n      &lt;service name=\"ScraperService\" behaviorConfiguration=\"ScraperServiceBehavior\"&gt;\n         &lt;endpoint address=\"\"\n                   binding=\"wsHttpBinding\" \n                   bindingConfiguration=\"WSHttpBinding_IScraperService\"\n                   contract=\"IScraperService\" /&gt;\n         &lt;endpoint address=\"mex\" \n                   binding=\"mexHttpBinding\" \n                   contract=\"IMetadataExchange\" /&gt;\n         &lt;host&gt;\n            &lt;baseAddresses&gt;\n                &lt;add baseAddress=\"http://example.com\" /&gt;\n            &lt;/baseAddresses&gt;\n         &lt;/host&gt;\n      &lt;/service&gt;\n   &lt;/services&gt;\n   &lt;bindings&gt;\n       &lt;wsHttpBinding&gt;\n           &lt;binding name=\"WSHttpBinding_IScraperService\"\n                    bypassProxyOnLocal=\"false\" transactionFlow=\"false\"\n                    hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferPoolSize=\"2000000\" maxReceivedMessageSize=\"2000000\"\n                    messageEncoding=\"Text\" textEncoding=\"utf-8\"\n                    useDefaultWebProxy=\"true\" allowCookies=\"false\"&gt;\n               &lt;readerQuotas \n                     maxDepth=\"2000000\" maxStringContentLength=\"2000000\" \n                     maxArrayLength=\"2000000\" maxBytesPerRead=\"2000000\"\n                     maxNameTableCharCount=\"2000000\" /&gt;\n               &lt;reliableSession \n                     enabled=\"false\" ordered=\"true\" inactivityTimeout=\"00:10:00\" /&gt;\n               &lt;security mode=\"Message\"&gt;\n                   &lt;message clientCredentialType=\"Windows\"\n                            negotiateServiceCredential=\"true\"\n                            algorithmSuite=\"Default\"\n                            establishSecurityContext=\"true\" /&gt;\n               &lt;/security&gt;\n            &lt;/binding&gt;\n          &lt;/wsHttpBinding&gt;\n      &lt;/bindings&gt;\n      &lt;behaviors&gt;\n          &lt;serviceBehaviors&gt;\n              &lt;behavior name=\"ScraperServiceBehavior\"&gt;\n                  &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n                  &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n              &lt;/behavior&gt;\n          &lt;/serviceBehaviors&gt;\n     &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Website Project Service Client <code>Web.Config</code>:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n   &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n          &lt;binding name=\"WSHttpBinding_IScraperService\" \n              closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" \n              receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n              bypassProxyOnLocal=\"false\" transactionFlow=\"false\" \n              hostNameComparisonMode=\"StrongWildcard\"\n              maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" \n              messageEncoding=\"Text\" textEncoding=\"utf-8\"\n              useDefaultWebProxy=\"true\" allowCookies=\"false\"&gt;\n              &lt;readerQuotas \n                  maxDepth=\"32\" maxStringContentLength=\"8192\" \n                  maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" \n                  maxNameTableCharCount=\"16384\" /&gt;\n              &lt;reliableSession enabled=\"false\"\n                  ordered=\"true\" inactivityTimeout=\"00:10:00\" /&gt;\n              &lt;security mode=\"Message\"&gt;\n                  &lt;transport clientCredentialType=\"Windows\" \n                       proxyCredentialType=\"None\" realm=\"\" /&gt;\n                  &lt;message clientCredentialType=\"Windows\" \n                       negotiateServiceCredential=\"true\"\n                       algorithmSuite=\"Default\" /&gt;\n              &lt;/security&gt;\n          &lt;/binding&gt;\n       &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n&lt;client&gt;\n        &lt;endpoint name=\"WSHttpBinding_IScraperService\"\n            address=\"http://example.com/ScraperService.svc\"\n            binding=\"wsHttpBinding\" \n            bindingConfiguration=\"WSHttpBinding_IScraperService\"\n            contract=\"ScraperService.IScraperService\" &gt;\n           &lt;identity&gt;\n               &lt;servicePrincipalName value=\"host/FreshNET-II\" /&gt;\n           &lt;/identity&gt;\n        &lt;/endpoint&gt;\n     &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>This is my first attempt at creating a WCF so it's all very new. Any help is much appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","wcf","security","iis","http-basic-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13176143,"title":"WCF in IIS, http basic authentication - Windows User \"security\" implications","body":"<p>I created a WCF Service, using http Basic Authentication and SSL. (Temporary certificate in IIS atm)</p>\n\n<p>Here is the relevant configuration.</p>\n\n<pre><code>&lt;services&gt;\n  &lt;service name=\"MyNamespace.MyService\"&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"basicHttps\"\n      name=\"MyEndPoint\" contract=\"MyNamespace.IMyService\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"\"&gt;\n      &lt;!-- These will be false when deployed --&gt;\n      &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n    &lt;/behavior&gt;\n    &lt;!-- This doesn't do anything in IIS --&gt;\n    &lt;behavior name=\"CustomUsernameValidatorBehavior\"&gt;\n      &lt;serviceCredentials&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\"\n          customUserNamePasswordValidatorType=\"MyNamespace.CustomUserNameValidator\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"basicHttps\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Basic\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/bindings&gt;\n</code></pre>\n\n<p>Due to the fact I am hosting in IIS, I can't use my customUsernameValidator, and IIS Basic authentication tries the username and password against Windows. </p>\n\n<p>I created a new user, disabled logon locally, and put it in a new group (without rights). The <strong>only</strong> purpose of the user is to ensure they are allowed to access the service, nothing else. The service will be online, not internal e.g. in an Intranet etc.</p>\n\n<p>My question boils down to this, is there security risks/implications due to the fact I am using a real windows user? What can be done to secure this service/IIS if so?</p>\n\n<p>Should something be done to prevent 'phishing' of information, could they for example try different usernames and passwords to find credentials?</p>\n\n<p><em>Btw this is a working binding (minus some other endpoints etc.) for WCF using Http Basic Authentication in IIS and SSL. It requires IIS has Basic Authentication installed, as well as a Windows User to authenticate against. I would prefer not to authenticate against a Windows user.</em></p>\n"},{"tags":["java","android","wcf","long-polling","instant-messaging"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13192407,"title":"Implementing android chat module using long polling","body":"<p>I am writing an Android app that among features has a chat module. I have choose to implement the chat using long polling.</p>\n\n<p>Because I am trying to avoid eating up the user phone battery I thought about adding to the implementation a GCM messages platform to notify the device about new messages.</p>\n\n<p>The idea is to use long polling while the user has the app open on his screen so engaging in a real time chat would be fast and does not involve sending a lot of GCM messages, while when idle, the server will know that the user is not currently polling and will send the device a GCM message to wake it up when a new message arrives.</p>\n\n<p>I am struggling with a few issues implementing this method:</p>\n\n<ol>\n<li><p>What is the best way to know the status of the user - Is hes polling right now or waiting for the push message to wake it up. Should I set the app to notify the server when it goes to sleep or the server should detect it by itself?</p></li>\n<li><p>If I set it so the app will notify the server when to switch between modes, how do I recover in cases this notification did not got through. (when the client is waiting for gcm and the server thinks it's polling and will not send one..)</p></li>\n<li><p>I experienced some case where the client was polling and the server did not responded even when it got new messages. Maybe some kind of timeout on the server that the client is not aware of... If that's a bug I'll fix it, but what can I do in cases when the client thinks it's polling while the server does not know about it (the timeout of the requests is too long to wait for the next poll).</p></li>\n</ol>\n\n<p>My client is native Android and the Webservice is WCF (C#).</p>\n\n<p>Any thought will help. </p>\n"},{"tags":["wcf"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":3716,"score":2,"question_id":6317794,"title":"WCF problem with uploading large file, hosted in IIS","body":"<p>I am trying to upload large files to a WCF Service hosted in IIS.</p>\n\n<p>I am using Restful and Streaming method.</p>\n\n<p>But I am not able to upload files which is more than 64KB.</p>\n\n<p>I tried lot by changing all the size-related elements in <code>web.config</code> file, but failed to fix the issue.</p>\n\n<p>Here is my code and config, please let me know if anyone find any issues in the code and how can I fix.</p>\n\n<p><strong>Operation Contract</strong></p>\n\n<pre><code>[OperationContract]\n[WebInvoke(UriTemplate = \"/UploadImage/{filename}\")]\nbool UploadImage(string filename, Stream image);\n</code></pre>\n\n<p><strong>Implementation</strong> of Operation Contract</p>\n\n<pre><code>public bool UploadImage(string filename, Stream image)\n{\n    try\n    {\n        string strFileName = ConfigurationManager.AppSettings[\"UploadDrectory\"].ToString() + filename;\n\n        FileStream fileStream = null;\n        using (fileStream = new FileStream(strFileName, FileMode.Create, FileAccess.Write, FileShare.None))\n        {\n            const int bufferLen = 1024;\n            byte[] buffer = new byte[bufferLen];\n            int count = 0;\n            while ((count = image.Read(buffer, 0, bufferLen)) &gt; 0)\n            {\n                fileStream.Write(buffer, 0, count);\n            }\n            fileStream.Close();\n            image.Close();\n        }\n\n        return true;\n    }\n    catch (Exception ex)\n    {\n        return false;\n    }\n}\n</code></pre>\n\n<p><strong>web.config</strong></p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"Service\" behaviorConfiguration=\"ServiceBehavior\"&gt;\n        &lt;endpoint address=\"http://localhost/WCFService1\" behaviorConfiguration=\"web\"\n                  binding=\"webHttpBinding\" bindingConfiguration=\"webBinding\"\n                  contract=\"IService\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\"/&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"webBinding\"\n            transferMode=\"Streamed\"\n            maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"\n            openTimeout=\"00:25:00\" closeTimeout=\"00:25:00\" sendTimeout=\"00:25:00\" \n            receiveTimeout=\"00:25:00\" &gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;httpRuntime maxRequestLength=\"2097151\"/&gt;\n</code></pre>\n\n<p>Service is hosted in hosted in IIS</p>\n\n<p>Client side Code (console application)</p>\n\n<pre><code>private static void UploadImage()\n{\n    string filePath = @\"F:\\Sharath\\TestImage\\TextFiles\\SampleText2.txt\";\n    string filename = Path.GetFileName(filePath);\n\n    string url = \"http://localhost/WCFService1/Service.svc/\";\n    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url + \"UploadImage/\" + filename);\n\n    request.Accept = \"text/xml\";\n    request.Method = \"POST\";\n    request.ContentType = \"txt/plain\";\n\n    FileStream fst = File.Open(filePath, FileMode.Open);\n    long imgLn = fst.Length;\n    fst.Close();\n    request.ContentLength = imgLn;\n\n    using (Stream fileStream = File.OpenRead(filePath))\n    using (Stream requestStream = request.GetRequestStream())\n    {\n            int bufferSize = 1024;\n            byte[] buffer = new byte[bufferSize];\n            int byteCount = 0;\n            while ((byteCount = fileStream.Read(buffer, 0, bufferSize)) &gt; 0)\n            {\n                requestStream.Write(buffer, 0, byteCount);\n            }\n    }\n\n    string result;\n\n    using (WebResponse response = request.GetResponse())\n    using (StreamReader reader = new StreamReader(response.GetResponseStream()))\n    {\n            result = reader.ReadToEnd();\n    }\n\n    Console.WriteLine(result);\n}\n</code></pre>\n\n<p>With this much of code I am able to upload 64KB of file, but when I try to upload a file of more than 64KB in size, I am getting error like, </p>\n\n<blockquote>\n  <p><code>The remote server returned an error: (400) Bad Request</code></p>\n</blockquote>\n\n<hr>\n\n<p>i did what you told but still I am getting same problem, this is how my config looks like now, can you please tell me what is still missing here</p>\n\n<pre><code>&lt;services&gt;\n  &lt;service name=\"Service\" behaviorConfiguration=\"ServiceBehavior\"&gt;\n    &lt;endpoint address=\"http://localhost/WCFService1\" behaviorConfiguration=\"web\"\n              binding=\"webHttpBinding\" bindingConfiguration=\"webBinding\"\n              contract=\"IService\"&gt;\n      &lt;identity&gt;\n        &lt;dns value=\"localhost\"/&gt;\n      &lt;/identity&gt;\n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;bindings&gt;\n  &lt;webHttpBinding&gt;\n    &lt;binding transferMode=\"Streamed\"\n             maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"\n             openTimeout=\"00:25:00\" closeTimeout=\"00:25:00\" sendTimeout=\"00:25:00\" receiveTimeout=\"00:25:00\"\n             name=\"webBinding\"&gt;\n      &lt;readerQuotas maxDepth=\"64\" \n                    maxStringContentLength=\"2147483647\" \n                    maxArrayLength=\"2147483647\" \n                    maxBytesPerRead=\"2147483647\" \n                    maxNameTableCharCount=\"2147483647\"/&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;\n&lt;/bindings&gt;\n</code></pre>\n"},{"tags":["wcf","unit-testing","nunit"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":13190635,"title":"How to UnitTest WCF .SVC files","body":"<p>I am planning to unit test WCF Services that are exposed as <code>.svc</code> files. What are the best practices available to unit test them.</p>\n\n<p>As for as i know this is the option available:</p>\n\n<p>Create a seperate project and have proxy classes created for the .svc files and add them to the project and do unit testing on those proxy classes.\n   Proxy classes can be created using:</p>\n\n<ol>\n<li>svcutil.exe</li>\n<li>\"Add Service Reference\" option of visual studio.</li>\n</ol>\n\n<p>are there any other best option available to unit test my wcf <code>.svc</code> file using nunit?</p>\n"},{"tags":["c#","wcf","asynchronous","wcf-client"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13189980,"title":"Async WCF client calls with custom headers: This OperationContextScope is being disposed out of order","body":"<p>I'm calling a WCF service from a WinRT app. The service requires that some headers are set for the authentication. The problem is that if I do <strong>multiple calls</strong> to the service <strong>simultaneously</strong>, I get the following exception: </p>\n\n<p><strong>This OperationContextScope is being disposed out of order.</strong></p>\n\n<p>The current code looks like the following:</p>\n\n<pre><code>public async Task&lt;Result&gt; CallServerAsync()\n{\n    var address = new EndpointAddress(url);\n    var client = new AdminServiceClient(endpointConfig, address);\n\n    using (new OperationContextScope(client.InnerChannel))\n    {\n        OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = GetHeader();\n\n        var request = new MyRequest(...); \n        {\n            context = context,\n        };\n\n        var result = await client.GetDataFromServerAsync(request);\n    }\n}\n</code></pre>\n\n<p>I found the following comment <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontextscope.aspx\" rel=\"nofollow\">from the docs</a>:</p>\n\n<blockquote>\n  <p>Do not use the asynchronous await pattern within a OperationContextScope block. When the continuation occurs, it may run on a different thread and OperationContextScope is thread specific. If you need to call await for an async call, use it outside of the OperationContextScope block.</p>\n</blockquote>\n\n<p>So it seems I'm clearly calling the service incorrectly. But what is the correct way?</p>\n"},{"tags":[".net","wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13191093,"title":"how to host wcf web service on iis wihtout using Visual studio","body":"<p>I am not very much clear about web services. I have created a web service and hosted it on IIS using publish option in visual studio. Is there any way by which I can host my application on IIS (without using visual studio) only from IIS manager.</p>\n"},{"tags":["c#","wcf","xsd","wsdl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13154726,"title":"How do you share WCF WSDL and XSD's to a client without access to the service (yet)?","body":"<p>I tried to generate the WSDL and then each XSD found within the WSDL manually with a client. The service is only on my localhost at the moment, and hasn't been published yet.</p>\n\n<p>The client is getting the following errors:</p>\n\n<blockquote>\n  <p>The document was understood, but it could not be processed. \n  The WSDL document contains links that could not be resolved. \n  There was an error downloading 'http://localhost:xxxx/MyService.svc?xsd=xsd0'. \n  Unable to connect to the remote server No connection could be made because the\n  target machine actively refused it 127.0.0.1:xxxx</p>\n</blockquote>\n\n<p>How should the services WSDL and XSD's be generated and shared so they can begin coding the client (without accessing the service atm?</p>\n\n<p><strong>Edit</strong>\nThe issues relate to these in the WSDL/XSD</p>\n\n<p>WSDL</p>\n\n<pre><code>&lt;xsd:schema targetNamespace=\"http://tempuri.org/Imports\"&gt;\n    &lt;xsd:import schemaLocation=\"http://localhost:xxxx/MyService.svc?xsd=xsd0\" \n           namespace=\"http://tempuri.org/\"/&gt;\n    &lt;xsd:import schemaLocation=\"http://localhost:xxxx/MyService.svc?xsd=xsd1\"  \n           namespace=\"http://schemas.microsoft.com/2003/10/Serialization/\"/&gt;\n    &lt;xsd:import schemaLocation=\"http://localhost:xxxx/MyService.svc?xsd=xsd2\" \n           namespace=\"**MYNAMESPACE**\"/&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n\n<p>XSD</p>\n\n<pre><code>&lt;xs:import schemaLocation=\"http://localhost:xxxx/MyService.svc?xsd=xsd1\" \n  namespace=\"http://schemas.microsoft.com/2003/10/Serialization/\"/&gt;\n</code></pre>\n\n<p><strong>Edit 2:</strong>\nThanks to <code>@The Indian Programmmer</code> I was able to generate a proxy class to program against with this command:</p>\n\n<p><code>\"C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\svcutil.exe\" -noconfig -namespace:*,SERVICE.INTERFACE.NAMESPACE -serializer:datacontractserializer https://My-PC/SvrLocation/MyService.svc?wsdl</code> \n(hosted in local IIS) </p>\n"},{"tags":["javascript","ajax","wcf","c#-4.0","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":11638934,"title":"Using WCF REST Template 4.0, How to consume JSON via AJAX","body":"<p>Using the WCF REST template 4, among cutting down on the amount of configuration needed, you no longer require an SVC file to host a REST Web Service.</p>\n\n<p>Previously I could use an asp:ScriptManager to create a JavaScript proxy that i could use to call my WCF Web Services using AJAX, I only had to provide the path to my SVC file.</p>\n\n<p>Now that there is no SVC file and the service factory is instantiated in the global.asax file, I am not sure how to call my operation contracts via JavaScript.</p>\n\n<p>Is there a way round this, or a best practice regarding doing this with WCF 4?\nAm I better using the old 3.5 model of svc files etc?</p>\n\n<p>EDIT : Or is my best option to use jQuery $Ajax calls?</p>\n\n<p>Thank you to anyone for your time.</p>\n"},{"tags":["wcf","iis7","application-pool","net.tcp"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13188862,"title":"IIS7 app pools shutting down while hosting WCF services with net.tcp","body":"<p>I'm hosting WCF services in IIS 7/WAS on Windows Server 2008 using http and net.tcp bindings.</p>\n\n<p>I'm able to call the services with both http and net.tcp without issue most of the time, but occasionally the services' app pool will shut down unexpectedly.  When this happens, WAS writes the following entries to the event log:</p>\n\n<blockquote>\n  <p>The worker process for application pool 'MyServices' encountered an error '' trying to read configuration data from file '\\?\\C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\CONFIG\\web.config', line number '0'. The data field contains the error code. (Data: 00000008)</p>\n  \n  <p>A process serving application pool 'MyServices' reported a failure trying to read configuration during startup. The process id was '18196'. Please check the Application Event Log for further event messages logged by the worker process on the specific error. The data field contains the error number. (Data: 80004005)</p>\n  \n  <p>A listener channel for protocol 'net.tcp' in worker process '18468' serving application pool 'MyServices' reported a listener channel failure. The data field contains the error number. (Data: 80004005)</p>\n  \n  <p>Application pool 'MyServices' is being automatically disabled due to a series of failures in the process(es) serving that application pool.</p>\n</blockquote>\n\n<p>I've confirmed the app pool is configured to use .NET v4.0, integrated mode, with 32-bit applications disabled.  The services don't use any 32-bit or unmanaged components.</p>\n\n<p>The calls leading up to the shutdown are net.tcp calls, one app log entry mentions a \"listener channel for protocol 'net.tcp'\", and net.tcp is much less common than http (I haven't found anything relevant Googling any of the app log entries).  I can't help but think the problem is related to net.tcp, port sharing, etc.  I just have no idea what the problem might be.</p>\n\n<p>Has anyone encountered this before?  Does anyone have any thoughts on how to troubleshoot the problem, beyond simply disabling net.tcp and using http exclusively?</p>\n"},{"tags":["wcf","dependency-injection","autofac"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13188632,"title":"Inject WCF Service Using Autofac","body":"<p>What I want to do is take the following and inject the <code>EFUnitOfWork</code> and the <code>Repository&lt;WebContextItem&gt;</code> into the WCF service using Autofac.</p>\n\n<p>I have already tried the vanilla WCF instructions on Autofac, and the <code>UnitOfWork</code> would not commit.</p>\n\n<p>I am trying to do this on an IIS 7.5 hosted WCF 4.0 service using <code>Routing</code></p>\n\n<p>This is the <code>Global.asax</code> from the host application:</p>\n\n<pre><code>protected void Application_Start(object sender, EventArgs e)\n{\n    var factory = new ServiceHostFactory();\n\n    // Create Routes\n    RouteTable.Routes.Add(new ServiceRoute(\"FileService\", factory, typeof(SAIF.Services.WCF.Services.FileService)));\n    RouteTable.Routes.Add(new ServiceRoute(\"WebContext\", factory, typeof(SAIF.Services.WCF.Services.WebContextService)));\n}\n\nnamespace SAIF.Services.WCF.Services\n{\n    using System;\n    using System.Linq;\n    using SAIF.Common.Extensions;\n    using SAIF.Core.Domain;\n    using SAIF.Core.Domain.Model;\n    using SAIF.Repositories;\n    using SAIF.Services.WCF.Core;\n\n    public class WebContextService : IWebContextService\n    {\n        private readonly IRepository&lt;WebContextItem&gt; repository;\n        private readonly EFUnitOfWork unitOfWork;\n\n        public WebContextService()\n        {\n            unitOfWork = new EFUnitOfWork();\n            repository = new Repository&lt;WebContextItem&gt;(unitOfWork);\n        }\n\n        public IWebContext Get(string applicationName, string sessionId)\n        {\n            Enforce.ArgumentNotNullOrEmpty(applicationName, \"applicationName\");\n            Enforce.ArgumentNotNullOrEmpty(sessionId, \"sessionId\");\n\n            var items = repository.Query().Where(x =&gt;\n                x.ApplicationName == applicationName &amp;&amp;\n                x.SessionID == sessionId\n            ).ToList();\n\n            var context = CreateContext(items.Any() ? items.First(x =&gt; x.ContextName == \"__SAIFPID\").ContextValue : null);\n\n            var excludes = new[] { \"sourceApp\", \"sourceView\", \"targetApp\", \"targetView\" };\n\n            items.ForEach(x =&gt;\n            {\n                if (!excludes.Contains(x.ContextName))\n                    context.Set(x.ContextName, x.ContextValue);\n\n                repository.Delete(x);\n            });\n\n            unitOfWork.Commit();\n\n            return context;\n        }\n\n        public void Save(string applicationName, string sessionId, IWebContext context)\n        {\n            Enforce.ArgumentNotNullOrEmpty(applicationName, \"applicationName\");\n            Enforce.ArgumentNotNullOrEmpty(sessionId, \"sessionId\");\n            Enforce.ArgumentNotNull(context, \"context\");\n\n            context.GetAll().ForEach(x =&gt;\n            {\n                repository.Add(new WebContextItem()\n                {\n                    ApplicationName = applicationName,\n                    ContextName = x.Key,\n                    ContextValue = x.Value,\n                    SessionID = sessionId,\n                    UpdateDate = DateTime.Now\n                });\n            });\n\n            unitOfWork.Commit();\n        }\n\n        private IWebContext CreateContext(string contextId = null)\n        {\n            return string.IsNullOrWhiteSpace(contextId) ? new WebContext(Guid.NewGuid().ToString()) : new WebContext(contextId);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c#","xml","wcf","deserialization","mtom"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":243,"score":3,"question_id":10531128,"title":"Parse/de serialize MTOM/XOP Data .NET","body":"<p>How can I parse/deserialize a <a href=\"http://en.wikipedia.org/wiki/Message_Transmission_Optimization_Mechanism\" rel=\"nofollow\">MTOM</a>/<a href=\"http://en.wikipedia.org/wiki/XML-binary_Optimized_Packaging\" rel=\"nofollow\">XOP</a> response that I get from  a web service using WCF? I have the response on disk. I have copied the response below.</p>\n\n<pre><code>Date: Wed, 02 May 2012 09:38:57 GMT\nServer: Microsoft-IIS/6.0\nP3P:CP=\"BUS CUR CONo FIN IVDo ONL OUR PHY SAMo TELo\"\nX-Powered-By: ASP.NET\nX-AspNet-Version: 4.0.30319\nX-WindowsLive-Hydra: H: BLU165-ds6 V: 16.3.133.328 D: 2012-03-29T02:31:31\nX-Response-Time: 78.1245\nX-TransactionID: d491414e-46fd-47b2-82ce-e9cea9f564aa;BLU165-ds6;16.3.133.328;2012-05-02 09:38:57 UTC;78.1245 ms\nSet-Cookie: HMDST=dGVhcG90ZG9tZYtZm3GzLm1r3f+/q8+gdzrAPYmy9kJ+SmDZuFmVgk3E983xNyeoTZkkdIr6t8y3P4V+vPzmytdaqqFwtI8vBuc=; domain=.mail.services.live.com; path=/\nCache-Control: no-cache\nPragma: no-cache\nExpires: -1\nContent-Type: application/xop+xml\nContent-Length: 6386\n\nMIME-Version: 1.0\nContent-Type: Multipart/Related;boundary=DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM;\n    type=\"application/xop+xml\";\n    start=\"&lt;DeltaSyncMTOMFetchResponse@mail.services.live.com&gt;\";\n\n--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM\ncontent-transfer-encoding: binary\ncontent-type: application/xop+xml; charset=utf-8; type=\"application/xop+xml\"\ncontent-id: &lt;DeltaSyncMTOMFetchResponse@mail.services.live.com&gt;\n\n&lt;ItemOperations xmlns:xop=\"http://www.w3.org/2004/08/xop/include\" xmlns:B=\"HMMAIL:\" xmlns:D=\"HMSYNC:\" xmlns=\"ItemOperations:\"&gt;&lt;Status&gt;1&lt;/Status&gt;&lt;Responses&gt;&lt;Fetch&gt;&lt;ServerId&gt;E631966A-9439-11E1-8E7B-00215AD9A7B8&lt;/ServerId&gt;&lt;Status&gt;1&lt;/Status&gt;&lt;Message&gt;&lt;xop:Include href=\"cid:1.634715231374437235@example.org\" /&gt;&lt;/Message&gt;&lt;/Fetch&gt;&lt;/Responses&gt;&lt;/ItemOperations&gt;\n--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM\ncontent-transfer-encoding: binary\ncontent-type: application/octet-stream\ncontent-id: &lt;1.634715231374437235@example.org&gt;\n\n....Binary Content\n--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM--\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13188239,"title":"WCF IPC port closed","body":"<p>I am trying to launch an application and do a couple things using WCF.\nI am using System.Diagonistics.Process to launch the Application.</p>\n\n<p>The service works fine when I launch it from VS2010 in debug mode. The GUI opens and everything goes smoothly.</p>\n\n<p>When I launch it from IIS, I get the following error after a couple steps are executed.</p>\n\n<blockquote>\n  <p>Exception Failed to read from an IPC Port: The pipe has been ended.</p>\n</blockquote>\n\n<p>The GUI isnt opened when launching from IIS but that isnt a problem as long as the process goes smoothly.</p>\n"},{"tags":["wpf","wcf","silverlight","duplex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13187953,"title":"Consuming a WCF Polling Duplex Service in WPF","body":"<p>I'm using the WCF Polling Duplex Service in silverlight but when I try to add a new wsDualHttpBinding for WPF, I'm getting the error message below. Is there any sample configuration file or a tutorial of a Duplex WCF serving both WPF and Silverlight? Google didn't work out so far.</p>\n\n<blockquote>\n  <p>The remote server returned an unexpected response: (405) Method Not\n  Allowed.</p>\n</blockquote>\n"},{"tags":["wcf","proxy","proxyfactory"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13146273,"title":"InProcProxyFactory.CreateInstance called from WCF Service","body":"<p>I am trying to use the ServiceModelEx library from IDesign.  When I try to call:</p>\n\n<p>InProcFactory.CreateInstance();</p>\n\n<p>from with in a WCF Service (basically calling WCF Service B from WCF Service A), I get the following error:</p>\n\n<p>Could not find dynamic assembly</p>\n\n<p>The code that is failing is:</p>\n\n<pre><code>  internal static Assembly[] GetWebAssemblies()\n  {\n     Debug.Assert(IsWebProcess());\n     List&lt;Assembly&gt; assemblies = new List&lt;Assembly&gt;();\n\n     if(Assembly.GetEntryAssembly() != null)\n     {  \n        throw new InvalidOperationException(\"Can only call in a web assembly\");\n     }\n     foreach(ProcessModule module in Process.GetCurrentProcess().Modules)\n     {\n         assemblies.Add(Assembly.LoadFrom(module.FileName));\n         if (module.ModuleName.StartsWith(\"App_Code.\") &amp;&amp; module.ModuleName.EndsWith(\".dll\"))\n         {\n             assemblies.Add(Assembly.LoadFrom(module.FileName));\n         }\n         if (module.ModuleName.StartsWith(\"App_Web_\") &amp;&amp; module.ModuleName.EndsWith(\".dll\"))\n         {\n             assemblies.Add(Assembly.LoadFrom(module.FileName));\n         }\n     }\n     if (assemblies.Count == 0)\n     {\n         throw new InvalidOperationException(\"Could not find dynamic assembly\");\n     }\n     return assemblies.ToArray();\n  }\n</code></pre>\n\n<p>The assemblies are not pre-fixed with App_Web or App_Code because this is not a web site or a web application (it is a WCF Service).  The code does work, however, if I call it from a web site, web application or EXE.  Is this by deisgn?</p>\n"},{"tags":["wcf","iis","rest","ssl"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1490,"score":1,"question_id":7003321,"title":"REST WCF 4 Service with Custom Basic Authentication over SSL in IIS","body":"<p>I'm looking for a complete step-by-step guide or a sample project about implementing a RESTful Service using .NET 4.0 using Custom Basic Authentication over HTTPS hosted in IIS.</p>\n\n<p>I've been googling about it for 3 days and I could only find either an implementation with WCF 3.5 which is very different, or without Custom Basic Authentication, or without SSL.</p>\n\n<p>Basically I implemented my REST service on WCF 4, and added SSL, but I can't use a custom authentication using my custom users database.</p>\n\n<p>Any references would be really appreciated.</p>\n"},{"tags":["wcf","web-services","ssl","monodroid"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":381,"score":0,"question_id":10500417,"title":"MessageSecurityException: Security processor was unable to find a security header in the message","body":"<p>What is the state of Mono for Android's secure WCF services? Is it up to SOAP 1.2 yet? \nI am writing a POC for an Android app that will interact with WCF services, but am struggling to get the thing working.</p>\n\n<p>I am trying to connect to a service that has <code>TransportWithMessageCredential</code> security. However I am getting an error on the server side.</p>\n\n<p>This is the server side error:</p>\n\n<blockquote>\n  <p>MessageSecurityException: Security processor was unable to find a\n  security header in the message. This might be because the message is\n  an unsecured fault or because there is a binding mismatch between the\n  communicating parties. This can occur if the service is configured for\n  security and the client is not using security.</p>\n</blockquote>\n\n<p>Server Config:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;service name=\"BrandDirector.ApplicationServer.Core.Services.UI.Products.Specifications.IngredientService\" \n         behaviorConfiguration=\"CredentialValidation\"&gt;\n    &lt;endpoint address=\"/BasicHttp\"\n        binding=\"basicHttpBinding\"\n        bindingConfiguration=\"BDBasicHttpBindingWithSecurity\" \n        contract=\"BrandDirector.ApplicationServer.Core.Services.UI.Products.Specifications.IIngredientService\" /&gt;\n    &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n&lt;/service&gt;\n\n&lt;behavior name=\"CredentialValidation\"&gt;\n  &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n  &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n  &lt;HttpStatusCode200Behavior /&gt;\n  &lt;serviceCredentials type=\"BrandDirector.ApplicationServer.Core.Security.Authentication.PasswordServiceCredentials, BrandDirector.ApplicationServer.Core.Security, Version=1.0.0.0, Culture=neutral\"&gt;\n    &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\"\n      customUserNamePasswordValidatorType=\"BrandDirector.ApplicationServer.Core.Security.CredentialValidator, BrandDirector.ApplicationServer.Core.Security\" /&gt;\n  &lt;/serviceCredentials&gt;\n&lt;/behavior&gt;\n\n&lt;extensions&gt;\n  &lt;behaviorExtensions&gt;\n    &lt;add name=\"HttpStatusCode200Behavior\" type=\"BrandDirector.ApplicationServer.Core.Services.Common.ServiceModel.HttpStatusCode200BehaviorExtension, BrandDirector.ApplicationServer.Core.Services.Common\" /&gt;\n  &lt;/behaviorExtensions&gt;\n\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"BDBasicHttpBindingWithSecurity\" messageEncoding=\"Text\" maxReceivedMessageSize=\"655536\"&gt;\n      &lt;security mode=\"TransportWithMessageCredential\" &gt;\n        &lt;message clientCredentialType=\"UserName\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/extensions&gt;\n</code></pre>\n\n<p>Client Code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class Activity1 : Activity\n{\n    private Button button;\n    const string address = \"https://.../IngredientService.svc/BasicHttp\";\n\n    protected override void OnCreate(Bundle bundle)\n    {\n        base.OnCreate(bundle);\n\n\n        var timeout = new TimeSpan(0, 1, 0);\n        var binding = new BasicHttpBinding(BasicHttpSecurityMode.TransportWithMessageCredential)\n        {\n            MessageEncoding = WSMessageEncoding.Text,\n            Security =\n            {\n                Transport =\n                {\n                    ClientCredentialType = HttpClientCredentialType.None,\n                    ProxyCredentialType = HttpProxyCredentialType.None\n                },\n                Message =\n                {\n                    ClientCredentialType = BasicHttpMessageCredentialType.UserName,\n                }\n            },\n            HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,\n            MaxReceivedMessageSize = 655536,\n            ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas\n            {\n                MaxArrayLength = 655536,\n                MaxStringContentLength = 655536,\n            },\n            SendTimeout = timeout,\n            OpenTimeout = timeout,\n            ReceiveTimeout = timeout,\n        };\n\n        System.Net.ServicePointManager.ServerCertificateValidationCallback += OnServerCertificateValidationCallback;\n\n        // Set our view from the \"main\" layout resource\n        SetContentView(Resource.Layout.Main);\n\n        // Get our button from the layout resource,\n        // and attach an event to it\n        button = FindViewById&lt;Button&gt;(Resource.Id.MyButton);\n\n        button.Click += delegate\n        {\n            client = new IngredientServiceClient(binding, new EndpointAddress(address));\n            var clientCredential = client.ClientCredentials.UserName;\n            clientCredential.UserName = \"admin\";\n            clientCredential.Password = \"KDNSG7\";\n\n            client.BeginGetIngredients(\"e\", callBack, null);\n        };\n    }\n\n    IngredientServiceClient client;\n\n    private void callBack(IAsyncResult ar)\n    {\n        var result = client.EndGetIngredients(ar);\n\n        button.Text = result.First().Name;\n    }\n\n    private bool OnServerCertificateValidationCallback(object sender, X509Certificate certificate, \n                                                       X509Chain chain, SslPolicyErrors sslPolicyErrors)\n    {\n        return true;\n    }\n}\n</code></pre>\n\n<p>This code works fine in WPF, the result is returned and all is well. I see from older threads that the WCF is still early in the development cycle, but I just want to check if maybe I am doing something wrong first.</p>\n"},{"tags":["wcf","com","iis-7.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13185303,"title":"Can't load 32-bit com component in IIS 7.5","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10711498/how-to-run-vs-2010-local-iis-in-32-bit-mode\">How to run VS 2010 Local IIS in 32 bit mode</a>  </p>\n</blockquote>\n\n\n\n<p>I  created a WCF service that wraps a com dll. It works great on my dev machine. Of course when I deployed to production it didnt work. I have the same version of the com dll on both machines. Its a 32-bit dll. On my production machine I get an error Unable to cast COM object of type 'TradeImport.trTradeImportClass' to interface type 'TradeImport.trTradeImport'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{5625F504-617D-45DC-AE50-DE2FC0D06C96}' failed due to the following error: Error loading type library/DLL. (Exception from HRESULT: 0x80029C4A (TYPE_E_CANTLOADLIBRARY)).  I understand this issue can occur if I try lo load a 32-bit dll into a 64-bit app.\nMy wcf component is compiled as CPU_AnyCPU.</p>\n\n<p>I traced the class ids through the registry and the seem to be correct (and the same) on both machines.</p>\n\n<p>After many trials and tribulations I ran procmon on both machines to diagnose the problem. </p>\n\n<p>On the machine that works , procmon reports that w3wp.exe uses a 32-bit architecture, and i'ts path is  C:\\Windows\\SysWOW64\\inetsrv\\w3wp.exe.</p>\n\n<p>On the machine that doesnt work , procmon reports that w3wp uses a 64-bit architecture and its path is \nc:\\windows\\system32\\inetsrv\\w3wp.exe.</p>\n\n<p>How do i configure  iis on the the machine that doent't work to use a 32-bit architecture for my app. On both machines  the app pool is set to Enable 32-bit Application -TRUE.</p>\n\n<p>Both machines run IIS version 7.5.7600.16385</p>\n"},{"tags":[".net","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":274,"score":7,"question_id":3961654,"title":"How can I control the name of a generic WCF Message Contract","body":"<p>I'm generating a WCF service using the message contract model.</p>\n\n<p>I have created a generic request message contract like so:</p>\n\n<pre><code>[MessageContract]\npublic Request&lt;T&gt;\n{\n    [MessageBodyMember]\n    public T Details { get; set; }\n}\n</code></pre>\n\n<p>I'm used to using <code>[DataContract(Name=\"Contract{0}\")]</code> to produce readable names for generic data contracts, but this approach does not seem to work for me using message contracts. </p>\n\n<p>Is there a way to achieve the same behaviour using the message contract model?</p>\n"},{"tags":["wcf","silverlight",".net-4.0","channelfactory"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":10325335,"title":"How can I implement ChannelFactory and WCF assembly sharing with Silverlight?","body":"<p>The preferred WCF implementation is with assembly sharing and ChannelFactory - a single instance of the contract means any service changes only need be made in one place, there's no proxy to update or maintain, etc.</p>\n\n<p>I'd like to implement ChannelFactory with Silverlight. I've had enough of RIA Domain Services etc.</p>\n\n<p>My Silverlight application can only reference Silverlight assemblies - fair enough. So I put the <code>ServiceContract</code> interfaces in a Silverlight assembly and reference that from my server and client.</p>\n\n<p>The problem is that when I go to run my server (which is IIS hosted, in this case) I get </p>\n\n<blockquote>\n  <p>Could not load file or assembly 'System.ServiceModel, Version=2.0.5.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. </p>\n</blockquote>\n\n<p>The Silverlight assembly containing the <code>ServiceContract</code> is built with a different version of <code>System.ServiceModel</code> than my server is using (which is .NET 4.0). How can I make this work?</p>\n"},{"tags":["c#","wcf","wcf-binding","wcf-client"],"answer_count":3,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":12935,"score":7,"question_id":5151077,"title":"WCF change endpoint address at runtime","body":"<p>I have my first WCF example working. I have the host on a website which have many bindings. Because of this, I have added this to my web.config.</p>\n\n<pre><code>&lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"/&gt;\n</code></pre>\n\n<p>This is my default binding <a href=\"http://id.web\" rel=\"nofollow\">http://id.web</a>, which works with the following code.</p>\n\n<pre><code>EchoServiceClient client = new EchoServiceClient();\nlitResponse.Text = client.SendEcho(\"Hello World\");\nclient.Close();\n</code></pre>\n\n<p>I am now trying to set the endpoint address at runtime. Even though it is the same address of the above code.</p>\n\n<pre><code>EchoServiceClient client = new EchoServiceClient();\nclient.Endpoint.Address = new EndpointAddress(\"http://id.web/Services/EchoService.svc\"); \n\nlitResponse.Text = client.SendEcho(\"Hello World\");\nclient.Close();\n</code></pre>\n\n<p>The error I get is:</p>\n\n<pre><code>The request for security token could not be satisfied because authentication failed. \n</code></pre>\n\n<p>Please suggest how I may change the endpoint address at runtime?    </p>\n\n<p><strong>Additional here is my client config, requested by Ladislav Mrnka</strong></p>\n\n<pre><code> &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;wsHttpBinding&gt;\n                &lt;binding name=\"WSHttpBinding_IEchoService\" closeTimeout=\"00:01:00\"\n                    openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                    bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                    messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                    allowCookies=\"false\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                        enabled=\"false\" /&gt;\n                    &lt;security mode=\"None\" /&gt;\n                &lt;/binding&gt;\n            &lt;/wsHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://id.web/Services/EchoService.svc\" binding=\"wsHttpBinding\"\n                bindingConfiguration=\"WSHttpBinding_IEchoService\" contract=\"IEchoService\"\n                name=\"WSHttpBinding_IEchoService\"&gt;\n                &lt;identity&gt;\n                    &lt;servicePrincipalName value=\"host/mikev-ws\" /&gt;\n                &lt;/identity&gt;\n            &lt;/endpoint&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p><strong>Solution: Suggested by Ladislav Mrnka's Answer</strong><br>\nI modified the code to build.</p>\n\n<pre><code>EndpointIdentity spn = EndpointIdentity.CreateSpnIdentity(\"host/mikev-ws\");\nUri uri = new Uri(\"http://id.web/Services/EchoService.svc\");\nvar address = new EndpointAddress(uri, spn);\nvar client = new EchoServiceClient(\"WSHttpBinding_IEchoService\", address);\nclient.SendEcho(\"Hello World\");\nclient.Close(); \n</code></pre>\n\n<p><strong><em>WORKS!</em></strong></p>\n"},{"tags":["c#","wcf","iis","wcf-binding","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13184586,"title":"WCF Error : 'It is likely that certificate 'my cert' may not have a private key that is capable of key exchange","body":"<p>I have a WCF service I'm trying to host on our production web server (IIS6). I've set the web up and tied our cert to the web. When I try to browse to the service url, I receive the following error in the event log :</p>\n\n<blockquote>\n  <p>The exception message is: It is likely that certificate\n  'CN=<em>.mydomain, OU=Secure Link SSL Wildcard, OU=I.T., C=US' may not\n  have a private key that is capable of key exchange or the process may\n  not have access rights for the private key. Please see inner exception\n  for detail.. ---> System.ArgumentException: It is likely that\n  certificate 'CN=</em>.deltadentalks.com, OU=Secure Link SSL Wildcard,\n  OU=I.T., O=mydomain, C=US' may not have a private key that is capable\n  of key exchange or the process may not have access rights for the\n  private key. Please see inner exception for detail. --->\n  System.Security.Cryptography.CryptographicException: The handle is\n  invalid.</p>\n</blockquote>\n\n<p>I've confirmed ASP.Net 1.1, 2, and 4 are all set to 'Allow' in 'Web Service Extensions'. I've also confirmed the cert is set up in iis and it shows 'You have a private key that corresponds to this certificate'. Also, Execute Permissions are set to 'Script and Executables'.</p>\n"},{"tags":["asp.net","xml","wcf","iis","iis7"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3309,"score":4,"question_id":6193297,"title":"XML Parsing Error: no element found Location: http://localhost:8000/web.config Line Number 1, Column 1","body":"<p>I'm a newbie to WCF and IIS, and when I try to host a web service in IIS and open it in the browser it shows me the above XML Parsing error. I've tried all the points mentioned in related posts, but it doesnt seem to work. Is there any solution that I might have missed out?</p>\n\n<p>EDIT: i followed all the steps exactly as mentioned here. <a href=\"http://www.youtube.com/watch?v=SVPXLF-g4Ws\" rel=\"nofollow\">http://www.youtube.com/watch?v=SVPXLF-g4Ws</a> ... But , i still get the same XML parsing error when i try to host the service in IIS. If possible, can anyone try following that video and tell me if it works. Thanks </p>\n"},{"tags":["c#","wcf","attributes"],"answer_count":4,"favorite_count":5,"up_vote_count":6,"down_vote_count":0,"view_count":1898,"score":6,"question_id":5475350,"title":"Apply a WCF attribute to all method in the service","body":"<p>I have a custom attribute that I want to apply to each methods in my WCF service.</p>\n\n<p>I proceed like this:</p>\n\n<pre><code>[MyAttribute]\nvoid MyMethod()\n{\n\n}\n</code></pre>\n\n<p>The problem is that my service contains hundreds of methods and I don't want to write [Attribute] above all of them. Is there a way to apply the attribute to all my methods in my service?</p>\n\n<p>Here's my attribute's signature:</p>\n\n<pre><code>//[AttributeUsage(AttributeTargets.Class)]\npublic class SendReceiveBehaviorAttribute : Attribute, /*IServiceBehavior,*/ IOperationBehavior\n</code></pre>\n\n<p><strong>EDIT after Aliostad's answer:</strong></p>\n\n<p>I tried this:</p>\n\n<pre><code>public void ApplyDispatchBehavior(ServiceDescription desc, ServiceHostBase host)\n{\n    foreach (ChannelDispatcher cDispatcher in host.ChannelDispatchers)\n    {\n        foreach (EndpointDispatcher eDispatcher in cDispatcher.Endpoints)\n        {\n            foreach (DispatchOperation op in eDispatcher.DispatchRuntime.Operations)\n            {\n                op.Invoker = new OperationInvoker(op.Invoker);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And that:</p>\n\n<pre><code>public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection&lt;ServiceEndpoint&gt; endpoints, BindingParameterCollection bindingParameters)\n{\n    foreach (ChannelDispatcher cDispatcher in serviceHostBase.ChannelDispatchers)\n    {\n        foreach (EndpointDispatcher eDispatcher in cDispatcher.Endpoints)\n        {\n            foreach (DispatchOperation op in eDispatcher.DispatchRuntime.Operations)\n            {\n                op.Invoker = new OperationInvoker(op.Invoker);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>But it still don't work.</p>\n"},{"tags":["silverlight","wcf","principalpermission"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":353,"score":1,"question_id":6085730,"title":"PrincipalPermission.Demand() failing once WCF Service was moved to SSL","body":"<p>My Silverlight/WCF application uses PrincipalPermission in each service method to ensure the user is Authenticated.  This works just fine when I have everything configured to HTTP, but once I configured my service endpoints/bindings to support HTTPS (SSL), I get an exception thrown when I call the Demand() method of my PrincipalPermission object.</p>\n\n<p><strong>EDIT:  I should mention I am using IIS 7.5 Express to host and debug this project.</strong></p>\n\n<p>Here is the method that checks to make sure the user is authendicated.  It's called from each of my service methods:</p>\n\n<pre><code> protected void SecurityCheck(string roleName, bool authenticated)\n{\n  System.ServiceModel.Web.WebOperationContext.Current.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.OK;\n\n  PrincipalPermission p = new PrincipalPermission(null, roleName, authenticated);\n  try\n  {\n    p.Demand();\n  }\n  catch (Exception ex) \n  {        \n    /* wrap the exception so that Silverlight can consume it */        \n    ServiceException fault = new ServiceException() \n    {                 \n      /* Code = 1 will mean \"unauthenticated!\" */                 \n      Code = 1, Message = ex.Message \n    }; \n    throw new FaultException&lt;ServiceException&gt;(fault); }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The execption thown is \"Request for principal failed.\"</p>\n\n<p>Here are the important bits of my web.config file:</p>\n\n<pre><code>&lt;behavior name=\"BinarySSL\"&gt;\n          &lt;serviceMetadata httpsGetEnabled=\"true\"  /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"6553600\"/&gt;\n          &lt;serviceTimeouts transactionTimeout=\"00:10:00\"/&gt;\n        &lt;/behavior&gt;\n&lt;binding name=\"MyApp.Web.Services.ProjectService.customBinding0\" \n          receiveTimeout=\"00:10:00\" sendTimeout=\"00:10:00\"&gt;\n          &lt;binaryMessageEncoding /&gt;\n          &lt;httpsTransport  authenticationScheme=\"Basic\"/&gt;\n        &lt;/binding&gt;\n&lt;service name=\"MyApp.Web.Services.ProjectService\"  behaviorConfiguration=\"BinarySSL\"&gt;\n        &lt;endpoint address=\"\" binding=\"customBinding\" bindingConfiguration=\"MyApp.Web.Services.ProjectService.customBinding0\"\n          contract=\"MyApp.Web.Services.ProjectService\" /&gt;        \n      &lt;/service&gt;\n</code></pre>\n\n<p>Here is the ClientConfig:</p>\n\n<pre><code>&lt;binding name=\"CustomBinding_ProjectService\"&gt;\n                        &lt;binaryMessageEncoding /&gt;\n                        &lt;httpsTransport maxReceivedMessageSize=\"2147483647\" maxBufferSize=\"2147483647\"  /&gt;\n                    &lt;/binding&gt;\n\n    &lt;endpoint address=\"https://localhost:44300/Services/ProjectService.svc\"\n                    binding=\"customBinding\" bindingConfiguration=\"CustomBinding_ProjectService\"\n                    contract=\"ProjectProxy.ProjectService\" name=\"CustomBinding_ProjectService\" /&gt;\n</code></pre>\n\n<p>I'm hoping someone can point in in the right direction here.  <strong>Again, this configuration works just fine until I configure my services for SSL</strong>.  Any thoughts?</p>\n\n<p>Thanks,</p>\n\n<p>-Scott</p>\n\n<hr>\n\n<p>I thought I found the problem, and answered my own question - but I was wrong.  Still have the same issue.</p>\n"},{"tags":["wcf","stored-procedures","execute"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":11853180,"title":"WCF Data Service and how i can use store procedure to gridview?","body":"<p>I am using WCF Data Service. I want use stored procedure so that its results were in the GridView. I found examples using the Execute method, such as</p>\n\n<p><a href=\"http://www.codegain.com/articles/wcf/miscellaneous/how-to-use-stored-procedure-in-wcf-data-service.aspx\" rel=\"nofollow\">http://www.codegain.com/articles/wcf/miscellaneous/how-to-use-stored-procedure-in-wcf-data-service.aspx</a></p>\n\n<p>But the compiler does not recognize the execute method in my case, not at all in Intelisens. Can anyone help?</p>\n"},{"tags":["c#","wcf","silverlight"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":321,"score":2,"question_id":9482091,"title":"Hearing \"element 'behavior' has invalid child element\" should be ignored, but prevented from updating service reference because of it","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4677377/the-element-behavior-has-invalid-child-element-myfaultextension-in-wcf-app-c\">The element behavior has invalid child element myFaultExtension in wcf app.config</a>  </p>\n</blockquote>\n\n\n\n<p>I'm trying to implement <a href=\"http://msdn.microsoft.com/en-us/library/dd470096%28VS.95%29.aspx\" rel=\"nofollow\">Creating and Handling Faults in Silverlight</a>.  (<a href=\"http://www.benday.com/2010/08/16/how-to-permanently-banish-silverlights-not-found-error-for-wcf-service-calls/\" rel=\"nofollow\">This</a> project works on my machine.)</p>\n\n<p>I get a Visual Studio warning:</p>\n\n<blockquote>\n  <p>The element 'behavior' has invalid child element 'betterErrorMessagesFaults'.</p>\n</blockquote>\n\n<p>Other answers elsewhere say I should just ignore it, but I can't because I'm not able to update the service reference in the non .Web project (the one with all the xaml files). When I try, I get this error:</p>\n\n<blockquote>\n  <p>Parser Error Message: The type 'MyProject.Web.Services.BetterErrorMessagesFaultBehavior, MyProject.Web.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' registered for extension 'betterErrorMessagesFaults' could not be loaded.</p>\n</blockquote>\n\n<p>Here's the relevant part of Web.config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;extensions&gt;\n    &lt;behaviorExtensions&gt;\n      &lt;add name=\"betterErrorMessagesFaults\" \n        type=\"MyProject.Web.Services.BetterErrorMessagesFaultBehavior, MyProject.Web.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\"/&gt;\n    &lt;/behaviorExtensions&gt;\n  &lt;/extensions&gt;\n  &lt;services&gt;\n    &lt;service name=\"MyProject.Web.Services.Service2\"&gt;\n      &lt;endpoint address=\"\" binding=\"customBinding\" \n          bindingConfiguration=\"MyProject.Web.Services.Service2.customBinding0\" \n          contract=\"MyProject.Web.Services.Service2\" \n          behaviorConfiguration=\"BetterErrorMessagesFaultBehavior\"/&gt;\n      &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n  &lt;behaviors&gt;\n    &lt;serviceBehaviors&gt;\n      &lt;behavior name=\"\"&gt;\n        &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n        &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n      &lt;/behavior&gt;\n    &lt;/serviceBehaviors&gt;\n    &lt;endpointBehaviors&gt;\n      &lt;behavior name=\"BetterErrorMessagesFaultBehavior\"&gt;\n        &lt;betterErrorMessagesFaults/&gt;\n      &lt;/behavior&gt;\n    &lt;/endpointBehaviors&gt;\n  &lt;/behaviors&gt;\n  &lt;bindings&gt;\n    &lt;customBinding&gt;\n      &lt;binding name=\"MyProject.Web.Services.Service2.customBinding0\"&gt;\n        &lt;binaryMessageEncoding&gt;\n          &lt;readerQuotas maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" \n            maxDepth=\"2147483647\" maxNameTableCharCount=\"2147483647\" \n            maxStringContentLength=\"2147483647\" /&gt;\n        &lt;/binaryMessageEncoding&gt;\n        &lt;httpTransport maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\" \n            maxBufferSize=\"2147483647\" /&gt;\n      &lt;/binding&gt;\n    &lt;/customBinding&gt;\n  &lt;/bindings&gt;\n  &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>The <code>BetterErrorMessagesFaultBehavior</code> is just a copy-paste of the class <a href=\"http://msdn.microsoft.com/en-us/library/dd470096%28VS.95%29.aspx\" rel=\"nofollow\">here on MSDN</a>; with only the name changed (I tried with default name as well), and the namespace changed to <code>MyProject.Web.Services</code>.</p>\n\n<p>I also tried exchanging</p>\n\n<pre><code>&lt;add name=\"betterErrorMessagesFaults\" \n    type=\"MyProject.Web.Services.BetterErrorMessagesFaultBehavior, MyProject.Web.Services, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\"/&gt;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>&lt;add name=\"betterErrorMessagesFaults\" \n    type=\"MyProject.Web.Services.BetterErrorMessagesFaultBehavior, MyProject.Web.Services\"/&gt;\n</code></pre>\n\n<p>but there was no effect. I read this is extremely sensitive to spaces etc., but I can't see any problem areas. I also looked at the AssemblyInfo and the version is 1.0.0.0, culture is just blank (\"\"), and I don't know what PublicKeyToken is for, but I suspect that is not the problem here...</p>\n\n<p>So I am stumped, no idea where to look next.</p>\n"},{"tags":["wcf","wcf-extensions"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1245,"score":2,"question_id":4677377,"title":"The element 'behavior' has invalid child element 'myFaultExtension' in wcf app.config","body":"<p>I'm trying to catch regular exceptions from a WCF service in a Silverlight client application. For that I've included the respective changes in my WCF service as given <a href=\"http://msdn.microsoft.com/en-us/library/dd470096%28VS.96%29.aspx\" rel=\"nofollow\">in this MSDN article</a>.</p>\n\n<p>But when I configure the behavior extension and use the same in endpoint behavior, the error mentioned above is coming up, and the service is not able to run due to this error. </p>\n\n<p>I am putting here my configuration. Kindly suggest how can I solve this?</p>\n\n<pre><code>  &lt;extensions&gt;\n      &lt;!--Add a behavior extension within the service model--&gt;\n      &lt;!-- Here SilverlightFaultBehavior is a class in AppServiceLib namespace --&gt;\n      &lt;behaviorExtensions&gt;\n        &lt;add name=\"myFaultExtension\"\n             type=\"AppServiceLib.SilverlightFaultBehavior,AppServiceLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\"/&gt;\n      &lt;/behaviorExtensions&gt;\n    &lt;/extensions&gt;\n   &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"myFaultBehavior\"&gt;\n          &lt;**myFaultExtension**/&gt;\n        &lt;/behavior&gt;\n   &lt;/endpointBehaviors&gt;\n</code></pre>\n\n\n"},{"tags":["c#","wcf","p2p","lan","communicator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13182046,"title":"P2P LAN communicator in WCF with private messages","body":"<p>I want to develop a simple LAN communicator in <code>WCF</code>, and I'm wondering about one thing.\nAll examples in the internet, \"WCF p2p communicator\" works in that way: when the user sends a message, all other peers receive it. The question is what should I do, to be able to write to only one peer?</p>\n\n<p>The only solution that comes to my head is to include the sender's and intended recipient's name in a message when sending it. Then, when a client gets message that was not addressed to it, it will ignore the message. Unfortunately, this solutions makes all private message fly to all peers - what would make a negative influence on performance of a p2p network and a program.</p>\n\n<p>Is this the only solution? Is it a good solution? Can anyone provide a better idea?</p>\n"},{"tags":["c#","wcf","wcf-binding","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13181057,"title":"Which WCF security mode to use","body":"<p>I've recently built a WCF service and am now ready to add security to it. I'd like to have it available over https, internet facing and the client will authenticate with a username and password. I'm only going to have 3 users so I want to make the authentication as simple as possible. Also, requests will be one at a time, where I would like the requester to authenticate each time (which, to me, means message client credentialing). Also, this will be hosted in IIS6. My reading on WCF shows a lot of <a href=\"http://msdn.microsoft.com/en-us/library/ms733836.aspx\" rel=\"nofollow\">security option</a>s and frankly I'm overwhelmed on what to choose. </p>\n\n<p>Given the requirements above, which configuration option should I choose and how should I configure WCF. Are there any sample projects that implement security like what I need?</p>\n"},{"tags":["wcf","soap","complextype"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13178958,"title":"Sending complex type as a parameter in SOAP message","body":"<p>I have a WCF Service like following:</p>\n\n<pre><code> public class Service1 : IService1\n{\n    public string GetData(Person person)\n    {\n        if (person != null)\n        {\n            return \"OK\";\n        }\n        return \"Not OK!\";\n    }\n</code></pre>\n\n<p>Here is my Person class:</p>\n\n<pre><code> [DataContract]\npublic class Person\n{\n    [DataMember]\n    public int Age { get; set; }\n\n    [DataMember]\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>And I'm calling service like that:</p>\n\n<pre><code> BasicHttpBinding binding = new BasicHttpBinding(BasicHttpSecurityMode.None);\n        IChannelFactory&lt;IRequestChannel&gt; factory = binding.BuildChannelFactory&lt;IRequestChannel&gt;(new BindingParameterCollection());\n        factory.Open();\n\n        EndpointAddress address = new EndpointAddress(url);\n        IRequestChannel irc = factory.CreateChannel(address);\n        using (irc as IDisposable)\n        {\n            irc.Open();\n            string soapMessage = \"&lt;GetData&gt;&lt;person&gt;&lt;Age&gt;24&lt;/Age&gt;&lt;Name&gt;John&lt;/Name&gt;&lt;/person&gt;&lt;/GetData&gt;\";\n\n            XmlReader reader = XmlReader.Create(new StringReader(soapMessage));\n            Message m = Message.CreateMessage(MessageVersion.Soap11,\"http://tempuri.org/IService1/GetData\", reader);\n\n            Message ret = irc.Request(m);\n            reader.Close();\n            return ret.ToString();\n        }\n</code></pre>\n\n<p>When I try to send complex type like Person as a parameter to GetData method, person object is coming null. But I have no problem when I send known type like integer, string etc. as a parameter.</p>\n\n<p>How can I manage to send complex type as a parameter to the service method? </p>\n"},{"tags":["wcf","web-services","visual-studio-2008","messagecontract"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2278,"score":6,"question_id":2375446,"title":"Add Service Reference is generating Message Contracts","body":"<p>OK, this has been haunting me for a while, can't find much on Google and I am starting to lose hope so I am reverting to the SO community. </p>\n\n<p>When I import a given service using \"Add service Reference\" on Visual Studio 2008 (SP1) all the Request/Response messages are being unnecessarily wrapped into Message Contracts (named as --> \"operationName\" + \"Request\"/\"Response\" + \"1\" at the end).</p>\n\n<p>The code generator says:</p>\n\n<pre><code>// CODEGEN: Generating message contract since the operation XXX is neither RPC nor document wrapped.\n</code></pre>\n\n<p>The guys who are generating the wsdl from a Java service say they are specifying <strong>DOCUMENT-LITERAL/WRAPPED</strong>.</p>\n\n<p>Any help/pointer/clue would be highly appreciated.</p>\n\n<p><strong>Update</strong>: \nthis is a sample of my wsdl for one of the operations that look suspicious. Note the mismatch on the message element attribute for the request, compared to the response.</p>\n\n<pre><code>&lt;!- imports namespaces and defines elements --&gt;\n&lt;wsdl:types&gt;\n  &lt;xsd:schema targetNamespace=\"http://WHATEVER/\" xmlns:xsd_1=\"http://WHATEVER_1/\" xmlns:xsd_2=\"http://WHATEVER_2/\"&gt;\n      &lt;xsd:import namespace=\"http://WHATEVER_1/\" schemaLocation=\"WHATEVER_1.xsd\"/&gt;\n      &lt;xsd:import namespace=\"http://WHATEVER_2/\" schemaLocation=\"WHATEVER_2.xsd\"/&gt;\n      &lt;xsd:element name=\"myOperationResponse\" type=\"xsd_1:MyOperationResponse\"/&gt;\n      &lt;xsd:element name=\"myOperation\" type=\"xsd_1:MyOperationRequest\"/&gt;\n   &lt;/xsd:schema&gt;\n&lt;/wsdl:types&gt;\n\n&lt;!- declares messages - NOTE the mismatch on the request element attribute compared to response --&gt;\n&lt;wsdl:message name=\"myOperationRequest\"&gt;\n   &lt;wsdl:part element=\"tns:myOperation\" name=\"request\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"myOperationResponse\"&gt;\n   &lt;wsdl:part element=\"tns:myOperationResponse\" name=\"response\"/&gt;\n&lt;/wsdl:message&gt;\n\n&lt;!- operations --&gt;\n&lt;wsdl:portType name=\"MyService\"&gt;\n   &lt;wsdl:operation name=\"myOperation\"&gt;\n      &lt;wsdl:input message=\"tns:myOperationRequest\"/&gt;\n      &lt;wsdl:output message=\"tns:myOperationResponse\"/&gt;\n      &lt;wsdl:fault message=\"tns:myOperationFault\" name=\"myOperationFault\"/&gt;\n      &lt;wsdl:fault message=\"tns:myOperationFault1\" name=\"myOperationFault1\"/&gt;\n   &lt;/wsdl:operation&gt;\n&lt;/wsdl:portType&gt;\n</code></pre>\n\n<p><strong>Update 2</strong>: I pulled all the types that I had in my imported namespace (they were in a separate xsd) into the wsdl, as I suspected the import could be triggering the message contract generation. To my surprise it was not the case and having all the types defined in the wsdl did not change anything.</p>\n\n<p>I then (out of desperation) started constructing wsdls from scratch and playing with the <code>maxOccurs</code> attributes of element attributes contained in a sequence attribute I was able to reproduce the undesired message contract generation behavior.</p>\n\n<p>Here's a sample of an element:</p>\n\n<pre><code>&lt;xsd:element name=\"myElement\"&gt;\n   &lt;xsd:complexType&gt;\n      &lt;xsd:sequence&gt;\n         &lt;xsd:element minOccurs=\"0\" maxOccurs=\"1\" name=\"arg1\" type=\"xsd:string\"/&gt;\n      &lt;/xsd:sequence&gt;\n   &lt;/xsd:complexType&gt;\n&lt;/xsd:element&gt;\n</code></pre>\n\n<p>Playing with <code>maxOccurs</code> on elements that are used as messages (all requests and responses basically) the following happens:</p>\n\n<ul>\n<li>maxOccurs = \"1\" does not trigger the wrapping</li>\n<li>macOcccurs > 1 <strong>triggers the wrapping</strong></li>\n<li>maxOccurs = \"unbounded\" <strong>triggers the wrapping</strong> </li>\n</ul>\n\n<p>I was not able to reproduce this on my production wsdl yet because the nesting of the types goes very deep, and it's gonna take me time to inspect it thoroughly. In the meanwhile I am hoping it might <strong>ring a bell</strong> - any help highly appreciated.</p>\n"},{"tags":["wcf","testing","jmeter","performance-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13136404,"title":"Peformance testing a WCF Webservice with JMeter?","body":"<p>I would like to performance test a webservice hosted on IIS, which exposes a several methods.</p>\n\n<p>The specific operation is get and only requires a single parameter. I was successfully in creating Jmeter script and I get 200 response, however the XML response and logs state a  ContractFilter mismatch at the EndpointDispatcher.</p>\n\n<p>The SOAP request was obtained from SOAPUI and is successful in get operation.</p>\n\n<p>I'm confused as to why I'm getting a 200 and not a 500 server error, in addition to the ContractFilter mismatch error.</p>\n\n<p>Has anyone got ideas as to what is going on?</p>\n"},{"tags":[".net","wcf","wcf-security"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":935,"score":2,"question_id":2377589,"title":"SecurityNegotiationException on disconnected domain client","body":"<p>When I am running a WCF service on my development machine it works as long as the client is connected to the domain.</p>\n\n<p>When the machine is disconnected I get the following exception:</p>\n\n<blockquote>\n  <p>System.ServiceModel.Security.SecurityNegotiationException: A call to SSPI failed, see inner exception.\n  System.Security.Authentication.AuthenticationException: A call to SSPI failed, see inner exception. ---> \n  System.ComponentModel.Win32Exception: The system detected a possible attempt to compromise security. \n  Please ensure that you can contact the server that authenticated you</p>\n</blockquote>\n\n<p>The service uses security internally (<code>&lt;transport clientCredentialType=\"Windows\" protectionLevel=\"None\"/&gt;</code>) so I can't easily turn it off.</p>\n\n<p>Is there a way to work around this problem so I can test the service when I am not connected?</p>\n"},{"tags":["wcf","security","networking","encryption"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13177024,"title":"Add RSA based encryption to WCF service without certificates","body":"<p>I am looking for a way to encrypt messages between client and server using the WCF. WCF offers a lot of built in security mechanisms to enrcypt traffic between client and server, but there seems to be nothing fitting my requirements.</p>\n\n<p><strong>I don't want to use certificates</strong> since they are too complicated, so don't suggest me to to use certificates please. I don't need confidentiality, so I though I'll go best using plain RSA.</p>\n\n<p><strong>I want real security</strong>, no hardcoded key or something. I was thinking about having a public/private keypair generated every time the server starts. Both keys will only be stored in RAM.\nThen wen a client connects it should do exactly like SSL. Just as described <a href=\"http://stackoverflow.com/a/1571183/808723\">here</a>.</p>\n\n<blockquote>\n  <p>1.exchange some form of a private/public key pair; the server generates a key pair and keeps the private key to itself and shares the public key with the client (e.g. over a WCF message, for instance)</p>\n  \n  <p>2.using that private/public key pair, exchange a common shared secret, e.g. an \"encryption key\" that will symmetrically encrypt your messages (and since it's symmetrical, the server can use the same key to decrypt the messages)</p>\n  \n  <p>3.setup infrastructure on your client (e.g. a WCF extension called a behavior) to inspect the message before it goes out and encrypt it with your shared secret</p>\n</blockquote>\n\n<p>That would be secure, wouldn't it?</p>\n\n<p><strong>Is there any existing solution to archive what I described? If not I'll create it on my own. Where do I start best? Which kind of WCF custom behaviour is the best to implement?</strong></p>\n\n<hr>\n\n<p><strong>EDIT:</strong>\nAs this is NOT secure, I'll take the following approach:</p>\n\n<p>When Installing the server component a new X509 certificate will be generated and automatially added to the cert store (of the server). The public part of this generated certificate will be dynamically included into the client setup. When running the client setup on the client machine the certificate will be installed into the trustet windows certificate store of the client.</p>\n\n<p>So there's no extra work when installing the product and everything should be secure, just as we want it.</p>\n"},{"tags":["wcf","silverlight","service","pollingduplexhttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13180165,"title":"Silverlight PollingDuplex timeouts","body":"<p>I'm currently working on an application that implements a polling duplex service. I am having issues with the client aborting and I'm not sure why or the right way to handle using the client.</p>\n\n<p>Right now I am getting the client in a hello message like this</p>\n\n<pre><code>client = OperationContext.Current.GetCallbackChannel&lt;IDuplexMyClient&gt;();\n</code></pre>\n\n<p>Then I am just hanging on to that in my class and sending things using it like this</p>\n\n<pre><code>client.MyFunction(data);\n</code></pre>\n\n<p>There can be any amount of time in between sending data because it depends on user interaction. The problem I am having is I am getting this following error.</p>\n\n<pre><code>The communication object, System.ServiceModel.Channels.ServiceChannel, cannot be used for communication because it has been Aborted. polling duplex\n</code></pre>\n\n<p>Is this the incorrect way to handle the client? Any idea why its aborting?</p>\n\n<p>It also seems to do it even when I'm sending messages once a second over it, it seems like it just times out after a little while no matter what.</p>\n"},{"tags":["android","json","wcf","exception","ssl"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":13178840,"title":"Android - Https connection to a .NET WCF Service gives SSLException: \"No peer certificate\"","body":"<p><strong>[SOLVED] - See below</strong><p>\nI've been getting an exception when trying to get some JSON data from my REST enabled WCF Service, in Android 2.2 over a HTTPS connection . I then noticed something very strange happening.\nWhen running the application on my phone it worked great and it would get beautiful JSON data back. However when running the application on my the emulator, it crashed as soon as the \"httpclient.execute(request)\" was executed, giving an SLLException: no peer certificate. \nThis being especially strange because my WCF Service had a valid RapidSSL signed certificate (CA). Plus I made sure Client certificates weren't needed inside my IIS. (Also this function wasn't running on the UIThread!, it was running on a separate thread.)</p>\n\n<p>My code:</p>\n\n<pre><code>    public Object getJSON(String URL, HashMap&lt;String, String&gt; parameters, String METHOD, String TAG) {\n    try {\n        this.TAG = TAG;\n        // Send GET request to &lt;service&gt;/METHOD?params\n        //Target API(8) for AndroidHttpClient and Target API(5) for DefaultHttpClient\n        AndroidHttpClient client = AndroidHttpClient.newInstance(\"Android\");\n        String params = \"?\";\n        if(parameters != null){\n            for (Entry&lt;String, String&gt; para : parameters.entrySet()) {\n                params = params + (String)para.getKey() + \"=\" + (String)para.getValue() + \"&amp;\";\n            }\n            params = params.substring(0, params.length() - 1);\n            Log.i(\"U's n P's\", params);//Username and password check\n        }\n\n        HttpGet request = new HttpGet(URL + METHOD + params);\n        Log.i(TAG, request.getRequestLine().toString());\n        request.setHeader(\"Accept\", \"application/json\");\n        request.setHeader(\"Content-type\", \"application/json\");\n        HttpResponse response = client.execute(request);//Crashes here\n        HttpEntity responseEntity = response.getEntity();\n\n        // Read response data into buffer\n        char[] buffer = new char[(int)responseEntity.getContentLength()];\n        InputStream stream = responseEntity.getContent();\n        InputStreamReader reader = new InputStreamReader(stream);\n        reader.read(buffer);\n        stream.close();\n</code></pre>\n\n<p>Now I've tried searching for a solution, however basically no solution fitted this situation. </p></p>\n\n<p><strong>[SOLUTION]</strong><p>\nMy emulator was running through a snapshot since I edited the hosts file so I didn't need to set my service up in a DNS. Now here comes the catch, since I ran it through a snapshot every time. The date was set to OCT 24 2012 with time 18:48 in the emulator. I then realized the date I validated the certificate was OCT 27 2012 with time 14:45. Apparently the \"get time from  the internet\" option DOESN'T work on the emulator. This made my httpclient throw the \"No peer certificate\" exception since it technically didn't have a validated certificate in the emulator. The sad part is that when you search for a solution to this exception with keywords as \"android\" or \"https android wcf\", you only get results of people with problems relating to <em>self signed certificates</em>.</p> <p>\n<strong>TL;DR: Apparently in the future validated certificates don't get accepted.</strong> </p></p>\n"},{"tags":["asp.net","ajax","json","wcf","web-services"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13168149,"title":"Post strings to WCF service endpoint with jQuery.ajax (500)","body":"<p>This problem has been presented in a number of posts in similar ways without a viable solution to mine.</p>\n\n<p>My service endpoint in <code>ManagerDiscountService</code> looks like:</p>\n\n<pre><code>[ServiceBehavior]\n[ServiceContract(Namespace = \"Cart\")]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class ManagerDiscountService : CartService\n\n    [OperationContract]\n    // also tried [WebInvoke(RequestFormat=WebMessageFormat.Json)]\n    // also tried [WebInvoke(RequestFormat=WebMessageFormat.Json, Method=\"POST\")]\n    public MyObject ToggleMode(string userId, string pwd, string domain)\n</code></pre>\n\n<p>web.config:</p>\n\n<pre><code>&lt;service name=\"Cart.ManagerDiscountService\"&gt;\n    &lt;endpoint address=\"\" behaviorConfiguration=\"Item.ItemAspNetAjaxBehavior\"\n     binding=\"webHttpBinding\" bindingConfiguration=\"wsSecureHttp\" \n     contract=\"Cart.ManagerDiscountService\" /&gt;\n&lt;/service&gt;\n&lt;!-- tried adding a similar wsHttp binding since the POST is not SSL, no luck --&gt;\n</code></pre>\n\n<p>I'm trying to post <code>userId</code>, <code>pwd</code> and <code>domain</code> to this endpoint, but all I see are 500's. <em>Why doesn't this method of posting work</em>? When I debug in Chrome, <code>error</code> is always the next execution in <code>$.ajax</code>:</p>\n\n<pre><code>params = { \"userId\": \"user\", \"pwd\": \"password\", \"domain\": \"mydomain\" };\n$.ajax({\n    type: \"POST\",\n    url: \"/Ajax/Cart/ManagerDiscountService.svc/ToggleMode\",\n    dataType: \"json\",\n    data: JSON.stringify(params, null, null),\n    contentType: \"application/json; charset=utf-8\",\n    success: function (data) {\n        // ...\n    },\n    error: function() {\n        // ...\n    }\n});\n</code></pre>\n"},{"tags":["javascript","wcf","websocket"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13124979,"title":"Modifying an existing duplex WCF service to use with JavaScript","body":"<p>I've got an existing WCF service that we've been using to communicate with a Silverlight client, and hence have been using it with the NetTCP binding. I'd like to start using this same service with a JavaScript client, ideally modifying the service as little as possible (i.e., allowing Silverlight and JS clients to call the same duplex service). Ideally this would happen through a reasonably performant and scalable tech, like WebSockets, rather than a hack like Comet.</p>\n\n<p>What's the best way to do this?</p>\n\n<p>Adding WebSocket support to the service (through the <a href=\"http://msdn.microsoft.com/en-us/library/hh674273.aspx\" rel=\"nofollow\">NetHttpBinding</a>) would seem like one obvious way to do it - but there doesn't seem to be any documentation on how to call the resulting service from JavaScript. I suppose I could configure it to use a text-based transport, instead of the default binary transport, and then hack together some sort of JavaScript-based SOAP client (perhaps using <a href=\"http://wsdl2js.sourceforge.net/\" rel=\"nofollow\">WSDL2JS</a>) to call it. That feels like it ought to work, but also pretty awkward, and with some pieces in the mix that haven't been well documented.</p>\n\n<p>I could also re-implement my service in a framework like <a href=\"http://xsockets.net/\" rel=\"nofollow\">XSockets</a> or <a href=\"http://superwebsocket.codeplex.com/\" rel=\"nofollow\">SuperWebSocket</a>, but that's some real work, and keeping it in sync with the WCF implementation would be more on top of that.</p>\n\n<p>Any other thoughts?</p>\n"},{"tags":["c#",".net","wcf","transactions","transactionscope"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13177674,"title":"Calling WCF service method from transaction scope","body":"<p>I have code like:</p>\n\n<pre><code>    using (TransactionScope scope = TransactionScopeFactory.CreateTransactionScope())\n      {\n\n        *// some methodes calls for which scope is needed*\n        ...\n        ...\n        *//than WCF method code for which I don't want transaction to be involved, but if it throws  an exception I don't wish scope to be completed*\n        WcfServiceInstance.SomeMethod();\n        scope.Complete();\n      }\n</code></pre>\n\n<p>My question is, can I call the WCF service method inside of the Transaction scope without any problems ? (I don't know how the service method is implemented) Also, I want to be shure that Transaction will not be involved in wcf service method calling.</p>\n"},{"tags":["c#","asp.net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":13176489,"title":"How many time Asynchronous methods running per minute","body":"<p>I'm working on an Asynchronous method in now a days getting started from this link </p>\n\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/2e08f6yc%28v=vs.100%29.aspx\" rel=\"nofollow\">Calling Synchronous Methods Asynchronously</a></li>\n</ul>\n\n<p>Now, what should I do if I want to see that how many times my method run in 1 minute?</p>\n\n<p>For example, 25000 transactions in 20 mins. etc.....</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net",".net","wcf","performance","appharbor"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":394,"score":3,"question_id":9348598,"title":"How to improve performance on a .net wcf service","body":"<p>I'm porting a cpu-heavy .net 4.0 windows application to a .net 4.0 wcf service. Basically I just imported the .net classes to the wcf service.</p>\n\n<p>All is working well except for performance at the wcf service - a task that takes 6267947 ticks (2539ms) uses 815349861 ticks (13045ms) on the aspx.net wcf service running locally on the same develop machine.</p>\n\n<p>I allready have uploaded the service + a test client to appharbor where the performance is as bad as on my local machine - the link to my test app is: <a href=\"http://www.wsolver.com\" rel=\"nofollow\">http://www.wsolver.com/</a>. Any ideas on how I can improve performance?</p>\n"},{"tags":["visual-studio-2010","wcf","asynchronous","svcutil.exe"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13174750,"title":"Add Service Reference with /tcv:Version35 (Async) in Visual Studio 2010","body":"<p>How do I get the \"Add Service Reference\" to run svcutil.exe with  /tcv:Version35\nI can't get the XXXAsync() and XXXCompleted event in my client proxy.</p>\n"},{"tags":["wcf","performance"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":3092,"score":0,"question_id":264366,"title":"Performance Tuning WCF Service","body":"<p>What is the single most important performance tuning area for a WCF Web service?  </p>\n\n<ul>\n<li>ASP.net Thread settings?</li>\n<li>WCF throttling?</li>\n</ul>\n"},{"tags":["c#","wcf","entity-framework","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13135532,"title":"Ninject in a N-Tier App using WCF and InRequestScope","body":"<p>I'm using Ninject 3.01.1.10 with WCF extenstion and Web extention (all from nuget)</p>\n\n<p>I am using NInject in a WCF Service (that has several client desktop apps) using Entity Framework and Repository pattern.</p>\n\n<p>Since I am using EF, I wanted to use the InRequestScope so that each repository is created every time there is a service request (as the EF good practices dictate).</p>\n\n<p>I installed everything through nuget and have NinjectWebCommon bootstrapper class registering the services in RegisterServices as the Ninject WCF sample shows. I also have the WCF Service in InstanceContextMode.PerCall as I read somewhere online.</p>\n\n<p>My question is: does all the chain of injected objects needs to be in InRequestScope so the scope works?</p>\n\n<p>My WCF service is being injected with a ServiceHandlerDispatcher in the constructor:</p>\n\n<pre><code>public VanillaService(IServiceHandlerDispatcher serviceHandlerDispatcher) { ... }\n</code></pre>\n\n<p>This ServiceHandlerDispatcher has a dictionary of objects ServiceHandler that, according to the client's handler request, call a Controller object. This controller object has methods that use the repositories.</p>\n\n<pre><code>public ServiceHandlerDispatcher(IMessageHandler[] messageHandlers) { ... }\n\npublic SaveSubmissionHandler(SubmissionController submissionController) { ... }\n\npublic SubmissionController(IRepository&lt;Submission&gt; submissionRepository) { ... }\n</code></pre>\n\n<p>So the chain is something like this: Service -> ServiceHandlerDispatcher -> ServiceHandler -> controller -> repository -> DB</p>\n\n<p>For performance and memory purposes, I wanted the ServiceHandlerDispatcher and all ServiceHandler in singleton scope but the repository objects in InRequestScope (so that in each call the EF's DbContext is disposed), since I can have dozens of ServiceHandler objects.</p>\n\n<p>Again, Service -> ServiceHandlerDispatcher (SingletonScope) -> ServiceHandler (SingletonScope) -> controller (none) -> repository (InRequestScope) -> DB</p>\n\n<p>Is this possible or do I have to have the kernel creating each ServiceHandler in each call?\nIf it's needed that every object in the chain needs to be InRequestScope, how to implement the ServiceHandler dictionary? With the Factory extension?</p>\n"},{"tags":["wcf","binding","partitioning","guidelines","large-data"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12035975,"title":"Changing the binding configuration or sending many small packages?","body":"<p>While developing WCF Web Services I have encountered the error: </p>\n\n<p><code>The maximum array length quota (16384) has been exceeded while reading XML data.</code></p>\n\n<p>like many others and have solved it by modifying the binding configuration.</p>\n\n<p>When looking for answers on the Internet, the solution was almost always changing the binding configuration, setting the <code>maxArrayLength</code> to maximum, going to <code>Streamed</code> transfer.\nIn some situations, like in this question <a href=\"http://stackoverflow.com/questions/1674830/wcf-sending-huge-data\">WCF sending huge data</a> , people suggest modifying the binding configuration over transmiting data in smaller chunks.</p>\n\n<p>But the maximum values and streamed transfer will always work? Even in a system where you may never know what maximum size will have the data?</p>\n\n<p>How to choose between the two options?</p>\n\n<p>It depends on what you transfer? Downloading media vs. returning large log information?</p>\n\n<p>The answer given to me until now revolves around technical aspects of streaming, but <strong>the answer I am looking for should be more focused on guidelines in the situation exposed, about choosing between the two options</strong>.</p>\n"},{"tags":["wcf","wcf-data-services","wcf-binding","wcf-security","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":18,"score":0,"question_id":13172934,"title":"WCF username-password security without SSL, HTTPS, certificates","body":"<p>How is it possible to implement security in WCF with username and password without SSL and Https and other certificates? \nCan you specify all the ways to implement security for basichttpbinding and the wshttpbinding?</p>\n"},{"tags":[".net","wcf","debugging","visual-studio-2012"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13172851,"title":"Debugging a WCF Service in Visual Studio 2012 (variable not declared or inaccessible)","body":"<p>I have problems in debugging a WCF Service in Visual Studio 2012. The client application and the WCF Service are in the same Solution, both configured for debug.\nThe debugger breaks/steps into the WCF Service successfully but I can't have a watch on any variable declared in the service.</p>\n\n<blockquote>\n  <p>'Variable' is not declared. It may be inaccessible due to its\n  protection level.</p>\n</blockquote>\n\n<p>I can have a watch to any variable passed as an argument from the client application.</p>\n"},{"tags":["wcf","security","webclient","webhttpbinding"],"answer_count":2,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":7069,"score":3,"question_id":795717,"title":"How do you pass user credentials from WebClient to a WCF REST service?","body":"<p>I am trying to expose a WCT REST service and only users with valid username and password would be able to access it. The username and password are stored in a SQL database. </p>\n\n<p>Here is the service contract:</p>\n\n<pre><code>public interface IDataService\n{\n    [OperationContract]\n    [WebGet(ResponseFormat = WebMessageFormat.Json)]\n    byte[] GetData(double startTime, double endTime);\n}\n</code></pre>\n\n<p>Here is the WCF configuration:</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;webHttpBinding&gt;\n    &lt;binding name=\"SecureBinding\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Basic\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"DataServiceBehavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n      &lt;serviceCredentials&gt;\n        &lt;userNameAuthentication\n           userNamePasswordValidationMode=\"Custom\"\n           customUserNamePasswordValidatorType=\n                 \"CustomValidator, WCFHost\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"DataServiceBehavior\" name=\"DataService\"&gt;\n    &lt;endpoint address=\"\" binding=\"webHttpBinding\"\n              bindingConfiguration=\"SecureBinding\" contract=\"IDataService\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<p>I am accessing the service via the WebClient class within a Silverlight application. However, I have not been able to figure out how to pass the user credentials to the service. I tried various values for client.Credentials but none of them seems to trigger the code in my custom validator. I am getting the following error: The underlying connection was closed: An unexpected error occurred on a send.</p>\n\n<p>Here is some sample code I have tried:</p>\n\n<pre><code>   WebClient client = new WebClient();\n   client.Credentials = new NetworkCredential(\"name\", \"password\", \"domain\");\n   client.OpenReadCompleted += new OpenReadCompletedEventHandler(GetData);\n   client.OpenReadAsync(new Uri(uriString));\n</code></pre>\n\n<p>If I set the security mode to None, the whole thing works. I also tried other clientCredentialType values and none of them worked. I also self-hosted the WCF service to eliminate the issues related to IIS trying to authenticate a user before the service gets a chance.</p>\n\n<p>Any comment on what the underlying issues may be would be much appreciated. Thanks.</p>\n\n<p><strong>Update</strong>: Thanks to Mehmet's excellent suggestions. Here is the tracing configuration I had:</p>\n\n<pre><code> &lt;system.diagnostics&gt;\n    &lt;sources&gt;\n      &lt;source name=\"System.ServiceModel\"\n              switchValue=\"Information, ActivityTracing\"\n              propagateActivity=\"true\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n      &lt;source name=\"System.IdentityModel\" switchValue=\"Information, \n               ActivityTracing\" propagateActivity=\"true\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;sharedListeners&gt;\n      &lt;add name=\"xml\"\n           type=\"System.Diagnostics.XmlWriterTraceListener\"\n           initializeData=\"c:\\Traces.svclog\" /&gt;\n    &lt;/sharedListeners&gt;\n  &lt;/system.diagnostics&gt;\n</code></pre>\n\n<p>But I did not see any message coming from my Silverlight client. As for https vs http, I used https as follows:</p>\n\n<pre><code>string baseAddress = \"https://localhost:6600/\";\n_webServiceHost = new WebServiceHost(typeof(DataServices), \n                new Uri(baseAddress));\n_webServiceHost.Open();\n</code></pre>\n\n<p>However, I did not configure any SSL certificate. Is this the problem?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13135706,"title":"wcf web service error Login failed for user 'sa'","body":"<p>i got an error Login failed for user 'sa' at the time of accessing my wcf service</p>\n"},{"tags":["wcf","iis","iis7","wcf-hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13169446,"title":"Hosting WCF Console Application in IIS 7","body":"<p>I have a WCF Console Application with the following app.config file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"serviceBehavior\"&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;netNamedPipeBinding&gt;\n        &lt;binding name=\"namedPipeBindingConfig\" maxBufferPoolSize=\"268435456\" maxBufferSize=\"16777216\" maxReceivedMessageSize=\"16777216\" /&gt;\n      &lt;/netNamedPipeBinding&gt;\n    &lt;/bindings&gt;\n\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"serviceBehavior\" name=\"MyTestNamespace.MyTestClassService\"&gt;\n        &lt;endpoint address=\"net.pipe://localhost/MyService\"\n          binding=\"netNamedPipeBinding\" bindingConfiguration=\"namedPipeBindingConfig\"\n          name=\"NamedPipeBinding\" contract=\"MyTestNamespace.IMyTestContract\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I am hosting it as a console app (interface, implementation and hosting class all in a single project), basically doing this:</p>\n\n<pre><code>ServiceHost host = new ServiceHost(typeof(MyTestClassService));\nhost.Open();\n</code></pre>\n\n<p>I run from command prompt \"C:\\SomePath\\>RunMyService.exe\" and it starts and works great. Now, I am planning to host this in IIS 7 and I did not find any good examples on how to get this (console application specifically) deployed there. Few questions I have are:</p>\n\n<p>1) Do I need to \"Add website\" or \"Add Application\" in IIS and put my files there ?</p>\n\n<p>2) Will I be needing a .svc file ? If yes, what must it contain and how do I tell it to start this \nconsole app.</p>\n\n<p>3) Will this console app run inside IIS ? How does this work ?</p>\n"},{"tags":["wcf","soap-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":170,"score":0,"question_id":13170431,"title":"pysimplesoap on WCF","body":"<p>i am a pysimplesoap user,</p>\n\n<p>currently i wrote a simple WCF webservice providing wsdl,</p>\n\n<p>the demo was downloaded at <a href=\"http://www.codeproject.com/Articles/97204/Implementing-a-Basic-Hello-World-WCF-Service?msg=4403209#xx4403209xx\" rel=\"nofollow\">http://www.codeproject.com/Articles/97204/Implementing-a-Basic-Hello-World-WCF-Service?msg=4403209#xx4403209xx</a></p>\n\n<p>and the demo ran correctly.</p>\n\n<p>Then i use pysimplesoap to connect the webservice as follows</p>\n\n<pre><code>from pysimplesoap.client import SoapClient\nclient = SoapClient(wsdl=\"http://localhost:8080/HostDevServer/HelloWorldService.svc?wsdl\",trace=False)\nresponse = client.GetMessage(\"Mike Liu\")\n</code></pre>\n\n<p>but the SoapClient' output was</p>\n\n<p>\"File \"C:\\Python27\\lib\\site-packages\\pysimplesoap\\client.py\", line 273, in get_operation \"SOAP version: %s\" % soap_ver)\nRuntimeError: Cannot determine service in WSDL: SOAP version: soap11\"</p>\n\n<hr>\n\n<p>then i used the suds.client</p>\n\n<pre><code>from suds.client import Client\n\nurl = 'http://localhost:8080/HostCmdLineApp/HelloWorldService/?wsdl'\n\nclient = Client(url)\n\nprint client.service.GetMessage(\"help\")\n</code></pre>\n\n<p>suds work normally only if i change binding=\"wsHttpBinding\" to \"basicHttpBinding\"</p>\n\n<p>could anybody provide solutions, thanks in advance~</p>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13161620,"title":"C# WPF Service custom request format","body":"<p>I have a WCF Serivce that reads requests with XML payloads and responds to these requests. For example, a simple login request would look like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LoginRequest&gt;\n    &lt;username&gt;test&lt;/username&gt;\n    &lt;password&gt;foo&lt;/password&gt;\n&lt;/LoginRequest&gt;\n</code></pre>\n\n<p>Now I know I could simply accept <code>XElement</code> in my service method but is there any way I can tell the underlying system how to read the above XML and translate it into a function call in such format:</p>\n\n<pre><code>public LoginResponse Login (string username, string password); \n</code></pre>\n\n<p>Is such a thing possible?</p>\n"},{"tags":["visual-studio-2010","wcf","servicereference"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4572,"score":4,"question_id":2692457,"title":"VS 2010 Error Object reference not set to an instance of an object when adding Service Reference for WCF Service","body":"<p>I have a VS2010 (RTM) solution which contains: </p>\n\n<p>WCF Service project<br>\nConsole WCF client project<br>\nClass project for DataContracts and members<br>\nClass project for some simple classes </p>\n\n<p>I successfully added a service reference in the console client project and ran the client.  I then did a long dev cycle repeatedly modifying the service then updating console service reference.  I then changed the namespace and assembly names for the projects as well as the .cs using references and app.config.  I of course missed some things as it would not build so I eventually removed the project references and the service reference, cleaned and built successfully.  </p>\n\n<p>I then attempted to add the service reference again, it discovered it but threw the Object reference not set to an instance of an object when OK'ing.  Fix in answer below...</p>\n"},{"tags":["wcf","autofac"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13166084,"title":"WCF and Autofac w/Extensionless Services","body":"<p>I am having a heck of a time trying to get this to work.</p>\n\n<p>I want Autofac to manage my WCF services and use extension less services.</p>\n\n<p>Any ideas why this does not work?</p>\n\n<pre><code>namespace SAIF.Services.WCF.Host\n{\n    using System;\n    using System.ServiceModel.Activation;\n    using System.Web;\n    using System.Web.Routing;\n    using Autofac;\n    using Autofac.Integration.Wcf;\n    using SAIF.Core.Domain;\n    using SAIF.Core.Domain.Model;\n    using SAIF.Repositories;\n    using SAIF.Services.WCF.Core;\n    using SAIF.Services.WCF.Services;\n\n    public class Global : HttpApplication\n    {\n        protected void Application_Start(object sender, EventArgs e)\n        {\n            // Create Routes\n            var factory = new AutofacServiceHostFactory();\n            RouteTable.Routes.Add(new ServiceRoute(\"FileService\", factory, typeof(SAIF.Services.WCF.Core.IFileService)));\n            RouteTable.Routes.Add(new ServiceRoute(\"WebContext\", factory, typeof(SAIF.Services.WCF.Core.IWebContextService)));\n\n            // Autofac Config\n            var builder = new ContainerBuilder();\n\n            builder.Register(x =&gt; new EFUnitOfWork())\n                .As&lt;EFUnitOfWork&gt;()\n                .As&lt;IUnitOfWork&gt;();\n\n            builder.RegisterGeneric(typeof(Repository&lt;&gt;))\n                .As(typeof(IRepository&lt;&gt;));\n\n            builder.Register(x =&gt; new FileService())\n                .As&lt;IFileService&gt;();\n\n            builder.Register(x =&gt; new WebContextService(x.Resolve&lt;IRepository&lt;WebContextItem&gt;&gt;(), x.Resolve&lt;IUnitOfWork&gt;()))\n                .As&lt;IWebContextService&gt;();\n\n            AutofacHostFactory.Container = builder.Build();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c#",".net","wcf","autofac"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13148468,"title":"Use Autofac with WCF service with InstanceContextMode = PerSession","body":"<p>I have a WCF service with <code>ServiceBehavior.InstanceContextMode = InstanceContextMode.PerSession</code>.</p>\n\n<p>How do I need to register the service with Autofac to get a new instance for each new session but use the same instance in the session?\nI am currently using the following configuration and it leads to behavior like <code>PerCall</code>:</p>\n\n<pre><code>builder.Register(c =&gt; new ChannelFactory&lt;IUserService&gt;()).SingleInstance();\nbuilder.Register(c =&gt; c.Resolve&lt;ChannelFactory&lt;IUserService&gt;&gt;().CreateChannel())\n       .UseWcfSafeRelease();\nbuilder.RegisterType&lt;UserService&gt;().AsImplementedInterfaces();\n</code></pre>\n"},{"tags":["c#","wcf","ssl","client-authentication","java-client"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":133,"score":1,"question_id":13039355,"title":"WCF Service for Java Client Using Service Certificate and Self Signed Client Certificate Supplied by Client Developer","body":"<p>I am developing a WCF service based on a vendor's implementation to receive data from them. I have a working version of this service using one way SSL with the client using our server certificate. Because of a recent change to their implementation, I now need to authenticate their client with a certificate instead of username and password.</p>\n\n<p>They develop in Java and I have no control over the client or the way they generate the certificate. They do not support the WSHttpBinding so I have to use the BasicHttpBinding. Their certificate is self-signed and will unfortunately be that way in production. I tried using Transport for the security and according to our server admin had their certificate installed appropriately on our server (I do not have access to our IIS server). I believe IIS was having an issue with the certificate because it is self-signed so I moved away from that implementation.</p>\n\n<p>After a lot of research I determined that it would probably only work if I validated their certificate in the service itself by getting it from the <code>OperationContext.Current.ServiceSecurityContext.AuthorizationContext.ClaimSets[0]</code>. This is my first WCF service so I believe I have it set up correctly but am getting the following error when testing from my WCF test client: <code>The private key is not present in the X.509 certificate</code>. When I have the vendor test from their client they are getting <code>An error occurred when verifying security for the message.</code></p>\n\n<p>Do I have something configured incorrectly? Is this implementation supported?</p>\n\n<p>Service Web.Config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n    &lt;configuration&gt;\n        &lt;system.serviceModel&gt;\n                 &lt;behaviors&gt;\n                &lt;serviceBehaviors&gt;\n                    &lt;behavior name=\"FileReceiverServiceBehavior\"&gt;\n                        &lt;useRequestHeadersForMetadataAddress/&gt;\n                        &lt;serviceMetadata httpsGetEnabled=\"true\"/&gt;\n                    &lt;/behavior&gt;\n                &lt;/serviceBehaviors&gt;\n            &lt;/behaviors&gt;\n            &lt;bindings&gt;\n                &lt;basicHttpBinding&gt;\n                    &lt;binding name=\"FileReceiverServiceBinding\"&gt;\n                        &lt;security mode=\"TransportWithMessageCredential\"&gt;\n                            &lt;message clientCredentialType=\"Certificate\"/&gt;\n                        &lt;/security&gt;\n                        &lt;readerQuotas maxStringContentLength=\"2147483647\"/&gt;\n                    &lt;/binding&gt;\n                &lt;/basicHttpBinding&gt;\n            &lt;/bindings&gt;\n            &lt;services&gt;\n                &lt;service behaviorConfiguration=\"FileReceiverServiceBehavior\" name=\"FileReceiverService.FileReceiverService\"&gt;\n                    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"FileReceiverServiceBinding\" contract=\"FileReceiverServiceSoap\" bindingNamespace=\"http://www.openuri.org/\" /&gt;\n                    &lt;endpoint address=\"mex\" binding=\"mexHttpsBinding\" contract=\"IMetadataExchange\"/&gt;\n                &lt;/service&gt;\n            &lt;/services&gt;\n        &lt;/system.serviceModel&gt;\n    &lt;/configuration&gt;\n</code></pre>\n\n<p>My WCF Test Client Config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"test\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate findValue=\"Users\"\n                               x509FindType=\"FindBySubjectName\"\n                               storeLocation=\"LocalMachine\"\n                               storeName=\"My\"/&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_FileReceiverServiceSoap\" closeTimeout=\"00:01:00\"\n          openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n          allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n          maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n          messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n          useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n              realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"Certificate\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"https://mydomain.com/vendor/FileReceiverService.svc\"\n        binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_FileReceiverServiceSoap\"\n        contract=\"ServiceReference1.FileReceiverServiceSoap\" name=\"BasicHttpBinding_FileReceiverServiceSoap\" behaviorConfiguration=\"test\" /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<h2><strong>Update:</strong></h2>\n\n<p>The vendor sent me the correct certificate. It is a valid certificate issued by a commercial CA. When I view the certificate locally I can see the chain to the trusted root and the status shows 'OK'.</p>\n\n<p>If I use <code>security mode=\"Transport\"</code> and <code>transport clientCredentialType=\"Certificate\"</code> I get: The HTTP request was forbidden with client authentication scheme 'Anonymous'</p>\n\n<p>If I use <code>security mode=\"TransportWithMessageCredential\"</code> and <code>message clientCredentialType=\"Certificate\"</code> I get: The private key is not present in the X.509 certificate. </p>\n\n<p>I think I may need to use strictly Transport so that it is interoperable with the Java client so I am focusing on the \"The HTTP request was forbidden with client authentication scheme 'Anonymous'\" error. Is that an issue with IIS settings or is it just not able to correctly validate the certificate when it gets to the server? The certificate is in Trusted People and I tried no client <code>certificateValidationMode</code> but also <code>PeerTrust</code>, <code>ChainTrust</code> and <code>PeerOrChainTrust</code>. Any help would be greatly appreciated.</p>\n\n<h2><strong>Update2:</strong></h2>\n\n<p>I am focusing on getting this to work with the following change to my original server configuration and matching change to my test client:</p>\n\n<pre><code>&lt;security mode=\"Transport\"&gt;\n  &lt;transport clientCredentialType=\"Certificate\"/&gt;\n</code></pre>\n\n<p>I still get: <em>The HTTP request was forbidden with client authentication scheme 'Anonymous'</em>. I found an explanation <a href=\"http://blog.coditate.com/2009/04/confusing-errors-using-wcf-transport.html\" rel=\"nofollow\">here</a> that basically confirms that the client certificate could not be validated by the server. How do I have our server administrators configure this application in IIS and install the certificate so that this works correctly?</p>\n"},{"tags":["c#",".net","wcf","datetime","timezone"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2374,"score":3,"question_id":510767,"title":"Best way to compute UTC/local datetime conversion in a WCF client/server application","body":"<p>I've got a client/server application, written in WCF / C#3.5.</p>\n\n<p>The server is in my local TimeZone, and clients are spreaded accross the world.</p>\n\n<p>My current strategy is to use UTC DateTime everywhere on the server and in the database, and to let the clients handle correctly the UTC DateTimes they receive.</p>\n\n<p>This means that everytime the client receives a message, its first task is to convert the DateTimes contained in the message from UTC to Local.</p>\n\n<p>I've defined an interface, implemented by all my [DataContract] objects to help this task :</p>\n\n<pre><code>public interface IConvertToLocalTime {\n   void ConvertToLocalTime();\n}\n</code></pre>\n\n<p>So I typically handle a message from the server this way :</p>\n\n<pre><code>public void ServerCallbackFoo(MyObject a, MyObject2 b)\n{\n  a.ConvertToLocalTime();\n  b.ConvertToLocalTime();\n  // my business code goes there\n}\n</code></pre>\n\n<p>This works fine, but I'm not very pleased with the fact that I've got to manually call the conversion method.</p>\n\n<p>It seems to me that this task should be managed by the WCF framework. Am I missing something there? Is there a better way to automate the conversion ?</p>\n"},{"tags":["wcf","ssis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13165415,"title":"How to call a WCF service from a SSIS Custom Log Provider?","body":"<p>I created a SSIS Custom Log Provider (SQL Server 2012 / Visual Studio 2010 / .Net Framerowk 4), and now I have to call a WCF service. I am not sure how to do that, since this is a custom library project, with no config file.</p>\n\n<p>Ideas? Thanks!</p>\n"},{"tags":["wcf","iis",".net-4.5"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13162378,"title":"Does Multicore JIT improve WCF services hosted in IIS?","body":"<p>I am trying to improve the performance of an application I have, consisting of many WCF web services hosted by IIS.</p>\n\n<p>I found a couple of <a href=\"http://msdn.microsoft.com/en-us/magazine/hh882452.aspx\" rel=\"nofollow\">articles</a> that say that ASP.NET applications would benefit of having Multicore Jit when they upgrade to .net 4.5</p>\n\n<p>I was wondering if I might see some improvements if I upgrade my servers to .net 4.5 and if in case it does, is there is anything to configure on them?</p>\n\n<p>Moving to a new version of the framework on my environment requires lots of supporting evidence of the improvement , and I do't want to go that way unless I know there is some gains in upgrading.</p>\n"},{"tags":["c#","android","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":67,"score":0,"question_id":13165533,"title":"Deserialize JSON object sent from Android app to WCF webservice","body":"<p>I'm trying to send a JSON object to my webservice method, the method is defined like this:</p>\n\n<pre><code>public String SendTransaction(string trans)\n{\n            var json_serializer = new JavaScriptSerializer();\n            Transaction transObj = json_serializer.Deserialize&lt;Transaction&gt;(trans);\n            return transObj.FileName;       \n}\n</code></pre>\n\n<p>Where I want to return the FileName of this JSON string that I got as a parameter. </p>\n\n<p>The code for the android application:</p>\n\n<pre><code>HttpPost request = new HttpPost(\n                \"http://10.118.18.88:8080/Service.svc/SendTransaction\");\n        request.setHeader(\"Accept\", \"application/json\");\n        request.setHeader(\"Content-type\", \"application/json\");\n\n        // Build JSON string\n        JSONStringer jsonString;\n\n        jsonString = new JSONStringer()\n                .object().key(\"imei\").value(\"2323232323\").key(\"filename\")\n                .value(\"Finger.NST\").endObject();\n\n        Log.i(\"JSON STRING: \", jsonString.toString());\n\n        StringEntity entity;\n\n        entity = new StringEntity(jsonString.toString(), \"UTF-8\");\n\n        entity.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,\n                \"application/json\"));\n        entity.setContentType(\"application/json\");\n\n        request.setEntity(entity);\n\n        // Send request to WCF service\n        DefaultHttpClient httpClient = new DefaultHttpClient();\n\n        HttpResponse response = httpClient.execute(request);\n        HttpEntity httpEntity = response.getEntity();\n        String xml = EntityUtils.toString(httpEntity);\n\n        Log.i(\"Response: \", xml);\n        Log.d(\"WebInvoke\", \"Status : \" + response.getStatusLine());\n</code></pre>\n\n<p>I only get a long html file out, which tells me <code>The server has encountered an error processing the request</code>. And the status code is <code>HTTP/1.1 400 Bad Request</code></p>\n\n<p>My Transaction class is defined in C# like this:</p>\n\n<pre><code> [DataContract]\npublic class Transaction\n{\n    [DataMember(Name =\"imei\")]\n    public string Imei { get; set; }\n\n    [DataMember (Name=\"filename\")]\n    public string FileName { get; set; }\n}\n</code></pre>\n\n<p>How can I accomplish this in the right way? </p>\n\n<p><strong>EDIT, this is my web.config</strong></p>\n\n<pre><code> &lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n\n          &lt;endpointBehaviors&gt;\n            &lt;behavior name=\"httpBehavior\"&gt;\n                &lt;webHttp /&gt;\n            &lt;/behavior &gt;\n        &lt;/endpointBehaviors&gt;\n\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"\"&gt;\n          &lt;!-- To avoid disclosing metadata information, set the values below to false before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"/&gt;\n    &lt;services&gt;\n      &lt;service name=\"Service.Service\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"httpBehavior\" binding=\"webHttpBinding\" contract=\"Service.IService\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;protocolMapping&gt;\n        &lt;add binding=\"webHttpBinding\" scheme=\"http\" /&gt;\n    &lt;/protocolMapping&gt;\n\n    &lt;!--&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;--&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n  &lt;!-- &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;--&gt;\n    &lt;!--\n        To browse web app root directory during debugging, set the value below to true.\n        Set to false before deployment to avoid disclosing web app folder information.\n      --&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13165489,"title":"Weird WCF error regarding update to serializable class","body":"<p>Here's the setup, I had a collection class in <code>MyAssembly</code> that looked like so:</p>\n\n<pre><code>[Serializable()]\npublic class MyCollection : List&lt;MyItem&gt; //MyItem is also serializable\n{\n    public string MyProperty{ get; set; }\n\n    //some methods for use by the current assembly\n}\n</code></pre>\n\n<p>And I had an application that made a reference to a wcf service, which in turn had a reference to this <code>MyAssembly</code>.</p>\n\n<p><strong>The problem:</strong> In the past we've made many changes to the classes without any issues, however I recently added a couple of new methods(no new properties) to <code>MyCollection</code> and after recompiling and redeploying the wcf service, the app consuming the service would all of a suddent return a null <code>MyCollection</code> when being called.</p>\n\n<p><strong>The solution and question:</strong> Updating the service reference in the app brought everything back to normal, but my question is why? I was under the understanding that new items could be added to your classes without having to update the reference unless something was changed or deleted. Can someone explain this or refer me somewhere?</p>\n"},{"tags":[".net","wcf","exception-handling","wcf-configuration","wcf-endpoint"],"answer_count":10,"favorite_count":5,"up_vote_count":33,"down_vote_count":0,"view_count":38893,"score":33,"question_id":2328840,"title":"Service has zero application (non-infrastructure) endpoints","body":"<p>I recently created a WCF service (dll) and a service host (exe). I know my WCF service is working correctly since I am able to successfully add the service to WcfTestClient. </p>\n\n<p>However, I seem to be running into an issue when I comes to utlizing my WCF from a service host (exe). I can add a reference to the WCF (dll) to my service host (exe) and create the necessary componets to the exe; such as the service installer, service host, and the app.config, compile and then finally install the exe using InstallUtil. But, when I tried to start the service in the Microsoft Management Console, the service immediately stops after being started. </p>\n\n<p>So I began investigating what could exactly be causing this issue an came up with this error from the Application Log in the Event Viewer. </p>\n\n<p>Description: </p>\n\n<blockquote>\n  <p>Service cannot be started.\n  System.InvalidOperationException:\n  Service 'Service' has zero application\n  (non-infrastructure) endpoints. This\n  might be because no configuration file\n  was found for your application, or\n  because no service element matching\n  the service name could be found in the\n  configuration file, or because no\n  endpoints were defined in the service\n  element.</p>\n</blockquote>\n\n<p>This error is actually generated in the <code>OnStart</code>; of my exe, when I perform this call <code>ServiceHost.Open()</code>. I've seen numerous posts where other individuals have run into this issue, however most if not all of them, claim that the service name or contract; namespace and class name, are not being specified. I checked both of these entries in my config file; in the exe as well as in the dll, and they match up PERFECTLY. I've had other people in the office double check behind me to make sure I wasn't going blind at one point, but of course they came to the same conclusion as me that everything looked like it was specified correctly. I am truly at a lost as to what is going on at this point.  Could anyone help me with this issue? </p>\n\n<p>Another thing that came up as a possible reason this may be happening is that the app.config is never being read; at least not the one I think should be getting read. Could this be the issue? If so, how can I go about addressing this issue. Again, ANY help would be appreciated. </p>\n"},{"tags":["wcf","data-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":739,"score":2,"question_id":3743977,"title":"WCF Data Contracts DTO","body":"<p>In my application I am making a service call and getting back populated WCF Data Contract object. I have to display this data in a grid. Is it good practice to bind the data contract to the grid ?</p>\n\n<p>Josh</p>\n"},{"tags":["wcf","wcf-data-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13157908,"title":"WCF Data Service whose data source is another WCF Data Service","body":"<p>does someone know if it possible to use one WCF Data Service as data source of another WCF Data Service? If so, how?</p>\n"},{"tags":["c#","wcf"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":5951,"score":6,"question_id":5221692,"title":"WCF service host cannot find any service metadata","body":"<p>I'm just learning wcf and currently got this far.</p>\n\n<p><strong>CS File:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.Text;\n\nnamespace wcfLib\n{            \n    [ServiceContract]\n    public interface IfaceService\n    {\n        [OperationContract]\n        int wordLen(string word);\n    }\n\n    public class StockService : IfaceService\n    {\n        public int wordLen(string word)\n        {\n            return word.Length;\n        }\n    }\n}\n</code></pre>\n\n<p>Yet when I'm trying to run it, it pops an error:</p>\n\n<blockquote>\n  <p>WCF service host cannot find any service metadata...</p>\n</blockquote>\n\n<p>Any idea what it could be?</p>\n\n<p><strong>Config File:</strong></p>\n\n<pre><code>&lt;system.serviceModel&gt;\n   &lt;services&gt;\n      &lt;service behaviorConfiguration=\"wcfLib.Service1Behavior\" name=\"wcfLib.Service1\"&gt;\n        &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"wcfLib.ser\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8732/Design_Time_Addresses/wcfLib/Service1/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"wcfLib.Service1Behavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","wcf","msmq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":13152002,"title":"Why would an MSMQ msg be dispatched again after processing?","body":"<p>using Transactional MSMQ and WCF here in C#</p>\n\n<p>sometimes for some reason, the message gets redispatched from the MSMQ even though the previous time, the message was processed successfully (i.e no unhandled exceptions or anything). There is only just the 1 msg I am placing on the queue.</p>\n\n<p>any ideas why?</p>\n\n<p>Sure, I am also debugging when the msg gets dispatched but I only have a very small number of breakpoints in certain areas and spend no longer than 3 seconds looking at the things I need to look at in that context of the msg being flowed into the system.</p>\n\n<p>any ideas why duplicate dispatches?</p>\n\n<p>Update: Code:</p>\n\n<pre><code>[ServiceContract]\n[ServiceKnownType(typeof(CustomMessage))]\n[ServiceKnownType(typeof(MessageA))]\n[ServiceKnownType(typeof(MessageB))]\npublic interface IMessageHandlerService\n    {\n        [OperationContract(IsOneWay = true, Action = \"*\")]\n        void ProcessMessage(MsmqMessage&lt;CustomMessage&gt; message);\n    }\n\n[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.Single, ReleaseServiceInstanceOnTransactionComplete = false)]\n    public sealed class MessageHandlerService : IMessageHandlerService\n    {\n        [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]\n        public void ProcessMessage(MsmqMessage&lt;CustomMessage&gt; message)\n        {\n            ...\n        }\n    }\n</code></pre>\n\n<p>my ABC:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"IncludeExceptionDetails\"&gt;\n          &lt;callbackDebug includeExceptionDetailInFaults=\"true\" /&gt;          \n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service name=\"Services.Implementation.MessageHandler.MessageHandlerService\"&gt;\n        &lt;endpoint address=\"msmq.formatname:DIRECT=OS:.\\private$\\msgs\" binding=\"msmqIntegrationBinding\" bindingConfiguration=\"MessageHandlerBinding\" contract=\"Services.Contracts.Messages.IMessageHandlerService\"&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;msmqIntegrationBinding&gt;\n        &lt;binding name=\"MessageHandlerBinding\" \n                 closeTimeout=\"00:30:00\" \n                 receiveTimeout=\"01:00:00\" \n                 retryCycleDelay=\"00:00:10\" \n                 receiveRetryCount=\"0\" \n                 exactlyOnce=\"true\" \n                 maxRetryCycles=\"1\" \n                 receiveErrorHandling=\"Move\"&gt;\n          &lt;security mode=\"None\"/&gt;\n        &lt;/binding&gt;\n      &lt;/msmqIntegrationBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I really don't understand how the question is vague and ambiguous :-)\nIts simple. When wcf is bound to the msmq, sometimes the same message is dispatched twice even though the first message was successfully processed.</p>\n\n<p>What other details do you need? Please tell!</p>\n"},{"tags":["c#","wcf","architecture","rabbitmq"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":314,"score":5,"question_id":7877461,"title":"Architecture guidance for a Rabbitmq .net implementation","body":"<p>I'm looking for some implementation guidance.  What are the pro and cons of using the wcf bindings or using the plain vanilla .net rabbitmq api. Are the moment we are not constrained to  use either.  I new to rabbitmq, but done a bundle of wcf. </p>\n\n<p>We have a product which collects info from publishers on each device. The product is behind the firewall (at the moment). The publisher will need 3-4 channels.</p>\n\n<ul>\n<li>Request/Response to publish the metric to publish/subscribe on server with ack from server.</li>\n<li>Update channel, to update publisher rulebase for metric discovery from server.</li>\n<li>Heartbeat channel to check server is up and respond to server heartbeat.</li>\n<li>Possible dead letter channel.</li>\n</ul>\n\n<p>Publisher will be cross platform. Thinking of hosting on Mono, on Linux, BSD, Solaris, Android, MacOs, iOS, and possibly Aix/HP-UX. Dont know how effective wcf endpoints would be in these instances.  </p>\n\n<p>Server will have multiple workers, each receive same message from own? queue, ack it and process it against their own rulebase.  I would like the workers to be event driven. Server needs to be high performance, 10k to 100k+ messages per minute.  No messages can be lost from publisher to server. </p>\n\n<p>Im swinging towards using the plain api as it offers more flexibility as regarding stuff like threading/serialization/session management/security/compression but the product may be moved to Azure and offered as SaaS or PaaS, and having wcf endpoint would make sense to talk to publishers on both on/off windows, but that would be in the longer term. </p>\n"},{"tags":["wcf","design"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13148165,"title":"Modify Soap message in WCF","body":"<p>I have interesting task. I have two wcf\nEndpoints. Each end point located in\ndifferent address.  Endpoints are not exposed\nto the client . I have additional main end point\nwhich exposed to client and only via this end point , other two end points can be invoked .\nBased on some input  class I need to decide \nwhich end point I should invoke and in response\nI need to transform return XML to response XML .</p>\n\n<p>My solution is to create empty operation contract\nand implement Http module that will trigger\nin end request event. Based on input parameter\nI will create soap request to one of the two endpoint and will transfer the result to result XML. </p>\n\n<p>May be instead I should use message inspectors \ninstead ? Did  you met similar problem ?</p>\n"},{"tags":["android","windows","wcf","windows-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13163183,"title":"Calling a WCF Service with windows authentication from Android","body":"<p>I have created a WCF Service in a company network. \nIn WCF I wanted to get the current user. \nThe WCF Service will be called from an Android-Client-Application.</p>\n\n<p>I tried to do it like in an ASP.net-Application: </p>\n\n<p>MY WCF Application: </p>\n\n<pre><code>if (HttpContext.Current != null) { \n          // unfortunately it is null, not available in WCF\n               IPrincipal user = HttpContext.Current.User;\n               samAccountName =  UserSession.ExtractSamAccountName(user);\n}\n</code></pre>\n\n<p>But that didn't work. </p>\n\n<p>In my Androi-Application I am using a standard http client. I have special certificats installed on my android device. </p>\n\n<p>I really hope that you can help me. Right now I am stuck. </p>\n"},{"tags":["c#",".net","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":175,"score":4,"question_id":11739499,"title":"Error on adding Service Reference due to an amount of service operations","body":"<p>I have a service contract with a sufficient amount of operations (~ 40 operations). When I'm trying to add Service Reference from my client project (or even from <a href=\"http://msdn.microsoft.com/en-us/library/bb552364.aspx\" rel=\"nofollow\">WCF Test Client</a>) I'm getting an error:</p>\n\n<blockquote>\n  <p>Error: Cannot obtain Metadata from\n  net.tcp://localhost:12345/DataProvider/mex If this is a Windows (R)\n  Communication Foundation service to which you have access, please\n  check that you have enabled metadata publishing at the specified\n  address.  For help enabling metadata publishing, please refer to the\n  MSDN documentation at\n  <a href=\"http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata\" rel=\"nofollow\">http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata</a> Exchange\n  Error    URI: net.tcp://localhost:12345/DataProvider/mex    Metadata\n  contains a reference that cannot be resolved:\n  'net.tcp://localhost:12345/DataProvider/mex'.    There is an error in\n  the XML document.    The value for the 'type' attribute is invalid -\n  'q2:PersonFilter' is an invalid value for the 'type' attribute.</p>\n</blockquote>\n\n<p><strong>The strange behaviour starting here:</strong> when do nothing, but remove <strong>just one</strong> of service operations, everything goes very well - adding of the Service Reference works super good. Of course, I did not tried to remove every method of those ~40, but I've tried ~5. <strong>Another important thing</strong> - I did not remove the method which operates with the <code>PersonFilter</code> (the type shown in the error message).</p>\n\n<p>I have no idea, how to fix this. If more information is needed, just let me know.</p>\n\n<p><strong>UPDATE #1</strong></p>\n\n<p>So, I've just tried to set mex custom binding to increase defult quotas:</p>\n\n<pre><code>  &lt;customBinding&gt;\n    &lt;binding name=\"mexBinding\"&gt;\n      &lt;binaryMessageEncoding&gt;\n        &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" \n                      maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" \n                      maxNameTableCharCount=\"2147483647\" /&gt;\n      &lt;/binaryMessageEncoding&gt;\n      &lt;tcpTransport transferMode=\"Buffered\" maxReceivedMessageSize=\"2147483647\" \n                    maxBufferSize=\"2147483647\" /&gt;\n    &lt;/binding&gt;\n  &lt;/customBinding&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>  &lt;service name=\"MyNamespace.DataService\" behaviorConfiguration=\"myServiceBehavior\"&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"net.tcp://localhost:12345/DataProvider/\" /&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n\n    &lt;endpoint binding=\"netTcpBinding\" bindingConfiguration=\"NetTcpBinding\"\n              contract=\"MyNamespace.IDataService\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"customBinding\" bindingConfiguration=\"mexBinding\"\n              name=\"tcp\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n</code></pre>\n\n<p>but it does not help - the same error is still occuring.</p>\n\n<p><strong>UPDATE #2</strong></p>\n\n<p>Using <a href=\"http://msdn.microsoft.com/en-us/library/aa347733.aspx\" rel=\"nofollow\">ServiceModel Metadata Utility Tool (Svcutil.exe)</a> I've tried to get metadata from 3 following sources:</p>\n\n<ol>\n<li>HTTP host</li>\n<li>TCP host</li>\n<li>Assembly directly</li>\n</ol>\n\n<p>As for sources 1. and 3. - everything goes fine. I'm able to get metadata and generate client code, but when I call <code>svcutil</code> over TCP host I'm getting:</p>\n\n<blockquote>\n  <p>Microsoft (R) Service Model Metadata Tool [Microsoft (R) Windows (R)\n  Communication Foundation, Version 4.0.30319.1] Copyright (c) Microsoft\n  Corporation.  All rights reserved.</p>\n  \n  <p>Attempting to download metadata from\n  'net.tcp://localhost:12345/DataProvider/mex' using WS-Metadata Exchange.\n  This URL does not support DISCO.</p>\n  \n  <p>Microsoft (R) Service Model Metadata Tool [Microsoft (R) Windows (R)\n  Communication Foundation, Version 4.0.30319.1] Copyright (c) Microsoft\n  Corporation.  All rights reserved.</p>\n  \n  <p>Error: Cannot obtain Metadata from\n  net.tcp://localhost:12345/DataProvider/mex</p>\n  \n  <p>If this is a Windows (R) Communication Foundation service to which you\n  have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing,\n  please refer to the MSDN documentation at\n  <a href=\"http://go.microsoft.com/fwlink/?LinkId=65455\" rel=\"nofollow\">http://go.microsoft.com/fwlink/?LinkId=65455</a>.</p>\n  \n  <p>WS-Metadata Exchange Error\n      URI: net.tcp://localhost:12345/DataProvider/mex</p>\n\n<pre><code>Metadata contains a reference that cannot be resolved: 'net.tcp://12345/DataProvider/Management/mex'.\n\nThere is an error in the XML document.\n\nThe value for the 'type' attribute is invalid - 'q2:PersonFilter' is an invalid value for the 'type' attribute.\n</code></pre>\n  \n  <p>If you would like more help, type \"svcutil /?\"</p>\n</blockquote>\n\n<p>I'm still have no idea about what is wrong with my wcf service or its configuration.</p>\n"},{"tags":["c#",".net","wcf","windows-services","xml-serialization"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":110,"score":3,"question_id":13086015,"title":"Why does instantiating XmlSerializer before ServiceHost.Open is called produce a memory & handle leak","body":"<p>I installed a Windows Service.\n<br>I started the service.\n<br>I called a simple method with a transactional WCF call (new channel per call - no caching).\n<br>For each call about 2 handles remain in memory.</p>\n\n<p>This can be observed if the following items are applicable:</p>\n\n<ol>\n<li>It is a Windows Service and I don't run it as a Console App.</li>\n<li>I use a Transaction (separate process or machine tested only) to call the WCF method.</li>\n<li>Before calling <code>ServiceBase.Run(servicesToRun);</code> I instantiate XmlSerializer with some type.</li>\n<li>The type is a custom type. It does not occur with <code>new XmlSerializer(typeof(string))</code> or new <code>XmlSerializer(typeof(XmlDocument))</code>. No call to serialize is necessary. It is enough if the custom type has only a string as property (no handles anywhere!)</li>\n<li>Creating a static XmlSerialization.dll using i.e. SGen.exe will not produce this problem.</li>\n</ol>\n\n<p>My Code already includes the fix:\n<br>Use XmlSerializer <em>earliest</em> in OnStart():</p>\n\n<p><strong>Program.cs</strong></p>\n\n<pre><code>WindowsService winSvc = new WindowsService();\nServiceBase[] servicesToRun = new ServiceBase[]{winSvc};                    \nServiceBase.Run(servicesToRun);\n</code></pre>\n\n<p><strong>WindowsService.cs</strong></p>\n\n<pre><code>internal sealed class WindowsService : ServiceBase\n{\n    private ServiceHost wcfServiceHost = null;\n\n    internal WindowsService()\n    {\n        AutoLog = true;\n        CanStop = true;\n        CanShutdown = true;\n        CanPauseAndContinue = false;\n    }\n\n    internal void StartWcfService()\n    {\n        wcfServiceHost = new ServiceHost(typeof(DemoService));\n        wcfServiceHost.Open();\n    }\n\n    protected override void Dispose(bool disposing)\n    {\n        if (wcfServiceHost != null)\n        {\n            wcfServiceHost.Close();\n        }\n\n        base.Dispose(disposing);\n    }\n\n    protected override void OnStart(string[] args)\n    {\n        new XmlSerializer(typeof(MyType));\n\n        StartWcfService();\n    }\n}\n</code></pre>\n\n<p><strong>DemoService.cs</strong></p>\n\n<pre><code>[ServiceBehavior\n    (\n        InstanceContextMode = InstanceContextMode.PerSession,\n        TransactionAutoCompleteOnSessionClose = false,\n        IncludeExceptionDetailInFaults = true\n    )\n]\npublic sealed class DemoService : IDemoService\n{           \n    [TransactionFlow(TransactionFlowOption.Allowed)]\n    [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]\n    public int Add(int a, int b)\n    {\n        return a + b;\n    }\n}\n</code></pre>\n\n<p><strong>Client.cs</strong>:</p>\n\n<pre><code>IChannelFactory&lt;IDemoService&gt; channelFactory = new ChannelFactory&lt;IDemoService&gt;(\"defaultClientConfiguration\");\nIDisposable channel = null;\nfor (int index = 0; index &lt; 5000; index++)\n{\n    using\n    (\n        channel = (IDisposable)channelFactory.CreateChannel(new EndpointAddress(\"net.tcp://localhost:23456/DemoService\")))\n        {                       \n        IDemoService demoService = (IDemoService)channel;\n        using (TransactionScope tx = new TransactionScope(TransactionScopeOption.RequiresNew))\n        {\n            demoService.Add(3, 9);\n            tx.Complete();  \n        }\n    )\n}\n</code></pre>\n\n<p>Can someone explain this behavior?</p>\n"},{"tags":["wcf","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":250,"score":2,"question_id":4498972,"title":"Passing a stream to Restfull Wcf","body":"<p>I am passing a stream to rest full wcf service.I would be setting up this stream as a payload and not in the uri.In this case what would be my uri template..</p>\n\n<p>my contract looks like this :</p>\n\n<pre><code>[ServiceContract]\npublic interface IRjisProxyWcfService\n{\n    [OperationContract]\n    [WebInvoke(Method = \"PUT\", UriTemplate = \"\")]\n    Stream Post(Stream inputStream);\n}\n</code></pre>\n\n<p><strong>What would be my uri template?</strong></p>\n"},{"tags":["wcf","service","client","host"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":714,"score":-1,"question_id":5113713,"title":"How can I send a data from WCF host to connected client?","body":"<p>I want to send a data from WCF host (not service proxy) to the connected client with the service.\nHow can I achieve this?</p>\n"},{"tags":["c#","wcf","url","iis"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13161034,"title":"WCF/IIS 400 Error","body":"<p>I am getting a 400 error running my WCF service (.NET 3.5) in IIS7 with the following URL:</p>\n\n<pre><code>http://localhost/mrlabatch/MRLABatchProcessingService.svc/events/sr123%20eb/ACCESSCONTROL,ADT,ADTDERIVATION,ADTSTATIONNUMBER,ADTYEAR,CITY,COUNTY,FACILITYTYPE,FEDERALAIDROUTENUMBER,FUNCTIONALCLASSIFICATION,JURISDICTION,LEFTSHOULDERTYPE,LEFTSHOULDERWIDTH,LEFTSIDEWALKWIDTH,MASSDOTHIGHWAYDISTRICT,MEDIANTYPE,MEDIANWIDTH,MPO,NHSSTATUS,NUMBEROFPEAKHOURLANES,NUMBEROFTRAVELLANES,RIGHTOFWAYWIDTH,RIGHTSHOULDERTYPE,RIGHTSHOULDERWIDTH,RIGHTSIDEWALKWIDTH,ROUTEKEY,SPEEDLIMIT,STREETNAME,STREETOPERATION,SUBROUTE,SURFACETYPE,SURFACEWIDTH,TERRAIN,TRUCKROUTE,UNDIVIDEDLEFTSHOULDERTYPE,UNDIVIDEDLEFTSHOULDERWIDTH,URBANIZEDAREA,URBANTYPE/?frommp=8.28489&amp;tomp=10.30031\n</code></pre>\n\n<p>The url will work fine in when debugging in Visual Studio (specifying a different port of course)</p>\n\n<p>If I shorten the URL it works fine as well in both VS and IIS:</p>\n\n<pre><code>http://localhost/mrlabatch/MRLABatchProcessingService.svc/events/sr123%20eb/ACCESSCONTROL,ADT,ADTDERIVATION,ADTSTATIONNUMBER,ADTYEAR,CITY,COUNTY,FACILITYTYPE,FEDERALAIDROUTENUMBER,URBANIZEDAREA,URBANTYPE/?frommp=8.28489&amp;tomp=10.30031\n</code></pre>\n\n<p>I've tried bumping my maxrequestlength up in the web.config:\n</p>\n\n<p>Is there another obstruction to the URL size???</p>\n"},{"tags":["c#","wcf","service","windows-services","nettcpbinding"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13153529,"title":"How do I create a property that all sessions in a WCF service have access to?","body":"<p>i have nettcpbinding service and host it with windows service. the service must work on network and it handle incoming message comes from more than 100 clients.</p>\n\n<p>Problem :\nI want have a property that all session can access to it . like this :</p>\n\n<pre><code>class a\n{\n   list&lt;string&gt; strList=new list&lt;string&gt;();\n\nclass b{}\nclass c{}\n...\n}\n</code></pre>\n\n<p>in this example all class can access to strList. i  want have a list that all session can access to it (add or remove thing in that list).</p>\n\n<p>service configuration is buffered and none security . and service attribute is here :</p>\n\n<pre><code>[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]\n[ServiceContract(SessionMode = SessionMode.Required)]\n</code></pre>\n\n<p><strong>EDIT :</strong>\ni dont want create that classes that was only one example. i just need have a list that all session can access to it.when you have InstanceContextMode.PerSession service that service class will create per each client then each client have their own service class now i want each session that created can access one public list .</p>\n\n<p><strong>EDIT2:</strong>\nthis list is in server and just server can access it dont need send list to client. it is server variable for calculate some thing .</p>\n"},{"tags":["c++","wcf","gsoap"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":707,"score":2,"question_id":4530707,"title":"Problem in connecting to WCF web service using gSOAP?","body":"<p>I am writing a simple cmd client to try to consume the WCF web service i developed in order to test how to connect to the Web service using unmanaged C++.</p>\n\n<p>I have been following this tutorial <a href=\"http://www.blinnov.com/2008/01/22/wcf-service-unmanaged-client/en/\" rel=\"nofollow\">http://www.blinnov.com/2008/01/22/wcf-service-unmanaged-client/en/</a> step by step but still not managed to consume the service successfully.</p>\n\n<pre><code>#include \"BasicHttpBinding_USCOREIService1.nsmap\"\n#include \"soapBasicHttpBinding_USCOREIService1Proxy.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nint main(int argc, char **argv)\n{\nBasicHttpBinding_USCOREIService1Proxy myProxy;\nstatic const char* const endPoint = \"http://localhost:50181/Service1.svc\";\n\nmyProxy.soap_endpoint = endPoint;\n_ns1__GetData param;\n_ns1__GetDataResponse response;\nparam.fileName = &amp;std::string(\"house.ifc\");\n\nif ( myProxy.GetData(&amp;param, &amp;response) == SOAP_OK) {\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl; //Succeeded\n}\nelse {\n\n    myProxy.soap_stream_fault(std::cerr);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>it always gives me \nError 415 fault: SOAP-ENV:Server[no subcode]\n\"HTTP Error\"\nDetail: HTTP/1.1 415 Unsupported Media Type\n I have been trying all the day to get it done but still nothing new. :(</p>\n"},{"tags":["wcf","serialization","deserialization","datacontractserializer","xmlserializer"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":27,"score":3,"question_id":13158700,"title":"Force WCF to use a existing buffers during Deserialization?","body":"<p>I looked for some other topics here as well, but I didn't find a solution to my problem yet.</p>\n\n<p>Imagine the following:<br>\nI've a very simple <code>ServiceContract</code> with different <code>OperationContracts</code>. One of these <code>OperationContracts</code> is a simple use-case \"download a data transfer object\". </p>\n\n<p>The Service looks like:</p>\n\n<pre><code>...\n[OperationContract]\nDTO Download(strind Id)\n...\n</code></pre>\n\n<p>Class DTO looks like:</p>\n\n<pre><code>[DataContract]\npublic class DTO\n{\n     [DataMember]\n     public string Id;\n\n     [DataMember]\n     public byte[] Data;\n}\n</code></pre>\n\n<p>Of course it's very simple and it works fine, but I need to allocate the <code>byte[]</code> in DTO by myself! </p>\n\n<p>My Code is part of a framework componenent and it's working in parallel under massive memory restrictions. I don't want WCF to allocate all the byte[] and I don't want the ManagedHeap to deallocate them all again. I need to share and reuse all parallel existing buffers. </p>\n\n<p>So when I finished my serialization I will reuse the buffer on serverside.\nOn clientside I want WCF to read into <strong>my buffer</strong>!</p>\n\n<p>I tried some solutions with own <code>XmlObjectSerialiers</code> and own <code>OperationBehaviors</code>, but it didn't work yet.</p>\n\n<p>Does anyone have any other ideas?</p>\n"},{"tags":["c#","java","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":191,"score":2,"question_id":10957706,"title":"how to fix protocol violation in c#","body":"<p>I have a c# \"client\" and a Java \"server\".  The java server has a wsdl it serves to the client.\nSo far it works for c# to make a request for the server to perform a soap action. My server gets the soap request  executes the method and tries to return the result back to the client.</p>\n\n<p>When I send the response to c# however, I get \"The server committed a protocol violation. Section=ResponseStatusLine\".</p>\n\n<p>I have spent all day trying to fix this and have come up with nothing that works. If I explain what i did, this post would be very long, so I'll keep it brief.</p>\n\n<p>i Googled for hours and everything tells me my \"response line\" is correct. I tried shutting down Skype, rearranging the response line, adding things, taking things away, etc, etc. All to no avail.</p>\n\n<p>This is for a class assignment so no, I can not use apis to help. I must do everything manually on the server side. That means parsing by hand, creating the soap response and the http response by hand. Just thought you'd like to know that before you say to use something that does it for me.</p>\n\n<p>I even tried making sure my server was sending the correct header by creating a java client that \"mimicked\" the c# one so I could see what the server returned. However, it's returning exactly what i told it to send. </p>\n\n<p>I tried telling my java client to do the same thing but to an actuall running c# service, to see what a real service returns, and it returned basically the same thing. To be safe, I copied it's response and tried sending it to the c# client and it still threw the error.</p>\n\n<p>Can anyone help? I've tried all i can think of, including adding the useUnsafeHeaderParsing to my app config. Nothing is working though. I send it exactly what a real service sends it and it yells at me. I send it what i want and it yells.</p>\n\n<p>I'm sending this:</p>\n\n<pre><code>\"200 OK HTTP/1.0\\r\\n\" +\n\"Content-Length: 201\\r\\n\" +\n\"Cache-Control: private\\r\\n\" +\n\"Content-Type: text/xml; charset=utf-8\\r\\n\\r\\n\";\n</code></pre>\n"},{"tags":["json","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13104839,"title":"JSON Service passing empty/null string parameter value","body":"<p>I have set of WCF services which allow JSON format for message exchange.</p>\n\n<pre><code>[WebInvoke(Method = \"GET\", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, UriTemplate = \"SearchStores/{accountId}/{storeName}\")]\npublic IList&lt;Store&gt; SearchStores(string accountId, string storeName)\n</code></pre>\n\n<p>How can I pass an empty/null storeName to the method? If I using following url to invoke the method, i get 404 not found error.</p>\n\n<p>servername:port/myservice/SearchStores/1/</p>\n\n<p>Please suggest thanks.</p>\n"},{"tags":["wcf","wcf-data-services","csla"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":631,"score":1,"question_id":3100309,"title":"WCF Data Services How do I add Business Logic or use existing CSLA objects","body":"<p>First of all, this is my first Stack Overflow question so apologies in advance if I get this wrong!</p>\n\n<p>I'm working on creating a service endpoint for a CRM database used internally. Several applications want to read and write to this database so exposing a WCF service seemed like the best approach.</p>\n\n<p>I started off using the Entity Framework for ORM, CSLA for the Business Logic layer and a standard WCF service for communication with the client applications. All was going fine until I took a look at WCF Data Services and got seduced by the lovely REST interface, ease of consumption by AJAX clients and the joy of using new tech!</p>\n\n<p>I've now replaced large parts of the WCF services with a single WCF Data Service which exposes the Entity Framework model directly, bypassing the CSLA layer. This works great for read only operations but I cannot perform the other CRUD functions without some business logic.</p>\n\n<p>I've been looking into Interceptors and I can certainly put business login in there but I actually want to intercept the POST/Add operation, map the values onto the CSLA BusinessBase class in question and let that do all the validation and final save into the database. I've tried this and while the CSLA object works as intended, the underlying WCF Data Service framework also persists its version so I get two entries in the db.</p>\n\n<p>I therefore have a few questions:</p>\n\n<p>1) Can I completely intercept a Change request, let my own business objects handle it then cancel the WCF Data Service without throwing an exception?</p>\n\n<p>2) Is there a better/standard approach to adding business logic layers to a WCF Data Service stack? I have not been able to find one so far.</p>\n\n<p>Thanks in advance,</p>\n\n<p>Dave</p>\n"},{"tags":["visual-studio-2010","wcf","c#-4.0","iis7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13159306,"title":"WCF Service - The server encountered an error processing the request","body":"<p>I have two Get methods in Interface </p>\n\n<pre><code>  [OperationContract]//RequestFormat = WebMessageFormat.Json,\n        [WebGet(UriTemplate = \"GetEmployee/?pNum={PersonalNUmber}&amp;pass={pass}&amp;deviceid={deviceid}\")]\n        Controller GetEmployee(string personalNUmber, string pass, string deviceid);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>[OperationContract]\n        [WebGet(UriTemplate = \"GetName/?deviceid={deviceid}\")]\n        Controller GetName(string deviceid);\n</code></pre>\n\n<p>and ControllersInfo class</p>\n\n<pre><code>public class ControllersInfo : IControllersInfo\n    {\n\n\n        public Controller GetEmployee(string identicalNumber, string pass, string deviceid)\n        {\n        }                            \n\n        public Controller GetName(string deviceid)\n        {\n\n}}\n</code></pre>\n\n<p>when I deploy on IIS 7.0 and made request from my local browser like this <a href=\"http://xxx.xxx.xxx.xxx:82/ControllersInfo.svc/GetEmployee/\" rel=\"nofollow\">http://xxx.xxx.xxx.xxx:82/ControllersInfo.svc/GetEmployee/</a> everything worked fine - method was called, but when I called second method like this <a href=\"http://xxx.xxx.xxx.xxx:82/ControllersInfo.svc/GetName/\" rel=\"nofollow\">http://xxx.xxx.xxx.xxx:82/ControllersInfo.svc/GetName/</a> second method didn't call. I insertde breakpoints at the beginning of methods.\nSo what is problem can anyone tell me ?</p>\n"},{"tags":["c#","asp.net","wcf","iis","active-directory"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13157762,"title":"Pass Windows Authentication between IIS servers","body":"<p>I have an ASP.NET web application which uses a WCF IIS-based backend service.</p>\n\n<p>I can use Active Directory Authentication for the web application, but I would like to use it also on the WCF service (which is on another IIS server).</p>\n\n<p>Is it possible to do this via configurations only?</p>\n"},{"tags":["wcf","authentication","iis7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13159187,"title":"Authentication of clients using WCF uisng username and password .Net","body":"<p>I get this error when the client contacts the WCF:</p>\n\n<pre><code>Could not find a base address that matches scheme https for the endpoint with binding WSHttpBinding. Registered base address schemes are [http]. \n</code></pre>\n\n<p>My WCF has only Basic auth in IIS7 enabled.\nMy WCF web.config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;appSettings&gt;\n&lt;add key=\"Logging\" value=\"true\"/&gt;\n&lt;add key=\"userName\" value=\"am\"/&gt;\n&lt;add key=\"password\" value=\"pm\"/&gt;\n&lt;add key=\"ADDomain\" value=\"testenv.local\"/&gt;\n&lt;/appSettings&gt;\n&lt;connectionStrings/&gt;\n&lt;system.web&gt;\n&lt;compilation debug=\"true\" /&gt;\n&lt;pages controlRenderingCompatibilityVersion=\"3.5\" clientIDMode=\"AutoID\"/&gt;\n&lt;/system.web&gt;\n&lt;system.serviceModel&gt;\n&lt;bindings&gt;\n  &lt;webHttpBinding&gt;\n    &lt;binding name=\"myweb\"&gt;\n      &lt;security mode=\"TransportCredentialOnly\"&gt;\n        &lt;transport clientCredentialType=\"Basic\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"myweb1\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Basic\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"SecureRESTSvcTestBehavior\" name=\"Hdir.ListData\"&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"https://localhost:8081/\"/&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n    &lt;!--webHttpBinding allows exposing service methods in a RESTful manner--&gt;\n    &lt;endpoint address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"myweb1\"  behaviorConfiguration=\"webHttpBehavior\" contract=\"Hdir.IListData\"/&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"  /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;!--&lt;behavior name=\" \"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"false\" httpsGetEnabled=\"true\"/&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n    &lt;/behavior&gt;--&gt;\n    &lt;behavior name=\"SecureRESTSvcTestBehavior\"&gt;\n      &lt;!-- To avoid disclosing metadata information, set the value below to \n           false and remove the metadata endpoint above before deployment --&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n      &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  \n           Set to false before deployment to avoid disclosing exception information --&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n      &lt;serviceAuthorization serviceAuthorizationManagerType=\"Hdir.CustomAuthorizationManager, Hdir\"/&gt;\n      &lt;!--&lt;serviceCredentials&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"Hdir.CustomUserNameValidator, Hdir\" /&gt;\n      &lt;/serviceCredentials&gt;--&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n   &lt;endpointBehaviors&gt;\n    &lt;behavior name=\"webHttpBehavior\"&gt;\n      &lt;webHttp/&gt;\n    &lt;/behavior&gt;\n  &lt;/endpointBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n&lt;system.webServer&gt;\n&lt;directoryBrowse enabled=\"true\"/&gt;\n&lt;httpProtocol&gt;\n  &lt;customHeaders&gt;\n    &lt;add name=\"Access-Control-Allow-Origin\" value=\"*\"/&gt;\n    &lt;add name=\"Access-Control-Allow-Headers\" value=\"x-requested-with\"/&gt;\n    &lt;add name=\"Access-Control-Request-Method\" value=\"GET\"/&gt;\n  &lt;/customHeaders&gt;\n&lt;/httpProtocol&gt;\n&lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>My Client is a simple ASP.net Client hosted in II/ trying to call the WCF:\nMy Client web.config</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;appSettings&gt;\n&lt;add key=\"userName\" value=\"am\"/&gt;\n&lt;add key=\"password\" value=\"pm\"/&gt;\n\n&lt;add key=\"url\" value=\"http://localhost:8081/ListData.svc\"/&gt;\n&lt;/appSettings&gt;\n&lt;system.web&gt;\n  &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n&lt;/system.web&gt;\n&lt;system.webServer&gt;\n  &lt;directoryBrowse enabled=\"true\"/&gt;\n&lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>If i change the bindigns to basicHttpBinding in the web.config then it works. but then the CeckAccessCore() method from CustomAuthorizationManager is run twice. the first one has the auth headers and the second one not therefore allways not authenticated; return false.  If anyone can solve this then my problem is solved.</p>\n\n<p>When one says that i have to use Basic auth does this mean that i have to only enable the Basic Authenticatin in IIS for the particular WCF, or (in addtion) does it mean just to use basicHttpBinding in web.config?</p>\n\n<p>When i only enable Basic auth in IIS7 and my client calls the WCF i allways get not authorized. if I browse to the WCF using IE then i get pop-up for username and pass. How is it supposed that a client(application) fills in a pop-up if uusing basic auth??</p>\n\n<p>What i want to do is to be able to authenticate everyone using the WCF. They sa that Basic authentication can be used to authenticate http request with username and password. Does this mean that anyone who wants to use the wcf has to provide username and password in the httprequest (in HttpWebrequest or WebClient) or does it mean that they have to enter them in a pop-up window? what is difference between http header and SOAP header?</p>\n\n<p>Summary:\nUsing basicHttpBinding: checkAccessCore runs twice and therefore allways not authenticated.\nUsing basicHttpBinding and enabling Basic Auth in IIS7: a pop-up is shown in the browser. how to prevent that pop-up showing for WCFClient?\nUsing wshttBinding and the configs above: The above Error is shown. How to solve it?</p>\n\n<p>I have spent <strong>alot of</strong> time trying ot figure out the problem. I really need help and support please.</p>\n\n<p>Code for CheckAccessCore in CustomAuthorizationManager:</p>\n\n<pre><code>    public class CustomAuthorizationManager : ServiceAuthorizationManager \n{\n    protected override bool CheckAccessCore(OperationContext operationContext)\n    {\n        //Extract the Authorization header, and parse out the credentials converting the Base64 string:\n        var authHeader = WebOperationContext.Current.IncomingRequest.Headers[\"Authorization\"];\n        if ((authHeader != null) &amp;&amp; (authHeader != string.Empty))\n        {\n</code></pre>\n"},{"tags":["wcf","wcf-binding","wcf-client"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":141,"score":3,"question_id":9068211,"title":"WCF: Does Close() really close connection?","body":"<p>We have some issues with WCF services and I am doing some tests:\nI just created new WCF client and service with <strong>default settings</strong> and monitoring how it works on TCP level. I use .net 4.0 and <strong>net.tcp</strong> binding</p>\n\n<p>And what I see: after <em>using</em> statement closes WCF does not really close connection to server... \nOn TCP level it should send [FIN] package to server, but instead it do nothing, just waiting and <strong>in 2 minutes server terminate connection</strong> with [RST] package. I attached some screenshots from wireshark</p>\n\n<p>I believe it's how wcf works, but I was not able to find some information to confirm it. \nAlso I noticed than if after closing using statement, I open new using statement it use the same port to communicate on client side... (portsharing is false on client) </p>\n\n<p>My questions: </p>\n\n<ul>\n<li>Why WCF does not close connection to server after using statement is\nclosed?</li>\n<li>What can I do to make it close connection properly (send [FIN] statement)?</li>\n</ul>\n\n<p>Thanks.\np.s. I am not attaching any configs, because it's default values which VS2010 creates for me.</p>\n\n<p><img src=\"http://i.stack.imgur.com/C4UCv.png\" alt=\"wcf communication on tcp level\"></p>\n"},{"tags":["asp.net","wcf","iis7","forms-authentication","basic-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":224,"score":1,"question_id":9886149,"title":"WCF on IIS 7.0 Service Security Configuration Issue using Basic Authentication","body":"<p>I have spend the last couple of days trying to solve an issue when hosting a WCF service in SQL 2008 Server and IIS 7.0.</p>\n\n<p>This problem only occurs when I have anonymous authentication disabled and using Basic Authentication over SSL as shown in the web.config extract below </p>\n\n<pre><code>&lt;security mode=\"Transport\"&gt;\n    &lt;transport clientCredentialType=\"Basic\" /&gt;\n&lt;/security&gt;\n</code></pre>\n\n<p>Basically when i try to access MeterReadingService.svc file I get an IIS error saying it cannot find the resource \\Account\\Login. \nIt seems I am being redirected to a login page. Forms authentication is not enabled on IIS</p>\n\n<p>Details of Error:</p>\n\n<p>HTTP Error 404.0 - Not Found\nThe resource you are looking for has been removed, had its name changed, or is temporarily unavailable. </p>\n\n<p>Detailed Error Information\nModule IIS Web Core \nNotification MapRequestHandler \nHandler StaticFile \nError Code 0x80070002 \nRequested URL \n<a href=\"https://localhost:9011/FrontEndWS/Account/Login?ReturnUrl=%2fFrontEndWS%2fMeterReadingService.svc\" rel=\"nofollow\">https://localhost:9011/FrontEndWS/Account/Login?ReturnUrl=%2fFrontEndWS%2fMeterReadingService.svc</a> </p>\n\n<p>Physical Path D:\\WebApplications\\MeterReaderPortal\\FrontEndWS\\Account\\Login \nLogon Method Basic \nLogon User Administrator </p>\n\n<p>Can you indicate any pointers why this is happening or how can i log the cause of this error?  </p>\n"},{"tags":["c#","wcf","serialization","svcutil.exe"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13156924,"title":"Data contract serialization for object array","body":"<p>I have following scenario and I'm unable to find a solution:</p>\n\n<p>I have multiple data contract proxys that are generated through <code>svcutil.exe</code> tool. I'm trying to serialize instance of <code>object[]</code> containing data contract proxy instances. Tried following:</p>\n\n<pre><code>public static string Serialize&lt;T&gt;(T obj)\n{\n   StringBuilder sb = new StringBuilder();\n   var known = new List&lt;Type&gt;(){typeof(myDataContracClass), typeof(object[])};\n   DataContractSerializer ser = new DataContractSerializer(typeof(T), known );\n   ser.WriteObject(XmlWriter.Create(sb), obj);\n   return sb.ToString();\n}\n</code></pre>\n\n<p>And then using it by:</p>\n\n<pre><code>object[] arrayToSerialize = new object[] { someGuid, myDatacontractProxyInstance};\nvar serialized = Serialize(arrayToSerialize);\n</code></pre>\n\n<p>EDIT: (To futher describe my setup)</p>\n\n<p>I have placed following data contract attributes:</p>\n\n<pre><code>[DataContract(Namespace = \"http://mynamespace-uri\")]\n</code></pre>\n\n<p>in the svcutil.exe's proxy generation I have declared namespace <code>/n:*,My.Custom.Namespace</code>, which causes generated proxies to have different namespace than the data contract class.</p>\n\n<p>Offtopic: Why microsoft ended up with so difficult serialization components?</p>\n"},{"tags":["wcf","iis7","was"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2331,"score":3,"question_id":4872352,"title":"Very strange behaviour: fixing the \"Unrecognized error 109 (0x6d)\" by modify config randomly","body":"<p>I encountered some very strange behaviour that I can't explain or fix.</p>\n\n<p>I have a wcf services hosted in IIS using WAS. When I try to access this service using net.tcp binding I get the following error \"There was an error reading from the pipe: Unrecognized error 109 (0x6d).\" When using basicHttp I do not encounter the problem.</p>\n\n<p>The strange thing is that I can \"fix\" the problem by randomly changing the web.config and saving it. The problem just vanishes until I do an IISReset or an Application Pool Recycle. It is than broken again until I change (or just save) the web.config again...</p>\n\n<p>I have been searching for a solution for days now and getting quite desperate...</p>\n\n<p>I have enabled tracing but that just gives the unrecognize error. \nRebooting doesn't help. \nI have increased the thresholds in WCF but that didn't change anything. \nThe contract is really really simple with no complex types, so no serialization problems\nThe return message size is a string of only 12 characters</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":6898389,"title":"How can a I publish data to a WCF duplex service, from non-Silverlight client","body":"<p>I have a Silverlight app, that uses a WCF duplex service extensively (therefore I don't want to change from duplex on that side of things).</p>\n\n<p>I wish to stream data from a Windows app, via the WCF duplex service to any connected Silverlight client.  However I believe that only Silverlight clients have an API to call duplex WCF services (based on PollingDuplexBindingElement).</p>\n\n<p>Therefore, I thought perhaps that I could have a non-duplex WCF service on the same website,to which the Windows client pushes data, and somehow trigger the duplex service to forward on the messages.  But to start with, the non-duplex service is effectively a windows app as well and gets the same errors if it tries to call the duplex service.</p>\n\n<p>Finally, I have concluded I will have to use a shared queue / bus between the services and would like recommendations as to a good approach.  I am looking for the best performing (low latency) solution.</p>\n"},{"tags":["wcf","rest","configurable","responseformat"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13157039,"title":"Creating configurable ResponseFormat and RequestFormat for WebGet or WebInvoke","body":"<p>I have a requirement in which my ResponseFormat and RequestFormat should be configurable based on the value stored in the app.config file.</p>\n\n<p>For example</p>\n\n<pre><code>[OperationContract] \n[WebGet(ResponseFormat=WebMessageFormat.Json, RequestFormat=WebMessageFormat.Json)] \nstring GetData(int value);\n</code></pre>\n\n<p>And this value of ResponseFormat should come from app.config as mentioned below</p>\n\n<pre><code>&lt;add key=\"MessageFormat\" value=\"JSON\"/&gt;\n</code></pre>\n\n<p>How to achieve this?</p>\n\n<p>Please suggest</p>\n"},{"tags":["wcf","portforwarding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13155484,"title":"WCF + Port forwarding within corporate network","body":"<p>I have written a WCF Service... which sits within a corporate network, now I wish to connect my client app via internet.</p>\n\n<p>when I approached the network people (at corporate level) they are not convinced to do port fowarding. </p>\n\n<p>How do I approach this scenario. I have some files within client network which have to be brought into corporate network for further processing..  So i have file transfer using WCF </p>\n\n<p>how do I transfer files apart from WCF without help from these guys.. I do not want to manually ftp.. i want to automate stuffs..</p>\n\n<p>Is it really a security threat.. can someone help me with a way out..</p>\n\n<p>thanks</p>\n"},{"tags":[".net","windows","wcf","web-services",".net-micro-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":56,"score":3,"question_id":12895952,"title":"Can I use DPWS on desktop windows","body":"<p>I am working on a project that involes both PC and embedded device. The PC will running windows or linux + mono runtime. The embedded device will be using .NET MF.</p>\n\n<p>It is kinda industral control system, I'm considering using DPWS for the communication.</p>\n\n<p>The ability to discover devices and hosted service is important for me. And eventing is also required. And I need to host services on both PC and embedded device, and consume services on both platform as well. The whole project need to be implemented using .NET of .NETMF.</p>\n\n<p>Is that possible? I really can not find anything about using DPWS on PC.</p>\n\n<p>If not possible do I have something else? upnp?</p>\n"},{"tags":["sql-server","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13155014,"title":"WCF: The provider did not return a ProviderManifestToken string","body":"<p>I just got this error and I thought I'd share it so that someone else doesn't spend an hour trying to figure out what's gone wrong.  I have SQL Server 2008 Express and a WCF service that was working fine.  All of a sudden it stopped working.  This was the error message</p>\n\n<blockquote>\n  <p>The server encountered an error processing the request. The exception\n  message is 'The provider did not return a ProviderManifestToken\n  string.'. See server logs for more details. The exception stack trace\n  is:</p>\n  \n  <p>at\n  System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection\n  connection) at\n  System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection\n  connection, DbProviderManifest&amp; providerManifest) at\n  System.Data.Entity.DbModelBuilder.Build(DbConnection\n  providerConnection) at\n  System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext\n  internalContext) at\n  System.Data.Entity.Internal.RetryLazy<code>2.GetValue(TInput input) at\n  System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at\n  System.Data.Entity.Internal.InternalContext.Initialize() at\n  System.Data.Entity.Internal.LazyInternalContext.get_ObjectContext() at\n  System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext()\n  at lambda_method(Closure , Object ) at\n  System.Data.Services.Providers.DbContextHelper.GetObjectContext(Object\n  o) at System.Data.Services.Caching.MetadataCache</code>1.TryLookup(Type\n  serviceType, Object dataContextInstance) at\n  System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() at\n  System.Data.Services.DataService<code>1.CreateMetadataAndQueryProviders(IDataServiceMetadataProvider&amp;\n  metadataProviderInstance, IDataServiceQueryProvider&amp;\n  queryProviderInstance, BaseServiceProvider&amp; builtInProvider, Object&amp;\n  dataSourceInstance) at\n  System.Data.Services.DataService</code>1.CreateProvider() at\n  System.Data.Services.DataService<code>1.EnsureProviderAndConfigForRequest()\n  at System.Data.Services.DataService</code>1.HandleRequest() at\n  System.Data.Services.DataService`1.ProcessRequestForMessage(Stream\n  messageBody) at SyncInvokeProcessRequestForMessage(Object , Object[] ,\n  Object[] ) at\n  System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object\n  instance, Object[] inputs, Object[]&amp; outputs) at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp;\n  rpc) at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean\n  isOperationContextSet)</p>\n</blockquote>\n"},{"tags":[".net","wcf","https","windows-services","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13147769,"title":"WCF windows service to use https","body":"<p>I am tasked with making some changes with an existing WCF service (I don't have any pervious experience working with WCF). This service runs as a windows-service. Client applications connect to it over http, make calls to methods exposed in Datagram.Services. I just have to change it so that client application can only connect using https ( and not http). Is it possible to do it just by making changes in configuration file? If so, any suggestions what need to be changed in config file below for accomplishing it. Also will the clients have to install certificate to connect to this application?</p>\n\n<pre><code>&lt;system.serviceModel&gt;  \n    &lt;services&gt;  \n      &lt;service name=\"Datagram.Services\" behaviorConfiguration=\"Datagram_Behavior\"&gt;  \n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"\" name=\"Datagram.Service\" contract=\"Datagram.IServices\" /&gt;  \n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" name=\"MEX\" contract=\"IMetadataExchange\" /&gt;  \n        &lt;host&gt;  \n          &lt;baseAddresses&gt;  \n            &lt;add baseAddress=\"http://localhost:5000/Datagram\" /&gt;  \n          &lt;/baseAddresses&gt;  \n          &lt;timeouts closeTimeout=\"00:01:00\" openTimeout=\"00:05:00\" /&gt;  \n        &lt;/host&gt;  \n      &lt;/service&gt;  \n    &lt;/services&gt;  \n    &lt;behaviors&gt;  \n      &lt;serviceBehaviors&gt;  \n        &lt;behavior name=\"Datagram_Behavior\"&gt;  \n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;  \n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;  \n        &lt;/behavior&gt;  \n      &lt;/serviceBehaviors&gt;  \n    &lt;/behaviors&gt;  \n  &lt;/system.serviceModel&gt;  \n</code></pre>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":577,"score":3,"question_id":5300498,"title":"Can I invoke a webservice based on URL and method name?","body":"<p>I have a webservice <a href=\"http://localhost:51624/Service1.asmx\" rel=\"nofollow\">http://localhost:51624/Service1.asmx</a> which has a method </p>\n\n<pre><code>public object HelloWorld(object)\n</code></pre>\n\n<p>My requirement is simple or may be complex.</p>\n\n<ol>\n<li>Don't add service reference</li>\n<li>Don't use wsdl to generate proxy.</li>\n</ol>\n\n<p>I want to call something like </p>\n\n<pre><code>WebService Ws = new WebService();\nWs.url = \"http://localhost:51624/Service1.asmx\";\nWs.MehtodName =  \"HelloWorld\";//Need to pass object type as parameter somehow.\n\nobject result = Ws.Invoke();\n</code></pre>\n\n<p>Thanks in Advance,\nBhaskar</p>\n"},{"tags":["wcf","iis7","basic-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13154622,"title":"Basic authentication of http request to a WCF hosted in IIS7","body":"<p>I want the client (which is a asp.net site) calls a wcf. Both are hosted in IIS7 in my laptop. For WCF i have enabled Basic authenticatin in IIS7 and disbaled all other things. For the client i have enabled basic authentication and disabled all other options in authentication.</p>\n\n<p>The problem is that with these configs below the client is not getting any data back from the wcf.</p>\n\n<p>If i in the browser navigate to the service by providing the url to the service then i have to enter username/passsword in the form that pops up.</p>\n\n<p>What i wan to do is to secure my wcf by username and password so that any one who wants to call my wcf have to provide username/pass and my wcf code check wether that exist (for instance in AD) and authenticates accordingly.</p>\n\n<p>my Client(simple ASP.net web site calling a WCF) web.config:</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;appSettings&gt;\n&lt;add key=\"userName\" value=\"Administrator\"/&gt;\n&lt;add key=\"password\" value=\"pass\"/&gt;\n&lt;!--&lt;add key=\"url\" value=\"http://localhost:57895/ListData.svc\"/&gt;--&gt;\n&lt;!--http://localhost/WCF/--&gt;    \n&lt;add key=\"url\" value=\"http://localhost:8082/ListData.svc\"/&gt;\n&lt;/appSettings&gt;\n&lt;system.web&gt;\n  &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n&lt;/system.web&gt;\n&lt;system.webServer&gt;\n  &lt;directoryBrowse enabled=\"true\"/&gt;\n&lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>My WCF service web.config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;appSettings&gt;\n&lt;add key=\"Logging\" value=\"true\"/&gt;\n&lt;/appSettings&gt;\n&lt;connectionStrings/&gt;\n&lt;system.web&gt;\n&lt;authentication mode=\"Windows\"&gt;&lt;/authentication&gt;\n&lt;compilation debug=\"true\" /&gt;\n&lt;pages controlRenderingCompatibilityVersion=\"3.5\" clientIDMode=\"AutoID\"/&gt;\n&lt;/system.web&gt;\n&lt;system.serviceModel&gt;\n&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"httpBinding\"&gt;\n      &lt;security mode=\"TransportCredentialOnly\"&gt;\n        &lt;transport clientCredentialType=\"Basic\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n  &lt;!--&lt;webHttpBinding&gt;\n    &lt;binding name=\"webHttpTransportSecurity\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Basic\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;--&gt;\n&lt;/bindings&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"SecureRESTSvcTestBehavior\" name=\"Hdir.ListData\"&gt;\n    &lt;!--&lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"http://localhost:57895/ListData/\"/&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;--&gt;\n    &lt;!--webHttpBinding allows exposing service methods in a RESTful manner--&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"httpBinding\"  behaviorConfiguration=\"webHttpBehavior\" contract=\"Hdir.IListData\"/&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;!--&lt;behavior name=\" \"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n    &lt;/behavior&gt;--&gt;\n    &lt;behavior name=\"SecureRESTSvcTestBehavior\"&gt;\n      &lt;!-- To avoid disclosing metadata information, set the value below to \n           false and remove the metadata endpoint above before deployment --&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n      &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  \n           Set to false before deployment to avoid disclosing exception information --&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n      &lt;serviceAuthorization serviceAuthorizationManagerType=\"Hdir.CustomAuthorizationManager, Hdir\"/&gt;\n      &lt;!--&lt;serviceCredentials&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"Hdir.Hp.Data.CustomUserNameValidator, Hdir.Hp.Data\" /&gt;\n      &lt;/serviceCredentials&gt;--&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n  &lt;endpointBehaviors&gt;\n    &lt;behavior name=\"webHttpBehavior\"&gt;\n      &lt;!--&lt;webHttp/&gt;--&gt;\n    &lt;/behavior&gt;\n  &lt;/endpointBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n&lt;system.webServer&gt;\n&lt;directoryBrowse enabled=\"true\"/&gt;\n&lt;httpProtocol&gt;\n  &lt;customHeaders&gt;\n    &lt;add name=\"Access-Control-Allow-Origin\" value=\"*\"/&gt;\n    &lt;add name=\"Access-Control-Allow-Headers\" value=\"x-requested-with\"/&gt;\n    &lt;add name=\"Access-Control-Request-Method\" value=\"GET\"/&gt;\n  &lt;/customHeaders&gt;\n&lt;/httpProtocol&gt;\n&lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf","caching",".net-4.0"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12922407,"title":".Net 4.0 MemoryCache Clearing","body":"<p>I am using a .Net 4.0 MemoryCache in my WCF service.\nI originally was using the Default Cache as below:</p>\n\n<p>var cache = MemoryCache.Default;</p>\n\n<p>Then doing the usual pattern as trying to find something in the Cache, getting, then \nsetting into the cache if did not find (code snippet / pseudo code  as below):</p>\n\n<pre><code>var geoCoordinate = cache.Get(cacheKey) as GeoCoordinate;\nif (geoCoordinate == null)\n{\n    geoCoordinate = get it from somewhere;\n    cache.Set(cacheKey, geoCoordinate, DateTimeOffset.Now.AddDays(7));\n}\n</code></pre>\n\n<p>I was finding that my entries were disappearing after approx. 2 minutes. Even if my code placed the missing entries back into the cache, subsequent cache Gets would return null.\nMy WCF Service is being hosted by IIS 7.5. If I recycled the App Pool, everything would work normally for 2 minutes, but then the pattern as described above would repeat.</p>\n\n<p>After doing some researching I then did the below to replace: \n    var cache = MemoryCache.Default;</p>\n\n<p>// WITH NEW CODE TO CREATE CACHE AS BELOW:</p>\n\n<pre><code> var config = new NameValueCollection();\n //Hack:  Set Polling interval to 10 days, so will no clear cache.\n config.Add(\"pollingInterval\", \"10:00:00:00\");\n config.Add(\"physicalMemoryLimitPercentage\", \"90\");\n config.Add(\"cacheMemoryLimitMegabytes\", \"2000\");\n\n //instantiate cache\n var cache = new MemoryCache(\"GeneralCache\", config);\n</code></pre>\n\n<p>It seems that no matter what I place into physicalMemoryLimitPercentage, or cacheMemoryLimitMegabytes does not seem to help. But placing the pollingInterval to a large datespan does. </p>\n\n<p>ie: If I set as below:\n    config.Add(\"pollingInterval\", \"00:00:15:00\");\nThen everything works fine for 15 minutes.</p>\n\n<p>Note: If my WCF service is hosted by IISExpress on my dev environment, I cannot reproduce.\nThis also seems to happen when my WCF service is hosted by IIS 7.5.\nMy app pool on IIS 7.5 is NOT recycling.</p>\n\n<p>Has anybody experienced something like this?\nI have seen the below:\n<a href=\"http://stackoverflow.com/questions/6895956/memorycache-strangeness\">MemoryCache Strangeness</a></p>\n\n<p>Thanks,</p>\n\n<p>Matt</p>\n"},{"tags":["wcf","json","cross-domain"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2820,"score":0,"question_id":303271,"title":"Cross Domain JSON Enabled WCF","body":"<p>I have a WCF Service decorated with WebInvoke attributes and WebHttp binding for JSON enabling. The service can be accessed from JavaScript until we try to make it working cross domain. Can you please recommend how to get this to work cross domain?</p>\n\n<p>We've tried to create proxy web handler but it gives \"Bad Request\" everytime WebHttpRequest try to access it.</p>\n\n<p>Thanks </p>\n\n<p>Teera</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":237,"score":4,"question_id":8242605,"title":"Resource not found for the segment 'x'","body":"<p>I'm getting this error: Resource not found for the segment 'GetTest'. </p>\n\n<p>Code is like this:</p>\n\n<pre><code>    [WebGet]\n    public IQueryable&lt;string&gt; GetTest()\n    {\n        var tmp = new List&lt;string&gt;();\n        return tmp.AsQueryable();\n    }\n</code></pre>\n\n<p>Any ideas what is wrong?</p>\n"},{"tags":["wcf","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13153151,"title":"System.ServiceModel.Security.SecurityNegotiationException","body":"<p>We have WCF service and if it's deployed on local host we're able to call service method, which means everything works fine.</p>\n\n<p>But, when we deploy the service to some another server there's an error:</p>\n\n<pre><code>System.ServiceModel.Security.SecurityNegotiationException occurred\n  Message=\"The caller was not authenticated by the service.\"\n  Source=\"mscorlib\"\n  StackTrace:\n    Server stack trace: \n        System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)\n        System.ServiceModel.Security.SspiNegotiationTokenProvider.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Security.WrapperSecurityCommunicationObject.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n        System.ServiceModel.Security.CommunicationObjectSecurityTokenProvider.Open(TimeSpan timeout)\n        System.ServiceModel.Security.SecurityUtils.OpenTokenProviderIfRequired(SecurityTokenProvider tokenProvider, TimeSpan timeout)\n        System.ServiceModel.Security.SymmetricSecurityProtocol.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Security.WrapperSecurityCommunicationObject.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n        System.ServiceModel.Channels.SecurityChannelFactory`1.ClientSecurityChannel`1.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n        System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.DoOperation(SecuritySessionOperation operation, EndpointAddress target, Uri via, SecurityToken currentToken, TimeSpan timeout)\n        System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.GetTokenCore(TimeSpan timeout)\n        CryptoPro.Sharpei.ServiceModel.CPSecuritySessionSecurityTokenProvider.GetTokenCore(TimeSpan timeout)\n        System.IdentityModel.Selectors.SecurityTokenProvider.GetToken(TimeSpan timeout)\n        System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecuritySessionChannel.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n        System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)\n        System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n        System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)\n        System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)\n        System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)\n        System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n        System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)\n        System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n        System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n    Exception rethrown at [0]: \n        System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n        System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n        Parus.BusinessObjects.ExternalServicesProxy.IAsurService.LoadCatalogItems(Decimal rn)\n        Parus.BusinessObjects.ExternalServicesProxy.AsurServiceClient.LoadCatalogItems(Decimal rn)  F:\\!Work\\8561\\src\\P8WebClient\\Sources\\Parus.BusinessObjects\\Service References\\ExternalServicesProxy\\Reference.cs: 154\n        Parus.BusinessObjects.AsurDictionaries.AsurDictionariesLoader.Execute(ExternalAction action, ContentProvider contentProvider, IContextValueHolder contextValueHolder, ActionContext actionContext, OracleConnection connection)  F:\\!Work\\8561\\src\\P8WebClient\\Sources\\Parus.BusinessObjects\\AsurDictionaries\\AsurDictionariesLoader.cs: 19\n  InnerException: System.ServiceModel.FaultException\n       Message=\"      -   .\"\n       Source=\"System.ServiceModel\"\n       Action=\"http://www.w3.org/2005/08/addressing/soap/fault\"\n       StackTrace:\n             System.ServiceModel.Security.SecurityUtils.ThrowIfNegotiationFault(Message message, EndpointAddress target)\n             System.ServiceModel.Security.SspiNegotiationTokenProvider.GetNextOutgoingMessageBody(Message incomingMessage, SspiNegotiationTokenProviderState sspiState)\n       InnerException: \n</code></pre>\n\n<p>I suppose we should change some settings in web.config file, but I'm not sure which one and where it should be on service side (on the server) or on the client side or both?</p>\n"},{"tags":["c#","asp.net","wcf","streaming","wcf-binding"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1974,"score":2,"question_id":6592664,"title":"WCF Streaming issue with ASP.NET","body":"<p>I have a WCF service hosted in a ASP.NET application and am trying to upload a file from another client ASP.NET application using streaming mode.\nI keep getting following error:</p>\n\n<blockquote>\n  <p>The remote server returned an\n  unexpected response: (400) Bad\n  Request.</p>\n</blockquote>\n\n<p>I have browsed the net to get help but to no avail.</p>\n\n<p><strong>Host configuration:</strong></p>\n\n<pre><code>    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"FileTransferServicesBinding\"\n          transferMode=\"Streamed\"\n          messageEncoding=\"Mtom\"\n          sendTimeout=\"01:05:00\"\n          maxReceivedMessageSize=\"10067108864\"&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"FileTransferServiceBehavior\" name=\"WebServiceHost.TransferService\"&gt;\n        &lt;clear /&gt;\n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\"\n          bindingConfiguration=\"FileTransferServicesBinding\" contract=\"WebServiceHost.ITransferService\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\"/&gt;\n            &lt;certificateReference storeName=\"My\" storeLocation=\"LocalMachine\"\n                x509FindType=\"FindBySubjectDistinguishedName\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"&gt;\n        &lt;/endpoint&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:11291/TransferService.svc\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"FileTransferServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p><strong>Contracts code:</strong></p>\n\n<pre><code>[ServiceContract]\npublic interface ITransferService\n{\n    [OperationContract]\n    RemoteFileInfo DownloadFile(DownloadRequest request);\n\n    [OperationContract]\n    void UploadFile(RemoteFileInfo request);\n\n    [OperationContract]\n    string TestMethod();\n}\n\n[MessageContract]\npublic class DownloadRequest\n{\n    [MessageBodyMember]\n    public string FileName;\n}\n\n[MessageContract]\npublic class RemoteFileInfo : IDisposable\n{\n    [MessageHeader(MustUnderstand = true)]\n    public string FileName;\n\n    [MessageHeader(MustUnderstand = true)]\n    public long Length;\n\n    [MessageBodyMember(Order = 1)]\n    public System.IO.Stream FileByteStream;\n\n    public void Dispose()\n    {\n        if (FileByteStream != null)\n        {\n            FileByteStream.Close();\n            FileByteStream = null;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Client configuration:</strong></p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"FileTransferServicesBinding\" sendTimeout=\"01:05:00\"\n        maxReceivedMessageSize=\"10067108864\" messageEncoding=\"Mtom\"\n        transferMode=\"Streamed\" /&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;client&gt;\n  &lt;endpoint address=\"http://localhost:11291/TransferService.svc/\"\n      binding=\"basicHttpBinding\" bindingConfiguration=\"FileTransferServicesBinding\"\n      contract=\"TransferServiceReference.ITransferService\" name=\"FileTransferService\"\n      kind=\"\"&gt;\n    &lt;identity&gt;\n      &lt;dns value=\"localhost\" /&gt;\n      &lt;certificateReference storeName=\"My\" storeLocation=\"LocalMachine\"\n          x509FindType=\"FindBySubjectDistinguishedName\" /&gt;\n    &lt;/identity&gt;\n  &lt;/endpoint&gt;\n&lt;/client&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p>Client code:</p>\n\n<pre><code>ITransferService clientUpload = new TransferServiceClient();\n\nstring datetime = clientUpload.TestMethod();\n\nvar uploadRequestInfo = new RemoteFileInfo();\n\nuploadRequestInfo.FileName = FileUpload1.FileName;\nuploadRequestInfo.Length = FileUpload1.PostedFile.ContentLength;\nuploadRequestInfo.FileByteStream = FileUpload1.PostedFile.InputStream;\nclientUpload.UploadFile(uploadRequestInfo);\n</code></pre>\n\n<p>The call fails for both clientUpload.TestMethod() and clientUpload.UploadFile(uploadRequestInfo). With buffered mode clientUpload.TestMethod() is invoked so the issue is with the configuration in the streaming mode.</p>\n\n<p>I'd be grateful to find any help on this matter. Thanks.</p>\n"},{"tags":["wcf","msmq"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13151531,"title":"WCF Service Listener to MSMQ - Pending Messages","body":"<p>I've created a WCF service that listens to a private MSMQ for jobs.  I've throttled my service so that it will only handle one job at a time (maxConcurrentInstances = 1).  The problem I have is that when two messages are submitted and I inspect the queue through my Computer Management console, it's empty.  I expect there to be one pending message.  When I submit three messages, I'll see one pending message in the MSMQ.  From reading MSDN, it looks like the ServiceHost is holding the next job in memory until the current job is done, but I can't find a way to turn it off so that the it doesn't hold the message in memory.  Does anyone know of a way to make it so that the ServiceHost won't hold the pending message in memory and leave it in the queue?  Thanks!</p>\n\n<pre><code>  &lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service\n          name=\"MyService\"\n          behaviorConfiguration=\"DefaultServiceBehavior\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8000/MyService/\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint \n                  address=\"net.msmq://localhost/private/MyService\"\n                  binding=\"netMsmqBinding\" bindingConfiguration=\"MsmqBindingNoSecurity\"\n                  contract=\"IMyService\" /&gt;\n        &lt;endpoint address=\"mex\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"DefaultServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n          &lt;serviceThrottling \n            maxConcurrentCalls=\"1\"\n            maxConcurrentSessions=\"1\"\n            maxConcurrentInstances=\"1\"\n          /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;bindings&gt;\n      &lt;netMsmqBinding&gt;\n        &lt;binding name=\"MsmqBindingNoSecurity\"\n             useActiveDirectory=\"false\"\n             exactlyOnce=\"false\"&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport\n               msmqAuthenticationMode=\"None\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/netMsmqBinding&gt;\n    &lt;/bindings&gt;\n\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["silverlight","wcf","timeout"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3413,"score":2,"question_id":4133403,"title":"The HTTP request to *.svc has exceeded the allotted timeout. The time allotted to this operation may have been a portion of a longer timeout.","body":"<p>I have been developing a Silverlight application using WCF.</p>\n\n<p>The problem is that sometimes it throws an exception stating:</p>\n\n<p>\"The HTTP request to 'http://localhost:1276/Foo.svc' has exceeded the allotted timeout. The time allotted to this operation may have been a portion of a longer timeout.\"</p>\n\n<p>So how do I increase the timespan? Some have suggested the usage of receive time out as below in web config and in service.client config file</p>\n\n<pre><code> &lt;bindings&gt;\n      &lt;customBinding &gt;\n        &lt;binding  name=\"customBinding0\" receiveTimeout=\"02:00:00\" &gt;\n          &lt;binaryMessageEncoding maxReadPoolSize=\"2147483647\" maxWritePoolSize=\"2147483647\" maxSessionSize=\"2147483647\" /&gt;\n\n\n          &lt;httpTransport maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\" maxBufferSize=\"2147483647\" transferMode=\"Buffered\"/&gt;\n\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;      \n    &lt;/bindings&gt;\n</code></pre>\n\n<p>what would be the maximum value for the receiveTimeout property?</p>\n"},{"tags":["c#","wcf","web-services"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":13150700,"title":"Creating New Webservice with Available methods in DLL","body":"<p>I have a solution file ( i.e DLL file). i want to create webservice/WCF Service which exposes  the methods  of DLL file. so that other team can use webservice instead of DLL reference</p>\n\n<p>simply we cannot Add DLL as a reference to another project because another project is using  in java..\nso i have been provided DLL file and asked me to create one webservice( WCF is also fine) by using  DLL file related methods.</p>\n\n<p>please help me  and my question is how can i expose DLL methods in Newly created webservice?</p>\n\n<p>webservice/wcf any thing should be fine .</p>\n"},{"tags":["wcf","appdomain"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":27,"score":-2,"question_id":13134819,"title":"Could not load file or assembly when loading WCF library in AppDomain","body":"<p>I have a WCF service with a service library. I want to create an instance of class library in a new AppDomain but this throws an exception:</p>\n\n<blockquote>\n  <p>Could not load file or assembly 'ClassLibrary1.dll' or one of its dependencies.</p>\n</blockquote>\n\n<pre><code> //Class library\n public class Class1 : MarshalByRefObject\n {    \n        public string Method1(int i)\n        {\n            return \"int=\" + i;\n        }\n }\n\n//Class WCF Service\npublic class Service1 : IService1\n{\n     public string GetData(int value)\n     {\n          string name = typeof(Class1).Assembly.GetName().FullName;\n          string type_name = typeof(Class1).FullName;\n          var _Dom = AppDomain.CreateDomain(\"SubDomain\", null, info);\n\n          //why is it not working? \n          //exception - not found assembly file\n          var _Factory = _Dom.CreateInstanceAndUnwrap(name, type_name) as Class1;\n\n          //it's worked\n          //var _Factory = AppDomain.CurrentDomain.CreateInstanceAndUnwrap(name, type_name) as Class1;\n\n          return _Factory.Method1(value);\n     }\n}\n\n//Client method to service\nstatic void Main(string[] args)\n{\n    using (Service1Client cc = new Service1Client())\n    {\n        Console.WriteLine(\"Client opened.\");\n        Console.Write(\"Enter integer: \");\n\n        int i = 0;\n        int.TryParse(Console.ReadLine(), out i);\n        try\n        {\n            var r = cc.GetData(i);\n            Console.WriteLine(r);\n        }\n        catch (Exception e)\n        {\n            Console.WriteLine(e.Message);\n        }\n        cc.Close();\n        Console.WriteLine(\"Client closed. Press Enter key to exit...\");\n        Console.ReadLine();\n    }\n}\n</code></pre>\n\n<p><a href=\"https://docs.google.com/open?id=0B1IeQ2R659MVVjdFbXJadGluckk\" rel=\"nofollow\">Link to solution</a></p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":298,"score":0,"question_id":10959298,"title":"WCF net.tcp binding service consume","body":"<p>I have following WCF Client code to consume WCF Service :</p>\n\n<pre><code>static void Main(string[] args)\n        {\n            IService1 vService;\n            NetTcpBinding b = new NetTcpBinding();\n            b.Security.Mode = SecurityMode.Message;\n            b.Security.Message.ClientCredentialType = MessageCredentialType.Windows;\n\n            EndpointAddress vEndPoint = new EndpointAddress(\"net.tcp://115.127.1.226/myservice/\");\n            ChannelFactory&lt;IService1&gt; cf = new ChannelFactory&lt;IService1&gt;(b, vEndPoint);\n\n            vService = cf.CreateChannel();\n            try\n            {\n                Console.WriteLine(\"Result from the system \" + vService.HellowWorld());\n            }\n            catch (Exception ex)\n            {\n                Console.WriteLine(\"Error Occured while connection establish to \" + vEndPoint.Uri.ToString());\n            }\n            Console.ReadKey();\n\n        }\n</code></pre>\n\n<p>When i run it locally it run successfully.\nBut When i try to consume my WCF Service remotely it Occurred a exception any one suggest \nme how can i solve this problem?</p>\n\n<p>My Exception message is :</p>\n\n<pre><code>Could not connect to net.tcp://115.127.1.226/myservice/. The connection attempt lasted for a time span of 00:00:21.0282028. TCP error code 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\n115.127.1.226:808.\n</code></pre>\n"},{"tags":["c#","xml","wcf"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":946,"score":2,"question_id":8822859,"title":"Remove empty xmlns created by serializer","body":"<p>I have an object generated by an \"Add service reference...\" operation and I am manually serializing it with a generic serializer I wrote.</p>\n\n<p>My problem is that the data contract has some internal objects.</p>\n\n<p>The serializer adds an empty namespace atribute to the starting tag of the internal objects. Is there any way to stop this from happening?</p>\n"},{"tags":["asp.net","wcf","serialization","azure-web-roles"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13138834,"title":"How to make WCF service not deserialize message and just send it to the next service?","body":"<p>My system looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/2pgYG.png\" alt=\"enter image description here\"></p>\n\n<p>I need to send messages from <code>Management portal</code> to <code>WCF Service 1</code> to control the web application (clear cache, etc.). </p>\n\n<p>The thing here is that messages have to pass through <code>WCF Service 2</code>. I cannot update <code>WCF Service 2</code> as often as the other two components (<code>Management portal</code> and <code>WCF Service</code>), so I have to make some kind of universal method in <code>WCF Service 2</code> which will just resend the message to the <code>WCF Service 1</code> without taking care about it.</p>\n\n<p>How to make <code>WCF Service 2</code> act just as a proxy between <code>Management portal</code> and <code>WCF Service 1</code>?</p>\n\n<p>(Note: I cannot call service 1 directly because Service 2 takes care about encryption, logging, etc.)</p>\n"},{"tags":["c#","asp.net","wcf","httpresponse"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13148464,"title":"Streaming a file from WCF service","body":"<p>I am trying to figure out how to stream a file (typically a PDF) from a web service that is front ended by a typical web site. The PDFs do not physically exist, but are created on the fly by a report generator (think Crystal, Telerik Reporting, etc.)</p>\n\n<p>I can do this today directly from the web site by doing a <code>Response.Clear()</code> followed by setting the ContentType and adding the appropriate <code>Content-Disposition</code> header finally followed up by a <code>Response.BinaryWrite(...)</code>.</p>\n\n<p>But, a WCF service (IIS hosted in this case), does not have a Response object. I have tried passing in the <code>Response</code> object from my web page as a parameter, but I can't even start the WCF Service because HttpResponse cannot be serialized.</p>\n\n<p>Am I barking up the wrong tree? Is there a better way of looking at this? We wanted it in a common web service because more of our web sites are needing to do this and we don't want to maintain multiple copies of the code to do it.</p>\n"},{"tags":["android","wcf","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13147063,"title":"Can I access iis hosted wcf service in android application trough internet?","body":"<p>I have hosted my wcf service in iis. I want to access that service in android application trough internet. is it possible or not?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13146873,"title":"WCF Chat: how message send from one pc to another pc","body":"<p>i am wcf beginner and i saw many people develop chat apps with wcf. i never develop any chat apps before.my question is when three client connect to wcf service like user A,B &amp; C then how user A can send message particularly to B not C. message send by IP address or any other mechanism like long polling or p2p system. this things is not clear to me that if i ever try to develop any chat apps with wcf then how user A can send message to user B not other.</p>\n\n<p>please do not give any url link for wcf chat because most of the apps are heavily coded. if possible then please tell me the all kind of mechanism people use to send message from one to another specific end. thanks</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13145971,"title":"WCF: How can i trigger a event at client side from wcf service","body":"<p>suppose i have small wcf service which has duplex connection and i want that no method will be callback at my client end rather a event  should fire instead. then how to restructure my code. my code as follows.</p>\n\n<h2>server end</h2>\n\n<pre><code>namespace CommonParts\n{\n[ServiceContract(Namespace = \"rf.services\", \n    CallbackContract = typeof(IDataOutputCallback), \n    SessionMode = SessionMode.Required)]\npublic interface IServerWithCallback\n{\n    [OperationContract(IsOneWay=true)]\n    void StartDataOutput(string msg);\n}\n\n\npublic interface IDataOutputCallback {\n    [OperationContract(IsOneWay = true)]\n    void SendDataPacket(string data);\n}\n}\n\nnamespace RF.WCF.Callback.Server\n{\nclass ServerWCallbackImpl : IServerWithCallback\n{\n    #region IServerWithCallback Members\n\n    public void StartDataOutput(string msg)\n    {\n        //OperationContext.Current.\n        IDataOutputCallback callback = OperationContext.Current.GetCallbackChannel&lt;IDataOutputCallback&gt;();\n        for (int i = 0; i &lt; 10; i++)\n        {\n            Random r = new Random();\n            int interval = r.Next(500,3000);\n            System.Threading.Thread.Sleep(interval);\n            //callback.SendDataPacket(\"Packet \" + i.ToString());\n            callback.SendDataPacket(\"Hello \" + msg);\n        }\n        callback.SendDataPacket(\"Last packet is this one :)\");\n    }\n    #endregion\n}\n}\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        var myBinding = new NetTcpBinding(SecurityMode.None);\n        ServiceHost duplex = new ServiceHost(typeof(ServerWCallbackImpl));\n        duplex.AddServiceEndpoint(typeof(IServerWithCallback),\n            myBinding,\n            \"net.tcp://192.168.1.2:9080/DataService\");\n        duplex.Open();\n        Console.WriteLine(\"Host is running, press &lt;ENTER&gt; to exit.\");\n        Console.ReadLine();\n        duplex.Close();\n    }\n}\n</code></pre>\n\n<h2>client end</h2>\n\n<pre><code>class CallbackImpl : IDataOutputCallback\n</code></pre>\n\n<p>{\n    #region IDataOutputCallback Members</p>\n\n<pre><code>public void SendDataPacket(string data)\n{\n  Console.WriteLine(\"Server sent: {0}\", data);\n}\n\n#endregion\n</code></pre>\n\n<p>}</p>\n\n<pre><code>static void Main(string[] args)\n{\n    var myBinding = new NetTcpBinding(SecurityMode.None);\n  DuplexChannelFactory&lt;IServerWithCallback&gt; cf =\n          new DuplexChannelFactory&lt;IServerWithCallback&gt;(\n              new CallbackImpl(),\n              myBinding,\n              new EndpointAddress(\"net.tcp://192.168.1.2:9080/DataService\")); \n  IServerWithCallback srv = cf.CreateChannel();\n  Console.Write(\"Enter Value... \");\n  srv.StartDataOutput(Console.ReadLine());\n  Console.WriteLine(\"Start\");\n  Console.ReadLine();\n}\n</code></pre>\n\n<p>when this below line will be executed from client side called <strong>srv.StartDataOutput(Console.ReadLine());</strong></p>\n\n<p>then StartDataOutput() function will be called and from this function a callback function will be invoke called <strong>callback.SendDataPacket(\"Hello \" + msg);</strong> then <strong>SendDataPacket()</strong> function will be called at client side.</p>\n\n<p>so my question is how can i trigger a event at client side instead of callback function</p>\n"},{"tags":["wcf","wcf-client"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13145891,"title":"Get input and output parameters and complex types using schema in wsdl","body":"<p>Hello  i am very new to wcf what is the way to get the input parameters and complex types from  wsdl file to invoke a service by dynamically creating an instance of an input type using reflection. we have a dynamic proxy to invoke a service but how to get the types of input parameters to actually call the service from dynamic proxy. </p>\n"},{"tags":[".net","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13145503,"title":"System.ServiceModel, portable class libraries, and code analysis","body":"<p>I've got an interface in a portable class library with code analysis on build enabled.  When I mark it with ServceContract and OperationContract for a WCF service, it starts throwing build errors from code analysis.</p>\n\n<pre><code>Assembly reference cannot be resolved: System.ServiceModel, Version=2.0.5.0, \n Culture=neutral, PublicKeyToken=31bf3856ad364e35, Retargetable=Yes\n</code></pre>\n\n<p>The library is targeting .Net 4.5 and Silverlight 5.</p>\n\n<p>Am I missing something?</p>\n"},{"tags":["c#","wcf","httpwebrequest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13144186,"title":"Forward posted image to WCF Rest Service","body":"<p>I have a webform application written in C# and what I want to do is after the user submits a HTML form with an image, I send that image to a WCF Rest service also written in C#.\nThe problem is when I get the image in the web service this is corrupted.</p>\n\n<p>I guess that the problem is that I don't encode the file properly, but after days of reading on internet I haven't found a clue.</p>\n\n<p><strong>Webform code:</strong></p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n     HttpPostedFile image = Request.Files[\"imagen\"];\n     string serverResponse = Send(\"mywebservice/postimage\", \"POST\", Encoding.UTF8.GetBytes(StreamToString(image.InputStream)));\n}\n</code></pre>\n\n<p><strong>Edit (this way worked)</strong></p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n     HttpPostedFile image = Request.Files[\"imagen\"];\n     MemoryStream ms = new MemoryStream();\n     image.InputStream.CopyTo(ms);\n     byte[] bytes = ms.ToArray();\n     string serverResponse = Send(\"mywebservice/postimage\", \"POST\", bytes);\n}\n\n\npublic int Send(string url, string method, byte[] data)\n{\n    string serverResponse = \"\";\n    HttpWebRequest newRequest = (HttpWebRequest)WebRequest.Create(url);\n\n    newRequest.ContentType = \"image/jpeg\";\n    newRequest.Method = method;\n    newRequest.Timeout = 10000;\n\n\n    if (newRequest.Method == \"POST\" || newRequest.Method == \"PUT\")\n    {\n        Stream reqStream = newRequest.GetRequestStream();\n        reqStream.Write(data, 0, data.Length);\n        reqStream.Close();         \n    }\n\n    WSMessageEnt wsMessageEnt = new WSMessageEnt();\n\n    try\n    {\n        HttpWebResponse webResponse;\n        webResponse = (HttpWebResponse)newRequest.GetResponse();\n        Stream dataStream = webResponse.GetResponseStream();\n        serverResponse = new StreamReader(dataStream).ReadToEnd();\n\n    }\n    catch (WebException we)\n    {\n\n    }\n\n    return serverResponse;\n}\n\npublic static string StreamToString(Stream data)\n{\n    StreamReader reader = new StreamReader(data);\n    string body = reader.ReadToEnd();\n    reader.Close();\n    reader.Dispose();\n\n    return body;\n}\n</code></pre>\n\n<p><strong>Webservice code:</strong></p>\n\n<pre><code>[WebInvoke(UriTemplate = \"upload-user-image\", Method = \"POST\")]\npublic Stream UploadUserImage(Stream streamdata)\n{\n     System.Drawing.Image img = System.Drawing.Image.FromStream(streamImagen, true);\n     // here I get a format error\n}\n</code></pre>\n"},{"tags":["wcf",".net-4.0",".net-4.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13144721,"title":"Regression in WCF tracing between .NET4.0 and .NET4.5","body":"<p>I've got following settings in my app.config:</p>\n\n<pre><code>  &lt;system.diagnostics&gt;\n    &lt;sources&gt;\n      &lt;source name=\"System.ServiceModel\" switchValue=\"Off,ActivityTracing\" propagateActivity=\"true\"&gt;\n        &lt;listeners&gt;\n          &lt;add type=\"System.Diagnostics.DefaultTraceListener\" name=\"Default\"&gt;\n            &lt;filter type=\"\" /&gt;\n          &lt;/add&gt;\n          &lt;add name=\"ServiceModelTraceListener\"&gt;\n            &lt;filter type=\"\" /&gt;\n          &lt;/add&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n      &lt;source name=\"System.ServiceModel.MessageLogging\" switchValue=\"ActivityTracing\"&gt;\n        &lt;listeners&gt;\n          &lt;add type=\"System.Diagnostics.DefaultTraceListener\" name=\"Default\"&gt;\n            &lt;filter type=\"\" /&gt;\n          &lt;/add&gt;\n          &lt;add name=\"ServiceModelMessageLoggingListener\"&gt;\n            &lt;filter type=\"\" /&gt;\n          &lt;/add&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;sharedListeners&gt;\n      &lt;add initializeData=\"c:\\temp\\log.svclog\" type=\"System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" name=\"ServiceModelTraceListener\" traceOutputOptions=\"Timestamp\"&gt;\n        &lt;filter type=\"\" /&gt;\n      &lt;/add&gt;\n      &lt;add initializeData=\"c:\\temp\\log.svlog\" type=\"System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" name=\"ServiceModelMessageLoggingListener\" traceOutputOptions=\"Timestamp\"&gt;\n        &lt;filter type=\"\" /&gt;\n      &lt;/add&gt;\n    &lt;/sharedListeners&gt;\n  &lt;/system.diagnostics&gt;\n</code></pre>\n\n<p>(note the <code>switchValue=\"Off,ActivityTracing\"</code> on 3rd line)</p>\n\n<p>This worked as I expected in .NET3.5, .NET4.0 (no logging was done). However, when I update to .NET4.5, the logs are being filled!</p>\n\n<p>I cannot find reason for this behavior anywhere. Is it bug? Or my wrong assumption and that it worked according to my needs in .NET4.0 is my mistake? </p>\n\n<p>Thanks!</p>\n"},{"tags":["ios","wcf","wcf-security"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13144451,"title":"ios and wcf service roles and authentication","body":"<p>I'm working on a project that is hosted in a sql server database. The main web app is an MVC .net website. The security and authotization works perfectly if it's on the web. But I need to do the same with an iPhone app counterpart. The mobile app will be calling wcf services to access the info and do some data manipulation on the data. My problem is the system uses role based security where there are multiple roles and only some of them can do specific action to a specific type of data. </p>\n\n<p>Eg. A user with a Staff role can modify the details like time and description of an appointment. While a user with a Super Admin role can modify the participants.</p>\n\n<p>Wanted to know how to properly approach this issue if I'm accessing the data through a mobile app. Should I be doing the authentication on login to the app? Or on clicking a button that triggers the action (update, delete, create,etc)? </p>\n\n<p>If the latter, then every service contract on the wcf service will have an authentication method?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13142881,"title":"WCF Performance , Multiple SVC vs multiple services","body":"<p>We have a generic web service which is handling (or trying to process!) around 100 requests per second. We want to rewrite that into a WCF service. While doing this, we want to split the service so that each service handles certain business functionality.</p>\n\n<p>Questions:\n1. I have read about throttling in WCF. if I have multiple svc's in one WCF service, will it change the way the service handles the load? i.e if I set the concurrency value to 100, does it mean that for each svc or a service, the concurrency is set to 100?<br>\n2. Will it be better to have individual services rather than one service with multiple svc's?<br>\n3. If I have individual services and each of them is set to a concurrency of 100, can IIS handle it? I read somewhere about the IIS limit for concurrent requests.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","wcf","rest"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":4910,"score":1,"question_id":10134632,"title":"The remote server returned an error: (405) Method Not Allowed. WCF REST Service","body":"<p>nThis question is already asked by those thing are not the solutions for my issue.</p>\n\n<p>This is my service</p>\n\n<pre><code>[WebInvoke(UriTemplate = \"\", Method = \"POST\")]\npublic SampleItem Create(SampleItem instance)\n{\n    // TODO: Add the new instance of SampleItem to the collection\n    // throw new NotImplementedException();\n    return new SampleItem();\n}\n</code></pre>\n\n<p>I have this code to call the above service</p>\n\n<pre><code>XElement data = new XElement(\"SampleItem\",\n                             new XElement(\"Id\", \"2\"),\n                             new XElement(\"StringValue\", \"sdddsdssd\")\n                           ); \n\nSystem.IO.MemoryStream dataSream1 = new MemoryStream();\ndata.Save(dataSream1);\n\nHttpWebRequest request = (HttpWebRequest)WebRequest.Create(\"http://localhost:2517/Service1/Create\");\nrequest.Method = \"POST\";\nrequest.ContentType = \"application/x-www-form-urlencoded\";\n// You need to know length and it has to be set before you access request stream\nrequest.ContentLength = dataSream1.Length;\n\nusing (Stream requestStream = request.GetRequestStream())\n{\n    dataSream1.CopyTo(requestStream);\n    byte[] bytes = dataSream1.ToArray();\n    requestStream.Write(bytes, 0, Convert.ToInt16(dataSream1.Length));\n    requestStream.Close();\n}\n\nWebResponse response = request.GetResponse();\n</code></pre>\n\n<p>I get an exception at the last line: </p>\n\n<p>The remote server returned an error: (405) Method Not Allowed. Not sure why this is happening i tried changing the host from VS Server to IIS also but no change in result. Let me know if u need more information</p>\n"},{"tags":["c#","wcf","session","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13142175,"title":"WCF Routing Custombinding Session error","body":"<p>I'm currently trying to write a little WCF-Routing application against WSDL. But when I'm trying to access the SVC file I get the following error:</p>\n\n<blockquote>\n  <p>Contract requires Session, but Binding 'BasicHttpBinding' doesn't\n  support it or isn't configured properly to support it.</p>\n</blockquote>\n\n<p>Since I'm using a custombinding for SOAP12 I don't understand this error message. I've already searched here, but the only other relevant thread had just one comment that didn't help me. ( <a href=\"http://stackoverflow.com/questions/9896593/wcf-4-routing-service-and-configuration-error\">WCF 4 Routing Service and Configuration error</a> )</p>\n\n<p>My web.config is the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;configuration&gt;\n    &lt;appSettings/&gt;\n    &lt;connectionStrings/&gt;\n    &lt;system.web&gt;\n        &lt;compilation debug=\"false\" targetFramework=\"4.0\"&gt;\n        &lt;/compilation&gt;\n        &lt;authentication mode=\"Windows\"/&gt;\n        &lt;pages controlRenderingCompatibilityVersion=\"3.5\" clientIDMode=\"AutoID\"/&gt;&lt;/system.web&gt;\n    &lt;system.serviceModel&gt;\n\n        &lt;services&gt;\n            &lt;service name=\"RoutingService\" behaviorConfiguration=\"RoutingServiceBehavior\"&gt;\n                &lt;host&gt;\n                    &lt;baseAddresses&gt;\n                        &lt;add baseAddress=\"http://localhost/FrontendSoap/Routingservice.svc\"/&gt;\n                    &lt;/baseAddresses&gt;\n                &lt;/host&gt;\n                &lt;endpoint name=\"RequestReplyBinding\" binding=\"customBinding\" bindingConfiguration=\"AnfragenBulk\" contract=\"System.ServiceModel.Routing.IRequestReplyRouter\"/&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"RoutingServiceBehavior\"&gt;\n                    &lt;serviceMetadata httpsGetEnabled=\"True\"/&gt;\n                    &lt;routing filterTableName=\"routingFilterTable\"/&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n\n        &lt;client&gt;\n            &lt;endpoint name=\"VerfuegbarkeitAnfragenBulkPort\" address=\"http://localhost/BackendSoap/BackendBulkService.svc\" binding=\"customBinding\" bindingConfiguration=\"AnfragenBulk\" contract=\"VerfuegbarkeitAnfragenBulkService.VerfuegbarkeitAnfragenBulk\"/&gt;\n        &lt;/client&gt;\n        &lt;routing&gt;\n            &lt;filters&gt;\n                &lt;filter name=\"WebIFFilter\" filterType=\"EndpointName\" filterData=\"RequestReplyBinding\"/&gt;\n            &lt;/filters&gt;\n            &lt;filterTables&gt;\n                &lt;filterTable name=\"routingFilterTable\"&gt;\n                    &lt;add filterName=\"WebIFFilter\" endpointName=\"VerfuegbarkeitAnfragenBulkPort\"/&gt;\n                &lt;/filterTable&gt;\n            &lt;/filterTables&gt;\n        &lt;/routing&gt;\n\n        &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"/&gt;\n        &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"AnfragenBulk\"&gt;\n          &lt;textMessageEncoding maxReadPoolSize=\"64\" maxWritePoolSize=\"16\"\n              messageVersion=\"Soap12\" writeEncoding=\"utf-8\"&gt;\n            &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;/textMessageEncoding&gt;\n          &lt;httpTransport manualAddressing=\"false\" maxBufferPoolSize=\"524288\"\n              maxReceivedMessageSize=\"65536\" allowCookies=\"false\" authenticationScheme=\"Anonymous\"\n              bypassProxyOnLocal=\"true\" decompressionEnabled=\"true\" hostNameComparisonMode=\"StrongWildcard\"\n              keepAliveEnabled=\"true\" maxBufferSize=\"65536\" proxyAuthenticationScheme=\"Anonymous\"\n              realm=\"\" transferMode=\"Buffered\" unsafeConnectionNtlmAuthentication=\"false\"\n              useDefaultWebProxy=\"true\" /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n        &lt;/bindings&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And the RoutingService.svc:</p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"System.ServiceModel.Routing.RoutingService, System.ServiceModel.Routing, version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" %&gt;\n</code></pre>\n\n<p>Any help and ideas would be greatly appreciated.</p>\n"},{"tags":["wcf","iis7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13140200,"title":"what are the best practices in hosting more than one wcf servicehosts (.svc files) in IIS 7","body":"<p>I have three type of wcf services developped and for which i have created three .svc files like this:</p>\n\n<p>service1.svc\nservice2.svc\nservice3.svc</p>\n\n<p>in an asp.net website project.</p>\n\n<p>So how to host these services on the IIS 7? </p>\n\n<p>and what are the best practices in hosting more than one services (.svc) files.?</p>\n\n<p>i saw this link:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/2880465/can-i-have-multiple-svc-files-in-one-virtual-directory-under-iis-in-wcf\">Can I have multiple .svc files in one virtual directory under IIS in WCF?</a></p>\n\n<p>which i know already, so is this the only best practise available.? or i am missing something?</p>\n"},{"tags":["wcf","ssl",".net-4.0","wif","adfs2.0"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":11955582,"title":"WCF, SSL, and ADFS2.0 Active Federation problems","body":"<p>I'm having a terrible time with this configuration. I had everything working without SSL but switching it over to SSL has given me some issues and I'm pulling my hair out. Where is my mismatch? These config files are so convoluted with so many things going on in there that I'm not really sure where to start.</p>\n\n<p>The error(s) I'm seeing:</p>\n\n<ol>\n<li>The client gets an exception: System.ServiceModel.Security.SecurityNegotiationException: Secure channel cannot be opened because security negotiation with the remote endpoint has failed. This may be due to absent or incorrectly specified EndpointIdentity in the EndpointAddress used to create the channel. Please verify the EndpointIdentity specified or implied by the EndpointAddress correctly identifies the remote endpoint.  ---> System.ServiceModel.FaultException: An error occurred when verifying security for the message.</li>\n<li>So I turn on logging on the server. The server log then shows: System.ServiceModel.Security.MessageSecurityException: <strong>Security processor was unable to find a security header in the message.</strong> This might be because the message is an unsecured fault or because there is a binding mismatch between the communicating parties.   This can occur if the service is configured for security and the client is not using security.</li>\n</ol>\n\n<p>WIF/WCF Client .config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"https://mydevbox.dev1.mydomain.com/AdfsWcfHelloWorld/SayHelloService.svc\"\n                binding=\"customBinding\"\n                bindingConfiguration=\"WS2007FederationHttpBinding_ISayHelloService\"\n                contract=\"ActiveFederationHelpers.Tests.ISayHelloService\"\n                name=\"WS2007FederationHttpBinding_ISayHelloService\"&gt;\n        &lt;identity&gt;\n          &lt;certificateReference findValue=\"22909537C6356E15C20C93A5F652FB0C6AA8A282\"\n                                storeLocation=\"LocalMachine\"\n                                storeName=\"My\"\n                                x509FindType=\"FindByThumbprint\" /&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"WS2007FederationHttpBinding_ISayHelloService\"&gt;\n          &lt;security defaultAlgorithmSuite=\"Default\"\n                    authenticationMode=\"SecureConversation\"\n                    requireDerivedKeys=\"true\"\n                    securityHeaderLayout=\"Strict\"\n                    includeTimestamp=\"true\"\n                    keyEntropyMode=\"CombinedEntropy\"\n                    messageProtectionOrder=\"SignBeforeEncryptAndEncryptSignature\"\n                    messageSecurityVersion=\"WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10\"\n                    requireSecurityContextCancellation=\"true\"\n                    requireSignatureConfirmation=\"false\"&gt;\n            &lt;localClientSettings cacheCookies=\"true\"\n                                 detectReplays=\"true\"\n                                 replayCacheSize=\"900000\"\n                                 maxClockSkew=\"00:05:00\"\n                                 maxCookieCachingTime=\"Infinite\"\n                                 replayWindow=\"00:05:00\"\n                                 sessionKeyRenewalInterval=\"10:00:00\"\n                                 sessionKeyRolloverInterval=\"00:05:00\"\n                                 reconnectTransportOnFailure=\"true\"\n                                 timestampValidityDuration=\"00:05:00\"\n                                 cookieRenewalThresholdPercentage=\"60\" /&gt;\n            &lt;localServiceSettings detectReplays=\"true\"\n                                  issuedCookieLifetime=\"10:00:00\"\n                                  maxStatefulNegotiations=\"128\"\n                                  replayCacheSize=\"900000\"\n                                  maxClockSkew=\"00:05:00\"\n                                  negotiationTimeout=\"00:01:00\"\n                                  replayWindow=\"00:05:00\"\n                                  inactivityTimeout=\"00:02:00\"\n                                  sessionKeyRenewalInterval=\"15:00:00\"\n                                  sessionKeyRolloverInterval=\"00:05:00\"\n                                  reconnectTransportOnFailure=\"true\"\n                                  maxPendingSessions=\"128\"\n                                  maxCachedCookies=\"1000\"\n                                  timestampValidityDuration=\"00:05:00\" /&gt;\n            &lt;secureConversationBootstrap defaultAlgorithmSuite=\"Default\"\n                                         authenticationMode=\"IssuedTokenForSslNegotiated\"\n                                         requireDerivedKeys=\"true\"\n                                         securityHeaderLayout=\"Strict\"\n                                         includeTimestamp=\"true\"\n                                         keyEntropyMode=\"CombinedEntropy\"\n                                         messageProtectionOrder=\"SignBeforeEncryptAndEncryptSignature\"\n                                         messageSecurityVersion=\"WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10\"\n                                         requireSecurityContextCancellation=\"true\"\n                                         requireSignatureConfirmation=\"true\"&gt;\n              &lt;issuedTokenParameters keySize=\"256\"\n                                     keyType=\"SymmetricKey\"\n                                     tokenType=\"\"&gt;\n                &lt;additionalRequestParameters&gt;\n                  &lt;trust:SecondaryParameters xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;\n                    &lt;trust:KeyType xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://docs.oasis-open.org/ws-sx/ws-trust/200512/SymmetricKey&lt;/trust:KeyType&gt;\n                    &lt;trust:KeySize xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;256&lt;/trust:KeySize&gt;\n                    &lt;trust:Claims Dialect=\"http://schemas.xmlsoap.org/ws/2005/05/identity\"\n                                  xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;\n                      &lt;wsid:ClaimType Uri=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name\"\n                                      Optional=\"true\"\n                                      xmlns:wsid=\"http://schemas.xmlsoap.org/ws/2005/05/identity\" /&gt;\n                      &lt;wsid:ClaimType Uri=\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"\n                                      Optional=\"true\"\n                                      xmlns:wsid=\"http://schemas.xmlsoap.org/ws/2005/05/identity\" /&gt;\n                      &lt;wsid:ClaimType Uri=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier\"\n                                      Optional=\"true\"\n                                      xmlns:wsid=\"http://schemas.xmlsoap.org/ws/2005/05/identity\" /&gt;\n                      &lt;wsid:ClaimType Uri=\"http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname\"\n                                      Optional=\"true\"\n                                      xmlns:wsid=\"http://schemas.xmlsoap.org/ws/2005/05/identity\" /&gt;\n                    &lt;/trust:Claims&gt;\n                    &lt;trust:KeyWrapAlgorithm xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p&lt;/trust:KeyWrapAlgorithm&gt;\n                    &lt;trust:EncryptWith xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/04/xmlenc#aes256-cbc&lt;/trust:EncryptWith&gt;\n                    &lt;trust:SignWith xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2000/09/xmldsig#hmac-sha1&lt;/trust:SignWith&gt;\n                    &lt;trust:CanonicalizationAlgorithm xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/10/xml-exc-c14n#&lt;/trust:CanonicalizationAlgorithm&gt;\n                    &lt;trust:EncryptionAlgorithm xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/04/xmlenc#aes256-cbc&lt;/trust:EncryptionAlgorithm&gt;\n                  &lt;/trust:SecondaryParameters&gt;\n                &lt;/additionalRequestParameters&gt;\n                &lt;issuer address=\"https://dev1dc2.dev1.mydomain.com/adfs/services/trust/13/usernamemixed\"\n                        bindingConfiguration=\"https://dev1dc2.dev1.mydomain.com/adfs/services/trust/13/usernamemixed\"\n                        binding=\"ws2007HttpBinding\" /&gt;\n                &lt;issuerMetadata address=\"https://dev1dc2.dev1.mydomain.com/adfs/services/trust/mex\" /&gt;\n              &lt;/issuedTokenParameters&gt;\n              &lt;localClientSettings cacheCookies=\"true\"\n                                   detectReplays=\"true\"\n                                   replayCacheSize=\"900000\"\n                                   maxClockSkew=\"00:05:00\"\n                                   maxCookieCachingTime=\"Infinite\"\n                                   replayWindow=\"00:05:00\"\n                                   sessionKeyRenewalInterval=\"10:00:00\"\n                                   sessionKeyRolloverInterval=\"00:05:00\"\n                                   reconnectTransportOnFailure=\"true\"\n                                   timestampValidityDuration=\"00:05:00\"\n                                   cookieRenewalThresholdPercentage=\"60\" /&gt;\n              &lt;localServiceSettings detectReplays=\"true\"\n                                    issuedCookieLifetime=\"10:00:00\"\n                                    maxStatefulNegotiations=\"128\"\n                                    replayCacheSize=\"900000\"\n                                    maxClockSkew=\"00:05:00\"\n                                    negotiationTimeout=\"00:01:00\"\n                                    replayWindow=\"00:05:00\"\n                                    inactivityTimeout=\"00:02:00\"\n                                    sessionKeyRenewalInterval=\"15:00:00\"\n                                    sessionKeyRolloverInterval=\"00:05:00\"\n                                    reconnectTransportOnFailure=\"true\"\n                                    maxPendingSessions=\"128\"\n                                    maxCachedCookies=\"1000\"\n                                    timestampValidityDuration=\"00:05:00\" /&gt;\n            &lt;/secureConversationBootstrap&gt;\n          &lt;/security&gt;\n          &lt;textMessageEncoding maxReadPoolSize=\"64\"\n                               maxWritePoolSize=\"16\"\n                               messageVersion=\"Default\"\n                               writeEncoding=\"utf-8\"&gt;\n            &lt;readerQuotas maxDepth=\"32\"\n                          maxStringContentLength=\"8192\"\n                          maxArrayLength=\"16384\"\n                          maxBytesPerRead=\"4096\"\n                          maxNameTableCharCount=\"16384\" /&gt;\n          &lt;/textMessageEncoding&gt;\n          &lt;httpsTransport manualAddressing=\"false\"\n                          maxBufferPoolSize=\"524288\"\n                          maxReceivedMessageSize=\"65536\"\n                          allowCookies=\"false\"\n                          authenticationScheme=\"Negotiate\"\n                          bypassProxyOnLocal=\"false\"\n                          decompressionEnabled=\"true\"\n                          hostNameComparisonMode=\"StrongWildcard\"\n                          keepAliveEnabled=\"true\"\n                          maxBufferSize=\"65536\"\n                          proxyAuthenticationScheme=\"Anonymous\"\n                          realm=\"\"\n                          transferMode=\"Buffered\"\n                          unsafeConnectionNtlmAuthentication=\"false\"\n                          useDefaultWebProxy=\"true\" /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n      &lt;ws2007HttpBinding&gt;\n        &lt;binding name=\"https://dev1dc2.dev1.mydomain.com/adfs/services/trust/13/usernamemixed\"\n                 closeTimeout=\"00:01:00\"\n                 openTimeout=\"00:01:00\"\n                 receiveTimeout=\"00:10:00\"\n                 sendTimeout=\"00:01:00\"\n                 bypassProxyOnLocal=\"false\"\n                 transactionFlow=\"false\"\n                 hostNameComparisonMode=\"StrongWildcard\"\n                 maxBufferPoolSize=\"524288\"\n                 maxReceivedMessageSize=\"65536\"\n                 messageEncoding=\"Text\"\n                 textEncoding=\"utf-8\"\n                 useDefaultWebProxy=\"true\"\n                 allowCookies=\"false\"&gt;\n          &lt;readerQuotas maxDepth=\"32\"\n                        maxStringContentLength=\"8192\"\n                        maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\"\n                        maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\"\n                           inactivityTimeout=\"00:10:00\"\n                           enabled=\"false\" /&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"None\"\n                       proxyCredentialType=\"None\"\n                       realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\"\n                     negotiateServiceCredential=\"true\"\n                     algorithmSuite=\"Default\"\n                     establishSecurityContext=\"false\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/ws2007HttpBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.diagnostics&gt;\n    &lt;sources&gt;\n      &lt;source name=\"System.ServiceModel\"\n              switchValue=\"Information, ActivityTracing\"\n              propagateActivity=\"true\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n      &lt;source name=\"System.ServiceModel.MessageLogging\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n      &lt;source name=\"myUserTraceSource\"\n              switchValue=\"Information, ActivityTracing\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;sharedListeners&gt;\n      &lt;add name=\"xml\"\n           type=\"System.Diagnostics.XmlWriterTraceListener\"\n           initializeData=\"ClientErrors.svclog\" /&gt;\n    &lt;/sharedListeners&gt;\n  &lt;/system.diagnostics&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>WCF Service .config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;configuration&gt;\n    &lt;configSections&gt;\n        &lt;section name=\"microsoft.identityModel\"\n                 type=\"Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n    &lt;/configSections&gt;\n    &lt;location path=\"FederationMetadata\"&gt;\n        &lt;system.web&gt;\n            &lt;authorization&gt;\n                &lt;allow users=\"*\" /&gt;\n            &lt;/authorization&gt;\n        &lt;/system.web&gt;\n    &lt;/location&gt;\n    &lt;system.web&gt;\n        &lt;compilation debug=\"true\"\n                     targetFramework=\"4.0\"&gt;\n            &lt;assemblies&gt;\n                &lt;add assembly=\"Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n            &lt;/assemblies&gt;\n        &lt;/compilation&gt;\n    &lt;/system.web&gt;\n    &lt;system.serviceModel&gt;\n        &lt;services&gt;\n            &lt;service name=\"AdfsWcfHelloWorldServices.SayHelloService\"&gt;\n                &lt;endpoint address=\"https://mydevbox.dev1.mydomain.com/AdfsWcfHelloWorld/SayHelloService.svc\"\n                          binding=\"ws2007FederationHttpBinding\"\n                          contract=\"AdfsWcfHelloWorldServices.ISayHelloService\" /&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior&gt;\n                    &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n                    &lt;federatedServiceHostConfiguration /&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"false\" /&gt;\n        &lt;extensions&gt;\n            &lt;behaviorExtensions&gt;\n                &lt;add name=\"federatedServiceHostConfiguration\"\n                     type=\"Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n            &lt;/behaviorExtensions&gt;\n        &lt;/extensions&gt;\n        &lt;protocolMapping&gt;\n            &lt;add scheme=\"http\"\n                 binding=\"ws2007FederationHttpBinding\" /&gt;\n        &lt;/protocolMapping&gt;\n        &lt;bindings&gt;\n            &lt;ws2007FederationHttpBinding&gt;\n                &lt;binding&gt;\n                    &lt;security mode=\"TransportWithMessageCredential\"&gt;\n                        &lt;message establishSecurityContext=\"false\"&gt;\n                            &lt;issuerMetadata address=\"https://dev1dc2.dev1.mydomain.com/adfs/services/trust/mex\" /&gt;\n                            &lt;claimTypeRequirements&gt;\n                                &lt;add claimType=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name\"\n                                     isOptional=\"true\" /&gt;\n                                &lt;add claimType=\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"\n                                     isOptional=\"true\" /&gt;\n                                &lt;add claimType=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier\"\n                                     isOptional=\"true\" /&gt;\n                                &lt;add claimType=\"http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname\"\n                                     isOptional=\"true\" /&gt;\n                            &lt;/claimTypeRequirements&gt;\n                        &lt;/message&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n            &lt;/ws2007FederationHttpBinding&gt;\n        &lt;/bindings&gt;\n    &lt;/system.serviceModel&gt;\n    &lt;system.webServer&gt;\n        &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n    &lt;/system.webServer&gt;\n    &lt;microsoft.identityModel&gt;\n        &lt;service&gt;\n            &lt;audienceUris&gt;\n                &lt;add value=\"https://mydevbox.dev1.mydomain.com/AdfsWcfHelloWorld\" /&gt;\n            &lt;/audienceUris&gt;\n            &lt;serviceCertificate&gt;\n                &lt;certificateReference findValue=\"22909537C6356E15C20C93A5F652FB0C6AA8A282\"\n                                      storeLocation=\"LocalMachine\"\n                                      storeName=\"My\"\n                                      x509FindType=\"FindByThumbprint\" /&gt;\n            &lt;/serviceCertificate&gt;\n            &lt;issuerNameRegistry type=\"Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"&gt;\n                &lt;trustedIssuers&gt;\n                    &lt;add thumbprint=\"E9C32071573CB4D52005EA2E7825A310D6C26B73\"\n                         name=\"http://DEV1DC2.Dev1.mydomain.com/adfs/services/trust\" /&gt;\n                &lt;/trustedIssuers&gt;\n            &lt;/issuerNameRegistry&gt;\n        &lt;/service&gt;\n    &lt;/microsoft.identityModel&gt;\n    &lt;appSettings&gt;\n        &lt;add key=\"FederationMetadataLocation\"\n             value=\"https://dev1dc2.dev1.mydomain.com/FederationMetadata/2007-06/FederationMetadata.xml\" /&gt;\n    &lt;/appSettings&gt;\n  &lt;system.diagnostics&gt;\n    &lt;sources&gt;\n      &lt;source name=\"System.ServiceModel\"\n              switchValue=\"Information, ActivityTracing\"\n              propagateActivity=\"true\" &gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\"/&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n      &lt;source name=\"System.ServiceModel.MessageLogging\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\"/&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n      &lt;source name=\"myUserTraceSource\"\n              switchValue=\"Information, ActivityTracing\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\"/&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;sharedListeners&gt;\n      &lt;add name=\"xml\"\n           type=\"System.Diagnostics.XmlWriterTraceListener\"\n           initializeData=\"ServerErrors.svclog\" /&gt;\n    &lt;/sharedListeners&gt;\n  &lt;/system.diagnostics&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>More details:</strong></p>\n\n<ul>\n<li>The service and client are both running on the same box at the\nmoment</li>\n<li>All certs are created by a CA in our domain and fully trusted\nby all (1) machines</li>\n<li>I'm successfully getting my security token from ADFS</li>\n<li>I use <code>ChannelFactory&lt;T&gt;(binding).CreateChannelWithIssuedToken(myToken)</code> (pseudocode) to connect to the service</li>\n<li>The error happens upon calling the first method on the service</li>\n<li>Like I said, this all worked without HTTPS and the service was able to pull validated claims from the token just fine from <code>(Thread.CurrentPrincipal.Identity as IClaimsIdentity).Claims</code> but I can't get a proper connection configured on both sides with SSL for some asinine reason</li>\n</ul>\n\n<p>I would REALLY appreciate some help. :-)</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13139972,"title":"Adding Endpoint in WCF","body":"<p>I have a service, which works on URL like this <code>http://localhost:1253/NotificationProducer</code></p>\n\n<p>Then I try to add an endpoint on server-side, which will listen to URL like this: <code>http://localhost:1253/NotificationProducer/1</code></p>\n\n<p>BasemanagerRefernce is <code>http://localhost:1253/NotificationProducer</code></p>\n\n<pre><code>ServiceHost svcHost = new ServiceHost(typeof(NotificationProducer), new Uri( BaseResources.baseManagerReference ));\n\nsvcHost.AddServiceEndpoint(typeof(INotificationProducer),\n                           new WSHttpBinding(),\n                           new Uri(BaseResources.baseManagerReference),\n                           new Uri(BaseResources.baseManagerReference+\"/\"+id));\n\nList&lt;string&gt; endpointslist = new List&lt;string&gt;();\n\nforeach (var endpoint in svcHost.Description.Endpoints)\n{\n    .Add(endpoint.Address.Uri.AbsoluteUri);\n}\n</code></pre>\n\n<p>But after all this manipulations my endpointslist contains only <code>http://localhost:1253/NotificationProducer</code>\nand when i programmatically change endpoint adress in my client to <code>http://localhost:1253/NotificationProducer/1</code> i catch an error which tells me,that there is no listener on this address. </p>\n\n<p>So how can I add an endpoint or listener correctly? Sorry, but i'am kinda newbie at WCF and didn't work with such features and hadn't found an answer on msdn.</p>\n"},{"tags":[".net","sql-server","wcf","active-directory","identity-delegation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13108419,"title":"WCF Delegation, Service couldn't access SQL Server","body":"<p>I have the following infrastructure:</p>\n\n<ul>\n<li><p>Computer #1, Microsoft SQL Server 2008, started under System account. There is login <code>Master\\MyLogin</code> (with Windows Authintification), server roles = <code>sysadm</code>, database role = <code>db_owner</code>.</p></li>\n<li><p>Computer # 2, WCF service on IIS 7.0. Application and site run under account <code>Master\\IISLogin</code> (IISLogin@myDomain.ru)</p></li>\n</ul>\n\n<p>Configuration:</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;netTcpBinding&gt;\n        &lt;binding name=\"CommonWindowsBinding\" maxReceivedMessageSize=\"40000000\"&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/netTcpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"CommonBehavior\" name=\"MyNameSpace.AdminService\"&gt;\n        &lt;endpoint address=\"Windows\" binding=\"netTcpBinding\" bindingConfiguration=\"CommonWindowsBinding\" name=\"IAdminServiceWindows\" contract=\"MyNameSpace.IAdminService\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"WCFServer\" /&gt;\n            &lt;userPrincipalName value=\"IISLogin@myDomain.ru\"/&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"CommonBehavior\"&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"10000000\" /&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" policyVersion=\"Policy15\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;serviceCredentials&gt;\n        &lt;clientCertificate&gt;\n          &lt;authentication certificateValidationMode=\"PeerTrust\" /&gt;\n        &lt;/clientCertificate&gt;\n        &lt;serviceCertificate findValue=\"WCFServer\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\" /&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"MyClassFullName, MyDllFullName\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Service has method</p>\n\n<pre><code>[OperationBehavior(Impersonation = ImpersonationOption.Allowed)]\npublic bool HasRole(string roleName)\n{\n     //work with database\n}\n</code></pre>\n\n<p>It uses EF 5.0 database first. Connection string</p>\n\n<pre><code>\"Data Source=Computer1; Initial Catalog=myDB; Integrated Security=True; Multipleactiveresultsets=True; Persist Security Info=True;\"\n</code></pre>\n\n<ul>\n<li><p>Computer # 3, the client. It has the following config</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;system.serviceModel&gt;\n  &lt;bindings&gt;\n    &lt;netTcpBinding&gt;\n        &lt;binding name=\"CommonWindowsBinding\" closeTimeout=\"00:01:00\"\n            openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n            transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\"\n            hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"10\"\n            maxBufferPoolSize=\"524288\" maxBufferSize=\"65536\" maxConnections=\"10\"\n            maxReceivedMessageSize=\"40000000\"&gt;\n            &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n            &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                enabled=\"false\" /&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n     &lt;/netTcpBinding&gt;\n&lt;/bindings&gt;\n&lt;client&gt;\n    &lt;endpoint  name=\"Megatec.MasterTourService.Contracts.IAdminServiceWindows\"\n        address=\"net.tcp://Computer2:5012/IISTest/AdminService.svc/Windows\"\n        behaviorConfiguration=\"CustomBehavior\"\n        binding=\"netTcpBinding\"\n        bindingConfiguration=\"CommonWindowsBinding\"\n        contract=\"Megatec.MasterTourService.Contracts.IAdminService\"&gt;\n       &lt;identity&gt;\n            &lt;dns value=\"WCFServer\" /&gt;\n       &lt;/identity&gt;\n    &lt;/endpoint&gt;        \n&lt;/client&gt;\n&lt;behaviors&gt;         \n  &lt;behavior name=\"CustomBehavior\"&gt;\n    &lt;dataContractSerializer maxItemsInObjectGraph=\"10000000\"/&gt;\n    &lt;clientCredentials&gt;\n      &lt;clientCertificate findValue=\"WCFClient\" x509FindType=\"FindBySubjectName\"\n          storeLocation=\"LocalMachine\" storeName=\"My\" /&gt;\n           &lt;serviceCertificate&gt;\n               &lt;defaultCertificate findValue=\"WCFServer\" storeLocation=\"LocalMachine\"\n                                   x509FindType=\"FindBySubjectName\" /&gt;\n               &lt;authentication certificateValidationMode=\"PeerTrust\" \n                               revocationMode=\"NoCheck\"\n                               trustedStoreLocation=\"LocalMachine\"/&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre></li>\n</ul>\n\n<p>Channel has the following credentials</p>\n\n<pre><code>channelFactory.Credentials.Windows.AllowedImpersonationLevel =\n    System.Security.Principal.TokenImpersonationLevel.Delegation;\nchannelFactory.Credentials.Windows.ClientCredential =\n    System.Net.CredentialCache.DefaultNetworkCredentials;\n</code></pre>\n\n<p>It falls with db error </p>\n\n<blockquote>\n  <p><em>Login failed for user 'NT AUTHORITY\\Anonymous'</em></p>\n</blockquote>\n\n<p>So, there is some problem with WCF delegation. When I tried to use simple <code>username/password</code> authentication, it worked fine - so, certificates and so on are fine. </p>\n\n<p>I did Step 4 on <a href=\"http://msdn.microsoft.com/en-us/library/ff650896.aspx\" rel=\"nofollow\">this instruction</a>, but it doesn't work. </p>\n\n<p>Maybe something is wrong with my code or configs? How can I fix it?</p>\n\n<p><strong>UPDATE</strong>. </p>\n\n<ol>\n<li><p>Tried (no result)</p>\n\n<p>[OperationBehavior(Impersonation = ImpersonationOption.Allowed)] => [OperationBehavior(Impersonation = ImpersonationOption.Required)]</p></li>\n<li><p>Tried  (no result)</p>\n\n<p></p></li>\n<li><p>On the service side </p>\n\n<p>ServiceSecurityContext.Current.WindowsIdentity.ImpersonationLevel = Impersonation (not Delegation!)</p></li>\n<li><p>When I tried to change identity for IIS pool from ApplicationPoolIdentity to IISLogin@myDomain.ru, the client on the computer 3 crashed.</p></li>\n</ol>\n"},{"tags":["wcf","security","iis7","active-directory","net.tcp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13134795,"title":"WCF service with net.tcp binding (hosted on IIS 7) doesn't work under domain user (for app pool)","body":"<p>I have a WCF service with the following configuration</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n&lt;system.web&gt;\n   &lt;compilation debug=\"true\" /&gt;\n&lt;/system.web&gt;\n\n&lt;system.serviceModel&gt;\n&lt;bindings&gt;\n  &lt;netTcpBinding&gt;\n    &lt;binding name=\"CommonWindowsBinding\" maxReceivedMessageSize=\"40000000\"&gt;\n      &lt;security mode=\"TransportWithMessageCredential\" &gt;\n        &lt;transport clientCredentialType=\"None\"/&gt;\n        &lt;message clientCredentialType=\"Windows\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/netTcpBinding&gt;\n&lt;/bindings&gt;\n\n&lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"CommonBehavior\" name=\"Megatec.MasterTourService.AdminService\"&gt;\n    &lt;endpoint address=\"Windows\" binding=\"netTcpBinding\" bindingConfiguration=\"CommonWindowsBinding\" name=\"Megatec.MasterTourService.Contracts.IAdminServiceWindows\" contract=\"Megatec.MasterTourService.Contracts.IAdminService\"&gt;\n      &lt;identity&gt;\n        &lt;dns value=\"WCFServer\" /&gt;\n      &lt;/identity&gt;\n    &lt;/endpoint&gt;\n&lt;/services&gt;\n\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"CommonBehavior\"&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"10000000\" /&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" policyVersion=\"Policy15\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;serviceAuthorization impersonateCallerForAllOperations=\"true\" /&gt;\n      &lt;serviceCredentials&gt;\n\n        &lt;clientCertificate&gt;\n          &lt;authentication certificateValidationMode=\"PeerTrust\" /&gt;\n        &lt;/clientCertificate&gt;\n\n        &lt;serviceCertificate findValue=\"WCFServer\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\" /&gt;\n\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"Megatec.MasterTourService.Security.CustomUserNameValidator, Megatec.MasterTourService.Security\" /&gt;\n        &lt;/serviceCredentials&gt;\n       &lt;/behavior&gt;\n     &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Code</p>\n\n<pre><code>public class AdminService : BaseAuthService, IAdminService\n{\n    [OperationBehavior(Impersonation = ImpersonationOption.Required)]\n    public bool HasRole(string roleName)\n    {\n        //work with database\n    }\n}\n</code></pre>\n\n<p>I host this service on IIS 7, for application pool I set domain user (Master\\MyLogin). I need domain user for delegation (according to <a href=\"http://msdn.microsoft.com/en-us/library/ff650896.aspx\" rel=\"nofollow\">step 4</a>).</p>\n\n<p>It works fine, when I consume service from a local client (the same computer, under Master\\MyLogin or some other domain user). But when I tried to consume service from the other network computer, it failed. Everything works fine with ApplicationPoolIdentity.</p>\n\n<p>Master\\MyLogin is a administrator on the computer with service (but he isn't a domain admin).</p>\n\n<p>Maybe, there is rights, which should be granted to Master\\MyLogin?</p>\n\n<p><strong>Update</strong>. Client exception.</p>\n\n<p>At first, there was SecurityNegotiationException. Next, I've added section </p>\n\n<pre><code>&lt;identity&gt;\n    &lt;userPrincipalName value=\"myLogin@Mydomain\" /&gt;\n&lt;/identity&gt;\n</code></pre>\n\n<p>New exception was MessageSecurityException. </p>\n\n<p><code>The identity check failed for the outgoing message. The expected identity is \"identity(http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn)\" for the 'net.tcp://dev4-10:5012/IISTest/AdminService.svc/Windows' target endpoint.</code></p>\n\n<p>How should I configure <code>&lt;identity&gt;</code> for client and service?</p>\n"},{"tags":["wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":12943299,"title":"The server rejected the session-establishment request: WCF hosted on IIS","body":"<p>We have some WCF services implemented in an IIS application, communicating over net.tcp on the default port (808), using the Microsoft Net.Tcp Port Sharing Service, throwing an error on production servers. When I instantiate a connection to the first of the services, I get back an exception: </p>\n\n<blockquote>\n  <p>The server at <code>&lt;URL&gt;</code> rejected the session-establishment request.  All the other services respond fine.</p>\n</blockquote>\n\n<p>But it runs fine on our test servers.</p>\n\n<p>I initially thought there was something wrong with the particular service that was failing, but I tried rearranging the list of services into a different order, and it SEEMS to always be the first service that I hit that fails. (I say SEEMS because it think once in the early iterations of testing, I saw it happen on the second service that it hit. But I haven't been able to reproduce that.)</p>\n\n<p>I've looked at application startup delays, and that doesn't seem to be the problem, because I can come back and run the test again as soon as it finishes - a delay of only a minute or two - and get the same error. Also, in the lower level environments, there is a start up delay of probably 30 seconds to a minute, but the result still comes back as expected.</p>\n\n<p>I've tried accessing the services over http from INetManager, and I get intermittent failures on all the services - a particular service will return a yellow screen of death on on invocation, then come up with the expected link to the WSDL on the next one seconds later.</p>\n\n<p>I'm completely at a loss to explain this behavior, or how to resolve it.  I've googled the error message, and not found anything helpful.  It may be a configuration issue - the production servers are newly provisioned VM's, and we may not have the config exactly right (whereas all the lower level environments have been running this and other similar apps for some time), but I have not idea what to look for.  I've looked at the properties of the app pool that the app is running on and compared it to the lower level environments without finding any differences.</p>\n\n<p>If somebody can point me in the right direction, you would have my undying gratitude.</p>\n"},{"tags":["wpf","wcf","xbap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13138915,"title":"Problems calling a WCF service from a WPF xbap client app in another host","body":"<p>I am new to WCF, I have developed a WCF service that returns a string with a required value, I publish it in IIS on the same computer and then I created a WPF client app, I tested it in Debug mode and worked fine, I tried publishing the client app in the IIS and tested it in the same machine and everything was ok, It's a full trust app.</p>\n\n<p>The problem is when I try to execute the client app in another machine, the thing is that from the machine I can access the service:</p>\n\n<pre><code>http://ip_address/OASWS.Utilities/Service1.svc\n</code></pre>\n\n<p>and there is no problem, and I can execute the app:</p>\n\n<pre><code>http://address/OASWS.Utilities.BrowserClient/UtilitiesBrowserClient.xbap\n</code></pre>\n\n<p>and the application is executed with no problems, but when the app tries to execute any function from the service I get the following error inmediatly:</p>\n\n<pre><code>Startup URI: http://ip_address/OASWS.Utilities.BrowserClient/UtilitiesBrowserClient.xbap\n\nApplication identity: http://ip_address/OASWS.Utilities.BrowserClient/UtilitiesBrowserClient.xbap#UtilitiesBrowserClient.xbap, Version=1.0.0.5, Culture=neutral, PublicKeyToken=5273a5e76684b5e7, processorArchitecture=msil/UtilitiesBrowserClient.exe, Version=1.0.0.5, Culture=neutral, PublicKeyToken=5273a5e76684b5e7, processorArchitecture=msil, type=win32\n</code></pre>\n\n<p>System.Runtime.Serialization.SerializationException: type 'System.ServiceModel.Channels.ReceivedFault' from assembly 'System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' is not marked as serializable.\n   at System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers(RuntimeType type)\n   at System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context)\n   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo()\n   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter)\n   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter)\n   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo)\n   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck)\n   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck)\n   at System.Runtime.Remoting.Channels.CrossAppDomainSerializer.SerializeObject(Object obj, MemoryStream stm)\n   at System.AppDomain.Serialize(Object o)\n   at System.AppDomain.MarshalObject(Object o)</p>\n\n<p>And I don't have a clue on what  could be happening or where does that error comes from, because the only this the service returns is a simple string.</p>\n\n<p>Does anyone have any idea?</p>\n\n<p>Thanks!!</p>\n"},{"tags":["c#",".net","wcf","messagecontract","wcf-extensions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13121183,"title":"WCF: \"Cancel\" operation Call Dependent on Request Message Contract","body":"<p>Here's my contract:</p>\n\n<pre><code>    [ServiceContract]\npublic interface IMyServiceContract {\n    [OperationContract]\n    OperationResponse1 Operation1(OperationRequest1 req);\n\n    [OperationContract]\n    OperationResponse2 Operation2(OperationRequest2 req);\n    }\n</code></pre>\n\n<p>OperationRequest1 and OperationRequest2 both inherit from BaseOperationRequest, which holds credential information for all requests that come in to the service:</p>\n\n<pre><code>    [MessageContract]\npublic abstract class BaseOperationRequest {\n    [MessageHeader(MustUnderstand = true)]\n    public Guid Token { get; set; }\n\n    [MessageHeader(MustUnderstand = true)]\n    public string Password { get; set; }\n\n    private User User { get; set; }\n}\n</code></pre>\n\n<p>OperationResponse1 and OperationResponse2  both inherit from a base class too:</p>\n\n<pre><code>    [MessageContract]\npublic abstract class BaseOperationResponse {\n    [MessageHeader(MustUnderstand = true)]\n    public bool Success { get; set; }\n\n    [MessageHeader(MustUnderstand = true)]\n    public ServiceErrors ErrorCode { get; set; }\n}\n</code></pre>\n\n<p>ErrorCode is an enumeration.</p>\n\n<p>As you can see on the request, I have two message headers, and one internal object that does not get deserialized as part of the SOAP message. The reason for this is that I want to inject this object in to the request <em>before</em> it is processed by my service implementation. Every single operation implementation will use this object, and I don't want each operation to make two calls to my data layer.</p>\n\n<p>I would like to use WCF extensiblity (via an attribute) to perform two tasks:</p>\n\n<ol>\n<li>Authenticate the requesting user.</li>\n<li>Populate \"User\" on the incoming request class with a complex / composite business object, for use within every operation.</li>\n</ol>\n\n<p>I've investigated IOperationInvoker, IDispatchMessageFormatter and IDispatchMessageInspector, but I've not found any of them to be quite suitable enough.</p>\n\n<p>FYI, here's a primitive example implementation of my service, without any fancy WCF extensibility (or my repository / data layer calls):</p>\n\n<pre><code>public class MyService: IMyServiceContract {\n    public OperationResponse1 Operation1(OperationRequest1 req) {\n        if(req.Token == new Guid(\"GUID VALUE\") &amp;&amp; req.Password == \"password\") {\n            // Perform some actions....\n\n            return new OperationResponse1 {\n                Success = true\n            }\n        } else {\n            return new OperationResponse1 {\n                Success = false,\n                Error = \"You are not authenticated\"\n            }\n        }\n    }\n    public OperationResponse2 Operation2(OperationRequest2 req) {\n        if(req.Token == new Guid(\"GUID VALUE\") &amp;&amp; req.Password == \"password\") {\n            // Perform some actions....\n\n            return new OperationResponse2 {\n                Success = true\n            }\n        } else {\n            return new OperationResponse2 {\n                Success = false,\n                Error = \"You are not authenticated\"\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>IOperationInvoker seems to be the most suitable extension point, but I can't quite figure out how to \"cancel\" the operation and override the response to the client. Here's where I got to:</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Provides an invoker that can be used to authenticate a BaseOperationRequest message.\n/// &lt;/summary&gt;\npublic class UserAuthenticationInvoker : IOperationInvoker {\n    /// &lt;summary&gt;\n    /// The original operation invoker.\n    /// &lt;/summary&gt;\n    private IOperationInvoker _originalInvoker;\n\n    /// &lt;summary&gt;\n    /// The injected User service, for authentication.\n    /// &lt;/summary&gt;\n    [Inject]\n    public IUserService UserService { get; set; }\n\n\n    public UserAuthenticationInvoker(IOperationInvoker originalInvoker) {\n        _originalInvoker = originalInvoker;\n    }\n\n    #region Implementation of IOperationInvoker {\n\n    public object[] AllocateInputs() {\n        return _originalInvoker.AllocateInputs();\n    }\n\n    public object Invoke(object instance, object[] inputs, out object[] outputs) {\n        // Validate base request\n        if(!(inputs[0] is BaseOperationRequest)) {\n            throw new ArgumentException(\"The request object must inherit from BaseOperationRequest in order for User authentication to take place.\");\n        }\n\n        // Get BaseOperationRequest\n        var req = (BaseOperationRequest)inputs[0];\n\n        // Authenticate the User\n        var authResult = UserService.AuthenticateUser(new AuthenticateUserRequest {\n            Token = req.Token,\n            Password = req.Password\n        });\n        if(authResult.Success) {\n            // This is where I get stuck - do I need to modify \"outputs\"? If so, how do I tell the invoker that I want a particular response to be returned, and to cancel the rest of the operation?\n            return _originalInvoker.Invoke(instance, inputs, outputs);\n        }\n        return _originalInvoker.Invoke(instance, inputs, out outputs);\n    }\n\n    public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state) {\n        throw new NotImplementedException(\"The operation cannot be invoked asynchronously.\");\n    }\n\n    public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result) {\n        throw new NotImplementedException(\"The operation cannot be invoked asynchronously.\");\n    }\n\n    public bool IsSynchronous {\n        get { return true; }\n    }\n\n    #endregion\n}\n</code></pre>\n"},{"tags":["c#","javascript","ajax","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13078759,"title":"WCF Service Calls Javascript Code On Start After Removing the Code from the .ASPX Page","body":"<p>I have a C# .NET WCF project that consists of a JavaScript page that calls a service.  Upon start-up (in debug mode) it immediately calls the service, but I can not figure out why.  To attempt to troubleshoot the issue I have performed the standard things, such as cleaning and rebuilding.  I also have deleted the projects dll's under the Windows directory.  To further emphasize the point, I deleted all of the Javascript in the .aspx file, but it still appears to retain it.  I know this because the call stack is pulling the function call with the variables populated, even though they are not there.  </p>\n\n<p>What can cause this?  How should I go about clearing out the code, since it's no longer there?  I think it's a good place to start, as the other issue of calls at startup may be solved.</p>\n"},{"tags":["c#","wcf","windows-phone-7","push-notification"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1192,"score":2,"question_id":5927644,"title":"WP7 Push notification server setup","body":"<p>I am trying to set up a push notification service for my WP7 app.</p>\n\n<p>I have followed the guides and built a WCF service with WPF front end based on the code provided by the Channel9 WP7 jump start guide (Weather Service exmaple) ; <a href=\"http://channel9.msdn.com/Learn/Courses/WP7TrainingKit/WP7Silverlight/UsingPushNotificationsLab/Exercise-2-Introduction-to-the-Toast-and-Tile-Notifications-for-Alerts\" rel=\"nofollow\">http://channel9.msdn.com/Learn/Courses/WP7TrainingKit/WP7Silverlight/UsingPushNotificationsLab/Exercise-2-Introduction-to-the-Toast-and-Tile-Notifications-for-Alerts</a></p>\n\n<p>This all works locally with the address \"http://localhost:8000/RegirstatorService\"</p>\n\n<p>The part I am cluless about is how I translate this app to my server and make it work in the real world.\nI have a basic public facing server 2008 setup with a domain and IIS7 running.</p>\n\n<p>What do I do with the WPF app to make it work on my server? Is it just a case of changing the endpoint address so somehwere on my server, and where do i locate it on my server.</p>\n\n<p>any pointers would be helpful. i have had a good read around the web but still cant understand this part of the whole PN process. I ahve never dealt with WCF before and dont have much expreirence with web servers or IIS.</p>\n\n<p>Many thanks.</p>\n"},{"tags":["asp.net","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":32,"score":0,"question_id":13137541,"title":"IsRequired in WCF","body":"<p>If am adding a Data member it will be sent over the wire to the Client.  What is the advantage of adding Isrequired  ? Please Explain</p>\n"},{"tags":["android","wcf","web-services","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":19,"score":-1,"question_id":13137525,"title":"Passing data from android to WCF rest web service","body":"<p>Im developing android application which will use WCF (REST) web service to retrive data. Can someone provide me with an example how to pass a JSON array from android to a WCF rest service.</p>\n"},{"tags":["wcf","binding","wcf-security"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":6543,"score":1,"question_id":555773,"title":"Custom binding with WCF","body":"<p>I have a wcf service where i have to implement the call backs and also i need to host the wcf service on the IIS 6.0, since IIS6.0 doesnot support the net.tcp binding, i decided to go for the custom binding. The reasons for going for custom binding is that the service is accessed by different clients in different timezones.\nUsing custom binding i can set the allowed clock skew time to other values other than the default one.</p>\n\n<p>I have problem making the custom binding work for me. here is the server config file</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;customBinding&gt;        \n    &lt;binding name=\"pscNetBinding\" openTimeout=\"00:10:00\"&gt;          \n      &lt;reliableSession acknowledgementInterval=\"00:00:00.2000000\"\n  flowControlEnabled=\"true\" inactivityTimeout=\"23:59:59\"\n  maxPendingChannels=\"128\" maxRetryCount=\"8\" maxTransferWindowSize=\"128\"\n  ordered=\"true\" /&gt;\n      &lt;compositeDuplex /&gt;\n      &lt;oneWay maxAcceptedChannels=\"128\" packetRoutable=\"false\"&gt;\n        &lt;channelPoolSettings idleTimeout=\"00:10:00\"\n  leaseTimeout=\"00:10:00\" maxOutboundChannelsPerEndpoint=\"10\" /&gt;\n      &lt;/oneWay&gt;\n      &lt;textMessageEncoding maxReadPoolSize=\"64\" maxWritePoolSize=\"16\"\n  messageVersion=\"Default\" writeEncoding=\"utf-8\"&gt;\n        &lt;readerQuotas maxDepth=\"2147483647\"\n  maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\"\n  maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n      &lt;/textMessageEncoding&gt;\n      &lt;httpTransport manualAddressing=\"false\"\n  maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"\n  allowCookies=\"false\" authenticationScheme=\"Anonymous\"\n  bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n  keepAliveEnabled=\"true\" maxBufferSize=\"2147483647\"\n  proxyAuthenticationScheme=\"Anonymous\" realm=\"\" transferMode=\"Buffered\"\n  unsafeConnectionNtlmAuthentication=\"false\" useDefaultWebProxy=\"true\"/&gt;\n    &lt;/binding&gt;\n  &lt;/customBinding&gt;\n&lt;/bindings&gt;\n\n&lt;services&gt;\n  &lt;service name=\"SchneiderElectric.PSCNet.Server.Services.PSCNetWCFService\" behaviorConfiguration=\"Behaviors1\"&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress =\"http://10.155.18.18:2000/PSCNet\"/&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n    &lt;endpoint address=\"\" binding=\"customBinding\"    bindingConfiguration=\"pscNetBinding\"\n                                contract=\"SchneiderElectric.PSCNet.Server.Contracts.IPSCNetWCFService\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;    \n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"Behaviors1\"&gt;\n      &lt;serviceMetadata httpGetEnabled = \"true\"/&gt;\n      &lt;!--&lt;serviceThrottling maxConcurrentCalls=\"2048\" maxConcurrentSessions=\"2048\" maxConcurrentInstances=\"2048\" /&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;--&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p>and here the client config file</p>\n\n<pre><code>  &lt;bindings&gt;\n    &lt;customBinding&gt;\n      &lt;binding name=\"pscNetBinding\" openTimeout=\"00:10:00\"&gt;            \n        &lt;reliableSession acknowledgementInterval=\"00:00:00.2000000\"\n    flowControlEnabled=\"true\" inactivityTimeout=\"23:59:59\"\n    maxPendingChannels=\"128\" maxRetryCount=\"8\" maxTransferWindowSize=\"128\"\n    ordered=\"true\" /&gt;\n        &lt;compositeDuplex /&gt;\n        &lt;oneWay maxAcceptedChannels=\"128\" packetRoutable=\"false\"&gt;\n          &lt;channelPoolSettings idleTimeout=\"00:10:00\"\n    leaseTimeout=\"00:10:00\" maxOutboundChannelsPerEndpoint=\"10\" /&gt;\n        &lt;/oneWay&gt;\n        &lt;textMessageEncoding maxReadPoolSize=\"64\" maxWritePoolSize=\"16\"\n    messageVersion=\"Default\" writeEncoding=\"utf-8\" &gt;\n          &lt;readerQuotas maxDepth=\"2147483647\"\n    maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\"\n    maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n        &lt;/textMessageEncoding &gt;\n        &lt;httpTransport manualAddressing=\"false\"\n    maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"\n    allowCookies=\"false\" authenticationScheme=\"Anonymous\"\n    bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n    keepAliveEnabled=\"true\" maxBufferSize=\"2147483647\"\n    proxyAuthenticationScheme=\"Anonymous\" realm=\"\" transferMode=\"Buffered\"\n    unsafeConnectionNtlmAuthentication=\"false\" useDefaultWebProxy=\"true\" /&gt;                    \n      &lt;/binding&gt;\n    &lt;/customBinding&gt;\n  &lt;/bindings&gt;\n  &lt;client&gt;\n    &lt;endpoint address=\"http://10.155.18.18:2000/PSCNet\" binding=\"customBinding\"\n        bindingConfiguration=\"pscNetBinding\" contract=\"PSCNetWCFService.IPSCNetWCFService\"\n        name=\"pscNetBinding\" /&gt;\n  &lt;/client&gt;\n</code></pre>\n\n<p>if i use the server and client on the same machine everything works fine. But as soon as i run the server and client on different machine i get the following error</p>\n\n<p>\"Could not connect to <a href=\"http://10.155.18.198:9000/e60ba5b3-f979-4922-b9f8-c820caaa04c2\" rel=\"nofollow\">http://10.155.18.198:9000/e60ba5b3-f979-4922-b9f8-c820caaa04c2</a>. TCP error code 10060: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 10.155.18.198:9000.\"</p>\n\n<p>Can anyone in the community help me in this regard.</p>\n"},{"tags":["c#",".net","winforms","wcf","network-programming"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13137201,"title":"How to pass values between two independent winform applications each on different machines in C#.net","body":"<p>*<strong>I have two winform applications coded in C# each on different applications.\nAnd now I want to pass values between them</strong>..*It can be done easily in case of websites but how to do that in winform appications.</p>\n\n<p><strong>Please Remember these forms are not parent and child forms of the same applications.But they are forms of two different applications.</strong></p>\n\n<p><strong>Logic</strong>:Actually,I will be doing some validation on 1 machine based on encounterId. And if the encounter Id is validated,Then I want to run an exe(programed in C# my me only) on different machine.(i.e. I plan to send that validated encounter ID on 2nd machine and open the exe with the person details related with that validated encounter)</p>\n"},{"tags":["wcf","winrt","push-notification","duplex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13137156,"title":"WNS or WCF (web socket based duplex service) for windows 8 chat application","body":"<p>I want to develop a chat application for windows 8 where at a time there will be 1000-2000 clients simultaneously communicating with each other.So far i found two options.Windows Notification Service(WNS) and the other one is WCF 4.5 (web socket based duplex service). Can anyone please suggest which would be better suited for my purpose? </p>\n"},{"tags":["asp.net","wcf","entity-framework-4","poco","self-tracking-entities"],"answer_count":4,"favorite_count":9,"up_vote_count":25,"down_vote_count":0,"view_count":5841,"score":25,"question_id":3814706,"title":"Self Tracking Entities vs POCO Entities","body":"<p>We are starting a new web based product in which we are planning to expose our business logic through WCF services. We will be using ASP.NET 4.0, C#, EF 4.0. In future we want to build iphone applications and WPF applications based on the services. I have been reading a lot about using POCO vs Self Tracking Entities (STE) and from my understand the STEs do not work well with the web scenario. Can anyone shed more light on this issue? </p>\n"},{"tags":["c#","wcf","silverlight","xaml"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13086303,"title":"CellEditingTemplate in XAML","body":"<p>I have created a datagrid in silverlight having all textboxes(using CellEditingTemplate)..<img src=\"http://i.stack.imgur.com/xgHSU.png\" alt=\"enter image description here\"></p>\n\n<p>On click of save button i want to insert data of textboxes present in rows datagrid into database.\nHow could I achieve this??</p>\n"},{"tags":["wcf","iis","wcf-security","windowsauthentication"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1701,"score":1,"question_id":4409306,"title":"hosting WCF service in IIS with windows authentication and without anonymous access","body":"<p>I would like to use WCF service hosted in IIS (5/6) with integrated windows authentication enabled and anonymous access disabled. I tried to do this by following this article <a href=\"http://msdn.microsoft.com/en-us/library/ff648431.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ff648431.aspx</a>, but getting an error saying certificate is not installed. but I don't need SSL. I don't have any clients expecting older ASMX services, so I don't need to use basicHttpBinding (and also it is not secure), so I tried to use wsHttpBinding. <br/>how to get wsHttpBinding with windows authentication to work without SSL? this is such a common requirement, but I couldn't find any solution for this. can someone post the configuration for the client and the server please? I am using ASP.NET client. thanks in advance. <br/>\nmy configuration below. and the exact error message is \"An error occurred while making the HTTP request to <a href=\"https://mymachine/WCFTest/Service1.svc\" rel=\"nofollow\">https://mymachine/WCFTest/Service1.svc</a>. This could be due to the fact that the server certificate is not configured properly with HTTP.SYS in the HTTPS case. This could also be caused by a mismatch of the security binding between the client and the server.\" I used \"svcUtil\" utility to generate the proxy class and configuration for the client.</p>\n\n<pre><code>server:\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;wsHttpBinding&gt;\n                &lt;binding name=\"wsHttpEndpointBinding\"&gt;\n                    &lt;security mode=\"Transport\"/&gt;\n                &lt;/binding&gt;\n            &lt;/wsHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;services&gt;\n            &lt;service behaviorConfiguration=\"WCFTest.Service1Behavior\" name=\"WCFTest.Service1\"&gt;\n                &lt;endpoint address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpEndpointBinding\" name=\"wsHttpEndpoint\" contract=\"WCFTest.IService1\"/&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"WCFTest.Service1Behavior\"&gt;\n                    &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n                    &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                    &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n    &lt;/system.serviceModel&gt;\n\nclient:\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"wsHttpEndpoint\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n            receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" bypassProxyOnLocal=\"false\"\n            transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n            allowCookies=\"false\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n              enabled=\"false\" /&gt;\n          &lt;security mode=\"Transport\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n                establishSecurityContext=\"true\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"https://mymachine/WCFTest/Service1.svc\"\n          binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpEndpoint\"\n          contract=\"IService1\" name=\"wsHttpEndpoint\"&gt;\n        &lt;identity&gt;\n          &lt;userPrincipalName value=\"mymachine\\ASPNET\" /&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt; \n</code></pre>\n"},{"tags":[".net","wcf","wcf-proxy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":627,"score":1,"question_id":2948657,"title":"migrating webclient to WCF; WCF client serializes parametername of method","body":"<p>I'm struggling with migrating from webservice/webclient architecture to WCF architecture. The object are very complex, with lots of nested xsd's and different namespaces. Proxy classes are generated by adding a Web Reference to an original wsdl with 30+ webmethods and using xsd.exe for generating the missing SOAPFault objects. My pilot WCF Service consists of only 1 webmethod which matches the exact syntax of one of the original methods: 1 object as parameter, returning 1 other object as result value. I greated a WCF Interface using those proxy classes, using attributes: XMLSerializerFormat and ServiceContract on the interface, OperationContract on one method from original wsdl specifying Action, ReplyAction, all with the proper namespaces. I create incoming client messages using SoapUI; I generated a project from the original WSDL files (causing the SoapUI project to have 30+ methods) and created one new Request at the one implemented WebMethod, changed the url to my wcf webservice and send the message. Because of the specified (Reply-)Action in the OperationContractAttribute, the message is actually received and properly deserialized into an object. To get this far (40 hours of googling), a lot of frustration led me to using a custom endpoint in which the WCF 'wrapped tags' are removed, the namespaces for nested types are corrected, and the generated wsdl get's flattened (for better compatibility with other tools then MS VisualStudio).</p>\n\n<p>Interface code is this:</p>\n\n<pre><code>[XmlSerializerFormat(Use = OperationFormatUse.Literal, Style = OperationFormatStyle.Document, SupportFaults = true)]\n[ServiceContract(Namespace = Constants.NamespaceStufZKN)]\npublic interface IOntvangAsynchroon\n{\n\n    [OperationContract(Action = Constants.NamespaceStufZKN + \"/zakLk01\", ReplyAction = Constants.NamespaceStufZKN + \"/zakLk01\", Name = \"zakLk01\")]\n    [FaultContract(typeof(Fo03Bericht), Namespace = Constants.NamespaceStuf)]\n    Bv03Bericht zakLk01([XmlElement(\"zakLk01\", Namespace = Constants.NamespaceStufZKN)] ZAKLk01 zakLk011);\n</code></pre>\n\n<p>When I use a Webclient in code to send a message, everything works. My problem is, when I use a WCF client. I use ChannelFactory&lt; IOntvangAsynchroon > to send a message. But the generated xml looks different: it includes the parametername of the method! It took me a lot of time to figure this one out, but here's what happens:</p>\n\n<p>Correct xml (stripped soap envelope):</p>\n\n<pre><code>&lt;soap:Body&gt;\n&lt;zakLk01 xmlns=\"http://www.egem.nl/StUF/sector/zkn/0310\"&gt;\n&lt;stuurgegevens&gt;\n&lt;berichtcode xmlns=\"http://www.egem.nl/StUF/StUF0301\"&gt;Bv01&lt;/berichtcode&gt;\n&lt;zender xmlns=\"http://www.egem.nl/StUF/StUF0301\"&gt;\n&lt;applicatie&gt;ONBEKEND&lt;/applicatie&gt;\n&lt;/zender&gt;\n&lt;/stuurgegevens&gt;\n&lt;parameters&gt;\n&lt;/parameters&gt;\n&lt;/zakLk01&gt;\n&lt;/soap:Body&gt;\n</code></pre>\n\n<p>Bad xml:</p>\n\n<pre><code>&lt;soap:Body&gt;\n&lt;zakLk01 xmlns=\"http://www.egem.nl/StUF/sector/zkn/0310\"&gt;\n&lt;zakLk011&gt;\n&lt;stuurgegevens&gt;\n&lt;berichtcode xmlns=\"http://www.egem.nl/StUF/StUF0301\"&gt;Bv01&lt;/berichtcode&gt;\n&lt;zender xmlns=\"http://www.egem.nl/StUF/StUF0301\"&gt;\n&lt;applicatie&gt;ONBEKEND&lt;/applicatie&gt;\n&lt;/zender&gt;\n&lt;/stuurgegevens&gt;\n&lt;parameters&gt;\n&lt;/parameters&gt;\n&lt;/zakLk011&gt;\n&lt;/zakLk01&gt;\n&lt;/soap:Body&gt;\n</code></pre>\n\n<p>Notice the 'zakLk011' element? It is the name of the parameter of the method in my interface! So NOW it is zakLk011, but it when my parameter name was 'zakLk01', the xml seemed to contain some magical duplicate of the tag above, but without namespace. Of course, you can imagine me going crazy over what was happening before finding out it was the parametername!</p>\n\n<p>I now have actually created a WCF Service, at which I cannot send messages using a WCF Client anymore. For clarity: The method does get invoked using the WCF Client on my webservice, but the parameter object is empty. Because I'm using a custom endpoint to log the incoming xml, I can see the message is received fine, but just with the wrong syntax!</p>\n\n<p>WCF client code:</p>\n\n<pre><code>ZAKLk01 stufbericht = MessageFactory.CreateZAKLk01();\nChannelFactory&lt;IOntvangAsynchroon&gt; factory = new ChannelFactory&lt;IOntvangAsynchroon&gt;(new BasicHttpBinding(), new EndpointAddress(\"http://localhost:8193/Roxit/Link/zkn0310\"));\nfactory.Endpoint.Behaviors.Add(new LinkEndpointBehavior());\nIOntvangAsynchroon client = factory.CreateChannel();\nclient.zakLk01(stufbericht);\n</code></pre>\n\n<p>I am not using a generated client, i just reference the webservice (share libraries) like I am used to.</p>\n\n<p>Edit: When generating a Service Reference, it generates duplicate classes(dont know why..). When these duplicates are removed however, a client sends messages with correct xml. But my architecture requires shared libraries, so this doesn't help me out.</p>\n\n<p>Can anyone please help me? I can't google anything on this...</p>\n"},{"tags":[".net","wcf","certificates","self-signed"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":781,"score":0,"question_id":3229558,"title":"WCF Transport security with peertrust and self-signed client certificates","body":"<p>I'm been struggling with WCF for a while now and I can't seem to figure it out.\nI have a self-hosted WCF service with SSL enabled (using a signed certificate from a self-signed root CA), so far so good. The service is for business-to-business communication so certificates seemed to be the best solution.</p>\n\n<p>(I'm using the WS binding at the moment but that's just for development purposes since all binding methods support (as far as I know) transport level security with client certificates.)</p>\n\n<p>Some relevant configuration bits for the service:</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"wsHttpBinding\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Certificate\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n\n&lt;!-- snip --&gt;\n\n&lt;serviceCredentials&gt;\n  &lt;clientCertificate&gt;\n     &lt;authentication certificateValidationMode=\"PeerTrust\" trustedStoreLocation=\"CurrentUser\" /&gt;\n  &lt;/clientCertificate&gt;\n&lt;/serviceCredentials&gt;\n</code></pre>\n\n<p>When I have the client use a self-signed certificate which is in the \"trusted people\" store of the user running the WCF service it fails. When I use a certificate signed by my own root CA it works even if it's not in the \"trusted people\" store.</p>\n\n<p>I was expecting that I would be able to use self-signed certificates, store them in the \"trusted people\" store and things would just work. But there seems to be some extra validation going on, it there something I'm missing? Is there a better way?</p>\n"},{"tags":["wcf","ssl","iis7","ssl-certificate","self-signed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":453,"score":2,"question_id":11296092,"title":"WCF Self signed certificate is not trusted on the client","body":"<p>I have a WCF service that is ONLY every used between two server machines. It will NEVER be used publicly.</p>\n\n<p>I was hoping I could use SSL with a self signed certificate for security.</p>\n\n<p>I created a certificate using IIS7, installed it on the client machine using IE and the MMC (Personal, TrustedRoot, Third-Party &amp; TrustedPeople).</p>\n\n<p>I still can't get to the service, either from code or via IE8, without it questioning the certificate.</p>\n\n<p>From IE I get the usual \"There is a problem with this website's security certificate.\"</p>\n\n<p>From code I get the error: \"Could not establish trust relationship for the SSL/TLS secure channel with authority\"</p>\n\n<p>Why is this not working?</p>\n"},{"tags":["wcf","service","certificate"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1070,"score":3,"question_id":2298976,"title":"WCF, self signed Certificates for Encryption","body":"<p>I want to create WCF services using aspnet membership to authorize the user. However, if  I just need the certificate for encryption purposes only, does it matter if it is a self signed certificate or do you need to buy a certificate from a vendor?</p>\n"},{"tags":["asp.net","json","wcf","rest","datetime-format"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13134978,"title":"WCF REST JSON with ISO Date Format","body":"<p>I got into a big problem supporting ISO dateformat with JSON in my WCF Web service ( Framework 4.0 ).\nI tried a lot, but no luck yet.</p>\n\n<p>Rest Service :</p>\n\n<pre><code>    [WebInvoke(Method = \"PUT\", UriTemplate = \"/{mvnoid}/{OrderID}\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\n    public DataContracts.Feedback InsertOrder(string mvnoid,string OrderID,OrderRequest orderRequest)\n    {            \n\n        OrderRequestManager orderProcessor = new OrderRequestManager();\n        DataContracts.Feedback feedback = orderProcessor.ProcessOrder(orderRequest);\n\n        return feedback;\n\n    }\n</code></pre>\n\n<p>This is my object:</p>\n\n<pre><code>[DataContract(Namespace = NamespacesHelper.SCHEMA_NAMESPACE)]\npublic class OrderRequest\n{\n    [DataMember(IsRequired = true, Order = 1)]\n    public string SystemId { get; set; }\n\n    [DataMember(IsRequired = true, Order = 2)]\n    public string OrderType { get; set; }\n\n    [DataMember(IsRequired = true, Order = 3)]\n    public DateTime OrderDate { get; set; }\n\n    [DataMember(IsRequired = true, Order = 4)]\n    public DateTime OrderScheduleDate { get; set; }\n\n    [DataMember(IsRequired = false, Order = 5)]\n    public int UserId { get; set; }\n\n\n}\n</code></pre>\n\n<p>This is my JSON Payload</p>\n\n<p>{\n\"SystemId\":\"2\",\n\"OrderType\":\"TESTORDER\",\n\"OrderDate\":\"/Date(1255131630400)/\",\n\"OrderScheduleDate\":\"/Date(1255131630400)/\",\n\"UserId\":150\n}\nAnd I need this \"/Date(1255131630400)/\" to be in ISO format \"2012-10-30T15:00:00\".</p>\n\n<p>I tried this solution too. with creating custom JSON formatter.\n<a href=\"http://stackoverflow.com/questions/9827933/json-net-serializer-for-wcf-rest-services\">JSON.NET Serializer for WCF REST Services</a>.\nBut I was unable to find HttpHostConfiguration class anywhere . :(</p>\n\n<p>Thanks in Advance for helping.</p>\n"},{"tags":["wcf","f#","wsdl","svcutil.exe","type-providers"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":233,"score":2,"question_id":12969410,"title":"F# wsdl type provider error?","body":"<p>Although I love the idea of F# type providers my first serious attempt to use them crashed hard.</p>\n\n<p>I was going to connect to a service (WCF) with <code>WsdlService&lt;\"http://someurl/some.svc?wsdl\"&gt;</code></p>\n\n<p>It fails epicly with:</p>\n\n<blockquote>\n  <p>The type provider\n  'Microsoft.FSharp.Data.TypeProviders.DesignTime.DataProviders'\n  reported an error:  tmp6E6C.cs(9409,26): error CS0644: \n  'System.ComponentModel.PropertyChangedEventHandler' cannot derive from\n  special class  'System.MulticastDelegate'\n  c:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\mscorlib.dll: (Location\n  of symbol related to previous error)</p>\n</blockquote>\n\n<p>and a lot of other warnings which probably are not relevant:</p>\n\n<blockquote>\n  <p>tmp6E6C.cs(290,28): warning CS0436: The type\n  'System.Data.DataRowState' in \n  'c:\\Users\\someuser\\AppData\\Local\\Temp\\tmp6E6C.cs' conflicts with the\n  imported  type 'System.Data.DataRowState' in\n  'c:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\System.Data.dll'. Using\n  the type defined in 'c:\\Users\\someuser\\AppData\\Local\\Temp\\tmp6E6C.cs'.\n  tmp6E6C.cs(9427,17): (Location of symbol related to previous warning)</p>\n</blockquote>\n\n<p>Is this a known feature ;-) or am I using it wrong?</p>\n\n<p>I unfortunately cannot post the WSDL, and its rather large with a lot of types in it so I must admit I am somewhat lazy and have not trimmed it down either. OTOH if I did know what part of the WSDL was offending or creating this error I would of course have put it here.</p>\n\n<p>To change the WSDL is not an option either, so I am mainly interested in knowing why F# WSDL type providers can not handle this (WCF) WSDL, or what I am doing wrong.</p>\n\n<p>It works excellent when consumed by C# and svcutil.exe from VS2010.</p>\n\n<p>I have tried all the params to the WsdlTypeProvider and they do give the same result (except ForceUpdate of course). Should I be consuming these services in another way with F#?</p>\n\n<p>===============================================================================\nAdded info (since I am new and didnt want to answer. dont ask why :):</p>\n\n<p>Thank you all answering/commenting.</p>\n\n<p>I did go partly this way may self (manually using svcutil). As I tried to say above, I tried to use svcutil by hand, and it fails when compiling the generated C# code (in a library besides the F#). </p>\n\n<p>That is, I did the following:</p>\n\n<p>1) Create the contract by setting up a reference in VS 2010 GUI. This works as expected</p>\n\n<p>2) Try to create it by using svcutil from cmd-line. Then the compile of that file fails with same error.</p>\n\n<p>As it seems from my point of view what happens in svcutil from cmd-line and what happens when using svcutil (or what is used) from the GUI adding the same service does not generate the code with the same parameters. I guess this is partly controlled by the fact that what I try to consume is a WCF service and not a \"clean\" WSDL/webservice, and the type provider assumes that I try to use a \"clean\" webservice.</p>\n\n<p>I did not manage to find any params for svcutil takeing care of this, or any possible combinations of params, not saying that I did try all permutations of combinations, but trying the ones probable based upon (trying to) deep reading the documentation of svcutil (and I am not entirley new at using it from cmd-line).</p>\n\n<p>So far I have concluded that it is some \"missing\" params to svcutil which causes this, and that the F# type provider is not at fault. I would still very much like to solve it somehow, still using F# type providers, but a fallback is to generate the code by GUI in C# and then reference that part of code in F# again. That is not the elegant solution I was trying to achieve, since I do have a lot of services and I would very much like to create such a nice way of prototyping and testing those services. </p>\n\n<p>Another fallback would of course also give up the whole F# part and just go with some unit-testing etc., but that again is defating the purpose of sneaking in F# and learning at same time ;-)</p>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13134603,"title":"how to save the memory @ server end","body":"<p>The data is available @ the server end and based on the request, data is transferred from server to client on chunk basis and written to a file @ the client side.</p>\n\n<pre><code>data contract used\nclass ComplexArray\n{\n\n   public complexArray(double[] real, double imag)\n   {\n\n   }\n\n}\n\nclass ComplexArrayList\n{\n  List&lt;complexArray&gt; complexArrayLst;\n}\n</code></pre>\n\n<p>for example @ server end the data is around 30 MB, for each request 10 MB of data is filled in the complex array and data sent to client,the same datacontract from the client is returned back to the server. </p>\n\n<p>Before filling the next chunk @ the server side List is cleared, hence the memory associated with the complex array is set to null</p>\n\n<p>I wanted to know</p>\n\n<ol>\n<li><p>Is there any way to retain the memory and clear only the array contents</p></li>\n<li><p>How good is to use the same memory allocation - i mean the data contract sent by the client, use the same complex arrays to refill the data.</p></li>\n</ol>\n"},{"tags":["wcf","wif","claims-based-identity","ws-trust"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12939508,"title":"Specifying the default WS Trust credentials in web.config","body":"<p>I have a custom STS implemented with WIF. My WS-Trust services are using these configurations:</p>\n\n<pre><code>&lt;behavior name=\"WSTrustServiceBehaviour\"&gt;\n    &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n    &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n\n    &lt;serviceCredentials&gt;\n        &lt;clientCertificate&gt;\n            &lt;authentication certificateValidationMode=\"ChainTrust\"\n                            revocationMode=\"NoCheck\"\n                            trustedStoreLocation=\"LocalMachine\"/&gt;\n        &lt;/clientCertificate&gt;\n\n        &lt;serviceCertificate storeLocation=\"LocalMachine\"\n                            storeName=\"TrustedPeople\"\n                            x509FindType=\"FindByThumbprint\"\n                            findValue=\"5BF081CCC2E20094D0648F0A3F3C6A598155D606\"/&gt;\n    &lt;/serviceCredentials&gt;\n&lt;/behavior&gt;\n\n&lt;ws2007HttpBinding&gt;\n    &lt;binding name=\"WSTrustHttpBinding\"&gt;\n        &lt;security&gt;\n            &lt;message clientCredentialType=\"Certificate\"\n                     negotiateServiceCredential=\"false\" \n                     establishSecurityContext=\"false\"/&gt;\n        &lt;/security&gt;\n    &lt;/binding&gt;\n&lt;/ws2007HttpBinding&gt;\n\n&lt;service name=\"System.ServiceModel.Security.WSTrustServiceContract\"\n         behaviorConfiguration=\"WSTrustServiceBehaviour\"&gt;\n    &lt;endpoint name=\"WSTrust13HttpEndpoint\"\n              address=\"http/v13\"\n              binding=\"ws2007HttpBinding\"\n              bindingConfiguration=\"WSTrustHttpBinding\"\n              contract=\"System.ServiceModel.Security.IWSTrust13AsyncContract\"/&gt;\n    &lt;endpoint name=\"WSTrustFeb05HttpEndpoint\"\n              address=\"http/feb05\"\n              binding=\"ws2007HttpBinding\"\n              bindingConfiguration=\"WSTrustHttpBinding\"\n              contract=\"System.ServiceModel.Security.IWSTrustFeb2005AsyncContract\" /&gt;\n    &lt;endpoint name=\"WSTrustMexHttpEndpoint\"\n              binding=\"mexHttpBinding\"\n              bindingConfiguration=\"\"\n              address=\"http/mex\"\n              contract=\"IMetadataExchange\"/&gt;\n    &lt;host&gt;\n        &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://services.example.com\" /&gt;\n        &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n&lt;/service&gt;\n</code></pre>\n\n<p>Now I have one Web application that needs to call a WCF service. Both the Web application and the WCF Service are both Relying Parties of my custom STS. In my Web application's web.config, I have the following:</p>\n\n<pre><code>&lt;ws2007FederationHttpBinding&gt;\n    &lt;binding name=\"MyWCFServiceWS2007FederationHttpBinding\"\n             useDefaultWebProxy=\"false\"\n             messageEncoding=\"Mtom\"&gt;\n        &lt;security mode=\"Message\"&gt;\n            &lt;message&gt;\n                &lt;issuer address=\"http://sts.example.com/WSTrust.svc/http/feb05\"\n                        binding=\"ws2007HttpBinding\"\n                        bindingConfiguration=\"WSTrustHttpBinding\"/&gt;\n                &lt;issuerMetadata address=\"http://sts.example.com/Bus/WSTrust.svc/http/mex\"/&gt;\n            &lt;/message&gt;\n        &lt;/security&gt;\n    &lt;/binding&gt;\n&lt;/ws2007FederationHttpBinding&gt;\n\n&lt;endpointBehaviors&gt;\n    &lt;behavior name=\"MyWCFServiceWS2007HttpEndpointBehavior\"&gt;\n        &lt;clientCredentials supportInteractive=\"false\"\n                           useIdentityConfiguration=\"true\"&gt;\n            &lt;serviceCertificate&gt;\n                &lt;authentication certificateValidationMode=\"ChainTrust\"\n                                revocationMode=\"NoCheck\"/&gt;\n            &lt;/serviceCertificate&gt;\n        &lt;/clientCredentials&gt;\n    &lt;/behavior&gt;\n&lt;/endpointBehaviors&gt;\n\n&lt;client&gt;\n    &lt;endpoint name=\"MyWCFServiceWS2007FederationHttpEndpoint\"\n              address=\"http://services.example.com/MyWCFService.svc/...\"\n              binding=\"ws2007FederationHttpBinding\"\n              bindingConfiguration=\"MyWCFServiceWS2007FederationHttpBinding\"\n              contract=\"...\"\n              behaviorConfiguration=\"IdentityWS2007HttpEndpointBehavior\"/&gt;\n&lt;/client&gt;\n</code></pre>\n\n<p>Now the problem is that when I try to invoke My WCF Service using the client endpoint, WCF will first contact the STS WS-Trust endpoint to get a token.</p>\n\n<p>But the WS-Trust Service is expecting the client to present a certificate to authenticate himself. How can I specify these credentials in the web.config?</p>\n\n<p>I think in code I would do something like:</p>\n\n<pre><code>var trustChannelFactory = new WSTrustChannelFactory(..., ...);\n\ntrustChannelFactory.TrustVersion = System.ServiceModel.Security.TrustVersion.WSTrust13;\n\ntrustChannelFactory.Credentials.SupportInteractive = false;\n\n// Set the credentials here:\ntrustChannelFactory.Credentials  ...\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Thanks.</p>\n"},{"tags":[".net","wcf","nettcpbinding","ws-reliablemessaging"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13028717,"title":"WCF is slow when reliable session is ON and with burst async request","body":"<p>For experiments, I created a simple \"Hello World\" WCF service and client using .NET 4.5 on VS2012. The server is hosted on a console application and use net.tcp binding. I wrote the client code to send a burst of async requests (a total of 700 requests) to the server. Everything went fine until I turned ON the Reliable session feature of the service. After it is ON, the service suddenly ran very slow and it took almost a minute on my machine to complete the 700 requests. I tried to fine tune the Concurrency and Throttling parameters (see below) but it didn't help. </p>\n\n<p>Does anyone know why this happen ? Is there anyway to avoid this ?</p>\n\n<p>The slowness didn't happen if I turned OFF the Reliable session feature, or if I made the service call synchronous. So I think it may relate to the way WCF handles pending requests in WS-ReliableMessaging mode. </p>\n\n<p>EDIT: Also this didn't happen when I chaned netTcpBinding to wsHttpBinding. This is very weird because in this case wsHttpBinding is much faster than netTcpBinding.</p>\n\n<p>EDIT: Running Perfmon.exe on the server side shows that the \"Thread Count\" gradually increase from 8 to beyond 100 in the above case.</p>\n\n<p>EDIT: Some measured throughput on my PC (local network). See that the performance of case 1 is very sluggish and practically useless.</p>\n\n<ol>\n<li>Async + NetTcpBinding/Reliable throughput -> approx. 14 call/s (70 ms/call)</li>\n<li>Async + WsHttp/Reliable throughput -> 7957 call/s (0.12 ms/call)</li>\n<li>Sync + NetTcpBinding/Reliable throughtput -> 3986 call/s (0.25 ms/call)</li>\n</ol>\n\n<p>Below are the codes and configuration for the server and client I used in the experiments.</p>\n\n<p><strong>Server:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\nusing System.ServiceModel;\nusing System.ServiceModel.Description;\n\n[ServiceContract]\npublic interface IHelloService\n{\n    [OperationContract(IsOneWay=false)]\n    string SayHello(string name);\n}\n\n[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, InstanceContextMode=InstanceContextMode.PerSession)]\npublic class HelloService : IHelloService\n{\n    public string SayHello(string name) {\n        String s = string.Format(\"Hello {0}\", name); \n        return s; \n    }\n}\n\nnamespace WcfServer\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Uri baseAddress = new Uri(\"net.tcp://localhost:8080/hello\");\n            using (ServiceHost host = new ServiceHost(typeof(HelloService), baseAddress)){\n                // Open and listen\n                host.Open();\n                Console.WriteLine(\"The service is ready at {0}\", baseAddress);\n                Console.WriteLine(\"Press &lt;Enter&gt; to stop the service.\");\n                Console.ReadLine();\n                // Close the ServiceHost.\n                host.Close();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Client:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\nusing System.ServiceModel;\nusing WcfClient.WcfServer;\n\nnamespace WcfClient\n{\n    class Program\n    {\n        static async Task PrintNameAsync(HelloServiceClient client, int cnt) {\n            string s = await client.SayHelloAsync(string.Format(\"-- {0} --\", cnt));\n            Console.WriteLine(s);\n        }\n\n        static void Main(string[] args)\n        {\n            HelloServiceClient client = new HelloServiceClient(\"HelloService\", \"net.tcp://10.20.61.13:8080/hello\");\n            List&lt;Task&gt; tasks = new List&lt;Task&gt;();\n            for(int i=0; i &lt; 700; i++){\n                Task t = PrintNameAsync(client, i);\n                tasks.Add(t);\n            }\n            Task.WhenAll(tasks).Wait();\n            client.Close();\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Server's App.config:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;startup&gt; \n        &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5\" /&gt;\n    &lt;/startup&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;netTcpBinding&gt;\n                &lt;binding name=\"HelloServiceBinding\"&gt;\n                    &lt;reliableSession ordered=\"true\" enabled=\"true\" /&gt;\n                    &lt;security mode=\"None\" /&gt;\n                &lt;/binding&gt;\n            &lt;/netTcpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"HelloServiceBehavior\"&gt;\n                    &lt;serviceMetadata policyVersion=\"Policy15\" /&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n                    &lt;serviceThrottling maxConcurrentCalls=\"1000\" maxConcurrentSessions=\"1000\"\n                        maxConcurrentInstances=\"1000\" /&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;services&gt;\n            &lt;service behaviorConfiguration=\"HelloServiceBehavior\" name=\"HelloService\"&gt;\n                &lt;endpoint address=\"net.tcp://localhost:8080/hello\" binding=\"netTcpBinding\"\n                    bindingConfiguration=\"HelloServiceBinding\" name=\"HelloService\" contract=\"IHelloService\" /&gt;\n                &lt;endpoint address=\"mex\" binding=\"mexTcpBinding\" contract=\"IMetadataExchange\" /&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>Client's App.config:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;startup&gt; \n        &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5\" /&gt;\n    &lt;/startup&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;netTcpBinding&gt;\n                &lt;binding name=\"HelloServiceBinding\" sendTimeout=\"00:01:00\"&gt;\n                    &lt;reliableSession enabled=\"true\" /&gt;\n                    &lt;security mode=\"None\" /&gt;\n                &lt;/binding&gt;\n            &lt;/netTcpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"net.tcp://localhost:8080/hello\" binding=\"netTcpBinding\"\n                bindingConfiguration=\"HelloServiceBinding\" contract=\"WcfServer.IHelloService\"\n                name=\"HelloService\"&gt;\n            &lt;/endpoint&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf","silverlight"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13127622,"title":"Silverlight can't access cross domain WCF service","body":"<p>I have a Silverlight app hosted on server A, and a WCF service hosted on server B on IIS 6. Server B disallows any non-https connections (not that it doesn't rewrite them.. they just fail). </p>\n\n<p>in wwwroot for server B I have a clientaccesspolicy.xml file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;access-policy&gt;\n  &lt;cross-domain-access&gt;\n    &lt;policy&gt;\n      &lt;allow-from http-request-headers=\"*\"&gt;\n        &lt;domain uri=\"*\"/&gt;\n  &lt;/allow-from&gt;\n  &lt;grant-to&gt;\n    &lt;resource path=\"/\" include-subpaths=\"true\"/&gt;\n  &lt;/grant-to&gt;\n&lt;/policy&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>Looking at proxy traffic, I can now see the silverlight app requesting mydomain/clientaccesspolicy.xml and returning an HTTP 200 with the contents, however, silverlight then gives a security exception.</p>\n\n<p>I have tried many variations of the clientaccesspolicy.xml files and even crossdomain.xml examples floating around the internet to no avail. </p>\n\n<p>Additionally, the SL app works if I install it instead of run it through the browser.</p>\n\n<p>I am wondering if this is a SL 5 bug?</p>\n\n<p>Note that this is a follow-up to my original question I asked earlier, where I was unable to see the clientaccesspolicy.xml request go out (but I can now and it still doesn't work). </p>\n"},{"tags":["c#","wcf","soap","service-reference","wcfserviceclient"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13130609,"title":"creating a wcf client assistance","body":"<p>I am currently developing a WCF client to interaction with a set of WCF service references. I am developing in c#.</p>\n\n<p>I don't want to following the approach of having to generate a service reference using svc util or manually adding a service reference to my class library. </p>\n\n<p>Have I an other alternatives open to me? I am considering using the ServiceClient class within the ServiceModel library. </p>\n\n<p>I am little confused though, for example the request and response objects related to an endpoint, where are these created or how are they created? In a previous project I used T4 mappings and DTO's, but I feel these are over kill. I did like though that I could share the same object between different service endpoints. My goal here is to create a custom client object communicating through a custom written proxy. I would like some direction on this.</p>\n"},{"tags":["wcf","debugging"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3961,"score":4,"question_id":1307182,"title":"WCF can no longer step into a service that's localy hosted -- why not?","body":"<p>I have a WCF test service and a test client in the same solution. The service is configured to run on localhost (Ie, \"http://localhost:8731/Design_Time_Addresses/MyService/Service\") I run the client app and it correctly invokes the service and gets back the correct answer. I've verified via logs that it's definitely running the service that's local to my machine.\n  However, I can't debug into the service when running the client. WCF is supposed to allow just stepping through, but no breakpoints on the service get hit, and stepping in to the service call doesn't work either. Has anyone ever seen this?</p>\n\n<p>I've checked all the obvious stuff like \"is the PDB file being generated?\" -- yes, it is. If I run the service project by itself, then hit it with some test client, breakpoints get hit correctly. So debugging on the service works. I can even explictly \"attach to remote process\" and debug the service that way. But WCF will not automatically step from the client to the service. Has anyone seen a similiar issue?</p>\n"},{"tags":["wcf","iis","authentication"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":11104,"score":2,"question_id":914302,"title":"Integrated Windows Authentication in WCF on IIS 6.0","body":"<p>I need to implement Integrated Windows Authentication for a WCF service hosted on IIS 6.0 (Windows Server 2003) <em>without certificates</em>. The requirement is to simply authenticate Windows Credentials of users within a particular Active Directory group when they hit the service. The Framework version being used is 3.0.</p>\n\n<p><strong>WCF Configuration:</strong></p>\n\n<p>The following is the \"bindings\" portion of the web.config file for the service:</p>\n\n<pre><code>&lt;bindings&gt;\n&lt;basicHttpBinding&gt;\n&lt;binding name=\"Binding1\"&gt;\n\t&lt;security mode=\"TransportCredentialOnly\"&gt;\n\t&lt;transport clientCredentialType=\"Windows\" /&gt;\n\t&lt;/security&gt;\n&lt;/binding&gt;\n&lt;/basicHttpBinding&gt;\n\n&lt;/bindings&gt;\n</code></pre>\n\n<p>There is <em>no</em> \"mex\" endpoint.</p>\n\n<p>Even though the virtual directory's as well as the .svc file's security settings have \"Integrated Windows Authentication\" selected in IIS, the following error occurs when the .svc file is navigated to:</p>\n\n<blockquote>\n  <p>Security settings for this service require Windows Authentication but it is not enabled for the IIS application that hosts this service.</p>\n</blockquote>\n\n<p>The following are the other details of the hosting of the service:</p>\n\n<ul>\n<li>The service runs under a separate App Pool</li>\n<li>The App Pool is running under a separate privileged account configured under the \"Identity\" tab of the App Pool.</li>\n</ul>\n\n<p>I have seen numerous other questions along these lines, but none of the fixes actually rectifies this problem. Your inputs would be greatly appreciated.</p>\n"},{"tags":["wcf","triggers","clr",".net-assembly","sql-server-2012"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":358,"score":2,"question_id":10502543,"title":"MSSQL 2012 creating CLR triggers for WCF fails","body":"<p>I've created system that uses CLR triggers to connect to WCF server and notify it about changes in DB.\nIt runs ok on SQL server 2008 R2.\nNow im trying to migrate on SQL Server 2012.\nTo use WCF i need to load SMDiagnostics.dll assembly along the others.\nIve checked that clr is enabled in db , and set trustworthy to be \"on\", ive disabled WCF debuging, ive checked that SQL server runs under Local System account so there is no problems with permissions.\nNow my problem is that when i run following command</p>\n\n<pre><code>IF  NOT EXISTS (SELECT * FROM sys.assemblies asms WHERE asms.name = N'SMdiagnostics')\ncreate assembly [SMdiagnostics]\nfrom  'C:\\Windows\\Microsoft.NET\\Framework\\v3.0\\Windows Communication        Foundation\\SMdiagnostics.dll'\nwith permission_set = unsafe\ngo\n</code></pre>\n\n<p>i receive following error </p>\n\n<blockquote>\n  <p>Warning: The Microsoft .NET Framework assembly 'smdiagnostics,\n  version=3.0.0.0, culture=neutral, publickeytoken=b77a5c561934e089,\n  processorarchitecture=msil.' you are registering is not fully tested\n  in the SQL Server hosted environment and is not supported. In the\n  future, if you upgrade or service this assembly or the .NET Framework,\n  your CLR integration routine may stop working. Please refer SQL Server\n  Books Online for more details. Msg 6586, Level 16, State 1, Line 2\n  Assembly 'SMdiagnostics' could not be installed because existing\n  policy would keep it from being used.</p>\n</blockquote>\n\n<p>SMdiagnostics.dll exists at specified path.\nAs i understand its some kind of policy in SQL server 2012 or in GAC, however i cant find no policies about SMdiagnostics.\nAny ideas how to solve it?\nThanks.</p>\n"},{"tags":["wcf",".net-4.0","iis-7.5","net.tcp"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1396,"score":0,"question_id":8070463,"title":"IIS-hosted WCF service with net.tcp binding unreachable","body":"<p>I'm trying to host a WCF service with net.tcp binding within an IIS 7.5 site on Windows 7, 64-bit.  Sadly, the service is unreachable.  In fact, opening a connection to the TCP port using telnet even fails.</p>\n\n<p>Here's what my system.serviceModel section of the web.config for the site looks like:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"DefaultServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2000000\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"DefaultServiceBehavior\" \n               name=\"FooService\"&gt;\n        &lt;endpoint binding=\"netTcpBinding\" bindingConfiguration=\"service\" \n                  name=\"service\" contract=\"IFoo\" /&gt;\n        &lt;endpoint binding=\"mexTcpBinding\" \n                  bindingConfiguration=\"DuplexBinding\" contract=\"IFoo\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"net.tcp://127.0.0.1:9000/service\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;netTcpBinding&gt;\n        &lt;binding name=\"service\" portSharingEnabled=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" \n                        maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" \n                        maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"/&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"DuplexBinding\"&gt;\n          &lt;reliableSession enabled=\"true\"/&gt;\n          &lt;security mode=\"None\"/&gt;\n        &lt;/binding&gt;\n      &lt;/netTcpBinding&gt;\n    &lt;/bindings&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>In IIS Manager, I set up a site with an App Pool running under the identity of NETWORK SERVICE, with the v4.0 .NET Framework and an integrated pipeline.  There is one binding for the site with a type of <code>net.tcp</code> and \"Binding Information\" set to <code>9000:*</code>.</p>\n\n<p>Under my computer's services, I started the previously stopped \"Net.Tcp Listener Adapter\" and \"Net.Tcp Port Sharing Service\" services and made them both start up automatically.  I also ensured that \"Windows Communication Foundation Non-HTTP Activation\" was installed.</p>\n\n<p>What else do I have to do to get IIS/WCF/WAS/whatever to listen on port 9000 so my service can be activated and invoked?</p>\n\n<p><em>My question is similar to <a href=\"http://stackoverflow.com/questions/7181011/host-wcf-service-with-net-tcp-binding-through-iis-manager-7-5\">Host WCF service with net.tcp binding through IIS Manager 7.5</a>, but the OP was not registered, and his question was not answered.  I'm opening this question so I can post my own details.</em></p>\n\n<p><strong>Update</strong></p>\n\n<p>I've found some additional clues.  I decided to add a second binding so I can work with HTTP bindings while trying to figure out the net.tcp issues.  Now, when I try to access the HTTP endpoint, I get this error</p>\n\n<blockquote>\n  <p>Could not find a base address that matches scheme net.tcp for the endpoint with binding NetTcpBinding. Registered base address schemes are [http]</p>\n</blockquote>\n\n<p>I very clearly <em>have</em> bindings for both HTTP and net.tcp here:</p>\n\n<pre><code>&lt;baseAddresses&gt;\n    &lt;add baseAddress=\"net.tcp://localhost:9000/\"/&gt;\n    &lt;add baseAddress=\"http://localhost:8050/\"/&gt;\n&lt;/baseAddresses&gt;\n</code></pre>\n\n<p>So the phrase \"Registered base address schemes\" has me worried; is there something additional I have to do to allow my site to support the net.tcp scheme?</p>\n"},{"tags":["wcf","wcf-security","wif","federated-identity"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13129938,"title":"Active Federation in .NET 4.5","body":"<p>I have following scenario:\nthere is a client - Console or WPF application and a WCF service. They should use STS for authentication. I have already STS server. \nThe problem is that I can't find any example for my scenario for .NET 4.5 and WIF (which now part of .NET). There are examples for .NET 3.5 and old WIF but they don't work in 4.5. Could you please give me an example how to configure client application and WCF service so that they automatically call STS service for authentication (client requests token, service calls STS for validating token) without manually programming calls to STS?</p>\n"},{"tags":["c#","wcf",".net-4.0"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13120433,"title":"WCF service library : BadImageFormatException with 32 bit dll","body":"<p>My project Structure looks like this:</p>\n\n<pre><code> myApp \n --&gt;WCFSerLib (Any CPU Deafult application) \n --&gt;ClassLib1 (Any CPU)\n --&gt;ClassLib2 (x86)\n</code></pre>\n\n<p>When I try to execute my application Unfortuantely am getting this below error.</p>\n\n<pre><code> System.BadImageFormatException was unhandled by user code\n</code></pre>\n\n<p>Is there anyway such that I can achieve the above?</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13128942,"title":"How can I return a text error message in IIS-hosted WCF service for all responses which are not HTTP 200?","body":"<p>I am writing a WCF service which will be hosted in IIS over HTTP. I wish for all responses which are not HTTP 200 (e.g., 404, 500) to have a Content-Type of <code>text/plain</code> and the response body a text message.</p>\n\n<p>How can I achieve this?</p>\n"},{"tags":["c#",".net","visual-studio-2010","wcf","wsdl"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13128174,"title":"Contract-first WCF services - still valid?","body":"<p>I am attempting to create a few WCF web services from existing WSDLs.  There are a few awesome questions on SO for this, (<a href=\"http://stackoverflow.com/questions/950150/how-to-use-a-wsdl-file-to-create-a-wcf-service-not-make-a-call\">1</a>, <a href=\"http://stackoverflow.com/questions/1221121/generate-webservice-from-wsdl\">2</a>, definitely more) but many of these are from 3 years ago, and I end up wondering if the advice is still valid.  If it is, how do I finish integrating it into a WCF project in Visual Studio 2010?  The questions and linked blog posts are considerably mum about how one configures a .svc to use the converted WSDL after it's been run through <code>svchost.exe</code> (see linked question 1 for details on that), and a <a href=\"http://blogs.msdn.com/b/dotnetinterop/archive/2008/09/24/wsdl-first-development-with-wcf.aspx\" rel=\"nofollow\">blog post</a> linked in the thread suggests there is a way to make Visual Studio create a .svc around a converted WSDL, but I cannot find this anywhere in either the program's interface or the documentation.</p>\n\n<p>So, the question, I suppose, would be: What is the generally recommended way to approach contract-first web service design in Visual Studio 2010/.NET 4.0?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13127484,"title":"Need few basic info regarding wcf program","body":"<p>i am newbie in wcf. i have few question regarding wcf and those are....\n1) can we write line in web.config for multiple binding for any wcf program. we know that we define endpoint in web.config like </p>\n\n<pre><code>&lt;endpoint address=\"TestWcfService\" binding=\"wsHttpBinding\"  contract=\"TestWcfService.IService\"/&gt;\n</code></pre>\n\n<p>so i just need to know can we define multiple endpoint for single wcf service. one with HttpBinding one with tcp binding etc. if possible then can anyone give me sample web.config code for that.</p>\n\n<p>2) wcf duplex pattern is possible for asp.net because callback method call invoke at client side.so if asp.net consume then any method can be invoke for call back.</p>\n\n<p>3) with duplex pattern can we fire any event at client side instead of firing any callback method.</p>\n\n<p>4) why this below endpoint is require. what does it means and what is the importance of the below endpoint....plzz clarify. if i do not specify this mex endpoint then what could be the problem.</p>\n\n<pre><code>&lt;endpointcontract=\"IMetadataExchange\"\n</code></pre>\n\n<p>binding=\"mexHttpBinding\"\naddress=\"mex\" /></p>\n\n<p>thanks</p>\n"},{"tags":["c#","wcf","c#-4.0","datetime"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13127071,"title":"WCF Service method is failing since UK Daylight Savings Time ended on Sunday","body":"<p>I have a number of Windows Mobile PDAs that are all communicating with a central server. Since Sunday, every PDA has failed to update. The method it's failing on is the first step of my sync service which calls:</p>\n\n<pre><code>ServerTimeContract timeContract = Service.GetServerDateTime();\n</code></pre>\n\n<p>The code on the WCF side is:</p>\n\n<pre><code>public ServerTimeContract GetServerDateTime()\n{\n    DateTime now = DateTime.Now;\n    return new ServerTimeContract(now.ToUniversalTime(), \n        now.IsDaylightSavingTime());\n}\n</code></pre>\n\n<p>For completeness, this is the <code>ServerTimeContract</code>:</p>\n\n<pre><code>[Serializable]\n[DataContract]\npublic class ServerTimeContract\n{\n    [DataMember(IsRequired = true, EmitDefaultValue = false)]\n    public DateTime DateTime { get; private set; }\n    [DataMember(IsRequired = true, EmitDefaultValue = false)]\n    public bool IsDaylightSavings { get; private set; }\n\n    public ServerTimeContract(DateTime dateTime, bool isDaylightSavings)\n    {\n        DateTime = dateTime;\n        IsDaylightSavings = isDaylightSavings;\n    }\n}\n</code></pre>\n\n<p>If I change the date to the 27/10/2012 on my PC and run the above code, then it works fine. If I change the Date back to today's today, I get an exception saying \"The underlying connection was closed: The connection was closed unexpectedly\". </p>\n\n<p>The PDAs throw the error \"Unable to read data from the transport connection\".</p>\n\n<p>What's even more bizarre, is if I change the return method to always pass <code>true</code> in the second constructor argument, everything works:</p>\n\n<pre><code>public ServerTimeContract GetServerDateTime()\n{\n    DateTime now = DateTime.Now;\n    return new ServerTimeContract(now.ToUniversalTime(), true);\n}\n</code></pre>\n"},{"tags":["wcf","security","rest","asp.net-web-api","servicestack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13127414,"title":"file streaming sensitive data","body":"<p>I am looking for options to build a service to upload files(sensitive data) from the client over the internet. \nI googled on this topic and looks like I found these are the options.</p>\n\n<ol>\n<li>WCF REST with message based security and https</li>\n<li>ASP.net Web-API</li>\n<li>ServiceStack\nCould you please let me know if I am on right track? Any suggestions or links would be appreciated.</li>\n</ol>\n\n<p>Thank you.</p>\n"},{"tags":["java",".net","wcf","soap","wsdl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13127002,"title":"How to connect to a .Net WCF MS-LWSSP SOAP service from Java (JRuby)?","body":"<p>I'm working with a client that's on a currently purely-MRI Ruby/Rails stack, but we have a 3'rd party service we need to start interfacing with that is built on .Net with WCF and the only way to access it is SOAP. They are using MS-LWSSP (<a href=\"http://msdn.microsoft.com/en-us/library/dd357239%28prot.20%29.aspx\" rel=\"nofollow\">MS documentation</a>) as a security protocol and none of the Ruby SOAP libraries seem to understand how to connect to it.</p>\n\n<p>We are considering adding JRuby to the tech stack (as a separate small application) to connect to this service, as Java has offers more choices for dealing with SOAP. However, I'm not familiar with any of the Java SOAP libraries.</p>\n\n<p>I have seen some other posts about using a Java client to connect to a .Net SOAP service, but I have not seen any specifically addressing using this security protocol. Their SOAP service is SOAP version 1.2 and it does have a WSDL we can access.</p>\n\n<p>Has anyone done this? Could you please provide me with information about what libraries would be helpful in doing so?</p>\n\n<p>Thank you very much for any suggestions or information.</p>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3224,"score":2,"question_id":4969687,"title":"Additional/Optional query string parameters in URI Template in WCF","body":"<p>I have written a simple REST Service in WCF in which I have created 2 method using same URI Template but with different Method(POST and GET). For GET method I am also sending additional query parameters as follows:</p>\n\n<pre><code>    [WebInvoke(Method = \"POST\", UriTemplate = \"users\")]\n    [OperationContract]\n    public bool CreateUserAccount(User user)\n    {\n        //do something\n        return restult;\n    }\n\n    [WebGet(UriTemplate = \"users?userid={userid}&amp;username={userName}\")]\n    [OperationContract]\n    public User GetUser(int userid, string userName)\n    {\n       // if User ID then \n       //   Get User By UserID\n       //else if User Name then \n       //   Get User By User Name\n       //if no paramter then do something\n\n    }\n</code></pre>\n\n<p>when I call CreateUserAccount with method POST it is working fine but when I call GetUser method using GET and sending only one query string parameter(userID or UserName) it is giving error \"HTTP Method not allowed\" but if send both parameters its wokrs fine. </p>\n\n<p>Can anyone help me?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13126520,"title":"WCF: NetTcpBinding and security mode none","body":"<p>i wrote a small WCF apps which works fine in same pc when i do not specify anything for security mode but when i try same apps in two pc at my home then WCF client can not communicate with WCF server but when i change the code bit like </p>\n\n<pre><code>new NetTcpBinding(SecurityMode.None)\n</code></pre>\n\n<p>then all started work when i test it on two PC at my how.</p>\n\n<p>so my question is when there will be some kind of security like below</p>\n\n<pre><code>    new NetTcpBinding(SecurityMode.MessageNone);\n    new NetTcpBinding(SecurityMode.Transport);\n    new NetTcpBinding(SecurityMode.TransportWithMessageCredential);\n</code></pre>\n\n<p>then how could i run WCF client &amp; server on different PC. turn off the security is not good way to solve the problem...there must be some way out. so please tell me what i need to configure in both the machine where WCF server &amp; client both run. if i need to change in code then what change i need to do. thanks</p>\n"},{"tags":["c#","wcf","web-services","iis","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13123861,"title":"Error in Protocol Mapping While hosting a WCF service in IIS","body":"<p>I developed a simple WCF service with VS 2010. And i hosted in the default website in IIS by Adding Application and set the Physical Path</p>\n\n<p>And i tried to browse the .svc file it gives me the following error:</p>\n\n<p>\"<em>The configuration section 'protocolMapping' cannot be read because it is missing a section declaration</em>\"</p>\n\n<p><img src=\"http://i.stack.imgur.com/jE2m6.png\" alt=\"Protocol Mapping Error\"></p>\n\n<p>and I tried many solutions but it doesn't work</p>\n\n<p>I Created WCF Service Library has an App.config with this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" /&gt;\n  &lt;/system.web&gt;\n  &lt;!-- When deploying the service library project, the content of the config file must be added to the host's \n  app.config file. System.Configuration does not support config files for libraries. --&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"EvalServiceLibrary.EvalService\"&gt;\n        &lt;clear /&gt;\n        &lt;endpoint address=\"basic\" binding=\"basicHttpBinding\" contract=\"EvalServiceLibrary.IEvalService\"\n          listenUriMode=\"Explicit\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n            &lt;certificateReference storeName=\"My\" storeLocation=\"LocalMachine\"\n              x509FindType=\"FindBySubjectDistinguishedName\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"\n          listenUriMode=\"Explicit\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n            &lt;certificateReference storeName=\"My\" storeLocation=\"LocalMachine\"\n              x509FindType=\"FindBySubjectDistinguishedName\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"ws\" binding=\"wsHttpBinding\" contract=\"EvalServiceLibrary.IEvalService\"\n          listenUriMode=\"Explicit\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n            &lt;certificateReference storeName=\"My\" storeLocation=\"LocalMachine\"\n              x509FindType=\"FindBySubjectDistinguishedName\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"net.tcp://localhost:8888/evalservice\" binding=\"netTcpBinding\"\n          contract=\"EvalServiceLibrary.IEvalService\" listenUriMode=\"Explicit\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n            &lt;certificateReference storeName=\"My\" storeLocation=\"LocalMachine\"\n              x509FindType=\"FindBySubjectDistinguishedName\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"net.pipe://localhost/evalservice\" binding=\"netNamedPipeBinding\"\n          bindingConfiguration=\"\" contract=\"EvalServiceLibrary.IEvalService\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8080/evalservice\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, \n          set the values below to false before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\" httpsGetEnabled=\"True\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, \n          set the value below to true.  Set to false before deployment \n          to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>and i Hosted the WCF Service Library application in WCF website (My Client) has an Web.config with this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"false\" targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"EvalServiceLibrary.EvalService\"&gt;\n        &lt;endpoint address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"\" contract=\"EvalServiceLibrary.IEvalService\" /&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" bindingConfiguration=\"\" contract=\"IMetadataExchange\" /&gt;\n        &lt;endpoint address=\"basic\" binding=\"basicHttpBinding\" bindingConfiguration=\"\" contract=\"EvalServiceLibrary.IEvalService\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the values below to false before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;protocolMapping&gt;\n      &lt;add binding=\"basicHttpsBinding\" scheme=\"https\" /&gt;\n    &lt;/protocolMapping&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n    &lt;!--\n        To browse web app root directory during debugging, set the value below to true.\n        Set to false before deployment to avoid disclosing web app folder information.\n      --&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","wcf","security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":107,"score":1,"question_id":3954017,"title":"Verifying remote program integrity/validity as part of WCF service security","body":"<p>I have an application running on remote systems. The remote systems are an embedded computer built into a kiosk. As a result, they are somewhat \"untrusted,\" in that the physical security for them is rather lax. However, these kiosks can be credit card processing, etc. via a WCF service to my server.</p>\n\n<p>Using machine certificates, etc., I can verify that the client is who they say they are, which protects against someone copying my binaries off of the kiosk somehow and then running it on their own machine. However, how can I prevent against the following two attacks:</p>\n\n<ul>\n<li>Someone takes the binary, modifies it maliciously, and then runs it on the system</li>\n<li>Someone decompiles my application, and using parts of my code (such as where I reference certificates or shared secrets) writes their own application, and runs it on the machine.</li>\n</ul>\n\n<p>Obviously I have taken steps using the operating system to prevent against these sort of attacks, but I need a way at the server to ensure that it is not being duped.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["wcf","security","firewall","dmz"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":15,"score":-1,"question_id":13123035,"title":"Security concerns for putting a WCF based server outside firewall","body":"<p>We've built a small service that passes messages for client machines. The service was developed with WCF and we use <em>Windows Security</em> to leverage active directory trust to manage identities. Basically the server will reject a client if it's from a domain that is not trusted by where the domain where the server is located. </p>\n\n<p>There's a new requirement: it's important that the server can handle client requests from outside the firewall. </p>\n\n<p>We thought about taking the server, remove the security from the binding so the trust won't be an issue, and place it outside the firewall. Is that a reasonable option? If not: why, and what are our alternatives?</p>\n"},{"tags":["wcf","silverlight-3.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":7866304,"title":"wcf class library cross domain exception","body":"<p>before i start i should say that i use silverlight3 and .Net 3.5.\ni have a wcf class library with some methods in it and i've added it to a silverlight class library(to add the wcf class library,first i added the entire my wcf class library project to the silverlight class library solution and then i add a service reference of wcf class library to my silverlight class library),imagine that the output of the silverlight class library is a usercontrol so i added the class library to a silverlight Application(my main project) as a service refrence to use the usercontrol But when the application wants to instantiate the usercontrol is throw an exception</p>\n\n<blockquote>\n  <p>An error occurred while trying to make a request to URI 'http://localhost:8732/Design_Time_Addresses/GalleryShopWCFService/GalleryShopService/'. This could be due to attempting to access a service in a cross-domain way without a proper cross-domain policy in place, or a policy that is unsuitable for SOAP services. You may need to contact the owner of the service to publish a cross-domain policy file and to ensure it allows SOAP-related HTTP headers to be sent. This error may also be caused by using internal types in the web service proxy without using the InternalsVisibleToAttribute attribute. Please see the inner exception for more details.</p>\n</blockquote>\n\n<p>i know that i should have a cleintaccesspolicy.xml file but i don't know where.</p>\n"},{"tags":["c#","wcf","ierrorhandler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13123958,"title":"Error while implementing IErrorHandler - Cannot add the behavior extension","body":"<p>I was using these two articles as a reference to implement IErrorHandler:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3036692/ierrorhandler-doesnt-seem-to-be-handling-my-errors-in-wcf-any-ideas\">ErrorHandler doesn't seem...</a></p>\n\n<p><a href=\"http://www.neovolve.com/post/2008/04/07/implementing-ierrorhandler.aspx\" rel=\"nofollow\">Roy Primrose's blog post</a></p>\n\n<p><strong>(I'm using .net Framework 3.5.)</strong></p>\n\n<p>However, I am having a bit trouble - whenever I try to start the service, I get following error:</p>\n\n<p><em>System.Configuration.ConfigurationErrorsException: Cannot add the behavior extension 'errorHandlerExtension' to the service behavior named 'Test.TestService.Service1Behavior' because the underlying behavior type does not implement the IServiceBehavior interface.</em> </p>\n\n<p>Here are my code and config files:</p>\n\n<p><strong>ErrorhandlerExtension.cs:</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.ServiceModel.Configuration;\nusing System.Configuration;\nusing System.ServiceModel;\nusing System.ServiceModel.Channels;\nusing System.ServiceModel.Description;\nusing System.ServiceModel.Dispatcher;\nusing System.Collections.ObjectModel;\n\nnamespace Test.TestService\n{\nclass ErrorHandlerExtension:BehaviorExtensionElement,IServiceBehavior\n{\n    public override Type BehaviorType\n    {\n        get { return typeof(ErrorHandler); }\n    }\n    protected override object CreateBehavior()\n    {\n        return new ErrorHandler();\n    }\n    void IServiceBehavior.AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection&lt;ServiceEndpoint&gt; endpoints, BindingParameterCollection bindingParameters)\n    {\n\n    }\n    private IErrorHandler GetInstance()\n    {\n        return new ErrorHandler();\n    }\n    void IServiceBehavior.ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)\n    {\n        IErrorHandler errorHandlerInstance = GetInstance();\n        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)\n        {\n            dispatcher.ErrorHandlers.Add(errorHandlerInstance);\n        }\n    }\n\n    void IServiceBehavior.Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)\n    {\n        foreach (ServiceEndpoint endpoint in serviceDescription.Endpoints)\n        {\n            if (endpoint.Contract.Name.Equals(\"IMetadataExchange\") &amp;&amp;\n                endpoint.Contract.Namespace.Equals(\"http://schemas.microsoft.com/2006/04/mex\"))\n                continue;\n\n            foreach (OperationDescription description in endpoint.Contract.Operations)\n            {\n                if (description.Faults.Count == 0)\n                {\n                    throw new InvalidOperationException(\"FaultContractAttribute not found on this method\");\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong> web.config:</strong></p>\n\n<pre><code>&lt;system.serviceModel&gt;  \n  &lt;extensions&gt;\n      &lt;behaviorExtensions&gt;\n        &lt;add name=\"errorHandlerExtension\"\n          type=\"Test.TestService.ErrorHandlerExtension, Test.TestService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\" /&gt;\n      &lt;/behaviorExtensions&gt;\n    &lt;/extensions&gt;\n\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"Test.TestService.Service1Behavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;errorHandlerExtension /&gt;\n       &lt;/behavior&gt;\n     &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Whenever I get rid of the errorHandlerExtension / element, the service works fine, but it fails to start whenever I include errorHandlerExtension element (with the error). I'm new to WCF and quite stumped. Any ideas?</p>\n\n<p>edit: added <strong>ErrorHandler.cs</strong>:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.ServiceModel;\nusing System.ServiceModel.Channels;\nusing System.ServiceModel.Description;\nusing System.ServiceModel.Dispatcher;\nusing System.Collections.ObjectModel;\n\nnamespace Test.TestService\n{\npublic class ErrorHandler:IErrorHandler\n{\n\n    public bool HandleError(Exception error)\n    {\n\n        LogError(\"UnhandledError: \"+ error);\n        return true;\n    }\n\n    public void ProvideFault(Exception error, MessageVersion version, ref Message fault)\n    {\n        FaultException faultException = new FaultException(\"Exception message:ProvideFault\");\n        MessageFault messageFault = faultException.CreateMessageFault();\n        fault = Message.CreateMessage(version, messageFault, faultException.Action);\n    }\n\n}\n}\n</code></pre>\n"},{"tags":["vb.net","wcf","web-services","soap","siebel"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":13014992,"title":"How do I add a header to a VB.NET 2008 SOAP request?","body":"<p>I have a VB.NET 2008 program that accesses a Siebel web service defined by a WSDL and using the SOAP protocol.</p>\n\n<p>The Siebel web service requires that a header containing the username, password and session type be included with the service request, but the header is not defined in the WSDL.</p>\n\n<p>So, when I test the WSDL using the soapUI utility, the request as defined by the WSDL looks like this:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:lov=\"http://www.siebel.com/xml/LOVService\" xmlns:lis=\"http://www.siebel.com/xml/ListQuery\"&gt;\n&lt;soapenv:Header/&gt;\n   &lt;soapenv:Body&gt;\n      &lt;lov:EAILOVGetListOfValues_Input&gt;\n         &lt;lis:ListsQuery&gt;\n            &lt;lis:ListQuery&gt;\n               &lt;lis:Active&gt;Y&lt;/lis:Active&gt;\n               &lt;lis:LanguageCode&gt;ENU&lt;/lis:LanguageCode&gt;\n               &lt;lis:Type&gt;CUT_ACCOUNT_TYPE&lt;/lis:Type&gt;\n            &lt;/lis:ListQuery&gt;\n         &lt;/lis:ListsQuery&gt;\n      &lt;/lov:EAILOVGetListOfValues_Input&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>But the above does not work because it contains an empty header that is missing user and session credentials. It only works if I manually replace <code>&lt;soapenv:Header/&gt;</code> with a header containing the username, password, and session type as follows:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:lov=\"http://www.siebel.com/xml/LOVService\" xmlns:lis=\"http://www.siebel.com/xml/ListQuery\"&gt;\n&lt;soapenv:Header&gt;\n  &lt;UsernameToken xmlns=\"http://siebel.com/webservices\"&gt;TESTUSER&lt;/UsernameToken&gt;\n  &lt;PasswordText xmlns=\"http://siebel.com/webservices\"&gt;TESTPASSWORD&lt;/PasswordText&gt;\n  &lt;SessionType xmlns=\"http://siebel.com/webservices\"&gt;None&lt;/SessionType&gt;\n&lt;/soapenv:Header&gt;\n   &lt;soapenv:Body&gt;\n      &lt;lov:EAILOVGetListOfValues_Input&gt;\n         &lt;lis:ListsQuery&gt;\n            &lt;lis:ListQuery&gt;\n               &lt;lis:Active&gt;Y&lt;/lis:Active&gt;\n               &lt;lis:LanguageCode&gt;ENU&lt;/lis:LanguageCode&gt;\n               &lt;lis:Type&gt;CUT_ACCOUNT_TYPE&lt;/lis:Type&gt;\n            &lt;/lis:ListQuery&gt;\n         &lt;/lis:ListsQuery&gt;\n      &lt;/lov:EAILOVGetListOfValues_Input&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>My problem is that I cannot sort out how to translate the above into VB.NET 2008 code.</p>\n\n<p>I have no problem importing the WSDL into Visual Studio 2008, defining the service in VB code and referencing the web service methods. However, I cannot sort out how to define the web service in VB such that the updated header in included in the web service request instead of the empty header. Consequently all my service requests from VB fail.</p>\n\n<p>I can define a class that inherits from the SoapHeader class...</p>\n\n<pre><code>Public Class MySoapHeader : Inherits System.Web.Services.Protocols.SoapHeader\n    Public Username As String\n    Public Password As String\n    Public SessionType As String\nEnd Class\n</code></pre>\n\n<p>...but how do I include this header in the SOAP request made from VB?</p>\n\n<p>The sample code I am using to test this is a simple form with a button and a list box.</p>\n\n<pre><code>Public Class Form1\n\n    Private Sub btnGetLOV_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGetLOV.Click\n\n        Dim MyService As New wsLOV.EAILOVPortClient\n\n        Dim MyInput As New wsLOV.EAILOVGetListOfValues_Input\n        Dim MyParams(0) As wsLOV.ListQuery\n        Dim temp As New wsLOV.ListQuery\n\n        Dim MyResult As New wsLOV.EAILOVGetListOfValues_Output\n\n        temp.Active = \"Y\"\n        temp.Type = \"CUT_ACCOUNT_TYPE\"\n        temp.LanguageCode = \"ENU\"\n        MyParams(0) = temp\n\n        MyInput.ListsQuery = MyParams\n\n        Dim MyRequest As New wsLOV.EAILOVGetListOfValuesRequest(MyInput)\n        MyResult = MyService.EAILOVGetListOfValues(MyInput)\n\n\n    End Sub\n\nEnd Class\n</code></pre>\n\n<p>The code fails on the last line of the subroutine with a message indicating that the request has not been authenticated (Error Code: 10944642 Error Message: Error: Inbound SOAP Message - Session Token is missing or invalid or has expired) which is the same error I get in soapUI when I leave off the header containing username, password, and session type.</p>\n\n<p>I believe I need to add the header to the endpoint (per <a href=\"http://msdn.microsoft.com/en-us/library/ms731749.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ms731749.aspx</a> and <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.configuration.serviceendpointelement.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/system.servicemodel.configuration.serviceendpointelement.aspx</a>) but I am not sure how to do this in VB.</p>\n"},{"tags":["wcf","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13124439,"title":"WCF - Metadata contains a reference that cannot be resolved","body":"<p>I have added 3 classes to my code</p>\n\n<pre><code>public class AttributeType\n    {\n        public int Id { get; set; }\n        [Required]\n        public string Name { get; set; }\n        public virtual ICollection&lt;AttributeValue&gt; AttributeValues { get; set; }\n    }\npublic class AttributeValue\n    {\n        public int Id { get; set; }\n        [Required]\n        public int AttributeTypeId { get; set; }\n        [Required]\n        public string Name { get; set; }\n        public virtual ICollection&lt;ItemAttributeLink&gt; ItemAttributeLinks { get; set; }\n    }\npublic class ItemAttributeLink\n    {\n        public int Id { get; set; }\n        [Required]\n        public int AttributeValueId { get; set; }\n        [Required]\n        public int ItemId { get; set; }\n    }\n</code></pre>\n\n<p>And have modified an existing object (only the last line has been added)</p>\n\n<pre><code>public class Item:DateClass\n    {\n        public int Id { get; set; }\n        public string Title { get; set; }\n        public string Description { get; set; }\n        public string Notes { get; set; }\n        public string ConditionReport { get; set; }\n        public Guid OwnerReference { get; set; }\n        public string MainImage { get; set; }\n        public decimal PresaleEstimateLow { get; set; }\n        public decimal PresaleEstimateHigh { get; set; }\n        public string Creator { get; set; }\n        public string ArtistMaker { get; set; }\n        public virtual ICollection&lt;Detail&gt; Details { get; set; }\n        public virtual ICollection&lt;ItemAttributeLink&gt; ItemAttributeLinks { get; set; }\n    }\n</code></pre>\n\n<p>I have a data service configuration object <code>DataServiceConfiguration config</code>.  I have added these 3 lines of code too</p>\n\n<pre><code>config.SetEntitySetAccessRule(\"AttributeTypes\", EntitySetRights.All);\n            config.SetEntitySetAccessRule(\"AttributeValues\", EntitySetRights.All);\n            config.SetEntitySetAccessRule(\"ItemAttributeLinks\", EntitySetRights.All);\n</code></pre>\n\n<p>For some reason when I update my service reference in a project that uses this code I get an error</p>\n\n<pre><code>Metadata contains a reference that cannot be resolved\n</code></pre>\n\n<p>Am I doing something wrong?</p>\n"},{"tags":[".net","wcf","c#-3.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13120586,"title":"Consuming REST Service with WCF - Basic Authentication","body":"<p>I'm trying to consume a REST service with Basic Authentication with an odd problem. The first request made does not include the basic authentication credentials specified. This happens for every first request made. It happens every time the application starts. It does not happen for subsequent requests. I am using the <code>ClientBase&lt;T&gt;</code> class to call the API, which looks something like this:</p>\n\n<pre><code>public class MyApi : ClientBase&lt;IMyApi&gt;\n{\n    protected override IMyApi CreateChannel()\n    {\n        //Remove all client credentials. \n        ChannelFactory.Endpoint.Behaviors.RemoveAll&lt;ClientCredentials&gt;();\n\n        //Create new client credentials and add to the endpoint behaviours.\n        ClientCredentials clientCredentials = new ClientCredentials();\n        clientCredentials.UserName.UserName = Username;\n        clientCredentials.UserName.Password = Password;\n        ChannelFactory.Endpoint.Behaviors.Add(clientCredentials);\n\n        return base.CreateChannel();\n    }\n\n    public MyApi() : base (DefaultEndpointName)\n    {}\n}\n</code></pre>\n\n<p>My binding is setup as follows:</p>\n\n<pre><code>  &lt;customBinding&gt;        \n    &lt;binding name=\"myApiBinding\"&gt;\n      &lt;webMessageEncoding webContentTypeMapperType=\"ContentTypeMapper,Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\" /&gt;\n      &lt;httpTransport manualAddressing=\"true\" maxReceivedMessageSize=\"6553600\" authenticationScheme=\"Basic\" realm=\"myRealm\" /&gt;\n    &lt;/binding&gt;\n  &lt;/customBinding&gt;\n</code></pre>\n\n<p>I have tried bumping the project up to .Net 4, adding the client credentials after initialising the API, but none seem to have the desired the effect.</p>\n\n<p>Is there a way to get the credentials added for every request?</p>\n"},{"tags":["c#","wcf","service","address","endpoint"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13122652,"title":"How to host a WCF Service in IIS Programatically?","body":"<p>I have a WCF 3.0 service which has been configured in the web.config of my web application where it's hosted via an .svc file:</p>\n\n<pre><code>&lt;endpoint address=\"https://domain.co.uk/services/accountservice\"\n             binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IAccountService\"\n             contract=\"AccountServiceReference.IAccountService\"\n             name=\"BasicHttpBinding_IAccountService\" /&gt;\n</code></pre>\n\n<p>The address value shouldn't be in plain text in the web.config as we'd like to encrypt it with an encryption algorithm that we have and only storing the encrypted value there.</p>\n\n<p>How would that be possible?</p>\n\n<p>I was thinking perhaps I should programmatically be hosting the WCF service in our IIS so that the address can be set at runtime by reading the EncryptedAddress value from an AppSetting then decrypting it at runtime?</p>\n\n<p>How would that be possible?</p>\n\n<p>Thanks,</p>\n"},{"tags":["c#",".net","xml","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":65,"score":-2,"question_id":13122597,"title":"how to read xml data and return xml data in c# .net using wcf service","body":"<p>i have got a task, service should to be accept XML data and after reading details should gets loaded in to database based on the data we need to respond back to the application as XML, this is to be perform in wcf service using c#, i am new to this web services,wcf service, can any one help me out?</p>\n"},{"tags":["wcf","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13119159,"title":"wcf call from $.ajax does not work in chrome","body":"<p>I have peculiar problem trying to consume a simple WCF service from jquery. See the code below:</p>\n\n<p><code>\n$(document).ready(function () {\n    // Initialize the carousel on the header part of the page\n    $(\"#myCarousel\").carousel({\n        interval: 2000\n    });</p>\n\n<pre><code>// The handler for the submit button (login form)\n$(\"#submit\").click(function () {\n    var sendData = '{\"username\": \"' + \n                     $(\"#usernameTB\").val() + \n                   '\", \"password\": \"' + \n                     CryptoJS.MD5($(\"#passwordTB\").val()) + \n                   '\"}';\n\n    $.ajax(\"Services/LoginUser.svc/Login\", {\n        cache: false,\n        type: \"POST\",\n        data: sendData,\n        contentType: \"application/json; charset=utf-8\",\n        dataType: \"json\",\n        processData: true,\n        complete: ServiceCompleted\n    });\n});\n</code></pre>\n\n<p>});\nfunction ServiceCompleted(data) {\n    alert(\"Response: \" + data.responseText);\n}\n</code></p>\n\n<p>When I use this code from IE, it works like a charm, that is, the call is executed and returns what I expect, see the below fiddler dumps of the request / response:</p>\n\n<pre>\nPOST http://localhost/CanDoIT/Services/LoginUser.svc/Login HTTP/1.1\nAccept: application/json, text/javascript, */*; q=0.01\nContent-Type: application/json; charset=utf-8\nX-Requested-With: XMLHttpRequest\nReferer: http://localhost/CanDoIT/default.htm\nAccept-Language: nl-NL,en-US;q=0.5\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\nHost: localhost\nContent-Length: 64\nConnection: Keep-Alive\nPragma: no-cache\n\n{\"username\": \"\", \"password\": \"d41d8cd98f00b204e9800998ecf8427e\"}\n\nHTTP/1.1 200 OK\nCache-Control: private\nContent-Length: 10\nContent-Type: application/json; charset=utf-8\nServer: Microsoft-IIS/7.5\nX-AspNet-Version: 4.0.30319\nX-Powered-By: ASP.NET\nDate: Mon, 29 Oct 2012 09:31:15 GMT\n\n{\"d\":null}</pre>\n\n<p>If I do the same using Chrome, I get the following request / response dumps:</p>\n\n<pre>\nPOST http://localhost/CanDoIT/Services/LoginUser.svc/Login HTTP/1.1\nHost: localhost\nConnection: keep-alive\nContent-Length: 64\nOrigin: http://localhost\nX-Requested-With: XMLHttpRequest\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4\nContent-Type: application/json; charset=UTF-8\nAccept: application/json, text/javascript, */*; q=0.01\nReferer: http://localhost/CanDoIT/default.htm?\nAccept-Encoding: gzip,deflate,sdch\nAccept-Language: nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\n\n{\"username\": \"\", \"password\": \"d41d8cd98f00b204e9800998ecf8427e\"}\n\nHTTP/1.1 200 OK\nCache-Control: private\nContent-Length: 10\nContent-Type: application/json; charset=utf-8\nServer: Microsoft-IIS/7.5\nX-AspNet-Version: 4.0.30319\nX-Powered-By: ASP.NET\nDate: Mon, 29 Oct 2012 09:30:27 GMT\n\n{\"d\":null}</pre>\n\n<p>Now, the alert does not show me the {\"d\":null} text.</p>\n\n<p>Does anyone know what the difference is that is blocking me from using the responseText?</p>\n"},{"tags":[".net","wcf","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13120520,"title":"Passing and retrieving a class with methods through WCF service","body":"<p>I want to pass/retrieve an instance of the following class through a wcf service. The object should carry the methods that are defined by its class also. is it possible? suppose the following class:</p>\n\n<pre><code>[DataContract]\npublic class MyClass\n{\n    [DataMember]\n    public string Name;\n\n    public MyClass()\n    {\n\n    }\n\n    public MyClass(string name)\n    {\n        this.Name = name;\n    }\n\n    public void SetName(string name)\n    {\n        this.Name = name;\n    }\n\n    public string GetName()\n    {\n        return this.Name;\n    }\n}\n\n[ServiceContract]\npublic interface IMyService\n{\n    [OperationContract]\n    MyClass GetMyClassInstance();        \n}\n\npublic class MyService:IMyService\n{\n    public MyClass GetMyClassInstance()\n    {\n        return new MyClass(\"hello\");\n    }\n}\n</code></pre>\n\n<p>Now, when I add a reference to MyService in my client application project, the data contract MyClass will be generated, along with the service client, say MyServiceClient, so, and i do the following:</p>\n\n<pre><code>MyServiceClient client=new MyServiceClient();\nMyClass myClass1= client.GetMyClassInstance();\n</code></pre>\n\n<p>But my real question is, after getting the result from the service, whether this is possible(?) :</p>\n\n<pre><code>myClass1.SetName(\"oops!!!\");\n</code></pre>\n\n<p>while transmitting data contracts, will the methods in them also be transmitted? My Business objects contain methods too, and they need to be passed through WCF. Is there a way? Is passing BOs such as this through WCF a good practice?\nThanks in advance!</p>\n"},{"tags":["wcf","c#-4.0","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13087078,"title":"Enabling WCF Reading of an already existing MSMQ Queue","body":"<p>I have developed a WCF Self hosted service using .Net Framework 4.0.  </p>\n\n<pre><code>[ServiceContract(SessionMode=SessionMode.Required)]\n[ServiceKnownType(typeof(XmlDocument))]\npublic interface IMyMSMQ\n{\n    [OperationContract(IsOneWay=true, Action=\"*\")]\n    void OnMessageReceived(MsmqMessage&lt;XmlDocument&gt; msg);\n}\n</code></pre>\n\n<p>My Class implementation of this interface looks like this.</p>\n\n<pre><code>public class MyMSMQ : IMyMSMQ, IErrorHandler \n{\n    public void OnMessageReceived(MsmqMessage&lt;XmlDocument&gt; msg)\n    {\n      // Log Message To appropriate destination\n      Logger.LogMessage(msg);\n    }\n}\n</code></pre>\n\n<p>I have tried multiple scenarios.</p>\n\n<p>Scenario 1:</p>\n\n<ol>\n<li>Launch service.</li>\n<li>Launch Client app.</li>\n<li>Send Message to queue using Client App</li>\n<li>Notice that the Queue does not appear to get populated with the message because the service already read the message.</li>\n<li>Notice that nothing else happens in the service.</li>\n<li>Send one more message</li>\n<li>Notice that message stays in the queue</li>\n</ol>\n\n<p>Scenario # 2:  This is similar to Scenario 1 but starting the apps were in different order</p>\n\n<ol>\n<li>Launch Client app.</li>\n<li>Send Message to queue using Client App</li>\n<li>Notice that the Queue does appear to get populated with the message because the service is not started and has not read the message.</li>\n<li>Launch service.</li>\n<li>Notice that the message disappears.</li>\n<li>Notice that nothing else happens in the service.</li>\n<li>Send one more message</li>\n<li>Notice that message stays in the queue</li>\n</ol>\n\n<p>Every time the service starts, a message is removed from the queue so, it appears that my service IS in fact reading the message but it is not able to figure out where to send it or what to do with it once it reads the message.</p>\n"},{"tags":["c#","wcf","silverlight","silverlight-4.0","ria"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":11211627,"title":"Silverlight 4 + RIA Service Loads","body":"<p>Is it an acceptable practice to use the same Load Operation to load multiple entities and then binding it to a single event handler asychronously? I'm doing this because I am using a busy indicator and we don't really know which entity gets returned quicker.</p>\n\n<p>Or should I separate the loads into multiple Load Operation / EventHandler pairs?</p>\n\n<pre><code>  LoadOperation GetResult;\n\n    private void LoadinDatagrid()\n    {   \n        IsBusy = true;\n        GetResult = DomainContext.Current.Load(GetSomething1Query());\n        GetResult = DomainContext.Current.Load(GetSomething2Query());\n        GetResult = DomainContext.Current.Load(GetSomething3Query());         \n\n        GetResult.Completed += new EventHandler(GetResult_Completed);                     \n    }\n\n    void GetResult_Completed(object sender, EventArgs e)\n    {\n\n        GetSomething1 = DomainContext.Current.Something1;\n        GetSomething2 = DomainContext.Current.Something2;\n        GetSomething3 = DomainContext.Current.Something3;\n        GetResult.Completed -= new EventHandler(GetResult_Completed);\n        IsBusy = false;     \n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","wcf","rest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":439,"score":0,"question_id":9112531,"title":"Custom MVC AuthorizeAttribute for WCF Web API Preview 6","body":"<p>I tried to implement my own AuthorizeAttribute for my REST API that I've built with the WCF Web API Preview 6. </p>\n\n<p>Unfortunately only the constructor gets called, but non of the methods. Am I missing something with the registration?</p>\n\n<pre><code>[BasicHttpAuthorize]\n[WebGet(UriTemplate = \"\")]\npublic IEnumerable&lt;Supertext.API.Order&gt; Get()\n{\n</code></pre>\n\n<p>And this is my super simplified code.</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic class BasicHttpAuthorizeAttribute: AuthorizeAttribute\n{\n    public BasicHttpAuthorizeAttribute()\n    {\n    }\n\n    protected override bool AuthorizeCore(HttpContextBase httpContext)\n    {\n        return true;\n    }\n\n\n    public override void OnAuthorization(AuthorizationContext filterContext)\n    {\n        //do the authorization\n    }\n}\n</code></pre>\n\n<p>But as I said, neither the AuthorizeCore nor the OnAuthorization method is ever called.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["wcf","web-services",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":7598986,"title":"How do I troubleshoot a WCF service with failing load tests?","body":"<p>I have a WCF 4 service running on IIS 7 (Windows Server 2008), deployed to a development server. The service works when I run a small website that consumes the service (click a button, the page calls the service, data is returned. It's very basic).</p>\n\n<p>I also created some unit tests that call the service and placed them into a load test. In a nutshell, the \"unit tests\" call the service and write the <code>byte[]</code> streamed back from the service to a file. The service performs as expected when running the load test.</p>\n\n<p>The problem is the load test fails after a very small number of iterations.  Sometimes foour calls are successful, other times after five calls. Again, individually, the tests run fine but when I put them together to simulate a live environment (multiple users, multiple test iterations) this problem appears.</p>\n\n<p>The exception thrown is:</p>\n\n<pre><code>Test method TestProject1.UnitTest1.RunReport threw exception: \nSystem.ServiceModel.CommunicationException: \nAn error occurred while receiving the HTTP response to http://xx.xx.xx.xx:yy/Service.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details. ---&gt; System.Net.WebException: The underlying connection was closed: An unexpected error occurred on a receive. ---&gt; System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. ---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host \n</code></pre>\n\n<p><strong>Update #1:</strong>\nI just set the test iteration to 10 (run the test 10x) and the constant user load to 1. The test was able to complete succesfully. This was using the most basic of the unit tests. The second, more complicated test, was omitted for this run.</p>\n"},{"tags":["c#",".net","wcf",".net-4.0","iis-7.5"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13118283,"title":"WCF dynamic endpoint and configuration dependency?","body":"<p>I have this topology : ( notice WAS )</p>\n\n<p><em>each Service1 , service2 ...service-n  is in a separate appdomain in iis.</em>\n<img src=\"http://i.stack.imgur.com/579x0.jpg\" alt=\"enter image description here\"></p>\n\n<p><code>Service1</code> need to consume <code>Service2</code>.However he can access <code>service2's</code> endpoints  via  <code>nettcp</code> or <code>http</code> endpoint.</p>\n\n<p>Where is the decision ?  ( nettcp ot http ) </p>\n\n<p>In a separate  Config file. (which is in <code>c:\\cfg</code> folder  , and of course service1 reads the cfg in order to decide to which binding he should access at <code>service2</code>.)</p>\n\n<p><em><code>Service2</code> also should be able to see the file cause he consumes other services  as well. but lets talk(for now) about <code>service1</code>  as calling <code>service2</code>.</em></p>\n\n<p>a typical entry in cfg file will be : </p>\n\n<pre><code>key : current_service2_Active_endpoint\nval : nettcp\n</code></pre>\n\n<p>So here is my problem : </p>\n\n<ul>\n<li>I need to find a solution that will read the CFG into a cache or something so <code>service1</code> will read the cfg entries from cache and not via filesystem. but Service2 should also read it but the cache wont be the same ( different appdomain). how should I do it ? where should I write the code (uploading to cache) ? I only have this 2 files : ( <em>maybe</em> when the service is <em>up</em> - but what is the code for that ? ) </li>\n</ul>\n\n<p><img src=\"http://i.stack.imgur.com/poKTQ.jpg\" alt=\"enter image description here\"></p>\n\n<ul>\n<li>I want that each <strong>change</strong> in the CFG file - will reload the entries into cache.\nthis seems as a classic <code>cache</code> task. Cache dependency on a file seems to be the solution , but again there will be <code>[n]</code> cache dependencies because of  <code>[n]</code> appDomains....</li>\n</ul>\n"},{"tags":["c#","asp.net","wcf","security","wshttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12815423,"title":"ASP.NET: Programmatically check if the secutiry mode is set to \"None\" or \"TransportWithMessageCredential\"?","body":"<p>How can I programmatically check if the secutiry mode of the wsHttpBinding in the web.config is set to \"<code>None</code>\" or \"<code>TransportWithMessageCredential</code>\" ?\nI want the webapplication to behave differently when I change the security setting in the web.config.</p>\n\n<p><strong>web.config:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    ...\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"PirIS.Web.WCF.MobileServiceBehavior\"\n               name=\"PirIS.Web.WCF.MobileService\"&gt;\n        &lt;endpoint address=\"\"\n                  binding=\"wsHttpBinding\"\n                  bindingConfiguration=\"wsHttpBinding_MobileService\"\n                  contract=\"PirIS.Web.WCF.IMobileService\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"wsHttpBinding_MobileService\" &gt;\n          &lt;security mode=\"None\"&gt;\n          &lt;!--&lt;security mode=\"TransportWithMessageCredential\"&gt;--&gt;\n            &lt;message clientCredentialType=\"UserName\" negotiateServiceCredential=\"False\" /&gt;\n            &lt;transport clientCredentialType=\"None\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    ...\n  &lt;/system.serviceModel&gt;\n  ...\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","wcf","sockets","linq-to-sql","dbml"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13115993,"title":"Foreign Key Causes WCF Socket Connection to Abort","body":"<p>I have 2 tables, Unit and SubUnit, with a one to many relationship: a Unit can have 0 or more SubUnits.</p>\n\n<p>I use Linq to SQL (.dbml files) in a WCF Windows Service to access the database.</p>\n\n<p>Using the Service Client, I call any method to retrieve either the Units or the SubUnits and it works fine...as long as there are no SubUnits in the database (0 rows in the SubUnit table). </p>\n\n<p>If there is 1 or more SubUnits, I get the following errors when calling the same methods:</p>\n\n<ul>\n<li><strong>\"The socket connection was aborted...\"</strong></li>\n<li>with inner exception \"The read operation failed, see inner\nexception.\"</li>\n<li>with inner exception \"The socket connection was\naborted...\"</li>\n<li>with inner exception <strong>\"An existing connection was forcibly\nclosed by the remote host\"</strong></li>\n</ul>\n\n<p>I've dropped the tables and re-created them, I've re-added the Unit/SubUnit tables to the DBML, re-installed the service, etc. I've never run into this problem before.</p>\n\n<p>I understand the \"Socket aborted\" error can be caused by trying to pass too much data over WCF, but there is currently 1 Unit with 1 SubUnit in the database and I still get this error!</p>\n\n<p>Can anyone shed some light on this?</p>\n"},{"tags":["wcf","iis","tcp"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":30,"score":3,"question_id":13112952,"title":"Does IIS work with http-only WCF services?","body":"<p>I'm not a WCF expert, so please don't laugh at me.<br />\nI need to write a WCF service that receives data through TCP endpoint, not HTTP. Can I still deploy it to IIS or Azure and take advantage of all cool stuff that's baked in (load distribution, etc.)?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13116408,"title":"VPN Tunneling using WCF","body":"<p>I have a WCF Service using http protocol. How do I convert my WCF service to make use of VPN. </p>\n\n<p>Are ther some kind of changes that I have to make. Also could someone point me to some basic introductory stuffs related to VPN tunneling and WCF.</p>\n\n<p>may be this question is pretty abstract. but pls excuse.</p>\n\n<p>thanks</p>\n"},{"tags":["wcf","oledb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13116179,"title":"OleDb provider exception","body":"<p>I am calling a WCF method inside a transaction &amp; I am getting the following error </p>\n\n<pre><code>The ITransactionLocal interface is not supported by the 'Microsoft.ACE.OLEDB.12.0'\nprovider.  Local transactions are unavailable with the current provider\n</code></pre>\n\n<p>What is the issue?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13110707,"title":"WCF and multiple Callback Contract possible","body":"<p>i am newbie in WCF.i was looking for wayout of multiple Callback Contract possible or not like below</p>\n\n<pre><code>[ServiceContract (\nCallbackContract = typeof (CallbackContract_1),\nCallbackContract = typeof (CallbackContract_2),\nCallbackContract = typeof (CallbackContract_3))\n]\npublic interface SomeWcfContract {}\n</code></pre>\n\n<p>i was searching google and found way out that was like</p>\n\n<pre><code>interface ICallbackContract1\n{...}\n\ninterface ICallbackContract2 : ICallbackContract1\n{...}\n\n[ServiceContract(CallbackContract = typeof(ICallbackContract1))]\ninterface IMyBaseContract\n{...}\n\n[ServiceContract(CallbackContract = typeof(ICallbackContract2))]\ninterface IMySubContract : IMyBaseContract\n{...}\n\nor\n\ninterface ICallbackContract1\n{...}\ninterface ICallbackContract2\n{...}\ninterface ICallbackContract3 : ICallbackContract2,ICallbackContract1\n{...}\n\n[ServiceContract(CallbackContract = typeof(ICallbackContract1))]\ninterface IMyBaseContract1\n{...}\n[ServiceContract(CallbackContract = typeof(ICallbackContract2))]\ninterface IMyBaseContract2\n{...}\n[ServiceContract(CallbackContract = typeof(ICallbackContract3))]\ninterface IMySubContract : IMyBaseContract1,IMyBaseContract2\n{...}\n</code></pre>\n\n<p>i just need to know is there any other way out for multiple callback contract. thanks</p>\n"},{"tags":["c#","wcf","sockets","windows-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13113596,"title":"WCF Windows Service Error: The socket connection has been disposed","body":"<p>I have 2 WCF services that are both installed locally on the same Windows Service. The 2 WCF services make calls to the same database and use Net TCP Binding.</p>\n\n<p>Side Note: I made 2 services instead of 1 because the service had too many methods and as a result, the XML file was too large and I couldn't add the service reference to the consumer app. Also, it's more readable this way.</p>\n\n<p>On the client app, I've added a service reference to both WCF services. To use the services, I extended the CommunicationObject so it has a \"Using()\" method: see the code below.</p>\n\n<p><strong>Communication Object Extension for .Using() Method</strong></p>\n\n<pre><code>public static class CommunicationObjectExtensions\n{\n    public static void Using&lt;T&gt;(this T client, Action&lt;T&gt; work)\n        where T : ICommunicationObject\n    {\n        try\n        {\n            // make sure client is open\n            //client.Open(); // didn't work                \n            work(client);\n        }\n        catch (CommunicationException e)\n        {\n            client.Abort();\n            throw;\n        }\n        catch (TimeoutException e)\n        {\n            client.Abort();\n            throw;\n        }\n        catch (Exception e)\n        {\n            client.Abort();\n            throw;\n        }\n        finally\n        {\n            client.Close();\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Service Calls</strong>  </p>\n\n<pre><code>new ServiceClientA().Using(client =&gt;\n    {\n        var someObjectA = client.GetSomeObjectA();\n    });\nnew ServiceClientB().Using(client =&gt;\n    {\n        var someObjectB = client.GetSomeObjectB();\n    });\n</code></pre>\n\n<p>I get the \"The socket connection has been disposed\" error when ServiceClientB's method actually has data to return (versus an empty list) and returns (I'm able to debug and go through the entire service call).</p>\n\n<p>I don't run into this problem when using the other WCF services that point to different databases.</p>\n\n<p>Anyone have any ideas what's going on?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Ok turns out it only happens with the method I'm calling (client.GetSomeObjectB()). The object it's returning is causing errors. Apparently this is because the object is too big, but it shouldn't be a problem (since I'm only returning 1 small object).</p>\n"},{"tags":["c#","wcf","web-services","windows-7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13115370,"title":"Web service connectivity error","body":"<p>I connect to a third party web service from my C# windows application running on Windows 7 OS.\nI keep getting this error intermittently on calling a method on the service:</p>\n\n<blockquote>\n  <p>The underlying connection was closed: The connection was closed\n  unexpectedly</p>\n</blockquote>\n\n<p>How to resolve this please?I tried increasing the  value of \"receiveTimeout\" attribute under \"binding\" node,but no luck.</p>\n\n<p>Shall I go ahead and use HTTP fiddler or may be enable web service logging at my end and see whats going on?</p>\n\n<p>Thanks.</p>\n"},{"tags":["android","ios","wcf","phonegap"],"answer_count":5,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":608,"score":10,"question_id":11829551,"title":"When it's better not to use phonegap?","body":"<p>I am planning to develop an mobile app (my first one) for multiple operation systems (including Android, IOS, WindowsPhone) - in the wild internet I found a framework called phonegap, as a possibility solution to minimize the development process. \nI understand the advantages phonegap has - but could not find real downsides... \n<strong>1.) So the question is why should I not use phonegap?</strong></p>\n\n<p><strong>2.) Is phonegap only slower, because it is wrapped inside the OS, if yes how much slower?</strong> I mean can you really tell the differentce between a native app and phonegap, or is only slower when you need hardware acceleration e.g. for gaming? </p>\n\n<p>A few more informations about the project. Currently I have several '.Net' services and provider, communicating via WCF. The App should be able to receive and send video streams and audio data from and to a service, such as a provider would do.</p>\n\n<p><strong>3.) Is it possible to use phonegap for that, or shall I stick to native apps?</strong></p>\n\n<p>Tank you for your time \nM.</p>\n"},{"tags":["wcf","soap","intercept","soapfault","wcf-faults"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12834983,"title":"Managing / Modifying Deserialisation Faults / Intercepting Responses","body":"<p>Let's say I have the following request object:</p>\n\n<pre><code>[DataContract]\npublic class MyContract {\n    [DataMember]\n    public Guid Token { get; set; }\n}\n</code></pre>\n\n<p>And a WCF service definition as follows:</p>\n\n<pre><code>[ServiceContract]\npublic interface IMyService {\n    [OperationContract]\n    bool Validate(MyContract request);\n}\n</code></pre>\n\n<p>If I send the following to the operation, I get the desired response:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:esi=\"http://mynamespace.com/\" xmlns:con=\"http://mynamespace.com\"&gt;\n   &lt;soapenv:Header&gt;\n   &lt;/soapenv:Header&gt;\n   &lt;soapenv:Body&gt;\n      &lt;esi:Validate&gt;\n         &lt;esi:Token&gt;9192ef6a-819f-4a8a-8fde-4125999e33dc&lt;/esi:Token&gt;\n      &lt;/esi:Validate&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>If I send an invalid Guid (this occurs with any type), I get the following response:</p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n   &lt;s:Body&gt;\n      &lt;s:Fault&gt;\n         &lt;faultcode xmlns:a=\"http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher\"&gt;a:InternalServiceFault&lt;/faultcode&gt;\n         &lt;faultstring xml:lang=\"en-GB\"&gt;The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the &amp;lt;serviceDebug&gt; configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework SDK documentation and inspect the server trace logs.&lt;/faultstring&gt;\n      &lt;/s:Fault&gt;\n   &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p>Which is all well and good, but not really enough information for my consumers, considering my service knows exactly what's wrong with the data.</p>\n\n<p>I can expose the full exception with the <code>&lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;</code> web config setting, but that's TOO MUCH information for my consumers! I would rather customise the error at the code level, but I'm not sure how I can attach to the deserializer? I know how to deal with custom SOAP faults and FaultContracts, but this seems to be at a lower level - I need to intercept the incoming message before it hits the CLR methods, somehow? Is there a way to do this that I'm not aware of?</p>\n"},{"tags":["wcf","soap","ws-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1007,"score":0,"question_id":10689583,"title":"WCF client connecting to Java SOAP web service using WS-Security","body":"<p>I'm having a problem with a .NET WCF client connecting to a Java web service using SOAP 1.1. The service requires both transport level encryption over SSL and SOAP security using the WS-Security protocol, both using the same certificate. I have the certificate installed and I can connect to the server however, I get a HTTP 500 response when I post the request. </p>\n\n<p>I have been able to compare the SOAP produced by WCF with a working example from the developers of the web service. The WCF SOAP message has additional Timestamp and BinarySecurityToken elements which don't occur in the supplied example. I know almost nothing about WS-Security and very little about WCF and so I'm hoping that someone can point me in the correct direction. </p>\n\n<p>Here is the configuration section for my application:   </p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"JavaServiceSoapBinding\" closeTimeout=\"00:01:00\"\n            openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n            allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n            useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"Certificate\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"Certificate\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"https://service/endpoint\"\n          binding=\"basicHttpBinding\" bindingConfiguration=\"JavaServiceSoapBinding\"\n          contract=\"MyCode.MyService\" name=\"MyServicePort\" behaviorConfiguration=\"endpointBehavior\"&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"endpointBehavior\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate storeLocation=\"LocalMachine\" storeName=\"My\" findValue=\"A1A1A1A1\" x509FindType=\"FindBySerialNumber\"/&gt;\n            &lt;serviceCertificate&gt;\n              &lt;authentication certificateValidationMode=\"None\" revocationMode=\"NoCheck\"/&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And this is the example SOAP header I have from the parter responsible for the service:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:web=\"http://webservice.connector.speechanalytics.ept.avaya.com/\"&gt;\n  &lt;soapenv:Header&gt;\n    &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n      &lt;ds:Signature Id=\"Signature-5\" xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n        &lt;ds:SignedInfo&gt;\n          &lt;ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n          &lt;ds:SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/&gt;\n          &lt;ds:Reference URI=\"#id-6\"&gt;\n            &lt;ds:Transforms&gt;\n              &lt;ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n            &lt;/ds:Transforms&gt;\n            &lt;ds:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/&gt;\n            &lt;ds:DigestValue&gt;blablabla=&lt;/ds:DigestValue&gt;\n          &lt;/ds:Reference&gt;\n        &lt;/ds:SignedInfo&gt;\n        &lt;ds:SignatureValue&gt;\n          blablabla=\n        &lt;/ds:SignatureValue&gt;\n        &lt;ds:KeyInfo Id=\"KeyId-blablabla\"&gt;\n          &lt;wsse:SecurityTokenReference wsu:Id=\"STRId-blablabla\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n            &lt;ds:X509Data&gt;\n              &lt;ds:X509IssuerSerial&gt;\n                &lt;ds:X509IssuerName&gt;CN=Dept,OU=Product,O=Company,L=Location,ST=BLA,C=BLA&lt;/ds:X509IssuerName&gt;\n                &lt;ds:X509SerialNumber&gt;1319578157&lt;/ds:X509SerialNumber&gt;\n              &lt;/ds:X509IssuerSerial&gt;\n            &lt;/ds:X509Data&gt;\n          &lt;/wsse:SecurityTokenReference&gt;\n        &lt;/ds:KeyInfo&gt;\n      &lt;/ds:Signature&gt;\n    &lt;/wsse:Security&gt;\n  &lt;/soapenv:Header&gt;\n  &lt;soapenv:Body wsu:Id=\"id-6\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n</code></pre>\n\n<p>and this is the SOAP message that WCF is producing:</p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:u=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n  &lt;s:Header&gt;\n    &lt;o:Security s:mustUnderstand=\"1\" xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n      &lt;u:Timestamp u:Id=\"_0\"&gt;\n        &lt;u:Created&gt;2012-05-21T15:02:36.448Z&lt;/u:Created&gt;\n        &lt;u:Expires&gt;2012-05-21T15:07:36.448Z&lt;/u:Expires&gt;\n      &lt;/u:Timestamp&gt;\n      &lt;o:BinarySecurityToken u:Id=\"uuid-abd451ed-9bff-4cd0-b9a6-38fcd6bf9e8b-1\" ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\" EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"&gt;blablabla==&lt;/o:BinarySecurityToken&gt;\n      &lt;Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n        &lt;SignedInfo&gt;\n          &lt;CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n          &lt;SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/&gt;\n          &lt;Reference URI=\"#_0\"&gt;\n            &lt;Transforms&gt;\n              &lt;Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n            &lt;/Transforms&gt;\n            &lt;DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/&gt;\n            &lt;DigestValue&gt;+blablabla=&lt;/DigestValue&gt;\n          &lt;/Reference&gt;\n        &lt;/SignedInfo&gt;\n        &lt;SignatureValue&gt;blablabla=&lt;/SignatureValue&gt;\n        &lt;KeyInfo&gt;\n          &lt;o:SecurityTokenReference&gt;\n            &lt;o:Reference ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\" URI=\"#uuid-abd451ed-9bff-4cd0-b9a6-38fcd6bf9e8b-1\"/&gt;\n          &lt;/o:SecurityTokenReference&gt;\n        &lt;/KeyInfo&gt;\n      &lt;/Signature&gt;\n    &lt;/o:Security&gt;\n  &lt;/s:Header&gt;\n  &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n</code></pre>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13111675,"title":"WCF application don't working in my home network","body":"<p>i create a small wcf apps when i am testing this apps in my machine then it is working but when i run the wcf server end on another pc at my home in same network then i am getting error\n<strong>A remote side security requirement was not fulfilled during authentication.Try increasing the ProtectionLevel and/or ImpersonationLevel.</strong></p>\n\n<p>both the pc at my home in same work group and they can access each other. i try to find out the answer but people say this is firewall issue. so i disable firewall at both the pc but still getting the problem. here is my sample code. please guide me how can i run this wcf apps in two pc at my home network. thanks</p>\n\n<h2>Service end</h2>\n\n<pre><code>namespace WCFSample\n{\n[ServiceContract]\npublic interface IService1\n{\n    [OperationContract]\n    string MyName(string name);\n}\n}\n\nnamespace WCFSample\n{\npublic class Service1 : IService1\n{\n    public string MyName(string name)\n    {\n        return string.Format(\"My Name... {0}\", name);\n    }\n\n}\n}\n\nnamespace ConsoleApplication1\n{\nclass Program\n{\n    static ServiceHost customerHost = null;\n\n    static void Main(string[] args)\n    {\n        try\n        {\n            HostCustomerService();\n\n            Console.WriteLine();\n            Console.WriteLine(\"Press any key to stop the services.\");\n            Console.ReadKey();\n        }\n\n            catch (Exception ex)\n        {\n            Console.WriteLine(ex.Message);    \n        }\n        finally\n        {\n            customerHost.Close();\n        }\n\n    }\n\n    private static void HostCustomerService()\n    {\n        customerHost = new ServiceHost(typeof\n            (Service1));\n\n        ServiceEndpoint tcpEndpoint = customerHost.AddServiceEndpoint(\n            typeof(IService1), new NetTcpBinding(),\n            \"net.tcp://192.168.1.103:9020/Service1\");\n\n        customerHost.Open();\n\n        Console.WriteLine(\"{0} {1}\", tcpEndpoint.Address, tcpEndpoint.Name);\n        Console.WriteLine();\n\n    }\n   }\n  }\n</code></pre>\n\n<h2>client end</h2>\n\n<pre><code>namespace Client1\n{\nclass Program\n{\n    static void Main(string[] args)\n    {\n        IService1 channel = null;\n\n        var endPoint = new EndpointAddress(\n             \"net.tcp://192.168.1.103:9020/Service1\");\n       channel  = ChannelFactory&lt;IService1&gt;.CreateChannel(new NetTcpBinding(), endPoint);\n       Console.WriteLine(\"Enter Name\");\n       string line = Console.ReadLine();\n       Console.WriteLine(channel.MyName(line));\n       Console.ReadKey();\n    }\n\n }\n }\n</code></pre>\n"},{"tags":["asp.net","sql","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":645,"score":1,"question_id":9189184,"title":"login failed for user nt/authority","body":"<p>I am trying to deploy my website and wcf runs in my localhost...if i login i.e use db i am gettin this error...Any idea wht the pblm would be ?</p>\n\n<p>Login failed for user 'NT AUTHORITY\\ANONYMOUS LOGON'.</p>\n\n<p>Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. </p>\n\n<p>Exception Details: System.Data.SqlClient.SqlException: Login failed for user 'NT AUTHORITY\\ANONYMOUS LOGON'.</p>\n"},{"tags":["wcf","windows-services","asp.net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13110727,"title":"How to provide status updates to asp.net page from long running WCF service","body":"<p>I have an asp.net 4 site. My client wants to go to a page and run a process which updates data from their accounting app into his site. This process can take a couple hours. I wanted to implement a WCF service hosted from Windows service. I'm finding info on how this works but my client also wants status updates from this service as it runs. My question is how can you implement this with a WCF service? Is it possible?</p>\n"},{"tags":["c#","wcf","entity-framework","iis","serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":11039450,"title":"StackOverflowException serializing STE EF object graph","body":"<p>We have a .NET 4, WPF, WCF, EF 4, SQL 2008 application. One of our EF models is highly relational and in the case I'm describing could and probably does contain cycles. I've been asked to troubleshoot a case in the field where all of a sudden data from this STE EF model quit showing up in the WPF client. Upon closer examination, I found that the IIS W3WP process crashes when trying to retrieve (serialize) the STE EF object graph. I used Debug Diagnostics to capture the crash.</p>\n\n<p>When I looked at the generated crash report, I discovered it was a stack overflow exception (how appropriate). The stack trace in the crash report is rather large, but the top of the stack looks something like:</p>\n\n<pre><code>System.Xml.XmlBaseWriter.StartElement(System.String ByRef, System.String, System.String, System.Xml.XmlDictionaryString) \nSystem.Xml.XmlBaseWriter.WriteStartElement(System.String, System.Xml.XmlDictionaryString, System.Xml.XmlDictionaryString) \nSystem.Runtime.Serialization.XmlWriterDelegator.WriteStartElement(System.String, System.Xml.XmlDictionaryString, System.Xml.XmlDictionaryString) \nDynamicClass.WriteXXXDataToXml(System.Runtime.Serialization.XmlWriterDelegator, System.Object, System.Runtime.Serialization.XmlObjectSerializerWriteContext, System.Runtime.Serialization.ClassDataContract) \nSystem.Runtime.Serialization.ClassDataContract.WriteXmlValue(System.Runtime.Serialization.XmlWriterDelegator, System.Object, System.Runtime.Serialization.XmlObjectSerializerWriteContext) \nSystem.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(System.Runtime.Serialization.DataContract, System.Runtime.Serialization.XmlWriterDelegator, System.Object, System.RuntimeTypeHandle) \nSystem.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(System.Runtime.Serialization.XmlWriterDelegator, System.Object, Boolean, Boolean, Int32, System.RuntimeTypeHandle) \nSystem.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(System.Runtime.Serialization.XmlWriterDelegator, System.Object, Boolean, Boolean, Int32, System.RuntimeTypeHandle) \n</code></pre>\n\n<p>What makes exceptionally odd is that when the WCF service is hosted in Visual Studio and I run from the dev environment, the serialization works perfectly, and I get data on the client.</p>\n\n<p>Could this be resolved by IIS settings? Why would it work with Visual Studio's dev IIS, but not with the production IIS?</p>\n\n<p>I'm not sure what is causing this problem or why the serializer is even barfing? </p>\n\n<p>Should I try another means of WCF serialization w/ STE EF4?</p>\n\n<p>Any input is appreciated.</p>\n\n<p>Thanks!</p>\n"},{"tags":["wcf","mono","wcf-client","basichttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13110350,"title":"Mono: WCF Service Timeout with basichttpBinding (Mono 2.10.8.1)","body":"<p>I'm having WCF Client with basicHTTPBinding. That is working fine when running in Windows. but when running from Mono (Debian 2.10.8.1-5, Mono JIT compiler version 2.10.8.1) I immmediately get a timeout.</p>\n\n<pre><code>Unhandled Exception: System.TimeoutException: The operation has timed-out.\n  at System.ServiceModel.Channels.HttpRequestChannel+HttpChannelRequestAsyncResult.WaitEnd () [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.Channels.HttpRequestChannel.EndRequest (IAsyncResult result) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.Channels.HttpRequestChannel.Request (System.ServiceModel.Channels.Message message, TimeSpan timeout) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Description.OperationDescription od, System.Object[] parameters) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in &lt;filename unknown&gt;:0\n[ERROR] FATAL UNHANDLED EXCEPTION: System.TimeoutException: The operation has timed-out.\n  at System.ServiceModel.Channels.HttpRequestChannel+HttpChannelRequestAsyncResult.WaitEnd () [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.Channels.HttpRequestChannel.EndRequest (IAsyncResult result) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.Channels.HttpRequestChannel.Request (System.ServiceModel.Channels.Message message, TimeSpan timeout) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Description.OperationDescription od, System.Object[] parameters) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in &lt;filename unknown&gt;:0\n  at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in &lt;filename unknown&gt;:0\n</code></pre>\n\n<p>I already checked it is no network connection issue as it runs from other (windows based) clients. Also the application is not waiting for the set timeout of 1 minute.</p>\n\n<p>Here is the code I'm using to call the service:</p>\n\n<pre><code>// Application Authentication\nDiscoveryService.LDEDiscoveryServiceClient client = new DiscoveryService.LDEDiscoveryServiceClient();\nclient.InnerChannel.OperationTimeout = TimeSpan.FromMinutes(1);\nConsole.WriteLine(\"Connecting to: \" + client.Endpoint.Address.Uri);\nstring token = client.GetTokenV1();\nConsole.WriteLine(token);\n</code></pre>\n\n<p>And the app.config for the binding configuration:</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;startup&gt; \n        &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5\"/&gt;\n    &lt;/startup&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding name=\"BasicHttpBinding_ILDEDiscoveryService\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:01:00\" sendTimeout=\"00:01:00\" maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"/&gt;\n                &lt;binding name=\"BasicHttpBinding_ILDEDeviceService\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:01:00\" sendTimeout=\"00:01:00\" maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"/&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://hostname/LDE/DiscoveryService/LDEDiscoveryService.svc\" binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ILDEDiscoveryService\" contract=\"DiscoveryService.ILDEDiscoveryService\" name=\"BasicHttpBinding_ILDEDiscoveryService\"/&gt;\n            &lt;endpoint address=\"http://hostname/LDE/DeviceService/LDEDeviceService.svc\" binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ILDEDeviceService\" contract=\"DeviceService.ILDEDeviceService\" name=\"BasicHttpBinding_ILDEDeviceService\"/&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13092301,"title":"Regarding wcf service hosting","body":"<p>i am new in wcf and started learning. i got one confusion like that i create a small wcf service and just do not host it in IIS,console apps or win service but from another apps i can add the service reference of svc file and found it is working. if wcf can work without hosting in any place like \"IIS,console apps or win service \" then why people would alway host wcf service in IIS,console apps or win service. can anyone tell me the reason. </p>\n"},{"tags":["wcf","architecture","soa"],"answer_count":4,"favorite_count":4,"up_vote_count":8,"down_vote_count":2,"view_count":723,"score":6,"question_id":3836900,"title":"What is Service oriented Architecture?","body":"<p>What is Service oriented Architecture ?</p>\n"},{"tags":["c#","asp.net-mvc","wcf","date-formatting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":12976600,"title":"Is there a way to convert a date format when referencing it from an external service?","body":"<p>I am trying to convert a date from <code>19/10/2012 00:00:00</code> to <code>19/10/2012</code>. I can't state the date type in the viewmodel like <a href=\"http://stackoverflow.com/questions/4679352/converting-datetime-format-using-razor\">here</a> as code is as below:</p>\n\n<p>Viewmodel:</p>\n\n<pre><code>public Appointment Appointment {get; set;}\n</code></pre>\n\n<p>I am aware that mapping is an option but would like to see if an alternate option is available as this will make reusing the code easier and if the service changes at all then mapping will complicate things.</p>\n\n<p>Mock service example:</p>\n\n<pre><code>public class Appointment\n    {\n        [DataMember]\n        public DateTime AppointmentDate { get; set; }  \n        [DataMember]\n        public Identifier AppointmentIdentifier { get; set; }\n        [DataMember]\n        public string Location { get; set; }\n        [DataMember]\n\n    ...etc\n</code></pre>\n"},{"tags":["wcf","confirmation"],"answer_count":4,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":1281,"score":9,"question_id":226953,"title":"WCF and confirmations - do I need to send back a 'OK got it' to client?","body":"<p>If I have hundreds/thousands of client computers WCP'ing to my server, should I respond with a '200 OK' type message stating that I received the data and stored it in the db successfully?</p>\n\n<p>Is this already built-into WCF?</p>\n"},{"tags":["wcf","asynchronous"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":26,"score":3,"question_id":13108876,"title":"Asynchronous WCF","body":"<p>I am trying to create a WCF service that supports asynchronous calls. I followed all samples and tutorials I could find, and all of them have the customary pattern of one synchronous method, and the async Begin and End such as:</p>\n\n<pre><code>[OperationContract(AsyncPattern = false)]\nstring GetData(int value);\n\n[OperationContract(AsyncPattern = true)]\nIAsyncResult BeginGetData(int value, AsyncCallback callback, object asyncState);\n\nstring EndGetData(IAsyncResult result);\n</code></pre>\n\n<p>However, only the synchronous GetData gets called, no matter what I do on the client side. Fiddler tells me that the message is always the same:</p>\n\n<pre><code> &lt;s:Envelope\n xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;&lt;s:Body&gt;&lt;GetData\n xmlns=\"http://tempuri.org/\"&gt;&lt;value&gt;0&lt;/value&gt;&lt;/GetData&gt;&lt;/s:Body&gt;&lt;/s:Envelope&gt;\n</code></pre>\n\n<p>When I <em>remove</em> the synchronous GetData interface, the async method now is properly called.</p>\n\n<p>Is this normal behavior? Is there anything else I should do to support sync and async versions of a method?</p>\n"},{"tags":[".net","wcf",".net-4.5","async-await"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":157,"score":4,"question_id":12797091,"title":"OperationContext.Current is null after first await when using async/await in WCF service","body":"<p>I am using async/await pattern in .NET 4.5 to implement some service methods in WCF.\nExample service:</p>\n\n<p>Contract:</p>\n\n<pre><code>[ServiceContract(Namespace = \"http://async.test/\")]\npublic interface IAsyncTest\n{\n    Task DoSomethingAsync();\n}\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>MyAsyncService : IAsyncTest\n{\n    public async Task DoSomethingAsync()\n    {\n        var context = OperationContext.Current; // context is present\n\n        await Task.Delay(10);\n\n        context = OperationContext.Current; // context is null\n    }\n}\n</code></pre>\n\n<p>The problem I am having is that after first <code>await</code> <code>OperationContext.Current</code> returns <code>null</code> and I can't access <code>OperationContext.Current.IncomingMessageHeaders</code>.</p>\n\n<p>In this simple example this is not a problem since I can capture the context before the <code>await</code>. But in the real world case <code>OperationContext.Current</code> is being accessed from deep inside the call stack and I really don't want to change lots of code just to pass the context further.</p>\n\n<p>Is there a way to get operation context after <code>await</code> point without passing it down the stack manually?</p>\n"},{"tags":["c#","wcf","datacontract"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5977,"score":0,"question_id":1133063,"title":"WCF DataContract class with methods","body":"<p>This is more of a philosophical/best-practice sort of question rather than a technical problem.</p>\n\n<p>Are there any strong arguments against writing a DataContract class with methods that are to be used server-side only? Or what about additional properties that are not decorated with the DataMember attribute?</p>\n\n<p>For example:</p>\n\n<pre><code>[DataContract]\npublic class LogEntry\n{\n  [DataMember]\n  public string Message { get; set; }\n  [DataMember]\n  public string Severity { get; set; }\n\n  public string SomeOtherProperty { get; set; }\n\n  ...\n\n  public void WriteToDatabase()\n  {\n    ...\n  }\n}\n</code></pre>\n\n<p>Not doing it seems like an awful lot of extra work that I would prefer to avoid, although using extension methods could make it easier.\nBut, as a good developer, I am wondering if it is bad practice to do so. </p>\n"},{"tags":["c#",".net","wcf","https"],"answer_count":3,"favorite_count":6,"up_vote_count":3,"down_vote_count":0,"view_count":9899,"score":3,"question_id":1339517,"title":"looking for WCF basicHttpBinding https tutorial or samples","body":"<p>I am using VSTS 2008 + .Net 3.5 + C# to develop a console application as a WCF cient, and host WCF service in IIS 7.0 at server side (server using Windows Vista x64).</p>\n\n<p>Currently, my WCF client and server works quite well with http. Now I want to add https support and still use basicHttpBinding. Any easy to learn tutorials? I do not want to make too much modification to my WCF client/server and want to find a way which involves minimal code change. :-)</p>\n\n<p>BTW: for IIS server certificate, I want client side to accept all server certificate. And I just use https encryption feature.</p>\n\n<p>thanks in advance,\nGeorge</p>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":44,"score":-2,"question_id":13107653,"title":"Control a C# Windows Application over the Internet","body":"<p>I am planing for some changes in my software. My C# windows application runs on the clients, and I wan't some kind of tunnel to control my application over the internet.</p>\n\n<p>I'm thinking web services may be my solution, but I would like some more information about how this would work.</p>\n\n<p>For example: I would like to delete my application from clients on demand, or expire the licence on the client, etc.</p>\n"},{"tags":["c#",".net","wcf","service","nettcpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13107719,"title":"wcf login method create own method","body":"<p>after working on wcf security i decide create my own log in method. it was too hard to config service with custom username and password security i did all help about this issue.</p>\n\n<p><strong>So i decide create my own function for this</strong> .</p>\n\n<p>now i need have a function in my service that request, user and pass as argument.i need force client to call this method first i know how do this . i will do with IsInitiating attribute.</p>\n\n<ol>\n<li>but now i want do not let client use other methods before success log in.</li>\n<li>i want close service after client had 3 fail try on log in.</li>\n</ol>\n\n<p>note :\ni have a nettcpbinding service with buffering and none security.this service will work on local network . (.net 4)</p>\n"},{"tags":[".net","wcf","asynchronous","async-await"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13096425,"title":"Chaining Async Methods in WCF Service","body":"<p>I'm having a bit of trouble with the Async pattern and chaining methods in a WCF service.  The client is calling up to the WCF asyncronously, then the service method needs to asynchronously open a SOAP proxy and call some methods.  </p>\n\n<p>The problem is the nature of the Soap service is sequential, meaning i need one result, before i can get the next and return it to the calling WCF service. I am trying to use the Async pattern, but failing miserably here, because the sequential calls are bottlenecking the other async calls until it completes.</p>\n\n<p>Is there any way to chain these Async SOAP methods, to prevent a bottleneck?</p>\n\n<pre><code>[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]\npublic class DetailsService : IDetailService\n{\n\n    public DetailEntity GetDetails(DetailEntity entity)\n    {\n\n        TransactionUtilities.GetTransactionDetails(entity);\n\n         // return modified entity with details\n        return entity;\n\n    }\n\n}\n\npublic static class TransactionUtilities\n{\n    static SoapClient SoapProxy { get; set; }\n\n    public static void GetTransactionDetails(DetailEntity entity)\n    {\n        IAsyncResult ar = SoapProxy.BeginExecuteTransaction(loginToken, new AsyncCallback(OnExecuteTransactionEnd), null);\n        // will this block other async calls?\n        ar.AsyncWaitHandle.WaitOne();\n        string transactionId = SoapProxy.EndExecuteTransaction(ar);\n\n        // another async call dependent on above transactionId\n        IAsyncResult ar = SoapProxy.BeginGetTransactionResult(loginToken, processId, new AsyncCallback(OnTransactionResultEnd), null);\n        ar.AsyncWaitHandle.WaitOne();\n        Row[] TransactionResult = SoapProxy.EndGetTransactionResult(ar);\n\n        // do work with result\n    }\n\n            // call back methods, just haning out doing nothing\n    static void OnExecuteTransactionEnd(IAsyncResult result) { }\n    static void OnTransactionResultEnd(IAsyncResult result) { }\n\n}\n</code></pre>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13105175,"title":"A bit confused about .NET's WCF configuration basics","body":"<p>I'm new to WCF, so I opened up 2 projects: WCF class library and a host console application.\nNow, both projects have app.config to store the WCF service configuration settings.</p>\n\n<p>As it seems to me now, and correct me if I'm wrong, I have redundancy in configuring both projects with WCF settings.</p>\n\n<p>How is it done in real world production software ? Does it use separate *.dll library for WCF services, or is it implemented withing the host project (and by that use a single place configuration of it) ?</p>\n\n<p>Thank you .</p>\n"},{"tags":["wcf",".net-4.0","datacontractserializer"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1428,"score":1,"question_id":9191167,"title":"Maximum number of items that can be serialized or deserialized in an object graph... with knowtypes","body":"<p>In a WCF 4.0 service we receive a huge amount of data in a generic list. This list object graph is bigger than the 65536 default limit. We are quite used to it, so we have configured the service for being able to getting those big graphs. </p>\n\n<pre><code>&lt;serviceBehaviors&gt;\n    &lt;behavior&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n</code></pre>\n\n<p>With the above chunk of xml config we have avoided the problem in the past with no problem, but now it doesn't work. The only difference is that here we are using <strong>KnownTypes</strong> in the huge list elements that we are trying to deserialize in the WCF method.</p>\n\n<p>Maybe, am I missing some special configuration for knowntypes?</p>\n"},{"tags":["c#","wcf","mex"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":4033,"score":5,"question_id":709279,"title":"WCF Mex End Points for Multiple Bindings","body":"<p>I'm building a WCF service that will expose BasicHttp and NetTcp bindings.  I've also added two corresponding Mex endpoints, i.e.</p>\n\n<pre><code> &lt;service name=\"WCFTest.CalculatorService\" behaviorConfiguration=\"WCFTest.CalculatorBehavior\"&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress = \"http://localhost:8000/WCFTest/CalculatorService/\" /&gt;\n        &lt;add baseAddress = \"net.tcp://localhost:9000/WCFTest/CalculatorService/\" /&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n\n    &lt;endpoint address =\"basicHttpEP\" binding=\"basicHttpBinding\" contract=\"WCFTest.ICalculatorService\"/&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n\n    &lt;endpoint address =\"netTcpEP\" binding=\"netTcpBinding\" contract=\"WCFTest.ICalculatorService\"/&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexTcpBinding\" contract=\"IMetadataExchange\"/&gt;\n\n  &lt;/service&gt;\n</code></pre>\n\n<p>Do I really need to add a NetTcp Mex endpoint as well as an BasicHttp Mex endpoint?  Will clients not just always use the Http mex endpoint for meta data disocvery regardless of whether they're going to communicate using tcp or not?</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","object","return"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13105314,"title":"Object return type on WCF service","body":"<p>I'm using WCF service in my application.My plan is design service contract as follows:</p>\n\n<pre><code>[ServiceContract]\npublic interface IService\n{\n\n    [OperationContract]\n    object ServiceCall(string typeName, string methodName,  object[] methodParameters);\n}\n</code></pre>\n\n<p>i will call ServiceCall method by given params from client side.</p>\n\n<p>then on server side i will create method info and call specified method and return response to client.\nBy this way single method will solve all my remote cals. because of known types issue in WCF i cant create such service.return type and method parameter object [] methodParameters can not be type of object</p>\n\n<p>How can i solve this problem? Or instead what can i do?</p>\n"},{"tags":["c#","asp.net","wcf","debugging","iis"],"answer_count":31,"favorite_count":21,"up_vote_count":59,"down_vote_count":0,"view_count":47334,"score":59,"question_id":2301216,"title":"The breakpoint will not currently be hit. No symbols have been loaded for this document","body":"<p>Ok, what i have: </p>\n\n<p>Visual Studio 2010 RC, W7 x64, started a new project type of Silverlight application. Hosting the Silverlight application in a ASP.NET Web Application Project. Silverlight Version 3.0.\nAdded a LinqToSQL Class, a WCF Service, a Winform Tester Application (Project in the Solution) and a few Classes (also as Projects in the Solution).</p>\n\n<p>Yesterday, suddenly i got the 'The breakpoint will not currently be hit. No symbols have been loaded for this document.' message to appear in the IDE, but it only affects the Web Appliaction, i can debug the Silverlight and the Winform App.</p>\n\n<p>What i tried / did to get rid of the message:</p>\n\n<p>Reset Visual Studio Settings, removed all files in every \\Temporary ASP.NET Files Folder (there is one for each 32bit/64bit and for Framework 2.0 and 4.0), tried to debug using Visual Studio Integrated Web server - normally i use IIS, in the project output of the solution i deleted every obj and bin folders in every project folder, created a new solution and added all the projects to this new solution, deleted the solution suo file, created a new ASP.NET Web Application to test if it is a VS-installation issue => i can debug this new project/solution, rebooted the machine several times, repaired the vs.net installation, did an IISReset, removed the Web App from IIS, used the Create Virtual Directory Button under Project Properties of the Web App to create a new Web App in IIS, changed the Framework Version of every project from 3.5 to 4.0. Opened the Solution on my second machine=> same behavior, crawled Microsoft Connect for bugs / similar issues. SPENT 7 HOURS. </p>\n\n<p>So, this happens the 2nd time in my life. last time i solved it by deleting Temporary ASP.NET Files Folder, but this time i need your help.</p>\n"},{"tags":[".net","wcf","code-security"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":626,"score":3,"question_id":4995687,"title":"Creating custom CodeAccessSecurityAttribute leads to exception on compile","body":"<p>I'm building a custom CodeAccessSecurityAttribute to handle authorization for my WCF services. I built class A as such:</p>\n\n<pre><code>public class A : CodeAccessSecurityAttribute\n{\n    public A() : base(SecurityAction.Demand)\n    {\n        // Constructor Code\n    }\n\n    public override IPermission CreatePermission()\n    {\n        // Permission Creation Code\n    }\n\n}\n</code></pre>\n\n<p>And on compilation it produces this error.</p>\n\n<pre><code>Error emitting 'A' attribute -- 'Serialized security custom attribute is \ntruncated or incorrectly formed.'\n</code></pre>\n\n<p>After playing with it a little I came up with the next sample that does compile without error:</p>\n\n<pre><code>public class B : CodeAccessSecurityAttribute\n{\n    public B(SecurityAction Action) : base(Action)\n    {\n        // Constructor Code\n    }\n\n    public override IPermission CreatePermission()\n    {\n        // Permission Creation Code\n    }\n\n}\n</code></pre>\n\n<p>I know it's because the SecurityAction enum isn't directly referenced to public side of Class A, but what I can't figure out is how to make it so that I can do it the Class A method instead of the Class B.</p>\n"},{"tags":["silverlight","wcf"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":4759,"score":3,"question_id":3866929,"title":"Another \"The maximum string content length quota (8192) has been exceeded while reading XML data.\" issue with WCF and Silverlight 4","body":"<p>I have no trouble retrieving a large amount of data, but sending it back to the service displays this error. I've tried adding the  element to both the web.config and servicereferences.clientconfig and it's not recognized in either. At one point I got a message about adding readerQuotas to bindingElementExtensions, but I can't find anything useful on how to do this. I found posts saying I had to modify the devenv.exe.config and such, but doing that hosed VS. I've been trying to solve this for two days so any help would be appreciated.</p>\n\n<p>edit: here's the binding section of the web.config:</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;customBinding&gt;\n    &lt;binding name=\"QaRiM.Web.Service1.customBinding0\"&gt;\n      &lt;binaryMessageEncoding /&gt;\n      &lt;httpTransport maxReceivedMessageSize=\"2147483647\" maxBufferSize=\"2147483647\" /&gt;\n    &lt;/binding&gt;\n  &lt;/customBinding&gt;\n&lt;/bindings&gt;\n&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"\n  multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;services&gt;\n  &lt;service name=\"QaRiM.Web.Service1\"&gt;\n    &lt;endpoint address=\"\" binding=\"customBinding\" bindingConfiguration=\"QaRiM.Web.Service1.customBinding0\"\n      contract=\"QaRiM.Web.Service1\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<p>and the servicereferences.clientconfig:</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;customBinding&gt;\n                &lt;binding name=\"CustomBinding_Service1\"&gt;\n                    &lt;binaryMessageEncoding /&gt;\n                    &lt;httpTransport maxReceivedMessageSize=\"2147483647\" maxBufferSize=\"2147483647\" /&gt;\n                &lt;/binding&gt;\n            &lt;/customBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://localhost:36533/Service1.svc\" binding=\"customBinding\"\n                bindingConfiguration=\"CustomBinding_Service1\" contract=\"ServiceReference1.Service1\"\n                name=\"CustomBinding_Service1\" /&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Both were generated by VS.</p>\n"},{"tags":["wcf","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13099225,"title":"Setting ClientCredentials: getting \"Username is not provided\" error","body":"<p>I'm tasked with creating a WCF service from a local wsdl file. I have done some R&amp;D on this task. I have added a web reference of that local wsdl file. Now I want to create a client for this service in order access the service. </p>\n\n<p>How do I provide the username and password in the client?</p>\n\n<p>Currently, when I am accessing the service methods in the client I get an error:</p>\n\n<blockquote>\n  <p>Username is not provided.</p>\n</blockquote>\n\n<p>Here's the relevant code:</p>\n\n<pre><code> ServiceGetProductFeeds.ProductFeedServiceClient  SerProdFeeds = new ServiceGetProductFeeds.ProductFeedServiceClient();\n SerProdFeeds.ClientCredentials.UserName.UserName = \"XXXXXX\";\n SerProdFeeds.ClientCredentials.UserName.Password = \"*******\";\n SerProdFeeds.getProductFeed(); \n</code></pre>\n\n<p>Any tips on what's not correct with the above code?</p>\n"},{"tags":["asp.net","wcf"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":190,"score":2,"question_id":12886991,"title":"Calling WCF Server from ASP.NET","body":"<p>I have a simple WCF server that is using DuplexChannelFactory and named pipes.  I can call it from a console application and I can call it from a WPF application.  However, is it possible to call the same WCF server from ASP.NET and still be able to call it from console\\WPF app?</p>\n\n<p>I am using the following endpoint:</p>\n\n<pre><code>[ServiceContract(SessionMode = SessionMode.Required,\n  CallbackContract = typeof(IMyWCFClient))]\npublic interface IMyWCFServer\n{\n    [OperationContract]\n    bool Subscribe();\n    [OperationContract]\n    bool UnSubscribe();\n}\n</code></pre>\n\n<p>Can I update this to be callable from ASP.NET?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13100086,"title":"This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded","body":"<p>I have a asp.net solution with these tiers (WebTier,BAL,DAl and Service)</p>\n\n<p>I m generating Proxy using bat file for accessing the service.like below</p>\n\n<p><code>%svcutil% /noconfig %baseurl%xxxxx.svc /n:*,xxxxx /r:../bin/xxxx.Business.dll /r:%systemdata%</code></p>\n\n<p>when I run the <code>bat</code> file I am getting Could not load file or assessmebly <code>Business.dll</code>,This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded.</p>\n\n<p>but all the Tiers are targeting only.net 4.0, i really dont know what is the problem,</p>\n\n<p>Thanks and advance.</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6419,"score":0,"question_id":528518,"title":"WCF System.ServiceModel.Security.SecurityNegotiationException","body":"<p>I am getting the following error message when trying to call my service from another server.</p>\n\n<p>Service cannot be started. System.ServiceModel.Security.SecurityNegotiationException: The caller was not authenticated by the service. ---> System.ServiceModel.FaultException: The request for security token could not be satisfied because authentication failed.</p>\n\n<p>in my Event Viewer when I tried to connect the client to the server.</p>\n\n<p>I enabled tracing in the server and it looks like the</p>\n\n<p>System.IdentityModel.Tokens.SecurityTokenValidationException is being thrown. The message says \"The service does not allow you to log on anonymously.\"</p>\n\n<p>I checked IIS -> WCF website and I do have the \"Enable anonymous access\" enabled. What am I missing?</p>\n"},{"tags":["asp.net","wcf","iis8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13099981,"title":"`standardEndpoint` causing Exception `A binding instance has already been associated to listen URI ...`","body":"<p>I'm using ASP.Net routing to host service on <code>127.0.0.1</code> (in Win8+IIS8) like</p>\n\n<pre><code>WebServiceHostFactory factory = new WebServiceHostFactory();\nRouteTable.Routes.Add(new ServiceRoute(\"Services/ABC/\", factory, typeof(ABCService)));\n</code></pre>\n\n<p>And default behavior for endpoints like </p>\n\n<pre><code>&lt;standardEndpoints&gt;\n    &lt;webHttpEndpoint&gt;\n        &lt;standardEndpoint helpEnabled=\"false\"\n                          automaticFormatSelectionEnabled=\"true\"\n                          faultExceptionEnabled=\"false\"\n                          crossDomainScriptAccessEnabled=\"true\"\n                          defaultOutgoingResponseFormat=\"Json\"\n                          hostNameComparisonMode=\"StrongWildcard\"\n                          transferMode=\"Streamed\"&gt;\n            &lt;security mode=\"None\" /&gt;\n        &lt;/standardEndpoint&gt;\n    &lt;/webHttpEndpoint&gt;\n&lt;/standardEndpoints&gt;\n</code></pre>\n\n<p>These settings are causing a error <code>A binding instance has already been associated to listen URI 'http://&lt;MachineName&gt;/Services/IMAPI/'. If two endpoints want to share the same ListenUri, they must also share the same binding object instance. The two conflicting endpoints were either specified in AddServiceEndpoint() calls, in a config file, or a combination of AddServiceEndpoint() and config.</code></p>\n\n<p>I'm not sure about this error, why it is occurring as i'm not experienced in WCF but this error goes on removing web.config's configuration of standardEndpoint.</p>\n"},{"tags":["wcf","c#-4.0","wcf-data-services","wcf-client"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13098288,"title":"Operation Contract not working with WCF Test Client","body":"<p>i am getting an error </p>\n\n<pre><code>this operation is not supported in wcf test client because it uses system.object\n</code></pre>\n\n<p>Heres my code screenshot for IService.cs:\n<img src=\"http://i.stack.imgur.com/HDNin.png\" alt=\"enter image description here\"></p>\n\n<p>heres my screenshot for reference.cs\n<img src=\"http://i.stack.imgur.com/6UGIs.png\" alt=\"enter image description here\"></p>\n\n<p>but still i am getting this error ::\n<img src=\"http://i.stack.imgur.com/C9YwI.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net","wcf"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":12350,"score":4,"question_id":3847359,"title":"Endpoint not found When Hosting in ASP.NET","body":"<p>I get \"Endpoint not found\" when attempting to access my service via the browser at </p>\n\n<pre><code>http://localhost:10093/Services/Service1.svc\n</code></pre>\n\n<p>I get \"Error: Cannot obtain Metadata from <a href=\"http://localhost:10093/Services/Service1.svc\" rel=\"nofollow\">http://localhost:10093/Services/Service1.svc</a>\" when attempting to access the same address from the wcftestclient.</p>\n\n<p>If I place a breakpoint in the service implementation it is hit, so I assume the svc file is setup correctly:</p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" \nService=\"MyApp.Core.Service.Service.MyAppService,MyApp.Core.Service\" \nFactory=\"CommonServiceFactory.WebServiceHostFactory,CommonServiceFactory\" %&gt;\n</code></pre>\n\n<p>Here is my config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"MyApp.Core.Service.Service.MyAppService,MyApp.Core.Service\"\n               behaviorConfiguration=\"MainServiceBehavior\"&gt;\n        &lt;endpoint name=\"newEndpoing\" \n             binding=\"basicHttpBinding\" bindingConfiguration=\"\"\n             contract=\"MyApp.Core.Service.IMyAppService\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"MainServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","wcf","exception-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":99,"score":3,"question_id":13088257,"title":"Catching all exceptions in current thread","body":"<p>In my web application I have a one way async WCF service. In this service I want to catch all exceptions like I do in global.asax Application_Error.\nI've tried to handle these events:</p>\n\n<pre><code>AppDomain.CurrentDomain.UnhandledException += (s,e) =&gt; { //some logic };\nAppDomain.CurrentDomain.FirstChanceException += (s,e) =&gt; { //some logic };\n</code></pre>\n\n<p>even tried:</p>\n\n<pre><code>//this one is for Win Forms Application\nApplication.ThreadException += (s,e) =&gt; { //some logic };\n</code></pre>\n\n<p>and</p>\n\n<pre><code>//this one is for Web Application\nHttpContext.Current.ApplicationInstance.Error += (s,e) =&gt; { //some logic };\n</code></pre>\n\n<p>But none of these handlers are reached. </p>\n\n<p>Any ideas, what else can I try?</p>\n"},{"tags":["c#","wcf","deserialization"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13040959,"title":"Deserializing WCF Message at Server","body":"<p>I implemented a custom message inspector (via IDispatchMessageInspector) to intercept messages that are received on the server side of a WCF service so I can attempt to deserialize the message and apply some specific business logic. The problem I'm encountering is when I write the MessageBuffer's contents to a new MemoryStream and then try to deserialize, I get an error that says \"The data at the root level is invalid. Line 1, position 1.\" I do know the data being passed in is valid as skipping over the inspector makes everything work fine.</p>\n\n<p>Sample Code:</p>\n\n<pre><code>public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)\n    {\n        MessageBuffer buffer = request.CreateBufferedCopy(Int32.MaxValue);\n        request = buffer.CreateMessage();\n        string msg = buffer.CreateMessage().ToString();\n\n        var dc = new DataContractSerializer(typeof(Adder));\n\n        using (var stream = new MemoryStream())\n        {\n            buffer.WriteMessage(stream);\n\n            stream.Position = 0;\n\n            //deserializing error occurs here\n            var c = dc.ReadObject(stream);\n        }\n\n        return null;\n    }\n</code></pre>\n\n<p>Here is the Adder class/interface:</p>\n\n<pre><code>    [DataContract(Name = \"adder\", Namespace = \"http://test.com\")]\npublic class Adder\n{\n    [DataMember(Name = \"first\")]\n    public int First { get; set; }\n\n    [DataMember(Name = \"second\")]\n    public int Second { get; set; }\n}\n\n    [ServiceContract(Namespace = \"http://test.com\")]\npublic interface ITestSvc\n{\n    [OperationContract(Name = \"add\")]\n    int Add(Adder adder);\n}\n</code></pre>\n\n<p>Any suggestions or is there a better option for this? My main goal is to read the XML (in a deserialized object) on every WCF request that comes into my service.</p>\n"},{"tags":["wcf","ip-address","wcf-binding","wcf-client"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":701,"score":1,"question_id":3249846,"title":"Specify the outgoing IP address to use with WCF client","body":"<p><b>How to define the LocalEndPoint to use by a WCF client when calling a WCF service (if the client machine has multiple IP addresses) ?</b></p>\n\n<p>I have a machine located in a DMZ with two IP addresses, the external IP address can be reached through the firewall via a VPN connection from our webserver, located at an external service provider. On this machine runs a WCF and Unity-based custom app server, which should act as proxy or application level gateway (ALG). It shall accept the service calls from the web server and uses a wcf client factory to regenerate the service calls, forwarding them to the real app server in the LAN.</p>\n\n<p>When re-creating the service calls on this proxy using a wcf client factory, the wcf client should use the second, internal IP address of this machine, because only messages coming from this internal IP address will be allowed to pass the firewall to reach the app server in the LAN. Unfortunately our wcf client proxies always choose to create the outgoing messages using the first, \"external\" IP addresses. I am looking for a way to explicitly setting the IP address to use by the wcf client proxies.</p>\n\n<p>I could find only one WCF binding element that allows the definition of a LocalEndPoint or ClientBaseAddress: CompositeDuplexBindingElement. As far as I understand from the documentation this property is meant to tell the server where to send the asynch reply messages, so it's a different setting than what I am looking for.</p>\n\n<p>Any Idea what I can do to come to a workable solution?</p>\n\n<p><b>Thanks in advance for any helpful advice!!</b></p>\n\n<p>This seems to be a similar question, just using TcpClient/Sockets instead of WCF:\n<a href=\"http://stackoverflow.com/questions/2016012/specify-the-outgoing-ip-address-to-use-with-tcpclient-socket-in-c\">http://stackoverflow.com/questions/2016012/specify-the-outgoing-ip-address-to-use-with-tcpclient-socket-in-c</a></p>\n\n<p>And another one, this time regarding a SoapClient:\n<a href=\"http://stackoverflow.com/questions/321788/c-binding-a-new-soapclient-to-a-specific-ip-address-before-sending-outgoing-req\">http://stackoverflow.com/questions/321788/c-binding-a-new-soapclient-to-a-specific-ip-address-before-sending-outgoing-req</a></p>\n"},{"tags":["android","wcf","web-services","ksoap2","android-ksoap2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":343,"score":0,"question_id":9515086,"title":"Consuming WCF service through KSOAP2 on Android gives errors","body":"<p>I have the following <a href=\"http://50.19.226.15/Office365Admin/MsOnline.svc?wsdl\" rel=\"nofollow\">WCF webservice</a></p>\n\n<p>I want to consume it in android client.My code so far is</p>\n\n<pre><code>public class SOAP_TestActivity extends Activity {\n\n  private final String NAMESPACE = \"http://tempuri.org/\";\n  private final String URL = \"http://50.19.226.15/Office365Admin/MsOnline.svc\";\n  private final String SOAP_ACTION = \"http://tempuri.org/IMsOnline/ValidateUser\";\n  private final String METHOD_NAME = \"ValidateUser\";\n\n\n  private final  String user_id= \"khurram@office365trial.com.au\";\n  private final  String password= \"friday@123\";\n\n  @Override\n   public void onCreate(Bundle savedInstanceState)\n      {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n\n        Button signin = (Button) findViewById(R.id.regsubmitbtn);\n        signin.setOnClickListener(new OnClickListener() {\n                public void onClick(View v) {\n\n                        boolean auth=doLogin();\n                        System.out.println(auth);\n                        Toast.makeText(getApplicationContext(), String.valueOf(auth), Toast.LENGTH_SHORT).show();\n\n                }\n           });   \n     }\n\n    private boolean doLogin() {   \n\n   boolean result=false;\n\n   SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\n\n   request.addProperty(\"userid\", user_id);\n   request.addProperty(\"password\",password);\n\n   SoapSerializationEnvelope envelope = new   SoapSerializationEnvelope(SoapEnvelope.VER11);\n\n   envelope.dotNet = true;         \n\n   envelope.setOutputSoapObject(request);\n\n   Log.d(\"myApp\", request.toString());\n   System.out.println(request);\n\n   HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);\n   androidHttpTransport.debug = true;\n\n   try {\n           androidHttpTransport.call(SOAP_ACTION, envelope);\n\n           SoapPrimitive soapPrimitiveResults = (SoapPrimitive)envelope.getResponse();                        \n\n           Log.d(\"myApp\", soapPrimitiveResults.toString());\n           System.out.println(\"myApp\" +soapPrimitiveResults);\n\n                   if(soapPrimitiveResults.toString().equalsIgnoreCase(\"true\"))\n       {\n                   result = true;\n\n       }\n\n   }catch(SocketException ex)\n   {\n       Log.e(\"Error : \" , \"Error on soapPrimitiveData() \" + ex.getMessage());\n       ex.printStackTrace();\n   }\n   catch (Exception e) {\n       Log.e(\"Error : \" , \"Error on soapPrimitiveData() \" + e.getMessage());\n           e.printStackTrace();\n   }\n   return result;\n\n   }\n   }\n</code></pre>\n\n<p>This code works without any exception but I am not able to login into my application as the method <code>ValidateUser</code> always return false.This same webservice has been consumed in Windows Phone and is working without any problem.Also the username and password are 100% correct.</p>\n\n<p>Looks like there is some problem in the <code>NAMESPACE</code> and <code>SOAP_ACTION</code>. I have gone through some tutorials and they say that the <code>SOAP_ACTION</code> is made by concatenating <code>NAMESPACE</code> with <code>METHOD_NAME</code>.So if I follow the tutorials my <code>SOAP_ACTION</code> should be </p>\n\n<p><code>\"http://tempuri.org/ValidateUser\"</code></p>\n\n<p>but the <code>SOAP_ACTION</code> given in the <code>WSDL link</code>for the method <code>\"ValidateUser\"</code> is</p>\n\n<p><code>\"http://tempuri.org/IMsOnline/ValidateUser\"</code>.</p>\n\n<p>I am new to WCF Webservices and SOAP.Can anybody please tell me how to implement the methods given in <code>WSDL Document(link is at the top)</code>.\nLooks like missing something important but don't know what.</p>\n"},{"tags":["wcf","workflow-foundation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13077201,"title":"Invoke WCF Workflow Service using different endpoint addresses","body":"<p>I created a Workflow Foundation workflow which will eventually invoke another Workflow Service. I added the call to this service by dragging the appropriate shape from the toolbox onto the designer. The shape was available because I added the Workflow Service as a service reference as recommended.</p>\n\n<p>How can I specify a specific endpoint address for this web service? I can't find a way to programmatically specify the address.\nThe workflow always uses the address specified in the web.config. But based on certain conditions I want to use different addresses.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Here is a picture I created to illustrate the problem:</p>\n\n<p><img src=\"http://i.stack.imgur.com/lVwwA.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#",".net","wcf","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13092555,"title":"Creating a custom validation through DataAnnotations?","body":"<p>Ok so when I want to have a property be validated, I might write something like this:</p>\n\n<pre><code>    [Required]\n    [StringLength(255)]\n    [DataType(DataType.EmailAddress)]\n    [RegularExpression(RegexStrings.Email, ErrorMessage = \"Email is not valid.\")]\n    [DataMember(IsRequired = true, Name=\"Email\", Order = 1)]\n    public string Email { get; set; }\n</code></pre>\n\n<p>I like this because in this case, I point it to the regex strings that we have in our common library and specify an error message if it fails. Simple and clean.</p>\n\n<p>My situation is this. This is in a WCF RESTful service. One of the properties that I want validated <em>in this fashion</em> needs to be validated using a custom method which validates using some business logic (it checks the string length and byte length). Can I (and how do i) set up this custom validation so that I can use it like it used in the above example; so it looks something like:</p>\n\n<pre><code>[StreamValidation(ValidationClass, ErrorMessage = \"Serial number is invalid\")]\npublic string Ksn { get; set; }\n</code></pre>\n\n<p>UPDATE:</p>\n\n<p>I have constructed the following class to be my attribute:</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = false)]\npublic class KsnValidation : ValidationAttribute\n{\n    public override bool IsValid(object value)\n    {\n        if (!(value is string)) return false;\n\n        var val = (string) value;\n        var bytes = Enumerable\n            .Range(0, val.Length / 2)\n            .Select(x =&gt; Byte.Parse(val.Substring(2 * x, 2), NumberStyles.HexNumber))\n            .ToArray();\n        return val.Length == 20 &amp;&amp; bytes.Length == 10;\n    }\n\n    public override string FormatErrorMessage(string name)\n    {\n        return base.FormatErrorMessage(name);\n    }\n}\n</code></pre>\n\n<p>Then decorated the following property:</p>\n\n<pre><code>[KsnValidation(ErrorMessage = \"Wrong Name\")]\npublic string Ksn { get; set; }\n</code></pre>\n\n<p>But I'm not sure how to unit test this</p>\n"},{"tags":["c#","wcf","architecture","disaster-recovery"],"answer_count":3,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2370,"score":5,"question_id":391296,"title":"WCF Pub/Sub with subscriber caching","body":"<p><strong>Problem:</strong> how to provide a distributed, scalable and disaster resistant pub/sub service with WCF.</p>\n\n<p><strong>Details:</strong></p>\n\n<p><em>Note that this approach is being considered in addition to messaging/middleware solutions such as Tibco EMS.</em></p>\n\n<p>I've been looking into WCF, particularly how it may be used to offer pub/sub.  On this subject this article is very good: <a href=\"http://msdn.microsoft.com/en-gb/magazine/cc163537.aspx\" rel=\"nofollow\">WCF pub-sub</a>.</p>\n\n<p>In the article the author attempts to tackle the problem of having multiple publishers (as one would have with a service layer scaled across several boxes).  The problem being that if client A registers with Publisher A but Publisher B wishes to publish an event, then publisher B won't know about client A.  i.e. no one told publisher B that client A wanted to be notified about events.  The author suggests a pub/sub service as a solution.  The pub/sub service would centrally store subscriptions.  However, if I wanted to make the pub/sub service disaster resistant by having a secondary/dual pub/sub service then I have the same original problem.</p>\n\n<p>So, I think there are a couple of solutions to the problem:</p>\n\n<ol>\n<li>Store subscriber details in a distributed cache (see questions: <a href=\"http://stackoverflow.com/questions/125697/wcf-application-caching-implementation\">q1</a> and <a href=\"http://stackoverflow.com/questions/21870/systemwebcaching-vs-enterprise-library-caching-block\">q2</a>).</li>\n<li>Store subscriber details in a database/central file system.</li>\n</ol>\n\n<p>Can anyone think of any other solutions (i.e. I've not missed some fantastic magical feature of WCF?)\nAny comments appreciated.</p>\n"},{"tags":["c#",".net","wcf","visual-studio"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":168,"score":0,"question_id":13092781,"title":"WCF with visual studio 2012","body":"<p>I am new WCF programming, I did followed series of Getting Started tutorials from following link</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ms734712.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ms734712.aspx</a></p>\n\n<p>I have hosted service in console application but when I tried to create a client and tried to add service reference I got the following exceptions. </p>\n\n<pre><code>There was an error downloading 'http://localhost:8000/GettingStarted/mex/_vti_bin/ListData.svc/$metadata'.\nThe request failed with HTTP status 405: Method Not Allowed.\nMetadata contains a reference that cannot be resolved: 'http://localhost:8000/GettingStarted/mex'.\nThere was no endpoint listening at http://localhost:8000/GettingStarted/mex that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.\nThe remote server returned an error: (404) Not Found.\nIf the service is defined in the current solution, try building the solution and adding the service reference again.\n</code></pre>\n\n<p>code of hosting application </p>\n\n<pre><code>class Program\n    {\n        static void Main(string[] args)\n        {\n            // Step 1 Create a URI to serve as the base address.\n            Uri baseAddress = new Uri(\"http://localhost:8000/GettingStarted/\");\n\n            // Step 2 Create a ServiceHost instance\n            ServiceHost selfHost = new ServiceHost(typeof(CalculatorService), baseAddress);\n\n            try\n            {\n                // Step 3 Add a service endpoint.\n                selfHost.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(), \"CalculatorService\");\n\n                // Step 4 Enable metadata exchange.\n                ServiceMetadataBehavior smb = new ServiceMetadataBehavior();\n                smb.HttpGetEnabled = true;\n                selfHost.Description.Behaviors.Add(smb);\n\n                // Step 5 Start the service.\n                selfHost.Open();\n                Console.WriteLine(\"The service is ready.\");\n                Console.WriteLine(\"Press &lt;ENTER&gt; to terminate service.\");\n                Console.WriteLine();\n                Console.ReadLine();\n\n                // Close the ServiceHostBase to shutdown the service.\n                selfHost.Close();\n            }\n            catch (CommunicationException ce)\n            {\n                Console.WriteLine(\"An exception occurred: {0}\", ce.Message);\n                selfHost.Abort();\n            }\n        }\n    }\n</code></pre>\n\n<p>Now I am unable to figure out what the problem is. I am using visual studio 2012 and .net platform 4.5. </p>\n"},{"tags":["c#","wcf","parameters","proxy"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13093113,"title":"WCF Proxy Behaviors and Params","body":"<p>Using an IExtension, I've made a client-side behavior that takes a parameter from whatever client is using the proxy.  And while my approach works, I want a better way.  </p>\n\n<p>Now I'll share details of my current working approach, to clarify what I'm trying to do.</p>\n\n<p>The client using the proxy supplies the parameter like this:</p>\n\n<pre><code>var client = new ServiceAlphaClient();\n\nclient.InnerChannel.Extensions.Add(new ParameterHolder(\"hello\"));\n\nclient.DoSomething(\"some interesting service invocation\");\n\nclient.Close();\n</code></pre>\n\n<p>The IExtension <code>ParameterHolder</code> looks like this:</p>\n\n<pre><code>public class ParameterHolder: IExtension&lt;IContextChannel&gt;\n{\n\n    public string someParam;\n\n    public ParameterHolder(string someParam)\n    {\n        this.someParam = someParam;\n    }\n\n    #region IExtension required-but-useless stuff\n    public void Attach(IContextChannel owner)\n    {\n    }\n\n    public void Detach(IContextChannel owner)\n    {\n    }\n    #endregion\n}\n</code></pre>\n\n<p>The client-side behavior-extension which uses the parameter looks like this:</p>\n\n<pre><code>    #region IClientMessageInspector\n    public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)\n    {\n        //throw new NotImplementedException();\n    }\n\n    public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)\n    {\n        ParameterHolder holder = channel.Extensions.Find&lt;ParameterHolder&gt;();\n\n        string param = holder.someParam;\n\n        request.Headers.Add(MessageHeader.CreateHeader(headerName, headerNamespace, someParam));\n        return null;\n    }\n    #endregion\n</code></pre>\n\n<p>What I don't like about all the above:</p>\n\n<ol>\n<li>The ClientMessageInspector extension is repeatedly calling Extensions.Find for every outgoing request.  That is both needless and inefficient.</li>\n<li>The client using my proxy must supply the parameter for each new proxy created.</li>\n</ol>\n\n<p>Regarding the first problem, in the inspector extension I could store and test for the value for better efficiency, but I'd rather be able to fetch this parameter just once at an earlier stage.  Specifically, I'd like the IContractBehavior itself to be able to fetch the parameter either in AddBindingParameters(...) or ApplyClientBehavior(...).  But I don't know how to reach the client channel from there.</p>\n\n<p>Regarding the second problem, I'd prefer not to set the parameter on each proxy instance with Extensions.Add().  I wish I could set the parameter statically on the client, and somehow still have the behavior extension reach-back and fetch it.  I can't quite figure how to leverage a partial class to help.</p>\n\n<p>Anyway to solve these problems?  Have an overall better approach for passing \"meta-parameters\" to a WCF proxy?</p>\n"},{"tags":["javascript","jquery","wcf","jsonp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13023541,"title":"Handling error responses from WCF JSONP","body":"<p>I have a WCF service exposing a JSONP interface by setting the <code>CrossDomainScriptAccessEnabled</code> property on the binding. There is an example with code similar to mine <a href=\"http://www.codeproject.com/Articles/223572/Calling-Cross-Domain-WCF-service-using-Jquery-Java\" rel=\"nofollow\">here</a>. When the server would normally return HTTP 200 it behaves as I expected and returns javascript like <code>jsonp_callback({\"result\":5})</code>. However when I throw an exception the format is something like:</p>\n\n<pre><code>jsonp_callback({\"error_message\":\"needs auth\"}, 401);\n</code></pre>\n\n<p>The problem there is that as far as I can tell jQuery always expects a single parameter in the JSONP callback. Is there any way I can access the second parameter with jQuery's JSONP handling? Is there another sensible framework that would make this easier? </p>\n"},{"tags":["ajax","wcf","web-services","pass-through"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4688,"score":0,"question_id":5738097,"title":"jQuery Ajax with Json call to WCF service pass-through to WCF service","body":"<p>I'm attempting to use jQuery Ajax call with Json to call a webservice which is a pass-through and calls another webservice.  This works if I don't use ajax, works as an ajax call to the backend service directly, but does not work as ajax call to pass-through service.  My question is how do I get an ajax to pass-through webservice to webservice to work?</p>\n\n<p>This is the code I have so far:</p>\n\n<pre><code>[ServiceContract]\npublic interface IService1\n{\n\n    [OperationContract]\n    [WebInvoke(Method = \"POST\", BodyStyle = WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]\n    string GetData(int value);\n    }\n</code></pre>\n\n<p>Behind webservice:</p>\n\n<pre><code>[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class Service1 : IService1\n{\n    public string GetData(int value)\n    {\n        return string.Format(\"You entered: {0}\", value);\n    }\n}\n</code></pre>\n\n<p>Pass-through service:</p>\n\n<pre><code>[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class Service2 : IService1\n{\n    public string GetData(int value)\n    {\n       var service = new ServiceReference1.Service1Client(\"clientContractStuff\");\n       var testString = service.GetData(value);\n       return testString;\n    }\n}\n</code></pre>\n\n<p>Page code behind:</p>\n\n<pre><code>public partial class WebUserControl1 : System.Web.UI.UserControl\n{\n    protected void CodeBehindWcf(object sender, EventArgs e)\n    {\n        var service = new ServiceReference1.Service1Client(\"clientContractStuff\");\n        var testString = service.GetData(5);\n        TextBox1.Text = testString;\n    }\n\n    protected void CodeBehindWcfUsingService2(object sender, EventArgs e)\n    {\n        var service = new Service2();\n        var testString = service.GetData(5);\n        TextBox2.Text = testString;\n    }\n}\n</code></pre>\n\n<p>Javascript and Html:</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" AutoEventWireup=\"true\" CodeBehind=\"WebUserControl1.ascx.cs\"\n    Inherits=\"WcfService1.WebUserControl1\" %&gt;\n&lt;script type=\"text/javascript\" src=\"Scripts/jquery-1.4.4-vsdoc.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"Scripts/jquery-1.4.4.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function ajaxService2() {\n        serviceUrl = \"Service2.svc/GetData\";\n        $.ajax({\n            type: \"POST\",\n            url: serviceUrl,\n            data: \"{\\\"value\\\":\\\"1\\\"}\",\n            contentType: \"application/json; charset=utf-8\",\n            dataType: \"json\",\n            success: function (transport) {\n                var string = transport;\n                $(\"#Text2\").val(string);\n            }\n        });\n    }\n\n    function ajaxService1() {\n        serviceUrl = \"Service1.svc/GetData\";\n        $.ajax({\n            type: \"POST\",\n            url: serviceUrl,\n            data: \"{\\\"value\\\":\\\"2\\\"}\",\n            contentType: \"application/json; charset=utf-8\",\n            dataType: \"json\",\n            success: function (transport) {\n                var string = transport;\n                $(\"#Text1\").val(string);\n            }\n        });\n    }\n&lt;/script&gt;\n&lt;p&gt;\n    &lt;input id=\"Button1\" type=\"button\" value=\"Ajax call service 1\" onclick=\"ajaxService1()\" /&gt;\n    &lt;input id=\"Text1\" name=\"Text1\" type=\"text\" /&gt;&lt;/p&gt;\n&lt;p&gt;\n    &lt;input id=\"Button2\" type=\"button\" value=\"Ajax call service 2\" onclick=\"ajaxService2()\" /&gt;\n    &lt;input id=\"Text2\" name=\"Text2\" type=\"text\" /&gt;&lt;/p&gt;\n&lt;p&gt;\n    &lt;asp:Button ID=\"Button3\" runat=\"server\" Text=\"Code Behind\" OnClick=\"CodeBehindWcf\" /&gt;\n    &lt;asp:TextBox ID=\"TextBox1\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;&lt;/p&gt;\n&lt;p&gt;\n    &lt;asp:Button ID=\"Button4\" runat=\"server\" Text=\"Code Behind Use Service 2\" OnClick=\"CodeBehindWcfUsingService2\" /&gt;\n    &lt;asp:TextBox ID=\"TextBox2\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Everything works except Button 2 and ajaxService2 function.  This throws an error: 'The remote server returned an unexpected response: (400) Bad Request.'</p>\n"},{"tags":["c#",".net","wcf","security","data-transfer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13091606,"title":"secure file transfer over the internet","body":"<p>What is the best way to transfer files (secure data) over the internet? I am thinking about WCF REST services. The file size is less than 10MB.  Our company do not allow FTP transfer. Could you please suggest if there are any articles or third party tools? I appreciate any suggestions.  </p>\n"},{"tags":["wcf","servicehost"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":934,"score":2,"question_id":6070078,"title":"Can I call a method in a Self-Hosted WCF Service locally?","body":"<p>I have a WCF Service contract which is basically the Publish Subscriber pattern.</p>\n\n<p>The WCF Service is hosted inside the Windows Service that I want to publish from. The Clients subscribe to messages and when the Windows Service does something it publishes to all clients.</p>\n\n<p>To host the service I have declared a ServiceHost class and the Contract Class has a method which is not flagged in the Interface but is implemented in the Class to publish.</p>\n\n<p>I want to be able to call this method locally (not going through WCF) which then publishes the message via Callbacks.</p>\n\n<p>I can't seem to get from ServiceHost to the instance of the Contract Class.</p>\n\n<p>Is this possible and if so how? I know the work around is to have a client built into the service as well, but it seems a bit strange creating a client to connect to itself.</p>\n\n<p>Thanks in advance</p>\n\n<p>DJIDave</p>\n\n<p>app.config</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"Processor.Wcf.ServiceBehavior\"\n        name=\"Processor.Wcf.ProcessorService\"&gt;\n        &lt;endpoint address=\"net.tcp://localhost:9000/processor/service\"\n              binding=\"netTcpBinding\" name=\"procService\"\n              bindingConfiguration=\"netTcpBindingConfig\"\n              contract=\"Processor.Wcf.IProcessorService\"/&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n          &lt;host&gt;\n            &lt;baseAddresses&gt;\n              &lt;add baseAddress=\"http://localhost:8732/Design_Time_Addresses/Processor.Wcf/Service1/\" /&gt;\n            &lt;/baseAddresses&gt;\n          &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"Processor.Wcf.ServiceBehavior\"&gt;\n          &lt;!-- To avoid disclosing metadata information, \n          set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, \n          set the value below to true.  Set to false before deployment \n          to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;netTcpBinding&gt;\n        &lt;binding name=\"netTcpBindingConfig\"\n                 closeTimeout=\"00:01:00\"\n                 openTimeout=\"00:01:00\"\n                 receiveTimeout=\"00:10:00\"\n                 sendTimeout=\"00:01:00\"\n                 transactionFlow=\"false\"\n                 transferMode=\"Buffered\"\n                 transactionProtocol=\"OleTransactions\"\n                 hostNameComparisonMode=\"StrongWildcard\"\n                 listenBacklog=\"10\"\n                 maxBufferPoolSize=\"524288\"\n                 maxBufferSize=\"65536\"\n                 maxConnections=\"10\"\n                 maxReceivedMessageSize=\"65536\"&gt;\n          &lt;readerQuotas maxDepth=\"32\"\n                        maxStringContentLength=\"8192\"\n                        maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\"\n                        maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\"\n                           inactivityTimeout=\"00:10:00\"\n                           enabled=\"false\" /&gt;\n          &lt;security mode=\"Transport\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" protectionLevel=\"EncryptAndSign\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/netTcpBinding&gt;\n    &lt;/bindings&gt;\n\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":11752314,"title":"Why do I get a WCF timeout even though my service call and callback are successful?","body":"<p>I'm playing around with hooking up an in-game console to a WCF interface, so an external application can send console commands and receive console output.  To accomplish this I created the following service contracts:</p>\n\n<pre><code>public interface IConsoleNetworkCallbacks\n{\n    [OperationContract(IsOneWay = true)]\n    void NewOutput(IEnumerable&lt;string&gt; text, string category);\n}\n\n[ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(IConsoleNetworkCallbacks))]\npublic interface IConsoleInterface\n{\n    [OperationContract]\n    void ProcessInput(string input);\n\n    [OperationContract]\n    void ChangeCategory(string category);\n}\n</code></pre>\n\n<p>On the server I implemented it with:</p>\n\n<pre><code>public class ConsoleNetworkInterface : IConsoleInterface, IDisposable\n{\n    public ConsoleNetworkInterface()\n    {\n        ConsoleManager.Instance.RegisterOutputUpdateHandler(OutputHandler);\n    }\n\n    public void Dispose()\n    {\n        ConsoleManager.Instance.UnregisterOutputHandler(OutputHandler);\n    }\n\n    public void ProcessInput(string input)\n    {\n        ConsoleManager.Instance.ProcessInput(input);\n    }\n\n    public void ChangeCategory(string category)\n    {\n        ConsoleManager.Instance.UnregisterOutputHandler(OutputHandler);\n        ConsoleManager.Instance.RegisterOutputUpdateHandler(OutputHandler, category);\n    }\n\n    protected void OutputHandler(IEnumerable&lt;string&gt; text, string category)\n    {\n        var callbacks = OperationContext.Current.GetCallbackChannel&lt;IConsoleNetworkCallbacks&gt;();\n        callbacks.NewOutput(text, category);\n    }\n}\n</code></pre>\n\n<p>On the client I implemented the callback with:</p>\n\n<pre><code>public class Callbacks : IConsoleNetworkCallbacks\n{\n    public void NewOutput(IEnumerable&lt;string&gt; text, string category)\n    {\n        MessageBox.Show(string.Format(\"{0} lines received for '{1}' category\", text.Count(), category));\n    }\n}\n</code></pre>\n\n<p>Finally, I establish the service host with the following class:</p>\n\n<pre><code>public class ConsoleServiceHost : IDisposable\n{\n    protected ServiceHost _host;\n\n    public ConsoleServiceHost()\n    {\n        _host = new ServiceHost(typeof(ConsoleNetworkInterface), new Uri[] { new Uri(\"net.pipe://localhost\") });\n        _host.AddServiceEndpoint(typeof(IConsoleInterface), new NetNamedPipeBinding(), \"FrbConsolePipe\");\n\n        _host.Open();\n    }\n\n    public void Dispose()\n    {\n        _host.Close();\n    }\n}\n</code></pre>\n\n<p>and use the following code on my client to establish the connection:</p>\n\n<pre><code>    protected Callbacks _callbacks;\n    protected IConsoleInterface _proxy;\n\n    protected void ConnectToConsoleServer()\n    {\n        _callbacks = new Callbacks();\n        var factory = new DuplexChannelFactory&lt;IConsoleInterface&gt;(_callbacks,\n            new NetNamedPipeBinding(), new EndpointAddress(\"net.pipe://localhost/FrbConsolePipe\"));\n        _proxy = factory.CreateChannel();\n        _proxy.ProcessInput(\"Connected\");\n    }\n</code></pre>\n\n<p>So what happens is that my <code>ConnectToConsoleServer()</code> is called and then it gets all the way to <code>_proxy.ProcessInput(\"Connected\");</code>.  In my game (on the server) I immediately see the output caused by the <code>ProcessInput</code> call, but the client is still stalled on the <code>_proxy.ProcessInput()</code> call.</p>\n\n<p>After a minute my client gets a JIT <code>TimeoutException</code> <em>however</em> at the same time my MessageBox message appears.  </p>\n\n<p>So obviously not only is my command being sent immediately, my callback is being correctly called.  So why am I getting a timeout exception?</p>\n\n<p><em>Note</em>: Even removing the MessageBox call, I still have this issue, so it's not an issue of the GUI blocking the callback response.</p>\n"},{"tags":[".net","wcf","silverlight"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13091005,"title":"WCF not found error when accessing from subdomain on same host","body":"<p>When I access the service from my local machine, everything works fine. However, when I host the silverlight application on the subdomain site I don't get any response. It doesn't matter if the silverlight app is on the same subdomain, or on a different one. nothing happens.</p>\n\n<p>Here is my web.config file for the service:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\"?&gt;\n    &lt;configuration&gt;\n\n     &lt;system.web&gt;\n      &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n     &lt;/system.web&gt;\n     &lt;system.serviceModel&gt;\n\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"Metadata\" name=\"IVA_SL5_WCFservice.Service1\"&gt;\n        &lt;endpoint address=\"http://subdomain.website.com/INA-inv_s/Service1.svc\" binding=\"basicHttpBinding\"\n          bindingConfiguration=\"BasicHttpBinding_Service1\" contract=\"IVA_SL5_WCFservice.Service1\" /&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;timeouts closeTimeout=\"00:10:00\" openTimeout=\"00:10:00\" /&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_Service1\" closeTimeout=\"00:25:00\"           openTimeout=\"00:01:00\" sendTimeout=\"00:10:00\" maxBufferPoolSize=\"2147483647\"\n          maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"2147483647\"\n            maxArrayLength=\"2147483647\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"Metadata\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n   &lt;!-- &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt; --&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n  &lt;!--\n  &lt;system.diagnostics&gt;\n    &lt;sources&gt;\n</code></pre>\n\n<p>Here is the ClientConfig file from the silverlight app:</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_Service1\" closeTimeout=\"00:25:00\"\n                openTimeout=\"00:25:00\" sendTimeout=\"00:25:00\" maxBufferSize=\"2147483647\"\n                maxReceivedMessageSize=\"2147483647\"&gt;\n                &lt;security mode=\"None\" /&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://subdomain.website.com/IVA-inv_s/Service1.svc\"\n            binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_Service1\"\n            contract=\"IVA_Service.Service1\" name=\"BasicHttpBinding_Service1\" /&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I invoke the service on the silverlight app like this...</p>\n\n<pre><code>Service1Client client;\nclient = new IVA_Service.Service1Client(\"BasicHttpBinding_Service1\");//\"BasicHttpBinding_Service1\");\n</code></pre>\n\n<p>I've been messing with this for days now.... Please help!</p>\n"},{"tags":["asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13076445,"title":"Best practice to return error from ASP.NET RESTful webservice in WCF","body":"<p>Here's my service code. I throw an error just like all the best-practice articles suggest - in a form of WebFaultException.</p>\n\n<pre><code>[ServiceContract(Namespace = \"\")]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class API\n{\n    [OperationContract]\n    [WebGet()]\n    public int MyMethod()\n    {\n        throw new WebFaultException&lt;string&gt;(\"TESTERROR\", HttpStatusCode.BadRequest);\n    }\n}\n</code></pre>\n\n<p>Now when a send a request to <code>http://localhost:1389/API.svc/MyMethod</code> all I get is this JSON object:</p>\n\n<pre><code>{\"ExceptionDetail\":null,\"ExceptionType\":null,\"Message\":\"The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the &lt;serviceDebug&gt; configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs.\",\"StackTrace\":null}\n</code></pre>\n\n<p>I tried enabling <code>includeExceptionDetailInFaults</code> in my web.config, the message does change a little, but still I don't see my \"TESTERROR\" anywhere!</p>\n"},{"tags":["wcf","wcf-data-services","odata"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":22,"score":3,"question_id":13088916,"title":"Upgrading OData to v3","body":"<p>I have a WCF Data service that I just upgraded to V3 (from V2). What is the best way to not break existing clients?</p>\n\n<p>Note that some clients use .Net &lt; 4</p>\n"},{"tags":["wcf","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13089909,"title":"MVVM vs. WCF Data Service","body":"<p>I am developing a WPF application and need help in understanding which pattern would be better for data operations.  Should I implement an MVVM solution or should I use WCF Data Services?  What are the pros and cons for each.</p>\n"},{"tags":["visual-studio-2010","wcf","proxy","visual-studio-2012","svcutil.exe"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13088954,"title":"Generate WCF Proxy With Client Behaviors","body":"<p>A question someone asked in 2008, about <a href=\"http://www.vistax64.com/indigo/127576-behavior-attribute-client-proxy-without-any-coding.html\" rel=\"nofollow\">proxy-generation of client-side behaviors</a>, I'd like to repeat.  I want custom client-side behaviors, decorated as attributes on service contracts or operations, to be \"acknowledged\" by Visual Studio (or svcutil) when I execute \"discover\" on the add-service-reference dialogue.  The result would be a proxy that already has the client-side behaviors (and assembly references) added automagically.</p>\n\n<p>That feature still seems unavailable as of VS 2010 SP1.  Does VS 2012 do that?  Is there a 3rd party tool that does that?</p>\n\n<p>p.s. To be clear, I am not asking about extending WSDL capabilities.  I don't expect the above trick would ever work for that.  I am talking strictly in the context of the \"discover\" button within Visual Studio's in-built proxy generation capability.</p>\n"},{"tags":[".net","wcf","service","reference"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":18,"score":0,"question_id":13087915,"title":"WCF services reference copy","body":"<p>I inherited an old website maintenance after a guy left the office, the website is currently working without trouble and I've only had to do a few little changes.</p>\n\n<p>But as we're planning a major update I wanted to upgrade the project from visual 2005 to at least vs 2008. The conversion worked fine except for the WCF service for which I cannot get the the service reference of even just update but the service can still be called.</p>\n\n<p>I don't have a lot of experience with WCF, I just know it's an external service we don't have access to.</p>\n\n<p>What do you think I can do ?      </p>\n"},{"tags":["wcf","dependency-injection","castle-windsor","interceptor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13085010,"title":"Passing data between Castle Windsor's Interceptors","body":"<p>I'm adopting Castle Windsor for my WCF project and feel really amazed about this. However, I'm having a scenario that I don't really know if Castle Windsor supports.\nFor example I have the following chained Interceptors</p>\n\n<pre><code>Interceptor 1 &gt; Interceptor 2 &gt; Interceptor 3 &gt; Interceptor 4 &gt; Real method\n</code></pre>\n\n<p>Interceptor 1 returns some data and I want that to be available in Interceptor 2\nInterceptor 2 in turn does it work and returns the data that I want to make avaialbe in the 3,4, interceptor.\nThe real case scenario is that we're having a WCF service, Interceptor 1 will parse the request header into a Header object(username, password, etc.). The latter interceptors and real method will ultilize this Header object.\nI know that I can use Session variable to transport data, but is it a built-in, more elegant, more reliable way to handle this?</p>\n"},{"tags":["ajax","wcf","jquery-ajax","iis-7.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13089461,"title":"IIS Application Request Routing Issues with URL Rewrite","body":"<p>I am relatively new to web development. I have a number of WCF JSON service URLS in my internal environment. I am now attempting to have a website residing on a webserver in our DMZ access those service links in order to populate a number of Javascript/JQuery widgets with data. As I said, I am new to this, so I quickly learned that this was not possible without some extra work due to cross-domain policies with Ajax/XML, etc. </p>\n\n<p>After researching with Google and talking to a consultant, everyone seemed to agree that the most headache-free, robust solution was to set up a reverse-proxy on the external (DMZ) web server. I was then directed to this link by most of my searches, as well as some previously asked StackOverflow questions:</p>\n\n<p><a href=\"http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing\" rel=\"nofollow\">http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing</a></p>\n\n<p>So I began following the steps in the tutorial. However, I am afraid that after just a few steps, I am already not replicating what the author has going on. The example assumes you are going to be accessing internal web applications, whereas I am accessing service URLs, so I have updated the web.config as follows:</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;location path=\"iisstart.htm\"&gt;\n        &lt;system.webServer&gt;\n            &lt;httpRedirect enabled=\"false\" destination=\"---------------\" /&gt;\n\n        &lt;rewrite&gt;\n        &lt;rules&gt;\n            &lt;rule name=\"Reverse Proxy to ServiceURL1\" stopProcessing=\"true\"&gt;\n            &lt;match url=\"Dashboard.mycompany.org/Service1\" /&gt;\n            &lt;action type=\"Rewrite\" url=\"http://datafeeds/Service1.svc/json\" /&gt;\n            &lt;/rule&gt;\n\n            &lt;rule name=\"Reverse Proxy to ServiceURL2\" stopProcessing=\"true\"&gt;\n            &lt;match url=\"Dashboard.mycompany.org/Service2\" /&gt;\n            &lt;action type=\"Rewrite\" url=\"http://datafeeds/Service2.svc/json\" /&gt;\n            &lt;/rule&gt;\n\n                        ...\n        &lt;/rules&gt;\n        &lt;/rewrite&gt;\n        &lt;/system.webServer&gt;\n    &lt;/location&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>At this point in the guide, I believe that while it should not work completely, that I should at least be able to see the redirect by attempting to browse to my fictitious URLs in a browser. By that I mean that if I attempt to browse to </p>\n\n<pre><code>Dashboard.mycompany.org/Service1\n</code></pre>\n\n<p>I should see the browser instead attempt to load</p>\n\n<pre><code>http://datafeeds/Service1.svc/json\n</code></pre>\n\n<p>based on the rewrite rule. (Am I not understanding how this works correctly, or is that the expected behaviour?)</p>\n\n<p>However, I do not see that happen. Instead, it attempts to load only </p>\n\n<pre><code>Dashboard.mycompany.org/Service1\n</code></pre>\n\n<p>and when it can't find it, returns a 404.0 - Not Found. Can anyone tell me what I am doing wrong?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13083431,"title":"HTTP Errors while consuming non-WCF Web Service using a WCF Client","body":"<p>I am trying to consume a third party web service, which is developed not in .NET but in some other langauge (may be in Java). I am trying to consume the service from WCF Client. But while adding Service reference it is throwing a error:</p>\n\n<blockquote>\n  <p>The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was 'basic realm=\"EXTRACT-CREDENTIAL\"'.</p>\n</blockquote>\n\n<p>Also when I am hitting the service URL in a browser it's throwing an error as follows:</p>\n\n<blockquote>\n  <p>HTTP GET Requests are not supported by the broker. Please use HTTP POST instead</p>\n</blockquote>\n\n<p>What could be the way to consume the service from WCF client?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13087917,"title":"Unexpected naming of client for a WCF service","body":"<p>I have a simple WCF service with one interface and one class. When I add a service reference to my console apps, my WCF service class is not getting the expected name. My WCF service class name is <code>service1</code> but it is exposed to the client end as <code>Service1Client</code>.</p>\n\n<p>Why is the word \"<strong>Client</strong>\" being added before my actual class name?  Do I need to add anything in my web.config for the service or in the app.config for the console end?</p>\n"},{"tags":["visual-studio-2010","wcf","wsdl","xml-schema","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13088106,"title":"VS2010 WSDL schema imports: The global attribute http://www.w3.org/XML/1998/namespace:id has already been declared","body":"<p>I'm trying to create a WCF proxy on the basis of a WSDL via Add Service Reference in Visual Studio 2010. The problem is that I can't get rid of the following warning: </p>\n\n<p>\"Custom tool warning: There was a validation error on a schema generated during export. Validation error: The global attribute <a href=\"http://www.w3.org/XML/1998/namespace:id\" rel=\"nofollow\">http://www.w3.org/XML/1998/namespace:id</a> has already been declared.\"</p>\n\n<p>I've found out that the reason for this error seems to be the fact that Visual Studio's own schemas (in schema cache, especially xml.xsd) seems to get overlapped with the schemas imported in the WSDL. So instead of just using the schema import defined in the WSDL it imports automatically also Visual Studio's own schemas and that's why I'll get the error stating that \"the global attribute has already been declared.\"</p>\n\n<p>My error is only related to the use of xml_id.xsd which is imported in the WSDL. If you just create a new schema file with the same content as in xml_id.xsd you'll get a similar error in Visual Studio's XML editor. So how can I prevent Visual Studio from messing up schema imports in a WSDL? In the XML editor you can utilize the Schemas property and mark a special schema with the flag \"Do not use this schema\" but this doesn't work with generating proxy code. I also tried to delete the duplicate schema from Visual Studio's cache but it still finds it every time from somewhere.</p>\n\n<p>xml.xsd (in Visual Studio's schema cache, C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Xml\\Schemas)</p>\n\n<pre><code>&lt;xs:attribute name=\"id\" type=\"xs:ID\"&gt;\n    &lt;xs:annotation&gt;\n      &lt;xs:documentation source=\"http://www.w3.org/TR/xml-id/\"&gt;&lt;/xs:documentation&gt;\n    &lt;/xs:annotation&gt;\n&lt;/xs:attribute&gt;\n</code></pre>\n\n<p>xml_id.xsd</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;xs:schema targetNamespace=\"http://www.w3.org/XML/1998/namespace\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"&gt;\n&lt;xs:attribute name=\"id\" type=\"xs:ID\" /&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>PKIFactory.xsd</p>\n\n<pre><code>&lt;xs:import schemaLocation=\"xml_id.xsd\" namespace=\"http://www.w3.org/XML/1998/namespace\" /&gt;\n.... \n&lt;xs:attribute ref=\"xml:id\" /&gt;\n</code></pre>\n"},{"tags":["wcf","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13085873,"title":"Error with WCF configuration for MaxReceivedMessageSize","body":"<p>I am getting the following error when calling my service;</p>\n\n<pre><code>The maximum message size quota for incoming messages (65536) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element.\n</code></pre>\n\n<p>The configuration of the service is;</p>\n\n<pre><code>   &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"basic\" maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\" &gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"67108864\" maxArrayLength=\"10240000\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service name=\"Company.Product.Service.FileManager.IFileManager\"&gt;\n        &lt;endpoint binding=\"basicHttpBinding\" bindingConfiguration=\"basic\" name=\"FileManager\" bindingNamespace=\"Company.Product.FileManager.FileManagerService\" contract=\"Company.Product.Service.FileManager.IFileManager\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://filemanager.dev.v7.services.Company.net\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n</code></pre>\n\n<p>As you can see, I have adjusted the settings accordingly, so not sure why I am still getting this error.</p>\n\n<p>Client Configuration;</p>\n\n<pre><code> &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"basic\" maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"67108864\" maxArrayLength=\"10240000\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n\n      &lt;endpoint address=\"http://filemanager.dev.v7.services.Company.net/service.svc\" binding=\"basicHttpBinding\" bindingConfiguration=\"basic\" contract=\"Company.Product.Service.FileManager.IFileManager\" name=\"FileManager\"/&gt;\n    &lt;/client&gt;\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Changing the service configuration to this (removed the binding name) and this now works, but why would it not work with a named configuration;</p>\n\n<pre><code>&lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"\" maxBufferSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\" &gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"67108864\" maxArrayLength=\"10240000\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n</code></pre>\n"},{"tags":["wcf","asp.net-mvc-3","entity-framework","odata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":439,"score":1,"question_id":8083101,"title":"OData in MVC3 + EF layered architecture","body":"<p>I'm a total newbie to WCF-related stuff, so forgive my naive question, but I am not sure where to start in pinpointing an error while learning OData basics.</p>\n\n<p>I have an existing MVC3 application using a database, using the universal membership provider (added via nuget) and a small SDF database accessed via SQL Server Compact Edition Client Data Provider 4.0. I created it with the following steps:</p>\n\n<p>1) create a <strong>new library project for the data layer</strong>, add EDMX from a database, then add ADO.NET DB context and entities generators templates. </p>\n\n<p>2) create a <strong>new library project for generic data interfaces</strong>: a repository interface, implemented in (1), and the entities t4 template with its output, moved from (1) into this project (changing the TT <em>inputFile</em> parameter so that it refers to the EDMX in the other project).</p>\n\n<p>3) create a new <strong>MVC application</strong> which uses Ninject to instantiate the generic repository declared in (2) with the SDF-based repository implemented in (1).</p>\n\n<p>The web application works fine, and I can view and edit data. Now I should expose some of its functions via a WCF service and I was looking at OData for this. So I added a new WCF Data Service, and changed the generated code just to test it, by adding the name of my entities class (as implemented in (1)) and the name of an entity set, e.g.:</p>\n\n<pre><code>public class ProjectService : DataService&lt;OrganizerEntities&gt;\n{\n    public static void InitializeService(DataServiceConfiguration config)\n    {\n        config.SetEntitySetAccessRule(\"Projects\", EntitySetRights.AllRead);\n        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;\n    }\n}\n</code></pre>\n\n<p>Anyway when I open the SVC in the browser I get a <em>Request Error</em>: <em>The server encountered an error processing the request. See server logs for more details.</em>. If I look at the log, I see first of all a warning like:</p>\n\n<blockquote>\n  <p>... \n  http://msdn.microsoft.com/it-IT/library/System.ServiceModel.EvaluationContextNotFound.aspx\n  <strong>Configuration evaluation context not found</strong>.\n  ...</p>\n</blockquote>\n\n<p>and then an <strong>ArgumentNullException</strong> exception whose details follow. In all the samples or tutorials I've found I see the typical not-so-real-world example where the data layer is not separated from the consumer application: create a new MVC app, add an EDMX, add a WCF Data Service, change some lines of generated code, and all magically works :). So I suppose this is related to my layered architecture, especially for the missing context warning. Could anyone help in using this service in a layered scenario like this? Thanks!</p>\n\n<blockquote>\n  <p>... Value cannot be null. Parameter name: key\n   at System.Collections.Generic.Dictionary<code>2.FindEntry(TKey\n  key) at System.Collections.Generic.Dictionary</code>2.get_Item(TKey key) at\n  System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary<code>2\n  knownTypes, IDictionary</code>2 childTypes, IDictionary<code>2 entitySets) at\n  System.Data.Services.Providers.BaseServiceProvider.PopulateMetadata()\n  at System.Data.Services.DataService</code>1.CreateProvider() at\n  System.Data.Services.DataService<code>1.HandleRequest() at\n  System.Data.Services.DataService</code>1.ProcessRequestForMessage(Stream\n  messageBody) at SyncInvokeProcessRequestForMessage(Object , Object[] ,\n  Object[] ) at\n  System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object\n  instance, Object[] inputs, Object[]&amp; outputs) at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp;\n  rpc) at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean\n  isOperationContextSet) \n  System.ArgumentNullException: Value cannot be null.\n  Parameter name: key    at\n  System.Collections.Generic.Dictionary<code>2.FindEntry(TKey key)    at\n  System.Collections.Generic.Dictionary</code>2.get_Item(TKey key)    at\n  System.Data.Services.Providers.ObjectContextServiceProvider.PopulateMetadata(IDictionary<code>2\n  knownTypes, IDictionary</code>2 childTypes, IDictionary<code>2 entitySets)    at\n  System.Data.Services.Providers.BaseServiceProvider.PopulateMetadata() \n  at System.Data.Services.DataService</code>1.CreateProvider()    at\n  System.Data.Services.DataService<code>1.HandleRequest()    at\n  System.Data.Services.DataService</code>1.ProcessRequestForMessage(Stream\n  messageBody)    at SyncInvokeProcessRequestForMessage(Object ,\n  Object[] , Object[] )    at\n  System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object\n  instance, Object[] inputs, Object[]&amp; outputs)    at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp;\n  rpc)    at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp;\n  rpc)    at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean\n  isOperationContextSet) ...</p>\n</blockquote>\n"},{"tags":["wcf","queue","msmq","message"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":693,"score":0,"question_id":705081,"title":"MSMQ Private queue automatically remove unread message beyond 24 hours","body":"<p>I use MSMQ through WCF to store messages in private queue.\n(private queue hosted by Windows Server 2003).\nMessages are stored only for 24 hours and automatically removed from queue, somebody know why ?</p>\n\n<p>Thank's for your help</p>\n"},{"tags":["wcf","networking","configuration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13071889,"title":"How to expose a net.tcp wcf service over the network?","body":"<p>I have a problem with my client-server application, I would be very gratefull if you can help me. \nI have a self-hosted server, and the problem is that in my local machine the service works just fine, in the development enviroment. Im trying to do the same but throughout the network. I have this configured on net.tcp://localhost:8990/ .., but i realized via netstat that the service was on 127.0.0.1 that is my localhost,  so i've tried net.tcp://192.168.0.12:8990/ , that is my ip over the network, but still can see it, and the client cant connect either.\nI tried register it as a windows service, but i cant get the service exposed.\nI have disabled all the firewalls, so i have no idea what else to try. \nThanks for your help!\nAlejandra</p>\n"},{"tags":["c#","wcf"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2738,"score":2,"question_id":824268,"title":"Do WCF Services Expose Properties?","body":"<p>In the interface required to implement a WCF service, I declare the main class with the [ServiceContract()] attribute and any exposed method with [OperationContract()].</p>\n\n<p>How can i expose public properties? Thanks</p>\n"},{"tags":[".net","wcf","tcp","port","self-hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13085065,"title":"Listening on same port, different IP address, WCF + non-WCF app","body":"<p>I have an application binding on port IP1:80 of a machine with 5 virtual IP addresses (IP1-IP5)</p>\n\n<p>I then try to bind a self-hosted WCF service to IP5:80 but get an AlreadyInUseException. I guess WCF is trying to bind to the entire IP range, despite the fact that I specify a specific one.</p>\n\n<p>Is this known behaviour?</p>\n\n<pre><code>            [start application that binds to IP1:80]\n\n\n            string baseAddress = \"http://IP5:80/binary\";\n\n            ServiceHost host = new ServiceHost(typeof(BinaryService),\n                                               new Uri(baseAddress));\n\n\n            host.AddServiceEndpoint(typeof(IBinaryService), GetBinding(), \"\")\n                                   .Behaviors.Add(new WebHttpBehavior());\n\n            host.Open(); // exception\n</code></pre>\n"},{"tags":["c#","wcf","web-services","browser"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3582,"score":0,"question_id":4885111,"title":"tests wcf service in the browser","body":"<p>I can't invoke a basic wcf web method in the browser even with <code>&lt;ServiceMetadata httpGetEnabled=\"True\"/&gt;</code> in the config file.</p>\n\n<p>For the source, code, it's very basic:</p>\n\n<p>For the interface:</p>\n\n<pre><code>[ServiceContract]\n    public interface IService1\n    {\n\n        [OperationContract]\n        [WebInvoke(Method = \"GET\", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]\n        string GetData();\n\n        [OperationContract]\n        CompositeType GetDataUsingDataContract(CompositeType composite);\n\n        // TODO: ajoutez vos oprations de service ici\n    }\n</code></pre>\n\n<p>And for the implementation:</p>\n\n<pre><code> public string GetData()\n        {\n            return (\"{'code':'yes'}\");\n        }\n</code></pre>\n\n<p>This method works fine in the built-in visual studio wcf service tester and returns <code>{'code':'yes'}</code>.</p>\n\n<p>In the browser, when I call the <code>http://localhost:54421/Service1.svc/GetData</code>, it displays a blank page.</p>\n\n<p>How can I resolve this?</p>\n\n<p>Thanks,</p>\n\n<p>Regards.</p>\n"},{"tags":[".net","wcf","wcftestclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13084944,"title":"Why MS created WCF test client with limitations","body":"<p>Why Microsoft has given a tool to test WCF services which is not able to test everything that we can actually create and use.</p>\n"},{"tags":["wcf","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13083820,"title":"Forcing a WCF service to communicate with clients infinitely","body":"<p>I have a WCF service, and two WPF applications which acts as clients for service. I need the communication between clients and service to be infinite, even when those are not interacting(i.e. client is idle). Right now my service drops the connection after some time. </p>\n\n<p>I have tried increasing reciveTimeout and sendTimeout (even tried setting it to \"infinite\") on my bindings but it didn't worked. If anyone can put some light on how different timeouts are used and what values i need to set for my case.</p>\n\n<p>Any help will be of great value.</p>\n\n<p>Thanks In Advance.</p>\n"},{"tags":["c#","wcf","callback","duplex","nettcpbinding"],"answer_count":3,"favorite_count":10,"up_vote_count":11,"down_vote_count":0,"view_count":7858,"score":11,"question_id":1427926,"title":"Detecting Client Death in WCF Duplex Contracts","body":"<p>I'm trying to build a SOA where clients can perform long running queries on the server and the server responds using a callback.</p>\n\n<p>I'd like to be able to detect if the client disconnects (through user initiated shutdown, unhandled exception or loss of network connectivity) so that the server can choose to cancel the expensive request. </p>\n\n<p>I'm testing a variety of failure cases but I can't seem to get certain event handlers to fire.</p>\n\n<p>Tested Failure Cases:\nKilling the Client Process After the request.\nUsing a program like CurrPorts to close the TCP Connection. </p>\n\n<p>Test Code: </p>\n\n<pre><code>using System;\nusing System.ServiceModel;\nusing System.Threading;\n\nnamespace WCFICommunicationObjectExperiments\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            var binding = new NetTcpBinding(SecurityMode.None);\n\n            var serviceHost = new ServiceHost(typeof (Server));\n            serviceHost.AddServiceEndpoint(typeof (IServer), binding, \"net.tcp://localhost:5000/Server\");\n            serviceHost.Open();\n            Console.WriteLine(\"Host is running, press &lt;ENTER&gt; to exit.\");\n            Console.ReadLine();\n        }\n\n    }\n\n    [ServiceContract(CallbackContract = typeof(IClient))]\n    public interface IServer\n    {\n        [OperationContract]\n        void StartProcessing(string Query);\n    }\n\n    public interface IClient\n    {\n        [OperationContract]\n        void RecieveResults(string Results);\n    }\n\n    [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]\n    public class Server : IServer\n    {\n\n        public void StartProcessing(string Query)\n        {\n            Thread.Sleep(5000);\n\n            //Callback Channel\n            var clientCallback = OperationContext.Current.GetCallbackChannel&lt;IClient&gt;();\n            var clientCallbackCommunicationObject = ((ICommunicationObject) clientCallback);\n            EventHandler faultedHandlerCallback = (o, s) =&gt; Console.WriteLine(\"Client Channel Faulted.\");\n            EventHandler closedHandlerCallback = (o, s) =&gt; Console.WriteLine(\"Client Channel Closed.\");\n            clientCallbackCommunicationObject.Faulted += faultedHandlerCallback;\n            clientCallbackCommunicationObject.Closed += closedHandlerCallback;\n\n            //Request Channel\n            var requestChannel = OperationContext.Current.Channel;\n            EventHandler faultedHandlerRequest = (o, s) =&gt; Console.WriteLine(\"Request Channel Faulted.\");\n            EventHandler closedHandlerRequest = (o, s) =&gt; Console.WriteLine(\"Request Channel Closed.\");\n            requestChannel.Faulted += faultedHandlerRequest;\n            requestChannel.Closed += closedHandlerRequest;\n\n            try\n            {\n                clientCallback.RecieveResults(\"42.\");\n            }\n            catch (CommunicationObjectAbortedException ex)\n            {\n                Console.WriteLine(\"Client Aborted the connection\");\n            }\n            catch (CommunicationObjectFaultedException ex)\n            {\n                Console.WriteLine(\"Client Died.\");\n            }\n            clientCallbackCommunicationObject.Faulted -= faultedHandlerCallback;\n            clientCallbackCommunicationObject.Faulted -= closedHandlerCallback;\n            requestChannel.Faulted -= faultedHandlerRequest;\n            requestChannel.Closed -= closedHandlerRequest;\n        }\n    }\n\n    public class ClientToTestStates : IClient\n    {\n        private IServer m_Server;\n\n        private readonly ManualResetEvent m_ReceivedEvent = new ManualResetEvent(false);\n        private readonly ManualResetEvent m_ChannelFaulted = new ManualResetEvent(false);\n        private readonly ManualResetEvent m_ChannelClosed = new ManualResetEvent(false);\n\n        public ClientToTestStates()\n        {\n            var binding = new NetTcpBinding(SecurityMode.None);\n            var channelFactory = new DuplexChannelFactory&lt;IServer&gt;(this, binding, new EndpointAddress(\"net.tcp://localhost:5000/Server\"));\n            m_Server = channelFactory.CreateChannel();\n            ((ICommunicationObject)m_Server).Open();\n            ((ICommunicationObject)m_Server).Faulted += ChannelFaulted;\n            ((ICommunicationObject)m_Server).Closed += ChannelClosed;\n\n            m_Server.StartProcessing(\"What is the answer?\");\n\n            WaitHandle.WaitAny(new WaitHandle[] {m_ReceivedEvent, m_ChannelFaulted, m_ChannelClosed});\n        }\n\n        void ChannelFaulted(object sender, EventArgs e)\n        {\n            m_ChannelFaulted.Set();\n            Console.WriteLine(\"Channel Faulted.\");\n        }\n\n        void ChannelClosed(object sender, EventArgs e)\n        {\n            m_ChannelClosed.Set();\n            Console.WriteLine(\"Channel Closed.\");\n        }\n\n\n        public void RecieveResults(string results)\n        {\n            m_ReceivedEvent.Set();\n            Console.WriteLine(\"Recieved Results {0}\", results);\n        }\n    }\n}\n</code></pre>\n\n<p>What's the best practice to handle these sorts of failure cases? I'd like to be able to use the underlying tcp connection to detect some of these things.</p>\n"},{"tags":["c#","wcf","sharepoint","authentication","https"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3730,"score":3,"question_id":5758849,"title":"Setting up NTLM Authentication with WCF to Sharepoint Web Services","body":"<p>I have been having a lot of difficulty setting up my WCF service to talk to Sharepoint Web services, specifically I am trying to use the Lists.asmx and Copy.asmx services.  </p>\n\n<p>I got it working using an http link to sharepoint for development, but now we need to switch to an HTTPS link.  I got the web reference setup and updated for this link, but when it tries to call a service (ex: GetListItems) it errors out with the following error: \nThe request failed with HTTP status 401: Unauthorized.</p>\n\n<p>I then tried to see what type of authentication our Sharepoint Server uses, which turns out to be NTLM.  I then tried to configure out web.config file for this.  Here is the entire web.config file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n    &lt;configSections&gt;\n        &lt;sectionGroup name=\"applicationSettings\" type=\"System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"&gt;\n            &lt;section name=\"InventoryService.Properties.Settings\" type=\"System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\"/&gt;\n        &lt;/sectionGroup&gt;\n    &lt;/configSections&gt;\n    &lt;appSettings/&gt;\n    &lt;connectionStrings/&gt;\n    &lt;system.web&gt;\n        &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n        &lt;/compilation&gt;\n        &lt;!--\n        The &lt;authentication&gt; section enables configuration \n        of the security authentication mode used by \n        ASP.NET to identify an incoming user. \n    --&gt;\n        &lt;authentication mode=\"Windows\"/&gt;\n        &lt;!--\n        The &lt;customErrors&gt; section enables configuration \n        of what to do if/when an unhandled error occurs \n        during the execution of a request. Specifically, \n        it enables developers to configure html error pages \n        to be displayed in place of a error stack trace.\n\n        &lt;customErrors mode=\"RemoteOnly\" defaultRedirect=\"GenericErrorPage.htm\"&gt;\n         &lt;error statusCode=\"403\" redirect=\"NoAccess.htm\" /&gt;\n         &lt;error statusCode=\"404\" redirect=\"FileNotFound.htm\" /&gt;\n        &lt;/customErrors&gt;\n    --&gt;\n        &lt;pages controlRenderingCompatibilityVersion=\"3.5\" clientIDMode=\"AutoID\"/&gt;&lt;/system.web&gt;\n    &lt;!-- \n      The system.webServer section is required for running ASP.NET AJAX under Internet\n      Information Services 7.0.  It is not necessary for previous version of IIS.\n  --&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n   &lt;basicHttpBinding&gt;\n    &lt;binding name=\"NewBinding0\"&gt;\n     &lt;security mode=\"TransportCredentialOnly\"&gt;\n      &lt;transport clientCredentialType=\"Ntlm\" proxyCredentialType=\"None\" /&gt;\n     &lt;/security&gt;\n    &lt;/binding&gt;\n   &lt;/basicHttpBinding&gt;\n  &lt;/bindings&gt;\n  &lt;services&gt;\n   &lt;service behaviorConfiguration=\"InventoryService.Service1Behavior\"\n    name=\"InventoryService.InventoryService\"&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"NewBinding0\"\n     contract=\"InventoryService.IInventoryService\"&gt;\n     &lt;identity&gt;\n      &lt;dns value=\"localhost\" /&gt;\n     &lt;/identity&gt;\n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n   &lt;/service&gt;\n  &lt;/services&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"InventoryService.Service1Behavior\"&gt;\n                    &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n                    &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                    &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n    &lt;/system.serviceModel&gt;\n    &lt;applicationSettings&gt;\n        &lt;InventoryService.Properties.Settings&gt;\n   &lt;setting name=\"InventoryService_WSCopy_Copy\" serializeAs=\"String\"&gt;\n    &lt;value&gt;http://site/_vti_bin/Copy.asmx&lt;/value&gt;\n   &lt;/setting&gt;\n   &lt;setting name=\"InventoryService_SharepointLists_Lists\" serializeAs=\"String\"&gt;\n    &lt;value&gt;https://site/_vti_bin/Lists.asmx&lt;/value&gt;\n   &lt;/setting&gt;\n  &lt;/InventoryService.Properties.Settings&gt;\n    &lt;/applicationSettings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>If anyone has a clue if I setup this config file correctly for NTLM, that would be really helpful.</p>\n\n<p>If this is setup correctly, then I guess I will move on to the next question about if I setup the credentials correctly:</p>\n\n<pre><code>inventoryList = new SharepointLists.Lists();\ninventoryList.Url = \"https://fullsiteurl/_vti_bin/Lists.asmx\";\ninventoryList.Credentials = new System.Net.NetworkCredential(\"user\", \"pass\", \"domain\");\n</code></pre>\n\n<p>If someone could go over this, that would also be very helpful.</p>\n\n<p>Again I know that the config file is pretty long and I highly appreciate it if you go through it let me know if I setup NTLM authentication correctly.  </p>\n\n<p>If all this checks out ok, then I have no idea where to start on getting the HTTPS link with sharepoint working (The existing HTTP link to sharepoint is still accessible for the time being, until I can get the service working with the HTTPS link).</p>\n\n<p>Thanks,</p>\n\n<p>Priyank Patel</p>\n"},{"tags":["wcf","web-services","silverlight","ria","networkcredentials"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13083455,"title":"Web service authentication through DomainServiceContext in RIA Services","body":"<p>I did a Silverlight RIA Bussiness application. The server side requieres authentication and is going over https.</p>\n\n<p>From the server side, I want to acces to an external web service which also needs credentials and also goes over https. The point is that the required credentials for the web service are the same the credentials required for the RIA business service.</p>\n\n<p>I would like to:</p>\n\n<p>1.-To create an intance of the web service in the RIA service business application service side</p>\n\n<p>2.- Set the web service credentials = RIA service business application credentials (which are, obvisuly, already authenticated)</p>\n\n<p>My untuiton says that there must be a way to do this but I have no idea how. Anyway, my untuition has been wrong so many times...</p>\n"},{"tags":["wcf","session","concurrency"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13083231,"title":"wcf concurreny mode=Multiple","body":"<p>I am a beginner on state/concurrency management in WCF. Let's say I have a service class like below:</p>\n\n<pre><code>    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]\n        public class Service1 : IService1\n        {\n            private int _myCounter;\n            private MyType _myType;\n            private static MyType _myTypeStatic;\n            private static Dictionary&lt;string,string&gt; _d = new Dictionary&lt;string,string&gt;();\n\n\n            public void Method1()\n            {\n                // logic to set _myType\n                // logic to set _myCounter\n\n                // logic to set _myTypeStatic\n                // logic to set _d\n\n            }\n            public void Method2()\n            {\n                // logic to save _myType, set in Method1() to db\n                // logic to save _myCounter, set in Method1() to db\n\n                // logic to save _myTypeStatic, set in Method1() to db\n                // logic to save _d, set in Method1() to db    \n            }\n        }\n</code></pre>\n\n<p>If 2 clients connect consume this service at the sametime, they will be running on 2 different threads. How will the state of 2 global class level variables change in this scenario as there is only instance of the service? How will it work for static variables and types? Is it possible that  these 2 threads have 2 different copies of variables data, but still working with one service instance? Thanks.</p>\n"},{"tags":["c#","wcf","serialization","poco","datacontract"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":134,"score":2,"question_id":13028348,"title":"System.StackOverflowException when trying to Serialize in WCF","body":"<p>I have a problem trying to serialize a graph with cyclic references. This is my scenario:</p>\n\n<pre><code>        [DataContract(IsReference = true)]\n        public class Child\n        {\n            [DataMember]\n            public string name { get; set; }\n            [DataMember]\n            public Parent parent { get; set; }\n        }\n\n\n        [DataContract(IsReference = true)]\n        public class Parent\n        {\n\n            [DataMember]\n            public string name { get; set; }\n            [DataMember]\n            public List&lt;Child&gt; children { get; set; }\n\n            public Parent()\n            {\n                children = new List&lt;Child&gt;();\n            }\n\n        }\n\n   //Testing method\n   //Invoke it through WCF Service (basocHttpBinding)\n   public Parent Test()\n    {\n        Parent p = new Parent();\n        p.name = \"Pepe\";\n        p.children.Add(new Child { name = \"Juan\", parent = p });\n        return p;\n\n    }\n</code></pre>\n\n<p>When I try to serialize a Object of type Parent, it produces an System.StackOverflowException, because the Cyclic reference.</p>\n\n<p>If I delete in the Child class the DataMember of his navigation property to the Parent, It works perfectly, but I lose the navigation property in the serializated object. I have been researching for a solution, but no Luck. I only found that IsReference Property solves this type of Cyclic reference, but in my case it seems not to work correctly.</p>\n\n<p>Some help will be welcomed!!</p>\n\n<p>Thanks in advance</p>\n\n<p>PARENT CLASS:</p>\n\n<pre><code>[DataContract(IsReference = true)]  \n[KnownType(typeof(Expediente))]    \npublic partial class Expediente: POCO, IEntidad\n{   \n\n    public Expediente() : base(typeof(Expediente))            \n    {\n    }\n\n    public virtual int Sid\n    {\n        get;\n        set;\n    }\n    [DataMember] \n    public virtual int NumExpediente\n    {\n        get;\n        set;\n    }\n\n    [DataMember]\n    public virtual ICollection&lt;Policia&gt; Policias\n    {\n        get\n        {\n            if (_policias == null)\n            {\n                var newCollection = new FixupCollection&lt;Policia&gt;();\n                newCollection.CollectionChanged += FixupPolicias;\n                _policias = newCollection;\n            }\n            return _policias;\n        }\n        set\n        {\n            if (!ReferenceEquals(_policias, value))\n            {\n                var previousValue = _policias as FixupCollection&lt;Policia&gt;;\n                if (previousValue != null)\n                {\n                    previousValue.CollectionChanged -= FixupPolicias;\n                }\n                _policias = value;\n                var newValue = value as FixupCollection&lt;Policia&gt;;\n                if (newValue != null)\n                {\n                    newValue.CollectionChanged += FixupPolicias;\n                }\n            }\n        }\n    }\n    private ICollection&lt;Policia&gt; _policias;\n\n\n    private void FixupPolicias(object sender, NotifyCollectionChangedEventArgs e)\n    {\n        if (e.NewItems != null)\n        {\n            foreach (Policia item in e.NewItems)\n            {\n                item.Expediente = this;\n            }\n        }\n\n        if (e.OldItems != null)\n        {\n            foreach (Policia item in e.OldItems)\n            {\n                if (ReferenceEquals(item.Expediente, this))\n                {\n                    item.Expediente = null;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>CHILD CLASS:</p>\n\n<pre><code>[DataContract(IsReference = true)]\n[KnownType(typeof(Policia))]    \npublic partial class Policia: POCO, IEntidad\n{\n\n//Constructor por defecto\npublic Policia() : base(typeof(Policia))            \n{\n}\n\n\n[DataMember] \npublic virtual int Sid\n{\n    get { return _sid; }\n    set\n    {\n        if (_sid != value)\n        {\n            if (Expediente != null &amp;&amp; Expediente.Sid != value)\n            {\n                Expediente = null;\n            }\n            _sid = value;\n        }\n    }\n}\nprivate int _sid;\n\n[DataMember] \npublic virtual int NumPlaca\n{\n    get;\n    set;\n}\n\n[DataMember]\npublic virtual Expediente Expediente\n{\n    get { return _expediente; }\n    set\n    {\n        if (!ReferenceEquals(_expediente, value))\n        {\n            var previousValue = _expediente;\n            _expediente = value;\n            FixupExpediente(previousValue);\n        }\n    }\n}\nprivate Expediente _expediente;\n\n\nprivate void FixupExpediente(Expediente previousValue)\n{\n    if (previousValue != null &amp;&amp; previousValue.Policias.Contains(this))\n    {\n        previousValue.Policias.Remove(this);\n    }\n\n    if (Expediente != null)\n    {\n        if (!Expediente.Policias.Contains(this))\n        {\n            Expediente.Policias.Add(this);\n        }\n        if (Sid != Expediente.Sid)\n        {\n            Sid = Expediente.Sid;\n        }\n    }\n}\n}\n</code></pre>\n\n<p>To serialize I am using standar DataContractSerializer throught WCF. I only added some behaviour to my WCF services through an attribute to Serilize Poco Proxies. This is the attribute code:</p>\n\n<pre><code>public class ApplyDataContractResolverAttribute : Attribute, IOperationBehavior\n{\n    public ApplyDataContractResolverAttribute()\n    {\n    }\n\n    public void AddBindingParameters(OperationDescription description, BindingParameterCollection parameters)\n    {\n    }\n\n    public void ApplyClientBehavior(OperationDescription description, System.ServiceModel.Dispatcher.ClientOperation proxy)\n    {\n        DataContractSerializerOperationBehavior dataContractSerializerOperationBehavior =\n            description.Behaviors.Find&lt;DataContractSerializerOperationBehavior&gt;();\n        dataContractSerializerOperationBehavior.DataContractResolver =\n            new ProxyDataContractResolver();\n    }\n\n    public void ApplyDispatchBehavior(OperationDescription description, System.ServiceModel.Dispatcher.DispatchOperation dispatch)\n    {\n        DataContractSerializerOperationBehavior dataContractSerializerOperationBehavior =\n            description.Behaviors.Find&lt;DataContractSerializerOperationBehavior&gt;();\n        dataContractSerializerOperationBehavior.DataContractResolver =\n            new ProxyDataContractResolver();\n    }\n\n    public void Validate(OperationDescription description)\n    {            \n    }\n\n}\n</code></pre>\n\n<p>POCO base Class. A simple Class with some base Validation functionallity</p>\n\n<pre><code>[DataContract(IsReference = true)]\npublic class POCO\n{\n    public POCO(Type Tipo)\n    {\n        RegistrarMetadatos(Tipo);\n    }\n\n    /// &lt;summary&gt;\n    /// Este metodo valida la clase y devuelve todos los mensajes de validacion.\n    /// &lt;/summary&gt;        \n    /// &lt;returns&gt;Devuelve una Lista de tipo ValidationResults con todos los resultados de la validacin&lt;/returns&gt;\n    public List&lt;ValidationResult&gt; Validar()\n    {\n        List&lt;ValidationResult&gt; Resultados = new List&lt;ValidationResult&gt;();\n        ValidationContext ctx = new ValidationContext(this, null, null);\n        Validator.TryValidateObject(this, ctx, Resultados, true);\n        return Resultados;\n    }\n\n    /// &lt;summary&gt;\n    /// Este metodo valida la clase y en caso de no superar la validacin levante una excepcin del tipo ValidationEx\n    /// &lt;/summary&gt;        \n    public void TryValidar()\n    {\n        List&lt;ValidationResult&gt; Resultados = new List&lt;ValidationResult&gt;();\n        ValidationContext ctx = new ValidationContext(this, null, null);\n        Validator.TryValidateObject(this, ctx, Resultados, true);\n        if (Resultados.Count &gt; 0)\n        {\n            throw new ValEx(Resultados);\n        };\n    }\n\n\n    /// &lt;summary&gt;\n    /// Este metodo busca la clase interna que contiene los metadatos con las \n    /// Validaciones y las adhiere a la clase principal. Parae ello usa la convencin \"MD\"\n    /// &lt;param name=\"Tipo\"&gt;El tipo de la clase que sobre la que se quiere registar los metadatos&lt;/param&gt;\n    /// &lt;/summary&gt;\n    private void RegistrarMetadatos(Type Tipo)\n    {\n        string aux = Tipo.AssemblyQualifiedName;\n\n        aux = aux.Replace(Tipo.FullName, Tipo.FullName + \"+\" + Tipo.Name +\"MD\");\n\n        Type Meta = Type.GetType(aux);\n\n        if (Meta != null)\n        {\n            var DescProv =\n                new AssociatedMetadataTypeTypeDescriptionProvider(\n                    Tipo, Meta\n                );\n            TypeDescriptor.AddProviderTransparent(DescProv, Tipo);\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["database","wcf","error-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13082982,"title":"C#: Exception handling with \"using/try/catch\" in WCF service","body":"<p>I've just posted the question about general usage of \"using/try/catch\" construction and all is clear now.</p>\n\n<p>But, I have a new question that is in connection with the previous one - how to use \"using/try/catch\" construction in case I have it in method in WCF service?  The goal is to see the description of particular database exception on client side.</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["wcf","entity-framework","wcf-data-services","odata","change-tracking"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13082926,"title":"WCF Data Service Change Tracking: How to cancel save changes and revert to original values for an object","body":"<p>I have a WCF Data Service that is wrapping an Entity Framework 4 data model. I am connecting a WPF client to the service using the WCF Data Services Client library.</p>\n\n<p>Is it possible in WCF Data Services to undo / cancel changes to tracked objects ?</p>\n\n<p>scenario : In the UI I allow a user to edit an object. I have save and cancel buttons. If the user chooses to save I call SaveChanges() on my WCF context and changes are sent to the database via the WCF service. If the user clicks cancel I want to undo the changes and revert to the original property values of the current object.</p>\n\n<p>I know that the WCF data services client library has change tracking built in - but I cannot find any way at accessing this information.</p>\n\n<p>In Entity Framework the context supports the Refresh method and you can specify RefreshMode.StoreWins and pass in the object - this will effectively cancel / undo any changes.\ndocumented here  : <a href=\"http://msdn.microsoft.com/en-us/library/bb896255.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/bb896255.aspx</a></p>\n\n<p>Any suggestions on how I can achieve the same thing in WCF DataServices in my client application ?</p>\n\n<p>cheers\nChris</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13071169,"title":"WCF Client Serve application","body":"<p>Am having trouble sending information to a server when the client and server are on different system. but when the Client and Server are on one system everything works perfectly ok.i Get this Exception every time and i have turn off windows firewall</p>\n\n<p>EndPointNotFoundException\nCould not connect to net.tcp://127.0.0.1:8080/DatabaseService. The connection attempt lasted for a time span of 00:00:01.1062670. TCP error code 10061: No connection could be made because the target machine actively refused it 127.0.0.1:8080. </p>\n"},{"tags":["c#","wcf","iis","routes","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13072421,"title":"Anonymous Authentication in IIS to WCF service routes in an otherwise windows authenicated website","body":"<p>I have an ASP.NET Web Site that requires Windows authentication with the exception of a WCF service that is hosted in the application and requires anonymous authentication:</p>\n\n<p>(let's say: <code>FooService.svc</code>)</p>\n\n<pre><code>[ServiceContract]\n[AspNetCompatibilityRequirements( RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed )]\n[ServiceBehavior( InstanceContextMode = InstanceContextMode.PerCall, IncludeExceptionDetailInFaults = true)]\npublic partial class FooService\n{\n    [WebGet( UriTemplate = \"foo\", ResponseFormat = WebMessageFormat.Json )]\n    public string GetFoo()\n    {\n        return \"Foo\";\n    }\n}\n</code></pre>\n\n<p>and I have registered my routes in <code>Global.asax</code>:</p>\n\n<pre><code>routes.Add( new ServiceRoute( \"MyService\", new WebServiceHostFactory(), typeof( FooService ) ) );\n</code></pre>\n\n<p>My problem is making this service and all of its routes allow anonymous authentication (as an exception to the rest of the Windows Authenitcated site).</p>\n\n<p>I have been able to achieve this only by creating a folder that matches the name of the route (<code>http://MyHost/MyWebsite/</code><em>MyService</em><code>/</code>) leave it empty, and enable anonymous authentication to the directory in IIS.</p>\n\n<p>Is there a better way of allowing anonymous authentication to my service routes in IIS that does not involve creating a folder only to exist as a place holder for IIS configuration?</p>\n\n<p><strong>Additional Note:</strong> I have found that after configuring the empty folder in IIS to allow anonymous access, I can delete the physical folder and the anonymous authentication for the service route is still honored.</p>\n"},{"tags":["ruby","wcf","soap","savon"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13081744,"title":"Savon: WCF Soap service with wsse auth: AddressFilter mismatch at the EndpointDispatcher","body":"<p>I am trying to create SOAPClient using Savon - rubygem. </p>\n\n<p>Its a WCF soap service with WSSE auth over https. Here is the code that I tried:</p>\n\n<pre><code>require 'savon'\n\nclient = Savon::Client.new do\n    wsdl.document = \"https://svc.sxxxxxify.com:8081/ConfSet.svc?wsdl\"\n    config.soap_version = 2\n    wsse.credentials \"aa5@xxasxsaxsh.com\", \"test123\"\nend\n\np client.wsdl.soap_actions\nresponse = client.request :get_user_clients\np response\n</code></pre>\n\n<p>But I get this error:</p>\n\n<blockquote>\n  <p>http://www.w3.org/2005/08/addressing/soap/fault2012-10-26T06:07:42.247Z2012-10-26T06:12:42.247Zs:Sendera:DestinationUnreachableThe message with To '' cannot be processed at the\n  receiver, due to an AddressFilter mismatch at the EndpointDispatcher. \n  Check that the sender and receiver's EndpointAddresses\n  agree.</p>\n</blockquote>\n\n<p>.</p>\n\n<blockquote>\n  <p>The message with To '' cannot be processed at the receiver, due to an\n  AddressFilter mismatch at the EndpointDispatcher.  Check that the\n  sender and receiver's EndpointAddresses agree. (Savon::SOAP::Fault)</p>\n</blockquote>\n\n<p>Please help me solve this problem</p>\n"},{"tags":["wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13078434,"title":"Can't access WCF service hosted on IIS remotely but can access it locally","body":"<p>I have deployed a WCF service that use HTTP binding on IIS 7.5.\nWhen logged on the web server I'm able to browse to the svc file:\n\"http://localhost:8200/MyService.svc\"</p>\n\n<p>But when I do it from a remote machine it is not available:\n\"http://11.22.33.44:8200//MyService.svc\"</p>\n\n<p>Any idea?</p>\n"},{"tags":[".net","wcf","web-services","wcf-security","windows-mobile-6"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":302,"score":0,"question_id":7882775,"title":"Missing WS-Addressing elements in Soap header using WCF / .NET Compact Framework","body":"<p>I'm required to use WS-Addressing/WS-Security in our WCF services. The services are called by a mobile device, Windows Mobile 6 / .NET Compact Frameowk 3.5. </p>\n\n<p>I have just about everything working, but for some reason MessageID isn't getting included in my header, and it's listed as a requirement. The binding and client have Soap12WSAddressing10 specified. I'm getting this from transport level logging:</p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:u=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n  &lt;s:Header&gt;\n    &lt;a:Action s:mustUnderstand=\"1\" u:Id=\"_3\"&gt;http://tempuri.org/ISyncService/GetSchemaResponse&lt;/a:Action&gt;\n    &lt;ActivityId CorrelationId=\"28815cbc-7d07-45ea-9ce6-ce0a68a375f2\" xmlns=\"http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics\"&gt;7a63c3ec-5955-47fd-9af2-45211b839783&lt;/ActivityId&gt;\n    &lt;o:Security s:mustUnderstand=\"1\" xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n    &lt;u:Timestamp u:Id=\"uuid-4fb4f460-8485-492b-9865-1b4b49c5c187-16\"&gt;\n      &lt;u:Created&gt;2011-10-24T22:09:53.182Z&lt;/u:Created&gt;\n      &lt;u:Expires&gt;2011-10-24T22:14:53.182Z&lt;/u:Expires&gt;\n    &lt;/u:Timestamp&gt;\n</code></pre>\n\n<p>Any suggestions? </p>\n"},{"tags":["asp.net","wcf","http","cookies","header"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2249,"score":2,"question_id":4955401,"title":"How to set http cookies (headers) in HTTP request","body":"<p>I'm trying to set up a WCF service hosted in IIS in ASP.Net compatibility mode that is protected via Forms Authentication and accessed via a .Net User Control in IE. (see <a href=\"http://stackoverflow.com/questions/4874774/secure-iis-hosted-wcf-service-for-access-via-ie-hosted-winforms-user-control\">Secure IIS hosted WCF service for access via IE hosted user control</a>).</p>\n\n<p>The User Control in IE is needed because it uses a specific third-party control for which there doesn't exist anything comparable in Silverlight or AJAX.</p>\n\n<p>So I need the UserControl to set the authentication and session id cookies in the http request headers before it accesses the WCF service. My approach is to set up a Message inspector that does this.</p>\n\n<p>So I've defined the Message Inspector:</p>\n\n<pre><code>public class CookieInspector : IClientMessageInspector {\n\n    public void AfterReceiveReply(ref Message reply, object correlationState) {\n    }\n\n    public object BeforeSendRequest(\n            ref Message request, \n            IClientChannel channel) {\n\n        HttpRequestMessageProperty messageProperty;\n\n        if (request.Properties.ContainsKey(HttpRequestMessageProperty.Name)) {\n            messageProperty = (HttpRequestMessageProperty) request.Properties[\n                HttpRequestMessageProperty.Name\n            ];\n        }\n        else {\n            messageProperty = new HttpRequestMessageProperty();\n            request.Properties.Add(\n                HttpRequestMessageProperty.Name, \n                messageProperty\n            );\n        }\n\n        // Set test headers for now...\n        messageProperty.Headers.Add(HttpRequestHeader.Cookie, \"Bob=Great\");\n        messageProperty.Headers.Add(\"x-chris\", \"Beard\");\n\n        return null;\n    }\n}\n</code></pre>\n\n<p>and an Endpoint behaviour:</p>\n\n<pre><code>public class CookieBehavior : IEndpointBehavior {\n    public void AddBindingParameters(\n            ServiceEndpoint endpoint, \n            BindingParameterCollection bindingParameters) {\n    }\n\n    public void ApplyClientBehavior(\n            ServiceEndpoint endpoint, \n            ClientRuntime clientRuntime) {\n        clientRuntime.MessageInspectors.Add(new CookieInspector());\n    }\n\n    public void ApplyDispatchBehavior(\n            ServiceEndpoint endpoint, \n            EndpointDispatcher endpointDispatcher) {\n    }\n\n    public void Validate(ServiceEndpoint endpoint) {\n    }\n}\n</code></pre>\n\n<p>and I configure and create my channel and WCF client in code:</p>\n\n<pre><code>var ea = new EndpointAddress(\"http://.../MyService.svc\");\n\n// EDIT: Http cookies can't be set with WSHttpBinding :-(\n// var binding = WSHttpBinding();\nvar binding = new BasicHttpBinding();\n\n\n// Disable automatically managed cookies (which enables user cookies)\nbinding.AllowCookies = false;\n\n\nbinding.MaxReceivedMessageSize = 5000000;\nbinding.ReaderQuotas.MaxStringContentLength = 5000000;\nvar cf = new ChannelFactory&lt;ITranslationServices&gt;(binding, ea);\ncf.Endpoint.Behaviors.Add(new CookieBehavior());    \n\nITranslationServices service = cf.CreateChannel();\n</code></pre>\n\n<p>However when I look at my request with Fiddler, the http header and cookie aren't set, and I have no clue why. I've read various articles on the Net, Stackoverflow etc that basically say that it should work, but it doesn't. Either I'm missing something obvious, or there's a bug in WCF or something else?</p>\n"},{"tags":["c#","json","wcf","microsoft-metro","windows-store-apps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13060905,"title":"WCF RESTful POST using JSON, from Windows Store App","body":"<p>I am calling a RESTful web service (hosted in Azure) from my Windows Store App (Windows Metro App). This is the Service definition:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(UriTemplate=\"/Test/PostData\", \n    RequestFormat= WebMessageFormat.Json, \n    ResponseFormat= WebMessageFormat.Json, Method=\"POST\", \n    BodyStyle=WebMessageBodyStyle.WrappedRequest)]\nstring PostDummyData(string dummy_id, string dummy_content, int dummy_int);\n</code></pre>\n\n<p>From the Windows Store Apps, when calling, I am getting Request Error after posting (it did not even hit the breakpoint I placed in PostDummyData. I have tried the following methods:</p>\n\n<p><strong>Using a StringContent object</strong></p>\n\n<pre><code>using (var client = new HttpClient())\n{\n  JsonObject postItem = new JsonObject();\n  postItem.Add(\"dummy_id\", JsonValue.CreateStringValue(\"Dummy ID 123\"));\n  postItem.Add(\"dummy_content\", JsonValue.CreateStringValue(\"~~~Some dummy content~~~\"));\n  postItem.Add(\"dummy_int\", JsonValue.CreateNumberValue(1444));\n\n  StringContent content = new StringContent(postItem.Stringify());\n  using (var resp = await client.PostAsync(ConnectUrl.Text, content))\n    {\n        // ...\n    }\n}\n</code></pre>\n\n<p><strong>Using a HttpRequestMessage</strong></p>\n\n<pre><code>using (var client = new HttpClient())\n{\n  JsonObject postItem = new JsonObject();\n  postItem.Add(\"dummy_id\", JsonValue.CreateStringValue(\"Dummy ID 123\"));\n  postItem.Add(\"dummy_content\", JsonValue.CreateStringValue(\"~~~Some dummy content~~~\"));\n  postItem.Add(\"dummy_int\", JsonValue.CreateNumberValue(1444));\n\n  StringContent content = new StringContent(postItem.Stringify());\n  HttpRequestMessage msg = new HttpRequestMessage(HttpMethod.Post, ConnectUrl.Text);\n  msg.Content = content;\n  msg.Headers.TransferEncodingChunked = true;\n\n  using (var resp = await client.SendAsync(msg))\n    {\n        // ...\n    }\n}\n</code></pre>\n\n<p>I'd figured that it may be the content-type header that is having problem (last checked it was set to plain text, but I can't find a way to change it).</p>\n\n<p>The HTTP GET methods are all working fine though. Would appreciate if somebody can point me to a correct direction. Thanks!</p>\n"},{"tags":["wcf","uri","webclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13079590,"title":"WCF method being called via webclient - HTTP 400 - Bad Request","body":"<p>I am consuming a WCF service and receiving the error message \"The remote server returned an error: (400) Bad Request.\" when consuming via WebClient</p>\n\n<pre><code>public class WebClientService : WebClient\n            ...\n            base.Credentials = CredentialCache.DefaultCredentials;\n            base.OpenReadCompleted += new OpenReadCompletedEventHandler(ReadJsonStringAsyncComplete);\n            base.OpenReadAsync(new Uri(\"http://localhost/xxxx.svc/GetData\"));\n            ...\n</code></pre>\n\n<p>The WCF service to be consumed is as follows (note that both exist within the same solution (different projects)</p>\n\n<p>Contract/Interface:-</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"GET\", UriTemplate = \"/GetData\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\nIList&lt;MyType&gt; GetData();\n</code></pre>\n\n<p>Implementation:-</p>\n\n<pre><code>public IList&lt;MyType&gt; GetData()\n{\n    return (new MyTypeRepository()).All.ToList();\n}\n</code></pre>\n\n<p>The configuration:-</p>\n\n<pre><code>&lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;services&gt;\n  &lt;service name=\"xxxx.Service.MyService\" behaviorConfiguration=\"DataExtractBehavior\"&gt;\n    &lt;endpoint address=\"http://localhost:1422/MyService.svc\" binding=\"webHttpBinding\" bindingConfiguration=\"DataExtractBinding\" behaviorConfiguration=\"MyEndpointBehavior\" contract=\"xxxx.Service.Common.IMyService\"&gt;&lt;/endpoint&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;endpointBehaviors&gt;\n    &lt;behavior name=\"MyEndpointBehavior\"&gt;\n      &lt;webHttp /&gt;\n    &lt;/behavior&gt;\n  &lt;/endpointBehaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"Default\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;serviceAuthorization principalPermissionMode=\"UseAspNetRoles\" /&gt;\n      &lt;serviceCredentials&gt;\n        &lt;windowsAuthentication allowAnonymousLogons=\"false\" includeWindowsGroups=\"true\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n    &lt;behavior name=\"DataExtractBehavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;etwTracking profileName=\"EndToEndMonitoring Tracking Profile\" /&gt;\n    &lt;/behavior&gt;\n    &lt;behavior name=\"\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n      &lt;etwTracking profileName=\"EndToEndMonitoring Tracking Profile\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;bindings&gt;\n  &lt;webHttpBinding&gt;\n    &lt;binding name=\"DataExtractBinding\"&gt;\n      &lt;security mode=\"TransportCredentialOnly\"&gt;\n        &lt;transport clientCredentialType=\"Windows\"&gt;&lt;/transport&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;\n&lt;/bindings&gt;\n</code></pre>\n\n<p>I can view the service definition page via <code>http://localhost:1422/xxxx.svc</code> however I can't seem to call the method GetData (added onto the end of the URI - <code>http://localhost:1422/xxxx.svc/GetData</code>)</p>\n\n<p>Does anyone know why I would get a HTTP 400 - Bad Request</p>\n\n<p>Many thanks\nTravis</p>\n"},{"tags":["wcf","windows-phone-7","ssl","wcf-ria-services","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13069711,"title":"There was no end point listening for WCF AuthenticationService","body":"<p>I am trying to authenticate my user logging from <strong>windows phone 7</strong> using\n<strong>AuthenticationService WCF</strong> which is hosted in <strong>IIS 7</strong>.</p>\n\n<p><em>I tried it without SSL and is working fine. But I want to convert it to\nhttps.</em></p>\n\n<p>The error I am getting is when I hit the call to this WCF from my WP7 emulator\nis :</p>\n\n<pre><code>\"EndpointNotFoundException\"\n</code></pre>\n\n<p>However my web.config has the following details:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n   &lt;services&gt;\n     &lt;service name=\"System.Web.ApplicationServices.AuthenticationService\" \n    behaviorConfiguration=\"AuthenticationServiceTypeBehaviors\"&gt;\n       &lt;endpoint contract=\"System.Web.ApplicationServices.AuthenticationService\"  \n         binding=\"basicHttpBinding\"\n         bindingConfiguration=\"userHttps\" address=\"https://localhost:700/AuthenticationService.svc\"\n         bindingNamespace=\"http://asp.net/ApplicationServices/v200\"/&gt;\n       &lt;endpoint address=\"mex\" \n      binding=\"mexHttpsBinding\"\n      contract=\"IMetadataExchange\" /&gt; \n     &lt;/service&gt;\n\n   &lt;/services&gt;\n   &lt;bindings&gt;\n     &lt;basicHttpBinding&gt;\n       &lt;binding name=\"userHttps\"&gt;\n         &lt;security mode=\"Transport\"&gt;\n           &lt;transport clientCredentialType=\"None\" /&gt;\n         &lt;/security&gt;\n       &lt;/binding&gt;\n     &lt;/basicHttpBinding&gt;\n   &lt;/bindings&gt;\n   &lt;behaviors&gt;\n     &lt;serviceBehaviors&gt;\n       &lt;behavior name=\"AuthenticationServiceTypeBehaviors\" &gt;\n         &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n         &lt;serviceDebug includeExceptionDetailInFaults=\"true\"  /&gt;\n       &lt;/behavior&gt;\n\n     &lt;/serviceBehaviors&gt;\n\n   &lt;/behaviors&gt;\n   &lt;serviceHostingEnvironment\n     aspNetCompatibilityEnabled=\"true\"/&gt;\n &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>\n     \n       \n         \n       \n     \n   </p>\n\n<p>USING: AspNetSqlMembershipProvider and I am avoiding those details to make the point.</p>\n\n<p>In my IIS 7, I have created an App pool and associated a self signed\ncertificate to the hosted WCF and in the SSL Settings options to \"Require SSL\n- selected\" and \"Ignore client certificates- checked\"</p>\n\n<p>I am able to browse to <code>https://localhost:700/AuthenticationService.svc.</code></p>\n\n<p>I was able to add this as a Service Reference in my phone, but when I call the\nlogin method it is showing the error.</p>\n\n<p>I have specified the end-point address and even then it is showing error.</p>\n\n<p>Can anyone explain me how to debug this to get more details or any pointers to\nsolve \"Using Authentication Service WCF via SSL\"</p>\n\n<p><strong>EDIT 1</strong> I tried using IP addresses and the svc URL when I tried accessing\nthe service through browser</p>\n\n<pre><code>svcutil.exe https://mcname.domain.local:700/AuthenticationService.svc?wsdl \n</code></pre>\n\n<p><strong>EDIT 2</strong> Tried disabling antivirus and firewalls and still no luck.</p>\n"},{"tags":["wcf","msmq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13078747,"title":"WCF Can't Open MSMQ Queue: Access is Denied","body":"<p>We have a Windows Service which uses WCF to reads messages from an MSMQ queue.  Recently, the service won't start because it can't open the queue:</p>\n\n<pre><code>Running WcfHost, service contract IWcfService.  :\nSystem.InvalidOperationException: There was an error opening the queue. Ensure \n that MSMQ is installed and running, the queue exists and has proper authorization\n to be read from. The inner exception may contain additional information. ---&gt;\n System.ServiceModel.MsmqException: An error occurred while opening the queue:\n Access is denied. (-1072824283, 0xc00e0025). The  message cannot be sent or \n received from the queue. Ensure that MSMQ is installed and running. Also ensure \n that the queue is available to open with the required access mode and \n authorization.\n   at System.ServiceModel.Channels.MsmqQueue.OpenQueue()\n   at System.ServiceModel.Channels.MsmqQueue.GetHandle()\n   at System.ServiceModel.Channels.MsmqQueue.SupportsAccessMode(String formatName, Int32 accessType, MsmqException&amp; msmqException)\n   --- End of inner exception stack trace ---\n   at System.ServiceModel.Channels.MsmqVerifier.VerifyReceiver(MsmqReceiveParameters receiveParameters, Uri listenUri)\n   at System.ServiceModel.Channels.MsmqTransportBindingElement.BuildChannelListener[TChannel](BindingContext context)\n   at System.ServiceModel.Channels.Binding.BuildChannelListener[TChannel](Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, BindingParameterCollection parameters)\n   at System.ServiceModel.Description.DispatcherBuilder.MaybeCreateListener(Boolean actuallyCreate, Type[] supportedChannels, Binding binding, BindingParameterCollection parameters, Uri listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode listenUriMode, ServiceThrottle throttle, IChannelListener&amp; result, Boolean supportContextSession)\n   at System.ServiceModel.Description.DispatcherBuilder.BuildChannelListener(StuffPerListenUriInfo stuff, ServiceHostBase serviceHost, Uri listenUri, ListenUriMode listenUriMode, Boolean supportContextSession, IChannelListener&amp; result)\n   at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)\n   at System.ServiceModel.ServiceHostBase.InitializeRuntime()\n   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at WcfHost`2.Open() \n</code></pre>\n\n<p>We've double-checked the queue's permissions and they haven't changed.  We've run <a href=\"http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx\" rel=\"nofollow\">ProcMon</a> and aren't seeing any access denied events.  We don't know what changed to cause this error.  </p>\n\n<p><strong>Why can't WCF open this queue?</strong></p>\n"},{"tags":["wcf","xsd","svcutil.exe","xsd.exe"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":564,"score":0,"question_id":3176264,"title":"How to handle xs:any in WCF Data Contract","body":"<p>scratching my head on WCF ... I've got XML messages where the children of <code>&lt;DataFields&gt;</code> could be anything, e.g. ...</p>\n\n<pre><code>&lt;Test1Root&gt; \n  &lt;CaseNo&gt;&lt;/CaseNo&gt;\n  &lt;Activity&gt;&lt;/Activity&gt;\n  &lt;DataFields&gt;\n     &lt;AccountRef&gt;&lt;/AccountRef&gt;\n     &lt;PropRef&gt;&lt;/PropRef&gt;\n     &lt;User&gt;&lt;/User&gt;\n  &lt;/DataFields&gt;\n&lt;/Test1Root&gt;\n</code></pre>\n\n<p>I've handled this in BizTalk using the <code>&lt;xs:any&gt;</code> for the <code>&lt;DataFields&gt;</code> ...</p>\n\n<pre><code>&lt;xs:element name=\"DataFields\"&gt;\n  &lt;xs:complexType&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:any minOccurs=\"0\" maxOccurs=\"unbounded\" processContents=\"skip\" /&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n</code></pre>\n\n<p>But I'm struggling to see how to handle this in a WCF <code>[DataContract]</code> ... </p>\n\n<p>I tried using both <strong>svcutil.exe</strong> and <strong>xsd.exe</strong> to create the classes, and they both give the main elements (CaseNo, Activity, etc.) but neither seems to handle the xs:any of DataFields ...</p>\n\n<ul>\n<li>svcutil has DataFields as an XmlElement</li>\n<li>xsd has it as a class, but with an Any property of type XmlElement []</li>\n</ul>\n\n<p>Is it possible to get a better handling of the child elements ?</p>\n"},{"tags":["wcf","logging","silverlight-5.0","out"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13078064,"title":"Log out in Silverlight 5 using WCF RSS","body":"<p>everybody.</p>\n\n<p>I'm developing an app that is in Silverlight 5 using WCF. The login is validated using Active Directory. My problem is that the app requires a timeout session. I mean, the app must to log out and redirect to the login after 5 minutes of inactivity.</p>\n\n<p>Ideas?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":13075022,"title":"WCF call taking 20 seconds","body":"<p>I'm somewhat new to WCF and a call to get a record is taking almost 20 seconds, even a local call during debug takes that time. It completes correctly but is so slow.</p>\n\n<p>Client call:</p>\n\n<pre><code>var docImgSvc = new DocImagingService.DocImagingStatusServiceClient(\"WSHttpBinding_IDocImagingStatusService\");\nCurrentManifest = docImgSvc.GetManifest(manifestLookup);  //&lt;&lt;---This takes 20 secs\nif (CurrentManifest == null || CurrentManifest.ManifestId == 0)\n</code></pre>\n\n<p>Server routine:</p>\n\n<pre><code>public Manifest GetManifest(int manifestNumber)\n{\n    var de = new DocumentImagingEntities(); //&lt;&lt;---Takes 20 secs before it gets here.\n    var manifest = de.Manifests.FirstOrDefault(m =&gt; m.ManifestId == manifestNumber);\n    return manifest;\n}\n</code></pre>\n\n<p>Server config:</p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n&lt;services&gt;\n  &lt;service name=\"DocImagingServices.DocImagingStatusService\"&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"http://localhost:8732/Design_Time_Addresses/DocImagingServices/DocImagingStatusService/\"/&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n    &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"DocImagingServices.IDocImagingStatusService\"&gt;\n      &lt;identity&gt;\n        &lt;dns value=\"localhost\"/&gt;\n      &lt;/identity&gt;\n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior&gt;\n      &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p></p>\n\n<p>Client Config:</p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"WSHttpBinding_IDocImagingStatusService\" closeTimeout=\"00:01:00\"\n      openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n      bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n      maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\"\n      textEncoding=\"utf-8\" useDefaultWebProxy=\"true\" allowCookies=\"false\"&gt;\n      &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n      &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n        enabled=\"false\" /&gt;\n      &lt;security mode=\"Message\"&gt;\n        &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n          realm=\"\" /&gt;\n        &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n          algorithmSuite=\"Default\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;client&gt;\n  &lt;endpoint address=\"http://localhost:8732/Design_Time_Addresses/DocImagingServices/DocImagingStatusService/\"\n  binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_IDocImagingStatusService\"\n  contract=\"DocImagingService.IDocImagingStatusService\" name=\"WSHttpBinding_IDocImagingStatusService\"&gt;\n    &lt;identity&gt;\n      &lt;dns value=\"localhost\" /&gt;\n    &lt;/identity&gt;\n  &lt;/endpoint&gt;\n&lt;/client&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["wcf","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1438,"score":3,"question_id":4677788,"title":"Output directory when building a WCF project in Visual Studio","body":"<p>I have a Visual Studio 2010 solution that is set to build in Debug x86. Visual Studio therefore sets the output path to \\bin\\x86\\Debug, which seems logical enough.</p>\n\n<p>The solution contains about 50 projects; the start-up project is a WCF project.</p>\n\n<p>When I do a build, I would expect all output dlls to go to \\bin\\x86\\Debug, as that is what is set in the project settings. But weirdly, I see dlls being created in bin\\x86\\Debug <strong>and</strong> in \\bin. Why would Visual Studio put any dll in \\bin if the output path is not set to that directory? It seems that all dlls go to \\bin\\x86\\Debug, and all dlls <strong>except for the start-up project</strong> go into \\bin. Any idea why it would do that? (We have other solutions that don't use WCF, and they don't have this problem.)</p>\n\n<p>The other annoyance is if I run the service from Visual Studio and then try to access my service in a web browser, by going to <a href=\"http://localhost:1240/MyService.svc\" rel=\"nofollow\">http://localhost:1240/MyService.svc</a>, it doesn't work, because the start-up project dll is missing from /bin. I therefore have to manually copy this one dll from \\bin\\x86\\Debug to \\bin, so that all dlls are found and the service runs normally. (We could of course add a custom post-build step that does the copy, but you'd think there'd be a better way!)</p>\n\n<p>To those of you working on WCF projects, do you leave the output path at \\bin\\x86\\Debug? (Perhaps there is a way to configure the service, eg in the web.config or .svc file, so that it knows the binaries are in \\bin\\x86\\Debug instead of \\bin?) Or do you change the output path to \\bin so that you can run your service straight from Visual Studio? </p>\n"},{"tags":["wcf","file-upload","cxf"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":127,"score":1,"question_id":13040343,"title":"Creating a CXF proxy client for WCF file upload","body":"<p>I'm trying to create a WCF service (.Net 4.5 in VS2012) for file uploads that can be consumed by clients in other languages, Java (using CXF) in particular. I've got the WCF side of things working great from .Net clients, but am having some issues on the CXF side. </p>\n\n<p>When I try to generate the proxy in CXF from the WSDL through Eclipse (4.2/Juno), I'm getting an exception that prevents the proxy from being created:</p>\n\n<pre><code>wsdl2java -client -d C:\\Users\\Ryan\\workspace\\WcfProxy\\.cxftmp/src -classdir C:\\Users\\Ryan\\workspace\\WcfProxy\\build\\classes -p http://tempuri.org/=org.tempuri -impl -validate -exsh false -dns true -dex true -wsdlLocation http://localhost:10186/UploadFile.svc?wsdl -verbose -defaultValues -fe jaxws -db jaxb -wv 1.1 http://localhost:10186/UploadFile.svc?wsdl\nwsdl2java - Apache CXF 2.7.0\n\n\nWSDLToJava Error: Schema Error : src-resolve: Cannot resolve the name 'ns0:StreamBody' to a(n) 'type definition' component.\n\norg.apache.cxf.tools.common.ToolException: Schema Error : src-resolve: Cannot resolve the name 'ns0:StreamBody' to a(n) 'type definition' component.\nat org.apache.cxf.tools.wsdlto.databinding.jaxb.JAXBDataBinding.validateSchema(JAXBDataBinding.java:914)\nat org.apache.cxf.tools.wsdlto.databinding.jaxb.JAXBDataBinding.addSchemas(JAXBDataBinding.java:586)\nat org.apache.cxf.tools.wsdlto.databinding.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:392)\nat org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.generateTypes(WSDLToJavaContainer.java:603)\nat org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.processWsdl(WSDLToJavaContainer.java:248)\nat org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:142)\nat org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:300)\nat org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:103)\nat org.apache.cxf.tools.wsdlto.WSDLToJava.run(WSDLToJava.java:113)\nat org.apache.cxf.tools.wsdlto.WSDLToJava.run(WSDLToJava.java:86)\nat org.apache.cxf.tools.wsdlto.WSDLToJava.main(WSDLToJava.java:184)\nCaused by: org.xml.sax.SAXParseException; src-resolve: Cannot resolve the name 'ns0:StreamBody' to a(n) 'type definition' component.\nat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\nat com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaErr(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.reportSchemaError(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getGlobalDecl(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDElementTraverser.traverseNamedElement(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDElementTraverser.traverseLocal(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.traverseLocalElements(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)\nat com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)\nat com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory.newSchema(Unknown Source)\nat javax.xml.validation.SchemaFactory.newSchema(Unknown Source)\nat org.apache.cxf.tools.wsdlto.databinding.jaxb.JAXBDataBinding.validateSchema(JAXBDataBinding.java:909)\n... 10 more\n</code></pre>\n\n<p>My WCF service contract is as follows:</p>\n\n<pre><code>&lt;ServiceContract()&gt;\nPublic Interface IUploadFile\n\n    &lt;OperationContract()&gt;\n    Sub UploadFile(ByVal remoteFile As RemoteFile)\n\n    &lt;OperationContract()&gt;\n    Function DownloadFile() As RemoteFile\n\nEnd Interface\n</code></pre>\n\n<p>My WCF message contract (<code>RemoteFile</code>) is as follows:</p>\n\n<pre><code>&lt;MessageContract()&gt; _\nPublic Class RemoteFile\n    Implements IDisposable\n\n    &lt;MessageHeader(MustUnderstand:=True)&gt; _\n    Public FileName As String\n\n    &lt;MessageHeader(MustUnderstand:=True)&gt; _\n    Public Length As Long\n\n    &lt;MessageBodyMember(Order:=1)&gt; _\n    Public FileByteStream As System.IO.Stream\n\n    Public Sub Dispose() Implements IDisposable.Dispose\n        If FileByteStream IsNot Nothing Then\n            FileByteStream.Close()\n            FileByteStream = Nothing\n        End If\n    End Sub\nEnd Class\n</code></pre>\n\n<p>My WCF service configuration is as follows:</p>\n\n<pre><code>...\n&lt;system.serviceModel&gt;\n  &lt;bindings&gt;\n    &lt;basicHttpBinding&gt;\n      &lt;binding name=\"FileTransferServicesBinding\"\n        transferMode=\"Streamed\"\n        messageEncoding=\"Mtom\"\n        maxReceivedMessageSize=\"10067108864\"&gt;\n      &lt;/binding&gt;\n    &lt;/basicHttpBinding&gt;\n  &lt;/bindings&gt;\n  &lt;services&gt;\n    &lt;service behaviorConfiguration=\"UploadServiceBehavior\" name=\"Server.UploadFile\"&gt;\n      &lt;endpoint address=\"\"\n            binding=\"basicHttpBinding\"\n            bindingConfiguration=\"FileTransferServicesBinding\"\n            contract=\"Server.IUploadFile\" /&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"UploadServiceBehavior\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\" /&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;/system.serviceModel&gt;\n...\n</code></pre>\n\n<p>My WSDL is as follows:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;wsdl:definitions name=\"UploadFile\" targetNamespace=\"http://tempuri.org/\"&gt;\n&lt;wsp:Policy wsu:Id=\"BasicHttpBinding_IUploadFile_policy\"&gt;\n    &lt;wsp:ExactlyOne&gt;\n        &lt;wsp:All&gt;\n            &lt;wsoma:OptimizedMimeSerialization/&gt;\n        &lt;/wsp:All&gt;\n    &lt;/wsp:ExactlyOne&gt;\n&lt;/wsp:Policy&gt;\n&lt;wsdl:types&gt;\n    &lt;xsd:schema targetNamespace=\"http://tempuri.org/Imports\"&gt;\n        &lt;xsd:import schemaLocation=\"http://localhost:10186/UploadFile.svc?xsd=xsd1\" namespace=\"http://tempuri.org/\"/&gt;\n        &lt;xsd:import schemaLocation=\"http://localhost:10186/UploadFile.svc?xsd=xsd0\" namespace=\"http://schemas.microsoft.com/Message\"/&gt;\n        &lt;xsd:import schemaLocation=\"http://localhost:10186/UploadFile.svc?xsd=xsd2\" namespace=\"http://schemas.microsoft.com/2003/10/Serialization/\"/&gt;\n    &lt;/xsd:schema&gt;\n&lt;/wsdl:types&gt;\n&lt;wsdl:message name=\"RemoteFile\"&gt;\n    &lt;wsdl:part name=\"parameters\" element=\"tns:RemoteFile\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"RemoteFile_Headers\"&gt;\n    &lt;wsdl:part name=\"FileName\" element=\"tns:FileName\"/&gt;\n    &lt;wsdl:part name=\"Length\" element=\"tns:Length\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"IUploadFile_DownloadFile_InputMessage\"/&gt;\n&lt;wsdl:portType name=\"IUploadFile\"&gt;\n    &lt;wsdl:operation name=\"UploadFile\"&gt;\n        &lt;wsdl:input wsaw:Action=\"http://tempuri.org/IUploadFile/UploadFile\" name=\"RemoteFile\" message=\"tns:RemoteFile\"/&gt;\n    &lt;/wsdl:operation&gt;\n    &lt;wsdl:operation name=\"DownloadFile\"&gt;\n        &lt;wsdl:input wsaw:Action=\"http://tempuri.org/IUploadFile/DownloadFile\" message=\"tns:IUploadFile_DownloadFile_InputMessage\"/&gt;\n        &lt;wsdl:output wsaw:Action=\"http://tempuri.org/IUploadFile/DownloadFileResponse\" name=\"RemoteFile\" message=\"tns:RemoteFile\"/&gt;\n    &lt;/wsdl:operation&gt;\n&lt;/wsdl:portType&gt;\n&lt;wsdl:binding name=\"BasicHttpBinding_IUploadFile\" type=\"tns:IUploadFile\"&gt;\n    &lt;wsp:PolicyReference URI=\"#BasicHttpBinding_IUploadFile_policy\"/&gt;\n    &lt;soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n    &lt;wsdl:operation name=\"UploadFile\"&gt;\n        &lt;soap:operation soapAction=\"http://tempuri.org/IUploadFile/UploadFile\" style=\"document\"/&gt;\n        &lt;wsdl:input name=\"RemoteFile\"&gt;\n            &lt;soap:header message=\"tns:RemoteFile_Headers\" part=\"FileName\" use=\"literal\"/&gt;\n            &lt;soap:header message=\"tns:RemoteFile_Headers\" part=\"Length\" use=\"literal\"/&gt;\n            &lt;soap:body use=\"literal\"/&gt;\n        &lt;/wsdl:input&gt;\n    &lt;/wsdl:operation&gt;\n    &lt;wsdl:operation name=\"DownloadFile\"&gt;\n        &lt;soap:operation soapAction=\"http://tempuri.org/IUploadFile/DownloadFile\" style=\"document\"/&gt;\n        &lt;wsdl:input&gt;\n            &lt;soap:body use=\"literal\"/&gt;\n        &lt;/wsdl:input&gt;\n        &lt;wsdl:output name=\"RemoteFile\"&gt;\n            &lt;soap:header message=\"tns:RemoteFile_Headers\" part=\"FileName\" use=\"literal\"/&gt;\n            &lt;soap:header message=\"tns:RemoteFile_Headers\" part=\"Length\" use=\"literal\"/&gt;\n            &lt;soap:body use=\"literal\"/&gt;\n        &lt;/wsdl:output&gt;\n    &lt;/wsdl:operation&gt;\n&lt;/wsdl:binding&gt;\n&lt;wsdl:service name=\"UploadFile\"&gt;\n    &lt;wsdl:port name=\"BasicHttpBinding_IUploadFile\" binding=\"tns:BasicHttpBinding_IUploadFile\"&gt;\n        &lt;soap:address location=\"http://localhost:10186/UploadFile.svc\"/&gt;\n    &lt;/wsdl:port&gt;\n&lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n\n<p>Obviously the exception indicates it is having an issue creating the stream body type of the message, but does anyone see what I'm doing wrong or need to change to be able to generate a CXF proxy for this WCF service?</p>\n\n<p><strong>EDIT</strong> Added WSDL to original post.</p>\n"},{"tags":["wcf","host","wcf-hosting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13075844,"title":"How to host WCF service in console apps","body":"<p>i am learning wcf. so i create wcf project and that has one class. code as follows</p>\n\n<pre><code>namespace TestWcfService1\n{\n// NOTE: You can use the \"Rename\" command on the \"Refactor\" menu to change the class name \"Service1\" in code, svc and config file together.\npublic class Service1 : IService1\n{\n    public string GetData(string value)\n    {\n        return string.Format(\"You entered: {0}\", \"Welcome \" + value);\n    }\n\n}\n}\n</code></pre>\n\n<p>now when i am trying to add the wcf service reference to my console apps like add service reference and the service url like this <strong>http://localhost:21541/Service1.svc</strong> then i am getting error called <strong>Metadata contains a reference that cannot be resolved: 'http://localhost:21541/Service1.svc'.</strong></p>\n\n<p>so i am just not being able to achieve my goal. i know some where i am missing something and that is why i am getting error. so please guide me how to add service ref to console apps. app.config will be updated automatically or do i need to write anything there. help please. thanks</p>\n"},{"tags":["c#","wcf","windows-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13073673,"title":"WCF Windows Service consuming Service embedded in Windows Form","body":"<p>I have a Windows Service with a WCF Library.  On the same machine, I have a Windows Form application with a WCF Service embedded into it.  My problem arises when I try to consume the service in the Form from the Windows Service.</p>\n\n<p>The WCF service in the Form has a \"basicHttpBinding\" endpoint exposed as well as a \"mexHttpBinding\".  I am able to test the service in the Form with the 'WCF Test Client' with no problems.</p>\n\n<p>In the Windows Service, I am able to add a Service reference to the Form's service and all is well.  However, when I actually run the Windows Service, and try to consume the WCF Service in the Form, I get this error:</p>\n\n<blockquote>\n  <p>The message with Action 'http://tempuri.org/<strong>IService1</strong>/shutMeDown'\n  cannot be processed at the receiver, due to a ContractFilter mismatch\n  at the EndpointDispatcher. This may be because of either a contract\n  mismatch (mismatched Actions between sender and receiver) or a\n  binding/security mismatch between the sender and the receiver.  Check\n  that sender and receiver have the same contract and the same binding\n  (including security requirements, e.g. Message, Transport, None).</p>\n</blockquote>\n\n<p>See that \"IService1\" in there?  I'm pretty sure that's the problem.  The Windows Service itself is configured to host a Service called \"Service1\" as you can see below in the <code>&lt;services&gt;</code> section.  So it seems like I must have something wrong in my app.config.</p>\n\n<p>My best guess is that I have something wrong with the way that I have my <code>&lt;client&gt;</code> setup in my app.config.  It seems like, for some reason, when I am trying to consume the service in the Form, the Windows Service is using the wrong address.  It's using the address of it's own service, not the address of the Form's service.</p>\n\n<p>Here are the relevant parts of the app.config from my Windows Service:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_IFormControlService\" /&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://localhost:8700/FormControlService\"\n        binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IFormControlService\"\n        contract=\"Form_ServiceReference.IFormControlService\" name=\"BasicHttpBinding_IFormControlService\" /&gt;\n    &lt;/client&gt;\n    &lt;services&gt;\n      &lt;service name=\"smMonitor_wcfServiceLibrary.Service1\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8800/smMonitorService/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"smMonitor_wcfServiceLibrary.IService1\"&gt;              \n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;            \n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;              \n          &lt;serviceMetadata httpGetEnabled=\"True\" httpsGetEnabled=\"True\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>My setup is this.  I have a Windows Service running on a machine.  On the same machine I have a Widows Form.  The Windows Form exposes a service that will allow the Windows Service to interact with it.</p>\n"},{"tags":["wcf","azure","wcf-client",".net-micro-framework","netmf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":195,"score":0,"question_id":10220382,"title":"Error (StackOverflowException) while creating WCF proxy for .NET Micro Framework DPWS using MFSvcUtil.exe","body":"<p>I'm trying to get my device working with my WCF service hosted in Azure, so I followed the article <em><a href=\"http://msdn.microsoft.com/en-us/magazine/gg232761.aspx\" rel=\"nofollow\">Connected Devices Using the .NET Micro Framework</a></em> that shows me how to do it.</p>\n\n<p>The point at which I'm having problems is when I'm trying to run <code>MFSvcUtil.exe</code> to generate the proxy code, so I can access the WCF service methods from <a href=\"http://en.wikipedia.org/wiki/.NET_Micro_Framework\" rel=\"nofollow\">NETMF</a> at device side.</p>\n\n<p>If I try to run </p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft .NET Micro Framework\\v4.1\\Tools\\MFSvcUtil.exe\" http://myservice.cloudapp.net/TrackingService.svc?singlewsdl /V\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre><code>**MfSvcUtil.exe (c) Microsoft 2008\nReading WSDL file: http://myservice.cloudapp.net/TrackingService.svc?singlewsdl\nCould not find schema information for the element 'HTML'.\nSeverity: Warning\nException: System.Xml.Schema.XmlSchemaValidationException: Could not find schema information for the element 'HTML'.\nSourceUri: http://myservice.cloudapp.net/TrackingService.svc?singlewsdl\nLineNumber: 1\nPosition: 2\nStackTrace: \n\nProgram Error: The WSDL file is not compatible.**\n</code></pre>\n\n<p>Now, if I try to run with the regular WSDL file like</p>\n\n<pre><code>MFSvcUtil.exe\" http://myservice.cloudapp.net/TrackingService.svc?WSDL /V\n</code></pre>\n\n<p>I get this output followed by a <code>StackOverflowException</code> that I can't find the stacktrace, see <code>http://localhostr.com/file/QCEVawT/log.txt</code> (uploaded because of the limit of characters).</p>\n\n<p>And this is my full WSDL: <a href=\"http://pastebin.com/M9KVYD0e\" rel=\"nofollow\">http://pastebin.com/M9KVYD0e</a></p>\n\n<p>How do I work around this problem?</p>\n"},{"tags":["asp.net","wcf","rest","session-state","asp.net-session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13075259,"title":"WCF, REST, Concurrency, Sessions","body":"<p>We have a WCF REST service that sends data from the server to the web client. These are the web.config settings</p>\n\n<pre><code>    &lt;binding name=\"Binding_Service_Name\"\n      closeTimeout=\"00:01:30\" openTimeout=\"00:01:30\" receiveTimeout=\"00:01:30\"\n      sendTimeout=\"00:01:30\" allowCookies=\"false\" bypassProxyOnLocal=\"false\"\n      hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"1048576\"\n      maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"1048576\" messageEncoding=\"Text\"\n      textEncoding=\"utf-8\" transferMode=\"Buffered\" useDefaultWebProxy=\"true\"&gt; \n\n   &lt;client&gt;\n     &lt;endpoint address=\"https://FQDN//RESTService.svc\"\n       binding=\"basicHttpBinding\" bindingConfiguration=\"Binding_Service_Name\"\n       contract=\"Contract\"\n       name=\"BindingName\" /&gt;\n    &lt;/client&gt; \n\n&lt;services&gt;\n      &lt;service behaviorConfiguration=\"RESTServiceBehavior\"\n        name=\"Name\"&gt;\n          &lt;endpoint address=\"\" behaviorConfiguration=\"webBehavior\" binding=\"customBinding\" \n           bindingConfiguration=\"jsonpBinding\" contract=\"contract\"&gt;\n        &lt;/endpoint&gt;\n        &lt;!--&lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;    jsonpBinding--&gt;\n      &lt;/service&gt;\n&lt;serviceBehaviors&gt;\n        &lt;behavior name=\"Bco.Sitecore.UI.RESTApi.RESTServiceBehavior\"&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;!--HTTPS--&gt;\n          &lt;!--&lt;serviceMetadata httpsGetEnabled=\"true\"/&gt;--&gt;\n          &lt;!--HTTP--&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n          &lt;serviceThrottling maxConcurrentCalls=\"1000\" maxConcurrentInstances=\"1000\" maxConcurrentSessions=\"1000\" /&gt;\n        &lt;/behavior&gt;\n&lt;/serviceBehaviors&gt;\n</code></pre>\n\n<p>Compatibility mode in web.config - aspnetCompatibilitymode = true</p>\n\n<p>The REST Service has read/writes into the HttpSession.</p>\n\n<p>When there are concurrent calls from the website, asp.net serializes these calls. What do I do to have these as concurrent calls? Read/writes to the session for this REST service is something we carried over from our older code and it's impossible to get around the Session Read/Writes</p>\n\n<p>Would appreciate a solution to this/direction to solve this problem.Thanks!</p>\n"},{"tags":["asp.net","wcf","iis","web-config","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":12240497,"title":"Multiple Web/WCF Projects in One IIS Application","body":"<p>An Visual Studio project, for ASP.NET or WCF, typically is assigned one-to-one with an IIS application.   But what if, for example, I want two WCF projects to be hosted in the same appdomain within IIS?  This implies that I would have two Visual Studio WCF projects assigned to a single IIS application.</p>\n\n<p>I started to try this out, and ran into the <a href=\"http://scottonwriting.net/sowblog/archive/2010/02/17/163375.aspx\" rel=\"nofollow\">first error message</a>.  I've <a href=\"http://stackoverflow.com/a/5278089/284758\">seen comments</a> suggesting how \"not to do this.\"  But in my case, I actually <em>want</em> to do this.  I don't mind if this means having three web configs for the IIS application (one at the root of the IIS app, the other two in \"project\" folders it contains) or if it means having only one web config for the IIS application.  </p>\n\n<p>So for my two Visual Studio WCF projects, I've shuffled around web.config contents in a variety of ways:</p>\n\n<ul>\n<li>One IIS application, pointing at the physical directory where my Visual Studio solution file is found.  The two WCF projects are in two respective subfolders</li>\n<li>One IIS application, pointing at some arbitrary physical location, containing two virtual directories pointing to the two WCF project physical directories, respectively.  I have three web config files here: one for the IIS app root, the other two in the virtual directories.</li>\n</ul>\n\n<p>A variation of the second option above nearly worked.  The final error message I got was:</p>\n\n<blockquote>\n  <blockquote>\n    <p>The type 'Sample.ServiceGroupAlpha.ServiceAlpha', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.<br>\n    <strong>Description</strong>: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.<br>\n    <strong>Exception Details</strong>: System.InvalidOperationException: The type 'Sample.ServiceGroupAlpha.ServiceAlpha', provided as the Service attribute value in the ServiceHost directive, or provided in the configuration element system.serviceModel/serviceHostingEnvironment/serviceActivations could not be found.</p>\n  </blockquote>\n</blockquote>\n\n<p>This prompted me to look at the ServiceHost directive, and (coyly) modify it:</p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"Sample.ServiceGroupAlpha.ServiceAlpha\" CodeBehind=\"AlphaServices/ServiceAlpha.svc.cs\" %&gt;\n</code></pre>\n\n<p>...notice the <code>CodeBehind</code> attribute has a relative path I added (the name of the virtual directory).  Well, this didn't work, but I can't help but think I'm close to making this work.  I'd like to know if anyone has a fix, or can relay the \"correct\" way to accomplish this whole thing.</p>\n\n<p>Ultimately the answer may be that there is no such thing as having two separate web/WCF projects within the same IIS application; I would be surprised if that was the case.  Another answer may be \"combine the two WCF projects into a single Visual Studio project/binary.\"  Please assume I don't want that answer either.</p>\n"},{"tags":["wcf","encryption","compression","wshttpbinding","custom-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13052772,"title":"How to compress before encrypting message in a custom binding?","body":"<p>I have followed the example at microsoft <a href=\"http://msdn.microsoft.com/en-us/library/ms751458.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ms751458.aspx</a> regarding creation of a custom binding to compress messages. However, I want to have my traffic encrypted at the same time. This works great, however the encryption is performed before my compression, meaning that the size of the message is becoming larger instead of smaller...\nMy binding is configured as</p>\n\n<pre><code>&lt;customBinding&gt;\n  &lt;binding name=\"GZipBinding\" &gt;                 \n    &lt;gzipMessageEncoding innerMessageEncoding=\"textMessageEncoding\"/&gt;\n    &lt;transactionFlow /&gt;\n    &lt;security authenticationMode=\"SecureConversation\" &gt;\n      &lt;secureConversationBootstrap authenticationMode=\"UserNameForCertificate\" /&gt;\n    &lt;/security&gt;                 \n    &lt;httpTransport  maxReceivedMessageSize=\"104857600\" maxBufferSize=\"104857600\"/&gt;\n  &lt;/binding&gt;\n&lt;/customBinding&gt;\n</code></pre>\n\n<p>Is it possible somehow to compress before I encrypt the message ?</p>\n"},{"tags":["wcf","windows-services","wcf-security"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4897,"score":4,"question_id":1560906,"title":"WCF Security in a Windows Service","body":"<p>I have a WCF service which can run as Console App and a Windows Service. I have recently copied the console app up to a W2K3 server with the following security settings:</p>\n\n<pre><code>&lt;wsHttpBinding&gt;\n &lt;binding name=\"ServiceBinding_Security\" transactionFlow=\"true\" &gt;\n  &lt;security mode=\"TransportWithMessageCredential\" &gt;\n    &lt;message clientCredentialType=\"UserName\" /&gt;\n  &lt;/security&gt;   \t\t\n &lt;/binding&gt; \t\t\t\n&lt;/wsHttpBinding&gt; \n\n&lt;serviceCredentials&gt;\n &lt;userNameAuthentication  userNamePasswordValidationMode=\"Custom\" \n  customUserNamePasswordValidatorType=\"Common.CustomUserNameValidator, Common\" /&gt;\n&lt;/serviceCredentials&gt;\n</code></pre>\n\n<p>Security works fine with no problems. I have exactly the same code, but running in a windows service and I get the following error when I try to call any of the methods from a client:</p>\n\n<pre><code>System.ServiceModel.Security.MessageSecurityException was unhandled\nMessage=\"An unsecured or incorrectly secured fault was received from \n         the other party. See the inner FaultException for the fault code and detail.\"\n  Source=\"mscorlib\"\n  StackTrace:\n    Server stack trace: \n       at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.ProcessReply(Message reply, SecurityProtocolCorrelationState correlationState, TimeSpan timeout)\n       ......   \n    (lots of stacktrace info - not very useful)\n\n  InnerException: System.ServiceModel.FaultException\n       Message=\"An error occurred when verifying security for the message.\"\n</code></pre>\n\n<p>The exception tells me nothing. I'm assuming that it has something to do with acces to system resources from the Windows Service. I've tried running it under the same account as the console app, but no luck. Does anyone have any ideas?</p>\n"},{"tags":["wcf","oop","callback"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13074076,"title":"Issues with Call Context and WCF Message Inspectors","body":"<p>I like this <a href=\"http://www.hightech.ir/SeeSharp/additional-callcontext-information-in\" rel=\"nofollow\">WCF code sample of passing call context through headers</a>, but it raises a couple issues:</p>\n\n<ol>\n<li>The GetInfo() method, when tailored to my app, might contain unwanted dependencies.  For example, I might change GetInfo() to access HttpContext.Current.Request.UserHostAddress.  But now my proxy has a dependency on HttpContext that could render it useless in a non-web context.</li>\n<li>In the example, the IDispatchMessageInspector is storing retrieved context in thread local storage.  If the thread executing the DispatchRuntime is different than the thread executing the DispatchOperation (<a href=\"http://sankarsan.wordpress.com/2008/12/28/wcf-extension-points-dispatcher/\" rel=\"nofollow\">see breakdown</a>), then this won't work.</li>\n</ol>\n\n<p>To solve the first problem, I'm hoping there is a way to set a callback on the proxy when or before it is opened.  If the callback can be accessed by the IClientMessageInspector, then the callback could access any dependency, such as HttpContext, without polluting the proxy itself.  Can this be done?  What event do I access for this?</p>\n\n<p>To solve the second problem, I could just move the <code>IncomingMessageHeaders.FindHeader(..)</code> call to an <a href=\"http://wcfpro.wordpress.com/2011/01/14/icallcontextinitializer/\" rel=\"nofollow\">ICallContextInitializer</a>, which (I think) is guaranteed to be on the same thread as the service operation.  But there is something So-Not-Symmetric about that.  It feels wrong; I'd like a messageinspector to traffic the context information on both sides, client and server, if possible.</p>\n\n<p>Anyone have suggestions regarding these problems (or proposed solutions)?</p>\n"},{"tags":["c#",".net","wcf",".net-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13072804,"title":"WCF DataMember shows default namespace when DataContract namespace has been declared","body":"<p>Just wanted to thank the community first off for previous help. I have a new question about default namespace in WCF. I have explicitly set a namespace for my DataContract as such:</p>\n\n<pre><code>[DataContract(Namespace=\"http://www.mydomain.com\")]\n</code></pre>\n\n<p>One of my DataMembers under the DataContract is a class derived from a reference in my project</p>\n\n<pre><code>[DataMember]\npublic MyClass MyClassName\n</code></pre>\n\n<p>My issue is that I get the default namespace for this DataMember:</p>\n\n<pre><code>http://schemas.datacontract.org/2004/07/MyClass\n</code></pre>\n\n<p>and I would like it to fall under the namespace of the DataContract. How can I change this</p>\n"},{"tags":["asp.net-mvc","wcf","web-services","api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13072769,"title":"MVC or Extract Service Layer","body":"<p>we have an application that is built with .Net MVC.  We are now tasked with exposing API's to third parties.  Members on our team want to just continue down our current path and just use more controllers so we can reuse the backend of our current application.  Logic tells me we need to create a seperate service layer when more clients are going to be accessing it, but .Net MVC seems to take care of all of this.  Is it really acceptable architecture to use controllers in a stand alone application to expose API's and what would be the potential gains of extracting the service layer out?</p>\n"},{"tags":["wcf","rest","wif","adfs"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13072251,"title":"Create claim-based Rest WCF","body":"<p>I have two domains. Each one has ADFS. In domain B I have a claim based SOAP WCF service and in domain A I have an active client. The client knows through configuration only, to:</p>\n\n<ol>\n<li>Go to A's ADFS and get a token.</li>\n<li>Go to B's ADFS with A's token and get a token for the SOAP WCF service.</li>\n<li>Access the WS with the token.</li>\n</ol>\n\n<p>It all works fine. Now I want to replace the SOAP WCF with Rest WCF.</p>\n\n<p>I want to make the client to go to the ADFS through the config like it works now, not through the code. Is this possible? How would I configure the client and the service?</p>\n"},{"tags":["asp.net","wcf","httphandler","httpmodule"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13070867,"title":"Intercept http request for the files on file server","body":"<blockquote>\n  <p>http://myfileserver/images/car/chevrolet.gif</p>\n</blockquote>\n\n<p>I have this file server holding the files such as images, doc files etc. Now i want to intercept the http request and based on the file extension i want perform some action such as redirection to some other webpage.</p>\n\n<p>What is the best and the easier way to accomplish this thing?  I am using asp.net framework for my applications.</p>\n\n<p>Pls suggest the approach.</p>\n\n<p>Thx </p>\n"},{"tags":["asp.net",".net","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13072140,"title":"WCF Operation not supported in WCF Test Client because it uses type system.object[]","body":"<p>Checking Visual studio cmd and its giving WCF Operation not supported in WCF Test Client because it uses type system.object[] </p>\n\n<pre><code>public object[] getAllClientApps(string client_name)\n            {\n                object[] msg = new object[2];\n                try\n                {\n                    string sql = @\"  SELECT [application]\n    FROM #portal.[dbo].[ix_clientApplications] inner join #portal.[dbo].[ix_clients] on #portal.[dbo].[ix_clientApplications].clientID\n    = #portal.[dbo].[ix_clients].client_id Where #portal.[dbo].[ix_clients].client_name='{client_name}' and #portal.[dbo].[ix_clientApplications].application not in('sys','dev','gsa') \n     and #portal.[dbo].[ix_clientApplications].updateAvailable=1 ; \n\n    SELECT [clientId], appName, [licenseType]\n    ,[licenseExpiry]\n    ,[isExpired]\n    ,[machineId]\n    ,[svr_appCustomJson]\n    FROM #portal.[dbo].[ix_licensedClientApps] where clientId=( select client_id from [inxPortalV4].[dbo].[ix_clients] where client_name='{client_name}')\n\n    \";\n                    sql = tools.getQueryWithDbName(sql);\n                    sql = sql.Replace(\"{client_name}\", client_name);\n                    System.Data.DataSet dsData = dbUtil.ReadDataSet(sql);\n\n                    string arrClntApps = inx.portal.common.tools.table2Json(dsData, 0);\n                    string arrClntNewAppsData = inx.portal.common.tools.table2Json(dsData, 1);\n                    msg[0] = arrClntApps;\n                    msg[1] = arrClntNewAppsData;\n                }\n                catch (Exception e)\n                {\n                    throw (new Exception(\"\" + e));\n                }\n                return msg;\n            }\n</code></pre>\n"},{"tags":["c#","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":70,"score":-2,"question_id":13065512,"title":"c# How to pass parameter in a type specific constructor?","body":"<p>I'm creating a web service(wcf). I need to pass parameter to a constructor in that web service anybody suggest me a way to do that. . . .</p>\n"},{"tags":["wcf","soap","xml-serialization","jax-ws"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13071399,"title":"XML generated by WCF client is missing some elements","body":"<p>I am writing a WCF client to communicate with a JAX-WS web service. Basically communication with the service works. But when investigating the XML generated by the WCF client there are some elements missing. All the properties are correctly generated and I have set them in my code. I am new to WCF and web services in general so I have problems to analize what could be wrong here. What could cause the missing elements in the XML? The only thing I noticed all these missing properties have in common is that they are enumeration types. But other than that I found nothing. For example there is a enumeration for country codes. An entitity has 3 properties of that enumeration type. Only one of the 3 related elements is generated in the XML. </p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#","asp.net","vb.net","wcf","httpcontext"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13071700,"title":"Cant get IP Address From Request WCF","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/391142/how-to-get-the-ip-address-of-a-wcf-remote-endpoint\">How to get the IP address of a WCF remote endpoint?</a>  </p>\n</blockquote>\n\n\n\n<p>Recently, we have broken out our API service layer, and have started adding more exposed WCF services. </p>\n\n<p>Our legacy code all used our \"in-house\" solution for emailing errors and exceptions, and we have to put that in the API layer that we are making.</p>\n\n<p>To do this, I just implemented a <strong>IErrorHandler</strong> as shown below:</p>\n\n<pre><code>public internal class ErrorHandler:IErrorHandler\n{\n    public void ProvideFault(Exception error, MessageVersion version, ref Message fault)\n    {\n\n    }\n\n    public bool HandleError(Exception error)\n    {\n        Path.To.Library.CustomError.Handle(error);\n        return false;\n    }\n}\n</code></pre>\n\n<p>To add this error handler behavior, I made a custom service behavior as shown below</p>\n\n<pre><code>public class CustomError: Attribute, IServiceBehavior\n{\n    public void Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)\n    {\n\n    }\n\n    public void AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection&lt;ServiceEndpoint&gt; endpoints, BindingParameterCollection bindingParameters)\n    {\n\n    }\n\n    public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)\n    {\n        foreach (ChannelDispatcher c in serviceHostBase.ChannelDispatchers)\n        {\n            c.ErrorHandlers.Add(new ErrorHandler());\n        }\n    }\n}\n</code></pre>\n\n<p>Everything up to this point works fine, and the call to the CustomError.Handle(...) is also being called.</p>\n\n<p>Once the following line is invoked in the <strong>ErrorHandler</strong>, it enters our legacy error handling which handles the error appropriately and emails which additionally is written in VB. (Please do not recommend another error/exception handling mechanism such as elmah because it is not my choice).</p>\n\n<p>Once this is invoked, we have the following lines that are executing pulling information off the HttpContext</p>\n\n<pre><code>Dim CTX As System.Web.HttpContext = System.Web.HttpContext.Current\n\n//More Code...yada yada yada\n\nDim ip = CTX.Request.ServerVariables(\"REMOTE_ADDR\")\n</code></pre>\n\n<p>The problem we are experiencing is SOMETIMES, we cannot get the IP address. We have tried multiple ways of getting it including REMOTE_HOST and Request.UserHostAddress, but sometimes they are not working when called from our WCF service layer. Anytime this code is called from anywhere else, it works fine and the ip shows up. </p>\n\n<p>Additionally, we have AspNetCompatibilityMode set to required because we need that in our WCF service.</p>\n\n<p>I am not sure what would be causing this, but we need to ensure that IP address is available when called from the WCF service. Is there something I have to set in the configuration for WCF to allow it to pass all the right Server Variables?</p>\n"},{"tags":["wcf","web-services","c#-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13071301,"title":"WCF service host not connecting to test client","body":"<p>I downloaded MS WCF examples and got one setup on my local machine and running fine.  I had someone else on the local network run my client.exe and it worked fine as well.</p>\n\n<p>Now I am trying to take the same service and apply it to it's final home on the same local network but on our web server.  The server serves up multiple web pages for us and we will be using it for a \"new\" forth coming application utilizing the WCF service.</p>\n\n<p>I have scoured stackoverflow and learned A LOT but have not found what I'm missing, which I think will be simple.</p>\n\n<p>When using my local wcftestclient I am able to add my locally hosted svc, but when I simply change the IP of the host which has the exact same svc files by means of a copy/paste I get the following generic error.</p>\n\n<pre><code>Error: Cannot obtain Metadata from http://192.168.1.17/gps.mySite.com/servicemodelsamples/service.svc?wsdl If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: http://192.168.1.17/gps.mySite.com/servicemodelsamples/service.svc?wsdl    Metadata contains a reference that cannot be resolved: 'http://192.168.1.17/gps.mySite.com/servicemodelsamples/service.svc?wsdl'.    An error occurred while receiving the HTTP response to http://192.168.1.17/gps.mySite.com/servicemodelsamples/service.svc?wsdl. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.    The underlying connection was closed: An unexpected error occurred on a receive.    Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.    An existing connection was forcibly closed by the remote hostHTTP GET Error    URI: http://192.168.1.17/gps.mySite.com/servicemodelsamples/service.svc?wsdl    There was an error downloading 'http://192.168.1.17/gps.mySite.com/servicemodelsamples/service.svc?wsdl'.    The underlying connection was closed: An unexpected error occurred on a receive.    Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.    An existing connection was forcibly closed by the remote host\n</code></pre>\n\n<p>I had the admin complete the following tasks in hope that it would resolve our issue based on the following link: <a href=\"http://stackoverflow.com/questions/3762287/script-not-served-by-static-file-handler-on-iis7-5\" title=\"Script not served by static file handler\">Script not served by static file handler</a></p>\n\n<p>I think these helped me finalize the service working locally but not on the remote server.</p>\n\n<p><em>Web.config:</em></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"Microsoft.Samples.GettingStarted.CalculatorService\" behaviorConfiguration=\"MetadataBehavior\"&gt;\n        &lt;endpoint address=\"\"\n                  binding=\"wsHttpBinding\"\n                  contract=\"Microsoft.Samples.GettingStarted.ICalculator\" /&gt;\n        &lt;endpoint address=\"mex\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"MetadataBehavior\"&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"True\" httpHelpPageEnabled=\"True\" /&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Localhost(working):\n7 Ultimate\nIIS 7.5\n.NET 4.0</p>\n\n<p>Remote host(not working):\n2008 R2\nIIS 7.5\n.NET 4.0</p>\n\n<p>Additional thoughts... Is there a port that may need to be opened on the hosting server?  Will there be additional issues/changes once we try accessing this by means of the web itself?</p>\n\n<p>C# &amp; WCF are both new to me so feel free to explain in a way a 5 year old would understand.  :)  TIA</p>\n"},{"tags":["c#","wcf","windows-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13052305,"title":"Windows Service hosting WCF Library: app.config connectionStrings","body":"<p>I have a WCF Library and I'm trying to host it within a Windows Service.</p>\n\n<p>When testing just the Library with WCF Test Client all is well.  In my Library project I have an app.config with <code>&lt;connectionStrings&gt;</code> in the <code>&lt;configuration&gt;</code> element.  I am specifying the location of a local database like so:</p>\n\n<pre><code>data source=C:\\test\\smMonitorLocalDB.sdf;\n</code></pre>\n\n<p>I have copied everything from the app.config in my Library project to the app.config in my Windows Service project EXCEPT the <code>&lt;connectionStrings&gt;</code> section.  Because, if I add that <code>&lt;connectionStrings&gt;</code> section, my Windows Service won't start.</p>\n\n<p>If I leave out the <code>&lt;connectionStrings&gt;</code> section, my Windows Service starts just fine.  It also works just fine ( except the parts of it that depend on the <code>&lt;connectionStrings&gt;</code> ).</p>\n\n<p>So my question is: where should I be adding my <code>&lt;connectionStrings&gt;</code>?  Or is there a better way for me to be going about this?</p>\n"},{"tags":["wcf","wcf-binding","wshttpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13066024,"title":"System.InsufficientMemoryException: Failed to allocate a managed memory buffer of 536870912 bytes. The amount of available memory may be low","body":"<p>Below mentioned in Web.Config on Server Side.</p>\n\n<pre><code>&lt;bindings&gt;\n          &lt;wsHttpBinding&gt;\n              &lt;binding name=\"NewBinding0\" closeTimeout=\"00:50:00\" openTimeout=\"00:50:00\" sendTimeout=\"00:50:00\" receiveTimeout=\"00:50:00\" maxReceivedMessageSize=\"2147483647\" maxBufferPoolSize=\"2147483647\"&gt;\n                  &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n                  &lt;reliableSession enabled=\"true\" /&gt;\n                  &lt;security mode=\"None\"&gt;\n                      &lt;transport clientCredentialType=\"None\" /&gt;\n                      &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\" establishSecurityContext=\"false\" /&gt;\n                  &lt;/security&gt;\n              &lt;/binding&gt;\n          &lt;/wsHttpBinding&gt;\n      &lt;/bindings&gt;\n</code></pre>\n\n<p>Also at client side I mention below settings.</p>\n\n<pre><code>WSHttpBinding binding = new WSHttpBinding();\n            //binding.ReaderQuotas.MaxArrayLength = 10485760;\n\n            //binding.MaxReceivedMessageSize = 10485760;\n            binding.Security.Mode = SecurityMode.None;\n            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;\n            binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;\n            binding.Security.Message.EstablishSecurityContext = false;\n            //binding.Security.Message.NegotiateServiceCredential = true;\n            binding.ReliableSession.Enabled = true;\n            binding.ReaderQuotas.MaxArrayLength = 2147483647;\n            binding.ReaderQuotas.MaxDepth = 2147483647;\n            binding.ReaderQuotas.MaxNameTableCharCount = 2147483647;\n            binding.ReaderQuotas.MaxBytesPerRead = 2147483647;\n            //binding.MaxReceivedMessageSize = 20000000;2147483647\n            binding.MaxReceivedMessageSize = 2147483647;\n            //binding.MaxReceivedMessageSize = Int32.MaxValue;\n            binding.ReaderQuotas.MaxStringContentLength = 2147483647;\n\n\n\n            //binding.MaxBufferPoolSize = 20000000;\n            binding.MaxBufferPoolSize = 2147483647;\n\n            //binding.MaxBufferPoolSize = Int32.MaxValue;\n            binding.ReaderQuotas.MaxArrayLength = 2147483647;\n            binding.ReaderQuotas.MaxDepth = 2147483647;\n            binding.SendTimeout = TimeSpan.FromMinutes(50);\n            binding.CloseTimeout = TimeSpan.FromMinutes(50);\n            binding.OpenTimeout = TimeSpan.FromMinutes(50);\n            binding.ReceiveTimeout = TimeSpan.FromMinutes(50);\n\n\n\n            //EndpointIdentity.CreateUpnIdentity(\"user@domain\");\n            ChannelFactory&lt;IDBSyncContract&gt; factory = new ChannelFactory&lt;IDBSyncContract&gt;(binding, new EndpointAddress(endPointURL));\n            dbProxy = factory.CreateChannel();\n            this.dbProxy = dbProxy as IDBSyncContract;\n</code></pre>\n\n<p>I am getting above mentioned error.</p>\n\n<p>Is there any concerns regarding wsHttpBindings.</p>\n\n<p>Regards,</p>\n\n<p>Sachin K</p>\n"},{"tags":["c#",".net","wcf","query-string","optional-parameters"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":307,"score":1,"question_id":12246168,"title":"Optional query string parameter passing to WCF service","body":"<p>i want to know how to use:</p>\n\n<pre><code>string limit = WebOperationContext.Current.IncomingRequest.UriTemplateMatch.QueryParameters[\"Limit\"];\n</code></pre>\n\n<p>in my wcf in this method:</p>\n\n<pre><code>CityNewsList GetNewsByCity(string DeviceType,string id,string limit);\n</code></pre>\n\n<p>here 'devicetype' and 'id' are default parameter and what i want is 'limit' as optional parameter means user have a choice to pass this parameter he can pass or can not pass this.</p>\n\n<p>want to use limit as:</p>\n\n<pre><code>if (limit == some value)\n{\n    //do this.\n}\nif (limit == null)\n{\n    // do this.\n}\n</code></pre>\n\n<p>i go through many links but i didn't get that how to use this in my wcf.</p>\n\n<p>or if someone can tell me how to make a parameter optional in the WCF Service.</p>\n"},{"tags":["c#",".net","wcf","web-services","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13046725,"title":"Getting System.Net.WebException: The underlying connection was closed but cannot fix it","body":"<p>I have read many blogs and many questions here among stacks, but could not find my exact scenario (which is very simple one actually).</p>\n\n<h2>Context</h2>\n\n<p>I have a service written inside a library in a Visual Studio 2010 project. The i wrote the interface for the service contract and the service class implementing that contract.</p>\n\n<pre><code>namespace MyNS.WebSrvLibrary {\n[ServiceContract(Namespace = \"http://schemas.dummy.com\")]\npublic interface IEchoService {\n  [OperationContract()]\n  EchoMessageResponse Echo(EchoMessage msg);\n}\n}\n</code></pre>\n\n<p>The service:</p>\n\n<pre><code>namespace MyNS.WebSrvLibrary {\n[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]\npublic class EchoService : IEchoService {\n  public EchoService() {}\n  [OperationBehavior()]\n  public virtual EchoMessageResponse Echo(EchoMessage msg) {\n    return new EchoMessageResponse(\"Ciccio\");\n  }\n  public static IEchoService GetChannel(string addr = \"\") {\n    // Create the service endpoint\n    Binding binding = new BasicHttpBinding();\n    ServiceEndpoint endpoint =\n      new ServiceEndpoint(\n            ContractDescription.GetContract(typeof(IEchoService)),\n            binding,\n            new EndpointAddress(addr));\n    // Create channel factory and get proper channel for service.\n    ChannelFactory&lt;IEchoService&gt; channelFactory = new ChannelFactory&lt;IEchoService&gt;(endpoint);\n    IEchoService svc = channelFactory.CreateChannel();\n    return svc;\n  }\n}\n}\n</code></pre>\n\n<p>Classes like <code>EchoMessageResponse</code> and <code>EchoMessage</code> have <code>DataContract</code>s applied and they are ok.</p>\n\n<p>The service as I said before is compiled into a dll (assembly) that i import into a web application in the bin folder just by adding a reference. In this web application I have the <code>svc</code> file for the web service:</p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"MyNS.WebSrvLibrary.EchoService\" %&gt;\n</code></pre>\n\n<p>And this is the <code>Web.config</code> file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"MyNS.WebSrvLibrary.EchoService\"&gt;\n        &lt;endpoint name=\"basicHttpBinding\" address=\"\" \n                                     binding=\"basicHttpBinding\" \n                                     bindingConfiguration=\"basicHttpBinding_Svc\"\n                                     contract=\"MyNS.WebSrvLibrary.IEchoService\"/&gt;\n        &lt;endpoint name=\"mexHttpBinding\" address=\"/Mex\"\n                                     binding=\"mexHttpBinding\"\n                                     contract=\"IMetadataExchange\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding maxReceivedMessageSize=\"2147483647\" openTimeout=\"12:00:00\" receiveTimeout=\"12:00:00\" closeTimeout=\"12:00:00\" sendTimeout=\"12:00:00\"&gt;\n          &lt;readerQuotas maxStringContentLength=\"1310720\"\n                        maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"24096\"\n                        maxDepth=\"10000\"\n                        maxNameTableCharCount=\"16384\"/&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"basicHttpBinding_Svc\" maxReceivedMessageSize=\"2147483647\" openTimeout=\"12:00:00\" receiveTimeout=\"12:00:00\" closeTimeout=\"12:00:00\" sendTimeout=\"12:00:00\"&gt;\n          &lt;readerQuotas maxStringContentLength=\"1310720\"\n                        maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"24096\"\n                        maxDepth=\"10000\"\n                        maxNameTableCharCount=\"16384\"/&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>So, finally, I have a client application compiling to an executable <code>.exe</code> file which is the following:</p>\n\n<pre><code>class Program {\n  static void Main(string[] args) {\n    IEchoService svc = EchoService.GetChannel(\"http://localhost:80/T/Service.svc\");\n    EchoMessageResponse rmsp = svc.Echo(new EchoMessage(\"Hello\"));\n    System.Threading.Thread.Sleep(10000);\n  } /* Main */\n} /* Program */\n</code></pre>\n\n<h3>Information on server-side matters</h3>\n\n<p>The web application is hosted in IIS in the <em>Default Web Site</em> listening to port 80 of course. </p>\n\n<h2>The problem</h2>\n\n<p>When I run my executable application, I get this <code>System.ServiceModel.CommunicationException</code> exception:</p>\n\n<blockquote>\n  <p>An error occurred while receiving the HTTP response to\n  <code>http://localhost/T/Service.svc</code>. This could be due to the service\n  endpoint binding not using the HTTP protocol. This could also be due\n  to an HTTP request context being aborted by the server (possibly due\n  to the service shutting down). See server logs for more details.</p>\n</blockquote>\n\n<p>Whose <code>innerException</code> is of type: <code>System.Net.WebException</code>:</p>\n\n<blockquote>\n  <p>The underlying connection was closed: An unexpected error occurred on\n  a receive.</p>\n</blockquote>\n\n<p>Whose <code>innerException</code> (the last in the exception tree) is of type <code>System.Net.Sockets.SocketException</code>:</p>\n\n<blockquote>\n  <p>An existing connection was forcibly closed by the remote host.</p>\n</blockquote>\n\n<p>The complete stack is the following:</p>\n\n<blockquote>\n  <p>Server stack trace:     at\n  System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException\n  webException, HttpWebRequest request, HttpAbortReason abortReason)<br>\n  at\n  System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.RequestChannel.Request(Message message,\n  TimeSpan timeout)    at\n  System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message\n  message, TimeSpan timeout)    at\n  System.ServiceModel.Channels.ServiceChannel.Call(String action,\n  Boolean oneway, ProxyOperationRuntime operation, Object[] ins,\n  Object[] outs, TimeSpan timeout)    at\n  System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage\n  methodCall, ProxyOperationRuntime operation)    at\n  System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage\n  message)</p>\n  \n  <p>Exception rethrown at [0]:     at\n  System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage\n  reqMsg, IMessage retMsg)    at\n  System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;\n  msgData, Int32 type)    at\n  DDBR.DiscoveryServiceLibrary.IEchoService.Echo(EchoMessage msg)    at\n  DDBR.TestClient.Program.Main(String[] args) in\n  C:\\Data\\ROOT_APPS\\DistributedDataBackupAndRecovery\\TestClient\\Program.cs:line\n  20    at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly,\n  String[] args)    at System.AppDomain.ExecuteAssembly(String\n  assemblyFile, Evidence assemblySecurity, String[] args)    at\n  Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()<br>\n  at System.Threading.ThreadHelper.ThreadStart_Context(Object state)<br>\n  at System.Threading.ExecutionContext.Run(ExecutionContext\n  executionContext, ContextCallback callback, Object state, Boolean\n  ignoreSyncCtx)    at\n  System.Threading.ExecutionContext.Run(ExecutionContext\n  executionContext, ContextCallback callback, Object state)    at\n  System.Threading.ThreadHelper.ThreadStart()</p>\n</blockquote>\n\n<p>Which can be found in the <code>StackTrace</code> property of the first exception (the initial one, not the inner ones).</p>\n\n<h3>Something very strange...</h3>\n\n<p>The very strange thing is that if I open my browser and type:</p>\n\n<pre><code>http://localhost/T/Service.svc\n</code></pre>\n\n<p>I get the famous screen my Microsoft IIS that exposes some basic info about the service. This means that the web service is alive and running at the specified address (endpoint).</p>\n\n<p>I looked for this exception but no one has these peculiarities... generally a more detailed and complex context is involved.</p>\n\n<p>What to do?</p>\n\n<h2>One thing more...</h2>\n\n<p>You are probably wondering why I do not use service references... Because I do not want to. There are reasons for this. The point here is that the <code>GetChannel</code> approach has always worked with me so far... do not understand why I have problems now...</p>\n\n<p>Actually what kind of problem is it supposed to be? It cannot be timeout really do not believe this, it is a simple method acting in the fastest of the many possible ways. It is strange... really.</p>\n"},{"tags":["c#","visual-studio-2010","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13064946,"title":"Load Testing with async calls to WCF","body":"<p>I'm new when it comes to using VS2010's unit tests. I tried making a unit test that makes a  call to the WCF hosted. The code looks like this:</p>\n\n<pre><code>...\n[TestMethod]\npublic void TestMethod1()\n{\n   WcfClient client = new WcfClient(\"BasicHttpBinding_IWcf\");\n   client.GetDataCompleted += new EventHandler&lt;GetDataCompletedEventArgs&gt;(OnGetDataCompleted);\n   client.GetDataAsync(arg1, arg2);\n}\n\nvoid OnGetDataCompleted(object sender, GetDataCompletedEventArgs e)\n{\n   Assert.IfNull(e.Error);\n}\n\n...\n</code></pre>\n\n<p>It seems like it's never started or completed when I run it. I was thinking of adding this to a load test. Am I missing anything to test async calls to the WCF? I've heard of WCF Load Test in codeplex but I'll leave that for another time.</p>\n\n<p>a variation to peer's answer: <a href=\"http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html\" rel=\"nofollow\">http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html</a></p>\n"},{"tags":["wcf","wshttpbinding"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":24,"score":4,"question_id":13068687,"title":"how can i use wsHttpBinding in wcf without using any certificate","body":"<p>I want to use wsHttpBinding in a wcf service, the wsHttpBinding is required to a certificate for security issues, but i want using wsHttpBinding without security, is this applicable?</p>\n"},{"tags":["c#","wcf","foreach","unreachable-code"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":13067886,"title":"Why is the code in my foreach unreachable? (Exact copy of working code thats been Unit tested)","body":"<p>The code below is an exact copy of code that's working perfectly. The difference is that this code is being placed in a WCF Service Application Project whereas the working code is from a Windows Forms Application Project. The code in the foreach is unreachable which is strange because I've tested the code before and it works, returning the correct values</p>\n\n<pre><code>public IEnumerable&lt;Employee&gt; GetStudentDetails(string username,string password)\n    {\n        var emp = agrDb.LoginAuthentication(username, password);//procedure in the database thats returning two values\n                                                                //Namely: EmployeeFirstName and EmployeeLastName\n        List&lt;Employee&gt; trainerList = new List&lt;Employee&gt;();\n\n        foreach (var item in emp)\n        {\n            //unreachable code here\n            Employee employ = new Employee();\n            employ.EmployeeFirstName = item.EmployeeFirstName;\n            employ.EmployeeLastName = item.EmployeeLastName;\n            trainerList.Add(employ);\n            //trainerList.Add(item.EmployeeLastName);\n        }\n        return trainerList;\n    }\n</code></pre>\n"},{"tags":["c#","asp.net","c#-4.0","wcf"],"answer_count":3,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":6294,"score":5,"question_id":4346554,"title":"WCF Service Proxy throws exception when more than one parameter is used in [OperationContract] method","body":"<p>I have a WebServiceHost that is being used to host some web services in a console app. I added a service reference to it in my client app and create the proxy like so:</p>\n\n<pre><code>var binding = new WebHttpBinding();\nvar endPoint = new EndpointAddress(string.Format(Settings.serviceBase, Settings.wcfPort));\n\nChannelFactory&lt;IzWaveSVC&gt; factory = new ChannelFactory&lt;IzWaveSVC&gt;(new WebHttpBinding(), endPoint);\n\nfactory.Endpoint.Behaviors.Add(new WebHttpBehavior());\n// **Exception occurs here**\nvar proxy = (IzWaveSVC)factory.CreateChannel();\n</code></pre>\n\n<p>It works, but once I added a new method that requires more than one parameter, I started getting this exception when the proxy was created (this was before any communication even took place):</p>\n\n<pre><code>Operation 'setDeviceState' of contract 'IzWaveSVC' specifies multiple request \nbody parameters to be serialized without any wrapper elements. At most one \nbody parameter can be serialized without wrapper elements. Either remove the \nextra body parameters or set the BodyStyle property on the WebGetAttribute / \nWebInvokeAttribute to Wrapped.\n</code></pre>\n\n<p>Adding a WebInvokeAttribute and setting the BodyStyle to wrapped has no effect: </p>\n\n<pre><code>[OperationContract]\n[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]        \nbool setDeviceState(byte nodeId, bool powered, byte level);\n</code></pre>\n\n<p>It should be noted that I have other methods that work, but they only have a single parameter so they don't have the above problem.</p>\n\n<p>Just FYI, here's how I setup the host:</p>\n\n<pre><code>endPoint = new EndpointAddress(string.Format(Settings.serviceBase, port));\nbinding = new WebHttpBinding();\n\nhost = new WebServiceHost(singletonObject, new Uri(string.Format(Settings.serviceBase, port)));\n\nhost.AddServiceEndpoint(typeof(IzWaveSVC), binding, \"\"); \nServiceMetadataBehavior mexBehavior = new ServiceMetadataBehavior();                \nmexBehavior.HttpGetEnabled = true;\nhost.Description.Behaviors.Add(mexBehavior);                \nhost.AddServiceEndpoint(typeof(IMetadataExchange), MetadataExchangeBindings.CreateMexHttpBinding(), endPoint.Uri.AbsoluteUri + \"mex\");    \nhost.Open();            \n</code></pre>\n\n<p>Any help is appreciated. </p>\n\n<p>Thanks!</p>\n"},{"tags":["wcf","wcf-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12970746,"title":"Config file being overwritten in WCF service","body":"<p>All right. Normally i'de hate to ask questions but this problem im having has been clawing my brains out. </p>\n\n<p>The company is developing a wcf service that communicates with sharepoint. we managed to get it to work and it receives calls and files from sharepoint however it only works for small files. the settings in sharepoint are set to accept files up to 250 MB. in our web.config file every setting relating to message size was set to the maximum (<code>int32</code>). when we run the service it won't accept files bigger than 22 KB. </p>\n\n<p>We did some tracing and we get 1 warning and 1 error. first off we get a warning stating:</p>\n\n<blockquote>\n  <p>Description   The configuration system has detected a duplicate key in a\n  different configuration scope and is overriding with the more recent\n  value.</p>\n</blockquote>\n\n<p>And an error stating that the maximum message size was exceded [64 KB]. </p>\n\n<p>Problem is we get this error on files from 23 KB and up despite the fact that we did put the absolute maximum size in the web.config. the warning says the config file is being overwritten but by what? ive looked everywhere for the past 3 days for a solution and nothing i have found works.</p>\n\n<p>Anyone have any idea what might be wrong? what could possibly be overwriting the <code>web.config</code> file? and if for whatever reason it is overwritten by default values why wont it even accept messages bigger than 22 KB.</p>\n\n<p>Any help would be greatly appreciated. </p>\n\n<p><strong>EDIT: FOUND THE PROBLEM</strong></p>\n\n<p>Ok for those still having similar problems i'm going to put here what i found solved them for us.</p>\n\n<p>The usual message size configurations ofcourse</p>\n\n<pre><code>&lt;binding maxReceivedMessageSize=\"2147483647\"&gt;            \n        &lt;readerQuotas maxDepth=\"32\"\n         maxStringContentLength=\"2147483647\"\n          maxArrayLength=\"2147483647\"\n          maxBytesPerRead=\"2147483647\"\n          maxNameTableCharCount=\"2147483647\" /&gt;\n        &lt;/binding&gt;\n</code></pre>\n\n<p>and another setting which i found by accident in a sample code which fixed the problem (ran tests on files up to 64MB in size without any further problems) </p>\n\n<pre><code>&lt;system.webServer&gt;\n&lt;serverRuntime uploadReadAheadSize=\"2147483647\"  /&gt;\n&lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n&lt;security&gt;\n  &lt;requestFiltering&gt;\n    &lt;requestLimits maxAllowedContentLength=\"2147483647\" /&gt;\n  &lt;/requestFiltering&gt;\n&lt;/security&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p>Apparently the <code>requestLimits maxAllowedContentLength</code> was set very low by default and it was overriding all the other settings presumably because it's a security setting.</p>\n\n<p>The <code>serverRuntime uploadReadAheadSize</code> can affect the maximum size but not in the direct sense. I am not very good at explaining so you would probably be better off reading the official documentation on it.   </p>\n"},{"tags":[".net","wcf","x.509"],"answer_count":6,"favorite_count":8,"up_vote_count":20,"down_vote_count":0,"view_count":23874,"score":20,"question_id":602345,"title":"CryptographicException 'Keyset does not exist', but only through WCF","body":"<p>I have some code that makes a call to a third party web service that is secured using X.509 certification.</p>\n\n<p>If I call the code directly (using a unit test) it works without any problems.</p>\n\n<p>When deployed, this code will be called via a WCF Service. I have added a second unit test that calls the WCF Service, however this fails with a <code>CryptographicException</code>, message <code>\"Keyset does not exist\"</code> when I call a method on the third party web service.</p>\n\n<p>I presume that this is because my WCF Service will be attempting to call the third party web service using a different user to myself.</p>\n\n<p>Can anyone shed any additional light on this issue?</p>\n"},{"tags":["wcf","rest","web-config"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":209,"score":2,"question_id":12216791,"title":"WCF ASP.NET routing integration feature requires ASP.NET compatibility","body":"<p>I am getting this issue when trying to access my web service from my server.</p>\n\n<blockquote>\n  <p>ASP.NET routing integration feature requires ASP.NET compatibility.\n  Please see 'http://msdn.microsoft.com/en-us/library/ms731336.aspx' on\n  how to do this.</p>\n</blockquote>\n\n<p>I have added this line to my web.config just like many articles have suggested, yet I still get the same error.</p>\n\n<pre><code>&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n</code></pre>\n\n<p>What could be the issue?</p>\n"},{"tags":["c#",".net","wcf","wcf-client","wcf-configuration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":69,"score":-1,"question_id":13062891,"title":"Client cannot connect to server","body":"<p>I'm newbie in WCF, so I really need your help.</p>\n\n<p>I have two programs which uses WCF.\nIf they are running on one computer and client uses adress <em>net.tcp:\\Localhost:8001\\MyService</em> to connect to server(which has adress 192.168.1.1 for example) everything is OK.\nBut when I'm changing adress for client to <em>net.tcp:\\192.168.1.1:8001\\MyService</em> I'm getting system.timeoutexception because client cannot connect server.</p>\n\n<p>Thanks for help.</p>\n"},{"tags":["wcf","rest","asp.net-web-api","soa","odata"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":13062362,"title":"Does OData violate separation of concern?","body":"<p>I am looking at OData and it is very powerful, at the same time it's very disconcerting. It is the equivalent of exposing your datasource to a remote user. There is no service nothing nada and very little injection points, resulting in an almost comical 2-tier architecture.</p>\n\n<p>My concerns are:</p>\n\n<ol>\n<li><p>It's hard to enforce pattern such as DDD while using OData. </p></li>\n<li><p>It is also hard to use OData against a set of soa Data Transfer Objects, because these are not usually queryable. ie.by the time you get the DTOs, the DB query is done, but OData is just starting up. There is not a lot of value in querying against it, because the DTOs are already in memory.</p></li>\n<li><p>I can create a view on the DB itself that's a representation of the OData entity, but this is putting UI concern in persistence. Big no-no.</p></li>\n<li><p>At best combining the result set from various DDD services now happens at the UI layer using kludgy javascipt - a maintainance nightmare with poor reuseability record.</p></li>\n<li><p>Another possibility is to write a translator for the OData entity which is likely a ViewModel level class, that then translates to the DTOs, that then translates to Domains, that then translates to the ConceptualModels, the rest the ORM can handle. But this will require an inordinate amount of resources.</p></li>\n</ol>\n\n<p>In short, how do you make OData play nice with SOA, OO encapsulation principles, DDD and just good old SOC?</p>\n"},{"tags":["wcf","basic-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13064961,"title":"WCF Rest Service Custom authentication not works in IIS 7","body":"<p>This is first time i am developing a WCF service with custom authentication and host it on ISS 7.\ni read many articles and follow the exact steps but the problem is when i hit the URL it shows me the Username/password dialog box and when i enter login information and it popups again and again. Following are my Webcofig settings.</p>\n\n<pre><code>     &lt;system.serviceModel&gt;\n&lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;services&gt;\n  &lt;service name=\"CustomAuthApp.CustAuthSampleService\" behaviorConfiguration=\"SecureBehavior\"&gt;\n    &lt;endpoint address=\"rh\" \n              bindingConfiguration=\"SecureBinding\" \n              binding=\"basicHttpBinding\" \n              contract=\"CustomAuthApp.ICustAuthSampleService\"&gt;\n    &lt;/endpoint&gt;\n\n    &lt;endpoint address=\"mex\" binding=\"mexHttpsBinding\" contract=\"IMetadataExchange\" /&gt;\n\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"SecureBehavior\"&gt;\n      &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n      &lt;serviceCredentials&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"MyWork.Security.CustomUserNameValidator, MyWork.Security\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"SecureBinding\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Basic\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n  &lt;!--&lt;wsHttpBinding&gt;\n    &lt;binding name=\"UsernameWithTransport\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"Basic\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;--&gt;\n\n&lt;/bindings&gt;\n</code></pre>\n\n<p></p>\n\n<p>Below are the IIS setting for Authentication. \n<img src=\"http://i-splendid.host-ed.me/AuthenticationSettings.png\" alt=\"IIS Settings\"></p>\n\n<p>Please help me to fix this issue. I tried many things and different security options but nothing works for me. </p>\n"},{"tags":["string","wcf","maximum"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":41,"score":0,"question_id":13064032,"title":"The maximum string content length quota (8192) has been exceeded while reading XML data.","body":"<p>I am getting the error below </p>\n\n<blockquote>\n  <p>The server encountered an error processing the request. The exception\n  message is 'The formatter threw an exception while trying to\n  deserialize the message: There was an error while trying to\n  deserialize parameter <a href=\"http://tempuri.org/:commentText\" rel=\"nofollow\">http://tempuri.org/:commentText</a>. The\n  InnerException message was 'There was an error deserializing the\n  object of type System.String. The maximum string content length quota\n  (8192) has been exceeded while reading XML data. This quota may be\n  increased by changing the MaxStringContentLength property on the\n  XmlDictionaryReaderQuotas object used when creating the XML reader.'.\n  Please see InnerException for more details.'. See server logs for more\n  details. The exception stack trace is:</p>\n\n<pre><code>at System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader\n</code></pre>\n  \n  <p>reader, PartInfo part) at\n  System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameter(XmlDictionaryReader\n  reader, PartInfo part) at\n  System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameters(XmlDictionaryReader\n  reader, PartInfo[] parts, Object[] parameters, PartInfo returnInfo,\n  Object&amp; returnValue) at\n  System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBodyCore(XmlDictionaryReader\n  reader, Object[] parameters, Boolean isRequest) at\n  System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader\n  reader, MessageVersion version, String action, MessageDescription\n  messageDescription, Object[] parameters, Boolean isRequest) at\n  System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message\n  message, Object[] parameters, Boolean isRequest) at\n  System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest(Message\n  message, Object[] parameters) at\n  System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest(Message\n  message, Object[] parameters) at\n  System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest(Message\n  message, Object[] parameters) at\n  System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest(Message\n  message, Object[] parameters) at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp;\n  rpc) at\n  System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp;\n  rpc) at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean\n  isOperationContextSet)</p>\n</blockquote>\n\n<p>And thease are my web.config</p>\n\n<pre><code>&lt;services&gt;\n      &lt;service behaviorConfiguration=\"Frontiers.WCF.Services.MyHomeServiceBehavior\" name=\"Frontiers.WCF.Services.MyHomeService\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"EndpBehavior\" binding=\"webHttpBinding\" contract=\"Frontiers.WCF.Services.IMyHomeService\" /&gt;\n      &lt;/service&gt;\n      &lt;service behaviorConfiguration=\"Frontiers.WCF.Services.NetworkServiceBehavior\" name=\"Frontiers.WCF.Services.NetworkService\"&gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" behaviorConfiguration=\"EndpBehavior\" contract=\"Frontiers.WCF.Services.INetworkService\" &gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n      &lt;service behaviorConfiguration=\"Frontiers.WCF.Services.WidgetServiceBehaviour\" name=\"Frontiers.WCF.Services.WidgetService\"&gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" behaviorConfiguration=\"EndpBehavior\" contract=\"Frontiers.WCF.Services.IWidgetService\"&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n      &lt;service behaviorConfiguration=\"Frontiers.SharePoint.Site.Navigation.NavigationServiceBehaviour\" name=\"Frontiers.SharePoint.Site.Navigation.NavigationService\"&gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" behaviorConfiguration=\"EndpBehavior\" contract=\"Frontiers.SharePoint.Site.Navigation.INavigationService\"&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n      &lt;service behaviorConfiguration=\"Frontiers.WCF.Services.UserProfileServiceBehavior\" name=\"Frontiers.WCF.Services.UserProfileService\"&gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" behaviorConfiguration=\"EndpBehavior\" contract=\"Frontiers.WCF.Services.IUserProfileService\"&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"ContactsImporterSoap\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\" useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"819200\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"JournalActivityReportSoap\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\" useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"eUtilsServiceSoap\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n                    receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n                    bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                    messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                    useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"eUtilsServiceSoap1\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n            receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n            bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n            useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"eUtilsServiceSoap2\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n            receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n            bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n            useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"eUtilsServiceSoap3\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n            receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n            bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n            useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n</code></pre>\n\n<p>Can anybody please help me out?</p>\n"},{"tags":["wcf","active-directory","basic-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13064802,"title":"Pass username/password using HttpWebRquest to WCF to authenticate users using Basic authentication","body":"<p>I have spent three days on trying to pass username and password to a WCF service. I am still not able to do that because i simpley dont know how to do it.\nI have a WCF service application project that has only on operation contract which is decorated with:\n        [WebGet (UriTemplate= \"/*\", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]   </p>\n\n<p>and i have added Factory=\"System.ServiceModel.Activation.WebServiceHostFactory\" to the markup of the service:</p>\n\n<pre><code>    &lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"Hdir.Hp.Data.ListData\"      CodeBehind=\"ListData.svc.cs\" Factory=\"System.ServiceModel.Activation.WebServiceHostFactory\" %&gt;\n</code></pre>\n\n<p>After making these additions this service can be called  using <strong>webclient</strong> or <strong>HttpWebRequest</strong>. This service just returns a string. I have managed to call the service and get that string using httpWebRequest, every thing is nice so far.</p>\n\n<p>Now i want to pass username and password to the service and i want to be able to get the username and password that are passed and authenticate it (i want to use basic authentication). I have tried alot of code but still not able to do it.</p>\n\n<p>I use this in my ConsoleClient to pass username and password to the service call:</p>\n\n<pre><code>   public static void SetBasicAuthHeader(WebRequest req, String userName, String userPassword)\n    {\n        string authInfo = userName + \":\" + userPassword;\n        authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));\n        req.Headers[\"Authorization\"] = \"Basic \" + authInfo;\n    }\n</code></pre>\n\n<p>I set a breakpoint in my wcf service application project and view the Headers (after i call the service) but cant find any headers for Athorization:</p>\n\n<pre><code>        var header = OperationContext.Current.RequestContext.RequestMessage.Headers;\n\n\n        foreach (var h in header)\n        {\n            //no header for Authorization.\n        }\n</code></pre>\n\n<p>I need help to complete this task which i have spent long time on. i dont know what to change in web.config of my wcf service to make this work?</p>\n\n<p>Is it possible to authenticate the username and password against active directory, if i manage to get the authorization header (if someone can help me with my initial question first)?</p>\n\n<p>which changes i have to do to IIS if i finally want to host my WCF in IIS?</p>\n\n<p>I have no prevous experince wokring with IIS or AD. I need help please\nPlaese Plaese i hope someone can help me.\nThanks</p>\n"},{"tags":["wcf","entity-framework-4","sharepoint2010"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13063335,"title":"Sharepoint and thousands of records over WCF","body":"<p>I have a Sharepoint 2010 site and I want to use Entity Framework 4.0 from this site. The issue is that SharePoint 2010 supports .Net 3.5 Framework only.</p>\n\n<p>The only way to make use of EF 4.0 is to add a service layer. However, I am experiencing some performance issues caused by the service. Basically I did a test with 2000 items. EF takes less than one second to retrieve these items, but then I have the following timings with the Webservice:</p>\n\n<ul>\n<li>HTTTP - 7  to 8 seconds </li>\n<li>TCP - 5 to 6 seconds </li>\n<li>IPC - 4 to 5 seconds</li>\n<li>REST (no deserialzation back i.e. data is returned in .XML format) - 2 to 3 seconds</li>\n</ul>\n\n<p>I think that the problem is with the serialization/deserialzation approach.</p>\n\n<p>My next test is to simplify the DTO but I am not sure I am in the right direction.</p>\n\n<p>What is the best practice in such a scenario? I do not Need interoperability. WCF - to - WCF is good for me.</p>\n\n<p>Many thanks.</p>\n\n<p>Any assistance would be greatly appreciated.</p>\n"},{"tags":["c#","wcf","design","interface","remoting"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13061811,"title":"Interface Design(WCF/Remoting)","body":"<p>I have two interfaces</p>\n\n<pre><code>public interface IServer1\n{\n[OperationContract(IsOneWay = false)]\nvoid Subscribe();\n\n[OperationContract(IsOneWay = false)]\n[ServiceKnownType(typeof(ABC))]       \nList&lt;ABC&gt; GetActiveData();\n}\n</code></pre>\n\n<p>and another interface</p>\n\n<pre><code>public interface IServer2\n{\nvoid Subscribe(IClient client);\n\nList&lt;ABC&gt; GetActiveData(IClient client);\n}\n</code></pre>\n\n<p>One interface caters to WCF communication and the other to remoting.\nIt is irking me to create two interfaces for this. There will be two different proxies to implement these interfaces.</p>\n\n<p>Can this be done with only one interface? or maybe it is best to have the two interfaces for this.\nAlso in the future there might be some other mode of inter process communcation that can come up apart from WCF and remoting, so would not like to create another interface for that as well.</p>\n\n<p>As for removing remoting and using WCF only cant do that as its a huge code base. Would not want to have additional effort of testing etc. </p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","configuration","impersonation","capture","endpoint"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":13047989,"title":"How can I capture WCF Service endpoint","body":"<p>I'm implementing a WCF service hosted by IIS, that impersonates the caller. When I have the service endpoint configuration in the Web.config-file everything works as intended.</p>\n\n<p>I want to set the service endpoint programmatically but I'm missing something because the caller is not impersonated (the endpoint works fine except for that little detail). Is there any way I can capture the service endpoint created from web.config in code so that when debugging I can find what the difference is between this one and the one I create programmatically?</p>\n\n<p>Thanks,</p>\n\n<p>Christian</p>\n"},{"tags":["wcf","windows-services","config","projectinstaller"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13062175,"title":"Extracting URL port in ProjectInstaller","body":"<p>Now that my Windows Service works nicely I would like to make my ProjectInstaller automatically reserve the URL for its WCF basicHttpBinding. I know how to do this from the command line, which leads me to the following code. It needs elevation, but so does installutil so adequate permission is a reasonable assumption.</p>\n\n<pre><code>Process myProcess = new Process();\nmyProcess.StartInfo.FileName = Path.Combine(\n  Environment.GetFolderPath(Environment.SpecialFolder.System), \n  \"netsh.exe\");\nint port = 8733;\nmyProcess.StartInfo.Arguments = string.Format(\n  \"http add urlacl url=http://+:{0}/ user=NETWORK\", \n  port);\nmyProcess.StartInfo.CreateNoWindow = true;\nmyProcess.Start();\n</code></pre>\n\n<p>Parsing the port out of the URL is no problem, but I can't think of an elegant way to get the URL out of the config file. So far all I've come up with is loading the config as an XmlDocument and using XPath on it.</p>\n\n<p>Can anyone offer a suggestion? </p>\n"},{"tags":["wcf","entity-framework","subsonic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":160,"score":0,"question_id":9362423,"title":"difference between Entity Framework and SubSonic , wcf data service","body":"<p>I am very confused with the use <strong>subsonic</strong> or <strong>ado.net entity framework</strong> or <strong>WCF Data Services</strong> Which one I should choose? \nI creating a middleware (web site) using asp.net mvc.\nI seek a compromise between power, speed of implementation, heavy at runtime, abstraction ...\nSo Which orm i should use?</p>\n"},{"tags":["wcf","c#-4.0","dto"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13061547,"title":"How many DTOs should I create?","body":"<p>I got some services where I return DTOs,\nnow I can reuse the same DTO for different methods.</p>\n\n<p>let's say I have the following interface: </p>\n\n<pre><code>List&lt;ProductDTO&gt; GetProductsByReseller(int reseller)\nList&lt;ProductDTO&gt; GetProductsByManufacturer(int Manufacturer)\nList&lt;ProductDTO&gt; GetProductsByCategory(int Category)\n</code></pre>\n\n<p>using the same DTO for them is absolutely valid I think, as they all have really the same fields.</p>\n\n<pre><code>public class ProductDTO\n{\n    public int Id { get; set; }\n    public string ProductName { get; set; }\n    public int Reseller { get; set; }\n    public int Manufacturer { get; set; }\n    public int Category { get; set; }\n}\n</code></pre>\n\n<p>Now I have some other methods, for example:</p>\n\n<pre><code>List&lt;ProductDTO&gt; GetProductsWithAdminInfoByCategory(int Category)\n</code></pre>\n\n<p>For this method I have to extend the DTO with some additional fields.</p>\n\n<pre><code>     #region only for admin\n     public int KnownDefects { get; set; }\n     public DateTime InStockSince { get; set; }   \n     #endregion //only for admin\n</code></pre>\n\n<p>Is it ok to reuse the existing DTO and simply extend it?\nOr should I create a new DTO because some fields would never be used from that Method?</p>\n\n<p>What I think: If only 1 or 2 fields are new (never used in the other cases), maybe it's ok, as I not have to create a duplicate DTO and the tradeof for maintaining 2 DTOs instead of 1 is ok. Probably it would be good if I derive a AdminProductDTO from ProductDTO, but I don't know if inheritation is valid for DTOs.</p>\n\n<p>Well am I wrong?\nWhat would be a good treshold value (nbr of changes), from when on to create a new DTO?</p>\n\n<p><strong>Update:</strong>\nIf I expose a service in WCF that would expose the ProductDTO, will it have to transmit the <em>KnownDefects</em> and <em>InStockSince</em> properties if they are not set or null?\nOr is WCF clever enough and not need to transmit undefined/null properties at all? (In that case I wouldn't mind to have only one DTO with 2 properties that are not always used.)</p>\n\n<p><strong>Another Update:</strong>\nWell if I inherit ProductAdminDTO from ProductDTO, can I still call the following service with it(that would only accept a ProductDTO)?</p>\n\n<pre><code>bool SaveProduct(ProductDTO)\n</code></pre>\n\n<p>Well I guess I could simply try that out myself, will update later :)</p>\n"},{"tags":["asp.net",".net","wcf","rest","asp.net-web-api"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":160,"score":3,"question_id":12069653,"title":"WCF and ASP.NET Web API: Benefits of both?","body":"<p>I'm about to start a project where we have a back-end service to do long-winded processing so that our ASP.NET website is free to do quicker requests. As a result I have been reading up on  services such as WCF and Web API to get a feel for what they do. Since this back-end service will actually be made up of several services communicating to each other and will not be publicly available to our customers, it seems that WCF is the ideal technology for this kind of scenario.</p>\n\n<p>But after doing a lot of research I am still confused as to the benefits and differences between WCF and Web API. In general it seems that:</p>\n\n<ul>\n<li>If you want a public and/or a RESTful API then Web API is best</li>\n<li>WCF can support far more transports than just HTTP so you can have far more control over them</li>\n<li>Web API development seems easier than WCF due to the additional features/complexity of WCF</li>\n</ul>\n\n<p>But perhaps my question boils down to the following:</p>\n\n<ol>\n<li>Why would a REST service be more beneficial anyway? Would a full blown WCF service ever be a good idea for a public API? Or is there anything that a WCF service could provide that Web API cannot?</li>\n<li>Conversely, if I have a number of internal services that need to communicate with each other and would be happy to just use HTTP as the transport, does Web API suddenly become a viable option?</li>\n</ol>\n"},{"tags":["wcf","wcf-data-services","odata"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":148,"score":3,"question_id":9379184,"title":"How to return complete object graph using WCF Data Services?","body":"<p>I have a class model that is recursive in nature. For brevity, I'll describe it as:</p>\n\n<ul>\n<li>A <strong>Template</strong> contains many <strong>Socket</strong> objects</li>\n<li>A <strong>Socket</strong> accepts many <strong>Template</strong> objects</li>\n</ul>\n\n<p>I typically end up with object graphs that look like this:</p>\n\n<pre><code>  Root Template\n     |--&gt; Sockets\n             |--&gt; Socket S1\n             |       |--&gt; Templates\n             |               |--&gt; Template T1\n             |               |--&gt; Template T2\n             |                       |--&gt; Sockets\n             |                               |--&gt; Socket S1.1\n             |--&gt; Socket S2\n                     |--&gt; Templates\n                             |--&gt; Template T2  &lt;-- it's valid to reuse templates\n                             |--&gt; Template T3\n                             etc\n</code></pre>\n\n<p><strong>I want to return the entire object graph via WCF Data Services in one shot.</strong></p>\n\n<p>I've added a custom method to my DataService that builds the full graph:</p>\n\n<pre><code>    [WebGet]\n    public IEnumerable&lt;Template&gt; GetFullyExpandedTemplate(Guid templateId)\n    {\n        var result = _templateRepo.GetFullyExpandedTemplate(a =&gt; a.Id == templateId);\n        return new List&lt;Template&gt;() { result };\n    }\n</code></pre>\n\n<p>The result is definitely fully populated (verified . But if I browse to the following:</p>\n\n<pre><code>http://localhost/MySite/MyDataService.svc/GetFullyExpandedAggregate?id=guid'353934DD-916E-43EC-9CAE-EAB8FA894EBA'\n</code></pre>\n\n<p>I only see the <em>Root Template</em> object - it doesn't bring back the <em>entire graph</em>.</p>\n\n<p>Any ideas on the <em>cleanest</em> way to make this happen?</p>\n"},{"tags":["wcf","ninject","ierrorhandler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13061133,"title":"Ninject WCF extension adding an error handler","body":"<p>I am trying to use Ninject.Extensions.Wcf for DI on my web service but want to also inject a custom IErrorHandler.</p>\n\n<p>As far as I know this should be done in the ApplyDispatchBehavior method of the custom IServiceBehavior, but I don't see any way to override Ninject's service behavior.</p>\n"},{"tags":["c#","wcf","entity-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":13036009,"title":"Update many entities in one WCF call versus hitting the WCF service for each entity to update","body":"<p>I work on a multi-tier application and I need to optimize a long-running process in three ways :</p>\n\n<ol>\n<li>Avoiding EF update concurrency problems.</li>\n<li>Improving speed.</li>\n<li>Informing the user of the progress.</li>\n</ol>\n\n<p>Actually, the client code calls a WCF service using a method <strong>that does all the work</strong> (<em>evaluating the number of entities to update</em>, <em>querying the entities to update</em>, <em>updating them</em> and finally, <em>saving them back to the database</em>).</p>\n\n<p>The process is very long and <strong>nothing is sent back to the user except the final result</strong> once the process is done. The user can stay in front of the wait form for up to 10 minutes, not knowing what is happening.</p>\n\n<p>The number, and depth of the queried entities can become really big and I sometimes hit OutOfMemoryExceptions. I had to change the service method to process entity updates 100 entities at a time, so my DbContext will be refreshed often and won't become too big.</p>\n\n<p>My actual problem is that I cannot inform the user each time an entity is updated because <strong>my service method does the whole process before returning it's result to the user.</strong></p>\n\n<p>I read about implementing a duplex service but since I have to return <strong>two different callbacks</strong> to the user (one callback to <em>return the number of entities to update</em> and another callback <em>for the result of each entity update</em>) I have to use multiple interface inheritance on a generic callback interface and it's becoming a little messy (well, to my taste).</p>\n\n<p>Wouldn't it be better to have one WCF service method to return the number of entities to evaluate, and another WCF method that will return a simple entity update result, which will be hit for every entity to update ? My DBContext will be living only for the time of a single entity update, so it would not grow very much, which I think is good. <strong>However, I am concerned about hitting the WCF service really often during that process</strong>.</p>\n\n<p>What are you thoughts ? What can you suggest ?</p>\n"},{"tags":["asp.net","asp.net-mvc","wcf","wcf-data-services"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13058504,"title":"can we have operationcontract without datacontract in WCF?","body":"<p>When we create WCF Service, we have SrviceContract (Interface), OperationCOntract(Methods) and DataContract(Class types).</p>\n\n<p>I am wondering if we can have OperationContract without DataContract. If yes, any Example would be great help.</p>\n\n<p>Appreciate your time.</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","nettcpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":909,"score":1,"question_id":3652278,"title":"Socket connection was aborted - WCF","body":"<p>I have a simple client server apps that uses WCF (netTcpBinding) when i'm launching the server and sending messages through the client everythings works fine , but when i'm closing the server manually and open it again (without closing the client app at all) the next time the client tries to send a message to the server i get this exception (on the client side):</p>\n\n<p>The socket connection was aborted. This could be caused by an error processing y\nour message or a receive timeout being exceeded by the remote host, or an underl\nying network resource issue. Local socket timeout was '00:00:59.9843903'.</p>\n\n<p>if i use basicHttpBinding the problem doesn't occur.</p>\n\n<p>is any one knows why this problem occurs ???\nThanks,\nLiran</p>\n"},{"tags":["asp.net","wcf","http","android-gcm","updates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13045795,"title":"How can I check for a new data for Google Cloud Messaging push notification","body":"<p>What I want to achieve is</p>\n\n<p>Server Side (WCF Service with JSON or ASP.NET page (i dont know what I need yet))  </p>\n\n<ol>\n<li>Check for latest data over an HTTP request from an existing page periodically. (This is a dynamic page and does not know I am there so it can not send updates.)</li>\n<li>If anything changed on that page send post request to Google Cloud Messaging system that there is a new data</li>\n<li>Clients already registered get notified and get the payload data which is smaller than 4 KB.</li>\n</ol>\n\n<p>Question is #1 how do i check for new data periodically on server side? If that was an desktop app sure I would use a Timer.</p>\n\n<p>Im stuck at this point. Can you please let me know what you think it should be like</p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13055929,"title":"Make entity's constructor private","body":"<p>I would like to prevent my clients from instantiating entities through the constructor.\nAs there's quite a bit of pluming involved to create those entities (initialise states, collections etc...), and WCF doesn't work that way, I would like instead to force them to call a method on the server side that will create the entity and send it over the wire, something like</p>\n\n<p>Client side:</p>\n\n<pre><code>var client = EntityServiceClient(\"myEndpoint\");\nvar newEntity = client.CreateEntity();\n</code></pre>\n\n<p>Server side:</p>\n\n<pre><code>public Entity CreateEntity()\n{\n    return new Entity();\n}\n</code></pre>\n\n<p>I have something working, but I would like to somehow throw an exception when the default constructor of the entity is used, or make it private. So the following should not work</p>\n\n<p>Client side:</p>\n\n<pre><code>var client = EntityServiceClient(\"myEndpoint\");\nvar newEntity = new Entity();\n</code></pre>\n\n<p>Is it something possible?</p>\n"},{"tags":["c#","wcf","reflection","self-hosting"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":13034546,"title":"Wcf Dynamic Hosting using reflection","body":"<p>My goal is to create a host application able to parse multiple assemblies, detect the contracts and host the services.</p>\n\n<p>In order to load a service, we usually need to hardcode the servicehost instantiation. the following code is working despite not being the behaviour I'm looking for.</p>\n\n<pre><code>ServiceHost wService1Host = new ServiceHost(typeof(Service1));\nwService1Host.Open();\n\nServiceHost wService2Host = new ServiceHost(typeof(Service2));\nwService2Host.Open();\n</code></pre>\n\n<p>However, this mean I know in advance what the services would be. \nI don't mind having a reference to the assemblies containing the services. I just want the host not knowing about what services are contained within the assemblies. For example, if I add a new Service to one of the assemblies, no changes would be needed on the host side.</p>\n\n<p>This is very similar to this <a href=\"http://stackoverflow.com/questions/5993563/can-i-automatically-host-all-services-in-app-config-when-using-selfhosting?lq=1\">question</a>, but with an added complexity for the reason mentioned above.</p>\n\n<p>Here is the host code I've come with so far. I don't mind managing the services at the moment, I simply want them to be loaded properly.</p>\n\n<pre><code>class Program\n  {\n    static void Main(string[] args)\n    {\n\n      // find currently executing assembly\n      Assembly curr = Assembly.GetExecutingAssembly();\n\n      // get the directory where this app is running in\n      string currentLocation = Path.GetDirectoryName(curr.Location);\n\n      // find all assemblies inside that directory\n      string[] assemblies = Directory.GetFiles(currentLocation, \"*.dll\");\n\n      // enumerate over those assemblies\n      foreach (string assemblyName in assemblies)\n      {\n        // load assembly just for inspection\n        Assembly assemblyToInspect = Assembly.ReflectionOnlyLoadFrom(assemblyName);\n\n        // I've hardcoded the name of the assembly containing the services only to ease debugging\n        if (assemblyToInspect != null &amp;&amp; assemblyToInspect.GetName().Name == \"WcfServices\")\n        {\n          // find all types\n          Type[] types = assemblyToInspect.GetTypes();\n\n          // enumerate types and determine if this assembly contains any types of interest\n          // you could e.g. put a \"marker\" interface on those (service implementation)\n          // types of interest, or you could use a specific naming convention (all types\n          // like \"SomeThingOrAnotherService\" - ending in \"Service\" - are your services)\n          // or some kind of a lookup table (e.g. the list of types you need to find from\n          // parsing the app.config file)\n          foreach (Type ty in types)\n          {\n            Assembly implementationAssembly = Assembly.GetAssembly(ty);\n            // When loading the type for the service, load it from the implementing assembly.\n            Type implementation = implementationAssembly.GetType(ty.FullName);\n\n            ServiceHost wServiceHost = new ServiceHost(implementation); // FAIL\n            wServiceHost.Open();\n          }\n        }\n      }\n      Console.WriteLine(\"Service are up and running.\");\n      Console.WriteLine(\"Press &lt;Enter&gt; to stop services...\");\n      Console.ReadLine();\n    }\n  }\n</code></pre>\n\n<p>I get the following error when trying to create the serviceHost :</p>\n\n<pre><code>\"It is illegal to reflect on the custom attributes of a Type loaded via ReflectionOnlyGetType (see Assembly.ReflectionOnly) -- use CustomAttributeData instead.\"\n</code></pre>\n\n<p>In the link given above, the guy seems to have solved its problem using typeof since he knows in advance what service he wants to expose. Unfortunately, this is not my case.</p>\n\n<p>Note : For the hosting part, I actually have 3 projects. The first one is the host application (see above), the second one, is an assembly containing all my service's contract (the interfaces) and the last assembly contains the services implementation.</p>\n\n<p>Here is the app.config I actually use for hosting the services. The assembly containing the implementation is named \"WcfServices\" and contains 2 services. One is exposing callbacks and the other only basic services.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;    \n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;  \n        &lt;behavior name=\"metadataBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n        &lt;/behavior&gt;        \n      &lt;/serviceBehaviors&gt;  \n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service name=\"WcfServices.Service1\"\n               behaviorConfiguration=\"metadataBehavior\"&gt;\n\n        &lt;endpoint address=\"Service1Service\"\n                  binding=\"basicHttpBinding\"\n                  contract=\"WcfServices.IService1\"\n                  name=\"basicHttp\"/&gt;\n\n        &lt;endpoint binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\"\n                  name=\"metadataExchange\"/&gt;\n\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8000/Service1\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;        \n      &lt;/service&gt;\n\n      &lt;service name=\"WcfServices.Service2\"\n               behaviorConfiguration=\"metadataBehavior\"&gt;\n\n        &lt;endpoint address=\"Service2Service\"\n                  binding=\"wsDualHttpBinding\"\n                  contract=\"WcfServices.IService2\"/&gt;\n\n        &lt;endpoint address=\"mex\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\"/&gt;\n\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8000/Service2\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n\n    &lt;/services&gt;    \n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>So, to be clear, here's what I'm looking for :<br>\n 1. Load assemblies in current app directory<br>\n 2. Looks if there are any contracts implementation in it<br>\n 3. If there are, instantiate those services (using app.config for the moment)  </p>\n\n<p>First of all, is this even possible ? (My guess would be it is since an application named wcfstorm alread seems to do this)<br>\nObviously, How could I make the code above works ?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12999349,"title":"Purpose of Runtime section in Web.config","body":"<p>When closely observing Web.config, all the possible child elements of <code>&lt;configuration&gt;</code> are also present inside <code>configuration/runtime</code>. </p>\n\n<p>I have never encountered a need to specify values in <code>configuration/runtime</code> section. Have you come across this situation?</p>\n\n<p>What is the purpose of specifying values in runtime section ?</p>\n"},{"tags":["c#","wcf","rest","soap"],"answer_count":1,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13053197,"title":"Exposing WCF Service over different methods","body":"<p>So we have recently moved much of our business logic into a service layer, which has led us to refactor the services we have exposed as API services. I consider myself experienced enough with WCF, but of course there is always more learning to be done. What I am interested in finding out, is not really something I can find in a book?</p>\n\n<p>If we have a service <strong>ReturnService</strong> that we want to expose, but we want to expose it over SOAP and over REST, what is the best practice for doing this? Until now, I have always just created two implementations and interfaces, which goes against my preaching to use a single interface for multiple implementations. </p>\n\n<p>I am not sure how I would use one interface for both implementations being that I need to specify the service specific information on the interface.</p>\n"},{"tags":["wcf","asynchronous","callback"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13053040,"title":"wcf async callback","body":"<p>I have WCF service which sends messages to its clients. I would like to call callback methods asynchronously. I have read this answer:\n<a href=\"http://stackoverflow.com/questions/5979252/wcf-asynchronous-callback\">WCF asynchronous callback</a></p>\n\n<p>But there is one problem. When I am generating IMyServiceCallback from WebServiceReference it contains both synchronous and asynchronous methods (while on the service side there is callback contract with only asynchronous methods - BeginCallbackMethod and EndCallbackMethod). What is more when I call from MyService to calback BeginCallbackMethod, on the client side (in callback implementation) it is using synchronous CallbackMethod. The question is why? Is there any way to configure it?</p>\n"},{"tags":["wcf","oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13014139,"title":"Examples of WCF CRUD operations for Oracle?","body":"<p>I'm working on exposing access to an Oracle database table for a SharePoint implementation.</p>\n\n<p>From what I've seen, Oracle is not directly supported by BDC, so I'm trying to write a WCF service to perform the CRUD operations against my table.</p>\n\n<p>I've been researching on Google with very limited success. Can anybody point me to an example of using WCF to modify data in an Oracle database?</p>\n"},{"tags":["asp.net","wcf","iis"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1831,"score":2,"question_id":2976957,"title":"The resource cannot be found. WCF .svc file","body":"<p>I am making a WCF service. </p>\n\n<p>System Config: Widnows 7, ASP.NET 3.5, IIS 7.0\nServer Config: IIS7, ASP.NET 3.5</p>\n\n<p>It works fine on my system, but when i deploy this on the server i get following error\n<br/> <strong>The resource cannot be found.</strong></p>\n\n<p>when i try accessing my .svc file. Please help me out in this. </p>\n\n<p>My server is with GoDaddy, so i have no control on the server. I have to do everything in my code only. Please help.</p>\n"},{"tags":["wcf","design","msmq","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12975620,"title":"get XML file from third party with no access","body":"<p>We are trying to get encrypted XML file from third party on daily basis. How can we get this file from third party without access to our network? There is a middle layer(server) between us and third party to access this file without using the FTP transfer. So we came up with this idea of using WCF to input this file by third party and consume this service in middle layer.  We do not have direct access to this folder from our network becuase of security reasons we are putting this file in MSMQ queue. We wrote a small program to transfer this file from Queue. Is this right way of doing it? I am sure there is a better way of doing this. Could you please suggest any other methods? I appreciate any suggestions.</p>\n\n<p>Thank you.</p>\n"},{"tags":[".net","wcf","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13030443,"title":"Preserve message order when consuming MSMQ messages in a WCF application","body":"<p>I have an application that consumes messages from an MSMQ queue. The application uses MSMQ activation of a WCF service hosted in the IIS using AppFabric.</p>\n\n<p>It is essential that the order of messages is preserved. But does MSMQ guarantee that the message order is preserved?</p>\n\n<p>It seems to me, that if my application fails to process a message, e.g. because of a broken connection to the database, then the message is moved to the retry queue. This allows the application to receive new messages from the main queue until the original message is moved from the retry queue back to the main queue. After a certain number of retry intervals, the message is moved to the poison queue. But if the application processes new messages, then poison queue handling is simply not an option.</p>\n\n<p>Thus the order of the messages has not been preserved.</p>\n\n<p>Am I wrong in my understanding of how application errors are handled?</p>\n\n<p>Can I setup the binding so that message order is preserved, also in the case when message processing temporarily fails?</p>\n"},{"tags":["wcf","oracle","service"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13053832,"title":"How do I call a WCF Service from an Oracle Trigger","body":"<p>I am a senior .net developer and this problem has stumped me big time.</p>\n\n<p>I have written a WCF Service that executes an SSIS package to replicate some data and need to call it from an Oracle Trigger after Insert.  I do not handle the back end and have never attempted anything like this before.  Would someone please tell me how I can call a method inside of a WCF Service via a trigger in Oracle.  This is how the higher ups want it to be done and I do not have any say so in how it is suppose to work.  Getting WCF to talk to SQL Server SSIS is no problem, it's how to call the WCF Service from Oracle that is a nightmare.  Can someone please help?  I am not a seasoned Oracle person at all.</p>\n\n<p>Thank you kindly,</p>\n\n<p>Nathan</p>\n"},{"tags":["wcf","ssl","wcf-security","pci-dss","pci-compliance"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13051571,"title":"How to disable SSLv2 in favor of SSLv3 for WCF net.tcp and https services","body":"<p>As part of a PCI compliance testing we discovered that our WCF net.tcp endpoints that are secured using transport level security and certificates are allowing for SSLv2 connections. Our services are self hosted, so we are not working with IIS to host them and therefor IIS based solution I don't think will work.</p>\n\n<p>After looking through a lot of MSDN pages we have yet to find a way to tell the WCF connections what version of SSL to use.</p>\n\n<p>We require that the connections only accept SSLv3 and not SSLv2 for PCI compliance.</p>\n\n<p><strong>Does anyone know how to set the forced SSL version on a WCF connection (both host and client), or is there a boarder approach on how to do this for your windows machine as a whole?</strong></p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13051393,"title":"Can a WCF Service display a help page or other content?","body":"<p>If you enter a service endpoint in a browser you get a Microsoft generated page with a link to the wsdl and some sample C# and VB code for creating an instance of the service client.  If you enter the wsdl link in a browser you get the wsdl. This all assumes no strange security restrictions of course.</p>\n\n<p>Is there a way to have a service return a page of your own design? If I wanted to have a nice help screen describing the available service methods, or describing possible error messages for example. Either replacing the MS generated default page, or something that can be viewed like a wsdl but with a ?help query parameter for example.</p>\n\n<p>I'm looking for really simple here with minimal changes to the existing services. If possible something that can be done by content creators or technical writers and not the service developers.</p>\n"},{"tags":["c#","xml","wcf","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13052905,"title":"RESTful service not returning XML as expected","body":"<p>I have a WCF RESTful service that is supposed to return a name and surname of a customer as a XML response, the service is defined as indicated below</p>\n\n<pre><code>[OperationContract]\n    [WebInvoke(Method = \"POST\",\n        RequestFormat = WebMessageFormat.Xml,\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Bare,\n        UriTemplate = \"/GetNameAndSurname\")]\n    string GetNameAndSurname();\n</code></pre>\n\n<p>The problem I'm experiencing is that the XML response that is returned was not in normal XML as expected, for example</p>\n\n<pre><code>&lt;string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\n &amp;lt;Customer;&amp;#xD;\n  &amp;lt;Name&amp;gt;Andre&amp;lt;/Name&amp;gt;&amp;#xD;\n  &amp;lt;SurnameName&amp;gt;Lombaard&amp;lt;/SurnameName&amp;gt;&amp;#xD;\n &amp;gt;\n&lt;/string&gt;\n</code></pre>\n\n<p>I'm not sure if it is the service returning the response this way or if it is the way I'm reading the data, just for informational purposes I included the code I use to read the response below,</p>\n\n<pre><code>var request = HttpWebRequest.Create(url);\nrequest.Method = \"POST\";\nrequest.Timeout = 2 * 60 * 1000;\nbyte[] byteArray = Encoding.UTF8.GetBytes(xml);\nrequest.ContentType = \"text/xml\";\nrequest.ContentLength = byteArray.Length;\nvar dataStream = request.GetRequestStream();\ndataStream.Write(byteArray, 0, byteArray.Length);\ndataStream.Close();\nvar response = request.GetResponse();\ndataStream = response.GetResponseStream();\nStreamReader reader = new StreamReader(dataStream, Encoding.UTF8);\ndataStream.Flush();\nvar results = reader.ReadToEnd();\nreader.Close();\ndataStream.Close();\nresponse.Close();\n</code></pre>\n\n<p>How do I get normal XML without having to perform various replacements on the characters received in the response.</p>\n\n<p>At the moment I replace the characters with the code below. This is not ideal</p>\n\n<pre><code>results = results.Replace(\"&lt;/string&gt;\", String.Empty);\nresults = results.Replace(\"&amp;lt;\", \"&lt;\");\nresults = results.Replace(\"&amp;gt;&amp;#xD;\", \"&gt;\");\nresults = results.Replace(\"&amp;gt;\", \"&gt;\");\nresults = Regex.Replace(results, \"&lt;string .*?\\\\&gt;\", String.Empty);                \n</code></pre>\n"},{"tags":["ios","wcf","monotouch"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13051878,"title":"Catching wcf-exceptions on iPhone with MonoTouch","body":"<p>i've been running into problems with exceptions thrown on the server and catching them on the client (iPhone). </p>\n\n<p>The interface of the service has a method declared with the </p>\n\n<pre><code>[FaultContract(typeof(SecurityException))]\n</code></pre>\n\n<p>In the method I throw a SecurityException. On the phone I get the following error:</p>\n\n<pre><code>{System.Net.WebException: Error getting response stream (ReadDone1): ReceiveFailure \n---&gt; System.IO.IOException: EndRead failure \n---&gt; System.Net.Sockets.SocketException: Connection reset by peer   \nat System.Net.Sockets.Socket.EndReceive (IAsyncResult result) [0x0002d] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net.Sockets/Socket_2_1.cs:1979\nat System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar) [0x0002f] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net.Sockets/NetworkStream.cs:338    --- End of inner exception stack trace ---   \nat System.Net.Sockets.NetworkStream.EndRead (IAsyncResult ar) [0x0003d] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net.Sockets/NetworkStream.cs:340    \nat System.Net.WebConnection.ReadDone (IAsyncResult result) [0x0002a] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/WebConnection.cs:429    --- End of inner exception stack trace ---   \nat System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x0005e] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:852\nat System.ServiceModel.Channels.HttpRequestChannel.GotResponse (IAsyncResult result) [0x0001f] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel/System.ServiceModel.Channels/HttpRequestChannel.cs:218 }\n</code></pre>\n\n<p>Now I browsed through the questions about this, and it seems that this bug was reported already and fixed in a version of monotouch. I am using the latest (6.0.4) version of monotouch, but still experience the error. </p>\n\n<p>Any ideas what I may be doing wrong?</p>\n"},{"tags":["jquery","ajax","wcf","jquery-plugins","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":779,"score":1,"question_id":7046091,"title":"Using blueimp jQuery File Upload with PUT to WCF","body":"<p>I am using the blueimp jQuery file upload plug-in located here <a href=\"https://github.com/blueimp/jQuery-File-Upload\" rel=\"nofollow\">https://github.com/blueimp/jQuery-File-Upload</a> and according to the documentation I should be able to upload a file using HTTP PUT.  Here is my init</p>\n\n<pre><code>$('#fileupload').fileupload({\n    url: baseServer + '/image/upload',\n    type: 'PUT',\n    multipart: false\n}\n</code></pre>\n\n<p>According to the stackoverflow answers <a href=\"http://stackoverflow.com/questions/6781633/file-upload-to-wcf-using-jquery\">file upload to wcf using jquery</a> and <a href=\"http://stackoverflow.com/questions/5518420/how-to-upload-a-file-using-an-http-put-using-jquery\">How to upload a file using an HTTP &quot;PUT&quot; using JQuery?</a> this should be possible however when I examine the data on the wire using fiddler, I see that the headers are set correctly but the body is empty.</p>\n\n<p>Does anyone have a working example of using this plug-in in IE9 from a local file?</p>\n\n<p>Cheers and thank you for your time.</p>\n"},{"tags":["wcf","iis-7.5","servicebehavior","service-factory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13046013,"title":"Is there a way to force IIS to invoke CustomServiceHost?","body":"<p>All,</p>\n\n<p>I have developed a WCF Web Service and hosted it in IIS7.5. The service behavior is  <code>instanceContextMode=InstanceContextMode.PerSession</code> and hence IIS creates an service instance during the first requests and creates as many instances as the number of requests.</p>\n\n<p>But there is a requirement to cache some of the application data upfront before the service is invoked ie., similar to static initialization.</p>\n\n<p>I don't want to disturb the service behavior attributes but want to achieve the static initialization.</p>\n\n<p>I did try to use CustomServiceFactory and take up the load of creating service factory instances myself. But looks like the IIS will create the service factory as well during first request or I am not sure on this part.</p>\n\n<p>So, I would like to know how to create the service instance / service factory instance when the application is deployed in IIS or during IIS restart?</p>\n\n<p>Any help is much appreciated!</p>\n"},{"tags":[".net","vb.net","wcf","web-services","stream"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":235,"score":0,"question_id":9314833,"title":".net wcf service for uploading image stream - Parameter is not valid exception","body":"<p>I need a wcf service which im going to use for uploading images from various platforms. </p>\n\n<p>This is what I have:</p>\n\n<p><strong>On the wcf side</strong></p>\n\n<pre><code>&lt;OperationContract()&gt; Function UploadImage(ByVal image As System.IO.Stream) As String\n\nFunction UploadImage(ByVal image As System.IO.Stream) As String Implements IService.UploadImage\n  Dim out As String = \"Success\"\n  Try\n    Dim img As System.Drawing.Image = System.Drawing.Image.FromStream(image, False, True)\n    img.Save(Path.Combine(IO.Path.GetTempPath, IO.Path.GetRandomFileName &amp; \".png\"))\n  Catch ex As Exception\n    out = ex.ToString\n  End Try\n\n  Return out\n\nEnd Function\n</code></pre>\n\n<p><strong>Ive added the wcf reference to a testpage and am calling it like this:</strong></p>\n\n<pre><code>Dim root As String = \"C:\\\"\nDim fname As String = \"test.png\"\n\nDim s As New ServiceReference1.ServiceClient\n\nDim img As System.Drawing.Image = System.Drawing.Image.FromFile(Path.Combine(root, fname))\nDim ImageStream As New MemoryStream\nimg.Save(ImageStream, ImageFormat.Png)\n\nReturn s.UploadImage(ImageStream)\n</code></pre>\n\n<p><strong>I get this error:</strong></p>\n\n<blockquote>\n  <p>System.ArgumentException: Parameter is not valid. at\n  System.Drawing.Image.FromStream(Stream stream, Boolean\n  useEmbeddedColorManagement, Boolean validateImageData)</p>\n</blockquote>\n\n<p>Anyone can see what is wrong.</p>\n"},{"tags":[".net","wcf","named-pipes","grid-computing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13050704,"title":"WCF TCP binding or Named pipes for grid computing?","body":"<p>I'm building a distributed system. There are several applications (some are .Net based (C#), others are C++ based (NOT C++/CLI!)). \nThose apps will be installed on each computer in cluster (currently Windows-driven).\nOn local PC I use for IPC: MemoryMappedFiles for C# apps, Shared Memory for C++ apps, Named Pipes for IPC between C# and C++.\nOver internet I use WCF TCP binding, using C# apps as bridges for C++ apps.</p>\n\n<p>What would be better to use for LAN communication? MPICH2, it seems, use TCP...\nAre typical named pipes quicker than WCF TCP binding with optimizations (disabled security, etc.)? The messages will be extremely large, mostly of double type. WCF is extremely convenient in my situation (all mathematical methods are simply contracts), but it's performance is a question.</p>\n"},{"tags":["wcf","msmq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13036229,"title":"MSMQ messages getting stuck in retry, not getting to WCF service","body":"<p>I have a strange situation.  I have a queue setup, and I have a client that is writing to it.  My WCF service is reading from it.  This almost seems to be working - the messages appear when the client writes, and the messages then disappear from the queue.  Howver, I'm not seeing the result of the service operation..  I don't see any errors anywhere, and I'm not sure how to troubleshoot.</p>\n\n<p>Here's the service operation that should be processing the messages:</p>\n\n<pre><code>    [OperationBehavior(TransactionScopeRequired=true, TransactionAutoComplete=true)]\n    public void Log(string message)\n    {\n        string final = string.Format(\"{0:yyyyMMdd HH:mm:ss}  {1}\", DateTime.Now, message);\n\n        File.WriteAllText(string.Format(@\"C:\\{0}.log\", Guid.NewGuid()), final);\n        File.WriteAllText(string.Format(@\"{0}.log\", Guid.NewGuid()), final);\n        File.AppendAllText(@\"C:\\msmqtest.log\", final);\n    }\n</code></pre>\n\n<p>I don't see any of these files anywhere.</p>\n\n<p>My service is hosted in IIS.  Also, after recompiling, the messages don't seem to disappear until I load the .svc for the service in the browser.. then the ones there disappear and any new ones don't stay beyond the blink of an eye.</p>\n\n<p>Any help troubleshooting would be grand.  I've setup tracing in the service, but it's not writing anything.  Nothing else is using the queue, though, so why are they disappearing and not triggering the service?</p>\n\n<hr>\n\n<p>Here is the contract (added <code>Action=\"*\"</code> after reading a question elsewhere, but it didn't help):</p>\n\n<pre><code>[ServiceContract]\npublic interface IMSMQService\n{\n\n    [OperationContract(IsOneWay=true, Action=\"*\")]\n    void Log(string message);\n\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Looks like they're all going into a retry folder, so they're not getting there.  How do I make sure they hit the service?</strong></p>\n\n<hr>\n\n<p><strong>Client config</strong> (relevant parts):</p>\n\n<pre><code>&lt;bindings&gt;\n    &lt;netMsmqBinding&gt;\n        &lt;binding name=\"NetMsmqBinding_IMSMQService\" closeTimeout=\"00:01:00\"\n            openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n            deadLetterQueue=\"System\" durable=\"true\" exactlyOnce=\"true\"\n            maxReceivedMessageSize=\"65536\" maxRetryCycles=\"2\" receiveErrorHandling=\"Fault\"\n            receiveRetryCount=\"5\" retryCycleDelay=\"00:30:00\" timeToLive=\"1.00:00:00\"\n            useSourceJournal=\"false\" useMsmqTracing=\"false\" queueTransferProtocol=\"Native\"\n            maxBufferPoolSize=\"524288\" useActiveDirectory=\"false\"&gt;\n            &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n            &lt;security mode=\"None\"&gt;\n                &lt;transport msmqAuthenticationMode=\"WindowsDomain\" msmqEncryptionAlgorithm=\"RC4Stream\"\n                    msmqProtectionLevel=\"Sign\" msmqSecureHashAlgorithm=\"Sha1\" /&gt;\n                &lt;message clientCredentialType=\"Windows\" /&gt;\n            &lt;/security&gt;\n        &lt;/binding&gt;\n    &lt;/netMsmqBinding&gt;\n&lt;/bindings&gt;\n&lt;client&gt;\n    &lt;endpoint address=\"net.msmq://localhost/private/WCFandMSMQ/MSMQService.svc\"\n        binding=\"netMsmqBinding\" bindingConfiguration=\"NetMsmqBinding_IMSMQService\"\n        contract=\"MSMQService.IMSMQService\" name=\"NetMsmqBinding_IMSMQService\" /&gt;\n&lt;/client&gt;\n</code></pre>\n\n<p><strong>Service config</strong> (relevant parts):</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;netMsmqBinding&gt;\n    &lt;binding exactlyOnce=\"true\" durable=\"true\"&gt;\n      &lt;security mode=\"None\" /&gt;\n    &lt;/binding&gt;\n  &lt;/netMsmqBinding&gt;\n&lt;/bindings&gt;\n&lt;services&gt;\n  &lt;service name=\"MSMQService.MSMQService\"&gt;\n    &lt;!--&lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"http://technoka1-l7:9999/\"/&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;--&gt;\n    &lt;endpoint address=\"net.msmq://localhost/private/WCFandMSMQ/MSMQService.svc\"\n              binding=\"netMsmqBinding\" contract=\"MSMQService.IMSMQService\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<hr>\n\n<p>Note:  Working with a transactional queue.</p>\n"},{"tags":["wcf","visual-studio","msmq","cassini"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13033529,"title":"WCF MSMQ service from Visual Studio","body":"<p>I'm trying to setup a very simple WCF service using MSMQ.  I am following the steps <a href=\"http://www.codeproject.com/Articles/326909/Creating-a-WCF-Service-with-MSMQ-Communication-and\" rel=\"nofollow\">here</a>.  When I go to run my service and load the .svc file, I get the following error:</p>\n\n<p><code>The protocol 'net.msmq' is not supported.</code></p>\n\n<p>Here's the relevant part of my config:</p>\n\n<pre><code>&lt;services&gt;\n  &lt;service name=\"MSMQService.MSMQService\"&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"http://technoka1-l7:9999/\"/&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n    &lt;endpoint address=\"net.msmq://technoka1-l7/private/MSMQService.svc\"\n              binding=\"netMsmqBinding\" contract=\"MSMQService.IMSMQService\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<p>Any ideas on how to fix would be greatly appreciated.  I've looked at a lot of different places that make suggestions for IIS, but this is running within Cassini right now.</p>\n"},{"tags":["wcf","silverlight"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13048510,"title":"show result of select from table in silverlight","body":"<p>I'm new to Silverlight. My code works in Window Forms: </p>\n\n<pre><code>    static void Main()\n    {\n        DBConnect dbconnect = new DBConnect();\n\n        using (System.IO.StreamWriter file = new System.IO.StreamWriter(@\"C:\\Temp\\WriteLines4.txt\", true))\n        {\n            file.WriteLine(dbconnect.CountPublic());\n        }\n\n        dbconnect.CloseConnectionPublic();\n    }\n</code></pre>\n\n<p>It connects to database, counts rows in table, writes result into txt file and closes connection. </p>\n\n<p>Now my need is to show result in silverlight (web page) instead of writing into txt file. How do I start?</p>\n\n<p>UPDATE: \nSilverlight doesn't work with database directly. My need is to create WCF service for work with database and consume service using Silverlight. \nFound simple example for SL &amp; WCF to start with: \n<a href=\"http://sonyarouje.com/2010/10/16/image-uploading-retrieving-silverlight-and-wcf/\" rel=\"nofollow\">http://sonyarouje.com/2010/10/16/image-uploading-retrieving-silverlight-and-wcf/</a></p>\n"},{"tags":["c#","wcf","service-reference","code-sharing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13032542,"title":"Sharing common class in wcf project","body":"<pre><code>class MyCommonClass\n{\n//properties\n}\n</code></pre>\n\n<p>This class should be accessible in </p>\n\n<ol>\n<li>service project</li>\n<li>wcf-client project</li>\n<li>the other for which they are references. In this common project I can't generate servicereferences.</li>\n</ol>\n\n<p>I think, I could don't generate <code>MyCommonClass</code> in <code>ServiceReferences</code> but how to mark class to be nonserializable? In properties there's <code>IgnoreDataMemberAttribute</code>. I tried also reuse MyCommonClass type located in common project, but it is still generated</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In different words: if some type is used in ServiceOperation it's automatically generated into wsdl document. How to disable it? (I don't want it on wcf-client side)</p>\n"},{"tags":["windows","wcf","iis","authentication","application-pool"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2288,"score":2,"question_id":1759329,"title":"WCF windows authentication with IIS and Application Pool","body":"<p>I have a WCF Server running on IIS 6 using a application pool with a custom identity</p>\n\n<p>right now the I looked on the web for two days and I can't find the exact answer to my problem.  I know there are a lot of similar ones outer there</p>\n\n<p>On IIS6 the virtual directory has anonymous access disable and Integrated Windows authentication enabled.  The service account is on the same domain as the machine.  I will call it svcE.  I added svcE to the IIS_WPG group.</p>\n\n<p>Now, first issue is when I select that application pool with svcE to work on Virtual Directory, call it appDir, then when I navigate to appDir I get prompted for credentials but if I use the network service account I do not and verify that I am logged in as me.</p>\n\n<p>What I want to do is have the service run under the account svE because it has access to the database, without putting that info in the WebConfig file.</p>\n\n<p>I have a web service with the config file</p>\n\n<pre><code>&lt;authentication mode=\"Windows\"/&gt;\n\n&lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"default\"&gt;\n                &lt;security mode=\"TransportCredentialOnly\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\"/&gt;\n                &lt;/security&gt;                  \n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n\n&lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"default\" contract=\"&lt;removed&gt;\"&gt;\n &lt;identity&gt;\n  &lt;dns value=\"localhost\" /&gt;\n &lt;/identity&gt;\n&lt;/endpoint&gt;\n</code></pre>\n\n<p>The Web config using the service has</p>\n\n<pre><code>&lt;basicHttpBinding&gt;\n            &lt;!-- Create one Binding for all three services, save space--&gt;\n            &lt;binding name=\"BasicHttpBinding_PricingService\" closeTimeout=\"00:01:00\"\n                openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;security mode=\"TransportCredentialOnly\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"Windows\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"&lt;address&gt;.svc\"\n            binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_PricingService\"\n            contract=\"&lt;contract&gt;\" name=\"&lt;name&gt;\" /&gt;\n</code></pre>\n\n<p>Ultimatly what I am trying to achieve is</p>\n\n<p>Only Windows Authenticated people can call the service --> Then the service uses a serivce account to have all interaction with the database.</p>\n\n<p>Note that if I skip the first part and add annon access then it works and called the database fine</p>\n\n<p>Thank you for the help</p>\n"},{"tags":["c#","multithreading","wcf","silverlight"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":77,"score":4,"question_id":13044511,"title":"ManualResetEvent is not working with WCF and silverlight","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6147288/why-does-manualresetevent-fail-to-work-in-this-synchronous-call-using-silverligh\">Why does ManualResetEvent fail to work in this synchronous call using Silverlight 4?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a below code in MainPage.Xaml.cs</p>\n\n<pre><code> ManualResetEvent wait = new ManualResetEvent(false);\n Service1Client wcf = new Service1Client();\n wcf.DoWorkCompleted += (o, ev) =&gt;\n {\n   int s = (int)ev.Result;\n   wait.Set();\n };\n wcf.DoWorkAsync();\n wait.WaitOne();\n\n//My other part of code where I'd like the value of `int s`.\n....\n</code></pre>\n\n<p>Service1.svc.cs has the code below .</p>\n\n<pre><code>public class Service1 : IService1\n{\n  public int DoWork()\n  {\n    return 5;\n  }\n}\n</code></pre>\n\n<p>Till the <code>DoWork</code> is completed I want my code to wait so I have written this code. Though after <code>WaitOne</code> instruction (Service1.svc.cs) method <code>DoWork()</code> won't be called at all. Application will stay there only doesn't do anything. I have worked on this before in another machine in SilverLight 4 and it was working as expected. Now I'm using SilverLight 3.</p>\n"},{"tags":["asp.net",".net","wcf","iis-7.5"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":110,"score":3,"question_id":13044710,"title":"Hosting an authentication-free WCF REST service side-by-side with ASP.NET with Forms Authentication","body":"<p>I would like to host a REST-full WCF 4.0 service on an already-created IIS 7.5 website based on ASP.NET v4.0 and secured by forms authentication. So, I tried to configure my WCF stack using mixed mode authentication (aspNetCompatibilityEnabled=\"false\") and configured the service host to use no security at all but So long, all my efforts was completely unsuccessful. When I try to call my service from the browser after a while the connection to the host is closed without a response and my browser raises an error indicating the connection to the target webstie is closed without any response. </p>\n\n<p>However, if I write a dummy code in Application_BeginRequest to authenticate a dummy user in forms authentication module using FormsAuthentication.Authenticate or call the service in an authenticated browser session everything works fine and the service is called successfully.</p>\n\n<p>I tried to find the problem causing this strange behavior using WCF tracing. What I have found from the resulting svclog file is this exception:</p>\n\n<p><strong>Message:</strong> Object reference not set to an instance of an object. <br/>\n<strong>StackTrace:</strong> <br/>\nSystem.ServiceModel.Activation.HostedHttpRequestAsyncResult.get_LogonUserIdentity()\nSystem.ServiceModel.Channels.HttpChannelListener.ValidateAuthentication(IHttpAuthenticationContext authenticationContext)\nSystem.ServiceModel.Channels.HttpRequestContext.ProcessAuthentication()\nSystem.ServiceModel.Channels.HttpChannelListener`1.HttpContextReceived(HttpRequestContext context, Action callback)</p>\n\n<p>Any idea about the problem?</p>\n\n<p><strong>UPDATE</strong>: I even set the authentication mode of the website to \"None\" and authorized anonymous users. Still the same results. Nothing changed. The question is that can I use unauthenticated WCF RESTfull services with aspNetCompatibilityEnabled=\"false\" on an ASP.NET website at all???</p>\n\n<p>To be more specific, What I have tried to do is:</p>\n\n<ul>\n<li>Implemented my WCF service in the form of a .svc file</li>\n<li>Configured WCF in my web.config file as the following (note AspNetCompatibilityEnabled=\"false\"):</li>\n</ul>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" aspNetCompatibilityEnabled=\"false\" /&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<ul>\n<li>Created and used my own ServiceHostFactory like this:</li>\n</ul>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    public class MyServiceHostFactory : ServiceHostFactoryBase\n    {\n        #region Methods\n\n        public override ServiceHostBase CreateServiceHost(string constructorString, Uri[] baseAddresses)\n        {\n            var type = Type.GetType(constructorString);\n            var host = new WebServiceHost(type, baseAddresses);\n\n            var serviceBehavior = host.Description.Behaviors.OfType&lt;ServiceBehaviorAttribute&gt;().Single();\n            serviceBehavior.ConcurrencyMode = ConcurrencyMode.Multiple;\n            serviceBehavior.MaxItemsInObjectGraph = int.MaxValue;\n\n            var metadataBehavior = host.Description.Behaviors.OfType&lt;ServiceMetadataBehavior&gt;().SingleOrDefault();\n\n            if (metadataBehavior == null)\n            {\n                metadataBehavior = new ServiceMetadataBehavior();\n                host.Description.Behaviors.Add(metadataBehavior);\n            }\n\n            var debugBehavior = host.Description.Behaviors.OfType&lt;ServiceDebugBehavior&gt;().SingleOrDefault();\n\n            if (debugBehavior == null)\n            {\n                debugBehavior = new ServiceDebugBehavior();\n                host.Description.Behaviors.Add(debugBehavior);\n            }\n\n            metadataBehavior.HttpGetEnabled = true;\n            debugBehavior.IncludeExceptionDetailInFaults = true;\n\n            var binding = new WebHttpBinding { MaxBufferPoolSize = int.MaxValue, MaxReceivedMessageSize = int.MaxValue };\n            binding.Security.Mode = WebHttpSecurityMode.None;\n            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;\n\n            WebHttpBehavior webHttpBehavior = new WebHttpBehavior { HelpEnabled = true };\n\n            foreach (var contract in type.GetInterfaces().Where(i =&gt; i.GetCustomAttributes(typeof(ServiceContractAttribute), true).Length &gt; 0))\n            {\n                var endpoint = host.AddServiceEndpoint(contract, binding, \"\");\n                endpoint.Behaviors.Add(webHttpBehavior);\n            }\n\n            host.AddServiceEndpoint(typeof(IMetadataExchange), MetadataExchangeBindings.CreateMexHttpBinding(), \"mex\");\n\n            return host;\n        }\n\n        #endregion\n    }\n</code></pre>\n"},{"tags":["c#","wcf","messages","channelfactory"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":10971,"score":6,"question_id":1798069,"title":"WCF Error : Manual addressing is enabled on this factory, so all messages sent must be pre-addressed","body":"<p>First off, I'd like to thank those who have helped me out with this WCF connectivity, as it's fairly new to me.</p>\n\n<p>I've got a hosted WCF service that I created a custom factory for, so that this would work with multiple host headers:</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Required for hosting where multiple host headers are present\n/// &lt;/summary&gt;\npublic class MultipleHostServiceFactory : ServiceHostFactory\n{\n    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)\n    {\n        List&lt;Uri&gt; addresses = new List&lt;Uri&gt;();\n        addresses.Add(baseAddresses[0]);\n        return base.CreateServiceHost(serviceType, addresses.ToArray());\n    }\n}\n</code></pre>\n\n<p>I'm pretty sure that my config files are now right, on both client and server (<a href=\"http://stackoverflow.com/questions/1794247/wcf-consumer-website-returning-the-address-property-on-channelfactory-endpoint-wa\">can be seen here <a href=\"http://stackoverflow.com/questions/1794247/wcf-consumer-website-returning-the-address-property-on-channelfactory-endpoint-wa\">http://stackoverflow.com/questions/1794247/wcf-consumer-website-returning-the-address-property-on-channelfactory-endpoint-wa</a></a> ).</p>\n\n<p>The error I'm getting appears to be related to the factory:</p>\n\n<p>Manual addressing is enabled on this factory, so all messages sent must be pre-addressed.</p>\n\n<p>Line 113:<br>\nLine 114:        public string GetData(int value) {\nLine 115:            return base.Channel.GetData(value);\nLine 116:        }\nLine 117:   </p>\n\n<p>The error occurs at line 115.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13042882,"title":"Could not find default endpoint element that references contract","body":"<p>I'm try to add web services.</p>\n\n<p>This is my config file</p>\n\n<pre><code> &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"Service1Soap\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n          receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n          bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\" \n          maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n          messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\" \n          useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n              realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://localhost:51272/Service1.asmx\" binding=\"basicHttpBinding\"\n        bindingConfiguration=\"Service1Soap\" contract=\"ServiceReference1.Service1Soap\" \n        name=\"Service1Soap\"  /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>This is my controller where I call the web services.</p>\n\n<pre><code> ServiceReference1.Service1Soap hs = new ServiceReference1.Service1SoapClient();\n int aa = hs.getStockQty(66);\n</code></pre>\n\n<p>But there is error..</p>\n\n<p><img src=\"http://i.stack.imgur.com/8U41c.png\" alt=\"enter image description here\"></p>\n\n<p>How can I solve it??\nThanks.</p>\n"},{"tags":["c#","wcf","telerik","faultexception"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13044288,"title":"WCF Unhandled FaultException was not handled by usercode","body":"<p>i'm trying to use a WCF Plain service with Telerik OpenAccess in VS 2012 with .net 4.5.</p>\n\n<p>I tried the telerik developers manual and created the service and a client.</p>\n\n<p>In the service interface IEntitiesModel I put </p>\n\n<pre><code>[OperationContract]\n[FaultContract(typeof(string))]\nPersistentDto ReadPersistentDto(string dtoKey);\n</code></pre>\n\n<p>In the EntitiesModel.SVC for the method I used an easy construct as first try: </p>\n\n<pre><code>public PersistentDto ReadPersistentDto(string dtoKey)\n{\n   throw new FaultException(\"test\");\n} \n</code></pre>\n\n<p>In user code of Consumer i put a catch for the exception.</p>\n\n<p>Now the problem is:</p>\n\n<p>Every time the service is called, Visual Studio stops in \"throw new FaultException\" with the error message, that FaultException was not handled by usercode. If i continue with F5, the exception is also caught by usercode of consumer.</p>\n\n<p>Why does it stop in the service?</p>\n\n<p>In my understanding a FaultException is something which should be passed to the consumer of a service. </p>\n\n<p>What should i do to throw a FaultException correctly?</p>\n"},{"tags":["asp.net","vb.net","wcf","json","serialization"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2868,"score":0,"question_id":2318785,"title":"Error: Expecting state. Could not Deserialize JSON Object","body":"<p>We are trying to consume WCF service which returns employee details in JSON Format.\nlike:</p>\n\n<pre><code>{\"d\":[{\"__type\":\"Employee:#\",\"BigThumbNailURI\":null,\"ID\":1,\"Name\":\"E1\"},{\"__type\":\"Employee:#\",\"BigThumbNailURI\":null,\"ID\":2,\"Name\":\"E1\"}]}\n</code></pre>\n\n<p>From VB.net code behind when I am trying to deserialize it it's stating that </p>\n\n<h2><strong>\"Expecting state 'Element'.. Encountered 'Text'  with name '', namespace ''.\"</strong></h2>\n\n<p>Deserialization code snippet:</p>\n\n<pre><code>Dim serializer = New DataContractJsonSerializer(GetType(List(Of Employee)))\nDim memoryStream = New MemoryStream()\nDim s = msg.Content.ReadAsString()\nserializer.WriteObject(memoryStream, s)\nmemoryStream.Position = 0\n\n' Code for Deserilization\n\nDim obj As List(Of Employee) = serializer.ReadObject(memoryStream)\nmemoryStream.Close()\n\n\n'Employee Class\n\n&lt;DataContract()&gt; _\nPublic Class Employee\n\n    Private _Name As String\n    &lt;DataMember()&gt; _\n    Public Property Name() As String\n        Get\n            Return _Name\n        End Get\n        Set(ByVal value As String)\n            _Name = value\n        End Set\n    End Property\n\n\n    Private _id As Integer\n    &lt;DataMember()&gt; _\n    Public Property ID() As Integer\n\n        Get\n            Return _id\n        End Get\n        Set(ByVal value As Integer)\n            _id = value\n        End Set\n    End Property\n\n\nEnd Class\n</code></pre>\n\n<hr>\n\n<p>Has anyone encountered this problem?</p>\n"},{"tags":[".net","visual-studio-2010","wcf","service-reference"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13042509,"title":"How to tell where a Service Reference was generated from?","body":"<p>My Visual Studio 2010 project has a Service Reference defined. I can right click it to update the reference... but I have no idea what URL the reference was defined on, nor can I find a place to find this info to know how it is going to update. </p>\n"},{"tags":["android","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13042548,"title":"Fail to send two words as one parameter from android to WCF service","body":"<p>I'm very new to Android &amp; WCF web service. I fail to send two words (James Bond) as a one a parameter from android to WCF service. If i send as JamesBond then it works.Can anyone expert in this language, guide me.Thanks.Below is the example:</p>\n\n<p>Its not Working when i use space in the variable as follows</p>\n\n<pre><code>String name=\"James Bond\"\nHttpGet httpGet=new HttpGet(\"http://10.0.2.2:3113/Service1.svc/getStatusDetails?name=\"+name);\n</code></pre>\n\n<p>Its working when there is no space in the variable</p>\n\n<pre><code>String name=\"JamesBond\"\nHttpGet httpGet=new HttpGet(\"http://10.0.2.2:3113/Service1.svc/getStatusDetails?name=\"+name);\n</code></pre>\n"},{"tags":["c#","wcf","callback"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13026586,"title":"Callback interfering with return of inital call","body":"<p>I've got a WCF service where i'm trying to get callbacks working.</p>\n\n<p>The Interface class looks like:</p>\n\n<pre><code>[ServiceContract(\n    SessionMode = SessionMode.Required,\n    CallbackContract = typeof(IPredatorEngineCallback))]\npublic interface IMyApplication\n{\n    [OperationContract]\n    Boolean DoSomething(string mystring);\n\n    [OperationContract]\n    Boolean SubscribeToEvent();\n\n}\n\npublic interface IMyApplicationCallback\n{\n    [OperationContract (IsOneWay = true)]\n    void EventRaised(EventMessage myEventMessage)\n}\n</code></pre>\n\n<p>EventMessage is class which is in a comms library shared by the server &amp; client.</p>\n\n<p>The implementation of this interface looks like:</p>\n\n<pre><code>[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple)]\npublic class MyApplication : IMyApplication\n{\n    private List&lt;IMyApplicationCallback&gt; CallbackList = new List&lt;IMyApplicationCallback&gt;;\n\n    public Boolean DoSomething(string mystring)\n    {\n           // Do stuff\n\n           // Now Raise an event\n           PublishEvent();\n\n           return true;\n    }\n\n    public Boolean SubscribeToEvent()\n    {    \n        IMyApplicationCallback IMAC = OperationContext.Current.GetCallbackChannel&lt;IMyApplicationCallback&gt;();\n        if (!Callbacklist.Contains(IMAC)\n           Callbacklist.Add(IMAC);\n    }\n\n    private void PublishEvent()\n    {\n        EventMessage myEM = new EventMessage();\n\n        // Populate myEM.Fields\n\n        Callbacklist.ForEach(delegate(IMyApplicationCallback callback)\n        { callback.EventRaised(myEM); });\n    }\n}\n</code></pre>\n\n<p>The idea is that a client can choose to subscribe to receiving events.</p>\n\n<p>I built my app in stages and immediately prior to implementing callbacks, the service works fine. Calls made to DoSomething() do what they are supposed to do and return pretty much immediately.</p>\n\n<p>Now that i've implemented CallBacks, if I comment out the RaiseEvents() line in DoSomething it returns immediately.</p>\n\n<p>My Client code now calls SubscribeToEvent() first, then makes a second call to DoSomething().</p>\n\n<p>If I uncomment it and follow through with the debugger, I see that DoSomething finishes nicely pretty much immediately - no delay. I've got both the client &amp; WCF service running on same machine with VS2010. I follow it through to the closing } in DoSomething().</p>\n\n<p>However, the callback function in my client isn't called. After 1 minute it finally did get called and, I also got an error message stating that my original call had timed out. So I changed app.config to reduce to 10 seconds and the error message is:</p>\n\n<pre><code>\"This request operation sent to http://localhost:8732/Design_Time_Addresses/MyApplication/MyAppication did not receive a reply in the configured timeout (00:00:09.987997). The time allotted to this operation may have been a portion of a longer timeout...\"\n</code></pre>\n\n<p>So it appears that something is blocking the return of the first call; but the event has been raised because it eventually gets there. I suspect this is to do with locking/concurrencymode but i'll admit that i'm lost for a solution.</p>\n\n<p>On the client side i've used the proxy code generated by adding a service reference.</p>\n\n<p>Server side app.config (relevant parts only):\n    \n    \n       \n    \n    \n    \n      <br>\n        \n          \n        \n      \n    \n    \n      <br>\n    \n    </p>\n\n<p>\n        \n          \n            \n          \n        \n        \n        \n          \n            \n          \n        \n      \n    \n    \n      \n        \n          \n          \n          \n          \n        \n      \n    \n    </p>\n\n<pre><code>&lt;/configuration&gt;\n</code></pre>\n\n<p>Client side App.config:</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;wsDualHttpBinding&gt;\n            &lt;binding name=\"WSDualHttpBinding_IPredatorEngine\" closeTimeout=\"00:00:10\"\n                openTimeout=\"00:00:10\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:00:10\"\n                bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\" /&gt;\n                &lt;security mode=\"Message\"&gt;\n                    &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n                        algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/wsDualHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://localhost:8732/Design_Time_Addresses/MyApplication/MyApplication/\"\n            binding=\"wsDualHttpBinding\" bindingConfiguration=\"WSDualHttpBinding_IMyApplication\"\n            contract=\"MyApplication.IMyApplication\" name=\"WSDualHttpBinding_IMyApplication\"&gt;\n            &lt;identity&gt;\n                &lt;dns value=\"localhost\" /&gt;\n            &lt;/identity&gt;\n        &lt;/endpoint&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I assume i've not got something configured right. Can anyone spot it ?</p>\n"},{"tags":["wcf","entity-framework",".net-4.0","self-tracking-entities"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13041984,"title":"WCF, Data-Updates & EntityReference object could not be serialized","body":"<p>I did a lot of stuff with WCF where I first thought: \"Hmm, this problem is weird\" - but after I figured each one out, it always made somehow sense (sometimes more, sometimes less).<br />\nBut now I'm at a point where I'm stuck and with all my imagination, I cannot think of a reason why this error appreas:</p>\n\n<blockquote>\n  <p>The EntityReference object could not be serialized. This type of object cannot be serialized when the RelationshipManager belongs to an entity object that does not implement IEntityWithRelationships.</p>\n</blockquote>\n\n<p>To put it in a context, let me tell you about my program in a nutshell:<br />\nI have a client which send's an ID to my WCF.\nIf this ID is in use, I'll grab it's related object from the EF (otherwiese I'll create a new one) and send it back.</p>\n\n<p>This all is done by Selftracking Entities - and getting the objects works fine, as well as the first update:</p>\n\n<pre><code>public static void UpdatePaperOnServer(ref PAPER p)\n{\n    var newP = ServiceClient.UpdatePaper(p);\n    p = newP;\n}\n</code></pre>\n\n<p>The reference \"p\" is a field in &lt; Program > and any changes will happen on this variable.<br /></p>\n\n<p>Here is the server-side implementation of UpdatePaper.<br />\nAs you can see, no magic will happen here neither:</p>\n\n<pre><code>public PAPER UpdatePaper(PAPER p)\n{\n    p.ChangePaperOnDb(); //Simple static DAL-Accessor, works fine\n\n    return p; //The Client should get any changes made by other users so far, that's why I'll give the obj back... or if it's a new obj and it has an ID now\n}\n</code></pre>\n\n<p>As I said, my first Update works fine, but as soon as I trigger the update-routine again, I'll get this error which I mentioned above.</p>\n\n<p>After spending some time with my good mate google, I found only an approach where they changed the .NET-Version from 4.0 to 3.5.\nBut I don't know if that would for me as I can't change the runtime from 4.0 to 3.5.</p>\n\n<p>If anyone has any clue what's going on - please let me know.\nThank you very much!</p>\n"},{"tags":["wcf","configuration"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":7099,"score":2,"question_id":1086478,"title":"WCF ports configuration error","body":"<p>I have two services, configured via a config file. Each of them listens to one http and one https address. The problem is how to configure the ports. If I configure the http ports to the same value and the https ports to another value, when debugging the whole project I get the following error message in WCF Service Host:</p>\n\n<blockquote>\n  <p>Status: Error\n  System.ServiceModel.AddressAlreadyInUseException:\n  HTTP could not register URL\n  https://+:8002/Services/xxxService/\n  because TCP port 8002 is being used by\n  another application. --->\n  System.Net.HttpListenerException: The\n  process cannot access the file because\n  it is being used by another process</p>\n</blockquote>\n\n<p>If I configure the four ports (http and https) to have different values and none of the https values is the value of the ssl port configured and certified in IIS, I get the following exception on service call (but both services are started in the WCF Service Host):</p>\n\n<blockquote>\n  <p>An error occurred while making the\n  HTTP request to\n  https://localhost:8000/Services/yyyService/.\n  This could be due to the fact that the\n  server certificate is not configured\n  properly with HTTP.SYS in the HTTPS\n  case. This could also be caused by a\n  mismatch of the security binding\n  between the client and the server.</p>\n</blockquote>\n\n<p>If I configure the first service to use the SSL port (443), then only the second service is started (the one with the \"wrong\" https port). The error message for the first service again is:</p>\n\n<blockquote>\n  <p>System.ServiceModel.AddressAlreadyInUseException:\n  HTTP could not register URL\n  https://+:443/Services/xxxService/\n  because TCP port 443 is being used by\n  another application. --->\n  System.Net.HttpListenerException: The\n  process cannot access the file because\n  it is being used by another process</p>\n</blockquote>\n\n<p>On top of that, I get an exception, when calling the second service:</p>\n\n<blockquote>\n  <p>An error occurred while making the\n  HTTP request to\n  https://localhost/Services/yyyService/.\n  This could be due to the fact that the\n  server certificate is not configured\n  properly with HTTP.SYS in the HTTPS\n  case. This could also be caused by a\n  mismatch of the security binding\n  between the client and the server.</p>\n</blockquote>\n\n<p>When I configure both services to use 443 for https, well... then nothing gets started. And I get all kinds of strange exceptions - clientcredentials is readonly, the handshake encountered an unexpected packet format, something about remote address and so on.</p>\n\n<p>I have configured both addresses in the web.config as follows:</p>\n\n<pre><code>&lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:port1/Services/xxxService/\"   /&gt;\n            &lt;add baseAddress=\"https://localhost:port2/Services/xxxService/\"   /&gt;\n          &lt;/baseAddresses&gt;\n\n[...]\n\n&lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:port3/Services/yyyService/\"   /&gt;\n            &lt;add baseAddress=\"https://localhost:port4/Services/yyyService/\"   /&gt;\n          &lt;/baseAddresses&gt;\n</code></pre>\n\n<p>I have been trying to run this thing for two days now, so any helf would be appreciated.</p>\n\n<p>PS. In Visual Studio I have configured IIS as a development server, instead of the in-build visual studio web development server.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code> &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n\n    &lt;services&gt;\n      &lt;service name=\"namespace.xxxService\"\n               behaviorConfiguration=\"default\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8000/Services/xxxService/\"   /&gt;\n            &lt;add baseAddress=\"https://localhost:8001/Services/xxxService/\"   /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"\"\n                  binding=\"wsHttpBinding\"\n                  bindingConfiguration=\"defaultWsHttpBinding\"\n                  contract=\"namespace.IxxxService\" /&gt;\n\n        &lt;endpoint address=\"mex/\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\"\n                  bindingConfiguration=\"\" /&gt;\n      &lt;/service&gt;\n      &lt;service name=\"namespace.yyyService\" behaviorConfiguration=\"default\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8003/Services/yyyService/\" /&gt;\n            &lt;add baseAddress=\"https://localhost:8004/Services/yyyService/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"\"\n                  binding=\"wsHttpBinding\"\n                  bindingConfiguration=\"defaultWsHttpBinding\"\n                  contract=\"namespace.IyyyService\" /&gt;\n\n        &lt;endpoint address=\"mex/\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;client&gt;\n&lt;endpoint address=\"https://localhost:8001/Services/xxxService/\"\n          binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_IxxxService\"\n          contract=\"namespace.IxxxService\" name=\"WSHttpBinding_IxxxService\" /&gt;\n      &lt;endpoint address=\"https://localhost:8001/Services/yyyService/\"\n          binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_IyyyService\"\n          contract=\"namespace.IyyyService\" name=\"WSHttpBinding_IyyyService\" /&gt;\n\n    &lt;/client&gt;\n\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"default\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n\n          &lt;serviceCredentials&gt;\n            &lt;userNameAuthentication userNamePasswordValidationMode=\"MembershipProvider\"\n                                    membershipProviderName=\"SqlMembershipProvider\" /&gt;\n          &lt;/serviceCredentials&gt;\n\n          &lt;serviceAuthorization principalPermissionMode=\"UseAspNetRoles\"\n                                roleProviderName=\"SqlRoleProvider\" /&gt;\n\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;bindings&gt;\n\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"defaultWsHttpBinding\"&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;message clientCredentialType=\"UserName\" /&gt;\n            &lt;transport clientCredentialType=\"None\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n\n        &lt;binding name=\"WSHttpBinding_IyyyService\" closeTimeout=\"00:01:00\"\n                      openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                      bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                      maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                      messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                      allowCookies=\"false\" &gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n              enabled=\"false\" /&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" negotiateServiceCredential=\"true\"\n                algorithmSuite=\"Default\" establishSecurityContext=\"true\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"WSHttpBinding_IxxxService\" closeTimeout=\"00:01:00\"\n            openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n            bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n            allowCookies=\"false\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n              enabled=\"false\" /&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" negotiateServiceCredential=\"true\"\n                algorithmSuite=\"Default\" establishSecurityContext=\"true\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n\n    &lt;/bindings&gt;\n\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","wcf","svcutil.exe","fuslogvw","systrace"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13040675,"title":"SvcConfigEditor Could not load file or assembly or one of its dependencies","body":"<p>I am trying to create a web.config file to a WCF service using one dll that I have in the project. This dll has datacontract and dataservice objects. This dll is built using C++ CLI</p>\n\n<p>I can extract the proxy using svcutil but when I try to use the SvcConfigEditor it says :</p>\n\n<blockquote>\n  <p>Could not load file or assembly or one of its dependencies.</p>\n</blockquote>\n\n<p>Fuslogvw.exe and sxstrace.exe show no errors!</p>\n\n<p>Would it be any other method to find out what is happening?</p>\n"},{"tags":["asp.net","wcf","iis7","windows-server-2008-r2"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":8045,"score":5,"question_id":6368502,"title":"The configuration section 'system.servicemodel' cannot be read because it is missing a section declaration","body":"<p>I have somewhat of a problem.\nMy old webserver (windows 2003) have been replaced, with a 2008 R2. I have been given an admin account on it, and can do whatever I want, but I am no expert on this area.\nI configured the roles to have application developement and Web server (iis7).</p>\n\n<p>BUT, my website runs .NET4, and the role only installed 3.5.\nSo I have attempted to install .NET4 manually, on the server.\nMy problem is, my website will not work on it, due to the System.ServiceModel section in my web.config.\nI have made sure it runs in .NET4 application pool.</p>\n\n<p>I assume this is a WCF problem, but I can't grasp how to solve it. I have tried everything I found on google. \naspnet_regis, ServiceModelReg.exe and so on.\nI have even tried re-installing the webserver role, but I still get this error, everytime I try to enter the sites setup.</p>\n\n<p>I'm hoping there are some experts here, who know how to fix this.</p>\n"},{"tags":["wcf","security","mvc"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13038646,"title":"WCF as BLL (Middle Tier) and Security techniques","body":"<p>So bear with me, i am new at MVC and WCF. I already have a set of services (WCF) that exposes my BLL and I am trying to consume those from my MVC.net web application but i am unsure on how to perform security operations here.</p>\n\n<p>These are my app requirements:</p>\n\n<ul>\n<li>Be able to consume WCF services using different credentials for every user on the web application</li>\n<li>My BLL (WCF) needs to know what consumer is calling it (right now I only have the MVC app but i am planning to add iOS and Andriod calls to it, so later on i will add REST services to the WCF endpoints) Is there any design pattern for this out there? (or should i just use the soap header to include the caller ID? should i use some sort of caller secret or something?)</li>\n<li>I need a security mechanism like Tokens or something so I dont have to pass the username and password on every call of the service method (WCF)</li>\n</ul>\n\n<p>What i have so far:</p>\n\n<ul>\n<li>WCF uses a certificate and  and   with a custom username validator.</li>\n<li>I have manually coded proxies using the contract interfaces instead of generated proxies: But I hate the fact that i have to validate username and password every time a call is made to a WCF service. How in heaven can i use Tokens here? like to know if a given token sent on the soap header is valid or not yet expired? i have searched a lot and no tutorial/code/example is clear enough for me to actually start coding that ;(</li>\n<li>I am trying to cache the ChannelFactory but should I? i mean, i will need to cache a channer factory per logged in user per contract ;( is that ok? what can i do here?</li>\n</ul>\n\n<p>Thanks in advance!</p>\n"},{"tags":["wcf","azure","azure-web-roles","throughput"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":13027422,"title":"Why doesn't my azure hosted WCF service scale when I add more machines?","body":"<p>We have a WCF service which we are hosting on azure.  It takes some xml and processes it in memory (no external calls/db etc and it takes about 150ms) and returns some xml.</p>\n\n<p>We have been load testing it and when we run it on 1,2 and 4 core machines we can max out the processors and get around a max of 40 calls per second throughput (on the 4 core machine).  However when we switch to an 8 core machine or two 4 core machines we still only get around 40 calls per second.</p>\n\n<p>Why might I not be able to get more throughput when I scale up the number of machines doing the processing?  I would expect adding more machines would increase my throughput fairly linearly, but it doesn't.  Why not?</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12982026,"title":"Does WCF NetTcpBinding provide a persistent connection?","body":"<p>Making a client/server style app using WCF, but I can't find any documentation that explains if the NetTcpBinding provides a persistent connection? </p>\n\n<p>I would like my client to connect and remain connected to the server for weeks at a time. (Yes I know I need to handle disconnects etc..)</p>\n\n<p>Does the NetTcpBinding allow for a long connection such as this? If so is there anything I need to specify or is this default behaviour?</p>\n"},{"tags":["wcf","ado.net","entity-framework-5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13036849,"title":"Blank ADO.NET objects over WCF","body":"<p>I'm trying to expose objects created from an ADO.NET object (created from a database).</p>\n\n<p>When I try to return one of these objects from a service, all the object's fields are 0.</p>\n\n<p>Here is the service contract:</p>\n\n<pre><code>[ServiceContract(Namespace=\"http://www.thatindigogirl.com/samples/2006/06\")]\npublic interface IMFileService\n{\n    [OperationContract]\n    File GetFile();\n}\n</code></pre>\n\n<p>Here is the type that implements the service contract:</p>\n\n<pre><code>public class MFileService : IMFileService\n{\n    public File GetFile()\n    {\n        using (FileEntities ctx = new FileEntities())\n        {\n            File aFile = (from f in ctx.Files\n                          where f.ID == 5\n                          select f).FirstOrDefault();       // No connection string named 'FileEntities' could be found in the application config file.\n            return aFile;\n        }\n    }\n}\n</code></pre>\n\n<p>Here is my client code:</p>\n\n<pre><code>    EndpointAddress ep = new EndpointAddress(\"http://localhost:8000/MFileService/MFileService\");\n\n    IMFileService proxy = ChannelFactory&lt;IMFileService&gt;.CreateChannel(new BasicHttpBinding(), ep);\n    File f = proxy.GetFile();\n    Console.WriteLine(\"File info: \" + f.Name + \", \" + f.ID + \", \" + f.ParentDirectory + \", \" + f.Size);\n    Console.ReadLine();\n</code></pre>\n\n<p>I'm not sure why fiddler doesn't see the request to the database, the response, or the message from the host to the client.</p>\n\n<p>Is something like this even allowed with ADO.NET objects? Or do I have to create my own class and put the ADO.NET object data into it first before I send it over the wire?</p>\n"},{"tags":["wcf","silverlight"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13036389,"title":"ObservableCollections are no longer returned when I update my service reference","body":"<p>I have a Silverlight 5 app. This app has been in development for 18 months. This app calls back to a WCF service. I just had a support request.</p>\n\n<p>Before today, the service would return <code>ObservableCollection&lt;T&gt;</code> results. However, now all of the sudden, out-of-the-middle of nowhere, it starts returning <code>T[]</code> results after I updated the service reference in the Silverlight app. </p>\n\n<p>My question is, what could have happened that would cause this change? This has caused approximately 70 errors due to type conflicts. Am I overlooking a basic setting?</p>\n\n<p>Thank you!</p>\n"},{"tags":["c#","wcf","timer","synchronization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13035929,"title":"How do I Synchronize Timer.Elapsed with my WCF service?","body":"<pre><code>[ServiceBehavior(InstanceContextMode.PerSession,\n    UseSynchronizationContext=false,\n    ConcurrencyMode = ConcurrencyMode.Single)]\nclass IMyService : IMyService\n{\n    System.Timers.Timer timer;\n    ....\n\n    void timer_Elapsed(object sender, ElapsedEventArgs e)\n    {\n        // I want to arrive here on the service thread\n    }\n}\n</code></pre>\n\n<p>The parameters for my service are as above.</p>\n\n<p>I am using a System.Timers.Timer within some service state object and I want the Timer.Elapsed event to fire back on the service thread. With a SynchronizationContext I can achieve this with this method:</p>\n\n<pre><code>context.Post(SendOrPostCallback callback, object state)\n</code></pre>\n\n<p>I can put that inside the Timer.Elapsed event and callback will be called on the service thread which is what I want.</p>\n\n<p>Without SynchronizationContext I apparently need to set Timer.SynchronizingObject with an ISynchronizeInvoke object so that elapsed events are marshalled accordingly. But where do I get the ISynchronizeInvoke object from in a WCF service? Does it have one?</p>\n"},{"tags":["xml","wcf","web-services","soap","php-soapclient"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13035802,"title":"Soapclient with Certificate and basic Authentication to DotNet WebService","body":"<p>My mission is to develop a client to a third party's webservice, which server machine and source codes I can't access or handle. All I have is the API specifications and the addresses.\nThe program works fine on DevelopEnvironment without authentication, but at ProductionEnvironment it requires basic http authentication plus certificate, and then I can't even receive any answer.\nThey said me that I could use a self-signed certificate, so I've created one in my Server ( CentOS Apache2+PHP5.3.3 ).</p>\n\n<p>The company sent me a functional DotNetServiceClient piece of code, which includes the app.config which link follows bellow.</p>\n\n<p>I need some example of how to send this authentication and more the certificate in PHP SoapClient or CURL.</p>\n\n<p>Here is the C# application's app.config, with fake IP and certificate:\n<a href=\"http://pastebin.com/Jt9k6DB0\" rel=\"nofollow\">http://pastebin.com/Jt9k6DB0</a></p>\n\n<p>And here is my current client code:\n/* PHP WebService Client */</p>\n\n<pre><code>$connectionParameters = array(\n'login' =&gt; 'login'\n,'password' =&gt; 'password'\n,'trace' =&gt; TRUE\n,'encoding' =&gt; 'UTF-8'\n,'exceptions' =&gt; TRUE\n,'cache_wsdl' =&gt; WSDL_CACHE_NONE\n,'soap_version' =&gt; SOAP_1_2\n,'local_cert' =&gt;        file_get_contents('/my/certificate/directory/selfsignedcertificate/thatwebservice.pem')\n,'passphrase' =&gt; 'd3e343der434wds'\n);\n$theClient = new SoapClient($serverWSDLURL, $connectionParameters);\n$r = $theClient-&gt;GetBasicWorkData();\n</code></pre>\n\n<p>The answer: No answer! Only timeOut.</p>\n\n<p>I've adapted the information taken from these two StackOverflow topics:\n<a href=\"http://stackoverflow.com/questions/3346039/how-to-use-php5-soapclientsoapclient-with-client-certificate\">How to use PHP5 SoapClient::SoapClient() with client certificate?</a>\nand\n<a href=\"http://stackoverflow.com/questions/11187646/soapclient-not-sending-certificate\">SoapClient not sending certificate</a>\nBut without results.</p>\n\n<p>Any example or tip about what am I doing wrong?</p>\n\n<p>Thank you very much.</p>\n"},{"tags":["wcf","timeout","n-tier-architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12954680,"title":"Change timeout for each WCF method or call","body":"<p>I have a quite large \"old\" WCF Service with many different methods.</p>\n\n<p>The most of these methods are \"normal\" so they should answer in less than 10 seconds but there are several methods (8 or 9) that are long processes so they can take a long time to get a response.</p>\n\n<p>The receivetimeout and sendtimeout were set to 00:40:00 to ensure they had time enought to accomplish these processes.</p>\n\n<p>The problem is sometimes we have connection issues and the \"normal\" methods take a really long time to crash...</p>\n\n<p>They are all in the same service because they use a really big model and they wanted to reuse the model from the service in every call (not having a PersonsService.User and a RobotsService.User... because they are the same class in different services).</p>\n\n<p>The first solution I imagine is to make a different Service with those long processes and set a short timeout to the normal service... but I should have to make a lot of changes because of Model use...</p>\n\n<p>Is there any way to set a different timeout in each call? Or by service method? Should I chunk the Service anyway?</p>\n\n<p>Thanks in advance!!</p>\n"},{"tags":[".net","xml","wcf","attributes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13026155,"title":"How manually serialize objects uses wcf display name attribute?","body":"<p>My WCF webservice must return xml file for download, for that functionality i need serialize list of objects from one class. Here that class definition:</p>\n\n<pre><code>[DataContract]\n    public class ReportItemDriversPerAffiliate : IReportItemDriversPerAffiliate\n    {\n        [DataMember(Name = \"affiliate_name\")]\n        public string AffiliateName { get; set; }\n\n        [DataMember(Name = \"affiliate_city\")]\n        public string AffiliateCity { get; set; }\n\n        [DataMember(Name = \"affiliate_state\")]\n        public string AffiliateState { get; set; }\n\n        [DataMember(Name = \"drivers_count\")]\n        public int DriversCount { get; set; }\n    }\n</code></pre>\n\n<p>And for this functionality i use this code:</p>\n\n<pre><code>var totalDriversPerAffiliate = _glManager.GetTotalDriversPerAffiliate&lt;ReportItemDriversPerAffiliate&gt;();\n\n            XmlSerializer ser = new XmlSerializer(totalDriversPerAffiliate.GetType());\n\n            MemoryStream ms = new MemoryStream();\n            ser.Serialize(ms, totalDriversPerAffiliate);\n            ms.Position = 0;\n\n            StreamReader r = new StreamReader(ms);\n            string res = r.ReadToEnd();\n\n            var context = System.ServiceModel.Web.WebOperationContext.Current.OutgoingResponse;\n            context.Headers.Add(\"Content-Disposition\", \"attachment; filename=TotalDriversPerAffiliate.xml\");\n            context.ContentType = \"application/txt\";\n\n            byte[] resultBytes = Encoding.UTF8.GetBytes(res);\n            return new MemoryStream(resultBytes);\n</code></pre>\n\n<p>But, in response file i have fields in xml which have values of class properties, not values of WCF display name attributes(have \"AffiliateName\", want \"affiliate_name\"), how i can manually serialize this class and have fields in xml like display name attribute of class? And, i don't want adding additional xml attributes to this class and i don't want create separate method in webservice which return this data as xml response.</p>\n"},{"tags":["wcf","workflow-activity"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12898357,"title":"create custom workflows through the net","body":"<p>I have created a WPF rich application that allows users to create customs workflow activities (create, edit, save, run), which is working ok.</p>\n\n<p>I have also created a <strong>WPFBrowser application</strong> version, and I published it to a IIS web server. In IIS lies the problem, I just found some files: </p>\n\n<ul>\n<li>ApplicationName.exe: The executable assembly application file.</li>\n<li>ApplicationName.xbap: The deployment manifest.</li>\n<li>ApplicationName.exe.manifest: The application manifest.</li>\n</ul>\n\n<p>Is there a way to also hold my other project ressources on IIS (for example: icons, .cs classes, activity-designers, etc.)?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13028041,"title":"WCF failing when service is impleneted over HTTP AND HTTPS","body":"<pre><code>&lt;system.serviceModel&gt;\n&lt;services&gt;\n&lt;service name=\"foo\"&gt;\n&lt;endpoint address=\"\" behaviorConfiguration=\"testbehaviour\" binding=\"webHttpBinding\" contract=\"testcontact\" bindingConfiguration=\"webBinding\" /&gt;\n&lt;endpoint address=\"\" behaviorConfiguration=\"testbehaviour\" binding=\"webHttpBinding\" contract=\"testcontact\" bindingConfiguration=\"webBindingHttps\" /&gt;\n&lt;/service&gt;\n&lt;/services&gt;\n&lt;system.serviceModel&gt;\n</code></pre>\n\n<p>As shown in the the web.config extract above, on our windows server 2008 machines, we had one endpoint that could be reached over HTTP and HTTPS.</p>\n\n<p>I have just done an install of server 2012 (with iis8), and I now get the message \n\"Could not find a base address that matches scheme https for the endpoint with binding WebHttpBinding. Registered base address schemes are [http].\"</p>\n\n<p>The very odd thing is - if I comment one <code>endpoint</code> element out (leaving just one active endpoint left), then the remaining endpoint will work fine?</p>\n"},{"tags":["iphone","json","wcf","rest","http-post"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13033574,"title":"How to extract post parameters from iPhone client in wcf rest service?","body":"<p>I have a iPhone application consuming wcf RESTful service. Everything works fine if i use <code>GET</code> method. But when I use post method &amp; pass parameters in web service URL, <code>NSURL</code> is nil as i have some special characters in post parametres. So I used <code>stringByAddingPercentEscapesUsingEncoding</code> to construct url. But now at server side url is not recognized and it's not been able to map to proper method in web service template.</p>\n\n<ol>\n<li>Is there any solution to this? </li>\n<li>If i pass post parameters as HTTPBody &amp; not in <code>NSURL</code> itself then how\nto handle it at server side in ASP.net. (Note it is wcf restful web-service).</li>\n<li>Is there any other way to using <code>stringByAddingPercentEscapesUsingEncoding</code></li>\n</ol>\n"},{"tags":[".net","wcf","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":497,"score":2,"question_id":920412,"title":"Test project and config file","body":"<p>I have this kind of setup in my Visual Studio 2008 solution: One WCF service project (WCFService) which uses library (Lib1, which requires some configuration entries in app.config file). I have a unit test project (MSTest) which contains tests related to Lib1. In order to run those tests, I need a config file in test project. Is there any way to load it automatically from WCFService, so I do not need to change config entries on two places?</p>\n"},{"tags":["javascript","asp.net","ajax","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13031510,"title":"problems when I call a WCF webservice from AJAX","body":"<p>I have a Web Application.In this application I add an AJAX enabled WCF service .The calss name is PricingService and the code is below:</p>\n\n<pre><code>namespace PricingService\n{\n[ServiceContract(Namespace = \"PricingService\")]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class PricingService\n{\n\n    [OperationContract]\n    [WebInvoke]\n    public double CalculatePrice(string itemId, string shipToPostalCode)\n    {\n        double price;\n        price = 45;\n        price = price * 1.06;\n        return price;\n\n    }\n\n}\n}\n</code></pre>\n\n<p>I want to call this service from AJAX ,from a web site in ASP.net.\nIn default.aspx page I add this code:</p>\n\n<pre><code> &lt;body&gt;\n&lt;form id=\"form1\" runat=\"server\"&gt;\n&lt;div&gt;\n\n    &lt;asp:ScriptManager ID=\"ScriptManager1\" runat=\"server\"&gt;\n    &lt;Services&gt;\n    &lt;asp:ServiceReference Path=\"http://localhost:49340/PricingService.svc\" /&gt;\n    &lt;/Services&gt;\n    &lt;/asp:ScriptManager&gt;\n\n    Product: &lt;br /&gt;\n    &lt;asp:TextBox ID=\"txtProduct\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n    &lt;br /&gt;\n    Ship to (Postal code ):&lt;br /&gt;\n    &lt;asp:TextBox ID=\"txtPostCode\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;input id=\"ButtonCalculate\" type=\"button\" value=\"Get Price\" onclick=\"buttonCalculate_onClick()\"/&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;asp:Label ID=\"LabelPrice\" runat=\"server\" Text=\"Label\"&gt;&lt;/asp:Label&gt;\n\n\n&lt;/div&gt;\n\n&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\n    function buttonCalculate_onClick() {\n        var service = new PricingService.PricingService();\n        service.CalculatePrice(document.form[0].txtProduct.value,document.form[0].txtPostCode.value,onSucces,onFail,null);\n\n    }\n\n    function onSuccess(result) {\n        LabelPrice.innerText = result;\n    }\n\n    function onFail(result) {\n        alert(result);\n    }\n\n&lt;/script&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>When i click the button i receive the message : The 'PricingService' is undefined\nCan somebody tell me what's the problem?\nThe web site and wcf service are in the same project called 'WcfServiceApplication'\nThanks!</p>\n"},{"tags":["wcf","serialization","datacontractserializer"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1360,"score":3,"question_id":2329464,"title":"WCF - probem with serializing inherited types","body":"<p>I have these classes:</p>\n\n<pre><code>[DataContract]\npublic class ErrorBase {}\n\n[DataContract]\npublic class FileMissingError: ErrorBase {}\n\n[DataContract]\npublic class ResponseFileInquiry\n{\n  [DataMember]\n  public List&lt;ErrorBase&gt; errors {get;set;};\n}\n</code></pre>\n\n<p>An instance of the class ResponseFileInquiry is what my service method returns to the client. Now, if I fill ResponseFileInquiry.errors with instances of ErrorBase, everything works fine, but if I add an instance of inherited type FileMissingError, I get a service side exception during serialization:</p>\n\n<pre><code>Type 'MyNamespace.FileMissingError' with data contract name 'FileMissingError' \nis not expected. Add any types not known statically to the list of known types - \nfor example, by using the KnownTypeAttribute attribute or by adding them to the \nlist of known types passed to DataContractSerializer.'\n</code></pre>\n\n<p>So serializer is getting confused because it's expecting the List to contain the declared type objects (ErrorBase) but it's getting inherited type (FileMissingError) objects.</p>\n\n<p>I have the whole bunch of error types and the List will contain combinations of them, so what can I do to make it work???</p>\n"},{"tags":[".net","wcf","dynamics-crm-2011","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":12388371,"title":"Remote endpoint has failed - happens randomly","body":"<p>We have a setup with a website, which communicates using WCF to our Microsoft CRM 2011 solution. </p>\n\n<p>Users create new cases on our website, which are stored in the CRM solution. Using WCF, it calls CRM and stores the data.</p>\n\n<p>This works perfectly, but some few times a day the following error comes. We cannot find anything unique about these occurrences: Random users, random input, ect. There are nothing which seems unique for the users who get the error.</p>\n\n<p>We can see in our IIS event viewer the error happens ~3 times a day, depending on how many users we have online.</p>\n\n<p>Any ideas? What would be unique? Hints? Something? :-) Thanks!</p>\n\n<p><strong>The error</strong>:</p>\n\n<pre><code>Exception information: \n    Exception type: SecurityNegotiationException \n    Exception message: Secure channel cannot be opened because security negotiation with the remote endpoint has failed. This may be due to absent or incorrectly specified EndpointIdentity in the EndpointAddress used to create the channel. Please verify the EndpointIdentity specified or implied by the EndpointAddress correctly identifies the remote endpoint. \n\nServer stack trace: \n   at System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)\n   at System.ServiceModel.Security.SspiNegotiationTokenProvider.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Security.SymmetricSecurityProtocol.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.SecurityChannelFactory`1.ClientSecurityChannel`1.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)\n   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n</code></pre>\n\n<p><strong>Our setup:</strong></p>\n\n<p>We have 1 production website server and CRM server. There are no load balancer or anything else.</p>\n\n<p><strong>WCF binding</strong></p>\n\n<pre><code> &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;customBinding&gt;\n                &lt;binding name=\"CustomBinding_IOrganizationService\"&gt;\n                    &lt;security defaultAlgorithmSuite=\"Default\" authenticationMode=\"SspiNegotiated\"\n                        requireDerivedKeys=\"true\" securityHeaderLayout=\"Strict\" includeTimestamp=\"true\"\n                        keyEntropyMode=\"CombinedEntropy\" messageProtectionOrder=\"SignBeforeEncryptAndEncryptSignature\"\n                        messageSecurityVersion=\"WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10\"\n                        requireSecurityContextCancellation=\"true\" requireSignatureConfirmation=\"false\"&gt;\n                        &lt;localClientSettings cacheCookies=\"true\" detectReplays=\"true\"\n                            replayCacheSize=\"900000\" maxClockSkew=\"00:05:00\" maxCookieCachingTime=\"Infinite\"\n                            replayWindow=\"00:05:00\" sessionKeyRenewalInterval=\"10:00:00\"\n                            sessionKeyRolloverInterval=\"00:05:00\" reconnectTransportOnFailure=\"true\"\n                            timestampValidityDuration=\"00:05:00\" cookieRenewalThresholdPercentage=\"60\" /&gt;\n                        &lt;localServiceSettings detectReplays=\"true\" issuedCookieLifetime=\"10:00:00\"\n                            maxStatefulNegotiations=\"128\" replayCacheSize=\"900000\" maxClockSkew=\"00:05:00\"\n                            negotiationTimeout=\"00:01:00\" replayWindow=\"00:05:00\" inactivityTimeout=\"00:02:00\"\n                            sessionKeyRenewalInterval=\"15:00:00\" sessionKeyRolloverInterval=\"00:05:00\"\n                            reconnectTransportOnFailure=\"true\" maxPendingSessions=\"128\"\n                            maxCachedCookies=\"1000\" timestampValidityDuration=\"00:05:00\" /&gt;\n                        &lt;secureConversationBootstrap /&gt;\n                    &lt;/security&gt;\n                    &lt;textMessageEncoding maxReadPoolSize=\"64\" maxWritePoolSize=\"16\"\n                        messageVersion=\"Default\" writeEncoding=\"utf-8\"&gt;\n                        &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;/textMessageEncoding&gt;\n                    &lt;httpTransport manualAddressing=\"false\" maxBufferPoolSize=\"524288\"\n                        maxReceivedMessageSize=\"65536\" allowCookies=\"false\" authenticationScheme=\"Anonymous\"\n                        bypassProxyOnLocal=\"false\" decompressionEnabled=\"true\" hostNameComparisonMode=\"StrongWildcard\"\n                        keepAliveEnabled=\"true\" maxBufferSize=\"65536\" proxyAuthenticationScheme=\"Anonymous\"\n                        realm=\"\" transferMode=\"Buffered\" unsafeConnectionNtlmAuthentication=\"false\"\n                        useDefaultWebProxy=\"true\" /&gt;\n                &lt;/binding&gt;\n                &lt;binding name=\"CustomBinding_IOrganizationService1\"&gt;\n                    &lt;security defaultAlgorithmSuite=\"Default\" authenticationMode=\"SspiNegotiated\"\n                        requireDerivedKeys=\"true\" securityHeaderLayout=\"Strict\" includeTimestamp=\"true\"\n                        keyEntropyMode=\"CombinedEntropy\" messageProtectionOrder=\"SignBeforeEncryptAndEncryptSignature\"\n                        messageSecurityVersion=\"WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10\"\n                        requireSecurityContextCancellation=\"true\" requireSignatureConfirmation=\"false\"&gt;\n                        &lt;localClientSettings cacheCookies=\"true\" detectReplays=\"true\"\n                            replayCacheSize=\"900000\" maxClockSkew=\"00:05:00\" maxCookieCachingTime=\"Infinite\"\n                            replayWindow=\"00:05:00\" sessionKeyRenewalInterval=\"10:00:00\"\n                            sessionKeyRolloverInterval=\"00:05:00\" reconnectTransportOnFailure=\"true\"\n                            timestampValidityDuration=\"00:05:00\" cookieRenewalThresholdPercentage=\"60\" /&gt;\n                        &lt;localServiceSettings detectReplays=\"true\" issuedCookieLifetime=\"10:00:00\"\n                            maxStatefulNegotiations=\"128\" replayCacheSize=\"900000\" maxClockSkew=\"00:05:00\"\n                            negotiationTimeout=\"00:01:00\" replayWindow=\"00:05:00\" inactivityTimeout=\"00:02:00\"\n                            sessionKeyRenewalInterval=\"15:00:00\" sessionKeyRolloverInterval=\"00:05:00\"\n                            reconnectTransportOnFailure=\"true\" maxPendingSessions=\"128\"\n                            maxCachedCookies=\"1000\" timestampValidityDuration=\"00:05:00\" /&gt;\n                        &lt;secureConversationBootstrap /&gt;\n                    &lt;/security&gt;\n                    &lt;textMessageEncoding maxReadPoolSize=\"64\" maxWritePoolSize=\"16\"\n                        messageVersion=\"Default\" writeEncoding=\"utf-8\"&gt;\n                        &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;/textMessageEncoding&gt;\n                    &lt;httpTransport manualAddressing=\"false\" maxBufferPoolSize=\"524288\"\n                        maxReceivedMessageSize=\"65536\" allowCookies=\"false\" authenticationScheme=\"Anonymous\"\n                        bypassProxyOnLocal=\"false\" decompressionEnabled=\"true\" hostNameComparisonMode=\"StrongWildcard\"\n                        keepAliveEnabled=\"true\" maxBufferSize=\"65536\" proxyAuthenticationScheme=\"Anonymous\"\n                        realm=\"\" transferMode=\"Buffered\" unsafeConnectionNtlmAuthentication=\"false\"\n                        useDefaultWebProxy=\"true\" /&gt;\n                &lt;/binding&gt;\n            &lt;/customBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://OURDOMAIN/XRMServices/2011/Organization.svc\"\n                binding=\"customBinding\" bindingConfiguration=\"CustomBinding_IOrganizationService\"\n                contract=\"CRMService.IOrganizationService\" name=\"CustomBinding_IOrganizationService\"&gt;\n                &lt;identity&gt;\n                    &lt;servicePrincipalName value=\"host/OURDOMAIN\" /&gt;\n                &lt;/identity&gt;\n            &lt;/endpoint&gt;\n            &lt;endpoint address=\"http://OURDOMAIN/XRMServices/2011/Organization.svc\"\n                binding=\"customBinding\" bindingConfiguration=\"CustomBinding_IOrganizationService1\"\n                contract=\"XRMService.IOrganizationService\" name=\"CustomBinding_IOrganizationService1\"&gt;\n                &lt;identity&gt;\n                    &lt;servicePrincipalName value=\"host/OURDOMAIN\" /&gt;\n                &lt;/identity&gt;\n            &lt;/endpoint&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","wcf","serialization"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":225,"score":3,"question_id":7352795,"title":"Why isn't my invalid WCF message being logged?","body":"<p>I've got a WCF client communicating with a WCF service using <code>[DataContract]</code> types, and I'm getting a serialization error:</p>\n\n<blockquote>\n  <p>The formatter threw an exception while trying to deserialize the message: There was an error\n  while trying to deserialize parameter <a href=\"http://www.example.com/2007/09/Example:ExampleResult\" rel=\"nofollow\">http://www.example.com/2007/09/Example:ExampleResult</a>.\n  The InnerException message was 'Deserialized object with reference id 'i3' not found in\n  stream.'.  Please see InnerException for more details.</p>\n</blockquote>\n\n<p>Normally, I'd simply crank up the tracing and see exactly what happened, but in this case, I can't get the offending (response) message to appear in the log.</p>\n\n<p>My configuration looks like this:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    ... (more stuff)\n    &lt;diagnostics&gt;\n        &lt;messageLogging logEntireMessage=\"true\" logMalformedMessages=\"true\"\n        logMessagesAtServiceLevel=\"false\" logMessagesAtTransportLevel=\"true\"\n        maxMessagesToLog=\"10000\" maxSizeOfMessageToLog=\"81920000\" /&gt;\n    &lt;/diagnostics&gt;\n&lt;/system.serviceModel&gt;\n&lt;system.diagnostics&gt;\n    &lt;trace autoflush=\"true\" /&gt;\n    &lt;sources&gt;\n        &lt;source name=\"System.ServiceModel\" switchValue=\"Information, ActivityTracing\"\n          propagateActivity=\"true\"&gt;\n            &lt;listeners&gt;\n                &lt;add name=\"wcf_listener\" /&gt;\n            &lt;/listeners&gt;\n        &lt;/source&gt;\n        &lt;source name=\"System.ServiceModel.MessageLogging\"&gt;\n            &lt;listeners&gt;\n                &lt;add name=\"wcf_listener\" /&gt;\n            &lt;/listeners&gt;\n        &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;sharedListeners&gt;\n        &lt;add name=\"wcf_listener\" initializeData=\"tracelog.svclog\"\n          type=\"System.Diagnostics.XmlWriterTraceListener\" /&gt;\n    &lt;/sharedListeners&gt;\n&lt;/system.diagnostics&gt;\n</code></pre>\n\n<p>In the resulting log file, I get the outbound message logged, and then the exception logged. I never see the incoming message. What am I doing wrong here?</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13031140,"title":"What about using Encapsulation to handle WCF service inheritance issues?","body":"<p>This question is theoretical about programming and best practices in the context of <em>Microsoft WCF</em> with particular care to <em>Web Services</em>.</p>\n\n<h2>Inheritance in web services</h2>\n\n<p>Consider a situation when we have some functionalities to be defined. We want to expose these functionalities to the world using web services. The functionalities are modeled by interfaces (which is a very good practice when dealing with distributes systems and so on). So we have something like the following:</p>\n\n<pre><code>///\n/// Functionalities for a certain context, calling them A functionalities\n///\npublic interface IFunctionalitiesA {\n   FunctionalityA1ResMsg FunctionalityA1(FunctionalityA1ReqMsg msg);\n   FunctionalityA2ResMsg FunctionalityA2(FunctionalityA2ReqMsg msg);\n   FunctionalityA3ResMsg FunctionalityA3(FunctionalityA3ReqMsg msg);\n}\n\n///\n/// Functionalities for a certain context, calling them B functionalities\n///\npublic interface IFunctionalitiesB {\n   FunctionalityB1ResMsg FunctionalityB1(FunctionalityB1ReqMsg msg);\n   FunctionalityB2ResMsg FunctionalityB2(FunctionalityB2ReqMsg msg);\n}\n\n///\n/// Functionalities for a certain context, calling them C functionalities\n///\npublic interface IFunctionalitiesC {\n   FunctionalityC1ResMsg FunctionalityC1(FunctionalityC1ReqMsg msg);\n   FunctionalityC2ResMsg FunctionalityC2(FunctionalityC2ReqMsg msg);\n   FunctionalityC3ResMsg FunctionalityC3(FunctionalityC3ReqMsg msg);\n   FunctionalityC4ResMsg FunctionalityC4(FunctionalityC4ReqMsg msg);\n}\n\n///\n/// Functionalities for a certain context, calling them D functionalities\n///\npublic interface IFunctionalitiesD {\n   FunctionalityD1ResMsg FunctionalityD1(FunctionalityD1ReqMsg msg);\n   FunctionalityD2ResMsg FunctionalityD2(FunctionalityD2ReqMsg msg);\n}\n</code></pre>\n\n<p>Now let us consider that all these functionalities can be implemented by some services. But it is not mandatory to have a service to implement them all. A service can implement some of them and another service can implement another subset of those. In particular I am asking to consider the following situation:</p>\n\n<pre><code>///\n/// This service implements functionalities A and B.\n///\npublic class ServiceS1 : IFunctionalitiesA, IFunctionalitiesB {\n   ... /* Implementing interfaces methods */\n}\n\n///\n/// This service implements functionalities C and D.\n///\npublic class ServiceS2 : IFunctionalitiesC, IFunctionalitiesD {\n   ... /* Implementing interfaces methods */\n}\n</code></pre>\n\n<p>In particular please note that these two services will create, internally, some important stuff. I mean that they have resources that only them can access, for example the first service might keep an array of elements and so does the second. In few words, they are not dummy services, they have a state and resources and they are protected from external access (so they are declared as <code>public</code> or <code>protected</code>).</p>\n\n<p>Now let us consider that we want to implement a service, maybe to be run on a different station, that implements all functionalities. This service will behave exactly like the two presented above when dealing with the respective implemented methods. Unfortunately we cannot derive from both of them. So we need to do this:</p>\n\n<pre><code>public class GlobalService : \n   IFunctionalitiesA, IFunctionalitiesB, IFunctionalitiesC, IFunctionalitiesD {\n   ...\n}\n</code></pre>\n\n<h2>Encapsulation... can it be the answer?</h2>\n\n<p>The question is:</p>\n\n<blockquote>\n  <p>How to reuse the logic inside the two services implementing a subset\n  of the overall functionalities?</p>\n</blockquote>\n\n<p>I ended up thinking about doing something like this:</p>\n\n<pre><code>public class GlobalService : \n   IFunctionalitiesA, IFunctionalitiesB, IFunctionalitiesC, IFunctionalitiesD {\n\n   ///\n   /// Encapsulating ServiceS1\n   ///\n   protected ServiceS1 srvs1;\n\n   ///\n   /// Encapsulating ServiceS2\n   ///\n   protected ServiceS2 srvs2;\n\n   public GlobalService() {\n      this.srvs1 = new ServiceS1();\n      this.srvc2 = new ServiceS2();\n   }\n\n   ///\n   /// Methods are redirected internally to the reused implementation\n   /// This is to be done for all methods\n   ///\n   public FunctionalityA1ResMsg FunctionalityA1(FunctionalityA1ReqMsg msg) {\n      return thissrvs1.FunctionalityA1(msg);\n   }\n\n   ...\n\n}\n</code></pre>\n\n<p>By doing so I can reuse the implemented logic without creating redundant code again and again. Of course this can be an approach limited to some cases, but in these conditions (not so restrictive after all). </p>\n\n<p>Is this a good approach to solve the problem? Do you think differently? </p>\n"},{"tags":["wcf","soap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13005635,"title":"SOAP Response WCF Web service","body":"<p>I am working on a SOAP based Web Service. My question is if it is possible to create a SOAP response in the format below</p>\n\n<pre><code>&lt;tagname1&gt;\n&lt;tag1&gt; value1 &lt;/tag1&gt;\n&lt;tag1&gt; value2 &lt;/tag1&gt;\n&lt;/tagname1&gt;\n</code></pre>\n\n<p>Specifically my doubt is if i can return 2 different values (ie value1 and value2 ) within two different tags which have same tag-names (ie tag1)</p>\n\n<p>BTW i have created a class, and i am returning that class object as the response thus all fields of that class object appear as individual tags in the SOAP Response.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I found a partial solution. I have created an array element in my response class. I used the array element to store the list. When i returned the class object this was what i got - </p>\n\n<pre><code>&lt;tagname .... &gt;\n&lt;a:String&gt; value1 &lt;/a:String&gt;\n&lt;a:String&gt; value2 &lt;/a:String&gt;\n&lt;a:String&gt; value3 &lt;/a:String&gt;\n&lt;/tagname&gt;\n</code></pre>\n\n<p>any way i could replace \"a:long\" with an actual tagname ?</p>\n"},{"tags":["wcf","azure","biztalk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12310716,"title":"How to configure netMessagingBinding in BizTalk Server 2010","body":"<p>I have windows Azure SDK 1.6, BizTalk Server 2010 and Windows EAI SDK April 2012 CTP installed. </p>\n\n<p>While creating a receive location with WCF-Custom adapter I have to use netMessagingBinding, which dont appear in the binding type list of <code>WCF-Custom</code> Transport properties. </p>\n\n<p>I have added following sections in machine.config file under Microsoft.Net Framework 4.0.30319</p>\n\n<p>Under bindingExtensions </p>\n\n<pre><code>&lt;add name=\"netMessagingBinding\" \n     type=\"Microsoft.ServiceBus.Messaging.Configuration.NetMessagingBindingCollectionElement, \n    Microsoft.ServiceBus, Version=1.6.0.0, Culture=neutral, \n    PublicKeyToken=31bf3856ad364e35\"/&gt;\n</code></pre>\n\n<p>Under bindingElementsExtension</p>\n\n<pre><code>&lt;add name=\"netMessagingTransport\" \n    type=\"Microsoft.ServiceBus.Messaging.Configuration.NetMessagingTransportExtensionElement, \n    Microsoft.ServiceBus, Version=1.6.0.0, Culture=neutral, \n    PublicKeyToken=31bf3856ad364e35\"/&gt;\n</code></pre>\n\n<p>What else am I missing that binding type is still not appearing?</p>\n"},{"tags":["wcf","service","reporting-services","rdl","multivalue"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":33,"score":0,"question_id":13027406,"title":"Not able to pass multi value parameters from WCF to SSRS/RDL","body":"<p>I am passing one multi value paramter to RDL for one wcf service but I am getting the error of formatizing deserializer element expecting state, namesapce. please help how to resolve?</p>\n"},{"tags":["c#","wcf","serialization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3520,"score":0,"question_id":8818791,"title":"Error in deserializing body of reply message for operation","body":"<p>I'm writing console WCF-client for one WCF-WebService. When calling the service I get an error in deserializing body of request:</p>\n\n<blockquote>\n  <p>Error in deserializing body of reply message for operation 'GetProfiles'</p>\n</blockquote>\n\n<p>Agent Code:</p>\n\n<pre><code>string  userLogin = \"root\", userPassword = \"root\";\nstring ipaddress = \"192.168.137.164\";\n\nHttpTransportBindingElement httpTransportBindingElement = new    HttpTransportBindingElement();\nhttpTransportBindingElement.AuthenticationScheme = AuthenticationSchemes.Digest;\nhttpTransportBindingElement.KeepAliveEnabled = false;\nhttpTransportBindingElement.MaxBufferSize = int.MaxValue;\nhttpTransportBindingElement.MaxBufferPoolSize = int.MaxValue;\nhttpTransportBindingElement.MaxReceivedMessageSize = int.MaxValue;\n\nTextMessageEncodingBindingElement textMessageEncodingBindingElement = new TextMessageEncodingBindingElement();\ntextMessageEncodingBindingElement.MaxReadPoolSize = int.MaxValue;\ntextMessageEncodingBindingElement.MaxWritePoolSize = int.MaxValue;\ntextMessageEncodingBindingElement.ReaderQuotas.MaxDepth = 64;\ntextMessageEncodingBindingElement.ReaderQuotas.MaxBytesPerRead = int.MaxValue;\ntextMessageEncodingBindingElement.ReaderQuotas.MaxArrayLength = int.MaxValue;\ntextMessageEncodingBindingElement.ReaderQuotas.MaxNameTableCharCount = int.MaxValue;\ntextMessageEncodingBindingElement.ReaderQuotas.MaxStringContentLength = int.MaxValue;\n\n\nCustomBinding binding = new CustomBinding(textMessageEncodingBindingElement, httpTransportBindingElement);\n\nEndpointAddress MediaEndPointAddress = new EndpointAddress(\"http://\" + ipaddress + \":80/onvif/services\");\n\nMediaClient mediaClient = new MediaClient(binding, MediaEndPointAddress);\nmediaClient.ClientCredentials.UserName.UserName = userLogin;\nmediaClient.ClientCredentials.UserName.Password = userPassword;\n\nProfile[] profiles = mediaClient.GetProfiles(); // throw excpetion\n</code></pre>\n\n<p>I have already watched the requests and responses with a sniffer and it's OK! The WebService has sent '200 OK'. If I have a small response from the WebService, there won't be any errors and exceptions! I haven't got WebService code. What should I do?</p>\n\n<p>Stack trace:</p>\n\n<pre><code>&lt;E2ETraceEvent xmlns=\"http://schemas.microsoft.com/2004/06/E2ETraceEvent\"&gt;\n&lt;System xmlns=\"http://schemas.microsoft.com/2004/06/windows/eventlog/system\"&gt;\n&lt;EventID&gt;131075&lt;/EventID&gt;\n&lt;Type&gt;3&lt;/Type&gt;\n&lt;SubType Name=\"Error\"&gt;0&lt;/SubType&gt;\n&lt;Level&gt;2&lt;/Level&gt;\n&lt;TimeCreated SystemTime=\"2012-01-11T11:11:12.2185609Z\" /&gt;\n&lt;Source Name=\"System.ServiceModel\" /&gt;\n&lt;Correlation ActivityID=\"{550193ea-8569-40e6-b794-1a0eed69a1ba}\" /&gt;\n&lt;Execution ProcessName=\"TestingConsole.vshost\" ProcessID=\"6128\" ThreadID=\"9\" /&gt;\n&lt;Channel /&gt;\n&lt;Computer&gt;WS-LSH&lt;/Computer&gt;\n&lt;/System&gt;\n&lt;ApplicationData&gt;\n&lt;TraceData&gt;\n&lt;DataItem&gt;\n&lt;TraceRecord xmlns=\"http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord\"    Severity=\"Error\"&gt;\n&lt;TraceIdentifier&gt;http://msdn.microsoft.com/ru-RU/library/System.ServiceModel.Diagnostics.ThrowingException.aspx&lt;/TraceIdentifier&gt;\n&lt;Description&gt;Throwing an exception.&lt;/Description&gt;\n&lt;AppDomain&gt;TestingConsole.vshost.exe&lt;/AppDomain&gt;\n&lt;Exception&gt;\n&lt;ExceptionType&gt;System.ServiceModel.CommunicationException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/ExceptionType&gt;\n&lt;Message&gt;Error in deserializing body of reply message for operation 'GetProfiles'.    &lt;/Message&gt;\n&lt;StackTrace&gt;\nat System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, XmlSerializer serializer, MessagePartDescription returnPart, MessagePartDescriptionCollection bodyParts, Object[] parameters, Boolean isRequest)\nat System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)\nat System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)\nat System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)\nat System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc&amp;amp; rpc)\nat System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp;amp; rpc)\nat System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\nat System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\nat System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\nat System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;amp; msgData, Int32 type)\nat TestingConsole.Onvif.Media.Media.GetProfiles(GetProfilesRequest request)\nat TestingConsole.Onvif.Media.MediaClient.TestingConsole.Onvif.Media.Media.GetProfiles(GetProfilesRequest request)\nat TestingConsole.Onvif.Media.MediaClient.GetProfiles()\nat TestingConsole.Program.Main(String[] args)\nat System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)\nat System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)\nat Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\nat System.Threading.ThreadHelper.ThreadStart_Context(Object state)\nat System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)\nat System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\nat System.Threading.ThreadHelper.ThreadStart()\n&lt;/StackTrace&gt;\n&lt;ExceptionString&gt;System.ServiceModel.CommunicationException: Error in deserializing body of reply message for operation 'GetProfiles'. ---&amp;gt; System.InvalidOperationException: There is an error in XML document (2, 6287). ---&amp;gt; System.Xml.XmlException: The byte 0x03 is not valid at this location.  Line 2, position 6287.\n    at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, String res, String arg1, String arg2, String arg3)\n   at System.Xml.XmlExceptionHelper.ThrowInvalidXml(XmlDictionaryReader reader, Byte b)\n   at System.Xml.XmlUTF8TextReader.Read()\n   at System.Xml.XmlDictionaryReader.ReadString(Int32 maxStringContentLength)\n   at System.Xml.XmlDictionaryReader.ReadString()\n   at System.Xml.XmlBaseReader.ReadElementString()\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read59_VideoSourceConfiguration(Boolean isNullable, Boolean checkType)\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read150_Profile(Boolean isNullable, Boolean checkType)\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read224_GetProfilesResponse()\n   at Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer73.Deserialize(XmlSerializationReader reader)\n   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\n   --- End of inner exception stack trace ---\n   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\n   at System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, XmlSerializer serializer, MessagePartDescription returnPart, MessagePartDescriptionCollection bodyParts, Object[] parameters, Boolean isRequest)\n   --- End of inner exception stack trace ---&lt;/ExceptionString&gt;\n&lt;InnerException&gt;\n&lt;ExceptionType&gt;System.InvalidOperationException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/ExceptionType&gt;\n&lt;Message&gt;There is an error in XML document (2, 6287).&lt;/Message&gt;\n&lt;StackTrace&gt;\nat System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\nat     System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, XmlSerializer serializer, MessagePartDescription returnPart, MessagePartDescriptionCollection bodyParts, Object[] parameters, Boolean isRequest)\n&lt;/StackTrace&gt;\n&lt;ExceptionString&gt;System.InvalidOperationException: There is an error in XML document (2, 6287). ---&amp;gt; System.Xml.XmlException: The byte 0x03 is not valid at this location.  Line 2, position 6287.\n   at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, String res, String arg1, String arg2, String arg3)\n   at System.Xml.XmlExceptionHelper.ThrowInvalidXml(XmlDictionaryReader reader, Byte b)\n   at System.Xml.XmlUTF8TextReader.Read()\n   at System.Xml.XmlDictionaryReader.ReadString(Int32 maxStringContentLength)\n   at System.Xml.XmlDictionaryReader.ReadString()\n   at System.Xml.XmlBaseReader.ReadElementString()\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read59_VideoSourceConfiguration(Boolean isNullable, Boolean checkType)\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read150_Profile(Boolean isNullable, Boolean checkType)\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read224_GetProfilesResponse()\n   at Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer73.Deserialize(XmlSerializationReader reader)\n   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\n   --- End of inner exception stack trace ---\n   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\n   at System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, XmlSerializer serializer, MessagePartDescription returnPart, MessagePartDescriptionCollection bodyParts, Object[] parameters, Boolean isRequest)&lt;/ExceptionString&gt;\n&lt;InnerException&gt;\n&lt;ExceptionType&gt;System.Xml.XmlException, System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/ExceptionType&gt;\n&lt;Message&gt;The byte 0x03 is not valid at this location.  Line 2, position 6287.&lt;/Message&gt;\n&lt;StackTrace&gt;\nat System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, String     res, String arg1, String arg2, String arg3)\nat System.Xml.XmlExceptionHelper.ThrowInvalidXml(XmlDictionaryReader reader, Byte b)\nat System.Xml.XmlUTF8TextReader.Read()\nat System.Xml.XmlDictionaryReader.ReadString(Int32 maxStringContentLength)\nat System.Xml.XmlDictionaryReader.ReadString()\nat System.Xml.XmlBaseReader.ReadElementString()\nat Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read59_VideoSourceConfiguration(Boolean isNullable, Boolean checkType)\nat Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read150_Profile(Boolean isNullable, Boolean checkType)\nat Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read224_GetProfilesResponse()\nat Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer73.Deserialize(XmlSerializationReader reader)\nat System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)\n&lt;/StackTrace&gt;\n&lt;ExceptionString&gt;System.Xml.XmlException: The byte 0x03 is not valid at this location.  Line 2, position 6287.\n   at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, String res, String arg1, String arg2, String arg3)\n   at System.Xml.XmlExceptionHelper.ThrowInvalidXml(XmlDictionaryReader reader, Byte b)\n   at System.Xml.XmlUTF8TextReader.Read()\n   at System.Xml.XmlDictionaryReader.ReadString(Int32 maxStringContentLength)\n   at System.Xml.XmlDictionaryReader.ReadString()\n   at System.Xml.XmlBaseReader.ReadElementString()\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read59_VideoSourceConfiguration(Boolean isNullable, Boolean checkType)\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read150_Profile(Boolean isNullable, Boolean checkType)\n   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderMedia.Read224_GetProfilesResponse()\n   at Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer73.Deserialize(XmlSerializationReader reader)\n   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)&lt;/ExceptionString&gt;\n&lt;/InnerException&gt;\n&lt;/InnerException&gt;\n&lt;/Exception&gt;\n&lt;/TraceRecord&gt;\n&lt;/DataItem&gt;\n&lt;/TraceData&gt;\n&lt;/ApplicationData&gt;\n</code></pre>\n\n<p>I rewrite my code. Now I have got:</p>\n\n<pre><code>    string soapRequest = \"&lt;s:Envelope xmlns:s=\\\"http://www.w3.org/2003/05/soap-envelope\\\"&gt;\" +\n                                 \"&lt;s:Header&gt;\" +\n                                 \"&lt;/s:Header&gt;\" +\n                                 \"&lt;s:Body xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xsd=\\\"http://www.w3.org/2001/XMLSchema\\\"&gt;\" +\n                                 \"&lt;GetProfiles xmlns=\\\"http://www.onvif.org/ver10/media/wsdl\\\"/&gt;\" +\n                                 \"&lt;/s:Body&gt;\" +\n                                 \"&lt;/s:Envelope&gt;\";\n\n\nXmlReader envelopeReader = XmlReader.Create(new StringReader(soapRequest));\n\nMessage requestMsg = Message.CreateMessage(envelopeReader, int.MaxValue, MessageVersion.Soap12);\n\nMessage responseMsg = null;\n\nIChannelFactory&lt;IRequestChannel&gt; channelFactory = binding.BuildChannelFactory&lt;IRequestChannel&gt;();\nchannelFactory.Open();\n\nIRequestChannel channel = channelFactory.CreateChannel(MediaEndPointAddress);\nchannel.Open();\n\nresponseMsg = channel.Request(requestMsg);\nConsole.WriteLine(responseMsg.ToString());\n</code></pre>\n\n<p>The last string return message \"Error reading body: System.Xml.XmlException: '' contains invalid UTF8 bytes. ...}\".</p>\n\n<p>WebService sends non-ut8 bytes, but points \"UTF-8\" in header.\nWhat can I do?</p>\n\n<p>Reply Message Body</p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: gSOAP/2.7\nContent-Type: application/soap+xml; charset=utf-8\nContent-Length: 11591\nConnection: close\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n            &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://www.w3.org/2003/05/soap-envelope\"                         xmlns:SOAP-ENC=\"http://www.w3.org/2003/05/soap-encoding\"                        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"                       xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"                        xmlns:wsa5=\"http://www.w3.org/2005/08/addressing\"                       xmlns:xmime5=\"http://www.w3.org/2005/05/xmlmime\"                        xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\"                        xmlns:ter=\"http://www.onvif.org/ver10/error\"                        xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"                      xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"                      xmlns:c14n=\"http://www.w3.org/2001/10/xml-exc-c14n#\"                        xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"                       xmlns:tns1=\"http://www.onvif.org/ver10/topics\"                      xmlns:ns1=\"http://www.onvif.org/ver20/analytics/wsdl\"                       xmlns:ns2=\"http://www.onvif.org/ver10/schema\"                       xmlns:ns3=\"http://docs.oasis-open.org/wsn/b-2\"                      xmlns:ns4=\"http://docs.oasis-open.org/wsrf/bf-2\"                        xmlns:ns5=\"http://docs.oasis-open.org/wsn/t-1\"                      xmlns:ns6=\"http://www.onvif.org/ver10/device/wsdl\"                      xmlns:ns7=\"http://www.onvif.org/ver10/events/wsdl\"                      xmlns:ns9=\"http://docs.oasis-open.org/wsrf/r-2\"                         xmlns:ns10=\"http://www.onvif.org/ver10/imaging/wsdl\"                        xmlns:ns11=\"http://www.onvif.org/ver10/media/wsdl\"                      xmlns:ns12=\"http://www.onvif.org/ver20/ptz/wsdl\"                        xmlns:ns13=\"http://www.onvif.org/ver10/network/wsdl/\"                       xmlns:ns14=\"http://schemas.xmlsoap.org/ws/2005/04/discovery\"                        xmlns:ns16=\"http://www.onvif.org/ver10/analytics/wsdl/RuleEngineBinding\"                        xmlns:ns17=\"http://www.onvif.org/ver10/analytics/wsdl/AnalyticsEngineBinding\"                       xmlns:ns18=\"http://www.onvif.org/ver10/events/wsdl/PullPointSubscriptionBinding\"                        xmlns:ns19=\"http://www.onvif.org/ver10/events/wsdl/EventBinding\"                        xmlns:ns20=\"http://www.onvif.org/ver10/events/wsdl/SubscriptionManagerBinding\"                      xmlns:ns21=\"http://www.onvif.org/ver10/events/wsdl/NotificationProducerBinding\"                         xmlns:ns22=\"http://www.onvif.org/ver10/events/wsdl/NotificationConsumerBinding\"                         xmlns:ns23=\"http://www.onvif.org/ver10/events/wsdl/PullPointBinding\"                        xmlns:ns24=\"http://www.onvif.org/ver10/events/wsdl/CreatePullPointBinding\"                      xmlns:ns25=\"http://www.onvif.org/ver10/events/wsdl/PausableSubscriptionManagerBinding\"                      xmlns:ns26=\"http://www.onvif.org/ver10/network/wsdl/RemoteDiscoveryBinding\"                         xmlns:ns27=\"http://www.onvif.org/ver10/network/wsdl/DiscoveryLookupBinding\"                         xmlns:ns28=\"http://www.onvif.org/ver10/events/wsdl/EventPortType\"                       xmlns:ns29=\"http://www.3svision.com.tw/2009/event/topics\"&gt;                      &lt;SOAP-ENV:Header&gt;&lt;/SOAP-ENV:Header&gt;&lt;SOAP-ENV:Body&gt;&lt;ns11:GetProfilesResponse&gt;&lt;ns11:Profiles token=\"Main_h264\" fixed=\"true\"&gt;&lt;ns2:Name&gt;Main h264&lt;/ns2:Name&gt;&lt;ns2:VideoSourceConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;Bounds xmlns=\"http://www.onvif.org/ver10/schema\" height=\"720\" width=\"1280\" y=\"0\" x=\"0\"&gt;&lt;/Bounds&gt;&lt;/ns2:VideoSourceConfiguration&gt;&lt;ns2:AudioSourceConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;/ns2:AudioSourceConfiguration&gt;&lt;ns2:VideoEncoderConfiguration token=\"Main_h264\"&gt;&lt;ns2:Name&gt;Main h264&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;H264&lt;/ns2:Encoding&gt;&lt;ns2:Resolution&gt;&lt;ns2:Width&gt;1280&lt;/ns2:Width&gt;&lt;ns2:Height&gt;720&lt;/ns2:Height&gt;&lt;/ns2:Resolution&gt;&lt;ns2:Quality&gt;60&lt;/ns2:Quality&gt;&lt;ns2:RateControl&gt;&lt;ns2:FrameRateLimit&gt;30&lt;/ns2:FrameRateLimit&gt;&lt;ns2:EncodingInterval&gt;15&lt;/ns2:EncodingInterval&gt;&lt;ns2:BitrateLimit&gt;3072&lt;/ns2:BitrateLimit&gt;&lt;/ns2:RateControl&gt;&lt;ns2:H264&gt;&lt;ns2:GovLength&gt;0&lt;/ns2:GovLength&gt;&lt;ns2:H264Profile&gt;Baseline&lt;/ns2:H264Profile&gt;&lt;/ns2:H264&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:VideoEncoderConfiguration&gt;&lt;ns2:AudioEncoderConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;G711&lt;/ns2:Encoding&gt;&lt;ns2:Bitrate&gt;64000&lt;/ns2:Bitrate&gt;&lt;ns2:SampleRate&gt;8000&lt;/ns2:SampleRate&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:AudioEncoderConfiguration&gt;&lt;/ns11:Profiles&gt;&lt;ns11:Profiles token=\"Sub_h264\" fixed=\"true\"&gt;&lt;ns2:Name&gt;Sub h264&lt;/ns2:Name&gt;&lt;ns2:VideoSourceConfiguration token=\"1\"&gt;&lt;ns2:Name&gt;user1&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;Bounds xmlns=\"http://www.onvif.org/ver10/schema\" height=\"720\" width=\"1280\" y=\"0\" x=\"0\"&gt;&lt;/Bounds&gt;&lt;/ns2:VideoSourceConfiguration&gt;&lt;ns2:AudioSourceConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;/ns2:AudioSourceConfiguration&gt;&lt;ns2:VideoEncoderConfiguration token=\"Sub_h264\"&gt;&lt;ns2:Name&gt;Sub h264&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;H264&lt;/ns2:Encoding&gt;&lt;ns2:Resolution&gt;&lt;ns2:Width&gt;640&lt;/ns2:Width&gt;&lt;ns2:Height&gt;352&lt;/ns2:Height&gt;&lt;/ns2:Resolution&gt;&lt;ns2:Quality&gt;70&lt;/ns2:Quality&gt;&lt;ns2:RateControl&gt;&lt;ns2:FrameRateLimit&gt;30&lt;/ns2:FrameRateLimit&gt;&lt;ns2:EncodingInterval&gt;15&lt;/ns2:EncodingInterval&gt;&lt;ns2:BitrateLimit&gt;3072&lt;/ns2:BitrateLimit&gt;&lt;/ns2:RateControl&gt;&lt;ns2:H264&gt;&lt;ns2:GovLength&gt;0&lt;/ns2:GovLength&gt;&lt;ns2:H264Profile&gt;Baseline&lt;/ns2:H264Profile&gt;&lt;/ns2:H264&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:VideoEncoderConfiguration&gt;&lt;ns2:AudioEncoderConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;G711&lt;/ns2:Encoding&gt;&lt;ns2:Bitrate&gt;64000&lt;/ns2:Bitrate&gt;&lt;ns2:SampleRate&gt;8000&lt;/ns2:SampleRate&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:AudioEncoderConfiguration&gt;&lt;/ns11:Profiles&gt;&lt;ns11:Profiles token=\"Motion_jpeg\" fixed=\"true\"&gt;&lt;ns2:Name&gt;Motion jpeg&lt;/ns2:Name&gt;&lt;ns2:VideoSourceConfiguration token=\"2\"&gt;&lt;ns2:Name&gt;user2&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;Bounds xmlns=\"http://www.onvif.org/ver10/schema\" height=\"720\" width=\"1280\" y=\"0\" x=\"0\"&gt;&lt;/Bounds&gt;&lt;/ns2:VideoSourceConfiguration&gt;&lt;ns2:AudioSourceConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;/ns2:AudioSourceConfiguration&gt;&lt;ns2:VideoEncoderConfiguration token=\"Motion_jpeg\"&gt;&lt;ns2:Name&gt;Motion jpeg&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;JPEG&lt;/ns2:Encoding&gt;&lt;ns2:Resolution&gt;&lt;ns2:Width&gt;1280&lt;/ns2:Width&gt;&lt;ns2:Height&gt;720&lt;/ns2:Height&gt;&lt;/ns2:Resolution&gt;&lt;ns2:Quality&gt;70&lt;/ns2:Quality&gt;&lt;ns2:RateControl&gt;&lt;ns2:FrameRateLimit&gt;15&lt;/ns2:FrameRateLimit&gt;&lt;ns2:EncodingInterval&gt;15&lt;/ns2:EncodingInterval&gt;&lt;ns2:BitrateLimit&gt;3072&lt;/ns2:BitrateLimit&gt;&lt;/ns2:RateControl&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:VideoEncoderConfiguration&gt;&lt;ns2:AudioEncoderConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;G711&lt;/ns2:Encoding&gt;&lt;ns2:Bitrate&gt;64000&lt;/ns2:Bitrate&gt;&lt;ns2:SampleRate&gt;8000&lt;/ns2:SampleRate&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:AudioEncoderConfiguration&gt;&lt;/ns11:Profiles&gt;&lt;ns11:Profiles token=\"mc_test\" fixed=\"false\"&gt;&lt;ns2:Name&gt;mc_test&lt;/ns2:Name&gt;&lt;ns2:VideoSourceConfiguration token=\"2\"&gt;&lt;ns2:Name&gt;H&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;Bounds xmlns=\"http://www.onvif.org/ver10/schema\" height=\"720\" width=\"1280\" y=\"0\" x=\"0\"&gt;&lt;/Bounds&gt;&lt;/ns2:VideoSourceConfiguration&gt;&lt;ns2:AudioSourceConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;/ns2:AudioSourceConfiguration&gt;&lt;ns2:VideoEncoderConfiguration token=\"Motion_jpeg\"&gt;&lt;ns2:Name&gt;\n@\n@peg&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;JPEG&lt;/ns2:Encoding&gt;&lt;ns2:Resolution&gt;&lt;ns2:Width&gt;1280&lt;/ns2:Width&gt;&lt;ns2:Height&gt;720&lt;/ns2:Height&gt;&lt;/ns2:Resolution&gt;&lt;ns2:Quality&gt;70&lt;/ns2:Quality&gt;&lt;ns2:RateControl&gt;&lt;ns2:FrameRateLimit&gt;15&lt;/ns2:FrameRateLimit&gt;&lt;ns2:EncodingInterval&gt;15&lt;/ns2:EncodingInterval&gt;&lt;ns2:BitrateLimit&gt;3072&lt;/ns2:BitrateLimit&gt;&lt;/ns2:RateControl&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:VideoEncoderConfiguration&gt;&lt;ns2:AudioEncoderConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;G711&lt;/ns2:Encoding&gt;&lt;ns2:Bitrate&gt;64000&lt;/ns2:Bitrate&gt;&lt;ns2:SampleRate&gt;8000&lt;/ns2:SampleRate&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:AudioEncoderConfiguration&gt;&lt;/ns11:Profiles&gt;&lt;ns11:Profiles token=\"MACROSCOP\" fixed=\"false\"&gt;&lt;ns2:Name&gt;MACROSCOP&lt;/ns2:Name&gt;&lt;ns2:VideoSourceConfiguration token=\"2\"&gt;&lt;ns2:Name&gt;H&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;Bounds xmlns=\"http://www.onvif.org/ver10/schema\" height=\"720\" width=\"1280\" y=\"0\" x=\"0\"&gt;&lt;/Bounds&gt;&lt;/ns2:VideoSourceConfiguration&gt;&lt;ns2:AudioSourceConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:SourceToken&gt;0&lt;/ns2:SourceToken&gt;&lt;/ns2:AudioSourceConfiguration&gt;&lt;ns2:VideoEncoderConfiguration token=\"Motion_jpeg\"&gt;&lt;ns2:Name&gt;\n@\n@peg&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;JPEG&lt;/ns2:Encoding&gt;&lt;ns2:Resolution&gt;&lt;ns2:Width&gt;1280&lt;/ns2:Width&gt;&lt;ns2:Height&gt;720&lt;/ns2:Height&gt;&lt;/ns2:Resolution&gt;&lt;ns2:Quality&gt;70&lt;/ns2:Quality&gt;&lt;ns2:RateControl&gt;&lt;ns2:FrameRateLimit&gt;15&lt;/ns2:FrameRateLimit&gt;&lt;ns2:EncodingInterval&gt;15&lt;/ns2:EncodingInterval&gt;&lt;ns2:BitrateLimit&gt;3072&lt;/ns2:BitrateLimit&gt;&lt;/ns2:RateControl&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:VideoEncoderConfiguration&gt;&lt;ns2:AudioEncoderConfiguration token=\"0\"&gt;&lt;ns2:Name&gt;user0&lt;/ns2:Name&gt;&lt;ns2:UseCount&gt;0&lt;/ns2:UseCount&gt;&lt;ns2:Encoding&gt;G711&lt;/ns2:Encoding&gt;&lt;ns2:Bitrate&gt;64000&lt;/ns2:Bitrate&gt;&lt;ns2:SampleRate&gt;8000&lt;/ns2:SampleRate&gt;&lt;ns2:Multicast&gt;&lt;ns2:Address&gt;&lt;ns2:Type&gt;IPv4&lt;/ns2:Type&gt;&lt;ns2:IPv4Address&gt;0.0.0.0&lt;/ns2:IPv4Address&gt;&lt;/ns2:Address&gt;&lt;ns2:Port&gt;0&lt;/ns2:Port&gt;&lt;ns2:TTL&gt;5&lt;/ns2:TTL&gt;&lt;ns2:AutoStart&gt;false&lt;/ns2:AutoStart&gt;&lt;/ns2:Multicast&gt;&lt;ns2:SessionTimeout&gt;PT0S&lt;/ns2:SessionTimeout&gt;&lt;/ns2:AudioEncoderConfiguration&gt;&lt;/ns11:Profiles&gt;&lt;/ns11:GetProfilesResponse&gt;&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","winforms","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":719,"score":2,"question_id":8151415,"title":"How does the WCF service interact with my winform app?","body":"<p>I am currently developing a C# Windows Form Application that I intend to let it interact with a server. The server will receive posting from a mobile application that I have developed and whenever a posting is received, my Windows Form Application should be notified and give me a notification. In order to do this, I intend to use WCF duplex service for it.</p>\n\n<p>E.g. My mobile application sends an posting over to my server. Once my server reads and receives the new posting, the service should send a message over to my winform app to alert me that a posting is received. And the UI of the winform app should update accordingly to what I want to updated. (e.g. adding new panels)</p>\n\n<p>This is basically how I wish for it to work\nThey way this would work is</p>\n\n<ol>\n<li>WCF Service in running on my server</li>\n<li>Windows Form connects to my server's WCF service using Duplex Contract</li>\n<li>Mobile app posts to a webpage</li>\n<li>Once the webpage receives the posting, the asp.net will invoke the WCF service</li>\n<li>WCF duplex service receives the posting and sends the information to the winform app</li>\n<li>My winform Application aka WCF Client updates UI with this new message received</li>\n</ol>\n\n<p>My question is, how does step 4 proceed to step 5? To be specific, how does the service sends the information over to the winform app upon receiving the posting.</p>\n\n<p>To be even more specific, once the posting is received from the webpage, the service contract is invoked and the information is sent and received by the service, how does the service make use of the call back channel to send the information over to the winform app and update the UI accordingly?</p>\n"},{"tags":[".net","wcf","wcf-binding","endpoint"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":306,"score":0,"question_id":10138750,"title":"Could not find default endpoint element .NET 4.0","body":"<p>I've added a proxy to a webservice to a VS2010/.NET 4solution.  My machine is windows 7 OS. When constructing the client .NET throws this error:</p>\n\n<blockquote>\n  <p>Could not find endpoint element with name 'FulfilmentServicesSoap' and\n  contract 'FulfimentServiceSoap.FulfilmentServicesSoap' in the\n  ServiceModel client configuration section. This might be because no\n  configuration file was found for your application, or because no\n  endpoint element matching this name could be found in the client\n  element.</p>\n</blockquote>\n\n<p>I have found a simlar type question on SO here:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/352654/could-not-find-default-endpoint-element\">Could not find default endpoint element</a></p>\n\n<p>However reading through this and attempting some of the answers has not worked for me.  I have edited the app.config file a number of times including:</p>\n\n<p>contract=\"IFulfimentServiceSoap\" name=\"FulfilmentServicesSoap\" /></p>\n\n<p>and</p>\n\n<p>contract=\"FulfimentServiceSoap.FulfilmentServicesSoap\" name=\"FulfilmentServicesSoap\" /></p>\n\n<p>and</p>\n\n<p>contract=\"MYFullNamespace.FulfimentServiceSoap.FulfilmentServicesSoap\" name=\"FulfilmentServicesSoap\" /></p>\n\n<p>However in each case when I run my web service the event viewer show the contract 'FulfimentServiceSoap.FulfilmentServicesSoap' even when i have edited the config file.  Is there something else I must do to pick up the changes in the app.config file or has anyone any other ideas?</p>\n\n<p>EDIT - added binding info from app.config</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding name=\"FulfilmentServicesSoap\" closeTimeout=\"00:01:00\"\n                    openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                    allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                    messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                    useDefaultWebProxy=\"true\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;security mode=\"None\"&gt;\n                        &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                            realm=\"\" /&gt;\n                        &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://localhost/WLR3.Web.services/FulfilmentServices.asmx\"\n                binding=\"basicHttpBinding\" bindingConfiguration=\"FulfilmentServicesSoap\"\n               contract=\"FulfimentServiceSoap.FulfilmentServicesSoap\"name=\"FulfilmentServicesSoap\" /&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>EDIT - code where client is created.</p>\n\n<pre><code>FulfimentServiceSoap.FulfilmentServicesSoap fulfilmentServices = new FulfimentServiceSoap.FulfilmentServicesSoapClient(\"FulfilmentServicesSoap\");\n</code></pre>\n"},{"tags":["wcf","mocking","tdd","ninject","moq"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13027007,"title":"Unit testing, IoC, DI and mocking objects within a WCF service","body":"<p>I have a WCF service (INTWCF) that consumes another WCF service (EXTWCF). EXTWCF exposes 5 operations, will be hosted on an external app server (in a DMZ), and implements message and transport level security.</p>\n\n<p>INTWCF will be hosted on an internal app server, does not implement any security, hosts two individual services with approx 30 operations - a number of which are called by the operations on EXTWCF (along with various other domain level applications), depending on various parameters passed in (EXTWCF contains simple logic to determine which operations on INTWCF should be called).</p>\n\n<p>EXTWCF implements INTWCF using IoC and DI.</p>\n\n<p>Using TDD, I would like to write my initial <em>unit</em> tests for the operations exposed on EXTWCF. I would therefore like to mock up INTWCF using Moq. I would have thought that I should mock up and inject INTWCF in to the unit testing project, but I've read (in quite a few places) that IoC and DI should not be used during unit testing due to the additional testing dependencies they introduce.</p>\n\n<p>Am I being fed incorrect information, or is there another way to approach this problem? Is mocking appropriate for this situation? Seeing as though my unit tests will be accessing the operations on EXTWCF, they will not know about INTWCF. This seems to me to be a perfect case for DI?</p>\n\n<p>I'm using Ninject for IoC and DI; if DI is the answer, does Ninject provide a bootstrapper / plugins for unit testing? I'm not familiar with any, and don't see anything on their web page?</p>\n"},{"tags":["c#",".net","wcf","https","x509certificate2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13026993,"title":"Can one instance of X509Certificate2 be reused with multiple requests?","body":"<p>My code performs WCF requests over HTTPS. It creates an instance of <code>X509Certificate2</code> class and caches it to work around <a href=\"http://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/04e4e6a9-4904-4e3d-8b1a-81f606dd10e9/\" rel=\"nofollow\">this problem with temporary files leakage</a>. For each request an instance of <code>WebChannelFactory</code> is created and <code>WebChannelFactory.Credentials.ClientCertificate.Certificate</code> is assigned my cached certificate.</p>\n\n<p>Is this correct design? Can I reuse the same instance of <code>X509Certificate2</code> or it is obligatory to recreate it for each usage?</p>\n"},{"tags":[".net","wcf","sencha-touch","sencha-touch-2","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13016436,"title":"Can Sencha Touch consume JSON Schema definitions generated by JSON.NET?","body":"<p>We currently have a .NET WCF Web Service with JSON as the response and request format.  With every build, we generate and publish the JSON Schema files (via JSON.NET) for every entity that gets serialized/deserialized.</p>\n\n<p>If you've never seen JSON Schema files, they are in the following format:</p>\n\n<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"Id\": {\n      \"required\": true,\n      \"type\": \"integer\"\n    },\n    \"Name\": {\n      \"required\": true,\n      \"type\": [\n        \"string\",\n        \"null\"\n      ]\n    },\n    \"Email\": {\n      \"required\": true,\n      \"type\": [\n        \"string\",\n        \"null\"\n      ]\n    }\n  }\n}\n</code></pre>\n\n<p>Is there a way for Sencha Touch to easily consume these generated files and use them as a model?</p>\n"},{"tags":["c#","wcf","iis"],"answer_count":16,"favorite_count":9,"up_vote_count":34,"down_vote_count":0,"view_count":65079,"score":34,"question_id":720807,"title":"WCF, Service attribute value in the ServiceHost directive could not be found","body":"<p>I'm trying to host my service with IIS 6 but I keep get this exception.</p>\n\n<pre><code>    Server Error in '/WebServices' Application.\n--------------------------------------------------------------------------------\n\nThe type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found. \nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.InvalidOperationException: The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  \n\nStack Trace: \n\n\n[InvalidOperationException: The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found.]\n   System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +6714599\n   System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +604\n   System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +46\n   System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +654\n\n[ServiceActivationException: The service '/WebServices/dm/RecipientService.svc' cannot be activated due to an exception during compilation.  The exception message is: The type 'QS.DialogManager.Communication.IISHost.RecipientService', provided as the Service attribute value in the ServiceHost directive could not be found..]\n   System.ServiceModel.AsyncResult.End(IAsyncResult result) +15626880\n   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +15546921\n   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, Boolean flowContext) +265\n   System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +227\n   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +171\n\n\n\n\n--------------------------------------------------------------------------------\nVersion Information: Microsoft .NET Framework Version:2.0.50727.3082; ASP.NET Version:2.0.50727.3082\n</code></pre>\n\n<p>I have absolutely no clue except that it seems like it can't find my assemblies. The code should be correctly compiled with public classes.</p>\n\n<p>Here is my .svc file:</p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"QS.DialogManager.Communication.IISHost.RecipientService\" CodeBehind=\"RecipientService.svc.cs\" %&gt;\n</code></pre>\n\n<p>I have tried to create a very very simple service that contains just nothin too see if this would work but still the same old error shows up.</p>\n\n<pre><code>The type 'IISHost.Service1', provided as the Service attribute value in the ServiceHost directive could not be found.\n</code></pre>\n"},{"tags":["c#","wcf","wcf-security"],"answer_count":3,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":3278,"score":10,"question_id":2967804,"title":"How to use custom binding in WCF and keep message security mode with username client credentials?","body":"<p>I have WCF service accessible over Internet which uses wsHttpBinding with message security mode and username client credentials.</p>\n\n<pre><code>&lt;bindings&gt;\n    &lt;wsHttpBinding&gt;\n        &lt;binding name=\"wsHttpEndpointBinding\" messageEncoding=\"Mtom\" maxReceivedMessageSize=\"104857600\"&gt;\n           &lt;readerQuotas maxArrayLength=\"104857600\"/&gt;\n           &lt;security mode=\"Message\"&gt;\n            &lt;message clientCredentialType=\"UserName\"/&gt;\n           &lt;/security&gt;\n        &lt;/binding&gt;\n    &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n</code></pre>\n\n<p>I've figured out that it takes too much time to transfer my data from client to the server.\nI've read that i can use customBinding and binaryEncoding mode for my service.</p>\n\n<p>Like that: </p>\n\n<pre><code>&lt;bindings&gt;\n   &lt;customBindings&gt;\n     &lt;binding name=\"NetHttpBinding\"&gt;\n       &lt;binaryMessageEncoding /&gt;\n       &lt;httpTransport /&gt;\n     &lt;/binding&gt;\n  &lt;/customBindings&gt;\n&lt;bindings&gt;\n</code></pre>\n\n<p>But here is no any mention about message security mode and client credential type...</p>\n\n<p>How could i use custom binding with binaryEncoding and keep message security mode with username client credentials?</p>\n"},{"tags":["c#",".net","multithreading","wcf","thread-safety"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":95,"score":8,"question_id":13023310,"title":"Is WCF's DataContractSerilaizer thread safe?","body":"<p>I've been converting a fairly large system from Remoting to WCF and everything seems to be running well, except we frequently get the following exception: \"System.InvalidOperationException: Collection was modified; enumeration operation may not execute.\"  I haven't had any luck tracking it down because it only happens when there are hundreds of calls getting passed through, and I can only assume it's because an object is being modified as it's being serialized.  </p>\n\n<p>The classes all use: <code>[DataContract(IsReference=true)]</code>.  </p>\n\n<p>There were no similar exceptions when using remoting, so I'm wondering if anyone has had a similar problem in WCF or can let me know that it probably is the serializer -- in which case I assume I have to write my own serializers to perform <code>locks</code> where necessary (which is a big undertaking I'd prefer to avoid).</p>\n\n<p>The following is the stack trace:</p>\n\n<p><code>WCF Error:    at System.Collections.Generic.List1.Enumerator.MoveNextRare()\n   at WriteArrayOfLineToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\n   at WriteLineGroupToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\n   at WriteLineToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType)\n   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)\n   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)\n   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)\n   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)\n   at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest)\n   at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)\n   at System.ServiceModel.Channels.BodyWriter.WriteBodyContents(XmlDictionaryWriter writer)\n   at System.ServiceModel.Channels.BodyWriterMessage.OnWriteBodyContents(XmlDictionaryWriter writer)\n   at System.ServiceModel.Channels.Message.OnWriteMessage(XmlDictionaryWriter writer)\n   at System.ServiceModel.Channels.Message.WriteMessage(XmlDictionaryWriter writer)\n   at System.ServiceModel.Channels.BufferedMessageWriter.WriteMessage(Message message, BufferManager bufferManager, Int32 initialOffset, Int32 maxSizeQuota)\n   at System.ServiceModel.Channels.BinaryMessageEncoderFactory.BinaryMessageEncoder.WriteMessage(Message message, Int32 maxMessageSize, BufferManager bufferManager, Int32 messageOffset)\n   at System.ServiceModel.Channels.FramingDuplexSessionChannel.EncodeMessage(Message message)\n   at System.ServiceModel.Channels.FramingDuplexSessionChannel.OnSend(Message message, TimeSpan timeout)\n   at System.ServiceModel.Channels.OutputChannel.Send(Message message, TimeSpan timeout)\n   at System.ServiceModel.Dispatcher.DuplexChannelBinder.DuplexRequestContext.OnReply(Message message, TimeSpan timeout)\n   at System.ServiceModel.Channels.RequestContextBase.Reply(Message message, TimeSpan timeout)\n   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Reply(MessageRpc&amp; rpc)</code></p>\n"},{"tags":["wcf","iis","post","localhost"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13024227,"title":"WCF serviceHow to change visit address from localhost to real IP address","body":"<p>I host my WCF service on IIS. </p>\n\n<p>I following the introduction to <em>CREATE RESTful WCF Service API Using POST</em> <a href=\"http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By\" rel=\"nofollow\">http://www.codeproject.com/Articles/201901/CREATE-RESTful-WCF-Service-API-Using-POST-Step-By</a>. </p>\n\n<p>I can access the service with url as <code>http://localhost:16043/Service1.svc/PostSampleMethod/New</code></p>\n\n<p>But if I change the localhost to my local ip address, I can not access the service.</p>\n\n<p>How can I configure to let remote machine to access my WCF service with its ip?</p>\n\n<p>I can not find anywhere which can change my WCF service's default access ip adrress and port in Web.config file.</p>\n\n<p>Here is my Web.config file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt; \n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"WcfService1.Service1\" behaviorConfiguration=\"ServiceBehaviour\"&gt;\n        &lt;!-- Service Endpoints --&gt;\n        &lt;!-- Unless fully qualified, address is relative to base address supplied above --&gt;\n        &lt;endpoint address =\"\" binding=\"webHttpBinding\" contract=\"WcfService1.IService1\" behaviorConfiguration=\"web\"&gt;\n          &lt;!-- \n              Upon deployment, the following identity element should be removed or replaced to reflect the \n              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity \n              automatically.\n          --&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ServiceBehaviour\"&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"web\"&gt;\n          &lt;webHttp/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13024507,"title":"I am getting error when I'm using the WCF service through my web application","body":"<blockquote>\n  <p><em>The server was unable to process the request due to an internal error.\n  For more information about the error, either turn on\n  IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute\n  or from the  configuration behavior) on the server in\n  order to send the exception information back to the client, or turn on\n  tracing as per the Microsoft .NET Framework 3.0 SDK documentation and\n  inspect the server trace logs.</em></p>\n</blockquote>\n\n<p>What can be the reasons for this?</p>\n\n<p><code>IService.cs</code>:</p>\n\n<pre><code>[ServiceContract]\npublic interface IService\n{\n  [OperationContract]\n  List&lt;UserDetails&gt; GetUserDetails(string Username);\n\n  [OperationContract]\n  string InsertUserDetails(UserDetails userInfo);\n}\n\n// Use a data contract as illustrated in the sample below to add composite types to service operations.\n[DataContract]\npublic class UserDetails\n{\n    string username = string.Empty;\n    string firstname = string.Empty;\n    string lastname = string.Empty;\n    string location = string.Empty;\n\n    [DataMember]\n    public string UserName\n    {\n        get { return username; }\n        set { username = value; }\n    }\n    [DataMember]\n    public string FirstName\n    {\n        get { return firstname; }\n        set { firstname = value; }\n    }\n    [DataMember]\n    public string LastName\n    {\n        get { return lastname; }\n        set { lastname = value; }\n    }\n    [DataMember]\n    public string Location\n    {\n        get { return location; }\n        set { location = value; }\n    }\n}\n</code></pre>\n\n<p>Service implementation: <code>Service.cs</code>:</p>\n\n<pre><code>public class Service : IService\n{\n  private string strConnection =     ConfigurationManager.ConnectionStrings[\"dbconnection\"].ToString();\n  public List&lt;UserDetails&gt; GetUserDetails(string Username)\n  {\n      List&lt;UserDetails&gt; userdetails = new List&lt;UserDetails&gt;();\n      using (SqlConnection con = new SqlConnection(strConnection))\n      {\n          con.Open();\n          SqlCommand cmd = new SqlCommand(\"select * from UserInformation where UserName Like '%'+@Name+'%'\", con);\n          cmd.Parameters.AddWithValue(\"@Name\", Username);\n          SqlDataAdapter da = new SqlDataAdapter(cmd);\n          DataTable dtresult = new DataTable();\n          da.Fill(dtresult);\n\n          if (dtresult.Rows.Count &gt; 0)\n          {\n              for (int i = 0; i &lt; dtresult.Rows.Count; i++)\n              {\n                  UserDetails userInfo = new UserDetails();\n                  userInfo.UserName = dtresult.Rows[i][\"UserName\"].ToString();\n                  userInfo.FirstName = dtresult.Rows[i][\"FirstName\"].ToString();\n                  userInfo.LastName = dtresult.Rows[i][\"LastName\"].ToString();\n                  userInfo.Location = dtresult.Rows[i][\"Location\"].ToString();\n                  userdetails.Add(userInfo);\n              }\n          }\n          con.Close();\n      }\n      return userdetails;\n  }\n\n  public string InsertUserDetails(UserDetails userInfo)\n  {\n      string strMessage = string.Empty;\n\n      using (SqlConnection con = new SqlConnection(strConnection))\n      {\n          con.Open();\n          SqlCommand cmd = new SqlCommand(\"insert into UserInformation(UserName, FirstName, LastName, Location) values(@Name, @FName, @LName, @Location)\", con);\n          cmd.Parameters.AddWithValue(\"@Name\", userInfo.UserName);\n          cmd.Parameters.AddWithValue(\"@FName\", userInfo.FirstName);\n          cmd.Parameters.AddWithValue(\"@LName\", userInfo.LastName);\n          cmd.Parameters.AddWithValue(\"@Location\", userInfo.Location);\n\n          int result = cmd.ExecuteNonQuery();\n\n          if (result == 1)\n          {\n              strMessage = userInfo.UserName + \" Details inserted successfully\";\n          }\n          else\n          {\n              strMessage = userInfo.UserName + \" Details not inserted successfully\";\n          }\n          con.Close();\n      }\n      return strMessage;\n  }\n}\n</code></pre>\n\n<p><code>web.config</code>:  </p>\n\n<pre><code>&lt;connectionStrings&gt;\n  &lt;add name=\"dbconnection\" \n       connectionString=\"Data Source=DSK-407\\SQL2008R2;Initial   Catalog=NerdDinner;Persist Security Info=True;User ID=sa;Password=***********;MultipleActiveResultSets=True;Application Name=EntityFramework\" \n       providerName=\"System.Data.SqlClient\"/&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p>After build the service and use a web site in different project with same solution file</p>\n\n<p><code>Default.aspx.cs</code>:</p>\n\n<pre><code>using ServiceReference1;\n\npublic partial class Default2 : System.Web.UI.Page\n{\nServiceReference1.ServiceClient objService = new ServiceClient();\nprotected void Page_Load(object sender, EventArgs e)\n{\n    if (!IsPostBack)\n    {\n        BindUserDetails();\n    }\n}\nprotected void BindUserDetails()\n{\n    IList&lt;UserDetails&gt; objUserDetails = new List&lt;UserDetails&gt;();\n    objUserDetails = objService.GetUserDetails(\"\");\n    gvDetails.DataSource = objUserDetails;\n    gvDetails.DataBind();\n}\nprotected void btnSubmit_Click(object sender, EventArgs e)\n{\n    UserDetails userInfo = new UserDetails();\n    userInfo.UserName = txtUserName.Text;\n    userInfo.FirstName = txtfname.Text;\n    userInfo.LastName = txtlname.Text;\n    userInfo.Location = txtlocation.Text;\n    string result = objService.InsertUserDetails(userInfo);\n    lblResult.Text = result;\n    BindUserDetails();\n    txtUserName.Text = string.Empty;\n    txtfname.Text = string.Empty;\n    txtlname.Text = string.Empty;\n    txtlocation.Text = string.Empty;\n}\n}\n</code></pre>\n\n<p><code>web.config</code>:</p>\n\n<pre><code>&lt;endpoint name=\"BasicHttpBinding_IService\"\n    address=\"http://localhost:50174/WCFService1/Service.svc\"\n    binding=\"basicHttpBinding\" \n    bindingConfiguration=\"BasicHttpBinding_IService\"\n    contract=\"ServiceReference1.IService\"  /&gt;\n</code></pre>\n"},{"tags":["asp.net","wcf","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12276469,"title":"Facing problems in uploading larger files using WCF","body":"<p>I am facing problem while uploading a file with larger size. I am using WCF service's basicHttpBinding for Request/Response where it is formed like this,</p>\n\n<p>int MAXSIZE = Int32.MaxValue;</p>\n\n<pre><code>    BasicHttpBinding binding = new BasicHttpBinding()\n    {\n        CloseTimeout = new TimeSpan(0, 1, 0),\n        OpenTimeout = new TimeSpan(0, 1, 0),\n        ReceiveTimeout = new TimeSpan(0, 10, 0),\n        SendTimeout = new TimeSpan(0, 10, 0),\n        AllowCookies = false,\n        BypassProxyOnLocal = false,\n        HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,\n        MaxBufferSize = MAXSIZE,\n        MaxBufferPoolSize = MAXSIZE,\n        MaxReceivedMessageSize = MAXSIZE,\n        MessageEncoding = WSMessageEncoding.Text,\n        TextEncoding = System.Text.Encoding.UTF8,\n        TransferMode = System.ServiceModel.TransferMode.Buffered,\n        UseDefaultWebProxy = true,\n\n    };\n\n    binding.ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas()\n    {\n        MaxDepth = 32,\n        MaxStringContentLength = MAXSIZE,\n        MaxArrayLength = MAXSIZE,\n        MaxBytesPerRead = MAXSIZE,\n        MaxNameTableCharCount =16384,\n    };\n</code></pre>\n\n<p>As per the answers over net it should work, however it is throwing an exception.\nThe remote server returned an unexpected response: (400) Bad Request.</p>\n\n<p>Does anyone encountered such situation before ?</p>\n"},{"tags":["java","wcf","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13024636,"title":"unreadable format of SOAP response","body":"<p>I am using SOAP in java.\nWhile reading from the socket, I am getting response in un-readable font/encoding.\nSince I am a new user, I cant upload the image.</p>\n\n<p>I am unable to understand the font/encoding of the contents or even the cause of such font/encoding.\nAny ideas upon how to convert it into readable format using java?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","wcf","web-services"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":6316,"score":3,"question_id":3458934,"title":"ContractFilter mismatch at the EndpointDispatcher (error handling)","body":"<p>my problem is following:</p>\n\n<p>While <strong>updateing service reference</strong> of my WCF client (simply by clicking Update Service Reference in Visual Studio 2008), I'm getting following error:</p>\n\n<blockquote>\n  <p>System.ServiceModel.FaultException:\n  The message with Action\n  'http://schemas.xmlsoap.org/ws/2004/09/transfer/Get'\n  cannot be processed at the receiver,\n  due to a ContractFilter mismatch at\n  the EndpointDispatcher. This may be\n  because of either a contract mismatch\n  (mismatched Actions between sender and\n  receiver) or a binding/security\n  mismatch between the sender and the\n  receiver.  Check that sender and\n  receiver have the same contract and\n  the same binding (including security\n  requirements, e.g. Message, Transport,\n  None).     at\n  System.ServiceModel.Dispatcher.ErrorBehavior.ThrowAndCatch(Exception\n  e, Message message)</p>\n</blockquote>\n\n<p>Previously I've created <strong>ErrorServiceBehaviour</strong> class. This behavior is created for <strong>error handling</strong> so <strong>IErrorHandler implementation</strong> must be applied to each <strong>ChannelDispatcher</strong>. </p>\n\n<pre><code>public class ErrorServiceBehaviour : Attribute, IServiceBehavior\n{\n   //...\n   public Type FaultType\n   {\n      get { return _faultType; }\n      set { _faultType = value; }\n   }\n\n   public void ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)\n   {\n       foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)\n       {\n           dispatcher.ErrorHandlers.Add(new ErrorHandler(_faultType));\n       }\n   }\n}\n\npublic class ErrorHandler : IErrorHandler\n{\n     public ErrorHandler(Type faultType)\n     {\n        _faultType = faultType;         \n     }\n     //...\n}\n</code></pre>\n\n<p>I'm later using that behaviour by applying ErrorServiceBehavior attribute to my service class:</p>\n\n<pre><code>[ErrorServiceBehavior(FaultType = typeof(MyServiceFault))] \npublic class MyService : IMyService\n{\n   //...\n}\n</code></pre>\n\n<p>The funny thing is when I <strong>comment out</strong> the foreach loop inside <strong>ApplyDispatchBehavior</strong> method, I get <strong>NO</strong> error, but that is obviously not the way out because I want my errors to be handled.</p>\n\n<p>Below is my service config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n        &lt;service behaviorConfiguration=\"DefaultBehavior\" name=\"MyService\"&gt;\n            &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"IMyService\" bindingConfiguration=\"NoSecurityBinding\"/&gt;\n            &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"DefaultBehavior\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n        &lt;wsHttpBinding&gt;\n            &lt;binding name=\"NoSecurityBinding\" &gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"None\"/&gt;\n                    &lt;message establishSecurityContext=\"false\"/&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n            &lt;binding name=\"DefaultBinding\" /&gt;\n        &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Can someone help me ?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The code below (shown earlier):</p>\n\n<pre><code>foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)\n{\n    dispatcher.ErrorHandlers.Add(new ErrorHandler(_faultType));\n}\n</code></pre>\n\n<p>adds custom error handling for all endpoints - including the metadata one. But this is not the source of the problem, because even when I disable adding error handling for metadata endpoint, this annoying problem still occurs. So it is just explanation in case of.</p>\n\n<p>But the funny thing is, when I change the <strong>bindingConfiguration</strong> of the first endpoint to <strong>DefaultBinding</strong>, I have <strong>NO</strong> error at all:</p>\n\n<pre><code>&lt;services&gt;\n    &lt;service behaviorConfiguration=\"DefaultBehavior\" name=\"MyService\"&gt;\n        &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"IMyService\" bindingConfiguration=\"DefaultBinding\"/&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n    &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n\n<p>So wonderful, but this in obviously not the configuration I want, because I need old configuration without security (<strong>NoSecurityBinding</strong>), which is error prone for some reason. </p>\n\n<p>Mabye this is a clue for someone to help me resolve the case.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","ajax","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13018104,"title":"Different Types of Web Services","body":"<p>I developed a mobile application using PhoneGap, to connect to a database through a web service. Since, I am familiar with the .NET environment, I used a WCF service, or more specifically an Ajax Enabled WCF Service, so that I could call the web service through an Ajax call.</p>\n\n<p>Now, I am an absolute beginner in web services and I don't even know the difference between REST and SOAP web services and whether this Ajax Enable WCF service is SOAP or REST web service. Also, can I develop the same web service using Java?</p>\n\n<p>Can you please recommend a book or a tutorial where I can have a crash course on web services and find an answer for all these questions please?</p>\n"},{"tags":["wcf","windows-8","basichttpbinding","mtom"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13021310,"title":"Is it possible to call a WCF service using MTOM encoding in a Windows 8 application?","body":"<p>I have a WCF service whose endpoint uses a basicHttpBinding with the messageEncoding set to Mtom.  I'm using transport security with basic credentials.</p>\n\n<pre><code>&lt;binding name=\"basic\" messageEncoding=\"Mtom\"&gt;\n  &lt;security mode=\"Transport\"&gt;\n    &lt;transport clientCredentialType=\"Basic\" /&gt;\n  &lt;/security&gt;\n&lt;/binding&gt;\n</code></pre>\n\n<p>The client is a Windows 8 Store application:</p>\n\n<pre><code>BasicHttpBinding binding = new BasicHttpBinding(BasicHttpSecurityMode.Transport);\nbinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;\n\nvar client = new MyClient(binding, new EndpointAddress(\"https://...\"));\nclient.ClientCredentials.UserName.UserName = \"...\";\nclient.ClientCredentials.UserName.Password = \"...\";\n\nvar x = await client.GetX();\n</code></pre>\n\n<p>If I use Mtom encoding I get a nasty ProtocolException on the GetX call.  If I use Text encoding it works.</p>\n\n<p>Is there any way to make the service work with Mtom encoding?</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13018891,"title":"Do service references need to be updated each time a change is made?","body":"<p>I've built a simple client-server application. When I make changes to the server, I would delete the Service Reference and recreate it to reflect the changes I made to the server application. </p>\n\n<p>Must I have to recreate it each time I make a change to the server application, or is there any way for the service reference to be updated automatically? </p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","datamember"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13018535,"title":"How to check if field exists that has isRequired set to true in WCF","body":"<p>I have a DataMember(isRequired:=True) that property is called FillerInd. Now how do you tell if that field is empty or does not exist? I was reading online and you have to do some Serialization and Deserialization of XML if it has the field required missing it will throw the exception MissingMethodException. I have no idea of how to implement this or if this is the best route to take. Any help to put me into correct path I would really appreciate it. </p>\n"},{"tags":["iphone","objective-c","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13019070,"title":"Iphone to WCF Service","body":"<p>I've been trying to get my iPhone application to talk to a WCF service. My application successfully connects/finds the web service, but, never seems to get a non-error response back. When I use visual studios wcf tester it works fine.</p>\n\n<p>Xml format: <code>&lt;mAccess&gt;&lt;user&gt;&lt;/user&gt;&lt;pwd&gt;&lt;/pwd&gt;&lt;/mAccess&gt;</code></p>\n\n<p>Is there something wrong with how I'm structuring my head/body?</p>\n\n<pre><code>NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:website]];\n[request setHTTPMethod:@\"POST\"];\n[request setValue:@\"text/xml; charset=utf-8\" forHTTPHeaderField:@\"Content-type\"];\n\nNSString *soapMessage = [[NSString alloc] initWithFormat:@\"&lt;SOAP-ENV:Envelope\nxmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"&gt;&lt;SOAP-ENV:Body&gt;\n&lt;MobileAccess xmlns=\\\"http://tempuri.org/\\\"&gt;&lt;mAccess&gt;&lt;user&gt;user&lt;/user&gt;&lt;pwd&gt;pwd&lt;/pwd&gt;&lt;custID&gt;0&lt;/custID&gt;&lt;/mAccess&gt;\n&lt;/MobileAccess&gt;&lt;/SOAP-ENV:Body&gt;&lt;/SOAP-ENV:Envelope&gt;\"];\n\n\n[request setValue:[NSString stringWithFormat:@\"%d\",[soapMessage length]] forHTTPHeaderField:@\"Content-length\"];\n[request addValue:@\"http://tempuri.org/IProviderDataService/MobileAccess\" forHTTPHeaderField:@\"Soapaction\"];\n\n[request setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];\n</code></pre>\n"},{"tags":["sql-server","wcf","ssis"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13019800,"title":"SSIS Package web service task very slow","body":"<p>I have an SSIS package which is using a web service task to call a WCF service. The service call takes between 200ms and 900ms when running it directly (C#, SoapUI, etc.) But when its called from the SSIS package it is consistently taking between 6 and 7 seconds. This is a big problem because the call is being made thousands of times and the package is taking ~8 hours to run. </p>\n\n<p>I have verified the call is returning with the correct results. And have verified that calling the service from the database server with a c# program is fast.</p>\n"},{"tags":["asp.net","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13018081,"title":"WCF & ASP.NET concurrency problems","body":"<p>I have a REST service running on ASP.NET 3.5 and I have multiple concurrent asynchronous calls from the client hitting the WCF service. They all get serialized (sequential) instead of parallel calls. Here are my settings</p>\n\n<p><code>InstanceContextMode = InstanceContextMode.PerSession</code></p>\n\n<p><code>ConcurrencyMode = ConcurrencyMode.Multiple</code></p>\n\n<p>web.config - throttling values</p>\n\n<p><code>&lt;serviceThrottling maxConcurrentCalls=\"64\" maxConcurrentInstances=\"64\" maxConcurrentSessions=\"64\"/&gt;</code></p>\n\n<p>There are no session writes in the code. </p>\n\n<p>What am I missing to make my WCF concurrent?</p>\n"},{"tags":["wpf","wcf","service"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":10188372,"title":"WCF service managed by a WPF application?","body":"<p>I am new to WCF and I have some difficulties understanding certain things...</p>\n\n<p>I want to create a web service, so I have created a WCF application service that I will be  able to host via my IIS server, so far so good, right ?</p>\n\n<p>But that service need some settings, like the SQL Server address where he have to get his data. And that's where I don't understand how I am supposed to create a WPF application that will control the service.</p>\n\n<p>I know how to create a client application to consume the service, but how to create a WPF application that will be installed on the server, and when launched will retrieve the service and allow me to tell him parameters I want him to use.</p>\n\n<p>If someone could give me the overall workflow, it will be greatly appreciate ^^</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13015191,"title":"How to implement full text search using WCF 4?","body":"<p>I am considering design of a WCF 4 application. It will run on IIS6 and Windows Server 2003 using the .NET Framework 4.0 and MySQL databases.</p>\n\n<p>The service needs to allow full text search capabilities, but I'm not finding any resources that show how to do this. I see how to return results using specific data, like GetData(234) to return a record with ID=234. But suppose I want to search a VarChar or Text column for arbitrary criteria. Like, \"green AND yellow\", where a Text column may contain these 2 search terms ANYWHERE in the data. I will probably want to search by datetime as well, so all rows where datetime is earlier the 01/01/2012, Text contains green and yellow, and ID=234, etc.</p>\n\n<p>WCF is straightforward on how to return results for all rows or a row with a specified column value, but I'm not seeing where it will return rows using a full text search.</p>\n\n<p>Is anyone aware of a link that illustrates how to return a list of rows using an advanced search form?</p>\n"},{"tags":["c#","javascript","wcf","html5","datajs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13006166,"title":"Downloading a document from a WCF Service to a web page","body":"<p>I am new to web development and I am looking for some advice on the best solution for this scenario.</p>\n\n<p>I have a WCF service, and a page written using HTML5, javascript (knockout j's and dataJs)</p>\n\n<p>I access my WCF service using DataJS. This works perfectly for receiving and sending data to a from  my web page.</p>\n\n<p>But now I have to be able to upload and download files to and from the server.</p>\n\n<p>I have seen people recommend streaming to and from the WCF service, but I am not sure how I would handle this stream on the client side (javascript/datajs), or if it is the best solution?</p>\n\n<p>I have also come across XMLHttpRequest, but again I am not sure if this would be the best route to follow.</p>\n\n<p>Any suggestions are welcome.</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13015961,"title":"Configuration service in WCF?","body":"<p>Does WCF have an equivalent of \"Configurator\" service?</p>\n\n<p>What I want to do is create a WCF Service that will handle configuration for my whole application. So things like defaults for various components and such.</p>\n\n<p>So, something like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZATn9.jpg\" alt=\"enter image description here\"></p>\n\n<p>My <strong>question</strong> is: does WCF something like this already?</p>\n\n<p>I know how to write this, but before I do, I wanted to see if perhaps I was re-doing something that's already available.</p>\n\n<p><em>NOTE</em>: This is perhaps confusing terminology, as WCF uses the word <em>configuration</em> to mean, for example, configuration of WCF service endpoints and bindings, through config files or programmatically. I don't mean that. I mean the actual configuration of the application itself.</p>\n"},{"tags":["c#","sql-server","wcf","entity-framework","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":12999591,"title":"Better way to call a stored procedure using Entity Framework and return restfully from WCF?","body":"<p>I want to create a WCF service that calls a stored procedure in SQL Server using the Entity Framework and returns the result set to a browser.</p>\n\n<p>I imported the stored procedure using the function import in EF and I built a complex type. </p>\n\n<p>It seems that a complex type from the EF cannot be serialized and returned restfully. The only way I have made this work is to create a concrete class and build it from the complex type returned from EF. This works but it means if I have 30 stored procedures I would need to create 30 concrete classes which is somewhat of a pain.  </p>\n\n<p>Is there a better way to do this?</p>\n\n<p>WCF contract:</p>\n\n<pre><code>[ServiceContract]\npublic interface IService1\n{\n    [OperationContract,WebGet,XmlSerializerFormat]\n    List&lt;People&gt; usp_GetPeople();    \n}\n</code></pre>\n\n<p>Concrete class would need to be created for every procedure:</p>\n\n<pre><code>public class People\n{\n    public int person_id;\n    public string last_name;\n    public string first_name;\n    public string street_addr;\n    public string state_code;\n    public string postal_code;\n\n    public People(int person_id, string last_name, string first_name, string street_addr, string state_code, string postal_code)\n    {\n        this.person_id = person_id;\n        this.last_name = last_name;\n        this.street_addr = street_addr;\n        this.state_code = state_code;\n        this.postal_code = postal_code;\n    }\n\n    public People() { }\n}\n</code></pre>\n\n<p>WCF service:</p>\n\n<pre><code>public class Service1 : IService1\n{\n/// &lt;summary&gt;\n/// Call stored proc and return resultset.\n/// &lt;/summary&gt;\n/// &lt;returns&gt;List of resultset as concrete class People.&lt;/returns&gt;\npublic List&lt;People&gt; usp_GetPeople()\n{\n    try\n    {\n        using (var db = new demoEntities())\n        {\n            var res = db.usp_GetPeople();\n\n            List&lt;People&gt; lst = new List&lt;People&gt;();\n\n            foreach (usp_GetPeople_Result r in res)\n            {\n                People p = new People(r.person_id, r.last_name, r.first_name, r.street_addr, r.state_code, r.postal_code);\n                lst.Add(p);\n            }\n\n            return lst;\n        }\n    }\n    catch (Exception e)\n    {\n        Utility.Log(\"Error in usp_GetPeople. \" + e.ToString());\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":["c#","wpf","wcf","procedure"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13014128,"title":"WCF web service with exposed stored procedures through ADO entity returns different data results","body":"<p>I have an extremely simple stored procedure returning 2 columns, 1 row of data. </p>\n\n<pre><code>SELECT client_id, client_code\nFROM wv.client_identifiers\nWHERE (client_code = @client_code) \n  AND (version = 0) \n  AND (facility_id = @facility_id) \n  AND (is_active = 1) \n  AND (client_version = 0)\n</code></pre>\n\n<p>It's impossible for this table to have duplicates. When testing this procedure in our web projects for the past 2 years it's worked as intended. Works fine in SSMS as well as Visual Studio server explorer. Problem comes in when we ad this to the WCF service project into ADO.NET Entity Framework.</p>\n\n<p>It sees this fine, creates the functions fine, complex types fine etc etc. I can call this fine from the WPF project fine however, the data returned is not consistent if at all correct.</p>\n\n<p>I have 3 rows for example. </p>\n\n<pre><code>client_id client_code \n1001       1252\n1002       6655\n1003       123\n1004       111\n1005       5522\n</code></pre>\n\n<p>If I hit the above mentioned procedure through service with parameters it returns bad results.</p>\n\n<pre><code>using(var context = new service.MyService())\n{\n   var Clients = context.GetClientIDFromClient_Code(facility_id, true, client_code)\n\n   foreach(var client in Clients)\n   {\n     int ClientID = client.client_id;\n   }\n</code></pre>\n\n<ul>\n<li>If I pass in the parameter value of 5522 I get null results.</li>\n<li>If I pass in the parameter value of 123 I get the results for <code>client_id 1004</code> and <code>code</code> of 111.</li>\n<li>If I pass in the parameter value of 1252 I get the results for <code>client_id 1004</code> and code of 111.</li>\n<li>If I pass in ANYTHING starting with <code>1</code> followed by whatever I get the same result.</li>\n<li>If I enter ANYTHING that does not start with 1 but is in the DB and should return I get null.</li>\n</ul>\n\n<p>Not sure WHY the WCF is causing the hangup. I can throw this into a linq to sql classes database file and it works fine. I have tried calling this many different ways, tried returning just a single column or single value, I've tried just about everything out there. Not sure if it's doing it on all procedures similar to this one but if I had to guess it would be.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#",".net","asp.net-mvc-3","wcf","exception-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":955,"score":2,"question_id":11343563,"title":"WCF Service returning \"requested service '...' could not be activated\" the first time it's accessed from an MVC site","body":"<p>We have a WCF service (with no security) that is being accessed by an MVC3 website.</p>\n\n<p>On the developer machines we have no problems with it but when our TeamCity setup builds the central version and deploys it under IIS7 the first time we load the MVC3 site and it accesses the WCF service - the service call returns the message:</p>\n\n<blockquote>\n  <p>System.ServiceModel.ServiceActivationException: The requested service, 'http://localhost:83/ABCStaticData/StaticDataService.svc' could not be activated. See the server's diagnostic trace logs for more information.**</p>\n</blockquote>\n\n<p>If we immediately hit the same site again, everything works fine.</p>\n\n<p>The server stack track when it throws the error is:</p>\n\n<p>Server stack trace:</p>\n\n<pre><code>at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory1 factory, WebException responseException, ChannelBinding channelBinding)\nat System.ServiceModel.Channels.HttpChannelFactory1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\nat System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)\nat System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)\nat System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout\nat System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\nat System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) Exception rethrown at [0]: at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\nat System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type) \nat ABC.StaticData.Editor.StaticDataServiceProxy.IStaticDataService.GetAllMarkets()\nat ABC.StaticData.Editor.StaticDataServiceProxy.StaticDataServiceClient.GetAllMarkets() in c:\\BuildAgent\\work\\55a3bcc468adcccb\\StaticData\\ABC.StaticData.Editor\\Service References\\StaticDataServiceProxy\\Reference.cs:line 3195\nat ABC.StaticData.Editor.Controllers.MarketsController.&lt;&gt;c__DisplayClass22.&lt;.ctor&gt;b__13() in c:\\BuildAgent\\work\\55a3bcc468adcccb\\StaticData\\ABC.StaticData.Editor\\Controllers\\MarketsController.cs:line 263\nat ABC.StaticData.Editor.Controllers.MarketsController.Index() in c:\\BuildAgent\\work\\55a3bcc468adcccb\\StaticData\\ABC.StaticData.Editor\\Controllers\\MarketsController.cs:line 306\n</code></pre>\n\n<p>Does anyone have any ideas on what could be causing the problem or where to start looking?</p>\n\n<p>UPDATE: I forgot to mention the first that if we then don't access the site for a while and then go back, it gives the same error - then works again the second time.</p>\n\n<p>UPDATE2: This is the event log entry text:</p>\n\n<pre><code>WebHost failed to process a request.\n Sender Information: System.ServiceModel.ServiceHostingEnvironment+HostingManager/3043589\n Exception: System.ServiceModel.ServiceActivationException: The service '/ABCStaticData/StaticDataService.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not load type 'System.Runtime.CompilerServices.AsyncStateMachineAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.. ---&gt; System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.AsyncStateMachineAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.\n   at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)\n   at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)\n   at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)\n   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly&amp; lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType&amp; attributeType, IRuntimeMethodInfo&amp; ctor, Boolean&amp; ctorHasParameters, Boolean&amp; isVarArg)\n   at System.Reflection.CustomAttribute.IsCustomAttributeDefined(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, RuntimeType attributeFilterType, Boolean mustBeInheritable)\n   at System.Reflection.CustomAttribute.IsDefined(RuntimeMethodInfo method, RuntimeType caType, Boolean inherit)\n   at System.Reflection.RuntimeMethodInfo.IsDefined(Type attributeType, Boolean inherit)\n   at Ninject.Infrastructure.Language.ExtensionsForMemberInfo.HasAttribute(MemberInfo member, Type type)\n   at Ninject.Selection.Heuristics.StandardInjectionHeuristic.ShouldInject(MemberInfo member)\n   at Ninject.Selection.Selector.&lt;&gt;c__DisplayClassa.&lt;SelectMethodsForInjection&gt;b__9(IInjectionHeuristic h)\n   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)\n   at Ninject.Selection.Selector.&lt;SelectMethodsForInjection&gt;b__8(MethodInfo m)\n   at System.Linq.Enumerable.WhereArrayIterator`1.MoveNext()\n   at Ninject.Planning.Strategies.MethodReflectionStrategy.Execute(IPlan plan)\n   at Ninject.Planning.Planner.&lt;&gt;c__DisplayClass1.&lt;CreateNewPlan&gt;b__0(IPlanningStrategy s)\n   at Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map[T](IEnumerable`1 series, Action`1 action)\n   at Ninject.Planning.Planner.CreateNewPlan(Type type)\n   at Ninject.Planning.Planner.GetPlan(Type type)\n   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)\n   at Ninject.Activation.Context.Resolve()\n   at Ninject.KernelBase.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)\n   at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)\n   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)\n   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)\n   at Ninject.Activation.Providers.StandardProvider.&lt;&gt;c__DisplayClass4.&lt;Create&gt;b__2(ITarget target)\n   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\n   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\n   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)\n   at Ninject.Activation.Context.Resolve()\n   at Ninject.KernelBase.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)\n   at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)\n   at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)\n   at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)\n   at Ninject.Activation.Providers.StandardProvider.&lt;&gt;c__DisplayClass4.&lt;Create&gt;b__2(ITarget target)\n   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\n   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\n   at Ninject.Activation.Providers.StandardProvider.Create(IContext context)\n   at Ninject.Activation.Context.Resolve()\n   at Ninject.KernelBase.&lt;&gt;c__DisplayClass10.&lt;Resolve&gt;b__c(IBinding binding)\n   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\n   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)\n   at Ninject.Extensions.Wcf.BaseNinjectServiceHostFactory.CreateServiceHost(Type serviceType, Uri[] baseAddresses)\n   at System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses)\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.CreateService(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.ActivateService(ServiceActivationInfo serviceActivationInfo, EventTraceActivity eventTraceActivity)\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)\n   --- End of inner exception stack trace ---\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath, EventTraceActivity eventTraceActivity)\n   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath, EventTraceActivity eventTraceActivity)\n Process Name: w3wp\n Process ID: 3248\n</code></pre>\n\n<p>Just another point that we're developing using .NET 4.5 and Visual Studio 2012 RC.</p>\n"},{"tags":["c#","wcf","list","generics"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13015096,"title":"wcf passing list as method parameter","body":"<p>I have a wcf service which has a method as follow:</p>\n\n<pre><code> public void SyncClient(List&lt;Client&gt; client)\n        {\n         }\n</code></pre>\n\n<p>then i call this in a lib solution which has reference to this service as follow:</p>\n\n<pre><code>WCF.SyncClient wcfSer = new WCF.SyncClient();\n List&lt;Client&gt; clientModified = secondservice.Get_Clients(ModifiedDate, modifiedUnt).ToList();\nwcfSer.SyncClient(clientModified);\n</code></pre>\n\n<p>but I keep on getting the following error :</p>\n\n<pre><code>The best overloaded method match for 'SyncClient(SyncLib.ClientWCF.Client[])' has some invalid arguments    \ncannot convert from 'System.Collections.Generic.List&lt;SyncLib.Client&gt;' to 'SyncLib.WCF.Client[]'\n</code></pre>\n\n<p>The only thing I am doing is getting the list populated with another web service.</p>\n\n<p>what is the problem here as the argument that I am passing is list and the method accepts list, can some one please point me to right direction.</p>\n"},{"tags":["c#","xml","wcf","soap","messagecontract"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":70,"score":1,"question_id":12774030,"title":"WCF - How do I return a success or failure message using Message Contracts","body":"<p>Im using SOAP/XML with MessageContracts and <strong>have to return a specified format</strong> similar to the following:</p>\n\n<p>If validation is successful:</p>\n\n<pre><code>&lt;env:Envelope&gt;\n    &lt;env:Body&gt;\n        &lt;Success xmlns=\"http://tempuri.org\"&gt;&lt;/Success&gt;\n    &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n</code></pre>\n\n<p>If it is unsuccessful:</p>\n\n<pre><code>&lt;env:Envelope&gt;\n    &lt;env:Body&gt;\n        &lt;Failure xmlns=\"http://tempuri.org\"&gt;&lt;/Failure&gt;\n    &lt;/env:Body&gt;\n&lt;/env:Envelope&gt;\n</code></pre>\n\n<p>Take for instance, the following method.  It returns a type of MyResponse.  So how can I define MyResponse to return a Success or Failure XML Element?</p>\n\n<pre><code>public MyResponse SaveMessage(MyRequest request) \n{            \n     return new MyResponse();            \n}\n</code></pre>\n\n<p>I can return a success message just fine, like this.  It's unwrapped and has an XML element of Success.  But I need to also be able to return an XML element of Failure and I can't do that using the same MyResponse type.</p>\n\n<pre><code>[MessageContract(IsWrapped=false)]\npublic class MyResponse\n{\n    [MessageBodyMember(Namespace = \"http://tempuri.org\")]\n    public Success Success { get; set; }\n\n}\n</code></pre>\n"},{"tags":["wcf","performance","concurrency","instance"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13015000,"title":"Single Instance VS PerCall in WCF","body":"<p>There are a lot of posts saying that <code>SingleInstance</code> is a bad design. But I think it is the best choice in my situation.<br>\nIn my service I have to return a list of currently logged-in users (with additional data). This list is identical for all clients. I want to retrieve this list from database every 5 seconds (for example) and return a copy of it to the client, when needed.<br>\nIf I use <code>PerCall</code> instancing mode, I will retrieve this list from database every single time. This list is supposed to contain ~200-500 records, but can grow up to 10 000 in the future. Every record is complex and contains about 10 fields. </p>\n\n<p>So what about performance? Is it better to use \"bad design\" and get list once or to use \"good approach\" and get list from database on every call?</p>\n"},{"tags":["wcf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12974553,"title":"closing WCF proxy","body":"<p>I have always followed the guidance of try/Close/catch/Abort when it comes to a WCF proxy. I am facing a code base now that creates proxies in MVC controllers and just lets them go out of scope. I'm arguing the case that we need to edit the code base to use try/Close/catch/Abort but there is resistance.</p>\n\n<p>Does anyone know a metric (e.g. perfmon) I can capture to illustrate the problem/benefit. Or a definitive reference that spells out the problem/benefit no one can dispute?</p>\n"},{"tags":["c#",".net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12963805,"title":"MessageBodyMember Name Option Doesn't Set Correct Element Name in XML","body":"<p>I've got the following code in a WCF web service:</p>\n\n<pre><code>[MessageBodyMember(Order = 1, Name = \"XmlInvoice\")]\npublic new XElement XmlDocument { get; set; }\n</code></pre>\n\n<p>This WCF service runs successfully but the XML response contains the element <code>&lt;XmlDocument&gt;</code>, not <code>&lt;XmlInvoice&gt;</code>. How can I get this property to return as the element <code>&lt;XmlInvoice&gt;</code>?</p>\n"},{"tags":[".net","wcf","http","iis","localhost"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13014180,"title":"ISS manager haven't http binding type","body":"<p>My problems are \nThere isn't access to localhost. \nIIS manager haven't default website. \nIn binding type (in iis manager) there isn't option with  http</p>\n\n<p>Windows 7 \nIIS manager 7.5</p>\n"},{"tags":["c#","wcf","design-patterns"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":13000736,"title":"Is it correct to implement IDisposable on Singleton","body":"<p>In our WCF project, we are using <code>singleton pattern</code> to obtain client proxy. </p>\n\n<p>Basically because-</p>\n\n<ol>\n<li>Any enhancements required later, on the client object adding\n<code>Binding</code> or <code>Endpoint</code>, would require minimal changes.</li>\n<li>We do not call multiple service, at the same time.</li>\n</ol>\n\n<p>To make sure that <code>connection is closed</code> properly after each service call, We are planning to implement <code>IDisposable</code> in singleton as below -</p>\n\n<pre><code>public class ClientSingleton : IDisposable\n{\n    static Service1Client client;\n    private ClientSingleton()\n    {\n        client = new Service1Client();\n    }\n    public Service1Client getInstance()\n    {\n        if (client != null)\n            return client;\n        else\n        {\n            client = new Service1Client();\n            return client;\n        }\n    }\n    public void Dispose()\n    {\n        client.Close();\n    }\n}\n</code></pre>\n\n<p>Does this violates Singleton <code>Design-Pattern</code> principles? Any advice to improve this would be helpful.</p>\n\n<p><strong>edit:</strong></p>\n\n<p>Consider <code>using block</code> to dispose the client object as below -</p>\n\n<pre><code>using (Service1Client client = new Service1Client())\n{\n    client.Operation1();\n}\n</code></pre>\n\n<p>That means WCF proxies implement <code>IDisposable</code> interface. So I don't see any harm in implementing this interface here.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","wcf","entity-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13006216,"title":"WCF -An error occurred while receiving the HTTP response","body":"<p>I try to get list from service like this:</p>\n\n<pre><code>   static void Main(string[] args)\n    {\n      MyClient proxy = new MyClient();\n      List&lt;X&gt; l = proxy.Func(1).ToList();\n    }\n</code></pre>\n\n<p>X is class from DLL of entity framework project.</p>\n\n<p>My function in service look like this:</p>\n\n<pre><code>    public List&lt;X&gt; Func(int NUM)\n    {                      \n        ProjectContext MyContext = new ProjectContext();\n        s = MyContext.X.ToList();\n        return s;\n\n    }\n</code></pre>\n\n<p>My context define like this:</p>\n\n<pre><code>public class ProjectContext : DbContext\n{\n\n    public ProjectContext ()\n        : base(\"name=ApplicationServices\")\n    {\n        this.Configuration.ProxyCreationEnabled=false;\n        this.Configuration.LazyLoadingEnabled = false;\n    }\n\n    public DbSet&lt;XX&gt; X{ get; set; }\n\n}\n</code></pre>\n\n<p>I get error: </p>\n\n<p>An error occurred while receiving the HTTP response to XXX. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.</p>\n"},{"tags":["c#","wcf","visual-studio-2008","tcp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3345,"score":0,"question_id":5463850,"title":"WCF Service error received when using TCP: \"The message could not be dispatched...\"","body":"<p>I am new to creating WCF services. I have created a WCF web service in VS2008 that is running on IIS 7. When I use http the service works perfectly. When I configure the service for TCP and run I get the following error message.</p>\n\n<blockquote>\n  <p>There was a communication problem. The\n  message could not be dispatched\n  because the service at the endpoint\n  address\n  'net:tcp://elec:9090/CoordinateIdTool_Tcp/IdToolService.svc\n  is unavailable for the protocol of the\n  address.</p>\n</blockquote>\n\n<p>I have searched a lot of forums, including this one, for a resolution but nothing has worked. Everything appears to be set up correctly on IIS 7. WAS has been set up to run. The default web site has a net.tcp binding and the application has net.tcp under the enabled protocols.</p>\n\n<p>I am including what I think is the important part of the web.config from the host project and also the app.config from the client project I am using to test the service. Hopefully someone can spot my error. Thanks in advance for any help or recommendations that anyone can provide.</p>\n\n<p><strong>Web.Config</strong></p>\n\n<pre><code>&lt;bindings&gt;\n   &lt;wsHttpBinding&gt;\n      &lt;binding name=\"wsHttpBindingNoMsgs\"&gt;\n         &lt;security mode=\"None\" /&gt;\n       &lt;/binding&gt;\n   &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;services&gt;\n   &lt;service behaviorConfiguration=\"CogIDServiceHost.ServiceBehavior\"\n           name=\"CogIDServiceLibrary.CogIdService\"&gt;\n      &lt;endpoint address=\"\" \n                binding=\"wsHttpBinding\" \n                bindingConfiguration=\"wsHttpBindingNoMsgs\"\n                contract=\"CogIDServiceLibrary.CogIdTool\"&gt;\n         &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n         &lt;/identity&gt;\n      &lt;/endpoint&gt;\n      &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" bindingConfiguration=\"\"\n                contract=\"IMetadataExchange\" /&gt;\n      &lt;endpoint name=\"CoordinateIdService_TCP\"\n          address=\"net.tcp://elec:9090/CoordinateIdTool_Tcp/IdToolService.svc\"\n          binding=\"netTcpBinding\" bindingConfiguration=\"\" \n          contract=\"CogIDServiceLibrary.CogIdTool\"&gt;\n         &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n         &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/service&gt;\n &lt;/services&gt;\n &lt;behaviors&gt;\n    &lt;serviceBehaviors&gt;\n       &lt;behavior name=\"CogIDServiceHost.ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n       &lt;/behavior&gt;\n    &lt;/serviceBehaviors&gt;\n &lt;/behaviors&gt;\n</code></pre>\n\n<p><strong>App.Config</strong></p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;diagnostics performanceCounters=\"Off\"&gt;\n        &lt;messageLogging logEntireMessage=\"true\" logMalformedMessages=\"false\"\n            logMessagesAtServiceLevel=\"false\" logMessagesAtTransportLevel=\"false\" /&gt;\n    &lt;/diagnostics&gt;\n    &lt;behaviors /&gt;\n    &lt;bindings&gt;\n        &lt;wsHttpBinding&gt;\n            &lt;binding name=\"WSHttpBinding_CogIdTool\" closeTimeout=\"00:01:00\"\n                openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                allowCookies=\"false\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                    enabled=\"false\" /&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n                        establishSecurityContext=\"true\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n            &lt;binding name=\"wsHttpBindingNoMsg\"&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\" /&gt;\n                    &lt;message clientCredentialType=\"Windows\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://sdet/CogId_WCF/IdToolService.svc\" binding=\"wsHttpBinding\"\n            bindingConfiguration=\"wsHttpBindingNoMsg\" contract=\"CogIdServiceReference.CogIdTool\"\n            name=\"IISHostWsHttpBinding\"&gt;\n            &lt;identity&gt;\n                &lt;dns value=\"localhost\" /&gt;\n            &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"http://localhost:1890/IdToolService.svc\" binding=\"wsHttpBinding\"\n            bindingConfiguration=\"WSHttpBinding_CogIdTool\" contract=\"CogIdServiceReference.CogIdTool\"\n            name=\"WSHttpBinding_CogIdTool\"&gt;\n            &lt;identity&gt;\n                &lt;dns value=\"localhost\" /&gt;\n            &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"http://elec/CoordinateIdTool/IdToolService.svc\"\n            binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpBindingNoMsg\"\n            contract=\"CogIdServiceReference.CogIdTool\" name=\"IIS7HostWsHttpBinding_Elec\"&gt;\n            &lt;identity&gt;\n                &lt;dns value=\"localhost\" /&gt;\n            &lt;/identity&gt;\n        &lt;/endpoint&gt;\n      &lt;endpoint address=\"net.tcp://elec:9090/CoordinateIdTool_Tcp/IdToolService.svc\"\n          binding=\"netTcpBinding\" bindingConfiguration=\"\" contract=\"CogIdServiceReference.CogIdTool\"\n            name=\"IIS7HostTcpBinding_Elec\" &gt;\n        &lt;identity&gt;\n          &lt;dns value=\"localhost\"/&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["wcf","synchronization","wcf-data-services"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":38,"score":0,"question_id":13007386,"title":"WCF - Failed to sync database","body":"<p>I was using <a href=\"http://community.appamundi.com/blogs/andywigley/archive/2008/12/08/building-a-sync-services-for-ado-net-solution-for-mobile-devices.aspx\" rel=\"nofollow\">this tutorial</a> to create synchronization between my mobile device and server. My code throws an error:</p>\n\n<blockquote>\n  <p>Failed to sync database </p>\n</blockquote>\n\n<p>It does this when I try to create a local cache database (refer to the image below for the full exception message). I got help investigating this issue and was requested to check my SQL compatibility level. </p>\n\n<p>Please help.</p>\n\n<p><img src=\"http://i.stack.imgur.com/YHITc.png\" alt=\"full exception message\"></p>\n"},{"tags":["wcf","wcf-binding","wcf-endpoint"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13004071,"title":"Deploying a WCF service that uses netTcpBinding (not IIS hosted)","body":"<p>I'm developing a client-server app using WCF over the netTcpBinding.</p>\n\n<p>My solution has 2 projects, the client one and the server one.</p>\n\n<p>So far I've learnt that in order to get the WCF service working I have to do some configuration on the app.config file. This I did and things are working fine.</p>\n\n<p>But now I have a problem finding out what to do when I deploy the service to a server, in order for the client to connect. My problem is that I don't know what I have to modify in the app.config (or any other location) when I deploy the service in to a location other than \"localhost\". </p>\n\n<p>Here is my server app's app.config file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"MMServidor3.ServidorCliente\"&gt;\n        &lt;endpoint address=\"\" binding=\"netTcpBinding\" bindingConfiguration=\"\"\n          contract=\"MMServidor3.iServicioMM\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:4005/MMServidor3/\" /&gt;\n            &lt;add baseAddress=\"net.tcp://localhost:4006/MMServidor3/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;serviceMetadata /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>The \"mex\" endpoint and the http protocol base address are there in order for the client to get the metadata (I couldn't get it otherwise).</p>\n\n<p>So, since I don't know beforehand what the IP address is where I'm going to deploy the server, I'd like the endpoint be read from a config or ini file (I would rather not have to compile for each endpoint).</p>\n\n<p>Also, what do I have to modify on the client side? Here is the relevant section of the client app.config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;netTcpBinding&gt;\n                &lt;binding name=\"NetTcpBinding_iServicioMM\" closeTimeout=\"00:01:00\"\n                    openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                    transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\"\n                    hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"10\"\n                    maxBufferPoolSize=\"524288\" maxBufferSize=\"65536\" maxConnections=\"10\"\n                    maxReceivedMessageSize=\"65536\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                        enabled=\"false\" /&gt;\n                    &lt;security mode=\"Transport\"&gt;\n                        &lt;transport clientCredentialType=\"Windows\" protectionLevel=\"EncryptAndSign\" /&gt;\n                        &lt;message clientCredentialType=\"Windows\" /&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n            &lt;/netTcpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"net.tcp://localhost:4006/MMServidor3/\" binding=\"netTcpBinding\"\n                bindingConfiguration=\"NetTcpBinding_iServicioMM\" contract=\"MMServicioServidor.iServicioMM\"\n                name=\"NetTcpBinding_iServicioMM\"&gt;\n                &lt;identity&gt;\n                    &lt;dns value=\"localhost\" /&gt;\n                &lt;/identity&gt;\n            &lt;/endpoint&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Any advice would be appreciated!</p>\n"},{"tags":["jquery","asp.net","json","wcf","web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":13002866,"title":"WCF service for consumption by jQuery: works with VS dev server, but not with IIS","body":"<p>This has been driving me nuts today. Hopefully someone here can help me crack it.</p>\n\n<p>Basically, I have created a test site with a WCF service to be consumed by jQuery. It has three methods, two of which work perfectly.</p>\n\n<p>The service returns JSON. It has three methods, two of which work perfectly. The third does not - and I cannot see why.</p>\n\n<p>This is what I do know.</p>\n\n<p>If I launch the site from Visual Studio, I can browse to the service and view the formatted JSON. If I try to do the same in a browser i.e. the IIS version, I get a 400 error. But only for the one method - the others are fine.</p>\n\n<p>It's that inconsistency that has me stumped.</p>\n\n<p>I have set it up as a website in IIS, rather than a virtual directory. To browse to it, the URL is of the form <a href=\"http://mytestsite.local\" rel=\"nofollow\">http://mytestsite.local</a></p>\n\n<p>Having followed a walk-through (it has been a while since I have done any WCF work!), I took the approach of removing service-related configuration info from web.config. Instead, I have a Factory attribute that references the class WebServiceHostFactory in the .svc file.</p>\n\n<p>Here are the methods:</p>\n\n<pre><code>    [OperationContract]\n    [WebInvoke(Method = \"GET\", ResponseFormat = WebMessageFormat.Json)]\n    public UserDTO[] GetUsers()\n    {\n        using (var dbContext = new GSChallengeContext())\n        {\n            var results = from u in dbContext.Users\n                          select new UserDTO()\n                          {\n                              UserId = u.UserId,\n                              Forename = u.Forename,\n                              Surname = u.Surname,\n                          };\n            return results.ToArray();\n        }\n    }\n\n    [OperationContract]\n    [WebInvoke(Method = \"GET\", ResponseFormat = WebMessageFormat.Json)]\n    public UserDTO[] GetUserById(int userId)\n    {\n        using (var dbContext = new GSChallengeContext())\n        {\n            var results = from u in dbContext.Users\n                          where u.UserId == userId\n                          select new UserDTO()\n                          {\n                              UserId = u.UserId,\n                              Forename = u.Forename,\n                              Surname = u.Surname,\n                              DateOfBirth = (DateTime)u.DateOfBirth\n                          };\n            return results.ToArray();\n        }\n    }\n\n    [OperationContract]\n    [WebInvoke(Method = \"GET\", ResponseFormat = WebMessageFormat.Json)]\n    public VehicleDTO[] GetVehiclesByUserId(int userId)\n    {\n        using (var dbContext = new GSChallengeContext())\n        {\n            var results = from v in dbContext.Vehicles\n                          where v.UserId == userId\n                          select new VehicleDTO()\n                          {\n                              VehicleId = v.VehicleId,\n                              UserId = v.UserId,\n                              Registration = v.Registration,\n                              Alias = v.Alias,\n                              Disabled = v.Disabled\n                          };\n            return results.ToArray();\n        }\n    }\n</code></pre>\n\n<p>This is the code that makes the call:</p>\n\n<pre><code>    function ShowUserVehicleInfo()\n    {\n        var userId = $(\"#users\").val();\n        var outStr = \"\";\n        $.getJSON('Services/GSChallenge.svc/GetVehiclesByUserId?userId=' + userId,\n            function (data) {\n                $.each(data, function (index, elem) {\n                    outStr += \"&lt;div class=\\\"vehicleData\\\"&gt;\" +\n                            \"&lt;p&gt;Registration: \" + elem.Registration + \"&lt;/p&gt;\" +\n                            \"&lt;p&gt;Alias: \" + elem.Alias + \"&lt;/p&gt;\" +\n                            \"&lt;p&gt;Disabled: \" + elem.Disabled + \"&lt;/p&gt;\" +\n                            \"&lt;/div&gt;\"\n                });\n            }\n        );\n    }\n</code></pre>\n\n<p>I have searched before posting, but have not yet found anything that solves the problem - or even helps.</p>\n\n<p>Can anyone help?</p>\n"},{"tags":["wcf","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":109,"score":0,"question_id":13010101,"title":"telnet localhost 80 Could not open connection","body":"<p>telnet localhost 80 Connecting to localhost... Could not open connection to the host, on port 80: Connect failed </p>\n\n<p>I use Windows 7 , VS 2010 , iis manager 7 \nWhat I already tried. \n1. I ping localhost - everything fine \n2. Add role to firewall to port 80 \n3. by using netstat -a tried to find what happen in port 80. However I did find any mentions of port 80 in list \n4. tried just type telnet google.com 80 -> it's work \n5. I opened IIS manager -> it's work \n6. tried to type in address line in 3 different browser localhost or 127.0.0.1 don't work\nand fiddler tell me that [Fiddler] The socket connection to localhost failed. \nErrorCode: 10051. \nA socket operation was attempted to an unreachable network 127.0.0.1:80\n7. BTW I need localhost for making virtual directory and I install everything that suggest me VS 2010 and run cmd.exe and VS 2010 as admin \nand still get error that : Unable to create the virtual directory . could not find the server localhost on the local machine. Creating a virtual directory is only supported on the local IIS server. \n8. I also tried to make changes in host file (in /drive/etc/host ) (I mean 127.0.0.1 localhost  without #)</p>\n\n<ul>\n<li>After sometimes I realize that my iis manager in some unknow to me reazon doesn't contain default website. So try to make it by my own install .net flamework 3.5... and crush to two problem \n*.1. Website icon in iis manager have red cross \n*.2. Binging type doesn't contain http protocol </li>\n</ul>\n\n<p>Please any suggestion and advice. Look forward. Many thnx in advance !</p>\n"},{"tags":["asp.net",".net","wcf","web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13009250,"title":"Should I use WCF or ASP.NET to write webservice?","body":"<p>I want to write webservice on .NET (my Client can be Android, iOS, Mac OS, Website...). My question is that I should use WCF or ASP.NET to do this?</p>\n"},{"tags":["wcf","security","certificate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13006889,"title":"Use a Self-Signed Certificate in production for a WCF service hosted in IIS?","body":"<p>I have a project consisting of a website (ASP.NET WebForms) and a desktop application (WinForms + WPF). Right now I'm designing a WCF Service to be hosted in IIS, that will be consumed by these applications. Service is authenticated by an Active Directory. Unfortunatelly in WCF all security related stuff needs a certificate to work. </p>\n\n<p>On the development machine I know I can use a temporary certificate, but the problem is with production. The client server is accessible only from the intranet, so there is no SSL configured and no certificate (and it's not an option to buy one). </p>\n\n<p><em>My question is: can I use a IIS Self-Signed Certificate on production?</em> What are the disadventages of this? Until now I have used WCF only for simple AJAX calls, and haven't played with the security stuff and certificates. </p>\n"},{"tags":["sql","wcf","master-data-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12951515,"title":"How to add extra data to a member in MDS?","body":"<p>I'm running MDS on a virtual machine and trying to access the service from my host OS.\nI've been able to add something to the database but my data is all over the place and in the Master Data Manager (website) I don't see the new member.\nI suppose I shouldn't be using Attributes but something else but what and how? Are there tutorials because I can't find any ...?</p>\n\n<p>Here's the code I'm using:</p>\n\n<pre><code>International international = new International();\n\nEntityMembers entityMembers = new EntityMembers();\n\n// Set the modelId, versionId, and entityId.\nentityMembers.ModelId = new Identifier { Name = modelName };\nentityMembers.VersionId = new Identifier { Name = versionName };\nentityMembers.EntityId = new Identifier { Name = entityName };\nentityMembers.MemberType = memberType;\n\nCollection&lt;Member&gt; members = new Collection&lt;Member&gt;();\nMember aNewMember = new Member();\naNewMember.MemberId = new MemberIdentifier() { Name = employee.FullName, Code = aNewCode, MemberType = memberType };\n\nCollection&lt;MDS.Attribute&gt; attributes = new Collection&lt;MDS.Attribute&gt;();\n\nMDS.Attribute attrOrgUnit = new MDS.Attribute();\nattrOrgUnit.Identifier = new Identifier() { Name = \"OrganizationalUnit\" };\nattrOrgUnit.Value = employee.OrganizationalUnit;\nattrOrgUnit.Type = AttributeValueType.String;\nattributes.Add(attrOrgUnit);\n\naNewMember.Attributes = attributes.ToArray();\nmembers.Add(aNewMember);\nentityMembers.Members = members.ToArray();\n\n// Create a new entity member\nOperationResult operationResult = new OperationResult();\nclientProxy.EntityMembersCreate(international, entityMembers, false, out operationResult);\nHandleOperationErrors(operationResult);\n</code></pre>\n"},{"tags":["wcf","silverlight"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12741322,"title":"Asynchronous call in one more Asynchronous call not working in silverlight","body":"<p>I have a UI view lossreport.xaml in that below code is there</p>\n\n<pre><code>    LossReportTowGlassServiceClient wcf = new LossReportTowGlassServiceClient();\n            wcf.HouseholdSearchCompleted += (o, ev) =&gt;\n            {\n                string a = errorMessg.ToUpper();\n        //Code to work with ev\n            };\n            wcf.HouseholdSearchAsync(lossDate, txtPolicyNumber.Text, errorMessg);\n</code></pre>\n\n<p>in service.svc page </p>\n\n<pre><code>             try\n                {\n                    policyinq.retrieveHouseHoldPoliciesCompleted += new   retrieveHouseHoldPoliciesCompletedEventHandler(policyinq_retrieveHouseHoldPoliciesCompleted);\n\n                    policyinq.retrieveHouseHoldPoliciesAsync(reqh, searchCriteria, lossdate, true, string.Empty, string.Empty);\n                    break;\n                }\n                catch (Exception ex)\n                {\n                    Logger.Exceptions(\"\", \"HouseholdSearch\", ex);\n                    errorToSend = \"Household error\";\n                }\n\n     void policyinq_retrieveHouseHoldPoliciesCompleted(object sender,   retrieveHouseHoldPoliciesCompletedEventArgs e)\n    {\n        {\n            if (e.transactionNotification != null &amp;&amp; e.transactionNotification.transactionStatus == TransactionState.S)\n            {\n\n            }\n            else\n            {\n                ErrorHandling.ErrorSend(e.transactionNotification, \"HouseHold\");\n            }\n\n        };\n    }\n</code></pre>\n\n<p>now before retrieveHouseHoldPolicies is completed HouseholdSearchCompleted event is fired.How to make it wait </p>\n"},{"tags":["android","wcf","web-services"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":664,"score":0,"question_id":7890315,"title":"Consume WCF web service in Android application","body":"<p>Can anybody please share your experience, in consume a wcf web service in an android application. If it is possible please give me a code resource.</p>\n\n<p>Thank you </p>\n"},{"tags":["asp.net","wcf","rest","jsonp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13004133,"title":"Call to proxy endpoint","body":"<p>I have an asp.net page. It contains <code>&lt;asp:scriptmanager&gt;</code> to consume a WCF JSONP service.</p>\n\n<p>The service address is <code>a.svc</code></p>\n\n<p>I notice every time when javascript calls the service, it called <code>a.svc/js</code> first,\neven if I embed the content of <code>a.svc/js</code></p>\n\n<p>In my asp.net page, javascript still calls this address first, then calls the real rest service.</p>\n\n<p>How do I disable the call to <code>a.svc/js</code>?</p>\n"},{"tags":["c#","wcf","windows-azure-storage","etag","azure-table-storage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12996522,"title":"Retreiving the etag on an Azure Table storage query","body":"<p>I need to be able to retrieve the etag from an Azure query, and attach them to my entities. The service will be updating the entities on a separate thread, so I need to store the etag of when the entity was received so that it can be attached to the DataServiceContext on the other thread.</p>\n\n<p>So far, the only method I have found is doing this on the querying DataServiceContext:</p>\n\n<pre><code>context.Entities.Single(entityDescriptor =&gt;\n                        entityDescriptor.Entity == entity).ETag;\n</code></pre>\n\n<p>I am looking for a way that could be retreived when the entity is being serialized, or something that could be more streamlined, rather than having to search through the DataServiceContext on every iteration and adding it manually.</p>\n"},{"tags":["c#","wcf","linq","linq-to-sql"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12999338,"title":"\"Value Cannot Be Null\" when using LINQ to SQL to Group By and Sum results from a WCF Service request","body":"<p>I'm trying to use LINQ to SQL to sum a row in a a resultset returned from a WCF service. I'm able to use LINQ for basic selects, for order by, for filtering, etc.  So far so good.</p>\n\n<p>But when I try to Group By / Sum, I get an error message \"Value Cannot Be Null\" when trying to Take(5) from the query below.  (<code>results</code> is non-null and has 1000+s of items, but the <code>query</code> is null when we try to return it:) </p>\n\n<p><strong>EDIT:</strong> I've removed the invalid cast as mentioned in the answer below, instead selecting the aggregate results into a custom class written to order.  Now the page runs without error -- but the group by / sum doesn't work.... I just get the top five highest values in the results, not summed by group.    Why?</p>\n\n<pre><code>var query = (from h in results\n            group h by h.Order into hh                     \n            select new TopOrders()\n            {\n                Order = hh.Key,\n                Total= hh.Sum(r =&gt; r.Price)\n            }).OrderByDescending(i =&gt; i.Total);\n\nreturn query.Take(5).ToList();\n</code></pre>\n\n<p>Only possible wrinkle I can point to is that Order is itself a collection (OrderID, OrderName, etc.) and so I've tried grouping explicitly on hh.Key.Order.OrderID and so forth, to no effect.</p>\n\n<p>Anything I'm missing from what you can see?   Thanks.</p>\n"},{"tags":["c#","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13000947,"title":"Create Login Server","body":"<p>We are building social networking site in RoR. There will be many instance of the same server, i.e., deployments. Each deploy will have its own server along with MySQL database.</p>\n\n<p>I planed to make single login server where all users signing in will be redirected to that server, authenticated, and then redirected to appropriate server for further processing.</p>\n\n<p>I planned to make that server using either WCF or classic webservice on MsSQL.\nI have never done this kind of thing, and before I begin I have several questions.\n1. Is it better to make login server using RoR technology? I mean is there something that only WCF/Classic service can do and RoR cant?</p>\n\n<ol>\n<li>If I were to utilise WCF/classic service... is there a document that can give me some guidances?</li>\n</ol>\n"},{"tags":["asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3716,"score":1,"question_id":7800230,"title":"The remote server returned an error: (400) Bad Request while consumming a WCF Service","body":"<p>Please view the code given below. While the debug reaches the request.GetResponse() statement the error has been thrown. </p>\n\n<pre><code>Uri uri = new Uri(address);\nstring data = \"&lt;s:Envelope xmlns:s='http://schemas.xmlsoap.org/soap/envelope/'&gt;&lt;s:Body&gt;&lt;HasRole xmlns='http://tempuri.org/'&gt;&lt;userName&gt;\" + sid + \"&lt;/userName&gt;&lt;role&gt;\" + role + \"&lt;/role&gt;&lt;/HasRole&gt;&lt;/s:Body&gt;&lt;/s:Envelope&gt;\";\n\ndata.Replace(\"'\", \"\\\"\");\n\n// Create a byte array of the data we want to send  \nbyte[] byteData = UTF8Encoding.UTF8.GetBytes(data);\n\nif (uri.Scheme == Uri.UriSchemeHttps)\n{\n    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);\n    request.Method = \"POST\";// WebRequestMethods.Http.Post;\n    request.ContentLength = byteData.Length;\n    request.ContentType = \"application/soap+xml; charset=UTF-8\"; // \"text/xml; charset=utf-8\";\n    //request.ContentType = \"application/x-www-form-urlencoded\";\n\n    //Stream requestStream = request.GetRequestStream();\n    using (Stream writer = request.GetRequestStream())\n    {\n        writer.Write(byteData, 0, byteData.Length);\n    }\n    //writer.Close();\n\n    using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)\n    {\n        // Get the response stream  \n        StreamReader reader = new StreamReader(response.GetResponseStream());\n        string tmp = reader.ReadToEnd();\n        Response.Close();\n        Response.Write(tmp);\n    }\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["c#","wcf","entity-framework","list"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12996366,"title":"Pass list to client in WCF","body":"<p>My function in service look like this:</p>\n\n<pre><code>    public List&lt;X&gt; GetAll(string num)\n    {\n       TheContext  Mycontext = new TheContext();\n        IEnumerable&lt;X&gt; MyIEnumerable =\n     ((IObjectContextAdapter)Mycontext)\n     .ObjectContext.ExecuteStoreQuery&lt;X&gt;(\"select * from dbo.XXX where y='\"+num+\"'\");\n\n        List&lt;X&gt; MyList = MyIEnumerable.ToList();\n        return MyList;\n    }\n</code></pre>\n\n<p>Here the list OK.</p>\n\n<p>My client look like this:</p>\n\n<pre><code>static void Main(string[] args)\n    {\n        MyClient proxy = new MyClient ();\n        List&lt;X&gt; MyClientList = proxy.GetAll(\"980\").ToList();\n        proxy.Close();\n        Console.ReadLine();\n    }\n</code></pre>\n\n<p>Here have error:</p>\n\n<p>An error occurred while receiving the HTTP response. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.</p>\n\n<p>If i return from the function like this this work:</p>\n\n<pre><code>public List&lt;X&gt; GetAll(string num)\n {\n   List&lt;x&gt; MyList= new List&lt;x&gt;();\n   MyList.Add(new X(){...});\n   MyList.Add(new X(){...});\n   MyList.Add(new X(){...});   \n    return MyList;\n }\n</code></pre>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":184,"score":0,"question_id":6059216,"title":"WCF Medium Trust Environment Which bindings to use","body":"<p>A question in 70-513 exam asked which 2 bindings should you use for a medium trust environment. </p>\n\n<ol>\n<li>netTcpBinding </li>\n<li>basicHttpBinding </li>\n</ol>\n\n<p>Or </p>\n\n<ol>\n<li>netTcpBinding </li>\n<li>wsHttpBinding</li>\n</ol>\n\n<p>Does anyone know what the correct answer  is?</p>\n"},{"tags":["xml","wcf","binding","basichttpbinding","spml"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13001656,"title":"WCF servicebinding able to receive XML with Bare bodystyle","body":"<p>I am building a WCF service that is implementing the SPML standard. This means that one endpoint needs to be able to receive a number of XML request that is interpreted to Add/Modify/Delete commands. All XML request is starting with a request name tag defined by the standard.</p>\n\n<p>For instance:\n</p>\n\n<pre><code>&lt;SOAP:Header /&gt;\n&lt;SOAP:Body&gt;\n    &lt;ns0:addRequest xmlns:ns0='urn:oasis:names:tc:SPML:1:0'&gt;\n        &lt;identifier type='urn:oasis:names:tc:SPML:1:0#GUID'&gt;\n            &lt;id&gt;uid=Z3SP&lt;/id&gt;\n        &lt;/identifier&gt;\n        &lt;attributes&gt;\n            &lt;ns1:attr xmlns:ns1='urn:oasis:names:tc:DSML:2:0:core'\n                name='sn'&gt;\n                &lt;ns1:value&gt;Bobby&lt;/ns1:value&gt;\n            &lt;/ns1:attr&gt;             \n        &lt;/attributes&gt;\n    &lt;/ns0:addRequest&gt;\n&lt;/SOAP:Body&gt;\n</code></pre>\n\n<p></p>\n\n<p>My question is whether it is possible to send xml to a WCF service without the xml being wrapped in tags identifying the wcf service method name.</p>\n\n<p>I have tried setting the following on the webservice method.</p>\n\n<p><code>WebInvoke(BodyStyle = WebMessageBodyStyle.Bare)</code></p>\n\n<p>However I can not get this to work on a <code>basicHttpBinding</code>. </p>\n\n<p>Is this possible using a <code>basicHttpBinding</code>?</p>\n"},{"tags":["wcf","validation"],"answer_count":2,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":2449,"score":8,"question_id":457668,"title":"Reading a caller's IP address in WCF (OperationContext is null)?","body":"<p>I am validating users using the UserNamePasswordValidator.Validate(string username, string password) and the service is hosting itself (e.g. no IIS).</p>\n\n<p>The problem I have is that if the user fails the validation I want to track the users IP address. This works fine of the user gets validated, because then the OperationContext has been initialized (it is null inside the validate method and not created until later).</p>\n\n<p>Does anyone know how to get the clients IP address either in the validate method or before the validate method has been executed? </p>\n\n<p>Yes, I know about how to get the IP address using RemoteEndpointMessageProperty but like I said, it never get that far if validation fails :-)</p>\n"},{"tags":[".net","wcf","web-services","udp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":410,"score":0,"question_id":1232007,"title":"Web Services on UDP","body":"<p>I need to convert an existing Web Service (done on .Net 2.0) which runs on SOAP/HTTP to run on UDP.</p>\n\n<p>I found a ton of resources on web on explaining why and how I should go about doing it. But all of them too general. </p>\n\n<p>Can someone point me to a example/resource of some sort specific to .Net?</p>\n"},{"tags":["c#","wcf",".net-3.5","wcf-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":548,"score":4,"question_id":3661320,"title":"WCF 3.5 and UDP","body":"<p>Is it possible to make udp binding in wcf 3.5 or it's only possible in .net 4.0 ?</p>\n\n<p>If it's possible in .net 3.5 could somebody give me an example please ?</p>\n\n<p>thanks</p>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":12996299,"title":"How to expose MEX when I need the service to have NTLM authentication","body":"<p>I'm developing a WCF service that is RESTful and SOAP, now both of them needs to be with NTLM authentication.</p>\n\n<p>I also want to expose a MEX endpoint so that others can easily reference the service and work with it.</p>\n\n<p>Now when I set IIS to require windows authentication I can use the REST service and make calls to the service succesfully, but when I want to reference the service with SVCUTIL it throws an error that it requires to be anonymous.</p>\n\n<p>Here's my web.config:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;system.serviceModel&gt;\n&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\"/&gt;\n&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"basicHttpBinding\" maxReceivedMessageSize=\"214748563\" maxBufferSize=\"214748563\" maxBufferPoolSize=\"214748563\"&gt;\n      &lt;security mode=\"TransportCredentialOnly\"&gt;\n        &lt;transport clientCredentialType=\"Ntlm\"&gt;\n\n        &lt;/transport&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n  &lt;webHttpBinding&gt;\n    &lt;binding name=\"webHttpBinding\" maxReceivedMessageSize=\"214748563\" maxBufferSize=\"214748563\" maxBufferPoolSize=\"214748563\"&gt;\n      &lt;security mode=\"TransportCredentialOnly\"&gt;\n        &lt;transport clientCredentialType=\"Ntlm\"&gt;\n\n        &lt;/transport&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/webHttpBinding&gt;\n  &lt;mexHttpBinding&gt;\n    &lt;binding name=\"mexHttpBinding\"&gt;&lt;/binding&gt;\n  &lt;/mexHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;standardEndpoints&gt;\n  &lt;webHttpEndpoint&gt;\n    &lt;standardEndpoint name=\"\" automaticFormatSelectionEnabled=\"true\" helpEnabled=\"True\"&gt;\n    &lt;/standardEndpoint&gt;\n  &lt;/webHttpEndpoint&gt;\n&lt;/standardEndpoints&gt;\n&lt;services&gt;\n  &lt;service name=\"Intel.ResourceScheduler.Service\" behaviorConfiguration=\"Meta\"&gt;\n    &lt;clear /&gt;\n    &lt;endpoint address=\"soap\" name=\"SOAP\" binding=\"basicHttpBinding\" contract=\"Intel.ResourceScheduler.Service.IResourceSchedulerService\" listenUriMode=\"Explicit\" /&gt;\n    &lt;endpoint address=\"\" name=\"rest\" binding=\"webHttpBinding\" behaviorConfiguration=\"REST\" contract=\"Intel.ResourceScheduler.Service.IResourceSchedulerService\" /&gt;\n    &lt;endpoint address=\"mex\" name=\"mex\" binding=\"mexHttpBinding\" behaviorConfiguration=\"\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;endpointBehaviors&gt;\n    &lt;behavior name=\"REST\"&gt;\n      &lt;webHttp /&gt;\n    &lt;/behavior&gt;\n    &lt;behavior name=\"WCFBehavior\"&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n    &lt;/behavior&gt;\n\n  &lt;/endpointBehaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"Meta\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n    &lt;/behavior&gt;\n    &lt;behavior name=\"REST\"&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n    &lt;/behavior&gt;\n    &lt;behavior name=\"WCFBehavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n    &lt;/behavior&gt;\n    &lt;behavior name=\"\"&gt;\n      &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p></p>\n\n<p>Any help will be appreciated.</p>\n"},{"tags":["c#",".net","wcf","visual-studio-2010","serialization"],"answer_count":3,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1038,"score":5,"question_id":1700553,"title":"WCF AddServiceReference causing custom tool error, not producing proxy","body":"<p>A problem with \"Add Service Reference\", and actually with SvcUtil over all its features.\nIn order to reproduce you just need to add an OperationContract with argument or returning the following class :</p>\n\n<pre><code>[XmlSchemaProvider(\"MySchema\")]\npublic class MyStructure : IXmlSerializable\n{\n    private XmlElement e;\n\n    private static void Func(object o, ValidationEventArgs args)\n    {\n    }\n\n    public static XmlQualifiedName MySchema(XmlSchemaSet xs)\n    {\n        //xs.XmlResolver = new XmlUrlResolver();             \n        XmlSchema s = XmlSchema.Read(new XmlTextReader(new StringReader(\"&lt;?xml version=\\\"1.0\\\"?&gt;&lt;xs:schema xmlns:xs=\\\"http://www.w3.org/2001/XMLSchema\\\"&gt;&lt;xs:complexType name=\\\"MyStructure\\\"&gt;&lt;xs:sequence&gt;&lt;xs:any /&gt;&lt;/xs:sequence&gt;&lt;/xs:complexType&gt;&lt;/xs:schema&gt;\")), null);\n\n        xs.Add(s);\n        return new XmlQualifiedName(\"MyStructure\");\n    }\n\n    #region IXmlSerializable Members\n\n    public System.Xml.Schema.XmlSchema GetSchema()\n    {\n        throw new NotImplementedException();\n    }\n\n    public void ReadXml(XmlReader reader)\n    {\n       XmlDocument doc = new XmlDocument();\n       e = (XmlElement)doc.ReadNode(reader);\n    }\n\n    public void WriteXml(XmlWriter writer)\n    {\n        e.WriteTo(writer);\n    }\n\n    #endregion\n}\n</code></pre>\n\n<p>The result is that when you use AddWebReference or AddSerivceReference without a reference to the class library containing the MyStructure type, everything will be fine ad you will get an xmlElement representation at the auto created proxy.</p>\n\n<p>However, when you have a reference you will get the following warning :</p>\n\n<p>================</p>\n\n<p>Warning 1\tCustom tool warning: Cannot import wsdl:portType\nDetail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter\nError: Referenced type 'ServiceLibrary.MyStructure, ServiceLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' with data contract name 'MyStructure' in namespace '' cannot be used since it does not match imported DataContract. Need to exclude this type from referenced types.\nXPath to Error Source: //wsdl:definitions[@targetNamespace='<a href=\"http://tempuri.org/\" rel=\"nofollow\">http://tempuri.org/</a>']/wsdl:portType[@name='IService1']  \\Projects\\WCFSample\\WCFExample\\TestAddReference\\Service References\\ServiceReference1\\Reference.svcmap\t1\t1\tTestAddReference</p>\n\n<p>======================</p>\n\n<p>And no proxy will be generated for you.</p>\n\n<p>Now, the internet is full with descriptions of this when you have a generic DataContract, and/or using IsReference attribute.</p>\n\n<p>This is a much serious problem, since any non-typed data will do this problem.\nCould not find any way to solve the problem. What if I want to know the type at the client side, by sharing the class library of the contracts ?</p>\n"},{"tags":["c#","wcf","self-hosting","wcf-hosting"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":961,"score":5,"question_id":5993563,"title":"Can I automatically host all services in app.config when using SelfHosting?","body":"<p>I'm writing an application which needs to host several WCF services.  One of the strengths of WCF is the ability to configure services without having to recompile, by specifying settings in the app.config file.</p>\n\n<p>When self-hosting, there does not appear to be an out-of-the-box way to automatically host services which are in the app.config file.  I found <strong><a href=\"http://stackoverflow.com/questions/3740193/can-wcf-self-hosted-applications-create-servicehosts-automatically-using-the-app\">this question</a></strong> which mentions a possible solution of dynamically enumerating services listed in app.config at runtime, and creating a ServiceHost for each.</p>\n\n<p>However, my services, contracts, and the hosting application are all in different assemblies.  This causes <code>Type.GetType(string name)</code> to fails to locate my service type (returns <code>null</code>) because it is defined in a different assembly.</p>\n\n<p><strong>How can I reliably host all services listed in the app.config file dynamically (i.e., without hard-coding <code>new ServiceHost(typeof(MyService))</code> in my self-hosting application?</strong></p>\n\n<p>Note: My app.config was generated using the \"WCF Configuration Editor\" in Visual Studio 2010.</p>\n\n<p>Note also: My primary goal is to have this driven by the app.config file so there is a single point of configuration.  I don't want to have to configure this in a separate location.</p>\n\n<p><strong>EDIT</strong>: I am able to read the app.config file (see <strong><a href=\"http://stackoverflow.com/questions/3740193/can-wcf-self-hosted-applications-create-servicehosts-automatically-using-the-app\">here</a></strong>), but need to be able to resolve types in different assemblies.</p>\n\n<p><strong>EDIT</strong>: One of the answers below prompted me to try specifying the AssemblyQualifiedName in app.config instead of just the basic type name.  This was able to get around the <code>Type.GetType()</code> problem, however <code>ServiceHost.Open()</code> now fails with an <code>InvalidOperationException</code> regardless of how I attain the type:</p>\n\n<pre><code>// Fails\nstring typeName = typeof(MyService).AssemblyQualifiedName;\nType myType = Type.GetType(typeName);\nServiceHost host = new ServiceHost(myType);\nhost.Open(); // throws InvalidOperationException\n\n// Also fails\nType myType2 = typeof(MyService);\nServiceHost host2 = new ServiceHost(myType2);\nhost2.Open(); // throws InvalidOperationException\n</code></pre>\n\n<p>Exception details:</p>\n\n<p><code>Service 'SO.Example.MyService' has zero application (non-infrastructure) endpoints. This might be because no configuration file was found for your application, or because no service element matching the service name could be found in the configuration file, or because no endpoints were defined in the service element.</code></p>\n\n<p>I guess WCF attempts to match the literal string for the service name when parsing the app.config file internally.</p>\n\n<p><strong>EDIT/ANSWER</strong>: What I ended up doing was basically what was in the answer below.  Instead of using <code>Type.GetType()</code> I know that all of my services are in the same assembly, so I switched to:</p>\n\n<pre><code>// Get a reference to the assembly which contain all of the service implementations.\nAssembly implementationAssembly = Assembly.GetAssembly(typeof(MyService));\n...\n// When loading the type for the service, load it from the implementing assembly.\nType implementation = implementationAssembly.GetType(serviceElement.Name);\n</code></pre>\n"},{"tags":["wcf"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":366,"score":3,"question_id":4658731,"title":"WCF client side List<> problem","body":"<p>Hey there.. i got a WCF service with a method (GetUserSoftware)to send a List to a client.</p>\n\n<p>the software i have difined like this:</p>\n\n<pre><code>[DataContract]\npublic class Software\n{\n    public string SoftwareID { get; set; }\n    public string SoftwareName { get; set; }\n    public string DownloadPath { get; set; }\n    public int PackageID { get; set; }\n\n}\n</code></pre>\n\n<p>the method is going through my db to get all software availeble to the clien, and generates a list of that to send back to the client.</p>\n\n<p>problem is i on the client side the list is turned into an array. and every item in that array dont contain any of my software attributs.</p>\n\n<p>i have debugged my way through the server side. and seen that the list its about to send is correct. with the expected software and attributs in it.</p>\n\n<p>any one know how to work around this or know what i can do ?</p>\n"},{"tags":["c#","wcf","debugging"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12879268,"title":"c# WCF Service Should Not Call Enum at Startup","body":"<p>I am debugging a C# project and no matter where I place the break point it starts by calling an enum switch in the service at start up.  I thought I was calling it, so I removed the JavaScript from the .aspx file.  In short I do not want the service calling anything at startup, but I cannot find where this ghost is being called from.  It still does it, even after I remove the only calls I have in the program.  To further emphasize this, I put a bogus enum in, and found it calling that one for a period of time.</p>\n\n<p>I am using VS 2010.  Version 10.0.40219.1 SP1.  Not sure how to provide a stack trace though.</p>\n\n<pre><code>[ServiceContract(Namespace = \"\")]\n   // [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\n[AspNetCompatibilityRequirements(RequirementsMode =     AspNetCompatibilityRequirementsMode.Required)]\n[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]\n//[ScriptService]\npublic class Service1 : System.Web.Services.WebService\n{\n\n\n    [OperationContract]\n  //  [WebMethod(EnableSession = true)]\n    public string Calculate(Operation op, string a, int b)\n    {\n\n\n        switch (op)\n        {\n\n            case Operation.bogus:\n\n                string cat = \"meow1a\";\n                return cat;\n\n            case Operation.sendMessage:\n\n                SendMessages sendAmessage = new SendMessages();\n                string messageSent = sendAmessage.messagesToSend(a);\n\n\n                return messageSent;\n</code></pre>\n"},{"tags":["c#","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12998556,"title":"C# Save image (byte[]) via Webservice","body":"<p>Im trying to make a webservice that can accept a byte[] of an image, and save that to the webserver.\nThe code consists of two parts, the client that sends the data- and the webservice that gets the data.\nIm getting the following error when trying to upload an image:\n<strong>System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: A generic error occurred in GDI+.</strong></p>\n\n<p>myImage is a System.Drawing image.</p>\n\n<pre><code>private byte[] imageToByteArray(Image imageIn)\n    {\n        MemoryStream ms = new MemoryStream();\n        imageIn.Save(ms,ImageFormat.Png);\n        return ms.ToArray();\n    }\n\nusing (Something.ClientServiceClient client = new Something.ClientServiceClient())\n            {\n                client.Open();\n                client.uploadScreenShot(imageToByteArray(myImage));\n            }\n</code></pre>\n\n<p>The webservice looks as follows:</p>\n\n<pre><code>public void uploadHofScreen( byte[] imgArray)\n    {\n        Image nImg = byteArrayToImage(imgArray);\n        Bitmap bitmap = new Bitmap(nImg);\n        saveJpeg(\"/1/test.jpg\", bitmap, 85L);\n    }\n\n\nprivate void saveJpeg(string path, Bitmap img, long quality)\n    {\n        EncoderParameter qualityParam = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, quality);\n        ImageCodecInfo jpegCodec = getEncoderInfo(\"image/jpeg\");\n        if (jpegCodec == null)\n            return;\n        EncoderParameters encoderParams = new EncoderParameters(1);\n        encoderParams.Param[0] = qualityParam;\n        img.Save(\"XXXX\" + path, jpegCodec, encoderParams);\n    }\n\n    private ImageCodecInfo getEncoderInfo(string mimeType)\n    {\n        ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();\n        for (int i = 0; i &lt; codecs.Length; i++)\n            if (codecs[i].MimeType == mimeType)\n                return codecs[i];\n        return null;\n    } \n</code></pre>\n\n<p>Both the webconfig and the appconfig has the following readerQuotas:</p>\n\n<pre><code>&lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n</code></pre>\n\n<p>Any advice what the issue is?</p>\n"},{"tags":["wcf","dynamics-gp","econnect"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":387,"score":0,"question_id":5021790,"title":"In order to use eConnect 11.0 for Dynamics GP 2010, does the eConnect windows service have to be installed on the client computer?","body":"<p>I am working on a Windows Forms app that will integrate with Dynamics GP 2010, using the eConnect WCF service.</p>\n\n<p>The eConnect Windows service is defaulted to only have the net.pipe binding, which would indicate that every client machine that will run my Windows Forms app will need to also have the eConnect Windows service also installed.</p>\n\n<p>Is it possible to use the eConnect Windows service remotely?  So that it can be installed on one server and have several client machines connect to it? I was thinking of modifying the config file for the Windows service to add a net.tcp binding, but I'm not sure if that would be supported by the service and Googling hasn't turned up much.</p>\n"},{"tags":[".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12997864,"title":"WCF Service To Transfer 50K objects to client","body":"<p>Even after reading so much about WCF, I am unclear what would be THE BEST approach to a very common scenario like the one below </p>\n\n<p>The client is a windows desktop application which makes a call to a WCF service. (uses .NET TCP Binding, Per Session). The service needs to return more than 50K objects. <em>eg. List</em> - The Trade class has around 20 simple properties.</p>\n\n<p>I am thinking to use 'TransferMode = Streamed' but I will lose the 'PerSession' instancing in that case. </p>\n\n<p>I am looking for some design solutions and some best practices to such common scenarios.</p>\n"},{"tags":["wcf","authentication","connection","odata","edmx"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":467,"score":3,"question_id":8520209,"title":"Changing connection string at runtime for OData/WCF Data Service which uses basic authentication","body":"<p>I have an ODATA services with a single schema. These point to a development database, and is served through a WCF Data Service which is then used by clients running Excel/Powerpivot to fetch their own data for reports and such.</p>\n\n<p>The service is secured at runtime through pretty much the same basic authentication explained here: <a href=\"http://msdn.microsoft.com/en-us/data/gg192997\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/data/gg192997</a></p>\n\n<p>Now how this needs to work in the live environment is sit on the server and connect to different databases based on the username/password supplied. the Users will be typing in  'username@clientID' and 'password'. 'username@clientID' is then split()  and username/password is checked against the SQL database. But the database server URL to check against will be determined by ClientID.</p>\n\n<p>Also, once it is authorized the WCF data service needs to return data from the Database corresponding to the ClientID.</p>\n\n<p>The approach I tried was to modify the connection string in the web.config file, but this doesn't work because it says the file is read-only. I'm not even sure if this would have worked at all. What I need to do is get the EDMX/WCF Data service to return the data from the correct database. Here's what I tried to do:</p>\n\n<pre><code>    private static bool TryAuthenticate(string user, string password, out IPrincipal principal)\n    {\n\n        Configuration myWebConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration(\"~\");\n        myWebConfig.AppSettings.Settings[\"test\"].Value = \"Hello\";\n        myWebConfig.Save();\n\n        string newConnStr = myWebConfig.ConnectionStrings.ConnectionStrings[\"IntelCorpEntities\"].ToString();\n        newConnStr.ToString().Replace(\"SERGEIX01\", \"SERVERX01\");\n        myWebConfig.ConnectionStrings.ConnectionStrings[\"IntelCorpEntities\"].ConnectionString = newConnStr;            \n        myWebConfig.Save();\n\n        if (user.ToLower().Equals(\"admin\") &amp;&amp; password.Equals(\"password\"))\n        {\n            principal = new GenericPrincipal(new GenericIdentity(user), new string[] { \"Users\" });\n            return true;\n        }\n        else\n        {\n            principal = null;\n            return false;\n        }\n    }\n</code></pre>\n"},{"tags":["wcf","rest","entity-framework-4"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1726,"score":1,"question_id":4124086,"title":"unable to return json data, WCF Resful Service .NET 4.0","body":"<p>I recently set up a WCF Resful Service with Entity Framework 4.0\nIt works with XML perfectly, however when I try to return it in json format I got </p>\n\n<pre><code>HTTP/1.1 504 Fiddler - Receive Failure\nContent-Type: text/html\nConnection: close\nTimestamp: 01:11:06.453\n\nReadResponse() failed: The server did not return a response for this request.\n</code></pre>\n\n<p>Any Ideas??</p>\n\n<p>thanks in advance</p>\n\n<p><strong>Edit:</strong> \nThe Code is quite normal, actually i tried two way of doing it, but no luck.</p>\n\n<p>Hard code ResponseFormat Way:</p>\n\n<pre><code>[OperationContract]\n        [WebInvoke(Method = \"GET\",\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            ResponseFormat = WebMessageFormat.Json,\n            UriTemplate = \"Deal/{id}\")]\n        Deals XMLDealDetail(string id);\n</code></pre>\n\n<p>Dynamically Set ResponseFormat Way:</p>\n\n<pre><code>    [OperationContract]\n            [WebInvoke(Method = \"GET\",\n                BodyStyle = WebMessageBodyStyle.Wrapped,\n                ResponseFormat = WebMessageFormat.Json,\n                UriTemplate = \"Deal/{id}/{format}\")]\n            Deals XMLDealDetail(string id, string format);\n\n    public Deals XMLDealDetail(string id, string format)\n            {\n                OutgoingWebResponseContext context = WebOperationContext.Current.OutgoingResponse;\n\n                if (format.ToLower() == \"json\")\n                {\n                    context.Format = WebMessageFormat.Json;\n                    context.ContentType = \"application/json\";\n                }\n                else\n                {\n                    context.Format = WebMessageFormat.Xml;\n                }\n//Deals is a Entity Class defined in edmx file\n                    Deals deal = DealsServices.GetById(id);\n                    return deal;\n\n            }\n</code></pre>\n\n<p>where am i missing?? </p>\n"},{"tags":["wcf","atom","datacontractserializer","odata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":924,"score":1,"question_id":4124196,"title":"How to deserialize object from OData Atom feed?","body":"<p>I am trying to parse response from an OData REST service. When response is in JSON format, it is easy to use <code>ReadAsJsonDataContract</code> method from WCF REST starter kit. However things seem to be more complicated in case the response is an Atom feed. This is an example:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\" standalone=\"yes\"?&gt;\n&lt;entry xml:base=\"http://localhost:64172/BookshopService.svc/\" xmlns:d=\"http://schemas.microsoft.com/ado/2007/08/dataservices\" xmlns:m=\"http://schemas.microsoft.com/ado/2007/08/dataservices/metadata\" xmlns=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;id&gt;http://localhost:64172/BookshopService.svc/Books(89)&lt;/id&gt;\n  &lt;title type=\"text\"&gt;&lt;/title&gt;\n  &lt;updated&gt;2010-11-08T09:44:21Z&lt;/updated&gt;\n  &lt;author&gt;\n    &lt;name /&gt;\n  &lt;/author&gt;\n  &lt;link rel=\"edit\" title=\"Books\" href=\"Books(89)\" /&gt;\n  &lt;link rel=\"http://schemas.microsoft.com/ado/2007/08/dataservices/related/OrderLines\" type=\"application/atom+xml;type=feed\" title=\"OrderLines\" href=\"Books(89)/OrderLines\" /&gt;\n  &lt;category term=\"BookshopModel.Books\" scheme=\"http://schemas.microsoft.com/ado/2007/08/dataservices/scheme\" /&gt;\n  &lt;content type=\"application/xml\"&gt;\n    &lt;m:properties&gt;\n      &lt;d:Id m:type=\"Edm.Int32\"&gt;89&lt;/d:Id&gt;\n      &lt;d:Author&gt;Martin Fowler&lt;/d:Author&gt;\n      &lt;d:Title&gt;Analysis Patterns&lt;/d:Title&gt;\n      &lt;d:Price m:type=\"Edm.Decimal\"&gt;50.20&lt;/d:Price&gt;\n    &lt;/m:properties&gt;\n  &lt;/content&gt;\n&lt;/entry&gt;\n</code></pre>\n\n<p>So the actual object is serialized in \"content/m:properties\" element. And of course this can't be handled by <code>DataContractSerializer</code> that expects a different schema.</p>\n\n<p>Does anyone know what technique can be used to deserialize the content of OData atom m:properties element?</p>\n"},{"tags":["wcf","rest","httpclient"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1188,"score":1,"question_id":4366691,"title":"WCF REST StarterKit HttpClient: Timeout from HttpClient when going remote - works fine locally or via local proxy","body":"<p>I'm getting repeated Microsoft.Http.HttpStageProcessingException timeout exceptions while trying to use the REST Starter kit's HttpClient.  This has been working fine when used locally, but is failing when going remote.</p>\n\n<p>The client is a c# process that runs as a windows service and uses HttpClient for making REST calls to our Java app server running in Tomcat6.  When I started troubleshooting this, I came across a similar post on MSDN's forums: <a href=\"http://social.msdn.microsoft.com/Forums/en/wcf/thread/88487549-ce45-49d3-95e4-7ed413cbcfbc\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/en/wcf/thread/88487549-ce45-49d3-95e4-7ed413cbcfbc</a></p>\n\n<p>Unfortunately, I can't isolate it to simply a Content-Length problem.</p>\n\n<p>If anyone has any suggestions on how to solve this problem, I would greatly appreciate it - even if it means using HttpWebRequest directly.  I understand HttpClient uses HttpWebRequest under the hood, but perhaps it's making some assumptions.</p>\n"},{"tags":[".net","wcf","silverlight","ado.net","wcf-data-services"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":206,"score":0,"question_id":9484685,"title":"Best way to access a oracle database from silverlight?","body":"<p>I have been looking at the various methods for accessing a database from silverlight and all of the different ways are confusing me. I have come across so many methods and terms and I am not sure what is the difference between them or how they are related. There is ADO.NET, WCF Data Services, Linq to SQL, Linq to Entities, etc. What is the difference between them, especially what is the difference between WCF Data Services and Linq to Entities? </p>\n\n<p>I am trying to find the best way to access an oracle database from silverlight and from what I have found, Linq to SQL will not work because it only works on SQL Server. I found a tutorial of creating a ADO.NET entity model from my database and then creating a WCF Data Service for it, but linq I can use to query it is quite limited (no projection, where is limited, etc)</p>\n\n<p>What would be the best way to go about querying my oracle database preferably using Linq in the silverlight application?</p>\n"},{"tags":["javascript","wcf","iis7","webbrowser"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12996111,"title":"WebBrowser running on WCF","body":"<p>I need to query a website from my WCF service as if it was a user, this website uses Javascript and I need to use a WinForms WebBrowser to make it work.\nAll works fine on my local but when I released it to production, no matter what requests are sent to the website all I get is a default page, I suppose Javascript isn't working.</p>\n\n<p>What am I missing? How can I fix this?</p>\n\n<p>Here is my WCF code</p>\n\n<pre><code>public Products Products(string country, string currency, int category)\n    {\n        var products = new Products(country, currency, category);\n\n        var sb = new StringBuilder();\n        sb.Append(\"something\");\n\n        var waiter = new ManualResetEvent(false);\n        var staThread = new Thread(() =&gt;\n        {\n            using (var browser = new WebBrowser())\n            {\n                _handler = (s, e) =&gt;\n                    {\n                     products.AddRange(OnBrowserDocumentCompleted(s, e));\n\n                     waiter.Set();\n                     Application.ExitThread();\n                     };\n\n                browser.DocumentCompleted += _handler;\n\n                browser.Navigate(sb.ToString());\n                Application.Run();\n            }\n        });\n\n        staThread.SetApartmentState(ApartmentState.STA);\n        staThread.Start();\n        staThread.Join();\n\n        var timeout = TimeSpan.FromSeconds(30);\n        waiter.WaitOne(timeout);\n\n        return products;\n    }\n</code></pre>\n\n<p>And the Completed event</p>\n\n<pre><code>private IEnumerable&lt;Product&gt; OnBrowserDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)\n    {\n        var browser = (WebBrowser)sender;\n        browser.Stop();\n\n        var html = browser.DocumentText;\n        var doc = new HtmlDocument();\n        doc.LoadHtml(html);\n\n        var mytask = Task.Factory.StartNew(() =&gt; GetList(doc));\n\n        browser.DocumentCompleted -= _handler;\n        browser.Dispose();\n\n        return mytask.Result;\n    }\n</code></pre>\n"},{"tags":["wcf","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12995102,"title":"Soap 1.2 Endpoint Performance","body":"<p>I have a Client >> WCF Host Service >> SOAP 1.2 Service setup and i'm having performance issues on the SOAP Java  proxy.  I have no control over how the Java service is setup, aside from the endpoint config.</p>\n\n<p>I have the Client running Asynchronously, and the host WCF service running in Async pattern, but i see the SOAP 1.2 proxy bottlenecking and handling the requests in a Synchronous way.</p>\n\n<p>Can someone take a look at the auto-generated SOAP 1.2 configuration below, from the SOAP 1.2 Service wsdl?</p>\n\n<p>Is there a way to configure this for Async way and improve performance? Could be configured for SOAP 1.1? </p>\n\n<pre><code> &lt;?xml version=\"1.0\"?&gt;\n   &lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"WebserviceListenerSoap12Binding\" closeTimeout=\"00:30:00\"\n          openTimeout=\"00:30:00\" receiveTimeout=\"00:30:00\" sendTimeout=\"00:30:00\"&gt;\n          &lt;textMessageEncoding maxReadPoolSize=\"64\" maxWritePoolSize=\"16\"\n            messageVersion=\"Soap12\" writeEncoding=\"utf-8\"&gt;\n            &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"20000000\"\n              maxArrayLength=\"20000000\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;/textMessageEncoding&gt;\n          &lt;httpTransport manualAddressing=\"false\" maxBufferPoolSize=\"20000000\"\n            maxReceivedMessageSize=\"20000000\" allowCookies=\"false\" authenticationScheme=\"Anonymous\"\n            bypassProxyOnLocal=\"false\" decompressionEnabled=\"true\" hostNameComparisonMode=\"StrongWildcard\"\n            keepAliveEnabled=\"true\" maxBufferSize=\"20000000\" proxyAuthenticationScheme=\"Anonymous\"\n            realm=\"\" transferMode=\"Buffered\" unsafeConnectionNtlmAuthentication=\"false\"\n            useDefaultWebProxy=\"true\" /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://10.18.2.117:8080/java/webservice/WebserviceListener.WebserviceListenerHttpSoap12Endpoint/\"\n        binding=\"customBinding\" bindingConfiguration=\"WebserviceListenerSoap12Binding\"\n        contract=\"ResolveServiceReference.WebserviceListenerPortType\"\n        name=\"WebserviceListenerHttpSoap12Endpoint\" /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf","message","behavior","inspector"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":931,"score":3,"question_id":6309367,"title":"How do you configure a MessageInspector when using StandardEndpoints in WCF REST 4.0","body":"<p>I'm trying create and configure a Message Inspector to perform some authentication of a WCF Rest HTTP request. I'm using 4.0 so trying to steer clear of the WCF Starter Kit although I have managed to get an old RequestInterceptor working in the way I want. The problem with using RequestInterceptor is that I lost the automaticFormatSelectionEnabled features provided by WebHttpBehavior which I really want to keep.</p>\n\n<p>So my question is how do I configure the Message Inspector in a way that I still use the WebHttpBehavior and keep it's features. </p>\n\n<p>My web.config looks like this </p>\n\n<pre><code>    &lt;standardEndpoints&gt;\n  &lt;webHttpEndpoint&gt;\n    &lt;!-- the \"\" standard endpoint is used by WebServiceHost for auto creating a web endpoint. --&gt;\n    &lt;standardEndpoint name=\"\" helpEnabled=\"true\" automaticFormatSelectionEnabled=\"true\" /&gt;\n    &lt;!-- Disable the help page for the directory end point--&gt;\n    &lt;standardEndpoint name=\"DirectoryEndpoint\"/&gt;\n  &lt;/webHttpEndpoint&gt;\n&lt;/standardEndpoints&gt;\n</code></pre>\n"},{"tags":[".net","wcf","caching"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12948921,"title":"Distributed Caching for frequently changing data","body":"<p>I want to pool my connection objects (not SQL connection objects) across multiple instances of my service (specifically, my service will be deployed on a web farm and all instances will manage a common pool). These objects will be updated frequently. I also want to persist my connection objects so that I can recover them in case an instance goes down.\n<br/>\n<br/>\nAny solutions (out-of-the-box or otherwise) or suggestions which will help me achieve this?\n<br/>\n<br/>\nSo far I have come across EntLib Caching Block with Data Access Block to persist data. However, Caching block is not recommended for frequently changing data.</p>\n"},{"tags":["c#","wcf"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":8428,"score":1,"question_id":991480,"title":"Error when trying to consume WCF service returning file","body":"<p>One of my methods returns byte[], of a file. All other methods return either string objects or custom objects</p>\n\n<p>I can view the WSDL via a browser and as i have used WCfExtras, I can even view the documentation. </p>\n\n<p>In my test app, C# web application, I add the reference to my svc, hosted on a test server. I get an error as such:</p>\n\n<pre><code>     The document was understood, but it could not be processed.\n  - The WSDL document contains links that could not be resolved.\n  - There was an error downloading ...\n  - Unable to connect to remote server\n  - No connection could be made because the target machine actively refused it\n\n    Content Type application/soap+xml; charset=utf-8 was not supported by service .  The client and service bindings may be mismatched.\n    The remote server returned an error: (415) Cannot process the message because the content type 'application/soap+xml; charset=utf-8' was not the expected type 'text/xml; charset=utf-8'..\n    If the service is defined in the current solution, try building the solution and adding the service reference again.\n</code></pre>\n\n<p>This is my app.config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"TestApp.Properties.Settings.TestDBConnectionString\"\n      connectionString=\"Data Source=192.168.2.130;Initial Catalog=TestDB;Persist Security Info=True;User ID=sa;Password=xerox\"\n      providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" /&gt;\n  &lt;/system.web&gt;\n  &lt;!-- When deploying the service library project, the content of the config file must be added to the host's \n  app.config file. System.Configuration does not support config files for libraries. --&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"TestApp.Service1Behavior\"\n        name=\"TestApp.SearchService\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"Sample.WsdlSampleEndpointBehavior\"\n          binding=\"basicHttpBinding\" bindingConfiguration=\"WsHttpMtomBinding\" contract=\"TestApp.ISearchService\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8731/TestApp/Service1/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n       &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"Sample.WsdlSampleEndpointBehavior\"&gt;\n          &lt;wsdlExtensions location=\"http://localhost:8731/TestApp/Service1/\"/&gt;\n        &lt;/behavior&gt;\n        &lt;/endpointBehaviors&gt;\n        &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"TestApp.Service1Behavior\"&gt;\n          &lt;!-- To avoid disclosing metadata information, \n          set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, \n          set the value below to true.  Set to false before deployment \n          to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;extensions&gt;\n      &lt;behaviorExtensions&gt;\n        &lt;!-- Declare that we have an extension called WSDL Extras--&gt;\n        &lt;add name=\"wsdlExtensions\" type=\"WCFExtras.Wsdl.WsdlExtensionsConfig, WCFExtras, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\"/&gt;\n      &lt;/behaviorExtensions&gt;\n    &lt;/extensions&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"WsHttpMtomBinding\" messageEncoding=\"Mtom\" transferMode=\"StreamedResponse\" /&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Any ideas on how I would resolve this? Should I have 2 different bindings, one for methods returning non bytes[] and Mtom for method returning byte[]? If so how does one apply bindings per method exposed?</p>\n\n<p>Tried running it with WcfTestClient.exe and this is the error</p>\n\n<pre><code>rror: Cannot import wsdl:portTypeDetail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporterError: Schema with target namespace 'http://tempuri.org/' could not be found.XPath to Error Source: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='ISearchService']Error: Cannot import wsdl:bindingDetail: There was an error importing a wsdl:portType that the wsdl:binding is dependent on.XPath to wsdl:portType: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='ISearchService']XPath to Error Source: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='BasicHttpBinding_ISearchService']Error: Cannot import wsdl:portDetail: There was an error importing a wsdl:binding that the wsdl:port is dependent on.XPath to wsdl:binding: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='BasicHttpBinding_ISearchService']XPath to Error Source: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:service[@name='SearchService']/wsdl:port[@name='BasicHttpBinding_ISearchService']Warning: No code was generated.If you were trying to generate a client, this could be because the metadata documents did not contain any valid contracts or servicesor because all contracts/services were discovered to exist in /reference assemblies. Verify that you passed all the metadata documents to the tool.Warning: If you would like to generate data contracts from schemas make sure to use the /dataContractOnly option.\n</code></pre>\n"},{"tags":["wcf","wsdl","asp.net-mvc-4","servicestack"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12956046,"title":"ServiceStack WSDL does not include all types","body":"<p>I created a web service within my MVC application. \nall contracts are using the same namespace. AssemblyInfo.cs also maps the ContractNameSpace with ClrNameSpace. </p>\n\n<p>The generated WSDL does not define my contract types.</p>\n\n<p>This is my second project with ServiceStack. However, the results are different. \nDoes contracts have to resider in a different assembly in order to ServiceStack to generate WSDL correctly?</p>\n"},{"tags":["java","wcf","rest","bad-request"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12989202,"title":"Bad request when sending to wcf rest service from java","body":"<p>Im trying to connect to one of my wcf services.</p>\n\n<p>The service is working and im avaible to send request to the service, however when Im adding a encoded value to the header it stops working ( bad request ).</p>\n\n<p>This is my code.</p>\n\n<p>Java client</p>\n\n<pre><code>String encoded = \"JdLOPF03PctlqiVHX-xsWlvLd0Tz0PT1XTmQcHO0kAg=\";\n\n//Execute request\nDefaultHttpClient httpclient = new DefaultHttpClient();\nHttpGet getRequest = new HttpGet(\"http://10.0.2.2:1374/Authenticate\");\nResponseHandler&lt;String&gt; responseHandler=new BasicResponseHandler();\ngetRequest.addHeader(\"Auth\", encoded);\nhttpclient.execute(getRequest, responseHandler);\n</code></pre>\n\n<p>WCF</p>\n\n<pre><code> [OperationContract]\n [WebInvoke(Method = \"GET\",\n       ResponseFormat = WebMessageFormat.Json,\n       BodyStyle = WebMessageBodyStyle.Wrapped,\n       UriTemplate = \"authenticate\")]\n  string Authenticate();\n</code></pre>\n\n<p>Obviously something is wrong with my encoded string, but what?</p>\n"},{"tags":["javascript","wcf","html5","iis","windows-8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":12992461,"title":"How to consume WCF service in Windows8 HTML5/JS app?","body":"<p>I'm developing a win8 app, that should consume a WCF service hosted on IIS, but it wont...\nNOTE: The Web service works just fine. I've tested it with the WCF Test Client in VS2012\nHere's my code:</p>\n\n<p>IService.cs:</p>\n\n<pre><code>using System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.ServiceModel.Web;\nusing System.Text;\n\n[ServiceContract]\npublic interface IService\n{\n\n[OperationContract]\nstring SitePredmeti();\n\n[OperationContract]\n[WebInvoke(Method = \"POST\", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Xml)]\nList&lt;Profesor&gt; SiteProfesori();\n}\n</code></pre>\n\n<p>i made two methods: one returns xml one returns json just so i can test which one works. it doesn't matter whether the WS returns json or xml, i can work with either in the app.</p>\n\n<p>i use the default SPLIT APP TEMPLATE for a html5/JS app in win8 WITHOUT ANY CHANGES. for now i just need to consume the wcf service, i'll deal with the data templates later.</p>\n\n<p>the url to my iis hosted wcf: </p>\n\n<pre><code>http://localhost/InformatorWS/Service.svc\n</code></pre>\n\n<p>here's what i've tried so far:</p>\n\n<pre><code>var baseURl = \"http://localhost/InformatorWS/Service.svc/SitePredmeti/\";\nvar url  = baseURl+Number1.value+\"/\"+Number2.value;  \nWinJS.xhr({ url: url  }).then(function  (r)  {\nvar result  = JSON.parse(r.responseText);\nResultSpan.innerHTML  = result;  });\n</code></pre>\n\n<p>the error i get here is:</p>\n\n<blockquote>\n  <p>{\"exception\":null,\"error\":{},\"promise\":{\"_oncancel\":null,\"_nextState\":null,\"_state\":>{\"name\":\"error\",\"done\":null,\"then\":null},\"_listeners\":null,\"_value\":{},\"_isException\":false,\"_errorId\":2},\"id\":2}</p>\n</blockquote>\n\n<p>next i tried calling it via jquery ajax:</p>\n\n<pre><code>$(document).ready(function () {\n        jQuery.support.cors = true;\n        //Calling WCF Service using jQuery ajax method\n        $.ajax({\n            type: \"GET\",\n            async: \"false\",\n            url: \"http://localhost/InformatorWS/Service.svc/SitePredmeti\",\n            contentType: \"application/json; charset=utf-8\",\n            dataType: \"json\",\n            processData: true,\n            success: function (result) {\n                //AjaxSucceeded(result);\n                alert('ok')\n            },\n            error: alert('ne ok')\n        });\n    });\n</code></pre>\n\n<p>and when i link jquery</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"js/jquery-ui-1.8.9.custom.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"js/jquery-1.4.3.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>i get three exceptions:</p>\n\n<blockquote>\n  <p>Unhandled exception at line 10, column 2 in\n  ms-appx://66b782f9-8814-4b8e-a2e3-d6e73893690a/js/jquery-ui-1.8.9.custom.min.js\n  0x800a1391 - JavaScript runtime error: 'jQuery' is undefined</p>\n</blockquote>\n\n<p>(and two of these - for the two alert in success and error)</p>\n\n<blockquote>\n  <p>Unhandled exception at line 8, column 9 in\n  ms-appx://66b782f9-8814-4b8e-a2e3-d6e73893690a/js/default.js\n  0x800a1391 - JavaScript runtime error: 'alert' is undefined</p>\n</blockquote>\n\n<p>anyone have any idea what i am doing wrong? or just anyone know any way of consuming a WCF service hosted on IIS?</p>\n\n<p>Thank you very much in advance.</p>\n"},{"tags":["wcf","wsdl"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":4045,"score":2,"question_id":2100426,"title":"WCF hosting: Can access svc file but cannot go to wsdl link","body":"<p>I have a WCF service that is hosted in IIS 7.5.\nI have two servers, one for test and one for production.</p>\n\n<p>The service works fine on test server, but on the production server I have the following error.</p>\n\n<p>When I access the address http//..../service.svc I can see the default page that says:</p>\n\n<hr>\n\n<p>You have created a service.</p>\n\n<p>To test this service, you will need to create a client and use it to call the service. You can do this using the svcutil.exe tool from the command line with the following syntax:</p>\n\n<p>svcutil.exe <a href=\"http://..../service.svc?wsdl\" rel=\"nofollow\">http://..../service.svc?wsdl</a></p>\n\n<p>This will generate a configuration file and a code file that contains the client class. Add the two files to your client application and use the generated client class to call the Service.</p>\n\n<hr>\n\n<p>But when I click the wsdl link, I cannot go to the wsdl page. It returns me to this default web page without any errors. I am suspecting a network/firewall authorization error but does anybody have an experience like this one?</p>\n\n<p>All IIS settings are the same for test and production servers.</p>\n\n<p>Thank you, Best Regards.</p>\n"},{"tags":["c#","wcf","ado.net","wcf-data-services"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12990068,"title":"WCF data service in wcf class library (Have clients talk to database through the service)","body":"<p>I am creating a simple application where clients need to talk to a server in order to perform simple tasks. The server consists of a database and a WCF service. The clients connect to the service and to the database.</p>\n\n<p>I am using ado.net entity data model to create CRUD operations on the database. <strong>I will like to have the clients create CRUD operations through the service and avoid having the clients connect to the database.</strong></p>\n\n<p>when I create methods on the service that return entity objects I get an exception. For example I have the method:</p>\n\n<pre><code>    public Data.Scheduling[] GetSchedules()\n    {\n        Data.TCEntities1 entities = new Data.TCEntities1();\n\n        var a = entities.Schedulings.ToArray();\n\n        return a;\n    }\n</code></pre>\n\n<p>I don't want to recreate the <code>Schedulings</code> class and other entity classes in order to make my methods work. <strong>How will I be able to expose create, read, update and delete operations through my wcf class library service without having the clients connect to the database?</strong></p>\n\n<h2>Edit</h2>\n\n<p>More explanation of my problem in case it is confusing:</p>\n\n<p>In my server application (wcf service) I have basic functionality plus the ado.net entity data classes. Because I have the ado.net entity data classes I am able to extract results from the database very easily such as by doing:</p>\n\n<pre><code>    Data.TCEntities1 entities = new Data.TCEntities1();\n    var a = entities.Schedulings.ToList(); // schedulings is a table in my database\n</code></pre>\n\n<p>as you can see these line will retrieve all scheduling rows from the table schedulings in the database and It will be essay to work with (I will have a List ). Why do I get an error if I have my wcf service return a <code>List&lt;Data.Scheduling&gt;</code> ? I want to prevent the clients from queering the database as they just perform very simple operations (database has only 2 tables). </p>\n"},{"tags":["wcf","debugging","iis","remote-debugging"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":4189,"score":1,"question_id":2955223,"title":"Unable to automatically step into the server. The remote procedure could not be debugged","body":"<p>I am having a problem stepping into code which is a website hosted on IIS7.</p>\n\n<p>Basically I have a test class which calls a WCF service like so</p>\n\n<pre><code>ISecurityService service = new SecurityServiceClient();\nMembershipUser membershipUser = null;\nmembershipUser = service.GetMembershipUser(\"Mark\"); // THIS LINE FAILS!!!\n</code></pre>\n\n<p>I get the following error but I have everything enabled as far as I know, i.e. </p>\n\n<pre><code>&lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n</code></pre>\n\n<p>Here is the error msg, I would appreciated any feedback.  If I don't try and step into the line above then all works ok.</p>\n\n<blockquote>\n  <hr>\n  \n  <p>Microsoft Visual Studio  </p>\n  \n  <p>Unable to automatically step into the server. The remote procedure could not be debugged. This usually indicates that debugging has not been enabled on the server. See help for more information.</p>\n</blockquote>\n"},{"tags":["c#","wcf","c#-4.0"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":12988777,"title":"When using WCF, Function Overloading rule?","body":"<p>I use Windows Communication Services (WCF) in my project.</p>\n\n<p>In my project,</p>\n\n<p>I write the function like below:</p>\n\n<pre><code>GetUserNameByUserId(int userId);\nGetProductInformationByProductId(int productId);\n</code></pre>\n\n<p>But this naming have been coming more and more complex day by day.</p>\n\n<p>For instance I have 5 parameters to pass to the function, in this case the function name will be like blow:</p>\n\n<pre><code>GetStackOverFlowByStackByOverByFlowByIdByStackOverFlow(string stack, string over, string flow, int id, string stackOverFlow);\n</code></pre>\n\n<p>And assume that I want to get with 2 parameters like blow:</p>\n\n<pre><code>GetStackOverFlowByIdByStackOverFlow(int id, string stackOverFlow);\n</code></pre>\n\n<p>I want to use function overloading like below:</p>\n\n<pre><code>public void abc(int i)\n{\n    System.Console.WriteLine(\"abc\" + i);\n}\npublic void abc(string i)\n{\n    System.Console.WriteLine(\"abc\" + i);\n}\npublic void abc(string i,int j)\n{\n    System.Console.WriteLine(\"abc\" + i + j);\n}\n</code></pre>\n\n<p>That is to say, I want to write below functions:</p>\n\n<pre><code>GetStackOverFlow(int id);\nGetStackOverFlow(int id, string name);\nGetStackOverFlow(int id, string name, string StackOver);\n.\n.\n</code></pre>\n\n<p>Isn't it?\nAre there any methodology for that?\nOr am I doing right?</p>\n\n<p>I research and find this:\n<a href=\"http://stackoverflow.com/questions/8398079/function-overloading-in-wcf\">Function Overloading in WCF</a></p>\n\n<pre><code>public interface IMyService\n{\n   [OperationContract(Name = \"GetStringWithParam\")]\n   string GetString(DateTime date);\n\n   [OperationContract(Name = \"GetStringWithoutParam\")]\n   string GetString();\n}\n</code></pre>\n\n<p>and he said that </p>\n\n<blockquote>\n  <p>But i don't prefer it as it is sometimes lead to confusion.</p>\n</blockquote>\n\n<p>are there any other way?\nThanks.</p>\n"},{"tags":["wpf","wcf","duplex-channel"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12989708,"title":"Does UseSynchronizationContext=false mean I have to be thread safe?","body":"<p>This is about a WCF duplex service with NetTcpBinding.</p>\n\n<p>I just added the UseSynchronizationContext=false parameter to my ServiceBehavior attribute which stops things freezing up when calling Close() on the callback channel on the service side.</p>\n\n<p>However does this mean I now have to be thread safe in my WPF window? Since I might get a callback operation while clicking a button at the same time on two different threads right?</p>\n"},{"tags":["json","wcf","wcf-data-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12972665,"title":"Unsupported media type requested when requesting application/json on WCF Data Service","body":"<p>I am building a WCF data service (with .net 4.5 VS 2012) using Reflection Provider (http://msdn.microsoft.com/en-us/library/dd728281.aspx) on my existing classes. I can successfully access the service with \"Accept: application/atom+xml\" in request header. however, I got an error \"Unsupported media type requested\" when changing \"Accept\" to \"application/json\" in request header. As I learned, WCF data service supports JSON, what should I do to enable querying json data on the service?</p>\n\n<p>Thanks</p>\n\n<p>Edit:\nI paste my code below:\nfirst I have the Product class defined:</p>\n\n<pre><code>[DataServiceKeyAttribute(\"Id\")]\npublic class Product\n{\n    public int Id { get; set; }\n    public int Price { get; set; }\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>then I have my ProductContext class defined:</p>\n\n<pre><code>public class ProductContext\n{\n    private List&lt;Product&gt; products = new List&lt;Product&gt;();\n\n    public ProductContext()\n    {\n\n        for (int i = 0; i &lt; 100; i++)\n        {\n            var product = new Product();\n            product.Id = i;\n            product.Name = \"ID - \" + i.ToString();\n            product.Price = i + 100;\n            products.Add(product);\n        }\n    }\n\n    public IQueryable&lt;Product&gt; Products\n    {\n        get\n        {\n            return products.AsQueryable();\n        }\n    }\n}\n</code></pre>\n\n<p>and my ProductService.svc.cs</p>\n\n<pre><code>[System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults = true)]\npublic class ProductsService : DataService&lt;ProductContext&gt;\n{\n    // This method is called only once to initialize service-wide policies.\n    public static void InitializeService(DataServiceConfiguration config)\n    {\n        // TODO: set rules to indicate which entity sets and service operations are visible, updatable, etc.\n        // Examples:\n        config.SetEntitySetAccessRule(\"Products\", EntitySetRights.AllRead);\n        //config.SetServiceOperationAccessRule(\"MyServiceOperation\", ServiceOperationRights.All);\n        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;\n    }\n}\n</code></pre>\n"},{"tags":["wcf","wcf-data-services","wcf-ria-services","wcf-client","wcf-rest-starter-kit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":524,"score":1,"question_id":10005771,"title":"Wcf Client: Passing XML string in the WCF REST service using WebInvoke","body":"<p>With out parameter for Display method it is working in browser i.e <a href=\"http://localhost:2617/UserService.svc/test\" rel=\"nofollow\">http://localhost:2617/UserService.svc/test</a></p>\n\n<p>When i add one parameter i am unable to browse it also.</p>\n\n<p>I have the following contract.</p>\n\n<pre><code>[ServiceContract]\npublic interface IUserService\n{\n    [OperationContract]\n    [WebInvoke(Method=\"PUT\",UriTemplate = \"/tes/{name}\",   \n    BodyStyle=WebMessageBodyStyle.WrappedRequest)]\n    string Display(string name);\n}\n\npublic string Display(string name)\n{\n        return \"Hello, your test data is ready\"+name;\n}\n</code></pre>\n\n<p>I am trying to call using the following code</p>\n\n<pre><code>         string url = \"http://localhost:2617/UserService.svc/test\"; //newuser\n        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);\n        string xmlDoc1 = \"&lt;Display xmlns=\\\"\\\"&gt;&lt;name&gt;shiva&lt;/name&gt;&lt;/Display&gt;\";\n        req.Method = \"POST\";\n        req.ContentType = \"application/xml\";\n        byte[] bytes = Encoding.UTF8.GetBytes(xmlDoc1);\n        req.GetRequestStream().Write(bytes, 0, bytes.Length); \n\n        HttpWebResponse response = (HttpWebResponse)req.GetResponse();\n        Stream responseStream = response.GetResponseStream();\n        var streamReader = new StreamReader(responseStream);\n\n        var soapResonseXmlDocument = new XmlDocument();\n        soapResonseXmlDocument.LoadXml(streamReader.ReadToEnd());\n</code></pre>\n\n<p>I am unable to get output for that.please help me on this.</p>\n"},{"tags":["c#",".net","asp.net-mvc","winforms","wcf"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":369,"score":3,"question_id":10267414,"title":"Offline+Online Database Application","body":"<p>I am developing an accounting system for a customer. This application has some special requirements. I leave the accounting system detail which are specific to accounts. I mention those points which are confusing me.</p>\n\n<p>The application should work in Online and Offline environment. If user is working and suddenly Application goes offline User should be able to work offline. All offline work is stored in local database and sync next time to central database when Application connects to the internet.This application has many users and all will work at same time on same information. </p>\n\n<p>For Example If a user enters an inventory item it is possible that another user also enter the same item at that time. Application should be able to validate correct information and prohibits user to duplication.</p>\n\n<p>User local database must be updated all times either other users are working or not. If other users are working all updated information should be available in local database to ensure when user goes offline all information is updated.</p>\n\n<p>The question is How to develop this kind of application? Is there any standard way to achieve this target? Is there any standard or non standard pattern to build this kind of software?</p>\n\n<p>Please note I am using C# Dot Net and Intend to use .NET Remoting or WCF or ASP.NET MVC for this application.</p>\n\n<p>Any kind of help will be appreciated.\nThanks.</p>\n"},{"tags":["wcf","exception"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12850278,"title":"WCF Service activation exception with very uncommon reason","body":"<blockquote>\n  <p>Could not load file or assembly 'App_Web_itds5u52, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified. \n  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. </p>\n</blockquote>\n\n<p>Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'App_Web_itds5u52, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.</p>\n\n<p>The first time I deployed it worked ok.\nThe second time and since then, it gives me ServiceActivatioException win accessing the services and I get the error above when browsing to the service.svc page.</p>\n\n<p>How can I solve this?\nI am using WCF tracing, I don't know if it matters. </p>\n\n<pre><code> &lt;add name=\"xml\" type=\"System.Diagnostics.XmlWriterTraceListener\" initializeData=\"~/Logs/1OperatorMessagesLog1.svclog\" /&gt;\n</code></pre>\n\n<p>Thank you,\nRyan</p>\n"},{"tags":["android",".net","wcf","web-services","ksoap2"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":1,"view_count":516,"score":3,"question_id":11160355,"title":"How to consume WCF .SVC in Android","body":"<p>i red a lot of documents about, but i can't consume this .svc file.\nI've no problem with .ASMX file. Only SVC i'm not able to consume. It's very very very stressfull....! I can't modify WCF part.\nI post WSDL file and my try to consume it:</p>\n\n<p><strong>WSDL</strong></p>\n\n<pre><code>&lt;wsdl:definitions xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" \n xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" \n xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" \n xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" \n xmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" \n xmlns:tns=\"http://tempuri.org/\" \n xmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" \n xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" \n xmlns:wsap=\"http://schemas.xmlsoap.org/ws/2004/08/addressing/policy\"\n  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n xmlns:msc=\"http://schemas.microsoft.com/ws/2005/12/wsdl/contract\" \n xmlns:wsaw=\"http://www.w3.org/2006/05/addressing/wsdl\" \n xmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" \n xmlns:wsa10=\"http://www.w3.org/2005/08/addressing\" \n xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\" name=\"ValidateUser_wcf\" \n targetNamespace=\"http://tempuri.org/\"&gt;\n&lt;wsp:Policy wsu:Id=\"WSHttpBinding_IValidateUser_wcf_policy\"&gt;\n&lt;wsp:ExactlyOne&gt;\n&lt;wsp:All&gt;\n&lt;wsaw:UsingAddressing/&gt;\n&lt;/wsp:All&gt;\n&lt;/wsp:ExactlyOne&gt;\n&lt;/wsp:Policy&gt;\n&lt;wsdl:types&gt;\n&lt;xsd:schema targetNamespace=\"http://tempuri.org/Imports\"&gt;\n&lt;xsd:import schemaLocation=\"http://URL/WebServices/validateuser.svc?xsd=xsd0\" namespace=\"http://tempuri.org/\"/&gt;\n&lt;xsd:import schemaLocation=\"http://URL/WebServices/validateuser.svc?xsd=xsd1\" namespace=\"http://schemas.microsoft.com/2003/10/Serialization/\"/&gt;\n&lt;/xsd:schema&gt;\n&lt;/wsdl:types&gt;\n&lt;wsdl:message name=\"IValidateUser_wcf_ValidateUser_InputMessage\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ValidateUser\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"IValidateUser_wcf_ValidateUser_OutputMessage\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ValidateUserResponse\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:portType name=\"IValidateUser_wcf\"&gt;\n&lt;wsdl:operation name=\"ValidateUser\"&gt;\n&lt;wsdl:input wsaw:Action=\"http://tempuri.org/IValidateUser_wcf/ValidateUser\" message=\"tns:IValidateUser_wcf_ValidateUser_InputMessage\"/&gt;\n&lt;wsdl:output wsaw:Action=\"http://tempuri.org/IValidateUser_wcf/ValidateUserResponse\" message=\"tns:IValidateUser_wcf_ValidateUser_OutputMessage\"/&gt;\n&lt;/wsdl:operation&gt;\n&lt;/wsdl:portType&gt;\n&lt;wsdl:binding name=\"WSHttpBinding_IValidateUser_wcf\" type=\"tns:IValidateUser_wcf\"&gt;\n&lt;wsp:PolicyReference URI=\"#WSHttpBinding_IValidateUser_wcf_policy\"/&gt;\n&lt;soap12:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n&lt;wsdl:operation name=\"ValidateUser\"&gt;\n&lt;soap12:operation soapAction=\"http://tempuri.org/IValidateUser_wcf/ValidateUser\" style=\"document\"/&gt;\n&lt;wsdl:input&gt;\n&lt;soap12:body use=\"literal\"/&gt;\n&lt;/wsdl:input&gt;\n&lt;wsdl:output&gt;\n&lt;soap12:body use=\"literal\"/&gt;\n&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n&lt;/wsdl:binding&gt;\n&lt;wsdl:service name=\"ValidateUser_wcf\"&gt;\n&lt;wsdl:port name=\"WSHttpBinding_IValidateUser_wcf\" binding=\"tns:WSHttpBinding_IValidateUser_wcf\"&gt;\n&lt;soap12:address location=\"http://URL/WebServices/validateuser.svc\"/&gt;\n&lt;wsa10:EndpointReference&gt;\n&lt;wsa10:Address&gt;\nhttp://URL/WebServices/validateuser.svc\n&lt;/wsa10:Address&gt;\n&lt;/wsa10:EndpointReference&gt;\n&lt;/wsdl:port&gt;\n&lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n\n<p><strong>My Java #1</strong>. Simply i've copied xml which come out after sniffed HTTP POST traffic about original .NET client, that i have to replicate in java, with Microsoft .Net Monitor application: </p>\n\n<pre><code>private static final String NAMESPACE = \"http://tempuri.org/\";\nprivate static final String NAMESPACE_INFOCAD = \"http://xxxx.xxx/\"; \n\nprivate static final String SOAP_ACTION_VALIDATION = \"IValidateUser_wcf/ValidateUser\";\nprivate static final String VALIDATION_METHOD = \"ValidateUser\";\nprivate final static String VALIDATION_URI = \"http://URL/WebServices/validateuser.svc\";\n\n// only a1 node in the header i know, each other is unknown for me. I put them there only because i saw them in soap net client http post\nString request = \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\"+\n        \"&lt;s:Envelope xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xsd=\\\"http://www.w3.org/2001/XMLSchema\\\" xmlns:s=\\\"http://www.w3.org/2003/05/soap-envelope\\\" xmlns:a=\\\"http://www.w3.org/2005/08/addressing\\\"&gt;\"\n        + \"&lt;s:Header&gt;\"\n        //+ \"&lt;a:Action s:mustUnderstand=\\\"1\\\"&gt; http://tempuri.org/IValidateUser_wcf/ValidateUser &lt;/a:Action&gt;\"\n        + \"&lt;a1 xmlns=\\\"http://xxxx.xxx/\\\"&gt;\"+testtoken+\"&lt;/a1&gt;\"\n        + \"&lt;a:MessageID&gt; urn:uuid:c075fc4e-1e70-48f7-838b-9fa68e7aaad1 &lt;/a:MessageID&gt;\"\n        + \"&lt;ActivityId CorrelationId=\\\"0d4e09eb-5d09-4617-a8e1-ec99415caab5\\\" xmlns=\\\"http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics\\\"&gt;\"\n        + \"25adfad8-ab5f-474a-afe3-56941d4ad408\"\n        + \"&lt;/ActivityId&gt;\"\n        + \"&lt;a:ReplyTo&gt; http://www.w3.org/2005/08/addressing/anonymous &lt;/a:ReplyTo&gt;\"\n        + \"&lt;a:To s:mustUnderstand=\\\"1\\\"&gt; http://URL/WebServices/validateuser.svc &lt;/a:To&gt;\"\n        + \"&lt;/s:Header&gt;\"\n        + \"&lt;s:Body&gt;&lt;ValidateUser xmlns=\\\"http://tempuri.org/\\\"&gt;&lt;username&gt;\"+username+\"&lt;/username&gt;&lt;password&gt;\"+password+\"&lt;/password&gt;&lt;/ValidateUser&gt;&lt;/s:Body&gt;\"\n        + \"&lt;/s:Envelope&gt;\";\n\n    String result = CallWebService(VALIDATION_URI, NAMESPACE+VALIDATION_METHOD, request);   \n\n\n\npublic String CallWebService(String url, String soapAction, String envelope) {  \n\n    final DefaultHttpClient httpClient = new DefaultHttpClient();\n    // request parameters\n    HttpParams params = httpClient.getParams();\n    HttpConnectionParams.setConnectionTimeout(params, 10000);\n    HttpConnectionParams.setSoTimeout(params, 15000);\n    // set parameter\n    HttpProtocolParams.setUseExpectContinue(httpClient.getParams(), true);\n\n    // POST the envelope\n    HttpPost httppost = new HttpPost(url);\n    // add headers\n    httppost.setHeader(\"soapaction\", soapAction);\n    httppost.setHeader(\"Content-Type\", \"text/xml; charset=utf-8\");\n\n    String responseString = \"Nothingggg\";\n    try {\n\n        // the entity holds the request\n        HttpEntity entity = new StringEntity(envelope);\n        httppost.setEntity(entity);\n\n        // Response handler\n        ResponseHandler&lt;String&gt; rh = new ResponseHandler&lt;String&gt;() {\n            // invoked when client receives response\n            public String handleResponse(HttpResponse response)\n                    throws ClientProtocolException, IOException {\n\n                // get response entity\n                HttpEntity entity = response.getEntity();                   \n\n                // read the response as byte array\n                StringBuffer out = new StringBuffer();\n                byte[] b = EntityUtils.toByteArray(entity);\n\n                // write the response byte array to a string buffer\n                out.append(new String(b, 0, b.length));\n                return out.toString();\n            }\n        };\n\n         responseString = httpClient.execute(httppost, rh);\n\n    } catch (Exception e) {\n        e.printStackTrace();\n        Log.d(\"me\",\"Exc : \"+ e.toString()); \n\n    }\n\n    // close the connection\n    httpClient.getConnectionManager().shutdown();\n    return responseString;\n}\n</code></pre>\n\n<p><strong>My Java #2 by Ksoap2</strong>. In this case i got this error:</p>\n\n<pre><code>XmlPullParserException: unexpected type \n(position:END_DOCUMENT null@1:1 in \njava.io.InputStreamReader@blablabla)\n</code></pre>\n\n<p>But i put xml string request in a validation xml application and it's ok:</p>\n\n<pre><code>public String validateUser_WCF(String username, String password){\n\n     String enctoken = TOKEN;\n     String testtoken = TestTOKEN;      \n\n     SoapSerializationEnvelope envelope = null;\n     SoapObject request = null;\n     HttpTransportSE httpTransportSE = null;\n\n     try {\n         request = new SoapObject(NAMESPACE, VALIDATION_METHOD);\n         request.addProperty(\"username\", username);\n         request.addProperty(\"password\", password);\n\n         envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n         envelope.dotNet = true; \n         envelope.setOutputSoapObject(request);\n\n         Element[] header = new Element[2];  \n         header[0] = new Element().createElement(NAMESPACE, \"To\");\n         header[0].setName(\"a1\");                 \n         header[0].addChild(Node.TEXT, VALIDATION_URI);\n\n         header[1] = new Element().createElement(NAMESPACE_INFOCAD, \"a1\");                \n         header[1].addChild(Node.TEXT, testtoken);\n\n         envelope.headerOut = header;                                 \n\n         httpTransportSE = new HttpTransportSE(VALIDATION_URI);\n\n         httpTransportSE.debug = true;\n         //httpTransportSE.setXmlVersionTag(\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\");\n\n         httpTransportSE.call(NAMESPACE+SOAP_ACTION_VALIDATION, envelope);\n\n         String response = (String) envelope.getResponse();\n         Log.i(\"RESPONSE\", response);\n         return response;  \n\n        } catch (Exception e) {\n            // TODO: handle exception\n            e.printStackTrace();\n        }finally{\n             Log.i(getClass().getSimpleName(),\"requestDump : \"+httpTransportSE.requestDump);\n             Log.i(getClass().getSimpleName(),\"responseDump : \"+httpTransportSE.responseDump);\n        }\n</code></pre>\n\n<p>I really really hope someone can help me. Im arrived in a dead point....</p>\n"},{"tags":["wcf","wsdl","contract-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12987692,"title":"Building a web service with WCF for usage by existing Java client using WSDL","body":"<p>I have an existing Java client that I need to build a web service for in .NET 4.0. The interface is already defined with a WSDL file so I created a class library and generated the server side stub using <a href=\"http://wscfblue.codeplex.com/\" rel=\"nofollow\">WSCF.blue</a> (I also tried svcutil without success). WSCF.blue takes care of the references and adding the files (great tool :-)) so I only replaced the generated System.NotImplementedException with some code. Then I hosted the result in an ASP.NET development server. </p>\n\n<p>I guess I need some additional step since I get the famous \"The contract name 'WsdlWebService.IHello' could not be found in the list of contracts implemented by the service 'Hello'.\" when looking the service up in the browser (see <a href=\"http://stackoverflow.com/questions/691746/wcf-contract-name-imyservice-could-not-be-found\">WCF Contract Name 'IMyService' could not be found?</a>). But here the is a ServiceContractAttribute of which I expect that it does the job.</p>\n\n<p>I would appreciate if someone could point to what I'm missing...</p>\n\n<p>This is the generated interface and implementation:</p>\n\n<pre><code>\n\n    namespace WsdlWebService\n    {\n        [System.CodeDom.Compiler.GeneratedCodeAttribute(\"System.ServiceModel\", \"4.0.0.0\")]\n        [System.ServiceModel.ServiceContractAttribute(Namespace=\"http://webservice.com\", ConfigurationName=\"IHello\")]\n        public interface IHello\n        {\n            [System.ServiceModel.OperationContractAttribute(Action=\"http://webservice.com/IHello/helloName\", ReplyAction=\"http://webservice.com/IHello/helloNameResponse\")]\n            [System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]\n            [return: System.ServiceModel.MessageParameterAttribute(Name=\"helloNameReturn\")]\n            string helloName(string name);\n        }\n\n        [System.ServiceModel.ServiceBehaviorAttribute(InstanceContextMode=System.ServiceModel.InstanceContextMode.PerCall, ConcurrencyMode=System.ServiceModel.ConcurrencyMode.Single)]\n        public class Hello : IHello\n        {\n            public virtual string helloName(string name)\n            {\n                return \"Hello world from (via wsdl extraced server) \" + name + \"!\";\n            }\n        }\n    } \n\n</code></pre>\n\n<p>This is the web.config:</p>\n\n<pre><code>\n\n    &lt;?xml version=\"1.0\"?&gt;\n    &lt;configuration&gt;\n      &lt;system.web&gt;\n        &lt;compilation debug=\"false\" targetFramework=\"4.0\" /&gt;\n      &lt;/system.web&gt;\n      &lt;system.webServer&gt;\n        &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n      &lt;/system.webServer&gt;\n      &lt;system.serviceModel&gt;\n        &lt;behaviors&gt;\n          &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"MyServiceTypeBehaviors\"&gt;\n              &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n              &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n            &lt;/behavior&gt;\n          &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;services&gt;\n          &lt;service name=\"WsdlWebService.Hello\"\n                 behaviorConfiguration=\"MyServiceTypeBehaviors\"&gt;\n            &lt;endpoint address=\"\" binding=\"basicHttpBinding\"\n                 contract=\"WsdlWebService.IHello\"/&gt;\n            &lt;endpoint contract=\"IMetadataExchange\"\n               binding=\"mexHttpBinding\" address=\"mex\"/&gt;\n          &lt;/service&gt;\n        &lt;/services&gt;\n      &lt;/system.serviceModel&gt;\n    &lt;/configuration&gt;\n\n</code></pre>\n"},{"tags":["wcf","security","rest","ssl"],"answer_count":2,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":4008,"score":9,"question_id":393580,"title":"WCF Authentication WITHOUT SSL","body":"<p>Is there a way to setup authentication (ala \"Basic Authentication\") without actually setting up an SSL Certificate?  I'd also like to do this in REST or regular SOAP WCF Services, preferably in REST, but would like to be able to mix the services.  In other words, \"I want to be able to send a regular old username and password just like in Basic Authentication but without the SSL.\"  Is there a way to do this?</p>\n"},{"tags":["c#","php","wcf","wcf-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1286,"score":4,"question_id":6059524,"title":"How do I pass username/password credentials from php client to self-hosted wcf service?","body":"<p>I have a self-hosted wcf service that just adds 2 numbers and returns the value.  It works fine, but I am not sure how I can send the username and password through the php client, so it will validate against my CustomUserNamePasswordValidator.  Here is the implementation for the Add Method:</p>\n\n<pre><code>public class MathService : IMathService\n{\n    public double Add(double x, double y)\n    {\n        return x + y;\n    } \n}\n</code></pre>\n\n<p>Here is my current App.Config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n&lt;system.serviceModel&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"MyServiceBehavior\" name=\"WcfWithPhp.MathService\"&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"WcfWithPhp.IMathService\"&gt;\n      &lt;identity&gt;\n        &lt;dns value=\"localhost\" /&gt;\n      &lt;/identity&gt;\n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n        &lt;add baseAddress=\"http://localhost:8731/MathService\" /&gt;\n      &lt;/baseAddresses&gt;\n    &lt;/host&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"MyServiceBehavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I am starting the service like this:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    ServiceHost host = new ServiceHost(typeof(WcfWithPhp.MathService));\n    host.Open();\n\n    Console.WriteLine(\"Math Service Host\");\n    Console.WriteLine(\"Service Started!\");\n\n    foreach (Uri address in host.BaseAddresses)\n    {\n        Console.WriteLine(\"Listening on \" + address);\n    }\n\n    Console.WriteLine(\"Press any key to close the host...\");\n    Console.ReadLine();\n    host.Close();\n}\n</code></pre>\n\n<p>For the php client, I am doing:</p>\n\n<pre><code>&lt;?php\n\nheader('Content-Type: text/plain');\n\necho \"WCF Test\\r\\n\\r\\n\";\n\n// Create a new soap client based on the service's metadata (WSDL)\n$client = new SoapClient(\"http://localhost:8731/MathService?wsdl\");\n\n$obj-&gt;x = 2.5;\n$obj-&gt;y = 3.5;\n\n$retval = $client-&gt;Add($obj);\n\necho \"2.5 + 3.5 = \" . $retval-&gt;AddResult;\n\n?&gt;\n</code></pre>\n\n<p>The above works fine without authentication, but I want to be able to authenticate the username and password from the phpclient.  When they try to access my service, I want the username and password to validate through the overriden Validate method of the UserNamePasswordValidator, which is currently defined as:</p>\n\n<pre><code>public override void Validate(string userName, string password)\n{\n        if (string.IsNullOrEmpty(userName))\n            throw new ArgumentNullException(\"userName\");\n        if (string.IsNullOrEmpty(password))\n            throw new ArgumentNullException(\"password\");\n\n        // check if the user is not test\n        if (userName != \"test\" || password != \"test\")\n            throw new FaultException(\"Username and Password Failed\");\n }\n</code></pre>\n\n<p>I am just using test and test as an example for the username and password.  I know I have to set the modify the behavior configuration and do a binding configuration, so the service will use the CustomUserNamePasswordValidator, but since I don't know PHP, I am not sure how to send the credentials from php to the wcf service and once the credentials are sent, I don't know how to set it in the wcf service.  I am not creating a wcf service.  I thought I could do <code>client.ClientCredentials.UserName.UserName</code> and <code>client.ClientCredentials.UserName.Password</code>, but this is only if I am creating .NET client which I am not.</p>\n\n<p>Another question I had was that if the client is a php client, am I restricted to only basicHttpBinding?</p>\n\n<p>Also,  ideally what I would like to do is send a soap request from the php client to the wcf service, so if anyone can point me in the right direction for this, it would be great.</p>\n\n<p>I just tried the following, but it didn't work (Add was called, but it wasn't authenticated)</p>\n\n<pre><code>$sh_param = array('userName' =&gt; 'test', 'passWord' =&gt; 'test2');\n\n$headers = new SoapHeader('http://localhost:8731/MathService.svc','UserCredentials',   \n$sh_param,false);\n\n$client-&gt;__setSoapHeaders(array($headers));\n</code></pre>\n\n<p>UPDATE:\nMy PHP Soap Client initialization is now:</p>\n\n<pre><code>$client = new SoapClient('http://localhost:8731/MathService?wsdl',\n                         array('login' =&gt; \"test2\", \n                               'password' =&gt; \"test\",\n                               'trace'=&gt;1));\n</code></pre>\n\n<p>By doing the above, it added the following in the Request:</p>\n\n<pre><code>`Authorization: Basic dGVzdDI6dGVzdA==`\n</code></pre>\n\n<p>However, my wcf service which is hosted in a console app, is not picking up this authorization, I have a custom username validator which has a hard-coded value of test for the username and test for the password, but when I try \"test2\" for the login, it is still calling the method.  I am using TransportWithCredentialOnly and Message=\"UserName\"</p>\n"},{"tags":["c#","wcf","excel","ado.net"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2528,"score":0,"question_id":9313066,"title":"How to insert (bind) DataTable to Excel Workbook (VS Excel 2010 Workbook Project)","body":"<p>I have <code>WCF Service</code> that returns data as <code>DataTable</code> type. I want to insert this data into Excel workbook in the <code>Workbook_Startup</code> event.</p>\n\n<p>What is the best way to do it?</p>\n\n<p>(VS .NET 3.5 Excel 2010 Workbook Project)</p>\n\n<hr>\n\n<p>WCF Service code:</p>\n\n<pre><code>public DataTable GetQuarterTargetAchievement()\n{\n    var dt = new DataTable(\"TargetAchievement\");\n\n    using (var conn = new SqlConnection(GetConnectionString()))\n    {\n        using (var da = new SqlDataAdapter(\"SELECT fld1, fld2, ... , fldN FROM dbo.ReportTable; \", conn))\n        {\n            da.Fill(dt);\n        }\n    }\n\n    return dt;\n}\n</code></pre>\n\n<hr>\n\n<p>Client code:</p>\n\n<pre><code>var dt = proxy.GetQuarterTargetAchievement();\n</code></pre>\n"},{"tags":["c#","wcf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":366,"score":1,"question_id":6972541,"title":"WCF project output error","body":"<p>I am new to WCF. Now working with a learning example. My environment is VS2008, .Net framework 3.5, Hosted in Windows sever 2003 R2.</p>\n\n<p>The following code i have in a Service.svc file-</p>\n\n<p>&lt;% @ServiceHost Language=C# Debug=\"true\" Service=\"MyWCFService\" CodeBehind=\"~/App_Code/Service.cs\" %></p>\n\n<p>But when i test it in browser, browser returns an error with the following lines-</p>\n\n<p>The XML page cannot be displayed</p>\n\n<p>A name was started with an invalid character. Error processing resource \"http://localhost/WCFServiceDemo/Service.svc\". Error on line 1 at column 2:</p>\n\n<p>I could not find the error.</p>\n\n<p>Any help is appreciable.</p>\n\n<p>SKPaul</p>\n"},{"tags":["c#","json","wcf","rest","coldfusion"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":169,"score":2,"question_id":12975524,"title":"WCF Rest Client sending incorrect content-type","body":"<p>I am trying to send a request using a wcf client to a ColdFusion 9 service using json.  However, the content-type of the request is for xml.</p>\n\n<p>Here is the service contract.  As you can see we specificy using RequestFormat of json.</p>\n\n<pre><code>[ServiceContract(Name = \"ServiceAgreementRequestService\", Namespace = NetworkNamespaces.ServiceNamespace)]\npublic interface IServiceAgreementRequestService\n{\n[OperationContract]\n[FaultContract(typeof(RequestFault))]\n[WebInvoke(UriTemplate = \"?method=CreateUser\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\nCreateUserResponse CreateUser(CreateUserRequest request);\n}\n</code></pre>\n\n<p>I have also tried to set the Request.ContentType on the OutGoing request and this also did not work.</p>\n\n<pre><code>using (var context = this.GetServiceClient(clientId))\n{\nWebOperationContext.Current.OutgoingRequest.ContentType = \"application/json; charset=UTF-8\";\nvar request = new CreateUserRequest(user.Id, user.Person.FirstName, user.Person.LastName);\nvar response = context.Channel.CreateUser(request);\n}\n</code></pre>\n\n<p>Here is the request that gets sent</p>\n\n<pre><code>POST http://somesite.domain.com/WebServices/ProviderService.cfc/?method=CreateUser HTTP/1.1\nContent-Type: application/xml; charset=utf-8\nVsDebuggerCausalityData: uIDPo7eh9U9jsBVLqVgGtqTK+eMBAAAAb++0xkOSQEmcAKZLgQEsp2/muY2ca6NJiul6pkAaWZwACQAA\nHost: somehost.domain.com\nContent-Length: 58\nExpect: 100-continue\nAccept-Encoding: gzip, deflate\n\n{\"UserId\":4,\"FirstName\":\"FirstName\",\"LastName\":\"LastName\"}\n</code></pre>\n\n<p>How do I get this to use the correct content-type?</p>\n\n<p>EDIT: </p>\n\n<p>Under the hood, the GetServiceClient(clientId) call uses system.servicemodel.clientbase and ChannelFactory to create the communication channel.  The endpoint that we call out to changes by client so we have some code on top of those to dynamically change out the endpoint.</p>\n\n<p>Some more info.  We have two applications : One is a .net MVC 4 web application to host the client app and one is a .net WCF Server application to host the backend services.  I can call out to the ColdFusion app successfully from the web application, but not the wcf Server application.  These both use the same code base to make the outgoing call.</p>\n\n<p>As far as I can tell the config is the same for both.</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n&lt;endpointBehaviors&gt;\n&lt;behavior name=\"WcfRestBehavior\"&gt;\n&lt;webHttp /&gt;\n&lt;/behavior&gt;\n\n&lt;client&gt;\n&lt;endpoint name=\"ServiceAgreementRequestService\" address=\"http://PLACEHOLDER/\" binding=\"webHttpBinding\" behaviorConfiguration=\"WcfRestBehavior\" contract=\"IServiceAgreementRequestService\"/&gt;\n</code></pre>\n"},{"tags":["android","wcf","file-upload"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":2530,"score":1,"question_id":5044755,"title":"How do I upload a file from an android device to a restful wcf service?","body":"<p>I'm building an Android app and I need to upload a photo taken with the camera. I need to upload it to a restful WCF service. I have looked at many tutorials but I just can't seem to get it working. I think my problem lies with the WCF service. I do not get any exceptions but I get a response 400 BAD REQUEST. Since the WCF service is currently running on my localhost, I am using 10.0.2.2 to access it from the android emulator. I am able to call other service methods on my local service but this one fails.</p>\n\n<p>Java</p>\n\n<pre><code>HttpPost httppost = new HttpPost(\"http://10.0.2.2:53943/ImageService/UploadInspectionPhoto\");\nFile photo = new File(Environment.getExternalStorageDirectory(), \"01.jpg\");\nMultipartEntity t = new MultipartEntity();\nt.addPart(\"t\", new FileBody(photo));\n//t.addPart(new FormBodyPart(\"t\", new FileBody(photo))); I tired this too\nhttppost.setEntity(t);\nHttpResponse response = httpclient.execute(httppost);\n</code></pre>\n\n<p>WCF</p>\n\n<pre><code>[ServiceContract]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\n[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]\npublic class ImageService\n{\n        [WebInvoke(Method = \"POST\")]\n        public void UploadInspectionPhoto(Stream t)\n        {\n            // I put a breakpoint here but it never gets here\n            // Do something with the stream\n        }\n}\n</code></pre>\n\n<p>Config file</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n      &lt;customErrors mode=\"Off\"&gt;&lt;/customErrors&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n      &lt;add name=\"UrlRoutingModule\" type=\"System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n    &lt;/modules&gt;\n  &lt;/system.webServer&gt;\n\n  &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"/&gt;\n      &lt;bindings&gt;\n          &lt;!--&lt;basicHttpBinding&gt;\n              &lt;binding name=\"BasicHttpStreaming\" transferMode=\"Streamed\"&gt;\n              &lt;/binding&gt;\n          &lt;/basicHttpBinding&gt;--&gt;\n          &lt;webHttpBinding&gt;\n              &lt;binding name=\"WebHttpDtreaming\" transferMode=\"Streamed\" &gt;\n              &lt;/binding&gt;\n          &lt;/webHttpBinding&gt;\n      &lt;/bindings&gt;\n    &lt;standardEndpoints&gt;\n      &lt;webHttpEndpoint&gt;\n        &lt;!-- \n            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint \n            via the attributes on the &lt;standardEndpoint&gt; element below\n        --&gt;\n        &lt;standardEndpoint name=\"\" helpEnabled=\"true\" automaticFormatSelectionEnabled=\"true\" /&gt;\n      &lt;/webHttpEndpoint&gt;\n    &lt;/standardEndpoints&gt;\n      &lt;services&gt;\n          &lt;service behaviorConfiguration=\"PublishMetadataBehavior\" name=\"SystemDesign.Collaborate.Services.ImageService\"&gt;\n              &lt;endpoint address=\"soap\" binding=\"basicHttpBinding\" name=\"soap\" contract=\"SystemDesign.Collaborate.Services.ImageService\"/&gt;\n              &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" name=\"mex\" contract=\"IMetadataExchange\" /&gt;\n          &lt;/service&gt;\n      &lt;/services&gt;\n      &lt;behaviors&gt;\n          &lt;serviceBehaviors&gt;\n              &lt;behavior name=\"PublishMetadataBehavior\"&gt;\n                  &lt;serviceMetadata httpGetEnabled=\"true\" policyVersion=\"Policy15\"/&gt;\n              &lt;/behavior&gt;\n          &lt;/serviceBehaviors&gt;\n      &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","wcf","properties","datacontractserializer"],"answer_count":7,"favorite_count":3,"up_vote_count":22,"down_vote_count":0,"view_count":4468,"score":22,"question_id":2323277,"title":"WCF chokes on properties with no \"set \". Any workaround?","body":"<p>I have some class that I'm passing as a result of a service method, and that class has a get-only property:</p>\n\n<pre><code>[DataContract]\npublic class ErrorBase\n{\n  [DataMember]\n  public virtual string Message { get { return \"\"; } }\n}\n</code></pre>\n\n<p>I'm getting an exception on service side:</p>\n\n<pre><code>System.Runtime.Serialization.InvalidDataContractException: \nNo set method for property 'Message' in type 'MyNamespace.ErrorBase'.\n</code></pre>\n\n<p>I have to have this property as only getter, I can't allow users to assign it a value. Any workaround I could use? Or am I missing some additional attribute?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","silverlight","wcf","tcp"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2667,"score":0,"question_id":5727599,"title":"WCF Service Hosted in Windows Service over net tcp","body":"<p>In my project I have one WCF Service which is hosted in a Windows Service. I hosted the WCF Service in Windows Service over <code>netTCPBinding</code> and Installed Windows Service. To access WCF service in my silverlight project I have added service reference of wcf.\nBut, when I am calling a method in WCF Service am getting the following error :</p>\n\n<blockquote>\n  <p>Could not connect to\n  net.tcp://localhost:8732/WCFHost/.<br>\n  The connection attempt lasted for a time\n  span of 00:00:03.2951885.<br>\n  TCP error code 10013: An attempt was made to\n  access a socket in a way forbidden by\n  its access permissions..<br>\n  This could be\n  due to attempting to  access a service\n  in a cross-domain way while the\n  service is not configured for\n  cross-domain access. You may need to\n  contact the owner of the service to\n  expose a sockets cross-domain policy\n  over HTTP and host the service in the\n  allowed sockets port range 4502-4534.</p>\n</blockquote>\n\n<p>Please help me out.</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12983007,"title":"Trying to throw a custom exception inside IDispatchOperationSelector.SelectOperation","body":"<p>Hi I want to catch the 404 and 405 WCF http status errors and return a custom json error (the same as my application errors).</p>\n\n<p>I have implemented the following interface IDispatchOperationSelector in this class...</p>\n\n<p>public class USWebHttpDispatchOperationSelector : WebHttpDispatchOperationSelector, IDispatchOperationSelector\n    {\n        public USWebHttpDispatchOperationSelector(ServiceEndpoint endpoint)\n            : base(endpoint)\n        {\n        }  </p>\n\n<pre><code>#region IDispatchOperationSelector Members\n\n    string IDispatchOperationSelector.SelectOperation(ref Message message)\n    {\n        bool uriMatched = false;\n        string operationName = base.SelectOperation(ref message, out uriMatched);\n\n        //if the operationMethodName is null we haven't found an operation we can call\n        if (string.IsNullOrWhiteSpace(operationName) == true)\n        {\n            if (uriMatched == true)\n            {\n                //We are not allowed to use this verb on the operation\n                throw WebFault.Create(new MethodNotAllowedMessage());\n            }\n            else\n            {\n                //We did not find an operation that matched the URL\n                throw WebFault.Create(new EndpointNotFound());\n            }\n        }\n        return operationName;\n    }\n\n    #endregion\n}\n</code></pre>\n\n<p>I set up the webHttpBehaviour class like this...</p>\n\n<pre><code>public class ConvertComplexTypeAttribute : Attribute, IContractBehavior\n{\n    private static readonly Type _baseType = typeof(WebHttpBehavior);\n\n    #region IContractBehavior\n\n    public void AddBindingParameters(ContractDescription contractDescription, ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)\n    { }\n\n    public void ApplyClientBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, ClientRuntime clientRuntime)\n    { }\n\n    public void ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)\n    {\n        // remove because we want to replace the webHttpBehavior\n        if (endpoint.Behaviors.Contains(_baseType))\n        {\n            // TODO: remove the webhttp behavior\n            endpoint.Behaviors.Remove(_baseType);\n\n            endpoint.Behaviors.Add(new USWebBehavior());\n        }\n\n    }\n\n    public void Validate(ContractDescription contractDescription, ServiceEndpoint endpoint)\n    { }\n\n    #endregion\n}\n</code></pre>\n\n<p>The actual USWebHabviour class is....</p>\n\n<pre><code>public class USWebBehavior : WebHttpBehavior\n{\n    protected override WebHttpDispatchOperationSelector GetOperationSelector(ServiceEndpoint endpoint)\n    {\n        return new USWebHttpDispatchOperationSelector(endpoint);\n    }\n\n}\n</code></pre>\n\n<p>So my code gets called inside IDispatchOperationSelector.SelectOperation just as I expect, however when I throw an exception inside this function, the .net framework crashes with this message...</p>\n\n<p>A first chance exception of type 'System.ServiceModel.Web.WebFaultException`1' occurred in UServices.Common.dll\nA first chance exception of type 'System.NullReferenceException' occurred in System.ServiceModel.Web.dll\nA first chance exception of type 'System.NullReferenceException' occurred in System.ServiceModel.Web.dll\nA first chance exception of type 'System.NullReferenceException' occurred in System.Runtime.DurableInstancing.dll</p>\n\n<p>I expect the first exception, but not the others, the whole WCF seems to crash.</p>\n\n<p>Any ideas ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["wcf","stream"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":38,"score":4,"question_id":12980079,"title":"WCF returning \"dynamic\" gzipstream","body":"<p>I need to create a service that returns a GZipStream consisting of one or more files. The number of files could be hundreds and each file could potentially take up more than 500MB.</p>\n\n<p>Is it somehow possible to add the files dynamically to the gzipstream as the stream is being transfered? (to avoid running into an out-of-memory exception when the files needs to be copied into the stream)</p>\n\n<p>Etc:</p>\n\n<ol>\n<li>Copy fileA to the stream being returned.</li>\n<li>The client starts reading the stream.</li>\n<li>When fileA has been read (client side), copy fileB to the stream (server side).</li>\n<li>The client continue to read the stream.</li>\n</ol>\n\n<p>... and so on until there's no more files.</p>\n\n<p>Btw. it's not important that the files are compressed, just that they are combined into a zip file so that the client only has to download one single file.</p>\n\n<p>So my goal is: Stream multiple files back to the client as one single file without processing all the files at once on the server (to avoid loading all files into memory and therefore raise an out-of-memory exception).</p>\n\n<p>Could this be done by creating a custom stream somehow or is there an easier way to go?</p>\n\n<p>Thanks.</p>\n"},{"tags":["wcf","silverlight-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2669,"score":0,"question_id":6469974,"title":"Silverlight WCF issue with cross-domain policy file","body":"<p>Ive seen a number of threads on this issue but none have worked for me. I have a simple silverlight application. I consume a WCF service. When I call a method GetOrderList from the service I get the following error:</p>\n\n<p>An error occurred while trying to make a request to URI 'https://testserver2.mydomain.org/ORDERNET/WCFServices/OrderService/OrderService.svc'. This could be due to attempting to access a service in a cross-domain way without a proper cross-domain policy in place, or a policy that is unsuitable for SOAP services. You may need to contact the owner of the service to publish a cross-domain policy file and to ensure it allows SOAP-related HTTP headers to be sent. This error may also be caused by using internal types in the web service proxy without using the InternalsVisibleToAttribute attribute. Please see the inner exception for more details.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public partial class MainPage : UserControl\n    {\n        public MainPage()\n        {\n            InitializeComponent();\n            ServiceReference1.ServiceClient sc = new ServiceReference1.ServiceClient();\n            sc.GetOrderListAsync(\"testuser\");\n            sc.GetOrderListCompleted += new EventHandler&lt;ServiceReference1.GetOrderListCompletedEventArgs&gt;(sc_GetOrderListCompleted);\n        }\n\n        void sc_GetOrderListCompleted(object sender, ServiceReference1.GetOrderListCompletedEventArgs e)\n        {\n            var RESULT = e.Result;\n        }\n    }\n</code></pre>\n\n<p>This is my client access policy file that I put on my wwwroot:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;access-policy&gt;  \n  &lt;cross-domain-access&gt;  \n&lt;policy&gt;  \n      &lt;allow-from http-request-headers=\"*\"&gt;  \n        &lt;domain uri=\"*\"/&gt;  \n      &lt;/allow-from&gt;  \n      &lt;grant-to&gt;  \n        &lt;resource path=\"/\" include-subpaths=\"true\"/&gt;  \n      &lt;/grant-to&gt;  \n    &lt;/policy&gt;  \n  &lt;/cross-domain-access&gt;  \n&lt;/access-policy&gt; \n</code></pre>\n\n<p>When I run fiddler, it finds the \"clientaccesspolicy.xml\" with a 200 OK (text/xml) so I know is finding the file.</p>\n\n<p>What could be the issue? Do I have an invalid policy file? If I create a console application and consume the service, I can call the method with thno problem. </p>\n\n<p>Any ideas?</p>\n"},{"tags":[".net","asp.net","wcf",".net-3.5"],"answer_count":6,"favorite_count":20,"up_vote_count":85,"down_vote_count":0,"view_count":51204,"score":85,"question_id":884235,"title":"WCF - How to Increase Message Size Quota","body":"<p>I have a WCF Service which returns 1000 records from database to the client. I have a ASP.NET WCF client - (I have added service reference in asp.net web application project to consume WCF). I get the following message when I run the client application -</p>\n\n<blockquote>\n  <p><strong>The maximum message size quota for incoming messages (65536) has been\n  exceeded. To increase the quota, use\n  the MaxReceivedMessageSize property on\n  the appropriate binding element.</strong></p>\n</blockquote>\n\n<p>Any Help? How to increase message size quota?</p>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12982520,"title":"WCF 4.0 UnhandledDispatchOperation never gets called","body":"<p>I am trying to catch the 404 and 405 errors generated by WCF so I can return a JSON web fault with more information in it. I already have an IErrorHandler working for my application faults.</p>\n\n<p>My problem is that I try to change the UnhandledDispatchOperation Invoker to a custom one and the Invoke method never gets called.</p>\n\n<p>So my IContractBehaviour class....</p>\n\n<pre><code>public class ConvertComplexTypeAttribute : Attribute, IContractBehavior\n{\n    private static readonly Type _baseType = typeof(WebHttpBehavior);\n\n    #region IContractBehavior\n\n    public void AddBindingParameters(ContractDescription contractDescription, ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)\n    { }\n\n    public void ApplyClientBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, ClientRuntime clientRuntime)\n    { }\n\n    public void ApplyDispatchBehavior(ContractDescription contractDescription, ServiceEndpoint endpoint, DispatchRuntime dispatchRuntime)\n    {            \n        dispatchRuntime.Operations.Remove(dispatchRuntime.UnhandledDispatchOperation);\n        dispatchRuntime.UnhandledDispatchOperation = new DispatchOperation(dispatchRuntime, \"*\", \"*\", \"*\");\n        dispatchRuntime.UnhandledDispatchOperation.DeserializeRequest = false;\n        dispatchRuntime.UnhandledDispatchOperation.SerializeReply = false;\n        dispatchRuntime.UnhandledDispatchOperation.Invoker = new UnhandledOperationInvoker() { BaseUri = endpoint.ListenUri };\n    }\n\n    public void Validate(ContractDescription contractDescription, ServiceEndpoint endpoint)\n    { }\n\n    #endregion\n}\n</code></pre>\n\n<p>And now my actual IOperationInvoker class...</p>\n\n<pre><code>public class UnhandledOperationInvoker : IOperationInvoker\n{\n\n    #region IOperationInvoker Members\n\n    public Uri BaseUri { get; set; }\n\n    public UbiUnhandledOperationInvoker()\n    {\n        System.Diagnostics.Debug.WriteLine(\"\");\n    }\n\n    public object[] AllocateInputs()\n    {\n        return new object[1];\n    }\n\n    public object Invoke(object instance, object[] inputs, out object[] outputs)\n    {\n        throw new System.NotImplementedException();\n    }\n\n    public System.IAsyncResult InvokeBegin(object instance, object[] inputs, System.AsyncCallback callback, object state)\n    {\n        throw new System.NotImplementedException();\n    }\n\n    public object InvokeEnd(object instance, out object[] outputs, System.IAsyncResult result)\n    {\n        throw new System.NotImplementedException();\n    }\n\n    public bool IsSynchronous\n    {\n        get { return true; }\n    }\n\n    #endregion\n}\n</code></pre>\n\n<p>I know nothing is implemented in the UnhandledOperationInvoker class yet, but none of the functions even get hit when I add a breakpoint. Any ideas ?</p>\n"},{"tags":["c#","wcf","multithreading"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2120,"score":4,"question_id":2603135,"title":"WCF Service with callbacks coming from background thread?","body":"<p>Here is my situation. I have written a WCF service which calls into one of our vendor's code bases to perform operations, such as Login, Logout, etc. A requirement of this operation is that we have a background thread to receive events as a result of that action. For example, the Login action is sent on the main thread. Then, several events are received back from the vendor service as a result of the login. There can be 1, 2, or several events received. The background thread, which runs on a timer, receives these events and fires an event in the wcf service to notify that a new event has arrived.</p>\n\n<p>I have implemented the WCF service in Duplex mode, and planned to use callbacks to notify the UI that events have arrived. Here is my question: How do I send new events from the background thread to the thread which is executing the service? </p>\n\n<p>Right now, when I call <code>OperationContext.Current.GetCallbackChannel&lt;IMyCallback&gt;()</code>, the OperationContext is null. Is there a standard pattern to get around this?</p>\n\n<p>I am using PerSession as my SessionMode on the ServiceContract.</p>\n\n<p>UPDATE:\nI thought I'd make my exact scenario clearer by demonstrating how I'm receiving events from the vendor code. My library receives each event, determines what the event is, and fires off an event for that particular occurrence. </p>\n\n<p>I have another project which is a class library specifically for connecting to the vendor service. I'll post the entire implementation of the service to give a clearer picture:</p>\n\n<pre><code>    [ServiceBehavior(\n        InstanceContextMode = InstanceContextMode.PerSession\n        )]\n    public class VendorServer:IVendorServer\n    {\nprivate IVendorService _vendorService;  // This is the reference to my class library\n\n        public VendorServer()\n        {\n_vendorServer = new VendorServer();\n_vendorServer.AgentManager.AgentLoggedIn += AgentManager_AgentLoggedIn; // This is the eventhandler for the event which arrives from a background thread\n\n}\n\n        public void Login(string userName, string password, string stationId)\n        {\n            _vendorService.Login(userName, password, stationId); // This is a direct call from the main thread to the vendor service to log in\n        }\n\n    private void AgentManager_AgentLoggedIn(object sender, EventArgs e)\n    {\n\n        var agentEvent = new AgentEvent\n                             {\n                                 AgentEventType = AgentEventType.Login,\n                                 EventArgs = e\n                             };\n    }\n}\n</code></pre>\n\n<p>The AgentEvent object contains the callback as one of its properties, and I was thinking I'd perform the callback like this:</p>\n\n<pre><code>agentEvent.Callback = OperationContext.Current.GetCallbackChannel&lt;ICallback&gt;();\n</code></pre>\n\n<p>The AgentEvent is an object defined in the service:</p>\n\n<pre><code>[DataContract]\npublic class AgentEvent\n{\n    [DataMember]\n    public EventArgs EventArgs { get; set; }\n    [DataMember]\n    public AgentEventType AgentEventType { get; set; }\n    [DataMember]\n    public DateTime TimeStamp{ get; set; }\n    [DataMember]\n    public IVendorCallback Callback { get; set; }\n}\n</code></pre>\n\n<p>IVendorCallback looks like this:</p>\n\n<pre><code>    public interface IVendorCallback\n    {\n        [OperationContract(IsOneWay = true)]\n        void SendEvent(AgentEvent agentEvent);\n    }\n</code></pre>\n\n<p>The callback is implemented on the client and uses the EventArgs porperty of the AgentEvent to populate data on the UI.\nHow would I pass the OperationContext.Current instance from the main thread into the background thread?</p>\n"},{"tags":["wcf","silverlight","cross-domain"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12876831,"title":"WCF/silverlight end points","body":"<p>I have an issue which I'm trying to overcome, i'm away this is possible but im not sure how.</p>\n\n<p>I have the following config in my service </p>\n\n<pre><code>&lt;configuration&gt;\n&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;customBinding&gt;\n            &lt;binding name=\"CustomBinding_MyDataService\"&gt;\n                &lt;binaryMessageEncoding /&gt;\n                &lt;httpTransport maxReceivedMessageSize=\"2147483647\" maxBufferSize=\"2147483647\" /&gt;\n            &lt;/binding&gt;\n        &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://mywebsite.com/vdir/Services/MyDataService.svc\"\n            binding=\"customBinding\" bindingConfiguration=\"CustomBinding_MyDataService\"\n            contract=\"HBDataLayer.MyDataService\" name=\"CustomBinding_MyDataService\" /&gt;          \n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p></p>\n\n<p>The issue is the end point address, i have the address set to the actually published location however when im trying to debug locally i get a crossdomain policy issue. I have to constantly update this config file switching between localhost and the website.</p>\n\n<p>I have been told that its possible to configure it so you don't have this problem.</p>\n\n<p>Does anyone know how?</p>\n"},{"tags":["wcf","certificate","certificatestore"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":17,"score":-1,"question_id":12981421,"title":"Choosing certificate store CurrentUser vs LocalComputer for WCF Services","body":"<p>I have a WCF service with <strong>BasicHttpBinding</strong> using certificate authentication. </p>\n\n<h3>What are the best practices on choosing the location to save the certificate that the service will use? And what are the advantages/disadvantages to each location?</h3>\n"},{"tags":["xml","json","wcf","rest","content-type"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":330,"score":0,"question_id":9567589,"title":"WCF Service - calling a client to access rest using json is not giving correct content type","body":"<p>i have an issue (of which i've been pulling my hair out for a number of days) whereby I'm attempting to use a WCF service to call another RESTful service. </p>\n\n<p>however, when tracing this through it fails to put the correct json content type on the message.</p>\n\n<p>example of call in client (this is within a WCF service  which calls the code)</p>\n\n<pre><code>[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\n[ServiceBehavior()]\npublic partial class MyRestServiceClient : System.ServiceModel.ClientBase&lt;IMyRestService&gt;, IMyRestService\n{\n    [WebInvoke(Method = \"POST\", UriTemplate = \"/MyService/ReferenceTypes.json\", RequestFormat = WebMessageFormat.Json)]\n    public MyServiceLists GetReferenceTypes()\n    {\n        try\n        {\n            return base.Channel.GetReferenceTypes();\n        }\n        catch (Exception e)\n        {\n            throw e; //throws exception here - method not allowed \n        }\n    }\n}\n</code></pre>\n\n<p>Instead of putting content type of application/json it places application/xml instead to the call. this was worked out from the activity tracing placed on the WCF service doing the call.\nexample of the \"message sent\" info from Activity log:</p>\n\n<pre><code>&lt;E2ETraceEvent xmlns=\"http://schemas.microsoft.com/2004/06/E2ETraceEvent\"&gt;\n&lt;System xmlns=\"http://schemas.microsoft.com/2004/06/windows/eventlog/system\"&gt;\n&lt;EventID&gt;262164&lt;/EventID&gt;\n&lt;Type&gt;3&lt;/Type&gt;\n&lt;SubType Name=\"Information\"&gt;0&lt;/SubType&gt;\n&lt;Level&gt;8&lt;/Level&gt;\n&lt;TimeCreated SystemTime=\"2012-03-05T12:26:52.8913972Z\" /&gt;\n&lt;Source Name=\"System.ServiceModel\" /&gt;\n&lt;Correlation ActivityID=\"{7759c13c-972d-46a2-8048-2dcaf1c066bf}\" /&gt;\n&lt;Execution ProcessName=\"aspnet_wp\" ProcessID=\"2408\" ThreadID=\"11\" /&gt;\n&lt;Channel /&gt;\n&lt;Computer&gt;Z1020734&lt;/Computer&gt;\n&lt;/System&gt;\n&lt;ApplicationData&gt;\n&lt;TraceData&gt;\n&lt;DataItem&gt;\n&lt;TraceRecord xmlns=\"http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord\" Severity=\"Information\"&gt;\n&lt;TraceIdentifier&gt;http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Channels.MessageSent.aspx&lt;/TraceIdentifier&gt;\n&lt;Description&gt;Sent a message over a channel.&lt;/Description&gt;\n&lt;AppDomain&gt;/LM/w3svc/1/ROOT/My.Services-2-129754240054859056&lt;/AppDomain&gt;\n&lt;Source&gt;System.ServiceModel.Channels.HttpOutput+WebRequestHttpOutput/18905726&lt;/Source&gt;\n&lt;ExtendedData xmlns=\"http://schemas.microsoft.com/2006/08/ServiceModel/MessageTraceRecord\"&gt;\n&lt;MessageProperties&gt;\n**&lt;Encoder&gt;application/xml; charset=utf-8&lt;/Encoder&gt;**\n&lt;AllowOutputBatching&gt;False&lt;/AllowOutputBatching&gt;\n&lt;Via&gt;http://mymachine/My.services.stub.REST/&lt;/Via&gt;\n&lt;/MessageProperties&gt;\n&lt;MessageHeaders&gt;&lt;/MessageHeaders&gt;\n&lt;/ExtendedData&gt;\n&lt;/TraceRecord&gt;\n&lt;/DataItem&gt;\n&lt;/TraceData&gt;\n&lt;/ApplicationData&gt;\n&lt;/E2ETraceEvent&gt;\n</code></pre>\n\n<p>I have used a webHttpBinding for the client, then i've also tried the custom binding equivalent with a custom web content type mapper that forces a Json content type to no avail.</p>\n\n<p>the client end point is pointing to a Restful service (using the Rest 40 template) on the same machine. \nsee below for web.config of the WCf service that is trying to call the Rest endpoint:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;connectionStrings&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n  &lt;/appSettings&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n  &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment  multipleSiteBindingsEnabled=\"true\"/&gt;\n    &lt;services&gt;\n      &lt;service name=\"My.Services.MyService\" behaviorConfiguration=\"My.Services.MyServiceBehavior\" &gt;\n        &lt;endpoint address=\"\" binding=\"customBinding\" bindingConfiguration=\"CustomBinding_IMyService\" contract=\"My.Common.ServiceContracts.IMyService\"/&gt;\n       &lt;/service&gt;\n      &lt;service name=\"My.Services.SomeOtherService\" behaviorConfiguration=\"My.Services.SomeOtherBehavior\" &gt;\n        &lt;endpoint address=\"\" binding=\"customBinding\"  bindingConfiguration=\"customBinding_ISomeOtherService\" contract=\"My.Common.ServiceContracts.ISomeOtherService\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"webHttpCustomBinding\"&gt;\n          &lt;security mode=\"TransportCredentialOnly\"&gt;\n            &lt;transport proxyCredentialType=\"None\" clientCredentialType=\"Windows\"&gt;\n            &lt;/transport&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n\n      &lt;customBinding&gt;\n        &lt;binding name =\"CustomBinding_IIMyRestService\"&gt;\n           &lt;webMessageEncoding webContentTypeMapperType=\"My.Common.ServiceModel.JsonContentTypeMapper, My.Common\" &gt;&lt;/webMessageEncoding&gt;\n          &lt;httpTransport  authenticationScheme=\"Negotiate\" &gt;&lt;/httpTransport&gt;\n         &lt;/binding&gt;\n        &lt;binding name=\"CustomBinding_IMyService\"&gt;\n          &lt;textMessageEncoding messageVersion=\"Soap12\" /&gt;\n          &lt;httpTransport maxBufferPoolSize=\"1000000\" maxReceivedMessageSize=\"1000000\"\n            authenticationScheme=\"Negotiate\" maxBufferSize=\"1000000\"   /&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"customBinding_ISomeOtherService\"&gt;\n          &lt;textMessageEncoding messageVersion=\"Soap12\" /&gt;\n          &lt;httpTransport  /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://MyMachine/My.services.stub.REST/\" binding=\"customBinding\" bindingConfiguration=\"CustomBinding_IMyRestService\" name=\"RestService\" contract=\"My.Common.ServiceContracts.IIMyRestService\" behaviorConfiguration=\"webhttp\"/&gt;\n &lt;/client&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"webhttp\"&gt;\n        &lt;/behavior&gt;\n &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"My.Services.MyServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" httpsGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"My.Services.SomeOtherServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.net&gt;\n    &lt;defaultProxy useDefaultCredentials=\"true\"/&gt;\n  &lt;/system.net&gt;\n &lt;system.diagnostics&gt;\n    &lt;trace autoflush=\"true\"/&gt;\n    &lt;sources&gt;\n      &lt;source name=\"System.ServiceModel\" switchValue=\"Information, ActivityTracing\" propagateActivity=\"true\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"sdt\" type=\"System.Diagnostics.XmlWriterTraceListener\" initializeData=\"c:\\temp\\my.Services.svclog\"/&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n  &lt;/system.diagnostics&gt; \n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Note: a console app i've written with the same function and config does work correctly, and gives the correct content type. </p>\n\n<p>Any help you can give is appreciated.</p>\n"},{"tags":["visual-studio-2008","wcf"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":420,"score":0,"question_id":4414024,"title":"WCF Fails to generate client proxy","body":"<p>I have an odd problem that I just can't seem to diagnose, and it seems to be a PEBCAC thing, but I have spent a good deal of time trying to solve it. I created a WCF service that I host via a windows service. This service has been working fine for a while, and I have a windows forms and a web interface to it. The service was originally developed on XP but I have recently migrated to Windows 7. When I migrated, I found out that the windows security for the service prevented me from using my WinForms app on windows 7, yet it worked just fine on XP talking to the service on Windows Server 2008 R2, Windows 7 and XP. To simplify things while in development, I have disabled security completely, and my WinForms app works again on windows7.</p>\n\n<p>I then made some other changes to the WCF service, adding methods, changing data contracts, etc. The only endpoint changes were to disable security on wshttp. Suddenly, updating the service reference for the web app no longer creates the client proxy, but it does generate the wsdl and xsd files. I have tried numerous combinations of the older and newer service on XP and Win7 with the result that:</p>\n\n<ol>\n<li>The old service works fine when updating the reference, whether it runs on XP or Win7 and whether the web app code is on XP or Win7.</li>\n<li>The new service does not create the proxy, whether run on XP or Win7 and whether the web app code is on XP or Win7. I get no errors from the service reference update, however, the <code>configuration.svcinfo</code> and <code>configuration91.svcinfo</code> files have no behaviors, bindings or endpoints listed. The rest of the files look fine.</li>\n<li>I am able to use <code>svcutil</code> to get the metadata and to generate the proxy code using the new version of the service.</li>\n<li>When the service reference is updated, I do get two of the items that are part of the data contract showing up in object explorer, but only one of them is correct. I get no client, or other data contract objects.</li>\n<li>The kicker is that the windows forms app works just fine with the new service, including updating the reference and calling the service methods. Huh?</li>\n</ol>\n\n<p>I have looked at the service, behavior and endpoint definitions in the new service and they match the old one. Nothing online that I could find references such an error. I realize that I must be doing something wrong in the new code, but since it works fine with WinForms app, I am at a loss to explain the difference.</p>\n\n<p>Any help would be greatly appreciated. Perhaps I can keep some of my hair ;)</p>\n\n<p><strong>-Edit-</strong></p>\n\n<p>After reading the answer I did some more research and tried a few more things:</p>\n\n<p>I have looked at the xsd, etc files for the service with no security and also after restoring things to the way they were in terms of top-level enums with <code>DataContract</code> attribute (have none of these) and also restoring the security values to what they used to be. In both cases, I see nothing amiss, except that the files are named differently: the old service reference uses xsd files with numeric suffixes that range from 2 - 5, whereas the latest one uses 1 - 4 (can't see that this should affect things, since the pointers in the svcmap seem correct). It does make it more difficult to diff things, but I have looked at each file in detail and the data seems correct, just placed into different files.</p>\n\n<p>The wsdl file, after security is restored to the old values is identical except for the host IP and machine name, as expected. But still the <code>configuration.svcinfo</code> and <code>configuration91.svcinfo</code> have no endpoints, behaviors or bindings defined. Also, oddly, of the two data contracts that do get defined, one only has a New member: its data members are not present. This is a data contract that references a class that is marked as <code>Serializable</code>, but is not listed with a <code>DataContract</code> attribute. The only thing that has changed there is that I added a single new string member to the class. What is even more odd is that there is a proper definition of the data contract class in the xsd files.</p>\n\n<p>I'm very confused.</p>\n"},{"tags":["asp.net","wcf","rest","web-config","iis5"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":237,"score":1,"question_id":12317227,"title":"Hosting .NET 4.0 REST WCF service on IIS 5.1 (Windows XP) issue 404 (The resource cannot be found)","body":"<p>I've got a WCF-based RESTful API (.NET Framework 4.0) which works fine when hosting on IIS 7.0 (Win7) or IIS 6.0 (Server 2003). However, I found a problem hosting the website on IIS 5.1 (Windows XP) which is surprising because I thought 5.1 and 6.0 differ only by the number of hosted websites.</p>\n\n<p>Everything is fine with the following request (<a href=\"http://i.stack.imgur.com/JIuFC.jpg\" rel=\"nofollow\">the result screenshot</a>): </p>\n\n<blockquote>\n  <p><code>http://localhost/test/api/OrderService.svc</code></p>\n</blockquote>\n\n<p>So I guess I don't have to register any module for handling SVC files or whatsoever.\nHowever, the following request (<a href=\"http://i.stack.imgur.com/DEFtZ.jpg\" rel=\"nofollow\">the result screenshot</a>): </p>\n\n<blockquote>\n  <p><code>http://localhost/test/api/OrderService.svc/rest/orders?format=json</code></p>\n</blockquote>\n\n<p>returns HTTP code 404.\nI've checked the event viewer but found nothing.</p>\n\n<p>Again, everything works on IIS 7.0 and IIS 6.0.\nHere is the web.config file (some things cut):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\" /&gt;\n        &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n        &lt;add assembly=\"System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;globalization uiCulture=\"auto\" /&gt;\n    &lt;customErrors mode=\"Off\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;!--      system.web/httpHandlers.\n      ,     ,     ,    system.webServer/validation@validateIntegratedModeConfiguration  false.\n       ASP.NET   IIS 7.0        .--&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n      &lt;remove name=\"WebDAVModule\" /&gt;\n      &lt;add name=\"ScriptModule\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;add name=\"UrlRoutingModule\" type=\"System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n    &lt;/modules&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"WebDAV\" /&gt;\n      &lt;add name=\"AddAsmx\" verb=\"*\" path=\"*.asmx\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;add name=\"AppService\" verb=\"*\" path=\"*_AppService.axd\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;add name=\"ScriptResource\" verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"soapBinding\" closeTimeout=\"00:02:00\" hostNameComparisonMode=\"Exact\" maxBufferSize=\"120000\" maxReceivedMessageSize=\"120000\" &gt;\n         &lt;security mode=\"Transport\" /&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"restBinding\"&gt;\n          &lt;security mode=\"Transport\" /&gt;\n        &lt;/binding&gt;\n        &lt;!--http://social.msdn.microsoft.com/Forums/en/wcf/thread/845d0bbd-52b4-420f-bf06-793d53ef93ba--&gt;\n        &lt;!--&lt;binding name=\"poxBinding\"&gt;\n        &lt;/binding&gt;--&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;standardEndpoints&gt;\n      &lt;webHttpEndpoint&gt;\n        &lt;!-- \n            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint \n            via the attributes on the &lt;standardEndpoint&gt; element below\n        --&gt;\n        &lt;standardEndpoint name=\"XDDF\" maxBufferSize=\"120000\" maxReceivedMessageSize=\"120000\" helpEnabled=\"true\" automaticFormatSelectionEnabled=\"true\" /&gt;\n      &lt;/webHttpEndpoint&gt;\n    &lt;/standardEndpoints&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"slBehavior\" name=\"WcfServiceLibrary.OrderService\"&gt;\n        &lt;endpoint address=\"soap\" binding=\"basicHttpBinding\" name=\"basicHttpBinding\" bindingConfiguration=\"soapBinding\" contract=\"WcfServiceLibrary.IOrderService\" /&gt;\n        &lt;endpoint address=\"rest\" binding=\"webHttpBinding\" bindingConfiguration=\"restBinding\" behaviorConfiguration=\"restBehavior\" contract=\"WcfServiceLibrary.IOrderService\" /&gt;\n        &lt;!--&lt;endpoint address=\"pox\" binding=\"webHttpBinding\" bindingConfiguration=\"poxBinding\" behaviorConfiguration=\"poxBehavior\" contract=\"WcfServiceLibrary.IOrderService\"/&gt;--&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpsBinding\" name=\"mexHttpbinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"restBehavior\"&gt;\n          &lt;!--&lt;enableWebScript/&gt;--&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior&gt;\n        &lt;!--&lt;behavior name=\"poxBehavior\"&gt;\n            &lt;webHttp /&gt;\n          &lt;/behavior&gt;--&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"slBehavior\"&gt;\n          &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug httpHelpPageEnabled=\"true\" includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"returnFaults\" /&gt;\n        &lt;behavior name=\"\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Please help. I couldn't find anything that would help.</p>\n"},{"tags":["c#",".net","wcf","exchange","ews"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":289,"score":1,"question_id":9354456,"title":"EWS error when running from WCF","body":"<p>I'm trying to access my email using EWS. It is working fine from a Console application. But when I'm trying to access same piece of code using WCF service it is giving me error:</p>\n\n<blockquote>\n  <p><em>When making a request as an account that does not have a mailbox, you must specify the mailbox primary SMTP address for any distinguished folder Ids</em></p>\n</blockquote>\n\n<h3>Here is my code :</h3>\n\n<pre><code>        ExchangeService service = new ExchangeService();\n        service.Credentials = new WebCredentials(\"username\", \"password\");\n        service.TraceEnabled = true;\n        service.AutodiscoverUrl(\"emailID\");\n\n        FindItemsResults&lt;Item&gt; findResults = service.FindItems(\n        WellKnownFolderName.Inbox,\n        new ItemView(10));\n</code></pre>\n\n<p>Any help will be greatly appreciated </p>\n\n<h3>Edit 1: I'm calling this WCF service from a WP7 app and here is the ServiceReferences.ClientConfig setting</h3>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_ITestService\" maxBufferSize=\"2147483647\"\n                maxReceivedMessageSize=\"2147483647\"&gt;\n                &lt;security mode=\"None\" /&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://MachineIP/Service1.svc\" binding=\"basicHttpBinding\"\n            bindingConfiguration=\"BasicHttpBinding_ITestService\" contract=\"ServiceReference1.ITestService\"\n            name=\"BasicHttpBinding_ITestService\" /&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["wcf","unity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12919872,"title":"Singleton Per Call Context WCF Web Request in Unity","body":"<p>I have gone through the question <a href=\"http://stackoverflow.com/questions/1151201/singleton-per-call-context-web-request-in-unity\">Singleton Per Call Context (Web Request) in Unity</a>. </p>\n\n<p>Basically I want to create a singleton object per wcf request using Unity Container. Though I found the answers of other question helpful for the ASP.Net web application, I am not sure those answers still apply to WCF service. </p>\n\n<p>The questions is,  Using both CallContext and HttpContext in WCF service, can we create PerCallContextOrRequestLifeTimeManager? Would that serve singleton object per wcf call?</p>\n"},{"tags":["wcf","wcf-client","duplex-channel"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12976193,"title":"Closing channel on client side after every call to service application","body":"<p>I've started working on a client-server distributed application using WCF. The clients should also send requests to the server, therefore I chose to implement duplex operations using the NetTcpBinding since all the clients will b on the same intranet.</p>\n\n<p>On the server side, for the service class that implements the server contract I use these settings</p>\n\n<pre><code>[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single, InstanceContextMode = InstanceContextMode.Single, UseSynchronizationContext = false)]\n</code></pre>\n\n<p>Every time a client is initialized, I'm creating an instance of the proxy class generated by adding the service using <code>'Add service reference'</code> option in Visual Studio. After the proxy is initialized, I send a <code>Connect</code> message to the server:</p>\n\n<pre><code> _proxy.InnerChannel.Faulted += new EventHandler(InnerChannel_Faulted);\n _proxy.InnerChannel.Closing += new EventHandler(InnerChannel_Closing);\n //send a connect message to the server\n _proxy.ClientConnected(ClientHostName, Version, ClientID, ClientIP); \n</code></pre>\n\n<p>Now the server has a reference to the connected client, by using </p>\n\n<pre><code>OperationContext.Current.GetCallbackChannel&lt;IClientEvents&gt;()\n</code></pre>\n\n<p>This is pretty straight forward, nothing fancy. However, I'm having a bit of trouble with making the client reconnecting to the server after the server went online. In my scenario, I will have up to 50-100 clients connected to the server and they will rarely communicate with the server, let's say in average, 1 request per hour.</p>\n\n<p>What I want to achieve is to have the client \"hanging\" while the is offline, for this I try to reinitialize the communication channel on the client side every time the channel ends up in <code>Faulted</code> state, which works ok. But when I try to close the server, I get the following message</p>\n\n<pre><code>This could be because a client failed to close a sessionful channel within the required time.  \n</code></pre>\n\n<p>I'm now struggling to find the most appropriate implementation for my scenario:</p>\n\n<ol>\n<li><strong>Not closing the channel after the service call</strong>. This way the client will always try to recreate the channel once the connection with the server is down (e.g. interval of 1 min). Doesn't make much sense to keep the channel opened all this time though, so I'm not that sure about this approach.</li>\n<li><strong>Closing the channel after each call</strong> and recreate when making a new call to the server. This works fine when making service calls, but what happens if the server wants to send a notification the client? The callback reference on the server side will not be valid anymore, I'd have to wait for the client to send a new connect message to get the new callback reference, right? In this case, should I regularly have a different call similar to a Ping() to the server in order to ensure that the server can always contact the client?</li>\n</ol>\n\n<p>I'm still reading materials on WCF duplex operations, just can't decide which approach is better so that I don't run into problems later on.</p>\n\n<p>Thanks for your advice!</p>\n"},{"tags":["wcf","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":105,"score":1,"question_id":12950145,"title":"WCF DataContractSerializer","body":"<p>I am getting the following error when trying to return a \nQuestionnaire object to the client. I added the KnowType[typeof(...)] in the Data Contract as suggested, but it still doesn't work.  Not knowing which type is unknown to the Serializer, I just threw in all classes that are in the EF model.  Can someone help?  Thanks.</p>\n\n<p>Here is the Service Contract</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.ServiceModel.Web;\nusing System.Text;\nusing QuestionnaireWcfServiceApp.Models;\n\nnamespace QuestionnaireWcfService\n{\n    [ServiceContract]\n    public interface IQuestionnaireService\n    {\n        [OperationContract]\n        QuestionnaireContract GetQuestionnaire(string questionnaireName);\n\n        [OperationContract]\n        QuestionChain LoadQuestion(int questionnaireID, int? questionID, int? userResponse);\n    }\n\n    [DataContract]\n    [KnownType(typeof(Questionnaire))]\n    [KnownType(typeof(Question))]\n    [KnownType(typeof(Choice))]\n    [KnownType(typeof(Decision))]\n    [KnownType(typeof(QuestionFlow))]\n    public class QuestionChain\n    {\n        [DataMember]\n        public Question Question { get; set; }\n\n        [DataMember]\n        public int? Decision {get;set;}\n    }\n\n    [DataContract]\n    [KnownType(typeof(Questionnaire))]\n    [KnownType(typeof(Question))]\n    [KnownType(typeof(Choice))]\n    [KnownType(typeof(Decision))]\n    [KnownType(typeof(QuestionFlow))]\n    public class QuestionnaireContract\n    {\n        [DataMember]\n        public Questionnaire Questionnaire { get; set; }\n    }\n}\n</code></pre>\n\n<p>Here is the Service.</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.ServiceModel.Web;\nusing System.Text;\nusing QuestionnaireWcfServiceApp.Models;\n\nnamespace QuestionnaireWcfService\n{\n    public class QuestionnaireService : IQuestionnaireService\n    {\n        QuestionnaireWcfServiceApp.Models.QuestionnaireEntities db = new QuestionnaireEntities();\n\n        public QuestionnaireContract GetQuestionnaire(string questionnaireName)\n        {\n            QuestionnaireContract questionnaireContract = new QuestionnaireContract();\n            if (!string.IsNullOrEmpty(questionnaireName))\n            {\n                Questionnaire thisQuestionnaire = (from q in db.Questionnaires where q.Name.Equals(questionnaireName) select q).FirstOrDefault();\n                if (thisQuestionnaire == null)\n                    throw new ArgumentNullException(\"Questionnaire ID is not found.\");\n                else\n                {\n                    questionnaireContract.Questionnaire = thisQuestionnaire;\n                    return questionnaireContract;\n                }\n            }\n            else\n                throw new ArgumentException(\"Questionnaire name is not specified.\");\n        }\n\n        public QuestionChain LoadQuestion(int questionnaireID, int? currentQuestionID, int? userResponse)\n        {\n            QuestionChain qc = new QuestionChain();\n            QuestionFlow thisFlow = null;\n            Question nextQuestion = null;           \n            Questionnaire thisQuestionnaire = (from q in db.Questionnaires where q.QuestionnaireId == questionnaireID select q).FirstOrDefault();\n\n            if (thisQuestionnaire == null)\n                throw new ArgumentNullException(\"Questionnaire ID is not found\");   //InvalidOperationException;\n\n            if (currentQuestionID.HasValue)\n            {\n                //QuestionID should never be changed after setup.  Change the QuestionText around the QuestionID\n                Question thisQuestion = thisQuestionnaire.Questions.Where(q =&gt; q.PKey.Equals(currentQuestionID)).FirstOrDefault();\n                if (thisQuestion == null)\n                    throw new ArgumentNullException(\"Question ID is not found\");\n                else\n                {\n                    if (userResponse.HasValue)\n                    {\n                        thisFlow = thisQuestion.QuestionFlows.First(f =&gt; f.QuestionId.Equals(currentQuestionID) &amp;&amp; f.ChoiceId.Equals(userResponse));\n                        if (thisFlow.Question1 != null)\n                        {\n                            nextQuestion = thisFlow.Question1;\n                            qc.Question = nextQuestion;\n                        }\n                        else\n                        {\n                            qc.Question = null;\n                            qc.Decision = thisFlow.Decision.Value;\n                        }\n                    }\n                    else\n                    {\n                        //can't happen. when reaches here, a userResponse must not be null\n                    }\n                }\n            }           \n            else\n            {\n                //default to question 1\n                nextQuestion = thisQuestionnaire.Questions.First(q =&gt; q.QuestionId.Equals(1));\n                if (nextQuestion == null)\n                    throw new ArgumentNullException(\"Question ID\");\n                else\n                    qc.Question = nextQuestion;\n            }\n            return qc;\n        }\n    }\n}\n</code></pre>\n\n<p>This is the exception in the Windows Application Log.</p>\n\n<pre><code>Exception: System.ServiceModel.CommunicationException: There was an error while trying to serialize parameter http://tempuri.org/:GetQuestionnaireResult. The InnerException message was 'Type System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' \nwith data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:\nhttp://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' \nis not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'.  Please see InnerException for more details. ---&gt; System.Runtime.Serialization.SerializationException: Type 'System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.\n           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\n           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType)\n           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n           at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n           at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)\n           --- End of inner exception stack trace ---\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)\n           at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest)\n           at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)\n           at System.ServiceModel.Channels.BodyWriterMessage.OnBodyToString(XmlDictionaryWriter writer)\n           at System.ServiceModel.Channels.Message.ToString(XmlDictionaryWriter writer)\n           at System.ServiceModel.Diagnostics.MessageLogTraceRecord.WriteTo(XmlWriter writer)\n           at System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)\n           at System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message&amp; message, XmlReader reader, MessageLoggingSource source)\n           at System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message&amp; message, XmlReader reader, MessageLoggingSource source)\n         Process Name: WebDev.WebServer40\n         Process ID: 11620\n\n        Event Xml:\n        &lt;Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\"&gt;\n          &lt;System&gt;\n            &lt;Provider Name=\"System.ServiceModel 4.0.0.0\" /&gt;\n            &lt;EventID Qualifiers=\"49154\"&gt;5&lt;/EventID&gt;\n            &lt;Level&gt;2&lt;/Level&gt;\n            &lt;Task&gt;7&lt;/Task&gt;\n            &lt;Keywords&gt;0x80000000000000&lt;/Keywords&gt;\n            &lt;TimeCreated SystemTime=\"2012-10-18T07:32:11.000000000Z\" /&gt;\n            &lt;EventRecordID&gt;36499&lt;/EventRecordID&gt;\n            &lt;Channel&gt;Application&lt;/Channel&gt;\n            &lt;Computer&gt;Jon-PC&lt;/Computer&gt;\n            &lt;Security UserID=\"S-1-5-21-334737869-2079735299-2176000493-1000\" /&gt;\n          &lt;/System&gt;\n          &lt;EventData&gt;\n            &lt;Data&gt;System.ServiceModel.CommunicationException: There was an error while trying to serialize parameter http://tempuri.org/:GetQuestionnaireResult. The InnerException message was 'Type 'System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'.  Please see InnerException for more details. ---&amp;gt; System.Runtime.Serialization.SerializationException: Type 'System.Data.Entity.DynamicProxies.Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342' with data contract name 'Questionnaire_EF00247BEFB9F733C947A4C3E57FD12709E91510AC0DA534D137ED75FCCAC342:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.\n           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\n           at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType)\n           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n           at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n           at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\n           at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)\n           --- End of inner exception stack trace ---\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)\n           at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)\n           at System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(XmlDictionaryWriter writer, MessageVersion version, Object[] parameters, Object returnValue, Boolean isRequest)\n           at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)\n           at System.ServiceModel.Channels.BodyWriterMessage.OnBodyToString(XmlDictionaryWriter writer)\n           at System.ServiceModel.Channels.Message.ToString(XmlDictionaryWriter writer)\n           at System.ServiceModel.Diagnostics.MessageLogTraceRecord.WriteTo(XmlWriter writer)\n           at System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)\n           at System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message&amp;amp; message, XmlReader reader, MessageLoggingSource source)\n           at System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message&amp;amp; message, XmlReader reader, MessageLoggingSource source)&lt;/Data&gt;\n            &lt;Data&gt;WebDev.WebServer40&lt;/Data&gt;\n            &lt;Data&gt;11620&lt;/Data&gt;\n          &lt;/EventData&gt;\n        &lt;/Event&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","wcf","properties","wcf-client"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1028,"score":2,"question_id":5433833,"title":"WCF, generated DataMember List<> proxy class property is null?","body":"<p>I'm working with a simple object in WCF decorated with the <code>DataContract</code> and <code>DataMember</code> attributes. I have a <code>List&lt;T&gt;</code> property and purposely designed it to instantiate the backing field on first access (if null). An abbreviated version of the class is below. </p>\n\n<pre><code>[DataContract]\npublic class FieldSetData \n{\n    private List&lt;FormFieldData&gt; _formFields;\n\n    [DataMember]\n    public List&lt;FormFieldData&gt; FormFields\n    {\n        get\n        {\n            if (this._formFields == null)\n            {\n                this._formFields = new List&lt;FormFieldData&gt;();\n            }\n            return this._formFields;\n        }\n        set\n        {\n            this._formFields = value;\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is, on the generated client/proxy class, I can't access the property without instantiating it manually the first time because it's null (which is what the <code>if</code> logic above was supposed to handle).</p>\n\n<p>The second line of code below returns null:</p>\n\n<pre><code>//proxy class version\nFieldSetData data = new FieldSetData();\ndata.FormFields.Add(new FormFieldData());  //FormFields property is null\n</code></pre>\n\n<p>I have to do this instead:</p>\n\n<pre><code>//instantiate the List&lt;T&gt; property\nFieldSetData data = new FieldSetData { FormFields = new List&lt;FormFieldData&gt;() };\ndata.FormFields.Add(new FormFieldData());\n</code></pre>\n\n<p>I'm fairly new to WCF so perhaps I'm missing something here? I figured the proxy class generation would honor the <code>if</code> logic in the <code>DataMember</code> property? </p>\n\n<p>I'm just using the built in VS 2010 WCF tools to generate the proxy classes, etc. and haven't gotten into custom serialization.</p>\n\n<p>Any insight would be appreciated! </p>\n"},{"tags":[".net","wcf","rest","windows-8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":204,"score":0,"question_id":12207038,"title":"HttpClient.PostAsync to WCF service from Win8 app gives Error 400 Bad Request","body":"<p>I have a Windows 8 app attempting to access a RESTful WCF service.  </p>\n\n<p>I also tried accessing the service with a console app with the same error.</p>\n\n<p>I have a basic object i'm trying to send across to the service from my Win8 client, but i'm getting an HTTP 400 error.</p>\n\n<p><strong>Service code</strong></p>\n\n<pre><code>[DataContract(Namespace=\"\")]\npublic class PushClientData\n{\n    [DataMember(Order=0)]\n    public string ClientId { get; set; }\n\n    [DataMember(Order=1)]\n    public string ChannelUri { get; set; }\n}\n\n[ServiceContract]\npublic interface IRecruitService\n{\n    [OperationContract]\n    [WebInvoke(UriTemplate = \"client\")]\n    void RegisterApp(PushClientData app);\n}\n\npublic class RecruitService : IRecruitService\n{\n    public void RegisterApp(PushClientData app)\n    {\n        throw new NotImplementedException();\n    }\n}\n</code></pre>\n\n<p><strong>Client code</strong></p>\n\n<pre><code>protected async override void OnNavigatedTo(NavigationEventArgs e)\n    {\n        var data = new PushClientData\n                       {\n                           ClientId = \"client1\",\n                           ChannelUri = \"channel uri goes here\"\n                       };\n        await PostToServiceAsync&lt;PushClientData&gt;(data, \"client\");\n    }\n\n    private async Task PostToServiceAsync&lt;T&gt;(PushClientData data, string uri)\n    {\n        var client = new HttpClient { BaseAddress = new Uri(\"http://localhost:17641/RecruitService.svc/\") };\n\n        StringContent content;\n        using(var ms = new MemoryStream())\n        {\n            var ser = new DataContractSerializer(typeof (T));\n            ser.WriteObject(ms, data);\n            ms.Position = 0;\n            content = new StringContent(new StreamReader(ms).ReadToEnd());\n        }\n\n        content.Headers.ContentType = new MediaTypeHeaderValue(\"text/xml\");\n        var response = await client.PostAsync(uri, content);\n\n        response.EnsureSuccessStatusCode();\n    }\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>I've looked at the request in fiddler and it's going out to          </p>\n\n<pre><code>http://localhost:17641/RecruitService.svc/client\n</code></pre>\n\n<p>like i think it should, but the return is error 400 (Bad request) each time.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Raw request from Fiddler is below.  I added the . after localhost so Fiddler would pick it up.  I get the same error if I take it our or leave it it.</p>\n\n<pre><code>POST http://localhost.:17641/RecruitService.svc/clients HTTP/1.1\nContent-Type: text/xml\nHost: localhost.:17641\nContent-Length: 159\nExpect: 100-continue\nConnection: Keep-Alive\n\n&lt;PushClientData xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;ClientId&gt;client1&lt;/ClientId&gt;\n    &lt;ChannelUri&gt;channel uri goes here&lt;/ChannelUri&gt;\n&lt;/PushClientData&gt;\n</code></pre>\n"},{"tags":["jquery","ajax","json","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12934553,"title":"Unable to get data from ajax funtion and wcf rest service on firefox and crome but works fine with IE","body":"<p>I am calling ajax funtion which return some data in json format from wcf rest service. I am getting data when I user IE browser but it's failed to get data when I use Mozillan and crome browser.</p>\n\n<p>Follwing is the code I am using.</p>\n\n<pre><code>    &lt;script src=\"js/JSon.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"js/jquery-1.6.2.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"js/jquery.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n function fillcategory() {\n                var GetCategoryURl = \"http://localhost:4444/Service1.svc/GetCategory\"\n                var drp = \"\";\n                   $.ajax({\n                        cache: false,\n                        type: \"GET\",\n                        async: false,  \n                        url: GetCategoryURl,\n                        dataType: \"json\",   \n                        success: function (objCategory) {\n                            Category = objCategory;                               \n                        }\n                    ,\n                        error: function (xhr) {\n\n                        }\n                    });\n\n                 fillSubcategory();\n            }\n</code></pre>\n\n<p>Rquest Header is:</p>\n\n<pre><code>    OPTIONS /Service1.svc/GetCategory?_=1350649411289 HTTP/1.1\nHost: localhost:4444\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.28) Gecko/20120306 Firefox/3.6.28\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,application/json\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\nKeep-Alive: 115\nConnection: keep-alive\nOrigin: http://localhost:14853\nAccess-Control-Request-Method: GET\nAccess-Control-Request-Headers: x-requested-with\n</code></pre>\n\n<p>Response Header is:</p>\n\n<pre><code>    HTTP/1.1 405 Method Not Allowed\nAllow: GET\nContent-Length: 1565\nContent-Type: text/html; charset=UTF-8\nServer: Microsoft-IIS/7.5\nX-Powered-By: ASP.NET\nDate: Fri, 19 Oct 2012 12:23:56 GMT\n</code></pre>\n\n<p>Thanks,</p>\n\n<p>Pramod</p>\n"},{"tags":["wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3037,"score":3,"question_id":10122957,"title":"IIS7 - (413) Request Entity Too Large | uploadReadAheadSize","body":"<p>I've written a WCF service with .NET 4.0, which is hosted on my Windows 7 <code>x64</code> Ultimate system with IIS 7.5.\nOne of the service methods has an 'object' as argument and I'm trying to send a byte[] which contains a picture.\nAs long as the file size of this picture is less then approx. 48KB, all goes well. But if I'm trying to upload a larger picture, the WCF service returns an error: <code>(413) Request Entity Too Large.</code>\nSo ofcourse I've spent 3 hours Googling the error message and every topic I've seen about this subject suggests raising the 'uploadReadAheadSize' property.\nSo what I've done is using the following commands (10485760 = 1MB):</p>\n\n<p><code>\"appcmd.exe set config -section:system.webserver/serverruntime/uploadreadaheadsize: 10485760 /commit:apphost\"</code></p>\n\n<p><code>\"cscript adsutil.vbs set w3svc/&lt;APP_ID&gt;/uploadreadaheadsize 10485760\"</code></p>\n\n<p>I've also used IIS Manager to set the value by opening the site and going to \"Configuration Editor\" under Management.\nUnfortunately I'm still getting the Request Entity Too Large error and it's getting really frustrating!</p>\n\n<p>So does anybody know what else I can try to fix this error?</p>\n"},{"tags":["android","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12971087,"title":"Android: Error in sending List<string> to WCF web service","body":"<p>I'm trying to send <code>List&lt;string&gt;</code> from Android to a WCF web service (built using C#). I'm getting the error message below: </p>\n\n<p>This is the WCF web service Error Message:  </p>\n\n<blockquote>\n  <p>Operation 'insertRecord' in contract 'IService1' has a query variable named 'list' of type 'System.Collections.Generic.List`1[System.String]', but type 'System.Collections.Generic.List`1[System.String]' is not convertible by 'QueryStringConverter'.  Variables for UriTemplate query values must have types that can be converted by 'QueryStringConverter'. </p>\n</blockquote>\n\n<p>This is Android code for <code>List&lt;string&gt;</code>:</p>\n\n<pre><code>final List&lt;String&gt; list=new ArrayList&lt;String&gt;();\n\nlist.add(\"Item 1\");\nlist.add(\"Item 2\");\nlist.add(\"Item 3\");\nlist.add(\"Item 4\");\nlist.add(\"Item 5\");\n\nHttpGet httpGet=new HttpGet(\"http://10.0.2.2:3113/Service1.svc/insertRecord?list=\"+list);\n</code></pre>\n\n<p>This is the WCF web service code:</p>\n\n<pre><code>public string insertRecord(List&lt;string&gt; list)\n{\n    DataAccess dataAccess = new DataAccess();\n    return dataAccess.insertRecord(list);\n}\n\n[OperationContract]\n[WebInvoke(Method = \"GET\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, UriTemplate = \"insertRecord?list={list}\")]\nstring insertRecord(List&lt;string&gt; list);\n</code></pre>\n\n<p>Can anyone please guide me in this?</p>\n"},{"tags":["c#","wcf","nhibernate","castle-windsor","integration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12942044,"title":"NH 3.3.1 + Castle.Windsor 3.0 + WCF is there a way to work them together?","body":"<h2>In my current project I use NH 3.0 + CW 2.5.2 + NHIntegrationFacility 1.1 + WCF, and now i need to migrate to the latest NH 3.3.1. But I see that NHIntegrationFacility doesn't supported since 2.0RC(that support NH3.1) version.</h2>\n\n<p>UPDATE: Thanks for reply guys. Is threre some alternative DI framework that can work with NH, WCF, have simple AOP and DI abilities and have active development?</p>\n"},{"tags":["c#","asp.net-mvc","wcf","castle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":8399376,"title":"WCF Castle Client Proxy leaving Channel Open","body":"<p>I am using Castle WCF Facility to initialise a client proxy using the following configuration: </p>\n\n<pre><code>  &lt;component\n id=\"ComponentID\"\n type=\"SomeType, SomeType\"\n wcfEndpointConfiguration=\"WCFConfig\"\n lifestyle=\"PerWebRequest\" &gt;\n&lt;/component&gt;\n</code></pre>\n\n<p>The problem I'm having is that in live I'm ending up with a large memory leak. Having analysed this with a memory profiler, I seem to have a large number of WCF Channels left in memory. Am I right to expect Castle WCF Facility to clean this up at the end of the web request?</p>\n"},{"tags":["wcf","wif","saml"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12972008,"title":"The message could not be processed because the action 'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT' is invalid or unrecognized.","body":"<p>Trying to setup STS with WCF Claims Aware. I am getting this message on the client:</p>\n\n<blockquote>\n  <p>Server Error in '/ClientWebsite' Application. The message could not be\n  processed because the action\n  'http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/SCT' is invalid\n  or unrecognized.</p>\n</blockquote>\n\n<p>How do I resolve this?</p>\n"},{"tags":["sql-server","wcf","sql-server-2008","iis6","database-connection"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12970916,"title":"Can't connect to SQL Server from WCF service but I can from Management Studio","body":"<p>I'm trying to connect a .NET Framework 4.0 WCF REST service on an IIS6 to a SQL Server 2008 R2 database with this connection string:</p>\n\n<pre><code>&lt;add name=\"EReportEntities\" \n     connectionString=\"metadata=res://*/EReportModel.csdl|res://*/EReportModel.ssdl|res://*/EReportModel.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Server=localhost;Database=ADM;User Id=sa;Password=XXXXXXXX;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" \n     providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n\n<p>But I can't. I get:</p>\n\n<pre><code>Event Type: Failure Audit\nEvent Source:   MSSQLSERVER\nEvent Category: (4)\nEvent ID:   18456\nDate:       10/19/2012\nTime:       10:47:48 AM\nUser:       N/A\nComputer:   UNILEVER\nDescription:\nLogin failed for user 'sa'. [CLIENT: &lt;local machine&gt;]\n\nFor more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp.\nData:\n0000: 18 48 00 00 0e 00 00 00   .H......\n0008: 09 00 00 00 55 00 4e 00   ....U.N.\n0010: 49 00 4c 00 45 00 56 00   I.L.E.V.\n0018: 45 00 52 00 00 00 07 00   E.R.....\n0020: 00 00 6d 00 61 00 73 00   ..m.a.s.\n0028: 74 00 65 00 72 00 00 00   t.e.r...\n</code></pre>\n\n<p>But, if I use sa user to login on SQL Server Management Studio I can login.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","wcf","microsoft-metro"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12585247,"title":"Authentifcation using GUID + Windows 8","body":"<p>When I add a service reference to my MVC3 application: I obtain methods which take a <code>guid</code> in parameter:</p>\n\n<pre><code>void getcities( string token);\nvoid getCountry( string token);\n</code></pre>\n\n<p>but when I add a service reference to a Windows 8 application, the proxy generated doesn't include a token:</p>\n\n<pre><code>public System.Threading.Tasks.Task&lt;Maquette_MyAirport_Win8.ServiceFlightInfo.CitiesResponse&gt; GetAllCitiesAsync() \n{\n  Maquette_MyAirport_Win8.ServiceFlightInfo.BaseRequest inValue = new Maquette_MyAirport_Win8.ServiceFlightInfo.BaseRequest();\n\n  return ((Maquette_MyAirport_Win8.ServiceFlightInfo.FlightInfoService)(this)).GetAllCitiesAsync(inValue);\n}\n</code></pre>\n\n<p>So when I call this method without a <code>guid</code>, it throws an error: you are not authorized to access this service.</p>\n\n<p>Do you have any solution, please?</p>\n"},{"tags":["c#","wcf","wcf-binding","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12967288,"title":"Programmatically access multiple endpoints in a WCF service","body":"<p>I am getting an error while accessing the second endpoint in a self hosted WCF service. Below is my code:</p>\n\n<pre><code>Uri HttpUri = new Uri(\"http://localhost:8092/MyService/HttpService\");\nServiceHost host = new ServiceHost(typeof(PollService),HttpUri);\nhost.AddServiceEndpoint(typeof(ISub), myBinding, \"\"); //My binding is my custom binding and this end point is working fine.\n\nhost.AddServiceEndpoint(typeof(IFocus), \n    new BasicHttpBinding(),\n    new uri(\"http://localhost:8092/MyService/Focusservice\"));\n\nServiceMetadataBehavior smb = new ServiceMetadataBehavior();\nsmb.HttpGetEnabled = true;\nhost.Description.Behaviors.Add(smb);\nhost.Open();\n</code></pre>\n\n<p>From the code I can access my custom binding url:</p>\n\n<pre><code>http://localhost:8092/MyService/HttpService`\n</code></pre>\n\n<p>But I'm not able to access:</p>\n\n<pre><code> http://localhost:8092/MyService/Focusservice\n</code></pre>\n\n<p>When accessing it in the WCF test client it throws error as follows: </p>\n\n<blockquote>\n  <p>Error: Cannot obtain Metadata from <code>http://localhost:8092/MyService/basicbinding</code><br>\n  If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address. For help enabling metadata publishing, please refer to the MSDN documentation at <a href=\"http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata\" rel=\"nofollow\">link</a></p>\n  \n  <p>Exchange Error. URI: <code>http://localhost:8092/MyService/basicbinding</code> Metadata contains a reference that cannot be resolved: <code>http://localhost:8092/MyService/basicbinding</code>.  </p>\n  \n  <p>Content Type application/soap+xml; charset=utf-8 was not supported by service <code>http://localhost:8092/MyService/basicbinding</code>.  </p>\n  \n  <p>The client and service bindings may be mismatched. The remote server returned an error: (415) Cannot process the message because the content type 'application/soap+xml; charset=utf-8' was not the expected type 'text/xml; charset=utf-8'. </p>\n  \n  <p>HTTP GET Error. URI: <code>http://localhost:8092/MyService/basicbinding</code> There was an error downloading <code>'http://localhost:8092/MyService/basicbinding'</code>. The request failed with HTTP status 400: Bad Request.</p>\n</blockquote>\n"},{"tags":["c#",".net","wcf","portable-class-library"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12969373,"title":"How can I retrieve the instanceId of a durable wcf service in a portable class library?","body":"<p>I try to get the instanceId from a durable WCF service using a helper class in a portable .net assembly. \nTo retrieve the id, I need to call:</p>\n\n<pre><code>IClientChannel.GetProperty&lt;IContextManager&gt;()...\n</code></pre>\n\n<p>But <strong>IContextManager is not included</strong> in the <strong>portable class library</strong>: \nHow can I retrieve the instanceId in a portable class library?</p>\n"},{"tags":["c#","asp.net","wcf","web-services","asmx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12969241,"title":"Different types of web service options","body":"<p>What are my options when it comes to web services?. I've bee working so far with .asmx and windows communication foundation or wcf. Any other approaches out there worth considering? Thanks.</p>\n"},{"tags":["java","android","wcf"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":11346926,"title":"wcf service runs fine in java project, but fails in android project","body":"<p>I have build a wcf web service. When I consume this service in a java project build using eclipse it runs fine but when i try to consume it in android project it gives an exception.</p>\n\n<p>Here is how I am consuming it in java project.</p>\n\n<p>Step 1: Create directory org and com using wsimport and include it in src folder of java project.</p>\n\n<p>Step 2: Add the external jars present in sub-folder \"lib\" of folder \"metro\"(This folder is actually referring to the folder where I have installed the metro framework). For this goto project->properties->Java Build Path->Libraries->Add external jars and then browse and select these jar files.  </p>\n\n<p>Step 3: Create a new class to communicate with the web service. Here is the class that I am using.</p>\n\n<pre><code>import java.net.URL;\nimport javax.xml.namespace.QName;\nimport javax.xml.ws.BindingProvider;\nimport org.tempuri.IService1;\nimport org.tempuri.Service1;\n\n\npublic class JavaClient {\n    public static void main(String[] strArgs)\n    {\n\n    try\n    {\n        Service1 service1 = new Service1(new URL(\"http://192.168.1.18/WcfService/Service1.svc?wsdl\"), new QName(\"http://tempuri.org/\", \"Service1\"));\n        IService1 port = service1.getBasicHttpBindingIService1();\n        ((BindingProvider)port).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, \"http://192.168.1.18/WcfService/Service1.svc\");\n        int input = 100;\n        String strOutput = port.getData(input);\n        System.out.println(strOutput);\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n\n    }\n}\n</code></pre>\n\n<p>Now when I run this java project it ran successfully. </p>\n\n<p>Now I want to do the same for an android project. So in the same manner as above I create an android project which is using android platform 2.2 as the build target and then I follow step 1 and step 2 as described above. Thereafter I create a class having the following code.</p>\n\n<pre><code>package android.client;\n\nimport java.net.URL;\nimport javax.xml.namespace.QName;\nimport javax.xml.ws.BindingProvider;\nimport org.tempuri.IService1;\nimport org.tempuri.Service1;\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.widget.Toast;\n\npublic class AndroidClientJavaServerActivity extends Activity {\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        try\n        {\n\n            Service1 service1 = new Service1(new URL(\"http://192.168.1.18/WcfService/Service1.svc?wsdl\"), new QName(\"http://tempuri.org/\", \"Service1\"));\n            IService1 port = service1.getBasicHttpBindingIService1();\n            ((BindingProvider)port).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, \"http://192.168.1.18/WcfService/Service1.svc\");\n            int input = 100;\n            String strOutput = port.getData(input);\n            Toast msg = Toast.makeText(getBaseContext(),\n                    strOutput, Toast.LENGTH_LONG);\n            msg.show();\n       }\n        catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>After it when I run this android project the application fails in executing successfully.\nHere is the detailed output of running this android application.</p>\n\n<pre><code>07-05 19:50:24.864: W/dalvikvm(279): Unable to resolve superclass of Lorg/tempuri/Service1; (68)\n07-05 19:50:24.864: W/dalvikvm(279): Link of class 'Lorg/tempuri/Service1;' failed\n07-05 19:50:24.864: E/dalvikvm(279): Could not find class 'org.tempuri.Service1', referenced from method android.client.AndroidClientJavaServerActivity.onCreate\n07-05 19:50:24.864: W/dalvikvm(279): VFY: unable to resolve new-instance 85 (Lorg/tempuri/Service1;) in Landroid/client/AndroidClientJavaServerActivity;\n07-05 19:50:24.864: D/dalvikvm(279): VFY: replacing opcode 0x22 at 0x0008\n07-05 19:50:24.864: D/dalvikvm(279): VFY: dead code 0x000a-0045 in Landroid/client/AndroidClientJavaServerActivity;.onCreate (Landroid/os/Bundle;)V\n07-05 19:50:25.044: D/AndroidRuntime(279): Shutting down VM\n07-05 19:50:25.081: W/dalvikvm(279): threadid=1: thread exiting with uncaught exception (group=0x4001d800)\n07-05 19:50:25.124: E/AndroidRuntime(279): FATAL EXCEPTION: main\n07-05 19:50:25.124: E/AndroidRuntime(279): java.lang.NoClassDefFoundError: org.tempuri.Service1\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.client.AndroidClientJavaServerActivity.onCreate(AndroidClientJavaServerActivity.java:21)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.os.Handler.dispatchMessage(Handler.java:99)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.os.Looper.loop(Looper.java:123)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at android.app.ActivityThread.main(ActivityThread.java:4627)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at java.lang.reflect.Method.invokeNative(Native Method)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at java.lang.reflect.Method.invoke(Method.java:521)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)\n07-05 19:50:25.124: E/AndroidRuntime(279):  at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n"},{"tags":["wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12950286,"title":"public service metadata","body":"<p>I have a simple wcf service hosted on iis. \nIf the iis alias is simple like: services everything is ok.\nBut I want an alias like MyProject/services. \nI can create this alias on the iis, but from my service I get \nMetadata publishing for this service is currently disabled.</p>\n\n<p>and I don't know, why?</p>\n\n<p>My config:</p>\n\n<pre><code>&lt;services&gt;\n      &lt;service name=\"HrGeneratorsService.Service1\" &gt;\n                &lt;endpoint address=\"\" \n                  binding=\"wsHttpBinding\"\n                  contract=\"HrGeneratorsService.IService1\"  /&gt;\n        &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n&lt;behavior &gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" httpHelpPageEnabled=\"True\"/&gt;\n        &lt;/behavior&gt;\n</code></pre>\n"},{"tags":["c#","asp.net",".net","wcf","msmq"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":2,"view_count":239,"score":2,"question_id":12836060,"title":"Articles on how to organize background queue operations","body":"<p>Now I'm thinking about how to organize architecture of system. The system will consists of web site, where user can upload some documents and then get it processed back and a some background daemon with an queue of tasks that should process provided documents.</p>\n\n<p>My question is:\nShould I implement the daemon I told you above, as a WCF service with only named pipes (no netowork access to this service needed)?</p>\n\n<p>Any suggestions/tips/advices on that?</p>\n\n<p>The data user can provide is just a bunch of XML files. ASP.NET web site will expose functionality to get this XML files and then somehow should be able to pass them to daemon.</p>\n\n<p>Could you point me please on some articles on that topic.\nThanks in advance!</p>\n\n<hr>\n\n<h2>POST EDIT</h2>\n\n<p>After some hours discovering MSMQ suggested here by guys, my thought on that technology is about that is more for distributed architecture (processing nodes are located on separate machines and there is exchanging messages between differents computers through network). </p>\n\n<p>At the moment separating to independent machines is not needed. There will be just on machine on which being an ASP.NET website and some processing program.</p>\n\n<p>Is that using of MSMQ so necessary?</p>\n\n<hr>\n\n<h2>POST EDIT #2</h2>\n\n<p>As I using .NET Framework here, please suggest only offers what are compatible for .NET. There is really no any options here.</p>\n"},{"tags":["c#","wcf",".net-4.0","scalability","wcf-client"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12966642,"title":"WCF Client scalability advice","body":"<p>I've got a multithreaded application that calls the same service 200,000+ times per day.  Currently it instantiates a new ClientBase auto-generated proxy for each call.</p>\n\n<p>What can I do to boost performance?  Instantiate one client and share it?  Should I investigate an async client, and if so, can that be shared?</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":12966043,"title":"Producing XML hash in a WCF Web Service client","body":"<p>I have been tasked with creating a C# .net WCF web service client that will consume a web service for a transaction gateway. Part of the requirements is that I  must create a HMAC hash of a number of values and inject these values into the HTTP header. I believe I have most of it figured out but the one portion of the data that has me puzzled is that one of the values needed for the HMAC hash is a SHA-1 hash of the actual contents of the transaction. Since I am building this using SOAP using a service reference this data is XML. My question is how to hash the XML that makes up this transaction? </p>\n\n<p>Can anyone provide guidance on how to accomplish this?</p>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":12964759,"title":"WCF will not return an int","body":"<p>I am building a WCF in C#, and a client to consume it at the same time. For some reason I am having trouble getting a method to return an int. Here is my contract:</p>\n\n<pre><code>[ServiceContract]\npublic interface IMData\n{\n  [OperationContract]\n  int ReturnAnInt();\n\n  [OperationContract]\n  String HelloWorld();\n}\n</code></pre>\n\n<p>Here is where I have implemented it:</p>\n\n<pre><code>public class MData : IMData\n{\n  public String HelloWorld()\n  {\n    return \"Hello World\";\n  }\n\n  public int ReturnAnInt()\n  {\n    return 5;\n  }\n}\n</code></pre>\n\n<p>I'm using Visual Studio, and for the client, I imported this WCF as a Web Reference. Now for some reason when I declare an instance of MData and try to call HelloWorld, there is no problem, but I get a compile error when calling ReturnAnInt.</p>\n\n<pre><code>MData m = new MData();\nString helloWorld = m.HelloWorld();\nint result = m.ReturnAnInt();\n</code></pre>\n\n<p>The error I get with ReturnAnInt is:\n\"No overload for method 'ReturnAnInt' takes 0 arguments\"\nSo then I mouse over to see what Visual Studio is expecting, and it says that the method should look like:</p>\n\n<pre><code>void MData.ReturnAnInt(out int ReturnAnIntResult, out bool ReturnAnIntResultSpecified)\n</code></pre>\n\n<p>I have been banging my head against a wall over this for hours now and can find nothing on Google, and it has my coworkers baffled as well. Why did it add two out parameters that aren't in the definition, and change the return type? Any help would be greatly appreciated. I apologize if I left out any information that would be helpful.</p>\n"},{"tags":["wcf","wcf-client","wcf-rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12965521,"title":"Partial WCF REST client de-serialization failure without exception","body":"<p>We are using WCF REST on client and server side (ie, webBinding) on .NET 4.0.</p>\n\n<p>The WCF REST client appears is failing to deserialize <em>some</em> elements of the returned graph. In the example below, all bar the simple DateTime[] arrays deserialize correctly (eg GetRouteTimetablesResult/RouteTimetables/Timetable/Trips/Trip/ArrivalTimes)</p>\n\n<p>The data contracts/poco's for the client and server have been copy/pasted from one project to another for testing to ensure they are identical, yet the issue still occurs.</p>\n\n<p>All objects are annotated with [DataContract(Namespace = \"\")]. </p>\n\n<p>The REST service interface is declared:</p>\n\n<pre><code>   [ServiceContract(Namespace = \"\")]\n   [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]\n   public interface ISomeService{ .... }\n</code></pre>\n\n<p>The REST client interface, which consumes from the test service, is declared:</p>\n\n<pre><code>   [ServiceContract(Namespace = \"\")]\n   [XmlSerializerFormat]\n   public interface ISomeService{ ... }\n</code></pre>\n\n<p>Below is a capture from Fiddler showing the service's REST WebGet response:</p>\n\n<pre><code>&lt;GetRouteTimetablesResult xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;RouteTimetables&gt;\n    &lt;Timetable&gt;\n      &lt;Date&gt;2012-10-18T00:00:00&lt;/Date&gt;\n      &lt;Route&gt;\n        &lt;Code&gt;P236&lt;/Code&gt;\n        &lt;Direction&gt;Inbound&lt;/Direction&gt;\n        &lt;InternalIdentifier&gt; P236&lt;/InternalIdentifier&gt;\n        .. other elements in alphabetical order ..\n      &lt;/Route&gt;\n      &lt;Trips&gt;\n        &lt;Trip&gt;\n          &lt;ArrivalTimes xmlns:a=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\"&gt;\n            &lt;a:dateTime&gt;2012-10-18T07:03:00&lt;/a:dateTime&gt;\n            &lt;a:dateTime&gt;2012-10-18T07:15:00&lt;/a:dateTime&gt;\n          &lt;/ArrivalTimes&gt;\n          &lt;ContainsStartEndStopsOnly&gt;false&lt;/ContainsStartEndStopsOnly&gt;\n          &lt;DepartureTimes xmlns:a=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\"&gt;\n            &lt;a:dateTime&gt;2012-10-18T07:04:00&lt;/a:dateTime&gt;\n            &lt;a:dateTime&gt;2012-10-18T07:17:00&lt;/a:dateTime&gt;\n          &lt;/DepartureTimes&gt;\n          .. additional elements in alphabetical order ..\n        &lt;/Trip&gt;\n        .. additional &lt;Trip&gt; instances ..\n      &lt;/Trips&gt;\n</code></pre>\n\n<p>As stated above, after WCF deserializes this response on the client, all ArrivalTimes[] and DepartureTimes[] arrays are empty (not null). No errors are generated.</p>\n\n<p>The class definition for Trip, minus a few properties, is:</p>\n\n<pre><code>    [DataContract(Namespace = \"\")]\n    public class Trip : IExtensibleDataObject\n    {\n        private ExtensionDataObject _extensionData;\n\n        [DataMember(IsRequired = true)]\n        public int TripIndex { get; set; }\n\n        [DataMember(IsRequired = true)]\n        public DateTime TripKeyDate { get; set; }\n\n        [DataMember(IsRequired = true)]\n        public bool ContainsStartEndStopsOnly { get; set; }\n\n        [DataMember(IsRequired = true)]\n        public DateTime[] ArrivalTimes { get; set; }\n\n        [DataMember(IsRequired = true)]\n        public DateTime[] DepartureTimes { get; set; }\n\n        /// &lt;summary&gt;\n        /// Forward-Compatible data contract support\n        /// &lt;/summary&gt;\n        public virtual ExtensionDataObject ExtensionData\n        {\n            get { return _extensionData; }\n            set { _extensionData = value; }\n        }\n\n    }\n</code></pre>\n\n<p>Could anybody advise why these array's are failing to deserialize? </p>\n\n<p><strong>Edit 1 - Additional information and hackety workaround</strong></p>\n\n<p>After hacking the XML returned from the service via a MessageInspector to strip the datetime namespace, deserialization works:</p>\n\n<p>Original:</p>\n\n<pre><code>&lt;ArrivalTimes xmlns:a=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\"&gt;\n     &lt;a:dateTime&gt;2012-10-18T07:03:00&lt;/a:dateTime&gt;\n     &lt;a:dateTime&gt;2012-10-18T07:15:00&lt;/a:dateTime&gt;\n&lt;/ArrivalTimes&gt;\n</code></pre>\n\n<p>Hacked:</p>\n\n<pre><code>&lt;ArrivalTimes xmlns:a=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\"&gt;\n        &lt;dateTime&gt;2012-10-18T07:03:00&lt;/dateTime&gt;\n        &lt;dateTime&gt;2012-10-18T07:15:00&lt;/dateTime&gt;\n&lt;/ArrivalTimes&gt;\n</code></pre>\n\n<p><em><strong>To me, this is not a solution</em></strong></p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":20053,"score":9,"question_id":1087428,"title":"Tutorial on Consuming a WCF service in ASP.Net web site?","body":"<p>I'm attempting to create my first WCF service.  </p>\n\n<p>I've created the service and now I'm trying to call it from a asp.net (vb) web site and I've tried adding a web reference to it and using the scvutil.exe to consume the service.  </p>\n\n<p>So far neither have worked.  It's not letting me declare the service in my code.  If someone could point me to a good tutorial on how to consume a WCF service in an ASP.Net web site that would be great.  </p>\n\n<p>I've found numerous on how to use them with AJAX or silverlight or windows apps but nothing on using it in just a plain old website.</p>\n"},{"tags":["wcf","web-services","cxf","webservice-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12964657,"title":"Apache CXF Client for WCF Soap WS","body":"<p>I'm creating a java client with CXF 2.7.0 to an WCF web service that uses SOAP.<br>\nI've used the wsdl2java tool to generate the classes needed to communicate with web service.</p>\n\n<p>My problem is that in the web service on the endpoint binding the reliableSession is enabled and because of this when i try to send a message to the web service with cxf I get </p>\n\n<pre><code>Oct 19, 2012 1:11:59 AM org.apache.cxf.ws.rm.Proxy invoke\nINFO: Sending out-of-band RM protocol message {http://schemas.xmlsoap.org/ws/2005/02/rm}CreateSequence.\nOct 19, 2012 1:11:59 AM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging\nWARNING: Interceptor for {http://schemas.xmlsoap.org/ws/2005/02/rm}SequenceAbstractService#{http://schemas.xmlsoap.org/ws/2005/02/rm}CreateSequence has thrown exception, unwinding now\norg.apache.cxf.interceptor.Fault: Could not send Message.\n    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:64)\n    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)\n    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:376)\n    at org.apache.cxf.ws.rm.Proxy.invoke(Proxy.java:287)\n    at org.apache.cxf.ws.rm.Proxy.createSequence(Proxy.java:183)\n    at org.apache.cxf.ws.rm.RMManager.getSequence(RMManager.java:448)\n    at org.apache.cxf.ws.rm.RMOutInterceptor.handle(RMOutInterceptor.java:152)\n    at org.apache.cxf.ws.rm.AbstractRMInterceptor.handleMessage(AbstractRMInterceptor.java:83)\n    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)\n    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)\n    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)\n    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)\n        at .........\n</code></pre>\n\n<p>Does anyone know how to enable the reliableSession in CXF? </p>\n"},{"tags":["wcf","web-services","soap","weblogic","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":108,"score":6,"question_id":12782869,"title":"How to sign X509 token using WCF","body":"<p>I am working on a WCF client which must talk to an Oracle WebLogic service. The service enforces mutual certificate authentication.</p>\n\n<p>We are not, however, able to satisfy the policy and the server logs an error stating:</p>\n\n<blockquote>\n  <p>\"WSM-00081: The X.509 certificate is not signed.\"</p>\n</blockquote>\n\n<p>I have been wondering what the exact meaning of this is. The Oracle documentation states:</p>\n\n<blockquote>\n  <p>WSM-00081: The X.509 certificate is not signed.</p>\n  \n  <p>Cause: The X509 token used was not signed according to requirements of certificate authentication scenario.</p>\n  \n  <p>Action: Sign the X509 token (depending upon the reference mechanism used) for certificate authentication.</p>\n  \n  <p>Level: 1</p>\n  \n  <p>Type: ERROR</p>\n  \n  <p>Impact: Security</p>\n</blockquote>\n\n<p>(<a href=\"http://docs.oracle.com/cd/E25054_01/core.1111/e10113/chapter_wsm_messages.htm\">http://docs.oracle.com/cd/E25054_01/core.1111/e10113/chapter_wsm_messages.htm</a>)</p>\n\n<p>After some research, we found out that we can disable the check in the service policy configuration file by setting <code>is-signed=\"false</code>:</p>\n\n<pre><code>&lt;orasp:x509-token orasp:enc-key-ref-mech=\"direct\" orasp:is-encrypted=\"false\"\n              orasp:is-signed=\"false\"\n              orasp:rcpt-enc-key-ref-mech=\"direct\"\n              orasp:rcpt-sign-key-ref-mech=\"direct\"\n              orasp:sign-key-ref-mech=\"direct\"/&gt;\n</code></pre>\n\n<p>My two theories:</p>\n\n<ul>\n<li>The certificate needs to be signed by a CA\n<ul>\n<li>We checked using an a certificate signed by a CA, but this made no difference</li>\n<li>However, we might have made som errors when configurating this. Should we try it over?</li>\n</ul></li>\n<li>We somehow need to sign the included BinarySecurityToken's, which are included in the request.\n<ul>\n<li>However, I have no idea how I can do this</li>\n</ul></li>\n</ul>\n\n<p>Have I completely misunderstood the subject or can any of you give some pointers to what the problem might be and how it can be solved?</p>\n"},{"tags":["wcf","mef"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":276,"score":1,"question_id":7486869,"title":"Where to Initialize MEF DirectoryCatalog in WCF App?","body":"<p>So, in a WCF application, is there a magic Application_Start or something like that where I can compose the MEF container from an assembly directory?</p>\n\n<p>Thanks!</p>\n"},{"tags":["wcf","silverlight","webhttpbinding","clientaccesspolicy.xml"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":12960060,"title":"How to make WebHttpBehavior for ClientAccessPolicy.xml stop stealing/hijacking IIS's root?","body":"<p>I am using a Silverlight application that has net.tcp WCF communications. I would like to self host the ClientAccessPolicy.xml within the ServiceHost and the policy file must be on the root, port 80, as per Silverlight net.tcp requirements (TCP port 4502-4534, etc.). My problem is that when my ServiceHost is running it steals port 80 root from IIS and none of my web pages work.</p>\n\n<p>The code to create the policy endpoint looks like:</p>\n\n<pre><code>host.AddServiceEndpoint(typeof(IPolicyGetter), new WebHttpBinding(), \"http://localhost/\").Behaviors.Add(new WebHttpBehavior());\n</code></pre>\n\n<p>When the ServiceHost is running then I can see my <code>http://127.0.0.1/ClientAccessPolicy.xml</code>, but all web sites on port 80 stop working - I see the standard WCF \"Endpoint not found\" web page generated by the Endpoint. When I turn off the ServiceHost then I can see my web site but the ClientAccessPolicy.xml is gone.</p>\n\n<p>I have tried using a complete path for the endpoint URI:</p>\n\n<pre><code>policyUri.Scheme = \"http\";\npolicyUri.Port = 80;\npolicyUri.Query = \"ClientAccessPolicy.xml\";\nhost.AddServiceEndpoint(typeof(IPolicyGetter), new WebHttpBinding(), policyUri.ToString()).Behaviors.Add(new WebHttpBehavior());\n</code></pre>\n\n<p>but this throws an argument exception. Moving the policy to a subdirectory or a different port will not work because Silverlight only looks at port 80 on the root web directory.</p>\n\n<p>Obviously I can just copy the ClientAccessPolicy.xml into the web root directory and disable the policy endpoint. Is there a way to button-down the endpoint so that it only hijacks calls to ClientAccessPolicy.xml but does not steal the entire IIS port 80?</p>\n"},{"tags":["wcf","endpoints","wcf-endpoint","wcf-routing"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":282,"score":3,"question_id":5704401,"title":"WCF routing backuplists - logging when they are used","body":"<p>Is there anyway to add some logging or a behaviour to the WCF routing list so that I can log when the routing has made use of an endpoint on a backup list?</p>\n\n<pre><code>     &lt;filterTables&gt;\n        &lt;filterTable name=\"RoutingTable\"&gt;\n          &lt;add filterName=\"Filter1\" endpointName=\"EP1\" priority=\"0\" backupList=\"FailOver\"/&gt;\n        &lt;/filterTable&gt;\n      &lt;/filterTables&gt;\n      &lt;backupLists&gt;\n        &lt;backupList name=\"FailOver\"&gt;\n          &lt;add endpointName=\"EP2\" /&gt;\n        &lt;/backupList&gt;\n      &lt;/backupLists&gt;\n</code></pre>\n\n<p>Could a behaviour somehow log which endpoint had finally been used by the routing service?</p>\n"},{"tags":["c#",".net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":64,"score":-2,"question_id":12958652,"title":"Not able to Access the url with username and password credentials?","body":"<p>I am facing a problem in my code:-\nI am trying to access a url for sending Acknowledgement. The Acknowledgement is to be send using the url. But when I am trying to access the url I am getting the error:- \n<strong>The request failed with HTTP status 401: Unauthorized.</strong></p>\n\n<p>My webservice is developed in WCF and below is the code for the method which I have developed to send the acknowledgement.</p>\n\n<pre><code>       public void Send_Ack(string ERROR_CODE, string ERRORMESSAGE, string ERRORDETAIL, string resultCode)\n    {\n        ABCD a1 = new ABCD();\n\n        a1.Category = \"INFO\";\n\n        a1.Label = \"Synchronization Error\";\n\n        a1.Status = new AStatus();\n\n        a1.Status.Code = resultCode;\n\n        a1.Dates = new ADates();\n\n        a1.Dates.SentDate = System.DateTime.Now;\n\n        ParameterListType obj1 = new ParameterListType();\n\n        obj1.Section = \"ACTIVITY\";\n\n        obj1.SectionComplement = \"PROPERTIES\";\n\n        obj1.Parameters = new ParameterType[7];\n\n        ParameterType objparam = new ParameterType();\n\n        objparam.Code = \"Rname\";\n\n        objparam.Value = new string[1] { Rname.ToString() };\n\n        ParameterType objparam1 = new ParameterType();\n\n        objparam.Code = \"INAME\";\n\n        objparam.Value = new string[1] { INAME.ToString() };\n\n        ParameterType objparam2 = new ParameterType();\n\n        objparam.Code = \"COREF\";\n\n        objparam.Value = new string[1] { Ref2.ToString() };\n\n        Reference1 = InputDataErp.Inf.ParametersList[0].Parameters[i].Value[0];                \n\n        ParameterType objparam3 = new ParameterType();\n\n        objparam.Code =\"Reference\";\n\n        objparam.Value = new string[1] { Reference1.ToString() };\n\n        ParameterType objparam4 = new ParameterType();\n\n        objparam.Code = \"ERRORCODE\";\n\n        objparam.Value = new string[1] { ERROR_CODE.ToString() };\n\n        ParameterType objparam5 = new ParameterType();\n\n        objparam.Code = \"ERRORMESSAGE\";\n\n        objparam.Value = new string[1] { ERRORMESSAGE.ToString() };\n\n        ParameterType objparam6 = new ParameterType();\n\n        objparam.Code = \"ERRORDETAIL\";\n\n        objparam.Value = new string[1] { ERRORDETAIL.ToString() };\n\n        obj1.Parameters[0] = objparam;\n\n        obj1.Parameters[1] = objparam1;\n\n        obj1.Parameters[2] = objparam2;\n\n        obj1.Parameters[3] = objparam3;\n\n        obj1.Parameters[4] = objparam4;\n\n        obj1.Parameters[5] = objparam5;\n\n        obj1.Parameters[6] = objparam6;\n\n        a1.ParametersList = new ParameterListType[1];\n\n        a1.ParametersList[0] = obj1;\n\n        MyService eobj = new MyService();\n\n        IdentifierType service_ID_IsUsed = new IdentifierType();\n\n        service_ID_IsUsed.UserID = Gref.ToString();\n\n        service_ID_IsUsed.InternalID = Reference1.ToString();\n\n        IdentifierType service_ID_Destination = new IdentifierType();\n\n        service_ID_Destination.UserID = Gref.ToString();\n\n        service_ID_Destination.InternalID = Ref2.ToString();\n\n        eobj.ServiceIDIssued = new IdentifierType();\n\n        eobj.ServiceIDIssued = service_ID_IsUsed;\n\n        eobj.ServiceIDDestination = new IdentifierType();\n\n        eobj.ServiceIDDestination = service_ID_Destination;\n\n        RefDomainAdmin domain_admin_obj = new RefDomainAdmin();\n\n        domain_admin_obj.Domain = \"Rname\";\n\n        domain_admin_obj.Tool = \"f1\";\n\n        domain_admin_obj.OwnerOrganization = \"Q\";\n\n        E1 E1_obj = new E1();\n\n        Eobj.Inf = new ABCD();\n\n        Eobj.Inf = a1;\n\n        Eobj.Service = new MyService();\n\n        Eobj.Service = eobj;\n\n        Eobj.RefDomainAdminSource =\n        new RefDomainAdmin();\n\n        Eobj.RefDomainAdminSource = domain_admin_obj;\n\n        EventReportManagementService ERMS = new EventReportManagementService();\n\n        handleEventReport her = new handleEventReport();\n\n        her.E1 = new E1();\n\n        her.E1 = E1_obj;\n\n        ERMS.handleEventReport(her);\n\n    }\n</code></pre>\n\n<p>The Webconfig of my WCF is like this and here I have defined the url:-</p>\n\n<pre><code>     &lt;applicationSettings&gt;\n     &lt;XYZ.Properties.Settings&gt;\n      &lt;setting name=\"FileadeEAI_FileadeEAItoCollecto_EventReportManagementService\" serializeAs=\"String\"&gt;\n      &lt;value&gt;http://1.1.1.1/A/B/EventReportManagement?username=1234?Password=1234&lt;/value&gt;\n     &lt;/setting&gt;\n     &lt;/XYZ.Properties.Settings&gt;\n     &lt;/applicationSettings&gt;\n</code></pre>\n\n<p>I am really stuck on this. I have searched many things but I dont know whats the solution for this. Is it that I am passing the username and password credentials in a wrong way.</p>\n\n<p>NOTE:- The url <code>http://1.1.1.1/A/B/EventReportManagement</code> is not on my system. I am trying to access it. Also the username and password credentials are given to me and I have been asked to send the url which contains the username and password credentials.</p>\n\n<p>But when I am doing this I am getting the error:- <strong>The request failed with HTTP status 401: Unauthorized.</strong></p>\n\n<p>Can somebody help?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12962454,"title":"WCF and Binary Data","body":"<p>I need to transmit some binary data, specifically image files, as part of my WCF call. What data type should I use for the WCF contract?</p>\n\n<pre><code>[DataContract]\npublic class ZombieTypeSUmmary\n{\n    [DataMember]\n    public string ZombieTypeName { get; set; }\n\n    [DataMember]\n    public int ZombieTypeKey { get; set; }\n\n    [DataMember]\n    public string BriefDescription { get; set; }\n\n    [DataMember]\n    public ??? ThumbnailImage { get; set; }\n}\n</code></pre>\n"},{"tags":[".net","wcf","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":402,"score":3,"question_id":8714333,"title":"wcf service (class) level OperationBehavior","body":"<p>Currently for all the wcf operations I have to put OperationBehavior attribute (for impersonation) on top of each method.</p>\n\n<pre><code>[OperationBehavior(Impersonation = ImpersonationOption.Allowed)]\n</code></pre>\n\n<p>Putting it for every method seems like a waste of time. What I need is eliminating the necessity of applying behavior to all available operations. Is there a way to put this attribute   class level so that it affects all the methods in that service class? </p>\n"},{"tags":["c#","wcf","windowservice"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12961471,"title":"WCF Service vs Window service","body":"<p>Am a newbie to WCF.I have a scenario where i need to create  a application that runs 24x7  picks up mail from a mailbox and create few reports.I did it using winform and it worked.but i got a problem that the server on which the application was hosted has a auto log off policy which closes my application when server is inactive for a certain period of time.I thought i could implement it as a window service.Is WCF service recommended for this Scenario,any advantage of using it.I thought of WCF service since it will be learning curve for me.Please advice.</p>\n\n<p><strong>Update</strong>:\nits application that works based on a timer.It pings a particular mailbox every 5 minutes to see for new mail.If a new mail is found it downloads an excel creates PDF report and mails it back to some email ids.</p>\n\n<p>DLLS used : OpenPOP and Itextsharp.</p>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":12961027,"title":"upload files using WCF","body":"<p>I need a WCF Service to upload large files by user.</p>\n\n<p>Which one of the below gives a more optimized performance</p>\n\n<pre><code>  [OperationContract]\n  public void UploadFile(Stream inputsreaam);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>   [OperationContract]\n   public void UploadFile(byte[] buffer);\n</code></pre>\n\n<p>any other suggestions are welcome</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12955400,"title":"HttpWebRequest.StatusCode 200 \"OK\", but application not getting updated","body":"<p>I'm executing the following code</p>\n\n<pre><code>string requestUrl = \"http://SFPRTH010001:18109/1010-SF-TNTIN/Configurator/rest/importConfiguration?\";\n\nHttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestUrl);\nrequest.Method = \"POST\";\nrequest.ContentType = \"text/html;charset=utf-8\";\n//request.ContentType = \"application/json\";\n\nbyte[] fileToSend = File.ReadAllBytes(\"TestSCDS.properties\");\nrequest.ContentLength = fileToSend.Length;\nMessageBox.Show(fileToSend.Length.ToString());\n\nusing (Stream requestStream = request.GetRequestStream())\n{\n    requestStream.Write(fileToSend, 0, fileToSend.Length);\n    //MessageBox.Show(requestStream.);\n    requestStream.Close();\n}\n\nusing (HttpWebResponse resp = (HttpWebResponse)request.GetResponse())\n{\n    StreamReader reader = new StreamReader(resp.GetResponseStream());\n    MessageBox.Show(reader.ReadToEnd());\n    MessageBox.Show(resp.StatusCode.ToString());                    \n}\n</code></pre>\n\n<p>I'm getting HTTP Status code \"OK\" and Fiddler also displays status 200. After running these services, I'm expecting some keys to be updated, which is not happening. Can anybody please let me know what the issue might be?</p>\n"},{"tags":["c#","wcf","ssl","session-state"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12955748,"title":"How do I implement WCF with Silverlight, supporting both ASP.NET session state and SSL?","body":"<p>We have a Silverlight intranet application using old web services, and I've been tasked with adding support for SSL. To do this I was planning to ditch the old web services and replace them with a new WCF service.</p>\n\n<p>I also needed to get rid of the old web references and build the proxy dynamically as well (because the endpoint will vary), and found this useful article which outlines how to build dynamic proxies <a href=\"http://sonyarouje.com/2010/10/01/proxy-less-silverlight-wcf-communication\" rel=\"nofollow\">http://sonyarouje.com/2010/10/01/proxy-less-silverlight-wcf-communication</a>.</p>\n\n<p>I now have that working (although I now need to work out how to call a method that has parameters) but I've just discovered that (a) Silverlight only supports BasicHttpBinding (i.e. not ws), and (b) BasicHttpBinding does not support session state.</p>\n\n<p>Our application currently uses session to keep track of and queue up requests through our singleton data access layer. The only thing I can think of doing at the moment is to write my own implementation of session - but I was wondering if there's a better solution that I'm missing, hence this post.</p>\n\n<p>So basically, is there a 'best practice' approach that supports Silverlight, WCF, session state and SSL, or am I right to go ahead and replace session with my own equivalent?</p>\n"},{"tags":["wcf","certificate","wif","saml"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12956080,"title":"Identity check failed for outgoing message. The expected DNS identity of the remote endpoint was XXX","body":"<p>I am having problems with a WCF Service which is being authenticated via certificate. The error I get is Identity check failed for outgoing message. The expected DNS identity of the remote endpoint was xxx....</p>\n\n<p>I have seen lots of posts about this and all of them say set the dns as the name / subject of the certificate.</p>\n\n<pre><code>&lt;identity&gt;\n                    &lt;dns value=\"WcfServer\" /&gt;\n                &lt;/identity&gt;\n</code></pre>\n\n<p>I have tried this and it does not work, what else can I do?</p>\n\n<p>Luke</p>\n"},{"tags":["wcf","iis","inversion-of-control","mef"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1895,"score":2,"question_id":975331,"title":"MEF and WCF","body":"<p>I'd like to use MEF for instantiating the dependencies in an application that has several WCF services hosted in IIS. The different services depend on shared components and I'd like MEF to manage the instantiation and injection of these.</p>\n\n<p>Where should I perform composition? Initially I thought of having a CompositionContainer in an IInstanceProvider but then I realized that that container would only serve a single endpoint and the instances it manages will not be shared with other endpoints. Likewise with having the CompositionContainer in a ServiceHost - That would not be shared across different services.</p>\n\n<p>Am I correct in this analysis? Is the only solution to have the CompositionContainer as a singleton at the application level?</p>\n\n<p>A second question is - When a Service is instantiated by WCF (like when a new user session is started), how can I supply its dependencies? Do I make the CompositionContainer recompose? Wouldn't that affect other already running Service instances?</p>\n\n<p>Might anyone share a code sample for this concept? Many thanks!</p>\n"},{"tags":["c#","vb.net","wcf","visual-studio","web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":12942239,"title":"WCF - \"The request for security token could not be satisfied because authentication failed\"","body":"<p>I've created a WCF service and hosted it in IIS7/Windows Server 2008.\nI'm trying to consume the service in my application...\nWhen I run the application from Visual Studio (debug), I can call the service and everything works as expected, however, when I attempt to call the service from the published application, I get the error above.</p>\n\n<p>Here's the service's web.config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;connectionStrings&gt;\n    ...\n    &lt;/connectionStrings&gt;\n\n    &lt;system.web&gt;\n        &lt;compilation debug=\"false\" /&gt;\n    &lt;/system.web&gt;\n\n    &lt;runtime&gt;\n        &lt;generatePublisherEvidence enabled=\"false\"/&gt;\n    &lt;/runtime&gt;    \n    &lt;system.serviceModel&gt;               \n        &lt;services&gt;            \n            &lt;service name=\"SVCLIB.SERVICE1\"&gt;\n                &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"SVCLIB.SERVICE1\"&gt;\n                    &lt;identity&gt;\n                        &lt;dns value=\"localhost\" /&gt;\n                    &lt;/identity&gt;\n                &lt;/endpoint&gt;\n                &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n                &lt;host&gt;\n                    &lt;baseAddresses&gt;\n                        &lt;add baseAddress=\"http://localhost:8732/Design_Time_Addresses/SVCLIB/SERVICE1/\" /&gt;\n                    &lt;/baseAddresses&gt;\n                &lt;/host&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"\"&gt;\n                    &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;        \n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And on the client:</p>\n\n<pre><code>  SERVICE1.SERVICE1Client objService = new SERVICE1Client();\n\n  objService.ClientCredentials.Windows.ClientCredential.UserName = \"UserName\";\n  objService.ClientCredentials.Windows.ClientCredential.Password = \"Password\";\n\n  objService.GetData();\n  objService.Close();\n</code></pre>\n\n<p>It works when debugging the application in VS, but it doesn't work when running the published application.</p>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>The request for security token could not be satisfied because\n  authentication failed</p>\n</blockquote>\n\n<p>I've looked at many posts here on Stack Overflow and others, but none helped me so far.</p>\n\n<p>Thank you!</p>\n\n<p>** EDIT:</p>\n\n<p>This is on the web.config, in the client side:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"WSHttpBinding_SERVICE1\" closeTimeout=\"00:01:00\"\n          openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n          bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n          maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\"\n          textEncoding=\"utf-8\" useDefaultWebProxy=\"true\" allowCookies=\"false\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n            enabled=\"false\" /&gt;\n          &lt;security mode=\"Message\"&gt;\n            &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n              realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n              algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://server.samedomain.com:8000/SVCLIB.SERVICE1.svc\"\n        binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_SERVICE1\"\n        contract=\"SERVICE1.ISERVICE1\" name=\"WSHttpBinding_ISERVICE1\"&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Tried gmail user's suggestion and link below... but still have the same problem. Same error.</p>\n"},{"tags":["javascript","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12959183,"title":"Call WCF Web Service from JavaScript","body":"<p>I've created a WCF Web Service and I want to access it straight from my html page using JavaScript.  However I'm getting a cross-site scripting error.<br>\nHere's the error message:</p>\n\n<pre><code>XMLHttpRequest cannot load http://localhost:2875/MyWebService.svc/MyFunction. Origin http://TheCallingServer is not allowed by Access-Control-Allow-Origin.\n</code></pre>\n\n<p>I've found examples online describing how to do this from an aspx.net page, but I can't find anything about doing this from JavaScript in a HTML page.</p>\n\n<p>What do I have to change in my WCF WebService to allow it to be called from JavaScript?</p>\n"},{"tags":["wcf","sockets","webserver","hardware","asyncsocket"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12958946,"title":"WCF and async sockets requirement comparison","body":"<p>I want to create a webserver that will handle pretty big amount of clients simultaneously.<br>\n I've read that WCF has a big overhead and can't handle many connections at the same time. And asynchronous sockets can do it well enough. But it is rather tedious to use raw sockets when you can use such thing like WCF. I don't want to spend a lot of time creating complex security with sockets.   </p>\n\n<p>So, is it able to create a webserver using WCF that will handle 1K -10K concurrent connections and what harware required? And what hardware required in case of async sockets?  </p>\n\n<p>And for example, how many connections approximately it will be able to handle with not very fast machine, like Dual Core CPU 2.4GHz + 2GB RAM?</p>\n"},{"tags":["wcf","iis","wcf-security","windows-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":12958541,"title":"WCF Windows authentication multiple servers : Web Application Server and Web Service server","body":"<p>I have two web servers , one that hosts the web application and other that hosts a wcf web service. I want to authenticate the user access the web application on both of these servers.</p>\n\n<p>The web app does a SOAP call to the web service , and it throws an exception saying \"the caller was not authenticated by the service\". I am using wsHttpBinding with message security.</p>\n\n<p>Both these servers are on the same domain. Help would be appreciated !</p>\n"},{"tags":["wcf","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12958312,"title":"FirstOrDefault not supported in EF","body":"<p>I am using EF and when I use FirstOrDefault on a table I get an error saying that it is not supported.  I am making the call over WCF.  Is this the issue?  Why is it not supported?  Why must I do a </p>\n\n<pre><code>Where(...).FirstOrDefault();\n</code></pre>\n\n<p>instead of just </p>\n\n<pre><code>FirstOrDefault();\n</code></pre>\n"},{"tags":["javascript","jquery","wcf","soap","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12953252,"title":"Result class name isn't appear on SOAP result","body":"<p>I have a WCF service. I call its methods using SOAP 1.2 with jQuery<br>\nI call a method which suppose to return the following class:  </p>\n\n<pre><code>namespace ConfigComWrapper.ConfigCom\n{\n    public class CommandResult\n    {\n        public int ErrorCode = ErrorCodeTypes.OK;\n        public string ErrorDescription = string.Empty;\n\n        public CommandResult(){}    \n}  \n</code></pre>\n\n<p>However the SOAP response returns me only its members without even mentioning the CommandResult class at all. this is a generated xml response(SOAP) in the WCF Test client:  </p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:u=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n  &lt;s:Header&gt;\n    &lt;a:Action s:mustUnderstand=\"1\" u:Id=\"_2\"&gt;http://www.enghouse.com/CosmoCom/WebAdminAPIServiceLibrary/ITenantAdmin/LoginResponse&lt;/a:Action&gt;\n    &lt;a:RelatesTo u:Id=\"_3\"&gt;urn:uuid:509fa011-0e6a-4370-896b-6d45756a5fa9&lt;/a:RelatesTo&gt;\n    &lt;o:Security s:mustUnderstand=\"1\" xmlns:o=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n      &lt;u:Timestamp u:Id=\"uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-11\"&gt;\n        &lt;u:Created&gt;2012-10-18T14:30:49.878Z&lt;/u:Created&gt;\n        &lt;u:Expires&gt;2012-10-18T14:35:49.878Z&lt;/u:Expires&gt;\n      &lt;/u:Timestamp&gt;\n      &lt;c:DerivedKeyToken u:Id=\"uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-7\" xmlns:c=\"http://schemas.xmlsoap.org/ws/2005/02/sc\"&gt;\n        &lt;o:SecurityTokenReference&gt;\n          &lt;o:Reference URI=\"urn:uuid:cf569488-040b-4bcb-8270-b7973c0d6e2a\" ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" /&gt;\n        &lt;/o:SecurityTokenReference&gt;\n        &lt;c:Offset&gt;0&lt;/c:Offset&gt;\n        &lt;c:Length&gt;24&lt;/c:Length&gt;\n        &lt;c:Nonce&gt;TNFiG8+NqEdgXJ8njmVNPw==&lt;/c:Nonce&gt;\n      &lt;/c:DerivedKeyToken&gt;\n      &lt;c:DerivedKeyToken u:Id=\"uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-8\" xmlns:c=\"http://schemas.xmlsoap.org/ws/2005/02/sc\"&gt;\n        &lt;o:SecurityTokenReference&gt;\n          &lt;o:Reference URI=\"urn:uuid:cf569488-040b-4bcb-8270-b7973c0d6e2a\" ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/sct\" /&gt;\n        &lt;/o:SecurityTokenReference&gt;\n        &lt;c:Nonce&gt;9dmn1BiWfn0U7cmlbkFWdg==&lt;/c:Nonce&gt;\n      &lt;/c:DerivedKeyToken&gt;\n      &lt;e:ReferenceList xmlns:e=\"http://www.w3.org/2001/04/xmlenc#\"&gt;\n        &lt;e:DataReference URI=\"#_1\" /&gt;\n        &lt;e:DataReference URI=\"#_4\" /&gt;\n      &lt;/e:ReferenceList&gt;\n      &lt;e:EncryptedData Id=\"_4\" Type=\"http://www.w3.org/2001/04/xmlenc#Element\" xmlns:e=\"http://www.w3.org/2001/04/xmlenc#\"&gt;\n        &lt;e:EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes256-cbc\" /&gt;\n        &lt;KeyInfo xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n          &lt;o:SecurityTokenReference&gt;\n            &lt;o:Reference ValueType=\"http://schemas.xmlsoap.org/ws/2005/02/sc/dk\" URI=\"#uuid-71549a1a-6c54-4a76-b224-66bc45877e0f-8\" /&gt;\n          &lt;/o:SecurityTokenReference&gt;\n        &lt;/KeyInfo&gt;\n        &lt;e:CipherData&gt;\n          &lt;e:CipherValue&gt;CgnkLBEkjO1Pnqsypzy4NCQUs0E7f0gEMepzaMacN1Zkrfvqldi+sdFDOPHehXwdIa6h7OXiqCHCCTNuQMP0kmQaqrX3YqeeUi1ntlZdOJU1X0s7bwavxJHWHfP0w1ASrOo6a0YOK3o750uO9dgbp/T69dRGZW0/oRKZu0eES5URJkAx5NuHGGKUP9gb+RraOu+1wwJnAvpiuSe2G/SULwVGjQzu3SdRn5HA3BU5Ndh1qnq1n6TLXRByPeNTrSUMs6CV1jNN+EiNrtNeinre6nCE2WRuNvBaomcZW+5h0tx7r7Jg/DlLKK1YLvJVB4jDjtf/9eh1CWTgHiq7mrZev9aL0WYkwX2coMn6NO+vyMD0EKobkHM3zTf7okFDwVg8yWCYOGXO3zhWXivcPl1M2XYqzQWSmXtvVAN7kKyktjiB3SLGSq1jpo13fXuoII+K/yngJH4We/qoyjUSllTZDz9TBS7aUielDhL2nJZIjTGfBNw6HEYJsp2xaZOojrcRRvrKGNKRifYJX0moP1GT8J3EzRkgVAyhI9qkMbKg0IQC1+4AD+SDUXm7+69c+9/zVyWJAK36Hdbk/TBmMfK6YVLSxlpnPgNuw/1K2nBpgO1YqfXO+YMGsgTUEaltaCsh5zugtwCObg21ybA2rxKw08rDduMQ9fmUTtjBrxNTtX6EAI67z9gtBxgSZwRJTAu3GGj3u5ymkdFBeI/22rndj4k+eXJMTnCHibQ+zvnWAYiVhGukVSvGwgBM8BPioty8kTT75EljhlLfqOHQsVB5pZGYovi1k+wiPb24mYet08eETHsaU11bkAWmjB5AvfBtKAttDRnvjuyFx/yv+vZ6MbV8Kau2p/gmKnJ/JeNmlGv7C/lqQHz0tPv62t0l8FKAQVdBOSMwSVUWptjMsto++AVRLNqQ3Fgkz9C/nR/3dNMkQXxvhSOW3VK67fmiitp4451HtRcXEE8RbyO7ULuDdbUET6SLEpGJ2uPelrYsX7sp4bVGK0hGCG18AmqQ3H1yhCSm+ObenuqqRtgWxK588phuzExuGRORjiTd75LwxtKWk7jzyPQKN+ZBiWbodcqhHG7rVvQbz3hkhymmTrPW5VmhyTFnJWdDVZaZVQJBi/2CNoCOZfBd09hDhvEQWhg3DqExV4I/gPytcJaO+yWR8s6nGGVrgYSsB3YRb/1fUVkt4vM7BobqRoDXHAFJhRl0TaXyPfZJ4sPPLyMgXJn1+A2dDjxzJxi4lYnAbqg1ypzmtZwOLQcDTPiq4DR5mV9TJScMX7laroYqS1thHzXjPP0rBlxSAbhedxjxoiGe5vDdDK0CLohFHj8lqXOq6bvY2LwpMczR1Y5BaR/mETkfr/PxQLuaGqEWl7BxJuJzun6uOt1yrhwyKTCQHUzGol4FZ9X6fybjTAGARQInpHH3QqwQaovVUHZX29CBBU6fb+lBEAUSZMUwjyyLzJHPTcw9VL+G68ROWxdXDoRAOp6sWoJwN6wqnWaZdoXUDzNqS978D4w2gMqnJFZYNDRalA0ky9y+kgkk4stSjRaoJfOXjyxZQo85XCqdGr0ndcYrGfnkjYQRPTT02FL1eERMuyFUgJJwAqBiB6jb366Mya6JHUeRtz+9Iu2OdpxFJxAXR+p4Lv4PkjQGrPTUAUv0lqZNCTRKoTreszpIAlKcVTNKnRgKCMc2PhzJidZ6jJcuBbWxuVkVmguoUg4TujvOKxYJPUk5XBcuO0c7xr+78lYQ2KzHrliVyYUFNY9m7mM2b/g+bbIgJqj3v80fOpSKRiTqfdnwoFVPKZFIprgN4eDOatghzce/ZAQyrwwnya0Gq5Z/msJdRQAklKYrfJG8E6FYssCJCCuvrsaVHwjmzzSwmnA2XoYrK3QhhPsNhI6O0mlLbh4ALo7YwOkrf2+jacf5zpeui1bTnFo4coknvFEcC8CCMymAzrLtLWqBkAbdCh0bCTd/9F+Upyiwk/dWgkPk4trnYe6yyxnKaiqxsUZ4jruo+jmjYb45s1mig5YGV2kh+z/fNf6bhHSseANqPQJAOLdyC7sRIP5LdALtxIzpkF21ZOJ78FShTY9PV7XvUywNOubXGpMo0ljhC5Y4Sx6UC0LBcg7gb66NaqrsLR8kObjnhK2WUHdFZsvBckb4VzkG8TRRAIUcQXRbwLKrA9yl&lt;/e:CipherValue&gt;\n        &lt;/e:CipherData&gt;\n      &lt;/e:EncryptedData&gt;\n    &lt;/o:Security&gt;\n  &lt;/s:Header&gt;\n  &lt;s:Body u:Id=\"_0\"&gt;\n    &lt;LoginResponse xmlns=\"http://www.enghouse.com/CosmoCom/WebAdminAPIServiceLibrary\"&gt;\n      &lt;LoginResult xmlns:a=\"http://schemas.datacontract.org/2004/07/ConfigComWrapper.ConfigCom\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n        &lt;a:ErrorCode&gt;0&lt;/a:ErrorCode&gt;\n        &lt;a:ErrorDescription /&gt;\n      &lt;/LoginResult&gt;\n    &lt;/LoginResponse&gt;\n  &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;  \n</code></pre>\n\n<p>But for some reason the \"Formatted option\" in the WCF Test Client shows that CommandResult was returned :<br>\n<img src=\"http://i.stack.imgur.com/VBJfh.png\" alt=\"enter image description here\"></p>\n\n<p>Some one knows why it lacks the CommandResult class from the SOAP Response ?<br>\nThanks !</p>\n"},{"tags":["c#","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12951953,"title":"Intermitent WCF service timeout exception","body":"<p>We have a WCF service hosted in Windows service and a single non-threaded client accessing the service.  The service is performing data access to a SQL Server 2008 database.  Intermitently the following exception occurs on the client side:</p>\n\n<pre><code>System.TimeoutException: The request channel timed out while waiting for a reply after 00:01:00. Increase the timeout value passed to the call to Request or increase the SendTimeout value on the Binding. The time allotted to this operation may have been a portion of a longer timeout.\n</code></pre>\n\n<p>I am aware that this error can be a bit of a catch all for WCF problems but I am certain that the error is not occuring because the operation takes over a minute (I have trippled the timeout and it still occurs).</p>\n\n<p>The problem has occurred on multiple endpoints and occurs on the call to the client proxy.  I logged to a text file the various points the service reaches when the crash occurs and see that the return statement from the service is reached.</p>\n\n<p>The client and service have been in use in some form for over two years and this problem appears to have occurred only recently and without any obivious changes in areas significant to the service (although both of these statements are danagerous to rely on when debugging a problem).</p>\n\n<p>Any advice, thoughts or suggestions to investigate would be appreciated.</p>\n\n<p>Here is the service binding:</p>\n\n<pre><code>&lt;binding name=\"WSHttpBinding_IDataService\" closeTimeout=\"00:01:00\"\n    openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n    bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n    maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"\n    messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n    allowCookies=\"false\"&gt;\n  &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\"\n      maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n  &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n      enabled=\"false\" /&gt;\n  &lt;security mode=\"Message\"&gt;\n    &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n        realm=\"\" /&gt;\n    &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n        algorithmSuite=\"Default\" establishSecurityContext=\"true\" /&gt;\n  &lt;/security&gt;\n&lt;/binding&gt;\n</code></pre>\n\n<p>and here is the client binding:</p>\n\n<pre><code>&lt;binding name=\"WSHttpBinding_IAssessmentDataAccessContract\"\n         closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n         bypassProxyOnLocal=\"false\" transactionFlow=\"false\"\n         hostNameComparisonMode=\"StrongWildcard\"\n         maxBufferPoolSize=\"2147483647\"  maxReceivedMessageSize=\"2147483647\"\n         messageEncoding=\"Text\" textEncoding=\"utf-8\"\n         useDefaultWebProxy=\"true\" allowCookies=\"false\"&gt;\n    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\"/&gt;\n    &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\" enabled=\"false\"/&gt;\n    &lt;security mode=\"Message\"&gt;\n        &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\" realm=\"\"&gt;\n            &lt;extendedProtectionPolicy policyEnforcement=\"Never\"/&gt;\n        &lt;/transport&gt;\n        &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\" \n                 algorithmSuite=\"Default\" establishSecurityContext=\"true\"/&gt;\n    &lt;/security&gt; \n&lt;/binding&gt;\n</code></pre>\n"},{"tags":["c#","wcf","svcutil.exe","proxy-classes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12916736,"title":"WCF client proxy generation failing with new method addition","body":"<p>I have a library I need to generate client proxy classes for, and the existing code works fine when running this command and the service on my local box</p>\n\n<pre><code>svcutil.exe /config:thn /r:Citi.Rbcs.BusGn.dll /r:Citi.Rbcs.Buscm.dll net.tcp://localhost:8088/RbcThnService/mex\n</code></pre>\n\n<p>The client proxy is generated fine. RbcThnService uses an interface IRbcThinService. If I then add a new method to that interface as follows</p>\n\n<pre><code>[OperationContract(ProtectionLevel = ProtectionLevel.EncryptAndSign)]\n        [FaultContract(typeof (GenericException))]\n        [FaultContract(typeof (CustomException))]\n        RbcCustomerStructure GetCustomerStructures(string CustomerId, short QueueId, DateTime dateUpdate, RbcSecurityContext securityContext);\n</code></pre>\n\n<p>Then rebuild and install the service, and try to regenerate the client proxies, I get</p>\n\n<pre><code>There is an error in the XML document.\n\nThe value for the 'type' attribute is invalid - 'q32:ArrayOfstring' is an invalid value for the 'type' attribute.\n</code></pre>\n\n<p>It sounds like it's not finding a certain type in the declarations, but the odd thing is there is another method in the interface with EXACTLY the same signature in the original library, which allows the client proxy to generate just fine. So I am only creating an identical method to an already existing one, just with a new name.</p>\n\n<p>Does anyone have any suggestions?</p>\n\n<p>UPDATE: Ok the plot thickens, if I comment out even one of the existing methods and retry - it works with the new method. I've tried stripping it down to only a handful of methods plus the new one, it works. I gradually reintroduced the other methods one by one and it kept working, until I added the very final one in, then it errored.</p>\n\n<p>Interestingly I got up to the point of having one original method commented out and it was working, then I created a SECOND dummy NEW method and it errored, same error but instead of ArrayOfstring it had a different type it was failing because of.</p>\n\n<p>So if I'm not barking up the wrong tree it seems to be tied to either the number of methods I have in the interface definition, or the length of the generated XML potentially. Are there any limitations I should be aware of?</p>\n"},{"tags":["android",".net","wcf","web-services","ksoap2"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12928759,"title":"Android with WCF web service using ksoap2 - error SoapFault - faultcode: 'a:InternalServiceFault'","body":"<p>I have done a simple project to call wcf web service using ksoap2. But when it calls envelope.getResponse(); it gives error saying</p>\n\n<p><em>Error:\nSoapFault - faultcode: 'a:InternalServiceFault' faultstring: 'The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the  configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs.' faultactor: 'null' detail: null</em></p>\n\n<pre><code>package testing.wcf;\nimport java.io.IOException;\nimport org.ksoap2.SoapEnvelope;\nimport org.ksoap2.serialization.SoapObject;\nimport org.ksoap2.serialization.SoapPrimitive;\nimport org.ksoap2.serialization.SoapSerializationEnvelope;\nimport org.ksoap2.transport.HttpTransportSE;\nimport org.xmlpull.v1.XmlPullParserException;\nimport org.xmlpull.v1.XmlSerializer;\n\nimport android.os.Bundle;\nimport android.os.StrictMode;\nimport android.widget.TextView;\nimport android.annotation.SuppressLint;\nimport android.app.Activity;\n\npublic class MainActivity extends Activity \n{\n    private static final String strNAMESPACE = \"http://www.testing.co.in/TestingService/\";\n    private static final String strURL = \"http://www.testing.co.in/TestingService/UserDetails.svc\";\n    private static final String strSOAP_ACTION = \"http://testing.co.in/TestingService/UserDetails/LoginDetails\";\n    private static final String strMETHOD_NAME = \"LoginDetails\";\n    TextView tv;\n    StringBuilder sb;\n    String strInputXML;\n\n      @Override\n    public void onCreate(Bundle savedInstanceState) \n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        tv = (TextView)findViewById(R.id.testing);\n        sb = new StringBuilder();       \n            Call();\n        tv.setText(sb.toString());\n        //setContentView(tv);\n\n    }\n    public void Call()\n    {\n         try \n         {\n             SoapObject request = new SoapObject(strNAMESPACE, strMETHOD_NAME);\n\n            String inputxml = \"&lt;?xml version=\"+\"\\\"\"+\"1.0\"+\"\\\"\"+\" encoding=\"+\"\\\"\"+\"utf-8\"+\"\\\"\"+\" ?&gt;\" +\"&lt;MOB&gt; \\n  &lt;PIN&gt;0000&lt;/PIN&gt; \\n  &lt;LOGINID&gt;TEST&lt;/LOGINID&gt; \\n  &lt;PNUMBER&gt;112233&lt;/pNUMBER&gt; \\n  &lt;REQUESTID&gt;LoginVal&lt;/REQUESTID&gt; \\n &lt;/MOB&gt;\";\n\n            request.addAttribute(\"strInputXML\", inputxml);\n            request.addAttribute(\"strOutputXML\",\"\");\n\n                   SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n             envelope.dotNet = true;\n             envelope.setOutputSoapObject(request);\n\n             HttpTransportSE androidHttpTransport = new HttpTransportSE(strURL);\n             androidHttpTransport.call(strSOAP_ACTION, envelope);\n             SoapPrimitive result = (SoapPrimitive)envelope.getResponse();\n\n             String resultData = result.toString();\n             sb.append(resultData + \"\\n\");\n         }\n         catch(Exception e)\n         {\n             sb.append(\"Error:\\n\" + e.getMessage() + \"\\n\");\n         }       \n    }\n}\n</code></pre>\n\n<p>Here I want to send the request like this</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt; \n&lt;PhoneData&gt;\n&lt;PINNO&gt;0000&lt;/PINNO&gt;\n&lt;LOGINID&gt;HELLO&lt;/LOGINID&gt;\n&lt;PASSWORD&gt;1234&lt;/PASSWORD&gt;\n&lt;REQID&gt;0&lt;/REQID&gt;\n&lt;/PhoneData&gt;\n</code></pre>\n\n<p>My respond XML should be</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt; \n&lt;PhoneData&gt;\n&lt;OTA&gt;1234&lt;/OTA&gt;\n&lt;/PhoneData&gt;\n</code></pre>\n"},{"tags":["wcf","security","rest","authorization"],"answer_count":9,"favorite_count":214,"up_vote_count":232,"down_vote_count":0,"view_count":73706,"score":232,"question_id":7551,"title":"Best Practices for securing a REST API / web service","body":"<p>When designing a REST API or service are there any established best practices for dealing with security (Authentication, Authorization, Identity Management) ?</p>\n\n<p>When building a SOAP API you have WS-Security as a guide and much literature exists on the topic. I have found less information about securing REST endpoints.</p>\n\n<p>While I understand REST intentionally does not have specifications analogous to WS-* I am hoping best practices or recommended patterns have emerged.</p>\n\n<p>Any discussion or links to relevant documents would be very much appreciated.\nIf it matters, we would be using WCF with POX/JSON serialized messages for our REST API's/Services built using v3.5 of the .NET Framework.</p>\n"},{"tags":["asp.net",".net","wcf","web-services","endpoint"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12953389,"title":"Why consuming WCF web service from ASP.NET 1.1 needs XmlSerializerFormat attribute in the ServiceContract","body":"<p>I am <em>consuming a a WCF web service from APS.NET 1.1</em> and I read in everywhere that we need to </p>\n\n<p>1 : Add <strong>XmlSerializerFormat attribute</strong> to the ServiceContract we want to consume.</p>\n\n<p>2 : Use <strong>basicHttpBinding</strong> as Endpoint setting.</p>\n\n<p><strong>Why so?</strong></p>\n\n<blockquote>\n  <p>-> Is it possible to set the POINT 1 condition someway in configuration file ?</p>\n  \n  <p>-> When basicHttpBinding's default is XML serialization. Why do we need to explicitly declare the service contract as XmlSerializerFormat\n  ?</p>\n</blockquote>\n"},{"tags":["wcf","wcf-client"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":12955204,"title":"WCF client with changing IP addresses and interfaces during connection","body":"<p>Imagine situation (this is real situation):</p>\n\n<p>There is a WCF client application on laptop.\nLaptop is connected by WiFi to internet.\nUser is doing some stuff (request reply operations) on his laptop at work connected to WCF service.</p>\n\n<p>Then user's laptop is sleep-down and user go home. At home user wake-up his laptop, connect HSPDA/3G modem (different interface &amp; ip) and want to continue on work in client appliaction. Note that application hasn't been closed.</p>\n\n<p>User (client application) should be authenticated and if it is possible, communication should be encrypted.</p>\n\n<p>What are the best practices?\nCreate new proxy for each operation? This should be very slow when initializing net.tcp connection with authentication.</p>\n\n<p>Is solution basicHttp connection (+HTTPS) with InstanceContextMode.PerCall? Note that speed and higher payload is problem.</p>\n\n<p>Or the best solution is something like \"wrapper(Func&lt;>)\", which contains while loop until operation is successfully finished (on fail, new connection is created and function is called again).</p>\n\n<p>Thanks you for suggestions</p>\n"},{"tags":["wcf","certificate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12209229,"title":"WCF service certificate giving error on IIS, running fine on local port","body":"<p>i have added wcf service reference in project and i have installed certificate also on my pc.</p>\n\n<p>when i am using wcf method throug port like (localhost:3353/wcfproj/add.aspx) it's running fine\nbut when host it on my iis and use method that time it's giving below error</p>\n\n<p>\"The request was aborted: Could not create SSL/TLS secure channel.\"</p>\n\n<pre><code>s.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByThumbprint, \"1e fb 2c a7 75 be b7 18 e5 c5 1d 14 4f 87 2c 77 15 70 cf 57\");\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["wcf","asp.net-web-api","wcf-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12952456,"title":"Migration from WCF WebApi to MVC4 Api - Registering global error handler","body":"<p>I am migrating a project that was developed using WebApi Preview 5 (when it was part of WCF) to the final release of WebApi (part of MVC4). There is a <a href=\"http://wcf.codeplex.com/wikipage?title=How%20to%20Migrate%20from%20WCF%20Web%20API%20to%20ASP.NET%20Web%20API\" rel=\"nofollow\">document</a> describing the process but it is extremely simplistic and doesn't cover most of the issues.</p>\n\n<p>Now one of the issues I am facing is that a <strong>GlobalErrorHandler</strong> was created by inheriting from <strong>HttpErrorHandler</strong> and then overriding <strong>OnTryProvideResponse</strong> and that was used to hook error handling with Elmah. Now that was registered on AppStart with a line like this:</p>\n\n<pre><code>var configuration = new WebApiConfiguration();\n//some other configuration for security and CreateInstance\nconfiguration.ErrorHandlers = \n(handlers, endpoint, description) =&gt; handlers.Add(new GlobalErrorHandler())\n};\n//then some registration\nRouteTable.Routes.MapServiceRoute&lt;SomeObject&gt;(\"routeName\", configuration);\n</code></pre>\n\n<p>and then mapping different route to this configuration. All this code doesn't work in the new world of MVC4 WebApi, it seems like there is a conflict between <strong>HttpErrorHandler</strong> and it can't even implement its members properly. </p>\n\n<p>Now I've seen general posts about how to register Elmah with WebApi but I am trying to stick to the original code as much as possible and I am assuming - may be I am wrong - that there is a direct equivalent to what Microsoft had in the Preview version and what they released in the final one. So my questions:</p>\n\n<ol>\n<li>What is the equivalent of this Global Error handling registation in ASP.NET MVC4 WebApi?</li>\n<li>Do I need to do the configuration the same way it is done here (default webapi samples project doesn't seem to have similar code)</li>\n<li>What is the equivalent of that route registration line of code: RouteTable.Routes.MapServiceRoute(\"routeName\", configuration);</li>\n</ol>\n"},{"tags":["c#","asp.net","wcf","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":180,"score":0,"question_id":12902115,"title":"WCF REST JSON Service returns error 404 / Exception: System.Web.HttpException (0x80004005)","body":"<p>I followed this example to make my first WCF service: <a href=\"http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON\" rel=\"nofollow\">WCF REST Service JSON</a>, then edited it to create my own. I was able to get my service to run fine in debugging using ASP.NET Developer Server. I opened port 8081(on the Server, Firewall and Router) and then assigned it to the \"Registration\" folder in IIS. I then published the service to a Windows Server 2003 running IIS 6 after spending a day figuring out I had to use MsDeployAgentService. I then set the ASP.NET version to 4.0.3019 using the IIS.  The Registration folder contains Service1.svc, Web.config, and the bin folder.</p>\n\n<p>This is my web config file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"ServiceApp.Properties.Settings.RegistrationConnection\"\n      connectionString=\"Data Source=EDITED;Initial Catalog=Registration;Persist Security Info=True;User ID=EDITED;Password=EDITED;MultipleActiveResultSets=True\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n    &lt;httpRuntime maxRequestLength=\"524288\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"StreamedRequestWebBinding\"\n                 bypassProxyOnLocal=\"true\"\n                 useDefaultWebProxy=\"false\"\n                 hostNameComparisonMode=\"WeakWildcard\"\n                 sendTimeout=\"10:15:00\"\n                 openTimeout=\"10:15:00\"\n                 receiveTimeout=\"10:15:00\"\n                 maxReceivedMessageSize=\"2147483647\"\n                 maxBufferSize=\"2147483647\"\n                 maxBufferPoolSize=\"2147483647\"\n                 transferMode=\"StreamedRequest\"&gt;\n          &lt;readerQuotas maxArrayLength=\"2147483647\"\n                        maxStringContentLength=\"2147483647\" /&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service name=\"ServiceApp.Service1\" behaviorConfiguration=\"ServiceBehaviour\"&gt;\n        &lt;endpoint address=\"\"  binding=\"webHttpBinding\" bindingConfiguration=\"StreamedRequestWebBinding\" contract=\"ServiceApp.IService1\" behaviorConfiguration=\"web\"&gt;\n        &lt;/endpoint&gt;\n          &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ServiceBehaviour\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"web\"&gt;\n          &lt;webHttp/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>When I try to consume the service with a test client I get Error 404 with the following statement</p>\n\n<pre><code>byte[] data = client.DownloadData(\"http://ServerIP:8081/Registration/Service1.svc/CheckSoftware/1/Customer1/1_0/abc123/1/1\");\n</code></pre>\n\n<p>When I remove the port I get an Error 401 \"Not Authorized\"</p>\n\n<pre><code>byte[] data = client.DownloadData(\"http://ServerIP/Registration/Service1.svc/CheckSoftware/1/Customer1/1_0/abc123/1/1\");\n</code></pre>\n\n<p>I have tried using the LAN IP aswell as the WAN IP address.</p>\n\n<p>Followed <a href=\"http://forums.asp.net/t/1807824.aspx/1\" rel=\"nofollow\">this post</a> because it looks liked the OP followed the same example and had simalar problems but It didn't help.</p>\n\n<p>I then looked in the Event Viewer on the server and found this when I included in the port number:</p>\n\n<pre><code>WebHost failed to process a request.\n Sender Information: System.ServiceModel.Activation.HostedHttpRequestAsyncResult/23878916\n Exception: System.Web.HttpException (0x80004005): The service '/Registration/Service1.svc' does not exist. ---&gt; System.ServiceModel.EndpointNotFoundException: The service '/Registration/Service1.svc' does not exist.\n   at System.ServiceModel.ServiceHostingEnvironment.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath)\n   at System.ServiceModel.ServiceHostingEnvironment.EnsureServiceAvailableFast(String relativeVirtualPath)\n   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()\n   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()\n   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)\n   at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result)\n Process Name: w3wp\n\n\n Process ID: 3460\n</code></pre>\n\n<p>I can clearly see the Service1.svc file exist in the folder. I am pretty lost at this point and would appreciate any help. </p>\n\n<p><strong>EDITED TO INCLUDE MORE CODE:</strong></p>\n\n<pre><code>    namespace ServiceApp\n{\n    [ServiceContract]\n    public interface IService1\n    {\n\n        [OperationContract]\n        [WebInvoke(Method = \"GET\", \n          UriTemplate = \"/CheckSoftware/{SoftwareId}/{CustomerId}/{Version}/{Key}/{MoboID}/{ProcessorID}\",\n          RequestFormat = WebMessageFormat.Json, \n          ResponseFormat = WebMessageFormat.Json)]\n        SoftwareStatus CheckSoftware(string SoftwareID, string Version, string CustomerID, string Key, string moboID, string processorID);\n\n        [OperationContract]\n        [WebInvoke(\n          Method = \"GET\", \n          UriTemplate = \"/SaveKey/{SoftwareId}/{CustomerId}/{Key}/{MoboID}/{ProcessorID}\",\n          RequestFormat = WebMessageFormat.Json, \n          ResponseFormat = WebMessageFormat.Json)]\n        string SaveKey(string SoftwareID, string CustomerID, string Key, string moboID, string processorID);\n    }\n\n    [DataContract]\n    public class FileInformation\n    {\n        [DataMember]\n        public string Name\n        {\n            get;\n            set;\n        }\n\n        [DataMember]\n        public byte[] Content\n        {\n            get;\n            set;\n        }\n    }\n\n    [DataContract]\n    public class Employee\n    {\n        [DataMember]\n        public int Id\n        {\n            get;\n            set;\n        }\n\n        [DataMember]\n        public string Name\n        {\n            get;\n            set;\n        }\n    }\n    [DataContract]\n    public class SoftwareKey\n    {\n        [DataMember]\n        public string SoftwareId\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public string CustomerId\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public string Version\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public string Key\n        {\n            get;\n            set;\n        }\n    }\n\n    [DataContract]\n    public class SoftwareStatus\n    {\n        [DataMember]\n        public Boolean SoftwareId\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public Boolean CustomerId\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public Boolean Version\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public Boolean Key\n        {\n            get;\n            set;\n        }\n        [DataMember]\n        public Boolean HardwareID\n        {\n            get;\n            set;\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["wcf","faultcontract"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":3150,"score":3,"question_id":2470607,"title":"WCF : FaultContract(typeof(ExceptionDetail)) issue","body":"<p>I have put the attribute <code>[FaultContract(typeof(ExceptionDetail))]</code> for my operation contract. When I am trying to add the service to a client application, I get this error - <code>\"Custom tool error: Failed to generate code for the service reference 'ServiceReference1'.  Please check other error and warning messages for details.\"</code></p>\n\n<p>But when I comment out the FaultContract Attribute, I am able to add the wcf service reference th' my client app.</p>\n"},{"tags":["c#",".net","wcf","silverlight","web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":377,"score":0,"question_id":9889932,"title":"WCF Windows Authentication silverlight login screen","body":"<p>I have a WCF service with the given security in my config:</p>\n\n<pre><code>&lt;security mode=\"Transport\"&gt;\n   &lt;transport clientCredentialType=\"Windows\" /&gt;\n&lt;/security&gt;\n</code></pre>\n\n<p>I am connecting to my WCF service with Silverlight over a <code>basicHttpBinding</code>. What I want, is when my silverlight application starts, they input their windows login/password (this is an intranet app). </p>\n\n<p>In Silverlight, I am able to set my username and password before making any calls.  However, if I put an incorrect password or username, I get an error returned (http 500 I believe).</p>\n\n<pre><code>ServiceManager.exporterClient.ClientCredentials.UserName.UserName = \"myUserName\";\nServiceManager.exporterClient.ClientCredentials.UserName.Password = \"myPassword\";\n</code></pre>\n\n<p>Making a login screen in Silverlight is simple enough, but how can I call a function on my WCF service to ask if this given username and password is valid if it just returning and error because the windows credentials are invalid to begin with and therefore can not call the service?</p>\n"},{"tags":["c#","wcf","wcf-security"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":889,"score":2,"question_id":3301998,"title":"Wcf self hosted service with X.509 certificate connection error","body":"<p>I have a self hosted Wcf service running on Windows XP and am attempting to use Certificates for message security.  This is being done via the service and client config files.  Both service and client are running on the same machine and I have created certificates for both using makecert.exe.  This worked fine when I had clientCredentialType=\"Windows\" but when I modified the configuration files to use certificates it no longer works.  The problem is that when I attempt to connect to the service from the client I am getting the following exception:</p>\n\n<p>Exception Type:  System.ServiceModel.Security.SecurityNegotiationException, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</p>\n\n<p>Message:  Incoming binary negotiation has invalid ValueType  <a href=\"http://schemas.xmlsoap.org/ws/2005/02/trust/tlsnego\" rel=\"nofollow\">http://schemas.xmlsoap.org/ws/2005/02/trust/tlsnego</a>.</p>\n\n<p>My configuration settings are:</p>\n\n<p>Service config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"wsHttpBinding0\" closeTimeout=\"00:10:00\" sendTimeout=\"00:10:00\"&gt;\n          &lt;security&gt;\n            &lt;!-- &lt;transport clientCredentialType=\"Certificate\"/&gt; --&gt;\n            &lt;message clientCredentialType=\"Certificate\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"CommMgr.ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" policyVersion=\"Policy15\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;clientCertificate&gt;\n            &lt;!--\n              &lt;authentication certificateValidationMode=\"PeerTrust\"/&gt;\n              --&gt;\n              &lt;authentication certificateValidationMode=\"None\"/&gt;\n            &lt;/clientCertificate&gt;           \n            &lt;serviceCertificate findValue=\"WcfServer\" storeLocation=\"CurrentUser\"\n              storeName=\"My\" x509FindType=\"FindBySubjectName\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service name=\"CommMgr.Service\" behaviorConfiguration=\"CommMgr.ServiceBehavior\"&gt;\n        &lt;endpoint address=\"http://localhost:8002/Service\"\n                  binding=\"wsHttpBinding\"\n                  name=\"DataService\"\n                  bindingNamespace=\"CommMgr\"\n                  contract=\"CommMgr.Service\"\n                  bindingConfiguration=\"wsHttpBinding0\"&gt;\n          &lt;!--\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\"/&gt;\n          &lt;/identity&gt;  \n          --&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8080/Service/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Client config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;wsHttpBinding&gt;\n                &lt;binding name=\"WSHttpBinding_Service\" closeTimeout=\"00:01:00\"\n                    openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                    bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                    messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                    allowCookies=\"false\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"16384\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                        enabled=\"false\" /&gt;\n                    &lt;security mode=\"Message\"&gt;\n                        &lt;!-- &lt;transport clientCredentialType=\"Certificate\"/&gt; --&gt;\n                      &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\" realm=\"\" /&gt;\n                      &lt;message clientCredentialType=\"Certificate\" negotiateServiceCredential=\"true\" \n                                 algorithmSuite=\"Default\" establishSecurityContext=\"true\"/&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n            &lt;/wsHttpBinding&gt;\n        &lt;/bindings&gt;\n      &lt;behaviors&gt;\n        &lt;endpointBehaviors&gt;\n          &lt;behavior name=\"ClientCertificateBehavior\"&gt;\n            &lt;clientCredentials&gt;\n              &lt;clientCertificate findValue=\"WcfClient\" storeLocation=\"CurrentUser\"\n                storeName=\"My\" x509FindType=\"FindBySubjectName\" /&gt;\n              &lt;serviceCertificate&gt;\n                &lt;!--\n                &lt;authentication certificateValidationMode=\"PeerTrust\"/&gt;\n                --&gt;\n                &lt;authentication certificateValidationMode=\"None\"/&gt;\n              &lt;/serviceCertificate&gt;              \n            &lt;/clientCredentials&gt;\n          &lt;/behavior&gt;\n        &lt;/endpointBehaviors&gt;\n      &lt;/behaviors&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://localhost:8080/Service\" behaviorConfiguration=\"ClientCertificateBehavior\"\n                binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_Service\"\n                contract=\"ServiceReference.Service\" name=\"WSHttpBinding_Service\"&gt;\n                &lt;identity&gt;\n                    &lt;!-- &lt;dns value=\"WcfServer\" /&gt; --&gt;\n                  &lt;certificate encodedValue=\"MIIBuTCCAWOgAwIBAgIQD6mW56bjgapOill7ECgRMzANBgkqhkiG9w0BAQQFADAWMRQwEgYDVQQDEwtSb290IEFnZW5jeTAeFw0xMDA3MjAxODMwMThaFw0zOTEyMzEyMzU5NTlaMBQxEjAQBgNVBAMTCVdjZkNsaWVudDCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAv2p/0NDo4iZU35gN+k7nGXe0LZWdnP9i4MHYD3IsFcZGIamMyXwRT8//3jx+1fs1xEb+8+QbZuj8TXt/7aX6x2kz2O5tynuholP35iObDqOd7nYSXN+70QDrZ/uktPOkLrw/nfrA8sK0aZCZjfiINHCRt/izJIzESOGzDOh1if0CAwEAAaNLMEkwRwYDVR0BBEAwPoAQEuQJLQYdHU8AjWEh3BZkY6EYMBYxFDASBgNVBAMTC1Jvb3QgQWdlbmN5ghAGN2wAqgBkihHPuNSqXDX0MA0GCSqGSIb3DQEBBAUAA0EALA+gVZDyjk4+qL7zAEV8esMX38X5QKGXHxBdd6K1+xApnSU79bRCWI9xU+HZ4rRhRJgtOdGQ1qfc9/WfvWXcYw==\"/&gt;\n                &lt;/identity&gt;\n            &lt;/endpoint&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":852,"score":3,"question_id":2838026,"title":"WCF: Proxy open and close - whaaa?","body":"<p>I am maintaing a Windows Forms application using WCF and are using Net.TCP internally.  The lifecycle of our connections is GET/USE/CLOSE.</p>\n\n<p>We are having a problem with the application pool crashing with no trace.  In looking at netstat, I can see when I come into the application as we have a login service.  However, even though we are creating the proxy in a using statement, the connection in netstat does not go away until I physically close the application.</p>\n\n<p>Is this right?  Should I be doing something different on the client to force the connection to close?  </p>\n\n<p>So if the connection stays open, does it stay open for the duration of the <code>openTimeout</code> setting and then gets torn down?</p>\n"},{"tags":[".net","asp.net","visual-studio","wcf"],"answer_count":7,"favorite_count":5,"up_vote_count":22,"down_vote_count":0,"view_count":16131,"score":22,"question_id":169342,"title":"Why isn't my custom WCF behavior extension element type being found?","body":"<p>I have a solution that contains two projects. One project is an ASP.NET Web Application Project, and one is a class library. The web application has a project reference to the class library. Neither of these is strongly-named.</p>\n\n<p>In the class library, which I'll call \"Framework,\" I have an endpoint behavior (an IEndpointBehavior implementation) and a configuration element (a class derived from BehaviorExtensionsElement). The configuration element is so I can attach the endpoint behavior to a service via configuration.</p>\n\n<p>In the web application, I have an AJAX-enabled WCF service. In web.config, I have the AJAX service configured to use my custom behavior. The system.serviceModel section of the configuration is pretty standard and looks like this:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n &lt;behaviors&gt;\n  &lt;endpointBehaviors&gt;\n   &lt;behavior name=\"MyEndpointBehavior\"&gt;\n    &lt;enableWebScript /&gt;\n    &lt;customEndpointBehavior /&gt;\n   &lt;/behavior&gt;\n  &lt;/endpointBehaviors&gt;\n &lt;/behaviors&gt;\n &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n &lt;services&gt;\n &lt;service name=\"WebSite.AjaxService\"&gt;\n  &lt;endpoint\n           address=\"\"\n           behaviorConfiguration=\"MyEndpointBehavior\"\n           binding=\"webHttpBinding\"\n           contract=\"WebSite.AjaxService\" /&gt;\n  &lt;/service&gt;\n &lt;/services&gt;\n &lt;extensions&gt;\n  &lt;behaviorExtensions&gt;\n   &lt;add\n       name=\"customEndpointBehavior\"\n       type=\"Framework.MyBehaviorExtensionsElement, Framework, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\"/&gt;\n  &lt;/behaviorExtensions&gt;\n &lt;/extensions&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>At runtime, this works perfectly. The AJAX enabled WCF service correctly uses my custom configured endpoint behavior.</p>\n\n<p>The problem is when I try to add a new AJAX WCF service. If I do Add -> New Item... and select \"AJAX-enabled WCF Service,\" I can watch it add the .svc file and codebehind, but when it gets to updating the web.config file, I get this error:</p>\n\n<blockquote>\n  <p>The configuration file is not a valid configuration file for WCF Service Library.</p>\n  \n  <p>The type 'Framework.MyBehaviorExtensionsElement, Framework, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' registered for extension 'customEndpointBehavior' could not be loaded.</p>\n</blockquote>\n\n<p>Obviously the configuration is entirely valid since it works perfectly at runtime. If I remove the  element from my behavior configuration temporarily and then add the AJAX-enabled WCF Service, everything goes without a hitch.</p>\n\n<p>Unfortunately, in a larger project where we will have multiple services with various configurations, removing all of the custom behaviors temporarily is going to be error prone. While I realize I could go without using the wizard and do everything manually, not everyone can, and it'd be nice to be able to just use the product as it was meant to be used - wizards and all.</p>\n\n<p><strong>Why isn't my custom WCF behavior extension element type being found?</strong></p>\n\n<p>Updates/clarifications:</p>\n\n<ul>\n<li>It does work at runtime, just not design time.</li>\n<li>The Framework assembly is in the web project's bin folder when I attempt to add the service.</li>\n<li>While I could add services manually (\"without configuration\"), I need the out-of-the-box item template to work - that's the whole goal of the question.</li>\n<li>This issue is being seen in Visual Studio 2008. <strong>In VS 2010 this appears to be resolved.</strong></li>\n</ul>\n\n<p><a href=\"https://connect.microsoft.com/wcf/feedback/ViewFeedback.aspx?FeedbackID=386511\" rel=\"nofollow\">I filed this issue on Microsoft Connect</a> and it turns out you either have to put your custom configuration element in the GAC or put it in the IDE folder. They won't be fixing it, at least for now. I've posted the workaround they provided as the \"answer\" to this question.</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12951980,"title":"RESTFul WCF Service C#.Net","body":"<p>I'm trying to make a simple RESTFul WCF service. </p>\n\n<p>This is my Interface</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.ServiceModel.Web;\nusing System.Text;\n\nnamespace RestService\n{\n    [ServiceContract]\n    public interface IRestServiceImpl\n    {\n\n        [OperationContract]\n        [WebInvoke(Method = \"GET\",\n            ResponseFormat = WebMessageFormat.Xml,\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            UriTemplate = \"xml/{id}\")]\n        string XMLData(string id);\n\n        [OperationContract]\n        [WebInvoke(Method = \"GET\",\n            ResponseFormat = WebMessageFormat.Json,\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            UriTemplate = \"json/{id}\")]\n        string JSONData(string id);\n    }\n}\n</code></pre>\n\n<p>And my class which implements this interface</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Serialization;\nusing System.ServiceModel;\nusing System.Text;\n\nnamespace RestService\n{\n    public class RestServiceImpl : IRestServiceImpl\n    {\n        #region IRestService Members\n\n        public string XMLData(string id)\n        {\n            return \"Requested XML: \" + id; \n        }\n\n        public string JSONData(string id)\n        {\n            return \"Requested JSON: \" + id;\n        }\n        #endregion\n    }\n}\n</code></pre>\n\n<p>And this is my Web.config</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.extensions\" type=\"System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;sectionGroup name=\"scripting\" type=\"System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n        &lt;section name=\"scriptResourceHandler\" type=\"System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;\n        &lt;sectionGroup name=\"webServices\" type=\"System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n          &lt;section name=\"jsonSerialization\" type=\"System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"Everywhere\" /&gt;\n          &lt;section name=\"profileService\" type=\"System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\" /&gt;\n          &lt;section name=\"authenticationService\" type=\"System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\" /&gt;\n          &lt;section name=\"roleService\" type=\"System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\" /&gt;\n        &lt;/sectionGroup&gt;\n      &lt;/sectionGroup&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n  &lt;appSettings/&gt;\n  &lt;connectionStrings/&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\"/&gt;\n        &lt;add assembly=\"System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\"/&gt;\n        &lt;add assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n        &lt;add assembly=\"System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\"/&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;!--\n        The &lt;authentication&gt; section enables configuration \n        of the security authentication mode used by \n        ASP.NET to identify an incoming user. \n    --&gt;\n    &lt;authentication mode=\"Windows\" /&gt;\n    &lt;!--\n        The &lt;customErrors&gt; section enables configuration \n        of what to do if/when an unhandled error occurs \n        during the execution of a request. Specifically, \n        it enables developers to configure html error pages \n        to be displayed in place of a error stack trace.\n\n        &lt;customErrors mode=\"RemoteOnly\" defaultRedirect=\"GenericErrorPage.htm\"&gt;\n         &lt;error statusCode=\"403\" redirect=\"NoAccess.htm\" /&gt;\n         &lt;error statusCode=\"404\" redirect=\"FileNotFound.htm\" /&gt;\n        &lt;/customErrors&gt;\n    --&gt;\n    &lt;pages&gt;\n      &lt;controls&gt;\n        &lt;add tagPrefix=\"asp\" namespace=\"System.Web.UI\" assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n        &lt;add tagPrefix=\"asp\" namespace=\"System.Web.UI.WebControls\" assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n\n    &lt;httpHandlers&gt;\n      &lt;remove verb=\"*\" path=\"*.asmx\"/&gt;\n      &lt;add verb=\"*\" path=\"*.asmx\" validate=\"false\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n      &lt;add verb=\"*\" path=\"*_AppService.axd\" validate=\"false\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n      &lt;add verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" validate=\"false\"/&gt;\n    &lt;/httpHandlers&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"ScriptModule\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n  &lt;system.codedom&gt;\n    &lt;compilers&gt;\n      &lt;compiler language=\"c#;cs;csharp\" extension=\".cs\" warningLevel=\"4\"\n                type=\"Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"&gt;\n        &lt;providerOption name=\"CompilerVersion\" value=\"v3.5\"/&gt;\n        &lt;providerOption name=\"WarnAsError\" value=\"false\"/&gt;\n      &lt;/compiler&gt;\n    &lt;/compilers&gt;\n  &lt;/system.codedom&gt;\n  &lt;!-- \n      The system.webServer section is required for running ASP.NET AJAX under Internet\n      Information Services 7.0.  It is not necessary for previous version of IIS.\n  --&gt;\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;\n    &lt;modules&gt;\n      &lt;remove name=\"ScriptModule\" /&gt;\n      &lt;add name=\"ScriptModule\" preCondition=\"managedHandler\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n    &lt;/modules&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"WebServiceHandlerFactory-Integrated\"/&gt;\n      &lt;remove name=\"ScriptHandlerFactory\" /&gt;\n      &lt;remove name=\"ScriptHandlerFactoryAppServices\" /&gt;\n      &lt;remove name=\"ScriptResource\" /&gt;\n      &lt;add name=\"ScriptHandlerFactory\" verb=\"*\" path=\"*.asmx\" preCondition=\"integratedMode\"\n           type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n      &lt;add name=\"ScriptHandlerFactoryAppServices\" verb=\"*\" path=\"*_AppService.axd\" preCondition=\"integratedMode\"\n           type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n      &lt;add name=\"ScriptResource\" preCondition=\"integratedMode\" verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;/handlers&gt;\n    &lt;!--\n        To browse web app root directory during debugging, set the value below to true.\n        Set to false before deployment to avoid disclosing web app folder information.\n      --&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding appliesTo=\"v2.0.05727\" xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Extensions\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-1.1.0.0\" newVersion=\"3.5.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Extensions.Design\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-1.1.0.0\" newVersion=\"3.5.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"RestService.Service1Behavior\"\n        name=\"RestService.Service1\"&gt;\n        &lt;endpoint address=\"\" binding=\"webHttpBinding\" contract=\"RestService.IService1\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n      &lt;service behaviorConfiguration=\"RestService.RestServiceImplBehavior\"\n        name=\"RestService.RestServiceImpl\"&gt;\n        &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"RestService.IRestServiceImpl\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"RestService.Service1Behavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"RestService.RestServiceImplBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>When I'm starting this service in my browser, I can see the <code>.svc file</code> and the <code>wsdl file</code> from this URL <code>http://localhost:55149/RestServiceImpl.svc</code>, but when I try to go to </p>\n\n<p><code>http://localhost:55149/RestServiceImpl.svc/xml/123</code> or <code>http://localhost:55149/RestServiceImpl.svc/json/123</code> </p>\n\n<p>There is nothing outputted to the browser. On the other hand, if I test this with the <code>WCF Test Client</code>, adding some value, E.G <code>123</code> the Output from the XML will be</p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;s:Header /&gt;\n  &lt;s:Body&gt;\n    &lt;XMLDataResponse xmlns=\"http://tempuri.org/\"&gt;\n      &lt;XMLDataResult&gt;Requested XML: 123&lt;/XMLDataResult&gt;\n    &lt;/XMLDataResponse&gt;\n  &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p>What am I doing wrong here? </p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["wcf","wcf-binding","wshttpbinding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12951763,"title":"Maximum request length exceeded in WCF","body":"<p>I am currently using Wcf application and getting above mentiooned error in Trace Log.</p>\n\n<p>Below is the Web.Config for Wcf Service.</p>\n\n<pre><code>&lt;bindings&gt;\n          &lt;wsHttpBinding&gt;\n              &lt;binding name=\"NewBinding0\" closeTimeout=\"00:50:00\" openTimeout=\"00:50:00\" sendTimeout=\"00:50:00\" receiveTimeout=\"00:50:00\" maxReceivedMessageSize=\"2147483647\" maxBufferPoolSize=\"2147483647\"&gt;\n                  &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n                  &lt;reliableSession enabled=\"true\" /&gt;\n                  &lt;security mode=\"None\"&gt;\n                      &lt;transport clientCredentialType=\"None\" /&gt;\n                      &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\" establishSecurityContext=\"false\" /&gt;\n                  &lt;/security&gt;\n              &lt;/binding&gt;\n          &lt;/wsHttpBinding&gt;\n      &lt;/bindings&gt;       \n\n&lt;diagnostics wmiProviderEnabled=\"true\"&gt;\n  &lt;messageLogging logEntireMessage=\"true\" logMalformedMessages=\"true\" logMessagesAtServiceLevel=\"true\" logMessagesAtTransportLevel=\"true\" /&gt;\n&lt;/diagnostics&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"DBSyncWcfService.Service1Behavior\" name=\"DBSyncWcfService.DBSyncService\"&gt;\n    &lt;endpoint binding=\"wsHttpBinding\" bindingConfiguration=\"NewBinding0\" name=\"ABC\" contract=\"DBSyncWcfService.IDBSyncContract\" address=\"http://192.168.5.170:9999/\" /&gt;\n    &lt;host&gt;\n      &lt;baseAddresses&gt;\n</code></pre>\n\n<p>\n          \n        \n      \n    \n    </p>\n\n<p>Below is the Client side Configuration. </p>\n\n<pre><code>        WSHttpBinding binding = new WSHttpBinding();\n        //binding.ReaderQuotas.MaxArrayLength = 10485760;\n\n        //binding.MaxReceivedMessageSize = 10485760;\n        binding.Security.Mode = SecurityMode.None;\n        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;\n        binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;\n        binding.Security.Message.EstablishSecurityContext = false;\n        //binding.Security.Message.NegotiateServiceCredential = true;\n        binding.ReliableSession.Enabled = true;\n        binding.ReaderQuotas.MaxArrayLength = 2147483647;\n        binding.ReaderQuotas.MaxDepth = 2147483647;\n        binding.ReaderQuotas.MaxNameTableCharCount = 2147483647;\n        binding.ReaderQuotas.MaxBytesPerRead = 2147483647;\n        //binding.MaxReceivedMessageSize = 20000000;2147483647\n        binding.MaxReceivedMessageSize = 2147483647;\n        //binding.MaxReceivedMessageSize = Int32.MaxValue;\n        binding.ReaderQuotas.MaxStringContentLength = 2147483647; \n\n        //binding.MaxBufferPoolSize = 20000000;\n        binding.MaxBufferPoolSize = 2147483647;\n\n        //binding.MaxBufferPoolSize = Int32.MaxValue;\n        binding.ReaderQuotas.MaxArrayLength = 2147483647;\n        binding.ReaderQuotas.MaxDepth = 2147483647;\n        binding.SendTimeout = TimeSpan.FromMinutes(50);\n        binding.CloseTimeout = TimeSpan.FromMinutes(50);\n        binding.OpenTimeout = TimeSpan.FromMinutes(50);\n        binding.ReceiveTimeout = TimeSpan.FromMinutes(50);\n</code></pre>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":12951985,"title":"Return Data in xml or json format from WCF Service","body":"<p>how should i do it, should i create extra Operation Contract for that, but how will it reconize which one it should invoke</p>\n"},{"tags":["c#","wcf","silverlight-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12948408,"title":"How to access a C# Class library event from Silverlight application?","body":"<p>Iam creating a application it is  a pub/sub model with silverligh as UI layer and C# class library which will read the rfid signal form a device and have to redirect to the UI and I have done this with a WCF Service layer.Now my requirement is have to eliminate the service layer and have to directly connect to the UI layer.So I have tried to change class library to silverlight class library but the supporting DLLs for the device driver are not build on the silverlight runtime.\nAny Idea/Suggestion to access those methods.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12949629,"title":"Sending username and password in a webservice call","body":"<p>I have created a wbservice. In the webservice I have created a method to send an acknowledgement. For sending the acknowledgement I have provided the link of the url in my web.config file as below:-</p>\n\n<pre><code>&lt;applicationSettings&gt;\n &lt;ABCD.Properties.Settings&gt;\n &lt;setting name=\"Servicename\"\nserializeAs=\"String\"&gt;\n  &lt;value&gt;http://10.237.1.1/X/Y/Z&lt;/value&gt;\n &lt;/setting&gt;\n  &lt;/ABCD.Properties.Settings&gt;\n  &lt;/applicationSettings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>But when I am running my webservice then I am getting the error as:- The request failed with HTTP status 401: Unauthorized. \nIs it that I have to provide the username and password while sending the acknowledgement. If yes then please tell me how is it possible?</p>\n"},{"tags":["wcf","routing","wcf-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12950403,"title":"WCF routing and various endpoints","body":"<p>I have a little problem and don't know where to start.</p>\n\n<p>I need to make a subscribtion service and if returns unique address on which consumer will send soaps after subscription. It works like so : you send a SOAP on address <a href=\"http://foo.org/Subscribe\" rel=\"nofollow\">http://foo.org/Subscribe</a> and in response you get address <a href=\"http://foo.org/SubscriptionManager/1\" rel=\"nofollow\">http://foo.org/SubscriptionManager/1</a>, the next consumer will get <a href=\"http://foo.org/SubscriptionManager/2\" rel=\"nofollow\">http://foo.org/SubscriptionManager/2</a> etc. </p>\n\n<p>How can i emplement that via WCF? I guesed that WCF have something like ASP.Net Routing, where i could route links like  <a href=\"http://foo.org/SubscriptionManager/\" rel=\"nofollow\">http://foo.org/SubscriptionManager/</a> and access 2 as a parameter, but i haven't found something like that.</p>\n\n<p>I look forward to any help.</p>\n"},{"tags":["c#","visual-studio-2010","wcf","windows-services"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":163,"score":2,"question_id":12750413,"title":"Consuming a WCF Service that is hosted in a Windows Service from outside solution","body":"<p>I've set up a WCF Library hosted in a Windows Service using the following walk-through:</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ff649818.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ff649818.aspx</a></p>\n\n<p>The consumer winforms is in the same solution, which is located locally on my work PC's C: drive.</p>\n\n<p>The walk-through works i.e. the winforms button gives me the correct answer.</p>\n\n<p>If I create a new Solution on the C-Drive with a single Windows Forms project in it I cannot successfully add a <code>service reference</code> to this running service, i get the following message:</p>\n\n<p><img src=\"http://i.stack.imgur.com/OoZJe.png\" alt=\"enter image description here\"> </p>\n\n<p>The detailed message says the following:</p>\n\n<blockquote>\n  <p>The URI prefix is not recognized. Metadata contains a reference that\n  cannot be resolved: 'net.tcp://localhost:8526/Service1'. Could not\n  connect to net.tcp://localhost:8526/Service1. The connection attempt\n  lasted for a time span of 00:00:02.0020000. TCP error code 10061: No\n  connection could be made because the target machine actively refused\n  it 127.0.0.1:8526.  No connection could be made because the target\n  machine actively refused it 127.0.0.1:8526 If the service is defined\n  in the current solution, try building the solution and adding the\n  service reference again.</p>\n</blockquote>\n\n<p>Why can I add this Service Reference ok to a project within the same Solution as the Service but not from a project in a different solution?</p>\n\n<hr>\n\n<p><strong>EDIT</strong>  </p>\n\n<p><strong>My colleague found an error in the MSDN article - I have detailed his find <a href=\"http://stackoverflow.com/questions/12761107/an-error-in-the-msdn-walk-through-how-to-host-wcf-in-a-windows-service-using\">HERE</a></strong></p>\n"},{"tags":["wcf","wcf-client"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12949894,"title":"Unable to invoke WCF Service method from remote machine","body":"<p>We created WCF Service and hosted in IIS in a specific machine.\nWCF Client is hosted in some other machine which is there in the same LAN.</p>\n\n<p>We were able invoke it. Suddently it started giving error. It is throwing some Timeout exception.</p>\n\n<p>Please tell me the possible scenarios to get this kind of errors. If the WCF Client and WCF Service both are in the same machine, then it is not throwing any error.</p>\n"},{"tags":["wcf","web-services","wcf-binding","wcf-behaviour"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12950439,"title":"SoapUI get response but not the .Net Client","body":"<p>I am trying to access a https Java webservice from .net client but always end up with \"504 Gateway Timeout\" exception.</p>\n\n<p>I could get the response from the same webservice using SoapUI.</p>\n\n<p>I also noticed that the request soap message of SoapUI and .net client aren't similar. My question is, does the wrong format of message gives the \"504 Gateway Timeout\" problem ? if yest, How could i modify the soap message in .net client?</p>\n\n<p>Here are the request soap message that two different app generates:</p>\n\n<p>SoapUI</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:v1=\"http://company.domain.com/EchoService/v1_00\"&gt;\n       &lt;soapenv:Header/&gt;\n       &lt;soapenv:Body&gt;\n          &lt;v1:Echo&gt;test&lt;/v1:Echo&gt;\n       &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>.NET client</p>\n\n<pre><code>{&lt;s:Envelope xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\"&gt;\n  &lt;s:Header&gt;\n    &lt;a:Action s:mustUnderstand=\"1\"&gt;Echo&lt;/a:Action&gt;\n    &lt;a:MessageID&gt;urn:uuid:7a76925d-5bf0-4f2d-a9c5-c5a026e1eefb&lt;/a:MessageID&gt;\n    &lt;a:ReplyTo&gt;\n      &lt;a:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:Address&gt;\n    &lt;/a:ReplyTo&gt;\n  &lt;/s:Header&gt;\n  &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n    &lt;Echo xmlns=\"http://company.domain.com/EchoService/v1_00\"&gt;test&lt;/Echo&gt;\n  &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;}\n</code></pre>\n"},{"tags":["json","wcf","entity-framework","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":592,"score":2,"question_id":10930199,"title":"Endpoint not found WCF","body":"<p>I have WCF library that I hosted , the login function work well, but the second function ReturnCounter</p>\n\n<p>the interface is : </p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\n\nusing System.ServiceModel;\nusing System.ServiceModel.Web;\n\nnamespace PMAService\n{\n    [ServiceContract]\n    public interface IPMA\n    {\n        [OperationContract]\n        string Login(string username, string password);\n\n        [OperationContract]\n        List&lt;usp_ReturnEncounter_Result&gt; ReturnEncounter();\n\n\n\n    }\n}\n</code></pre>\n\n<p>and the code is </p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.ServiceModel.Web;\nusing System.Security.Cryptography;\nusing System.Web.Security;\n\nnamespace PMAService\n{\n    public class PMA : IPMA\n    {\n\n        [WebInvoke(Method = \"GET\",\n   ResponseFormat = WebMessageFormat.Json,\n   UriTemplate = \"LogIn/{username}/{password}\")]\n        public string Login(string username, string password)\n        {\n            if (Membership.ValidateUser(username, password))\n                return \"true\";\n            else\n                return \"false\";\n        }\n\n        // Method to retrieve the Counter \n        [WebInvoke(Method = \"GET\",\nResponseFormat = WebMessageFormat.Json,\nUriTemplate = \"ReturnEncounter\")]\n        public List&lt;usp_ReturnEncounter_Result&gt; ReturnEncounter()\n        {\n            using (PMAEntities context = new PMAEntities())\n            {\n              return   context.usp_ReturnEncounter().ToList();\n            }\n        }\n\n    }\n}\n</code></pre>\n\n<p>where I connect to Entity framework </p>\n\n<p>the web.config look like </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;appSettings/&gt;\n  &lt;connectionStrings&gt;\n&lt;/connectionStrings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"/&gt;\n    &lt;roleManager enabled=\"true\" /&gt;\n    &lt;membership&gt;\n      &lt;providers&gt;\n        &lt;remove name=\"AspNetSqlMembershipProvider\"/&gt;\n        &lt;add name=\"AspNetSqlMembershipProvider\"\n             type=\"System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\"\n             connectionStringName=\"Login\"\n             enablePasswordRetrieval=\"false\"\n             enablePasswordReset=\"true\"\n             requiresQuestionAndAnswer=\"false\"\n             applicationName=\"/\"\n             requiresUniqueEmail=\"false\"\n             passwordFormat=\"Hashed\"\n             maxInvalidPasswordAttempts=\"5\"\n             minRequiredPasswordLength=\"1\"\n             minRequiredNonalphanumericCharacters=\"0\"\n             passwordAttemptWindow=\"10\"\n             passwordStrengthRegularExpression=\"\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n\n    &lt;authentication mode=\"Windows\"/&gt;\n    &lt;customErrors mode=\"On\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"PMAService.PMA\"&gt;\n        &lt;endpoint binding=\"webHttpBinding\" contract=\"PMAService.IPMA\" behaviorConfiguration=\"web\"&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"web\"&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;startup&gt;\n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>the login/x/y work well, while ReturnCounter give the error endpoint not found </p>\n\n<p>any idea to fix that please </p>\n"},{"tags":["wcf","azure","rackspace"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12948785,"title":"Host WCF service from Azure cloud to Rackspace IIS","body":"<p>I have one WCF service running on Azure Cloud on WS2007FederationHttpBinding binding.\nWhat I would need to do if I want this WCF service to be ported back to rackspace server?\nI want ot run it on IIS of rackspace\nI am not that comfortable with hosting and configuring WCF services. </p>\n"},{"tags":["asp.net",".net","wcf","web-services","serialization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":12947438,"title":"WCF Service contract to be both XML and Json serialized","body":"<p>In a WCF web service ho can I achieve the service contract to be in <strong>XmlSerializerFormat</strong> as well as <strong>WebMessageFormat.Json</strong></p>\n\n<p>What I need is to call the \"CallADSWebMethod\" operation contract from code behind of ASP.Net 1.1 which needs to be XML serialized and\nfrom jQuery ajax which is Json serialized.</p>\n\n<p>SERVICE CONTRACT</p>\n\n<pre><code>[ServiceContract, XmlSerializerFormat]\n    public interface IService\n    {\n        [OperationContract, XmlSerializerFormat]\n        [WebInvoke(UriTemplate = \"/CallADSWebMethod\",\n                   Method = \"POST\",\n                   BodyStyle = WebMessageBodyStyle.WrappedRequest,\n                   ResponseFormat = WebMessageFormat.Json)]\n        VINDescription CallADSWebMethod(string vin, string styleID);\n    }\n</code></pre>\n\n<p><strong>Endpoint Info</strong></p>\n\n<pre><code>&lt;endpoint address=\"basic\"\n                  binding=\"basicHttpBinding\"\n                  name=\"httpEndPoint\"\n                  contract=\"ADSChromeVINDecoder.IService\"/&gt;\n        &lt;endpoint address=\"json\"\n                  binding=\"webHttpBinding\"\n                  behaviorConfiguration=\"webBehavior\"\n                  name=\"webEndPoint\"\n                  contract=\"ADSChromeVINDecoder.IService\"/&gt;\n        &lt;endpoint contract=\"IMetadataExchange\"\n                  binding=\"mexHttpBinding\"\n                  address=\"mex\" /&gt;\n</code></pre>\n"},{"tags":["wcf","iis","certificate"],"answer_count":8,"favorite_count":5,"up_vote_count":21,"down_vote_count":0,"view_count":18740,"score":21,"question_id":1742938,"title":"WCF : Could not establish trust relationship for the SSL/TLS secure channel with authority - back to the drawing board","body":"<p>Really thought I had this issue fixed, but it was only disguised before. </p>\n\n<p>I have a WCF service hosted in IIS 7 using HTTPS. When I browse to this site in internet explorer, it works like a charm, this is because I HAVE added the certificate to the local root certificate authority store. </p>\n\n<p>I'm developing on 1 machine, so client and server are same machine. The certificate is self-signed directly from IIS 7 management snap in.</p>\n\n<p>I continually get this error now:</p>\n\n<p>Could not establish trust relationship for the SSL/TLS secure channel with authority.... when called from client console.</p>\n\n<p>I manually gave myself permissions and network service to the certificate, using findprivatekey and using cacls.exe </p>\n\n<p>Where else can I look I seem to have exhausted all possibilities as to why I can't connect.</p>\n\n<p><strong>**UPDATE **</strong></p>\n\n<p>thanks for answers so far, I tried to connect to the service using SOAPUI, and that works, so it must be an issue in my client application, which is code based on what used to work with http.... wonder what the issue is....</p>\n"},{"tags":["wcf",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12944210,"title":"There was no endpoint listening at http://","body":"<p>I have a Windows forms app which uses WCF services. Our application sends messages using one of our WCF services to specific users running our client, so our callback http: string is dynamically constructed each time a message is sent to a user. It includes the server IP address and port (126.221.97.105:701) onto which the current user is logged, the users id (56281), and the client GUID (7392d27a-e4a0-42e2-89a3-adc332e28934). So, a typical callback http: string looks like this:</p>\n\n<pre><code>http://xxx.xxx.xx.xxx:701/CmesCns/CALLBACK/56281/7392d27a-e4a0-42e2-89a3-adc332e28934\n</code></pre>\n\n<p>We have an http namespace (http://+:701/) on our client and the group Everyone is tied to this namespace with all of the access permissions checked (GenericAll, GenericExecute, GenericRead, and GenericWrite). We use http namespace to create our namespaces.</p>\n\n<p>Our application has been in production (on Windows Server 2003) for a few years and everything is working fine.</p>\n\n<p>We have recently converted our application to run in the Windows 2008 server environment. The Target Framework in each of our projects is set to the .NET Framework 4.0.  Our application works fine on my Windows 7 developer workstation. That is, I am able to receive messages from our WCF service, but when I place our application onto our Windows 2008 server and I attempt to run the application, I receive the following error message:</p>\n\n<p>\"There was no endpoint listening at                              <a href=\"http://xxx.xxx.xx.xxx:701/CmesCns/CALLBACK/56281/7392d27a-e4a0-42e2-89a3-adc332e28934\" rel=\"nofollow\">http://xxx.xxx.xx.xxx:701/CmesCns/CALLBACK/56281/7392d27a-e4a0-42e2-89a3-adc332e28934</a> \nthat could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.</p>\n\n<p>The http namespace (http://+:701/) exists on my developer workstation and on my Windows 2008 server. The group Everyone is tied the namespace on my Windows 7 box and on my Windows 2008 server, and all of the access permissions are checked (GenericAll, GenericExecute, GenericRead, and GenericWrite).</p>\n\n<p>We have been searching the web for an answer but have not discovered anything. Would anybody have any ideas on why this would work on our Windows 7 workstations, but not on our Windows 2008 servers?</p>\n\n<p>Any help is greatly appreciated!\nKevin</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12947349,"title":"How to allow some specific IP address to access my WCF Service","body":"<p>I have one WCF Service returns xml. I want only one IP address to access it for eg: 10.0.0.5</p>\n\n<p>can some one tell me how can i do this. Please tell me other than Firewall and IIS</p>\n"},{"tags":[".net","wcf","windows-8","microsoft-metro"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":317,"score":2,"question_id":9255762,"title":"WCF references in Metro app (Dev 11/Windows 8)","body":"<p>I have the following configuration:</p>\n\n<p>A Windows Phone application (A) that references a Portable Class Library (B), which in turn works with a WCF service (C).  These three all work together with no issues.  The application (A) has no reference to the WCF service - all references to the WCF service are contained in the PCL (B).</p>\n\n<p>I am now attempting to create a Metro style app (D), which references the Portable Class Library (B) used in the prior (functional) application as a project reference.  There is no reference to the WCF service in application (D), since (as was the case with app A) this is all abstracted out inside of the Portable Class Library (B).</p>\n\n<p>Unfortunately, I promptly get an error \"Could not find default endpoint element that references contract 'WCFService.IService' in the ServiceModel client configuration section' when I attempt to run app D.  The error appears inside of PCL (B) at the point that my ServiceClient is newed up.</p>\n\n<p>I have been googling this for a while now with no luck, since most solutions are geared towards non-Metro apps (and my app works fine with WP7 and Studio 2010).  Any suggestions would be greatly appreciated!</p>\n"},{"tags":["wcf","c#-4.0","windows-8","firewall",".net-4.5"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":190,"score":3,"question_id":12703265,"title":"\"The remote server returned an error: (417) Expectation Failed.\"","body":"<p>i'm writing windows 8 app.(on Visiual Studio 2012) which uses my wcf service. It works well when i try at my home, so it can connect to the wcf. But when i tried at my office, it cannot connect to wcf and returns error : </p>\n\n<blockquote>\n  <p>The remote server returned an error: (417) Expectation Failed.</p>\n</blockquote>\n\n<p>I think its causing by firewall in the office network.. \nGoogled too much, tried a lot of however the problem still here.</p>\n\n<pre><code>System.Net.ServicePointManager.Expect100Continue = false;\n</code></pre>\n\n<p>Doesn't work because .Net Framework 4.5 has not ServicePointManager Class but msdn says there is ServicePointManager on .Net 4.5..\n<a href=\"http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx</a></p>\n\n<pre><code>&lt;system.net&gt;\n    &lt;settings&gt;\n        &lt;servicePointManager expect100Continue=\"false\" /&gt;\n    &lt;/settings&gt;\n&lt;/system.net&gt;\n</code></pre>\n\n<p>Cannot try this to write on web.config or app.config because win8 app has not these files..</p>\n\n<p>some people wrote above code to devenv.exe.config file of VS 2012. I tried it but nothing changed. </p>\n\n<p><a href=\"http://www.jlpaonline.com/?p=176\" rel=\"nofollow\">http://www.jlpaonline.com/?p=176</a></p>\n"},{"tags":["json","wcf","rest","jersey"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12924880,"title":"WCF JSON service using Java Jersey client - Error: OperationFormatter encountered an invalid Message body","body":"<p>I am trying to invoke a WCF method from my java client (using jersey) but I am getting the below error in the service log whenever I try to invoke the service.</p>\n\n<p>OperationFormatter encountered an invalid Message body. Expected to find an attribute with name 'type' and value 'object'. Found value 'string'. </p>\n\n<p>I am not sure if I am passing the values to the service in correct format..</p>\n\n<p>The service accepts 2 parameters (object object1, boolean commit), I am passing the value in json format as below,</p>\n\n<p>Service :</p>\n\n<pre><code>[OperationContract]\n        [FaultContract(typeof(SLFault))]\n        [WebInvoke]\n        public string InsertObject(object object1, bool commit)\n</code></pre>\n\n<p>json input:</p>\n\n<pre><code>{commit=[true], object1=[{\"infoObjectParams\":{\"DynamicFields\":{\"idx_Indicator\":[\"Yes\"]},\"Name\":\"Test\",additionalProperties\":{}}}]}\n</code></pre>\n\n<p>But I am always getting the above error, can someone please helpe me fix my issue?</p>\n\n<p>Thanks,\nBB</p>\n"},{"tags":["c#","wcf","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12945665,"title":"Clarification about List<T> and WCF","body":"<p>I'm fairly new to WCF's and would like a bit of clarification. I'm attempting to return a <code>List&lt;T&gt;</code> from my WCF but I get an error when I try to consume it. Cannot conver <code>T[]</code> to a type of <code>List&lt;T&gt;</code>. Sample Below.</p>\n\n<p><strong>Question:</strong> Is this because WCF's can be consumed by multiple technologies and converts to an array? </p>\n\n<p>Interface:</p>\n\n<pre><code>[ServiceContract]\npublic interface I_UI_Service\n{\n    [OperationContract]\n    List&lt;Site&gt; Get_Sites(string ntid);\n}\n\n[DataContract]\n[Serializable]\npublic class Site\n{\n    public Site(int id, string description)\n    {\n        this.ID = id;\n        this.Description = description;\n    }\n\n    [DataMember]\n    public int ID { get; set; }\n\n    [DataMember]\n    public string Description { get; set; }\n}\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>    public List&lt;Site&gt; Get_Sites(string ntid)\n    {\n        List&lt;Site&gt; returnList = new List&lt;Site&gt;();\n        using (SqlCommand cmd = new SqlCommand())\n        {\n            cmd.CommandType = CommandType.StoredProcedure;\n            cmd.CommandText = \"SPROC_Name\";\n            cmd.Parameters.AddWithValue(\"@NTID\", ntid);\n            using (SqlConnection conn = new SqlConnection(DB_ConnectionString()))\n            {\n                cmd.Connection = conn;\n                conn.Open();\n                SqlDataReader reader = cmd.ExecuteReader();\n\n                while (reader.Read())\n                {\n                    returnList.Add(new Site(Convert.ToInt16(reader[\"SiteID\"]), reader[\"SiteDescription\"].ToString()));\n                }\n                conn.Close();\n            }\n        }\n        return returnList;\n    }\n</code></pre>\n\n<p>Consuption using List: (Error)</p>\n\n<pre><code>    List&lt;Site&gt; _Sites;\n\n    public List&lt;Site&gt; Sites\n    {\n        get\n        {\n            if (_Sites == null)\n            {\n                UI_Data.I_UI_ServiceClient sc = new UI_Data.I_UI_ServiceClient();\n                _Sites = sc.Get_Sites(\"MyInfo\");\n            }\n            return _Sites;\n        }\n    }\n</code></pre>\n\n<p>Consuption using T[ ]: (Makes it work and why my question)</p>\n\n<pre><code>    Site[] _Sites;\n\n    public Site[] Sites\n    {\n        get\n        {\n            if (_Sites == null)\n            {\n                UI_Data.I_UI_ServiceClient sc = new UI_Data.I_UI_ServiceClient();\n                _Sites = sc.Get_Sites(\"MyInfo\");\n            }\n            return _Sites;\n        }\n    }\n</code></pre>\n"},{"tags":["asp.net","ajax","json","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12944998,"title":"Why am I not able to pass a JSON object to a WCF web service?","body":"<p>I built a fairly complex app using the older \"ASMX\" web service implementation and I am migrating to WCF.  There is one thing that is just driving me crazy - it <em>should</em> be easy but my AJAX calls error out no matter how I try to structure this call.  This worked fine with ASMX calls but not with WCF.</p>\n\n<p>Here is the AJAX call:</p>\n\n<pre><code>        var ProfileData = new Object();\n        ProfileData.SUID = SUID;\n        ProfileData.FirstName = $(\"#FirstName\").val();\n        ProfileData.LastName = $(\"#LastName\").val();\n        ProfileData.Birthdate = new Date($(\"#Birthdate\").val());\n        var DTO = {'ProfileData': ProfileData };\n\n        $.ajax({\n            type: \"POST\",\n            url: \"AllianceService.svc/SaveBasicProfile\",\n            data: JSON.stringify(DTO),\n            contentType: \"application/json; charset=utf-8\",\n            dataType: \"json\",\n            success: function (msg) {\n                    UpdateTips($(\"#BasicProfileValidate\"), \"Success! Your data has been updated.\");\n                }\n            },\n            error: function (xhr, ajaxOptions, thrownError, request, error) {\n                alert('Error Saving Basic Profile Data');\n            }\n        });\n</code></pre>\n\n<p>Here is the declaration of the type on the C# / Server side:</p>\n\n<pre><code>[DataContract]\npublic class BasicFolderData\n{\n    [DataMember]\n    public string SUID { get; set; }\n    [DataMember]\n    public string FirstName { get; set; }\n    [DataMember]\n    public string LastName { get; set; }\n    [DataMember]\n    public DateTime Birthdate { get; set; }\n}\n</code></pre>\n\n<p>And here is the definition of the service:</p>\n\n<pre><code>    [OperationContract]\n    public int SaveBasicProfile(BasicFolderData ProfileData)\n    {\n         ... do stuff\n    }\n</code></pre>\n\n<p>Now, if I break out all of the datamembers and use them as parameters, I can get this to work with a simple </p>\n\n<pre><code>    data: JSON.stringify(ProfileData)\n</code></pre>\n\n<p>But the object is actually much longer than this and I'd like to know how to pass objects.  </p>\n\n<p>Also, I have tried:</p>\n\n<pre><code>    data: JSON.stringify({\"ProfileData\": ProfileData }),\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    data: JSON.stringify('{\"ProfileData\":' + ProfileData + '}'),\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    data: '{\"ProfileData\":' + JSON.stringify(ProfileData)  + '}',\n</code></pre>\n\n<p>but all to no avail...I get the error message on all of them.</p>\n\n<p>If I use: </p>\n\n<pre><code>    data: JSON.stringify(ProfileData), \n</code></pre>\n\n<p>then, oddly enough, the request makes it to the server but the ProfileData parameter is null. I suspect that the problem is my datacontract but don't know where to start.  Also, I have a lot of functions with scalar parameters that work just fine - it is only when I attempt to pass objects that I fail.  Any help would be greatly appreciated!!</p>\n\n<p>Following DonAndre's suggestion, I have found that simply changing the parameter to a scalar type will make the call succeed.  However, the parameter is always null.</p>\n"},{"tags":[".net","wcf","datacontractserializer"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12945108,"title":"BindingList<T> as DataMember","body":"<p>I have a CLR-class that I want to send via a WCF service (Net TCP Binding). Both the client and server use the same data classes and service interfaces. There are no stubs generated. Here are the basic parts of two classes:</p>\n\n<pre><code>[DataContract]\npublic class ContainerClass\n{\n    //some primitive data with [DataMember] ...\n\n    [DataMember] /**/\n    public virtual BindingList&lt;ItemClass&gt; Items{ get; private set; }\n}\n\n[DataContract]\npublic class ItemClass\n{\n    //some primitive data with [DataMember] ...\n\n    public ContainerClass Parent { get; set; } // (no [DataMember])\n}\n</code></pre>\n\n<p>The data is correctly transmitted, if I omitt the <code>[DataMember]</code> attribute of the <code>BindingList</code> (marked with <code>/**/</code>). Of course, whithout the items.</p>\n\n<p>As soon as I add the <code>[DataMember]</code>, a call to the service method, which returns an object of type <code>ContainerClass</code> fails with the following error message:</p>\n\n<blockquote>\n  <p>The server did not provide a meaningful reply; this might be caused by a contract mismatch, a premature session shutdown or an internal server error.</p>\n</blockquote>\n\n<p>A contract mismatch is impossible by design. There is probably an internal server error of which I am not notified.</p>\n\n<p>How can I solve this problem and make the server send the items to the client?</p>\n"},{"tags":["wcf","iis","web-config","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12877178,"title":"WCF Binding in web.config gives HTTP-fejl 500.19 - Internal Server Error on Windows 7","body":"<p>I am deploying my site locally to the IIS on my Windows 7 machine, which has been working for a month now. All the necessary features are installed, ASP.NET is activated and so on. I also activated the WCF features.</p>\n\n<p>Now I am trying to host a WCF service. While running it in Visual Studio, it works perfectly (except for some other problems I already asked about on SO). However, on my IIS it gives the following IIS error:</p>\n\n<blockquote>\n  <p>HTTP-fejl 500.19 - Internal Server Error.</p>\n  \n  <p>: The requested page cannot be accessed because the related\n  configuration data for the page is invalid. Error Code: 0x80070005\n  Notification: BeginRequest Module: IIS Web Core Requested URL:\n  ... Physical Path:\n  ... Logon\n  User: Not yet determined Logon Method: Not yet determined Handler: Not\n  yet determined Config Error: Cannot read configuration file Config\n  File: ... Config\n  Source:</p>\n</blockquote>\n\n<p>Now, this is my web.config:</p>\n\n<pre><code>&lt;system.webServer&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"ServiceAspNetAjaxBehavior\"&gt;\n          &lt;enableWebScript /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service name=\"ForumOperationService\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"ServiceAspNetAjaxBehavior\"\n            binding=\"webHttpBinding\" contract=\"IForumOperationService\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;httpCompression directory=\"%SystemDrive%\\inetpub\\temp\\IIS Temporary Compressed Files\"&gt;\n      &lt;scheme name=\"gzip\" dll=\"%Windir%\\system32\\inetsrv\\gzip.dll\"/&gt;\n      &lt;dynamicTypes&gt;\n        &lt;add mimeType=\"text/*\" enabled=\"true\"/&gt;\n        &lt;add mimeType=\"message/*\" enabled=\"true\"/&gt;\n        &lt;add mimeType=\"application/javascript\" enabled=\"true\"/&gt;\n        &lt;add mimeType=\"*/*\" enabled=\"false\"/&gt;\n      &lt;/dynamicTypes&gt;\n      &lt;staticTypes&gt;\n        &lt;add mimeType=\"text/*\" enabled=\"true\"/&gt;\n        &lt;add mimeType=\"message/*\" enabled=\"true\"/&gt;\n        &lt;add mimeType=\"application/javascript\" enabled=\"true\"/&gt;\n        &lt;add mimeType=\"*/*\" enabled=\"false\"/&gt;\n      &lt;/staticTypes&gt;\n    &lt;/httpCompression&gt;\n    &lt;urlCompression doStaticCompression=\"true\" doDynamicCompression=\"true\"/&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;\n    &lt;handlers&gt;\n      &lt;remove verb=\"*\" path=\"*.asmx\"/&gt;\n      &lt;add verb=\"*\" path=\"*.asmx\" type=\"System.Web.Script.Services.ScriptHandlerFactory\" validate=\"false\"/&gt;\n      &lt;add name=\"AjaxToolkit\" verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n</code></pre>\n\n<p>And this is my WCF webservice test:</p>\n\n<pre><code>[ServiceBehavior(IncludeExceptionDetailInFaults = true)]\n[ServiceContract(Namespace = \"\")]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class ForumOperationService : IForumOperationService\n{\n\n    public string Horse(string prefixText, int count)\n    {\n        return \"hestWCF\";\n    }\n\n    public List&lt;SystemTagDTO&gt; GetTags(string prefixText, int count)\n    {\n        var dfasd = new List&lt;SystemTagDTO&gt;();\n        dfasd.Add(new SystemTagDTO() { Isvisible = true, Value = \"Aktant\" });\n        dfasd.Add(new SystemTagDTO() { Isvisible = true, Value = \"Beretter\" });\n        return dfasd;\n    }\n}\n</code></pre>\n\n<p>I can see that the error is removed when I remove the behaviours/services + handler entry.</p>\n\n<p>Now, my question is: Why does it work in VS 2012, and not on my local IIS? Should I somehow set the WCF service to be hosted on the IIS directly? And if so, how?</p>\n"},{"tags":["wcf",".net-4.0","jsonp"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":23,"score":0,"question_id":12944700,"title":"JSONP parsing error from WCF","body":"<p>Answered my own question</p>\n\n<p>I had a problem with a jquery (jsonp) call to a WCF service that was throwing a json parsing error. Using ASP.NET 4.0 on the WCF side and jquery 1.7 on the client side. Turned out there was an old set of script tags on the page using language = VBSCRIPT. The browser was interpreting the returned json packet of script as \"VBscript\" instead of javascript. I placed a set of empty javascript tags at the top of the page and the browser is now interpreting the json as the proper javascript function.</p>\n\n\n\n\n<p>Hope this helps someone else.\nTom</p>\n"},{"tags":["asp.net","wcf","silverlight","wcf-binding","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":221,"score":3,"question_id":12166587,"title":"WCF behind a public reverse proxy which is used for traffic encryption","body":"<p>I have a Silverlight application that connects to a WCF service. Under the basic configuration I am used to, there's no problem connecting this application to its corresponding WCF service. </p>\n\n<p>However, recently, one of my clients started using an Apache reverse proxy. This proxy is the public server and it's only used to encrypt HTTP traffic via SSL (HTTPS) going between the client and it. This proxy passes all traffic from it to the actual web server that hosts my application. The traffic between the public proxy and the IIS server is just plain HTTP.</p>\n\n<p><strong>So the traffic flows like this:</strong>\nEnd-User Browser ---HTTPS----> Public Reverse Proxy -----HTTP----> IIS server that hosts the WCF service.</p>\n\n<p>The reverse proxy and IIS are on two separate servers.</p>\n\n<p>I cannot get the Silverlight application to function properly. I am not sure how to configure the endpoints? I get problems whenever I use the public proxy's address as my endpoint address.</p>\n\n<p>The Silverlight application usually has this configuration:  </p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding name=\"BasicHttpBinding_IPOTemplateEditorSrv\" maxBufferSize=\"2147483647\"\n                    maxReceivedMessageSize=\"2147483647\"&gt;\n                    &lt;security mode=\"TransportWithMessageCredential\" /&gt;\n                &lt;/binding&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"https://public-reverse-proxy-url/POTemplateEditorSrv.svc\"\n                binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IPOTemplateEditorSrv\"\n                contract=\"POEditorSrvRef.IPOTemplateEditorSrv\" name=\"BasicHttpBinding_IPOTemplateEditorSrv\" /&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Note that I am using   and I have my endpoint address pointing to the public HTTPS address of the reverse proxy.</p>\n\n<p>Am I missing anything? Is there any additional information to configure the proxy perhaps? Any workarounds that would get my Silverlight client connect to the service?</p>\n"},{"tags":["c#","wcf","oracle","templates","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12944204,"title":"What is the best template for a WCF Oracle app?","body":"<p>I need to create a proof-of-concept app for querying our Oracle database via http/a browser (specifically, IE8 and IE9).</p>\n\n<p>What is the best starting point for this - the \"WCF REST Service Application\" template?</p>\n"},{"tags":[".net","wcf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":589,"score":1,"question_id":5114598,"title":"showing error while using the \"using\" statement in wcf application","body":"<p>I have following code</p>\n\n<pre><code> using  (AdventureWorksEntities database = new AdventureWorksEntities())\n</code></pre>\n\n<p>But it is showing that </p>\n\n<p>'New_WCF_App1.AdventureWorksEntities': type used in a using statement must be implicitly convertible to 'System.IDisposable'</p>\n\n<p>How to solve this   </p>\n"},{"tags":["c#","asp.net-mvc","wcf","caching","static"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12943823,"title":"static variables in class library used by two applications","body":"<p>I have an issue which I came across today which I am hoping someone may be able to to answer. I may be missing something and I don't have the code in front of me right now so am remembering this from memory.</p>\n\n<p>I have a .NET MVC web application which has two layers, a UI layer and a service layer (WCF service). The UI layer has a service reference to the WCF service. </p>\n\n<p>The UI layer caches some data into static variables on Application_Start in the global.asax file. These static variables are within a class in a referenced shared class library.</p>\n\n<p>My WCF layer also references this class library and the static variables mentioned.</p>\n\n<p>Both these layers are installed on separate servers so under their own IIS instance.</p>\n\n<p>Is there any way that my WCF service could access the data in the static variables populated by the UI layer? I would have thought the service layer has its own instance of the referenced assembly and therefore the variables within it belong to itself only?</p>\n\n<p>The reason I ask is this. There used to be a global.asax file on the service layer also which I recently removed which also used to populate the static variables in the shared library.</p>\n\n<p>On removing this global.asax file completely from the service layer, it was still able to access the data populated by the UI layer (at least i think it was). The application would still function for a certain period of time, when left inactive (i think) these variables in the service layer became NULL and I was getting null reference exceptions.</p>\n\n<p>The only way to populate the variables again was to restart the UI layer application pool. The application then worked again for some time and the repeated.</p>\n\n<p>I am unsure if what I am explaining is possible in which case I am missing something or if anyone knows why this might be happening? </p>\n"},{"tags":["c#","wcf","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12943277,"title":"Why does \"WCF Test Client\" preempt my WCF app, and how can I avoid it?","body":"<p>My simple sample wcf service WAS working, but then all of a sudden it started prompting me for an endpoint address in a \"WCF Test Client\" dialog.</p>\n\n<p>I can't recall changing anything that would cause it to go from popping up the browser (IE 8) when I hit F5 to now displaying this \"WCF Test client\" thing.</p>\n\n<p>I didn't know what to enter into the edit box it provided, so I tried \"http://localhost:4841/RestServiceImpl.svc\" (http://localhost:4841/RestServiceImpl.svc/xml/123 still works from outside of Visual Studio)</p>\n\n<p>It accepted that (\"Service added successfully\" displays in the dialog's task bar), but does nothing else; and clicking the \"My Service Projects\" Treeview does nothing (it has no children).</p>\n\n<h2>UPDATE</h2>\n\n<p>If I attempt to run the new operation directly from IE8, I get:</p>\n\n<h2>Server Error in '/' Application.</h2>\n\n<p>In contract 'IRestServiceImpl', there are multiple operations with Method 'GET' and a UriTemplate that is equivalent to 'xml/{platypusId}'. Each operation requires a unique combination of UriTemplate and Method to unambiguously dispatch messages. Use WebGetAttribute or WebInvokeAttribute to alter the UriTemplate and Method values of an operation. </p>\n\n<p>Does this mean I can only have one xml-returning operation that takes a string? The other/original method is ...xml/{id}...</p>\n\n<h2>UPDATE 2</h2>\n\n<p>This is the code, and it's still failing:</p>\n\n<pre><code>[ServiceContract]\npublic interface IRestServiceImpl\n{\n    [OperationContract(Name=\"Foo\")]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"xml/{id}\")]\n    string XMLData(string id);\n\n    [OperationContract(Name=\"FooBar\")]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"xml/{platypusId, anotherId}\")]\n    string FirstTrial(string platypusId, string anotherId);\n\n    [OperationContract(Name=\"FooFooBar\")]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Json,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"json/{id}\")]\n    string JSONData(string id);\n}\n</code></pre>\n\n<p>// Implementation (.svc) file</p>\n\n<pre><code>public class RestServiceImpl : IRestServiceImpl\n{\n    public string XMLData(string id)\n    {\n        return \"You requested product \" + id;\n    }\n\n    public string FirstTrial(string platypusId, string anotherID)\n    {\n        return \"I reckon so\" + platypusId + anotherID;\n    }\n\n    public string JSONData(string id)\n    {\n        return \"You requested product \" + id;\n    }\n}\n</code></pre>\n"},{"tags":["wcf","message-queue","rabbitmq","high-availability","failover"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":208,"score":4,"question_id":10190716,"title":"working with high-availability RabbitMQ server pair via WCF","body":"<p>I'm trying to figure out what is the best solution to work with rabbitmq cluster via wcf.</p>\n\n<p>Current setup:</p>\n\n<ol>\n<li>2 IIS web servers (act as message produces and post messages to queue via amqp wcf client).</li>\n<li>2 servers with rabbitmq broker (clustered with mirrored queue, rabbit1 and rabbit2)</li>\n<li>Windows service ( worker) with hosted amqp wcf service that listens to incoming messages.</li>\n</ol>\n\n<p>Web role posts messages to rabbit1 node and worker listens to rabbit1 node too. If rabbit1 node fails system(both web and worker) should switch to rabbit2. And that's the question, how to implement this in more elegant way rather than handling connection failures in application code.</p>\n\n<p>First and the only approach I see now is to use wcf4 routing backup endpoints feature. This way solves problem on client side(web role) only but doesn't solve problem on wcf service side(worker role).</p>\n"},{"tags":["c#",".net","wcf","silverlight","vsts2008"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":5263,"score":1,"question_id":1345454,"title":"WCF cross-domain policy security error","body":"<p>I am using VSTS 2008 + C# + WCF + .Net 3.5 + Silverlight 3.0. I host Silverlight control in an html page and debug it from VSTS 2008 (press F5, then run in VSTS 2008 built-in ASP.Net development web server), then call another WCF service (hosted in another machine running IIS 7.0 + Vista). The WCF service is very simple, just return a constant string to client.</p>\n\n<p>When invoking the WCF service from Silverlight, I got the following error message,</p>\n\n<p>An error occurred while trying to make a request to URI '<a href=\"https://LabTest/Test.svc\" rel=\"nofollow\">https://LabTest/Test.svc</a>'. This could be due to attempting to access a service in a cross-domain way without a proper cross-domain policy in place, or a policy that is unsuitable for SOAP services. You may need to contact the owner of the service to publish a cross-domain policy file and to ensure it allows SOAP-related HTTP headers to be sent. This error may also be caused by using internal types in the web service proxy without using the InternalsVisibleToAttribute attribute. Please see the inner exception for more details.</p>\n\n<p>Here is the clientaccesspolicy.xml file, anything wrong?</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;access-policy&gt;\n  &lt;cross-domain-access&gt;\n    &lt;policy&gt;\n      &lt;allow-from  http-request-headers=\"*\"&gt;\n        &lt;domain uri=\"*\"&gt;\n        &lt;/domain&gt;\n      &lt;/allow-from&gt;\n      &lt;grant-to&gt;\n        &lt;resource path=\"/\" include-subpaths=\"true\"&gt;&lt;/resource&gt;\n      &lt;/grant-to&gt;\n    &lt;/policy&gt;\n  &lt;/cross-domain-access&gt;\n&lt;/access-policy&gt;\n</code></pre>\n\n<p>thanks in advance,\nGeorge</p>\n"},{"tags":["xml","json","wcf","web-services","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12940785,"title":"How can I prevent the JSON web service response from downloading to a file?","body":"<p>I have some WCF service code that is virtually the same, except one method is supposed to return a xml result, and the other a json result:</p>\n\n<pre><code>[ServiceContract]\npublic interface IRestServiceImpl\n{\n    [OperationContract]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"xml/{id}\")]\n    string XMLData(string id);\n\n    [OperationContract]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Json,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"json/{id}\")]\n    string JSONData(string id);\n}\n</code></pre>\n\n<p>The xml works fine (e.g., when I enter \"<em>http://localhost:4841/RestServiceImpl.svc/xml/2468</em>\" into the browser). </p>\n\n<p>However, when I enter \"<em>http://localhost:4841/RestServiceImpl.svc/json/2468</em>\" I get a \"<em>File Download - Security Warning</em>\" dialog, which allows me to save a file (named \"2468\" in this case), which contains the following when opened in Notepad:</p>\n\n<p><em>{\"JSONDataResult\":\"You requested product 2468\"}</em> </p>\n\n<p>Is this \"as-designed\" (to save json results to a file), or why doesn't it act the same way as the xml-o-rama?</p>\n"},{"tags":["c#","visual-studio-2010","wcf","internet-explorer","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12940098,"title":"Why does this simple RESTful WCF Service fail with a 404 error?","body":"<p>Using this tutorial:</p>\n\n<p><a href=\"http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide\" rel=\"nofollow\">http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide</a></p>\n\n<p>I can get a Directory Listing to display when I run the app from VS 2010.</p>\n\n<p>I can paste the URL that is displayed in the IE Browser that VS invokes (http://localhost:4841/) into an outside-of-VS instance of IE and see the same thing. However, if I append \"/xml/123\" or \"/json/123\" as shown in the tutorial, so that the URI is \"http://localhost:4841/xml/123\" or \"http://localhost:4841/json/123\", I get:</p>\n\n<h2>*Server Error in '/' Application.</h2>\n\n<p>The resource cannot be found. \nDescription: HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. </p>\n\n<h2>Requested URL: /json/123/</h2>\n\n<p>Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272* </p>\n\n<p>If I append \"RestServiceImpl.svc\" to the URI, so that it is \"http://localhost:4841/RestServiceImpl.svc\" I get the \"Service\" page (\"This is a Windows Communication Foundation service. Metadata publishing for this service is currently disabled.\"); but appending \"/xml/123\" or \"/json/123\" leads to the same 404.</p>\n\n<p>The most pertinent code (taken straight from the 5-star tutorial) is:</p>\n\n<pre><code>[ServiceContract]\npublic interface IRestServiceImpl\n{\n    [OperationContract]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"xml/{id}\")]\n    string XMLData(string id);\n\n    [OperationContract]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Json,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"json/{id}\")]\n    string JSONData(string id);\n}\n</code></pre>\n"},{"tags":["asp.net",".net","ajax","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":530,"score":5,"question_id":9030125,"title":"Thread.CurrentPrincipal is not set in WCF service called using WebGet","body":"<p>I have a web site hosted in IIS that uses Windows Authentication and exposes WCF web services.</p>\n\n<p>I configure this service with an endpoint behavior:</p>\n\n<pre><code>&lt;serviceAuthorization principalPermissionMode =\"UseAspNetRoles\" \n                   roleProviderName=\"MyRoleProvider\"/&gt;\n</code></pre>\n\n<p>and a binding:</p>\n\n<pre><code> &lt;security mode=\"TransportCredentialOnly\"&gt;\n    &lt;transport clientCredentialType=\"Ntlm\" /&gt;\n &lt;/security&gt;\n</code></pre>\n\n<p>When the service is called, <code>Thread.CurrentPrincipal</code> is set to a <code>RolePrincipal</code> with the client's Windows identity and roles provided by by configured provider.</p>\n\n<p>All is well with the world.</p>\n\n<p>Now I've added some additional WCF services that are consumed by REST-ful Ajax calls: <code>Factory=\"System.ServiceModel.Activation.WebScriptServiceHostFactory\"</code> in the svc file, <code>WebGet</code> attribute in the service contract, and the <code>AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)</code> attribute on the service implementation.</p>\n\n<p>I also add the following incantation to web.config as recommended in MSDN:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    ...\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n    ...\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>My Ajax service <em>almost</em> works the way I want it to.  When it's called, <code>HttpContext.Current.User</code> is set to a <code>RolePrincipal</code> with the roles I expect.  But <code>Thread.CurrentPrincipal</code> remains set to an unauthenticated <code>GenericPrincipal</code>.</p>\n\n<p>So I need to add a line of code to each of my service methods:</p>\n\n<pre><code>Thread.CurrentPrincipal = HttpContext.Current.User\n</code></pre>\n\n<p>Is there any incantation in the configuration file I can use to get <code>Thread.CurrentPrincipal</code> to be set automagically, like it is for a normal SOAP service?</p>\n\n<p><strong>UPDATE</strong>\n<a href=\"http://bartekszafko.pl/2011/09/25/integrating-wcf-services-with-forms-authentication/\">Here's</a> a blog from someone who had the same problem, and solved it by implementing custom behaviors.  Surely there's a way to do this out of the box?</p>\n"},{"tags":["c#",".net","wcf","serialization","datacontractserializer"],"answer_count":2,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1620,"score":8,"question_id":6962567,"title":"WCF Service Reference - Getting \"XmlException: Name cannot begin with the '<' character, hexadecimal value 0x3C\" on Client Side","body":"<p>I have a smart client application communicating with its server via WCF. Data is created on the client and then sent over the service to be persisted. The server and client use the same domain classes via a shared dll and I'm using the handy \"Add Service Reference\" functionality in Visual Studio that wraps SvcUtil.exe and generates the client and proxy classes.</p>\n\n<p>I get the following error when trying to call the service:</p>\n\n<pre><code>System.Xml.XmlException occurred\n  Message=Name cannot begin with the '&lt;' character, hexadecimal value 0x3C.\n  Source=System.Xml\n  LineNumber=0\n  LinePosition=1\n  StackTrace:\n       at System.Xml.XmlConvert.VerifyNCName(String name, ExceptionType exceptionType)\n  InnerException: \n</code></pre>\n\n<p>This is particularly troublesome because the service will work for weeks at a time without this error occurring and then suddenly and without warning it will appear again. I haven't been able to figure out what causes it at all. When it does happen, I will do a deep dive into researching how to fix it and usually don't come up with anything more than people who have experienced the same error while actually trying to serialize things to xml programmatically. I am using nothing but the generated client and proxies to try and send this data.</p>\n\n<p>I have looked into the generated proxies in the <code>Service References\\AwesomeService</code> folder of my solution and see nothing that looks out of the ordinary. The only occurrences of angle brackets in the generated files are:</p>\n\n<ul>\n<li>xml tags in the *.svcinfo, Reference.svcmap, AwesomeService.disco, AwesomeService.wsdl and *.xsd files</li>\n<li>arguments to generic collections in the Reference.cs file</li>\n</ul>\n\n<p>The code I'm using to call the service is such:</p>\n\n<pre><code>using (var client = new AwesomeServiceClient())\n{\n    client.SaveAwesomeness(instanceOfAwesomeness);\n}\n</code></pre>\n\n<p>This is the stack beggining with the first frame above the calling code listed above:</p>\n\n<pre><code>System.Xml.dll!System.Xml.XmlConvert.VerifyNCName(string name, System.Xml.ExceptionType exceptionType) + 0xb5 bytes \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.IsValidNCName(string name) + 0x27 bytes  \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.EncodeLocalName(string localName) + 0x1d bytes   \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ImportDataMembers() + 0x2e1 bytes   \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.ClassDataContractCriticalHelper.ClassDataContractCriticalHelper(System.Type type) + 0x10d bytes \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(int id, System.RuntimeTypeHandle typeHandle, System.Type type) + 0x198 bytes   \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(int id, System.RuntimeTypeHandle typeHandle, System.Type type) + 0x57 bytes \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerContext.GetDataContract(int id, System.RuntimeTypeHandle typeHandle) + 0x37 bytes  \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(System.Runtime.Serialization.XmlWriterDelegator xmlWriter, object obj, bool isDeclaredType, bool writeXsiType, int declaredTypeID, System.RuntimeTypeHandle declaredTypeHandle) + 0x49 bytes    \n[Lightweight Function]  \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.ClassDataContract.WriteXmlValue(System.Runtime.Serialization.XmlWriterDelegator xmlWriter, object obj, System.Runtime.Serialization.XmlObjectSerializerWriteContext context) + 0x25 bytes \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(System.Runtime.Serialization.DataContract dataContract, System.Runtime.Serialization.XmlWriterDelegator xmlWriter, object obj, System.RuntimeTypeHandle declaredTypeHandle) + 0x18 bytes   \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(System.Runtime.Serialization.DataContract dataContract, System.Runtime.Serialization.XmlWriterDelegator xmlWriter, object obj, System.RuntimeTypeHandle declaredTypeHandle) + 0x49 bytes  \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(System.Runtime.Serialization.XmlWriterDelegator writer, object graph, System.Runtime.Serialization.DataContractResolver dataContractResolver) + 0xdf bytes  \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(System.Runtime.Serialization.XmlWriterDelegator writer, object graph, System.Runtime.Serialization.DataContractResolver dataContractResolver) + 0x26 bytes \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(System.Runtime.Serialization.XmlWriterDelegator writer, object graph, System.Runtime.Serialization.DataContractResolver dataContractResolver) + 0x60 bytes    \nSystem.Runtime.Serialization.dll!System.Runtime.Serialization.XmlObjectSerializer.WriteObject(System.Xml.XmlDictionaryWriter writer, object graph) + 0x2d bytes \nSystem.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(System.Xml.XmlDictionaryWriter writer, System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo part, object graph) + 0x38 bytes \nSystem.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(System.Xml.XmlDictionaryWriter writer, System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo part, object graph) + 0xbe bytes \nSystem.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameters(System.Xml.XmlDictionaryWriter writer, System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.PartInfo[] parts, object[] parameters) + 0x3e bytes  \nSystem.ServiceModel.dll!System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(System.Xml.XmlDictionaryWriter writer, System.ServiceModel.Channels.MessageVersion version, string action, System.ServiceModel.Description.MessageDescription messageDescription, object returnValue, object[] parameters, bool isRequest) + 0x68 bytes   \nSystem.ServiceModel.dll!System.ServiceModel.Dispatcher.OperationFormatter.SerializeBodyContents(System.Xml.XmlDictionaryWriter writer, System.ServiceModel.Channels.MessageVersion version, object[] parameters, object returnValue, bool isRequest) + 0x7b bytes   \nSystem.ServiceModel.dll!System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(System.Xml.XmlDictionaryWriter writer) + 0x4f bytes    \nSystem.ServiceModel.dll!System.ServiceModel.Channels.BodyWriter.WriteBodyContents(System.Xml.XmlDictionaryWriter writer) + 0xf8 bytes   \nSystem.ServiceModel.dll!System.ServiceModel.Channels.BodyWriterMessage.OnBodyToString(System.Xml.XmlDictionaryWriter writer) + 0x1f bytes   \nSystem.ServiceModel.dll!System.ServiceModel.Channels.Message.ToString(System.Xml.XmlDictionaryWriter writer) + 0xaa bytes   \nSystem.ServiceModel.dll!System.ServiceModel.Diagnostics.MessageLogTraceRecord.WriteTo(System.Xml.XmlWriter writer) + 0x166 bytes    \nSystem.ServiceModel.dll!System.ServiceModel.Diagnostics.MessageLogger.LogInternal(System.ServiceModel.Diagnostics.MessageLogTraceRecord record) + 0x77 bytes    \nSystem.ServiceModel.dll!System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(ref System.ServiceModel.Channels.Message message, System.Xml.XmlReader reader, System.ServiceModel.Diagnostics.MessageLoggingSource source) + 0x104 bytes  \nSystem.ServiceModel.dll!System.ServiceModel.Diagnostics.MessageLogger.LogMessage(ref System.ServiceModel.Channels.Message message, System.Xml.XmlReader reader, System.ServiceModel.Diagnostics.MessageLoggingSource source) + 0x3a bytes   \nSystem.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannel.PrepareCall(System.ServiceModel.Dispatcher.ProxyOperationRuntime operation, bool oneway, ref System.ServiceModel.Dispatcher.ProxyRpc rpc) + 0x436 bytes \nSystem.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannel.Call(string action, bool oneway, System.ServiceModel.Dispatcher.ProxyOperationRuntime operation, object[] ins, object[] outs, System.TimeSpan timeout) + 0x12b bytes    \nSystem.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(System.Runtime.Remoting.Messaging.IMethodCallMessage methodCall, System.ServiceModel.Dispatcher.ProxyOperationRuntime operation) + 0x64 bytes    \nSystem.ServiceModel.dll!System.ServiceModel.Channels.ServiceChannelProxy.Invoke(System.Runtime.Remoting.Messaging.IMessage message) + 0x6a bytes    \nmscorlib.dll!System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(ref System.Runtime.Remoting.Proxies.MessageData msgData, int type) + 0xee bytes\n</code></pre>\n\n<p>What causes this and how do I prevent it? Or, also welcomed, how do I go about troubleshooting this further?</p>\n"},{"tags":[".net","wcf","file-upload","web-config"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12938258,"title":"WCF upload large file","body":"<p>I know this issue has been raised many times, but every code has different answers. I am trying to upload files bigger then 50K to my web service stream. below is my config I tried everything but I still get 400 Bad request back. any ideas ??</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n    &lt;system.net&gt;\n        &lt;defaultProxy&gt;\n            &lt;proxy\n            usesystemdefault = \"false\"\n            proxyaddress=\"Address\"\n            bypassonlocal=\"false\"/&gt;\n        &lt;/defaultProxy&gt;\n    &lt;/system.net&gt;\n    &lt;connectionStrings&gt;\n\n    &lt;/connectionStrings&gt;\n    &lt;appSettings&gt;\n\n\n    &lt;/appSettings&gt;\n    &lt;system.web&gt;\n        &lt;compilation targetFramework=\"4.0\" debug=\"true\" /&gt;\n        &lt;authentication mode=\"None\"/&gt;\n        &lt;httpRuntime maxRequestLength=\"64000000\"/&gt;\n    &lt;/system.web&gt;\n\n    &lt;system.serviceModel&gt;\n        &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\"&gt;\n        &lt;/serviceHostingEnvironment&gt;\n        &lt;standardEndpoints&gt;\n            &lt;webHttpEndpoint&gt;\n                &lt;standardEndpoint name=\"\" helpEnabled=\"true\" crossDomainScriptAccessEnabled=\"true\" automaticFormatSelectionEnabled=\"true\" /&gt;\n            &lt;/webHttpEndpoint&gt;\n        &lt;/standardEndpoints&gt;\n        &lt;behaviors&gt;\n            &lt;endpointBehaviors&gt;\n                &lt;behavior name=\"webHttpBehavior\"&gt;\n                    &lt;webHttp /&gt;\n                &lt;/behavior&gt;\n            &lt;/endpointBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;bindings&gt;\n\n            &lt;webHttpBinding&gt;\n                &lt;binding name=\"webHttpBindingWithJsonP\" crossDomainScriptAccessEnabled=\"true\" /&gt;\n\n            &lt;/webHttpBinding&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding maxBufferSize=\"64000000\" maxReceivedMessageSize=\"64000000\" maxBufferPoolSize=\"64000000\"&gt;\n                    &lt;readerQuotas maxDepth=\"64000000\" maxStringContentLength=\"64000000\" maxArrayLength=\"64000000\" maxBytesPerRead=\"64000000\" /&gt;\n                    &lt;security mode=\"None\"/&gt;\n                &lt;/binding&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n\n        &lt;services&gt;\n            &lt;service name=\"myService\"&gt;\n                &lt;endpoint address=\"\" binding=\"webHttpBinding\"\n                          bindingConfiguration=\"webHttpBindingWithJsonP\" contract=\"IAllatusService\"\n                          behaviorConfiguration=\"webHttpBehavior\"/&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n\n    &lt;/system.serviceModel&gt;\n\n\n    &lt;system.webServer&gt;\n        &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n    &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":68,"score":-3,"question_id":12938433,"title":"Programming strategy","body":"<p>I am writing separate classes to test multiple test cases. By changing the parameters of the base class, which has five properties, every sub class will have unique five properties to become a test case but i have to write so many classes.</p>\n\n<p>Is there any programming strategy to have test cases instead of writing classes. </p>\n"},{"tags":[".net","wcf","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12938088,"title":"WCF Service with SSL clarification","body":"<p>I've been going over this with so many people, and looked on so many tutorials, I've got to the point where I'm that confused over the whole matter that my head's close to exploding.</p>\n\n<p>Simply, I have a Site (presentation layer) running on the same server as a WCF Service (my data layer), in which I want the Site to call to the WCF Service, whilst being secure. Simple, right? From what I can tell, no.</p>\n\n<p>I've got SSL running, so my site is under https://, that's fine. Now, what I need to know is how to authenticate between the Site and WCF Service so <em>only</em> the site can call the WCF Service. Do I need a seperate company-bought (Thawte etc) certificate for authenticating the Site to Service, or is Username/Password authentication enough due to them running over HTTPS anyway?</p>\n\n<p>Any help is very much appreciated, there has to be someone out there that knows about this in detail, right?</p>\n"},{"tags":["wcf",".net-4.0","configuration",".net-4.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":112,"score":0,"question_id":12911860,"title":"Getting AddressAlreadyInUseException after upgrading to .NET 4.5","body":"<p>I recently installed the new .NET Framework 4.5 (previously was 4.0 installed) on my Server and im getting a System.ServiceModel.AddressAlreadyInUseException when i start my Windows Service that exposes WCF endpoints.</p>\n\n<blockquote>\n  <p>System.ServiceModel.AddressAlreadyInUseException: There is already a\n  listener on IP endpoint 0.0.0.0:56543. This could happen if there is\n  another application already listening on this endpoint or if you have\n  multiple service endpoints in your service host with the same IP\n  endpoint but with incompatible binding configurations. --->\n  System.Net.Sockets.SocketException: Only one usage of each socket\n  address (protocol/network address/port) is normally permitted    at\n  System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot,\n  SocketAddress socketAddress)    at\n  System.Net.Sockets.Socket.Bind(EndPoint localEP)    at\n  System.ServiceModel.Channels.SocketConnectionListener.Listen()    ---\n  End of inner exception stack trace ---    at\n  System.ServiceModel.Channels.SocketConnectionListener.Listen()    at\n  System.ServiceModel.Channels.BufferedConnectionListener.Listen()    at\n  System.ServiceModel.Channels.ExclusiveTcpTransportManager.OnOpen()<br>\n  at\n  System.ServiceModel.Channels.TransportManager.Open(TransportChannelListener\n  channelListener)    at\n  System.ServiceModel.Channels.TransportManagerContainer.Open(SelectTransportManagersCallback\n  selectTransportManagerCallback)    at\n  System.ServiceModel.Channels.TransportChannelListener.OnOpen(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.ConnectionOrientedTransportChannelListener.OnOpen(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.TcpChannelListener`2.OnOpen(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan\n  timeout)    at\n  System.ServiceModel.Dispatcher.ChannelDispatcher.OnOpen(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan\n  timeout)    at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan\n  timeout)    at\n  System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan\n  timeout)    at Qosit.Infrastructure.UnisServer.OnStart(String[] args)</p>\n</blockquote>\n\n<p>The configuration of my WCF endpoints looks like that:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;netTcpBinding&gt;\n        &lt;binding name=\"NetTcpBindingConfiguration\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\" hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"10\" maxBufferPoolSize=\"524288\" maxBufferSize=\"65536\" maxConnections=\"10\" maxReceivedMessageSize=\"65536\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"5242880\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\" enabled=\"false\" /&gt;\n        &lt;/binding&gt;\n      &lt;/netTcpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"\"&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"MEX\"&gt;\n          &lt;serviceMetadata/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"MEX\" name=\"MyAssembly.MyNamespace.MyService\"&gt;      \n        &lt;endpoint address=\"net.tcp://localhost:56543/MyService\"\n          binding=\"netTcpBinding\" bindingConfiguration=\"NetTcpBindingConfiguration\" contract=\"MyAssembly.MyNamespace.MyServiceInterface\" /&gt;\n        &lt;endpoint address=\"net.tcp://localhost:56543/MEX\" binding=\"mexTcpBinding\"\n          contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I think it has something to do with the MEX endpoint that uses the same port, but im not sure how to configure it correctly after upgrading to .NET Framework 4.5.</p>\n\n<p>Was there a change in WCF so that these configuration raises an exception?</p>\n"},{"tags":["c#","silverlight","wcf","ria-services","dataform"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":736,"score":1,"question_id":3078686,"title":"RIA services/DataForm: How to use ReadOnly & Description attributes together","body":"<p>I have several cases where I have a property that I want to declare readonly, but also give some explanation of how it is calculated/set using the [Display(Description=\"\")] attribute. I would like to do this in the metadata, if possible, rather than override in the dataform itself.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>    [Display(Description = \"Total number of travel hours, calculated as total hrs worked - actual working hrs this month\")]\n    public decimal TravelHours\n    {\n        get\n        {  \n            return this.TotalHrsWorked - this.ActualWorkedHours;\n        }\n    }\n</code></pre>\n\n<p><strong>This won't show the description as a <a href=\"http://msdn.microsoft.com/en-us/library/system.windows.controls.descriptionviewer%28VS.95%29.aspx\" rel=\"nofollow\">DescriptionViewer</a> when I bind to this property in a DataForm &amp; DataField.</strong></p>\n\n<p>It seems like when I set the [ReadOnly] attribute it hides the DescriptionViewer, and even setting DescriptionViewerVisibility=Visible in the dataform xaml still doesn't change it. Also, any calculated properties  (no setter) seem to have this attribute enforced by default. It's kind of annoying, because these are the ones I really want to show the descriptionviewer for.</p>\n\n<p>The only way around it I have found so far is to make the property not readonly and add a dummy setter (for calculated properties). That seems like a kludge. </p>\n\n<p><strong>Is there any way to show the dataform/datafield descriptionviewer on readonly properties?</strong></p>\n"},{"tags":["wcf","sharepoint"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":337,"score":0,"question_id":11270775,"title":"Error while uploading file method in Client Object Model Sharepoint 2010","body":"<p>Error while uploading file method in Client Object Model + Sharepoint 2010. Once the file got uploaded. After that though the code compiles with no error</p>\n\n<p>I get the error while executing</p>\n\n<p>\"{\"Value does not fall within the expected range.\"}</p>\n\n<p>{System.Collections.Generic.SynchronizedReadOnlyCollection}</p>\n\n<p>I have a method which takes care of functionality to upload files</p>\n\n<p>///////////////////////////////////////////////////////////////////////////////////////////</p>\n\n<pre><code>public void Upload_Click(string documentPath, byte[] documentStream)\n{\n    String sharePointSite = \"http://cvgwinbasd003:28838/sites/test04\";\n    String documentLibraryUrl = sharePointSite +\"/\"+ documentPath.Replace('\\\\','/');\n\n    ////////////////////////////////////////////////////////////////////\n    //Get Document List\n    List documentsList = clientContext.Web.Lists.GetByTitle(\"Doc1\");\n\n    var fileCreationInformation = new FileCreationInformation();\n\n    //Assign to content byte[] i.e. documentStream\n    fileCreationInformation.Content = documentStream;\n\n    //Allow owerwrite of document\n    fileCreationInformation.Overwrite = true;\n\n    //Upload URL\n    fileCreationInformation.Url = documentLibraryUrl;\n    Microsoft.SharePoint.Client.File uploadFile = documentsList.RootFolder.Files.Add(\n    fileCreationInformation);             \n\n    //uploadFile.ListItemAllFields.Update();\n    clientContext.ExecuteQuery();\n}\n</code></pre>\n\n<p>/////////////////////////////////////////////////////////////////////////////////////////////////</p>\n\n<p>In the MVC 3.0 application in the controller I have defined the following method to invoke the upload method.</p>\n\n<p>//////////////////////////////////////////////////////////////////////////////////////////////////</p>\n\n<pre><code>public ActionResult ProcessSubmit(IEnumerable&lt;HttpPostedFileBase&gt; attachments)\n{\n    System.IO.Stream uploadFileStream=null;\n    byte[] uploadFileBytes;\n    int fileLength=0;      \n\n    foreach (HttpPostedFileBase fileUpload in attachments)\n    {\n        uploadFileStream = fileUpload.InputStream;\n        fileLength=fileUpload.ContentLength;\n    }\n\n    uploadFileBytes= new byte[fileLength];\n    uploadFileStream.Read(uploadFileBytes, 0, fileLength);\n\n    using (DocManagementService.DocMgmtClient doc = new DocMgmtClient())\n    {\n        doc.Upload_Click(\"Doc1/Doc2/Doc2.1/\", uploadFileBytes);\n    }\n\n    return RedirectToAction(\"SyncUploadResult\");\n}\n</code></pre>\n\n<p>//////////////////////////////////////////////////////////////////////////////////////////////////</p>\n\n<p>Please help me to locate the error</p>\n"},{"tags":["wcf","wsdl"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":318,"score":1,"question_id":10299217,"title":"How to remove or exclude a schema that WCF adds that isn't used?","body":"<p>I've created a webservice in Visual studio with WCF and when looking at the generated WSDL it includes a reference to <a href=\"http://schemas.microsoft.com/2003/10/Serialization\" rel=\"nofollow\">http://schemas.microsoft.com/2003/10/Serialization</a> which contains a lot of type specifications. I do not use any of these specifications. Does anyone know why WCF adds this and if there's any way to get rid of it?</p>\n\n<p>The xml added to my wsdl looks like this when using the singleWsdl argument on my service:</p>\n\n<pre><code>&lt;xs:schema xmlns:tns=\"http://schemas.microsoft.com/2003/10/Serialization/\" attributeFormDefault=\"qualified\" elementFormDefault=\"qualified\" targetNamespace=\"http://schemas.microsoft.com/2003/10/Serialization/\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;xs:element name=\"anyType\" nillable=\"true\" type=\"xs:anyType\" /&gt;\n  &lt;xs:element name=\"anyURI\" nillable=\"true\" type=\"xs:anyURI\" /&gt;\n  &lt;xs:element name=\"base64Binary\" nillable=\"true\" type=\"xs:base64Binary\" /&gt;\n  &lt;xs:element name=\"boolean\" nillable=\"true\" type=\"xs:boolean\" /&gt;\n  &lt;xs:element name=\"byte\" nillable=\"true\" type=\"xs:byte\" /&gt;\n  &lt;xs:element name=\"dateTime\" nillable=\"true\" type=\"xs:dateTime\" /&gt;\n  &lt;xs:element name=\"decimal\" nillable=\"true\" type=\"xs:decimal\" /&gt;\n  &lt;xs:element name=\"double\" nillable=\"true\" type=\"xs:double\" /&gt;\n  &lt;xs:element name=\"float\" nillable=\"true\" type=\"xs:float\" /&gt;\n  &lt;xs:element name=\"int\" nillable=\"true\" type=\"xs:int\" /&gt;\n  &lt;xs:element name=\"long\" nillable=\"true\" type=\"xs:long\" /&gt;\n  &lt;xs:element name=\"QName\" nillable=\"true\" type=\"xs:QName\" /&gt;\n  &lt;xs:element name=\"short\" nillable=\"true\" type=\"xs:short\" /&gt;\n  &lt;xs:element name=\"string\" nillable=\"true\" type=\"xs:string\" /&gt;\n  &lt;xs:element name=\"unsignedByte\" nillable=\"true\" type=\"xs:unsignedByte\" /&gt;\n  &lt;xs:element name=\"unsignedInt\" nillable=\"true\" type=\"xs:unsignedInt\" /&gt;\n  &lt;xs:element name=\"unsignedLong\" nillable=\"true\" type=\"xs:unsignedLong\" /&gt;\n  &lt;xs:element name=\"unsignedShort\" nillable=\"true\" type=\"xs:unsignedShort\" /&gt;\n  &lt;xs:element name=\"char\" nillable=\"true\" type=\"tns:char\" /&gt;\n  &lt;xs:simpleType name=\"char\"&gt;\n    &lt;xs:restriction base=\"xs:int\" /&gt;\n  &lt;/xs:simpleType&gt;\n  &lt;xs:element name=\"duration\" nillable=\"true\" type=\"tns:duration\" /&gt;\n  &lt;xs:simpleType name=\"duration\"&gt;\n    &lt;xs:restriction base=\"xs:duration\"&gt;\n      &lt;xs:pattern value=\"\\-?P(\\d*D)?(T(\\d*H)?(\\d*M)?(\\d*(\\.\\d*)?S)?)?\" /&gt;\n      &lt;xs:minInclusive value=\"-P10675199DT2H48M5.4775808S\" /&gt;\n      &lt;xs:maxInclusive value=\"P10675199DT2H48M5.4775807S\" /&gt;\n    &lt;/xs:restriction&gt;\n  &lt;/xs:simpleType&gt;\n  &lt;xs:element name=\"guid\" nillable=\"true\" type=\"tns:guid\" /&gt;\n  &lt;xs:simpleType name=\"guid\"&gt;\n    &lt;xs:restriction base=\"xs:string\"&gt;\n      &lt;xs:pattern value=\"[\\da-fA-F]{8}-[\\da-fA-F]{4}-[\\da-fA-F]{4}-[\\da-fA-F]{4}-[\\da-fA-F]{12}\" /&gt;\n    &lt;/xs:restriction&gt;\n  &lt;/xs:simpleType&gt;\n  &lt;xs:attribute name=\"FactoryType\" type=\"xs:QName\" /&gt;\n  &lt;xs:attribute name=\"Id\" type=\"xs:ID\" /&gt;\n  &lt;xs:attribute name=\"Ref\" type=\"xs:IDREF\" /&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n"},{"tags":["jquery","ajax","wcf","web-services","cross-domain"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12930441,"title":"PhoneGap application and WCF service on different domains","body":"<p>I am designing an application for Android using PhoneGap, which basically calls a web-service which for now, it will contain a method which returns something (let's say a string) as a return value. Finally, I want the web-service to handle queries which I am going to do against my Windows Azure database.</p>\n\n<p>My choice of a web-service was the Ajax-Enabled WCF Service. Was this the right choice?</p>\n\n<p>I tried a simple application to see how this works. First, I created a new project in Visual Studio and then created an Ajax-Enabled WCF Service. I added just one simple method:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"GET\", ResponseFormat= WebMessageFormat.Json)]\npublic string GetName()\n{\n    return \"Hello world\";\n}\n</code></pre>\n\n<p>I didn't modify the Web.config, at all.</p>\n\n<p>Then, I opened Eclipse and created a new PhoneGap Android application with just a textbox and a button. Everytime, this button is clicked, the web-service will be called and the return value will be displayed in the textbox by using the following method:</p>\n\n<pre><code>$('#button').click(function(){\n    $.ajax({ \n    type: \"GET\",     \n    url: \"http://localhost:11634/MobileService.svc/GetName\",     \n    contentType: \"application/json\",     \n    dataType: \"json\",\n    success: function (result) {     \n        $(\"#textbox\").text(result);     \n    },             \n    error: function (textStatus) {     \n        $(\"#textbox\").text(textStatus);\n    }     \n    });\n});\n</code></pre>\n\n<p>When I tried using this method, I get the following error in Firefox: <code>\"NetworkError: 405 Method Not Allowed</code>. I then tried to change the data type to <code>jsonp</code> and added the following line before the AJAX call in order to allow cross domain requests:\n <code>$.support.cors = true;</code>. Now in Firefox, I get this error: </p>\n\n<pre><code>SyntaxError: invalid label\n{\"d\":\"Hello world\"}\n</code></pre>\n\n<p>Can you please guide me, on whether or not I am using the right methods and on how to handle the cross domain issues please?</p>\n"},{"tags":["wcf","tridion","tridion-2011"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12932409,"title":"Getting 'MaxItemsInObjectGraph quota' error while trying to filter the process histories","body":"<p>I am trying to loop through all the items under <strong>Workflow Management --> Process Histories</strong> and do something.</p>\n\n<p>The below is my code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>ProcessesFilterData filter = new ProcessesFilterData()\n{\n    BaseColumns = ListBaseColumns.IdAndTitle,\n    ProcessType = ProcessType.Historical\n};\nforeach (IdentifiableObjectData data in csClient.GetSystemWideList(filter))\n{\n     //doing somethine here\n}\n</code></pre>\n\n<p>I am getting the below error in the line <strong>foreach (IdentifiableObjectData data in csClient.GetSystemWideList(filter))</strong></p>\n\n<p><strong>Error Message:</strong></p>\n\n<p>The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter <a href=\"http://www.sdltridion.com/ContentManager/CoreService/2011:GetSystemWideListResult\" rel=\"nofollow\">http://www.sdltridion.com/ContentManager/CoreService/2011:GetSystemWideListResult</a>. The InnerException message was 'Maximum number of items that can be serialized or deserialized in an object graph is '65536'. Change the object graph or increase the MaxItemsInObjectGraph quota. '.  Please see InnerException for more details.</p>\n"},{"tags":["wcf","ios5","xcode4","asihttprequest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12935563,"title":"Send List<obj> parameter to WCF service from XCode4.2 IPhone development","body":"<p>Currently i am developing IOS application together with WCF Service. here is my WCF Web service code:</p>\n\n<pre><code>[WebInvoke(Method=\"POST\", BodyStyle=WebMessageBodyStyle.WrappedRequest, RequestFormat=WebMessageFormat.Json]\n[OperationContract]\nstring GetDataArr(List&lt;myobj&gt; lstMyObj);\n\n[DataContract]\n public class myobj{\n [DataMember]\n public string Name {get;set;}   \n [DataMember]\n public string Desc {get;set;}}\n</code></pre>\n\n<p>here is my coding in XCode</p>\n\n<pre><code> NSURL *url=[NSURL URLWithString:@\"http://192.168.1.5/WCF_WEBHTTP/Service.svc/basic\"];\nASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];\n[request setRequestMethod:@\"POST\"];\n[request addRequestHeader:@\"Content-Type\" value:@\"application/json\"];\n[request addRequestHeader:@\"SOAPAction\" value:@\"urn:IService/GetDataArr\"];\nNSString *soapMsg= [NSString stringWithFormat:@\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\"\n                    \"&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"&gt;&lt;SOAP-ENV:Body&gt;\"\n                    \"&lt;GetDataArr&gt;\"\n                    \"&lt;/GetDataArr&gt;\"\n                    \"&lt;/SOAP-ENV:Body&gt;\"\n                    \"&lt;/SOAP-ENV:Envelope&gt;\"];\n\nNSString *messageLength = [NSString stringWithFormat:@\"%d\",[soapMsg length]];\n[request addRequestHeader:@\"Content-Length\" value:messageLength];\n[request appendPostData:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]];\n[request setDelegate:self]; \n[request startAsynchronous]; \n</code></pre>\n\n<p>How to send the parameter like <code>List&lt;myobj&gt;</code> from XCode4.2. pls enlighten me\nappreciate any help.</p>\n\n<p>Best Rgds,\ndf</p>\n"},{"tags":["xml","wcf","architecture","reporting-services"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":448,"score":1,"question_id":10447780,"title":"SSRS using Xml datasource [WCF], its possible, but is it advisable?","body":"<p>We have a requirement to use WCF as a data source in our reports. [Server Mode]</p>\n\n<p>Dot Net 4.0/ SSRS 2008 R2/ ASP.Net 4.0</p>\n\n<p>The idea behind this is to apply common business rules throughout the application from Reports to standard application grids.</p>\n\n<p>Essentially it would work along the lines of</p>\n\n<p>Normally its as follows</p>\n\n<p>[RDL - SQL Sever Data Provider - DB]</p>\n\n<p>but what we require is</p>\n\n<p>[RDL - XML/Custom Dataprovider - WCF Method - Business Layer - - DB]</p>\n\n<p>Our main app would use the WCF layer also.\nActually for practical purposes its an interface layer so if we had to use Web Services for SSRS instead, it would be considered if there were advantages to this approach.</p>\n\n<p>I have found some articles on our approach</p>\n\n<p><a href=\"http://weblogs.asp.net/jezell/archive/2008/02/21/using-wcf-endpoints-with-sql-reporting-services.aspx\" rel=\"nofollow\">http://weblogs.asp.net/jezell/archive/2008/02/21/using-wcf-endpoints-with-sql-reporting-services.aspx</a></p>\n\n<p><a href=\"http://www.codeproject.com/Articles/37270/Consuming-a-WCF-Service-from-an-SSRS-RDL-Server-Re\" rel=\"nofollow\">http://www.codeproject.com/Articles/37270/Consuming-a-WCF-Service-from-an-SSRS-RDL-Server-Re</a></p>\n\n<p><a href=\"http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/aa0c8c5e-28a7-440f-a1c1-62e8bb184b8d/\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/aa0c8c5e-28a7-440f-a1c1-62e8bb184b8d/</a></p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ms154655(v=sql.105).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ms154655(v=sql.105).aspx</a></p>\n\n<p><a href=\"http://devblog.bardoloi.com/2011/09/using-wcf-web-services-as-data-source.html\" rel=\"nofollow\">http://devblog.bardoloi.com/2011/09/using-wcf-web-services-as-data-source.html</a></p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx</a></p>\n\n<p>Either way given the limitations here</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx#repservxmlds_topic5\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx#repservxmlds_topic5</a>\nits all getting a little scary.</p>\n\n<p>What I do not want to do of course is go down a certain path and this then impacts report design capability, performance and possibly limits the types of reports that can be created.</p>\n\n<p>If anyone has any opinions or experience on the above layout I would appreciate greatly your views and input.</p>\n\n<p>I'm also very much open to possible alternatives in how we could create reports containing data which has been though a business layer that does the appropriate massaging of data etc</p>\n\n<p>Apologies for the long post.</p>\n\n<p>Liam</p>\n"},{"tags":["wcf","iis","http-status-code-500"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":212,"score":0,"question_id":9223030,"title":"When does IIS log 500 error? Are they all fatal?","body":"<p>I am hosting a WCF service in IIS for my clients to call. During the load testing, all the client calls returns well, but I see a lot of 500 errors in the IIS log file. Such as below:</p>\n\n<pre><code>2012-02-09 08:01:37 192.168.0.1 POST /XXX/Service.svc - 443 - 192.168.0.2 - 200 0 0 8983\n2012-02-09 08:01:37 192.168.0.1 POST /XXX/Service.svc - 443 - 192.168.0.2 - 500 0 0 531\n2012-02-09 08:01:37 192.168.0.1 POST /XXX/Service.svc - 443 - 192.168.0.2 - 500 0 0 546\n2012-02-09 08:01:37 192.168.0.1 POST /XXX/Service.svc - 443 - 192.168.0.2 - 500 0 0 546\n2012-02-09 08:01:37 192.168.0.1 POST /XXX/Service.svc - 443 - 192.168.0.2 - 200 0 0 14155\n</code></pre>\n\n<p>Questions are:</p>\n\n<ol>\n<li>When does IIS log 500 error? </li>\n<li>Since all the client requets seem to be satisfied, can we safely ignore these 500 errors?</li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":["c#","wcf","web-services","authentication","token"],"answer_count":1,"favorite_count":9,"up_vote_count":14,"down_vote_count":0,"view_count":14107,"score":14,"question_id":563037,"title":"WCF Authentication with custom ClientCredentials: What is the clientCredentialType to use?","body":"<p>I had to ditch the basic WCF UserName/Pwd security and implement my own custom client credentials to hold some more info beyond what is provided by default.</p>\n\n<p>I worked through<a href=\"http://msdn.microsoft.com/en-us/library/ms730868.aspx\" rel=\"nofollow\">this MSDN article</a>, but I'm missing something because it doesn't work.</p>\n\n<p>First, I have some custom ClientCredentials that provide a custom ClientCredentialsSecurityTokenManager:</p>\n\n<pre><code>public class CentralAuthCredentials : ClientCredentials\n{\n\tpublic override System.IdentityModel.Selectors.SecurityTokenManager CreateSecurityTokenManager()\n\t{\n\t\treturn new CentralAuthTokenManager(this);\n\t}\n}\n\npublic class CentralAuthTokenManager : ClientCredentialsSecurityTokenManager\n{\n\tprivate CentralAuthCredentials credentials;\n\n\tpublic CentralAuthTokenManager(CentralAuthCredentials creds) : base(creds)\n\t{\n\t\tthis.credentials = creds;\n\t}\n\n\tpublic override SecurityTokenProvider CreateSecurityTokenProvider(SecurityTokenRequirement tokenRequirement)\n\t{\n\t\tif (this.IsIssuedSecurityTokenRequirement(tokenRequirement) || tokenRequirement.TokenType == CentralAuthToken.TOKEN_TYPE)\n\t\t\treturn new CentralAuthTokenProvider(credentials.UserId, credentials.UserPassword, credentials.ImpersonateId, credentials.LoginType);\n\t\telse\n\t\t\treturn base.CreateSecurityTokenProvider(tokenRequirement);\n\t}\n\n\tpublic override SecurityTokenAuthenticator CreateSecurityTokenAuthenticator(SecurityTokenRequirement tokenRequirement, out SecurityTokenResolver outOfBandTokenResolver)\n\t{\n\t\toutOfBandTokenResolver = null;\n\t\tif (this.IsIssuedSecurityTokenRequirement(tokenRequirement) || tokenRequirement.TokenType == CentralAuthToken.TOKEN_TYPE)\n\t\t\treturn new CentralAuthTokenAuthenticator();\n\t\telse\n\t\t\treturn base.CreateSecurityTokenAuthenticator(tokenRequirement, out outOfBandTokenResolver);\n\t}\n\n\tpublic override SecurityTokenSerializer CreateSecurityTokenSerializer(SecurityTokenVersion version)\n\t{\n\t\treturn new CentralAuthTokenSerializer();\n\t}\n}\n</code></pre>\n\n<p>Now when I run the app, my custom credentials and token manager do get created.\nHowever, in the method:</p>\n\n<pre><code>CreateSecurityTokenProvider(SecurityTokenRequirement tokenRequirement)\n{\n    ...\n}\n</code></pre>\n\n<p>The tokenRequirement.TokenType comes across as something other than my custom token. That brings up my <strong>1st question</strong>: How the heck does WCF know what the token requirements are?</p>\n\n<p>Also, the method:</p>\n\n<pre><code>public override SecurityTokenSerializer CreateSecurityTokenSerializer(SecurityTokenVersion version)\n{\n    return new CentralAuthTokenSerializer();\n}\n</code></pre>\n\n<p>Does get called once by the client, but none of the methods on the returned token serializer are ever called. This indicates to me that the custom token is never being sent across the wire. I assume this is because the call to CreateSecurityTokenProvider() never returned my custom token provider, since the SecurityTokenRequirement is never passed in indicating my custom token is needed.</p>\n\n<p>On the client side, I have:</p>\n\n<pre><code>public class CentralAuthorizationManagerClient : ClientBase&lt;ICentralAuthorizationManager&gt;, ICentralAuthorizationManager, IDisposable\n{\n\tpublic PFPrincipal GenerateToken()\n\t{\n\t\tif (!this.ChannelFactory.Endpoint.Behaviors.Contains(typeof(CentralAuthCredentials)))\n\t\t\tthrow new ArgumentException(\"Must set CentralAuthCredentials before calling this method.\");\n\t\treturn base.Channel.GenerateToken();\n\t}\n\n\tpublic PFPrincipal GenerateToken(CentralAuthToken token)\n\t{\n\t\tthis.ChannelFactory.Endpoint.Behaviors.Remove&lt;ClientCredentials&gt;();\n\t\tthis.ChannelFactory.Endpoint.Behaviors.Add(new CentralAuthCredentials(token));\n\t\treturn this.GenerateToken();\n\t}\n</code></pre>\n\n<p>These methods are basically supposed to remove the default credentials from the endpoint and attach a new instance of my custom CentralAuthCredentials. (I grabbed this Remove/Add combo from an MSDN article somewhere).</p>\n\n<p>In the configuration:</p>\n\n<pre><code>\t&lt;behaviors&gt;\n\t\t&lt;endpointBehaviors&gt;\n\t\t\t&lt;behavior name=\"Server2ServerEndpointBehavior\"&gt;\n\t\t\t\t&lt;clientCredentials type=\"MyApp.Security.CentralAuthCredentials, MyApp\"&gt;\n\t\t\t\t\t&lt;clientCertificate findValue=\"localhost\" x509FindType=\"FindBySubjectName\" storeLocation=\"CurrentUser\" storeName=\"My\" /&gt;\n\t\t\t\t\t&lt;serviceCertificate&gt;\n\t\t\t\t\t\t&lt;authentication certificateValidationMode=\"None\" revocationMode=\"NoCheck\" /&gt;\n\t\t\t\t\t&lt;/serviceCertificate&gt;\n\t\t\t\t&lt;/clientCredentials&gt;\n\t\t\t&lt;/behavior&gt;\n\t\t&lt;/endpointBehaviors&gt;\n\t&lt;/behaviors&gt;\n\n\t&lt;bindings&gt;\n\t\t&lt;wsHttpBinding&gt;\n\t\t\t&lt;binding name=\"wsHttpServer2Server\"&gt;\n\t\t\t\t&lt;security mode=\"Message\"&gt;\n\t\t\t\t\t&lt;message clientCredentialType=\"UserName\" /&gt;\n\t\t\t\t&lt;/security&gt;\n\t\t\t&lt;/binding&gt;\n\t\t&lt;/wsHttpBinding&gt;\n\t&lt;/bindings&gt;\n</code></pre>\n\n<p>Note that the behavior's clientCredentials type is set to my custom client credentials. However, at the moment I still have the binding's clientCredentialType set to \"UserName\". This brings up my <strong>2nd question</strong>: What the heck should clientCredentialType=\"?\" be set to if I'm using custom credentials? According to MSDN, the available values for <em>Message</em> security are: <em>None</em>, <em>Windows</em>, <em>UserName</em>, <em>Certificate</em>, and <em>IssuedToken</em>.</p>\n\n<p>Any ideas? Hopefully I'm just missing something simple?  There are like 6 more classes to the entire implementation, but I tried to only include the bits needed to understand the situation...</p>\n\n<p><hr /></p>\n\n<p><strong>UPDATE #1:</strong></p>\n\n<p>I've been working on this all day, and thanks to a few sources, I realized that part of what I was missing was the very last step on <a href=\"http://msdn.microsoft.com/en-us/library/ms731872.aspx\" rel=\"nofollow\">this page</a>, which is adding the TokenParameters to the binding, so that the binding knows what the token looks like. That is the answer to my original 1st question; \"what the heck sets up the token requirements?\" Answer: the TokenParameters assigned to the binding.</p>\n\n<p>So now I added the following extension which sets the TokenParameters on the binding:</p>\n\n<pre><code>public sealed class CentralAuthTokenBindingExtension : BindingElementExtensionElement\n{\n\tpublic CentralAuthTokenBindingExtension()\n\t\t: base()\n\t{\n\t}\n\n\tpublic override Type BindingElementType\n\t{\n\t\tget { return typeof(SymmetricSecurityBindingElement); }\n\t}\n\n\tprotected override System.ServiceModel.Channels.BindingElement CreateBindingElement()\n\t{\n\t\tX509SecurityTokenParameters protectionParams = new X509SecurityTokenParameters();\n\t\tprotectionParams.InclusionMode = SecurityTokenInclusionMode.Never;\n\n\t\tSymmetricSecurityBindingElement innerBindingElement = new SymmetricSecurityBindingElement();\n\t\tinnerBindingElement.EndpointSupportingTokenParameters.SignedEncrypted.Add(new CentralAuthTokenParameters());\n\t\t//innerBindingElement.MessageProtectionOrder = MessageProtectionOrder.SignBeforeEncrypt;\n\t\tinnerBindingElement.ProtectionTokenParameters = protectionParams;\n\n\t\treturn innerBindingElement;\n\t}\n}\n\n\t&lt;extensions&gt;\n\t\t&lt;bindingElementExtensions&gt;\n\t\t\t&lt;add name=\"CentralAuthCreds\" type=\"MyApp.Security.Configuration.CentralAuthTokenBindingExtension, MyApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\" /&gt;\n\t\t&lt;/bindingElementExtensions&gt;\n\t&lt;/extensions&gt;\n\n\t&lt;bindings&gt;\n\t\t&lt;customBinding&gt;\n\t\t\t&lt;binding name=\"wsHttpServer2Server\"&gt;\n\t\t\t\t&lt;CentralAuthCreds /&gt;\n\t\t\t\t&lt;binaryMessageEncoding /&gt;\n\t\t\t\t&lt;httpTransport /&gt;\n\t\t\t&lt;/binding&gt;\n\t\t&lt;/customBinding&gt;\n\t&lt;/bindings&gt;\n</code></pre>\n\n<p>Well that gets me a step further. Now I get a new exception on the server: </p>\n\n<pre><code>\"The security token manager cannot create a token authenticator for requirement ...\"\n</code></pre>\n\n<p>It looks like WCF is using some default token manager to try to deal with my custom token, instead of my custom token handler (my custom token handler's constructor is never called).  I <em>think</em> this is happening because for the <em>client</em>, I have this config:</p>\n\n<pre><code>&lt;endpointBehaviors&gt;\n    &lt;behavior name=\"Server2ServerEndpointBehavior\"&gt;\n        &lt;clientCredentials type=\"MyApp.Security.CentralAuthCredentials, MyApp\"&gt;\n</code></pre>\n\n<p>But on the <em>server</em> I don't have any equivalent to let it know about the custom client credentials. So, <strong>new question</strong>: Where in the config for the server do I tell it what the custom ClientCredentials are?</p>\n\n<p><hr /></p>\n\n<p><strong>Update #2:</strong></p>\n\n<p>Well, I finally figured out a bit more of the puzzle.  I had only implemented a ClientCredentials implementation, thinking that the client sends creds, and thats it. The client doesnt authenticate the service, so I don't need custom ServiceCredentials.  Well, I was wrong. The specified ServiceCredentials authenticates the token from the ClientCredentials, and vice-versa. So I just had to add a custom ServiceCredentials implementation that passed the same TokenSerializer and TokenAuthenticator classes.</p>\n\n<p>On to the next issue: WCF is now ignoring my x509 certs specified in config that were working fine with UserName auth.  I'm going to open a whole new question for this one!</p>\n"},{"tags":["c#","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12930531,"title":"Hosting a WCF service using Window Service using a non-local host domain","body":"<p>I would like to host internet based net-tcp WCF service through window service rather than IIS?\nWhat I want to know is, is it possible for the end point URI to be something other than non-localhost domain based URI.\nSo for e.g. I would like to access the service at <code>&lt;http://dev1/myservice&gt;</code> rather than a standard <code>&lt;http://localhost:90/myservice</code>> which is what almost all the documented examples mention.\nIs what I'm trying to do even possible with hosting using a window service in mind (obviously with IIS hosting, I know it's possible)</p>\n"},{"tags":["c#","jquery","asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":10250839,"title":"WCF Web Service Not Working","body":"<p>I have a WCF service called \"WebMethods\". Below is my code.</p>\n\n<p>In IWebMethods.cs:</p>\n\n<pre><code>[ServiceContract(Name = \"WebMethods\")]\npublic interface IWebMethods\n{\n    [OperationContract]\n    [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped, Method = \"POST\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\n    String Test();\n}\n</code></pre>\n\n<p>in WebMethods.cs:</p>\n\n<pre><code>public class WebMethods : IWebMethods\n{\n    public String Test()\n    {\n        return \"This is a test YEAH!!\";\n    }\n}\n</code></pre>\n\n<p>and the calling javascript:</p>\n\n<pre><code>    $.ajax({\n        url: 'WebMethods.svc/Test',\n        type: \"POST\",\n        contentType: \"application/json; charset=utf-8\",\n        dataType: \"json\",\n        data: null,\n        async: false,\n        success: function (data) {\n            alert(data);\n        },\n        error: function (xhr, textStatus, errorThrown) {\n            alert(errorThrown);\n        }\n    });\n</code></pre>\n\n<p>When I execute my javascript I get the error \"Internal Server Error\". Can somebody please tell me what I am doing wrong or at least what I can do to troubleshoot this?</p>\n"},{"tags":["wcf","jquery-ajax","jquery-mobile"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":174,"score":0,"question_id":12905189,"title":"Calling an AJAX Enabled WCF Service from jQuery","body":"<p>I am developing a mobile application using PhoneGap and jQuery Mobile. My aim is to create a web service which will enable the client (mobile) to query against a database.</p>\n\n<p>After some research, I found out that AJAX Enabled Services might be what I was looking for.\nSo, I began by creating an AJAX-Enabled WCF Service and for now I added only the following method:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"POST\", RequestFormat = WebMessageFormat.Json)]\npublic string GetString()\n{\n    return \"Hello there\";\n}\n</code></pre>\n\n<p>My web.config looks like this:</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;system.web&gt;\n        &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n    &lt;/system.web&gt;\n\n    &lt;system.serviceModel&gt;\n        &lt;behaviors&gt;\n            &lt;endpointBehaviors&gt;\n                &lt;behavior name=\"WebApplication1.MobileServiceAspNetAjaxBehavior\"&gt;\n                    &lt;enableWebScript /&gt;\n                &lt;/behavior&gt;\n            &lt;/endpointBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"\n            multipleSiteBindingsEnabled=\"true\" /&gt;\n        &lt;services&gt;\n            &lt;service name=\"WebApplication1.MobileService\"&gt;\n                &lt;endpoint address=\"\" behaviorConfiguration=\"WebApplication1.MobileServiceAspNetAjaxBehavior\"\n                    binding=\"webHttpBinding\" contract=\"WebApplication1.MobileService\" /&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>After finishing off this service, I called from the client using the following method:</p>\n\n<pre><code>$.ajax({\n    type: \"POST\",\n    url: \"http://localhost:11634/MobileService.svc/GetString\",\n    contentType: \"application/json\",\n    data: \"{}\",\n    dataType: \"json\",\n    success: function (result) {\n    $(\"#textbox\").text(result);\n    },        \n    error: function (textStatus) {\n        alert(textStatus);\n    }\n});\n</code></pre>\n\n<p>When calling the service, I am getting the following error <code>[object Object]</code>. Can you guide me on what am I doing wrong and whether I am using the right technologies please?</p>\n"},{"tags":[".net","wcf","reliablesession"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12872017,"title":"WCF - Binding.ReceiveTimeout & ReliableSession.InactivityTimeout","body":"<p>I am trying to make a WCF service which uses callbacks to the client. I would like the channel to be kept open as long as there is a connection (internet, network) and either the client or channel have not explicitly closed the channel.</p>\n\n<p>In order to keep the channel open (even without activity) I found the reliable sessions that WCF supports. I see that by using reliable sessions, there are two timers which one needs to take into consideration: the <code>Binding.ReceiveTimeout</code> and the <code>ReliableSession.InactivityTimeout</code>. </p>\n\n<p>After searching on the internet, I am still unable to understand exactly how these two work together. I know that if either of the two times out, the connection goes into faulted state.</p>\n\n<p>My first question: What exactly happens when reliable sessions are enable?</p>\n\n<p>My second question: <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.receivetimeout.aspx\" rel=\"nofollow\">Here</a>, why does msdn say the following?</p>\n\n<blockquote>\n  <p>Since the connection is dropped if either inactivity timer fires,\n  increasing InactivityTimeout once it is greater than ReceiveTimeout\n  has no effect. The default for both of these timeouts is 10 minutes,\n  so you always have to increase both of them to make a difference when\n  using a reliable session.</p>\n</blockquote>\n"},{"tags":["wcf","c#-4.0","silverlight-4.0","wcf-binding","pollingduplexhttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12927055,"title":"How to register a custom binding extension in code for a self hosted WCF service?","body":"<p>I need a suggestion to register my custom binding extension for my Silverlight duplex commnication (to use PollingDuplexHttpBinding) for my self hosted WCF service.</p>\n\n<p>Below are the binding details, which I got from <a href=\"http://msdn.microsoft.com/en-us/library/cc645027%28VS.95%29.aspx\" rel=\"nofollow\">this msdn page</a>.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Register the binding extension from the SDK. --&gt;\n   &lt;extensions&gt;\n      &lt;bindingExtensions&gt;\n        &lt;add name=\"pollingDuplexHttpBinding\"\n            type=\"System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement,System.ServiceModel.PollingDuplex, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n      &lt;/bindingExtensions&gt;\n   &lt;/extensions&gt; \n</code></pre>\n\n<p>I need add the above xml code through the codebehind into my custom binding.</p>\n"},{"tags":[".net","wcf","http","compact-framework","basichttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12265266,"title":"WCF connection reset immediately after established","body":"<p>I have a self hosted WCF service and a compact framework client communicating over BasicHttpBinding. When the client makes a service call, it fails saying \"underlying connection was closed\".</p>\n\n<p>I enabled WCF tracing and see <strong>no errors in SvcTraceViewer</strong>. I also ran a network capture via Wireshark and see the following:\n<img src=\"http://i.stack.imgur.com/sMaWh.png\" alt=\"enter image description here\"></p>\n\n<p>It looks like the server sends a RST immediately after accepting the TCP connection (but the client hasn't sent anything yet). This is pretty weird. </p>\n\n<p>I haven't done much HTTP debugging but I looked at http.sys log files in \\system32\\Logfiles\\HTTPERR and see no entries around the error time. </p>\n\n<p>Any ideas what might cause this behavior, or how I might go about debugging this?</p>\n"},{"tags":["c#","wcf","exchange"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":8617621,"title":"keeping mail from going into the sent folder when using Exhange Web Service to send","body":"<p>We are using Exchange Web Services to send mail in out WCF application, here is a little code snippet. </p>\n\n<pre><code>//using ExchangeWebServices;          \nvar email = new MessageType();\nemail.IsFromMe = false;\n\nemail.From = new SingleRecipientType();\nemail.From.Item = new EmailAddressType();\nemail.From.Item.EmailAddress = message.From;\n\nemail.ToRecipients = message.To.Select(to =&gt; new EmailAddressType { EmailAddress = to }).ToArray();\n</code></pre>\n\n<p>It works fine but it's filling up the sent mail folder in for the \"appserver\" user who sends the mail. Is this something we can configure in the app to \"not copy it to the sent folder\" or does this need to be done by an administrator for the exchange serer? </p>\n\n<p>The reason I ask is cause the admin is a third party consultant so if it could be done without bothering them that would be great. </p>\n\n<p>Thanks! Happy Holidays!</p>\n"},{"tags":["wcf","windows-8","microsoft-metro"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12927532,"title":"Could not establish trust relationship for the SSL/TLS secure channel with authority when calling wcf service from metro app","body":"<p>I am creating a Metro apps to read the data from WCF Service. The WCF service is using wsHttpBinding with certificate authentication. I am trying to read the certificate and validate the certificate at the Metro app.</p>\n\n<p>In .net 4.0, <code>X509Certificate2</code> in<code>System.Security.Cryptography.X509Certificates</code> and <code>SslPolicyErrors</code> in <code>System.Net.Security</code> namespace was used for doing this. I am unable to find a <code>X509Certificate2</code> and <code>SslPolicyErrors</code> class in new Win 8 APIs to do that.What are the equivalent namespaces in Metro apps.</p>\n"},{"tags":["c#",".net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":126,"score":0,"question_id":12908833,"title":"WCF REST service not passing POST request body stream when using custom binding","body":"<p>Following up from the solution to the previous question I asked <a href=\"http://stackoverflow.com/questions/12689086/adding-gzip-to-wcf-rest-service-in-c-sharp/12815919\">here</a>. It seems I now have a problem where if I use a custom binding in my .NET4 web service, then my methods that implement the web service WebInvoke contracts are no longer getting called when they contain the argument of the request body Stream.</p>\n\n<p>So here's code that runs the webservice as found from the the link above:</p>\n\n<pre><code>webserviceHost = new WebServiceHost(typeof(Service1), new Uri(\"http://localhost:8080));\nwebserviceHost.AddServiceEndpoint(typeof(IService), getBinding(), \"webservice\").Behaviors.Add(new WebHttpBehavior());\nwebserviceHost.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });\nwebserviceHost.Open();\n</code></pre>\n\n<p>Here's the WebInvoke service contract defined:</p>\n\n<pre><code>[WebInvoke(UriTemplate = \"import_data?param={value}\", Method = \"POST\", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\nWebResult importOrder(string value, Stream httpRequestPostBody);\n</code></pre>\n\n<p>And here's the method implementing the above contract:</p>\n\n<pre><code>public WebResult importOrder(String value, Stream httpRequestPostBody)\n{\n    doSomething(value, httpRequestPostBody);\n}\n</code></pre>\n\n<p>So if I try making a HTTP request through Fiddler to the webservice endpoint contract it will return a connection reset HTTP error response. If I remove the Stream httpRequestPostBody argument then it will run the method, but I have no way to get access to the raw JSON data in the request body (I can get the body but its in an XML form). So I can only gather that I'm missing something in my custom binding to ensure that the body stream of the request can be passed. Anybody got any clues?</p>\n"},{"tags":["c#","asp.net","visual-studio-2010","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12924791,"title":"Why is this service method not showing up?","body":"<p>This is my first time programming in Visual Studio and C#. I am trying to create a web service, but my GetProduct is not showing up.</p>\n\n<pre><code>  namespace GettingStartedHost\n {\n// NOTE: You can use the \"Rename\" command on the \"Refactor\" menu to change the class name \"Service1\" in code, svc and config file together.\npublic class Service1 : IService1\n{\n    public string GetData(int value)\n    {\n        return string.Format(\"You entered: {0}\", value);\n    }\n\n    public int GetProduct(int a, int b)\n    {\n        return a * b;\n    }\n\n    [ServiceContract]\n    public interface IService\n    {\n        [OperationContract]\n        int GetProduct(int a, int b);\n\n        [OperationContract]\n        string GetData(int value);\n\n        [OperationContract]\n        CompositeType GetDataUsingDataContract(CompositeType composite);\n\n\n\n    }\n\n\n    public CompositeType GetDataUsingDataContract(CompositeType composite)\n    {\n        if (composite == null)\n        {\n            throw new ArgumentNullException(\"composite\");\n        }\n        if (composite.BoolValue)\n        {\n            composite.StringValue += \"Suffix\";\n        }\n        return composite;\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>When I press CTRL-F5 to start the test server, only 2 methods show up. The GetProduct does not show up. WHat is wrong?</p>\n"},{"tags":["c#","json","wcf","serialization"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12916865,"title":"How to have a WCF DataContract with a json dynamic member","body":"<p>at the project I am working on, we have a requirement to have a DataContract that can contain some undefined JSON.</p>\n\n<p>The DataMember is some JSON that makes sense to the client only. We want to allow the client to send us json we do not know about.</p>\n\n<p>Example:</p>\n\n<pre><code>public class Contract\n{\n    [DataMember]\n    public int clientId;\n    [DataMember]\n    public string json;\n}\n</code></pre>\n\n<p>Obviously, having a contract defined like that would require the client to escape the json like this:</p>\n\n<pre><code>{\n    \"clientId\":1,\n    \"json\": \"{\\\"test\\\":\\\"json\\\"}\"\n}\n</code></pre>\n\n<p>Obviously, this is not what we need. The json the client should sent us should look like this:</p>\n\n<pre><code>{\n    \"clientId\":1,\n    \"json\": {\"test\":\"json\"}\n}\n</code></pre>\n\n<p>Possible solutions we investigated:</p>\n\n<ol>\n<li>use Stream as contract parameters for the request's body. Works but puts the work on our side instead of using the framework.</li>\n<li>Defining \"json\" as a DynamicObject. Does not work. Was not able to get the property written properly.</li>\n<li>Using Newtonsoft library, change the default contract serializer in the WCF endpoint to serialize all inputs to a JObject. We mst also handle serialization on the request, and it causes problems in our application. We'd prefer to avoid this way.</li>\n</ol>\n\n<p>Does anyone have a possible solution to this problem?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The service offers rest json resources. It defines a single endpoint with webHttpBinding.\nThe operation is defined like this (stripped down for simplicity):</p>\n\n<pre><code>[WebInvoke(Method = \"POST\", UriTemplate = \"...\", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]\n[OperationContract]\nStream Create(Contract c);\n</code></pre>\n\n<p>Also, the service is decorated with following attribute:</p>\n\n<pre><code>[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]\n</code></pre>\n\n<p>Thank you.\nJF</p>\n"},{"tags":["android","json","wcf","post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12922570,"title":"Android JSON post to WCF Service","body":"<p>I having a problem with my android client trying to post a JSON class to my wcf service.\nHere is the code for android client : </p>\n\n<pre><code>    public HttpResponse TestPost() throws Exception \n{\n\n    HttpPost httpost = new HttpPost(url+\"/TestPost\");\n\n    JSONStringer img = new JSONStringer()\n        .object()\n        .key(\"TestModel\")\n            .object()\n                .key(\"p1\").value(\"test\")\n                .key(\"p2\").value(\"test\")\n                .key(\"p3\").value(1)\n                .key(\"p4\").value(\"test\")\n                .key(\"p5\").value(2)\n                .key(\"p6\").value(\"test;test\")\n            .endObject()\n        .endObject();\n        StringEntity se = new StringEntity(img.toString());\n\n    httpost.setEntity(se);\n\n    httpost.setHeader(\"Accept\", \"application/json\");\n    httpost.setHeader(\"Content-type\", \"application/json\");\n\n    return httpclient.execute(httpost);\n}\n</code></pre>\n\n<p>Here is code for Wcf</p>\n\n<pre><code>    [OperationContract]\n    [WebInvoke(Method = \"POST\",\n        RequestFormat = WebMessageFormat.Json,\n        ResponseFormat = WebMessageFormat.Json,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"TestPost\")]\n    void TestPost(TestModel tm);\n\n\n\n\n\n[DataContract]\npublic class TestModel\n{\n    [DataMember(Name = \"p1\")]\n    public string p1 { get; set; }\n\n    [DataMember(Name = \"p2\")]\n    public string p2{ get; set; }\n\n    [DataMember(Name = \"p3\")]\n    public int p3 { get; set; }\n\n    [DataMember(Name = \"p4\")]\n    public string p4 { get; set; }\n\n    [DataMember(Name = \"p5\")]\n    public int p5 { get; set; }\n\n    [DataMember(Name = \"p6\")]\n    public string p6 { get; set; }\n</code></pre>\n\n<p>}</p>\n\n<p>In my wcf method the parameter TestModel tm is always null. What could possibly be wrong?</p>\n"},{"tags":["wcf","exception","maxreceivedmessagesize"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2233,"score":3,"question_id":2569715,"title":"WCF MaxReceivedMessageSize property not taking","body":"<p>Searched with no luck...</p>\n\n<p>I keep getting </p>\n\n<blockquote>\n  <p>The maximum message size quota for incoming messages (65536) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element.</p>\n</blockquote>\n\n<p>It makes sense, so I go into both Server and client config and make the change:</p>\n\n<p>Client</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_IFileUpload\"\n           closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" transferMode=\"Streamed\" messageEncoding=\"Text\" maxBufferSize=\"65536\" maxReceivedMessageSize=\"67108864\"&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://localhost/services/FileUpload.svc\"\n          binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IFileUpload\"\n          contract=\"CFTW.FileUpload.IFileUpload\" name=\"BasicHttpBinding_IFileUpload\" /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Server</p>\n\n<pre><code>    &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_IFileUpload\"\n\n                 transferMode=\"Streamed\" messageEncoding=\"Text\" maxBufferSize=\"67108864\" maxBufferPoolSize=\"67108864\" maxReceivedMessageSize=\"67108864\"&gt;\n\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n\n    &lt;/bindings&gt;\n    &lt;services&gt;\n      &lt;service name=\"BasicHttpBinding_IFileUpload\"&gt;\n        &lt;endpoint address=\"~/services/FileUpload.svc\"\n            binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IFileUpload\"\n            contract=\"CFTW.FileUpload.IFileUpload\"&gt;&lt;/endpoint&gt;\n      &lt;/service&gt;\n\n    &lt;/services&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I'm not sure why it's not working (otherwise I'd fix it:)).  It's running on .NET 4.0 RC.</p>\n"},{"tags":["wcf","c#-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12923731,"title":"WCF application to get and put files to FTP Server","body":"<p>How to post the data to an FTP server using WCF application? what should be the ABC details to develop such a software?\nThakn you,\nSmith</p>\n"},{"tags":["wcf","soap","certificate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":406,"score":0,"question_id":10243060,"title":"WCF customBinding with client certificate","body":"<p>I am trying to create a <code>customBinding</code> to call a web service with SOAP 1.2, TLS and a client certificate. As I undestand, this only works with <code>customBinding</code>. </p>\n\n<p>I have defined the following behaviour:</p>\n\n<pre><code>&lt;behaviors&gt;\n    &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"TehRightBehaviour\"&gt;\n            &lt;clientCredentials&gt;\n                &lt;serviceCertificate&gt;\n                    &lt;defaultCertificate findValue=\"WebInterface\" x509FindType=\"FindBySubjectName\" /&gt;\n                    &lt;authentication revocationMode=\"NoCheck\" certificateValidationMode=\"None\" /&gt;\n                &lt;/serviceCertificate&gt;\n            &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n    &lt;/endpointBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p>The client does find the certificate, if I specify a wrong name, it raises and error. My binding looks like:</p>\n\n<pre><code>&lt;customBinding&gt;\n    &lt;binding name=\"TehRealBinding\"&gt;\n        &lt;transactionFlow /&gt;\n        &lt;textMessageEncoding messageVersion=\"Soap12\" /&gt;\n        &lt;security authenticationMode=\"MutualCertificate\" /&gt;\n        &lt;httpsTransport requireClientCertificate=\"true\" /&gt;\n    &lt;/binding&gt;\n&lt;/customBinding&gt;\n</code></pre>\n\n<p>And I combine it in the end point like:</p>\n\n<pre><code>&lt;client&gt;\n    &lt;endpoint address=\"https://hestia1:8081/cm/main\"\n        behaviorConfiguration=\"TehRightBehaviour\"\n        binding=\"customBinding\"\n        bindingConfiguration=\"TehRealBinding\"\n        contract=\"BrightMain.CMMainService\"\n        name=\"cmmain\" /&gt;\n&lt;/client&gt;\n</code></pre>\n\n<p>The problem is, if I call the web service, it raises an Exception saying</p>\n\n<blockquote>\n  <p>\"The client certificate is not provided. Specify a client certificate in ClientCredentials.\"</p>\n</blockquote>\n\n<p>I found that there are several points to specify certificates and obviously I am using the wrong one. So my question is: which is the right one?</p>\n\n<p>Thanks in advance,\nChristoph</p>\n\n<p><strong>Edit:</strong> Perhaps, I should learn to read, because specifying the <code>&lt;serviceCertificate&gt;</code> is obivously not suffictient. I will check this now...</p>\n"},{"tags":["asp.net","wcf","sharepoint2010","codebehind","service-reference"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12922865,"title":"SharePoint UserControl without Codebehind: How do I add/consume a Service Reference?","body":"<p>I have a several projects full of .ascx UserControls that contain C# code blocks rather than having codebehind pages.  I'm looking to consume a WCF service I've created, and I've added the Service Reference to the project, but I'm having trouble referencing it on the page using various directives.</p>\n\n<p>Is this possible?  The UserControls are used inside of WebParts in SharePoint 2010 if that makes a difference.  Web service is deployed to _vti_bin if that matters as well, and is definitely operational (I've tested the exposed methods via a console app and through deployable projects which utilize codebehinds).</p>\n"},{"tags":["asp.net","wcf","silverlight","silverlight-4.0","wcf-ria-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12910746,"title":"Silverlight error - While creating Workbook object of interope excel","body":"<p>Below error is coming while I create using below line from domain service.</p>\n\n<pre><code>Microsoft.Office.Interop.Excel.Workbook excel = new Microsoft.Office.Interop.Excel.Workbook();\n\n\n---------------------------\nError\n---------------------------\nInvoke operation 'CallExcel' failed. Retrieving the COM class factory for component with CLSID {00020819-0000-0000-C000-000000000046} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).\n---------------------------\nOK   \n---------------------------\n</code></pre>\n\n<p>What is cause of this wierd error? If i do with word object then it works with interop too.</p>\n"},{"tags":["wcf","wcf-binding","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12922878,"title":"How \"Transport Security with Certificate Authentication\" works","body":"<p>I really need to understand how \"Transport Security with Certificate Authentication\" works.\nwhen I use certificate to authenticate the client what's really happened??\nwhat does the client do with it's certificate ??\nthanks</p>\n"},{"tags":["c#",".net","wcf","events"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":12848502,"title":"WCF sending Event to Client","body":"<p>I have an application (server) and a client connected by WCF over named pipes (all .NET 4.0). All works fine. Both calling methods from client to server and server to client (callbacks) work fine. Now, how do I simply send an event from the server to the client?</p>\n\n<p>What I try to accomplish is:</p>\n\n<ul>\n<li>Client calls a long term method on the server that returns immediately</li>\n<li>When server is ready processing it sends an Event to the client</li>\n<li>The client can then call a method on the server to get the results</li>\n</ul>\n\n<p>How do I do this in a clean manner?</p>\n"},{"tags":["c#","wcf","exception-handling","wcf-client","wcf-rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":253,"score":0,"question_id":11466537,"title":"WCF strange behaviour","body":"<p>I got this when I consume a webservice:</p>\n\n<blockquote>\n  <p>Operation 'Login' of contract 'IServices' specifies multiple request body parameters to be serialized without any wrapper elements. At most one body parameter can be serialized without wrapper elements. Either remove the extra body parameters or set the BodyStyle property on the WebGetAttribute/WebInvokeAttribute to Wrapped.</p>\n</blockquote>\n\n<p>I use interface look like : </p>\n\n<pre><code>namespace DreamServices\n{\n    // NOTE: You can use the \"Rename\" command on the \"Refactor\" menu to change the interface name \"IService1\" in both code and config file together.\n    [ServiceContract]\n    public interface IServices\n    {\n        [OperationContract]\n        [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Json,\n\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n\n        UriTemplate = \"LogIn/{username}/{password}\")]\n        string Login(string username, string password);\n\n        [OperationContract]\n        [WebInvoke(\n            Method = \"GET\",\n            ResponseFormat = WebMessageFormat.Json,\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            UriTemplate = \"WaletTotalAmount/{userid}\")]\n        double? WaletTotalAmount(string userid);\n\n        [OperationContract]\n        [WebInvoke(\n            Method = \"GET\",\n            ResponseFormat = WebMessageFormat.Json,\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            UriTemplate = \"UserService/{userid}\")]\n        IList&lt;UserServiceses&gt; UserService(string userid);\n\n        [OperationContract]\n        [WebInvoke(Method = \"POST\",\n            ResponseFormat = WebMessageFormat.Json,\n            RequestFormat = WebMessageFormat.Json,\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            UriTemplate = \"InsertUpdateWallet/{userid}/{Amount}/{ComissionAmount}\")]\n        void InsertUpdateWallet(string userid, string Amount, string ComissionAmount);\n\n    }\n}\n</code></pre>\n\n<p>and I host it then I add web reference to my site and modify the web.config such that the   will be like  </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"web\"&gt;\n          &lt;webHttp /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"defaultRest\"&gt;\n          &lt;readerQuotas maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxDepth=\"64\" maxNameTableCharCount=\"2147483647\" /&gt;\n          &lt;security mode=\"None\" /&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n\n    &lt;client&gt;\n      &lt;endpoint address=\"http://localhost:1381/PMAHost/Service.svc\" binding=\"webHttpBinding\" contract=\"ServiceReference.IServices\" behaviorConfiguration=\"web\"/&gt;\n    &lt;/client&gt;\n\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Any idea how to fix this error? </p>\n"},{"tags":["wcf","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12918062,"title":"404 Error when trying to execute web service","body":"<p>I have a simple web service I have created. I'm using Visual Studio 2012 .NET 4.5.</p>\n\n<p>Here is the service contract:</p>\n\n<pre><code>using System.Runtime.Serialization;\nusing System.ServiceModel;\n\nnamespace GEMS.Core.WCFService\n{\n    [ServiceContract]\n    public interface IMenuService\n    {\n        [OperationContract]\n        void AddMenuItem(string menuId, string parentId, string title, string description, string url);\n        [OperationContract]\n        void UpdateMenuItem(string menuId, string parentId, string title, string description, string url);\n        [OperationContract]\n        void DeleteMenuItem(string menuId);\n        [OperationContract]\n        MenuEntry[] GetAllMenuItems();\n    }\n\n    [DataContract]\n    public class MenuEntry\n    {\n        [DataMember]\n        public string MenuId { get; internal set; }\n        [DataMember]\n        public string ParentId { get; internal set; }\n        [DataMember]\n        public string Title { get; internal set; }\n        [DataMember]\n        public string Description { get; internal set; }\n        [DataMember]\n        public string Url { get; internal set; }\n    }\n}\n</code></pre>\n\n<p>The relevant portion of the app.config is:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;services&gt;\n    &lt;service name=\"GEMS.Core.WCFService.MenuService\"&gt;\n      &lt;host&gt;\n        &lt;baseAddresses&gt;\n          &lt;add baseAddress=\"http://localhost:8020/GEMS.Core.WCFService/MenuService/\" /&gt;\n        &lt;/baseAddresses&gt;\n      &lt;/host&gt;\n      &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"GEMS.Core.WCFService.IMenuService\" &gt;\n        &lt;identity&gt;\n          &lt;dns value=\"localhost\"/&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n      &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n  &lt;behaviors&gt;\n    &lt;serviceBehaviors&gt;\n      &lt;behavior&gt;\n        &lt;serviceMetadata httpGetEnabled=\"True\" httpsGetEnabled=\"True\"/&gt;\n        &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n      &lt;/behavior&gt;\n    &lt;/serviceBehaviors&gt;\n  &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I publish it to my IIS server (local to my box).</p>\n\n<p>In the client app, I create a service reference. When I click Discover, it finds:</p>\n\n<pre><code>http://localhost:8020/GEMS.Core.WCFService/MenuService/mex\n</code></pre>\n\n<p>When I run my client, however, I get the following message:</p>\n\n<pre><code>There was no endpoint listening at:\nhttp://localhost:8020/GEMS.Core.WCFService/MenuService/ that could\naccept the message. This is often caused by an incorrect address or\nSOAP action. See InnerException, if present, for more details.\n</code></pre>\n\n<p>The inner exception merely says that it got a 404 error from the web server.</p>\n\n<p>The client's .config file has the following auto-generated xml:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;bindings&gt;\n    &lt;basicHttpBinding&gt;\n      &lt;binding name=\"BasicHttpBinding_IMenuService\" /&gt;\n    &lt;/basicHttpBinding&gt;\n  &lt;/bindings&gt;\n  &lt;client&gt;\n    &lt;endpoint address=\"http://localhost:8020/GEMS.Core.WCFService/MenuService/\"\n      binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IMenuService\"\n      contract=\"WCF_MenuService.IMenuService\" name=\"BasicHttpBinding_IMenuService\" /&gt;\n  &lt;/client&gt;\n &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I've been going around in circles for hours and can't figure out what I've got glitched up, but surely I've done somethign wrong.</p>\n\n<p>Not sure that it matters, but the client is an ASP.NET MVC app.</p>\n"},{"tags":[".net","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12918116,"title":"WCF Server Side settings changeable by client app","body":"<p>I have a WCF service that takes in files as reqeusts, processes the files, and returns responses asynchronously to the client. I want to add the ability to have a different client control the type and number of responses that are generated by the service.</p>\n\n<p>For example, my service might return good responses, bad responses, and error responses. I want a UI client to be able to turn on/off each response type and change the number of good/bad responses that are returned.</p>\n\n<p>This is my current service:</p>\n\n<pre><code>[ServiceContract(\nSessionMode = SessionMode.Required,\nCallbackContract = typeof(IEmulatorServiceCallback))]\npublic interface IEmulatorService\n{\n    [OperationContract]\n    void Submit(TransferredFile file);\n\n    [OperationContract]\n    bool Subscribe();\n\n    [OperationContract]\n    bool Unsubscribe();\n}\n\n[ServiceContract]\npublic interface IEmulatorServiceCallback\n{\n    [OperationContract(IsOneWay = true)]\n    void OnResponseReady(TransferredFile file);\n}\n</code></pre>\n\n<p>On the client side, I have the following.</p>\n\n<pre><code>public interface IResponseListener : IEmulatorServiceCallback\n{\n    event EventHandler&lt;MessageEventArgs&gt; OnMessageReceived;\n    bool Connect();\n    void Disconnect();\n}\n\n[CallbackBehavior(\n    ConcurrencyMode = ConcurrencyMode.Single,\n    UseSynchronizationContext = false)]\n[Export(typeof(IResponseListener))] // MEF\npublic class CallbackListener : IResponseListener\n{\n    // Sets up and creates the service to be used.\n    public CallbackListener()\n    {\n        DuplexChannelFactory&lt;IEmulatorService&gt; pipeFactory =\n              new DuplexChannelFactory&lt;IEmulatorService&gt;(\n                  new InstanceContext(this),\n                  new NetTcpBinding(),\n                  new EndpointAddress(\"net.tcp://localhost:8000/EmulatorService\"));\n\n        _service = pipeFactory.CreateChannel();\n    }\n\n    // Connects &amp; Subscribes as service callback\n    public bool Connect() { /* Code removed */ }\n\n    // Removed as service callback\n    public void Disconnect() { /* Code removed */ }\n\n    // Implementation of interface that raises event to be captured by client   \n    public void OnResponseReady(TransferredFile file) { /* Code removed */ }\n\n    [Export]\n    IEmulatorService _service;\n\n    // Event raised when the OnResponseReady method is called\n    public event EventHandler&lt;MessageEventArgs&gt; OnMessageReceived;\n}\n\npublic interface IServiceProxy\n{\n    void SendMessage(string path);       \n}\n\n[Export(typeof(IServiceProxy))]\npublic class EmulatorServiceProxy : IServiceProxy\n{\n    public void SendMessage(string path)\n    {\n        var file = new TransferredFile(\n            File.ReadAllBytes(path),\n            Path.GetFileName(path));\n\n        EmulatorService.Submit(file);\n    }\n\n    [Import]\n    public IEmulatorService EmulatorService { get; set; }\n}\n</code></pre>\n\n<p>Not to get too deep into the full implementation, but there is a bootstrapper for the client that gets the IResponseListener and IServiceProxy from MEF, then passes them into the ViewModel's constructor to be used there. So, the ViewModel, which is bound to a WPF app, actually uses the IServiceProxy and IResponseListener to update the model.</p>\n\n<p>I expect that the client that uses the above service contract will most likely not be the same as the one that will control the settings (type/number of responses). I believe there will be one client that sets the settings at the user's request, and another client (part of a separate application) that will send requests and receive asynch responses. </p>\n\n<p>So, I'm just not sure how to approach this. There are a couple of ways I'm considering:\n1) Have a completely separate service that allows the client to change settings, and then somehow have the services share the settings contract.\n2) Add a second Interface (for the settings) that this service implements and the settings contract will be within the service as well.</p>\n\n<p>The first approach, I'm thinking it will be difficult to share these settings. However, I am using MEF, so it could be that this will make it easier. </p>\n\n<p>As for the second approach, will that even work? Can I implement two service contracts with the same service class? If so, would I have to host the services separately?</p>\n\n<p>I guess the other option is to just have all of the settings methods in the same service, but I wanted to separate them if possible so that when a client, who doesn't care about the settings, connects, they don't have to worry about those methods.</p>\n\n<p>Has anyone had to do something similar? What approach would you recommend?</p>\n\n<p>Thanks</p>\n\n<p>-g</p>\n"},{"tags":["wcf","web-services","iis7","biztalk","wcf-wshttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":40,"score":1,"question_id":12920365,"title":"What could cause \"An operation was skipped during export because it has a wildcard action\" error when publishing a service?","body":"<p>I created an Orchestration in BizTalk, which I published as a service, using the tool WCF BizTalk. This resulted in a service hosted in IIS 7. When I changed the web.config file to enable debugging, I caught the following error:</p>\n\n<pre><code>Message\nAn operation was skipped during export because it has a wildcard action. \nThis is not supported in WSDL.\n\nContract Name:ITwoWayAsync\nContract Namespace:http://BTKPruebas.pruebaWCF\nOperation Name:TwoWayMethod\n</code></pre>\n\n<p>What might be causing this?</p>\n"},{"tags":["wcf","datatable","dataset","serialization"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":8375,"score":2,"question_id":1380630,"title":"Returning DataTable objects with WCF service","body":"<p>This is a strange problem that I am having with WCF trying to send DataTable in the response. I have the following service contract:</p>\n\n<pre><code>[ServiceContract]\npublic interface ISapphireDataService {\n    [OperationContract]\n    DataTable LoadData(string query, DateTime start, DateTime end);\n\n    [OperationContract]\n    string LoadDataTest();\n}\n</code></pre>\n\n<p>And the following implementation of the methods (where provider is a class that makes the database call and returns back a DataTable):</p>\n\n<pre><code>public DataTable LoadData(string query, DateTime start, DateTime end) {\n    //DataSet temp = new DataSet();\n    //temp.Tables.Add(provider.LoadData(query, start, end).Copy());\n    //return temp;\n\n    return provider.LoadData(query, start, end).Copy();\n}\n\npublic string LoadDataTest() {\n    return \"Hello World!\";\n}\n</code></pre>\n\n<p>Now, when I leave it like this, I always get an error when calling the LoadData(...) method:</p>\n\n<p>An error occurred while receiving the HTTP response to <a href=\"http://localhost%3A8731/Design%5FTime%5FAddresses/DataProviderServiceLibrary/SapphireDataService/\" rel=\"nofollow\">http://localhost%3A8731/Design%5FTime%5FAddresses/DataProviderServiceLibrary/SapphireDataService/</a>. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.</p>\n\n<p>This is rather odd because the service is configured to use the wsHttpBinding, which I assume uses HTTP propocol. This <strong>error does not occur if I try calling the LoadDataTest() method!</strong></p>\n\n<p>So what I have done was put this table I have gotten from the database into a DataSet object and it worked! No errors or anything of the sort. <strong>BUT, the table that was returned in the DataSet was EMPTY.</strong> All the fields were Null and no data has been transfered/de-serialized properly, it seems :(</p>\n\n<p>This seems to be a common issue but I am yet to see an answer to this that works. Any ideas?</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12891360,"title":"Context and Instance in WCF","body":"<p>I am reading Juval Lwy's Programming WCF Sevices. It mentions:</p>\n\n<blockquote>\n  <p>In WCF, we have Context in which we have the instance. By default, the lifetime of the context is the same as that of the instance it hosts. We can have separate lifetimes for both.\n  WCF also allows a context to exist without an associated instance at all.</p>\n</blockquote>\n\n<p>Why would we release the instance and keep the context empty?</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12917377,"title":"Too many WCF channels","body":"<p>In our system there are multiple \"sites\" communicating with one another via WCF. Each site exposes ~20 interfaces over NetTCP binding.</p>\n\n<p>When a site consumes the interfaces of the peer site, it will open a separate TCP socket for each channel. This means that if I want to regularly use all the interfaces, ~20 TCP sockets will remain open for each peer site.</p>\n\n<p>The number of peers each site has is currently relatively small (10-15), but this will have to grow to ~100 in the near future. My concern is that this will require each site to have ~2000 incoming sockets which seems excessive. I can't put my finger on a specific problem, but it just feels wrong. For example, this greatly exceeds WCF's default MaxConcurrentConnections (default value is 10).</p>\n\n<p>Is this a good design for the system? Should I be looking at consolidating all those interfaces into a single interface (and thus a single channel)? Will I be able to send messages concurrently on a single channel (I think not)? Perhaps I should consider a message queue system?</p>\n\n<p>Any comments or ideas would be welcome.</p>\n"},{"tags":["asp.net",".net","wcf","authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12917380,"title":"Pass Forms-based \"ticket\" Client -> WcfService1 -> WcfService2","body":"<p>How can I \"forward\" Forms/cookie user \"ticket\" from one WCF web service to another? </p>\n\n<p>The scenario: \nUser login on ASP.net Web Site using Forms based authentication. SSL is used. A Silverlight application is downloaded from the site and executes. The Silverlight app performs WCF web service requests back to two services: ResourceService and TnTService, on the same web server. </p>\n\n<p>Sometimes the client calls ResourceService, other times it calls TnTService. However at some occations the client may call  TnTService first which will then in turn make a request to ResourceService (e.g. Silverlight client -> TnTService -> ResourceService). </p>\n\n<p>The question: How can I make TnTService \"forward\" the users original credentials when it is calling ResourceService? Is this at all possible when using Forms based authentication (e.g. I think Impersonation only works with Windows Authentication)?  </p>\n\n<p>For example, in TnTService do something like the following:  </p>\n\n<pre><code>    private string getCountryCode(string code)\n    {\n        ResourceServiceClient client = new ResourceServiceClient();\n        client.ClientCredentials.UserName.UserName = \"MyUser\";   // Some other way than this?? \n        client.ClientCredentials.UserName.Password = \"MyPassword\";  // &lt;-- I don't know password here! \n        ResourceService.Contract.Generated.Manufacturer manufacturer = client.GetManufacturer(code);\n        return manufacturer.Country;\n    }\n</code></pre>\n"},{"tags":["c#","visual-studio-2010","wcf","rest","scriptignore"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12916724,"title":"ScriptIgnore not working on WCF REST service application","body":"<p>I started a Visual Studio WCF Rest Service Application project where I want to have a service that returns a Json formatted message with a serialized object and I want SOME fields of the object not being serialized. I must say that my knowledge of WCF is very very basic and that I used the Rest Service Application project from Visual Studio because it's a simple way to implement what I need fast.</p>\n\n<p>Let's say this is the object I have:</p>\n\n<pre><code>public class BaseMessage\n{\n    public string errorCode { get; set; }\n    public string errorMessage { get; set; }\n}\n</code></pre>\n\n<p>And this is my code </p>\n\n<pre><code>    [WebGet(UriTemplate = \"/v1/test\", \n    ResponseFormat = WebMessageFormat.Json),OperationContract]\n\n    public BaseMessage Test()\n    {\n        return (new BaseMessage { errorCode = \"000\", errorMessage = \"test\" });\n    }\n</code></pre>\n\n<p>I've read everywhere that what I need to do is to assign the [ScriptIgnore] attribute to the properties I don't want to have serialized. But if I do, it doesn't work. I get them serialized anyway.</p>\n\n<p>The only way I have achieved what I want to do is declaring the object I want to return in this way:</p>\n\n<pre><code>[Serializable]\npublic class BaseMessage\n{\n    public string errorCode;\n    [NonSerialized]\n    public string errorMessage;\n}\n</code></pre>\n\n<p>In this way I get the class serialized as I want. But it bugs me a lot as I might not be doing this thing right. Am I doing this right? </p>\n"},{"tags":["wcf","silverlight","service","web"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12899007,"title":"WCF Silverlight enabled service \"Not Found\" error","body":"<p>I'm struggling with the following scenario (here is the big picture):</p>\n\n<p>I have a WCF Silverlight-enabled service (based on the DomainService class) into my Web project. The service is designed to be called by the Silverlight 5 clients and also by non-Silverlight consumers.</p>\n\n<p>The service displays the WSDL info at the address\n\"http://localhost/mywebapproot/Services/MailService.svc\" and therefore it can\nbe discovered and implemented by any client within the Web\nproject (which is fine).</p>\n\n<p>Here are the symptoms:</p>\n\n<ol>\n<li>The service can't be called by any\nSilverlight client (here is the problem!) The error returned is \"The remote server returned an exception: Not Found\". If I change the name of the\nservice in Web.Config (let's say I change\nMyCompany.Web.Services.MailService into MailService), the service can\nnow be called by any Silverlight client but at that time the service\nis no longer discoverable.</li>\n</ol>\n\n<p>I put includeExceptionDetailInFaults at True and tried to inspect the service with Fiddler/HTTPDebuggerPro but they didn't give me any detailed information about the exception. It looks to me that the Silverlight clients, in this configuration and for some reason, aren't able to create the .SVC file on the fly.</p>\n\n<p>Here is the implementation:</p>\n\n<p><strong>MailService.svc</strong> implementation\n    &lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"MyCompany.Web.Services.MailService\" CodeBehind=\"MailService.svc.cs\" %></p>\n\n<p><strong>MailService.svc.cs</strong> implementation</p>\n\n<pre><code>[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic sealed partial class MailService : DomainService, IMailService\n{\n}\n</code></pre>\n\n<p><strong>IMailService interface</strong></p>\n\n<pre><code>[ServiceContract(ConfigurationName = \"MyCompany.Web.Services.IMailService\")]\npublic interface IMailService\n{\n   //Some public methods flagged as [OperationContract] go here\n}\n</code></pre>\n\n<p><strong>Web.Config</strong> implementation</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"Secure_Behavior_Configuration\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\" /&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"Public_MailService_BasicHttpBinding\" transferMode=\"Streamed\"\n                        maxBufferSize=\"2147483647\"\n                        maxReceivedMessageSize=\"2147483647\"\n                        maxBufferPoolSize=\"2147483647\"&gt;\n\n                &lt;readerQuotas maxArrayLength=\"21400000\" maxStringContentLength=\"21400000\" maxBytesPerRead=\"21400000\"/&gt;\n                &lt;security mode=\"None\"/&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n      &lt;services&gt;\n        &lt;service name=\"MyCompany.Web.Services.MailService\" behaviorConfiguration=\"Secure_Behavior_Configuration\"&gt;\n            &lt;endpoint\n                address=\"\" \n                binding=\"basicHttpBinding\" \n                bindingConfiguration=\"Public_MailService_BasicHttpBinding\"\n                contract=\"MyCompany.Web.Services.IMailService\" /&gt;\n            &lt;endpoint\n                address=\"\"\n                binding=\"basicHttpBinding\"\n                bindingConfiguration=\"Secure_MailService_BasicHttpBinding\"\n                contract=\"MyCompany.Web.Services.IMailService\" /&gt;\n            &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Thanks a lot for any help!\nChris.</p>\n"},{"tags":["c#",".net","wcf","exception"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12914534,"title":"Catching multiple custom FaultException types","body":"<p>On my WCF service I have a couple of custom fault types. An abstract type called BaseFault and two implementations of it called TypeOneFault and TypeTwoFault</p>\n\n<p>I am throwing the exception on the service side like this</p>\n\n<pre><code>public string ThisMethodHasFault(string eType)\n{\n    if (eType.Contains(\"One\"))\n    {\n        TypeOneFault one = new TypeOneFault(\"TypeOneFault thrown\");\n        throw new FaultException&lt;TypeOneFault&gt;(one, new FaultReason(new FaultReasonText(\"Fault reason here\")));\n    }\n    else\n    {\n        TypeTwoFault two = new TypeTwoFault(\"TypeTwoFault thrown\");\n        throw new FaultException&lt;TypeTwoFault&gt;(two, new FaultReason(new FaultReasonText(\"Fault reason here\")));\n    }\n\n    return \"\";\n}\n</code></pre>\n\n<p>My Service interface is like this</p>\n\n<pre><code>[OperationContract]\n[FaultContract(typeof(TypeOneFault ))]\n[FaultContract(typeof(TypeTwoFault ))]\nstring ThisMethodHasFault(string eType);\n</code></pre>\n\n<p>On the client side I have a test winform application where I catch it like this</p>\n\n<pre><code>   MyServiceClient client = new MyServiceClient();\n\n   try\n    {\n        client.ThisMethodHasFault(\"\"); //get value from user\n\n    }\n    catch (FaultException&lt;TypeOneFault&gt;  ox)\n    {\n         TypeOneFault oneEx = ox.Detail;\n         oneEx.{property} ...\n\n    }   \n    catch (FaultException&lt;TypeTwoFault&gt;  tx)\n    {\n         TypeTwoFault twoEx = tx.Detail;\n         twoEx.{property} ...\n    }    \n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p>I cant seem to be able to reduce the number of catch blocks by doing this instead</p>\n\n<pre><code>    catch (FaultException&lt;BaseFault&gt; fex)\n    {\n         BaseFault Ex = fex.Detail;\n         twoEx.{property} ...\n    }    \n</code></pre>\n\n<p>It would have been nice to have one such block that could capture any exception that I throw on the server and through abstraction I get the right class's details. By doing the above I get an error. <code>An unhandled exception of type 'System.ServiceModel.FaultException</code>1' occurred in mscorlib.dll`</p>\n\n<p><em>Is there something I need to change to make this work or do I have to be content with multiple catch blocks only?</em></p>\n"},{"tags":["java","wcf","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12914877,"title":"Java Connection Reset","body":"<p>We are using SOAP 1.1\nand we have also created a WCF Webservice which is working fine in SOAP UI\nwhen we tried to get a response via SOAP in java, the connection was established but no data was received.</p>\n\n<p>We got this response :</p>\n\n<pre><code>HTTP/1.1 200 OK\n\n\nContent-Type: text/xml; charset=utf-8\nContent-Encoding: gzip\nVary: Accept-Encoding\nServer: Microsoft-IIS/7.5\nX-Powered-By: ASP.NET\nDate: Tue, 16 Oct 2012 12:05:28 GMT\nContent-Length: 148\n</code></pre>\n\n<p>After this no SOAP response was received and this error was thrown:</p>\n\n<pre><code>ERROR : java.net.SocketException: Connection reset\nat java.net.SocketInputStream.read(SocketInputStream.java:189)\nat java.net.SocketInputStream.read(SocketInputStream.java:121)\nat sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)\nat sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)\nat sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)\nat java.io.InputStreamReader.read(InputStreamReader.java:184)\nat java.io.BufferedReader.fill(BufferedReader.java:154)\nat java.io.BufferedReader.readLine(BufferedReader.java:317)\nat java.io.BufferedReader.readLine(BufferedReader.java:382)\nat ICNumber.main(ICNumber.java:113)\n</code></pre>\n\n<p>here is the code snippet:</p>\n\n<pre><code>String SOAPRequest =\"&lt;soapenv:Envelope\"+\n\"xmlns:soapenv\"+\n\"=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:tem=\\\"http://tempuri.org/\\\"&gt;\"+\n            \"&lt;soapenv:Header&gt;\"+\n            \"&lt;/soapenv:Header&gt;\"+\n            \"&lt;soapenv:Body&gt;\"+\n            \"&lt;tem:ICNumberValidation&gt;\"+\n            \"&lt;tem:ICNumber&gt;\"+\n            strIC+\n            \"&lt;/tem:ICNumber&gt;\"+\n            \"&lt;/tem:ICNumberValidation&gt;\"+\n            \"&lt;/soapenv:Body&gt;\"+\n            \"&lt;/soapenv:Envelope&gt;\";\n\n    try {\n        //Create socket\n        String hostname = \"192.168.1.xx\";\n        int port = 90;\n        InetAddress  addr = InetAddress.getByName(hostname); \n        SocketAddress sockaddr = null;\n        try\n        {\n            sockaddr = new InetSocketAddress(addr, (port));\n        }\n        catch(IllegalArgumentException e)\n        {\n            System.out.println(\"ErrorCode-6001\");\n        }\n        Socket sock = new Socket();\n        try \n        {\n            sock.connect(sockaddr, 10000);\n        }\n        catch(Exception e)\n        {\n            System.out.println( \"ErrorCode-6001\");\n        }\n\n        //Send header\n        String path = \"/Service1.svc\";\n        BufferedWriter  wr = new BufferedWriter(new OutputStreamWriter(sock.getOutputStream(),\"UTF-8\"));\n        // You can use \"UTF8\" for compatibility with the Microsoft virtual machine.\n        wr.write(\"POST \" + path + \" HTTP/1.1\\r\\n\");\n        wr.write(\"Accept-Encoding: gzip,deflate\\r\\n\");\n        wr.write(\"Host: \" + hostname + \"\\r\\n\");\n        wr.write(\"Content-Length: \" + SOAPRequest.length() + \"\\r\\n\");\n        wr.write(\"Content-Type: text/xml; charset=\\\"utf-8\\\"\\r\\n\");\n        wr.write(\"SOAPAction: \\\"http://tempuri.org/IService1/ICNumberValidation\\\"\\r\\n\");\n        wr.write(\"Connection: Keep-Alive\\r\\n\");\n        wr.write(\"User-Agent: Apache-HttpClient/4.1.1 (java 1.5)\\r\\n\");\n        wr.write(\"\\r\\n\");\n\n        //Send data\n        wr.write(SOAPRequest);\n        wr.flush();\n\n        //response read\n        BufferedReader reader = new BufferedReader( new InputStreamReader( sock.getInputStream() ) );\n        String line = \"\";\n        String line2 = \"\";\n\n        while((line = reader.readLine()) != null)\n        {\n            line2 = line2 + line+\"\\n\";\n            System.out.println(line2);\n        }\n        System.out.println(line2);\n</code></pre>\n"},{"tags":["wcf","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12915207,"title":"Certificate security of a WCF service using Message security mode and EventLog warnings","body":"<p>i have a problem with message security and authentication in wcf. I have one server and one client certificate for encryption and authentication.\nEverything works fine but for every request there is a warning inside the eventlog.</p>\n\n<pre><code>Subject:\n    Security ID:        SYSTEM\n    Account Name:       My\n    Account Domain:     MyDomain\n    Logon ID:           0x3e7\n\nLogon Type:         3\n\nAccount For Which Logon Failed:\n    Security ID:        NULL SID\n    Account Name:       \n    Account Domain:     \n\nFailure Information:\n    Failure Reason:     Unknown user name or bad password.\n    Status:         0xc000006d\n    Sub Status:     0xc0000064\n</code></pre>\n\n<p>Setting the registry keys DisableLoopbackCheck and DisableStrictNameChecking doesn't solve the problem. These are possible solutions which i have found in the internet.\nThere are no errors in WCF trace.</p>\n\n<p>server config:\n</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n        &lt;service behaviorConfiguration=\"myBehavior\" name=\"Test.MyService\"&gt;\n            &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"Test.IMyService\" bindingConfiguration=\"myConfiguration\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;    \n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"myConfiguration\" maxReceivedMessageSize=\"1048576\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxArrayLength=\"65535\" maxStringContentLength=\"65535\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n            &lt;security mode=\"Message\"&gt;\n                &lt;message clientCredentialType=\"Certificate\" /&gt;\n            &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;    \n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"myBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n           &lt;serviceCredentials&gt;\n            &lt;clientCertificate&gt;\n              &lt;authentication certificateValidationMode=\"ChainTrust\" revocationMode=\"NoCheck\" /&gt;\n            &lt;/clientCertificate&gt;\n            &lt;serviceCertificate storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindByThumbprint\" findValue=\"xxx\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;  \n</code></pre>\n\n<p>client config:\n</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"myBinding\"&gt;\n          &lt;security mode=\"Message\"&gt;\n            &lt;message clientCredentialType=\"Certificate\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"myBehavior\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate findValue=\"xxx\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindByThumbprint\" /&gt;\n            &lt;serviceCertificate&gt;\n              &lt;authentication certificateValidationMode=\"ChainTrust\" revocationMode=\"NoCheck\" /&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://xxxx\" binding=\"wsHttpBinding\" bindingConfiguration=\"myBinding\"\n                contract=\"ServiceRef.IMyService\" name=\"myBinding\" behaviorConfiguration=\"myBehavior\"&gt;\n        &lt;identity&gt;\n          &lt;dns value=\"&lt;&lt;dns value&gt;&gt;\" /&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Regards,</p>\n"},{"tags":["c#","asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":12914299,"title":"How to call a method in external dll referenced in WCF service project","body":"<p>Is it possible to call an external method in our WCF service by adding the dll of the method's class ?</p>\n\n<p>I have an existing web application project with a method <code>getcabfare(**)</code>, now I am trying to create a new WCF service to access that <code>getcabfare()</code> method by adding a reference of that existing application to my WCF project.</p>\n\n<p>But I get the error </p>\n\n<blockquote>\n  <p><em>NullReferenceException not handled by user code - object reference\n  not set to an instance of an object</em></p>\n</blockquote>\n\n<p>This is my existing project \"BasicCabApplication\" which has the below method in bussiness logic layer which is working fine </p>\n\n<pre><code>namespace BasicCabApplication\n{\n public class BussinessLogic\n {  \n    public int getcabfare(string location)\n    {\n  string conn = System.Configuration.ConfigurationManager.ConnectionStrings[\"MyConnString\"].ConnectionString;\n     SqlConnection con = new SqlConnection(conn);\n     con.Open();\n     SqlCommand cmd = new SqlCommand(\"Select fare from cablocations where area ='\" + location +\"'\", con);\n     int fare = Convert.ToInt16(cmd.ExecuteScalar());\n     con.Close();\n     return fare;\n  }\n}\n</code></pre>\n\n<p>and this is my wcf project to which I have added the reference of the above project. and the code in <strong>Service1.svc.cs</strong> is below</p>\n\n<pre><code>using BasicCabApplication;\nnamespace mywcftest1\n{\n   public class Service1 : IService1\n   {\n        public int GetFare(string location)\n        {\n           BussinessLogic bl = new BussinessLogic();\n            int fare = bl.getcabfare(location);\n            return fare;\n        }\n    }\n}\n</code></pre>\n\n<p>I got the object bl but can't access the method getcabfare() which is throwing the nullreference exception.</p>\n\n<p>Is it not possible to access the method of another project in wcf project(web service) ? or any mistake in my code....</p>\n"},{"tags":["asp.net","wcf","vps"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12914882,"title":"How to host duplex wcf service on a VPS","body":"<p>i am trying to host a wcf service which has a following attribute;</p>\n\n<pre><code>[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]\n</code></pre>\n\n<p>and i am creating host class like this;</p>\n\n<pre><code>    var uri = new Uri(\"net.tcp://localhost:7951\");\n    var binding = new NetTcpBinding();\n    host = new ServiceHost(typeof(ChatService), uri);\n    ServiceMetadataBehavior smb = host.Description.Behaviors.Find&lt;ServiceMetadataBehavior&gt;();\n    if (smb == null) host.Description.Behaviors.Add(new ServiceMetadataBehavior());\n    host.AddServiceEndpoint(typeof(IMetadataExchange), MetadataExchangeBindings.CreateMexTcpBinding(), \"mex\");\n    host.AddServiceEndpoint(typeof(IChat), new NetTcpBinding(), \"\");\n    host.Open();\n</code></pre>\n\n<p>So, on developer computer and dedicated server this is working. However, what i need to do is, host this on a VPS (vitual private server).</p>\n\n<p>I thought making a web project and adding this code block to global.asax application start method. but this failed. I suspect problem that the port is closed from firewall maybe.</p>\n\n<p>What solution should I follow?</p>\n"},{"tags":["asp.net",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12914285,"title":"WCF Test client showing 1 endpoint, while Config file exposing 3 endpoints","body":"<p>I have a WCF web service with exposing 3 end points.\nBut when I debug it to WCF test client it is only showing one basicHttpBinding endpoint.</p>\n\n<p>1 : <strong>Why so?</strong></p>\n\n<p>2 : Here I have one operation contract \"CallADSWebMethod\" which returns a DataContract (VINDescription)..Just curious to know..<strong>why this works great for me in real time but still it is not testable by test client</strong>..I mean Test client says \"This operation is not supported by test client\"</p>\n\n<p>3 : Here in the endpointBehaviors - I have only given  and no ...But still it is working from jquery ajax call..<strong>So what is the significance of \"enableWebScript\" ??</strong> </p>\n\n<p><img src=\"http://i.stack.imgur.com/ETowh.png\" alt=\"Test client Image\"></p>\n\n<p>Config Info</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"asmx\" name=\"ADSChromeVINDecoder.Service\"&gt;\n        &lt;endpoint address=\"basic\"\n                  binding=\"basicHttpBinding\"\n                  name=\"httpEndPoint\"\n                  contract=\"ADSChromeVINDecoder.IService\"/&gt;\n        &lt;endpoint address=\"json\"\n                  binding=\"webHttpBinding\"\n                  behaviorConfiguration=\"webBehavior\"\n                  name=\"webEndPoint\"\n                  contract=\"ADSChromeVINDecoder.IService\"/&gt;\n        &lt;endpoint contract=\"IMetadataExchange\"\n                  binding=\"mexHttpBinding\"\n                  address=\"mex\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"webBehavior\"&gt;\n          &lt;webHttp/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"asmx\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"/&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","wcf","ios5","xcode4","asihttprequest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12910509,"title":"Call WCF Web Service using ASIHttprequest XCode4.2","body":"<p>Hi I write simple WCF Service and uploaded in my local IIS(v7) server.\nso the url is like that <code>http://mylink/WCF_SAMPLE/Service1.svc</code>. my wcf web service is tested with svcutil.exe so wcf web service is correct.</p>\n\n<p>I try to consume the WCF Web service from AsiHttprequest. but it is fail. i check the response that show <code>&lt;object returned empty description&gt;</code>. here is my coding for IOS application.</p>\n\n<pre><code> NSURL *url=[NSURL URLWithString:@\"http://mylink/WCF_SAMPLE/Service1.svc\"];\nASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];\n[request setRequestMethod:@\"POST\"];\n[request addRequestHeader:@\"Content-Type\" value:@\"text/xml\"];\n[request setPostValue:@\"john\" forKey:@\"fname\"];\n[request setPostValue:@\"Carter\" forKey:@\"sname\"];\n[request setDelegate:self]; \n[request startAsynchronous]; \n</code></pre>\n\n<p>Here is my web service code in IService1.cs:</p>\n\n<pre><code>[ServiceContract]\npublic interface IService1{\n   [OperationContract]\n   [WebInvoke(Method=\"POST\",UriTemplate=\"/showemployeename\")]\n   string showemployeename(string fname,string sname);\n}\n</code></pre>\n\n<p>Inside Service1.svc.cs</p>\n\n<pre><code>public class Service1:IService1{\n public string showemployeename(string fname,string sname)\n {\n    return fname+sname\n }\n}\n</code></pre>\n\n<p>Here is my web.config file</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;services&gt;\n   &lt;service name=\"WCF_SAMPLE.Service1\" behaviorConfiguration=\"WCF_SAMPLE.Service1Behavior\"&gt;\n       &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"WCF_SAMPLE.IService1\"&gt;\n       &lt;/endpoint&gt;\n       &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n  &lt;behavior name=\"WCF_SAMPLE.Service1Behavior\"&gt;\n     &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n     &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n   &lt;/behavior&gt;&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>how to connect to WCF web service and how to grab showemployeename function ?</p>\n\n<p>appreciate for any help</p>\n\n<p>Best Rgds,\ndf</p>\n"},{"tags":["c#",".net","wcf","exception-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12914194,"title":"Consuming custom FaultException types Containing Methods","body":"<p>On my WCF service I have a couple of custom fault types. An abstract type called BaseFault and two implementations of it called TypeOneFault and TypeTwoFault</p>\n\n<p>I am throwing the exception on the service side like this</p>\n\n<pre><code>public string ThisMethodHasFault(string eType)\n{\n    if (eType.Contains(\"One\"))\n    {\n        TypeOneFault one = new TypeOneFault(\"TypeOneFault thrown\");\n        throw new FaultException&lt;TypeOneFault&gt;(one, new FaultReason(new FaultReasonText(\"Fault reason here\")));\n    }\n    else\n    {\n        TypeTwoFault two = new TypeTwoFault(\"TypeTwoFault thrown\");\n        throw new FaultException&lt;TypeTwoFault&gt;(two, new FaultReason(new FaultReasonText(\"Fault reason here\")));\n    }\n\n    return \"\";\n}\n</code></pre>\n\n<p>My Service interface is like this</p>\n\n<pre><code>[OperationContract]\n[FaultContract(typeof(TypeOneFault ))]\n[FaultContract(typeof(TypeTwoFault ))]\nstring ThisMethodHasFault(string eType);\n</code></pre>\n\n<p>On the client side I have a test winform application where I catch it like this</p>\n\n<pre><code>   MyServiceClient client = new MyServiceClient();\n\n   try\n    {\n        client.ThisMethodHasFault(\"\"); //get value from user\n\n    }\n    catch (FaultException&lt;TypeOneFault&gt;  ox)\n    {\n         TypeOneFault oneEx = ox.Detail;\n         oneEx.{property} ...\n\n    }   \n    catch (FaultException&lt;TypeTwoFault&gt;  tx)\n    {\n         TypeTwoFault twoEx = tx.Detail;\n         twoEx.{property} ...\n    }    \n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p>In the method above I am only getting the custom fault class's property but not the method I have defined within it. The method is defined as abstract in the base abstract class which I implement in the child classes, TypeOne and TypeTwo. Is there a way to get the method as well?</p>\n"},{"tags":["c#",".net","wcf","security","authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12772286,"title":"Custom Authentification via Service Method?","body":"<p>For a client-server application, I want to develop a Web-Service which will be mainly used by the application itself (not intended for use by third parties at this time).</p>\n\n<p>On the long run, however, exposing the WebService as some kind of API is generally desirable. Thus, I am already putting some thoughts in choosing a technology which allows \"RESTifing\" (terrible word-creation, I know ;-) ) a Web-Service easily at a later point.<br>\nWCF seems to be about right here as it provides the webHttpBinding but also other bindings which allow taking advantage of LANs and .NET clients.</p>\n\n<p>The issue I now ran into is about authentification: All the authentification measures WCF provides seem to happen \"outside\" the actual service. However, I'd like to have a <code>Login</code> method (or something more \"RESTful\" as shown <a href=\"http://stackoverflow.com/a/2022938/232175\">here under point 2</a>).</p>\n\n<p>For example, I imagine writing a Service like this one:</p>\n\n<pre><code>[ServiceContract]\npublic interface IUserService\n{\n   [ServiceMember]\n   [WebInvoke(Method = \"POST\", WebUri=\"/Session\")]\n   public void Login(string username, string password);\n\n   [ServiceMember]\n   [WebInvoke(Method = \"POST\", WebUri=\"/Users\")]\n   public void Register(RegisterUserParameter parameter);\n}\n</code></pre>\n\n<p>How do I integrate this service into the WCF so the methods preferably work over multiple sub-services in my service project?</p>\n\n<p>When using the built-in WCF authentification, I need to supply username and password before making any service call. Thus, calls to either <code>Register</code> or <code>Login</code> would fail because I am not authentificated.</p>\n\n<p>And how can I tell the WCF to remember which user is currently logged in using my service method? Is there any possibility to store something like a session cookie inside the WCF session on the client?</p>\n\n<p>Or is it generally a bad idea to realize authentification under WCF the way I am trying to?</p>\n\n<p>Should I maybe directly choose WebAPI at the cost of having a more complicated way to talk to the service in my client application?</p>\n"},{"tags":["wcf","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12913413,"title":"iis user to execute wcf service","body":"<p>I am new to IIS, so I am a bit overdue, I hope somebody could help me, because I am sure it's an easy question.</p>\n\n<p>I have a WCF Web service, that in Debug mode works fine, and there are no problems, I can publish it in my IIS 7 and it's fine. But when I execute the client to see if it works, I get an exception when there is an instruction in the service that uses an external dll function. I think it's a permission trouble, because to call this function I need to be member of a group DAApp, that has the required permissions to do it. </p>\n\n<p>I have been looking the users and groups of the IIS Server Management Console, and I have seen a group called IIS_USRS that I supposed is the one that executes the service, and what I want to do is add this IIS_USRS group to my group DAApp but I can't do it and I don't know if it's possible.</p>\n\n<p>Another thing I thought, was to change the user that executes the service itself and execute it as the user Userdaapp that is member of the group DAApp and I think this would be a better solution but I can't find where to change it</p>\n\n<p>I hope somebody can help me, because I am totally stuck into it. </p>\n\n<p>Thanks! </p>\n"},{"tags":["wcf","xsd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12912719,"title":"Do I need to send the XSD files with WSDL for implementation","body":"<p>I am developing a WCF service in .net and would like to give the wsdl file to the customer who can consume our service. I successfully Generated the wsdl which includes the xsd import statement</p>\n\n<p>xsd:import schemaLocation=\"https://URL/Service-v1.svc?xsd=xsd1\" namespace=\"Service-v1\" /> \n </p>\n\n<p>etc</p>\n\n<p><strong>But what I would like to know is is that is enough to just send the wsdl to the customer or do I need to send them the XSD files as well..</strong></p>\n\n<p>How can I generate seperate XSD files for each class like class1.xsd, class2.xsd, class3.xsd</p>\n\n<p>here is my project structure\n<strong>DataModel</strong>\n  Class1.cs\n  Class2.cs\n  Class3.cs\n  Response.cs\n<strong>Contract</strong>\n  IService1 with the following contracts\n    Response GetQuote1(Class1 class1Request);\n    Response GetQuote2(Class2 class2Request);\n    Response GetQuote2(Class2 class2Request);</p>\n\n<p><strong>Service</strong>\n Service1 : Iservice1\n    public Response GetQuote1(Class1 class1Request)\n      {\n              return response;\n      }\n   public Response GetQuote2(Class2 class2Request)\n      {\n              return response;\n      }\n   public Response GetQuote3(Class3 class3Request)\n      {\n              return response;\n      }</p>\n\n<p>I really appreciate your input as I search on the internet but couldn't be able to decide on the best option as we have no control over the other end who is going to implement our wcf service.\nThanks </p>\n"},{"tags":["wcf","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":257,"score":0,"question_id":5489487,"title":"WCF MSMQ service not retrying when using transactional","body":"<p>I have a wcf service that I am hosting within a windows service on a windows 2003 server that is listening on a MSMQ queue.  I set the ReceiveRetryCount = 2 on the netmsmqbinding.  The service was setup to use transactions ([OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete= true)]).  The service was functioning great.</p>\n\n<p>I needed to turnoff the transactions due to a database call that couldn't support MSDTC.  So I switched the service properties to </p>\n\n<pre><code>[OperationBehavior(TransactionScopeRequired = false)]\n</code></pre>\n\n<p>Now, when an exception or fault is thrown, no retry occurs, the fault handler for the service never fires.  The original message ends up in the system DLQ.  I would like the fault handler to handle the faults after two retries.  Any ideas?</p>\n"},{"tags":[".net","wcf","reference"],"answer_count":4,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":12213,"score":8,"question_id":3456758,"title":"A reference to the dll could not be added","body":"<p>When I add a .dll file as a reference in C# application it shows an error :</p>\n\n<p>A reference to the \"....dll\" could not be added.Please make sure that the file is accessible and that it is a valid assembly or COM component.\nILDissassembler says there is no valid CLR header so I try to register it using regsvr32 and that gives me another error: The module \"\" was loaded but the call to DLLRegisterServer failed with error code '0x80004005'</p>\n\n<p>I am using VS2010 ultimate version on a 64bit Windows 7 machine. What could be the problem?</p>\n\n<p>Thanks for any hints/replies</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12892692,"title":"WCF RoutingService failing when mex gets too large","body":"<p>I'm having an issue with a net.tcp WCF windows service int .NET 4.0 where it looks like my mex for a particular endpoint is too large. There is no problem at all connecting directly to the endpoint. I created a WCF RoutingService to allow someone outside our private network to connect to my internal WCF service. Getting the mex information through the RoutingService fails.</p>\n\n<p>My WCF service has about 7 endpoints, and the WCF RoutingService is routing all of them, but only the large one (with 17 methods) is having the problem.</p>\n\n<p>I found this link below which explains how to fix the problem when failing to connect directly to the mex endpoint</p>\n\n<p><a href=\"http://blogs.msdn.com/b/distributedservices/archive/2009/05/07/too-many-operations-or-methods-in-wcf-service-causes-the-metadataexchange-fail.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/distributedservices/archive/2009/05/07/too-many-operations-or-methods-in-wcf-service-causes-the-metadataexchange-fail.aspx</a></p>\n\n<p>But it talks about creating an endpoint in svcutil.exe.config with a contract of IMetadataExchange. The RoutingService endpoint I'm having a problem with is using the contract System.ServiceModel.Routing.IRequestReplyRouter, so I don't know if I need to configure the svcutil.exe.config file slightly differently. I've tried all sorts of combinations but couldn't get anything to work. I'm not even sure where I need to put the svcutil.exe.config file for the RoutingService WCF service to pick it up, or even if it needs one.</p>\n\n<p>Does anybody know of a better solution, or a link which might provide help for when a RoutingService is involved?</p>\n"},{"tags":[".net","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12911639,"title":"WCF Service returns an error in second call: An existing connection was forcibly closed by the remote host","body":"<p>I have a WCF service which suddenly stopped working, but only starting from the second method call.\nWhen I call a method at the first time it works fine and returns the response, but if I call the same method again or a different method within the same service it return an error.\nThis happens only when calling the service from a client machine other than the web server. If I call the service from the web server it is installed on - everything works fine.</p>\n\n<p>.Net 4.0 is used.</p>\n\n<p>The error is:</p>\n\n<pre><code>An existing connection was forcibly closed by the remote host\n   System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags) +6406383\n   System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) +130\n\n[IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.]\n   System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) +296\n   System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size) +19\n   System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead) +251\n\n [WebException: The underlying connection was closed: An unexpected error occurred on a receive.]\n   System.Net.HttpWebRequest.GetResponse() +6440728\n   System.ServiceModel.Channels.HttpChannelRequest.WaitForReply(TimeSpan timeout) +55\n\n [CommunicationException: An error occurred while receiving the HTTP response to http://111.111.111.111/PortalServices/Service.svc. This could be due to the service     endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down).    See server logs for more details.]\n   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +10513119\n   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type) +336\n</code></pre>\n\n<p>My client web.config is:</p>\n\n<pre><code>    &lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"BasicHttpBinding\" /&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;client&gt;\n  &lt;endpoint address=\"http://111.111.111.111/PortalServices/Service.svc\"\n    binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding\"\n    contract=\"ServiceReference.IService\" name=\"BasicHttpBinding_IService\" /&gt;\n&lt;/client&gt;\n</code></pre>\n\n<p>My server web.config is:</p>\n\n<pre><code>    &lt;system.serviceModel&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior&gt;\n      &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n      &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Thanks in advance,\nkruvi</p>\n"},{"tags":["wcf","synchronization","smartclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":12910215,"title":"WCF - TargetInvocationException was unhandled","body":"<p>I'm trying to create WCF to sync my  mobile device with my server. When i try to click sync button it throws TargetInvocationException. Below is the Sync() method.</p>\n\n<p>Code</p>\n\n<pre><code>            Cursor.Current = Cursors.WaitCursor;\n            CustomerProxy.CustomerCacheSyncService svcProxy = new CustomerProxy.CustomerCacheSyncService();\n            Microsoft.Synchronization.Data.ServerSyncProviderProxy syncProxy =\n                new Microsoft.Synchronization.Data.ServerSyncProviderProxy(svcProxy);\n\n            // Call SyncAgent.Synchronize() to initiate the synchronization process.\n            // Synchronization only updates the local database, not your project's data source.\n            CustomerCacheSyncAgent syncAgent = new CustomerCacheSyncAgent();\n            syncAgent.RemoteProvider = syncProxy;\n             /*throws error below code*/\n            Microsoft.Synchronization.Data.SyncStatistics syncStats = syncAgent.Synchronize();\n\n            // TODO: Reload your project data source from the local database (for example, call the TableAdapter.Fill method).\n            customer_ConfirmationTableAdapter.Fill(testHHDataSet.Customer_Confirmation);\n\n            // Show synchronization statistics\n            MessageBox.Show(\"Changes downloaded: \" + syncStats.TotalChangesDownloaded.ToString()\n                + \"\\r\\nChanges Uploaded: \" + syncStats.TotalChangesUploaded.ToString());\n\n            Cursor.Current = Cursors.Default;\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc-3","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12909969,"title":"mvc 3.0 with wcf pass inputs from view and fetch result and bind to gridview","body":"<p>am completely new to MVC 3.0\nam asked to create a MVC 3.0 application with WCF. I have already created a WCF service and also created MVC application. Am kinda doubtful on the process of how i can link the service to the view of the MVC application. I have created a controller named TMReportController. I have a view BenchEmployee. I need to pass inputs from the View ie., i need to pass values of a dropdown to the service fetch the dataset it returns and bind it to a grid that is present in the view BenchEmployee. Do not my view is an aspx page.\ncan some one please explain to me how this can be done?\nthanks in advance.</p>\n"},{"tags":["wcf","wif","saml"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12910108,"title":"security token has invalid or malformed elements","body":"<p>I am trying to finish setting up a WIF SAML WCF service. I had it working locally all in Visual Studio. Now I have moved it to a live server on IIS I am having some issues, the latest error I am getting is 'security token has invalid or malformed elements' - my config files are below:</p>\n\n<p>Security STS Web.Config</p>\n\n<p>\n    Asp.Net Configuration option in Visual Studio.\n        A full list of settings and comments can be found in \n        machine.config.comments usually located in \n        \\Windows\\Microsoft.Net\\Framework\\v2.x\\Config \n    -->\n    </p>\n\n<pre><code>  &lt;appSettings&gt;\n    &lt;add key=\"IssuerName\" value=\"ID17721\"/&gt;\n    &lt;add key=\"SigningCertificateName\" value=\"CN=ID17721\"/&gt;\n    &lt;add key=\"EncryptingCertificateName\" value=\"CN=ID17721\"/&gt;\n  &lt;/appSettings&gt;\n\n  &lt;connectionStrings /&gt;\n\n  &lt;location path=\"FederationMetadata\"&gt;\n    &lt;system.web&gt;\n      &lt;authorization&gt;\n        &lt;allow users=\"*\"/&gt;\n      &lt;/authorization&gt;\n    &lt;/system.web&gt;\n  &lt;/location&gt;\n\n  &lt;system.web&gt;\n    &lt;!--\n            Set compilation debug=\"true\" to insert debugging \n            symbols into the compiled page. Because this \n            affects performance, set this value to true only \n            during development.\n        --&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;!--\n            The &lt;authentication&gt; section enables configuration \n            of the security authentication mode used by \n            ASP.NET to identify an incoming user. \n        --&gt;\n    &lt;authentication mode=\"None\"/&gt;\n    &lt;!--\n            The &lt;customErrors&gt; section enables configuration \n            of what to do if/when an unhandled error occurs \n            during the execution of a request. Specifically, \n            it enables developers to configure html error pages \n            to be displayed in place of a error stack trace.\n\n        &lt;customErrors mode=\"RemoteOnly\" defaultRedirect=\"GenericErrorPage.htm\"&gt;\n            &lt;error statusCode=\"403\" redirect=\"NoAccess.htm\" /&gt;\n            &lt;error statusCode=\"404\" redirect=\"FileNotFound.htm\" /&gt;\n        &lt;/customErrors&gt;\n        --&gt;\n    &lt;pages&gt;\n      &lt;controls&gt;\n        &lt;add tagPrefix=\"asp\" namespace=\"System.Web.UI\" assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.web.extensions&gt;\n    &lt;scripting&gt;\n      &lt;webServices&gt;\n        &lt;!--\n              Uncomment this section to enable the authentication service. Include \n              requireSSL=\"true\" if appropriate. \n\n          &lt;authenticationService enabled=\"true\" requireSSL = \"true|false\"/&gt;\n          --&gt;\n        &lt;!--\n              Uncomment these lines to enable the profile service, and to choose the \n              profile properties that can be retrieved and modified in ASP.NET AJAX \n              applications.\n\n           &lt;profileService enabled=\"true\"\n                           readAccessProperties=\"propertyname1,propertyname2\"\n                           writeAccessProperties=\"propertyname1,propertyname2\" /&gt;\n          --&gt;\n        &lt;!--\n              Uncomment this section to enable the role service.\n\n          &lt;roleService enabled=\"true\"/&gt;\n          --&gt;\n      &lt;/webServices&gt;\n      &lt;!--\n        &lt;scriptResourceHandler enableCompression=\"true\" enableCaching=\"true\" /&gt;\n        --&gt;\n    &lt;/scripting&gt;\n  &lt;/system.web.extensions&gt;\n\n  &lt;system.serviceModel&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" &gt;\n    &lt;/serviceHostingEnvironment&gt;\n    &lt;services&gt;\n      &lt;service name=\"Microsoft.IdentityModel.Protocols.WSTrust.WSTrustServiceContract\" behaviorConfiguration=\"ServiceBehavior\"&gt;\n        &lt;endpoint address=\"IWSTrust13\" binding=\"ws2007HttpBinding\" contract=\"Microsoft.IdentityModel.Protocols.WSTrust.IWSTrust13SyncContract\" bindingConfiguration=\"ws2007HttpBindingConfiguration\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://hinttech.damhosted.com/securitytokenservice/service.svc\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;ws2007HttpBinding&gt;\n        &lt;binding name=\"ws2007HttpBindingConfiguration\"&gt;\n          &lt;security mode=\"Message\"&gt;\n            &lt;message clientCredentialType=\"Certificate\" establishSecurityContext=\"false\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/ws2007HttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ServiceBehavior\"&gt;\n\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;serviceCertificate findValue=\"id17721\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n\n  &lt;!-- \n  Uncomment the lines below to enable WIF tracing to: WIFTrace.e2e. \n  Open the trace file using the SvcTraceViewer.exe tool (shipped with the WCF SDK available from Microsoft) or a xml viewer.\n  Refer to MSDN if you wish to add WCF tracing.\n  --&gt;\n\n  &lt;!--&lt;system.diagnostics&gt;\n    &lt;sources&gt;\n      &lt;source name=\"Microsoft.IdentityModel\" switchValue=\"Verbose\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" type=\"System.Diagnostics.XmlWriterTraceListener\" initializeData=\"WIFTrace.e2e\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;trace autoflush=\"true\" /&gt;\n  &lt;/system.diagnostics&gt;--&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Claims Aware Service</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!--\n    Note: As an alternative to hand editing this file you can use the \n    web admin tool to configure settings for your application. Use\n    the Website-&gt;Asp.Net Configuration option in Visual Studio.\n    A full list of settings and comments can be found in \n    machine.config.comments usually located in \n    \\Windows\\Microsoft.Net\\Framework\\v2.x\\Config \n--&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;section name=\"microsoft.identityModel\" type=\"Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;\n  &lt;/configSections&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"registration\" value=\"adamdb\"/&gt;\n    &lt;add key=\"username\" value=\"luke\"/&gt;\n    &lt;add key=\"password\" value=\"\\\"/&gt;\n  &lt;/appSettings&gt;\n  &lt;connectionStrings/&gt;\n  &lt;location path=\"FederationMetadata\"&gt;\n    &lt;system.web&gt;\n      &lt;authorization&gt;\n        &lt;allow users=\"*\"/&gt;\n      &lt;/authorization&gt;\n    &lt;/system.web&gt;\n  &lt;/location&gt;\n  &lt;system.web&gt;\n    &lt;!--\n          Set compilation debug=\"true\" to insert debugging \n          symbols into the compiled page. Because this \n          affects performance, set this value to true only \n          during development.\n      --&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n        &lt;add assembly=\"Adam.Core.DatabaseManagerLibrary, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n        &lt;add assembly=\"Adam.Core, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n        &lt;add assembly=\"Adam.Extensions.ClippingPathExtension, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n        &lt;add assembly=\"Adam.Tools, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n        &lt;add assembly=\"Adam.Web.Core, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n        &lt;add assembly=\"Adam.Web, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n        &lt;add assembly=\"Adam.Web.StudioControls, Version=4.7.0.0, Culture=neutral, PublicKeyToken=63F11F167F68D05B\"/&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;!--\n          The &lt;authentication&gt; section enables configuration \n          of the security authentication mode used by \n          ASP.NET to identify an incoming user. \n      --&gt;\n    &lt;authentication mode=\"Windows\"/&gt;\n    &lt;!--\n          The &lt;customErrors&gt; section enables configuration \n          of what to do if/when an unhandled error occurs \n          during the execution of a request. Specifically, \n          it enables developers to configure html error pages \n          to be displayed in place of a error stack trace.\n\n      &lt;customErrors mode=\"Off\" defaultRedirect=\"GenericErrorPage.htm\"&gt;\n          &lt;error statusCode=\"403\" redirect=\"NoAccess.htm\" /&gt;\n          &lt;error statusCode=\"404\" redirect=\"FileNotFound.htm\" /&gt;\n      &lt;/customErrors&gt;\n      --&gt;\n    &lt;pages&gt;\n      &lt;controls&gt;\n        &lt;add tagPrefix=\"asp\" namespace=\"System.Web.UI\" assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n  &lt;system.web.extensions&gt;\n    &lt;scripting&gt;\n      &lt;webServices&gt;\n        &lt;!--\n          Uncomment this section to enable the authentication service. Include \n          requireSSL=\"true\" if appropriate.\n        --&gt;\n        &lt;!--\n        &lt;authenticationService enabled=\"true\" requireSSL = \"true|false\"/&gt;\n        --&gt;\n        &lt;!--\n          Uncomment these lines to enable the profile service, and to choose the \n          profile properties that can be retrieved and modified in ASP.NET AJAX \n          applications.\n        --&gt;\n        &lt;!--\n        &lt;profileService enabled=\"true\"\n                        readAccessProperties=\"propertyname1,propertyname2\"\n                        writeAccessProperties=\"propertyname1,propertyname2\" /&gt;\n        --&gt;\n        &lt;!--\n          Uncomment this section to enable the role service.\n        --&gt;\n        &lt;!--\n        &lt;roleService enabled=\"true\"/&gt;\n        --&gt;\n      &lt;/webServices&gt;\n      &lt;!--\n        &lt;scriptResourceHandler enableCompression=\"true\" enableCaching=\"true\" /&gt;\n        --&gt;\n    &lt;/scripting&gt;\n  &lt;/system.web.extensions&gt;\n  &lt;system.serviceModel&gt;\n   &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service name=\"ClaimsAwareService1.Service\" behaviorConfiguration=\"ClaimsAwareService1.ServiceBehavior\"&gt;\n        &lt;endpoint address=\"\" binding=\"ws2007FederationHttpBinding\" contract=\"ClaimsAwareService1.IService\" bindingConfiguration=\"ClaimsAwareService1.IService_ws2007FederationHttpBinding\"/&gt;\n        &lt;!-- Service Endpoints --&gt;\n        &lt;!--Commented out by FedUtil--&gt;\n        &lt;!--&lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"ClaimsAwareService1.IService\"&gt;&lt;!- - \n            Upon deployment, the following identity element should be removed or replaced to reflect the \n            identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity \n          automatically.\n          - -&gt;&lt;identity&gt;&lt;dns value=\"localhost\" /&gt;&lt;/identity&gt;&lt;/endpoint&gt;--&gt;\n        &lt;endpoint name=\"mex\" address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ClaimsAwareService1.ServiceBehavior\"&gt;\n          &lt;!-- Behavior extension to make the service claims aware --&gt;\n          &lt;federatedServiceHostConfiguration name=\"ClaimsAwareService1.Service\"/&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n          &lt;serviceAuthorization impersonateCallerForAllOperations=\"false\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;!--Certificate added by FedUtil.  Subject='CN=STSTestCert', Issuer='CNT=STestCert'.--&gt;\n            &lt;serviceCertificate findValue=\"id17721\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\" /&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;extensions&gt;\n      &lt;behaviorExtensions&gt;\n        &lt;!-- This behavior extension will enable the service host to be Claims aware --&gt;\n        &lt;add name=\"federatedServiceHostConfiguration\" type=\"Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"/&gt;\n      &lt;/behaviorExtensions&gt;\n    &lt;/extensions&gt;\n\n    &lt;bindings&gt;\n      &lt;ws2007FederationHttpBinding&gt;\n        &lt;binding name=\"ClaimsAwareService1.IService_ws2007FederationHttpBinding\"&gt;\n          &lt;security mode=\"Message\"&gt;\n            &lt;message establishSecurityContext=\"false\"&gt;\n              &lt;issuerMetadata address=\"http://hinttech.damhosted.com/securitytokenservice/service.svc?wsdl\" /&gt;\n              &lt;claimTypeRequirements&gt;\n                &lt;!--Following are the claims offered by STS 'http://lwilkinson-hinttech:81/Service.svc'. Add or uncomment claims that you require by your application and then update the federation metadata of this application.--&gt;\n                &lt;add claimType=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name\" isOptional=\"true\"/&gt;\n                &lt;add claimType=\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\" isOptional=\"true\"/&gt;\n              &lt;/claimTypeRequirements&gt; \n            &lt;/message&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/ws2007FederationHttpBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;!-- \n  Uncomment the lines below to enable WIF tracing to: WIFTrace.e2e. \n  Open the trace file using the SvcTraceViewer.exe tool (shipped with the WCF SDK available from Microsoft) or a xml viewer.\n  Refer to MSDN if you wish to add WCF tracing.\n  --&gt;\n  &lt;!--&lt;system.diagnostics&gt;\n    &lt;sources&gt;\n      &lt;source name=\"Microsoft.IdentityModel\" switchValue=\"Verbose\"&gt;\n        &lt;listeners&gt;\n          &lt;add name=\"xml\" type=\"System.Diagnostics.XmlWriterTraceListener\" initializeData=\"WIFTrace.e2e\" /&gt;\n        &lt;/listeners&gt;\n      &lt;/source&gt;\n    &lt;/sources&gt;\n    &lt;trace autoflush=\"true\" /&gt;\n  &lt;/system.diagnostics&gt;--&gt;\n  &lt;microsoft.identityModel&gt;\n    &lt;service name=\"ClaimsAwareService1.Service\"&gt;\n      &lt;audienceUris mode=\"Never\"&gt;\n      &lt;/audienceUris&gt;\n      &lt;federatedAuthentication&gt;\n        &lt;!--wsFederation passiveRedirectEnabled=\"false\" issuer=\"ADDRESS OF YOUR WCF STS\" realm=\"ADDRESS OF YOUR ADAM WEB SERVICE\" requireHttps=\"false\" /--&gt;\n        &lt;wsFederation passiveRedirectEnabled=\"false\" issuer=\"http://hinttech.damhosted.com/securitytokenservice/service.svc\" realm=\"http://hinttech.damhosted.com/tridionconnectorsaml/service.svc\" requireHttps=\"false\" /&gt;\n      &lt;/federatedAuthentication&gt;\n      &lt;issuerNameRegistry type=\"Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\"&gt;\n        &lt;trustedIssuers&gt;\n          &lt;add thumbprint=\"5AC0C852EB5A6A30\" name=\"http://lwilkinson-hinttech:81/Service.svc\"/&gt;\n        &lt;/trustedIssuers&gt;\n      &lt;/issuerNameRegistry&gt;\n    &lt;/service&gt;\n  &lt;/microsoft.identityModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Client Calling the webservice</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=169433\n  --&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\"/&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"WS2007FederationHttpBinding_IService\"&gt;\n          &lt;security defaultAlgorithmSuite=\"Default\" authenticationMode=\"IssuedTokenForSslNegotiated\" requireDerivedKeys=\"true\" includeTimestamp=\"true\" messageSecurityVersion=\"WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10\" requireSignatureConfirmation=\"true\"&gt;\n            &lt;issuedTokenParameters&gt;\n              &lt;additionalRequestParameters&gt;\n                &lt;trust:SecondaryParameters xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;\n                  &lt;trust:KeyType xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://docs.oasis-open.org/ws-sx/ws-trust/200512/SymmetricKey&lt;/trust:KeyType&gt;\n                  &lt;trust:KeySize xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;256&lt;/trust:KeySize&gt;\n                  &lt;trust:Claims Dialect=\"http://schemas.xmlsoap.org/ws/2005/05/identity\" xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;\n                    &lt;wsid:ClaimType Uri=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name\" Optional=\"true\" xmlns:wsid=\"http://schemas.xmlsoap.org/ws/2005/05/identity\"/&gt;\n                    &lt;wsid:ClaimType Uri=\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\" Optional=\"true\" xmlns:wsid=\"http://schemas.xmlsoap.org/ws/2005/05/identity\"/&gt;\n                  &lt;/trust:Claims&gt;\n                  &lt;trust:KeyWrapAlgorithm xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p&lt;/trust:KeyWrapAlgorithm&gt;\n                  &lt;trust:EncryptWith xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/04/xmlenc#aes256-cbc&lt;/trust:EncryptWith&gt;\n                  &lt;trust:SignWith xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2000/09/xmldsig#hmac-sha1&lt;/trust:SignWith&gt;\n                  &lt;trust:CanonicalizationAlgorithm xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/10/xml-exc-c14n#&lt;/trust:CanonicalizationAlgorithm&gt;\n                  &lt;trust:EncryptionAlgorithm xmlns:trust=\"http://docs.oasis-open.org/ws-sx/ws-trust/200512\"&gt;http://www.w3.org/2001/04/xmlenc#aes256-cbc&lt;/trust:EncryptionAlgorithm&gt;\n                &lt;/trust:SecondaryParameters&gt;\n              &lt;/additionalRequestParameters&gt;\n              &lt;issuer address=\"http://hinttech.damhosted.com/SecurityTokenService/service.svc/IWSTrust13\" binding=\"ws2007HttpBinding\" bindingConfiguration=\"http://hinttech.damhosted.com/SecurityTokenService/service.svc/IWSTrust13\"&gt;\n                &lt;identity&gt;\n                  &lt;certificate encodedValue=\"AwAAAAEAAAAUAAAAtlusPJpNxGkadANA5IpKzuh5c6sgAAAAAQAAANYCAAAwggLSMIIBuqADAgECAhAQ70tWnAk9gURPiKo31S4kMA0GCSqGSIb3DQEBBQUAMBIxEDAOBgNVBAMTB2lkMTc3MjEwHhcNMTIxMDEwMTM0OTI3WhcNMTMxMDEwMDAwMDAwWjASMRAwDgYDVQQDEwdpZDE3NzIxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnO0dMwufj+ugxuDhwLOaonGK+iY+eOwBMWYlxZc+YuRqfxirCtnZCvnXNTyS+HE/gNMauZCD2kbQ4qaor99HcTT+HgjCWreo9KWI5mtf2Ecima1vQSm3sYgCy1gfemhMAubxU10PHCsi4frg93HvNmA5FLrWIsFp0oVPEg0K4B9Jk1czovMk6k0lVNpTnTnEXA9+Cik6z8ZxgYdndT2sJ7fx2kDPWBgcJkHajweKlpeRafDjdn14LVECEZlQFIQ3vnhT/YqHYLtC0C2xRvTPuGBAzKeEDPTpxI/S5Hvt37UV9X6z6whBq9Gcc/0uBMFBcSNGhizcAwB9C8We+3USywIDAQABoyQwIjALBgNVHQ8EBAMCBDAwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDQYJKoZIhvcNAQEFBQADggEBAH3bdXN3wI4Jz3QgZj/leH6igcS8jW62FqN66bgxIYGXb1lsHfjBq6TAfca0Vm1S4S9cQGb+5rv5cvH5bHivxHEeRGpsbQ6TA/dxtbMel1hqKpAEdnOfX8LIU3fnnUw37CnF42axqFqZFG+7+y1nK37rAV5QkB3dYXweAZDE+lSZW06v7/HR7Wt7+wVL1E0EfENbKNLqaBzdFubFoF0Azm/Yyq+bmdTZGuAWhAd9Wba8nWZ3a6PAEljblY4po3S+tFAUVUAhfpo6Q+N42nHF3rI+FGNDEpOePrcsCTYbCHXkf9TpVhIJkI1fZzUoXwD32STaM4LJKrQvJONDWav+U44=\"/&gt;\n                &lt;/identity&gt;\n              &lt;/issuer&gt;\n              &lt;issuerMetadata address=\"http://hinttech.damhosted.com/securitytokenservice/service.svc?wsdl\"/&gt;\n            &lt;/issuedTokenParameters&gt;\n            &lt;!--&lt;alternativeIssuedTokenParameters&gt;\n  &lt;issuedTokenParameters&gt;\n    &lt;issuer address=\"http://hinttech.damhosted.com/SecurityTokenService/service.svc/IWSTrust13\" bindingConfiguration=\"http://hinttech.damhosted.com/SecurityTokenService/service.svc/IWSTrust13\" binding=\"ws2007HttpBinding\"&gt;\n      &lt;identity&gt;\n        &lt;certificate encodedValue=\"AwAAAAEAAAAUAAAAtlusPJpNxGkadANA5IpKzuh5c6sgAAAAAQAAANYCAAAwggLSMIIBuqADAgECAhAQ70tWnAk9gURPiKo31S4kMA0GCSqGSIb3DQEBBQUAMBIxEDAOBgNVBAMTB2lkMTc3MjEwHhcNMTIxMDEwMTM0OTI3WhcNMTMxMDEwMDAwMDAwWjASMRAwDgYDVQQDEwdpZDE3NzIxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnO0dMwufj+ugxuDhwLOaonGK+iY+eOwBMWYlxZc+YuRqfxirCtnZCvnXNTyS+HE/gNMauZCD2kbQ4qaor99HcTT+HgjCWreo9KWI5mtf2Ecima1vQSm3sYgCy1gfemhMAubxU10PHCsi4frg93HvNmA5FLrWIsFp0oVPEg0K4B9Jk1czovMk6k0lVNpTnTnEXA9+Cik6z8ZxgYdndT2sJ7fx2kDPWBgcJkHajweKlpeRafDjdn14LVECEZlQFIQ3vnhT/YqHYLtC0C2xRvTPuGBAzKeEDPTpxI/S5Hvt37UV9X6z6whBq9Gcc/0uBMFBcSNGhizcAwB9C8We+3USywIDAQABoyQwIjALBgNVHQ8EBAMCBDAwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDQYJKoZIhvcNAQEFBQADggEBAH3bdXN3wI4Jz3QgZj/leH6igcS8jW62FqN66bgxIYGXb1lsHfjBq6TAfca0Vm1S4S9cQGb+5rv5cvH5bHivxHEeRGpsbQ6TA/dxtbMel1hqKpAEdnOfX8LIU3fnnUw37CnF42axqFqZFG+7+y1nK37rAV5QkB3dYXweAZDE+lSZW06v7/HR7Wt7+wVL1E0EfENbKNLqaBzdFubFoF0Azm/Yyq+bmdTZGuAWhAd9Wba8nWZ3a6PAEljblY4po3S+tFAUVUAhfpo6Q+N42nHF3rI+FGNDEpOePrcsCTYbCHXkf9TpVhIJkI1fZzUoXwD32STaM4LJKrQvJONDWav+U44=\" /&gt;\n      &lt;/identity&gt;\n    &lt;/issuer&gt;\n  &lt;/issuedTokenParameters&gt;\n&lt;/alternativeIssuedTokenParameters&gt;--&gt;\n            &lt;localClientSettings detectReplays=\"true\"/&gt;\n            &lt;localServiceSettings detectReplays=\"true\"/&gt;\n          &lt;/security&gt;\n          &lt;textMessageEncoding/&gt;\n          &lt;httpTransport/&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n      &lt;ws2007HttpBinding&gt;\n        &lt;binding name=\"http://hinttech.damhosted.com/SecurityTokenService/service.svc/IWSTrust13\"&gt;\n          &lt;security&gt;\n            &lt;message clientCredentialType=\"Certificate\" establishSecurityContext=\"false\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/ws2007HttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"behave\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate findValue=\"id17721\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\"/&gt;\n            &lt;serviceCertificate&gt;\n              &lt;authentication certificateValidationMode=\"None\"/&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;client&gt;\n      &lt;endpoint behaviorConfiguration=\"behave\" address=\"http://hinttech.damhosted.com/TridionConnectorSAML/Service.svc\" binding=\"customBinding\" bindingConfiguration=\"WS2007FederationHttpBinding_IService\" contract=\"ServiceReference1.IService\" name=\"WS2007FederationHttpBinding_IService\"&gt;\n        &lt;identity&gt;\n          &lt;certificate encodedValue=\"AwAAAAEAAAAUAAAAtlusPJpNxGkadANA5IpKzuh5c6sgAAAAAQAAANYCAAAwggLSMIIBuqADAgECAhAQ70tWnAk9gURPiKo31S4kMA0GCSqGSIb3DQEBBQUAMBIxEDAOBgNVBAMTB2lkMTc3MjEwHhcNMTIxMDEwMTM0OTI3WhcNMTMxMDEwMDAwMDAwWjASMRAwDgYDVQQDEwdpZDE3NzIxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnO0dMwufj+ugxuDhwLOaonGK+iY+eOwBMWYlxZc+YuRqfxirCtnZCvnXNTyS+HE/gNMauZCD2kbQ4qaor99HcTT+HgjCWreo9KWI5mtf2Ecima1vQSm3sYgCy1gfemhMAubxU10PHCsi4frg93HvNmA5FLrWIsFp0oVPEg0K4B9Jk1czovMk6k0lVNpTnTnEXA9+Cik6z8ZxgYdndT2sJ7fx2kDPWBgcJkHajweKlpeRafDjdn14LVECEZlQFIQ3vnhT/YqHYLtC0C2xRvTPuGBAzKeEDPTpxI/S5Hvt37UV9X6z6whBq9Gcc/0uBMFBcSNGhizcAwB9C8We+3USywIDAQABoyQwIjALBgNVHQ8EBAMCBDAwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDQYJKoZIhvcNAQEFBQADggEBAH3bdXN3wI4Jz3QgZj/leH6igcS8jW62FqN66bgxIYGXb1lsHfjBq6TAfca0Vm1S4S9cQGb+5rv5cvH5bHivxHEeRGpsbQ6TA/dxtbMel1hqKpAEdnOfX8LIU3fnnUw37CnF42axqFqZFG+7+y1nK37rAV5QkB3dYXweAZDE+lSZW06v7/HR7Wt7+wVL1E0EfENbKNLqaBzdFubFoF0Azm/Yyq+bmdTZGuAWhAd9Wba8nWZ3a6PAEljblY4po3S+tFAUVUAhfpo6Q+N42nHF3rI+FGNDEpOePrcsCTYbCHXkf9TpVhIJkI1fZzUoXwD32STaM4LJKrQvJONDWav+U44=\"/&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","asp.net",".net","wcf","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12900382,"title":"How to determine progress of pending operations in queue?","body":"<p>I would like to use MSMQ queue to handle a lot of operations on XML data files. If I properly understand that technology, tasks will be passed to queue where they will get by handler. Also if there are a lot of such tasks, handler will catch tasks one by one. Therefore there are some pending tasks that just laying in queue and waits for handler.</p>\n\n<p>So also I should show a progress of handling of uploaded XML files on website in percents.\nThe question is how can I demonstrate such progress of pending tasks which really didn't start to be handled.</p>\n\n<h2>POST EDIT</h2>\n\n<p>The regular way of reflecting a progress of handling some task is to request service back for a percentage of completeness by some token, which client was generated before. And then just write it on the site.</p>\n"},{"tags":["c#","wcf","wsdl"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12909126,"title":"How to make the call of method that exist in wsdl?","body":"<p>I have wsdl file. \nI used the 'svrutil' to create C# file and add this file to my code. \nNow i don't know how can i make the call of methods in this wsdl. </p>\n\n<p>I don't know how actually i call the method that will make the web service call. \nHow do i make this invoke ? </p>\n\n<p>I try to in simple make this call - but i don't see in the sniffer that any network communication is appear ( no http request is made ) </p>\n"},{"tags":["c#","wcf","web-services","caching"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12908562,"title":"Best way to create disc cache for web service","body":"<p>I have created a webservice that delivers images. It will always be one-way communication. The images will never be changed, on the side that gets them from the service.</p>\n\n<p>It has multiple sources, and some can be far away, on bad connections.\nI have created a memory cache for it, but I would like to also have a disc cache, to store images for longer periods.\nI am a bit unsure on the best approach to do this.</p>\n\n<p>First of all, all of my sources are webservers, so I don't really know how to check the last modified date (as an example) of my images, which I would like to use, to see if the file has changed.</p>\n\n<p>Second, how do I best store my local cache? Just drop the files in a folder and compare dates with the original source?\nOr, perhaps store all the timestamps in a txt file, with all the images, to avoid checking files. \nOR, maybe store them in a local SQL express DB?</p>\n\n<p>The images, in general, are not very large. Most are around 200kb. Every now and then, however, there will be 7+ mb.\nThe big problem is, that some of the locations, where the service will be hosted, are on really bad connections, and they will need to use the same image, many times.\nThere are no real performance requirements, I just want to make it as responsive as possible, for the locations that have a horrible connection, to our central servers.</p>\n\n<p>I can't install any \"real\" cache systems. It has to be something I can handle in my code.</p>\n"},{"tags":["c#","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":90,"score":-1,"question_id":12898431,"title":"Parse string to xdocument","body":"<p>i have wcf application that receives string and parse it to xdocument.\nWhen i try to call the OperationContract from web application i am getting the error \"Object reference not set to an instance of an object\" \nI can`t point on the line that the exception is created.</p>\n\n<pre><code>public string SetXml(string xml)\n    {\n        int[] values = new int[2];\n        XDocument doc = new XDocument();\n        string xmlparse = xml;\n        xmlparse = xmlparse.Replace(\"&amp;lt;\", \"&lt;\").Replace(\"&amp;gt;\", \"&gt;\");\n        try\n        {\n            doc = XDocument.Parse(xmlparse);\n        }\n        catch (Exception ex)\n        {\n            throw ex.InnerException;\n        }\n        List&lt;Request&gt; req = new List&lt;Request&gt;();\n        req = cr.BuildRequest(doc);\n        if (dbConn.CheckAuth(req))\n        {\n            //Code\n        }\n        else\n        {\n            return \"\";\n        }\n    }\n</code></pre>\n\n<p>This is the interface</p>\n\n<pre><code> [OperationContract]\n string SetXml(string xml);\n</code></pre>\n"},{"tags":["c#","wcf","asynchronous","using-statement"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12897743,"title":"How to call asynchronous wcf method in using statement?","body":"<p>In synchronous model it's simply</p>\n\n<pre><code>using (MyServiceClient msc = new MyServiceClient())\n{\n   msc.Method();\n}\n</code></pre>\n\n<p>but if I must wait to end of this method, and then do something, it can't work</p>\n\n<pre><code>private void EventHandler&lt;MethodCompletedEventArgs&gt; myEventHandler = new EventHandler&lt;MethodCompletedEventArgs&gt;(methodBody);\n\nusing (MyServiceClient msc = new MyServiceClient())\n{\n   msc.MethdCompleted += myEventHandler;\n   msc.BeginMethod();\n}\n\nprivate void MethodBody()\n{\n//exception: client state is aborted\n}\n</code></pre>\n\n<p>Also how to call async mehod in <code>using</code> statement?</p>\n"},{"tags":["jquery","ajax","json","wcf","parsing"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":1160,"score":1,"question_id":10456240,"title":"jquery ajax call return JSON parsing error","body":"<p>I am using jquery to call an ajax wcf method that returns a list of objects as a JSON string. The JSON string looks like this when inspecting it in fiddler2 (in TextView):</p>\n\n<pre><code>{\"d\":\"[{\\\"ID\\\":\\\"6b2b8c62-31ce-4df2-982b-054ff5f6be72\\\",\\\"Name\\\":\\\"Carol\\\",\\\"Surname\\\":\\\"IrishWife\\\"},{\\\"ID\\\":\\\"d254740a-0a0f-4a1e-9e4f-0812227dd5af\\\",\\\"Name\\\":\\\"Willie\\\",\\\"Surname\\\":\\\"Le Roux\\\"},{\\\"ID\\\":\\\"660bf0dd-436a-4588-a9c0-19fd6fdcee23\\\",\\\"Name\\\":\\\"Emmas\\\",\\\"Surname\\\":\\\"Mum\\\"},{\\\"ID\\\":\\\"6b9403c5-b728-4e96-bcb1-203e7472eec3\\\",\\\"Name\\\":\\\"Owen\\\",\\\"Surname\\\":\\\"Lima\\\"},{\\\"ID\\\":\\\"d52c08fb-4418-4600-960f-243ff4443ee6\\\",\\\"Name\\\":\\\"Tim\\\",\\\"Surname\\\":\\\"Lee\\\"},{\\\"ID\\\":\\\"e2aacf5b-8855-44ce-9338-3d39f8ab3349\\\",\\\"Name\\\":\\\"Marcello\\\",\\\"Surname\\\":\\\"MT\\\"},{\\\"ID\\\":\\\"578be087-8385-46d6-89de-3db31d352cbc\\\",\\\"Name\\\":\\\"Carlyn\\\",\\\"Surname\\\":\\\"Homegroup\\\"},{\\\"ID\\\":\\\"4c805825-2bee-447a-8b75-41ead17db33e\\\",\\\"Name\\\":\\\"George\\\",\\\"Surname\\\":\\\"Homegroup\\\"},{\\\"ID\\\":\\\"ae48804f-5e78-42c8-9ba0-4214c98a5a89\\\",\\\"Name\\\":\\\"Isla\\\",\\\"Surname\\\":\\\"Le Roux\\\"},{\\\"ID\\\":\\\"f8be2f4f-fedb-4863-8a84-44fddea84ea9\\\",\\\"Name\\\":\\\"Peter\\\",\\\"Surname\\\":\\\"Anderson\\\"},{\\\"ID\\\":\\\"15e7644d-ec43-44ff-a959-47e00112da6b\\\",\\\"Name\\\":\\\"Kitty\\\",\\\"Surname\\\":\\\"Corbett\\\"},{\\\"ID\\\":\\\"8fd7fccc-335c-4d5c-93b5-4b00f96a9950\\\",\\\"Name\\\":\\\"Natalie\\\",\\\"Surname\\\":\\\"Archibald\\\"},{\\\"ID\\\":\\\"09b5aad2-2cf1-488a-962b-4d692b05ddea\\\",\\\"Name\\\":\\\"Miku\\\",\\\"Surname\\\":\\\"Heally\\\"},{\\\"ID\\\":\\\"affa369e-5af3-4537-a0f4-71422956da41\\\",\\\"Name\\\":\\\"Steven\\\",\\\"Surname\\\":\\\"Corbett\\\"},{\\\"ID\\\":\\\"65f57da3-4f88-4798-9590-83b4ccecfc44\\\",\\\"Name\\\":\\\"Tim\\\",\\\"Surname\\\":\\\"Archibald\\\"},{\\\"ID\\\":\\\"53bfb451-f66f-4b6e-b430-8d13c95b30d8\\\",\\\"Name\\\":\\\"Philip\\\",\\\"Surname\\\":\\\"MT\\\"},{\\\"ID\\\":\\\"c7f22b9b-4030-4f82-9f75-bbb726cabb73\\\",\\\"Name\\\":\\\"Vincent\\\",\\\"Surname\\\":\\\"Van Der Walt\\\"},{\\\"ID\\\":\\\"232577be-3165-4316-a20d-c2f2a09c5382\\\",\\\"Name\\\":\\\"Scott\\\",\\\"Surname\\\":\\\"Lynn\\\"},{\\\"ID\\\":\\\"913508a1-5dca-4504-8caf-c8e3dc386fc0\\\",\\\"Name\\\":\\\"Dan\\\",\\\"Surname\\\":\\\"MT\\\"},{\\\"ID\\\":\\\"36054a07-b14d-4c1c-b35f-e00875dde7e5\\\",\\\"Name\\\":\\\"Sarah\\\",\\\"Surname\\\":\\\"MT\\\"},{\\\"ID\\\":\\\"f14e7d98-e040-4ba9-928f-f2ff48116b0b\\\",\\\"Name\\\":\\\"Josh\\\",\\\"Surname\\\":\\\"IrishDude\\\"}]\"}\n</code></pre>\n\n<p>When I inspect the result in fiddler's JSON View, it shows the following JSON:</p>\n\n<pre><code>d=[{\"ID\":\"6b2b8c62-31ce-4df2-982b-054ff5f6be72\",\"Name\":\"Carol\",\"Surname\":\"IrishWife\"},{\"ID\":\"d254740a-0a0f-4a1e-9e4f-0812227dd5af\",\"Name\":\"Willie\",\"Surname\":\"Le Roux\"},{\"ID\":\"660bf0dd-436a-4588-a9c0-19fd6fdcee23\",\"Name\":\"Emmas\",\"Surname\":\"Mum\"},{\"ID\":\"6b9403c5-b728-4e96-bcb1-203e7472eec3\",\"Name\":\"Owen\",\"Surname\":\"Lima\"},{\"ID\":\"d52c08fb-4418-4600-960f-243ff4443ee6\",\"Name\":\"Tim\",\"Surname\":\"Lee\"},{\"ID\":\"e2aacf5b-8855-44ce-9338-3d39f8ab3349\",\"Name\":\"Marcello\",\"Surname\":\"MT\"},{\"ID\":\"578be087-8385-46d6-89de-3db31d352cbc\",\"Name\":\"Carlyn\",\"Surname\":\"Homegroup\"},{\"ID\":\"4c805825-2bee-447a-8b75-41ead17db33e\",\"Name\":\"George\",\"Surname\":\"Homegroup\"},{\"ID\":\"ae48804f-5e78-42c8-9ba0-4214c98a5a89\",\"Name\":\"Isla\",\"Surname\":\"Le Roux\"},{\"ID\":\"f8be2f4f-fedb-4863-8a84-44fddea84ea9\",\"Name\":\"Peter\",\"Surname\":\"Anderson\"},{\"ID\":\"15e7644d-ec43-44ff-a959-47e00112da6b\",\"Name\":\"Kitty\",\"Surname\":\"Corbett\"},{\"ID\":\"8fd7fccc-335c-4d5c-93b5-4b00f96a9950\",\"Name\":\"Natalie\",\"Surname\":\"Archibald\"},{\"ID\":\"09b5aad2-2cf1-488a-962b-4d692b05ddea\",\"Name\":\"Miku\",\"Surname\":\"Heally\"},{\"ID\":\"affa369e-5af3-4537-a0f4-71422956da41\",\"Name\":\"Steven\",\"Surname\":\"Corbett\"},{\"ID\":\"65f57da3-4f88-4798-9590-83b4ccecfc44\",\"Name\":\"Tim\",\"Surname\":\"Archibald\"},{\"ID\":\"53bfb451-f66f-4b6e-b430-8d13c95b30d8\",\"Name\":\"Philip\",\"Surname\":\"MT\"},{\"ID\":\"c7f22b9b-4030-4f82-9f75-bbb726cabb73\",\"Name\":\"Vincent\",\"Surname\":\"Van Der Walt\"},{\"ID\":\"232577be-3165-4316-a20d-c2f2a09c5382\",\"Name\":\"Scott\",\"Surname\":\"Lynn\"},{\"ID\":\"913508a1-5dca-4504-8caf-c8e3dc386fc0\",\"Name\":\"Dan\",\"Surname\":\"MT\"},{\"ID\":\"36054a07-b14d-4c1c-b35f-e00875dde7e5\",\"Name\":\"Sarah\",\"Surname\":\"MT\"},{\"ID\":\"f14e7d98-e040-4ba9-928f-f2ff48116b0b\",\"Name\":\"Josh\",\"Surname\":\"IrishDude\"}]\n</code></pre>\n\n<p>So fiddler can parse it successfully, but on the client, the jquery ajax error callback function displays the following error:</p>\n\n<pre><code>Error: No conversion from text to application/json\n</code></pre>\n\n<p>The wcf method is defined as follows:</p>\n\n<pre><code>    [OperationContract]\n    [WebGet(ResponseFormat=WebMessageFormat.Json)]\n    public string GetPeople(Guid groupId)\n    {\n        using (SchedulerContext context = new SchedulerContext())\n        {\n            JavaScriptSerializer ser = new JavaScriptSerializer();\n\n            var query = from p in context.People\n                        where p.Group_ID == groupId\n                        select new\n                        {\n                            p.ID,\n                            p.Name,\n                            p.Surname\n                        };\n\n            return ser.Serialize(query.ToArray());\n        }   \n    }\n</code></pre>\n\n<p>And finally, the calling jquery is:</p>\n\n<pre><code>$.ajax(\n        {\n            type: \"GET\",\n            dataType: \"application/json\",\n            contentType: \"json\",\n            data: { groupId: 'ae09a080-5d7c-4e92-9a87-591574b7c4b8' },\n            url: \"WebAPI.svc/GetPeople\",\n            error: function (jqXHR, textStatus, errorThrown) {\n                alert(\"error\");\n            },\n            success: function (msg) {\n                alert(msg.d[0].Name);\n            }\n        }\n);\n</code></pre>\n\n<p>Thanks in advance!</p>\n\n<p><strong>UPDATE:</strong>\nThanks to @user1370958, one step closer to the solution.</p>\n\n<p>When changing the error callback function to the following it successfully returns the result...</p>\n\n<pre><code>error: function (jqXHR, textStatus, errorThrown) {\n    var test = $.parseJSON(jqXHR.responseText);\n    var test2 = $.parseJSON(test.d);\n    alert(test2[0].Name);\n},\n</code></pre>\n\n<p>Not sure why, but I have to parse the result and then parse the nested objects inside that. I'm assuming if any of my returned types contained complex objects it would also have needed another parse...</p>\n"},{"tags":["wcf","exception","proxy"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":1433,"score":1,"question_id":2458701,"title":"WCF Client Proxy State","body":"<p>How do I test the state of my proxy before making calls to my WCF service. </p>\n\n<p>I have a duplex channel created using a duplex channel factory.</p>\n\n<p>Before making any calls to the server I want to check the state of the proxy object created from the channel factory.</p>\n\n<p>I saw this in a book... (to be used in immediate window)</p>\n\n<pre><code>? ((ICommunicationObject)flsProxy).State\n</code></pre>\n\n<p>But it gave this exception...</p>\n\n<blockquote>\n  <p><em>Cannot obtain fields or call methods on the instance of type 'System.ServiceModel.ICommunicationObject' because it is a proxy to a\n  remote object.</em></p>\n</blockquote>\n\n<p>Is it better to just catch exceptions?</p>\n"},{"tags":[".net","wcf","wcf-client"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":132,"score":1,"question_id":8091325,"title":"Context passing in WCF pipeline","body":"<p>Say, I'm on a client side where the chain looks something like (simplified):</p>\n\n<ol>\n<li>Proxy method call</li>\n<li>Parameter inspection (<code>IParameterInspector</code>)</li>\n<li>Serialization/message formatting</li>\n<li>Message inspection (<code>IClientMessageInspector</code>)</li>\n<li>Channel</li>\n</ol>\n\n<p>Are there any means to pass my context through the chain?</p>\n\n<p>The problem i'm trying to solve is that <code>IParameterInspector.AfterCall()</code> is not get called in case of faults and I cannot obtain correlation state object i created in <code>IParameterInspector.BeforeCall()</code>, can I? But if I could store it in some context i would retrieve it in, for example, <code>IClientMessageInspector.AfterReceiveReply()</code> and be happy. </p>\n"},{"tags":[".net","wcf"],"answer_count":3,"favorite_count":27,"up_vote_count":83,"down_vote_count":0,"view_count":46873,"score":83,"question_id":561823,"title":"WCF Error: This collection already contains an address with scheme http","body":"<p>I built a web application containing a wcf service contract and a silverlight control which makes calls to that wcf service.  On my development and test servers it works great.  When I deploy to our live server and run the application I get an exception of type System.ServiceModel.ServiceActivationException which states that the service can not be activated due to an exception during compilation.  The exception is \"This collection already contains an address with scheme http.  There can be at most one address per scheme in this collection.\"</p>\n\n<p>I read that this exception may be thrown if the web site has more than one host header, which is true on our live server.  Apparently WCF services hosted in IIS can have only one base address.  How can I get around this issue?</p>\n"},{"tags":[".net","wcf","debugging"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12905942,"title":"Debugging WCF web service locally, why does first debug attach attempt always fails","body":"<p>When I try to debug a local WCF service and choose process in attach to process window first attempt always fails.</p>\n\n<p>It says that process was terminated. After I refresh list and select process again it usually attaches.</p>\n\n<pre><code>---------------------------\nMicrosoft Visual Studio\n---------------------------\nUnable to attach to the process. The process has been terminated.\n\nRefresh the process list before attempting another attach.\n---------------------------\nOK   \n---------------------------\n</code></pre>\n\n<p>What explains this weird behaviour, and why does it have to terminate process when it attempts to attach.</p>\n\n<p>Also, what causes a respawn of WCF service host process instantly?</p>\n"},{"tags":["c#","wcf","web-services","http-post","webservicehost"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":12899360,"title":"Getting a POST endpoint to work in self-hosted (WebServiceHost) C# webservice?","body":"<p>So, I have been messing around with webservices for a while now, and I keep getting back to some basics, that I never seem to get right.</p>\n\n<h1>Question 1:</h1>\n\n<p>When using a WebServiceHost in .NET/C#, you can define a method/endpoint as using GET/POST/etc. Setting up a GET-method is easy and it works pretty much directly, and its easy to understand how it works. For example:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"GET\", UriTemplate = \"/PutMessage/{jsonString}\", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]\nstring PutMessage(string jsonString);\n</code></pre>\n\n<p>If I call http:///MyWebService/PutMessage/{MyJsonString} I get passed on the the method, and all is well (more or less).</p>\n\n<p>But then what does it mean when I define this as a <strong>POST</strong> instead?</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"POST\", UriTemplate = \"/PutMessage/{jsonString}\", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]\nstring PutMessage(string jsonString);\n</code></pre>\n\n<p><strong>What does the UriTemplate do here?</strong> If I do a POST, I expect the data to be contained not in the URI, but in the \"data section\" of the post. But do I define the variable name in the data section? How does the WebServiceHost/.NET know that what is contained in the \"data section\" of the post is to be put into the variable jsonString? How do I post the data from the client side (not C#, let's say JQuery instead) so that it is interpreted correctly on the serer side?</p>\n\n<p>(And how does the WebMessageFormat affet things? I have read everywhere about this (MSDN, Stackoverflow etc) but haven't found a clear and good answer.)</p>\n\n<h1>Question 2:</h1>\n\n<p>In my attempts to understand this, I thought I'd make a very simple POST-method, like this:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke]\nstring PutJSONRequest(string pc);\n</code></pre>\n\n<p>I then <em>try</em> call this method using Fiddler, but that does not work at all. I just get a 400 error back, saying \"HTTP/1.1 400 Bad Request\". I have a breakpoint on the very first line in the code of the method, and the method itself contains nothing:</p>\n\n<pre><code>public string PutJSONRequest(string pc)\n{\n    return null;\n}\n</code></pre>\n\n<p><strong>Again, how does .NET know that what I POSTed using Fiddler should be contained in the \"string pc\"?</strong> How does it interpret it as a string, and what type of string (UT8, ASCII etc)?</p>\n\n<p>This is the RAW HTTP request, sent from Fiddler:</p>\n\n<pre><code>POST http://&lt;myip&gt;:8093/AlfaCustomerApp/PutJSONRequest HTTP/1.1\nUser-Agent: Fiddler\nHost: &lt;myip&gt;:8093\nContent-Length: 3\nContent-type: application/x-www-form-urlencoded; charset=UTF-8\n\nasd\n</code></pre>\n\n<p>and it doesnt matter what type of Content-type I use, as far as I can see.</p>\n\n<p>The response is a standard-thing, that I am not in control of myself:</p>\n\n<pre><code>HTTP/1.1 400 Bad Request\nContent-Length: 1165\nContent-Type: text/html\nServer: Microsoft-HTTPAPI/2.0\nDate: Mon, 15 Oct 2012 15:45:02 GMT\n\n[then HTML code]\n</code></pre>\n\n<p>Any help would be appreciated. Thanks.</p>\n"},{"tags":["c#","visual-studio-2010","wcf","wsdl"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12904576,"title":"How do I use the WSDL file that I got?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/950150/how-to-use-a-wsdl-file-to-create-a-wcf-service-not-make-a-call\">How to use a WSDL file to create a WCF service (not make a call)</a>  </p>\n</blockquote>\n\n\n\n<p>I need to use a web service in my application. </p>\n\n<p>I have a WSDL for the web service, but I don't know how to use it or how to call and send info to the web service method. </p>\n\n<p>Someone can help me here?</p>\n"},{"tags":["java","android","wcf","service"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12898368,"title":"WCF Service Method Call from Android App","body":"<p>I need to call a WCF Service which has the SOAP Envelop as below:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;s:Envelope xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\"    xmlns:a=\"http://www.w3.org/2005/08/addressing\"&gt;\n    &lt;s:Header&gt;\n        &lt;a:Action s:mustUnderstand=\"1\"&gt;SessionStart&lt;/a:Action&gt;\n        &lt;a:MessageID&gt;urn:uuid:eca7579d-5581-4989-984d-0ead2e670194&lt;/a:MessageID&gt;\n        &lt;a:ReplyTo&gt;\n            &lt;a:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:Address&gt;\n        &lt;/a:ReplyTo&gt;\n        &lt;a:To s:mustUnderstand=\"1\"&gt;http://[WCF Service URL].svc&lt;/a:To&gt;\n    &lt;/s:Header&gt;\n    &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n        &lt;XMLMessage xmlns=\"http://[Client Website URL]/MobileInterface\"&gt;\n            &amp;lt;SessionManagementRequest&amp;gt;&amp;#xD;\n                &amp;lt;IMEI&amp;gt;123456&amp;lt;/IMEI&amp;gt;&amp;#xD;\n                &amp;lt;OfficerNumber&amp;gt;AA&amp;lt;/OfficerNumber&amp;gt;&amp;#xD;\n                &amp;lt;Password&amp;gt;AA&amp;lt;/Password&amp;gt;&amp;#xD;\n                &amp;lt;Status&amp;gt;Setup&amp;lt;/Status&amp;gt;&amp;#xD;\n                &amp;lt;UserName&amp;gt;AA&amp;lt;/UserName&amp;gt;&amp;#xD;\n                &amp;lt;XSDVersion&amp;gt;1&amp;lt;/XSDVersion&amp;gt;&amp;#xD;\n            &amp;lt;/SessionManagementRequest&amp;gt;\n        &lt;/XMLMessage&gt;\n    &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p>The part I'm struggling with is getting the value XMLMessage SOAPObject. Below is a sample of my code:</p>\n\n<pre><code>public static String requestSessionManagement() throws Exception\n    {\n        int i;\n        int timeout;\n        PropertyInfo pi;\n        HttpTransportSE transport;\n        String soap_action;\n        String method = \"GetData\";\n        String result = \"\";\n\n        timeout = ServerInterface.TIMEOUT;\n        soap_action = _soap_namespace + method;\n\n        // Check array to know if custom timeout is needed\n        for (i = 0;i &lt; func_timeouts.length;i++)\n        {\n            if (func_timeouts[i][0].compareTo(method) == 0)\n            {\n                timeout = Integer.parseInt(func_timeouts[i][1]);\n            }\n        }\n\n        Log.i(\"[ServerInterface]\", \"sending request to \"+_server_url+\": \"+_soap_namespace+method);\n        Log.i(\"[ServerInterface]\", \"timeout: \"+timeout);\n\n     // Build request\n        SoapObject request = new SoapObject(_soap_namespace, \"XMLMessage\");\n\n    MapRequestSessionManagement param1 = new MapRequestSessionManagement();\n    param1.imei = \"123456\";\n    param1.officer_number = \"1029384\";\n    param1.password = \"test1!\";\n    param1.status = \"Setup\";\n    param1.username = \"MichaelJS\";\n    param1.xsd_version = \"1\";\n\n    pi = new PropertyInfo();\n    pi.setName(\"SessionManagementRequest\");\n    pi.setValue(param1);\n    pi.setType(MapRequestSessionManagement.MAPREQUESTSESSIONMANAGEMENT_CLASS);\n    request.addProperty(pi);        \n\n    // Build envelope\n    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);// Soap version must match server implementation\n\n    //Prepare header\n    envelope.headerOut = new Element[4];\n    envelope.headerOut[0] = ServerSyncHelper.buildActionHeader(\"SessionStart\");\n    envelope.headerOut[1] = ServerSyncHelper.buildMessageIDHeader();\n    envelope.headerOut[2] = ServerSyncHelper.buildReplyToHeader(\"http://www.w3.org/2005/08/addressing/anonymous\");\n    envelope.headerOut[3] = ServerSyncHelper.buildToHeader(_server_url);\n\n    envelope.dotNet = true; // Must set this if the server is implemented on the dotnet framework\n    envelope.implicitTypes = true;\n    envelope.setOutputSoapObject(request);\n\n    // Set http transport\n    transport = new HttpTransportSE(_server_url, timeout);\n    transport.debug = true;  //this is optional, use it if you don't want to use a packet sniffer to check what the sent message was (httpTransport.requestDump, httpTransport.responseDump)\n\n    try\n    {\n\n        transport.call(soap_action, envelope);\n        Log.i(\"[ServerInterface]\", \"request dump \"+transport.requestDump);          \n        Log.i(\"[ServerInterface]\", \"response dump \"+transport.responseDump);            \n        Log.i(\"[ServerInterface]\", \"response \"+envelope.bodyIn);\n\n    String response = (String)envelope.getResponse();\n    result = \"\"+response;\n    }\n    catch (Exception e)\n    {\n        Log.i(\"[ServerInterface]\", \"Exception part\");           \n        Log.i(\"[ServerInterface]\", \"request dump \"+transport.requestDump);          \n        Log.i(\"[ServerInterface]\", \"response dump \"+transport.responseDump);\n        Log.e(\"[ServerInterface]\", \"Error with soap transmition \"+e);\n        e.printStackTrace();\n    }\n\n    return result;\n    }\n</code></pre>\n\n<p>When I run the above code, I get the following results, which is correct. However, I'm not sure how to format according to what the Server requires:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;v:Envelope xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:d=\"http://www.w3.org/2001/XMLSchema\" xmlns:c=\"http://www.w3.org/2001/12/soap-encoding\" xmlns:v=\"http://www.w3.org/2001/12/soap-envelope\"&gt;\n    &lt;v:Header&gt;\n        &lt;Action v:mustUnderstand=\"1\" xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;SessionStart&lt;/Action&gt;\n        &lt;MessageID xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;urn:uuid:49bd428d-188a-4035-8d8f-45bcb42b37ec&lt;/MessageID&gt;\n        &lt;ReplyTo xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;\n            &lt;Address xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/Address&gt;\n        &lt;/ReplyTo&gt;\n        &lt;To v:mustUnderstand=\"1\" xmlns=\"http://www.w3.org/2005/08/addressing\"&gt;http://41.134.120.203/MobileInterfaceService/SessionManagementService.svc&lt;/To&gt;\n    &lt;/v:Header&gt;\n    &lt;v:Body&gt;\n        &lt;XMLMessage xmlns=\"http://www.syntell.com/MobileInterface/\" id=\"o0\" c:root=\"1\"&gt;\n            &lt;SessionManagementRequest&gt;\n                &lt;IMEI&gt;123456&lt;/IMEI&gt;\n                &lt;OfficerNumber&gt;1029384&lt;/OfficerNumber&gt;\n                &lt;Password&gt;test1!&lt;/Password&gt;\n                &lt;Status&gt;Setup&lt;/Status&gt;\n                &lt;UserName&gt;MichaelJS&lt;/UserName&gt;\n                &lt;XSDVersion&gt;1&lt;/XSDVersion&gt;\n            &lt;/SessionManagementRequest&gt;\n        &lt;/XMLMessage&gt;\n    &lt;/v:Body&gt;\n&lt;/v:Envelope&gt;\n</code></pre>\n\n<p>It seems that they've coded the Server method to accept a String Parameter which contains the XML Structure for SessionManagementRequest Object.</p>\n"},{"tags":["wcf","proxy","servicereference"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3154,"score":1,"question_id":1665976,"title":"Update service reference not working","body":"<p>I'm using Visual Studio 2008 and have a WCF client working against a WCF service. They are both located in the same Visual Studio solution. After I've made a change in my WCF contract, I want to update the service reference on the client so that changes made to the contract is also made in the proxy. </p>\n\n<p>My problem is that the proxy code is not re-generated. </p>\n\n<p>When I select to update the service reference, the following happens:</p>\n\n<ol>\n<li>A dialog with the title \"Updating service reference 'name-of-reference'\" is shown. This dialog has a progress bar.</li>\n<li>The progressbar moves and the status text in the dialog is changed to \"Updating configuration\"</li>\n<li>The progressbar moves a bit more, and the status text is chnaged to \"Configuration update complete\"</li>\n</ol>\n\n<p>The dialog doesn't show the text \"Generating \\something\\\" (can't remember the exact wording) which I would expedct. </p>\n\n<p>If I delete the service reference and add it again, the proxy is properly generated. I add the service using the exact same settings as before, so I don't think it's a issue I can solve by changing the service reference configuration on the client.</p>\n\n<p>One thing I suspect may be the problem is that I've renamed the default wsHttpBindings in app.config. I've also renamed the default endpoints. The reason behind this is that I need more than one endpoint and having one named 'some-default-name' and one with my own name is just confusing.</p>\n\n<p>The problem with deleting the service and adding it again is that Visual Studio adds a new binding in app.config (among other things) which should not be there.</p>\n\n<p>Anyone seen this problem before? Anyone knows of a solution to it?</p>\n"},{"tags":["wcf",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12902319,"title":"Is it possible to set the request/response format in web.config?","body":"<p>I have quite a few endpoints on my WCF REST Service. They all have the same body style, request format and response format.</p>\n\n<pre><code>[WebGet(BodyStyle = WebMessageBodyStyle.Bare,\n    RequestFormat = WebMessageFormat.Json,\n    ResponseFormat = WebMessageFormat.Json,\n    UriTemplate = xxx)]\n</code></pre>\n\n<p>Is there anyway to set those attributes in the web.config?</p>\n"},{"tags":[".net","wcf","memory-management"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12903255,"title":"WebService memory usage when hosted in CassiniDev after rebuild","body":"<p>I have got a WCF service which takes up quote some memory, around 1GB.</p>\n\n<p>Its hosted locally in development asp.net hosting (CassiniDev).</p>\n\n<p>When I make a change in code and hit build, server doesn't stop working. It actually starts to use updated code seamlessly, except for memory.</p>\n\n<p>From what it appears it just doubles memory usage after rebuild, so I am not quite sure whats going on here. I have got rather little memory on my machine so sometimes this causes total system freeze.</p>\n\n<p>I am wondering why doesn't it run some GC collect once it starts updating dlls for example, cause doubling memory size def sounds like something interesting is going on. And obviously after its rebuilt, there is no way to access previous version of service anymore, so it would make sense to me if it would not double memory usage, but use the same instead.</p>\n\n<p>EDIT: I guess this could be generalized to memory management when we push an updated dll to service directory, for IIS hosted services and development too.</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":9,"favorite_count":14,"up_vote_count":25,"down_vote_count":0,"view_count":29384,"score":25,"question_id":620333,"title":"What's the best way to test WCF services?","body":"<p>I've used this tool that microsoft ships with visual studio because it's quick and dirty</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/bb552364.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/bb552364.aspx</a></p>\n\n<p>But it's kinda clunky and hard to work with.  Are there any other useful test clients out there that you use and don't require creating a new visual studio project and compiling code?</p>\n\n<p>EDIT: I'm looking more for a graphical test tool that I can use to do quick ad-hoc tests of systems in our different environments without having to write a bunch different tests.</p>\n"},{"tags":["asp.net","wcf","iis","windows-server-2008"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12899371,"title":"404 error when accessing WCF Rest service hosted in ASP.net on Windows Server 2008","body":"<p>I have a WCF Rest Server hosted in an ASP.net Application.  It was set up using the simple RouteTable setup in global.asax.  ON my development machine with IIS 7, it works perfectly, but when I deployed to A windows Server 2008 machine with similar IIS settings, it does not work, I get a 404 error when my ajax methods tries to access the service.  I was wondering if WCF is able to be hosted like I have on my development machine on an actual production server?  If so what must I do to get it to work.</p>\n"},{"tags":["wcf","attributes","datamember"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12897916,"title":"DataMember attributes for Data validation","body":"<p>I am looking to place attributes on my WCF data contract members to validate string length and possibly use regex for more granular parameter validation. </p>\n\n<p>I can the [Range] attribute for numeric and DateTime values and was wondering if any of you have found any other WCF Data Member attributes I can use for data validation. I have found a bevvy of attributes for Silverlight but not for WCF.</p>\n"},{"tags":["wcf","wcf-security","x.509"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":5871,"score":3,"question_id":530342,"title":"\"Cannot load the X.509 certificate identity specified in the configuration\"","body":"<p>I transfered a workking WCF service from my development environment to the QA environment, including the certificates (Root Authority, Root Auth revocation list, Service certificate - including its PK).</p>\n\n<p>Afterward I located the private key usihg 'FindPrivateKey' and gave all the relavent accounts full permissions to access the private key file at the file system level.</p>\n\n<p>My app crashes with a Unhandled Exception: System.InvalidOperationException: Cannot load the X.509 certificate identity specified in the configuration.</p>\n\n<p>I am stumped, I think I covered everything, but obviously not...</p>\n\n<p>I have tried this on a Windows Service Host as well as a Console App Host. Same issue. </p>\n"},{"tags":["wcf","input-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":10835455,"title":"How should I validate parameters passed into my WCF service?","body":"<p>Normally you check incoming parameters in your public methods using <code>if-then-throw</code>  pattern or Code Contracts.<br/>\nMy question is, how should I validate parameters passed in my WCF service? For example, I've got the following contract:<br/></p>\n\n<pre><code>[OperationContract]\nStock GetStock(string symbol);\n</code></pre>\n\n<p>I want to ensure that <code>symbol</code>parameter is not <code>null</code> or empty string. Should I use the same <code>if-then-throw</code> pattern or Code Contracts precondition on the service-side? Should I add a <code>FaultContract</code> attribute to the <code>GetStock</code> method and return a fault to the client? What's the best parameters validation technique for WCF service?</p>\n"},{"tags":["c#","asp.net-mvc-3","wcf","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12900874,"title":"WCF RESTful or Web API to use here as the latest and correct implementation?","body":"<p>I have a project to write a middleware with predominantly two features.</p>\n\n<ol>\n<li>Client (typically browser) asks for list of parts for a given product. Typical question and answer type.</li>\n<li>Wants to upload the data file as attachment when all the details are collected in the step 1.</li>\n</ol>\n\n<p>I can use the latest .Net Framework and technologies.</p>\n\n<p>The above feature are used by browser based applications. Some third party companies are building their web applications based on my API.</p>\n\n<p>I can think of WCF Rest service as one solution. But getting lost when I see the Web API technology.</p>\n\n<p>Please enlighten me on to decide which makes more sense here?</p>\n"},{"tags":["c#","asp.net",".net","wcf","endpoint"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":163,"score":2,"question_id":12897620,"title":"Endpoint not found - WCF web service","body":"<p>I have created 2 endpoints for my WCF service.</p>\n\n<p>It is working fine with <code>basicHttpBinding</code> but causes error for <code>webHttpBinding</code>.</p>\n\n<p>Error = Endpoint not found.</p>\n\n<p><strong>Operation contract definition</strong></p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"POST\",\n           BodyStyle = WebMessageBodyStyle.WrappedRequest,\n           ResponseFormat = WebMessageFormat.Json)]\nVINDescription CallADSWebMethod(string vin, string styleID);\n</code></pre>\n\n<p><code>web.config</code>:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"Description7aBinding\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\" useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\"/&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\"/&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://services.chromedata.com:80/Description/7a\"\n                binding=\"basicHttpBinding\"\n                bindingConfiguration=\"Description7aBinding\"\n                contract=\"description7a.Description7aPortType\"\n                name=\"Description7aPort\"/&gt;\n    &lt;/client&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"asmx\" name=\"ADSChromeVINDecoder.Service\"&gt;\n        &lt;endpoint name=\"httpEndPoint\" \n                  address=\"\" \n                  binding=\"basicHttpBinding\"\n                  contract=\"ADSChromeVINDecoder.IService\"/&gt;\n        &lt;endpoint name=\"webEndPoint\"\n                  address=\"json\"\n                  behaviorConfiguration=\"web\"\n                  binding=\"webHttpBinding\"\n                  contract=\"ADSChromeVINDecoder.IService\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"web\"&gt;\n          &lt;webHttp/&gt;\n          &lt;enableWebScript/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"asmx\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\"/&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Please suggest me how I can fix this?</p>\n"},{"tags":["wcf","entity-framework","code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12875792,"title":"Entity Framework 5 command timeout error after changing target Framework version and re-installing EF","body":"<p>Here's the background: I built a new WCF service which uses EF5 and was targeting .Net Framework 4.5.  I've used code-first against an existing large legacy database.  All was working nicely until I came to deploy the service to a test server, when I discovered the test server (and therefore the production server since they are the same build) was not capable of supporting Framework 4.5.</p>\n\n<p>So, I downgraded the project to target Framework 4.0.  After re-coding all my entity mappings (to avoid using code in the DataAnnotations.Schema namespace specific to 4.5), I had this working again locally.  However, after deploying to the server I was hitting the error described here: <a href=\"http://stackoverflow.com/questions/9591929/can-anyone-spot-why-i-keep-getting-this-error-testing-the-ef-5-beta\">Can anyone spot why I keep getting this error testing the EF 5 beta</a>.</p>\n\n<p>After doing as suggested - uninstalling and re-installing EF5 via NuGet, I am now getting a timeout error when trying to test the service.</p>\n\n<p>Specifically the timeout occurs when attempting to execute the following Linq:</p>\n\n<pre><code>var games = from m in _db.Members\n        join s in _db.UkSyndicates\n            on m.MemberId equals s.MemberId\n        where m.PaymentMethod == \"Credit/Debit Card\"\n        &amp;&amp; EntityFunctions.TruncateTime(s.NextChargeDate) &lt;=  EntityFunctions.TruncateTime(DateTime.Now)\n        &amp;&amp; !string.IsNullOrEmpty(m.AibCustomerReference)\n        &amp;&amp; (m.StatusId == 105 || m.StatusId == 113)\n        select new BillingItem\n        {\n            Id = s.Id,\n            SyndicateId = s.SyndicateId,\n            MemberId = s.MemberId,\n            LastDrawId = s.LastDrawId,\n            LastPaidGame = s.LastPaidGame,\n            NextChargeDate = s.NextChargeDate,\n            Protected = s.Protected,\n            PaymentFrequency = (int)(s.PaymentFrequency*4),\n            CurrencyCode = m.CurrencyCode,\n            AibCustomerReference = m.AibCustomerReference,\n            WeeklyFee = (from f in _db.GameFees where f.FeeName == \"UK_LOTTO_FEE\" &amp;&amp; f.CurrencyCode == m.CurrencyCode select f.Amount).FirstOrDefault(),\n            GameCode = game,\n            PostCode = m.PostCode,\n            CountryCode = m.CountryCode,\n            EmailAddress = m.Email\n        };\n</code></pre>\n\n<p>There may well be a more efficient way to write this query - I'm fairly inexperienced with Linq and EF, but I would stress this did NOT time-out prior to the uninstall and re-install of EF.  In fact it returned data fairly quickly.</p>\n\n<p>I can't see any reason this would timeout after the re-install of EF, nothing in the code has changed, but need a solution to this fast!</p>\n\n<p>Thanks.</p>\n\n<p>To clarify the error I'm getting, it's at the point that EF tries to execute the above query, I get an <strong>EntityCommandExecutionException</strong> thrown.  The exception message is \"An error occurred while executing the command definition.  See the inner exception for details.\"  The inner exception is \"Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\"</p>\n\n<p>The stack trace is below:</p>\n\n<p>at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)\n   at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues)\n   at System.Data.Objects.ObjectQuery<code>1.GetResults(Nullable</code>1 forMergeOption)\n   at System.Data.Objects.ObjectQuery<code>1.System.Collections.Generic.IEnumerable&lt;T&gt;.GetEnumerator()\n   at System.Data.Entity.Internal.Linq.InternalQuery</code>1.GetEnumerator()\n   at System.Data.Entity.Infrastructure.DbQuery<code>1.System.Collections.Generic.IEnumerable&lt;TResult&gt;.GetEnumerator()\n   at RepeatBillingService.Repositories.BillingRepository.GetMembersForGame(String game, List</code>1&amp; billingQ) in p:\\Projects\\BigFatLottos\\RepeatBillingService\\RepeatBillingService\\Repositories\\BillingRepository.cs:line 441\n   at RepeatBillingService.Repositories.BillingRepository.GetMemberGamesForBilling() in p:\\Projects\\BigFatLottos\\RepeatBillingService\\RepeatBillingService\\Repositories\\BillingRepository.cs:line 24\n   at RepeatBillingService.RepeatBillingService.RunRepeatBilling() in p:\\Projects\\BigFatLottos\\RepeatBillingService\\RepeatBillingService\\RepeatBillingService.svc.cs:line 51\n   at SyncInvokeRunRepeatBilling(Object , Object[] , Object[] )\n   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)\n   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)</p>\n"},{"tags":["c#",".net","wcf","logging","nlog"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":109,"score":4,"question_id":12892137,"title":"WCF services, logging vertically","body":"<p>I've been looking at logging for WCF services (including technologies like NLog and PostSharp), but I have something I haven't yet resolved... I don't know if I'm missing something obvious or it's just not possible.</p>\n\n<p>Let's say I have a WCF service tier with 100+ web service call entry points.  One of these is causing a problem.  Beneath that tier is a business logic tier and a database tier.  What I want to do (I think) is turn on logging for that service call (which would include the activity ID for correlation), so that any calls to that service are logged, and any log messages in the lower tiers are also logged.  I don't really want to turn on logging at the assembly level for the lower tiers because they'll be shared by many of the web service methods.</p>\n\n<p>Is this even possible, via an existing framework or by using something like the CorrelationManager in a creative way?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["wcf","distributed-transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":176,"score":0,"question_id":10112690,"title":"TransactionFlowAttribute attribute set to Mandatory but the channel's binding is not configured with a TransactionFlowBindingElement","body":"<p>I have a big problem. I am trying to create a web service that will work with a distributed transaction.<br>\nAll the code below is on the server side of the web service(the web service that is called from a client).<br>\nI wrote this in my interface: </p>\n\n<pre><code>[ServiceContract]\npublic interface IClientOperations\n{\n\n    [OperationContract]\n    [ServiceKnownType(typeof(TriggerExecInput))]\n    [ServiceKnownType(typeof(TriggerExecOutput))]\n    [TransactionFlow(TransactionFlowOption.Mandatory)]\n    TriggerExecOutput TriggeredProfileDataUpdate(TriggerExecInput triggerInputData, bool isST3StatusActive);\n</code></pre>\n\n<p>And this in the web.config file:  </p>\n\n<pre><code>&lt;services&gt;\n  &lt;service name=\"ClientOperationsService\" behaviorConfiguration=\"ServiceBehavior\"&gt;\n    &lt;endpoint address=\"\" binding=\"wsHttpBinding\" \n              bindingConfiguration=\"wsHttpBinding_Common\" contract=\"SL.STAdmin.Applications.WebAPI.IClientOperations\"/&gt;\n    &lt;endpoint contract=\"IMetadataExchange\" binding=\"mexHttpBinding\" address=\"mex\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n\n&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"wsHttpBinding_Common\" transactionFlow=\"true\"&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"ServiceBehavior\"&gt;\n      &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n      &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p>If I right click the .svc file and click on \"View in browser\" I get the following error</p>\n\n<pre><code>Exception Details: System.InvalidOperationException: At least one operation on the 'ClientOperations' contract is configured with the TransactionFlowAttribute attribute set to Mandatory but the channel's binding 'BasicHttpBinding' is not configured with a TransactionFlowBindingElement. The TransactionFlowAttribute attribute set to Mandatory cannot be used without a TransactionFlowBindingElement.\n</code></pre>\n\n<p>I have other .svc files that don't use transactions.\nThey all work well.\nI don't understand why it still tries to use the BasicHttpTransaction when I instruct it to use the other binding type.</p>\n\n<p>DOes anyone have any idea what I am doing wrong?\nThank you in advance.</p>\n"},{"tags":["wcf","asynchronous"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12897043,"title":"2 Async WCF services","body":"<p>I have an asyncronous WCF service, that uses a client proxy to call an 2nd SOAP WCF service. I have no control of the SOAP Java service, but i can set the configuration on the service reference to run Asyncronously.</p>\n\n<p>How would i get a result from the 2nd Async Service, to pass values back to the 1st down to the Client??</p>\n\n<pre><code>public class AddService : IAddService\n{\n    // SOAP Java service reference\n\n    ResultServiceClient proxy = new ResultServiceClient();\n\n    public int AddNumbers(int x, int y)\n    {\n\n        // Am i on the right track here to use BeginXXX, EndXXX?\n        proxy.BeginGetResult(x, y, new AsyncCallback(OnEndAdd), null);\n\n        /// how to return a result here.??????\n        return result;\n    }\n\n    void OnEndAdd(IAsyncResult result)\n    {\n        int result = proxy.EndGetResult(result);\n    }\n}\n</code></pre>\n"},{"tags":["wcf","wcf-rest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":854,"score":0,"question_id":3927520,"title":"How can I return bare result back to WCF client","body":"<p>I have code something like the following:</p>\n\n<pre><code>&lt;OperationContract()&gt;\n&lt;Description(\"\")&gt;\n&lt;WebGet(Bodystyle:=WebMessageBodyStyle.Bare, UriTemplate:=\"TestConnection\")&gt;\nFunction TestConnection() As String\n\n\nPublic Function TestConnection() As String Implements ITestSvc.TestConnection\n    WebOperationContext.Current.OutgoingResponse.ContentType = \"text/plain\"\n    Return \"Connection Success\"\nEnd Function\n</code></pre>\n\n<p>But it returns is <code>&lt;string xmlns='...'&gt;Connection Success&lt;/string&gt;</code></p>\n\n<p>How can I have only \"Connection Success\" to be returned without XML wrapper.  I know that we can do something with MessageEncoder.  But, I want to have it available at operation level (certain operations need XML/JSON wrappers and certain operations don't).</p>\n\n<p>Can anyone help me on this?</p>\n"},{"tags":["asp.net","silverlight","wcf","reporting-services","reportviewer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1082,"score":0,"question_id":5571006,"title":"Multiple Reports with ReportViewer and SSRS 2008 in Silverlight","body":"<p>There is a lot of information out there about using the ReportViewer control in Silverlight to display multiple reports but I can't get any of them to work for me in my situation because the way I have everything set up is a little different.  We had to be able to send post data to the page the ReportViewer is on so a little bit of javascript had to be added in to actually open the page.  </p>\n\n<p>Most of the info online talks about just adding the line ReportViewerCtrl.reset() and it should work but for me it makes absolutely no difference.  I'm fairly confident the code will explain the situation better but if you need more details about the set up, please, just ask.  </p>\n\n<p>So... from the beginning... the hyperlink button for the report calls this on click:  <code>HtmlPage.Window.Invoke(\"showAspPage\", par);</code></p>\n\n<p>That calls this script (I have cut out everything that handles the report parameters and stuff because it works just the same when that data is excluded anyway):</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nvar g_htmlWindow;\n\nfunction showAspPage(param) {\n    var to = param[\"to\"];\n    var myForm = document.createElement(\"form\");\n    myForm.method = \"post\";\n    myForm.action = to;\n    myForm.setAttribute(\"target\", \"_blank\");  \n\n    //handle parameters here\n\n    document.body.appendChild(myForm);\n    myForm.submit();\n    document.body.removeChild(myForm);\n }\n&lt;/script&gt;\n</code></pre>\n\n<p><code>param[\"to\"]</code> is the link to the page the actual <code>ReportViewer</code> control is on... so from the aspx portion of that page:</p>\n\n<pre><code>&lt;body&gt;\n&lt;form id=\"form1\" runat=\"server\"&gt;\n        &lt;asp:ScriptManager ID=\"ScriptManager1\" runat=\"server\"&gt; &lt;/asp:ScriptManager&gt;\n        &lt;rsweb:ReportViewer ID=\"ReportViewer4\" runat=\"server\"&gt; &lt;/rsweb:ReportViewer&gt;\n&lt;/form&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>And the important chunk from the aspx.cs portion of the <code>ReportViewer</code> page... (might be over-kill on setting properties and such but I've added a lot of stuff while trying out what suggestions I found on the web)</p>\n\n<pre><code>ReportViewer4.Reset();  \nReportViewer4.ShowCredentialPrompts = false;\nReportViewer4.ServerReport.ReportServerCredentials = new ReportCredentials();\nReportViewer4.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote;\nReportViewer4.ServerReport.ReportServerUrl = reportServerURL\nReportViewer4.AsyncRendering = false;\n\nReportViewer4.ServerReport.ReportPath = reportPath;\nReportViewer4.KeepSessionAlive = true; \n\nReportViewer4.ServerReport.SetParameters(params);\n\nReportViewer4.SizeToReportContent = true; \nReportViewer4.Width = Unit.Pixel(900);\nReportViewer4.ServerReport.Refresh();\n</code></pre>\n\n<p>When I only want to see one report, everything works fine - everything is set up correctly.  But, when I want to call <code>HtmlPage.Window.Invoke(\"showAspPage\", par);</code> twice in a row for two different reports I start getting this error either when one of the reports loads or when you try and change the report parameters in either of the two reports:  <strong>ASP.NET session has expired or could not be found</strong> Both reports load 95% of the time - with parameters, data, everything; one report always loads but it depends on which one finishes loading first; but you can't change the parameters without that error.</p>\n\n<p>So.... as a slight alternative, in this situation, the ability to change the report isn't actually needed and I could do a direct export to PDF but with scripting involved you can't simply add \"rs:Format=PDF\" to the end of the report path.  However, if the parameters are visible, they need to work if changed.  I guess I could hide the whole parameter section?  But it still doesn't solve the issue of getting the error when the report loads sometimes....</p>\n\n<p>Also.... might be entirely unrelated, but the parameters are encrypted and I have to get the salt and hash from the database (Entity Framework and WCF RIA Services) before I call HtmlPage.Window.Invoke.... I find this kind of weird.... but, after the report screen loads, if the user sits there and doesn't click on anything (but doesn't sit there long enough to actually be logged out, maybe just 5 min or so), I get this error:\n<strong>'Load operation failed for query 'GetStuff'. The remote server returned an error: Not Found.'</strong> but again, it works fine if clicked right away.  I've never had that happen until I started this two reports at once thing, though. </p>\n\n<p>Please... any advice.... or suggestions... or alternatives... or links... </p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>So... I tried to just hide the whole parameters section but the user still needs to be able to print and export.  It works fine for one of the reports but on the other one I get this on the whole window (when exporting to PDF for both reports): </p>\n\n<pre><code>[AspNetSessionExpiredException: ASP.NET session has expired or could not be found]\nMicrosoft.Reporting.WebForms.ViewerDataOperation..ctor() +330\nMicrosoft.Reporting.WebForms.ReportDataOperation..ctor(Boolean requiresFullReportLoad) +120\nMicrosoft.Reporting.WebForms.ReportDataOperation..ctor() +33\nMicrosoft.Reporting.WebForms.ExportOperation..ctor() +29\nMicrosoft.Reporting.WebForms.HttpHandler.GetHandler(String operationType) +188\nMicrosoft.Reporting.WebForms.HttpHandler.ProcessRequest(HttpContext context) +111\nSystem.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +100\nSystem.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +75\n</code></pre>\n"},{"tags":["wcf","error-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12892648,"title":"WCF: How to handle errors when calling another WCF service?","body":"<p>I have a project where I should write WCF service that calls another WCF service. It looks as following:</p>\n\n<pre><code>[ServiceContract]\npublic interface IAsurService\n{\n    [OperationContract(ReplyAction = AsurService.ReplyAction_GetCatalogList)]\n    Message GetCatalogList();\n\npublic Message GetCatalogList()\n{\n    // The external client service\n    GetNsiClient client = new GetNsiClient();\n\n    authContext auth = new authContext\n    {\n        company = \"asur_nsi\",\n        password = \"lapshovva\",\n        user = \"dogm_LapshovVA\"\n    };\n\n    catalogs catalogs = client.getCatalogList(auth);\n</code></pre>\n\n<p>How can I handle errors in this case? Can I use standard fault contract approach like this:</p>\n\n<pre><code>[DataContract]\npublic class AsurDataFaultException\n{\n    private string reason;\n\n    [DataMember]\n    public string Reason\n    {\n        get { return reason; }\n        set { reason = value; }\n    }\n}\n\npublic Message GetCatalogList()\n{\n    // The external client service\n    GetNsiClient client = new GetNsiClient();\n\n    authContext auth = new authContext\n    {\n        company = \"asur_nsi\",\n        password = \"lapshovva\",\n        user = \"dogm_LapshovVA\"\n    };\n\n    catalogs catalogs = null;\n    try\n    {\n        catalogs = client.getCatalogList(auth);\n    }\n    catch (Exception exception)\n    {\n        AsurDataFaultException fault = new AsurDataFaultException();\n        fault.Reason = \"The error: \" + exception.Message.ToString();\n        throw new FaultException&lt;AsurDataFaultException&gt;(fault);\n    }\n</code></pre>\n\n<p>Or something else?</p>\n\n<p>Thank you in advance.</p>\n\n<p>Goran</p>\n"},{"tags":["c#","visual-studio-2010","wcf",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":110,"score":2,"question_id":12415559,"title":"Is there a way to push NamepaceMappings programmatically from the WCF host?","body":"<p>I have a WCF service that requires me to add the folowing to <code>Reference.svcmap</code></p>\n\n<pre><code>&lt;NamespaceMappings&gt;\n  &lt;NamespaceMapping TargetNamespace=\"http://schemas.datacontract.org/2004/07/System.DirectoryServices\" \n                    ClrNamespace=\"System.DirectoryServices\" /&gt;\n&lt;/NamespaceMappings&gt;\n</code></pre>\n\n<p>If I don't have that line I get the following error:</p>\n\n<pre>\nWarning 1   Custom tool warning: Cannot import wsdl:portType\nDetail: An exception was thrown while running a WSDL import extension:\n System.ServiceModel.Description.DataContractSerializerMessageContractImporter\nError: ISerializable type with data contract name 'DirectoryServicesCOMException' \n  in namespace 'http://schemas.datacontract.org/2004/07/System.DirectoryServices' \n  cannot be imported. The data contract namespace cannot be customized for\n  ISerializable types and the generated namespace \n  'DomainManagement.Console.UserManagementProxy' does not match the required CLR \n  namespace 'System.DirectoryServices'. Check if the required namespace has been \n  mapped to a different data contract namespace and consider mapping it \n  explicitly using the namespaces collection. \nXPath to Error Source: \n //wsdl:definitions[@targetNamespace='http://example.com/v1']/wsdl:portType[@name='IUserManagement']\n</pre>\n\n<p>I also know having a common DLL between the client and server will also solve the issue but I do not want to have to require any client to also have the accompanying DLL to communicate with the service.</p>\n\n<p>I understand the issue, and the fix (both dll and editing the file). What I would like to know is: Is there anything I can do on the Host side so every client that subscribes to this service does not need to any extra configuration of the service after generating the proxy in visual studio? (i.e. Using <code>SvcUtil</code> and using the <code>/n:http://schemas.datacontract.org/2004/07/System.DirectoryServices,System.DirectoryServices</code> parameter is not a preferred option)</p>\n"},{"tags":["wcf","iis","iis6"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":188,"score":0,"question_id":6153491,"title":"Script to speed up start of WCF Service on IIS 6","body":"<p>I have an application running on IIS 6 and the application also makes use of WCF Web Services, which when the IIS has been started or restarted and the user uses the Web Service for very first time or first call, it takes ages for a response to a call to come back - 54 seconds.</p>\n\n<p>Whilst I understand the problem that the issue is to with compiling the code and getting services started; I would like to know if there is a simple way that when IIS 6 is started or re-started that the users can use the web service and only have to wait a few seconds - say 6 seconds. </p>\n\n<p>Is there a simple way to do this - is there a simple script that can be run? If so, can someone show a script that I can use?</p>\n\n<p>Thanks  </p>\n"},{"tags":["winforms","wcf","data-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12862097,"title":"WCF service method parameter databinding","body":"<p>I am converting a Windows Forms application with all of the logic in the UI layer into a 2-Tier application, using WCF for the application/business logic.  We are following a pattern where every method on the service takes one parameter, and returns one response object.  All of the required data is encapsulated into these objects.  For example:</p>\n\n<pre><code>public GetPersonResponse GetPerson(GetPersonRequest req){\n    // do stuff\n}\n\npublic class GetPersonRequest{\n    String Name{get;set;}\n    Date BirthDate{get;set;}\n}\n\npublic class GetPersonResponse{\n    Person Result {get;set;}\n}\n</code></pre>\n\n<p>My question is in the databinding on the client side.  When I go to Data Sources and Show Data Sources, I see the Responses and the entities used in them, but not the requests.  In the example above, I would see the GetPersonResponse and the Person, but not GetPersonRequest.  It would be very handy to be able to bind the request object to a form, and submit the whole operation with one line of code:</p>\n\n<pre><code>client.GetPerson((GetPersonRequest) getPersonRequestBindingSource.Current);\n</code></pre>\n\n<p>or at the very least:</p>\n\n<pre><code>GetPersonRequest req = (GetPersonRequest) getPersonRequestBindingSource.Current;\nValidate(req);\nclient.GetPerson(req);\n</code></pre>\n\n<p>For another example, imagine a CreatePerson method, with the following Request class:</p>\n\n<pre><code>public class CreatePersonRequest{\n    String Name {get;set;}\n    String Address {get;set;}\n    String Address2 {get;set;}\n    String City {get;set;}\n    String State {get;set;}\n    String ZipCode {get;set;}\n    Integer Age {get;set;}\n    // more stuff here\n}\n</code></pre>\n\n<p>I don't want code like:</p>\n\n<pre><code>CreatePersonRequest req = new CreatePersonRequest(){\n    Name = NameTextBox.Text,\n    Address = AddressTextBox.Text,\n    Address2 = Address2TextBox.Text,\n    City = CityTextBox.Text,\n    State = StateComboBox.SelectedValue,\n    ZipCode = ZipCodeTextBox.Text,\n    Age = Integer.ParseInt(AgeTextBox.Text)\n}\nclient.CreatePerson(req);\n</code></pre>\n\n<p>I would much rather have:</p>\n\n<pre><code>client.CreatePerson((CreatePersonRequest) createPersonRequestBindingSource.Current)\n</code></pre>\n\n<p>IMHO, this is much cleaner and maintainable - if a field gets added to the request, I simply update the widgets on the UI, and the code itself doesn't have to change.</p>\n\n<p>Is there a way to get the requests recognized by the Data Sources within UI Databinding?</p>\n\n<p>.Net 4.0 on both the client and server.</p>\n\n<p>(All code written by hand, so please do not expect it to be able to be run :) )</p>\n\n<p>Edit: To be clear, the request object is showing in the contract; I can make one in the code behind and populate it manually.  Just looking for the productivity enhancing data binding functionality to work.</p>\n"},{"tags":["wcf","http-post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1652,"score":0,"question_id":7710091,"title":"Simple WCF POST with Uri Template","body":"<p>I thought this would be incredibly simple, but I must be missing something. I am trying to make a simple WCF POST request in conjunction with a UriTemplate. I have read numerous examples where people use a stream paramater as the last paramater, and this is supposed to pick up the POST body. I can only get this to work if the stream is the only paramater.</p>\n\n<p>I've gone back to basics with a simple Hello World service.</p>\n\n<p>Here is my code on the client </p>\n\n<pre><code>static string Test()\n{\n    HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(\"http://localhost:1884/MyAPI/Service.svc/HelloWorld\");\n    req.Method = \"POST\";\n    req.ContentType = \"text/plain\";\n    Stream reqStream = req.GetRequestStream();\n    byte[] fileToSend = System.Text.UTF8Encoding.UTF8.GetBytes(\"sometext\");\n    reqStream.Write(fileToSend, 0, fileToSend.Length);\n    reqStream.Close();\n    HttpWebResponse resp = (HttpWebResponse)req.GetResponse();\n    var sr = new StreamReader(resp.GetResponseStream());\n    return sr.ReadToEnd();\n}\n</code></pre>\n\n<p>And this is the code on the service</p>\n\n<pre><code>[ServiceContract]\npublic interface IService\n{\n    [OperationContract]\n    [WebInvoke(Method = \"POST\", UriTemplate = \"HelloWorld\")]\n    Stream HelloWorld(Stream content);\n}\n\npublic Stream HelloWorld(Stream content)\n{\n    var sr = new StreamReader(content);\n    string text = sr.ReadToEnd();\n    return new System.IO.MemoryStream(Encoding.UTF8.GetBytes(\"Hello World! \" + text)); \n}\n</code></pre>\n\n<p>This all works fine. Then I make this change:</p>\n\n<pre><code>[ServiceContract]\npublic interface IService\n{\n    [OperationContract]\n    [WebInvoke(Method = \"POST\", UriTemplate = \"HelloWorld/test/{test}\")]\n    Stream HelloWorld(string test, Stream content);\n}\n\npublic Stream HelloWorld(string test, Stream content)\n{\n    var sr = new StreamReader(content);\n    string text = sr.ReadToEnd();\n    return new System.IO.MemoryStream(Encoding.UTF8.GetBytes(\"Hello World! \" + text + test)); \n}\n</code></pre>\n\n<p>And change the client code to hit HelloWorld/test/sometext</p>\n\n<p>I get a 500 Internal Server Error. I've tried about 10 different variations including using a ?key=value type UriTemplate, returning strings instead of streams etc, and no luck.</p>\n\n<p>Feels like I'm missing some tiny little thing that is going to make this work, as I have seen countless examples of exactly this all over the web. Theirs works, mine doesn't.</p>\n\n<p>Any ideas?</p>\n"},{"tags":[".net","wcf","error-handling","wcf-4","wcf-extensions"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12892055,"title":"WCF IParameterInspector + IErrorHandler","body":"<p>If I have both <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.aspx\" rel=\"nofollow\"><code>IParameterInspector</code></a> and <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.aspx\" rel=\"nofollow\"><code>IErrorHandler</code></a> attached to a service can I be sure <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ierrorhandler.handleerror.aspx\" rel=\"nofollow\"><code>IErrorHandler.HandleError()</code></a> will be called on the same thread where <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.beforecall.aspx\" rel=\"nofollow\"><code>IParameterInspector.BeforeCall()</code></a> is called?</p>\n\n<p>I need this because in case of a fault thrown <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iparameterinspector.aftercall.aspx\" rel=\"nofollow\"><code>IParameterInspector.AfterCall()</code></a> is never called and there is no way (as far as I know) I can get correlation state object created in <code>BeforeCall()</code>. So I hope to overcome this by having a <code>ThreadStatic</code> field in my implementation of the interfaces :(</p>\n"},{"tags":["wcf","azure","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12601362,"title":"Access denied to URL when deployed in Windows Azure?","body":"<p>I have a WCF service hosted in an Azure WorkerRole. Everything works as expected on localhost but when deployed in Azure there's the following permission problem (found in the Event Viewer)</p>\n\n<blockquote>\n  <p>Exception: HTTP could not register URL <code>https://+:5253/IServiceName/</code>.\n  Your process does not have access rights to this namespace (see\n  <code>http://go.microsoft.com/fwlink/?LinkId=70353</code> for details).</p>\n</blockquote>\n\n<p>(I'm using Castle Windsor WCF to create dependency injected services, but behind the scenes it's basically a ServiceHost with the base address set to <code>https://&lt;instance-ip-endpoint&gt;.cloudapp.net:&lt;endpoint-port&gt;/IServiceName</code> and a <code>WSHttpBinding</code> on top.)</p>\n\n<p>I copy-pasted the code from another of my projects, which works just fine on Azure.</p>\n\n<p>Does anyone have any suggestions on how to troubleshoot this? Isn't the deployment supposed to have access to it's own endpoint?</p>\n"},{"tags":["silverlight","wcf","exception-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1249,"score":0,"question_id":6312422,"title":"throwing Fault Exceptions in WCF service and handling in Silverlight","body":"<p>I am throwing an exception in a Silverlight enabled service and catching it in my silverlight client. I have done everything as per the manual, but still getting what I think is unexpected behavior.</p>\n\n<p>Code from Client</p>\n\n<pre><code>        try\n        {\n            client.ThrowFaultExceptionCompleted += (s, args) =&gt;\n            {\n                DoCallback(args);\n            };\n\n            client.ThrowFaultExceptionAsync(new ThrowFaultExceptionRequest());\n        }\n        catch (FaultException&lt;MyFaultException&gt; myFex)\n        {\n\n        }\n        catch (FaultException fex)\n        {\n\n        }\n</code></pre>\n\n<p>Here is the code from the service</p>\n\n<p>My Custom Fault Exception class</p>\n\n<pre><code>[DataContract]\npublic class MyFaultException\n{\n    private string _reason;\n    private string _myExceptionStackTrace;\n\n    [DataMember]\n    public string Reason\n    {\n        get { return _reason; }\n        set { _reason = value; }\n    }\n\n    [DataMember]\n    public string MyExceptionStackTrace\n    {\n        get { return _myExceptionStackTrace; }\n        set { _myExceptionStackTrace = value; }\n    }\n} \n</code></pre>\n\n<p>The bit of service side code that throws the fault exception. For testing purposes I am calling this method from the client.</p>\n\n<pre><code>    [OperationContract]\n    [FaultContract(typeof(MyFaultException))]\n    public void ThrowFaultException()\n    {\n        MyFaultException mfex = new MyFaultException();\n        mfex.Reason = \"No Reason!\";\n        mfex.MyExceptionStackTrace = \"Long stack trace here\";\n\n        System.ServiceModel.Web.WebOperationContext.Current.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.OK;\n        //throw new FaultException&lt;MyFaultException&gt;(mfex ,new FaultReason(new FaultReasonText(\"My Fault Reason Text here!\")), new FaultCode(\"my fault code here\"));\n        throw new FaultException&lt;MyFaultException&gt;(mfex);\n    }\n</code></pre>\n\n<p>no matter if I throw the FaultException with a single param or those three params in the commented line I get an error in my Reference.cs file in the silverlight proxy class like the one below</p>\n\n<p><img src=\"http://i.stack.imgur.com/fQnjP.jpg\" alt=\"error message in reference.cs\"></p>\n\n<p>and it doesnt ever go to either of the catch blocks.. Is this normal behavior? I have to now catch the error in the callback method DoCallback(args) and in that method check for (args.Error == null). Why doesnt the catch block get hit? </p>\n\n<p>Thanks for your time...</p>\n"},{"tags":["asp.net",".net","wcf","web-services","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12839683,"title":"Could not find default endpoint element that references contract","body":"<p>I have created a WCF web service, i am calling it from ASP.NET 1.1 website.</p>\n\n<p>I have added a simple operation contract to send a string value = IT WORKED.</p>\n\n<p><em><strong>Information on WCF Web service</em></strong></p>\n\n<blockquote>\n  <blockquote>\n    <p>I have added one DLL in the WCF web service.\n    I am accessing the DLL's exposed methods in the operation contract.</p>\n  </blockquote>\n</blockquote>\n\n<p><em>But i am facing an issue when i am invoking the operation contract :</em></p>\n\n<p>In the web service i have referenced/added a DLL which is exposing some methods,\n    and i am calling those methods in my one operation contract.\n    <strong>description7a.Description7aPortType = this is coming from \n    the DLL i have added in the WCF service.</strong></p>\n\n<p>It is giving error :</p>\n\n<pre><code>   Could not find default endpoint element that references contract\n    'description7a.Description7aPortType' in the ServiceModel client \n    configuration section. This might be because no configuration file was\n    found for your application, or because no endpoint element matching this \n    contract could be found in the client element. \n</code></pre>\n\n<p>How can i fix this?</p>\n\n<p>WEB CONFIG OF WCF Web service </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"ADSChromeVINDecoder.Service\" behaviorConfiguration=\"asmx\"&gt;\n        &lt;endpoint address=\"basic\" binding=\"basicHttpBinding\"\n                contract=\"ADSChromeVINDecoder.IService\"&gt;&lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"asmx\"&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","visual-studio-2010","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":224,"score":2,"question_id":5960568,"title":"WCF service throw Exception for some types","body":"<p>I created a WCF service.in my data contract I have two attributes lets say: </p>\n\n<pre><code>[DataMember]\nPrivate User objUser;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>[DataMember]\nPrivate tempClass ObjTemp;\n</code></pre>\n\n<p>I have get and set property for both the attributes. In my implementation class, I have an object of datacontract class... lets say. <code>objData</code>.</p>\n\n<p>When I assign </p>\n\n<pre><code>objData.ObjTemp=(function which return objTemp);\n</code></pre>\n\n<p>the service work fine. But, when I assign.</p>\n\n<pre><code>objData.objUser=(function which return objUser)\n</code></pre>\n\n<p>it throws following error:</p>\n\n<blockquote>\n  <p>The underlying connection was closed: The connection was closed\n  unexpectedly.</p>\n</blockquote>\n\n<p>When I comment </p>\n\n<pre><code>objData.objUser=(function which return objUser)\n</code></pre>\n\n<p>it works fine again.</p>\n\n<p>When I inspect the code inside my User class, I found one property creating problem. When I change the property that property it works fine too; but i do not know why that property is creating problem.</p>\n\n<p>The property is like this:</p>\n\n<pre><code>public IPAddress IP { get; set; }\n</code></pre>\n\n<p>Now this IPAdress class contains a constructor, and get and set for ip variable. In the get, it simply returns ip variable.</p>\n\n<p>in set it checks some condition and then assign value to ip variable. If condition fails, it throws an exception. Can anybody explain what the problem could be?</p>\n\n<p>I just checked another thing.</p>\n\n<p>If i remove <code>[DataMember]</code> attribute from <code>private User objUser;</code> it works fine; but if i put <code>[DataMember]</code> back it generates the same error. </p>\n\n<p>any suggestions?</p>\n"},{"tags":["c#","wcf","windows-services"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":129,"score":1,"question_id":11179465,"title":"Problems with starting windows service on windows xp SP3","body":"<p>I'm currently facing a problem which I can not resolve and I really don't know what to do anymore.</p>\n\n<p>When I'm trying to start the service I receive the message: \"The service is started but again also stopped, this because that some of the services will stop if they have nothing to do, for example the performance logs and the alerts service\".</p>\n\n<p>I've looked into the Windows Logs but nothing is written there which could describe why my service is all the time stopping. I've also tried to fire the windows service via the command prompt which gives me the message: \"The service is not started, but the service didn't return any faults.\". </p>\n\n<p>I've tried to remove all keys which references to my service, which didn't resolve the issue.</p>\n\n<p>I've searched on google (maybe not good enough) to find an answer but I didn't found any. I did found some websites which describes what I could do, but all of these suggestions didn't work.</p>\n\n<p>This is kinda <em>*</em>* because I do not know where to look. I do not have any error message, i do not have any id which i can use to search on. I really don't know where to start and I hope you guys can help me on this one.</p>\n\n<p><strong>Detailed explanation about the windows service</strong></p>\n\n<p><strong>OS:</strong> Windows XP SP3</p>\n\n<p><strong>.Net Framework:</strong> .Net 4.0 Client Profile</p>\n\n<p><strong>Language:</strong> C#</p>\n\n<p><strong>Development environment:</strong> Visual Studio 2010 Professional (but Visual Studio 2012 RC is installed)</p>\n\n<p><strong>Communications:</strong> WCF (Named Pipes), WCF (BasicHTTPBinding)</p>\n\n<p><em>Named Pipes:</em></p>\n\n<p>I have chosen for this solution because I wanted to communicate from a windows service to a windows form application. It worked now for quite some time but suddenly my windows service shuts it self down and I couldn't restart it anymore.</p>\n\n<p>There are two named pipes services implemented: An event service which will send any notification to the windows form application and an management service which gives my windows form application the possibility to maintain my windows service.</p>\n\n<p><em>BasicHTTPBinding:</em></p>\n\n<p>The basic http binding makes the connection to a central server. This connection is then used for streaming information from the client to the server.</p>\n\n<p>I do not know which additional information you will need, but if you guys need something then I'll try to give it as detailed as possible.</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["asp.net",".net","wcf","odata"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":156,"score":2,"question_id":12557510,"title":"Calls to WCF Service occasionally hang","body":"<p>The issue was originally encountered on a WCF Data Service (OData) where a large amount of data was being returned (~3MB) and the application consuming the data (an MVC website) would sporadically hang on some of the requests and would eventually time out.</p>\n\n<p>The issue could be replicated on smaller data payloads but would take a long time to occur. The issue has been replicated on both Cassini and IIS 7. When running through IIS I could see the hung W3 worker process stuck in the 'SendResponse' state until it times out.</p>\n\n<p>To narrow down the cause of the issue I created a console app that would sequentially download content from an ASP.NET site. The issue was replicated on a WCF Data Service (OData), a standard WCF Service, and a Web Forms page that output similar data directly to the HttpResponse object. The example code used is using the standard WCF Service as an example (for ease of setup for those trying to replicate it).</p>\n\n<p>Console App Client:</p>\n\n<pre><code>    static void Main(string[] args)\n    {\n        Console.ReadKey(); // press any key to start test\n\n        do\n        {\n            var req = WebRequest.Create(new Uri(\"http://localhost:26332/WCFTest.svc/GetData\"));\n            var response = req.GetResponse();\n\n            using (var stream = response.GetResponseStream())\n            {\n                var content = new StreamReader(stream).ReadToEnd();           \n            }           \n        } while (true);\n    }\n</code></pre>\n\n<p>WCF Service:</p>\n\n<pre><code>    public class Service1 : IService1\n    {\n        public TestClass[] GetData()\n        {\n            return Enumerable\n                .Range(0, 15000)\n                .Select(i =&gt; new TestClass{ ID = \"1\" })\n                .ToArray();\n        }\n    }\n\n    [DataContract]\n    public class TestClass\n    {\n        [DataMember]\n        public string ID { get; set; }\n    }\n\n    [ServiceContract]\n    public interface IService1\n    {\n        [OperationContract]\n        [WebGet(UriTemplate = \"GetData\")]\n        TestClass[] GetData();\n    }\n</code></pre>\n\n<p>After a number of calls (this differs on each run, but is usually less than 30) to the web service the GetResponseStream call will hang.</p>\n\n<p>Any ideas on what could be going wrong or how to narrow down the cause of the issue would be appreciated!</p>\n\n<p>Service web.config</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"WcfService2.Service1\" &gt;\n        &lt;endpoint\n          address=\"\"\n          binding=\"webHttpBinding\"\n          contract=\"WcfService2.IService1\"\n          behaviorConfiguration=\"webHttp\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"webHttp\"&gt;\n          &lt;webHttp/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;  \n&lt;/configuration&gt;\n</code></pre>\n\n<p>WCF Data Services code:</p>\n\n<pre><code>public class Service1 : DataService&lt;ODataContext&gt;\n{\n    public static void InitializeService(DataServiceConfiguration configuration)\n    {\n        configuration.SetEntitySetAccessRule(\"*\", EntitySetRights.AllRead);\n    }\n}\n\npublic class ODataContext\n{\n    public IQueryable&lt;TestClass&gt; Test\n    {\n        get\n        {\n            return Enumerable\n                .Range(0, 15000)\n                .Select(i =&gt; new TestClass {ID = \"1\"})\n                .AsQueryable();\n        }\n    }\n}\n\npublic class TestClass\n{\n    public string ID { get; set; }\n}\n</code></pre>\n"},{"tags":["wcf","sync","syncframework","microsoft-sync-framework","batching"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12887724,"title":"SYNC FRAMEWORK-Batching","body":"<p>I am able to synchronize two remote databases using sync framework 2.1 over WCF(N-Tier) .</p>\n\n<p>To improve performance while transferring large data, I implemented Batching.</p>\n\n<p>But I am facing below error message:</p>\n\n<pre><code>An unexpected error occurred when applying batch file 1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch. See the inner exception for more details.\n</code></pre>\n\n<p>This is happening only with last batch file. When applying last batch file in the set of batch files the code is terminating with above error message.</p>\n\n<p>Below I am pasting xml format of webservice log (inner exception):</p>\n\n<pre><code>&lt;InnerException&gt;\n&lt;ExceptionType&gt;System.IO.FileNotFoundException, mscorlib, Version=4.0.0.0,     Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/ExceptionType&gt;\n&lt;Message&gt;Could not find file 'c:\\windows\\system32\\inetsrv\\1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch'.&lt;/Message&gt;\n&lt;StackTrace&gt;\nat System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)\nat System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)\nat System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)\nat System.IO.FileStream..ctor(String path, FileMode mode)\nat Microsoft.Synchronization.Data.DbSyncBatchInfoFactory.Deserialize(String batchFileName, Boolean deserializeData)\nat Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 lookupLocation, UInt32 expectedNumber)\nat Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 expectedNumber, String&amp;amp; batchFileName)\nat Microsoft.Synchronization.Data.DbSyncBatchConsumer.ApplyBatches(DbSyncScopeMetadata scopeMetadata, DbSyncSession syncSession, SyncSessionStatistics sessionStatistics)\n&lt;/StackTrace&gt;\n&lt;ExceptionString&gt;System.IO.FileNotFoundException: Could not find file 'c:\\windows\\system32\\inetsrv\\1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch'.\nFile name: 'c:\\windows\\system32\\inetsrv\\1e1855e6-0b9a-4332-9fdb-07a25bc1bd49.batch'\nat System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)\nat System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)\nat System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)\nat System.IO.FileStream..ctor(String path, FileMode mode)\nat Microsoft.Synchronization.Data.DbSyncBatchInfoFactory.Deserialize(String batchFileName, Boolean deserializeData)\nat Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 lookupLocation, UInt32 expectedNumber)\nat Microsoft.Synchronization.Data.DbSyncBatchConsumer.ReadBatchFile(UInt32 expectedNumber, String&amp;amp; batchFileName)\nat Microsoft.Synchronization.Data.DbSyncBatchConsumer.ApplyBatches(DbSyncScopeMetadata scopeMetadata, DbSyncSession syncSession, SyncSessionStatistics sessionStatistics)         \n&lt;/ExceptionString&gt;\n&lt;/InnerException&gt;\n</code></pre>\n\n<p>Your help and suggestions are very much appreciated!!</p>\n\n<p>Thank you in advance friends!!</p>\n"},{"tags":["xml","wcf","xsd"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":12705471,"title":"XML declaration tag in WCF RESTful service","body":"<p>Is it correct to include XML declaration tag like this <code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;</code> into WCF RESTful service response? \nA service response is described by the XSD below:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;xsd:schema version=\"1.0\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;xsd:element name=\"root\"&gt;\n  &lt;/xsd:element&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n\n<p>Also is we need mandatory set the declaration tag in cause if encoding changed to UTF-16?</p>\n"},{"tags":["wcf","web-services","wse"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1802,"score":2,"question_id":8038003,"title":"New to WCF, client passing username token with mustUnderstand set to true","body":"<p>I'm tasked with creating a WCF service that will be consumed by an external client. The client is using WSSE security, specifically, they're passing a username token via a SOAP header. </p>\n\n<p>The WCF service is hosted on an IIS server with SSL enabled.</p>\n\n<p>At this point, I have a semi-working prototype. The issue I'm dealing with now is that the SOAP header has the mustUnderstand attribute set to 1, and this causes the process to fail. </p>\n\n<p>I'd like some advice (or better yet, a code example <em>smiles</em>) on how to handle the username token in such a fashion as to return the proper response when the mustUnderstand attribute is true.</p>\n\n<p>Here's a sample of the SOAP request that's failing:</p>\n\n<pre><code>    &lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\"&gt;\n       &lt;soapenv:Header&gt;\n          &lt;wsse:Security soapenv:mustUnderstand=\"1\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n             &lt;wsse:UsernameToken&gt;\n                &lt;wsse:Username&gt;TestUser&lt;/wsse:Username&gt;\n                &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;TestPWD&lt;/wsse:Password&gt;\n                &lt;wsse:Nonce EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"&gt;NzU3MjFhN2YtYTlmYS00ZWZjLTkxNjktY2ExZjlkZDEwNzE5&lt;/wsse:Nonce&gt;\n                &lt;wsu:Created xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;2011-10-26T03:04:39Z&lt;/wsu:Created&gt;\n             &lt;/wsse:UsernameToken&gt;\n          &lt;/wsse:Security&gt;\n       &lt;/soapenv:Header&gt;\n       &lt;soapenv:Body&gt;\n          &lt;tem:Getstuff&gt;\n             &lt;tem:Arg1&gt;Arg1&lt;/tem:Arg1&gt;\n             &lt;tem:Arg2&gt;Arg2&lt;/tem:Arg2&gt;\n          &lt;/tem:Getstuff&gt;\n       &lt;/soapenv:Body&gt;\n    &lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>If soapenv:mustUnderstand=\"1\" is changed to soapenv:mustUnderstand=\"0\", then the process works.</p>\n\n<hr>\n\n<p>PS: Here's a revised sample request the client sent:</p>\n\n<pre><code>    &lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n      &lt;s:Header&gt;\n        &lt;Action s:mustUnderstand=\"1\" xmlns=\"http://schemas.microsoft.com/ws/2005/05/addressing/none\"&gt;http://tempuri.org/WService/Getstuff&lt;/Action&gt;\n        &lt;Security xmlns=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n          &lt;wsse:UsernameToken xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" wsu:Id=\"removed\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;\n            &lt;wsse:Username&gt;TestUser&lt;/wsse:Username&gt;\n            &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;TestPass&lt;/wsse:Password&gt;\n            &lt;wsse:Nonce&gt;2Udx78sh2y2xRJYJpZZ9+w==&lt;/wsse:Nonce&gt;\n            &lt;wsu:Created&gt;2011-09-26T19:12:48Z&lt;/wsu:Created&gt;\n          &lt;/wsse:UsernameToken&gt;\n        &lt;/Security&gt;\n      &lt;/s:Header&gt;\n      &lt;s:Body&gt;\n        &lt;Getstuff xmlns=\"http://tempuri.org/\"&gt;\n         &lt;Arg1&gt;Arg1&lt;/Arg1&gt;\n         &lt;Arg2&gt;Arg2&lt;/Arg2&gt;\n        &lt;/Getstuff&gt;\n      &lt;/s:Body&gt;\n    &lt;/s:Envelope&gt;\n</code></pre>\n\n<p>I receive the following response to the above requests:</p>\n\n<pre><code>    &lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n       &lt;s:Body&gt;\n          &lt;s:Fault&gt;\n             &lt;faultcode&gt;s:MustUnderstand&lt;/faultcode&gt;\n             &lt;faultstring xml:lang=\"en-US\"&gt;The header 'Security' from the namespace 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd' was not understood by the recipient of this message, causing the message to not be processed.  This error typically indicates that the sender of this message has enabled a communication protocol that the receiver cannot process.  Please ensure that the configuration of the client's binding is consistent with the service's binding.&lt;/faultstring&gt;\n          &lt;/s:Fault&gt;\n       &lt;/s:Body&gt;\n    &lt;/s:Envelope&gt;\n</code></pre>\n\n<p>Here's the binding:</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"TransportBind\" maxBufferSize=\"2147483647\" maxBufferPoolSize=\"2147483647\"\n      maxReceivedMessageSize=\"2147483647\"&gt;\n      &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\"\n        maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"None\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n    &lt;binding name=\"basic\" maxBufferSize=\"2147483647\" maxBufferPoolSize=\"2147483647\"\n      maxReceivedMessageSize=\"2147483647\"&gt;\n      &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\"\n        maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/bindings&gt;\n</code></pre>\n"},{"tags":[".net","wcf","asynchronous"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12869381,"title":"WCF Async Client calling WCF Async Service","body":"<p>I have a light Client application, that makes Asyncronous WCF calls to a IIS host WCF service. Then the hosted service acts as a Client to make SOAP calls to another external service, does some work then return the result back to client.</p>\n\n<p><strong>Client >> WCF IIS Service >> SOAP Service</strong></p>\n\n<p>I spent alot of time, making sure the <strong>Client > WCF IIS Service</strong> was multithreaded and Asyncronous, only to find it bottlenecking Syncronously from the <strong>WCF IIS Service >> SOAP Service</strong>.</p>\n\n<p>Is there a way to make Client Async calls to the WCF IIS Service, which in turn makes Async alls to the SOAP service, then returns the result back down to the CLient?</p>\n\n<p>Kind of boggles my mind right now, any help appreciated.</p>\n"},{"tags":["android","wcf","entity-framework","wcf-client","wcf-rest"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":162,"score":1,"question_id":12744440,"title":"How to Consume WCF Rest Service with Android","body":"<p>Here is code snippet, where I connect to my WCF Service.</p>\n\n<pre><code>DefaultHttpClient client = new DefaultHttpClient();         \n                            HttpGet request = new HttpGet(EMPLOYEE_LOG_IN);\n                            request.setHeader(\"Accept\", \"application/json\");\n                            request.setHeader(\"Content-type\", \"application/json\");          \n                            HttpResponse response = client.execute(request);\n                            HttpEntity entity = response.getEntity();\n                            if(entity.getContentLength() != 0) {\n                                Reader employeeReader = new InputStreamReader(response.getEntity().getContent());       \n                                                //create a buffer to fill if from reader            \n                                                char[] buffer = new char[(int) response.getEntity().getContentLength()];        \n                                                //fill the buffer by the help of reader         \n                                                employeeReader.read(buffer);                \n                                                //close the reader streams              \n                                                employeeReader.close(); \n                                                //for the employee json object              \n                                                JSONObject employee =  new JSONObject(new String(buffer));\n                                                Log.d(\"Response\",employee.getString(\"FirstName\"));    \n</code></pre>\n\n<p>It behaves different ways in different situation.\nHere is code from my WCF Service</p>\n\n<pre><code> public Controller GetEmployees(int personalNUmber)\n        {                \n\n                return new Controller\n                            {\n                                EmployeeId = 1,\n                                FirstName = \"FirstName\",\n                                LastName = \"LastName\"\n                            };    \n            }\n        }\n</code></pre>\n\n<p>SO when I call  this method   everything works fine, I get json format well, but when I \nedited my method and connected into Entity DB like this</p>\n\n<pre><code>FineReceiptsTestEntities _entity = new FineReceiptsTestEntities();\n\n        var t = _entity.Employees.FirstOrDefault(x =&gt; x.EmployeeID == personalNUmber);\n        return new Controller\n                   {\n\n                       EmployeeId = 1,\n                       FirstName = t != null ? t.Name : \" \",\n                       LastName = \"LastName\"\n                   }; \n</code></pre>\n\n<p>Json object didn't returned. Returned only html content with <strong>error</strong> like this</p>\n\n<blockquote>\n  <p>server encountered an error processing the request.Please see the\n   service help page  for constructing valid requests to the service.</p>\n</blockquote>\n\n<p>But both type of method in browser works fine and returns relevant data.</p>\n\n<p>and here is my <strong>web.config</strong></p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;standardEndpoints&gt;\n      &lt;webHttpEndpoint&gt;\n        &lt;standardEndpoint helpEnabled=\"true\" automaticFormatSelectionEnabled=\"true\" /&gt;\n      &lt;/webHttpEndpoint&gt;\n    &lt;/standardEndpoints&gt;\n    &lt;services&gt;\n      &lt;service name=\"dev_FineReceiptsService.ControllersInfo\"&gt;\n        &lt;endpoint kind=\"webHttpEndpoint\" contract=\"dev_FineReceiptsService.IControllersInfo\" /&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"FineReceiptsTestEntities\" connectionString=\"metadata=res://*/FineTest.csdl|res://*/FineTest.ssdl|res://*/FineTest.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=msdev01;Initial Catalog=FineReceiptsTest;Integrated Security=True;MultipleActiveResultSets=True&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n  &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>So can anyone tell me what is the problem when using Entity to retrieve data ?</p>\n"},{"tags":["wcf","keepalive","system.net.webexception","servicereference","communicationexception"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":5618,"score":4,"question_id":3900040,"title":"System.Net.WebException: The request was aborted: the request was cancelled","body":"<p>I have a WCF service that has been giving me this error under load conditions (and I cant seem to recreate the error otherwise). we've been trying to find a way aroud it for about a week now with no such luck..</p>\n\n<p>actually, the error I see has two parts to it,</p>\n\n<blockquote>\n  <p>System.ServiceModel.CommunicationException:\n  An error: (The request was aborted:\n  the request was cancelled.) occurred\n  while transmitting data over the http\n  channel.</p>\n</blockquote>\n\n<p>and:</p>\n\n<blockquote>\n  <p>System.Net.WebException: The request\n  was aborted: the request was\n  cancelled.</p>\n</blockquote>\n\n<p>I've seen many people suggest to disable working with keep alive by overloading a method in the reference.cs file and setting keepAlive= false, however out client side is using a service reference (in addition to web reference) and this option does not exist anymore.</p>\n\n<p>Another option Ive seen was to add a custom Binding to the service instead of the BasicHTTPBinding we are using now, but that would bother backwards support of the webservice to those who have been using a webReference (since CustomBinding is not soap enabled).</p>\n\n<p>Has anyone dealt with this error before? is there a way to disable keep alive in WCF without affecting the server side? is there anything other that keep alive that is known to cause this error?</p>\n\n<p>thank you very much i advance..</p>\n"},{"tags":["c#","asp.net-mvc","wcf","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":185,"score":3,"question_id":12692169,"title":"Can't import ServiceReference1 from ASP.NET MVC4","body":"<p>What <code>using</code> statements do I need to get at the <code>ServiceReference1</code> object in ASP.NET MVC4 application?</p>\n\n<p>The <code>ServiceReference1</code> here is the name of my service reference that I added. What's weird, is that if I double click on it, it doesn't bring up anything in the object browser...</p>\n\n<p>Update: For some reason \"<a href=\"http://stackoverflow.com/a/11128845/74865\">Unchecking \"Reuse types in referenced assemblies\"</a>\" solves my problem! </p>\n\n<p><img src=\"http://i.stack.imgur.com/WeCxp.png\" alt=\"enter image description here\"></p>\n"},{"tags":["jquery","asp.net","ajax","json","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":12874717,"title":"Calling simple WCF service from jQuery - 500 Internal Server Error","body":"<p>During the last 4 hours i've been looking at any post I could find regarding this question, so I might be a little blind by now ;-)</p>\n\n<p>I am trying to call a simple WCF service using jQuery. I've been using WebMethods for some time, and I am trying to migrate some. I am trying to test with the most simple webservice you can imagine:</p>\n\n<pre><code>[ServiceBehavior(IncludeExceptionDetailInFaults = true)]\n[ServiceContract(Namespace = \"\")]\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class ForumOperationService : IForumOperationService\n{\n    public string Horse(string prefixText, int count)\n    {\n        return \"hestWCF\";\n    }\n}\n</code></pre>\n\n<p>My jQuery call:</p>\n\n<pre><code> $(document).ready(function () {\n            var hest;\n            $.ajax({\n                type: \"POST\",\n                datatype: \"application/json\",\n                url: \"Services/ForumOperationService.svc/Horse\",\n                data: { prefixText: 'a', count: 10 },\n                success: function (data) {\n                    hest = data;\n                }\n            });\n        });\n</code></pre>\n\n<p>My web.config is like this:</p>\n\n<pre><code> &lt;system.webServer&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"ServiceAspNetAjaxBehavior\"&gt;\n          &lt;enableWebScript /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service name=\"ForumOperationService\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"ServiceAspNetAjaxBehavior\"\n            binding=\"webHttpBinding\" contract=\"IForumOperationService\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    .... (more stuff)\n</code></pre>\n\n<p>In Firebug I get the following error:</p>\n\n<blockquote>\n  <p><em>NetworkError: 500 Internal Server Error - \n  <code>http://localhost:21599/Client/Services/ForumOperationService.svc/Horse</code></em></p>\n</blockquote>\n\n<p>Any ideas?</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>Just ran the WCF Test Client, and got this error:</p>\n\n<blockquote>\n  <p>The service class of type ForumOperationService both defines a\n  ServiceContract and inherits a ServiceContract from type\n  IForumOperationService. Contract inheritance can only be used among\n  interface types. If a class is marked with ServiceContractAttribute,\n  it must be the only type in the hierarchy with\n  ServiceContractAttribute. Consider moving the\n  ServiceContractAttribute on type IForumOperationService to a separate\n  interface that type IForumOperationService implements.</p>\n</blockquote>\n\n<p>Will follow up tomorrow.</p>\n"},{"tags":[".net","wcf","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3663,"score":0,"question_id":7103311,"title":"WCF invoking service fail","body":"<p>I could be able to call it in my own server and it works but the problem occurs when I host wcf service in IIS. The details of the error are the following...</p>\n\n<blockquote>\n  <p>Failed to invoke the service. Possible causes: The service is offline\n  or inaccessible; the client-side configuration does not match the\n  proxy; the existing proxy is invalid. Refer to the stack trace for\n  more detail. You can try to recover by starting a new proxy, restoring\n  to default configuration, or refreshing the service.</p>\n  \n  <p>Stack Trace Error Details</p>\n  \n  <p>The server was unable to process the request due to an internal error.\n  For more information about the error, either turn on\n  IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute\n  or from the <code>&lt;serviceDebug&gt;</code> configuration behavior) on the server in\n  order to send the exception information back to the client, or turn on\n  tracing as per the Microsoft .NET Framework 3.0 SDK documentation and\n  inspect the server trace logs.</p>\n  \n  <p>Server stack trace:<br>\n  at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message\n  reply, MessageFault fault, String action, MessageVersion version,\n  FaultConverter faultConverter)<br>\n  at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime\n  operation, ProxyRpc&amp; rpc)<br>\n  at System.ServiceModel.Channels.ServiceChannel.Call(String action,\n  Boolean oneway, ProxyOperationRuntime operation, Object[] ins,\n  Object[] outs, TimeSpan timeout)<br>\n  at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage\n  methodCall, ProxyOperationRuntime operation)<br>\n  at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage\n  message)</p>\n  \n  <p>Exception rethrown at [0]:<br>\n  at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage\n  reqMsg, IMessage retMsg)<br>\n  at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;\n  msgData, Int32 type)<br>\n  at IUserService.GetUser(String UserID)<br>\n  at UserServiceClient.GetUser(String UserID)</p>\n</blockquote>\n\n<p>Here are the source codes:</p>\n\n<ol>\n<li><p>app.config file from wcfservicelirbrary</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n\n&lt;system.web&gt;\n&lt;compilation debug=\"true\" /&gt;\n&lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"UserServiceLibrary.UserService\"&gt;\n        &lt;endpoint address=\"\" binding=\"wsHttpBinding\"      contract=\"UserServiceLibrary.IUserService\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:8732/Design_Time_Addresses/UserServiceLibrary/UserService/\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"False\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;        \n&lt;/configuration&gt;\n</code></pre></li>\n<li><p>Web config file from WCF Website Host</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n &lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"false\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"UserServiceLibrary.UserService\"&gt;\n       &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" bindingConfiguration=\"\"\n  contract=\"IMetadataExchange\" /&gt;\n       &lt;endpoint address=\"basic\" binding=\"basicHttpBinding\" bindingConfiguration=\"\"\n  contract=\"UserServiceLibrary.IUserService\" /&gt;\n       &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"UserServiceLibrary.IUserService\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n     &lt;serviceBehaviors&gt;\n       &lt;behavior&gt;\n\n         &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n       &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;/system.serviceModel&gt;\n&lt;system.webServer&gt;\n   &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n&lt;/system.webServer&gt;  \n&lt;/configuration&gt;\n</code></pre></li>\n</ol>\n"},{"tags":["android","wcf","gzip"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":12524086,"title":"android post gzip","body":"<p>Trying to implement gzip on an Android project to reduce client data charges. All devices connect to a WCF webservice and IIS is now sending compressed data back to the devices as expected. Now I need to work out how to post back gzipped xml data modified on the android device.\nThe device code is as follows </p>\n\n<pre><code>     httpsURLConnection.setDoInput(true);\n     httpsURLConnection.setDoOutput(true);\n     httpsURLConnection.setConnectTimeout(TIMEOUT);\n     httpsURLConnection.setReadTimeout(TIMEOUT);\n     httpsURLConnection.setRequestMethod(\"POST\");\n     httpsURLConnection.setRequestProperty(\"Content-Type\", \"application/xml\");\n     httpsURLConnection.setRequestProperty(\"Content-Encoding\", \"gzip);\n     httpsURLConnection.connect();\n\n     GZIPOutputStream gzipOutputStream = new GZIPOutputStream(new BufferedOutputStream((httpsURLConnection.getOutputStream())));\n     gzipOutputStream.write(_xmlText.getBytes());\n     gzipOutputStream.flush();\n     gzipOutputStream.finish();\n     gzipOutputStream.close();\n</code></pre>\n\n<p>Running Wireshark on webserver shows the gzip packets and decompresses them to show the correct data from the device.\nThe problem is that the WCF web service does not seem to recognise the data - the error is XmlException - The data at the root level is invalid. Line 1, position 1.\nWhich makes me think that the data is still compressed and WCF cannot handle gzip - which I seem to remember reading about previously. Do I then need to create a message decoder in .net to handle the gzip compression? Was this hopefully addressed in .net 4.5?</p>\n\n<p>Any help with these questions appreciated.</p>\n"},{"tags":[".net","wcf","service","config","restart"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":268,"score":4,"question_id":6021741,"title":"WCF as Service: Modifying app.config file","body":"<p>I have a WCF running as a Windows service. I deployed it to a server (after quite a bit of banging my head against the keyboard).</p>\n\n<p>Last issue: When making changes to the app.config (programname.exe.config in the service directory under program files), it obviously needs to be restarted.</p>\n\n<p>Problem is this -- when I make a change to the config file and try to restart the service, it gives me the \"Some services stop automatically if they have no work to do, for example...\". I have to completely uninstall the service, re-install again, modify the config file, and THEN start the service.</p>\n\n<p>This seems incredibly tedious and unnecessary. I think I should be able to simply edit the config file and restart. Is there a known conflict or setting I should be looking out for?</p>\n\n<p>Thanks!\n-Jason</p>\n"},{"tags":[".net","asp.net-mvc","wcf","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12881238,"title":"what's the difference between ServiceHost and WebServiceHost?","body":"<p>For .Net4, is there any difference between the following</p>\n\n<pre><code>Uri baseAddress = new Uri(\"http://localhost:8080/test\");\nServiceHost host = new ServiceHost(typeof(TestService), baseAddress);\nhost.Open();\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Uri baseAddress = new Uri(\"http://localhost:8080/test\");\nWebServiceHost host = new WebServiceHost(typeof(TestService), baseAddress);\nhost.Open();\n</code></pre>\n\n<p>all the books recommend using webServiceHost, but why I cannot see difference?</p>\n"},{"tags":["asp.net","asp.net-mvc-3","wcf","wcf-binding","wcf-client"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12879752,"title":"WCF Service throwing exception while receiving a list of more than 40 objects","body":"<p>I have a WCF service using a BasicHttpBinding. I am sending the request to the service from the controller by passing a list of custom object as follows:</p>\n\n<p>Service code:</p>\n\n<pre><code>public List(Information) AddData(List(Information) InformationList, out string errorMessage)   \n{ }\n</code></pre>\n\n<p>List(Information) is a class with 40 fields.</p>\n\n<p>Now my controller code is:</p>\n\n<pre><code>Service.AddData(InformationList);\n</code></pre>\n\n<p>The problem is that when I try to hit the service with more than 100 objects I receive an error \"400 Error Bad Request\" with no details in the inner exception.</p>\n\n<p>The configuration in web.config is as follows:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;binding\n  maxBufferSize=\"2147483647\"\n  maxBufferPoolSize=\"2147483647\"\n  maxReceivedMessageSize=\"2147483647\" /&gt;\n\n&lt;readerQuotas \n  maxDepth=\"32\" \n  maxStringContentLength=\"2147483647\"\n  maxArrayLength=\"2147483647\"\n  maxBytesPerRead=\"2147483647\"\n  maxNameTableCharCount=\"2147483647\" /&gt;\n</code></pre>\n\n<p>This is the configuration for both the server and UI web.config.</p>\n\n<p>Is there any settings or solution for sending the list of more than 100 objects to the service without getting the 400 bad request error?</p>\n"},{"tags":["wpf","wcf","windows-xp-x64"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12837370,"title":"Win XP 64 bit and .NET 4.0 issue","body":"<p>I'm developing a WPF with WCF app on .NET 4.0, the machine in which is being developed is a Windows 7 64 bit SP1. The app has already been installed in several machines with different configurations (Win XP, Vista, 7, and even POS), summing up to a total of around 20 different machines.</p>\n\n<p>Yesterday I went to install it on a new customer, and the app just crashed with no error message (probably due to my several try catches along the code). The only message that showed was something like: The App stopped working, Windows is trying to find a solution.</p>\n\n<p>Tried different configurations and nothing, until I noticed that the client machine is a Win XP 64 bit, which I believe I've never came across until now.</p>\n\n<p>I searched the web, and read somewhere that there was a compatibility issue with Win XP x64 and .NET 4.0. I don't know if this is the case.</p>\n\n<p>Do I have to downgrade my app to .NET 3.5?? Or do I have to create a 64 version, or is it the client machine that has a problem?? I can't recreate the issue on my PS, even with Win XP installed on virtual machine, so I'm flying blind.</p>\n"},{"tags":["wcf","json","rest","compression"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1315,"score":0,"question_id":2922709,"title":"Send large JSON data to WCF Rest Service","body":"<p>I have a client web page that is sending a large json object to a proxy service on the same domain as the web page.</p>\n\n<p>The proxy (an ashx handler) then forwards the request to a WCF Rest Service. Using a WebClient object (standard .net object for making a http request)</p>\n\n<p>The JSON successfully arrives at the proxy via a jQuery POST on the client webpage.</p>\n\n<p>However, when the proxy forwards this to the WCF service I get a Bad Request - Error 400</p>\n\n<p>This doesn't happen when the size of the json data is small </p>\n\n<p>The WCF service contract looks like this</p>\n\n<pre><code>[WebInvoke(Method = \"POST\", BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]\n[OperationContract]\nCarConfiguration CreateConfiguration(CarConfiguration configuration);\n</code></pre>\n\n<p>And the DataContract like this</p>\n\n<pre><code>[DataContract(Namespace = \"\")]\n public class CarConfiguration\n {\n        [DataMember(Order = 1)]\n        public int CarConfigurationId { get; set; }\n        [DataMember(Order = 2)]\n        public int UserId { get; set; }\n        [DataMember(Order = 3)]\n  public string Model { get; set; }\n        [DataMember(Order = 4)]\n        public string Colour { get; set; }\n        [DataMember(Order = 5)]\n        public string Trim { get; set; }\n        [DataMember(Order = 6)]\n        public string ThumbnailByteData { get; set; }\n        [DataMember(Order = 6)]\n        public string Wheel { get; set; }\n        [DataMember(Order = 7)]\n        public DateTime Date { get; set; }\n  [DataMember(Order = 8)]\n  public List&lt;string&gt; Accessories { get; set; }\n  [DataMember(Order = 9)]\n        public string Vehicle { get; set; }\n  [DataMember(Order = 10)]\n  public Decimal Price { get; set; }\n }\n</code></pre>\n\n<p>When the ThumbnailByteData field is small, all is OK. When it is large I get the 400 error</p>\n\n<p>What are my options here?</p>\n\n<p>I've tried increasing the MaxBytesRecived config setting but that is not enough</p>\n\n<p>Any ideas?</p>\n"},{"tags":["wcf","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12875080,"title":"Service published in IIS says \"Metadata publishing for this service is currently disabled\"","body":"<p>I use VS2010 Win 2008 R2. I created a \"WCF service library\", put it in a virtual directory in IIS and converted that to an application. </p>\n\n<p>I put the svc file in root of the application and changed the output build path to <code>bin</code>. Every time when try the URL <code>http://localhost/test1/Service1.svc</code> I receive the error <em>\"Metadata publishing for this service is currently disabled\"</em>.  </p>\n\n<p>I also tried the URL <code>http://localhost/test1/MEX</code>. Mex behavior is configured correctly but this error appears. </p>\n\n<p>When I try to add a service reference to a console application it also can't find metadata for service.</p>\n"},{"tags":["asp.net","wcf","web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12879197,"title":"WCF service returning test screen as if I browsed to service address","body":"<p>I am calling a service which is now hosted in IIS in a working ASP.NET site. My test app lets me create the service reference and gives me intellisense to enter all the parameters. When the service is called I am getting the following error: </p>\n\n<p>The content type text/html; charset=UTF-8 of the response message does not match the content type of the binding (text/xml; charset=utf-8).</p>\n\n<p>I used fiddler (based on info from other questions on this site) to see the html being returned and I see that the standard service web screen is being returned. Here's some text from it:</p>\n\n<p>To test this service, you will need to create a client and use it to call the service. You can do this using the svcutil.exe tool from the command line with the following syntax...</p>\n\n<p>Why am I not getting the real service response?</p>\n\n<p>Here's that part of the web.config:\nBTW, my site is https.</p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_IService\" closeTimeout=\"00:01:00\"\n          openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n          allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n          maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n          messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n          useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n              realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://www.ed.net/Service.svc\"\n        binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IService\"\n        contract=\"EdQuotingService.IService\" name=\"BasicHttpBinding_IService\" /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["c#","asp.net",".net","wcf","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12874466,"title":"Is HttpListener class deprecated?","body":"<p>I am trying with setting a web service without using IIS.</p>\n\n<p>I knew we can use HttpListener to create simple http server before. I am wondering if it is deprecated now since WCF seems provide more advanced features.</p>\n"},{"tags":[".net","wcf","https","proxy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12869582,"title":".NET 4 WCF App - Cannot connect to external https service via proxy server","body":"<p>We have a Windows Communication Foundation (WCF) app using .NET Version 4 that connects to other services both in the intranet and externally; the external (on the Internet) service uses a secure (https) connection (credit card api).</p>\n\n<p>In our dev/test environment everything works fine, however in the production environment the connection to the external https based service fails (I have no logs unfortunately, it just stops and our service then returns a HTTP 400 (Bad Request) error.</p>\n\n<p>The only difference i can see is that the Windows 2003 server that hosts the app in production connects to the Internet via a proxy server, whereas our test environment has a direct Internet connection.</p>\n\n<p>We have tried to ensure that our app uses the correct proxy settings by adding the proxy configuration to our web.config like this:</p>\n\n<pre><code>&lt;system.net&gt;\n    &lt;defaultProxy&gt;\n      &lt;proxy\n        usesystemdefaults=\"false\"\n        proxyaddress=\"http://ourproxy:8080\"\n        bypassonlocal=\"true\"\n      /&gt;\n      &lt;bypasslist&gt;\n        &lt;add address=\"10.*\" /&gt;\n      &lt;/bypasslist&gt;\n    &lt;/defaultProxy&gt;\n  &lt;/system.net&gt;\n</code></pre>\n\n<p>we also tried using just the settings from Internet Explorer (which I understood are the defaults anyway, i.e. even without any explicit proxy settings in your web.config those proxy settings will be used for http and https based connections from your WCF app):</p>\n\n<pre><code>&lt;system.net&gt;\n    &lt;defaultProxy&gt;\n      &lt;proxy\n        usesystemdefaults=\"true\"\n      /&gt;\n    &lt;/defaultProxy&gt;\n&lt;/system.net&gt;\n</code></pre>\n\n<p>Neither of these settings were successful, and interestingly whenever we had any of these active not only did the connection to the external server fail, but also the connectivity to the service on the Intranet, which worked fine without any proxy settings in web.config, is failing whenever any proxy settings are in there.</p>\n\n<p>I'm not really sure this is a proxy issue at all, but it seems to be the only difference (bar possibly patchlevels of Windows 2003 Server) between the environments.</p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["json","wcf","browser"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12874331,"title":"WCF Service returns json","body":"<p>I want my WCF service to return json.</p>\n\n<p>I test it on ASP.NET Development Server and it works from WCF Test Client (method invokation is ok).</p>\n\n<p>But testing from browser fails with error 400 bad request.</p>\n\n<p><code>web.config</code>:\n</p>\n\n<pre><code>&lt;configuration&gt;\n   &lt;system.web&gt;\n      &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n   &lt;/system.web&gt;\n   &lt;system.serviceModel&gt;\n      &lt;services&gt;\n         &lt;service name=\"WebServiceExample\" \n                  behaviorConfiguration=\"MetadataBehaviour\"&gt;\n            &lt;endpoint \n                address=\"\" \n                behaviorConfiguration=\"AjaxBehaviour\" \n                binding=\"webHttpBinding\" \n                contract=\"WebService.IWebServiceExample\"&gt;\n               &lt;identity&gt;\n                  &lt;dns value=\"localhost\" /&gt;\n               &lt;/identity&gt;\n             &lt;/endpoint&gt;\n          &lt;/service&gt;\n      &lt;/services&gt;\n      &lt;behaviors&gt;\n          &lt;serviceBehaviors&gt;\n             &lt;behavior&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n             &lt;/behavior&gt;\n             &lt;behavior name=\"MetadataBehaviour\"&gt;\n                 &lt;serviceMetadata httpGetEnabled=\"true\" httpGetUrl=\"\"/&gt;\n             &lt;/behavior&gt;\n          &lt;/serviceBehaviors&gt;\n          &lt;endpointBehaviors&gt;\n             &lt;behavior name=\"AjaxBehaviour\"&gt;\n                 &lt;webHttp/&gt;\n             &lt;/behavior&gt;\n          &lt;/endpointBehaviors&gt;\n       &lt;/behaviors&gt;\n       &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n   &lt;/system.serviceModel&gt;\n   &lt;system.webServer&gt;\n      &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n   &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>Contract</strong>:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>[ServiceContract]\npublic interface IWebServiceExample\n{        \n\n    [OperationContract]\n    [WebGet(UriTemplate = \"/check/{key}\",\n       ResponseFormat = WebMessageFormat.Json)]\n    DataElement Check(string key);\n}\n\n\n[DataContract]\npublic class DataElement\n{\n\n    [DataMember]\n    public string Key { get; set; }\n\n    [DataMember]\n    public DateTime DateSince { get; set; }\n\n    [DataMember]\n    public DateTime DateTill { get; set; }       \n}\n</code></pre>\n\n<h3>SVC Markup:</h3>\n\n<pre class=\"lang-cs prettyprint-override\"><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" \n    Service=\"WebService.WebServiceExample\" \n    CodeBehind=\"WebServiceExample.svc.cs\" %&gt;\n</code></pre>\n\n<p>the URI I try is:</p>\n\n<pre><code>http://localhost:16679/WebServiceExample.svc/check/asd\n</code></pre>\n"},{"tags":[".net","wcf","endpoint","wcf-endpoint"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":406,"score":2,"question_id":5584299,"title":"How to hard-code a default WCF endpoint for a service?","body":"<p>In a self-hosted service, I'd like to use the endpoint(s) specified in App.config, if present, or a default endpoint specified in code if App.config is empty. How can I do this?</p>\n\n<p><strong>Edit</strong>: to clarify, this is on the server (service) side using ServiceHost.</p>\n"},{"tags":["c#","wcf","rest","https"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12874688,"title":"WCF RESTful Post with Stream return","body":"<p>I have WCF Web service using https. It has next interface:</p>\n\n<pre><code>[ServiceContract]\nclass Service\n{\n    [OperationContract]\n    [WebInvoke(UriTemplate=\"Method\", BodyStyle=WebMessageBodyStyle.Bare)]\n    byte[] Method(Stream request)\n    {\n        // ... Some logic ...\n        return someBytes;\n    }\n}\n</code></pre>\n\n<p>This works good but has one little issue. After method completition it closes up https connection. I have another method in service with WebGet. It returns Stream object, and this one doesn't close https connection.\nI've tried to use same approach in my first Method and rewrited it as follows:</p>\n\n<pre><code>[ServiceContract]\nclass Service\n{\n    [OperationContract]\n    [WebInvoke(UriTemplate=\"Method\", BodyStyle=WebMessageBodyStyle.Bare)]\n    Stream Method(Stream request)\n    {\n        // ... Some logic ...\n        return new MemoryStream(someBytes);\n    }\n}\n</code></pre>\n\n<p>But when I'm trying to consume Method with a client the service responds: \"Method not allowed. Allowed: GET, HEAD\".\nPlease tell me if I'm doiing it wrong by returning Stream object, or I have missed something.</p>\n\n<p>UPD:\nI also appreciate in any hints about tracing down this problem.</p>\n"},{"tags":["arrays","json","wcf","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":182,"score":1,"question_id":12825062,"title":"Single element array in WCF RESTful JSON web service client","body":"<p>I'm trying to consume a RESTful JSON web service using WCF on the client side.  The service is 3rd party, so I cannot make any changes to the server response.</p>\n\n<p>The server is sending back a response that looks something like this when there's only one data point...</p>\n\n<p><strong>Single Data Point</strong></p>\n\n<pre><code>{\n  \"Data\":\n  {\n    \"MyPropertyA\":\"Value1\",\n    \"MyPropertyB\":\"Value2\"\n  },\n}\n</code></pre>\n\n<p>and something like this when there's more than one data point...</p>\n\n<p><strong>Multiple Data Points</strong></p>\n\n<pre><code>{\n  \"Data\":\n  [\n    {\n      \"MyPropertyA\":\"Value1\",\n      \"MyPropertyB\":\"Value2\"\n    },\n    {\n      \"MyPropertyA\":\"Value3\",\n      \"MyPropertyB\":\"Value4\"\n    },\n    {\n      \"MyPropertyA\":\"Value5\",\n      \"MyPropertyB\":\"Value6\"\n    }\n  ],\n}\n</code></pre>\n\n<p>I have my service contract set up like this...</p>\n\n<pre><code>[ServiceContract]\npublic interface IRewardStreamService\n{\n    [OperationContract]\n    [WebInvoke]\n    MyResponse GetMyStuff();\n}\n</code></pre>\n\n<p>and a data point's data contract like this...</p>\n\n<pre><code>[DataContract]\npublic class MyData\n{\n  [DataMember]\n  public string MyPropertyA { get; set; }\n\n  [DataMember]\n  public string MyPropertyB { get; set; }\n}\n</code></pre>\n\n<p>and the only way I can get the single data point response to work is if I have a single instance property like this, but this does not parse the multiple data point response...</p>\n\n<p><strong>Response for Single Instance</strong></p>\n\n<pre><code>[DataContract]\npublic class MyResponse\n{\n  [DataMember]\n  public MyData Data { get; set; }\n}\n</code></pre>\n\n<p>and the only way I can get the multiple data point response to work is if I have an array / list instance property like this, but this does not parse the single data point response...</p>\n\n<p><strong>Response for Multiple Instance</strong></p>\n\n<pre><code>[DataContract]\npublic class MyResponse\n{\n  [DataMember]\n  public IList&lt;MyData&gt; Data { get; set; }\n}\n</code></pre>\n\n<p>I understand the issue is that the response is omitting the brackets when there's only one data point returned, but it seems that WCF doesn't play well with deserializing that syntax.  Is there some way I can tell the DataContractJsonSerializer to allow single element arrays to not include brackets and then tell my service to use that serializer?  Maybe a service behavior or something?</p>\n\n<p>Any direction would be helpful.</p>\n"},{"tags":["asp.net","asp.net-mvc-3","wcf","rest","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12872603,"title":"HttpResponse in Webapi controller in MVC","body":"<p>I am using Web api controller as follows:</p>\n\n<pre><code>[HttpPost]    \npublic HttpResponseMessage PostMethod(string filename)    \n{\n    Stream downloadStream = BL.method(fileName);    \n    HttpResponseMessage response = new HttpResponseMessage();    \n    response.content= new StreamContent(downloadStream);    \n    return response;    \n}\n</code></pre>\n\n<p>When I try to call the above method using fiddler I am getting an exception saying </p>\n\n<blockquote>\n  <p>'downloadStream.ReadTimeout' threw an exception of type\n  'System.InvalidOperationException'.</p>\n</blockquote>\n\n<p>Can the stream be set in response and sent? Is there any modification for the above code?</p>\n"},{"tags":["c#","wcf","silverlight","serialization","binary-serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12866893,"title":"Silverlight Binary Serialization over the wire","body":"<p>While nearly completing a new release, we've ignored the large size of the XML data that our WCF service returns to our silverlight client. Now we're investigating how to shrink the data, so that the results aren't in the 10-100mb range.</p>\n\n<p>Its seems clear that binary serialization is the solution, and it seems easy enough to serialize the data into binary with, for instance, SharpSerializer, but through all of the SO posts about binary serialization and other tutorials I've come across, no one addresses how to send the serialized data across the wire to the Client. I expect I'm missing some obvious but critical piece to the WCF service puzzle.</p>\n\n<p>Hopefully someone can lend me some help. Let me know if I should include more information.</p>\n"},{"tags":["wcf","entity-framework","iis","entity-framework-4","autofac"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":149,"score":3,"question_id":12865268,"title":"Entity Framework consuming a lot of memory (possible memory leak?)","body":"<p>We are using EF4.3.1 in a WCF service ( our business \\ application layer). We are using EF Code First with existing database and Fluent Mapping (EntityTypeConfiguraiton). \nAn instance of DbContext is created for each request and then disposed off. </p>\n\n<p>We have a generic repository which uses the DbContext. </p>\n\n<p>When running on test servers we found that the Business layer app pool is going out of memory in 30 mins or so with 10 concurrent users. We took dump of the IIS worker process and found that EF is consuming a lot of memory, there were many object in on large object heap created by EF. We could see objects for data retrieved from th DB on the heap. Not sure if the DbContext dispose is taking care of this. The % time in GC was very high (> 16%).\nOne strange thing we noticed in the dump file was, there was a huge string object  (around 87MB) storing string representation of all my mapping files. I found this to be very strange,</p>\n\n<p>Has anybody encountered any such memory leak issue with EF? Also please also let us know if there is something wrong in our usage of EF. Please let me know if more details are required.</p>\n\n<p>Thanks\nPrasad</p>\n\n<p><strong>EDIT</strong>\nWe inject an instance of DbContext using AutiFac DI (WCF integration). The life time for Dbcontext is InstancePerLifeTime ( one request per http request). We have implemented this way to share the instance of DbContext in all repositories instances in one HTTPrequest.</p>\n\n<p>The way we access database is \n// declaration\nIGenericRepository UserRepository {get;set;} // Property injection using AutoFac</p>\n\n<p>// Usage\nvar user = UserRepository.FindBy(u => u.userid == \"test@test.com\");</p>\n\n<p>We are not using explicit transactions in repositories. </p>\n"},{"tags":[".net","wcf"],"answer_count":1,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2933,"score":5,"question_id":4220208,"title":"WCF Trace error: Configuration evaluation context not found","body":"<p>I've set up a self-hosted service scenario where I'm programmatically setting up several service hosts. For each one of these hosts that I open, I see the following error in the trace log:</p>\n\n<pre><code>&lt;TraceRecord xmlns=\"http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord\" Severity=\"Warning\"&gt;\n    &lt;TraceIdentifier&gt;http://msdn.microsoft.com/en-US/library/System.ServiceModel.EvaluationContextNotFound.aspx&lt;/TraceIdentifier&gt;\n    &lt;Description&gt;Configuration evaluation context not found.&lt;/Description&gt;\n    &lt;AppDomain&gt;myprogram.exe&lt;/AppDomain&gt;\n&lt;/TraceRecord&gt;\n</code></pre>\n\n<p>I've read that this is caused by using extensions that are not declared in the configuration file, and I am indeed using a custom behavior extension, but adding it to the .exe's configuration file did not have any effect:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;extensions&gt;\n        &lt;behaviorExtensions&gt;\n            &lt;add name=\"myext\" type=\"mytype, myassembly\" /&gt;\n        &lt;/behaviorExtensions&gt;\n    &lt;/extensions&gt;\n    ....\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Note that I'm not using this extension anywhere else in the configuration file, I'm adding it to the service host programmatically. I even set up a dummy behavior that used the extension just to see if it would resolve the issue, but it did not.</p>\n\n<p>Why am I seeing this error in my log?</p>\n"},{"tags":["wcf","service"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":12871306,"title":"WCF service not running after adding endpoints","body":"<p>I am trying to consume a WCF application service from an xna game project. </p>\n\n<p>Here's my problem.</p>\n\n<p>With default <code>web.config</code> I can run service in WcfTestClient. When I add this service's reference to my xna game then two things happen.</p>\n\n<ol>\n<li><code>ServiceReferences.ClientConfig</code> file is empty</li>\n<li>Even though service is added it shows assembly reference not found when used in a USING Statement.</li>\n</ol>\n\n<p>If I add the same service's reference to a fresh project then everything works fine.</p>\n\n<p>Now I read up on google about the client config being empty. So I changed the binding of my web.config from default (no services tag) by adding two endpoints \n<code>basicHttpBinding</code> and <code>mex</code> endpoints in <code>&lt;service&gt;</code> tags.</p>\n\n<p>But the problem is if I add any endpoints to the <code>web.config</code> then it throws the following error</p>\n\n<blockquote>\n  <p><em>Error: Cannot obtain Metadata from  If this is a Windows (R)\n  Communication Foundation service to which you have access, please\n  check that you have enabled metadata publishing at the specified\n  address.  For help enabling metadata publishing, please refer to the\n  MSDN documentation at WS-Metadata Exchange Error<br>\n  Metadata contains a reference that cannot be resolved: .<br>\n  Content Type application/soap+xml; charset=utf-8 was not supported by service<br>\n  The client and service bindings may be mismatched.<br>\n  The remote server returned an error: (415) Unsupported Media Type.<br>\n  HTTP GET Error<br>\n  The HTML document does not contain Web service discovery information.</em></p>\n</blockquote>\n\n<p>And if I don't add endpoints then client config file is empty since it requires a <code>basicHttpBinding</code> in <code>web.config</code> file.</p>\n\n<p>Thus I am trying to state that I have majorly two problems overall.</p>\n\n<ol>\n<li>I cannot add services tag / endpoints to my wcf service app. If I do then it doesn't run.</li>\n<li>If I use service with default config (w/o any modifications) then it works in every other project except my existing xna game project.</li>\n</ol>\n\n<p>Can the problem be of any unused references not being removed? Or is it something else?</p>\n\n<p>BTW.. service runs fine and I can browse directory listing in web browser.</p>\n\n<p>Thanks.</p>\n"},{"tags":["json","wcf","rest","webhttpbinding","instancecontextmode"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12852371,"title":"InstanceContextMode.Single in WCF wsHttpBinding,webHttpBinding and REST","body":"<p>I have recently started development on a relatively simple WCF REST service which returns JSON formatted results. At first everything worked great, and the service was quickly up and running. </p>\n\n<p>The main function of the service is to return a large chunk of data extracted from a database. This data rarely changes, so I decided to try and setup a caching mechanism to speed things up. To do this I planned to set InstanceContextMode.Single and ConcurrencyMode.Multiple, and then with some thread locks, safely return a static cached result. Every 5 minutes or so, or whenever IIS decides to clear everything, the data would be re-fetched from the database.</p>\n\n<p><strong>My issue is InstanceContextMode.Single does not behave as expected. My understanding is a single instance of my WCF service class should be created and maintained. However the behaviour I have is a completely new instance of my Class is created per call. This include re-initialising all static variables.</strong></p>\n\n<p>I tried changing the web service from  webHttpBinding (used for REST) to wsHttpBinding and using the service as a SOAP config, but this results in exactly the same behaviour.</p>\n\n<p>What am I doing wrong!!! Have spent way too long trying to figure this out.</p>\n\n<p>Any help would be great!.</p>\n"},{"tags":[".net","wcf","serialization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12867766,"title":"WCF custom object serialization","body":"<p>I have the following scenario.</p>\n\n<p>My environment is Visual Studio 2010, Framework 4.0.</p>\n\n<p>There is a dll I don't control with certain (fairly complex) object in it. I need to call that object in my wcf service then pass it to the client application, so client application would continue working with it.</p>\n\n<p>I create data contract in the wcf, something like this:</p>\n\n<pre><code>  [DataContract]\n    public class Test\n    {       \n        [DataMember]\n        public dllCustomObjectType MyTest;\n    }\n</code></pre>\n\n<p>Then I create an interface for this data contract:</p>\n\n<pre><code> interface ITest\n    {    \n        [OperationContract]\n        dllCustomObjectType GetMyTest(int Id);\n    }\n</code></pre>\n\n<p>Then I implement the interface and use the implemented method in the client application.</p>\n\n<p>Client application has references to the same dll I don't control.</p>\n\n<p>When I try to run it (in fact, even when I update service reference) I am getting the error that request failed and metadata contains a reference that cannot be resolved.</p>\n\n<p>I can replicate that object in my data contracts (and it is a lot of work) but I am wondering if there is a way to pass the value of that object type to the client application without recreating the object.</p>\n\n<p>I would appreciate any assistance.</p>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12870225,"title":"why more than one function not call to WCF?","body":"<p>I am passing the Value to Array Element in WCF service. Here I am Using jQuery.</p>\n\n<p>My functions are:</p>\n\n<p>In Service.cs:</p>\n\n<pre><code>public class User\n{\n\n    Dictionary&lt;int, string&gt; users = null;\n    public User()\n    {\n        users = new Dictionary&lt;int, string&gt;();\n        users.Add(1, \"apple\");\n        users.Add(2, \"orange\");\n        users.Add(3, \"lemon\");\n        users.Add(4, \"grape\");\n    }\n\n    public string[] GetUser(int Id)\n    {\n        var user = from u in users\n                   where u.Key == Id\n                   select u.Value;\n\n        return user.ToArray&lt;string&gt;();\n    }\n</code></pre>\n\n<p>In jQuery:</p>\n\n<pre><code>function CallService() {\n             $.ajax({\n                 type: Type, \n                 url: Url, \n                 data: Data, \n                 contentType: ContentType,\n                 dataType: DataType, \n                 processdata: ProcessData, \n                 success: function(msg) {\n                     ServiceSucceeded(msg);\n                 },\n                 error: ServiceFailed\n             });\n         }\n</code></pre>\n\n<p>My first function I declare like this:</p>\n\n<pre><code> function WCFJSON() {\n\n             var uesrid = \"2\";\n             Type = \"POST\";\n             Url = \"Service.svc/GetUser\";\n             Data = '{\"Id\": \"' + uesrid + '\"}';\n             ContentType = \"application/json; charset=utf-8\";\n             DataType = \"json\"; ProcessData = true; \n\n             CallService();\n\n         }\n</code></pre>\n\n<p>This function I called like below:</p>\n\n<pre><code> $(document).ready(\n         function() {\n         WCFJSON();\n         }\n         );\n</code></pre>\n\n<p>My second function is:   </p>\n\n<pre><code>function temp()\n         {\n         //var id=parseInt($('#txtinput').val();\n         var id=\"5\";\n         Type=\"POST\";\n         Url=\"Srvice.svc/GetUser\";\n         Data='{\"Id\":\"'+id+'\"}';\n         ContentType=\"application/json;charset=utf-8\";\n         DataType=\"json\";ProcessData=true;\n        CallService();\n\n         }\n</code></pre>\n\n<p>I called this function by button onclient click, like below:  </p>\n\n<pre><code>&lt;asp:Button ID=\"btnsumbit\" runat=\"server\" Text=\"submit\" OnClientClick =\"temp();\"  /&gt;\n</code></pre>\n\n<p>My problem is when I ran this program, I got only got a result from first function (\"WCFJSON();\"), other function of \"temp();\" I didn't get any result. I don't know what I am missing? Can anyone resolve this?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12851960,"title":"WCF service is not getting called","body":"<p>I have a web solution and I have a WCF service project inside it. We need to support \"cookieless\". so in the web.config, it's set as</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;sessionState \n    mode=\"SQLServer\"\n    sqlConnectionString=\"Data Source=ds;Initial Catalog=db;User Id=uid;Password=pwd\" \n    allowCustomSqlDatabase=\"true\" \n    cookieless=\"true\" \n    timeout=\"720\" \n    regenerateExpiredSessionId=\"false\"/&gt;\n</code></pre>\n\n<p>The WCF service will be supporting sessions, so we have also set \"aspNetCompatibilityEnabled\" to true in web.config.</p>\n\n<pre><code>&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" \n                           multipleSiteBindingsEnabled=\"true\"/&gt;\n</code></pre>\n\n<p>The service and interfaces are as follows,</p>\n\n<pre><code>[ServiceContract(SessionMode=SessionMode.Allowed)]\npublic interface ICDOCService\n{ }\n\n[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]\npublic class CDOCService : ICDOCService\n{ }\n</code></pre>\n\n<p>The problem we are facing is we cannot access the service from any client application. (web app, WCF test client)</p>\n\n<p>The following error is showing, when we access it via WCF Test client,</p>\n\n<blockquote>\n  <p>Failed to invoke the service. Possible causes: The service is offline or inaccessible; the client-side configuration does not match the proxy; the existing proxy is invalid. Refer to the stack trace for more detail. You can try to recover by starting a new proxy, restoring to default configuration, or refreshing the service.</p>\n  \n  <p>The content type <code>text/html</code>; <code>charset=UTF-8</code> of the response message does not match the content type of the binding (multipart/related; type=\"application/xop+xml\"). If using a custom encoder, be sure that the <code>IsContentTypeSupported</code> method is implemented properly. The first 1024 bytes of the response were:</p>\n</blockquote>\n\n<pre><code>&lt;HTML&gt;\n\n &lt;HEAD&gt;\n\n &lt;link rel=\"alternate\" type=\"text/xml\" href=\"http://localhost:53721/Services/CDOCService.svc?disco\"/&gt;\n\n  &lt;STYLE type=\"text/css\"&gt;#content{ FONT-SIZE: 0.7em; PADDING-BOTTOM: 2em; \n\n  MARGIN-LEFT: 30px}BODY{MARGIN-TOP: 0px; MARGIN-LEFT: 0px; COLOR: #000000; \n\n  FONT-FAMILY: Verdana; BACKGROUND-COLOR: white}P{MARGIN-TOP: 0px; MARGIN-BOTTOM: \n\n  12px; \n\n  COLOR: #000000; FONT-FAMILY: Verdana}PRE{BORDER-RIGHT: #f0f0e0 1px solid; \n\n  PADDING-RIGHT: 5px; BORDER-TOP: #f0f0e0 1px solid; MARGIN-TOP: -5px; \n\n  PADDING-LEFT: 5px; FONT-SIZE: 1.2em; PADDING-BOTTOM: 5px; BORDER-LEFT: #f0f0e0 \n\n   1px solid; PADDING-TOP: 5px; BORDER-BOTTOM: #f0f0e0 1px solid; FONT-FAMILY: \n\n   Courier New; BACKGROUND-COLOR: #e5e5cc}.heading1{MARGIN-TOP: 0px; PADDING-LEFT: \n\n   15px; FONT-WEIGHT: normal; FONT-SIZE: 26px; MARGIN-BOTTOM: 0px; PADDING-BOTTOM: \n\n   3px; MARGIN-LEFT: -30px; WIDTH: 100%; COLOR: #ffffff; PADDING-TOP: 10px; \n\n   FONT-FAMILY: Tahoma; BACKGROUND-COLOR: #003366}.intro{MARGIN-LEFT: -15px}\n &lt;/STYLE&gt;\n\n&lt;TITLE&gt;CDOCService Service&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;DIV id=\"content\"&gt;&lt;P '.\n\n\n\nServer stack trace: \n   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding)\n   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)\n   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)\n   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n\nException rethrown at [0]: \n   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n   at ICDOCService.GetCDOCCount(String institutionID, String mrnID, String userID, String callingSystemID, String securityToken)\n   at CDOCServiceClient.GetCDOCCount(String institutionID, String mrnID, String userID, String callingSystemID, String securityToken)\n</code></pre>\n"},{"tags":["wcf","wsdualhttpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12863973,"title":"WCF with wsDualHttpBinding blocking calls","body":"<p>my case is that I'm using wsDualHttpBinding as a binding.</p>\n\n<p>But I've noticed something kind of unexpected. When I try to send a request to a service operation, but my code is handling a callback message (I've put a Thread.Sleep there to simulate), then the service call gets stuck (and can even get timeouted) until the callback message is handled fully. Shouldn't they be independent, or the channel can only handle one message at the time, doesn't matter if it's a service request or a callback message? I'm using the same channel all to time, either to receive the callbacks messages or to send out new requests. This application runs as a service, so there's no UI involved.</p>\n"},{"tags":["c#","wcf","visual-studio","web-services","c#-3.0"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":9816380,"title":"How to reference an offsite web service from code","body":"<p>I have a .NET code which has a web reference to a web service (eg. WebRef) which resides in a corporate intranet (CorpInt).</p>\n\n<p>The problem is I do not have access to CorpInt from my development machine. And the code has references which goes like</p>\n\n<pre><code>WebRef.Customers webref = new WebRefProxy.GetCustomersService();\n</code></pre>\n\n<p>Is there a way in which I could get in the remote intranet site, download something like a disconnected WebRef such that I can compile and reference it on my development machine? </p>\n\n<p>Or any other feasible solution?</p>\n\n<p>thank you in advance.</p>\n"},{"tags":["windows","wcf","service","azure","bus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12865272,"title":"About WCF Service Bus","body":"<p>In my graduating project proposal, in which i will need to access so intranet externally from another intranet, he asked me to use the WCF Service bus (Windows Azure) , in fact i understand nothing about the WCF and my whole experience is in WPF &amp; C# , so i would like to know</p>\n\n<p>1-What's the service bus and when it's used ?\n2-Can i establish an ordinary connection just to access the resources of another part of company ?\n3- Is there any underlying required networking knowledge to understand the service bus ?\n4- what benefits and advantages of the service bus ? why people are using it ? \n5-Should i understand the WCF totally before i use it ? or i can directly jump and learn it ?</p>\n\n<p>And please , any additional information about this stuff will be very useful for me , thanks alot :)</p>\n"},{"tags":["wcf","multi-tenant"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":11990676,"title":"multi-tenant WCF howto","body":"<p>im using the multitenant design from:\n <a href=\"http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/\" rel=\"nofollow\">http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/</a>\nand it works great :)</p>\n\n<p>now i want to write a WCF Service to use this multitenant approach.\nthe thing is i would like to avoid writing code like </p>\n\n<pre><code>[operationcontract]\npublic List&lt;Data&gt; getDateById(string tenantShema, int id)\n{}\n\n (EX: get data from Table.User1)\n</code></pre>\n\n<p>i would like the tenantScheme string to be background just like WCF authentication i guess.\nwitch i believe(not sure) gets sended in the header info of the xml and processed in the background.</p>\n\n<p>is it possible and how ?</p>\n\n<p>thx </p>\n"},{"tags":[".net","wcf","tracelistener","tracesource"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12867550,"title":"TraceListener to trace WCF events, but not self generated events","body":"<p>Our shop has a TraceListener that send events to a repository via a webservice call.  We use it for our own TraceSources, but want to be able to use it for other TraceSources, like System.ServiceModel and System.Activities.</p>\n\n<pre><code>    &lt;source name=\"System.ServiceModel\" switchValue=\"Warning, ActivityTracing\"      propagateActivity=\"true\"&gt;\n    &lt;listeners&gt;\n    &lt;add name=\"TheSharedListenerInQuestion\" /&gt;\n    &lt;/listeners&gt;\n    &lt;/source&gt;\n</code></pre>\n\n<p>The problem is we use a WCF client call to do the Write within the TraceListener and if the System.ServiceModel tracesource is attached to my listener I end up in a loop, eg trace an event which fires the internal client call, which in turn makes the WCF tracesource fire a TraceEvent and the loop ensues.</p>\n\n<p>How do I make my internal WCF call not cause the WCF tracesources to fire?</p>\n"},{"tags":["c#",".net","wcf","tcp","windows-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":427,"score":0,"question_id":8521762,"title":"WCF Service Hosted in Windows Service won't run properly","body":"<p>I actually have two different problems depending on the way that I try to run the service that look related but show themselves in different ways. Note that the code that I am running is an EXACT duplicate of the code used in <a href=\"http://msdn.microsoft.com/en-us/library/ff649818.aspx\" rel=\"nofollow\">Microsofts guide</a> with the exception of different namespaces and slightly different class names.</p>\n\n<p>When I tried to run the service using this method the windows service started successfully but when it did the WCF Service Host box would pop up and it gave an error message that said there is already a listener on IP endpoint localhost:. Here is my config file when I ran this way:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" /&gt;\n  &lt;/system.web&gt;\n  &lt;!-- When deploying the service library project, the content of the config file must be added to the host's \n  app.config file. System.Configuration does not support config files for libraries. --&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"CfmaWcfEphemerisLibrary.ServiceBehavior\"\n               name=\"CfmaWcfEphemerisLibrary.Service1\"&gt;\n        &lt;endpoint address=\"\" binding=\"netTcpBinding\" bindingConfiguration=\"\"\n          contract=\"CfmaWcfEphemerisLibrary.IService1\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexTcpBinding\" bindingConfiguration=\"\"\n          contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"net.tcp://localhost:8529/Service1\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"CfmaWcfEphemerisLibrary.ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>After fighting for a while I found a suggestion that said enabling port sharing on the tcp connection might help. I tried that but when I try to start the service it fails and in the Windows Events Logs under \"Application\" i get an error that says:</p>\n\n<blockquote>\n  <p>Service cannot be started. System.ServiceModel.AddressAlreadyInUseException: There is already a listener on IP endpoint 0.0.0.0:8529.  Make sure that you are not trying to use this endpoint multiple times in your application and that there are no other applications listening on this endpoint. ---> System.Net.Sockets.SocketException: Only one usage of each socket address (protocol/network address/port) is normally permitted\n     at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)\n     at System.Net.Sockets.Socket.Bind(EndPoint localEP)\n     at System.ServiceModel.Channels.SocketConnectionListener.Listen()\n     --- End of inner exception stack trace ---\n     at System.ServiceModel.Channels.SocketConnectionListener.Listen()\n     at System.ServiceModel.Channels.BufferedConnectionListener.Listen()\n     at System.ServiceModel.Channels.ExclusiveTcpTransportManager.OnOpen()\n     at System.ServiceModel.Channels.TransportManager.Open(TransportChannelListener channelListener)\n     at System.ServiceModel.Channels....</p>\n</blockquote>\n\n<p>I can't figure out why I'm getting a port in use exception on a port that has sharing enabled. Here is my App.config file when I try to run the service with port sharing enabled.</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" /&gt;\n  &lt;/system.web&gt;\n  &lt;!-- When deploying the service library project, the content of the config file must be added to the host's \n  app.config file. System.Configuration does not support config files for libraries. --&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"CfmaWcfEphemerisLibrary.ServiceBehavior\"\n               name=\"CfmaWcfEphemerisLibrary.Service1\"&gt;\n        &lt;endpoint address=\"\" binding=\"netTcpBinding\" bindingConfiguration=\"tcpBinding\"\n          contract=\"CfmaWcfEphemerisLibrary.IService1\"&gt;\n          &lt;identity&gt;\n            &lt;dns value=\"localhost\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexTcpBinding\" bindingConfiguration=\"\"\n          contract=\"IMetadataExchange\" /&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"net.tcp://localhost:8529/Service1\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"CfmaWcfEphemerisLibrary.ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;netTcpBinding&gt;\n        &lt;binding portSharingEnabled=\"true\" name=\"tcpBinding\" closeTimeout=\"00:10:00\" openTimeout=\"00:10:00\" sendTimeout=\"00:10:00\" maxBufferSize=\"2147483647\" maxBufferPoolSize=\"2147483647\" maxReceivedMessageSize=\"2147483647\"&gt;\n          &lt;readerQuotas maxDepth=\"2147483647\" maxStringContentLength=\"2147483647\" maxArrayLength=\"2147483647\" maxBytesPerRead=\"2147483647\" maxNameTableCharCount=\"2147483647\" /&gt;\n          &lt;security&gt;\n            &lt;transport&gt;\n              &lt;extendedProtectionPolicy policyEnforcement=\"Never\" /&gt;\n            &lt;/transport&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/netTcpBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","wcf","windows-phone-7.1","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":129,"score":1,"question_id":12864680,"title":"How to use async-await with WCF in VS 2010 for WP7?","body":"<p>Async CTP is very nice to use.\nI saw some examples for windows phone, all using:  <br>\n(Assembly AsyncCtpLibrary_Phone.dll, v2.0.50727, AsyncCtpExtensions).</p>\n\n<pre><code> var client = new WebClient();\n string data = await client.DownloadStringTaskAsync(new Uri(url));\n</code></pre>\n\n<p>or something like the above code.</p>\n\n<p>How can I use methods with async / await for my services? (WCF) <br>\nToday all methods work this way:</p>\n\n<pre><code>  service.MyRequestCompleted += service_myRequestCompleted;\n  service.MyRequestAsync();\n</code></pre>\n\n<p>I can not find a way to use extension methods for services. </p>\n"},{"tags":["wcf","xml-serialization","wcf-rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12866638,"title":"(BodyStyle = WebMessageBodyStyle.Bare) removes the user defined namespace for the root element of the rest xml response","body":"<p>I have a WCF rest service with two methods one with (WebMessageBodyStyle.Bare) and the other with (WebMessageBodyStyle.Wrapped). If I use 'wrapped' i am able to see the rest xml response with my namespace (http://SampleService.com) but not with the bare.</p>\n\n<p>Is there anyway i can use bare but still get my namespace.</p>\n\n<pre><code>[ServiceContract(Namespace = \"http://SampleService.com\")]\npublic interface IService1\n{\n    [OperationContract]\n    [XmlSerializerFormat]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Bare,\n        UriTemplate = \"GetCompositeDataWithBare?boolValue={boolValue}&amp;stringValue={stringValue}\")]\n    CompositeType GetCompositeDataWithBare(bool boolValue, string stringValue);\n\n    [OperationContract]\n    [XmlSerializerFormat]\n    [WebInvoke(Method = \"GET\",\n        ResponseFormat = WebMessageFormat.Xml,\n        BodyStyle = WebMessageBodyStyle.Wrapped,\n        UriTemplate = \"GetCompositeDataWithWrapped?boolValue={boolValue}&amp;stringValue={stringValue}\")]\n    CompositeType GetCompositeDataWithWrapped(bool boolValue, string stringValue);\n}\n\npublic class Service1 : IService1\n{\n    public CompositeType GetCompositeData(bool boolValue, string stringValue)\n    {\n        CompositeType composite = new CompositeType();\n        composite.BoolValue = boolValue;\n        composite.StringValue = stringValue;\n        return composite;\n    }\n\n    public CompositeType GetCompositeDataWithBare(bool boolValue, string stringValue)\n    {\n        return GetCompositeData(boolValue, stringValue);\n    }\n\n    public CompositeType GetCompositeDataWithWrapped(bool boolValue, string stringValue)\n    {\n        return GetCompositeData(boolValue, stringValue);\n    }\n}\n\n[DataContract]\npublic class CompositeType\n{\n    bool boolValue = true;\n    string stringValue = \"Hello \";\n\n    [DataMember]\n    public bool BoolValue\n    {\n        get { return boolValue; }\n        set { boolValue = value; }\n    }\n\n    [DataMember]\n    public string StringValue\n    {\n        get { return stringValue; }\n        set { stringValue = value; }\n    }\n}\n</code></pre>\n\n<p>Request (Bare):</p>\n\n<pre><code>http://localhost:56860/Service1.svc/rest/GetCompositeDataWithBare?boolValue=true&amp;stringValue=2\n</code></pre>\n\n<p>Response (Bare):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;CompositeType xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;BoolValue&gt;true&lt;/BoolValue&gt;\n    &lt;StringValue&gt;2&lt;/StringValue&gt;\n&lt;/CompositeType&gt;\n</code></pre>\n\n<p>Request (Wrapped):</p>\n\n<pre><code>http://localhost:56860/Service1.svc/rest/GetCompositeDataWithWrapped?boolValue=true&amp;stringValue=2\n</code></pre>\n\n<p>Response (Wrapped):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;GetCompositeDataWithWrappedResponse xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://SampleService.com\"&gt;\n &lt;GetCompositeDataWithWrappedResult&gt;\n    &lt;BoolValue&gt;true&lt;/BoolValue&gt;\n    &lt;StringValue&gt;2&lt;/StringValue&gt;\n &lt;/GetCompositeDataWithWrappedResult&gt;\n&lt;/GetCompositeDataWithWrappedResponse&gt;\n</code></pre>\n"},{"tags":["c#","wpf","wcf","iis7","self-hosting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":12865671,"title":"To call a Self Hosted WCF service from another Net.Tcp WCF service running on IIS 7","body":"<p>I have a NetTcp Self Hosting service running on my client machine, and there is another NetTcp service running on IIS on the server. I am trying to consume the self hosted service from the service in IIS. It is throwing an exception with a timeout error.</p>\n\n<p>I used the WCF Test Client to test the self hosted service and it works fine. Also, I wrote a sample C# application which calls the self-hosted service and that works fine too. It is only when a service on IIS attempting to call, this is failing.</p>\n\n<p>My guess it there must be some security setting on IIS which is preventing out going calls, and hence the time out. Any clue?</p>\n\n<p><strong>Code to make the call to the Self Hosting service:</strong></p>\n\n<pre><code>private object CallClient(string message)\n    {\n        var myBinding = new NetTcpBinding(SecurityMode.None);\n        var myEndpoint = new EndpointAddress(\"net.tcp://&lt;myIP&gt;:8188/MessageReceiverService/\");\n        var myChannelFactory = new ChannelFactory&lt;IMessageReceiverService&gt;(myBinding, myEndpoint);\n\n        IMessageReceiverService client = null;\n        var result = new MessageCenterResponse { Result = message };\n\n        try\n        {\n            client = myChannelFactory.CreateChannel();\n            result.Result += client.TestMethod(\"Shankar\");\n        }\n        catch (Exception ex)\n        {\n            if (client != null)\n            {\n                ((ICommunicationObject)client).Abort();\n            }\n            result.Result += \"Exception!!\" + myEndpoint.Uri + \" - \" + ex.Message;\n        }\n        finally\n        {\n            ((ICommunicationObject)client).Close();\n        }\n\n        return result;\n    }\n</code></pre>\n\n<p><strong>Message Receiver Service (on the self-hosted service):</strong></p>\n\n<pre><code>public bool TestMethod(string testMessage)\n    {\n        return testMessage.Equals(\"Shankar\");\n    }\n</code></pre>\n\n<p>The above code works fine when called from an independent application, but fails when called from IIS after the line: <code>client.TestMethod(\"Shankar\");</code></p>\n\n<p><strong>This is how I start the Self-Hosted Service:</strong></p>\n\n<pre><code>private void StartMessageCenterService()\n    {\n        var tcpUrl = new Uri(\"net.tcp://&lt;myIP&gt;:8188/MessageReceiverService/\");\n        var messageCenterHost = new ServiceHost(typeof(MessageReceiverService), tcpUrl);\n\n        messageCenterHost.Faulted += MessageCenterHost_Faulted;\n\n        messageCenterHost.Open();\n    }\n</code></pre>\n\n<p><strong>Self-Hosted WebService code in App.config:</strong></p>\n\n<pre><code>&lt;services&gt;\n  &lt;service name=\"MessageCenter.Proxy.VirtualServer.MessageReceiverService\" behaviorConfiguration=\"DebugServiceBehavior\"&gt;\n    &lt;endpoint address=\"\"\n              binding=\"netTcpBinding\"\n              bindingConfiguration=\"InsecureTcp\"\n              behaviorConfiguration=\"LargeDataEndpointBehavior\"\n              contract=\"MessageCenter.Common.Interfaces.IMessageReceiverService\"&gt;\n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\"\n              binding=\"mexTcpBinding\"\n              contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n</code></pre>\n"},{"tags":[".net","wcf","architecture","client-server"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":115,"score":3,"question_id":12862967,"title":"How to architect this client/server application in .NET?","body":"<p>We have a legacy 3rd party tool(developed in C/C++). The tool has a server component that runs a windows server which runs jobs(complex chained long database queries). It also has a client module that is installed on all users desktops and users will be able to add jobs, view running jobs and their progress, delete jobs i.e. basically manage the jobs. We want to develop such a tool in house using .NET technologies.</p>\n\n<p>Currently we are thinking how to architect such a tool and appears like we are missing some critical pieces of the puzzle. </p>\n\n<p>Client : We decided the client desktop application to be developed in WPF</p>\n\n<p>Server : Currently we are thinking to develop it as console application but not quite sure how to architect it. </p>\n\n<p>The main questions we have are</p>\n\n<p>How can a server console application expose ASMX or WCF web services(so that WPF clients get the status of the jobs) WHILE CONTINUING TO RUN THE JOBS ?</p>\n\n<p>How to push progress updates from server to the WPF clients when there is a change?</p>\n\n<p>We are trying to do research how to do this but not finding any thing relevant to the topic. Any pointers to articles/guidance will be of great help.</p>\n"},{"tags":["asp.net","wcf","web-services","soap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12861771,"title":"Where do WCF Client cookies persist?","body":"<p>I am writing a wrapper around a SOAP API. I have a service reference set up in VS2010 to point to the WSDL. When I make a call to login, the API returns a session variable in a cookie.</p>\n\n<p>I've set <strong>allowCookies=\"true\"</strong> on my binding in config. </p>\n\n<p>I've implemented two API calls in my wrapper so far: <strong>login</strong> and <strong>logout</strong>.</p>\n\n<p>I have a test harness that is a simple ASP.NET application that has a page for <strong>login</strong> and a page for <strong>logout</strong>. </p>\n\n<p>When <strong>login</strong> is submitted:</p>\n\n<pre><code>using (var ApiClient = new ApiClient())\n            {\n                ApiClient.Login(txtUsername.Text, txtPassword.Text, txtOrganization.Text, txtIPAddress.Text);\n            }\n</code></pre>\n\n<p>And now in my ApiClient.Login method:</p>\n\n<pre><code>using (var soapService = new WSDLInterfaceClient())\n            {\n                var loginCredentials = new loginRequest\n                {\n                    username = username,\n                    password = password,\n                    organization = organization\n                };\n\n                if (!string.IsNullOrWhiteSpace(ipAddress))\n                    loginCredentials.ipAddress = ipAddress;\n\n                var loginResponse = soapService.Login(loginCredentials);\n            }\n</code></pre>\n\n<p>So this all goes off without a hitch. I was thinking I would need to remove the usings and have a class level WSDLInterfaceClient that I would use within my wrapper because I figured the cookies would be wiped out each time I constructed a new client. But that is simply not the case.</p>\n\n<p>The <strong>logout</strong> method is implemented similarly. The <strong>logout</strong> API call will throw an exception if you try to <strong>logout</strong> without being logged in. Oddly enough, when I go to my <strong>logout</strong> page and submit (which in turn is constructing a new wrapper client and therefore a new service client) it recognizes that I am logged in. If I try to <strong>logout</strong> again it throws the exception as expected.</p>\n\n<p>The cookies seem to be working in that even when constructing both a new interface client and a new wrapper client on each page, the cookies persist.</p>\n\n<p>While this isn't a bad thing, I am perplexed as to how it is working. Is there somewhere that ASP.NET/WCF is saving these cookies for the session? How would this work in a console app?</p>\n"},{"tags":["wcf","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12864931,"title":"Calling a Service in Periodical Intervals","body":"<p>I Want a service call to happen whenever another service was started. </p>\n\n<p>Here is the Scenario.  I have a WCF service called abc.svc hosted on IIS. I want a method called \"MyMethod\" from xyz.svc to get called when abc service is hosted &amp; from then On I want \"MyMethod\" to trigger at periodic intervals.</p>\n\n<p>Tried calling the \"MyMethod\" in the Appplcation_start event of abc. But I am getting Endpoint not found exceptiopn when trying to create a serviceclient for the service xyz.svc. Can some one suggest the best solution to this use case.</p>\n"},{"tags":["c#","wcf","stream","wcf-endpoint"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12467880,"title":"WCF Service service call to stream endpoint fails on 3rd call","body":"<p>quick overview of what I've got here:</p>\n\n<p>WCF Soap service is running over HTTPS, with Message credential of type certificate.  I've got 2 endpoints that I use (besides mex), 1 for my normal service calls, the other for streaming files.  Here's my web.config for the service (edited some names of items):</p>\n\n<pre><code>&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"wsHttpEndpointBinding\"&gt;\n      &lt;security mode=\"TransportWithMessageCredential\"&gt;\n        &lt;message clientCredentialType=\"Certificate\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n  &lt;basicHttpBinding&gt;\n      &lt;binding name=\"streamBinding\" transferMode=\"Streamed\" messageEncoding=\"Mtom\" maxReceivedMessageSize=\"2147483646\"&gt;\n          &lt;security mode=\"TransportWithMessageCredential\"&gt;\n              &lt;message clientCredentialType=\"Certificate\" /&gt;\n          &lt;/security&gt;\n      &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;        \n&lt;/bindings&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"Services.Behavior\" name=\"MyInterface\"&gt;\n    &lt;endpoint address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"wsHttpEndpointBinding\" name=\"wsHttpEndpoint\" contract=\"IMyInterface\" /&gt;\n    &lt;endpoint address=\"stream\" binding=\"basicHttpBinding\" bindingConfiguration=\"streamBinding\" name=\"streamEndpoint\" contract=\"IMyInterface\" /&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"Service.Behavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"false\" httpsGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483646\" /&gt;\n      &lt;serviceCredentials&gt;\n        &lt;serviceCertificate findValue=\"CN=Server.Temp.Dev\" /&gt;\n      &lt;/serviceCredentials&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p>The service has a method, DownloadDocument, that I'm testing.  Here's the signature:</p>\n\n<p>DocumentDownloadResponse DownloadDocument(DocumentDownloadRequest request);</p>\n\n<p>It's worth noting the the service throws Exceptions when the data passed in is not valid, and DownloadDocument catches those exceptions and passes back the error message in the response object.</p>\n\n<p>The DocumentDownloadRequest looks like this:</p>\n\n<pre><code>[MessageContract]\npublic class DocumentDownloadRequest\n{\n    [MessageHeader]\n    public string SecurityToken { get; set; }\n\n    [MessageHeader]\n    public string LoginName { get; set; }\n\n    [MessageHeader]\n    public string DocumentId { get; set; }\n}\n</code></pre>\n\n<p>And DownloadDocumentResponse:</p>\n\n<pre><code>[MessageContract]\npublic class DocumentDownloadResponse : ServiceResponse&lt;Stream&gt;\n{\n    public DocumentDownloadResponse()\n    {\n        Data = Stream.Null;\n    }\n\n    [MessageHeader(MustUnderstand = true)]\n    public bool Success { get; set; }\n\n    [MessageHeader(MustUnderstand = true)]\n    public string ErrorMessage { get; set; }\n\n    [MessageBodyMember(Order = 1)]\n    public Stream Data { get; set; }\n}\n</code></pre>\n\n<p>Here's how I call it from the client:</p>\n\n<pre><code>        var soapServiceClient = new SoapServiceClient(\"streamEndpoint\");\n        bool success;\n        Stream stream;\n        string errorMessage =\n            soapServiceClient.DownloadDocument(documentId, loginName, securityToken, out success, out stream);\n\n        serviceClient.Close();\n</code></pre>\n\n<p>Where SecurityToken and LoginName are items that need to validates.  What's strange is that from my test client, when I call DownloadDocument with valid data, I am able to download the file perfectly as many times as I want.  However, if I pass in an invalid LoginName or SecurityToken, I get error messages indicating incorrect data (as expected).  If I pass in invalid data 3 times, however, the client times out.  Running the service locally I don't get this issue, everythign runs as expected.  Strangely enough, whenI run with fiddler open, I don't get this issue.  When I run with the service on my dev server, I have the problems.</p>\n\n<p>The configuration on the dev server matches what I run locally.  Using the SvcTraceTool I don't see any errors, except that it only documents the first 2 successful calls, and not the one that failed.  It almost makes me think the endpoint just closed itself somehow.</p>\n\n<p>Cliffs:</p>\n\n<p>1) Service with 2 endpoints, one of if which is streaming (the one I'm concerned with).\n2) Able to use streaming endpoint to call method to Download files with valid data\n3) Service correctly catches bad data 2 times, hangs the 3rd time.  No logs in SvcTraceTool, client times out.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["wpf","wcf","performance","startup","datacontractserializer"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":931,"score":8,"question_id":12835949,"title":"Using WCF from WPF very slow on first use","body":"<p>I have been struggling for a few days with an issue with our WPF applications and I wonder if someone has come across this before and can help?\nThe problem seems to boil down to the client generating \"on-the-fly\" a serializer to handle the types in that web method call. When that method is called for the first time (the web service itself has been running already), it may take e.g. 8 seconds, subsequent calls may take e.g. 20ms. The CPU on the client WPF process is v. high during this delay.</p>\n\n<p>When using the XmlSerializer, there is a way of pre-generating these serializer assemblies, using svcutil. When (as we are) using the normal WCF DataContractSerializer, this option does not seem to be present.</p>\n\n<p>What I would like is to be able to pre-generate this assembly for all types in all my data contracts (a lot) or, alternatively, to replace this process with a custom one that I can code and passes the data in binary (we own both ends of this webservice/client and they are both .NET 4). I have already used BinaryForamtter and GZip compression and while this speeds up the transfer of data, it always gets restored to XML to be de-serialized by the framework, hence this problem remains.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["wcf","wcf-ria-services","ria"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12558666,"title":"null exception returned from wcf method","body":"<p>I am using a silverlight application with RIA domain services. \nIn that domain service I exposed a SOAP endpoint so that I can invoke domain service methods over SOAP. I did something like below in the web.config file.</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;domainServices&gt;\n    &lt;endpoints&gt;\n      &lt;add name=\"soap\" type=\"Microsoft.ServiceModel.DomainService.Hosting.SoapEndpointFactory, Microsoft.ServiceModel.DomainService.Hosting\" /&gt;\n    &lt;/endpoints&gt;\n  &lt;/domainServices&gt;\n&lt;system.serviceModel&gt;\n</code></pre>\n\n<p>Everything works well. When I launch my services from visual studio on my local ASP.net server I can get proper exceptions returned to my client.But when I host this domain service in IIS using the same web.config file I am getting back null exceptions.\nAny idea ?</p>\n"},{"tags":["c#","wcf","wsdl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12860019,"title":"How does visual studio know to build parameters to web service as byte array?","body":"<p>I have a wsdl for a WCF web service. When I add a reference to the <a href=\"http://url.svc\" rel=\"nofollow\">http://url.svc</a> for the service visual studio builds the reference and I can reference it in code. One of the webservices exposes byte[] as one of the parameters. And when I build the client it knows this. However when I look through the .wsdl for the service I cannot see any references to to the byte array. Im really wondering how .net knows to use this as the parameter..? I wasnt aware a byte array was something you could send over the wire as a standard?</p>\n"},{"tags":["c#",".net","wcf",".net-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12861506,"title":"Security mode= Transport throwing exception.","body":"<p>netTcpBinding in my service app.config has security mode set to Noneand that is working fine. When I change it to the default mode of nettcpbinding i.e.Mode=Transport and clientCredentialType=\"Windows\", I get following exception in GUI project while connecting to the this service</p>\n\n<p>The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '00:00:59.6982306'.</p>\n\n<p>I viewed service trace in trace viewer and that showed the following error message: The message with To 'net.tcp://localhost:9200/MyService/mex/mex' cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher. Check that the sender and receiver's EndpointAddresses agree.\nif I create a new service with a nettcpendpoint having default transport security, that works fine.</p>\n\n<p>If anybody has any idea about this, please let me know.</p>\n"},{"tags":["c#","wpf","wcf","wcf-ria-services"],"answer_count":2,"favorite_count":2,"up_vote_count":20,"down_vote_count":0,"view_count":10900,"score":20,"question_id":2551258,"title":"How to use WCF RIA SERVICES with WPF application?","body":"<p>I want to use WCF RIA SERVICES in my WPF application.</p>\n\n<p>but WCF RIA SERVICES client only surport silverlight and ASP.NET now, how can I use it in WPF application?</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12861078,"title":"CreateServiceHost method is protected while MSDN says it's public","body":"<p>Reading an <a href=\"http://msdn.microsoft.com/en-us/library/aa702697%28v=vs.100%29.aspx\" rel=\"nofollow\">MSDN tutorial on Extending Hosting Using ServiceHostFactory</a>, there is an example of overriding a <code>CreateServiceHost</code> function:</p>\n\n<pre><code>public class DerivedFactory : ServiceHostFactory\n{\n   public override ServiceHost CreateServiceHost( Type t, Uri[] baseAddresses )\n   {\n      return new DerivedHost( t, baseAddresses )\n   }\n}\n</code></pre>\n\n<p>However, when we look at the actual definition of the class, the <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.servicehostfactory%28v=vs.100%29.aspx\" rel=\"nofollow\"><code>CreateServiceHost</code> method</a> is <code>protected</code>:</p>\n\n<pre><code>protected virtual ServiceHost CreateServiceHost(\n    Type serviceType,\n    Uri[] baseAddresses\n)\n</code></pre>\n\n<p>My question is, what should I override? Is MSDN example wrong?</p>\n"},{"tags":["c#","jquery","asp.net-mvc","wcf","error-handling"],"answer_count":5,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":101,"score":5,"question_id":12861782,"title":"Sending data to a website from a WCF service","body":"<p>I have the following setup</p>\n\n<ul>\n<li>A jQuery website (not exactly single page, but not far from it), that uses a </li>\n<li>A ASP.NET MVC website as a backend, which connects (via net.tcp or net.pipe) to</li>\n<li>A self-hosted WCF service that manages and connects to</li>\n<li>A plethora of high-latency external services.</li>\n</ul>\n\n<p>So when a client pushes a button, a request is sent to the MVC, which routes it to the WCF, which aggregates it from the external services, and everything is fine and dandy.  </p>\n\n<p>The issue I can't seem to wrap my head around is communication in the other way, i.e. when one of the external services goes offline, what is the easiest and most elegant way to inform the client (the browser)?</p>\n\n<p>This means that the service should somehow inform the mvc site that should somehow inform the client that an external service is offline.</p>\n\n<p>Additionally: The external service will have high availability, so the \"goes offline\" scenario will be seldom used, and accordingly I'm looking for a solution that does not do extensive polling of the server.</p>\n"},{"tags":["wcf","logging","soap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12842014,"title":"Logging SOAP Raw Response Received by a ClientBase object","body":"<p>I have an application that uses a ClientBase object generated by a service reference to call a third party WCF SOAP service. Every once in awhile, the service call returns a fault exception instead with an exception message of \"An error occurred while processing the request\" which is  completely generic.</p>\n\n<p>Even during service errors, there is supposed to be a trace ID value that comes back with the response so the developers of that service can debug/troubleshoot any issues. So, what I ideally want is to log the raw response that comes back to my ClientBase object when there is an exception. I don't want to log every single message if possible, that would be overkill IMO.</p>\n\n<p>Is there a way to capture that using the ClientBase? Maybe there's some context object that contains the raw response content? This needs to be built into my application if possible. I know there are tools out there that act as a proxy between the client and service that can log http requests/responses but that is not what I'm after.</p>\n"},{"tags":["android","vb.net","wcf","soap","ksoap2"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":168,"score":1,"question_id":12846149,"title":"passing objects to wcf soap service from android using ksoap2; it sends and receives 0","body":"<p>I am trying to use ksoap2 to access methods in a wcf soap service from android.\nI was able to successfully pass simple type parameters to the method, it worked fine.\nBut when I try to pass objects, the wcf method is receiving 0 for all the object values.</p>\n\n<p>I have used the same SOAP service with a WP7 app and it runs fine.</p>\n\n<p>I have 2 methods in my service, ksoapadd and addParam. addParam takes in two integer and returns their sum(this works). ksoapadd takes in an object of class testadd which has two integer elements and ksoapadd returns their sum(this gets and sends 0).</p>\n\n<p>I think it has something to do with the namespace but I can't figure out how to resolve it. I have been doing trial and error to get the soap request right, but no luck yet.</p>\n\n<p>Can anyone help me figure out what to do? I have tried many options which somehow helped other people with similar problem but with no avail. </p>\n\n<p>here is my wsdl:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n-&lt;wsdl:definitions xmlns:wsx=\"http://schemas.xmlsoap.org/ws/2004/09/mex\"\nxmlns:wsa10=\"http://www.w3.org/2005/08/addressing\" \nxmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" \nxmlns:wsaw=\"http://www.w3.org/2006/05/addressing/wsdl\" \nxmlns:msc=\"http://schemas.microsoft.com/ws/2005/12/wsdl/contract\" \nxmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \nxmlns:wsap=\"http://schemas.xmlsoap.org/ws/2004/08/addressing/policy\" \nxmlns:wsp=\"http://schemas.xmlsoap.org/ws/2004/09/policy\" \nxmlns:wsa=\"http://schemas.xmlsoap.org/ws/2004/08/addressing\" \nxmlns:tns=\"http://tempuri.org/\" \nxmlns:wsam=\"http://www.w3.org/2007/05/addressing/metadata\" \nxmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\" \nxmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\" \nxmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" \nxmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\" \ntargetNamespace=\"http://tempuri.org/\" name=\"Service1\"&gt;\n-&lt;wsdl:types&gt;\n-&lt;xsd:schema targetNamespace=\"http://tempuri.org/Imports\"&gt;\n&lt;xsd:import namespace=\"http://tempuri.org/\" schemaLocation=\"http://localhost:51086/Service1.svc?xsd=xsd0\"/&gt;\n&lt;xsd:import namespace=\"http://schemas.microsoft.com/2003/10/Serialization/\" schemaLocation=\"http://localhost:51086/Service1.svc?xsd=xsd1\"/&gt;\n&lt;xsd:import namespace=\"http://schemas.datacontract.org/2004/07/InsertIntoUserWCF\" schemaLocation=\"http://localhost:51086/Service1.svc?xsd=xsd2\"/&gt;\n&lt;/xsd:schema&gt;\n&lt;/wsdl:types&gt;\n-&lt;wsdl:message name=\"IService1_ksoapAdd_InputMessage\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ksoapAdd\"/&gt;\n&lt;/wsdl:message&gt;\n-&lt;wsdl:message name=\"IService1_ksoapAdd_OutputMessage\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ksoapAddResponse\"/&gt;\n&lt;/wsdl:message&gt;\n-&lt;wsdl:message name=\"IService1_addParam_InputMessage\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:addParam\"/&gt;\n&lt;/wsdl:message&gt;\n-&lt;wsdl:message name=\"IService1_addParam_OutputMessage\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:addParamResponse\"/&gt;\n&lt;/wsdl:message&gt;\n-&lt;wsdl:portType name=\"IService1\"&gt;\n-&lt;wsdl:operation name=\"ksoapAdd\"&gt;\n&lt;wsdl:input message=\"tns:IService1_ksoapAdd_InputMessage\"    wsaw:Action=\"http://tempuri.org/IService1/ksoapAdd\"/&gt;\n&lt;wsdl:output message=\"tns:IService1_ksoapAdd_OutputMessage\" wsaw:Action=\"http://tempuri.org/IService1/ksoapAddResponse\"/&gt;\n&lt;/wsdl:operation&gt;\n-&lt;wsdl:operation name=\"addParam\"&gt;\n&lt;wsdl:input message=\"tns:IService1_addParam_InputMessage\" wsaw:Action=\"http://tempuri.org/IService1/addParam\"/&gt;\n&lt;wsdl:output message=\"tns:IService1_addParam_OutputMessage\" wsaw:Action=\"http://tempuri.org/IService1/addParamResponse\"/&gt;\n&lt;/wsdl:operation&gt;\n&lt;/wsdl:portType&gt;\n-&lt;wsdl:binding name=\"BasicHttpBinding_IService1\" type=\"tns:IService1\"&gt;\n&lt;soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n-&lt;wsdl:operation name=\"InsertUserDetails\"&gt;\n&lt;soap:operation style=\"document\" \n-&lt;wsdl:operation name=\"ksoapAdd\"&gt;\n&lt;soap:operation style=\"document\" soapAction=\"http://tempuri.org/IService1/ksoapAdd\"/&gt;\n-&lt;wsdl:input&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:input&gt;\n-&lt;wsdl:output&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n-&lt;wsdl:operation name=\"addParam\"&gt;\n&lt;soap:operation style=\"document\" soapAction=\"http://tempuri.org/IService1/addParam\"/&gt;\n-&lt;wsdl:input&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:input&gt;\n-&lt;wsdl:output&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n&lt;/wsdl:binding&gt;\n-&lt;wsdl:service name=\"Service1\"&gt;\n-&lt;wsdl:port name=\"BasicHttpBinding_IService1\" binding=\"tns:BasicHttpBinding_IService1\"&gt;\n&lt;soap:address location=\"http://localhost:51086/Service1.svc\"/&gt;\n&lt;/wsdl:port&gt;\n&lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n\n<p>this is my xsd2:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n-&lt;xs:schema xmlns:tns=\"http://schemas.datacontract.org/2004/07/InsertIntoUserWCF\"\nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\" \ntargetNamespace=\"http://schemas.datacontract.org/2004/07/InsertIntoUserWCF\" \nelementFormDefault=\"qualified\"&gt;\n-&lt;xs:complexType name=\"testadd\"&gt;\n-&lt;xs:sequence&gt;\n&lt;xs:element name=\"number_1\" type=\"xs:int\" minOccurs=\"0\"/&gt;\n&lt;xs:element name=\"number_2\" type=\"xs:int\" minOccurs=\"0\"/&gt;\n&lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:element name=\"testadd\" type=\"tns:testadd\" nillable=\"true\"/&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>here is my soap request:</p>\n\n<pre><code>&lt;v:Envelope xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:d=\"http://www.w3.org/2001/XMLSchema\" xmlns:c=\"http://schemas.xmlsoap.org/soap/encoding/\" xmlns:v=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n&lt;v:Header /&gt;\n&lt;v:Body&gt;\n&lt;ksoapAdd xmlns=\"http://tempuri.org/\" id=\"o0\" c:root=\"1\"&gt;\n&lt;n0:num1 xmlns:n0=\"http://tempuri.org/\"&gt;\n&lt;number_1&gt;25&lt;/number_1&gt;\n&lt;number_2&gt;25&lt;/number_2&gt;\n&lt;/n0:num1&gt;\n&lt;/ksoapAdd&gt;\n&lt;/v:Body&gt;\n&lt;/v:Envelope&gt;\n</code></pre>\n\n<p>soap response:</p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n&lt;s:Body&gt;\n&lt;ksoapAddResponse xmlns=\"http://tempuri.org/\"&gt;\n&lt;ksoapAddResult&gt;0&lt;/ksoapAddResult&gt;\n&lt;/ksoapAddResponse&gt;\n&lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p>this is my  java code using ksoap2:</p>\n\n<pre><code>private static final String NAMESPACE = \"http://tempuri.org/\";\nprivate static final String URL = \"http://10.0.2.2:51086/Service1.svc?wsdl\";\nprivate static final String SOAP_ACTION4 = \"http://tempuri.org/IService1/ksoapAdd\";\nprivate static final String METHOD_NAME4 = \"ksoapAdd\";\nprivate static final String SOAP_ACTION5 = \"http://tempuri.org/IService1/addParam\";\nprivate static final String METHOD_NAME5 = \"addParam\";\n\ntry {\n    testadd numX = new testadd(25,25);\n\n    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME4);\n\n    PropertyInfo prop = new PropertyInfo();\n    prop.setNamespace(NAMESPACE);\n    prop.setName(\"num1\");\n    prop.setType(numX.getClass());\n    prop.setValue(numX);\n    Request.addProperty(prop);\n\n    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n    envelope.dotNet = true;\n    envelope.setOutputSoapObject(Request);\n\n    envelope.implicitTypes = true;\n\n    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);\n    androidHttpTransport.debug=true;\n    androidHttpTransport.call(SOAP_ACTION4, envelope);\n\n    Log.d(logtag + \" request dump\", androidHttpTransport.requestDump);\n    Log.d(logtag + \" response dump\", androidHttpTransport.responseDump);\n\n    final SoapPrimitive response = (SoapPrimitive)envelope.getResponse();\n    final int num = Integer.parseInt(response.toString());\n\n    } catch (Exception e) \n    {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>this is my java class testadd:</p>\n\n<pre><code>import java.util.Hashtable;\nimport org.ksoap2.serialization.KvmSerializable;\nimport org.ksoap2.serialization.PropertyInfo;\n\npublic class testadd implements KvmSerializable{\nint number1;\nint number2;\n\ntestadd(){}\ntestadd(int a, int b){ number1 = a; number2 = b;}\n\n\n@Override\npublic Object getProperty(int arg0) {\n    switch(arg0)\n    {\n    case 0:\n        return number1;\n    case 1:\n        return number2;\n\n    }\n\nreturn null;\n}\n\n@Override\npublic int getPropertyCount() {\n\n    return 2;\n}\n\n@Override\npublic void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {\n\n     switch(arg0)\n        {\n        case 0:\n            arg2.type = PropertyInfo.INTEGER_CLASS;\n            arg2.name = \"number_1\";\n            break;\n        case 1:\n            arg2.type = PropertyInfo.INTEGER_CLASS;\n            arg2.name = \"number_2\";\n            break;\n\n        default:break;\n        }\n\n}\n\n@Override\npublic void setProperty(int arg0, Object value) {\n\n    switch(arg0)\n    {\n    case 0:\n       number1 = Integer.parseInt(value.toString());\n        break;\n    case 1:\n        number2 = Integer.parseInt(value.toString());\n        break;\n\n    default:\n        break;\n    }\n}\n}\n</code></pre>\n\n<p>service code:</p>\n\n<pre><code>&lt;ServiceContract()&gt; _\nPublic Interface IService1\n&lt;OperationContract()&gt; _\nFunction ksoapAdd(ByVal num1 As testadd) As Integer\n\n&lt;OperationContract()&gt; _\nFunction addParam(ByVal num1 As Integer, ByVal num2 As Integer) As Integer\n\nEnd Interface\n\n&lt;DataContract()&gt; _\nPublic Class testadd\nPrivate number1 As Integer\nPrivate number2 As Integer\n\n&lt;DataMember()&gt; _\nPublic Property number_1() As Integer\n    Get\n        Return number1\n    End Get\n    Set(ByVal value As Integer)\n        number1 = value\n    End Set\nEnd Property\n\n&lt;DataMember()&gt; _\nPublic Property number_2() As Integer\n    Get\n        Return number2\n    End Get\n    Set(ByVal value As Integer)\n        number2 = value\n    End Set\nEnd Property\n\nEnd Class\n</code></pre>\n\n<p>service methods:</p>\n\n<pre><code>Public Function ksoapAdd(ByVal num1 As testadd) As Integer Implements IService1.ksoapAdd\n    MsgBox(num1.number_1)\n    Return num1.number_1 + num1.number_2\nEnd Function\n\nPublic Function addParam(ByVal num1 As Integer, ByVal num2 As Integer) As Integer Implements IService1.addParam\n    MsgBox(num1 + num2)\n    Return num1 + num2\nEnd Function\n</code></pre>\n\n<p>I know this is a lot of code, but it think its necessary to understand the whole picture.</p>\n\n<p>Thank you!</p>\n"},{"tags":["c#","asp.net","json","wcf","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12744974,"title":"change json object wrapper name returned from wcf service method","body":"<p>I have created a WCF 3.5 application with a method named <code>TestMe</code> as defined below:</p>\n\n<pre><code> [OperationContract]\n        [WebInvoke(UriTemplate = \"/Login\", Method = \"POST\",\n            BodyStyle = WebMessageBodyStyle.Wrapped,\n            ResponseFormat = WebMessageFormat.Json,\n            RequestFormat = WebMessageFormat.Json)]\n        MyDictionary&lt;string, string&gt; TestMe(string param1, string param2);\n</code></pre>\n\n<p><code>MyDictionary</code> is created using this link: <a href=\"http://stackoverflow.com/a/7590189/546033\">http://stackoverflow.com/a/7590189/546033</a></p>\n\n<p>Everything here works fine. But the problem is when returning the data from the implemented method below:</p>\n\n<pre><code>MyDictionary&lt;string, string&gt; success = new MyDictionary&lt;string, string&gt;();\nsuccess[\"desc\"] = \"Test\";\nreturn success;\n</code></pre>\n\n<p>it returns following json: </p>\n\n<pre><code>{\"TestMeResult\":{\"desc\":\"Test\"}}\n</code></pre>\n\n<p>while what i need is:</p>\n\n<pre><code>{\"success\":{\"desc\":\"Test\"}}\n</code></pre>\n\n<p>where <code>success</code> is the object name. What can be the workaround for this?</p>\n"},{"tags":["c#",".net","wcf","json","serialization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":375,"score":1,"question_id":8372076,"title":"WCF - POST JSON Dictionary without Key/Value Text","body":"<p>I have a WCF endpoint that is like such:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"POST\", BodyStyle = WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json, UriTemplate = \"\")]\nStream DoWork(Dictionary&lt;string, string&gt; items);\n</code></pre>\n\n<p>In order to pass anything to my service, I have to structure my JSON like such:</p>\n\n<pre><code>{\"items\":[{\"Key\":\"random1\",\"Value\":\"value1\"}, {\"Key\":\"random2\",\"Value\":\"value2\"}]}\n</code></pre>\n\n<p>What I actually want it to look like is this:</p>\n\n<pre><code>{\"items\":{\"random1\":\"value1\",\"random2\":\"value2\"}}\n</code></pre>\n\n<p>Is there any way to accomplish this?</p>\n"},{"tags":["c#","wcf","dynamic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12861711,"title":"How to use ICustomTypeProvider over WCF service?","body":"<p>I need to use an object extended from ICustomTypeProvider in my project for dynamic property support and it works fine but now i need to send this object over WCF service. Any idea how to do it?</p>\n"},{"tags":["asp.net","wcf","windows-services"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12860338,"title":"Windows Service or WCF Serice","body":"<p>I need to implement simple file watcher utility. I have decided to implement this in a simple windows service which will internally use FileSystemWatcher. The purpose is to monitor given directory path (or ftp) and copy the file to some other server wherever new file comes in after checking some predefined logic</p>\n\n<p>As I am using .net 3.5; client suggested me to use WCF. I have very less experience in WCF.</p>\n\n<p>I am not sure how I can create WCF service which will function like WindowsService and can be deployed in services on windows server.</p>\n\n<p>To be a futuristic is it a good idea to create WCF service instead of  windows service, or I should insist on window service.</p>\n"},{"tags":["wcf","entity-framework","wcf-data-service"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":543,"score":4,"question_id":5300283,"title":"Data Service using EF - is it possible to use WebGet method which returns a custom type?","body":"<p>In my project I use Data Service which use EF. Now I have a custom class which I also want to expose through my Data Service, but I can't make it work, it's seems like it is impossible to mix custom types and EF in single Data Service. Any suggestions?</p>\n\n<p>Looks like it doesn't find some info in meta-data\nError:</p>\n\n<blockquote>\n  <p>The server encountered an error\n  processing the request. The exception\n  message is 'Unable to load metadata\n  for return type\n  'System.Linq.IQueryable<code>1[ITS.NetProject.Model.CustomEnty]'\n  of method\n  'System.Linq.IQueryable</code>1[ITS.NetProject.Model.CustomEnty]\n  GetCustomEnties()'.'. See server logs\n  for more details. The exception stack\n  trace is:....</p>\n</blockquote>\n\n<p>Code:</p>\n\n<pre><code>   [ServiceBehavior(IncludeExceptionDetailInFaults=true)]\n        public class ITSServiceOData : DataService&lt;ITSEntities&gt;\n        {\n            public static void InitializeService(DataServiceConfiguration config)\n            {\n\n                config.SetEntitySetAccessRule(\"*\", EntitySetRights.All);\n\n                config.SetServiceOperationAccessRule(\"GetCustomEnties\",                \n    ServiceOperationRights.AllRead);\n\n                config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;\n            }\n\n\n            [WebGet]\n            public IQueryable&lt;CustomEnty&gt; GetCustomEnties()\n            {\n                return from e in this.CurrentDataSource.CustomEnties select e;\n\n            }\n\n        }\n\n///Here it is my model definition\n\nnamespace ITS.NetProject.Model\n{\n    partial class ITSEntities\n    {\n        public IQueryable&lt;CustomEnty&gt; CustomEnties \n        {\n            get\n            {\n                return ...\n            }\n        }\n    }\n\n//Company, Equipment, Owner are EF entity classes\n    [DataServiceKey(\"Id\")]\n    public class CustomEnty\n    {\n        public int Id {get;set;}\n\n        public Subject Company { get; set; }\n\n        public Subject Equipment { get; set; }\n\n        public Subject Owner { get; set; }\n    }\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["wcf","c#-4.0","asp.net-mvc-4","wif","sts-securitytokenservice"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12851683,"title":"Examples of how to a STS in .Net 4.5 using WCF","body":"<p>I'm looking for Examples of how to a STS in .Net 4.5 using WCF.</p>\n\n<p>So the scenario is I have a MVC 4 web app that I want to write an STS to authenticate and get claims that stores its data in the traditional SqlMembershipProvider database schema that we all know and love.</p>\n\n<p>I'm guessing the STS could be a simple WCF service.</p>\n\n<p>I've googled around but can only find stuff that shows how to do all this when the WIF was separated from the Core Framework. I.e. before it was embedded in .Net 4.5</p>\n"},{"tags":["asp.net-mvc","wcf","dependency-injection","unity"],"answer_count":2,"favorite_count":4,"up_vote_count":2,"down_vote_count":0,"view_count":1215,"score":2,"question_id":7263571,"title":"ASP.NET MVC Dependency Injection Unity with WCF services - working sample solution","body":"<p>I'm looking for a working sample of an ASP.NET MVC web application that uses Unity and calls an WCF service.  I've looked at a lot of explanations on how to add dependency injection to WCF services but frankly I'm a little over my head here.  It doesn't help that I'm new to WCF services as well. </p>\n\n<p>I'm currently using Unity with Contructor injection for our ASP.NET MVC applications but so far we aren't using any WCF Web Services.  The plan is to start using web services and I'm very confused on how to incorporate Unity with them.</p>\n\n<p>I would love a nice working sample that I could walk through to better understand how to go about it.</p>\n"},{"tags":["wcf","wcf-security"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":353,"score":1,"question_id":8454864,"title":"Simple certificate security of a WCF service using Message security mode","body":"<p>I'm struggling with what seems like a simple task:\nCreate a secure WCF service with Message security option.  WCF service should only respond to clients that provide a valid X509 certificate.\nOnce the clients are authenticated, it should treat them as anonymous users but execute their requests.  Http is used, not HTTPS.  wsHttpBinding.</p>\n\n<p>I've created a self-signed cert with a custom-made root authority cert.  I've uploaded both to the web servers.  I've installed both properly.  I've given the self-signed certificate read-only access to private keys to \"Everyone\" (at least for now to eliminate key-permission issues).</p>\n\n<p>I've installed the self-signed cert on the client machines.  I'm supplying the call to my WCF service with the client certificate.  I'm getting the following error:\n{\"The request for security token could not be satisfied because authentication failed.\"}\nThe Web-servers are reporting a \"Logon Failure\" security event in the Event Viewer:</p>\n\n<pre><code>Subject:\n    Security ID:        SYSTEM\n    Account Name:       WEB-XXXXX\n    Account Domain:     XXXXXX\n    Logon ID:       0x3e7\n\nLogon Type:         3\n\nAccount For Which Logon Failed:\n    Security ID:        NULL SID\n    Account Name:       \n    Account Domain:     \n\nFailure Information:\n    Failure Reason:     Unknown user name or bad password.\n    Status:         0xc000006d\n    Sub Status:     0xc0000064\n</code></pre>\n\n<p>Here is the relevant web.config of the WCF service:</p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;clear/&gt;\n        &lt;binding name=\"wsHttpBindingSecure\"&gt;\n          &lt;security mode=\"Message\"&gt;\n            &lt;message clientCredentialType=\"Certificate\"/&gt;\n            &lt;transport clientCredentialType=\"None\"&gt;&lt;/transport&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"LegacyServiceBehavior\" name=\"RDC.External.MainSite.LegacyDataProvider.WCF.LegacyService\"&gt;\n        &lt;endpoint address=\"secure\" bindingConfiguration=\"wsHttpBindingSecure\" binding=\"wsHttpBinding\" name=\"Secure\" contract=\"RDC.Domain.Commerce.Common.ILegacySecureService\"&gt;\n          &lt;identity&gt;\n            &lt;certificateReference findValue=\"legacyservice\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\"/&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"LegacyServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;serviceCertificate findValue=\"legacyservice\" storeLocation=\"LocalMachine\" storeName=\"My\" x509FindType=\"FindBySubjectName\"/&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Here is the relevant section from client's app.config:</p>\n\n<pre><code>  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"Secure\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n            receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" bypassProxyOnLocal=\"false\"\n            transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n            maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n            messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n            allowCookies=\"false\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n              enabled=\"false\" /&gt;\n          &lt;security mode=\"Message\"&gt;\n            &lt;message clientCredentialType=\"Certificate\" negotiateServiceCredential=\"true\"\n                algorithmSuite=\"Default\"/&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://www---url---.com/secure\"\n          binding=\"wsHttpBinding\" behaviorConfiguration=\"secureBehavior\" bindingConfiguration=\"Secure\" contract=\"RDC.Domain.Commerce.Common.ILegacySecureService\"\n          name=\"Secure\"&gt;\n        &lt;identity&gt;\n          &lt;certificateReference x509FindType=\"FindBySubjectName\" findValue=\"legacyservice\" storeLocation=\"LocalMachine\" storeName=\"My\"/&gt;\n        &lt;/identity&gt;\n      &lt;/endpoint&gt;\n    &lt;/client&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"secureBehavior\"&gt;\n          &lt;clientCredentials supportInteractive=\"false\"&gt;\n            &lt;clientCertificate x509FindType=\"FindBySubjectName\" findValue=\"legacyservice\" storeLocation=\"LocalMachine\" storeName=\"My\"/&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I've been struggling with this for the last 3 days and am at the last of my efforts... any suggestions as to what I'm doing wrong?</p>\n\n<p>Thank you kindly</p>\n"},{"tags":["wcf","user-interface","soap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":287,"score":0,"question_id":6344197,"title":"How to get the value from MessageHeaderInfo","body":"<p>I am sending some SOAP headers to a WCF service and I am trying to catch them using behavior extension.\nWhen the message is received I am going through its headers collection.</p>\n\n<p>Each header is of MessageHeaderInfo type which does not have a value property. \nHow can I extract the value? It can be done with an ugly parsing (to remove the xml elements around the value) but it feels lame.</p>\n\n<p>your help is most appriciated! </p>\n"},{"tags":["wcf","web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":12859212,"title":"Detect outdated WCF Service Reference Proxy","body":"<p>Consider following scenario during development -</p>\n\n<ol>\n<li>We change in WCF service contracts very frequently.</li>\n<li>There is a web application consuming these services.</li>\n<li>We do update, service reference frequently in the web application.</li>\n</ol>\n\n<p>But at times when we forget to do this, we have to debug our whole web application, to finally find out that, the service contract has changed.</p>\n\n<p>Can we detect outdated proxy at runtime before invoking the service.</p>\n"},{"tags":["wcf","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12858303,"title":"Deploy WCF Service with WebRole to non-Azure Hoster","body":"<p>I have a WCF Service with one WebRole and one WorkerRole for the communication with the Azure database. This service is deployed into a Windows Azure Cloud. Everything works fine.</p>\n\n<p>But now, I have a (more or less academic) question: Is it possible to deploy this service to another hoster, means not to the Azure Cloud. If yes, which parts of the program have to be changed and which software (i.e. IIS) is need in the other hosting environment.</p>\n\n<p>Background of this question is: My customer wants to know, whether he is independant of the Azure Cloud or not.</p>\n\n<p>Thanks a lot for your answers!</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":11334249,"title":"in my service, the method is defined to return a MessageContract but only return the first property","body":"<p>I have a method in the service that receive a messageContract and return other different messageContact with the results. This second messageContract, has meny messageHeaders.</p>\n\n<p>In the contract I define my method to return this result messageContract, but in the client Visual Studio say me that the method return an Int64.</p>\n\n<p>Why?</p>\n\n<p>Thanks.</p>\n"},{"tags":["wcf"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":319,"score":0,"question_id":3708800,"title":"How to discover WCF service if you do not know the Interface type of the target service?","body":"<p>Can anyone please explain me how to discover a WCF service if you do not know the type of the service Interface. \nI am very new to WCF services and I need to write an application to discover some WCF services hosted in the subnet.\nI found that you need to specify the service interface in inorder to create a FindCriteria object. </p>\n\n<p>FindCriteria criteria new FindCriteria(typeof(IService1)</p>\n\n<p>Please explain me how this works generally.</p>\n"},{"tags":["c#","wcf","asynchronous","methods","call"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12858511,"title":"Different behaviors calling a WCF server side method through its WinForm or through WCF","body":"<p>Im writing a program that needs a double UI: the first one is a classic windows form, the second one through windows phone device. Im working with WCF (asynchronous, the only possibility with this device), but Ive got a behavior that appears very strange to me. Well, Im very basic with WCF, so maybe Im doing something wrong. I wrote a simpler version of my WCF server code, so the problem here is clearer:</p>\n\n<pre><code>[ServiceContract]\npublic partial class Form2 : Form\n{\n    int x = 0;\n\n    public Form2()\n    {\n        InitializeComponent();\n    }\n\n    private void button1_Click(object sender, EventArgs e)\n    {\n        prova1();\n    }\n\n    private void button2_Click(object sender, EventArgs e)\n    {\n        x++;\n    }\n\n    [OperationContract]\n    void prova1()\n    {\n        MessageBox.Show(\"x = \" + x.ToString());\n    }\n</code></pre>\n\n<p>If I click button2 and then button1 I evidently get a popbox with x = 1. But if I call prova1() through windows phone app Ill always get x = 0. It is a very general behavior: If I instantiate an object in WCF servers code and try to use it in a WCF  servers method called trough the external device, Ill get an null reference exception. It seems that everything I do in the WCF server code is totally invisible within the methods called trough WCF. Theres a way to avoid this behavior?</p>\n"},{"tags":["c#","wcf","compact-framework","windows-ce"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1290,"score":3,"question_id":6355233,"title":".NET Compact Framework, WCF service, compression and DIGEST authentication","body":"<p>I'm trying to put a number of features together, which is proving increasingly difficult due to the limitations of the .NET Compact Framework.</p>\n\n<p>Specifically, I've got a WCF service and I'm writing a mobile device client for it. The catch? I want to use some sort of data compression (due to a very slow modem connected to said device) and HTTP DIGEST authentication (which is already in place on the site hosting the WCF service).</p>\n\n<p>I've followed <a href=\"http://blogs.msdn.com/b/maagniho/archive/2008/12/24/gzip-message-encoding-for-wcf-applications-written-using-net-compact-framework.aspx\" rel=\"nofollow\">this blog entry</a> to get the compression and generated code needed for the WCF service client.</p>\n\n<p>I am, however, struggling with the HTTP DIGEST. I've no idea how to add this functionality.</p>\n\n<p>Previously I didn't use compression and as such I connected to the WCF service using SOAP, using a simple WebService reference, and to add HTTP DIGEST I had to override the <code>GetWebRequest</code> method and add the required headers manually. This time around the generated classes seem to give very little leeway and there isn't much I can override. Also, all security or authentication parameters seem to be designed for SSL, rather than such basic authentication schemes.</p>\n\n<p>To summarize: how can I create a WCF client using compression and HTTP DIGEST authentication using .NET Compact Framework?</p>\n\n<p>EDIT:\nHere's the code I've currently got:</p>\n\n<pre><code>        System.ServiceModel.Channels.CustomBinding customBinding = new System.ServiceModel.Channels.CustomBinding();\n        CompressionMessageEncodingBindingElement compressionBindingElement = new CompressionMessageEncodingBindingElement();\n        customBinding.Elements.Add(compressionBindingElement);\n        HttpTransportBindingElement httpBindingElement = new HttpTransportBindingElement();\n        customBinding.Elements.Add(httpBindingElement);\n        EndpointAddress endPoint = new EndpointAddress(\"http://localhost:5100/Service.svc\");\n        ServiceClient client = new ServiceClient(customBinding, endPoint);\n</code></pre>\n\n<p>I suspect I somehow need to add the HTTP DIGEST functionality to the <code>CustomBinding</code> class, but I don't know how.</p>\n\n<p>I suspect I should also note, that while I am using .NET Compact Framework 3.5, I am creating a Windows CE application. As such, I didn't bother downloading Windows Mobile 6 SDKs. If these SDKs add more functionality which can be used in Window CE applications and are required for the HTTP DIGEST to work, please let me know.</p>\n"},{"tags":["android","sql-server","wcf","web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":86,"score":-1,"question_id":12853720,"title":"WCF CRUD service for Android client","body":"<p>I need to access MS SQL Server data from Android. This should go via a web service. I got the WCF web service, but I'm facing problem when I try to populate record in a ListView in Android with data from the WCF webservice.</p>\n\n<p>Can anyone help in the Read functions? </p>\n\n<p>In WCF Web Service:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public String[] listdata()\n{\n    string[] result;\n    result = new string[] { \"One\", \"Two\", \"Three\", \"Four\" };\n    return result;\n}\n</code></pre>\n\n<p>In Android:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>//Connect to the server\nHttpGet httpGet=new HttpGet(\"http://10.0.2.2:3113/Service1.svc\");\n\n//Get the response\nHttpResponse httpResponse = httpClient.execute(httpGet);\nHttpEntity httpEntity = httpResponse.getEntity();\nInputStream stream=httpEntity.getContent();\n\n// (I DON'T KNOW WHERE TO PUT LISTVIEW CODE)\n\n//Convert the stream to readable format\nString result= convertStreamToString(stream);\n</code></pre>\n"},{"tags":["c#","wcf","https","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12834223,"title":"Castle Windsor WCF Facility HTTPS","body":"<p>I successfully integrated the Caste WCF Facility with my services. Now I try to configure an HTTPS communication based on BasicHttpBinding.</p>\n\n<p>According the following blog post, this should not be a big deal: <a href=\"http://blog.adnanmasood.com/2008/07/16/https-with-basichttpbinding-note-to-self/\" rel=\"nofollow\">http://blog.adnanmasood.com/2008/07/16/https-with-basichttpbinding-note-to-self/</a></p>\n\n<p>Here's my setup. On client-side, I configure the Windsor container using the following code:</p>\n\n<pre><code>    BasicHttpBinding clientBinding = new BasicHttpBinding();\n\n    // These two lines are the only thing I changed here to allow HTTPS\n    clientBinding.Security.Mode = BasicHttpSecurityMode.Transport;\n    clientBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;\n    // Everything else worked well with HTTP\n\n    clientBinding.MaxReceivedMessageSize = 163840;\n    clientBinding.MaxBufferSize = (int)clientBinding.MaxReceivedMessageSize;\n\n    container = new WindsorContainer();\n    container.AddFacility&lt;WcfFacility&gt;();\n    container.Register(\n        Component.For&lt;IClientService&gt;()\n        .AsWcfClient(new DefaultClientModel {\n              Endpoint = WcfEndpoint.BoundTo(clientBinding)\n              .At(configuration.Get(CFGKEY_SERVICE_CLIENT))\n        })\n     );\n</code></pre>\n\n<p>Besides that, I don't have any configuration on client-side. This worked well using HTTP communication.</p>\n\n<p>The server side got the following configuration within Web.config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;behaviors&gt;\n    &lt;serviceBehaviors&gt;\n      &lt;behavior name=\"\"&gt;\n        &lt;serviceMetadata httpsGetEnabled=\"true\" /&gt;\n        &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;/behavior&gt;\n    &lt;/serviceBehaviors&gt;\n  &lt;/behaviors&gt;\n  &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"\n    multipleSiteBindingsEnabled=\"true\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>When I'm trying to connect through https://, I get the following exception:</p>\n\n<p>System.ServiceModel.EndpointNotFoundException: There was no endpoint listening at <a href=\"https://myuri.com/Services/Client.svc\" rel=\"nofollow\">https://myuri.com/Services/Client.svc</a> that could accept the message.</p>\n\n<p>Any ideas what's missing?\nThank you in advance.</p>\n"},{"tags":["wcf","arrays"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1236,"score":1,"question_id":3729141,"title":"CommunicationObjectAbortedException during reading large array from server","body":"<p>I'm receiving such exception during reading array of 40000 items.\nIs there an idea why does it happen.\nI've changed send/receive timeout to 30 min. Not helped.</p>\n\n<blockquote>\n  <p>System.ServiceModel.CommunicationObjectAbortedException was unhandled\n  by user code   Message=The socket connection has been disposed.<br>\n  Source=mscorlib   StackTrace:\n      Server stack trace: \n         at System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer, Int32 offset, Int32 size, TimeSpan timeout)\n         at System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer, Int32 offset, Int32 count, TimeSpan timeout)\n         at System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer, Int32 offset, Int32 count)\n         at System.ServiceModel.Channels.SingletonConnectionReader.SingletonInputConnectionStream.ReadCore(Byte[]\n  buffer, Int32 offset, Int32 count)\n         at System.ServiceModel.Channels.SingletonConnectionReader.SingletonInputConnectionStream.Read(Byte[]\n  buffer, Int32 offset, Int32 count)\n         at System.ServiceModel.Channels.DelegatingStream.Read(Byte[] buffer, Int32 offset, Int32 count)\n         at System.ServiceModel.Channels.MaxMessageSizeStream.Read(Byte[] buffer,\n  Int32 offset, Int32 count)\n         at System.ServiceModel.Channels.SingletonConnectionReader.Close(TimeSpan\n  timeout)\n         at System.ServiceModel.Channels.SingletonConnectionReader.DoneReceiving(Boolean\n  atEof, TimeSpan timeout)\n         at System.ServiceModel.Channels.SingletonConnectionReader.DoneReceiving(Boolean\n  atEof)\n         at System.ServiceModel.Channels.SingletonConnectionReader.SingletonInputConnectionStream.Close()\n         at System.ServiceModel.Channels.DelegatingStream.Close()\n         at System.Xml.XmlBufferReader.Close()\n         at System.Xml.XmlBaseReader.Close()\n         at System.Xml.XmlBinaryReader.Close()\n         at System.Xml.XmlReader.Dispose(Boolean disposing)\n         at System.Xml.XmlReader.System.IDisposable.Dispose()\n         at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message\n  message, Object[] parameters, Boolean isRequest)\n         at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message\n  message, Object[] parameters)\n         at System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc&amp;\n  rpc)\n         at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime\n  operation, ProxyRpc&amp; rpc)\n         at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins,\n  Object[] outs, TimeSpan timeout)\n         at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins,\n  Object[] outs)\n         at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage\n  methodCall, ProxyOperationRuntime operation)\n         at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage\n  message)\n      Exception rethrown at [0]: \n         at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage\n  reqMsg, IMessage retMsg)\n         at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;\n  msgData, Int32 type)\n         at AlexSoft.Core.RemoteFacade.Contract.AdministrationSvc.IAdministrationRmService.GetAllBins()\n         at _dynamic_AlexSoft.Core.RemoteFacade.Contract.AdministrationSvc.IAdministrationRmService.GetAllBins(Object\n  , Object[] )\n         at Spring.Reflection.Dynamic.SafeMethod.Invoke(Object target, Object[] arguments)\n         at Spring.Aop.Framework.DynamicMethodInvocation.InvokeJoinpoint()\n         at Spring.Aop.Framework.AbstractMethodInvocation.Proceed()\n         at AlexSoft.Desktop.Services.RemoteFacade.ExtractRemoteExceptionAdvice.Invoke(IMethodInvocation\n  invocation) in\n  D:\\proj\\communic\\trunk_fix_not_opened\\src\\SmartClient\\Desktop.Services\\RemoteFacade\\ExtractRemoteExceptionAdvice.cs:line\n  15\n         at Spring.Aop.Framework.AbstractMethodInvocation.Proceed()\n         at Spring.Aop.Framework.DynamicProxy.AdvisedProxy.Invoke(Object proxy, Object target, Type targetType, MethodInfo targetMethod,\n  MethodInfo proxyMethod, Object[] args, IList interceptors)\n         at CompositionAopProxy_8e3e641f50c44b68b5809af44bfae8bd.GetAllBins()\n         at AlexSoft.Desktop.Services.RemoteFacade.RemoteAdministrationService.&lt;>c_<em>DisplayClass2.b</em>_0(IAdministrationRmService\n  svc) in\n  D:\\proj\\communic\\trunk_fix_not_opened\\src\\SmartClient\\Desktop.Services\\RemoteFacade\\RemoteAdministrationService.cs:line\n  18\n         at AlexSoft.Desktop.Services.RemoteFacade.AbstractRemoteService<code>1.ExecuteRmAction(RmAction\n  action) in\n  D:\\proj\\communic\\trunk_fix_not_opened\\src\\SmartClient\\Desktop.Services\\RemoteFacade\\AbstractRemoteService.cs:line\n  121\n         at AlexSoft.Desktop.Services.RemoteFacade.RemoteAdministrationService.GetAllBins()\n  in\n  D:\\proj\\communic\\trunk_fix_not_opened\\src\\SmartClient\\Desktop.Services\\RemoteFacade\\RemoteAdministrationService.cs:line\n  24\n         at AlexSoft.MPObjects.Desktop.Controllers.UseCaseBinListController.ShowBinListView(IUseCaseBinListController\n  controller) in\n  D:\\proj\\communic\\trunk_fix_not_opened\\src\\SmartClient\\AlexSoft.MPObjects.Desktop\\Controllers\\UseCaseBinListController.cs:line\n  95\n         at Microsoft.Practices.Composite.Presentation.Commands.DelegateCommand</code>1.Execute(T\n  parameter)\n         at Microsoft.Practices.Composite.Presentation.Commands.DelegateCommand`1.System.Windows.Input.ICommand.Execute(Object\n  parameter)\n         at MS.Internal.Commands.CommandHelpers.CriticalExecuteCommandSource(ICommandSource\n  commandSource, Boolean userInitiated)\n         at System.Windows.Controls.Primitives.ButtonBase.OnClick()\n         at System.Windows.Controls.Button.OnClick()\n         at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs\n  e)\n         at System.Windows.UIElement.OnMouseLeftButtonUpThunk(Object sender, MouseButtonEventArgs e)\n         at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate\n  genericHandler, Object genericTarget)\n         at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)\n         at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)\n         at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)\n         at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)\n         at System.Windows.UIElement.OnMouseUpThunk(Object sender, MouseButtonEventArgs e)\n         at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate\n  genericHandler, Object genericTarget)\n         at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)\n         at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)\n         at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)\n         at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)\n         at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)\n         at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)\n         at System.Windows.Input.InputManager.ProcessStagingArea()\n         at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)\n         at System.Windows.Input.InputProviderSite.ReportInput(InputReport\n  inputReport)\n         at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd,\n  InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x,\n  Int32 y, Int32 wheel)\n         at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr\n  hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean&amp;\n  handled)\n         at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean&amp; handled)\n         at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean&amp; handled)\n         at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)\n         at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate\n  callback, Object args, Int32 numArgs)\n         at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object\n  source, Delegate method, Object args, Int32 numArgs, Delegate\n  catchHandler)   InnerException: System.IO.IOException\n         Message=The read operation failed, see inner exception.\n         Source=System\n         StackTrace:\n              at System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)\n              at System.Net.Security.NegotiateStream.Read(Byte[] buffer, Int32 offset, Int32 count)\n              at System.ServiceModel.Channels.StreamConnection.Read(Byte[] buffer,\n  Int32 offset, Int32 size, TimeSpan timeout)\n         InnerException: System.ServiceModel.CommunicationObjectAbortedException\n              Message=The socket connection has been disposed.\n              Source=System.ServiceModel\n              StackTrace:\n                   at System.ServiceModel.Channels.SocketConnection.ThrowIfNotOpen()\n                   at System.ServiceModel.Channels.SocketConnection.Read(Byte[] buffer,\n  Int32 offset, Int32 size, TimeSpan timeout)\n                   at System.ServiceModel.Channels.DelegatingConnection.Read(Byte[] buffer,\n  Int32 offset, Int32 size, TimeSpan timeout)\n                   at System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer,\n  Int32 offset, Int32 count, TimeSpan timeout)\n                   at System.ServiceModel.Channels.ConnectionStream.Read(Byte[] buffer,\n  Int32 offset, Int32 count)\n                   at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count)\n                   at System.Net.Security.NegotiateStream.StartFrameHeader(Byte[] buffer,\n  Int32 offset, Int32 count, AsyncProtocolRequest asyncRequest)\n                   at System.Net.Security.NegotiateStream.ProcessRead(Byte[] buffer, Int32\n  offset, Int32 count, AsyncProtocolRequest asyncRequest)\n              InnerException: System.ObjectDisposedException\n                   Message=The socket connection has been disposed. Object name: 'System.ServiceModel.Channels.SocketConnection'.\n                   ObjectName=System.ServiceModel.Channels.SocketConnection\n                   InnerException:</p>\n</blockquote>\n"},{"tags":["asp.net","wcf","asynchronous",".net-3.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12855701,"title":"Total Async in Web Applications for ASP.NET 3.5","body":"<p>I've been informing myself about the <code>async</code> capabilities of <code>.net 3.5</code>\nIve found a very good article on this : <code>http://msdn.microsoft.com/en-us/magazine/cc163725.aspx</code></p>\n\n<p>Now, the thing is, all these methods still require the async tasks to be finished BEFORE the <code>Page_Render</code> event, so in practice, the web application will still appear to be 'hanging' for the user.</p>\n\n<p><strong>My question:</strong> How can I <code>async</code> launch a heavy task from my <code>aspx</code> page, without having to wait or <code>callback</code> for this task when its finished, and then just render the page. The actual work is being done in a <code>WCF</code> service ( creating document, sending mail )</p>\n\n<p>Pseudo code: </p>\n\n<pre><code>void btn_Click()\n{\n   AsyncCallWcfServiceButDontWaitForIt();\n   lblFeedback.Text = \"Your documents are beging generated and mailed in the background\";  \n}\n</code></pre>\n\n<p>I'd like to give the user direct feedback while the rest is being handled in the background. I've implemented something like this with executing a <code>console script</code> but I'm looking for a possible better <code>async</code> way.</p>\n\n<p>Please also note I'm looking for a <code>.NET 3.5</code> solution!</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["wcf","silverlight","exception","authentication"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12855607,"title":"Silverlight fault propagation and UserNamePasswordValidator","body":"<p>Scenario is a Silverlight client using Wcf service &amp; custom authentication. To mitigate the 500/200 status code problem (avoid EndPointNotFound exception) I've applied the <a href=\"http://msdn.microsoft.com/en-us/library/ee844556%28v=vs.95%29.aspx\" rel=\"nofollow\">SilverLightFaultBehaviour</a>. However, this does not work with <a href=\"http://msdn.microsoft.com/en-us/library/ms551936%28v=vs.90%29.aspx\" rel=\"nofollow\">UserNamePasswordValidator</a> - When a FaultException is thrown from Validate(), it is not caught by the SilverLightFaultMessageInspector's implementation of BeforeSendReply.</p>\n\n<p>So far, the only workaround I've found is using the alternative client stack instead ( <code>WebRequest.RegisterPrefix(\"http://\", WebRequestCreator.ClientHttp);</code>), but there are complications with using it which can no longer be ignored as a lot of our clients are on virtual machines, the silverlight client keeps crashing ( <a href=\"http://stackoverflow.com/questions/9382809/silverlight-5-debugging-npctrl-dll-crash\">Silverlight 5 - Debugging npctrl.dll crash</a> , <a href=\"http://communities.vmware.com/thread/394306?tstart=0\" rel=\"nofollow\">http://communities.vmware.com/thread/394306?tstart=0</a> ). </p>\n\n<p>My primary motivation is that I want to be able to distinguish a failed login from a connection error (the following code is from a client-side async callback method, and only works with the Client stack):</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>if (e.Error is MessageSecurityException)\n{\n    this.HasLoginFailed.Value = Captions.Login_FailedLogin;\n}\nelse\n{\n    this.HasLoginFailed.Value = Captions.Login_FailedConnection;\n}\n</code></pre>\n\n<p>Is there any other way of modifying the message sent when throwing a FaultException from UserNamePasswordValidator? Or any conceptually different way of doing custom authentication rather than what I am using which enables me to modify the message status or to keep it 200, or just to be able to distinguish a connection failure from bad credentials?</p>\n\n<p>my server-side code for usernamepassword reg:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>var serviceCredential = host.Description.Behaviors.Find&lt;ServiceCredentials&gt;();\nserviceCredential.UserNameAuthentication.UserNamePasswordValidationMode =\n                    UserNamePasswordValidationMode.Custom; \nserviceCredential.UserNameAuthentication.CustomUserNamePasswordValidator =\n                    new MyValidator();\n</code></pre>\n"},{"tags":["c#","windows","wcf","windows-8","winrt"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12799196,"title":"ServicePoint.Expect100Continue for Windows Store Apps","body":"<p>As the title says, i need to set this flag to false for my app, like so:</p>\n\n<pre><code> ServicePoint.Expect100Continue = false;\n</code></pre>\n\n<p>However neither ServicePoint nor ServicePointManager are accessible, and i can't find another way to set this property. Also, there is no app.config so setting it via configuration is also not possible.</p>\n\n<p>If i do no set this to false, the flag is sent in the request and a CommunicationException occurs. </p>\n\n<p>I cannot change server code, i am only a consumer of server data.</p>\n\n<p>The service is added with the \"Add Service Reference\" dialog. Any method call results in:</p>\n\n<pre><code>The underlying connection was closed: An unexpected error occurred on a receive.\n</code></pre>\n\n<p>When i call the same service, added with \"Add Service Reference\" from a console application, there is the same error. The reason is the Expect100Continue Attribute. If i remove it <a href=\"http://blogs.msdn.com/b/fiddler/archive/2011/11/05/http-expect-continue-delays-transmitting-post-bodies-by-up-to-350-milliseconds.aspx\" rel=\"nofollow\">using the usual methods</a>, it works in the console app.</p>\n\n<p>So, i'd like to know what the equivalent is for Windows Store apps.</p>\n"},{"tags":["wcf","exception","wcf-binding","nettcpbinding","form-authentication"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12812471,"title":"Form Authentication on NetTcpBinding in WCF service","body":"<p>I am using WCF service, which have two endpoint WsHttpBinding and NetTcpBinding and the service is using Forms Authentication. Service is hosted on IIS 7.</p>\n\n<p>This works perfectly with WsHttpBinding, but fails for NetTcpBinding.</p>\n\n<p>It fails on below statement:</p>\n\n<pre><code>FormsAuthentication.SetAuthCookie(\"COOKIENAME\", false);\n</code></pre>\n\n<p>And the exception is :</p>\n\n<pre><code>Object reference not set to an instance of an object.\n</code></pre>\n\n<p>Please share your ideas on this.</p>\n"},{"tags":["c#","wcf","asp.net-4.0","wcf-data-services","wcf-client"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1270,"score":2,"question_id":8232595,"title":"How to send list of objects to WCF service?","body":"<p>I'm building WCF service and I would like to accept List as a parameter to one of my method.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>[ServiceContract]\npublic interface IProductService\n{\n    [OperationContract]\n    int InsertProducts(List&lt;Product&gt; products);\n}\n\n[DataContract]\n[KnownType(typeof(List&lt;Product&gt;))]\npublic class Product\n{\n    [DataMember]\n    public int ProductId{ get; set; }\n\n    [DataMember]\n    public string ProductName{ get; set; }\n\n    [DataMember]\n    public List&lt;Product&gt; Products { get; set; }\n}\n</code></pre>\n\n<p>When I run service it gives me an error. </p>\n\n<p>This operation is not supported in the WCF, because it uses <code>NameSpace.Product[]</code></p>\n"},{"tags":["c#","wcf","web-services","sharepoint","nintex-workflow"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12820474,"title":"Sending file through Nintex Web-Service Call to WCF Service","body":"<p>I would like to send a file to a WCF Webservice via the Nintex Webservice Action.\nWCF is able to receive files as a stream parameter in an OperationContract. But I cannot find a proper example to begin. Is there anyone with a similar problem?\nThe first thought would have been; Ok, why not using the URL of the file and sending that over, so the WCF can take the URL and get the file. Problem with that is, that the WCF is public and the Sharepoint Server in a company network, which has connectivity to the internet. So without making the files also public, that wouldn't be possible.</p>\n\n<p>The only idea I have is, to use a Custom Nintex Action, which is sending the data directly to the WCF Service. Or using another Webservice for that, which is in this case, almost the same.</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":12,"up_vote_count":12,"down_vote_count":0,"view_count":9785,"score":12,"question_id":1369882,"title":"WCF Web Service Custom Exception Error to Client","body":"<p>I would like to throw custom exception like some error message as an exception from WCF web service and trying receiver this exception error message in client app on calling web service method.</p>\n\n<p>how to throw custom exception from WCF web Service and receive same exception error at client side.</p>\n\n<p>WCF Web Service Method:</p>\n\n<pre><code>    public bool Read()\n    {\n        if (IsUserValid() == false)\n        {\n            throw new Exception(\"Authorized user\");\n        }\n    }\n</code></pre>\n\n<p>At Client Side</p>\n\n<pre><code>try\n{\n   _client.Read();\n}\ncatch (Exception e)\n{\n   MessageBox.Show(e.Message);\n   return;\n}\n</code></pre>\n\n<p>Result: Always throw error message as an exception **i.e. </p>\n\n<blockquote>\n  <p>\"System.ServiceModel.FaultException:\n  The server was unable to process the\n  request due to an internal error.  For\n  more information about the error,\n  either turn on\n  IncludeExceptionDetailInFaults (either\n  from ServiceBehaviorAttribute or from\n  the  configuration\n  behavior) on the server in order to\n  send the exception information back to\n  the client, or turn on tracing as per\n  the Microsoft .NET Framework 3.0 SDK\n  documentation and inspect the server\n  trace logs.\"</p>\n</blockquote>\n\n<p>This is code is throwing exception but not returning same error message as thrown from WCF web service as an exception error</p>\n\n<p>Please suggest</p>\n"},{"tags":["wcf","message"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12853954,"title":"WCF: How to create an object as a parameter of message on client side","body":"<p>I have WCF service that uses raw messages (Message class).</p>\n\n<p>1) Service side:</p>\n\n<pre><code>[DataContract]\npublic class Person\n{\n    [DataMember]\n    public int Id { get; set; }\n\n    [DataMember]\n    public string FirstName { get; set; }\n\n    [DataMember]\n    public string LastName { get; set; }\n}\n\n[ServiceContract]\npublic interface ITestService\n{\n    [OperationContract(Action = TestService.RequestAction3)]\n    void AddNewPerson(Message newPerson);\n\npublic void AddNewPerson(Message newPerson)\n{\n    Person personToAdd = newPerson.GetBody&lt;Person&gt;();\n    Employees.Persons.Add(personToAdd);\n}\n</code></pre>\n\n<p>2) Client side:</p>\n\n<pre><code>TestServiceClient client = new TestServiceClient();\n\nString RequestAction3 = \"http://localhost:4249/Message_RequestAction3\";\nTestService.Person person = new TestService.Person\n{\n    Id = 6,\n    FirstName = \"Aleksey\",\n    LastName = \"Alekseyev\"\n};\n\nMessage request3 = Message.CreateMessage(MessageVersion.Default, RequestAction3, person);\nstring soapRequest = request3.ToString();\nclient.AddNewPerson(request3);\n</code></pre>\n\n<p>What's the problem here? I have Person class (data contract) on service side that is placed in TestService namespace: TestService.Person. Everything is fine on service side. But after I added service reference to client side by using \"Add Service Reference...\" option in VS2008, there's no such a type (TestService.Person) on client side. What I did to resolve this issue? I've simply copied the file with original data contract (TestService.Person) on client side, created object of Person type and passed it to the service method.</p>\n\n<p>My question is - did I do it in correct way or there is another way to do this?</p>\n\n<p>Thank you in advance.</p>\n\n<p>Goran</p>\n"},{"tags":["wcf","iis-7.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12853354,"title":"How will WCF Service hosted in IIS7.5 react to the requests for which client terminates connection","body":"<p>I have two WCF services, ServiceA and ServiceB.  Both are hosted in IIS7.5 in different machines.</p>\n\n<p>ServiceA is calling ServiceB, while ServiceB is processing the requests ServiceA terminates connection (due to IIS reset or some other reason) . </p>\n\n<p>Now question is how will ServiceB react to those requests and how will that impact ServiceB worker process? </p>\n"},{"tags":["wcf","mini-profiler"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12838149,"title":"mini profiler WCF","body":"<p>I am trying to use mini profiler with WCF. \nI keep getting a 404 error: </p>\n\n<pre><code>http://website/mini-profiler-resources/results\n</code></pre>\n\n<p>There are no results being returned.</p>\n\n<p>I am using two versions of the mini profiler. The NUGET version which doesn't include support for WCF works just fine.</p>\n\n<p>I downloaded the git version so that I can use the WCF integration.\nI note that if I run the test project included in the sources 'Sample.Mvc' the same error occurs when the home page is executed, but not for some of the links. I cannot seem to get results for any of my own web site pages. The same 404 occurs.</p>\n\n<p>I have downloaded the master version. I am using .NET 4.0 and studio 2010.</p>\n\n<p><em>I have the following in the config file, I have tried with and without the handlers.</em></p>\n\n<pre><code>  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n    &lt;handlers&gt;\n      &lt;add name=\"MiniProfiler\" path=\"mini-profiler-resources/*\" verb=\"*\" type=\"System.Web.Routing.UrlRoutingModule\" resourceType=\"Unspecified\" preCondition=\"integratedMode\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n</code></pre>\n\n<p><em>I am definitely calling the start and stop methods.</em></p>\n\n<pre><code>StackExchange.Profiling.MiniProfiler.Stop();\n</code></pre>\n\n<p>I have read this: <a href=\"http://stackoverflow.com/questions/6497180/mvcminiprofiler-results-request-giving-404-in-asp-net-mvc-app\">MvcMiniProfiler results request giving 404 in Asp.Net MVC app</a></p>\n\n<p>It did not help.</p>\n\n<p><strong>I have found a clue as to the problem</strong></p>\n\n<p>The following code in miniprofiler is returning NotFound\nThe profiler is expecting some kind of guid value to be present, and it isn't.</p>\n\n<pre><code>private static string Results(HttpContext context) {\n\n    // this guid is the MiniProfiler.Id property\n    Guid id;\n    if (!Guid.TryParse(context.Request[\"id\"], out id))\n       return isPopup ? NotFound(context) : NotFound(context, \"text/plain\", \"No Guid id specified on the query string\");\n</code></pre>\n\n<p><strong>temporary fix</strong></p>\n\n<p>I took out the code above, and just collected the first guid out of storage, and this fixed the problem. I think this code needs cleaning up. I need to learn GIT, and then try and clean it up myself.</p>\n\n<pre><code>var id = MiniProfiler.Settings.Storage.List(10).FirstOrDefault();\n</code></pre>\n"},{"tags":["android","wcf","image","uploading"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":168,"score":0,"question_id":11581096,"title":"When upload image file to wcf from android, the image file is broken","body":"<p>I could not post my good question document.\nBecause, I am new here, So I can't add any image on the post. It is so bad.</p>\n\n<p>Anyway, I try to explain without the images.</p>\n\n<p>I send image file like bottom source code from android. It sends to WCF as stream. There is no problem on it.</p>\n\n<pre><code>File file = new File(path);\nFileBody bin = new FileBody(file);\nDefaultHttpClient httpClient = new DefaultHttpClient();         \nHttpPost postRequest = new HttpPost(this.SERVICE_URI);\nMultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);\nreqEntity.addPart(\"imageData\", bin);\npostRequest.setEntity(reqEntity);\nHttpResponse response = httpClient.execute(postRequest);\n</code></pre>\n\n<p>When I want to see the uploaded file on the server, The widows cannot open.\nFirst, I open the original file property. And I can see all properties of image like width,height, dpi.</p>\n\n<p>But when I open the uploaded image file property, I can see only size of the file.\nAnd then I want to see the files on notepade.\nThere is difference between the original file and uploaded file.\nThat is</p>\n\n<pre><code>--kpKP7FRpS5aYCWRNH0NHd0tGRj7hs2QYhVai_\nContent-Disposition: form-data; name=\"imageData\"; filename=\"ty-uz.jpg\"\nContent-Type: application/octet-stream\n</code></pre>\n\n<p>And then I see a tag too on bottom of file as     --kpKP7FRpS5aYCWRNH0NHd0tGRj7hs2QYhVai_--</p>\n\n<p>Android adds the tags on the original image file before sending, And then I can't see it as image.\nSo What is the problem? I use same WCF on silverlight application, IT runs very well. No problem. Image files uploads orginialy. </p>\n\n<p>But My android application adds the tags in the image file. What is the problem?</p>\n\n<p>Thank you already now...</p>\n"},{"tags":["android","wcf","web-services","crud"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12851589,"title":"Need to receive array string from WCF WebService in Android & display in ListView","body":"<p>i really need your help in WCF Web service &amp; android.\nWCF web service Example\n        public String[] checkLogin(string userName, string password)\n        {\n            string[] result;\n            result = new string[] { \"One\", \"Two\", \"Three\", \"Four\" };\n            return result;\n        }</p>\n\n<p>I need to populate this String array value in Listview (androd site).\nAnybody have any example.Thanks in advance.</p>\n"},{"tags":["asp.net","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12850662,"title":"Deploy WCF Web Service in IIS 7 - Getting Error","body":"<p>I'm trying to add a service reference in VS 2010 to a WCF Web Service I have on a Server 2008/IIS7 server.  I put the service into an existing/working ASP.NET site.  When I type in the url of the service, it comes up with the standard service screen, but when I try to add the reference to a new website project I'm developing, I get the following error. </p>\n\n<p>The document at the url <a href=\"https://www.nameofsite.net/service.svc?wsdl\" rel=\"nofollow\">https://www.nameofsite.net/service.svc?wsdl</a> was not recognized as a known document type.\nThe error message from each known type may help you fix the problem:\n- Report from 'XML Schema' is 'The document format is not recognized (the content type is 'text/html; charset=UTF-8').'.\n- Report from 'https://www.nameofsite.net/service.svc?wsdl' is 'The document format is not recognized (the content type is 'text/html; charset=UTF-8').'.\n- Report from 'DISCO Document' is 'Discovery document at the URL <a href=\"https://www.nameofsite.net/Service.svc?disco\" rel=\"nofollow\">https://www.nameofsite.net/Service.svc?disco</a> could not be found.'.\n  - The document format is not recognized.\n- Report from 'WSDL Document' is 'The document format is not recognized (the content type is 'text/html; charset=UTF-8').'.\nMetadata contains a reference that cannot be resolved: 'https://www.nameofsite.net/service.svc?wsdl'.\nThere was no endpoint listening at <a href=\"https://www.nameofsite.net/service.svc?wsdl\" rel=\"nofollow\">https://www.nameofsite.net/service.svc?wsdl</a> that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.\nThe remote server returned an error: (404) Not Found.\nIf the service is defined in the current solution, try building the solution and adding the service reference again.</p>\n\n<p>I tried adding the mime type svc to IIS and that didn't work. I see that there's a lot of talk about soap 1.1 not communicating with soap 1.2 but I'm too new to this to even follow the instructions I've seen. Please help. Thanks.</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":985,"score":0,"question_id":9853483,"title":"The binding at system.serviceModel/bindings/wsHttpBinding does not have... error","body":"<p>I am trying to include two endpoints in my WCF web based service - wsHttp and netTcp.\nAs shown in the <code>Web.config</code> below I have added them, but receive the following error when when I compile and click on Service.svc in my web browser: </p>\n\n<p><strong>Error page:</strong></p>\n\n<pre><code>Server Error in '/MyService' Application. Configuration Error Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately.\n\nParser Error Message: The binding at system.serviceModel/bindings/wsHttpBinding does not have a configured binding named 'wsHttpBinding'. This is an invalid value for bindingConfiguration.\n\nSource Error:\n\nLine 16: &lt;/baseAddresses&gt; Line 17:         &lt;/host&gt;  Line 18:  &lt;endpoint address=\"http://localhost:8090/Services/MyService\" Line 19:                   binding=\"wsHttpBinding\" Line 20:                 bindingConfiguration=\"wsHttpBinding\"\n\n\nSource File: C:\\MyService\\web.config    Line: 18\n\nVersion Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.1\n</code></pre>\n\n<p><strong>Web.config:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"false\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;protocolMapping&gt;\n      &lt;add scheme=\"http\" binding=\"wsHttpBinding\"/&gt;\n    &lt;/protocolMapping&gt;\n    &lt;services&gt;\n      &lt;service\n        name=\"Microsoft.ServiceModel.Samples.MyService\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"net.tcp://localhost:9001/\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"http://localhost:8090/Services/MyService\"\n                  binding=\"wsHttpBinding\"\n                  bindingConfiguration=\"wsHttpBinding\"\n                  name=\"MyService_WsHttp\"\n                  contract=\"Microsoft.ServiceModel.Samples.IService\" /&gt;\n        &lt;endpoint address=\"net.tcp://localhost:9000/Services/MyService\"\n                  binding=\"netTcpBinding\"\n                  bindingConfiguration=\"tcpBinding\"\n                  name=\"MyService_Tcp\"\n                  contract=\"Microsoft.ServiceModel.Samples.IService\" /&gt;    \n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf","saml","claims-based-identity","acs","adfs2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12813003,"title":"Call a WCF service protected by ACS, which uses ADFS as IDP","body":"<p><a href=\"http://bit.ly/VNwCwk\" rel=\"nofollow\">Following this post</a> I have created a WCF client which:</p>\n\n<ol>\n<li>Uses ADFS to authenticate users against AD.</li>\n<li>Provides a SAML2 ticket to the caller.</li>\n<li>Uses the supplied SAML2 ticket to call the WCF Service.</li>\n</ol>\n\n<p>This is working great, however the next part of my problem is to extend this to use Azure ACS.</p>\n\n<p>I added the RP to ACS, and changed the STS reference to point to ACS using <code>Add STS Reference</code> in Visual studio.</p>\n\n<p>I have extended the <code>Token.GetToken</code> method, supplying the token into the following method:</p>\n\n<pre><code>public static SecurityToken GetToken(SecurityToken adfsToken, string appliesTo, string idpEndpointAddress, out RequestSecurityTokenResponse rsts)\n{\n    WS2007HttpBinding binding = new WS2007HttpBinding();\n    binding.Security.Message.EstablishSecurityContext = false;\n    binding.Security.Mode = SecurityMode.TransportWithMessageCredential;\n\n    WSTrustChannelFactory trustChannelFactory = new WSTrustChannelFactory(binding, new EndpointAddress(idpEndpointAddress));\n    trustChannelFactory.TrustVersion = TrustVersion.WSTrust13;\n    trustChannelFactory.ConfigureChannelFactory();\n\n    // Create issuance issuance and get security token \n    RequestSecurityToken requestToken = new RequestSecurityToken(WSTrust13Constants.RequestTypes.Issue);\n    requestToken.AppliesTo = new EndpointAddress(appliesTo);\n    WSTrustChannel tokenClient = (WSTrustChannel)trustChannelFactory.CreateChannelWithIssuedToken(adfsToken);\n    SecurityToken token = tokenClient.Issue(requestToken, out rsts);\n    return token;\n}\n</code></pre>\n\n<p>To the following endpoint:</p>\n\n<pre><code>https://test.accesscontrol.windows.net/v2/wstrust/13/issuedtoken-symmetric\n</code></pre>\n\n<p>But I get the following exception:</p>\n\n<blockquote>\n  <p>Secure channel cannot be opened because security negotiation with the\n  remote endpoint has failed. This may be due to absent or incorrectly\n  specified EndpointIdentity in the EndpointAddress used to create the\n  channel. Please verify the EndpointIdentity specified or implied by\n  the EndpointAddress correctly identifies the remote endpoint.</p>\n</blockquote>\n\n<p>With an inner exception of:</p>\n\n<blockquote>\n  <p>ACS10001: An error occurred while processing the SOAP header. </p>\n</blockquote>\n\n<ol>\n<li>What do I need to configure in ACS to get this working with the token supplied by ADFS?</li>\n<li>Do I need to use the token supplied by ACS, or can I use the one supplied by ADFS in the service? (It appears to be working..)</li>\n</ol>\n"},{"tags":["wcf","silverlight-4.0","wcf-ria-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12843756,"title":"datacontract property becomes readonly at client side - WCF RIA","body":"<p>Here is a DataContract in WCF RIA Services Layer...</p>\n\n<pre><code>[Serializable()]\n[DataContract]\npublic class MyDataSet\n{\n    [Include]\n    [Association(\"ListTables\", \"DataSetName\", \"DataSetName\")]\n    [DataMember]\n    public Collection&lt;DataTableInfo&gt; Tables { get; set; }\n\n    [Key]\n    [DataMember]\n    public string DataXML { get; set; }\n\n    [DataMember]\n    public string DataSetName { get; set; }\n}\n</code></pre>\n\n<p>On the client side, in a view model, I create a new instance of this DataContract and tries to assign any values to the Tables property, I get ans error that this property is readonly. </p>\n\n<p>I need to understand the reason and a workaround of this issue...</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf","rest","webhttpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":129,"score":1,"question_id":12830756,"title":"wsHttpBinding not working in a WCF service selfhosted; SOAP-based bindings do work","body":"<p>I have a simple WCF Service shown below.</p>\n\n<pre><code>[ServiceContract]\npublic interface IService1\n{\n    [OperationContract]\n    [WebInvoke(Method = \"POST\", BodyStyle = WebMessageBodyStyle.WrappedRequest)]\n    string GetData(int value);\n}\n\npublic class Service1 : IService1\n{\n    public string GetData(int value)\n    {\n        return string.Format(\"You entered: {0}\", value);\n    }\n}\n</code></pre>\n\n<p>The server Web.config file is</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;appSettings&gt;\n    &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n&lt;/appSettings&gt;\n\n&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;endpointBehaviors&gt;\n            &lt;behavior name=\"webHttpEndpointBehavior\"&gt;\n                &lt;webHttp faultExceptionEnabled=\"true\" /&gt;\n            &lt;/behavior&gt;\n        &lt;/endpointBehaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"serviceBehaviourDebug\"&gt;\n                &lt;!-- To avoid disclosing metadata information, set the values below to false before deployment --&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n                &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.\n                     Set to false before deployment to avoid disclosing exception information --&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;services&gt;\n        &lt;service name=\"Diws.Service1\" behaviorConfiguration=\"serviceBehaviourDebug\"&gt;\n            &lt;endpoint\n                address=\"/basicHttp\"\n                binding=\"basicHttpBinding\"\n                contract=\"Diws.IService1\"/&gt;\n            &lt;endpoint\n                address=\"/webHttp\"\n                binding=\"webHttpBinding\"\n                behaviorConfiguration=\"webHttpEndpointBehavior\"\n                contract=\"Diws.IService1\"/&gt;\n            &lt;endpoint\n                address=\"/wsHttp\"\n                binding=\"wsHttpBinding\"\n                contract=\"Diws.IService1\"/&gt;\n            &lt;endpoint\n                address=\"mex\"\n                binding=\"mexHttpBinding\"\n                contract=\"IMetadataExchange\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n&lt;/system.serviceModel&gt;\n\n&lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\"/&gt;\n&lt;/system.web&gt;\n\n&lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n    &lt;!--\n    To browse web app root directory during debugging, set the value below to true.\n    Set to false before deployment to avoid disclosing web app folder information.\n    --&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n&lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>The client is a console app whose App.config is this.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n&lt;startup&gt; \n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5\" /&gt;\n&lt;/startup&gt;\n\n&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;endpointBehaviors&gt;\n            &lt;behavior name=\"webHttpEndpointBehavior\"&gt;\n                &lt;webHttp /&gt;\n            &lt;/behavior&gt;\n        &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_IService1\" /&gt;\n        &lt;/basicHttpBinding&gt;\n        &lt;wsHttpBinding&gt;\n            &lt;binding name=\"WsHttpBinding_IService1\" /&gt;\n        &lt;/wsHttpBinding&gt;\n        &lt;webHttpBinding&gt;\n            &lt;binding name=\"WebHttpBinding_IService1\" /&gt;\n        &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n\n    &lt;client&gt;\n        &lt;endpoint\n            address=\"http://localhost:50001/Service1.svc/basicHttp\"\n            binding=\"basicHttpBinding\"\n            bindingConfiguration=\"BasicHttpBinding_IService1\"\n            contract=\"ServiceReference1.IService1\"\n            name=\"BasicHttpEndpoint_IService1\" /&gt;\n        &lt;endpoint\n            address=\"http://localhost:50001/Service1.svc/webHttp\"\n            behaviorConfiguration=\"webHttpEndpointBehavior\"\n            binding=\"webHttpBinding\"\n            bindingConfiguration=\"WebHttpBinding_IService1\"\n            contract=\"ServiceReference1.IService1\"\n            name=\"WebHttpEndpoint_IService1\" /&gt;\n        &lt;endpoint\n            address=\"http://localhost:50001/Service1.svc/wsHttp\"\n            binding=\"wsHttpBinding\"\n            bindingConfiguration=\"WsHttpBinding_IService1\"\n            contract=\"ServiceReference1.IService1\"\n            name=\"WsHttpEndpoint_IService1\"/&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n\n&lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\"/&gt;\n&lt;/system.web&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And the client program is this.</p>\n\n<pre><code>class Program\n{\n    static void Main(String[] args)\n    {\n        String response = \"\";\n\n        Service1Client basicHttpClient = new Service1Client(\"BasicHttpEndpoint_IService1\");\n        response = basicHttpClient.GetData(10);\n        basicHttpClient.Close();\n        Console.WriteLine(response);\n\n        ///* Some communication exception\n        Service1Client webHttpClient = new Service1Client(\"WebHttpEndpoint_IService1\");\n        response = webHttpClient.GetData(20);\n        webHttpClient.Close();\n        Console.WriteLine(response);\n        //*/\n\n        Service1Client wsHttpClient = new Service1Client(\"WsHttpEndpoint_IService1\");\n        response = wsHttpClient.GetData(30);\n        wsHttpClient.Close();\n        Console.WriteLine(response);\n\n        Console.WriteLine();\n        Console.WriteLine(\"Done\");\n        Console.ReadLine();\n    }\n}\n</code></pre>\n\n<p>The basicHttpClient and the wsHttpClient work perfectly.  However, the webHttpClient throws the exception \"System.ServiceModel.CommunicationException was unhandled, HResult=-2146233087, Message=Internal Server Error\"</p>\n\n<p>I cannot debug on the servers side as Visual Studio 2012 says\n\"Unable to automatically debug 'MyProject'. The remote procedure could not be debugged. This usually indicates that debugging has not been enabled on the server.\"</p>\n\n<p>However, debugging is enabled.  I wasn't able to get any insights from using the SvcTraceViewer with diagnostics turned on.</p>\n\n<p>My main interest is figuring out why the REST call using WebHttpBinding is failing, but help getting server side debugging working would be appreciated as well.  I'm debugging both the client and the server in VS2012 using multiple startup projects.  Localhost is the only server involved.</p>\n\n<p>I understand that the REST endpoint won't show up in WcfTestClient since it provides no metadata exchange, but I expected to be able to call the service through that endpoint and I see no difference between my code and examples of calling RESTful WCF services.</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":12369165,"title":"baseAddresses in CreateServiceHost for WCF service","body":"<p>there is parameter called Uri[] baseAddresses when we create service host using CreateServiceHost method of ServiceHostFactory class.</p>\n\n<p>when this method will be called ? what will be the value in baseaddresses array ? from where it will be set ?</p>\n\n<p>can we set it from our end ?</p>\n\n<p>Thanks</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12848993,"title":"Wrong namespace on input parameter","body":"<p>This should be straight forward, but after a lot of forum browsing I still havent found a solution. Here goes:</p>\n\n<p>I have a fairly simple Interface defined like this:</p>\n\n<pre><code>[ServiceContract(Namespace = \"test-contract\")]\npublic interface IDebitor : Source.BaseInterface.IBase\n{\n    [OperationContract]\n    DebitorResult CreateUpdateDebitorPerson(DebitorPerson person)\n}\n\n[DataContract(Namespace = \"test-person\")]\npublic class DebitorPerson\n{\n    #region FIELDS\n\n    // Line\n    string senderSystemId;\n    string firstName;\n    string lastName;\n    string address1;\n    string address2;\n    string postalCode;\n    string city;\n    string areaCode;\n    string cprNumber;\n    string payingCustomerId;\n    string paymentCode;\n    string languageCode;\n\n    #endregion\n\n    #region Propperties\n\n    [DataMember(IsRequired = true, Order = 1)]\n    public string SenderSystemId\n    {\n        get { return senderSystemId; }\n        set { senderSystemId = value; }\n    }\n\n\n    [DataMember(IsRequired = true)]\n    public string FirstName\n    {\n        get { return firstName; }\n        set { firstName = value; }\n    }\n\n    [DataMember(IsRequired = true)]\n    public string LastName\n    {\n        get { return lastName; }\n        set { lastName = value; }\n    }\n\n    [DataMember(IsRequired = true)]\n    public string Address1\n    {\n        get { return address1; }\n        set { address1 = value; }\n    }\n\n    [DataMember(IsRequired = false)]\n    public string Address2\n    {\n        get { return address2; }\n        set { address2 = value; }\n    }\n\n    [DataMember(IsRequired = true)]\n    public string PostalCode\n    {\n        get { return postalCode; }\n        set { postalCode = value; }\n    }\n\n    [DataMember(IsRequired = true)]\n    public string City\n    {\n        get { return city; }\n        set { city = value; }\n    }\n\n    [DataMember(IsRequired = true)]\n    public string AreaCode\n    {\n        get { return areaCode; }\n        set { areaCode = value; }\n    }\n\n    [DataMember(IsRequired = true)]\n    public string CprNumber\n    {\n        get { return cprNumber; }\n        set { cprNumber = value; }\n    }\n\n    [DataMember(IsRequired = false)]\n    public string PayingCustomerId\n    {\n        get { return payingCustomerId; }\n        set { payingCustomerId = value; }\n    }\n\n\n    [DataMember(IsRequired = true)]\n    public string PaymentCode\n    {\n        get { return paymentCode; }\n        set { paymentCode = value; }\n    }\n\n    [DataMember(IsRequired = false)]\n    public string LanguageCode\n    {\n        get { return languageCode; }\n        set { languageCode = value; }\n    }\n\n    #endregion\n}\n</code></pre>\n\n<p>The service run just fine, but the corresponding soap xml is not what I exspected. </p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:test=\"test-contract\" xmlns:test1=\"test-person\"&gt;\n   &lt;soapenv:Header/&gt;\n   &lt;soapenv:Body&gt;\n      &lt;test:CreateUpdateDebitorPerson&gt;\n         &lt;!--Optional:--&gt;\n         &lt;test:person&gt;\n            &lt;test1:Address1&gt;&lt;/test1:Address1&gt;\n            &lt;!--Optional:--&gt;\n            &lt;test1:Address2&gt;&lt;/test1:Address2&gt;\n            &lt;test1:AreaCode&gt;&lt;/test1:AreaCode&gt;\n            &lt;test1:City&gt;&lt;/test1:City&gt;\n            &lt;test1:CprNumber&gt;&lt;/test1:CprNumber&gt;\n            &lt;test1:FirstName&gt;&lt;/test1:FirstName&gt;\n            &lt;!--Optional:--&gt;\n            &lt;test1:LanguageCode&gt;&lt;/test1:LanguageCode&gt;\n            &lt;test1:LastName&gt;&lt;/test1:LastName&gt;\n            &lt;!--Optional:--&gt;\n            &lt;test1:PayingCustomerId&gt;&lt;/test1:PayingCustomerId&gt;\n            &lt;test1:PaymentCode&gt;&lt;/test1:PaymentCode&gt;\n            &lt;test1:PostalCode&gt;&lt;/test1:PostalCode&gt;\n            &lt;test1:SenderSystemId&gt;&lt;/test1:SenderSystemId&gt;\n         &lt;/test:person&gt;\n      &lt;/test:CreateUpdateDebitorPerson&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>Why does the element  belongs to test-contract and not testperson as defines in the interface? Can someone help me out here?  </p>\n"},{"tags":["wcf","exception","configuration","wcf-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12847622,"title":"WCF Address Already In Use after adding client endpoint","body":"<p>I have a WCF Service that is self hosted and started through another service. Debugging in visual studio, they work just fine until I add endpoint configurations to my <code>app.config</code> for the service clients. Some clients for this service will be local and others remote. I have tried only having client endpoints for named pipes, if there's a client endpoint pointing to the service, and a client using the endpoint (even though it shouldn't even be instantiated at the point the service tries to start) I get an exception telling me that 0.0.0.0:8524 is in use. Here's the relevant configuration:</p>\n\n<pre><code>&lt;service name=\"EventService.EventPublishingService\"&gt;\n        &lt;clear /&gt;\n        &lt;endpoint binding=\"netTcpBinding\" address=\"net.tcp://localhost:8524/EventPublishingService\" contract=\"EventService.Contracts.IEventPublishService\"&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"net.tcp://localhost:8524/EventPublishingService/mex\" binding=\"mexTcpBinding\" contract=\"IMetadataExchange\"&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"net.pipe://localhost/EventPublishingServicePipe\"\n           binding=\"netNamedPipeBinding\" contract=\"EventService.Contracts.IEventPublishService\"\n           listenUriMode=\"Explicit\"&gt;\n        &lt;/endpoint&gt;\n        &lt;host&gt;\n        &lt;/host&gt;\n     &lt;/service&gt;\n</code></pre>\n\n<p>For client endpoints I have tried both</p>\n\n<pre><code>&lt;endpoint address=\"net.tcp://localhost:8524/EventPublishingService\"\n            binding=\"netTcpBinding\" bindingConfiguration=\"NetTcpBinding_IEventPublishService\"\n            contract=\"AGX.Atlas.EventService.Contracts.IEventPublishService\" name=\"NetTcpBinding_IEventPublishService\"&gt;\n         &lt;/endpoint&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;endpoint address=\"net.pipe://localhost/EventPublishingServicePipe\"\n        binding=\"netNamedPipeBinding\" bindingConfiguration=\"NetNamedPipeBinding_IEventPublishService\"\n        contract=\"AGX.Atlas.EventService.Contracts.IEventPublishService\" name=\"NetNamedPipeBinding_IEventPublishService\"&gt;\n     &lt;/endpoint&gt;\n</code></pre>\n\n<p>I've removed the net.pipe binding from the service when removing the client binding as well to make sure it wasn't doing something weird with that. Still the same issue.</p>\n\n<p>Here's the binding configurations:</p>\n\n<pre><code> &lt;netNamedPipeBinding&gt;\n        &lt;binding name=\"NetNamedPipeBinding_IEventPublishService\" closeTimeout=\"00:01:00\"\n           openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n           transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\"\n           hostNameComparisonMode=\"StrongWildcard\" maxBufferPoolSize=\"524288\"\n           maxBufferSize=\"65536\" maxConnections=\"10\" maxReceivedMessageSize=\"65536\"&gt;\n           &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n           &lt;security mode=\"Transport\"&gt;\n              &lt;transport protectionLevel=\"EncryptAndSign\" /&gt;\n           &lt;/security&gt;\n        &lt;/binding&gt;\n     &lt;/netNamedPipeBinding&gt;\n     &lt;netTcpBinding&gt;\n        &lt;binding name=\"NetTcpBinding_IEventPublishService\" closeTimeout=\"00:01:00\"\n           openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n           transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\"\n           hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"10\"\n           maxBufferPoolSize=\"524288\" maxBufferSize=\"65536\" maxConnections=\"10\"\n           maxReceivedMessageSize=\"65536\"&gt;\n           &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n           &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n              enabled=\"false\" /&gt;\n           &lt;security mode=\"Transport\"&gt;\n              &lt;transport clientCredentialType=\"Windows\" protectionLevel=\"EncryptAndSign\" /&gt;\n              &lt;message clientCredentialType=\"Windows\" /&gt;\n           &lt;/security&gt;\n        &lt;/binding&gt;\n        &lt;binding name=\"NetTcpBinding_IEventSubscriptionService\" closeTimeout=\"00:01:00\"\n           openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n           transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\"\n           hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"10\"\n           maxBufferPoolSize=\"524288\" maxBufferSize=\"65536\" maxConnections=\"10\"\n           maxReceivedMessageSize=\"65536\"&gt;\n           &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n              maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n           &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n              enabled=\"false\" /&gt;\n           &lt;security mode=\"Transport\"&gt;\n              &lt;transport clientCredentialType=\"Windows\" protectionLevel=\"EncryptAndSign\" /&gt;\n              &lt;message clientCredentialType=\"Windows\" /&gt;\n           &lt;/security&gt;\n        &lt;/binding&gt;\n     &lt;/netTcpBinding&gt;\n</code></pre>\n"},{"tags":["c#","wcf","mono"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":377,"score":0,"question_id":5642867,"title":"400 Bad Request (Invalid Host) using WCF and mono","body":"<p>I am getting a <code>Bad Request (Invalid host)</code> when trying to run my C# WCF service under mono.  This service is part of an application, not being hosted using a web server.</p>\n\n<p>I have configured my services with the following:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n  &lt;behaviors&gt;\n    &lt;serviceBehaviors&gt;\n      &lt;behavior name=\"DefaultServiceBehavior\"&gt;\n        &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n        &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n      &lt;/behavior&gt;\n    &lt;/serviceBehaviors&gt;\n  &lt;/behaviors&gt;\n\n  &lt;services&gt;\n    &lt;service behaviorConfiguration=\"DefaultServiceBehavior\" name=\"MyServices.TaskService\"&gt;\n      &lt;endpoint address=\"V1\" binding=\"basicHttpBinding\" contract=\"MyServices.ITaskServiceV1\" /&gt;\n      &lt;host&gt;\n        &lt;baseAddresses&gt;\n          &lt;add baseAddress=\"http://localhost:8731/MyServices/Tasks\" /&gt;\n        &lt;/baseAddresses&gt;\n      &lt;/host&gt;\n    &lt;/service&gt;\n  &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>When I try to visit <code>http://localhost:8731/MyServices/Tasks</code> or any of its endpoints (including <code>?wsdl</code>), I get the 400 error.</p>\n\n<p>I have deployed this successfully using the .net runtime, just can't figure out what's wrong for deploying with mono.  Any help would be greatly appreciated.</p>\n\n<p><strong>EDIT</strong> Mono version: 2.10.1</p>\n"},{"tags":["wcf","security","http","username"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12828295,"title":"WCF custom userName authentication using HTTP","body":"<p>I am trying to configure my WCF service to use a custom username validator over HTTP and my ASP.NET Development server.   Following are the parts of the serviceModel...</p>\n\n<pre><code>&lt;basicHttpBinding&gt;\n    &lt;binding name=\"Authentication\" &gt;\n      &lt;security mode=\"TransportCredentialOnly\" &gt;\n        &lt;message clientCredentialType=\"UserName\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n&lt;/basicHttpBinding&gt;\n\n  &lt;service behaviorConfiguration=\"ApiBehavior\" name=\"CriticalWatch.AuthenticationAPI.AuthenticationAPI\"&gt;\n    &lt;endpoint address=\"/\" binding=\"basicHttpBinding\" bindingConfiguration=\"AuthenticationBinding\" name=\"Authentication\" contract=\"CriticalWatch.AuthenticationAPI.IAuthenticationAPI\" /&gt;\n  &lt;/service&gt;\n</code></pre>\n\n<p>I then have a behavior for the validator...</p>\n\n<pre><code>  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"ApiBehavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n      &lt;serviceCredentials&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"Service.CustomUserNameValidator, MyService\" /&gt;\n      &lt;/serviceCredentials&gt;\n\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n</code></pre>\n\n<p>My CustomUserNameValidator inherits from the  UserNamePasswordValidator.  The validator class gets instantiated,  but the Validate method is never called.  Plus, the client can call the method without passing any username and password.</p>\n\n<p>What am I missing?</p>\n\n<p>At this time, I want a solution that does not require HTTPS.   I want to rely on the username and password passed with the message.</p>\n"},{"tags":["wcf","tfs2010","tfs-sdk"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":126,"score":2,"question_id":12846047,"title":"TFS 2010 WorkItem Client - Method not found exception","body":"<p>I have deployed a custom TFS eventpoint to our production webserver. The server does not have the TFS sdk installed so I had to find and bin deploy all dependant dlls. For some reason, when the application tries to contact TFS using the TFS client, it is thrown a missing method exception only on the server. Does anyone know how to get this web service running on a system without installing the full SDK?</p>\n\n<p>The bin deployed TFS dlls</p>\n\n<ul>\n<li>Microsoft.TeamFoundation.Client.dll</li>\n<li>Microsoft.TeamFoundation.Common.dll</li>\n<li>Microsoft.TeamFoundation.Common.Library.dll</li>\n<li>Microsoft.TeamFoundation.dll</li>\n<li>Microsoft.TeamFoundation.WorkItemTracking.Client.Cache.dll</li>\n<li>Microsoft.TeamFoundation.WorkItemTracking.Client.DataStore.dll</li>\n<li>Microsoft.TeamFoundation.WorkItemTracking.Client.dll</li>\n<li>Microsoft.TeamFoundation.WorkItemTracking.Proxy.dll</li>\n</ul>\n\n<p>The Exception</p>\n\n<pre><code>System.MissingMethodException: Method not found: 'Boolean Microsoft.TeamFoundation.Client.TfsConnection.HandleUnauthorizedException(Microsoft.TeamFoundation.TeamFoundationServerUnauthorizedException)'.\n   at Microsoft.TeamFoundation.WorkItemTracking.Client.DataStore.HandleComException(Int32 hr)\n   at Microsoft.TeamFoundation.WorkItemTracking.Client.DataStore.DatastoreClass.ConnectEx(String connectionString, String defaultCachePath, String instanceId, String userSamName, String userFriendlyName, String userSid, WorkItemServer clientService)\n   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore.InitializeInternal()\n   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore.Microsoft.TeamFoundation.Client.ITfsTeamProjectCollectionObject.Initialize(TfsTeamProjectCollection teamProjectCollection)\n   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore..ctor(TfsTeamProjectCollection teamProjectCollection)\n</code></pre>\n"},{"tags":[".net","wcf","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12846314,"title":"How to access the WebServices hosted on IIS 7.5","body":"<p>I have the requirement to use the web services hosted in the above environment.</p>\n\n<p>I have used the web services in my application by referencing them by adding Add web Reference  in Visual Studio project</p>\n\n<p>How to consume the web service hosted in the internet?</p>\n\n<p>What are the all details I need to consume it. I am very comfortable with WCF.</p>\n"},{"tags":[".net","wcf"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":783,"score":1,"question_id":2383380,"title":".NET: How to binary serialize an object with attribute [DataContract]?","body":"<p>Class marked as [DataContract] can't be ISerializable at the same time. OK, so how can I serialize this type of object to a binary stream?</p>\n\n<pre><code>private byte[] GetRoomAsBinary(Room room)\n        {\n            MemoryStream stream = new MemoryStream();\n            BinaryFormatter bf = new BinaryFormatter();\n            bf.Serialize(stream, room);\n            return stream.ToArray();\n        }\n</code></pre>\n\n<p>I can't make it work without Room being ISerializable.\nHow can I get a byte array from object some other way?</p>\n"},{"tags":["jquery",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12844982,"title":"Upload a complex object to a WCF REST Service from JQuery","body":"<p>I'm trying to upload a complex object to my WCF REST service. I'm doing this because it seems to be the easiest way to upload a Stream type object and other parameters to a endpoint at the same time.  </p>\n\n<p>Service:</p>\n\n<pre><code>[OperationContract]\n[WebInvoke(Method = \"POST\",\n    BodyStyle = WebMessageBodyStyle.Bare,\n    RequestFormat = WebMessageFormat.Json,\n    ResponseFormat = WebMessageFormat.Json,\n    UriTemplate = \"Upload\")]\npublic string upload(UploadObject uploadObject)\n{\n    return uploadObject.stream.ToString() + \" \" + uploadObject.guid; \n}\n\n[DataContract]\npublic class UploadObject\n{\n    [DataMember]\n    public Stream stream { get; set; }\n    [DataMember]\n    public string guid { get; set; }\n}\n</code></pre>\n\n<p>JQuery</p>\n\n<pre><code>var guid = getParameterByName(\"guid\");  //&lt;--gets value from query string parameter\nvar file = $('#btnUpload').val();  //&lt;--value from a file input box\nvar uploadObject = { stream: file, guid: guid };\n\n$.ajax({\n    type: \"POST\",            \n    contentType: \"application/json\",\n    url: \"localhost/service/Upload\", \n    data: uploadObject,\n    datatype: \"jsonp\",\n    processData : false,          \n    success: function(data){\n        alert(data);\n    },\n    error: function (xhr, status, error) {\n        alert(\"fail\");\n    }\n});\n</code></pre>\n"},{"tags":["asp.net","wcf","web-services","wsdl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12626921,"title":"Generating UI to test Web Service Operation","body":"<p>I am creating basic .NET webpages as a UI, to invoke WCF service and display the result. I feel many web developers must have come across this situation, earlier.</p>\n\n<p>Is there any existing tool out there, which could take WSDL as input and generate input fields either in HTML or .NET webpages.</p>\n"},{"tags":["wcf","soap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12827560,"title":"Easier way to Call a SOAP Service with Many Parameters?","body":"<p>My web services are rusty so I hope I'm just missing something kind of obvious.</p>\n\n<p>I have a WCF service that, in part, relays calls it receives to a third party SOAP service.  The service receives an object that matches the body of the SOAP message that needs to be sent.</p>\n\n<p>I've added a service reference based on the SOAP service's WSDL to the project and created and instance of the service proxy class.  The service method I want to call has 30+ parameters.</p>\n\n<p>I could call it with <code>MyService.TheMethod(obj.value1, obj.value2, obj.value3...)</code>, but it would be nice to just pass the original object on or XML serialize it and pass the XML as a body.</p>\n\n<p>Is there something that would allow an easier approach or do I need to individually pass obj's properties onto the SOAP method?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Clarifying the underlying issue.  </p>\n\n<p>My .NET service accepts something \"Group\"</p>\n\n<pre><code>public class Person { string Name; int Age;}\npublic class Group { string Name; Person[] Individuals; }\n</code></pre>\n\n<p>I then need to call the third party web service (TPWS).  The proxy class generated from the WSDL winds up like:</p>\n\n<pre><code>public class WSPerson { string Name; uint Age;}\npublic class WSGroup { string Name; WSPerson[] Individuals; }\n</code></pre>\n\n<p>I'd been doing earlier prototyping and working with the TPWS through SoapUI and using tags matching my original (.NET) classes' naming:</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ws=\"http://ws.myabc123.com\" xmlns:ns=\"http://schemas.datacontract.org/2004/07/\" xmlns:sys=\"http://schemas.datacontract.org/2004/07/System\" xmlns:arr=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\"&gt;\n   &lt;soapenv:Header&gt;\n      &lt;ws:ServiceCredentials&gt;\n         &lt;ws:SubscriberId&gt;ABC&lt;/ws:SubscriberId&gt;\n         &lt;ws:SubscriberUser&gt;Joe&lt;/ws:SubscriberUser&gt;\n         &lt;ws:SubscriberPassword&gt;12345&lt;/ws:SubscriberPassword&gt;\n         &lt;!--Optional:--&gt;\n         &lt;ws:SubscriberIdentityStore&gt;&lt;/ws:SubscriberIdentityStore&gt;\n      &lt;/ws:ServiceCredentials&gt;\n   &lt;/soapenv:Header&gt;\n   &lt;soapenv:Body&gt;\n    &lt;Group&gt;\n      &lt;Name&gt;Cool People&lt;/Name&gt;\n      &lt;Individuals&gt;\n        &lt;Person&gt;\n          &lt;Name&gt;Tom&lt;/Name&gt;\n          &lt;Age&gt;25&lt;/Age&gt;\n        &lt;/Person&gt;\n        &lt;Person&gt;\n          &lt;Name&gt;Jane&lt;/Name&gt;\n          &lt;Age&gt;27&lt;/Age&gt;\n        &lt;/Person&gt;\n      &lt;/Individuals&gt;\n    &lt;/Group&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt; \n</code></pre>\n"},{"tags":["wcf","nettcpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12843719,"title":"Cannot obtain Metadata from net.tcp://localhost/GeoLocationService/xxxxxxx","body":"<p>I'm building my first WCF service. It needs to basically work over http or https and also over TCPIP for our internal application to communicate with it. I've created a config file and intend to expose end points for mex data over both http and tcp. </p>\n\n<p>I've deployed the solution to iis on my local machine and made sure that the http port matches that of the service.</p>\n\n<p>The problem I have is with connecting the wcf test client via tcp. Now I'm running IIS 7.5 under windows 7 on my dev box but it can't see my meta data for tcp ip. The thing that confuses me is that if I visit <code>http://localhost:50831/GeoLocationService/PuppySearch.svc/mex</code> I get a blank page.</p>\n\n<p>I can only connect via the test client to <code>http://localhost:50831/GeoLocationService</code>/PuppySearch.svc</p>\n\n<p>Also, more importantly whenever I try to connect to net.tcp://localhost/GeoLocationService/puppysearch or net.tcp://localhost/puppysearch there is nothing there. Config listed below:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;webHttpBinding&gt;\n        &lt;binding name=\"jsonp\" crossDomainScriptAccessEnabled=\"true\" /&gt;\n        &lt;binding name=\"jsonpSsl\" crossDomainScriptAccessEnabled=\"true\"&gt;\n          &lt;security mode=\"Transport\" /&gt;\n        &lt;/binding&gt;\n      &lt;/webHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"DefaultBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"HttpsBehavior\"&gt;\n            &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"false\" httpsGetUrl=\"\"/&gt;\n        &lt;/behavior&gt;\n        &lt;behavior name=\"SimpleAddMEXBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service name=\"WcfServiceGeolocation.PuppySearch\" behaviorConfiguration=\"DefaultBehavior\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://localhost:50831/GeoLocationService/puppysearch\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint name=\"GeneralSearch\"\n                  address=\"/GeneralSearch\"\n                  binding=\"basicHttpBinding\"\n                  contract=\"WcfServiceGeolocation.IGeneralSearch\"/&gt;\n        &lt;endpoint name=\"GeneralSearchJson\"\n                  address=\"/GeneralSearchjson\"\n                  binding=\"webHttpBinding\"\n                          bindingConfiguration=\"jsonp\"\n                          contract=\"WcfServiceGeolocation.IGeneralSearch\"/&gt;\n        &lt;endpoint address=\"mex\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n      &lt;service name=\"WcfServiceGeolocation.PuppySearchSecure\" behaviorConfiguration=\"HttpsBehavior\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"https://localhost:50832/GeoLocationService/puppysearchsecure\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint name=\"GeneralSearchSecure\"\n                  address=\"/GeneralSearch\"\n                  binding=\"wsHttpBinding\"\n                  contract=\"WcfServiceGeolocation.IGeneralSearch\"/&gt;\n        &lt;endpoint name=\"GeneralSearchSecureJson\"\n                  address=\"/GeneralSearchjson\"\n                  binding=\"webHttpBinding\"\n                          bindingConfiguration=\"jsonpSsl\"\n                          contract=\"WcfServiceGeolocation.IGeneralSearch\"/&gt;\n        &lt;endpoint address=\"mex\"\n                  binding=\"mexHttpBinding\"\n                  contract=\"IMetadataExchange\" /&gt;\n\n      &lt;/service&gt;\n      &lt;service name=\"WcfServiceGeolocation.PuppySearchTCP\" behaviorConfiguration=\"SimpleAddMEXBehavior\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"net.tcp://localhost/GeoLocationService/puppysearch\"/&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint name=\"GeneralSearchTCP\"\n                  address=\"/GeneralSearch\"\n                  binding=\"netTcpBinding\"\n                  contract=\"WcfServiceGeolocation.IGeneralSearch\"/&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexTcpBinding\" contract=\"IMetadataExchange\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Can anyone see what I'm doing wrong?</p>\n"},{"tags":["wcf","session","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":8006708,"title":"Set Operation to be only Soap not Rest, when have two endpoint","body":"<p>It os a way to force Operation to be only SOAP. I have two endpoints in config - SOAP and REST and now every Operation is supported by both.</p>\n\n<p>My main problem is that I want to use sessios in my one Operation but now when I enable it wcf fire error that my operation not support session cause it is also REST :/</p>\n"},{"tags":["wcf","ssl","certificate","x509"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12843443,"title":"WCF - Message credential vs TransportWithMessageCredential certificate verification","body":"<p>I'm having an interesting issue setting up a WCF service message credential security.  I'm getting this exception on my client side:</p>\n\n<pre><code>An unhandled exception of type 'System.InvalidOperationException' occurred in mscorlib.dll\n\nAdditional information: The service certificate is not provided for target 'http://myMachine/SPTestService/Service1.svc'. Specify a service certificate in ClientCredentials. \n</code></pre>\n\n<p>This leads me to believe that I need to specify a server cert in my client config, but I'm not sure why.  This should be using ChainTrust.  Interestingly enough, when I switch it over to TransportWithMessageCredential (so it's working over SSL), it works, and correctly verifies the message credential as well.  Is this a WCF bug?  Fortunately, TransportWithMessageCredential was where I was heading, so I'll accelerate that process.</p>\n\n<p>Using only Message credential, my configs look like this:</p>\n\n<p>Client:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;system.serviceModel&gt;\n        &lt;behaviors&gt;\n            &lt;endpointBehaviors&gt;\n                &lt;behavior name=\"serviceBehavior\"&gt;\n                    &lt;clientCredentials&gt;\n                        &lt;clientCertificate storeName=\"My\" storeLocation=\"LocalMachine\"\n                                           findValue=\"CN=myCert\" /&gt;\n                    &lt;/clientCredentials&gt;\n                &lt;/behavior&gt;\n            &lt;/endpointBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;bindings&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding name=\"serviceEndpoint\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n                    receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n                    bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                    messageEncoding=\"Mtom\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                    useDefaultWebProxy=\"true\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;security mode=\"Message\"&gt;\n                        &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                            realm=\"\" /&gt;\n                        &lt;message clientCredentialType=\"Certificate\" algorithmSuite=\"Default\" /&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"http://myMachine/SPTestService/Service1.svc\"\n                behaviorConfiguration=\"serviceBehavior\"      \n                binding=\"basicHttpBinding\" bindingConfiguration=\"serviceEndpoint\"\n                contract=\"ServiceReference2.IService1\" name=\"serviceEndpoint\" /&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Service:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;  \n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"serverBinding\" messageEncoding=\"Mtom\"&gt;\n                &lt;security mode=\"Message\"&gt;\n                    &lt;message clientCredentialType=\"Certificate\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"serviceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483646\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;serviceCertificate storeName=\"My\" storeLocation=\"LocalMachine\" findValue=\"CN=myCert\"  /&gt;\n            &lt;clientCertificate&gt;\n                &lt;authentication revocationMode=\"NoCheck\"/&gt;\n            &lt;/clientCertificate&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n      &lt;services&gt;\n          &lt;service behaviorConfiguration=\"serviceBehavior\" name=\"SPTestService.Service1\"&gt;\n              &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"serverBinding\" name=\"serviceEndpoint\" contract=\"SPTestService.IService1\" /&gt;\n          &lt;/service&gt;\n      &lt;/services&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Using TransportWithMessage, my configs look like this:</p>\n\n<p>Client:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;system.serviceModel&gt;\n        &lt;behaviors&gt;\n            &lt;endpointBehaviors&gt;\n                &lt;behavior name=\"serviceBehavior\"&gt;\n                    &lt;clientCredentials&gt;\n                        &lt;clientCertificate storeName=\"My\" storeLocation=\"LocalMachine\"\n                                           findValue=\"CN=myCert\" /&gt;\n                    &lt;/clientCredentials&gt;\n                &lt;/behavior&gt;\n            &lt;/endpointBehaviors&gt;\n        &lt;/behaviors&gt;\n        &lt;bindings&gt;\n            &lt;basicHttpBinding&gt;\n                &lt;binding name=\"serviceEndpoint\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\"\n                    receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\"\n                    bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                    maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                    messageEncoding=\"Mtom\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                    useDefaultWebProxy=\"true\"&gt;\n                    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                        maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                    &lt;security mode=\"TransportWithMessageCredential\"&gt;\n                        &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n                            realm=\"\" /&gt;\n                        &lt;message clientCredentialType=\"Certificate\" algorithmSuite=\"Default\" /&gt;\n                    &lt;/security&gt;\n                &lt;/binding&gt;\n            &lt;/basicHttpBinding&gt;\n        &lt;/bindings&gt;\n        &lt;client&gt;\n            &lt;endpoint address=\"https://myMachine/SPTestService/Service1.svc\"\n                behaviorConfiguration=\"serviceBehavior\"      \n                binding=\"basicHttpBinding\" bindingConfiguration=\"serviceEndpoint\"\n                contract=\"ServiceReference2.IService1\" name=\"serviceEndpoint\" /&gt;\n        &lt;/client&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Service:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;  \n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"serverBinding\" messageEncoding=\"Mtom\"&gt;\n                &lt;security mode=\"TransportWithMessageCredential\"&gt;\n                    &lt;message clientCredentialType=\"Certificate\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"serviceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483646\" /&gt;\n          &lt;serviceCredentials&gt;\n            &lt;serviceCertificate storeName=\"My\" storeLocation=\"LocalMachine\" findValue=\"CN=myCert\"  /&gt;\n            &lt;clientCertificate&gt;\n                &lt;authentication revocationMode=\"NoCheck\"/&gt;\n            &lt;/clientCertificate&gt;\n          &lt;/serviceCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n      &lt;services&gt;\n          &lt;service behaviorConfiguration=\"serviceBehavior\" name=\"SPTestService.Service1\"&gt;\n              &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"serverBinding\" name=\"serviceEndpoint\" contract=\"SPTestService.IService1\" /&gt;\n          &lt;/service&gt;\n      &lt;/services&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","xml","wcf","websphere-mq"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":8176908,"title":"Processing files off a queue, archiving and storing in a DB","body":"<p>We will be implementing a solution to pull files off of a queue (IBM - MQ).  The messages will be 10-20 different xml messages that will need to be dequeued, processed, and archived (store). However, when we store the data contained in the messages in a DB we want to retain the source file so the FileId that gets generated from the archive process will have to be retained and stored with the meta data.</p>\n\n<p>I am trying to figure out what will provide me with the most throughput? </p>\n\n<p>Requirements:</p>\n\n<ol>\n<li>Keep an archive of the file.</li>\n<li>Store the parsed data (not the xml blob) from the messages.</li>\n<li>Retain the Source File ID from the Archive. </li>\n<li>Implement a solution that will scale could grow significantly....currently probably 40-50,000 messages an hour. </li>\n</ol>\n\n<p>So basically my currently bottleneck is that it seems that my archive process and data processing / db load are serial (archive has to process and be successful before I can start on xml parsing / loading).....didn't know if there is a better way to accomplish this. </p>\n\n<p>I would assume we could add other app servers that would be listening on the same queue and could process the messages in parallel if need be.  Try to eliminate the DB as the bottleneck by having it perform as little processing as possible (Could send xml blob to DB, but it would have to perform the xml shredding). </p>\n"},{"tags":["javascript","wcf","jqgrid","internet-explorer-6"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12694742,"title":"JQGrid POST doesn't include postData when using IE6","body":"<p>Using Fiddler2, when using IE6, I see that the POST request does not contain the postData specified below.  I've verified path is defined at the point of JQGrid initialization.  It works fine for IE9 and Chrome.  I am calling a WCF POST service.  The call gets made without the parameter, and hangs IE6 with no response forthcoming.  </p>\n\n<p>Any ideas appreciated!  edit:</p>\n\n<p>Latest update: RESOLVED</p>\n\n<p>The issue was a side effect of my dynamic resize code;  I was resizing the grid wrapper div on window resize event, unfortunately in IE6 a content resize bubbles up to the window causing a recursion.  This has been like talking to my diary, but maybe this will help someone else along the line.</p>\n\n<p>Ok, I am able to get the data back (verified via Fiddler) via a separate AJAX call, and bound to the grid using the AddJSONData() method.  The debugger pops at the end of the datatype: callback function... But if I let it continue execution, IE6 hangs at this point.  I'm still stuck on this!</p>\n\n<pre><code>                grid.jqGrid({\n                datatype: function ()\n                {\n                    var ts = this,      // - cache 'this' to use later in the complete callback\n                    parameters = this.p;         // - cache the grid parameters\n\n                    $(\"#list\")[0].addJSONData(_gridData);\n\n                    if ($.isFunction(parameters.loadComplete))\n                        parameters.loadComplete.call(ts, _gridData);\n\n                    if (parameters.loadonce || parameters.treeGrid)\n                        parameters.datatype = \"local\";\n\n                    debugger;\n                },\n</code></pre>\n\n<p>Chugging away at this when I can.  I wrote a test ajax call to the GetData service method, and it populated the POST data fine in the body, and returns all the grid data.  Ok, so JQGrid is NOT setting the parameters in the request body, do I have JQGrid misconfigured?  Please advise!</p>\n\n<hr>\n\n<p>Well sure not getting much lovin'..  in the serializeGridData function, it turns out that the JSON2 stringify is treating the postData like a string?  The quotes around the key names are getting escaped:</p>\n\n<pre><code>IE6: \"{\\\"path\\\":\\\"c:\\\\Source\\\\TestUpload\\\\Uploads\\\\5ec33030-ab7b-4480-9deb-3153726c1ede.xls\\\",\\\"_search\\\":true,\\\"nd\\\":1349365262553,\\\"rows\\\":15,\\\"page\\\":1,\\\"sidx\\\":\\\"IDNumber\\\",\\\"sord\\\":\\\"desc\\\"}\"\n\nIE9:  {\"path\":\"c:\\\\Source\\\\TestUpload\\\\Uploads\\\\3228b61e-4f1b-4ce4-813e-10f58b1b4285.xls\",\"_search\":true,\"nd\":1349365395840,\"rows\":15,\"page\":1,\"sidx\":\"IDNumber\",\"sord\":\"desc\"}\n</code></pre>\n\n<hr>\n\n<p>Ok, so I used the compose functionality of Fiddler to modify the IE6 JQGrid request, using a valid session cookie, and just adding the POST data:</p>\n\n<pre><code>{\"path\":\"c:\\\\Source\\\\TestUpload\\\\Uploads\\\\cb238b83-3c6e-42c2-92be-0e8d08dd905e.xls\",\"_search\":true,\"nd\":1349284471504,\"rows\":15,\"page\":1,\"sidx\":\"IDNumber\",\"sord\":\"desc\"}\n</code></pre>\n\n<p>...and it worked just fine.  So for some reason, JQGrid isn't populating the POST data for IE6?  Any ideas?</p>\n\n<hr>\n\n<p>Of note is that the content-length is correct in the request header, there's just no associated POST data.  I tried setting a breakpoint in Fiddler on XMLHttpRequests, and it did not break on the JQGrid request;  it did however break as expected on the previous AJAX requests.</p>\n\n<p>This is the raw header for a successful jqgrid POST request in IE9:</p>\n\n<pre><code>POST http://localhost/Loader.svc/GetData?_=1349274977838 HTTP/1.1\nAccept: application/json, text/javascript, */*; q=0.01\nContent-Type: application/json\nX-Requested-With: XMLHttpRequest\nReferer: http://localhost/BulkOrderPersonalized.aspx\nAccept-Language: en-US,fr;q=0.5\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)\nHost: localhost\nContent-Length: 169\nConnection: Keep-Alive\nPragma: no-cache\nCookie: ASP.NET_SessionId=qlj50u45mk4f5q55izyj23us;    MerchantV2=BAEE474A47A5264EF3B3C1977173019C569F51792BEA95C1F129634F6B5E8C8475631791B382D7159E78364979FE541B9337D3C5D2B1B0563A653E6DFD738D0D291A9CFADB3555FA4E3D891BD8912D6E0F315A51E61F240F69A6CA061B6CEA17868F9D7E33C36415DEAB3EC9178A9A2748CF002B\n\n{\"path\":\"c:\\\\Source\\\\TestUpload\\\\Uploads\\\\b7f0ba08-c9f5-46b3-a856-dfa33410be75.xls\",\"_search\":true,\"nd\":1349274977961,\"rows\":15,\"page\":1,\"sidx\":\"IDNumber\",\"sord\":\"desc\"}\n</code></pre>\n\n<p>This is the raw header for the POST request that hangs IE6:</p>\n\n<pre><code>POST http://10.8.8.72/Loader.svc/GetData?_=1349271720318 HTTP/1.1\nx-requested-with: XMLHttpRequest\nAccept-Language: en-us\nReferer: http://10.8.8.72/BulkOrderPersonalized.aspx\nAccept: application/json, text/javascript, */*; q=0.01\nContent-Type: application/json\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727;     NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)\nHost: 10.8.8.72\nContent-Length: 169\nProxy-Connection: Keep-Alive\nPragma: no-cache\nCookie: ASP.NET_SessionId=5fvcrn55mrcjw145ari0h2a1;         MerchantV2=C1EB658057878B9D526DA8216B181011CA53F98BFA7A794AFFFEF7FD855E64C63244EA741FA984FDBB8699787EC387D195474B1D08F1C784E79ECC5C8F16206CE477C91891DC26673015908CBE3C012E10CB8A3DCABDC1762DD10C3D8D15ABC403C454F4231BD16F63787D6E387683F5E99634B5\n</code></pre>\n\n<p>The only relevant difference appears to be that JQGrid is not populating the POST data when using IE6.</p>\n\n<p>A previous jQuery AJAX call with post data executes just fine before the JQGrid bind:</p>\n\n<pre><code>function GetRequestConfigs(type, issuingBank) // - get configuration objects for user; (load initially)\n{\nif (_configurations == null) {\n\n    $.ajax({\n        async: false,\n        type: 'POST',\n        url: 'Loader.svc/GetRequestConfigurations',\n        data: '{\"type\":\"' + type + '\",\"issuingBank\":\"' + issuingBank + '\"}',\n        dataType: 'json',\n        contentType: 'application/json',\n        success: function(response, textStatus, xhr) {\n            _configurations = JSON.parse(response.d);\n        },\n        error: function(xhr, textStatus, errorThrown) {\n            alert(textStatus);\n        }\n    });\n}\nreturn _configurations;\n</code></pre>\n\n<p>}</p>\n\n<p>This JQGrid POST request fails:</p>\n\n<pre><code>grid.jqGrid({\n            url: 'Loader.svc/GetData',                  // - webinvoke post method\n            postData: { path: path },\n\n            search: true,\n            datatype: 'json',\n            mtype: 'POST',\n            loadonce: true,                             // - load data once on server side, then switch to local data handling\n            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },\n\n            serializeGridData: function (postData)      // - process returned object from web-invoke to json\n            {\n                return JSON.stringify(postData);\n            },\n\n            jsonReader: {                                       // - map json to grid elements ( this is how the grid expects the data from the server )\n                root: function (obj) { return obj.d.rows; },\n                page: function (obj) { return obj.d.page; },\n                total: function (obj) { return obj.d.total; },\n                records: function (obj) { return obj.d.records; }\n            }, ...\n</code></pre>\n"},{"tags":["java","android","json","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12840825,"title":"Android, receiving date from WCF JSON","body":"<p>I have been searching long time online for the answer on how to properly send the datetime object from wcf 4 to android device (using json format). Unfortunately I was not able to find a consistent way of doing it. \nTherefore if you can have a look at the code that I have used (combining knowledge from few found articles) and tell me whether it is acceptable...</p>\n\n<p>This is the code that resides in one of my methods:</p>\n\n<pre><code>JSONDateValue = JSONDateValue.replace(\"/\",\"\").replace(\"Date\", \"\").replace(\"(\",\"\").replace(\")\",\"\");\n    DateTime dt = new DateTime(1970,1,1,0,0,0,0);\n    String[] serverTime;\n    DateTime plusDuration;\n    if (JSONDateValue.contains(\"+\"))\n    {\n        serverTime = JSONDateValue.split(\"\\\\+\");\n        serverTime[1]=ProcessTimePartOfDate(serverTime[1]);\n        plusDuration = dt.plus(new Duration(Long.valueOf(serverTime[0]))).plusHours(Integer.valueOf(serverTime[1]));\n    }\n    else\n    {\n        serverTime = JSONDateValue.split(\"\\\\-\");\n        serverTime[1]=ProcessTimePartOfDate(serverTime[1]);\n        plusDuration = dt.plus(new Duration(Long.valueOf((serverTime[0])))).minusHours(Integer.valueOf(serverTime[1]));\n    }\n\n    java.util.Date d= plusDuration.toDate();\n    return d;\n</code></pre>\n\n<p>JSONDateValue  is the input parameter of type String. Which should be /Date(123123123+0100)/ when it comes out of WCF serialization...</p>\n\n<p>Many thanks for your time.</p>\n"},{"tags":["wcf"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":3911,"score":7,"question_id":2426892,"title":"WCF Datacontract - Does it support nullable data member?","body":"<pre><code>    [DataMember]\n    public int? NumberOfPages;   //////////// Is this supported????\n    [DataMember]\n    public bool? Color;          //////////// Is this supported????\n    [DataMember]\n    public int? BulkQuantity;\n    [DataMember]\n</code></pre>\n"},{"tags":["c#","json","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12839674,"title":"WCF error when converting datetime to json format","body":"<p>I have a WCF service that returns JSON.</p>\n\n<p>Since this morning, I started to get the following error:</p>\n\n<pre><code>DateTime values that are greater than DateTime.MaxValue or smaller than DateTime.MinValue when converted to UTC cannot be serialized to JSON\n</code></pre>\n\n<p>Just for the test, I passed today's date to all the DateTime variables that are being returned using JSON, but I stil get the same error.</p>\n\n<p>The code is around 2k rows, so I see no value in posting it here.</p>\n\n<p>Any idea how to solve it??</p>\n"},{"tags":["asp.net","wcf","web-services",".net-remoting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":12839914,"title":"How to access version 4.0 component from version 1.1","body":"<p>We have an ASP.NET application which has been built up on version 1.1 Now we need to incorporate a new functionality in Version 4.0 and this includes a user control having a grid and a number of other controls. We need to display this user control inside a page (in a frame) in .Net version 1.1, Both these applications are in different servers too. Is it possible to add the new feature, which is created on Version 4.0, into Version 1.1 . If so which is the simple and the best way?</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12832429,"title":"WCF Client connecting to RESTful service is not working","body":"<p>I'm trying to use svcutil generated client to communicate with a RESTful WCF service.</p>\n\n<p>The service contract is defined as:</p>\n\n<pre><code>public interface IService1\n{\n    [OperationContract]\n    [WebGet(UriTemplate = \"/GetTest?a={a}&amp;b={b}&amp;c={c}\")]\n    int GetTest(int a, int b, int c);\n}\n</code></pre>\n\n<p>I used Visual Studio to reference this service and used the generated client code to invoke the GetTest operation. Unfortunately, I got this message:</p>\n\n<pre><code>Operation 'GetTest' of contract 'IService1' specifies multiple request body parameters to be serialized without any wrapper elements. At most one body parameter can be serialized without wrapperelements. Either remove the extra body parameters or set the BodyStyle property on the WebGetAttribute/WebInvokeAttribute to Wrapped\n</code></pre>\n\n<p>But when I requested the corresponding URL from web browser, it worked and correct return value was shown.</p>\n\n<p>This is weird. Is there anything wrong with the generated client code? Or did I mis-configured anything?</p>\n\n<p>The following is my client configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;endpointBehaviors&gt;\n            &lt;behavior name=\"Service1EndPointBehavior\"&gt;\n                &lt;webHttp /&gt;\n            &lt;/behavior&gt;\n        &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://localhost:8010/Service1/\" behaviorConfiguration=\"Service1EndPointBehavior\"\n            binding=\"webHttpBinding\" contract=\"ServiceReference1.IService1\"\n            name=\"Service1EndPoint\" /&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["wpf","wcf","entity-framework","nhibernate","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":171,"score":2,"question_id":12366299,"title":"WPF and WCF RIA Service+EF or alternatives","body":"<p>Is there any way to get full support for RIA Services+EF for WPF application. I've read previous threads but looks like solution's offered there lacks's essential functionalty like transparent CRUD and Validation API support.</p>\n\n<p>Or is there alternative solutions with other popular communication frameworks/ORM that supports that functionality (to summarize - transparent work with POCO classes in 3-tier enviromnent).</p>\n"},{"tags":["wcf"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2534,"score":0,"question_id":5002386,"title":"Problems with NotFound errors and compilation failures","body":"<p>We're getting errors every so often with a WCF service (consumed by Silverlight) that don't give us much to go on:</p>\n\n<blockquote>\n<pre>\nThe service '/ourservice.svc' cannot be activated due to an exception during compilation.  \nThe exception message is: Object reference not set to an instance of an object.. ---> \nSystem.NullReferenceException: Object reference not set to an instance of an object.\nat System.Web.Compilation.DiskBuildResultCache.CacheBuildResult(String cacheKey, BuildResult result, Int64 hashCode, DateTime utcStart)\n   at System.Web.Compilation.BuildManager.CacheBuildResultInternal(String cacheKey, BuildResult result, Int64 hashCode, DateTime utcStart)\n   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)\n   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile)\n   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile)\n</pre>\n</blockquote>\n\n<p>The service compiles/runs fine whenever I use it via the browser or using the silverlight client. The Silverlight side of the system reports this also equally un-helpful error:</p>\n\n<pre><code>System.ServiceModel.CommunicationException: \n[HttpWebRequest_WebException_RemoteServer]Arguments: NotFound\n</code></pre>\n\n<p>The only lead I've managed to find is possibly changing the <a href=\"http://msdn.microsoft.com/en-us/library/ms734715.aspx\" rel=\"nofollow\">instancing behaviour</a> but I'm not sure why we would need to do that, and I can't tell what the default is anyway.</p>\n\n<ul>\n<li>It's hosted on Windows 2008 SP1</li>\n<li>The server is behind a load balancer</li>\n<li>The timeouts in the web.config for the service are 5 minutes  </li>\n<li>The maximum object size is 50000000  </li>\n<li>The services have <code>AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)</code>  </li>\n</ul>\n\n<p>Any suggestions would be great</p>\n\n<h2>Update</h2>\n\n<p>This is another symptom - the Silverlight client frequently sends this exception to our logging service (which writes to the event log + emails)</p>\n\n<pre><code>There was an error saving the report - The error object contained errors\nSystem.ServiceModel.CommunicationException: [HttpWebRequest_WebException_RemoteServer]\nArguments: NotFound\nDebugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=4.0.60129.0&amp;File=System.Windows.dll&amp;Key=HttpWebRequest_WebException_RemoteServer ---&gt; System.Net.WebException: [HttpWebRequest_WebException_RemoteServer]\nArguments: NotFound\nDebugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=4.0.60129.0&amp;File=System.Windows.dll&amp;Key=HttpWebRequest_WebException_RemoteServer ---&gt; System.Net.WebException: [HttpWebRequest_WebException_RemoteServer]\nArguments: NotFound\nDebugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&amp;Version=4.0.60129.0&amp;File=System.Windows.dll&amp;Key=HttpWebRequest_WebException_RemoteServer\n   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)\n   at System.Net.Browser.BrowserHttpWebRequest.&lt;&gt;c__DisplayClass5.&lt;EndGetResponse&gt;b__4(Object sendState)\n   at System.Net.Browser.AsyncHelper.&lt;&gt;c__DisplayClass4.&lt;BeginOnUI&gt;b__1(Object sendState)\n   --- End of inner exception stack trace ---\n   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)\n   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)\n   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)\n   --- End of inner exception stack trace ---\n   at System.ServiceModel.AsyncResult.End[TAsyncResult](IAsyncResult result)\n   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)\n   at System.ServiceModel.ClientBase`1.ChannelBase`1.EndInvoke(String methodName, Object[] args, IAsyncResult result)\n   at MyNamespaceSilverlight.Core.ReportServiceReference.ReportServiceClient.ReportServiceClientChannel.EndUpdateReport(IAsyncResult result)\n   at MyNamespaceSilverlight.Core.ReportServiceReference.ReportServiceClient.MyNamespaceSilverlight.Core.ReportServiceReference.IReportService.EndUpdateReport(IAsyncResult result)\n   at MyNamespaceSilverlight.Core.ReportServiceReference.ReportServiceClient.OnEndUpdateReport(IAsyncResult result)\n   at System.ServiceModel.ClientBase`1.OnAsyncCallCompleted(IAsyncResult result)\n</code></pre>\n"},{"tags":["asp.net","wcf","soapui","datamember","operationcontract"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":87,"score":0,"question_id":12836534,"title":"WCF: is there an attribute to make parameters in the OperationContract required?","body":"<p>I use <code>[DataMember(IsRequired=true)]</code> to make the DataContract properties required. There doesn't seem to be some IsRequired for the OperationContract parameters. How do I make them required and not allow null?</p>\n\n<p>The parameter in of OperationContract appears to be optional in SoapUI tool. Though this must never be optional or null.</p>\n\n<p><strong>WCF Interface:</strong></p>\n\n<pre><code>[OperationContract]\nIsClientUpdateRequiredResult IsClientUpdateRequired(IsClientUpdateRequiredInput versie);\n\n...\n\n[DataContract]\npublic class IsClientUpdateRequiredInput\n{\n    [DataMember(IsRequired=true)]\n    public string clientName { get; set; }\n    [DataMember(IsRequired = true, Order = 0)]\n    public int major { get; set; }\n    [DataMember(IsRequired = true, Order = 1)]\n    public int minor { get; set; }\n    [DataMember(IsRequired = true, Order = 2)]\n    public int build { get; set; }\n    [DataMember(IsRequired = true, Order = 3)]\n    public int revision { get; set; }\n}\n</code></pre>\n\n<p><strong>soapUI request template:</strong></p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\" xmlns:tem=\"http://tempuri.org/\" xmlns:pir=\"http://schemas.datacontract.org/2004/07/PirIS.Web.WCF.InputClasses\"&gt;\n   &lt;soap:Header/&gt;\n   &lt;soap:Body&gt;\n      &lt;tem:IsClientUpdateRequired&gt;\n         &lt;!--Optional:--&gt;\n         &lt;tem:versie&gt;\n            &lt;pir:clientName&gt;?&lt;/pir:clientName&gt;\n            &lt;pir:major&gt;?&lt;/pir:major&gt;\n            &lt;pir:minor&gt;?&lt;/pir:minor&gt;\n            &lt;pir:build&gt;?&lt;/pir:build&gt;\n            &lt;pir:revision&gt;?&lt;/pir:revision&gt;\n         &lt;/tem:versie&gt;\n      &lt;/tem:IsClientUpdateRequired&gt;\n   &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n"},{"tags":["wcf","browser"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12836750,"title":"How to invoke WCF service through browser (Firefox)?","body":"<p>I'm just wondering how to invoke WCF service through browser (Firefox)?</p>\n\n<p>My WCF service look like this:</p>\n\n<pre><code>http://localhost:4249/TestService.svc\n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>[ServiceContract]\npublic interface ITestService\n{\n    [OperationContract]\n    [WebGet(UriTemplate = \"/GetAllPersons\", ResponseFormat = WebMessageFormat.Xml)]\n    List&lt;Person&gt; GetAllPersons();\n\n\npublic class TestService : ITestService\n{\n    public List&lt;Person&gt; GetAllPersons()\n    {\n        return Employees.CreateEmployees();\n    }\n</code></pre>\n\n<p>And I've tried this in browser's address line:</p>\n\n<pre><code>http://localhost:4249/TestService/GetAllPersons\n</code></pre>\n\n<p>But, I've got the following error:</p>\n\n<blockquote>\n  <p>Server Error in '/' Application.<br>\n  The resource cannot be found.<br>\n  Description: HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is\n  temporarily unavailable.  Please review the following URL and make\n  sure that it is spelled correctly.</p>\n  \n  <p>Requested URL: /TestService/GetAllPersons</p>\n</blockquote>\n\n<p>What I did wrong?</p>\n\n<p>Here's my web.config file and you can take a look at:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n    &lt;configSections&gt;\n        &lt;sectionGroup name=\"system.web.extensions\" type=\"System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n            &lt;sectionGroup name=\"scripting\" type=\"System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n                &lt;section name=\"scriptResourceHandler\" type=\"System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;\n                &lt;sectionGroup name=\"webServices\" type=\"System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n                    &lt;section name=\"jsonSerialization\" type=\"System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"Everywhere\"/&gt;\n                    &lt;section name=\"profileService\" type=\"System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;\n                    &lt;section name=\"authenticationService\" type=\"System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;\n                    &lt;section name=\"roleService\" type=\"System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" allowDefinition=\"MachineToApplication\"/&gt;\n                &lt;/sectionGroup&gt;\n            &lt;/sectionGroup&gt;\n        &lt;/sectionGroup&gt;\n    &lt;/configSections&gt;\n    &lt;appSettings/&gt;\n    &lt;connectionStrings/&gt;\n    &lt;system.web&gt;\n        &lt;compilation debug=\"true\"&gt;\n            &lt;assemblies&gt;\n                &lt;add assembly=\"System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\"/&gt;\n                &lt;add assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n            &lt;/assemblies&gt;\n        &lt;/compilation&gt;\n        &lt;authentication mode=\"Windows\"/&gt;\n        &lt;pages&gt;\n            &lt;controls&gt;\n                &lt;add tagPrefix=\"asp\" namespace=\"System.Web.UI\" assembly=\"System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n            &lt;/controls&gt;\n        &lt;/pages&gt;\n        &lt;httpHandlers&gt;\n            &lt;remove verb=\"*\" path=\"*.asmx\"/&gt;\n            &lt;add verb=\"*\" path=\"*.asmx\" validate=\"false\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n            &lt;add verb=\"*\" path=\"*_AppService.axd\" validate=\"false\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n            &lt;add verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" validate=\"false\"/&gt;\n        &lt;/httpHandlers&gt;\n        &lt;httpModules&gt;\n            &lt;add name=\"ScriptModule\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n        &lt;/httpModules&gt;\n    &lt;/system.web&gt;\n    &lt;system.codedom&gt;\n        &lt;compilers&gt;\n            &lt;compiler language=\"c#;cs;csharp\" extension=\".cs\" warningLevel=\"4\" type=\"Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"&gt;\n                &lt;providerOption name=\"CompilerVersion\" value=\"v3.5\"/&gt;\n                &lt;providerOption name=\"WarnAsError\" value=\"false\"/&gt;\n            &lt;/compiler&gt;\n        &lt;/compilers&gt;\n    &lt;/system.codedom&gt;\n    &lt;system.webServer&gt;\n        &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;\n        &lt;modules&gt;\n            &lt;add name=\"ScriptModule\" preCondition=\"integratedMode\" type=\"System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n        &lt;/modules&gt;\n        &lt;handlers&gt;\n            &lt;remove name=\"WebServiceHandlerFactory-Integrated\"/&gt;\n            &lt;add name=\"ScriptHandlerFactory\" verb=\"*\" path=\"*.asmx\" preCondition=\"integratedMode\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n            &lt;add name=\"ScriptHandlerFactoryAppServices\" verb=\"*\" path=\"*_AppService.axd\" preCondition=\"integratedMode\" type=\"System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n            &lt;add name=\"ScriptResource\" preCondition=\"integratedMode\" verb=\"GET,HEAD\" path=\"ScriptResource.axd\" type=\"System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"/&gt;\n        &lt;/handlers&gt;\n    &lt;/system.webServer&gt;\n    &lt;system.serviceModel&gt;\n        &lt;services&gt;\n            &lt;service behaviorConfiguration=\"TestService.TestServiceBehavior\" name=\"TestService.TestService\"&gt;\n                &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"TestService.ITestService\"&gt;\n                    &lt;identity&gt;\n                        &lt;dns value=\"localhost\"/&gt;\n                    &lt;/identity&gt;\n                &lt;/endpoint&gt;\n                &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n            &lt;/service&gt;\n        &lt;/services&gt;\n        &lt;behaviors&gt;\n            &lt;serviceBehaviors&gt;\n                &lt;behavior name=\"TestService.TestServiceBehavior\"&gt;\n                    &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n                    &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                    &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n        &lt;/behaviors&gt;\n    &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":170,"score":2,"question_id":8154102,"title":"How do I test my WCF duplex service?","body":"<p>I am currently developing a duplex WCF service and I wish to test the service using the WcfTestClient.exe that is provided by Visual Studio 2010. However as my WCF service is a duplex, the ending point are created as shown:</p>\n\n<pre><code>selfHost.AddServiceEndpoint(typeof(IPostingService), new WSDualHttpBinding(), \"Posting\");\n</code></pre>\n\n<p>apparently after running wcftestclient.exe and connecting to the service, it says that it is not supported for dual http bindings.</p>\n\n<p>Any idea how else can I test my WCF service?</p>\n"},{"tags":["json","wcf","ipad"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12837037,"title":"Anyone used ACORD XML for tablets?","body":"<p>I am trying to POC an app for one of my insurance clients on iPad (Native and not HTML 5).<br>\nThe protocol they use for client tier and middle tier communication is Acord XML.\nAFAIK, its a very heavy protocol for communication on a mobile device. </p>\n\n<p>Has any one used ACORD on tablets or Mobile devices ?</p>\n\n<p>If so, I would love to hear their feedback on how the performance was.</p>\n\n<p>Also, any alternative suggestions to increase the performance would be greatly appreciated. \nI was also thinking of exposing my business services through JSON. </p>\n\n<p>However, can JSON serializer on iPad handle serializing complex classes such as ACORD ?</p>\n\n<p>Thanks,</p>\n\n<p>Srikanth</p>\n"},{"tags":["wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12836397,"title":"Unable to sending complex object through WCF","body":"<p>I have a ServiceContract as such :</p>\n\n<pre><code>    bool CreateSlideshow(Slideshow current, string path, string name);\n</code></pre>\n\n<p>When I run my program calling the service, I get the following exception :</p>\n\n<blockquote>\n  <p><em>There was an error while trying to serialize parameter\n  <a href=\"http://tempura.org/:current\" rel=\"nofollow\">http://tempura.org/:current</a>. The InnerException message was 'Type\n  'System.DelegateSerializationHolder+DelegateEntry' with data contract\n  name\n  'DelegateSerializationHolder.DelegateEntry:http://schemas.datacontract.org/2004/07/System'\n  is not expected. Consider using a DataContractResolver or add any\n  types not known statically to the list of known types.....</em></p>\n</blockquote>\n\n<p>Apparently the problem lies in <code>Slideshow</code>. My class <code>Slideshow</code> has the following members :</p>\n\n<pre><code>    private String name;\n    private String path;\n    private List&lt;Slide&gt; slides;\n</code></pre>\n\n<p>and the class <code>Slide</code> has the following members :</p>\n\n<pre><code>    private String title;\n    private ContentTypeEnum contentType;\n    private String textContent;\n    private String pictureContextPath;\n</code></pre>\n\n<p>where <code>ContentTypeEnum</code> is an enumeration.</p>\n\n<p>Any idea how to resolve the exception? Hope for some advice/suggestions. Thanks in advance.</p>\n"},{"tags":["wcf","silverlight-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12400642,"title":"How to Implement the fault Contract/Exception handling in WCF and Silverlight?","body":"<p>I have already developed my application, which has more than a 1000 functions. Now I need to implement fault contracts or exception handling in Silverlight without changing these functions.</p>\n\n<p>Is there any common method that I can implement in one place in the WCF service layer and in one place in the Silverlight Application?</p>\n\n<p>I want to implement this because when any exception occurs in the WCF layer, it will not send the real exception message to silverlight.</p>\n\n<p>Silverlight only gets a message like this:</p>\n\n<blockquote>\n  <p>\"Remote server not found...\"</p>\n</blockquote>\n\n<p>Real problem is i have already developed the system and now i need to implement the falultcontracts without changing too much or each function in Service layer.. so is there any method to create the falutcontract wrapper and place it over the WCF service Layer?</p>\n"},{"tags":["wcf","permissions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":32,"score":-2,"question_id":12835837,"title":"WCF Network Service write permission","body":"<p>I have hosted WCF services are Network services using TCP. Client is installed in remote machine. From client i am able to read the data using the services but i am not able to write in to the client database using same services hosted as Network services. I had made sure that all the permissions are assigned but, still not able to write to the database but able to read using the services. Please help me on this. I am getting error as Unupdatable Query, but Database also is in shared and have permissions to read and write. I am using c#.net.</p>\n\n<p>Thankyou.</p>\n"},{"tags":["wcf","connection","timeoutexception"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":881,"score":1,"question_id":5422932,"title":"TimeoutException thrown by a WCF client proxy","body":"<p>My question is related to a System.TimeoutException that is thrown by WCF from time to time:</p>\n\n<blockquote>\n  <p>System.TimeoutException: The open\n  operation did not complete within the\n  allotted timeout of 00:00:00. The time\n  allotted to this operation may have\n  been a portion of a longer timeout.\n  ---> System.TimeoutException: Open timed out after 00:00:00 while\n  establishing a transport session to\n  net.tcp://192.168.1.100:50000/TabletSvc/.\n  The time allotted to this operation\n  may have been a portion of a longer\n  timeout. ---> System.TimeoutException:\n  Connecting to via\n  net.tcp://192.168.1.100:50000/TabletSvc/\n  timed out after 00:00:00. Connection\n  attempts were made to 0 of 1 available\n  addresses (). Check the RemoteAddress\n  of your channel and verify that the\n  DNS records for this endpoint\n  correspond to valid IP Addresses. The\n  time allotted to this operation may\n  have been a portion of a longer\n  timeout.</p>\n</blockquote>\n\n<p><em>What are the possible causes for random behavior?</em></p>\n\n<p>The WCF service is hosted into a .NET application running on Windows XP SP2. The application creates a client proxy to same service hosted on a different machine. One important aspect is that the service is using reliableSession and serviceThrottling. The machines are communicating through a WiFi connection.</p>\n\n<p>The client and the service are on separate threads inside the same application. From this point of view they do not depend on each other. There should be no locking.</p>\n\n<p>I checked the WiFi connectivity between machines using ping and it appears to be fine. The next step would be to put in place a network monitor, but since they are production machines it might not happen soon.</p>\n\n<p>I thought about increasing both maxConcurrentSessions and maxConcurrentInstances to 50 but haven't got the time to test it. This is based on the idea that maybe the application is running out of resources or reaches a limit which impacts the hosted service.</p>\n\n<p>As I said, the client proxy fails to open a connection only from time to time. A second attempt a minute later usually succeeds.</p>\n\n<p>Here is the client and service configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n&lt;client&gt;\n  &lt;endpoint name=\"TabletSvcEndpoint\" address=\"net.tcp://localhost:50000/TabletSvc/\" binding=\"netTcpBinding\" bindingConfiguration=\"TabletSvcBinding\" contract=\"ITabletSvc\"&gt;\n   &lt;identity&gt;\n    &lt;dns value=\"localhost\" /&gt;\n   &lt;/identity&gt;\n  &lt;/endpoint&gt;\n&lt;/client&gt;\n\n&lt;services&gt;\n &lt;service behaviorConfiguration=\"TabletSvcBehavior\" name=\"TabletSvc\"&gt;\n   &lt;endpoint name=\"TabletSvcEndpoint\" address=\"\" binding=\"netTcpBinding\" bindingConfiguration=\"TabletSvcBinding\" contract=\"ITabletSvc\"&gt;\n    &lt;identity&gt;\n     &lt;dns value=\"localhost\" /&gt;\n    &lt;/identity&gt;\n   &lt;/endpoint&gt;\n   &lt;host&gt;\n    &lt;baseAddresses&gt;\n     &lt;add baseAddress=\"net.tcp://localhost:50000/TabletSvc/\" /&gt;\n        &lt;/baseAddresses&gt;\n   &lt;/host&gt;\n &lt;/service&gt;\n&lt;/services&gt;\n\n&lt;bindings&gt;\n &lt;netTcpBinding&gt;\n   &lt;binding name=\"TabletSvcBinding\" receiveTimeout=\"00:30:00\" sendTimeout=\"00:00:30\" closeTimeout=\"00:00:05\" openTimeout=\"00:00:05\" transactionFlow=\"false\" transferMode=\"Buffered\" transactionProtocol=\"OleTransactions\" hostNameComparisonMode=\"StrongWildcard\" listenBacklog=\"10\" maxBufferPoolSize=\"524288\" maxBufferSize=\"6553600\" maxConnections=\"10\" maxReceivedMessageSize=\"6553600\"&gt;\n    &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"819200\" maxArrayLength=\"163840\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n    &lt;reliableSession inactivityTimeout=\"00:01:00\" ordered=\"true\" enabled=\"true\" /&gt;\n    &lt;security mode=\"None\" /&gt;\n  &lt;/binding&gt;\n &lt;/netTcpBinding&gt;\n&lt;/bindings&gt;\n\n&lt;behaviors&gt;\n &lt;serviceBehaviors&gt;\n  &lt;behavior name=\"TabletSvcBehavior\"&gt;\n   &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n   &lt;serviceThrottling maxConcurrentSessions=\"10\" maxConcurrentInstances=\"10\" maxConcurrentCalls=\"100\" /&gt;\n  &lt;/behavior&gt;\n &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n\n&lt;diagnostics performanceCounters=\"Off\" wmiProviderEnabled=\"False\" &gt;\n  &lt;messageLogging maxMessagesToLog=\"250\" logEntireMessage=\"true\" logMessagesAtServiceLevel=\"true\" logMalformedMessages=\"true\" logMessagesAtTransportLevel=\"true\" /&gt;\n&lt;/diagnostics&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>Here is the stack trace of the exception:</p>\n\n<pre><code>10:20:18.3125 ClientChannel: Opening\n10:20:48.8437 ClientChannel: Faulted\n10:20:48.8593 Error: System.TimeoutException: The open operation did not complete within the allotted timeout of 00:00:00. The time allotted to this operation may have been a portion of a longer timeout. ---&gt; System.TimeoutException: Open timed out after 00:00:00 while establishing a transport session to net.tcp://192.168.1.100:50000/TabletSvc/. The time allotted to this operation may have been a portion of a longer timeout. ---&gt; System.TimeoutException: Connecting to via net.tcp://192.168.1.100:50000/TabletSvc/ timed out after 00:00:00. Connection attempts were made to 0 of 1 available addresses (). Check the RemoteAddress of your channel and verify that the DNS records for this endpoint correspond to valid IP Addresses. The time allotted to this operation may have been a portion of a longer timeout.\n   at System.ServiceModel.Channels.SocketConnectionInitiator.CreateTimeoutException(Uri uri, TimeSpan timeout, IPAddress[] addresses, Int32 invalidAddressCount, SocketException innerException)\n   at System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan timeout)\n   at System.ServiceModel.Channels.BufferedConnectionInitiator.Connect(Uri uri, TimeSpan timeout)\n   at System.ServiceModel.Channels.TracingConnectionInitiator.Connect(Uri uri, TimeSpan timeout)\n   at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)\n   --- End of inner exception stack trace ---\n   at System.ServiceModel.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)\n   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)\n   --- End of inner exception stack trace ---\n\nServer stack trace: \n   at System.ServiceModel.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ReliableChannelBinder`1.ChannelSynchronizer.SyncWaiter.TryGetChannel()\n   at System.ServiceModel.Channels.ReliableChannelBinder`1.ChannelSynchronizer.SyncWaiter.TryWait(TChannel&amp; channel)\n   at System.ServiceModel.Channels.ReliableChannelBinder`1.ChannelSynchronizer.TryGetChannel(Boolean canGetChannel, Boolean canCauseFault, TimeSpan timeout, MaskingMode maskingMode, TChannel&amp; channel)\n   at System.ServiceModel.Channels.ReliableChannelBinder`1.Send(Message message, TimeSpan timeout, MaskingMode maskingMode)\n   at System.ServiceModel.Channels.SendReceiveReliableRequestor.OnRequest(Message request, TimeSpan timeout, Boolean last)\n   at System.ServiceModel.Channels.ReliableRequestor.Request(TimeSpan timeout)\n   at System.ServiceModel.Channels.ClientReliableSession.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ClientReliableDuplexSessionChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)\n   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)\n   at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)\n   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n\nException rethrown at [0]: \n   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n</code></pre>\n"},{"tags":["c#","wcf","windows-services","msdn"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12761107,"title":"An error in the MSDN walk-through - \"How to: Host WCF in a Windows Service Using TCP\"","body":"<p>I've been banging my head against a brick-wall the past 2 days trying to successfully use this example on MSDN:</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ff649818.aspx\" rel=\"nofollow\">How to: Host WCF in a Windows Service Using TCP</a></p>\n\n<p>If you follow the example through and place the Consumer application within the same solution then it runs successfully - even if the service is turned off !</p>\n\n<p>If the service is switched on and the consumer application is published to say a different network drive then it will not run because the WCF is not listening. </p>\n\n<p>The following piece of code in the walk-through is the culprit:</p>\n\n<pre><code>protected override void OnStart(string[] args)\n{\n   if (myServiceHost != null)\n   {\n       myServiceHost.Close();\n   }\n   myServiceHost = new ServiceHost(typeof(Service1));\n   myServiceHost.Open();\n}\n</code></pre>\n\n<p>My friend noticed that if we change <code>new ServiceHost(typeof(Service1));</code> to <code>new ServiceHost(typeof(WcfServiceLibrary1.Service1));</code> then the WCF will actually start to listen!</p>\n\n<p>Easy to see it's confusion as there is a class called Service1 within the windows service project aswell as the WCF project so the full qualification is required.</p>\n\n<p>Did anyone else encounter this?</p>\n"},{"tags":["wcf","entity-framework","entity-framework-4.1","n-tier","dbcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":196,"score":0,"question_id":9721909,"title":"Building application with Entity framework dbContext API issues","body":"<p>I am developing a WCF Service application. It is going to be a part of large system. It provides some business logic and is based on Entity framework 4.1. I want to divide application code into 2 tiers (projects in VS, dll's): Service (which contains business logic) and DAL.</p>\n\n<p>I have such database model in my project</p>\n\n<pre><code>ClassModel\nclassID : int, PK\nclassIdentity : string\nteacherName : string\nstatisticInfo : int\nisRegistered : bool\n\n\nStudentModel\nstudentID : int, PK\nstudentIdentity : string\nclassID : int, FK\n</code></pre>\n\n<p>For this I am generating code using dbContext templates and I get:</p>\n\n<pre><code>public partial class ClassModel\n{\n    public ClassModel()\n    {\n        this.Student = new HashSet&lt;StudentModel&gt;();\n    }\n    public int ClassID { get; set; }\n    public string ClassIdentity { get; set; }\n    public string TeacherName  { get; set; }\n    public int StatisticInfo { get; set; }\n    public bool IsRegistered { get; set; }\n\n    public virtual ICollection&lt;TerminalModel&gt; Terminal { get; set; }\n}\n\npublic partial class StudentModel\n{\n    public int StudentID { get; set; }\n    public string StudentIdentity { get; set; }\n    public bool IsRegistered { get; set; }\n\n    public virtual ClassModel Class { get; set; }\n}\n</code></pre>\n\n<p>I want to expose only some of this information through the service, so I have different model as a data contract:</p>\n\n<pre><code>[DataContract]\npublic class Clas{\n    [DataMember]\n    public string ClassIdentity {get;set;}\n    [DataMember]\n    public string TeacherName {get;set;}\n    [DataMember]\n    public string ClassMark {get;set;} //computed from statisticInfo\n    [DataMember]\n    public int NumberOfStudents {get;set;} //amount of students in this class\n}\n</code></pre>\n\n<p>And my part of my ServiceContract:</p>\n\n<pre><code>[OperationContract]\npublic void RegsterClass(Clas clas); //(if given clas does not exists adds it and) sets its isRegistered column to True\n[OperationContract]\npublic Clas GetClass(string classIdentity);\n</code></pre>\n\n<p>As you can see some fields are not present, others are being computed.\nIn such case I have some concerns about how should I built application properly. Could you write example code which implements the interface methods using everything I mentioned in the way that you think is proper?</p>\n"},{"tags":["c#","wcf","entity-framework","n-tier","self-tracking-entities"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":176,"score":2,"question_id":10509097,"title":"Does there exist a T4 Template for generating a WCF service to provide Get and Save for Self Tracking Entities?","body":"<p>I'm working with self tracking entities on a n-tier application.  So I have a WCF service which provides the client access to the data layer and I find myself implementing a lot of the \"same\" functions corresponding with Getting some entities from my model, for example <code>GetOrders</code>, and after changing them in the client, a <code>Save(Order order)</code> or <code>Save(TrackableCollection&lt;Orders&gt; orders)</code> operation to persist the changes.</p>\n\n<p>I'm wondering if there exists a T4 template that could build the basic interface, with Get/Save for single and collections of each entity and the corresponding service implementation from my model?</p>\n\n<p>I'm aware that I could write my own T4 Template to generate this service, and I will probably do just that if I have to, but first I thought I'd ask the community if this effort exists already somewhere on the internet, is planned, is desired by others and/or is a totally stupid idea.</p>\n\n<p>I did find this <a href=\"http://blogs.msdn.com/b/phaniraj/archive/2010/08/10/t4-templates-for-wcf-data-services-part-i.aspx\" rel=\"nofollow\">WCF Data Services Generator</a> example, which is kind of on the right track.</p>\n\n<p>Maybe something more suited to STEs using WCF in an n-tier solution is out there?</p>\n"},{"tags":["wcf","windows-phone-7","timeout","endpoint"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":232,"score":0,"question_id":8739354,"title":"Windows Phone 7 throws EndpointNotFoundException after one minute","body":"<p>Calling a WCF Service in my application throws EndpointNotFoundException after one minute. All timeouts are more than one minute.</p>\n\n<pre><code>var binding = new BasicHttpBinding {\n    OpenTimeout = TimeSpan.FromMinutes(3),\n    CloseTimeout = TimeSpan.FromMinutes(6),\n    ReceiveTimeout = TimeSpan.FromMinutes(2),\n    SendTimeout = TimeSpan.FromMinutes(5)\n};\nclient = new ServiceClient(binding, new EndpointAddress(\"http://...\"));\nclient.InnerChannel.OperationTimeout = TimeSpan.FromMinutes(4);\n</code></pre>\n\n<p>I found a thread on Microsoft's forum, but there is no solution.\n<a href=\"http://social.msdn.microsoft.com/Forums/ar/windowsphone7series/thread/cba9c633-6d79-4c04-8c08-cd0b5b33d8c6\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/ar/windowsphone7series/thread/cba9c633-6d79-4c04-8c08-cd0b5b33d8c6</a></p>\n\n<p>The problem occurs only with services that work out more than one minute. \nInvoke of this service throws EndpointNotFoundException:</p>\n\n<pre><code>public string Test() {\n    Thread.Sleep(60000);\n    return \"test\";\n}\n</code></pre>\n\n<p>But invoke of this service works correctly:</p>\n\n<pre><code>public string Test() {\n    Thread.Sleep(58000);\n    return \"test\";\n}\n</code></pre>\n"},{"tags":["c#","jquery","asp.net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12833160,"title":"How can i call wcf using jquery in asp.net application","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11048507/call-web-service-from-jquery\">Call web service from jQuery</a>  </p>\n</blockquote>\n\n\n\n<p>I want to add two numbers together, the operation must be done in WCF, and the result will be \ndisplay in default.aspx page.</p>\n\n<p>How can I pass the values of my two textboxes to the WCF service using jquery?</p>\n"},{"tags":["wcf","message"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12832705,"title":"WCF: The issue with using System.ServiceModel.Channels.Message class?","body":"<p>I'm trying to use WCF service with raw messages.</p>\n\n<p>1) WCF service code:</p>\n\n<pre><code>[DataContract]\npublic class Person\n{\n    [DataMember]\n    public int Id { get; set; }\n\n    [DataMember]\n    public string FirstName { get; set; }\n\n    [DataMember]\n    public string LastName { get; set; }\n}\n\npublic static List&lt;Person&gt; CreateEmployees()\n{\n    List&lt;Person&gt; lstPersons = new List&lt;Person&gt;()\n    {\n        new Person { Id = 1, FirstName = \"Andrey\", LastName = \"Andreyev\" },\n        new Person { Id = 2, FirstName = \"Sergey\", LastName = \"Sergeyev\" }\n    };\n\n    return lstPersons;\n}\n\n[ServiceContract]\npublic interface ITestService\n{\n    [OperationContract(Action = TestService.RequestAction, ReplyAction = TestService.ReplyAction)]\n    Message GetPersonById(Message id);\n}\n\npublic class TestService : ITestService\n{\n    public const String ReplyAction = \"http://localhost:4249/Message_ReplyAction\";\n    public const String RequestAction = \"http://localhost:4249/Message_RequestAction\";\n\n    public Message GetPersonById(Message id)\n    {\n        string firstName = Employees.CreateEmployees().First(e =&gt; e.Id == id.GetBody&lt;int&gt;()).FirstName;\n        Message response = Message.CreateMessage(id.Version, ReplyAction, firstName);\n        return response;\n    }\n}\n</code></pre>\n\n<p>2) Client code:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    TestServiceClient client = new TestServiceClient();\n    String RequestAction = \"http://localhost:4249/Message_RequestAction\";\n    int value = 1;\n    Message request = Message.CreateMessage(MessageVersion.Default, RequestAction, value);\n    Message reply = client.GetPersonById(request);\n    string firstName = reply.GetBody&lt;string&gt;();\n\n    Console.WriteLine(firstName);\n    client.Close();\n}\n</code></pre>\n\n<p>When I run the client with: int value = 1 everything works fine. But, when I use: int value = 2 I get the following error:</p>\n\n<p>System.Runtime.Serialization.SerializationException was unhandled\n  Message=\"Error in line 1 position 276. Expecting element 'string' from namespace 'http://schemas.microsoft.com/2003/10/Serialization/'.. Encountered 'Element'  with name 'Fault', namespace 'http://www.w3.org/2003/05/soap-envelope'. \"\n  Source=\"System.Runtime.Serialization\"\n  StackTrace:\n       at System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName)\n       at System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName)\n       at System.Runtime.Serialization.XmlObjectSerializer.ReadObject(XmlDictionaryReader reader)\n       at System.ServiceModel.Channels.Message.GetBody[T](XmlObjectSerializer serializer)\n       at System.ServiceModel.Channels.Message.GetBodyT\n       at ClientTestService.Program.Main(String[] args) in E:\\Projekti\\WCF\\Parus\\ClientTestService\\ClientTestService\\Program.cs:line 22\n       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)\n       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)\n       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\n       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\n       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n       at System.Threading.ThreadHelper.ThreadStart()\n  InnerException: </p>\n\n<p>At line:</p>\n\n<pre><code>string firstName = reply.GetBody&lt;string&gt;();\n</code></pre>\n\n<p>The service is started and I've added the service reference through \"Add Service Reference...\" in VS2008. I use .NET Framework 3.5.</p>\n\n<p>I'm not sure why I'm getting this error.</p>\n\n<p>When I don't use Message class everything works fine. I mean on this:</p>\n\n<pre><code>[ServiceContract]\npublic interface ITestService\n{\n    [OperationContract]\n    Person GetPersonById(int id);\n}\n\npublic class TestService : ITestService\n{\n    public Person GetPersonById(int id)\n    {\n        Person person = Employees.CreateEmployees().First(e =&gt; e.Id == id);\n        return person;\n    }\n}\n</code></pre>\n\n<p>2) Client code:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    TestServiceClient client = new TestServiceClient();\n    int value = 1;\n    Person person = client.GetPersonById(value);\n\n    Console.WriteLine(person.FirstName);\n    client.Close();\n}\n</code></pre>\n\n<p>I would be really thankful if somebody can help.</p>\n\n<p>Goran</p>\n"},{"tags":["wcf","streaminsight"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12816357,"title":"StreamInsight Wcf Sample with resiliency","body":"<p>I'm getting to know StreamInsight (v2.1!) and started working on an application based on the WCF Sample from the StreamInsight Team.\nNow I would like to add resilience and monitoring to that application but can't figure out how. I've tried following the Checkpointing Sample and these tutorials but with no luck:\n<a href=\"http://msdn.microsoft.com/en-us/library/hh290476(v=sql.111).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/hh290476(v=sql.111).aspx</a></p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ee391166(v=sql.111).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ee391166(v=sql.111).aspx</a></p>\n\n<p>Should I adapt the WcfObservable? Or how should I add resilience to my observable, observer and query?</p>\n\n<p>This is part of my code:</p>\n\n<pre><code>var wcfIn = app.DefineObservable(() =&gt; new WcfObservable(wcfSourceURL));\nvar wcfStream = wcfIn.ToPointStreamable(i =&gt; PointEvent.CreateInsert&lt;Measurement&gt;(i.T, i.M),\n                                             AdvanceTimeSettings.IncreasingStartTime);\n\n//Check measurements for deflections\nvar deflectionQuery = from r in wcfStream\n                      where r.Value &gt; measurableValue * 1 + threshhold || r.Value &lt; measurableValue * 0 + threshhold\n                      select new OutputEvent\n                      {\n                           M = r,\n                           Deflection = (r.Value - measurableValue) / measurableValue,\n                           Error = \"Deflection\"\n                      };\nvar sqlObserver = app.DefineObserver(() =&gt; Observer.Create&lt;OutputEvent&gt;(SqlWritePoint));\nproc = deflectionQuery.Bind(sqlObserver).RunCheckpointable(procName);\n</code></pre>\n\n<p>Thanks in advance for your time!</p>\n"},{"tags":["c#",".net","wcf","ssl","https"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3555,"score":1,"question_id":6846038,"title":"Could not find a base address that matches scheme http for the endpoint with binding WSHttpBinding","body":"<p>I dida wcf username/password authentication  on my local computer, with self signed certificate, all works fine, but when i put my  application on IIS 7.5, and windows server 2008 R2, it gaves me the error:<br /><br />\n<strong>Could not find a base address that matches scheme http for the endpoint with binding WSHttpBinding. Registered base address schemes are [https].</strong> \nMy web service cfg:<br /></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n&lt;system.serviceModel&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"ServiceCredentialsBehavior\"&gt;\n      &lt;serviceCredentials&gt;\n        &lt;serviceCertificate findValue=\"cn=AmicCert\" storeName=\"Root\" storeLocation=\"LocalMachine\" /&gt;\n        &lt;userNameAuthentication userNamePasswordValidationMode=\"Custom\" customUserNamePasswordValidatorType=\"Util.CustomUserNameValidator, Util\" /&gt;\n      &lt;/serviceCredentials&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"ServiceCredentialsBehavior\" name=\"Service\"&gt;\n    &lt;endpoint address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"MessageAndUserName\" name=\"SecuredByTransportEndpoint\" contract=\"IService\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"MessageAndUserName\"&gt;\n      &lt;security mode=\"Message\"&gt;\n        &lt;message clientCredentialType=\"UserName\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n      &lt;client /&gt;\n   &lt;/system.serviceModel&gt;\n  &lt;system.web&gt;\n&lt;compilation debug=\"true\" /&gt;\n &lt;/system.web&gt;\n &lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#","wcf","amazon"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":727,"score":2,"question_id":9448589,"title":"Amazon Product Advertising API ItemSearch Returning Null","body":"<p>I have spent entire day trying to fix problems with the Amazon ECS(Ecommerce Services) API.</p>\n\n<p>I have downloaded the example on their site for sending SOAP Requests with .NET 4.0 and WCF</p>\n\n<p><a href=\"http://aws.amazon.com/code/Product-Advertising-API/3941\" rel=\"nofollow\">http://aws.amazon.com/code/Product-Advertising-API/3941</a></p>\n\n<p>I have not changed anything in the code from the example, except for the AccessKeyID and SecretyKeyID in the config file. </p>\n\n<p>The Calling code looks like the following:</p>\n\n<pre><code>        // Instantiate Amazon ProductAdvertisingAPI client\n        AWSECommerceServicePortTypeClient amazonClient = new AWSECommerceServicePortTypeClient();\n\n        // prepare an ItemSearch request\n        ItemSearchRequest request = new ItemSearchRequest();\n        request.SearchIndex = \"Books\";\n        request.Title = \"WCF\";\n        request.ResponseGroup = new string[] { \"Medium\"};\n\n        ItemSearch itemSearch = new ItemSearch();\n        itemSearch.Request = new ItemSearchRequest[] { request };\n        request.Condition = Condition.All;\n        itemSearch.AssociateTag = \"\";\n        itemSearch.AWSAccessKeyId = ConfigurationManager.AppSettings[\"accessKeyId\"];\n\n        // send the ItemSearch request\n        ItemSearchResponse response = amazonClient.ItemSearch(itemSearch);\n        if (response != null)\n        {\n            // write out the results from the ItemSearch request\n            foreach (var item in response.Items[0].Item)\n            {\n                Console.WriteLine(item.ItemAttributes.Title);\n            }\n        }\n        Console.WriteLine(\"done...enter any key to continue&gt;\");\n        Console.ReadLine();\n</code></pre>\n\n<p>the Call to the ItemSearch() is returning a null object. I looked further into this and saw that in the AmazongSigningMessageInspector Class, the AfterReceiveReply() method is showing that a proper SOAP XML response is being returned with results, so I know that it is making the call to the service and returning correctly. For some reason though I am left with a NULL ItemSearch object.</p>\n\n<p>The code for my classes are the following:</p>\n\n<pre><code>class AmazonSigningBehaviorExtensionElement : BehaviorExtensionElement\n{\n    public AmazonSigningBehaviorExtensionElement()\n    {\n    }\n\n    public override Type BehaviorType\n    {\n        get\n        {\n            return typeof(AmazonSigningEndpointBehavior);\n        }\n    }\n\n    protected override object CreateBehavior()\n    {\n        return new AmazonSigningEndpointBehavior(AccessKeyId, SecretKey);\n    }\n\n    [ConfigurationProperty(\"accessKeyId\", IsRequired = true)]\n    public string AccessKeyId\n    {\n        get { return (string)base[\"accessKeyId\"]; }\n        set { base[\"accessKeyId\"] = value; }\n    }\n\n    [ConfigurationProperty(\"secretKey\", IsRequired = true)]\n    public string SecretKey\n    {\n        get { return (string)base[\"secretKey\"]; }\n        set { base[\"secretKey\"] = value; }\n    }\n}\n\n\npublic class AmazonSigningEndpointBehavior : IEndpointBehavior {\n    private string  _accessKeyId    = \"\";\n    private string  _secretKey  = \"\";\n\n    public AmazonSigningEndpointBehavior()\n    {\n        this._accessKeyId = ConfigurationManager.AppSettings[\"accessKeyId\"];\n        this._secretKey = ConfigurationManager.AppSettings[\"secretKey\"];\n    }\n\n    public AmazonSigningEndpointBehavior(string accessKeyId, string secretKey) {\n        this._accessKeyId   = accessKeyId;\n        this._secretKey     = secretKey;\n    }\n\n    public void ApplyClientBehavior(ServiceEndpoint serviceEndpoint, ClientRuntime clientRuntime) {\n        clientRuntime.MessageInspectors.Add(new AmazonSigningMessageInspector(_accessKeyId, _secretKey));\n    }\n\n    public void ApplyDispatchBehavior(ServiceEndpoint serviceEndpoint, EndpointDispatcher endpointDispatcher) { return; }\n    public void Validate(ServiceEndpoint serviceEndpoint) { return; }\n    public void AddBindingParameters(ServiceEndpoint serviceEndpoint, BindingParameterCollection bindingParameters) { return; }\n}\n\npublic class AmazonSigningMessageInspector : IClientMessageInspector {\n    private string  _accessKeyId    = \"\";\n    private string  _secretKey  = \"\";\n\n    public AmazonSigningMessageInspector(string accessKeyId, string secretKey) {\n        this._accessKeyId   = accessKeyId;\n        this._secretKey     = secretKey;\n    }\n\n    public object BeforeSendRequest(ref Message request, IClientChannel channel) {\n        // prepare the data to sign\n        string      operation       = Regex.Match(request.Headers.Action, \"[^/]+$\").ToString();\n        DateTime    now             = DateTime.UtcNow;\n        string      timestamp       = now.ToString(\"yyyy-MM-ddTHH:mm:ssZ\");\n        string      signMe          = operation + timestamp;\n        byte[]      bytesToSign     = Encoding.UTF8.GetBytes(signMe);\n\n        // sign the data\n        byte[]      secretKeyBytes  = Encoding.UTF8.GetBytes(_secretKey);\n        HMAC        hmacSha256      = new HMACSHA256(secretKeyBytes);\n        byte[]      hashBytes       = hmacSha256.ComputeHash(bytesToSign);\n        string      signature       = Convert.ToBase64String(hashBytes);\n\n        // add the signature information to the request headers\n        request.Headers.Add(new AmazonHeader(\"AWSAccessKeyId\", _accessKeyId));\n        request.Headers.Add(new AmazonHeader(\"Timestamp\", timestamp));\n        request.Headers.Add(new AmazonHeader(\"Signature\", signature));\n\n        return null;\n    }\n\n    public void AfterReceiveReply(ref Message reply, object correlationState)\n    {\n\n\n    }\n}\n</code></pre>\n\n<p>I have seen this problem everywhere, but nobody has posted a fix for it anywhere. Somebody please help me with this.</p>\n"},{"tags":["android","asp.net","wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":90,"score":1,"question_id":12833058,"title":"What is difference between SOAP and WCF android","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9503851/difference-between-wcf-services-and-web-services-and-rest-service\">difference between WCF Services and Web Services and REST Service</a>  </p>\n</blockquote>\n\n\n\n<p>I have android application which is fetching the data from the online server, using .net web service. Up to now I used a SOAP method to get the data by send the Input XML and getting the Output XML. The received XML will be parsed using the DOM parser. Use KSOAP library.</p>\n\n<p>Now the Web service has been change to Windows Communication Foundation (WCF). Here how can i send the request and How will be the responds. What library file should i use. I have some confusion with this. I know the only difference between SOAP and WCF, WCF is faster then SOAP. Can anyone clear my doubt.</p>\n"},{"tags":[".net","wcf","service","reference"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1460,"score":3,"question_id":3000209,"title":"Service reference not generating client types","body":"<p>I am trying to consume a WCF service in a class library by adding a service reference to it. In one of the class libraries it gets consumed properly and I can access the client types in order to generate a proxy off of them. However in my second class library (or even in a console test app), when i add the same service reference, it only exposes the types that are involved in the contract operations and not the client type for me to generate a proxy against. </p>\n\n<p>e.g. Endpoint has 2 services exposed - ISvc1 and ISvc2. When I add a service reference to this endpoint in the first class library I get ISvc1Client andf ISvc2Client to generate proxies off of in order to use the operations exposed via those 2 contracts. In addition to these clients the service reference also exposes the types involved in the operations like (type 1, type 2 etc.) this is what I need. However when i try to add a service reference to the same endpoing in another console application or class library only Type 1, Type 2 etc. are exposed and not ISvc1Client and ISvc2Client because of which I cannot generate a proxy to access the operations I need. I am unable to determine why the service reference gets properly generated in one class library but not in the other or the test console app.</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12814481,"title":"Keeping alive WCF process","body":"<p>I have a long running process in WCF that takes 2-3 hours. The WCF runs for a long time after essentially the client that started the process leaves/times out. How long does it take for a WCF w3wp process to disappear since there was no connections to it. I'm thinking that even though the WCF is processing, it might stop WCF service because there was no new connection to it?</p>\n"},{"tags":["wcf","message"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12826817,"title":"WCF: Why to use System.ServiceModel.Channels.Message class?","body":"<p>I have a general question. Why sometimes should we use System.ServiceModel.Channels.Message class instead of some concrete class when we create WCF service?</p>\n\n<p>For example:</p>\n\n<p>1) We can use the following:</p>\n\n<pre><code>public Person GetPersonById(int id)\n{\n    Person person = Employees.CreateEmployees().First(e =&gt; e.Id == id);\n    return person;\n}\n</code></pre>\n\n<p>2) But we can use the following as well:</p>\n\n<pre><code>public Message GetPersonById(Message id)\n{\n    string firstName = Employees.CreateEmployees().First(e =&gt; e.Id == id.GetBody&lt;int&gt;()).FirstName;\n    Message response = Message.CreateMessage(id.Version, ReplyAction, firstName);\n    return response;\n}\n</code></pre>\n\n<p>What's the difference? Will I have the same result in both cases?</p>\n\n<p>Thank you in advance.</p>\n\n<p>Goran</p>\n"},{"tags":["wcf","wcf-security"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12197079,"title":"WCF wsHttpBinding Security Error","body":"<p>I have a WCF hosted in a Windows Service and running with user domain account.</p>\n\n<p>All my clients (Console applicatio or Web Applications) in the domain work very well.</p>\n\n<p>I have a console application that is not in the domain that does not work.</p>\n\n<p>Herei is the error :</p>\n\n<pre><code>Exception non gre: System.ServiceModel.Security.SecurityNegotiationException:\nL'appelant n'a pas t authentifi par le service. ---&gt; System.ServiceModel.Fau\nltException: The request for security token could not be satisfied because authe\nntication failed.\n</code></pre>\n\n<p>Here is the WCF Server config :</p>\n\n<pre><code>      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"TransactionalBind\" transactionFlow=\"true\"/&gt;\n      &lt;/wsHttpBinding&gt;\n\n[...]\n\n    &lt;endpoint address=\"http://machine.domain.fr:1083/MyService/\"\n              binding=\"wsHttpBinding\"\n              bindingConfiguration=\"TransactionalBind\"\n              contract=\"MyService.IMyService\"/&gt;\n[...]\n\n    &lt;behavior name=\"MyBahavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"True\" /&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"2147483647\" /&gt;\n    &lt;/behavior&gt;\n</code></pre>\n\n<p>Here is my client config :</p>\n\n<pre><code>        &lt;wsHttpBinding&gt;\n            &lt;binding name=\"WSHttpBinding_IMyService\" closeTimeout=\"00:01:00\"\n                openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                bypassProxyOnLocal=\"false\" transactionFlow=\"true\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                allowCookies=\"false\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                    enabled=\"false\" /&gt;\n                &lt;security mode=\"Message\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n                        algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/wsHttpBinding&gt;\n[...]\n\n        &lt;client&gt;\n            &lt;endpoint address=\"http://machine.domain.fr:1083/MyService/\"\n                binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_IMyService\"\n                contract=\"wsArchi.IMyService\" name=\"WSHttpBinding_IMyService\"&gt;\n            &lt;/endpoint&gt;\n        &lt;/client&gt;\n</code></pre>\n\n<p>Can you help me please ?</p>\n\n<p>Many Thanks</p>\n"},{"tags":["c#","asp.net",".net","vb.net","wcf"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3305,"score":1,"question_id":9092688,"title":"WCF WSHttpBinding SOAP Security Negotiation Failed","body":"<p>I've got a fairly simple WCF self-hosted service using the WSHttpBinding that just refuses to work. If service and client runs on the same machine there's no problem, but as soon as I move the service to the window-server 2008 the client fails the communication attempts with</p>\n\n<blockquote>\n  <p>EXCEPTION</p>\n  \n  <p>[System.ServiceModel.Security.SecurityNegotiationException] {\"SOAP security negotiation with 'http://hvw-svr-01/SIT' for target 'http://hvw-svr-01/SIT' failed. See inner exception for more details.\"}</p>\n  \n  <p>INNER EXCEPTION</p>\n  \n  <p>[System.ComponentModel.Win32Exception] {\"The Security Support Provider Interface (SSPI) negotiation failed. The server may not be running in an account with identity 'host/hvw-svr-01'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.\"}</p>\n</blockquote>\n\n<p>Since it's a self-hosted service I suppose I need to specify the UserPrincipalName, but no matter what I try for that property it just won't work.</p>\n\n<ul>\n<li>domain\\username</li>\n<li>domain@username</li>\n<li>host/localhost</li>\n<li>host/hvw-svr-01</li>\n<li>... and so on</li>\n</ul>\n\n<p>Tried it with different user accounts aswell, including the built-in Administrator. If I try BasicHttpBinding instead of WSHttpBinding everything works as expected. I read tons of articles about that problem on google (and stackoverflow) but I still cannot figure what the problem is and how to specify that identity.</p>\n\n<p>Edit: Service App.Config</p>\n\n<pre><code>   &lt;system.serviceModel&gt;\n  &lt;services&gt;\n     &lt;service name=\"SIT.Communication.Gate\"&gt;\n        &lt;host&gt;\n           &lt;baseAddresses&gt;\n              &lt;add baseAddress=\"http://localhost:2323/SIT\" /&gt;\n           &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"\" binding=\"wsHttpBinding\" contract=\"SIT.Core.IGate\"&gt;\n           &lt;identity&gt;\n              &lt;dns value=\"localhost\"/&gt;\n              &lt;userPrincipalName value=\"XZDom\\DGrain\"/&gt;\n           &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n     &lt;/service&gt;\n  &lt;/services&gt;\n  &lt;behaviors&gt;\n     &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n           &lt;serviceMetadata httpGetEnabled=\"True\"/&gt;\n           &lt;serviceDebug includeExceptionDetailInFaults=\"True\" /&gt;\n        &lt;/behavior&gt;\n     &lt;/serviceBehaviors&gt;\n  &lt;/behaviors&gt;\n</code></pre>\n\n<p></p>\n\n<p>Edit: The Client itself is basically just this code fragment</p>\n\n<blockquote>\n<pre><code>        ChannelFactory&lt;IGate&gt; sitFactory = new ChannelFactory&lt;IGate&gt;(new WSHttpBinding(), new EndpointAddress(\"http://hvw-svr-01:2323/SIT\"));\n        IGate sitProxy = sitFactory.CreateChannel();\n        bool pong = sitProxy.Ping(); &lt;------ throws exception\n</code></pre>\n</blockquote>\n"},{"tags":[".net","wcf","x509certificate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12824901,"title":"Custom certificate validation in client and server with WCF","body":"<p>I have a very specific configuration where WCF clients and servers needs to be authenticated using certificate.\nBecause this certificate will be only used by my clients and servers applications and is not possible to generate one dedicated certificate for each instance, then self-signed was the way.\nSo, I have the hole connection working well, I can attach the client certificate in the channel pointing to server, and the server service is also attaching its own certificate.\nI want to be sure that only allowed clients can call my service, so validation must be done in server side.\nI'm using a custom validator (X509CertificateValidator) overriding method Validate(X509Certificate2 certificate)\nSo far, all is ok, the method is called when connection established, it receive client's certificate with all properties and here is the question:</p>\n\n<p>-How can I be sure the certificate I'm receiving is the original one in order to validate my client ??</p>\n\n<p>Right now, I'm testing with a real(fake) certificate, exported from a website using HTTPS, (export the certificate showed in browser and installed locally).\nI dont have the private key of course, but I'm able to attach this certificate in my client's connection and it is received well in server side.\nAll properties inside this certificate are the same than the original, but it is not !!\nSo, how can I validate that the certificate I'm receiving in server side is the original one and not just a copy ??\nThere is any way to put some signature in the call using the certificate's private key ??</p>\n\n<p>thanks a lot</p>\n"},{"tags":["wcf","logging"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":919,"score":3,"question_id":2354427,"title":"How to restrict WCF logging","body":"<p>We've using lots of WCF services in our application and we're finding the logging is really useful but the files tend to grow fairly quickly. In fact, we can usually only play around with  a service for 10 minutes or so, until the log file is more then 10mb and too slow to load.</p>\n\n<p>Is there anyway to restrict the logging to only 1000 entries, or use a rolling file, etc?? </p>\n"},{"tags":[".net","wcf","silverlight","webhttpbinding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12790770,"title":"How does WCF Decide the Endpoint Addresses used in webHttpBinding with ASP.NET Routing?","body":"<p>I have a WCF service used by some Silverlight code in our web application. It uses the ASP.NET Routing functionality:</p>\n\n<pre><code>private void RegisterRoutes()\n{\n    var factory = new WebServiceHostFactory();\n    RouteTable.Routes.Add(new ServiceRoute(\"Service\", factory, typeof(ServiceService)));\n}\n</code></pre>\n\n<p>This currently works in our Production environment.</p>\n\n<p>On some other environments, I get the exception </p>\n\n<blockquote>\n  <p>System.InvalidOperationException: Could not find a base address that\n  matches scheme http for the endpoint with binding WebHttpBinding.\n  Registered base address schemes are [https].</p>\n</blockquote>\n\n<p>I have just deployed the exact same code to our Integration environment and to our Training environment. It works in Integration, but fails in Training. Both environments are running the same version of Windows Server 2008 R2 Enterprise, with the same version of IIS 7.5. Both have the same bindings configured in IIS (ports 443 and 80 on all IP addresses).</p>\n\n<p>I have instrumented the code and can see that when it works, both http and https are being used by the service. When it fails, only https is used. The web.config is identical between the two systems.</p>\n\n<p>I know that, in general, with a service hosted in an IIS application, WCF uses the binding information in IIS. In this case, the ASP.NET routing feature is being used.</p>\n\n<p>How does WCF determine which base addresses to use?</p>\n\n<hr>\n\n<p><strong>Update</strong>: Here's an excerpt of our web.config file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;diagnostics&gt;\n      &lt;endToEndTracing propagateActivity=\"true\" activityTracing=\"true\"\n       messageFlowTracing=\"true\" /&gt;\n    &lt;/diagnostics&gt;\n    &lt;extensions&gt;\n      &lt;behaviorExtensions&gt;\n        &lt;add name=\"silverlightFaults\" type=\"Services.SilverlightFaultBehavior, Services\" /&gt;\n      &lt;/behaviorExtensions&gt;\n    &lt;/extensions&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"ServiceBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"false\" /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\" /&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"SilverlightRESTBehavior\"&gt;\n          &lt;webHttp helpEnabled=\"false\" automaticFormatSelectionEnabled=\"false\" \n                   defaultOutgoingResponseFormat=\"Json\" faultExceptionEnabled=\"false\" /&gt;\n          &lt;silverlightFaults /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"ServiceBehavior\" name=\"Services.SpendAnalysisService\"&gt;\n        &lt;endpoint address=\"\" behaviorConfiguration=\"SilverlightRESTBehavior\"\n          binding=\"webHttpBinding\" contract=\"Services.SpendAnalysisService\" /&gt;\n        &lt;host&gt; &lt;!-- Added: not in the original--&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress=\"http://\" /&gt;\n            &lt;add baseAddress=\"https://\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;standardEndpoints&gt;\n      &lt;webHttpEndpoint&gt;\n        &lt;standardEndpoint name=\"d\" helpEnabled=\"false\" defaultOutgoingResponseFormat=\"Json\"\n          automaticFormatSelectionEnabled=\"false\" faultExceptionEnabled=\"false\" /&gt;\n      &lt;/webHttpEndpoint&gt;\n    &lt;/standardEndpoints&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong>:</p>\n\n<p>Another hint: \"SSL Required\" was set in IIS in the Training environment, and was cleared in the Integration environment. Clearing it in the Training environment prevents the server-side exception. Now, the WCF logs in both environments show that both http and https addresses are being considered.</p>\n\n<p>The question will now be: why does WCF think it needs http when the request arrives as https?</p>\n"},{"tags":["wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":12779980,"title":"Getting the error when the Thread or Timer methods used in WCF","body":"<p>In my WCF Application if I am not using the Thread or Timer events I am not getting any result I am getting the run time error.</p>\n\n<p>How can I achieve it with out using the Thread or timer to run the SP continuously.</p>\n"},{"tags":["wcf","authentication","iis","powershell","ssl"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":12820839,"title":"Modifying Authentication on web application / service in IIS(7/.5) via Powershell","body":"<p>I am trying to install a wcf-servce by using New-WebApplication in powershell. It works fine. However, how can I Modify the Authentication? I want to enable Anonymous Access Authentication and disable the rest. I would also like to \"Require SSL\" on it. I have searched the great web but there are only articles and hits Regarding SharePoint.</p>\n\n<p>Does anyone have any ideas or tips?</p>\n\n<p>PS: Windows Server 2008R2\n - DA</p>\n"},{"tags":["wpf","wcf","file"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12828350,"title":"wpf upload file to server","body":"<p>I am developing a wpf app that communicates to db with wcf. One requirement is to upload files, and index them for later retrieval. What is the best method of doing this without reinventing the wheel. I am scared to use wcf for this fearing timeouts. Solution needs to be in a background thread, allow me to track progress, retry or continue on failure, and be encrypted. I can't find a file upload control like I had in silverlight / asp.net</p>\n\n<p>Or should I b integrating into a dms? </p>\n"},{"tags":["c#",".net","wcf","soap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":209,"score":0,"question_id":9507942,"title":"Adding a custom namespace to soap envelop in WCF","body":"<p>I am calling a service, which needs a particular namespace added to the soap envelop.</p>\n\n<p>for example here is my sample regular soap message </p>\n\n<pre><code>    &lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"  xmlns:sec=\"ANOTHER NAMESPACE THAT I WANT TO ADD\" &gt;\n      &lt;s:Header&gt;\n\n     &lt;/s:Header&gt;\n    &lt;s:Body xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"   xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n    &lt;xyz xmlns=\"\"&gt;\n   &lt;customerId&gt;2511&lt;/customerId&gt;\n  &lt;/xyz&gt;\n   &lt;/s:Body&gt;\n   &lt;/s:Envelope&gt;\n</code></pre>\n\n<p>I am already implementing   IDispatchMessageInspector, IClientMessageInspector for some other purpose, i m not sure if i have to do something there to add the extra namespace. </p>\n"},{"tags":["c#",".net","wcf","active-directory","directoryservices"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":10352,"score":5,"question_id":1722398,"title":"Error 0x80005000 and DirectoryServices","body":"<p>I'm trying to run a simple LDAP query using directory services in .Net.</p>\n\n<pre><code>    DirectoryEntry directoryEntry = new DirectoryEntry(\"LDAP://someserver.contoso.com/DC=contoso,DC=com\");\n    directoryEntry.AuthenticationType = AuthenticationTypes.Secure;\n\n    DirectorySearcher directorySearcher = new DirectorySearcher(directoryEntry);\n\n    directorySearcher.Filter = string.Format(\"(&amp;(objectClass=user)(objectCategory=user) (sAMAccountName={0}))\", username);\n\n    var result = directorySearcher.FindOne();\n    var resultDirectoryEntry = result.GetDirectoryEntry();\n\n    return resultDirectoryEntry.Properties[\"msRTCSIP-PrimaryUserAddress\"].Value.ToString();\n</code></pre>\n\n<p>And I'm getting the following exception:</p>\n\n<pre><code>System.Runtime.InteropServices.COMException (0x80005000): Unknown error (0x80005000)\n  at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)\n  at System.DirectoryServices.DirectoryEntry.Bind()\n  at System.DirectoryServices.DirectoryEntry.get_AdsObject()\n  at System.DirectoryServices.DirectorySearcher.FindAll(Boolean findMoreThanOne)\n  at System.DirectoryServices.DirectorySearcher.FindOne()\n</code></pre>\n\n<p>As a snippet in a Console app, this works. But when I run it as part of a WCF service (run under the same credentials), it throws the above exception.</p>\n\n<p>Any suggestions?</p>\n\n<p>Thanks</p>\n"},{"tags":[".net","wcf","migration","ibm-midrange"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12808252,"title":"What is the prefered method AS400 Bridging?","body":"<p>I'm currently working on a project using C# and SQL Studio 2010 that needs to communicate with our legacy program running on the AS400. We have access to a 3rd party suite called ASNA that allows dotNet to compile RPG code and can transparently access ISeries and MS SQL Stuidio.</p>\n\n<p>We have a batch job that needs to return its results (numbering perhaps 300,000+ items) to the AS400. We typically use WCF services, but we fear that this may be too much data.</p>\n\n<p>Here are some options we have considered:</p>\n\n<ul>\n<li>WCF service that iterates over the data in chunks</li>\n<li>Produce a text file with necessary data changes and FTP it to a folder for the AS400 to read from</li>\n<li>Give read only access from the AS400 to a table with the relevant data</li>\n</ul>\n\n<p>Should we allow read access to a table or keep complete separation of the systems?</p>\n"},{"tags":["c#","asp.net-mvc","wcf","asp.net-mvc-3","asynchronous"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1241,"score":1,"question_id":6287670,"title":"MVC 3 - How to RedirectToAction immediately after asynchronous WCF call","body":"<p>How do i get my MVCcontroller method to call a long running WCF task asynchronously and redirect immediately after the asynchronously call is fired?</p>\n\n<p>I have configured my WCF service reference to \"Generate asynchronously operations\" yet when the method is called i can see in the debugger that code steps through and <strong>passes</strong> the \"RedirectToAction(\"RedirectToActionTestCompleted\")\" line but the browser does not redirect until the WCF task is finished.</p>\n\n<pre><code>public class HomeController : Controller\n{\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    public ActionResult About()\n    {\n        return View();\n    }\n\n    public ActionResult RedirectToActionTest()\n    {\n        Service1Client client = new Service1Client();\n        client.TestWcfCallAsync();\n        return RedirectToAction(\"RedirectToActionTestCompleted\");\n    }\n\n    public ActionResult RedirectToActionTestCompleted()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>And the WCF service method</p>\n\n<pre><code>public void TestWcfCall()\n{\n    Thread.Sleep(30000); //30 seconds\n}\n</code></pre>\n\n<p>Why is the web page waiting for the WCF method to complete?</p>\n"},{"tags":["asp.net","wcf","authentication","certificate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12826806,"title":"WCF, ASP.NET and mutual certificate authentication","body":"<p>I have a general question about a very specific situation. Let me try to explain the circumstances, so please bare with me...</p>\n\n<p>Basically, I have a .net WCF service (IIS hosted) that is called directly by some existing clients (third party, for them this is new functionality) and also over web (browser, web client is asp.net, written by us, also IIS hosted). I would like to keep the WCF service stateless. The channel has to be secured: the traffic has to be encrypted and clients and service have to be authenticated to each other (server methods also have to know who the caller client is). Each client already has a X509 certificate in a local store. Digital signature of client content is also a near future requirement.</p>\n\n<p>My first problem is that clients have to be \"dynamically\" registered on the server: some administration module will generate some username/password credentials for them and they will register themselves (they will basically \"upload\" their existing client certificate) with that credentials at first login.</p>\n\n<p>Is it possible to achive my requirements by existing .net security infrastructure? How would WCF have to be configured to achieve that? I have already explored mutual authentication but it looks like that each client certificate has to be in a server store and also mapped to a windows user - that I would like to avoid if possible. Is it even possible (or at least desirable) for WCF method to register a windows user and copy it's certificate to some server store?</p>\n\n<p>The second problem as I see it is that asp.net application has to somehow \"forward\" client certificate (chosen in a web browser) so that the WCF method has user certificate (same way as in a direct WCF service call).</p>\n\n<p>After few days of trial-and-error I have come up with a very straightforward and highly custom solution (which is not always a good thing). I would create a Login method with a \"secret\" string parameter, which would be a predefined string, encrypted with user certificate's private key. On the server I would keep all user's public keys (in a database), so I could dynamically add new users providing public key in registration procedure. If the \"secret\", decrypted with user's public key was that predefined value, the user is authenticated and some session token (say, GUID) is generated, saved to database and returned to user. Every method called from now on expects this token, verifies it in database - otherwise it rejects the user. This way, the database holds service's state. The channel would be encrypted (SSL, server-side certificate) so I don't see the problem transfering the session token around in every call.</p>\n\n<p>The problems that I see in this solution: third party clients have to implement the login (encryption) procedure and keep the session token - overhead? And the other: encrypting some string with private key inside web browser (we have to support IE, FF, and Chrome, so it's probably not trivial).</p>\n\n<p>Maybe I'm missing something obvious here. Any comments, ideas or propositions would be highly appreciated. I'm also available for any additional information. Thank you in advance!\nDB</p>\n"},{"tags":["wcf","impersonation","cyber-ark"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12826286,"title":"From a WCF service how can I call a method in a third party dll as the current user not IIS\\DefaultApppool","body":"<p>I have a requirement to write a WCF service that will be called from MS Excel using the Service Moniker from VBA code. So far that part I have figured out.</p>\n\n<p>I also have impersonation working so that if I were to return the current user from a web method it will return my username and not IIS\\DefaultAppPool or whatever IIS is running as...</p>\n\n<p>So here is my issue. I have a third party dll \"CyberArk Password Management if anyone is interested\" where I create a PWD object, set some parameters and then call a method named Getpassword. Now I can call the method but I always get a authenication failure. If I dig into the logs of the CyberArk agent that I have running it seems that even though I am using Impersonation that the dll method is still being called as IIS\\DefaultAppPool</p>\n\n<p>Here are a few snippets...</p>\n\n<p>Impersonation is turned on at the method Level</p>\n\n<pre><code>[OperationBehavior(Impersonation = ImpersonationOption.Required)]\n</code></pre>\n\n<p>A call to this method returns my Domain and User name as I would expect</p>\n\n<pre><code>WindowsIdentity.GetCurrent().Name\n</code></pre>\n\n<p>But this line is being called as IIS\\DefaultAppPool</p>\n\n<pre><code>password = PasswordSDK.GetPassword(passRequest);\n</code></pre>\n\n<p>I have tried doing Impersonation in Code rather than using the Annotaion, I have also tried a Impersonation object with a using bolck and nothing seems to work so here is what I am thinking.</p>\n\n<ol>\n<li><p>The dll somehow does not allow me to impersonate the caller for security reasons</p></li>\n<li><p>It may be the .NET framework not allowing this again for security reasons</p></li>\n<li><p>I have no clue and would love some help :-)</p></li>\n</ol>\n"},{"tags":["silverlight","wcf","httpservice"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2735,"score":0,"question_id":5336122,"title":"How to make WCF service https enabled and consume it in silverlight?","body":"<p>I have a silverlight client which currently communicates with WCF service unsecuredly.</p>\n\n<p>1>I want to make WCF service secured.(https enabled)\n2>I want to refer secure wcf service in silverlight client.</p>\n\n<p>Can anyone help in configuring service?</p>\n\n<p>Web.config :</p>\n\n<p></p>\n\n<pre><code>&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"&gt;&lt;/serviceHostingEnvironment&gt;\n\n&lt;bindings&gt;\n  &lt;basicHttpBinding&gt;\n    &lt;binding name=\"MyBasicHttpBinding\" &gt;          \n      &lt;security mode=\"Transport\" &gt;\n        &lt;transport clientCredentialType=\"None\"/&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/basicHttpBinding&gt;\n&lt;/bindings&gt;\n\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"DataService.Service1Behavior\"\n    name=\"DataService.Service1\"&gt;\n    &lt;endpoint address=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"MyBasicHttpBinding\"\n      contract=\"DataService.IService1\"&gt;         \n    &lt;/endpoint&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;     \n&lt;/services&gt;\n\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"DataService.Service1Behavior\"&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\" /&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\" httpHelpPageEnabled=\"true\" httpsHelpPageEnabled=\"true\" /&gt;\n    &lt;/behavior&gt;      \n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code></pre>\n\n<p></p>\n\n<p>I am getting following error message:</p>\n\n<p>Could not find a base address that matches scheme https for the endpoint with binding BasicHttpBinding. Registered base address schemes are [http]. </p>\n"},{"tags":["wcf","message"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12818405,"title":"How to use WCF service with raw messages?","body":"<p>I'm trying to use WCF service with raw messages.</p>\n\n<p>1) WCF service code:</p>\n\n<pre><code>[DataContract]\npublic class Person\n{\n    [DataMember]\n    public int Id { get; set; }\n\n    [DataMember]\n    public string FirstName { get; set; }\n\n    [DataMember]\n    public string LastName { get; set; }\n}\n\npublic static List&lt;Person&gt; CreateEmployees()\n{\n    List&lt;Person&gt; lstPersons = new List&lt;Person&gt;()\n    {\n        new Person { Id = 1, FirstName = \"Andrey\", LastName = \"Andreyev\" },\n        new Person { Id = 2, FirstName = \"Sergey\", LastName = \"Sergeyev\" }\n    };\n\n    return lstPersons;\n}\n\n[ServiceContract]\npublic interface ITestService\n{\n    [OperationContract(Action = TestService.RequestAction, ReplyAction = TestService.ReplyAction)]\n    Message GetPersonById(Message id);\n}\n\npublic class TestService : ITestService\n{\n    public const String ReplyAction = \"http://localhost:4249/Message_ReplyAction\";\n    public const String RequestAction = \"http://localhost:4249/Message_RequestAction\";\n\n    public Message GetPersonById(Message id)\n    {\n        string firstName = Employees.CreateEmployees().First(e =&gt; e.Id == id.GetBody&lt;int&gt;()).FirstName;\n        Message response = Message.CreateMessage(id.Version, ReplyAction, firstName);\n        return response;\n    }\n}\n</code></pre>\n\n<p>2) Client code:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    TestServiceClient client = new TestServiceClient();\n    String RequestAction = \"http://localhost:4249/Message_RequestAction\";\n    int value = 1;\n    Message request = Message.CreateMessage(MessageVersion.Default, RequestAction, value);\n    Message reply = client.GetPersonById(request);\n    string firstName = reply.GetBody&lt;string&gt;();\n\n    Console.WriteLine(firstName);\n    client.Close();\n}\n</code></pre>\n\n<p>When I run the client with: int value = 1 everything works fine. But, when I use: int value = 2 I get the following error:</p>\n\n<blockquote>\n  <p><em>Error in line 1 position 276. Expecting element 'string' from namespace 'http://schemas.microsoft.com/2003/10/Serialization/'.. Encountered 'Element'  with name 'Fault', namespace 'http://www.w3.org/2003/05/soap-envelope'.</em></p>\n</blockquote>\n\n<p>At line:</p>\n\n<pre><code>string firstName = reply.GetBody&lt;string&gt;();\n</code></pre>\n\n<p>The service is started and I've added the service reference through \"Add Service Reference...\" in VS2008. I use .NET Framework 3.5.</p>\n\n<p>I'm not sure why I'm getting this error.</p>\n\n<p>Thank you in advance for help.</p>\n\n<p>Goran</p>\n"},{"tags":["wcf","https","f5"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":751,"score":2,"question_id":4134589,"title":"WCF Service (wsHttpBinding binding) behind F5 load balancer","body":"<p>current setup:\n- i have got a WCF service with wsHttpBding, see the service config below\n- i have implemented a ServiceHostFactory to solve the problem of incorrect schema location and soap addresses, modifying them from machine name to the correct server hostname\n- my test client (WCFStorm) i can generate a proxy, see all the methods and invoke them successfully.\n- my dev environment (client-> HTTPS -> service) works perfectly.</p>\n\n<p>problems:\n- prod environment (client -> HTTPS -> F5 -> HTTP -> service)\n- my service is behind F5 load balancer which offloads SSL\n- my test client (WCFStorm) i can generate a proxy and see all the methods but when i invoke any of the methods i get a remote server not found 404 error</p>\n\n<ul>\n<li><p>my service config:\n<code>\n<code>\n&lt;services&gt;\n  &lt;service behaviorConfiguration=\"Service1Behavior\"\n    name=\"MyService\"&gt;\n    &lt;endpoint name=\"secure\" address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"custBinding\" contract=\"IService\"/&gt;\n    &lt;endpoint address=\"mex\" binding=\"mexHttpsBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"custBinding\"&gt;\n      &lt;security mode=\"Transport\"&gt;\n        &lt;transport clientCredentialType=\"None\" /&gt;\n        &lt;message clientCredentialType=\"None\" negotiateServiceCredential=\"false\"\n          establishSecurityContext=\"false\" /&gt;\n      &lt;/security&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior name=\"Service1Behavior\"&gt;\n      &lt;serviceMetadata httpsGetEnabled=\"true\" httpGetEnabled=\"true\" httpGetUrl=\"http://myserver/MyService.svc\"/&gt;\n      &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n      &lt;dataContractSerializer maxItemsInObjectGraph=\"6553600\" /&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n</code>\n</code></p></li>\n<li><p>please note that all my schema locations and soap addresses on the wsdl are correct in prod, but i simply cannot invoke any methods.</p></li>\n</ul>\n\n<p>please help.</p>\n"},{"tags":["c#","javascript","wcf","visual-studio","soap"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":82,"score":1,"question_id":12804166,"title":"Javascript + SOAP + WCF works on Visual Studio 2010 but not on Visual Studio 2008","body":"<p>I have the following code which works in a Visual Studio 2010 WCF project.<br>\nHowever when I recreated the project in Visual Studio 2008, it did not worked and only gave me the following error StatuesText \"Unsupported Media Type\".<br>\n<strong>Edit:</strong><br>\nWhat i figured out is that the problem is in the Web.config file since it is different between Visual Studio 2010 project and 2008 project. Therefore I've added the all Web.config to the Question.</p>\n\n<p>The javascript which calling the WCF service using soap is the following : </p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" &gt;\n&lt;head&gt;\n    &lt;title&gt;Untitled Page&lt;/title&gt;\n    &lt;script type=\"text/javascript\" src=\"jQuery/jquery-1.3.2.min.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"jQuery/jquery.xml2json.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\" src=\"jQuery/json2.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function MyRequest() {\n            debugger;\n            var methodName = \"GetData\"\n            var responseTagName = methodName + \"Response\";\n            var resultTagName = methodName + \"Result\";\n            var sendData = \"\";\n            sendData += '&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;';\n            sendData += ' &lt;s:Body&gt;';\n            sendData += ' &lt;' + methodName + ' xmlns=\"http://tempuri.org/\"&gt;';\n            sendData += ' &lt;name&gt;Shlomy&lt;/name&gt;';\n            sendData += ' &lt;/' + methodName + '&gt;';\n            sendData += ' &lt;/s:Body&gt;';\n            sendData += '&lt;/s:Envelope&gt;';\n            var response = $.ajax({\n                type: \"POST\",\n                contentType: \"text/xml; charset=utf-8\",\n                methodName: methodName,\n                url: \"http://localhost:16109/Service1.svc\",\n                data: sendData,\n                async: false,\n                beforeSend: function (req, methodName) {\n                    var soapActionURI = \"http://tempuri.org/IService1/GetData\";\n                    req.setRequestHeader(\"SOAPAction\", soapActionURI);\n                },\n                success: function (xml, type, xhr) {\n                    var result = $(xml).find(resultTagName);\n                    var resultjson = $.xml2json(result);\n                    successHandler(xml.text);\n                },\n                error: function (xmlHttpRequest, textStatus, errorThrown) {\n                    alert(xmlHttpRequest.responseText);\n                }\n            });\n        }\n\n        function successHandler(soapResult) {\n            alert(soapResult);\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;input type=\"button\" onclick=\"MyRequest()\" value=\"Call WCF via AJAX\" /&gt;\n&lt;/body&gt;\n&lt;/html&gt;  \n</code></pre>\n\n<p>And the WCF Service(HelloWorldWCFService) is the following:<br>\nService1.svc:  </p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"HelloWorldWCFServiceLibrary.Service1\" %&gt;\n&lt;%@ Assembly Name=\"HelloWorldWCFServiceLibrary\" %&gt;    \n</code></pre>\n\n<p>WCF Web.Config:  </p>\n\n<pre><code>        &lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"debug\"&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;services&gt;\n      &lt;service name=\"HelloWorldWCFServiceLibrary.Service1\" behaviorConfiguration=\"debug\" &gt;\n        &lt;endpoint address=\"mex\" binding=\"wsHttpBinding\" contract=\"HelloWorldWCFServiceLibrary.IService1\" /&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And the WCF Library(HelloWorldWCFServiceLibrary) is the following:<br>\nIService.cs:  </p>\n\n<pre><code>    // NOTE: You can use the \"Rename\" command on the \"Refactor\" menu to change the interface name \"IService1\" in both code and config file together.\n    [ServiceContract]\n    public interface IService1\n    {\n        [OperationContract]\n        CompositeType GetDataUsingDataContract(CompositeType composite);\n\n        // TODO: Add your service operations here\n        [OperationContract]\n        string GetData(string name);\n    }\n</code></pre>\n\n<p>Service1.cs:</p>\n\n<pre><code>public class Service1 : IService1\n{\n    public string GetData(string name)\n    {\n        return \"WCFSoapTest\";\n    }\n}\n</code></pre>\n\n<p>I've tried for several days figuring out what is the difference between the 2008 solution and the 2010 and why only the 2010 project works. but to no avail.  any suggestions ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","visual-studio-2010","wcf","web-services"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12823757,"title":"Update WCF service reference to WebService issue in VS 2010","body":"<p>My current project is using VS 2010. I'm new to WCF. I've consumed WebServices before but I've never had to generate the actual proxy. The current project I'm working on using WCF service reference to call a web service. Fairly simple and straightforward. I've added a new service reference and everything worked perfectly on the initial setup.</p>\n\n<p>When the WSDL was updated, I simply right-clicked on the service reference and selected \"Update Reference\". After doing so, there are now duplicate object names with the number '1' appened. So for example:</p>\n\n<p>Initial generate from WSDL results:</p>\n\n<pre><code>GetWidget (getWidgetRequest)\nGetWidgets (getWidgetRequest)\nGetWidgetGroups (getWidgetRequest)\n</code></pre>\n\n<p>After updating, I now have this:</p>\n\n<pre><code>GetWidget (getWidgetRequest)\nGetWidgets (getWidgetRequest)\nGetWidgetGroups (getWidgetRequest)\n\nGetWidget1 (getWidgetRequest1)\nGetWidgets1 (getWidgetRequest1)\nGetWidgetGroups1 (getWidgetRequest1)\n</code></pre>\n\n<p>So now I have to use the GetWidget1 method to use the \"updated\" service method. My questions are:</p>\n\n<ol>\n<li>Is there a way to overwrite the previous methods without generating new types to accomodate the update?</li>\n<li>Do I have to manually clean this up <em>every time</em> the WSDL is updated?</li>\n<li>Am I updating the service reference incorrectly? Do I need to use the svcutil.exe?</li>\n</ol>\n\n<hr>\n\n<p>I found 4 files within the service reference ending in .datasource. They all have the new typename (GetWidget1.datasource, GetWidgetGroups1.datasource, etc.). Below is a sample of the contents of the file:</p>\n\n<pre><code>&lt;GenericObjectDataSource DisplayName=\"GetWidget1\" Version=\"1.0\" xmlns=\"urn:schemas-microsoft-com:xml-msdatasource\"&gt;\n   &lt;TypeInfo&gt;GetWidget1, Service References.WidgetService.Reference.cs, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null&lt;/TypeInfo&gt;\n&lt;/GenericObjectDataSource&gt;\n</code></pre>\n\n<hr>\n\n<p>We're using Visual Studio 2010 version 10.0.40219.1 SP1Rel</p>\n"},{"tags":["wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12821581,"title":"WCF web service not working Due to type of Data contract","body":"<p>When i am testing my WCF web service through \"<strong>WcfTestClient</strong>\", it is showing </p>\n\n<p>\"<em>this operation is not supported in wcf test client because it uses type VINDescription</em>\"</p>\n\n<p>Where <strong>VINDescriptionis a DataContract,</strong> which is consist of datamembers of type :</p>\n\n<pre><code>\"int, string, ArrayList\"\n</code></pre>\n\n<p>It seems WCF web service is not supporting ArrayList?</p>\n\n<p>Please suggest how can i fix this?</p>\n\n<p>Here is a code snippet of DataContract :</p>\n\n<pre><code>[DataContract]\npublic class VINDescription\n{\n    #region Private Members\n\n    private int _cylinders = 0;\n    private string _msrp = string.Empty;\n    private ArrayList _interior = new ArrayList();\n    private string[][] _showOptionalEquipment = new string[][] { };\n\n    #endregion\n\n    #region Public Data Members\n\n    /// &lt;summary&gt;\n    /// Stores the number of cylinders of a decoded vehicle.\n    /// &lt;/summary&gt;\n    [DataMember]\n    public int Cylinders\n    {\n        get\n        {\n            return _cylinders;\n        }\n        set\n        {\n            _cylinders = value;\n        }\n    }\n\n    /// &lt;summary&gt;\n    /// Stores the MSRP cost of a decoded vehicle.\n    /// &lt;/summary&gt;\n    [DataMember]\n    public string MSRP\n    {\n        get\n        {\n            return _msrp;\n        }\n        set\n        {\n            _msrp = value;\n        }\n    }\n\n    /// &lt;summary&gt;\n    /// Stores the interior values of a decoded vehicle.\n    /// &lt;/summary&gt;\n    [DataMember]\n    public ArrayList Interior\n    {\n        get\n        {\n            _interior.Sort();\n            return _interior;\n        }\n        set\n        {\n            _interior = value;\n        }\n    }\n\n\n\n    /// &lt;summary&gt;\n    /// To store the data for show optional equipments.\n    /// &lt;/summary&gt;\n    [DataMember]\n    public string[][] ShowOptionalEquipment\n    {\n        get\n        {\n            return _showOptionalEquipment;\n        }\n        set\n        {\n            _showOptionalEquipment = value;\n        }\n    }\n</code></pre>\n"},{"tags":["c#","wcf","office365"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12823997,"title":"How to install 32bit Microsoft Online Services Module for Windows PowerShell on 64bit workstation?","body":"<p>I have 64bit version of Microsoft Online Services Module for Windows PowerShell installed and working correctly.</p>\n\n<p>I run into problems when using Visual Web Developer Express 2010 to create WCF web service(32bit), which uses those cmdlets. Exception just tells me that \"The term 'Import-Module MSOnline' is not recognized as the name of a cmdlet\".</p>\n\n<p>Default installer does not permit installation of 32bit version. </p>\n"},{"tags":["c#","wcf","attributes"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":86,"score":3,"question_id":12823201,"title":"DataContract and KnowType Attributes in C# Client","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3167932/c-sharp-wcf-when-is-it-appropriate-to-use-the-knowntype-attribute\">C# WCF: When is it appropriate to use the KnownType attribute?</a>  </p>\n</blockquote>\n\n\n\n<p>Not long ago, we needed in class to create, as part of a project, a C# web client. The teacher instructed us to put the attribute <code>DataContract</code> above each class that will be passed.</p>\n\n<p>Then the teacher told us that if you have some thing like this:</p>\n\n<pre>\n               A\n              / \\\n             /   \\\n            B     C\n</pre>\n\n<p>you need to write class A in the following way:</p>\n\n<pre><code>[DataContract]\n[KnownType(typeof(B))]\n[KnownType(typeof(C))]\npublic class A\n{\n}\n</code></pre>\n\n<p>Isn't this completly against the idea of polymorphism? why should a class know who inherits the class?</p>\n"},{"tags":["wcf","wcf-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12819705,"title":"Wcf WebApi configuration equivalent to code","body":"<p>I have this configuration for a WebApi service in code that runs on Application start:</p>\n\n<pre><code>var configuration = new WebApiConfiguration\n{\n    Security = (uri, binding) =&gt; {\n        binding.Mode = HttpBindingSecurityMode.TransportCredentialOnly; \n        binding.Transport.ClientCredentialType = HttpClientCredentialType.Windows;\n    },\n    CreateInstance = ((type, requestMessage, o) =&gt; container.Resolve(type)),\n    ErrorHandlers = (handlers, endpoint, description) =&gt; handlers.Add(new GlobalErrorHandler())\n};\n</code></pre>\n\n<p>Now, I want to move this out of code and do it in web.config. what will the equivalent be? I have this so far under runtime in web.config, I am not sure if it's correct and also I don't know what CreateInstance and ErrorHandlers would translate to in configuration:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"basicHttp\"&gt;\n          &lt;security mode=\"TransportCredentialOnly\"&gt;\n            &lt;transport clientCredentialType=\"Windows\"&gt;&lt;/transport&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client /&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\"&gt;\n    &lt;/serviceHostingEnvironment&gt;\n  &lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":[".net","wcf","sitecore"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12801404,"title":"accessing a .svc URL in ASP.NET 4.0, IIS 7.5 returns 404","body":"<p>Having done quite a bit of research on this let me state the following:</p>\n\n<ul>\n<li>The target framework is .NET 4, 64-bit</li>\n<li>The necessary Handlers are registered with IIS, for both .NET 2 and .NET 4, 32/64 bit</li>\n<li>I am expecting the service to run over HTTP</li>\n<li>The service is part of a larger web application that runs both WebForms and MVC 3.0</li>\n<li>The Routing Table includes an Ignore entry for {resource}.svc</li>\n<li>The solution does not work locally or when deployed to other servers</li>\n<li>The web application is Sitecore 6.6, and I have an Ignore Prefixes set for the folder where the *.svc file is located.</li>\n</ul>\n\n<p>For the extremely interested, I am attempting to set up the Sitecore Modules WeBlog comment service.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12819712,"title":"WCF Service works on localhost but gives endpoint error on server","body":"<p>I have 2 services and a test console app to test them with.</p>\n\n<p>TestConsole2 (the test console) has a Service Reference to the service RequestsStub. RequestsStub has a service reference to RequestServices.</p>\n\n<p>RequestsStub simply calls the methods from RequestServices.</p>\n\n<p>So visually....</p>\n\n<p>TestConsole2 -> RequestsStub -> RequestServices</p>\n\n<p>So, I hosted RequestServices on a server and had RequestsStub and TestConsole2 local. It all worked nicely. As soon as I changed RequestsStub on the server, I get the error....</p>\n\n<blockquote>\n  <p>There was no endpoint listening at <a href=\"http://urlremoved.on.ca/Requests/RequestService.svc\" rel=\"nofollow\">http://urlremoved.on.ca/Requests/RequestService.svc</a> that could attempt the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details</p>\n</blockquote>\n\n<p>Any ideas or knowledge to point me in the right direction?</p>\n\n<p>UPDATE:\nConfig file for RequestServices...</p>\n\n\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"applicationSettings\" type=\"System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" &gt;\n      &lt;section name=\"RequestServices.Properties.Settings\" type=\"System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"RequestServices.Properties.Settings.RequestServicesConnectionString\"\n      connectionString=\"Data Source=DEVSQL;Initial Catalog=RequestServices;Persist Security Info=True;User ID=webdev;Password=removed\"\n      providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_ICommunicationService\" closeTimeout=\"00:01:00\"\n          openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n          allowCookies=\"false\" bypassProxyOnLocal=\"false\" maxBufferPoolSize=\"524288\"\n          maxReceivedMessageSize=\"65536\" useDefaultWebProxy=\"true\" /&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://urlremoved.on.ca/Communication/CommunicationService.svc\"\n        binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_ICommunicationService\"\n        contract=\"serviceCommunication.ICommunicationService\" name=\"BasicHttpBinding_ICommunicationService\" /&gt;\n    &lt;/client&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"RequestServices.RequestServiceBehavior\"&gt;\n          &lt;enableWebScript/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n   &lt;httpProtocol&gt;\n     &lt;customHeaders&gt;\n       &lt;add name=\"Access-Control-Allow-Origin\" value=\"*\" /&gt;\n     &lt;/customHeaders&gt;\n   &lt;/httpProtocol&gt;\n  &lt;/system.webServer&gt;\n\n &lt;applicationSettings&gt;\n  &lt;RequestServices.Properties.Settings&gt;\n   &lt;setting name=\"LogSource\" serializeAs=\"String\"&gt;\n    &lt;value&gt;Request Services Service&lt;/value&gt;\n   &lt;/setting&gt;\n   &lt;setting name=\"LogType\" serializeAs=\"String\"&gt;\n    &lt;value&gt;Application&lt;/value&gt;\n   &lt;/setting&gt;\n  &lt;/RequestServices.Properties.Settings&gt;\n &lt;/applicationSettings&gt;\n\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And the config for the RequestsStub...</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;basicHttpBinding&gt;\n        &lt;binding name=\"BasicHttpBinding_IRequestService\" closeTimeout=\"00:01:00\"\n          openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n          allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n          maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\"\n          messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\"\n          useDefaultWebProxy=\"true\"&gt;\n          &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\"\n            maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n          &lt;security mode=\"None\"&gt;\n            &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\"\n              realm=\"\" /&gt;\n            &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n          &lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"http://urlremoved.on.ca/Requests/RequestService.svc\"\n        binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_IRequestService\"\n        contract=\"RequestsServiceReference.IRequestService\" name=\"BasicHttpBinding_IRequestService\" /&gt;\n    &lt;/client&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"RequestsStub.RequestServicesStubBehavior\"&gt;\n          &lt;enableWebScript/&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"true\" /&gt;\n  &lt;/system.serviceModel&gt;\n &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n   &lt;httpProtocol&gt;\n     &lt;customHeaders&gt;\n       &lt;add name=\"Access-Control-Allow-Origin\" value=\"*\" /&gt;\n     &lt;/customHeaders&gt;\n   &lt;/httpProtocol&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#",".net","wcf","wcf-rest","cors"],"answer_count":2,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":2225,"score":7,"question_id":7234599,"title":"CORS Support within WCF REST Services","body":"<p>I have a WCF REST service hosted within a Windows service and I would like to send the Access-Control-Allow-Origin HTTP header (defined as part of <a href=\"http://www.w3.org/TR/cors/\" rel=\"nofollow\">CORS</a>) with every response.  </p>\n\n<p>My attempted solution was to have something like the following within an <a href=\"http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx\" rel=\"nofollow\">IDispatchMessageInspector</a> implementation:</p>\n\n<pre><code>public void BeforeSendReply(ref Message reply, object correlationState)\n{\n    var httpResponse = reply.Properties[\"httpResponse\"] as HttpResponseMessageProperty;\n    if (httpResponse != null)\n    {\n        // test of CORS\n        httpResponse.Headers[\"Access-Control-Allow-Origin\"] = \"*\";\n    }\n}\n</code></pre>\n\n<p>Normally this would work, but unfortunately my service also uses <a href=\"http://en.wikipedia.org/wiki/Basic_access_authentication\" rel=\"nofollow\">HTTP basic authorization</a>, which means that when a request comes in without the Authorization header, WCF automatically sends a 401 response asking for credentials.  Unfortunately WCF does not call my IDispatchMessageInspector during this initial exchange, so Access-Control-Allow-Origin header is not added to the initial exchange.</p>\n\n<p>The problem occurs when I try to call the service from a browser.  CORS specifies that cross-origin requests should only be allowed if the origin domain matches the domain listed in the Access-Control-Allow-Origin response header (* matches all domains).  Unfortunately when the browser sees then sees the initial 401 response without the Access-Control-Allow-Origin header, it prevents access (according to the <a href=\"http://en.wikipedia.org/wiki/Same_origin_policy\" rel=\"nofollow\">same origin policy</a>).</p>\n\n<p>Is there any way add a header to the initial 401 response sent automatically by WCF?</p>\n"},{"tags":["c#","wcf","web-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12821313,"title":"There was an error deserializing the object of type .... The maximum string content length quota (8192) has been exceeded while reading XML data","body":"<p>Iam get an intemittant error when posting to a WCF webservice</p>\n\n<pre><code>The exception message is 'There was an error deserializing the object of type. The maximum   \nstring content length quota (8192) has been exceeded while reading XML data.\n</code></pre>\n\n<p>I have tried various different suggestions but with no luck</p>\n\n<p>Can anyone see what iam missing or doing incorrectly ?</p>\n\n<p>thanks</p>\n\n<p>The config file on the client is</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;startup&gt;&lt;supportedRuntime version=\"v4.0\"    sku=\".NETFramework,Version=v4.0\"/&gt;&lt;/startup&gt;&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;wsHttpBinding&gt;\n            &lt;binding name=\"WSHttpBinding_IAWSSESService\" closeTimeout=\"00:01:00\"\n                openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferPoolSize=\"5242880\" maxReceivedMessageSize=\"655360\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                allowCookies=\"false\"&gt;\n                &lt;readerQuotas maxDepth=\"320\" maxStringContentLength=\"81920\" maxArrayLength=\"163840\"\n                    maxBytesPerRead=\"40960\" maxNameTableCharCount=\"163840\" /&gt;\n                &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                    enabled=\"false\" /&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://localhost:20930/AWSSESService.svc\"\n            binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_IAWSSESService\"\n            contract=\"AwsWebService.IAWSSESService\" name=\"WSHttpBinding_IAWSSESService\" /&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>The config file for the web service is</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n&lt;system.web&gt;\n&lt;compilation debug=\"true\" targetFramework=\"4.0\"/&gt;\n&lt;pages controlRenderingCompatibilityVersion=\"4.0\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n&lt;services&gt;\n  &lt;service name=\"CG.Core.EmailService.AWSSESService\"&gt;\n    &lt;endpoint address=\"\" behaviorConfiguration=\"\" binding=\"wsHttpBinding\" contract=\"CG.Core.EmailService.IAWSSESService\" bindingConfiguration=\"wsHttpDefaultConfig\"/&gt;\n  &lt;/service&gt;\n&lt;/services&gt;\n&lt;bindings&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"wsHttpDefaultConfig\"&gt;\n      &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\" /&gt;\n      &lt;security mode=\"None\"/&gt;\n    &lt;/binding&gt;\n  &lt;/wsHttpBinding&gt;\n&lt;/bindings&gt;\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n    &lt;behavior&gt;\n      &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n       &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n    &lt;/behavior&gt;\n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n&lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"false\"     multipleSiteBindingsEnabled=\"true\"/&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n&lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n&lt;!--\n     --&gt;\n&lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["c#",".net","wcf","windows-phone-7.1"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12338547,"title":"Wcf service not returning cookies","body":"<p>I am developing one windows phone application. It require authentication to site. I send userid and password to WCF service which will check for authentication. </p>\n\n<p>Service-side code:</p>\n\n<p><strong>Service.svc.cs</strong></p>\n\n<pre><code>public CookieContainer GetConnect(string uid, string password)\n//public string GetConnect(string uid, string password)\n{\n    try\n    {\n         HttpWebRequest req = (HttpWebRequest)WebRequest.Create(\"http://example.com/Login1.action\");\n        req.Method = \"POST\";\n        CookieContainer con = new CookieContainer();\n        req.CookieContainer = con;\n        req.CookieContainer.Add(GetCookies());\n        req.KeepAlive = true;\n\n        req.UserAgent = \"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11\";\n        req.ContentType = \"application/x-www-form-urlencoded\";\n        req.Accept = \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\";\n\n        req.Referer = \"http://example.com/content/index.html\";\n\n        byte[] data = Encoding.Default.GetBytes(\"username=\" + uid + \"&amp;password=\" + password);\n        req.Credentials = new NetworkCredential(uid, password);\n        req.ContentLength = data.Length;\n        req.AllowAutoRedirect = true;\n        req.ServicePoint.Expect100Continue = true;\n\n        string str = req.GetRequestStream();\n        str.Write(data, 0, data.Length);\n        str.Close();\n\n        HttpWebResponse res = (HttpWebResponse)req.GetResponse();\n\n        string iduri = System.Web.HttpUtility.ParseQueryString(res.ResponseUri.Query).Get(\"id\");\n        if (iduri != \"\")\n        {\n            return con; \n            //return \"Success\";\n        }\n        else\n        {\n            res.Close();\n            str.Close();\n\n            return null;\n            //return \"Fail\";\n        }\n    }\n    catch (Exception)\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p><strong>IService.cs</strong></p>\n\n<pre><code>[ServiceContract]\npublic interface IService1\n{\n    [OperationContract]\n    CookieCollection GetCookies();\n\n    [OperationContract]\n    CookieContainer GetConnect(string uname, string password);\n    //string GetConnect(string uname, string password);\n}\n</code></pre>\n\n<p>Client-side code:</p>\n\n<p><strong>Login.xaml.cs</strong></p>\n\n<pre><code>void svc_Get_Connected(object send, GetConnectCompletedEventArgs e)\n{\n    var cc = new CookieContainer();\n    cc=e.Result;\n}\n</code></pre>\n\n<p>When I retun <strong>con</strong> object it give following error:</p>\n\n<blockquote>\n  <p>There was no endpoint listening at <a href=\"http://example.com:3922/Service1.svc\" rel=\"nofollow\">http://example.com:3922/Service1.svc</a> that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.\"</p>\n</blockquote>\n\n<p>How to return <code>CookieContainer</code>?</p>\n"},{"tags":[".net","wcf","web-services","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12731820,"title":"Empty Response on WCF Web Service with Custom Addresses on EndPoints","body":"<p>I created a WCF web service and hosted it on IIS. The web.config looks something like this:</p>\n\n<pre><code>[...]\n&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"[Namespace].[ServiceNameBehavior]\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n\n    &lt;services&gt;\n        &lt;service name=\"[Namespace].[ServiceName]\" behaviorConfiguration=\"[NameSpace].[ServiceNameBehavior]\" &gt;\n            &lt;endpoint address=\"basic\" binding=\"basicHttpBinding\" contract=\"[Namespace].[IService]\" /&gt;\n            &lt;endpoint address=\"secure\" binding=\"basicHttpsBinding\" contract=\"[Namespace].[IService]\" /&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n[...]\n</code></pre>\n\n<p>When I access <code>http://localhost/[Namespace]/[ServiceName].svc</code> I get the usual web service web page indicating you have created a service, and that to test it you should call the service using svcutil.exe, etc, etc...</p>\n\n<p>Now.. the problem is that, as defined in the web.config, I want to use two types of connections for this web service (and actually just limit the access to those two, so disabling the default <code>.svc</code> call) but when I go to  <code>http://localhost/[Namespace]/[ServiceName].svc/basic</code> or <code>https://localhost/[Namespace]/[ServiceName].svc/secure</code> I get a blank page nor can I access the services from a local-hosted PHP page.</p>\n\n<p>Is it normal that these bindings behave like this? If not, How can I fix it?</p>\n\n<p><br></p>\n\n<h2>Update 1</h2>\n\n<hr>\n\n<p>I also noticed that trying to create references to either of these endpoints from Visual Studio results in the following error:</p>\n\n<blockquote>\n  <p>There was an error downloading 'https://localhost/[Namespace]/[ServiceName].svc/secure'.\n  The request failed with HTTP status 400: Bad Request.\n  Metadata contains a reference that cannot be resolved: 'https://localhost/[Namespace]/[ServiceName].svc/secure'.\n  Content Type application/soap+xml; charset=utf-8 was not supported by service https://localhost/[Namespace]/[ServiceName].svc/secure.  The client and service bindings may be mismatched.\n  The remote server returned an error: (415) Cannot process the message because the content type 'application/soap+xml; charset=utf-8' was not the expected type 'text/xml; charset=utf-8'..\n  If the service is defined in the current solution, try building the solution and adding the service reference again.</p>\n</blockquote>\n\n<p>Adding a reference to http://localhost/[Namespace]/[ServiceName].svc works good.</p>\n"},{"tags":["android","wcf","encryption","https","certificates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12790808,"title":"Create WCF https server with android client","body":"<p>I want to connect a Android client to WCF Webservice. There are several good guides describing how to do this but the https concept is really blurry for me. Here is what i want:</p>\n\n<p>1) A selfhosted WebService communicating over https with an authenticated client.\nThe user database resides on a SQL Server.\nThe Service must be a \"simple install\" for any user to carry out.\nThe user will install the service on his/her PC and then download the client from google play configuring it using ipadress only.</p>\n\n<p>Problem: it seems impossible to carry out this using WCF cause wshttp looks like having the need to install a certificate on the mashine. \nA possible way forward would be generating a selfsigned cert during install but how can i then in a userfriendly manner get the cert to an android client?</p>\n\n<p>2) A Android app published on Google Play which is able to communicate with the service. Data sent to the service will be both simple datatypes (string and integer data) but also large binaries 3-25Mb.</p>\n\n<p>The user installing the service has no more the knowledge than his ip adress and must not be bothered with any certificate issues or other technical details. One option might be using message instead of transport security but my knowledge is very limited in this area.</p>\n\n<p>Information passed between server and client is of personal caracter and may contain passwords including matching sites where passwords are used, personal info, calendar events etc. It will not contain money transfer orders, credit card numbers or account numbers.</p>\n\n<p>The core functionallity of both server and client are more or less already implemented. I now need to secure communication between client and server.</p>\n\n<p>Any recommendation for a good approach to develop this will be grately appreciated!</p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12820871,"title":"Increase MaxItemsInObjectGraph for WCF Service client","body":"<p>I am referencing a WCF service from a C# dll so the app.config file generated is not being read. I am manually trying to create a service client via the code below; however, I am getting errors that I need to increase the MaxItemsInObjectGraph. The service that is running is already set to int.MaxValue so I just need to increase it in the TestServiceClient now. Any ideas?? Thanks in advance!</p>\n\n<pre><code>var client = new TestServiceClient(GetBinding(), GetEndpointAddress());\n\nprivate static EndpointAddress GetEndpointAddress()\n        {\n            var endpoint = new EndpointAddress(\"https://localhost:8000/ServiceModel/service\");\n\n            return endpoint;\n        }\n\n        private static Binding GetBinding()\n        {\n            var basicHttpBinding = new BasicHttpBinding(BasicHttpSecurityMode.Transport)\n            {\n                MessageEncoding = WSMessageEncoding.Text,\n                TextEncoding = Encoding.UTF8,\n                BypassProxyOnLocal = false,\n                UseDefaultWebProxy = true,\n                CloseTimeout = new TimeSpan(10, 0, 0),\n                OpenTimeout = new TimeSpan(10, 0, 0),\n                SendTimeout = new TimeSpan(10, 0, 0),\n                ReceiveTimeout = new TimeSpan(10, 0, 0),\n                HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,\n                MaxBufferPoolSize = Int32.MaxValue,\n                MaxReceivedMessageSize = Int32.MaxValue,\n                AllowCookies = false,\n                TransferMode = TransferMode.StreamedResponse,\n                ReaderQuotas =\n                {\n                    MaxDepth = 32,\n                    MaxStringContentLength = Int32.MaxValue,\n                    MaxArrayLength = 6553600,\n                    MaxBytesPerRead = 4096,\n                    MaxNameTableCharCount = 16384\n                }\n            };\n\n            return basicHttpBinding;\n        }\n</code></pre>\n\n<p>Below is my solution:</p>\n\n<pre><code>private static ITestServiceClient GetClient()\n        {\n            var factory = new ChannelFactory&lt;ITestServiceClient &gt;(GetBinding(), GetEndpointAddress());\n\n            foreach (var dataContractBehavior in factory.Endpoint.Contract.Operations\n                .Select(operation =&gt; operation.Behaviors.Find&lt;DataContractSerializerOperationBehavior&gt;())\n                .Where(dataContractBehavior =&gt; dataContractBehavior != null))\n            {\n                dataContractBehavior.MaxItemsInObjectGraph = Int32.MaxValue;\n            }\n\n            var client = factory.CreateChannel();\n\n            return client;\n        }\n</code></pre>\n"},{"tags":["wcf","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":185,"score":1,"question_id":11596382,"title":"WCF Remote MSMQ - I can write to a remote queue, but cannot receive","body":"<p>jobsServer: Windows Server 2008 R2\n.NET Version: 4.5</p>\n\n<p>I'm using WCF to connect two servers - <strong>app</strong> and <strong>queue</strong>. I want <strong>app</strong> to be able to send/receive messages from <strong>queue</strong>. For some reason, app can send messages, but CANNOT receive them.</p>\n\n<p>The netMsmq binding looks like:</p>\n\n<pre><code>    &lt;binding name=\"JobExecutionerBinding\" receiveErrorHandling=\"Move\"&gt;\n                &lt;security&gt;\n                    &lt;transport msmqAuthenticationMode=\"None\" msmqProtectionLevel=\"None\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n</code></pre>\n\n<p>And the service binding looks like:</p>\n\n<pre><code>    &lt;service name=\"JobExecution.Services.JobExecutionService\"&gt;\n            &lt;endpoint address=\"net.msmq://queue/private/jobs\" binding=\"netMsmqBinding\" bindingConfiguration=\"JobExecutionerBinding\" contract=\"JobExecution.Common.IJobExecutionService\"/&gt;\n        &lt;/service&gt;\n</code></pre>\n\n<p>Now, the client binding looks like:</p>\n\n<pre><code>    &lt;endpoint address=\"net.msmq://queue/private/jobs\" binding=\"netMsmqBinding\" bindingConfiguration=\"JobExecutionerBinding\" contract=\"JobExecution.Common.IJobExecutionService\" name=\"SimpleEmailService\" kind=\"\" endpointConfiguration=\"\"/&gt;\n</code></pre>\n\n<p>I changed a few names for security's sake.</p>\n\n<p>So, the WC client can send to the remote queue without a problem. It even properly queues the outgoing message and forwards it on later in the event that the remote queue server is down. But every time I start up the WCF service, I get this:</p>\n\n<blockquote>\n  <p>There was an error opening the queue. Ensure that MSMQ is installed\n  and running, the queue exists and has proper authorization to be read\n  from. The inner exception may contain additional information. --->\n  System.ServiceModel.MsmqException: An error occurred while opening the\n  queue:The queue does not exist or you do not have sufficient\n  permissions to perform the operation. (-1072824317, 0xc00e0003). The \n  message cannot be sent or received from the queue. Ensure that MSMQ is\n  installed and running. Also ensure that the queue is available to open\n  with the required access mode and authorization.   at\n  System.ServiceModel.Channels.MsmqQueue.OpenQueue()   at\n  System.ServiceModel.Channels.MsmqQueue.GetHandle()   at\n  System.ServiceModel.Channels.MsmqQueue.SupportsAccessMode(String\n  formatName, Int32 accessType, MsmqException&amp; msmqException)   --- End\n  of inner exception stack trace ---   at\n  System.ServiceModel.Channels.MsmqVerifier.VerifyReceiver(MsmqReceiveParameters\n  receiveParameters, Uri listenUri)   at\n  System.ServiceModel.Channels.MsmqTransportBindingElement.BuildChannelListener[TChannel](BindingContext\n  context)   at\n  System.ServiceModel.Channels.Binding.BuildChannelListener[TChannel](Uri\n  listenUriBaseAddress, String listenUriRelativeAddress, ListenUriMode\n  listenUriMode, BindingParameterCollection parameters)   at\n  System.ServiceModel.Description.DispatcherBuilder.MaybeCreateListener(Boolean\n  actuallyCreate, Type[] supportedChannels, Binding binding,\n  BindingParameterCollection parameters, Uri listenUriBaseAddress,\n  String listenUriRelativeAddress, ListenUriMode listenUriMode,\n  ServiceThrottle throttle, IChannelListener&amp; result, Boolean\n  supportContextSession)   at\n  System.ServiceModel.Description.DispatcherBuilder.BuildChannelListener(StuffPerListenUriInfo\n  stuff, ServiceHostBase serviceHost, Uri listenUri, ListenUriMode\n  listenUriMode, Boolean supportContextSession, IChannelListener&amp;\n  result)   at\n  System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription\n  description, ServiceHostBase serviceHost)   at\n  System.ServiceModel.ServiceHostBase.InitializeRuntime()   at</p>\n</blockquote>\n\n<p>I've been all over StackOverflow and the internet for 8 hours. Here's what I've done:</p>\n\n<ul>\n<li>Ensured that ANONYMOUS LOGIN, Everyone, Network, Network Service, and Local Service have full control</li>\n<li>Stopped the remote MSMQ server and observed what the WCF service does, and I get a different error - so I'm sure that the WCF service when starting up is speaking to the MSMQ server</li>\n<li>Disabled Windows Firewall on both boxes and opened all ports via EC2 security groups</li>\n<li>Set AllowNonauthenticatedRpc and NewRemoteReadServerAllowNoneSecurityClient to 1 in the registry</li>\n<li>Configured MS DTC on both servers (the queue is transactional, but I get the same error regardless as to whether the queue is transactional or not)</li>\n<li>Confirmed that the WCF server starts up fine if I use the local queue, and receives without a problem</li>\n</ul>\n\n<p>Help!!! I can't scale my app without a remote queueing solution.</p>\n"},{"tags":["asp.net-mvc-3","wcf","security","azure","webrole"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12820368,"title":"Azure: security between web roles","body":"<p>In Azure, if you choose to use internal endpoint (instead of input endpoint), https is not an option. http &amp; tcp are the only options. Does it mean internal endpoint is 100% secure and you don't need encryption. </p>\n\n<p>Then it comes to another question. If i choose to use input endpoint between mvc application and wcf service. Is it really necessary to have https between them? Is it OK if i have 2 input endpoints for wcf. One with http on port 80, which is supposed to be used by mvc application. Another with https on port 443, which can be used by somebody else. (not our own application) </p>\n"},{"tags":["wcf","transactions","msmq"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":82,"score":3,"question_id":12820933,"title":"Can't read from remote transactionnal prive queue using WCF in workgroup mode (can do using System.Messaging !)","body":"<p>I have spent days reading MSDN, forums and article about this, and cannot find a solution to my problem.</p>\n\n<p>As a PoC, I need to consume a queue from more than one machine since I need fault tolerance on the consumers side. Performance is not an issue since less than 100 messages a day should by exchanged.</p>\n\n<p>I have coded two trivial console application , one as client, the other one as server. Using Framework 4.0 (tested also on 3.5). Messages are using transactions. </p>\n\n<p>Everything runs fines on a single machine (Windows 7), even when running multiple consumers application instance.</p>\n\n<p>Now I have a 2012 and a 2008 R2 virtual test servers running in the same domain (but don't want to use AD integration anyway). I am using IP address or \".\" in endpoint address attribute to prevent from DNS / AD resolution side effects.</p>\n\n<p><strong>Everything works fine IF the the queue is hosted by the consumer and the producer is submitting messages on the remote private queue</strong>. This is also true if I exchange the consumer / producer role of the 2012 and 2008 server.</p>\n\n<p><strong>But I have NEVER been able to make this run, using WCF, when the consumer is reading from remote queue and the producer is submitting messages localy</strong>. Submition never fails, my problem is on the consumer side.</p>\n\n<p>My wish is to make this run using netMsmqBinding, but I also tried using msmqIntegrationBinding. For each test, I adapted code and configuration, then confirmed this was running ok when the consumer was consuming from the local queue.</p>\n\n<p>The last test I have done is using WCF (msmqIntegrationBinding) only on the producer (local queue) and System.Messaging.MessageQueue on the consumer (remote queue) : It works fine ! => My goal is to make the same using WCF and netMsmqBinding on both sides.</p>\n\n<p>In my point of view, I have proved this problem is a WCF issue, not an MSMQ one. This has nothing to do with security, authentication, firewall, transport, protocol, MSMQ version etc.</p>\n\n<p>Errors info using MS Service Trace Viewer :</p>\n\n<p>Using msmqIntegrationBinding when receiving the message (openning queue was ok) : <em>An error occurred while receiving a message from the queue: The transaction specified cannot be imported. (-1072824242, 0xc00e004e). Ensure that MSMQ is installed and running. Make sure the queue is available to receive from.</em></p>\n\n<p>Using netMsmqBinding, on opening the queue : <em>An error occurred when converting the '172.22.1.9\\private$\\Test' queue path name to the format name: The queue path name specified is invalid. (-1072824300, 0xc00e0014). All operations on the queued channel failed. Ensure that the queue address is valid. MSMQ must be installed with Active Directory integration enabled and access to it is available.</em></p>\n\n<p>If someone can help to find why my configuration cannot be handled by WCF, a much elegant and configurable way than Messaging, I would greatly appreciate !</p>\n\n<pre><code> Thank you.\n</code></pre>\n"},{"tags":["wcf","ssl","wcf-hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12820286,"title":"WCF Service over HTTPS giving errors","body":"<p>I have made a WCF service with configuration as follows:</p>\n\n<p>\n</p>\n\n<p>\n    \n  \n  \n    </p>\n\n<pre><code>  &lt;!-- This is the binding for SSL--&gt;\n  &lt;wsHttpBinding&gt;\n    &lt;binding name=\"SSLBinding\"&gt;\n      &lt;security mode=\"Transport\" &gt;\n        &lt;transport clientCredentialType=\"None\" &gt;&lt;/transport&gt;            \n      &lt;/security&gt;\n    &lt;/binding&gt;       \n  &lt;/wsHttpBinding&gt;  \n  &lt;!-- SSL Binding Ends here.--&gt;\n\n&lt;/bindings&gt;\n\n&lt;behaviors&gt;\n  &lt;serviceBehaviors&gt;\n\n    &lt;!-- This is the behavior we have defined for SSL configuration--&gt;\n    &lt;behavior name=\"SSLBehavior\"&gt;\n      &lt;serviceMetadata httpsGetEnabled=\"True\"/&gt;          \n    &lt;/behavior&gt;\n    &lt;!-- SSL Behavior Ends here --&gt;        \n  &lt;/serviceBehaviors&gt;\n&lt;/behaviors&gt;\n\n&lt;services&gt;\n  &lt;!-- Service configured alongwith its Mex Endpoint--&gt;      \n  &lt;service name=\"CalculatorService.Service1\" behaviorConfiguration=\"SSLBehavior\"&gt;\n    &lt;endpoint contract=\"CalculatorService.IService1\" name=\"SSLAddress\" binding=\"wsHttpBinding\"  bindingConfiguration=\"SSLBinding\"&gt;&lt;/endpoint&gt;\n    &lt;endpoint name=\"mex\"  binding=\"mexHttpsBinding\" contract=\"IMetadataExchange\"&gt;&lt;/endpoint&gt;\n  &lt;/service&gt; \n\n&lt;/services&gt;\n&lt;serviceHostingEnvironment multipleSiteBindingsEnabled=\"false\" /&gt;\n</code></pre>\n\n<p>\n \n    \n  </p>\n\n<p></p>\n\n<p>I have used the following tutorial to host SSL on WCF service on IIS 5.1 \n<a href=\"http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi\" rel=\"nofollow\">http://www.codeproject.com/Articles/36705/7-simple-steps-to-enable-HTTPS-on-WCF-WsHttp-bindi</a></p>\n\n<p>I am getting the error as </p>\n\n<pre><code>A binding instance has already been associated to listen URI \n'https://wd-xpa7kyy12d3.XXXX.com/CalculatorService/Service1.svc'. If two endpoints want to share the same ListenUri, they must also share the same binding object instance. The two conflicting endpoints were either specified in AddServiceEndpoint() calls, in a config file, or a combination of AddServiceEndpoint() and config. \n</code></pre>\n\n<p>In endpoint named \"SSLAddress\" I added \"address\" as 'https://wd-xpa7kyy12d3.XXXX.com/CalculatorService/Service1.svc', but was not able to add service reference with this URL, and had to specifically give WSDL path. </p>\n\n<p>Even after providing WSDL path and adding service reference successfully to console application, when the client proxy was executing the methods, it was giving error. So I removed the address attribute from endpoint and now this issue is coming. I am not sure what is wrong in current configuration? Thanks for help.</p>\n"},{"tags":["asp.net","json","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":120,"score":1,"question_id":10869624,"title":"JSON RPC in WCF","body":"<p>I have been attempting to find a good implementation of Json rpc in wcf, but I have not had much luck yet.I have found several examples of implementations using jayrock and Json-rpc.net, but I would prefer to work within wcf as much as possible.</p>\n\n<p>Has anyone ever developed a Json rpc server within wcf? If so, could you point me towards some example code or documentation?</p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["c#","wcf","xmlserializer","svcutil.exe","wscf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12819688,"title":"Why do I get ActionNotSupportedException for my WCF client/service?","body":"<p>I'm learning WCF, specifically I'm learning how to write them contract first, ala <a href=\"http://wscfblue.codeplex.com/\" rel=\"nofollow\">wscf.blue</a></p>\n\n<p>I can create a WCF client/service the contract last way (Microsoft)\nI can create a WCF client/service the contract first way (WSCF)</p>\n\n<p>But, if I create a contract first service, then try to add it the Microsoft way (Service Reference) instead of the WSCF.blue way (share contract and generate client) it doesn't work.</p>\n\n<p>It throws an <code>ActionNotSupportedException</code> with the message <code>The message with Action 'urn:test-com:simple:testMethodIn' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).</code></p>\n\n<p>And I have no idea what that means.</p>\n\n<p>Here is my test contract:</p>\n\n<p>SimpleModel.xsd</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;xs:schema xmlns=\"urn:test-com:simple\" xmlns:mstns=\"urn:test-com:simple\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" targetNamespace=\"urn:test-com:simple\" elementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\" id=\"SimpleModel\"&gt;\n    &lt;xs:complexType name=\"PayloadType\"&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"AString\" type=\"xs:string\" nillable=\"1\" minOccurs=\"0\"/&gt;\n            &lt;xs:element name=\"AnInt\" type=\"xs:int\"/&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>SimpleMessages.xsd</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;xs:schema xmlns=\"urn:test-com:simple\" xmlns:mstns=\"urn:test-com:simple\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:smod=\"http://tempuri.org/SimpleModel.xsd\" targetNamespace=\"urn:test-com:simple\" elementFormDefault=\"qualified\" attributeFormDefault=\"unqualified\" id=\"SimpleMessages\"&gt;\n    &lt;xs:include schemaLocation=\"SimpleModel.xsd\"/&gt;\n    &lt;xs:element name=\"TestMethod\"&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:sequence&gt;\n                &lt;xs:element name=\"APayload\" type=\"PayloadType\" minOccurs=\"0\"/&gt;\n            &lt;/xs:sequence&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n    &lt;xs:element name=\"TestMethodResponse\"&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:sequence&gt;\n                &lt;xs:element name=\"Output\" type=\"PayloadType\"/&gt;\n            &lt;/xs:sequence&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>Simple.wsdl</p>\n\n<pre><code>&lt;!--WSDL generated by thinktecture WSCF; version 1.0.13.0--&gt;\n&lt;!--Tuesday, 09-10-2012 - 02:41 PM--&gt;\n&lt;definitions xmlns:tns=\"urn:test-com:simple\" xmlns:soap12=\"http://schemas.xmlsoap.org/wsdl/soap12/\" xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://schemas.xmlsoap.org/wsdl/\" name=\"Simple\" targetNamespace=\"urn:test-com:simple\"&gt;\n    &lt;wsdl:documentation xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"/&gt;\n    &lt;types&gt;\n        &lt;xsd:schema&gt;\n            &lt;xsd:import schemaLocation=\"SimpleMessages.xsd\" namespace=\"urn:test-com:simple\"/&gt;\n        &lt;/xsd:schema&gt;\n    &lt;/types&gt;\n    &lt;message name=\"testMethodIn\"&gt;\n        &lt;wsdl:documentation xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"/&gt;\n        &lt;part name=\"parameters\" element=\"tns:TestMethod\"/&gt;\n    &lt;/message&gt;\n    &lt;message name=\"testMethodOut\"&gt;\n        &lt;wsdl:documentation xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"/&gt;\n        &lt;part name=\"parameters\" element=\"tns:TestMethodResponse\"/&gt;\n    &lt;/message&gt;\n    &lt;portType name=\"SimpleInterface\"&gt;\n        &lt;wsdl:documentation xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"/&gt;\n        &lt;operation name=\"TestMethod\"&gt;\n            &lt;wsdl:documentation xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"/&gt;\n            &lt;input message=\"tns:testMethodIn\"/&gt;\n            &lt;output message=\"tns:testMethodOut\"/&gt;\n        &lt;/operation&gt;\n    &lt;/portType&gt;\n    &lt;binding name=\"BasicHttpBinding_SimpleInterface\" type=\"tns:SimpleInterface\"&gt;\n        &lt;soap:binding transport=\"http://schemas.xmlsoap.org/soap/http\"/&gt;\n        &lt;operation name=\"TestMethod\"&gt;\n            &lt;soap:operation soapAction=\"urn:test-com:simple:testMethodIn\" style=\"document\"/&gt;\n            &lt;input&gt;\n                &lt;soap:body use=\"literal\"/&gt;\n            &lt;/input&gt;\n            &lt;output&gt;\n                &lt;soap:body use=\"literal\"/&gt;\n            &lt;/output&gt;\n        &lt;/operation&gt;\n    &lt;/binding&gt;\n    &lt;service name=\"ISimple\"&gt;\n        &lt;port name=\"NewPort\" binding=\"tns:BasicHttpBinding_SimpleInterface\"&gt;\n            &lt;soap:address location=\"http://localhost:50862/Simple.svc\"/&gt;\n        &lt;/port&gt;\n    &lt;/service&gt;\n&lt;/definitions&gt;\n</code></pre>\n\n<p>Here's the system.serviceModel section from web.config</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"SimpleServiceBehaviour\"&gt;\n                &lt;serviceMetadata externalMetadataLocation=\"http://localhost:50862/TestContract/Simple.wsdl\" httpGetEnabled=\"true\"/&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;diagnostics&gt;\n        &lt;messageLogging logMalformedMessages=\"true\" logMessagesAtTransportLevel=\"true\"/&gt;\n    &lt;/diagnostics&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_SimpleInterface\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\" useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\"/&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\"/&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\"/&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;services&gt;\n        &lt;service behaviorConfiguration=\"SimpleServiceBehaviour\" name=\"SimpleContract.Simple\"&gt;\n            &lt;endpoint address=\"http://localhost:50862/Simple.svc\" behaviorConfiguration=\"\" binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_SimpleInterface\" contract=\"ISimple\"/&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>If I add a service reference to <code>http://localhost:50862/Simple.svc</code> Every appears to generate OK.</p>\n\n<p>I create this in the client app.config using the service config editor by importing the web.config:</p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://localhost:50862/Simple.svc\" binding=\"basicHttpBinding\" bindingConfiguration=\"BasicHttpBinding_SimpleInterface\" contract=\"SI.SimpleInterface\" name=\"NewPort\"/&gt;\n    &lt;/client&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_SimpleInterface\" closeTimeout=\"00:01:00\" openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\" allowCookies=\"false\" bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\" maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\" textEncoding=\"utf-8\" transferMode=\"Buffered\" useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"16384\" maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\"/&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\"/&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\"/&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>And if I run my test code:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    SimpleInterfaceClient client = new SimpleInterfaceClient();\n\n    var ret = client.TestMethod(new PayloadType() { AnInt = 7, AString = \"bob\" });\n\n    Console.WriteLine(ret.ToString());\n    Console.ReadLine();\n}\n</code></pre>\n\n<p>Inside the TestMethod proxy the following line:</p>\n\n<pre><code>return base.Channel.TestMethod(request);\n</code></pre>\n\n<p>Throws the following exception</p>\n\n<pre><code>System.ServiceModel.ActionNotSupportedException occurred\n  Message=\"The message with Action 'urn:test-com:simple:testMethodIn' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).\"\n  Source=\"System.ServiceModel\"\n  StackTrace:\n       at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)\n</code></pre>\n\n<p>Can anybody help?</p>\n\n<p>Thanks,</p>\n\n<p>J.</p>\n\n<p><strong>First Edit</strong></p>\n\n<p>OK, I've now found that there is something going wrong with my doc-lit-wrapped wsdl and the code generators. wscf.blue does not like it's messages to have nullable types marked as nillable. It falls out of wrapped mode and the method implementations are not unwrapped.</p>\n\n<p>But, if I don't mark them as nillable, the client code falls out of wrapping mode because they are nullable types not marked as nillable.</p>\n\n<p>With nullable types marked not nillable:</p>\n\n<p>Server side:</p>\n\n<pre><code>[System.ServiceModel.OperationContractAttribute(Action=\"urn:test-com:simple/ISimple/TestMethod\", ReplyAction=\"urn:test-com:simple/ISimple/TestMethodResponse\")]\n[System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]\n[return: System.ServiceModel.MessageParameterAttribute(Name=\"Output\")]\nPayloadType TestMethod(PayloadType APayload);\n</code></pre>\n\n<p>Client Side:</p>\n\n<pre><code>// CODEGEN: Generating message contract since element name APayload from namespace urn:test-com:simple is not marked nillable\n[System.ServiceModel.OperationContractAttribute(Action=\"urn:test-com:simple:testMethodIn\", ReplyAction=\"*\")]\nDesktopClientTest_ServiceReference.SI.TestMethodResponse TestMethod(DesktopClientTest_ServiceReference.SI.TestMethodRequest request);\n</code></pre>\n\n<p>With nullable types marked as nillable:</p>\n\n<p>Server side:</p>\n\n<pre><code>// CODEGEN: Parameter 'Output' requires additional schema information that cannot be captured using the parameter mode. The specific attribute is 'System.Xml.Serialization.XmlElementAttribute'.\n[System.ServiceModel.OperationContractAttribute(Action=\"urn:test-com:simple/ISimple/TestMethod\", ReplyAction=\"urn:test-com:simple/ISimple/TestMethodResponse\")]\n[System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]\n[return: System.ServiceModel.MessageParameterAttribute(Name=\"Output\")]\nTestMethodResponse TestMethod(TestMethodRequest request);\n</code></pre>\n\n<p>Client side:</p>\n\n<pre><code>[System.ServiceModel.OperationContractAttribute(Action=\"urn:test-com:simple:testMethodIn\", ReplyAction=\"*\")]\n[return: System.ServiceModel.MessageParameterAttribute(Name=\"Output\")]\nDesktopClientTest_ServiceReference.SI.PayloadType TestMethod(DesktopClientTest_ServiceReference.SI.PayloadType APayload);\n</code></pre>\n\n<p>However I have no idea whether that's the cause, let alone how to fix it.\nThat said, I <strong>do</strong> know that nullable types should be marked nillable for doc-lit-wrapped wsdl.</p>\n"},{"tags":["wcf","web-services","namespaces","versioning","servicebehavior"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":125,"score":1,"question_id":8837003,"title":"Is the ServiceBehaviour's namespace important for web service versioning?","body":"<p>Simple, as that... is the <code>ServiceBehaviour</code>'s namespace important for web service versioning? Meaning that for forward/backward compatibility of clients to server is this namespace involved in any way?</p>\n\n<p>I really didn't understand what is this specific namespace and its use. Could anybody enlighting me about this?</p>\n\n<p>Thank you!</p>\n\n<p><strong>EDIT1</strong>: After my investigations this namespace appears in WSDL here in the first line: <code>&lt;wsdl:definitions name=\"SvcTest\" targetNamespace=\"api.company.com/Services/Tester\"&gt;</code> ...but I don't see if this would influence or not the versioning... maybe I am blind or miss something. Or maybe I am too worried... why would I add some date here (<code>&lt;wsdl:definitions name=\"SvcTest\" targetNamespace=\"api.company.com/Services/Tester/2012/01\"&gt;</code>) ?</p>\n\n<p><strong>EDIT2</strong>: I found this link, but is pointing to another location which is not available anymore: <a href=\"http://social.msdn.microsoft.com/Forums/en/wcf/thread/66c19783-6675-4bd7-83c1-2140d00a943e\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/en/wcf/thread/66c19783-6675-4bd7-83c1-2140d00a943e</a> . Could anyone help?</p>\n"},{"tags":["wcf","web-services","excel-vba"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":134,"score":1,"question_id":12745115,"title":"Calling WCF Webservice from Excel VBA using GetObject() method","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1013428/how-do-i-call-wcf-client-from-excel-2003-vba\">How do I call WCF client from Excel 2003 VBA?</a>  </p>\n</blockquote>\n\n\n\n<p>I want to call a web service developed using WCF from the Excel using VBA code. How can we do this ? I have tried the <code>GetObject()</code> method but I'm getting syntax error while using this. I want to display the data that I'm getting from the web service in Excel. Please help.\nThe DataContract is as follows:\n`</p>\n\n<pre><code>[DataContract] \npublic class Data\n{\n    [DataMember]\n    public int Id;\n    [DataMember]\n    public DateTime LockTime;\n    [DataMember]\n    public DateTime LoginTime;\n    [DataMember]\n    public DateTime LastDefenitionDate;\n    [DataMember]\n    public string NTLogin;\n    [DataMember]\n    public string SystemName;\n}\n</code></pre>\n\n<p>ServiceContract is as follows:</p>\n\n<p>`  </p>\n\n<pre><code>[ServiceContract]\n\ninterface IDataService\n{\n    [OperationContract]\n    List&lt;Data&gt; GetData();\n    [OperationContract]\n    void SubmitData(Data data);\n}\n</code></pre>\n\n<p>`</p>\n\n<p>DataService for accessing database is as follows:</p>\n\n<p>`</p>\n\n<p>[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]</p>\n\n<p>public class DataService : IDataService\n    {\n        public static SQLConnection SQLDBConnection = new SQLConnection();</p>\n\n<pre><code>    #region IDataService Members\n\n    public List&lt;Data&gt; GetData()\n    {\n        List&lt;Data&gt; datas = new List&lt;Data&gt;();\n        try\n        {\n            if (SQLDBConnection.con.State == ConnectionState.Closed) SQLDBConnection.con.Open();\n            datas.Clear();\n            SqlCommand sqlcommand = new SqlCommand();\n            sqlcommand.Connection = SQLDBConnection.con;\n            sqlcommand.CommandText = \"select * from tblData\";\n            sqlcommand.CommandType = CommandType.Text;\n            SqlDataAdapter sqladapter = new SqlDataAdapter(sqlcommand);\n            DataTable dt = new DataTable();\n            sqladapter.Fill(dt);\n\n            Data data = null;\n            for (int i = 0; i &lt; dt.Rows.Count; i++)\n            {\n                data = new Data();\n                data.Id = Convert.ToInt32(dt.Rows[i][\"id\"]);\n                data.NTLogin = dt.Rows[i][\"NTLogin\"].ToString();\n                data.SystemName = dt.Rows[i][\"SystemName\"].ToString();\n                data.LockTime = Convert.ToDateTime(dt.Rows[i][\"LockTime\"]);\n                data.LoginTime = Convert.ToDateTime(dt.Rows[i][\"LoginTime\"]);\n                data.LastDefenitionDate = Convert.ToDateTime(dt.Rows[i][\"LastDefenitionDate\"]);\n                datas.Add(data);\n            }\n        }\n        catch (Exception ex)\n        {  } \n        return datas;\n    }\n\n    public void SubmitData(Data data)\n    {\n        if (SQLDBConnection.con.State == ConnectionState.Closed) SQLDBConnection.con.Open();\n        SqlCommand sqlcommand = new SqlCommand();\n        sqlcommand.Connection = SQLDBConnection.con;\n        sqlcommand.CommandText = \"Insert into dbo.tblData(NTLogin, SystemName, LockTime, LoginTime, LastDefenitionDate) values ('\" + data.NTLogin + \"','\" + data.SystemName + \"','\" + data.LockTime + \"' , '\" + data.LoginTime + \"', '\" + data.LastDefenitionDate + \"')\";\n        sqlcommand.CommandType = CommandType.Text;\n        int RowsAffected = sqlcommand.ExecuteNonQuery();\n    }\n\n    #endregion\n}\n</code></pre>\n"},{"tags":["asp.net","wcf"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":12817729,"title":"Getting URLs of all images as JSON using WCF webservice from a webpage similar to google images","body":"<p>Can some one help me with a WCF webservice that returns json of URLs of all images in a link?</p>\n"},{"tags":["wcf","web-services","reflection","c#-4.0","dynamicproxy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":483,"score":1,"question_id":6466754,"title":"DynamicProxyFactory error with received data size","body":"<p>I use a dynamicproxyfactory in order to call any webservice by a wsdl string path. Unfortunalty, when a webservice answers a lot of data, an exception is raised :</p>\n\n<blockquote>\n  <p>System.ServiceModel.CommunicationException:\n  Le quota de taille maximale autorise\n  pour les messages entrants (65536) a\n  t dpass. Pour augmenter le quota,\n  utilisez la proprit\n  MaxReceivedMessageSize sur l'lment\n  de la liaison approprie. --->\n  System.ServiceModel.QuotaExceededException:\n  Le quota de taille maximale autorise\n  pour les messages entrants (65536) a\n  t dpass. Pour augmenter le quota,\n  utilisez la proprit\n  MaxReceivedMessageSize sur l'lment\n  de la liaison approprie.    --- Fin\n  de la trace de la pile d'exception\n  interne ---</p>\n  \n  <p>Server stack trace:     \n  System.ServiceModel.Channels.HttpInput.ThrowMaxReceivedMessageSizeExceeded()\n  \n  System.ServiceModel.Channels.HttpInput.GetMessageBuffer()\n  \n  System.ServiceModel.Channels.HttpInput.ReadBufferedMessage(Stream\n  inputStream)    \n  System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(Exception&amp;\n  requestException)    \n  System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan\n  timeout)    \n  System.ServiceModel.Channels.RequestChannel.Request(Message\n  message, TimeSpan timeout)    \n  System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message\n  message, TimeSpan timeout)    \n  System.ServiceModel.Channels.ServiceChannel.Call(String\n  action, Boolean oneway,\n  ProxyOperationRuntime operation,\n  Object[] ins, Object[] outs, TimeSpan\n  timeout)    \n  System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage\n  methodCall, ProxyOperationRuntime\n  operation)    \n  System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage\n  message)</p>\n  \n  <p>Exception rethrown at [0]:     \n  System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage\n  reqMsg, IMessage retMsg)    \n  System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp;\n  msgData, Int32 type)    \n  IWS_MG.ProceedOperation(String xmlIn) \n   WS_MGClient.ProceedOperation(String\n  xmlIn)}</p>\n</blockquote>\n\n<p>This exception means the maxsize is 65536, and the data size received is larger.</p>\n\n<p>Anybody knows how change the maxsize ?</p>\n\n<p>For information, this is my code :</p>\n\n<pre><code>try\n                    {\n                        // Factory Creation with WCF WSDL address\n                        DynamicProxyFactory factory = new DynamicProxyFactory(sServiceWsdl);\n\n                        // Solution test which doesn't work    \n                        foreach (ServiceEndpoint endpoint in factory.Endpoints)\n                        {\n\n                            Binding binding = endpoint.Binding;\n\n                            XmlDictionaryReaderQuotas myReaderQuotas = new XmlDictionaryReaderQuotas();\n                            myReaderQuotas.MaxStringContentLength = int.MaxValue;\n                            myReaderQuotas.MaxArrayLength = int.MaxValue;\n                            myReaderQuotas.MaxBytesPerRead = int.MaxValue;\n                            myReaderQuotas.MaxDepth = int.MaxValue;\n                            myReaderQuotas.MaxNameTableCharCount = int.MaxValue;\n\n                            binding.GetType().GetProperty(\"ReaderQuotas\").SetValue(binding, myReaderQuotas, null);\n                        }\n\n                        // Proxy Creation with Contract's name\n                        DynamicProxy proxy = factory.CreateProxy(sContract);\n\n                        XElement XmlIN = XElement.Parse(sXmlIN);\n\n                        // Method call with parameters\n                        XElement XmlOUT = XElement.Parse((string)proxy.CallMethod(sMethod, XmlIN.ToString()));\n\n                        sXmlOUT = XmlOUT.ToString(SaveOptions.None);\n\n                        proxy.Close();\n                    }\n                    catch (Exception e)\n                    {\n                        sXmlOUT = new XElement(\"ALL_XML_OUT\", new XElement(\"APP_TRX\", sAppTrx), new XElement(\"WS_RC\", 1), new XElement(\"ERROR_MESS\", e.Message)).ToString(SaveOptions.None);\n                    }\n</code></pre>\n"},{"tags":["wcf","web-services","ws-security","windows-identity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12812209,"title":"WindowsIdentity.GetCurrent().Name returns machine name rather than windows user name","body":"<p>I am calling a web service application (.asmx) running in a virtual directory on an IIS 7.5 (for development purposes I only have IIS 5.1 but am hoping for some help anyway). Calling my ws when running from within VS2010 System.Security.Principal.WindowsIdentity.GetCurrent().Name returns domain\\windows user but when I call it through the virtual directory I get machine name\\ASPNET.</p>\n\n<p>For some reason  is not allowed in the web.config on the final environment. The virtual directory has Integrated Windows authentication only. </p>\n\n<p>Can anyone shed some light on how to get the current users windows username under the circumstances described?</p>\n\n<p>Thanks in advance...</p>\n\n<p>./CJ</p>\n"},{"tags":[".net","wcf","azure","azure-worker-roles","http-status-code-405"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12686215,"title":"405 Error on Http Input Worker Role when HostnameComparsionMode is set to Exact","body":"<p>I'm having a similar error to this one:\n<a href=\"http://stackoverflow.com/questions/8332564/azure-worker-role-with-http-input-endpoint-on-port-8732-with-http-405-error\">Azure Worker Role with HTTP input endpoint on port 8732 with HTTP 405 Error</a></p>\n\n<p>I have asked the question on MSDN, but no answer yet:\n<a href=\"http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/6e9c84be-f39a-4da9-953e-a82f98afea54\" rel=\"nofollow\">http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/6e9c84be-f39a-4da9-953e-a82f98afea54</a> </p>\n\n<p>The problem is that I cannot test multiple instances of Worker Role with Http Input endpoint. When I start them on Azure Emulator I have to set the HostnameComparsionMode to Exact in order to make appropriate http reservations. However WCF endpoints behaves weirdly with LB and HostnameComparsionMode = Exact (see guomingliwcf.blogspot.com/2009/08/wcf-load-balance-error-http-405-method.html)</p>\n\n<p>Does anyone know any workaround how to test WorkerRoles in Azure emulator with Http Inputs ?</p>\n\n<p>My solution for reproducing the problem:\n<a href=\"https://www.dropbox.com/s/378oaqotdp0axen/HttpRolesTest.zip\" rel=\"nofollow\">https://www.dropbox.com/s/378oaqotdp0axen/HttpRolesTest.zip</a></p>\n\n<p><strong>UPDATE:</strong>\nI'm starting service hosts with the following code</p>\n\n<pre><code>    public override void Run()\n      {\n        // This is a sample worker implementation. Replace with your logic.\n        Trace.WriteLine(\"WorkerRole entry point called\", \"Information\");\n\n        var endpoint = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints.First().Value;\n        var ub = new UriBuilder();\n        ub.Host = endpoint.IPEndpoint.Address.ToString();\n        ub.Port = endpoint.IPEndpoint.Port;\n        ub.Scheme = \"http\";\n        ub.Path = \"Service\";\n        var host = new ServiceHost(typeof (Service), ub.Uri);\n        host.AddDefaultEndpoints();\n        host.Description.Behaviors.Add(new ServiceMetadataBehavior() {HttpGetEnabled = true});\n        host.Description.Behaviors.Add(new OverrideWCFAddressFilterServiceBehavior());\n        foreach (var e in host.Description.Endpoints)\n        {\n            ((BasicHttpBinding)e.Binding).HostNameComparisonMode = HostNameComparisonMode.Exact;\n        }\n        host.Open();\n        foreach(var e in host.Description.Endpoints)\n        {\n            Trace.WriteLine(\"Host listening on \" + e.ListenUri.ToString());\n        }\n        while (true)\n        {\n            Thread.Sleep(10000);\n            Trace.WriteLine(\"Working\", \"Information\");\n        }\n    }\n</code></pre>\n\n<p>Depending on HostNameComparisonMode I get following behaviors:</p>\n\n<ul>\n<li>Weak/StrongWildcard: Exception\nSystem.ServiceModel.AddressAlreadyInUseException: HTTP could not register URL h ttp://+:</li>\n<li>Exact:\n405 MethodNotAllowed when accessing wsdl through load balancer</li>\n</ul>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Question have been answered on msdn forum by Allen Chen.</p>\n"},{"tags":["asp.net",".net","wcf","web-services","asmx"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":270,"score":4,"question_id":12757422,"title":"Should i go for WCF or ASMX web service","body":"<p>My website currently working in <strong>ASP.NET 1.1</strong></p>\n\n<p><em><strong>Old Process</em></strong></p>\n\n<p>In our database we have huge amount of data stored for a decoding purpose. We have to update this huge set of data table each week(Data is supplied from a vendor).</p>\n\n<p><em>In our website (in asp.net 1.1) we query our database to decode information.</em></p>\n\n<p><em><strong>New process</em></strong></p>\n\n<p>Now instead of storing data in our database and query them, we want to replace this through the web service, <em>AS now the vendor is supplying us a DLL, which will give us the decoded information</em>.</p>\n\n<p><em><strong>Information on the DLL provided by the vendor</em></strong></p>\n\n<p><em>The DLL provided, can only be added in 4.0 sites. SO that also impleies that i can not directly add the dll to my 1.1 site.</em>\nThis DLL is exposing certain methods, we simply have to add the DLL refernce in our web service and call the method and fetch the needed information.</p>\n\n<p>Thus we will not have to store those information in our database.</p>\n\n<p><strong>So which type of web service I should go for (asmx OR WCF) that will use the DLLs provided by vendor to fetch the decoded information ??</strong></p>\n\n<p><em><strong>Flexibility i am looking for in the web service are:</em></strong></p>\n\n<ul>\n<li>It can be consumed from <strong>asp.net 1.1 site directly and also using jQuery ajax</strong>.</li>\n<li>It can be consumed from <strong>other web services running on the server</strong>.</li>\n<li>It can be consumed from <strong>some windows services running from the server</strong>.</li>\n</ul>\n\n<p><strong>NOTE</strong> : <em>Moreover we have a plan to migrate our website from asp.net 1.1 to 4.0 version in future.So it should be that much supportive for future upgrade.</em></p>\n"},{"tags":["wcf","service","routing","router"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12816000,"title":"Get client IP at target wcf service after routing","body":"<p>I got a problem after implemented WCF routing.\nThe situation is  a have 2 server A and B,  At server A is installed a WCF serice ( target service) it needs to get IP of clients for check session. Server B is placed WCF router  and all clients will only request to server B ( do not directly to real server A) .  </p>\n\n<p>Now, problem is server A only get IP of the server B, instead of real IP for each client. I would like to know these are any solutions for get  real client's IP after routing like above ? </p>\n"},{"tags":["c#",".net","wcf","web-services","gzip"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":184,"score":5,"question_id":12689086,"title":"adding GZIP to WCF REST service in C#","body":"<p>I'm having trouble enabling GZIP compression on my C#.NET WCF web service and was hoping someone might know what I'm missing in my App.conf configuration file, or what extra is needed when making the call to start the web service in the code.</p>\n\n<p>I've followed the link <a href=\"http://blogs.msdn.com/b/dmetzgar/archive/2011/03/10/compressing-messages-in-wcf-part-one-fixing-the-gzipmessageencoder-bug.aspx\" rel=\"nofollow\">Applying GZIP Compression to WCF Services</a> that points to the download of Microsoft example of adding GZIP but the example does not correlate with how I'm setting up my web service.</p>\n\n<p>So my App.conf looks like</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;services&gt;\n      &lt;service name=\"MyService.Service1\"&gt;\n        &lt;endpoint address=\"http://localhost:8080/webservice\" binding=\"webHttpBinding\" contract=\"MyServiceContract.IService\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior&gt;\n          &lt;webHttp /&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;extensions&gt;\n      &lt;bindingElementExtensions&gt;\n        &lt;add name=\"gzipMessageEncoding\" type=\"MyServiceHost.GZipMessageEncodingElement, MyServiceHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=null\" /&gt;\n      &lt;/bindingElementExtensions&gt;\n    &lt;/extensions&gt;\n    &lt;protocolMapping&gt;\n      &lt;add scheme=\"http\" binding=\"customBinding\" /&gt;\n    &lt;/protocolMapping&gt;\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding&gt;\n          &lt;gzipMessageEncoding innerMessageEncoding=\"textMessageEncoding\"/&gt;\n          &lt;httpTransport hostNameComparisonMode=\"StrongWildcard\" manualAddressing=\"False\" maxReceivedMessageSize=\"65536\" authenticationScheme=\"Anonymous\" bypassProxyOnLocal=\"False\" realm=\"\" useDefaultWebProxy=\"True\"/&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;startup&gt;\n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.0\"/&gt;\n  &lt;/startup&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I simply copied the config and GZIP classes from the MS example into my project and added my relevent web service configs.\nThe code I'm using to start the windows service is:</p>\n\n<pre><code>WebServiceHost webserviceHost = new WebServiceHost(typeof(MyService.Service1));\nwebserviceHost.Open();\n</code></pre>\n\n<p>The webservice runs fine but Fiddler does not detect any response coming back with GZIP compressesion when making a call from a web browser. I also tried programmatically to setup and run the webservice with GZIP but failed miserably. Being green I'm not sure what else I need to configure, any advice is greatful</p>\n\n<p>I've delved deeper into this and found out that since I'm running the webservice as a WebServiceHost object that it must be overriding the custom GZIP binding in the app.conf file with the WebHTTPBinding object that WebServiceHost defaults to, which means anything coming out of the web service will not be encoded.\nTo get around this I figured that I would programmatically write the custom GZIP binding into the code</p>\n\n<pre><code>var serviceType = typeof(Service1);\nvar serviceUri = new Uri(\"http://localhost:8080/webservice\");\nvar webserviceHost = new WebServiceHost(serviceType, serviceUri);\nCustomBinding binding = new CustomBinding(new GZipMessageEncodingBindingElement(), new HttpTransportBindingElement());\nvar serviceEndPoint = webserviceHost.AddServiceEndpoint(typeof(IService), binding, \"endpoint\");\nwebserviceHost.Description.Endpoints[0].Behaviors.Add(new WebHttpBehavior { HelpEnabled = true });\nwebserviceHost.Open();\n</code></pre>\n\n<p>The problem is that it won't allow a custom binding with the WebHttpBehavior. But if I remove the behavior then my REST webservice turns ugly and expects Stream objects as inputs in my contracts. I'm not sure how to configure behaviours so any help is greatful.</p>\n"},{"tags":["c#",".net","json","wcf","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":12804308,"title":"Multiple parameters passed in WCF client don't work (even when WebMessageBodyStyle is Wrapped)","body":"<p>Hi fellow StackOverflowers,</p>\n\n<p>I've got a WCF service wrtten C# that i can succesfully consume from things like jquery.</p>\n\n<p>I want to be able to consume it by adding a web service reference in C# and making calls in the code.   Everything was rosy, until I added multiple parameters.  When I try to call <strong>any</strong> Service method, I get this error:</p>\n\n<blockquote>\n  <p>Operation 'GetStopNames' of contract 'IPublic' specifies multiple\n  request body parameters to be serialized without any wrapper elements.\n  At most one body parameter can be serialized without wrapper elements.\n  Either remove the extra body parameters or set the BodyStyle property\n  on the WebGetAttribute/WebInvokeAttribute to Wrapped.</p>\n</blockquote>\n\n<p>I googled and searched StackOverflow for ages, but everybody seemed to have their problem fixed by setting\n<code>BodyStyle=WebMessageBodyStyle.Wrapped</code>\nin the WebGet / WebInvoke attributes.</p>\n\n<p>An example of one of my service methods in the interface:</p>\n\n<pre><code>    [OperationContract]\n    [WebGet( BodyStyle=WebMessageBodyStyle.WrappedRequest\n     , UriTemplate = \"GetOperators?appKey={apk}\"\n     , RequestFormat = WebMessageFormat.Json\n     , ResponseFormat = WebMessageFormat.Json)]\n    ResultList GetOperators(string apk);\n</code></pre>\n\n<p>Is there something wrong with this?</p>\n\n<p>I'm simply calling</p>\n\n<pre><code>ServiceReference1.PublicClient c = new ServiceReference1.PublicClient();\nc.GetOperators(\"XXX\");\n</code></pre>\n\n<p>inside the client, and it's breaking on the second line.</p>\n\n<p>Any ideas?  If there is any more data you need to help answer me, just add a comment :)</p>\n\n<p>EDIT:\nhere are the excerpts of relevant bits from my Web.config files\n<a href=\"http://pastebin.com/CyQNG6wk\" rel=\"nofollow\">http://pastebin.com/CyQNG6wk</a></p>\n"},{"tags":["c#","wcf","service","asp.net-web-api","wcf-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12412163,"title":"Minimum files needed to deploy webAPI server side","body":"<p>So after a great deal of research I'm starting to enhance our service server stack with a webAPI entry point.  Based on <a href=\"http://forums.asp.net/t/1772347.aspx/1\" rel=\"nofollow\">this thread</a>, and especially the last post by a member of the Digerati board, we are implementing webAPI services as a facade into our WCF application layer.  (Our WCF services are just facades into our Application layer where all of the behavior lives)</p>\n\n<p>My question is this.  I downloaded MVC 4 and created a new WebAPI project in my service solution.  But wow there was a ton of crap that created in my project that I just am not going to need!  For example, all of the image files, the home controller, views and models, etc.  </p>\n\n<p>So in stripping this down to be just a service project, what are the minimum files I need to build a functional service project?  Our intent is to publish both of the service types (WCF and webAPI) side by side in the same server .. each service call doing the same identical service call and returning the specific DTO for the request.  So far it looks like App_Start, Controllers, and the Glabal.asax/web.config entries.  I definitely don't need Views, Models, or Images!!!</p>\n\n<p>Any input on what others have done to do a pure service deployment would be of great welcome here.</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2779,"score":1,"question_id":1483986,"title":"WCF: The server method 'MyMethod' failed","body":"<p>The WCF service is deployed on different machine.</p>\n\n<p>Im able to get the <a href=\"http://MyServer/MYService.svc/jsdebug\" rel=\"nofollow\">http://MyServer/MYService.svc/jsdebug</a> file by giving </p>\n\n<pre><code>  &lt;identity&gt;\n        &lt;dns value=\"ServerName and the portnumber\"/&gt;\n</code></pre>\n\n<p></p>\n\n<p>And I'm able to invoke the service method  using javascript. </p>\n\n<p>After invoking the MyMethod. </p>\n\n<p>I get this error in the javascript --> The server method 'MyMethod' failed, status 404 (in failedCallback) </p>\n\n<p>MyMethod returns a Boolean value in svc.cs file after performing a datacheck.</p>\n\n<p>These are the errors came up when I used Firefox Firebug:</p>\n\n<p>When I call the same service using VS2008 in my development environment it works fine.</p>\n\n<p>I found that following are the files which are not loading while using Ajax enabled VS2005</p>\n\n<p>1) MicrosoftAjax.debug.js(3.5)</p>\n\n<p>2) MicrosoftAjaxWebForms.debug.js(3.5) During runtime</p>\n\n<p>Its obvious that 3.5 debug files doesn't load but, 1.0.6 debug files should load without the errors displayed below.</p>\n\n<pre><code> invokeCalledTwice\":\"Cannot call invoke more than once.\",\n11\"webServiceFailed\":\"The server method \\u0027{0}\\u0027 failed with the following error: {1}\",\n12\"argumentType\":\"Object cannot be converted to the required type.\",\n13\"argumentNull\":\"Value cannot be null.\",\n14\"controlCantSetId\":\"The id property can\\u0027t be set on a control.\",\n15\"formatBadFormatSpecifier\":\"Format specifier was invalid.\",\n16\"webServiceFailedNoMsg\":\"The server method \\u0027{0}\\u0027 failed.\",\n17\"argumentDomElement\":\"Value must be a DOM element.\",\n18\"invalidExecutorType\":\"Could not create a valid Sys.Net.WebRequestExecutor from: {0}.\",\n19\"cannotCallBeforeResponse\":\"Cannot call {0} when responseAvailable is false.\",\n20\"actualValue\":\"Actual value was {0}.\",\n21\"enumInvalidValue\":\"\\u0027{0}\\u0027 is not a valid value for enum {1}.\",\n22\"scriptLoadFailed\":\"The script \\u0027{0}\\u0027 could not be loaded.\",\n23\"parameterCount\":\"Parameter count mismatch.\",\n24\"cannotDeserializeEmptyString\":\"Cannot deserialize empty string.\",\n25\"formatInvalidString\":\"Input string was not in a correct format.\",\n26\"invalidTimeout\":\"Value must be greater than or equal to zero.\",\n27\"cannotAbortBeforeStart\":\"Cannot abort when executor has not started.\",\n28\"argument\":\"Value does not fall within the expected range.\",\n29\"cannotDeserializeInvalidJson\":\"Cannot deserialize. The data does not correspond to valid JSON.\",\n30\"invalidHttpVerb\":\"httpVerb cannot be set to an empty or null string.\",\n31\"nullWebRequest\":\"Cannot call executeRequest with a null webRequest.\",\n32\"eventHandlerInvalid\":\"Handler was not added through the Sys.UI.DomEvent.addHandler method.\",\n33\"cannotSerializeNonFiniteNumbers\":\"Cannot serialize non finite numbers.\",\n34\"argumentUndefined\":\"Value cannot be undefined.\",\n35\"webServiceInvalidReturnType\":\"The server method \\u0027{0}\\u0027 returned an invalid type. Expected type: {1}\",\n36\"servicePathNotSet\":\"The path to the web service has not been set.\",\n37\"argumentTypeWithTypes\":\"Object of type \\u0027{0}\\u0027 cannot be converted to type \\u0027{1}\\u0027.\",\n38\"cannotCallOnceStarted\":\"Cannot call {0} once started.\",\n39\"badBaseUrl1\":\"Base URL does not contain ://.\",\n40\"badBaseUrl2\":\"Base URL does not contain another /.\",\n41\"badBaseUrl3\":\"Cannot find last / in base URL.\",\n42\"setExecutorAfterActive\":\"Cannot set executor after it has become active.\",\n43\"paramName\":\"Parameter name: {0}\",\n44\"cannotCallOutsideHandler\":\"Cannot call {0} outside of a completed event handler.\",\n45\"format\":\"One of the identified items was in an invalid format.\",\n46\"assertFailedCaller\":\"Assertion Failed: {0}\\r\\nat {1}\",\n47\"argumentOutOfRange\":\"Specified argument was out of the range of valid values.\",\n48\"webServiceTimedOut\":\"The server method \\u0027{0}\\u0027 timed out.\",\n49\"notImplemented\":\"The method or operation is not implemented.\",\n50\"assertFailed\":\"Assertion Failed: {0}\",\n51\"invalidOperation\":\"Operation is not valid due to the current state of the object.\",\n52\"breakIntoDebugger\":\"{0}\\r\\n\\r\\nBreak into debugger?\"\n</code></pre>\n\n<p>Appreciate your inputs. </p>\n"},{"tags":["c#","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12815127,"title":"Object references lost after service call","body":"<p>is there a simple way to keep the references from one object to another after a WCF-Service call?\nHere is a little sample:</p>\n\n<pre><code>Class1 obj1 = new Class1();\nobj1.Tag = \"foo\";\n\nClass2 obj2 = new Class2();\nobj2.Class1 = ob1;\n</code></pre>\n\n<p>So when I change the Tag-property of obj1 to \"bar\" obj2.obj1.Tag will, obviously, also result in \"foo\". But this behaviour gets lost when I pass the second object to a WCF-Service and try to do the same operation there. Is there a possibility to achieve that?</p>\n"},{"tags":["wcf","silverlight","pollingduplexhttpbinding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":217,"score":1,"question_id":9680965,"title":"Sending large messages from server to client with pollingDuplexHttpBinding","body":"<p>First, I'd like to ask for the theory, because I didn't find any related documentation: We have a Silverlight client and a WCF service. The communication between them is through a pollingDuplexHttpBinding.\nSuppose the server wants to sent to the client a message which its size is larger than the set MaxBufferSize and MaxReceivedMessageSize. What is going behind the scenes in that case?</p>\n\n<p>Now, here is my actual experience with this issue:\nThe binding configuration on the server-side:</p>\n\n<pre><code>&lt;binding name=\"eventServiceBinding\" sendTimeout=\"00:00:10\" inactivityTimeout=\"24:00:00\" receiveTimeout=\"24:00:00\" serverPollTimeout = \"00:01:00\"/&gt;\n</code></pre>\n\n<p>Send a large (i.e. larger than the value set in client's binding's properties as described above) message from the server to the client. Then, send a second (not large) message => I got a send timeout for the second message (I don't know if the client ever got the first message).\nI've tried to search for some helpful logging in order to see what happens with the first message. Done it both in the server side (by activating the WCF logger) and on the client side (by using Fidler). I've found nothing really interesting in the log (but maybe I didn't search in the correct places).</p>\n\n<p>Moreover - when sendTimeout is set to large value (say 10 minutes), it looks like all additional messages sent from server to client are \"stuck\" - never received by the client and no exceptions are thrown until the send timeout is reached. In addition, I experience  a strange phenomenon in which no communication between any client and any service exposed by the hosting IIS application is working - until I reset IIS. I am not 100% sure though that this is related to the previous problem described here.</p>\n\n<p>Setting the MaxBufferSize and MaxReceivedMessageSize properties in the client side's binding seems to resolve both issues.</p>\n\n<p>Please let me know if you have any experience with such issue and whether you can tell what's actually is going behind the scenes  within WCF here.</p>\n"},{"tags":["wcf","mono","wif","saml","claims-based-identity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12774722,"title":"Add SAML assertions to WCF Client without using WIF","body":"<p>I have a WCF service which is hosted inside a WebApp which uses Claims Based Authentication to authenticate users with ACS and ADFS.</p>\n\n<p>The client is running on Mono so I can't <a href=\"http://stackoverflow.com/questions/3003330/in-a-wcf-client-how-can-i-add-saml-2-0-assertion-to-soap-header\">use WIF to make it \"just work\"</a>.</p>\n\n<p>I can request the assertions (SAML ticket) using <a href=\"http://bit.ly/Ux0RIu\" rel=\"nofollow\">the method described here</a>.</p>\n\n<p>Is there another way to insert the assertion into the WCF Client's request?</p>\n"},{"tags":["wcf","wsdl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12812462,"title":"How to programmatically create WCF service by using existing WSDL file?","body":"<p>I have WSDL file and XSD files and need to programmatically create WCF service.</p>\n\n<p>Programmatically means without using any utility tool such as SvcUtil.exe.</p>\n\n<p>What's my problem here..??</p>\n\n<ol>\n<li><p>I haven't found anything like that on internet.</p></li>\n<li><p>I know how to create WCF service using ChannelFactory, but I don't know how to employ existing WSDL file in such a scenario.</p></li>\n<li><p>There's something about using IXmlSerializable interface and its GetSchema, ReadXml and WriteXml methods, but I'm not sure how to use it.</p></li>\n</ol>\n\n<p>Thank you in advance.</p>\n\n<p>Goran</p>\n"},{"tags":["wcf","metadata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12812138,"title":"What metadata will be transmitted when creating and consuming a wcf service?","body":"<p>I'm just wondering</p>\n\n<ol>\n<li>What form is the metadata in? Say XML?</li>\n<li>Could I add customize the metadata?</li>\n<li>What protocol is the transmission using?</li>\n<li>How can I capture the metadata file?</li>\n</ol>\n"},{"tags":["c#","xml","wcf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12812766,"title":"How to Extract request XML payload from incoming URI for WCF restful service?","body":"<p>I want to extract the incoming XML payload from the web request in the WCF implemented function.</p>\n\n<p>This method is POST type and I am accessing this method from another C# application.\nThis application has created a web request with custom XML payload to the service.\nAnd the same XML payload I want to extract in WCF service.</p>\n\n<p>Any suggestion?</p>\n"},{"tags":["ssl","https","wcf","wcf-binding"],"answer_count":8,"favorite_count":3,"up_vote_count":14,"down_vote_count":0,"view_count":12895,"score":14,"question_id":1521117,"title":"WCF over SSL - 404 error","body":"<p>Okay, I must be missing something utterly simple here, because I've been googling for days, and looking at dozens of answers there, and here on SO, and i just CANNOT get this to work, no matter what i've tried. The service works perfectly fine when called over plain HTTP. </p>\n\n<p>Here's our setup... we have a domain, <a href=\"http://www.mydomain.com\">http://www.mydomain.com</a> . We have an SSL certificate installed on that domain from thawte, just as we would if we were securing an e-commerce site. That all works fine, and i can go to http**s**://www.mydomain.com and it works right.\nI'm running VS2008, .NET 3.5 site on Windows Server 2003 R2.  </p>\n\n<p>Now, I added a Silverlight-enabled WCF service to my site, which i want to communicate with over SSL. If i browse to http**s**://www.mydomain.com/myservice.svc, it shows me the WSDL-descriptive \"<strong>You have created a service</strong>\" page as expected, which shows to create your client using </p>\n\n<pre><code>svcutil.exe https:// ...\n</code></pre>\n\n<blockquote>\n  <p><strong>EDIT:</strong> I realized the url shown for the svcutil in the wsdl file was actually pointing to the physical box name of the web server, not the proper domain. So i went through the steps shown in <em><a href=\"http://www.codemeit.com/wcf/wcf-wsdl-xsdimport-schemalocations-link-to-local-machine-name-not-domain-name-while-hosted-in-iis.html\">this blog posting</a></em> to update the SecureBinding of the website in IIS using the adsutil script. Now the wsdl file shows the correct SSL address, but i still get the same error. </p>\n</blockquote>\n\n<p>Now i went and tried to hook my Silverlight app up to it, and it does not work, returning an exception in the result from the async calls, stating \"<strong>The remote server returned an error: NotFound</strong>. A number of the blogs i've read talked about narrowing it down to Silverlight issues by creating a test Windows application, and trying to reference it from that. Well, I did that and even in a regular windows application trying to access the service over SSL i get an exception stating: </p>\n\n<pre><code>System.ServiceModel.EndpointNotFoundException: \nThere was no endpoint listening at https://www.mydomain.com/mysubdir/myservice.svc that could accept the message. \nThis is often caused by an incorrect address or SOAP action. \nSee InnerException, if present, for more details. ---&gt; \nSystem.Net.WebException: The remote server returned an error: (404) Not Found.\nat System.Net.HttpWebRequest.GetResponse()\nat System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)\n</code></pre>\n\n<p>This despite the fact that i explicitly added the service reference to the Windows app using the HTTPS scheme and it properly gets all the methods and shows them in Intellisense in the editor.</p>\n\n<p>Note that this is a service which does NOT require explicit log in on the user's part. I am going to be sending custom headers in my SOAP envelopes to verify that the requests are coming from our app, and I just want to keep predators from sniffing the line and picking out the custom headers. </p>\n\n<p>Now to the code, where i must just have some stupid little setting wrong, because from all i've read, this should be a fairly straightforward exercise. </p>\n\n<p>First, my service's code-behind class is decorated with the following attributes: </p>\n\n<pre><code>&lt;ServiceBehavior(AddressFilterMode:=AddressFilterMode.Any)&gt; \n&lt;AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)&gt;\n</code></pre>\n\n<p>The ServiceModel section of my web.config on the server looks like so: </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"basicHttpBinding\"&gt;\n                &lt;security mode=\"Transport\"&gt;\n                    &lt;transport clientCredentialType =\"None\"/&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"standingsBehavior\"&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n                    &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n                &lt;/behavior&gt;\n            &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\"&gt;\n        &lt;baseAddressPrefixFilters&gt;\n            &lt;add prefix=\"http://www.mydomain.com:80\"/&gt;\n        &lt;/baseAddressPrefixFilters&gt;\n    &lt;/serviceHostingEnvironment&gt;\n    &lt;services&gt;\n        &lt;service behaviorConfiguration=\"standingsBehavior\" name=\"lijslwebdata\"&gt;\n            &lt;endpoint address=\"\" binding=\"basicHttpBinding\" contract=\"lijslwebdata\"/&gt;\n            &lt;!--&lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;--&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>And the ServiceModel section of the app.config in my Windows application looks like the following: </p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;basicHttpBinding&gt;\n            &lt;binding name=\"BasicHttpBinding_lijslwebdata\" closeTimeout=\"00:01:00\"\n                openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" \n                sendTimeout=\"00:01:00\" allowCookies=\"false\" \n                bypassProxyOnLocal=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferSize=\"65536\" maxBufferPoolSize=\"524288\" \n                maxReceivedMessageSize=\"65536\" messageEncoding=\"Text\" \n                textEncoding=\"utf-8\" transferMode=\"Buffered\"\n                useDefaultWebProxy=\"true\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\"\n                    maxArrayLength=\"16384\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;security mode=\"Transport\"&gt;\n                    &lt;transport clientCredentialType=\"None\" proxyCredentialType=\"None\" realm=\"\"/&gt;\n                    &lt;message clientCredentialType=\"UserName\" algorithmSuite=\"Default\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/basicHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"https://www.mydomain.com/mysubdir/myservice.svc\"\n            binding=\"basicHttpBinding\" \n            bindingConfiguration=\"BasicHttpBinding_lijslwebdata\"\n            contract=\"xdata.lijslwebdata\" name=\"BasicHttpBinding_lijslwebdata\" /&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n"},{"tags":["wcf","certificate","x509"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12811668,"title":"WCF client error The private key is not present in the X.509 certificate","body":"<p>I'm stuck trying to get a WCF client to communicate to an IIS Hosted WCF Service with TransportWithMessageCredential. </p>\n\n<p>In this scenario we will have about 20 clients all running the client app. It is planned they will all use the same certificate to communicate with our server to provide encryption (identification is handled separately). Our server root web site is already configured with a certificate. The WCF service will be running from a sub-site and I wish to use this same certificate to secure access from our client app to the service. </p>\n\n<p>If I install a PFX certificate on the client everything is fine. But I do not want to export the Private Key from our server - wouldn't this be a security issue?</p>\n\n<p>If I install a CER certificate file, run my client app, I get the error - The private key is not present in the X.509 certificate - sounds reasonable as I did not export one</p>\n\n<p>Maybe I'm missing something; I have googled this a lot and most solutions state to export the private key.</p>\n\n<p>Is there any way to use a CER certificate file without exporting the private key from our server? Or what is considered best practice.</p>\n\n<p>Thanks for any advice.</p>\n"},{"tags":["database","wcf","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12803258,"title":"Load data, WCF services","body":"<p>Help me please!\nI have project on ASP.NET MVC, EF 4.5 and WCF services.\nProblem is that data from database are not loading to View.\nI traced host WCF project with debugger and saw logs in SvcTraceViewer and\nI saw similar errors for entities(which are not loading), but I cant stand what they mean.:</p>\n\n<p>Image with error description.\n<img src=\"http://i.stack.imgur.com/hmy6c.png\" alt=\"My errors\"></p>\n"},{"tags":["c#",".net","wcf","entity-framework","poco"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":63,"score":-2,"question_id":12810918,"title":"COLLECTION Fixed Size WCF Entity Framework","body":"<p>I have the following problem, my WCF service is pretty simple, send some entities from an entity framework context, which I have disabled the proxy generation and Lazy loading, but what happens is that when I have an entity which I add a reference entity arises me an exception that tells me that the collection has a fixed size. I guess the problem must be in WCF when serializing / deserealizar entity, but I can not think how to solve the problem.</p>\n\n<p>example:</p>\n\n<p>An Office Product has products and has offices, I get the list of available service offices (from entity framework) and then I create a product, but when assigning an office or:</p>\n\n<pre><code>NewProduct.Oficinas.Add(varOficina);\n</code></pre>\n\n<p>raises the exception that tells me that the collection has a fixed size, but does not arise from the collection \"Office\" product of the entity, the entity arising from member Office and \"Products\", that the problem arises in the body that comes from WCF service, so I guess there goes the problem. Hopefully someone has the answer because it has brought me a lot of headaches</p>\n"},{"tags":["wcf","monotouch"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":190,"score":3,"question_id":10790248,"title":"Error when adding service reference to WCF service with type ObservableCollection","body":"<p>When trying to add a service reference to an existing WCF service (which is providing collections of type <code>ObservableCollection</code>) I get the following error message :</p>\n\n<blockquote>\n  <p>schema type 'http://schemas.microsoft.com/2003/10/Serialization/Arrays:ArrayOfString' has not been imported yet. Import it first.</p>\n</blockquote>\n\n<p>I tried to change the Framework (in the Add Web Reference screen) to '.NET 2.0 Web Services'. In that case I don't get the above mentioned error message, however, I'm unable to call the several functions the WCF service provides (they are simply not generated).</p>\n\n<p>Can anybody help me?</p>\n\n<p>Thanks in advance.</p>\n\n<p>Ernstjan</p>\n"},{"tags":["c#",".net","wcf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12807352,"title":"When discovery returns a list of end points, is it consistently ordered","body":"<p>Support there are 5 servers to discover, S1, S2.., S5. And there are 2 clients, launching discovery, C1 and C2. When the discovery is complete (suppose successfully), will two lists of discovered proxies on C1 and C2 ordered the same? </p>\n\n<p>To that extent, if C1 re-launches discovery, will its new list match the original one as by content as by order?</p>\n\n<p>UPDATE: asked to provide code and I dug into library we use and found this callback. This made me think that it's actually all about what it does, not anything else.</p>\n\n<pre><code>    discoveryClient.FindProgressChanged += new EventHandler&lt;FindProgressChangedEventArgs&gt;(ClientFindProgressChanged);\n</code></pre>\n"},{"tags":["c#","wcf","wcf-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12784287,"title":"How to fetch large data WCF - Stream or Buffered?","body":"<p>Currently I'm having a NetTcpBinding with the default Buffered Transport Mode. I'm trying to determine what the best solution is for my request that builds a class that ends up being a large amount of data.</p>\n\n<p>Basically I have a request that comes into WCF to grab a bunch of reporting information and return it to the client. As long as this is under the 64k MaxMessageRecievedSize it is fine, but if it goes over then I end up having an exception. </p>\n\n<p>Should I switch to a Streaming TransferMode and then stream a file back to the client instead since the data could be small or large amounts? Or is it ok to increase the MaxMessageRecievedSize? It seems like a bad idea to increase the MaxMessageRecievedSize because if we have multiple connections to the service all fetching large amounts of data we could potentially have memory issues?</p>\n\n<p>Any thoughts on how I could go about achieving this?</p>\n"},{"tags":["c#","wcf","streaming","messagecontract"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12801968,"title":"WCF Streaming File Issue","body":"<p>Is it possible to stream a file using WCF with a MessageContract that contains another MessageContract that has the Stream inside it? I think the answer is no, but I'd much prefer to package my file inside a \"Root\" message so to speak.</p>\n\n<p>In otherwords my setup is like this:</p>\n\n<pre><code>[MessageContract]\npublic class Transport\n{\n    [MessageHeader]\n    private readonly Guid fId;\n\n    [MessageHeader]\n    private readonly DateTime fTimestamp;\n\n    [MessageBodyMember(Order = 1)]\n    public FileTransferMessage FileTransferMessage { get; set; }\n}\n\n[MessageContract]\npublic class FileTransferMessage : IDisposable\n{\n    [MessageBodyMember(Order = 1)]\n    public Stream FileByteStream;\n\n    [MessageHeader(MustUnderstand = true)]\n    public long FileLength;\n\n    [MessageHeader(MustUnderstand = true)]\n    public string FileName;\n}\n</code></pre>\n\n<p>The request is sent and received to the service just fine, however, it appears the Stream is not being deserialized properly and coming back as null reference. I know I've read a rule somewhere that states on a MessageContract with Streaming that the Stream MUST be the Body of the MessageContract, and I'm thinking that is what is being violated right now. I was hoping that the FileTransferMessage being the Body and then the Stream being the Body of that would be acceptable.</p>\n\n<p>Anyone have any suggestions on what I can do here? I'd prefer NOT to add a Stream/FileName/FileLength to my Transport object.</p>\n"},{"tags":["c#",".net","wcf","web-services","soap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12805296,"title":"How to decode multipart/related responses in WCF?","body":"<p>I have a webservice that returns the result as <code>multipart/related</code>:</p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nContent-Type: multipart/related; boundary=MIMEBoundaryurn_uuid_FCAC227A0F1D534C2D1349803588825;\ntype=\"application/soap+xml\"; start=\"&lt;0.urn:uuid:FCAC227A0F1D534C2D1349803588826@apache.org&gt;\"; action=\"urn:MyServiceAction\"\nDate: Tue, 09 Oct 2012 17:26:28 GMT\nContent-Length: 2961\n\n--MIMEBoundaryurn_uuid_FCAC227A0F1D534C2D1349803588825\nContent-Type: application/soap+xml; charset=UTF-8\nContent-Transfer-Encoding: 8bit\nContent-ID: &lt;0.urn:uuid:FCAC227A0F1D534C2D1349803588826@apache.org&gt;\n\n&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;soapenv:Envelope xmlns:soapenv=\"http://www.w3.org/2003/05/soap-envelope\"&gt;\n[... snipped ...]\n&lt;/soapenv:Envelope&gt;\n--MIMEBoundaryurn_uuid_FCAC227A0F1D534C2D1349803588825--\n</code></pre>\n\n<p>WCF seems to not support that. I'm using a custom binding and the <code>TextMessageEncodingBindingElement</code> blows up with a message telling me that the content type isn't supported. <code>MtomMessageEncodingBindingElement</code> also complains because it doesn't expect <code>application/soap+xml</code> but <code>application/xop+xml</code>.</p>\n\n<p>Is there a MessageEncoder that can properly handle <code>multipart/related</code> for <code>application/soap+xml</code>? Or is there an easy way for me to hook into the pipeline and extract the payload before it gets sent to <code>TextMessageEncodingBindingElement</code>?</p>\n"},{"tags":["c#",".net","wcf","service-reference"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12806704,"title":"Service Reference with Values in Elements","body":"<p>I'm using a Service Reference to a Java Web Service returning XML like this:</p>\n\n<pre><code>&lt;m_score value=\"3\"&gt;&lt;Explanation value=\"20.51\"&gt;Class Count&lt;/Explanation&gt;\n    &lt;Explanation value=\"-15.03\"&gt;NCCI Governing Industry Group&lt;/Explanation&gt;\n    &lt;Explanation value=\"-9.74\"&gt;Combined Weighted Average Hazard Score&lt;/Explanation&gt;\n    &lt;Explanation value=\"4.9\"&gt;Policy Weighted Average Loss Cost Relative to Governing Class Loss Cost&lt;/Explanation&gt;\n    &lt;Explanation value=\"-2.96\"&gt;Governing Class Loss Cost&lt;/Explanation&gt;\n&lt;/m_score&gt;\n</code></pre>\n\n<p>The problem is that when I generate the proxy and request/response objects, the data within the Explanation elements is not represented in the objects. There are only properties for the attributes within each of the elements.</p>\n\n<p>Is there any way to have the explanation name returned as well? For example, 'NCCI Governing Industry Group', etc...</p>\n\n<p>Thanks!</p>\n\n<p>Edit - relevant parts of WSDL:</p>\n\n<pre><code>&lt;complexType name=\"ExplanationType\"&gt;\n    &lt;attribute name=\"value\" use=\"required\"/&gt;\n&lt;/complexType&gt;\n&lt;complexType name=\"m_scoreInsuredResponseType\"&gt;\n    &lt;sequence&gt;\n       &lt;element maxOccurs=\"unbounded\" minOccurs=\"0\" name=\"Explanation\" type=\"response:ExplanationType\"/&gt;\n    &lt;/sequence&gt;\n    &lt;attribute name=\"value\" use=\"required\"/&gt;\n&lt;/complexType&gt;\n</code></pre>\n"},{"tags":["wcf","unity","enterprise-library","msmq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12809047,"title":"Unity Configuration in Referenced Assembly not recognized","body":"<p>I have a rather expensive library which I've inherited from another project. This assembly is using interception via Unity and requires an elaborate Web.config for design time configuration. I am attempting to use this assembly from within a MSMQ WCF Service, and I'm receiving errors when the code inside the assembly attempts to open DB connections that are hosted by Enterprise Library.</p>\n\n<blockquote>\n  <p>Resolution of the dependency failed, type =\n  \"ServicesImplementation.EntityMaster.IEntityRepository\", name =\n  \"(none)\". Exception occurred while: while resolving. Exception is:\n  InvalidOperationException - The current type,\n  ServicesImplementation.EntityMaster.IEntityRepository, is an interface\n  and cannot be constructed. Are you missing a type mapping?</p>\n</blockquote>\n\n<p>My question, is it required that I assume all configuration responsibilities from my WCF Service, or is this configuration encapsulated within the referenced assembly.</p>\n"},{"tags":["wcf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12808744,"title":"Hide datamember from client but still serialize?","body":"<p>Is it possible to hide a class' data member from client applications but still serialize with XmlSerializer?</p>\n\n<p>The context is that I'm getting an address in pieces but need to concatenate many of those pieces into a single string before serializing the object to XML and passing it along to something else.</p>\n\n<p>The address class is in turn part of a larger class so simply inheriting and adding this bit is more complicated were it not nested and my need isn't great enough to warrant writing a custom serializer.</p>\n\n<p>Sample:</p>\n\n<pre><code>[DataContract]\npublic class Address\n{\n    [DataMember()]\n    public string City\n\n    [DataMember()]\n    public string State\n\n    [DataMember()]\n    public string StreetDirection\n\n    [DataMember()]\n    public string StreetName\n\n    [DataMember()]\n    public string StreetNumber\n\n    [DataMember()]\n    public string StreetSuffix\n\n    [DataMember()]\n    public string Unit\n\n    [DataMember()]\n    public string Zip\n\n    [IgnoreDataMember()]\n    [Serializable]\n    public string AddressLine1\n}\n</code></pre>\n\n<p>Basically, I want to have a placeholder (AddressLine1) where I can put the concatenation of StreetXXX properties before passing along (and it's already if the receiver sees the individual pieces).</p>\n\n<p><strong>Edit - add example</strong>\nInput would be something like:</p>\n\n<pre><code>&lt;Address&gt;\n  &lt;StreetNumber&gt;123&lt;/StreetNumber&gt;\n  &lt;StreetDirection&gt;S.&lt;/StreetDirection&gt;\n  &lt;StreetName&gt;Main&lt;/StreetName&gt;\n  &lt;StreetSuffix&gt;St.&lt;/StreetSuffix&gt;\n  &lt;Unit&gt;207&lt;/Unit&gt;\n  &lt;City&gt;Denver&lt;/City&gt;\n  &lt;State&gt;CO&lt;/State&gt;\n  &lt;Zip&gt;80123&lt;/Zip&gt;\n&lt;/Address&gt;\n</code></pre>\n\n<p>But I'd want to wind up serializing to:</p>\n\n<pre><code>&lt;Address&gt;\n  &lt;StreetNumber&gt;123&lt;/StreetNumber&gt;\n  &lt;StreetDirection&gt;S.&lt;/StreetDirection&gt;\n  &lt;StreetName&gt;Main&lt;/StreetName&gt;\n  &lt;StreetSuffix&gt;St.&lt;/StreetSuffix&gt;\n  &lt;Unit&gt;207&lt;/Unit&gt;\n  &lt;City&gt;Denver&lt;/City&gt;\n  &lt;State&gt;CO&lt;/State&gt;\n  &lt;Zip&gt;80123&lt;/Zip&gt;\n  &lt;AddressLine1&gt;123 S. Main St.&lt;/AddressLine1&gt;\n&lt;/Address&gt;\n</code></pre>\n\n<p>Thanks,</p>\n\n<p>John</p>\n"},{"tags":["wcf","silverlight","web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":9636873,"title":"Silverlight, WCF service relay and security","body":"<p>I have a silverlight 4 application which needs to consumes some services hosted on a Java (I think CXF) Web Service.\nFor some reasons, I can't access directly the service so I have to go through a relay service.\nI created a WCF relay service.\nThe service uses SOAP 1.2 and WS addressing 1.0</p>\n\n<p>What I ask is.. what level of security can I reach?\nThe ideal situation is to use a mutual authentication of the server (CXF) and my client.\nIf Silverlight does not support this, the second possibility is to have a \"simple\" https connection between my silverlight client and my relay server, but then, is it possible to \"add\" a mutual authentication between the relay and CXF? Or the only possible solution is to have a simple SSL connection with only the server authentication?</p>\n"},{"tags":["wcf","asynchronous","webclient","uploadstring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":236,"score":0,"question_id":11218045,"title":"C# UploadStringAsync not working","body":"<p>I am having a wcf service and I am calling a method like this:</p>\n\n<pre><code>public static void f5()\n    {\n        var client = new WebClient();\n        client.UploadStringCompleted += new UploadStringCompletedEventHandler(client_UploadStringCompleted);\n        var data = File.ReadAllText(\"request.xml\");\n        client.Headers.Add(\"Content-Type\", \"text/xml;charset=utf-8\");\n        client.Headers.Add(\"SOAPAction\", \"some string\");            \n        client.UploadStringAsync(new Uri(\"http://differentdomain/wcf/Service.svc\"), data);\n    }\n\n    public static void client_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)\n    {\n        Console.WriteLine(e.ToString());\n        int cow = 0;\n        cow++;\n    }\n\n    static void Main(string[] args)\n    {\n        f5();\n    }\n</code></pre>\n\n<p>This program works perfectly when I don't use async method however the handler is not getting called soe some reason. The web service is hosted on a different computer on a different domain but the client and server are connected to same network. Most importanly everything works fine if I use UploadString instead.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","wcf","web-services"],"answer_count":7,"favorite_count":15,"up_vote_count":47,"down_vote_count":0,"view_count":44602,"score":47,"question_id":784606,"title":"Large WCF web service request failing with (400) HTTP Bad Request","body":"<p>I've encountered this apparently common problem and have been unable to resolve it.</p>\n\n<p><strong>If I call my WCF web service with a relatively small number of items in an array parameter (I've tested up to 50), everything is fine.</strong></p>\n\n<p><strong>However if I call the web service with 500 items, I get the Bad Request error.</strong></p>\n\n<p>Interestingly, I've run <a href=\"http://www.wireshark.org/\" rel=\"nofollow\">Wireshark</a> on the server and it appears that the request isn't even hitting the server - the 400 error is being generated on the client side.</p>\n\n<p><strong>The exception is:</strong></p>\n\n<pre><code>System.ServiceModel.ProtocolException: The remote server returned an unexpected response: (400) Bad Request. ---&gt; System.Net.WebException: The remote server returned an error: (400) Bad Request.\n</code></pre>\n\n<p><strong>The <code>system.serviceModel</code> section of my client config file is:</strong></p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n        &lt;wsHttpBinding&gt;\n            &lt;binding name=\"WSHttpBinding_IMyService\" closeTimeout=\"00:01:00\"\n                openTimeout=\"00:01:00\" receiveTimeout=\"00:10:00\" sendTimeout=\"00:01:00\"\n                bypassProxyOnLocal=\"false\" transactionFlow=\"false\" hostNameComparisonMode=\"StrongWildcard\"\n                maxBufferPoolSize=\"524288\" maxReceivedMessageSize=\"2147483647\"\n                messageEncoding=\"Text\" textEncoding=\"utf-8\" useDefaultWebProxy=\"true\"\n                allowCookies=\"false\"&gt;\n                &lt;readerQuotas maxDepth=\"32\" maxStringContentLength=\"8192\" maxArrayLength=\"2147483647\"\n                    maxBytesPerRead=\"4096\" maxNameTableCharCount=\"16384\" /&gt;\n                &lt;reliableSession ordered=\"true\" inactivityTimeout=\"00:10:00\"\n                    enabled=\"false\" /&gt;\n                &lt;security mode=\"None\"&gt;\n                    &lt;transport clientCredentialType=\"Windows\" proxyCredentialType=\"None\"\n                        realm=\"\" /&gt;\n                    &lt;message clientCredentialType=\"Windows\" negotiateServiceCredential=\"true\"\n                        establishSecurityContext=\"true\" /&gt;\n                &lt;/security&gt;\n            &lt;/binding&gt;\n        &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;client&gt;\n        &lt;endpoint address=\"http://serviceserver/MyService.svc\"\n            binding=\"wsHttpBinding\" bindingConfiguration=\"WSHttpBinding_IMyService\"\n            contract=\"SmsSendingService.IMyService\" name=\"WSHttpBinding_IMyService\" /&gt;\n    &lt;/client&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p><strong>On the server side, my web.config file has the following <code>system.serviceModel</code> section:</strong></p>\n\n<pre><code>&lt;system.serviceModel&gt;\n    &lt;services&gt;\n        &lt;service name=\"MyService.MyService\" behaviorConfiguration=\"MyService.MyServiceBehaviour\" &gt;\n            &lt;endpoint address=\"\" binding=\"wsHttpBinding\" bindingConfiguration=\"MyService.MyServiceBinding\" contract=\"MyService.IMyService\"&gt;\n            &lt;/endpoint&gt;\n            &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n        &lt;/service&gt;\n    &lt;/services&gt;\n    &lt;bindings&gt;\n      &lt;wsHttpBinding&gt;\n        &lt;binding name=\"MyService.MyServiceBinding\"&gt;\n          &lt;security mode=\"None\"&gt;&lt;/security&gt;\n        &lt;/binding&gt;\n      &lt;/wsHttpBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n        &lt;serviceBehaviors&gt;\n            &lt;behavior name=\"MyService.MyServiceBehaviour\"&gt;\n                &lt;!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment --&gt;\n                &lt;serviceMetadata httpGetEnabled=\"true\"/&gt;\n                &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;\n                &lt;serviceDebug includeExceptionDetailInFaults=\"true\"/&gt;\n            &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n&lt;/system.serviceModel&gt;\n</code></pre>\n\n<p>I've <a href=\"http://stackoverflow.com/questions/740039/c-wcf-wcf-service-returning-a-404-bad-request-when-sending-an-array-of-items\" rel=\"nofollow\">looked at</a> a <a href=\"http://stackoverflow.com/questions/323551/http-bad-request-error-when-requesting-a-wcf-service-contract\" rel=\"nofollow\">fairly large</a> <a href=\"http://rajaramtechtalk.wordpress.com/2008/05/29/systemservicemodelprotocolexception-the-remote-server-returned-an-unexpected-response-400-bad-request/\" rel=\"nofollow\">number</a> of <a href=\"http://www.stonejunction.com/post/2008/12/01/WCF-Call-gives-400-Bad-Request-response.aspx\" rel=\"nofollow\">answers</a> to <a href=\"http://www.experts-exchange.com/Programming/Languages/.NET/Web%5FServices/Q%5F24002313.html\" rel=\"nofollow\">this question</a> with <a href=\"http://joewirtley.blogspot.com/2007/08/maximum-string-content-length-and.html\" rel=\"nofollow\">no success</a>.</p>\n\n<p>Can anyone help me with this?</p>\n"},{"tags":["wcf","silverlight","security","ssl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":954518,"title":"From http to Https Service Call","body":"<p>is there a way for some one to sneak in the to see data if my service is over http and the caller in my case is hosted on http (i.e. service is on secure ssl host while caller is on simple http).\nis that call secure or not?</p>\n"},{"tags":["c#","wcf","web-services","class-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":128,"score":-1,"question_id":12803966,"title":"Adding WCF Service refrence in Class library project, and Adding the Same WEF refrence in Web site consuming that class library.","body":"<p>I am really stuck up in a situation and will try to explain it in parts. </p>\n\n<p>1: I have a WCF Class library project having some services. </p>\n\n<p>2: I have a Class library project. </p>\n\n<p>3: I have a Web Site consuming the class library project. </p>\n\n<p>4: <strong>The Class library has a service reference from WCF class library project and same WCF refrence is added to Web site as well</strong></p>\n\n<p>5: When i build the website the following error comes up. </p>\n\n<blockquote>\n  <p>Error 1113    Reference.svcmap: Failed to generate code for the service reference 'VPServices'.  Cannot import wsdl:portType  Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter  Error: List of referenced types contains more than one type with data contract name 'VpResponseData' in namespace 'http://schemas.datacontract.org/2004/07/VPExternalCalls.CoreApi.MessageDefinitions'. Need to exclude all but one of the following types. Only matching types can be valid references:  </p>\n  \n  <p>\"WebApplication.Helpers.Class.ResponseData, WebApplication.Helpers,\n  Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\" (matching) \n  \"VPExternalCalls.CoreApi.MessageDefinitions.VpResponseData,\n  VPExternalCalls, Version=1.0.0.0, Culture=neutral,\n  PublicKeyToken=559d4289d6c6d138\" (matching)  XPath to Error Source:\n  //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IVPServices']\n  Cannot import wsdl:binding  Detail: There was an error importing a\n  wsdl:portType that the wsdl:binding is dependent on.  XPath to\n  wsdl:portType:\n  //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IVPServices']\n  XPath to Error Source:\n  //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='BasicHttpBinding_IVPServices']\n  Cannot import wsdl:port  Detail: There was an error importing a\n  wsdl:binding that the wsdl:port is dependent on.  XPath to\n  wsdl:binding:\n  //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='BasicHttpBinding_IVPServices']\n  XPath to Error Source:\n  //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:service[@name='VPServices']/wsdl:port[@name='BasicHttpBinding_IVPServices']   App_WebReferences/VPServices/</p>\n</blockquote>\n"},{"tags":[".net","silverlight","wcf","iis","ssl"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":500,"score":5,"question_id":5648280,"title":"WCF with SSL terminating load balance server","body":"<p>we have 2 load balanced IIS servers which we want to host a WCF on. the entry URL is https but this is terminated at the load balanced server and changed to http before it gets to the IIS servers. </p>\n\n<p>We are using .net 4, is there a built in configuration to handle this scenario?</p>\n"},{"tags":["silverlight","wcf","ssl"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":833,"score":1,"question_id":6063304,"title":"Silverlight 4 - Configure Self-Hosted WCF Service to use SSL","body":"<p>I have a Silverlight 4 application that uses WCF services on the same server (self-hosted).  Everything works fine, but now I want to convert my WCF services to use SSL.  I am using CustomBindings and can't quite find the combination to get this done.  I am using relative URLs on the client side, and hope this is not causing a problem.  Here are the important bits of my Web.config file:</p>\n\n<pre><code>    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\"  /&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"true\" /&gt;\n          &lt;dataContractSerializer maxItemsInObjectGraph=\"6553600\"/&gt;\n          &lt;serviceTimeouts transactionTimeout=\"00:10:00\"/&gt;\n        &lt;/behavior&gt;\n        &lt;/serviceBehaviors&gt;\n      &lt;/behaviors&gt;\n\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"MyApp.Web.Services.ProjectService.customBinding0\"\n          receiveTimeout=\"00:10:00\" sendTimeout=\"00:10:00\"&gt;\n          &lt;binaryMessageEncoding /&gt;\n          &lt;httpsTransport maxReceivedMessageSize=\"2147483647\" /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n  &lt;services&gt;\n    &lt;service name=\"MyApp.Web.Services.ProjectService\"&gt;\n        &lt;endpoint address=\"\" binding=\"customBinding\" bindingConfiguration=\"MyApp.Web.Services.ProjectService.customBinding0\"\n          contract=\"MyApp.Web.Services.ProjectService\" /&gt;\n      &lt;/service&gt;\n</code></pre>\n\n<p>My ClientConfig looks like this:</p>\n\n<pre><code>    &lt;configuration&gt;\n    &lt;system.serviceModel&gt;\n        &lt;bindings&gt;\n            &lt;customBinding&gt;\n                &lt;binding name=\"CustomBinding_ProjectService\"&gt;\n                    &lt;binaryMessageEncoding /&gt;\n                    &lt;httpTransport maxReceivedMessageSize=\"2147483647\" maxBufferSize=\"2147483647\" /&gt;\n                &lt;/binding&gt;\n           &lt;/customBinding&gt;\n       &lt;/bindings&gt;\n       &lt;client&gt;\n            &lt;endpoint address=\"../Services/ProjectService.svc\" binding=\"customBinding\"\n                bindingConfiguration=\"CustomBinding_ProjectService\" contract=\"SearchProxy.ProjectService\"\n                name=\"CustomBinding_ProjectService\" /&gt;\n     &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>I just don't understand how the bindings work in both the server and client.  I'm hoping someone can point me in the right direction.</p>\n"},{"tags":["wcf","rest",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12808424,"title":"REST and hosting of WCF service","body":"<p>I am developing a WCF service (VS2010, .NET 4.0).  If in the WCF service I utilise REST type functionality (i.e. decorate my methods with WebGet, etc), since REST heavily leverages the HTTP protocol, am I locked into hosting the WCF service as HTTP - i.e. do I have the option to host as net.tcp ?</p>\n"},{"tags":["c#","wcf","image","rest"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12781173,"title":"Can't return image from WCF Rest service","body":"<p>As topic says, I having a problem to receive an image from my Wcf rest service.  The endpoint seems to be alright but i only get empty data back.</p>\n\n<p>Web.config:</p>\n\n<pre><code>  &lt;service name=\"RestService.RestServiceImpl\" behaviorConfiguration=\"ServiceBehaviour\"&gt;\n    &lt;endpoint address =\"\" binding=\"webHttpBinding\"                     contract=\"RestService.IRestServiceImpl\" behaviorConfiguration=\"web\"/&gt;\n      &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\" /&gt;\n  &lt;/service&gt;\n</code></pre>\n\n<p>SVC:</p>\n\n<pre><code>        [OperationContract]\n    [WebGet(UriTemplate = \"GetImage\", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]\n    Stream GetImage();\n\n    public Stream GetImage()\n    {\n        var ms = new MemoryStream();\n        Resource1.batman.Save(ms, System.Drawing.Imaging.ImageFormat.Png);\n        WebOperationContext.Current.OutgoingResponse.ContentType = \"image/png\";\n        return ms;\n    }\n</code></pre>\n\n<p>Markup:</p>\n\n<pre><code>&lt;%@ ServiceHost Language=\"C#\" Debug=\"true\" Service=\"RestService.RestServiceImpl\" CodeBehind=\"RestServiceImpl.svc.cs\" Factory=\"System.ServiceModel.Activation.WebServiceHostFactory\"%&gt;\n</code></pre>\n"},{"tags":["wcf","ws-discovery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":11548381,"title":"WCF Discovery with load balanced end points","body":"<p>I have the following scenario:</p>\n\n<p>I have a master controlling WCF application that allows different client applications to communicate with one another. It finds the clients that want to communicate with each other using WCF discovery. Something like shown below:</p>\n\n<pre><code>[Client Prod 1] &lt;--&gt; [Controller] &lt;--&gt; [Client Prod 2]\n</code></pre>\n\n<p>All works fine however I was just informed that the client's prod environment is using a load balancer between my controller and the client apps:</p>\n\n<pre><code>[Client Prod 1-1]                                                             [Client Prod 2-1]\n[Client Prod 1-2] &lt;--&gt; Load Balancer &lt;--&gt; [Controller] &lt;--&gt; Load Balancer &lt;--&gt; [Client Prod 2-2]\n[Client Prod 1-3]\n</code></pre>\n\n<p>When the client product 1 does it's \"Hello\" announcement, will WCF register 3 separate prod 1's or will it just register the load balancer?</p>\n\n<p>(Additional information: .NET 4 and IIS 7.5)</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net",".net","winforms","wcf","dependency-injection"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12779665,"title":"System.Web.Compilation.BuildManager.GetReferencedAssemblies() equivalent for non-web applications","body":"<p>Compared to <code>AppDomain.GetAssemblies()</code>, <code>BuildManager.GetReferencedAssemblies()</code> (<a href=\"http://msdn.microsoft.com/en-us/library/system.web.compilation.buildmanager.aspx\" rel=\"nofollow\">System.Web.Compilation.BuildManager</a>) seems a more reliable way to get the assemblies that are referenced by an ASP.NET application at runtime, since <a href=\"http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx\" rel=\"nofollow\">AppDomain.GetAssemblies()</a> only gets \"the assemblies that have [already] been loaded into the execution context of this application domain\". </p>\n\n<p>Iterating through all assemblies is an important tool for dynamically registering types at application start-up in your DI container and especially during application start-up, chances are that other assemblies are not loaded (where not needed) yet, and the composition root is the first one that needs them. It is therefore very important to have a reliable method to get the application's referenced assemblies.</p>\n\n<p>Although <code>BuildManager.GetReferencedAssemblies()</code> is a reliable method for ASP.NET applications, I'm wondering: what alternatives are available for other types of applications, such as desktop applications, windows services and self-hosted WCF services?</p>\n"},{"tags":[".net","wcf","post","options","multipartform-data"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12806169,"title":"Uploading via puploader into WCF","body":"<p>I have problem using puploader in Firefox. In the backend I have WCF service installed, which have following endpoint. And it recieves <code>multipart/form-data</code> </p>\n\n<pre><code>        [OperationContract]\n        [WebInvoke(Method = \"POST\", UriTemplate = \"/CheckResults?sid={sid}&amp;scenario={scenario}&amp;answer={answer}\",\n            BodyStyle = WebMessageBodyStyle.Bare,\n            RequestFormat = WebMessageFormat.Json,\n            ResponseFormat = WebMessageFormat.Json)]\n        Stream CheckResults(Stream fileinfo, string sid, string scenario, string answer);\n</code></pre>\n\n<p>In Chrome this method works fine, but in Firefox puploader uses OPTIONS type and I recieve following error:</p>\n\n<pre><code>[22:11:49.387] OPTIONS http://service.luxquest.org/Service.svc/CheckResults?sid=71860810-b8e9-4bc0-a37b-e05e41439af8&amp;scenario=P \n[HTTP/1.1 405 Method Not Allowed 34]\n</code></pre>\n\n<p>What I need to configure to show puploader the right way - using POST method instead of OPTIONS?</p>\n"},{"tags":["wcf","mvc","wcf-web-api","asp.net-web-api","web-api"],"answer_count":4,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":5347,"score":11,"question_id":9778665,"title":"Mvc 4 vs. Wcf Web Api","body":"<p>What are the pros and cons of using each technology?</p>\n\n<p>WCF Web Api is now merged into Asp.net\nAsp.net web api now supports self hosting.</p>\n\n<p>I still imagine if I want to expose multiple protocol schemas for the same operation I would still lean towards WCF or can Mvc end point do this too?</p>\n\n<p>Also does the new Asp.Net web api expose Wsdl? If not how would the client figure out what operation is available to them?</p>\n\n<p>Arguably the best feature of Mvc is the modelbinder. How robust is the WCF equivalent? </p>\n\n<p>So can someone tell me what advantage does the Asp.net web api bring to the table? WCF seems overwhelmingly the more powerful/scalable choice, imo. About the only thing the Mvc Web Api has over the WCF model is probably ease of development, but that means squat if it ends up being a serious design limitation down the road.</p>\n"},{"tags":[".net","wcf","iis","https","wsdl"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12801421,"title":"Set link https protocol in wsdl","body":"<p>I have a WCF service which is secured through the load balancer. So client connection is via <code>https</code> but the service itself is not <code>https</code> under IIS. This means that the links in the <code>wsdl</code> are not secure, and I believe this is what is causing our client problems.</p>\n\n<p>e.g. in the <code>wsdl</code></p>\n\n<pre><code>&lt;xsd:import schemaLocation=\"http://blah.com/whatever.svc?xsd=xsd0\"\n            namespace=\"http://blah.com\" /&gt;\n</code></pre>\n\n<p>Is there some way of configuring the service to output <code>https</code> links in the <code>wsdl</code>? Or any other suggestions?</p>\n"},{"tags":["asp.net","wcf","asp.net-ajax","ado-net-dataservices","svc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":340,"score":1,"question_id":3090260,"title":"Can an ASPX CascadingDropDown Extender use a Service Path that is not an ASMX? (WFC SVC or Data Service)","body":"<p>I have noticed that all the example in the internet uses Service Path of ASMX for a cascading dropdown list, is there a way to use more modern technology as it's service path? I was wondering if I could use DataServices for it?</p>\n"},{"tags":["java","wcf","web-services","encryption","service"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12804061,"title":"Consume java-service with wcf: The EncryptedKey clause was not wrapped with the required encryption token","body":"<p>I'm trying to consume a java Service with WCF and get the following error:</p>\n\n<p>The EncryptedKey clause was not wrapped with the required encryption token 'System.IdentityModel.Tokens.X509SecurityToken'.</p>\n\n<pre><code>Server stack trace: \n   at System.ServiceModel.Security.WSSecurityJan2004.WrappedKeyTokenEntry.CreateWrappedKeyToken(String id, String encryptionMethod, String carriedKeyName, SecurityKeyIdentifier unwrappingTokenIdentifier, Byte[] wrappedKey, SecurityTokenResolver tokenResolver)\n   at System.ServiceModel.Security.WSSecurityJan2004.WrappedKeyTokenEntry.ReadTokenCore(XmlDictionaryReader reader, SecurityTokenResolver tokenResolver)\n   at System.ServiceModel.Security.WSSecurityTokenSerializer.ReadTokenCore(XmlReader reader, SecurityTokenResolver tokenResolver)\n   at System.IdentityModel.Selectors.SecurityTokenSerializer.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver)\n   at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.DecryptWrappedKey(XmlDictionaryReader reader)\n   at System.ServiceModel.Security.ReceiveSecurityHeader.ReadEncryptedKey(XmlDictionaryReader reader, Boolean processReferenceListIfPresent)\n   at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteReadingPass(XmlDictionaryReader reader)\n   at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)\n   at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)\n   at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)\n   at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)\n   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)\n   at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.ProcessReply(Message reply, SecurityProtocolCorrelationState correlationState, TimeSpan timeout)\n   at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.Request(Message message, TimeSpan timeout)\n   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)\n   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)\n   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)\n\nException rethrown at [0]: \n   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)\n   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)\n   at WcfService1.Bonitaetsauskunft.BonitaetsauskunftSCHUFAPortType.anfrageBonitaetsauskunft(anfrageBonitaetsauskunftRequest request)\n   at WcfService1.Bonitaetsauskunft.BonitaetsauskunftSCHUFAPortTypeClient.WcfService1.Bonitaetsauskunft.BonitaetsauskunftSCHUFAPortType.anfrageBonitaetsauskunft(anfrageBonitaetsauskunftRequest request) in C:\\Users\\Philipp Mager\\Documents\\Visual Studio 2010\\Projects\\WcfService1\\WcfService1\\Service References\\Bonitaetsauskunft\\Reference.cs:line 3222\n   at WcfService1.Bonitaetsauskunft.BonitaetsauskunftSCHUFAPortTypeClient.anfrageBonitaetsauskunft(Byte[][]&amp; Attachments, ns1IdentityHeaderTyp Identity, ns1ProtocolHeaderTyp&amp; Protocol, ns1SecurityHeaderTyp&amp; Security, ns1ServiceHeaderTyp Service, ns1SessionHeaderTyp&amp; Session, ns1TargetHeaderTyp&amp; Target, ns1TicketHeaderTyp&amp; Ticket, ns2AnfrageBonitaetsauskunftTyp anfrageBonitaetsauskunft1) in C:\\Users\\Philipp Mager\\Documents\\Visual Studio 2010\\Projects\\WcfService1\\WcfService1\\Service References\\Bonitaetsauskunft\\Reference.cs:line 3236\n   at WcfService1.Service1.RunBoni1() in C:\\Users\\Philipp Mager\\Documents\\Visual Studio 2010\\Projects\\WcfService1\\WcfService1\\Service1.svc.cs:line 547\n   at WcfService1.Service1.GetBonittsauskunft() in C:\\Users\\Philipp Mager\\Documents\\Visual Studio 2010\\Projects\\WcfService1\\WcfService1\\Service1.svc.cs:line 127\n   at SyncInvokeGetBonittsauskunft(Object , Object[] , Object[] )\n   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)\n   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)\n</code></pre>\n\n<p>Here is my Binding:</p>\n\n<pre><code>CustomBinding binding = new CustomBinding();\n\n            var securityElement = new AsymmetricSecurityBindingElement();\n            securityElement.AllowSerializedSigningTokenOnReply = true;\n            securityElement.IncludeTimestamp = false;\n            securityElement.RecipientTokenParameters = new X509SecurityTokenParameters(\n                X509KeyIdentifierClauseType.Any, SecurityTokenInclusionMode.AlwaysToRecipient);\n\n            securityElement.InitiatorTokenParameters = new X509SecurityTokenParameters(\n                X509KeyIdentifierClauseType.Any, SecurityTokenInclusionMode.AlwaysToRecipient);\n\n\n\n            securityElement.DefaultAlgorithmSuite = SecurityAlgorithmSuite.Basic128Sha256;\n            securityElement.SecurityHeaderLayout = SecurityHeaderLayout.Lax;\n            securityElement.SetKeyDerivation(false);\n\n            securityElement.MessageProtectionOrder = MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature;\n\n            //securityElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11;\n            securityElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;\n            securityElement.EnableUnsecuredResponse = true;\n\n\n            var userNameToken = new UserNameSecurityTokenParameters();\n            userNameToken.InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient;\n            userNameToken.ReferenceStyle = SecurityTokenReferenceStyle.External;\n            securityElement.EndpointSupportingTokenParameters.SignedEncrypted.Add(userNameToken);\n\n            binding.Elements.Add(securityElement);\n\n            var encodingElement = new TextMessageEncodingBindingElement();\n            encodingElement.MessageVersion = MessageVersion.Soap12;\n            binding.Elements.Add(encodingElement);\n\n            var httpsElement = new HttpsTransportBindingElement();\n            httpsElement.UseDefaultWebProxy = true;\n            httpsElement.RequireClientCertificate = true;\n\n            binding.Elements.Add(httpsElement);\n</code></pre>\n\n<p>And how I set my Certificates/Username/Password:</p>\n\n<pre><code>    Client.ClientCredentials.UserName.UserName = \"user\";\n    Client.ClientCredentials.UserName.Password = \"pass\";\n\n    Client.ClientCredentials.ServiceCertificate.SetDefaultCertificate(\n        StoreLocation.CurrentUser,\n        StoreName.AddressBook,\n        X509FindType.FindBySubjectName,\n        \"First Certificate\"\n        );\n\n    Client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.PeerOrChainTrust;\n\n    Client.ClientCredentials.ClientCertificate.SetCertificate(\n        StoreLocation.CurrentUser,\n        StoreName.My,\n        X509FindType.FindBySubjectName,\n        \"Second Certificate\");\n</code></pre>\n\n<p>The first certificate only contains a public key. The second one has both (private and public).</p>\n\n<p>I use the second certificate to sign the request and the first to encrypt it.</p>\n\n<p>After that I get a response from the service (that means everything works with the request).</p>\n\n<p>Now the error gets thrown, when I receive the encrypted response. The second certificate should be used for decryption.</p>\n\n<p>This is a example Response:</p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\"&gt;\n&lt;soap:Header&gt;\n&lt;wsse:Security soap:mustUnderstand=\"true\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n&lt;wsse:BinarySecurityToken&gt;\n&lt;!-- Removed--&gt;\n&lt;/wsse:BinarySecurityToken&gt;\n&lt;xenc:EncryptedKey Id=\"EK-1559BE9DC8A5FEE582134978591279136304\" xmlns:xenc=\"http://www.w3.org/2001/04/xmlenc#\"&gt;\n&lt;xenc:EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p\"&gt;&lt;/xenc:EncryptionMethod&gt;\n&lt;ds:KeyInfo xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;wsse:SecurityTokenReference&gt;\n&lt;wsse:Reference URI=\"#1559BE9DC8A5FEE582134978591279136305\" ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\"&gt;&lt;/wsse:Reference&gt;\n&lt;/wsse:SecurityTokenReference&gt;\n&lt;/ds:KeyInfo&gt;\n&lt;xenc:CipherData&gt;\n&lt;xenc:CipherValue&gt;FTa2zZWcUoqHAMbhFbZs1lY5ffGjGRPJ46Xw4BFGZ/Eg9qJyp+kQrkVKLyUE2Uq5aCfMlTzPkUWMxowj5ydAfix97uJo8+Vknx8NYyTLlkaLvXWVGpg33ipq5MAM8djB4tx8EKjDgEkEq1APec0YhG1UrtzHw1KQcSKQ2mACtKk=&lt;/xenc:CipherValue&gt;\n&lt;/xenc:CipherData&gt;\n&lt;xenc:ReferenceList&gt;\n&lt;xenc:DataReference URI=\"#ED-50680\"&gt;&lt;/xenc:DataReference&gt;\n&lt;xenc:DataReference URI=\"#ED-50681\"&gt;&lt;/xenc:DataReference&gt;\n&lt;/xenc:ReferenceList&gt;\n&lt;/xenc:EncryptedKey&gt;\n&lt;wsse:BinarySecurityToken&gt;\n&lt;!-- Removed--&gt;\n&lt;/wsse:BinarySecurityToken&gt;\n&lt;ds:Signature Id=\"SIG-50679\" xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;xenc:EncryptedData Id=\"ED-50681\" Type=\"http://www.w3.org/2001/04/xmlenc#Content\" xmlns:xenc=\"http://www.w3.org/2001/04/xmlenc#\"&gt;\n&lt;xenc:EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes128-cbc\"&gt;&lt;/xenc:EncryptionMethod&gt;\n&lt;ds:KeyInfo&gt;\n&lt;wsse:SecurityTokenReference wsse11:TokenType=\"http://docs.oasis-open.org/wss/oasis-wss-soap-message-security-1.1#EncryptedKey\" xmlns:wsse11=\"http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd\"&gt;\n&lt;wsse:Reference URI=\"#EK-1559BE9DC8A5FEE582134978591279136304\"&gt;&lt;/wsse:Reference&gt;\n&lt;/wsse:SecurityTokenReference&gt;\n&lt;/ds:KeyInfo&gt;\n&lt;xenc:CipherData&gt;\n&lt;xenc:CipherValue&gt;HTSeTJWKcV98Jln1y/Mj5V6VPJxxWFWjTGPyVg21WUBWUi/+6V4TI4E5omitB+oyBw/LaFjhQnQX\ngT9qjGvl4pX...&lt;/xenc:CipherValue&gt;\n&lt;/xenc:CipherData&gt;\n&lt;/xenc:EncryptedData&gt;\n&lt;/ds:Signature&gt;\n&lt;/wsse:Security&gt;\n&lt;ifd:Protocol soapenv:mustUnderstand=\"true\" wsu:Id=\"id-50676\" xmlns:ifd=\"http://www.ifd.de/Protocol\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n&lt;ifd:version&gt;IFD_1.4&lt;/ifd:version&gt;\n&lt;/ifd:Protocol&gt;\n&lt;ifd:Target soapenv:mustUnderstand=\"true\" wsu:Id=\"id-50677\" xmlns:ifd=\"http://www.ifd.de/Protocol\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n&lt;ifd:institute&gt;\n&lt;ifd:id&gt;62290777&lt;/ifd:id&gt;\n&lt;ifd:client&gt;62290777&lt;/ifd:client&gt;\n&lt;/ifd:institute&gt;\n&lt;ifd:provider&gt;IFDSCH0003&lt;/ifd:provider&gt;\n&lt;/ifd:Target&gt;\n&lt;ifd:Ticket soapenv:mustUnderstand=\"true\" wsu:Id=\"id-50678\" xmlns:ifd=\"http://www.ifd.de/Protocol\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n&lt;ifd:value&gt;ticketValue&lt;/ifd:value&gt;\n&lt;/ifd:Ticket&gt;\n&lt;/soap:Header&gt;\n&lt;soap:Body wsu:Id=\"id-50675\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n&lt;xenc:EncryptedData Id=\"ED-50680\" Type=\"http://www.w3.org/2001/04/xmlenc#Content\" xmlns:xenc=\"http://www.w3.org/2001/04/xmlenc#\"&gt;\n&lt;xenc:EncryptionMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#aes128-cbc\"&gt;&lt;/xenc:EncryptionMethod&gt;\n&lt;ds:KeyInfo xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;wsse:SecurityTokenReference wsse11:TokenType=\"http://docs.oasis-open.org/wss/oasis-wss-soap-message-security-1.1#EncryptedKey\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsse11=\"http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd\"&gt;\n&lt;wsse:Reference URI=\"#EK-1559BE9DC8A5FEE582134978591279136304\"&gt;&lt;/wsse:Reference&gt;\n&lt;/wsse:SecurityTokenReference&gt;\n&lt;/ds:KeyInfo&gt;\n&lt;xenc:CipherData&gt;\n&lt;xenc:CipherValue&gt;X9WJB7zhurPdCT6Xh4Pw6XatShYkmvFBQm6N9PA3AmqYkZHle7SWLxrq8sxqA7OJjRJaUnR85ift\nJ7jKrguv5h71pgoqJMk0YqJdUscQ3g8nRJHLvwTWm0ec6AcDgxsxbTHceKiPnA98SdfwLCnHvSfz\nDs9ZTr5gt39mhrhE3OveBKPpjx9TkHtrIAbUfjB7JhN+...&lt;/xenc:CipherValue&gt;\n&lt;/xenc:CipherData&gt;\n&lt;/xenc:EncryptedData&gt;\n&lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>Do you have any Idea what I'm doing false?</p>\n\n<p>Best regards,</p>\n"}]}
