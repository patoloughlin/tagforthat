{"total":44782,"page":1,"pagesize":100,"questions":[{"tags":["asp.net-mvc","mvc","razor","filter","pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13298605,"title":"Filter and Pagination in MVC 4","body":"<p>Its been a long day for me trying to figure this out and I believe there is always an answer on <strong>stackoverflow</strong>. I have searched for posts that are similar but I guess none has what am desperately looking for. Here's the deal, I have got this <strong>MVC 4</strong> project am working on but I ran into some issues which triggered me to throw it open. Using <strong>IPageList</strong> for pagination on my MVC is quite cool but how can I keep paging the result filtered using the same <strong>ActionResult</strong> container for the index. Here is some code to dine with.</p>\n\n<pre><code>public ActionResult Index(int? page, int category = 0)\n     {\n         int pageSize = 10;\n         int pageNumber = (page ?? 1);\n         if (category != 0)\n         {\n             var products = (from p in db.Products where p.ProductID == category select p).OrderBy(x =&gt; x.ProductName).ToList();\n             return View(products.ToPagedList(pageNumber, pageSize));\n         }\n         else\n         {\n             var products = (from p in db.Products select p).OrderBy(x =&gt; x.ProductName).ToList();\n             return View(products.ToPagedList(pageNumber, pageSize));\n         }\n     }\n</code></pre>\n\n<p>Basically the <strong>int category</strong> is the value gotten from the dropdownlist. It filters perfectly but the issue is when I filter and the results is greater than 10 and I try to go to the next page, it returns to the index initial result. Debugging it, I realized once the next is clicked, the value of <strong>int category</strong> is cleared and it steps into the else block. Here is the paging control maybe there is something that needs to be adjusted...</p>\n\n<pre><code>&lt;div&gt;Page @(Model.PageCount &lt; Model.PageNumber ? 0 : Model.PageNumber)\nof @Model.PageCount\n\n@if (Model.HasPreviousPage)\n{\n    @Html.ActionLink(\"&lt;&lt;\", \"Index\", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })\n    @Html.Raw(\" \");\n    @Html.ActionLink(\"&lt; Prev\", \"Index\", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })\n}\nelse\n{\n    @:&lt;&lt;\n    @Html.Raw(\" \");\n    @:&lt; Prev\n}\n\n@if (Model.HasNextPage)\n{\n    @Html.ActionLink(\"Next &gt;\", \"Index\", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })\n    @Html.Raw(\" \");\n    @Html.ActionLink(\"&gt;&gt;\", \"Index\", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter=ViewBag.CurrentFilter  })\n}\nelse\n{\n    @:Next &gt;\n    @Html.Raw(\" \")\n    @:&gt;&gt;\n}\n</code></pre>\n\n<p>\nWhat I need is for the filtered results returned on the page to respond to paging. I will await answers. Thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio","entity-framework","msdeploy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3,"score":0,"question_id":13298598,"title":"Upon one-click publish: Exception in executing publishing: An item with the same key has already been added","body":"<p>I realize that a billion people have asked about this error, but I've looked at all of them. Mine seems different. I'm not getting any sort of source code error, no stack trace, no helpful information whatsoever, because the error occurs immediately upon clicking \"Publish\" on my MVC.NET project. It's just a dialog box, and that's all it says. Nothing else happens.</p>\n\n<p>Things that might be related: </p>\n\n<ul>\n<li>I'm using Team Foundation. I had some trouble with it (user error)\nfor a while, but I just got everything back to the way it should be\n(I think).</li>\n<li>At one point I used an EDMX thing. I deleted in favor of making my table models from scratch.</li>\n<li>I can't find my publishing profile anymore, nor can I figure out how to make a new one. I thought it was supposed to be in a <code>~/PublishProfiles</code> folder. It's not there.</li>\n</ul>\n\n<p>I know I haven't given a lot of information, but I don't even know where to begin. I'll be happy to provide anything else upon request. Thank you.</p>\n"},{"tags":["sql","asp.net-mvc","vb.net","linq","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13297880,"title":"Sequence contains no elements - LINQ, MVC, Average","body":"<p>I am running into this error. I see that the reason is because the average returned at times is 0.00 which from a data stand point is accurate. This SQL query works fine, but that is because it puts in 0.00 automatically. </p>\n\n<p>LINQ complains and so I tried using DefaultIfEmpty() but it says it is expecting my ViewModel.</p>\n\n<pre><code>Dim ticketCounts = From t In queue _\n   Where _\n    (t.StatusId = 2) And _\n    (t.CloseDate.Year = Convert.ToDateTime(DateTime.Now).Year) And _\n    (t.ResolutionDays &gt; 0)\n   Group t By _\n    Column1 = CType(t.CloseDate.Month, Integer), _\n    Column2 = CType(t.CloseDate.ToString(\"MMMM\"), String) _\n    Into g = Group _\n   Order By Column1 _\n   Select _\n    Id = Column1, _\n    Month = Column2, _\n    Critical = g.Where(Function(t) t.PriorityId = 1).Average(Function(t) t.ResolutionDays), _\n    High = g.Where(Function(t) t.PriorityId = 2).Average(Function(t) t.ResolutionDays), _\n    Normal = g.Where(Function(t) t.PriorityId = 3).Average(Function(t) t.ResolutionDays), _\n    Low = g.Where(Function(t) t.PriorityId = 4).Average(Function(t) t.ResolutionDays), _\n    Total = g.Where(Function(t) t.Id &lt;&gt; Nothing).Average(Function(t) t.ResolutionDays)\n</code></pre>\n\n<p><strong>UPDATED!</strong>\nThis is the SQL query doing the same thing I need VB to do.</p>\n\n<pre><code>SELECT\n    DATENAME(MONTH,t.CloseDate) AS 'Month',\n    AVG(CASE WHEN (t.PriorityId = 1) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'Critical',\n    AVG(CASE WHEN (t.PriorityId = 2) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'High',\n    AVG(CASE WHEN (t.PriorityId = 3) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'Normal',\n    AVG(CASE WHEN (t.PriorityId = 4) THEN CAST(t.ResolutionDays AS Decimal(18, 2)) ELSE 0 END) AS 'Low',\n    AVG(CAST(t.ResolutionDays AS Decimal(18, 2))) AS 'Monthly Average'\nFROM\n    tblMaintenanceTicket t\nWHERE\n    t.StatusId = 2\n    AND YEAR(t.CloseDate) = year(getdate())\nGROUP BY \n    MONTH(t.CloseDate),\n    DATENAME(MONTH,t.CloseDate)\nORDER BY\n    MONTH(t.CloseDate)\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13298542,"title":"ApiController returns 404 when ID contains period","body":"<p>I have an ApiController and I want to use email addresses as the ID parameter for requests:</p>\n\n<pre><code>// GET api/employees/email@address.com\npublic CompactEmployee Get(string id) {\n   var email = id;\n   return GetEmployeeByEmail(email);\n}\n</code></pre>\n\n<p>However, I cannot get this to work (returns <strong>404</strong>):</p>\n\n<pre><code>http://localhost:1080/api/employees/employee@company.com\n</code></pre>\n\n<p>The following all work:</p>\n\n<pre><code>http://localhost:1080/api/employees/employee@company\n                         /employees/employee@company.\n                         /employees?id=employee@company.com\n</code></pre>\n\n<p>I have set <code>relaxedUrlToFileSystemMapping=\"true\"</code> in my web.config as <a href=\"http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx\" rel=\"nofollow\">detailed by Phil Haack</a>.</p>\n\n<p>I would very much love the full email address to work, but any time the period is followed by any other character, the request returns a 404. Any help would be greatly appreciated!</p>\n"},{"tags":["asp.net-mvc","jqgrid","asp.net-mvc-4","viewmodel"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13297847,"title":"Reading jqgrid data into MVC4 viewmodel","body":"<p>I have an Add/Edit form on my MVC4 website that contains, among other controls, a jqgrid which will load a collection of items that are part of the entity being added/edited.</p>\n\n<p>I need to select the items to add to that jqgrid from a dropdownlist and after everything is added to the list and to the remaining fields, push Save and then send everything to the controller, including the items added to the jqgrid.</p>\n\n<p>My question then is: How can I make to send that information from the jqgrid to the controller to be saved with the rest of the entity? One thing to note is that the entity might not exist previously in the DB so I might not have the id previously to make a call to ajax and record the jqgrid items separately. Everything needs to be done transactionally as usual in these cases...</p>\n\n<p>Thanks for any hint on how to solve this situation.\nBest regards,\nCesar.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":25,"score":3,"question_id":13296675,"title":"ASP.NET MVC4 WebApi parameter is null - on only one machine","body":"<p>I have MVC4 WebApi project that is working fine on my development machine but is acting\nstrangely on a deployed server. Both boxes are Server 2008 with IIS 7.5</p>\n\n<p>I have a single controller with a single Post method that takes a complex type as\na parameter. I am forcibly using the <code>XmlMediaType</code> formatter and <code>XmlSerialization</code> so\n<code>HttpConfiguration.Formatters.XmlFormatter.UseXmlSerializer = true</code> and the complex type is \"old school\" <code>XmlSerializable</code>.</p>\n\n<p>For the same request my dev box correctly deserializes the XML in the body into\nan instance of the complex type and the result returned to the client from the <code>Post</code> method  is correct. On the other machine the parameter instance is <code>null</code> on arrival in the <code>Post</code> method.</p>\n\n<p>I have to reiterate that this is identical code and an identical request (except\nfor host name). That makes me think there has to be something environmentally \ndifferent between the machines. Unfortunately after much searching I still have no idea what that might be.</p>\n\n<p>I should also point out that if I modify my <code>Post</code> method to take a string parameter\nand then do the deserialization myself internally the behavior on both boxes is the same and correct.</p>\n\n<p>I have also implemented a custom serializer (<code>XmlFormatter.SetSerializer</code>) and again\nthe dev box works; the other produces a <code>null</code> parameter. Interestingly, when I log\nthe body of the request before deserialization in this case I see the same XML on both machines. It's just that one box drops the deserialzed value somewhere on the way to the <code>Post</code> method.</p>\n\n<p>Can anyone offer some suggestions on how to proceed to troubleshoot this strange\nbehavior? </p>\n"},{"tags":["c#",".net","sql-server","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13298310,"title":"Insert default value via EntityFramework","body":"<p>I have default constraint on my caption field in database. In web app if caption is empty NULL value passed to database and database returns exception because samo field it cannot be null (Caption varchar(50) NOT NULL).</p>\n\n<p>So, what is easiest way to set some value (\"\" - empty string) or avoid to send NULL to database if value is really not provided. How I can set that in EntityFrameowrk, or maybe in data access layer...?</p>\n"},{"tags":["asp.net-mvc","c#-4.0","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13293491,"title":"Pass Javascript callback function to partial view MVC","body":"<p>I'm wondering if this is the right way of passing a JavaScript callback function to a partial view.  So depending on the view I'm on the partial view may do different things.  So I pass in a JavaScript call back function to achieve that.  </p>\n\n<p>Here is a generic function to call my partial view and where I pass in the JavaScript call back function.</p>\n\n<pre><code> function showAjaxMessage(targetDiv, ajaxMessage) {    \n    var ajaxLoader = \"&lt;img src='Content/loader.gif' alt=''&gt;\";\n    $(targetDiv).html(\"&lt;p&gt;\" + ajaxLoader + \" \" + ajaxMessage+\"&lt;/p&gt;\"); \n}\n\nfunction getPartialView(actionUrl, targetDiv, ajaxMessage, cbFunc) {\n    showAjaxMessage(targetDiv, ajaxMessage);\n\n    $.get(actionUrl, { callback: eval(cbFunc).toString()}, function(result) {\n        $(targetDiv).html(result);\n    });\n}\n</code></pre>\n\n<p>Here is an example of me calling it:</p>\n\n<pre><code> getPartialView(\"Home/OpenLogin\", \"#divLogon\", \"Loading...\", function() { alert('This is the call back function!'); test(); });\n</code></pre>\n\n<p>Here is the controller where I get the callback function and save it to a model.  Then I pass it back to the partial view.</p>\n\n<pre><code> // returns a login dialog which will be injected \n    // into a placeholder div on the client\n    public ActionResult OpenLogin(string callback)\n    {\n        var baseModel = new BaseModel();\n        baseModel.cbFunc = callback;\n\n        return PartialView(\"LoginDialog\", baseModel);\n    }\n</code></pre>\n\n<p>Here is an example of my partial view.  Where you can see I get the call back function and set in the init function.  </p>\n\n<pre><code>@model MvcApplication8.Models.BaseModel\n\nfunction init(cb){\n    if(cb!=undefined){\n        cb();\n    }\n    else{\n        alert(\"undefined\");\n    }\n}\n\nfunction test(){\n    alert(\"Testing my call back\");\n}\n\n\n$(function () {\n\n   init(@Html.Raw(@Model.cbFunc));\n\n\n});\n</code></pre>\n\n<p>The solution above works, but the main question that comes to mind is this the right way of doing it? Passing the call back function from the controller to the partial view sounds wrong, but how else would you do it? Any ideas? </p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13295865,"title":"Using .where extension method causes duplicates (MVC-LINQ)","body":"<p>I am trying to create a partial view to display some data. My controller takes in a <code>string itemID</code> and performs a query based on that. When the partial view is called, it displays the same record over and over again.</p>\n\n<p>Note: I changed the name of objects for security purposes.</p>\n\n<pre><code>[ChildActionOnly]\npublic ActionResult someAction(string itemID = \"\")\n{\n    //Empty itemID\n    if(string.IsNullOrEmpty(itemID))\n    {\n        return RedirectToAction(\"Index\", \"Search\");\n    }\n\n    var model = _db.someTable\n            .Where(r =&gt; r.itemID == itemID)\n            .OrderBy(r =&gt; r.col1)\n            .ThenBy(r =&gt; r.col2)\n            .Take(20);\n    return PartialView(\"_myView\", model);\n}\n</code></pre>\n\n<p>I have tried removing the <code>OrderBy</code> and <code>ThenBy</code> methods, but the result remain the same, (Order would not matter since they are duplicates...). When I remove the <code>.Where</code> method, it works as expected and displays 20 different records (though, not filtered by any means).</p>\n\n<p>My view was created by Visual Studio using the List template. The view been proven working by removing the <code>.Where</code> method from the LINQ statement. Here are the important bits of the view:</p>\n\n<pre><code>@model IEnumerable&lt;MyApp.Models.OperationData&gt;\n.\n.\n.\n@foreach (var item in Model) {\n&lt;tr&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(modelItem =&gt; item.some column)\n    &lt;/td&gt;\n.\n.\n.\n</code></pre>\n\n<p>Any ideas as to what is wrong with this query?</p>\n\n<p>EDIT: Tried the other LINQ syntax and ended up with the same results:</p>\n\n<pre><code>var model = from r in _db.someTable where r.itemID == itemID select r;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mobile","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13223970,"title":"MVC3 with jQuery mobile, having different layout page and views","body":"<p>I thought what I am trying to do what already built in, but it does not seem to be working. From what I understood, with asp.net MVC you can name your views like this:</p>\n\n<pre><code>_view.cshtml\n\n_view.Mobile.cshtml\n</code></pre>\n\n<p>and it would use the mobile one if coming from a mobile device, and use the non-mobile one on desktops.</p>\n\n<p>It is not automatically doing this for me, is there something else I need to do? I have all the jquery mobile scripts and css referenced.</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13297769,"title":"How to make a @Html.DisplayFor multiline in MVC 4","body":"<p>I am trying to display a customer address in multiline which works for @Html.EditorFor but not @Html.DisplayFor. I have tried other posts on here but have not got it to work.\nHere is what have started with and what I have tried with no luck</p>\n\n<pre><code>@Html.DisplayFor(model =&gt; model.CustomerPostalAddress)\n@Html.Raw(Html.Encode(Model.CustomerPostalAddress).Replace(\"\\n\",\"&lt;br/&gt;\"))\n</code></pre>\n\n<p>Here is the field in the model</p>\n\n<pre><code> [DataType(DataType.MultilineText)]\n public string CustomerPostalAddress { get; set; }\n</code></pre>\n\n<p>Any help would be much appreciated</p>\n"},{"tags":["jquery","asp.net-mvc","treeview","base64"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":382,"score":1,"question_id":2821139,"title":"Base64 problem with jQuery Async Treeview","body":"<p>In my ASP.NET MVC app I'm using jQuery Treeview with Async node expansion to build a tree of Active Directory objects. I'm encoding id's of each node with Base64 due to request length issue. For example in response for <a href=\"http://devel.local:49210/Domain/LeafExpand?root=source\" rel=\"nofollow\">http://devel.local:49210/Domain/LeafExpand?root=source</a> I get the following:</p>\n\n<pre><code>[{\"text\":\"DC=anusiewicz,DC=pl\",\"id\":\"REM9YW51c2lld2ljeixEQz1wbA==\",\"expanded\":true,\"children\":[{\"text\":\"CN=Builtin,DC=anusiewicz,DC=pl\",\"id\":\"Q049QnVpbHRpbixEQz1hbnVzaWV3aWN6LERDPXBs\",\"hasChildren\":true},... etc.\n</code></pre>\n\n<p>but</p>\n\n<p>in some cases after selecting a node that has children jQuery instead of sending request like this:</p>\n\n<pre><code>http://devel.local:49210/Domain/ShowProperties/Q049R3J1cGEgeiByZXBsaWthY2oIGhhc2UIG5hIGtvbnRyb2xlcmFjaCBST0RDLENOPVVzZXJzLERDPWFudXNpZXdpY3osREM9cGw=\n</code></pre>\n\n<p>sends it like that:</p>\n\n<pre><code>http://devel.local:49210/Domain/ShowProperties/Q049R3J1cGEgeiByZXBsaWthY2o/IGhhc2U/IG5hIGtvbnRyb2xlcmFjaCBST0RDLENOPVVzZXJzLERDPWFudXNpZXdpY3osREM9cGw=\n</code></pre>\n\n<p>Additional '/' causes web server to generate 404 error. Why is this happening?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13297763,"title":"adding NULL to DropdownList-options","body":"<p>On my ASP.NET MVC4 application, I need a dropdown-list to select a Location and insert its ID into a table, say News.\nSome news apply to ALL Locations - therefore the LocationID in News is Nullable, to indicate this.</p>\n\n<p>So I need to add \"ALL Locations\" to the dropdown.</p>\n\n<p>This is how I imagined, it would work - but on the last line Value = DBNull.Value (or simple null) is not allowed. It only accepts an integer. I CANNOT use \"0\" as foreign key constraints on that table do not allow 0, because there is no ID=0 in Locations-table</p>\n\n<pre><code>var locations = db.Locations.Select(c =&gt; new { DisplayText = c.Location, Value = c.ID }).ToList();\nlocations.Insert(0, new { DisplayText = \"All Locations\", Value = DBNull.Value });\nreturn Json(new { Result = \"OK\", Options = locations});\n</code></pre>\n\n<p>How can I add this to the options-list?</p>\n"},{"tags":["c#","asp.net-mvc","caching"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13297143,"title":"Caching Objects with Expensive Build & Allowing Updates","body":"<p>I am working on a caching manager for a MVC web application.  For this app, I have some very large objects that are costly to build.  During the application lifetime, I may need to create several of these objects, based upon user requests.  When built, the user will be working with the data in the objects, resulting in many read actions.  On occasion, I will need to update some minor data points in the cached object (create &amp; replace would take too much time).  </p>\n\n<p>Below is a cache manager class that I have created to help me in this.  Beyond basic thread safety, my goals were to:</p>\n\n<ol>\n<li>Allow multiple reads against the object, but lock all reads upon an\nupdate request </li>\n<li>Ensure that the object is only ever created 1 time if\nit does not already exist (keep in mind that its a long build\naction).</li>\n<li><p>Allow the cache to store many object, and maintain a lock\nper object (rather than one lock for all objects)</p>\n\n<pre><code>public class CacheManager \n{\n    private static readonly ObjectCache Cache = MemoryCache.Default;\n    private static readonly ConcurrentDictionary&lt;string, ReaderWriterLockSlim&gt;\n         Locks = new ConcurrentDictionary&lt;string, ReaderWriterLockSlim&gt;();\n    private const int CacheLengthInHours = 1;\n\n    public object AddOrGetExisting(string key, Func&lt;object&gt; factoryMethod)\n    {\n        Locks.GetOrAdd(key, new ReaderWriterLockSlim());\n\n        var policy = new CacheItemPolicy \n          { \n             AbsoluteExpiration = DateTimeOffset.Now.AddHours(CacheLengthInHours)\n          };\n        return Cache.AddOrGetExisting\n            (key, new Lazy&lt;object&gt;(factoryMethod), policy);\n    }\n\n    public object Get(string key)\n    {\n        var targetLock = AcquireLockObject(key);\n        if (targetLock != null)\n        {\n            targetLock.EnterReadLock();\n\n            try\n            {\n                var cacheItem = Cache.GetCacheItem(key);\n                if(cacheItem!= null)\n                    return cacheItem.Value;\n            }\n            finally \n            {\n                targetLock.ExitReadLock();\n            }\n        }\n\n        return null;\n    }\n\n    public void Update&lt;T&gt;(string key, Func&lt;T, object&gt; updateMethod)\n    {\n        var targetLock = AcquireLockObject(key);\n        var targetItem = (Lazy&lt;object&gt;) Get(key);\n\n        if (targetLock == null || key == null) return;\n        targetLock.EnterWriteLock();\n\n        try\n        {\n            updateMethod((T)targetItem.Value);\n        }\n        finally\n        {\n            targetLock.ExitWriteLock();\n        }\n    }\n\n    private ReaderWriterLockSlim AcquireLockObject(string key)\n    {\n        return Locks.ContainsKey(key) ? Locks[key] : null;\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>Am I accomplishing my goals while remaining thread safe?  Do you all see a better way to achieve my goals?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13297387,"title":"Entity Framework - Fill remaining properties","body":"<p>I have a method that receives a Dto Model and map to a Domain Model:</p>\n\n<p>Method:</p>\n\n<pre><code>public void CreateAd(CreateAdDto adDto) { \n\n    var adDomain = Mapper.Map&lt;CreateAdDto, Ad&gt;(adDto);\n}\n</code></pre>\n\n<p>Dto Object:</p>\n\n<pre><code>public class CreateAdDto\n{\n    public int Model_Id { get; set; }\n}\n</code></pre>\n\n<p>The Dto map the Domain Model:</p>\n\n<pre><code>public class Ad\n{\n    public int Id { get; set; }\n    public Model Model { get; set; }\n}\n</code></pre>\n\n<p>And the Model:</p>\n\n<pre><code>public class Model\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string NameStandard { get; set; }\n}\n</code></pre>\n\n<p>I need to get in the CreateAd method access to the Model.NameStandard value, but when I do the mapping, I only have the Model Id, so how do I get the Model Entity with all the properties including the NameStandard value?</p>\n\n<p>Do I have to make a Call to the <strong>Model GetById(Model_Id)</strong> to get the Model properties or there is another way like a property in the Attach that can bring all the properties?</p>\n\n<p>Or Should I use the Model in the ViewModel and pass to the Dto and to the Domain with all the properties?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","nhibernate","dll"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13296892,"title":"Finding where an old NHibernate DLL is referenced","body":"<p>I'm working on a ASP.NET MVC C# project and I'm getting the following error when launching the web app:</p>\n\n<p>Could not load file or assembly 'NHibernate, Version=2.1.0.1001, Culture=neutral, PublicKeyToken=aa95f207798dfdb4' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)</p>\n\n<p>Based on the error and some googling it seems clear that there is something referencing a NHibernate dll version 2.1.0.1001.  However, our project is using NHibernate version 2.1.2.4000 (old, I know).  I've searched the entire solution for any references to that version of NHibernate and cannot find one.  I'm assuming that another DLL that we're using is referencing it, but I don't know the best place to start to figure out which.</p>\n\n<p>Am I on target with what the issue likely is?  Any (hopefully free) dependency tools that anyone can recommend?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-services","security"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13296254,"title":"Will using a master login username and password when implementing web services considered secure","body":"<p>I am working on an asp.net mvc-4 web application and I have started implementing some web services which provides statistical information about my site. But to make sure that only authorized and authenticated consumers can call and consume the web services I am thinking of defining a master login username and password for each consumer, and when a consumer sends a web service request he should include these master login username and password (stored as a hash value ) in the web service calls.</p>\n\n<p>For example the web service link to call specific web service from my web site will look as follow:-</p>\n\n<pre><code>/web/json/statistic/getsummaryinfo/areacode?j_username=masterusername&amp;hash=D012B772672A55A0B561EAA53CA7734E\n</code></pre>\n\n<p><strong>So my question is whether the approach I am following will provide a secure solution to my web services and to the consumers? OR my approach have security holes I am unaware of ?</strong></p>\n\n<p><strong>:::EDITED::</strong></p>\n\n<p>I am using the WebAPI controllers to implement the web services inside my asp.net mvc-4.**</p>\n\n<p>Best Regards</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13288744,"title":"can we use combination of kendoUI web and kendoUI dataviz","body":"<p>In my application,I have used all widgets in \"KendoUI web\",now i want to implement bar chart,so can i use both \"kendo dataviz\" in my application,I have implemented this ,I am able to load either \"bar chart\" or other \"web\" widgets at a time.so can u tell me is it possible to use both.</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13294211,"title":"MVC4 Action returning JsonResult without null","body":"<p>I have a action which returns an JsonResult for an object of a particular class. I have decorated the properties of this class with some attrib to avoid null fields. Class definition is:</p>\n\n<pre><code>    private class GanttEvent\n    {\n        public String name { get; set; }\n\n        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]\n        public String desc { get; set; }\n\n        [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]\n        public List&lt;GanttValue&gt; values { get; set; }\n    }\n</code></pre>\n\n<p>And in my Action i use an object </p>\n\n<pre><code>    var res = new List&lt;GanttEvent&gt;();\n</code></pre>\n\n<p>which I return using:        </p>\n\n<pre><code>    return Json(res, JsonRequestBehavior.AllowGet);\n</code></pre>\n\n<p>Unfortunatelly, I'm still receiving null values at output:</p>\n\n<pre><code>    [{\"name\":\"1.1 PREVIOS AL INICIO \",\"desc\":null,\"values\":null},{\"name\":\"F04-PGA-S10\",\"desc\":\"Acta preconstrucción\",\"values\":null},{\"name\":\"F37-PGA-S10\",\"desc\":\"Plan de inversión del anticipo\",\"values\":null},{\"name\":\"F09-PGA-S10\",\"desc\":\"Acta de vecindad\",\"values\":null},{\"name\":\"F05-PGA-S10\",\"desc\":\"Acta de inicio\",\"values\":null},{\"name\":\"F01-PGA-S10\",\"desc\":\"Desembolso de anticipo\",\"values\":null}]\n</code></pre>\n\n<p>Am I missing something or doing something wrong?</p>\n"},{"tags":["asp.net-mvc","internet-explorer-8","favicon"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1268,"score":1,"question_id":5620618,"title":"why wont the fav icon show up in IE on my asp.net-mvc site","body":"<p>i have this line in my asp.net-mvc page.</p>\n\n<pre><code>&lt;link rel=\"icon\" type=\"image/x-icon\" href=\"/content/images/icons/favicon.ico\" /&gt;\n</code></pre>\n\n<p>the favicon shows up fine in Firefox but it doesn't show up in IE8 at all.</p>\n\n<p>any suggestions on why this doesn't work in IE8 ?</p>\n\n<p>also, under RegisterRoutes, i have this:</p>\n\n<pre><code>   routes.IgnoreRoute(\"favicon.ico\");\n</code></pre>\n\n<p>i have tried everything <a href=\"http://en.wikipedia.org/wiki/Favicon#Standardization\" rel=\"nofollow\">on this page</a>  and it still doesn't seem to work for IE8</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-web-api","custom-attributes","asp.net-mvc-migration"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13296721,"title":"Using ExceptionFilterAttribute in upgraded MVC project","body":"<p>Is it possible to use ExceptionFilterAttribute in a project the was created with MVC2 and upgraded to MVC4?  It is not a Web API project, and I cannot seem to get the exception to catch using the ExceptionFilterAttribute.  Is there any way to make this happen or am I better off just sticking to inheriting from ActionFilterAttribute and implementing IExceptionFilter.  This is for an API section within our MVC project</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","jquery-ui-accordion"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13294611,"title":"MVC4 nested accordion with foreach loop","body":"<p>I'm trying to create a view using nested accordions and I'm not having much success so far.\nI need the top accordion to be a category that will list a name which is the second accordion.</p>\n\n<p>Another wrinkle in this is that I'm trying to use foreach to create a category accordion for each different category type, and then within that accordion, create an accordion for each name in the table.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>Historical(accordion)-&gt; museum(accordion)-&gt; description, state\n\nSports(accordion)-&gt;soccer(accordion)-&gt; description, state\n\n             -&gt;baseball(accordion)-&gt; description, state\n</code></pre>\n\n<p>Here is what I currently have but I'm not sure if this is the best way to go about it or not:</p>\n\n<pre><code>&lt;div id=\"accordioncat\"&gt;\n@foreach (var item in Model)\n{\n\n    &lt;h3&gt;@item.category&lt;/h3&gt;\n    &lt;div&gt;\n        &lt;h3&gt;@item.name&lt;/h3&gt;\n            &lt;div&gt;\n                &lt;p&gt;@item.description&lt;/p&gt;\n                &lt;p&gt;@item.state&lt;/p&gt;\n            &lt;/div&gt;\n     &lt;/div&gt;\n}\n\n&lt;/div&gt;\n</code></pre>\n\n<p>With my model I'm using an int for category to join it to category id in my category table, and same with state.\nHere is my model(this may need to be changed as well):</p>\n\n<pre><code>public class t_records\n{\n    [Key]\n    public int ID { get; set; }\n\n    [Display(Name=\"Name\")]\n    public string name { get; set; }\n\n    [Display(Name=\"Description\")]\n    public string description { get; set; }\n\n    public int state { get; set; }\n\n    public int category { get; set; }\n\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","tdd"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":48,"score":1,"question_id":13296735,"title":"Ho to show value of TDD to a difficult Client","body":"<p>A client wants quality ASP.NET MVC 4 website but forces to cut corners to meet deadlines. In return the client is ready to compromise by talking out thing such as TDD and pair programming.</p>\n\n<p>I have already tried to make him aware on the quality going downwards. But it seems to be the least concern for the client.</p>\n\n<p>What things can I do to demonstrate how bad it will be if TDD is eliminated before the client starts eliminating other good practises for e.g DRY</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","wif","claims-based-identity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13286844,"title":"Exclude specific path from WIF authorization in a ASP.NET MVC 4 project","body":"<p>We have successfully configured windows identity foundation (WIF) in our ASP.NET 4.5 MVC 4 project with the help of the <strong>Identity and Access...</strong> extension for Visual Studio 2012. But are unable to exclude a specific path from authorization to allow anonymous access.</p>\n\n<p>When we access our default route (i.e. <code>/Home</code>), the passive redirection will redirect us to the configured issuer Uri. This is currect. But now assume we want to exclude Path <code>/Guest</code> from STS Authentication so that everybody can access <code>http://ourhost/Guest</code> without beeing routed to the STS issuer. Only static documents are located there.</p>\n\n<p>Snippets from <code>Web.config</code>:</p>\n\n<pre><code>&lt;system.identityModel&gt;\n  &lt;identityConfiguration&gt;\n    &lt;audienceUris&gt;\n      &lt;add value=\"http://ourhost/\" /&gt;\n    &lt;/audienceUris&gt;\n    &lt;issuerNameRegistry type=\"System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"&gt;\n      &lt;trustedIssuers&gt;\n        &lt;add thumbprint=\"9B74****40D0\" name=\"OurSTS\" /&gt;\n      &lt;/trustedIssuers&gt;\n    &lt;/issuerNameRegistry&gt;\n    &lt;certificateValidation certificateValidationMode=\"None\" /&gt;\n  &lt;/identityConfiguration&gt;\n&lt;/system.identityModel&gt;\n&lt;system.identityModel.services&gt;\n  &lt;federationConfiguration&gt;\n    &lt;cookieHandler requireSsl=\"false\" /&gt;\n    &lt;wsFederation passiveRedirectEnabled=\"true\" issuer=\"http://oursts/Issue\" realm=\"http://ourhost/\" reply=\"http://ourhost/\" requireHttps=\"false\" /&gt;\n  &lt;/federationConfiguration&gt;\n&lt;/system.identityModel.services&gt;\n</code></pre>\n\n<p>Further we have...</p>\n\n<pre><code>&lt;system.webServer&gt;\n  &lt;!-- ... --&gt;\n  &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n    &lt;add name=\"WSFederationAuthenticationModule\" type=\"System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" preCondition=\"managedHandler\" /&gt;\n    &lt;add name=\"SessionAuthenticationModule\" type=\"System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" preCondition=\"managedHandler\" /&gt;\n    &lt;remove name=\"FormsAuthentication\" /&gt;\n  &lt;/modules&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p>and finally:</p>\n\n<pre><code>&lt;system.web&gt;\n  &lt;!-- ... --&gt;\n  &lt;authentication mode=\"None\" /&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p>We tried the following without success:</p>\n\n<pre><code>&lt;location path=\"~/Guest\"&gt; &lt;!-- also \"/Guest\" is not working --&gt;\n  &lt;system.web&gt;\n    &lt;authorization&gt;\n      &lt;allow users=\"*\" /&gt;\n    &lt;/authorization&gt;\n  &lt;/system.web&gt;\n&lt;/location&gt;\n</code></pre>\n\n<p>We also tried to put a small Web.config file into this folder, without success. No matter which Uri we locate to in the browser, we're always redirected.</p>\n\n<p>What is the proper way to accomplish this?</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":15,"score":2,"question_id":13296198,"title":"Formatting the JSON output from an ASP.Net MVC 4 Web API","body":"<p>I have a Web API project with models that look like this:</p>\n\n<pre><code>public class Account{\n\nstring FirstName{get;set;}\nstring LastName{get;set;}\n}\n</code></pre>\n\n<p>I would like the JSON response to use a different format and casing for the properties, like this:</p>\n\n<pre><code>first_name\nlast_name\n</code></pre>\n\n<p>Is there a way to perform this globally through some sort of json formatter, or is it best to create separate ViewModel classes with appropriate casing?</p>\n"},{"tags":["jquery","asp.net-mvc","json","mvc","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":13016929,"title":"Any Way to Implement Twitter Bootstrap using MVC 4 validation? Instead of using jquery?","body":"<p>As mentioned in the title, any advice would be appreciated. Also, anyway to know how to implement jquery to post data from dropdown list, checked box over to MVC 4 server side and responding back?\nLike, wow to implement System.Web.Mvc.Html and System.Web.Mvc.Ajax libraries with Twitter Bootstrap component?</p>\n\n<p><a href=\"http://twitter.github.com/bootstrap/\" rel=\"nofollow\">http://twitter.github.com/bootstrap/</a>\nThere is no way to show how to implement those information mentioned above.</p>\n"},{"tags":["asp.net-mvc","web","web-deployment"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13290936,"title":".Net MVC Web Deployment","body":"<p>I have Visutal Studio 2012, MVC 4 &amp; Razor. I am having trouble getting a website up and running with this technology.</p>\n\n<p>The Web Server is a Windows Server 2008 server. I tried deploying using the Web Deploy method but am consistently getting something like 'set ACL\" error.</p>\n\n<p>I tried deploying using the File System. All files got deployed, but when I try and run the website, it fails because of missing ASP.NET MVC infrastruccture files.</p>\n\n<p>Two things:\n•If I use Web-Deploy, how do I solve the ACL error, because I assume with this method, everything needed will get deployed.</p>\n\n<p>Note that the Web Deploy 3.0 service is on the server and started.\n•If I use File System, where can I find the downloads needed to deploy on the server where MVC WILL work. \n◦Note that I downloaded the 4.5 Framework and was successfully installed.</p>\n"},{"tags":["c#","jquery","ajax","asp.net-mvc","json"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13296229,"title":"How to pass a multi-dimensional array to ASP.NET MVC 3 JsonResult Controller","body":"<p>I have two javascript arrays that I need to pass into an MVC 3 controller and then input the values into a database. I have two lists of checkboxes and a change event for both list containers, to grab their checkbox id's and checked values and then add them to the arrays.</p>\n\n<pre><code>  @{\n        ViewBag.Title = \"JS Arrays in ASP.NET MVC 3\";\n    }\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#tabs\").tabs();\n    });\n&lt;/script&gt;\n&lt;p&gt;Use the form below to check items from the lists and save them to the database.&lt;/p&gt;\n\n&lt;div id=\"tabs\"&gt;\n    &lt;ul&gt;\n        &lt;li&gt;&lt;a href=\"#tabs-1\"&gt;Pre-Accept&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"#tabs-2\"&gt;Post-Accept&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;div id=\"tabs-1\"&gt;\n        &lt;div id=\"checklist1\"&gt;\n            &lt;table&gt;\n                &lt;tbody&gt;\n                    &lt;tr&gt;\n\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" id=\"StudentPreAccept.Transcripts\" /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;Transcripts\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" id=\"StudentPreAccept.BiographicalInfo\" /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;Biographical Info\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" id=\"StudentPreAccept.PersonalEssay\" /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;Personal Essay\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n        &lt;br /&gt;\n        &lt;button id=\"savePreAccept\" onclick=\"saveAcceptList();\"&gt;Save Pre-Accept&lt;/button&gt;\n    &lt;/div&gt;\n    &lt;div id=\"tabs-2\"&gt;\n        &lt;div id=\"checklist2\"&gt;\n            &lt;table&gt;\n                &lt;tbody&gt;\n                    &lt;tr&gt;\n\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" id=\"StudentPostAccept.EnrollmentFee\" /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;Enrollment Fee\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" id=\"StudentPostAccept.Photo\" /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;Photo\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" id=\"StudentPostAccept.TravelItinerary\" /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;Travel Itinerary\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n        &lt;/div&gt;\n        &lt;br /&gt;\n        &lt;button id=\"savePostAccept\" onclick=\"saveAcceptList();\"&gt;Save Post-Accept&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div id=\"results\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var preAcceptArray = { };\n    var postAcceptArray = { };\n\n    $(\" #checklist1 [type='checkbox']\").change(function() {                       \n        // add to the preAcceptArray\n        var id = $(this).attr('id');\n        var checked = $(this).is(':checked') ? 'True' : 'False';\n        preAcceptArray[id] = checked;\n\n        console.log(JSON.stringify(preAcceptArray));\n    });\n    $(\" #checklist2 [type='checkbox']\").change(function () {\n        // add to the postAcceptArray\n        var id = $(this).attr('id');\n        var checked = $(this).is(':checked') ? 'True' : 'False';\n        postAcceptArray[id] = checked;\n\n        console.log(JSON.stringify(postAcceptArray));\n    });\n\n    function saveAcceptList() {\n        $.post('/Home/UpdateLists', {\n                preAcceptList  : preAcceptArray,\n                postAcceptList : postAcceptArray\n            }, function(response) {\n                $(\"#results\").html(response);\n            }, \"json\");\n    }\n\n&lt;/script&gt;\n</code></pre>\n\n<p>Then on the controller side of things I have a JsonResult action that takes two parameters as input.</p>\n\n<pre><code> [HttpPost]\n    public JsonResult UpdateLists(string[][] preAcceptList, string[][] postAcceptList)\n    {\n        // do something with the lists             \n\n\n        // return the result\n        return Json(\"List(s) updated successfully.\", JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>The problem is no matter what type of parameter I pass-in, I can't get the values from the ajax post. Should I be passing them in as JSON and then just parsing the JSON?</p>\n\n<p>I know I'm missing something and any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc","viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13295586,"title":"Asp Net MVC with VM is this good practice? (Code Sample)","body":"<p>I'm wondering if what I have here is good practice. Using Entity Framework Code First with MVC and View Models.\nBelow i have code for List, Create, Edit and Delete. Model name Page and 2 ViewModels name ContentViewModel and ContentListViewModel.</p>\n\n<pre><code> private readonly IUserService _userService;\n    //private readonly MembershipProvider _members;\n\n    public ContentController()\n    {\n        // _members = Membership.Provider;\n        _userService = new AspNetMembershipProviderWrapper();\n    }\n\n    //\n    // GET: /Profile/Content/\n\n    public ActionResult Index()\n    {\n        using (var db = new BlogContext())\n        {\n            IEnumerable&lt;Page&gt; pages;\n            pages = db.ArticlePages.ToList();\n            List&lt;ContentListViewModel&gt; model = new List&lt;ContentListViewModel&gt;();\n            foreach (Page pg in pages)\n            {\n                MembershipUser user = _userService.Get(pg.authorId);\n                model.Add(new ContentListViewModel()\n                {\n                    PageID = pg.pageID,\n                    UserName = user.UserName,\n                    UserID = (Guid)user.ProviderUserKey,\n                    IsFrontPage = pg.frontpage,\n                    isPublished = pg.published,\n                    PageTitle = pg.titleHeading,\n                    PageUrlName = pg.idName,\n                    PublishedDate = pg.datentime\n                });\n            }\n\n            return View(model);\n        }\n    }\n\n    //\n    // GET: /Profile/Content/Create\n\n    public ActionResult Create()\n    {\n        return View();\n    }\n\n    //\n    // POST: /Profile/Content/Create\n\n    [HttpPost]\n    public ActionResult Create(ContentViewModel page)\n    {\n        if (ModelState.IsValid)\n        {\n            using (var db = new BlogContext())\n            {\n                db.ArticlePages.Add(new Page()\n                {\n                    authorId = (Guid)Membership.GetUser().ProviderUserKey,\n                    datentime = DateTime.Now,\n                    frontpage = page.FrontPage,\n                    published = page.Published,\n                    titleHeading = page.TitleHeading,\n                    pageContent = page.Content,\n                    idName = page.IdName\n                });\n                db.SaveChanges();\n                return RedirectToAction(\"Index\").Success(\"Page added Successfully.\");\n            }\n        }\n\n        return View(page);\n    }\n\n\n    //\n    // GET: /Profile/Content/Edit/5\n\n    public ActionResult Edit(int id = 0)\n    {\n        if (id == 0)\n        {\n            return RedirectToAction(\"Index\").Error(\"Page Not found.\");\n        }\n        Page pg = new Page();\n        using (var db = new BlogContext())\n        {\n            pg = (from m in db.ArticlePages where m.pageID == id select m).SingleOrDefault();\n        }\n        if (pg == null)\n        {\n            return RedirectToAction(\"Index\").Error(\"Page Not found..\");\n        }\n        return View(new ContentViewModel()\n        {\n            id = pg.pageID,\n            Content = pg.pageContent,\n            FrontPage = pg.frontpage,\n            Published = pg.published,\n            TitleHeading = pg.titleHeading,\n            IdName = pg.idName\n        });\n    }\n\n\n    // POST: /Profile/Content/Edit/5\n\n    [HttpPost]\n    public ActionResult Edit(ContentViewModel page)\n    {\n        if (ModelState.IsValid)\n        {\n            using (var db = new BlogContext())\n            {\n                var oPage = db.ArticlePages.Single(p =&gt; p.pageID == page.id);\n                oPage.frontpage = page.FrontPage;\n                oPage.idName = page.IdName;\n                oPage.pageContent = page.Content;\n                oPage.published = page.Published;\n                oPage.titleHeading = page.TitleHeading;\n                db.SaveChanges();\n                return RedirectToAction(\"Index\").Success(\"Page updated\");\n            }\n        }\n        return View(page);\n    }\n\n    //\n    // POST: /Profile/Content/Delete/5\n\n    [HttpPost]\n    public ActionResult Delete(int id)\n    {\n        using (var db = new BlogContext())\n        {\n            Page page = db.ArticlePages.Find(id);\n            db.ArticlePages.Remove(page);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\").Success(\"Page deleted\");\n        }\n    }\n</code></pre>\n\n<p>I would like to know there are better ways of doing this?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","jqgrid"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13274096,"title":"Good programming principles while using EF/Code First/Repository Pattern/Table Per Type (TPT)?","body":"<p>Just curious.</p>\n\n<p>Say I have a Base entity and I'm deriving about 10 different child entities from it using the Table Per Type method. I also have a generic repository which can fetch me data from each of these child entities. I eventually want to map each of the child entities to a separate view model and link each of the view models to its own grid (JqGrid) on my website, with each grid having its own Create, Read, Update, Delete methods. I can do all of that, but I'm not sure what's the proper way to go about it while keeping code to a minimum.</p>\n\n<p>Right now, I have every field defined (from both the parent and child entity) in each of my view models. Is it better to have a \"parent\" view model and then deriving the child view models from it in order to mimic the inheritance structure of the entities? I wouldn't think so....having inheritance in view models doesn't make much sense to me.</p>\n\n<p>Also, I really don't want to duplicate CRUD operations for each grid. Is that considered good practice? Should each view model have its own set of CRUD operations in this case?</p>\n\n<p>Take 'Read' for instance. I'm basically returning JSON data based on the ID (key) field of the view model for each grid. And since all grids will have this ID column (part of the parent entity), should I only have one function that takes care of this for all grids? Should I be using reflections? Should I be making use of polymorphic properties of the parent/child entities?</p>\n\n<p>Or is it better to keep these operations separate for each grid?</p>\n\n<p>Hmmm..</p>\n"},{"tags":["asp.net-mvc","caching","action-filter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13295804,"title":"ASP MVC 4 - caching action filters","body":"<p>I have a simple action filter attribute that checks if user is currently online:</p>\n\n<pre><code>public class CheckForOnlineAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n         Membership.GetUser();\n         base.OnActionExecuting(filterContext);\n     }\n}\n</code></pre>\n\n<p>Now, i would like to cache this action for 12 minutes, i tried putting a <code>[OutputCache(Duration=XXX)]</code> on it, but that does not work. How can i cache this action filter?</p>\n"},{"tags":["c#","asp.net-mvc","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13295136,"title":"Name attribute on ASP.NET MVC action","body":"<p>I have this action:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Test(Test test) \n{\n...\n}\n</code></pre>\n\n<p>With this class:</p>\n\n<pre><code>public class Test\n{\npublic string txtTest { get; set; }\n}\n</code></pre>\n\n<p>An html form has a text field named txtTest, and I can successfully call into my action above. What property name would allow me to do this:</p>\n\n<pre><code>public class Test\n{\n[SomeAttribute(Name = \"txtTest\")]\npublic string MyTest { get; set; }\n}\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","jquery-ajax","unobtrusive-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13280026,"title":"Wiring up Ajax.BeginForm that didn't exist during doc.ready?","body":"<p>I have a MVC page that loads a Partial via a Ajax.ActionLink, which works, and then the loaded Partial contains a form that has Ajax.BeginForm.  This form is not getting wired up to unobtrusive ajax, and instead is performing a page refresh(I verified this in the Network log of the browser that shows the initiator when I click submit is the browser instead of jquery).</p>\n\n<p>What I believe is the issue is that since the form didn't exist when the page is loaded(but later is added via the Ajax.ActionLink), then unobtrusive ajax didn't see the data-ajax attributes on the newly added form and wire up the necessary events.  I'm assuming that only happens at document.ready, and the ajax form didn't exist then.</p>\n\n<p><strong>Is there something I can do to say \"hey Unobstrusive Ajax, please look at my page again now that I have some new elements that are marked with data-ajax and wire them up\"?</strong></p>\n\n<p>Thanks.</p>\n\n<p>Looking at the unobtrusive ajax source, it has this:</p>\n\n<pre><code>$(\"form[data-ajax=true]\").live(\"submit\", function (evt) {\n        var clickInfo = $(this).data(data_click) || [];\n        evt.preventDefault();\n...\n</code></pre>\n\n<p>The form tag generated looks like this:</p>\n\n<pre><code>&lt;form action=\"/Path/Create\" class=\"form-horizontal\" data-ajax=\"true\" data-ajax-method=\"post\" data-ajax-mode=\"replace\" data-ajax-update=\"#ParentContainer\" id=\"PathForm\" method=\"post\" novalidate=\"novalidate\"&gt;\n</code></pre>\n\n<p>As far as I can tell the selector on the .live event should be picking up on the new form when it's loaded onto the page.  The form is inside a bootstrap modal however, so I don't know if that would be preventing the event from bubbling up somehow.</p>\n\n<p>I can even run this in Chrome console:</p>\n\n<pre><code> $(\"form[data-ajax=true]\").live(\"submit\", function (evt) {\n            var clickInfo = $(this).data(data_click) || [];\n            evt.preventDefault(); });\n</code></pre>\n\n<p>And it returns the form element successfully, but when I click submit it still does a full page refresh.  I would expect it to at least do nothign since I wired it up to preventDefault.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13292110,"title":"MVC listener in View","body":"<p>Currently I make an ajax request (every interval) from a view to get a response from a controller and update view element accordingly. Is there a way to FLIP it other way around? That is to have the listener on the View and controller would fire an event to update the view?. any examples greatly appreciated.\nthanks</p>\n"},{"tags":["asp.net-mvc","forms","checkbox"],"answer_count":19,"favorite_count":93,"up_vote_count":179,"down_vote_count":5,"view_count":110780,"score":174,"question_id":220020,"title":"How to handle checkboxes in ASP.NET MVC forms?","body":"<p>This seems a bit bizarre to me, but as far as I can tell, this is how you do it.</p>\n\n<p>I have a collection of objects, and I want users to select one or more of them.  This says to me \"form with checkboxes.\"  My objects don't have any concept of \"selected\" (they're rudimentary POCO's formed by deserializing a wcf call).  So, I do the following:</p>\n\n<pre><code>public class SampleObject{\n  public Guid Id {get;set;}\n  public string Name {get;set;}\n}\n</code></pre>\n\n<p>In the view:</p>\n\n<pre><code>&lt;%\n    using (Html.BeginForm())\n    {\n%&gt;\n  &lt;%foreach (var o in ViewData.Model) {%&gt;\n    &lt;%=Html.CheckBox(o.Id)%&gt;&amp;nbsp;&lt;%= o.Name %&gt;\n  &lt;%}%&gt;\n  &lt;input type=\"submit\" value=\"Submit\" /&gt;\n&lt;%}%&gt;\n</code></pre>\n\n<p>And, in the controller, this is the only way I can see to figure out what objects the user checked:</p>\n\n<pre><code>public ActionResult ThisLooksWeird(FormCollection result)\n{\n  var winnars = from x in result.AllKeys\n    \t  where result[x] != \"false\"\n    \t  select x;\n  // yadda\n}\n</code></pre>\n\n<p>Its freaky in the first place, and secondly, for those items the user checked, the FormCollection lists its value as \"true false\" rather than just true.  </p>\n\n<p>Obviously, I'm missing something.  I think this is built with the idea in mind that the objects in the collection that are acted upon within the html form are updated using <code>UpdateModel()</code> or through a ModelBinder.  </p>\n\n<p>But my objects aren't set up for this; does that mean that this is the only way?  Is there another way to do it?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2452,"score":2,"question_id":2922166,"title":"MVC and binding to List of Checkboxes","body":"<p>Here is my problem. I have a list of models that are displayed to the user. On the left is a checkbox for each model to indicate that the user wants to choose this model (in this case, we're building products a user can add to their shopping cart). The model has no concept of being chosen...it strictly has information about the product in question. </p>\n\n<p>I've talked with a few other developers after having gone through and the best I could come up with is getting the formcollection and string parsing the key values to determine whether the checkbox is checked or not. This doesn't seem ideal. I was thinking there would be something more strongly bound, but I can't figure out a way to do it. </p>\n\n<p>I tried creating another model that had a boolean property to represent being checked and a property of the model and passing a list of that model type to the view and creating a ActionResult on the controller that accepts a list of the new model / checked property, but it comes back null. Am I just thinking too much like web forms and should just continue on with parsing checkbox values?</p>\n\n<p>Here's what I've done for wrapping the models inside a collection:</p>\n\n<p><pre><code>\npublic class SelectableCollection[T] : IList[T] {} \npublic class SelectableTrack{ \n  public bool IsChecked{get;set;} \n  public bool CurrentTrack{get;set;} \n} \n</pre></code>\nFor the view, I inherit from </p>\n\n<pre><code>\nViewPage[SelectableCollection[SelectableTrack]] \n</code></pre>\n\n<p>For the controller, I have this as the ActionResult:</p>\n\n<pre><code>\n    [HttpPost] \n    public ActionResult SelectTracks(SelectableCollection sc) { \n\n       return new EmptyResult(); \n    } \n</code></pre>\n\n<p>But when I break inside the ActionResult, the collection is null. Any reason why it isn't coming through?</p>\n"},{"tags":[".net","asp.net-mvc","iis",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13295556,"title":"How to track when IIS recycles the worker process?","body":"<p>Without rewriting the code to add logging code to Global.asax's Application_End method, is there a way to track when IIS recycles the worker process?</p>\n\n<p>Perhaps via PerfMon or EventViewer?</p>\n\n<p>For reference, this is a .NET 4, ASP.NET MVC app (if it makes any difference).</p>\n"},{"tags":["sql","xml","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13288466,"title":"SQL Query to XML?","body":"<p>I have one SQL Query on my C# project with MVC3, that builds a menu structure.\nThis works but I can not embed my ASPxMenu into the project because for some reason is not compatible with Master page.</p>\n\n<p>Can i convert that Query to XML?</p>\n\n<p>If it will be an XML file, than it`s possible to attach to Html.Devexpress().Menu with .BindToXML</p>\n"},{"tags":["jquery","asp.net-mvc","telerik"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13295554,"title":"Telerik ScriptRegistrar moving around script load order, causing error","body":"<p>Here is the ScriptRegistrar code:</p>\n\n<pre><code>@(Html.Telerik().ScriptRegistrar().jQuery(false).jQueryValidation(true)\n    .DefaultGroup(group =&gt; group\n        .Combined(false)\n        .Compress(false)\n    )\n    .Scripts(s =&gt; s.AddGroup(\"myGroup\", group =&gt; group\n            .Add(\"~/Scripts/jquery-1.8.2.min.js\")\n            .Add(\"~/Scripts/2012.3.1017/telerik.common.min.js\")\n            .Add(\"~/Scripts/2012.3.1017/telerik.upload.min.js\")\n            .Add(\"~/Scripts/modernizr-2.6.2.min.js\")\n            .Add(\"~/Scripts/jquery-ui.min.js\")\n            .Add(\"~/Scripts/jquery.maskedinput.min.js\")\n            .Add(\"~/Scripts/hiring.js\")\n        )\n    )\n)\n</code></pre>\n\n<p>How it looks on the page.</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"/Scripts/2012.3.1017/telerik.common.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2012.3.1017/telerik.upload.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/jquery-1.8.2.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/modernizr-2.6.2.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/jquery-ui.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/jquery.maskedinput.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/hiring.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>It switched my order, loading jQuery-dependent scripts before jQuery.</p>\n"},{"tags":["c#","html","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13295259,"title":"Need stack views in Razor that allows me to hide the views or the fields","body":"<p>I have several partial views that I need to stack them on my web page.</p>\n\n<p>pv1  pv2</p>\n\n<p>pv3  pv4 </p>\n\n<p>pv5  pv6</p>\n\n<p>I also need to be able to hide any of them or even labels within each view.</p>\n\n<p>I tried using a table but I cannot get them to show up right.</p>\n\n<p>Here is an example of what I did:</p>\n\n<pre><code>&lt;h2&gt;AccountScreen&lt;/h2&gt;\n\n  &lt;table&gt;\n    &lt;tr&gt;\n      @Html.Partial(\"CustomerInfoPartialView\")\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      @Html.Partial(\"BalancePartialView\")\n    &lt;/tr&gt;\n  &lt;/table&gt;\n</code></pre>\n\n<p>That didn't turn out anything like I was hoping for, it was a mess.</p>\n\n<p>What should I use to stack my partial views and also be able to hide/show them programmatically?</p>\n"},{"tags":["c#","javascript","asp.net-mvc","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13294914,"title":"Set a javascript variable from mvc controller","body":"<p>Is it possible to set a javascript variable from a c# controller?  We have a situation where we override our master page with a dumb downed version that doesn't require login for users.  However, our javascript timeout timer still runs.  I would like to in the controller method that overrides the master, to override the timeout to something huge.</p>\n\n<pre><code>public dumbDownController()\n{\n     ViewData[\"MasterPageOverride\"] = \"~/Views/Shared/_NoLogin.cshtml\";\n\n     //Somehow reset that timer below from 20 to like 9999. To simulate no timeout.\n\n     return View(\"Cities\", model);\n}\n</code></pre>\n\n<p>Then our javascript file has.</p>\n\n<pre><code>tb.sessionTimer = (function () {\n   var SESSION_TIMEOUT = 20;\n   var currentTimeoutCounter = SESSION_TIMEOUT * 60;\n ...\n lots more irrelevant to question\n ...\n }\n</code></pre>\n\n<p>Large app, so looking to barely change the javascript.  Would like to handle it from the controller.</p>\n"},{"tags":["sql","asp.net-mvc","asp.net-mvc-3","foreach"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13294801,"title":"SQL View + foreach not looping through results","body":"<p>I have a view that is returning a resultset LEFT OUTER JOIN from a SQL Database.  I'm using MVC 3 to display a partial view based on the resultset.  But....</p>\n\n<pre><code>@foreach (var category in Model.FeeScheduleRates().Distinct())\n{\n     &lt;tr&gt;&lt;td colspan=\"2\"&gt;@category.Category&lt;/td&gt;&lt;/tr&gt;\n     foreach (var item in Model.FeeScheduleRates()\n                               .Where(i=&gt;i.Cat_ID == category.Cat_ID))\n     {                               \n         &lt;tr&gt; \n             &lt;td&gt;@item.Fee_Title - @item.Description&lt;/td&gt;\n             &lt;td&gt;@item.Amount&lt;/td&gt;                                        \n         &lt;/tr&gt;\n     }                                   \n}\n</code></pre>\n\n<p>The view isn't looping through the second foreach loop.  Rather, it repeats the first entry as many times as there are matching records.  So it should create a table with a row spanning two columns for each category, and then display the items in that category (Title, Description and amount.</p>\n\n<p>Why doesn't the second foreach loop work?</p>\n\n<p>EDIT:  As requested The View</p>\n\n<pre><code>SELECT  TOP (100) PERCENT a.Cat_ID, a.Fee_Title, a.Description, a.Amount, b.Category\nFROM     dbo.Fee_Schedule AS a LEFT OUTER JOIN\n           dbo.Fee_Categories AS b ON a.Cat_ID = b.Cat_ID\nORDER BY a.Cat_ID\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc","scheduling"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":306,"score":1,"question_id":5603335,"title":"How can i make a schedule in asp.net mvc?","body":"<p>I'm looking for a scheduler for asp.net mvc. For example I want to send notification email weekly and also check expired date of the contract. Please suggest me solution in asp.net mvc.\nThanks in advance.</p>\n"},{"tags":["asp.net-mvc","session","global-asax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13294346,"title":"c# asp.net mvc session start being called multiple times","body":"<p>I have a web site. I am using the session start in global.ascx and while debugging I noticed that it is being called a few times, and jumping from line to line what seems to be different threads. is that normal? must I use the lock statement here?</p>\n"},{"tags":["asp.net-mvc","validation","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13294101,"title":"MVC4. Setting default and success value of ValidationMessage","body":"<p>I am using this line to represent my models validation message:</p>\n\n<p>@Html.ValidationMessageFor(Model => Model.Email, \"\")</p>\n\n<p>It workds in the manner that when the attribute isn't valid, it's set to the proper error message.\nI want to extend this so it first shows a default message, then a success message if the attribute \"Email\" is valid.</p>\n\n<p>So..</p>\n\n<p>Default: Please enter your email here.\n!Valid: The email is not valid (working)\nValid: Thanks, you'll receive an email after completing the registration.</p>\n\n<p>Is there any way to add default &amp; successful messages?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","oauth-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13294162,"title":"OAuth / OpenId MVC 4 App with a WebAPI","body":"<p>I've been looking at the DotNetOpenAuth samples and reading around the subject but I'm still a bit hazy on what the actual requirements are for me to secure my particular environment.  Many of the samples I've looked at also throw exceptions making walking the code a bit hit and miss.</p>\n\n<p>I have an MVC web app making use of the WebSecurity and OAuthWebSecurity classes, this provides the app with logins using either a local account or an OpenID provider account.  The system also has a WebAPI in a separate web site and solution.</p>\n\n<p>The system has two databases, one for security and one for data.  The MVC web application only has a direct link to the security database whereas the Api has a connection to the security database and the data database.  All interaction with the data database will occur via the WebApi.</p>\n\n<p>What I looking to do is secure the Api.</p>\n\n<p>I'm not sure of the terminology in relation to OAuth to describe the Api.  Is it a Resource Server Authorisation / Authentication Sever rolled into one?  It also seems like at times it will also be the relying party.</p>\n\n<p>The Api is also going to be used by 3rd party apps on behalf of users so I also need an API key for the applications authentication.  The users and apps will be logged in purely by the Api.</p>\n\n<p>Any clarification on what needs to be done would be really appreciated.</p>\n"},{"tags":["asp.net-mvc","entity-framework-4","modelmetadata","data-annotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13294151,"title":"How to override Entity Framework validation error messages","body":"<p>I have an Entity Framework 4.1 model that supports multiple ASP.NET MVC web applications. I use DataAnnotations to define and localize label text and validation rules and error messages.</p>\n\n<p>For some applications, I need the label text for certain fields to differ from the standard, model-defined text. This is easy to achieve for the labels themselves: I retrieve the text I need from a local resource file, associated with the view. However, the label text is also used in validation error messages such as \"{fieldname} must have a maximum length of 50 characters\".</p>\n\n<p>What is the best way to alter the validation messages without changing the Annotations on the model classes?</p>\n"},{"tags":["asp.net-mvc","jquery-mobile","razor","httppostedfilebase","enctype"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13292173,"title":"ASP.NET MVC Razor - Uploading File, HttpPostedFileBase always null","body":"<p>Well, this is weird.\nI'm doing everything as I massively found on the web, but still doesn't work.\nI want to upload a file, so in the View I put:</p>\n\n<pre><code>@using (Html.BeginForm(\"Import\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n&lt;input type=\"file\" name=\"uploadFile\" /&gt;\n&lt;input type=\"submit\" value=\"Importa\" /&gt;\n}\n</code></pre>\n\n<p>and this is Home/Import:</p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)] // or [HttpPost], nothing changes\npublic ActionResult Import(HttpPostedFileBase uploadFile)\n{\n   Debug.WriteLine(\"Inside Import\");\n   if (uploadFile == null)\n       Debug.WriteLine(\"null\");\n   // Verify that the user selected a file\n   if (uploadFile != null &amp;&amp; uploadFile.ContentLength &gt; 0)\n   {\n      Debug.WriteLine(\"Valid File\");\n      ...\n   }\n}\n</code></pre>\n\n<p>and it always prints <em>Inside Import</em> + <em>null</em>. So I'm sure I call the right Controller Action but it always receive a null HttpPostedFileBase.</p>\n\n<p>Does anyone have advice for it or have already found (and solved) this kind of problem?\nThanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13293537,"title":"HttpContext.Current.Session is null in OnPostAuthenticateRequest","body":"<p>This is a n00b question, perhaps you can help.</p>\n\n<p>When I'm in the <code>Application_OnPostAuthenticateRequest</code> event, I am unable to look into the <code>Session</code> since <code>HttpContext.Current.Session</code> is null.  Is there a reason that this is null, and is there a way I can access the <code>Session</code> during this event?</p>\n\n<p>Is there an alternative event that allows me to get the authenticated user in addition to the session state?</p>\n\n<p>Thanks!\nBrett</p>\n"},{"tags":["asp.net-mvc","viewmodel"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13293563,"title":"Best Practice for fill ViewModel with different Repositories","body":"<p>I'm trying to find out the best way to doing this code \n(because I think, my way locks not good):\nI've tried to make it as easy to understand the problem.</p>\n\n<pre><code>public ActionResult Index()\n{\nvar user=new User();\nuser.load(1);\nreturn View(user);\n}\n\nload(int id )\n{\n//pseudocode:\n//1. load user from repository1     \n//2. load address from repository2\n//3.load payments from repository3\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","web-optimization"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13290977,"title":"MVC Bundling - Include .min file for a single bundle","body":"<p>I have a single file in my application that I only have a minified version of and I would like to create a bundle for it:</p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/maskedinput\").Include(\n    \"~/Scripts/jquery.maskedinput-1.3.min.js\"));\n</code></pre>\n\n<p>The problem is that by default in debug mode, the bundling mechanism ignores .min files. I don't want to turn off this rule for all bundles, but I would like to disable it for this single bundle. Is this possible?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","wif","claims-based-identity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13285610,"title":"Passing Bearer Tokens across domains and how to inject them in the WIF pipeline","body":"<p>I have been implementing a skeleton Claims Based architecture for our services and websites. I'm using WIF, .NET 4.5, MVC / Web Api.</p>\n\n<p>I have the STS (WS-Federation / WS-Trust) and several Relying Parties implemented, and all is working fine.</p>\n\n<p>Now, I want to be able to authenticate in one Relying Party and use that same token (the bootstrap token, I assume) to make Ajax calls to another Relying Party. I can get the Bootstrap Token down in the HTML (is this even a good idea?), and add it to the Ajax call headers as some form of Authentication (Basic, etc).</p>\n\n<p>What I don't know is how to intercept the request in the final Relying party, and \"tell\" WIF to use that bootstrap token and do it's magic with it (Load, Validate, Authenticate, Authorize, Create Principal, Create Session Token, Write it down in a cooke).</p>\n\n<p>I guess I could do all this by hand using the available classes, but there must be a point where I can just hook up for this. Probably around the SAM / FAM modules, but I can't understand exactly how.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13293207,"title":"ASP.NET MVC optional field being treated as required","body":"<p>I have this field that for some reason when I click on submit, gets a validation message that the field is required.</p>\n\n<pre><code>[DisplayName(\"Total Budget:\")]\npublic double Budget { get; set; }\n\n\n@Html.EditorFor(model =&gt; model.account.Budget)\n@Html.ValidationMessageFor(model =&gt; model.account.Budget)\n\n\n\n\n  public class Account\n    {\n\n        [DisplayName(\"Total Budget:\")]\n        public double Budget { get; set; } //dropdown\n\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","cookies","session-cookies"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13291159,"title":"ASP.NET MVC 3 Cookies get lost","body":"<p>I am sending domain cookies from one site to my asp.net mvc application , there I setting Authentication cookie , </p>\n\n<p>In My Action Filter I can't see that cookie appears , but if I am looking in BeginRequest event of global.asax there is cookie there. Any Ideas why cookies getting lost on their way to the Action Filter ?</p>\n\n<p>Thanks.</p>\n\n<p>Adding of </p>\n\n<pre><code> &lt;machineKey validationKey=\"4B79DF965DC586D2B267BDECB4580D40EE6811EE171AC65D929BECD8865C09ED8681B92F2177FE9F72B8E822B26914C79C1FF590CCEE65469CBC6FACD7D9F203\" decryptionKey=\"SOmeKey\" validation=\"SHA1\" /&gt;\n</code></pre>\n\n<p>doesn't helped...</p>\n\n<p>Don't know what to do with this...\nUpdate2:\nI can see in Application_BeginRequest - 2 cookies , then when break point hits my custom action filter</p>\n\n<pre><code>public class SecurityFilter : FilterAttribute, IAuthorizationFilter\n    {\n        public void OnAuthorization(AuthorizationContext filterContext)\n        {\n</code></pre>\n\n<p>Here my first cookie dissapearing , and second is still exists.\nthe Expire property is set the same for both , and every property except value is the same in both cookies , why the first one gets lost ? and the second is exist ? Reading about ASP.NET MVC request pipeline doesn't opened my eyes on something , anyone please :-)</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","json","cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13293120,"title":"jQuery.cookie not storing my JSON string","body":"<p>So I'm new to jQuery and JSON but this is pretty straight forward and the fact the it isn't working is frustrating me.</p>\n\n<p>I have an ASP.NET MVC Web site. I'm using AJAX (through jQuery) to load some data. Everything is well and good up until there. </p>\n\n<p>I'm trying to store my result in a cookie by using carhartl / jquery-cookie. </p>\n\n<p>The problem is when I try to store my data in a cookie the data isn't really stored. I'm using the code below:</p>\n\n<pre><code>                var jsonObj = JSON.stringify(result);\n\n                jQuery.cookie(\"resultData\", jsonObj, {\n                    expires: 2,\n                    path: \"/\",\n                    json: true\n                });\n</code></pre>\n\n<p><code>jQuery.cookie(\"resultData\")</code> returns null</p>\n\n<p>I've tried running the same code but instead of my actual data I wrote \"hello word\" which worked just fine.</p>\n\n<p>Can anyone help me please ?</p>\n"},{"tags":["asp.net-mvc","rss","syndication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13289255,"title":"ASp.net MVC create RSS but i cant subscribe to it","body":"<p>hi i was found this amazing post for creating rss feeds </p>\n\n<p><a href=\"http://damieng.com/blog/2010/04/26/creating-rss-feeds-in-asp-net-mvc\" rel=\"nofollow\">http://damieng.com/blog/2010/04/26/creating-rss-feeds-in-asp-net-mvc</a></p>\n\n<p>and i liked the approach, create a FeedResult that inherit from action Result.</p>\n\n<pre><code>public override void ExecuteResult(ControllerContext context)\n    {\n        if (context == null)\n        {\n            throw new ArgumentNullException(\"context\");\n        }\n\n        var response = context.HttpContext.Response;\n        response.ContentType = !string.IsNullOrEmpty(ContentType) ? ContentType : \"application/rss+xml\";\n\n        if (ContentEncoding != null)\n        {\n            response.ContentEncoding = ContentEncoding;\n        }\n\n        if (feed != null)\n        {\n            using (var xmlWriter = new XmlTextWriter(response.Output))\n            {\n                xmlWriter.Formatting = Formatting.Indented;\n                feed.WriteTo(xmlWriter);\n            }\n        }\n    }\n</code></pre>\n\n<p>and then load my items in the controller and convert</p>\n\n<pre><code>public ActionResult NewBooks(int? id)\n    {\n        SyndicationFeed feed;\n\n        if (id &gt; 0)\n        {\n            var serie = CurrentSession.Get&lt;Series&gt;(id);\n            feed = new SyndicationFeed(string.Format(\"BookSerie {0}\", serie.Name), serie.Description, new Uri(string.Format(\"http://{0}/Serie/Details/{1}\", Request.Url.Authority, serie.Id)));\n            feed.Items = CurrentSession.Query&lt;Book&gt;()\n                                  .Where(m =&gt; m.BookSeries.Id == id)\n                                  .OrderByDescending(o =&gt; o.CreationDate)\n                                  .Select(p =&gt; new SyndicationItem(p.Title, p.Description, new Uri(string.Format(\"http://{0}/Book/Home/Details/{1}\", Request.Url.Authority, p.Id.ToString()))))                                      \n                                  .ToList();\n        }\n\n        return new FeedResult(new Rss20FeedFormatter(feed));\n    }\n</code></pre>\n\n<p>the result looks ok, \n<img src=\"http://i.stack.imgur.com/p7zpL.png\" alt=\"enter image description here\"></p>\n\n<p>but when i want to subscribe to the feed with tools like google reader or outlook, the feed is blank.\n<img src=\"http://i.stack.imgur.com/UJRwx.png\" alt=\"enter image description here\"></p>\n\n<p>what do i need to do, write the xml in a file or what?</p>\n\n<p>i google for some time create rss with asp.net mvc but all are similar aproches.</p>\n"},{"tags":["asp.net-mvc","linq","entity-framework","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13292112,"title":"Hierarchical data & LINQ - best practices","body":"<p>Imagine a situation when you have a table with users, in which our users have a hierarchical structure.</p>\n\n<pre><code>[Key]\npublic virtual int UserId { get; set; }\n\npublic virtual UserProfile UserParent { get; set; }\npublic virtual int? UserParentId { get; set; }\npublic virtual String UserName { get; set; }\n</code></pre>\n\n<p>Place the sample data there:</p>\n\n<p><strong>UserId UserParentId UserName</strong></p>\n\n<ul>\n<li>1 | null | Boss</li>\n<li>2 | 1 | Manager Diana</li>\n<li>3 | 2 | Worker Sam</li>\n<li>4 | 2 | Worker Bob</li>\n<li>5 | 1 | Manager Wong</li>\n<li>6 | 5 | Worker Lu</li>\n</ul>\n\n<p>Assign each user a shovel :P</p>\n\n<pre><code>[Key]\npublic virtual int ShovelId { get; set; }\n\npublic virtual string ShovelSerialNumber { get; set; }\npublic virtual int UserId { get; set; }\n</code></pre>\n\n<p>Place the sample data there:</p>\n\n<p><strong>ShovelId ShovelSerialNumbe UserId</strong></p>\n\n<ul>\n<li>1 | 12345BK | 3</li>\n<li>2 | 99999ZK | 4</li>\n<li>3 | 88888KP | 6</li>\n</ul>\n\n<p>The purpose of all this is get the serial number of shovels, with hierarchical query on the users table. Boss will see all the shovels, but only shovels Manages subordinate employees.</p>\n\n<p>Any ideas and tips on how to achieve this in LINQ, taking into account that there may be several thousand employees and several thousand shovels, and do not know the depth of the depression hierarchy.</p>\n\n<p>Thx for help.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13292825,"title":"Getting Entity Framework to cascade-delete when re-attaching modified entity","body":"<p>I'm developing a website using MVC4 with EF code first approach.</p>\n\n<p>I have some problems with deleting the children in entities with one to many relations.\nThe entity relations are set up so that when removing a child entity from the parent collection, the child entity is also deleted from the child table (cascade delete?), and this works.\nHowever, when a child is removed from the parent collection in the view, EF does not delete the child in the database when re-attaching and saving the parent entity in the controller method.</p>\n\n<p>How can this be solved??</p>\n\n<p>The entities are:</p>\n\n<pre><code>class Parent\n{\n   public virtual ICollection&lt;Child&gt; Children {get;set;}\n}\nclass Child\n{\n   pubic string Text { get;set; }\n}\n</code></pre>\n\n<p><strong>This works and will remove child from database</strong>:</p>\n\n<pre><code>void RemoveChildFromCollection()\n{\n   // get the first parent and remove the forts collection\n   var context = new DatabaseContext();\n   var parent = context.Parents.First();\n   parent.Children.Remove(parent.Children.First());\n   context.SaveChanges();\n}\n</code></pre>\n\n<p>ControllerMethod: <strong>when children have been created/updated in the view, the database is updated, but removed children are not removed from the childrens table</strong></p>\n\n<pre><code>public ActionResult Edit(Parent parent)\n{\n   var context = new DatabaseContext();\n   context.Entry(parent).State = System.Data.EntityState.Modified;\n   context.SaveChanges();\n   return View();\n}\n</code></pre>\n\n<p>The modelbuilder are setup to delete child entity from child table when removing them from parent collection</p>\n\n<pre><code>// Use Identifying relation. Define complex key for ChildObject containing both Id and \n\n    ParentObjectId\n    modelBuilder.Entity&lt;Child&gt;()\n    .HasKey(c =&gt; new {c.ChildID, c.ParentID});\n\n// Because defining such key will remove default convention for auto incremented Id you must redefine it manually\n\n    modelBuilder.Entity&lt;Child&gt;()\n    .Property(c =&gt; c.ChildID)\n    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);\n\n// Set cascade delete\n\n    modelBuilder.Entity&lt;Parent&gt;()\n    .HasMany(p =&gt; p.Children)\n    .WithRequired()\n    .HasForeignKey(c =&gt; c.ParentID)\n    .WillCascadeOnDelete();\n</code></pre>\n"},{"tags":["asp.net-mvc","text","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13293061,"title":"Reusable text in MVC4","body":"<p>I'm just learning MVC4, so this is a very basic question.</p>\n\n<p>I have a string of text that I'd like to display on multiple pages. What is the best practice to accomplish this (other than copying/pasting it into each cshtml)?</p>\n"},{"tags":["asp.net-mvc","viewmodel","pagedlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13293066,"title":"Mapping a large List of Entities to a PagedList of ViewModels","body":"<p>How to use PagedList in a web application based on ASP MVC in combination with ViewModels.</p>\n\n<p>I want to make a PagedList of Viewmodels, so first I have to map the Entities to Viewmodels. </p>\n\n<p>When I fetch a large list, it it very slow because first the mapping is executed before the PagedList is made (so the whole List of Entities is fetched).</p>\n\n<p>What is the best way to solve this issue?</p>\n\n<pre><code>IEnumerable&lt;InvoiceData&gt; invoiceData = dataService.GetInvoiceData(locationId);\n\nMapper.CreateMap&lt;InvoiceData, ViewModelInvoiceData&gt;();\nIEnumerable&lt;ViewModelInvoiceData&gt; vmInvoiceData = Mapper.Map&lt;IEnumerable&lt;InvoiceData&gt;, IEnumerable&lt;ViewModelInvoiceData&gt;&gt;(invoiceData);\n\nIPagedList&lt;InvoiceDataViewModel&gt; pagedListVMInvoiceData = vmInvoiceData.ToPagedList(page, pageSize);\n</code></pre>\n\n<p>(I also use a mapping framework, but it's of course the same problem with a custom mapper class)</p>\n"},{"tags":["c#","asp.net-mvc","jquery-ajax","asp.net-mvc-2","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13292065,"title":"When returning a partial view that's AJAXed in how do I instead show an error message","body":"<p>I've got some jquery that'll run ajax that runs a controller action that returns a partial view. In some cases i want to display one of several error messages (controlled by the controller), rather than replacing a DOM element with the result.</p>\n\n<p>How do I achieve this?</p>\n\n<p>Currently I have this:</p>\n\n<pre><code>$.ajax({\n    type: \"POST\",\n    cache: false,\n    url: '&lt;%= Url.Action(\"AddPostcodeToTerritory\", \"Territories\") %&gt;'\n}).done(function(data) {\n    $(\"#SelectedTerritoryPostcodeRows\").html(data);\n});\n</code></pre>\n\n<p>I have the element <code>SelectedTerritoryPostcodeRows</code> which normally gets the information, but I also want the controller to be able to give some error message which I want to display somewhere else.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","jquery-ajax","jquery-mobile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13293205,"title":"Need to bind list of days then list of times in MVC4 jquery mobile application","body":"<p>I have been wracking my brain on this, and cannot make any progress. I am fairly new to JQmobile, so perhaps there is something there that is making this not work, Here is my set up:</p>\n\n<p>MVC4 asp.net application\nDAL is EF 4.0.\nI am making calls to methods in the DAL to get the date and times (seperately) like this:</p>\n\n<pre><code>var days = Model.Staff.GetAvailabilityDays(Model.Service, DateTime.Now.ToString(\"yyyyM\"));\nvar times = Model.Staff.GetAvailabilityTimes(Model.Service, DateTime.Now.ToString(\"yyyyM\"), \"day\");\n</code></pre>\n\n<p>these are variables being set in the view, and in the markup I am doing this:</p>\n\n<pre><code>&lt;ul data-role=\"listview\"&gt;\n        @foreach (var day in days)\n        {\n            &lt;li class=\"availableDay\"&gt;@day\n                &lt;ul class=\"availableTimes\"&gt;\n                    @foreach (var time in times)\n                    {\n                        &lt;li&gt;@time&lt;/li&gt;\n                    }\n                &lt;/ul&gt;\n            &lt;/li&gt;\n        }\n&lt;/ul&gt;\n</code></pre>\n\n<p><strong>This is what I am trying to accomplish:</strong> </p>\n\n<ol>\n<li>JQM listview brings up a list of days first (times are hidden)</li>\n<li>On click for one of the items, the day of that item is passed to the times method so it will only give me the times for that date.</li>\n</ol>\n\n<p>I figured that since I can't determine the day variable, setting the times variable the way I am will not really work. I made a view that calls this method that I have tried to hit view ajax:</p>\n\n<pre><code>    $(document).ready(function () {\n    var day = $(\".availableDays\").html();\n    $.ajax({\n        url: \"/availableTimes/\" + \"?='\" + day,\n        type: 'GET',\n        error: function () { document.title = 'error' },\n        success: function (data) {\n            var listItem = \"&lt;li&gt;\" + data.toString() + \"&lt;/li&gt;\";\n            $(\".availableTimes\").html(listItem);\n        }\n    })\n});\n</code></pre>\n\n<p>The view simply calls the method I want, like so:</p>\n\n<pre><code>public ActionResult AvailableTimes()\n{\n    var day = Request.Url.Query;\n    var availability = Wizard.Staff.GetAvailabilityTimes(Wizard.Service, DateTime.Now.ToString(\"yyyyM\"), day);\n    return Json(availability, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>NOTHING seems to be working. If i just hit the url's I get the json back, so I know it is the right place. If I just bind the days and get rid of my onReady scripts it will render the days in a list.</p>\n\n<p>Help!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","linq","linq-to-sql","linq-to-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13292194,"title":"In MVC3 how to get a list of models with Linq?","body":"<p>In my database context class I have:</p>\n\n<pre><code>Imports System.Data.Entity\nPublic Class MusicStoreEntities\n    Inherits DbContext\n    Public Property Albums As DbSet(Of Album)\n    Public Property Descriptions As DbSet(Of Description)\nEnd Class\n</code></pre>\n\n<p>Then, I have those two models for Album and Description</p>\n\n<pre><code>Public Class Album\n    Public Property AlbumId As Integer\nEnd Class\n\nPublic Class Description\n    Public Property DescriptionId As Integer\n    Public Property AlbumId As Integer\nEnd Class\n</code></pre>\n\n<p>From an Action of a Controller I can get a single Description for an Album using Linq as the following:</p>\n\n<pre><code>Dim album_description As Description = db.Descriptions.Single(Function(g) g.AlbumId = id)\n</code></pre>\n\n<p>However, how can I get a list of Descriptions for an Album?</p>\n\n<pre><code>Dim album_descriptions As List(Of Description) = db.Descriptions.**???**(Function(g) g.AlbumId = id)\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13292077,"title":"caching controller that returns a string","body":"<p>This is not working for some reason:</p>\n\n<pre><code>    [OutputCache(Duration = 600, VaryByParam = \"id\")]\n    public string GetSomeValue(int id)\n    {\n        return _service.GetSomeValue(id).ToString();\n    }\n</code></pre>\n\n<p>I tested this in a controller that returns a View and it does work.</p>\n\n<p>Any idea why? or any possible workaround?</p>\n"},{"tags":["asp.net-mvc","entity-framework","windows-8"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13292339,"title":"Asp.net cannot perform runtime binding on null reference on viewBag","body":"<p>I have an enum that belongs to a model which I am trying to assign a new value to from a dropdown list in the parent models ~/Create.</p>\n\n<pre><code>public ActionResult Create(RecipeIngredient recipeingredient)\n    {\n        ingredientType myNewType = new ingredientType();\n        if (ModelState.IsValid)\n        {\n            db.RecipeIngredients.Add(recipeingredient);\n            recipeingredient.ingredientType = myNewType;\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n        ViewBag.recipeID = new SelectList(db.Recipes, \"recipeID\", \"Name\", recipeingredient.recipeID);\n        ViewBag.ingredientID = new SelectList(db.Ingredients, \"ingredientID\", \"Name\", recipeingredient.ingredientID);\n\n        ViewData[\"ingredientList\"] = ingredientEnumList();\n        ViewBag.myNewType.value = new SelectList((System.Collections.IList)ViewData[\"ingredientList\"], \"Value\", \"Text\", recipeingredient.ingredientType.value);\n        return View(recipeingredient);\n    }\n</code></pre>\n\n<p>And some view Code:</p>\n\n<pre><code>    &lt;div class=\"editor-label\"&gt;\n         Select Type\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownList(\"myDropDown\", new SelectList((System.Collections.IList)ViewData[\"ingredientList\"],\"Value\", \"Text\"))\n    &lt;/div&gt;\n</code></pre>\n\n<p>As you can see, I create a new ingredientType and then try assign the selected value in a similar fashion to recipeID and ingredientID, this fails however.</p>\n"},{"tags":["c#",".net","asp.net-mvc","rest","asp.net-web-api"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13284460,"title":"ASP.NET WebApi not receiving post data","body":"<p>I need to receive some string and binary data using WebApi. I have created a controller this way:</p>\n\n<pre><code>    [HttpPost]\n    public void Post(byte[] buffer)\n    {\n        // Some code goes here\n    }\n</code></pre>\n\n<p>Here's the routtings:</p>\n\n<pre><code>    routes.MapHttpRoute(\n        name: \"CuscarD95B\",\n        routeTemplate: \"D95B/{controller}\",\n        defaults: new { buffer = RouteParameter.Optional },\n        constraints: new { controller = @\"Cuscar\" }\n</code></pre>\n\n<p>Now when I try to post some data, buffer is always byte[0] (zero length array). No data is being passed to the controller. </p>\n\n<p>Any help would be appreciated. </p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","rest","web-config","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13279283,"title":"How to point .NET WEB API application to load unreferenced controllers from BIN subdirectories","body":"<p>I am developing .NET WEB Api REST Service using framework 4.5 and the architectural direction now is to separate functional areas of our API. In other words, placing controllers into separate assemblies, e.g. having controllers in assemblies like company.web.administration, company.web.claims, etc.</p>\n\n<p>After experimenting with it, I noticed the power of the MVC framework. I can place controllers into separate class libraries but as long as these libraries are in the bin folder, they <strong>don't even have to be referenced</strong>. MVC finds them in the assemblies and API calls work fine.</p>\n\n<p>But under this architecture, the problem arises that we might get large number of these controller libraries. So, it would be helpful to pack them together under bin\\controllers, for example.\nDropping controllers into sub-folder ceases ability of ASP.NET MVC WEB API Framework to find them. </p>\n\n<p>I am searching for a way to tell Framework to look for these controllers under my directories as well as in bin. One of the options I used is I modified Web.config file as following: </p>\n\n<pre><code>&lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n        &lt;probing privatePath=\"bin;bin\\controllers;controllers\"/&gt;\n    &lt;/assemblyBinding&gt;\n&lt;/runtime&gt;\n</code></pre>\n\n<p>That didn't work. Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":10,"score":2,"question_id":13292488,"title":"Session time out from sub web application","body":"<p>I have a legacy asp.net web form web site, it uses forms authentication. Now, I have the requirement to create a new sub MVC application in the web site. My new application is most likely a SPA that means most actions are done through Ajax. Everything works fine until session time out, because once time out, my background Ajax returns the content of form login page instead of my json data. This is correct session behavior, but how can I know session time out in ajax and then redirect the page to login page?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing","url-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13292498,"title":"MVC3/4 Routing and URL catching","body":"<p>I'm working on an MVC app and would like different customers (companies) to see different css styles, logos etc when they visit the login page (and beyond).</p>\n\n<p>I thought about using a url pattern like this:</p>\n\n<ul>\n<li><a href=\"http://www.myapp.com/CompanyA/\" rel=\"nofollow\">http://www.myapp.com/CompanyA/</a> </li>\n<li><a href=\"http://www.myapp.com/CompanyB/\" rel=\"nofollow\">http://www.myapp.com/CompanyB/</a></li>\n</ul>\n\n<p>And then the routing to continue from there:</p>\n\n<ul>\n<li><a href=\"http://www.myapp.com/CompanyB/Article/1\" rel=\"nofollow\">http://www.myapp.com/CompanyB/Article/1</a></li>\n</ul>\n\n<p>Then I thought I'd interrogate the URL to see which company the user is coming to the app in and load the relevant styles/logos etc.</p>\n\n<p>My question is: How could I do this through routing?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13277125,"title":"JQuery Mobile data-rel=dialog not firing on iPhone or iPad","body":"<p>I found a question with my exact problem that nobody answered:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/11218707/jquery-mobile-data-rel-dialog-not-firing\">jQuery Mobile data-rel Dialog not firing</a></p>\n\n<p>I have a dialog that should open when the user presses on a button.  It works fine on ALL desktop browsers and Android browser.  It does NOT work in Safari on iPhone or iPad.  If you refresh the page on the iDevice, it works.</p>\n\n<p>Here is my button:</p>\n\n<pre><code>&lt;a href=\"#popup\" data-role=\"button\" data-rel=\"dialog\" data-icon=\"gear\" data-iconpos=\"right\" data-transition=\"slidedown\"&gt;@Model.selectedDate.ToShortDateString()&lt;/a&gt;\n</code></pre>\n\n<p>Here is my dialog:</p>\n\n<pre><code>&lt;div data-role=\"dialog\" id=\"popup\"&gt;\n\n&lt;div data-role=\"header\" data-theme=\"b\"&gt;\n    &lt;h1&gt;Production Date&lt;/h1&gt;\n&lt;/div&gt;\n\n&lt;div data-role=\"content\" data-theme=\"b\"&gt;\n\n@using (Html.BeginForm()) { \n    &lt;div data-role=\"fieldcontainer\"&gt;\n        @Html.LabelFor(model =&gt; model.selectedSystem, \"Select a date for System \" + Model.selectedSystem)\n        @Html.HiddenFor(model =&gt; model.selectedSystem)\n        @Html.LabelFor(model =&gt; model.selectedDate, \"Date:\")\n        @Html.TextBoxFor(model =&gt; model.selectedDate, new { type = \"date\" })\n    &lt;/div&gt;\n\n    &lt;button type=\"submit\" data-theme=\"b\"&gt;Select&lt;/button&gt;\n}\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is the page source for the rendered page:</p>\n\n<pre><code>    &lt;div data-role=\"page\" id=\"mainpage\" data-theme=\"b\"&gt;\n    &lt;div data-role=\"header\" data-theme=\"b\" data-position=\"fixed\"&gt;\n        &lt;center&gt;\n            &lt;a href=\"/Home/Main\"&gt;\n                &lt;img src=\"/mobileDemo/Images/company_header_logo_mobile.png\" border=\"0\" /&gt;&lt;/a&gt;\n        &lt;/center&gt;\n    &lt;/div&gt;\n    &lt;div style=\"text-align: center; padding-top: 5px\"&gt;\n        &lt;center&gt;\n            &lt;a href=\"/mobileDemo/Home/Main\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_home.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n            &lt;a href=\"/mobileDemo/Counts\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_prodcounts.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n            &lt;a href=\"/mobileDemo/Inventory\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_inventory.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n            &lt;a href=\"/mobileDemo/Vehicle\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_vehicle.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n            &lt;a href=\"/mobileDemo/SSAR\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_ssar.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n            &lt;a href=\"/mobileDemo/STAR\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_star.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n            &lt;a href=\"/mobileDemo/EXECDASH\"&gt;\n                &lt;img src=\"/mobileDemo/Images/menu_dashboard.png\" style=\"width: 40px\" border=\"0\" /&gt;&lt;/a&gt;\n        &lt;/center&gt;\n    &lt;/div&gt;\n    &lt;div style=\"padding-left: 20px; padding-top: 10px\"&gt;\n        &lt;strong&gt;Body Dashboard for System 1&lt;/strong&gt;\n    &lt;/div&gt;\n    &lt;div style=\"padding-right: 15px; padding-left: 15px; padding-top: 10px\"&gt;\n        &lt;a href=\"#popup\" data-role=\"button\" data-rel=\"dialog\" data-icon=\"gear\" data-iconpos=\"right\"\n            data-transition=\"pop\"&gt;11/7/2012&lt;/a&gt;\n        &lt;hr /&gt;\n        &lt;ul data-role=\"listview\" data-inset=\"true\"&gt;\n            &lt;li&gt;&lt;a href=\"/mobileDemo/ExecDash/BodyProd/1/11-07-2012\"&gt;Production&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/mobileDemo/ExecDash/BodyOEE?system=1&amp;amp;date=11-07-2012\"&gt;Body OEE&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/mobileDemo/ExecDash/BodyDKS?system=1&amp;amp;date=11-07-2012\"&gt;Doukie-Seisan\n                KPI&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/mobileDemo/ExecDash/BodyDT?system=1&amp;amp;date=11-07-2012\"&gt;Down Time&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n\n\n    \n        <h1>Production Date</h1>\n    \n\n    \n\n           \n                Select a date for System 1\n                \n                Date:\n                \n            \n            Select\n     \n\n\n\n<p>Also worth noting, I am passing a parameter to the view.  The URL looks like this:</p>\n\n<pre><code>http://internal-server/mobileDemo/ExecDash/Body/1\n</code></pre>\n\n<p>Which goes to this when the dialog IS being displayed is:</p>\n\n<pre><code>http://internal-server/mobileDemo/ExecDash/Body/1#&amp;ui-state=dialog\n</code></pre>\n\n<p>When is DOES NOT work (prior to refresh) on an iDevice, this is what is displayed when I hold down on the button and it gives me the OPEN/OPEN IN NEW TAB option:</p>\n\n<pre><code>http://internal-server/mobileDemo/ExecDash/Body/1#popup\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13288153,"title":"Validate fields based on RadioButton (MVC)","body":"<p>I have got some <strong>sign up form</strong> that has 2 otpions</p>\n\n<blockquote>\n  <ol>\n  <li>Personal</li>\n  <li>Company</li>\n  </ol>\n</blockquote>\n\n<p>Some of the fields for them are the same like Password, Username, Email and other are different.</p>\n\n<p>My question is which strategy of the MODEL we should implement in that case?</p>\n\n<p>Have we i.e. use 2 \"TABs\" and 1 button \"SUBMIT\" but in that case we have duplicated UI fields... And I don't understand how  the class MODEL should be in that case and how we have to validate it...</p>\n\n<p>Or...</p>\n\n<p>We need to use 2 buttons \"SUBMIT\" and use somehow 2 MODELS ....</p>\n\n<p>I know we can use if (code is following) but which MODEL we have need for it?</p>\n\n<pre><code>&lt;html&gt;\n...\n  &lt;body&gt; \n    &lt;div&gt;\n\n      &lt;form action=\"/SignUp/Personal\" method=\"post\"&gt;\n        &lt;input type=\"text\" name=\"username\" value=\"\" /&gt;\n        &lt;input type=\"text\" name=\"passowrd\" value=\"\" /&gt;\n        &lt;input type=\"submit\" name=\"signup\" value=\"SUBMIT\" /&gt;\n      &lt;/form&gt;\n\n\n      &lt;form action=\"/SignUp/Company\" method=\"post\"&gt;\n        &lt;input type=\"text\" name=\"username\" value=\"\" /&gt;\n        &lt;input type=\"text\" name=\"passowrd\" value=\"\" /&gt;\n        &lt;input type=\"submit\" name=\"signup\" value=\"SUBMIT\" /&gt;\n      &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Well I don't know which approach we can use...</p>\n\n<p>Any clue?</p>\n\n<p>Thank you!!!</p>\n"},{"tags":["asp.net-mvc","azure","asp-classic"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13292154,"title":"Azure website with 'updatable' classic asp scripts","body":"<p>A client is looking into redeveloping their classic asp website to MVC4 and hosting on Azure.\nThe problem is that they have a massive suite of classic asp reports that they would like to keep using. They will want to continue adding and amending the classic asp scripts more or less like they do at the moment - which is via ftp.</p>\n\n<p>I know that classic asp can be enabled within Azure. My issue is how in a multi-instance environment can a classic asp developer (with no .NET or Azure knowledge) upload new scripts to Azure without having to upload the whole Azure application. Could he possible upload to blob storage and I could pull the new scripts in to local storage? If that's possible can those scripts be made web accessible?</p>\n\n<p>Many Thanks,\nNeil</p>\n"},{"tags":["sql-server","asp.net-mvc","visual-studio-2010"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":4009,"score":6,"question_id":9003056,"title":"Create MVC4 Membership Database","body":"<p>Im farmiliar with aspnet_regsql.exe to create a membership database (it produces 11 tables)</p>\n\n<p>However, in my MVC4 project VS2010 created a Membership Database with just six tables (Applications, Memberships, Profiles, Roles, Users &amp; UsersInRoles)</p>\n\n<p>How can I create a database with this (new?) schema?</p>\n"},{"tags":["asp.net-mvc","visual-studio","entity-framework","projects-and-solutions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13290973,"title":"Splitting an Empty Solution into multiple projects","body":"<p>I created a Black Solution (Arhi) with a ASP.NET MVC 4 Internet project (Arhi.Core) and Class library project for data (Arhi.Data) where I'm storing my EDMX Model.</p>\n\n<p>I added a reference for Arhi.Data into Arhi.Core and I tried to add a Controller with a Model class from Arhi.Data (People entity) and I got this error.</p>\n\n<blockquote>\n  <p>'Unable to retrive metadata for 'Arhi.Core.People'. The specified\n  named connection is either not found in the configuration, not\n  inteneded to be used with the EntityClient provider, or not valid.'</p>\n</blockquote>\n\n<p><strong>Q</strong> : Why did I get this error ? Is my approach wrong / any recommendations?\nQ2 : If I want to add RDLC reports to my solution, should I also use a Class Library project ?</p>\n\n<p>Connection string from Arhi.Core</p>\n\n<pre><code>&lt;add name=\"DefaultConnection\" providerName=\"System.Data.SqlClient\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=aspnet-SalvamontMVC-20121108140556;Integrated Security=SSPI\" /&gt;\n</code></pre>\n\n<p>and Arhi.Data</p>\n\n<pre><code>&lt;add name=\"SalvamontEntities\" connectionString=\"metadata=res://*/ModelSalva.csdl|res://*/ModelSalva.ssdl|res://*/ModelSalva.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=www.arhimedes.ro,1433;initial catalog=Salvamont;persist security info=True;user id=sa;password=********;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13291196,"title":"Ajax call to controller method not passing parameter","body":"<p>I am trying to make an AJax call to a controller method the parameter is null no matter what I try.  I have followed all the similar SO posts but to no avail. Sorry if the answer is there, I cant find it.  The code I have is...</p>\n\n<p><strong>Ajax Call</strong></p>\n\n<pre><code>    var sguid = $(nTr).attr('id');\n    $.ajax({\n    url: \"/Dashboard/Reporting/GetBlacklistedSoftwareItems\",\n    type: 'POST',\n    dataType: 'json',\n    data: JSON.stringify({guid: sguid}),\n    statusCode: {\n        404: function() {\n    alert(\"page not found\");\n        }\n    },\n    success: function (data) {\n    //DO Something\n    },\n    error: function () {\n        alert(\"error\");\n    }\n});\n</code></pre>\n\n<p><strong>Controller Method</strong></p>\n\n<pre><code>public JsonResult GetBlacklistedSoftwareItems(string guid)\n{\n    List&lt;DeviceSoftware&gt; ldevice = new List&lt;DeviceSoftware&gt;();\n    Guid i = Guid.Parse(guid);\n    ReportMethods reportingMethods = new ReportMethods();\n    ldevice = reportingMethods.GetNonCompliantApplicationReport(CompanyId);\n\n    DeviceSoftware ds = ldevice.Find(x =&gt; x.Device.Guid == i);\n    List&lt;DeviceApplication&gt; da = new List&lt;DeviceApplication&gt;();\n    if (ds != null)\n    {\n        da = ds.DeviceApplications;\n    }\n\n    return Json(da, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>The method is being hit its just <code>guid</code> is alway <code>null</code>.  <code>sguid</code> does hold the data I am trying to pass. \nCan someone tell me what I am missing?</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13290855,"title":"open a view in new browser window using jquery","body":"<pre><code>     $(\".reportCategoryClass\").click(function (i) {\n                   var reportUrl;\n                   reportUrl = \"http://bi.mylcchonda.com/UMAP_BI_REPORTS_PROD\";\n                    window.open(\"/LLCReportRoute/LLCReportsPopUp?url=\" + reportUrl);\n                    // window.open(\"/ControllerName/ActionName?url=\" + reportUrl);\n                }\n});\n</code></pre>\n\n<p>window.open function opening window but in that page not found error is coming</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","jquery-plugins","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":2481,"score":0,"question_id":7366155,"title":"JQGrid and MVC Full Working Example","body":"<p>I would like to use JQ grid in my current MVC project but I'm running into quite a few problems trying to figure it out. I find the available documentation lacking if not missing and all the problems seem to focus on a single aspect such as getting data into the grid. Well I'm way beyond that point and I would love to see a fully functional example that does fetching data, sorting, paging, add, edit, delete and search all in one with MVC. Is there such an example anywhere on the web?</p>\n\n<p>Furthermore I would like to know if I can use data annotations in conjunction with JQ grid add/edit? From what I read so far it seems that I have to define new validation rules within JQ Grid declaration and that rules that I established on the model are being ignored. Is there a way to use model rules during JQ Grid CRUD operations? I was thinking along the way of making my own jquery dialog popup with appropriate partial view loaded once a row is selected and add/edit button is clicked. however I cannot find JQ grid event which is raised when Add button is clicked. It seems to force you into using their auto generated modal popup form...</p>\n\n<p>I'm not sure if all this makes any sense to any of you but any help would be appreciated. If anyone has a link to all JQ Grid events even that would be a big help... Thanks!</p>\n"},{"tags":["asp.net-mvc","html5","asp.net-mvc-4","html-helper","mvc-editor-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1109,"score":2,"question_id":11739152,"title":"MVC4 Project with HTML5 Semantic markup HtmlHelper.EditorFor uses HTML5 input types","body":"<p>I have a ASP.NET MVC4 project with HTML5 semantic markup enabled. When using <code>@Html.EditorFor(m =&gt; m.MyDateTimeField)</code> the output is an input with <code>type=\"datetime\"</code>. I want to be able to stop <code>EditorFor</code> from generating HTML5 markup. How can I do this?</p>\n\n<p>This is only a problem in Opera at the moment because other browsers (as far as I know) don't support <code>type=\"datetime\"</code>. I have a jQuery datepicker on the field so in Opera I get both the jQuery datepicker and the browser datepicker.</p>\n\n<p>I can fix using any of:<br>\na. Use js to change the input type<br>\nb. Use <code>Html.TextBoxFor(m =&gt; m.MyDateTimeField)</code><br>\nc. Use a custom editor template<br>\nd. Use modernizr to detect if datetime is supported and if so, don't use jQuery datapicker</p>\n\n<p><strong>The solution I want is to disable HTML5 generation in <code>HtmlHelper.EditorFor</code>. I want <code>HtmlHelper.EditorFor</code> to function the same way it would if I hadn't ticked the \"html5 semandtic markup\" checkbox on project creation.</strong></p>\n\n<p><strong>EDIT:</strong>\nAfter a bit more searching, I've come across the <code>DataTypeAttribute</code> which I can apply on my model fields to force them to be rendered as input <code>type=\"text\"</code> rather than the html5 match. This is a potential fix, but it is less than ideal. Surely there must be a switch somewhere to turn off html5 in <code>EditorFor</code> (and equivalent helpers)?</p>\n\n<p><strong>A bit more info:</strong>\nI have two projects. The first one was created with \"Html5 semantic markup\" on, the other without. The first one uses html5 input types when using <code>EditorFor</code>, the second does not. I need to stop the first project <code>EditorFor</code> behaving the way is does without removing the <code>EditorFor</code>. There must be a setting somewhere?</p>\n"},{"tags":["c#","jquery","asp.net-mvc","razor","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13157408,"title":"jqgrid scroll is not working when grouping is enable","body":"<p>I am working in \"jquery.jqGrid-4.4.1\" version of jqgrid. I have huge data to show in grid that's why I need dynamic loading on scroll. I set scroll to 1 its working fine without grouping. Following is the example of using scroll but grouping is set to false.</p>\n\n<pre><code>{\n....\nrownum: 30,\nscroll: 1,\ngrouping: false, \ngroupingView : { \n    groupField : ['BillTitle'],\n    groupColumnShow : [true], \n    groupText : ['&lt;b&gt;{0}&lt;/b&gt;'], \n    groupCollapse : false, \n    groupOrder: ['asc'], \n    groupSummary : [true], \n    groupDataSorted : true    \n   }, \n}\n</code></pre>\n\n<p>On the other end I need to use grouping of jqgrid, when I set grouping to true dynamic loading of scroll not working. Following is not working but I need both functionality.</p>\n\n<pre><code>{\n....\nrownum: 30,\nscroll: 1,\ngrouping: true, \ngroupingView : { \n    groupField : ['BillTitle'],\n    groupColumnShow : [true], \n    groupText : ['&lt;b&gt;{0}&lt;/b&gt;'], \n    groupCollapse : false, \n    groupOrder: ['asc'], \n    groupSummary : [true], \n    groupDataSorted : true    \n   }, \n}\n</code></pre>\n\n<p>Please help me. Your help should be highly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2085,"score":2,"question_id":5552670,"title":"The type or namespace name 'X' does not exist in the namespace 'Y' - in VS generated code","body":"<p>This is the weirdest error I have ever encountered.</p>\n\n<p>This MVC web project was working fine until today. It hasn't been worked on by anyone in a couple of weeks.</p>\n\n<p>Even though NOTHING has changed, simply running it now results in:</p>\n\n<pre><code>The type or namespace name 'ColourboxViewModel' does not exist in the namespace 'CMSModels.ViewModels'\n</code></pre>\n\n<p>(x5)</p>\n\n<pre><code>The type or namespace name 'Colourbox' does not exist in the namespace 'CMSModels' (are you missing an assembly reference?)\n</code></pre>\n\n<p>(x1)</p>\n\n<p>There is a reference to CMSModels in the project. Removing this reference gives me about 200 extra errors for each other class in the namespace, so I know it is working, but not for these two errors.</p>\n\n<p>This is the line of generated code which the error points to:</p>\n\n<pre><code>public class views_colorbox_index_aspx : System.Web.Mvc.ViewPage&lt;IEnumerable&lt;CMSModels.Colourbox&gt;&gt;, System.Web.SessionState.IRequiresSessionState, System.Web.IHttpHandler {\n...\npublic class views_colorbox_content_ascx : System.Web.Mvc.ViewUserControl&lt;CMSModels.ViewModels.ColourboxViewModel&gt; {\n</code></pre>\n\n<p>Intellisense is picking up the location of both CMSModels.ColourBox and CMSModels.ViewModels.ColourboxViewModel.</p>\n\n<p>I am completely stumped. Any help greatly appreciated as I am completely at a loss.</p>\n\n<hr>\n\n<p>OK I have found the issue - but not the solution. </p>\n\n<p>The class is defined as </p>\n\n<pre><code>public class ColourBoxViewModel\n</code></pre>\n\n<p>yet the generated code is looking for a class of 'ColourboxViewModel'. Note the lowercase B. Where does the auto-gen code get the names of classes from? Search in project reveals no mentions of it with a lowercase b. </p>\n\n<p>The issue is the same for the ColourBox class.</p>\n\n<hr>\n\n<p>Problem solved - and @František Žiačik you were correct. There was a folder which had been excluded from the project (which is why searching in entire project and within the views in visual studio found nothing) which contained the incorrectly typed inherit statement. The excluded folder was called ColorBox when originally created by outsourcers. This had been copied and renamed as ColourBox by another dev on the team who decided to, and I quote, 'spell everything correctly'. Said dev is now only allowed to code using a Speak n' Spell.</p>\n"},{"tags":["asp.net-mvc","highcharts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13291129,"title":"highcharts example for using data from database with mvc","body":"<p>Does anyone have a simple example of populating a Highchart with data from a MS SQL DB using DotNet.Highcarts?</p>\n\n<p>I have the demo working with static data</p>\n\n<pre><code>Highcharts chart = new Highcharts(\"chart\")\n        .SetCredits(new Credits { Enabled = false })\n        .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column })\n        .SetTitle(new Title { Text = \"Membership Overview\" })\n        .SetXAxis(new XAxis { Categories = new[] { \"Paid Members\", \"Active Members\", \"Retained Members\", \"New Members\", \"Lapsed Members\" } })\n        .SetYAxis(new YAxis\n        {\n            Min = 0,\n            Title = new YAxisTitle { Text = \"Total Members\" }\n        })\n        .SetTooltip(new Tooltip { Formatter = \"function() { return ''+ this.series.name +': '+ this.y +''; }\" })\n        .SetPlotOptions(new PlotOptions { Bar = new PlotOptionsBar { Stacking = Stackings.Normal } })\n        .SetSeries(new[]\n                   {\n                       new Series { Name = \"Total\", Data = new Data(new object[] { 441, 441, 22, 30, 610 }) }\n                    });\n</code></pre>\n\n<p>How can I change the Series to accept data from my DB?</p>\n\n<p>Assuming I need to connect to DB like so:</p>\n\n<pre><code>var newcustomer = db.Customer;\n</code></pre>\n\n<p>Then do something like this:</p>\n\n<pre><code>new Series\n{\n    Name = \"Total\",\n    Data = new Data(newcustomer.Select(x =&gt; ............\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"},{"tags":["asp.net-mvc","web-config","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13290710,"title":"MVC4 web.config in area (subdirectory) not taking effect - appsettings missing","body":"<p>This question seems to have been asked quite a bit but none actually solve the problem for me. I have an ASP.NET MVC4 application with an area. Inside this area I have a web.config with overridden appsettings. These settings don't seem to be picked up when attempting to read them in a controller within the area.</p>\n\n<pre><code>-MyApp\n    -Areas\n        -MyArea\n            -Controllers\n                -MyController\n            -Web.config\n    -Web.config\n</code></pre>\n\n<p>In <code>MyApp\\Web.config</code> I have:</p>\n\n<pre><code>&lt;appSettings&gt;\n    &lt;add key=\"DefaultDisplayMode\" value=\"Configuration\" /&gt;\n&lt;/appSettings&gt;\n</code></pre>\n\n<p>In <code>MyApp\\Areas\\MyArea\\Web.config</code> I have:</p>\n\n<pre><code>&lt;appSettings&gt;\n    &lt;add key=\"DefaultDisplayMode\" value=\"Review\" /&gt;\n    &lt;add key=\"SubSetting\" value=\"Testing\" /&gt;\n&lt;/appSettings&gt;\n</code></pre>\n\n<p>In <code>MyController</code> if I query the app settings, I see:</p>\n\n<pre><code>DefaultDisplayMode: Configuration\n</code></pre>\n\n<p>I expect to see:</p>\n\n<pre><code>DefaultDisplayMode: Review\nSubSetting: Testing\n</code></pre>\n\n<p>I've tried with both:</p>\n\n<pre><code>System.Configuration.ConfigurationManager.AppSettings[\"...\"]\nSystem.Web.Configuration.WebConfigurationManager.AppSettings[\"...\"]\n</code></pre>\n\n<p>I even tried with the following (over the top) structure with no luck:</p>\n\n<pre><code>-MyApp\n    -Areas\n        -MyArea\n            -Controllers\n                -MyController\n                -Web.config\n            -Web.config\n    -Web.config\n</code></pre>\n\n<p>Does anybody know why my subdirectory appSettings aren't working?</p>\n"},{"tags":["asp.net-mvc","razor","infragistics"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13285125,"title":"Infragistics hidden column update","body":"<p>I'm using Infragistics on an Entity Framework code-first MVC project. I want to display a table with a hidden column (the ID) and it has to be editable. Here is what I've got so far:</p>\n\n<pre><code>&lt;table id=\"igTests\"&gt;&lt;/table&gt;\n@(Html.Infragistics().Grid&lt;BusinessModel.VO.TestVO&gt;().ID(\"igTests\")\n    .AutoGenerateColumns(false)\n    .Columns(column =&gt;\n    {\n        column.For(x =&gt; x.TestId).DataType(\"int\").HeaderText(\"id\");\n        column.For(x =&gt; x.TestNum).DataType(\"int\").HeaderText(\"Test num\");\n        column.For(x =&gt; x.Type).DataType(\"string\").HeaderText(\"Type\");\n        column.For(x =&gt; x.Nature).DataType(\"string\").HeaderText(\"Nature\");\n        column.For(x =&gt; x.TeamName).DataType(\"string\").HeaderText(\"Team\");\n        column.For(x =&gt; x.CreateDate).DataType(\"date\").HeaderText(\"Creation date\");\n    })\n    .Features(feature =&gt; {\n        feature.Sorting().CaseSensitive(true);\n        feature.Filtering().Mode(FilterMode.Simple);\n    })\n    .PrimaryKey(\"TestId\")\n    .DataSource(Model.TestsVO.AsQueryable())\n    .DataBind()\n    .Render())\n</code></pre>\n\n<p>This is what is displayed:\n<img src=\"http://i.stack.imgur.com/ioZAi.png\" alt=\"\"></p>\n\n<p>Now lets add the update feature (i know the readOnly is useless since we are not supposed to see it):</p>\n\n<pre><code>feature.Updating().EnableAddRow(true).EnableDeleteRow(true).EditMode(GridEditMode.Row).ColumnSettings(settings =&gt;\n            settings.ColumnSetting().ColumnKey(\"TestId\").ReadOnly(true)\n        );\n</code></pre>\n\n<p>And hide my ID-column:</p>\n\n<pre><code>column.For(x =&gt; x.TestId).DataType(\"int\").HeaderText(\"id\").Hidden(true);\n</code></pre>\n\n<p>Here is what i get. As you can see the table acts like my ID-column was visible.</p>\n\n<p><img src=\"http://i.stack.imgur.com/muTVe.png\" alt=\"\"></p>\n\n<p>This happened when I added the update feature. Do you have any idea on how I could fix the \"Add new row\" row acting like my column was visible? Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13290656,"title":"Is there any difference parsing different IEnumerable in razor?","body":"<p>When I pass (just for display values) to the viewbag an array or a list.</p>\n\n<p>Does it change something ( for the speed or memory ) when browsing the elements in a foreach with the razor engine?</p>\n"},{"tags":["asp.net-mvc","linq","entity-framework","tsql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13278891,"title":"Complex SQL to LINQ to populate Grid (Count items year by month) (MVC, EF Code First)","body":"<p>I have a grid that I want to fill with the following:</p>\n\n<p>It is tracking tickets that have been open each month for the last year. The grid is filtered by priority so I have a something like this:</p>\n\n<pre><code>| Mon | Critical | High | Tot |\n| Jan |    5     |  2   |  7  |\n| Feb |    2     |  3   |  5  |\n</code></pre>\n\n<p>This is my SQL statement:</p>\n\n<pre><code>SELECT\n    MONTH(CreateDate),\n    DATENAME(MONTH,m.CreateDate) AS 'Month',\n    SUM(CASE WHEN (m.PriorityId = 1) THEN 1 ELSE 0 END) AS 'Critical',\n    SUM(CASE WHEN (m.PriorityId = 2) THEN 1 ELSE 0 END) AS 'High',\n    SUM(CASE WHEN (m.PriorityId = 3) THEN 1 ELSE 0 END) AS 'Normal',\n    SUM(CASE WHEN (m.PriorityId = 4) THEN 1 ELSE 0 END) AS 'Low',\n    SUM(CASE WHEN (m.PriorityId = 5) THEN 1 ELSE 0 END) AS 'Not Ready',\n    Count(m.Id) AS Total\nFROM\n    [projects].[dbo].[tblMaintenanceTicket] m\nINNER JOIN\n    [projects].[dbo].[tblPriority] p\nON\n    p.Id = m.PriorityId\nWHERE\n    StatusId = 1\n    AND YEAR(CreateDate) = year(getdate())\nGROUP BY \n    MONTH(CreateDate),\n    DATENAME(MONTH,m.CreateDate)\nORDER BY\n    MONTH(CreateDate)\n</code></pre>\n\n<p>I am looking to convert this in VB LINQ but I am not sure this is the best method. I am also thinking calling a stored procedure, but I want to stay out of the DB really. I am using MVC 3 with the repository pattern, so calling my code is something like this output for JSON:</p>\n\n<pre><code>Dim tickets = ticketRepo.GetAll().Include(Function(p) p.Priority).ToArray()\n</code></pre>\n\n<p>Any assistance?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13290042,"title":"Why async controller needed in ASP.NET MVC?","body":"<p>I am a little bit new to ASP.NET MVC, after searching I still have one thing don't understand. Why async controller needed? Since every HTTP request will cause the sever to create a new instance of controller, so the server doesn't block any request, then why need an async controller?</p>\n"},{"tags":["c#","asp.net-mvc","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":11,"score":2,"question_id":13289169,"title":"How to conditionaly prevent validation on ContentPart field in Orchard CMS?","body":"<p>In a <code>ContentPart</code> some of fields defined by <code>[Required]</code> attribute. but in some situations i don't want validate them.</p>\n\n<p>For example in the <code>ContentPart</code> i have a Boolean field which named <code>DoNotValidate</code>, and when its value assigned with <code>True</code> i want to prevent the requirement validation on fields and does not take any requirement error.</p>\n"},{"tags":["c#","javascript","asp.net-mvc","json","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13289531,"title":"JSON calling C# class method","body":"<p>Trying to call a C# class from JSON.</p>\n\n<p>The JSON code is in my master.cshtml file, and looks like this:</p>\n\n<pre><code>var tips = $(\".validateTips\");\n\nfunction updateTips(t) {\n   tips\n   .text(t)\n   setTimeout(function () {\n      tips.removeClass(\"ui-state-highlight\", 1500);\n   }, 500);\n}\n\n$.ajax({\n   type: \"POST\",\n   url: \"/App_Code/LoginClass.cs/test\",\n   data: {},\n   contentType: \"application/json; charset=utf-8\",\n   datatype: \"JSON\",\n   success: function (msg) {\n      updateTips(msg.d);\n   }\n});\n</code></pre>\n\n<p>the C# code is in the file LoginClass.cs and looks like this:</p>\n\n<pre><code>public class LoginClass\n{\n    public static string test()\n    {\n         return \"hello\";\n    }\n}\n\nmy solution folders looks like this:\n+----App_Code\n|    |\n|    +---LoginClass.cs\n|\n+----Views\n|    |\n|    +---Shared\n|        |\n|        +---Master.cshtml\n|\n+----default.cshtml (Where the master layout page is connected to)\n</code></pre>\n\n<p>The updateTips doesn't </p>\n"},{"tags":["asp.net","asp.net-mvc","node.js","express"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":13290402,"title":"How to develop express.js application in Visual Studio?","body":"<p><strong>Is it possible to develop Express.js applications in visual studio?Can i install express.js via Nuget?Can I integrate Express.js with ASP.net MVC?\nIf it is possible please give me the step by step instructions.</strong></p>\n"},{"tags":["asp.net-mvc","odata","web-api","breeze"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13290053,"title":"Breezejs WebAPI OData vs Microsoft ASP.NET Web API OData","body":"<p>I started evaluating BreezeJS to use it with an ASP.NET WebAPI project. First I was happy to find a project that will expose my MVC data in a queryable way to OData and AJAX clients but then I run into a number of annoying things I don't know where to put, in terms of BreezeJS library architecture - strategic decision</p>\n\n<ul>\n<li>BreezeJS does not provide a service document (with the top level collections) </li>\n<li>Nor does it provide a standards based $metadata url</li>\n<li>It has an OData like metadata service that is only compatible with the BreezeJS client (good point its JSON formatted)</li>\n<li>The request/response JSON payload is not at all OData compliant</li>\n</ul>\n\n<p>So all in all, the only client I could use to consume my MVC project was BreezeJS.js not even datajs.js, on a way that is similar to OData but is not OData (standards compliant clients will not recognize it - imho why do something that resembles a standards but it not complies it). </p>\n\n<p>Now there is a Microsoft backed project called the Microsoft <a href=\"http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData/0.1.0-alpha-120815\" rel=\"nofollow\">ASP.NET Web API OData</a> package that does support all of the above mentioned scenarios but this is in alpha stage, albeit with a promising size of community buzz around it. I have tried it extensively and it worked like charm despite is early stage.</p>\n\n<p>So the question is obvious: should I decide in the favor of BreezeJS (they claim to be in rc) and lose standard compliancy, or take the risk of the Microsoft project early stage and stay on track with OData?</p>\n\n<p>My aim is to publish my MVC API to websites and mobile devices over AJAX.</p>\n\n<p>UPDATE: I found that MS has updated its <a href=\"http://www.nuget.org/packages/microsoft.aspnet.webapi.odata\" rel=\"nofollow\">WebAPI OData project recently</a></p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-2","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12917564,"title":"ASP.NET web.config authorization settings ignored in subfolders","body":"<p>I'm using asp.net mvc 2 and vs 2008.<br/></p>\n\n<p>It appeared to be rather long, sorry... I haven't found a way to make it shorter..</p>\n\n<p>I'm trying to make website with forms authorization. When i'm trying to restrict access to some pages, i'm using asp.net administration tool. There i create rule, for example, to deny access to anonimous users to whole web site. Administration tool, as expected, adds following section in the root web.config file:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;authorization&gt;\n   &lt;deny users=\"?\" /&gt;\n  &lt;/authorization&gt;\n</code></pre>\n\n<p>When i do same thing in some subfolder, as example %ApplicationRoot%/View/Protected, administration tool, as expected too, adds web.config file in mentioned subfolder, with following code:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;configuration&gt;\n&lt;system.web&gt;      \n    &lt;authorization&gt;\n        &lt;deny users=\"UserName\" /&gt;\n    &lt;/authorization&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p></p>\n\n<p>Prime difference between theese files is that root web.config authorisation section has some effect(generally speaking, it works as planned - denies all unauthenticated users from whole website). But subfolder web.config authorisation section have no effect at all. \nI found that then added to root config file, following code</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;location path=\"Protected\"&gt;\n  &lt;authorization&gt;\n    &lt;deny users=\"UserName\" /&gt;\n   &lt;/authorization&gt;\n &lt;/location&gt;\n</code></pre>\n\n<p>does the work greatly - it, as planned, denies %UserName% acces to all views, located in %ApplicationRoot%/View/Protected Folder.<br/>\nThis behavoir is simmilar with cassini and iis, i tried both.<br/></p>\n\n<p>The main problem is that i need kind administration tool to do the work, so i'm asking for any help with issue - why doesn't authorisation section works when web.config is located in subfolder?<br/></p>\n\n<p>P.S. I tried to place incorrect code in between <code>&lt;authorization&gt;</code> and <code>&lt;/authorization&gt;</code> in subfolder's web.config:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;authorization&gt;\n    asdfg\n   &lt;/authorization&gt;\n</code></pre>\n\n<p>No effect. Probably the whole section is ignored due to some issue?<br/></p>\n\n<p>P.P.S. Incorrect code out of the authorization section in the same file causes an error</p>\n"},{"tags":["c#",".net","asp.net-mvc","architecture","n-tier"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13278329,"title":"Business Layer Facade vs Mingled Business Components","body":"<p>I'm currently designing the foundation for a large application.  We are going with the traditional 3 tier system using EF in the data layer, plain jane c# classes in the business layer and MVC / WCF for the ui layer.  We have prototyped enough of the application to realize that this will work for us, however due to the complexity of the business requirements <strong>it will be common for some of the business components interact with one another.</strong></p>\n\n<p>Consider the following two business components:</p>\n\n<ul>\n<li>RetailManager - Deal with everything related to retail in the system</li>\n<li>CartManager - Deals with everything related to the shopping cart experience</li>\n</ul>\n\n<p>The two interact, for instance, during the checkout process when an item is purchased.  The inventory for the purchased item needs to be reduced.</p>\n\n<p>Here is my thought process so far:</p>\n\n<ol>\n<li><p>Let business components reference each other and ensure cyclical references never happen (CartManager references RetailManager, but never the other way).  \"Checkout\" would be a method on the CartManager class, and it would call a method on the RetailManager to adjust inventory.  While this will work, I'm not sure how well it will scale, and what the maintenance cost will be over time.  It doesn't feel 100% \"right\" to me.</p></li>\n<li><p>Create a Facade between the business components and the UI tier.  In this example, the Facade would have the checkout method and a reference to both managers.  I like this approach more than the first, however I know that not all of my business objects will need a Facade, and I don't want to create a ton of Facade classes just to have empty pass through methods.</p></li>\n</ol>\n\n<p>I'm leaning towards 2, with the caveat that I will only create facade classes where needed.  The UI tier will have access to both the Facade and the business layer components and will have to know when to use which (the only part I don't like about this solution).</p>\n\n<p>I've done a lot of research but haven't been able to come to come up with a solution that feels completely right.</p>\n\n<p>Any thoughts on using the facade pattern in this way, or other ideas to solve the problem are welcome.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13247207,"title":"How to access selected item from dropdown in asp.net mvc3","body":"<p>i am using asp.net mvc3 and i populate a create view using following model </p>\n\n<p><strong>Model</strong> </p>\n\n<pre><code>public class CategoryModel\n{\n    public  int Id { get; set; }\n    public string Name { get; set; }\n    public  string URL { get; set; }\n    public  string Description { get; set; }\n    public  string Logo { get; set; }\n    public  bool IsActive { get; set; }\n    public  bool isPopular { get; set; }\n    public IList&lt;Category&gt; Parentcategories { get; set; }\n\n}\n</code></pre>\n\n<p>In my create View i populate like this </p>\n\n<p><strong>View</strong></p>\n\n<pre><code> &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownList(\"parentcategories\", new SelectList(Model.Parentcategories.Select(c =&gt; c.Name), Model.Parentcategories.Select(c =&gt; c.Name)))\n        @Html.ValidationMessageFor(model =&gt; model.Parentcategories)\n    &lt;/div&gt;\n</code></pre>\n\n<p>now how can i access the selected item in my controller method </p>\n\n<p><strong>Method</strong></p>\n\n<pre><code> [HttpPost]\n    public ActionResult Create( CategoryModel model , HttpPostedFileBase file)\n    {\n     // \n    }\n</code></pre>\n\n<p>thanks,\nAhsan </p>\n"},{"tags":["asp.net-mvc","entity-framework","entity-framework-4","entity-framework-4.1","entity-relationship"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12720611,"title":"Cant Add controller which uses Class which is inherited from other class","body":"<p>I'm using Entity Framework and MVC3, and my problem is that I can't scaffold Controllers if the class inherits from another Class.</p>\n\n<p>Example:</p>\n\n<p>This is Base Class</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\n\n    namespace CRMEntities\n    {\n        public partial class Company\n        {\n            public int Id { get; set; }\n        }\n\n    }\n</code></pre>\n\n<p>This is Lead Class (Child)</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\n\nnamespace CRMEntities\n{\n    public partial class Lead : Company\n    {\n        public Lead()\n        {\n            this.Status = 1;\n            this.IsQualified = false;\n\n        }\n\n        public Nullable&lt;short&gt; Status { get; set; }\n        public Nullable&lt;bool&gt; IsQualified { get; set; }\n\n\n    }\n\n\n}\n</code></pre>\n\n<p>When I tried to add controller below error comes...</p>\n\n<p><img src=\"http://i.stack.imgur.com/o1uua.jpg\" alt=\"enter image description here\"></p>\n\n<p>Context Class COde</p>\n\n<pre><code>using System;\nusing System.Data.Entity;\nusing System.Data.Entity.Infrastructure;\n\nnamespace CRMEntities\n{\n    public partial class CRMWebContainer : DbContext\n    {\n        public CRMWebContainer()\n            : base(\"name=CRMWebContainer\")\n        {\n        }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            throw new UnintentionalCodeFirstException();\n        }\n\n        public DbSet&lt;Employee&gt; Employees { get; set; }\n        public DbSet&lt;Contact&gt; Contacts { get; set; }\n        public DbSet&lt;Product&gt; Products { get; set; }\n        public DbSet&lt;Location&gt; Locations { get; set; }\n        public DbSet&lt;Task&gt; Tasks { get; set; }\n        public DbSet&lt;EventInfo&gt; EventInfoes { get; set; }\n        public DbSet&lt;Opportunity&gt; Opportunities { get; set; }\n        public DbSet&lt;Comment&gt; Comments { get; set; }\n        public DbSet&lt;Document&gt; Documents { get; set; }\n        public DbSet&lt;LoginInformation&gt; LoginInformations { get; set; }\n        public DbSet&lt;CRMLog&gt; CRMLogs { get; set; }\n        public DbSet&lt;EntitySharing&gt; EntitySharings { get; set; }\n        public DbSet&lt;EntityFlagging&gt; EntityFlaggings { get; set; }\n        public DbSet&lt;EntityTagging&gt; EntityTaggings { get; set; }\n        public DbSet&lt;EntitySubscribing&gt; EntitySubscribings { get; set; }\n        public DbSet&lt;Compapny&gt; Compapnies { get; set; }\n    }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13289222,"title":"How to append an Html.Action to the jquery","body":"<p>can i add </p>\n\n<pre><code>$(\"#report\").html('Html.Action(\"ReportPage\", new { id = Model.GoalId })')\n</code></pre>\n\n<p>here the report is the id of the div where i want to place the result of the action ReportPage id is the parameter passing to the ReportPage actionresult </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","usercontrols"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13288981,"title":"Guidelines for designing ASP .Net MVC controls","body":"<p>I'm developing a big, ritch (lots of client-side js code) website and I'm thinking about standing out a set of reusable controls. And here comes the question: what is the best way to design these controls in MVC?\nYes, I know - there are partial views. But from my point of view this is not enough. What I want is first-class building blocks that I can reuse in my application.\nSay I have a control that consists of customer data: </p>\n\n<ul>\n<li>name</li>\n<li>surname</li>\n<li>email</li>\n<li>phone</li>\n</ul>\n\n<p>Of course I can develop a partial view and reuse it, but I need also other elements:</p>\n\n<ol>\n<li>model</li>\n<li>validation</li>\n<li>server side call that retrieves / changes the model (proper WCF calls to some application server)</li>\n<li>presentation logic (same control should be able to render as static text and also a form that allows data change)\nThese elements should be <strong>encaplsulated</strong> in one place (a control - component - assembly).</li>\n</ol>\n\n<p>Is my way of thinking reasonable or there are better design patterns in MVC?</p>\n\n<p>m.</p>\n"},{"tags":["sql-server","asp.net-mvc","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12973307,"title":"SimpleMembership with SQL Server Express database","body":"<p>I have recently discovered that ASP.NET MVC 4 uses SimpleMembership rather than the traditional ASP.NET Membership provider.</p>\n\n<p>I am looking to use SimpleMembership but I also wish to use an Sql Server express database (I will be using a 'real' Sql Server db later on).</p>\n\n<p>I am used to using aspnet_regsql to setup my sql server databases for application services and therefore inserting the necessary membership tables.</p>\n\n<p>However, this application will not setup a DB to work with SimpleMembership.</p>\n\n<p>Can anyone tell me how to do this?</p>\n"},{"tags":["jquery","asp.net-mvc","json","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13288242,"title":"Convert List of Objects to Json in ASP.NET MVC","body":"<p>I am working with <a href=\"http://www.jqplot.com/\" rel=\"nofollow\">JqPlot</a> with ASP.NET MVC 4.</p>\n\n<p>This is a sample data from <a href=\"http://www.jqplot.com/tests/date-axes.php\" rel=\"nofollow\">one of the examples</a> from Jqplot</p>\n\n<p><code>var line1 = [['2008-06-30 8:00AM', 4], ['2008-7-30 8:00AM', 6.5], ['2008-8-30 8:00AM', 5.7], ['2008-9-30 8:00AM', 9], ['2008-10-30 8:00AM', 8.2]];</code></p>\n\n<p>the first value in the pair is DateTime and other is value.</p>\n\n<p>Now I am trying to get value <strong>like this</strong> from controller instead, I am using <strong>Web Api</strong> Controller</p>\n\n<p>my action is as follows</p>\n\n<pre><code>public List&lt;Stats&gt; GetGraphData()\n{\n    var stats = new List&lt;Stats&gt;\n                    {\n                        new Stats {Date = DateTime.Now, Value = 4},\n                        new Stats {Date = DateTime.Now.AddMonths(1), Value = 11},\n                        new Stats {Date = DateTime.Now.AddMonths(2), Value = 5},\n                        new Stats {Date = DateTime.Now.AddMonths(3), Value = 7},\n                    };\n    return stats;\n}\n</code></pre>\n\n<p>but the value that returned is</p>\n\n<blockquote>\n  <p>[Object { Date= \"2012-11-08T16:52:04.5047592+05:30\",  Value=4}, [Object { Date=\"2012-11-08T16:52:04.5047592+05:30\",  Value=4}, ...</p>\n</blockquote>\n\n<p>So I decided to try <strong>JSON.stringify()</strong> on it which gave the following...</p>\n\n<blockquote>\n  <p>[{\"Date\":\"2012-11-08T16:52:04.5047592+05:30\",\"Value\":4},{\"Date\":\"2012-12-08T16:52:04.5047592+05:30\",\"Value\":11},{\"Date\":\"2013-01-08T16:52:04.5047592+05:30\",\"Value\":5},{\"Date\":\"2013-02-08T16:52:04.5047592+05:30\",\"Value\":7}]</p>\n</blockquote>\n\n<p>How do I get the format like the one shown below ?\n<code>[['2008-06-30 8:00AM', 4], ['2008-7-30 8:00AM', 6.5], ['2008-8-30 8:00AM', 5.7], ['2008-9-30 8:00AM', 9], ['2008-10-30 8:00AM', 8.2]];</code></p>\n\n<p>Please help me on this.</p>\n\n<p><em>Note : Please feel free to edit the Title of my question, I could'nt think of anything else :P</em></p>\n"},{"tags":["asp.net-mvc","structuremap","signalr","lifetime","idbconnection"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13288855,"title":"Managing injected IDbConnection lifetime and SignalR hubs","body":"<p>StructureMap injects an open <code>IDbConnection</code> into several of the services in my ASP.NET MVC application. These database connections are all closed as soon as the <code>EndRequest</code> event is triggered by calling <code>ObjectFactory.ReleaseAndDisposeAllHttpScopedObjects();</code> with a delegate defined in Global.asax.cs on the <code>EndRequest</code> event.</p>\n\n<p>Problem is, I inject some of these services into my SignalR hubs, which stay active and keep my connections open, eventually saturating the connection pool.</p>\n\n<p>How do I manage the lifetime of these SignalR database connections with StructureMap without saturating the database connection pool?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13288810,"title":"Different default routes for different roles","body":"<p>Is it possible to create a different default route for a different user role?</p>\n\n<p>e.g.</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n        {\n            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n            );\n\n            routes.MapRoute(\n                \"Admin\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"totalrewardstatement\", action = \"Details\", id = UrlParameter.Optional } // Parameter defaults\n            );\n\n        }\n</code></pre>\n\n<p>Have the default route above for normal users but use the admin one if an admin user logs in?</p>\n"}]}
{"total":44782,"page":2,"pagesize":100,"questions":[{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13176080,"title":"Generate unobtrusive validators for a class with asp.net mvc?","body":"<p>I want to create a page to add, edit and delete a collection of objects. I want to do the add/edit/delete operations with javascript. Right now, I have the following HTML:</p>\n\n<pre><code>&lt;table class=\"table table-striped\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Name&lt;/td&gt;\n            &lt;td&gt;Number&lt;/td&gt;\n            &lt;td&gt;Country&lt;/td&gt;\n            &lt;td&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    @foreach(var n in Model)\n    {\n        &lt;tr&gt;\n            &lt;td class=\"name\"&gt;@n.Name&lt;/td&gt;\n            &lt;td class=\"value\"&gt;@n.Value&lt;/td&gt;\n            &lt;td class=\"country-name\"&gt;@n.CountryName&lt;/td&gt;\n            &lt;td&gt;&lt;ahref=\"#\"&gt;Edit&lt;/a&gt; | &lt;a href=\"#\"&gt;Delete&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;div class=\"modal\"&gt;\n    &lt;form&gt;\n        &lt;label&gt;Name&lt;/label&gt;\n        &lt;input type=\"text\" /&gt;\n        &lt;label&gt;Value&lt;/label&gt;\n        &lt;input type=\"text /&gt;\n        &lt;button type=\"submit\"&gt;Save&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>If the user presses 'Edit', javascript code populates the <code>modal</code> div with the relevant data and displays it on the screen. When the user presses 'Submit', the data is submited with ajax, the modal dialog is hidden, and the table is updated with the new data.</p>\n\n<p>I want to validate the form before it is submitted. If possible, I would like to make use of the unobtrusive client validation system, so that changes to the data annotations of my model class are automatically reflected in the clientside code. In a more standard example, I could use the <code>@Html.EditorFor()</code> methods to generate the correct HTML, but this isn't possible here.</p>\n\n<p>Unobstrusive validation is controlled using attributes on the html elements, like this:</p>\n\n<pre><code>&lt;input data-val=\"true\" data-val-required=\"This field is required.\" id=\"Name\"\n    name=\"Name\" type=\"text\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-for=\"Name\"\n     data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Is it possible to generate the relevant HTML for a particular model class without referencing a particular instance of the class? Or is there some other method I can use?  </p>\n"},{"tags":["javascript","jquery","html","asp.net-mvc","document.ready"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13288548,"title":"ASP.net (Document).ready() failing to run","body":"<p>I have an ASP.net MVC 4 web application (Visual Basic). On the _Layout.vbhtml shared view I have a small bit of javascript at the very bottom of the code designed to hide a loading div and display the main page content once everything has loaded.</p>\n\n<p>Here is part of the .vbhtml file:</p>\n\n<pre><code>        &lt;!-- JQuery &amp; Javascript Loading --&gt;\n        @Scripts.Render(\"~/bundles/jquery\", \"~/bundles/jquerymain\", \"~/bundles/bootstrap\", \"~/bundles/lib\", \"~/bundles/gebo_dashboard\")\n        @RenderSection(\"scripts\", required:=False)\n\n        &lt;!-- Close loading page --&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            $(document).ready(function () {\n                //* show all elements &amp; remove preloader\n                alert(\"Hello Ready\");\n                setTimeout('$(\"html\").removeClass(\"js\")', 1000);\n            });\n        &lt;/script&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>And here is the produced html:</p>\n\n<pre><code>        &lt;!-- JQuery &amp; Javascript Loading --&gt;\n        &lt;script src=\"/Scripts/jquery-1.7.1.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.ui.touch-punch.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.ui.totop.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.easing.1.3.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.debouncedresize.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.cookie.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.qtip.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.colorbox.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.jBreadCrumb.1.1.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.actual.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.imagesloaded.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.wookmark.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.mediaTable.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.peity.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.flot.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.flot.pie.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/jquery/jquery.flot.resize.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/bootstrap/bootstrap.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/bootstrap/bootstrap.plugins.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/jquery-mousewheel.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/antiscroll.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/fullcalendar.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/ios-orientationchange-fix.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/list.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/list.paging.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/prettify.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/lib/sticky.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/gebo/gebo_common.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"/Scripts/gebo/gebo_dashboard.js\"&gt;&lt;/script&gt;\n\n        &lt;!-- Close loading page --&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            $(document).ready(function () {\n                //* show all elements &amp; remove preloader\n                alert(\"Hello Ready\");\n                setTimeout('$(\"html\").removeClass(\"js\")', 1000);\n            });\n        &lt;/script&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>When I load up the page and view it in a browser, the $(document).ready function never fires and so leaves the loading div visible.</p>\n\n<p>I have tested the script section by placing an alert outside of the $(document).ready function, both before and after and the alerts fire of exactly the way I'd expect them to. However the alert inside of the $(document).ready function never shows, indicating that the function never runs.</p>\n\n<p>I have also tried using the pageLoad() function with no luck too. </p>\n\n<p>Does anyone know why this refuses to work?</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework","skip-take"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":173,"score":2,"question_id":11103115,"title":"Take and Skip in SQL Server and EF","body":"<p>I have a ASP.NET MVC 4 application and I'm using EF. I have a table and a SQL view(the view displays rows from this table plus some unimportant data(~ 1000 records)) with ~ 400.000 records.\nWhen I display the data in EF it takes 25 seconds</p>\n\n<pre><code>    MVCAppEntities db = new MVCAppEntities();\n    public ActionResult Index()\n    {\n        return View(db.vvItem.OrderBy(n =&gt; n.Code).Skip(20).Take(40).ToList());\n    }\n</code></pre>\n\n<p>In SQL Server Management Studio this query takes 0-1 seconds</p>\n\n<pre><code>select  code, quantity, name, price\nfrom (\n    select *,\n           row_number() over(order by code) as rn\n    from vvItem       \n ) as T\nwhere T.rn between 20 and 40\n</code></pre>\n\n<p><strong>Q</strong> : Why is the EF query so slow ? should I make a SP to do the Skip and Take ?</p>\n"},{"tags":["c#","asp.net-mvc","html-helper","mvchtmlstring"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12635590,"title":"TagBuilder.MergeAttributes does not work","body":"<p>I am trying to make a HtmlHelper and i need to allow user to add it's own custom attributes to the html tag.</p>\n\n<p>I tryied to do this using TagBuilder class, but it seems that instead of merging the attributes, it just replaces them.</p>\n\n<p>This is what i did in C#</p>\n\n<pre><code>public static MvcHtmlString List(this HtmlHelperhelper, object htmlAttributes)\n{\n    var attributes = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes);\n\n    var tag = new TagBuilder(\"div\");\n    tag.AddCssClass(\"myClass\");\n    tag.MergeAttributes(attributes, false);\n\n    // tag class property has value \"myClass\", not \"myClass testClass\"\n\n    return new MvcHtmlString(\"&lt;div&gt;\");\n}\n</code></pre>\n\n<p>This is my view:</p>\n\n<pre><code>@Html.List(new { @class = \"testClass\" })\n</code></pre>\n\n<p>What am i doing wrong?</p>\n"},{"tags":["html","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12645359,"title":"Data grids in HTML","body":"<p>How can I add a data grid in a view which has sortable columns and lookups too. Is there an inbuilt HTML feature I can use to implement this?</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["c#","asp.net-mvc","razor","asp.net-mvc-4","ef-code-first"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13287539,"title":"ListBoxFor a many to many relationship","body":"<p>I Have to entities, and i'm using EF CodeFirst</p>\n\n<pre><code>public class DataContext : DbContext\n{\n    public DbSet&lt;Frame&gt; Frames { get; set; }\n    public DbSet&lt;GlassType&gt; GlassType { get; set; }\n}\n\npublic class Frame\n{\n    public int Id { get; set; }\n    public string size { get; set; }\n    public virtual ICollection&lt;Color&gt; Colors{ get; set; }\n}\n\npublic class Color\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Frame&gt; Frames { get; set; }\n}\n</code></pre>\n\n<p>And when i create or edit a frame, i want to select multiple colors with <code>@Html.ListBoxFor</code> or just ListBox. How do you guys do this?</p>\n\n<p><strong>Update: This is what i've tried allready</strong></p>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Create()\n{\n    ViewBag.List = new SelectList(db.Colors,\"Id\",\"Name\");\n    return View();\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@Html.ListBox(\"Colors\",(SelectList)ViewBag.List);\n@Html.ValidationMessageFor(model =&gt; model.Colors)\n</code></pre>\n\n<p>But when i submit it loads, and then this ModelState error is added:</p>\n\n<blockquote>\n  <p>The value '3' is invalid.</p>\n</blockquote>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13287917,"title":"How does ASP.NET MVC create controller instances","body":"<p>How does ASP.NET MVC create controller instances for request? does it create different instances for different requests? if that so, does it mean ViewBag cannot be shared between actions in a controller although it is a member in controller?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","twitter-bootstrap","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13287692,"title":"POST from edit/create partial views loaded into Twitter Bootstrap modal","body":"<p>I'm struggling with AJAX POST from the form that was loaded into Twitter Bootstrap modal dialog.</p>\n\n<p>Partial view form goes like this:</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    // fields\n    //  ... \n    // submit\n    &lt;input type=\"submit\" value=\"@ButtonsRes.button_save\" /&gt;\n}\n</code></pre>\n\n<p>Now this is being used in non AJAX editing with classic postbacks. Is it possible to use the same partial for AJAX functionality? Or should I abstract away the inputs into it's own partial view?</p>\n\n<p>Like this:</p>\n\n<pre><code>@using (Ajax.BeginForm())\n{\n    @Html.Partial(\"~/Views/Shared/ImageEditInputs.cshtml\")  \n    // but what to do with this one then?\n    &lt;input type=\"submit\" value=\"@ButtonsRes.button_save\" /&gt;\n}\n</code></pre>\n\n<p>I know how to load this into Bootstrap modal but few changes should be done on the fly:</p>\n\n<ul>\n<li>the buttons in Bootstrap modal should be placed in a special container (the modal footer),</li>\n<li>the AJAX POST should be done when clicking Save</li>\n</ul>\n\n<p>which would </p>\n\n<ol>\n<li>first, validate the form and keep the modal opened if not valid (display the errors of course)</li>\n<li>second, post and close the modal if everything went fine</li>\n<li>in the view that opened the modal, display some feedback information at the top that save was succesful.</li>\n</ol>\n\n<p>I'm mostly struggling where to put what JS code. So far I have this within the List view, which wires up the modals:</p>\n\n<pre><code>$(document).ready(function () {\n  $('.openModalDialog').click(function (event) {\n    event.preventDefault();\n    var url = $(this).attr('href');\n    $.get(url, function (data) {\n      $('#modalContent').html(data);\n      $('#modal').modal('show');\n    });\n  });\n});\n</code></pre>\n\n<p>The above code, however, doesn't take into the account the special Bootstrap modal content placeholders (header, content, footer).</p>\n\n<p>Is it possible to achieve what I want without having multiple partial views with the same inputs but different @using and without having to do hacks with moving the Submit button around?</p>\n\n<p>Maybe I should ask, is there a way to do progressive enhancement without having to modify my existing partials / keep only one copy of the edit form?</p>\n"},{"tags":["asp.net-mvc","entity-framework","dependency-injection","structuremap","resourceproviderfactory"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13286945,"title":"Inject with different scope when using DbContext with custom resource provider","body":"<p>In an application I have the following components (among others):</p>\n\n<ul>\n<li><code>MyDbContext</code> : Entity framework data access</li>\n<li><code>DBResourceProviderFactory</code> : A custom <code>ResourceProviderFactory</code> providing a custom <code>IResourceProvider</code> (called <code>DBResourceProvider</code>...)</li>\n<li>Other services</li>\n<li>StructureMap</li>\n</ul>\n\n<p>The custom resource provider is looking resources up in the db using <code>MyDbContext</code>, injected similarly as described in <a href=\"http://stackoverflow.com/a/10633095/63733\">this SO answer</a>.</p>\n\n<p>The <code>MyDbContext</code> is also used in various other services, and since it is a web application, I use StructureMaps <code>HttpContextScoped</code> method to limit the lifetime of <code>MyDbContext</code> to the lifetime of the request (see <a href=\"http://stackoverflow.com/q/6390608/63733\">an other SO question and its answer on this subject</a>):</p>\n\n<pre><code>x.For&lt;MyDbContext&gt;().HttpContextScoped();\n</code></pre>\n\n<p>However, it seems that the lifetime of an <code>IResourceProvider</code> is not limited to a single http request. Therefore, <code>DBResourceProvider</code> keeps hanging onto a <code>MyDbContext</code> reference which will be disposed after the first request.</p>\n\n<p><strong>How can I handle this <em>lifetime mismatch</em> - have StructureMap return a transient <code>MyDbContext</code> for <code>IDbResourceProvider</code> while returning HttpContext-scoped instances to all other services?</strong></p>\n\n<p>Do I need two different implementations to do that? A marker interface?\nOr is it a bad idea to use Entity Framework to look up localized resources in the first place (performance etc.)?</p>\n"},{"tags":["jquery","asp.net-mvc","show-hide"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13283122,"title":"MVC Control.Visible","body":"<p>i'm new in mvc and i want to show/hide a html control after a jquery ajax call. \n<br> In ASP.NET is simple like set Label.Visible = false.</p>\n\n<p>i have a razor view with something like this:</p>\n\n<pre><code>    @if (ViewBag.Show)\n    {\n        Html.Label(\"Test\");\n    }\n\n    &lt;input id=\"idClick\" type=\"button\" value=\"Click\"/&gt;\n</code></pre>\n\n<p>and a script with jquery to call an action</p>\n\n<pre><code>    $(\"#idClick\").click(function() {\n            $.ajax({\n                    url: '/Test/ShowLabel',\n                    type: 'GET',\n                    dataType: 'json'\n                    }\n                });\n</code></pre>\n\n<p>In my index view i set:</p>\n\n<pre><code>    ViewBag.Show = false;\n</code></pre>\n\n<p>in the action:</p>\n\n<pre><code>    public void ShowLabel()\n    {\n        ViewBag.Show = true;\n    }\n</code></pre>\n\n<p>but i can't get the label showed</p>\n\n<p>i want to avoid render the control and then apply a style to hide it</p>\n\n<p>How can i do this?</p>\n"},{"tags":["c#","asp.net-mvc","multithreading"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13281781,"title":"How to access a thread started initially when page is loaded, later in an ajax method call in c# mvc ?","body":"<p>I am using C# 5.0, VS 2012, MVC4. I have a scenario where I need to cache employees data and query the cache when performing a search on employees info.</p>\n\n<p>I am not displaying all employees initially but wanted to initiate a thread to cache all employees. So in index method when view is displayed, I am doing this</p>\n\n<pre><code>       //Starting a thread to load the cache if its null\n        if (HttpRuntime.Cache[\"AllEmployees\"] == null)\n        {\n            thCacheAllEmployees = new Thread(new ThreadStart(CacheAllEmployees));\n            thCacheAllEmployees.Name = \"CacheAllEmployees\";\n            thCacheAllEmployees.Start();\n        }\n</code></pre>\n\n<p>CacheAllEmployees is a separate method which will query LDAP and stores all employees in Cache. It will take about 15 secs for LDAP query. But within these first 15 secs after view is loaded and cache is not yet loaded, then when user starts typing in search box, I am making a ajax method call to GetFilteredEmployees action method. I want to access previously started thread, check if its alive, then to wait for that thread to complete so that I don't need to do a fresh LDAP query again.</p>\n\n<pre><code>      if (thCacheAllEmployees.IsAlive)\n        {\n            thCacheAllEmployees.Join();\n\n            if (HttpRuntime.Cache[\"AllEmployees\"] != null)\n                return (List&lt;CMSUser&gt;)HttpRuntime.Cache[\"AllEmployees\"];\n        }\n</code></pre>\n\n<p>But the problem is, when its ajax call seems like it will be a new Main Thread and doesn't know about thCacheAllEmployees. So thCacheAllEmployees will be null object. So I need to get the instance of this thread from currently all active threads in application.</p>\n\n<p>I can store thread id of thCacheAllEmployees when view is loaded first time in a session variable, but how can I access that thread from pool of threads when making ajax method call ?</p>\n\n<p>Is there any better way of doing this ? please give ur suggestions.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13284768,"title":"How I can use the Intranetwebapplication in mvc3","body":"<p>I want use asp.net mvc 3 and use intranet application but I don't have this option :( How I get the intranet application</p>\n\n<p><img src=\"http://i.stack.imgur.com/rMQBy.jpg\" alt=\"enter image description here\"></p>\n\n<p>and how I get mvc4 or it don't work on vs2010? </p>\n"},{"tags":["c#","asp.net-mvc","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13286924,"title":"Can User.Identity.IsAuthenticated within the Login method return true?","body":"<p>I have the following login method in my MVC project</p>\n\n<pre><code>    public ActionResult Login(LoginModel model, string returnUrl)\n    {\n\n\n        if (ModelState.IsValid)\n        {\n\n\n            if (_authenticationRepository.Login(model.UserName, model.Password))\n            {                    \n                var authenticationTicket = new FormsAuthenticationTicket(1, model.UserName, DateTime.Now,\n                                                                         DateTime.Now.AddMinutes(20),\n                                                                         model.RememberMe, \"\", \"/\");\n\n                var cookie = new HttpCookie(FormsAuthentication.FormsCookieName,\n                                                FormsAuthentication.Encrypt(authenticationTicket));\n                Response.Cookies.Add(cookie);\n                UserContext.CreateUserContext();\n                return RedirectToLocal(returnUrl);\n            }\n        }\n</code></pre>\n\n<p>UserContext.cs\nThis stores the user/permissions into a session.</p>\n\n<pre><code>    public static void CreateUserContext()\n    {\n        BuildUserContext(HttpContext.Current.User);\n    }\n\n    private static void BuildUserContext(IPrincipal principalUser)\n    {\n        if (!principalUser.Identity.IsAuthenticated) return;\n\n        var user = _userAccountsRepository.GetUserByUserName(principalUser.Identity.Name);\n\n        if (user == null) return;\n\n        var userContext = new UserContext { IsAuthenticated = true };\n\n        var siteUser = Mapper.Map(user);\n\n        userContext.SiteUser = siteUser;\n\n        HttpContext.Current.Session[\"UserContext\"] = userContext;\n    }\n</code></pre>\n\n<p>I am aware that IsAuthenticated will only become true after a redirect. So within my login() method, is it possible to ensure that principalUser.Identity.IsAuthenticated will return true?</p>\n\n<p>Or where else will be a good place to create the user context if not it the login method?</p>\n\n<p>What I'm trying to achieve is:</p>\n\n<ol>\n<li>user logs in</li>\n<li>if login is successful, query db for his roles/permissions and save them into a session so that I don't have to requery every time I'm checking if the user has access to a certain action.</li>\n</ol>\n"},{"tags":["jquery","asp.net-mvc","ipad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13286419,"title":"Valid Email Regular Expression for ipad","body":"<p>Hi I am using follwing regular expression to validate email address</p>\n\n<pre><code>@\"^[_a-z0-9-]+(\\.[_a-z0-9-]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$\"\n</code></pre>\n\n<p>This works fine on all browsers on the pc. But it is giving problem on ipad on safari. It is even showing valid email id as invalid email id in ipad. so please tell me which is best regular expression for valid email on browsers on pc as well as ipad. \nThanks  </p>\n"},{"tags":["c#","asp.net-mvc","mocking","moq","httpcontext"],"answer_count":6,"favorite_count":7,"up_vote_count":33,"down_vote_count":0,"view_count":12586,"score":33,"question_id":1452418,"title":"How do I mock the HttpContext in ASP.NET MVC using Moq?","body":"<pre><code>[TestMethod]\npublic void Home_Message_Display_Unknown_User_when_coockie_does_not_exist()\n{\n    var context = new Mock&lt;HttpContextBase&gt;();\n    var request = new Mock&lt;HttpRequestBase&gt;();\n    context\n        .Setup(c =&gt; c.Request)\n        .Returns(request.Object);\n    HomeController controller = new HomeController();\n\n    controller.HttpContext = context; //Here I am getting an error (read only).\n    ...\n }\n</code></pre>\n\n<p>my base controller has an overrride of the Initialize that get's this requestContext.  I am trying to pass this along but I am not doing something right. </p>\n\n<pre><code>protected override void Initialize(System.Web.Routing.RequestContext requestContext)\n{\n    base.Initialize(requestContext);\n}\n</code></pre>\n\n<p>Where can I get more information on mocking my RequestContext and HttpContext using Moq?  I am trying to mock cookies and the general context.</p>\n"},{"tags":["asp.net-mvc","entity-framework","security","architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13285799,"title":"ASP.MVC best security practices for control access to Entities","body":"<p>Let we have system with following entities:</p>\n\n<pre><code>public class Doctor\n{\n    public int ID { get; set; }\n    public int DepartmentID { get; set; }\n    public string Name { get; set; }\n    public ICollection&lt;Recipe&gt; Recipes { get; set; }\n}\n\npublic class Patient\n{\n    public int ID { get; set; }\n    public string Name { get; set; }\n    public ICollection&lt;Recipe&gt; Recipes { get; set; }\n}\n\npublic class Recipe\n{\n    public int ID { get; set; }\n    public int DoctorID { get; set; }\n    public int PatientID { get; set; }\n    public Doctor Doctor { get; set; }\n    public Patient Patient { get; set; }\n    public ICollection&lt;RecipeDetails&gt; Details { get; set; }\n}\n\npublic class RecipeDetails\n{\n    public int ID { get; set; }\n    public Guid SomeGuid { get; set; }\n    public double SomeValue { get; set; }\n}\n</code></pre>\n\n<p>Also we have requirements:</p>\n\n<ul>\n<li>Doctor should be able to edit his recipes</li>\n<li>Doctor should be able to see only recipes from doctors within his department</li>\n<li>Doctor should be able to perform search by available recipes</li>\n<li>Doctor should be able to generate reports by available recipes details</li>\n</ul>\n\n<p>For now I've implemented following security check:</p>\n\n<pre><code>public void ValidateAccess(Doctor doctor, Recipe aRecipe, EntityAction action)\n{\n    if (action == EntityAction.Modify &amp;&amp; doctor.ID == aRecipe.Doctor.ID)\n        return;\n    if (action == EntityAction.Read &amp;&amp; doctor.DepartmentID == aRecipe.Doctor.DepartmentID)\n        return\n    throw new SecurityException();\n}\n</code></pre>\n\n<p>That works perfect for simple methods when i have receipe entity, I can easy validate access by caling this method at the begining of my logic method.</p>\n\n<p>But now I have problem, this solution won't work for search and reporting when I don't have exact entity but have some statistics on them.</p>\n\n<p>Lets imagine that I want to generate report for patients with name \"aName\" that have receipes with component \"someGuid\", I will have some query with 2 criterias :</p>\n\n<pre><code>var res = RecipeRepository.Query(r =&gt; aName.Contains(r.Patient.Name)).SelectMany(r =&gt; r.Details).Where(d =&gt; d.SomeGuid == someGuid).Sum(d =&gt; d.SomeValue);\n</code></pre>\n\n<p>This query is not correct, it will display statistics for all recipes, including those which should be hidden.\nTo fix that, we should add our access condition to our query: </p>\n\n<pre><code>currentDoctor.DepartmentID == r.Doctor.DepartmentID\n</code></pre>\n\n<p>So now I have query:</p>\n\n<pre><code>var res = RecipeRepository.Query(r =&gt; aName.Contains(r.Patient.Name) &amp;&amp; currentDoctor.DepartmentID == r.Doctor.DepartmentID).SelectMany(r =&gt; r.Details).Where(d =&gt; d.SomeGuid == someGuid).Sum(d =&gt; d.SomeValue);\n</code></pre>\n\n<p>The problem is that I should add this part to each query in the system that makes any calculations on receipes.</p>\n\n<p>What pattern or practice could be applied to make this solution easier and prevent copy-pasting expression to each query?\nI'll appreciate your answers and advices.</p>\n"},{"tags":["asp.net-mvc","httphandler","ashx"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13284178,"title":"How to call controller action dynamically from HTTPHandler?","body":"<p>In my MVC Web application, I have created two controllers. One for handling requests coming from Mobile devices and other for handling desktop browsers.</p>\n\n<p>I am trying to call the appropriate controller's action depending on who is calling the application. This check will be done by a custom logic which is ready with me.</p>\n\n<p>What will be the best approach to achive this dynamic redirection to controller? My approach is to use one HTTPHandler (ashx), in which I will check the source and then give a call to appropriate controller. The device/browser will hit the URL pointing to this ashx file.</p>\n\n<p>I tried somehting like this..... in ProcessRequest() method of my handler.</p>\n\n<pre><code> &lt;source checking logic&gt;\n ...\n ...\n var webRequest = HttpWebRequest.Create(MyFinalURL);\n var response = webRequest.GetResponse();\n context.Response.Write(response);\n</code></pre>\n\n<p>Will this be the best approach? or is there any better alternative? Will HTTPModule also work for this prupose? Please suggest.</p>\n\n<p>Also how will I redirect to controller action from ashx file?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":9,"score":-1,"question_id":13285291,"title":"function filtering in mvc","body":"<p>I want to filter function but i have only functionId not a name. So I used the following code. But it shows like syntax is not correct. Any one please correct this code. </p>\n\n<p>My code is</p>\n\n<pre><code>(string.IsNullOrEmpty(function) ||\n                       job.FunctionId.HasValue || job.GetFunction(job.FunctionId.Value).Name) &amp;&amp;\n</code></pre>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13286132,"title":"Supplying byte[] and text data with [FromBody]","body":"<p>I'm having trouble using <code>[FromBody]</code> when supplying <code>byte[]</code> data with text data.</p>\n\n<p>I have the following server code:</p>\n\n<pre><code>public class RequestContent\n{\n    public string text { get; set; }\n    public byte[] data {get; set; }\n}\n\npublic HttpResponseMessage Post([FromBody]RequestContent content)\n{\n    ....\n</code></pre>\n\n<p>I am trying to populate the value of .data from a .NET desktop client using:</p>\n\n<pre><code>var postData = new List&lt;KeyValuePair&lt;string, string&gt;&gt;();\npostData.Add(new KeyValuePair&lt;string, string&gt;(\"text\", \"foobar\");\npostData.Add(new KeyValuePair&lt;string, string&gt;(\"data\", Convert.ToBase64String(File.ReadAllBytes(@\"foo.zip\"))));\n\nHttpContent content = new FormUrlEncodedContent(postData);\nvar result = client.PostAsync(url, content).Result;\n</code></pre>\n\n<p>However on the server side only the <code>content.text</code> gets set, the <code>content.data</code> is always a <code>byte[]</code> length = 1. I don't have to use <code>KeyValuePair</code> but I would rather not have to define my <code>RequestContent</code> class in the client application.</p>\n\n<p>I can't get the <code>text</code> from the Uri because it's long and I want to keep the Uri short and simple.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2147,"score":1,"question_id":6548608,"title":"\"The name 'HTML' does not exist in the current context\" in MVC 3 Views","body":"<p>I´m starting to use \"MVC 3\" but I´m facing some little problems. In my Views, when I code something like this:</p>\n\n<pre><code>@if(Request.IsAuthenticated) {\n    &lt;text&gt;Welcome &lt;b&gt;@Context.User.Identity.Name&lt;/b&gt;!\n    [ @Html.ActionLink(\"Log Off\", \"LogOff\", \"Account\") ]&lt;/text&gt;\n}\nelse {\n    @:[ @Html.ActionLink(\"Log On\", \"LogOn\", \"Account\") ]\n}\n</code></pre>\n\n<p>The objects like @Request and @Html is indicating an error: <code>The name 'HTML' does not exist in the current context</code>. </p>\n\n<p>The same occurs with @Context, @ViewBag, @Layout, @Url and others. </p>\n\n<p>See: </p>\n\n<p><img src=\"http://i56.tinypic.com/28s1smp.jpg\" alt=\"image\"></p>\n\n<p>But the code is correctly compiled with no errors. The problem is that I cannot use the Intellisense with theses objects in the Views. Is it normal? (I don´t think so). What could be happening?</p>\n\n<p>I have reinstalled the MVC 3 framework but the same still occurs.</p>\n\n<p>Note: this is a new project from scratch, not a MVC 2 migration. This occurs both with Razor engine and ASPX.</p>\n\n<p>This is the Web.Config in the Views folder:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.webPages.razor\" type=\"System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;section name=\"host\" type=\"System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n      &lt;section name=\"pages\" type=\"System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n\n  &lt;system.web.webPages.razor&gt;\n    &lt;host factoryType=\"System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;pages pageBaseType=\"System.Web.Mvc.WebViewPage\"&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n  &lt;/system.web.webPages.razor&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"false\" /&gt;\n  &lt;/appSettings&gt;\n\n  &lt;system.web&gt;\n    &lt;httpHandlers&gt;\n      &lt;add path=\"*\" verb=\"*\" type=\"System.Web.HttpNotFoundHandler\"/&gt;\n    &lt;/httpHandlers&gt;\n\n    &lt;!--\n        Enabling request validation in view pages would cause validation to occur\n        after the input has already been processed by the controller. By default\n        MVC performs request validation before a controller processes the input.\n        To change this behavior apply the ValidateInputAttribute to a\n        controller or action.\n    --&gt;\n    &lt;pages\n        validateRequest=\"false\"\n        pageParserFilterType=\"System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        pageBaseType=\"System.Web.Mvc.ViewPage, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        userControlBaseType=\"System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;controls&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" namespace=\"System.Web.Mvc\" tagPrefix=\"mvc\" /&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n\n    &lt;handlers&gt;\n      &lt;remove name=\"BlockViewHandler\"/&gt;\n      &lt;add name=\"BlockViewHandler\" path=\"*\" verb=\"*\" preCondition=\"integratedMode\" type=\"System.Web.HttpNotFoundHandler\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":8576,"score":7,"question_id":4617410,"title":"jQuery Datetime picker MVC3","body":"<p>I have in my Model this field</p>\n\n<pre><code>[DataType(DataType.DateTime)]\n    [Required(ErrorMessage = \"Expire is required\")]\n    public DateTime Expire\n    {\n      get;\n      set;\n    }\n</code></pre>\n\n<p>In My View</p>\n\n<pre><code>@Html.EditorFor(model =&gt; model.Expire))\n      @Html.ValidationMessageFor(model =&gt; model.Expire)\n</code></pre>\n\n<p>and I create DataTime EditorTemplates</p>\n\n<pre><code>@inherits System.Web.Mvc.WebViewPage&lt;System.DateTime&gt;\n@Html.TextBox(\"\", (Model.ToShortDateString()), new { @class = \"datePicker\" })\n&lt;script type='text/javascript'&gt;\n  $(document).ready(function () {\n    $(\".datePicker\").datepicker({\n      //      buttonImage: \"/content/images/calendar.gif\",\n      //      showOn: \"both\",\n      //      defaultDate: $(\"#calendar-inline\").attr('rel')\n      showAnim: 'slideDown',\n      dateFormat: 'dd/mm/yyyy'\n\n    });\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>when i try to Create new Item I have this error message</p>\n\n<blockquote>\n  <p>The model item passed into the\n  dictionary is null, but this\n  dictionary requires a non-null model\n  item of type 'System.DateTime'</p>\n</blockquote>\n\n<p>I try </p>\n\n<pre><code>Model.HasValue ? Model.Value.ToString(\"MM/dd/yyyy\") : DateTime.Today.ToShortDateString()\n</code></pre>\n\n<p>But i not have in Model Value check</p>\n"},{"tags":["asp.net-mvc","iis","http-status-code-401","form-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13279593,"title":"401 Unauthorized: Access is denied due to invalid credentials","body":"<p>I am using IIS Express to deploy MVC4 application. This website runs perfectly on same computer. But in Lan it gives me error 401. </p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/\" slidingExpiration=\"true\" timeout=\"20\"&gt;\n  &lt;/forms&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>In home controller </p>\n\n<pre><code>[HttpPost]\n[AllowAnonymous]        \n    public ActionResult Index(LoginModel model, string returnUrl)\n    {\n    }\n</code></pre>\n\n<p>I am starting IIS server from command prompt in Administrator mode.  IIS responds to the request with error <code>401</code>. </p>\n\n<p>Any clue??</p>\n"},{"tags":["asp.net-mvc","keyboard-shortcuts","visual-studio-2012"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":294,"score":2,"question_id":12173666,"title":"Shortcut keys not working in Visual Studio 2012","body":"<p>Having problem with the shortcuts for MVC specifically in VS2012.</p>\n\n<blockquote>\n  <p>The key combination (CTRL+M, CTRL+G) is bound to command (Go To View)\n  which is not currently available.</p>\n</blockquote>\n\n<p>But for example Refactor->Rename work.</p>\n\n<ul>\n<li>Disabling ReSharper doesn't help.</li>\n<li>It works in VS2010, but not in VS2012.</li>\n</ul>\n\n<p>I have looked at the related question: <a href=\"http://stackoverflow.com/questions/4342501/shortcut-keys-not-working-visual-studio-2010-with-asp-net-mvc-3-rc1\">Shortcut keys not working (Visual Studio 2010 with ASP.NET MVC 3 RC1)</a></p>\n\n<p>Had that problem previously in VS2010, and the accepted answer solved that problem.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","wcf","http"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":147,"score":0,"question_id":13063983,"title":"Run asynchronous operation in one controller method and get that operation's result in another","body":"<p>I have a long running operation you might read in couple of my another questions (for your reference here is <a href=\"http://stackoverflow.com/questions/12836060/articles-on-how-to-organize-background-queue-operations\">first</a> and <a href=\"http://stackoverflow.com/questions/12900382/how-to-determine-progress-of-pending-operations-in-queue\">second</a>). </p>\n\n<p>In the beginning of whole deal, project expose a form in which user should specify all necessary information about XML file and upload XML file itself. In that method all user input data caught and went to an WCF service that handles such king of files. Controller got only task id of such processing. \nThen user got redirected to progress bar page and periodically retrieves status of task completeness, refreshes the progress bar.</p>\n\n<p>So here is my issue comes. When processing of XML file if over, how can I get results back and show them to user?</p>\n\n<p>I know that HTTP is stateless protocol but there is cookie mechanism that could help in this situation. Of course, I may just save processing results to some temporary place, like a static class in WCF server, but there is a high load on service, so it will eat all of supplied memory.</p>\n\n<p>In other words, I would like to pass task to WCF service (using netNamedPipeBinding) and receive results back as fast as it really possible. I want to escape temporary saving result to some buffer and wait until client will gather it back.</p>\n\n<hr>\n\n<p>As far as I go is using temporary buffer not on service side but at client's:</p>\n\n<pre><code>using (XmlProcessingServiceClient client = new XmlProcessingServiceClient())\n{\n    client.AnalyzeXmlAsync(new Task { fileName = filePath, id = tid });\n    client.AnalyzeXmlCompleted += (sender, e) =&gt;\n    {\n        System.Web.HttpContext.Current.Application.Lock();\n        // here is I just use single place for all clients. I know it is not right, it is just for illustrating purposes.\n        System.Web.HttpContext.Current.Application[\"Result\"] = e;\n        System.Web.HttpContext.Current.Application.UnLock();\n    };\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","nhibernate","nhibernate-queryover"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13282087,"title":"Order by date column in nhibernate is working as order by string","body":"<p>I am trying to sorty data using date column but the column is sorting as string not as date. how to solve this problem?</p>\n\n<p>Code:</p>\n\n<pre><code>var projection = Projections.SqlFunction(\"lower\", NHibernateUtil.String,Projections.Property(\"datecolumn1\"));\n\nif(order=\"desc\")queryOver = queryOver.OrderBy(projection).Desc;\nelse queryOver = queryOver.OrderBy(projection).Asc;\n</code></pre>\n\n<p>Result:(sorted by ascending)</p>\n\n<pre><code>8/7/2012 5:34 AM\n11/7/2012 7:21 AM\n11/7/2012 7:21 AM\n11/7/2012 7:21 AM\n11/7/2012 7:21 AM\n8/27/2012 9:35 AM\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","data","dataannotations"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":4029,"score":5,"question_id":3345348,"title":"How to specify a min but no max decimal using the range data annotation attribute?","body":"<p>I would like to specify that a decimal field for a price must be >= 0 but I don't really want to impose a max value.</p>\n\n<p>Here's what I have so far...I'm not sure what the correct way to do this is.</p>\n\n<pre><code>[Range(typeof(decimal), \"0\", \"??\"] public decimal Price { get; set; }\n</code></pre>\n"},{"tags":["asp.net-mvc","reporting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13281629,"title":"Are there any reporting tools that provide an MVC 3 ReportViewer out of the box?","body":"<p>As stated in the title. Most of what I've seen involve workarounds to get their native Webforms report viwers into the MVC workspace. Are there any, free or paid, that provide this?</p>\n"},{"tags":["asp.net-mvc","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13089387,"title":"Can I map a database column description to the DisplayNameAttribute?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7950917/entity-framework-4-1-dynamically-retrieve-summary-for-scalar-properties-from-dat\">Entity Framework 4.1 dynamically retrieve summary for scalar properties from database table column description</a>  </p>\n</blockquote>\n\n\n\n<p>Is it possible to map the Column Description (the extended property <code>MS_Description</code> in the database ) to the <code>DisplayNameAttribute</code> (the name used by <code>@Html.DisplayNameFor</code>) ?</p>\n\n<p>I don't want to use Data Annotations, as I would like the DBA to set the proper column descriptions in the database. </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13272019,"title":"Single click on button not working but double click does the work","body":"<p>Here is my html code</p>\n\n<pre><code>&lt;form runat=\"server\"&gt;\n    Hello, i'm login page\n    Enter Name   &lt;asp:TextBox ID=\"txtName\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n    &lt;input type=\"submit\" value=\"PressMe\" onclick=\"location.href='&lt;%: Url.Action(\"EnterLogin\", \"LoginForm\") %&gt;'\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here is my controller code</p>\n\n<pre><code>public class LoginFormController : Controller\n{\n    public ActionResult ShowLogin()\n    {\n        return View();\n    }\n\n    public ActionResult EnterLogin()\n    {\n        ViewData[\"Name\"] = Convert.ToString(Request.Form[\"txtName\"]);\n        return View(\"EnterLogin\");\n    }\n}\n</code></pre>\n\n<p>On clicking <strong>PressMe</strong> button the expected output is to display Enter Login View but it doesn't.If i double click on the button then it works fine.\nAny reason for single click not to work??</p>\n"},{"tags":["asp.net-mvc","msbuild","tfs2010","msdeploy","continuous-deployment"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13274442,"title":"TFS2010 msbuild msdeploy Unauthorized Error","body":"<p>Appreciate any guidance or advice on below issue</p>\n\n<p>I am using TFS2010 and below msbuild parameters in order to deploy build on staging server (continous deployment). I have done all necessery configuration such as</p>\n\n<blockquote>\n  <p>Management Service Delegation </p>\n  \n  <p>Management Service </p>\n  \n  <p>Filesystem Permission</p>\n  \n  <p>IIS Manager Permission</p>\n</blockquote>\n\n<p>msbuild parameters</p>\n\n<pre><code>/p:validatearchitecture=true  /p:AllowUntrustedCertificate=True /p:DeployOnbuild=True \n/p:DeployTarget=MsDeployPublish /p:MSDeployPublishMethod=WMSVC \n/p:MsDeployServiceUrl=stagingserver\n/p:DeployIISAppPath=\"cddemo\" /p:UserName=username /p:Password=password \n/p:Outdir=\"D:\\Demo\\Demo\\\\\" \n</code></pre>\n\n<p>Having below error. how to resolve it? and How can I remove https from link and use verbosity parameter to see detailed error. </p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\MSBuild\\Microsoft\\VisualStudio\\v10.0\n  \\Web\\Microsoft.Web.Publishing.targets (3588): Web deployment task\n  failed.(Remote agent (URL \n  <code>https://stagingserver:8172/msdeploy.axd?site=cddemo</code>) could not be\n  contacted.  Make sure the remote agent service is installed and\n  started on the target computer.) Make sure the site name, user name,\n  and password are correct. If the issue is not resolved, please contact\n  your local or server administrator. Error details: Remote agent (URL\n  <code>https://stagingserver:8172/msdeploy.axd?site=cddemo</code>) could not be\n  contacted.  Make sure the remote agent service is installed and\n  started on the target computer. An unsupported response was received.\n  The response header 'MSDeploy.Response' was '' but 'v1' was expected.\n  <strong>The remote server returned an error: (401) Unauthorized.</strong></p>\n</blockquote>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","attributes"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13271741,"title":"Progress bar on synchronious operations in Mvc 3","body":"<p>I have long synchronious calls to MainFrame in my Mvc 3 application \nI'd like to create a custom Attribute that will decorate My controller actions which I know can take long time. And if controller is decorated with this attribute I need to render \"loading message\"</p>\n\n<p>Any Ideas please , could it be achieved ?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13255107,"title":"Can I modify MVC viewmodel before passing it into a Partial","body":"<p>If I have a model passed onto Index.cshtml </p>\n\n<p>Can I modify a property on the model inside of a code block in Index.cshtml and then pass modified model into Html.Partial(\"_MyView\", Model)</p>\n\n<pre><code>@model.Name = \"Joe\"\n\n@Html.Partial(\"_MyView\", Model)\n\n@model.Name = \"Ann\"\n\n@Html.Partial(\"_MyView\", Model)\n</code></pre>\n"},{"tags":["asp.net-mvc","structuremap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13253195,"title":"Configuring Structure Map on Application_BeginRequest in Global.asax for specific user","body":"<p>I have a Foo and Foo1 classes which both implements IFoo. Default mapping for IFoo is Foo in StructureMap. But, for some users I would like to map IFoo to Foo1. I have a <code>if</code> block on <code>Application_BeginRequest</code> in <em><code>Global.asax</code></em> that maps IFoo to Foo1 for the specific user. But, whenever I do this all the user start to using Foo1 instead of Foo.</p>\n\n<p>I tried all the lifecycle such as <code>HttpContextLifecycle</code>, <code>UniquePerRequestLifecycle</code>, <code>HttpContextLifecycle</code>, but did not work.</p>\n\n<p>Here is the code I use:</p>\n\n<pre><code>  StructureMap.ObjectFactory.Configure(config =&gt;\n  config.For&lt;IFoo&gt;()\n  .LifecycleIs(new StructureMap.Pipeline.HttpContextLifecycle())\n  .Use(Foo1)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13249963,"title":"jqGrid navigation doesn't respond","body":"<p>I am working in MVC3 and using jqGrid 4.4.1, I am new to jqGrid so this is basic question.</p>\n\n<p>I have successfully geting data to Grid and showing first site. But when I click next page, I don't get any response.</p>\n\n<pre><code>var myMeasurementsGrid = $(\"#gridMeasurementsTableView\" + randomId);\n\nmyMeasurementsGrid.jqGrid({\n        url: '/DataMonitor/CreateMeasurementTableView/',\n        datatype: \"json\",\n        mtype: 'POST',\n        postData: { \"mrpId\": dataToSend.mrpId, \"chartId\": dataToSend.chartId, \"mrpStartTime\": dataToSend.mrpFilter.FilterTimeWindow.StartTimeStamp, \"mrpEndTime\": dataToSend.mrpFilter.FilterTimeWindow.EndTimestamp },\n        jsonReader : {\n            root: \"data\",\n            page: \"Page\",\n            total: \"total\",\n            records: \"records\",  \n            repeatitems: false,\n            cell: \"cell\",\n            id: \"id\" \n           },  \n        colNames: ['Date', 'Value'],\n        colModel: [\n            { name: 'Timestamp', index: 'Timestamp', width: 260, \n                formatter: function (cellvalue, options, rowObject) {\n                        return new Date(parseInt(cellvalue.substr(6, cellvalue.length - 8), 10));\n                    }  \n            },\n            { name: 'Value', index: 'Value', width: 160, align: 'center' }  \n        ],\n        loadui: \"disable\",\n        loadtext: \"Loading\",\n        viewrecords: true,\n        gridview: true,\n        rowNum: 10,\n        height: \"100%\",\n        caption: \"Measurements2\",\n        pager: $(\"#gridpager\" + randomId),\n        loadonce: true,\n        sortname: 'Timestamp',\n        sortorder: \"asc\",\n        rowList: [10, 50, 100]\n    });\n</code></pre>\n\n<p>Function behind is:</p>\n\n<pre><code>     [HttpPost]\n        public ActionResult CreateMeasurementTableView(string sidx, string sord, int page, int rows, int mrpId, string divId, string chartId, DateTime mrpStartTime, DateTime mrpEndTime)\n        {\n... here is my code, for getting data\n\nreturn Json(new\n            {\n                total = listaAvailableMeasurements.Count(),\n                records = listaAvailableMeasurements.Count(),\n                data = listaAvailableMeasurements,\n                Page = page,\n                SortColumn = sidx,\n                SortOrder = sord\n            });\n</code></pre>\n\n<p>does anyone have an idea, why is not navigation responding?</p>\n\n<p>br,\nJan</p>\n"},{"tags":["xml","asp.net-mvc","redirect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13257949,"title":"mvc redirect after rss creation","body":"<p>I have a controller Action that takes the model from my view and saves the data to the database. </p>\n\n<p>I then grab a list of items from my database and create an rss feed (.xml).</p>\n\n<p>Once that is created, I want to redirect the user back to a different page, but instead of redirecting, I am getting \n'This XML file does not appear to have any style information associated with it. The document tree is shown below.' from my browser.</p>\n\n<p>It seems to me what is happening is it is trying pass the xml file on the redirect?? which I don't want, I just want to redirect to a new page.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    'public ActionResult EditItem(int Id, FormCollection form)\n    '{ // UpdateModel \n    '  // Save item to db\n    '  \n    '  CreateRss();\n    '  \n    '  return Redirect(\"/ListItems\");\n    '}\n\n    'private void CreateRSS()\n    '{\n    ' Response.Clear()\n    ' Response.ContentType = \"text/xml\";\n    ' XmlTextWriter feedWriter = new XmlTextWriter(path, Encoding.UTF8);\n    '\n    ' //code to write lines to xml file\n    '\n    ' Response.End();\n    ' }\n</code></pre>\n\n<p>As far as I can tell, once the CreateRSS() has been called, the page should just redirect as normal.</p>\n\n<p>Can anyone tell me why its not?? and how to fix it??</p>\n\n<p>Thanks in advance\nChris</p>\n"},{"tags":["asp.net-mvc","controller","asp.net-mvc-4","http-post","parameter-passing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13264018,"title":"MVC 4 - pass parameter to controller from URL while collecting form data","body":"<p>I have a form on my view with 2 fields. The user clicks on the submit button and some data will be queried specific to that user and the data they entered into the form.\nThe user's email address is passed on the URL. (e.g. ActionName?user_email=yaddd@yyy.com)\nI need to collect the form data and the email from the URL and pass it into my controller.</p>\n\n<p>I need the data to query from my database and display a message to the user.</p>\n\n<p>I can't find any good links or sites regarding this issue.</p>\n\n<p>This is what I have tried so far:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Collect(String s1, String s2, string user_email)\n    {}\n    and \n    [HttpPost]\n    public ActionResult Collect(FormCollection fm, string user_email)\n    {}\n</code></pre>\n\n<p>They don't seem to collect the form data at all. What do you suggest?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":13271067,"title":"Difference between Display(Name) and DisplayName","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5243665/displayname-attribute-vs-display-attribute\">displayname attribute vs display attribute</a>  </p>\n</blockquote>\n\n\n\n<p>Is there any difference between <code>Display(Name=\"MyName\")</code> and  <code>DisplayName(\"MyName\")</code> or is it only a feature of ASP.NET MVC ? \nI'm talking about the namespace <b>System.ComponentModel.DataAnnotations</b>.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13273613,"title":"MVC: proper authentication","body":"<p>In my controller I have a login method. There I check credentials and if everything is ok call</p>\n\n<pre><code>FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n</code></pre>\n\n<p>It works but if I immediately check</p>\n\n<pre><code>this.User.Identity.IsAuthenticated\n</code></pre>\n\n<p>inside a controller I see that it is still false. I need to refresh a page to see that user is indeed authenticated. Is there a possibility to make user authenticated immediately, during the same request? Other partial views which are rendered after depend on it.</p>\n\n<p>In web forms development I would call something like </p>\n\n<pre><code>RedirectFromLoginPage\n</code></pre>\n\n<p>but here it is inside partial view rendered from a layout file, I can't redirect from there.</p>\n"},{"tags":["asp.net-mvc","dependency-injection","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13279088,"title":"Dependency Injection - Passing dependencies all the way down","body":"<p>I have an MVC application with a typical architecture...</p>\n\n<blockquote>\n  <p>ASP.NET MVC Controller -> Person Service -> Person Repository -> Entity Framework DB Context</p>\n</blockquote>\n\n<p>I am using Castle Windsor and I can see the benefit of using this along with a ControllerFactory to create controller with the right dependencies. Using this approach the Controller gets a Service injected, which in turn knows how to construct the right Repository, which in turn knows the correct DbContext to use.</p>\n\n<p>The windsor config is something like this...</p>\n\n<pre><code>dicontainer = new WindsorContainer();\ndicontainer.Register(Component.For&lt;IPersonService&gt;().ImplementedBy&lt;PersonService&gt;());\ndicontainer.Register(\n    Component.For&lt;IPersonRepository&gt;().UsingFactoryMethod(\n        () =&gt; new PersonRepository(new HrContext(\"connectionString\"))));\n</code></pre>\n\n<p>It this the right way to do it? I don't like the UsingFactoryMethod, but can't think of another way.</p>\n\n<p>Also, what if the Repository needed a dependency (say ILogger) that was not needed by the service layer? Does this mean I have to pass the ILogger into the service layer and not use it. This seems like a poor design. I'd appreciate some pointers here. I have read loads of articles, but not found a concrete example to verify whether I am doing this right. Thanks.</p>\n"},{"tags":["asp.net-mvc","iis","shared-host"],"answer_count":7,"favorite_count":6,"up_vote_count":22,"down_vote_count":0,"view_count":14027,"score":22,"question_id":57712,"title":"ASP.NET MVC and IIS 5","body":"<p>What is the best way to get hosting of an ASP.NET MVC application to work on IIS 5 (6 or 7). When I tried to publish my ASP.NET MVC application, all I seemed to get is 404 errors. I've done a bit of googleing and have found a couple of solutions, but neither seem super elegant, and I worry if they will be unusable once I come to use a shared hosting environment for the application.</p>\n\n<p><a href=\"http://blogs.microsoft.co.il/blogs/dorony/archive/2007/12/15/using-asp-net-mvc-on-iis-5.aspx\">Solution 1</a></p>\n\n<blockquote>\n  <ol>\n  <li>Right-click your application virtual directory on inetmgr.exe.</li>\n  <li>Properties->Virtual Directory Tab-> Configuration.</li>\n  <li>Add a new mapping extension. The extension should be .*, which will be\n  mapped to the Executable\n  C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\aspnet_isapi.dll,\n  or the appropriate location on your\n  computer (you can simply copy this\n  from the mapping for .aspx files). On\n  the mapping uncheck \"check that file\n  exists\".</li>\n  <li>3 X OK and you're good to go.</li>\n  <li>If you want, you can apply this setting to all your web sites. In\n  step1, click on the \"Default Web Site\"\n  node instead of your own virtual\n  directory, and in step 2 go to the\n  \"Home Directory\" tab. The rest is the\n  same.</li>\n  </ol>\n</blockquote>\n\n<p>It seems a tad hacky to route everything through ASP.NET.</p>\n\n<p><a href=\"http://blog.pagedesigners.co.nz/?p=29\">Solutions 2</a></p>\n\n<p>Edit the MVC routing to contain .mvc in the URL and then follow the steps in solution 1 based around this extension. <em>Edit: The original image link was lost, but here it is from Google's Cache:</em></p>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/TDp4F.png\" alt=\"alt text\"></p>\n</blockquote>\n"},{"tags":["html","asp.net-mvc","attributes","editorfor"],"answer_count":6,"favorite_count":7,"up_vote_count":31,"down_vote_count":0,"view_count":31747,"score":31,"question_id":3735400,"title":"Html attributes for EditorFor() in ASP.NET MVC","body":"<p>Why can't I pass in html attributes to EditorFor()? eg; </p>\n\n<pre><code>&lt;%= Html.EditorFor(model =&gt; model.Control.PeriodType, \n    new { disabled = \"disabled\", readonly = \"readonly\" }) %&gt;\n</code></pre>\n\n<p>I don't want to use metadata</p>\n\n<p><strong>Update</strong>: The solution was to call this from the view :</p>\n\n<pre><code> &lt;%=Html.EditorFor( model =&gt; model.Control.PeriodEndDate, new {Modifiable=model.Control.PeriodEndDateModifiable})%&gt;\n</code></pre>\n\n<p>and use <code>ViewData[\"Modifiable\"]</code> in my custom EditorTemplates/String.ascx where I have some view logic that determines whether to add readonly and/or disabled attributes to the input\nThe anonymous object passed into EditorFor() is a parameter called additionalViewData and its properties are passed to the editor template in the ViewData collection</p>\n"},{"tags":["asp.net","asp.net-mvc","testing","web-applications","user-interface"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13022602,"title":"automated functional web GUI testing frameworks (asp.net)","body":"<p>we have a mix of ASP.NET webforms and upcoming MVC projects; I am after a reliable and maintainable web GUI testing tools/framework;  At the moment we have some Watin tests and seeing that Watin hasn't been actively worked on over over 15 months I am a bit reluctant to invest any more in this or should I?</p>\n\n<p>What are the options and what is the best one to use.</p>\n\n<p><strong>Selenium</strong>\n- Although limited Visual Studio integration seems to be a good one.</p>\n\n<p><strong>Watin</strong>\n- Seems obsolete and doesn't seem to cope well with modern JQuery websites.</p>\n\n<p><strong>Telerik Test Studio</strong>\n- Looks very promising, has any one tried it? is it worth it?</p>\n\n<p>Are there any other viable options for ASP.NET and possible visual studio integration?</p>\n\n<p>I know there is an existing question on this <a href=\"http://stackoverflow.com/questions/1239625/web-testing-frameworks-for-asp-net-web-application\">Web testing frameworks for ASP.NET web application</a> but it doesn't really answer anything.</p>\n\n<p>for green fields projects what are people using out there for automated function UI testing.</p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13280624,"title":"How to write if condition inside where clause in linq","body":"<p>I want to write  if condition inside where clause. because if first name or last name is null I don't wani to add it in where  clause . other wise I want to add it.</p>\n\n<p>so I write </p>\n\n<pre><code>var query1 = from opv in _opvRepository.Table\n                         join o in _orderRepository.Table on opv.OrderId equals o.Id\n                         join gr in _graduandRepository.Table on opv.graduand_id equals gr.graduand_id\n                         join pv in _productVariantRepository.Table on opv.ProductVariantId equals pv.Id\n                         join p in _productRepository.Table on pv.ProductId equals p.Id\n                         where (opv.ceremony_id == ceremony_id) &amp;&amp; \n                         (!o.Deleted) &amp;&amp; (opv.IsHireItem == true)  &amp;&amp;\n                         (!p.Deleted) &amp;&amp;\n                         (!pv.Deleted) &amp;&amp; (opv.ceremony_id == ceremony_id)      \n                       //  group opv by opv.OrderId into g\n                         select new\n                         {\n                             opvTable = opv,\n                             grTable = gr,\n\n                         };\n\n\n// This is not working. I have problem in here. How to add this??\n             if (!String.IsNullOrEmpty(Fname))\n                 query1 = query1.Where(grTable = &gt; grTable.first_name == Fname);\n\n\n\n\n            var result = query1.ToList().Select(x =&gt;\n            {\n                return new HireItemReportLine()\n                {\n                    OrderId = x.opvTable.OrderId,\n                    OrderDate=x.opvTable.Order.CreatedOnUtc,\n                    Amount= x.opvTable.Order.OrderSubtotalExclTax,\n                    PaymentMethod = x.opvTable.Order.PaymentMethodSystemName,\n                    paidDate = x.opvTable.Order.CreatedOnUtc,\n\n                    Fname = x.grTable.first_name,\n                    MName = x.grTable.middle_name,\n                    LName = x.grTable.last_name,\n\n\n\n                };\n            }).ToList();\n</code></pre>\n\n<p>What is the wrong with my cording??</p>\n"},{"tags":["asp.net-mvc","json","asp.net-web-api","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13261760,"title":"How to read properties when POST but JsonIgnore GET in Json .NET Web API","body":"<p>I'm trying to make Json .NET Ignore a property by using the Json Ignore Attribute when clients GET the object but I want to be able to receive that property when a client is POST'ing</p>\n\n<p>In example I have:</p>\n\n<p>When the client POSTs data, password should be sent:</p>\n\n<pre><code>{\"email\":\"email@domain.com\",\"password\":\"P@ssW0rd1!\",\"firstname\":\"Joe\",\"lastname\":\"Doe\"}\n</code></pre>\n\n<p>However, when the client GETs the same object, I should Ignore the Password:  </p>\n\n<pre><code>{\"email\":\"email@domain.com\",\"firstname\":\"Joe\",\"lastname\":\"Doe\"}\n</code></pre>\n\n<p>Class:</p>\n\n<pre><code>    public class User\n    {\n        public User()\n        {\n            this.JoinDate = DateTime.UtcNow;\n            this.IsActive = false;\n        }\n        public int Id { get; set; }\n\n        [Required(ErrorMessage = \"Email is required!\")]\n        public string Email { get; set; }\n\n        [JsonIgnore]\n        public string HashedPassword { get; set; }\n\n        [Required(ErrorMessage = \"Password is required!\")]\n        public string Password { get; set; }\n\n        public DateTime JoinDate { get; set; }\n\n        [Required(ErrorMessage = \"First Name is required!\")]\n        public string FirstName { get; set; }\n\n        [Required(ErrorMessage = \"Last Name is required!\")]\n        public string LastName { get; set; }\n\n   }\n</code></pre>\n\n<p>Any ideas, suggestions, comments???</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","mobile","jquery-mobile"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":52,"score":0,"question_id":13273851,"title":"ASP.net: Using .NET Technologies to develop robust web applications, what tools do I need?","body":"<p>Looking for a rundown of all the tools available that will allow me to develop mobile websites using the .NET stack. I'm likely going to be using MVC 4 and jQuery Mobile, but what else do I need to be thinking about as far as getting all devices compatible. Keep in mind, I'm talking about web sites, not native apps right now.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc","linq"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":28,"score":-6,"question_id":13279844,"title":"How to do group by and join table in linq?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13279499/how-to-join-and-group-by-with-linq\">How to join and group by with linq?</a>  </p>\n</blockquote>\n\n\n\n<p>I want to join table and  and group by in linq.\nSo I write </p>\n\n<pre><code>   var query1 = from opv in _opvRepository.Table\n                         join o in _orderRepository.Table on opv.OrderId equals o.Id\n                         join gr in _graduandRepository.Table on opv.graduand_id equals gr.graduand_id\n                         join pv in _productVariantRepository.Table on opv.ProductVariantId equals pv.Id\n                         join p in _productRepository.Table on pv.ProductId equals p.Id\n                         where (opv.ceremony_id == ceremony_id) &amp;&amp;\n                         (!o.Deleted) &amp;&amp; (opv.IsHireItem == true)  &amp;&amp;\n                         (!p.Deleted) &amp;&amp;\n                         (!pv.Deleted) &amp;&amp; (opv.ceremony_id == ceremony_id)\n                          group opv by opv.OrderId into g\n                          select new\n                          {\n                              TotalAmount = g.Sum(x =&gt; x.PriceExclTax),\n                               table2Val = gr\n\n                          };   \n\n\n            var result = query1.ToList().Select(x =&gt;\n            {\n                return new HireItemReportLine()\n                {\n                    Fname = x.table2Val.first_name,\n                  MName = x.table2Val.middle_name,\n                  LName = x.table2Val.last_name,\n                };\n            }).ToList();\n</code></pre>\n\n<p>I want to select the <code>gr</code> table data, <code>opv</code> table data and <code>o</code> table data.</p>\n\n<p>But there is error and it says</p>\n\n<pre><code>The name 'gr' does not exist in the current context\n</code></pre>\n\n<p>How to solve it??</p>\n"},{"tags":["c#",".net","asp.net-mvc","dependency-injection","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12320846,"title":"Some questions about webapi ActionFilterAttribtes, FilterProvider, and Dependency Injection","body":"<p>I see that by default, an MVC4 WebApi project has 2 <code>IFilterProviders</code>: The <code>ConfigurationFilterProvider</code>, and the <code>ActionDescriptorFilterProvider</code>. When setting up a custom <code>IFilterProvider</code> to do property depenency injection, is it appropriate to remove both of these from the Filters collection first? Or is it more appropriate to just remove the <code>ActionDescriptorFilterProvider</code>, and leave the <code>ConfigurationFilterProvider</code> in the collection?</p>\n\n<p>Secondly, I see that after a WebApi Http <code>ActionFilterAttribute</code> is constructed for a particular action, it seems to stay around. For example when I put a custom action filter on an ApiController Get method, it is only constructed the first time that method is called. Subsequent calls to the api method seem to reuse the same filter (constructor breakpoints are only hit during the first invocation). Is this right? Why is it different than an MVC actionfilter, where a new instance is created for each method invocation?</p>\n"},{"tags":["c#","asp.net-mvc","dependency-injection","ioc-container","asp.net-web-api"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":868,"score":1,"question_id":10930402,"title":"How to do dependency injection to Action Filter on ASP.NET Web API","body":"<p>I really get stuck on the approach to do dependency injection into action filter of web api. I  have an action filter like this:</p>\n\n<pre><code>public class AuthorizationAttribute : ActionFilterAttribute\n{\n    public IApiKeyRepository Repository { get; set; }\n\n    private Guid GetApiKey(string customerKey)\n    {\n        return Repository.GetApiKey(customerKey);\n    }\n\n    public override void OnActionExecuting(HttpActionContext actionContext)\n    {        \n    }\n}\n</code></pre>\n\n<p>I would like to do property injection on the property Repository by using Windsor (but it does not matter which IoC container is used)</p>\n\n<p>I did come up to customize FilterProvider but it did not work out for me, does anyone have solution or running code on this? it will be much appreciated</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13279297,"title":"Alternatives to DisplayName DataAnnotation when displaying run-time data in MVC3 model","body":"<p>I have a requirement to display a label whose text is determined at run-time.</p>\n\n<p>Previously, when the text was known at compile-time, I was able to use the DisplayName DataAnnotation to craft how my model represented its data.</p>\n\n<p>As an example, I used to have this:</p>\n\n<pre><code>[DisplayName(\"Task Template\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; TaskTemplate { get; set; }\n\n&lt;%= Html.LabelFor(model =&gt; model.TaskTemplate) %&gt;\n&lt;%= Html.DropDownListFor(model =&gt; model.TaskTemplateFlag, new SelectList(Model.TaskTemplate, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>but now the DisplayName needs to be determined at run-time.</p>\n\n<p>According to <a href=\"http://stackoverflow.com/questions/9434918/displayattribute-name-with-a-variable-dynamic-displayname\">this StackOverflow answer</a> there is no way to do this using a DataAnnotation.</p>\n\n<p>I'm left wondering what best practice is? Do I stop using LabelFor altogether? Should I just store a bunch of string properties in my model, load my values into the properties, and render using DisplayFor?</p>\n\n<p><strong>Update:</strong> I think that this is probably a good enough solution:</p>\n\n<pre><code>public string TaskTemplateLabel { get; set; }\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; TaskTemplate { get; set; }\n\n//Constructor: TaskTemplateLabel = GetLabelFromDataSource();\n\n&lt;%= Html.LabelFor(model =&gt; model.CurrentDeviceName, Model.TaskTemplateLabel)%&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","mvc","real-time"],"answer_count":6,"favorite_count":6,"up_vote_count":10,"down_vote_count":0,"view_count":1753,"score":10,"question_id":5167821,"title":"Real-time ASP.NET MVC Web Application","body":"<p>I need to add a \"real-time\" element to my web application. Basically, I need to detect \"changes\" which are stored in a SQL Server table, and update various parts of the UI when a change has occured.</p>\n\n<p>I'm currently doing this by polling. I send an ajax request to the server every 3 seconds asking for any new changes - these are then returned and processed. It works, but I don't like it - it means that for each browser I'll be issuing these requests frequently, and the server will always be busy processing them. In short, it doesn't scale well.</p>\n\n<p>Is there any clever alternative that avoids polling overhead?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>In the interests of completeness, I'm updating this to mention the solution we eventually went with - <a href=\"https://github.com/SignalR/SignalR\" rel=\"nofollow\">SignalR</a>. It's OS and comes from Microsoft. It's risen in popularity, and I can heartily recommend this, or indeed WebSync which we also looked at.</p>\n"},{"tags":["asp.net-mvc","azure","signalr"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13279066,"title":"Socket timeout using signalR when using Azure Emulator, it works fine if i run the mvc project","body":"<p>I have a MVC 4 Project using signalR. I start a thread that send a msg every 5 sec to all clients. This runs fine. I can see the msgs on the clients. When i run the Azure Project with the MVC project as a role. Clients receive the first 2 or 3 msgs and then it times out and start behaving odd.</p>\n\n<p>What differences are there when running a azure project and a mvc project, the emulator starts iss express also so i cant see what the issues might be.</p>\n\n<p>Anyone have some suggestions for where to go next.</p>\n"},{"tags":["c#","asp.net-mvc","upload","google-drive-sdk","google-drive"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13276819,"title":"ResumableUpload with google drive api v2 .net","body":"<p>I'm trying to upload a file to google drive and monitor the upload progress. I'm using .net with api v2.</p>\n\n<p>I was using the DriveService.Files.Insert method that gives me a FilesResource.InsertMediaUpload, and then I'm using the ProgressChanged event to list to the progress. The problem is that this event is called only 3 times: with \"starting\", \"uploading\", \"completed\" states. I would like to have many call in the \"uploading\" state.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    private UploadToGoogle(...)\n    {\n        //Consider I have an populated File and MemoryStream:\n        MemoryStream contentStream = /*Populated memoryStream*/;\n        File body = /*Populated file*/;\n\n        FilesResource.InsertMediaUpload uploadRequest = null;\n\n        try\n        {\n            contentStream.Position = 0;\n\n            uploadRequest = driveService.Files.Insert(body, contentStream, body.MimeType);\n\n            uploadRequest.ProgressChanged += new Action&lt;Google.Apis.Upload.IUploadProgress&gt;(UploadProgessEvent);\n\n            Action asyncAction = () =&gt;\n            {\n                uploadRequest.Upload();\n                Console.WriteLine(\"Completed!\");\n            };\n\n            var thread = new System.Threading.Thread(new System.Threading.ThreadStart(asyncAction));\n            thread.Start();\n\n        }catch(Exception) {}\n    }\n</code></pre>\n\n<p>There's some content on internet about the ResumableUpload class in older apis, but don't know how to use that in v2. I've found the ResumableUpload class in Google.Apis.Upload namespace, but it's abstract and I have no idea how to use that.</p>\n\n<p>I didn't find anything usefull about progress monitoring in documentation: <a href=\"https://developers.google.com/drive/manage-uploads\" rel=\"nofollow\">https://developers.google.com/drive/manage-uploads</a></p>\n\n<p>And I really don't want to use resumable upload through WebRequest, is there a way to implement that in .net sdk...</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13278781,"title":"How to disable client-side validation?","body":"<p>I need disable client-side validation for FORM.</p>\n\n<p>How do this?</p>\n\n<p>I do not want to just disable js files</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","iis-7.5","http-status-code-404"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13278842,"title":"RenderAction not working when executing a new controller context","body":"<p>I have   <code>@{ Html.RenderAction(MVC.Account.Header()); }</code> in the my razor master page.  It renders fine for 200 status codes, but when it goes to my 404 page it doesnt work.  I believe its the code below.  Why would it not render the header, but everything else?  This is on IIS 7.5.</p>\n\n<pre><code>protected void Application_EndRequest()\n        {\n            if(Context.Response.StatusCode == 404)\n            {\n                Response.Clear();\n\n                var rd = new RouteData();\n                rd.Values[\"controller\"] = \"Errors\";\n                rd.Values[\"action\"] = \"PageNotFound\";\n\n                IController c = new ErrorsController();\n                c.Execute(new RequestContext(new HttpContextWrapper(Context), rd));\n            }\n        }\n</code></pre>\n"},{"tags":["mysql","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":434,"score":1,"question_id":12181428,"title":"ASP.NET MVC 4 EF5 with MySQL","body":"<p>So I've just picked up VS2012 and I want to start an ASP.NET MVC 4 app with EF5.</p>\n\n<p>My host does not have MSSQL so I have to use MySQL.</p>\n\n<p>How do I tell my app that it should use MySQL? (I either want to use the devart MySQL connector or the one from mysql.com)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13277278,"title":"Inheritance based custom model binding","body":"<p>I need to create a post action to listen to bunch of event messages in ASP.NET MVC 4. There are lots of events so I cannot create an action per event. So it would be best to create an action with their base class as posted model use a custom model binder to hydrate the event.</p>\n\n<p>Some of the events look like this:</p>\n\n<pre><code>public class QueryID : Identity&lt;Guid&gt;\n{\n    public QueryID(Guid id)\n    {\n        Identifier = id;\n    }\n}\n\npublic class QueryEvent : IEvent&lt;QueryID&gt;\n{\n    public QueryEvent(QueryID id)\n    {\n        Identity = id;\n    }\n\n    #region Implementation of IEvent&lt;out QueryID&gt;\n\n    public QueryID Identity { get; private set; }\n\n    #endregion\n}\n\npublic class QueryCreated : QueryEvent\n{\n    public string ConnectionID { get; private set; }\n\n    public QueryCreated(QueryID id, string connectionID)\n        : base(id)\n    {\n        ConnectionID = connectionID;\n    }\n}\n\npublic class ColumnAdded : QueryEvent\n{\n    public string Column { get; private set; }\n\n    public ColumnAdded(QueryID id, string column)\n        : base(id)\n    {\n        Column = column;\n    }\n}\n</code></pre>\n\n<p>The action method to receive these messages would look something like this:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Index(IEvent&lt;IIdentity&gt; e)\n    {\n        // whatever\n\n        return new EmptyResult();\n    }\n</code></pre>\n\n<p>The base Identity class implements the <code>IEvent&lt;IIdentity&gt;</code> interface.</p>\n\n<p>What would the model binder look like to accomplish this?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor","html.dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13268589,"title":".Net MVC 4 Dropdownlistfor SelectedItem (Not just selected value, but the selected text)","body":"<p>I have a for loop to generate IEnumerable list:</p>\n\n<pre><code>public static IEnumerable&lt;SelectListItem&gt; loadData()\n{\n    DataTable dt = load_from_database;\n    List&lt;SelectListItem&gt; list = new List&lt;SelectListItem&gt;();\n    foreach (DataRow dr in dt.Rows)\n    {\n        SelectListItem listItem = new SelectListItem();\n        listItem.Text = dr[\"name\"].ToString();\n        listItem.Value = dr[\"id\"].ToString();\n        list.Add(listItem);\n    }\n    return list;\n}\n</code></pre>\n\n<p>And I have the following model:</p>\n\n<pre><code>public class Models\n{\n    public string selectedUserApp { get; set; }\n    public IEnumerable&lt;SelectListItem&gt; userApps  { get; set;  }\n}\n</code></pre>\n\n<p>And the controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n    var model = new UserApplicationModels();\n    userAppsList = loadData();\n    model.userApps = userAppsList;\n    model.selectedUserApp = model.userApps.First().Value;\n\n    return View(model);\n}\n</code></pre>\n\n<p>Then the view:</p>\n\n<pre><code>@model Models\n\n@Html.DropDownListFor(x=&gt;x.selectedUserApp , Model.userApps)\n</code></pre>\n\n<p>What I got is the value of the selected item, but I need to get the text of selected item. </p>\n\n<p>What can I do?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-web-api","serializable"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13263988,"title":"ASP.NET Web API and [Serializable] class","body":"<p>I have a class that is marked with [Serializable]. When i return it from the Web API the field names are all funky.</p>\n\n<p>Normally the JSON returned is</p>\n\n<pre><code>[{\"OrderId\":797 ...\n</code></pre>\n\n<p>JSON returned when using [Serializable]</p>\n\n<pre><code>[{\"&lt;OrderId&gt;k__BackingField\":797 ...\n</code></pre>\n\n<p>I wan't to mark it serializable to use a BinaryFormatter for caching. Is there any other way than to write a custom serializer or to make a twin class that is not serializable and write monkey code to \"cast\" between the two?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13277126,"title":"Force all Areas to use same Layout","body":"<p>I have the following project structure:</p>\n\n<ul>\n<li><p>/Views/Shared/_Layout;</p></li>\n<li><p>/Areas/Area1/Views/ControllerName/Index;</p></li>\n</ul>\n\n<p>...</p>\n\n<ul>\n<li>/Areas/AreaN/Views/ControllerName/Index.</li>\n</ul>\n\n<p>Is there any way to force all areas to use the <strong>_Layout</strong> as a <strong>base layout</strong>?</p>\n\n<p>Is there any way to do it without adding the <strong>_ViewStart</strong> file (for example, via the routing configuration)?</p>\n"},{"tags":["c#","php","asp.net-mvc","drupal","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13277128,"title":"Single authentication with Drupal and ASP.NET","body":"<p>I'm an experienced C# developer with a small amount of PHP experience.  I am looking at getting a Drupal instance up and running, but, I will need an ASP.NET instance running along with it since there is going to be custom development work that needs to be done.</p>\n\n<p>I was wondering if anyone had ideas for how to combine authentication for Drupal and ASP.NET so that I don't need to make users authenticate more than once while using the two sites together.</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13274797,"title":"jQuery datepicker not showing current date in all views","body":"<p>I am using the jquery datepicker and have created an editor template for date fields as well. My code for both is shown below.</p>\n\n<pre><code>$(document).ready(function () {\n    $('.date').datepicker({ dateFormat: \"dd/mm/yy\"});\n});\n\n@model Nullable&lt;DateTime&gt;\n\n @{\n    DateTime dt = DateTime.Now;\n    if (Model != null)\n    {\n       dt  = (System.DateTime) Model;\n\n    }\n    @Html.TextBox(\"\", String.Format(\"{0:d}\", dt.ToShortDateString()), new { @class = \"date\" })\n}\n</code></pre>\n\n<p>For some reason the current date is only shown on some views. On the others the date is showing as null 01/01/0001. I have checked and double checked my code and cannot find any problems. I have also checked the outputted html through developer tools and it is identical for fields that show the current date and those that don't - apart from the value of course!</p>\n\n<p>Wondering if anyone else has experienced this. It appears to only be happening on views where there is more than one date field.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["c#","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13276570,"title":"ReferenceError: Model not defined in view","body":"<p>I get the following error, \"ReferenceError: Cat is not defined\", when trying to pass a model to view and print out it's text value with JavaScript. Why is there a reference error and how to fix it?</p>\n\n<p>Model:</p>\n\n<pre><code>public class Animal\n{\n    public List&lt;SelectListItem&gt; AnimalList { get; set; }\n\n    public Animal()\n    {\n        SelectListItem animalItem = new SelectListItem();\n        animalItem.Text = \"Cat\";\n        animalItem.Value = \"1\";\n\n        AnimalList = new List&lt;SelectListItem&gt;();\n        AnimalList.Add(animalItem);\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n        var model = new Animal();\n\n        return View(model);\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function () {\n    @foreach (var item in Model.AnimalList)\n    {\n        &lt;text&gt;\n            console.log(@item.Text);\n        &lt;/text&gt;\n    }\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>By the way. It works fine if I set the text to a number, for example 0.</p>\n"},{"tags":["asp.net-mvc","forms-authentication","formsauthenticationticket"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13276368,"title":"ASP.Net MVC 4 Custom Authorization Ticket Redirect Issue","body":"<p>I'm having an issue where redirecting to a secured action after setting a custom forms authentication ticket. Here's what is happening:</p>\n\n<ol>\n<li>I navigate to Site/Home/Index</li>\n<li>I'm automatically redirected to Site/Account/Login</li>\n<li>I login with a valid user/pass</li>\n<li>The RedirecToUrl() function attempts to redirect me back to Site/Home/Index, yet I'm automatically returned back to Site/Account/Login</li>\n<li>The request IS authenticated. If I manually navigate to Site/Home/Index, I'm allowed in.</li>\n</ol>\n\n<p>Can anybody shed any light?</p>\n\n<p>My HomeController:</p>\n\n<pre><code>[Authorize]\npublic ActionResult Index()\n{\n    return View();\n}\n</code></pre>\n\n<p>My AccountController:</p>\n\n<pre><code>    [HttpGet]\n    [AllowAnonymous]\n    public ActionResult Login(string returnUrl)\n    {\n        ViewBag.ReturnUrl = returnUrl;\n        return View();\n    }\n\n    [HttpPost]\n    [AllowAnonymous]\n    [ValidateAntiForgeryToken]\n    public ActionResult Login(LoginModel model, string returnUrl)\n    {\n        if (ModelState.IsValid)\n        {\n            bool bLogin = MyAuthentication.Login(model.UserName, model.Password);\n\n            if (bLogin)\n            {\n                Response.Cookies.Add(MyAuthentication.GetAuthenticationCookie(model.UserName.ToLower(), model.RememberMe));\n                RedirectToUrl(returnUrl);\n            }\n            else\n                ModelState.AddModelError(\"\", \"That is not a valid Username/Password combination\");\n\n        }\n\n        return View(model);\n    }\n\n    private ActionResult RedirectToUrl(string returnUrl)\n    {\n        if (Url.IsLocalUrl(returnUrl))\n            return Redirect(returnUrl);\n        else\n            return RedirectToAction(\"Index\", \"Home\");\n    }\n</code></pre>\n\n<p>Here is how I create the custom ticket (just adding userdata):</p>\n\n<pre><code>    public static HttpCookie GetAuthenticationCookie(string UserName, bool persistLogin)\n    {\n        var userData = null; // Code removed for brevity\n\n        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(\n                 1,\n                 UserName,\n                 DateTime.Now,\n                 DateTime.Now.AddMinutes(20),\n                 persistLogin,\n                 userData);\n\n        string encTicket = FormsAuthentication.Encrypt(authTicket);\n        return new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);\n    }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","sitemap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13260354,"title":"Sitemap and MVC","body":"<p>Is there a way to use a classic asp.net sitemap but configure the request routing so it calls an MVC controller and associated action?</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;siteMap&gt;\n    &lt;siteMapNode url=\"~/something.aspx\" controller=\"Home\" action=\"Default\" /&gt;\n&lt;/siteMap&gt;\n</code></pre>\n\n<p>Therefore the url ~/something.aspx would be routed to the Default action on the Home controller.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13276044,"title":"Creating JSON key, value in VB.NET","body":"<p>I have the following code:</p>\n\n<pre><code>    Dim result = New Dictionary(Of String, String)\n\n    For Each item In food\n\n        result.Add(StrConv(item.Shrt_Desc.Replace(\",\", \", \"), VbStrConv.ProperCase), item.Shrt_Desc)\n\n    Next\n\n    Return Json(result, JsonRequestBehavior.AllowGet)\n</code></pre>\n\n<p>I need to make it into the following key and value in JSON:</p>\n\n<blockquote>\n  <p>An array of objects with label and value properties: [ { label:\n  \"Choice1\", value: \"value1\" }, ... ]</p>\n</blockquote>\n\n<p>How can I do this?  Thank you.</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2008","profiling"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1571,"score":2,"question_id":1684688,"title":"Visual Studio 2008 Performance Profiler Problems with ASP.NET","body":"<p>I've been trying, and failing, to get VS.NET 2008 to profile an ASP.NET MVC application. When I try and start a profiling session I get a generic server 500 error from VS.NET:</p>\n\n<p>The web site could not be configured correctly; getting ASP.NET process information failed. Requesting '<a href=\"http://localhost:4750/foo/VSEnterpriseHelper.axd\" rel=\"nofollow\">http://localhost:4750/foo/VSEnterpriseHelper.axd</a>' returned an error: The remote server returned an error: (500) Internal Server Error.</p>\n\n<p>I've tried several things, including:</p>\n\n<ul>\n<li>ensuring that web.config is writable</li>\n<li>ensuring that there aren't any permissions issues (everything is running as me, I'm an admin, and UAC is off)</li>\n<li>everything mentioned here:\n<a href=\"http://stackoverflow.com/questions/260432/500-error-running-visual-studio-asp-net-unit-test\">http://stackoverflow.com/questions/260432/500-error-running-visual-studio-asp-net-unit-test</a></li>\n</ul>\n\n<p>A brand new ASP.NET MVC app (i.e. File | New | Project ) will profile without problem, so I know my machine is capable of profiling such an app.</p>\n\n<p>So, my question here is what are the other common and uncommon things that can prevent VS.NET from starting a profiling session on an ASP.NET app?</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13275664,"title":"Passing parameters to a partial view using Html.Action","body":"<p>I am developing an MVC application (razor syntax), and I am having issues passing parameters into my <code>Html.Action</code> call. Below is a search page I am implementing. Note, the model contains distinct values to be used in the dropdowns.</p>\n\n<p>Call From View:</p>\n\n<pre><code>@using(Html.BeginForm(\"Search\", \"Home\", FormMethod.Get, null)){\n\n@Html.LabelFor(model =&gt; model.siteCode)\n@Html.DropDownListFor(model =&gt; model.siteCode, new SelectList(Model.siteCode), \"All\")\n\n@Html.LabelFor(model =&gt; model.group)\n@Html.DropDownListFor(model =&gt; model.group, new SelectList(Model.group), \"All\")\n}\n\n@Html.Action(\"ShowOrderData\", \"Home\", new {siteCode = Model.siteCode, group = Model.group}\n</code></pre>\n\n<p>Action in Controller:</p>\n\n<pre><code>public ActionResult ShowOrderData(string siteCode = \"\",\n                                        string group = \"\",)\n{\n        var model = _db.ToolOrders\n            .Where(r =&gt; r.SiteCD_LOC.Contains(siteCode))\n            .Where(r =&gt; r.GroupCode.Contains(group))\n\nreturn PartialView(\"_OrderData\", model);\n}\n</code></pre>\n\n<p>Note: There may be some syntactical errors. There are about 10 more parameters being passed and I didn't want to clog up the code blocks.</p>\n\n<p>So when debugging with this code, empty strings are sent to my <em>ShowOrderData</em> controller. I attempted to add .ToString in the Html.Action call ( <code>Model.siteCode.ToString()</code> ), and a LINQ statement will show up instead. I am guessing this method is wrong because the model does not contain any information from the previous request.</p>\n\n<p>How do I properly send data from the QueryString to a partial view? I've seen methods that access the queryString directly via request.querystring, but I've also heard that it is bad practice to use that in a view.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13256419,"title":"User Information on ASP.NET MVC","body":"<p>I'm using ASP.NET MVC and when I have an user logged in using forms authenticaion, I would like to keep some information about this user. The HttpContext User object, implemented from IPrincipal has some properties, but I would like to add some more, so that I could get these on my actions and views. What's the best way to achieve this? </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","jquery-mobile","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13263318,"title":"MVC4 dynamically changing master layout page doesn't work on first load","body":"<p>I have an MVC4 mobile project that I want to add a desktop (non mobile) page to for some users.</p>\n\n<p>I have added a new desktop master page and assigned my view to use it.</p>\n\n<p>The first time I navigate to the page it renders using jquerymobile which appears to somehow be cached from the previous screen. </p>\n\n<p>If I hit <code>F5</code> to <code>refresh</code> the page it displays using the assigned desktop masterpage correctly.</p>\n\n<p>Can anyone tell me how to fix this? Any insight appreciated</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13270775,"title":"Why Not looking for the View in the correct location","body":"<p>I'm an MVC newbie so this might sound trivial.I have my 2 Views(EnterLogin.aspx,ShowLogin.aspx) in a folder called <code>LoginForm</code> in Views.\nHere is my Global.asax.cs below</p>\n\n<pre><code>public class MvcApplication : System.Web.HttpApplication\n{\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"LoginForm\", action = \"ShowLogin\", id = UrlParameter.Optional } // Parameter defaults\n        );\n    }\n\n    protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RegisterRoutes(RouteTable.Routes);\n    }\n}\n</code></pre>\n\n<p>Here is my ShowLogin.aspx design code</p>\n\n<pre><code>&lt;form method=\"post\" action=\"EnterLogin\" runat=\"server\"&gt;\n    Hello, i'm login page\n    Enter Name   &lt;asp:TextBox ID=\"txtName\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n    &lt;input type=\"submit\" value=\"PressMe\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here are my controllers</p>\n\n<pre><code>public class LoginFormController : Controller\n{\n    public ActionResult ShowLogin()\n    {\n        return View();\n    }\n\n    public ActionResult EnterLogin()\n    {\n        return View(\"EnterLogin\");\n    }\n}\n</code></pre>\n\n<p>On running the application it first loads with url </p>\n\n<pre><code>http://localhost:50224/\n</code></pre>\n\n<p>and shows the ShowLogin.aspx View</p>\n\n<p>On clicking the button I'm calling <code>EnterLogin</code> controller to show <code>EnterLogin</code> View but it looks in URL</p>\n\n<pre><code>http://localhost:50224/EnterLogin\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>http://localhost:50224/LoginForm/EnterLogin\n</code></pre>\n\n<p>What could be causing this?</p>\n"},{"tags":["asp.net-mvc","fxcop"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12807431,"title":"Trying to use FxCop with repeatedly upgraded MVC","body":"<p>I am trying to use FxCop on a project that has been upgraded from MVC 1 through MVC 3.  The first time I ran my project, it asked me to locate MVC 3 for it.  Once I did, it continued on for a bit and then asked me to find MVC 1, which I find odd because I no longer have it installed on this machine and the website operates just fine.  This is the message it is giving me:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Px2D7.png\" alt=\"FxCop wants System.Web.Mvc 1\"></p>\n\n<p>In our Web.config file we have the following, which is created automatically when you upgrade versions of MVC:</p>\n\n<pre><code>&lt;dependentAssembly&gt;\n  &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n  &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n&lt;/dependentAssembly&gt;\n</code></pre>\n\n<p>Does anyone have any idea how to get rid of this error so FxCop will complete it's analysis of this project?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13272625,"title":"ASP MVC Route Config - The resource cannot be found error","body":"<p>I'm newbie in asp mvc, currently, my demo project structure like this:</p>\n\n<pre><code>Areas -- Comment -- Controller -- HomeController\n                               -- ManageController\nController -- HomeController\n          |-- CommentController\n                 |____ PostMsg\n                 |____ DeleteMsg\nViews -- Home\n     |     |--- Index.cshtml\n     |-- Comment\n           |--- PostMsg.cshtml\n           |--- DeleteMsg.cshtml\n</code></pre>\n\n<p>When I browsing url like : </p>\n\n<pre><code>http://localhost/Comment/Manage/ --&gt; return view successfully\nhttp://localhost/Comment/PostMsg --&gt; error \"The resource cannot be found.\"\n</code></pre>\n\n<p>Anyone have any idea why asp mvc doesn't resolve my controller :-(</p>\n\n<p>here is my global.asax.cs route config:</p>\n\n<pre><code>            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                name: \"Default\",\n                url: \"{controller}/{action}/{id}\",\n                defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                namespaces: new[] { \"Demo.Web.Controllers\" }\n            );\n</code></pre>\n\n<p>here is my area registration route config:</p>\n\n<pre><code>        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n                \"Comment_default\",\n                \"Comment/{controller}/{action}/{id}\",\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                new[] { \"Demo.Web.Areas.Comment.Controllers\" }\n            );\n        }\n</code></pre>\n\n<p>Problem : Comment/PostMsg url was resolved as an Controller in Comment Area</p>\n\n<p>Goal : Comment/PostMsg url was resolved as an Action of CommentController</p>\n\n<p>Any help would be appreciated :-)</p>\n\n<p><strong>ISSUE RESOLVED</strong>, edit area registration route config (work around):</p>\n\n<pre><code>        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n                \"Comment_default\",\n                \"Comment/PostMsg\",\n                new { controller = \"Comment\", action = \"PostMsg\", id = UrlParameter.Optional },\n                new[] { \"Demo.Web.Controllers\" }\n            );\n\n            context.MapRoute(\n                \"Comment_default\",\n                \"Comment/{controller}/{action}/{id}\",\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                new[] { \"Demo.Web.Areas.Comment.Controllers\" }\n            );\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","facebook","templates","azure"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13272133,"title":"Facebook App on Azure using ASP.NET MVC Facebook Template (API Error Code: 191)","body":"<p>I try deploying my first Facebook App on Azure using ASP.NET MVC Facebook Template as an <a href=\"http://blogs.msdn.com/b/webdev/archive/2012/10/31/deploying-your-first-facebook-app-on-azure-using-asp-net-mvc-facebook-template.aspx\" rel=\"nofollow\">example</a>. I do not do anything extra, just what in the example.</p>\n\n<p>But every time I get an error: </p>\n\n<blockquote>\n  <p>API Error Code: 191.<br/>API Error Description: The specified URL is not owned by the application</p>\n</blockquote>\n\n<p>I checked all the Names and AppId and AppSecret. Everything is correct. I do not understand what went wrong.</p>\n\n<p>Maybe it's because \"<em>This template is still in a preview state. The APIs could change significantly before the final release</em>\"? </p>\n\n<p>Or is there a problem with an example?</p>\n"},{"tags":["jquery","asp.net-mvc","partial-view"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13275152,"title":"get data from fields added by jquery","body":"<p>I have added a dynamic number of partial views through jquery. (based on selection of a drop down list)</p>\n\n<p>And now, I don't know how to get the data in the text boxes?</p>\n\n<pre><code>  &lt;script&gt;\n$(document).ready(function() {\n    $('select#testStationUniqueId').change(function() {\n        var testStation = $(this).val();\n        $.ajaxSetup({ cache: false });\n\n\n\n        $.ajax({\n            url: \"TestInput/getTestStationInformation/\" + testStation,\n\n            type: 'post',\n            success: function(data) {\n                $('#driveDetailDiv').empty();\n                for (var i = 0; i &lt; data.length; i++) {\n                    $.post('TestInput/Details/', { id: data[i] }, function(data2) {\n                        $('#driveDetailDiv').append(data2);\n                    });\n                }\n            }\n        });\n    });\n});\n</code></pre>\n\n<p></p>\n\n<p>my partial View has some labels and some text boxes. I don't know how to get value of each text  box </p>\n\n<pre><code>    public PartialViewResult Details(string id)\n    {\n        DriveDetails t = new DriveDetails(id);\n        return PartialView(\"DriveDetailsPartial\", t);\n    }\n</code></pre>\n\n<p>DriveDetailsPartial has some fields and texboxes and ropdown lists, etc.</p>\n"},{"tags":["jquery","asp.net-mvc","webgrid"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13273535,"title":"jquery code works once but not repeatedly","body":"<p>i have a small jquery script that when I click an ajax actionlink in a grid/table(built from a webgrid) it will replace the contents with a spinning wheel.  It works the first time only.</p>\n\n<pre><code>$('#thisGrid tr td').click(function () {\n    $(this).html('&lt;img  src=\"@Url.Content(\"~/Content/ajax-loader.gif\")\" alt=\"Loading... Please Wait\" style=\"height: 20px;\"/&gt;');\n});\n</code></pre>\n\n<p>I have not found anything that has led me to determine why this is so... Any thoughts on why this might be happening?</p>\n"},{"tags":["asp.net-mvc","view"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13257512,"title":"Detecting a source view from the controller","body":"<p>Is it possible to recognize the view/page name from which a form was submitted to Action ?</p>\n\n<p>For example, lets say I have two Views: <code>AddInfo</code> and <code>EditInfo</code>\nBoth views have a form that I would like to submit to</p>\n\n<pre><code>@Html.BeginForm(\"SaveInfo\",\"Info\")\n{\n ...\n}\n</code></pre>\n\n<p>Inside of the <code>SaveInfo()</code> method I would like to recognize whether the submit/request came from <code>AddInfo</code> or <code>EditInfo</code> view.</p>\n\n<pre><code>public ActionResult SaveInfo(FormCollection collection)\n{\n if(...I got here from AddInfo View)  &lt;----- ?\n {\n  ..do something \n }\n}\n</code></pre>\n\n<p>Is it possible ?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","bundle","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13267189,"title":"MVC4 Bundling slow when using Scripts.Render","body":"<p>My asp.net MVC4 web project is running very slowly when serving a simple page that renders bundled scripts. However, when I use a 'hardcoded' script tag on the page with the source attribute of the virtual bundle path then performance is much better:</p>\n\n<pre><code>@Scripts.Render(\"~/bundles/scripts\")                            ~ 4 seconds\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>&lt;script src='@Scripts.Url(\"~/bundles/scripts\")'&gt;&lt;/script&gt;       &lt; 1 second\n</code></pre>\n\n<p>My <code>BundleConfig.cs</code> has no special configuration, this is exactly as it appears:</p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/scripts\").Include(\n    \"~/Scripts/jquery-1.7.2.min.js\",\n    \"~/Scripts/jquery.validate.min.js\",\n    \"~/Scripts/jquery.validate.unobtrusive.js\",\n    \"~/Scripts/jquery-ui-1.9.0.custom.min.js\",\n    \"~/Scripts/bootstrap.min.js\",\n    \"~/Scripts/bootstrap-modal.js\",\n    \"~/Scripts/bootstrap-dropdown.js\",\n    \"~/Scripts/bootstrap-tooltip.js\",\n    \"~/Scripts/bootstrap-typeahead.js\",\n    \"~/Scripts/bootstrap-transition.js\",\n    \"~/Scripts/bootstrap-popover.js\"));\n</code></pre>\n\n<p>My <code>web.config</code> is even configured to optimize in Debug but I have tried running in Release mode and still get the same result:</p>\n\n<pre><code>&lt;compilation optimizeCompilations=\"true\" debug=\"false\" targetFramework=\"4.0\" /&gt;\n</code></pre>\n\n<p><strong>Any ideas why <code>Scripts.Render</code> is so slow?</strong></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","partial-views","child-actions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13275101,"title":"Handling Errors in MVC Child Actions","body":"<p>My error handling collects (some manually, some automatically) the errors produced during controller execution. Then I have a partial view which renders out the error messages. \nI store the error messages in ViewData (and transfer them to TempData if I respond in a RedirectResult).</p>\n\n<p>The problem is: <strong>if a child action causes an error it will not get displayed</strong>, as they (at least the ones further down the page) are executed AFTER the partial view is rendered.</p>\n\n<p>Right now the only, somewhat desperate idea I have is to render the messages into javascript at the bottom of the layout page, and have that javascript update the error display boxes. But it smells bad, I shouldn't need client-side code for this.</p>\n\n<p>Is there a way to have a partial view \"lazy rendered\", after everything else?</p>\n"},{"tags":["javascript","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13272401,"title":"ASP.net Rejuicer combine js dynamically","body":"<p>Im looking at using Rejuicer <a href=\"http://rejuice.me/\" rel=\"nofollow\">http://rejuice.me/</a> to combine all the JS files of my ASP.net MVC site into one JS file.  This works ok  but it doesnt allow me to add or remove JS files without having to also reset/recycle the application, as all the configuration is set in the Application_Start() event handler. </p>\n\n<p>Does anyone have any ideas on how I can get around this. Or if there is a better alternative to Rejuicer? </p>\n\n<p>EDIT:</p>\n\n<p>I've come up with this possible solution below. Can anyone see any issue with this?</p>\n\n<p>In the _layout.cshtml file I have code similar to this.  The list of js files for the site can be defined here without having to reset or recompile the site. </p>\n\n<pre><code>@{\n\n    //combine all JS files into one file using Rejuicer. \n    List&lt;string&gt; JsFiles = new List&lt;string&gt;();\n\n    //define list of JS files here\n    JsFiles.Add(\"~/Scripts/One.js\");\n    JsFiles.Add(\"~/Scripts/Two.js\");      \n\n\n    if (System.Web.HttpContext.Current.Application[\"JsFileListing\"] != null)\n    {\n\n        var JsFileRejuiced = (List&lt;string&gt;)System.Web.HttpContext.Current.Application[\"JsFileListing\"];\n\n        //check if we have any new/removed/renamed files\n        if (JsFiles.Except(JsFileRejuiced).Count()&gt; 0 || JsFileRejuiced.Except(JsFiles).Count() &gt; 0)          \n        {\n            //force application reset\n            HttpRuntime.UnloadAppDomain();                \n        }\n    }\n\n    if (System.Web.HttpContext.Current.Application[\"JsFileListing\"] == null)\n    {\n\n        var Combiner = Rejuicer.OnRequest.ForJs(\"~/Combined.js\").Combine;\n\n        foreach (var file in JsFiles)\n        {\n            Combiner.File(file);\n        }\n        Combiner.Configure();\n\n        System.Web.HttpContext.Current.Application[\"JsFileListing\"] = JsFiles;\n    }\n}\n@Rejuicer.Rejuiced.JsFor(\"~/Combined.js\")\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":13230918,"title":"Entity Framework - Many To Many Relationship Inserting Duplicate To Parent Table","body":"<p>I'm trying to do a simple insert with a many-to-many relationship using Entity Framework 5.</p>\n\n<p>I have two POCO classes as follows.</p>\n\n<pre><code>public class Category\n{\n    public virtual string Title { get; set; }\n    public virtual DateTime EntryDate { get; set; }\n    public virtual DateTime LastUpdated { get; set; }\n    public virtual ICollection&lt;Article&gt; Articles { get; set; }\n}\n\npublic class Article\n{\n    public virtual string Title { get; set; }\n    public virtual string Content { get; set; }\n    public virtual DateTime EntryDate { get; set; }\n    public virtual DateTime LastUpdated { get; set; }\n    public virtual ICollection&lt;Category&gt; Categories { get; set; }\n}\n</code></pre>\n\n<p>And the following fluent api mapping code...</p>\n\n<pre><code>public class CategoryMap : EntityTypeConfiguration&lt;Category&gt;\n{\n    public CategoryMap()\n    {\n        this.ToTable(\"Categories\");\n        this.HasKey(x =&gt; x.ID);\n\n        this.Property(x =&gt; x.Title).IsRequired().HasMaxLength(255);\n    }\n}\n\npublic class ArticleMap : EntityTypeConfiguration&lt;Article&gt;\n{\n    public ArticleMap()\n    {\n        this.ToTable(\"Articles\");\n        this.HasKey(x =&gt; x.ID);\n\n        this.HasMany(x =&gt; x.Categories)\n            .WithMany(x =&gt; x.Articles)\n            .Map(x =&gt;\n            {\n                x.ToTable(\"MapArticleCats\");\n                x.MapLeftKey(\"CategoryID\");\n                x.MapRightKey(\"ArticleID\");\n            });\n\n        this.Property(x =&gt; x.Title).IsRequired().HasMaxLength(255);\n        this.Property(x =&gt; x.Content).IsRequired().HasMaxLength(4000);\n    }\n}\n</code></pre>\n\n<p>The entity framework will then generate both Category and Article tables along with a third mapping table of which details were specified in the ArticleMap code (MapArticleCats), which looks like the following in SQL Server.</p>\n\n<p>ArticleID - int<br/>\nCategoryID -int<br/></p>\n\n<p>The following code (give or take a few lines) adds the Categories to the Article in my controller.</p>\n\n<pre><code>IEnumerable&lt;Category&gt; GetCats = CategoryRepository.GetAll();\n\n//DO SOME CODE TO FIGURE WHICH CATEGORIES I NEED.\nIEnumerable&lt;Category&gt; Categories = InferCategoriesFromPostedData(Model.Categories, GetCats);\n\nforeach (Category c in Categories)\n{\n    Article.Categories.Add(c);\n}\n</code></pre>\n\n<p>This seems to create some strange behavior on insert. It will insert a new category into the category table (DUPLICATE) and also insert the newly created CategoryID (instead of the original id) and the correct ArticleID to the MapArticleCats table.</p>\n\n<p>Can anyone see where Ive gone wrong?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","login","forms-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13273375,"title":"Why does my login page keep reloading, without trying to authenticate?","body":"<p>In Controllers/AccountController.cs:</p>\n\n<pre><code>public class AccountController : Controller\n{\n    //\n    // GET: /Account/Login\n    public ActionResult Login()\n    {\n        return View();\n    }\n    ...\n}\n</code></pre>\n\n<p>In web.config:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/Login\" defaultUrl=\"~/Home/Index\" name=\".ASPXFORMSAUTH\"/&gt;\n&lt;/authentication&gt;\n&lt;authorization&gt;\n  &lt;deny users=\"?\"/&gt;\n&lt;/authorization&gt;\n</code></pre>\n\n<p>In Views/Account/Login.aspx:</p>\n\n<pre><code>&lt;script runat=\"server\" type=\"text/C#\"&gt;\n    protected void Page_Load(object sender, EventArgs e) {...}\n    protected void OnAuthenticate(object sender, AuthenticateEventArgs e) {...}\n    protected void OnLoggedIn(object sender, EventArgs e){...}\n    protected void OnLoginError(object sender, EventArgs e){...}\n&lt;/script&gt;\n\n...\n\n&lt;asp:Login ID=\"login1\" runat=\"server\" \n           DestinationPageUrl=\"~/Views/Home/Index.aspx\"\n           OnAuthenticate=\"OnAuthenticate\" \n           OnLoggedIn=\"OnLoggedIn\" \n           OnLoginError=\"OnLoginError\"&gt;\n    ...\n    &lt;asp:Button ID=\"loginButton\" runat=\"server\" CommandName=\"Login1\" Text=\"Login\" ValidationGroup=\"login1\" TabIndex=\"4\" /&gt;\n    ...\n&lt;/asp:Login&gt;\n</code></pre>\n\n<p><code>Page_Load</code> is called, but then <code>OnAuthenticate</code>, <code>OnLoggedIn</code>, and <code>OnLoginError</code> are never called. Why is that?</p>\n\n<p>I am using MVC, and what happens after clicking the \"Login\" button is I am taken back to the AccountController. This returns the Login.aspx View, so the login page just gets reloaded.</p>\n"},{"tags":["c#","asp.net","html","asp.net-mvc","webclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13273688,"title":"Right Accept Type?","body":"<p>In my ASP.NET MVC app, I am providing a link to a .csv file:</p>\n\n<pre><code>WebClient wc = new WebClient();\n                    wc.Headers.Add(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)\");\n                    wc.Headers.Add(\"Accept\", \"text/plain,text/html,application/xml;q=0.9,*/*;q=0.8\");                   \n                    wc.Headers.Add(\"Accept-Charset\", \"ISO-8859-1,utf-8;q=0.7,*;q=0.3\");\n                    byte[] csvBytes = wc.DownloadData(url);\n                    return File(csvBytes, \"application/octet-stream\", \"Target.csv\"); \n</code></pre>\n\n<p>The url returns the following data:</p>\n\n<pre><code>&lt;string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\n\"PAUL\",\"SMITH\",\"A &amp; P CONSTRUCTION\",\"211 N JACKSON ST\",\"PAPILLION\",\"NE\",\"68046\" \"JEROME\",\"HALSEY\",\"A A A LOCATING INC\",\"1906 SOUTHVIEW DR\",\"NEW YORK\",\"NY\",\"68046\" \"MIKE\",\"GIBILISCO\",\"ABSOLUTE SECURITY INC\",\"944 S JEFFERSON ST\",\"OMAHA\",\"NE\",\"68102\"\n&lt;/string&gt;\n</code></pre>\n\n<p>When I open the .csv, I get the right data except for first row/first column:</p>\n\n<pre><code>&lt;string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\"PAUL\"  SMITH   A &amp;amp; P CONSTRUCTION  211 N JACKSON ST    PAPILLION   NE  68046\n</code></pre>\n\n<p>What Accept type should I use to get rid of the string tag.</p>\n"},{"tags":["asp.net-mvc","session","authentication","session-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13274169,"title":"HowTo use Session in ASP.NET with custom session key parameter","body":"<p>Is it possible to use ASP.NETs session state with URL like</p>\n\n<pre><code>http://myserver/somesite?sessionKey=thekey\n</code></pre>\n\n<p>The problem is, that I have to write a site for a client software which authenticates a user by a request like </p>\n\n<pre><code>http://myserver/somesite?user=xyz&amp;passwd=xyz\n</code></pre>\n\n<p>The client expects than to get a session key as result if the authentication was successful.\nThis session key will then be used as variable in the query as shown above. The client does not support cookies.</p>\n\n<p>How can I implement this behavior by using ASP.NET MVC 4?</p>\n\n<p>P.S.: I know it is absolutly not the way to go but I am not in position to change the client.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13273144,"title":"What approach should be used for model binding to an exisiting session object?","body":"<p>Here's my problem:</p>\n\n<p>We have an intranet asp.net mvc 3 application with a controlled set of users. We have a Person class, that contains a large amount of information, that is initially loaded and stored in the session. The data/editing for this object spans across many screens. Basically, each screen is a subset of the Person's data.  </p>\n\n<p>I'm trying to take advantage of the built in model binding in asp.net mvc. Should I create a data class that binds the form data from each screen and then updates my session object using a service object?  </p>\n\n<p>Example below: DxFormData contains a subset of the person data and will only be used as a parameter on this method. </p>\n\n<pre><code> public ActionResult Dx(DxFormData data)\n {\n    // Update current session Person object with data passed in if modelstate is valid\n    var viewModel = this.GetDxViewModel();        \n    return View(viewModel);\n }\n\npublic class DxForm Data\n{\n    public string AdmitDx { get; set; }\n    public string PrinDx { get; set; }\n}\n</code></pre>\n\n<p>I'm looking for thoughts on this approach and if there's a better solution available to me. The problem that I see, is that the person class contains all the data and I'm creating another class with a subset of that data. Obviously, duplicating the properties.</p>\n\n<p>Side note: I did write a custom model binder that returned the session person for binding. However, I am continually getting errors when it attempts to bind. </p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13274127,"title":"Deploying a site as a role to Azure - DirectoryNotFoundException - approot / siteroot","body":"<p>I've been examining the event logs for the WebApp I'm trying to automatically deploy and the only problem I can find is this (Azure event log): </p>\n\n<pre><code>An unhandled exception occurred. Type: System.IO.DirectoryNotFoundException Process ID: 1784\nProcess Name: WaIISHost\nThread ID: 1\nAppDomain Unhandled Exception for role Website_IN_0\nException: Could not find a part of the path 'E:\\approot'.\n</code></pre>\n\n<p>So I have a poke and sure enough, nothing lives there and the directory doesn't even exist. However I then realise the site exists in E:\\sitesroot.... so why is it looking in approot?</p>\n\n<p>This is my service definition:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;ServiceDefinition name=\"WebsiteAzure\" xmlns=\"etc\"&gt;\n  &lt;WebRole name=\"Website\" vmsize=\"Small\"&gt;\n    &lt;Sites&gt;\n      &lt;Site name=\"Web\"&gt;\n        &lt;Bindings&gt;\n          &lt;Binding name=\"Endpoint1\" endpointName=\"Endpoint1\" /&gt;\n        &lt;/Bindings&gt;\n      &lt;/Site&gt;\n    &lt;/Sites&gt;\n    &lt;Endpoints&gt;\n      &lt;InputEndpoint name=\"Endpoint1\" protocol=\"http\" port=\"80\" /&gt;\n    &lt;/Endpoints&gt;\n    &lt;Imports&gt;\n      &lt;Import moduleName=\"Diagnostics\" /&gt;\n    &lt;/Imports&gt;\n  &lt;/WebRole&gt;\n&lt;/ServiceDefinition&gt;\n</code></pre>\n\n<p>Is that right?</p>\n\n<p>For the record the deployment works fine with visual studio but i'm trying to automate with powershell which is where I'm getting the issue. I'm pretty sure it has all the .dlls it requires and the config and definition are correct so why is it choking on this directory?</p>\n"},{"tags":["javascript","asp.net-mvc","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13273978,"title":"HTML5 number input with polyfill","body":"<p>I'm using the HTML5 number input, with a polyfill (https://github.com/jonstipe/number-polyfill) to handle older browsers. </p>\n\n<p>The page / input is working good. I get to input values, use the spinner buttons, all great. But the value is formatted like \"0.00\", default en-US culture. The site I'm building runs on the Dutch culture settings, which uses \"0,00\" for number formatting. </p>\n\n<p>Now upon postback, MVC reads \"4.6\" as \"46\", which obviously isn't what I want. So now I'm looking for a good way of dealing with this. I know I could adapt the javascript or use a custom binder on the MVC side to fix the fault. But in that case I would be assuming that it's always one or the other format. Most ideally, I'd like to follow the users' setting (which is what MVC does on the serverside). So when an English users uses the site, he/she can enter \"4.6\" and Dutch users can enter \"4,6\".</p>\n\n<p>But that's a \"nice to have\", if it's too complicated I'll go with Dutch style inputting for now.</p>\n"},{"tags":["c#","asp.net-mvc","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13057682,"title":"Custom validation class - How to make universal","body":"<p>I am attempting to create a custom validation attribute for my MVC application.  My code as written, works great for the properties specified in the code.  I now want to expand it, so it  is more general, because I have 5 other properties I would like to use this same attribute on.<br>\nThe general idea is if the specified other property is true, then the property attached to the attribute must be > 0.</p>\n\n<p>I assume the way to do this is to create a constructor that accepts the value of the property and the value of the other property, but I can't seem to get it going.  The specific problem I having is I can't find the correct way to pull in the needed values.</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>public class MustBeGreaterIfTrueAttribute : ValidationAttribute\n{\n    protected override ValidationResult IsValid(object value, ValidationContext context)\n    {\n        var model = context.ObjectInstance as HistoryViewModel;\n        //ValidationResult result = null;\n\n        // Validate to ensure the model is the correct one\n        if (context.ObjectInstance.GetType().Name == null)\n        {\n            throw new InvalidOperationException(string.Format(\n                    CultureInfo.InvariantCulture, \"Context of type {0} is not supported. \"\n                                                  + \"Expected type HistoryViewModel\",\n                                                   context.ObjectInstance.GetType().Name));\n        }\n\n        // Here is the actual custom rule\n        if (model.HistoryModel.IsRetired == true)\n        {\n            if (model.CounterA == 0)\n            {\n                return new ValidationResult(\"Please enter more information regarding your History\");\n            }\n        }\n        else if ( model.HistoryModel.IsRetired == true )\n        {\n            if ( model.ROCounter &gt; 0 )\n\n            return ValidationResult.Success;\n        }\n\n        // If all is ok, return successful.\n        return ValidationResult.Success;\n\n    }\n\n    //  Add the client side unobtrusive 'data-val' attributes\n    //public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    //{\n\n    //}\n\n}\n</code></pre>\n\n<p>Thank you for you time.</p>\n"},{"tags":["jquery","asp.net-mvc","requirejs"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":196,"score":0,"question_id":11878542,"title":"How do I make RequireJS reliable?","body":"<p>RequireJS works for me about half the time. If I refresh the page, it randomly gets load issues.</p>\n\n<p>I'm adapting a small MVC project to use it, and doing something like this: <a href=\"http://stackoverflow.com/questions/10815454/how-does-requirejs-work-with-multiple-pages-and-partial-views\">How does RequireJS work with multiple pages and partial views?</a></p>\n\n<p>I've a common main.js that does the loading from my main _layout.cshtml.  And other partial views in widgets and elsewhere that use the technique described above. The example below is from my SignIn page: </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    require([\"jquery\", \"kendo\", \"domReady!\"], function ($, kendo) {        \n\n        $(\"#signInForm\").kendoWindow({\n            draggable: false,\n            width: \"500px\",\n            modal: true,\n            title: \"Sign In\",\n            resizable: false\n         });        \n    }); \n&lt;/script&gt;\n</code></pre>\n\n<p>It appears that sometimes Chrome loads &amp; processes the inline script before main.js (Where the path mapping and other config is defined). Requiring \"domReady\" makes no difference. </p>\n\n<p>How do I force this script to wait until require.js &amp; main.js has run?</p>\n\n<p>A less than ideal fallback is to return jQuery to it's global scope and use some kind of custom event. Do you have a better idea? Or is there a way built into RequireJS?</p>\n\n<p><strong>UPDATE:</strong> This is the work around I'm using for now in my _layout.cshtml</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.2.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function requireIt(requirements, callback) {\n        if ($(document).data(\"requireReady\") === true) {\n            require(requirements, callback);\n        } else {\n            $(document).bind(\"requireReady\", null, function () {\n                $(document).data(\"requireReady\", true); \n                require(requirements, callback);\n            });\n        }\n    }\n&lt;/script&gt; \n&lt;script data-main=\"/scripts/main\" src=\"@Url.Content(\"~/Scripts/require.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>jQuery returns to being a global fixture and my partial views with their inline scripts use this requireIt wrapper. And main.js triggers requireReady.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iframe"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13252467,"title":"ASP.NET MVC - Iframe Download Dialog not showing up","body":"<p>I need to make a file download that displays a loading icon during the processing of the file (because I don't know how long it is going to take), I decided to use an iframe, the code runs fine, but the <strong>problem is that the file download dialog box doesn't show up</strong>. </p>\n\n<p>I've tested in IE, Firefox and Chrome and it is not working in any of them.</p>\n\n<p>Here's my code:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;table id=\"progress\" style=\"visibility:hidden\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;img src=\"~/Content/Images/ajax-loader.gif\" /&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;h4&gt;please wait.&lt;/h4&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;div class=\"buttons\"&gt;\n    &lt;input type=\"button\" value=\"Ok\" class=\"button\" id=\"downloadButton\"&gt;\n&lt;/div&gt;\n\n&lt;iframe id=\"iframe\" style=\"visibility:hidden\"&gt;&lt;/iframe&gt;\n\n&lt;script&gt;\n    $(document).ready(function () {\n\n        $('#downloadButton').click(function () {\n\n            $('#progress').show();\n            $('input:button').attr(\"disabled\", true);\n\n            $('#iframe').src = \"@Url.Action(\"GenerateFile\", \"Files\", null)\";\n\n            $('#iframe').load(\"GenerateFile\", function () {\n                $('input:button').attr(\"disabled\", false);\n                $('#progress').hide();\n            });\n        });\n\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Server side Action:</p>\n\n<pre><code>[HttpGet]       \npublic void GenerateFile(Filters viewModel)        \n{        \n    var result = GetCustomers().WithName(viewModel.Name);        \n    StringBuilder file = new StringBuilder();\n\n    foreach (var customer in result)        \n    {        \n        // fill up the string builder with csv format       \n    }        \n\n    System.Web.HttpContext.Current.Response.AddHeader(\"content-disposition\",\"attachment; filename=Customers.csv\");        \n    System.Web.HttpContext.Current.Response.ContentType = \"application/csv\";        \n    System.Web.HttpContext.Current.Response.Write(file);        \n    System.Web.HttpContext.Current.Response.End();        \n}       \n</code></pre>\n\n<p>Any help would be appreciated, thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13270396,"title":"can't figure out routing in asp.net mvc","body":"<p>I'm doing my first steps in asp.net mvc trying to develop web api.</p>\n\n<p>I have the following routing function:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapRoute(\n        name: \"cdApiDefault\",\n        url: \"api/{controller}/{action}/{token}/{mid}/{id}\",\n        defaults: new {\n            token = UrlParameter.Optional,\n            mid = UrlParameter.Optional,\n            id =  RouteParameter.Optional }\n    );\n}\n</code></pre>\n\n<p>and the following controller:</p>\n\n<pre><code>namespace cdapi.Controllers\n{\n    public class PostsController : ApiController\n    {\n        // GET api/posts\n        public IEnumerable&lt;string&gt; Get()\n        {\n            return new string[] { \"GET_value1\", \"GET_value2\" };\n        }\n\n        // GET api/posts/5\n        public string Get(int id)\n        {\n            return \"value!!!!!!!!!!!!!!!!!\";\n        }\n\n        // POST api/posts\n        public void Post([FromBody]string value)\n        {\n        }\n\n        // PUT api/posts/5\n        public void Put(int id, [FromBody]string value)\n        {\n        }\n\n        // DELETE api/posts/5\n        public void Delete(int id)\n        {\n        }\n\n        public String GetTest(String token, String mid)\n        {\n            return token + \" - \" + mid;\n        }\n    }\n}\n</code></pre>\n\n<p>the following call </p>\n\n<blockquote>\n  <p>hxxp://localhost:52628/api/posts/5</p>\n</blockquote>\n\n<p>(in my browser) yields some result, i.e., the function GET is being called and return a value.</p>\n\n<p>However, when I try </p>\n\n<blockquote>\n  <p>hxxp://localhost:52628/api/posts/GetTest/MyTestToken/myTestMid</p>\n</blockquote>\n\n<p>comes back with <em>'the resource can not be found'</em> error message.</p>\n\n<p>I thought that the <strong>{Action}</strong> should contain the function to call and that the <strong>'token'</strong> and <strong>'mid'</strong> should contain the values I specify. What do I do wrong? </p>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":4,"favorite_count":17,"up_vote_count":32,"down_vote_count":0,"view_count":11959,"score":32,"question_id":2386365,"title":"maxlength attribute of a text box from the DataAnnotations StringLength in Asp.Net MVC","body":"<p>I am working on an MVC2 application and want to set the maxlength attributes of the text inputs.</p>\n\n<p>I have already defined the stringlength attribute on the Model object using data annotations and it is validating the length of entered strings correctly.  </p>\n\n<p>I do not want to repeat the same setting in my views by setting the max length attribute manually when the model already has the information.  Is there any way to do this?</p>\n\n<p>Code snippets below:</p>\n\n<p>From the Model:</p>\n\n<pre><code>[Required, StringLength(50)]\npublic string Address1 { get; set; }\n</code></pre>\n\n<p>From the View:</p>\n\n<pre><code>&lt;%= Html.LabelFor(model =&gt; model.Address1) %&gt;\n&lt;%= Html.TextBoxFor(model =&gt; model.Address1, new { @class = \"text long\" })%&gt;\n&lt;%= Html.ValidationMessageFor(model =&gt; model.Address1) %&gt;\n</code></pre>\n\n<p>What I want to avoid doing is:</p>\n\n<pre><code>&lt;%= Html.TextBoxFor(model =&gt; model.Address1, new { @class = \"text long\", maxlength=\"50\" })%&gt;\n</code></pre>\n\n<p>I want to get this output:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"Address1\" maxlength=\"50\" class=\"text long\"/&gt;\n</code></pre>\n\n<p>Is there any way to do this?</p>\n"},{"tags":["c#","javascript","asp.net-mvc","signalr"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":5003,"score":1,"question_id":7594978,"title":"Using SignalR with ASP.NET MVC3","body":"<p>I'm attempting to use SignalR hubs in an application, but am having no luck currently. I've read through <a href=\"http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx\" rel=\"nofollow\">Scott Hanselman's article</a>, and also looked at <a href=\"http://beyondrelational.com/modules/24/syndicated/370/Posts/9623/signalr-with-mvc3-chat-app-build-asynchronous-real-time-persistant-connection-websites.aspx\" rel=\"nofollow\">this</a> blog post which shows how to implement it in MVC, basically doing the same thing. Unfortunately, I'm having no luck. On the client side, the javascript seems to work fine [apart from nothing happening] but when I place breakpoints in the code it shows that the controller is being called, not the hub code. The code I'm using is this:</p>\n\n<pre><code>// Client side javascript:\nvar hooking;\n$(function() {\n    // Setup SignalR\n    hooking = $.connection.hooking;\n    hooking.removeLead = function(ref) {\n        $(\"lead\" + ref).remove();\n    };\n    $.connection.hub.start();\n    }\n});\n\n// Hooking.cs (placed in application root)\npublic class Hooking : Hub\n{\n    public void Submit(string jsonString)\n    {\n        var serializer = new JavaScriptSerializer();\n        var json = serializer.Deserialize&lt;HookingLeadResult&gt;(jsonString);\n        Clients.removeLead(json.Ref); // Remove lead from client hooking windows\n        // update lead gen\n    }\n}\n</code></pre>\n\n<p>When I call <code>hooking.submit(resultJson);</code> later in my code for some reason it calls the Index action of my HookingController (which is the current page). Anyone know how to correctly call the Submit function from Hooking.cs?</p>\n"},{"tags":["asp.net","asp.net-mvc","forms-authentication"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":2309508,"title":"How about keeping roles together with the name in user.identity.name | FormsAuth.SetAuthCookie(strUser + \"|\" + strUserRole)","body":"<p>Is it a good idea to keep the user's role together with his name, for example with <code>setAuthCookie</code>, do you:</p>\n\n<pre><code>formsAuthSrv.SetAuthCookie(strUser+strRole);\n</code></pre>\n\n<p>and you can do your own roles provider like this:</p>\n\n<pre><code>public class MyRoleProvider : RoleProvider\n    {\n        public override string[] GetRolesForUser(string username)\n        {\n             // get the roles from username and return it as an string[]      \n..     \n                return new string[] { role };\n        }\n    }\n</code></pre>\n\n<p>and when you call <code>user.identity.name</code> you have to split it to get just the username</p>\n\n<p>Is there a better alternative?</p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13272196,"title":"Azure - Troubleshooting a failed deployment","body":"<p>Is there any mechanism I can use to troubleshoot a failed deployment? The output that Azure gives me is massively unsatisfactory.</p>\n\n<pre><code>\"Role has encountered an error and has stopped. Unhandled Exception DirectoryNotFoundException.\"\n</code></pre>\n\n<p>I'm trying to automatically deploy via msbuild and powershell and the problem im encountering is curious as the deploy works perfectly when I publish from Visual Studio building the same .sln.</p>\n\n<p>The service configuration and definition is precisely the same in both instances so I'm starting to have real difficulties in understanding the actual problem. I've checked some of the <a href=\"http://blog.toddysm.com/2010/01/windows-azure-deployment-stuck-in-initializing-busy-stopping-why.html\" rel=\"nofollow\">most common problems</a> and I don't appear to be suffering from any of them.</p>\n\n<p>Additionally.... its a website.... so as far as I'm aware its not possible for any of my code to be creating unhandled exceptions at initialisation.... is it?</p>\n\n<p>Any suggestions or information how to perform a better diagnosis would be appreciated. I'm obviously doing <em>something</em> wrong in my publish process but its really tricky to track down the problem without adequate diagnostics here.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13268519,"title":"\"Error Loading Page\" message, show error","body":"<p>I'm developping my first MVC4 application and have now on several occasions gotten a 'Error loading page' message. This is nice if you're in a production environment but when developing an application it would be much more productive to see what's wrong, see the exception details. Is there some way or setting to get to the exception information wich causes this message ?</p>\n\n<p>regards,\nJurjen.</p>\n"},{"tags":["c#","ajax","asp.net-mvc","asp.net-web-api"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13271804,"title":"ASP.net WebAPI return a file through ajax call","body":"<p>I am currently looking for a way to force a download of a file which is returned through a WebAPI controller.</p>\n\n<p>I was using <a href=\"http://www.shawnmclean.com/blog/2012/04/force-download-of-file-from-asp-net-webapi/\" rel=\"nofollow\">http://www.shawnmclean.com/blog/2012/04/force-download-of-file-from-asp-net-webapi/</a> as a reference.</p>\n\n<p>On my client I am using an ajax GET call to send up an ID of an object and try to download the file</p>\n\n<pre><code>    exportList: (foo, callback) =&gt;\n        path = '/api/export/id'\n        path = path.replace(\"id\", foo.id)\n        $.ajax(\n            url: path,\n            dataType: 'text',\n            success: (data) =&gt;\n                callback(data)\n            error: (data) =&gt;\n                callback(false)\n        )\n</code></pre>\n\n<p>On the server-side, I have the above URI routed to the method below</p>\n\n<pre><code>    [AcceptVerbs(\"GET\")]\n    public HttpResponseMessage ExportList(int id)\n    {\n        string file = fooService.ExportList(id);\n\n        if (file == null)\n        {\n            return Request.CreateResponse(HttpStatusCode.NoContent);\n        }\n        HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);\n        result.Content = new StringContent(file);\n        result.Content.Headers.ContentType = new MediaTypeHeaderValue(\"application/octet-stream\");\n        result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue(\"attachment\");\n        result.Content.Headers.ContentDisposition.FileName = \"List.csv\";\n\n        return result;\n    }\n</code></pre>\n\n<p>The fooService.ExportList method simply creates a csv string. </p>\n\n<p>When watching the request come back to the client, the response does have the csv string in it, but the client is not prompted or forced to download it.  </p>\n\n<p>Is this the correct way to go about this?</p>\n"},{"tags":["asp.net-mvc","bundle","signalr"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":203,"score":2,"question_id":11556110,"title":"SignalR and MVC bundle","body":"<p>I'm trying to use SignalR with MVC bundle, but having problem finding out how to include the /signalr/hubs script into the bundle. For now I have to insert the path in between jquery.signalR and my code. That will result in three javascript file requests.</p>\n\n<p>Is there any way to include /signalr/hubs into my mvc bundle?</p>\n"},{"tags":["asp.net-mvc","oauth","google-api","google-analytics-api"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13271745,"title":"Displaying Google Analytics data publicly","body":"<p>I have Google Analytics setup on a site that I work on.  I'd like to expose some of the top viewed pages to users on the site.  I'd like the information to be available without users needing to have access to the the analytics account or even having a google account.  I'd like the web server to act as the broker for retrieving the data and displaying it.</p>\n\n<p>Is this possible with their API?  I was using it not that long ago (and it was working briefly), but, then I kept running into 401 and 403 responses which made me wonder if what I am trying to do is possible with their OAuth security.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework","objectcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13260422,"title":"ObjectContext Error in Dev but Not when Published","body":"<p>Given the classes below, firing up the website in Visual Studio gives me the following error when <code>home/index</code> is called (this is actually the inner exception).</p>\n\n<p><code>A transport-level error has occurred when receiving results from the server. (provider: Shared Memory Provider, error: 0 - The handle is invalid.)</code></p>\n\n<pre><code>at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)\nat System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)\nat System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()\nat System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\nat System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)\nat System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()\nat System.Data.SqlClient.TdsParserStateObject.ReadBuffer()\nat System.Data.SqlClient.TdsParserStateObject.ReadByte()\nat System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)\nat System.Data.SqlClient.SqlDataReader.ConsumeMetaData()\nat System.Data.SqlClient.SqlDataReader.get_MetaData()\nat System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\nat System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)\nat System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)\nat System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\nat System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)\nat System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\nat System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)\nat System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)\n</code></pre>\n\n<p>However if I publish the exact same code locally and hit the site using WebMatrix, it works fine.</p>\n\n<p>I'm using SQL Server 2008 Express too if that makes a difference. Please advise if any more information is needed.</p>\n\n<p>Controller</p>\n\n<pre><code>public class HomeController : BaseController\n{\n    public ActionResult Index()\n    {\n        var candidates = BusinessObj.AllOf&lt;Candidate&gt;().ToList();\n        return View(candidates);\n    }\n}\n</code></pre>\n\n<p>BaseController</p>\n\n<pre><code>public class BaseController : Controller\n{\n    protected ITestBusinessObject BusinessObj { get; set; }\n\n    public BaseController()\n    {\n        BusinessObj = new Business.TestBusinessObj();\n    }\n}\n</code></pre>\n\n<p>TestBusinessObj (Entities is an EF edmx class)</p>\n\n<pre><code>public class TestBusiness : ITestBusinessObject\n{\n    private Entities DB = new Entities();\n    private string ContainerName = \"Entities\";\n\n    public IEnumerable&lt;T&gt; AllOf&lt;T&gt;() where T : class, new()\n    {\n        return DB.CreateObjectSet&lt;T&gt;(ContainerName.GetEntitySetName&lt;T&gt;());\n    }\n\n    private static string GetEntitySetName&lt;T&gt;(this string containerName) where T : new()\n    {\n        var name = new T().GetType().Name;\n        if (name.EndsWith(\"y\"))\n        {\n            name = name.Substring(0, name.Length - 1) + \"ies\";\n        }\n        else\n        {\n            name = name + \"s\";\n        }\n        return string.Format(\"{0}.{1}\", containerName, name);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":39,"score":4,"question_id":13271279,"title":"Is there a difference between Url.Content(\"~/...\") and \"~/\" for urls in ASP.NET MVC?","body":"<p>I'm dealing with a web application that resides within a subdirectory on a domain, and I'm attempting to discern the most idiomatic way of inserting a proper URL into an <code>img</code> tag. While the following both produce the same HTML on the client machine, I'm not sure which is more \"correct\"</p>\n\n<ul>\n<li><code>&lt;img src=\"~/Content/images/blah.png\" /&gt;</code></li>\n<li><code>&lt;img src=\"@Url.Content(\"~/Content/images/blah.png\")</code></li>\n</ul>\n\n<p>Both of these produce an absolute path of <code>/subfolder/Content/images/blah.png</code>, so both work, but I'm curious which one is the right way of doing it.</p>\n\n<p><strong>Is there any difference between these two approaches (for example, is one being resolved by a different mechanism than the other?), or is the former just syntactic sugar for the latter?</strong></p>\n"}]}
{"total":44782,"page":3,"pagesize":100,"questions":[{"tags":["ios","asp.net-mvc","cookies","ios6","mobile-safari"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13235016,"title":"Mobile Safari refusing to set a new value to an existing cookie","body":"<p>I'm having a problem which is only occurring in Safari on mobile devices. Chrome on iOS, as well as any desktop browser do not show this behavior.</p>\n\n<p>I have an app which stores some information in a cookie when the user logs in. It seems however, that the browser is refusing to accept the cookie if it already exists, or if it has been created but subsequently deleted (my app deletes the cookie on logout). I use the following method to set the cookie:</p>\n\n<pre><code>public static void SaveLoginTokenCookie(HttpResponseBase response, string token)\n{\n    HttpCookie cookie = new HttpCookie(LOGIN_COOKIE);\n    cookie.Values[LOGIN_TOKEN] = token;\n    cookie.Expires = DateTime.Now.AddYears(10);\n    if (response.Cookies[LOGIN_COOKIE] != null)\n        response.Cookies.Set(cookie);\n    else\n        response.Cookies.Add(cookie);\n}\n</code></pre>\n\n<p>If I clear the cookies using the \"Clear Cookies and Data\" option in the Safari settings, my cookie will be set successfully the first time I log into my app. If I logout and then login again, the cookie is not set; it is null when I attempt to retrieve it.</p>\n\n<p>I've tried not deleting the cookie on logout, but in that case the value assigned during the first login is taken rather than the new one. I've also tried only using <code>Cookies.Add()</code> instead of <code>Cookies.Set()</code>, but the behavior is the same.</p>\n\n<p>What's more is that this is code that <em>used</em> to work fine, and still does on any browser except mobile Safari. The problem seems to have started iOS6 was released, but as I'm not 100% sure of that, I can't assume that iOS6 is the cause.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13271048,"title":"MVC 4 RouteCollection.LowercaseUrls breaks when using Area","body":"<p>A new property to RouteCollection was added with .NET Framework 4.5:</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.lowercaseurls.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.lowercaseurls.aspx</a></p>\n\n<p>This works great, until you add an Area to your project. All Urls are propercase again.</p>\n\n<p>Any ideas why this happens? It's simple to reproduce:</p>\n\n<ol>\n<li>Create new MVC 4 Internet Application (.NET 4.5)</li>\n<li>Start RouteConfig.RegisterRoutes function with: routes.LowercaseUrls = true;</li>\n<li>Run the project and you'll see all generated Urls are now lowercase.</li>\n<li>Add an Area to the project.</li>\n<li>Run the project again and you'll see all Urls are propercase again!</li>\n</ol>\n\n<p>I boiled it down to the moment where context.MapRoute gets executed in AreaRegistration.RegisterArea. When I comment that out, I got lowercase Urls. Uncomment it, and the propercase Urls are back.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-membership","asp.net-mvc-4"],"answer_count":2,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":1276,"score":7,"question_id":12236533,"title":"Migrating from ASP.NET Membership to SimpleMembership in MVC4 RTM","body":"<p>The new MVC4 RTM internet application templates use the SimpleMembership providers as descibed here <a href=\"http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx/\">SimpleMembership</a></p>\n\n<p>My existing MVC website uses the ASP.Membership framework and ideally I would like to migrate the user data in these tables to the new SimpleMembership tables.  My reasons for wanting to do this are: </p>\n\n<ol>\n<li>Cleaner integration with the rest of the my database which uses EF</li>\n<li>Support for Azure and OAuth out of the box</li>\n<li>Use latest MVC4 RTM Controllers/Views without needing to modify</li>\n<li>I've always felt the existing membership implementation was a little bloated for what I needed</li>\n</ol>\n\n<p>So I wrote a SQL script today to migrate the data in the existing ASP.Net Membership tables into the new Simple Membership tables.  This can be found <a href=\"http://gist.github.com/3585239\">here</a></p>\n\n<p>Testing the login in my MVC 4 website the password verification is failing.  I believe the SimpleMembership uses a different password algo than the old Membership framework as new passwords created under the SimpleMemberShip framework look a lot longer.</p>\n\n<p>So my question is since I was using the \"hashed\" password format in the old ASP.Net membership providers and the users original password is irretrievable, what options do I have to get the SimpleMembership provider working.</p>\n\n<p>I guessing some options are:</p>\n\n<ol>\n<li>Get my users to reset their passwords</li>\n<li>Getting the SimpleMembership provider to use the same password algo as the old ASP.Net Membership providers.</li>\n<li>Revert the new MVC 4 RTM internet application templates to use the old ASP.Net MemberShip providers.  This is the least desirable options for me as I would like to use the SimpleMemberShip framework.</li>\n</ol>\n\n<p>I would suspect many people are also looking to migrate their existing membership databases to the new SimpleMemberShip provider.</p>\n\n<p>Any help greatly appreciated.</p>\n\n<p>Cheers</p>\n\n<p>Jim </p>\n"},{"tags":["android","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13270746,"title":"How to upload audio file from android to server through .net webservice?","body":"<p>We have a web application made in MVC3 which is hosted in Android &amp; Iphone also .Now the android developer is trying to upload an audio file through our method which is written in controller as http post method . They say they are sending the file in form of multipart chunks or byte buffer body . So I took variable of type byte array[] in my method but the type is not coinciding with their datatype .  I even tried to keep string , byte , httppostedfilebase types , but still no success . Any help would be appreciated .</p>\n"},{"tags":["javascript","asp.net-mvc","twitter-bootstrap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13270913,"title":"Tabbing between tabs when tabbing to end of page","body":"<p>I am using twitter bootstraps nav-tabs on some pages and I want a special behavior when using the tab-key. When I tab to the end of the page (the last field/button) I want to open the next tab instead of continue to tab through various fields (like the address field, search field, links, etc). </p>\n\n<p>I know that you can change the tab shown with javascript (http://twitter.github.com/bootstrap/javascript.html#tabs), the question is more on how to know when you have tabbed to the bottom of the page. I am a beginner i javascript, but guess that it is the appropriate tool.</p>\n\n<p>If possible I would like to make this general behavior, so it works for all pages with tabs (and also so it doesn't complain if the page doesn't have any tabs). </p>\n\n<p>I am working in asp.net mvc 4, if that matters.</p>\n"},{"tags":["jquery","html","css","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13270887,"title":"How can I implement hover option in jquery for my menu?","body":"<p>I am working on design of menu. I want to display it on hover event of one button. And on click event also. I want to implement it using jquery. Now when I was testing it I noticed that when I hover out the button menu disappeared before anyone click on menu item. </p>\n\n<p>How can I implement this? I don't want to disappear menu when any one is in menu division.  </p>\n"},{"tags":["html","asp.net-mvc","jquery-ajax","razor","json-encode"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13270637,"title":"ASP.NET MVC Show View after Ajax call to a Controller","body":"<p>I have a View with a submit form: when I click it a jquery/ajax function is called. This function has to encode the View Model, call a Controller action and show the View returned.\nNow, this is my function:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction Analyze() {\n    var urlact = '@Url.Action(\"Analysis\")';\n    var model = '@Html.Raw(Json.Encode(Model))';\n    $.ajax({\n        data: model,\n        type: \"POST\",\n        url: urlact,\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        success: function (data) {\n            //WHAT HERE??\n        }\n    });\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>And the <em>Analysis</em> action is a kind of</p>\n\n<pre><code>public ViewResult Analysis(IEnumerable&lt;Azienda&gt; aziende) {\n        Debug.WriteLine(aziende.Count());\n        return View(aziende);\n    }\n</code></pre>\n\n<p>Returning a View!\nHow can I display that View on success:function(data)?\nI tried changing dataType to <em>html</em> and calling on success <strong>alert(data)</strong> but I had problems with the encoded model, I tried commenting the contentType line but same model-encoding issue.</p>\n\n<p>Does someone know how to do that?\nA js/query/ajax workaround-trick is fine, too.</p>\n\n<p>Thanks you all!</p>\n"},{"tags":["asp.net-mvc","gzip"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13270288,"title":"Issues facing working with GZip","body":"<p>I am facing a problem while trying to use GZip .\nI have used the below entries in my config files i.e., applicationHost.config and web.config</p>\n\n<pre><code>&lt;httpCompression&gt;\n  &lt;staticTypes&gt;\n    &lt;add mimeType=\"text/*\" enabled=\"true\" /&gt;        \n    &lt;add mimeType=\"*/*\" enabled=\"false\" /&gt;\n  &lt;/staticTypes&gt;\n  &lt;dynamicTypes&gt;\n    &lt;add mimeType=\"text/*\" enabled=\"true\" /&gt;        \n    &lt;add mimeType=\"*/*\" enabled=\"false\" /&gt;\n  &lt;/dynamicTypes&gt;\n  &lt;scheme name=\"gzip\" dll=\"%Windir%\\system32\\inetsrv\\gzip.dll\" dynamicCompressionLevel=\"4\" /&gt;\n&lt;/httpCompression&gt;\n&lt;urlCompression doDynamicCompression=\"true\" doStaticCompression=\"true\"/&gt;\n</code></pre>\n\n<p>I have my application being deployed on IIS 7.5.\nI have seen these suggestions over the net and I happen to hear that I would not need an exclusive stream code to be written. An entry to config file would suffice.\nBut still I get an error when my WCF service returns me a collection object with records over 1000. The object is a serializable object.\nPlease help me in this issue</p>\n"},{"tags":["jquery","asp.net-mvc","grid","3rd-party-library"],"answer_count":12,"favorite_count":103,"up_vote_count":105,"down_vote_count":0,"view_count":48680,"score":105,"question_id":177275,"title":"grid controls for ASP.NET MVC?","body":"<p>If you are using ASP.NET MVC how are you doing grid display?\nRolled your own?\nGot a library from somewhere?</p>\n\n<p>These are some of the known grid display solutions I have found for ASP.NET MVC</p>\n\n<ul>\n<li><a href=\"http://www.codeproject.com/KB/aspnet/MVCFlexigrid.aspx\" rel=\"nofollow\">ASP.NET MVC Flexgrid </a>   - Has nice column layout method</li>\n<li><a href=\"http://blog.maartenballiauw.be/post/2008/06/Code-based-ASPNET-MVC-GridView.aspx\" rel=\"nofollow\">Code based ASP.NET MVC GridView</a> - simple, small, clean</li>\n<li><a href=\"http://weblogs.asp.net/shijuvarghese/archive/2008/07/23/asp-net-mvc-grid-view-using-mvccontrib.aspx\" rel=\"nofollow\">MVC Contrib</a> - grid from codePlex</li>\n<li><a href=\"http://www.trirand.com/blog/?page%5Fid=6\" rel=\"nofollow\">jQueryGrid</a>  - jQuery grid</li>\n<li><a href=\"http://www.datatables.net/\" rel=\"nofollow\">Datatables</a>  - jQuery plugin - believed to be section 508 compliant</li>\n<li><a href=\"http://extjs.com/deploy/dev/examples/samples.html\" rel=\"nofollow\">extJS</a> - cross browser RIA framework - has grid support</li>\n<li><a href=\"http://www.reconstrukt.com/ingrid/\" rel=\"nofollow\">Ingrid</a> - jQuery data grid</li>\n<li><a href=\"http://jqwidgets.com/\" rel=\"nofollow\">jqxGrid</a> - jQuery data grid</li>\n<li><a href=\"http://demos.telerik.com/aspnet-mvc/\" rel=\"nofollow\">Terlerik MVC</a> - jQuery based grid that is GPL v2 licensed, commercial version also available</li>\n<li><a href=\"http://mvccontrolstoolkit.codeplex.com/\" rel=\"nofollow\">MVC Controls Toolkit</a> - Client Site Based Grid</li>\n<li><a href=\"http://www.infragistics.com/dotnet/netadvantage/jquery-controls/grid.aspx\" rel=\"nofollow\">Infragistics igGrid</a> - jQuery based MVC grid</li>\n<li><a href=\"http://www.dhtmlx.com/blog/?p=1349\" rel=\"nofollow\">dhtmlxGrid</a> - Ajax-enabled JavaScript grid control </li>\n<li><a href=\"http://demo.aspnetawesome.com/Dinners\" rel=\"nofollow\">ASP.net MVC Awesome Ajax List</a> - a different, very flexible approach, can be used as a grid</li>\n<li><a href=\"http://mvc.syncfusion.com/sfmvcsamplebrowser/10.2.0.56/Grid_MVC/Samples/4.0/Razor\" rel=\"nofollow\">Syncfusion MVC Grid</a> - Commercial grid</li>\n<li><a href=\"http://demo.aspnetawesome.com/GridDemo\" rel=\"nofollow\">ASP.net MVC Awesome Grid</a> - part of the Awesome library (jQuery based)  </li>\n</ul>\n\n<p>If you know of anything else that you are using or know to be good, please let me know.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13270097,"title":"Operation could destabilize runtime, works local, not on server","body":"<p>Here is my Action:</p>\n\n<pre><code>Imports PagedList\n\n&lt;EmployeeAuthorize()&gt;\nFunction SearchFoods(Optional ByVal date1 As String = \"\", Optional ByVal keyword As String = \"\", Optional page As Integer = 1) As ActionResult\n\n    If String.IsNullOrEmpty(date1) Then\n        date1 = Date.Now\n    End If\n\n    If String.IsNullOrEmpty(keyword) Then\n        keyword = Nothing\n    End If\n\n    Dim food = db.Tbl_Foods.Where(Function(x) x.Shrt_Desc.Contains(keyword)).OrderBy(Function(x) x.Food_ID).ToList\n\n    For Each item In food\n        item.Shrt_Desc = item.Shrt_Desc.Replace(\",\", \", \")\n    Next\n\n    ViewBag.MyDate = date1\n    ViewBag.MyKeyword = keyword\n\n    ' set the page size and number\n    Dim pageSize = 20\n    Dim pageNumber = page\n\n    TempData(\"CurrentPage\") = \"My Wellness\"\n    TempData(\"CurrentWellnessPage\") = \"Food Log\"\n    Return View(\"\", \"_FinalWellnessSubPageLayout\", food.ToPagedList(pageNumber, pageSize))\n\nEnd Function\n</code></pre>\n\n<p>I believe this is caused, somehow, by the \"ToPagedList\" since this is the first time I am using it.  It works fine on local, but not when I publish to the server.  The stack trace looks like this:</p>\n\n<blockquote>\n  <p>[VerificationException: Operation could destabilize the runtime.]<br>\n  PagedList.PagedList<code>1..ctor(IEnumerable</code>1 superset, Int32 pageNumber,\n  Int32 pageSize) +0<br>\n  PagedList.PagedListExtensions.ToPagedList(IEnumerable`1 superset,\n  Int32 pageNumber, Int32 pageSize) +62</p>\n</blockquote>\n\n<p>It also says:</p>\n\n<blockquote>\n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n</blockquote>\n\n<p>What is the exception?  How can I find what exception \"occurred during the execution?\"</p>\n\n<p>Does anyone know how to fix this error on the server?  Thank you.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-membership","viewdata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13269786,"title":"Storing Additional Information About a Logged In ASP.NET MVC User","body":"<p>I need to store an ID against a user that will be used in EVERY action that is carried out on my web application. I had hoped to use a customized authorization <code>ActionFilterAttribute</code> (on an entire controller) to populate the <code>ViewData</code> with this additional info, but it turns out that a whole STACK of stuff runs before these <code>ActionFilterAttributes</code> do e.g. ModelBinding, Controller construction</p>\n\n<p>I thought perhaps there may be a way to extend the <code>HttpContext.User.Identity</code> to store additional data but have no idea even where to start.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13269868,"title":"What if All Actions call same function in Asp.net MVC4?","body":"<p>All, In my application design, Some the actions of Controller classes will call the same method firstly whenever it was called. the code snippet looks like below . please review it .thanks.</p>\n\n<pre><code>public class Controller1 : Controller\n    {\n\n        public ActionResult Action1()\n        {\n            FunctionA(); //This function must be called firstly.This function is defined somewhere. \n            return View(\"a1\");\n        }\n\n        public ActionResult Action2()\n        {\n            FunctionA(); \n            return View(\"a2\");\n        }\n\n    }\n\npublic class Controller2 : Controller\n    {\n\n        public ActionResult Action3()\n        {\n            FunctionA(); \n            return View(\"a3\");\n        }\n\n        public ActionResult Action4()\n        {\n            FunctionB(); \n            return View(\"a4\");\n        }\n\n    }\n</code></pre>\n\n<p>In current case ,  <code>Action1</code>,<code>Action2</code> in <code>Controller1</code> and <code>Action3</code> in <code>Controller2</code> will call the same <code>FunctionA()</code> , Based on the DRY theory, It is better to define a base controller or method something , I don't know how to make it in Asp.net MVC4. Please help me .thanks.</p>\n"},{"tags":["mysql","asp.net-mvc","visual-studio"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13269830,"title":"how to add values in the database","body":"<p>In my table I have 5 fields,In those fields,Those are</p>\n\n<pre><code>1.questionId\n2.questionUserId\n3.SurveyId\n4.answer\n5.answerId\n</code></pre>\n\n<p>while I was saving records,I am passing \"answer\" field and \"survey\" field as a parameter to my action method.\nMy answer parameter is in the form of string separated my semicolumn.I am splitting this one using \"semicolumn\" and by executing the for loop I am trying to save values into the database.</p>\n\n<p>How I have to save is that,For adding new record,In the for loop all record values are same except \"answer\" and \"answerId\" which is auto incrementing.\nwhile I am saving,For the first time of execution new record is saving but for next iteration,It is throwing <code>DuplicateKeyUnhandledByUserCode</code> and <code>Instance of 'DataModel.question_answer' with identity '1850137295-2-1-2-11' already exists in the cache of the object scope.</code></p>\n"},{"tags":["c#",".net","asp.net-mvc","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":39,"score":2,"question_id":13268203,"title":"Can we do the DBContext in MVC3 with Razor?","body":"<p>Can I connect to the DB using <code>DBContext</code> in MVC3 by defining the <code>ConnectionString</code> in Web.config?</p>\n\n<p>If possible can anyone provide me some links too?</p>\n"},{"tags":["asp.net-mvc","webforms","inline-code"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2727,"score":3,"question_id":639250,"title":"Inline Code on Webform Property","body":"<p>Why doesn't this display the date/time when rendered?</p>\n\n<pre><code>&lt;asp:Label runat=\"server\" ID=\"test\" Text=\"&lt;%= DateTime.Now.ToString() %&gt;\" &gt;&lt;/asp:Label&gt;\n</code></pre>\n\n<p>Is there anyway to make this work?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13269490,"title":"ASP.NET MVC Modular development","body":"<p>Ever since ASP.NET entered the scene, there has never been a clean out-of-the-box way to create a library (views + code) that you could easily deploy within an ASP.NET site.</p>\n\n<p>So, if we take the scenario where you have a solution with:</p>\n\n<ul>\n<li>an ASP.NET site </li>\n<li>a class library</li>\n</ul>\n\n<p>As far as controllers or code-behind goes, that's easy enough to deal with. The latter are just compiled into the class library, the former are part of the class library too and can easily be detected by convention in the web app. Now for views, be it ascx, aspx or cshtml, it becomes a different story. As far as I can tell, these are the options:</p>\n\n<ol>\n<li><p><strong>Embedded views</strong>, served through a VirtualPathProvider. You keep the run-time compilation, but you cannot change the view from within the web site, though you <em>can</em> set it up to hook into the fallback chain of available view locations.</p></li>\n<li><p><strong>Compiled views</strong>. This basically boils down to the code-behind scenario. I think the same remarks hold as for embedded views.</p></li>\n<li><p><strong>NuGet package</strong> which copies over the view files. Seems the most feasible, but also imposes unwanted build overhead.</p></li>\n</ol>\n\n<p>My main problem is that there's no one-size-fits-all scenario to facilitate both development and production deployment, that:</p>\n\n<ul>\n<li>keeps your projects nice and tidy: separate project with models, controllers and views</li>\n<li>fits into you development cycle: just edit a view and try it</li>\n<li>enabled easy deployment: once developed, apply it to other projects</li>\n</ul>\n\n<p>I'm curious how other developers deal with this, and if anyone found a way of dealing with all these issues?</p>\n\n<p><em>Edit: note that I am aware of the fact that a lot of CMS's do facilitate it in some way, but so far, I have not encountered the one that solves the above stuff.</em></p>\n"},{"tags":["javascript","asp.net-mvc","telerik","telerik-grid","telerik-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13269096,"title":"Telerik MVC Grid Validation Localization","body":"<p>I have a telerik grid in my view and i defined the property localizable to <code>pt-PT</code>\nin my <code>web.config</code> i have the globalization like this: </p>\n\n<pre><code>enableClientBasedCulture=true culture=pt-PT uiCulture=auto\n</code></pre>\n\n<p>I also added the file <code>GridLocalization.pt-PT.resx</code> to the globalresources (althought this should have nothing to do with the validation). Still it validates my datepicker in another culture format.</p>\n\n<p>How can i change the culture validation format?</p>\n"},{"tags":["asp.net-mvc","vb.net","json","streaming","newtonsoft"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13268237,"title":"Returning a JSON stream from an ApiController","body":"<p>I've got a <em>large</em> JSON Object which I need to return from an MVC ApiController.</p>\n\n<p>I can't simply return the JSON Object as the internal serializer barfs on the serialized contents being too long.</p>\n\n<p>I don't want to serialize to string and then return the string as we could be dealing 5-6MB of data and that seems like a waste of memory for no purpose.</p>\n\n<p>What I want to do is use the Newtonsoft JSON Serializer to write to the response stream directly.</p>\n\n<pre><code>Dim Ret = Client.Search(Model) ''Get the results object\nDim Response As New HttpResponseMessage()\nUsing MemoryStream As New IO.MemoryStream\n    Using StreamWriter As New StreamWriter(MemoryStream)\n        Using JsonWriter As JsonWriter = New JsonTextWriter(StreamWriter)\n            Dim Serializer As New JsonSerializer\n            Serializer.Serialize(JsonWriter, Ret)\n        End Using\n    End Using\n    Response.Content = New StreamContent(MemoryStream)\n    Return Response\nEnd Using\n</code></pre>\n\n<p>Unfortunately, this results in the connection being reset unexpectedly - I'm guessing this is due to the stream being disposed of before it's finished sending the result?</p>\n\n<p>Even if I strip out all the <code>Using</code> blocks and just leave everything for the GC as here:</p>\n\n<pre><code>Dim Ret = Client.Search(Model)\nDim Response As New HttpResponseMessage()\nDim MemoryStream As New IO.MemoryStream\nDim StreamWriter As New StreamWriter(MemoryStream)\nDim JsonWriter As JsonWriter = New JsonTextWriter(StreamWriter)\nDim Serializer As New JsonSerializer\nSerializer.Serialize(JsonWriter, Ret)\nResponse.Content = New StreamContent(MemoryStream)\nReturn Response\n</code></pre>\n\n<p>I get a 0-byte response instead. Can someone please point me in the right direction?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","nunit","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":207,"score":0,"question_id":10401409,"title":"using moq to populate httpcontext.request","body":"<p>I am using the <a href=\"http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx\" rel=\"nofollow\">hanselman tutorial</a> to use Moq to create unit tests for methods that take httpcontext as input parameter. </p>\n\n<pre><code>public static class MvcMockHelpers\n{\n\n    public static HttpContextBase FakeHttpContext()\n    {\n        var context = new Mock&lt;HttpContextBase&gt;();\n        var request = new Mock&lt;HttpRequestBase&gt;();\n        var response = new Mock&lt;HttpResponseBase&gt;();\n        var session = new Mock&lt;HttpSessionStateBase&gt;();\n        var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n        context.Setup(ctx =&gt; ctx.Request).Returns(request.Object);\n        context.Setup(ctx =&gt; ctx.Response).Returns(response.Object);\n        context.Setup(ctx =&gt; ctx.Session).Returns(session.Object);\n        context.Setup(ctx =&gt; ctx.Server).Returns(server.Object);\n\n        return context.Object;\n    }\n\n    public static HttpContextBase FakeHttpContext(string url)\n    {\n        var context = FakeHttpContext();\n        context.Request.SetupRequestUrl(url);  &lt;---- error here\n        return context;\n    } \n\n\n\n}\n</code></pre>\n\n<p>I am getting the following error on <strong>context.Request.SetupRequestUrl(url);</strong></p>\n\n<p><em>Error  1   'System.Web.HttpRequestBase' does not contain a definition for 'SetupRequestUrl' and no extension method 'SetupRequestUrl' accepting a first argument of type 'System.Web.HttpRequestBase' could be found (are you missing a using directive or an assembly reference?)</em></p>\n\n<p>Please help. </p>\n\n<p>I am trying to find a very simple easy to follow tutorial on setting up httpcontext request object and pass into method with context input parameter and be able to create unit test but all the examples in google either do not work or are complicated. please help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","telerik","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13198317,"title":"Template column inside DetailView in Telerik Grid MVC","body":"<p>My nested template column is not appearing in my markup when page loads.  I´m trying to load a grid with a template column within a DetailView of another parent-grid.  I can see my data being passed and clearly the \"Name\" of the UnitPeriod appears but nothing within my template column, so it seems as the data is being passed into the grid.  I´ve checked the source with firebug and that column always loads empty.  Can any1 spot why?</p>\n\n<pre><code>&lt;div&gt;\n@(Html.Telerik().Grid&lt;RentableUnit&gt;()\n    .Name(\"RentableUnits\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(e =&gt; e.UnitID).Hidden();\n        columns.Bound(e =&gt; e.Name).Width(75);\n    })\n    .ClientEvents(events =&gt; events.OnRowDataBound(\"employees_onRowDataBound\")\n                            .OnDetailViewExpand(\"unit_onDetailViewExpand\")\n                            .OnDetailViewCollapse(\"unit_onDetailViewCollapse\"))\n    .DetailView(details =&gt; details.ClientTemplate(\n        Html.Telerik().Grid&lt;UnitPeriod&gt;()\n            .Name(\"UnitPeriod_&lt;#= UnitID #&gt;\")\n            .Columns(columns =&gt;\n                {\n                    columns.Bound(o =&gt; o.Name);\n                    columns.Template(@&lt;text&gt;\n                     @foreach (Day day in item.Days)\n                     {\n                         if (!day.IsRentable)\n                         {\n                             &lt;img src=\"../../Content/Images/Houses/icon_lokad.png\"/&gt;\n                         }\n                         else\n                         {\n                             &lt;img src=\"../../Content/Images/Houses/icon_opid.png\"/&gt;\n                         }\n                     }\n             &lt;/text&gt;);\n            })\n            .ClientEvents(events =&gt; events.OnRowDataBound(\"orders_onRowDataBound\"))\n            .DataBinding(dataBinding =&gt; dataBinding.Ajax()\n            .Select(\"SelectedUnitPeriod\", \"Home\", new { unitId = \"&lt;#= UnitID #&gt;\" }))\n            .ToHtmlString()\n    ))\n    .DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"RentableUnits\", \"Home\"))\n    .Sortable()\n    )\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var derpinski = \"\";\n    function expandFirstRow(grid, row) {\n        if (grid.$rows().index(row) == 0) {\n            grid.expandRow(row);\n        }\n    }\n\nfunction loadTabGridContent(e) {\n    var url = '/Home/TabGridContent/';\n    $.ajax({\n        type: 'GET',\n        dataType: 'html',\n        url: url,\n        success: function (data) {\n            alert('success');\n            $('#TabGridContent').html(data);\n        }\n    });\n}\n\nfunction employees_onRowDataBound(e) {\n    var grid = $(this).data('tGrid');\n    expandFirstRow(grid, e.row);\n}\n\nfunction orders_onRowDataBound(e) {\n    var grid = $(this).data('tGrid');\n    expandFirstRow(grid, e.row);\n}\n\nfunction unit_onDetailViewExpand(e) {\n    var mstRow = e.masterRow;\n    var unitNumber = mstRow.cells[1].innerHTML;\n    derpinski = derpinski + unitNumber + \",\";\n}\n\nfunction unit_onDetailViewCollapse(e) {\n    var mstRow = e.masterRow;\n    var unitNumber = mstRow.cells[1].innerHTML;\n    derpinski = derpinski.replace(unitNumber + \",\", \"\");\n}\n</code></pre>\n\n<p> </p>\n"},{"tags":["asp.net-mvc","json","http","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13262719,"title":"What's the proper return value for MVC4 WebAPI when HTTP request is invalid","body":"<p>I am using ASP.NET MVC4 WebAPI for exposing json services. If a HTTP GET request received but the URL is invalid (e.g. an invalid id), what should I return as best practice? I tried to return null and the response is a null string, is this a good way for handling this?</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13267343,"title":"ASP.NET MVC form engine for an intranet solution?","body":"<p>Is there one that's worth looking into as an intranet solution ? The only one i've found that's even half decent is \n<a href=\"http://survey.codeplex.com/\" rel=\"nofollow\">Survey</a>.</p>\n\n<p>Reasons i don't want to use it is i would prefer ASP.NET MVC over Webforms and the project above has given me many headaches starting from security issues (for example last time i checked, HTML injection was allowed by default) and ending with the usability of the solution from an end user perspective. \nThe form engine's user interface and usability is just not acceptable for the problem i'm trying to solve.</p>\n\n<p>I was very impressed with the Java based form engine called <a href=\"http://www.orbeon.com/orbeon/fr/orbeon/builder/new\" rel=\"nofollow\">Orbeon</a>. Is there anything like that for ASP.NET MVC ?</p>\n"},{"tags":["asp.net",".net","asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12936546,"title":"File upload - video validation","body":"<p>how can I check if a file uploaded to my server by a standard html upload is a video file?</p>\n\n<p>I think file extension and mime checks are not useful as these could be faked. I tried using this script and it partially works, but for some reason it doesn't seem to validate wmv and mp4 formats.</p>\n\n<p><a href=\"http://mynkow.blogspot.co.uk/2010/05/how-to-validate-video-file.html\" rel=\"nofollow\">http://mynkow.blogspot.co.uk/2010/05/how-to-validate-video-file.html</a></p>\n\n<p>any help would be much appreciated.</p>\n\n<p>thanks</p>\n"},{"tags":["c#","jquery","asp.net-mvc","form-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13267455,"title":"Retaining form state for elements introduced by jQuery","body":"<p>I have a view which has a table with one editable row. A new editable row can be added using jQuery by clicking an image.</p>\n\n<pre><code>&lt;table width=\"100%\" class=\"rateTable\" id=\"rateTbl\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Low Range\n        &lt;/th&gt;\n        &lt;th&gt;\n            High Range\n        &lt;/th&gt;\n        &lt;th&gt;\n            Rate\n        &lt;/th&gt;            \n        &lt;th&gt;\n        &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.TextBox(\"LowRange0\")\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.TextBox(\"HighRange0\")\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.TextBox(\"Rate0\")\n        &lt;/td&gt;\n        &lt;td&gt;                \n            &lt;input type=\"image\" alt=\"new band\" src=@Url.Content(\"~/Content/images/add.gif\") id=\"addBand\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Following is the jQuery script which adds a new row.</p>\n\n<pre><code>$(\"#addBand\").click(function () {        \n    AddRow(highRange);        \n});\n\nvar AddRow = function (highRange) {\n    var tr = $(\"#rateTbl tr:last\").clone(true, true);\n\n    $(tr).find(\"input, select\")\n    .attr(\"name\", function () {\n        var parts = this.id.match(/(\\D+)(\\d+)$/);\n        if (parts != null) {\n            return parts[1] + ++parts[2];\n        }\n    })\n    .attr(\"id\", function () {\n        var parts = this.id.match(/(\\D+)(\\d+)$/);\n        if (parts != null) {\n            return parts[1] + ++parts[2];\n        }\n    });\n\n    $(\"#rateTbl tr:last\").after(tr);\n}\n</code></pre>\n\n<p>The trouble is upon form submit and subsequent validation failure, the form state does not retain the newly added row thereby losing the input values. I need to make sure that the new row added using jQuery be retained in case of validation failure.</p>\n"},{"tags":["c#","asp.net-mvc","appfabric"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13260517,"title":"Caching MVC views in AppFabric manually","body":"<p>I am trying to recreate most of the functionality of the OutputCache action filter in MVC 4 by caching view result objects myself. The reason I don't want to use the OutputCache action filter is because I can't use it with AppFabric and partial views; partial views are always stored in MemoryCache and I want the cached objects to be used across a server farm.</p>\n\n<p>The first problem I have is </p>\n\n<pre><code>{\"Type 'System.Web.Mvc.TempDataDictionary' cannot be serialized. \nConsider marking it with the DataContractAttribute attribute, and marking all of \nits members you want serialized with the DataMemberAttribute attribute.  \nIf the type is a collection, consider marking it with the \nCollectionDataContractAttribute.  See the Microsoft .NET Framework documentation for  \nother supported types.\"}\n</code></pre>\n\n<p>This makes me wonder if I should cache something else to return what is essentially the view at the end. Does anyone have an idea of what I should cache instead to recreate the view or a different approach for caching partial views over a server farm? I do not want to use third party plugins for this.</p>\n\n<p>Thanks</p>\n\n<p>Update: I started caching the string representation of the partial view like so:</p>\n\n<pre><code>using (StringWriter sw = new StringWriter())\n        {\n            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, \"ViewName\");\n            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);\n            viewResult.View.Render(viewContext, sw);\n            view = sw.GetStringBuilder().ToString();\n        }\n</code></pre>\n\n<p>This has made it easy to just retrieve the string in cache and return it as content in the action. I'm still looking for other suggestions or a better way to do this.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","automapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13266570,"title":"Automapper - Returning right value but not mapping","body":"<p>In my MVC webapplication I got the following automapper code:</p>\n\n<p><strong>The configure:</strong></p>\n\n<pre><code> public static void Configure()\n        {\n            Mapper.CreateMap&lt;string, List&lt;Ruimte&gt;&gt;().ConvertUsing&lt;StringCombinatieRuimtesConverter&gt;();\n        }\n</code></pre>\n\n<p><strong>The custom converter:</strong></p>\n\n<pre><code>public class StringCombinatieRuimtesConverter : ITypeConverter&lt;string, List&lt;Ruimte&gt;&gt;\n    {\n        #region Implementation of ITypeConverter&lt;in string,out List&lt;Ruimte&gt;&gt;\n\n        public List&lt;Ruimte&gt; Convert(ResolutionContext context)\n        {\n            if (context.SourceValue == null)\n            {\n                return new List&lt;Ruimte&gt;();\n            }\n\n            return context.SourceValue.ToString().Split(',').Select(r =&gt; new Ruimte { Id = int.Parse(r) }).ToList();\n        }\n\n        #endregion\n    }\n</code></pre>\n\n<p><strong>And I call it with the following code:</strong></p>\n\n<pre><code>            var ruimteList = new List&lt;Ruimte&gt;();\n\n            // Update the CombinatieVan\n            Mapper.Map(command.CombinatieRuimteVan, ruimteList);\n</code></pre>\n\n<p>If I debug the command.CombinatieRuimteVan is: 2,3,4,6. This is fine.\nNow if I debug the converter it does return 4 objects of the class \"Ruimte\" with as Id the numbers stated before. But after the Mapper.Map method is done the \"ruimteList\" is still an empty list.</p>\n\n<p>Does anyone know what is going wrong here? The automapper works fine on another spot in my application where I automap a whole entity containing the \"CombinatieRuimteVan\" set. But when I sololy convert the string to the list it doesn't seem to work.</p>\n"},{"tags":["asp.net-mvc","gridview","devexpress"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":35,"score":0,"question_id":13266682,"title":"Postback selection devexpress gridview in ASP.NET MVC","body":"<p>I am using Devexpress GridView in a ASP.NET MVC web site. What I am trying to do is give list in which they can select rows and then preform a action on those selected rows. </p>\n\n<p>For example:\nThe list shows customers and after selecting some I can either select a button 'Send Email' that post those people back and the selected action. Or a action like 'Remove' in which the people and that action would be posted back.</p>\n\n<p>What would the proper way be of doing this. I have a ASP.NET MVC Razor application</p>\n\n<p>Regards,\nSebastiaan Vreeken</p>\n"},{"tags":["c#","xml","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13262279,"title":"Populate KeyValue Model from XML File in .Net MVC","body":"<p>I have a database model with several KeyValue entities where values will not change often.  Rather than storing this data in a database, I am hoping to store in a code file or xml file.  I was wondering how I can get a list of these KeyValues through my application.  I was thinking an XML file in app_data folder would be ideal, but I don't know who to consume such a file through a model class.  Maybe there is a better alternative?</p>\n"},{"tags":["javascript","asp.net-mvc","mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13265800,"title":"Redirect to controller using JavaScript and MVC","body":"<p>Im trying to redirect to a Controller from JavaScript using this line of code</p>\n\n<pre><code> location.href = '/Dashboard/';\n</code></pre>\n\n<p>It redirects to the Dashboard but on my dashboard view this method is called when the document loads </p>\n\n<pre><code> $.post(\"Dashboard/UsersGet\", {}, function (dataSet) {\n    //do something with the dataset\n }); \n</code></pre>\n\n<p>I then get this error.</p>\n\n<pre><code>POST http://localhost:1414/Dashboard/Dashboard/UsersGet 404 (Not Found) \n</code></pre>\n\n<p>I can see that dashboard is added to the url twice. How can I redirect to a Controller without this happening?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":486,"score":0,"question_id":4291365,"title":"ASP.NET MVC HttpContext Getting IdentityName after LogOn","body":"<p>HttpContext.Current.User.Identity.Name returns null after LogOn.   I am using IIS7.0 framework 4.0. and  vs 2010. i have another project which targetFramework is 3.5. it works good. But targetFramework of my new project is 4.0.  and when calling HttpContext.Current.User.Identity.Name it returns null</p>\n"},{"tags":["c#","asp.net-mvc","razor","infragistics","ignite-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13121902,"title":"Infragistics grid's GET returning empty response","body":"<p>I'm trying to use Infragistics' grid to display a list of items from my Database. I'm using code-first method with Entity Framework in an MVC application with Razor engine. Every thing is working fine in the view except the Infragistics grid.</p>\n\n<p>Here is my home view:</p>\n\n<pre><code>@using Infragistics.Web.Mvc\n@model IEnumerable&lt;BusinessModel.Models.TestPlan&gt;\n\n@{\n    ViewBag.Title = \"Home\";\n}\n\n@( Html.Infragistics().Grid&lt;BusinessModel.Models.TestPlan&gt;(Model)\n.AutoGenerateColumns(true)\n.DataSourceUrl(Url.Action(\"igListTestPlan\"))\n.DataBind()\n.Render())\n</code></pre>\n\n<p>Here is my controller:</p>\n\n<pre><code>[GridDataSourceAction]\npublic ActionResult igListTestPlan()\n{\n    return View(service.getListTestPlan());\n}\n</code></pre>\n\n<p>Using firebug I can clearly see that the request is sent with a status code \"200 OK\", but the response tab is empty. It also causes an error in the console (in infragistics.js):</p>\n\n<pre><code>Uncaught TypeError: Cannot read property 'length' of undefined \n</code></pre>\n\n<p>I guess it's because of the empty response.</p>\n\n<p><strong>What I tried:</strong></p>\n\n<p>Debugging my controller showed me that <code>return View(service.getListTestPlan());</code> doesn't return an empty list: I have 3 valid items in.</p>\n\n<p>I also tried <code>Html.Infragistics().Grid&lt;BusinessModel.Models.TestPlan&gt;(Model__.ToList())</code> but nothing changed. Also <code>Html.Infragistics().Grid(Model)</code> tells me I've got invalid parameters</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc","infragistics","ignite-ui"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12786040,"title":"Infragistics MVC Helper Custom Column","body":"<p>I'm currently using the ASP.NET MVC helpers in MVC4, with the Infragistics igGrid control, and am looking for a way to insert a custom column in order to implement AJAX calls for CRUD functionality. The only solutions that I've found involve exposing the entity which isn't an option in the current architecture.  Essentially I just need to know how to add a new column that can contain a simple href to call an existing REST API that references the model on the specific row.</p>\n\n<p>Here's what I have so far...</p>\n\n<pre><code>&lt;div class=\"queue-grid\"&gt;\n@( Html.Infragistics().Grid(Model).Columns( c =&gt;\n {\n     c.For(m =&gt; m.DateSubmitted).HeaderText...\n     c.For(m =&gt; m.RequestorName).HeaderText...\n     c.For(m =&gt; m.OrganizationName).HeaderText(...\n     c.For(m =&gt; m.CategoryName).HeaderText(...\n     c.For(m =&gt; m.DesiredCompletionDate).HeaderText(...\n     c.For(m =&gt; m.ChargeCode).HeaderText(...\n     c.For(m =&gt; m.ApprovingManagerName).HeaderText(...\n     c.For(m =&gt; m.Description).HeaderText(...\n     c. //Edit function\n     c. //Delete function\n....\n</code></pre>\n"},{"tags":[".net","asp.net-mvc","websync"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13198021,"title":"Websync 4.0 PublisherNotAllowed","body":"<p>I'm having a weird problem with websync 4.0: it works fine on my local machine, but when I deploy to a test server I get this error </p>\n\n<pre><code>System.Exception: Publication failed. result : {\"channel\":\"\\/n\\/95e4d313-27eb-441b-966d-c8630f80ec9a\",\"error\":\"606::Publisher access is disabled. Publisher access can be enabled by setting server[allowPublishers] to true in web.config.\",\"ext\":{\"fm.meta\":{\"ticketID\":\"\"}}}\n</code></pre>\n\n<p>The thing is that I have 2 web applications developed on .net:</p>\n\n<ul>\n<li>one for the website</li>\n<li>one for the websync server</li>\n</ul>\n\n<p>In both web.config files I've added </p>\n\n<pre><code>  &lt;WebSync&gt;\n    &lt;server providerType=\"FM.WebSync.Server.Providers.Sticky.InProcProvider\" httpDirectPublish=\"true\"/&gt;\n  &lt;/WebSync&gt;\n</code></pre>\n\n<p>On localhost (where it works just fine) both IIS applications point to localhost.</p>\n\n<p>From the website project I make a call via javascript to subscribe to a channel, and it works fine on both my machine and the test machine.</p>\n\n<p>But when I try to send a message (and invite both parties to join a private channel) it only works on my local machine (this message sending is done via a http post to a method from the web site server which makes a publish to the websync server thus resulting in that error.)</p>\n\n<p>Any ideas?\nAny help would be much appreciated.</p>\n\n<p>Mihai</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13264645,"title":"MVC3 Display the edit view on the same page as the list of items","body":"<p>I have a list of transactions. When I click one of them, I'd like to be able to display the edit form (populated with the selected item's data) to the right of the list. Any ideas?</p>\n\n<p>Below is the partial view that displays the list of transactions.</p>\n\n<pre><code>@model IEnumerable&lt;BudgetPlus.Models.Transaction&gt;\n@{\n    ViewBag.Title = \"Index\";\n}\n&lt;p&gt;\n    @Html.ActionLink(\"Create New\", \"Create\", null, new { @class = \"button-link\" })\n&lt;/p&gt;\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th class=\"column-Date\"&gt;Date&lt;/th&gt;\n            &lt;th class=\"column-Description\"&gt;Description&lt;/th&gt;\n            &lt;th class=\"column-Category\"&gt;Category&lt;/th&gt;\n            &lt;th class=\"column-Amount\"&gt;Amount&lt;/th&gt;\n            &lt;th class=\"action-button\"&gt;&lt;/th&gt;\n            &lt;th class=\"action-button\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        @foreach (var item in Model)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Date)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Description)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Category.DisplayName)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Amount)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.ActionLink(\"Edit\", \"Edit\", new { id = item.Id })\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.ActionLink(\"Delete\", \"Delete\", new { id = item.Id })\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;div&gt;\n    @Html.EditorForModel(\"Edit\")\n&lt;/div&gt;\n</code></pre>\n\n<p>And this is what the edit method in my TransactionController looks like.</p>\n\n<pre><code>    public ActionResult Edit(int id)\n    {\n        Transaction transaction = db.Transactions.Find(id);\n        ViewBag.CategoryId = new SelectList(db.Categories, \"Id\", \"DisplayName\", transaction.CategoryId);\n        return View(transaction);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13265026,"title":"deployment script","body":"<p>I have created deployment script using database project.\nI have also created empty database in my sql and have run that script to check.\nThe script was executed successfully but when i see the database then no table was created.\nso any idea how to use the script and what was the reason why the tables was not created. </p>\n"},{"tags":["c#","asp.net-mvc","extension-methods","timeline"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13235110,"title":"TimelineJS in C# Mvc","body":"<p>How to add TimelineJS (<a href=\"http://timeline.verite.co/\" rel=\"nofollow\">http://timeline.verite.co/</a>) to your website with C# Mvc.\nIf you want to view a complete project, visit <a href=\"http://www.m33.se/timelinejs.html\" rel=\"nofollow\">http://www.m33.se/timelinejs.html</a>.\nI know there's several peoples that wonder how to get the TimelineJs to be displayed.\nI've created some helper classes that makes it easy to extend from your original class.</p>\n\n<p>What I'm doing right now is to extend the TimlineJS javascript file with an extension that will set the current slide from (or nearest) from today's date.</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Helpers for the Timeline classes to return Json objects\n/// &lt;/summary&gt;\npublic class date\n{\n    public string startDate { get; set; }\n    public string endDate { get; set; }\n    public string headline { get; set; }\n    public string text { get; set; }\n}\n\n\npublic class timeline\n{\n    public string headline { get; set; }\n    public string text { get; set; }\n    public string type { get; set; }\n    public string lang { get; set; }\n    public List&lt;date&gt; date { get; set; }\n    public string font { get; set; }\n}\n\n\npublic class Wrapper\n{\n    public timeline timeline { get; set; }\n}\n\npublic static class Ext\n{\n    public static string Quote(this string text)\n    {\n        return string.Format(\"\\\"{0}\\\"\", text);\n    }\n\n    public static string Embed(this string text)\n    {\n        if ((!text.Contains(\"&lt;p&gt;\")) &amp;&amp; (!text.Contains(\"&lt;/p&gt;\")))\n            return string.Format(\"&lt;p&gt;{0}&lt;/p&gt;\", text);\n        return text;\n    }\n}   \n\n public JsonResult GetTimelineJs(Int32 ? pageid)\n    {\n        //Create your own list from your datasource below.\n        var tm = ActiveRecordMediator&lt;Timeline&gt;.FindFirst(Restrictions.Eq(\"PageId\", pageid));\n\n        var events = new List&lt;date&gt;();\n        var datelist = tm.GetItems();\n\n        foreach (var item in datelist) {\n            if (!item.Active) continue;\n\n            events.Add( new date {  \n                headline = item.Title, \n                text = item.Html.Embed(),   \n                startDate = new DateTime(item.EventDate.Year, item.EventDate.Month, item.EventDate.Day, item.EventDate.Hour, item.EventDate.Minute, item.EventDate.Second).ToShortDateString().Replace(\"-\", \",\"), \n                endDate = new DateTime(item.EndEventDate.Year, item.EndEventDate.Month, item.EndEventDate.Day, item.EndEventDate.Hour, item.EndEventDate.Minute, item.EventDate.Second).ToShortDateString().Replace(\"-\", \",\") }\n            );\n        }\n        //The wrapper class just surrounds the timline object.\n        var wrapper = new Wrapper\n        {\n            timeline = new timeline()\n            {\n                headline = tm.Title,\n                text = tm.Html.Embed(),\n                type = \"default\",\n                lang = \"sv\",\n                font = \"Arvo &amp; PT Sans\",\n                date = events\n            }\n        };\n\n         string json2 = JsonConvert.SerializeObject(wrapper, Formatting.Indented);\n         var dez = JsonConvert.DeserializeObject&lt;Wrapper&gt;(json2);\n\n         return Json(dez, JsonRequestBehavior.AllowGet);\n    }\n\n//This produces a timline data (Json).\n\n{\"timeline\":\n{\n\"headline\":\"Headline text\",\n\"text\":\"\\u003cp\\u003eThis is some markup text\\u003c/p\\u003e\",\n\"type\":\"default\",\n\"lang\":\"sv\",\n\"date\":[\n    {\"startDate\":\"2012,08,10\",\"endDate\":\"2012,08,15\",\"headline\":\"Love at First Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text one\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,09,09\",\"endDate\":\"2012,09,09\",\"headline\":\"Love at Second Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,10,10\",\"endDate\":\"2012,10,10\",\"headline\":\"Love at third Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,11,10\",\"endDate\":\"2012,11,12\",\"headline\":\"Love at fourth Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,12,10\",\"endDate\":\"2012,12,15\",\"headline\":\"Love at Fifth Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"}],\n\"font\":\"Arvo \\u0026 PT Sans\"}\n}\n</code></pre>\n\n<p>IMPORTANT!! \nI noticed that is Timeline.js there's this line(about line 7000):</p>\n\n<pre><code>VMM.getJSON(raw_data + \"?callback=onJSONP_Data\", VMM.Timeline.DataObj.parseJSON);\n</code></pre>\n\n<p>If you send any other data to your controller it will break and not function.\nTo allow other parameters, just change to the line below:</p>\n\n<pre><code>VMM.getJSON(raw_data + \"&amp;callback=onJSONP_Data\", VMM.Timeline.DataObj.parseJSON);\n</code></pre>\n\n<p><strong>I'm not sure that this always will return the closest date. Can anyone verify this?</strong></p>\n\n<pre><code>    public Int32 GetClosestDate(Int32 pageid)\n    {\n        var tm = ActiveRecordMediator&lt;Timeline&gt;.FindFirst(Restrictions.Eq(\"PageId\", pageid));\n        List&lt;CDate&gt; datelist = new List&lt;CDate&gt;();\n        DateTime today = DateTime.Now;\n\n        int slide = 1;\n        foreach (var item in tm.GetItems().OrderBy(d =&gt; d.Id))\n        {\n            datelist.Add(new CDate { Date = DateTime.ParseExact(item.EventDate.ToShortDateString(), \"yyyy-mm-dd\", null), Slide = slide, Diff = DateDiff(today, item.EventDate) });\n            slide++;\n        }\n\n        var closest = datelist.OrderBy(d =&gt; d.Diff).First();\n        return closest.Slide;\n    }\n\n private int DateDiff(DateTime Date1, DateTime Date2)\n    {\n        TimeSpan time = Date1 - Date2;\n        return Math.Abs(time.Days);\n    }\n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13260597,"title":"jquery grid and javascript best practice","body":"<p>Im new to jquery and need some help.</p>\n\n<p>I have written a table that act like a grid with help from jquery.</p>\n\n<p>When a user click on Name column the user will be redirected to the details page.</p>\n\n<p>Now I want to know if I can do this in a better way?</p>\n\n<p>And should the JS code be in the page or in a separated JS file?</p>\n\n<p>Here is the code.</p>\n\n<pre><code>    &lt;table id=\"grid\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th data-field=\"name\"&gt;Namn&lt;/th&gt;\n            &lt;th data-field=\"location\"&gt;Ort&lt;/th&gt;\n            &lt;th data-field=\"phone\"&gt;Telefon&lt;/th&gt;\n            &lt;th data-field=\"buildinmonth\"&gt;Bygga inom&lt;/th&gt;\n            &lt;th data-field=\"houselot\"&gt;Har tomt&lt;/th&gt;\n            &lt;th data-field=\"created\"&gt;Skapad&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        @foreach (var item in Model)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;&lt;span id=\"open\" data-id=\"@item.Id\"&gt;@item.Name&lt;/span&gt;&lt;/td&gt;\n                &lt;td&gt;@item.Location&lt;/td&gt;\n                &lt;td&gt;@item.Phone&lt;/td&gt;\n                &lt;td&gt;@item.BuildInMonth&lt;/td&gt;\n                &lt;td&gt;@item.HouseLot&lt;/td&gt;\n                &lt;td&gt;@String.Format(\"{0:d}\", item.CreatedDate)&lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;script&gt;\n        $(\"#grid\").kendoGrid({\n            scrollable: false,\n            sortable: true\n        });\n\n    $(\"#grid #open\").click(function () {\n        window.location.replace(\"/lead/details/\" + $(this).data(\"id\"));\n    });\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc","razor","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13263358,"title":"MVC: Can Partial View has effect of iframe?","body":"<p>I am wondering in MVC(ie 3) + Razor, could we make partial view have the same effect as iframe? For example right side scroll bar, fixed height, etc.</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["c#","asp.net-mvc","spark"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13262585,"title":"How to override view folder for one controller with Spark","body":"<p>I have two controllers which I want to use the same view folder.</p>\n\n<p>My two controllers are DocumentTypeAController and DocumentTypeBController which both inherit from a general document controller.</p>\n\n<p>My views are currently inside the ~\\views\\DocumentTypeA and I want the DocumentTypeB to reference the same views.</p>\n\n<p>How can I do this with the Spark view engine? (I'm using it with MVC2 [might be an oldish version])</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","autocomplete","intellisense"],"answer_count":3,"favorite_count":12,"up_vote_count":22,"down_vote_count":0,"view_count":10064,"score":22,"question_id":4158573,"title":"Need razor view engine auto-complete to work in a class library?","body":"<p>We have a modular architecture where we have some views (cshtml) files in a separate project (class library).  How can we get the <del>syntax highlighting and</del> autocomplete to work when the project isn't an MVC project?</p>\n\n<p>Please note that the class library has controllers, views, models etc.  It just doesn't have the web.config, global.asax, etc that a normal mvc project would have.</p>\n\n<p>The intellisense works for everything but the so important model:\n<img src=\"http://dl.dropbox.com/u/6142956/forums/RazorModelIntellisense.png\" alt=\"screenshot of model error\"></p>\n\n<p>With MVC3 RTM, if you hover over the Model, you can now get a better error message:</p>\n\n<blockquote>\n  <p>C:\\...\\Index.cshtml: ASP.NET runtime\n  error: There is no build provider\n  registered for the extension\n  '.cshtml'. You can register one in the\n  &lt;compilation>&lt;buildProviders>\n  section in the machine.config or\n  web.config.  Make sure is has a\n  BuildProviderAppliesToAttribute\n  attribute which includes the value\n  'Web' or 'All'.</p>\n</blockquote>\n\n<p>So I added this:</p>\n\n<pre><code>&lt;compilation&gt;\n    &lt;assemblies&gt;\n      &lt;add assembly=\"System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;/assemblies&gt;\n    &lt;buildProviders&gt;\n      &lt;add\n         extension=\".cshtml\"\n         type=\"System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor\"/&gt;\n    &lt;/buildProviders&gt;\n  &lt;/compilation&gt;\n</code></pre>\n\n<p>Then after adding the build provider, this error message appears:</p>\n\n<blockquote>\n  <p>C:\\...\\Index.cshtml: ASP.NET runtime\n  error: Could not load file or assembly\n  'System.Web.WebPages.Razor' or one of\n  its dependencies. The system cannot\n  find the file specified.\n  (C:\\...\\machine.config line 259)</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":13201250,"title":"How to get custom annotation attributes for a controller action in ASP.NET MVC 4?","body":"<p>I am working with a permission based authorization system for my app in ASP.NET MVC. \nFor this I have created a custom authorization attribute</p>\n\n<pre><code>public class MyAuthorizationAttribute : AuthorizeAttribute\n{\n    string Roles {get; set;}\n    string Permission {get; set;}\n}\n</code></pre>\n\n<p>so that I can authorize a user by both role or a specific permission key with annotation for actions like</p>\n\n<pre><code>public class UserController : Controller\n{\n    [MyAuthorization(Roles=\"ADMIN\", Permissions=\"USER_ADD\")]\n    public ActionResult Add()\n\n    [MyAuthorization(Roles=\"ADMIN\", Permissions=\"USER_EDIT\")]\n    public ActionResult Edit()\n\n    [MyAuthorization(Roles=\"ADMIN\", Permissions=\"USER_DELETE\")]\n    public ActionResult Delete()\n}\n</code></pre>\n\n<p>then I override AuthorizeCore() method in MyAuthorizationAttribute class with similar logic(pseudo code)</p>\n\n<pre><code>protected override bool AuthorizeCore(HttpContextBase httpContext)\n{\n    if(user not authenticated)\n        return false;\n\n    if(user has any role of Roles)\n        return true;\n\n    if(user has any permission of Permissions)\n        return true;\n\n    return false;\n}\n</code></pre>\n\n<p>Up to this is working fine. </p>\n\n<p>Now I need some sort of extension methods so that I can dynamically generate action url in view pages that will return action url based on MyAuthorization attribute authorization logic for the given action. Like</p>\n\n<pre><code>@Url.MyAuthorizedAction(\"Add\", \"User\")\n</code></pre>\n\n<p>will return url to \"User/Add\" if user has admin role or has permission of \"USER_ADD\" (as defined in attributes for the action) or return empty string otherwise.</p>\n\n<p>But after searching in internet for few days I could not figure it out. :(</p>\n\n<p>So far I have found only this <a href=\"http://stackoverflow.com/questions/2721869/security-aware-action-link/2722026\">&quot;Security aware&quot; action link?</a> which works by executing all action filters for the action until it fails.</p>\n\n<p>It's nice, but I think it would be an overhead to execute all the action filters for each time I call the MyAuthorizedAction() method. Besides It also didn't work with my version (MVC 4 and .NET 4.5)</p>\n\n<p>What all I need is to check authenticated user's role, permissions (will be stored in session) against authorized role and permission for the given action. Like something as following (pseudo code)</p>\n\n<pre><code>MyAuthorizedAction(string actionName, string controllerName)\n{\n    ActionObject action = SomeUnknownClass.getAction(actionName, controllerName)\n    MyAuthorizationAttribute attr = action.returnsAnnationAttributes()\n\n    if(user roles contains any in attr.Roles \n       or \n       user permissions contains any attr.Permissions)\n    {\n        return url to action\n    }\n    return empty string\n}\n</code></pre>\n\n<p>I am searching the solution of getting action attributes value for quite a long time, could not find enough good resources at all. Am I missing out right keywords? :/</p>\n\n<p>If anyone can provide me the solution that would be truly a great help.\nThanks in advance for the solutions</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":33,"score":-5,"question_id":13259741,"title":"Fileupload control display","body":"<p>how do we need to code a fileupload control so that it appears same in all browsers. Each browser shows the fileupload button in different ways. How do we need to code the CSS so that it displays the same in all browsers.</p>\n"},{"tags":["asp.net","mysql","asp.net-mvc","entity-framework"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1667,"score":2,"question_id":1440496,"title":"Problems publishing website","body":"<p>Recently I've began experimenting with ASP.NET MVC and the Entity Framework. Since my hostingprovider only provides me with MySQL I've been trying to set that up.\nLocally everything works fine, but after I publish it I get the following error:</p>\n\n<pre><code>[ProviderIncompatibleException: The store provider factory type 'MySql.Data.MySqlClient.MySqlClientFactory' does not implement the IServiceProvider interface. Use a store provider that implements this interface.]\n</code></pre>\n\n<p>Since I'm rather inexperienced with the configuring this and google is lacking a good answer I thought I'd try here.\nMy best guess is something missing in the web.config file, but can't really make out what it is. </p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","webclient"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13259348,"title":"Show downloadable link to csv","body":"<p>I am trying to show a stream of data in a downloadable .csv file with the following code:</p>\n\n<pre><code>WebClient wc = new WebClient();\n                    byte[] csvBytes = wc.DownloadData(url);\n                    return File(csvBytes, \"text/csv\", \"Test.csv\");\n</code></pre>\n\n<p>The URL returns data in this format:</p>\n\n<p>\n    \"PAUL\",\"SMITH\",\"A &amp; P CONSTRUCTION\",\"211 N JACKSON ST\",\"New York\",\"NY\",\"98055\"\n    \"JEROME\",\"HALSEY\",\"A A A LOCATING INC\",\"1906 SOUTHVIEW DR\",\"PAPILLION\",\"NE\",\"68046\"\n    \"MIKE\",\"GIBILISCO\",\"ABSOLUTE SECURITY INC\",\"944 S JEFFERSON ST\",\"PAPILLION\",\"NE\",\"84102\"\n</p>\n\n<p>The above works well, and I get a downloadable link ... but when I open the .csv file - I get the records in just one row:</p>\n\n<pre><code>\\\"PAUL\\\"    \\\"SMITH\\\"   \\\"A &amp; P CONSTRUCTION\\\"  \\\"211 N JACKSON ST\\\"    \\\"PAPILLION\\\"   \\\"NE\\\"  \\\"68046\\\"...\n</code></pre>\n\n<p>How should I modify the above code so that I get the values in the right format (without the \"\\\" and under the right columns)?</p>\n"},{"tags":["asp.net","jquery","asp.net-mvc","datepicker"],"answer_count":8,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":15064,"score":7,"question_id":901137,"title":"ASP.NET MVC - jquery datepicker","body":"<p>Ok, so I'm new to ASP.NET MVC and JQuery.</p>\n\n<p>I have followed the following example <em>to the letter</em>, and I'm not able to get the datepicker working:</p>\n\n<p><a href=\"http://codesprouts.com/post/Creating-A-DatePicker-Extension-In-ASPNet-MVC.aspx\" rel=\"nofollow\">http://codesprouts.com/post/Creating-A-DatePicker-Extension-In-ASPNet-MVC.aspx</a></p>\n\n<p>Can anyone tell me if there are any ticks or gotchas with this?</p>\n\n<p>Bernard.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13260084,"title":"Route URLs from a web client back to the web client","body":"<p>I have an ASP.NET Controller, that has a function, that simply returns a ContentResult of a WebClient.</p>\n\n<p>In this case, CNN is my testbed, my WebClient, downloads CNN as a string, into it's content, and returns the result as an ActionResult/ContentResult on a controller.</p>\n\n<p>I'm calling a RenderPartial on this action, to get CNN to display \"below\" and to the right of my current content, in its own box.</p>\n\n<p>The problem I'm running into, is when you click a link on CNN, it redirects to a \"relative\" url sometimes, and that relative url, doesn't exist in my localhost, and won't exist on my web server, thus the link fails.</p>\n\n<p>When it does redirect to an absolute url, that's also a problem, as the resulting page \"replaces\" my .NET shell.</p>\n\n<p>What I need it to do, is take any URLs that are inside that ContentResult I returned, and if any of those URLs are clicked, pass them back to my .NET application, to be downloaded by the WebClient, and rendered back in that shell.</p>\n\n<p>I'm aware I could use an IFRAME to do this instead of WebClient, but an IFRAME is impossible in my case, as its restricted by the public API we're consuming, its restricted/has flaws in the framework that API is servicing, and its blocked on some of our client machines, which we have no control over.</p>\n\n<p>Also, the client machines will be off our network, so I can't use an AJAX load, as that'd be XSS.</p>\n\n<p>One idea that I can think of, is basically to create custom routes, with filters/rules, that look for \"CNN\" like links, and pass them to my controller, as a parameter; then have my controller render my page, and pass those links to the web client.</p>\n\n<p>This would obviously be a lot of work, and not even really sure where to start with it in the routing engine.</p>\n\n<p>The only other thing I can think of that might work, is checking the validity of the URL, by attempting to see if it points to a valid link. If it doesn't point to a valid link, adding CNN's url prefix to it, and seeing if that is then a valid link. But that seems like a lot of work, for a solution that would be a heavy hit on performance, as checking each link on a page like CNN, could be very costly. Also, since I'd be running each link twice, that'd be a problem where POST operations were required, as it'd essentially run each operation twice, and being that this is a public API I'm consuming off a public framework, I wouldn't have control of the source code to safeguard against that.</p>\n\n<p>Any other suggestions?\nIs there any way to accomplish what I'm trying to do easily?</p>\n"},{"tags":["sql-server","asp.net-mvc","linq","entity-framework","sql-server-2008-r2"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":178,"score":1,"question_id":12928463,"title":"Sometimes get Timeout expired exception with Linq to EF and after a restart of server, it works fine","body":"<p>I have hosted my website at rackspace cloud server.</p>\n\n<p>Sometimes I get the below exception while fetching records from database. The strange thing is that everything works fine for a few days after a restart and also I get this exception in only a few places and not everywhere.</p>\n\n<pre><code>Exception: Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\nException Details: System.Data.SqlClient.SqlException: Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\n\nStack Trace:\n\n\n[SqlException (0x80131904): Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]\n   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +404\n   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412\n   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1363\n   System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +59\n   System.Data.SqlClient.SqlDataReader.get_MetaData() +118\n   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +6387937\n   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +6389506\n   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +538\n   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +28\n   System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +256\n   System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +19\n   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +553\n\n[EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details.]\n   DataAccessLayer.dbCustomer.CompanyCustomerByLocationId(String sortExpression, Boolean asc, String nameSearchString, Int32 startRowIndex, Int32 maximumRows, Int32&amp; TotalRecord, Int64 companyId) in D:\\Dotnet Projects\\FutureZoom\\FutureZoom\\DataAccessLayer\\dbCustomer.cs:508\n   BusinessLogic.Customer.CompanyCustomerByLocationId(String sortExpression, Boolean asc, String nameSearchString, Int32 startRowIndex, Int32 maximumRows, Int64 CompanyId) in D:\\Dotnet Projects\\FutureZoom\\FutureZoom\\BusinessLogic\\Customer.cs:431\n   FutureZoom.Areas.Admin.Controllers.CompanyController.CustomerPaging(Int32 StartIndex, Int32 PageSize, String SortExp, Boolean Asc, String SearchExp, String Where) in D:\\Dotnet Projects\\FutureZoom\\FutureZoom\\FutureZoom\\Areas\\Admin\\Controllers\\CompanyController.cs:552\n   lambda_method(Closure , ControllerBase , Object[] ) +362\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +248\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39\n   System.Web.Mvc.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12() +125\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +640\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +312\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +691\n   System.Web.Mvc.Controller.ExecuteCore() +162\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +305\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +62\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +20\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +375\n</code></pre>\n\n<p>My Linq query is mentioned below</p>\n\n<pre><code>query = context.Customers.Include(\"Company\").Include(\"Company.EmailCampaignerStatus\")\n                                           .OrderBy(m =&gt; m.EmailCampaignerStatus.FirstOrDefault().CreatedOn)                                           \n                                           .Where(m =&gt; m.FirstName.StartsWith(name) || m.LastName.StartsWith(name) || m.Email.StartsWith(name) || (m.FirstName + \" \" + m.LastName).StartsWith(name))\n                                           .Where(m =&gt; m.CompanyId == companyId)\n                                           .Where(m =&gt; m.CompanyLocationId == locationId)\n                                           .Skip(startRowIndex == 0 ? startRowIndex : startRowIndex - 1)\n                                           .Take(maximumRows)\n                                           .ToList();\n</code></pre>\n\n<p>Execution time for this query is not even 1 second on my local machine and also the same at server side after a restart but the execution time increases day by day and it fails to execute after few days (sometime fails and sometimes gives result).</p>\n\n<p>I observed that it took 31.05sec and fails and it take 51.09 sec and fails. Sometimes it takes more than 2 mins and gives result.</p>\n\n<p>I talked with rackspace people but they were unable to trace the actual cause for the same.</p>\n\n<p>Edit 1: I have seen below queries in SQL Profiler against my paging query</p>\n\n<pre><code>SELECT \n[Project3].[Id1] AS [Id], \n[Project3].[C1] AS [C1], \n[Project3].[Id] AS [Id1], \n[Project3].[CompanyId] AS [CompanyId], \n[Project3].[CompanyLocationId] AS [CompanyLocationId], \n[Project3].[FirstName] AS [FirstName], \n[Project3].[LastName] AS [LastName], \n[Project3].[Email] AS [Email], \n[Project3].[Address1] AS [Address1], \n[Project3].[Address2] AS [Address2], \n[Project3].[City] AS [City], \n[Project3].[State] AS [State], \n[Project3].[Country] AS [Country], \n[Project3].[Zip] AS [Zip], \n[Project3].[Phone] AS [Phone], \n[Project3].[SaleDate] AS [SaleDate], \n[Project3].[Notes] AS [Notes], \n[Project3].[Cost] AS [Cost], \n[Project3].[CreatedOn] AS [CreatedOn], \n[Project3].[ModifiedOn] AS [ModifiedOn], \n[Project3].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], \n[Project3].[Id2] AS [Id2], \n[Project3].[SubscriptionTypeId] AS [SubscriptionTypeId], \n[Project3].[PlanFeeAmount] AS [PlanFeeAmount], \n[Project3].[LoginId] AS [LoginId], \n[Project3].[IndustryTypeId] AS [IndustryTypeId], \n[Project3].[CompanyName] AS [CompanyName], \n[Project3].[NumberOfLocations] AS [NumberOfLocations], \n[Project3].[LogoImageName] AS [LogoImageName], \n[Project3].[WebsiteUrl] AS [WebsiteUrl], \n[Project3].[blsActive] AS [blsActive], \n[Project3].[Pending] AS [Pending], \n[Project3].[ExpiryDate] AS [ExpiryDate], \n[Project3].[C2] AS [C2], \n[Project3].[Id3] AS [Id3], \n[Project3].[UploadTicketId] AS [UploadTicketId], \n[Project3].[UploadStatus] AS [UploadStatus], \n[Project3].[CompanyId1] AS [CompanyId1], \n[Project3].[CompanyLocationId1] AS [CompanyLocationId1], \n[Project3].[CustomerId] AS [CustomerId], \n[Project3].[CreatedOn2] AS [CreatedOn1]\nFROM ( SELECT \n    [Limit2].[Id] AS [Id], \n    [Limit2].[CompanyId] AS [CompanyId], \n    [Limit2].[CompanyLocationId] AS [CompanyLocationId], \n    [Limit2].[FirstName] AS [FirstName], \n    [Limit2].[LastName] AS [LastName], \n    [Limit2].[Email] AS [Email], \n    [Limit2].[Address1] AS [Address1], \n    [Limit2].[Address2] AS [Address2], \n    [Limit2].[City] AS [City], \n    [Limit2].[State] AS [State], \n    [Limit2].[Country] AS [Country], \n    [Limit2].[Zip] AS [Zip], \n    [Limit2].[Phone] AS [Phone], \n    [Limit2].[SaleDate] AS [SaleDate], \n    [Limit2].[Notes] AS [Notes], \n    [Limit2].[Cost] AS [Cost], \n    [Limit2].[CreatedOn] AS [CreatedOn], \n    [Limit2].[ModifiedOn] AS [ModifiedOn], \n    [Limit2].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], \n    [Limit2].[Id1] AS [Id1], \n    [Limit2].[CreatedOn1] AS [CreatedOn1], \n    [Limit2].[Id2] AS [Id2], \n    [Limit2].[SubscriptionTypeId] AS [SubscriptionTypeId], \n    [Limit2].[PlanFeeAmount] AS [PlanFeeAmount], \n    [Limit2].[LoginId] AS [LoginId], \n    [Limit2].[IndustryTypeId] AS [IndustryTypeId], \n    [Limit2].[CompanyName] AS [CompanyName], \n    [Limit2].[NumberOfLocations] AS [NumberOfLocations], \n    [Limit2].[WebsiteUrl] AS [WebsiteUrl], \n    [Limit2].[blsActive] AS [blsActive], \n    [Limit2].[Pending] AS [Pending], \n    [Limit2].[ExpiryDate] AS [ExpiryDate], \n    [Limit2].[LogoImageName] AS [LogoImageName], \n    [Limit2].[C1] AS [C1], \n    [Extent4].[Id] AS [Id3], \n    [Extent4].[UploadTicketId] AS [UploadTicketId], \n    [Extent4].[UploadStatus] AS [UploadStatus], \n    [Extent4].[CompanyId] AS [CompanyId1], \n    [Extent4].[CompanyLocationId] AS [CompanyLocationId1], \n    [Extent4].[CustomerId] AS [CustomerId], \n    [Extent4].[CreatedOn] AS [CreatedOn2], \n    CASE WHEN ([Extent4].[Id] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C2]\n    FROM   (SELECT TOP (20) [Project2].[Id] AS [Id], [Project2].[CompanyId] AS [CompanyId], [Project2].[CompanyLocationId] AS [CompanyLocationId], [Project2].[FirstName] AS [FirstName], [Project2].[LastName] AS [LastName], [Project2].[Email] AS [Email], [Project2].[Address1] AS [Address1], [Project2].[Address2] AS [Address2], [Project2].[City] AS [City], [Project2].[State] AS [State], [Project2].[Country] AS [Country], [Project2].[Zip] AS [Zip], [Project2].[Phone] AS [Phone], [Project2].[SaleDate] AS [SaleDate], [Project2].[Notes] AS [Notes], [Project2].[Cost] AS [Cost], [Project2].[CreatedOn] AS [CreatedOn], [Project2].[ModifiedOn] AS [ModifiedOn], [Project2].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], [Project2].[Id1] AS [Id1], [Project2].[CreatedOn1] AS [CreatedOn1], [Project2].[Id2] AS [Id2], [Project2].[SubscriptionTypeId] AS [SubscriptionTypeId], [Project2].[PlanFeeAmount] AS [PlanFeeAmount], [Project2].[LoginId] AS [LoginId], [Project2].[IndustryTypeId] AS [IndustryTypeId], [Project2].[CompanyName] AS [CompanyName], [Project2].[NumberOfLocations] AS [NumberOfLocations], [Project2].[WebsiteUrl] AS [WebsiteUrl], [Project2].[blsActive] AS [blsActive], [Project2].[Pending] AS [Pending], [Project2].[ExpiryDate] AS [ExpiryDate], [Project2].[LogoImageName] AS [LogoImageName], [Project2].[C1] AS [C1]\n        FROM ( SELECT [Project2].[Id] AS [Id], [Project2].[CompanyId] AS [CompanyId], [Project2].[CompanyLocationId] AS [CompanyLocationId], [Project2].[FirstName] AS [FirstName], [Project2].[LastName] AS [LastName], [Project2].[Email] AS [Email], [Project2].[Address1] AS [Address1], [Project2].[Address2] AS [Address2], [Project2].[City] AS [City], [Project2].[State] AS [State], [Project2].[Country] AS [Country], [Project2].[Zip] AS [Zip], [Project2].[Phone] AS [Phone], [Project2].[SaleDate] AS [SaleDate], [Project2].[Notes] AS [Notes], [Project2].[Cost] AS [Cost], [Project2].[CreatedOn] AS [CreatedOn], [Project2].[ModifiedOn] AS [ModifiedOn], [Project2].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], [Project2].[Id1] AS [Id1], [Project2].[CreatedOn1] AS [CreatedOn1], [Project2].[Id2] AS [Id2], [Project2].[SubscriptionTypeId] AS [SubscriptionTypeId], [Project2].[PlanFeeAmount] AS [PlanFeeAmount], [Project2].[LoginId] AS [LoginId], [Project2].[IndustryTypeId] AS [IndustryTypeId], [Project2].[CompanyName] AS [CompanyName], [Project2].[NumberOfLocations] AS [NumberOfLocations], [Project2].[WebsiteUrl] AS [WebsiteUrl], [Project2].[blsActive] AS [blsActive], [Project2].[Pending] AS [Pending], [Project2].[ExpiryDate] AS [ExpiryDate], [Project2].[LogoImageName] AS [LogoImageName], [Project2].[C1] AS [C1], row_number() OVER (ORDER BY [Project2].[CreatedOn1] ASC) AS [row_number]\n            FROM ( SELECT \n                [Filter1].[Id] AS [Id], \n                [Filter1].[CompanyId] AS [CompanyId], \n                [Filter1].[CompanyLocationId] AS [CompanyLocationId], \n                [Filter1].[FirstName] AS [FirstName], \n                [Filter1].[LastName] AS [LastName], \n                [Filter1].[Email] AS [Email], \n                [Filter1].[Address1] AS [Address1], \n                [Filter1].[Address2] AS [Address2], \n                [Filter1].[City] AS [City], \n                [Filter1].[State] AS [State], \n                [Filter1].[Country] AS [Country], \n                [Filter1].[Zip] AS [Zip], \n                [Filter1].[Phone] AS [Phone], \n                [Filter1].[SaleDate] AS [SaleDate], \n                [Filter1].[Notes] AS [Notes], \n                [Filter1].[Cost] AS [Cost], \n                [Filter1].[CreatedOn] AS [CreatedOn], \n                [Filter1].[ModifiedOn] AS [ModifiedOn], \n                [Filter1].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], \n                [Limit1].[Id] AS [Id1], \n                [Limit1].[CreatedOn] AS [CreatedOn1], \n                [Extent3].[Id] AS [Id2], \n                [Extent3].[SubscriptionTypeId] AS [SubscriptionTypeId], \n                [Extent3].[PlanFeeAmount] AS [PlanFeeAmount], \n                [Extent3].[LoginId] AS [LoginId], \n                [Extent3].[IndustryTypeId] AS [IndustryTypeId], \n                [Extent3].[CompanyName] AS [CompanyName], \n                [Extent3].[NumberOfLocations] AS [NumberOfLocations], \n                [Extent3].[WebsiteUrl] AS [WebsiteUrl], \n                [Extent3].[blsActive] AS [blsActive], \n                [Extent3].[Pending] AS [Pending], \n                [Extent3].[ExpiryDate] AS [ExpiryDate], \n                [Extent3].[LogoImageName] AS [LogoImageName], \n                1 AS [C1]\n                FROM    (SELECT [Extent1].[Id] AS [Id], [Extent1].[CompanyId] AS [CompanyId], [Extent1].[CompanyLocationId] AS [CompanyLocationId], [Extent1].[FirstName] AS [FirstName], [Extent1].[LastName] AS [LastName], [Extent1].[Email] AS [Email], [Extent1].[Address1] AS [Address1], [Extent1].[Address2] AS [Address2], [Extent1].[City] AS [City], [Extent1].[State] AS [State], [Extent1].[Country] AS [Country], [Extent1].[Zip] AS [Zip], [Extent1].[Phone] AS [Phone], [Extent1].[SaleDate] AS [SaleDate], [Extent1].[Notes] AS [Notes], [Extent1].[Cost] AS [Cost], [Extent1].[CreatedOn] AS [CreatedOn], [Extent1].[ModifiedOn] AS [ModifiedOn], [Extent1].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId]\n                    FROM [dbo].[Customer] AS [Extent1]\n                    WHERE (([Extent1].[FirstName] LIKE @p__linq__0 ESCAPE N'~') OR ([Extent1].[LastName] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Email] LIKE @p__linq__2 ESCAPE N'~') OR ([Extent1].[FirstName] + N' ' + [Extent1].[LastName] LIKE @p__linq__3 ESCAPE N'~')) AND ([Extent1].[CompanyId] = @p__linq__4) AND ([Extent1].[CompanyLocationId] = @p__linq__5) ) AS [Filter1]\n                OUTER APPLY  (SELECT TOP (1) \n                    [Extent2].[Id] AS [Id], \n                    [Extent2].[CreatedOn] AS [CreatedOn]\n                    FROM [dbo].[EmailCampaignerStatus] AS [Extent2]\n                    WHERE [Filter1].[Id] = [Extent2].[CustomerId] ) AS [Limit1]\n                LEFT OUTER JOIN [dbo].[Company] AS [Extent3] ON [Filter1].[CompanyId] = [Extent3].[Id]\n            )  AS [Project2]\n        )  AS [Project2]\n        WHERE [Project2].[row_number] &gt; 0\n        ORDER BY [Project2].[CreatedOn1] ASC ) AS [Limit2]\n    LEFT OUTER JOIN [dbo].[EmailCampaignerStatus] AS [Extent4] ON [Limit2].[CompanyId] = [Extent4].[CompanyId]\n)  AS [Project3]\nORDER BY [Project3].[CreatedOn1] ASC, [Project3].[Id1] ASC, [Project3].[Id] ASC, [Project3].[Id2] ASC, [Project3].[C2] ASC\n\nSELECT \n[GroupBy1].[A1] AS [C1]\nFROM ( SELECT \n    COUNT(1) AS [A1]\n    FROM [dbo].[Customer] AS [Extent1]\n    WHERE (([Extent1].[FirstName] LIKE @p__linq__0 ESCAPE N'~') OR ([Extent1].[LastName] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Email] LIKE @p__linq__2 ESCAPE N'~') OR ([Extent1].[FirstName] + N' ' + [Extent1].[LastName] LIKE @p__linq__3 ESCAPE N'~')) AND ([Extent1].[CompanyId] = @p__linq__4) AND ([Extent1].[CompanyLocationId] = @p__linq__5)\n)  AS [GroupBy1]\n\n\nSELECT \nCASE WHEN ( EXISTS (SELECT \n    1 AS [C1]\n    FROM [dbo].[CompanyReviewSites] AS [Extent1]\n    WHERE [Extent1].[CompanyLocationId] = @p__linq__0\n)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT \n    1 AS [C1]\n    FROM [dbo].[CompanyReviewSites] AS [Extent2]\n    WHERE [Extent2].[CompanyLocationId] = @p__linq__0\n)) THEN cast(0 as bit) END AS [C1]\nFROM  ( SELECT 1 AS X ) AS [SingleRowTable1]\n\nSELECT \n1 AS [C1], \n[Extent1].[Id] AS [Id], \n[Extent1].[RiviewSiteId] AS [RiviewSiteId], \n[Extent1].[URL] AS [URL], \n[Extent1].[CompanyId] AS [CompanyId], \n[Extent1].[CompanyLocationId] AS [CompanyLocationId], \n[Extent2].[Id] AS [Id1], \n[Extent2].[ReviewSiteName] AS [ReviewSiteName], \n[Extent2].[ImageName] AS [ImageName]\nFROM  [dbo].[CompanyReviewSites] AS [Extent1]\nINNER JOIN [dbo].[ReviewSites] AS [Extent2] ON [Extent1].[RiviewSiteId] = [Extent2].[Id]\nWHERE [Extent1].[CompanyLocationId] = @p__linq__0\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","url","mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":8355042,"title":"jQuery Mobile and MVC URL debarkles?","body":"<p>Anyone who has started mixing the two must have come up with some interesting results, I certainly have and the current one is.</p>\n\n<p>I have a Drop Down List that auto submits to a new page and sends over the id value to the controller for processing. It works fine the first time but if I hit a back button (hardware,  jQuery, back or ActionLink ) and try again, unless I hit refresh it tries to tack an extra /id value on the end of the URL string. The more times I try the more it tacks, until I hit refresh and then it works. E.g..</p>\n\n<p>www.mysite.com  clicks through to www.mysite.com/Home/resultpage/2 it works but when I click back to www.mysite.com and select again, I get an error 404 because it’s looking for www.mysite.com/Home.resultpage/2/4 then if I select again I get  www.mysite.com/Home.resultpage/2/4/5 and so on until I refresh and it works again, once.</p>\n\n<p>Can I do anything about that, even if it’s a hack!</p>\n\n<p>Cheers,</p>\n\n<p>Mike.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13258504,"title":"jQuery unobtrusive form validator is not hiding error messages when resetting the form","body":"<p>I am attempting to properly validate and reset a form. The validation works fine -- fields which are required are successfully monitored. However, when I go to reset my form -- I only see the red background for my inputs clear, not the validation messages.</p>\n\n<p>According to the <a href=\"http://docs.jquery.com/Plugins/Validation/Validator/resetForm\" rel=\"nofollow\">jQuery validate documentation</a>:</p>\n\n<blockquote>\n  <p>Resets input fields to their original value (requires form plugin),\n  removes classes indicating invalid elements and <strong>hides error messages</strong>.</p>\n</blockquote>\n\n<p>Here's all the info I think is relevant to the issue. Please let me know if you would like to see anything else.</p>\n\n<p>Here is how I generate a DOM element in my Model. This element needs validation:</p>\n\n<pre><code>//Model.ascx\n&lt;div class=\"detailsRow required\"&gt;\n    &lt;%= Html.LabelFor(model =&gt; model.Site) %&gt;\n    &lt;%= Html.DropDownListFor(model =&gt; model.SelectedSiteID, new SelectList(Model.Site, \"Key\", \"Value\"))%&gt;\n    &lt;%= Html.ValidationMessageFor(model =&gt; model.SelectedSiteID)%&gt;\n&lt;/div&gt;\n\n//Model.cs\n[DisplayName(\"Site\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; Site { get; set; }\n\n[Range(0, int.MaxValue, ErrorMessage = \"Site required\")]\npublic int SelectedSiteID { get; set; }\n</code></pre>\n\n<p>Site is a select list which starts with a value of -1. Any other selection is valid. As such, I validate on a range from 0 to max.</p>\n\n<p>Over in JavaScript, I run the following code against my form when the user presses the 'Submit' button on the form:</p>\n\n<pre><code>var form = workflowDialogContent.find('form');\n$.validator.unobtrusive.parse(form);\n//Maintain a reference to the current formValidator to be able to reset.\nvar formValidator = $.data(form[0], 'validator');\n\nif (form.valid()) {\n}\n</code></pre>\n\n<p>When the user pressed submit, the form is validated and my validation message is shown if the selected site has a value of -1.</p>\n\n<p>Now, whenever the a selection is changed, I want to reset my form. I've taken this logic from: <a href=\"http://stackoverflow.com/questions/2086287/how-to-clear-jquery-validation-error-messages\">How to clear Jquery validation error messages?</a></p>\n\n<pre><code>$(window).on('change', '#SelectedSiteID', function () {\n    //Returns the formValidator we maintained a reference to.\n    var validator = WorkflowDialogBuilder.getCurrentFormValidator();\n    validator.resetForm();\n    //TODO: resetForm's documentation says that it hides the errors, but I did not experience this, so I am doing it manually.\n    //$('.field-validation-error').empty();\n}\n</code></pre>\n\n<p>However, when I run this code... the highlighting is removed, but the error messages remain. If I call the bit of commented code -- the validation errors are hidden, but they do not re-appear the next time my form is validated.</p>\n\n<p>After validating:\n<img src=\"http://i.stack.imgur.com/0gNqs.png\" alt=\"enter image description here\">\nAfter calling resetForm:\n<img src=\"http://i.stack.imgur.com/FKqw0.png\" alt=\"enter image description here\"></p>\n\n<p>Any ideas why I would be seeing such behavior?</p>\n\n<p><strong>Update:</strong> As a work around, the following bit of code seems to do proper clean-up:</p>\n\n<pre><code>$('.field-validation-error').empty();\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1881,"score":5,"question_id":2111936,"title":"How do I see which version of MVC is installed?","body":"<p>How can I tell which version of MVC (i.e. MVC 2 Beta, MVC 2 RC) is installed on my machine?</p>\n"},{"tags":["sql-server","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13259641,"title":"Should I add a field like MarkedAsDeleted to my table?","body":"<p>I'm building an ASP.NET MVC application with SQL Server. I would like to know what will be a good practice for record deletion operations. I mean, when an item is deleted via web application, I would like to mark it as deleted, and then from an admin console, I will purge them if needed.</p>\n\n<p>Is this a good practice? Should I use or avoid?</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first","code-first-migrations"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":288,"score":0,"question_id":12573927,"title":"Database Initializer not being called in EF 5 + MVC 3","body":"<p>I know this question might be duplicated, but I haven't found any solution for my problem yet.</p>\n\n<p>I have:</p>\n\n<pre><code>protected void Application_Start()\n        {\n            Database.SetInitializer(new DatabaseSeeder());\n            DatabaseContext c = new DatabaseContext();\n            c.Database.Initialize(true);\n\n            AreaRegistration.RegisterAllAreas();\n\n            RegisterGlobalFilters(GlobalFilters.Filters);\n            RegisterRoutes(RouteTable.Routes);\n\n\n        }\n</code></pre>\n\n<p>my database seeder is:</p>\n\n<pre><code>public class DatabaseSeeder : DropCreateDatabaseAlways&lt;DatabaseContextBase&gt;\n    {\n        protected override void Seed(DatabaseContextBase context)\n        {\n            base.Seed(context);\n\n            var roles = new[] {\"Admin\", \"User\"};\n            foreach (var role in roles)\n            {\n                context.Roles.Add(new UserRole {FullName = role});\n            }\n\n            context.SaveChanges();\n        }\n    }\n</code></pre>\n\n<p>and my context is:</p>\n\n<pre><code>public abstract class DatabaseContextBase : DbContext\n    {\n        public DbSet&lt;UserRole&gt; Roles { get; set; }\n        public DbSet&lt;UserAndPermissionInGroup&gt; UserAndPermissions { get; set; }\n        public DbSet&lt;GeneralUser&gt; Users { get; set; }\n        public DbSet&lt;Group&gt; Groups { get; set; }\n        public DbSet&lt;Forum&gt; Forums { get; set; } \n\n        public DatabaseContextBase() :base(\"ForumDb\")\n        {\n\n        }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            base.OnModelCreating(modelBuilder);\n            modelBuilder.Entity&lt;Comment&gt;()\n                .HasRequired(e =&gt; e.Owner)\n                .WithMany(t =&gt; t.Comments)\n                .HasForeignKey(e =&gt; e.OwnerId)\n                .WillCascadeOnDelete(false);\n        }\n    }\n</code></pre>\n\n<p>And finally:</p>\n\n<pre><code>public class DatabaseContext : DatabaseContextBase\n\n{\n\n}\n</code></pre>\n\n<p>The problem is that, even with this initializer, I get the following error:</p>\n\n<blockquote>\n  <p>The model backing the 'DatabaseContext' context has changed since the\n  database was created. Consider using Code First Migrations to update\n  the database</p>\n</blockquote>\n\n<p>I am using EF 5 code first in an ASP.NET MVC 3 project. Any suggestions?</p>\n"},{"tags":["asp.net-mvc","knockout.js","knockout-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13256528,"title":"Field-level change tracking with ASP.NET MVC4 & Knockout","body":"<p>Wondering if anyone out there has experience with tracking field-level change tracking?  We are trying to discern the easiest/best way to track any and all model modifications by end-users.  I am using ASP.NET MVC4, Knockout, and Knockout Editables.  </p>\n"},{"tags":["c#","asp.net-mvc","mvc","html-helper","application-start"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13258944,"title":"Access HtmlHelper right after it is created, and before the view","body":"<p>I know that i from Application_Start can ActionFilterAttribute add a custom global filter and manipulate the ModelState and what not.</p>\n\n<p>Is there a similar way, to access the @Html (HtmlHelper) Before it get's send to the view?</p>\n\n<p>The reason for this is that i want to edit (or remove and recreate) the UnobtrosiveValidationAttributes. And if i try to do that in the View like this: <code>@Html.GetUnobtrusiveValidationAttributes(\"PhoneNumber\").Clear();</code> Nothing happens, but i'm thinking it might would work if i got to it earlier?</p>\n\n<p>(If you are wondering why: i need to translate the ErrorMessages inside)</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13258959,"title":"Dropdown List styles","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8356797/how-to-bold-the-first-option-of-a-select-across-all-browsers\">How to bold the first option of a select across all browsers?</a>  </p>\n</blockquote>\n\n\n\n<p>How do we need to code for a drop down list so that only first item among the dropdownlist is in italics and in different color.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2","partial-views","editorfor"],"answer_count":2,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":5975,"score":11,"question_id":1482925,"title":"Rendering the field name in an EditorTemplate (rendered through EditorFor())","body":"<p>I'm currently building the Admin back-end for a website in ASP.NET MVC.</p>\n\n<p>In an ASP.NET MVC application, I've started using the 'EditorFor' helper method like so:</p>\n\n<pre><code>&lt;div id=\"content-edit\" class=\"data-form\"&gt;\n    &lt;p&gt;\n        &lt;%= Html.LabelFor(c =&gt; c.Title) %&gt;\n        &lt;%= Html.TextBoxFor(c =&gt; c.Title)%&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;%= Html.LabelFor(c =&gt; c.Biography) %&gt;\n        &lt;%= Html.EditorFor(c =&gt; c. Biography)%&gt;\n    &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In the model, the 'Biography' field has been decorated with: [UIHelper(\"Html\")].</p>\n\n<p>I have an 'Html' partial view (under Views/Shared/EditorTemplates):</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;System.XML.Linq.XElement&gt;\" %&gt;\n\n&lt;textarea class=\"html\"&gt;\n    &lt;%= Model.ToString() %&gt;\n&lt;/textarea&gt;\n</code></pre>\n\n<p>Now I'd like to have the 'ID' attribute of the 'textarea' set to the name of the field, like this:</p>\n\n<pre><code>&lt;textarea id=\"Biography\" class=\"html\"&gt;\n    ...\n&lt;/textarea&gt;\n</code></pre>\n\n<p>But I can't see a way to do that with the current set up.</p>\n\n<p>All I can think of is creating an 'Html' ViewModel that contains a 'Value' property and a 'ControlID' property.</p>\n\n<p>But if I based the view off that, rather than 'System.XML.Linq.XElement', it would no longer be compatible with the 'EditorFor' helper method and I'd have to do everything manually.</p>\n\n<p>Has anyone had a similar problem yet?</p>\n"},{"tags":["c#","html","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13253930,"title":"Batch Grid cell takes DataValueField from DropDownList when cell leaves edit mode","body":"<p>What I want to do is display text for a company name in the drop down AND the cell (when it's not being edited), but have the ID of the company be the data that is passed back to the server when \"Save\" is clicked.</p>\n\n<p>Everything works perfectly, except that when I click on the next cell to continue my edits (which causes the cell with the DDL to leave edit mode), the read only cell in its place displays the ID instead of the Company's name.</p>\n\n<p>This picture illustrates what I mean:\n<img src=\"http://i.stack.imgur.com/ZkpnT.png\" alt=\"enter image description here\"></p>\n\n<p>Does anyone know a way to fix this or a different way to achieve the functionality that I need?</p>\n\n<p><strong>Editor Template</strong></p>\n\n<pre><code>@(Html.Kendo().DropDownList()\n.Name(\"Company\")\n.DataTextField(\"Name\")\n.DataValueField(\"EnterpriseID\")\n.BindTo((IEnumerable&lt;BlueGrace.BlueShip.Business.Enterprise.EnterpriseChildListingItem&gt;)ViewBag.RefCarrierLiabilityEnterpriseListing))\n</code></pre>\n\n<p><strong>Controller (ViewBag population)</strong></p>\n\n<pre><code>var enterpriseListing = Business.Enterprise.EnterpriseChildListing.Get(false, customIdentity.EnterpriseID, false).ToList();\n        ViewBag.RefCarrierLiabilityEnterpriseListing = enterpriseListing;\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>    @(Html.Kendo().Grid(Model.GlobalDictionary.RefCarrierLiabilityModels)\n        .Name(\"CarrierLiabilityDictionaryGrid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(item =&gt; item.CarrierName)\n            .EditorTemplateName(\"RefCarrierListing\").Width(250);\n        columns.Bound(item =&gt; item.Company)\n            .EditorTemplateName(\"RefCarrierLiabilityEnterpriseListing\");\n        columns.Bound(item =&gt; item.MaxLiability)\n            .EditorTemplateName(\"RefCarrierLiabilityMaxLiability\");\n        columns.Bound(item =&gt; item.IsValueOfGoodsMaxLiability);\n        columns.Command(command =&gt;\n        {\n            command.Destroy();\n        }).Width(100);\n    })\n    .ToolBar(toolbar =&gt;\n    {\n        toolbar.Create();\n        toolbar.Save();\n    })\n    .Editable(editable =&gt; editable.Mode(GridEditMode.InCell).CreateAt(GridInsertRowPosition.Top))\n    .Pageable()\n    .Sortable()\n    .Scrollable()\n    .Filterable()\n    .Resizable(resize =&gt; resize.Columns(true))\n    .Reorderable(reorder =&gt; reorder.Columns(true))\n    .DataSource(dataSource =&gt; dataSource\n        .Ajax()\n        .Batch(true)\n        .ServerOperation(false)\n        .Model(model =&gt;\n        {\n            model.Id(i =&gt; i.RefCarrierLiabilityID);\n            model.Id(i =&gt; i.RefCarrierID);\n        })\n        .Read(read =&gt; read.Action(\"GetCarrierLiabilities\", \"Dictionary\"))\n        .Create(create =&gt; create.Action(\"CreateCarrierLiabilities\", \"Dictionary\"))\n        .Update(update =&gt; update.Action(\"UpdateCarrierLiabilities\", \"Dictionary\"))\n        .Destroy(delete =&gt; delete.Action(\"DeleteCarrierLiabilities\", \"Dictionary\"))\n    )\n)\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","entity-framework"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1333,"score":1,"question_id":2435362,"title":"Error while updating Database record with Entity Framework on ASP.NET MVC Page","body":"<p>I have an ASP.NET Page that updates registered User Address Details for a selected record.\nBelow is the Update method that i am calling from Controller.</p>\n\n<p>When i am calling <strong>ApplyPropertyChanges</strong> method, I am getting the below error.\nDid anyone run into the same error while updating the record with Entity Framework. </p>\n\n<p>Appreciate your responses.</p>\n\n<p><strong>Error Message:</strong> </p>\n\n<p>The existing object in the ObjectContext is in the Added state. Changes can only be applied when the existing object is in an unchanged or modified state.</p>\n\n<p><strong>My Update Method Code:</strong></p>\n\n<pre><code>[HttpPost]\n    public bool UpdateAddressDetail([Bind(Prefix = \"RegUser\")] AddressDetail regUserAddress, \n                        FormCollection formData)\n    {\n    regUserAddress.AD_Id = 3;\n        regUserAddress.LastUpdated = HttpContext.User.Identity.Name;\n        regUserAddress.UpdatedOn = DateTime.Now;\n        regUserAddress.AddressType = ((AddressDetail)Session[\"CurrentAddress\"]).AddressType ?? \"Primary\";\n        regUserAddress.Phone = ((AddressDetail)Session[\"CurrentAddress\"]).Phone;\n        regUserAddress.Country = ((AddressDetail)Session[\"CurrentAddress\"]).AddressType ?? \"USA\";\n\n        miEntity.ApplyPropertyChanges(regUserAddress.EntityKey.EntitySetName, regUserAddress);\n        miEntity.SaveChanges();\n        return true;\n    }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":2913,"score":6,"question_id":495124,"title":"How do you redirect to the calling page in ASP.NET MVC?","body":"<p>Let's say I have a controller action that deletes an item out of a user's shopping basket.  This controller action is triggered by performing a POST to the url ~/delete/{id}.  If I have several pages on my application that will post to this url, how do I construct the controller action to redirect back to the page that posted to it?</p>\n"},{"tags":["javascript","asp.net-mvc","telerik","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13250704,"title":"Disable Telerik MVC Grid Validation","body":"<p>I have a telerik grid that is using a EditorTemplate:</p>\n\n<p>Editor:<br>\n<code>\n@ModelType Date<br>\n @Html.Telerik.DatePicker.Name(ViewData.TemplateInfo.GetFullHtmlFieldName(String.Empty)).Value(Model)\n</code></p>\n\n<p>In my viewModel:<br>\n<code>\nUIHint(\"Date\")<br>\nDisplayFormat(ApplyFormatInEditMode:=True, DataFormatString:=\"{0:dd-MM-yyyy}\")<br>\nPublic Property data As Date\n</code></p>\n\n<p>I can't get the client side validations to work <strong>so i decided to disable them</strong>.\nI added in the webconfig (views and app)<br>\n<code>\nadd key=\"ClientValidationEnabled\" value=\"false\" <br>\nadd key=\"UnobtrusiveJavaScriptEnabled\" value=\"false\" </code></p>\n\n<p>But it still tries to validate the field. I suppose it's some property in the grid.. <br>\nHow can i disable the validations?</p>\n\n<p>Thks.</p>\n\n<p>EDIT:</p>\n\n<p>I tested this in a simple form and both ClientValidationEnabled and UnobtrusiveJavaScriptEnabled are false. So the problem should be in the telerik Grid, it ignores those keys and still makes its validations. How do i disable the validation in the grid? </p>\n"},{"tags":["sql","asp.net-mvc","amazon-web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13252686,"title":"Can't connect website to database on amazon web services","body":"<p>I've just loaded my mvc.net 3 website up onto a micro instance on Amazon Web Services and put the database up there on a RDS as well. I can connect to the database via AWS Explorer in VS2010 just fine but when I add the connection string to my <code>web.config</code> it times out trying to access the database. Is there something else I need to do?</p>\n\n<p>The web site loads fine, it just times out when accessing the DB.</p>\n\n<p>Sorry if this is a but vague, the whole AWS thing is new to me.</p>\n"},{"tags":["asp.net-mvc","ravendb","insert-update"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13248467,"title":"RavenDB with asp.net mvc Update Issue","body":"<p>I have a small project in asp.net mvc 3 and I am using RavenDB to store data.\nBut when i am trying to update entity i have error saying \n\"<strong><em>Attempted to associate a different object with id 'orders/257</em></strong>'\"\nI have a service class to menage entities.</p>\n\n<p>This is method to update entity called Order.\nI'v omitted the rest of methods baceuse of clarity</p>\n\n<pre><code>  public ErrorState UpdateOrder(Order order)\n    {\n        try\n        {\n            documentSession.Store(order);\n            documentSession.SaveChanges();\n            return new ErrorState { Success = true };\n\n        }\n        catch (Exception ex)\n        {\n            return new ErrorState { Success = false, ExceptionMessage = ex.Message };\n\n        }\n    }\n</code></pre>\n\n<p>This is rest of OrderRepository</p>\n\n<pre><code>  private readonly IDocumentSession documentSession;\n\npublic OrderRepository(IDocumentSession _documentSession)\n{\n    documentSession = _documentSession;\n}\n</code></pre>\n\n<p>ErrorState class is for menagege errors in app, it contains bool success and string message of exception.</p>\n\n<p>This is my edit Actions.</p>\n\n<pre><code> public ActionResult Edit(int id)\n        {\n            Order order = orderRepository.ObtainOrder(id);\n            if (order == null)\n            {\n                TempData[\"message\"] = string.Format(\"Order no: {0} not found\", id);\n                return RedirectToAction(\"Index\");\n            }\n            return View(order);\n\n        }\n\n\n\n        [HttpPost]\n        public ActionResult Edit(Order order)\n        {\n            if(!ModelState.IsValid)\n                return View();\n\n            errorState = orderRepository.UpdateOrder(order);\n            if (errorState.Success)\n            {\n                TempData[\"message\"] = string.Format(\"Order no: {0} has been changed\", order.Id);\n                return RedirectToAction(\"Index\");\n            }\n            else\n            {\n                TempData[\"Message\"] = string.Format(\"Error on update order no: {0} MSG: {1}\", order.Id,errorState.ExceptionMessage);\n                return RedirectToAction(\"Index\");\n            }\n\n\n        }\n</code></pre>\n\n<p>This is the rest of the controller , I'v omitted the rest of actions baceuse of clarity.</p>\n\n<pre><code>private readonly IOrderRepository orderRepository;\nprivate ErrorState errorState;\n\npublic HomeController(IOrderRepository _orderRepository,IDocumentSession _documentSession)\n{\n    orderRepository = _orderRepository;\n\n} \n</code></pre>\n"},{"tags":["asp.net-mvc","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13257474,"title":"WebGrid, MVC Some columns sort some don't. Why?","body":"<p>I have a very simple model being displayed in WebGrid. Some of the columns sort just fine but some won't sort at all, they just go to the default sort of the grid.</p>\n\n<pre><code> @grid.GetHtml(\ncolumns: grid.Columns(  \ngrid.Column(\"\", format: @&lt;text&gt;@Html.ActionLink(\"Send\",\"Send\", new {id=item.UNiQID})@Html.ActionLink(\"Details\",\"Details\", new {id=item.UNiQID})&lt;/text&gt;),\ngrid.Column(\"UniqID\",format:@&lt;text&gt;&lt;a href=\"Account/edit/@item.UNiQID\" title=\"Edit this record\"&gt;@item.UNiQID&lt;/a&gt;&lt;/text&gt;),  \ngrid.Column(\"AccountNumber\", header:\"Account Number\"),  \ngrid.Column(\"IntegrationConflict\", header:\"Integration Conflict\"),\ngrid.Column(\"CreatedDate\", header:\"Created Date\"),\ngrid.Column(\"Source\",header:\"Source\"),\ngrid.Column(\"Family\"),\ngrid.Column(\"Product\"),                \ngrid.Column(\"LastModifiedDate\",header:\"Last Modified Date\"))\n</code></pre>\n\n<p>In this example the UniqID, AccountNumber,Product and LastModifiedDate all sort fine without any additional code. The remaining columns do not sort,they just go to the default sort mode (which is UniqID).</p>\n\n<p>Any ideas why this might be?\nTCO\nJohn</p>\n"},{"tags":["asp.net","asp.net-mvc","templates","stringtemplate"],"answer_count":14,"favorite_count":11,"up_vote_count":15,"down_vote_count":0,"view_count":12744,"score":15,"question_id":173207,"title":"Best Template Engine for ASP.NET MVC","body":"<p>I am exploring ASP.NET MVC and I wanted to add jQuery to make the site interactive. I used StringTemplate, ported to .Net, as my template engine to generate html and to send JSON. However, when I view the page, I could not see it. After debugging, I've realized that the $ is used by the StringTemplate to access property, etc and jQuery uses it too to manipulate the DOM. Gee, I've looked on other template engines and most of them uses the dollar sign :(.</p>\n\n<p>Any alternative template engine for ASP.Net MVC? I wanted to retain jQuery because MSFT announced that it will used in the Visual Studio (2008?)</p>\n\n<p>Thanks in Advance :)</p>\n\n<p><strong>Update</strong></p>\n\n<p>Please go to <a href=\"http://stackoverflow.com/questions/1451319/asp-net-mvc-view-engine-comparison/1451355#1451355\">the answer</a> in <a href=\"http://stackoverflow.com/questions/1451319/asp-net-mvc-view-engine-comparison\">ASP.NET MVC View Engine Comparison</a> question for a comprehensive list of Template engine for ASP.NET MVC, and their pros and cons</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>At the end I'll just put the JavaScript code, including JQuery, in a separate script file, hence I wouldn't worry about the <code>$</code> mingling in the template file.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","selenium","bdd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13257306,"title":"Setup web server when using selenium webdriver c#","body":"<p>Im using selenium webdriver to make behavior tests on ASP.NET MVC application (C#).\nI want to have a server that will automatically open when I run those tests, like the IIS server which automatically runs when I debug my application.\nHow do I do that ?\nBTW, Im using the ChromeDriver if that matters.\nThanks.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13257063,"title":"Convert byte array to image on view","body":"<p>I have a model that has byte array of image.\nHow convert byte array to image on view in mvc.net</p>\n"},{"tags":["asp.net-mvc","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13238123,"title":"Orchard CMS: Content part not displayed","body":"<p>I created a content part, and add it to content type. \nWhen I create content type, a content part is not displayed, unlike as other fields.\nNo have compilation or logged errors, content part added to placement.info.</p>\n\n<p>PS: Sory for my bad english.</p>\n\n<p>Driver:</p>\n\n<pre><code>[UsedImplicitly]\npublic class TradeItemPartDriver: ContentPartDriver&lt;TradeItemPart&gt;\n{\n    private readonly ITradeItemService _tradeItemService;\n\n    private const string TemplateName = \"Parts/TradeItem\";\n\n    public TradeItemPartDriver(ITradeItemService tradeItemService)\n    {\n        _tradeItemService = tradeItemService;\n    }\n\n    protected override string Prefix\n    {\n        get { return \"TradeItem\"; }\n    }\n\n    protected override DriverResult Display(\n        TradeItemPart part,\n        string displayType,\n        dynamic shapeHelper)\n    {\n\n        return ContentShape(\"Parts_TradeItem\",\n                        () =&gt; shapeHelper.Parts_TradeItem(\n                            ContentPart: part)); \n    }\n\n    protected override DriverResult Editor(\n        TradeItemPart part,\n        dynamic shapeHelper)\n    {\n        var shape = ContentShape(\"Parts_TradeItem_Edit\",\n                () =&gt; shapeHelper.EditorTemplate(\n                    TemplateName: TemplateName,\n                    Model: BuildEditorViewModel(part),\n                    Prefix: Prefix));\n        return shape;\n    }\n\n    protected override DriverResult Editor(\n        TradeItemPart part,\n        IUpdateModel updater,\n        dynamic shapeHelper)\n    {\n\n        var model = new EditTradeItemViewModel();\n        updater.TryUpdateModel(model, Prefix, null, null);\n\n        if (part.ContentItem.Id != 0)\n        {\n            _tradeItemService.UpdateTradeItemForContentItem(\n                part.ContentItem, model);\n        }\n\n        return Editor(part, shapeHelper);\n    }\n\n    private EditTradeItemViewModel BuildEditorViewModel(TradeItemPart part)\n    {\n        var model = new EditTradeItemViewModel\n        {\nCode = part.Code, Cost= part.Cost, Unit = part.Unit, Weight = part.Weight,\nUnitsList = _tradeItemService.GetUnitTypes()\n        };\n        return model;\n    }\n}\n</code></pre>\n\n<p>Handler:</p>\n\n<pre><code>public class TradeItemPartHandler : ContentHandler\n{\n    public TradeItemPartHandler(IRepository&lt;TradeItemPartRecord&gt; repository)\n    {\n        Filters.Add(StorageFilter.For(repository));\n    }\n}\n</code></pre>\n\n<p>Models:</p>\n\n<pre><code>public enum EnumTradeItemUnit  : byte\n{\n    Шт = 0,\n    Кг = 1,\n    Литр = 2,\n    Упаковка = 3\n}\n\npublic class TradeItemPartRecord : ContentPartRecord\n{\n    public virtual string Code { get; set; }\n    public virtual decimal Weight { get; set; }\n    public virtual decimal Cost { get; set; }\n    public virtual int Unit { get; set; }\n}\n\npublic class TradeItemPart : ContentPart&lt;TradeItemPartRecord&gt;\n{\n    public virtual string Code { get; set; }\n    public virtual decimal Weight { get; set; }\n    public virtual decimal Cost { get; set; }\n    public virtual EnumTradeItemUnit Unit { get; set; }\n}\n</code></pre>\n\n<p>Serveces:</p>\n\n<pre><code>public interface ITradeItemService: IDependency\n{\n    //IEnumerable&lt;TradeItemPart&gt; GetTradeItems();\n    SelectList GetUnitTypes();\n    void UpdateTradeItemForContentItem(\n        ContentItem item,\n        EditTradeItemViewModel model);\n\n}\n\n\npublic class TradeItemService : ITradeItemService\n{\n    private readonly IContentManager _contentManager;\n    private readonly IRepository&lt;TradeItemPartRecord&gt; _tradeItemsRepository;\n\n    public TradeItemService(IContentManager contentManager, IRepository&lt;TradeItemPartRecord&gt; tradeItemsRepository)\n    {\n        _contentManager = contentManager;\n        _tradeItemsRepository = tradeItemsRepository;\n    }\n\n    public SelectList GetUnitTypes()\n    {\n        return new SelectList(\n        Enum.GetValues(typeof(EnumTradeItemUnit)).Cast&lt;EnumTradeItemUnit&gt;().Select\n            (it =&gt;\n            new SelectListItem() { Value = ((byte)it).ToString(), Text = it.ToString() }));\n    }\n\n     public void UpdateTradeItemForContentItem(\n        ContentItem item,\n        EditTradeItemViewModel model)\n    {\n        var part = item.As&lt;TradeItemPart&gt;();\n        part.Code = model.Code;\n        part.Cost = model.Cost;\n        part.Unit = model.Unit;\n        part.Weight = model.Weight;\n    }\n}\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>public class EditTradeItemViewModel\n{\n\n    [StringLength(10), WebDisplayName(\"Код\")]\n    public virtual string Code { get; set; }\n    [Required, Range(0, 100, ErrorMessage = \"Товары тяжелее 100кг пусть более крутые ребята возят\"), WebDisplayName(\"Вес\")]\n    public virtual decimal Weight { get; set; }\n    [Required, Range(0.01, 100000, ErrorMessage = \"Товары дороже 100тыс.р. пусть более крутые ребята возят\"), WebDisplayName(\"Цена\")]\n    public virtual decimal Cost { get; set; }\n    [Required, WebDisplayName(\"Единица измерения\")]\n    public virtual EnumTradeItemUnit Unit { get; set; }\n    public virtual SelectList UnitsList { get; set; }\n}\n</code></pre>\n\n<p>~/Views/EditorTemplates/Parts/TradeItem.cshtml</p>\n\n<pre><code>@model Delivery.ViewModels.EditTradeItemViewModel\n&lt;fieldset&gt;\n    &lt;legend&gt;@T(\"Характеристики\")&lt;/legend&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Code, T(\"Код\"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(model =&gt; model.Code)\n    @Html.ValidationMessageFor(model =&gt; model.Code)\n  &lt;/div&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Unit, T(\"Единица измерения\"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.DropDownListFor(model =&gt; model.Unit, Model.UnitsList)\n    @Html.ValidationMessageFor(model =&gt; model.Unit)\n  &lt;/div&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Cost, T(\"Стоимость\"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(model =&gt; model.Cost)\n    @Html.ValidationMessageFor(model =&gt; model.Cost)\n  &lt;/div&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Weight, T(\"Вес одной единицы\"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(model =&gt; model.Weight)\n    @Html.ValidationMessageFor(model =&gt; model.Weight)\n  &lt;/div&gt;\n\n\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>Placement:</p>\n\n<pre><code>&lt;Placement&gt;\n  &lt;Place Parts_TradeItem_Edit=\"Content:10\"/&gt;\n  &lt;Place Parts_TradeItem=\"Content:10\"/&gt;\n&lt;/Placement&gt;\n</code></pre>\n\n<p>Migrations:</p>\n\n<pre><code>        SchemaBuilder.CreateTable(\"TradeItemRecord\",\n                       table =&gt; table\n                           .ContentPartRecord()\n                           .Column&lt;string&gt;(\"Code\", column =&gt; column.WithLength(10))\n                           .Column&lt;decimal&gt;(\"Weight\", column =&gt; column.WithPrecision(8).WithScale(2))\n                           .Column&lt;decimal&gt;(\"Cost\", column =&gt; column.WithPrecision(8).WithScale(2))\n                           .Column&lt;byte&gt;(\"Unit\")\n                       );\n\n        ContentDefinitionManager.AlterPartDefinition(\"TradeItem\",\n            builder =&gt; builder.Attachable());\n</code></pre>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13256854,"title":"inject javascript in cshtml from partial-view using RenderSection not working","body":"<p>I have a partial view, that requires some javascript at the bottom of the page.</p>\n\n<p>The main page:</p>\n\n<pre><code>...some html...\n&lt;div&gt;\n@Html.Partial(\"_myPartial\")\n&lt;/div&gt;\n\n....more html....\n\n//required JS at BOTTOM -  THIS should also come from above partial\n@RenderSection(\"scripts\", required: false)\n</code></pre>\n\n<p>my partial view:</p>\n\n<pre><code>&lt;div id=\"Slider\"&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 1]\" /&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 2]\" /&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 3]\" /&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 4]\" /&gt;\n&lt;/div&gt;\n\n\n@section scripts\n{\n &lt;script type=\"text/javascript\"&gt;\n  $(window).load(function () {\n    $('#Slider').orbit();\n  });\n  &lt;/script&gt;\n}\n</code></pre>\n\n<p>But this does not work - the scripts section is not included.</p>\n\n<p>I googled, this is not supported...well...</p>\n\n<p>...How would YOU handle this situation??</p>\n\n<p>Suggestions were to make yet another partial with the script and include this....\nNot pretty!</p>\n\n<p>Is there a better approach out there??</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc","sharepoint"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":243,"score":3,"question_id":2027424,"title":"SharePoint and MVC","body":"<p>Has anyone had any success with SharePoint and MVC, are Microsoft going to support this going forward in 2010?</p>\n"},{"tags":["asp.net-mvc","entity-framework","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13245746,"title":"Entity sql datetime literal","body":"<p>I am stuck in the ObjectQuery class it always gives me the error as \nSystem.Data.Entity: The argument types 'Edm.DateTime' and 'Edm.String' are incompatible for this operation., near WHERE predicate</p>\n\n<p>Please suggest me the solution, i followed the above approach, but it did not work.</p>\n\n<p>my code is as follows:</p>\n\n<p>C# code:</p>\n\n<pre><code>var _dbModel = new VISAIntBPAEntities();\n        var serializer = new JavaScriptSerializer();\n        Filters f = (!_search || string.IsNullOrEmpty(filters)) ? null : serializer.Deserialize&lt;Filters&gt;(filters);\n        //if (f != null)\n        //{\n        //    if (f.rules[0].field == \"CreatedDate\")\n        //    {\n        //        Convert.ToDateTime(f.rules[0].data).ToString();\n        //    }\n        //}\n        ObjectQuery&lt;Jobs&gt; filteredQuery = (f == null ? _dbModel.Jobs : f.FilterObjectSet(_dbModel.Jobs));\n        //if (f != null)\n        //{\n        //    if (f.rules[0].field == \"CreatedDate\")\n        //    {\n        //        filteredQuery.Parameters.Add(new ObjectParameter(\"CreatedDate\", Convert.ToDateTime(f.rules[0].data)));\n        //    }\n        //}\n        if (f != null)\n        {\n            DateTime dateTimeValue = Convert.ToDateTime(f.rules[0].data);\n            filteredQuery = filteredQuery.Where(string.Format(\"(it.CreatedDate = DATETIME'{0:yyyy-mm-dd hh:mm}')\", dateTimeValue));\n        }\n        filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data\n        var totalRecords = filteredQuery.Count();\n</code></pre>\n\n<p>Cleint side code:</p>\n\n<p>this code is in built using jqgrid, which has a column called CreatedDate, which fills in the dropdown, i have a sql query which fetches me the distinct date part from the database.\nI am doing filtering based on the string date selection in the dropdown.</p>\n\n<pre><code>{\n        name: 'CreatedDate', index: 'CreatedDate', width: 140, stype: 'select', async: false, sorttype: 'date',\n        edittype: 'select', editoptions: { value: getCreatedJobDate() }, editable: true, formatoptions: { newformat: 'm/d/Y' },\n        //editrules: { required: true },\n        searchoptions: {\n        value: getCreatedJobDate,\n        sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge', 'de']\n        }\n        }\n</code></pre>\n\n<p>Please help me as i am stuck with this approach, i need to do this way only.\nThanks in advance.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":965,"score":1,"question_id":2846090,"title":"RedirectToAction for areas?","body":"<p>I have setup some areas, but I'm not sure how to Redirect to them via the RedirectToAction method. There doesn't seem to be any Area parameter I can feed it.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","mvc","razor","orchardcms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":50,"score":-1,"question_id":13237264,"title":"Orchard CMS Blog View / Layout","body":"<p>I'm new to Orchard CMS &amp; MVC so please take this into account. Any help -the more the better- will be greatly received.</p>\n\n<p>I want to add widgets to my blog summary page. What is the best way to achieve this? Ive tried creating a layer for the blog summary page defined by the rules for the layer, so as to be unique to this page. However, this only allows me to add widgets into the layer zones.</p>\n\n<p>What i need/want to do is to effectively create a side bar with a tag cloud and a blogroll showing titles of other posts, and a couple of other bits of content. This would mean moving the blog summary content into another zone inorder that i can fit widgets down the side.</p>\n\n<p>Is this the correct approach? If so how do i shift the summary stuff into another zone??\nIf this isnt the best approach, what is???</p>\n\n<p>Is this where projections come in???</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":5841,"score":13,"question_id":4160753,"title":"External ASP.NET MVC 3 area not compiling at runtime (works in Preview 1 but not RC)","body":"<p><strong>Problem</strong></p>\n\n<p>ASP.NET MVC 3 RC is giving me a compilation error at runtime (when browsing) to an external MVC area. The website itself works, but the plugin refuses to load throwing a compilation issue pertaining to an unknown model.</p>\n\n<p><em>LogOn.cshtml</em></p>\n\n<pre><code>@model TestProject.Models.LogOnModel\n@{\n    View.Title = \"Log On\";\n}\n//.....omitted for brevity\n</code></pre>\n\n<p>Error thrown at runtime.</p>\n\n<pre>\nCompilation Error\n\nDescription: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. \n\nCompiler Error Message: CS0103: The name 'model' does not exist in the current context\n\nSource Error:\n\n\nLine 38:         public override void Execute() {\nLine 39: \nLine 40: Write(model);\nLine 41: \nLine 42: WriteLiteral(\" TestPlugin.Models.LogOnModel\\r\\n\");\n</pre>\n\n<p><strong>Background</strong></p>\n\n<p>The website is an ASP.NET MVC 3 Preview 1 website I have just migrated to ASP.NET MVC 3 RC. I read the release notes and updated accordingly but still encountered an issue with WebMatrix. I found a SO question where someone from the MVC team suggested until RTM we use the following to force the namespaces to be pulled in (I put them in web.config but it didn't work).</p>\n\n<pre><code>namespace WebMatrix.Data { class Foo { } }\nnamespace WebMatrix.WebData { class Foo { } }\n</code></pre>\n\n<p>This solved my issue within the website and the website now loads up fine in MVC 3 RC. The problem however, is an external MVC area (separate assembly).</p>\n\n<p>Note I'm not using any third party libraries for this, I wrote a little plugin framework that allows loading an MVC area from another assembly. Views are compiled as embedded resources.</p>\n\n<p>So I have an authentication plugin for example that looks like.</p>\n\n<pre><code>-Controllers\n-- AccountController.cs\n-Models\n-- AccountModels.cs\n-Views\n--Account\n--- LogOn.cshtml\n--- ChangePassword.cshtml\n--- ...\n-Web.config\nAccountAreaRegistration.cs\nWeb.config\n</code></pre>\n\n<p>Other than the fact that the views are marked as embedded resources, the AccountController extending  a PluginController that knows how to load the embedded resouces and the global.asax being removed, its a pretty standard MVC area.</p>\n\n<p>I have tried creating a new empty MVC 3 test plugin project and slowly adding in the relevant code. This ensures all references and web.configs are correct. But I still receive the same model issue described above. The project compiles at design time but throws a compilation issue at runtime when it tries to emit the views it looks.</p>\n\n<p><strong>Just to be clear, this all works fine in ASP.NET MVC 3 Preview 1</strong>. However, now that I have upgraded it to MVC 3 RC I have the core website working but the external area refuses to work.</p>\n\n<p>There is nothing wrong the the plugin framework itself. It works fine in MVC 3 Preview 1. I'm looking for answers that might shed a little bit of light on what may be occuring in MVC 3 RC and why I might be using receiving this model error.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Interestingly if I change the declaration of the model at the top of the view to Preview 1 syntax `@inherits System.Web.Mvc.WebViewPage</p>\n\n<p>I get a different runtime compiler error. This time I get an error just further down when the Html.ValidationSummary begins for the login form.</p>\n\n<pre><code>@inherits System.Web.Mvc.WebViewPage&lt;TestProject.Models.LogOnModel&gt;\n@{\n    View.Title = \"Log On\";\n}\n&lt;div class=\"content_item half loginform\"&gt;\n    &lt;div class=\"content_body\"&gt;\n        &lt;h1&gt;VastID Login&lt;/h1&gt;\n        @Html.ValidationSummary(true, \"Login was unsuccessful. Please correct the errors and try again.\") // &lt;=== Compilation issue here on Html.ValidationSummary\n        @using (Html.BeginForm())\n        {\n          // .. omitted for brevity\n        }\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<pre>\nCompilation Error\n\nDescription: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. \n\nCompiler Error Message: CS1061: 'System.Web.Mvc.HtmlHelper' does not contain a definition for 'ValidationSummary' and no extension method 'ValidationSummary' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)\n\nSource Error:\n\n\nLine 49: \nLine 50: \nLine 51:    Write(Html.ValidationSummary(true, \"Login was unsuccessful. Please correct the errors and try again.\"));\nLine 52: \nLine 53: WriteLiteral(\"\\r\\n\");\n</pre>\n\n<p>It's interesting that there is no compile time errors. System.Web.WebPages, System.Web.Helpers and all the necessary MVC 3 RC dll's are present. Including the necessary web.config's. It's as if these aren't available when the view is trying to be loaded however.</p>\n\n<p>The actual razor syntax I believe is part of System.Web.WebPages? Where does Html.ValidationSummary live? System.Web.Mvc or System.Web.Helpers?</p>\n"},{"tags":["c#","asp.net-mvc","calendar","grid","kendo-ui"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12934866,"title":"Kendo calendar in grid","body":"<p>Hello I am using Kendo grid to edit price lists.</p>\n\n<p>I am trying to edit single value in table:</p>\n\n<pre><code>@(Html.Kendo().Grid(Model).Name(\"PriceList\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.Id).Hidden();\n        columns.Bound(p =&gt; p.Name);\n        columns.Bound(p =&gt; p.ValidFrom).Format(\"{0:dd.MM.yyyy h:mm:ss}\");\n        columns.Bound(p =&gt; p.ValidTill).Format(\"{0:dd.MM.yyyy h:mm:ss}\");\n        columns.Bound(p =&gt; p.Created).Format(\"{0:dd.MM.yyyy h:mm:ss}\");\n        columns.Bound(p =&gt; p.UserName);\n        columns.Bound(p =&gt; p.FilePath);\n        columns.Command(command =&gt; { command.Edit(); command.Destroy(); });\n    })\n    .DataSource(dataSource =&gt; dataSource.Ajax()\n            .Model(model =&gt;\n            {\n                model.Id(p =&gt; p.Id);\n                model.Field(p =&gt; p.ValidFrom).Editable(false);\n                model.Field(p =&gt; p.ValidTill).Editable(true);\n                model.Field(p =&gt; p.Created).Editable(false);\n                model.Field(p =&gt; p.UserName).Editable(false);\n                model.Field(p =&gt; p.FilePath).Editable(false);\n                model.Field(p =&gt; p.Name).Editable(false);\n        })\n        .Read(\"PriceList_Read\", \"Admin\")       \n        .Destroy(\"PriceList_Editing_Destroy\", \"Admin\")\n        .Update(update=&gt;update.Action(\"PriceList_Editing_Update\", \"Admin\"))\n        .Events(e=&gt;e.Error(\"error_handler\"))\n    )   \n    .Editable(editable =&gt; editable.Mode(GridEditMode.InLine))\n    .AutoBind(true)\n)\n</code></pre>\n\n<p>And I am having troubles passing edited value in grid to my controller:</p>\n\n<pre><code>public ActionResult PriceList_Editing_Update([DataSourceRequest] DataSourceRequest request, PriceListViewModel model)\n        {\n\n                    int Id = model.Id;\n                    string Name = model.Name;\n                    DateTime date = model.ValidTill; // 0001 00:00:00 value all the time\n\n            return View(\"Index\", GetViewResult());\n        }\n</code></pre>\n\n<p>I am always getting back empty datetime value (by empty I mean <code>{1. 1. 0001 0:00:00}</code>) same problem is with 2 other columns using DateTime property (Created and ValidFrom). Rest of the values are posted back correctly. I was trying to get those values using <code>string DateTillStr = Request.Params[\"ValidTill\"];</code> but if I check my GET in firebug I can see grid is not sending back this value inside Request it sends only NON Datetime values of my model object. Like this:</p>\n\n<pre><code>Actual  false\nFilePath    D:\\Projects\\CPSkla\\CPSkla\\App_Data\\Cen°k 2012_10.xlsx\nId  23\nName    Testovací ceník\nUser    0\nUser1   null\nUserName    djezek\n</code></pre>\n\n<p>Nothing more nothing less, only these 7 attributes I am missing rest 4 from my model:</p>\n\n<pre><code>public partial class PriceListView\n{\n    public int Id { get; set; }\n    public int User { get; set; }\n    public string Name { get; set; }\n    public System.DateTime ValidFrom { get; set; }\n    public System.DateTime ValidTill { get; set; }\n    public string FilePath { get; set; }\n    public Nullable&lt;System.DateTime&gt; Created { get; set; }\n    public Nullable&lt;System.DateTime&gt; Updated { get; set; }\n    public bool Actual { get; set; }\n    public string UserName { get; set; }\n}\n</code></pre>\n\n<p>Is there some other way to post these data back? I figured out I can attach additional data to Update request but I had an issue how to identify edited row in the table in javascript function (I know how to identify selected value but not edited).</p>\n\n<p>I figured out using firebug that calendar picker inside kendo grid isnt actualy puting its selected value into input assigned to hold date value. Any thoughts?</p>\n"},{"tags":["asp.net-mvc","linq","linq-to-sql"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":7718,"score":3,"question_id":2515303,"title":"Delete all records from a database using LINQ to SQL","body":"<p>I am using MVC. How do I delete all records from the database using LINQ to SQL? A code example would be greatly appreciated.</p>\n"},{"tags":["c#","html","asp.net-mvc","telerik-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13255755,"title":"display image in grid based on status stored in db","body":"<p>I have a strongly typed view where I display consultants with an image in a telerik grid. I have a column \"Status\" where I store if a consultant is working on a project or not. What I want to do is, If a consultant has an \"Active\" status then display a greyed delete image(disabled, cant delete a consultant as he/she is active), else display a red delete image(enabled, can delete a consultant as he/she is inactive). Is this possible with my design below?</p>\n\n<p>Controller Action:</p>\n\n<pre><code>public ActionResult Index()\n{\n    ViewData.Model = db.Consultants.OrderBy(p =&gt; p.ConsultantName);\n    return View();\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;IEnumerable&lt;UI.Models.Consultants&gt;&gt;\" %&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n\n                &lt;table&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;% Html.GridFor(\"Consultants\", \"Consultants\", \"Consultants\", GridOptions.EnableSelecting, Model).Columns(column =&gt;\n                                {\n                                    column.Bound(o =&gt; o.Code).Title(\"Code\");\n                                    column.Bound(o =&gt; o.Description).Title(\"Description\");                                  \n                                 column.Template(o =&gt;\n            {\n                %&gt;\n                &lt;img src=\"/Content/img/consultant.png\" alt=\"consultant\" title=\"consultant\" onclick=\"javascript:deleteConsultant(&lt;%= o.consultantKey %&gt;)\" /&gt;\n                &lt;%\n            }).Title(\"\").ClientTemplate(\n                      \"&lt;img src=\\\"/Content/img/consultant.png\\\" alt=\\\"consultant\\\" title=\\\"consultant\\\" onclick=\\\"javascript:deleteConsultant(&lt;#= ProjectKey #&gt;)\\\"/&gt;\");\n            column.Bound(o =&gt; o.consultantKey).Hidden();\n        }).Render();            \n                            %&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["asp.net-mvc","renderpartial","renderaction"],"answer_count":7,"favorite_count":35,"up_vote_count":147,"down_vote_count":1,"view_count":39016,"score":146,"question_id":5248183,"title":"Html.Partial vs Html.RenderPartial & Html.Action vs Html.RenderAction","body":"<p>What is difference between <code>Html.Partial</code> and <code>Html.RenderPartial</code> in asp.net mvc?\nalso What is difference between <code>Html.Action</code> and <code>Html.RenderAction</code> in asp.net mvc?</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13184180,"title":"KendoUI MVC Grid - Addnew or Update record with ajax and server side validation","body":"<p>I have implemented inline editing with Knedo UI MVC grid with Ajax binding,\nServer side validation handled in controller and sending the error back using -</p>\n\n<p>ModelState.AddModelError(\"Error: \", ex.Message);</p>\n\n<p><code>@(Html.Kendo().Grid&lt;AnalyticsServiceWeb.ViewModel.SomeViewModel&gt;()\n    .Name(\"Grid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.Name);\n        columns.Bound(p =&gt; p.Path);\n        columns.Bound(p =&gt; p.Space);\n        columns.Command(command =&gt; { command.Edit(); command.Destroy(); });\n    })\n    .ToolBar(toolbar =&gt; toolbar.Create())\n    .Editable(editable =&gt; editable.Mode(GridEditMode.InLine))\n)</code></p>\n\n<pre><code>function error_handler(e) {\n    if (e.errors) {\n        var message = \"Errors:\\n\";\n        $.each(e.errors, function (key, value) {\n            if ('errors' in value) {\n                $.each(value.errors, function () {\n                    message += this + \"\\n\";\n                });\n            }\n        });\n        alert(message);\n    }\n}\n</code></pre>\n\n<p>The server side error message is getting displayed when there is a server side exception, but it still completes the action in UI, i mean it adds the new record to the grid and update as well even though there is server side exception.</p>\n\n<p>Is there any way to retain the state of UI before the action start?, it supposed to work in that way, not sure if i am missing anything?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor"],"answer_count":4,"favorite_count":10,"up_vote_count":17,"down_vote_count":0,"view_count":1568,"score":17,"question_id":170900,"title":"How can I avoid duplicate content in ASP.NET MVC due to case-insensitive URLs and defaults?","body":"<blockquote>\n  <p><strong>Edit</strong>: Now I need to solve this problem for real, I did a little more\n  investigation and came up with a\n  number of things to reduce duplicate\n  content. I posted detailed code\n  samples on my blog: <a href=\"http://blog.dantup.me.uk/2009/04/reducing-duplicate-content-with-aspnet.html\" rel=\"nofollow\">Reducing\n  Duplicate Content with ASP.NET MVC</a></p>\n</blockquote>\n\n<p>First post - go easy if I've marked this up wrong or tagged it badly :P</p>\n\n<p>In Microsoft's new ASP.NET MVC framework it seems there are two things that could cause your content to be served up at multiple URLs (something which Google penalize for and will cause your PageRank to be split across them):</p>\n\n<ul>\n<li>Case-insensitive URLs</li>\n<li>Default URL</li>\n</ul>\n\n<p>You can set the default controller/action to serve up for requests to the root of your domain. Let's say we choose HomeController/Index. We end up with the following URLs serving up the same content:</p>\n\n<ul>\n<li>mydomain.com/</li>\n<li>mydomain.com/Home/Index</li>\n</ul>\n\n<p>Now if people start linking to both of these then PageRank would be split. Google would also consider it duplicate content and penalize one of them to avoid duplicates in their results.</p>\n\n<p>On top of this, the URLs are not case sensitive, so we actually get the same content for these URLs too:</p>\n\n<ul>\n<li>mydomain.com/Home/Index</li>\n<li>mydomain.com/home/index</li>\n<li>mydomain.com/Home/index</li>\n<li>mydomain.com/home/Index</li>\n<li>(the list goes on)</li>\n</ul>\n\n<p>So, the question... How do I avoid these penalties? I would like:</p>\n\n<ul>\n<li>All requests for the default action to be redirected (301 status) to the same url</li>\n<li>All URLs to be case sensitive</li>\n</ul>\n\n<p>Possible?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13254539,"title":"NullReferenceException from ViewData which is Not Null actually","body":"<p><a href=\"http://i.stack.imgur.com/Mm6e6.png\" rel=\"nofollow\">ScreenShot</a></p>\n\n<p>I think the screenshot explains everything. How can i resolve this problem ? Even the data is not null, it gives null reference exception..</p>\n\n<p>Stacktrace is below:</p>\n\n<pre><code>   at ASP._Page_Views_Profile_Index_cshtml.Execute() in c:\\aaaaaa\\aaa\\aaaaaa\\Views\\Profile\\Index.cshtml:line 17\n   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()\n   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()\n   at System.Web.WebPages.StartPage.ExecutePageHierarchy()\n   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)\n   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1a.&lt;InvokeActionResultWithFilters&gt;b__17()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)  \n</code></pre>\n"},{"tags":["c#","jquery","asp.net-mvc","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13242414,"title":"Passing A List Of Objects Into An MVC Controller Method Using jQuery Ajax","body":"<p>I'm trying to pass an array of objects into an MVC controller method using\njQuery's ajax() function. When I get into the PassThing() C# controller method,\nthe argument \"things\" is null. I've tried this using a type of List for\nthe argument, but that doesn't work either. What am I doing wrong?</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        var things = [\n            { id: 1, color: 'yellow' },\n            { id: 2, color: 'blue' },\n            { id: 3, color: 'red' }\n        ];\n\n        $.ajax({\n            contentType: 'application/json; charset=utf-8',\n            dataType: 'json',\n            type: 'POST',\n            url: '/Xhr/ThingController/PassThing',\n            data: JSON.stringify(things)\n        });\n    });\n&lt;/script&gt;\n\npublic class ThingController : Controller\n{\n    public void PassThing(Thing[] things)\n    {\n        // do stuff with things here...\n    }\n\n    public class Thing\n    {\n        public int id { get; set; }\n        public string color { get; set; }\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","powershell","nuget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13242282,"title":"Nuget PowerShell script to modify Global.asax.cs","body":"<p>I'm building a nuget package for my company MVC4 template. I have run into an issue where I need the <code>Global.asax.cs</code> to be modified to add these two lines:</p>\n\n<pre><code>using System.Web.Optimization;\n</code></pre>\n\n<p>at the top, before the namespace and</p>\n\n<pre><code>BundleConfig.RegisterBundles(BundleTable.Bundles);\n</code></pre>\n\n<p>at the end of the <code>Application_Start()</code> method</p>\n\n<p>I tried creating a <code>Global.asax.cs.pp</code> with <code>namespace $rootnamespace$</code> inside it, but that doesn't seem to work. It seems Nuget wont overwrite existing files?</p>\n\n<p>My last option, as I see it, is to write a powershell script (<code>Install.ps1</code>?) to do this. Here's my <code>template.nuspec</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;package&gt;\n  &lt;metadata&gt;\n    &lt;id&gt;Template.MVC4&lt;/id&gt;\n    &lt;version&gt;1.5&lt;/version&gt;    \n    &lt;title&gt;MVC4 Template&lt;/title&gt;\n    &lt;description&gt;Installs and configures files for MVC 4 application template.&lt;/description&gt;\n    &lt;authors&gt;Me&lt;/authors&gt;\n    &lt;language&gt;en-US&lt;/language&gt;\n    &lt;dependencies&gt;\n        &lt;dependency id=\"Microsoft.AspNet.Web.Optimization\" /&gt;\n    &lt;/dependencies&gt;\n    &lt;iconUrl&gt;http://www.someurl.com/Logo.jpg&lt;/iconUrl&gt;\n  &lt;/metadata&gt;\n  &lt;files&gt;   \n    &lt;file src=\"Template\\Helpers\\*\" target=\"content\\Helpers\\\" /&gt;\n    &lt;file src=\"Template\\Content\\*.css\" target=\"content\\Content\\\" /&gt;\n    &lt;file src=\"Template\\Content\\animGif\\*\" target=\"content\\Content\\animGif\\\" /&gt;\n    &lt;file src=\"Template\\Content\\custom-theme\\*\" target=\"content\\Content\\custom-theme\\\" /&gt;\n    &lt;file src=\"Template\\Content\\templateImages\\*\" target=\"content\\Content\\templateImages\\\" /&gt;\n    &lt;file src=\"Template\\Scripts\\*\" target=\"content\\Scripts\\\" /&gt;\n    &lt;file src=\"Template\\Views\\Shared\\*\" target=\"content\\Views\\Shared\\\" /&gt;\n    &lt;file src=\"Template\\Views\\Home\\*\" target=\"content\\Views\\Home\\\" /&gt;\n    &lt;file src=\"Template\\Views\\_ViewStart.cshtml\" target=\"content\\Views\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\App_Start\\*\" target=\"content\\App_Start\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Controllers\\*\" target=\"content\\Controllers\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Helpers\\*\" target=\"content\\Helpers\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Models\\*\" target=\"content\\Models\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Views\\*\" target=\"content\\Views\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\*\" target=\"content\\\" /&gt;\n  &lt;/files&gt;\n&lt;/package&gt;\n</code></pre>\n\n<p>My question is 2 fold, 1) am I doing something wrong in my .nuspec? and 2) if modifying a <code>Global.asax</code> with .pp isn't an option, then what is the powershell script that I'd need to write to have this run automatically when this nuget is added to a project, and do I need to do anything special for it to run (reading the docs seems like just placing <code>Install.ps1</code> in <code>tools\\</code> will do)?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":24,"score":-2,"question_id":13254485,"title":"asp.net mvc toolbar","body":"<p>I'm working on a project with Visual Studio 2010 ASP.Net MVC4 (engine view Razor) and I need create a toolbar.\nthis toolbar have six buttons (Add, Delete, Search, Edit, Cancel and Save)\nWhen into the page the buttons (Add and Search) enable and the others buttons Disables the same the textbox and combobox.\nNow the user click in the button Add then the buttos (Cancel and Save) enable the others buttons disable, textbox and combobox enable  for into data.</p>\n\n<p>How I can program this toolbar, if anybody have idea please help me.</p>\n\n<p>Regards\nRicardo</p>\n"},{"tags":["asp.net-mvc","linq","entity-framework","ef-code-first"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13248860,"title":"Querying an auto-generated EF junction table","body":"<p>I have two models, Benefit and SchemeName</p>\n\n<p>Benefit - </p>\n\n<pre><code>[Key]\npublic int BenefitID { get; set; }\npublic string BenefitName { get; set; }\npublic string BenefitDescription { get; set; }\npublic virtual ICollection&lt;SchemeName&gt; SchemeNames { get; set; }\n</code></pre>\n\n<p>SchemeName</p>\n\n<pre><code>[Key]\npublic int SchemeNameID { get; set; }\npublic string Name { get; set; }\npublic virtual ICollection&lt;Benefit&gt; Benefits { get; set; }\n</code></pre>\n\n<p>This has created three tables in the database Benefits, SchemeNames and a joining table called SchemeNameBenefits.</p>\n\n<p>I am trying to populate a droplownlist that contains only the SchemeNames associated with a certain Benefit but am not sure how I can do this, can I reference the join table in my code?</p>\n\n<p>I started with the following (which returns all SchemeNames)</p>\n\n<pre><code>private void PopulatePensionSchemeName(object selectedPensionSchemeName = null)\n        {\n            var schemeNameQuery = from d in db.SchemeNames\n                                  orderby d.SchemeNameID\n                                  select d;\n\n            ViewBag.PensionSchemeNameID = new SelectList(schemeNameQuery, \"SchemeNameID\", \"Name\", selectedPensionSchemeName);\n        }\n</code></pre>\n\n<p>But I'm not sure how I can add this clause. Any pointers?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","iis7"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":11897,"score":5,"question_id":1966240,"title":"How to configure IIS7 to work with an MVC 2.0 Framework 4.0 application","body":"<p>I have an MVC 2.0 application that I'm playing around with in VS2010 which is a .Net Framework 4.0 application, which works great on my local dev machine, but fails when IIS gets involved, giving me all sorts of IIS errors.</p>\n\n<p>Can someone please tell me the sequence of steps I need to do in order to get an application set-up in IIS 7.0 (running on Windows 2008 Server)? The best I can get is it showing me the directory contents of the root of my site. :o(</p>\n\n<p>I've followed various SO links to various posts saying that to stop the 403.14 Forbidden error message, you simply enable directory browsing in IIS for my particular app and it's away, but turning it on simply shows be the root-level structure and not actually running my site.</p>\n\n<p>To confirm, the 2008 Server has .Net Framework 4.0 installed, and I have set the 3x MVC 2.0 dlls to Copy Local = true from within Visual Studio 2010, so that the necessary MVC .dlls are present in the bin folder.  I have an MVC 1.0 application running on that machine (made using VS2008) but can't seem to get this 2.0 app working</p>\n"},{"tags":["c#","jquery","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13246306,"title":"download data as .xls format file","body":"<p>I need to download list data as .xls file.My controller code is follows.    </p>\n\n<pre><code>     [HttpGet]\n        public void AttendeeListToExport()\n        {\n            string campaign_id = string.Empty;\n            campaign_id = ((MemberProfile)HttpContext.Current.Profile).HOWCampaignID;\n            AutoCRM.Services.HOW.Attendee.Manage manage = new AutoCRM.Services.HOW.Attendee.Manage();\n            DataSet lst = manage.AttendeeListToExport(campaign_id);\n            if (lst != null)\n            {\n                if (lst.Tables[0].Rows.Count &gt; 0)\n                {\n                    DataTable dt = lst.Tables[0];\n                    // Export all the details to Excel\n                    string filename = campaign_id + \"_\" + DateTime.Now.ToString(\"ddMMyyyy\") + \".xls\";\n                    Export objExport = new Export();\n                    objExport.ExportDetails(dt, Export.ExportFormat.Excel, filename);\n                }\n            }\n        }\n</code></pre>\n\n<p>js code </p>\n\n<pre><code>$('#exportToExcel').on(\"click\", function () {\n        alert('hi');\n        $.ajax({\n            url: \"/api/Attendee/AttendeeListToExport\",\n            async: true,\n            cache: false,\n            success: function (result) {\n                alert(result);\n            }\n        });\n    });\n</code></pre>\n\n<p>code executing correctly but file not downloading</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13252621,"title":"Multiple ActionResults with a single View containing a DropDownList populated from Controller","body":"<p>I have 2 ActionResults that return the same view with a DropDownList source</p>\n\n<pre><code>Public ActionResult Create()\n{\n    var model = new ViewModel {\n        Entity = new Entity(),\n        Categories = GetCategories()\n    };\n\n    return View(\"Edit\", model);\n}\n\nPublic ActionResult Edit(int id)\n{\n    var model = new ViewModel {\n        Entity = GetFromDatabase(id),\n        Categories = GetCategories()\n    };\n\n    return View(model);\n}\n</code></pre>\n\n<p>I feel like I'm breaking the DRY principle, even if I've moved the population of the categories to a method. Is there a better way to go about this and only state where to get the Categories from once?</p>\n"},{"tags":["asp.net-mvc","sql-server-2008","entity-framework","entity-framework-4","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13252472,"title":"Entity Framework import and use stored procedure which returns different result sets depending on input","body":"<p>I am working on a migration project, where I am migrating an web forms app to a ASP.NET MVC 4 app.</p>\n\n<p>I have come across this one scenario with which I need a little help.</p>\n\n<p>In the old web form project I have stored proc like...</p>\n\n<pre><code>ALTER PROCEDURE [dbo].[TestMultipleResultSet]\n    @input VARCHAR\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    IF NOT EXISTS\n    (\n        SELECT * FROM Electronics\n        WHERE name = @input\n    )\n    BEGIN\n        SELECT 101 AS errorcode\n        RETURN\n    END\n\n    SELECT * FROM Electronics \n    WHERE name = @input\nEND\n</code></pre>\n\n<p>like the above <code>if not exist</code> check, there are many other checks with gives different <code>select * from</code> as resultset.</p>\n\n<p>Now I want to use Entity framework to execute this stored procedure, so I imported the function and created a complex type using the <code>Get Column Information</code> + <code>Create Complex Type</code> option which EF provides.</p>\n\n<p>Now it runs when I enter a valid @input which executes <code>SELECT * FROM Electronics WHERE name = @input</code> but when I enter an input which is not present instead of returning me a 101 error code it gives me an error. An exception is thrown.</p>\n\n<p>Exception details</p>\n\n<blockquote>\n  <p>The data reader is incompatible with the specified 'testEFModel.GetTestResults_Result1'. A member of the type, 'id', does not have a corresponding column in the data reader with the same name.</p>\n</blockquote>\n\n<p>How should I solve this ?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio","visual-studio-2012","code-first-migrations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13230902,"title":"Publishing my database (package deploy) with Code First Migrations","body":"<p>I have a VS2012 MVC4 solution (EF5). When coding, I use my personal computer with an SQL Express installed on the same machine. Each time I need to publish an update to the company, I create a package (.zip) and then import this package on the IIS of the company (not accessible from my dev computer). Each time I published my solution on the IIS server of the company, I recreate the entire database. That was in the past...</p>\n\n<p>Now, I changed my solution and use the Code First Migrations. When needed (entities changed), I update my local database thanks to the 'Package Manager console' (Update-Database). </p>\n\n<p><strong>My question</strong>: what do I have to do to update the database on the IIS of the company? </p>\n\n<p>I see the screenshot below on an explanation page (http://msdn.microsoft.com/en-us/library/dd465337.aspx) but I don't have the same screen when I open the publish wizard on my VS2012.</p>\n\n<p>Below is the screen seen on a documentation page:</p>\n\n<p><img src=\"http://i.stack.imgur.com/8tbcm.png\" alt=\"enter image description here\"></p>\n\n<p>Below is the screen I have:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZbuBS.png\" alt=\"enter image description here\"></p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["asp.net","asp.net-mvc","jquery-ui","jquery-ui-dialog"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13154814,"title":"MVC JQuery Dialog submit more than 1 time","body":"<p>I am using JQuery's UI dialog to open a form. My attempt is to submit and close the dialog. I am having trouble.</p>\n\n<p>The parent window opens the dialog (which contains a partial view) from click and form is submitted, for the first time, data is saved in DB. But if I click to open the dialog again and submit, there are 2 data rows saved in DB with the same value.</p>\n\n<p>My code is below:</p>\n\n<pre><code>$('#newFileDialog').dialog('destroy');$('#newFileDialog').remove();\n</code></pre>\n\n<p>Is there something wrong with this code?</p>\n\n<p>Your help is appreciated.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Partial view:</p>\n\n<pre><code>@using(Html.BeginForm(\"New\", \"File\", new {}, FormMethod.Post, new { Id = \"newFileForm\" }  ))\n{    \n   @Html.ValidationSummary()    \n   @Html.RenderHTML(\n        new TabContainerViewModel(\n                new TabViewModel { Name = \"File\", ViewName = \"Common\", Model = Model, Visible = true},\n                new TabViewModel { Name = \"Permission\", ViewName = string.Empty, Visible = true}\n            ) { Id = \"createFileTabs\", Visible = true })    \n   @Html.SubmitButton(\"Send\")\n}\n@{ Html.JQueryAjaxForm(\"newFileForm\", \"containerComponentContent\", string.Empty, \"$('#newFileDialog').dialog('destroy');$('#newFileDialog').remove();showMessagebox('New File added');\"); }\n</code></pre>\n"},{"tags":["asp.net-mvc","json","rest","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":103,"score":2,"question_id":13236528,"title":"Return JSON with WEB API Controller with objects with foreign keys","body":"<p>I have a problem with my code.\nI have some basics WEB API Controller that works ok (three fields without any foreign keys), but i have a problem with a API Controller that returns a list of objects from the model, and that class has a Foreign key to another class from the model.\nThis throws an error:\nHere is the Api Controller:</p>\n\n<pre><code>Public Class MaestroProvinciaController\n    Inherits System.Web.Http.ApiController\n\n    Private db As New UnificadorEntities\n\n    ' GET api/MaestroProvincia\n    Function GetMaestroProvincias() As IEnumerable(Of MaestroProvincia)\n        Dim l As IEnumerable(Of MaestroProvincia)\n        l = db.MaestroProvincia.AsEnumerable()\n        Return l\n    End Function\nEnd Class\n</code></pre>\n\n<p>And here is the Model of MaestroProvincia</p>\n\n<pre><code>Partial Public Class MaestroProvincia\n  Public Property Codigo As Integer\n  Public Property Descripcion As String\n  Public Overridable Property Usuario As ICollection(Of Usuario) = New HashSet(Of Usuario)\n\nEnd Class\n</code></pre>\n\n<p>When i consume , to try, from the browser to this address:\n<code>......../api/maestroprovincia</code>  </p>\n\n<p>I got an error:\n<code>Error del servidor\nEl sistema encontró un error mientras extraía ......../api/maestroprovincia . Es posible que el servidor no esté disponible por mantenimiento o no esté bien configurado.\nA continuación se detallan algunas sugerencias:\nVolver a cargar esta página web después.\nError HTTP 500 (Internal Server Error): Se encontró una situación inesperada mientras el servidor intentaba cumplir con la solicitud.</code></p>\n\n<p>When I debug the Controller, put a WATCH (inspect) in the <code>\"l\"</code> variable, and the type of the objects of the list it is very strange, instead of <code>MaestroProvincia</code> type I get <code>system.data.entity.DynamicProxies.MaestroProvincia_D7543654378543</code>.</p>\n\n<p>All the other API Controllers that returns objects from models without FK does not have any problem.</p>\n\n<p>I would appreciate your help.  </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13237122,"title":"Mvc application(from default) user registration","body":"<p>I make a Mvc4 application from defaults I've been given at the beginning.</p>\n\n<p>I need to store the modified UserProfile in my DB, so I have changed the UserProfile class for  fulfilling my needs and also changed the RegisterModel class. Now when I register someone, I have a correct view with all the necessary fields for it, however, when I open Server Explorer for check, I get a UserProfile table with UserId and UserName only(but by the model there should also be firstname,lastname,email and so on).</p>\n\n<p>What should be modified more for storing them correctly?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":13109674,"title":"ASP.NET MVC4 logged in but still needs to login","body":"<p>I'm new to ASP.NET and I'm facing a strange problem.</p>\n\n<p>I'm succefully logged in (my login partial view is showing my username using <code>User.Identity.Name</code> when <code>Request.isAuthenticated</code> is true), nevertheless, when I try to access a Controller that is protected by <code>[Authorize(Roles=\"Teacher\")]</code> (I'm logged as a teacher), he is pretty much always redirecting me to the login page. So I login and I can access the webpage, but if I refresh something like 30 seconds after I still have to login knowing that my username is still printed and I still seem to be logged.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","attributes","asp.net-mvc-4","metadata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13230362,"title":"Edit all attribute error messages dynamicly","body":"<p>I have made my own translation system, and i need to translate all of the validation errors produced by validation attributes, i have already done so with the DisplayNames like this:</p>\n\n<pre><code>public class MyCustomDataAnnotationModelProvider : DataAnnotationsModelMetadataProvider\n{\n    protected override ModelMetadata CreateMetadata(IEnumerable&lt;Attribute&gt; attributes, Type containerType, Func&lt;object&gt; modelAccessor, Type modelType, string propertyName)\n    {\n        var data = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);\n\n        if (data.DisplayName != null)\n            data.DisplayName = Translator.TranslateOnce(data.DisplayName);\n\n        return data;\n    }\n}\n</code></pre>\n\n<p>And that translates all of the Display attributes::</p>\n\n<pre><code>[Required(ErrorMessage=\"message\"), Display(Name=\"Language\"), StringLength(10)]\npublic string LanguageName { get; set; }\n</code></pre>\n\n<p>So basicly i want to do the exact same thing with the validation error, but i can't figure out how to iterate through them. \nThere is this thing called data.GetValidators() but it requires the ControllerContext, which i can't find.</p>\n"},{"tags":["asp.net-mvc","f#"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":13250752,"title":"Setting base member values in F#","body":"<p>I am messing about trying to implement my own basic view engine in F# at the moment. Essentially I am inheriting from the VirtualPathProviderViewEngine. </p>\n\n<p>To do this I need to set two view locations so the engine knows where to look for the views. In my F# type I inherit from the above and try to set the two view locations as below... </p>\n\n<pre><code>type FSharpViewEngine() =\ninherit VirtualPathProviderViewEngine()\n\nlet viewLocations = [| \"~/Views/{1}/{0}.fshtml\"; \"~/Views/Shared/{0}.fshtml\" |]\n\nmember this.ViewLocationFormats = viewLocations\nmember this.PartialViewLocationFormats = viewLocations\n</code></pre>\n\n<p>The code above omits the overrides that are needed for the VirtualPathProviderViewEngine. \nI run the project and I get an error message to say </p>\n\n<blockquote>\n  <p>The property 'ViewLocationFormats' cannot be null or empty.</p>\n</blockquote>\n\n<p>Which I am assuming means that I am not setting the two base members correctly above. Am I just assigning the above incorrectly or do you suspect I am doing something else wrong?</p>\n\n<p>As extra info, I have added the ViewEngine at start up time in the Global.fs (global.asax) like so...</p>\n\n<pre><code>ViewEngines.Engines.Add(new FSharpViewEngine())\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","file-download","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13251028,"title":"ASP.net mvc How to handle 404 which caused by missing of file","body":"<p>I have file in folder \"/UploadDir/TextFile1.txt\"\nI need: </p>\n\n<ol>\n<li>download file if it exists</li>\n<li>if file not exists (for example url :\"/UploadDir/TextFile2.txt\") should be shown custom errors message.</li>\n</ol>\n\n<p>But now my mvc application not handle any requests to missed or existing files, when i place breackpoint on Application_BeginRequest and try to request text file - nothing occurred.</p>\n\n<p>Besides i tryed to override HttpNotFound and HandleUnknownAction but same unsuccessfully.</p>\n\n<p>Who can help me how to hande request to file if it exists or show custom error if it not found.</p>\n\n<p>ps. route configuration is default</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","entity-framework","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13251060,"title":"EF 4: System.Data.Entity.Edm.EdmEntityType: Name: Each type name in a schema must be unique","body":"<p>I want to use EF code first approach.</p>\n\n<p>I have read this post:</p>\n\n<p><a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx\" rel=\"nofollow\">http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx</a></p>\n\n<p>and created my BL classes</p>\n\n<pre><code>public class AppData\n{\n    public string Id { get; set; }\n\n    public string Url { get; set; }\n\n    public AppData_OptionsDialog OptionsDialog { get; set; }\n\n    public AppData_Compatibility Compatibility { get; set; }\n\n}\n\npublic class AppData_Compatibility\n{\n    public int Id { get; set; }\n\n    public string Platform { get; set; }\n\n    public string MaxVersion { get; set; }\n}\n\n\npublic class AppData_OptionsDialog\n{\n\n    public int Id { get; set; }\n\n    public string DisplayName { get; set; }\n\n    public string AppDesc { get; set; }\n\n    public string PrivacyPolicyUrl { get; set; }\n\n    public string TermsOfUseUrl { get; set; }\n\n}\n\n\npublic class AppsDataContext : System.Data.Entity.DbContext\n{\n    public AppsDataContext() : base(\"MaMDB\") { }\n\n    public DbSet&lt;Conduit.Mam.Common.BlData.AppsData.AppData&gt; AppsData { get; set; }\n\n    public DbSet&lt;Conduit.Mam.Common.BlData.AppsData.AppData_Compatibility&gt; AppData_Compatibilities { get; set; }\n\n    public DbSet&lt;Conduit.Mam.Common.BlData.AppsData.AppData_OptionsDialog&gt; AppData_OptionsDialogs { get; set; }       \n}\n</code></pre>\n\n<p>I have created corrisponding tables in the DB.</p>\n\n<p>I understand EF uses convention over configuration.</p>\n\n<p>So is it magically maps the classes to the DB? no need to generate an em</p>\n\n<p>I try to execute a test on of the methods:</p>\n\n<pre><code>    public IList&lt;Conduit.Mam.Common.BlData.AppsData.AppData&gt; GetAll()\n    {\n        var apps = from app in AppsDataContext.AppsData\n               select app;\n\n        return apps.ToList();\n    }\n</code></pre>\n\n<p>but get the following error:</p>\n\n<blockquote>\n  <p>One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: Name: Each type name in a\n  schema must be unique. Type name 'AppData_OptionsDialog' is already\n  defined. \\tSystem.Data.Entity.Edm.EdmEntityType: Name: Each type name\n  in a schema must be unique. Type name 'AppData_Compatibility' is\n  already defined.</p>\n</blockquote>\n\n<p>I have seen this answer, but it didn't help me</p>\n\n<p><a href=\"http://stackoverflow.com/questions/979664/entity-framework-error-the-entitycontainer-name-must-be-unique\">Entity Framework error - &quot;The EntityContainer name must be unique&quot;</a></p>\n"},{"tags":["c#","asp.net-mvc","post","static","visual-studio-2012"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":61,"score":0,"question_id":13230520,"title":"ASP.NET MVC public static list not same after POST","body":"<p>I'm new to MVC and i have problem i can't understand. Below code is what i want to attain:</p>\n\n<p>Model:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nnamespace testapplication.Models {\n    public class testModel {\n\n        public class SystemUser {\n            public string Name { get; set; }\n            public string Email { get; set; }\n        }\n\n        public static List&lt;SystemUser&gt; list1;\n        public static void CreateList1() {\n            list1 = new List&lt;SystemUser&gt;();\n        }\n\n        public static void FillList1() {\n            SystemUser firstUser = new SystemUser();\n            firstUser.Name = \"name\";\n            firstUser.Email = \"email@address.com\";\n            list1.Add(firstUser);\n        }\n\n        public static List&lt;SystemUser&gt; list2 = new List&lt;SystemUser&gt;();    \n        public static void FillList2() { \n            SystemUser firstUser = new SystemUser();\n            firstUser.Name = \"name\";\n            firstUser.Email = \"email@address.com\";\n            list2.Add(firstUser);\n        }\n\n        public static string list3 = \"test\";\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing testapplication.Models;\n\nnamespace testapplication.Controllers {\n    public class HomeController : Controller {\n\n        public ActionResult Index() {\n            testModel.CreateList1();\n            testModel.FillList1();\n            testModel.FillList2();\n            var var1 = testModel.list1;\n            var var2 = testModel.list2;\n            var var3 = testModel.list3;\n            return View();\n        }\n\n        [HttpPost]\n        public ActionResult Index(string test) {\n            var var1 = testModel.list1;\n            var var2 = testModel.list2;\n            var var3 = testModel.list3;\n            return View();\n        }\n    }\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;h2&gt;Index&lt;/h2&gt;\n\n@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post)) {\n    &lt;input type=\"submit\" value=\"Submit\" /&gt; \n}\n</code></pre>\n\n<p>Before POST method list1,list2 and list3 are ok but right after Post list1 is null, list2 is empty (instance is created) and list3 is ok. Why is that? I want to have same value before and after POST. Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13249935,"title":"The jQuery `data` method don't convert value","body":"<p>I have the following code in the view:</p>\n\n<pre><code>&lt;div id=\"wiz_main\"  data-place-schema=\"@Model.IsAgent\"&gt;\n...\n&lt;/div&gt;\n</code></pre>\n\n<p>This is the rendered code:</p>\n\n<pre><code>&lt;div id=\"wiz_main\" data-agent=\"True\"&gt;\n...\n&lt;/div&gt;\n</code></pre>\n\n<p>The code in the javascript file I write:</p>\n\n<pre><code>if ($('#wiz_main').data('agent'))\n        limit = 1000;\nelse\n        limit = 5;\n</code></pre>\n\n<p>The problem in that is, the <code>limit</code> always equals <code>5</code>. Why? I think <code>data</code> is smart and convert value to <code>bool</code>. I don't want to write the following:</p>\n\n<pre><code>if ($('#wiz_main').data('agent') == 'True')\n       limit = 1000;\nelse\n       limit = 5;\n</code></pre>\n\n<p>Version of <code>jQuery</code> is 1.7.2.</p>\n"},{"tags":["asp.net-mvc","performance","entity-framework","iis","entity-framework-5"],"answer_count":0,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":78,"score":5,"question_id":13250679,"title":"How to \"warm-up\" Entity Framework? When does it get \"cold\"?","body":"<p>No, the answer to my second question is not the winter.</p>\n\n<p><strong>Preface:</strong></p>\n\n<p>I've been doing a lot of research on Entity Framework recently and something that keeps bothering me is its performance when the queries are not warmed-up, so called cold queries. </p>\n\n<p>I went through the <a href=\"http://msdn.microsoft.com/en-us/data/hh949853.aspx\">performance considerations</a> article for Entity Framework 5.0. The authors introduced the concept of <strong>Warm</strong> and <strong>Cold</strong> queries and how they differ, which I also noticed myself without knowing of their existence. Here it's probably worth to mention I only have six month of experience behind my back.</p>\n\n<p>Now I know what topics I can research into additionally if I want to understand the framework better in terms of performance. Unfortunately most of the information on the Internet is outdated or bloated with subjectivity, hence my inability to find any additional information on the <em>Warm</em> vs <em>Cold</em> queries topic.</p>\n\n<p>Basically what I've noticed so far is that whenever I have to recompile or the recycling hits in, my initial queries are getting very slow. Any subsequent data read is fast (<em>subjective</em>), as expected.</p>\n\n<p>We'll be migrating to Windows Server 2012, IIS8 and SQL Server 2012 and as a Junior I actually won myself the opportunity to test them before the rest. I'm very happy they introduced a warming-up module that will get my application ready for that first request. However, I'm not sure how to proceed with warming up my Entity Framework.</p>\n\n<p>What I already know is worth doing:</p>\n\n<ul>\n<li>Generate my Views in advance as suggested.</li>\n<li>Eventually move my models into a separate assembly.</li>\n</ul>\n\n<p>What I consider doing, by going with common sense, <strong>probably wrong approach</strong>:</p>\n\n<ul>\n<li>Doing dummy data reads at Application Start in order to warm things\nup, generate and validate the models.</li>\n</ul>\n\n<p><strong>Questions:</strong> </p>\n\n<ul>\n<li>What would be the best approach to have high availability on my Entity Framework at anytime?</li>\n<li>In what cases does the Entity Framework gets \"cold\" again? (Recompilation, Recycling, IIS Restart etc.)</li>\n</ul>\n"}]}
{"total":44782,"page":4,"pagesize":100,"questions":[{"tags":["asp.net-mvc","mvccontrib","asp.net-mvc-areas","portable-areas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12244047,"title":"Portable Areas Vs Multi project Areas?","body":"<p>Can you please tell me advantages/drawbacks of these two implementations?</p>\n\n<p>My context : We have a large project which includes many differents domains. Each domain will naturally be  an Area. But many differents teams will work on each and we want to separate business rules. What is the best way to manage these ares in a solution ?</p>\n\n<p>I have seen many examples of Areas in separate project or with portable areas.\nBut i can not take decision.</p>\n\n<p>From my point of view :</p>\n\n<p>Separate Project</p>\n\n<ul>\n<li>Simple</li>\n<li>Difficult to manage Content (JS, CSS, ...). Does it must be in the main site ?</li>\n<li>Best performances</li>\n</ul>\n\n<p>Portable Areas</p>\n\n<ul>\n<li>All content, views must be in the same project</li>\n<li>Possible code duplicate between areas</li>\n<li>Contraints : name , embedded ressources, ...</li>\n<li>Part of MVC Contrib : will it me supported longer ?</li>\n<li>Component : ideal for redistribute a feature</li>\n</ul>\n\n<p>Thanks,</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13249240,"title":"How to render html content within label tag using jquery","body":"<p>I am working on asp.net mvc. I have a javascript variable like,</p>\n\n<pre><code>var note=\"&amp;lt;strong&amp;gt;&amp;lt;em&amp;gt;&amp;lt;span style='color:#ed1c24;'&amp;gt;Hai&amp;lt;/span&amp;gt;&amp;lt;/em&amp;gt;&amp;lt;span style='color:#ed1c24;'&amp;gt;Welcome&amp;lt;/span&amp;gt;&amp;lt;/strong&amp;gt; \";\n</code></pre>\n\n<p>I need to display as a html with in the label so i tried it like,</p>\n\n<pre><code>$('#lblNote').html(note);\n</code></pre>\n\n<p>but it doesnt render the html content and it shows the html tags as it is like,</p>\n\n<pre><code>&lt;label id=\"lblNote\"&gt;&lt;strong&gt;&lt;em&gt;&lt;span style=\"\"color:#ed1c24;\"\"&gt;\n    Hai&lt;/span&gt;&lt;/em&gt;&lt;span style=\"\"color:#ed1c24;\"\"&gt;\n    Welcome&lt;/span&gt;&lt;/strong&gt; &lt;/label&gt;\n</code></pre>\n\n<p>please guide me.</p>\n"},{"tags":["asp.net-mvc","facebook-c#-sdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":250,"score":0,"question_id":9989486,"title":"Upload Event photo using Facebook-C#-SDK","body":"<p>I'm using the facebook-c#-sdk to create events on facebook, and that part it's working fine, but now i don't know how to use the sdk to upload the photo for my event.</p>\n\n<p>what sould i do?</p>\n\n<p>i'm using a asp.net mvc3 app</p>\n"},{"tags":["asp.net-mvc","forms","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13249429,"title":"ASP.Net MVC - What is the recommended way to retain form values across different controllers?","body":"<p>Let's say I have a HomeController which has an Index action, in the Index.cshtml View I will be posting back to an action in another controller (DocumentsController), after the action is completed I redirect back to Home/Index.</p>\n\n<p>What is the recommended/cleanest approach to maintain the form values that the user has submitted in the Index.cshtml view?  Given that it is being redirected from another controller?</p>\n\n<p>EDIT: I'm presently using RedirectToAction:</p>\n\n<p><code>return RedirectToAction(\"Index\", \"Home\");</code></p>\n\n<p>So using this approach how can I retain form values?</p>\n"},{"tags":["asp.net","asp.net-mvc","error-handling","godaddy","custom-error-pages"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":364,"score":0,"question_id":4231402,"title":"Overriding webhost's default error pages","body":"<p>I just published an ASP.NET MVC site where I built custom error pages. Here's how I implemented them:</p>\n\n<p>in ErrorController:</p>\n\n<pre><code>public ActionResult NotFound()\n{\n    Response.StatusCode = (int)HttpStatusCode.NotFound;\n    return View();\n}\n</code></pre>\n\n<p>in web.config:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/500\"&gt;\n&lt;error statusCode=\"403\" redirect=\"~/403\"/&gt;\n&lt;error statusCode=\"401\" redirect=\"~/401\"/&gt;\n&lt;error statusCode=\"404\" redirect=\"~/404\"/&gt;\n&lt;error statusCode=\"409\" redirect=\"~/409\"/&gt;\n&lt;error statusCode=\"500\" redirect=\"~/500\"/&gt;&lt;/customErrors&gt;\n</code></pre>\n\n<p>Naturally, faulty requests are routed to the NotFound method, and so on. Theoretically, it should work.</p>\n\n<p>However, I'm facing a problem: now that I've published my site to my host (GoDaddy), I've noticed that <strong>returning an error code for HTTP status causes my custom error pages to replaced by the default GoDaddy ones</strong>.</p>\n\n<p><strong>How can I get around this?</strong> Of course, the simplest solution would be to return a 200 status code, but I'd prefer to return the real error code (for SEO and such).</p>\n"},{"tags":["c#","asp.net-mvc","razor","asp.net-mvc-4","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13248352,"title":"How to show validation message in mvc4 razor","body":"<p>I am newbie in MVC Razor and I want to implement validation message on textboxes. Here I'm creating some textbox dynamically as follows:</p>\n\n<p><strong>View Code:</strong></p>\n\n<pre><code>foreach (var items in (IEnumerable&lt;System.Data.DataRow&gt;)Model.UsersOfList)\n{\n\n  @Html.TextBoxFor(m =&gt; m.LoginNameOfLoginInfoTab, new { @class = \"textBox_LoginInfoAndPermission\", @value = (Model.LoginNameOfLoginInfoTab = items[\"UserName\"].ToString()), @id = (\"txtUserLoginName\" + Model.UsernameOfLoginInfoTab.Trim()) })\n\n  @Html.ValidationMessageFor(m =&gt; m.LoginNameOfLoginInfoTab, null, new { @class = \"ErrorMessage\" })\n\n  @Html.TextBoxFor(m =&gt; m.UsernameOfLoginInfoTab, new { @class = \"textBox_LoginInfoAndPermission\", @value = (Model.UsernameOfLoginInfoTab = items[\"FirstName\"].ToString()), @id = (\"txtUserName\" + Model.UsernameOfLoginInfoTab.Trim()) })\n\n  @Html.ValidationMessageFor(m =&gt; m.UsernameOfLoginInfoTab, null, new { @class = \"ErrorMessage\" })\n\n\n}\n</code></pre>\n\n<p>in the module I've written code for validation as follows:</p>\n\n<pre><code>[Required (ErrorMessage=\"*\")]\n    public string UsernameOfLoginInfoTab\n    {\n        get;\n        set;\n    }\n\n\n   [Required(ErrorMessage = \"*\")]\n    public string LoginNameOfLoginInfoTab\n    {\n        get;\n        set;\n    }\n</code></pre>\n\n<p>Now when all textboxes has been created and when one validation message is displaying for first loop iteration textbox then it will automatically displaying in front of another textbox too which is created on second loop iteration. </p>\n\n<p>Please tell me whats going wrong. </p>\n"},{"tags":["c#","asp.net-mvc","delete","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13249039,"title":"Web API Delete Method not working","body":"<p>Calling a DELETE method Web API is not reaching the server. After searching all over the web for similar issues non have worked for me.\nBelow is a brief of my code across my solution.</p>\n\n<p><strong>Web API:</strong></p>\n\n<pre><code>    [AuthorizeService]\n    [HttpDelete]\n    public HttpResponseMessage Delete(Int32 id)\n    {\n        String username = User.Identity.Name;\n        this._clientDataManager.DeleteRestaurant(id,username);\n\n        return new HttpResponseMessage(HttpStatusCode.OK);\n    }\n</code></pre>\n\n<p><strong>Ajax Call:</strong></p>\n\n<pre><code>$.ajax({\n    url: 'localhost:53378/api/RestaurantWebAPI/1135',\n    type: \"DELETE\",\n    statusCode: {\n        200: function (data) {\n            //success\n        }\n    }, beforeSend: setHeader\n});\n</code></pre>\n\n<p><strong>Web.Config:</strong></p>\n\n<pre><code>&lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n    &lt;/modules&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;handlers&gt;\n        &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" /&gt;\n        &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" /&gt;\n        &lt;remove name=\"ExtensionlessUrlHandler-Integrated-4.0\" /&gt;\n        &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness32\" responseBufferLimit=\"0\" /&gt;\n        &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness64\" responseBufferLimit=\"0\" /&gt;\n        &lt;add name=\"ExtensionlessUrlHandler-Integrated-4.0\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" type=\"System.Web.Handlers.TransferRequestHandler\" preCondition=\"integratedMode,runtimeVersionv4.0\" /&gt;\n    &lt;/handlers&gt;\n\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p>Appreciate any help. \nThanks </p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13248609,"title":"MVC- Model Binding on a Complex Type","body":"<p>If I have a Model like this:</p>\n\n<pre><code>public class Search\n{\n    public int Id { get; set; }\n    public string UserDefinedName { get; set; }\n    public SearchAge Age { get; set; }\n    public virtual ICollection&lt;SearchBachelors&gt; Bachelors { get; set; }\n}\n</code></pre>\n\n<p>And I render the partial view for Age property dynamically using something like this:</p>\n\n<pre><code>@Ajax.ActionLink(\"Age\", \"SearchAge\", new AjaxOptions { UpdateTargetId = \"search-stage\", InsertionMode = InsertionMode.InsertAfter })\n</code></pre>\n\n<p>That partial view looks like this:</p>\n\n<pre><code>@model HireWireWeb.Models.Campaign.Search.Search\n&lt;div&gt;\n    @Html.DropDownListFor(m =&gt; m.Age.MaximumAge, HireWireWeb.Models.Constants.SLIST_AGE_LIST)\n    @Html.DropDownListFor(m =&gt; m.Age.MinimumAge, HireWireWeb.Models.Constants.SLIST_AGE_LIST)\n&lt;/div&gt;\n</code></pre>\n\n<p>(Note that I'm not passing \"SearchAge\" as the model here, but rather it's parent, \"Search\" since it's only how I can get the \"SearchAge\" values posted on form submit, under the rendered \"Search\" Form) - <a href=\"http://stackoverflow.com/questions/6440693/asp-net-mvc-model-binding-complex-type\">According to this Answer</a></p>\n\n<p>My question is, how can I do the same thing with the partial view for \"Bachelors\" property, since it's an ICollection?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13249155,"title":"Refresh User Control in MVC","body":"<p>I have 3 user controls in an aspx page in my MVC application. \ni bind data from DB from one controller.</p>\n\n<p>on the selection of \"Filter / Status\" i want to bind data (refresh) to \"List\" user control with out refreshing \"Filter &amp; Status\" user controls.</p>\n\n<p>below are my user controls in aspx page.\nplease help me how to refresh part of the page/user control.</p>\n\n<p>i have tried by returning only \"ListView\" View data. but its searching for the other 2 views &amp; throwing exception.</p>\n\n<pre><code>          &lt;td&gt;\n                &lt;%Html.RenderPartial(\"Filter\", ViewData[\"FilterView\"]); %&gt;\n            &lt;/td&gt;\n\n            &lt;td valign=\"top\" width=\"15%\"&gt;\n                &lt;%Html.RenderPartial(\"Status\", this.ViewData[\"StatusView\"]); %&gt;\n\n            &lt;/td&gt;\n            &lt;td valign=\"top\" width=\"85%\"&gt;\n\n                &lt;%Html.RenderPartial(\"List\", this.ViewData[\"ListingView\"]); %&gt;\n\n            &lt;/td&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","security","authentication","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13249134,"title":"Performing custom authentication with authenticated domain users","body":"<p>I am aware this has been asked ad-infinitum but I am bing overwhelmed with solutions and nothing seems to work.</p>\n\n<p>My problem is a common one but I can't seem to get it to work or I am missing something.</p>\n\n<ul>\n<li>ASP.NET MVC4 </li>\n<li>Windows Authentication with User list and roles in DB</li>\n<li>Intranet website</li>\n</ul>\n\n<p>All employees are on the same domain so with Windows authentication, they are all <code>IsAuthenticated = true;</code> but only some are allowed to use this website. Those users are in a database with a list of roles so I take the domain Id of the current user, check if it exists in the db. If not then I set <code>IsAuthenticated</code> to false and route to appropriate page. If user exists I retrieve user details and want to se the <code>HttpContext.Current.User</code> to my custom Principal. So I need custom authentication and authorization. I want to performa authentication against the db once and only once.</p>\n\n<p>After authentication I will be performing authorization on a per controller, per action basis.</p>\n\n<p>I've read a <em>lot</em> online and can't seem to see the wood for the trees.</p>\n\n<p>Currently I have a custom AuthorizeAttribute overriding AuthorizeCore, I hit the db, do my authentication, then set tje HttpContext.Current.User to my custom Principal but on subsequent requests, I can't access this custom Principal, only the windowsPrincipal (because all users are on the same domain and are authenticated).</p>\n\n<pre><code>override protected bool AuthorizeCore(HttpContextBase httpContext_)\n{\n    var authorized = base.AuthorizeCore(httpContext_);\n\n    if(!authorized) { return false; }\n\n    // authenticate against the db\n    // CurrentPrincipal is a static property returning Thread.CurrentPrincipal\n    // subsequent requests return null for this CurrentPrincipal ??\n    if (MyPrincipal.CurrentPrincipal == null)\n    {\n        var cachedUser = new MyEFContext().Users\n            .Where(user_ =&gt;\n                user_.ADName == HttpContext.Current.User.Identity.Name &amp;&amp;\n                !user_.IsDeleted &amp;&amp;\n                !user_.IsDisabled)\n                .FirstOrDefault();\n\n        // SetCurrent is a static method \n        // It takes the cachedUser entity and creates a new MyCustom Principal with it\n        // and then sets the Thread.CurrentPrincipal\n        // and the HttpContext.Current.User to that custom Principal\n        MyPrincipal.SetCurrent(cachedUser);\n\n                    // below commented out but I have also tried the below\n                    //httpContext_.User = MyPrincipal.CurrentPrincipal;\n    }\n\n    // authorise\n    var isAllowed = false;\n    if (!string.IsNullOrEmpty(Roles))\n    {\n        isAllowed  = Roles == DSTPrincipal.CurrentPrincipal.AuthenticatedUser.Role;\n    }\n\n    return MyPrincipal.CurrentPrincipal != null \n        &amp;&amp; MyPrincipal.CurrentPrincipal.Identity.IsAuthenticated \n        &amp;&amp; (!string.IsNullOrEmpty(Roles) &amp;&amp; isAllowed);\n}\n</code></pre>\n\n<ol>\n<li>Where should I perform custom authentication against my db? I used to do it in Global.asax.cs or in a custom HttpModule using the AuthenticateRequest event.</li>\n<li>Is my custom AuthorizeAttribute the correct approach? Doing authenticationa and authorisation here doesn't feel right.</li>\n<li>I want to cache my custom principal so on subsequent calls I don't have to hit the db and I have access to other custom principal properties.</li>\n</ol>\n\n<p>Apologies if I am not coherent in my request. If you have any Qs then please let me know and I will try to improve my question.</p>\n\n<p>Thanks for any help and advice.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","wif"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1154,"score":3,"question_id":4751125,"title":"Microsoft.IdentityModel vs System.IdentityModel","body":"<p>I'm working on a claims-based authorization system using Forms Authentication and ASP.NET MVC 2. I see that one namespace \"Microsoft.IdentityModel\" provides a lot of the same things as the other \"System.IdentityModel\". </p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.identitymodel.claims.aspx\" rel=\"nofollow\">System.IdentityModel</a> </p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.aspx\" rel=\"nofollow\">Microsoft.IdentityModel</a></p>\n\n<p>Why do these 2 namespaces exist seperately, when the functionality appears to overlap?</p>\n"},{"tags":["asp.net","asp.net-mvc","data-binding","datagrid"],"answer_count":8,"favorite_count":12,"up_vote_count":17,"down_vote_count":0,"view_count":31535,"score":17,"question_id":471189,"title":"Data Grid in ASP.NET MVC","body":"<p>Is it possible to use a datagrid control in a mvc \"view\"?</p>\n\n<p>How would I bind it to a datasource?</p>\n"},{"tags":["asp.net-mvc","html5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13247896,"title":"how to get values in checkbox","body":"<p>I have 4 checkboxes. I want when I update the page the checkboxes is populating the values from database.</p>\n\n<p>My code is</p>\n\n<pre><code>        &lt;div class=\"editor-field\"&gt;\n        &lt;%: Html.CheckBox(\"Any\")%&gt; Any  \n        &lt;%: Html.CheckBox(\"Contract\")%&gt; Contract  \n        &lt;%: Html.CheckBox(\"PartTime\") %&gt;Part Time\n        &lt;%: Html.CheckBox(\"FullTime\") %&gt;Full Time\n        &lt;%: Html.CheckBox(\"WorkFromHome\") %&gt;Work From Home\n        &lt;/div&gt;\n</code></pre>\n\n<p>Help me from out this problem..</p>\n"},{"tags":["asp.net-mvc","session","authentication","asp.net-membership"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":13170618,"title":"MVC save a token in session","body":"<p>I am calling a service, and I need to pass the user's permanent security token with every request I make.  </p>\n\n<p>In order to do that, I've added this method to my base controller class:  </p>\n\n<pre><code>protected UserData getUsr()\n{\n        try\n        {\n            UserData usr = new UserData();\n            usr.SecurityToken = Session[\"secToken\"].ToString();\n\n            MembershipUser mvcUser = Membership.GetUser(HttpContext.User.Identity.Name);\n            usr.Id = (int)mvcUser.ProviderUserKey;\n\n            return usr;\n        }\n        catch (Exception ex)\n        {\n            log.Debug(\"Could not create usr object\", ex);\n            throw new Exception(\"Could not authenticate\");\n        }\n    }\n</code></pre>\n\n<p>This issue here is that sometimes the User.Identity data out-lasts the session data, causing weird bugs to happen with the user seeing they are logged in but then their requests failing.  </p>\n\n<p>Is there a better way to store this token/can I store it in such a way that it will expire whenever the User.Identity object expires? </p>\n\n<p>Also, if anyone knows of some good basic understanding examples/documentation for HttpContext and MVC authorize filters that would be great.</p>\n"},{"tags":["c#","html","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13246090,"title":"AutoCompleteFor maxlength not working","body":"<p>I am trying to set maxLength for HTML autoComplete as follows :  </p>\n\n<pre><code>&lt;%= Html.AutoCompleteFor(model =&gt; model.FirstName, controller: \"abc\", parentId: \"name\", htmlAttributes: new {@maxlength = 100, @onkeypress = \"return allowAlphaNumericAndApostrophe(event);\" })%&gt; \n</code></pre>\n\n<p>But autoComplete accepts more than 100 characters.  </p>\n"},{"tags":["jquery","asp.net-mvc","ajax","jquery-ui","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1063,"score":0,"question_id":4844824,"title":"asp.net MVC- How to get jQuery working after ajax calls","body":"<p>Ok getting my feet wet with mvc. I am trying to build a user profile type page. The page is made up of several sections, each loaded via a partial view.</p>\n\n<p>I want to be able to edit each section individually inside of an jQuery-UI modal dialog. I have this all working properly(incduding loading the Edit views via ajax into the modal and submitting the changes.)</p>\n\n<p>My problem is that after any ajax call my jQuery-UI dialogs stop working so I am unable to close or open a dialog. </p>\n\n<p>I can, of course, fix things like button clicsk with the .live method but I cant figure out the best way to get the jQuery-UI items to continue working.</p>\n\n<p>What is the best way to go about this? I guess I am confused as to what happens to previously loaded jQuery plugins after an ajax call. Should I be able to reference elements on my ajax loaded content from my main page?</p>\n\n<p><strong>EDIT:</strong>\nOk...heres some code to show whats happening....</p>\n\n<p>user click the edit button on the user info section</p>\n\n<pre><code>$('#editInfo').live(\"click\", function () {\n        dialogInit(450, 550, 'User Information');\n        $('#dialog').dialog('open')\n        $.ajax({\n            type: 'GET',\n            url: '../info/edit',\n            data: {},\n            success: function (response) {\n                $('#dialog').html(response); //loads the partial edit view into the dialog div...works fine to here.\n\n            }\n        });\n        return false;\n    });\n</code></pre>\n\n<p>After this happens I have a modal on the screen with a save button. When the save button is clicked I post my ajax form which calls this JS function on success...</p>\n\n<pre><code>function infoUpdate(response) {\n    dialogInit(450, 550, 'User Information');\n    $('#dialog').dialog('close');\n    $('#info').html(response);\n}\n</code></pre>\n\n<p>This loads the new User info partial view into the appropriate div on the main page...works fine...</p>\n\n<p>The problem here is that the dialog is not closed...so the reference to it seems to be lost even though I am reinitializing it with my dialogInit function...which looks like this...</p>\n\n<pre><code>function dialogInit(height, width, title) {\n    $('#dialog').dialog({\n        autoOpen: false,\n        modal: true,\n        draggable: false,\n        resizable: false,\n        height: height,\n        width: width,\n        title: title\n    });\n}\n</code></pre>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>The above code also causes my ajax form to be posted multiple times...an additional time every time I click the submit button...not good</p>\n"},{"tags":["asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13247714,"title":"jqGrid page return null","body":"<p>i have problem with jqGrid and dynamical data binding. \nThe problem is, that I allways get Null for parameter page. I am working with MVC3 and jqGrid 4.4.1.</p>\n\n<pre><code> var dataToSend = {\n            mrpId: selPRid,\n            mrpFilter: cookMainFilter,\n            divId: randomId,\n            chartId: chartId\n        };\n\n        $(\"#gridMeasurementsTableView\" + randomId).jqGrid({\n            url: '/DataMonitor/CreateMeasurementTableView/',\n            datatype: \"json\",\n            mtype: 'POST',\n            postData: $.toDictionary(dataToSend),\n            jsonReader : {\n                root: \"rows\",\n                page: \"page\",\n                total: \"total\",\n                records: \"records\",  \n                repeatitems: false,\n                cell: \"cell\",\n                id: \"id\" \n               },  \n            colNames: ['Date', 'Value'],\n            colModel: [\n                { name: 'Timestamp', index: 'Timestamp', width: 280, \n                    formatter: function (cellvalue, options, rowObject) {\n                            return new Date(parseInt(cellvalue.substr(6, cellvalue.length - 8), 10));\n                        }  \n                },\n                { name: 'Value', index: 'Value', width: 200, align: 'center' }  \n            ],\n            loadui: \"disable\",\n            loadtext: \"Loading\",\n            viewrecords: true,\n            height: \"100%\",\n            caption: \"Measurements2\",\n            pager: $(\"#gridpager\" + randomId),\n            rowNum: 10,\n            sortname: 'Value',\n            sortorder: \"asc\",\n            rowList: [10, 50, 100]\n        });\n</code></pre>\n\n<p>and function for getting data is define like this:</p>\n\n<pre><code> public ActionResult CreateMeasurementTableView(string sidx, string sord, int page, int rows, int mrpId, FilterMRPParameters mrpFilter, string divId, string chartId)\n</code></pre>\n\n<p>br,\nJan</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","exam","microsoft-certifications"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13246567,"title":"New MVC certification 70-486","body":"<p>i was wondering if anyone had done the exam <a href=\"http://www.microsoft.com/learning/en/us/exam.aspx?id=70-486\" rel=\"nofollow\">70-486</a> or know if there are any materials available for help with studying. It is a fairly new exam been out a month, and there seems to be few resources with regards to this exam. i.e. practice tests or specifically targeted literature. Often the community generates a reference list of articles which cover the skill requirements listed on the exam.</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13247633,"title":"how to add a string after @var in razor engine (ASP MVC)","body":"<p>i have a problem with my code in a ASP MVC app.</p>\n\n<p>I use the razor engine to write a var like:</p>\n\n<pre><code>@var\n</code></pre>\n\n<p>but now i need to add some text directly after the var:</p>\n\n<pre><code>@varMyText\n</code></pre>\n\n<p>but this is not working, only with a whitespace:</p>\n\n<pre><code>@var MyText\n</code></pre>\n\n<p>how to make this without a whitespace?</p>\n"},{"tags":["javascript","asp.net-mvc","bundle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13246327,"title":"ASP.NET ScriptBundle does not work with .min.js?","body":"<p>I can successfully include jquery library with ScriptBundle from ASP.NET MVC by using below </p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\"~/Scripts/jquery-1.7.1.js\"));\n</code></pre>\n\n<p>However, If I changed to the minimized library, I could not get it from browser</p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\"~/Scripts/jquery-1.7.1.min.js\"));\n</code></pre>\n\n<p>anything wrong with the code?</p>\n"},{"tags":["c#","asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13247551,"title":"Instantiate an object in razor view Asp.net Mvc 4","body":"<p>I have a razor view strongly bound to a viewmodel:</p>\n\n<pre><code>@model MyNamespace.MyViewModel\n</code></pre>\n\n<p>I want to make an instance of another viewmodel in the same view page and use it:</p>\n\n<pre><code>@test = new MyNamespace.AnotherViewModel();\n\n@test.SomeAction();\n</code></pre>\n\n<p>I receive compilation error:</p>\n\n<pre><code>The name 'test' does not exist in the current context\n</code></pre>\n\n<p>I am very new to asp.net mvc and was not able to make it work. Any help will be appreciated. Thanks! </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":8,"up_vote_count":17,"down_vote_count":0,"view_count":955,"score":17,"question_id":10498135,"title":"Last-Modified Header in MVC","body":"<p>I have recently come across the Last-Modified Header.  </p>\n\n<ul>\n<li>How and where can I include it in MVC? </li>\n<li>What are the advantages of including it?</li>\n</ul>\n\n<p>I want an example how last modified header can be included in an mvc project, for static pages and database queries as well?</p>\n\n<p>Is it different from outputcache, if yes how? </p>\n\n<p>Basically, I want the browser to clear the cache and display the latest data or pages automatically, without the need for the user to do a refresh or clearing the cache.</p>\n"},{"tags":["mysql","asp.net-mvc","authentication","asp.net-membership"],"answer_count":4,"favorite_count":7,"up_vote_count":9,"down_vote_count":1,"view_count":3375,"score":8,"question_id":2038993,"title":"ASP.NET Membership/Role providers for MySQL?","body":"<p>I am not at all familiar with ASP.NET membership/roles.  This is my first time using it, and my first time trying ASP.NET MVC.  When I create my first project for MVC, it gives me a lovely template to create an account.  I was excited to see that I did not have to do this manually.  However, it failed because it cannot connect to SQL Server.  I do not have SQL Server, I have MySQL.  Is there any easy way I can get this system to use MySQL instead, or will I have to create my own authentication? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","maproute"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13238474,"title":"MapRoute in mixed web forms/MVC app","body":"<p>I have an older web-form app and now I am trying to add new pages using MVC.\nIt all seems to work just fine except one thing:\nThe application's default page (<code>login.aspx</code>) is a web form.\nWhen user hit link <code>www.mysite.com</code>, instead of opening <code>www.mysite.com/login.aspx</code>, the site immediately goes to route specified in global.aspx as </p>\n\n<pre><code>routes.MapRoute(\"FrontLine\", \"{controller}/{action}/{id}\", \n            new { controller = \"FrontLine\", action = \"QuickView\", id = \"\" });\n</code></pre>\n\n<p>So, the question is how to make <code>login.aspx</code> a default page?<br>\nIs it possible to do without converting  <code>login.aspx</code> to a MVC view and adding corresponding controller?</p>\n"},{"tags":["c#","asp.net-mvc","login","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13241319,"title":"How to login using ASP.NET MVC4?","body":"<p>Here are some bits of code from my attempt. It does not work; after \"logging in\", the user isn't redirected to the home/index page, but the login page just reloads.</p>\n\n<p>Web.config:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/Login\" /&gt;\n&lt;/authentication&gt;\n\n...\n\n&lt;defaultDocument&gt;\n  &lt;files&gt;\n    &lt;add value=\"~/Account/Login\"/&gt;\n  &lt;/files&gt;\n&lt;/defaultDocument&gt;\n</code></pre>\n\n<p>Controllers/AccountController.cs:</p>\n\n<pre><code>public class AccountController : Controller\n{\n    //\n    // GET: /Account/Login\n    public ActionResult Login()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>Views/Account/Login.aspx:</p>\n\n<pre><code>&lt;asp:Login ID=\"login\" runat=\"server\" DestinationPageUrl=\"~/Views/Home/Index.aspx\"&gt;\n    ...\n&lt;/asp:Login&gt;\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","kendo-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13247577,"title":"Line break in category label of kendo-ui chart","body":"<p>I have a chart where the labels contain two parts, a name an a number.\nI want the number to appear below the name, illustrated by the <code>&lt;br/&gt;</code> tag:</p>\n\n<p><img src=\"http://i.stack.imgur.com/jA8p4.png\" alt=\"line break\"></p>\n\n<p>I load the contents of the chart, and set the label in my controller:\n<img src=\"http://i.stack.imgur.com/RrT1t.png\" alt=\"label\"></p>\n\n<p>When i try to use a template on the label, the text after the line break appears at the bottom of the chart along with the rest of the text of the chart:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ONidt.png\" alt=\"enter image description here\"></p>\n\n<p>javascript code:</p>\n\n<pre><code>$(\"#chart1\").kendoChart({\n        theme: \"BlueOpal\",\n        title: { text: \"My reported hours\" },\n        legend: { position: \"bottom\" },\n        seriesDefaults: { type: \"column\" },\n        dataSource: {\n            transport: {\n                read: {\n                    url: dataUrl,\n                    dataType: \"json\"\n                }\n            }\n        },\n        series: [{ field: \"SeriesField\" }],\n        categoryAxis: {\n            field: \"CategoryAxis\",\n            labels: {\n                rotation: 0,\n                template: \"#=value#&lt;br/&gt;newline\"\n            },\n\n        },\n        valueAxis: {\n            labels: { format: \"{0}h\" },\n            min: 0\n        },\n        tooltip: {\n            visible: true,\n            template: \"#= formatDecimal(value) #&lt;br/&gt; newline\"\n        },\n        seriesClick: onSeriesClick\n    });\n</code></pre>\n\n<p>How do i make the line break work?</p>\n"},{"tags":["c#","asp.net-mvc","extjs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13247295,"title":"Ext Form with fileuploadfield (response after submit)","body":"<p>Can`t really understand where is a mistake.. </p>\n\n<p>I have a form with fileuploadfield. Request is sended good, action on my controller gets all params, works with them, and sends response to browser. But in html page, after submiting the form, always fires FAILURE event, and never SUCCESS. </p>\n\n<p>Client Side Code</p>\n\n<pre><code>Ext.create('Ext.form.Panel', {\n        renderTo: 'Container',\n        bodyPadding: '10 10 0',\n        items: [\n        {\n            xtype: 'form',\n            width: 300,\n            border: false,\n            fileUpload: true,\n            items: [\n            {\n                xtype: 'combobox',\n                id: 'PayTypes',\n                width: 215,\n                store: PayTypesStore,\n                valueField: 'id',\n                displayField: 'Name',\n                editable: false,\n                name: 'id'\n            }\n            ,\n            {\n                xtype: 'filefield',\n                id: 'form-file',\n                name: 'file',\n                buttonText: '',\n                buttonConfig: {\n                    iconCls: 'upload-icon'\n                }\n            }\n            ],\n            buttons: [\n            {\n                text: 'Send',\n                handler: function () {\n                    var form = this.up('form').getForm();\n                    if (form.isValid()) {\n                        form.submit({\n                            url: 'UploadFile',\n                            waitMsg: 'Uploading your photo...',\n                            success: function (fp, o) {\n                                console.log(\"success\");\n                                msg('Success', 'Processed file on the server');\n                            },\n                            failure: function (form, action) {\n                                console.log(action);\n                                Ext.Msg.alert('Failed', action.result ? action.result.message : 'No response');\n                            }\n                        });\n                    }\n                }\n            }\n            ]\n        }\n        ]\n    });\n</code></pre>\n\n<p>Server Side Code:</p>\n\n<pre><code>public JsonResult UploadFile(HttpPostedFileWrapper file, int id)\n    {\n        var response = Json(new { success = true });\n        response.ContentType = \"text/html\";\n\n        return Json(response);\n    }\n</code></pre>\n\n<p>Response, recieved on the client side:</p>\n\n<pre><code>{\"ContentEncoding\":null,\"ContentType\":\"text/html\",\"Data\":\"success\":true},\"JsonRequestBehavior\":1,\"MaxJsonLength\":null,\"RecursionLimit\":null}\n</code></pre>\n\n<p>What i need to fix in my code to get SUCCESS event after sumniting form?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010","using"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13247210,"title":"Can't find the \"Using\" options in asp.net","body":"<p>This is probably a silly question, but I have looked and haven't found a straight forward answer for it. I started learning ASP.net recently, and started following a tutorial. i start by creating a project, an MVC2 web application, but when it starts, i cant find the \"using system;\" , \"using system.web;\" etc...What am i doing wrong?</p>\n\n<p>Edit: I'm using Visual Studio 2010 Ultimate</p>\n"},{"tags":[".net","asp.net-mvc","vb.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13243727,"title":"Print Text on Submit - VB.NET 2012, MVC 4, Visual Studio 2012","body":"<p><strong>The Tools Used:</strong> VB.NET 2012, MVC 4, Visual Studio 2012</p>\n\n<h2>The Controller: SubmitFormController.vb</h2>\n\n<pre><code>Namespace MvcApplication19\n    Public Class UserNamePrintOutSubmitClassController\n        Inherits System.Web.Mvc.Controller\n\n        ' This method will handle GET\n        Function Technology() As ActionResult\n            Return View(\"Technology\")\n        End Function\n\n        ' This method will handle POST\n        &lt;HttpPost&gt;\n        Function UserNamePrintOut() As ActionResult\n            ' Do something\n            Response.Write(\"Hello \" &amp; Request.QueryString(\"UserName\") &amp; \"&lt;br /&gt;\")\n            Return View()\n        End Function\n    End Class\nEnd Namespace\n</code></pre>\n\n<h2>The View: Technology.vbhtml</h2>\n\n<p><strong>The URL:</strong> <code>http://localhost/Home/Technology/</code></p>\n\n<pre><code>&lt;form action=\"\" method=\"post\"&gt;\n    &lt;input type=\"text\" name=\"UserName\" /&gt;\n    &lt;input type=\"submit\" name=\"UserName_submit\" value=\"Print It Out!\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<h2>The Question</h2>\n\n<p>I do not have a model in this example. The intention is to have the <code>UserName</code> submitted with the submit button and have it printed on the screen, <code>on page load</code>. Which means, the <code>UserName</code> should get passed to the <code>action method</code> and get printed on the screen.</p>\n\n<p>I am having no error messages, nevertheless, the <code>UserName</code> does not get printed on the screen, perhaps, somebody, can have look at the code above.</p>\n\n<p>I have been trying this with tutorials, which are often in C#. My background has been PHP, and I still tend to think in terms of \"echo\" - yet, I am getting used to MVC 4.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13236587,"title":"persisting data in mvc","body":"<p>I am beginning to use ASP.NET MVC and i have a navigation which is build with javascript and css. The Navigation is collapsable, so that the menu only takes like 1cm when its collapsed.\nMy problem is that i need to change the state (collapsed/expanded) by clicking on a button and setting a css class on the menu.\nBut when i click on a menu-entry the page gets reloaded  and so the css-class gets lost too.</p>\n\n<p>How can i persist such data correctly? In normal views i could pass it to my viewmodel, but how can i do this in my _layout.cshtml? (i cant set a model there, right?)</p>\n\n<p>What i tried was using the jquery plugin \"cookies\" but it only works sometimes (i think the problem is somewhere within the options of the plugin - maybe i have to set a domain or something...). Furthermore it would be nice if the solution wouldnt require the user to allow cookies.</p>\n\n<p>Im glad for any help!</p>\n\n<p>edit:\nok, what i tried now is:</p>\n\n<p>//the view</p>\n\n<pre><code>@model NHibernateSimpleDemoMVC.Models.MenuModel\n....\n&lt;a id=\"togglemenu\" /&gt;\n\n@Html.HiddenFor(x =&gt; x.IsCollapsed, new { @id = \"collapsedHdn\" })\n\n...\n\n&lt;script&gt;\njQuery('#togglemenu').click(\n    function () {\n        if (jQuery(\"#collapsedHdn\").val() == \"true\") {\n            jQuery(\"#collapsedHdn\").val(\"false\")\n        } else {\n            jQuery(\"#collapsedHdn\").val(\"true\")\n        }\n    });\n\njQuery('#nav &gt; li').click(\n    function () {\n        var name = jQuery(this).attr(\"id\");\n        jQuery(\"#selectedHdn\").val(name);\n    }\n    );\n\n\njQuery(document).ready(function () {\n    //set selected node\n    if (jQuery(\"#collapsedHdn\").val() == \"true\") {\n       ... collapse ...\n    }\n     if (jQuery(\"#selectedHdn\").val() != \"\") { //this is always empty (\"\")\n        var name = \"#\" + jQuery(\"#selectedHdn\").val();\n        jQuery(name).addClass(\"current\");\n    }\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p>//the model</p>\n\n<pre><code>public class MenuModel\n{\n    public bool IsCollapsed { get; set; }\n    public string SelectedEntry { get; set; }\n\n    public MenuModel(){\n        IsCollapsed = false;\n        SelectedEntry = \"\";\n    }\n}\n</code></pre>\n\n<p>... my hidden fields seem to not keep their value after the postback...</p>\n"},{"tags":["c#","asp.net-mvc","validation","session","hyperlink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13245869,"title":"Submit Page to Privious Page visited","body":"<p>I have Contact Us link on footer of my MVC Application.</p>\n\n<p>On calling page contains form to submit feedback..</p>\n\n<p>when valid form will submit the i want to redirect to the page from which that Contact Us link is called.</p>\n\n<p>How will maintain that privious link. I can not make use of history becuase it contains the validations if the form fails it show error and after submiting valid form then privious history is same i.e contact us form.</p>\n\n<p>Should I use session to store the privious form url or Is there any another way to do this?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13022221,"title":"Force case-sensitive routing in ASP.NET MVC","body":"<p>This question has been asked in a similar but not identical fashion (and not resolved to my satisfaction) <a href=\"http://stackoverflow.com/questions/878578/how-can-i-have-lowercase-routes-in-asp-net-mvc\">previously</a> on <a href=\"http://stackoverflow.com/questions/170900/how-can-i-avoid-duplicate-content-in-asp-net-mvc-due-to-case-insensitive-urls-an\">Stack Overflow</a> and <a href=\"http://blog.kurtschindler.net/post/lowercase-urls-with-aspnet-mvc\" rel=\"nofollow\">elsewhere</a>.</p>\n\n<p>Coming from a linux-world, I want to use ASP.NET MVC but avoid identical but differently-cased routes from resolving to the same page. I do <em>not</em> want to force all routes to be 100% lowercase.</p>\n\n<p>e.g. I want <code>/Home/Something</code> to be a valid route and <code>/Home/somethingElse</code> to also be a valid route, but not <code>/Home/something</code> or <code>/home/somethingelse</code>, given two functions called <code>Something</code> and <code>somethingElse</code> in the <code>HomeController</code>.</p>\n\n<p>I can't find any way of doing this from within the <code>RegisterRoutes</code> function, but maybe I'm missing something obvious? I can answer this easily enough by adding code to each Controller function, but I'm obviously trying to avoid doing that.</p>\n\n<p>Optimally, the solution would involve catching <em>all</em> permutations of a particular route, then 301 redirecting any that do not exactly match the case of the controller's function.</p>\n"},{"tags":["asp.net-mvc","rtf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3,"score":0,"question_id":13245765,"title":"open source controls to convert rich text formatted code to html markup","body":"<p>I am working on asp.net mvc. I am trying to display the rich text formatted content like,</p>\n\n<pre><code>    {\\rtf1\\ansi\\ansicpg1252\\uc1\\htmautsp\\deff2{\\fonttbl{\\f0\\\nfcharset0 Times New Roman;}{\\f2\\fcharset0 Tahoma;}}{\\colortbl\\red0\\green0\\blue0;\\red255\\green255\\blue255;}\\loch\\hi\nch\\dbch\\pard\\plain\\ltrpar\\itap0{\\lang1033\\fs24\\f2\\cf0 \\cf\n0\\ql{\\f2 {\\ltrch AMANDA WITH RC CALLED AND WANTED TO \nVERIFY THAT WE WERE AFFILIATED WITH SHAUN @ JAGGYS. LET HER KNOW WE \nWERE, SHAUN CALLED RC AS WELL TO VERIFY STATUS OF BD}\\li0\\ri0\\sa0\\sb0\\fi0\\ql\\par}\n    }\n    }\n</code></pre>\n\n<p>in the view. Actually this data could come from database table and i need to display it in the editor type control. so is there any open source controls that are able to display rich text format.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13245712,"title":"How to lock/unlock a user in MVC SimpleMembership","body":"<p>In SimpleMembership there isn't any column in the database for a user to be locked/unlocked.\nI basically need my administrator to enable or disable any user in my application.\nIs there any alternatives to that?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1637,"score":4,"question_id":4503365,"title":"ASP.NET MVC 3 - Add/Remove from Collection Before Posting","body":"<p>I have a model that contains a collection, such as this:</p>\n\n<pre>class MyModel\n{\n    public List&lt;MySubModel&gt; SubModels { get; set; }\n}</pre>\n\n<p>In the view, I want to dynamically add/remove from this list using Javascript before submitting. Right now I have this:</p>\n\n<pre>\n$(\"#new-submodel\").click(function () {\n    var i = $(\"#submodels\").children().size();\n    var html = '&lt;div&gt;\\\n                    &lt;label for=\"SubModels[' + i + '].SomeProperty\"&gt;SomeProperty&lt;/label&gt;\\\n                    &lt;input name=\"SubModels[' + i + '].SomeProperty\" type=\"textbox\" /&gt;\\\n                &lt;/div&gt;'\n    $(\"#submodels\").append(html);\n});\n</pre>\n\n<p>This works, but it's ugly. And, if I want to show those labels/textboxes for the existing items, there's no clean way to do that either (without duplicating).</p>\n\n<p>I feel like I should be able to use Razor helpers or something to do this. Any ideas? Help me stay DRY.</p>\n"},{"tags":["asp.net-mvc","n2","n2cms"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":828,"score":1,"question_id":4556390,"title":"N2Cms How to start","body":"<p>I have a static website and I want to use the N2 Cms + Asp.Net Mvc,\nI don't know how to start sorting thins up, when should I create a page, and when should I use a part, and what controllers should I make ?</p>\n\n<p>does any one have a blog or a tutorial?\nI saw their N2.Template project but it is too complicated,\nand lacks the documentation ?</p>\n"},{"tags":["asp.net-mvc","user-accounts"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":48,"score":0,"question_id":13204597,"title":"MVC 4 Edit User Profile","body":"<p>thanks for the support. I have read quite some time to find my answer but finally I decided to ask the question.</p>\n\n<p>I am using MVC4 and I have managed to create custome data fields for my user. I am very new to ASP, so i find it very difficult to code.</p>\n\n<p>I would like to make when I click the username on the default page instead of editing only the password, I would like to edit the inputted information by the user.</p>\n\n<p>This is not an admin but the user himself being able to edit.</p>\n\n<p>So my question is where should i edit this somwhere in the AccountController.cs I should extract the data and put it in a view and then how can i tell the view that the data can be edited and saved.</p>\n\n<p>I am confused with the model view controller although i have spent some time reading about it.</p>\n\n<p>Please help if you can. Regards</p>\n"},{"tags":["asp.net-mvc","vb.net"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13233018,"title":"IsNullOrEmpty Not Working","body":"<p>I have a null value in my database which gives me an error if I try perform any mathematical operations on it.  I tried putting this in my controller action:</p>\n\n<pre><code>If String.IsNullOrEmpty(item.Tbl_Food.Fiber_TD_g) Then\n            item.Tbl_Food.Fiber_TD_g = 0\nEnd If\n</code></pre>\n\n<p>This my model for the field:</p>\n\n<pre><code>Public Property Fiber_TD_g() As Nullable(Of Double)\n</code></pre>\n\n<p>However, it says \"Nullable object must have a value.\" on the <code>If String.IsNullOrEmpty(item.Tbl_Food.Fiber_TD_g) Then</code> line.  How can I check if the \"string\" (it's a double, not a string) is empty and default it to zero, properly?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tried a suggestion below, and I no longer get an error in my controller, but instead in my View.  It says, \"Nullable object must have a value.\" on the line <code>FiberTotal += item.Tbl_Food.Fiber_TD_g</code> in my view.</p>\n\n<pre><code>Dim food = db.Tbl_Food_Logs.Where(Function(x) x.FLog_Employee_ID = empId And x.FLog_Created_Date &gt;= date2 And x.FLog_Created_Date &lt; tomorrow)\n\nFor Each item In food\n\n    If IsDBNull(item.Tbl_Food.Fiber_TD_g) Then\n        item.Tbl_Food.Fiber_TD_g = 0\n    End If\n\nNext\nReturn View(food)\n</code></pre>\n"},{"tags":["sql","asp.net-mvc","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13243673,"title":"How to you implement the Like operator in ASP.NET MVC?","body":"<p>I'm still working on my autocomplete textbox using data from the databse (SQL) and I think I'm not getting any result for the textbox because there's something wrong or missing on my select statement here's how my current code looks like. This is my json code for the view:</p>\n\n<pre><code>       $(function () {\n        $(\"#autoCompleteText\").autocomplete({\n            source: function (request, response) {\n                var autoSearch = { searchText: $(\"#autoCompleteText\").val() };\n                $.ajax({\n                    type: \"POST\",\n                    traditional: true,\n                    url: \"/Products/jsonAutoComplete\",\n                    data: autoSearch,\n                    dataType: \"json\",\n                    success: function (data) {\n                        response(data.d);\n                    },\n                    error: function (result) {\n                        alert(\"Error\");\n                    }\n                });\n            },\n            delay: 0,\n            minLength: 2\n        });\n    });\n</code></pre>\n\n<p>I'm very sure that it works because whenever I run a breakpoint on my controller, the method jsonAutoComplete runs but the productName which is what I want to appear on the autcomplete, is always null. Here's my code with the select statement:</p>\n\n<pre><code>    public JsonResult jsonAutoComplete(string searchText)\n    {\n        JsonResult data= new JsonResult();\n        IList&lt;Products&gt; products = null; products = (from c in db.Products where c.CompanyId.Equals(companyId) &amp;&amp; (c.ProductName.Contains(\"'%\" + searchText + \"%'\")) select c).ToList();\nProducts prod = new Products();\n        int productId = prod.Id;\n        string productName = prod.ProductName;\n        data.Data = new { productId = productId, productName = productName };\n        return data;\n    }`\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12355527,"title":"view to controller method","body":"<p>view to controller method</p>\n\n<pre><code>        .ClientEvents(events =&gt;\n        {\n            events.OnDataBinding(\"onDB\");\n        })\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2","validation"],"answer_count":5,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":818,"score":9,"question_id":6395694,"title":".NET 4 MVC 2 Validation with annotations warning instead of error","body":"<p>I am using .NET 4 with MVC 2 for validating with Annotations. Is there a (simple) solution for giving back a <strong>warning</strong> instead of the <strong>error</strong>? So that I am able to get a green or yellow box with a message like \"you should not use this content, but you may\".</p>\n\n<p>Big thanks in advance! :)</p>\n\n<p><b>EDIT:</b><br>\nPlease observe that I am already able to throw out errors via <code>ErrorMessage</code> but I <i>additionally</i> want something like <code>WarningMessage</code> or <code>InfoMessage</code> so that the user only gets a warning but might proceed. Is there a solution for this?</p>\n\n<p>The Pseudocode would be:\n<i>(Please note the \"pseudo\", because <code>WarningMessage</code> is (unfortunately) not a valid class)</i></p>\n\n<pre><code>public class Person\n{\n  [StringLength(50)]\n  [Required(ErrorMessage = \"You MUST enter a name!\")]\n  public string Name { get; set; }\n\n  [Required(WarningMessage = \"It is recommended to fill out the age but you may leave it out)]\n  public int Age { get; set; }\n}\n</code></pre>\n\n<p>And <b>yes</b> I want to have this centrallized in my validation class - not somewhere in a .js-file.</p>\n"},{"tags":["jquery","asp.net-mvc","shopping-cart","sample"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1077,"score":3,"question_id":3200643,"title":"Good/Simple shopping cart example using asp.net mvc and jquery","body":"<p>Is there a Good/Simple shopping cart example using asp.net mvc and jquery? Any suggestion...</p>\n"},{"tags":["php","asp.net-mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":181,"score":1,"question_id":10263341,"title":"Link to a Controller function with parameter from a View (CodeIgniter)","body":"<p>Using CodeIgniter I am trying to create a link that the user can click within a view to show them the details of a record in my database.</p>\n\n<p>In ASP.NET MVC3 with C# I would do it with <code>@Html.ActionLink(\"Controller\", \"Action\", new { id = item.Id})</code></p>\n\n<p>This is my session controllers index() function</p>\n\n<pre><code>public function index()\n{\n        $data['sessions'] = $this-&gt;session_model-&gt;get_sessions();\n\n        $this-&gt;load-&gt;view('_header');\n        $this-&gt;load-&gt;view('session/index', $data);\n        $this-&gt;load-&gt;view('_footer');\n}\n</code></pre>\n\n<p>This is the index view it loads where I want to be able to click the link to go to enter() function</p>\n\n<pre><code>&lt;table&gt;\n\n&lt;th&gt;Session Name&lt;/th&gt;\n&lt;th&gt;Description&lt;/th&gt;\n&lt;th&gt;Host&lt;/th&gt;\n&lt;th&gt;&lt;/th&gt;\n\n&lt;?php foreach ($sessions as $session_item): ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt; &lt;?php echo $session_item['sessionName'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;?php echo $session_item['sessionDesc'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;?php echo $session_item['adminName'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;a id=\"enterSession\" href=&lt;?php echo site_url(\"session/enter\" + $session_item['id']) ?&gt; &gt;Enter&lt;/a&gt;&lt;/td&gt;\n\n    &lt;/tr&gt;\n&lt;?php endforeach ?&gt;\n</code></pre>\n\n<p></p>\n\n<p>The enter session points me to the url \"http://192.168.1.36/index.php/1\" (if the id of my item is 1) whereas I expect \"http://192.168.1.36/index.php/session/enter/1\"</p>\n\n<p>Any ideas on how I can make it call the enter() function also in the session controller (shown below)</p>\n\n<pre><code> public function enter($id) {\n\n        $this-&gt;load-&gt;view('_header');\n        $this-&gt;load-&gt;view('session/enter');\n        $this-&gt;load-&gt;view('_footer');\n    }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","partial-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13243582,"title":"asp.net-mvc jquery adding multiple number of partial views","body":"<p>My problem seems very common tio me, and I thought I can find my answer online, but I couldn't.\nI have a drop down list, and based on the selected value, I need to have multiple partial Views. (one selection can have none, the other one have 3, etc.)</p>\n\n<p>I have a partial View that gets a \"DriveDetail\" object.</p>\n\n<p>I need to load multiple number of these partial Views Dynamically using JQuery.</p>\n\n<p>So far I have</p>\n\n<pre><code>$.ajax({\n            url: \"TestInput/getTestStationInformation2/\" + testStation,\n            dataType: \"json\",\n            type: 'post',\n            success: function(data) {\n\n                for (var i = 0; i &lt; data.length; i++) {\n                    $('#driveDetailDiv').append(data[i]);\n                }\n\n            }\n        });\n</code></pre>\n\n<p>I can either return an IEnumerable or List of those Drives. </p>\n\n<pre><code>public JsonResult getTestStationInformation(long id)\n    {\n        IEnumerable&lt;DriveDetails&gt; aa = repository.listDriveInfo(id);\n        return Json(aa);\n    }\n\n    public JsonResult getTestStationInformation2(long id)\n    {\n        List&lt;PartialViewResult&gt; res = new List&lt;PartialViewResult&gt;();\n        List&lt;DriveDetails&gt; aa = repository.listDriveInfo(id).ToList();\n        for (int i = 0; i &lt; aa.Count(); i++)\n        {\n            res.Add(PartialView(\"DriveDetailsPartial\", aa[i]));\n        }\n\n        return Json( res);\n    }\n</code></pre>\n\n<p>but none of these work.</p>\n\n<p>I have </p>\n\n<pre><code> $.get('&lt;%= Url.Action(\"Details\",\"TestInput\", null) %&gt;', function(tmp) {\n                    $('#driveDetailDiv').append(tmp);\n                });\n</code></pre>\n\n<p>in my code, but instead of null, I need to send data[0], and get the partialView of data[0]. but I don't know how to send data[0]. When I try </p>\n\n<pre><code> new {id = data[0])\n</code></pre>\n\n<p>I get an error.</p>\n\n<p>and When I try to use the second Action which returns a list of partialViews, it doesn't show up when I try to append them.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13243739,"title":"ASP.Net MVC 4 not accepting hyphen in form input","body":"<p>I have a form with a text input defined as follows</p>\n\n<pre><code>    @using (Html.BeginForm()) {\n                    &lt;td align=\"left\" style=\"font-size:Medium;width:400px;\"&gt;@Html.TextBox(\"sn\", \"\", new { @style = \"font-size:Medium;width:400px;\", @class = \"fnTxtBox\"  })\n&lt;/td&gt;\n    }\n</code></pre>\n\n<p>The user needs to be able to include a hyphen ('-') in the text box, e.g. ##-######, but ASP.Net MVC doesn't just marks the textbox red if I try to include it, if I remove the hyphen the form get posted as normal.  Including hyphens as input is an absolute requirement by my client, is there an option to enable this? Why is the hyphen getting rejected??  Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13243264,"title":"How to set text box read only if it has value?","body":"<p>I want to  to set text box  read only if it has value in view in MVC.</p>\n\n<p>So I write </p>\n\n<pre><code> &lt;tr&gt;\n @if (model.first_name != \"\" ) { \n   &lt;td &gt;\n                @Html.LabelFor(model =&gt; model.first_name):\n            &lt;/td&gt;\n            &lt;td &gt;\n                @Html.TextBoxFor(model =&gt; model.first_name)\n                &lt;span class=\"required\"&gt;*&lt;/span&gt;\n                @Html.ValidationMessageFor(model =&gt; model.first_name)\n            &lt;/td&gt;\n@ else  \n  &lt;td &gt;\n  @Html.LabelFor(model =&gt; model.first_name):\n            &lt;/td&gt;\n            &lt;td &gt;\n                @Html.EditorFor(model =&gt; model.first_name)\n                &lt;span class=\"required\"&gt;*&lt;/span&gt;\n                @Html.ValidationMessageFor(model =&gt; model.first_name)\n            &lt;/td&gt;\n@}\n\n            &lt;td &gt;\n                @Html.LabelFor(model =&gt; model.first_name):\n            &lt;/td&gt;\n            &lt;td &gt;\n                @Html.EditorFor(model =&gt; model.first_name)\n                &lt;span class=\"required\"&gt;*&lt;/span&gt;\n                @Html.ValidationMessageFor(model =&gt; model.first_name)\n            &lt;/td&gt;\n        &lt;/tr&gt;\n</code></pre>\n\n<p>But is is not working..\nHow to slove it??\nHow can I do it??</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","reporting-services","reportingservices-2005"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":374,"score":0,"question_id":8059687,"title":"Using SSRS Report in MVC razor","body":"<p>Can any one tell whether MVC razor supports report viewer for rendering reports from ssrs.If yes then how any code snippet would help.\nI have seen on internet that there is workaround to include aspx view engine for rendering report ,but we don't want to use aspx view engine.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13243144,"title":"Uploading and storing videos for mvc website","body":"<p>I'm trying to come up with a way to allow a user to upload a video he or she has made to an application I'm working on. My question is how or what is the best way to do this. I've heard of people converting the video to binary then saving to db but I also heard it's not recommended to do this. How can I save these videos that are being uploaded. How does for example YouTube handle their videos? Any tips are appreciated thanks.</p>\n\n<p>Maybe this? </p>\n\n<pre><code>  System.Web.UI.WebControls.FileUpload\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","foreach"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13243016,"title":"Increase div id by 1 using jQuery","body":"<p>I would appreciate any and all help you can provide. I have searched high and low and have not been able to find a solution to what I think is probably a common issue. I am very new to ASP.NET MVC and jQuery so I may need a little extra hand holding. Here it goes...</p>\n\n<p>I have a table with many rows that is created by a foreach (ASP MVC 4). Each row has additional information that I would like to show / hide on click (contained in a ). </p>\n\n<p>For example:</p>\n\n<pre><code>====================================================================\n   | Ticket Number | Date Created | Description\n\n-    123456          11/02/2012     How do I...?\n      --- Additional Information ---\n      Assigned To: Joe\n      Notes: Blah, blah\n      --- End Additional Information ---\n+     123457          11/01/2012     When I click this I get....\n=====================================================================\n</code></pre>\n\n<p>When the user clicks the plus sign (I'm using an image), I want the Additional Information to expand and I want the plus image to change to a minus image.</p>\n\n<p>I have figured out how to change the image using an IF statement in jQuery. However, I can't quite figure out how to toggle the div properly. I have tried doing this using the following:</p>\n\n<pre><code>   $(\"button\").click(function () {\n       $(this).next(\"div.toggleMe\").toggle(1000);\n   });\n</code></pre>\n\n<p>As you can see, the jQuery expands the next div that it finds. The problem with this is that I can't put it in the same row as the table data. It just doesn't see the next div for some reason.</p>\n\n<p>What I am looking for is a way to increase the id, or class of the div by one so that I can use something like the following jQuery function:</p>\n\n<pre><code>    function slideonlyone(thechosenone) {\n         $('.newboxes2').each(function(index) {\n              if ($(this).attr(\"id\") == thechosenone) {\n               $(this).slideDown(200);\n              }\n              else {\n                   $(this).slideUp(600);\n              }\n         });\n    }\n\n&lt;table&gt;\n   &lt;tr&gt;\n      &lt;td&gt;\n         &lt;div style=\"border: 1px solid blue; background-color: #99CCFF; padding: 5px;\"&gt;\n            &lt;a id=\"myHeader1\" href=\"javascript:slideonlyone('newboxes1');\" &gt;slide this one only&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"newboxes2\" id=\"newboxes1\" style=\"border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px;\"&gt;Div #1&lt;/div&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n         &lt;div style=\"border: 1px solid blue; background-color: #99CCFF; padding: 5px;\"&gt;\n            &lt;a id=\"myHeader2\" href=\"javascript:slideonlyone('newboxes2');\" &gt;slide this one only&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"newboxes2\" id=\"newboxes2\" style=\"border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px;\"&gt;Div #2&lt;/div&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n         &lt;div style=\"border: 1px solid blue; background-color: #99CCFF; padding: 5px;\"&gt;\n            &lt;a id=\"myHeader3\" href=\"javascript:slideonlyone('newboxes3');\" &gt;slide this one only&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"newboxes2\" id=\"newboxes3\" style=\"border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px;\"&gt;Div #3&lt;/div&gt;\n      &lt;/td&gt;\n   &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>As you can see in the HTML, each div has a unique id. How do I create a unique id in a foreach loop? And, how do I get jQuery to see that unique id so that I can toggle the div?</p>\n\n<p>Thank you so much for any info you can provide!</p>\n"},{"tags":["asp.net-mvc","jquery-ui"],"answer_count":2,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":1352,"score":4,"question_id":4270666,"title":"How to call a JQuery UI Modal with MVC (CRUD)","body":"<p>I have a Car View (List.cshtml) that shows my Car´s list... I´d like to add a button/link:\n <strong>\"Add car...\"</strong></p>\n\n<p>That button must open my View (Create.cshtml) in a JQuery Modal UI...  </p>\n\n<p>How can I do that?</p>\n\n<p>Thanks</p>\n\n<p>Paul</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13235827,"title":"How to sort all dropdownLists by name in ASP.net MVC","body":"<p>Is it possible to automatically sort all dropdownLists in ASP.net MVC project?</p>\n\n<p>I don't want to go one by one and sort them explicitly. Is there a way to do this automatically on all dropdownLists in the project?</p>\n"},{"tags":["jquery","asp.net-mvc","google-ajax-api"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":6121,"score":4,"question_id":1380043,"title":"Is it ok to use google.setOnLoadCallback multiple times?","body":"<p>I'm building a site using ASP.NET MVC, and I have partial views that use jquery to do various things.  I was thinking of switching to google's ajax api and using their loader to load jquery.  However, I noticed that I would no longer be able to use $(document).ready() anymore because google's loader specifies a callback google.setOnLoadCallback().  </p>\n\n<p>This is a little bit of a problem for me because I have $(document).ready() in various partial views because they do different things specific to themselves that I don't want the parent view to be aware of.</p>\n\n<p>What I'm wondering is, can I specify multiple callbacks and just swap out the $(document).ready()'s with google.setOnLoadCallback(someUniqueCallbackFunction)?</p>\n\n<p>Would that be the ideal way to handle this situation or is there something else that is preferred?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13242224,"title":"Getting value from DropDownList in MVC3.. better way than binding the ID to another field?","body":"<p>I am wondering if there is another way to express the following bit of code. The code works as expected, but I have an issue with how it defines my naming conventions.</p>\n\n<pre><code>//Model.cs:\n[DisplayName(\"Device Manufacturer\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; DeviceManufacturer { get; set; }\npublic int SelectedManufacturerID { get; set; }\n\n//Model.ascx:\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedManufacturerID, new SelectList(Model.DeviceManufacturer, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>Now, whenever the selected list item is changed -- the new value is stored in SelectedManufacturerID. I am able to receive the value in my controller like so:</p>\n\n<pre><code>int selectedID = model.SelectedDataCenterID;\n</code></pre>\n\n<p><strong>However,</strong> I am unhappy with the fact that MVC gives my select list the ID 'SelectedManufacturerID' when it is not an ID field -- it is a select list. Clearly this is occurring to support the binding to the SelectedManufacturerID field.</p>\n\n<p>If I wish to work with my select list client-side, I now have code such as:</p>\n\n<pre><code>$('#SelectedManufacturerID').change(function(){\n    console.log(\"OnSelectedIndexChanged!\");\n});\n</code></pre>\n\n<p>This jQuery is very unclear. There is no indication that SelectedManufacturerID is a select DOM element. It seems impossible to have proper naming conventions using the MVC conventions at the top of this post. Does anyone else feel this way? Do I have other options?</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13242114,"title":"Cannot access to User.Identity under OnActionExecuting(ActionExecutingContext filterContext)","body":"<p>I am not sure what do I am missing but I really cannot refer to \n <code>User.Identity</code> under <code>OnActionExecuting(ActionExecutingContext filterContext)</code></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing System.Web.Security;\nusing System.Web.Routing;\n\n.....\n\n    public class RealUserAttribute : ActionFilterAttribute\n    {\n            public override void OnActionExecuting(ActionExecutingContext filterContext)\n            {\n                 /// if (User.Identity.IsAuthenticated)\n</code></pre>\n\n<p>Any clue how to fix it?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc","forms","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13239189,"title":"Pass multiple html parameter with BeginForm","body":"<p>I need to send parameters with values ​​in a BeginForm html.</p>\n\n<p>Example:</p>\n\n<pre><code>@ using (Html.BeginForm (\"Create\", \"IncomeDeclaration\", new {declarationAmount = document.getElementById (\"element\"). value}))\n</code></pre>\n\n<p>This value I can not get from the Model, as it is not found in the model.\nI've tried several ways and nothing worked. If you could change the content of a ViewBag that'd be great.</p>\n\n<p>I appreciate your support.</p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","crystal-reports"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13236377,"title":"Dynamically set Crystal Report still asks for db login","body":"<p>I am trying to deploy <code>Crystal Reports</code> in my <code>MVC</code> application.  To get full use of the Crystal Report Viewer, I have to use a <code>webform</code>, which is working fairly well in my dev environment.</p>\n\n<p>The application will be deployed on the user's servers and connect to their personal dbs.  This means I do not have the final connection information when designing the report or the application.</p>\n\n<p>I am able to successfully connect using their entries in the web.config file, load a <code>DataTable</code> with the report information, and pass it to the report.  However, the report is still asking for the db credentials.  The report is set to connect to my db, so it asks for my credentials and will not proceed without them.  However, the final report shows the correct info from their db.</p>\n\n<p>I am not sure if I need to change something in the report, or in the code behind.  This is how I am setting the report <code>ReportSource</code> now:</p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n    string strReportName = System.Web.HttpContext.Current.Session[\"ReportName\"].ToString();\n    try\n    {\n        ReportDocument rd = new ReportDocument();\n        string strRptPath = Server.MapPath(\"~/\") + \"Rpts//\" + strReportName;\n        rd.Load(strRptPath);\n\n        SqlParameter[] sqlParams = {};\n        DataTable testDt = DBHelper.GetTable(\"rptInvtDuplDesc\", sqlParams);\n        rd.DataSourceConnections.Clear();\n        rd.SetDataSource(testDt);\n        CrystalReportViewer1.ReportSource = rd;\n    }\n    else\n    {\n        Response.Write(\"&lt;H2&gt;Nothing Found; No Report name found&lt;/H2&gt;\");\n    }\n}\n</code></pre>\n\n<p>How do I prevent the report from asking for the original credentials?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If I pass the login to my db like this:</p>\n\n<pre><code>rd.SetDatabaseLogon(\"username\", \"password\");\n</code></pre>\n\n<p>I do not get the db login again.  The credentials have to be for the db used to create the report, but the displayed results are from the <code>DataTable</code> populated in the method above.  If it has the data it needs from the current db, why does it need to connect to the original db?</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>I have 2 data sources for this report.  One is a table from the db and the other is the result from a stored procedure.  I have now learned that is the cause of the extra login.</p>\n"},{"tags":["sql","asp.net-mvc","sql-server-2008","asp.net-mvc-4","getdate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13239675,"title":"Executing table-less SQL in MVC4","body":"<p>What is the best practice for executing a generic, table-less SQL query within an MVC architecture?</p>\n\n<p>I'm trying to use commands such as these:</p>\n\n<pre><code>SELECT getdate();\nSELECT user;\n</code></pre>\n\n<p><strong>Update:</strong>\nThis is actually for part of another project that co-exists alongside the MVC project. All of my tables so far are mapped using edmx from an existing database.</p>\n\n<p>I'd like to use the date from the database in some internal calculations, rather than using the date from the server where the application/site are installed. My formulas go down to the milliseconds, and the time difference between the two servers involved throws off the math.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13239792,"title":"HTML.ActinLink to pass object has Parameter","body":"<p>I need small help on to pass object type has a  parameter to controller. I tried passing directly the object , \nHere is the exception </p>\n\n<p><code>System.Web.Mvc.HtmlHelper&lt;dynamic&gt;</code> has no applicable method \nnamed <code>ActionLink</code> but appears to have an extension method by that name.<br>\nExtension methods cannot be dynamically dispatched. Consider casting<br>\nthe dynamic arguments or calling the extension method without the<br>\nextension method syntax.</p>\n\n<p>Even though I added code for type casting, but still it throw compile error as above</p>\n\n<pre><code>InProgressGrid.Column(header: \"File Name\", columnName: \"FileName\",format:(item) =&gt; Html.ActionLink(((string)item.FileName), \"DownloadReport\", (Domain.UserObject)item ,null))\n</code></pre>\n\n<p>Is there any way I can pass more than one parameter to controller action method </p>\n\n<pre><code>InProgressGrid.Column(header: \"File Name\", columnName: \"FileName\",format:(item) =&gt; Html.ActionLink(((string)item.FileName), \"DownloadReport\", new {FileName = item.FileName,PK= item.PartitionKey },null)),\n</code></pre>\n\n<p>Now when I run application I see only one Attribute ie. FileName is passed but no PartitionKey is passed to Controller 's action Parameter.. </p>\n\n<p>Is there any change in Global Routing for above condition to work </p>\n\n<p>Pleas help me , it is very urgent</p>\n"},{"tags":["c#","javascript","jquery","asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":243,"score":0,"question_id":10047975,"title":"File upload - returns null","body":"<p>I am uploading a file in my ASP.NET MVC application. In the .ascx file, I have the following:</p>\n\n<pre><code>&lt;form action=\"/Admin/Mail/ABC\" enctype=\"multipart/form-data\"  method=\"post\"&gt;\n&lt;div&gt;               \n    &lt;input type=\"file\" name=\"file\" id=\"file\" /&gt;\n    &lt;input type=\"submit\" value=\"Upload\" id=\"UploadList\" onclick=\"Origin.UploadOptOutList();\"/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>in the .js file:</p>\n\n<pre><code>Origin.UploadList = function () {\n    Origin.ajax({\n        url: '/Admin/Mail/Upload',\n        type: 'POST',\n        dataType: 'json',\n        success: function (data) {\n            alert('success!');\n        }\n    });               \n}\n</code></pre>\n\n<p>and the controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Upload(HttpPostedFileBase file)\n{\n    List&lt;string&gt; validIDs, invalidIDs;\n    if (file.ContentLength &gt; 0)\n    {\n        // do something\n    }\n}\n</code></pre>\n\n<p>When invoking the Action from .js, the 'file' is always NULL. Any idea what I am missing?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","bundling-and-minification"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13240169,"title":"MVC4 Bundling (Based on Device Type)","body":"<p>So looking at the bundleconfig.cs it should permit to bundle based on device type. Only prob is since it is in App_Start it doesn't allow me to access the Request object. Any ideas how to make device based bundling possible?</p>\n"},{"tags":["c#","asp.net-mvc","postback"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13240219,"title":"saving changes made to an edit page","body":"<p>I am having trouble trying to pin point how to resolve this issue. On my create page i have checkboxes and when i check a box and save it - then i go back to the same page i just saved and open it in an edit view i uncheck the box i checked on the create page and select another box to check and save. But when i go back to that same item on the edit page - it didn't save the changes i made on the edit page and only shows the first box i checked when i first created the page. I am confused on which place exactly is causing or would resolve this issue. It is saving extra boxes i add but doesn't save the boxes i uncheck.</p>\n\n<p>I have a Get Create , Post Create, Get Edit, Post Edit methods in my controller. In my service file i have Create and Update methods. I am not sure if pasting the code of all these methods would help but here it is: </p>\n\n<pre><code>[HttpGet]\n    public ActionResult Create(Guid caseId)\n    {\n        var viewModel = new VisitViewModel\n                            {\n                                CaseId = caseId,\n                                CaseNumber = _caseCompositeService.GetCaseNumber(caseId),\n                                Name = _caseCompositeService.GetCaseName(caseId, _currentUser.OfficeId)\n                            };\n        viewModel.CaseId = caseId;\n        viewModel.VisitDate = DateTime.Today;\n        viewModel.Time = _defaultVisitTime;\n        AddLookupsToViewModel(viewModel);\n        return View(viewModel);\n    }\n\n    [HttpPost]\n    [ValidateInput(false)]\n    public ActionResult Create(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)\n    {\n        if (!ModelState.IsValid)\n        {\n            viewModel.Time = _timeEntryHelper.Value;\n            AddLookupsToViewModel(viewModel);\n            return View(viewModel);\n        }\n        var visitEntry = Mapper.Map&lt;VisitViewModel, VisitEntry&gt;(viewModel);\n        viewModel.AssociatedCasesSelected = associatedCasesSelected;\n        viewModel.PartiesSelected = selectedParties;\n        try\n        {\n            _visitEntryService.Create(visitEntry, associatedCasesSelected, selectedParties);\n            this.FlashInfo(string.Format(Message.ConfirmationMessageCreate, Resources.Entities.Visit.EntityName));\n        }\n        catch (RulesException ex)\n        {\n            ex.CopyTo(ModelState);\n        }\n        if (ModelState.IsValid)\n            return RedirectToAction(\"Edit\", \"Case\", new { caseId = viewModel.CaseId });\n        AddLookupsToViewModel(viewModel);\n        return View(viewModel);\n    }\n\n    [HttpGet]\n    public ActionResult Edit(Guid visitEntryId)\n    {\n        var visitEntry = _visitEntryService.Get(visitEntryId);\n        if (visitEntry == null) return View(\"NotFound\");\n        VisitViewModel viewModel = Mapper.Map&lt;VisitEntry, VisitViewModel&gt;(visitEntry);\n        viewModel.AssociatedCasesSelected = visitEntry.Visits.Select(v =&gt; v.CaseId);\n        viewModel.PartiesSelected = visitEntry.VisitEntryParties.Select(v=&gt;v.PartyId);\n        visitEntry.Parties = visitEntry.VisitEntryParties.Select(v =&gt; v.PartyId).ToList();\n        viewModel.CaseNumber = visitEntry.Case.CaseNumber;\n        viewModel.Name = _caseCompositeService.GetCaseName(viewModel.CaseId, _currentUser.OfficeId);\n        AddLookupsToViewModel(viewModel);\n        return View(viewModel);\n\n    }\n    [HttpPost]\n    [ValidateInput(false)]\n    public ActionResult Edit(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)\n    {\n        if(!ModelState.IsValid)\n        {\n            viewModel.Time = _timeEntryHelper.Value;\n            AddLookupsToViewModel(viewModel);\n            return View(viewModel);\n        }\n\n\n        try\n        {\n            var visitEntry = Mapper.Map&lt;VisitViewModel, VisitEntry&gt;(viewModel);\n            visitEntry.VisitDate = _timeEntryHelper.AddTimeToDate(visitEntry.VisitDate);\n\n            viewModel.AssociatedCasesSelected = associatedCasesSelected;\n            viewModel.PartiesSelected = selectedParties;\n            if(viewModel.PartiesSelected != null)\n                visitEntry.Parties = viewModel.PartiesSelected.ToList();\n            _visitEntryService.Update(visitEntry, associatedCasesSelected, selectedParties);\n            this.FlashInfo(string.Format(Message.ConfirmationMessageUpdate, Resources.Entities.Visit.EntityName));\n        }\n        catch (RulesException ex)\n        {\n            ex.CopyTo(ModelState);\n        }\n\n        if(!ModelState.IsValid)\n        {\n            viewModel.Time = _timeEntryHelper.Value;\n            AddLookupsToViewModel(viewModel);\n            return View(viewModel);\n        }\n        this.FlashInfo(string.Format(Message.ConfirmationMessageUpdate, Resources.Entities.Visit.EntityName));\n        return RedirectToAction(\"Edit\", \"Case\", new {caseId = viewModel.CaseId});\n    }\n</code></pre>\n\n<hr>\n\n<p>Here are the Create and Update methods from my service file: </p>\n\n<pre><code>public void Create(VisitEntry visitEntry,IList&lt;Guid&gt;caseIds, IList&lt;Guid&gt;partyIds )\n    {\n        EnsureValid(visitEntry);\n        _visitEntryRepository.Save(visitEntry);\n        caseIds = AddCurrentCaseToCases(visitEntry.CaseId, caseIds);\n        foreach (var caseId in caseIds.Distinct())\n        {\n            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Create(visit);\n        }\n        foreach (var partyId in partyIds.Distinct())\n        {\n            var partyVisit = new VisitEntryParty {PartyId = partyId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Create(partyVisit);\n        }\n    }\n    public void Update(VisitEntry visitEntry, IList&lt;Guid&gt; caseIds, IList&lt;Guid&gt;partyIds )\n    {\n        EnsureValid(visitEntry);\n        _visitEntryRepository.Save(visitEntry);\n        caseIds = AddCurrentCaseToCases(visitEntry.CaseId, caseIds);\n        var visits = _visitService.FindAll().Where(v =&gt; v.VisitEntryId == visitEntry.VisitEntryId);\n        List&lt;Visit&gt; toDelete =\n            visits.Where(visit =&gt; !(from c in caseIds.Distinct() select c).Contains(visit.CaseId)).ToList();\n        foreach (var visit in toDelete)\n        {\n            _visitService.Delete(visit.VisitId, visitEntry.OfficeId, visitEntry.UserId);\n        }\n        List&lt;Guid&gt; toAdd =\n            caseIds.Where(caseId =&gt; !(from v in visits.Distinct() select v.CaseId).Contains(caseId)).ToList();\n        foreach (var caseId in toAdd)\n        {\n            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(visit);\n        }\n        foreach (var partyId in partyIds.Distinct())\n        {\n            var partyVisit = new VisitEntryParty {PartyId = partyId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(partyVisit);\n        }\n    }\n</code></pre>\n\n<p>Please any help will be greatly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-membership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13240046,"title":"membership provider not working in mvc application","body":"<p>I have strange problem: I added a custom membership provider to an mvc application, after the login i have the session cookie in request, but the user.identity property doesn't recognize it and acts like is not authenticated.</p>\n\n<p>Do you have any idea which is the problem?</p>\n\n<p>luca</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2523,"score":3,"question_id":6840941,"title":"Group MVC3 views into sub-folders under main 'action' folder","body":"<p>E.g. I have three payment controllers, each specific to a third party payment processor, so under my root Views folder, I have one folder for each of these controllers.  I would like to move these into Views\\Payments\\Processor1, Views\\Payments\\Processor2, etc. instead of the current Views\\Processor1 etc.</p>\n\n<p>I am not ready to implement areas yet, so I'm hoping there is some way I can tell MVC to also look in subfolders, or something like that.  Can this be done and how?</p>\n"},{"tags":["c#","asp.net-mvc","loops"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13236316,"title":"View loop value doesn't change after first value","body":"<p>I have an <code>ICollection&lt;String&gt;</code> being passed to my view and I do a foreach to load a partial view. It loops through the correct number of times, however, the value it passes is the same and I know in the model that this is not the case.</p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>public class HomeController : Controller\n{\n    public ActionResult Index()\n    {\n        return View(\"Index\", new List&lt;String&gt;());\n    }\n\n    [HttpPost]\n    public ActionResult Index(List&lt;String&gt; txtValue)\n    {\n        return View(\"Index\", txtValue);\n    }\n}\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>        &lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;List&lt;String&gt;&gt;\" %&gt;\n&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Home\n&lt;/asp:Content&gt;\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n&lt;script type=\"text/javascript\"&gt;\n    //Deletes the div the Control is in.\n    $(\".delete\").live(\"click\", function () {\n        $(this).parent().remove();\n    });\n\n    //Adds the TextBoxes to divControls\n    function AddTextBox(Value) {\n        var elements = \"&lt;div&gt;&lt;input name=\\\"txtValue\\\" type=\\\"text\\\" /&gt;&lt;input type=\\\"button\\\" class=\\\"delete\\\" value=\\\"-\\\" /&gt;&lt;br/&gt;&lt;/div&gt;\";\n        $(\"#divControls\").append(elements);\n    }\n    &lt;/script&gt;\n\n&lt;h2&gt;Controls!!!&lt;/h2&gt;\n&lt;input id=\"btnAdd\" type=\"button\" name=\"Refresh\" value=\"+\" onclick=\"AddTextBox()\" /&gt;\n&lt;% using (Html.BeginForm())\n   { %&gt;\n    &lt;input id=\"btnsubmit\" type=\"submit\" name=\"Submit\" onclick=\"Submit\" /&gt;\n    &lt;div id=\"divControls\"&gt;\n&lt;%  \n        foreach (var text in this.Model)\n        { %&gt;\n            &lt;%=Html.TextBox(\"txtValue\", text, new { id = \"Value\", name = \"txtValue\" })%&gt;\n           &lt;% Html.RenderPartial(\"TextControl\", text);\n        }\n%&gt;\n    &lt;/div&gt;\n&lt;% \n    } \n%&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p><strong>TextControl.ascx</strong></p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;String&gt;\" %&gt;\n\n&lt;div&gt;\n    &lt;%=Html.TextBox(\"txtValue\", this.Model, new { id = \"Value\", name = \"txtValue\" }) %&gt;\n    &lt;input id=\"btn\" type=\"button\" class=\"delete\" value=\"-\" /&gt;&lt;br/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The values of the model passed from the controller to the view are correct, even when passed to the user control \"TextControl\" the value is correct, but when the Textbox displays they are all just the first value of the original model passed in.</p>\n\n<p>Ex.</p>\n\n<pre><code>Model as List&lt;String&gt; { \"1\", \"2\", \"3\", \"4\" }\n</code></pre>\n\n<p>passed to the view, will iterate through each one correctly, passing the correct string to \"TextControl\" to create a <code>Html.TextBox(\"name\", this.Model)</code>. Everything on the debugging side appears correct, however, when it finishes all the textboxes are \"1\" (or the first value in the list).</p>\n\n<p>Here's a link to my exact code: <a href=\"http://www.sendspace.com/file/sypl1u\" rel=\"nofollow\">http://www.sendspace.com/file/sypl1u</a></p>\n\n<p><strong>Note:</strong>\nI came up with a solution of just using <code>&lt;input type=\"text\" name=\"txtValue\" value=\"&lt;%= this.Model %&gt;\" /&gt;</code> instead but I am still curious as to why the Html.TextBox Helper doesn't work. It would set the Id of the textbox correctly but it wouldn't set the value correctly. I would greatly appreciate it if anyone knew why.</p>\n"},{"tags":["sql","asp.net-mvc","linq","telerik"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13239333,"title":"Telerik MVC grid - sorting pre-sorted data on a per-page basis","body":"<p>I have a Telerik grid with paging enabled, at 100 items per page.  I want to sort only these 100 items, per page.</p>\n\n<p>This is my controller, it's returning pre-sorted data:</p>\n\n<pre><code>var listInflows = (from inf in db.CI_INFLOWS\n                                   orderby inf.InvoiceDt descending\n                                   select new InflowsGetModel\n                                   {\n                                     [omitted for brevity]\n</code></pre>\n\n<p>These is my Telerik settings:</p>\n\n<pre><code>.Sortable(sorting =&gt; sorting.OrderBy(so =&gt; so.Add(a =&gt; a.InvoiceDt).Ascending()))\n.Pageable(paging =&gt; paging.PageSize(100)\n                          .Style(GridPagerStyles.NextPreviousAndNumeric)\n                          .Position(GridPagerPosition.Top)\n         )\n</code></pre>\n\n<p>Here, I am telling the db to sort the data.  Then I want the 100-per-page displayed items to sort in the reverse order.  It's not behaving as expected.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13239141,"title":"IEnumerable to IList casting possibilites","body":"<p>I am trying to ensure that my fields and page options are valid and on one page i want to check and see if an item is selected or not - which a selection is required to save. </p>\n\n<p>I have the following: </p>\n\n<p>in ViewEntry: <code>public IList&lt;Guid&gt; Parties { get; set; }</code></p>\n\n<p>in my ViewModel: <code>public IEnumerable&lt;Guid&gt; PartiesSelected { get; set; }</code></p>\n\n<p>Here is my ensure valid code: </p>\n\n<pre><code>public void EnsureValid(VisitEntry visitEntry)\n    {\n        var errors = new RulesException&lt;VisitActivityEntryDTO&gt;();\n\n        if(visitEntry.Parties == null )\n            errors.ErrorForModel(string.Format(\"No {0} selected\", Kids.Resources.Entities.Party.EntityNamePlural));\n        if (errors.Errors.Any())\n            throw errors;\n    }\n</code></pre>\n\n<p>and in my controller my Get Edit method when loading the page I have: </p>\n\n<pre><code>viewModel.PartiesSelected = visitEntry.VisitEntryParties.Select(v=&gt;v.PartyId);\n</code></pre>\n\n<p>Is it possible in any way that i could possibly have: </p>\n\n<pre><code>viewEntry.Parties = viewModel.PartiesSelected\n</code></pre>\n\n<p>or</p>\n\n<pre><code>viewEntry.Parties = visitEntry.VisitEntryParties.Select(v=&gt;v.PartyId);\n</code></pre>\n\n<p>I mainly want to have the selected party to show up in the list of Parties for the ViewEntry so when i validate. </p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","performance"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":56,"score":0,"question_id":13238988,"title":"MVC3 App High Memory Usage","body":"<p>I have an MVC App that when deployed to the test server uses quite a bit of memory.  The Worker Process for the app pool that is running under is right around 1GB of memory usage. What is the best way to debug something like this?  I am not currently explicitly calling Garbage Collection because I have been told it is not necessary in MVC3.   </p>\n"},{"tags":["sql-server","asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13238522,"title":"SQL/Linq coding for a search feature in MVC app - best practice","body":"<p>I have a section of an ASP MVC app I building that displays an info sheet regarding a person, then there is a button which will allow the user to search the database, to see if this person is already in the database before saving the record.  If the record exists, then the feature needs to overwrite certain fields in the DB, kind of a 'search and merge/update'.  </p>\n\n<p>I am pretty sure this will go beyond my LINQ skills, so I am thinking of doing a stored proc, but I wanted to poll the masses to see what the accepted best practice is for something like this.</p>\n\n<p>Thank you for reading, and for your opinion.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api","web-api"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":120,"score":5,"question_id":13200381,"title":"ASP.NET MVC 4 Application Calling Remote WebAPI","body":"<p>I've created a couple ASP.NET MVC applications in the past, but I've never used WebAPIs before. I'm wondering how I could create a simple MVC 4 app that does simple CRUD stuff via WebAPI instead of through a normal MVC controller. The trick is that the WebAPI should be a separate solution (and, in fact, could very well be on a different server/domain).</p>\n\n<p>How do I do that? What am I missing? Is it just a matter of setting up routes to point to the WebAPI's server? All the examples I've found showing how to consume WebAPIs using an MVC application seem to assume the WebAPI is \"baked in\" to the MVC application, or at least is on the same server.</p>\n\n<p>Oh, and to clarify, I'm not talking about Ajax calls using jQuery... I mean that the MVC application's controller should use the WebAPI to get/put data.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13238393,"title":"unit testing asp.net mvc model validation","body":"<p>Is this this the latest way of doing unit testing the model validation in asp.net mvc 4.0 ?</p>\n\n<p><a href=\"http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html\" rel=\"nofollow\">http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html</a></p>\n\n<p>or is there a better way of testing model validation?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor","html-helper"],"answer_count":4,"favorite_count":6,"up_vote_count":28,"down_vote_count":0,"view_count":15534,"score":28,"question_id":4451287,"title":"Razor: Declarative HTML helpers","body":"<p>I'm trying to write a simple declarative html helper:</p>\n\n<pre><code>@helper Echo(string input) {\n    @input\n}\n</code></pre>\n\n<p>The helper works fine if I embed it into the page I want to use it on. But if I move it to a separate <code>.cshtml</code> file and place that file in the <code>~/Views/Helpers</code> directory, my view can't be compiled anymore because the helper is not found. According to Scott Gu's <a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx\" rel=\"nofollow\">blog article on Razor</a> it should work. </p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":632,"score":4,"question_id":6050082,"title":"Why are Controller Constructors fired before the Initialize method","body":"<p>I have a base Controller <code>ApplicationController</code> that needs to grab the URL Host and do some processing before the child controllers are fired. Since controller constructors are fired before RequestContext is initialized I have to override Initialize method to do my processing.</p>\n\n<p><code>ApplicationController:</code></p>\n\n<pre><code>    Protected Overrides Sub Initialize(ByVal requestContext As System.Web.Routing.RequestContext)\n        MyBase.Initialize(requestContext)\n\n        Dim host as String\n        host = Request.Url.Host.ToString\n    End Sub\n</code></pre>\n\n<p>What is the logic behind having Controller Constructors fire before the Initialize method?</p>\n\n<p>Also what are the rules to what should be placed in the Initialize Method.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":52,"score":5,"question_id":13234330,"title":"Custom scaffold for controller","body":"<p>I'm using repository pattern in my ASP MVC4 app and I thought it would be nice to create custom scaffold templates to avoid tweaking code every time I generate something.</p>\n\n<p>I followed some tutorials from the web. I copied the CodeTemplates directory form ProgramFiles to my project (only some of the files) and I cleared the Custom Tool property for each.</p>\n\n<p>I managed to achieve 2 goals:</p>\n\n<ul>\n<li>override the default template for controller: when I go to Controller>Add>Controllers and select \"controller with read/write actions and views....\" it uses my template.</li>\n<li>add a new view template: when I go to SomeViewFolder>Add>View I can choose my new template there.</li>\n</ul>\n\n<p>The thing I was unable to achieve was to create a new template <strong>ControllerWithRepo.tt</strong> and be able to select it in Controller>Add>Controllers. Even though I have <strong>ControllerWithRepo.tt</strong> created it doesn't show up on the template drop down list.</p>\n\n<p>I know it's possible to do what I want by hardcoding things in <strong>ControllerWithContext.tt</strong>  , but it seems to be a lame solution. I would like to do it the right way - to pass a repository class instead of DbContext class and generate the controller the way I want.</p>\n\n<p>Right now If I try to put my repository class as dbcontext it fails to perform the scaffold.</p>\n\n<p>To sum up, how can I create my own controller scaffold template for repository pattern?</p>\n"},{"tags":["ajax","asp.net-mvc","jquery-ui","unobtrusive-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13229509,"title":"An MVC helper for a validated AJAX form dialog loaded from another page?","body":"<p>I have a simple edit form. For a particular field, if the user doesn't see what they want, they can click a link, and a request form will pop-up in a new window. (FYI, we support mobile browsers.)</p>\n\n<p>If jQueryUI is available, progressive enhancement intercepts the click, opens a jQuery Dialog, the form is filled, validated, and submitted, where it displays the result and allows dialog close.</p>\n\n<p><strong>QUESTION</strong>: Is there an 'OEM' or 'Nugettable' MVC helper that implements this simple \"ancillary AJAX form\" interaction in a downlevel-compatible way?</p>\n\n<p>As far as I can tell, I have to build a whole lot of this from scratch and wire it all up manually, and ASP.NET MVC doesn't even support unobtrusive validation in this scenario. <a href=\"http://stackoverflow.com/questions/5146419/how-to-use-asp-net-mvc-3-jquery-validate-with-a-jquery-dialog-that-does-an-ajax\">How to use asp.net mvc 3 jquery validate with a jquery dialog that does an ajax submit?</a> Here is an example of building it from scratch for PHP: <a href=\"http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Jquery/A_2099-jQuery-AJAX-Enabled-Forms-in-Modal-Dialog.html\" rel=\"nofollow\">http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Jquery/A_2099-jQuery-AJAX-Enabled-Forms-in-Modal-Dialog.html</a></p>\n\n<p>For example, currently I think I'll need to do these things, and they seem very 'encapsulatable':</p>\n\n<ul>\n<li>Add an ActionLink with a { target = new }</li>\n<li>Wire a javascript event handler for the link</li>\n<li>Read the link target to set it as a jQuery dialog source</li>\n<li>Reinitialize page validation to overcome the unobtrusive limitation</li>\n<li>Wire the form submit to validation</li>\n<li>Read the form post destination to set it as a jQuery AJAX destination</li>\n<li>Wire form submit to jQuery's AJAX post method</li>\n<li>At the server, return special response for AJAX form posts</li>\n<li>Wire the submit success to an OK dialog</li>\n<li>Wire the submit failure to a dialog redraw</li>\n</ul>\n\n<p>Seems like a lot of effort for an everyday sort of need. Any hints are appreciated.</p>\n\n<p>Shannon</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13180481,"title":"Cannot update user since it's checking for unique username","body":"<p>I have user created page and obviously I don't want my users to have same usernames so I created my validation for that, however I have problem editing users now. When I try to edit user it won't allow me to do it since it says username already taken. But I don't even want to edit the username, just password or something.</p>\n\n<p>Edit: I did made mistake by calling <code>ValidateModel()</code>, now I fixed that but still run into problems.</p>\n\n<p><strong>Validator</strong></p>\n\n<pre><code>public class UniqueUsername : ValidationAttribute\n{\n    public override bool IsValid(object value)\n    {\n        if (value == null) return true; // In Edit view you can't edit username so it's null\n\n        FinanceDataContext _db = new FinanceDataContext();\n        var user = _db.Users.ToList().Where(x =&gt; x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault();\n\n        if (user == null) return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>public class User\n{\n    public int ID { get; set; }\n\n    // When I remove UniqueUsername and Remote validators everything works just fine\n    [Required]\n    [UniqueUsername(ErrorMessage = \"Username is already taken\")]\n    [Remote(\"CheckUsername\", \"User\", null, ErrorMessage = \"Username is allready taken\", HttpMethod = \"POST\")]\n    public string Username { get; set; }\n\n    [Required]\n    public string Password { get; set;}\n}\n</code></pre>\n\n<p><strong>Action</strong></p>\n\n<pre><code>[HttpPost]\n[ValidateAntiForgeryToken]\npublic ActionResult Edit(User u)\n{\n    // Get user we want to edit\n    var user = _db.Users.Where(x =&gt; x.ID == u.ID).SingleOrDefault();\n    if (user == null) return HttpNotFound();\n\n    // Set new fields manually\n    if (!string.IsNullOrEmpty(u.Password)) user.Password = Infrastructure.Encryption.SHA256(u.Password);\n\n    ModelState.Remove(\"Username\"); // this doesen't seem to do much...\n\n    _db.SaveChanges(); // validation error here\n    return Content(Infrastructure.Helper.SerializeObject(u));\n}\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<blockquote>\n  <p>Validation failed for one or more entities. See\n  'EntityValidationErrors' property for more details.</p>\n</blockquote>\n\n<p><em>I know why it throws me error. Because he checks if Username is already taken, and of course it's taken but I want to validate if username is taken only on CREATE, not on EDIT (since you can't change your username)</em></p>\n"},{"tags":["c#","asp.net-mvc","c#-4.0","asmx","asp.net-web-api-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13181654,"title":"How to implement a web api facade in c#","body":"<p><strong>Background:</strong> We have a requirement to be able to support web servers other than IIS. To do this we are planning on moving all our processing logic to another service which will use a queuing mechanism as a transport (RabbitMQ to be specific). We will have a HTTP web api that will basically forward all requests to this other service; for IIS we will implement this facade in C# &amp; probably Java for other web servers like Tomcat.</p>\n\n<p>My question is this; for c# what is the best way to forward all the HTTP requests &amp; content requests to another service. I've being looking at using a asmx HTTPHandler for this; I have it working; but the solution is ugly and requires using a URL re-writer for clean URLs. </p>\n\n<p>Would anyone know if it is possible to do this using MVC or the web-api itself; we basically take all the content received; the URL itself, cookies, query string etc; package it up and send it on for processing.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12920392,"title":"IE 9 shows null","body":"<p>In my model I defined NullDisplayFormat</p>\n\n<pre><code>[StringLength(100)]\n[DisplayName(\"First Contact\")]\n[DisplayFormat(NullDisplayText = \"\")]\n[Column(\"Contact1\",TypeName =  \"varchar\")]\npublic virtual string Contact1 { get; set; }\n</code></pre>\n\n<p>In Google Chrome and in FireFox I see nothing in the grid and input controls in my view. However, in IE 9 I see NULL. Is it a bug in IE 9? What is the simplest way to fix it?</p>\n\n<p>I also tried to change null to nothing this way in jQuery:</p>\n\n<pre><code>var Contact1 = $('.trSelected td:eq(3)').text();\n$('#Contact1').val(Contact1||'Nothing');\n</code></pre>\n\n<p>However, it didn't work since the Contact1 is already a string property = null. Do you know how can I fix it?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13016674,"title":"Validations not show up using EF Code First with complex types","body":"<p>This is a continuation of this question <a href=\"http://stackoverflow.com/questions/13000887/model-class-and-mapping\">Model class and Mapping</a></p>\n\n<p>I had my Client class now working fine and it's defined as </p>\n\n<pre><code>using System;\n\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel;\n\nusing DataAnnotationsExtensions;\nusing System.ComponentModel.DataAnnotations.Schema;\nusing System.Collections.Generic;\n\nnamespace CardNumbers.Objects\n{\n    [ComplexType]\n    public class PhoneInfo\n    {\n        [DataType(DataType.PhoneNumber)]\n        [StringLength(10)]\n        [DisplayName(\"Phone\")]\n        public virtual string Phone { get; set; }\n\n        [StringLength(5)]\n        [DisplayName(\"Ext\")]\n        public virtual string Ext { get; set; }\n\n        public bool HasValue\n        {\n            get\n            {\n                return (Phone != null || Ext != null);\n            }\n        }\n\n    }\n\n      [ComplexType]\n      public class ContactDetail\n      {\n          //Constructor\n          public ContactDetail()\n          {\n              phoneInfo = new PhoneInfo();\n          }\n\n          [StringLength(100)]\n          [DisplayName(\"Contact Name\")]\n          [DisplayFormat(NullDisplayText = \"\")]\n          public virtual string Contact { get; set; }\n\n          [Email]\n          [StringLength(100)]\n          [DisplayName(\"Email\")]\n          public virtual string Email { get; set; }\n\n          public virtual PhoneInfo phoneInfo { get; set; }\n          public bool HasValue\n          {\n              get\n              {\n                  return (Contact != null || Email != null || phoneInfo.HasValue);\n              }\n          }\n      }\n\n/// &lt;summary&gt;\n/// Client class (Client No, Client Name, Address, Contact1, Contact2 info, Created By, Modified By (operator and date)\n/// &lt;/summary&gt;\n    public class Client\n    {\n        public Client()\n        {\n            Contact1 = new ContactDetail();\n            Contact2 = new ContactDetail();\n     }\n\n        [Key]\n        [Column(\"ClientId\",TypeName = \"int\")]\n        public virtual int Id { get; set; }\n        [Required]\n        [DisplayName(\"Client No\")]\n        [Column(\"client_no\", TypeName = \"smallint\")]\n        public virtual Int16 Number { get; set; }\n\n        [Required]\n        [Column(\"client_name\", TypeName = \"varchar\")]\n        [DisplayName(\"Client Name\")]\n        [MaxLength(30, ErrorMessage = \"Client Name should not be longer than 30 characters\" )]\n        [MinLength(3, ErrorMessage = \"Client Name is too short\")]\n        public virtual string Name { get; set; }\n\n        [DataType(DataType.MultilineText)]\n        public virtual string Address { get; set; }\n\n        public virtual ContactDetail Contact1 {get; set;}\n        public virtual ContactDetail Contact2 {get; set;}\n\n        [ForeignKey(\"EnteredByOperator\")]\n        public string EnteredBy { get; set; }\n\n        [InverseProperty(\"ClientsEnteredBy\")]\n        public virtual Operator EnteredByOperator { get; set; }\n\n        [ForeignKey(\"ModifiedByOperator\")]\n        public string ModifiedBy { get; set; }\n\n        [InverseProperty(\"ClientsUpdatedBy\")]\n        public virtual Operator ModifiedByOperator { get; set; }\n\n        [DataType(DataType.DateTime)]\n        [DisplayName(\"Created on\")]\n        public DateTime EnteredOn { get; set; }\n\n        [DataType(DataType.DateTime)]\n        [DisplayName(\"Modified on\")]\n        public DateTime? ModifiedOn { get; set; }\n\n        public virtual ICollection&lt;ClientOrder&gt; ClientOrders { get; set; }\n\n        public virtual ICollection&lt;Reorder&gt; Reorders { get; set; }\n    }\n}\n</code></pre>\n\n<p>I mapped column names using Fluent API and I also re-defined my original \"repository\" classes to be very similar to defined in this tutorial <a href=\"http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8\" rel=\"nofollow\">http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8</a></p>\n\n<p>This is my current partial view for the client form called _ClientForm:</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.Client\n&lt;fieldset&gt;\n    &lt;legend&gt;Client Info&lt;/legend&gt;\n\n    @Html.ValidationSummary(true)\n\n    &lt;input type=\"hidden\" id=\"fntype\" name=\"fntype\"&gt;\n    @Html.HiddenFor(model =&gt; model.Id)\n    @Html.EditorFor(model =&gt; model.Number, EditorTemplate.TextBox)\n\n    @Html.EditorFor(model =&gt; model.Name, EditorTemplate.TextBox)\n\n    @Html.EditorFor(model =&gt; model.Address, EditorTemplate.EditBox)\n\n    &lt;div id=\"ContactsInfo\"&gt;\n        @*Contact 1*@\n\n        &lt;div id=\"Contact1\"&gt;\n\n         @*@Html.EditorFor(model=&gt;model.Contact1)*@\n            @Html.EditorFor(model=&gt;model.Contact1.Contact, EditorTemplate.TextBox)\n            @Html.EditorFor(model=&gt;model.Contact1.Email, EditorTemplate.TextBox)\n        &lt;/div&gt;\n\n        @*Contact2*@\n        &lt;div id=\"Contact2\"&gt;\n\n        @*   @Html.EditorFor(model =&gt; model.Contact2)*@\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @*&lt;div class=\"clear\"&gt;&lt;/div&gt;*@\n    &lt;div id=\"SaveCancel\" class=\"float-right\"&gt;\n        &lt;button type=\"Submit\" id=\"btnSave\"&gt;Save&lt;/button&gt;\n        &lt;button type=\"reset\" id=\"btnCancel\"&gt;Cancel&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>I already tried to revert to original way of only one level and I also commented the second Contact2 info but still the e-mail validation doesn't work and all other validations also don't seem to work.</p>\n\n<p>The EditorFor textboxes are defined based on this blog post <a href=\"http://fusionovation.com/post/2010/02/15/adding-a-rich-text-editor-to-asp-net-mvc-using-strongly-typed-helpers-dataannotations-amp-jquery.aspx\" rel=\"nofollow\">http://fusionovation.com/post/2010/02/15/adding-a-rich-text-editor-to-asp-net-mvc-using-strongly-typed-helpers-dataannotations-amp-jquery.aspx</a></p>\n\n<p>And these are two of the new EditorFor I added:\nPhoneInfo.cshtml</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.PhoneInfo\n\n&lt;div id=\"PhoneInfo\"&gt;\n    &lt;div class=\"float-left\"&gt;\n        @Html.EditorFor(model =&gt; model.Phone, EditorTemplate.TextBox)\n    &lt;/div&gt;\n    &lt;div class=\"float-right\"&gt;\n        @Html.EditorFor(model =&gt; model.Ext, EditorTemplate.TextBox)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And ContactDetail.cshtml</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.ContactDetail\n\n@Html.EditorFor(model =&gt; model.Contact, EditorTemplate.TextBox)\n@Html.EditorFor(model =&gt; model.Email, EditorTemplate.TextBox)\n@Html.EditorFor(model=&gt;model.phoneInfo)\n</code></pre>\n\n<p>So, as you can see, the code of the views is now very compact.</p>\n\n<p>However, with all of these in place the validations don't see to fire anymore. I used to test validation on EMail by typing some garbage. It used to provide a validation message near the textbox. Now I observe that the email textbox takes the red border, but there is no message.</p>\n\n<p>Do you see what I am missing now and if it's possible to use complex type and validations?</p>\n\n<p>To clarify, the _ClientForm is called from this Client view:</p>\n\n<pre><code>@model CardNumbers.Objects.Client\n\n@{\n    ViewBag.Title = \"Client\";\n}\n\n@section scripts {\n    &lt;script src=\"@Url.Content(\"~/Scripts/Clients.js\")\" type=\"text/javascript\" &gt;&lt;/script&gt;\n}\n\n &lt;form id=\"frmClientsSearch\"&gt;\n        &lt;label for=\"clientNo\"&gt;Client No: &lt;/label&gt;\n        &lt;input type=\"number\" name=\"searchClientNo\" class=\"numericOnly\" /&gt;&lt;br /&gt;\n        &lt;label for=\"clientName\"&gt;Client Name: &lt;/label&gt;\n        &lt;input type =  \"text\" size =25 value =\"Please enter the search value\" class=\"SelectOnEntry\"\n            name =\"searchClientName\" /&gt;\n\n       &lt;input type=\"button\" id=\"btnClientsSearch\" value =\"Find / Refresh\" /&gt;      \n&lt;/form&gt;\n&lt;div style=\"padding-left: 150px; padding-top: 50px; padding-bottom: 50px;\" id=\"ClientsResults\"&gt;\n    &lt;table id=\"flexClients\" style=\"display: none\"&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n&lt;div style=\"display: none\"&gt;\n   &lt;form id=\"sform\" title=\"Client Info\"&gt;\n\n\n        @{Html.RenderPartial(\"_ClientForm\", Model)   ;}\n\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13236998,"title":"Url.Action returning different url on different part of site","body":"<p>I have a line in a partial that is included in 2 different views on my site:</p>\n\n<pre><code>@Url.Action(\"SomeController\", \"SomeAction\", { userID = \"foo\" })\n</code></pre>\n\n<p>I am noticing that the URL this is generating is very different depending on which page I'm on. Can anyone give me a reason why this might happen? Asp.Net MVC 3.</p>\n"},{"tags":["asp.net-mvc","webforms","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13236734,"title":"MVC 4 Html Helper RouteUrl not found (MVC 4 added to Webforms project)","body":"<p>Exact error message:</p>\n\n<pre><code> 'System.Web.Mvc.HtmlHelper&lt;dynamic&gt;' does not contain a definition for 'RouteUrl' and no extension method 'RouteUrl' accepting a first argument of type 'System.Web.Mvc.HtmlHelper&lt;dynamic&gt;' could be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>My web config in the views folder is this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.webPages.razor\" type=\"System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;section name=\"host\" type=\"System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n      &lt;section name=\"pages\" type=\"System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n\n  &lt;system.web.webPages.razor&gt;\n    &lt;host factoryType=\"System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;pages pageBaseType=\"System.Web.Mvc.WebViewPage\"&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"Microsoft.Web.Optimization\"/&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n  &lt;/system.web.webPages.razor&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"false\" /&gt;\n  &lt;/appSettings&gt;\n\n  &lt;system.web&gt;\n    &lt;httpHandlers&gt;\n      &lt;add path=\"*\" verb=\"*\" type=\"System.Web.HttpNotFoundHandler\"/&gt;\n    &lt;/httpHandlers&gt;\n\n    &lt;!--\n        Enabling request validation in view pages would cause validation to occur\n        after the input has already been processed by the controller. By default\n        MVC performs request validation before a controller processes the input.\n        To change this behavior apply the ValidateInputAttribute to a\n        controller or action.\n    --&gt;\n    &lt;pages\n        validateRequest=\"false\"\n        pageParserFilterType=\"System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        pageBaseType=\"System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        userControlBaseType=\"System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;controls&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" namespace=\"System.Web.Mvc\" tagPrefix=\"mvc\" /&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n\n    &lt;handlers&gt;\n      &lt;remove name=\"BlockViewHandler\"/&gt;\n      &lt;add name=\"BlockViewHandler\" path=\"*\" verb=\"*\" preCondition=\"integratedMode\" type=\"System.Web.HttpNotFoundHandler\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>My project references System.Web.Mvc V4.0.0.0 and this assembly is set to copy local.</p>\n\n<p>What could I be missing?</p>\n\n<p>Background information: This project is a web-forms project with new MVC 4 development.</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ajax"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":4691,"score":2,"question_id":3908605,"title":"return Json error from ASP.NET MVC","body":"<p>I'm trying to return an error message via Json from ASP.NET MVC controller. I want to display carriage returns on the screen, so the error will look like:</p>\n\n<blockquote>\n<pre><code>Error 1.\nError 2.\n</code></pre>\n</blockquote>\n\n<p>instead of <code>\"Error1.\\u003cbr/\\u003eErro2.\\u003cbr.\\u003e\"</code></p>\n\n<p>Here's my ASP.NET MVC code</p>\n\n<pre><code>Response.StatusCode = (int)HttpStatusCode.BadRequest;\nstring str = \"Error 1.&lt;br/&gt;Error 2.&lt;br.&gt;\";\nreturn Json(str);\n</code></pre>\n\n<p>JavaScript (redacted):</p>\n\n<pre><code>      .ajax({...\n            error: function(xhr, textStatus, exceptionThrown) {\n                $('#result').html(xhr.responseText);\n            },\n</code></pre>\n\n<p>Debugging the xhr.responseText yields: <code>\"\"Error1.\\u003cbr/\\u003eErro2.\\u003cbr.\\u003e\"\"</code></p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","telerik","telerik-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13233069,"title":"Two Kendo UI TreeView on the same page","body":"<p>I am using Kendo UI MVC extensions. I have one treeview on the page</p>\n\n<pre><code>&lt;script type=\"text/x-kendo-tmpl\" id=\"template\"&gt;\n    &lt;div class=\"form\"&gt;\n        &lt;h3&gt;${Name}&lt;/h3&gt;\n    &lt;/div&gt;\n&lt;/script&gt;\n\n@(Html.Kendo().ListView(Model)\n      .Name(\"formsList\")\n      .ClientTemplateId(\"template\")\n      .TagName(\"div\")\n      .BindTo(Model)\n      .DataSource(dataSource =&gt; dataSource\n      .Model(model =&gt;\n          { \n              model.Id(p =&gt; p.Id);\n              model.Field(p =&gt; p.Name);\n              model.Field(p =&gt; p.Fields);\n          }))\n      .Pageable()\n      .Selectable(selectable =&gt; selectable.Mode(ListViewSelectionMode.Single))\n      .Events(events =&gt; events.Change(\"onChange\")))\n</code></pre>\n\n<p>When I click on the item I want to show <code>Fields</code> property in my Model in the separate TreeView down below.</p>\n\n<p>So far I have such code</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function onChange(arg) {\n        var dataSource = $(\"#formsList\").data(\"kendoListView\");\n        var index = dataSource.select().index();\n        var dataItem = dataSource.dataSource.view()[index];\n\n        alert(dataItem.Fields);\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I can get the Fields property of the selected dataItem, but how should I pass it to the second TreeView?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2473,"score":0,"question_id":11231278,"title":"Could not load file or assembly 'System.Web.Providers\"","body":"<p>hello this my config file</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\"/&gt;\n    &lt;sectionGroup name=\"elmah\"&gt;\n      &lt;section name=\"security\" requirePermission=\"false\" type=\"Elmah.SecuritySectionHandler, Elmah\"/&gt;\n      &lt;section name=\"errorLog\" requirePermission=\"false\" type=\"Elmah.ErrorLogSectionHandler, Elmah\"/&gt;\n      &lt;section name=\"errorMail\" requirePermission=\"false\" type=\"Elmah.ErrorMailSectionHandler, Elmah\"/&gt;\n      &lt;section name=\"errorFilter\" requirePermission=\"false\" type=\"Elmah.ErrorFilterSectionHandler, Elmah\"/&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=aspnet-MedicallexiconProject-2012615153521;Integrated Security=True\" providerName=\"System.Data.SqlClient\"/&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"2.0.0.0\"/&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"true\"/&gt;\n    &lt;add key=\"PreserveLoginUrl\" value=\"true\"/&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\"/&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\"/&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation targetFramework=\"4.0\" debug=\"true\"/&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/Login\" timeout=\"2880\"/&gt;\n    &lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\"/&gt;\n        &lt;add namespace=\"System.Web.Mvc\"/&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\"/&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\"/&gt;\n        &lt;add namespace=\"System.Web.Routing\"/&gt;\n        &lt;add namespace=\"System.Web.WebPages\"/&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;profile defaultProvider=\"DefaultProfileProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultProfileProvider\" type=\"System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;roleManager defaultProvider=\"DefaultRoleProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultRoleProvider\" type=\"System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;sessionState mode=\"InProc\" customProvider=\"DefaultSessionProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/sessionState&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"ErrorLog\" type=\"Elmah.ErrorLogModule, Elmah\"/&gt;\n      &lt;add name=\"ErrorMail\" type=\"Elmah.ErrorMailModule, Elmah\"/&gt;\n      &lt;add name=\"ErrorFilter\" type=\"Elmah.ErrorFilterModule, Elmah\"/&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n      &lt;add name=\"ErrorLog\" type=\"Elmah.ErrorLogModule, Elmah\" preCondition=\"managedHandler\"/&gt;\n      &lt;add name=\"ErrorMail\" type=\"Elmah.ErrorMailModule, Elmah\" preCondition=\"managedHandler\"/&gt;\n      &lt;add name=\"ErrorFilter\" type=\"Elmah.ErrorFilterModule, Elmah\" preCondition=\"managedHandler\"/&gt;\n    &lt;/modules&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Helpers\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-4.0.0.0\" newVersion=\"4.0.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.WebPages\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"EntityFramework\" publicKeyToken=\"b77a5c561934e089\" culture=\"neutral\"/&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.4.0.0\" newVersion=\"4.4.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;entityFramework&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\"/&gt;\n  &lt;/entityFramework&gt;\n  &lt;elmah&gt;\n    &lt;security allowRemoteAccess=\"false\"/&gt;\n  &lt;/elmah&gt;\n  &lt;location path=\"elmah.axd\" inheritInChildApplications=\"false\"&gt;\n    &lt;system.web&gt;\n      &lt;httpHandlers&gt;\n        &lt;add verb=\"POST,GET,HEAD\" path=\"elmah.axd\" type=\"Elmah.ErrorLogPageFactory, Elmah\"/&gt;\n      &lt;/httpHandlers&gt;\n    &lt;/system.web&gt;\n    &lt;system.webServer&gt;\n      &lt;handlers&gt;\n        &lt;add name=\"ELMAH\" verb=\"POST,GET,HEAD\" path=\"elmah.axd\" type=\"Elmah.ErrorLogPageFactory, Elmah\" preCondition=\"integratedMode\"/&gt;\n      &lt;/handlers&gt;\n    &lt;/system.webServer&gt;\n  &lt;/location&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>but when pulish on host rais this error\nConfiguration Error</p>\n\n<p>Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. </p>\n\n<p>Parser Error Message: Could not load file or assembly 'System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.</p>\n\n<p>Source Error: </p>\n\n<pre><code>Line 44:     &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\nLine 45:       &lt;providers&gt;\nLine 46:         &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\"/&gt;\nLine 47:       &lt;/providers&gt;\nLine 48:     &lt;/membership&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","localization"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13236195,"title":"Formatting Currency to ALWAYS use USD regardless of users culture","body":"<p>This should be simple but I cannot find the answer anywhere.\nOn our asp.net MVC site, we show currency values and I need these currency values to Always be in USD regardless of the users culture settings.</p>\n\n<p>If I use string.format(\"{0:C}\",value) then it shows the value in what ever culture the use has set.\nThis is incorrect for us as $1000.00 is not the same thing as 1000.00 euro</p>\n\n<p>I still need to use the language side of this, meaning if they are in France I want to use the French localization resource, so I don't want to completely disregard their culture settings, but how can I make sure the currency is always shown in USD?</p>\n"},{"tags":["c#","asp.net-mvc","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13235722,"title":"Asp.Net MVC 3 model binder for all DateTime fields or execute action filter before binding","body":"<p>We have lots of models passed to actions that have a DateTime field on.  Some are using ModelBinders and some aren't  (we are using AutoFac in our app).  </p>\n\n<p>We have a globalized application and the culture is set per user (we set their culture as we want them to see the language their company wants) but that is set in an action filter it seems after the model binding has occurred.  Is there a way to execute the filter before the binding, or do something before binding occurs for all DateTime fields or is there a way to intercept all bindings for DateTime properties in the app whether the are passed directly to an action such as:</p>\n\n<pre><code>public ActionResult Create(DateTime Start);\n</code></pre>\n\n<p>or they are part of a model:</p>\n\n<pre><code>public ActionResult Create(CreateSurveyModel model);\n\npublic class CreateSurveyModel\n{\n    public DateTime Start { get; set; }\n}\n</code></pre>\n\n<p>And then do what we need to do?</p>\n\n<p>Many thanks for any help.</p>\n\n<p>POSSIBLE SOLUTION??</p>\n\n<p>This is I think awful but we have overridden the ExecuteCore on the base controller to set the current UI culture for the thread so it is set before the model binding occurs, is this a bad idea as it feels wrong :S</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13232560,"title":"Type generated in temporary asp.net files that no longer exists","body":"<p>I have an MVC 3 project that has started giving me a build error </p>\n\n<pre><code>The type or namespace name 'ActivityItemViewModel' could not be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>This error is coming from an ASP.net temporary files </p>\n\n<p>It appears to be referencing a type  that no longer exists in the project.  This type was removed a long time ago and the application has been build/bracnhed release many times since then.</p>\n\n<pre><code> public class views_activities_activityfeeditem_ascx : System.Web.Mvc.ViewUserControl&lt;ActivityItemViewModel&gt;\n</code></pre>\n\n<p>Neither the view or the view model exists any more.  </p>\n\n<p>I assumed that the temp file was corrupt and deleted them this worked the first time I rebuilt but after that i get the same error.  </p>\n\n<p>I've tried.</p>\n\n<ul>\n<li>Cleaning solution and rebuild  </li>\n<li>Deleting temporary asp.net files (both normal and 64 bit) </li>\n<li>Stop IIS/Clean delete and rebuild Start IIS </li>\n<li>And a load of combinations of the above</li>\n</ul>\n\n<p>This worked the first time but now I get the error every time.  Not sure how asp.net is getting a reference to these types? </p>\n\n<p>Any help or guidance on debugging this issue would be appreciated.  </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13235096,"title":"MVC Validation: Service Layer or Data Annotations","body":"<p>I hope this isn't terribly subjective, but when it comes to validating business logic, I see two paths that, unless I'm mistaken, deliver pretty much the same result:</p>\n\n<ul>\n<li><p>Use a service layer where all validation on your models is performed (ref: <a href=\"http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs</a>)</p></li>\n<li><p>Decorate your models with Data Annotations</p></li>\n</ul>\n\n<p>In the first instance, the model is a dumb container for data, and in the second, the model knows about its valid state. Above and beyond that, is there nuance between the two that I'm missing? Should one be used over the other in some instances?</p>\n\n<p>Thanks,</p>\n\n<p>Chris</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13235576,"title":"Convert video to flv using FFMPEG in asp.net not working?","body":"<p>Here my code for converting video when it is uploaded to server</p>\n\n<p>private bool ReturnVideo(string fileName)\n    {\n        string html = string.Empty;\n        //rename if file already exists</p>\n\n<pre><code>    int j = 0;\n    string AppPath;\n    string inputPath;\n    string outputPath;\n    string imgpath;\n    AppPath = Request.PhysicalApplicationPath;\n    //Get the application path \n    inputPath = AppPath + \"OriginalVideo\";\n    //Path of the original file \n    outputPath = AppPath + \"ConvertVideo\";\n    //Path of the converted file \n    imgpath = AppPath + \"Thumbs\";\n    //Path of the preview file \n    string filepath = Server.MapPath(\"~/OriginalVideo/\" + fileName);\n    while (File.Exists(filepath))\n    {\n        j = j + 1;\n        int dotPos = fileName.LastIndexOf(\".\");\n        string namewithoutext = fileName.Substring(0, dotPos);\n        string ext = fileName.Substring(dotPos + 1);\n        fileName = namewithoutext + j + \".\" + ext;\n        filepath = Server.MapPath(\"~/OriginalVideo/\" + fileName);\n    }\n    try\n    {\n        this.fileuploadImageVideo.SaveAs(filepath);\n    }\n    catch\n    {\n        return false;\n    }\n    string outPutFile;\n    outPutFile = \"~/OriginalVideo/\" + fileName;\n    int i = this.fileuploadImageVideo.PostedFile.ContentLength;\n    System.IO.FileInfo a = new System.IO.FileInfo(Server.MapPath(outPutFile));\n    while (a.Exists == false)\n    {\n\n    }\n    long b = a.Length;\n    while (i != b)\n    {\n\n    }\n    string convertString = string.Format(\" -i {0} -ar 22050 -ab 128 -acodec mp3 -r 25 -f flv -b 800 -s 640x480 {1}\", inputPath + \"\\\\\" + fileName, outputPath + \"\\\\\" + fileName.Remove(fileName.IndexOf(\".\"))+ \".flv\");\n    ConvertNow(convertString);\n    string imgargs = \" -i \\\"\" + outputPath + \"\\\\\" + fileName.Remove(fileName.IndexOf(\".\")) + \".flv\" + \"\\\" -f image2 -ss 1 -vframes 1 -s 280x200 -an \\\"\" + imgpath + \"\\\\\" + fileName.Remove(fileName.IndexOf(\".\")) + \".jpg\" + \"\\\"\";\n    ConvertNow(imgargs);\n\n\n    return true;\n}\n</code></pre>\n\n<p>I guess It's wrong with convertString but I get this string from ffmpeg documentation. Any one can help me?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","nuget"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3720,"score":3,"question_id":4994252,"title":"Help with NuGet. Project > Add Library Package Reference not appearing","body":"<p>I have installed NuGet. And when I try to go to Project > Add Library Package Reference \n\"Add Library Package Reference\" is not under the project menu. if i try to install nuget again it says it is already installed. My application is an MVC 3 application targeting .net 4.\nHow can I get this option to appear? Thanks!</p>\n"},{"tags":["asp.net","sql","asp.net-mvc","ms-access","gridview"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":106,"score":0,"question_id":13055331,"title":"How to alter table (add/delete column) dynamically and update it to gridview","body":"<p>I need gridview to get updated after I add new field to the table, below is the code</p>\n\n<pre><code>Protected Sub drpDataType_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles drpDataType.SelectedIndexChanged\n    Dim cnnOLEDB As New OleDbConnection(\"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Documents and Settings/My Documents/Visual Studio 2008/Projects/WebApplication1/WebApplication1/App_Data/Asset.mdb;\")\n    Dim alterSql As String\n    alterSql = \"ALTER TABLE LAB1 ADD \" + txtColumnName.Text + \" \" + drpDataType.SelectedValue\n    Dim type As String = drpDataType.SelectedValue\n    Dim cmdOLEDB As New OleDbCommand        \n    cnnOLEDB.Open()\n    cmdOLEDB = New OleDbCommand(alterSql, cnnOLEDB)\n    cmdOLEDB.ExecuteNonQuery()\n    cnnOLEDB.Close()\n    Dim tb1 As New DataTable\n    tb1.Columns.Add(txtColumnName.Text)\n    GridView1.DataSourceID = String.Empty\n    Me.GridView1.DataSource = tb1\n    Me.GridView1.DataBind()\nEnd Sub\n</code></pre>\n\n<p>I get this error \"Both DataSource and DataSourceID are defined on 'GridView1'.  Remove one definition\" I understand this because I have set the DataSourceID to AccessDataSource, now if I set it to empty I don't see anything in the gridview not even the tb1. Can anyone help me get this working, any help is appreciated. Thanks!</p>\n\n<p>Edit: Gridview </p>\n\n<pre><code> &lt;asp:GridView ID=\"GridView1\" runat=\"server\" AllowSorting=\"True\" \n              ShowFooter=\"True\" EmptyDataText=\"There are no records for the selection\"  \n              AutoGenerateColumns=\"False\" AutoGenerateDeleteButton=\"False\"  \n              AutoGenerateEditButton=\"False\" CellPadding=\"4\"  OnRowCommand=\"Insert_Click\"\n              DataKeyNames=\"Lab Name\" DataSourceID=\"AccessDataSource8\"/&gt;\n              &lt;Columns&gt;\n                  &lt;asp:TemplateField ShowHeader=\"False\"&gt;\n                      &lt;EditItemTemplate&gt;\n                          &lt;asp:LinkButton ID=\"LinkButton1\" runat=\"server\" CausesValidation=\"True\" \n                              CommandName=\"Update\" Text=\"Update\"&gt;&lt;/asp:LinkButton&gt;\n                          &amp;nbsp;&lt;asp:LinkButton ID=\"LinkButton2\" runat=\"server\" CausesValidation=\"False\" \n                              CommandName=\"Cancel\" Text=\"Cancel\"&gt;&lt;/asp:LinkButton&gt;\n                      &lt;/EditItemTemplate&gt;\n                      &lt;ItemTemplate&gt;\n                          &lt;asp:LinkButton ID=\"LinkButton1\" runat=\"server\" CausesValidation=\"False\" \n                              CommandName=\"Edit\" Text=\"Edit\"&gt;&lt;/asp:LinkButton&gt;\n                          &amp;nbsp;&lt;asp:LinkButton ID=\"LinkButton2\" runat=\"server\" CausesValidation=\"False\" \n                              CommandName=\"Delete\" Text=\"Delete\" OnClientClick=\"return confirm('Are you sure?');\" &gt;&lt;/asp:LinkButton&gt;\n                      &lt;/ItemTemplate&gt;\n                      &lt;FooterTemplate&gt;\n                     &lt;asp:LinkButton ID=\"LinkButton\" runat=\"server\" CommandName=\"Insert\" Text=\"Insert\" ValidationGroup=\"validate\" &gt;&lt;/asp:LinkButton&gt;\n                     &lt;/FooterTemplate&gt;\n                  &lt;/asp:TemplateField&gt;\n\n                  &lt;asp:TemplateField HeaderText=\"Lab Name\" SortExpression=\"Lab Name\"&gt;\n                      &lt;ItemTemplate&gt;\n                          &lt;asp:Label ID=\"Label1\" runat=\"server\" Text='&lt;%# Bind(\"[Lab Name]\") %&gt;'&gt;&lt;/asp:Label&gt;\n                      &lt;/ItemTemplate&gt;\n                      &lt;EditItemTemplate&gt;\n                          &lt;asp:Label ID=\"Label1\" runat=\"server\" Text='&lt;%# Eval(\"[Lab Name]\") %&gt;'&gt;&lt;/asp:Label&gt;\n                      &lt;/EditItemTemplate&gt;\n                      &lt;FooterTemplate&gt;\n                          &lt;asp:TextBox ID=\"txtLabname\" runat=\"server\" &gt;&lt;/asp:TextBox&gt;\n                          &lt;asp:RequiredFieldValidator ID=\"LabName\" runat=\"server\" ControlToValidate=\"txtLabname\" Text=\"*\" ValidationGroup=\"validate\"/&gt;\n                      &lt;/FooterTemplate&gt;\n            &lt;/Columns&gt;\n          &lt;/asp:GridView&gt; \n</code></pre>\n"},{"tags":["asp.net-mvc","routing","redirect"],"answer_count":5,"favorite_count":16,"up_vote_count":19,"down_vote_count":0,"view_count":13914,"score":19,"question_id":815229,"title":"How do I redirect to the previous action in ASP.NET MVC?","body":"<p>Lets suppose that I have some pages</p>\n\n<p>some.web/articles/details/5</p>\n\n<p>some.web/users/info/bob</p>\n\n<p>some.web/foo/bar/7</p>\n\n<p>that can call a common utility controller like</p>\n\n<p>locale/change/es</p>\n\n<p>or</p>\n\n<p>authorization/login</p>\n\n<p>How do I get these methods (change, login) to redirect to the previous actions (details, info, bar) while passing the previous parameters to them (5, bob, 7)?</p>\n\n<p>In short: How do I redirect to the page that I just visited after performing an action in another controller?</p>\n"},{"tags":["javascript","asp.net-mvc","json"],"answer_count":12,"favorite_count":20,"up_vote_count":45,"down_vote_count":0,"view_count":15361,"score":45,"question_id":726334,"title":"ASP.NET MVC JsonResult Date Format","body":"<p>I have a controller action that effectively simply returns a JsonResult of my model. So, in my method I have something like the following:</p>\n\n<pre><code>return new JsonResult(myModel);\n</code></pre>\n\n<p>This works well, except for one problem. There is a date property in the model and this appears to be returned in the Json result like so:</p>\n\n<pre><code>\"\\/Date(1239018869048)\\/\"\n</code></pre>\n\n<p>How should I be dealing with dates so they are returned in the format I require? Or how do I handle this format above in script?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13234203,"title":"In MVC3, how can I create a route like mydomain.com/chigago and hit that route from a GET form?","body":"<p>I have an application that shows locations on a map. I have created a route so that I can have nice hackable URLs, like <a href=\"http://www.mydomain.com/paris\" rel=\"nofollow\">http://www.mydomain.com/paris</a>. This works fine just typing in the URL, but I have a search form on the home page that sends a GET request. When the form is submitted, the URL displayed in the location bar is in the format <a href=\"http://www.mydomain.com/Dashboard?location=paris\" rel=\"nofollow\">http://www.mydomain.com/Dashboard?location=paris</a>. Normally this wouldn't matter too much as it's hitting the correct action, but I have a backbone.js application running the show and it's particular about the URL structure.</p>\n\n<p>It may be impossible to do what I need without javascript or a redirect, because the location isn't known when the form ACTION attribute is populated - but can anyone confirm?</p>\n\n<p>Here are my routes.</p>\n\n<pre><code>public static void RegisterRoutes( RouteCollection routes )\n{\n    routes.IgnoreRoute( \"{resource}.axd/{*pathInfo}\" );\n    routes.MapRoute(\n        String.Empty,\n        \"{location}\",\n        new { \n            controller = \"Dashboard\",\n            action = \"Index\",\n            id = \"\"\n        }\n    );\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new\n        {\n            controller = \"Home\",\n            action = \"Index\",\n            id = UrlParameter.Optional\n        } // Parameter defaults\n    );\n\n}\n</code></pre>\n\n<p>Here is the controller.</p>\n\n<pre><code>public class DashboardController : Controller\n{\n    [HttpGet]\n    public ViewResult Index(string location)\n    {\n        return View(new AccItemSearch { Location = location });\n    }\n}\n</code></pre>\n\n<p>Here is the form.</p>\n\n<pre><code>        @using (Html.BeginForm(\"Index\", \"Dashboard\", FormMethod.Get)) {\n                &lt;h2&gt;Where are you going?&lt;/h2&gt;\n                &lt;input type=\"text\" placeholder=\"Area, town or postcode\" id=\"location\" name=\"location\"/&gt;\n                &lt;button&gt;Search!&lt;/button&gt;\n            &lt;/div&gt;\n        }\n</code></pre>\n\n<p><strong>To clarify</strong>: the problem I want help with is how to have the user submit the form then land on a page with the URL: <a href=\"http://www.mydomain.com/searchterm\" rel=\"nofollow\">http://www.mydomain.com/searchterm</a> and thus match the route, rather than on a page that with the URL <a href=\"http://www.mydomain.com/Dashboard\" rel=\"nofollow\">http://www.mydomain.com/Dashboard</a></p>\n"},{"tags":["javascript","asp.net","css","asp.net-mvc","twitter-bootstrap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13234893,"title":"RE:What's the best way to call a modal dialog in ASP.NET MVC using Twitter Bootstrap?","body":"<p>I looked at this example to create asp.net modal forms. I just had one bug that i cannot fix if somebody could please help out.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8093633/whats-the-best-way-to-call-a-modal-dialog-in-asp-net-mvc-using-twitter-bootstra/12843281#12843281\">What&#39;s the best way to call a modal dialog in ASP.NET MVC using Twitter Bootstrap?</a></p>\n\n<p>When using two or more modal dialogs in the same page(links passing in different parameters, and getting information), only one form works, and the others don't.</p>\n\n<p>I assume this is because of the id's.</p>\n\n<p>Could anybody help me out so that I can have multiple modal forms on the same page. (but of coarse only need one displayed at a time)</p>\n"},{"tags":["c#","html","asp.net-mvc","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13234765,"title":"Set model property in Jquery","body":"<p>I am trying to set Model property <strong>Id</strong> as follows :</p>\n\n<pre><code>'&lt;%= Model.Id %&gt;' = $(\"#Id\");  \n</code></pre>\n\n<p>But getting error in firebug :  </p>\n\n<pre><code>Invalid left-hand side in assignment.\n</code></pre>\n\n<p>How to set <code>Model.Id</code> ?<br>\nPlease let me know if more is required.<br>\nThanks,<br>\nNitish</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","servicestack","service-layer"],"answer_count":1,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1204,"score":6,"question_id":10571450,"title":"Should ServiceStack be the service layer in an MVC application or should it call the service layer?","body":"<p>I'm creating an MVC website and also intend to create a web API for use both within the website and potentially by third parties.</p>\n\n<p>From the MVC controllers I'll be calling into a service layer which will contain business logic, act on domain models, perform validation, make infrastructure external service calls etc. The service layer in turn will call into repositories for any database interactions. </p>\n\n<p>Now, I like the look of <a href=\"http://www.servicestack.net/\" rel=\"nofollow\">ServiceStack</a> and intend on using it for the Web API - it seems more mature than the <a href=\"http://www.asp.net/web-api\" rel=\"nofollow\">ASP.NET MVC 4 Web API</a>. My question is, should I have the ServiceStack API call into my service layer above, similar to the MVC controllers, or should I make it the service layer, servicing both web clients and the MVC controllers? </p>\n"},{"tags":["asp.net-mvc","telerik","telerik-mvc","telerik-reporting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13083013,"title":"IPAD IOS 6 not displaying Report in Telerik Report Viewer","body":"<pre><code>We are having issues where IPAD IOS 6 not displaying Report in Telerik Report Viewer                                            \n\nWe have an MVC ASP.NET application which calls the ReportViewer.                                                                              \n\nBut Report Viewer does not display the report when the 'Preview' button is selected.                                                          \n</code></pre>\n\n<p>Can you suggest how I can display the telerik report in IPAD IOS 6.  Hint: It works in IPAD IOS lower versions than current new version.                                                                     </p>\n\n<p>Thanks in advance.      </p>\n"},{"tags":["asp.net-mvc","rest","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13226287,"title":"How to Route True CRUD RESTful API with HTTP Methods","body":"<p>I am using Asp.NET MVC 4 Controllers (not WebAPI) to implement a true RESTful API where a single URL needs to point to different action methods based on the HTTP Method Type.</p>\n\n<p>So a URL such as mysite.com/Widget/1 could go to either of these three action methods:</p>\n\n<pre><code>[HttpPut]\npublic JSONResult Update(int widgetId) {}\n\n[HttpDelete]\npublic JSONResult Delete(int widgetId) {}\n\n[HttpGet]\npublic JSONResult Get(int widgetId) {}\n</code></pre>\n\n<p>What is the best way to route the one URL to these different action methods?</p>\n\n<p>I came across the <strong>ActionName</strong> filter, which I could set to be the same for each action method. My RouteConfig class will then always point to the same ActionName, and MVC will pick the right action method based on the HTTP method type attribute. </p>\n\n<pre><code>[HttpPut]\n[ActionName(\"CRUD\")]\npublic JSONResult Update(int widgetId) {}\n\n[HttpDelete]\n[ActionName(\"CRUD\")]\npublic JSONResult Delete(int widgetId) {}\n\n[HttpGet]\n[ActionName(\"CRUD\")]\npublic JSONResult Get(int widgetId) {}\n\nroutes.MapRoute(\n       name: \"Default\",\n       url: \"{controller}/{action}/{id}\",\n       defaults: new { controller = \"Widget\", action = \"CRUD\", id = UrlParameter.Optional }\n        );\n</code></pre>\n\n<p>Is there a better way though?</p>\n"},{"tags":["c#","asp.net-mvc","relationship"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13233993,"title":"How to narrow down a list of objects, based on relationship values in MVC?","body":"<p>I have a few models in a school system. \nI can get a list of all students from the <code>Index()</code> action in the StudentsController, but I also need an action where I can filter the list of students. </p>\n\n<p>For instance, an employee needs to be able to get a list of Students that are in Group A1, at Location XY and assign products (schooltrip) to that selection of Students.</p>\n\n<pre><code>public class Student\n{\n    public int ID { get; set; }\n    public string Name { get; set; }\n\n    public int StudyId { get; set; }\n    public int GroupId { get; set; }\n    public int LocationId { get; set; }\n}\n\npublic class Study\n{\n    public int StudyId { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Student&gt; Students { get; set; }\n}\n\npublic class Group\n{\n    public int GroupId { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Student&gt; Students { get; set; }\n}\n\npublic class Location\n{\n    public int LocationId { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Student&gt; Students { get; set; }\n}\n`\n</code></pre>\n\n<p>I assume I need a View Model?</p>\n\n<pre><code>public class ProductViewModel\n{\n    public IEnumerable&lt;Student&gt; Students { get; set; }\n    public Product Product { get; set; }\n    public IEnumerable&lt;Study&gt; Studies { get; set; }\n    public IEnumerable&lt;Group&gt; Groups { get; set; }\n    public IEnumerable&lt;Location&gt; Locations { get; set; }\n}\n</code></pre>\n\n<p>And then use an action on the ProductsController with a ProductId parameter, send all the filter options to the View via the ViewModel so i can use checkboxes on each <code>List&lt;&gt;</code> to drill down to the selection of Students that match the variables?</p>\n\n<p>I just don't know how to proceed.</p>\n"},{"tags":["jquery","asp.net-mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13233849,"title":"Ajax request MVC 4.0 using c#","body":"<p>I want to return a record by ajax request</p>\n\n<p>c# code is as:</p>\n\n<pre><code>    [HttpPost]\n    public WorkoutsViewModel GetSavedWorkoutTemplate(int WorkoutId)\n    {\n        return _db.Workouts.Where(w =&gt; w.Id == WorkoutId).Select(w =&gt; new WorkoutsViewModel\n        {\n            Tag = w.Tags.FirstOrDefault(),\n            Name = w.Name,\n            MaxEffort = w.MaxEffort,\n            Id = w.Id,\n            Description = w.Description,\n            Compare = w.Compare,\n            Category = w.Category\n        }).FirstOrDefault();\n    } \n</code></pre>\n\n<p>Jquey code is as:</p>\n\n<pre><code>function GetSavedWorkoutTemplate(obj) {      \n    $(\"#Workout\").hide();\n    var WorkoutId = $(obj).val();\n    if (WorkoutId == \"\") {\n        return;\n    }\n    var dto = { \"WorkoutId\": WorkoutId };\n\n    $.ajax({\n        type: \"post\",\n        url: \"/MemberWorkout/GetSavedWorkoutTemplate\",\n        contenttype: \"application/json; charset=utf-8\",\n        data: dto,       \n        success: function (result) {\n            debugger;\n            $(\"#Workout\").show();\n        },\n        error: function (result) {\n            alert(\"Unable to update status.\");\n        }\n    });\n}\n</code></pre>\n\n<p>Html as</p>\n\n<pre><code> @Html.DropDownList(\"ddlWorkout\", new SelectList(ViewBag.ddlWorkout, \"Id\", \"Name\"), \"--Select Workout--\", new { required = true, onchange = \"GetSavedWorkoutTemplate(this);\", style = \"width:310px\" })\n</code></pre>\n\n<p>In success function I got  result as \"TheGYM.Web.Models.WorkoutsViewModel\" as a string not a model, please correct me what I am doing wrong, I want to return a model.</p>\n"}]}
{"total":44782,"page":5,"pagesize":100,"questions":[{"tags":["asp.net-mvc","html5","css3","razor","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12210193,"title":"How to work with Action Link when using CSS","body":"<pre><code>&lt;li class=\"rtsLI\" id=\"Summary\"&gt;&lt;a href=\"javascript:void(0);\" onclick=\"javascript:rtsXXX.OnClientTabSelected(this‌​, 0);\" class=\"rtsLink\"&gt;&lt;span class=\"rtsTxt\"&gt;Test&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; \n</code></pre>\n\n<p>Above I am replacing with following actionlink:</p>\n\n<pre><code>&lt;li class=\"rtsLI\" &gt;@Html.ActionLink(\"test1\", \"Index\", new { Area = \"Area1\", Controller = \"controller1\" }, new { @class = \"rtsLink rtsTxt\"})&lt;/li&gt; \"\n</code></pre>\n\n<p>At first css is working fine. But when using Actionlink, css not working. Thanks </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":161,"score":0,"question_id":12209555,"title":"How to include CSS Class in ActionLink in MVC4","body":"<p>My code is</p>\n\n<pre><code>@Html.ActionLink(\"test1\", \"Index\", new { Area = \"area1\", Controller = \"controller1\" })\n</code></pre>\n\n<p>I want to include the following css class in the action link.</p>\n\n<pre><code> class=\"rtsLink\" \n</code></pre>\n\n<p>Also, can we add multiple css class. If so, I need to add another css class.</p>\n\n<pre><code>class=\"rtsTxt\"\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>&lt;li class=\"rtsLI\" id=\"Summary\"&gt;&lt;a href=\"javascript:void(0);\" onclick=\"javascript:rtsXXX.OnClientTabSelected(this‌​, 0);\" class=\"rtsLink\"&gt;&lt;span class=\"rtsTxt\"&gt;Test&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; \n</code></pre>\n\n<p>Above I am replacing with following actionlink:</p>\n\n<pre><code>&lt;li class=\"rtsLI\" &gt;@Html.ActionLink(\"test1\", \"Index\", new { Area = \"Tools\", Controller = \"controller1\" }, new { @class = \"rtsLink rtsTxt\"})&lt;/li&gt; \"\n</code></pre>\n\n<p>At first css is working fine. But when using Actionlink, css not working. Thanks </p>\n"},{"tags":["c#","sql-server","asp.net-mvc","entity-framework","complex-data-types"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":71,"score":4,"question_id":13212338,"title":"Calling stored procedure in EF with Complex Data Type","body":"<p>I am new to working with <code>Entity Framework</code> in a sample <code>ASP.NET/MVC 3.0 VS2010</code> project. I have imported two stored procedures as Function Imports and, in doing so, created a complex data type for each.</p>\n\n<p>I am trying to run the following c# code:</p>\n\n<pre><code>public ComplexDataType RunStoredProc()\n{\n    var context = new DbEntities();\n    int param1 = 370;\n    int param2 = -1;\n    string param3 = \"Current\";\n\n    ComplexDataType result = new ComplexDataType;\n    result = context.StoredProc(param1, param2, param3);\n    return result;\n}\n</code></pre>\n\n<p>And I'm getting the error:</p>\n\n<pre><code>Cannot implicitly convert data type \n    System.Data.Objects.ObjectResult(ComplexDataType) to 'ComplexDataType'\n</code></pre>\n\n<p>What am I doing wrong? How do I properly store the results of the stored proc in a complex data type?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-config","globalization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13232243,"title":"Changing Language: globalization, culture depending on domain","body":"<p>I'm currently working on a MVC3 project where the globalization on a site is configured in the web.config. </p>\n\n<p></p>\n\n<p>I want to implement a functionality that changes the globalization to a different language depending on what domain your browsing from. So the globalization will change at run time depending on what site-address you browse from.  </p>\n\n<p>How can I acquire this functionality? </p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13231780,"title":"Passing updated row values to the action method in jqgrid","body":"<p>i'm using inline edit functionality with jqgrid, after editing i want to update my database with the changes the user made to the selected row...using the editurl im able to call a action method in my controller...i want to pass the row values to the controller, after making teh changes when the user clicks the enter button on the keyboard, i want to pass the updated values to the action method  i.e being called in the editurl..</p>\n\n<p>this is my jquery</p>\n\n<pre><code>     &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var lastsel;\n\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID', sortable: false, key: true },\n      { name: 'FirstName', key: true },\n      { name: 'LastName', sortable: false, key: true },\n      { name: 'Email', width: 200, sortable: false, key: true}],\n            cmTemplate: { align: 'center', editable: true },\n            pager: '#pager',\n            width: 750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid',\n            onSelectRow: function (StudentID) {\n\n\n                if (StudentID != lastsel) {\n\n\n                    jQuery('#list').jqGrid('restoreRow', lastsel);\n                    jQuery('#list').jqGrid('editRow', StudentID, true);\n\n                    lastsel = StudentID;\n\n                }\n\n            },\n\n            editurl: '/Home/About/',\n            caption: \"Using events example\"\n\n        });\n\n        jQuery(\"#list\").jqGrid('navGrid', \"#pager\", { edit: false, add: false, del: false });\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>so after passing the new values of the row to the action method, im sending those values from my controller to my model and updating using stored procedure..</p>\n\n<p>so here i would like to know how can i get the new updated values and pass them to my controller..??</p>\n"},{"tags":["c#",".net","sql","asp.net-mvc","asp.net-membership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13224405,"title":"Update custom user profile fields with SimpleMembershipProvider?","body":"<p>I added a custom field to the <code>UserProfile</code> table named <code>ClassOfYear</code> and I'm able to get the data into the profile during registration like this:</p>\n\n<pre><code>var confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName,\n    model.Password,\n    propertyValues: new { ClassOfYear = model.ClassOfYear },\n    requireConfirmationToken: true);\n</code></pre>\n\n<p>However, now I want to be able to update the profile when I manage it but I can't seem to find a method to do so. <strong>Do I need to simply update the <code>UserProfile</code> table myself? If not, what is the appropriate way of doing this?</strong></p>\n\n<p>FYI, I'm using Dapper as my data access layer, just in case it matters. But, like stated, I can just update the <code>UserProfile</code> table via Dapper if that's what I'm supposed to do, I just figured that the <code>WebSecurity</code> class, or something similar, had a way already since the custom user profile fields are integrated with the <code>CreateUserAndAccount</code> method.</p>\n\n<p>Thanks all!</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1982,"score":0,"question_id":5363907,"title":"Library Package Manager does not appear","body":"<p>I installed ASP MVC 3, but when I go to tools I can't see the Library Package Manager, it was supposed to install along ASP MVC 3, how come I cannot see it?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":52,"score":-6,"question_id":13231407,"title":"declaring List of 2d array for point in C#","body":"<p>What I needed is a List of 2d array of type int and double. So that i can append Cartesian points.</p>\n\n<pre><code>List&lt;System.Drawing.Point debitpointList = new List&lt;System.Drawing.Point&gt;();\nforeach (KeyValuePair&lt;int, double&gt; pair in debit.Reverse())\n{\n    debitpointList.Add(pair.value);\n}\n</code></pre>\n\n<p>This piece of code is not working. How can I fix it?</p>\n"},{"tags":["c#","asp.net-mvc","nhibernate","jtable"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13156103,"title":"JTable event Update - show error","body":"<p>I would like to show error in jtabele standard event (for example alert()) but I don`t know what I have to do. Code is working correct. The most important place is if(UpdateOrNot==1){} </p>\n\n<pre><code>public void OnUpdated(DictionaryListModel dictionaryListModel)\n        {\n            var listModel = (DictionarySkillListModel)dictionaryListModel;\n            if (dictionaryListModel == null)\n                throw new Exception(\"Niepoprawny model\");\n\n            int UpdateOrNot=0;\n            try\n            {\n            if (listModel.IsActiveYN == false)\n            {\n                var list =\n                    _skillService.CheckSkillProcedur(listModel.Id, listModel.Description).ToList();\n                foreach (var procSkillValue in list)\n                {\n                    UpdateOrNot = procSkillValue.ExistOrNotExist;\n                }\n                if(UpdateOrNot==1)\n                {\n                  //here I would like to past my alert\n                }\n                else\n                {\n                    var skill = _skillService.Get(listModel.Id);\n                    skill.Name = listModel.Description;\n                    skill.IsActive = listModel.IsActiveYN;\n                    _skillService.Update(skill);\n                }   \n            }\n            }\n            catch (Exception ex)\n            {}\n\n        }\n</code></pre>\n"},{"tags":["java","asp.net-mvc","applet"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13231740,"title":"Java Applet File Upload Session","body":"<p>I have java applet which runs inside the page that has asp.net MVC project. i'll be passing params from asp.net to applet using  tag\nfunction of applet is to search automatically the client side files and do some file processing and list in the jtable. it works absolutely fine when i run the applet in page and open it in a one tab or one window. </p>\n\n<p>issue happens when i run the same applet page in a multiple tabs or multiple windows under the same session. what happens is during file upload it picks value from jtable it is clearing value from all the jtable from different windows / tabs though i was uploading files from one tab / window.</p>\n\n<p>please let me know if you have any ways to fix the same issue.</p>\n"},{"tags":["c#","asp.net-mvc","federated-identity","adfs2.0","sts-securitytokenservice"],"answer_count":4,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":2612,"score":11,"question_id":4460720,"title":"Error - A SignInResponse message may only redirect within the current web application - MVC 2.0 application","body":"<p>I have a situation where we have a MVC 2 application(I tried this with a basic MVC 2 app without any extra stuff, still same problem) and am using adfs 2 for authenticating my users.</p>\n\n<p>So..\nNow I get into my application and I get the below..\n<strong><em>ID3206: A SignInResponse message may only redirect within the current web application: '/[app]' is not allowed. \nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \nException Details: Microsoft.IdentityModel.Protocols.FederationException: ID3206: A SignInResponse message may only redirect within the current web application: '/[app]' is not allowed.</em></strong></p>\n\n<p>I have read most blogs on this, and posted to one..</p>\n\n<pre><code>    &lt;federatedAuthentication&gt;\n            &lt;wsFederation passiveRedirectEnabled=\"true\" issuer=\"https://auth.[domain]/adfs/ls/\" realm=\"https://[development domain]/[app]/\" requireHttps=\"true\" /&gt;\n            &lt;cookieHandler requireSsl=\"true\" /&gt;\n          &lt;/federatedAuthentication&gt;\n&lt;audienceUris&gt;\n    &lt;add value=\"https://[development domain]/[app]/\" /&gt;\n  &lt;/audienceUris&gt;\n</code></pre>\n\n<ol>\n<li>I have the trailing slash on the realm and audienceUris. </li>\n<li>I have added what he suggested to Application_BeginRequest – I then copied code to [development domain] as that’s where the certs are.. It just gets stuck in an infinite loop then.</li>\n<li>I also have checked my Relying Party on the Geneva server.. The Identifiers and Endpoints(POST) are both https://[development domain]/[app]/ - again with the trailing slash</li>\n</ol>\n\n<p>I think it’s a problem with the fact it’s a MVC application, I have created numerous Claims Aware website and got my claims etc on the default.aspx page. My thinking is that the routing that is involved with the MVC app is somehow posting it back wrong?</p>\n\n<p>any help really apprecaited as Im looking at this for quiet a while now to no avail..</p>\n\n<p>J</p>\n"},{"tags":["jquery","asp.net-mvc","json"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":744,"score":4,"question_id":1471066,"title":"Partial Views vs. Json (or both)","body":"<p>I use ASP.NET MVC with jQuery and have a lot of Ajax requests to my controllers.</p>\n\n<p>Use Partial Views (usercontrols) to build the intial view when a page is loaded. Then if I need to append/replace data based on my Ajax request I build HTML from the Json response.</p>\n\n<p>This approach gives me full control, ie. I can get extra information back from my controller if something went wrong, and then show an error message based on that.</p>\n\n<p>However, recently I've been really annoyed with all the extra work that goes into maintaining HTML structure both in my partial views and the part that generates HTML from Json.</p>\n\n<p>I like to make a jQuery ajax request and then have the controller return PartialView(\"mypartialview\") and then just use jQuery to replace to HTML in the view.</p>\n\n<p>However, this way I cannot attach extra data from the controller - it's either whatever the partial view gives me - or nothing. At least that's my current take on it.</p>\n\n<p>If some validation goes wrong at some point in my controller action I don't want to return the HTML of the partial view.</p>\n\n<p>So how do you go about handling this issue?</p>\n\n<p>Thanks for reading.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13231150,"title":"Asp.net mvc Postback and viewstate","body":"<p>I am beginner to asp.net mvc. so i am in the process of learning mvc.. i have few queried</p>\n\n<p>1)i saw in many websites like asp.net mvc will not support viewstate,servercontrols and postbacks</p>\n\n<p>but when i tried some thing like this in View, postback happened and when i check on pagesource i can see viewstate also</p>\n\n<pre><code>&lt;form runat=server&gt;\n&lt;div&gt;\n    &lt;asp:TextBox runat=server ID=\"TextBox1\"   Text=\"hello\"  EnableViewState=true  &gt;&lt;/asp:TextBox&gt;\n    &lt;asp:Button runat=\"server\" Text=\"Hit me\"  ID=\"Button1\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Corresponding View state\n <code>&lt;input type=\"hidden\" name=\"__VIEWSTATE\" id=\"__VIEWSTATE\" value=\"/wEPDwUJMjgzMDgzOTgzZGQZdCtl6SPLjo4DxyEyHMQ5ERvWAmS3qO6HaMtUszCjjA==\" /&gt;</code></p>\n\n<p>I know we should prefer only html controls but what's the case when i am using server control..the framework is accepting </p>\n\n<p>pls help me in this.. and i will also be happy if anyone sharing some good links for understanding why asp.net mvc (not asp.net) with examples</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13221104,"title":"find time in hour from two datetime in asp.net mvc using linq","body":"<p>I m working on timesheet module.What my problem is i have table with following fields</p>\n\n<pre><code>work_start_time  Datetime\nwork_end_time    Datetime\nand other field\n</code></pre>\n\n<p>now my requirement is i have to calculate total hour submitted till date.</p>\n\n<p>field are save like this format <code>dd/mm/yy 10:00 AM</code></p>\n\n<p>please anybody help me how to find total hour from above two field and sum total hour using LINQ.</p>\n\n<p>any help would be appreciated. </p>\n\n<pre><code>int totalhours = (from d in db.timesheetWorkingHours\n                             .Where(d=&gt;d.WStartTime.HasValue &amp;&amp; d.WEndTime.HasValue)\n                             select (d.WStartTime - d.WEndTime).Hours).FirstOrDefault();\n\nits gives error \n\n'System.Nullable&lt;System.TimeSpan&gt;' does not contain a definition for 'Hours' and no extension method 'Hours' accepting a first argument of type 'System.Nullable&lt;System.TimeSpan&gt;' could be found (are you missing a using directive or an assembly reference?) \n</code></pre>\n"},{"tags":["asp.net-mvc","jquery-mobile","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13228514,"title":"Tutorial or book about MVC 4 and jQuery","body":"<p>I have been looking for many days now for an advanced tutorial or book on integrating MVC 4 and jQuery Mobile(Visual studio 2012). I am into building \"mobile-only\" sites (not desktop sites which are also mobile friendly but mobile-only sites from the ground). </p>\n\n<p>Most of the tutorials and books I have found talk about Asp.net MVC4 in general and devote only one or 2 chapters on mobile-only new features in MVC 4 (basically they just mention new project template \"Mobile Application\" in the Visual Studio 2012 but they don't got in-depth about integrating jQuery mobile and MVC 4). </p>\n\n<p>Other tutorials just explain the \"basics\" of mvc 4 and jquery mobile ( hello-world-like tutorials). I'm looking for something more advanced and professional tutorial or book mainly devoted on <strong>mvc 4</strong> *<em>and</em>* <strong>jquery mobile</strong> for mobile-only sites where one can more efficiently learn to use the power of the 2 worlds: mvc 4 and jquery mobile</p>\n\n<p>Thank you very much for your time and your suggestions.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","membership-provider","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13172033,"title":"How to autoCreateTables along with SimpleMembership tables in ASP.NET MVC","body":"<p>Today, I created a new ASP.NET MVC 4 project - Internet application.</p>\n\n<p>With all the files that comes in the solution in the Account Controller I saw an attribute called <code>[InitializeSimpleMembership]</code></p>\n\n<pre><code>[Authorize]\n[InitializeSimpleMembership]\npublic class AccountController : Controller\n{}\n</code></pre>\n\n<p>and by only providing a proper db connectionstring property in the web.config</p>\n\n<pre><code>&lt;connectionStrings&gt;\n&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.;\nInitial Catalog=demo;\nUser ID=test;Password=test;\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>and when the application runs, it checks if the available database exists or not and if not creates one and adds few memebership tables to it also. I must say I was very very impressed with the new MVC 4 - Internet app template.</p>\n\n<p><strong>Which brings me to my question :</strong>\nI liked the idea of creating database and executing script from the application. I wanted to know how to add more tables to this.</p>\n\n<p>For example : In the <code>InitializeSimpleMembershipAttribute.cs</code> file it check if a database is present, if not it creates it using the credentials present in the web.config and also adds the following tables to it.</p>\n\n<ul>\n<li>UserProfile</li>\n<li>webpages_Membership</li>\n<li>webpages_OAuthMembership</li>\n<li>webpages_Roles</li>\n<li>webpages_UsersInRoles</li>\n</ul>\n\n<p><strong>what changes do I have to make to have my other tables to be added along with this ?</strong></p>\n\n<p>If this is possible, the idea of keeping sql scripts and executing them on each clean deploy can be avoided. I am working on a self-host MVC app ( It's Open-source, soon to come on Codeplex ;) ) so this will really be good for people who want to use my app without getting their hands dirty in SQL scripts.</p>\n\n<p>Please can some one let me know if this is even possible. Thanks</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13228681,"title":"ASP .NET MVC - Getting object template string result out of a view","body":"<p>I am re-opening my question as it has been set as duplicate while it is not - or people who tagged it as duplicate should explain me why it is a duplicate..........\n<a href=\"http://stackoverflow.com/questions/13227988/html-displayfor-result\">Html.DisplayFor() result</a></p>\n\n<p>How can I get the result of the method Html.DisplayFor() in a C# Class, like in a View model or even in a Controller ? And not in the View Aspx or Razor.</p>\n\n<p>[Edit]\nIn fact I have a table to display and depending on the number of record I use a Telerik table or a simple HTLM table.</p>\n\n<p>For the moment I have a function in my view to get the string to display for each column so I use the same format for both tables.</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;ViewModels.OrderViewModel&gt;\" %&gt;\n\n&lt;script runat=\"server\" type=\"text/C#\"&gt;\n\npublic string GetCellValue (String columnName, Order order)\n{\n        string value = \"\";\n        switch (columnName)\n        {\n            case \"Ref\":\n                value = order.order.Reference.ToString(); break;\n            case \"Etc\":\n                value = Html.DisplayFor(p =&gt; order.order.Etc).ToHtmlString();break;             \n            case \"Payment date\": \n                foreach (Executions ex in order.executions)\n                {\n                    value += ex.Date.Date.ToString(\"yyyy-MM-dd\") + \" \";\n                }\n                break;      \n</code></pre>\n\n<p>I want to move this function out of my view in the ViewModel for example, but I do not know how I can call the function Html.DisplayFor() out of a view.</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13229244,"title":"how to update changes made to jqgrid using inline edit?","body":"<p>how can we update the changes made to a cells of a particular row in the jqgrid....i want to update it to the database...im using inline edit for editing..i want to update that particular row to database where the usermade changes</p>\n\n<p>this is my jquery code</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var lastsel;\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID',sortable: false,key:true },\n      { name: 'FirstName' },\n      { name: 'LastName', sortable: false},\n      { name: 'Email', width: 200,  sortable: false}],\n      cmTemplate: {align: 'center', editable: true},\n            pager: '#pager',\n            width: 750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid',\n            onSelectRow: function (StudentID) {\n\n\n                if (StudentID != lastsel) {\n\n\n                    jQuery('#list').jqGrid('restoreRow', lastsel);\n                    jQuery('#list').jqGrid('editRow', StudentID, true);\n\n                    lastsel = StudentID;   \n                }\n\n            },\n\n            editurl: '/Home/About/',\n            caption: \"Using events example\"\n\n        });\n        jQuery(\"#list\").jqGrid('navGrid', \"#pager\", { edit: false, add: false, del: false });\n    });\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","wpf","asp.net-mvc","webmatrix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13161841,"title":"Using WebMatrix.WebData.WebSecurity in a WPF application","body":"<p>I have an MVC4 internet project that uses the out of the box WebMatrix security. A requirement has come along to add a WPF front end to the same application. I have moved the model into a separate DLL and started building the WPF front end over the same entities.</p>\n\n<p>The only issue I am having is trying to integrate with the existing security model. I have added a system.web section into my WPF project's app.config as follows:</p>\n\n<pre><code>&lt;system.web&gt;\n  &lt;membership defaultProvider=\"SimpleMembershipProvider\"&gt;\n    &lt;providers&gt;\n      &lt;clear/&gt;\n      &lt;add name=\"SimpleMembershipProvider\" type=\"WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData\" /&gt;\n    &lt;/providers&gt;\n  &lt;/membership&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p>Now when I call <code>WebSecurity.Login(\"Username\", \"Password\")</code> I get the following error:</p>\n\n<blockquote>\n  <p>You must call the \"WebSecurity.InitializeDatabaseConnection\" method before you call any other method of the \"WebSecurity\" class. This call should be placed in an _AppStart.cshtml file in the root of your site.</p>\n</blockquote>\n\n<p>I have tried calling the <code>InitializeSimpleMembershipAttribute();</code> code that comes with the MVC project in the start-up of my WPF application, but it makes no difference to the above error. </p>\n\n<p>I cannot find any examples on-line of how to do this, am going down a dead end here? </p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc","dataannotations"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13221937,"title":"ASP.NET MVC add validators for dictionary property","body":"<p>I think it's a common question, but I haven't found any working solution yet. So, the model looks like this:</p>\n\n<pre><code>public class CustomMaterial\n{\n    ...\n    public Dictionary&lt;String, String&gt; Properties { get; set; }\n    ...\n}\n</code></pre>\n\n<p>Properties is fetched from database, Key - property name, Value - value represented as string. I want to add validators (ex. RequiredAttribute) for each item in the dictionary without using DataAnnotations attributes and/or specific model binders. How I can provide this ? Maybe the item.Value should be an Object, which can store validator instance and value, but how ?</p>\n\n<p>*<strong>[UPDATE]</strong></p>\n\n<p>I found the solution - you should inherit your type from IValidatableObject and should store your IValidatableObject object as value in the dictionary.</p>\n"},{"tags":["javascript","asp.net-mvc","internet-explorer-10"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":96,"score":7,"question_id":13218759,"title":"Javascript executing MVC code in If statement incorrectly","body":"<p>I am a bit stumped with the following code.  It worked fine in VS2010 on Windows 7, and now that I've upgraded the hardware to Windows 8 and VS 2012, it does not.</p>\n\n<p>I have the following JavaScript code in my MVC application:</p>\n\n<pre><code>&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\nvar today;\n\nif(\"@Model.Birthday.HasValue\"){\n    var today = new Date(\"@Model.Birthday.Value.Year\", \"@Model.Birthday.Value.Month\" - 1, \"@Model.Birthday.Value.Day\");\n}else{\n    today = new Date();\n}\n</code></pre>\n\n<p>The Model is pulling from a ViewModel that has a property that looks like this:</p>\n\n<pre><code>    public System.DateTime? Birthday\n    {\n        get { return user.Birthday; }\n        set { user.Birthday = value; }\n    }\n</code></pre>\n\n<p>The exception is thrown in the line:</p>\n\n<pre><code>var today = new Date(\"@Model.Birthday.Value.Year\", \"@Model.Birthday.Value.Month\" - 1, \"@Model.Birthday.Value.Day\");\n</code></pre>\n\n<p>It comes back with \"Nullable object must have value\", which it should if it jumps in that line to execute.  But, my if statement is returning false.  If I remove the line and just put in an alert statement, it never executes that line or shows the alert, because the Birthday property is null.  Something seems to have shifted in how JS executes MVC code, and it seems to evaluate the entirety of the code block, regardless of the if statement.  I've also tried the following, but to no avail:</p>\n\n<ul>\n<li>Tested in Chrome for W8</li>\n<li>Tested in a try / catch block.  Interestingly, it doesn't catch the exception (I guess JS won't catch .NET exceptions)</li>\n<li>Tested by explicitly stating @Model.Birthday.HasValue == true</li>\n<li>Tested by changing it to @Model.Birthday.Value != null</li>\n<li>Tested in Release mode over Debug Mode</li>\n</ul>\n\n<p>This should be simple - test to see if a value is null, and if it's not, create a JS Date object from the .NET property, if it is, create a new JS Date object, but for some reason, it want's to evaluate and execute that line, even though HasValue is false.</p>\n\n<p>Really stumped.  Has anyone seen something like this?</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","ajax","json"],"answer_count":28,"favorite_count":179,"up_vote_count":544,"down_vote_count":1,"view_count":158738,"score":543,"question_id":206384,"title":"How to format a JSON date?","body":"<p>I'm taking my first crack at Ajax with jQuery. I'm getting my data onto my page, but I'm having some trouble with the JSON data that is returned for Date data types. Basically, I'm getting a string back that looks like this:</p>\n\n<pre><code>/Date(1224043200000)/\n</code></pre>\n\n<p>From someone totally new to JSON - How do I format this to a short date format? Should this be handled somewhere in the jQuery code? I've tried the <code>jQuery.UI.datepicker</code> plugin using <code>$.datepicker.formatDate()</code> without any success.</p>\n\n<p>FYI: Here's the solution I came up with using a combination of the answers here:</p>\n\n<pre><code>function getMismatch(id) {\n  $.getJSON(\"Main.aspx?Callback=GetMismatch\", \n    { MismatchId: id },\n\n    function (result) {\n      $(\"#AuthMerchId\").text(result.AuthorizationMerchantId);\n      $(\"#SttlMerchId\").text(result.SettlementMerchantId);\n      $(\"#CreateDate\").text(formatJSONDate(Date(result.AppendDts)));\n      $(\"#ExpireDate\").text(formatJSONDate(Date(result.ExpiresDts)));\n      $(\"#LastUpdate\").text(formatJSONDate(Date(result.LastUpdateDts)));\n      $(\"#LastUpdatedBy\").text(result.LastUpdateNt);\n      $(\"#ProcessIn\").text(result.ProcessIn);\n    }\n  );\n\n  return false;\n}\n\nfunction formatJSONDate(jsonDate) {\n  var newDate = dateFormat(jsonDate, \"mm/dd/yyyy\");\n  return newDate;\n}\n</code></pre>\n\n<p>This solution got my object from the callback method and displayed the dates on the page properly using the date format library.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":58,"score":-4,"question_id":13227988,"title":"Html.DisplayFor() result","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6365633/what-is-the-html-displayfor-syntax-for\">What is the @Html.DisplayFor syntax for?</a>  </p>\n</blockquote>\n\n\n\n<p>Is it possible to get the result of the function Html.DisplayFor() out of a view, for example in a View Model ?</p>\n\n<p>Thank you for your answers.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","knockout-2.0"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13227936,"title":"using Knockoutjs with MVC Display and Editor templates","body":"<p>I would like my project less depended on external libraries. just in case I considered switching to different library in the future. </p>\n\n<p>for simplicity, consider a different design scenario for the shopping cart editor <a href=\"http://knockoutjs.com/examples/cartEditor.html\" rel=\"nofollow\">example</a>.</p>\n\n<p>each item in the cart will have a server-side model.  the model will have 2 templates .one for displaying and the other for editing (razor templates in DisplayTemplates and EditorTemplates folders).</p>\n\n<p>for displaying items, I would like to use the model display template (DisplayForModel or Html.RenderPartial)\nfor editable items, I would use the editor template for the model. </p>\n\n<p>knockout will only be there to observe changes in client-side. (such as unit price, quanity, discount ..etc) and computing sub totals and grand total.</p>\n\n<p>would that be possible or shall i simply cosider another library?</p>\n"},{"tags":["asp.net-mvc","html5"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13224473,"title":"HTML5 with ASP.NET MVC","body":"<p>We are plannig a new project and we want to use ASP.NET in conjunction with the MVC pattern. We want also have acces to new features includes in HTML5. But we do not found  many information or people going in the same direction.</p>\n\n<p>Is there some kind of contradiction with ASP.NET MVC with HTML5 or the subject is so trivial that just a few people are talking about it ?</p>\n\n<p>(Question reformulated)</p>\n"},{"tags":["c#","asp.net-mvc","authentication","entity-framework-4","membership-provider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":171,"score":0,"question_id":13207893,"title":".net MVC Simple Membership Authentication with Database","body":"<p>Using Code First Entity Framework with .NET MVC 4 I have created a new Web Application and populated the database with object as shown below.</p>\n\n<pre><code> public class GratifyGamingContext : DbContext\n{\n    public DbSet&lt;Game&gt; Games { get; set; }\n    public DbSet&lt;Genre&gt; Genres { get; set; }\n    public DbSet&lt;UserProfile&gt; UserRepository { get; set; }\n}\n</code></pre>\n\n<p>I want to use my UserRepository table instead of the inbuilt UserContext class from AccountModel.cs for my user account access since I can't get that the work with my existing dbContext.</p>\n\n<pre><code>    public class UsersContext : DbContext\n{\n    public UsersContext()\n        : base(\"DefaultConnection\")\n    {\n    }\n\n    public DbSet&lt;UserProfile&gt; UserProfiles { get; set; }\n}\n\n[Table(\"UserProfile\")]\npublic class UserProfile\n{\n    [Key]\n    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]\n    public int UserId { get; set; }\n    public string UserName { get; set; }\n}\n</code></pre>\n\n<p>My program always crashes when constructing a SimpleMembershipInitializer object from InitializeSimpleMembershipAttribute.cs. I have commented out the code I feel should be irrelevant.</p>\n\n<pre><code>    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute\n{\n    private static SimpleMembershipInitializer _initializer;\n    private static object _initializerLock = new object();\n    private static bool _isInitialized;\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        // Ensure ASP.NET Simple Membership is initialized only once per app start\n        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);\n    }\n\n    private class SimpleMembershipInitializer\n    {\n        public SimpleMembershipInitializer()\n        {\n            //Database.SetInitializer&lt;UsersContext&gt;(null);\n\n            try\n            {\n                using (var context = new GratifyGamingContext())\n                {\n                    if (!context.Database.Exists())\n                    {\n                        // Create the SimpleMembership database without Entity Framework migration schema\n                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();\n                    }\n                }\n\n                WebSecurity.InitializeDatabaseConnection(\"DefaultConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n            }\n            catch (Exception ex)\n            {\n                throw new InvalidOperationException(\"The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588\", ex);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>My ConnectionString is as follows:</p>\n\n<pre><code>&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=aspnet-GratifyGaming-20120917185558;AttachDbFilename=|DataDirectory|\\Games.mdf;Integrated Security=True\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>I get the following error when calling the WebSecurity.InitializeDatabaseConnect from any AccountController page:</p>\n\n<blockquote>\n  <p>[SqlException (0x80131904): Directory lookup for the file\n  \"C:\\Users\\Unreal\\Documents\\Visual Studio\n  2010\\Projects\\GratifyGaming\\GratifyGaming.WebUI\\App_Data\\Games.mdf\"\n  failed with the operating system error 2(failed to retrieve text for\n  this error. Reason: 15105). Cannot attach the file\n  'C:\\Users\\Unreal\\Documents\\Visual Studio\n  2010\\Projects\\GratifyGaming\\GratifyGaming.WebUI\\App_Data\\Games.mdf' as\n  database 'aspnet-GratifyGaming-20120917185558'.]</p>\n  \n  <p>[TargetInvocationException: Exception has been thrown by the target of\n  an invocation.]    System.RuntimeTypeHandle.CreateInstance(RuntimeType\n  type, Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0</p>\n</blockquote>\n\n<p>My application is otherwise connected to the database if I do not go to any AccountController driven page.\nHow can I configure this application to use my UserRepository table instead of the UsersContext for user membership?</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13194600,"title":"jQgrid inline edit functionality","body":"<p>I want to to assign inline edit feature to my jqgrid, i.e when the cuser clicks a particular row, he should be able to edit..</p>\n\n<p>im following this url for the jqeury code but its not working, im not able get edit also</p>\n\n<p><a href=\"http://www.trirand.com/blog/jqgrid/jqgrid.html#\" rel=\"nofollow\">http://www.trirand.com/blog/jqgrid/jqgrid.html#</a></p>\n\n<p>this is my view</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table id=\"list\"&gt;&lt;/table&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>JavaScript code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var lastsel;\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID',sortable: false,key:true },\n      { name: 'FirstName' },\n      { name: 'LastName', sortable: false},\n      { name: 'Email', width: 200,  sortable: false}],\n      cmTemplate: {align: 'center', editable: true},\n            pager: '#pager',\n            width: 750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid',\n            onSelectRow: function (StudentID) {\n\n\n                if (StudentID != lastsel) {\n\n                    lastsel = StudentID;   \n                    jQuery('#list').jqGrid('restoreRow', lastsel);\n                    jQuery('#list').jqGrid('editRow', StudentID, true);\n\n\n                }\n\n            },\n\n            editurl: '/Home/GetStudents/',\n            caption: \"Using events example\"\n\n        });\n        jQuery(\"#list\").jqGrid('navGrid', \"#pager\", { edit: false, add: false, del: false });\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>these are my scripts, i added</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;link href=\"/Content/jquery-ui-1.8.7.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/ui.jqgrid.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/ui.multiselect.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"/Scripts/jquery-1.4.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;  \n&lt;script src=\"/Scripts/grid.locale-en.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/jquery.jqGrid.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/rowedex3.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13224836,"title":"Datepicker - no reaction","body":"<p>I'm trying to add datapicker to my project. I have followed a tutorial.</p>\n\n<p>I have added the following code to the DatePickerReady.js file:</p>\n\n<pre><code>$(function () {\n    $(\".datefield\").datepicker(); \n});\n</code></pre>\n\n<p>I have added the following code at bottom of the head element in the Views\\Shared_Layout.cshtml file.</p>\n\n<pre><code>&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.core.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.datepicker.css\")\" rel=\"stylesheet\"  type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.theme.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.ui.core.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.ui.datepicker.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/DatePickerReady.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have added this to Views\\Home\\Index.cshtml</p>\n\n<pre><code>@model Nullable&lt;DateTime&gt;\n\n @{\n    string dts =\"\";\n    if (Model != null)\n    {\n        dts = ((DateTime)Model).ToShortDateString();\n\n    }\n    @Html.TextBox(\"start\", String.Format(\"{0:d}\", dts), new { @class = \"datefield\", type = \"date\"  })\n} \n</code></pre>\n\n<p>But when I focus/click the textbox it does nothing. The calendar doesn't appear. I'm not  getting any errors as well.</p>\n\n<p>Any clue?</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui","jquery-ui-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13225156,"title":"Jquery dialog isn't working in MVC","body":"<p>Now I know it's been asked before but I can't seem to get JQUERY dialog to work.</p>\n\n<p>I have an easy example that I got from the JQUERY website but the dialog never pops up.</p>\n\n<p>My _Layout.cshtml page</p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\"&gt;\n        &lt;head&gt;\n            &lt;meta charset=\"utf-8\" /&gt;\n            &lt;title&gt;@ViewBag.Title - My ASP.NET MVC Application&lt;/title&gt;\n            &lt;link href=\"~/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\" /&gt;\n            &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n            &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n            &lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui-1.8.20.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.all.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n            @Styles.Render(\"~/Content/css\")\n            @Scripts.Render(\"~/bundles/modernizr\")\n        &lt;/head&gt;\n        &lt;body&gt;\n            &lt;header&gt;\n                &lt;div class=\"content-wrapper\"&gt;\n                    &lt;div class=\"float-left\"&gt;\n                        &lt;p class=\"site-title\"&gt;@Html.ActionLink(\"your logo here\", \"Index\", \"Home\")&lt;/p&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"float-right\"&gt;\n                        &lt;section id=\"login\"&gt;\n                            @Html.Partial(\"_LoginPartial\")\n                        &lt;/section&gt;\n                        &lt;nav&gt;\n                            &lt;ul id=\"menu\"&gt;\n                                &lt;li&gt;@Html.ActionLink(\"Home\", \"Index\", \"Home\")&lt;/li&gt;\n                                &lt;li&gt;@Html.ActionLink(\"About\", \"About\", \"Home\")&lt;/li&gt;\n                                &lt;li&gt;@Html.ActionLink(\"Contact\", \"Contact\", \"Home\")&lt;/li&gt;\n                            &lt;/ul&gt;\n                        &lt;/nav&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/header&gt;\n            &lt;div id=\"body\"&gt;\n                @RenderSection(\"featured\", required: false)\n                &lt;section class=\"content-wrapper main-content clear-fix\"&gt;\n                    @RenderBody()\n                &lt;/section&gt;\n            &lt;/div&gt;\n            &lt;footer&gt;\n                &lt;div class=\"content-wrapper\"&gt;\n                    &lt;div class=\"float-left\"&gt;\n                        &lt;p&gt;&amp;copy; @DateTime.Now.Year - My ASP.NET MVC Application&lt;/p&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/footer&gt;\n\n            @Scripts.Render(\"~/bundles/jquery\")\n            @RenderSection(\"scripts\", required: false)\n        &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>My Index.cshtml page</p>\n\n<pre><code>    &lt;div id=\"dialog\" title=\"Basic dialog\"&gt;\n        &lt;p&gt;This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.&lt;/p&gt;\n    &lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO\");\n    });\n&lt;/script&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n        $(function () {\n            $(\"#dialog\").dialog();\n        });\n    &lt;/script&gt;\n</code></pre>\n\n<p>The alert pops up but the dialog doesn't, any idea why?</p>\n\n<p>EDIT: Did some editing and now I have this.</p>\n\n<pre><code>&lt;div id=\"dialog\" title=\"Basic dialog\"&gt;\n    &lt;p&gt;This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO\");\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO2\");\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $(\"#dialog\").dialog();\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO3\");\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Now when I have three alerts, it will alert HELLO and HELLO2 but it never does HELLO3.. however if I put the HELLO3 script above the dialog script it will display all 3 alerts. Any ideas what is going on?</p>\n"},{"tags":["android","asp.net-mvc","long-polling"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":134,"score":5,"question_id":13079145,"title":"Understanding long polling: client (android) and server (asp net)","body":"<p>I'm developing android application where users can compete in some kind of battles. On the server side I need to receive requests from user for starting a battle, and then, using some algorithm, choose the most preferable opponent for him. During a battle I also need to send notifications to competitors about their opponent's actions.</p>\n\n<p>So it seems that I need to implement long polling on my server. My questions are:</p>\n\n<ol>\n<li><p><strong>Server side</strong>. I'm using asp.net mvc server. I had a look at <a href=\"https://github.com/SignalR/SignalR\">SignalR</a> framework and it seems to be just what I need. However, just because I'm new to long polling, I haven't understood its internal principles of work. So I need explanations on how to use this framework, or how to implement long polling some other way.</p></li>\n<li><p><strong>Client side.</strong> As far as I understood, long polling requests model slightly differs from standard \"request-response\" model, so I'm also wondering how to implement these requests on client side.</p></li>\n</ol>\n\n<p>I'm looking forward to any explanations on subjects that I've described.</p>\n"},{"tags":["asp.net-mvc","distributed-transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13224427,"title":"Linked Servers and Distributed Transactions in ASP.NET MVC3","body":"<p>I am having trouble executing a function import of a stored procedure that references a linked server.\n<strong>The Problem</strong></p>\n\n<p>The operation could not be performed because OLE DB provider \"SQLNCLI10\" for linked server ... was unable to begin a distributed transaction.</p>\n\n<p><strong>What I have done so far</strong></p>\n\n<p>I have been able to execute this stored procedure in SSMS and in a Classic ASP web application. It seems to only be a problem when running the stored procedure from the MVC application. I have tried running SSMS as the user specified in the Web.Config of the MVC application, and the connection strings for the classic ASP website and the MVC application are pretty much identical</p>\n\n<p><strong>The Question</strong></p>\n\n<p>Is there anything in particular that I need to do in order to enable Distributed Transactions in mvc3/entity framework?</p>\n"},{"tags":["asp.net","asp.net-mvc","code-generation","templating","razor"],"answer_count":3,"favorite_count":13,"up_vote_count":28,"down_vote_count":0,"view_count":5397,"score":28,"question_id":3628895,"title":"Is it possible to use Razor View Engine outside asp.net","body":"<p>If I look at the Razor View Engine, then I see a very nice and concise syntax that is not particularly tied to generating html.  So I wonder, how easy would it be to use the engine outside asp.net in a \"normal\" .net environment for example to generate text, code,...</p>\n\n<p>Any pointer, example, comment or explanation is welcome.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":6,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":6851,"score":10,"question_id":4808348,"title":"Using Razor without MVC","body":"<p>I need to merge templates with data to create unique strings at runtime. It was suggested that I look at the <a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx\">Razor</a> templating view engine that comes in ASP.NET MVC 3. Looks great, but I need to use it outside of MVC view creation.</p>\n\n<p>I know I can use the core Razor engine directly, but I've also found a couple of projects that make using Razor directly easier. Like:</p>\n\n<ol>\n<li>Rick Strahl's Razor Hosting Template\nEngine-\n<a href=\"http://www.west-wind.com/weblog/posts/864461.aspx\">http://www.west-wind.com/weblog/posts/864461.aspx</a></li>\n<li>Razor Engine on Codeplex - <a href=\"http://razorengine.codeplex.com/\">http://razorengine.codeplex.com/</a></li>\n</ol>\n\n<p>Does anyone have any guidance on using Razor outside of MVC as a standalone template engine? Any experience with these wrapper projects? are there other Razor hosting implementations I should look into?</p>\n"},{"tags":["c#","asp.net-mvc","session","asp.net-mvc-4","global-asax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13223874,"title":"logging off a user when the session times out","body":"<p>I am creating a mvc4 application and here I am creating a cookie to give a user access to various pages depending on their roles and things. but I have different doubt. Instead of logging off people generally tend to close the browser window. So, I made the cookie not store any of the data from the login when that happens (or I think thats what happens, according to the blogs and answers Ive read so far!) </p>\n\n<p>I only want 10 users to access that site at one time. So when the user closes the browser or when the session ends I want it to execute the LogOff function that keeps track of the number of people logged in and opens up that port session for use by someone else.</p>\n\n<p>I tried adding session_end in the global.asax page and it just never seems to get there. and for testing purposes I had it expiring in a minutes time. But it does however go to the Session_start in the same global.asax page.</p>\n\n<p>Any idea as to how I can get this to work?</p>\n"},{"tags":[".net","asp.net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":895,"score":6,"question_id":5693794,"title":"Render image from a theme inside Orchard","body":"<p>I've just picked up Orchard for building my blog. As part of my endeavour to create this new weblog I'm creating a custom theme. This custom theme features both CSS and images. </p>\n\n<p><strong>My question</strong></p>\n\n<p>My question basically comes down to this: How do I render an image that is part of the theme? </p>\n\n<p><strong>What I have tried so far</strong></p>\n\n<p>I have tried to use the following:</p>\n\n<pre><code>&lt;img src=\"@Html.ThemePath(\"/Content/Header.jpg\")\" alt=\"Logo\"/&gt;\n</code></pre>\n\n<p>But that doesn't work to great. It returns the following HTML markup:</p>\n\n<pre><code>&lt;img src=\"~/Themes/FizzyLogic/Content/Header.jpg\" alt=\"Logo\"/&gt;\n</code></pre>\n\n<p>Which is not exactly what it should be returning. I expected it to return the absolute path to the image inside my website.</p>\n"},{"tags":["asp.net-mvc","linq-to-entities","navigation-properties"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13213051,"title":"How to join ef navigation properties in linq to entities","body":"<p>I try to get the following sql written in Linq to Entities:</p>\n\n<pre><code>SELECT * FROM SafetySheets AS SS\nJOIN UserProfiles AS UP ON SS.CreatedBy = UP.UserId\nJOIN SafetyOfficers AS SO ON SS.SafetyOfficer_Id = SO.Id\nJOIN Projects AS Pr ON SS.Project_Id = Pr.Id\nJOIN ConstructionLocations AS CL ON SS.ConstructionLocation_Id = CL.Id\nJOIN ProductionManagers AS PM ON SS.ProductionManager_Id = PM.Id\nJOIN ConstructionManagers AS CM ON SS.ConstructionManager_Id = CM.Id\n</code></pre>\n\n<p>Here is my attempt in Linq:</p>\n\n<pre><code>public IQueryable&lt;SafetySheetCollection&gt; GetSafetySheets()\n    {\n        var query = from vSafety in _db.SafetySheets\n                    join vUserProfile in _db.UserProfiles\n                    on vSafety.CreatedBy equals vUserProfile.UserId\n                    join vProject in _db.Projects\n                    on vSafety.Id equals vProject.SafetySheets\n                    join vConstructionLocation in _db.ConstructionLocations\n                    on vSafety.Id equals vConstructionLocation.SafetySheets\n                    join vSafetyOfficer in _db.SafetyOfficers\n                    on vSafety.Id equals vSafetyOfficer.SafetySheets\n                    join vProductionManager in _db.ProductionManagers\n                    on vSafety.Id equals vProductionManager.SafetySheets\n                    join vConstructionManager in _db.ConstructionManagers\n                    on vSafety.Id equals vConstructionManager.SafetySheets\n                    orderby vSafety.Created descending\n                    select new SafetySheetCollection\n                    {\n                        ListAllSafetySheets = vSafety,\n                        ListAllUserProfiles = vUserProfile,\n                        ListAllProjects = vProject,\n                        ListAllConstructionLocations = vConstructionLocation,\n                        ListAllSafetyOfficers = vSafetyOfficer,\n                        ListAllProductionManagers = vProductionManager,\n                        ListAllConstructionManagers = vConstructionManager\n                    };\n        return query;\n    }\n</code></pre>\n\n<p>The SheetCollection model:</p>\n\n<pre><code> public class SafetySheetCollection\n {\n    public SafetySheet ListAllSafetySheets { get; set; }\n    public Project ListAllProjects { get; set; }\n    public ConstructionLocation ListAllConstructionLocations { get; set; }\n    public UserProfile ListAllUserProfiles { get; set; }\n    public SafetyOfficer ListAllSafetyOfficers { get; set; }\n    public ProductionManager ListAllProductionManagers { get; set; }\n    public ConstructionManager ListAllConstructionManagers { get; set; }\n }\n</code></pre>\n\n<p>My diagram looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/BOews.jpg\" alt=\"enter image description here\"></p>\n\n<p>I understand that it doesn't work out to equal with a navigation property. But how should this be done in a correct way?</p>\n"},{"tags":["c#","asp.net-mvc","ef-code-first","domain-driven-design","code-first"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":13218650,"title":"DDD with EF Code First - how to put them together?","body":"<p>I am learning DDD development for few days, and i start to like it.</p>\n\n<p>I (think i) understand the principle of DDD, where your main focus is on business objects, where you have aggregates, aggregates roots, repositories just for aggregates roots and so on.</p>\n\n<p>I am trying to create a simple project where i combine DDD development with Code First approach.</p>\n\n<p>My questions are: (I am using asp.net MVC)</p>\n\n<ol>\n<li><p>DDD Business Objects will be different than Code First objects?\nEven if they will probably be the same, for example i can have a <code>Product</code> business object which has all the rules and methods, and i can have a <code>Product</code> code first (POCO) object which will just contain the properties i need to save in database.</p></li>\n<li><p>If answer to question 1 is \"true\", then how do i notify the <code>Product</code> POCO object that a property from business object <code>Product</code> has been changed and i have to update it? I am using an \"AutoMapper\" or something like this?\nIf the answer is \"no\", i am completely lost.</p></li>\n</ol>\n\n<p>Can you show me the most simple (CRUD) example of how can i put those two together?</p>\n\n<p>Thank you</p>\n"},{"tags":["asp.net","asp.net-mvc","authentication","domain-driven-design"],"answer_count":3,"favorite_count":6,"up_vote_count":10,"down_vote_count":0,"view_count":760,"score":10,"question_id":6867194,"title":"How do integrate \"Users\" in my DDD model with authenticating users?","body":"<p>I'm creating my first ASP.NET MVC site and have been trying to follow domain driven development. My site is a project collaboration site where users can be assigned to one or more projects on the site. Tasks are then added to projects, and users with in a project can be assigned to tasks. So a \"User\" is a fundamental concept of my domain model. </p>\n\n<p>My plan is to have a \"User\" model object which contains all the information about a user and can be accessed through an IUserRepository. Each user can be identified by a UserId. Although I'm not sure at this point if I want the UserId to be a string or integer.</p>\n\n<p>How should my domain objects User and IUserRepository relate to the more administrative functions of my site like authorizing users and allowing them to login? How would I integrate my domain model with other aspects of ASP.NET such as HttpContext.User, HttpContext.Profile, a custom MemberShipProvider, a custom ProfileProvider, or custom AuthorizeAttribute? </p>\n\n<p>Should I create a custom MembershipProvider and or ProfileProvider which wraps my IUserRepository? Although, I can also foresee why I may want to separate the User information in my domain model from the authorization of a user on my site. For example in the future I may want to switch to windows authentication from forms authentication. </p>\n\n<p>Would it be better to not try and reinvent the wheel and stick with the standard SqlMembershipProvider built into ASP.NET? Each user's profile information would be stored in the domain model (User/IUserRepository), but this would not include their password. I would then use the standard ASP.NET membership stuff to handle creating and authorizing users? So there would need to be some code somewhere that would know to create a profile for a new users in the IUserRepository when their account is created or the first time they login.</p>\n"},{"tags":["asp.net-mvc","generics","inheritance","controllers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13217960,"title":"generics vs inheritance in mvc controllers","body":"<p>We have a number of controllers with very similar functionality, there is a lot of code duplication. There are base controllers which contain some code that is used in all of them however most is still duplicated. Each controller has a constructor, the services are being injected by castle.</p>\n\n<p>I was thinking would it be possible to use generics with controllers to reduce the amount of duplication. Have the similar code in a base class and override any instances where the code deviates.</p>\n\n<p>Alternatively I you could do the same without generics and have more of the duplicate code in the base.</p>\n\n<p>What would be the best approach and how would generics be implemented in controllers? I'm guessing they would make use of interfaces as well.</p>\n"},{"tags":["javascript","asp.net-mvc","azure","acs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13221847,"title":"How do i omit the Confirm Form Resubmission from a backend point when user are loged in","body":"<p>I have this issue, its abit hard for me to explain but I hope it makes sense.</p>\n\n<p>The issue is, I am using MVC 4 Asp.Net and authenticating using claims with Azure ACS, when the user logs in. A redirect to </p>\n\n<ol>\n<li>ACS is initiated</li>\n<li>ACS Posts data back to the server</li>\n<li>The page is loaded (the network tool shows its a POST method)</li>\n</ol>\n\n<p>Now if the user refresh the page the popup asks Confirm Form Resubmission. I assume this is because the site is a POST, so it think it should resend the stuff.</p>\n\n<p>Are there anyway to change such its a normal GET isntead of a POST that the user gets when it returns from ACS?</p>\n\n<p>I hope my problem makes sense, I am not sure what to search for to find a solution.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13220726,"title":"How does ASP.NET MVC pass model to the view without explicitly passing it","body":"<p>Here is one of the examples that I've seen on how to do validation on Controller:</p>\n\n<pre><code>[HttpPost]\npublic ViewResult Create(MyModel response)\n{\n    if (ModelState.IsValid)\n    {\n        return View(\"Thanks\");\n    }\n    else\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>If there are validation errors, than return View() method is called <strong>without any parameters</strong>. Obviously you have @Html.ValidationSummary() in your View and Model has all required property attributes.</p>\n\n<p>The data that was entered into the form was preserved and displayed again when the view was rendered with the validation summary.</p>\n\n<p>My question: how is the data preserved?  Since it was not passed to the View like </p>\n\n<blockquote>\n  <p>return View(response);</p>\n</blockquote>\n\n<p>Thanks a lot.</p>\n\n<p>Sincerely,\nVlad</p>\n"},{"tags":["asp.net-mvc","azure","dotlesscss"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":41,"score":0,"question_id":13215229,"title":"My dotless is not working on azure, internal error","body":"<p><a href=\"http://s-projects.cloudapp.net/ProjectManager\" rel=\"nofollow\">http://s-projects.cloudapp.net/ProjectManager</a></p>\n\n<p>When i run the site on my local machine from visual stduio it works.</p>\n\n<p>I also noticed when looking at the .less file one local site, all the imports are compiled to one file.</p>\n\n<p>on azure</p>\n\n<p>the link in the html links to a file with :</p>\n\n<pre><code>@import\"skin.less\";@import\"base.less\";@import\"site.less\";@import\"style2.less\";\n</code></pre>\n\n<p>and the following i also found:</p>\n\n<pre><code>GET http://s-projects.cloudapp.net/ProjectManager/Content/base.less 500 (Internal Server Error) ProjectManager:13\nGET http://s-projects.cloudapp.net/ProjectManager/Content/site.less 500 (Internal Server Error) \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13221102,"title":"How to prevent MVC ActionFilterAttribute from being cached?","body":"<p>I have a MVC API ActionFilterAttribute that does a permissions check using the Entity Framework.  I've found that because of ActionFilterAttribute caching the EF connection is often broken.  You can find other questions about <a href=\"http://stackoverflow.com/questions/5335350/unitofwork-in-action-filter-seems-to-be-caching\">here</a>. So does anyone know how to prevent caching in ActionFilterAttributes?</p>\n"},{"tags":["asp.net-mvc","routing","asp.net-mvc-routing"],"answer_count":3,"favorite_count":109,"up_vote_count":116,"down_vote_count":0,"view_count":17149,"score":116,"question_id":278668,"title":"Is it possible to make an ASP.NET MVC route based on a subdomain?","body":"<p>Is it possible to have an ASP.NET MVC route that uses subdomain information to determine its route?  For example:</p>\n\n<ul>\n<li><strong><em>user1</strong>.domain.com</em> goes to one place</li>\n<li><strong><em>user2</strong>.domain.com</em> goes to another?</li>\n</ul>\n\n<p>Or, can I make it so both of these go to the same controller/action with a <code>username</code> parameter?</p>\n"},{"tags":["asp.net-mvc","json","knockout.js","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":13196645,"title":"Post JSON data through a form in MVC4","body":"<p>I'm trying to POST a JSON object (a JSON-ified knockout model, if that's of any relevance) to my MVC controller, and have the controller return a new view. To do this, I'm sending the data with a form. The problem is that I would like to have the JSON automatically converted to a model when the controller receives it. </p>\n\n<p>If I were to use an AJAX call for this,</p>\n\n<pre><code>var actionModel = new Object();\nactionModel.Controls = ko.toJS(self.controls());\nvar json = JSON.stringify(actionModel);\n$.ajax({\n    url: \"MyController/Preview\",\n    type: \"POST\",\n    contentType: 'application/json; charset=utf-8',\n    cache: false,\n    data: json,\n    success: function (data) {\n    }\n});\n</code></pre>\n\n<p>...the JSON object is successfully deserialized and converted into an instance of my model class.</p>\n\n<pre><code>public ActionResult Preview(ActionModel actionModel) { ... }\npublic class ActionModel\n{\n    public List&lt;ControlModel&gt; Controls { get; set; }\n}\n</code></pre>\n\n<p>If I want to do this with a form, I understand that I need to insert the JSON into a hidden input field, but the best I can manage when doing this is to receive the data as a serialized string:</p>\n\n<pre><code>@using (Html.BeginForm(\"Preview\", \"MyController\", FormMethod.Post, new { id = \"previewForm\" }))\n{\n    &lt;input type=\"hidden\" id=\"hiddenFieldName\" /&gt;\n}\n\npublic ActionResult Preview(string hiddenFieldName) { ... }\n</code></pre>\n\n<p>I could just deserialize it afterwards, but I really would prefer it if MVC could convert it for me, as it would with an AJAX call. Is this possible?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12885116,"title":"DataBase.Exist() returns true even if the connection string has wrong database name in Entity Framework","body":"<p>I am new to EF 5.0, i have purposely set the wrong database name in connection string in Web.Config. i.e. Initial Catalog = \"Wrong Database Name\";</p>\n\n<p>Now I have created a boolean property, which detects whether the database exists or not. Like below - where context is the EFDbContext.</p>\n\n<pre><code>bool IsDatabaseExist = context.DataBase.Exists();\n</code></pre>\n\n<p>My question is, why this is always showing true, even if the DataBase name which I have provided is wrong ?</p>\n"},{"tags":["asp.net-mvc","razor","asp.net-mvc-4","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":363,"score":1,"question_id":12206851,"title":"Razor views: The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartCode threw an exception","body":"<p>I'm working in an Asp.net MVC 4 project in Visual Studio 2012, when I open a view I'm getting this error:</p>\n\n<blockquote>\n  <p><em>ASP.NET runtime error: The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartCode threw an exception with the following error message: The type initializer for 'DotNetOpenAuth.Reporting' threw an exception..  C:\\Users\\escobar5\\Desktop\\WindowsAzure1\\MvcWebRole1\\Views\\Shared_LoginPartial.cshtml</em></p>\n</blockquote>\n\n<p>So I lost intellisense because after that error every call to ViewBag or model says: \"One or more types required to compile a dynamic expression cannot be found\"</p>\n\n<p>I updated OAuth packages from Nuget but I'm still getting the error. </p>\n\n<p>The project runs fine, the problem is just with razor.</p>\n\n<p>This is a screenshot of the error for more detail:</p>\n\n<p><img src=\"http://i.stack.imgur.com/4RJXH.png\" alt=\"Error\"></p>\n\n<p>Any ideas?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","dependency-injection","web-config"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13218377,"title":"Web.config settings class in ASP.NET MVC","body":"<p>on ASP.NET Web Forms I used to have an utility <strong>static class</strong>, called <code>WebConfigSettings</code>, where I had all the app settings read from my Web.config file (for example <code>WebConfigSettings.DebugModeEnabled</code>).<br>\nIs it a bad practice on MVC? Shall I prefer using a non-static class and inject it on my controllers using dependency injection? If yes, where shall I put the property on the controller? I have read on <a href=\"http://stackoverflow.com/questions/6119206/what-are-good-candidates-for-base-controller-class-in-asp-net-mvc\">this post</a> that I should not use base controllers.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","visual-studio-2012","keyboard-shortcuts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13215137,"title":"Navigate between Model/View/Controller keyboard shortcut?","body":"<p>I'm new to MVC.</p>\n\n<p>I am curious if there are any built-in shortcuts to navigate between model/view/controller.</p>\n\n<p>Thanks</p>\n"},{"tags":["ajax","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13216414,"title":"AJAX postback response different than model data","body":"<p>I have a partial view that has textfields in it and is bound to a List set up, so essentially there is a row of textfields that the user can add another row to or remove a row from. I build the view by looping through the list like this:</p>\n\n<pre><code>@model PricingRequestWebApp.Web.Models.PricingRequestModel\n\n&lt;div id=\"shiplocation-wrapper\"&gt;\n    &lt;table class=\"shipinfoprtable\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].Address)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].City)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].State)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].Zip)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].PFreight)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].FreightType)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;td&gt;&lt;span class=\"link\" id=\"addlocation\" onclick=\"AddShippingLocation()\"&gt;Add&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            @for (int i = 0; i &lt; Model.ShippingLocationsModel.Count; i++)\n            {\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].Address, new { @style = \"width: 200px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].City, new { @style = \"width: 150px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].State, new { @size = 3 })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].Zip, new { @style = \"width: 80px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].PFreight, new { @style = \"width: 80px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].FreightType, new { @style = \"width: 200px\" })&lt;/td&gt;\n                    @if (Model.ShippingLocationsModel.Count &gt; 1)\n                    {\n                        &lt;td&gt;&lt;span class=\"link\" id=\"removelocation\" onclick=\"RemoveShippingLocation(@i);\"&gt;Remove&lt;/span&gt;&lt;/td&gt;\n                    }\n                &lt;/tr&gt;\n            }\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My controller methods look like so:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult AddShippingLocation(PricingRequestModel model)\n    {\n        model.ShippingLocationsModel.Add(new ShippingLocationsModel());    \n\n        return PartialView(\"shiplocationsPartial\", model);\n    }\n\n    [HttpPost]\n    public ActionResult RemoveShippingLocation(PricingRequestModel model)\n    {\n        model.ShippingLocationsModel.RemoveAt(StaticItems.id);\n\n        return PartialView(\"shiplocationsPartial\", model);\n    }\n</code></pre>\n\n<p>And my Jquery function that posts the data and returns the view:</p>\n\n<pre><code>function AddShippingLocation() {\n    $.ajax({\n        data: $('#shippinginfoform').serialize(),\n        type: \"POST\",\n        url: \"/PricingRequest/AddShippingLocation\",\n        success: function (response) {\n            $('#shiplocation-wrapper').html(response);\n        }\n    })\n}\n\nfunction RemoveShippingLocation(id) {\n    $.ajax({\n        data: { id: id },\n        type: \"POST\",\n        url: \"/PricingRequest/SaveID\",\n        complete: function () {\n            $.ajax({\n                data: $('#shippinginfoform').serialize(),\n                cache: false,\n                type: \"POST\",\n                url: \"/PricingRequest/RemoveShippingLocation\",\n                success: function (response) {\n                    $('#shiplocation-wrapper').html(response);\n                }\n            })\n        }\n    })\n}\n</code></pre>\n\n<p>Now, lets say I have 4 items created in the user view. I click on item 2 to remove it and it passes in i as an id. I then remove that from the model list and pass back the view with the updated model. I have debugged this at least 50 times now and the controller method looks exactly as it should and the data in the view as well. Inexplicably though the response on the ajax shows differently than what I'm seeing while debugging. Clicking on remove item 2 removes item 4. If I have 5 items, item 5 will be removed no matter what item I click to remove. It's always the last item that is removed. I know I must be missing something here but I can't see what. Any ideas? Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13216260,"title":"MVC3 DropDownListFor not selecting saved value","body":"<p>I'm displaying a list of users.  Each user record has a TrainingEvent object property (from a choice of many TrainingEvents).  I've created a viewmodel to include the User list and the TrainingEvents list.</p>\n\n<p><strong>ViewModel:</strong></p>\n\n<pre><code>public class RegistrationViewModel\n{\n  public IEnumerable&lt;Domain.Entities.User&gt; Users { get; set; }\n  public IEnumerable&lt;SelectListItem&gt; TrainingEvents { get; set; }\n}\n</code></pre>\n\n<p><em>(note: the Domain.Entities.User contains a TrainingEvent object property)</em></p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>public ActionResult Dealership(int id)\n{\n  var model = new RegistrationViewModel\n    {\n      Users = repository.Find\n             .Where(u =&gt; u.Dealer.DealerId == id).OrderBy(u =&gt; u.LastName),\n                 TrainingEvents = repository.TrainingEvents.ToList()\n                                  .Select(x =&gt; new SelectListItem\n                                          {\n                                            Text = x.Date.ToString() + \" - \" + x.LocationName,\n                                            Value = x.TrainingEventId.ToString()\n                                          })\n    };\n\n  return View(\"East\", model);\n}\n</code></pre>\n\n<p><strong>Binding in View:</strong></p>\n\n<pre><code>@foreach(Company.Domain.Entities.User usr in Model.Users)\n  {\n     &lt;tr&gt;\n         &lt;td&gt;@usr.LastName&lt;/td&gt;\n         &lt;td&gt;@usr.FirstName&lt;/td&gt;\n         &lt;td&gt;@usr.JobDescription&lt;/td&gt;\n         &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Users.FirstOrDefault(u =&gt; u.UserId == usr.UserId).TrainingEvent, Model.TrainingEvents)&lt;/td&gt;\n     &lt;/tr&gt;\n}\n</code></pre>\n\n<p>The users are listed and each user row has a dropdown which populates with TrainingEvents.  However, the value previously saved in the user's TrainingEvent object isn't selected.  Any ideas as why not?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-web-api"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13210975,"title":"WebApi Controller returned value in Entity Framework 5 and MVC 4 project","body":"<p>I'm working on a webapi, EF5, Windsor Castle in a MVC 4 project, and I have a question...should I return the Entity (or DTO) in the Get method or Should I return an HttpResponseMessage? What's the better way and more standard way to do it?</p>\n\n<p>So, Is it this?</p>\n\n<pre><code>[System.Web.Http.HttpGet]\npublic HttpResponseMessage GetById(long id)\n{\n    var branch = Uow.Branches.GetById(id);\n    if (branch != null)\n    {\n        Request.CreateResponse(HttpStatusCode.OK, branch);\n    }\n\n    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));\n}\n</code></pre>\n\n<p>Or this?</p>\n\n<pre><code>[System.Web.Http.HttpGet]\npublic Branch GetById(long id)\n{\n    var branch = Uow.Branches.GetById(id);\n    if (branch != null) return branch ;\n    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-membership","membership","membershipuser"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13218565,"title":"Storing CustomMembershipUser in Database EF","body":"<p>I  am trying to implement a custom mebershipuser (derrived from the membershipuser class) and Membershipprovider.</p>\n\n<p>I Store the users in my dbcontext As a property, but l get some awkward errors. It writes that the user.UserName type is not supported, which is simple getter property. I've managed to walk around this using the \"new\" keyword, but other things mess up, and there must be a strait-forward way to store my custom membership provider and be able to access it using dbcontext.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","debug-symbols"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12333706,"title":"Debug into nightly build of ASP.NET MVC4 using Symbolserver","body":"<p>I used this description to get the nightly build of ASP.NET MVC for my project</p>\n\n<p><a href=\"http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx</a></p>\n\n<p>Its pulls the assemblies sucesfully from  nuget and I can run the project.</p>\n\n<p>I now try to debug into the pdb pulled from the MS symbol server. Thats actually the point: I dont know if these symbols are realy located on the servers. Either I am doing something wrong or symbols are not available.</p>\n\n<p>Here are my debug settings:</p>\n\n<p><img src=\"http://i.stack.imgur.com/v42gS.png\" alt=\"enter image description here\"></p>\n\n<p>These are my symbol servers\n<img src=\"http://i.stack.imgur.com/sJjrX.png\" alt=\"enter image description here\"></p>\n\n<p>This is what I see when I try to step into a method located in System.Web.Mvc.dll\n<img src=\"http://i.stack.imgur.com/94RfD.png\" alt=\"enter image description here\"></p>\n\n<p>These are the modules loaded:</p>\n\n<p><img src=\"http://i.stack.imgur.com/W6F1J.png\" alt=\"enter image description here\"></p>\n\n<p>I downloaded the nightly build on the third of september. Is there anything I am missing?</p>\n"},{"tags":["sql-server","asp.net-mvc","webmatrix","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13215644,"title":"Control the tables generated by SimpleMembershipProvider?","body":"<p>I found <code>SimpleMembershipProvider</code> to be pretty neat and productive.</p>\n\n<p>I was wondering if there is a way to control the generate table/column names/datatypes.</p>\n"},{"tags":["asp.net-mvc","wif","acs","system.web"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13177145,"title":"Where in an MVC application can I catch a SecurityTokenExpiredException?","body":"<p>I have a .NET 4.5 /  MVC 4 web application with WIF (Azure ACS) security, using a custom, forms-based login page (and running in an Azure Web Role, although I don't think that is relevant to this question).</p>\n\n<p>Occasionally, the ACS token expires before my local session does, and I get the following error:</p>\n\n<pre><code>ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\n</code></pre>\n\n<p>I'd like to catch this and just route the user to the login page, but I'm not sure where to handle it. I've tried overriding the <code>OnException</code> method of my base controller class, and also <code>ApplicationError</code> in Global.asax, but neither seems to fire.</p>\n\n<p>Where could I put a handler to catch this error?</p>\n\n<p>Full error message follows:</p>\n\n<pre><code>ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\nNotOnOrAfter: '01/11/2012 10:37:53'\nCurrent time: '01/11/2012 12:26:13'\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IdentityModel.Tokens.SecurityTokenExpiredException: ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\nNotOnOrAfter: '01/11/2012 10:37:53'\nCurrent time: '01/11/2012 12:26:13'\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nStack Trace: \n\n\n[SecurityTokenExpiredException: ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\nNotOnOrAfter: '01/11/2012 10:37:53'\nCurrent time: '01/11/2012 12:26:13']\n   System.IdentityModel.Tokens.Saml2SecurityTokenHandler.ValidateToken(SecurityToken token) +1039271\n   System.IdentityModel.Tokens.SecurityTokenHandlerCollection.ValidateToken(SecurityToken token) +135\n   System.IdentityModel.Services.TokenReceiver.AuthenticateToken(SecurityToken token, Boolean ensureBearerToken, String endpointUri) +117\n   System.IdentityModel.Services.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequestBase request) +698\n   System.IdentityModel.Services.WSFederationAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args) +123924\n   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +165\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-4","polymorphism"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13181746,"title":"ASP.NET MVC - Generic Controller Model Issue and Polymorphism","body":"<h2>Setup:</h2>\n\n<p>I have designed a Wizard (based initially on Steve Sanderson's wizard in Pro ASP.NET MVC 2).</p>\n\n<p>Essentially, the base wizard controller is declared as follows:</p>\n\n<pre><code>public abstract class WizardController&lt;TModel&gt; : Controller where TModel : class, IWizardModel, new()\n{\n   // Loads-n-loadsa-code\n}\n</code></pre>\n\n<p>To implement my wizard, therefore, I need to declare my Wizard controller as follows:</p>\n\n<pre><code>[WizardOptions(StartLabel=\"Edit &gt;&gt;\")]\npublic partial class EditFeeEarnerController : WizardController&lt;MyApp.Models.MySpecificWizardModel&gt;\n{\n     // small amounts of highly intuitive code\n}\n</code></pre>\n\n<p>Where <code>MyViewModel</code> implements <code>IWizardModel</code>.</p>\n\n<p>So far so good.  The wizard works beautifully and I am right chuffed with it, so don't get hung up on that.  </p>\n\n<p>The issue follows:</p>\n\n<h2>Issue:</h2>\n\n<p>The only issue is that my Wizard uses partial views for each step, that get \"stitched\" together with a view (<code>Wizard.cshtml</code>).</p>\n\n<p><code>Wizard.cshtml</code> is <strong>ALWAYS</strong> the same for <strong>ANY</strong> wizard <strong>EXCEPT</strong> for the <code>@model</code> declaration at the top, in my example:</p>\n\n<pre><code>@model MyApp.Models.MySpecificWizardModel\n</code></pre>\n\n<p>As a result, in an app with 20 wizards, I have the very same file appearing 20 times.  </p>\n\n<p>Definitely not DRY.</p>\n\n<h2>Question:</h2>\n\n<p>I would like to put a file in <code>~/Views/Shared/Wizard.cshtml</code> and use that for all my wizards.  The reason I can't do that is because I only know in advance that my wizard viewmodels will inherit from <code>IWizardModel</code>.  </p>\n\n<p>And I can't do this:</p>\n\n<pre><code>@model IWizardModel\n</code></pre>\n\n<p>So what is the best way to do this, or is it just not possible?</p>\n\n<p>I suppose I could have a base Wizard viewmodel that all my wizard viewmodels inherit from (instead of directly implementing <code>IWizardModel</code>).</p>\n\n<p>Would this work?</p>\n\n<h1>EDIT (With the benefit of hindsight):</h1>\n\n<p>For the record, my problem was that I was misguided in thinking that using an interface as my model, ie, <code>@model IWizardModel</code>, wouldn't work.  As Iain Galloway pointed out in his answer, it does and that solved my problem.</p>\n\n<p>The reason I thought I couldn't use an interface as my model is that I did the following:</p>\n\n<pre><code>@model IWizardModel // MyNamespace.MySpecificWizardModel\n</code></pre>\n\n<p>The problem is the comment to the right (I commented out the old model).  </p>\n\n<p>For some reason, the comment generated an error (something to do with the <code>ViewEngine</code>).  In my haste, I just presumed you couldn't use interfaces for the model.</p>\n\n<p>As olde Will said:  Great is thy power, oh delay.</p>\n\n<p>See Iain Galloway's answer and my Addendum to it.</p>\n"},{"tags":["asp.net-mvc","tortoisehg","bitbucket"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13218001,"title":"How to not push certain folders to Bitbucket, when using Tortoise HG","body":"<p>I am trying to use Tortoise HG with a private repository on Bitbucket. </p>\n\n<p><img src=\"http://i.stack.imgur.com/HzAvw.png\" alt=\"enter image description here\"></p>\n\n<p>In my project I have a couple of folders which I dont want to push. My project is in ASP.NET MVC and these folders I am talking about are folders created by Resharper and Nuget.</p>\n\n<ul>\n<li>_ReSharper.ProjectName</li>\n<li>packages</li>\n</ul>\n\n<p>Please can some one tell me how to avoid this.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":855,"score":0,"question_id":415991,"title":"dynamic site.master menu","body":"<p>I need some help with the follow:</p>\n\n<p>I have just read on this tutorial: \n<a href=\"http://www.asp.net/LEARN/mvc/tutorial-13-cs.aspx\" rel=\"nofollow\">http://www.asp.net/LEARN/mvc/tutorial-13-cs.aspx</a></p>\n\n<p>and followed the example given for the \"good solution\". However, I encountered a problem after i made some modifications to the abstract class ApplicationController.</p>\n\n<p>The original constructor was:</p>\n\n<pre><code>public ApplicationController()\n{                \n    ViewData[\"categories\"] = from c in DataContext.MovieCategories\n                             select c;           \n}\n</code></pre>\n\n<p>I've modified it to become to use a stored procedure instead:</p>\n\n<pre><code>public ApplicationController()\n{                \n    ViewData[\"categories\"] =  DataContext.spMovieCategories(\"some movie category\");\n}\n</code></pre>\n\n<p>Is there anyway I can pass in \"some movie category\" as a parameter? I've tried using TempData and Session variables but it keeps throwing me errors.</p>\n\n<p>Thanks guys!</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":13216962,"title":"JQuery Closest Method to change HTML","body":"<p>I am working on a project, i have two anchors in my View(for voting functionality),</p>\n\n<p>I have a div inside which i am having  a <code>&lt;ul&gt;</code> and in 3 <code>&lt;li&gt;</code> i am having anchor for upvote,vote count <code>(in &lt;h2&gt;)</code> and anchor downvote respectively</p>\n\n<p>I want functionality that when i click on any anchor, the h2 html show the vote count, i've implemented the functionality but because of <li> i am unable to do this,\nthis is my View</p>\n\n<pre><code>&lt;div class=\"voting\" style=\"margin-left:20px;\"&gt;\n                                        &lt;ul&gt;\n                                            &lt;li class=\"addvote\"&gt;&lt;a href=\"#\" class=\"voteAnswer\" answerid=\"@answer.AnswerID\" name=\"Voted\"&gt;\n                                           Up&lt;/a&gt;&lt;/li&gt;\n                                            &lt;li class=\"votecounter\"&gt;\n                                                &lt;h2&gt;\n                                                    @answer.AnswerLikes.Where(a =&gt; a.IsActive == true).Count()&lt;/h2&gt;\n                                            &lt;/li&gt;\n                                            &lt;li class=\"subvote\"&gt;&lt;a href=\"#\" class=\"voteAnswer\" answerid=\"@answer.AnswerID\" name=\"Voted\"&gt;\nDown&lt;/a&gt;&lt;/li&gt;\n                                        &lt;/ul&gt;\n                                    &lt;/div&gt;\n</code></pre>\n\n<p>and this is my JS</p>\n\n<pre><code>$(\".voteAnswer\").click(function (event) {\n            var answerid = $(this).attr('answerid');\n            var name = $(this).attr('name');\n            var id = $(this).attr('id');\n            var output = $(this);\n\n                $.ajax({\n                    url: ResourceAjaxUrl.VoteUnvoteTheAnswer,\n                    type: \"POST\",\n                    data: JSON.stringify({ answerID: answerid }),\n                    dataType: \"html\",\n                    contentType: \"application/json; charset-utf-8\",\n                    success: function (Result) {\n                        alert(\"Voted\");\n                        //  $(output).html(\"Voted (\" + Result + \")\");\n                        $(output).closest(\"li\").find(\"h2\").html(Result);\n                        $(output).attr(\"name\", \"Voted\");\n                    },\n                    error: function (msg) {\n                        alert(\"Unable to Vote answer: \" + msg);\n                    }\n                });\nevent.preventDefault();\n            });\n</code></pre>\n\n<p>i have tried using  <code>$(output).closest(\"li\").find(\".votecounter\")</code> but its still not working</p>\n"},{"tags":["asp.net-mvc","frameworks","blogs","engine","web-frameworks"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13217055,"title":"Tools to expose blogging as a feature to the users of my ASP.NET MVC site","body":"<p>I'm building an ASP.NET MVC website with facebook integrated login. As a part of the feature of this site, I want to expose users a blogging option. Logged in users should be able to post new blogs and manage their earlier blogs. Is there a library or a project that I can include/integrate with my current site ?</p>\n\n<p>Features like spam blocking,\nChoosable custom blog Template, would be a nice to have. </p>\n\n<p>I've already looked into the following: </p>\n\n<p><a href=\"http://www.orchardproject.net/\" rel=\"nofollow\">Orchard:</a> This seems to be more of a CMS, for an admin managing his/her blog than an option to expose blogging as a feature to the users of my site.</p>\n"},{"tags":["asp.net-mvc","nhibernate","design","model","dataannotations"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13214138,"title":"Model layer dependency on MVC attributes","body":"<p>We have an MVC3 project that uses nHibernate; there is a separate model project that contains all the model classes which is used by the repository and service layers. The models make use of data annotations like DisplayAttribute and RequiredAttribute from System.ComponentModel.DataAnnotations.</p>\n\n<p>There are also attributes such as RemoteAttribute that are contained in System.Web.Mvc.</p>\n\n<p>This of course means that the model project now has a dependency to a particular front end technology.</p>\n\n<p>Assuming the solution could have other front ends what would be the best way to handle this dependency link?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":6,"favorite_count":6,"up_vote_count":5,"down_vote_count":0,"view_count":3914,"score":5,"question_id":1207382,"title":"Need ASP.Net/MVC Rich Text Editor","body":"<p>I'm looking for a \"simple\" RTE editor for a MVC application I'm programming.</p>\n\n<p>The editor running the Stackoverflow message editor is almost exactly what I'm looking for.  We don't need anything as fancy as FCK's editor.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["asp.net-mvc","entity-framework","design","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13204145,"title":"Implicit EF queries in Views cause DataReader-related InvalidOperationException","body":"<p>At some point of developing an ASP.NET MVC solution which uses EF as it's ORM I started to encouter a rare-discovered bug (or Heisenbug, as it totally disappears under step-by-step debugging).</p>\n\n<p>At SO, I found that the source of my bug may be either:</p>\n\n<ul>\n<li><code>DbContext</code> is a static Lazy&lt;>-wrapped field in my domain model, thus subject to <code>using(){}</code> idiom multiple result sets.</li>\n<li>My views themselves call HtmlHelper custom extension methods that have EF queries inside (e.g. DropDown select population, thumbnail link generation etc.).</li>\n</ul>\n\n<p>First problem was solved simply by adding <code>multipleactiveresultsets=True</code> to my <code>connectionString</code> definition.</p>\n\n<p>The latter hypothetically requires a switch to ViewModels, prepopulated inside controller actions. However, there many cases where use of ViewModel will be an overkill, requiring addition of dummy copy-create code that will cause maintenance overhead.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Why EF queries inside Views cause <code>There is already an open DataReader associated with this Command which must be closed first.</code> error? Do <em>they</em>?</li>\n<li>How to stop views executing queries without full codebase rewrite?</li>\n</ul>\n"},{"tags":["php","asp.net-mvc","mvc","activerecord"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13214625,"title":"What is the best place to put logic that merges two activerecord lists for presentational purposes in an MVC app?","body":"<p>I have a few instances where I need to merge two or more lists of different activerecord models, filter the merged list based on some criteria and potentially sort it for presentational purposes.  Where would you typically perform this type of logic in an MVC application?  One idea I had was to adopt some methodology similar to the viewmodel pattern used in MVC.net for this PHP app I am building.</p>\n\n<p>Here is what I was thinking</p>\n\n<pre><code>public class myViewModel\n{\n    private $modelList1;\n    private $modelList2;\n\n    public  $mergedList;\n\n    public function __construct($myModelList1, $myModelList2)\n    {\n            $this-&gt;modelList1 = $myModelList1;\n            $this-&gt;modelList2 = $myModelList2;\n\n            mergeLists();\n            filterList();\n            sortList();\n    }\n\n    private function mergeLists\n    {\n            // sets $mergedList based on $modelList1 and $modelList2\n    }\n\n    private function filterList\n    {\n            // filters $mergedList\n    }\n\n    private function sortList\n    {\n            // sorts $mergedList\n    }\n}\n</code></pre>\n\n<p>After the viewmodel has been constructed, it would be passed to the view by the controller and the view could access the $mergedList property.</p>\n\n<p>Is this a reasonable way to handle this or is there a better way?  I assume it belongs in some kind of model other than an activerecord model and I didn't think a service was the proper place though I could be wrong...\nAlso would you say this logic is domain logic or presentation logic?</p>\n"},{"tags":["c#","regex","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13214255,"title":"Match at least one character and one number, regardless of order, with no suffix?","body":"<p>I need a RegEx that fulfills this statement:</p>\n\n<blockquote>\n  <p><strong>There is at least one character and one digit, regardless of order, and there is no suffix (i.e. domain name) at the end.</strong></p>\n</blockquote>\n\n<p>So I have this test list:</p>\n\n<pre><code>ra182\njas182\nra1z4\n</code></pre>\n\n<p>And I have this RegEx:</p>\n\n<pre><code>[a-z]+[0-9]+$\n</code></pre>\n\n<p>It's matching the first two fully, but it's only matching the <code>z4</code> in the last one. Though it makes sense to me why it's only matching that piece of the last entry, I need a little help getting this the rest of the way.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13211083,"title":"Orchard CMS Recent Blog Post Widget Alternate View","body":"<p>I'm new to Orchard CMS and MVC so please forgive my ignorance. I've done a search and not found anything apparently relevant....</p>\n\n<p>In one of the Footer Quad zone on my Orchard site I want to show the 5 most recent blog posts, just by title. At present it show the title, post, tags etc all in their unformatted state(Ive not style the blog yet).</p>\n\n<p>Using the tracing tool I've created an alternate view called; </p>\n\n<pre><code>Parts.Blogs.RecentBlogPosts\n</code></pre>\n\n<p>However the only content in this view is;</p>\n\n<pre><code>@Display(Model.ContentItems)\n</code></pre>\n\n<p>Which -unlike other installed widgets Ive edited alternate views for- doesn't give me anything to play around with to create the layout I'm needing to create.</p>\n\n<p>Have I selected the wrong shape / view, or do I need to get stuck in with some coding???</p>\n\n<p>As I say, I'm new to both MVC and Orchard but very keen to learn. Any help on this will, as always, be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","rest","widget","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13190226,"title":"RESTful URL design for Widgets Check","body":"<p>I am building a RESTful API for a web site that allows users to create widgets and tabs containing widgets (think igoogle.com/ netvibes.com) and I want to share my URL design for your insights.</p>\n\n<p>Here are the simple rules:</p>\n\n<ol>\n<li><p>There is a static list of widgetTypes available for a user to pick. </p></li>\n<li><p>A user can create one or more widgetInstances of each widgetType.</p></li>\n<li><p>A user can create one or more tabs/ dashboards containing widgetInstances</p></li>\n</ol>\n\n<p>This API needs to only serve JSON that will be consumed by JavaScript. We can also assume that all authentication will be taken care of through cookies. </p>\n\n<p>The API needs to serve:</p>\n\n<ol>\n<li><p>CRUD of user's Tabs</p></li>\n<li><p>CRUD of specific user widgetInstances</p></li>\n<li><p>Retrieval of all tabs for a user</p></li>\n<li><p>Retrieval of all widgetInstances for a given tab. </p></li>\n<li><p>Retrieval of all available widgetTypes for a user to add widgets from. </p></li>\n</ol>\n\n<p><strong>Design:</strong></p>\n\n<p><strong>Tab controller:</strong></p>\n\n<p>widgetAPI.com/tabs -> Returns meta data (id, title) of all tabs available to a user.</p>\n\n<p>widgetAPI.com/tabs/1 -> Returns meta data (title) of tab id 1. If sent with POST, updates tab id 1. </p>\n\n<p>widgetAPI.com/tabs/1/widgets > Returns all widgetInstances of tab id 1. </p>\n\n<p><strong>Question 1:</strong> Ideally I'd like to follow the design of widgetAPI.com/tabs/1 also returning all the widgetInstances of the given tab but with that design, widgetAPI.com/tabs may return far too much data as I would have to return all the widgets for all the tabs. Hence I need to create a separate \"widgetAPI.com/tabs/1/widgets\" URL but that also has to return the tab meta data as I don't want to make two HTTP calls to get meta data &amp; widgets. Please advise as I am not sure of the best approach here. </p>\n\n<p>widgetAPI.com/tabs/create -> Create a new tab</p>\n\n<p>widgetAPI.com/tabs/delete/123 -> Delete tabid 123</p>\n\n<p><strong>Widget Controller:</strong></p>\n\n<p>widgetAPI.com/widgets/123 -> Return data for widgetInstanceId 123. Updates 123 if sent through POST. </p>\n\n<p>widgetAPI.com/widgets/Create?typeID = 2 -> Creates a new widgetInstance of typeid = 2. This will only be a POST request so typeId could be a post parameter.</p>\n\n<p>widgetAPI.com/widgets/delete/123 -> Delete widgetInstance 123</p>\n\n<p><strong>Question 2</strong> So there is one rule I havent been able to fulfill yet. I need to return all the widgetTypes available and I am not sure how to fit this request into the previous two controllers. I am currently leaning towards just serving this separately. So something like widgetAPI.com/getWidgetTypes. Thoughts?</p>\n\n<p>Thanks guys. If you could critique on the overall design, just address the questions or mention anything I should watch out for, that would be great as this is my first time designing a RESTful app. Thanks again.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13213520,"title":"ASP.NET MVC - Resend confirmation email with WebSecurity?","body":"<p>Trying to use the WebSecurity and if my user loses, needs to resend, or otherwise changes their email, their does not seem to be any way to reset your confirmation token via the WebSecurity classes.</p>\n\n<p>How do I reset the confirmation token for WebSecurity in Asp.NET MVC?</p>\n"},{"tags":["asp.net-mvc","templates","t4","vsix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13212060,"title":"Can MVC Scaffolding T4 Templates be installed using VSIX?","body":"<p>I have a MVC template that should be installed in </p>\n\n<blockquote>\n  <p>Common7\\IDE\\ItemTemplates\\CSharp (or Visual Basic)\\Web\\MVC (or 2)\n  3\\CodeTemplates</p>\n</blockquote>\n\n<p>as noted <a href=\"http://stackoverflow.com/questions/7249414/where-are-the-built-in-mvc-scaffolding-t4-templates\">here</a>.</p>\n\n<p>Is there a way to include this on a VSIX package? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":9,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":13305,"score":11,"question_id":2269220,"title":"The view 'Index' or its master was not found.","body":"<pre><code>The view 'Index' or its master was not found. The following locations were searched:\n~/Views/ControllerName/Index.aspx\n~/Views/ControllerName/Index.ascx\n~/Views/Shared/Index.aspx\n~/Views/Shared/Index.ascx\n</code></pre>\n\n<p>I got this error when using ASP.Net mvc area. The area controller action are invoked, but it seems to look for the view in the 'base' project views instead of in the area views folder.</p>\n"},{"tags":["asp.net-mvc","google-earth","kmz"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12462327,"title":"Cross domain open kmz files in asp.net mvc","body":"<p>I have a problem with opening kmz file via google earth api. It works fine when  I provide static link to the file on server:</p>\n\n<pre><code>google.earth.fetchKml(ge, 'http://10.122.150.183:8008/test.kmz', checkForCoordinates);\n</code></pre>\n\n<p>But when I change link to the file on another domain (which is WCF service) : <code>'https://10.122.150.183:4431/Uploads/1/test.kmz'</code>, file doesn't open in google earth. I've tried another solution: to provide kmz files dynamically from ASP.Net MVC controller, returning:</p>\n\n<pre><code>return File(fileStream, \"application/vnd.google-earth.kmz kmz\", fileName);\n</code></pre>\n\n<p>It works fine if I try to get it from browser's address bar, but when I provide link to the action in <code>fetchKml</code> method, the action even doesn't inovoke.</p>\n\n<p>Any suggestions on how to open kmz files from another domain?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13212938,"title":"Forgot Password + Email Confirmation in ASP.NET MVC WebMatrix","body":"<p>It appears that these two features have a set of helper functions and schema in the WebMatrix code to get going.  However, there are no controller methods or views to get it done, so you have to implement yourself. </p>\n\n<p>Is there any samples anywhere where I can just copy this code into my app?   I'm looking for something to:</p>\n\n<ul>\n<li>Generate Forgot Password Email</li>\n<li>Generate Confirmation Email</li>\n<li>Forgot Password view + Controller method</li>\n<li>Resend confirmation email view + Controller method</li>\n</ul>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13082287,"title":"MVC web service in .Net","body":"<p>Is there any use to work in MVC web service instead of asmx and WCF web service. Can anyone please tell the difference between the three? </p>\n"},{"tags":["c#","html","asp.net-mvc","security"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":13212097,"title":"Can I securely replace new lines with break tags like this?","body":"<p>Can I securely replace <code>Environment.NewLine</code> with <code>&lt;br /&gt;</code> like I am in the following extension method?</p>\n\n<pre><code>public static string HtmlBreaks(this string s)\n{\n    if (string.IsNullOrEmpty(s)) { return s; }\n    return s.Replace(Environment.NewLine, \"&lt;br /&gt;\");\n}\n</code></pre>\n\n<p>I use it like this:</p>\n\n<pre><code>@Html.Raw(Model.Details.HtmlBreaks())\n</code></pre>\n\n<p>And let me be clearer. <strong><em>Is this secure?</em></strong> <em><strong>Am I breaking any internet security guidelines by replacing text with HTML and then issuing the <code>Raw</code> method?</em></strong> Am I opening this website up to any attacks by this?</p>\n"},{"tags":["asp.net","asp.net-mvc","azure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13201060,"title":"Why azure throws this error: Could not load file or assembly 'Microsoft.Build.Utilities.v3.5","body":"<p>I've upgraded EntityFramework from 4.1 to  5 and Upgraded .NET Framework to 4.5 on local machine everything works perfectly, but when I published my changes on Azure I receive this error:</p>\n\n<pre><code>Server Error in '/' Application.\n\nCould not load file or assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nAssembly Load Trace: The following information can be helpful to determine why the assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' could not be loaded.\n\n\nWRN: Assembly binding logging is turned OFF.\nTo enable assembly bind failure logging, set the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog] (DWORD) to 1.\nNote: There is some performance penalty associated with assembly bind failure logging.\nTo turn this feature off, remove the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog].\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","view"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13211758,"title":"Accessing an object passed into a view","body":"<p>I am passing an object (a List) into a view like so:</p>\n\n<pre><code>private readonly CarsContext _db = new CarsContext();\n\npublic ActionResult Index()\n{\n    ViewBag.Message = \"Foobar\";\n\n    var result = from cars in _db.CarProfiles\n                 where cars.CarOfTheWeek\n                 select cars;\n\n    return View(result.ToList());\n}\n</code></pre>\n\n<p>How do I access this object from within my Index view? I am thinking I need to add it to my dynamic viewbag, and access it that way instead of passing it as an argument, is this correct or if I keep my controller code above as it is, can I access this object from within the view?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":702,"score":2,"question_id":4831944,"title":"MVC3 Validation","body":"<p>For some reason my Identity column \"ID\" gets validated by MVC3? why is this happening when i did not specify it to be required.?? I have this \"@Html.HiddenFor(model => model.Id)\" in my view, which should not cause any issues.</p>\n\n<pre><code>public class User {\n    public int Id { get; set; }\n    [Required]\n    public string Name { get; set; }\n    [Required]\n    public string Email { get; set; }\n}\n</code></pre>\n\n<p>please help.</p>\n"},{"tags":["c#","asp.net-mvc","parsing","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13211620,"title":"Parsing text into an object in MVC with missing data","body":"<p>I am getting some post data from an HTML form. The data that comes up is used to build a <code>TextualReport</code> object. I want to parse the various pieces of form data that come up and populate those parts of my model.</p>\n\n<p>The reason i am not using a model binder is this is a fairly complex object and indices of my lists can be missing (start at 2, skip 3 etc..). I am starting with an existing object, and only replacing the properties that came up in the post.</p>\n\n<p>I have the following object called <code>TextualReport</code>.</p>\n\n<pre><code>public class TextualReport {\n\n    public IList&lt;Section&gt; Sections { get; set; }\n    public IList&lt;string&gt; MiscInputs { get; set; }\n\n    public TextualReport(){\n        Sections = new List&lt;Section&gt;();\n        MiscInputs = new List&lt;string&gt;();\n    }\n}\n\npublic class Section{\n    public Section(){\n        Id = Guid.NewGuid();\n        Blocks = new List&lt;Block&gt;();\n    }\n\n    public Guid Id { get; set; }\n    public string Heading { get; set; }\n    public IList&lt;Block&gt; Blocks { get; set; }\n}\n\npublic class Block{\n    public Block(){\n        PreGraphText = new List&lt;string&gt;();\n        PreGraphInput = new List&lt;string&gt;();\n        Graphs = new List&lt;Graph&gt;();\n        PostGraphText = new List&lt;string&gt;();\n    }\n    public Guid Id { get; set; }\n    public string Heading { get; set; }\n    public IList&lt;string&gt; PreGraphText { get; set; }\n    public IList&lt;Graph&gt; Graphs { get; set; }\n    public IList&lt;string&gt; PostGraphText { get; set; }\n    public IList&lt;string&gt; PreGraphInput { get; set; }\n}\n\npublic class Graph{\n    public string Url { get; set; }\n    public string Caption { get; set; }\n}\n</code></pre>\n\n<p>From my HTML/Razor form, I get a sequence of text strings like the following:</p>\n\n<pre><code>TextualReport.Sections[1].Blocks[0].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[0].Graphs[1].Caption=\nTextualReport.Sections[1].Blocks[0].Graphs[2].Caption=\nTextualReport.Sections[1].Blocks[0].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[0].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[1].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[1].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[1].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[2].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[2].Graphs[1].Caption=\nTextualReport.Sections[1].Blocks[2].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[2].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[3].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[3].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[3].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[4].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[4].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[4].PreGraphInput[1]=\n</code></pre>\n\n<p>What would be the best approach to populate my existing data with the various pieces that came up in the form post? I get the model from the database, then update based on the new data.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13211138,"title":"Render Partial View only after HttpPost ActionHandler","body":"<p>I am making WCF service call using MyViewRequest view fields inside HttpPost ActionHandler. The goal is to show response using partial view, <code>MyViewResponse</code></p>\n\n<p>In brief I need to achieve these two items-</p>\n\n<ol>\n<li>Disable load of partial view on first load.</li>\n<li>Display Response (along with Request) after service call.</li>\n</ol>\n\n<p><strong>MyViewRequest.cshtml</strong></p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(false)\n    //html code\n}\n&lt;/div&gt;\n&lt;div id=\"dvResponse\"&gt;\n  @Html.Partial(\"MyViewResponse\");\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Partial view: MyViewResponse.cshtml</strong></p>\n\n<pre><code>@model MvcApplication3.Models.MyModel\n@{\n    ViewBag.Title = \"MyViewResponse\";\n}\n\n&lt;h2&gt;MyView&lt;/h2&gt;\n\n@Html.Label(Model.MyName, \"My Name\")\n</code></pre>\n\n<p>This was pretty straight forward in Asp.Net using userControl, But stuck up here, How can we achieve this in MVC3.</p>\n"},{"tags":["asp.net-mvc","image","html-helper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13211314,"title":"Display image in view using asp.net mvc","body":"<p>I want to display image in view using asp.net mvc ?\nI ham retrieved the image from database.</p>\n\n<p>This is my view code :</p>\n\n<pre><code>    &lt;td&gt;\n        &lt;%: Html.DisplayFor(modelItem =&gt; item.Product_img) %&gt;\n    &lt;/td&gt;\n</code></pre>\n\n<p>But the Index page is like this :</p>\n\n<p><img src=\"http://i.stack.imgur.com/HPcZx.jpg\" alt=\"enter image description here\"></p>\n\n<p>How can I display the image?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13211376,"title":"Add additional information into ASP.net auth cookie?","body":"<p>Is there a way to add additional information into the ASP.NET authentication cookie?  I would like to save my own internal user key in the cookie, and have it expire at the same time as the auth cookie per this question:\n<a href=\"http://stackoverflow.com/questions/13170618/mvc-save-a-token-in-session\">MVC save a token in session</a></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13209964,"title":"Creating components with their own Model View Controller folders. And change routes for them?","body":"<p>my problem is that i have a MVC4 project and i want to create some components that i want to add in some views using partial views. I will show you a picture of the folders logic that i want to create in my MVC project.</p>\n\n<p><img src=\"http://i.stack.imgur.com/mZGg2.png\" alt=\"enter image description here\"></p>\n\n<p>From this how can i add this partial views because when i try to acces them they are first looked in the main Views folder from my application, is there a way to make custum routes to my application?</p>\n\n<pre><code>@{ Html.RenderPartial(\"Components\\\\Chart\\\\View\\\\Index.cshtml\");  }\n</code></pre>\n\n<p>This gives an error like this. </p>\n\n<blockquote>\n  <p>The partial view 'Conmponents\\Chart\\View\\Index.cshtml' was not found\n  or no view engine supports the searched locations. The following\n  locations were searched:\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.aspx\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.ascx\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.aspx\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.ascx\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.cshtml\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.vbhtml\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.cshtml\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.vbhtml</p>\n</blockquote>\n"},{"tags":["asp.net-mvc","asp.net-web-api","httpclient"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13209010,"title":"console app HttpClient post to mvc web api","body":"<p>I have a default mvc web api instance built from the Visual Studio 2012 template.  It has the following routes and post method in the default ValuesController - the MVC site is unmodified from initial creation other than the contents of the Post method.  Also, I'm using .NET framework 4.0 since I'm planning to target Azure.</p>\n\n<p>Register method</p>\n\n<pre><code>public static void Register(HttpConfiguration config)\n{\n    config.Routes.MapHttpRoute(\n        name: \"DefaultApi\",\n        routeTemplate: \"api/{controller}/{id}\",\n        defaults: new { id = RouteParameter.Optional }\n    );\n}\n</code></pre>\n\n<p>and Post method</p>\n\n<pre><code>    // POST api/values\n    public string Post([FromBody]string value)\n    {\n        if (value != null)\n        {\n            return \"Post was successful\";\n        }\n        else\n            return \"invalid post, value was null\";\n    }\n</code></pre>\n\n<p>I created a Console application which uses HttpClient to simulate posting to the service, but unfortunately the \"value\" coming in to the Post is always null.  The Post method is successfully hit following the PostAsync call on HttpClient.</p>\n\n<p>It's not clear to me how to map my request such that value contains the StringContent I'm passing in...</p>\n\n<pre><code>    static void Main(string[] args)\n    {\n        string appendUrl = string.Format(\"api/values\");\n        string totalUrl = \"http://localhost:51744/api/values\";\n        HttpClient client = new HttpClient();\n        client.DefaultRequestHeaders.Add(\"Accept\", \"application/xml\");\n\n        string content = \"Here is my input string\";\n        StringContent sContent = new StringContent(content, Encoding.UTF8, \"application/xml\");\n\n        HttpResponseMessage response = null;\n        string resultString = null;\n\n        client.PostAsync(new Uri(totalUrl), sContent).ContinueWith(responseMessage =&gt;\n            {\n                response = responseMessage.Result;\n            }).Wait();\n\n        response.Content.ReadAsStringAsync().ContinueWith(stream =&gt;\n            {\n                resultString = stream.Result;\n            }).Wait();          \n    }\n</code></pre>\n\n<p>I'm new to the MVC web api and use of HttpClient - any help pointing me in the right direction would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":103,"score":4,"question_id":13166180,"title":"Force synchronous execution of asynchronous action in ASP.NET MVC 4","body":"<p>Since MVC 4 does not support asynchronous child actions (via <code>Html.Action</code>) I'm looking for a way to force the synchronous execution child actions. A simple workaround to this limitation is to provide synchronous versions of all my controllers actions:</p>\n\n<pre><code>public class FooAsyncController : Controller {\n    public async Task&lt;ActionResult&gt; IndexAsync() {\n        var model = await service.GetFoo().ConfigureAwait(false);\n        return View(model);\n    }   \n}\n\npublic class FooSyncController : FooAsyncController {\n    public ActionResult Index() {\n        return IndexAsync().Result; // blocking call\n    }   \n}\n</code></pre>\n\n<p>However, since we allow child action requests on all of our controller actions, doing this for every controller is a real PITA.</p>\n\n<p>Are there any extensibility points in the framework where we could inspect the return value of an action and, if it returns a <code>Task&lt;T&gt;</code> and we are handling a child action, force a synchronous call?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13210121,"title":"ASP MVC - Reverse a foreach","body":"<p>I have the following code which outputs a series of links for a nav bar:</p>\n\n<pre><code>    &lt;% foreach (var item in (Dictionary&lt;string, string&gt;)ViewData[\"navItems\"])\n        {\n        Response.Write(Html.ActionLink(item.Key, item.Value));\n        }\n    %&gt;\n</code></pre>\n\n<p>Is there anyway to alter this code so that the list of links is output in reverse order?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13197807,"title":"Newly added cshtml file not browsable","body":"<p>I'm new to MVC, razor &amp; webmatrix. \nI'm adding content to a website which I didn't create.</p>\n\n<p>Only the pages that the Creater of the website created can be viewed. I can view his partials and fulls.</p>\n\n<p>I can change content on the pages that can already be browsed. But when I try to add new pages they don't work. I can't view them, none of my partials return data at all.</p>\n\n<p>I'm not sure what type of information in include in my post to get a meaningful answer.</p>\n\n<p>thank you.</p>\n"},{"tags":["c#","jquery","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13206156,"title":"Toggle visibility of list item","body":"<p>I am using MVC 4 with Razor view engine.</p>\n\n<p>I want to display a nested unordered list comprised of years as parents and months as children.</p>\n\n<p>Consider the following HTML:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;ul&gt;\n    @foreach (var yr in Dates.Select(x =&gt; x.Year).Distinct())\n    {\n        &lt;li&gt;&lt;a href=\"#\" class=\"parent\"&gt;@yr&lt;/a&gt;&lt;/li&gt;\n        &lt;ul class=\"child\" style=\"display: none\"&gt;\n        @foreach (var mo in Dates.Where(x =&gt; x.Year == yr).Distinct())\n        {\n            &lt;li id=\"@yr\"&gt;&lt;a href=\"#\" class=\"submit-link\" id=\"@mo.Month\"&gt;@mo.ToString(\"MMMM\")&lt;/a&gt;&lt;/li&gt;\n        }\n        &lt;/ul&gt;\n    }\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have added the following script to make the \".child\" (dis)appear when I click on \".parent\" anchor.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n    $(function () {\n        $(\".parent\").click(function () {\n            $(this).closest(\"ul\").find(\".child\").toggle(\"fast\")\n            return false;\n        });\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>However it toggles ALL \".child\" items in the document. How to make it toggle only the child one?</p>\n"},{"tags":[".net","asp.net-mvc","visual-studio-2010","t4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13208768,"title":"T4MVC Error - T4 file is blocked or in a non trusted zone","body":"<p>I am running Visual Studio 2010 on a Windows 7 virtual machine inside of Parallels Desktop 8 on a Mac Book Pro.</p>\n\n<p>I'm trying to incorporate T4MVC into a new MVC4 project.  I installed the T4MVC package from Nuget and immediately started getting this error...</p>\n\n<p><strong>Failed to resolve include text for file:The path '\\psf\\Home...\\T4MVC.tt.hooks.t4' must be either local to this computer or part of your trusted zone. If you have downloaded this template, you may need to 'Unblock' it using the properties page for the template file in Windows Explorer.</strong></p>\n\n<p>I went into the \"Properties\" menu for the T4MVC.tt.hooks.t4 file, but I could not find any option or button to unblock it.</p>\n\n<p>My assumption is that this problem has something to do with the fact that I'm running on a virtual machine and therefore My project files are not in a trusted location.  But I'm not sure how to fix that.</p>\n\n<p>I've been searching around but can't seem to find any answers.  Any help would be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","methodnotfound"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13207600,"title":"Mvc 3 Html.action Method not found - Void Microsoft.Web.Infrastructure","body":"<p>I published to web server (Windows server 2008 R2 Enterprise-IIS 7) My Mvc 3 web site but dont work,why?</p>\n\n<p><strong>_Layout.cshtml:</strong></p>\n\n<pre><code>@Html.Action(\"GetLeftMenu\", \"Menu\", new { ulCss = \"navmenu-v\", CurrentContentID = ViewBag.CurrentContentID, LangID = Session[\"langID\"] })\n</code></pre>\n\n<p><strong>MenuController:</strong></p>\n\n<pre><code>    [OutputCache(Duration = 3600, VaryByParam = \"LangID;ulCss\")]\n        public MvcHtmlString GetLeftMenu(string ulCss, int? CurrentContentID, int? LangID = 1)\n        {\n...\n}\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>Method not found: 'Void Microsoft.Web.Infrastructure.DynamicValidationHelper.ValidationUtility.GetUnvalidatedCollections(System.Web.HttpContext, System.Collections.Specialized.NameValueCollection ByRef, System.Collections.Specialized.NameValueCollection ByRef, System.Collections.Specialized.NameValueCollection ByRef, System.Web.HttpCookieCollection ByRef)'.\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-routing","http-status-code-404","custom-error-pages"],"answer_count":8,"favorite_count":9,"up_vote_count":31,"down_vote_count":0,"view_count":26656,"score":31,"question_id":553922,"title":"Custom ASP.NET MVC 404 Error Page","body":"<p>I am trying to make a custom HTTP 404 error page when someone types in a URL\nthat doesn't invoke a valid action or controller in ASP.NET MVC.</p>\n\n<p>Instead of it displaying the generic Resource Not Found ASP.NET error...</p>\n\n<p>I don't want to use the web config to handle this.</p>\n\n<p>Is there any kind of routing magic I can do to catch any invalid URLs?</p>\n\n<p><strong>Update:</strong> I tried the answer given... however I still get the ugly resource not found message.</p>\n\n<p><strong>Another update</strong> OK. Apparently something changed in RC1.. I've even tried specifically trapping 404 on an HttpException and it still just gives me the resource not found page.</p>\n\n<p>I've even used mvcContrib's resource's feature and nothing. Same problem... Any ideas anyone? Please before I go nuts...</p>\n"},{"tags":["c#","asp.net-mvc","jcarousel","nopcommerce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13208114,"title":"Error executing child request for handler in plugin","body":"<p>I'm using nop commerce open source. I wanted to show the recently add products in home page. so what I did is I activated plugin Nop JCarousel  in the admin panel.</p>\n\n<p>But if I select \"Recently view product\" as a Data source type it is working fine.But if I select \"recently add product\" Data source type  there is error coming up.</p>\n\n<p>it says </p>\n\n<pre><code>Server Error in '/' Application.\nMethod not found: 'Nop.Core.IPagedList`1&lt;Nop.Core.Domain.Catalog.Product&gt; Nop.Services.Catalog.IProductService.SearchProducts(Int32, Int32, System.Nullable`1&lt;Boolean&gt;, System.Nullable`1&lt;System.Decimal&gt;, System.Nullable`1&lt;System.Decimal&gt;, Int32, System.String, Boolean, Int32, System.Collections.Generic.IList`1&lt;Int32&gt;, Nop.Core.Domain.Catalog.ProductSortingEnum, Int32, Int32, Boolean, System.Collections.Generic.IList`1&lt;Int32&gt; ByRef, Boolean)'.\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\nException Details: System.MissingMethodException: Method not found: 'Nop.Core.IPagedList`1&lt;Nop.Core.Domain.Catalog.Product&gt; Nop.Services.Catalog.IProductService.SearchProducts(Int32, Int32, System.Nullable`1&lt;Boolean&gt;, System.Nullable`1&lt;System.Decimal&gt;, System.Nullable`1&lt;System.Decimal&gt;, Int32, System.String, Boolean, Int32, System.Collections.Generic.IList`1&lt;Int32&gt;, Nop.Core.Domain.Catalog.ProductSortingEnum, Int32, Int32, Boolean, System.Collections.Generic.IList`1&lt;Int32&gt; ByRef, Boolean)'.\n\nSource Error:\n\n\nLine 3:  @foreach (var widget in Model)\nLine 4:  {\nLine 5:      @Html.Action(widget.ActionName, widget.ControllerName, widget.RouteValues)\nLine 6:  }\n</code></pre>\n\n<p>Any idea on how to solve this? </p>\n"},{"tags":["c#","asp.net","asp.net-mvc","dll","metadata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13204312,"title":"Unable to remove \"Metadata file \"...\\bin\\foo.dll\" is not available\" error","body":"<p>I am getting this issue for NewtonSoft Json dll. It's saying namespace 'Json' does not exist in namespace 'System.Runtime.Serialization'.</p>\n\n<p>I had cleaned and built the code again. Also tried to add the dll into the bin folder but still no luck.</p>\n\n<p>Why is this happening and how can I overcome this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12802171,"title":"ASP.NET MVC 3 update field before validation","body":"<p>The problem I'm having right now it's that ASP.NET MVC validates the request object, <em>user</em> in this case</p>\n\n<pre><code>public ActionResult Edit(User user)\n</code></pre>\n\n<p>What I want to do is that if the user's password is left blank, do not update the password, just use the old password, but if it's set, update it.</p>\n\n<p>The problem is that the framework complains that user does not has a password, even if I update the <em>user</em> object, it complains</p>\n\n<pre><code>public ActionResult Edit(User user)\n{\n    user.Password = \"Something\";\n\n    // more code...\n}\n</code></pre>\n\n<p>Apparently it does the validation on the request object, is there a way I can skip the validation in this case, or at least delay it until I finished modifying the user object?</p>\n\n<p>This is the full method code</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(User user)\n{    \n    if (string.IsNullOrEmpty(user.Password))\n    {\n        var oldUser = db.Users.Single(u =&gt; u.Id == user.Id);\n        user.Password = oldUser.Password;\n    }\n\n    try\n    {\n        db.SaveChanges();\n        return RedirectToAction(\"Index\");\n    }\n    catch\n    {\n        return View(user);\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","oauth","twitter-oauth","dotnetopenauth"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":205,"score":8,"question_id":12963536,"title":"OAuthWebSecurity \"Remember me\" for Twitter","body":"<p>Using DotNetOpenAuth on MVC4 C# for my application to get authentication for users from Facebook, Twitter, Google+ and yahoo. Currently all the providers other than twitter will allow existing users to just log in without asking for permission when coming back to the site. </p>\n\n<p>I noticed that Twitter has a \"Remember me\" check box on permission request on their page. Even if I select it, it still asks me next time for my twitter username and password. The other three providers automatically authenticate me without seeing their sign in page.</p>\n\n<p>How to get users coming back to my site through Twitter log in to not go through permission request again? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13207043,"title":"User routing in ASP.NET MVC for urls like www.website.com/users/jeffAtwood","body":"<p>I am trying to show user details at the following url : </p>\n\n<p>www.website.com/users/yasser</p>\n\n<p>where the last entry <code>yasser</code> is the username I have tried a couple of routes but it just does nt work.</p>\n\n<p>My User controller is as shown below.</p>\n\n<pre><code>public class UserController : Controller\n{\n    public ActionResult Index(string username)\n    {\n        var model = _service.GetUserDetails(username);\n        return View(model);\n    }\n}\n</code></pre>\n\n<p>I have reffered <a href=\"http://stackoverflow.com/questions/3000547/asp-net-mvc-user-routing-like-that-in-stackoverflow\">this</a> and couple of other links, but I really could not figure out how it worked.</p>\n\n<p>Can some one help me out on this. Thanks</p>\n\n<p><strong>Edit</strong> :</p>\n\n<p>My current route config is below</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            name: \"Default\",\n            url: \"{controller}/{action}/{id}\",\n            defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n        );\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2623,"score":0,"question_id":2137393,"title":"asp.net mvc postback","body":"<p>I have a controller with the following two Edit methods.  The edit form displays correctly with all additional dropdown lists from the FormViewModel.  However, when I changed some field values and submitted the form. None of the changed fields were saved. The fields in the postbask collection have default or null values.   I have another edit form which update another table.  On submit, the changed values are saved. Does anyone know why?</p>\n\n<pre><code>// GET: /Transfers/Edit/5\npublic ActionResult Edit(int id)\n{\n    Transfer transfer = myRepository.GetTransfer(id);\n\n    if (transfer == null)\n        return View(\"NotFound\");\n\n    return View(new TransferFormViewModel(transfer));\n\n} \n\n//\n// POST: /Transfers/Edit/5\n\n[AcceptVerbs(HttpVerbs.Post)]\npublic ActionResult Edit(int id, Transfer collection)\n{\n\n    Transfer transfer = vetsRepository.GetTransfer(id);\n\n    if (transfer == null)\n        return View(\"NotFound\");\n    else\n    {\n        try\n        {\n            UpdateModel(transfer);\n            vetsRepository.Save();\n\n            return RedirectToAction(\"Details\", new { id = transfer.TransfersID });\n        }\n        catch\n        {\n            ModelState.AddModelErrors(transfer.GetRuleViolations());\n\n            return View(new TransferFormViewModel(transfer));\n        }\n    }\n}\n</code></pre>\n"},{"tags":["ajax","asp.net-mvc","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13205334,"title":"Model Passed into MVC 4 Controller Null","body":"<p>I'm trying to serialize a form and pass it into a controller as a model. What I'm doing I've done in the past, but it's not working for some reason, so I suspect I am missing something stupid. Perhaps you can find it.</p>\n\n<p>In my controller I have a method:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult AddShippingLocation(PricingRequestModel model)\n    {\n        model.ShippingLocationsModel.Add(new ShippingLocationsModel());\n\n        return PartialView(\"shiplocationPartial\", model);\n    }\n</code></pre>\n\n<p>In my view I have a script that looks like this:</p>\n\n<pre><code>function AddShippingLocation() {\n    $.ajax({\n        data: { model: $('#shippinginfoform').serialize() },\n        type: \"POST\", \n        url: \"/PricingRequest/AddShippingLocation\", \n        success: function (response) {\n            $('#shiplocation-wrapper').html(response);\n        }\n    })\n}\n</code></pre>\n\n<p>This is called from a link that gets clicked. Also in the view I have a form that uses this:</p>\n\n<pre><code>@using (Html.BeginForm(\"AddShippingLocation\", \"PricingRequest\", FormMethod.Post, new { id = \"shippinginfoform\" }))\n</code></pre>\n\n<p>{</p>\n\n<p>I put the Addshippinglocation in as the method because I wanted to test to see if the model would be serialized using the built in helper. The model gets passed in properly using Html.BeginForm, it also gets passed in properly when using Ajax.BeginForm. When using jquery.serialize, though, it doesn't get passed in properly. On a side note, I'm using MVC 4. Any ideas? Thanks.</p>\n\n<p>EDIT: Here's the request headers. The top one is a successful post of the model to the method, the bottom is the .serialize() that passes in a null model. I examined the post strings and the are the exact same.</p>\n\n<pre><code>Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Encoding gzip, deflate\nAccept-Language en-US,en;q=0.5\nConnection  keep-alive\nCookie  .ASPXAUTH=9F06BF2A7D03211E0D2ACEC26D7A568754C89F8A265EE61D9F8010BB8DF1D97670212F1E853FDE960E87AAC5DC7D364A251F670560448482517DA7C072864F62AC0C5C3E1EE8D375ACC1EA8F4D63CFC3C1DD28BBDCAC945155D15289DCDDA3B540756C0609611C13A438B5FF4CA747219290AFB51F58B8AD35AE40C01D3AFAF8B32ADD7E200148B1E1646400CAC0F116; ASP.NET_SessionId=v3qwt02dn1pd13posl5zzk3n\nHost    localhost:2652\nReferer http://localhost:2652/PricingRequest/custinfo\nUser-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nRequest Headers From Upload Stream\nContent-Length  471\nContent-Type    application/x-www-form-urlencoded\n\nAccept  */*\nAccept-Encoding gzip, deflate\nAccept-Language en-US,en;q=0.5\nCache-Control   no-cache\nConnection  keep-alive\nContent-Length  555\nContent-Type    application/x-www-form-urlencoded; charset=UTF-8\nCookie  .ASPXAUTH=9F06BF2A7D03211E0D2ACEC26D7A568754C89F8A265EE61D9F8010BB8DF1D97670212F1E853FDE960E87AAC5DC7D364A251F670560448482517DA7C072864F62AC0C5C3E1EE8D375ACC1EA8F4D63CFC3C1DD28BBDCAC945155D15289DCDDA3B540756C0609611C13A438B5FF4CA747219290AFB51F58B8AD35AE40C01D3AFAF8B32ADD7E200148B1E1646400CAC0F116; ASP.NET_SessionId=v3qwt02dn1pd13posl5zzk3n\nHost    localhost:2652\nPragma  no-cache\nReferer http://localhost:2652/PricingRequest/custinfo\nUser-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nX-Requested-With    XMLHttpRequest\n</code></pre>\n"},{"tags":["asp.net-mvc","performance","nhibernate","guid"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13202558,"title":"nhibernate guid performance","body":"<p>What would be the overhead of using GUID's instead of an integer identity in nHibernate for table primary keys? </p>\n\n<p>The main reason for use would be the obfuscation of table ids on user facing data.</p>\n"},{"tags":["asp.net-mvc","linq","sorting","jqgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":519,"score":0,"question_id":10361567,"title":"Jqgrid Sorting not working","body":"<p>i created a jqgrid with this follwoing code and i succeeded creating jqgrid without sorting . so i modified the code , but it doesn't sort the data and showing the following error, </p>\n\n<pre><code>'firstName' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near simple identifier, line 6, column 1.\n</code></pre>\n\n<h2> Controlller</h2>\n\n<pre><code>public ActionResult GridData(string sidx, string sord, int page, int rows)\n    {\n        int pageIndex = Convert.ToInt32(page) - 1;\n        int pageSize = rows;\n        int totalRecords = db.customers.Count();\n        int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);\n\n        var _Customers = db.customers.OrderBy(sidx + \" \" + sord).Skip(pageIndex * pageSize).Take(pageSize).ToArray();\n\n        var jsonData = new\n        {\n            total = (int)Math.Ceiling((float)totalRecords / (float)rows),\n            page = page,\n            records = totalRecords,\n            rows = (from r in _Customers.AsEnumerable()\n                    select new\n                    {\n\n                        id = r.id,\n                        cell = new[] { \"&lt;input type='radio' style='cursor:pointer' class='view_Account'  name='selectedCall'  id='\" + r.id + \"' value='\" + r.id + \"' /&gt;\", r.firstName, r.lastName }\n                    }\n                   ).ToArray()\n        };\n        return Json(jsonData, JsonRequestBehavior.AllowGet);\n\n    }\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>$(\"#list\").jqGrid({\n        url: '/Customer/GridData/',\n        datatype: 'json',\n        colNames: ['', 'FirstName', 'LastName'],\n        colModel: [\n        { name: 'ssss', width: 20, search: false },\n                    { name: 'firstName', sortable: true, sorttype: \"text\", searchoptions: { sopt: ['eq', 'ne'] }, width: 180 },\n                    { name: 'lastName', sortable: true, sorttype: \"text\", width: 183 }\n\n                ],\n        rowNum: 100,\n        width: '200px',\n        height: '100px',\n        sortname: 'firstName',\n        sortorder: \"asc\",\n        pager: jQuery('#pager')\n    });\n</code></pre>\n"}]}
{"total":44782,"page":6,"pagesize":100,"questions":[{"tags":["asp.net","asp.net-mvc","sharepoint","word","webdav"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":378,"score":0,"question_id":10422841,"title":"Loading/Saving Word Documents from Web App (asp.net MVC)","body":"<p>I'm making a web app.  Part of it includes the automatic generation of word documents (letters).  Those documents need to be opened by the end user, then saved back to the server once they've finished editing.</p>\n\n<p>I tried using webdav for this but the only browser I could actually launch word from (using active-x) was IE.  I also found a plugin for firefox, but for Chrome I couldn't find a way that worked.</p>\n\n<p>Next I thought about making the clients map a drive to webdav (or similar), then offering up the files as file://... links, but that only works if the webpage is on the local machine.</p>\n\n<p>Before I resort to ditching word (the clients won't like this) and using CKEditor or TinyMCE, is there another way?</p>\n\n<p>In short, I'd like to have links to a document on the page, which when clicked are opened in word, but the file should stay remote - and then when saving, it's the remote file that gets updated.</p>\n\n<p>I've also looked at Zoho but it could be very expensive for this project, plus I don't think it can be white-labelled and also looks a bit old fashioned, UI wise.</p>\n\n<p>Maybe Sharepoint can do what I need?  Haven't looked at that much.  Also thought of making a client app to run in the system tray and deal with things.</p>\n\n<p>If there was a decent way of editing Word docs from within the browser with something like CKEditor/TinyMCE and once finished, conversion back to Word format actually worked 100%, that would suffice.</p>\n\n<p>I'm open to totally fresh ideas if anyone has any...</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui-tabs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13205327,"title":"jQuery tab loading design","body":"<p>This is my first ASP.NET MVC application and I am trying to select a better option for POC I am working on using ASP.NET MVC 3 and jQuery 1.9.1. Please suggest which option is better and why.Currently I have 2 implementations as below.</p>\n\n<p>1) I am loading 3 partial views on demand in 3 different jQuery tabs. On demand means when user clicks on a particular tab, I call associated controller action (using GET) using Ajax and populate the model object that feeds the partial view. Whenever user clicks on other tabs and comes back to the previous one, since we are loading tab data on every request, the new request data wipes out the user entered data. To prevent this, I intend to use a Javascript object (one object per tab) that maps to model object. I will update the global javascript object whenever user changes data in the controls.This will allow me to get the current data. When user clicks on submit, (only 1 submit button, no 'Save' button for individual tabs) I post the JS object to the controller using Ajax. The controller action (using POST) will be executed and I can use the model object for further processing.  </p>\n\n<p>2) Another option is load all the tabs in the application at once with all dropdowns filled in. Let the user edit the data. I will capture the data in one global javascript (one object per tab) when user updates fields on the web page. When user clicks on submit, (only 1 submit button, no 'Save' button for individual tabs) I post the JS object to the controller using Ajax. The controller action (using POST) will be executed and I can use the model object for further processing returning partial view (or JSON ?) as response. </p>\n\n<p>Please let me know if you have anything to improve in any of the two approaches. </p>\n\n<p>In actual application there could 10-15 tabs with lots of controls so it is really important for me to get clear understanding on the approach so as not to land in trouble in future due to improper design. </p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13201319,"title":"ASP.NET MVC append div to body","body":"<p>I make a customize controller about calendar. But a div required  to append to body.  I search,but get nothing . The following code what I implement  works,but not fine. I figure out that, div should be put to the end of body ,just like <code>jquery $('body').append('div')</code> But I don't know how to code in MVC helper.</p>\n\n<pre><code>  public static MvcHtmlString CalendarTextBox(this HtmlHelper helper, string name, DateTime? value, DateTime start, DateTime max, string nextTriggerId, object htmlAttributes = null)\n            {\n                var result = helper.TextBox(name, value, htmlAttributes);\n                var str = result.ToHtmlString().Replace(@\"/&gt;\", string.Format(@\"  mod=\"\"calendar|notice\"\" \n       mod_notice_tip=\"\"yyyy-mm-dd\"\" \n      mod_calendar_rangeStart=\"\"{0}\"\" \n      mod_calendar_rangeEnd=\"\"{1}\"\"\n      mod_calendar_focusNext=\"\"{2}\"\" //&gt;\", start.ToString(\"yyyy-MM-dd\"), max.ToString(\"yyyy-MM-dd\"), nextTriggerId));\n\n                if (null == helper.ViewData[\"calendar\"])\n                {\n                    str += string.Format(\n                       @\"&lt;div style=\"\"HEIGHT: 0px\"\"id=\"\"jsContainer\"\"class=\"\"jsContainer\"\"&gt;&lt;div style=\"\"DISPLAY: none\"\"id=\"\"jsHistoryDiv\"\"&gt;&lt;/div&gt;&lt;textarea style=\"\"DISPLAY: none\"\"id=\"\"jsSaveStatus\"\"&gt;&lt;/textarea&gt;&lt;div style=\"\"Z-INDEX: 999; POSITION: absolute; DISPLAY: none; OVERFLOW: hidden\"\"\n    id=\"\"tuna_alert\"\"&gt;&lt;/div&gt;&lt;div style=\"\"Z-INDEX: 120; POSITION: absolute; VISIBILITY: hidden\"\"\n    id=\"\"tuna_jmpinfo\"\"&gt;&lt;/div&gt;&lt;div style=\"\"Z-INDEX: 120; POSITION: absolute; DISPLAY: none\"\"id=\"\"tuna_calendar\"\"\n    class=\"\"tuna_calendar\"\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;SCRIPT type=text/javascript charset=utf-8 src=\"\"{0}/js/datepicker/tuna_100324_jsLoader.js\"\"&gt;&lt;/script&gt;&lt;script type=\"\"text/javascript\"\"&gt;var JL=new CtripJsLoader();var files=[[\"\"{0}/js/datepicker/tuna_100324_index.js\"\",\"\"utf-8\"\",true]];JL.scriptAll(files);&lt;/script&gt;\",\n                       Define.ASSET_PATH);\n                    helper.ViewData[\"calendar\"] = 1;\n                }\n                return MvcHtmlString.Create(str);\n            }\n</code></pre>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13205035,"title":"Passing query data from controller to view","body":"<p>I have been stuck on this problem for too long and would love some help. </p>\n\n<p>On a view people can select two items from two radiobutton lists which returns via a FormMethod.Get to the Index event in HomeController. </p>\n\n<p>These 2 values, 'parts and 'use' are queried to return a result and its passed back to the view via a viewbag. However the viewbag returns a line like { Item = Kona, Price = 400.0000, Quantity = 2 } in the view.</p>\n\n<p>Whereas I want to return each item such as item.Item, Item.Price so I can use them individually. </p>\n\n<p>I have tried everything I can find to no avail. \nAnonymous classes items also throw red errors </p>\n\n<p>View </p>\n\n<pre><code>foreach(var item in ViewBag.getstock)\n{ //Show it and then make a new line with the &lt;BR/&gt;\n    @item &lt; br / &gt;\n    //{ Item = Kona, Price = 400.0000, Quantity = 2 } \n}\n</code></pre>\n\n<p>HomeController</p>\n\n<pre><code> public ActionResult Index()\n {\n     //this returns the entire query string\n     ViewBag.querystring = Request.QueryString;\n\n     //if any keys are in the url from the view\n     if (Request.QueryString.HasKeys())\n     {\n         //extract them out so that you can use them\n         //key = the name such as Part or Use it goes Key &amp; Value this is passed to a Viewbag\n         //get(o) is getting the value at place 0, the first value in the url\n\n         ViewBag.querystringvalue0 = Request.QueryString.Get(0);\n         ViewBag.querystringvalue1 = Request.QueryString.Get(1);\n     }\n\n     //if there is any query string\n     if (Request.QueryString.HasKeys())\n     {\n         //pass the data to a couple of variables,\n         var parts = Request.QueryString.Get(0);\n         var use = Request.QueryString.Get(1);\n\n         //put them in a new query and return the results\n         ViewBag.getstock = from p in Bikeshopdb.Stocks\n         where p.PartName == parts &amp;&amp; (p.Road == use || p.Mtn == use || p.Hybrid == use) select new\n         {\n             p.Item, p.Price, p.Quantity\n         };\n\n     }\n     return View(Bikeshopdb.Stocks.ToList());\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","ef-database-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":68,"score":-1,"question_id":13186013,"title":"MVC4 Foreign Key constraint prevents posting insert to SQL db","body":"<p>Using MVC4 I'm trying to insert a column into a linking table that has a two column composite key. Both columns are primary key in two separate tables.</p>\n\n<p>Key1 is picked up from a hidden field in the web form which is generated from an id passed in the URL.</p>\n\n<p>Key2 is the selected value picked up from a dropdown list of names from the second PK table.</p>\n\n<p>As far as I can tell, the values are correct (they appear in the two primary key tables).</p>\n\n<p>Does anyone know why I'm getting an error from the HttpPost Create action (mainly default scaffolding code) that tells me there is a conflict with the first PK -> FK constraint?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13204121,"title":"Including a List<SpecificType> in a model, and how to populate it","body":"<p>I currently have three Model classes:</p>\n\n<pre><code>public class MarketReport\n{\n    public MarketReportAbbrStores LISTOFSTORESUMMARY {get; set;}\n\n}\n\npublic class MarketReportAbbrStores : List&lt;AbbrStore&gt;\n{\n    public AbbrStore abbrStore  { get; set; }\n}\n\n    public class AbbrStore\n{\n    public string StoreName { get; set; }\n    public int MemberCount { get; set; }\n    public int LeaderCount { get; set; }\n    public int ActivistCount { get; set; }\n}\n</code></pre>\n\n<p>Now, I have no idea if I am doing the above correctly, but I want to populate the list within the MarketReport</p>\n\n<pre><code>        foreach (var store in stores)            \n        {\n\n            AbbrStore abbrstore = new AbbrStore();\n            abbrstore.StoreName = store;\n            marketInformation.LISTOFSTORESUMMARY.Add(abbrstore);\n            //ERROR: Object reference not set to an instance of an object.\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","iis","web-deployment"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":26,"score":1,"question_id":13204109,"title":"How to publish or deploy .NET website without delays","body":"<p>How to publish or deploy .NET website without delays? </p>\n\n<p>I have look for websites that are build over .NET technologies, like StackOverflow, and I never saw them down because an update is being made. For my web sites, I got down time in minors updates, like correcting some bugs on my Controllers (I use MVC), not by doing something bigger like database or server movements.</p>\n\n<p>So how can I prevent site loading delays due to ASP.NET Startup? \nI know that it require \"ASP.NET worker process\" to compile the code, but how can I prevent the traffic issues.</p>\n"},{"tags":["javascript","asp.net","ajax","asp.net-mvc","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13203772,"title":"Is there a way to send an object as well as a separate variable in an ajax POST request","body":"<p>I have a post request I am doing like so:</p>\n\n<pre><code>var addProject = function (project, id) {\n            return $.ajax(projectUrl, {\n            type: \"POST\",\n            data: { project: project, id: id }\n    });\n};\n</code></pre>\n\n<p>This is all fine, and it send up my project object (in JSON) with no problem. What i want to do is this request but also add in a key (that does not belong in the project object) that I can pass to the server controller. Any idea if I can do this, or what is a good way to do this. I really don't want to have to go back and change my object models to account for a key that I will only need every once in awhile.</p>\n\n<p>This is an ASP.NET MVC4 project, and it is going back to a web api controller if that matters.</p>\n\n<p>EDIT: here is my server side stuff</p>\n\n<pre><code>    public HttpResponseMessage PostNew(Project project, int id)\n    {\n        //TODO grab the client to add the project to\n        Uow.Projects.Add(project);\n        Uow.Commit();\n\n        HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, project);\n        //response.Headers.Location = new Uri(Url.Link(\"ApiControllerAction\", new { id = client.ID }));\n        return response;\n    }\n</code></pre>\n\n<p>Maybe I am not being clear enough. I want to pass in the project object, and then just an int variable. Passing project alone works, but if I try to pass the int it gives me a 400 error</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","bundle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13204151,"title":"How can I bundle a specific bundle during development in Asp.Net MVC 4","body":"<p>Given these bundles:</p>\n\n<pre><code>     public static void RegisterBundles(BundleCollection bundles)\n     {\n        // 3rd party scripts\n        bundles.Add(new ScriptBundle(\"~/scripts\")\n            .IncludeDirectory(\"~/Scripts/\", \"*.js\"));            \n\n        // my scripts\n        bundles.Add(new ScriptBundle(\"~/myscripts\")\n            .IncludeDirectory(\"~/MyScripts/\", \"*.js\"));\n     }\n</code></pre>\n\n<p>During development it would be helpful to bundle just the first bundle, the 3rd party scripts, but not the second.</p>\n\n<p>Is there any way to specify that one bundle shall be bundled and maybe even minified, but the other one not?</p>\n\n<p>I thought about adding something like</p>\n\n<pre><code> BundleTable.EnableOptimizations = true;\n</code></pre>\n\n<p>but this would bundle all bundles. On the other hand, the bundle classes, like ScriptBundle have no members that would allow me to force their bundling.</p>\n"},{"tags":["c#","asp.net-mvc","ms-project","mpxj"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13203732,"title":"Why my method getTaskByID from ProjectFile in the library Mpxj return null?","body":"<p>I have read in the page <a href=\"http://mpxj.sourceforge.net/apidocs/net/sf/mpxj/ProjectFile.html\" rel=\"nofollow\">http://mpxj.sourceforge.net/apidocs/net/sf/mpxj/ProjectFile.html</a> that the method GetTaskById returns the requested task, or null if not found, but i don't know why the activity is not found.</p>\n\n<p>Here my code:</p>\n\n<pre><code> var actividades=db.Actividades.Where(s=&gt;s.ProyectoId==ProyectoId).Include(s=&gt;s.ActApuCompuesto);\n\n        ProjectFile pfile = new ProjectFile();\n\n        foreach(var item in actividades){\n            Task task= pfile.addTask();\n            task.setName(item.Nombre);\n            task.setDuration(Duration.getInstance(item.Cantidad * item.ActApuCompuesto.DuracionApu(), TimeUnit.DAYS));\n            task.setID(new Integer(item.Id));\n        }\n        //pfile have all activities, I check it.\n\n\n        foreach (Task task in ToEnumerable(pfile.getAllTasks()))\n        {\n\n            int valor=task.getID().intValue();\n            var precedencias=db.ActividadRelacionPrecedencias.Where(s =&gt; s.Actividad1Id ==valor );\n              foreach (var item2 in precedencias)\n              {//item2.Actividad2Id not is null\n                   Task taskPrec = pfile.getTaskByID(java.lang.Integer.valueOf(item2.Actividad2Id));\n               //But taskprec is null\n                  task.addPredecessor(taskPrec, relationType(item2.RelacionPrecedenciaId), Duration.getInstance(item2.MasDias, TimeUnit.DAYS));\n              }\n\n\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","ajax.beginform"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13202216,"title":"MVC HttpPost modify Model and replace view","body":"<p>Can someone please help me understand this. I have the following code:</p>\n\n<p>The controller</p>\n\n<pre><code>public ActionResult Stuff(PersonModel model)\n{\n    model.Address = \"Some Address\";\n\n    return PartialView(\"_Registration\", model);\n}\n</code></pre>\n\n<p>The View</p>\n\n<pre><code>    @Ajax.BeginForm(\"Stuff\", new AjaxOptions(){ HttpMethod=\"POST\", UpdateTargetId=\"the_form\", InsertionMode=InsertionMode.Replace, OnSuccess=\"Stuff\"  })\n{\n    &lt;div id=\"the_form\"&gt;\n        @{Html.RenderPartial(\"_Registration\", new TypeScriptTest.Models.PersonModel());}\n    &lt;/div&gt;\n\n    &lt;input type=\"submit\" value=\"Get Addreess\" /&gt;\n}\n</code></pre>\n\n<p>The Partial View</p>\n\n<pre><code>@model TypeScriptTest.Models.PersonModel\n\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            Name: \n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.TextBoxFor(c =&gt; c.Name)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            Address: \n        &lt;/td&gt;\n        &lt;td&gt;\n             @Html.TextBoxFor(c =&gt; c.Address)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The data is posted with whatever I type in the two fields. But then I replace the Address property value with \"Some Address\" and return a PartialView I would expect to get a new view that replaces the old. This probably happens, but the view that replaces the old does not include the new \"Some Address\" value. It just looks exactly like the view I posted.</p>\n\n<p>I have a workaround, but I want to understand what is happening here. My workaround is as follows:</p>\n\n<pre><code>public ActionResult Stuff(PersonModel model)\n{\n    model.Address = \"Some Address\";\n\n    var v = PartialView(\"_Registration\");\n\n    var view = v.ViewEngineCollection.OfType&lt;System.Web.Mvc.RazorViewEngine&gt;().Single().FindPartialView(new ControllerContext(HttpContext, RouteData, this), \"_Registration\", false);\n\n    var result = new PartialViewResult() { View = view.View };\n\n    result.ViewData.Model = model;\n\n    return result;\n}\n</code></pre>\n\n<p>Here I can bypass cache using false as the last parameter in FindPartialView. Setting this parameter to true results in the same problem as the one in discussion.</p>\n\n<p>Why is this happening and what is the correct way to get around this problem? My workaround works fine, but I would like to understand the problem.</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13202383,"title":"Return list of mapped classes - Entity Framework","body":"<p>I have this class that is linked to a View in the SQL Server:</p>\n\n<pre><code>[Table(\"V_Clients\")]\npublic class Client\n{\n    [Key]\n    public int ClientId { get; set; }\n    public short BranchId { get; set; }\n    public string CorporateName { get; set; }\n    public string TIN { get; set; }\n    public string Address { get; set; }\n    public string Phone { get; set; }\n    public string Id { get; set; }//NroCi\n    public short CityId { get; set; }\n    public short ZoneId { get; set; }\n    public short SubZoneId { get; set; }\n    public short VendorId { get; set; }\n    public short PriceListId { get; set; }\n    public short CollectorId { get; set; }\n\n    [ForeignKey(\"BranchId\")]\n    public virtual Branch Branch { get; set; }\n\n    [ForeignKey(\"CityId\")]\n    public virtual City City { get; set; }\n\n    [ForeignKey(\"ZoneId\")]\n    public virtual Zone Zone { get; set; }\n\n    [ForeignKey(\"SubZoneId\")]\n    public virtual SubZone SubZone { get; set; }\n\n    [ForeignKey(\"VendorId\")]\n    public virtual Vendor Vendor { get; set; }\n\n    [ForeignKey(\"PriceListId\")]\n    public virtual PriceList PriceLists {get;set;}\n\n    [ForeignKey(\"CollectorId\")]\n    public virtual Collector Collector { get; set; }\n}\n</code></pre>\n\n<p>but when I try to make a list of it like this:</p>\n\n<pre><code>public ActionResult Index()\n    {\n        var clients = db.Clients.Include(c =&gt; c.Branch).Include(c =&gt; c.City).Include(c =&gt; c.Zone).Include(c =&gt; c.SubZone).Include(c =&gt; c.Vendor).Include(c =&gt; c.PriceLists).Include(c =&gt; c.Collector);\n        return View(clients.ToList());\n    }\n</code></pre>\n\n<p>nothing happens. Could it be because of the relationships?</p>\n\n<p>Note: All classes are linked to views and work fine with the others except my <code>Client</code> class.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13202401,"title":"Resolve Error in MVC 4 Razor","body":"<p>in .cs files when you encounter errors like \"The type or namespace name 'Products' could not be found (are you missing a using directive or an assembly reference?)\"</p>\n\n<p>you right click it and select resolve to automatically add missing assembly references. in razor .cshtml, how do you do this?</p>\n"},{"tags":["asp.net-mvc","linq-to-sql","asp.net-mvc-2","linq-to-entities","selectlist"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":557,"score":0,"question_id":6984737,"title":"Adding an extra data text field in SelectList in MVC","body":"<p>I am using a select list to pass text to the checkbox , What I want is to pass the 2 text fields to the checkboxlist , but Select list doesnt have any options to provide 2 or 3 data text field , I tried to customize it like but cant get the Intellisense working :</p>\n\n<pre><code> public ActionResult Create()\n    {\n        IProductRepository ProductResp = new ProductRepository();\n        IQueryable&lt;Object&gt; getAllProducts = ProductResp .GetProductsSelectlist();\n\n        List&lt;object&gt; newList = new List&lt;object&gt;();\n        foreach (var events in getAllProducts)\n            newList.Add(new\n            {\n                Id = getAllProducts.Name, // I cant get .Name or DateAdded Intellisense here\n                Name = getAllProducts.Name + \" \" + getAllProducts.DateAdded\n            });\n\n        ViewData[\"events\"] = new SelectList(newList.ToList(), \"Id\",\"Name\");\n        return View();\n    } \n</code></pre>\n\n<p>ProductRepository</p>\n\n<pre><code> public IQueryable&lt;Object&gt; GetProductssSelectlist()\n    {\n\n        ApexWorldEntities entity = new ApexWorldEntities();\n\n        var query = from v in entity.Products\n                    where v.Date &gt; DateTime.Now \n                    select new { ProductID = v.ID, v.Name , v.Date};\n        return query.OrderBy(v =&gt; v.Date);\n\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","windows-server-2008","round-robin","session-state-server"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12236475,"title":"Session state lost in asp.net web farm","body":"<p>I've been busy with this for months now.</p>\n\n<p>I currently have 2 servers for 1 website. Using round robin dns I find that in the beginning everything works (checking the ip of the website it changed but I can go on with my session), but after a while I lose my session, seems like the formsauthentication cookie cannot be read and is being discarded. (assumption) But this does not happen all the time. Only sometimes.</p>\n\n<p>I'm using iis7 shared configuration, I set the machine key and I'm using stateserver pointing to one of the servers and I verified that on both servers the stateserver works. </p>\n\n<p>I read something about the IIS application path, but I don't really know what is meant by that, is it the path of the webapp, or the path where IIS is installed? In both cases they are the same.</p>\n\n<p>Anyone have some ideas?</p>\n"},{"tags":["asp.net-mvc","security","query-string","guid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13201844,"title":"table ids in querystrings","body":"<p>We have an MVC 3 application that uses nHibernate. There are various controller actions that expose the ids of objects contained in the database, e.g. /edit/1. These are just sequential numeric ids of the records in the database.</p>\n\n<p>Would it be better security wise to use GUID's instead, to prevent URL tampering?</p>\n"},{"tags":["asp.net-mvc","oauth"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13202340,"title":"Authenticate a user on a mobile with Google, Facebook and access a Web API","body":"<p>I am working on a project that that has a Windows 8 application, a website and some Web API services which are accessed by the Win8 client. I plan on allowing users to log into the website and Win8 client using Google, Live, etc. On the Win8 client I can use the WebAuthenticationBroker and on the website I can use OAuthWebSecurity. Before the Win8 client can access the Web API I would like to know that the user has been authenticated before allowing a request to processed and I would like to know who the request came from.</p>\n\n<p>For both the Win8 client and website I can login using Google, etc, without problems. This works well. But now I would like the Web API to know I've logged in. I did think of having Google, for example, redirect to the Web API which would then extract some user information and record the fact they have been authenticated.</p>\n\n<p>From what I've read it seems that any token returned by Google, etc, is only for accessing their services and should not really be used as an indication the user has been authenticated. If this is the case would I be correct in thinking that when the redirect happens, and the authentication is successful, then from that point on I can assume the user is who they say they are? If so, then I would think that using my own token, with some kind of expiration, would be needed to validate requests from the client?</p>\n\n<p>Does this sound like a reasonable approach?</p>\n\n<p>I am using .NET 4.5 and ASP.NET MVC 4.</p>\n\n<p>I'm not all that knowledgeable on the security side, so any guidance will be very much appreciated.</p>\n"},{"tags":["asp.net-mvc","wcf","weboperationcontext","operationcontext"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13201487,"title":"WCF how can I get the current configuration for an existing serviceContract instance","body":"<p>I'm building a WCF service that will be hosted in an mvc application via a service route.  I'm trying to test the service.  My issue is in the middle of the call, the service calls out to another service. I want to use</p>\n\n<pre><code>class MyService{\n     private IOtherService _otherSvc;\n     public MyService(IOtherService otherSvc){\n      _otherSvc = otherSvc;\n     }\n\n  public Foo(string arg){\n      //****here is my problem\n      using(new OperationContextScope(***I want to use the _otherSvc instance cast as IContextChannel***){\n         /*\n            an exception gets thrown here. \n            I can cast to IContextChannel but the\n            exception is thrown because there is no configuration for the endpoint.\n            How can I correct this?\n         */\n         return _otherSvc.GetFoo(arg); \n      }\n  }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","oauth-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13200846,"title":"OAuth 2.0 for MVC - How does the RequestToken work?","body":"<p>I'm working with OAuth 2.0 for MVC, found here: <a href=\"http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx\" rel=\"nofollow\">http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx</a> </p>\n\n<p>For anyone who's worked with this - I'm confused about the RequestToken. There is a controller implemented that lets you get a request token, which expires in 5 minutes, and you pass that token back in to get an AccessToken. But it never checks the request token for validity - it seems like you can pass in any access token you want to. What is the idea for the RequestToken here - are you supposed to create your own method of storing, referencing, and then deleting that token for those 5 minutes? </p>\n\n<p>Thanks,\nAndy</p>\n"},{"tags":["c#","asp.net-mvc","linq","linq-to-entities"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13200658,"title":"LINQ to Entities - How to return a single string value from entity","body":"<p>I am working in asp mvc 3 app.  I have a model/entity called History.  I have a linq query that returns one value.  Depending on what I do, I either get a \"Object not set to an instance\" error in the controller when the method is called, or I get a \"cannot implicitly convert from string to type Models.History.\"  So I am looking for assistance in resolving, do I just need to cast it or something?</p>\n\n<p>Here is the method that gives the 'object not set' error:</p>\n\n<pre><code>public string GetPastAbuseData(int Id)\n{\n\n  var query = (from h in _DB.History\n              where h.ApplicantId.Equals(Id)\n              select h.AbuseComment).FirstOrDefault();\n\n  return query.ToString();\n }\n</code></pre>\n\n<p>Controller:\n     vm.HistoryModel.AbuseComment = repo.GetPastAbuseData(Id);</p>\n\n<p>And if I change the method type from string to History I get the 'cannot convert' error:</p>\n\n<pre><code>public History GetPastAbuseData(int Id)\n{\n    return (from h in _DB.History\n            where h.ApplicantId.Equals(Id)\n            select h.AbuseComment).SingleOrDefault();\n}\n</code></pre>\n\n<p>Thank you for your time.</p>\n"},{"tags":["javascript","html","asp.net-mvc","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13052641,"title":"Adding onchange event to a telerik dropdownlist makes it static","body":"<p>I have a telerik dropdownlist which behaves normally, but once I add an onchange event which triggers a JS function, the dropdownlist becomes static.</p>\n\n<p>Telerik DDL:</p>\n\n<pre><code>&lt;%= Html.Telerik().DropDownList().Name(\"Week\")\n            .HtmlAttributes(new { @id = \"Week\", @style = \"width:104px;\" }).ClientEvents(events =&gt; events.OnChange(\"Week_onChange\"))%&gt;\n</code></pre>\n\n<p>JavaScript function:</p>\n\n<pre><code>function Week_onChange() {\n    var link = '/Weeks/Week';\n    week = $(\"#Week\").val();\n    $.ajax({\n        type: 'POST',\n        url: link,\n        data: { date: week },\n        dataType: 'json',\n        success: function (result) {\n            alert(result.message);\n        },\n        error: function (result) {\n            alert(result.message);\n        }\n    });\n};\n</code></pre>\n\n<p>Here is how I populate the Week DDL:</p>\n\n<pre><code>$(\"#Week\").data(\"tDropDownList\").dataBind(weekArray);\n$('#Week').data('tDropDownList').select(0);\n</code></pre>\n\n<p>Again, Week DDL acts perfectly fine if I dont have the \"Week_onChange\" event added.\nAny help is much appreciated</p>\n"},{"tags":["jquery","ajax","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":57,"score":-1,"question_id":13194742,"title":"How update html dom model from ajax?","body":"<p>I have not valide html:</p>\n\n<pre><code>...\n&lt;form&gt;\n&lt;tbody&gt;...&lt;/tbody&gt;\n&lt;tbody&gt;Dynamic content&lt;/tbody&gt;\n&lt;tbody&gt;...&lt;/tbody&gt;\n&lt;/form&gt;\n...\n</code></pre>\n\n<p>in code:</p>\n\n<pre><code>using (Ajax.BeginForm(\"UpdateAjax\", \"Group\", null, new AjaxOptions { HttpMethod = \"POST\", UpdateTargetId = \"updateTargetID\" }, new { @class = \"modal_form_ajax\" }))\n{\n            &lt;tbody&gt;&lt;tr style=\"height: 10px\" /&gt;more tr-s&lt;/tbody&gt;\n            &lt;tbody id=\"updateTargetID\"&gt;&lt;/tbody&gt;\n            &lt;tbody&gt;&lt;tr style=\"height: 10px\" /&gt;more tr-s&lt;/tbody&gt;\n}\n</code></pre>\n\n<p>form not see inputs in tbody[id=updateTargetID].</p>\n\n<p>If I just load the dynamic content, all normally sees.</p>\n\n<p>How to get it to a loaded html?</p>\n\n<p><strong>update</strong>. worked only IE</p>\n"},{"tags":["c#","javascript","jquery","asp.net-mvc","charts"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12932956,"title":"I need some clues using chart","body":"<p>I'm n00bie. so sorry if it would be not an appropriate question for some of you. Maybe someone would help me tho. I wanna develop an easy tool with some controls and ajax-updatable chart(based on MVC) in C#/.net. I have found a simple  and clean tutorial.But it was wirtitten  in 2010. I'm wondering if it is kinda modern? Or has changed anything and this style is already old? I'm  especially interested if it is a good idea to use jquery to perform an update on a chart after some buttons were pressed? </p>\n\n<p>I'm also including a snippet from this tutorial, so maybe you get me better:   </p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;dynamic&gt;\" %&gt;\n\n&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Annual Sales Data (With Fancy JavaScript!)\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"Content3\" ContentPlaceHolderID=\"HeadContent\" runat=\"server\"&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            // Populate the Categories and Years DDLs with the values from the server\n        $.getJSON('/Api/Years',        // URL that returns data of interest\n                  function (result) {       // The function that executes once the data has been returned\n                      var years = $(\"#years\");\n                      $.each(result, function (index, year) {\n                          years.append($(\"&lt;option /&gt;\").val(year).text(year));\n                      });\n\n                      $.getJSON('&lt;%=Page.ResolveClientUrl(\"~/Api/Categories\")%&gt;',        // URL that returns data of interest\n                          function (result) {       // The function that executes once the data has been returned\n                              var categories = $(\"#categories\");\n                              $.each(result, function (index, categoryName) {\n                                  categories.append($(\"&lt;option /&gt;\").val(categoryName).text(categoryName));\n                              });\n\n                              // Load the image\n                              UpdateImage();\n                           });\n                  });\n\n            // Add client-side event handlers to these DDLs\n            $(\"#years\").change(UpdateImage);\n            $(\"#categories\").change(UpdateImage);\n        });\n\n        function UpdateImage() {\n            var selectedYear = $(\"#years\").val();\n            var selectedCategory = $(\"#categories\").val();\n\n            $(\"#chart\").fadeOut(function () {\n                $(this).attr('src', '/Charts/SalesByYear?CategoryName=' + escape(selectedCategory) + '&amp;OrderYear=' + escape(selectedYear) + '&amp;showTitle=false')\n                       .attr('alt', 'Sales for ' + selectedCategory + ' in ' + selectedYear)\n                       .attr('title', 'Sales for ' + selectedCategory + ' in ' + selectedYear);\n\n                $(this).fadeIn();\n            });\n        }\n    &lt;/script&gt;\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n\n    &lt;h2&gt;Annaul Sales Data (With Fancy JavaScript)&lt;/h2&gt;\n    &lt;p&gt;\n        This demo shows how to gussy up the sales data charting example using a tad of JavaScript and jQuery.\n    &lt;/p&gt;\n    &lt;div style=\"text-align: center\"&gt;\n        &lt;h2 style=\"text-align: center\"&gt;Sales For &lt;select id=\"categories\"&gt;&lt;/select&gt; In &lt;select id=\"years\"&gt;&lt;/select&gt;&lt;/h2&gt;\n        &lt;img id=\"chart\" style=\"display:none\" /&gt;\n    &lt;/div&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>Could anyone recommend me any tutorial in which I'd be able to ee how can I implement a mvc-based web app with using flotcharts?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net","asp.net-mvc","wordpress","content-management-system","n2"],"answer_count":31,"favorite_count":13,"up_vote_count":29,"down_vote_count":2,"view_count":9348,"score":27,"question_id":250880,"title":"Is there any CMS better than WordPress or should I roll my own?","body":"<p>I'm developing a small business website and want to give some control over content to the client but also allow myself control over the outputted code.  Indeed allow the user to fill in the content gaps while not creating havoc.</p>\n\n<p>I'm leaning towards WordPress rather than reinventing the wheel in asp.net, which would be my code of choice, or possibly just html.  </p>\n\n<p>Any recommendations either way?  An alternative CMS maybe or some robust but productive framework?  (interested in mention of python frameworks)</p>\n"},{"tags":["c#","jquery","asp.net-mvc","datepicker"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13193118,"title":"How to make two text boxes data accept jQuery data picker plugin?","body":"<p>Can you tell me of some good tutorial or some book where I can learn how to make a date picker  text box?</p>\n\n<p>Thank you.</p>\n\n<p>P.S. In fact, I have to have two text boxes and one button that makes reservation when you select the above dates (From and To).</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13199539,"title":"ASP MVC jQuery UI Selectmenu plugin","body":"<p>When using the jQuery UI <a href=\"https://github.com/fnagel/jquery-ui/wiki/Selectmenu\" rel=\"nofollow\">Selectmenu plugin</a>, the built-in frontend ASP MVC validation no longer behaves correctly. By this I mean the field-validation spans do not appear on submit of a form.</p>\n\n<p>Is there a simple way to correct this?  </p>\n"},{"tags":["asp.net-mvc","signalr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13199355,"title":"SignalR not working","body":"<p>I am trying to do some stuff with the signalr.\nMy hub is </p>\n\n<pre><code> public class Customer : SignalR.Hubs.Hub\n{\n    public void Send(string uid, string from, string msg)\n    {\n        string make = from + uid;\n        Clients.Addmsg(msg, make);\n    }\n}\n</code></pre>\n\n<p>And Client side code is</p>\n\n<pre><code> &lt;script src=\"Scripts/jquery-1.6.4.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n &lt;script src=\"Scripts/jquery.signalR-0.5.3.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/signalr/hubs\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $(function () {\n        // Proxy created on the fly\n        var care = $.connection.Customer;\n\n        $(\"#broadcast\").click(function () {\n            // Call the chat method on the server\n            care.send($('#msg').val(), \"HariOm\", \"jai jai ram\")\n        .done(function () {\n            console.log('Success!');\n        })\n        .fail(function (e) {\n            console.warn(e);\n        });\n        });\n\n    // Declare a function on the chat hub so the server can invoke it\n    care.Addmsg = function (message, make) {\n        alert(message + msg);\n    };\n\n\n\n        // Start the connection\n        $.connection.hub.start();\n\n\n    });\n\n\n&lt;/script&gt;\n</code></pre>\n\n<p>I am getting this error after loading the page</p>\n\n<p>Uncaught TypeError: Cannot set property 'Addmsg' of undefined </p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13197525,"title":"ASP.NET MVC locating cs files generated from cshtml?","body":"<p>So I've recently started with ASP.NET MVC 4. I'm using the razor engine.\nMy question is concerning the view files, with suffix cshtml. It seems to me that these are precompiled into *.cs files by razor which in turn are then compiled into MSIL. (A pattern that is familiar from my days as a JSP developer.) One reason why I am making this assumption is that if I enter some invalid c# code into the cshtml file I get a compilation error displayed like this:</p>\n\n<blockquote>\n  <p>Line 34:     public class _Page_Views_BaseDataAdmin_Index_cshtml : ...</p>\n</blockquote>\n\n<p>And line 34 is not indicative of where the error is in the cshtml file, just as the class _Page_Views_BaseDataAdmin_Index_cshtml seems to refer to a regular .net class not the view file.</p>\n\n<p>So my question is: Where do I find the cs file? Specifically, in the example above,  \"_Page_Views_BaseDataAdmin_Index_cshtml.cs\"? Maybe I need to add some config to tell MVC to keep this .cs file on disk, if so, how do I do this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13196946,"title":"Handling Complex Objects in Asp Web API","body":"<p>How can I post multiple complex objects in a post request in asp web api? Everything that I seem to find suggests that only one object type is allowed in the body of the request. Is this correct? If so what is a decent workaround for this? \n   Sample Model:</p>\n\n<pre><code>public class Object1\n{\n    int numWheels { get; set; }\n    string seatheight { get; set; }\n    public Object2[] shopLoc { get; set; }\n}\n\npublic class Object2 \n{\n    string streetName { get; set; }\n    double revenue { get; set; }\n}\nSample Products controller:\nPost:products/Post/\npublic Object1 Post(Object1 tricycle, Object2 cyclingShop)\n{\nreturn tricycle;\n}\n</code></pre>\n\n<p>How would I use this with asp web api? </p>\n"},{"tags":["asp.net","asp.net-mvc","json"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13198710,"title":"Accepting JSON in ASP.NET MVC 4","body":"<p>I have a JSON being send to a controller function of ASP.NET, the JSON looks something like this:</p>\n\n<pre><code>[{\"Key\":\"Test23.txt\",\"Size\":6,\"LastModified\":\"Thu, 01 Nov 2012 19:35:43 GMT\"},\n{\"Key\":\"Test25.txt\",\"Size\":6,\"LastModified\":\"Wed, 31 Oct 2012 21:02:51 GMT\"},\n{\"Key\":\"Test28.txt\",\"Size\":6,\"LastModified\":\"Thu, 01 Nov 2012 19:35:42 GMT\"}]\n</code></pre>\n\n<p>How would I accept it in an MVC controller method and how do I parse it?</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4","moq","modelmetadataprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13192697,"title":"Using a custom ModelMetadataProvider in a unit test","body":"<p>Pretty new to MVC so hopefully this is a simple question.</p>\n\n<p>I have written a custom binding attribute that requires access to the <code>httpContext</code>. In order to inject a mock <code>httpContext</code> during unit tests, I have written an <code>InjectingMetadataProvider</code> that populates the <code>Context</code> property on any of my custom attributes.</p>\n\n<p>I have managed to get this to work in the following test:</p>\n\n<pre><code>[TestMethod]\npublic void Marker_ShouldBind_Id()\n{\n    // Arrange\n    var formCollection = new NameValueCollection \n    { \n        { \"id\", \"2\" }\n    };\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.Setup(c =&gt; c.User).Returns((IPrincipal)null); \n\n    var metaProvider = new InjectingMetadataProvider(context.Object);\n    ModelMetadataProviders.Current = metaProvider;  //why do I need this?\n\n    var bindingContext = new ModelBindingContext\n    {\n        ModelName     = string.Empty,\n        ValueProvider = new NameValueCollectionValueProvider(formCollection, null),\n        ModelMetadata = metaProvider.GetMetadataForType(null, typeof(Marker)),\n    };\n\n    var binder = new DefaultModelBinder();\n\n    // Act\n    var marker = (Marker)binder.BindModel(new ControllerContext(), bindingContext);\n\n    // Assert\n    marker.Id.Should().Be(2);\n}\n</code></pre>\n\n<p>However, if I comment out the line that sets my <code>InjectingMetadataProvider</code> to <code>ModelMetadataProviders.Current</code>, then my <code>InjectingMetadataProvider.CreateMetadata()</code> override gets handed a blank list of attributes, and so the test fails because my custom attributes don't get their context set.</p>\n\n<p>Why do I need to set it to <code>Current</code> when I'm using it explicitly anyway? I don't want to be setting static stuff in my tests.</p>\n\n<p>I may be doing something stupid because I'm feeling in the dark a bit at the moment due to my unfamiliarity with the framework.</p>\n"},{"tags":["asp.net-mvc","requirejs","toastr"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":203,"score":1,"question_id":12414654,"title":"How to reference the bundled js files (asp.net mvc4) in Require.js?","body":"<p>I have been studying John Papa's pluralsight course on SPA.</p>\n\n<p>In his <code>main.js</code>, he gave a name to each js library which is included in the bundle.</p>\n\n<pre><code>(function () {\nvar root = this;\n\ndefine3rdPartyModules();\n\n\nfunction define3rdPartyModules() {\n    // These are already loaded via bundles. \n    // We define them and put them in the root object.\n    define('jquery', [], function () { return root.jQuery; });\n    define('ko', [], function () { return root.ko; });\n    define('amplify', [], function () { return root.amplify; });\n    define('infuser', [], function () { return root.infuser; });\n    define('moment', [], function () { return root.moment; });\n    define('sammy', [], function () { return root.Sammy; });\n    define('toastr', [], function () { return root.toastr; });\n    define('underscore', [], function () { return root._; });\n}\n\n})();\n</code></pre>\n\n<p>But what is the <code>root</code> here? </p>\n\n<hr>\n\n<p>By doing so, we can call those short names in the <code>define</code> statement:</p>\n\n<pre><code>define('vm.session',\n['ko', 'datacontext', 'config', 'router', 'messenger', 'sort'],\nfunction (ko, datacontext, config, router, messenger, sort) {\n</code></pre>\n\n<p>Current, I don't know how to do that. So my working <code>define</code> statement is ugly:</p>\n\n<pre><code>define('vm.admin.outfitters',\n['/Scripts/lib/jquery-1.8.1.js', '/Scripts/lib/jsrender.js', ...], function(){...\n</code></pre>\n\n<p>I know there's gotta be a better way. All those js files have been included in the script bundle already. How can I reference those scripts?</p>\n"},{"tags":["c#","asp.net-mvc","iis","application-pool","recycle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13191566,"title":"IIS Process Recycling","body":"<p>I have read the <a href=\"http://msdn.microsoft.com/en-us/library/ms525803.aspx\" rel=\"nofollow\">MSDN article (link)</a> which says something about the IIS process recycling and it turns out that</p>\n\n<blockquote>\n  <p>The new process is started before the old worker process stops, and requests are then directed to the new process.</p>\n</blockquote>\n\n<p>But, when I read next part of that article i saw this:</p>\n\n<blockquote>\n  <p>Occurrence of multi-instancing: In multi-instancing, two or more instances of a process run simultaneously. Depending on how the application pool is configured, it is possible for multiple instances of a worker process to run, each possibly loading and running the same application code. The occurrence of an overlapped recycle is an example of multi-instancing, as is a Web garden in which two or more processes serve the application pool regardless of the recycling settings.  </p>\n  \n  <p>If your application cannot run in a multi-instance environment, you must configure only one worker process for an application pool (which is the default value), and disable the overlapped recycling feature if application pool recycling is being used.</p>\n</blockquote>\n\n<p>So, I am a little confused.</p>\n\n<p>On the one hand, <strong>I am okay with the thing when all the web requests immediately and permanently are become directed</strong> to the new process instance. On the other hand, this article recommends me not to use recycling at all in case if my application, quoting above \"<strong>cannot run in a multi-instance environment</strong>\". Which means, in my opinion, that requests may be processes as one or the other process instance, which is not allowed by my app logic.</p>\n\n<p>All I want to know is, if there is any chance, any opportunity, that IIS can go such bad way and collapse my application, or shouldn't I worry about it?</p>\n"},{"tags":["asp.net-mvc","entity-framework","postgresql","devart"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13187573,"title":"Entity Framework complaining about required fields when saveChanges even if valid data are setted","body":"<p>I'm using Entity Framework (DbContext with database first) with MVC. When user save from a form, I have a condition in the controller that send the entity to the <strong>update</strong> of <strong>insert</strong> method depending of some internal flag of mine.</p>\n\n<p>When sending entity to the update method, I flag it to modified using <code>context.Entry(myEntity).State = EntityState.Modified;</code>,  I call saveChanges() and everything work well.</p>\n\n<p>When sending the entity to the insert method, I flag it to added using <code>context.Entry(myEntity).State = EntityState.Added;</code> but when calling saveChanges() I receive error about 2 fields that are required...</p>\n\n<p>The problem is that thoses 2 fields are not empty and they effectively contain valid data just before saving... I have even try to force new values to thoses 2 fields just before saving but same error.</p>\n\n<p>It may be usefull to mention that I'm using Devart DotConnect For PostgreSQL as db provider.</p>\n\n<p>Any idea how to debug this problem?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>Validation failed for one or more entities. See 'EntityValidationErrors' property for more details.</p>\n</blockquote>\n\n<p>When looking for this EntityValidationErrors I receive the 2 following specific errors:</p>\n\n<blockquote>\n  <p>The flg_actif field is required</p>\n  \n  <p>The user_creation field is required</p>\n</blockquote>\n\n<p>As mentionned before, those fields are filled with data just before saving so I don't understand what is happening.</p>\n\n<p>I'm using EF v4.0.30319 (system.data.entity=> v4.0 and EntityFramework=> v4.4)</p>\n\n<p><strong>EDIT2:</strong>\nJust to clarify a little bit more: The entity I'm trying to insert already exist in database. The form show the data of this database row. When saving, I decide if I update the row (this work well) but sometime, I need to insert the edited row as a new register instead of updating it to keep an history of the change in database.</p>\n"},{"tags":["asp.net-mvc","localization","jquery-validate","cultureinfo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13197398,"title":"Can't get a language with jQuery validation plugin and DataAnnotations in MVC","body":"<p>I have a View Model with properties decorated with the <strong><code>[Required]</code> DataAnnotation</strong>.</p>\n\n<p>In the form view when client validation fails, the error message renders quite well with french and english language (whithout having to define anything in french and english .resx files for required properties).</p>\n\n<p>But it <strong>fails when the thread culture is set to spanish</strong>. It remains in english, I can see it with Firebug that data-val-required is in english. Some other validation attribute like data-val-equalto are correctly set with spanish language from my abcd.es.resx file.</p>\n\n<p>How come ?! \nHow the jquery-validate plugin detect the language ?\nHow come <code>Html.ValidationMessageFor()</code> get correct language for message warning when thread culture is set with french or english and remains english when culture thread is to spanish ?</p>\n\n<ul>\n<li>First language in browser is set as \"es-ES\".</li>\n<li>VS 2010 is in english.</li>\n<li>The current culture thread is well set to \"es-ES\".</li>\n<li>(My Win 7 OS is set in french but this should have nothing to do with it right ?)</li>\n</ul>\n\n<p>Following scripts are referenced :</p>\n\n<pre><code>jquery.validate.unobtrusive.min.js\njquery.validate-1.10.0.min.js\nadditional-methods-1.10.0.min.js\nhttp://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/localization/messages_##.js\n// (## is set dynamically to get localized correct file ...)\njquery.unobtrusive-ajax.min.js\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","wcf","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13196887,"title":"jQuery Autocomplete tied to WCF Service ASP.NET MVC","body":"<p>New to ASP.NET MVC and programming, and I have searched high and low for materials on this subject but haven't found a concrete answer for my particular problem.</p>\n\n<p>The project I am working on requires the use of WCF services.  Initially I started with a jQuery autocomplete function that worked, however moving the code to a WCF service has broken some communication.  The autocomplete functionality no longer works  </p>\n\n<p>WCF Service</p>\n\n<pre><code>public IList&lt;Location&gt; QuickSearchLocation(string term)\n    {\n        using (var db = new InspectionEntities())\n        {\n            //return all locations except the reserved \"Other\"\n            return db.Locations\n                .Where(r =&gt; r.LocationName.Contains(term) &amp;&amp; r.LocationId !=    Constants.OtherId)\n                .ToList();\n        }\n    } \n</code></pre>\n\n<p>The above code is meant to takes user input based on relation to child table.  If user input does not match data in child table, the users entry is saved to an \"other\" column in the main db.</p>\n\n<p>Controller</p>\n\n<pre><code>public ActionResult QuickSearchLocation(string term)\n    {\n        return Json(_service.QuickSearchLocation(term), JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>View</p>\n\n<pre><code>div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(m=&gt;m.LocationId,new {data_autocomplete =     Url.Action(\"QuickSearchLocation\", \"Inspection\")})\n</code></pre>\n\n<p>script</p>\n\n<pre><code>$(document).ready(function () {\n\n$(\":input[data-autocomplete]\").each(function () {\n\n    $(this).autocomplete({ source: $(this).attr(\"data-autocomplete\")});\n});\n</code></pre>\n\n<p>Any insight on my problem would be helpful.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":198,"score":1,"question_id":12871430,"title":"How to sync Kendo UI mvc Grid with Kendo Mvc Autocomplete","body":"<p>I am working asp.net mvc witk Kendo UI MVC Tools. I am trying to display list of records in a Kendo UI Mvc Grid. and i have one kendo ui autoComplete Textbox when i type a letter it shows corresponding field record that matches the criteria will be showed like a dropdown. Now i want to sync the autocomplete textbox with kendo ui mvc grid. that means when i type a letter records that matches criteria should display in the grid. I have tried with change event but it doesnt seems work for me. </p>\n\n<pre><code> @(Html.Kendo().AutoComplete().Events(c=&gt;c.Change(\"GridChange\"))\n                                                   .Name(\"txtSearchItem\")\n                                                .Filter(\"startswith\")\n                                           .DataTextField(\"xxx\")\n                                              .Value(ViewBag.SearchValue)\n                              .BindTo((List&lt;MyRecords&gt;)Model).HtmlAttributes(new { @class = \"required\", style = \"font-size:19px;width:150px;\", onkeypress = \"return isNumericKey(event);\" })\n                                                )\n</code></pre>\n\n<p>please guide me.</p>\n"},{"tags":["asp.net-mvc","cron","quartz-scheduler","quartz","quartz.net"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13194920,"title":"Work with Quartz on ASP.NET MVC","body":"<p>I use Quartz lib for executing some tasks by schedule on my ASP.NET MVC project. I initialize my Jobs into method Application_Start of Global.asax file. But after some time Quartz was stopped because method Application_End was executed.</p>\n\n<p>Variables were declared as static:</p>\n\n<pre><code>public static ISchedulerFactory scheduleFactory = new StdSchedulerFactory();\n\npublic static IScheduler scheduler = scheduleFactory.GetScheduler();\n</code></pre>\n\n<p>Here is how Quards's Jobs were initialized:</p>\n\n<pre><code>IJobDetail jobSender = new JobDetailImpl(\"jobSender\", \"MailGroup\", typeof(JobMailSender));\n\nITrigger triggerSender = new CronTriggerImpl(\"triggerSender\", \"SenderGroup\", \"jobSender\", \"MailGroup\", \"0 0/30 * * * ?\");\n\nscheduler.ScheduleJob(jobSender, triggerSender);\n\nscheduler.Start();\n</code></pre>\n\n<p>I have found the reason why it happens. When all user's sessions will cease to exist and server doesn't have active user's sessions then method Application_End will execute.</p>\n\n<p>I have created new Quartz's job which opens the site every 15 min and as result new user session will create on server. But still method Application_End is called from time to time.</p>\n\n<p>Is anyone faced with a similar problem? Maybe web.config has some settings that would not be executed method Application_End, even if there are no active sessions on the server?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2","c#-4.0","http-post","http-get"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1683,"score":3,"question_id":4429066,"title":"How do I create a httppost getting same parameters from httpget?","body":"<p>I have a controller to show up a model (User) and want to create a screen just with a button to activate. I don't want fields in the form. I already have the id in the url. How can I accomplish this?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing","query-string"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13196432,"title":"How can I sort the querystring by key?","body":"<p>I'm using ASP.NET MVC4. How do I sort the querystring shown in the browser?</p>\n\n<p>Instead of: <code>...?c=1&amp;b=1&amp;a=1</code><br>\nI want:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code>...?a=1&amp;b=1&amp;c=1</code></p>\n\n<p>If the querystring is based on a link which I create, then I can sort it easily by sorting the <code>RouteValueDictionary</code>. But if the querystring comes from a submitted form, then I noticed that its ordering is based on the order of the form's <code>&lt;input&gt;</code> and <code>&lt;select&gt;</code> fields. Since the markup changes often, I don't want to manually sort it this way though.</p>\n\n<p>So I hope I can sort the <code>RouteValueDictionary</code> from which these routes come from. But I don't know how?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13196170,"title":"When is an ApiController instance created?","body":"<p>Is a new instance of an ApiController created to service every request, or does it get \"pooled\" in some way to service subsequent requests? </p>\n\n<p>The reason I ask is that I'm wondering about the lifetime of the member variables such as the DbContext member that the scaffolding puts in (but also my own members).</p>\n"},{"tags":["asp.net-mvc","image"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":13192960,"title":"Retrieve and display image from database using ASP.Net MVC","body":"<p>I want to retrieve an image from database and then send it to view and display it as thumbnail. Here is my code but It has some error and I can't return the image properly.\nI'm using ASP.Net MVC and aspx pages.</p>\n\n<p>Controller :</p>\n\n<pre><code>    public ActionResult showImg(int id)\n        {\n            var imageData = from m in db.Products\n                               where m.ShopId == 3\n                               select Image.FromStream(new MemoryStream(m.Product_img.ToArray()));\n\n            return new FileStreamResult(new System.IO.MemoryStream(imageData), \"image/jpeg\");\n\n\n        }\n</code></pre>\n\n<p>View :</p>\n\n<pre><code>   &lt;img src='&lt;%= Url.Action( \"showImg\", \"image\", new { id = ViewData[\"imageID\"] } ) %&gt;' /&gt; \n</code></pre>\n"},{"tags":["asp.net-mvc","templates","razor","backbone.js","mustache"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":450,"score":7,"question_id":8166749,"title":"How can i share templates between my ASP.NET MVC backend and my backbone.js frontend?","body":"<p>I'm buliding an application in ASP.NET MVC and considering backbone.js for the client side interaction etc..</p>\n\n<p>Ideally when the pages are loaded i'd like to have all the existing content pre-rendered on the server side and then any new content rendered by backbone.js on the fly.</p>\n\n<p>Naturally i dont really want to write my templates twice.</p>\n\n<p>I'm considering having most of the application templated using the razor view engine and then using mustache templates for the small areas that need to be shared between server and front end.</p>\n\n<p>My question is, what does the actual technical implementation of this look like?</p>\n\n<p>Can you provide code samples of how you would achieve this?</p>\n\n<p>For example which library would you use to render the template on the server and then would you manually extract the text from the template file and inject it into the javascript?</p>\n"},{"tags":["asp.net","asp.net-mvc","unit-of-work"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13156568,"title":"MVC - Unit of work – duplicate records issue","body":"<p>I’m working on this project where we have a form that saves an entity and before saving it we check that the record doesn’t exist by checking against a unique attribute of the entity on the database.</p>\n\n<p>This works fine except on the scenario where we press very quickly the submit form button multiple times. On this case the database check does not work and it creates multiple entries of the record in the database.</p>\n\n<p>I think it is a design problem of the application but I’m new to the unit of work pattern and I can’t understand why is not working.</p>\n\n<p>This is the check we do on the service layer:</p>\n\n<pre><code>    IEnumerable&lt;Story&gt; Stories = _unitOfWork.StoryRepository.Get(s =&gt; e.GUID.Equals(GUID));\n    if (Stories.Count() &gt; 0)\n    {\n        _unitOfWork. StoryRepository.Insert(newStory);\n        _unitOfWork.Save();\n    }\n</code></pre>\n\n<p>can anyone help with this issue?</p>\n\n<p>btw, I'm not after a javascript based solution, only server-side.</p>\n\n<p>Thanks</p>\n\n<p>EDIT:\nthe service uses ninject and has a constructor that passes the unit of work:</p>\n\n<pre><code>    private IUnitOfWork _unitOfWork;\n\n    public StoryService(IUnitOfWork unitOfWork)\n    {\n        _unitOfWork = unitOfWork;\n    }\n</code></pre>\n\n<p>My UnitOfWork class is declared as:</p>\n\n<pre><code>public class UnitOfWork : Disposable, IUnitOfWork\n</code></pre>\n\n<p>DatabaseFactory.cs:</p>\n\n<pre><code>public class DatabaseFactory : Disposable, IDatabaseFactory\n{\n    private myContext _dataContext;\n    private readonly object _door = new object();\n\n    public myContext Get()\n    {\n        lock (_door)\n        {\n            return _dataContext ?? (_dataContext = new myContext());\n        }\n    }\n\n    protected override void DisposeCore()\n    {\n        if (_dataContext != null)\n            _dataContext.Dispose();\n    }\n}\n</code></pre>\n\n<p>Should I create an instance of UnitOfWork every time I call a method of my service as Pluc is suggesting?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","google-charts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13182876,"title":"Error creating empty datatable","body":"<p>I am trying to display a Pie Chart on a page.  Loosely following their example but instead of creating an array I am trying to add rows to a <code>DataTable</code>. However no matter what I try I get the same error.</p>\n\n<p><code>Microsoft JScript runtime error: 'google.visualization.DataTable' is null or not an object</code></p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n google.load(\"visualization\", \"1\", {packages:[\"table\", \"corechart\"]});\n\nvar data = new google.visualization.DataTable();  //ERRORS HERE\n\n    data.addColumn('Device Type', 'No of Units');\n   &lt;%foreach (DeviceCount dc in Model.PieValuesEx)\n  { %&gt;\n        data.addColumn(&lt;%=dc.deviceType%&gt;, &lt;%=dc.deviceCount%&gt;);\n\n        &lt;%} %&gt;\n\n\n  google.setOnLoadCallback(drawChart);\n  function drawChart() {\n\n    debugger;\n    var options = {\n        title: 'Devices by Type'\n    };\n\n    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));\n    chart.draw(data, options);\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Can anyone tell me where I am going wrong here?</p>\n\n<p><strong>EDIT</strong>: Just in case anyone stumbles across this question. I have fixed my problem by taking a different approach.  I now return the elements of an array from the model and use the Google <code>arraytoDataTable</code> method.  </p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n\n  google.load(\"visualization\", \"1\", {packages:[\"corechart\"]});\n  google.setOnLoadCallback(drawDeviceByTypeChart);\n\n  function drawDeviceByTypeChart() \n  {\n    var myArray = new Array(&lt;%= Model.DeviceByTypeArray %&gt;);\n    var data = google.visualization.arrayToDataTable(myArray);\n    var options = {\n        title: 'Devices by Type',\n        tooltip: {showColorCode: true}\n    };\n\n    var chart = new google.visualization.PieChart(document.getElementById('devicebytypechart_div'));\n\n    function selectHandler() {\n      var selectedItem = chart.getSelection()[0];\n      if (selectedItem) {\n        var device = data.getValue(selectedItem.row, 0);\n        alert('The user selected ' + device);\n      }\n    }\n    google.visualization.events.addListener(chart, 'select', selectHandler);\n    chart.draw(data, options);\n}\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":907,"score":0,"question_id":12054298,"title":"how to pass the ID of the kendo Ui dropdown selected value onto the controller?","body":"<p>I am trying to create an application where i am using KENDO UI Dropdown. The Problem is i want to update the values from my view into the database . On selection of the any value in the dropdown the ID associated with it should be passed onto the controller for the required database updation. But here the ID for any selection of the dropdown list passes \"null\" as the value onto the controller .</p>\n\n<p>My view</p>\n\n<pre><code>@using Kendo.Mvc.UI\n@model ExamplekendoDropdown.Models.FacilityGroup\n\n@{\n    ViewBag.Title = \"FacilityGroup\";\n}\n\n&lt;h2&gt;FacilityGroup&lt;/h2&gt;\n\n@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;FacilityGroup&lt;/legend&gt;\n\n        &lt;div id=\"RegionName\"  class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.RegionId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n           @* @Html.EditorFor(model =&gt; model.RegionName)*@\n           @(Html.Kendo().DropDownList()\n          .Name(\"Region\")\n          .DataTextField(\"RegionName\")\n          .DataValueField(\"RegionId\")\n          .DataSource(source =&gt;\n          {\n              source.Read(read =&gt;\n              {\n                  read.Action(\"GetRegion\", \"Fill\");\n              });\n\n          })\n    )\n            @Html.ValidationMessageFor(model =&gt; model.RegionId)\n        &lt;/div&gt;\n     &lt;div id=\"Rest\"&gt;\n@*&lt;form method=\"post\" action='@Url.Action(\"Submit\")' style=\"width:45%\"&gt;\n    &lt;div&gt;\n        @(Html.Kendo().Upload()\n            .Name(\"files\")\n        )\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Submit\" class=\"k-button\" /&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/form&gt;*@\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.FaclityGroupName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.FaclityGroupName)\n            @Html.ValidationMessageFor(model =&gt; model.FaclityGroupName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.status)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.status)\n            @Html.ValidationMessageFor(model =&gt; model.status)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.CreationDate)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n          @*  @Html.EditorFor(model =&gt; model.CreationDate)*@\n          @(Html.Kendo().DatePicker()\n              .Name(\"datepicker\")\n              .Value(\"17/08/2011\")\n              .HtmlAttributes(new { style = \"width:150px\" })\n        )\n            @Html.ValidationMessageFor(model =&gt; model.CreationDate)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n        &lt;/div&gt;\n\n    &lt;/fieldset&gt;\n}\n        &lt;div&gt;\n        @Html.ActionLink(\"See the List\", \"List\")\n        &lt;/div&gt;\n&lt;div&gt;\n    @Html.ActionLink(\"Back to List\", \"About\")\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n\n        $(\"#RegionName\").click(function () {\n            $(\"#Rest\").show();\n        });\n    });\n&lt;/script&gt;\n\n@section Scripts {\n    @Scripts.Render(\"~/bundles/jqueryval\")\n}\n</code></pre>\n\n<p>Controller :-</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing ExamplekendoDropdown.Models;\n\nnamespace ExamplekendoDropdown.Controllers\n{\n    public class FacilityGroupController : Controller\n    {\n        //\n        // GET: /FacilityGroup/\n\n        public ActionResult FacilityGroup()\n        {\n            return View();\n        }\n        [HttpPost]\n        public ActionResult FacilityGroup(FacilityGroup objadd)\n        {\n            AMIEntities1 obj1 = new AMIEntities1();\n            Facility objtbl = new Facility();\n\n                objtbl.RegionId = Convert.ToInt16(objadd.RegionId);\n                objtbl.FaclityGroupName = objadd.FaclityGroupName.ToString();\n                objtbl.Status = objadd.status;\n                objtbl.CreationDate = objadd.CreationDate;\n\n                obj1.AddToFacilities(objtbl);\n                obj1.SaveChanges();\n                obj1.AcceptAllChanges();\n\n\n            return View();\n        }\n    }\n}\n</code></pre>\n\n<p>Kindly help !!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13191583,"title":"how to post form in MVC 3.0 razor on radio button change","body":"<p>I want to active and inactive user account on click on form post. I am using </p>\n\n<pre><code>   @using (Ajax.BeginForm(\"SetStatus\", \"Home\", null, new AjaxOptions() { HttpMethod = \"Post\" }, null))\n                            {\n                                  if (res.Status == 1)\n                                  { \n\n                                        &lt;span class=\"userStatusSpan statusActive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"1\" checked=\"checked\" /&gt;Active&lt;/span&gt;\n                                        &lt;span class=\"userStatusSpan statusInactive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"0\"  /&gt;Inactive&lt;/span&gt;\n                                  }\n                                  else\n                                  {\n                                         &lt;span class=\"userStatusSpan statusActive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"1\" /&gt;Active&lt;/span&gt;\n                                        &lt;span class=\"userStatusSpan statusInactive\"&gt;&lt;input type=\"radio\" name=\"status\" checked=\"checked\" value=\"0\"  /&gt;Inactive&lt;/span&gt;\n\n                                  }\n                          }\n</code></pre>\n\n<p>Can anyone please tell me how to post form on check box change?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13194089,"title":"MVC3 Cannot find database file","body":"<p>I am trying to follow the <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller\" rel=\"nofollow\">MVC tutorial</a> on the ASP website and I'm now at the stage where we add the controller. I've used my own model, a transactions log instead of the movie DB in the tutorial.</p>\n\n<p>I wanted to check the table to see the data being added, but I can't find it under the AppData folder, which the tutorial says ought to happen. I also checked the directory in windows explorer, but I couldn't see the .sdf file there either.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","checkboxlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13192502,"title":"Pass Selected checkbox value in MVC","body":"<p>I need to pass the selected checkboxlist to my controller Action. \nI tried using this code . <a href=\"http://stackoverflow.com/questions/220020/how-to-handle-checkboxes-in-asp-net-mvc-forms\">How to handle checkboxes in ASP.NET MVC forms?</a></p>\n\n<p>My View code: </p>\n\n<pre><code>   @foreach (var item in Model)\n      {\n     &lt;tr&gt;\n     &lt;td align=\"center\" class=\"Text_nocolor\"&gt;\n     @using (Html.BeginForm(\"ShowData\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"newForm\" }))\n     {   \n     &lt;input type=\"checkbox\" name=\"selectedObjects\" value=\"@item.Checked\" /&gt;@item.ProductName \n     }\n&lt;/td&gt;\n         &lt;td align=\"right\" class=\"Text_nocolor\"&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Rate)\n       &lt;/td&gt;\n       &lt;td align=\"right\" class=\"Text_nocolor\"&gt;\n    @Html.DisplayFor(modelItem =&gt; item.Price)\n     &lt;/td&gt;\n&lt;/tr&gt;\n}\n</code></pre>\n\n<p><br/>\nMy Action Code : <br/></p>\n\n<pre><code>public ActionResult ShowData(Guid[] selectedObjects)\n            {\n                foreach (Guid guid in selectedObjects)\n                {\n                    Response.Write(guid.ToString());\n                }\n                Response.End();\n                return (new EmptyResult());\n            }\n</code></pre>\n\n<p>I called the sumbit code in an Action Link</p>\n\n<pre><code>@Html.ActionLink(\" \", \"ShowData\", new { controller = \"Cart\", new { @class = \"btnCheckout\" })\n</code></pre>\n\n<p>It throws a null reference in guid value.\nAny suggesstions. How to get the selected checkbox item wit my model binded. ???</p>\n"},{"tags":["asp.net-mvc","entity-framework","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13181932,"title":"Update Related Entity Of Detached Entity","body":"<p>I'm having an issue <strong>updating</strong> an entity with multiple related entities. I've got a very simple model which consists of an article entity and a list of categories the article can be related to. You can choose from a check box list which of these categories are associated to it...which works fine.</p>\n\n<p>The problem crops up when I actually come to <strong>update</strong> an existing entity using the dbContext. As I am updating this entity, I have already detached it from the context ready to re-attach it later so the update can execute properly. </p>\n\n<p>I can see that after I posting the model, the category(s) are being added to the article entity just fine and it looks like it updates in the repository with no errors occurring. </p>\n\n<p>When I look in the database the article has updated as normal but the category(s) have not.</p>\n\n<p>Here is my (simplified) update code...</p>\n\n<pre><code>    public virtual bool Attach(T entity)\n    {\n        _dbContext.Entry(entity).State = EntityState.Modified;\n        _dbSet.Attach(entity);\n\n        return this.Commit();\n    }\n</code></pre>\n\n<p>Any help will be much appreciated.</p>\n"},{"tags":["c#","jquery","asp.net-mvc","json"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":25,"score":-3,"question_id":13193597,"title":"Tips for handling online store combo items","body":"<p>I am currently working on an online ordering application for a fast food chain. One thing that has me scratching my head is how to handle combo items. For instance, you get a deal where you pay $5 for a burger and coke or $30 for 6 burger and coke combo's.</p>\n\n<p>What I'm struggling with is figuring out a mechanism to ensure the user makes a selection for each, especially in the case of a combo of combo's. I was thinking of passing a Combo object back and forth via JSON, which is probably a good idea, but I'd like some input from others.</p>\n\n<p>I am using ASP.NET MVC3 and C#.</p>\n\n<p>UPDATE: I am not so much interested in the code, more the mechanism. I'll post the code I came up with if we find a workable solution.</p>\n"},{"tags":["c#","sql-server","asp.net-mvc","entity-framework","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13192696,"title":"Mapping stored procedures to entities with additional computed column","body":"<p>I am currently stuck with one of my projects and need some help..</p>\n\n<p>I created a table valued function in MSSQL that returns a table and a computed column (Distance) and have mapped it in Entity Framework 5 using the Entity Designer. </p>\n\n<p>The problem is that I can only map the results either as a complex type or an entity that is in my model class. I need to use one of the Navigation Property in the entity and hence, I am stuck with using my entity class. </p>\n\n<p>However, because the column Distance is not a real column in my table, I have no way of getting that value for every entity for the table valued function. </p>\n\n<p>Is there any way of hacking around this? I've tried using a partial class but the function would not map the Distance column as a property for me. </p>\n\n<p>Here's a little code to explain what I'm trying to do here :</p>\n\n<pre><code>IQueryable&lt;Deal&gt; deals = context.GetDealsByTypeLocationSearch(latitude, longitude);\nforeach (var d in deals)\n{\n  Console.Write(d.Distance); \n}\n</code></pre>\n\n<p>The distance value is null when I tried to create a partial class for my entity Deal.</p>\n"},{"tags":["asp.net-mvc","grid"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13157519,"title":"ASP.Net mvc , redisplaying table/grid data on error","body":"<p>I am quite new to mvc and while i was building a searchform i stumbled upon a state related problem. So, in asp.net mvc there is no such thing as viewstate like in asp.net forms. The question is how to redisplay grid data if input error occurs in a view, mvc is smart enough to show entered data but search result as table is lost .I want to see the old result as well. How would you guys resolve that. Store last search result in session and if there is error in model , restore from session ? That feels a bit hacky solution. </p>\n"},{"tags":["asp.net-mvc","mobile-web"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":199,"score":4,"question_id":11020852,"title":"Why is ViewContext.DisplayMode.DisplayModeId empty?","body":"<p>I'm using custom DisplayModes for ASP.NET MVC 4 (RC) views to allow customization of view content.</p>\n\n<p>My rules for this mobile only app are very simple and defined based on a user's internal profile/session configuration:</p>\n\n<pre><code>DisplayModeProvider.Instance.Modes.Insert(0,\n    new DefaultDisplayMode(\"Tablet\")\n    {\n        ContextCondition = (context =&gt;\n        {\n            if (SessionManager.Current == null)\n                return false;   // assume phone initially\n\n            if (SessionManager.Current.Session.ScreenWidth &gt; 600)\n                return true;\n\n            return false;\n        })\n    });\n\nDisplayModeProvider.Instance.Modes.Insert(0,\n    new DefaultDisplayMode(\"Phone\")\n    {\n        ContextCondition = (context =&gt;\n        {                        \n            if (SessionManager.Current == null ||\n                SessionManager.Current.Session.ScreenWidth &lt;= 600)\n                return true;   // assume phone initially\n\n            return false;\n        })\n    });\n</code></pre>\n\n<p>I can now create views that use xxxx.Phone.cshtml and xxxx.Tablet.cshtml. The right views are rendered.</p>\n\n<p>However, ViewContext.DisplayMode.DisplayModeId always comes back blank. For example, in the following page I echo back the display mode and a hardcoded id to tell which view was rendered:</p>\n\n<pre><code>&lt;div&gt;@Model.Distance - @ViewContext.DisplayMode.DisplayModeId  - Tablet&lt;/div&gt;\n</code></pre>\n\n<p>I see the hardcoded Tablet (or Phone) value, but the DisplayModeId is always blank.</p>\n\n<p>Should this value be set? I think this worked in previous builds of MVC 4 beta, but I'm not 100% sure. </p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13180453,"title":"Modelstate invalid due to foreign key relationship","body":"<p>Creating of object fails due to the fact that the ModelState is invalid. Any help will be appreciated. The simplified model looks like:</p>\n\n<pre><code>public partial class Timerecord\n{\n    public int ID { get; set; }\n    public int locationID { get; set; }\n    public int teamID { get; set; }\n    public int actionID { get; set; }\n    public System.DateTime currentTime { get; set; }\n\n    public virtual Location Location { get; set; }\n    public virtual Action Action { get; set; }\n}\n</code></pre>\n\n<p>The creating of a correctly supplied Timerecord fails due to an error:\n\"The parameter conversion from type 'System.String' to type 'Project.Models.Action' failed because no type converter can convert between these types.\"} System.Exception {System.InvalidOperationException}</p>\n\n<p>All attributes of the Timerecord are fine, but both Action and Location are Null (which is not a problem... as the foreign keys are correct). Do I have to set de foreign objects myself and then reevaluate the model, or I have to supply a constructor Action(string)?</p>\n\n<pre><code>    [HttpPost]\n    [ValidateAntiForgeryToken]\n    public ActionResult Create(Timerecord tm)\n    {\n        try\n        {\n            if (ModelState.IsValid)\n            {\n                db.Timings.Add(tm);\n                db.SaveChanges();\n                return RedirectToAction(\"Index\");\n            }\n            else\n            {\n                var errors = ModelState.SelectMany(x =&gt; x.Value.Errors.Select(z =&gt; z.Exception));\n                ...\n            }\n            ...\n</code></pre>\n\n<p>The problem seems to be caused by the Create method of the Controller (simplified):</p>\n\n<pre><code>    public ActionResult Create()\n    {\n        Timerecord tm = new Timerecord();\n        LocationDBContext dbLoc = new LocationDBContext();\n        ActionDBContext dbAct = new ActionDBContext();\n\n        tm.currentTime = DateTime.Now;\n        tm.locationID = 1;\n        tm.actionID = 5;\n        tm.Location = dbLoc.Location.Find(tm.locationID);\n        /* THE PROBLEM: tm.Action = dbAct.Action.Find(tm.actionID); PROBLEM HERE */\n\n        ViewData.Model = tm;\n        return View();\n    }\n</code></pre>\n\n<p>Location causes no problem, Action does..\nThanks for any help!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":42,"score":-2,"question_id":13116755,"title":"How to pass value from Parent View to Partial View on load","body":"<p>I am opening one edit Profile page in my view. I want to display skills of the person in his profile Page; his skills are stored in another table. Now I want to open one Partial View to show his skills. Please help me how to show the partial View.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","entity-framework","stored-procedures"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":296,"score":0,"question_id":10282061,"title":"HOw can I access two database in single .edmx file?","body":"<p>I have created mvc3 application.</p>\n\n<p>I have one <code>.edmx</code> already created which is based on <code>Db1</code> but now\nI have created a view which is based on <code>Database2</code> and I need to use this view inside my project.</p>\n\n<p>For that I need to update my EF <code>.edmx</code> file.\nbut when I right click and select option <code>Update model from Database</code>\ni'm only getting <code>all tables , view ,sps from</code>Db1<code>` its obvious\nBut as i need to use view which is from</code>Database2<code>how can i add it into my model</code>.edmx` file?\nplease help. </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13192932,"title":"ASP.NET MVC4 Layout pages with VirtualPathProvider","body":"<p>Since upgrading from ASP.NET MVC3 to MVC4 I have run into an issue. The application has a big portion of it's controllers and views embedded into a dll that the main project references and the solution relies on a standard VirtualPathProvider that checks if the requested view exists in the dll and if so returns it.</p>\n\n<p>After upgrading to MVC4 the request for the layout page doesn't go through the VirtualPathProvider anymore, causing the entire application to crash. All of the other views including partial views are handled correctly and are loaded from the assembly.</p>\n\n<p>Has anyone else run into any similar problems after upgrading to MVC4?</p>\n"},{"tags":["c#","android","asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":3176,"score":6,"question_id":8340644,"title":"Request.Browser.IsMobileDevice = false for Android, why?","body":"<p>I have samsung galaxy s2, in C# code it shows Request.Browser.IsMobileDevice = false, but I want to use mobile version for my application. How to have ability to show mobile version of my website, for Android devices?</p>\n\n<p>Thank you, so much.</p>\n\n<p>Sergey.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dataannotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13186158,"title":"difference between jquery validate plugin and ASP.NET MVC data annotations?","body":"<p>I am wondering what is the difference between validating Controls using JQuery Validate plugin and ASP.NET MVC DataAnnotations?</p>\n\n<p>Appreciate your responses.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","sql-server-ce"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13190807,"title":"is it logical to use SQL Server CE for storing temporary data?","body":"<p>I'm writing a web app using ASP.NET MVC4 and SQL Server 2012.</p>\n\n<p>At some point in my web app I need to store some data from different pages in my web app and after showing the whole data on a single page to the user, if the user confirmed and there were no validation errors I will store the confirmed data to SQL Server. This web app has a huge number of users.</p>\n\n<p>Is it logical and performance wise to use SQL Server CE as a temporary storage and store the data before confirmation on SQL Server CE?</p>\n\n<p>Are there any other options that I can use?</p>\n\n<p>What about localDb?! is it better to use localDb instead of SQL Server CE in this case?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13191379,"title":"VS 2010 / MVC4 / EF5 Add new controller error","body":"<p>When I attempt to add a new controller, I get the following template error. I've tried setting my template back to normal and reinstalling mvc4 and ef5 to no avail.</p>\n\n<p>Error:</p>\n\n<pre><code>Error   1   Running transformation: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---&gt; System.IO.FileNotFoundException: Unable to locate file\n   at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolvePath(String path)\n   at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolvePath(String path)\n   --- End of inner exception stack trace ---\n   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner)\n   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\n   at Microsoft.VisualStudio.TextTemplatingB214C175D962501244305AB8E4D64CC3.GeneratedTextTransformation.DynamicHost.ResolvePath(String path)\n   at Microsoft.VisualStudio.TextTemplatingB214C175D962501244305AB8E4D64CC3.GeneratedTextTransformation.EdmMetadataLoader.CreateEdmItemCollection(String sourcePath)\n   at Microsoft.VisualStudio.TextTemplatingB214C175D962501244305AB8E4D64CC3.GeneratedTextTransformation.TransformText()\n   at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String&amp; result)        1   1   \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13013010,"title":"How to block targetUpdateId using Blockui using ajax.actionLink or ajax.beginForm","body":"<p>I want to develop an ajax pipeline such that whenever there is any ajax request made through ajax.beginform or ajax.actionLink it should start with my ajax.start function in which i can be able to read the targetupdateid so that i can shoew blockui and any developer should not bother about this ajax.start.I was trying to use this piece of code but itis not working</p>\n\n<pre><code>$(document).ajaxStart(function (xhr, setting) {\n    console.log(this.activeElement);\n    if (this.activeElement.type == 'submit') {\n        activeElement = this.activeElement.form.attributes[\"data-ajax-update\"].value;\n\n    } else {\n       / activeElement = this.activeElement.attributes[\"data-ajax-update\"].value;\n    }\n    if (activeElement != null) {\n        $(activeElement).blockUI();\n    }\n\n});\n</code></pre>\n\n<p>Any help would highly be appreciated.</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13189773,"title":"Edit functionality in jQgrid?","body":"<p>I have a jQgrid, i need to give edit functionality to it, when the user clicks on a a particular row, that row details should be displayed in popup...</p>\n\n<p>This is my jquery code in my view</p>\n\n<pre><code>    &lt;table id=\"list\" class=\"scroll\" cellpadding=\"0\" cellspacing=\"0\"  width=\"175\"&gt;&lt;/table&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID', index: 'StudentID', width: 150, align: 'center',sortable:false },\n      { name: 'FirstName', index: 'FirstName', width: 150, align: 'center', sortable: true },\n      { name: 'LastName', index: 'LastName', width: 150, align: 'center', sortable: false },\n      { name: 'Email', index: 'Email', width: 200, align: 'center', sortable: false}],\n\n            pager: jQuery('#pager'),\n            width:750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid'\n        });\n\n    });\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13156258,"title":"EF dbContext IQueryable methods dependencies not working","body":"<p>I've tried to add a few helper methods to my dbContext class like this</p>\n\n<pre><code>public IQueryable&lt;Tool&gt; GetAllToolsInCompanyGroup(string userName)\n{\n    var user = GetUserByName(userName);\n    return Tools.Where(t =&gt; Companies.Any(c =&gt; user.Company.CompanyGroupId == c.CompanyGroupId &amp;&amp; c.Id == t.CompanyId));\n}\n</code></pre>\n\n<p>But if I call that from my controller I get this exception:</p>\n\n<pre><code>Unable to create a constant value of type 'myNamespace.Models.Company'. Only primitive types or enumeration types are supported in this context.\n</code></pre>\n\n<p>If i do the exact same thing in in my controller like this:</p>\n\n<pre><code>db.Tools.Where(t =&gt; db.Companies.Any(c =&gt; user.Company.CompanyGroupId == c.CompanyGroupId &amp;&amp; c.Id == t.CompanyId))\n</code></pre>\n\n<p>it works. What am I doing wrong?</p>\n"},{"tags":["c#","html","asp.net-mvc","asp.net-mvc-4","http-post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13191932,"title":"Handling multi-dimensional POST data in C# (ASP.NET 4.0)","body":"<p>I've created a matrix-type form with dynamic rows and columns. The cells contain input fields that need to be handled by C# (MVC4, ASP.NET 4). The form looks like this (simplified):</p>\n\n<pre><code>&lt;form action=\"~/Administration/PriceMatrix\" method=\"post\"&gt;\n    &lt;input type=\"text\" name=\"Prices[1][0][1]\" value=\"15.00\" /&gt;\n    &lt;input type=\"text\" name=\"Prices[1][0][2]\" value=\"12.50\" /&gt;\n    &lt;input type=\"text\" name=\"Prices[1][1][1]\" value=\"10.00\" /&gt;\n    &lt;input type=\"text\" name=\"Prices[1][1][2]\" value=\"7.50\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The matching controller is still empty:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult PriceMatrix(object form)\n{\n\n}\n</code></pre>\n\n<p>When I use <code>Request.Form</code> I can of course access all the values, but they're not (de)serialized into an array. So I cannot do this: <code>Request.Form[\"Prices\"][0]</code> or something like that. Instead, I can only access them using their full names: <code>Request.Form[\"Prices[1][0][1]\"]</code> (=15.00). Of course I can loop thru the array and split the <code>Key</code> for each value, but I would like to do it some other way. I've tried to replace <code>object form</code> with another type or custom object containing lists etc., but so far no luck.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["asp.net-mvc","knockout.js"],"answer_count":3,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":4721,"score":11,"question_id":9838496,"title":"ASP.NET MVC with Knockout and Web API: does it make sense?","body":"<p>does it make sense to use KnockoutJS Viewmodels in combination with ASP.NET MVC3 or 4? Because it is not very DRY, isn't it? I have to write models for EF, Viewmodels for the MVC Views and Viewmodels for Knockout... and i lose a lot of magic. Automatic client-side validations for example.</p>\n\n<p>Does it make sense to use MVC at all if one sticks with the MVVM Pattern?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13191240,"title":"Checksum in cache manifest with ASP.NET MVC","body":"<p>I have ASP.NET MVC based mobile web application with cache manifest. This cache manifest includes javascript, css sources and pages itself:</p>\n\n<pre><code>CACHE MANIFEST\n\n# version 56517bc4-bb5d-fe72-fb2e-812379ceb0df\n\nCACHE:\n/Styles/site.css\n/images/flags-euro.png\n/mypage1\n/mypage2\n</code></pre>\n\n<p>I would like to calculate checksum based on content of every file to maintain cache.manifest versioning (for automatic site updates on the browser side). It's easy to do for static files: read file content and calculate checksum.</p>\n\n<p>But how to do it for pages? I need to get page content by requesting that page and calculate checksum. Any ideas how to do it with ASP.NET MVC?</p>\n"},{"tags":["asp.net","asp.net-mvc","c#-4.0","diagram"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13176102,"title":"ASP MVC 4 - diagram tools","body":"<p>I am looking for the best way to implement a real time diagram tool to use in my website. I've found a website with something similar: mentionmapp.com .. You can see the diagram on the background of the homepage, if any can give me suggestions to create something similar I'd appreciate it. </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","binding","checkbox","viewmodel","state"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":7217,"score":5,"question_id":3291501,"title":"Maintain state of a dynamic list of checkboxes in ASP.NET MVC","body":"<p>I have a class called \"PropertyFeature\" which simply contains PropertyFeatureID and Description. It's a proper model created through LINQ to SQL mapped to an SQL Server database table. An example instance/row would be:</p>\n\n<pre><code>PropertyFeatureID: 2\nDescription: \"Swimming Pool\"\n</code></pre>\n\n<p>The number of rows (PropertyFeatures) can of course grow and shrink, and so I want to dynamically render a list of checkboxes so that the user can select any of them.\nI can dynamically render the Checkboxes easily enough, with something like:</p>\n\n<pre><code>&lt;%foreach (var Feature in (ViewData[\"Features\"] as IEnumerable&lt;MySolution.Models.PropertyFeature&gt;)) { %&gt;\n&lt;%=Html.CheckBox(\"Features\", new { @id = Feature.PropertyFeatureID, @value = Feature.PropertyFeatureID })%&gt;&lt;label for=\"Feature&lt;%=Feature.PropertyFeatureID%&gt;\"&gt;&lt;%=Feature.Description%&gt;&lt;/label&gt;\n&lt;%}%&gt;\n</code></pre>\n\n<p>I specify the ID for each checkbox and render the matching label so that the user can intuitively click the label and toggle the checkbox - that works great.</p>\n\n<p>I set the CheckBox's \"name\" to \"Features\" so all the checkboxes render with the same name, and the MVC Model Binder piles them into a single collection called \"Features\" when the form is posted. This works nicely.</p>\n\n<p>Once the form is submitted, I use the checked values and store them, so I need the actual integer values so I know which PropertyFeature is selected, not just a pile of Booleans and field names. So ideally, I want it as an array or a collection that's easy to work with.</p>\n\n<p>I am able to retrieve the selected values from within my Controller method when the button is clicked because I have specified the parameter as int[] Features.</p>\n\n<p><strong>But the problem</strong> is that it doesn't maintain state. That is, when I click the submit button and the page reloads (with the form again displayed) I want all of the dynamic checkboxes to retain their checked status (or not). All of the other fields that I've created with <code>Html.DropDownList</code> and <code>Html.TextBox</code> all maintain their states successfully no problems at all on the same page in the same form.</p>\n\n<p>I have spent hours reading all of the other threads and articles on similar issues and there is a lot of talk about using <code>ICollection</code> and <code>IDictionary</code> to bundle things up and include a Boolean value for each item so that it can maintain the checkbox state. But I don't 100% grasp how to use that in the context of my own personal example. I would like to keep the solution really simple and not have to code up pages of new classes just to maintain my checkbox state.</p>\n\n<p>What is the cleanest and proper way to do this?</p>\n"},{"tags":["c#","asp.net-mvc","ipad"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13189776,"title":"Session is null on ipad","body":"<p>I have the following code in action:</p>\n\n<pre><code>public JsonResult AddTicketToCart(...)\n{\n   ... \n   Session.Add(\"Cart\", cart);\n   return Json(new { IsSuccess = true }, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>In the JS code:</p>\n\n<pre><code>$.get('/desk/AddTicketToCart', { clientId: clientId, sessionId: sessionId, levelId: levelId, places: places, isWithoutPlace: isWithoutPlace, delivery: delivery }, function (data) {\n     if (data.IsSuccess) {\n          if (isQuickBuy)\n              window.location = '/desk/paywizard';\n          else\n              window.location = $('#wiz_header .first-child&gt;a').attr('href');\n      } else {\n                 toastr.options.timeOut = 10000;\n                 toastr.error('Error.');\n                }\n            });\n</code></pre>\n\n<p>This <code>PayWizard</code> action contain:</p>\n\n<pre><code>if (Session[\"Cart\"] == null)\nreturn new HttpNotFoundResult();\n\nvar model = CreateViewData&lt;PersonalInfoViewData&gt;();\nreturn View(\"PersonalInformation\", model);\n</code></pre>\n\n<p>The problem in that I get 404 error on Ipad. On desktop all works fine. I add logging messages to <code>AddTicketToCart</code>:</p>\n\n<pre><code>public JsonResult AddTicketToCart(...)\n    {\n       ... \n       Session.Add(\"Cart\", cart);\n\n       if(Session[\"Cart\"] != null)\n            Logging.Log.Info(\"Cart not null\");\n       else\n            Logging.Log.Info(\"Cart equal null\");\n\n        var test = (CartModel) Session[\"Cart\"];\n        if( test != null)\n        {\n            Logging.Log.Info(\"CartModel not null\");\n            Logging.Log.Info(\"Tickets count: {0}\", test.Tickets.Count);\n        }\n        else\n            Logging.Log.Info(\"CartModel equal null\");\n\n       return Json(new { IsSuccess = true }, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>The output is the following:</p>\n\n<pre><code>2012-11-02 09:37:34.4887 | Info | Cart not null \n\n2012-11-02 09:37:34.4887 | Info | CartModel not null \n\n2012-11-02 09:37:34.4887 | Info | Tickets count: 1 \n</code></pre>\n\n<p>As you can see the <code>Cart</code> in session is exist. Butin <code>Paywizard</code> is equal null. \nWhere is a problem?</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13187772,"title":"Convert Asp.Net to MVC and resuse Asp.net Partial Views in MVC Pages","body":"<p>I am trying to create an Hybrid App with open community forums (<em>yetanotherforum</em>) which is written in ASP.Net as the base and all my extensions would be written in MVC.</p>\n\n<p>I added all the references &amp; applied tweaks to <code>web.config</code> and <code>global.asax</code> and now I can run both .aspx and mvc pages fine.</p>\n\n<p>But when I tried to embed UserControls defined in Asp.net into MVC razor pages by using the following line of code :</p>\n\n<pre><code>@Html.Partial(\"~/pages/login.ascx\")\n</code></pre>\n\n<p>And it is throwing an Error as follows:</p>\n\n<pre><code>The view at '~/pages/login.ascx' must derive from ViewPage, ViewPage&lt;TModel&gt;, ViewUserControl, or ViewUserControl&lt;TModel&gt;.\n</code></pre>\n\n<p>Is it possible to render .net web controls in the MVC Pages?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":55,"score":1,"question_id":13151761,"title":"MVC: How to know which input value from HttpPostedFileBase","body":"<p>Let me try to explain my situation as simple as possible first:</p>\n\n<p>Suppose I have a page which contains multiple [input type='File']. Some of them may be selected a file and some are not.</p>\n\n<p>In my httppost method, I know I need to use parameter like \"IEnumerable files\"  to get filenames, and also each [input] name I should define either = 'files' or 'files[0]','files[1]', etc.....</p>\n\n<p>My question is: when getting a list of HttpPostedFileBase, how could I determine which file belongs to which input control？ As some inputs may leave blank.</p>\n\n<p>Also because these [input] are created dynamically and there is no fixed number of it, I could not hard-code the parameter in httppost method for each of them.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13189434,"title":"How to get Current.Server.MapPath?","body":"<p>I'm using MVC.I want to save xml file inside the services class.\nso wrote this one.</p>\n\n<pre><code>string path = HttpContext.Current.Server.MapPath((Url.Content(\"~/client-authentication.xml\")));\n</code></pre>\n\n<p>but there is error and it says</p>\n\n<pre><code>'System.Security.Policy.Url' does not contain a definition for 'Content'\n</code></pre>\n\n<p>How to solve it??\nHow can I give the path??</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13136130,"title":"Full calendar with year view and enable days and event clickable","body":"<p>I want to add full calendar with Full year view to my mvc project, and the year view of the full calendar should be enable day click and event click function.I have try one of year view full calendar ,its gives year view, but it doesn't work click able events for days and event.Please any one can help me\nthe link of the calendar plugin that I have use to render year view is below</p>\n\n<p><a href=\"http://code.google.com/p/fullcalendar/issues/detail?id=871&amp;can=1&amp;q=fullcalendar%20year%20view&amp;colspec=ID\" rel=\"nofollow\">http://code.google.com/p/fullcalendar/issues/detail?id=871&amp;can=1&amp;q=fullcalendar%20year%20view&amp;colspec=ID</a> Type Status Milestone Summary Stars\n'fullcalender 15'</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","checkboxes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":13178446,"title":"How to get the selected list of items from checkboxlist and pass it to the Action in MVC4","body":"<p>I am trying to implement a checkboxlist in my MVC application. here I need to get the selected checkboxlist values pass it to @html.ActionLink().<br/>\nI have searched many sites including Stackoverflow but there is no model binding of database values and getting the selected checkbox values and passing to an action. <br/>\n<a href=\"http://stackoverflow.com/questions/5284395/checkboxlist-in-mvc3-view-and-get-the-checked-items-passed-to-the-controller.\">Eg :http://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0</a></p>\n\n<p>and I tried from this link. <a href=\"http://stackoverflow.com/questions/3369533/checkboxlist-multiple-selections-how-to-model-bind-back-and-get-all-selections\">CheckBoxList multiple selections: how to model bind back and get all selections?</a> <br/></p>\n\n<p>How to get the selected productid from the checkbox list. \nAny examples.. ?? </p>\n"},{"tags":["c#","asp.net-mvc","excel","iis","file-io"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13168268,"title":"Access Denied on a Shared Folder from MVC Web Application","body":"<p>I have an MVC Web application that generates Excel and PDF reports (using Crystal) using templates .xlt and .rpt, it generates the reports without a glitch when I place the templates in the web server itself but once I place the templates in a <strong>remote location</strong> then I get an Access Denied error which I found out through process monitor, screen shot below</p>\n\n<p><img src=\"http://i.stack.imgur.com/unDv6.png\" alt=\"enter image description here\"></p>\n\n<p>When I manually browse the remote folder through explorer from the server its all OK and I can open the files I needed its just fires the access denied error when its the server reading the files.  My web application is using the ApplicationPoolIdentity in Integrated Pipeline.  Authentication is through impersonation and Windows Authentication.  Whats even makes it confusing is that the User who runs the Excel templates is my self but I get the access denied, while user used in generating PDF is IIS Apppool.</p>\n\n<p>Does anyone know how to resolve the access denied issue, I already tried putting all users full access on that folder but still it does not work.</p>\n\n<p><strong>ADDITIONAL INFO</strong></p>\n\n<p>I am using IIS 7.5, I also checked on the File Server where the share is, on the Event Logs the user registered is not me but with the following details</p>\n\n<pre><code>An account was successfully logged on.\n\nSubject:\n    Security ID:        NULL SID\n    Account Name:       -\n    Account Domain:     -\n    Logon ID:       0x0\n\nLogon Type:         3\n\nNew Logon:\n    Security ID:        ANONYMOUS LOGON\n    Account Name:       ANONYMOUS LOGON\n    Account Domain:     NT AUTHORITY\n    Logon ID:       0x90eb7c7\n    Logon GUID:     {00000000-0000-0000-0000-000000000000}\n\nProcess Information:\n    Process ID:     0x0\n    Process Name:       -\n\nNetwork Information:\n    Workstation Name:   MYWEBSERVER\n    Source Network Address: 10.10.10.01\n    Source Port:        00000\n\nDetailed Authentication Information:\n    Logon Process:      NtLmSsp \n    Authentication Package: NTLM\n    Transited Services: -\n    Package Name (NTLM only):   NTLM V1\n    Key Length:     128\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13188165,"title":"Object [object Object] has no method 'button' , using Asp.Net MVC4 with JQuery and JQuery UI from nuget packages","body":"<p>I dont under stand why i cant get my buttons to work.</p>\n\n<pre><code>Object [object Object] has no method 'button' \n\n&lt;button id=\"bt\"&gt;Button with icon only&lt;/button&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#bt\").button();\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I have:</p>\n\n<pre><code> @Scripts.Render(\"~/bundles/jquery\")\n @Scripts.Render(\"~/bundles/jqueryui\")\n\n bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\n                    \"~/Scripts/jquery-{version}.js\"));\n\n bundles.Add(new ScriptBundle(\"~/bundles/jqueryui\").Include(\n                    \"~/Scripts/jquery-ui-{version}.js\"));\n</code></pre>\n\n<p>When loading the page, i see both jquery-ui-1.9.0.js jquery-1.8.2.js loaded fine.</p>\n"},{"tags":["c#",".net","asp.net","asp.net-mvc","dotnetopenauth"],"answer_count":5,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":2878,"score":9,"question_id":3301541,"title":"Should I use the built-in membership provider for an ASP .NET MVC application?","body":"<p>I've been using a custom membership provider for authentication in all my web form applications till now.  I'm about to start developing my first website using MVC.  I'm wondering if I should I use the built-in membership provider that ships with ASP .NET MVC, or if I should create my own.  My site needs to integrate with openid, facebook, google etc for authentication and openauth for api access.  I'm wondering how easy it would be to use the built-in one for my needs.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":191,"score":3,"question_id":13030074,"title":"Why InitializeSimpleMembershipAttribute in MVC 4 app","body":"<p>I think my understanding on <code>SimpleMembershipProvider</code> is almost 60% and the rest is getting to know how it internally work.</p>\n\n<p>You can quickly found some issue when using <code>[InitializeSimpleMembership]</code> filter only in AccountController (the default template). I think anywhere you use Memberhsip API or <code>WebMatrix.WebSecurity</code>, you need to make sure this filter should be called first.</p>\n\n<p>Later, If you use <code>User.IsInRole</code> in my <code>_Layout.cshtml</code>. You need to apply the filter to all controllers, then you start registering it in globally.</p>\n\n<p>However I just realize there is <code>LazyInitializer.EnsureInitialized</code> which make the initialization performed only once per app start.</p>\n\n<p>So why the <code>SimpleMembershipInitializer</code> (in the filter) is not directly in Application_Start?\nIs there any reason to use the filter?</p>\n"},{"tags":["c#","asp.net-mvc","razor","mvccontrib"],"answer_count":6,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":142,"score":3,"question_id":13090465,"title":"Is there a ready-made data table view library with paging/filtering/sorting?","body":"<p>I'm building a system in MVC that has a lot of heterogeneous data to be displayed: Customers, logs, etc.</p>\n\n<p>I'm finding that I'm building the same view over and over again in different forms:</p>\n\n<ul>\n<li>Header row (with sorting links)</li>\n<li>Filter row (drop-downs, date pickers, etc.)</li>\n<li>Data</li>\n<li>Paging row</li>\n</ul>\n\n<p>Naturally the abstractor in me is shouting \"Build a generic data view factory!\", as well it should. However, before I disappear up my own abstracting bottom, has this work already been done elsewhere?</p>\n\n<p>The only option I can currently find is <a href=\"http://mvccontrib.codeplex.com/wikipage?title=Grid&amp;referringTitle=Documentation\" rel=\"nofollow\">MVCContrib.Grid</a>, which doesn't seem to handle the rendering of filters (although it has allowances for extending the renderer). Is this the only option?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-areas","razor-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":13129552,"title":"Multiple layouts for ASP.Net MVC 4","body":"<p>I have a _ViewStart.cshtml in my main view folder with the following code.</p>\n\n<pre><code>@{\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n</code></pre>\n\n<p>In the View folder of my admin area I have a _ViewStart.cshtml with this code</p>\n\n<pre><code>@{\n    Layout = Request.IsAjaxRequest() ? null : \"~/Areas/Admin/Views/Shared/_Layout.cshtml\";\n}\n</code></pre>\n\n<p>I put a breakpoint on both lines of code, and when I go into the admin area I can see it hits the viewstart in that folder and not the one in the main folder.  Even though it hits that code it still only uses the main layout.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13187606,"title":"MVC3 Html.ActionLink to sub-controller","body":"<p>Is it possible to get <code>Html.ActionLink()</code> to render a link to a path that looks like this?</p>\n\n<pre><code>/posts/1/comments/2\n</code></pre>\n\n<p>In my app, I have this route:</p>\n\n<pre><code>context.MapRoute(\n    \"CommentRoute\",\n    \"posts/{postId}/comments/{action}/{commentId}\",\n    new {\n        controller = \"Comments\",\n        action = \"details\",\n        commentId = UrlParameter.Optional });\n</code></pre>\n\n<p>What overload/set of parameters can I send to <code>Html.ActionLink</code> to get a pretty path like the one above?</p>\n\n<p>If this isn't possible, is there a recommended implementation of a custom helper to achieve the same effect?</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13186733,"title":"Create an complex helper with Ajax and model","body":"<p>I wish creating a mvc helper that return an Ajax Search, and the parameters that I pass is an string representing the table that i want searching. The helper goes opening an modal with the values and an dropDown with options for filtering the search. I have some questions about this:</p>\n\n<ol>\n<li><p>Is this possible?</p></li>\n<li><p>If possible, how i get the table based in an string? Example, the string \"people\" returning the People table. Fact, am using Entity Framework.</p></li>\n<li><p>I need create an dropDown where the  table columns are options for search. The user can pass an string and the helper needing adapting with these parameters. How i get the table columns? the names...</p></li>\n</ol>\n"},{"tags":[".net","asp.net-mvc","entity-framework-4","ado.net","ninject"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13183035,"title":"Max Pool Size Being Encountered With Entity Framework 4.3","body":"<p>This is going to be a long post so please hang with me.</p>\n\n<p>One of the production sites that we implemented here at work a few months back I started seeing the dreaded connection leak error message in our ELMAH logs every so often.</p>\n\n<pre><code>\"Timeout expired. The timeout period elapsed prior to obtaining a connection from the pool. This may have occurred because all pooled connections were in use and max pool size was reached.\"\n</code></pre>\n\n<p>This puzzled me as we are using EF and the connection handling should have been automatic.</p>\n\n<p>So I started digging. The first potential culprit I considered was MiniProfiler (or I should say, our implementation of using miniprofiler). We have been using this and it has been working well, but I was worried about potential connection leaks.</p>\n\n<pre><code>    public OurContext() : base(GetProfilerConnection(), true)\n    {}\n\n    private static DbConnection GetProfilerConnection()\n    {\n        return new EFProfiledDbConnection(new SqlConnection(ConfigurationManager.ConnectionStrings[\"Database\"].ConnectionString),\n                                          MiniProfiler.Current);\n    }       \n</code></pre>\n\n<p>I was under the impression that the \"true\" parameter in the base call caused the context to take ownership of the connection so I believe that this should work fine and the connection will be disposed of.</p>\n\n<p><img src=\"http://i.stack.imgur.com/8X4Qq.png\" alt=\"enter image description here\"></p>\n\n<p>In our Enhancement DEV branch I've removed miniprofiler as it has not been updated to support EF5 and we're going to be migrating at some point in the not too distant future, so this should be removed as a concern.</p>\n\n<p>Concern two was \"are we disposing our datacontexts properly\"? So I downloaded Entity Framework Profiler on a trial and took our heaviest page and ran a test.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3CxJr.png\" alt=\"enter image description here\"></p>\n\n<p>The results showed explicitly that any context we opened was closed, the concerning part to me however is the number of contexts we open. We have our DI container (Ninject 2) setup to instatiate one context per web http request, which I'd\nconsider correct. The problem comes into pay with how we handle images in our application. This page in particular can have up to seven images in the database. Each of these images is included in the page via a MVC action.\nLike so:</p>\n\n<pre><code>[&lt;img src=\"/Controller/GetPhotoAction/[ImageId] /&gt;]\n</code></pre>\n\n<p>Since the image is a separte request a separate context is being opened. So, for this particular page, we are utilizing seven different connections from the connection pool if I'm understanding this correctly. Multiply this by however many users and I see\nhow the error message above could be true.</p>\n\n<p>The reason for storing images in the database is twofold. One, our administrative application to manage the data for this app is on the US West Coast, but the servers hosting the application are on the US East Coast. There is a \nVPN tunnel between our network here at work on the West Coast and the servers on the East Coast. The app is load balanced as well (2 web front ends). The decision was made to store the images in the DB to avoid copying the images \nthrough a VPN tunnel and then dealing with permissions to writing the images to a file location within the web app on each server (the two locations are also completely different domains). </p>\n\n<p>In the interim, while we test, we have upped the max connection pool size in our connection string and will be deploying this out to PROD early next week.</p>\n\n<p>So, my questions are:</p>\n\n<p>1) Have I covered my bases in leak checking here? I believe I have. Am I wrong in anything I stated above?</p>\n\n<p>2) If the multiple data contexts on this page prove to be the culprit, suggestions on how to write an image to two servers across the country keeping in mind permissions will cross domains? Realistically, I'd like to do this anway,\nbut the technical hurdles are a bit more than we are willing to do at this time right before the holidays.</p>\n\n<p>3) If you think neither of the above are problems, what could I be missing? Could it really be that requests are high enough that we're encountering this error and we need to scale out? I can dig up logs to view use statistics, but it\nseems unlikely. This page is cached for an hour (there is a vary by param) </p>\n"},{"tags":["c#","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":13166253,"title":"MVC3 DropDownList - Modify data being displayed in form on SelectedIndexChanged?","body":"<p>I have two DropDownList elements in my model. </p>\n\n<pre><code>[DisplayName(\"Site\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; Site { get; set; }\npublic int SelectedSiteID { get; set; }\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedSiteID, new SelectList(Model.Site, \"Key\", \"Value\"))%&gt;\n\n[DisplayName(\"Data Center\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; DataCenter { get; set; }\npublic int SelectedDataCenterID { get; set; }\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedDataCenterID, new SelectList(Model.DataCenter, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>I am attempting to modify the collection of ListItem's in my second DropDownList when the user makes a change to the first's selection.</p>\n\n<p>I think that this is possible in the following manner, but I wanted to confirm that this was good practice:</p>\n\n<ul>\n<li>Using jQuery, bind to the first DropDownList's change event.</li>\n<li>When responding to the change event -- send an AJAX request to the server with the newly selected value.</li>\n<li>The server will respond with JSON representing a collection of ListItem objects for the second DropDownList.</li>\n<li>Using jQuery, I modify the second DropDownList's selection such that it contains the returned JSON elements.</li>\n</ul>\n\n<p>This all seems a bit... non-MVC3y, if you will. Is this the standard way of achieving what I am asking, or is there a more clear way?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13186510,"title":"MVC4 Conditional Required Annotation","body":"<p>I  have a property which is set to required via data annotation. This works perfectly fine for the create form but I would like to make the property not required in the edit form. How can I go about doing that? </p>\n"},{"tags":["asp.net","sql-server","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":735,"score":0,"question_id":12135081,"title":"asp.net mvc Invalid value for key 'attachdbfilename'","body":"<p>I build a simple model and views and import \"sql server compact\" using NuGet.\n(Following \"Manning ASP.NET MVC 4 in Action\" ebook first example)\nwhen I finally try to run it I get the following error </p>\n\n<pre><code>Invalid value for key 'attachdbfilename'.\n</code></pre>\n\n<p>On every select or CRUD I am trying to execute.<br>\nany ideas? </p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":0,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":133,"score":3,"question_id":13148263,"title":"Entity Framework DbSet.Find throws exception","body":"<p>I'm following a very basic example of code-first Entity Framework (version 4.1) in ASP.NET MVC 4 (using the EBuy example in O'Reilly's Programming ASP.NET MVC 4). I've searched for solutions to this and so far have drawn blank. The basic problem is this code in my controller:</p>\n\n<pre><code>public ActionResult Details(long id)\n    {\n        using (var db = new EbuyDataContext())\n        {\n            var rep = db.Auctions;\n            var auction = rep.Find(id);\n            return View(auction);\n        }\n    }\n</code></pre>\n\n<p>throws an <strong>ArgumentNullException Value cannot be null. Parameter name: key.</strong> when it hits the rep.Find(id) call. Interestingly, when it breaks into the code, the db.Auctions property has the 'Expanding the Results View will enumerate the IEnumerable' and if clicked, it shows my expected two entities which have just been retrieved from the database. The rep object however, does have 'Children could not be evaluated' when it is inspected.</p>\n\n<p>Quite similar 'Create' code like this works okay:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Create(Auction auction)\n    {\n        var db = new EbuyDataContext();\n        db.Auctions.Add(auction);\n        db.SaveChanges();\n\n        return View(auction);\n    }\n</code></pre>\n\n<p>This is my db context:</p>\n\n<pre><code>namespace Ebuy.DataAccess\n{\n    public class EbuyDataContext : DbContext\n    {\n        public DbSet&lt;Auction&gt; Auctions { get; set; } \n    }\n}\n</code></pre>\n\n<p>and this is my model class:</p>\n\n<pre><code>namespace Ebuy.DomainModel\n{\n    public class Auction\n    {\n        public long Id { get; set; }\n        public string Title { get; set; }\n        public string Description { get; set; }\n        public decimal StartPrice { get; set; }\n        public decimal CurrentPrice { get; set; }\n        public DateTime StartTime { get; set; }\n        public DateTime EndTime { get; set; }\n    }\n}\n</code></pre>\n\n<p>I did find one reference which talked about the POCO's and the dbcontext being in different namespaces or assemblies.\nDoes anyone know why the Create code works and the Find doesn't?</p>\n\n<p><strong>Edit:</strong> The stacktrace is:</p>\n\n<blockquote>\n  <p>System.ArgumentNullException was unhandled by user code<br>\n  Message=Value cannot be null. Parameter name: key   Source=mscorlib<br>\n  ParamName=key   StackTrace:\n         at System.Collections.Generic.Dictionary<code>2.FindEntry(TKey key)\n         at System.Collections.Generic.Dictionary</code>2.ContainsKey(TKey key)\n         at System.Data.Entity.Internal.InternalContext.TryUpdateEntitySetMappingsForType(Type\n  entityType)\n         at System.Data.Entity.Internal.InternalContext.IsEntityTypeMapped(Type\n  entityType)\n         at System.Data.Entity.Internal.Linq.InternalSet<code>1.Find(Object[] keyValues)\n         at System.Data.Entity.DbSet</code>1.Find(Object[] keyValues)\n         at Ebuy.Website.Controllers.AuctionsController.Details(Int64 id) in C:\\Users\\John\\Documents\\Visual Studio\n  2010\\Projects\\Ebuy.Website\\Ebuy.Website\\Controllers\\AuctionsController.cs:line\n  26\n         at lambda_method(Closure , ControllerBase , Object[] )\n         at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)\n         at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext\n  controllerContext, IDictionary<code>2 parameters)\n         at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext\n  controllerContext, ActionDescriptor actionDescriptor, IDictionary</code>2\n  parameters)\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;>c_<em>DisplayClass42.b</em>_41()\n         at System.Web.Mvc.Async.AsyncResultWrapper.&lt;>c_<em>DisplayClass8<code>1.&lt;BeginSynchronous&gt;b__7(IAsyncResult\n  _)\n         at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult</code>1.End()\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult\n  asyncResult)\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;>c</em>_DisplayClass37.&lt;>c_<em>DisplayClass39.b</em>_33()\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;>c_<em>DisplayClass4f.b</em>_49()\n  InnerException:</p>\n</blockquote>\n\n<p><strong>Edit 2:</strong> The table does have the Id column as the primary key.\n<strong>Update:</strong> Based on nemesv's comment, I checked the versions. I'm using .NET Framework v 4.0. The MVC Web app, when created, used Nuget to get EF version 5.0 (although the actual reference is to EF runtime 4.0.30319 v4.4.0.0). I added the DataAccess project and gave it a reference to a <strong>different</strong> EF (runtime 4.0.30319 v4.1.0.0). I've changed the DataAccess project's reference to the same EF as the Web app and now I get a different exception: InvalidOperationException The context cannot be used while the model is being created. This appears to be an issue when using EF across an N-tier application, so I'll follow up this thread and report back.</p>\n\n<p><strong>Fix:</strong> I read some stuff about LazyLoading settings in EF and also how loading takes place when you access a property of an entity. As I'm not really accessing an entities property before I try and find one and thinking that perhaps LazyLoading is the default in EF 5.0, I added a default constructor to my EbuyDataContext class as follows:</p>\n\n<pre><code>public class EbuyDataContext : DbContext\n{\n    public EbuyDataContext()\n    {\n        //Configuration.LazyLoadingEnabled = false;\n    }\n\n    public DbSet&lt;Auction&gt; Auctions { get; set; } \n}\n</code></pre>\n\n<p>I also set the LazyLoadingEnabled parameter to false and then ran it and Voila! Success!\nHowever, I thought I would double-check this, so I commented out the LazyLoadingEnabled parameter, did a clean rebuild and it still worked. I commented out the default constructor and now it still works - did something else change when I ran it with the LazyLoadingEnabled parameter in place?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13092630,"title":"Get an error when trying to populate a telerik ddl at page load","body":"<p>How can I populate a telerik drop-down list at page load?</p>\n\n<p>I get the following error(at emphasized line below) when I try to populate dropdownlist:</p>\n\n<pre><code>Error: 'data(...)' is null or not an object\n</code></pre>\n\n<p>Here is how I try to populate the telerik ddl:</p>\n\n<pre><code>$(function(){\nvar values = [];\nfor (var i = 1; i &lt; 10; i++) { \n\nvalues.push({ Text: i, Value: i });\n}\n****$(\"#MyDdl\").data(\"tDropDownList\").dataBind(values);****\n});\n</code></pre>\n\n<p>Tried it this way as well:</p>\n\n<pre><code> $(function(){\n    onDataBinding();\n    });\n\nfunction onDataBinding(e) {\n        var MyDdl = $('#MyDdl').data('tDropDownList');\n        var values = [];\n        for (var i = 1; i &lt; 10; i++) {  \n    values.push({ Text: i, Value: i });\n    }\n      ****MyDdl.dataBind(values);****\n    };\n</code></pre>\n\n<p>But get following undefined error at emphasized line above:</p>\n\n<pre><code>Error: 'undefined' is null or not an object\n</code></pre>\n\n<p>Note:\nAdding a button and loading the ddl on button click event does populate telerik drop-down list.\nDoing it this way works perfectly fine:</p>\n\n<pre><code>    $(function(){\n   var values = [];\n        for (var i = 1; i &lt; 10; i++) {             \n        values.push({ Text: i, Value: i });\n        }\n        $(\"#MyDdl\").data(\"tDropDownList\").dataBind(values);            \n    });\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["asp.net-mvc","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13169662,"title":"Submitting twitter bootstrapper tabs, with asp.net mvc 3 partial view","body":"<p>I am having a twitter bootstraper tab, with 3 simples tabs (Caracteristiques, Certificat and Contrats)</p>\n\n<p>the tabs are ajax load with asp.net mvc partialviews, they are tied with modelViews:</p>\n\n<p>the partials views strongly tied to the type ViewModel:</p>\n\n<pre><code>    // Load Certificat\n    public ActionResult Certificat()\n    {\n        var modelStaffs = _twitterTabsModel.GetStaffs();\n\n        return PartialView(\"_Certificat\", modelStaffs);\n    }\n\n    // load Contrats\n    public ActionResult Contrats()\n    {\n        var modelJoueur = _twitterTabsModel.GetFirstJoueur();\n\n        return PartialView(\"_Contrats\", modelJoueur );\n    }\n</code></pre>\n\n<p>the models:</p>\n\n<pre><code>public class TwitterTabModel\n{\n    public ModelJoueur JoueurVM { get; set; }\n    public IEnumerable&lt;ModelStaff&gt; StaffVM { get; set; }\n}\n\npublic class ModelStaff\n{\n    public string NomStaff { get; set; }\n    public string FonctionStaff { get; set; }\n}\n\npublic class ModelJoueur\n{\n    public string NomJoueur { get; set; }\n    public string PrenomJoueur { get; set; }\n}\n</code></pre>\n\n<p>the Caracteristiques Tab views:</p>\n\n<pre><code>@model Controls.Models.ViewModel.TwitterTabModel\n\n&lt;h2&gt;Caracteristiques&lt;/h2&gt;\n\n@using (Html.BeginForm())\n{\n.... the tabs code ...\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n\n}\n</code></pre>\n\n<p>The tabs load fines, what I want to do is to include a submit button on the first razor view tab, it submit all the other models if loaded, however, when I get the post call, all the others models, JoueurVM and StaffVM are empty even though they are loaded. Why is it according to you ?</p>\n\n<p>edit: This is the controller post code, nothing special, just trying to get the twitterTabModel:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Tabs(TwitterTabModel model)\n    {\n        return View();\n    }\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","elmah","xdocument","elmah.mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13182108,"title":"Why does XDocument.Load throw exception when ELMAH is enabled?","body":"<p>I have the following code that retrieves a link to the latest post from the blog subsite:</p>\n\n<pre><code>XDocument doc = XDocument.Load(\"http://www.mysite.com/blog/syndication.axd\");\nXElement node = doc.Descendants(\"item\").FirstOrDefault();\nstring text = node.Element(\"title\").Value;\nstring uri = node.Element(\"link\").Value;\n</code></pre>\n\n<p>The code always worked fine. This week I added ELMAH.MVC via NuGet as a Package Reference. As soon as I deploy the web.config file with the added ELMAH sections, I get the following error:</p>\n\n<pre><code>System.Web.HttpException (0x80004005): Error executing child request for handler \n'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'. \n---&gt; System.Net.WebException: The remote server returned an error: (500) Internal Server Error.\n   at System.Net.HttpWebRequest.GetResponse()\n   at System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)\n   at System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)\n   at System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)\n   at System.Xml.Linq.XDocument.Load(String uri, LoadOptions options)\n</code></pre>\n\n<p>If I put the old web.config file back, the error goes away.</p>\n\n<p>Any idea why adding ELMAH would cause XDocument.Load to fail?</p>\n"},{"tags":["asp.net","asp.net-mvc","windows-phone-8"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13185671,"title":"How to make WP8 emulator access ASP.NET debug server","body":"<p>Is it possible to get the WP8 emulator to access a ASP.NET Development debug server I run on my pc?</p>\n\n<p>WP8 Emulator runs inside Hyper-V and the debug server on my pc is therefore not accessible to the emulator, is it possible to do so it is?</p>\n\n<p>Only solution I can come up with is create a IIS server on my machine and debug that, but its much easier running development server. </p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13185193,"title":"Dynamically generate URL from Database in ASP.NET MVC?","body":"<p>Hello to all developers,</p>\n\n<p>I am trying to find some example of Dynamically generate URL(PURL).\nI have seen one software which generate personalised URL from MySQL database .\nThe only thing is that software is using PHP to generate URL and as a .NET developer I dont know about php. \nMy question is is there a way that I can fetch data from data base and using perticular field i can generate url which is not actually store in my web space..</p>\n\n<pre><code>eeg.\n-----database-----\n\nfirstname  |  lastname .... \n=========================== \nxyz            abc\npqwert         qweoiuy \nalfa           beta\n</code></pre>\n\n<p>the URL should be like </p>\n\n<p><code>http://something.com/somepersonal/xyz_abc.aspx</code> </p>\n\n<p><code>http://something.com/somepersonal/pqwert_qweoiuy.aspx</code></p>\n\n<p><code>http://something.com/somepersonal/alfa_beta.aspx</code></p>\n\n<p>It is something like personalised page for users or clients.\nI have template to use as back page but dont know how to plug and dynamically generate URL..</p>\n"},{"tags":["asp.net-mvc","azure","simplemembership"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13185074,"title":"How to get error details on Azure Web site","body":"<p>I'm new to Azure. Does anybody know how get detailed error message on website deployed to Azure web?</p>\n\n<p>I added <code>SimpleMembership</code> to website and now Registration and Login (Post) are showing</p>\n\n<blockquote>\n  <p><em>Sorry, an error occurred while processing your request.</em></p>\n</blockquote>\n\n<p>I'm connecting to DB on my home computer (no problem with connection).</p>\n\n<p><code>LogFiles</code> folder on azure ftp server has some files but I don't see how to use this information. I wish I can get YellowScreen on azure...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":817,"score":6,"question_id":9513750,"title":"ASP.NET MVC + WebForms - route conflict","body":"<p>I'm building a simple report Web app for rendering reports using ASP.NET MVC3 + WebForms. The reports themselves are rendered by the ReportViewer ASP.NET WebForms control, but I'd like use ASP.NET MVC to create the parameter entry. </p>\n\n<p>I'd like to have that all requests follow the default routing scheme of '~/{controller}/{action}/{parameters}', except requests for <code>~/Report</code>, which should go to the report rendering WebForm. What's the right way to do this?</p>\n\n<p>Expanding a bit..</p>\n\n<p>I have two routes in <code>Global.asax.cs</code> - the default one and one for the WebForms page.</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n    );\n\n    routes.MapPageRoute(\"report-rendering\", \"Report\", \"~/Render.aspx\");\n}\n</code></pre>\n\n<p>The URLs get rendered fine, but the problem with this is that when the request comes in, the first route also eats the URLs for the second one, i.e. <code>~/Report?id=7</code> tries to call the <code>Index</code> method on the <code>ReportController</code> (which doesn't exist). </p>\n\n<p>If I change it so that the 'report-rendering' route comes before the 'Default' route, like so:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapPageRoute(\"report-rendering\", \"Report\", \"~/Render.aspx\");\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n    );\n}\n</code></pre>\n\n<p>Now calls to the Html.ActionLink() render incorrect URLs, i.e.</p>\n\n<pre><code>`@Html.ActionLink(\"Report list\", \"Index\", \"ReportList\")`\n</code></pre>\n\n<p>Renders </p>\n\n<pre><code>`http://localhost:49910/Report?action=Index&amp;controller=ReportList`\n</code></pre>\n\n<p>My current workaround puts the 'Default' route first, while adding a regex constraint to ignore requests for the 'Report' controller, like so:</p>\n\n<pre><code>routes.MapRoute(\n    \"Default\", // Route name\n    \"{controller}/{action}/{id}\", // URL with parameters\n    new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n    new { controller = @\"(?!report$).*\" }\n);\n</code></pre>\n\n<p>This doesn't feel clean. Again, What's the right way of doing this?</p>\n\n<p>Also, I haven't yet decided how I'll pass the parameters to the rendering form: I could use both query parameters or POST them. I'm guessing that query params are more flexible. What's the best practice here?</p>\n\n<p>EDIT: </p>\n\n<p>While researching the answer by @LeftyX, seems like I've found an answer. To quote P. Haack from his Routing chapter in the <a href=\"http://rads.stackoverflow.com/amzn/click/1118076583\" rel=\"nofollow\">Professional ASP.NET MVC 3</a> (Named Routes, Chapter 9, page 233):</p>\n\n<blockquote>\n  <p>... <em>Use names for all your routes and\n  always use the route name when generating URLs</em>. Most of the time, letting Routing sort out which\n  route you want to use to generate a URL is really leaving it to chance, which is not something that\n  sits well with the obsessive-compulsive control freak developer. When generating a URL, you generally\n  know exactly which route you want to link to, so you might as well specify it by name.</p>\n</blockquote>\n\n<p>The mentioned section discusses a very similar situation to the one I described. </p>\n\n<p>But since <code>Html.ActionLink()</code> doesn't have an overload with the route name parameter, does this mean I cannot reliably use it anywhere in the entire app if have a route like this?</p>\n"},{"tags":["asp.net-mvc","entity-framework","web-config","connection-string"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13093754,"title":"MVC3 Entity Connection string disappearing","body":"<p>I am having a very frustrating problem with my current project. It is continually losing the connection string binding for Entity models.</p>\n\n<p>I have multiple models for different databases in separate areas and was having no problems. Suddenly now whenever I try to update from the database I get the connection string setup prompt. I select for it to add it to the Web.config with the password but it doesn't ever pick it up there again. They all are still in the web config but it just doesn't see them.</p>\n\n<p>If I remove all the connection strings from the config file it will write the new one there. Then when I try to set up a Stored procedure/Function Import, I still get the statement in the lower box:</p>\n\n<pre><code>No database connection has been configured for this model.\n</code></pre>\n\n<p>I have tried rebuilding the project and creating the models again from scratch and that works for a while. When I try and bring the project in under Perforce source control, it winds up getting re-corrupted &amp; the connection string goes away. It affects all of my models too.</p>\n\n<p>I am also using EF 4.x DbContext Generator to create context files. They work fine. I am also able to run the application and it connects to the database just fine and returns data. No issues there. I am just unable to update Entity Complex types from the DB or import any more stored procedures. </p>\n\n<p>An even weirder occurrence was that I opened a broken project from a different directory then opened an uncorrupted copy it instantly became broken also. Contagious! </p>\n\n<p>Any thoughts on where to look into to see why this is happening? Has anyone else had this issue?</p>\n"},{"tags":["asp.net-mvc","runtime-error"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13184801,"title":"Runtime Error after changing file path","body":"<p>So I have a link that once clicked opens a pdf file. I had another format and i converted it to a pdf. I then changed the path from the old pdf to the knew pdf and now whenever i try to access a page that contains this pdf link I get the Runtime Error page and <code>&lt;customeErrors mode = \"Off\"/&gt;</code> Not really sure how changing the file path affects the overall access page that has the pdf file as a link to click and open. Any insight will be appreciated. </p>\n\n<p>This is the line where i added the path for the new pdf file:</p>\n\n<pre><code>&lt;li class=\"nomove\"&gt;&lt;a href=\"pdfs/KVFlipBook2012Rev.pdf\" target=\"_blank\"&gt;Children w/Special Medical Needs&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>This is my web.config file:</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;connectionStrings&gt;\n    &lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnetdb.mdf;User Instance=true\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n&lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n        &lt;assemblies&gt;\n            &lt;add assembly=\"System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n            &lt;add assembly=\"System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\" /&gt;\n        &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n        &lt;forms loginUrl=\"~/Account/Login.aspx\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;membership&gt;\n        &lt;providers&gt;\n            &lt;clear /&gt;\n            &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n        &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;profile&gt;\n        &lt;providers&gt;\n            &lt;clear /&gt;\n            &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n        &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;roleManager enabled=\"false\"&gt;\n        &lt;providers&gt;\n            &lt;clear /&gt;\n            &lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n            &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n        &lt;/providers&gt;\n    &lt;/roleManager&gt;\n&lt;customErrors mode=\"Off\"/&gt;\n&lt;/system.web&gt;\n&lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p></p>\n"},{"tags":["asp.net","ajax","asp.net-mvc","json"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13183794,"title":"How to return errors or notifications from JSON Action method to Ajax forms?","body":"<p>Let's say we have a standard Ajax form with the following Syntax:</p>\n\n<pre><code>  @using(Ajax.BeginForm(\"AddCityJson\", \"City\",new AjaxOptions\n        {\n            HttpMethod = \"post\",\n            OnSuccess = \"JScriptOnSuccess();\",\n            OnFailure = \"JScriptOnFailure\"\n        }))\n    {\n     ...form fields go here...   \n     }\n</code></pre>\n\n<p>A simple form that gathers some information about a city, submits and saves it.</p>\n\n<p>On the controller side we receive the info. If everything went well we return true in order for OnSuccess AjaxOption to trigger and if failed false is returned:</p>\n\n<pre><code>public JsonResult AddCityJson(Formcollection collection)\n{\n var city = new City\n {\n  ...populate city fields from passed in collection\n }\n var cityRepository = new CityRepository;\n city = cityRepository.SaveOrEdit(city);\n\n if(city==null)\n {return Json(false)} \n\n return Json(true);\n\n}\n</code></pre>\n\n<p>Inside of the controller AddCityJson method I need to add various checks. Possibly to check if the city name already exists or any other validation and if I ran into an Error or a Warning return it back to UI.</p>\n\n<p>How can I pass any error/warning messages up to UI if my Ajax form expects to get back ajax true or false and whether that post was successful?</p>\n\n<p>I would like to avoid using ViewData, ViewBags.\nThank you.</p>\n"},{"tags":["asp.net-mvc","entity-framework-4","dataannotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13183647,"title":"Date range validation with Entity Framework 4 data annotations","body":"<p>I am using Entity Framework 4 to provide the model for a ASP.NET MVC3 / Razor2 web application. I am using DataAnnotations to implement validation. I need to limit some dates to the range accepted by the SQL smalldatetime type. </p>\n\n<p>My problem is that I can't get the RangeAttribute to work correctly for a date field. The model metadata definition for the field in question is:</p>\n\n<pre><code>    [Display(ResourceType = typeof(Resources.Patient), Name = \"DateOfBirth_Name\")]\n    [DisplayFormat(DataFormatString = \"{0:d}\", ApplyFormatInEditMode = true)]\n    [DataType(DataType.Date)]\n    [Range(typeof(DateTime), \"01/01/1900\", \"06/06/2079\", ErrorMessageResourceType = typeof(Resources.Patient), ErrorMessageResourceName = \"DateOfBirth_Range\")] \n    public System.DateTime DateOfBirth { get; set; }\n</code></pre>\n\n<p>With this code, whatever value I put into the date field, it is treated as invalid by the application. In case its' relevant, I am using the JQuery-UI date picker with the field in question as well.</p>\n\n<p>Can anyone help please?</p>\n"}]}
{"total":44782,"page":7,"pagesize":100,"questions":[{"tags":["asp.net-mvc","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":13175040,"title":"How to bind kendo mvc ui dropdownlist dynamically","body":"<p>I am working on asp.net mvc with Kendo UI mvc. I have two kendo dropdown lists. one for list of clinics and another of list of patients in selected clinic. But there is no direct relationship between clinic and patient to use the cascading dropdownlist. for that i have used ajax calls in dropdownlist change event and get list of patients. and this is my first dropdownlist for list clinics</p>\n\n<pre><code> @(\n  Html.Kendo().DropDownList()\n  .Name(\"ddlClinics\")\n  .Events(e=&gt;e.Change(\"ChangeClinic\"))\n  .BindTo(new SelectList((List&lt;Account.Entities.Clinic&gt;)ViewBag.lstClinic,\n \"ClinicID\", \"ClinicName\")))\n</code></pre>\n\n<p>and this is my second dropdownlist for listpatients</p>\n\n<pre><code>@(\n Html.Kendo().DropDownList()\n.Name(\"ddlPatients\")\n.BindTo(new SelectList((List&lt;Patient&gt;)ViewBag.Patients, \n\"PatId\", \"PatName\"))))\n</code></pre>\n\n<p>I want to dynamically bind the list of patients to second dropdownlist when the first dropdownlist changes,</p>\n\n<pre><code>function ChangeClinic()\n{\n$.ajax({\nurl: '/Messages/GetPatient',\n type: 'Post',\n data: { email: '@User.Identity.Name' },\n cache: false,\n success: function (result) {\n var ddlPatients = $('#ddlPatients').data('kendoDropDownList');\n var main = [];\n $.each(result, function (k, v) {\n main.push({ \"PatId\": v.PatId, \"PatName\": v.PatName });\n  });\n  ddlPatients.dataTextField = \"PatName\";\n  ddlPatients.dataValueField = \"PatId\";\n  ddlPatients.dataSource.data(main);\n  ddlPatients.reload();\n }\n });\n}\n</code></pre>\n\n<p>i am able to bind the list to dropdownlist but all items are shows as <strong>'undefined'</strong>. so please guide me.</p>\n"},{"tags":["jquery","asp.net-mvc","treeview"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":36,"score":-2,"question_id":13184198,"title":"Where can I find a decent jquery for treeview in mvc","body":"<p>I am looking for a treeview plugin for asp.net mvc.\nI have found a plugin. <a href=\"http://jquery.bassistance.de/treeview/demo/\" rel=\"nofollow\">http://jquery.bassistance.de/treeview/demo/</a></p>\n\n<p>But generating the markup for this plugin isnt easy.\nIs there any other plugin available?</p>\n"},{"tags":["asp.net-mvc","ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1038,"score":0,"question_id":2686073,"title":"Ajax.BeginForm return result and show data appropriate","body":"<p>I have a from on my page as follows:</p>\n\n<pre><code>    &lt;% using (Ajax.BeginForm(\"AddAnswer\",\"Marketplace\",new AjaxOptions() \n{HttpMethod = \"POST\" })){ %&gt;\n</code></pre>\n\n<p>AddAnswer action adds some data to db. What I want to do is: when answer has been successfully added, append #answers div with the current answer passed to controller. When answer has not been successfully added to db - I would like to display appropriate error in #errors div. How can I do this?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13184197,"title":"Publish new MVC4 Project, get cannot drop database error","body":"<p>MVC4 application when running/debugging in visual studio works great.  When I publish it, I get an error that it cannot Drop the database, I am using Code First for the first time so I'm not entirely sure how to go about fixing, connection is like so:</p>\n\n<pre><code>&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=(LocalDb)\\v11.0;Initial Catalog=aspnet-Storyboard-20120822163932;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnet-Storyboard-20120822163932.mdf\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>And I expect the line that causes the issue is this definition:</p>\n\n<pre><code>public class StoryboardDbInitializer : DropCreateDatabaseAlways&lt;StoryboardDb&gt;\n</code></pre>\n\n<p>The only thing I have noticed is that App_Data folder is not published as well, but copying this over made no difference, what am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","form-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13184015,"title":"Data being sent as query string instead of Form data","body":"<p>In my form I see that the data is being sent as Querystring instead of form data (that I expect it to).</p>\n\n<p>My page:</p>\n\n<pre><code>@using (Html.BeginForm(\"AAForm\", \"Test\", FormMethod.Post, new { id = \"myAForm\" }))\n{\n   &lt;label for=\"a\"&gt;A&lt;/label&gt;\n   &lt;input id=\"aid\" name=\"aname\" style=\"width: 300px\" required validationMessage=\"Select\"/&gt;\n   &lt;button type=\"submit\" class=\"btn btn-primary\" value=\"aa\" &gt; Go &lt;/button&gt;\n   }\n</code></pre>\n\n<p>ControllerSignature</p>\n\n<blockquote>\n  <p>public ActionResult GetValues(FormCollection formCollection){\n  //Some code }</p>\n</blockquote>\n\n<p>And I am making an AJAX call to GetValues().</p>\n\n<p>What could I be doing wrong? Pls let me know if I should be posting more information.</p>\n\n<p>Another question: What is \"_:\" in the query string? And it has some random number value.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13183658,"title":"Formatting JSON in ASP.NET MVC","body":"<p>I want to return a JSON from ASP.NET MVC ActionResult type method that looks something like this:</p>\n\n<pre><code>{\n     success: true,\n     users: [\n    {id: 1, FileName: 'Text22'},\n    {id: 2, FileName: 'Text23'}\n    ]\n}\n</code></pre>\n\n<p>How would I format it? Right now I have something like this</p>\n\n<pre><code>Return Json(New With {Key .success = \"true\", Key .users = responseJsonString}, JsonRequestBehavior.AllowGet)\n</code></pre>\n\n<p>Edit: I am using VB.NET but answers in C# are fine too.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13181900,"title":"This webpage has a redirect loop in Global.asax","body":"<p>The Goal is to redirect all users to my custom Security Page on each httpRequest as long as the Session variable is null or empty.</p>\n\n<p>In Global.asax</p>\n\n<p>The method causes an error as follows:</p>\n\n<p>This webpage has a redirect loop\nThe webpage has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer.</p>\n\n<pre><code>protected void Application_PostAuthorizeRequest()\n{\n  if ((Session[\"SecurityCodeApproved\"] == null || !(bool)Session[\"SecurityCodeApproved\"]))\n  {\n    Response.RedirectToRoute(\"Security\");\n  }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13183393,"title":"Access a Razor View from another project","body":"<p>I have a MVC project that is using Razor Views for my website.  One of my projects, lets call it project1 is complete and in use.</p>\n\n<p>I would like to access a view in project1 from project2 so that I do not have to maintain both screen.</p>\n\n<p>They are both in the same solution.</p>\n\n<p>I cannot change project1 since it is already in use by our customers. I looked at the Razor Single File Generator but that is quite drastic for 1 screen and I cannot change project1 that is in use already.</p>\n\n<p>How do I reference the view from project1 in my project2?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","dataannotations","appharbor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13180751,"title":"How to publish an MVC 4 application which has DataAnnotationsExtensions to AppHarbor?","body":"<p>I have a project wich is referencing DataAnnotationsExtensions and DataAnnotationsExtensions.ClientValidation, eventhough the path is set to the bin folder, when I try to publish it in AppHarbor it gave me a not found error message.</p>\n\n<pre>\n    C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Microsoft.Common.targets(1578,5): \nwarning MSB3245: Could not resolve this reference. Could not locate the assembly \n\"DataAnnotationsExtensions.ClientValidation\". Check to make sure the assembly exists on disk. \nIf this reference is required by your code, you may get compilation errors. \n[D:\\temp\\jeb1ouer.ipc\\input\\Financy.Data\\Financy.Data.csproj]\n</pre>\n\n<p>What should I do to make this work?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","ext.net"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":13182757,"title":"What is the difference between .aspx and .aspx.cs?","body":"<p>I'm not new to programming but am new to Visual Studio, MVC, C#, ASP.NET, and EXT.NET, i.e. all of the tools I am trying to use. </p>\n\n<p>I am trying to create an Ext.Net 2.0 MVC4 project and was given a similar (in functionality) non-MVC project for reference. </p>\n\n<p>I see that this non-MVC project has .aspx and .aspx.cs files. It seems like the .aspx file basically maps to the \"View\" in MVC that I want to make... And the .aspx.cs file has the functions that relate to the .aspx file - so is that like the \"Controller\"? Though the .aspx file also has some functions that seem to not be entirely view-related...</p>\n\n<p>Could someone give me a quick overview or a place to start with this?</p>\n"},{"tags":["c#",".net","asp.net-mvc","security","active-directory"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":103,"score":3,"question_id":13147132,"title":"Active Directory Group Membership Checking in .Net 4.5","body":"<p>I have an ASP.Net MVC application using Windows Authentication, and I am checking group membership for security on controller actions. </p>\n\n<p>Simple as it sounds, I've found no other Question that can resolve the problem I am experiencing.</p>\n\n<h3>First Attempt: [Authorize]</h3>\n\n<p>The classic method is to simply slap an <code>Authorize</code> data annotation attribute on the controller action and go to town:</p>\n\n<pre><code>[Authorize(Roles = @\"domain\\groupName1\")]\n</code></pre>\n\n<p>No dice. I am prompted for credentials. Usually this means something is wrong with the Windows Authentication configuration but it's setup fine: (1) <code>HttpContext.User</code> is a <code>WindowsPrincipal</code> object, and (2) I confirmed another known group name works.</p>\n\n<h3>Second Attempt: IsInRole()</h3>\n\n<p>The next step taken was to go a more old fashioned route and use <code>IPrincipal.IsInRole()</code>, and again, one returns <code>false</code>, the other <code>true</code>.</p>\n\n<pre><code>var wp = (WindowsPrincipal)User;\n\n// false\nvar inGroup1 = wp.IsInRole(@\"domain\\groupName1\");\n// true\nvar inGroup2 = wp.IsInRole(@\"domain\\groupName2\");\n</code></pre>\n\n<p>Stumped... so I hit up my systems nerds and we double check everything. User is a group member? Yes. Group name is spelled correctly? Yes. The next step was to snag the SID.</p>\n\n<h3>Third Attempt: Search Identity's Group Collection</h3>\n\n<p>In my controller I check the <code>WindowsIdentity</code> and look through the group collection for the SID of the troublesome group:</p>\n\n<pre><code>var wi = (WindowsIdentity)wp.Identity;\nvar group = wi.Groups.SingleOrDefault(g =&gt; g.Value == \"group1-sidValue\");\n</code></pre>\n\n<p>The <code>group</code> variable is the <code>SecurityIdentifier</code> object. Because it is not null, we can be certain that this current user is a member of the group that both the <code>[Authorize()]</code> or <code>IsInRole()</code> attempts fail to confirm.</p>\n\n<h3>Fourth Attempt: DirectoryServices.AccountManagement</h3>\n\n<p>At this point, I'm going nuts and add reference to the AccountManagement APIs. I search the domain context for the <code>GroupPrincipal</code> by both name and SID:</p>\n\n<p>var pc = new PrincipalContext(ContextType.Domain, \"domain\");\n   var gp1byName = GroupPrincipal.FindByIdentity(pc, \"groupName1\")\n   var gp1bySid = GroupPrincipal.FindByIdentity(pc, IdentityType.Sid, \"group1-sidValue\");</p>\n\n<p>Both group principal variables are ripe with the same object, and I verified through a watch variable that the principal's <code>Members</code> collection contains a <code>UserPrincipal</code> object with the same SID as the current <code>WindowsPrincipal</code> on <code>HttpContext</code>.</p>\n\n<h3>Question:</h3>\n\n<p>What in the hell have I missed here? Why would both role checking methodologies fail when it is plain and clear through object exploration that the user is a valid member of this given group? </p>\n\n<p>The fact that one group checks fine and the other does not seems the most strange part at this point.</p>\n\n<p>Please help.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13182421,"title":"Disable username validation on edit","body":"<p>I created my validation for unique username and now I can't edit my user. It's saying that username is already taken which makes sense since it's taken by the user that I'm trying to edit. I don't even want to edit username but because of this error I cannot edit any other field as well.</p>\n\n<p><strong>How can I disable unique username validation for my EDIT action?</strong></p>\n\n<p>Validator</p>\n\n<pre><code>public override bool IsValid(object value)\n{\n    if (value == null) return false;\n    FinanceDataContext _db = new FinanceDataContext();\n    var user = _db.Users.ToList().Where(x =&gt; x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault();\n    if (user == null) return true;\n    return false;\n}\n</code></pre>\n\n<p>Action</p>\n\n<pre><code>[HttpPost]\n[ValidateAntiForgeryToken]\npublic ActionResult Edit(User u)\n{\n    // Get user we want to edit\n    var user = _db.Users.Where(x =&gt; x.ID == u.ID).SingleOrDefault();\n    if (user == null) return HttpNotFound();\n\n    // Set values and save changes\n    user.Address = u.Address;\n    if (!string.IsNullOrEmpty(u.Password)) user.Password = Infrastructure.Encryption.SHA256(u.Password);\n    _db.SaveChanges(); // validation error\n\n    return null;\n}\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>public class User\n{\n    public int ID { get; set; }\n\n    [Required]\n    [UniqueUsername(ErrorMessage = \"Username is already taken\")]\n    public string Username { get; set; }\n\n    [Required]\n    public string Password { get; set; }\n\n    public string Address { get; set; }\n}\n</code></pre>\n\n<p>Error</p>\n\n<blockquote>\n  <p>Validation failed for one or more entities. See\n  'EntityValidationErrors' property for more details.</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","textarea"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13182296,"title":"how to forbid resizing of TextArea.For in ASP.NET MVC 2?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5235142/how-to-disable-resizable-property-of-textarea\">How to disable resizable property of TextArea?</a>  </p>\n</blockquote>\n\n\n\n<p>i want to disable using of resizing in TextArea.For in my webapplication.\nin google chrome and other browser its looks terrible.\nhow can i do it?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":4185,"score":1,"question_id":7319238,"title":"loading partial view containing javascript - asp.net mvc","body":"<p>In one of my View pages I have a asp.net mvc PartialView. The PartialView contains some javascript (and jquery). In my asp.net main View I load the PartialView using ajax, within a div tag, in way given below. That is, from controller I return PartialView(\"_DonorEdit\") and in my main page I use javascript to replace the content of the div tag with the PartialView response.</p>\n\n<pre><code>&lt;div class=\"content\" id=\"content\"&gt;\n    @{Html.RenderPartial(\"_DonorEdit\");}   \n&lt;/div&gt;\n</code></pre>\n\n<p>Everything works fine except the javascript contained in the partialView (_DonorEdit). Thus the question boils down to - How do I have javascript embedded in an div tag and still get it working correctly.</p>\n\n<p>regards,\nNirvan.</p>\n\n<p>Edit:\nThis problem occurs only when the partial view is returned from the ajax call. In the above code, if I directly include the PartialView (on non-ajax request), then the javascript works properly. But if I later replace the content of div using ajax request, the javascript included in PartialView does not work. The embedded javascript simply does not appear along with the Partial View. So there seems to be some other reason, why the javascript embedded in Partial View does not get passed to browser after the ajax request success.</p>\n\n<p>Edit2: The part of my javascript code</p>\n\n<pre><code>&lt;script type=...&gt;\n//Date Picker. This works. I get Calendar popup as expected\n\n$(document).ready(function () {\n    $(\"#Donor_BirthDate\").datepicker({\n        dateFormat: \"dd-mm-yy\",\n        changeMonth: true,\n        changeYear: true,\n        yearRange: \"-75:+0\"\n    });\n\n    $(\"#Donor_DateLastDonated\").datepicker({\n        dateFormat: \"dd-mm-yy\",\n        changeMonth: true,\n        changeYear: true,\n        yearRange: \"-20:+1\"\n    });\n});\n\n\n//Dropdown handler. Does not make it in my final View.\n\nfunction residenceStateChanged(e) {\n    var url = '@Url.Action(\"_GetCities\", \"DropDown\")';\n    var cmbResidenceCityId = $('#ResidenceCityId').data('tDropDownList');\n    cmbResidenceCityId.loader.showBusy();\n\n    $.ajax({\n        type: 'GET',\n        url: url,\n        data: { StateId: e.value, AddSelectOption: true, SelectOption: 'Select' },\n        traditional: true,\n        success: function (resp, textStatus, jqXHR) {\n            cmbResidenceCityId.dataBind(resp);\n            cmbResidenceCityId.select(0);\n            cmbResidenceCityId.trigger.change();\n        },\n        error: function (jqXHR, textStatus, errorThrown) {\n            alert(jqXHR.responseText);\n        },\n        complete: function () {\n            cmbResidenceCityId.loader.hideBusy();\n        }\n    });\n}\n\n....//Some other code omitted. Does not make it in final view.\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13182602,"title":"Is NopCommerce only usable with Javascript enabled?","body":"<p>In the demo shop (<a href=\"http://demo.nopcommerce.com\" rel=\"nofollow\">http://demo.nopcommerce.com</a>/) I cant use some essential buttons like \"Add To Cart\" or  \"Submit\" (Newsletter) if I dont have Javascript enabled.</p>\n\n<p>Is this just a frontend design issue, or are parts of the shop not implemented for use without javascript enabled?</p>\n"},{"tags":["asp.net-mvc","restsharp","windows-phone-8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13181417,"title":"Cant connect to local MVC 4 api server with WP8 emulator","body":"<p>I have a little game project that uses a MVC 4 api server, however since I installed windows 8 / VS12 / WP8 SDK I havent been able to access the server from my app in the emulator, I can however access the deployed webserver.</p>\n\n<p>Is there some sort of default firewall that would prevent me from contacting a localhost server? I just get a NotFound exception when I try, the localhost server works fine in my browser to retrieve some xml object</p>\n\n<p>I have the same code working in windows 7 with vs2010 and wp7 sdk.</p>\n\n<p>To connect to the server I use <a href=\"http://restsharp.org/\" rel=\"nofollow\">http://restsharp.org/</a></p>\n"},{"tags":[".net","asp.net-mvc","routing","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13182166,"title":"How to prevent not found error when image doesn't exist in .NET MVC","body":"<p>I have an MVC application and my error handling is set up like this in web.config:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/Error/\" redirectMode=\"ResponseRedirect\"&gt;\n    &lt;error statusCode=\"404\" redirect=\"~/Error/NotFound/\" /&gt;\n&lt;/customErrors&gt;\n</code></pre>\n\n<p>Every time a request for non existing image comes my NotFound action on Error controller is being hit, and I get an error <code>The controller for path '/img/home/myimg.jpg' was not found or does not implement IController.</code> logged.</p>\n\n<p>I added <code>RouteTable.Routes.IgnoreRoute(\"img/\");</code> to my <code>Global.asax</code> but it doesn't help. \nHow can I make MVC to ignore all requests to any files?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13178983,"title":"How do i run ASP.NET MVC 4 with a custom Membership Provider for MySQL?","body":"<p>I have run some mvc 3 applications with custom memberships but for ASP.NET MVC 4 i can not find any example how i do a custom membership provider with MySQL.</p>\n\n<p>Not any example for custom membership i can find, do anyone has any idea?</p>\n"},{"tags":["asp.net-mvc","authentication","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13181074,"title":"MVC authentication and authorization","body":"<p>I am using MVC 4 and am using Forms authentication.  I have heard that MVC has it's own implementation of authentication and authorization but am not sure what it is and how to use it.  What is MVC's implementation called and is it easy to migrate from forms to use it instead?</p>\n"},{"tags":["sql-server","asp.net-mvc","sql-server-express","database-migration"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13180464,"title":"Migrate MVC4 JQuery Mobile App Database to Hosting Provider Questions","body":"<p>I am new to MVC4 &amp; SQL server and don't understand some things. I've asked\nquestions at my web hosting provider, but I can't seem to get an answer.</p>\n\n<p>I have developed an application on my PC it uses VS2012 MVC4 4.5 JQuery Mobile\ntemplate with an SQL Express database</p>\n\n<p>I have uploaded the project to the hosting environment and I need to get the\ndatabase portion of the project working. Everything works in the project except\nfor when I try to access the database (this happens when I try to log in and\nthe authentication process fails - because the DD has not been connected). I.e.,\nI have no idea how to do this part.</p>\n\n<p>I have done some research, and here is what I have found out:</p>\n\n<p>1) I need to \"back-up\" my SQL express mdf and ldf files.</p>\n\n<hr>\n\n<p>Is this true? And, how do I do this? </p>\n\n<p>2) I need to then restore the SQL Express .mdf &amp; .ldf files on the webserver.</p>\n\n<hr>\n\n<p>Is this correct? Any help on this question would be great.</p>\n\n<p>3) I understand I have to change my connection string. I'm sure what it's supposed to be.</p>\n\n<hr>\n\n<pre><code>&lt;connectionStrings&gt;\n &lt;add name=\"DefaultConnection\" providerName=\"System.Data.SqlClient\"  \n    connectionString=\"Data Source=(LocalDb)\\v11.0;Initial Catalog=aspnet-MvcDealerConn-\n    20121005200308;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnet-\n     MvcDealerConn-20121005200308.mdf\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>4) What version of SQL Server should I use? v11.0? I.e., what will work?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","textbox","passwords"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13181156,"title":"ASP.NET MVC3: Is it possible to make @Html.TextBoxFor text to be hidden","body":"<p><br>\nWould it be possible to make <code>@Html.TextBoxFor(m =&gt; EmployeeID)</code>, text in the view to be hidden, when typed in. The same functionality as <code>@Html.PasswordFor</code>. There are reasons why I cannot use PasswordFor.</p>\n\n<p><br><br>\nI want the same functionality from my previous post.<br>\n<a href=\"http://stackoverflow.com/questions/13179440/asp-net-mvc3-htmlpasswordfor-how-to-make-it-not-reset-after-post-methods\">ASP.NET MVC3 HtmlPasswordFor how to make it not reset after post methods</a></p>\n\n<p>EDIT</p>\n"},{"tags":["html","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12973260,"title":"Generate multi level customer receipt for order","body":"<p>My target is to generate a view for customer receipt which they will get after they submit an order. The receipt should contain all  the food items they order. Each food item can contain multiple sub items.</p>\n\n<p>Model is returning data like below;</p>\n\n<p><img src=\"http://i.stack.imgur.com/uwnsy.png\" alt=\"enter image description here\"></p>\n\n<p>if you see carefully, those who have parentitemid are sub items. and they should be shown under their parent item.</p>\n\n<p>The target should look like as below;</p>\n\n<p><img src=\"http://i.stack.imgur.com/vGc33.png\" alt=\"enter image description here\"></p>\n\n<p>Now the problem is i have tried many things (i.e. if-else inside the foreach and etc)\nbut did not get this view.</p>\n\n<p>Will it be possible to generate such view from this kind of data ??\nCan anyone help me out with some idea plzzz !</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have some progress..here how it looks now..\n<img src=\"http://i.stack.imgur.com/LTSLn.png\" alt=\"enter image description here\"></p>\n\n<p>Now, how would i show the price of sub item under the main item...??</p>\n\n<p>here is my code</p>\n\n<pre><code>&lt;%foreach (var i in Model.OrderItems)\n      { %&gt;\n      &lt;tr&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;1&lt;/td&gt;\n        &lt;td style=\"width:40%;\"&gt;&lt;%:i.fiitemName%&gt;\n        &lt;br /&gt;\n        &lt;table style=\"margin-left:10px;\"&gt;\n            &lt;%foreach (var k in Model.getOrderSubItems(\"36-171012-2\", i.fiID))\n              { %&gt;\n\n                    &lt;tr style=\"height:30px;\"&gt;\n                        &lt;td style=\"width:100px;\"&gt;&lt;%:k.FoodItemName %&gt;&lt;/td&gt;\n                        &lt;td style=\"width:100px;\"&gt;&lt;%:k.SubItemPrice %&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n           &lt;%} %&gt;\n           &lt;/table&gt;\n        &lt;/td&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;&lt;%:i.msize%&gt;&lt;/td&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;&lt;%:i.ItemNote %&gt;&lt;/td&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;&lt;%:i.mprice%&gt;&lt;/td&gt;\n\n      &lt;/tr&gt;\n\n    &lt;%} %&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","security","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13179440,"title":"ASP.NET MVC3 HtmlPasswordFor how to make it not reset after post methods","body":"<p><br>\nEssentially I have a HtmlPasswordFor(m => EmployeeID), I have a button called \"Go\". Once I hit the Go textbox, I actually do not want the password to disappear on the or have the field password to be cleared. <br>\nHow would I do this?<br><br><br>\nBEFORE\n<img src=\"http://i.stack.imgur.com/vOzfF.png\" alt=\"enter image description here\">\n<br><br><br>\nAFTER\n<img src=\"http://i.stack.imgur.com/JggyK.png\" alt=\"enter image description here\"> \nI do not want the my employeeid to reset. I want to keep the passwords in <em>*</em>*'s, but I'll need the password on my next post call.\n<br><br></p>\n\n<h2>Controller</h2>\n\n<pre><code>    [HttpGet]\n    public ActionResult MainForm()\n    {\n        var model = new VTViewModel();\n        return View(model);\n    }\n\n    [HttpPost]\n    public ActionResult MainForm(VTViewModel model, string buttontype)\n    {\n        if (ModelState.IsValid)\n        {\n            string EmployeeID = (Convert.ToInt64(model.EmployeeBinaryID, 2)).ToString();\n            if (buttontype == \"Go\")\n            {\n                // GET Fields depending on the serial number.\n\n                model.ListFields = logic_model.getFormInfo(model.SerialNumber, EmployeeID);\n                if (model.ListFields[0].return_num == \"0\")\n                {\n                    model.Go = true;\n                    // Set Process\n                    // Set Header Token\n                    // Set Header Title\n\n                    ViewData[\"HEADER\"] = model.ListFields[0].HeaderName + \" | \" + model.ListFields[0].TubeType + \" | \" + model.ListFields[0].ProductLine;\n                }\n                else\n                {\n                    model.DisplayMessage = helper.checkErrors(model.ListFields[0].return_num);\n                }\n            }\n            else if (buttontype == \"Submit\")\n            {\n                model.HeaderToken = model.ListFields[0].HeaderToken; \n                string header = model.HeaderToken;\n                string check = \"\";                                                        \n                string return_num = model.ListFields[0].return_num; \n                // If the submission worked\n\n                //SUBMIT HERE INTO DB then Clear\n                List&lt;string&gt; values_to_submit = new List&lt;string&gt;(); // Creates a list to store the values to submit\n                for (int i = 0; i &lt; model.ListFields.Count; i++)\n                {\n                    // Fills in the hidden values.\n                    if (model.ListFields[i].isHidden)\n                    {\n                        if (model.ListFields[i].Token == \"SNT\" || model.ListFields[i].Token == \"SNC\")\n                        {\n                            model.ListFields[i].Value = model.SerialNumber;\n                        }\n                        else if (model.ListFields[i].Token == \"USR\")\n                        {\n                            model.ListFields[i].Value = EmployeeID;\n                        }\n                        else if (model.ListFields[i].Token == \"TMS\")\n                        {\n                            model.ListFields[i].Value = \"0\";\n                        }\n                    }\n\n                    // If it is a check box do the right conversion.\n                    if (model.ListFields[i].DataType == \"DATA-CKBOX\")\n                    {\n                        //string convertedValue = helper.trueFalseStringtToIntBool(model.ListFields[i].Value);\n                        string convertedValue = helper.boolToInt(model.ListFields[i].BoolValue).ToString();\n                        model.ListFields[i].Value = convertedValue;\n                    }\n\n                    values_to_submit.Add(model.ListFields[i].Token + model.ListFields[i].Value);\n\n                }\n\n                check = logic_model.helperSubmit(values_to_submit, header, 1);\n\n\n\n                if (check == \"Submitted\")\n                {\n                    ModelState.Clear();\n                    VTViewModel clear_model = new VTViewModel(); // Creates an empty model\n                    clear_model.DisplayMessage = \"Submitted\\n\" + model.SerialNumber + \"\\n\" + DateTime.Now;\n                    return View(clear_model);\n                }\n                else\n                {\n                    model.DisplayMessage = check; // Sets the display message to the error.\n                }\n\n            }\n            else if (buttontype == \"Clear\")\n            {\n                // Clears the screen and model\n                ModelState.Clear();\n                VTViewModel clear_model = new VTViewModel(); // Creates an empty model\n                return View(clear_model);\n            }\n        }\n        return View(model);\n\n    }\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>    div&gt;\n         &lt;fieldset&gt;\n         &lt;table id=\"main_table\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.LabelFor(m =&gt; m.SerialNumber)&lt;/td&gt;\n                    &lt;td&gt;@Html.LabelFor(m =&gt; m.EmployeeBinaryID)&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.SerialNumber)&lt;/td&gt;\n                    &lt;td&gt;@Html.PasswordFor(m =&gt; m.EmployeeBinaryID, new { autocomplete = \"off\" }) &lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;&lt;input type=\"submit\" value=\"Go\" name=\"buttontype\" class=\"submit_button\" id=\"btn\"/&gt;&lt;br /&gt;&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;\n         &lt;/table&gt;\n         &lt;/fieldset&gt;\n         &lt;br /&gt; \n</code></pre>\n\n<p><br><br>\nThanks</p>\n"},{"tags":["asp.net","asp.net-mvc","authentication","asp.net-membership","authorization"],"answer_count":6,"favorite_count":49,"up_vote_count":25,"down_vote_count":0,"view_count":6801,"score":25,"question_id":4837103,"title":"ASP.NET MVC - Alternative to Role Provider?","body":"<p>I'm trying to avoid the use of the Role Provider and Membership Provider since its way too clumsy in my opinion, and therefore I'm trying to making my own \"version\" which is less clumsy and more manageable/flexible. Now is my question.. is there an alternative to the Role Provider which is decent? (I know that I can do custom Role provier, membership provider etc.)</p>\n\n<p>By more manageable/flexible I mean that I'm limited to use the Roles static class and not implement directly into my service layer which interact with the database context, instead I'm bound to use the Roles static class which has its own database context etc, also the table names is awful..</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","jquery-ui","asp.net-mvc-4","jquery-ui-datepicker"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":13112519,"title":"MVC4 jQuery UI does not work","body":"<p>I cannot get jQuery UI working in my ASP.NET MVC4 application. I tried dialog and datepicker.\nHere is part of the code of my view.</p>\n\n<pre><code>&lt;link href=\"../../Content/themes/base/jquery.ui.all.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"../../Scripts/jquery-1.5.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery-ui-1.8.11.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\n$(document).ready(function () {\n    alert('A');\n    //$('#datepicker').val('test');\n    $('#datepicker').datepicker();\n    alert('B');\n});\n&lt;/script&gt;\n&lt;h1&gt;Test&lt;/h1&gt;\n&lt;form id=\"testForm\" action=\"#\" method=\"get\"&gt;\n    &lt;input type=\"text\" id=\"datepicker\" name=\"datepicker\" class=\"datepicker\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The alert A is displayed. When I uncomment the next row, the value test is assigned. But datepicker is not working and alert B does not display.</p>\n\n<p>Thanks,\nPetr</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","mef"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13173742,"title":"web api vs asp.net mvc api","body":"<p>I want to write a app that needs to have 2 things:\n1. REST API so others can retrieve data and display their own ways\n2. The default display is a web page using ASP.NET MVC</p>\n\n<p>So there are some approaches:\n1. Create 2 separate projects, 1 for Web API and another is ASP.NET MVC. The MVC will talk to Web API to get the data &amp; render Views\n2. Create a single ASP.NET MVC project. And create a class that derives from APIController. Then do the similar thing as above.</p>\n\n<p>As I understand, the performance should be the same for both approaches. But after I read <a href=\"http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/\" rel=\"nofollow\">this  article</a> , I'm not quite sure.</p>\n\n<p>Quote from article:</p>\n\n<blockquote>\n  <p>\"You could do that with an ASP.NET MVC “API” by creating a separate\n  project for the API, but then you’re still paying the performance\n  penalty for your API requests to filter through MVC’s rendering\n  pipeline. In simple load testing on my local machine, I’ve found that\n  Web API endpoints hosted in console apps are nearly 50% faster than\n  both ASP.NET controller actions and Web API endpoints hosted within\n  MVC projects.\"</p>\n</blockquote>\n\n<p>I'm no expert in ASP.NET so I'd love to hear your explanation or advise how to achieve what I want to do.</p>\n\n<p>Also, please enlighten me if I want to use MEF for this project.</p>\n\n<p>Thanks very much.</p>\n"},{"tags":["javascript","asp.net-mvc","vb.net","json","extjs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13180333,"title":"Javascript (ExtJs) returns a 404 error for a URL, but no problems when I type it into a browser","body":"<p>I am using ExtJs on a front end and an ASP.NET on the back-end. I am pretty new to both. I am trying to send a request to the back end using ExtJs, however, I get a 404 error. When I copy the URL from the console to the address bar in any browser, it works fine. I am using a localhost URL so I am not sure if that is the error. Here is my ExtJs code. (I realize there are some other issues in the code, I just want the front end to connect to the back-end for now).</p>\n\n<p>ExtJs code:</p>\n\n<pre><code>Ext.define('AM.store.Users', {\n    extend: 'Ext.data.Store',\n    model: 'AM.model.User',\n    autoLoad: true,\n\n    proxy: {\n        type: 'ajax',\n        api: {\n            read: 'http://localhost:3849/Home/AmazonRender?numDays=3',\n            update: 'data/updateUsers.txt'\n        },\n        reader: {\n            type: 'json',\n            root: 'users',\n            successProperty: 'success'\n        }\n    },\n    updateUser: function (button) {\n        var win = button.up('window'),\n    form = win.down('form'),\n    record = form.getRecord(),\n    values = form.getValues();\n\n\n\n    record.set(values);\n    win.close();\n    this.getUsersStore().sync();\n}\n});\n</code></pre>\n\n<p>ASP.NET code:</p>\n\n<pre><code>Function amazonRender(ByVal numDays As Integer) As ActionResult\n        Dim list As New List(Of Double)()\n\n        Dim bucketName As String = \"\"\n        Dim accessKey As String = \"\"\n        Dim secretKey As String = \"\"\n        ConnectToAmazon(bucketName, accessKey, secretKey)\n\n        Dim client As AmazonS3\n        client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey,  RegionEndpoint.USEast1)\n        Dim request As ListObjectsRequest = New ListObjectsRequest\n        request.BucketName = bucketName\n        Dim response As ListObjectsResponse = client.ListObjects(request)\n        Dim id As Integer = 1\n        Dim responseJsonString As String = \"[\"\n\n        Dim responseList As List(Of String) = New List(Of String)\n        For Each s3 As S3Object In response.S3Objects\n            responseJsonString = responseJsonString + \"{id: \" + id.ToString + \", FileName: '\" + s3.Key.Trim + \"'},\"\n            id = id + 1\n        Next\n        responseJsonString = responseJsonString.Substring(0, responseJsonString.Length - 1)\n        responseJsonString = responseJsonString + \"]\"\n        Dim serializer As JavaScriptSerializer = New JavaScriptSerializer\n\n        Return Json(New With {Key .success = \"true\", Key .users = responseJsonString}, JsonRequestBehavior.AllowGet)\n    End Function\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13138733,"title":"MVC4 - render html.dropdownlist","body":"<p>I would like to render a html.dropdownlist so the user can just 'tap' an item, in the default rendering the user will have to tap on the dropdownlist then the list will appear and then the suer can select an item.</p>\n\n<p>I'd like to show this like a ul\\li list, but don't know how, I'm sure I can do some css stuff but how about getting the selected SelectListItem-Value back into the datasource... ? I'm pretty sure there's already something out there. Can anyone point me in the right direction ?</p>\n\n<p>Best regards,\nJurjen.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13179860,"title":"Entity Framework Exception when iterating over collection","body":"<p>I have built a simple file manager, that pulls data from two tables, Folders and Files.\nWhen you upload a file it gets written to disk on the server. When I need to delete a folder and all of it's sub-folders, sub-folder files and the parent folders files, I select the folder and then click delete, which executes the controller action below.</p>\n\n<p><strong>UPDATE</strong>\nIf I change any subsequent call to .ToList() it works.</p>\n\n<pre><code>    [HttpPost]\n    public JsonResult DeleteFolder(int folderID)\n    {\n        var repo = new FileManagerRepository();\n\n        var folder     = repo.GetFolder(folderID);\n        var subfolders = repo.GetSubFolders(folderID).ToList();\n        var files      = repo.GetFiles(folderID).ToList();\n\n        // delete sub-folders\n        if (subfolders.Count() != 0)\n        {\n            foreach (var subfolder in subfolders)\n            {\n                // delete sub-folder files\n                var subfiles = repo.GetFiles(subfolder.folder_id).ToList();\n                if (subfiles.Count() != 0)\n                {\n                    foreach (var file in subfiles)\n                    {\n                        repo.DeleteFile(file.file_id);\n                        System.IO.File.Delete(Server.MapPath(\"/content/upload/\" + file.file_name));\n                    }\n                }\n                repo.DeleteFolder(subfolder.folder_id);\n            }\n        }\n        // delete files\n        if (files.Count() != 0)\n        {\n            foreach (var file in files)\n            {\n                repo.DeleteFile(file.file_id);\n                System.IO.File.Delete(Server.MapPath(\"/content/upload\" + file.file_name));\n            }\n        }\n        // delete the folder            \n        if (folder != null)\n        {\n            repo.DeleteFolder(folder.folder_id);                \n        }\n        repo.Save();\n        return new JsonResult();\n    }\n</code></pre>\n\n<p>Now here is the FileManagerRepository</p>\n\n<pre><code> public class FileManagerRepository\n{\n    private readonly iau_idahoEntities db = new iau_idahoEntities();\n\n    public IQueryable&lt;folders&gt; GetParentFolders()\n    {\n        return db.folders.Where(f =&gt; f.parant_folder_id == 0);\n    }\n\n    public IQueryable&lt;folders&gt; GetSubFolders()\n    {\n        return db.folders.Where(f =&gt; f.parant_folder_id != 0);\n    }\n    public IQueryable&lt;folders&gt; GetSubFolders(int folder_id)\n    {\n        return db.folders.Where(f =&gt; f.parant_folder_id != 0 &amp;&amp; f.parant_folder_id == folder_id);\n    } \n\n\n    public IQueryable&lt;Files&gt; GetFiles(int id)\n    {\n        return db.Files.Where(f =&gt; f.folder_id == id);\n    }\n\n    public Files GetFile(int id)\n    {\n        return db.Files.SingleOrDefault(f =&gt; f.file_id == id);\n    }\n\n    public void UpdateDownloadCount(int id)\n    {\n        var file = GetFile(id);\n        file.downloaded += 1;         \n    }\n    public void AddFolder(int parentFolderID, string folderName)\n    {\n        var folder = new folders { create_date = DateTime.Now, parant_folder_id = parentFolderID, folder_name = folderName };\n        db.folders.AddObject(folder);\n    }\n\n    public void DeleteFolder(int folder_id)\n    {\n        var folder = db.folders.SingleOrDefault(f =&gt; f.folder_id == folder_id);\n        db.folders.DeleteObject(folder);\n    }\n    public void Save()\n    {\n        db.SaveChanges();\n    }\n\n    public void AddFile(int folder_id,string filename, string description)\n    {\n        var file = new Files { \n            folder_id = folder_id, \n            file_name = filename, \n            file_extension = filename.Substring(filename.Length - 3, 3), \n            description = description,\n            downloaded = 0, \n            physical_name = filename.Substring(0, filename.Length - 4), \n            upload_date = DateTime.Now \n        };\n        db.Files.AddObject(file);            \n    }\n\n    internal void DeleteFile(int fileID)\n    {\n        var fileToDelete = db.Files.SingleOrDefault(file =&gt; file.file_id == fileID);\n        db.Files.DeleteObject(fileToDelete);\n    }\n\n    internal folders GetFolder(int folderID)\n    {\n        return db.folders.SingleOrDefault(folder =&gt; folder.folder_id == folderID);\n    }\n}\n</code></pre>\n\n<p>The problem is I keep getting the following EF Exception:\n<strong>There is already an open DataReader associated with this Command which must be closed first</strong></p>\n\n<p>I've tried to add MultipleActiveResultSets = true, to my connection string in the web.config, but I still get the exception. I know why this exception is being thrown, but I don't know how to do what I need to and prevent it from throwing an exception.</p>\n\n<p>PLEASE HELP!!! </p>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc","silverlight"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13175751,"title":"Communication between browser of two application in different domain","body":"<p>I have one silverlight application hosted at www.abc.com</p>\n\n<p>I have one web application hosted at www.xyz.com</p>\n\n<p>I want to call the page of web application on button click of silverlight application and pass some parameters to it now silverlight application will show busy indicator until the transaction of the page of web application doesn't get completed. Now if the user has successfully done the transaction in the page or if he close the page of web application i want some parameters to pass to silverlight application so that it can know to stop the busy indicator and further process. I know there would be something in jquery or ajax which do such communication in cross domain but i am not getting it around.</p>\n\n<p>I would really appreciate if someone could help me out with this.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","http"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13165892,"title":"Securely posting from Fiddler 2.0 to ASP.NET MVC 4","body":"<p>Given: <a href=\"http://anyurl.com/Base/Processor/\" rel=\"nofollow\">http://anyurl.com/Base/Processor/</a> is the base url to hit a controller action on Processor, I have no trouble using HTTP GET to pass values to the server using REST routes \"/value\" or form parameter \"?value=value\". </p>\n\n<p>However, when I try to post placing the payload in the http request body, I cannot get the server to accept the input. I have tried several variations of the following:</p>\n\n<pre><code>User-Agent: Fiddler\nHost: anyurl.com\nContent-Length: 11\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n\nvalue=value\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net","sql","asp.net-mvc","tsql"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4510,"score":4,"question_id":2851754,"title":"IDENTITY_INSERT is set to off error","body":"<p>I have a MVC web application with a table in the model that I would like to add to.  I have the primary key set along with the other data fields, but every time I try to add to the table, I get the following error:</p>\n\n<p>\"Cannot insert explicit value for identity column in table 'TABLE_NAME' when IDENTITY_INSERT is set to OFF.\"</p>\n\n<p>I'm not sure why this problem is coming up, I have the primary key set as the identity and it is also set to auto increment in the Visual Studio table designer.  Is there any way I can adjust the IDENTITY_INSERT parameter in the table designer in Visual Studio??  Or is there some other issue that might be causing this.</p>\n\n<p>UPDATE:  @Brian - As far as I can tell, I'm not setting the value explicitly, here is the code that adds to the table(s).</p>\n\n<pre><code>//Add viewer\npublic void addViewer(ModelStateDictionary modelState, Users user)\n{\n   var userToAdd = new UserRoles();\n   userToAdd.Users = user;\n\n   if (String.IsNullOrEmpty(userToAdd.Users.Username))\n   {\n      modelState.AddModelError(\"noName\", \"Please enter a username for the new Viewer\");\n   }\n\n   //See if Committee Member already exists\n   try\n   {\n      userToAdd = _db.UserRoles.First(ur =&gt; ur.Users.Username == userToAdd.Users.Username);\n      modelState.AddModelError(\"userExists\", \"A Viewer with that username already exists in the system\");\n      return;\n    }\n    catch (Exception e)\n    {\n       if (modelState.IsValid)\n       {\n          //Assign Committee Member role\n          userToAdd.Role = \"Viewer\";\n          userToAdd.Users = user;\n          //Add new Committee Member to User Roles and associated username to Users\n          _db.AddToUserRoles(userToAdd);\n          _db.SaveChanges();\n       }\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","storefront","mvc-storefront"],"answer_count":1,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1716,"score":6,"question_id":2114903,"title":"MVC Storefront - Kona - Where are they?","body":"<p>I am looking for a full-blown shopping cart example for ASP.Net MVC. I found plenty of links pointing to MVC Storefront (<a href=\"http://mvcsamples.codeplex.com/\">1</a>) (Apparently not being developed anymore) and other articles which talk about Kona, a separate project based off MVC Storefront. Too bad, MVC Store Preview 1A had me pretty happy.</p>\n\n<p>Are there any \"production ready\", open-source ASP.Net MVC Shopping Carts?</p>\n\n<p>Thank you</p>\n"},{"tags":["c#","asp.net-mvc","exception","controller","elmah"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13177291,"title":"How to create an exception with redirection to user-friendly error page in MVC","body":"<p>I have an MVC action which generates a Word document:</p>\n\n<pre><code>    [HttpGet]\n    public ActionResult ExportToWord(string docId)\n    {\n    try\n    {\n      //...\n      //Word-document generating is done here...\n      //...\n      return File(stream, MIMEAssistant.GetMIMEType(\"docx\"), fileName + \".docx\");\n    }\n    catch (Exception e)\n    {\n        throw new Exception(\"Problem with generating! \" + e.ToString());\n    }\n</code></pre>\n\n<p>If I have  so I get en Asp.Net standard exception with URL </p>\n\n<pre><code>http://localhost:18314/Export/ExportToWord?docId=5\n</code></pre>\n\n<p>If I have  so I have the same URL. Redirection is not done. It must go to </p>\n\n<pre><code>http://localhost:18314/Home/ErrorPage.\n</code></pre>\n\n<p>Now users do not get any error page, just reloading of the page. The page is reloaded not correctly because the URL is </p>\n\n<pre><code>http://localhost:18314/Export/ExportToWord?docId=5\n</code></pre>\n\n<p>I hope it was understandable description :)</p>\n\n<p>Question: How to make correct redirection to .../Home/ErrorPage and send an exception by using Elmah logging facility?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13177456,"title":"Mvc State replacement","body":"<p>I'm having hard time understanding the stateless issue with mvc.\nLet's say i have a screen with a list of people. i want to choose one of them, and once i selected this person i want to keep his ID, and from my left menu i want to open a screen with his orders, a screen with his account details....\nIn ASPX i would just keep his PersonID in the session, and use it all over the website.\nHow can i do the same in mvc? what if i keep his id in a public variable in a public static class? will it work? </p>\n\n<p>Thanks.</p>\n"},{"tags":["javascript","asp.net-mvc","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13176729,"title":"Ajax call and windows authentication not working correct","body":"<p>I have a asp.met mvc 4 project.</p>\n\n<p>This is my view code, minimized:</p>\n\n<pre><code>@model E4.administrasjon.Models.ViewModels.vmRekv\n&lt;form action=\"#\" method=\"post\" class=\"form label-inline\" id=\"saveTask\"&gt;\n @Html.HiddenFor(m =&gt; m.rekv.RekvID)\n&lt;div class=\"field\"&gt;&lt;label for=\"Subject\"&gt;Titel&lt;/label&gt;&lt;input id=\"Subject\" value=\"@Model.rekv.Subject\" name=\"Subject\" size=\"50\" type=\"text\" class=\"medium\" /&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I then have this javascript:</p>\n\n<pre><code>&lt;script&gt;\n$(document).ready(function () {\n    $('#btnSave').click(function () {\n        alert(\"clicked\");\n        $.ajax({\n            url: 'http://localhost:88/API/apiRekv',\n            type: 'POST',\n            dataType: 'json',\n            data: $('form#saveTask').serialize(),\n            success: function (data) {                        \n                alert(\"OK\");                   \n            },\n            error: function (data) {\n                alert(\"Error\");                    \n            }\n        });      \n    });\n});\n</code></pre>\n\n<p></p>\n\n<p>The controller is a simple WebApi controller</p>\n\n<pre><code>public void Post(vmRekv item)\n    {           \n        //Some insert to db code\n}\n</code></pre>\n\n<p>The insert operation work with both anonymous and Windows authentication turned on/off. But when I turn on Windows auth. then the javascript success/failure event are not called.</p>\n\n<p>Its called as it should when windows authentication turned off.</p>\n\n<p>By the way, I'm using local IIS express</p>\n"},{"tags":["asp.net-mvc","content-management-system","orchardcms","oxite"],"answer_count":6,"favorite_count":3,"up_vote_count":4,"down_vote_count":1,"view_count":1727,"score":3,"question_id":3014794,"title":"Any known orchard cms case studies?","body":"<p>We're looking into using orchard cms for a project. I know the CMS hasn't been around for a long time, but I was wondering if there were any known high profile and successful case studies using orchard cms or its predecessor Oxite ? </p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","multithreading","asp.net-mvc-3","castle-windsor","lifestyle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13177078,"title":"Castle Windsor lifestyle configurable per consumer? (Threading issue in ASP.NET MVC3 application.)","body":"<p>In my ASP.NET MVC3 application, the normal Castle Windsor lifestyle is \"PerWebRequest.\"\nThis has worked very well so far.</p>\n\n<p>However, now I need some tasks (e.g. email sending) to be executed on a different thread, after the web request has ended (to be exact, this is a custom form of event handling).\nWith the \"PerWebRequest\" lifestyle, this leads to ObjectDisposedExceptions.</p>\n\n<p>According to <a href=\"http://stackoverflow.com/questions/7203745/windsor-composite-lifestyle-for-asp-net-process\">this thread</a>, the Hybrid lifestyle from the Castle.Windsor.Lifestyles contrib project would do just what I want.\nBut I'd like to know if there is another option, without adding another dependency.\nLike to always have my event handlers use the \"PerThread\" lifestyle or something similar, whilst all other consumers still would use the \"PerWebRequest\" default.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","ajax","asp.net-mvc","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13175481,"title":"How to capture ajax drop down list value in MVC 3 view?","body":"<p>I have the following view that has tow dropdowns and one button:</p>\n\n<pre><code>@model RoomReservation.Webb.Models.HomeViewModel\n\n@{\n    ViewBag.Title = \"\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Index&lt;/h2&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Select a city and a hotel&lt;/legend&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x=&gt;x.City_DDL_ID, new SelectList(Model.AllCities, \"Value\", \"Text\"),\"...pick a city...\" )\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x =&gt; x.Hotel_DDL_ID, Enumerable.Empty&lt;SelectListItem&gt;(), \"...pick a hotel...\", new { disabled = \"disabled\"})\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;input id=\"SearchButton\" type=\"submit\"  onclick=\"window.location.href='/Home/SearchForRooms'\" disabled=\"disabled\"/&gt; \n&lt;/fieldset&gt;\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $('#City_DDL_ID').change(function () {\n        var selectedCity = $(this).val();\n        if (selectedCity != null &amp;&amp; selectedCity != '-1') {\n            $.getJSON('@Url.Action(\"GetHotels\")', { id: selectedCity }, function (hotels) {\n                var hotelsSelect = $('#Hotel_DDL_ID');\n                hotelsSelect.empty();\n                $.each(hotels, function (index, hotel) {\n                    hotelsSelect.append($('&lt;option/&gt;',\n                    {\n                        value: hotel.Value,\n                        text: hotel.Text\n                    }));\n                });\n                $('#Hotel_DDL_ID').attr('disabled', false);\n                $('#SearchButton').attr('disabled', false);\n\n            });\n        }\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n function onsubmitclcik() {\n    var SecondDrpId = $('#Hotel_DDL_ID').val();\n    window.location.href = '/Home/SearchForRooms?parameter=' + SecondDrpId;\n</code></pre>\n\n<p>}\n    </p>\n\n<p>I would like to get a value from second dropdown so that I can give it as paramater to my method f**ired from the button atribute \"onclick\". It is now working (above script).\nBut my action still gets null parameter. Here is the code:</p>\n\n<pre><code>public ActionResult SearchForRooms(int SecondDrpId) \n    {\n        if (SecondDrpId &gt; -1)\n            return View(); //Here goes some model, not important\n        else\n            return RedirectToRoute(\"Home/Index\");\n    }\n</code></pre>\n\n<p>Here is the Chrome parameter:\nRequest URL:http://localhost:22191/Home/SearchForRooms?parameter=3\nRequest Method:GET \nthank you**</p>\n"},{"tags":["c#","asp.net-mvc","authentication","iis","ntlm"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12091116,"title":"How to prevent unauthorized child action to return 401","body":"<h1>Problem</h1>\n\n<p>Long story short, how can you prevent unauthorized ChildActions to return a 401 code and return an empty result instead.</p>\n\n<h1>Context</h1>\n\n<p>My application uses <strong>NTLM</strong> to authenticate on the network. I also want to handle anonymous identification, for non <strong>NTLM</strong> capable devices or if someone goes through some proxy.</p>\n\n<p>One the the web application, there is controller/actions that absolutely require to be logged in to be viewable and some other that are viewable as anonymous. For the ones that authentication is mandatory where I initially used the following:</p>\n\n<pre><code>[Authorize()]\npublic class SomeController : BaseController\n</code></pre>\n\n<p>Which works as expected and returns a <strong>401 Status Code (Unauthorized)</strong>.</p>\n\n<p>The problem starts on the page that allows anonymous. Because those pages have parts that uses RenderAction to render pieces <strong>that requires authentication</strong>. </p>\n\n<p>On local developpement server on front end everything looks fine, but with <strong>IIS</strong> any page that have any small piece that requires authentication it returns 401 page. So I created a custom Authorize attribute:</p>\n\n<pre><code>public class CustomAuthorizeAttribute : AuthorizeAttribute\n{\n    public bool Ignore401ChildAction { get; set; }\n\n    public CustomAuthorizeAttribute()\n        : base() {\n        this.Ignore401ChildAction = true;\n    }\n\n    protected override void HandleUnauthorizedRequest( AuthorizationContext filterContext ) {\n        base.HandleUnauthorizedRequest( filterContext );\n        if( this.Ignore401ChildAction &amp;&amp; filterContext.IsChildAction ) {\n            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;\n        }\n    }\n}\n</code></pre>\n\n<p>And then on frontend it seems to produce correct behavior with and without IIS. However in the backend, even if the page renders completly it returns a 401</p>\n\n<p>So I added the following to my CustomAttribute instead of <strong>TrySkipIisCustomErrors</strong></p>\n\n<pre><code>filterContext.HttpContext.Response.StatusCode = 200;\nfilterContext.Result = new EmptyResult();\n</code></pre>\n\n<p>In anonymous everything is fine, but when NTLM is enabled server doesn't request authentication when the controller doesnt have that CustomAuthorize attribute. It seems like its only requesting the crendetials when their mandatory instead of when they're available.</p>\n\n<p>Thank you,</p>\n\n<h2>EDIT</h2>\n\n<p>After lot of searching, digging and fiddling, realized that true problem is that Anonymous identification will take precedence over Windows/NTLM. If <strong>Anonymous</strong> and <strong>Windows</strong> authentication are enabled, <strong>Windows</strong> will only execute if anonymous authentication fails.</p>\n\n<p><h2>SOLUTION</h2>(not perfect and kind of hackish but it works)</p>\n\n<p>Add the following function to your BaseController then call from the views that do not mandatory require authentication, or simply call it from your <strong>_Layout</strong> view.</p>\n\n<p>NOTE: Even though page will render correctly as anonymous, a <strong>401 status code will still be returned.</strong></p>\n\n<pre><code>[CustomAuthorize]\npublic ActionResult Auth() {\n    return new EmptyResult();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","grid","kendo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13170936,"title":"Hierarchical Grid in Kendo UI with ASP.NET MVC","body":"<p>I am implementing 3 level hierarchy grid using the Kendo UI MVC controls. At First level there will be Users Roles, expanding users Roles will show all the Features defined for that role and expanding features will show all the Features Actions that are defined for that features. </p>\n\n<p>At Feature and Features Action grid there will be checkboxes in the first column so that user checks the checkboxes to assigned the feature actions to the features and features to User Roles. Below the Feature Action grid there will be Submit button to Save the data(all the features actions and features assigned to the Roles by checking the checkboxes). </p>\n\n<p>Now, I have few questions regarding this.</p>\n\n<ol>\n<li>How to submit the Features and Features Actions grid data model to my Action method on click of Submit button?</li>\n<li>I want if any of the features checkboxe is checked then all the feature actions will gets checked by default?</li>\n<li>Is it possible to use the default Save Changes button of the kendo UI grid in hierarchy grid.I tried to implement this by using the toolbar.Save() button but button does not shows up in the grid.</li>\n</ol>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-web-api","repository-pattern"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13174184,"title":"Is the Repository Pattern valid for a ASP.Net WebAPI project which just calls remote services","body":"<p>I'm developing something similar to a service facade using the ASP.Net WebAPI. The objective is to create a RESTful middle layer between a backend system and a mobile application.</p>\n\n<p>The code inside these service operations does not contain any logic which accesses data from a database. i.e. the EF framework, Linq to SQL, etc. Instead data is selected and updated by calling another set of remote services offered by a back end system.</p>\n\n<p>I need to implement some sort of unit testing for each service operation. Almost all WebAPI unit testing tutorial I visited online contains data access via Entity Framework and a repository class just wraps a single EF entity. </p>\n\n<p>Hence in my case</p>\n\n<ol>\n<li>Does it make sense to have unit tests when there is no data access logic inside the service operations as I mentioned above?</li>\n<li><p>If so is the Repository pattern the way to go? Please link an example which tests against a MVC project that accesses data via remote service calls if possible. </p></li>\n<li><p>Am I confusing integration testing with unit testing?</p></li>\n<li>If so should I just go for integration testing and forget about unit tests.</li>\n</ol>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13174593,"title":"Entity Framework 5 Code first adding an image","body":"<p>I am writing a very small application with mvc4 and entity framework 5.</p>\n\n<p>I want to add a product and store and image for the product.</p>\n\n<p>I have a model</p>\n\n<pre><code>  [Table(\"CatalogItem\")]\npublic class CatalogItemModel\n{\n    [Key]\n    public int CatalogItemId { get; set; }\n\n    public string Description { get; set; }\n\n    public double Price { get; set; }\n\n    public int ProductCount { get; set; }\n\n    public string Size { get; set; }\n\n    public string Sku { get; set; }\n\n    [Column(TypeName = \"image\")]\n\n\n    public byte[] Image { get; set; }\n\n    [Display(Name = \"Display Catalog Item\")]\n    public bool DisplayItem { get; set; }\n}\n</code></pre>\n\n<p>My controller. This never gets hit.</p>\n\n<pre><code> [HttpPost]\n    public ActionResult Create(CatalogItemModel catalogitemmodel)\n    {\n        if (ModelState.IsValid)\n        {\n            db.CatalogItemModels.Add(catalogitemmodel);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        return View(catalogitemmodel);\n    }\n</code></pre>\n\n<p>My views form</p>\n\n<pre><code>    &lt;fieldset&gt;\n    &lt;legend&gt;CatalogItemModel&lt;/legend&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Description)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Description)\n        @Html.ValidationMessageFor(model =&gt; model.Description)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Price)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Price)\n        @Html.ValidationMessageFor(model =&gt; model.Price)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.ProductCount)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.ProductCount)\n        @Html.ValidationMessageFor(model =&gt; model.ProductCount)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Size)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Size)\n        @Html.ValidationMessageFor(model =&gt; model.Size)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Sku)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Sku)\n        @Html.ValidationMessageFor(model =&gt; model.Sku)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.DisplayItem)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.DisplayItem)\n        @Html.ValidationMessageFor(model =&gt; model.DisplayItem)\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(m=&gt;m.Image)\n    &lt;/div&gt;\n\n    &lt;input name=\"Image\" type=\"file\"/&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>When I try posting a new catalog with an image within my file input however it throws an error </p>\n\n<blockquote>\n  <p>The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or an illegal character among the padding characters.</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","iis","windows-7","excel-interop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13175154,"title":"Excel 2007 COM cannot be deployed with MVC website?","body":"<p>I have a website written by MVC C# (Visual studio 2010). I use Microsoft Excel 2007 COM to export some data to excel file and then send it to web client. (Because the excel file is kinda complex so I didn't use OpenXML)</p>\n\n<p>Every thing is OK when I run debug code at my local computer. But when I try to deploy the website to IIS server (server has been installed Office 2007 and visual 2010 also), the export functionality doesn't work at all. Even excel process doesn't start when request from client comes. Other else functions are run very nice but Excel related.</p>\n\n<p>Please help me to find what is the problem and how can I get over this.\nThanks in advance!</p>\n\n<p>P.S. Debug local on server is done successfully with the same result when debug on my local PC.</p>\n"},{"tags":["asp.net-mvc","asp.net-webforms","html.renderpartial"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13169289,"title":"Generate N user controls (partial views)","body":"<p>I am trying to migrate a project from web forms to mvc. I need page(view) where i can render N partial views and submit the data. Model should look something like this:</p>\n\n<pre><code>    public class ContactInfo\n    {\n        Contact customer{get;set;}\n        List&lt;Contact&gt; guests {get;set;}\n    }\n</code></pre>\n\n<p>Can anyone help me with this. I know about @HTML.RenderPartial but i have problem submiting that data. Another problem that i have is that some of the fields are required depending on what contact type they belong. At first it will be great help if i can just submit that data. Later will find solution for required field, maybe some custom validators or something. As i said or not i am new to this so something of this may sound stupid.</p>\n"},{"tags":["c#","asp.net-mvc","usercontrols","enums"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13172719,"title":"UserControl Loses Data","body":"<p>I have three pages with very similiar behaviour, so I made a User Control with 3 behaviours, I did this with adding an enum and a property of this enum type.  </p>\n\n<pre><code>public enum ucType\n    { \n        CustomersWhoHaveAContract, CustomersWaitingForContract, CustomerOfPreReservedContracts\n    }\n\n    public ucType UserControlType;\n\n    protected void BtnLoadInfo_Click(object sender, ImageClickEventArgs e)\n    {\n        switch (UserControlType)\n        {\n            case ucType.CustomersWhoHaveAContract:\n                DoA();\n                break;\n            case ucType.CustomersWaitingForContract:\n                DoB();\n                break;\n            case ucType.CustomerOfPreReservedContracts:\n                DoC();\n                break;\n            default:\n                break;\n        }\n</code></pre>\n\n<p>in my pages I assign a value to the UserControlType,  </p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n    {\n        if (!Page.IsPostBack)\n        {\n            ucCustomersWithContract1.UserControlType = UserControls.ucCustomersWithContract.ucType.CustomerOfPreReservedContracts;\n        }\n    }\n</code></pre>\n\n<p>but when I click the button the UserControlType is always <code>CustomersWhoHaveAContract</code>, meaning that it is losing it's value. Where is the problem?</p>\n"},{"tags":["asp.net-mvc","database","razor","syntax"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13174952,"title":"Display razor from database","body":"<p>I am trying to display content such as </p>\n\n<pre><code>&lt;p&gt;Text and link - @Html.ActionLink(\"Link\", \"Action\")&lt;/p&gt;\n</code></pre>\n\n<p>from a database, but if I use <code>@Html.Raw</code> then it doesn't render the link.</p>\n\n<p>Is there anyway to do this?</p>\n"},{"tags":["javascript","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13174930,"title":"passing a javascript validation to dynamic textboxes in mvc3","body":"<p>Hello everyone i am working on a project similar to a shopping cart.I am using the below code to generate textboxes(for selecting the quantity) in my view:</p>\n\n<pre><code>    @foreach (var item in Model)\n     {\n      &lt;tr&gt;\n      &lt;td align=\"left\" class=\"Text_nocolor\"&gt;\n       @Html.DisplayFor(modelItem=&gt;item.ProductName)                                \n       /td&gt;\n       &lt;td align=\"right\" class=\"Text_nocolor\" valign=\"top\"&gt;\n      @using (Html.BeginForm(\"Update\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n       {               \n    &lt;input id=\"Quantity\" type=\"text\" class=\"Text_nocolor\" name=\"Quantity\" value=\"@item.Quantity\"  @*onblur=\"return NumberOnlyTextBox(event)\"*@  onchange=\"return allownumbers()\" maxlength=\"3\"/&gt;  \n@Html.Hidden(\"unitrate\", item.Rate)               \n                                                    &lt;input type=\"submit\" value=\"Edit\" class=\"Text_nocolor\" onkeypress=\"return validateNumbersOnly(e);\" onclick=\"return RegainFocus();\" /&gt;\n       }\n</code></pre>\n\n<p>In the above code \"id=Quantity\" represents the textboxes.\nand i have written a javascript for <strong>numbers only</strong> validation for these textboxes.\nThese are my javascript functions:</p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n        function RegainFocus() {\n            if ((document.getElementById(\"Quantity\").value).length == 0) {\n                document.getElementById(\"Quantity\").focus();\n                alert(\"Quantity cannot be empty\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            else if ((document.getElementById(\"Quantity\").value) &gt; 100) {\n                alert(\"There is no enough inventory for this product to fulfill your order\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n        }\n    &lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function allownumbers() {\n            //      var elements = document.getElementsByName('Quantity');\n//           for()\n            var val = parseInt(document.getElementsByName(\"Quantity\").item(1).value);\n            alert(val);\n            if (!val || val &lt; 1) {\n                alert('Please enter a valid value');\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            document.getElementById(\"Quantity\").value = val;\n            return true;\n        }\n     &lt;/script&gt;\n</code></pre>\n\n<p>My problem is that the validation <strong>works only for the first textbox</strong> not the others.\nCan anyone pls provide a solution? Thank you</p>\n"},{"tags":["asp.net-mvc","flickr"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":25,"score":-1,"question_id":13173558,"title":"Create a photo upload system just like Flickr with ASP.NET MVC","body":"<p>I have to create a photo upload system just like Flickr.com ( select many file at once and upload them and create thumbnails and write some description about them ) in ASP.NET MVC. \nAny code or sample?</p>\n"},{"tags":["jquery","asp.net-mvc","validator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13172177,"title":"Not able to see JQuery Validator Messages behind the control after validating form","body":"<p>On Page Load... <code>$(document).ready(function () { $(\"form\").validate(); });</code></p>\n\n<p>On Save Button Click Event... <code>if($('form').valid()) { Saving data here... }</code></p>\n\n<p>\"Firebug\" with Chrome and Firefox shows everything just perfect with <code>$(\"form\").validate()</code> and even <code>$('form').valid()</code> returns true and false as expected, but can't see error messages behind specific form controls.</p>\n\n<p>*All are in MVC View</p>\n"},{"tags":["asp.net-mvc","parameters","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13171573,"title":"How to hide id in the url (MVC3)","body":"<p><strong>Problem</strong></p>\n\n<p>In my project i decided to imlement a custom menu provider using a db stored entity \"Section\".\nSo the section is mapped to the following Model:</p>\n\n<pre><code>public class TopMenuItemModel : BaseTrivitalModel\n{\n    public TopMenuItemModel()\n    {\n        ChildItems = new List&lt;TopMenuItemModel&gt;();\n    }\n\n    public int ItemId { get; set; }\n    public string RouteUrl { get; set; }\n    public string Title { get; set; }\n    public string SeName { get; set; }\n\n    public IList&lt;TopMenuItemModel&gt; ChildItems { get; set; }\n}\n</code></pre>\n\n<p>And the view for the model:</p>\n\n<pre><code>@model TopMenuModel\n&lt;nav id=\"main-nav\"&gt;\n    &lt;a href=\"@Url.RouteUrl(\"HomePage\")\"&gt;@T(\"HomePage\")&lt;/a&gt;\n    @foreach (var parentItem in Model.MenuItems)\n    { \n        &lt;a href=\"@Url.RouteUrl(\"Section\", new { seName = parentItem.SeName, sectionId = parentItem.ItemId })\"&gt;@parentItem.Title&lt;/a&gt;\n    }\n&lt;/nav&gt;\n</code></pre>\n\n<p>My Default route is:</p>\n\n<pre><code>routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                new[] { \"Trivital.Web.Controllers\" }\n            );\n</code></pre>\n\n<p>Controller for the menu:</p>\n\n<pre><code>public class CommonController : BaseTrivitalController\n    {\n\n...     \n\npublic ActionResult TopMenu()\n        {\n            var sections = _sectionService.GetCollectionByParentId(0, true);\n            var model = new TopMenuModel();\n\n            model.MenuItems = sections.Select(x =&gt;\n                {\n                    var item = new TopMenuItemModel()\n                    { \n                        ItemId = x.Id,\n                        Title = x.GetLocalized(s =&gt; s.Title, _workContext.WorkingLanguage.Id, true, true),\n                        SeName = x.GetSeName(),\n                        RouteUrl = \"\",\n                    };\n\n                    return item;\n                })\n                .ToList();\n\n            return PartialView(model);\n        }\n    }\n}\n</code></pre>\n\n<p>Now I have a SectionController where I have an ActionResult mehtod:</p>\n\n<pre><code>//section main page\n        public ActionResult Section(string seName)\n        {\n            var section = _sectionService.Get(1);\n            if (section == null || section.Deleted || !section.Published)\n                return RedirectToAction(\"Index\", \"Home\");\n\n            //prepare the model\n            var model = PrepareSectionPageModel(section);\n\n            return View(model);\n        }\n</code></pre>\n\n<p>My current Route for the Section (that gives me host/sectionSeName-id):</p>\n\n<pre><code>routes.MapLocalizedRoute(\n                            \"section\", // Route name\n                            \"{SeName}\"+ \"-\" + \"{sectionId}\", // URL with parameters\n                            new { controller = \"Sections\", action = \"Section\" },\n                            new { sectionId = @\"\\d+\" }\n                            );\n</code></pre>\n\n<p>Now I need to get my Url looks like this (without id, just the section name):</p>\n\n<p>host/sectionSeName</p>\n\n<p>Is there anyway to hide the Id in the url to make the urls look SEO-friendly, but available for the controller???</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13169703,"title":"Render text as PNG and keep formatting using .Net?","body":"<p>We have a requirement from our client where a user can type into a rich text editor and format their text. Once they have completed typing the user clicks a button to render the text with the  a specific font style and keep the formatting. The font styles will be predetermined, but will be selected at the time of rendering.</p>\n\n<p>I have been looking around and have not found much on the topic, but it is Halloween and I am sugared  out.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":32,"score":-1,"question_id":13175200,"title":"ASP.NET or ASP.NET MVC","body":"<p>i have a general question. I want to develop a Web Application for business process modelling. The application was build using c# and WPF as  Desktop Application Software and now i would like to develope it as Web Application. what technology should i choose?</p>\n\n<p>I've tried to find it myself but there are many different opinions about that topic. Is there any general rule or methodology which can help me decide?</p>\n"},{"tags":["asp.net-mvc","entity-framework","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13174197,"title":"'Microsoft.SqlServer.Types' version 10 or higher could not be found on Azure","body":"<p>I'm trying to make a webapi in ASP.NET MVC 4. The webapi used Entity Framework 5 Spatial types and i have wrote a very simple code. </p>\n\n<pre><code>  public List&lt;Area&gt; GetAllAreas()\n    {\n        List&lt;Area&gt; aList = db.Areas.ToList();\n        return aList;\n    }\n</code></pre>\n\n<p>Area contains DbGeometry.</p>\n\n<p>When i run this local it works, but when i publish it to azure it gives me this error:</p>\n\n<blockquote>\n  <p>Spatial types and functions are not available for this provider because the assembly 'Microsoft.SqlServer.Types' version 10 or higher could not be found.</p>\n</blockquote>\n\n<p>Anyone know how to resolve this ? :)</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":597,"score":3,"question_id":11042556,"title":"How to use WebGrid in a cshtml view?","body":"<p>I am able to use <a href=\"http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid%28v=vs.99%29.aspx\" rel=\"nofollow\">WebGrid</a> in any controller like:</p>\n\n<p><code>var grid = new WebGrid(emailsFetched, columnNames);</code></p>\n\n<p>I had to add a reference in my ASP.NET MVC project to <code>System.Web.Helpers</code> for this.</p>\n\n<p>But when I try to use this web grid in <strong>view</strong> directly (to avoid instantiation and other settings in controller) it says: <code>The type or namespace 'WebGrid' cannot be found</code>. Ok, I tried to add a reference here too:</p>\n\n<p><code>@using System.Web.Helpers</code> but this throws another issue: </p>\n\n<p><code>There is no build provider registered for the extension '.cshtml'. You can register one in the &lt;compilation&gt;&lt;buildProviders&gt; section in the machine.config or web.config. Make sure is has a BuildProviderAppliesToAttribute attribute which includes the value 'Web' or 'All'.</code></p>\n\n<p>This is pretty strange... I've seen enough example on net which are using WebGrid and don't have to declare anything in the cshtml view...</p>\n\n<p>Can you please tell me how to solve this? Or why I encounter this very ugly issue?</p>\n"},{"tags":["asp.net-mvc","iis","web-config","windows-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13140810,"title":"Authentication mode Windows not working","body":"<p>When I try to access my page I only get redirected to login.aspx, which is not what's intended.</p>\n\n<p>What I'm after is instead a windows login popup where I authenticate if my current logged in user is not allowed, and if it is, it goes straight to the application.</p>\n\n<p>I'm running a MVC4 project on an IIS6 webserver (yeah, I know.).</p>\n\n<p>I've disabled \"Enable anonymous access\" in Directory Security - Authentication and access control and checked in \"Integrated Windows authentication\".</p>\n\n<p>My web.config looks as follows:</p>\n\n<pre><code>&lt;authorization&gt;\n  &lt;allow roles=\"DOMAIN\\Role1\"/&gt;\n  &lt;deny users=\"*\"/&gt;\n  &lt;deny users=\"?\"/&gt;\n&lt;/authorization&gt;\n&lt;compilation targetFramework=\"4.0\" debug=\"true\"/&gt;\n&lt;authentication mode=\"Windows\"&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>Any clues?</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13173480,"title":"mvc kendo grid header text","body":"<p>after looking all over the web, i can't find how to set the header text to the kendo grid.\nfor example instead of FName i would like it to sat \"First name\".\nmaybe one of you guys know?</p>\n\n<pre><code>@(Html.Kendo().Grid(Model)\n    .Name(\"Grid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.FName).Groupable(false);\n        columns.Bound(p =&gt; p.ShemIvri) ;\n        columns.Bound(p =&gt; p.ShemLoazit);        \n    })\n    .Pageable()\n    .Sortable()\n    .Scrollable() \n    .Filterable()    \n    .DataSource(dataSource =&gt; dataSource        \n        .Ajax()\n        .ServerOperation(false)        \n     )\n)\n</code></pre>\n"},{"tags":["asp.net-mvc","ssl","https","seo","http-status-code-301"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13113674,"title":"Http redirect to Https and SEO with asp.net mvc","body":"<p>I am wondering if I should keep the GET pages off SSL, while the POST of that same URL on SSL?  I am reading issues with doing redirects of required pages that need SSL with SEO.  ASP.NET MVC has an attribute that however does a 302 redirect instead of a 301.  Is there a best practice in doing this with SEO.  I have pages such as Login, Register, an Account page.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13170994,"title":"In Telerik TabStrip (MVC), how to get the selected tab index?","body":"<p>My page looks like this, depending on the index of the selected tab, the Save button needs to behave differently.</p>\n\n<p><img src=\"http://i49.tinypic.com/rviwj6.gif\" alt=\"menu\"></p>\n\n<p>This is the jQuery code.</p>\n\n<pre><code>$(\"#btnSave\").click(function () {\n    var selectedTabIndex = $('#TabStrip').select().index()\n\n    if (selectedTabIndex == 1) {\n        InflowsSave();\n    }\n\n    if (selectedTabIndex == 2) {\n        OutflowsSave();\n    }\n\n});\n</code></pre>\n\n<p>I typed <code>$('#TabStrip').select().index()</code> within the Inspect Elements console.  It doesn't matter which tab is selected, it always returns 2.</p>\n\n<pre><code>&gt;&gt;&gt; $(\"#TabStrip\").select().index()\n\n2\n</code></pre>\n\n<p><b>$(\"#TabStrip\").select()</b></p>\n\n<pre><code>&lt;ul class=\"t-reset t-tabstrip-items\"&gt;\n    &lt;div id=\"TabStrip-1\" class=\"t-content\"&gt;\n    &lt;div id=\"TabStrip-2\" class=\"t-content t-state-active\" style=\"display:block\"&gt;\n    &lt;div id=\"TabStrip-3\" class=\"t-content\"&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13173679,"title":"how to retrieve the values in cascading dropdown for mulitiple locations in mvc3","body":"<p>I want to display the multiple locations like country, state,city and region in Dropdowns. The above three have separate tables in database.Each Id is the foreign key for other tables.I don't know how to code in view page.</p>\n\n<p>I tried But it is not working properly.</p>\n\n<p>My code is</p>\n\n<pre><code>    &lt;div class=\"editor-field\"&gt;\n     &lt;% var preferredCountries =      Model.CandidatePreferredLocations.Where(l=&gt;l.LocationId == l.Location.Id);%&gt;\n           &lt;% if (preferredCountries.Count() &gt; 0)\n           { %&gt;\n            &lt;% for (int i = 1; i &lt;= preferredCountries.Count(); i++)\n           { %&gt; \n            &lt;% var countryContainerId = \"location-container\" + i.ToString(); %&gt;\n            &lt;div id=\"&lt;%: countryContainerId %&gt;\" style=\"margin-bottom:4px;\"   class=\"location-container left\"&gt;\n            &lt;%: Html.DropDownList(\"PreferredCountry\" + i.ToString(), new      SelectList((IEnumerable&lt;Dial4Jobz.Models.Location&gt;)ViewData[\"Country\"], \"Id\", \"Name\", preferredCountries.ElementAt(i - 1).LocationId), new { @class = \"qualification\" })%&gt; \n                &lt;/div&gt;\n             &lt;% } %&gt;  \n\n         &lt;% } else { %&gt;\n                &lt;div id=\"location-container1\" style=\"margin-bottom:4px;\" class=\"basic-qualification-container left\"&gt;\n                  &lt;%: Html.DropDownList(\"PreferredCountry1\", (SelectList) ViewData[\"Countries\"], \"Any Country\")%&gt; \n                        &lt;select id=\"PreferredState1\" name=\"PreferredState1\"&gt;&lt;/select&gt;\n                        &lt;select id=\"PreferredCity1\" name=\"PreferredCity1\"&gt;&lt;/select&gt;\n                        &lt;select id=\"PreferredRegion1\" name=\"PreferredRegion1\"&gt;&lt;/select&gt;\n                        &lt;/div&gt;\n         &lt;% } %&gt;\n\n         &lt;div class=\"left\"&gt;               \n          &lt;input type=\"button\" id=\"btnAddLocation\" value=\"Add\" /&gt;\n         &lt;input type=\"button\" id=\"btnDelLocation\" value=\"Remove\" /&gt;\n         &lt;/div&gt;\n         &lt;/div&gt;      \n         &lt;br /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc",".net-4.5","asp.net-4.5"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":487,"score":5,"question_id":11992651,"title":"Is MVC4 baked into .NET 4.5?","body":"<p>A lot of release notes for Visual Studio 2012 talk about .NET 4.5 and MVC4, but I can't tell if MVC4 is actually part of the .NET 4.5 release. Anybody know for sure? I would love not to have to install MVC separately on my server.</p>\n"},{"tags":["asp.net-mvc","iis","png"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":129,"score":2,"question_id":9631170,"title":"Strange image generation error in asp.net","body":"<p>I have an ASP.NET-MVC project where I need to dynamically generate some png images. That's easy. I just create ActionResult that returns FileSreamResult object. To generate images I used classes from System.Drawing such as Bitmap and Image. Everything works fine on local machine and on production server. But when IIS on production server shuts down my application pool due to inactivity and starts it again, image generation starts to fail.</p>\n\n<p>Problem was in code that tries to save image to the stream:</p>\n\n<pre><code>  var imageStream = new MemoryStream();\n  bmp.Save(imageStream, ImageFormat.Png);\n</code></pre>\n\n<p>Exception is: <em>System.Runtime.InteropServices.ExternalException (0x80004005): A generic error occurred in GDI+</em>. So there is no much help. I tried a different solutions and nothing helps. After I have found this topic <a href=\"http://stackoverflow.com/questions/1528525/alternatives-to-system-drawing-for-use-with-asp-net\">Alternatives to System.Drawing for use with ASP.NET?</a> </p>\n\n<p>The main idea of this topic is: </p>\n\n<blockquote>\n  <p>Classes within the System.Drawing namespace are not supported for use within a Windows or ASP.NET service. Attempting to use these classes from within one of these application types may produce unexpected problems, such as diminished service performance and run-time exceptions.</p>\n</blockquote>\n\n<p>So I decided to use WPF classes to generate images. I rewrote all image generation code, but now I get another error after app pool restart. Exception:\n<em>System.Runtime.InteropServices.COMException (0x88982F8A): Exception from HRESULT: 0x88982F8A</em>. This happens when I try to save my PngBitmapEncoder to stream</p>\n\n<pre><code>var stream = new MemoryStream();\nencoder.Save(stream);\n</code></pre>\n\n<p>Maybe anyone encountered this problem or just have any ideas?</p>\n"},{"tags":["asp.net-mvc","asp.net-membership","database-connection","connection-string","mdf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13172855,"title":"Cannot open database ASPNETDB.MDF","body":"<p>I used default Membership of ASP.NET. After formatting PC and installing SQL Server Managment Studio I run application, I can not access my ASPNETDB.MDF, but can access other DB.\nFor example, when I try to register get so error:\n<img src=\"http://i.stack.imgur.com/zJqjk.png\" alt=\"enter image description here\"></p>\n\n<p>Connection string is so:</p>\n\n<pre><code>&lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS; Integrated Security=SSPI; AttachDBFilename=|DataDirectory|aspnetdb.mdf; User Instance=true\" providerName=\"System.Data.SqlClient\"/&gt;\n</code></pre>\n\n<p>How can I access ASPNETDB.MDF?</p>\n"},{"tags":["asp.net-mvc","jqgrid-asp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13172732,"title":"sample example on jqgrid in asp.net mvc?","body":"<p>Has any one worked on  in ASP.NET MVC,i'am beginner in MVC, i tried few articles for jqgrid but i am not able to get it right..i just need a simple example so that first i can understand it properly</p>\n\n<p>Also, what are the benefits of using jqgrid  over normail webgrid in MVC</p>\n"},{"tags":["asp.net-mvc","parameter-passing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13171783,"title":"Pass List of dictionary to asp.net mvc controller","body":"<p>So i have a ViewModel which contains list of dictionary property</p>\n\n<pre><code>public class ViewModel\n{\n    public List&lt;Dictionary&lt;int, bool&gt;&gt; Columns { get; set; }\n}\n</code></pre>\n\n<p>I trying to get back this model from view and all time it returns list with null items. </p>\n\n<pre><code>@Html.Hidden(String.Format(\"Columns[{0}][{1}].Key\", i, firstItem.Id), firstItem.Id)\n@Html.CheckBox(String.Format(\"Columns[{0}][{1}].Value\", i, firstItem.Id), Model.Columns[i][firstItem.Id])\n</code></pre>\n\n<p>This doesnt work.</p>\n\n<pre><code>@Html.CheckBoxFor(m =&gt; m.Columns[i][firstItem.Id])\n</code></pre>\n\n<p>This doesnt work too.</p>\n\n<p>What i am doing wrong?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13152206,"title":"Validation of Textbox in MVC4","body":"<p>I have a an Update Action to update the value based on my textbox input. I used javascript for my validation. The script and validation works fine only for the first textbox value.<br/>\nMy View Code</p>\n\n<pre><code>     @foreach (var item in Model)\n      {     &lt;tr&gt;          \n         &lt;td align=\"right\" class=\"Text_nocolor\" valign=\"top\"&gt;\n      @using (Html.BeginForm(\"Update\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n     {          \n         @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n         @Html.Hidden(\"productid\", item.ProductID as string)\n         &lt;input id=\"Quantity\" type=\"text\" class=\"Text_nocolor\" name=\"Quantity\" value=\"@item.Quantity\"  onblur=\"return allownumbers() \" maxlength=\"3\"/&gt;  \n          @Html.Hidden(\"unitrate\", item.Rate)               \n          &lt;input type=\"submit\" value=\"Edit\" class=\"Text_nocolor\" onclick=\"return RegainFocus();\" /&gt;\n     }\n       &lt;/td &gt;\n&lt;tr&gt;\n    }\n</code></pre>\n\n<p>The Script I used : <br/></p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n    function RegainFocus() {\n            if ((document.getElementById(\"Quantity\").value).length == 0) {\n                document.getElementById(\"Quantity\").focus();\n                alert(\"Quantity cannot be empty\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            else if ((document.getElementById(\"Quantity\").value) &gt; 100) {\n                alert(\"There is no enough inventory for this product to fulfill your order\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }           \n        }\n            function allownumbers() {\n                var val = parseInt(document.getElementById(\"Quantity\").value);\n                if (!val || val &lt; 1) {\n                    alert('Please enter a valid value');\n                    document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                    return false;                 \n                }\n                document.getElementById(\"Quantity\").value = val;\n                return true;\n            }\n    &lt;/script&gt;\n</code></pre>\n\n<p>I also checked whether I get a different ID for the Textbox. But all the textboxes have same ID and the validation doesnt works for the other textbox except the first textbox.<br/>\nAny Suggestions.</p>\n\n<p>EDIT ::<br/></p>\n\n<pre><code>  function allownumbers() {\n            alert('fasfa');\n            var elements = document.getElementsByName('Quantity');\n            for (var i = 0; i &lt; elements[i].length; i++) {  \n                alert(elements);\n                if (!elements || elements &lt; 1) {\n                    alert('Please enter a valid value');                    \n                    return false;\n                }\n                else if (elements &gt; 100) {\n                    alert('Please enter a value less than 100');\n                    return false;\n                }\n            }               \n            return true;\n        }\n</code></pre>\n\n<p>The model has values and Each textbox contain values in it. but elements return only NaN as value. </p>\n"},{"tags":["asp.net-mvc","content-management-system","dotnetnuke"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":11408881,"title":"Is it possible to create a Dot Net Nuke partial view for an MVC site?","body":"<p>I am looking at the posibility of integrating a third party component into our MVC-based site. The reason is that we want document handling and search features without taking the full job of implementing it from scratch. </p>\n\n<p>I'm unsure about the way to proceed and I am wondering if any of you have any experience with Dot Net Nuke. Is it possible to run an instance of Dot Net Nuke in the cloud and create a partial view providing a document module(cms-like) and a search module?</p>\n\n<p>Is there any other third party systems that are cloud compatible and provide an API for handling documents, security and full text search?</p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","iis7","metadata"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":87,"score":4,"question_id":13061036,"title":"How to copy non-code files with the compiled project when referenced by another project in C#","body":"<p>I have a project that acts as wrapper for a <em>3rd party .exe</em> (it has static methods to create the command line and run the executable). I want to use it in at least a couple of projects in my solution. Ideally, the .exe should only be in that wrapper project (I don't want to have to add it to each project that uses it). Right now I'm trying to get this to work with a web project (.NET MVC) running on IIS 7 but when I use <code>Assembly.GetExecutingAssembly().Location</code> to see the directory that my wrapper is called from I'm in a folder like</p>\n\n<blockquote>\n  <p>C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET\n  Files\\\"my\n  project\"\\65a016fb\\ac5f20a7\\assembly\\dl3\\d8de0f10\\06e277a2_55b2cd01</p>\n</blockquote>\n\n<p>and my 3rd party .exe is nowhere to be found. Is it possible to copy files with a reference that do not compile?</p>\n\n<p>Btw, I have set the <em>\"Copy to output directory\"</em> and <em>\"Build Action\"</em> properties of my .exe to <em>\"Copy always\"</em> and <em>\"Content\"/\"Resource\"/\"Embedded Resource\"</em> without success so far.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":5,"up_vote_count":26,"down_vote_count":0,"view_count":3263,"score":26,"question_id":2697299,"title":"asp.net mvc: why is Html.CheckBox generating an additional hidden input","body":"<p>I just noticed that <code>Html.CheckBox(\"foo\")</code> generates 2 inputs instead of one, anybody knows why is this so ?</p>\n\n<pre><code>&lt;input id=\"foo\" name=\"foo\" type=\"checkbox\" value=\"true\" /&gt;\n&lt;input name=\"foo\" type=\"hidden\" value=\"false\" /&gt; \n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13156484,"title":"Run javascript jquery in razor page context","body":"<p>I have a asp.net razor partial view which is used multiple times on one page.\nIn that partial view I have javascript in the $(document).ready() which I want to do some jQuery stuff on the content of the partial view.</p>\n\n<pre><code>&lt;div class=\"someclass\"&gt;\n&lt;/div&gt;\n&lt;script&gt;\n    $(document).ready(function() {\n        $('.someclass').dosomething();\n    ));\n&lt;/script&gt;\n</code></pre>\n\n<p>So the problem is that $('.someclass') returns to much elements when this partial view is use multiple times on one page.\nHow can I achieve that $('.someclass') returns only the intended element?</p>\n\n<p>The only solution I see is to generate a unique id for the element and use that in the jQuery selector. But I don't like generating id's for that.</p>\n\n<p>Any other ideas for a solution?</p>\n"},{"tags":["jquery","asp.net-mvc","html-helper","html.dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13141437,"title":"MVC DropdownListFor html helper interferes with JQuery submit when @size specified","body":"<p>I have this bizarre issue with MVC's html helper in that when I specify the @size for @Html.DropdownListFor, it prevents the jquery .submit from communicating with the server.  Any ideas as to what might be causing this?  Is there an alternative I could use to make the dropdown tall?  Here's the code:</p>\n\n<pre><code>           @using (Ajax.BeginForm(\"CreateInProgress\", \"Audit\", new AjaxOptions {     \nHttpMethod = \"POST\", OnSuccess = \"CreateInProgressSuccess\" }, new { id = \"CreateInProgressMainForm\"}))\n           {\n              &lt;div id=\"reqTabContentBox\" class=\"formPageContainer\"&gt;\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateApproveButton.ConfigurableLabelDesc)\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateDisapproveButton.ConfigurableLabelDesc)\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateSaveButton.ConfigurableLabelDesc)\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateAdvanceButton.ConfigurableLabelDesc)\n\n                  @Html.Partial(\"_CreateAudit\")\n               &lt;/div&gt;\n                       @Html.DropDownListFor(x =&gt; x.AuditDoc.AuditTemplateId, new SelectList(Model.AuditDoc.AuditTemplates, \"Id\", \"Name\"), new { size = \"6\", @class = \"left\" })\n              &lt;div id=\"finalButtons\" class=\"formPageContainer\"&gt;\n                 &lt;input id=\"AdvanceDirection\" name=\"AuditDoc.AdvanceDirection\" type=\"hidden\" value=\"Forward\" /&gt;\n\n                  &lt;span class=\"field-validation-error\" id=\"CreateFormValidation\"&gt;&lt;/span&gt;  \n                  &lt;span class=\"field-validation-success\" id=\"CreateSaveSuccess\"&gt;&lt;/span&gt; \n                  @if(Model.AuditDoc.CurrentStates.StateName == \"Active\")\n                  {\n                    &lt;div class=\"btnContainer\"&gt;\n                       &lt;input type=\"button\" id=\"SaveCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateSaveButton.ConfigurableLabelDesc\" /&gt;\n                       &lt;input type=\"button\" id=\"AdvanceCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateAdvanceButton.ConfigurableLabelDesc\" /&gt; \n                    &lt;/div&gt;\n                  }\n                  else\n                  {\n                    &lt;label&gt;@Model.ConfigDoc.AllEnterPrivateCommentLabel.ConfigurableLabelDesc&lt;/label&gt; @Html.TextAreaFor(x =&gt; x.AuditDoc.PrivateComment, 0, 0, false)\n\n                    &lt;div class=\"btnContainer\"&gt;\n                       &lt;input type=\"button\" id=\"DisapproveCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateDisapproveButton.ConfigurableLabelDesc\" @Model.OwnerApprovalAttribute /&gt;\n                       &lt;input type=\"button\" id=\"ApproveCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateApproveButton.ConfigurableLabelDesc\" @Model.OwnerApprovalAttribute /&gt;\n                    &lt;/div&gt;\n                  }\n               &lt;/div&gt;\n           }\n</code></pre>\n\n<p>And here's the jquery submit:</p>\n\n<pre><code>$(\"#CreateAuditMainForm\").submit();\n</code></pre>\n\n<p>Here's the generated code for the Html dropdownlistfor helper:</p>\n\n<pre><code>&lt;select class=\"left valid\" data-val=\"true\" data-val-number=\"The field AuditTemplateId must be a number.\" data-val-required=\"The AuditTemplateId field is required.\" id=\"AuditDoc_AuditTemplateId\" name=\"AuditDoc.AuditTemplateId\" size=\"6\" style=\"display: block; \"&gt; ... &lt;/select&gt;\n</code></pre>\n\n<p>I'd appreciate any help or words of wisdom!</p>\n"},{"tags":["c#","asp.net-mvc","iis","asp.net-mvc-2"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13164210,"title":"Some Static Content Loads Very Slowly","body":"<p>I'm attempting to install an MVC 2 web application to our production server.  This app has been run and tested on several test servers, but in production, some static content (most notably JavaScript files) load very, very slowly (sometimes 60+ seconds).  What's interesting, however, is that this isn't the case for all static content--during a typical page load cycle, all but one of the JS files will be successfully transferred to the client, but one will \"stick\" and sometimes never download.</p>\n\n<p>What's also odd is that if I go directly to the static content, it loads immediately.  </p>\n\n<p>I've investigated the handler mappings, and compared the IIS configuration to our test environment, and everything is similar.  What would cause this?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13168745,"title":"two jquery dialog share same partial view in one page","body":"<p>I have a page contains two jquery dialogs, they both render the same partial view \"_Edit\". Somehow, one of the partial views returns modal with Null values when submit with ajax. The other works fine. I tested that they both worked independently(commented the code).</p>\n\n<pre><code>&lt;div&gt;\n    @Html.ActionLink(\"New Paragraph\", null, null, new{id=\"addPopup\", @class = \"actionLink\"})\n&lt;/div&gt;\n&lt;div id=\"divParagraphList\"&gt;\n    @Html.Partial(\"_List\", Model.EmailNotificationParagraphList)\n&lt;/div&gt;\n\n&lt;div id=\"dialog-edit\" style=\"display: none\"&gt;\n    @Html.Partial(\"_Edit\", Model.EditEmailParagraph, new ViewDataDictionary())\n&lt;/div&gt;\n&lt;div id=\"dialog-add\" style=\"display: none\"&gt;\n    @Html.Partial(\"_Edit\", Model.AddEmailParagraph)\n&lt;/div&gt;\n\n    [HttpPost]\n    public ActionResult Update(EmailNotificationParagraphModel model)\n    {\n        EmailNotificationParagraphViewModel newModel = new EmailNotificationParagraphViewModel();\n\n        if (ModelState.IsValid)\n        {\n\n            return PartialView(\"_List\", newParagraphList);\n        }\n\n        return Json(model);\n    }\n\n    [HttpPost]\n    public ActionResult Add(EmailNotificationParagraphModel model)\n    {\n\n        if (ModelState.IsValid)\n        {\n\n            return PartialView(\"_List\", newParagraphList);\n        }\n\n        return Json(model);\n    }\n</code></pre>\n\n<p>Currently, the add works fine. The Edit returns modal with null values. Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":679,"score":0,"question_id":9604049,"title":"Asp.net MVC 3 Validation exclude some field validation in TryUpdateModel","body":"<p>I am using ASP.NET MVC Razor And Data Annotation validators\nMy model:</p>\n\n<pre><code>public class Person \n{ \n    public int id { get; set; } \n\n    [Required] \n    public string FirstName { get; set; } \n\n    [Required] \n    public string LastName { get; set; } \n} \n</code></pre>\n\n<p>FirstName And LastName are Requerd.\nI want to Edit FirstName. My Methode is:</p>\n\n<pre><code>public ActionResult Edit([Bind(Include = \"FirstName\")]Person person)\n{\n    var p = GetPerson();\n    if (TryUpdateModel(p))\n    {\n        //Save Changes;\n    }\n}\n</code></pre>\n\n<p>But TryUpdateModel always return false. because LastName is Invalid.</p>\n\n<p>How Can I Prevent check Validation Of LastName in TryUpdateModel?</p>\n\n<p>Note:</p>\n\n<ul>\n<li>The code is Simplified. my real code is very Complex</li>\n<li>I have To Use Requierd For Two Property</li>\n<li>I dont Want to use Different Model Class</li>\n</ul>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing","action-filter","actionfilterattribute"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13169937,"title":"ActionExecutingContext - ActionParameters vs RouteData","body":"<p>Given the following code:</p>\n\n<pre><code>public class MyActionFilter : ActionFilterAttribute\n{\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        var a = filterContext.ActionParameters[\"someKey\"];\n        var b = filterContext.RouteData.Values[\"someKey\"];          \n        base.OnActionExecuting(filterContext);\n    }\n}\n</code></pre>\n\n<p>What is the difference between <code>a</code> and <code>b</code> ?</p>\n\n<p>When should we be using action parameters over route data? What is the difference?</p>\n"},{"tags":["c#","jquery","asp.net-mvc","jquery-ajax"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":13169426,"title":"What is wrong with this JavaScript (using Ajax call in MVC 3)?","body":"<p><em>Here is my JavaScript:</em></p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $(\"select#City_DDL_ID\").change(function (evt) {\n            if ($(\"select#City_DDL_ID\").val() != \"-1\") {\n                $.ajax({\n                    url: \"/Home/GetHotels\",\n                    type: 'POST',\n                    dataType: \"json\",\n                    data: { id: $(\"select#City_DDL_ID\").val() },\n                    success: function (response) {\n//                        $('#Hotel_DDL_ID').attr('disabled', false);\n                        $(\"select#Hotel_DDL_ID\").replaceWith(response);\n                    },\n                    error: function (xhr) {\n                        alert(\"Something went wrong, pleae try again\");\n                    }\n                });\n            }\n        });\n    });\n</code></pre>\n\n<p>\n<em>Here is the Index.cshtml:</em></p>\n\n<pre><code>@model RoomReservation.Webb.Models.HomeViewModel\n\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Index&lt;/h2&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Select a city and a hotel&lt;/legend&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x=&gt;x.City_DDL_ID, new SelectList(Model.AllCities, \"Value\", \"Text\"),\"...pick a city...\" )\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x =&gt; x.Hotel_DDL_ID, Enumerable.Empty&lt;SelectListItem&gt;(), \"...pick a hotel...\", new { disabled = \"disabled\"})\n    &lt;br /&gt;\n    &lt;br /&gt;\n&lt;/\n\nfieldset&gt;\n</code></pre>\n\n<p><em>And here is the method that ajax calls:</em></p>\n\n<pre><code>public JsonResult GetHotels(int id) \n{\n   if (id &gt; 0)\n   {\n      var hotels = bl.ReturnAllHotelsInCity(id);\n      return Json(hotels);\n   }\n   else\n   {\n      throw new Exception(\"Hotel not reachable, please try again\");\n   }\n}\n</code></pre>\n\n<p>After selecting City in City_DDL_ID, my Hotel_DDL_ID disapperas.\nCan you help me, I am new in javasrcipt and ajax?</p>\n\n<p>Here is the newset script, and still not working:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $('#City_DDL_ID').change(function () {\n        var selectedCity = $(this).val();\n        if (selectedCity != null &amp;&amp; selectedCity != '-1') {\n            $.getJSON('@Url.Action(\"GetHotels\")', { id: selectedCity }, function (hotels) {\n                var hotelsSelect = $('#Hotel_DDL_ID');\n                hotelsSelect.empty();\n                $.each(hotels, function (index, hotel) {\n                    hotelsSelect.append($('&lt;option/&gt;',\n                    {\n                        value: hotel.Value,\n                        text: hotel.Text\n                    }));\n                });\n                $('#Hotel_DDL_ID').attr('disabled', false);\n            });\n        }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>So, what to do?</p>\n\n<p>Thank you all for your help, this latest script of mine is working, I change the default browser to Chrome.\nThank you all once again\nCheers</p>\n\n<p>P.S. Admin:How to mark question as answered?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":4027,"score":8,"question_id":1066350,"title":"How to get MvcApplication instance in Asp.NET Controller?","body":"<p>I think <code>MvcApplication</code> is a global singleton. I want to get the instance of <code>MvcApplication</code> in controller. Then I put following code in controller:</p>\n\n<p><code>MvcApplication app = HttpContext.Current.Application as MvcApplication;</code></p>\n\n<p>it give me error:</p>\n\n<p><code>Error  2   'System.Web.HttpContextBase' does not contain a definition for 'Current' and no extension method 'Current' accepting a first argument of type 'System.Web.HttpContextBase' could be found (are you missing a using directive or an assembly reference?)</code></p>\n\n<p>Why? How to access <code>MvcApplication</code> in controller?</p>\n"},{"tags":["xml","asp.net-mvc","c#-4.0","xslt","xml-transform"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13142469,"title":"Transforming XML as a string with XSLT as a string in C# .NET 4.0 - Invalid characters in path","body":"<p>I have an XML file defined as:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding='UTF-8'?&gt;\n&lt;contentlets&gt;\n&lt;content&gt;\n  &lt;entry&gt;\n    &lt;string&gt;link&lt;/string&gt;\n    &lt;string&gt;http://www.myLink.com&lt;/string&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;stInode&lt;/string&gt;\n    &lt;string&gt;0b4f59c1-6dee-4c1e-a0fb-353c34c8d372&lt;/string&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;linkType&lt;/string&gt;\n    &lt;string&gt;Category Title&lt;/string&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;linkText&lt;/string&gt;\n    &lt;string&gt;Title&lt;/string&gt;\n  &lt;/entry&gt;\n&lt;/content&gt;\n&lt;/contentlets&gt;\n</code></pre>\n\n<p>and an XSLT defined as:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:msxsl=\"urn:schemas-microsoft-com:xslt\" exclude-result-prefixes=\"msxsl\"\n&gt;\n    &lt;xsl:output method=\"html\" omit-xml-declaration=\"yes\" indent=\"yes\"/&gt;\n    &lt;xsl:template match=\"@* | node()\"&gt;\n        &lt;div id=\"content\" data-role=\"content\"&gt;\n            &lt;ul data-role=\"listview\" data-inset=\"true\" data-filter=\"false\"&gt;\n                &lt;li data-role=\"list-divider\"&gt;Category Title&lt;/li&gt;\n                &lt;xsl:for-each select=\"content\"&gt;\n                    &lt;li data-inline=\"false\" data-icon=\"arrow-r\" data-iconpos=\"right\"&gt;\n                        &lt;a target=\"_blank\"&gt;\n                        &lt;xsl:for-each select=\"entry\"&gt;\n                            &lt;xsl:if test=\"string='link'\"&gt;\n                                &lt;xsl:attribute name=\"href\"&gt;\n                                    &lt;xsl:value-of select=\"string[2]\"/&gt;\n                                &lt;/xsl:attribute&gt;\n                            &lt;/xsl:if&gt;\n                            &lt;xsl:if test=\"string='linkText'\"&gt;\n                                &lt;h3&gt;\n                                    &lt;xsl:value-of select=\"string[2]\"/&gt;\n                                &lt;/h3&gt;\n                            &lt;/xsl:if&gt;\n                        &lt;/xsl:for-each&gt;\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/xsl:for-each&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>I am successful in applying this transformation in Visual Studio 2010, however, I want to apply this transformation and store the resulting HTML in a string. I am doing this with a custom class defined as follows:</p>\n\n<pre><code>public class XsltTransformer\n{\n    private readonly XslCompiledTransform xslTransform;\n\n    public XsltTransformer(string xsl)\n    {\n        try\n        {\n            xslTransform = new XslCompiledTransform();\n\n            using (var stringReader = new StringReader(xsl))\n            {\n                using (var xslt = XmlReader.Create(stringReader))\n                {\n                    xslTransform.Load(xslt);\n                }\n            }\n        }\n        catch (Exception ex)\n        {\n            Log.WriteLine(ex.ToString());\n        }\n    }\n\n    public string Transform(string strXml)\n    {\n        try\n        {\n            string output = String.Empty;\n            using (StringReader sri = new StringReader(strXml))\n            {\n                using (XmlReader xri = XmlReader.Create(sri))\n                {\n                    using (StringWriter sw = new StringWriter())\n                    using (XmlWriter xwo = XmlWriter.Create(sw, xslTransform.OutputSettings))\n                    {\n                        xslTransform.Transform(xri, xwo);\n                        output = sw.ToString();\n                    }\n                }\n            }\n\n            return output;\n        }\n        catch (Exception ex)\n        {\n            Log.WriteLine(ex.ToString());\n            return String.Empty;\n        }\n    }\n}\n</code></pre>\n\n<p>I then call the following to actually apply the transformation:</p>\n\n<pre><code>string strXslt = String.Empty;\nstring strXml = String.Empty;\n\nusing (StreamReader xsltReader = new StreamReader(Server.MapPath(\"~/Content/xsl/test.xslt\")))\n{\n    strXslt = xsltReader.ReadToEnd();\n}\n\nusing (StreamReader xmlReader = new StreamReader(Server.MapPath(\"~/Content/xml/test.xml\")))\n{\n    strXml = xmlReader.ReadToEnd();\n}\n\nXsltTransformer transformer = new XsltTransformer(strXslt);\nreturn transformer.Transform(strXml);\n</code></pre>\n\n<p>When applying the transformation I am getting an \"Illegal characters in path.\" error. I know that my XML and XSLT files are coming through correctly as strings I just can't figure out why I am getting this error when applying the transformation.</p>\n\n<p>Any ideas as to whats causing this error?</p>\n\n<p><strong>EDIT:</strong>\nHere is the stack trace:</p>\n\n<pre><code>[ArgumentException: Illegal characters in path.]\nSystem.IO.Path.CheckInvalidPathChars(String path) +126\nSystem.IO.Path.Combine(String path1, String path2) +38\nSystem.Web.Compilation.DiskBuildResultCache.GetPreservedDataFileName(String cacheKey) +27\nSystem.Web.Compilation.DiskBuildResultCache.GetBuildResult(String cacheKey, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate) +14\nSystem.Web.Compilation.BuildManager.GetBuildResultFromCacheInternal(String cacheKey, Boolean keyFromVPP, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate) +200\nSystem.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate) +51\nSystem.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +68\nSystem.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +111\nSystem.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +125\nSystem.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound) +35\nSystem.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +9\nSystem.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath) +41\nSystem.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]&amp; searchedLocations) +150\nSystem.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations) +304\nSystem.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache) +136\nSystem.Web.Mvc.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine e) +24\nSystem.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths) +127\nSystem.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName) +181\nSystem.Web.Mvc.ViewResult.FindView(ControllerContext context) +138\nSystem.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +129\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13\nSystem.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +23\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260\nSystem.Web.Mvc.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b() +19\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177\nSystem.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343\nSystem.Web.Mvc.Controller.ExecuteCore() +116\nSystem.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97\nSystem.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\nSystem.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37\nSystem.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\nSystem.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\nSystem.Web.Mvc.Async.WrappedAsyncResult`1.End() +62\nSystem.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50\nSystem.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\nSystem.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22\nSystem.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60\nSystem.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\nSystem.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8836913\nSystem.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n</code></pre>\n"},{"tags":["asp.net-mvc","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13162357,"title":"Ninject Get Instance not working","body":"<p>In my global.asax file I have a dependency set up between an interface and a class. The injection always works and there is no issue with the setup.</p>\n\n<p>In a model binder, in the same solution, I am trying to get the concrete class mapped to that interface thus</p>\n\n<pre><code>IKernel kernel = new StandardKernel();\nvar samurai = kernel.Get&lt;Samurai&gt;();\n</code></pre>\n\n<p>For some reason this does not work and I get an error saying \"object initialisation null\" or something to that effect.  As I understand it this makes sense since this kernel I just created is a new object not linked to the object created in the global.asax.  How do I get the one in the global.asax or am I doing something else wrong?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1059,"score":2,"question_id":2690779,"title":"How can I get controller type and action info from a url or from route data?","body":"<p>How can I get the controller action (method) and controller type that will be called, given the <code>System.Web.Routing.RouteData</code>?</p>\n\n<p>My scenario is this - I want to be able to do perform certain actions (or not) in the <code>OnActionExecuting</code> method for an action.</p>\n\n<p>However, I will often want to know not the current action, but the \"root\" action being called; by this I mean I may have a view called \"Login\", which is my login page. This view may include\nanother partial view \"LeftNav\". When <code>OnActionExecuting</code> is called for LeftNav, I want to be able to determine that it is really being called for the \"root\" aciton of Login.</p>\n\n<p>I realise that by calling <code>RouteTable.Routes.GetRouteData(actionExecutingContext.HttpContext)</code>, I can get the route for the \"root\" request, but how to turn this into\nmethod and type info?</p>\n\n<p>The only solution I have so far, is something like:</p>\n\n<pre><code> var routeData = RouteTable.Routes.GetRouteData(actionExecutingContext.HttpContext)\n var routeController = (string)routeData.Values[\"controller\"]; \n var routeAction = (string)routeData.Values[\"action\"];\n</code></pre>\n\n<p>The problem with this is that \"routeController\" is the controller name with the \"Controller\" suffix removed, and is not fully qualified; ie it is \"Login\", rather than \"MyCode.Website.LoginController\".</p>\n\n<p>I would far rather get an actual <code>Type</code> and <code>MethodInfo</code> if possible, or at least a fully qualified type name.</p>\n\n<p>Any thoughts, or alternative approaches?</p>\n\n<p>[<strong>EDIT</strong> - this is ASP.Net MVC 1.0]</p>\n"},{"tags":["sql-server","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13167499,"title":"How safe is MVC 4 Default Database?","body":"<p>Im kinda new at MVC 4 and im trying to learn it. I wanted to ask how safe is mvc 4 defaul databases.</p>\n\n<p>When i configure the project and enable role authorization it creates an ASPNETDB.mdf. Can i trust it and its default database in a big project?</p>\n"},{"tags":["asp.net-mvc","web-config","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13066750,"title":"Membership provider with different ApplicationName in area","body":"<p>I have a <code>web.config</code> in my MVC3 application, I have an <code>Admin</code> area in my MVC3 application too.</p>\n\n<p>On the front end I hook asp.net users into a <code>Customers</code> table and my application relies on this  table to operate. In the <code>Admin</code> area I have an <code>Administrator Role</code> and <code>User</code> but this login also works for the front end. I can create a customer for my <code>Admin</code> so my application doesn't fail but ideally I would like to separate the logins from the front and <code>Admin</code> area.</p>\n\n<p>I want to put a second <code>web.config</code> inside my <code>Admin</code> area that has a different application name so that the Admin account can never be logged into the front end. e.g.</p>\n\n<pre><code>    &lt;profile&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"SecurityConn\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n</code></pre>\n\n<p>But I don't know where to put this or if it is even possible</p>\n\n<pre><code>applicationName=\"/AdminArea\"\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","authentication","active-directory","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":13167213,"title":"Want to look up an AD Group's SID without using samAccountName or DirectoryServices.AccountManagement","body":"<h3>Question:</h3>\n\n<p>In C#, is there a way to look up an Active Directory Group SID <em>without</em> using <code>DirectoryServices.AccountManagement</code> library or icky-ugly LDAP?</p>\n\n<h3>[UPDATED] -- Why I'm asking:</h3>\n\n<p>The <code>[Authorize]</code> attribute and the underlying <code>WindowsPrincipal.IsInRole(string role)</code> only check against the <code>samAccountName</code> in AD.</p>\n\n<p>Not only is this a legacy identifier that Microsoft suggests avoiding when checking roles: </p>\n\n<pre><code>// It is also better from a performance standpoint than the overload that accepts a string. \n// The aformentioned overloads remain in this class since we do not want to introduce a \n// breaking change. However, this method should be used in all new applications and we should document this.\npublic virtual bool IsInRole (SecurityIdentifier sid) {}\n</code></pre>\n\n<p>but I also don't have control over AD, and cannot ensure the samAccountName remains in sync with the \"user friendly\" names we request be setup. This is the reason the issue came up in the first place, passing a pluralized (Name) rather than a singular (samAccountName) string... the values were not the same.</p>\n\n<p>Also, the samAccountName and the SID may change - for example, if an AD admin deletes the account and re-creates it, the SID will for sure be different, and the samAccountName another spot for human error, but they will always restore the Name/UPN values as requested.</p>\n\n<p>Eventually I want to write a clean authorize attribute of my own to check against group membership without having to hard code SAMs or SIDs. </p>\n\n<p>I know I can do this with DirectoryServices.AccountManagement:</p>\n\n<pre><code>// get group principal \nvar pc = new PrincipalContext(ContextType.Domain, \"domainName\");\nvar gp = GroupPrincipal.FindByIdentity(pc, IdentityType.Name, \"groupName\");\n// check if user is in group.\nvar up = UserPrincipal.Current;\nvar usersGroups = up.GetGroups();\nvar inGroup = usersGroups.Contains(gp);\n</code></pre>\n\n<p>I just wanted to know if there was an easier, less dependent, non legacy way to do this to keep the attribute-to-be-programmed, lean as possible.</p>\n\n<p>My prior, related question:\n<a href=\"http://stackoverflow.com/questions/13147132/active-directory-group-membership-checking-in-net-4-5/13166073#13166073\">Active Directory Group Membership Checking in .Net 4.5</a></p>\n"},{"tags":["c#","javascript","asp.net-mvc","mime-types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13166284,"title":"EventSource's response has a MIME type (\"text/html\") that is not \"text/event-stream\"","body":"<p>When I try to hook up the EventSource to my controller it keeps saying:</p>\n\n<blockquote>\n  <p>EventSource's response has a MIME type (\"text/html\") that is not\n  \"text/event-stream\". Aborting the connection.</p>\n</blockquote>\n\n<p>I made the following class to help with the handling and preparation of a response. In this class I believe I set the responseType accordingly to text\\event-stream.</p>\n\n<pre><code>public class ServerSentEventResult : ActionResult\n{\n    public delegate string GetContent();\n    public GetContent Content { get; set; }\n    public int Version { get; set; }\n\n    public override void ExecuteResult(ControllerContext context)\n    {\n        if (context == null)\n        {\n            throw new ArgumentNullException(\"context\");\n        }\n\n        if (this.Content != null)\n        {\n            HttpResponseBase response = context.HttpContext.Response;\n            response.ContentType = \"text/event-stream\"; response.BufferOutput = false; response.Charset = null;\n            string[] newStrings = context.HttpContext.Request.Headers.GetValues(\"Last-Event-ID\");\n            if (newStrings == null || newStrings[0] != this.Version.ToString())\n            {\n                try\n                {\n                    response.Write(\"retry:250\\n\");\n                    response.Write(string.Format(\"id:{0}\\n\", this.Version));\n                    response.Write(string.Format(\"data:{0}\\n\\n\", this.Content()));\n                    response.End();\n                }\n                catch (HttpException e) { }\n            }\n            else\n            {\n                response.Write(String.Empty);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Could someone please help me out on this one? Thousand times thanks in advance!</p>\n"},{"tags":["asp.net","html","asp.net-mvc","forms","post"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13167571,"title":"Grouping Posted Arrays with MVC .NET from HTML Form","body":"<p>I'm working on a very flexible HTML form with ASP.NET MVC. I have a \"Quantity\" input element which dynamically creates [its value] sets of input elements later in the form.</p>\n\n<p>For instance, if Quantity is set to 1, I have one set of textboxes for username, room number, and building name. But if Quantity is set to 10, ten each of those textboxes appear.</p>\n\n<p>Obviously, when the data is posted back to the server, I need to correctly group each username, room, and building together, and not get them jumbled up.</p>\n\n<p>It seems like the easiest way to do this would be to make every set the same:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;input type=\"text\" name=\"username\"/&gt;\n&lt;input type=\"text\" name=\"room\"/&gt;\n&lt;select name=\"building\"&gt;                           &lt;!--All this x Quantity--&gt;\n   &lt;option value=\"TARDIS\"&gt;TARDIS&lt;/option&gt;\n   &lt;option value=\"USS Enterprise\"&gt;USS Enterprise&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;input type=\"text\" name=\"username\"/&gt; &lt;!--And so on...--&gt;\n</code></pre>\n\n<p>And then trust that the POST string will preserve the order in which the elements are written in the HTML, thereby allowing me to say back on the server once I've captured these values in arrays that <code>usernames[0]</code>, <code>rooms[0]</code>, and <code>buildings[0]</code> go together, as do all the other entries for equal indices.</p>\n\n<p>Does that work 100% of the time? Is it safe? I can think of some ways to make a hard-and-fast association between the groups of inputs, but they involve some mildly irritating javascript and some really obnoxious C#. This seems like it will work out of the box. Eh?</p>\n"},{"tags":["c#","asp.net-mvc","linq-to-sql"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3901,"score":2,"question_id":2636959,"title":"The null value cannot be assigned to a member with type System.Int64 which is a non-nullable value type","body":"<p>I'm getting the following error in my MVC2 app using Linq to SQL (I am new to both). I am connected to an actual SQL server not weird mdf:</p>\n\n<pre><code>System.InvalidOperationException The null value cannot be assigned to a member with type System.Int64 which is a non-nullable value type\n</code></pre>\n\n<p>My SQL table has a column called MessageID. It is BigInt type and has a primary key, NOT NULL and an IDENTITY 1 1, no Default</p>\n\n<p>In my dbml designer it has the following declaration for this field:</p>\n\n<pre><code>[global::System.Data.Linq.Mapping.ColumnAttribute(Storage=\"_MessageId\", AutoSync=AutoSync.OnInsert, DbType=\"BigInt NOT NULL IDENTITY\", IsPrimaryKey=true, IsDbGenerated=true)]\npublic long MessageId\n{\n    get\n    {\n        return this._MessageId;\n    }\n    set\n    {\n        if ((this._MessageId != value))\n        {\n            this.OnMessageIdChanging(value);\n            this.SendPropertyChanging();\n            this._MessageId = value;\n            this.SendPropertyChanged(\"MessageId\");\n            this.OnMessageIdChanged();\n        }\n    }\n}\n</code></pre>\n\n<p>It keeps telling me that null cannot be assigned - I'm not passing through null! It's a long - it can't even be null!</p>\n\n<p>Am I doing something stupid? I can't find a solution anywhere!</p>\n\n<p>I made this work by changing the type of this property to <code>Nullable&lt;long&gt;</code> but surely this can't be right?</p>\n\n<p><strong>Update:</strong>\nI am using InsertOnSubmit. Simplified code:</p>\n\n<pre><code>public ActionResult Create(Message message)\n{\n    if (ModelState.IsValid)\n    {\n       var db = new MessagingDataContext();\n       db.Messages.InsertOnSubmit(message);\n       db.SubmitChanges(); //line 93 (where it breaks)\n    }\n}\n</code></pre>\n\n<p>breaks on SubmitChanges() with the error at the top of this question.</p>\n\n<p><strong>Update2:</strong>\nStack trace:</p>\n\n<pre><code>   at Read_Object(ObjectMaterializer`1 )\n   at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()\n   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)\n   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)\n   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)\n   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)\n   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)\n   at Qanda.Controllers.MessagingController.Ask(Message message) in C:\\Qanda\\Qanda\\Controllers\\MessagingController.cs:line 93\n</code></pre>\n\n<p><strong>Update3:</strong>\nNo one knows and I don't have enough clout to offer a bounty! So continued on my <a href=\"http://www.britishdeveloper.co.uk/2010/04/linq-to-sql-null-value-cannot-be.html\" rel=\"nofollow\">ASP.NET blog</a>. Please help!</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13167504,"title":"Razor syntax isn't recognizing '@' after an underscore","body":"<p>I am trying to do the following:</p>\n\n<pre><code>@foreach(var p in @Model.line_products){\n&lt;img class=\"small_img_@Model.line_products[i].short_name\" src=\"/Content/images/@Model.line_products[i].image_name\" /&gt;\n}\n</code></pre>\n\n<p>Which isn't working, it renders the text just the way it is, not recognizing the '@'. I found this <a href=\"http://stackoverflow.com/questions/4377317/razor-view-syntax-doesnt-recognize-the-in-an-html-attribute\">other post</a> in Stackoverflow, which suggests adding parenthesis in the following way:</p>\n\n<pre><code>@foreach(var p in @Model.line_products){\n&lt;img class=\"small_img_(@Model.line_products[i].short_name)\" src=\"/Content/images/@Model.line_products[i].image_name\" /&gt;\n}\n</code></pre>\n\n<p>Using this workaround, I get that my id is rendered as small_img_(<strong>MODEL ATTRIBUTE</strong>). Isn't there a workaround which doesn't require adding specific characters? (such as the parenthesis).</p>\n"},{"tags":["asp.net-mvc","entity-framework","one-to-many"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13166025,"title":"Update EF ICollection property","body":"<p>How do I update a ICollection property in EF?</p>\n\n<p>I get this error message;</p>\n\n<p>\"Cannot implicitly convert type 'int' to '<code>System.Collections.Generic.ICollection&lt;MySolution.Domain.UserProfile&gt;</code>'\"</p>\n\n<p>My entities:</p>\n\n<pre><code>public class Department\n{\n    public virtual int Id { get; set; }\n    public virtual string DepartmentTitle { get; set; }\n    public virtual ICollection&lt;UserProfile&gt; UserProfiles { get; set; }\n\n}\n\npublic class UserProfile\n{\n    public virtual int UserId { get; set; }\n    public virtual string UserName { get; set; }\n    public virtual string FirstName { get; set; }\n    public virtual string LastName { get; set; }\n\n}\n</code></pre>\n\n<p>Code;</p>\n\n<pre><code>    var userProfile = _db.UserProfiles.Single(d =&gt; d.UserName == \"SomeUserName\");\n\n    var department = _db.Departments.Single(d =&gt; d.Id == variableDepartmentID);\n    department.UserProfiles = uProfile.UserId;\n    _db.UpdateDepartment(department);\n    _db.Save();\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":13149728,"title":"object reference not set to an instance of object even though the object is not null","body":"<p>In my method it is throwing an error and i am not really understanding why since when i debug i could see that there is a value being passed in. The error message is the all time popular: Object reference not set to an instance of an object. </p>\n\n<pre><code> private string GetUserName(int selectedUserId)\n    {\n        var user = _userService.Get(selectedUserId);\n        return user == null ? string.Empty : user.FullName;\n    }\n</code></pre>\n\n<p>User Service:</p>\n\n<pre><code>public User Get(int userId)\n    {\n        return _userRepository.Get(userId);\n    }\n</code></pre>\n\n<p>User Repository:</p>\n\n<pre><code>public User Get(int userId)\n        {\n            return DataContext.Users.SingleOrDefault(u =&gt; u.UserId == userId);\n        }\n</code></pre>\n\n<p>The line throwing the error is: <code>var user = _userService.Get(selectedUserId);</code> but when i debug - int selectedUserId is 44 before hitting that line. </p>\n"},{"tags":["asp.net-mvc","vsts"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13166496,"title":"Continous Integration with ASP.NET MVC and TFS","body":"<p>I have an ASP.NET MVC 3 application. This application is hosted in TFS. I have setup a build server. When a checkin happens, my code is complied and dropped in a folder on my test server. The drop folder is an IIS application folder. The goal is when a user visits <code>http://[myTestServer]/MyProject</code>, they should see the latest compiled version of the app. In an attempt to do this, I'm dropping files in <code>//[myTestServer]/c$/inetpub/www/myProject/</code>. However, I'm getting more than I bargained for.</p>\n\n<p>I've noticed that the build server puts a bunch of assemblies and creates 2 directories: _PublishedWebsites and logs. _PublishedWebsites contains two directories: MyProjectName and MyProjectName_Package. From what I can tell MyProjectName contains the files that I want put in //[myTestServer]/c$/inetpub/www/myProject/. What am I doing wrong? </p>\n\n<p>How do I setup it up such that when a user visits http://[myTestServer]/MyProject, they see the latest compiled version of the app?</p>\n"},{"tags":["c#","asp.net-mvc","iis7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13166313,"title":"Decimals resolving as files in ASP.Net MVC route on IIS7","body":"<p>I'm having a problem where my the final decimal in my url string is being resolved to a file instead of being read as a decimal.</p>\n\n<p>This is only happening on our production servers on II7.0 (so the wildcard map for aspnet_isapi.dll doesn't apply) and then only one of two production nodes.  The nodes are separated by a load balancer.</p>\n\n<p>The url looks like:</p>\n\n<pre><code>http://innerwebz_node_1/12345/123.4\n</code></pre>\n\n<p>If I put in the url into the first node it works, on the second node it dies.</p>\n\n<p>We've tried:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/7530827/routing-on-iis6-with-decimal-in-route\">Routing on IIS6 With Decimal In Route</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/11018420/system-web-routing-only-working-with-a-aspx-file-extension\">System.Web.Routing only working with a .aspx file extension</a></p>\n\n<p>The code base and configuration are identical except for node-specific settings.</p>\n\n<p>Have you encountered anything like this?  Any clues or options to solve this would be helpful.</p>\n"},{"tags":["asp.net-mvc","nhibernate","s#arp-architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13146155,"title":"Failure to get NHibernate session when switching to Windows Authentication","body":"<p>I'm trying to switch a working S#arp Architecture MVC application from an app pool with the Network Service identity to an app pool with a domain user identity.  I ran aspnet_regiis on the user in the web server and gave the user permissions to access the database (even tried making it a sysadmin in the database).  However, it seems like it can't get the NHibernate session.</p>\n\n<pre><code>Exception information: \nException type: NullReferenceException \nException message: Object reference not set to an instance of an object. \n\nRequest information: \nRequest URL: http://&lt;redacted&gt; \nRequest path: /&lt;redacted&gt; \nUser host address: 10.10.10.10\nUser: &lt;webuser&gt;\nIs authenticated: True \nAuthentication Type: Forms \nThread account name: &lt;MYDOMAIN\\MYUSER&gt; \n\nThread information: \nThread ID: 1 \nThread account name: &lt;MYDOMAIN\\MYUSER&gt; \nIs impersonating: False \nStack trace:    at SharpArch.Data.NHibernate.NHibernateSession.get_Current() in C:\\MyStuff\\Dev\\Projects\\SharpArchitecture\\src\\SharpArch\\SharpArch.Data\\NHibernate\\NHibernateSession.cs:line 88\nat UserAccount.Persistence.UserRepository.GetByPropertiesPartialMatching(IDictionary`2 exactMatchPropertyValuePairs, IDictionary`2 partialMatchPropertyValuePairs, MatchMode matchMode) in c:\\Persistence\\UserRepository.cs:line 66\n...\n</code></pre>\n\n<p>The actual line giving the Null reference exception within SharpArch NHibernateSession.cs is:</p>\n\n<pre><code>ISession session = Storage.Session;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13166188,"title":"Web API, async file uploading works locally, not on server","body":"<p>Using the following tutorial: <a href=\"http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2\" rel=\"nofollow\">http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2</a>, I used the following controller for the base of a file upload call I implemented:</p>\n\n<pre><code>public Task&lt;HttpResponseMessage&gt; PostFormData()\n{\n    // Check if the request contains multipart/form-data.\n    if (!Request.Content.IsMimeMultipartContent())\n    {\n        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);\n    }\n\n    string root = HttpContext.Current.Server.MapPath(\"~/App_Data\");\n    var provider = new MultipartFormDataStreamProvider(root);\n\n    // Read the form data and return an async task.\n    var task = Request.Content.ReadAsMultipartAsync(provider).\n        ContinueWith&lt;HttpResponseMessage&gt;(t =&gt;\n        {\n            if (t.IsFaulted || t.IsCanceled)\n            {\n                Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception);\n            }\n\n            // A whole lotta logic to save the file, process it, etc.\n        });\n\n    return task;\n}\n</code></pre>\n\n<p>To save on space I didn't include the majority of the logic I wrote, since the error happens on the first line within of ContinueWith,</p>\n\n<pre><code>        if (t.IsFaulted || t.IsCanceled)\n</code></pre>\n\n<p>If I run this locally from VS2010, both of the above booleans are false, and the code works perfectly - all of it, even extra few dozen lines I commented out. When I deploy it to a server running IIS7, t.IsFaulted is <em>always</em> true. I've never worked with asynchronous calls in C#, and have only done a few simple controllers in Web API...is there something I have to install/configure/etc. on a production server to make it work?</p>\n\n<p>Making it more difficult is the fact that all of the exceptions that are occurring stay in that task (i.e. don't get caught by ELMAH), so I've no idea how to debug what's happening; IIS is also not logging any errors that are occurring in the event viewer...so I'm at a loss to know exactly what's going on. Any tips on how to make this debugging process easier?</p>\n"},{"tags":["c#","asp.net-mvc","tempdata"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":220,"score":-2,"question_id":10487008,"title":"MVC C# TempData","body":"<p>Can somebody please explain the purpose of TempData in MVC. \nI understand it behaves like ViewBag but what does it do beyond that.</p>\n\n<pre><code>    TempData\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","entity-framework","automapper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13163724,"title":"How can I accomplish the following mapping with Automapper?","body":"<p>I want to map the class (Entity),</p>\n\n<pre><code>public class Source {\n   public int x;\n   public string y;\n   public bool z;\n\n   public int a;\n   public int b;\n   public int c;\n\n   //bunch of other fields\n   //...\n   //..\n   //.\n}\n</code></pre>\n\n<p>to the following class (View Model):</p>\n\n<pre><code>public class Destination {\n   public MyClass1 A;\n   public MyClass2 B;\n}\n</code></pre>\n\n<p>where MyClass1, MyClass2 are defined as follows:</p>\n\n<pre><code>public class MyClass1 {\n   public int x;\n   public string y;\n   public bool z;\n}\n\npublic class MyClass2 {\n   public int a;\n   public int b;\n   public int c;\n}\n</code></pre>\n\n<p>Is this possible with Automapper?</p>\n"},{"tags":["c#","html","asp.net-mvc","razor","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13163202,"title":"Passing parameters through the url using MVC?","body":"<p>I know you can pass in parameters via urls like <code>.com/MyPage/?controlID=5</code> but how can you do it with something like <code>.com/MyPage/5</code>? Thus not requiring the variable name or a question mark.</p>\n"},{"tags":["asp.net-mvc","actionmethod"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13161899,"title":"Adding a post outside of a form","body":"<p>I have a form in my razor view which works exactly as it should.  I select values from the drop down and press the submit button and it return to me a paginated set of results.  All well and good.</p>\n\n<pre><code>@using (Html.BeginForm())\n    {\n        int index = 0;\n        foreach (var type in @Model.AttributeTypes)\n        {\n            @Html.DropDownListFor(m =&gt; m.SelectedAttributeValueIds[index], Model.AttributeValuesList[Convert.ToInt32(@type.Value)], \"Filter by \" + type.Text)\n            index++;\n        }\n\n        &lt;input type=\"submit\" value=\"Filter\"/&gt;\n}\n</code></pre>\n\n<p>The problem is that at the bottom of the page, outside of the form I want a Show all button/link.  Pressing this button should essentially do the same thing that the above submit button does.  In other words I'd like this Show all button to show all of the results of the last query (or the currently selected values in the dropdowns - not too bothered which) without pagination.  I can do the no pagination bit, that is easy.  What I want to know is how will my button/link get the values from the dropdown from outside of the form and submit that form?</p>\n"},{"tags":["asp.net-mvc","forms","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13162819,"title":"Adding additional parameter to form submit","body":"<p>I have a form declaration in my Razor view</p>\n\n<pre><code>&lt;form method=\"post\" action=\"/Lot/LotList?auctionEventId=@auctionEventId\" id=\"filterForm\"&gt;\n</code></pre>\n\n<p>(Incidentally, I chose to write it out like this rather than use <code>Html.BeginFrom</code> because I needed to give it an id and didn't know how to do that with <code>Html.BeginFrom</code> - but that is not the issue here)</p>\n\n<p>Outside of this form I have a button which submits this form (there is also a submit button in the form)</p>\n\n<pre><code>&lt;input type=\"button\" onclick=\"$('#filterForm').submit();\" value=\"Show all\" /&gt;\n</code></pre>\n\n<p>Now, the issue is that if this button is used to submit the form I want the action in the form to change to </p>\n\n<pre><code>action=\"/Lot/LotList?auctionEventId=@auctionEventId&amp;showAll=true\"\n</code></pre>\n\n<p>How do I alter the action and pass this additional parameter?  Is there a totally better way of doing all this?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":3,"view_count":53,"score":-3,"question_id":13162668,"title":"How to add html in two tags","body":"<p>I have structure html:</p>\n\n<pre><code>&lt;tr id='first_static_el'&gt;&lt;/tr&gt;\n&lt;span style='display:none' id='start_report0'&gt;&lt;span&gt;\n// some content, clear add\n&lt;span style='display:none' id='end_report0'&gt;&lt;span&gt;\n&lt;tr id='last_static_el'&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>or if you know how to add it via AjaxOption?</p>\n"},{"tags":["asp.net-mvc","linq-to-entities","asp.net-mvc-viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13144619,"title":"Call a method in Linq to EF","body":"<p>In order to create a ViewModel, I tried to call a method GetName() to find the FirstName and LastName for UserID and then add it to the model. But the error tells \"Linq to Entities does not recognize the method\".</p>\n\n<p>How do I accomplish this in another way?</p>\n\n<p>My code:</p>\n\n<pre><code>public IQueryable&lt;SheetList&gt; GetSheetData()\n    {\n        var query = from a in GetSheets()\n                    select new SheetList\n                    {\n                        SheetId = a.ListAllSafetySheets.Id,\n                        SheetTitle = a.ListAllSafetySheets.SafetySheetTitle,\n                        ProductionManagerId = a.ListAllSafetySheets.ProductionManager,\n                        ProductionManagerName = this.GetName(a.ListAllSafetySheets.ProductionManager),\n                        ConstructionManagerId = a.ListAllSafetySheets.ConstructionManager,\n                        Created = a.ListAllSafetySheets.Created,\n                        CreatedBy = a.ListAllSafetySheets.CreatedBy,\n                        UserProfile_UserId = a.ListAllUserProfiles.UserId,\n                        Project_Id = a.ListAllProjects.Id,\n                        ProjectLeaderId = a.ListAllProjects.ProjectLeader,\n                        ConstructionLocation_Id = a.ListAllConstructionLocations.Id,\n                    };\n        return query;\n    }\n\n\npublic IQueryable&lt;DataCollection&gt; GetSheets()\n    {\n        var query = from vSafety in _db.Sheets\n                    join vUserProfile in _db.UserProfiles\n                    on vSafety.Id\n                    equals vUserProfile.UserId\n                    join vProject in _db.Projects\n                    on vSafety.Id\n                    equals vProject.Id\n                    join vConstructionLocation in _db.ConstructionLocations\n                    on vSafety.Id\n                    equals vConstructionLocation.Id\n                    orderby vSafety.Created descending\n                    select new SafetyAndProjectAndUserAndLocationCollection\n                    {\n                        ListAllSafetySheets = vSafety,\n                        ListAllUserProfiles = vUserProfile,\n                        ListAllProjects = vProject,\n                        ListAllConstructionLocations = vConstructionLocation\n                    };\n        return query;\n    }\n\n\npublic string GetName(int? id)\n    { \n        string returnValue;\n\n        if (id == null)\n        {\n            var userModel = _db.UserProfiles.Single(x =&gt; x.UserId == id);\n\n            string FirstName = userModel.FirstName;\n            string LastName = userModel.LastName;\n\n            returnValue = FirstName + \", \" + LastName;\n        }\n        else\n        {\n            returnValue = \"\";\n        }\n\n        return returnValue;\n    }\n</code></pre>\n"}]}
{"total":44782,"page":8,"pagesize":100,"questions":[{"tags":["asp.net-mvc","design-patterns","ninject","repository-pattern","unit-of-work"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13160898,"title":"Injecting UnitOfWork in a Using block","body":"<p>I worked on a UnitOfWork / Repository / MVC application. Now that this is working all great, I want to decouple the UnitOfWork from the controllers. One way of doing it is to inject the dependency with Ninject (or other) in the controller's contructor. However, this means the UnitOfWork will be instanciated at the same time as the controller.</p>\n\n<p>The way I want to use my UnitOfWork is with Using blocks like so:</p>\n\n<pre><code>using(var unitOfWork = new IUnitOfWork)\n{\n    return unitOfWork.GetRepository&lt;IEmployeesRepository&gt;().GetAllEmployees();\n}\n</code></pre>\n\n<p>Obviously you cant instance a interface, you have instance an implementation which is injected with a dependency injector, but how can I inject it in a using clause?</p>\n\n<p>I saw Property injection and Method injection but I am unsure of how I could use those to acheive my goal.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13065697,"title":"Redirect / show view after generated file is dowloaded","body":"<p>I've got a controller action that downloads a dynamically generated file:</p>\n\n<pre><code>    public ActionResult DownloadFile()\n    {\n        var obj = new MyClass { MyString = \"Hello\", MyBool = true };\n        var ser = new XmlSerializer(typeof(MyClass));\n        var stream = new MemoryStream();\n        ser.Serialize(stream, obj);\n        stream.Position = 0;\n\n        Response.Clear();\n        Response.AddHeader(\"Content-Disposition\", \"attachment; filename=myfile.xml\");\n        Response.ContentType = \"application/xml\";\n\n        // Write all my data\n        stream.WriteTo(Response.OutputStream);\n        Response.End();\n\n        return Content(\"Downloaded\");\n    }\n</code></pre>\n\n<p>Just for reference:</p>\n\n<pre><code>    public class MyClass\n    {\n        public string MyString { get; set; }\n        public int MyInt { get; set; }\n    }\n</code></pre>\n\n<p>This is working, and the file (myfile.xml) is downloaded.<br>\nHowever, the message \"Downloaded\" is not sent to the browser.</p>\n\n<p>Similarly, if I replace <code>return Content(\"Downloaded\");</code><br>\nfor <code>return Redirect(\"www.something.com\");</code><br>\nthen the browser is redirected before the file downloads.</p>\n\n<p>As a bit of a pre-amble, the user journey is:</p>\n\n<ul>\n<li>User fills out form on previous view  </li>\n<li>Form is submitted  </li>\n<li>XML is generated and downloaded  </li>\n<li>User is redirected / \"Downloaded\" view is shown <em>(so hitting F5 won't re-post the form)</em></li>\n</ul>\n"},{"tags":["asp.net-mvc","post","razor","get"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13161645,"title":"@Html.ActionLink calling Post method","body":"<p>I have a <code>@HTML.ActionLink</code> in my Razor view and I'd like for it to call a <code>Post</code> action method rather than a <code>Get</code>  one. </p>\n\n<p>Is this possible?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","uiculture"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13161249,"title":"mvc load view on culture","body":"<p>I don't seem to be able to find much on this. Is there a way I can have different views per culture? Is there something built in mvc3 for this? Is there anything out there about this? I don't want to use res files for whole pages, only for validation and such. </p>\n"},{"tags":["asp.net","asp.net-mvc","iis","publishing","webdeploy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":101,"score":2,"question_id":12195906,"title":"How to run .bat file on server after web deploy publish","body":"<p>I am using Web Deploy for publishing an ASP.NET MVCwebsite in Visual Studio 2010.<br>\nIs there any way to run a .bat file on server after this publish automatically?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","fancybox"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13161156,"title":"Create Fancybox Gallery from MVC Partials","body":"<p>I have a simple table of news items with the requirement that users can either hover over an item or click it to see its contents.</p>\n\n<p>The hovering is accomplished easily enough by using the HTML <code>title</code> attribute, and I've got the click working by using the following Fancybox implementation.</p>\n\n<pre><code>&lt;a class=\"fancyboxNews\" title=\"News Content 1\"&gt;News Title 1&lt;/a&gt;\n&lt;a class=\"fancyboxNews\" title=\"News Content 2\"&gt;News Title 2&lt;/a&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $('.fancyboxNews').click(function () {\n        $.ajax({\n            type: 'POST',\n            url: '@Url.Action(\"_TextPopUp\")',\n            data: { content: $(this).attr('title'), title: $(this).text() },\n            success: function(response) {\n                $.fancybox({\n                    content: response,\n                });\n            }\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I'd like to make a gallery out of my Fancybox news items, but everything I've seen requires you to have a static <code>href</code> link for that, which doesn't work with partial views. Any ideas as to how I can accomplish this?</p>\n"},{"tags":["c#","asp.net-mvc","charts","highcharts","dotnethighcharts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13160405,"title":"Adding multiple series to the spline chart using dotnet high charts in asp.net mvc3","body":"<p>I am using dotnet high charts with asp.net mvc3. I'm facing problem in adding multiple series to the spline chart. </p>\n\n<p>This code basically updates the chart every second.</p>\n\n<p>This works find for one data series. But I need to add multiple data series. </p>\n\n<p>Please help me in adding multiple series for this code.</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>public ActionResult SplineUpdateEachSecond()\n{\n     List&lt;object&gt; points = new List&lt;object&gt;(20);\n     DateTime now = DateTime.Now;\n     Random rand = new Random();\n     for (int i = -19; i &lt;= 0; i++)\n          points.Add(new { X = now.AddSeconds(i), Y = rand.NextDouble() });\n\n     Highcharts chart = new Highcharts(\"chart\")\n            .SetOptions(new GlobalOptions { Global = new Global { UseUTC = false } })\n            .InitChart(new Chart\n                       {\n                           DefaultSeriesType = ChartTypes.Spline,\n                           MarginRight = 10,\n                           Events = new ChartEvents\n                                    {\n                                        Load = \"ChartEventsLoad\"\n                                    }\n                       })\n            .AddJavascripFunction(\"ChartEventsLoad\",\n                                  @\"// set up the updating of the chart each second\n                                   var series = this.series[0];\n                                   setInterval(function() {\n                                      var x = (new Date()).getTime(), // current time\n                                         y = Math.random();\n                                      series.addPoint([x, y], true, true);\n                                   }, 1000);\")\n            .SetTitle(new Title { Text = \"Live random data\" })\n            .SetXAxis(new XAxis\n                      {\n                          Type = AxisTypes.Datetime,\n                          TickPixelInterval = 150\n                      })\n            .SetYAxis(new YAxis\n                      {\n                          Title = new YAxisTitle { Text = \"Value\" },\n                          PlotLines = new[]\n                                      {\n                                          new YAxisPlotLines\n                                          {\n                                              Value = 0,\n                                              Width = 1,\n                                              Color = ColorTranslator.FromHtml(\"#808080\")\n                                          }\n                                      }\n                      })\n            .SetTooltip(new Tooltip { Formatter = \"TooltipFormatter\" })\n            .AddJavascripFunction(\"TooltipFormatter\",\n                                  @\"return '&lt;b&gt;'+ this.series.name +'&lt;/b&gt;&lt;br/&gt;'+\n                                   Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'&lt;br/&gt;'+ \n                                   Highcharts.numberFormat(this.y, 2);\")\n            .SetLegend(new Legend { Enabled = false })\n            .SetExporting(new Exporting { Enabled = false })\n            .SetSeries(new Series\n                       {\n                           Name = \"Random data\",\n                           Data = new Data(points.ToArray())\n                       });\n\n        return View(chart);\n}\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","requirejs"],"answer_count":3,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":885,"score":11,"question_id":11585774,"title":"Bundling and minifying modular JavaScript (RequireJS / AMD) with ASP.NET MVC","body":"<p>Does anyone have any experience with or know any good solutions for bundling and minifying modular JavaScript like RequireJS / AMD in an ASP.NET MVC project?</p>\n\n<p>Is the best way to use the <a href=\"http://requirejs.org/docs/optimization.html\">RequireJS optimizer</a> (perhaps in a post build action?) -- or is there something better out there for ASP.NET MVC?</p>\n"},{"tags":["asp.net-mvc","msbuild","visual-studio-2012","webdeploy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13157588,"title":"What happen when I use Publish Web command from VS 2012 with ASP MVC","body":"<p>What exactly happen when I use Publish Web command inside Visual Studio 2012 for ASP MVC project?  </p>\n\n<p>How can I activate the same command from command line?</p>\n"},{"tags":["asp.net-mvc","knockout.js","kendo-ui"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":28,"score":-2,"question_id":13160607,"title":"Success alert after delete in kendo UI client grid","body":"<p>After successful delete i want to show success data delete alert in kendo UI client grid\nin asp.net mvc.\nPlease help</p>\n"},{"tags":["asp.net-mvc","security","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13160311,"title":"MVC4 storing and recalling user password","body":"<p>Current I'm working on an a project using MVC4 in which we have a service reference looking into the Database to return our content.  The service reference requires me to provide the username/password each time I make a call. </p>\n\n<p>What would be best practices for this?  Should I encrypt the password then save it to a cookie or should I issue the user an Auth Token?  Or would there be a third option?</p>\n"},{"tags":["asp.net-mvc","nhibernate","fluent-nhibernate","structuremap"],"answer_count":2,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":1616,"score":4,"question_id":1296901,"title":"Injecting ISession Into My Repositories Using Structuremap in a Asp.Net MVC Application","body":"<p>My repositories all take ISession in the constructor:</p>\n\n<pre><code>protected Repository(ISession session)\n{\n     this.session = session;\n}\nprivate readonly ISession session;\n</code></pre>\n\n<p>In an Asp.Net MVC application, using StructureMap, how would I go about setting up ISession in my the StructureMap Registry? Would I need to to add SessionFactory to the container also? Does FluentNHibernate change things?</p>\n"},{"tags":["asp.net-mvc","linq","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":100,"score":2,"question_id":4665886,"title":"Linq Many-to-Many relationship","body":"<p>I have 3 tables in my db. AdminGroup, AdminSection and joining these two AdminAccess.\nAdminGroup => AdminGroupId, AdminId\nAdminSection => AdminSectionId, Code, Desc\nAdminAccess => AdminSectionId, AdminGroupId</p>\n\n<p>I need to get a list of all Codes available given AdminId.\nThis is what I have so far:</p>\n\n<pre><code>this.AdminGroupRepository.List().Where(x =&gt; x.Admin.Any(y =&gt; y.AdminId == loginEntity.AdminId))\n</code></pre>\n\n<p>But this gives me a list of AdminGroups and I simply need a List of Codes.</p>\n\n<p><img src=\"http://i.stack.imgur.com/UuslZ.png\" alt=\"alt text\"></p>\n"},{"tags":["c#","javascript","ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13160183,"title":"How can I remove a item from my session[\"cart\"] on a button click in my view?","body":"<p>These are the two actionresults I use for my cart:</p>\n\n<p>The first action I am adding the productids to my session cart by using ajax:</p>\n\n<pre><code>public ActionResult AddToCart(int ProductImageId)\n{\n    List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n    if (cart == null)\n    {\n        cart = new List&lt;int&gt;();\n    }\n    cart.Add(ProductImageId);\n\n    Session[\"cart\"] = cart;\n\n    return new JsonResult() { Data = new { Status = \"Success\" } };\n}\n</code></pre>\n\n<p>The second action I am filling it to my model so I can use it in my view:</p>\n\n<pre><code>public ActionResult ShoppingCart()\n        {\n        var cart = Session[\"cart\"] as List&lt;int&gt;;\n        var products = cart != null ? cart.Select(id =&gt; \n             {\n                 var productImage = repository.GetProductByID(id);\n                 return new ProductsViewModel\n                    {\n                        Name = productImage.Products.Name,\n                        Description = productImage.Products.Description.Substring(0, productImage.Products.Description.IndexOf(\".\") + 1),\n                        price = productImage.Products.Price,\n                        ProductId = productImage.Products.Id,\n                        Image = productImage.ImageUrl,\n                        ProductImageId = productImage.Id\n                    };\n             }) : new List&lt;ProductsViewModel&gt;();\n\n      return View(products);\n        }\n</code></pre>\n\n<p>Right now I have a view that is displaying the products in the shoppingcart view.</p>\n\n<p>Each product that is displayed have a button that says \"Delete\"</p>\n\n<p>My question is how can I delete the product from the session cart in the best way?</p>\n\n<p>How should the Actionresult look like?</p>\n\n<p>I have created an Ajax script to gets the ID of the product that needs to be deleted when someone click on the delete button here it is:</p>\n\n<pre><code> $(function () {\n            $(\".a\").live(\"click\", function () {\n                var $this = $(this),\n            ProductImageId = $this.data('ProductImageId');\n                $.ajax({\n                    url: '/Home/Action',  // &lt;- I have not created a actionresult yet\n                    type: \"post\",\n                    cache: false,\n                    data: { ProductImageId: ProductImageId },\n                    success: function (data) {\n                        data = eval(data);\n                        $this.addClass('productSelected');\n                    },\n                    error: function (result) {\n                        $(\".validation-summary-errors\").append(\"&lt;li&gt;Error connecting to server.&lt;/li&gt;\");\n                    }\n\n                });\n            });\n\n        });\n</code></pre>\n\n<p>If I am thinkin right with the javascript, how should the actionresult look like if I want delete the product by the ID I recieved?</p>\n\n<p>I guess It should look something like this:</p>\n\n<pre><code>public ActionResult DeleteProductFromCart(int ProductImageId)\n{\n // code..\n}\n</code></pre>\n\n<p>If I am still thinkin right how should I code inside the brackets on <code>DeleteProductFromCart</code>?</p>\n\n<p>Any kind of help is appreciated.</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13159918,"title":"URL Routes With Same Pattern But Different Named Segments","body":"<p>So let's say I have the following 2 routes defined for my cool new ASP.NET MVC application:</p>\n\n<ul>\n<li><code>{controller}/{action}/{id}</code></li>\n<li><code>{controller}/{action}/{page}</code></li>\n</ul>\n\n<p>Both routes have the same exact pattern except for the last named segment. And the last named segments are also optional - this is not clear in the example but consider them optional.</p>\n\n<p>If I add the routes in the orders I listed them to the framework's <code>RouteCollection</code>, the first route will always match URLs like this: <code>/Home/Index/1</code></p>\n\n<p>Normally this is not a problem, but ASP.NET MVC's default model binder, when passing arguments to actions as parameters, requires the action's parameter to have the same name as the named segment in the route pattern.</p>\n\n<p>So for an action <code>List</code> for example, where I want to pull a list of models to pass to the view, that accepts a page number as a parameter, I need to name that parameter <strong>id</strong>. Again normally, that is not a problem but I am detailed guy and I like my parameter names to give an indication what the parameter is used for.</p>\n\n<p>But since the model binder kicks in after the routing system, I am out of luck. Or am I? Is there a way around this without writing my own model binder, or even worse, my own router?</p>\n\n<p>In addition, and this can be considered a second related question, how do I ensure routing named segments are refactor safe?</p>\n\n<p>Using <code>Url.Action</code>, for example, in my views is encouraged since they take routes into consideration. But to pass an argument when generating URLs using this method, one usually has to pass in an anonymous object, with a property whose name is also equal to the named segment.</p>\n\n<p>So if I rename the named segment in my route, I literally have to go to all my views and rename that property as well. That does not sound optimal. So what's a clean way around this?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","azure","azure-cache"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13155683,"title":"Unrecognized element 'autoDiscover' in web.config thrown by Azure Web Role","body":"<p>I'm trying to use the <a href=\"http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx\" rel=\"nofollow\">Session State Provider for Windows Azure Caching</a> on a co-located cache running on two instances of a Web role. I have a ASP.NET MVC4 project. I followed <a href=\"https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/\" rel=\"nofollow\">Microsofts guide</a> on how to set it up, and gone through it multiple times but with the same result. When I publish to Azure, I get a YSOD on every page.</p>\n\n<p>I've gone through the logs on my Azure instance and found the exception that is probably causing this:</p>\n\n<pre><code>Event code: 3008 \nEvent message: A configuration error has occurred. \n\n...\n\nException information: \n    Exception type: DataCacheException \n    Exception message: ErrorCode&lt;ERRCMC0003&gt;:SubStatus&lt;ES0001&gt;:Error in client configuration file.\n   at Microsoft.ApplicationServer.Caching.ConfigFile.ThrowException(Int32 errorCode, Exception e)\n   at Microsoft.ApplicationServer.Caching.ClientConfigReader.Init(String path)\n   at Microsoft.ApplicationServer.Caching.DataCacheFactoryConfiguration..cctor()\n\nUnrecognized element 'autoDiscover'. (E:\\sitesroot\\0\\web.config line 20)\n   at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)\n   at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object&amp; result, Object&amp; resultRuntimeObject)\n   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object&amp; result, Object&amp; resultRuntimeObject)\n   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)\n   at System.Configuration.ConfigurationManager.GetSection(String sectionName)\n   at Microsoft.ApplicationServer.Caching.ClientConfigReader.Init(String path)\n</code></pre>\n\n<p>I realize that this has to do with my web.config and this section:</p>\n\n<pre><code>&lt;dataCacheClients&gt; \n  &lt;tracing sinkType=\"DiagnosticSink\" traceLevel=\"Error\" /&gt; \n  &lt;dataCacheClient name=\"default\"&gt; \n    &lt;autoDiscover isEnabled=\"true\"/&gt; \n  &lt;/dataCacheClient&gt; \n&lt;/dataCacheClients&gt;\n</code></pre>\n\n<p>But that section is taken straight from the Microsoft guide. I've also tried to uninstall and re-install the WindowsAzure.Caching Nuget-package, which adds the proper entries to the web.config, but it looks exactly the same as well.</p>\n\n<p>I've found <a href=\"http://social.msdn.microsoft.com/Forums/pl-PL/windowsazuredata/thread/9fd2a66d-2c59-4c06-bf6c-96595622bbbc\" rel=\"nofollow\">this discussion</a> on MSDN about what looks to the be the same issue, but I spinn up a new Azure web role, so I cannot see that it should be related to the GAC and an old version of the SDK in this case, or am I missing something? </p>\n\n<p>Looking through the bin-folder of the deployed site, on my Azure instance, I see that the file version of my <code>Microsoft.ApplicationServer.Caching.Client.dll</code> and <code>Microsoft.ApplicationServer.Caching.Core.dll</code> is <code>1.0.4621.0</code>. That is the same files that gets referenced in my project when i install the <code>WindowsAzure.Caching</code> Nuget-package. Is this the proper files to use?</p>\n\n<p>After 15 hours of debugging, any input on this would be highly appreciated.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I've actually gotten <a href=\"http://code.msdn.microsoft.com/Windows-Azure-Caching-78a49b70\" rel=\"nofollow\">this project</a> to work, when I publish it to two instances of a new Web role. I'll start to go through that deployment and see if I can spot any differences.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>The difference is that my project uses version <code>1.0.4621.0</code>of <code>Microsoft.ApplicationServer.Caching.Client.dll</code> and <code>Microsoft.ApplicationServer.Caching.Core.dll</code>, while Microsoft's project uses <code>1.0.4655.0</code>. So it could actually be that I'm using an old version of the SDK. For some reason my project insist on uploading those files when I publish, even though I delete them, but I'll get back with a complete answer if this solves the problem.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13159149,"title":"Enforce HTTPS on all pages in MVC application","body":"<p>I've got an ASP.NET MVC3 application running on a shared server. I've installed an SSL certificate on the server and all controllers in my application are adorned with RequireHTTPS. The intention was to be sure that no pages are served unencrypted (i.e. all pages are served via HTTPS).</p>\n\n<p>However, CERTAIN pages (e.g. js, an HTML error page) CAN be accessed unencrypted (by adding :80 to the hostname in the request). Granted, the pages I am talking about are static but how can I secure ALL pages in my site, preventing ANY of them being downloaded unencrypted. I don't have access to the IIS server settings as this is a shared site, but is there a way by using an HTTP Handler or Rewrite URL module (or can I set the permissions directly on the file folders)?</p>\n\n<p>Thanks for any info.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","namespaces"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":1618,"score":4,"question_id":4798293,"title":"How to alias a type with a using directive in my Razor view?","body":"<p>I need to alias a type with a <code>using</code> directive, which is normally done like so:</p>\n\n<pre><code>using LocalResources = Resources.Admin.SomeResource;\n</code></pre>\n\n<p>How can I do this inside my Razor view so that I can then use it like <code>@LocalResources.FirstName</code>?</p>\n"},{"tags":["asp.net-mvc","ravendb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13156853,"title":"What is the correct pattern for \"joining\" two entity sets in RavenDB?","body":"<p>Using RavenDB within an ASP.NET MVC (4) application, what is the correct pattern for loading a set of related entities and passing them to a view?</p>\n\n<p>Taking Stack Overflow as the canonical example, assume the following entities:</p>\n\n<pre><code>class User\n{\n    public int Id { get; set; }\n\n    public string UserName { get; set; }\n}\n\nclass Comment\n{\n    public int Id { get; set; }\n\n    public string Body { get; set; }\n\n    public string Author{ get; set; }\n}\n\nclass Question\n{\n    public int Id { get; set; }\n    // ...\n    public List&lt;Comment&gt; Comments { get; set; }\n\n    public Question()\n    {\n        Comments = new List&lt;Comment&gt;();\n    }\n}\n</code></pre>\n\n<p>What we want to do is display the users information next to the comments under the question, The comments are stored as part of the Question document, so we <code>Include</code> the <code>Comment.Author</code></p>\n\n<p>Our query might look like this:</p>\n\n<pre><code>var question = RavenSession.Include&lt;Question&gt;(x =&gt; x.Author)\n                           .Include&lt;Comment&gt;(x =&gt; x.Author)\n                           .Load&lt;Question&gt;(id);\n</code></pre>\n\n<p>Now we have the question object with all it's comments, and the Raven client has cached all the user profiles we'll need, <strong>What is the correct / best / most RavenDB approved way of pairing the User objects with the relevant Comments objects?</strong></p>\n\n<p>One thought is that I could transform the <code>User</code> and <code>Comment</code> into a <code>CommentViewModel</code> and send that down to the client, but that seems quite manual.</p>\n\n<p>Another option could be to add another property to the <code>Comment</code> for Author, that is <code>[JsonIgnore]</code>'d and in the getter, lazy load the user from the Raven session. This feels dirty because the Comment model object would need to hold a reference to the raven session.</p>\n"},{"tags":["asp.net-mvc","knockout.js","upshot","asp.net-spa","breeze"],"answer_count":5,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":529,"score":6,"question_id":12238855,"title":"Current status of Upshot.js","body":"<p>I am thinking of using upshot.js along with Knockout in one of my very important projects.  I do not see any documentation or any activity around upshot.   Before I commit to this decision, is this project still active? </p>\n\n<p>If the entire asp.net stack is now open and one can see what is getting committed to repository, why this small library is still not on codeplex or github for community to see? </p>\n\n<p>I hope this is still on radar of asp.net team.</p>\n\n<p>Thanks,</p>\n\n<p>Ajay</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation","qtip"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1801,"score":4,"question_id":7017030,"title":"ASP.NET MVC Validation Using qTip jQuery Plugin","body":"<p>I am using the solution found <a href=\"http://stackoverflow.com/questions/6802045/integrating-qtip-with-mvc3-and-jquery-validation-errorplacement\">here</a> to show client side validation errors in a tooltip using the qTip jQuery plugin.  This solution works great for client side validation but I would love to able to display server side validation errors in the same way.  Does anyone know how to show server side validation errors in tooltips utilizing qTip?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":22,"score":-2,"question_id":13159061,"title":"how read web page of project to Variable?","body":"<p>how read web page of project to Variable? because I want to do pdf using itextsharp</p>\n"},{"tags":["asp.net-mvc","design-patterns","configuration","jira"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13156401,"title":"What is the best practice for on-the-fly Field Configuration?","body":"<p>I'm going to implement an <strong>Asp.net MVC 4.0</strong> application in which use can change the <strong>field positions</strong> on it. In Administration panel there is a page which user can select the <strong>field poisition on the screen</strong>. User also can <strong>change some of the fields properties</strong>. (Something like <strong>Atlassian Jira</strong> <a href=\"https://confluence.atlassian.com/display/JIRA/Specifying+Field+Behaviour\" rel=\"nofollow\">Field Configuration</a> and <strong><a href=\"https://confluence.atlassian.com/display/JIRA/Defining+a+Screen\" rel=\"nofollow\">Screen Configuration</a></strong>)</p>\n\n<p>I don't know how should I creat final pages. Actually I'm looking for a <strong>best practice</strong> which let me read the content of a page from a service and based on that reorder the page elements.</p>\n\n<p>Any help is appriciated.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13158536,"title":"Pulling string from textarea (MVC)","body":"<p>I made a textarea where I want people to be able to enter a comment. I then have a method in a controller that is supposed to use that string. </p>\n\n<p>How do I pull the information from the textarea into the method?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iis7","http-status-code-401"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1329,"score":1,"question_id":10196991,"title":"MVC 3 401 Unauthorized on hosting server","body":"<p>I have an MVC 3 application that is giving me a 401 error when I try and access it from the remote server, but when I run it from my local computer it runs with out any error.</p>\n\n<p>The remote server has IIS 7 configured to allow both Forms and Anonymous access and successfully serves static files (content files), it's only when I try and access the MVC application that I'm getting issues.</p>\n\n<p>When I browse to the MVC application, I get a prompt that says, \"Windows Security - The server  at  requires a username and password.  Warning: This server is requesting that your username and password be sent in an insecure manner (basic authentication without a secure connection).\"</p>\n\n<p>I've tried entering all the passwords I can think of, and nothing give me access.</p>\n\n<p>When I click cancel, I get a server error that says, \"401 - Unauthorized: Access is denied due to invalid credentials. You do not have permission to view this directory or page using the credentials that you supplied.\" and I've been redirected to the <code>LogOn</code> page</p>\n\n<p>My Web.config file looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; \n&lt;!-- \n  For more information on how to configure your ASP.NET application, please visit \n  http://go.microsoft.com/fwlink/?LinkId=152368 \n  --&gt; \n&lt;configuration&gt; \n  &lt;configSections&gt; \n    &lt;section name=\"razorJSSettings\" type=\"RazorJS.Configuration.RazorJSSettings, RazorJS\" /&gt; \n  &lt;/configSections&gt; \n  &lt;connectionStrings&gt; \n    &lt;!--&lt;add name=\"ApplicationServices\" \n         connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\" \n         providerName=\"System.Data.SqlClient\" /&gt;--&gt; \n    &lt;add name=\"ApplicationServices\" connectionString=\"Data Source=SOURCE; Initial Catalog=thedb; User ID=thedbuser; Password='thedbuserpassword';\" /&gt; \n    &lt;add name=\"GestmeDataContext\" connectionString=\"metadata=res://*/Models.Gestme.csdl|res://*/Models.Gestme.ssdl|res://*/Models.Gestme.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=SOURCE;initial catalog=thedb;persist security info=True;user id=thedbuser;password=thedbuserpassword;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt; \n  &lt;/connectionStrings&gt; \n  &lt;appSettings&gt; \n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt; \n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt; \n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt; \n  &lt;/appSettings&gt; \n  &lt;system.web&gt; \n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt; \n      &lt;assemblies&gt; \n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt; \n      &lt;/assemblies&gt; \n    &lt;/compilation&gt; \n    &lt;customErrors mode=\"Off\" /&gt; \n    &lt;authentication mode=\"Forms\"&gt; \n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt; \n    &lt;/authentication&gt; \n    &lt;membership&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt; \n      &lt;/providers&gt; \n    &lt;/membership&gt; \n    &lt;profile&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt; \n      &lt;/providers&gt; \n    &lt;/profile&gt; \n    &lt;roleManager enabled=\"true\"&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add connectionStringName=\"ApplicationServices\" applicationName=\"/\" name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" /&gt; \n      &lt;/providers&gt; \n    &lt;/roleManager&gt; \n    &lt;pages&gt; \n      &lt;namespaces&gt; \n        &lt;add namespace=\"System.Web.Helpers\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt; \n        &lt;add namespace=\"System.Web.Routing\" /&gt; \n        &lt;add namespace=\"System.Web.WebPages\" /&gt; \n      &lt;/namespaces&gt; \n    &lt;/pages&gt; \n    &lt;httpHandlers&gt; \n      &lt;add path=\"razorjs.axd\" verb=\"GET\" type=\"RazorJS.RazorJSHandler\" /&gt; \n    &lt;/httpHandlers&gt; \n  &lt;/system.web&gt; \n  &lt;system.webServer&gt; \n    &lt;httpErrors errorMode=\"Detailed\" /&gt;\n    &lt;asp scriptErrorSentToBrowser=\"true\"/&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt; \n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt; \n    &lt;handlers&gt; \n      &lt;add name=\"RazorJSHandler\" path=\"razorjs.axd\" verb=\"GET\" type=\"RazorJS.RazorJSHandler\" /&gt; \n    &lt;/handlers&gt; \n  &lt;/system.webServer&gt; \n  &lt;runtime&gt; \n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt; \n      &lt;dependentAssembly&gt; \n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt; \n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt; \n      &lt;/dependentAssembly&gt; \n      &lt;dependentAssembly&gt; \n        &lt;assemblyIdentity name=\"Newtonsoft.Json\" publicKeyToken=\"30ad4fe6b2a6aeed\" culture=\"neutral\" /&gt; \n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.0.8.0\" newVersion=\"4.0.8.0\" /&gt; \n      &lt;/dependentAssembly&gt; \n    &lt;/assemblyBinding&gt; \n  &lt;/runtime&gt; \n  &lt;razorJSSettings handlerPath=\"~/razorjs.axd\"&gt; \n    &lt;!-- If empty all paths are valid --&gt; \n    &lt;allowedPaths&gt; \n      &lt;add path=\"~/Scripts\" /&gt; \n    &lt;/allowedPaths&gt; \n  &lt;/razorJSSettings&gt; \n&lt;/configuration&gt; \n</code></pre>\n\n<p>What are all the issues that could cause 401 errors to be returned from the server?  Could it be the connection from the database to the server or the <code>aspnet_*</code> tables?  </p>\n"},{"tags":["asp.net-mvc","database","web","pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13158422,"title":"ASP MVC 3: Pagination for a project that is not using the Entity Framework","body":"<p>I'm in a project where we are using ASP MVC3, but not the Entity Framework and I would like to use pagination for some results. However, the examples I find online seem to be using the Entity Framework.</p>\n\n<p>What's the best way to paginate the results using just SQL?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":55,"score":3,"question_id":13130742,"title":"French accent not shown correctly in asp.net MVC view","body":"<p>I have an ASP.Net MVC View receiving a strongly typed model:</p>\n\n<p><code>@model MyApp.Models.MyModel</code></p>\n\n<p>When displaying properties values of this model, </p>\n\n<p>for example: <code>@Html.DisplayFor(model =&gt; model.myFrenchProperty)</code></p>\n\n<p>french characters are not shown correctly in browser.</p>\n\n<p>For example the french word \"Général\" is shown as \"GÃ©nÃ©ral\" in browser.</p>\n\n<p>I have try using @Html.Raw(Model.myFrenchProperty) but nothing change.</p>\n\n<p>My model is built with Entity Framework and data come from an UTF-8 encoded database.</p>\n\n<p>Any idea how to make this work properly?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","forms-authentication"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":829,"score":0,"question_id":7975311,"title":"Authorize attribute on Ajax Action methods in controller","body":"<p>I was trying to authorize ajax action methods in my MVC3 application. The problem occurs when the user session expires and an ajax action method is asked to execute. The asp.net Authentication system sends 302 redirect instead of sending 401 which seems logical for non-ajax requests. But with Ajax it all gets messed up quickly. So I decided to follow the approach suggested at <a href=\"http://stackoverflow.com/questions/3431343/asp-net-mvc-forces-an-ajax-request-be-redirected-to-the-login-page-when-the-form\">ASP.NET MVC forces an AJAX request be redirected to the login page when the FormsLogin session is no longer active</a> . \n   Basically, at the end of request we check whether the request is an ajax request and there is a redirect (302 response). If it is then we replace the response code from 302 to 401. Accordingly in the javascript we check for 401 and perform redirection from there. Here is the basic code that I have put up</p>\n\n<p>In Global.asax.cs</p>\n\n<pre><code>    protected void Application_EndRequest() {\n        var context = new HttpContextWrapper(Context);\n        // If we're an ajax request, and doing a 302, then we actually need to do a 401\n        if (Context.Response.StatusCode == 302 &amp;&amp; context.Request.IsAjaxRequest()) {\n            Context.Response.Clear();\n            Context.Response.StatusCode = 401;\n        }\n    }\n</code></pre>\n\n<p>In JQuery global error handler (included in asp.net mvc master page : _Layout.cshtml)</p>\n\n<pre><code>$(document).ajaxError(function (event, jqXHR, ajaxSettings, thrownError) {\n    if (jqXHR.status == 401) {\n        window.location.replace(loginUrl);\n    }\n});\n</code></pre>\n\n<p>I have just quickly tested this code and it seems to work fine. Is there any potential problem with this code. I am a relatively novice programmer as far as asp.net mvc and jquery are concerned, so I thought I would ask for other opinions before actually implementing the code. Any suggestions, I will be grateful.</p>\n\n<p>regards,\nNirvan.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13156165,"title":"In query in Entity Framework","body":"<p>I am working on Entity frame work, i have created a method which is returning List of my Table,\nI am retrieving data on base of grpID(which is foreign key, so i can have multiple records)\nI have saved these grpID's in an array so I want to run IN command on Entity framework so that i can get records in single List, How can i apply In command,my code is below</p>\n\n<pre><code> public List&lt;tblResource&gt; GetResources(long[] grpid)\n        {\n            try\n            {               \n                return dataContext.tblResource.Where(c =&gt; c.GroupId == grpid &amp;&amp; c.IsActive == true).ToList();//This code is not working as i am having array of groupIds\n\n            }\n            catch (Exception ex)\n            {                \n                return ex;\n            }\n        }\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-partialview"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13149246,"title":"Action that returns partial view of all the items in my Session[\"cart\"]","body":"<p>With Ajax I am able to add ProductIDs to my cart list in my action AddToCart.</p>\n\n<p>This is the code for that:</p>\n\n<pre><code>public ActionResult AddToCart(int productID)\n{\n    List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n    if (cart == null){\n       cart = new List&lt;int&gt;();\n    }\n    cart.Add(productID);\n\n    Session[\"cart\"] = cart;\n\n    return new JsonResult() { Data = new { Status = \"Success\" } };\n}\n</code></pre>\n\n<p>In my repository I have this following LINQ method to grab the details on the product by ID:</p>\n\n<pre><code>public Products GetProductByID(int id)\n{\n    return db.Products.SingleOrDefault(s =&gt; s.Id == id);\n}\n</code></pre>\n\n<p>Products have Name, Description and Price as attributes.</p>\n\n<p>I have a ViewModel that use for model-binding:</p>\n\n<pre><code>public class ProductsViewModel\n{\n    public string Description { get; set; }\n    public string Name { get; set; }\n    public double price { get; set; }\n    public string Image { get; set; }\n    public int ProductId { get; set; }\n}\n</code></pre>\n\n<p>I have another Viewmodel that holds this ProductsViewModel, Its the ProductList that I loop thru with foreach:</p>\n\n<pre><code>public class HomeIndexViewModel\n    {\n        public List&lt;ProductsViewModel&gt; Productlist { get; set; }\n    }\n</code></pre>\n\n<p>Now I need to create a action ie ShoppingCart which should return a partial view of all items in the Session[\"cart\"]. So I can display them in my view with the products details</p>\n\n<p>the action should not need any parameter. It will just look into session and return back a model with the list of products selected.</p>\n\n<p>Something im 100% sure of is that inside the ShoppingCart View I will 100% use following code line:</p>\n\n<pre><code>@model AvanShop.ViewModels.HomeIndexViewModel\n</code></pre>\n\n<p>and then do a foreach loop that looks like this:</p>\n\n<pre><code> @foreach (var item in Model.Productlist)\n            {\n             code to display the products that are inside the cart  \n            }\n</code></pre>\n\n<p>This is an example on how I did my Action index that displays all of the products in my Index view.</p>\n\n<pre><code>public ActionResult Index()\n        {\n            var Productlist = repository.GetAllProducts();\n            var model = new HomeIndexViewModel()\n            {\n                Productlist = new List&lt;ProductsViewModel&gt;()\n            };\n\n            foreach (var Product in Productlist)\n            {\n                FillProductToModel(model, Product);\n            }\n            return View(model);\n        }\n\nprivate void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)\n{\n    var productViewModel = new ProductsViewModel\n    {\n\n        Description = productimage.Products.Description,\n        ProductId = productimage.Products.Id,\n        price = productimage.Products.Price,\n        Name = productimage.Products.Name,\n        Image = productimage.ImageUrl,\n    };\n    model.Productlist.Add(productViewModel);\n}\n</code></pre>\n\n<p>I have no idea how do this, any tips or help is appreciated</p>\n"},{"tags":["asp.net-mvc","jqgrid","modal-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13156343,"title":"open a modal dialog on cell click in jqGrid","body":"<p>I am new to jqGrid. Can you please help me on this request.</p>\n\n<p>I would like to open a new modal dialog when a cell is double clicked in jqGrid.\nEach cell will open a different modal dialog and that depends on the column, row combination. So this has to be dynamically decided.</p>\n\n<p>I am using asp.net mvc views to be shown in the dialog.</p>\n\n<p>Adding the code that I am working on : (not formatted still)</p>\n\n<pre><code>     $.ajax(\n                {\n                    type: \"GET\",\n                    url: \"/Forecast/GetColumnsAndData/\",\n                    data: \"\",\n                    dataType: \"json\",\n                    success: function (result) {\n                        colN = jQuery.parseJSON(result.colNames);\n                        colM = jQuery.parseJSON(result.colModel);\n                        jQuery(\"#rowed2\").jqGrid({\n                            url: '/Forecast/GridData/',\n                            datatype: 'json',\n                            mtype: 'GET',\n                            colNames: colN,\n                            colModel: colM,\n                            rowNum: 10,\n                            rowList: [10, 20, 30],\n                            viewrecords: true,\n                            onCellSelect: function (rowid, iCol, cellcontent) {\n                                //Need to add the code for modal dialog and criteria check\n                            },\n                            gridComplete: function () {\n                                var ids = jQuery(\"#rowed2\").jqGrid('getDataIDs');\n                                for (var i = 0; i &lt; ids.length; i++) {\n                                    var cl = ids[i];\n                                    be = \"&lt;input style='height:22px;width:20px;' type='button' value='E' onclick=\\\"editrows('\" + cl + \"');\\\"  /&gt;\";\n                                    se = \"&lt;input style='height:22px;width:20px;' type='button' value='S' onclick=\\\"jQuery('#rowed2').saveRow('\" + cl + \"', '','/Forecast/GridDataSave/');\\\"  /&gt;\";\n                                    ce = \"&lt;input style='height:22px;width:20px;' type='button' value='C' onclick=\\\"jQuery('#rowed2').restoreRow('\" + cl + \"');\\\" /&gt;\";\n                                    jQuery(\"#rowed2\").jqGrid('setRowData', ids[i], { act: be + se + ce });\n                                }\n                            },\n\n                            caption: \"Forecast Details\"\n                        });\n                        jQuery(\"#rowed2\").jqGrid('navGrid', \"#prowed2\", { edit: true, add: false, del: false });\n                        jQuery(\"#rowed2\").jqGrid('setGroupHeaders', {\n                            useColSpanStyle: true,\n                            groupHeaders: [\n                                { startColumnName: 'Hours1', numberOfColumns: 2, titleText: '&lt;center&gt;October&lt;/center&gt;' },\n                                { startColumnName: 'Hours2', numberOfColumns: 2, titleText: '&lt;center&gt;November&lt;/center&gt;' }\n                              ]\n                        });\n                    },\n                    error: function (x, e) {\n                        alert(x.readyState + \" \" + x.status + \" \" + e.msg);\n                    }\n                });\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","iis6","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":7901,"score":2,"question_id":4186695,"title":"mvc3 rc deploy on iis6 - giving 403 Forbidden error","body":"<p>Deployed a very simple MVC3 RC app to an iis 6/windows 2003 server, and just getting a 403 forbidden error when trying to accesss the root. Right now the app is only one page, so no others to try out. </p>\n\n<p>I noticed there is no longer a default.aspx in the root to handle default requests, could this maybe be the problem? or is there some special config needed for iis6? </p>\n"},{"tags":["asp.net-mvc","content-management-system","wysiwyg","template-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":466,"score":2,"question_id":4097045,"title":"building MVC CMS","body":"<p>I need a simple functionality for adding pages/changing content on those pages. I've looked at n2, and other pre build CMS tools but these are way to advanced for a simple CMS functionality that I need.</p>\n\n<p>What's the best approach? I already have an MVC app that I would like to add/build a simple features like: </p>\n\n<ol>\n<li>specify a template</li>\n<li>add areas to that template</li>\n<li>add content via wysiwyg.</li>\n</ol>\n\n<p>not sure where to start.</p>\n\n<p>any info greatly appreciated.\nthanks</p>\n\n<p>this is for .NET MVC </p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1438,"score":2,"question_id":4896353,"title":"MVC Return Json result","body":"<p>I have a controller that uploads a file. I would like to return a json result with bool success (if successfully uploaded otherwise false) and message (this could be error message that occured OR link to a file OR link to an image, depending on what was uploaded).</p>\n\n<p>What's the best way to approach this?</p>\n\n<p>I have this</p>\n\n<pre><code>public class UploadedFile\n{\n    public bool Success { get; set; }\n\n    public string Message { get; set; }\n}\n</code></pre>\n\n<p>then In my controller I would set Success to true/or/false and Message to <code>&lt;a href</code> OR <code>&lt;img</code></p>\n\n<p>am i on the right track?</p>\n\n<p>How would i then parse this in the view so that when image it will show an image, if link show a link, if error simply alert error.\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","uiculture"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1206,"score":1,"question_id":4954330,"title":"MVC 3 building dynamic meta keywords meta description functionality for multi-culture site","body":"<p>I need to create db driven meta keywords/description. I would store these records in a database, xml format i presume; since it would be per culture.</p>\n\n<p>How would i go about doing this?</p>\n\n<p>any feedback, suggestions, help, greatly appreciated.\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1100,"score":1,"question_id":5040229,"title":"MVC insert/update in controller","body":"<p>I have the following in my controller (to insert/or/update news entity). I'm using EF POCO</p>\n\n<pre><code>       public class NewsViewModel\n       {\n           /// &lt;summary&gt;\n           /// Initializes a new instance of the &lt;see cref=\"NewsViewModel\"/&gt; class. \n           /// &lt;/summary&gt;\n           public NewsViewModel()\n           {\n               this.News = new News();\n               this.Categories = new List&lt;int&gt;();\n           }\n\n           /// &lt;summary&gt;\n           /// Gets or sets news.\n           /// &lt;/summary&gt;\n           public News News { get; set; }\n\n           /// &lt;summary&gt;\n           /// Gets or sets categories.\n           /// &lt;/summary&gt;\n           public IEnumerable&lt;SelectListItem&gt; SelectCategories { get; set; }\n\n           /// &lt;summary&gt;\n           /// Gets or sets GroupIn.\n           /// &lt;/summary&gt;\n           public IEnumerable&lt;int&gt; Categories { get; set; }\n    }\n\n\n    [HttpPost]\n    public ActionResult Edit(NewsViewModel row)\n    {\n        if (!ModelState.IsValid)\n        {\n            return View(row);\n        }\n\n        // Insert record\n        if (row.News.NewsId == 0)\n        {\n            foreach (var item in row.Categories)\n            {\n                row.News.NewsCategory.Add(this.NewsCategoryRepository.GetRow(item));\n            }\n\n            this.NewsRepository.Insert(row.News);\n        }\n        else\n        {\n            // Update\n            var updateRow = this.NewsRepository.GetRow(row.News.NewsId);\n            updateRow.Title = row.News.Title;\n            updateRow.ShortDescription = row.News.ShortDescription;\n            updateRow.IsActive = row.News.IsActive;\n            updateRow.PostDate = row.News.PostDate;\n            updateRow.ArchiveDate = row.News.ArchiveDate;\n            updateRow.LongDescription = row.News.LongDescription;\n            updateRow.NewsCategory.Clear();\n            foreach (var item in row.Categories)\n            {\n                updateRow.NewsCategory.Add(this.NewsCategoryRepository.GetRow(item));\n            }\n\n\n            this.NewsRepository.Update(updateRow);\n        }\n\n        this.NewsRepository.Context.SaveChanges();\n        return this.RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<ol>\n<li>Is this the best way to perform update? that is to clear all categories then re-insert and update?</li>\n<li>When updating is there a cleaner way than to pull out updateRow, reassing values and update it?</li>\n</ol>\n"},{"tags":["asp.net-mvc","form-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":444,"score":1,"question_id":4685652,"title":".net forms authentication question","body":"<p>i'm working on a custom login page in mvc.net. I check logins like so:</p>\n\n<pre><code>public bool Login(string login, string password, bool persistent)\n{\n  var loginEntity = this.AdminRepository.GetLogin(login, password);\n  if (loginEntity != null)\n  {\n    FormsAuthentication.SetAuthCookie(login, persistent);\n\n    HttpContext.Current.Session[\"AdminId\"] = loginEntity.AdminId;\n    HttpContext.Current.Session[\"AdminUsername\"] = loginEntity.Username;\n\n  return true;\n  }\n</code></pre>\n\n<p>then i decorate any controller that needs admin access with a filter attribute:</p>\n\n<pre><code>public override void OnActionExecuting(ActionExecutingContext filterContext)\n{\n  var ctx = HttpContext.Current;\n\n  // check if session is supported\n  if (ctx.Session != null)\n  {\n    var redirectTargetDictionary = new RouteValueDictionary();\n\n    // check if a new session id was generated\n    if (ctx.Session.IsNewSession)\n    {\n        // If it says it is a new session, but an existing cookie exists, then it must\n        // have timed out\n        string sessionCookie = ctx.Request.Headers[\"Cookie\"];\n        if (((null != sessionCookie) &amp;&amp; (sessionCookie.IndexOf(\"ASP.NET_SessionId\") &gt;= 0)) || null == sessionCookie)\n        {\n          redirectTargetDictionary = new RouteValueDictionary();\n          redirectTargetDictionary.Add(\"area\", \"Admin\");\n          redirectTargetDictionary.Add(\"action\", \"LogOn\");\n          redirectTargetDictionary.Add(\"controller\", \"Home\");\n\n          filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);\n        }\n      } else if (SessionContext.AdminId == null) {\n        redirectTargetDictionary = new RouteValueDictionary();\n        redirectTargetDictionary.Add(\"area\", \"Admin\");\n        redirectTargetDictionary.Add(\"action\", \"LogOn\");\n        redirectTargetDictionary.Add(\"controller\", \"Home\");\n\n        filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);\n      }\n    }\n    base.OnActionExecuting(filterContext);\n}\n</code></pre>\n\n<p>I see that after log in I have two cookies: </p>\n\n<ol>\n<li>ASPXAUTH (with expiration date set\nto \"At end of session\" (when\npersists is false) OR (30 min from\nnow (when persists is set to true)</li>\n<li>and ASP.NET_SessionId which\nexpiration time is always \"At end of\nsession\"</li>\n</ol>\n\n<p>Question:\nThe problem is that even though i set TRUE to \"persists\" option (which will set ASPXAUTH  expiration time 30 min from now -which is good) my Session[\"AdminId\"] is always null after i close and reopen the browser. How do i make sure my Sessions (Session[\"AdminId\"] and Session[\"AdminUsername\"]) are pulled in from the cookie when I initially do set \"persists\" to true and close then re-open the browswer window.\nthanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":337,"score":-1,"question_id":4142485,"title":"MVC SelectList SelectValues","body":"<p>I need an extention for converting ToSelectList a list of items (strings or ints)</p>\n\n<p>I found this:</p>\n\n<pre><code>        public static SelectList ToSelectList&lt;T&gt;(this IEnumerable&lt;T&gt; collection,\n                            string dataValueField, string dataTextField, string selectedValue)\n    {\n        return new SelectList(collection, dataValueField, dataTextField, selectedValue);\n    }\n</code></pre>\n\n<p>but this doesn't handle multiple selected values. \nI tried with this:</p>\n\n<pre><code>        public static SelectList ToSelectList&lt;T&gt;(this IEnumerable&lt;T&gt; collection,\n                    string dataValueField, string dataTextField, IEnumerable&lt;T&gt; selectedValues)\n    {\n        var list = new SelectList(collection, dataValueField, dataTextField, selectedValues);\n        return list;\n    }\n</code></pre>\n\n<p>but it doesn't work.\nplease help!</p>\n"},{"tags":["jquery","asp.net-mvc","chat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":405,"score":0,"question_id":4525431,"title":"Implementing jquery Chat","body":"<p>I would like to add a simple chat functionality to my web site. I found this:\n<a href=\"http://www.cs.illinois.edu/homes/wenpu1/chatbox.html\" rel=\"nofollow\">http://www.cs.illinois.edu/homes/wenpu1/chatbox.html</a></p>\n\n<p>which basically covers jquery stuff and css. All I need to to is add inserting messages to db etc. The problem is that I need to identify unique visitors/guests. Is there something like Unique Browser Id? so that I know which person to respond to.</p>\n\n<p>I'm thinking of creating Session that would be given a unique GUID for every visitor of the site. is this a good solution?\nthanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":4552551,"title":".net abstract class and reflections","body":"<p>This is for .net MVC project i'm working on</p>\n\n<p>I have the following classes:</p>\n\n<pre><code>    public abstract class TemplateBase\n{\n    public abstract string TemplateName { get; }\n    public string RuntimeTypeName { get { return GetType().FullName; } }\n}\n</code></pre>\n\n<p>and 2 classes that inherit from it:</p>\n\n<pre><code>    public class TwoColumnTemplate : TemplateBase\n{\n    public override string TemplateName { get { return \"Two-column page\"; } }\n    public AreaContainer LeftColumn { get; protected set; }\n    public AreaContainer RightColumn { get; protected set; }\n\n    public TwoColumnTemplate()\n    {\n        LeftColumn = new AreaContainer(\"Left column\");\n        RightColumn = new AreaContainer(\"Right column\");\n    }\n}\n\n    public class SingleColumnTemplate : TemplateBase\n{\n    public override string TemplateName { get { return \"Single-column page\"; } }\n    public AreaContainer CenterColumn { get; protected set; }\n\n    public SingleColumnTemplate()\n    {\n        CenterColumn = new AreaContainer(\"Center column\");\n    }\n}\n</code></pre>\n\n<p>and a contentpage class that is used for displaying/modifying html content</p>\n\n<pre><code>    public class ContentPage\n{\n    public virtual int ContentPageId { get; set; }\n\n    public virtual string Title { get; set; }\n\n    public TemplateBase Template { get; set; }\n}\n</code></pre>\n\n<p>Now the question. I've created a model binder that binds ContentPage and I do get the data to my ActionResult like so:</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult Edit(ContentPage row)\n    {\n        return this.View(row);\n    }\n</code></pre>\n\n<p>row does have the right data however I can't access Left or Right column data because abstract class TemplateBase. To clerify is there a way to dynamically cast \"row\" object to a correct class (SingleColumn or TwoColumn) type?</p>\n\n<p>Instead of this using if/else is there a better way?. Maybe using reflections?\nthanks</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult Edit(ContentPage row)\n    {\n        var sb = new StringBuilder();\n\n    if (row.Template.RuntimeTypeName == \"TwoColumn\")\n    {\n        TwoColumnTemplate template = (TwoColumnTemplate)row.Template;\n    } \n    else\n    {\n        SingleColumnTemplate template = (SingleColumnTemplate)row.Template;\n    }\n\n        return this.View(row);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":2905,"score":-1,"question_id":5078131,"title":"Print Page functionality in MVC","body":"<p>Anyone done this in MVC? any info would be great!.\nThanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mail"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":239,"score":0,"question_id":5078161,"title":"Email a Friend functionality in MVC","body":"<p>Pretty much there would be an icon on the site. clicking it would bring up a pop up window with following fieds:</p>\n\n<ol>\n<li>Name</li>\n<li>Email</li>\n</ol>\n\n<p>you would then be able to fill out the page and an email would be sent to \"email\" provided in the \"Email\" field. The problem is: How do i know what page i'm on so that I can put it in the message?\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":4807372,"title":"Using a dictionary to dynamically pass values to an ActionLink in ASP.NET MVC","body":"<p>Is there a way to pass a  <code>Dictionary&lt;string, string&gt;</code> to <code>Html.ActionLink()</code>?</p>\n\n<h3>My Dictionary:</h3>\n\n<pre><code>var myDictionary = new Dictionary&lt;string, string&gt; { { \"serviceId\", \"2342\" } }\n</code></pre>\n\n<p>I tried doing this:</p>\n\n<pre><code>Html.ActionLink(\"Text here\", \"Action\",\"Controller\", myDictionary, null)\n</code></pre>\n\n<p>but that doesn't work</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":213,"score":0,"question_id":4866407,"title":"MVC3 Razorview Syntax","body":"<p>Can someone please tell me how to convert this to razor view syntax? </p>\n\n<pre><code>&lt;%= ViewData.Model.Firms.Count &gt; 0 ? Html.Pager(ViewData.Model.Firms.PageSize, ViewData.Model.Firms.PageNumber, ViewData.Model.Firms.TotalItemCount) : string.Empty%&gt;\n</code></pre>\n\n<p>thanks for help in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":420,"score":0,"question_id":4049929,"title":"MVC Ajax.BeginForm","body":"<p>I have an ajax form like so:</p>\n\n<pre><code>    &lt;% using (Ajax.BeginForm(\"Comments\", \"Comments\", null, new AjaxOptions {UpdateTargetId=\"main\", OnSuccess=\"createSuccess\" }, new{ @id=\"main\"})) {%&gt;\n    &lt;%: Html.ValidationSummary(true, \"errors\") %&gt;\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;Fields&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            &lt;%: Html.LabelFor(model =&gt; model.Body) %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            &lt;%: Html.TextBoxFor(model =&gt; model.Body) %&gt;\n            &lt;%: Html.ValidationMessageFor(model =&gt; model.Body) %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            &lt;%: Html.LabelFor(model =&gt; model.Name) %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            &lt;%: Html.TextBoxFor(model =&gt; model.Name) %&gt;\n            &lt;%: Html.ValidationMessageFor(model =&gt; model.Name) %&gt;\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Submit\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n\n&lt;% } %&gt;\n\n&lt;div id=\"Success\" style=\"display:none;\"&gt;\n    New entry successfully entered\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nfunction createSuccess(context)\n{\n    if ($(\".validation-summary-errors\").length &gt; 0) {\n        return;\n    }\n\n    $('#main').clearForm()\n    $('#Success').show();\n}\n</code></pre>\n\n<p></p>\n\n<p>Is this the right way to check if the form was successfully submitted? What if the class name for validation-summary changes? is there a better way?</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":11754761,"title":"MVC get controller in helper class","body":"<p>I need to be able to get a controller name in my custom helper class. </p>\n\n<p>I have the following:</p>\n\n<ol>\n<li>Layout view which calls a controller: \"HelperController\", action: \"Menu\" like so:</li>\n</ol>\n\n<p><code>@Html.Action(\"Menu\", \"Helper\")</code></p>\n\n<ol>\n<li><p>This calls ActionResult and generages an html:</p>\n\n<pre><code>@model List&lt;MvcMenuItem&gt;\n@{\nLayout = null;\n}\n@{        \n@Html.Menu(this.ViewContext).ClientId(\"navMain\").AddRange(Model).Render()\n}\n</code></pre></li>\n<li><p>This calls \"<code>public static class MvcMenuExtensions</code>\" and in there (in my <code>Render()</code> method) I need to be able to get the controller name I'm currently in, NOT the controller name that is calling <code>MvcMenuExtensions</code></p></li>\n</ol>\n\n<p>I've tried this:</p>\n\n<pre><code>string controller = this.ViewContext.RouteData.Values[\"controller\"].ToString();\n</code></pre>\n\n<p>but this results in controller being \"<code>Helper</code>\" controller and not the current controller I'm in. Since this \"<code>ActionResult</code>\" is being called from anywhere on the page (it's in the layout).</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":321,"score":0,"question_id":5310606,"title":"Multistep form .net","body":"<p>I'm working in .net MVC3. I have a multi step form</p>\n\n<ol>\n<li>step1: fillin username, password, confirm password</li>\n<li>step2: fill in additional info</li>\n</ol>\n\n<p>problem:\nonce user fills in step1 he/she should not be able to go back. however there is always a case where user clicks browser 'back' button. in that case all the info (except password) is pre-filled. I want to aler user (in step2) when back button is clicked that none of the info in step 1 will be updated OR somehow disable back button. is that possible? what are some valid solutions?\nthanks</p>\n"},{"tags":["asp.net-mvc","castle-windsor","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":248,"score":2,"question_id":4678635,"title":"IoC Castle Windsor in MVC routing problem","body":"<p>I've set up castle windsor in my mvc app. everything works great except it also catches routes that are of type link or image. The problem is that right before exiting from the controller and generating the view \"GetControllerInstance\" is executed with 'null' type. This happends anytime there a link on a page like:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"non-existing.css\"/&gt;\n</code></pre>\n\n<p>Or a link to an image that does not exist. Why is this happening?</p>\n\n<p>My windows class:</p>\n\n<pre><code>    public class WindsorControllerFactory : DefaultControllerFactory\n{\n    #region Constants and Fields\n\n    /// &lt;summary&gt;\n    /// The container.\n    /// &lt;/summary&gt;\n    private readonly WindsorContainer container;\n\n    #endregion\n\n    // The constructor:\n    // 1. Sets up a new IoC container\n    // 2. Registers all components specified in web.config\n    // 3. Registers all controller types as components\n    #region Constructors and Destructors\n\n    /// &lt;summary&gt;\n    /// Initializes a new instance of the &lt;see cref=\"WindsorControllerFactory\"/&gt; class.\n    /// &lt;/summary&gt;\n    public WindsorControllerFactory()\n    {\n        // Instantiate a container, taking configuration from web.config\n        this.container = InversionOfControl.Container;\n\n        // Also register all the controller types as transient\n        IEnumerable&lt;Type&gt; controllerTypes = from t in Assembly.GetExecutingAssembly().GetTypes()\n                                            where typeof(IController).IsAssignableFrom(t)\n                                            select t;\n        foreach (Type t in controllerTypes)\n        {\n            this.container.AddComponentLifeStyle(t.FullName, t, LifestyleType.Transient);\n        }\n    }\n\n    #endregion\n\n    #region Methods\n\n    /// &lt;summary&gt;\n    /// The get controller instance.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"requestContext\"&gt;\n    /// The request context.\n    /// &lt;/param&gt;\n    /// &lt;param name=\"controllerType\"&gt;\n    /// The controller type.\n    /// &lt;/param&gt;\n    /// &lt;returns&gt;\n    /// Resolved controller instance.\n    /// &lt;/returns&gt;\n    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)\n    {\n        if (controllerType == null)\n        {\n            controllerType = typeof(HomeController);\n        }\n\n        return (IController)this.container.Resolve(controllerType);\n    }\n\n    #endregion\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","linq","entity-framework",".net-3.5"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":672,"score":2,"question_id":4645166,"title":"LINQ parent child relation","body":"<p>I'm working on the BLOG functionality in MVC. I need to be able to create 'blog comments'. So each comment may have a parent comment etc.</p>\n\n<p>Given table \"Comments\":\nCommentId -> int -> identity autoincrement\nPostId -> int\nParentId -> int\nComment -> string</p>\n\n<p><img src=\"http://i.stack.imgur.com/nxi2T.png\" alt=\"alt text\">       </p>\n\n<p>Is there a way to get a list of comments for a given article ordered by CreateDate and ParentId?</p>\n\n<p>Or maybe there is a better table design you may suggest. What is the best design when inserting Post comments like this?</p>\n\n<p>I'm using Entity framework.</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","elmah"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":272,"score":2,"question_id":8892233,"title":"Elmah not logging 404 (missing files / images)","body":"<p>For some reason emlah is not logging missing images in my MVC3 app. Everything else like 'missing action' wrong url is ok. what could be the cause?\nthanks</p>\n\n<p>EDIT:</p>\n\n<p>I am running Integrated Mode and am NOT using built-in VS IIS.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Ct6f.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/ujEHe.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/QREqJ.png\" alt=\"enter image description here\"></p>\n\n<p>EDIT 2:</p>\n\n<p>Doesn't seem to log missing images if the images are mapped via virtual directory:\n<img src=\"http://i.stack.imgur.com/aSYbB.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":360,"score":3,"question_id":4705913,"title":"MVC Validation Attribute","body":"<p>How do you validate a class using Validation attributes when validating strongly typed view models.</p>\n\n<p>Suppose you have a view model like so:</p>\n\n<pre><code>[PropertiesMustMatch(\"Admin.Password\", \"Admin.ConfirmPassword\")]\npublic class AdminsEditViewModel\n{\n    public AdminsEditViewModel()\n    {\n        this.Admin = new Admin(); // this is an Admin class\n    }\n\n    public IEnumerable&lt;SelectListItem&gt; SelectAdminsInGroup { get; set; }\n\n\n    public IEnumerable&lt;SelectListItem&gt; SelectAdminsNotInGroup { get; set; }\n\n    public Admin Admin { get; set; }\n}\n</code></pre>\n\n<p>I get null exception when on this line of PropertiesMustMatchAttribute</p>\n\n<pre><code>object originalValue = properties.Find(OriginalProperty,  true /* ignoreCase */).GetValue(value);\n</code></pre>\n\n<p>since Password field is a property of Admin class and NOT AdminsEditViewModel. How do I make it so that it will go so many levels deep until it does find property of Admin in the ViewModel AdminsEditViewModel?\nthanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":360,"score":3,"question_id":4583183,"title":"MVC Get ID of object","body":"<p>in the following post: <a href=\"http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html\" rel=\"nofollow\">http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html</a></p>\n\n<pre><code>&lt;%= Html.Editor(prop.PropertyName) %&gt;\n</code></pre>\n\n<p>Html.Editor creates a text box with MVC generated name. How do I get/access that name? id?</p>\n\n<p>So in my code this gets generated:</p>\n\n<pre><code>&lt;input type=\"text\" value=\"Right\" name=\"Template.RightColumn.ContainerName\" id=\"Template_RightColumn_ContainerName\"&gt;\n</code></pre>\n\n<p>and I want to generate this:</p>\n\n<pre><code>&lt;div id=\"Template_RightColumn_ContainerName\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>so I need to access PropertyId. how do i do it?</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1310,"score":7,"question_id":5114631,"title":"MVC site search functionality","body":"<p>i need a simple site search functionality for my mvc app. some of the pages are static and some dynamic (like news articles that are entered in cms). I would like the search to handle both. is this product any good? <a href=\"http://www.sitesearchasp.net\" rel=\"nofollow\">http://www.sitesearchasp.net</a> any other?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":15,"up_vote_count":21,"down_vote_count":0,"view_count":6764,"score":21,"question_id":7025198,"title":"MVC3 custom validation: compare two dates","body":"<p>I've created a custom ValidationAttribute that compares 2 dates and makes sure that the second date is greater than the first:</p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable\n{\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n    {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {\n        var propertyTestedInfo = validationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null)\n        {\n            return new ValidationResult(string.Format(\"unknown property {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue = propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime))\n        {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is DateTime))\n        {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue)\n        {\n            if (this.allowEqualDates)\n            {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue)\n            {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule\n        {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] = this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] = this.allowEqualDates;\n        yield return rule;\n    }\n</code></pre>\n\n<p>CalendarEntry class:\n...</p>\n\n<pre><code>public virtual DateTime StartDate { get; set; }\n\n[IsDateAfter(\"StartDate\", true, ErrorMessage=\"End date needs to be after start date\")]\npublic virtual DateTime EndDate { get; set; }\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n    'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function(value, element, params) {\n    alert(params.propertytested);\n    var startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\n    if (!value || !startdatevalue) return true;\n    return (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) : Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p>This works fine when the <strong>CalendarEntry</strong> is not wrapped inside another class. HOWEVER, when I use a view model like so:</p>\n\n<pre><code>    public class TrainingDateEditViewModel\n    {\n        #region Properties\n\n        /// &lt;summary&gt;\n        /// Gets or sets CalendarEntry.\n        /// &lt;/summary&gt;\n        public CalendarEntry CalendarEntry { get; set; }\n....\n</code></pre>\n\n<p>The client validation no longer works because the html output produced is this:</p>\n\n<pre><code>&lt;input type=\"text\" value=\"\" name=\"CalendarEntry.EndDate\" id=\"CalendarEntry_EndDate\" data-val-isdateafter-propertytested=\"StartDate\" data-val-isdateafter-allowequaldates=\"True\" data-val-isdateafter=\"End date needs to be after start date\" data-val=\"true\"&gt;\n</code></pre>\n\n<p>And the </p>\n\n<pre><code>data-val-isdateafter-propertytested=\"StartDate\" and IT SHOULD BE: \"CalendarEntry.StartDate\".\n</code></pre>\n\n<p>How would I make it so that it would know to bind to \"CalendarEntry.StartDate\"\nrule.ValidationParameters[\"propertytested\"] = this.testedPropertyName; // HERE IT SHOULD BE FULL NAME??? HOW??</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12957164,"title":"MVC Get View HTML output in Test Method","body":"<p>How can I get generated HTML (View) in my Test Method?</p>\n\n<p>I have the following:</p>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n    ViewBag.Message = \"Welcome to ASP.NET MVC!\";\n\n    return View();\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Home Page\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n&lt;p&gt;\n    To learn more about ASP.NET MVC visit &lt;a href=\"http://asp.net/mvc\" title=\"ASP.NET MVC Website\"&gt;http://asp.net/mvc&lt;/a&gt;.\n&lt;/p&gt;\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>   [TestMethod]\n    public void HomeControllerReturnsView()\n    {\n        // Arrange\n        var controller = new HomeController();\n\n        // Act\n        var result = controller.Index() as ViewResult;\n\n        using (StringWriter sw = new StringWriter())\n        {\n            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, \"Home\");\n            ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);\n            viewResult.View.Render(viewContext, sw);\n\n            var test = sw.GetStringBuilder().ToString();\n        }\n    }\n</code></pre>\n\n<p>FYI: when i run this in debug controller.HttpContext and controller.RouteData are null.\nthanks</p>\n"},{"tags":["asp.net-mvc","artificial-intelligence","service-layer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13152028,"title":"Where to place modules related to AI in MVCS","body":"<p>I am bit confused, what is the right place to place the modules related to AI in an MVCS pattern ? Alongside with Model View Controller and Services folder ?</p>\n\n<p>V.</p>\n"},{"tags":["asp.net-mvc","captcha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13152562,"title":"how to implement simple captcha value in MVC application","body":"<p>I want to integrate arithmetic captcha in mvc application like\n2+3=</p>\n"},{"tags":["asp.net-mvc","html-helper"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13153693,"title":"MVC Helper get the Html id that will be generated by MVC","body":"<p>I am trying the id that will be generated for a HTMLHelper in MVC. I am building a autocomplete helper and my textbox needs to know the id of the hidden element. Currently this is what i have.</p>\n\n<pre><code>public static MvcHtmlString EmployeeAutocomplete&lt;TModel, TValue1, TValue2&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper,\n                                Expression&lt;Func&lt;TModel, TValue1&gt;&gt; employeeTextBoxExpression,\n                                Expression&lt;Func&lt;TModel, TValue2&gt;&gt; employeeHiddenExpression,\n                                string extraClassNames = \"\"\n                                )\n{\n  //get the type name.\n  var hiddenName = ExpressionHelper.GetExpressionText(employeeHiddenExpression);\n\n  var sb = new StringBuilder();\n  sb.Append(htmlHelper.TextBoxFor(employeeTextBoxExpression, new\n  {\n    @class = \"ac_employee input-text \" + extraClassNames,\n    data_rel =hiddenName.Replace(\".\", \"_\")\n  }));\n  sb.Append(htmlHelper.HiddenFor(employeeHiddenExpression));\n  return new MvcHtmlString(sb.ToString());\n}\n</code></pre>\n\n<p>The hidden name has got the property name correct, but it still needs the type, the html being generated for the hiddenfield has got the following \"ObjectName_PropertyName\" and the \nExpressionHelper.GetExpressionText() only gives the \"PropertyName\"</p>\n\n<p>thanks in advance</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","forms-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13155296,"title":"MVC4 Forms Authentication Custom Identity Cast not working","body":"<p>I have implemented openAuth forms authentication in mvc almost same as on this page <a href=\"http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/\" rel=\"nofollow\">http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/</a></p>\n\n<p>However I am unable to cast the <code>System.Web.Security.FormsIdentity</code> to <code>OpenIdIdentity</code> when i don't use <code>[OpenIdAuthorize]</code> attribute on my actions.</p>\n\n<pre><code>[OpenIdAuthorize]\npublic ActionResult Index()\n{\n    return View();\n}\n</code></pre>\n\n<p>If I add <code>[OpenIdAuthorize]</code> attribute and then cast the identity, it works fine. I have an action which should work for both, anonymous and signed in users. However if a user is signed in, I want to get <code>OpenIdIdentity</code> and use it.</p>\n\n<p>The problem is that override of <code>AuthorizeCore</code> does not get called if I don't put an attribute in action.</p>\n"},{"tags":["asp.net-mvc","list","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":64,"score":4,"question_id":13155062,"title":"ASP.NET MVC genric list in viewdata","body":"<p>I have generic list property which I am binding to the View. The problem is when I post the data after entering some values in view, the page get refreshed and it doesn't retain the value in the View. And also when i try to add <code>Html.ValidationMessage</code> For that particular field I get an error </p>\n\n<pre><code> \"The value 'System.Collections.Generic.List`1[&lt;name of the class&gt;]' is invalid\"\n</code></pre>\n\n<p>My code looks like this,\n<strong>model</strong></p>\n\n<pre><code>  public List&lt;Chart&gt; Charts \n  { \n     get \n       { \n         return  _repository.GetCharts(Convert.ToInt32(this.Template_Id)); \n      } \n      set{} \n   }\n</code></pre>\n\n<p><strong>actual class</strong></p>\n\n<pre><code> public class Chart\n   {\n        public string ChartDisplayText { get; set; }\n   }\n</code></pre>\n\n<p>the property in Chart class is the one where I am entering the value in View\nAny help much appreciated, Thanks</p>\n"},{"tags":["jquery","asp.net-mvc","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13154260,"title":"How do you implement autocomplete in a textbox where the data comes from the database?","body":"<p>Before anything else, please don't shoot me for being a noob who is blindly making her way to finishing an entire mvc project, albeit not starting it, alone.</p>\n\n<p>So anyway, I'm completely confused as to how to implement jquery ui autocomplete in a textbox where the data comes from a database table. </p>\n\n<p>I tried doing it using what I can find on the internet and here's what I came up with in my jquery function:</p>\n\n<pre><code>        $(function (){\n        $(\"#autoCompleteText\").autocomplete({\n            source: function(request, response) {\n                $.ajax({\n                    type: \"POST\",\n                    traditional: true,\n                    dataType: \"json\",\n                    url: \"/Service/jsonAutoComplete\",\n                    success: function(result) {\n                        response($.map(result.d, function (item){\n                            return {\n                                value: item.ProductName\n                            }\n                        }))\n                    },\n                    minLegth: 2\n                });\n            }\n            });\n        });\n</code></pre>\n\n<p>For the method in my controller here's how it looks like:</p>\n\n<pre><code>public JsonResult jsonAutoComplete(int companyId)\n    {\n        JsonResult result = new JsonResult();\n        Products products = new Products();\n        products = db.Products.FirstOrDefault(x =&gt; x.CompanyId == companyId);\n        int productId = products.Id;\n        SelectList select = this._selectFactory.CreateSelectListFromProductsByCompanyId(products.Id, companyId);\n        result.Data = new { select = select, productId = productId };\n        return result;\n    }\n</code></pre>\n\n<p>I'm pretty sure I'm doing something wrong here since nothing happens whenever I try to type the first 2 letters of one of the products on my database.</p>\n\n<p>Also, what does $.map exactly mean? Most of the examples I saw on the web had this so I figured it's needed but I really don't understand it yet.</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","sql-server-2008","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13156594,"title":"in MVC3 how to recreate the EdmMetaData Table in Sql Server?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11215035/mvc3-edmmetadata-table-not-found\">MVC3 EDMmetadata table not found</a>  </p>\n</blockquote>\n\n\n\n<p>I downloaded the MvcMusicStore example from <a href=\"http://mvcmusicstore.codeplex.com\" rel=\"nofollow\">mvcmusicstore.codeplex.com</a> \nand I have deleted the EdmMetaData Table.</p>\n\n<p>Everytime that I run it, I get this error...</p>\n\n<blockquote>\n  <p>\"Model compatibility cannot be checked because the database does not\n  contain model metadata. Ensure that IncludeMetadataConvention has been\n  added to the DbModelBuilder conventions.\"</p>\n</blockquote>\n\n<p>how can I recreate that table?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","routes"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13135633,"title":"File to define route in MVC3","body":"<p>I have this file :</p>\n\n<pre><code>&lt;fru&gt;\n &lt;url action=\"product\" controler=\"Home\" params=\"{id=123}\" &gt;this_is_the_an_arbitrary_url_of_a_product.html&lt;/url&gt;\n &lt;url action=\"customer\" controler=\"Home\" params=\"{id=445}\" &gt;this_is_the_an_arbitrary_url_of_a_customer.html&lt;/url&gt;\n... other urls ...\n&lt;/fru&gt;\n</code></pre>\n\n<p>I'm looking for binding this file or this object structure with the MVCHandler, in order to map the request to the good action with the params.\nIt's important for the url me that the urls doesn't respect any structure rules.</p>\n\n<p>Is there a  way to do this?</p>\n"},{"tags":["c#","ajax","asp.net-mvc","asp.net-mvc-3","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13156287,"title":"Why is my session cart list empty?","body":"<p>When I debugg my actionresult AddToCart. My cart gets a value of a productId which is working perfectly here it is:</p>\n\n<pre><code>public ActionResult AddToCart(int productID)\n    {\n        List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n        if (cart == null){\n           cart = new List&lt;int&gt;();\n        }\n        cart.Add(productID);\n\n        return new JsonResult() { Data = new { Status = \"Success\" } };\n    }\n</code></pre>\n\n<p>And I am using ajax to get the productID:</p>\n\n<pre><code>$(function () {\n            $(\".a\").live(\"click\", function () {\n                var $this = $(this),\n            productID = $this.data('productID');\n                $.ajax({\n                    url: '/Home/AddToCart',\n                    type: \"post\",\n                    cache: false,\n                    data: { productID: productID },\n                    success: function (data) {\n                        data = eval(data);\n                        $this.addClass('productSelected');\n                    },\n                    error: function (result) {\n                        $(\".validation-summary-errors\").append(\"&lt;li&gt;Error connecting to server.&lt;/li&gt;\");\n                    }\n\n                });\n            });\n\n        });\n</code></pre>\n\n<p>But when I implemented this actionresult my cart is null:</p>\n\n<pre><code>public ActionResult ShoppingCart()\n{\n    var cart = Session[\"cart\"] as List&lt;int&gt;;\n\n    var products = cart != null ? cart.Select(id =&gt; \n             {\n                 var product = repository.GetProductById(id);\n                 return new ProductsViewModel\n                    {\n                       Name = product.Name,\n                       Description = product.Description,\n                       price = product.Price\n                    }\n             }) : new List&lt;ProductsViewModel&gt;();\n\n    return PartialView(products);\n}\n</code></pre>\n\n<p>What am I doing wrong? Why is actionresult Shoppingcart have null values how is this happenin? When I debugg AddToCart, Cart gets a value and it gets added.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13155836,"title":"dropdownlistfor selected value list item possible?","body":"<p>I'm currently working in ASP.NET MVC 4 and I'm trying to do something special here.</p>\n\n<p>Here's the code I currently have for my dropdownlist:</p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.SourceList, new SelectList(Model.SourceList, \"Id\", \"Name\", new { id = \"SourceList\" }))\n</code></pre>\n\n<p>Now this works, but it's pretty dumb what I'm doing here. In my back-end I query again to get the entire model from the id I just selected.</p>\n\n<p>What I need is not the Id of the selected model, but the entire model. Is there any way of doing this?</p>\n\n<p>My current JQuery callback:</p>\n\n<pre><code>$.ajax({\n            url: '@Url.Action(\"SetLicensesAfterSourceChange\", \"Permission\")',\n            type: 'POST',\n            dataType: 'json',\n            contentType: 'application/json;',\n            data: JSON.stringify({ \"Id\" : selectedStartSourceId, \"sourceList\" : jsonSourceList }),\n            success: function (result) {\n                //Do stuff here\n            }\n        });\n</code></pre>\n\n<p>What I want to be able to do:</p>\n\n<pre><code>$.ajax({\n            url: '@Url.Action(\"SetLicensesAfterSourceChange\", \"Permission\")',\n            type: 'POST',\n            dataType: 'json',\n            contentType: 'application/json;',\n            data: \"selectedModel\" = modelFromDropDownList,\n            success: function (result) {\n                //Do stuff here\n            }\n        });\n</code></pre>\n"},{"tags":["jquery","asp.net","asp.net-mvc","jquery-validation-plugin","unobtrusive-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13048424,"title":"jquery.validate does not seem to work with certain inputs where name value includes a dot i.e RegisterModel.Pssword","body":"<p>In my views if I use a model that just has scalar, basic properties i.e [RegisterModel] everything works fine. But if I use a view model type where one or more properties is set to another .net complex type, say [RegisterModelAndLogOnModel] then the generated HTML does not work properly with the jQuery validate plug-in. With jQuery 1.7.2 it always tells me the confirmation password does not match the password, in jQuery 1.8.2 it just plain refuses to work and errors. I have now pin pointed the problem to the RegisterModel.ConfirmPassword input. </p>\n\n<pre><code> &lt;input name=\"RegisterModel.Password\" id=\"RegisterModel_Password\" type=\"password\" data-val=\"true\" data-val-required=\"The Password field is required.\" data-val-length-min=\"6\" data-val-length-max=\"100\" data-val-length=\"The Password must be at least 6 characters long.\"&gt;\n\n&lt;input name=\"RegisterModel.ConfirmPassword\" id=\"RegisterModel_ConfirmPassword\" type=\"password\" data-val=\"true\" data-val-equalto-other=\"*.Password\" data-val-equalto=\"The password and confirmation password do not match.\"/&gt;\n</code></pre>\n\n<p>works:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.Password)\n                @Html.ValidationMessageFor(m =&gt; m.Password)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.ConfirmPassword)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.ConfirmPassword)\n                @Html.ValidationMessageFor(m =&gt; m.ConfirmPassword)\n            &lt;/div&gt;\n</code></pre>\n\n<p>Does not work:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.RegisterModel.Password)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.Password)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.ConfirmPassword)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.RegisterModel.ConfirmPassword)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.ConfirmPassword)\n            &lt;/div&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":13149747,"title":"jqGrid set focus to clicked cell AND implement datepicker in IE and Firefox","body":"<p>Apologies if this has been answered already. There are a number of questions around this but I can't quite get what I'm after.</p>\n\n<p>I have a jqGrid. The first cell has a datepicker attached (on the fly when the cell is edited, not in the initial grid definition).</p>\n\n<p>When I double click on a cell in the middle of the grid, I want it to go into edit mode, sets focus to that clicked cell and not fire the datepicker (as I didn't double click in it)</p>\n\n<p>With the code below I have achieved what I want in <strong>Firefox</strong>. This is based on Olegs (and others) excellent posts on the topic.</p>\n\n<p>Howevever, in <strong>IE9</strong>, although it sets focus as required, it also fires the datepicker in the first cell.</p>\n\n<p>I understand that by default the jqGrid automatically moves to the first cell, therefore firing the datepicker if it exists, regardless of whether I double clicked it. Maybe as a workaround I will need to create some kind of tiny dummy cell in the first position, but first I would like to take this opportunity to learn more.</p>\n\n<p>Here is some abbreviated jqGrid code, you will recognise bits and pieces from Oleg and other peoples posts. Sorry I cannot give you the exact version of jqGrid at this point, suffice to say I downloaded it early October 2012.</p>\n\n<p>I'll just say I don't fully understand the event order that is gong on - on first glance it appears that the datepicker is being attached(?) <em>before</em> the clicked field is getting focus anyway.</p>\n\n<p>As an aside this is inside a MVC ASP.Net project. I find it amusing and ironic that the only way I can get a useful grid control in MVC / ASP.Net is to start learning Javascript.</p>\n\n<pre><code>$(document).ready(\n    function () {\n        var lastsel;\n        $(\"#ts\").jqGrid({\n            //=============\n            // Grid Setup\n            url: 'Timesheet/GridData/',\n            datatype: 'json',\n            mtype: 'GET',\n            colNames: ['Date', 'Customer', 'Project', 'Description', 'Hours', '$'],\n            colModel: [\n              { name: 'tsdate', index: 'tsdate', width: 80, editable: true },\n              { name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: \"select\", editoptions: { dataUrl: 'Timesheet/CustomerList'} },\n              { name: 'Project', index: 'Project', width: 250, align: 'left', editable: true, edittype: \"select\", editoptions: { dataUrl: 'Timesheet/ProjectList'} },\n              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },\n              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },\n              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: \"0:1\" }, formatter: \"checkbox\", formatoptions: { disabled: false }, editable: true }\n            ],\n            //=============\n            // Grid Events\n            // when selecting, undo anything else\n            onSelectRow: function (rowid, iRow, iCol, e) {\n                if (rowid &amp;&amp; rowid !== lastsel) {\n                    $('#ts').jqGrid('restoreRow', lastsel);\n                    lastsel = rowid;\n                }\n            },\n            // double click to edit\n            ondblClickRow: function (rowid, iRow, iCol, e) {\n                // Go into edit mode (automatically moves focus to first field)\n                $('#ts').jqGrid('editRow', rowid, true, onGridEdit);\n                // Now set focus on selected field\n                if (!e) e = window.event; // get browser independent object\n                var element = e.target || e.srcElement\n                $(\"input, select\", element).focus();\n            },\n            postData:\n                {\n                    startDate: function () { return $('#startDate').val(); }\n                }\n        }); // END jQuery(\"#ts\").jqGrid\n\n        // This is called when the row is double clicked\n        function onGridEdit(RowID) {\n            // onGridEdit is attached as the 'edit function' in the call to .jqGrid('editRow' above\n            // Attach the datepicker to the tsdate field. For some reason this needs to be in the edit function\n            // And does not work in IE 9. In IE9 it fires the datepicker. In Firefox it only fires when the field\n            // gets the focus\n            $(\"#\" + RowID + \"_tsdate\").datepicker({ dateFormat: 'yy-mm-dd' });\n        }\n\n    });           // END $(document).ready\n</code></pre>\n\n<p><strong>SOLUTION</strong> when comparing debugging between Firefox and IE9 it appeared that the firefox events ran sequentially and the the IE9 ones did not.</p>\n\n<p>Regardless, the final solution as suggested by Oleg was to wrap the oneditfunc function in a setTimeout function:</p>\n\n<pre><code>            ondblClickRow: function (rowid, iRow, iCol, e) {\n                if (!e) e = window.event; //evt evaluates to window.event or inexplicit e object, depending on which one is defined\n                var element = e.target || e.srcElement\n\n                // Go into edit mode (automatically moves focus to first field)\n                $(this).jqGrid(\n                    'editRow',\n                    rowid,\n                    {\n                        keys: true,\n                        oneditfunc: function (rowId) {\n                            setTimeout(function () {\n                                $(\"input, select\", element).focus();\n                                $(\"#\" + rowId + \"_tsdate\").datepicker({ dateFormat: 'yy-mm-dd' });\n                            }, 50);\n                        }\n                    }\n                ); // end jqGrid call\n\n            },  // end ondblClickRow event handler\n</code></pre>\n"},{"tags":["c#","sql","asp.net-mvc","video","flowplayer"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":12873954,"title":"How to return video (flv) path to display in flowplayer?","body":"<p>I would like to integrate flowplayer in ASP mvc 3 application.\nI'm using SQL Server 2008. Database contains path to files as well which are stored in folder. I wrote library which is able to convert video to flv. Now i would like to use this video in page. </p>\n\n<p>Does anyone have knowledge how to implement that?</p>\n\n<p>I found the flowplayer sample code.</p>\n\n<p><a href=\"http://flowplayer.org/docs/\" rel=\"nofollow\">http://flowplayer.org/docs/</a></p>\n\n<p>But I'm looking for codebehind solution (C#) how to implement something like that (how to return path to video).\nIf anyone have some code I'll be grateful for help.</p>\n\n<p>Please take a look.</p>\n\n<pre><code>    public string FindMusicByID(int musicID)\n    {\n        var pathh = from plik in _data.musicMusicTables\n                    where plik.musicMusicID == musicID\n                    select new PathToFile { PathFile = plik.musicMusicPath };\n        return pathh.ToString();\n    }\n</code></pre>\n\n<p>This is the linq part code which i'm using. FindMusicByID(int musicID) return path to .flv file. I'm looking for how to send output filepath to webpage. I would like to use this path in flowplayer.</p>\n\n<p><code>&lt;div class=\"flowplayer\" data-engine=\"flash\"&gt; &lt;video src=\"some path\"&gt;&lt;/video&gt;\n</code> </p>\n\n<p>Fox example this is my ouptut path d:\\file.flv</p>\n\n<p>I suppose that it's necessary to send output to JavaScript.\nHow can i insert path into flowplayer by ID?</p>\n"},{"tags":["asp.net-mvc","visual-studio","dhtmlx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13117190,"title":"How to deactivate dhtmlx tab,when click on the second time","body":"<p>I am using DHTMLX tabs, in my case, initially my tab is in <code>InActive</code> state. When user clicked initially the tab comes to <code>Active</code> and loading the content using <code>setContentHref()</code>.</p>\n\n<p>Again if I click on the same tab for second time I don't want to display the content and the tab comes to initial state.</p>\n\n<p>For this I have implemented like</p>\n\n<pre><code>tabbar.attachEvent(\"onTabClick\", function (id, prevId) {\n                    alert(id); alert(prevId);\n                    if (id == prevId) {\n                       tabbar.setTabInActive(id);\n                       return true;\n                    }\n                });\n</code></pre>\n\n<p>but the tab does not come into the <code>InActive</code> state. Can you tell me how to do this?</p>\n"},{"tags":["javascript","asp.net-mvc","grid","telerik-grid","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2900,"score":0,"question_id":10977144,"title":"Kendo UI MVC Grid double click","body":"<p>I'm currently testing the Kendo UI MVC Extensions Beta.\nI'm trying to implement a double click - edit but i don't know how i can get the rowId.\nJS:</p>\n\n<pre><code>$('#GridPedidos table tr').live('dblclick', function () {\n    alert(' grid dbl clicked');\n});\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@(Html.Kendo().Grid(Model) _\n.Name(\"GridPedidos\") _\n    .Columns(Sub(column)\n                 column.Bound(Function(item) item.idPedidoDocumentacao).Width(\"5%\")\n                 column.Bound(Function(item) item.descEstadoPedidoDoc).Width(\"25%\")\n                 column.Bound(Function(item) item.descTipoPedidoDoc).Width(\"25%\")\n                 column.Bound(Function(item) item.data).Width(\"25%\").Format(\"{0:dd-MM-yyyy}\")\n                 column.Command(Function(item) item.Destroy()).Width(\"10%\")\n             End Sub) _\n    .DataSource(Sub(ds)\n                    ds.Ajax().ServerOperation(False).Read(Sub(s)\n                                                              s.Action(\"GetListaGrid\", \"listaPedidos\")\n                                                          End Sub).Create(Sub(s)\n                                                                              s.Action(\"detalhePedido\", \"Pedidos\")\n                                                                          End Sub).Model(Sub(m)\n                                                                                             m.Id(Function(p) p.idPedidoDocumentacao)\n                                                                                         End Sub).Destroy(Sub(d)\n                                                                                                              d.Action(\"apagaPedido\", \"listaPedidos\")\n                                                                                                          End Sub)\n                End Sub) _\n    .Selectable()\n)\n</code></pre>\n\n<p>i can detect the double click with this function, but how do i get the id?</p>\n"},{"tags":["asp.net-mvc","membership-provider","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":307,"score":1,"question_id":12843022,"title":"ASP.NET simple membership provider?","body":"<p>I opened Asp.Net Mvc 4 Internet App. template. And I set connection string for my database like this:</p>\n\n<pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"DefaultConnection\" connectionString=\"Data Source=ALI-PC\\;Initial Catalog=OsosPlusDb;Persist Security Info=True;User ID=sa;Password=sa;\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I run project, click register button. I created a new user like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Gagaf.png\" alt=\"enter image description here\"></p>\n\n<p>When I click register to post I get this error:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Ju89m.png\" alt=\"enter image description here\"></p>\n\n<p>But it creates a new user in DB and it does not create membership_user (Membership table is not contain added user info):</p>\n\n<p><img src=\"http://i.stack.imgur.com/mp32Y.png\" alt=\"enter image description here\"></p>\n\n<p>I cant find What is the problem. Sometimes there is no error occured.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>And Exception Snapshot:</p>\n\n<p><img src=\"http://i.stack.imgur.com/CDsgG.png\" alt=\"enter image description here\"></p>\n\n<p>AcoountModel:</p>\n\n<pre><code>public class UsersContext : DbContext\n{\n    public UsersContext()\n        : base(\"DefaultConnection\")\n    {\n    }\n\n    public DbSet&lt;UserProfile&gt; UserProfiles { get; set; }\n}\n\n[Table(\"UserProfile\")]\npublic class UserProfile\n{\n    [Key]\n    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]\n    public int UserId { get; set; }\n    public string UserName { get; set; }\n}\n</code></pre>\n\n<p><strong>InitializeSimpleMembershipAttribute.cs</strong></p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute\n{\n    private static SimpleMembershipInitializer _initializer;\n    private static object _initializerLock = new object();\n    private static bool _isInitialized;\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        // Ensure ASP.NET Simple Membership is initialized only once per app start\n        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);\n    }\n\n    private class SimpleMembershipInitializer\n    {\n        public SimpleMembershipInitializer()\n        {\n            Database.SetInitializer&lt;UsersContext&gt;(null);\n\n            try\n            {\n                using (var context = new UsersContext())\n                {\n                    if (!context.Database.Exists())\n                    {\n                        // Create the SimpleMembership database without Entity Framework migration schema\n                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();\n                    }\n                }\n\n                WebSecurity.InitializeDatabaseConnection(\"DefaultConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n            }\n            catch (Exception ex)\n            {\n                throw new InvalidOperationException(\"The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588\", ex);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>LAST EDIT AND SUMMARY</strong></p>\n\n<p>Problem is character (\"i\"). If I dont use \"i\" everything is okay. But When I use it I got that error. How Can I fix this problem.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","email","asynchronous"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13155033,"title":"Async method takes about same response time as sync method for System.Net.Mail.SmtpClient?","body":"<p>We're sending an email out when a particular MVC controller method is called. The code is as below. When benchmarking the AJAX response time inside a browser we see that the <code>client.SendAsync(mail, null)</code> and <code>client.Send(mail)</code> implementations BOTH take about the same time i.e. 1.8 seconds as compared to not sending the mail at all. </p>\n\n<pre><code>public ActionResult jsonPosted(int? id, SomeDataClass data)\n{   \n    ...\n\n    // NOTE: remode 'using' statement for Async calls\n    // else no email ever sees light\n    using (SmtpClient client = new SmtpClient())\n    {       \n        client.UseDefaultCredentials = false;\n        client.Credentials = new NetworkCredential(\"name@server.com\", \"password\");\n        client.Port = 587;\n        client.Host = \"smtp.server.com\";\n        client.EnableSsl = true;\n\n        MailMessage mail = new MailMessage();\n        mail.From = new MailAddress(\"admin@server.com\");\n        mail.To.Add(\"sales@server.com\");\n        mail.Subject = \"Coming soon: user \" + newUser.Email + \" registered on list\";\n        mail.Body = \"Email address is : \" + newUser.Email + \"\\n\";\n        mail.Body += \"Date of signup is : \" + newUser.SignupTime.ToString();\n\n        try\n        {\n            // Both take about 1.9 seconds ?!?!\n            //client.SendAsync(mail, null);\n            client.Send(mail);\n        }\n        catch (SmtpException e)\n        {\n            // bad smtp, no mail for you\n        }\n    }\n    ...\n    return Json(dataIndependentOfEmail);\n}\n</code></pre>\n\n<p>Question:</p>\n\n<ol>\n<li>Why do the two methods take the same time? Async should return immediately while Sync should block for the entire processing time, right? As I understand Async consumes another thread and THAT thread blocks during work. However at least the user on the 1st thread should see a performance boost.</li>\n<li>How does one properly use <code>using</code> to dispose off classes like <code>SmtpClient</code> and <code>MailMessage</code> in async mode?</li>\n</ol>\n"},{"tags":["asp.net-mvc","wurfl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13154571,"title":"Force wurlf to load normal layout instead of mobile","body":"<p>On an asp.net mvc 4 website, some pages have also a mobile view, for example Index.cshtml and Index.mobile.cshtml. Also two layouts: _Layout.cshtml and _Layout.Mobile.cshtml.</p>\n\n<p>I am using Wurlf to differentiate from mobile and desktop using the capability \"is_wireless_device\". Now on mobile access, always the mobile layout is loaded. But on some pages I want to load the default content ( I mean the normal layout, _Layout.cshtml ) instead of trying to load the mobile layout, even on mobile devices. How can I achieve this ? </p>\n\n<p>In Global.asax I have now:</p>\n\n<pre><code>        LoadWurflData(Context.Cache);\n\n        DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode(\"mobile\")\n        {\n            ContextCondition = (context =&gt;\n            {\n                var manager = (context.Cache[WurflManagerCacheKey] as IWURFLManager);\n                if (manager == null)\n                {\n                    manager = CreateWurflManager(context.Cache);\n                }\n                if (manager == null || context == null || context.Request == null)\n                {\n                    return false;\n                }\n                var cabablities = manager.GetDeviceForRequest(context.Request.UserAgent);\n                return cabablities.GetCapability(\"is_wireless_device\") == \"true\";\n            }\n            )\n        });\n    public static void LoadWurflData(System.Web.Caching.Cache cache)\n    {\n        var configurer = new ApplicationConfigurer();\n        var manager = WURFLManagerBuilder.Build(configurer);\n        cache[WurflManagerCacheKey] = manager;\n    }\n\n    public static IWURFLManager CreateWurflManager(System.Web.Caching.Cache cache)\n    {\n        var configurer = new ApplicationConfigurer();\n        var manager = WURFLManagerBuilder.Build(configurer);\n        cache[WurflManagerCacheKey] = manager;\n\n        return manager;\n    }\n</code></pre>\n\n<p>Thanks a lot.</p>\n"},{"tags":["jquery",".net","asp.net-mvc","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13154329,"title":"Binding Image src as Expression in Knockout","body":"<p>Please bear with me, if you find this question so stupid. I am a beginner to knockout and trying to learn it.</p>\n\n<p>I want to bind image source to an expression. The expression is responsible to generate a path and that path must be applied as the Source to the img.</p>\n\n<pre><code>&lt;ul id='AllPatient' data-role='listview' data-inset='true' data-bind=\"foreach:Patients\"&gt;\n            @*&lt;li&gt;&lt;span data-bind=\"text: ko.toJSON($data)\"&gt;&lt;/span&gt;&lt;/li&gt;*@\n            &lt;li&gt;\n                &lt;table class=\"Tabular\"&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"DataCell\"&gt;\n                            &lt;a href=\"javascript:\" id=\"pLocation\" sortorder=\"none\"&gt;&lt;span data-bind=\"text:$data.UnitName\"&gt;\n                            &lt;/span&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                        &lt;td class=\"DataCellImage\"&gt;\n                            &lt;a href=\"javascript:\" id=\"addPatient\" sortorder=\"none\" data-bind=\"click:$root.addPatient\"&gt;\n                                &lt;img data-bind=\"attr:{src: $root.ImageSource}\" src=\"~/Content/Images/MPL/PersonAdd.png\" /&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n</code></pre>\n\n<p>I am using following databinding ViewModel:</p>\n\n<pre><code>function PatientsModel(data)\n{\n    var self = this;\n\n    self.Patients = ko.observableArray([]);\n\n    self.Patients(data.Patients);\n    self.ImageSource = function (model)\n    {\n        if (model.myPatient == true)\n        {\n            return PyxisLinkJS.RootURL + '/Content/Images/MPL/MyPatientGray.png';\n        }\n        else if (model.localPatient == true)\n        {\n            return PyxisLinkJS.RootURL + '/Content/Images/MPL/PersonAdd.png';\n        }\n        else\n        {\n            return PyxisLinkJS.RootURL + '/Content/Images/MPL/MyPatientGray.png';\n        }\n    }\n}\n</code></pre>\n\n<p>This is what happening: It is trying to set function body of ImageSource as the src for the Image. Where as I want to trigger the method ImageSource and set the return value as the Src of the Image.</p>\n\n<p>Regards,\nSumeet</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","datetime"],"answer_count":5,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":11284,"score":8,"question_id":7124434,"title":"Display only date and no time. C#","body":"<p>In MVC razor, I am putting current date in the database like this..</p>\n\n<pre><code>   model.Returndate = DateTime.Now.Date.ToShortDateString();\n</code></pre>\n\n<p>Since the database field is a datetime datatype and I am converting the current date to string format, this is not working.. how can I do this? I am doing the string format because I want the date in mm/dd/yyyy format and not in mm/dd/yyyy hh:mm:ss time format..</p>\n\n<p>EDIT:</p>\n\n<p>In the controller I have </p>\n\n<pre><code>        var model = new ViewModel();\n        model.ReturnDate = DateTime.Now;            \n        return PartialView(\"PartialView\", model);  \n</code></pre>\n\n<p>In the partialview, I have </p>\n\n<pre><code>   @Html.EditorFor(model =&gt; model.Returndate)\n</code></pre>\n\n<p>This is where its displaying the date as Date and Time together... I want just the date to be displayed. Not the time. I hope this edit explains better.</p>\n"},{"tags":["asp.net","asp.net-mvc","login","web-config","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13153857,"title":"Multiple applications with membership and same applicationName","body":"<p>My problem is the same that:\n<a href=\"http://stackoverflow.com/questions/2454623/multiple-applications-using-same-login-database-logging-each-other-out\">Multiple applications using same login database logging each other out</a></p>\n\n<blockquote>\n  <p>I've set up two ASP.NET applications on a machine, their web.config\n  files contain the same applicationName value in\n  AspNetSqlMembershipProvider item so they share users and roles.</p>\n  \n  <p>The problem sequence is:</p>\n  \n  <p>user logs into application A, opens new tab in a browser logs into\n  application B, his login in application A is signed out and vice\n  versa.</p>\n  \n  <p>Should I use a different approach to sharing login information between\n  two applications?</p>\n</blockquote>\n\n<p>The problem is that the solution, only avoid signed out beetween applications, but the applications do not share users logins.\nI want that.</p>\n\n<ul>\n<li>User logs into application A</li>\n<li>He opens new tab and goes to application B --> User is logged into application B because he was logged in A.</li>\n<li>And vice versa</li>\n</ul>\n\n<p>How can i make this?</p>\n"},{"tags":["javascript","asp.net-mvc","jquery-ajax","razor","submit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13126092,"title":"ASP.NET MVC Submit form calls a javascript function of another submit form","body":"<p>big problem here! I know the title is kinda fuzzy, but it's all day long I've got this problem and cannot figure out how to solve it.\nI'll try to be the more specific in the less messy way.\nLong story short, I have a Controller (LeadController) with a method (Search) for a search:</p>\n\n<pre><code> public ActionResult Search(string prov = null, string city = null)\n    {\n        //if no field is compiled, return an empty view\n        if (String.IsNullOrWhiteSpace(prov) &amp;&amp; String.IsNullOrWhiteSpace(city))\n            return View();\n\n        var leads = from l in db.Leads\n                    select l;\n\n        if (!String.IsNullOrWhiteSpace(prov))\n        {\n            leads = leads.Where(l =&gt; l.Prov == prov).OrderBy(l =&gt; l.RagioneSoc);\n        }\n\n        if (!String.IsNullOrWhiteSpace(city))\n        {\n            leads = leads.Where(l =&gt; l.Comune == city).OrderBy(l =&gt; l.RagioneSoc);\n        }\n\n        return View(leads);\n    }\n</code></pre>\n\n<p>Then I have the Search View (displaying the fields to fill for the search AND the result after the post action) with 2 submit forms: the first one to execute the search</p>\n\n<pre><code>@using (Html.BeginForm()){\nSigla Provincia: @Html.TextBox(\"prov\", null, new { @style = \"width: 50px;\"})\nCittà: @Html.TextBox(\"city\", null, new { @style = \"width: 150px;\" })\n&lt;input type=\"submit\" value=\"Ricerca\" data-icon=\"search\" data-role=\"button\" data-mini=\"true\" data-inline=\"true\" /&gt;}\n</code></pre>\n\n<p>and the 2nd one to generate a document from the leads result of the search action</p>\n\n<pre><code>&lt;input type=\"submit\" title=\"create doc\" value=\"Create document\" onclick=\"javascript:postData()\" id=\"doc\" /&gt;\n</code></pre>\n\n<p>This last submit should call a javascript function to encode the model:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction postData() {\n    var urlact = '@Url.Action(\"createDoc\")';\n    var model = '@Html.Raw(Json.Encode(Model))';\n\n    $.ajax({\n        ...\n        ...\n    });\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Now, the problem is: when I call the first submit, the one which should execute the research, it performs the research but it also keeps going on, calling the <em>postData()</em> javascript function (even if I never \"tell\" him to do that). And the site stop working in <strong>var model = @Html.Raw(Json.Encode(Model))';</strong>, with an InvalidOperationException.</p>\n\n<p>If someone understood my question, is there a way to avoid this behaviour and to force the 1st submit only to pass the controller the parameters to execute the search action?</p>\n\n<p>Hope someone can help me,\nthank you in advance for your consideration!</p>\n\n<hr>\n\n<p>SOLVED</p>\n\n<p>Well, the problem is gone. Apparently, I didn't know so well the View &amp; Javascript behaviour. Long story shirt, it seems the View, loading itself, enters the js function in order to kind of cache the Model encoding, but it doesn't fully runs the function! And I had a problem within the interested Model.\nI don't know if I explained myself, but the warning is: be careful for your Model consistency before doing anything else.\nThanks to anyone who helped me, before I realized I get it totally wrong!</p>\n"},{"tags":["asp.net-mvc","phonegap","jquery-mobile","mobile-website"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":13147404,"title":"Converting a regular MVC site for use in phonegap","body":"<p>I have a site that's done using ASP.NET MVC and jQuery. Is it possible to modify my existing project without too much of rework so that it can be used in phonegap to create iphone/android apps? </p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13144850,"title":"asp.net mvc inject js code into Razor","body":"<p>How I can do it?</p>\n\n<pre><code>$for (var i = 0; i &lt; model.CategoryList.length; i++) {\n   var text = model.CategoryList;\n   categories += '&lt;span class=\"label label-info\"&gt;' + @((AgesCategory)int.Parse( ..... )).GetDescription() + '&lt;/span&gt;';\n }\n</code></pre>\n\n<p>I need replace <strong>int.Parse( ..... ))</strong> to <strong>int.Parse(model.CategoryList[i])</strong> from JS code. I can't add <strong>text</strong> variable into <strong>int.Parse( ... )</strong> intellisense detected this code like c# code, not JS.</p>\n\n<p><strong>update:</strong> </p>\n\n<p>I'll try reformulate my question: How I can set value C# variable from JS variable?</p>\n\n<pre><code>&lt;script&gt;\n    var temp1 = 1;   // js var\n    @{ string temp2 = 0 ;}  // c# var\n    @{ temp2 = temp1 } // how do it?\n    var temp2 = @(((MyEnumType)int.Parse(temp2).GetEnumDescription()));  //js var\n&lt;/script&gt;\n</code></pre>\n\n<p>what need use? '@:' or something else? In all case I get syntax error</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13153322,"title":"Changing LinqDataSource with Button clcik","body":"<p>I have a GridView on my asp page. I want to change the LinqDataSource with a button click. it's because i have 2 database views and you have to be able to see one of these to views as you wish. My problems is nothing happens when i try to bind the GridView to any of my LinqDataSource'.</p>\n\n<p>My C# code:</p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n    this.Grid.DataSource = lqds_Grid1;\n    this.Grid.DataBind();\n}\n\nprotected void Button1_Click(object sender, EventArgs e)\n{\n    if (this.Grid.DataSource == lqds_Grid1)\n    {\n        this.Grid.DataSource = lqds_Grid2;\n        this.Grid.DataBind();\n    }\n    else\n    {\n        this.Grid.DataSource = lqds_Grid1;\n        this.Grid.DataBind();\n    }\n}\n</code></pre>\n\n<p>my asp code:</p>\n\n<pre><code>&lt;%@ Page Title=\"Home Page\" Language=\"C#\" MasterPageFile=\"~/Site.master\" AutoEventWireup=\"true\"\n    CodeBehind=\"Default.aspx.cs\" Inherits=\"AddressReporting._Default\" %&gt;\n\n&lt;asp:Content ID=\"HeaderContent\" runat=\"server\" ContentPlaceHolderID=\"HeadContent\"&gt;\n&lt;/asp:Content&gt;\n&lt;asp:Content ID=\"BodyContent\" runat=\"server\" ContentPlaceHolderID=\"MainContent\"&gt;\n    &lt;asp:LinqDataSource ID=\"lqds_Grid1\" runat=\"server\" \n        ContextTypeName=\"AddressReporting.MobileGateway\" EntityTypeName=\"\" \n        OrderBy=\"AdrID, Country\" TableName=\"BarcodeWithLocation\"&gt;\n    &lt;/asp:LinqDataSource&gt;\n    &lt;asp:LinqDataSource ID=\"lqds_Grid2\" runat=\"server\" \n        ContextTypeName=\"AddressReporting.MobileGateway\" EntityTypeName=\"\" \n        OrderBy=\"AdrID, Country\" TableName=\"BarcodeWithLocationSorted\"&gt;\n    &lt;/asp:LinqDataSource&gt;\n    &lt;asp:GridView ID=\"Grid\" runat=\"server\" AllowPaging=\"True\" \n        AutoGenerateColumns=\"False\" Height=\"217px\" Width=\"268px\"&gt;\n&lt;/asp:GridView&gt;\n    &lt;asp:Button ID=\"Button1\" runat=\"server\" onclick=\"Button1_Click\" Text=\"Button\" /&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>Can anyone tell me what i am doing wrong ?</p>\n"},{"tags":["sql-server","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13146288,"title":"Month and Year Part from GetDate","body":"<p>I am using a gridview in my asp.net application in which i want to limit the dataset to requests that are submitted in the current month and year</p>\n\n<p>Iam new to application development and thinking in the below way</p>\n\n<p>to get the month and year part from the getdate() function and then compare it with the month and year of the receiveddate column in our table in the where condition</p>\n\n<p>My select statement would be like below</p>\n\n<p>select requestno,receiveddate,businessneed from customerrequests\nwhere receiveddate = getdate()</p>\n\n<p>in the above sql statement how do i acheive </p>\n"},{"tags":["c#","asp.net-mvc","linq-to-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13141603,"title":"dropdownlist value","body":"<p>I have the following code populate for dropdownlist. Is there any way i can add an item called \"Select Value\" in the following     </p>\n\n<pre><code>private void PopulateCustStatus()\n{\n     ViewData[\"custStatus\"] = new HEntities().COptions\n         .Select(e =&gt; new ConfOptModel\n             {\n                 OptID = e.OptID,\n                 OptName = e.OptName,\n                 ConfigTypeID = e.ConfigTypeID\n             })\n         .Where(e =&gt; e.ConfigTypeID == 2)\n         .OrderBy(e =&gt; e.OpName);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","report","charts"],"answer_count":5,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1971,"score":8,"question_id":2804134,"title":"Is there a free chart report tool on ASP.NET MVC?","body":"<p>Can anyone recommend a free tool for generating Charts compatible with ASP.NET MVC?</p>\n"},{"tags":["asp.net-mvc","twitter-bootstrap","shopify","kentico","stripe-payments"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13144833,"title":"Include Shopify & Stripe within an ASP.NET MVC web app","body":"<p>Are there any clear, step by step tutorials explaining how to include my shopify store that is already using Stripe into an MVC application for an ecommerce site using Kentico CMS?  </p>\n\n<p>Is it as simple as using JSON to call the Shopify API?  I know you need to use liquid within the views, but can this be combined with Razor?  I be using Kentico CMS which I hear is now workable with MVC, but very buggy (maybe this is fixed int he newer version??). Also - I am a huge fan of Twitter bootstrap's scaffolding and plugins as well as .less files.  I've used it within mvc applications, and I'm assuming it would work within kentico and/or liquid , but was just wondering if anybody had tried using twitter bootstrap within a liquid page or integrated with Kentico.  I'm assuming it would play nicely with kentico since it's just css and scripts.</p>\n\n<p>Basically, my issues are</p>\n\n<ul>\n<li>Is Kentico CMS a suitable CMS to use with .NET MVC?  If not, what about N2, or other CMS for .net?</li>\n<li>Can liquid code be used alongside razor code?</li>\n<li>How difficult is it to use or integrate a shopify page in a .net mvc view?</li>\n<li>Has anybody had experience using Twitter Bootstrap within a liquid page or within Kentico?</li>\n</ul>\n\n<p>I can find bits and pieces of this information, but I was just hoping that somebody out there had documented this already.  Any links or tips would be appreciated. Thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13151187,"title":"ValidationMessage is showing on initial GET method","body":"<p>I am working on an MVC 4 project that is constantly showing the ValidationMessage even on a simple GET method that does no validation or model binding of complex types:</p>\n\n<pre><code>//location/{locationId}/announcement\n[HttpGet]\npublic ActionResult LocationMakeAnnouncement(int locationId)\n{\n    var pageViewModel = this.BuildLocationMakeAnnouncementViewModel(locationId);\n    return View(pageViewModel);\n}\n</code></pre>\n\n<p>The <code>BuildLocationMakeAnnouncementViewModel</code> only builds up the ViewModel and doesn't touch the ModelState.</p>\n\n<p>Then on the view I have:</p>\n\n<pre><code>&lt;span class=\"errorArea\"&gt;@Html.ValidationMessage(\"ProductText\", \" \", new { @class = \"inputErrorIcon\" })&lt;/span&gt;\n</code></pre>\n\n<p>Which emits:</p>\n\n<pre><code>&lt;span class=\"errorArea\"&gt;&lt;span class=\"field-validation-valid inputErrorIcon\" data-valmsg-for=\"ProductText\" data-valmsg-replace=\"false\"&gt; &lt;/span&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Outputting the ModelState shows that it does not have any errors</p>\n\n<pre><code>@ViewData.ModelState.Values.Any(x =&gt; x.Errors.Count &gt;= 1)\n</code></pre>\n\n<p>Why would ValidatioMessage output the  when there are no errors?</p>\n\n<p>ANY suggestions?</p>\n"},{"tags":["asp.net-mvc","ajax","asp.net-mvc-2","internet-explorer-8","innerhtml"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":551,"score":4,"question_id":3324474,"title":"asp.net mvc - MicrosoftMvcAjax.js throws javascript error when updating table elements in IE8","body":"<p>In IE8 or anything older, innerHTML is not supported on certain elements like TR &amp; TD. Unfortunately, the MicrosoftMvcAjax.js file included in the MVC 2 project uses innerHTML for the Ajax update method within the Ajax.BeginForm or Ajax.ActionLink.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13151359,"title":"How to check Unique attribute in mvc 3?","body":"<p>I have a textbox for username in a form, when user enter the username, i need to check if that username is already in data base. I'm thinking to catch the blur event of the text box &amp; to write a javascript function to query &amp; check in database. I'm trying some thing like this:</p>\n\n<pre><code>@html.textboxfor(x=&gt;x.UserName, new{@id=\"UserName\"})\n\n&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function(){$('#UserName').blur(\"then some code here\");})\n\n&lt;/script&gt;\n</code></pre>\n\n<p>Now I need to know if I'm following the right way? If so then please let me know how can I call a action method which will interact with the database within the blur function or whats the right way? Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13093839,"title":"Add/pass new field to MVC Membership CreateUser","body":"<p>Developing MVC4 app and using Register that comes with MVC5 framework.\nI did update register.cshtml and add a new column called language\nI also did update RegisterModel class to hold my value.\nRegister model has all the values including my property(language).</p>\n\n<p>Now I like to grab this values from Register Model and plug into CreateUser</p>\n\n<p>MyProperty is model.Language</p>\n\n<p>publıc ActıonResults Regıster(RegisterModel model)\nMembership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, Guid.NewGuid(), out status)</p>\n\n<p>What would be the best way to grab this value and store in database.\nWhere can I store. I really like to store in Users Table where UserID and UserName exists  </p>\n"},{"tags":["javascript","asp.net-mvc","mobile-safari"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2880,"score":0,"question_id":4444473,"title":"$(window).height() not working in iPad fullscreen web app","body":"<p>I'm working on a web application that is nicely displayed in mobile Safari for iPad. </p>\n\n<p>It eventually plays well when a shortcut is saved to the springboard, having put together the right metatags for displaying a springboard icon, splash screen and so on.</p>\n\n<p>Unfortunately the app uses <code>$(window).width()</code> and <code>$(window).height()</code> and often (not always, and no, I cannot say when, I'm going crazy about that) the <code>$(window).height()</code> invocation returns 0. </p>\n\n<p>I have to know the size for setting images width and height dynamically according to the viewport size and orientation. The application also use jQuery-ui and jQGrid and, when the height evaluates to 0, they both break. </p>\n\n<p>The jq-ui dialogs displayed on top of the screen instead of in the middle, and the tables are not displaying correctly either.</p>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":13150096,"title":"Using Javascript Ajax call to call MVC action to download object","body":"<p>Ive created a simple MVC controller action that creates a simple ics (calendar) item and sends it back through the controller action. As follows:</p>\n\n<pre><code>    public object GenerateICS(int myID)\n    {\n        iCalendar iCal = new iCalendar();            \n         Event evt = iCal.Create&lt;Event&gt;();\n        Uri eventLink = new Uri(\"http://localhost:\");\n        evt.IsAllDay = false;\n\n       evt.Start = new iCalDateTime(DateTime.Now);\n       evt.End = new iCalDateTime(DateTime.Now.AddDays(3));\n\n       evt.Summary = \"MySummary\";\n       evt.Url = eventLink;\n       evt.Description = \"You know it\";         \n\n      Response.ContentType = \"text/v-calendar\";\n      Response.AddHeader(\"content-disposition\", \"attachment; filename=\" + \"Event\" + \".ics\");\n      iCalendarSerializer serializer = new iCalendarSerializer(iCal);\n      string result = serializer.SerializeToString(iCal);\n      Response.Write(result);          \n        return Response;\n    }\n</code></pre>\n\n<p>So with the website running, if I go to:</p>\n\n<pre><code>http://localhost:21312/GenerateICS?myID=1 \n</code></pre>\n\n<p>This will generate the ics file server side and pass it back to the client, so your receive a \"Do you want to open blah.ics from localhost?\". This is perfectly what I want.</p>\n\n<p>My issue is how do I achieve exactly the same by executing it from javascript. I have the following ajax call:</p>\n\n<pre><code> $.ajax({\n                url: \"app/GenerateICS\",\n                data: { myID: 1 },\n                success: function (data) {\n                    //call is successfully completed and we got result in data\n                    alert(data);\n                },\n                error: function (xhr, ajaxOptions, thrownError) {\n                    //some errror, some show err msg to user and log the error  \n                    alert(xhr.responseText);\n\n                }\n            });\n</code></pre>\n\n<p>This executes the mvc controller perfectly. But it returns the ics response to the success function. How do I call the controller with ajax but have it so the file is downloaded as I describe how it does when you manually do it?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","security","authorization"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":200,"score":2,"question_id":8222258,"title":"How do you restrict certain HTML elements to certain roles using ASP.NET MVC?","body":"<p>I'm looking for the standard practice in specifying that a certain HTML element, like a \"Create user\" button should only be displayed when the user is logged-in and belongs to the role \"Administrator.\"</p>\n\n<p>For example, using Spring MVC in Java, the Spring Security tag library has a control that does just that:</p>\n\n<pre><code>&lt;sec:authorize access=\"hasRole('ROLE_PRESIDENT')\"&gt;\n    &lt;input type=\"button\" value=\"Launch nuclear weapons\"/&gt;\n&lt;/sec:authorize&gt;\n</code></pre>\n\n<p>Whatever appears between the tags will only display when the user belongs to the role specified.</p>\n\n<p>Does ASP.NET MVC have such feature?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iis","http-headers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":8230001,"title":"How to change headers for specific types of files served in ISS / MVC","body":"<p>I am implementing a fix for the problem caused by 02 compression issues over 3G.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3282373/web-site-exhibits-javascript-error-on-ipad-iphone-under-3g-but-not-under-wifi\">Web site exhibits JavaScript error on iPad / iPhone under 3G but not under WiFi</a></p>\n\n<p>The best solution seems to be <a href=\"http://stuartroebuck.blogspot.com/2010/08/official-way-to-bypassing-data.html\" rel=\"nofollow\">http://stuartroebuck.blogspot.com/2010/08/official-way-to-bypassing-data.html</a> which is basically to add the header <code>Cache-Control: no-transform</code> in ISS, however I would like to apply this only to specific file types. What is the easiest way to do this? </p>\n"},{"tags":["asp.net-mvc","user-interface","razor","kendo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":177,"score":-1,"question_id":13116084,"title":"Kendo UI Hierarchial Grid using MVC Razor","body":"<p>I have a parent grid \"Grid1\" which has a child grid \"Grid2\" which has checkboxes as its first columns. In the child grid, there is a sub child \"Grid3\" which also has some checkboxes as its First column.So the functionality is to save the selected parent, with its child and its multiple selected sub-child by checking the checkboxes on the button click. </p>\n\n<p>Now I am facing the following problems:</p>\n\n<ol>\n<li><p>While saving the data I have to parse the HTML of the grid to read the selected records using jquery, the following is the code  for this  :</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n\n    $(\"#mysaveButton1\").live(\"click\", function () {\n    debugger;\n    var tr = $(this).siblings(0).find(\"table &gt; tbody &gt; tr.k-master-row\");\n    var selectedFeatureList = [];\n    var i = 0;\n    tr.each(function () {\n         debugger;\n        var isExpanded = false;\n        var roleId = tr[i].cells[6].innerHTML;\n        var roleFeatureId = tr[i].cells[5].innerHTML;\n        var className = tr[i].cells[0].children[0].className;\n        var selectedFeatureActionList = [];\n        if (className == \"k-icon k-plus\") {\n            isExpanded = false;\n        } else {\n            isExpanded = true;\n            //logic to fetch second child table\n            var secondGridtbodys = $(this).siblings(0).find(\"table &gt; tbody\")\n            var k = 0;\n            var secondGridRows = secondGridtbodys[i].rows;\n            var j = 0;\n            for (var j = 0 ; j &lt; secondGridRows.length; j++) {\n                 debugger;\n                var isFeatureMapped = secondGridRows[j].cells[0].children[0].status;\n                var isPreviouslyMapped = secondGridRows[j].cells[1].children[0].status;\n                if ((isPreviouslyMapped == true &amp;&amp; isFeatureMapped == false) || (isFeatureMapped == true)) {\n\n                    var selectedFeatureActionDetail = new Object();\n                    selectedFeatureActionDetail.isFeatureActionMapped = secondGridRows[j].cells[0].children[0].status;\n                    selectedFeatureActionDetail.isPreviouslyMapped = secondGridRows[j].cells[1].children[0].status;\n                    selectedFeatureActionDetail.FeatureActionID = secondGridRows[j].cells[2].innerHTML;\n                    selectedFeatureActionDetail.FeatureID = secondGridRows[j].cells[3].innerHTML;\n                    selectedFeatureActionDetail.RoleFeatureId = secondGridRows[j].cells[5].innerHTML;\n                    selectedFeatureActionDetail.RoleId = roleId;\n                    selectedFeatureActionDetail.ActionName = secondGridRows[j].cells[4].innerHTML;\n                    selectedFeatureActionList.push(selectedFeatureActionDetail);\n                }\n            }\n        }\n        var firstLevLCheckbox = tr[i].cells[1].children[0].status;\n        if (roleFeatureId != 0) {\n            var selectedFeatureDetail = new Object();\n            selectedFeatureDetail.CanAccess = firstLevLCheckbox;\n            selectedFeatureDetail.RoleId = roleId;\n            selectedFeatureDetail.FeatureId = tr[i].cells[2].innerHTML;\n            selectedFeatureDetail.RoleFeatureId = roleFeatureId;\n            selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n            selectedFeatureList.push(selectedFeatureDetail);\n        }\n        else {\n            if (firstLevLCheckbox == true) {\n                var selectedFeatureDetail = new Object();\n                selectedFeatureDetail.CanAccess = firstLevLCheckbox;\n                selectedFeatureDetail.RoleId = roleId;\n                selectedFeatureDetail.FeatureId = tr[i].cells[2].innerHTML;\n                selectedFeatureDetail.RoleFeatureId = 0;\n                selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n                selectedFeatureList.push(selectedFeatureDetail);\n            }\n        }\n        i++;\n    });\n    var MapFeaturesToRole = JSON.stringify(selectedFeatureList);\n    var data = { SelectedFeatureList: MapFeaturesToRole };\n    var Urlaction = '@Url.Action(\"SaveFeatureMapping\", \"Security\")';\n    $.post(Urlaction, data, function (rsp) { window.location = \"/security/managefeatures\"; });\n});\n</code></pre>\n\n<p></p>\n\n<p>I found one more way of reading the selected records .i.e. by reading the the datasource of the parent grid, then finding if the grid has any child, then reading the datasource child and then its sub-child.\nThe code is as follows :</p>\n\n\n\n<pre><code>$(\"#mysaveButton\").live(\"click\", function () {\n    debugger;\n    var selectedFeatureList = [];\n    var roleGrid = $('#Grid').data().kendoGrid;\n    var dataRows = roleGrid._data;\n    for (var i = 0; i &lt; dataRows.length ; i++) {\n        var roleId = dataRows[i].RoleId;\n        try {\n            var featureGrid = $('#' + roleId).data().kendoGrid;\n\n            var featureGridRows = featureGrid._data;\n\n            for (var j = 0; j &lt; featureGridRows.length ; j++) {\n                var featureId = featureGridRows[j].FeatureID;\n                var roleFeatureId = featureGridRows[j].RoleFeatureId;\n                var firstLevelCheckbox = featureGridRows[j].isMappedFeatureChecked;\n\n                try {\n                    var featureActionGrid = $('#' + featureId).data().kendoGrid;\n                    var featureActionGridRows = featureActionGrid._data;\n                    selectedFeatureActionList = [];\n                    for (var k = 0; k &lt; featureActionGridRows.length; k++) {\n                        var isFeatureMapped = featureActionGridRows[k].isFeatureActionMapped;\n                        var isPreviouslyMapped = featureActionGridRows[k].isPreviouslyMapped;\n                        if ((isPreviouslyMapped == true &amp;&amp; isFeatureMapped == false) || (isFeatureMapped == true)) {\n\n                            var selectedFeatureActionDetail = new Object();\n                            selectedFeatureActionDetail.isFeatureActionMapped = isFeatureMapped;\n                            selectedFeatureActionDetail.isPreviouslyMapped = isPreviouslyMapped;\n                            selectedFeatureActionDetail.FeatureActionID = featureActionGridRows[k].FeatureActionID;\n                            selectedFeatureActionDetail.FeatureID = featureActionGridRows[k].FeatureID;\n                            selectedFeatureActionDetail.RoleFeatureId = featureActionGridRows[k].RoleFeatureId;\n                            selectedFeatureActionDetail.RoleId = roleId;\n                            selectedFeatureActionDetail.ActionName = featureActionGridRows[k].ActionName;\n                            selectedFeatureActionList.push(selectedFeatureActionDetail);\n                        }\n                    }\n                }\n                catch (err) {\n                    selectedFeatureActionList = [];\n                }\n                if (roleFeatureId != 0) {\n                    var selectedFeatureDetail = new Object();\n                    selectedFeatureDetail.CanAccess = firstLevelCheckbox;\n                    selectedFeatureDetail.RoleId = roleId;\n                    selectedFeatureDetail.FeatureId = featureId;\n                    selectedFeatureDetail.RoleFeatureId = roleFeatureId;\n                    selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n                    selectedFeatureList.push(selectedFeatureDetail);\n                }\n                else {\n                    if (firstLevelCheckbox == true) {\n                        var selectedFeatureDetail = new Object();\n                        selectedFeatureDetail.CanAccess = firstLevelCheckbox;\n                        selectedFeatureDetail.RoleId = roleId;\n                        selectedFeatureDetail.FeatureId = featureId;\n                        selectedFeatureDetail.RoleFeatureId = 0;\n                        selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n                        selectedFeatureList.push(selectedFeatureDetail);\n                    }\n                }\n            }\n        }\n        catch (err) {\n            continue;\n        }\n\n    }\n    debugger;\n    var MapFeaturesToRole = JSON.stringify(selectedFeatureList);\n    var data = { SelectedFeatureList: MapFeaturesToRole };\n    var Urlaction = '@Url.Action(\"SaveFeatureMapping\", \"Security\")';\n    $.post(Urlaction, data, function (rsp) { window.location = \"/security/managefeatures\"; });\n});\n</code></pre>\n\n\n\n<p>Is there any other way to find selected records on save click for Kendo UI Grid?</p></li>\n<li><p>When a checkbox is selected in the second inner grid i.e. Grid2, I want that if there is no record selected in sub child grid i.e. Grid3, I check the checkboxes of all the records present in the Grid3 automatically. I was not able to do it in Kendo UI grid.</p></li>\n<li><p>When a checkbox is selected in the second inner grid i.e. Grid2, and some records are selected in its child Grid3, and then another record is selected(checkbox checked) from second inner grid i.e. Grid2 then the first record selected collapses and the checkboxes checked from its child Grid3 gets unchecked on collapse and again expand i.e it refreshes the grid3.\nThis problem is not faced when we use the first approach mentioned above of reading the Grid selected data i.e. reading by HTML, but if second approach is used i.e. reading the Grid datasource, the problem remains.</p></li>\n</ol>\n\n<p>The code written on the click of checkboxes present in the child and its sub child grid is as follows:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $('#Grid').on('click', '.firstlevelchkbx', function () {\n        var checkboxval = $(this).is(':checked');\n        var gridId = $(this).closest('div')[0].id;\n        var grid = $('#' + gridId).data().kendoGrid;\n        var dataItem = grid.dataItem($(this).closest('tr'));\n        dataItem.set('isMappedFeatureChecked', checkboxval);\n        //return false;\n    });\n    $('#Grid').on('click', '.secondlevelchkbx', function () {\n        //debugger;\n        var checkboxval = $(this).is(':checked');\n        var gridId = $(this).closest('div')[0].id;\n        var grid = $('#' + gridId).data().kendoGrid;\n        var dataItem = grid.dataItem($(this).closest('tr'));\n        dataItem.set('isFeatureActionMapped', checkboxval);\n        //return false;\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>It is important to write this code for the second approach (reading grid\"s datasource) only, For the first approach(reading HTML) it is not written.\nPlease suggest how to resolve the last two issues and which approach is better out of the two. Is there any other approach apart from these?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13149851,"title":"Could not load file or assembly 'Microsoft.Web.Infrastructure,","body":"<p>I try to upload mt web site to server.It was working fine with my local host. So I Uploaded every thing in my local host wwwroot folder to sever and change the connection string.\nbut there is error and it says </p>\n\n<pre><code>Exception information: \n    Exception type: InvalidOperationException \n    Exception message: The pre-application start initialization method Start on type RouteDebug.PreApplicationStart threw an exception with the following error message: Could not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified..\n   at System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods)\n   at System.Web.Compilation.BuildManager.CallPreStartInitMethods()\n   at System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException)\n\nCould not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.\n   at RouteDebug.PreApplicationStart.Start()\n</code></pre>\n\n<p>The project was nopcommerce.\nHow can I slove it??</p>\n"},{"tags":["asp.net-mvc","authentication","oauth","openid","servicestack"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13149666,"title":"How to do ServiceStack auth with MVC without EF","body":"<p>I'm working through the example <a href=\"https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/AccountController.cs\" rel=\"nofollow\"><code>AccountController</code></a> and trying to implement my own. I'm trying to do OAuth (via GMail) and so I've got it working all the way through <code>ExternalLoginCallback(string)</code>. The example does <code>OAuthWebSecurity.Login</code>. When I try to also do that, I get:</p>\n\n<pre><code>You must call the \"WebSecurity.InitializeDatabaseConnection\" method before you call any other method of the \"WebSecurity\" class.\n</code></pre>\n\n<p>After digging in, it appears that <code>InitializeDatabaseConnection</code> uses Entity Framework to configure a database on SQL Server. I'm not using SQL Server (Mongo DB), so I can't use this method. <strong>How do I use ServiceStack auth with MVC and no SQL Server?</strong></p>\n"},{"tags":["asp.net-mvc","mixed-mode"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3057,"score":6,"question_id":2432845,"title":"ASP.NET MVC and mixed mode authentication","body":"<p>I have a scenario whereby I require users to be able to authenticate against an ASP.NET MVC web application using either Windows authentication or Forms authentication. If the user is on the internal network they will use Windows authentication and if they are connecting externally they will use Forms authentication. I’ve seen quite a few people asking the question how do I configure an ASP.NET MVC web application for this, but I haven’t found a complete explanation.</p>\n\n<p>Please can someone provide a detailed explanation, with code examples, on how this would be done?</p>\n\n<p>Thanks.</p>\n\n<p>Alan T</p>\n"},{"tags":["asp.net-mvc","asp.net-4.5","asp.net-optimization","bundling-and-minification"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13131381,"title":"ASP.NET 4.5 Bundling in Debug Mode - Stale Resources","body":"<p>Is there any way we can make the ASP.NET 4.5 Bundling functionality generate GUID's as part of the querystring when running in <strong>debug</strong> mode (e.g bundling turned OFF).</p>\n\n<p>The problem is when developing locally, the scripts/CSS files are generated like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"/Content/Scripts/myscript.js\" /&gt;\n</code></pre>\n\n<p>So if i change that file, i need to do a hard-refresh (sometimes a few times) to get the file to be picked up by the browser - annoying.</p>\n\n<p>Is there any way we can make it render out like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"/Content/Scripts/myscript.js?v=x\" /&gt;\n</code></pre>\n\n<p>Where <code>x</code> is a GUID (e.g always unique).</p>\n\n<p>Ideas?</p>\n\n<p>I'm on ASP.NET MVC 4.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","webforms-view-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13149196,"title":"Post HTML encoded Form data to server","body":"<p>I'm currently using MVC 3 (WebForm view engine) and have a form that shows user comments. </p>\n\n<p>If I have a comment which has an ampersand (&amp;), <code>&lt;%= Html.Textbox() %&gt;</code> will encode it as <code>&amp;amp;</code>. However, if the form is then posted to the server, ASP.NET kicks in thinking that the submitted content is malicious.</p>\n\n<p>I find myself having to use <a href=\"http://stackoverflow.com/a/9609450/84395\">HTML decoding methods using JavaScript</a> before the content is sent to the server.</p>\n\n<p>I am able to get the results that I want, but I feel like I'm not doing this right.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["c#","jquery","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":13148577,"title":"ASP.NET MVC 3 NOT showing appropriate view, action called using jquery","body":"<p>I have a small problem.</p>\n\n<p>My action is :</p>\n\n<pre><code> public ViewResult SearchForRooms(int HotelDDL) \n    {\n\n        List&lt;Room&gt; roomsInHotel = bl.ReturnRoomsPerHotel(HotelDDL);\n\n        return View(roomsInHotel);\n    }\n</code></pre>\n\n<p>Here is the jquery that is calling the action:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#HotelDDL\").change(function () {\n\n            var text = $(\"#HotelDDL option:selected\").text();\n            var value = $(\"#HotelDDL option:selected\").val();\n            alert(\"Selected text=\" + text + \" Selected value= \" + value);\n\n            $.post(\"/Home/SearchForRooms\",\n            {\n                HotelDDL: $(\"#HotelDDL option:selected\").val() \n            });\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>And finally, here is the View that should be called:</p>\n\n<pre><code>@model IEnumerable&lt;RoomReservation.Entities.Entities.Room&gt;\n\n@{\n    ViewBag.Title = \"Search\";\n}\n\n&lt;h2&gt;Result&lt;/h2&gt;\n\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            City\n        &lt;/th&gt;\n        &lt;th&gt;\n            Hotel\n        &lt;/th&gt;\n        &lt;th&gt;\n            Room label\n        &lt;/th&gt;\n        &lt;th&gt;\n            Number of beds\n        &lt;/th&gt;\n        &lt;th&gt;\n            Price per night\n        &lt;/th&gt;\n        &lt;th&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelitem=&gt;item.Hotel.City.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.Hotel.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.NumberOfBeds)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.PricePerNight)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n&lt;/table&gt;\n</code></pre>\n\n<p>Everthing is working ok (databse return all rooms correctly) except final view rendering.\nI have tried Phil's tool but it doesn't give me any suspicious hints:</p>\n\n<pre><code>RouteDebug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes);\n</code></pre>\n\n<p>So, why is it not showing after jscript send it's post method to <code>SearchForRooms()</code>?\nThank you</p>\n\n<p>P.S. If you need any other piece of code please just say so.</p>\n"},{"tags":["css","asp.net-mvc","html-input"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13148479,"title":"Horizontal text input box VB HTML","body":"<p>I'm trying to get the 4 input fields to line up horizontally on my web page, but I can't seem to get it right.</p>\n\n<p>I've tried <code>display: inline</code> and <code>float: left</code> etc. but its still not working. </p>\n\n<p>I am using VB 2012 express MVC application. The HTML as follows:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Account Information&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.UserName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(m =&gt; m.UserName)\n            @Html.ValidationMessageFor(m =&gt; m.UserName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.Email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(m =&gt; m.Email)\n            @Html.ValidationMessageFor(m =&gt; m.Email)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.Password)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.PasswordFor(m =&gt; m.Password)\n            @Html.ValidationMessageFor(m =&gt; m.Password)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.ConfirmPassword)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.PasswordFor(m =&gt; m.ConfirmPassword)\n            @Html.ValidationMessageFor(m =&gt; m.ConfirmPassword)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Register\" /&gt;\n        &lt;/p&gt;\n</code></pre>\n\n<hr>\n\n<p>Thanks for any help</p>\n"}]}
{"total":44782,"page":9,"pagesize":100,"questions":[{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13145951,"title":"How can I display the clicked products by user on a list in another view?","body":"<p>I am using MVC3 Viewmodel pattern with Entity Framework on my webbapplication.</p>\n\n<p>My Index View is list of products with image, price and description and etc.</p>\n\n<p>Products with the information I mentioned above is in div boxes with a button that says \"buy\".</p>\n\n<p><img src=\"http://i.stack.imgur.com/MEXgU.jpg\" alt=\"divbox\"></p>\n\n<p>I will be working with 2 views one that is the Index View that will display all the products and the other view that will display the products that got clicked by the buy button.</p>\n\n<p>What I am trying to achieve is when a user click on buy button the products should get stored in the other view that is cart view and be displayed.</p>\n\n<p>I have problems on how to begin the coding for that part.</p>\n\n<p>The index View with products is done and now its the buy button function left to do but I have no idea how to start.</p>\n\n<p>This is my IndexController:</p>\n\n<pre><code>private readonly HomeRepository repository = new HomeRepository();\n\npublic ActionResult Index()\n{\n    var Productlist = repository.GetAllProducts();\n\n    var model = new HomeIndexViewModel()\n    {\n        Productlist = new List&lt;ProductsViewModel&gt;()\n    };\n\n    foreach (var Product in Productlist)\n    {\n        FillProductToModel(model, Product);\n    }\n\n    return View(model);\n\n}\n\nprivate void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)\n{\n    var productViewModel = new ProductsViewModel\n    {\n\n        Description = productimage.Products.Description,\n        ProductId = productimage.Products.Id,\n        price = productimage.Products.Price,\n        Name = productimage.Products.Name,\n        Image = productimage.ImageUrl,\n    };\n    model.Productlist.Add(productViewModel);\n}\n</code></pre>\n\n<p>In my ActionResult Index I am using my repository to get the products and then I am binding the data from the products to my ViewModel so I can use the ViewModel inside my view. Thats how I am displaying all the products in my View. </p>\n\n<p>This is my Index View:</p>\n\n<pre><code>    @model Avan.ViewModels.HomeIndexViewModel\n\n         @foreach (var item in Model.Productlist)\n                    {\n                     &lt;div id=\"productholder@(item.ProductId)\" class=\"productholder\"&gt;  \n                     &lt;img src=\"@Html.DisplayFor(modelItem =&gt; item.Image)\" alt=\"\" /&gt;\n                     &lt;div class=\"productinfo\"&gt;\n                     &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.Name)&lt;/h2&gt; \n                     &lt;p&gt;@Html.DisplayFor(modelItem =&gt; item.Description)&lt;/p&gt;    \n                     @Html.Hidden(\"ProductId\", item.ProductId, new { @id = \"ProductId\" }) \n&lt;/div&gt;\n                     &lt;div class=\"productprice\"&gt;     \n                     &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.price)&lt;/h2&gt;\n                     &lt;input type=\"button\" value=\"Läs mer\" class=\"button\" id=\"button@(item.ProductId)\"&gt;  \n                     @Html.ActionLink(\"x\", \"Cart\", new { id = item.ProductId })  // &lt;- temp its going to be a button                   \n                    &lt;/div&gt;                                   \n                    &lt;/div&gt;\n\n             }\n</code></pre>\n\n<p>Since I can get the product ID per product I can use the ID in my controller to get the data from the database. But I still I have no idea how I can do that so when somebody click on the buy button I store the ID where? and how do I use it so I can achieve what I want to do?</p>\n\n<p>Right now I have been trying to do following thing in my IndexController:</p>\n\n<pre><code>public ActionResult cart(int id)\n        {\n            var SelectedProducts = repository.GetProductByID(id);\n\n\n            return View();\n        }\n</code></pre>\n\n<p>What I did here is that I get the product by the id. So when someone press on the temp \"x\" Actionlink I will recieve the product. All I know is that something like that is needed to achieve what im trying to do but after that I have no idea what to do and in what kind of structure I should do it.</p>\n\n<p>Any kind of help is appreciated alot!</p>\n\n<p><strong>Short Scenario:</strong></p>\n\n<p>looking at the Index I see 5 products, I choose to buy 3 products so I click on three \"Buy\" buttons. Now I click on the \"Cart\" that is located on the nav menu. New View pops up and I see the three products that I clicked to buy.</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13148707,"title":"Using the Razor View Engine with a custom templating framework","body":"<p>We have a custom templating framework used by our web applications with implementations which are written in a variety of languages, and I'm investigating whether its possible to use this in an ASP.NET MVC application using the Razor View engine. We already have an implementation that uses the Web Forms View engine, but I'm keen to be able to use Razor as well.</p>\n\n<p>The template is defined in a html file which contains macro tags that are interpreted and  replaced at runtime with the applicable html. Below is a highly simplified version of this file:-</p>\n\n<pre><code>[doctype]\n&lt;html&gt;\n  &lt;head&gt;\n    [HeadScript]\n    [HeadSectionText]\n  &lt;/head&gt;\n  &lt;body id=\"[if Home][Home][else]body[end if]\"&gt;\n    [form]\n      [Content]\n    [end form] \n    [EndBodyScript]\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>As you can see, there are opportunities to inject html into various sections of the  document, with some of this being handled by a simple conditional logic implementation. In order to use this with Razor, I'd need to be able to process all the macro tags in the template, including inserting the HTML from the Razor view being rendered, and use the output of this operation as the HTML to be ultimately sent to the client.</p>\n\n<p>I'm pretty green when it comes to MVC development, but I know I can create a custom ViewEngine and IView implementation. Perhaps I can use this to achieve what I want, with a custom engine using the RazorView class to render the actual content to be inserted into our template. Does this sound like a feasible solution? And if so, does anyone have any tips to get me started?</p>\n\n<p>Currently I have a kludgy solution where I use the ASP.NET WebForms engine and render partial Razor views, but longterm I'd prefer to have a solution that can take the WebForms engine out of the equation entirely.</p>\n\n<p>Any shoves in the right direction greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-webforms"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":15,"score":0,"question_id":13140522,"title":"how can I implement the code web forms in mvc? also i want to take some html in this code","body":"<p>how can I implement the code web forms in mvc? also i want to take some html in this code\nthis is code</p>\n\n<pre><code>Response.ContentType = \"application/pdf\";\n            Response.AddHeader(\"content-disposition\", \"attachment;filename=TestPage.pdf\");\n            Response.Cache.SetCacheability(HttpCacheability.NoCache);\n            **StringWriter sw = new StringWriter();\n            HtmlTextWriter hw = new HtmlTextWriter(sw);\n            this.Page.RenderControl(hw);**\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":594,"score":0,"question_id":10789028,"title":"Could not load file or assembly 'MySite (from [Computername])' or one of its dependencies. (Exception from HRESULT: 0x80131040)","body":"<p><strong>Hi,</strong></p>\n\n<p>When running my ASP.NET MVC application (using VS mini IIS) I get the following exception after updating table in the EnityFrameworkModel:</p>\n\n<pre><code>Server Error in '/' Application.\n\nCould not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nAssembly Load Trace: The following information can be helpful to determine why the assembly 'myApp (from my-pc)' could not be loaded.\n\n\n=== Pre-bind state information ===\nLOG: User = my-PC\\my\nLOG: DisplayName = myApp (from my-pc)\n (Partial)\nWRN: Partial binding information was supplied for an assembly:\nWRN: Assembly Name: myApp (from my-pc) | Domain ID: 4\nWRN: A partial bind occurs when only part of the assembly display name is provided.\nWRN: This might result in the binder loading an incorrect assembly.\nWRN: It is recommended to provide a fully specified textual identity for the assembly,\nWRN: that consists of the simple name, version, culture, and public key token.\nWRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.\nLOG: Appbase = file:///C:/Users/my/Documents/Visual Studio 2010/Projects/myApp/myApp.Website/\nLOG: Initial PrivatePath = C:\\Users\\my\\Documents\\Visual Studio 2010\\Projects\\myApp\\myApp.Website\\bin\nCalling assembly : (Unknown).\n===\nLOG: This bind starts in default load context.\nLOG: Using application configuration file: C:\\Users\\my\\Documents\\Visual Studio 2010\\Projects\\myApp\\myApp.Website\\web.config\nLOG: Using host configuration file: \nLOG: Using machine configuration file from C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\config\\machine.config.\nLOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).\nLOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/9ac245ea/5244fde2/myApp (from my-pc).DLL.\nLOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/9ac245ea/5244fde2/myApp (from my-pc)/myApp (from my-pc).DLL.\nLOG: Attempting download of new URL file:///C:/Users/my/Documents/Visual Studio 2010/Projects/myApp/myApp.Website/bin/myApp (from my-pc).DLL.\nWRN: Comparing the assembly name resulted in the mismatch: NAME\nERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.\n\nStack Trace: \n\n\n[FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0\n   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39\n   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132\n   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection) +144\n   System.Reflection.Assembly.Load(String assemblyString) +28\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46\n\n[ConfigurationErrorsException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618\n   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209\n   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130\n   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178\n   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94\n   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332\n   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677\n\n[HttpException (0x80004005): Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876\n   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97\n   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258\n\nVersion Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272\n</code></pre>\n\n<p>This is what I have tried : </p>\n\n<ul>\n<li>Clean solution</li>\n<li>Stopd the mini IIS and restart</li>\n<li>Restarted Windows</li>\n</ul>\n\n<p>But I do still gott this problem?</p>\n\n<p>Edit1: </p>\n\n<p>When re-running I now get this : </p>\n\n<pre><code>    Server Error in '/' Application.\n\nCould not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nAssembly Load Trace: The following information can be helpful to determine why the assembly 'myApp (from my-pc)' could not be loaded.\n\n\nWRN: Assembly binding logging is turned OFF.\nTo enable assembly bind failure logging, set the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog] (DWORD) to 1.\nNote: There is some performance penalty associated with assembly bind failure logging.\nTo turn this feature off, remove the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog].\n\nStack Trace: \n\n\n[FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0\n   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39\n   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132\n   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection) +144\n   System.Reflection.Assembly.Load(String assemblyString) +28\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46\n\n[ConfigurationErrorsException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618\n   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209\n   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130\n   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178\n   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94\n   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332\n   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677\n\n[HttpException (0x80004005): Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876\n   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97\n   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","appharbor","asp.net-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":534,"score":3,"question_id":12081255,"title":"ASP.NET MVC framework 4.5 CSS bundles does not work on the hosting","body":"<p>I am runing an App on app harbor written in MVC4.</p>\n\n<p>A bundle of css files doesnt work. In my local computer in debug mode I see the code of the App and I see the files. The App Works as expected.</p>\n\n<pre><code>&lt;link href=\"/Content/css/home/basic-jquery-slider.css\" rel=\"stylesheet\"/&gt;\n&lt;link href=\"/Content/css/home/Home.css\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p>When I upload the app to Appharbor I see the bundle in the code but the App doesnt work.</p>\n\n<pre><code>&lt;link href=\"/Content/css/home?v=zhVOIpUNuvCOZhJyBcQWpMlozayor4te6k-pM29wHqI1\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p>When I browse that link in the <code>href</code> I get <strong>403 - Forbidden: Access is denied.</strong></p>\n\n<p>How to troubleshoot this?</p>\n"},{"tags":["asp.net-mvc","ivr"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13045833,"title":"Adding IVR and PBX capabilities to web application","body":"<p>I have an existing web application that was created using ASP.NET C#, MVC3 with Sql Server backend.  Now I have been asked to add IVR capabilities to it.  </p>\n\n<pre><code>1) Is this possible? \n2) What is the best Library API to use? \n3) I found Asterisk but not very sure if this works within a Windows environment.  Also there appears to be a few .NET based Asterisk API. Which is the best one to use? \n3) How about MS Lync Server?  Though a bit concerned about additional licenses. \n4) Is there any sample applications around that I could have a look at?  \n</code></pre>\n\n<p>(P.S: found this link <a href=\"http://stackoverflow.com/questions/11541043/ivr-application-over-telephone-net\">IVR application over telephone .Net</a>.  Has anybody used VoiceModel?  How does it compare to the above?) \nThank you</p>\n"},{"tags":["asp.net-mvc","sql-server-2008","connection-string"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":204,"score":0,"question_id":13039540,"title":"Trying to connect ASP.NET MVC to SQL Server 2008 R2 with possible wrong connection string","body":"<p>Running SQL Server 2008 R2 and ASP.NET MVC 2 web application on the Virtual Server of big german hosting-provider.</p>\n\n<p>I have a problem to connect to the SQL Server. </p>\n\n<p>On localhost this connection string works fine: </p>\n\n<pre><code> @\"Data Source=LOCAL-HP;Initial Catalog=OnlineVertrag;Integrated Security=True\";\n</code></pre>\n\n<p>I'm using a similar connection string on the server: </p>\n\n<pre><code>@\"Data Source=MYSERVER\\SQLEXPRESS;Initial Catalog=OnlineVertrag;Integrated Security=True\";\n</code></pre>\n\n<p>but nothing happens over there.</p>\n\n<p>Here is my project which I am trying to connect: <a href=\"http://www.hotcont.eu/OnlineVertrag/Home\" rel=\"nofollow\">http://www.hotcont.eu/OnlineVertrag/Home</a></p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-membership","iprincipal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13147973,"title":"Custom IPrincipal expiration issue","body":"<p>I followed advice from <a href=\"http://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal\">this question</a> on how to implement custom <code>IPrincipal</code> (I need it to store <code>userId</code> in it in order to reduce calls to database to get just <code>userId</code>).<br/>\nNow if I login to site and leave it about 20 minutes don't do anything on site and refresh page it again requests login.<br/><br/>\nDoes custom implemented IPrincipal has some expirtation time and if it has how to extend this?</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13096067,"title":"MVC jquery calling a controller method not working","body":"<p>I want to populate one drop down list based on the selection of another drop down list.</p>\n\n<p>I know it's a fairly common problem, and for two whole days I've been trying different samples that I find on the net, to no avail!</p>\n\n<p>Here is my code: </p>\n\n<p>controller: </p>\n\n<pre><code> public List&lt;SelectListItem&gt; listTestCases(string id)\n    {\n        IQueryable&lt;SelectListItem&gt; A = repository.listTestCases(id);\n        return (A.toList());\n    }\n\n    public JsonResult listTestCases_2(string id)\n    {\n        IQueryable&lt;SelectListItem&gt; A = repository.listTestCases(id);\n        return Json(A);\n    }\n</code></pre>\n\n<p>I have two methods, one of them returns a List, the other one JSONResults, and I tried everything I found on the net with both methods.\nscript:</p>\n\n<pre><code>&lt;script&gt;\n$(document).ready(function() {\n    $('select#testCategoriesUniqueId').change(function() {\n\n        var testCategory = $(this).val();\n        $.ajaxSetup({ cache: false });\n        alert(testCategory);\n\n        $.getJSON(\"TestInput/listTestCases/\" ,  {id: testCategory}, function(data) {\n            alert(\"here\");\n        });\n\n    });\n});\n</code></pre>\n\n<p></p>\n\n<p>With the above code, the code goes through the listTestCases, and get's the results, but It doesn't go to the success function. (doesn't alert)</p>\n\n<p>I have tried:</p>\n\n<pre><code> $.getJSON(\"TestInput/listTestCases/\" + testCategory, null, function(data) {\n            alert(\"here\");\n        });\n</code></pre>\n\n<p>not surprisingly same results.</p>\n\n<p>I even tried : (json-p)</p>\n\n<pre><code> $.ajax({\n            url: \"TestInput/listTestCases/\" + testCategory,\n            dataType: \"json-p\",\n            success: function(data) {\n                alert(data.length);\n                var S = \"\";\n                $(\"#testCasesUniqueId\").removeOption(/./);\n                for (var i = 0; i &lt; data.length; i++) {\n                    S += data[i];\n                    var val = data[i].Value;\n                    var text = data[i].Text;\n                    $(\"#testCasesUniqueId\").addOption(val, text, false);\n                }\n                alert(S);\n            }\n        }\n        );\n</code></pre>\n\n<p>and the result is a string (System.collections.List[...SelectListItem]. and does not give me the objects of the list. so I tried it with listTestCases2, and it is not even calling the method.</p>\n\n<p>I read somewhere that I need to use post instead of get, and I even tried postJSON. and no result.</p>\n\n<p>Basically I'm super lost.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":3508,"score":0,"question_id":742655,"title":"Getting an input value or JavaScript variable in ASP.NET MVC Ajax.ActionLink ","body":"<p>I want to pass an input control value (say <code>textbox1.value</code> or a javascript variable) to a controller action method (as a parameter) without a form post (using Ajax.ActionLink). Please see the code below.</p>\n\n<p>Is it possible to assign something like <code>new {name = textbox1.value}</code> in Ajax.ActionLink.</p>\n\n<p>View</p>\n\n<pre><code>&lt;input type=\"text\" id=\"textbox1\" /&gt;\n&lt;%= Ajax.ActionLink(\"mylink\", \"linkfunction\", new {name = textbox1.value}, new AjaxOptions { UpdateTargetId = \"result\"}) %&gt;\n&lt;span id=\"result\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>and controller action is:</p>\n\n<pre><code>public string linkfunction(string name)\n{\n    return  DateTime.Now.ToString();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":4,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":4933,"score":10,"question_id":3683366,"title":"Naming A Form Html.BeginForm()","body":"<p>Any one Know How to give name to a form in Asp.net MVC <code>Html.BeginForm()</code> <strong>i want only name not action or controller name</strong> because i want to post it through Java Script.  Something like this <code>Html.BeginForm(id = \"frm\")</code> </p>\n\n<p>I tried </p>\n\n<p><code>Html.BegainForm(null,null,new{id=\"frm\",name=\"frm})</code></p>\n\n<pre><code>Html.BegainForm(new{@id=\"frm\",@name=\"frm})\n</code></pre>\n\n<p>But Above code Produce Code Like This </p>\n\n<p> when see through View Source</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":13146451,"title":".NET MVC 4 Kendo UI Grid and file upload","body":"<p>Is there a possibility to do smoething like this:</p>\n\n<ol>\n<li>I have a window with KendoGrid. DataSource is binded to model which contains a list of AttachmentDetails:\nFileName, Content, Description, etc.</li>\n<li>I have a button on top of the form to \"Save\" the modified/added/deleted list to database.</li>\n<li>I have a button to \"Add\" new Attachement. This opens a new window via javascript open.window.</li>\n<li>On that window I have a form with fields for model AttachmentDetails with input type \"file\" to get the Contents. </li>\n<li>When I click \"Save\" on that new window It should close itself, and add new item to Grid on the parent window.</li>\n</ol>\n\n<p>How can I do this kind of usabillity with Kendo?\nShould I use Session to store the list with Content? </p>\n"},{"tags":["c#","html","asp.net-mvc","model"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13146881,"title":"Multiple models in html","body":"<p>I'm trying to use multiple models in a single cshtml file.  The code I have is:</p>\n\n<pre><code>@model CostumeContest.Models.VoteModel  \n@{\n    ViewBag.Title = \"Vote\";\n}\n\n\n&lt;h2 style=\"color: #B45F04\"&gt;Vote Receipt&lt;/h2&gt;\n&lt;b&gt;Your Name:&lt;/b&gt; @Model.VoterName\n&lt;br /&gt;\n&lt;b&gt;Your Vote for Best Costume: &lt;/b&gt;@Model.BestName\n&lt;br /&gt;\n&lt;b&gt;Your Vote for Most Creative Costume:&lt;/b&gt; @Model.CreativeName\n&lt;br /&gt;\n\n&lt;h2 style=\"color: #B45F04\"&gt;Vote Summary&lt;/h2&gt;\n\n//@model CostumeContest.Models.VoteResult    this is giving me problems when not commented out\n&lt;h3 style=\"color: #B45F04\"&gt;Best Costume&lt;/h3&gt;\n\n\n&lt;h3 style=\"color: #B45F04\"&gt;Most Creative Costume&lt;/h3&gt; \n</code></pre>\n\n<p>What is wrong with what I'm doing above, and more importantly, how can I solve my issue?  Thank you.</p>\n"},{"tags":["asp.net-mvc","azure","asp.net-mvc-4","asp.net-membership","sql-azure"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":80,"score":4,"question_id":13144933,"title":"Form Authentication / Profiles slow on Azure Cloud, fine locally","body":"<p>I'm using MVC 4 on Azure, and it loads very slowly (over a minute).  Here are the load times of a few pages:\n<img src=\"http://i.stack.imgur.com/nzmy3.png\" alt=\"http://i.imgur.com/V4brS.png\">  (the 6.9 minutes was when I tried loading 7 tabs with different pages)</p>\n\n<p>This problem does not occur when I'm using the Azure emulator, locally. </p>\n\n<p>I've tried using an extra large instance, and using remote desktop to run the site locally, and it was just as slow.  Also I have tried using IIS Express and normal IIS, and nothing there either.</p>\n\n<p>I created a completely fresh MVC project using the \"Internet application\" template, which includes security, and it is very \nslow as well, so I'm pretty sure the other things I'm using in my project are not causing the problem.  Here are the load \ntimes with just the default MVC project:\n<img src=\"http://i.stack.imgur.com/YUd25.png\" alt=\"enter image description here\"></p>\n\n<p>I was originally using separate affinity regions for my membership DB and my website, but I've tried using matching affinity groups on both the blank MVC template with forms authentication and my project.</p>\n\n<p>Revisiting pages doesn't improve their speed significantly.</p>\n\n<p>I also tried creating just a MVC site without authentication, with a 10x5000 table generated:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n    &lt;table&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                @for (int i = 0; i &lt; 10; i++)\n                {\n                    &lt;th&gt;@i\n                    &lt;/th&gt;\n                }\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            @for(int i = 0; i &lt; 5000; i++)\n            {\n                &lt;tr&gt;\n                    @for(int j = 0; j &lt; 10; j++)\n                    {\n                        &lt;td&gt;Row @i , column @j&lt;/td&gt;    \n                    }\n                &lt;/tr&gt;\n            }\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This loads fine, both locally and on the cloud.  Even from a cold start it is only ~10-15 seconds.</p>\n\n<p>So I'm fairly certain that the issue lies in the Profile/Membership/Authentication of ASP.NET, but only while it is deployed \nto Azure (since I'm using the same SQL Azure database with Universal Providers when running locally, and there aren't these \nslowdowns).</p>\n\n<p>I expected this problem to be more common, but the only thing that really seemed relevant was this:\n<a href=\"http://social.msdn.microsoft.com/Forums/en-US/windowsazuremanagement/thread/7d3323d8-571b-4b8f-9fdb-bd5ccc6c39b7\" rel=\"nofollow\">social.msdn.microsoft.com/Forums/en-US/windowsazuremanagement/thread/7d3323d8-571b-4b8f-9fdb-bd5ccc6c39b7</a>\n(possibly this: <a href=\"http://stackoverflow.com/questions/10791433/saving-changes-very-slow-via-datacontext\">stackoverflow.com/questions/10791433/saving-changes-very-slow-via-datacontext</a>)</p>\n\n<p>I'm working through the things to try, as suggested in that thread, at: <a href=\"http://windowsazure.com/en-us/manage/windows/best-practices/\" rel=\"nofollow\">windowsazure.com/en-us/manage/windows/best-practices/</a></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","authentication","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13146032,"title":"Redirect to requested page after authentication","body":"<p>I'm working on an mvc .net application and I'm using forms authentication. I want to redirect user to the page he requested after he gets authenticated. Any help would be appreciated.</p>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":13009153,"title":"Child forms collections handling","body":"<p>In case my ViewModel has some child property:</p>\n\n<pre><code>public class MyViewModel\n{\n   public MyFormViewModel Form {get;set;}\n}\n</code></pre>\n\n<p>and I render a form for this property, I can then have the following ActionResult:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult SomeAction(MyFormViewModel form)\n{\n   ...\n}\n</code></pre>\n\n<p>and DefaultModelBinder fills form property (if ViewModel's property name equals to action parameter name).</p>\n\n<p>But how should I name action parameter if MyViewModel contains <code>IList&lt;MyFormViewModel&gt;</code> which are rendered by index: <code>@Html.EditorFor(x =&gt; x.Forms[index])</code>?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13145301,"title":"customize literal control in asp.net","body":"<p>Can we change the literal button in asp.net tools? For example a literal come up and ask us a question and we can answer it by using two buttons that show us yes and no. </p>\n\n<pre><code> Literal1.Text = \"&lt;script&gt;alert('You have already sent a request for this reviewer')    &lt;/script&gt;\";\n</code></pre>\n\n<p>If it is possible please guide me.</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13127781,"title":"SqlQuery against unknown (at compile time) type","body":"<p>I have an application where I have a list of database queries to execute.</p>\n\n<p>I know its possible to do something like:</p>\n\n<pre><code>var results = _db.Contacts.SqlQuery( sQuery );\n</code></pre>\n\n<p>and like: </p>\n\n<pre><code>var results = _db.Database.SqlQuery&lt;Contacts&gt;( sQuery );\n</code></pre>\n\n<p>But in my situation, I'm working only with metadata.  How can I do something like this:</p>\n\n<pre><code>string sBaseType = \"Contacts\";\nvar results = _db.Database.SqlQuery&lt;sBaseType&gt;( sQuery );\n</code></pre>\n\n<p>I had some success with <code>&lt;object&gt;</code>...it returned all the rows I expected it to, but its not in a very usable form.  Whats the best way to handle this variety of dynamic query?</p>\n\n<p>Edit -- \nWhat I'm hoping to find, is some mechanism rather like this:</p>\n\n<pre><code>var results = _db.Database[sBaseType].SqlQuery( sQuery );\n</code></pre>\n\n<p>So that I can avoid a construction that looks like :</p>\n\n<pre><code>if (sBaseType == \"Contacts\") {\n    var results = _db.Contacts.SqlQuery( sQuery );\n} else if  (sBaseType == \"Buildings\") {\n    var results = _db.Buildings.SqlQuery( sQuery );\n} else if  (sBaseType == \"Rooms\") {\n    var results = _db.Rooms.SqlQuery( sQuery );\n} else if  (sBaseType == \"Equipment\") {\n    var results = _db.Equipment.SqlQuery( sQuery );\n}\n</code></pre>\n\n<p>I don't need anything particularly fancy...I just am hoping to save building up a 100+ element if-elseif block...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13145141,"title":"Good ASP.NET MVC projects to look at for authentication and cookie management","body":"<p>I am new to ASP.NET MVC, so I was looking out for open-source projects either on Codeplex/Github/Bitbucket which I can look at and understand how to implement authentication, authorization and implement remember me, cookie management and stuff.</p>\n\n<p>Can some one please guide me to any good projects that has a nice implementation on authentication and cookie management.</p>\n"},{"tags":["c#","asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":23,"score":0,"question_id":13145477,"title":"query a view with a list of data","body":"<p>How can I query a view with data in a list?</p>\n\n<p>For eg: Below, I have variable \"data\" where I store all the id's from a view to a list. I want to query a second view \"vwStatus\" such that it returns all the rows which has status displayed in the list(data)</p>\n\n<p>Something like:</p>\n\n<pre><code>public ActionResult Index(string id)\n{\n    var data = (from p in db.vwdb.Where(p =&gt; p.ID == id)\n                 group p by p.status into g select g.Key).ToList();\n\n    ViewData.Model = db.vwStatus.Where(p =&gt; p.Status == data);           \n\n    return View();\n}\n</code></pre>\n\n<p>Hope I made it clear.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":492,"score":3,"question_id":11751730,"title":"PreserveLoginUrl Override for MVC 4","body":"<p>I have a controller action which is called from a jquery method on the client and returns JSON.  I may need to return a 401 from this action in some cases.  Standard MVC will create a response that redirects the user to the login page if I try to issue a 401 as long as PreserveLoginUrl is set to true in web.config.  I want to be able to override PreserveLoginUrl on certain actions so that a true 401 is sent to the client.  However, for the majority of actions, PreserveLoginUrl=true is the correct behaviour so I want that maintained.</p>\n\n<p>Any suggestions on how I can accomplish a true 401 without a redirect for a handful of actions while maintaining the PreserveLoginUrl=true functionality?  For now, I am returning a 400 instead of a 401 as a workaround, but that is not really the correct behaviour since I do want to issue a NOT Authorized.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":377,"score":0,"question_id":3916374,"title":"Put build number in web.config","body":"<p>I'm trying to get my build number into the web.config of an ASP.Net MVC project (long story, but there <em>is</em> a reason)... something like this:</p>\n\n<pre><code>&lt;appSettings&gt;\n    &lt;add key=\"version\" value=\"1.0.3936.27150\" /&gt;\n&lt;/appSettings&gt;\n</code></pre>\n\n<p>Right now, I'm doing it with an executable on the post-build event by looking at the assembly to get the version and stuff that into the web.config. It works, but isn't exactly what I was looking for.</p>\n\n<p>Any easy way to do this easier / cleaner? Thanks for any advice / suggestions.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","controller","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13145160,"title":"Binding query string to object in ASP.NET MVC?","body":"<p>I have a grid control that I have bound to a model of IEnumerable. How ever in my controller I would like to save a record. The grid control I am using is one from Telerik 'Kendo'. The request back is a string and I would like to get my bound object 'CustomerViewModel' how ever when I pass in my object it comes back null. I have tried different types of information and it seems to only work for i specify the property I would like to pass in. Please find code below and assist?</p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult Save([DataSourceRequest] DataSourceRequest request, CustomerViewModel customerViewModel)\n        {\n            if (customerViewModel != null &amp;&amp; ModelState.IsValid)\n            {\n                var customers = Repository.GetItems&lt;Customer&gt;();\n                Repository.SaveChanges&lt;Customer, CustomerViewModel, NorthWindDataContext&gt;(customers, customerViewModel);\n            }\n            return Json(ModelState.ToDataSourceResult());\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlist"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13144810,"title":"Multiple DropDownLists with the same name (inside foreach statement)","body":"<p>I'm having trouble when loading several DropDownLists that have the same name. I attach my code here:</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@{\n   int i = 1\n\n    foreach (var queue in Model.Queues)\n    {\n            using (Html.BeginForm(\"ChangeQueueState\", \"Home\", FormMethod.Post))\n            {\n                List&lt;SelectListItem&gt; sli = ViewBag.states[i - 1];\n            &lt;div&gt;@Html.DropDownList(\"state\", sli)&lt;/div&gt;\n            }\n     }\n    i++\n}\n</code></pre>\n\n<p>There's more code inside the view that I didn't show.</p>\n\n<p>In my controller I simply change the state of the corresponding queue and load <code>ViewBag.states</code> with the List of <code>SelectedListItem</code> which contains the List of states with the correct state as 'Selected' for each queue.</p>\n\n<p>The problem is that when the View is loaded, all the <code>DropDownLists</code> are loaded with the last modified state. For instance, if I changed the 5th queue from 'Open' to 'Closed' then all the <code>DropDownLists</code> appears with the '<code>Closed</code>' option selected (although in the DB the changes are applied correctly).</p>\n\n<p>I think the problem is due to the binding that MVC does between the <code>DropDownList</code> name and the <code>SelectListItem</code> associated, but I can't change the DDL name to <code>\"state\" + @i</code>, because state is bound to the argument received in the '<code>ChangeQueueState</code>' method of my Controller.</p>\n\n<p>I would really appreciate your help. Thanks in advance!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13144594,"title":"What is dalAccess supposed to do in ASP.NET?","body":"<p>I am a bit new to the ASP.NET MVC framework making the move from Ruby on Rails 3 and it's ActiveRecord. Please help me understand the place of dalAccess in the MVC.</p>\n\n<pre><code>[HttpGet]\n    public ActionResult copyCampaign(int Id)\n    {\n        DALAccess dalaccess = new DALAccess();\n        //string newid = dalaccess.CopyOffer(Id);\n        string newid = dalaccess.CopyOfferByCampaignId(Id);\n\n        string type = PrepareOffer4Edit(newid);\n        if (type == \"bundle\")\n            return RedirectToAction(\"bundleStep1\");\n        else if (type == \"scratchOff\")\n            return RedirectToAction(\"scratchOffStep1\");\n        else\n        {\n            return RedirectToAction(\"CampaignMgmt\", \"CampaignMgmt\");\n        }\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","model"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13144425,"title":"How should I transfer a domain object's properties to its model counterpart?","body":"<p>We currently use extension methods to provide this functionality, but I can't help but feel there's a much cleaner solution. I played around with AutoMapper, but I wasn't able to quite see how it solved the issue in complex cases. For a simple 1:1 it works, but if any fiddling of the data is required -- it seems to be a let down.</p>\n\n<p>So, I've got something like:</p>\n\n<pre><code>public static class ProvisioningExtensions\n{\n    // Convert ProvisioningServicesProxy.Provisioning to ProvisioningDetailsModel.\n    public static ProvisioningDetailsModel ToProvisioningDetailsModel(this Provisioning provisioning)\n    {\n        var provisioningDetailsModel = new ProvisioningDetailsModel\n        {\n            ID = provisioning.ID,\n            TaskDeviceID = provisioning.TaskDevice.ID,\n            ServiceGroupID = provisioning.ServiceGroup.ID,\n            ServiceID = provisioning.Service.ID,\n            PatchSchedules = provisioning.PatchSchedules.Select(ps =&gt; ps.ToPatchScheduleDetailsModel()).ToList()\n        };\n\n        return provisioningDetailsModel;\n    }\n\n    // Convert ProvisioningDetailsModel to ProvisioningServicesProxy.PatchSchedule.\n    public static Provisioning ToProvisioning(this ProvisioningDetailsModel provisioningDetailsModel)\n    {\n        WorkflowManager workflowManager = new WorkflowManager();\n        ProvisioningManager provisioningManager = new ProvisioningManager();\n\n        TaskDevice taskDevice = workflowManager.GetTaskDeviceByID(provisioningDetailsModel.TaskDeviceID);\n        Service service = provisioningManager.GetServiceByID(provisioningDetailsModel.ServiceID);\n        ServiceGroup serviceGroup = provisioningManager.GetServiceGroupByID(provisioningDetailsModel.ServiceGroupID);\n\n        var provisioning = new Provisioning\n        {\n            ID = provisioningDetailsModel.ID,\n            TaskDevice = taskDevice,\n            ServiceGroup = serviceGroup,\n            Service = service,\n            PatchSchedules = provisioningDetailsModel.PatchSchedules.Select(ps =&gt; ps.ToPatchSchedule()).ToArray()\n        };\n\n        return provisioning;\n    }\n}\n</code></pre>\n\n<p>ProvisioningDetailsModel is a class which just contains the model's properties. Nothing special.</p>\n\n<p>I thought about decorating the Provisioning domain object such that it could be used in place of the model, but decided against it. What if I wanted to represent the Provisioning data in two different manners -- this would be impossible if I use the domain object itself as my model.</p>\n\n<p>What other options should I be considering? Extension methods would be my last choice -- especially when I have to do relatively heavy work inside of ToProvisioning.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12789904,"title":"Get site url on mvc","body":"<p>I want to write a little helper function that returns the site url.\nComing from PHP and Codeigniter, I'm very upset that I can't get it to work the way I want.</p>\n\n<p>Here's what I'm trying:</p>\n\n<pre><code>@{\n    var urlHelper = new UrlHelper(Html.ViewContext.RequestContext);\n    var baseurl = urlHelper.Content(\"~\");\n}\n\n&lt;script&gt;\n    function base_url(url) {\n\n        url = url || \"\";\n        return '@baseurl' + url;\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I want to return the base url of my application, so I can make ajax calls without worrying about paths. Here's how I intend to use it:</p>\n\n<pre><code>// Development\nbase_url(); // http://localhost:50024\n\n// Production\nbase_url(\"Custom/Path\"); // http://site.com/Custom/Path\n</code></pre>\n\n<p>How can I do something like that?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I want absolute paths because I have abstracted js objects that makes my ajax calls.\nSo suppose I have:</p>\n\n<pre><code>function MyController() {\n   // ... js code\n   return $resource('../MyController/:id');\n}\n\n// then\nvar my_ctrl = MyController();\nmy_ctrl.id = 1;\nmy_ctrl.get(); // GET: ../MyController/1\n</code></pre>\n\n<p>This works when my route is <code>http://localhost:8080/MyController/Edit</code> but will fail when is <code>http://localhost:8080/MyController</code> .</p>\n"},{"tags":["asp.net-mvc","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13144414,"title":"Saving details in a ViewModel","body":"<p>I have a ViewModel I use to create a new user, this updates three different models.</p>\n\n<p>I have a question about how I would edit these details. Looking at examples the edit method in the controller would use something like userRepository.Save(); but for the other items that are in other models other that the User model how would I save them? </p>\n"},{"tags":["asp.net-mvc","iis","io","cpu"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13142993,"title":"High CPU on IIS sites","body":"<p>I have a webserver with 10 mvc sites that I have created. All sites \"link\" to the same code in a folder. So all 10 sites run on same code. This is done have different languages on the site. </p>\n\n<p>My problem is that 1 site goes up to use 40-60% of the CPU for a few minutes. Then it drops down and another sites rises in CPU. Normally the sites use 300mb in w3wp process, but sometimes rises to 8-900mb!</p>\n\n<p>There's 20GB of memory, 18,9 is constantly used. There is also a SQL server running that takes 13GB. </p>\n\n<p>The site is a MVC 3 site. Uses caching on the SQL data.</p>\n\n<p>Every site has its own pool. </p>\n\n<p>I know its a very vague question. But can anyone see any obvious problems with this setup?</p>\n\n<p>Why does the CPU rise periodically? </p>\n\n<p>There are about constantly 100-150 users on the sites. </p>\n\n<p>Any ideas or thought would be very appreciated. </p>\n"},{"tags":["asp.net-mvc","razor","telerik","datepicker"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13143802,"title":"In Telerik DatePicker, how do I set the mimimum date to equal today?","body":"<p>I tried the code below and it didn't work.  I assume it's a little more involved.</p>\n\n<pre><code>@Html.Telerik().DatePickerFor(o =&gt; o.StartDt).Min(new System.DateTime.Now())\n</code></pre>\n\n<p>With Francois' suggestion, I get this error:\n<img src=\"http://i45.tinypic.com/4h7f35.gif\" alt=\"Error\"></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-extensions","razorgenerator"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":117,"score":3,"question_id":12975030,"title":"The custom tool 'RazorGenerator' failed. The method or operation is not implemented","body":"<p>I have just upgraded the Visual Studio extension <a href=\"http://visualstudiogallery.msdn.microsoft.com/1f6ec6ff-e89b-4c47-8e79-d2d68df894ec\" rel=\"nofollow\">RazorGenerator</a> to V1.5 (Last updated 10/14/2012) and now have the following problems. </p>\n\n<p>Each cshtml file edited now removes the generated file, if I choose to 'Run Custom Tool' I get <code>The custom tool 'RazorGenerator' failed. The method or operation is not implemented.</code></p>\n\n<p>I had it working previously in my project without issue but the upgrade seems to have broken it. Does anyone know how this can be fixed..? I can't even seem to roll back to the previous version now since it's installed via the ExtensionManager.</p>\n\n<p>The latest version of <a href=\"http://nuget.org/packages/RazorGenerator.MVC\" rel=\"nofollow\">RazorGenerator.MVC in nuget</a> is 1.4 (Friday, April 20, 2012) so perhaps the version mismatch is the issue..? </p>\n\n<p>I have tried restarting VS and my machine without success, I even un-installed the extension and re-installed and that also didn't work. </p>\n\n<pre><code>Exception calling \"RunCustomTool\" with \"0\" argument(s): \"The custom tool 'RazorGenerator' failed.  The method or operation is not implemented.\"\nAt D:\\Source\\MySolution\\MyProject\\packages\\RazorGenerator.Mvc.1.4.0.0\\tools\\RazorGenerator.psm1:32 char:32\n+         $_.Object.RunCustomTool &lt;&lt;&lt;&lt; ()\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : ComMethodTargetInvocation\n\nException calling \"GetItem\" with \"1\" argument(s): \"The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))\"\nAt D:\\Source\\MySolution\\MyProject\\packages\\RazorGenerator.Mvc.1.4.0.0\\tools\\RazorGenerator.psm1:62 char:46\n+                     $solutionExplorer.GetItem &lt;&lt;&lt;&lt; (\"$SolutionName\\$ProjectName$relativePath\").UIHierarchyItems.Expanded = $false\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : ComMethodTargetInvocation\n</code></pre>\n\n<p>In addition to this, I get the following build errors for each view (despite saying build succeeded):</p>\n\n<pre><code>Custom tool error: Could not load file or assembly 'file:///C:\\Users\\Rob\\AppData\\Local\\assembly\\dl3\\VQ93NZJ0.M7K\\4HA91P75.CHN\\4b53b7b1\\09b87db8_d4adcd01\\RazorGenerator.Core.v1.dll' or one of its dependencies. The system cannot find the file specified.\n</code></pre>\n\n<p>I <a href=\"http://razorgenerator.codeplex.com/SourceControl/changeset/view/5dd40e221a03\" rel=\"nofollow\">downloaded the source</a>, built locally and copied the 'RazorGenerator.Core.v1.dll' into the directory from the error message but it still didn't work. I even copied all of the RazorGenerator*.dll files into that directory but still no luck. Checking the dependencies only shows system assemblies and 'RazorGenerator.Core.dll' which is present in the same directory. </p>\n\n<p>Incidentally, the 'RazorGenerator.Core.dll' was already in the directory above. </p>\n\n<p>Looking in the Visual Studio extensions folder I have a directory for RazorGenerator as follows:</p>\n\n<pre><code>C:\\Users\\Rob\\AppData\\Local\\Microsoft\\VisualStudio\\10.0\\Extensions\\RazorGenerator contributors\\Razor Generator\\1.5\n</code></pre>\n\n<p>The following files and assemblies are within this folder:</p>\n\n<pre><code>extension.vsixmanifest\nRazorGenerator.Core.dll\nRazorGenerator.Core.v1.dll\nRazorGenerator.Core.V2.dll\nRazorGenerator.dll\nRazorGenerator.pdb\nRazorGenerator.pkgdef\n</code></pre>\n\n<p>Any help would be very much appreciated. </p>\n"},{"tags":["asp.net-mvc","http","error-handling"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13137914,"title":"Accessing the exception if custom redirection redirects to a controller","body":"<p>I am using MVC4, and would like to be able to throw HttpExceptions from a ontroller, and handle those in a seperate controler.</p>\n\n<p>I have set up <code>&lt;customErrors mode=\"On\" defaultRedirect=\"/Error\"/&gt;</code> for this. This works, but in my controller I would like to be able to access the exception.</p>\n\n<p>Preferably I would like to have two modes:</p>\n\n<ol>\n<li><p>Handle instances of HttpException, so that from a controller I can throw a HttpException and have it handled accordingly</p></li>\n<li><p>Handle all other errors.</p></li>\n</ol>\n\n<p>in case of the first, I would like to present the useragent with the appropriate status code, and possibly a view. In case of the second I want to present the useragent with status 500, and show a default view with an optional message.</p>\n\n<p>For this, I think I need to access the exception data - at least, I can't think of any other proper way to do this.</p>\n\n<p>What is the proper way to set this up? I know there are plethoria of other questions on error handling in MVC, yet none seem to answer these questions.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12311574,"title":"passing jquery array to asp.net mvc controller","body":"<p>how exactly should the 'myArray' array be passed to the mvc controller? I've tried everything but i can't seem to get anything to work</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult MyAction(MyModel model, List&lt;string&gt; myArray) {\n     //code...\n}\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>$('#dialog').dialog({\n        //...\n        buttons: {\n            \"Cancel\": function () {\n                $(this).dialog(\"close\");\n            },\n            \"Submit\": function () {\n                var arrCount= 0;\n                var myArray = new Array();\n\n                //grabs all the dropdownlists that begin with id 'dropdownlist' and adds it to 'myArray'\n                $('form').contents().find(\"select[id ^= 'dropdownlist'] option:selected\").each(function () {\n                    myArray[arrCount++] = $(this).text();\n                });\n\n                if ($('form').validate().form()) {\n                    $.ajax({\n                        url: \"MyController/MyAction\",\n                        type: 'POST',\n                        dataType: \"json\",\n                        traditional: true,\n                        data: { \n                           model: $(\"form\").serialize(),\n                           myArray: myArray\n                        },\n                        success: function (result) {\n                            alert(\"debug: complete\");\n                        }\n                    });\n                }\n            }\n        }\n    });\n</code></pre>\n\n<p>I know how to pass in the array by itself to the controller. But, once i add my existing model into the equation, i'm unsure as to how i would be able pass my array to the controller. Any thoughts?</p>\n"},{"tags":["asp.net-mvc","json","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13137714,"title":"Passing JSON as a model object from my controller to a strongly typed view","body":"<p>I am building an asp.net mvc 4 web application that calls a web service provider then i am displaying the json result that is returned from the web services call using java script. for example on the controller level I have the following action method:-</p>\n\n<pre><code>public ActionResult ListPackages()\n        {            using (var client = new WebClient())\n            {                try\n                {\n                    var query = HttpUtility.ParseQueryString(string.Empty);\n                    var url = new UriBuilder(\"http://localhost:8080/jw/web/json/workflow/package/list\");\n                    url.Query = query.ToString();\n                    string json = client.DownloadString(url.ToString());\n                    Thread.Sleep(500);\n                    return Content(json, \"application/json\");\n                }\n                catch (System.Net.WebException) {\n\n                   return Content(\"error\", \"application/json\");\n\n                }           }        }\n</code></pre>\n\n<p>Then i am using a java script to display the JSON on the view:-</p>\n\n<pre><code>function getpackagelist(result) {\n        $('#products').empty();\n        $('#title').text(\"All Processes\");\n        $.each(result.data, function (key, val) {\n            var str = val.packageName;\n            $('&lt;li/&gt;', { text: str })\n                .appendTo($('#products'));\n        });\n        $('#tobehide').hide();\n</code></pre>\n\n<p>and finally on the view i have the following code which calls the above action method and the java script:-</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Home Page\";\n}\n@Ajax.ActionLink(\"Get Process List\", \"ListPackages\", \"Home\",\nnew AjaxOptions\n    {    HttpMethod = \"GET\",\n        LoadingElementId = \"tobehide\",\n        OnBegin = \"clear\",\n\n        OnFailure = \"clear\",\n        OnSuccess = \"getpackagelist\"\n    })\n&lt;div id= \"geturl\" data-url=\"@Url.Action(\"ListPackages\", \"Home\")\"&gt;\n    &lt;img class=\"hide\" id=\"tobehide\" src=\"~/Content/ajax-loading2.gif\" /&gt;\n&lt;h1 id =\"title\"&gt;&lt;/h1&gt;\n\n&lt;ul id=\"products\"&gt;\n\n&lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The above is working well, but i find it difficult to do the whole staff using javascript, so i am thinking of passing the JSON as a model to a strongly-typed view instead of using java script, but i have the following questions:-</p>\n\n<ol>\n<li><p>what are the pros and cons of these two approaches (using javaScript versus passing the JSON to a strongly-typed view).</p></li>\n<li><p>how I can pass the JSON as a model to my strongly-typed view.</p></li>\n<li><p>which approach i should follow ??</p></li>\n</ol>\n\n<p>Thanks in advance for any help.</p>\n\n<p>Best Regards</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13139081,"title":"MVC, entity framework, foreign key data not displayed creating new item","body":"<p>Using MVC4 and EF5 codefirst. Got a problem whereby when creating a new data record with reference to a row with a foreign key. Listing created entries everything looks fine:</p>\n\n<pre><code>@foreach (var item in Model) {\n   @Html.DisplayFor(modelItem =&gt; item.Location.name)\n   @Html.DisplayFor(modelItem =&gt; item.Action.name)\n   ...\n</code></pre>\n\n<p>Creating a new record the reference fails to display the foreign content (names):</p>\n\n<pre><code>    ...\n    @Html.LabelFor(model =&gt; model.locationID)\n    @Html.DisplayFor(model =&gt; model.Location.name)\n\n    @Html.LabelFor(model =&gt; model.actionID)\n    @Html.DisplayFor(model =&gt; model.Action.name)\n    ...\n</code></pre>\n\n<p>The foreign keys are correctly filled in the controller (see simplied example) </p>\n\n<pre><code>    public ActionResult Create()\n    {\n        Timerecord tm = new Timerecord();\n\n        tm.currentTime = DateTime.Now;\n        tm.locationID = 1;\n        tm.actionID = 5;\n\n        ViewData.Model = tm;\n        return View();\n    }\n</code></pre>\n\n<p>and the record is correctly created in the database. Just the names are not displayed on the view. Do I have to fetch the associated reocrd myselfs during the Create?</p>\n"},{"tags":["asp.net","asp.net-mvc","entity-framework","asp.net-mvc-4","simplemembership"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1082,"score":3,"question_id":12254701,"title":"SimpleMembershipProvider not working","body":"<p>I started a new internet project with VS2012 and am trying to just restructure my project a bit and I can't seem to keep the SimpleMemberhsipProvider working.  Basically, all I've done is move the models objects into a core project along with a couple other items.  I've implemented Ninject and am trying to abstract Entity a bit by using a repository pattern to get my data.  I really don't feel as though I've changed much with the current project, but for some reason when I start the application now I get:</p>\n\n<blockquote>\n  <p>{\"The Role Manager feature has not been enabled.\"}</p>\n</blockquote>\n\n<p>The ActionFilter that is supplied by the framework is where the error is thrown when:</p>\n\n<blockquote>\n  <p>WebSecurity.InitializeDatabaseConnection(\"DefaultConnection\", \"UserProfile\", \"Id\", \"UserName\", autoCreateTables: true); </p>\n</blockquote>\n\n<p>is called. </p>\n\n<p>Here is some of the stacktrace:</p>\n\n<blockquote>\n  <p>[ProviderException: The Role Manager feature has not been enabled.]<br>\n  System.Web.Security.Roles.EnsureEnabled() +9561885<br>\n  System.Web.Security.Roles.get_Provider() +8<br>\n  WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo\n  connect, String userTableName, String userIdColumn, String\n  userNameColumn, Boolean autoCreateTables) +104<br>\n  WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String\n  connectionStringName, String userTableName, String userIdColumn,\n  String userNameColumn, Boolean autoCreateTables) +100<br>\n  InoutBoard.Core.Infrastructure.Filters.SimpleMembershipInitializer..ctor()\n  in c:\\Users\\Kyle\\Documents\\Visual Studio\n  2012\\Projects\\InoutBoard\\InoutBoard.Core\\Infrastructure\\Filters\\InitializeSimpleMembershipAttribute.cs:42</p>\n  \n  <p>[InvalidOperationException: The ASP.NET Simple Membership database\n  could not be initialized. For more information, please see\n  http://go.microsoft.com/fwlink/?LinkId=256588]<br>\n  InoutBoard.Core.Infrastructure.Filters.SimpleMembershipInitializer..ctor()\n  in c:\\Users\\Kyle\\Documents\\Visual Studio\n  2012\\Projects\\InoutBoard\\InoutBoard.Core\\Infrastructure\\Filters\\InitializeSimpleMembershipAttribute.cs:46</p>\n</blockquote>\n\n<p>I'm hosting the code on github at the following link <a href=\"https://github.com/keroger2k/InoutBoard\" rel=\"nofollow\">https://github.com/keroger2k/InoutBoard</a></p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":111,"score":1,"question_id":12244128,"title":"Type safe URL Action in MVC3 issue","body":"<p>I don't like Url.Action(\"string\", \"string) and hence wrote below extension method</p>\n\n<pre><code>public static string Action&lt;TController&gt;(this UrlHelper urlHelper, Expression&lt;Func&lt;TController, object&gt;&gt; actionExpression)\n{\n    var controllerName = typeof(TController).GetControllerName();\n    var actionName = actionExpression.GetActionName();\n\n    return urlHelper.Action(actionName, controllerName);\n}\n</code></pre>\n\n<p>I use it in my razor view like below:</p>\n\n<pre><code>@{Url.Action&lt;ClientController&gt;(action =&gt; action.ClientDetails());}\n</code></pre>\n\n<p>It doesn't render anything. Am I making any mistake anywhere or am I missing anything? Is it possible to do this as I like the Type Safe nature, rather than hard-coding actionnames and controllers?</p>\n"},{"tags":["asp.net","asp.net-mvc","excel","object"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13143007,"title":"Convert object into excel file for MVC web app","body":"<p>Example, I have an item object with two properties</p>\n\n<pre><code>public class Item {\n   public string Name { get; set; }\n   public decimal Price { get; set; }\n}\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>Item item = new Item();\n</code></pre>\n\n<p>How can I pass this 'item' object to convert it into excel and save it to a target folder location.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","scheduled-tasks","azure-web-roles"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13131869,"title":"Run a controller method at a fixed schedule within MVC?","body":"<p>We have an existing method in an existing controller that we'd like to call at a specific schedule (eg \"daily at 2am\"). The application is an MVC3 application running on Azure as a web role and we don't want to create, maintain and pay for an entire new role (worker role) just to run one small piece of identical logic.</p>\n\n<p>Is it possible to schedule a controller method to trigger off at a specific scheduled time in the future? Also, would the same technique work in regular ASP.NET webforms?</p>\n"},{"tags":["c#","asp.net-mvc","web-applications","download","file-download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13136611,"title":"How to limit speed downloading file in asp.net mvc 3","body":"<p>I have read this article on codeproject, but i dont know how to apply it to asp.net mvc 3\n<a href=\"http://www.codeproject.com/Articles/18243/Bandwidth-throttling\" rel=\"nofollow\">http://www.codeproject.com/Articles/18243/Bandwidth-throttling</a></p>\n\n<p>Here is code for downloading a file in my project</p>\n\n<pre><code>public ActionResult GetFile(int id)\n{\n    var f = FileAcc.GetInfo(id);\n    var templateStr = new FileStream(Server.MapPath(f.file_url), FileMode.Open);\n    return File(templateStr, f.file_name);\n}\n</code></pre>\n\n<p>Plz support me on this issues, thanks a lot!</p>\n"},{"tags":["asp.net","asp.net-mvc","c#-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":18,"score":0,"question_id":13141682,"title":"Which is free and open source b2b (business 2 business) portal in asp.net?","body":"<p>Hi can anybody tell me which is free and open source solution provide me to create business to business solution web site?</p>\n\n<p>For e.g: <a href=\"http://www.alibaba.com/\" rel=\"nofollow\">http://www.alibaba.com/</a></p>\n\n<p>I know nopcommerce provide only E-Commerce solution. E-Commerce and b2b solution both are different concept.\nIf anybody have more idea then please....</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":29,"score":-5,"question_id":13141525,"title":"Multilingual Website with Jquery Globalization?","body":"<p>I want to create multilingual website with using Jquery Globalization Plugin. So far I have found on net is implementation of globalization with jquery of dates, currency formats , prices etc. Please guide if I have to translate text string from one language to other without resource file , using Jquery Plugin how can I achieve that functionality? </p>\n"},{"tags":["asp.net-mvc","smtp","contact-form","mailmessage","webmail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13141227,"title":"How do you get e-mails to use the \"From\" parameter in WebMail.Send with MVC?","body":"<p>I have set up a contact form on my site for users to send messages to me to get in contact.</p>\n\n<p>The WebMail.Send() method of sending a message works fine but the problem is, when I receive the e-mail it is received from the e-mail that I have defined for the SMTP client. </p>\n\n<p>The call for sending the mail looks like this:</p>\n\n<pre><code>WebMail.Send(mailMessage.To[0].Address, mailMessage.Subject, mailMessage.Body, mailMessage.From.Address);\n</code></pre>\n\n<p>What I want to know is how do I get the messages to send using this method but receive to me with the MailMessage's from address rather than my SMTP account address?</p>\n"},{"tags":["c#","asp.net-mvc","iis","browser"],"answer_count":1,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":175,"score":8,"question_id":13064877,"title":"Why is my MVC controller slow when serving images","body":"<p>I have this MVC view that has a list of images, these images are dynamic so they come from a controller. To simplify things this controller has only this code:</p>\n\n<pre><code>    [OutputCache(Duration = 0, NoStore = true, Location = OutputCacheLocation.None)]\n    public ActionResult RenderImage(int id)\n    {\n    return File(@\"C:\\Users\\Pictures\\myimage.png\", \"image/png\");\n    }\n</code></pre>\n\n<p>I'm not caching things to prove my point.</p>\n\n<p>My view requests 8 images all with a different id, and the timings are horrible:</p>\n\n<p><img src=\"http://i.stack.imgur.com/3T1J4.png\" alt=\"timings\"></p>\n\n<p>Sometimes it's fast for some images (which are all the same) and on each refresh it's different, can't find a pattern in it.</p>\n\n<p>The app is hosted in IIS and the timetaken in the server logs shows it's the server that is eating up the time:</p>\n\n<p><img src=\"http://i.stack.imgur.com/vBFXP.png\" alt=\"enter image description here\"></p>\n\n<p>Has anyone a clue why this happens? If I request the images individually (not in the page) it's always fast.</p>\n"},{"tags":["asp.net","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1066,"score":0,"question_id":11897416,"title":"Binding database with kendo UI grid in ASP.NET MVC","body":"<p>Hi i am trying to implement KENDO UI grid control in my ASP.NET MVC application.\nI know KENDO UI guys have given numerous examples but its not working for me .\nMy Model code is :</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Data.SqlClient;\nusing System.Data.Sql;\nusing System.Data;\n\nnamespace KendoGrid.Models\n{\n    public class status\n    {\n        public string SiteId { get; set; }\n        public string SiteName { get; set; }\n        public string SiteStatus { get; set; }\n\n        public static List&lt;status&gt; StatusInfo()\n        {\n\n            SqlConnection sconn = new SqlConnection(@\"Data Source=DS-7071BC8FDEE6\\SQLEXPRESS;Initial Catalog=AmanoTest;User ID=sa;Password=india@123\");\n            SqlCommand cmd = new SqlCommand(\"select * from SiteMaster\", sconn);\n            SqlDataAdapter sda = new SqlDataAdapter(cmd);\n            DataTable dt = new DataTable();\n            sda.Fill(dt);\n            status cstat;\n            List&lt;status&gt; statlist = new List&lt;status&gt;();\n            foreach (DataRow dr1 in dt.Rows)\n            {\n                cstat = new status();\n                cstat.SiteId = dr1[0].ToString();\n                cstat.SiteName = dr1[1].ToString();\n                cstat.SiteStatus = dr1[2].ToString();\n\n                statlist.Add(cstat);\n\n\n            }\n            return statlist;\n        }\n    }\n}\n</code></pre>\n\n<p>My Controller Code is :</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing KendoGrid.Models;\nusing Kendo.Mvc.UI;\n\nnamespace KendoGrid.Controllers\n{\n    public class statusController : Controller\n    {\n        //\n        // GET: /status/\n\n        public ActionResult Index()\n        {\n            return View();\n        }\n        public ActionResult Site()\n        {\n            //List&lt;status&gt; status = status.GetStatus();\n            List&lt;status&gt; temp = status.StatusInfo();\n            ViewData[\"table\"] = temp;\n            return View();\n        }\n\n    }\n}\n</code></pre>\n\n<p>and my view (cshtml page) is :</p>\n\n<pre><code>@model KendoGrid.Models.status\n@using Kendo.Mvc.UI \n\n@*@{\n    Layout = null;\n }\n*@\n&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n    &lt;title&gt;Site&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div&gt;\n        @(Html.Kendo().Grid(Model)()\n                .Name(\"Grid\")\n                .Columns(columns =&gt;\n                    {\n                        columns.Bound(p =&gt; p.siteID);\n                        columns.Bound(p =&gt; p.siteID);\n                        columns.Bound(p =&gt; p.siteID);\n                    })\n            .Pageable()\n            .Sortable()\n            .Scrollable()\n            .Filterable() \n            .DataSource(dataSource =&gt; dataSource        \n        .Ajax()\n        .ServerOperation(false)\n        )\n                )\n   &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>On executing it says :\nThe best overloaded method match for 'Kendo.Mvc.UI.Fluent.WidgetFactory.Grid(System.Data.DataTable)' has some invalid arguments</p>\n\n<p>Kindly Help ...\nThanx in advance </p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":40,"score":-3,"question_id":13139117,"title":"How to Pass data from one view to another in MVC","body":"<p>i am having details view which contains Id \nI want tht Id to be passed in another view where am creating the new Program having same Id as in details view </p>\n"},{"tags":["asp.net-mvc","mobile-development"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13122546,"title":"HttpContext.Request.Browser.IsMobileDevice not working on Production only?","body":"<p>I have a fairly standard MVC website Contact page that includes ReCaptcha to weed out bots.  All is working perfectly.  I added mobile pages to the site and due to visibility concerns currently wish to omit the recaptcha validation in the controller for the mobile pages only.  </p>\n\n<p>Locally this works perfectly, as I check for invalid captcha, and if NOT a mobile device I add error to the model and catch in Catch block.  If mobile don't worry about captcha, just validate the model.  </p>\n\n<pre><code>    [HttpPost, RecaptchaControlMvc.CaptchaValidator]\n    [ValidateAntiForgeryToken]\n    public ActionResult Submit(ContactFormViewModel viewModel, bool captchaValid, string captchaErrorMessage)\n    {\n        try\n        {\n            if (!captchaValid)\n                if (!HttpContext.Request.Browser.IsMobileDevice)\n                    ModelState.AddModelError(\"captcha\", captchaErrorMessage);\n\n            if (ModelState.IsValid)\n            {\n                if (viewModel.Save(viewModel))\n                    return RedirectToAction(\"Thanks\");\n            }\n            return View(\"Create\");\n        }\n        catch (Exception ex)\n        { //. . . error processing\n        }\n</code></pre>\n\n<p>As above, this works perfect locally against both Safari UserAgent set to iPhone, iPad, etc. as well as Opera emulator for a variety of phones.  Yet when I deploy to Production, I contantly get an error thrown on Submit with my Captcha error displayed.  To me this means the .IsMobileDevice test failed.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks in advance,\nDan</p>\n"},{"tags":["asp.net-mvc","webforms","sitemap"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":418,"score":1,"question_id":10262228,"title":"Dynamically Generating sitemap.xml","body":"<p>I've implemented a sitemap that is dynamically generated on the fly using the technique described <a href=\"http://www.blackbeltcoder.com/Articles/asp/dynamic-sitemaps-in-asp-net\" rel=\"nofollow\">here</a>.</p>\n\n<p>Since my site is a WebForms app, my sitemap URL ends up being www.mydomain.com/Sitemap.aspx.</p>\n\n<p>This is working well, and I can use search engine webmaster tools to tell them the URL to my sitemap. However, smaller search engines may not know where to find this file. It would be better if my dynamically generated sitemap could be at www.mydomain.com/sitemap.xml. This is the standard URL for a sitemap.</p>\n\n<p>What is the easiest way to generate the same sitemap data I do now but have it appear as the file sitemap.xml. Can I do it using routing, or do I need a custom HTTP handler?</p>\n\n<p>I'm using webforms but also have sites using ASP.NET MVC so I'm very interested in finding the best technique to do this in both platforms.</p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12963363,"title":"using routes.MapPath to accomadate missing URL oparameter","body":"<p>I have an MVC website which used to use URLs in the standard format of:  Controller/Action.</p>\n\n<p>Recently, I have changed it to:   Site/Controller/Action. </p>\n\n<p>The problem is, there are several links to my site out there which follow the old format, and I want to redirect them accordingly.</p>\n\n<p>for example: mydomain.com/Home/CustomerSearch now should go to mydomain.com/Online/Home/CustomerSearch</p>\n\n<p>whereas: mydomain.com/AffiliatesHome/CustomerSearch now should go to mydomain.com/Affiliate/AffiliatesHome/CustomerSearch</p>\n\n<p>How can I get it to handle the redirecting by putting in the extra routing, depending on the link they came in by?</p>\n\n<p>The current routing I am using is:</p>\n\n<p>routes.MapRoute(\n      \"Default\", // Route name\n      \"{site}/{controller}/{action}/{id}\",<br>\n      new {site=\"IS\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n   );</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13137760,"title":"Send Viewbag / List / Object as querystring mvc4 asp.net","body":"<p>I have simple link on which I want to send my <code>list&lt;obj&gt;</code> as querystring or parameter.</p>\n\n<p>So is it possible to send anything like object or list or viewbag as parameter to view ?</p>\n\n<p>how ?</p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13009730,"title":"Why does my dynamic viewdata not get listed in my partial view?","body":"<p>I have passed the value from controller </p>\n\n<pre><code>public ActionResult Index(int? Page, string sortcol=\"ID\", string sortorder=\"ASC\", string firstname = \"\", string lastname = \"\", string emailaddress = \"\")\n{\n     int TotalPages = 0;\n\n        var userlist = ur.GetUsersList(firstname, lastname, emailaddress, Page ?? 1, PageSize,out TotalPages, sortcol, sortorder);\n\n        ViewBag.PageIndex = 1;\n\n        ViewData[\"TotalPages\"] = TotalPages.ToString();\n\n        if (Request.IsAjaxRequest())\n        {\n            return PartialView(\"ListUsers\", userlist);\n        }\n        return View(userlist);\n    }\n</code></pre>\n\n<p>And in my parent view:</p>\n\n<pre><code>@Html.Partial(\"ListUsers\", Model, ViewData)\n</code></pre>\n\n<p>And in my child view (listusers):</p>\n\n<pre><code>@ViewData[\"TotalPages\"]\n</code></pre>\n\n<p>i cannot get the value of Viewdata totalpages. Why is it so?\nIt always returns zero.</p>\n"},{"tags":["ajax","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13138962,"title":"Ajax.BeginForm not working, and Response.IsAjaxRequest() is always false","body":"<p>I'm using MVC3\ni included the scripts</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" &gt;&lt;/script&gt; \n&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>in web.config </p>\n\n<pre><code>&lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n&lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n</code></pre>\n\n<p>this is my simply view \n    <p></p>\n\n<pre><code>  @using (Ajax.BeginForm(\"AjaxLogOn\", \"Account\", null, new AjaxOptions { HttpMethod = \"POST\" }))\n    {        \n        &lt;label&gt;Login&lt;/label&gt;\n        @Html.TextBox(\"UserName\")\n        &lt;br /&gt;\n        &lt;label&gt;Password&lt;/label&gt;\n        @Html.Password(\"Password\")\n        &lt;br /&gt;\n        @Html.CheckBox(\"RememberMe\") &lt;text&gt;Remember me &lt;/text&gt; \n        &lt;br /&gt;\n        &lt;input type=\"submit\" value=\"LogOn\" id=\"login\" /&gt;\n        &lt;br /&gt;\n        &lt;span id=\"logOnMessage\"&gt;&lt;/span&gt;                  \n    }\n&lt;/p&gt;\n</code></pre>\n\n<p>and action </p>\n\n<pre><code> public ActionResult AjaxLogOn(string UserName, string Password, bool? RememberMe, string returnUrl)\n    {\n    if (Request.IsAjaxRequest())\n    {                                        \n    }\n    return Json(result);\n    }\n</code></pre>\n\n<p>in this action IsAjaxRequest() method always returns false. And there isn't X-Requested-With:XMLHttpRequest element in request headers.\nWhat is the problem?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":6922,"score":8,"question_id":4970452,"title":"ASP.Net Chart Control with MVC3 Razor","body":"<p>I am using ASP.Net MVC3 and the MS chart controls to draw a pie chart.</p>\n\n<p>It seems I have to set an IMG control with the source set to an action controller.\nHowever this looses the possibility of being able to 'click' on the image and get a redirect to another page with the relevant segment that has been clicked.</p>\n\n<p>Can anyone help?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","jquery-plugins","jwysiwyg"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13136883,"title":"Jquery wysiwyg editor remove formatting plugin (rmFormat) not working","body":"<p>I've downloaded and implemented the following plugin:\n<a href=\"https://github.com/jwysiwyg/jwysiwyg\" rel=\"nofollow\">https://github.com/jwysiwyg/jwysiwyg</a></p>\n\n<p>Now I don't want users to be able to format the text entered into the plugin, just basic bold itallics and paragraphs. So I've <strong>tried</strong> to implement the <a href=\"https://github.com/jwysiwyg/jwysiwyg/blob/master/plugins/wysiwyg.rmFormat.js\" rel=\"nofollow\">rmFormat</a> plugin</p>\n\n<pre><code>$('textarea.wysiwyg').wysiwyg({\n        brIE: true,\n        rmUnusedControls: true,\n        controls: {\n            bold: { visible: true },\n            italic: { visible: true },\n            h3: { visible: true },\n            removeFormat: { visible: true }\n        },\n        rmUnwantedBr: false,\n        plugins: {\n            rmFormat: {\n                rmMsWordMarkup: true,\n                enabled:true\n            }\n        }\n    });\n</code></pre>\n\n<p>But well it just doesn't work! anyone any experience of this? If not anyone got any other suggestions of controls like this that allow very simple markup control only? </p>\n\n<p>Site is <strong>MVC</strong> btw</p>\n\n<p>Here's a fiddle</p>\n\n<p><a href=\"http://jsfiddle.net/KjVEt/69/\" rel=\"nofollow\">http://jsfiddle.net/KjVEt/69/</a></p>\n"},{"tags":["c#","asp.net-mvc","mvc","razor","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":43,"score":-2,"question_id":13098543,"title":"how to bind the dynamic data table in mvc grid asop.net","body":"<p>I need to bind the dynamic data table in mvc grid. Give some code, samples and examples. for the dynamic data binding\n Thank you </p>\n"},{"tags":["asp.net-mvc","mvc","model-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13110728,"title":"Use single view model for details, edit and list","body":"<p>My view model looks something like this:</p>\n\n<pre><code>public class CarViewModel {\n    public CarModel Car { get; set; }\n    public List&lt;CarModel&gt; Cars { get; set; }\n}\n</code></pre>\n\n<p><code>CarModel</code> looks like:</p>\n\n<pre><code>public class Car() {\n    public string Make { get; set; }\n    public string Model { get; set; }\n    . . .\n}\n</code></pre>\n\n<p>My goal is to only have a single view model that I can use for both my list views and single views. For the list view, I would hydrate the Cars list and use that within the view, while ignoring the single Car entity.</p>\n\n<p>For a details view, it would be the opposite. My controller would hydrate the single Car entity, and the view would use that and ignore the List.</p>\n\n<p>This is partially working, but the model binding is weak.</p>\n\n<p>DRY (don't repeat yourself) and SOC/SRP (separation of concerns/single responsibility principal) seem to be conflicting here. What's the best way to handle both a list view plus a details view? I have a feeling the answer is to create duplicate view models, but I don't want to duplicate code if I can help it.</p>\n"},{"tags":["c#","javascript","asp.net-mvc","radio-button","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13123859,"title":"MVC3 radio buttons validation","body":"<p>I have a question about radio buttons and checks.</p>\n\n<p>So in first, in my views part I have a textbox with a login value. Between this textbox and the submit button, I have 5 radio buttons. Each of these rb referenced a property in my ViewModel.</p>\n\n<p>So here is the code.\nMy ViewModel with the properties:</p>\n\n<pre><code>public class DeleteUAInfosViewModel\n{\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserLeave\n    {\n        get { return UserAccountResources.UserLeave; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserTransfer\n    {\n        get { return UserAccountResources.UserTransfer; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserDetachment\n    {\n        get { return UserAccountResources.UserDetachment; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserRetirement\n    {\n        get { return UserAccountResources.UserRetirement; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserStatus\n    {\n        get { return UserAccountResources.UserStatus; }\n    }\n}\n</code></pre>\n\n<p>My IndexViewModel where I link the DeleteUAInfosViewModel:</p>\n\n<pre><code>public class IndexViewModel\n{\n        [Display(Name = \"DeleteUAInfos\", ResourceType = typeof(UserAccountResources))]\n        public DeleteUAInfosViewModel DeleteUAInfosGroup { get; set; }\n\n        public IndexViewModel()\n        {\n            DeleteUAInfosGroup = new DeleteUAInfosViewModel();\n        }\n\n        ...\n}\n</code></pre>\n\n<p>My partial View with the declaration of rb:</p>\n\n<pre><code>@model MyPath.UserAccount.DeleteUAInfosViewModel\n\n&lt;div id=\"UserDeleteInfosField\"&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserLeave)\n        @UserAccountResources.UserLeave\n        @Html.HiddenFor(x =&gt; x.UserLeave)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserTransfer)\n        @UserAccountResources.UserTransfer\n        @Html.HiddenFor(x =&gt; x.UserTransfer)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserDetachment)\n        @UserAccountResources.UserDetachment\n        @Html.HiddenFor(x =&gt; x.UserDetachment)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserRetirement)\n        @UserAccountResources.UserRetirement\n        @Html.HiddenFor(x =&gt; x.UserRetirement)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserStatus)\n        @UserAccountResources.UserStatus\n        @Html.HiddenFor(x =&gt; x.UserStatus)   \n    &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I call this partial view in another view with this line:</p>\n\n<pre><code>@Html.Partial(\"_DeleteUAInfos\", Model.DeleteUAInfosGroup)\n</code></pre>\n\n<p>Currently I performed a check if the login is null or empty.</p>\n\n<p>But now I need to include the check of the radio buttons.\nExample: I want to verify if the login is correct AND at least one rb is checked (and retrieved the value).</p>\n\n<p>In another words: I want to integrate the check of the radio buttons with the check of the login value (in my case the login part is already done).</p>\n\n<p>So can you help me with that ?</p>\n\n<p>Thanks in advance !</p>\n\n<p>Ars_n</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13137103,"title":"Making a text box in mvc readable from model","body":"<p>I have a model which I have binded with a view having text boxes. Now their are certain text boxes which i want to make read only and that to from the model class.\nSo any suggestions how can i make them read only from the  model class.</p>\n"},{"tags":["c#","javascript","asp.net-mvc","linq","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13129475,"title":"date format not correct when pulling from database using linq query","body":"<p>I want to pull a date from db and display it in a telerik ddl. I am able to pull the date and display it, but cant get the formatting to work. The date is display like this:</p>\n\n<pre><code>/Date(13496724000000)/\n</code></pre>\n\n<p>Here is my Controller action to pull the date from db:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Date(int id)\n    {\n        var dates = (from p in db.vwdb.Where(u =&gt; u.Id == id)\n                           group p by p.Date into g\n                    select g.Key).ToList();\n\n        return Json(new { data = Convert.ToDateTime(weeks.Min())});\n    }\n</code></pre>\n\n<p>Here is my jquery to display it in ddl:</p>\n\n<pre><code>function populateDate() {\n    var link = '/Users/Date';\n    var dataSource = [];\n    $.ajax({\n        type: 'POST',\n        url: link,\n        data: { id: id },\n        dataType: 'json',\n        success: function (result) {\n                var dateOf = result.data;\n                dataSource.push({ Text: dateOf , Value: dateOf });\n            $(\"#Date\").data(\"tDropDownList\").dataBind(dataSource);\n        },\n        error: function (result) {\n            alert(result.message);\n        }\n    });\n};\n</code></pre>\n\n<p>I want to display the date in this format: \"MM/DD/YYYY\" \ninstead of  \"/Date(13496724000000)/\"</p>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13132719,"title":"How to use ReadOnly data annotation on condition?","body":"<p>I want to apply ReadOnly data annotation on my ViewModel properties. But this need to be checked and should be applied, based upon some condition. </p>\n\n<p>For example if I have some field mapping saved into my Database table and then I want to check on the ViewModel properties, whether this need to be ReadOnly or Editable. </p>\n\n<p>I appreciate if you can share your thought here.</p>\n"},{"tags":["ajax","asp.net-mvc","menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13116925,"title":"Avoid re-display of menu using MVC","body":"<p>My team is creating an MVC4 application which has an upper menu structure that contains menu items specific for the currently logged-in user, and displays the content for the selected menu item below. The menus are displayed in a partial view \"_MainMenu\" and the MainMenuController Index action is responsible for getting the menu data from the database and returning the menu partial view. The main layout \"_Layout\" renders the menu by calling @Html.Action(\"Index\", \"MainMenu\").</p>\n\n<p>We want to avoid hitting the database to get the menu structure data every time the page is refreshed, and we also ideally want to avoid any visible reload of the menu structure when a different menu item is selected.</p>\n\n<p>I've been looking into AJAX, and I've implemented something where selecting a new menu item will load the content for that item below the menu by replacing a div with ID=\"mainContent\" with the content as a partial view (this div lives on the loaded view \"MainContent\"). In this way, the menu is never re-loaded and the page never refreshes completely (only the different partial content views are swapped in and out as different menu items are selected).</p>\n\n<p>This solution works, but I'm not sure if it's really best practice, or if there's a better solution involving caching. One of the problems with the AJAX solution is the URL never changes from \"http://MySite/MainContent\". This means that clicking the Back button on the browser doesn't work as expected, and also hitting F5 to refresh the browser page loses the currently displayed page. The refresh issue can probably be resolved by remembering the selected menu item, but I'm still not convinced this isthe way AJAX was intended to be used.</p>\n\n<p>Can someone please tell me if they think caching would be a better solution for this scenario based on their experience.</p>\n"},{"tags":["asp.net-mvc","razor","virtualbox","windows-server-2008-r2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13124094,"title":"What is the best way to set up my intranet server for MVC 4?","body":"<p>I have recently started programming with Asp.Net MVC 4. I have downloaded Visual Studio 2010 from Microsoft DreamSpark and a \"Standard\" Microsoft Server 2008 R2. Now I installed the Server into a VirtualBox on Promiscuous Network (thus allowing it to talk to my whole network) and next I want to use it to test my applications.</p>\n\n<p>Can you point me to good resources that tell me how to set up the server best for this?</p>\n\n<p>Thank you so much for your help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":37,"score":4,"question_id":13118612,"title":"Difference between \"Response.PermanentRedirect\" and \"Delete Verb in MVC\"","body":"<p>When using \"Response.PermanentRedirect\"</p>\n\n<p>It will return back Http Response Code 301 which means permanent redirection to diferent location. This may not be any value for end user using the browser but for search engines it will help the search engines not to index permanently redirected urls.</p>\n\n<p><strong>Question</strong> - Does <code>Delete Verb</code> in MVC perform the same function ?</p>\n\n<hr>\n\n<p><strong>Post</strong> a new entity as an addition to a URI. <code>Put</code> replaces an entity that is identified by a URI.</p>\n\n<p><strong>Question</strong> - When performing the insert/update, the information is being submitted in both cases. Does it means in case of Insert, <code>Post verb</code> should be used and in case of Update <code>Put verb</code> should be used ?</p>\n"},{"tags":["c","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":46,"score":-5,"question_id":13128000,"title":"Gravar o código Id de uma lista (Mvc3 / C#)","body":"<p>I created a simple list with id, name.\nI filled her, but when she step into the DropDownList and save the command system does not write the code in the database.</p>\n\n<p>I searched a lot but still do not understand how it works to write the code in the database.</p>\n\n<p>Controller:</p>\n\n<pre><code>List&lt;Myclass&gt; list = new List&lt;Myclass&gt;();\n\n            foreach (var item in b) // b and an array of data \n            {\n                Myclass obj = new Myclass();\n                obj.Id = Int32.Parse(item.Value);\n                obj.Name = item.Text;\n                list.Add(obj);\n            }\n\n            ViewBag.status = list;\n</code></pre>\n\n<p>Create.cshtml :</p>\n\n<pre><code>@Html.DropDownList(\"ddlStatus\", new SelectList(ViewBag.status,\"Id\",\"Name\"))\n</code></pre>\n\n<p>Everything is okay in the list</p>\n\n<p>What I do not understand is why even indicating he did not record the ID in the database</p>\n\n<p>Sincerely,</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13128589,"title":"How do I create an email template within my application","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4368815/razor-views-as-email-templates\">Razor views as email templates</a>  </p>\n</blockquote>\n\n\n\n<p>I am sending out an email to the user from within my service of my website. </p>\n\n<p>I want to format this so that it shows nice and a specific way.</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>&lt;table bgcolor=\"#FFE680\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td width=\"100%\" height=\"51\" valign=\"middle\"&gt;&lt;h1&gt; &lt;strong&gt;[COMPANY] User ID Reminder &lt;/strong&gt;&lt;/h1&gt;&lt;/td&gt;\n      &lt;td align=\"right\" valign=\"top\" width=\"8\"&gt;&lt;img alt=\"\" width=\"8\" height=\"8\" align=\"top\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td align=\"left\" valign=\"top\" width=\"100%\"&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n              &lt;tbody&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n                    &lt;tbody&gt;\n                      &lt;tr&gt;\n                        &lt;td colspan=\"1\" align=\"left\"&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                      &lt;tr&gt;\n                        &lt;td align=\"left\" valign=\"top\" width=\"100%\"&gt;&lt;p&gt; &lt;br /&gt;\n                          Dear [USERNAME], &lt;/p&gt;\n                          &lt;p&gt; In response to your request to be reminded of your User ID, please   find below the information we have on file for you. If you didn't   submit  this request, ignore this email. &lt;/p&gt;\n                          &lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n                            &lt;tbody&gt;\n                                  &lt;tr&gt;\n                                    &lt;td&gt;Your User ID is: &lt;/td&gt;\n                                    &lt;td&gt;[USERNAME]&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                  &lt;tr&gt;\n                                    &lt;td&gt;Your registered email address is:  &lt;/td&gt;\n                                    &lt;td&gt;[EMAIL]&lt;/td&gt;\n                                  &lt;/tr&gt;\n                              &lt;/tbody&gt;\n                            &lt;/table&gt;\n                          &lt;p&gt; \n                            If you have forgotten your password, you can request it here.&lt;br /&gt;\n                          &lt;/p&gt;\n                          &lt;p&gt; \n                            Thank you,&lt;br /&gt;[COMPANY]\n                          &lt;/p&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                      &lt;/tbody&gt;\n                    &lt;/table&gt;&lt;/td&gt;\n                  &lt;/tr&gt;\n                &lt;/tbody&gt;\n              &lt;/table&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n          &lt;/tbody&gt;\n      &lt;/table&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Now my question isn't about the looks of the email but how do I put this as the body of my email while populating the appropriate fields?</p>\n\n<p>I put it in resources as a string and I figured I'd just do a replace of the specific [fields].  This starting becoming tedious and seemed sloppy:</p>\n\n<pre><code>var body = SuburbanHUB.Properties.Resources.ForgotPasswordEmailBody.Replace(\"[USERNAME]\", username).Replace(\"[EMAIL]\")...\n</code></pre>\n\n<p>I'm sure there is a better way of doing this but I have not the experience.</p>\n\n<p><strong>=== CLARIFICATION ===</strong></p>\n\n<p>I am using razor to call a WCF service written in C#. The service that is being called is where the email is being sent from and not the view. I am using Razor with MVC with C# as the underlying code.</p>\n"},{"tags":["asp.net-mvc","xunit.net","visual-web-developer-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13131117,"title":"Add xUnit test project to an existing Visual Web Developer 2010 express MVC application","body":"<p>Maybe it's very easy but I'm trying to add support for xUnit in Visual Web Developer 2010 Express. I followed this <a href=\"http://jayhollingum.blogspot.ca/2011/05/vwd-express-2010-unit-tests-with-xunit.html\" rel=\"nofollow\">tutorial</a> on how to install everything but the main problem is that this tutorial only show how to add a test project to a <strong>new project</strong> and not to an existing one. When I do \"Add New Project\", there is not \"xunit\" or \"test project\" anywhere...</p>\n\n<p>Anybody know how or can point me to a good tutorial?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13130955,"title":"Pass callback function to partial view mvc","body":"<p>I have a partial view that is used more than once on my site.  Depending on where you are after you \"Save\" the record it should do something different. </p>\n\n<p>So I was thinking of passing a callback function to the controller as a string and then pass it back to the partial view.</p>\n\n<p>Is there a better way of doing this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dhtmlx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13136242,"title":"dhtmlxScheduler with mvc 3","body":"<p>I have been trying to implement DhtmlxScheduler Standard Edition v.3.5 in to my mvc3 project.\nFollowing the tutorial at <a href=\"http://www.dhtmlx.com/blog/?p=639\" rel=\"nofollow\">http://www.dhtmlx.com/blog/?p=639</a> </p>\n\n<p>The tutorial is in mvc2 I believe and I am having a bit of trouble following it.</p>\n\n<p>Here is my view page;</p>\n\n<pre><code>@*@Page Language=\"C#\" Inherits=\"System.Web.Mvc.ViewPage&lt;dynamic&gt;\";*@\n\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" &gt;\n    &lt;head runat=\"server\"&gt;\n    &lt;title&gt;Index&lt;/title&gt;\n\n    &lt;script src=\"@Url.Content(\"~/Scripts/dhtmlxscheduler.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;link href=\"@Url.Content(\"~/Scripts/dhtmlxscheduler.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt; \n\n    &lt;style type=\"text/css\"&gt;\n        html, body\n        {\n            height:100%;\n            padding:0px;\n            margin:0px;\n        }\n    &lt;/style&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function init() {\n            scheduler.init(\"scheduler_here\", new Date(2010, 6, 1), \"month\");\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=\"init()\"&gt;\n    &lt;div id=\"scheduler_here\" class=\"dhx_cal_container\" style='width:100%; height:100%;'&gt;\n        &lt;div class=\"dhx_cal_navline\"&gt;\n            &lt;div class=\"dhx_cal_prev_button\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_next_button\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_today_button\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_date\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"dhx_cal_header\"&gt;\n        &lt;/div&gt;\n        &lt;div class=\"dhx_cal_data\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I run this page with out the style-sheet it loads the calender but it is all over the place, so I add the CSS and them I get nothing??</p>\n"},{"tags":["jquery","asp.net-mvc","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13133589,"title":"ASP.NET MVC site behaves different when accessed remotely","body":"<p>I have deployed my MVC site on IIS server. If I access it using <code>http://localhost</code> in URL it works fine.\nBut if I use machine name/ ip address in the URL, some of the functions are not working properly. I wonder why this is happening. Following are some of the things I am facing </p>\n\n<ol>\n<li>I have used JQuery Tab in a dialog box. The dialog box doesn't submit data if the site is accessed remotely.</li>\n<li>I have used JQuery Month navigator. I could see it is submitting correct month and year during HttpPost controller, but the controller action doesn't redirect according to posted data.</li>\n</ol>\n\n<p>I am clueless on why its behaving like this</p>\n\n<pre><code>/* Some code for reference */\n\n@using (Html.BeginForm())\n{    \n    .....\n        &lt;input type=\"submit\" value=\"Save\" class=\"buttonSave\" onclick=\"return     ConfirmSave();\" /&gt;                        \n    &lt;/div&gt; \n}\n\nfunction ConfirmSave() {\n    return confirm('You have selected to copy this entry.\\n\\n This action cannot be rolled back, and each created entry will need to be deleted independently. Are you sure you want to continue?');\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc-editor-templates","defaultmodelbinder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13124751,"title":"MVC view model with a list property that contains complex members","body":"<p>I have a model that looks like the following</p>\n\n<pre><code>class ContainerClass\n{\n    string Name { get; set;}\n    Guid Id { get; set; }\n\n    [UIHint(\"CustomSelectBox\")]\n    List&lt;Member&gt; Members { get; set; }\n}\n\nclass Member\n{\n    string Name { get; set;}\n    Guid Id { get; set; }\n    string SomeProperty { get; set;}\n}\n\nclass DerivedFromMember: Member\n{\n   string AnotherProperty { get; set;}\n}\n</code></pre>\n\n<p>If the controller action is </p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(ContainerClassmodel)\n    {\n         return null;\n    } \n</code></pre>\n\n<p>Can anyone tell why the default model binder can't map the list members from  tag i.e.</p>\n\n<pre><code>&lt;select id=\"Members\" name=\"Members\" multiple=\"multiple\" &gt;\n &lt;option id=\"Members[0].Id\" selected=\"selected\" name=\"Members[0].Id\" value=\"9b1ea01c-6dad-470d-a6c1-a0f5009ac069\"&gt;Member One&lt;/option&gt;\n&lt;option id=\"Members[1].Id\" selected=\"selected\" name=\"Members[1].Id\" value=\"adf1dbda-9020-45b7-abd7-a0f5009a9b30\"&gt;Member two&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>Please note that all values are selected.</p>\n\n<p>whereas the following works</p>\n\n<pre><code> &lt;input type=\"hidden\" name=\"Members[0].Id\" value=\"9b1ea01c-6dad-470d-a6c1-a0f5009ac069\" /&gt;\n &lt;input type=\"hidden\" name=\"Members[1].Id\" value=\"adf1dbda-9020-45b7-abd7-a0f5009a9b30\" /&gt;\n</code></pre>\n\n<p>To be honest I know why it doesn't work :( because if I look at http headers incase of select the submitted data is not enough for the default model binder. </p>\n\n<pre><code>Members:9b1ea01c-6dad-470d-a6c1-a0f5009ac069\nMembers:adf1dbda-9020-45b7-abd7-a0f5009a9b30\n</code></pre>\n\n<p>Can anyone tell what to change inside  tag so that the submited data is</p>\n\n<pre><code>Members[0].Id:9b1ea01c-6dad-470d-a6c1-a0f5009ac069\nMembers[1].Id:adf1dbda-9020-45b7-abd7-a0f5009a9b30\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13136618,"title":"Display Partial View with Json Result Data In Asp.Net MVC3","body":"<p>i have a homecontroller with the following action method;</p>\n\n<pre><code>[HttpPost]\n[Authorize(Roles = \"Admin\")]\npublic JsonResult ProjectAdd(PortfolioViewModel model, int[] categories)\n{\n    using (PortfolioManager pm = new PortfolioManager())\n    {\n        using (CategoryManager cm = new CategoryManager())\n        {\n            if (ModelState.IsValid)\n            {\n                bool status = pm.AddNewProject(model, categories);\n                if (status)\n                {\n                    // ViewBag.Message = \"Inserted Sucessfully :)\";\n                }\n            }\n        }\n        return Json(pm.GetAllProjects());\n    }\n}\n</code></pre>\n\n<p>my view is called \"ProjectAdd.CSHTML\" with following content;</p>\n\n<pre><code>    &lt;table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n        &lt;thead&gt;\n           // the heading goes here\n        &lt;/thead&gt;\n        &lt;tbody id=\"projectsUpdate\"&gt;\n            @Html.Partial(\"_ProjectsPartial\", ViewBag.ProjectsList as IEnumerable&lt;MVC3Resume.Models.PortfolioViewModel&gt;)\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;p&gt;\n\n    @using (Ajax.BeginForm(\"projectAdd\", \"home\", new AjaxOptions { \n        LoadingElementId = \"loading\", \n        LoadingElementDuration = 2000, \n        Url = Url.Action(\"projectAdd\", \"home\"), \n        OnSuccess=\"OnSucess\",\n    }, \n        new { enctype = \"multipart/form-data\" }))\n    {    \n        @Html.ValidationSummary(true)\n        &lt;div id=\"SucessMessage\"&gt;&lt;/div&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Add New Project&lt;/legend&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(model =&gt; model.ProjectHeading)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.EditorFor(model =&gt; model.ProjectHeading)\n                @Html.ValidationMessageFor(model =&gt; model.ProjectHeading)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Image)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.Image, new { type = \"file\" })\n                @Html.ValidationMessageFor(model =&gt; model.Image)\n            &lt;/div&gt;\n            &lt;div class=\"editor-label\"&gt;\n                &lt;label for=\"categories\"&gt;Categories&lt;/label&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @foreach (var item in ViewBag.Categories as IEnumerable&lt;MVC3Resume.Models.CategoryViewModel&gt;)\n                {\n                    &lt;input type=\"checkbox\" name=\"categories\" value=\"@item.CategoryId\" /&gt;\n                    @item.CategoryName\n                }\n\n            &lt;/div&gt;\n            &lt;p&gt;\n                &lt;input type=\"submit\" value=\"Create\" class=\"submit\" /&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    }\n&lt;/p&gt;\n</code></pre>\n\n<p>my javascript OnSucess function looks like;</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function OnSucess(resultData) {\n        // all logic goes here\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>SO, my question is how do i get the json result data and populate it in partial view?</strong>\nfollowing is my result json data;</p>\n\n<pre><code>[{\"ProjectId\":1,\"ProjectHeading\":\"heading\",\"ProjecctUrl\":\"url\",\"ProjectLongDescription\":\"descripitn\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_140_1.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":2},{\"ProjectId\":2,\"ProjectHeading\":\"heading 2\",\"ProjecctUrl\":\"url2\",\"ProjectLongDescription\":\"description 2\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_140_2.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":1},{\"ProjectId\":3,\"ProjectHeading\":\"teasting heading\",\"ProjecctUrl\":\"test url\",\"ProjectLongDescription\":\"description\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_preview640.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":1}]\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework","linq-to-entities","entity"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3026,"score":1,"question_id":1077342,"title":"Entity Framework - Update entity with child properties","body":"<p>I have an entity that has one child and I need to update it, but, in the TryUpdateModel  method, it does not accept an strong typed object (accepts only a FormCollection), and when I try to update it, I get the following error.</p>\n\n<p>{\"A relationship is being added or deleted from an AssociationSet 'FK__SG_Usuari__ID_Si__534D60F1'. With cardinality constraints, a corresponding 'SG_Usuario' must also be added or deleted.\"}</p>\n\n<p>The problem is that I can't load in the formcollection the child property, only an id, but not the entire object.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13136020,"title":"MVC Why is this dropdown mandatory?","body":"<p>I have this dropdown in my view (actually I have many of these in a loop)</p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.SelectedAttributeValueIds[i], Model.AttributeValuesList[Convert.ToInt32(type.Value)], \"Select a value\")\n</code></pre>\n\n<p>The relevant parts of the model are</p>\n\n<pre><code>public IDictionary&lt;int, List&lt;SelectListItem&gt;&gt; AttributeValuesList { get; set; }\npublic List&lt;int&gt; SelectedAttributeValueIds { get; set; }\n</code></pre>\n\n<p>The dropdowns above contains the correct list of values.  If I select one of the values and submit then the value selected is correctly posted and correctly saved into the SelectedAttributeValueIds list.  </p>\n\n<p>Now the problem is that if I do not select a value from one or more of these dropdowns my ModelState.IsValid is false in my post action method.  Looking at the error list, the reason is that </p>\n\n<blockquote>\n  <p>\"a value is required\"</p>\n</blockquote>\n\n<p>Why are the dropdowns mandatory?  I'd like them to be optional.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks,</p>\n\n<p>Sachin</p>\n"},{"tags":["c#","asp.net","sql","asp.net-mvc","repository"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13135550,"title":"Populate ViewModel with multiple objects","body":"<p>Considering this ViewModel</p>\n\n<pre><code>public class DocumentReferenceViewModel\n{\n    public int IdDocumentReference { get; set; }\n    public string DocumentTitle { get; set; }\n    public string PageNbr { get; set; }\n    public string Comment { get; set; }\n}\n</code></pre>\n\n<ul>\n<li>The DocumentTitle is a property of a <strong>Document</strong> object</li>\n<li>The <strong>IdDocumentReference</strong> and <strong>PageNumber</strong> are properties of\nDocumentReference object</li>\n</ul>\n\n<p><strong>Document</strong> and <strong>DocumentReference</strong> are linked with a propertie <em>IdDocument</em></p>\n\n<ul>\n<li>I have a repository which can return <strong>Document</strong> objects</li>\n<li>I have a repository which can return <strong>DocumentReference</strong> objects</li>\n</ul>\n\n<hr>\n\n<pre><code>public class DocumentReference\n{\n    public int IdDocumentReference;\n    public string PageNbr { get; set; }\n    public string Comment { get; set; }\n}\n\n\npublic class Document\n{\n    public int IdDocument;\n    public string DocumentTitle { get; set; }\n}\n</code></pre>\n\n<p>How can I bind the ViewModel from theses 2 objects (tables) without looping on the DocumentReference and for each one querying the database to retrieve de DocumentTitle ?</p>\n\n<p>ps : I am not using EF, I have repositories calling handwritten Stored Procedures</p>\n"},{"tags":["jquery","asp.net-mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":13135526,"title":"In what scenarios we need to use jQuery in mvc?","body":"<p>Being a beginner to MVC, still I am unable to understand in what scenarios we need to use jQuery, the relation between jQuery and MVC.\nSo far I noticed that we use jQuery a lot in MVC and without having knowledge in jQuery it’s not possible to learn MVC.</p>\n"},{"tags":["asp.net-mvc","jqgrid","knockout.js"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":150,"score":1,"question_id":12435522,"title":"jqgrid+knockout","body":"<p>I managed to run knockout js. example: <a href=\"http://jsfiddle.net/brux88/9fzG4/\" rel=\"nofollow\">http://jsfiddle.net/brux88/9fzG4/</a> . now I would like to replicate the same thing using jqGrid, but I can not run the calculations in real time. can someone help me? I also tried without using knockout, but only using jqGrid I do not work the same.example: <a href=\"http://jsfiddle.net/brux88/yGJcy/\" rel=\"nofollow\">http://jsfiddle.net/brux88/yGJcy/</a></p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":184,"score":0,"question_id":11210976,"title":"Telerik: get upload file's name from javascript","body":"<p>I have a Telerik file selector for uploading like this:</p>\n\n<pre><code>&lt;%= Html.Telerik().Upload()\n            .Name(\"attachments\")\n    %&gt;\n</code></pre>\n\n<p>then in javascript, I want to check if the filename is in correct format. But I don't know how to get the file name out of the upload box. This </p>\n\n<pre><code>var upload = $find(\"attachments\");\n</code></pre>\n\n<p>gives me null. And this</p>\n\n<pre><code>var upload = $get(\"attachments\");\n</code></pre>\n\n<p>gives me a strange object that I don't know how to move on with. Anyone has experience with this?</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api","breeze"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12961222,"title":"How to do paging in WebAPI MVC 4 using BreezeJs","body":"<p>I have a WebApi controleller, and added the filters from BreezeJs to support queryable requests like $orderby=DateAdded&amp;$top=8.</p>\n\n<pre><code>  GlobalConfiguration.Configuration.Filters.Add(\n      new Breeze.WebApi.ODataActionFilter());\n</code></pre>\n\n<p>everything works fine. This only give 8 results. What do i need to do to add such the total count is also returned with the result?</p>\n\n<p>UPDATE</p>\n\n<pre><code> public class ODataHandler : DelegatingHandler\n  {\n      protected override Task&lt;HttpResponseMessage&gt; SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)\n      {\n          return base.SendAsync(request, cancellationToken).ContinueWith(\n            task =&gt;\n            {\n                var response = task.Result;\n\n                if (ResponseIsValid(response) &amp;&amp; ShouldInlineCount(request))\n                {\n                    object responseObject;\n                    response.TryGetContentValue(out responseObject);\n\n                    if (responseObject is IQueryable)\n                    {\n                        var renum = responseObject as IEnumerable&lt;object&gt;;\n\n                        if (renum != null)\n                        {\n                            response = request.CreateResponse(HttpStatusCode.OK, new ODataMetadata&lt;object&gt;(renum, renum.Count()));\n                        }\n                    }\n                }\n\n                return response;\n            });\n      }\n      private bool ShouldInlineCount(HttpRequestMessage request)\n      {\n\n        var queryParams = request.RequestUri.ParseQueryString();\n\n        var inlinecount = queryParams[\"$inlinecount\"];\n\n        return string.Compare(inlinecount, \"allpages\", true) == 0;\n\n       }\n\n      private bool ResponseIsValid(HttpResponseMessage response)\n      {\n          if (response == null || response.StatusCode != HttpStatusCode.OK || !(response.Content is ObjectContent)) return false;\n          return true;\n      }\n  }\n</code></pre>\n\n<p>This is what i came up with so far. But problem is that the filter have already added teh TOP 8 to the request before the handler kicks in. So count will be 8 and not total.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","learn"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":66,"score":-3,"question_id":13119710,"title":"Best ways learn mvc views","body":"<p>mvc concepts controller and model but I'm a little bit confused about creating views, how can I easily learn this? Is there any standard procedure?</p>\n"},{"tags":["asp.net-mvc","data-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13129807,"title":"MVC Binding a collection of things to different dropdowns","body":"<p>I have a database table called <code>ItemAttributeLinks</code> and a collection of these too</p>\n\n<pre><code>Collection&lt;ItemAttributeLink&gt; ItemAttributeLinks\n</code></pre>\n\n<p>Now, in my view I do this in order to bind n dropdowns to the n items in this collection.  This does not work.  The values in <code>m.Item.ItemAttributeLinks</code> are always null.  The values in the dropdowns appear and are all correct, the issue is that the selected values, don't bind on postback.</p>\n\n<pre><code>@{\n            int i = 0;\n            foreach (var type in @Model.AttributeTypes)\n            {\n                &lt;section&gt;\n                    &lt;label&gt;@type.Text&lt;/label&gt;\n                    &lt;div&gt; @Html.DropDownListFor(m =&gt; m.Item.ItemAttributeLinks[i] ,Model.AttributeValuesList[Convert.ToInt32(type.Value)], \"Select a value\")&lt;/div&gt;\n                &lt;/section&gt;\n                i++;\n            }  \n</code></pre>\n\n<p>The ItemAttributeLink table, incidentally, contains an int id, an int foreign key attributevalueid and an int foreign key ItemId.</p>\n\n<p>What is the correct way to bind multiple dropdowns in this way?\n            }</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":13131521,"title":"JQuery Selector best practice","body":"<p>When exposing a jquery script that will be used across multiple pages is it preferred to base the selector on an id or css class?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13118982,"title":"EF: many-to-many field always null","body":"<p>when i try to save this model, the <code>menu.Roles</code> field is always <code>null</code>, and save change method doesn't change the <code>Roles</code> field</p>\n\n<p>tables are <code>Menu</code>, <code>RoleMenu</code> and <code>Role</code></p>\n\n<p>so, i have a pair <strong>many-2-many</strong> models:</p>\n\n<p>Menu has a <code>Roles</code> filed<br>\nRole has a <code>Menus</code> fields</p>\n\n<p>action method:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(Menu menu, IEnumerable&lt;int&gt; RoleIDs)\n    {\n        if (ModelState.IsValid)\n        {\n            var roles = _db.UserRoles.Where(rl =&gt; RoleIDs.Contains(rl.Id)).ToList();\n\n            menu.Roles = new List&lt;UserRole&gt;();\n            menu.Roles.AddRange(roles);\n\n            _db.Entry(menu).State = EntityState.Modified;\n            _db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n        ViewBag.ParentMenuId = new SelectList(_db.Menus, \"Id\", \"Name\", menu.ParentMenuId);\n        ViewBag.RoleIDs = new SelectList(_db.UserRoles.ToList(), \"Id\", \"Name\");\n        return View(menu);\n    }\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>//...other VS auto generated fields...\n&lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Roles, \"Roles\")\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n        @Html.ListBox(\"RoleIDs\")\n        @Html.ValidationMessageFor(model =&gt; model.Roles)\n&lt;/div&gt;\n&lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>mapping:</p>\n\n<pre><code>            modelBuilder.Entity&lt;Role&gt;()\n             .HasMany(role =&gt; role.Menus)\n             .WithMany(menu =&gt; menu.Roles)\n             .Map(m =&gt;\n              m.MapLeftKey(\"RoleId\").\n                 MapRightKey(\"MenuId\").\n                 ToTable(\"RoleMenu\"));\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":190,"score":1,"question_id":6946829,"title":"MVC3 Client validation using ViewModels","body":"<p>I'm experimenting with the unobtrusive client validation and have been struggling to get it to work in my scenario.</p>\n\n<p>My main problem is that my view has a strongly typed ViewModel. This ViewModel contains several collections that are used to populate dropdowns and has an additional property (let's call it Person) which is the actual object I wish the form to edit.</p>\n\n<p>My controller action handling the post expects to get a Person object not the entire ViewModel posted. So I haven't been able to use:</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.Person.Name)\n</code></pre>\n\n<p>because I need the input control to have a name = \"Name\" and not \"Person.Name\"\nI can correct this by using </p>\n\n<pre><code>@Html.TextBox(\"Name\", m.Person.Name)\n</code></pre>\n\n<p>But then the resulting input control lacks the data-* attributes client validation needs.\nIs there a way to get client validation to work, keep my viewmodel, and make my controller action all work together?</p>\n\n<p>On a side note it seems like the data-* attributes on form fields are only added if you use </p>\n\n<pre><code>@using (Html.BeginForm())\n</code></pre>\n\n<p>Writing out my own <code>&lt;form&gt;</code> tag by hand seems to break it. </p>\n\n<p>Is using the form helper required?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13124733,"title":"How do I import model class in view from not reference dll","body":"<p>Sorry for my english, it is not the native language for me.</p>\n\n<p>I'm writing a web access to a large medical system.</p>\n\n<p>Using ASP.NET MVC 4. It so happened that the models and controllers are in the other dll, what loaded when web-application started. Controllers are registered in the Unity container, and everything work fine.</p>\n\n<p>But in the View does not work use the model classes directly. Razor view engine can not find their namespace.</p>\n\n<p>How to fix it? How can you make use ViewEngine namespace library that is loaded into memory, but on which there is no reference of mvc-project?</p>\n\n<p>Thank you in advance for your advice.</p>\n"},{"tags":["jquery","asp.net-mvc","html5","video"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13132761,"title":"object tag not work in the chrome browser","body":"<p>i am using the following code to play video of different extension like(avi,wmv,flv,mp4) in the browser . with the following code only two file extension(avi,wmv) run only in intenet explore and mozilla but not in the chrome...\\\nhere my question is what is reason it not work in chrome and is there method to run above mention video in all browser.i tried many thing but not succeed \nIs there any jquery plugin to use this.\nplease help me ....\nThanks in advance</p>\n\n<pre><code>           &lt;object id=\"MediaPlayer1\" CLASSID=\"CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95\" codebase=\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701\"\nstandby=\"Loading Microsoft Windows® Media Player components...\" type=\"application/x-oleobject\" width=\"262\" height=\"160\"&gt;\n\n          &lt;param name=\"src\" value=\"C:\\New folder\\Wildlife.wmv\" /&gt;\n\n    &lt;param name=\"src\" value=\"flash_ad.swf\"&gt;\n\n&lt;param name=\"animationatStart\" value=\"true\"&gt;\n&lt;param name=\"transparentatStart\" value=\"true\"&gt;\n&lt;param name=\"autoStart\" value=\"false\"&gt;\n&lt;param name=\"showControls\" value=\"true\"&gt;\n&lt;param name=\"Volume\" value=\"-450\"&gt;\n&lt;embed type=\"application/x-mplayer2\" pluginspage=\"http://www.microsoft.com/Windows/MediaPlayer/\" src=\"C:\\New folder\\Wildlife.wmv\" name=\"MediaPlayer1\" width=262 height=160 autostart=0 showcontrols=1 volume=-450&gt;\n&lt;/object&gt;  \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api","nservicebus","servicebus"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13122972,"title":"Using Service Bus for Asp.net Web API","body":"<p>I am developing Services using ASP.NET Web API and have plan to use Service Bus for message exhanging. Is it possible to use Service Bus along with ASP.NET Web API?\nAnd what are the Microsoft's Answer for Service Bus other than Windows Azure service bus?</p>\n"},{"tags":["asp.net-mvc","iis7"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13132520,"title":"Server Variables are not being accessible in ASP.NET MVC","body":"<p>I have two web applications hosted in the same app pool in IIS 7. One is an ASP.NET application and the other is ASP.NET MVC application. When I go to the web application in ASP.NET and click on a link it is supposed to Launch the other web application in MVC hosted in the same app pool. I can access Server Variables in the ASP.NET application, but I can't access Server Variables in ASP.NET MVC. This works in IIS 6.0 but doesn't work in IIS 7.0. Any ideas and suggestions are greatly appreciated.</p>\n\n<p>Thanks in anticipation.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","portable-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":12518159,"title":"MVC4 Portable Areas?","body":"<p>Does MVC4 remove the MVCContrib requirement to achieve portable areas? Or is that still required?</p>\n\n<p>I gave it a shot w/o MVCContrib and unfortunately I'm stuck with a typical \"<em>The view 'Index' or its master was not found or no view engine supports the searched locations.</em>\" exception.</p>\n\n<p>The list of searched locations includes \"<em>~/Areas/Inbox/Views/Default/Index.cshtml</em>\" which is technically correct, but it's just not finding the view. </p>\n\n<p>Some explanation:</p>\n\n<p>I have a main MVC4 application and a \"plugin\" (if you will) MVC4 app that contains an area called Inbox with a controller and view named Default. I reference this plugin app in the main app and I can hit a breakpoint in DefaultController's Index method where the View is returned - so I know the main app is engaging the plugin app and routing the requests to the proper controller and all that. When not running, if I cursor over the return View() statement in DefaultController the balloon shows the desired view, it's just not found at runtime.</p>\n\n<p>Has anyone encountered this? I'm sure it's something really simple and a stupid oversight on my part, but after hours of trying, I can't find a solution. Thanks in advance!</p>\n"},{"tags":["c#","asp.net-mvc","exception","exception-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13127650,"title":"Catching exceptions for displaying info","body":"<p>I have setup so that if an <code>Exception</code> is thrown I can display it with my custom error page. But in some cases I don't want to be navigated to the error page, but want it to display a simple dialog window.</p>\n\n<pre><code>public ActionResult Page1()\n{\n    //The custom error page shows the exception, if one was thrown\n\n    throw new Exception( \"An exception was thrown\" );\n\n    return View();\n}\n\n\npublic ActionResult Page2()\n{\n    //A dialog should show the exception, if one was thrown\n\n    try\n    {\n        throw new Exception( \"An exception was thrown\" );\n    }\n    catch( Exception ex )\n    {\n        ViewData[\"exception\"] = ex;\n    }\n    return View();\n}\n</code></pre>\n\n<p>Is it possible to have a CustomAttribute to handle an exception which has been thrown in an Controller action? If I added <code>CatchException</code> to Page2, can I automate the process of storing the exception in the <code>ViewData</code>, each time an exception was thrown. I don't have much experience of CustomAttributes and I'd be much appreciated if you could help me.</p>\n\n<p>The Page2 example works perfectly fine, I just want to make the code cleaner as it isn't really pretty to have try catches in every action (where I want to show a dialog).</p>\n\n<p>I am using .NET MVC 4.</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","model-binding","kendo-ui"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":127,"score":1,"question_id":13004986,"title":"Model binding the sort field from KendoUI Grid","body":"<p>I'm using KendoUI Grid to show data. I have server paging working like a charm. The each page change in the kendo grid is a new ajax request to the server and the server returns the correct page of data. I am now trying to do server-side sorting, but I'm having trouble getting model binding to bind to the sort values.</p>\n\n<p>This is what the request from the Kendo Grid looks like:</p>\n\n<p><img src=\"http://i.imgur.com/ltlSB.png\" alt=\"\"></p>\n\n<p>My action method looks like this:</p>\n\n<pre><code>public JsonResult GetReports(int pageSize, int skip, List&lt;KendoSort&gt; sort)\n{\n    // sort is not being populated with the right data.\n}\n</code></pre>\n\n<p>KendoSort is a custom class:</p>\n\n<pre><code>public class KendoSort\n{\n    public string Field { get; set; }\n    public string Dir { get; set; }\n}\n</code></pre>\n\n<p>I know I'm not doing this right. How should my action method look to correctly capture the data supplied for the sort? The screenshot shows only a single item in the sort collection, but the grid could pass more. For example, it could also have included an additional sort:</p>\n\n<pre><code>sort[1][field]: reportName\nsort[1][dir]: asc\n</code></pre>\n\n<p>Basically it would be saying \"sort by id in ascending order, then by reportName in ascending order\". How can I get this data into my action method without having to poke around in <code>Request</code> and manually parse the parameters?</p>\n"},{"tags":["asp.net-mvc","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13131187,"title":"ASP.NET MVC deployment routing","body":"<p>I've built a WebDeploy package of my ASP.NET MVC 4 website in Visual Studio 2012. </p>\n\n<p>When I run the deployer on my server, it successfully deploys the website to a subdir on my server called <code>/myapp</code></p>\n\n<p>However, when I navigate to <code>localhost/myapp</code> in a browser, I get a 404. It appears IIS is looking for a physical path (one-to-one). How can I config IIS, or setup a rewrite rule, so that <code>/myapp</code> functions within itself?</p>\n\n<p>For example, links and redirects that the website has are pointing to <code>localhost/static/style.css</code>, when they <em>should</em> be pointing to <code>localhost/myapp/static/style.css</code></p>\n"},{"tags":["c#","sql-server","asp.net-mvc","caching","bottleneck"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":292,"score":0,"question_id":4986372,"title":"How can I cache private data in a webfarm for ASP MVC","body":"<p>I am making a member based web app in ASP MVC3 and I am trying to plan ahead, at first our user base will not be huge, but as with any software the potential for a sudden volume spike is always a possibility. </p>\n\n<p>Thinking ahead to this scenario, I know that the database is the bottleneck area on most web apps. We are using MSSQL 2008RS we will have dedicated servers with several client databases each client has there own database so if one server begins to bottle neck we can scale vertically or move some of the databases to a new server and begin filling it up.</p>\n\n<p>To access the databases we use primarily LINQ 2 SQL and are currently re-factoring some of our code to make use of the IQueryable mechanisms to do a lazy load of content. but each page contains quite a bit of content from various parts of the database. </p>\n\n<p>We also have a few large databases that are used for widgets in the program that rarely change but have millions of rows. the goal with those is to somehow sync them to the primary source and distribute them across several machines and then load balance those servers. </p>\n\n<p>With this layout should I even worry about caching, or will the built-in caching mechanisms in MSSQL be sufficient? </p>\n\n<p>If so where should I begin. I have looked briefly at app fabric but it looks as tho it is for Azure only?</p>\n\n<p>Resources:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/343899/how-to-cache-data-in-a-mvc-application\">How to cache data in a MVC application</a></p>\n\n<p><a href=\"http://stephenwalther.com/blog/archive/2008/08/28/asp-net-mvc-tip-39-use-the-velocity-distributed-cache.aspx\" rel=\"nofollow\">http://stephenwalther.com/blog/archive/2008/08/28/asp-net-mvc-tip-39-use-the-velocity-distributed-cache.aspx</a></p>\n\n<p><a href=\"http://stephenwalther.com/blog/archive/2008/08/29/asp-net-mvc-tip-40-don-t-cache-pages-that-require-authentication.aspx\" rel=\"nofollow\">http://stephenwalther.com/blog/archive/2008/08/29/asp-net-mvc-tip-40-don-t-cache-pages-that-require-authentication.aspx</a></p>\n"},{"tags":["c#","asp.net-mvc","json","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13129819,"title":"How do I create a treeview in asp.net mvc 2?","body":"<p>I have a couple of database tables, one for Folders and one for Files, with the following schemas.</p>\n\n<p><strong>Folders</strong></p>\n\n<ul>\n<li>FolderID </li>\n<li>FolderName </li>\n<li>DateCreated </li>\n<li>ParentFolderID</li>\n</ul>\n\n<p><strong>Files</strong></p>\n\n<ul>\n<li>FileID</li>\n<li>FileName</li>\n<li>FileExtension</li>\n<li>Description</li>\n<li>FolderID</li>\n<li>DateUploaded</li>\n<li>DownloadCount</li>\n</ul>\n\n<p>Basically I need to know how I can query these in such a way that the JSON returned, could be used with the <a href=\"http://bassistance.de/jquery-plugins/jquery-plugin-treeview/\" rel=\"nofollow\">jQuery Treeview plugin</a>, or <a href=\"http://mbraak.github.com/jqTree/\" rel=\"nofollow\">jqTree</a>.</p>\n\n<p>I have two classes, File and Folder, that can be used to create File and Folder objects, from the data returned from the database, but I'm not sure how to go about returning it as json, so that folders contain their sub-folders and all the files show up in the correct folders.</p>\n\n<p>Any help would be appreciated, I search and searched, but all I could find was an example that used ASP.NET MVC 3, and unfortunately I'm stuck using ASP.NET MVC2 on this project.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>public class Folder\n{\n    public int FolderID { get; set; }\n    public string FolderName { get; set; }        \n    public IList&lt;Folder&gt; Subfolders { get; set; }\n    public IList&lt;File&gt; Files { get; set; } \n    public bool IsRootFolder\n    {\n        get { return Subfolders.Count == 0; }\n    }\n}\n\npublic class File\n{\n    public int FileID { get; set; }\n    public int FolderID { get; set; }\n    public string FileName { get; set; }\n    public string Exstension { get; set; }\n    public string Description { get; set; }\n    public DateTime? UploadDate { get; set; }\n    public int DownloadCount { get; set; }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13130384,"title":"Populating a list through a form","body":"<p>I'm creating a website with asp.net, mvc 4 and c# and currently have a problem I did not find a solution online for. </p>\n\n<p>I have a rather complex CREATE-form which includes a dropdown-list with the values 1-7 and a list of textboxes. To this list of textboxes I can add more textboxes via JavaScript so the amount of textboxes is not limited right now. </p>\n\n<p>Moreover, if I select any value in the dropdown-list - let's say value 5 - the list of textboxes appears 5 times. </p>\n\n<p>To handle the undetermined amount of textboxes, each textbox in such a list gets the same name  with an index per list. To give an example: in the first list of textboxes, they are all named textbox-1, in the second list they have the name textbox-2, etc.. I hope you get where I'm going with this.</p>\n\n<p>My Problem now: I would like to have a model with 7 lists of strings which get populated with the values from the respective textboxes. Maybe I didn't really know what to look for (because honestly I didn't) but I could not find anything similar on Google. </p>\n\n<p>The only solution that I could think of would be to not use a model and just use the form collection but that feels like it would destroy any purpose and advantage of the mvc framework. But maybe there is also a completely different approach to this problem that totally slipped my mind.</p>\n\n<p>I hope I could you guys can even understand what I'm talking about.. kinda hard to explain. If not I'm sure you'll let me know :-)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":7669,"score":4,"question_id":5710140,"title":"How do I create a MVC3 razor template for DisplayFor()","body":"<p>I have a couple of properties in my view model that are display-only but I need to retrieve their values using jQuery to perform a calculation on the page. The standard <em>Html.DisplayFor()</em> method just writes their value to the page. I want to create a razor template that will allow me to render each element as:</p>\n\n<pre><code>&lt;span id=\"ElementsId\"&gt;Element's value&lt;/span&gt;\n</code></pre>\n\n<p>I know I can specify a template in <em>Html.DisplayFor()</em> to use a particular template for rendering the property but within that template how do I identify the <em>id</em> attribute to write into the <em>span</em> tag?</p>\n\n<pre><code>@Html.DisplayFor(model =&gt; model.Element, \"MyTemplate\");\n</code></pre>\n"},{"tags":["asp.net-mvc","ws-federation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":323,"score":0,"question_id":9490811,"title":"Prevent XmlHttpRequest redirect response in .Net MVC WS-Federation Site","body":"<p>I'm using WS Federated (Claims Aware) authentication on an MVC 3 site and am having trouble keeping some of my API controllers that send JSON from returning a redirect when the authentication fails.  I have an Area called API with several controllers that just return JSON, these controllers all inherit from the same base class.  I want to send down legitimate 401 error responses instead of 302 redirects that are happening by default.</p>\n\n<p>I followed some directions I found for creating a custom <code>WSFederationAuthenticationModule</code> in concert with a filter I put on my API controller actions:</p>\n\n<pre><code>public class WSFederationServiceAuthenticationModule : WSFederationAuthenticationModule\n{\n    private static Log4NetLoggingService logger = new Log4NetLoggingService();\n\n    public const string IsServiceIndicator = \"ROIP.IsService\";\n\n    protected override void OnAuthorizationFailed(AuthorizationFailedEventArgs e)\n    {\n        base.OnAuthorizationFailed(e);            \n\n        var isService = HttpContext.Current.Items[IsServiceIndicator];\n\n        if (isService != null)\n        {\n            logger.Info(\"WSFedService: Found IsService\");\n            e.RedirectToIdentityProvider = false;\n        }\n        else\n        {\n            logger.Info(\"WSFedService: Did not find IsService\");\n        }\n    }\n}\n\npublic class WSFederationServiceAuthAttribute : ActionFilterAttribute\n{\n    private static Log4NetLoggingService logger = new Log4NetLoggingService();\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        base.OnActionExecuting(filterContext);\n\n        // Set an item that indicates this is a service request, do not redirect.\n        logger.Info(\"WSFedService: Setting IsService\");\n        HttpContext.Current.Items[WSFederationServiceAuthenticationModule.IsServiceIndicator] = 1;\n    }\n}\n</code></pre>\n\n<p>But my logging shows that I am never finding the IsService item in the Items:</p>\n\n<pre><code>{INFO}02/29 03:39:21 - WSFedService: Setting IsService\n{INFO}02/29 03:39:32 - WSFedService: Setting IsService\n{INFO}02/29 03:39:32 - WSFedService: Setting IsService\n{INFO}02/29 03:50:39 - WSFedService: Did not find IsService\n{INFO}02/29 03:53:16 - WSFedService: Did not find IsService\n{INFO}02/29 03:53:29 - WSFedService: Did not find IsService\n</code></pre>\n\n<p>I think this may be a problem with the <code>HttpContext.Current</code> not being the same between the filter and the module, but I'm not sure.</p>\n\n<p>Another option I tried was to subscribe to the <code>FederatedAuthentication.WSFederationAuthenticationModule.RedirectingToIdentityProvider</code> event in the <code>Application_Start</code> event of my Global.asax.cs, but the WSFederationAuthenticationModule is null at that time.</p>\n\n<pre><code>private void ConfigureWSFederationAuthentication()\n{\n    bool hasFederatedAuthentication = false;\n    try\n    {\n        if (FederatedAuthentication.WSFederationAuthenticationModule != null)\n        {\n            hasFederatedAuthentication = true;\n        }\n    }\n    catch\n    {\n        hasFederatedAuthentication = false;\n    }\n\n    if (hasFederatedAuthentication)\n    {\n        Logger.Info(\"WSFederation: Registering for Event Handler\");\n        FederatedAuthentication.WSFederationAuthenticationModule.RedirectingToIdentityProvider += (s, e) =&gt;\n            {\n                var msg = string.Empty;\n                try\n                {\n                    if (HttpContext.Current.Request.Headers[\"X-Requested-With\"] == \"XMLHttpRequest\")\n                    {\n                        e.Cancel = true;\n                        msg = \"Found XMLHttpRequest header\";\n                    }\n                    else\n                    {\n                        msg = \"Did not find XMLHttpRequest header\";\n                    }\n                }\n                catch (Exception ex)\n                {\n                    msg = \"WSFederation: Event Handler Error: \" + ex.Message;\n                }\n\n                Logger.Info(\"WSFederation: Redirecting from Event Handler: \" + msg);\n            };\n    }\n    else\n    {\n        Logger.Info(\"WSFederation: Null WSFederationAuthenticationModule\");\n    }\n}\n</code></pre>\n\n<p>I'd like to know either how to get the first option working, or where I should subscribe to the <code>RedirectingToIdentityProvider</code> event.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":13110552,"title":"ASP.NET MVC Routing - all looks to match the correct route template, but not working","body":"<p>I have a site with a \"general\" Route structure, and an additional \"Translate\" area. So at the top level, you have something like:</p>\n\n<ul>\n<li>/</li>\n<li>/About (\"generic\")</li>\n<li>/Translate (area)</li>\n</ul>\n\n<p>Within the Translate area, I have:</p>\n\n<ul>\n<li>/Translate/Word (WordController, Index action)</li>\n<li>/Translate/Word/Add (WordController, Add action)</li>\n<li>/Translate/Word/Improve (WordController, Improve action)</li>\n</ul>\n\n<p>All these work.</p>\n\n<p>However, as soon as I add a further controller to the existing structure, eg. Definition ...</p>\n\n<ul>\n<li>/Translate/Definition (DefinitionController, Index action)</li>\n<li>/Translate/Definition/Add (DefinitionController, Add action)</li>\n</ul>\n\n<p>or Pronunciation ...</p>\n\n<ul>\n<li>/Translate/Pronunciation (PronunciationController, Index action)</li>\n<li>/Translate/Pronunciation/Add (PronunciationController, Add action)</li>\n</ul>\n\n<p>All I get is a 404.</p>\n\n<p>My area's routing configuration is below:</p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n            \"Translate_direct\",\n            \"Translate/{controller}/{action}\",\n            new { action = \"Index\", controller = \"Default\", }\n        );\n        context.MapRoute(\n            \"Translate_default\",\n            \"Translate/{toLanguageCode}/{query}/{fromLanguageCode}/{controller}/{section}/{action}/{id}\",\n            new { action = \"Index\", controller=\"Default\", id = UrlParameter.Optional, section=UrlParameter.Optional }\n        );\n    }\n</code></pre>\n\n<p>I have installed <a href=\"http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx\" rel=\"nofollow\">Phil Haack's RouteDebugger</a> and have got the following result:</p>\n\n<p><img src=\"http://i.stack.imgur.com/g2GTm.png\" alt=\"Screenshot\"></p>\n\n<p>So it appears to match the Controller and Action, but I just get a 404.</p>\n\n<p>For completeness and assurance, my \"MVC\" file structure is also shown:</p>\n\n<p><img src=\"http://i.stack.imgur.com/7SWZW.png\" alt=\"enter image description here\"></p>\n\n<p>I'm clearly missing something obvious but not sure what ... ?</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>It seems my namespaces are involved somehow.</p>\n\n<p>My TranslateAreaRegistration class had the namespace <em>Taggloo.Web.Client.Areas.Translate</em> but my PronunciationController had a namespace of <em>Taggloo.Web.</em>*Mvc.*<em>Client.Areas.Translate.Controllers</em></p>\n\n<p>It seems that an error in my namespacing which caused the two to be different (the TranslateAreRegistration class should be in the <em>Taggloo.Web.Mvc.Client.Areas.Translate</em> namespace, too) is the issue. I tried making them both <em>Taggloo.Web.Mvc....</em> but this didn't work. I've begrudgingly set both to <em>Taggloo.Web.Client...</em> instead and now it works.</p>\n\n<p>So not a solution, a workaround, and despite looking around on this, I'm still none the wiser as to why.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","query-string"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13129334,"title":"Including All querystring parameters in Html.ActionLink","body":"<p>In my page i have </p>\n\n<pre><code> @using (Html.BeginForm(\"list\", \"menu\", FormMethod.Get))\n    {\n        &lt;div&gt;\n           Show categories:\n            @Html.DropDownList(\"groupName\", (SelectList)ViewBag.groups)\n            &lt;input id=\"Submit1\" type=\"submit\" value=\"Show\" /&gt;\n        &lt;/div&gt;\n    }\n</code></pre>\n\n<p>Regarding the option the user choose i generate a list and the Querystring in my address going to be like :</p>\n\n<pre><code>localhost/menu/list?groupName=controlpanel\n</code></pre>\n\n<p>My problem is when i use HtmlActionLink for example :</p>\n\n<pre><code>@Html.ActionLink(\"Title\", \"List\", new { foo = item.foo})\n</code></pre>\n\n<p>What i got in result is result is :</p>\n\n<pre><code>localhost/menu/List?foo=123\n</code></pre>\n\n<p>instead of :</p>\n\n<pre><code> localhost/menu/List?foo=123&amp;groupName=controlpanel\n</code></pre>\n\n<p>Am i missing something ??</p>\n"},{"tags":["asp.net-mvc","mongodb","selenium","bdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13122999,"title":"Initialize database on web automate testing","body":"<p>I got an asp.net MVC application which uses MongoDB database.\nIm auto-testing (BDD) it with SpecFlow and Selenium WebDriver, and I want to initialize my database to some state before navigating to some URL or making some acrions. Is it possible to do that ?</p>\n"},{"tags":["asp.net-mvc","error-handling","elmah"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13129921,"title":"ASP.NET MVC Error Page Being Found but getting Elmah Email","body":"<p>I have an error page located at Errors/Error in my ErrorsController.  If I create an error it redirects me to that page fine.  However I get a error email from Elmah stating the message below.  Is there a reason why I am getting this message even thought my error page displayed fine?</p>\n\n<pre><code>System.InvalidOperationException: The view 'Error' or its master was not found or no view engine supports the searched locations. The following locations were searched: ~/Views/divisions/Error.cshtml ~/Views/divisions/Error.vbhtml ~/Views/Shared/Error.cshtml ~/Views/Shared/Error.vbhtml\n</code></pre>\n\n<p><strong>Web.Config</strong></p>\n\n<pre><code>   &lt;customErrors mode=\"Off\" defaultRedirect=\"~/Error\"&gt;\n          &lt;error statusCode=\"404\" redirect=\"~/PageNotFound\" /&gt;\n      &lt;/customErrors&gt;\n</code></pre>\n"}]}
{"total":44782,"page":10,"pagesize":100,"questions":[{"tags":["asp.net-mvc","razor","asp.net-mvc-4","bundle","asp.net-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":13087527,"title":"Minified script only in MVC4 BundleConfig","body":"<p>I am adding the following ScriptBundle in BundleConfig:</p>\n\n<pre><code>    bundles.Add(new ScriptBundle(\"~/bundles/javascript\").Include(\n        \"~/Scripts/jquery-1.*\",\n        \"~/Scripts/load-image.min.js\",\n        \"~/Scripts/bootstrap.*\",\n        \"~/Scripts/bootstrap-image-gallery.*\",\n        \"~/Scripts/my.global.js\"));\n</code></pre>\n\n<p>This is referenced at the end of my _Layout.cshtml as:</p>\n\n<pre><code>@Scripts.Render(\"~/bundles/javascript\")\n</code></pre>\n\n<p>When debugging I notice that the output of this script rendering is:</p>\n\n<pre><code>&lt;script src=\"/Scripts/jquery-1.8.2.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap-image-gallery.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/my.global.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Notice the load-image.min.js script is missing? What I want is to use that same minified script whether I'm debugging or not. Under release conditions the script is included in the bundled JS file. </p>\n\n<p>I assume it's seeing the 'min', looking for an un-minified version, not finding one, then deciding what's best is to ignore it entirely. Brilliant. If I make a copy of load-image.min.js, call it load-image.js and then reference it in BundleConfig as \"load-image.*\" I find it is included in both configurations but what's the point of having to do that? </p>\n\n<p>I assume I'm missing something here. I don't have the un-minified version and I frankly don't care about it. It's used by my Bootstrap image gallery plugin and nothing else. Any ideas out there?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13127487,"title":"ASP.NET MVC Routing - Routing with optional parameters and friendly urls","body":"<p>I have a search action method which accepts at this time 5 optional parameters for its search criteria.\nMy home page has a quick search button which submits a GET request to the search action method. I have everything\nworking fine, however my urls are being generated using standard querystring syntax (?x=x&amp;y=y).</p>\n\n<p>I would like to expose friendly urls but the only way I see possible using the routing system would be\nto add every single permutation posible since all the parameters are optional, which does not sound very\nelegant.</p>\n\n<p>So are there any other routes (no pun intended :) ) I can take? Possible a Url rewrite module?</p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","razor","mvcsitemap"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":508,"score":1,"question_id":9301445,"title":"MVC3 MvcSiteMap()","body":"<p>I am using MVC3 razor view. MvcSitemapProvider dll version 3.1.0.0</p>\n\n<p>When I use this <code>@Html.MvcSiteMap().SiteMap()</code> in my razorview , I get the following error message</p>\n\n<pre><code>Method not found: 'Void System.Web.Mvc.WebFormView..ctor(System.String, System.String)'.\n</code></pre>\n\n<p>I have registered the namespace for:         </p>\n\n<pre><code>&lt;add namespace=\"MvcSiteMapProvider.Web.Html\" /&gt;\n&lt;add namespace=\"MvcSiteMapProvider.Web.Html.Models\" /&gt;\n</code></pre>\n\n<p>In both of the web.config files  (root as well as the view web.config).</p>\n\n<p>Is there anything else I need to look at?</p>\n"},{"tags":["asp.net-mvc","url-encoding","url-decode"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":977,"score":1,"question_id":4167251,"title":"ASP.Net MVC 2.0 : unescaping URL query parameters","body":"<p>I have following URL:</p>\n\n<p><code>http://localhost:8041/Reforge.aspx?name=Cyan%ECde&amp;realmId=1</code></p>\n\n<p>notice <code>%EC</code> in the value of <code>name</code> parameter.</p>\n\n<p>%EC = 236 = <strong>ì</strong> (igrave)</p>\n\n<p>In my action method:  </p>\n\n<pre><code>public ActionResult Index(string name, int realmId) {...}\n</code></pre>\n\n<p>name[4] is a character with code 65533 (0xFFFD). What am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13128654,"title":"with OutputCache random user have to pay cost","body":"<p>I'm using OutputCache to avoid execute same code everytime, but I have the following problem:</p>\n\n<p>when it expires, a random user have to pay the cost to execute this code.  Can avoid it??</p>\n\n<p>I'm using asp.net MVC 4.0.</p>\n\n<p>thanks!</p>\n"},{"tags":["asp.net-mvc","image","file-management"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":9773123,"title":"Choice of file management for asp.net MVC","body":"<p>I am looking for a free tool for file Management ( like file explorer) for an ASP.net MVC 3 solution ? </p>\n\n<p>which has the requirements</p>\n\n<ol>\n<li>Preview capabilities (for images)</li>\n<li>Creation of folder/files</li>\n<li>Deletion folder/files</li>\n<li>Upload capability</li>\n</ol>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","telerik-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13127329,"title":"Treeview (Kendo UI) with TextBox on the same page best practices in MVC4?","body":"<p>Let's say I have a view with Kendo treeview bounded to remote data source.</p>\n\n<pre><code>@(Html.Kendo().TreeView()\n    .Name(\"schemas\")\n    .DataTextField(\"name\")\n    .DataSource(dataSource =&gt; dataSource.Read(read =&gt; read.Action(\"Schemas\", \"Forms\")))\n    .Events(events =&gt; events\n    .Select(\"onSelected\")))\n</code></pre>\n\n<p>So the treeview just makes a call to the <code>Schemas</code> action in my <code>FormsController</code></p>\n\n<p>Also on the same page I have a form, which is simply the textbox and a button to submit the form</p>\n\n<pre><code>@using (Html.BeginForm(\"Load\", \"Forms\", FormMethod.Post))\n{   \n    &lt;div id=\"rootNode\"&gt;\n        @Html.TextBox(\"rootElementName\")            \n        @Html.Button(\"next\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>So I am just wondering what is the best way to handle user input and pass it to the the <code>Load</code> action of the <code>FormsController</code>? The user should select one of the options in the treeview and enter the value into textbox.\nOr should I create some sort of viewmodel for my view with all my nodes inside + two additional fields for the textbox input and selected node?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13128374,"title":"Saving unchecked item","body":"<p>I am having trouble trying to edit a page with checked items. I would like to uncheck and save the update but after doing so and returning to the same page the item is checked again. Here is my update code section and if anyone can point out any facts about going about doing this i would be greatful. I am able to check as many items as possible and save and when returning to the page all desired checked items are saved but when i uncheck and try to save the item is still checked after saving. </p>\n\n<pre><code>public void Update(VisitEntry visitEntry, IList&lt;Guid&gt; caseIds, IList&lt;Guid&gt;partyIds )\n    {\n        EnsureValid(visitEntry);\n        _visitEntryRepository.Save(visitEntry);\n        IEnumerable&lt;Guid&gt; visitIds = visitEntry.Visits.Select(v =&gt; v.VisitId);\n        List&lt;Guid&gt; toDelete =\n            visitIds.Where(visit =&gt; !(from c in caseIds.Distinct() select c).Contains(visit)).ToList();\n        foreach (Guid visitId in toDelete)\n        {\n            _visitService.Delete(visitId, visitEntry.OfficeId, visitEntry.UserId);\n        }\n        foreach (var caseId in caseIds.Distinct())\n        {\n            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(visit);\n        }\n        foreach (var partyId in partyIds.Distinct())\n        {\n            var partyVisit = new VisitEntryParty {PartyId = partyId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(partyVisit);\n        }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","azure","sql-azure"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12690453,"title":"SQL Azure + Getting an error 'There is already an open DataReader associated with this Command..', even after setting ‘MultipleActiveResultSets=True’","body":"<p>We are facing some issues with the deployed version of our application on cloud.</p>\n\n<p>Our application is an ASP.NET MVC 3 project with ADO .NET Entity Framework.</p>\n\n<p>According to the msdn blogs, we need to add the parameter ‘MultipleActiveResultSets=True’ (for Entity Framework  with SQL azure) in our database connection string which we have rightly done.</p>\n\n<p>We get the following exception while executing a database query from our application: ‘’There is already an open DataReader associated with this Command which must be closed first.”, \nwhich I guess is very much related to the ‘MultipleActiveResultSets=True’ property.</p>\n\n<p>The application works fine on the local environment with our locally deployed database as well as using the SQL azure database (on local environment).</p>\n\n<p>But when we deploy our application of cloud we get the above mentioned error. It seems that ‘MultipleActiveResultSets=True’ property is not being read from the connection string.</p>\n\n<p>The connection string that I am using is as follows:</p>\n\n<pre><code>    &lt;connectionStrings&gt;\n        &lt;add name=\"#DBInstanceName#\" connectionString=\"Data Source=tcp:#server#.database.windows.net,1433;Initial Catalog=#DBName#;User ID=”UserName#@#server#;Password=”#password#”;MultipleActiveResultSets=True\" providerName=\"System.Data.SqlClient\"/&gt;\n    &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I am able to connect to SQL Azure database using the above connection string from the locally deployed application without any exceptions. But the same application when deployed on cloud using the same connection string gives me the above mentioned error.</p>\n\n<p>Can you please help us fixing the same?</p>\n"},{"tags":["asp.net-mvc","renderpartial"],"answer_count":3,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":8341,"score":14,"question_id":607985,"title":"Shorthand for creating a ViewDataDictionary with both a model and ViewData items?","body":"<p>Is there any way to create a <code>ViewDataDictionary</code> with a model and additional properties with a single line of code. I am trying to make a <code>RenderPartial</code> call to a strongly-typed view while assembling both the model and some extra display configuration properties without explicitly assembling the ViewDataDictionary across multiple lines. It seems like it would be possible given the <code>RenderPartial</code> overload taking both a model <code>object</code> and a <code>ViewDataDictionary</code> but it looks like it simply ignores the <code>ViewDataDictionary</code> whenever they are both populated.</p>\n\n<pre><code>// FAIL: This will result in ViewData being a ViewDataDictionary\n// where Model = MyModelObject and there are no other parameters available.\nthis.Html.RenderPartial(\"SomePartialView\", MyModelObject, new ViewDataDictionary(new { SomeDisplayParameter = true }));\n</code></pre>\n\n<p>I found someone else with the <a href=\"http://stackoverflow.com/questions/495351/asp-net-mvc-rc1-renderpartial-viewdatadictionary\">same problem</a>, but their solution is the same multi-line concept I found: create a discrete <code>ViewDataDictionary</code> with the model, add the new parameter(s) and use it in the <code>RenderPartial</code> call.</p>\n\n<pre><code>var SomeViewData = new ViewDataDictionary(MyModelObject);\nSomeViewData.Add(\"SomeDisplayParameter\", true);\nthis.Html.RenderPartial(\"SomePartialView\", SomeViewData);\n</code></pre>\n\n<p>I can always wrap that logic into a <code>ChainedAdd</code> method that returns a duplicate dictionary with the new element added but it just seems like I am missing some way of creating a <code>ViewDataDictionary</code> that would do this for me (and that is a bit more overhead than I was hoping for).</p>\n\n<pre><code>this.Html.RenderPartial(\"SomePartialView\", new ViewDataDictionary(MyModelObject).ChainedAdd(\"SomeDisplayParameter\", true));\n\npublic static ViewDataDictionaryExtensions {\n    public static ViewDataDictionary ChainedAdd(this ViewDataDictionary source, string key, object value) {\n        return source.ChainedAdd(new KeyValuePair&lt;string,object&gt;(key, value));\n    }\n    public static ViewDataDictionary ChainedAdd(this ViewDataDictionary source, KeyValuePair&lt;string, object&gt; keyAndValue) {\n        ViewDataDictionary NewDictionary = new ViewDataDictionary(source);\n        NewDictionary.Add(keyAndValue);\n        return NewDictionary;\n    }\n}\n</code></pre>\n\n<p>As well, trying to assemble a <code>ViewDataDictionary</code> with an explicit <code>Model</code> and <code>ModelState</code> simply causes a compilation error because the ModelState is read-only.</p>\n\n<pre><code>// FAIL: Compilation error\nthis.Html.RenderPartial(\"SomePartialView\", new ViewDataDictionary { Model = MyModelObject, ModelState = new ViewDataDictionary( new { SomeDisplayParameter = true }});\n</code></pre>\n\n<p><strong>ANSWER(S):</strong> It looks like Craig and I ended up finding two separate syntaxes that will get the job done. I am definitely biased in this case, but I like the idea of setting the model first and \"decorating\" it afterwards.</p>\n\n<pre><code>new ViewDataDictionary(MyModelObject) { { \"SomeDisplayParameter\", true }, { \"SomeOtherParameter\", 3 }, { \"SomeThirdParameter\", \"red\" } };\n\nnew ViewDataDictionary(new ViewDataDictionary() { {\"SomeDisplayParameter\", true }})\n    { Model = MyModelObject };\n</code></pre>\n\n<p>Of course, I would still be spinning my wheels without his [eventually spot-on] answer, so, circle gets the square.</p>\n"},{"tags":["asp.net-mvc","multi-tenant"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12598168,"title":"Multi Tenant application using MapRoute","body":"<p>I have found a solution for implement multi-tenant in my asp.net mvc project and \nI want know if it's correct or exist a better way.</p>\n\n<p>I want organize more customers using the same application handling the web request, for example:</p>\n\n<pre><code>http://mysite/&lt;customer&gt;/home/index        //home is controller and index the action\n</code></pre>\n\n<p>For this reason i changed the default maproute:</p>\n\n<pre><code>routes.MapRoute(\n    name: \"Default\",\n    url: \"{customername}/{controller}/{action}/{id}\",\n    defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>and I implemented a custom ActionFilterAttribute:</p>\n\n<pre><code>public class CheckCustomerNameFilterAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuting( ActionExecutingContext filterContext )\n    {\n        var customerName = filterContext.RouteData.Values[\"customername\"];\n\n        var customerRepository = new CustomerRepository();\n\n        var customer = customerRepository.GetByName( customerName );\n\n        if( customer == null )\n        {\n            filterContext.Result = new ViewResult { ViewName = \"Error\" };\n        }\n\n        base.OnActionExecuting( filterContext );\n    }\n}\n</code></pre>\n\n<p>and using it:</p>\n\n<pre><code>public class HomeController : Controller\n{\n    [CheckCustomerNameFilterAttribute]\n    public ActionResult Index()\n    {\n        var customerName = RouteData.Values[\"customername\"];\n\n        // show home page of customer with name == customerName\n\n        return View();\n    }\n}\n</code></pre>\n\n<p>With this solution i can switch customer using customer name and correctly accept requests like this:</p>\n\n<pre><code>http://mysite/customer1\nhttp://mysite/customer2/product/detail/2\n...................................\n</code></pre>\n\n<p>This solution works well but I don't know if the best approach.\nDoes anyone know a better way?</p>\n"},{"tags":["asp.net-mvc","layout","themes","asp.net-mvc-areas"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13123573,"title":"ASP MVC Areas for themes","body":"<p>I'm currently searching for a solution where a user could select a theme AND a layout based on his preferences.</p>\n\n<p>Let's say I have a website that offers 2 themes: yellow and green.</p>\n\n<p>These two have 2 different layouts: 2 columns and 3 columns layout and some partial views will be structured differently and have different functional aspects.</p>\n\n<p>The best way I thought was to use Areas but, what I don't want is the URL structure to change at all. I would use a variable that sets the area behind the scenes when the action is executed.</p>\n\n<p>For instance, I'm setting my layout to 3 columns and use the green theme.\nI would use the 3Cols area with it's specific views but the controller implements the same exact code as the 2Cols layout so, I don't want to duplicate the controller.</p>\n\n<p>So, a recap of what I'm trying to achieve is this:</p>\n\n<ul>\n<li>Use Areas to swith layouts and themes</li>\n<li>Use a single controller for each layouts</li>\n<li>Have the same urls independantly from the selected layout</li>\n</ul>\n\n<p>Any thoughts/suggestions on that?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc","internet-explorer","https","mime-types"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":13119340,"title":"IE6-8 unable to download file from HTTPS site","body":"<p>I have an MVC .Net application that has actions that return report files, usually <code>.xslx</code>:</p>\n\n<pre><code>byte[] data = GetReport();\nreturn File(data, \n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \n    \"filename.xlsx\");\n</code></pre>\n\n<p>This works great in testing and in all browsers, but when we put this on an SSL site it fails for IE6, 7 and 8 (all the proper browsers still work fine) with this unhelpful error:</p>\n\n<p><img src=\"http://i.stack.imgur.com/TXGo5.png\" alt=\"Unable to download filename from server. Unable to open this Internet site. The requested site is either unavailable or cannot be found. Please try again later.\"></p>\n\n<p>This used to work in a legacy application (non-MVC) that this action replaces.</p>\n\n<p>We can't tell our users to change anything locally - about 60% are still on IE6!</p>\n\n<p>How can I fix this using MVC?</p>\n\n<h2>Update</h2>\n\n<p>Further digging reveals that this is a fundamental failure in IE6-8. According to <a href=\"http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx\" rel=\"nofollow\">Eric Law's IE internals blog</a> this happens because, during an SSL connection, IE treats the no-cache directive as an absolute rule. So, rather than not cache a copy, it considers no-cache to mean that it shouldn't be possible to save a copy to disk even when \n<code>Content-Disposition:attachment</code> and with an explicit prompt for a download location.</p>\n\n<p>Obviously this is wrong, but while it's fixed in IE9 we're still stuck with all the IE6-8 users.</p>\n\n<p>Using MVC's action filter attributes produces the following headers:</p>\n\n<pre><code>Cache-Control:no-cache, no-store, must-revalidate\nPragma:no-cache\n</code></pre>\n\n<p>Using Fiddler to change these on the fly we can verify the headers that need to be returned instead:</p>\n\n<pre><code>Cache-Control:no-store, no-cache, must-revalidate\n</code></pre>\n\n<p>Note the order of the <code>Cache-Control</code> <strong>must</strong> have <code>no-store</code> <em>before</em> <code>no-cache</code> and that the <code>Pragma</code> directive <strong>must</strong> be removed entirely.</p>\n\n<p>This is a problem - we use MVC's action attributes extensively and I really don't want to rewrite them from scratch. Even if we could IIS throws an exception if you try to remove the <code>Pragma</code> directive.</p>\n\n<p>How do you make Microsoft's MVC and IIS return the no-cache directive that Microsoft's IE6-8 can handle under HTTPS? I do not want to allow private caching of the response (as per this <a href=\"http://stackoverflow.com/questions/9996353/internet-explorer-error-using-asp-mvc-4-0-fileresult\">similar question</a>) or ignore the MVC built in methods with an override (as per my own answer, which is just my current best hack).</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13126279,"title":"Adding Routes for WebAPI in MVC 4","body":"<p>I've got a WebApi Controller and want to add a route.</p>\n\n<p>Here is my Controller ...</p>\n\n<pre><code>        public class ExtraInformationController : ApiController\n        {\n            private readonly ExtraInformationRepository _extraInfoRepository = new ExtraInformationRepository();\n\n            public ExtraInformation Get(int assetId)\n            {\n                return _extraInfoRepository.GetByAssetID(assetId).FirstOrDefault();\n            }\n\n        }\n</code></pre>\n\n<p>Heres my route ...</p>\n\n<pre><code>  routes.MapHttpRoute(\n            \"ExtraInformation\",\n            \"api/ExtraInformation/{assetId}\",\n            new { controller = \"ExtraInformation\", action = \"Get\" }\n        );\n</code></pre>\n\n<p>I want to be able to call ...</p>\n\n<p>api/ExtraInformation/4</p>\n\n<p>But I'm getting ...</p>\n\n<p>No HTTP resource was found that matches the request URI 'http://localhost:35188/api/ExtraInformation/4'.No action was found on the controller 'ExtraInformation' that matches the request.</p>\n\n<p>Can anyone assist please?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":5475,"score":3,"question_id":6432661,"title":"Can I add a ModelState.AddModelError from a Model class (rather than the controller)?","body":"<p>I want to display an error to the user in an ASP.MVC 3 input form using ModelState.AddModelError() so that it automatically highlights the right field and puts the error next to the particular field.</p>\n\n<p>In most examples, I see ModelState.AddModelError() and if(ModelState.IsValid) placed right in the Controller. However, I would like to move/centralize that validation logic to the model class. Can I have the model class check for model errors and populate ModelState.AddModelError()?</p>\n\n<p>Current Code:</p>\n\n<pre><code>// Controller\n[HttpPost]\npublic ActionResult Foo(Bar bar)\n{  \n    // This model check is run here inside the controller.\n    if (bar.isOutsideServiceArea())\n        ModelState.AddModelError(\"Address\", \"Unfortunately, we cannot serve your address.\");\n\n    // This is another model check run here inside the controller.\n    if (bar.isDuplicate())\n        ModelState.AddModelError(\"OrderNumber\", \"This appears to be a duplicate order\");\n\n    if (ModelState.IsValid)\n    {\n        bar.Save();\n        return RedirectToAction(\"Index\");\n    }\n    else\n        return View(bar)\n}\n</code></pre>\n\n<p>Desired Code:</p>\n\n<pre><code>// Controller\n[HttpPost]\npublic ActionResult Foo(Bar bar)\n{  \n    // something here to invoke all tests on bar within the model class\n\n    if (ModelState.IsValid)\n    {\n        bar.Save();\n        return RedirectToAction(\"Index\");\n    }\n    else\n        return View(bar)\n}\n\n\n...\n// Inside the relevant Model class\nif (bar.isOutsideServiceArea())\n    ModelState.AddModelError(\"Address\", \"Unfortunately, we cannot serve your address.\");\n\nif (bar.isDuplicate())\n    ModelState.AddModelError(\"OrderNumber\", \"This appears to be a duplicate order\");\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1137,"score":2,"question_id":2353878,"title":"ASP.NET MVC - State and Architecture","body":"<p>After a pair programming session, an interesting question came up which I think I know the answer for.  </p>\n\n<p>Question:  Is there any other desired way in ASP.NET MVC to retain 'state' other than writing to database or a text file?</p>\n\n<p>I'm going to define state here to mean that we have a collection of person objects, we create a new one, and go to another page, and expect to see the newly created person.  (so no Ajax)</p>\n\n<p>My thoughts are we don't want any kung-fu ViewState or other mechanisms, this framework is about going back to a stateless web.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13122626,"title":"Add style to an element based on a Model value","body":"<p>I want to add a simple inline style to my div tag if a certain criteria is met.</p>\n\n<p>I am able to apply the \"disabled\" class successfully, but I can't get my cursor style to show up.</p>\n\n<pre><code>&lt;div class=\"item  @(item.AvailableTimeSlots == \"0\" ? \"disabled\" : \"\")\" @(item.AvailableTimeSlots == \"0\" ? \"style='cursor: default;'\" : \"\")&gt;\n</code></pre>\n\n<p>any pointers?</p>\n"},{"tags":["c#","asp.net-mvc","model-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13122485,"title":"How to disable MVC 4 model validation?","body":"<p>I am working on a project written on mvc 4 that got several instances of wizard-like behaviour - chain of few views that pass the same half-filled model. Starting from the second view controls are initially shown as non-valid (which is logical - model, passed to controller method has corresponding properties empty). Currently \n<code>ModelState.Clear();</code>\nsolution is used, but putting it into each method with model as an argument looks ugly. Same with approach found here <a href=\"http://stackoverflow.com/questions/3578781/disable-model-validation-in-asp-net-mvc\">Disable Model Validation in Asp.Net MVC</a></p>\n\n<pre><code>ModelBinders.Binders[typeof(MyModelType)] = new NonValidatingModelBinder();\n</code></pre>\n\n<p>Project got too many (over 100) model classes to register each one manually.</p>\n\n<p>Is there simpler way (maybe key in .config) that turns off model validation completely?</p>\n"},{"tags":["asp.net-mvc","iis7","certificate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13124586,"title":"Combining username/password and client certificate for authentication","body":"<p>The following is my requirement.</p>\n\n<ol>\n<li><p>When user registers, we use standard membership (aspnetdb) to create an account (username+password).</p></li>\n<li><p>In addition, we would like to create a client certificate to every user and ask them to install it on their client PC.</p></li>\n<li><p>When user tries to login into our web application, we want the broweser (IE, Chrome, Firefox and Safari) to automatically prompt to present the certificate </p></li>\n<li><p>In addition to presenting the certificate, they should go to standard login screen where they have to type in username and password.</p></li>\n<li><p>Server is IIS 7/7.5. We do not want to map one-to-one certificate on the server side. Instead, one of the paramaters in the certificate (for example, subject) will be used to map the certificate to the user information.</p></li>\n<li><p>This has to be implemented using ASP.NET MVC 4.0</p></li>\n</ol>\n\n<p>If any of you have solved this problem, please provide the information.</p>\n"},{"tags":["c#","asp.net-mvc","facebook","oauth"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":254,"score":2,"question_id":12610402,"title":"OAuthWebSecurity With Facebook not using email permission as expected","body":"<p>Using the new OAuthWebSecurity for authenticating with facebook, I added the email permission on my facebook app. Now as I can read I need to define a scope to be able to actually get the email in the result. So far without the scope I'm not getting the users email and not sure why  as I can not see where to define the \"scope\"</p>\n\n<p>Its just a rip of the MVC4 default authenticationcontrollers  external login.</p>\n"},{"tags":["asp.net-mvc","error-handling","partial-views"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":13088593,"title":"MVC error page is loaded in partial view","body":"<p>I have a error page with layout that works fine in most cases but when there is an error in a controller that returns a partial view the error page and its layout is placed in the partial view. I guess thats logical but I want the error page to be loaded as full page. How do I accomplish that without changing all error handling. </p>\n\n<p>web.config:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/Error\"&gt;\n  &lt;error statusCode=\"500\" redirect=\"~/SystemPages/ErrorPage\" /&gt;\n  &lt;error statusCode=\"403\" redirect=\"~/SystemPages/FileNotFound\" /&gt;\n  &lt;error statusCode=\"404\" redirect=\"~/SystemPages/FileNotFound\" /&gt;\n&lt;/customErrors&gt;\n</code></pre>\n\n<p>Global.asax:</p>\n\n<pre><code>Shared Sub RegisterGlobalFilters(ByVal filters As GlobalFilterCollection)\n    filters.Add(New HandleErrorAttribute())\nEnd Sub\n</code></pre>\n\n<p>BaseController:</p>\n\n<pre><code>Protected Overrides Sub OnException(ByVal filterContext As ExceptionContext)\n\n    If filterContext Is Nothing Then Return\n\n    If TypeOf (filterContext.Exception) Is FaultException Then\n        Dim CodeName As String = \n        CType(filterContext.Exception, FaultException).Code.Name\n        Dim Message As String = CType(filterContext.Exception, FaultException).Message\n        TempData(\"ErrorMessage\") = Message\n    Else\n        Logging.LogDebugData(HamtaDebugInformation(filterContext.RouteData))\n        Logging.WriteExceptionLog(filterContext.Exception)\n        TempData(\"ErrorMessage\") = filterContext.Exception.Message\n    End If\n\n    Response.Redirect(\"/SystemPages/ErrorPage\")\n\nEnd Sub\n</code></pre>\n\n<p>SearchController:</p>\n\n<pre><code>   Function GetData() As ActionResult\n   ...\n   Return PartialView(\"_Tab\", vmData)\n</code></pre>\n\n<p>ErrorPage:</p>\n\n<pre><code>@Code\nViewData(\"Title\") = \"ErrorPage\"\nLayout = \"~/Views/Shared/_Layout.vbhtml\"\nEnd Code\n\n&lt;div id=\"mainContent\" class=\"oneColumn\"&gt;\n&lt;div class=\"panel\"&gt;\n    &lt;span class=\"panelTLC\"&gt;&lt;/span&gt;\n    &lt;span class=\"panelTRC\"&gt;&lt;/span&gt;\n    &lt;div id=\"inputPanel\" class=\"panelContent\"&gt;\n        &lt;div class=\"modul\"&gt;\n            &lt;div class=\"modulHead\"&gt;\n                &lt;span class=\"TLC\"&gt;&lt;/span&gt;\n                &lt;span class=\"TRC\"&gt;&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div class=\"modulContent\"&gt;\n                &lt;span class=\"TLC\"&gt;&lt;/span&gt;&lt;span class=\"TRC\"&gt;&lt;/span&gt;\n                &lt;p&gt;@ViewBag.ErrorMessage&lt;/p&gt;\n                &lt;p&gt;@TempData(\"ErrorMessage\")&lt;/p&gt;\n                &lt;span class=\"BLC\"&gt;&lt;/span&gt;\n                &lt;span class=\"BRC\"&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;span class=\"panelBLC\"&gt;&lt;/span&gt;&lt;span class=\"panelBRC\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13068170,"title":"One field of the two will be required in Model","body":"<p>I have a situation where I want to be in the model was required only one field of the two.</p>\n\n<pre><code>    public int AutoId { get; set; }\n    public virtual Auto Auto { get; set; }\n\n    [StringLength(17, MinimumLength = 17)]\n    [NotMapped]\n    public String VIN { get; set; }\n</code></pre>\n\n<p>If someone entered the vin, it is converted in the controller on the AutoID. How to force the controller to something like this work?</p>\n\n<pre><code>         public ActionResult Create(Ogloszenie ogloszenie) {\n        information.AutoId = 1;         \n        if (ModelState.IsValid)\n        {\n        ...\n        }..\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","reportviewer"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":5443,"score":1,"question_id":2139223,"title":"ReportViewer problem in google chrome","body":"<p>I am using Reportviewer in my asp.net mvc (C#) application. In IE and Firefox, the reportviewer looks fine.</p>\n\n<p>But in Chrome, the header and body gets shrinked. I was able to correct the header display problem as suggested in <a href=\"http://www.mazsoft.com/blog/post/2009/08/13/ReportViewer-control-toolbar-in-Google-Chrome-browser.aspx\" rel=\"nofollow\">http://www.mazsoft.com/blog/post/2009/08/13/ReportViewer-control-toolbar-in-Google-Chrome-browser.aspx</a>.</p>\n\n<pre><code>  if ($.browser.safari) {\n      $(\"#ReportViewerControl table\").each(function(i, item) {\n         $(item).css('display', 'inline-block');\n      });\n  }\n</code></pre>\n\n<p>But the Body(Viewer) part still appears to be in half of the screen. The problem appears to be with the width of empty second <code>td</code> of the table:</p>\n\n<pre><code>&lt;table cellspacing=\"0\" cellpadding=\"0\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td onpropertychange=\"ShowFixedHeaders()\" id=\"oReportCell\"&gt;....Some Data...&lt;/td&gt;\n      &lt;td height=\"0\" width=\"100%\"&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The Second td in the above table is empty with 100% width, this may be the cause of the bug in chrome. How can i remove the width of the second td or is there any fix for this?\n<img src=\"http://www.freeimagehosting.net/uploads/13114a4f00.png\" alt=\"ReportViewer Design\"></p>\n\n<p>How can i access the element inside nested iframe?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":12945737,"title":"user.identity.name and authenticationtype blank in mvc 3 with windows authentication after about 2 minutes","body":"<p>I am using windows authentication in my mvc 3 app and usually everything works fine. However, if i leave a certain page up for about 2 minutes, and then make an ajax request, the User.Identity.Name (in the controller) returns blank, as does the authenticationtype. This causes a failure when i check user.isinrole(whatever). Usually clearing the cache will fix the problem, but not regular refreshing. Sometimes i need to clear the cache a few times. </p>\n\n<p>I am using chrome, and didn't notice the bug when I tried in IE (I haven't tried waiting longer than it takes in chrome), so is it possible the bug is with chrome?\nEDIT: It happens in firefox too.</p>\n\n<p>I noticed the time to failure was similar to the issue in <a href=\"http://stackoverflow.com/questions/12675593\">User.Identity.Name sometimes blank with Windows authentication</a>\n but i did not see anything about anonymous authentication in my web.config</p>\n\n<p>in <a href=\"http://stackoverflow.com/questions/363358\">user.identity.name becames Blank after a while</a> the problem seemed to be that anonymous authentication is enabled on their IIS server, and I have that too, but I wanted it set on my server. There are certain pages that need to be accessed anonymously, so the authentication is all enforced by MVC and not by the server, so IIS has anonymous and windows authentication enabled</p>\n\n<p>I have authentication mode=\"Windows\" in my system.web tag, and nothing about authorization in web.config. In the registerglobals function in global.asax.cs, i have</p>\n\n<pre><code>filters.Add(new RequireWindowsAuth());\n</code></pre>\n\n<p>that's a class that inherits from AuthorizeAttribute, and it overrides the OnAuthorization method to do something like the following</p>\n\n<pre><code>if(!User.IsInRole(\"Admin\") &amp;&amp; AdminAttr is defined)\n     filterContext.Result = new HttpStatusCodeResult(403, \"You are not authorized to view this page\");\nelse if(AllowAnonymousAttribute is not found)\n    base.OnAuthorization(filterContext);\n</code></pre>\n\n<p>when the error happens, i get that exact 403 response from the server.</p>\n\n<p>the action requested has the admin attr and not the allowanonymous attr defined on it</p>\n\n<p>here is how i check for attrs being defined</p>\n\n<pre><code>filterContext.ActionDescriptor.IsDefined(attr, true) || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AdminAttribute), true)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","mono","browser-cache","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13120734,"title":"How to get fresh copy if OutputCache(Location = OutputCacheLocation.Downstream is used","body":"<p>Mono MVC2 application uses controller below to cache order page in browser.</p>\n\n<p>If F5 is pressed in browser, old page is still returned to browser.\nHow to return fresh page if F5 is pressed ?\nIt looks like page is cached in server but OutputCacheLocation.Downstream must cache page only in borwser. Is this bug?</p>\n\n<pre><code>    [Authorize]\n    public class DetailController : ControllerBase\n    {\n        [OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = \"_entity\")]\n        public ActionResult Index(string _entity, int? orderId)\n        {\n...\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","linq","deferred-execution"],"answer_count":4,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":102,"score":7,"question_id":13115008,"title":"Does LINQ deferred execution occur when rendering the view, or earlier?","body":"<p>Given a very basic LINQ that is returned to a MVC view, at what exact point does the deferred execution fire?</p>\n\n<p>In the controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n    var model = _fooService.GetAll();\n    return View(model);\n}\n</code></pre>\n\n<p>In the model:</p>\n\n<pre><code>@foreach (var item in Model) {    \n    &lt;tr&gt;\n        &lt;td&gt;@item.Bar&lt;/td&gt;\n   &lt;/tr&gt;\n}\n</code></pre>\n\n<p>The query is not executed when we call <code>_fooService.GetAll()</code> of course, but is deferred to some later point - but at which exact point is it executed?</p>\n\n<ul>\n<li>The <code>return View(model);</code> statement in the controller (doesn't look like it)?</li>\n<li>The <code>@foreach (var item in Model)</code> line in the view?</li>\n<li>The first time the <code>@item.Bar</code> line in the view is hit?</li>\n<li>Something else that occurs in between <code>return View(model);</code> and the view being rendered?</li>\n</ul>\n"},{"tags":["asp.net-mvc","mvc","asp.net-mvc-2","validation","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1907,"score":3,"question_id":6495510,"title":"MVC 2 vs MVC 3 custom validation attributes using DataAnnotationsModelValidatorProvider.RegisterAdapter","body":"<p>I read on some post, but cant find it now that in MVC 3 it was not really needed to create a Validator, only the Attribute.  Is this true?  I do say I find it confusing that the attribute has the IClientValidatable on it.  So what does the DataAnnotationsModelValidator class do if the annotation has the client side script name (IClientValidatable), and the ability to validate (ValidationAttribute IsValid)?</p>\n\n<p>It would be really nice if I didnt have to register the Attribute with the Validator in the global.  Can this be done?  Did I read some bad advise?</p>\n\n<p>EDIT: Interestingly enough I just tested it by excluding the validator, put all the logic in IsValid and it works great.  I guess the only thing that might be missing would be the controller context, but I am not sure that is useful in validation.  The IsValid has ValidationContext which has ServiceContainer if I needed a service.  Any real disadvantage I am not picking up on here?</p>\n\n<p>EDIT 2:\nI will start with a validator from this example: <a href=\"http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx</a></p>\n\n<p>The Attribute:</p>\n\n<pre><code>public class RequiredIfAttribute : ValidationAttribute, IClientValidatable\n{\n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue)\n    {\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    public override bool IsValid(object value)\n    {\n        return innerAttribute.IsValid(value);\n    }\n\n    public System.Collections.Generic.IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule()\n        {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"requiredifattribute\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p>The Validator:</p>\n\n<pre><code>public class RequiredIfValidator : DataAnnotationsModelValidator&lt;RequiredIfAttribute&gt;\n{\n    public RequiredIfValidator(ModelMetadata metadata, ControllerContext context, RequiredIfAttribute attribute)\n        : base(metadata, context, attribute)\n    {\n    }\n\n    public override IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules()\n    {\n        return base.GetClientValidationRules();\n    }\n\n    public override IEnumerable&lt;ModelValidationResult&gt; Validate(object container)\n    {\n        var field = Metadata.ContainerType.GetProperty(Attribute.DependentProperty);\n        if (field != null)\n        {\n            var value = field.GetValue(container, null);\n            if ((value == null &amp;&amp; Attribute.TargetValue == null) ||\n                (value.Equals(Attribute.TargetValue)))\n            {\n                if (!Attribute.IsValid(Metadata.Model))\n                    yield return new ModelValidationResult { Message = ErrorMessage };\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>With the current code above, I need to register in the Global.asax.cs file:</p>\n\n<pre><code>DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(RequiredIfAttribute), typeof(RequiredIfValidator));\n</code></pre>\n\n<p>But if I move everything into just the attribute, I dont have to register it:</p>\n\n<pre><code>public class RequiredIfAttribute : ValidationAttribute, IClientValidatable\n{\n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue)\n    {\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {\n        var field = validationContext.ObjectInstance.GetType().GetProperty(DependentProperty);\n        if (field != null)\n        {\n            var dependentValue = field.GetValue(validationContext.ObjectInstance, null);\n            if ((dependentValue == null &amp;&amp; TargetValue == null) ||\n                (dependentValue.Equals(TargetValue)))\n            {\n                if (!innerAttribute.IsValid(value))\n                    return new ValidationResult(ErrorMessage);\n            }\n        }\n        return ValidationResult.Success;\n    }\n\n    public System.Collections.Generic.IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule()\n        {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"requiredifattribute\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p>Is there an problem with the last bit of code replacing all of the other code?  Why would I keep the validator class?</p>\n"},{"tags":["asp.net-mvc","entity-framework","context"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1146,"score":5,"question_id":5205606,"title":"EF Context Management","body":"<p>What is the best way to manage the context of Entity Framework when using MVC application?</p>\n\n<p>I am using a Repository/Service pattern.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>After looking through some of these questions: stackoverflow.com/users/587920/sam-striano, I am more confused then before. Some say use the context per repository, but wht if I want to use multiple repositories in one controller method?</p>\n\n<p>And to follow good separation design, how do you use UnitOfWork in the MVC app with out making it dependent on EF? I want to be able to unit test my controllers, model, services, etc. using a mock context?</p>\n"},{"tags":["c#",".net","asp.net-mvc","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13117079,"title":"How do you code a \"Create\" view for a model?","body":"<p>I have a <code>many-to-many</code> field in Menu model named <code>Roles</code>, i'm trying to create a 'create' view for the model.</p>\n\n<p>my create action methods:</p>\n\n<pre><code>    public ActionResult Create()\n    {\n        ViewBag.ParentMenuId = new SelectList(_db.Menus, \"Id\", \"Name\");\n        ViewBag.Roles = new SelectList(_db.UserRoles.ToList(), \"Id\", \"Name\");\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Create(Menu menu)\n    {\n        if (ModelState.IsValid)//the state is always **invalid**\n        {\n            _db.Menus.Add(menu);\n            _db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n        ViewBag.ParentMenuId = new SelectList(_db.Menus, \"Id\", \"Name\", menu.ParentMenuId);\n        return View(menu);\n    }\n</code></pre>\n\n<p>my view(<strong>Create.cshtml</strong>):</p>\n\n<pre><code>    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Roles, \"Roles\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.ListBox(\"Roles\")\n        @Html.ValidationMessageFor(model =&gt; model.Roles)\n    &lt;/div&gt;\n</code></pre>\n\n<p>how to fix it? I'm getting the following error:</p>\n\n<p><code>The ViewData item that has the key '' is of type '' but must be of type 'IEnumerable&lt;SelectListItem&gt;'</code></p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13124073,"title":"How to reuse ActionResult method in MVC","body":"<p>I am new to ASP.Net,</p>\n\n<p>i have the setup like this </p>\n\n<pre><code>routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Invoke\", id = \"Folder1/Page1\" } // Parameter defaults\n        );\n</code></pre>\n\n<p>when i run the project it will display the page1, i have a ActionResult method in my cs like this.</p>\n\n<pre><code> public ActionResult Invoke(string Id)\n    {\n        ViewBag.Title = Id;\n        return View(Id);\n    }\n</code></pre>\n\n<p>in my msater page this is an ActionLink like this,</p>\n\n<pre><code>&lt;%: Html.ActionLink(\"Page2\", \"Invoke\", new { id = \"Folder1/Page1\" })%&gt;\n</code></pre>\n\n<p>when i click this link, it not directing to page2 , it just showing error msg.</p>\n\n<p>some thing i missed here ?</p>\n"},{"tags":["c#","javascript","ajax","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13123666,"title":"Call controller method with List<MyItem> parameter via ajax","body":"<p>I have this class in my c# code:</p>\n\n<pre><code>public class MyItem\n    {\n        public int LocationId { get; set; }\n        public int Value { get; set; }\n        public int ddlId { get; set; }\n    }\n</code></pre>\n\n<p>Here is my Js/Ajax code:</p>\n\n<pre><code>var array = new Array();\ngrid.forEachRow(function (id) {\n        var object = {\n            LocationId: id,\n            Value: someValue,\n            ddlId: otherValue\n        };\n        array.push(object);\n    });\n\n$.ajax({\n    type: \"POST\",\n    url: \"/MyController/SaveTheList\",\n    data: { myList: array },\n    success:function() { }\n });\n</code></pre>\n\n<p>And here is the method in the controller:</p>\n\n<pre><code> [HttpPost]\n public ActionResult SaveTheList(List&lt;MyItem&gt; myList)\n { }\n</code></pre>\n\n<p>The method gets hit, and myList has the exact length, but all the values in the objects are 0.</p>\n"},{"tags":["asp.net-mvc","security","https","hosting","web-hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13100290,"title":"Does the RequireHttpsAttribute place any requirements on the hosting provider?","body":"<p>I would like to publish a website. I would like the website to run over HTTPS. I have read about the requirehttpsattribute: <a href=\"http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx</a></p>\n\n<p>Is https done at the application level or does the hosting provider need to support this as well?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13092181,"title":"$.ajax call receives Resource not Found but the MVC debug says route is hit?","body":"<p>I'll try to explain in as much detail as possible my setup.</p>\n\n<p>1) I'm using an Area (MVC 4).  Here's the folder and file setup:\n<img src=\"http://i.stack.imgur.com/EyUH6.jpg\" alt=\"enter image description here\">\n2) I'm resolving by default straight to my Area (not a Home controller in the root views) on purpose (I don't really need the Home controller that's not related to this question, just some background info)\n3) My global.asax registration of routes looks like this:</p>\n\n<pre><code>   protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n\n        WebApiConfig.Register(GlobalConfiguration.Configuration);\n        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n        BundleConfig.RegisterBundles(BundleTable.Bundles);\n    }\n</code></pre>\n\n<p>4) My route.config looks like this:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    // Purposely not going to use the Home Controller (just a convention I want in place)\n    routes.MapRoute(\"Default\", \"\", new { area = \"Search\", controller = \"Member\", action = \"Index\", id = UrlParameter.Optional }).DataTokens.Add(\"area\", \"Search\");\n}\n</code></pre>\n\n<p>5) My area's registration routing looks like this:</p>\n\n<pre><code>   public class MemberAreaRegistration : AreaRegistration\n    {\n\n        public override string AreaName\n        {\n            get { return \"Search\"; }\n        }\n\n\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\"Search_Member_GetMemberByContractNumber\", \"Search/Member/{id}\", defaults: new { controller = \"Member\", action = \"GetMemberByContractNumber\", id = UrlParameter.Optional });\n            context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", defaults: new { controller = \"Member\", action = \"Index\", id=UrlParameter.Optional});\n        }\n\n    }\n</code></pre>\n\n<p>6) I have a controller with this action:</p>\n\n<pre><code>[HttpGet]\npublic JsonResult GetMemberByContractNumber(int contractNumber)\n{\n    Member memberDto = MemberCRUD.RetrieveMember(contractNumber);\n\n    JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);\n\n    Json(JsonConvert.SerializeObject(member));\n\n    return member;\n} \n</code></pre>\n\n<p>7) I have a view that's trying to send an ajax request to that action:</p>\n\n<pre><code>// Get the results &amp; Bind to grid\n$(function () {\n    var members = [];\n    $.getJSON('Search/Member/26049', function (data) {\n        members = data;\n        grid = new Slick.Grid(\"#searchResults-Grid\", members, columns, options);\n    });\n});\n</code></pre>\n\n<p><strong>What works</strong>: I can run the site, it hits my Member's Index() action and loads the Member's Index View.  That's not the problem here.</p>\n\n<p><strong>What the problem is</strong>: I can't get this to resolve...it doesn't find my controller and action in the jQuery getJSON request 'Search/Member/26049'</p>\n\n<p>** The error I get in FireBug**:</p>\n\n<pre><code>http://localhost/OurappName/Search/Member/26049 404 Not Found\n        19ms\nin the response:\n&lt;b&gt; Requested URL: &lt;/b&gt;/ballysearch/Search/Member/26049&lt;br&gt;&lt;br&gt;\n</code></pre>\n\n<p><strong>What I've Tried</strong>: Originally in my area's route config, I had that first line at the end so tried moving it up.  I'm talking about the context.MapRoute(\"Search_Member_GetMemberByContractNumber\", \"Search/Member/{id}\"..I had that after my default route.  Then switched up cause I figured it's always going to obviously hit my default route..which should really just be a \"catch-all\" route at the end in this case instead.</p>\n\n<p>I have tried several variations of the url from the getJSON such as:\n'Member/26049'</p>\n\n<p>I'm <em>pretty sure</em> my controller's action is fine the way it's setup.</p>\n\n<p>I know it's probably a route issue but I do not see what it is.</p>\n\n<p>UPDATE:</p>\n\n<p>here's the route debug results</p>\n\n<p><img src=\"http://i.stack.imgur.com/4Rc6X.jpg\" alt=\"enter image description here\"></p>\n\n<p>UPDATE:</p>\n\n<p>Looks now like maybe I was thinking all along it was a route issue but at least now it's ok so not sure what this error means by \"Resource\"</p>\n\n<p>Here's the routes I have now that seem to be working in my MemberAreaRegistration.cs</p>\n\n<p><img src=\"http://i.stack.imgur.com/n9a6R.jpg\" alt=\"enter image description here\"></p>\n\n<p>context.MapRoute(\"Search_Member\", \"Search/Member/{contractNumber}\", new { controller = \"Member\", action = \"GetMemberByContractNumber\", contractNumber = UrlParameter.Optional });\n    context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", new {controller=\"Member\", action = \"Index\", id = UrlParameter.Optional });</p>\n\n<p>now not sure why I'm getting this resource error.  In Firebug, there's some additional info but I still don't get what's wrong with my controller code if that's the case or my jQuery code if that's also an issue...I don't see it:</p>\n\n<pre><code>[HttpException]: The controller for path &amp;#39;/OurAppName/Search/Member/1234&amp;#39; was not found or does not implement IController.\n</code></pre>\n\n<p>Couple more views of the error from firebug still:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ByM2i.jpg\" alt=\"enter image description here\"><img src=\"http://i.stack.imgur.com/eEN1F.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>UPDATE -------------------------------------------</strong> 10/27/2012:</p>\n\n<p><strong>Want to post my current attempt detailed info to this point</strong></p>\n\n<p>My routes are setup like this in my <strong>Route.Config</strong>:</p>\n\n<pre><code>    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n        routes.IgnoreRoute(\"favicon.ico\");\n        routes.IgnoreRoute(\"{*favicon}\", new { favicon = @\"(.*/)?favicon.ico(/.*)?\" });\n        routes.IgnoreRoute(\"{*staticfile}\", new { staticfile = @\".*\\.(css|js|gif|jpg)(/.*)?\" });\n        routes.IgnoreRoute(\"{*robotstxt}\", new { robotstxt = @\"(.*/)?robots.txt(/.*)?\" });\n\n        // Purposely not going to use the Home Controller, we don't need it so hence the DataTokens to tell MVC to go straight to my Area called Search to look for the member controller for the default route when you first hit the View\n        routes.MapRoute(\"Default\", \"\", new { area = \"Search\", controller = \"Member\", action = \"Index\", id = UrlParameter.Optional }).DataTokens.Add(\"area\", \"Search\");\n    }\n</code></pre>\n\n<p>My Area's registration routes:</p>\n\n<pre><code>namespace OurApp.Web.Areas.Search.Views.Member\n{\n    public class MemberAreaRegistration : AreaRegistration\n    {\n\n        public override string AreaName\n        {\n            get { return \"Search\"; }\n        }\n\n\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n\n\n            context.MapRoute(\"Search_Member\", \"Search/Member/{contractNumber}\", new { controller = \"Member\", action = \"GetMemberByContractNumber\", contractNumber = UrlParameter.Optional });\n            context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", new {controller=\"Member\", action = \"Index\", id = UrlParameter.Optional });\n        }\n\n    }\n}\n</code></pre>\n\n<p>Finally my entire Controller Code:</p>\n\n<pre><code>namespace OurApp.Web.Areas.Search.Controllers\n{\n\n    public class MemberController : Controller\n    {\n\n        public ActionResult Index()\n        {\n            return View();\n        }\n\n\n        [HttpGet]\n        public JsonResult GetMemberByContractNumber(int contractNumber)\n        {\n            Member memberDto = MemberCRUD.RetrieveMember(contractNumber);\n\n            JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);\n\n            return Json(member, JsonRequestBehavior.AllowGet);\n\n            return member;\n        }\n\n\n        [HttpGet]\n        public ActionResult TestTheRoute(int daveIdTest)\n        {\n            return null;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>1)</strong> I have no begin form tag in my View.  That's because I'm only trying to just test this $.ajax() function out and later I'll add a form and invoke that call from some event.  So that should not matter, that I don't have a form element yet right?  I simply have $.ajax call at the top of my view in the open so it fires off on its own.</p>\n\n<p><strong>2)</strong> It seems like it's hitting my routes ok as you can see above.  I just wonder if it's how I'm forming my $.ajax() call in terms of the callback and maybe related to, my controller method is not fully correct?  I'm returning json from my action but it's ok to have how I have it I assume.  I don't know, unless I can try something different in my action method that's returning the json.  I don't know if my $.ajax call needs to specify the return type expected in the callback now that I just thought about it as I am typing this but I'll check that also.</p>\n\n<p>for example when I setup the $.ajax call like this (see below), I'm getting a response back so I think that tells me IIS is able to send a response after it hit my route and controller ok.  So I'm thinking it's my action method that's not returning a correct json object, not really sure but at this point, if the route debugger from Phil Haack shows it's definitely hitting my routes, then it can't be that...the ajax call IS hitting my route.  </p>\n\n<pre><code>   $.ajax({\n        url: 'OurApp/Search/Member/26049',\n        type: \"GET\",\n        dataType: \"json\",\n        success: function (response) \n        {\n            alert('we got a mother fing response!');\n            grid = new Slick.Grid(\"#memberSearchResults-Grid\", response.data, columns, options);\n        },\n        error: function (e) { alert('response error: '); }\n    });\n</code></pre>\n\n<p>so I get the alert for the error case above, it's hitting this.  I don't know if I will always get a response...probably I assume IIS would respond in a failed request AND successful route request...?</p>\n\n<p>I tried to attach to the worker process and then refresh the page after setting a debug point on the first line of that action method that's returning json in my controller but that line is never hit.  I don't know why.  I can't get any debug points hit, not </p>\n\n<p>Here's the request header from firebug just for additional info:</p>\n\n<pre><code>GET http://localhost/OurApp/Search/Member/26049 HTTP/1.1\nHost: localhost\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nProxy-Connection: keep-alive\n</code></pre>\n\n<p>Here's some of the resopnse and what's interesting is even though it shows my route is being hit on my controller, this error says no, it isn't hitting your controller so I'm so dumbfounded at this point on wtf is going on and where:</p>\n\n<p>HeadersResponseCacheHTML</p>\n\n<p>\n    \n        The resource cannot be found.\n        \n         body {font-family:\"Verdana\";font-weight:normal;font-size: .7em;color:black;} \n         p {font-family:\"Verdana\";font-weight:normal;color:black;margin-top: -5px}\n         b {font-family:\"Verdana\";font-weight:bold;color:black;margin-top: -5px}\n         H1 { font-family:\"Verdana\";font-weight:normal;font-size:18pt;color:red }\n         H2 { font-family:\"Verdana\";font-weight:normal;font-size:14pt;color:maroon }\n         pre {font-family:\"Lucida Console\";font-size: .9em}\n         .marker {font-weight: bold; color: black;text-decoration: none;}\n         .version {color: gray;}\n         .error {margin-bottom: 10px;}\n         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }\n        \n    </p>\n\n<pre><code>&lt;body bgcolor=\"white\"&gt;\n\n        &lt;span&gt;&lt;H1&gt;Server Error in '/OurApp' Application.&lt;hr width=100% size=1 color=silver&gt;&lt;/H1&gt;\n\n        &lt;h2&gt; &lt;i&gt;The resource cannot be found.&lt;/i&gt; &lt;/h2&gt;&lt;/span&gt;\n\n        &lt;font face=\"Arial, Helvetica, Geneva, SunSans-Regular, sans-serif \"&gt;\n\n        &lt;b&gt; Description: &lt;/b&gt;HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable. &amp;nbsp;Please review the following URL and make sure that it is spelled correctly.\n        &lt;br&gt;&lt;br&gt;\n\n        &lt;b&gt; Requested URL: &lt;/b&gt;/OurApp/Search/Member/26049&lt;br&gt;&lt;br&gt;\n\n        &lt;hr width=100% size=1 color=silver&gt;\n\n        &lt;b&gt;Version Information:&lt;/b&gt;&amp;nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272\n\n        &lt;/font&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>and related mvc route debugger result for this request:</p>\n\n<p><img src=\"http://i.stack.imgur.com/bBItP.jpg\" alt=\"enter image description here\"></p>\n\n<p>what gets me is that it shows \"The controller for path &#39;/OurApp/Search/Member/26049; was not found or does not implement IController.\"  But if the route debug is saying it is being hit, wtf?  I'm so lost.  Also again I can't debug it so that tells me it ISN'T hitting my controller or controller action.</p>\n"},{"tags":["asp.net","asp.net-mvc","namespaces","global-asax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13123142,"title":"Controller MVC3 link to Folder/Controller/View","body":"<p>I currently got a problem with the namespaces I added this into my global.asax:</p>\n\n<pre><code>routes.MapRoute(\n \"Admin\",\n \"Admin/{controller}/{action}/{id}\",\n new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, \n        null, new string[] {\"project.Controllers.Admin\"}\n);\n</code></pre>\n\n<p>Now my controller is being reached when I type into the url localhost/Admin/Controller/<strong>*</strong>\nPut my controller isn't giving me the right Views. It's giving me the View in Controller/Views. And I want the Views located in Admin/Controller/Views. I tried linking to them directly but thats not going to well. Any idea how this is done?</p>\n"},{"tags":["asp.net-mvc","html.dropdownlistfor","html.dropdownlist"],"answer_count":3,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":11008,"score":18,"question_id":506001,"title":"ASP.NET MVC dropdown with a default empty option","body":"<p>Is there a way to include a default empty option (or with text) if there is no selected value for a dropdownlist?</p>\n"},{"tags":["asp.net-mvc","html5","section"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13123182,"title":"Editable section tag and posting its value?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6247702/using-html5-how-do-i-use-contenteditable-fields-in-a-form-submission\">Using HTML5, how do I use contenteditable fields in a form submission?</a>  </p>\n</blockquote>\n\n\n\n<p>We've been using a section tag in HTML 5 to capture rich input from the user.  This is inside a .NET MVC application.  </p>\n\n<pre><code>@using(Html.BeginForm()){     \n     &lt;section  id=\"Part2\" name=\"Part2\" contenteditable=\"true\" class=\"selected track\" &gt;\n     &lt;/section&gt;                  \n     &lt;span id=\"Part2-input-error\" class=\"error-message hide\"&gt;&lt;/span&gt;\n }\n</code></pre>\n\n<p>When posting the value of the form, there is no values posted for the section text.  Using just this form, no values are present in the Request key collection.  Is it possible to post the values of the editable section back to the server?</p>\n"},{"tags":["asp.net-mvc","json","mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13121149,"title":"How to return exception data in json format from App_Error in global.asax?","body":"<p>I'm working on Asp.net MVC project as a single page application for error handling I want to return json data from App_Error method in global.asax to UI and show it by jQuery or call a controller and return partialView.\nI don't want to refresh the page or redirect it to Error page.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2"],"answer_count":17,"favorite_count":26,"up_vote_count":63,"down_vote_count":0,"view_count":55956,"score":63,"question_id":1625327,"title":"EditorFor() and html properties","body":"<p>Asp.Net MVC 2.0 preview builds provide helpers like </p>\n\n<pre><code>Html.EditorFor(c =&gt; c.propertyname)\n</code></pre>\n\n<p>If the property name is string, the above code renders a texbox.</p>\n\n<p>What if I want to pass in MaxLength and Size properties to the text box or my own css class property?</p>\n\n<p>Do I need to create one template for each size and length combinations in my application? If so, that doesn't make the default templates that usable.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13121560,"title":"Should i build Controllers for all Categories in a News Site?","body":"<p>i'm new to asp.net mvc i'm tryin to build a news site with asp.net mvc3; that's something like <a href=\"http://african.howzit.msn.com/\" rel=\"nofollow\">http://african.howzit.msn.com/</a> my question is for all the categories (Home, News, Business, Entertainment, Career) should i just go ahead and build controllers for them all and bring them together in a starting page or do i need to come up with a way to categorize these categories from just one controller; I guess i need to get the architecture right. Thanks in advance!!</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","url-rewriting","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13122078,"title":".NET MVC3 Routing URL Rewriting","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/25259/how-does-stackoverflow-generate-its-seo-friendly-urls\">How does StackOverflow generate its SEO-friendly URLs?</a>  </p>\n</blockquote>\n\n\n\n<p>I have an MVC3 site for which I would like to clean up the urls that contain spaces in the names of the products.</p>\n\n<p>Currently, the url displays as: <code>/products/some%20ugly%20url</code></p>\n\n<p>I would like to display: <code>/products/some-clean-url</code></p>\n\n<p>Is it possible with MVC3 routing to rewrite the ugly url to the clean one?</p>\n"},{"tags":["jquery","asp.net-mvc","unobtrusive-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13122097,"title":"How to setup an unobstrusive validation group?","body":"<p>I've created a MVC 4, validation attribute that will compare 2 fields, that represent a year range, to validate that the end year is not before the start year.</p>\n\n<p>I've created the following JS:</p>\n\n<pre><code>jQuery.validator.unobtrusive.adapters.add(\n        'yearrange', ['startyear', 'endyear'], function (options) {\n            options.rules['yearrange'] = options.params;\n            options.messages['yearrange'] = options.message;        \n        }\n    );\n\njQuery.validator.addMethod(\n            'yearrange', function (value, element, params) {\n\n                var startYearElementName = params.startyear;\n                var endYearElementName = params.endyear;\n\n                var startYear = $('#' + startYearElementName).val();\n                var endYear = $('#' + endYearElementName).val();\n\n                if (startYear == '' || endYear == '') {\n                    return true;\n                }\n\n                return (+startYear &lt;= +endYear);\n\n            }, '');\n</code></pre>\n\n<p>I'm applying the validation attribute to both properties in my ViewModel:</p>\n\n<pre><code>[YearRange(\"StartYear\", \"EndYear\", \"yearRangeInvalid\")]\npublic int StartYear { get; set; }\n\n[YearRange(\"StartYear\", \"EndYear\", \"yearRangeInvalid\")]\npublic int EndYear { get; set; }\n</code></pre>\n\n<p>I don't want to use a summary validation message.</p>\n\n<p>Can I use validation groups to trigger the re-validation of both fields when one is changed?</p>\n\n<p>And can it be configured in the adapters.add callback above?</p>\n\n<p>I unsuccessfully tried something like:</p>\n\n<pre><code>jQuery.validator.unobtrusive.adapters.add(\n        'yearrange', ['startyear', 'endyear'], function (options) {\n            options.rules['yearrange'] = options.params;\n            options.messages['yearrange'] = options.message;\n\n            jQuery.validator.groups[options.params.startyear] = \"yearrange\";\n            jQuery.validator.groups[options.params.endyear] = \"yearrange\";\n\n        }\n    );\n</code></pre>\n"},{"tags":["c#","javascript","asp.net-mvc","google-docs-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13121941,"title":"GoogleDocs Viewer double page PDF","body":"<p>Basically im creating a website for a friend who is publishing a montly free magazine. \nHe is NOT tech savy in the slightest so i am trying to make publishing it online as simple as possible!</p>\n\n<p>Im making the site in C# MVC 4 and im using the Google Docs api to get a list of PDFs from his google docs account then displaying it online using an iframe e.g.:</p>\n\n<pre><code>&lt;iframe src=https://docs.google.com/file/filename/preview width=\"100%\" height=\"100%\" frameBorder=\"0\" marginheight=\"0\" marginwidth=\"0\" scrolling=\"no\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>However he has some double page ads in the magazine so it would be better if i could display the PDF as double paged also. e.g:\n<a href=\"http://www.mitsubishi-motors.nl/digital/1043/index/book/outlanderbrochure.aspx\" rel=\"nofollow\">http://www.mitsubishi-motors.nl/digital/1043/index/book/outlanderbrochure.aspx</a>\n(without being flash / all the extra stuff)</p>\n\n<p>Does anyone know of a viewer that can interact with google docs and have this functionally?</p>\n\n<p>Thanks,\nBen</p>\n"},{"tags":["c#","javascript","asp.net-mvc","devexpress","onload"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":117,"score":1,"question_id":12653237,"title":"DevExpress MVC controls generating 2mb of javascript per page load","body":"<p>We've started using the DevExpress MVC controls, which requires this code added in our Site.Master:</p>\n\n<pre><code>&lt;% Html.DevExpress().RenderScripts(Page,\n       new Script { ExtensionSuite = ExtensionSuite.GridView },\n       new Script { ExtensionSuite = ExtensionSuite.HtmlEditor },\n       new Script { ExtensionSuite = ExtensionSuite.Editors },\n       new Script { ExtensionSuite = ExtensionSuite.NavigationAndLayout },\n       new Script { ExtensionSuite = ExtensionSuite.Chart },\n       new Script { ExtensionSuite = ExtensionSuite.Report }\n ); %&gt;\n</code></pre>\n\n<p>But this renders a massive 2mb javascript file through a handler called DXR.axd. When using Firefox this javascript is too large and increases the page's onload time from ~500 ms to ~5,000 ms (I timed it before and after).  </p>\n\n<p>Using Chrome it loads in ~750ms</p>\n\n<p>This is a severe performance hit and causes a very noticeable pause when the page is rendering.  Firefox reports that the DOMContentLoaded event takes 5 seconds to fire (because it takes so long to load and parse that 2mb of javascript)</p>\n\n<p>What can I do to fix this problem?</p>\n\n<p>I note that their own site <a href=\"http://mvc.devexpress.com\" rel=\"nofollow\">http://mvc.devexpress.com</a> has the exact same problem: if you view source and look for \"DXR.axd\" then download that file it is even bigger, at 2.6mb, and they also have a very slow onload in Firefox</p>\n"},{"tags":["asp.net-mvc","localization","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1768,"score":5,"question_id":5090751,"title":"Changing the default ModelState error messages in ASP MVC3","body":"<p>I have my resource files in separate assembly MyApp.Resources.dll. I can use the resources without any problem but the issue appears when I want to change (localize) the default validation messages:</p>\n\n<p><em>\"The {0} field is required.\"</em> and <em>\"The value '{0}' is not valid for {1}.\"</em></p>\n\n<p>The <a href=\"http://forums.asp.net/p/1512140/3608427.aspx\">solution</a> <code>DefaultModelBinder.ResourceClassKey = \"MyApp.Resources.Global\";</code> does not work because it requires the ResourceClassKey to be under App_GlobalResources folder in the web project. </p>\n\n<p>What should be the fix for me ?</p>\n\n<p>Regards</p>\n"},{"tags":["jquery",".net","asp.net-mvc","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13120862,"title":"ASP.net Dynamically add a table join and hook up existing table from user selection","body":"<p>I have a table that joins two together: table B contains key data that links table C to table A and retains the ability to have table C linked to any future table.</p>\n\n<p>I know how to create and add new entries of C based on user input and create table B from user input. However, to link table B to A and C, it requires input of the key data of A and C, then C 'exists in A'. From the users perspective, they want a clean interface, so they don't want to have to manually enter the key id of A and C when B is created.</p>\n\n<p>Instead, what I want is that the creation of the join table B is hidden and it appears they are just selecting C. So from a drop down list or multi box, they select their item, a new entry in B is added to the list&lt;> and the key data from A and C is assigned. </p>\n\n<p>With the inter-mixing of views and controllers, I am finding it very difficult getting this concept working and assigning to correct information.</p>\n\n<p>I have been following tutorials such as: <a href=\"http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/adding-a-new-category-to-the-dropdownlist-using-jquery-ui\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/adding-a-new-category-to-the-dropdownlist-using-jquery-ui</a></p>\n\n<p>However this is very static.</p>\n\n<p>I will happily post my code, but it is pretty standard, Recipe is A, RecipeIngredient is B and Ingredient is C.</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","dependency-injection","structuremap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13119662,"title":"Structure Map violates the constraint of type parameter 'CONCRETETYPE'","body":"<p>I have a web application developed in ASP.NET 2010. I have used the Dependency Injection with StructureMap in ASP.NET MVC.  I'm trying to get started with Structure Map. I'm using </p>\n\n<p>I've built a simple boot strapper, but when I run the website I get the following error:</p>\n\n<blockquote>\n  <p>StructureMap.Configuration.DSL.Expressions.CreatePluginFamilyExpression`1[System.Web.Mvc.IActionInvoker].Use:\n  type argument\n  'TestWebsite.Web.Controllers.Factories.InjectingActionInvoker'\n  violates the constraint of type parameter 'CONCRETETYPE'.</p>\n</blockquote>\n\n<p><strong>Code Block:</strong></p>\n\n<pre><code> public static void ConfigureStructureMap()\n    {\n        ObjectFactory.Initialize(x =&gt;\n        {\n            //registry per assembly recommended\n            x.AddRegistry&lt;WebRegistry&gt;();\n            x.AddRegistry&lt;ServiceRegistry&gt;();\n            x.AddRegistry&lt;SHARE.Data.DataRegistry&gt;();\n        });\n\n        //if a class needs configuring on load then this is done here. Inherit from IStartUpTask\n        ObjectFactory.GetAllInstances&lt;IStartUpTask&gt;()\n            .Where(x =&gt; x.IsEnabled).ToList()\n            .ForEach(t =&gt; t.Configure());\n\n        //This checks all is well.  Not ideal to do in application_start though cause of calls to request object....\n        //ObjectFactory.AssertConfigurationIsValid();\n    }\n\n\n  public class WebRegistry : Registry\n    {\n        public WebRegistry()\n        {\n         For&lt;IFormsAuthentication&gt;    ().Use&lt;FormsAuthenticationService&gt;();\n         For&lt;IAuthentication&gt;().Use&lt;BasicMembership&gt;();\n                     Scan(x =&gt;\n            {\n                x.AssemblyContainingType&lt;IStartUpTask&gt;();\n                x.AddAllTypesOf&lt;IStartUpTask&gt;();\n                x.WithDefaultConventions();\n            });\n\n            For&lt;IActionInvoker&gt;().Use&lt;InjectingActionInvoker&gt;();\n            SetAllProperties(c =&gt;\n            {\n                c.OfType&lt;IActionInvoker&gt;();\n                c.WithAnyTypeFromNamespaceContainingType&lt;UserService&gt;(); //our services\n                c.WithAnyTypeFromNamespaceContainingType&lt;AdminCookies&gt;(); //cookie services\n            });\n\n        }\n</code></pre>\n\n<p>Could anyone please suggest on this issue. how it could be resolved? I am really getting troubled with it and need to resolve it asap. Any help would be greatly appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Deepak</p>\n"},{"tags":["asp.net-mvc","datagrid","databinder"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13120548,"title":"Accessing the ItemStyle of the current row of ASP.NET Datagrid","body":"<p>I have a datagrid with an ItemStyle and AlternatingItemStyle (similar to simplified example below) and would like to know the CssClass of the row being rendered from inside of the databinder code.  As a dummy example suppose I want the datagrid to simply output the name of the CssClass of each alternating row</p>\n\n<pre><code>&lt;asp:DataGrid ID=\"dgSearchResults\" runat=\"server\" ...&gt;\n     &lt;ItemStyle CssClass=\"UCDataGridItem\" /&gt;\n     &lt;AlternatingItemStyle CssClass=\"UCDataGridAltItem\" /&gt;\n     &lt;asp:TemplateColumn HeaderText=\"CssClass\"&gt;\n          &lt;ItemTemplate&gt;\n              &lt;%#DataBinder.Eval(--some expression that evaluates to UCDataGridItem or UCDataGridAltItem--)%&gt;'&gt;              \n          &lt;/ItemTemplate&gt;\n     &lt;/asp:TemplateColumn&gt;\n&lt;/asp:DataGrid&gt;\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","numberformat"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":13086494,"title":"asp.net mvc set number format default decimal thousands separators","body":"<p>How can I set both default decimal and thousands separator for formatting number in asp.net mvc regardless of culture?</p>\n\n<p>Regards</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13120305,"title":"How to show ModelState.AddModelError when the Model is Empty in MVC4","body":"<p>I am displaying a shopping cart. I need to check for empty values in Shopping cart and display a message like \"The Shopping Cart is empty\".<br/></p>\n\n<p>When I use ModelState.AddModelError in myAction, it throws an exception as there is null reference in Model. How to display the ErrorMessage.<br/>\nMy Action <br/></p>\n\n<pre><code>  public ActionResult Index()\n        {\n            string id = Request.QueryString[\"UserID\"];\n            IList&lt;CartModel&gt; objshop = new List&lt;CartModel&gt;();\n            objshop = GetCartDetails(id);\n            if (objshop.Count &gt; 0)\n            {\n                return View(objshop.ToList());\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"Your Shopping Cart is empty!\");\n            }\n            return View();\n}\n</code></pre>\n\n<p>My View<br/></p>\n\n<pre><code>    @{\n         @Html.ValidationSummary(true)\n     }\n\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.ProductName) &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Quantity)   &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Rate)      &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Price)    &lt;/th&gt;        \n @foreach (var item in Model)\n   {\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.ProductName)&lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Quantity)&lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Rate) &lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Price) &lt;/td&gt;\n   }\n</code></pre>\n\n<p>Any suggestions.</p>\n"},{"tags":["asp.net-mvc","jquery-ajax","unobtrusive-javascript"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13120277,"title":"ASP.NET MVC unobtrusive validation custom submit","body":"<p>What trying to do is to validate fields inside a jQuery dialog.\nThe fields are not included inside a form, I'm using a save button that does an ajax call to a Web Service.\nFor validation, I'm using ASP.NET MVC unobtrusive jQuery validation \"@Html.ValidateMessageFor\"\nand the errors get's shown if I write something inside the field loose focus and then get focus again and erase the content.\nServer side I have no problem since ModelState.IsValid is doing all the work however on the client side, I need a more dynamic behavior for instance if the client clicked on save, as a result, and  in addition to the 400 Bad Request response, I need the missing fields to be highlighted visually similar to the lost focus event.\nBelow is the jQuery Call:</p>\n\n<pre><code> $('#clientDataAddDialog').dialog(\n{\n    autoOpen: false,\n    width: 500,\n    buttons: {\n        'Save': {\n            text: 'Save', click: function (e) {\n\n                var name = $('.nameField').val();\n                var type = $('.typeField').val();\n                var region =  $('.regionField').val();\n                var area =  $('.areaField').val();\n                var telephone =  $('.telephoneField').val();\n                var mobile = $('.mobileField').val();\n                var latField = $('.latField').val();\n                var lngField = $('.lngField').val();\n\n                var data = { Name : name, Type : type, Region: region, Area : area, Telephone : telephone, Latitude : latField, Longitude : lngField };\n                var json = JSON.stringify(data);\n\n                $.ajax({\n                    type: \"POST\",\n                    url: \"http://localhost:53378/api/ClientWebAPI/\",\n                    data: json,\n                    contentType: \"application/json\",\n                    dataType: \"json\",\n                    statusCode: {\n                        201 /*Created\"*/: function (data) {\n                            $(\"#clientDataAddDialog\").dialog(\"close\");\n                        },\n                        500: function (data) {\n                            alert('err');\n                        }\n                    },\n                    beforeSend: setHeader\n                });\n            }\n        }\n    }\n});\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","wcf","rest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":439,"score":0,"question_id":9112531,"title":"Custom MVC AuthorizeAttribute for WCF Web API Preview 6","body":"<p>I tried to implement my own AuthorizeAttribute for my REST API that I've built with the WCF Web API Preview 6. </p>\n\n<p>Unfortunately only the constructor gets called, but non of the methods. Am I missing something with the registration?</p>\n\n<pre><code>[BasicHttpAuthorize]\n[WebGet(UriTemplate = \"\")]\npublic IEnumerable&lt;Supertext.API.Order&gt; Get()\n{\n</code></pre>\n\n<p>And this is my super simplified code.</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic class BasicHttpAuthorizeAttribute: AuthorizeAttribute\n{\n    public BasicHttpAuthorizeAttribute()\n    {\n    }\n\n    protected override bool AuthorizeCore(HttpContextBase httpContext)\n    {\n        return true;\n    }\n\n\n    public override void OnAuthorization(AuthorizationContext filterContext)\n    {\n        //do the authorization\n    }\n}\n</code></pre>\n\n<p>But as I said, neither the AuthorizeCore nor the OnAuthorization method is ever called.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","jquery-validate","datepicker","unobtrusive-validation"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3945,"score":2,"question_id":8059093,"title":"MVC3 Unobtrusive Date Validation on a custom formatted date","body":"<p>I have a date field (i'm using the jquery ui datepicker) in a form that I've formatted, like so:</p>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>[DisplayFormat(DataFormatString = \"{0:dd-MMM-yyyy}\", ApplyFormatInEditMode = true)]\npublic DateTime FooDate { get; set; }\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>@Html.EditorFor(m =&gt; m.FooDate)\n</code></pre>\n\n<p>This correctly shows the date the way I want it to, e.g. <code>09-Nov-2011</code></p>\n\n<p>The problem I'm getting, occurs when I press submit. It keeps telling me the date is not valid.... It IS valid, you stupid thing!</p>\n\n<p>Is there any way, i can get jquery/unobtrusive javascript to ignore this field or allow this format to pass? So far, the only way I can get the form to work, is if i don't format the date, or use {0:d} as a date format for it.</p>\n\n<p><strong>Edit</strong>:\nI've created a totally separate layout+view+controller+model for testing this stupid thing. Still doesn't work in IE/Safari.\nI have the latest jquery.validate/unobtrusive files from nuget. </p>\n\n<p>My <code>layout</code> is empty. It just loads the following files:</p>\n\n<pre><code>\"jquery-1.7.min.js\"\n\"jquery-ui-1.8.16.min.js\"\n\"jquery.validate.min.js\"\n\"jquery.validate.unobtrusive.min.js\"\n</code></pre>\n\n<p>My TestViewModel is simple:</p>\n\n<pre><code>public class TestViewModel\n{\n    [Display(Name = \"Test Date:\")]\n    [DisplayFormat(DataFormatString = \"{0:dd/MMM/yyyy}\", ApplyFormatInEditMode = true)]\n    public DateTime? TestDate { get; set; }\n}\n</code></pre>\n\n<p>My TestController goes as follows:</p>\n\n<pre><code>public class TestController : Controller\n{\n    public ActionResult Index()\n    {\n        var m = new TestViewModel();\n        m.TestDate = DateTime.Now;\n        return View(m);\n    }\n}\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    ViewContext.FormContext.ValidationSummaryId = \"valSumId\";\n    @Html.ValidationSummary(false, \"The following errors were found:\");\n    @Html.AntiForgeryToken()\n\n    @Html.LabelFor(m =&gt; m.TestDate)\n    &lt;input type=\"date\" id=\"TestDate\" value=\"@Model.TestDate.Value.ToString(\"dd/MMM/yyyy\")\" /&gt;\n    &lt;input type=\"submit\" /&gt;\n}\n</code></pre>\n\n<p>No worky.</p>\n\n<p>You know what the annoying thing is? If i change <code>TestDate</code> to a string, it still fails.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1947,"score":0,"question_id":6187284,"title":"Html.BeginForm in MVC3 is rendering too much","body":"<p>I have the following code. Note that I am not using a using as I want to begin and end the form in two different areas of my code. Has anyone seen this action where the helper adds \"System.Web.Mvc.Html.MvcForm\". I cannot see why this is added.</p>\n\n<pre><code>Code:\n @Html.BeginForm(new { action = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue })\n\n@{ Html.EndForm() }\n\nResult:\n&lt;form action=\"/adminTests/Edit\" method=\"post\"&gt;System.Web.Mvc.Html.MvcForm\n</code></pre>\n\n<p>When I use the following I don't get the \"System.Web.Mvc.Html.MvcForm\" </p>\n\n<pre><code>    @using (Html.BeginForm(new { action = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue }))\n    {\n\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","razor","html.actionlink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13119424,"title":"Pass the model value as parameter in html.actionlink Jquery method","body":"<p>I am generating dynamic links using below code in mvc razor views.</p>\n\n<pre><code>@foreach (App.Models.Users item in Model )\n{\n@Html.ActionLink(\"Delete\", \"DeleteEmp\", new { id = item.Id }, new { onclick = \"DeleteConfirm()\" })\n}\n</code></pre>\n\n<p>i want to pass the id or some other filed of model(item.Name) currently clicked link to Jquery method.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","authentication","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13119184,"title":"MVC3 musicstore tutorial: can't login with administrator account","body":"<p>I am currently following the MVC Musicstore tutorial from <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7</a> and got stuck on the part with the Authorization.</p>\n\n<p>To get the basics covered: I am using VS Web Developer 2012 and created a mvc4 application. \nThe \"DefaultConnection\" got replaced by \"MusicStoreConnection\". To reflect this in the code in InitializeSimpleMembershipAttribute.cs I changed a lin to:</p>\n\n<pre><code>WebSecurity.InitializeDatabaseConnection(\"MusicStoreConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n</code></pre>\n\n<p>Now, if a run the application I can create a user and log in with the credentials. However: if a run the asp.net configuration and create a user there, assign him to the administrator role and try to login it fails.</p>\n\n<p>What do I have to do in order to get the asp.net conf created user work in my application, so I can follow the tutorial?</p>\n\n<p>Kind regards</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":581,"score":0,"question_id":12457642,"title":"asp.net mvc 4 simplemembership with external database","body":"<p>I am using inbuilt asp.net mvc 4 WebSecurity simple membership. I have manually generated create table scripts from the app_data folder aspnet.mdf file to an external database that is hosted at SpeedHost server and got the below connectionstring and it is perfectly working fine when I developed application from my machine.</p>\n\n<pre><code>&lt;add name=\"SAMS\" connectionString=\"Data Source=IP;Initial Catalog=DATABASE;Persist Security Info=True;User ID=USERID;Password=PASSWORD;MultipleActiveResultSets=True;Application Name=EntityFramework\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>But when I deployed my application at SpeedHost and clicked on Login link button, then instead redirecting to Login page, it is throwing the following exception:</p>\n\n<p>Please help me to come out of this problem.</p>\n\n<pre><code>    Server Error in '/' Application.\n    A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\n    Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\n\n    Source Error:\n\n    An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\n    Stack Trace:\n\n\n    [SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]\n   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5064474\n   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234\n   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341\n   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129\n   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270\n   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195\n   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232\n   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185\n   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33\n   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524\n   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66\n   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479\n   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108\n   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126\n   System.Data.SqlClient.SqlConnection.Open() +125\n   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +85\n   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +349\n   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +265\n   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +34\n\n[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]\n   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +163\n   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +40\n\n[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.]\n   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +163\n   System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest&amp; providerManifest) +39\n   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +46\n   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +62\n   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +117\n   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +453\n   System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +16\n   System.Data.Entity.Database.Exists() +42\n   SAMS.UI.New.Filters.SimpleMembershipInitializer..ctor() +110\n\n[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]\n   SAMS.UI.New.Filters.SimpleMembershipInitializer..ctor() +259\n\n[TargetInvocationException: Exception has been thrown by the target of an invocation.]\n   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached, RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0\n   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98\n   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241\n   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69\n   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +81\n   System.Threading.LazyInitializer.EnsureInitializedCore(T&amp; target, Boolean&amp; initialized, Object&amp; syncLock, Func`1 valueFactory) +113\n   System.Threading.LazyInitializer.EnsureInitialized(T&amp; target, Boolean&amp; initialized, Object&amp; syncLock) +127\n   SAMS.UI.New.Filters.InitializeSimpleMembershipAttribute.OnActionExecuting(ActionExecutingContext filterContext) +28\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +74\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass3b.&lt;BeginInvokeActionMethodWithFilters&gt;b__35() +20\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +511\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass3b.&lt;BeginInvokeActionMethodWithFilters&gt;b__35() +20\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass37.&lt;BeginInvokeActionMethodWithFilters&gt;b__31(AsyncCallback asyncCallback, Object asyncState) +190\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +159\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state) +182\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass25.&lt;BeginInvokeAction&gt;b__1e(AsyncCallback asyncCallback, Object asyncState) +478\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +287\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1d.&lt;BeginExecuteCore&gt;b__17(AsyncCallback asyncCallback, Object asyncState) +30\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +343\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +282\n   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15\n   System.Web.Mvc.&lt;&gt;c__DisplayClass8.&lt;BeginProcessRequest&gt;b__2(AsyncCallback asyncCallback, Object asyncState) +76\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +236\n   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8963444\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n\n\nVersion Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.237 \n</code></pre>\n"},{"tags":["asp.net-mvc","razor","asp.net-webforms"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":7991,"score":1,"question_id":5206528,"title":"Default radiobuttonlist in ASP.NET MVC Razor","body":"<p>How do I ensure that a radio button list has the first option selected?  If it is based on the model property, how is this set if this is the first page that is shown on application start-up?</p>\n\n<p>This is easy peasy in webforms but I don't know how to do this in MVC and there doesn't seem to be anywhere on the NET which shows how this is done.</p>\n\n<p>This doesn't seem to work:</p>\n\n<pre><code>@Html.RadioButtonFor(m =&gt; m.SearchType, true) Location\n@Html.RadioButtonFor(m =&gt; m.SearchType, false) Name\n</code></pre>\n\n<p>I Just get both radio buttons unselected??</p>\n"},{"tags":["asp.net-mvc","validation","modelstate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13118410,"title":"MVC ModelState erroneously reports errors","body":"<p>I am receiving a model from a view.<br>\nSome of the values are automatically filled in.</p>\n\n<p>However, some of the required values need to be added manually, like so:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Foobar(FooModel model, FormCollection collection)\n{\n    // \"timePicker\" is a dropdown list containing different times\n    var time = collection[\"timePicker\"].Split(':');\n    model.Hours = int.Parse(time[0]);\n    model.Minutes = int.Parse(time[1]);\n\n    if (ModelState.IsValid)\n    {\n        ... // Do stuff\n    }\n}\n</code></pre>\n\n<p>So here's the problem:</p>\n\n<p><strong><code>ModelState.IsValid</code> is false.</strong><br>\nI debugged it, and it claims that <code>model.Minutes</code> and <code>model.Hours</code> are not assigned to.<br>\n...Which isn't true, because I had <em>just assigned</em> them values!</p>\n\n<p>I considered using <code>ModelState.Clear()</code>, but I don't want to need to manually check whether all the rest of the information is valid.</p>\n\n<p>Is there any other way to resolve the issue?</p>\n"},{"tags":["c#","asp.net-mvc","linq","nhibernate","linq-to-nhibernate"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2468,"score":2,"question_id":2007038,"title":"LINQ-NHibernate - Selecting only a few fields (including a Collection) for a complex object","body":"<p>I'm using Fluent NHibernate in one of my projects (and ASP.NET MVC application), with LINQ to query to data (using the LINQ to NHibernate libraries).</p>\n\n<p>The objet names are changed to protect the innocent.</p>\n\n<p>Let's say I have the following classes Foo, Bar, Baz, and their appropriate tables in the database (MySQL).</p>\n\n<p>Foo has a many-to-many relationship with both Bar (table \"FooBar\") and Baz (table \"FooBaz\"), defined in the Fluent mappings. As such, the class interface is defined as follows:</p>\n\n<pre><code>public class Foo {\n    public virtual int id { get; set; }\n    public virtual string name { get; set; }\n    public virtual string email { get; set; }\n    public virtual IList&lt;Bar&gt; bars { get; set; }\n    public virtual IList&lt;Baz&gt; bazes { get; set; }\n}\n</code></pre>\n\n<p>This is a pretty standard class. We can see that a Foo object will have a list of bars and bazes.</p>\n\n<p>The problem comes when trying to do a LINQ query.</p>\n\n<p>If I do a simple query like this, it works fine (the where clause is unimportant) :</p>\n\n<pre><code>var foos = from foo in session.Linq&lt;Foo&gt;()\n           where email.equals(\"foo@bar.com\")\n           select foo;\n\nIList&lt;Foo&gt; listFoos = foos.ToList();\n</code></pre>\n\n<p>This will return a list of Foos, with all the fields populated (id, name, email, bars, bazes). log4net shows that NHibernate performs separate queries for the collections.</p>\n\n<p>The problem arises when I want to load only some fields. For example, I might want to load only the bars in the query, but not the bazes.</p>\n\n<p>This query compiles, but produces an error at runtime:</p>\n\n<pre><code>var foos = from foo in session.Linq&lt;Foo&gt;()\n           where email.equals(\"foo@bar.com\")\n           select new Foo() \n           {\n               id = foo.id,\n               name = foo.name,\n               email = foo.email,\n               bars = foo.bars\n           };\n\nIList&lt;Foo&gt; listFoos = foos.ToList();\n</code></pre>\n\n<p>The error I get is something along the lines of an array index out of bounds exception. The stack trace shows some methods names relating the collection handling on LINQ-NHibernate's side, but nothing else. The query reported by log4net shows no sign of a query on bars, which means than an error was caught before it had the time to perform the query to select the bars.</p>\n\n<p>Did anyone else had this kind of problem before? How did you solve it? I don't want to have to select all the objects everytime I open a web page in my application!</p>\n\n<p>Thank you!</p>\n\n<p><strong>Edit: here is the stacktrace, as requested.</strong></p>\n\n<pre><code>System.IndexOutOfRangeException: L'index se trouve en dehors des limites du tableau. (read: \"Index is out of bounds for the array.\")\n\n[IndexOutOfRangeException: L'index se trouve en dehors des limites du tableau.]\n   NHibernate.Transform.TypeSafeConstructorMemberInitResultTransformer.InvokeMemberInitExpression(MemberInitExpression expression, Object[] args, Int32&amp; argumentCount) +404\n   NHibernate.Transform.TypeSafeConstructorMemberInitResultTransformer.TransformTuple(Object[] tuple, String[] aliases) +150\n\n[QueryException: could not instantiate: Foo]\n   NHibernate.Transform.TypeSafeConstructorMemberInitResultTransformer.TransformTuple(Object[] tuple, String[] aliases) +265\n   NHibernate.Loader.Criteria.CriteriaLoader.GetResultColumnOrRow(Object[] row, IResultTransformer resultTransformer, IDataReader rs, ISessionImplementor session) +171\n   NHibernate.Loader.Loader.GetRowFromResultSet(IDataReader resultSet, ISessionImplementor session, QueryParameters queryParameters, LockMode[] lockModeArray, EntityKey optionalObjectKey, IList hydratedObjects, EntityKey[] keys, Boolean returnProxies) +330\n   NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +704\n   NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +70\n   NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) +111\n   NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters) +18\n   NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) +79\n   NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results) +407\n   NHibernate.Impl.CriteriaImpl.List(IList results) +41\n   NHibernate.Impl.CriteriaImpl.List() +35\n   NHibernate.Linq.&lt;GetEnumerator&gt;d__0.MoveNext() +71\n   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +7665172\n   System.Linq.Enumerable.ToList(IEnumerable`1 source) +61\n   FooRepository.List(Int32 count) in C:\\...\\FooRepository.cs:38\n   FooController.List() in C:\\...\\FooController.cs:30\n   lambda_method(ExecutionScope , ControllerBase , Object[] ) +39\n   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +178\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +24\n   System.Web.Mvc.&lt;&gt;c__DisplayClassa.&lt;InvokeActionMethodWithFilters&gt;b__7() +52\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +254\n   System.Web.Mvc.&lt;&gt;c__DisplayClassc.&lt;InvokeActionMethodWithFilters&gt;b__9() +19\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +192\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +399\n   System.Web.Mvc.Controller.ExecuteCore() +126\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +27\n   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +7\n   System.Web.Mvc.MvcHandler.ProcessRequest(HttpContextBase httpContext) +151\n   System.Web.Mvc.MvcHandler.ProcessRequest(HttpContext httpContext) +57\n   System.Web.Mvc.MvcHandler.System.Web.IHttpHandler.ProcessRequest(HttpContext httpContext) +7\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +181\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +75\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-membership","openid","openauth"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13117809,"title":"OpenID ANd OpenAuth SQL Membership Database Implementation for ASP.NET MVC4","body":"<p>I try to use OpenId in ASP.NET MVC4, SO I use <a href=\"http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx\" rel=\"nofollow\">This Tutorial</a>, And as you see in <strong>Database Structure</strong> we need some additional tables to support OpenId and OpenAuth, as usual I use </p>\n\n<p>C:\\Windows\\Microsoft.NET\\Framework64\\aspnet_regsql.exe </p>\n\n<p>to implement Membership Database,</p>\n\n<p>I install Visual Studio 2012 with .NETFramework 4.5 and MVC 4 so I run the <code>aspnet_regsql.exe</code> but the created database is not contain additional tables to support OpenId, So is there another way to implement this Database? Or I should add additional database by my own? and if yes how implement needed membership structure in Code side? </p>\n\n<p>I think there must be an auto way (like before) to implement membership to support new OpenId feature, what is your suggestion?</p>\n"},{"tags":["jquery","html","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13118014,"title":"Call jquery dialog box in master page","body":"<p>I use MVCHaack.ajax to call a controller function by javascript. Before call the function I show a jquery dialog box. When I use this in my views, everything is perfect but in master pages when I call, dialog box display as a block of text and not like a dialog. this is my master page code : </p>\n\n<pre><code>            &lt;script src=\"/json/RequestVIP?json\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/RequestVIP.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $('#vipdel').click(function () {\n            $(\"#messagec\").replaceWith(\"&lt;span id=messagec&gt;آیا از حذف عضویت ویژه مطمئن هستید؟&lt;/span&gt;\");\n            $(\"#dialog-confirm\").dialog({\n                buttons: {\n                    \"بلی\": function () {\n                        $mvc.RequestVIP.Delete({ customerId: $(\"#hdnId\").val() }).success(function (data) {\n                            $(\"#messagec\").replaceWith(\"&lt;span id=messagec&gt;\" + data.message + \"&lt;/span&gt;\");\n                            $(\"#dialog-confirm\").dialog({\n                                buttons: {\n\n                                    \"تایید\": function () {\n                                        $(this).dialog(\"close\");\n                                    }\n                                }\n                            });\n\n                            $(\"#dialog-confirm\").dialog(\"open\");\n                        });\n                    },\n                    \"خیر\": function () {\n                        $(this).dialog(\"close\");\n                    }\n                }\n            });\n\n            $(\"#dialog-confirm\").dialog(\"open\");\n\n            // alert(data.message);\n\n        });\n    });\n&lt;/script&gt;\n\n\n\n\n\n\n &lt;div class=\"section\"&gt;\n                                &lt;h2 class=\"title\"&gt;• عضویت ویژه&lt;/h2&gt;\n                                            @Html.Hidden(\"hdnId\", @User.Identity.Name.Trim())\n                                &lt;button style=\"width:150px;vertical-align:middle\" id=\"vipreq\"&gt;&lt;img src=\"@Url.Content(\"~/images/join.png\")\"/&gt;درخواست عضویت ویژه&lt;/button&gt;&lt;br/&gt;\n                                &lt;button style=\"width:150px;vertical-align:middle\" id=\"vipdel\"&gt;&lt;img src=\"@Url.Content(\"~/images/deljoin.png\")\"/&gt;حذف عضویت ویژه&lt;/button&gt;&lt;br/&gt;\n                                &lt;button style=\"width:150px;vertical-align:middle\" id=\"viprev\"&gt;&lt;img src=\"@Url.Content(\"~/images/rejoin.png\")\"/&gt;تمدید عضویت ویژه&lt;/button&gt;&lt;br/&gt;\n                            &lt;/div&gt;\n\n\n   &lt;div id=\"dialog-confirm\" title=\"عضویت ویژه\"&gt;\n        &lt;p&gt;\n            &lt;span class=\"ui-icon ui-icon-alert\" style=\"font-family: Tahoma; float: right; margin: 0 7px 20px 0;\"&gt;\n            &lt;/span&gt;&lt;span id=\"messagec\"&gt;&lt;/span&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4690,"score":0,"question_id":702794,"title":"Jquery file uploader and navigator","body":"<p>I am looking for a jQuery plug in that will allow me to upload files and/or navigate to files on the file system. </p>\n\n<p>It would be used to allow a visitor to add multiple images to a news article. </p>\n\n<p>I am using ASP.NET MVC so it would have to be compatible with that.</p>\n\n<p>Edit: Something like this would work great - <a href=\"http://kfm.verens.com/demo/1.3.1/?lang=en\" rel=\"nofollow\">KFM Demo</a></p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":228,"score":1,"question_id":8255511,"title":"Handle Multiple Form Submission via ActionFilterAttribute mvc3.net","body":"<p>I am trying to handle multiple form submissions by writing an ActionFilter. I am new to the domain of ActionFilters and dont know where to start any help will be much appreciated. \nI have looked at this question but couldnt get a starting point</p>\n\n<p><a href=\"http://stackoverflow.com/questions/218907/how-to-handle-multiple-submissions-server-side\">How to handle multiple submissions server-side</a></p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1324,"score":4,"question_id":5869390,"title":"How to prevent multiple posts on MVC3?","body":"<blockquote>\n  <p>A user wants to post in his blog, he fills the field and click <code>submit</code>.</p>\n  \n  <p>The site is running slow, he clicks again, and again, and again.</p>\n  \n  <p>It was finally saved, but now he check his posts and sees <code>4</code> posts.</p>\n</blockquote>\n\n<p><strong>How can I prevent this from happening?</strong> If the user click to submit once I want to <code>do nothing</code> for the next clicks or <code>abort previous</code> and start a new post, whichever makes more sense or is recommended.</p>\n\n<p>In a form with</p>\n\n<pre><code>@using (Ajax.BeginForm(...))\n{\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","t4mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13091223,"title":"T4MVC adding current page controller to action link","body":"<p>I have the following ActionLink that sits in the home page on the register controller (Index.cshtml)</p>\n\n<pre><code>@Html.ActionLink(\"terms of service\", Url.Action(MVC.Home.Terms()), \n                 null, new  { target=\"_blank\" })\n</code></pre>\n\n<p>Generating the following URL.  Why is \"register\" being added to it?  It's as if the link within the Register page which has it's own controller is preappending the register controller to any link in that view?</p>\n\n<pre><code>http://localhost/register/terms-of-service\n\n    routes.MapRoute(\n        \"Terms\",\n        \"terms-of-service\",\n        new { controller = \"Home\", action = \"Terms\" }\n    );\n\npublic partial class HomeController : SiteController\n{\n    public virtual ActionResult Terms()\n    {\n        return View(new SiteViewModel());\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","json","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13041808,"title":"MVC controller : get JSON object from HTTP body?","body":"<p>We have an MVC (MVC4) application which at times might get a JSON events POSTed from a 3rd party to our specific URL (\"http://server.com/events/\"). The JSON event is in the body of the HTTP POST and the body is strictly JSON (<code>Content-Type: application/json</code> - not a form-post with JSON in some string field).</p>\n\n<p>How can I receive the JSON body inside the controller's body? I tried the following but didn't get anything</p>\n\n<p><strong>[Edit]</strong>: When I say <em>didn't get anything</em> I meant that jsonBody is always null regardless of whether I define it as <code>Object</code> or <code>string</code>. </p>\n\n<pre><code>    [HttpPost]\n    // this maps to http://server.com/events/\n    // why is jsonBody always null ?!\n    public ActionResult Index(int? id, string jsonBody)\n    {\n        // Do stuff here\n    }\n</code></pre>\n\n<p>Note that I know if I give declare the method with a strongly typed input parameter, MVC does the whole parsing and filtering i.e.</p>\n\n<pre><code>    // this tested to work, jsonBody has valid json data \n    // that I can deserialize using JSON.net\n    public ActionResult Index(int? id, ClassType847 jsonBody) { ... }\n</code></pre>\n\n<p>However, the JSON we get is very varied, so we don't want to define (and maintain) hundreds of different classes for each JSON variant.</p>\n\n<p>I'm testing this by the following <code>curl</code> command (with one variant of the JSON here)</p>\n\n<pre><code>curl -i -H \"Host: localhost\" -H \"Content-Type: application/json\" -X POST http://localhost/events/ -d '{ \"created\": 1326853478, \"data\": { \"object\": { \"num_of_errors\": 123, \"fail_count\": 3 }}}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","file-upload"],"answer_count":2,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":3538,"score":7,"question_id":4888632,"title":"MVC Valums Ajax Uploader - IE doesn't send the stream in request.InputStream","body":"<p>i'm using Valums Ajax uploader. all works great in Mozilla with this code:</p>\n\n<p>View:</p>\n\n<pre><code>var button = $('#fileUpload')[0];\nvar uploader = new qq.FileUploader({\n    element: button,\n    allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], \n    sizeLimit: 2147483647, // max size\n    action: '/Admin/Home/Upload',\n    multiple: false\n});\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Upload(string qqfile)\n{\n    var stream = Request.InputStream;\n    var buffer = new byte[stream.Length];\n    stream.Read(buffer, 0, buffer.Length);\n\n    var path = Server.MapPath(\"~/App_Data\");\n    var file = Path.Combine(path, qqfile);\n    File.WriteAllBytes(file, buffer);\n\n    // TODO: Return whatever the upload control expects as response\n}\n</code></pre>\n\n<p>which was answered in this post:</p>\n\n<blockquote>\n  <p><a href=\"http://stackoverflow.com/questions/4884920/mvc3-valums-ajax-file-upload\">MVC3 Valums Ajax File Upload</a></p>\n</blockquote>\n\n<p>However issue is that this doesn't work in IE. I did find this but i can't figure out how to implement it: </p>\n\n<blockquote>\n  <p>IE doesn't send the stream in\n  \"request.InputStream\" ... instead get\n  the input stream through the\n  HttpPostedFileBase from the\n  Request.Files[] collection</p>\n</blockquote>\n\n<p>Also, this here that shows how this guy did it but i'm not sure how to change for my project:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/4371015/valum-file-upload-works-in-chrome-but-not-ie-image-img-image-fromstreamrequ\">Valum file upload - Works in Chrome but not IE, Image img = Image.FromStream(Request.InputStream)</a></p>\n\n<blockquote>\n<pre><code>//This works with IE\nHttpPostedFileBase httpPostedFileBase = Request.Files[0]\n</code></pre>\n  \n  <p>as HttpPostedFileBase;</p>\n</blockquote>\n\n<p>can't figure this one out. please help!\nthanks</p>\n"},{"tags":["asp.net-mvc","event-log"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13116248,"title":"Event is not logged in hosting server","body":"<p>I have implemented the code to log the errors in system event logger. It works fine when i run the source in local host. But after hosting my website in server(US Server) it doesnt log the errors. Also it doesnt created a new event name.\nCan you please let me know how to resolve this problem?\nThanks.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13114388,"title":"How can I edit multiple types (with same base) on the same view?","body":"<p>Lets say I have two classes one base class:</p>\n\n<pre><code>public class BaseModel {\n\n}\n</code></pre>\n\n<p>And a couple of children:</p>\n\n<pre><code>public class FooModel : BaseModel {\n\n}\n\npublic class BarModel : BaseModel {\n\n}\n</code></pre>\n\n<p>Now my view I would like to expect a model like this:</p>\n\n<pre><code>@model IEnumerable&lt;BaseModel&gt;\n</code></pre>\n\n<p>And in my action I would pass in child classes along the lines of:</p>\n\n<pre><code>return View(new List&lt;BaseModel&gt;(){ new FooModel(), new BarModel() })\n</code></pre>\n\n<p>I would then edit these on one page, using <code>EditFor</code> (This works fine)</p>\n\n<p>The problem is when I post back I would like to be able to cast these types to there implementation types, but this doesn't work. If I try and cast it, it is null or an exception is thrown.</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult BaseModelUpdate(IList&lt;BaseModel &gt; model)\n{\n// I would like to access items in the list as FooModel and BarModel \n}\n</code></pre>\n\n<p>How can I achieve this? (getting the items in the list back to their child class types?)</p>\n\n<p>I was thinking I could try and use TryUpdateModel?</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","configuration","web-config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13114932,"title":"External Config Files (configSource) Dropped From Memory (MVC, C#, ASP.net)","body":"<p>We are having an intermittent issue where config files, or more specifically subset of values within that data are getting lost into the ether. Truth be told I am at a loss as to how to approach it because I am unsure if it's a code, config, machine or IIS issue. To give you an idea of what's happening....</p>\n\n<p><strong>What we are doing</strong></p>\n\n<p>We have a config file that contains \"price\" drop down values : </p>\n\n<pre><code>&lt;searchForm&gt;\n&lt;priceLowerBoundValues&gt;\n&lt;priceLowerBoundValue&gt;2500&lt;/priceLowerBoundValue&gt;\n&lt;priceLowerBoundValue&gt;5000&lt;/priceLowerBoundValue&gt;\n....\n&lt;/priceLowerBoundValues&gt;\n....\n&lt;/searchForm&gt;\n</code></pre>\n\n<p>These are contained within a file named searchForm.config. In web.config they are referenced as an external file like so. </p>\n\n<pre><code>&lt;searchForm configSource=\"Config\\searchForm.config\" /&gt;\n</code></pre>\n\n<p>We have a custom configuration handler that inherits from IConfigurationSectionHandler. The gist of being this code here that gets the values. </p>\n\n<pre><code>var priceLowerBoundValueXPath = \"/searchForm/priceLowerBoundValues/priceLowerBoundValue/text()\";\nsearchFormLookups.PriceLowerBoundValues = section.SelectNodes(priceLowerBoundValueXPath).Cast&lt;XmlNode&gt;().Select(x =&gt; int.Parse(x.Value));\n</code></pre>\n\n<p>Then the ONLY place we reference it, is when building a select list for the viewmodel. It looks a little like this : </p>\n\n<pre><code>SearchFormConfiguration.PriceLowerBoundValues.ToSelectList((parameters.PriceLowerBound != null) ? parameters.PriceLowerBound.Value : 0)\n</code></pre>\n\n<p>There is no modifications done to the list ever, and using resharper \"Find Usages\" only brings up this single call. No other point in the program touches these values. </p>\n\n<p><strong>The Issue</strong></p>\n\n<p>What will happen intermittently is that the drop down boxes on our webpage suddenly have only one value (e.g. 2500 in the price box). Do note it is not completely empty, but usually most values are gone. We have had similar issues of external configs dropping (almost completely) and it causes null reference errors across the place. e.g. it's still looking for a config that's supposed to be there, but it has been wiped from the face of the earth. </p>\n\n<p>Stopping the website, stopping the app pool, and then bringing everything up again fixes the issue. Which made me initially think it could be something with memory usage, and external configurations being the first thing it drops, but I'm really unsure at this point. </p>\n\n<p>Another thing to note. We have an app pool restart in the early hours of the morning everyday.</p>\n\n<p>Any help with this is much appreciated, even if it's just a nudge into the right direction. As I say, I can't find any info on where to start, be it IIS settings or code. :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":368,"score":1,"question_id":4422328,"title":"MVC Html.ActionLink doesn't work after upgrade from .net 3.5 to 4.0","body":"<p>Well as the title says, I have a project with a bunch of Html.ActionLink</p>\n\n<pre><code>&lt;%= Html.ActionLink(\"Reason for booking\", \"BookingReason\")%&gt;\n</code></pre>\n\n<p>I have upgraded the project to .net 4.0 and they no longer render a link to the action.  Its just a blank  of course causing the page to reload.</p>\n\n<p>The Html.ActionLink tags are in a user control (ascx) in the Shared folder of an Area.</p>\n\n<p>I tried downgrading again to .net 3.5 and it works - weird.  any ideas?</p>\n\n<p>Thx</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","entity-framework","poco"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13113566,"title":"Asp.net mvc, entity framework, Poco - Architecture","body":"<p>I have a \"small\" enterprise application, aspnet mvc 3 + entity framework with POCO entity and repository pattern. I structured the solution in 4 projects:</p>\n\n<ol>\n<li>POCO entities</li>\n<li>Domain model</li>\n<li>Services</li>\n<li>web application</li>\n</ol>\n\n<p>When the application performs a query on the database, use one of the services provided, the service uses the repository and the small classes, as a result I have some dynamic proxy objects that I would like to convert in my domain entities, before using them in mvc views, but I do not know how. Dovrebber be set as the translator?</p>\n\n<p>This approach is reasonable?</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-4","authorize"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":114,"score":1,"question_id":13106487,"title":"Data level Authorization filter in ASP.Net MVC Entity Framework application","body":"<p>I was looking for a data level Authorization filter in my ASP.Net MVC 4 Application.<br>\nWe are using Entity Framework for Data access.</p>\n\n<p>The application need to display all the data but should restrict the access to certain fields in a table based on the user roles.</p>\n\n<p>eg: TASK table\n{\nint Id,\nstring TaskName,\nDateTime StartDate,\nDateTime EndDate\n}</p>\n\n<p>This whole data will be displayed to all the users and users have the options to edit the fields also. But should restrict the edit options like as follows<br>\nRole Admin can edit all the fields<br>\nRole Manager can Edit TaskName but cannot edit StartDate and EndDate<br>\nRole Users cannot Edit any of the fields  </p>\n\n<p>All these edit will be calling the Edit action in the TaskController.</p>\n\n<p>How can I implement the functionality in my application.</p>\n"},{"tags":["asp.net-mvc","tinymce"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13114468,"title":"Getting and setting the html from TinyMCE in MVC project","body":"<p>I'm working on an MVC project using TinyMCE.  I have a model that contains a string property that is the HTMLContent.  I would like the Get action method to pull the HTML from a file and set the text for TinyMCE.  The post method should pull the new TinyMCE html and save it to the file.</p>\n\n<p>Currently, the get works when using Html.TextArea and then using HttpUtility.Decode to decode the model.HTMLContent property in the .aspx page.  </p>\n\n<pre><code>&lt;%= Html.TextArea(\"elm1\", HttpUtility.HtmlDecode(Model.HTMLContent), new {@name=\"elm1\", @class=\"tinymce\" }) %&gt;\n</code></pre>\n\n<p>However, on post, the model.HTMLContent property is null.  If I use Html.TextAreaFor, then the post model contains the html, BUT the GET does not decode the string TinyMCE's text area is initially set to.  I try to decode or encode on the server side but this doesn't work.</p>\n\n<p>I've done a lot of research and cannot find any examples of both setting and getting the TinyMCE HTML with MVC, just the getting. Any help would be greatly appreciated.</p>\n"},{"tags":["javascript","jquery","html","asp.net-mvc","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3277,"score":0,"question_id":4843150,"title":"Adding file inputs dynamicly with jquery?","body":"<p><strong>Hi,</strong></p>\n\n<p>To make my weppage as complatible as possible I will go with the reguler file input, the problem is that I need to offer multiple uploads.</p>\n\n<p>My thought is that when the first input is set a second will be shown (up to a max of 10). Say that we have filled 5 and there is 6 visible. We now clear the second input, this will result in two empty inputs so then the last(6(empty)) input should be hidden.</p>\n\n<p>Is this possible to to with Jquery? Maby you have a example?</p>\n\n<p>Pleas advice.</p>\n\n<p><strong>BestRegards</strong></p>\n\n<p>Edit1 : This is what I manage to create, it works fine. I am however sure that someone that know jquery better could make a smarter script:</p>\n\n<p>In the view :</p>\n\n<pre><code>        &lt;div id=\"fileInput0\" class=\"fileVisible\"&gt;\n            &lt;input type=\"file\" id=\"file0\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(0)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput1\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file1\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(1)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput2\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file2\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(2)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput3\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file3\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(3)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput4\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file4\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(4)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput5\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file5\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(5)\" /&gt;\n        &lt;/div&gt;         \n        &lt;div id=\"fileInput6\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file6\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(6)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput7\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file7\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(7)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput8\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file8\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(8)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput9\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file9\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Töm\" onclick=\"resetFileField(9)\" /&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>The Script :</p>\n\n<pre><code>function fileChangeHandler() {\n\n    var hiddenClass = 'fileHidden';\n    var visibleClass = 'fileVisible';\n\n    var parentDiv = $(this).parent;\n    var idNr = $(this).attr('id').replace('file', '');\n\n    idNr++;\n\n    if($(this).val().length &gt; 0){\n\n        for(var i = idNr; i &lt; 10; i++){\n            if($('#fileInput' + i).hasClass(visibleClass)){\n                if($('#file' + i).val().length &lt; 1){ return;}\n            }\n            else{\n                    $('#fileInput' + i).attr('class' , visibleClass);\n                    return;\n            }\n        }\n    }\n}\n\nfunction resetFileField(id) {\n    var hiddenClass = 'fileHidden';\n    var visibleClass = 'fileVisible';\n    var counter;\n\n    $('#fileInput'+id).html($('#fileInput'+id).html());\n    $('#file'+id).change(fileChangeHandler);\n\n    for(var i = 9; i &gt; -1 ;i--)\n    {\n\n        if(id != i)\n        {\n            if($('#fileInput' + i).hasClass(visibleClass)){\n                if($('#file' + i).val().length &lt; 1){\n                    $('#fileInput' + i).attr('class', hiddenClass);\n                }\n            }\n        }\n    } \n}\n</code></pre>\n\n<p>If you find a better solution, pleas let me know.</p>\n"},{"tags":["jquery",".net","ajax","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13114457,"title":"Specific $.ajax url relative paths work in FF & IE but not in Chrome","body":"<p>This is strange.  I have a jQuery $.ajax call below.  In Firefox it'll only work if I take out MyAppName.  In Chrome it will only work if I include MyAppName in the url.  Not sure why</p>\n\n<p>I'm browsing to <code>http://localhost/MyAppName</code> when I test this.</p>\n\n<p><strong>This works in FireFox and in IE 9</strong></p>\n\n<pre><code>$.ajax({\n    url: '/MyAppName/Search/Member/260491',\n</code></pre>\n\n<p>This does not work in FireFox or IE:</p>\n\n<pre><code>  $.ajax({\n    url: 'Search/Member/260491',\n</code></pre>\n\n<p><strong>This works in Chrome</strong></p>\n\n<pre><code>$.ajax({\n    url: 'Search/Member/260491',\n</code></pre>\n\n<p>This does not work in Chrome:</p>\n\n<pre><code>  $.ajax({\n    url: '/MyAppName/Search/Member/260491',\n</code></pre>\n"},{"tags":["asp.net-mvc","url","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13114450,"title":"Send variable to controller through url MVC 3","body":"<p>I need that this url \"Home/Details/123\" show a page Details with the details of the item with id 123, how can I do this? I think that the route have to be registered but I need more information about this.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13114377,"title":"MVC Business logic helper","body":"<p>I have some common functions that apply throughout my application to update particular parts of the database when actions happen (Audit trail, modified dates etc). I'll use AuditTrail as an example.</p>\n\n<p><strong>Where should I be storing these functions?</strong></p>\n\n<p>Currently I am storing them in dbcontext classes</p>\n\n<pre><code>//... my db context class ...\n\npublic bool AddAuditEntry(int ID, string objectName)\n{\n    // Here I create a new AuditTrail object, assign values then insert into db.\n    // This mode doesn't have a controller.\n}\n\n// We also have a table that keeps track of modified state for \n// client side caching (nothing I have control over)\npublic bool ModifyObject(int ID)\n{\n    // Here I mark the object id with modified date then save to db\n    // This particular model doesn't have a controller either.\n}\n</code></pre>\n\n<p>I think they should belong in the model but I'm not quite sure how to implement it. Putting them in the controller isn't the best option as some of these relate only to a particular model class that may have no controller.</p>\n\n<p>My problem with them being in the model is what then is the best way to update entities?</p>\n"},{"tags":["asp.net-mvc","frameworks","entity","code-first"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":364,"score":2,"question_id":9471357,"title":"EF 4.3 Code first (migrations) with remote database","body":"<p>I would like to use Code First approach in my MVC3 web application, so I found this tutorial\n<a href=\"http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-automatic-migrations-walkthrough.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-automatic-migrations-walkthrough.aspx</a>\nEverything was OK untill I used database on localhost, but i really need to use database on my hosting, so i added connection string to my web.config:</p>\n\n<pre><code>    &lt;add name=\"BlogContext\"\n     connectionString=\"data source=mssql4.webio.pl,2401;initial catalog=koki_forumMVC;user id=koki_administrator;password=MY_PASSWORD;\"\n     providerName=\"System.Data.SqlClient\"/&gt;\n</code></pre>\n\n<p>My Context Class and Entity Class:</p>\n\n<pre><code>public class BlogContext : DbContext\n{\n    public DbSet&lt;Blog&gt; Blogs { get; set; }\n}\npublic class Blog\n{\n    public int BlogId { get; set; }\n\n    public string Name { get; set; }       \n}\n</code></pre>\n\n<p>When i don't defined connection string when application starts, database is creating on local instance of sqlexpress. I'll be glad if it happens too when i define connection string to my remote server. I need to mentioned that when i exec command update-database in nuget console, if database is empty, my model is mapped to database. the problem is when i try to change my model by insert new property. when i execute cmd update-database i take error msg that the object with the same name of my model is founded in DB; /</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":5,"favorite_count":30,"up_vote_count":41,"down_vote_count":0,"view_count":12260,"score":41,"question_id":3389097,"title":"asp.net mvc3 razor documentation?","body":"<p>Is there any documentation on how to use Razor view engine using asp.net mvc3? or any other resources?</p>\n\n<p>Trying to find it in google and msdn with no luck so far.</p>\n"},{"tags":["asp.net-mvc","class","controller","jsonresult"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1265,"score":1,"question_id":2765082,"title":"Return Multiple Objects Using ASP.NET MVC'S JsonResult Class","body":"<p>Is it possible to Multiple Objects Using ASP.NET MVC'S JsonResult Class.... Here is a controller method which returns json object of my records but i also want to pass the count value....</p>\n\n<pre><code>var materials = consRepository.FindAllMaterials().AsQueryable();\nvar count = materials.Count();\nvar results = new PagedList&lt;MaterialsObj&gt;(materials, currentPage-1, pageSize);\nreturn Json(results);\n</code></pre>\n\n<p>How to return count along with the <code>results</code> from asp.net mvc controller....</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","error-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13113652,"title":"What is the most standard/correct way to return logic error?","body":"<p>ASP.Net MVC 3, Kendo UI Web.</p>\n\n<p>Typical example -- there is a database and some tables, user is editing the data -- adding new entries, deleting, updating.</p>\n\n<p>Apart from technical problems (network connection down), there could be several logical ones -- for example user does not have permission to write anything, or there is a lock on data, or user tries to update something what was deleted meanwhile, and so on.</p>\n\n<p>So I would like to return in such cases an error, so I could handle it with Kendo and display, let's say some alert dialog (JS <code>alert</code>).</p>\n\n<p>Now -- what would be the most well designed way, most correct, to do so? I am not looking for \"oh, well, it just works\" approach.</p>\n\n<p>Is throwing <code>HttpException</code> a good idea in such case (I have my issues with it, because it is <strong>http</strong> exception, and the error I try to pass has nothing to do with http really)?</p>\n"},{"tags":["javascript","asp.net-mvc","angularjs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":96,"score":-3,"question_id":13114090,"title":"asp.net mvc vs angular js","body":"<p>I have come across a really interesting JS framework recently, AngularJS. It feels to me that it's a client side MVC implementation framework with powerful built-in model binding. The framework is typically used with with asp.net Web API where the Web API deals with the server side business logic and AngularJS deals with the front end rending and model bindings. </p>\n\n<p>The thing that puzzles me is that how is that easier or better than implementing a same solution with a standard asp.net MVC framework? Model binding can be easily be done in asp.net MVC and it has all the layers de-coupled which makes it easier to maintain, extend and test. </p>\n\n<p>So why angularJS? Do we get any performance gain by using this angular JS? Or is it making the app easier to maintain? I am trying to convince myself to learn AngularJS, but I'll need to know the use of it before jumping onto it. </p>\n"},{"tags":["asp.net-mvc","iis","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13112905,"title":"IIS isn't serving javascript and css requests on azure webrole application","body":"<p>need your help with this one, i'm running azure deployment on my localhost and get the webpage without css and javascript, when i look in fiddler i see 500 status and the following error: \"<code>It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS</code>\" on each request for javascript or css file, i already enabled static content on windows feature and it didn't help, i'm using iis 7.5 on windows professional 64 bit with azure sdk 1.7, tried anything, and nothing helped, can't change the site to web application cause the website only exist on iis while i'm running debug, any idea what to do?</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13113397,"title":"How can I use EditorFor with a list that is Grouped?","body":"<p>I have a list that I would like to group and edit within a razor view.</p>\n\n<p>If the POCO is:</p>\n\n<pre><code>public class FooBar {\n\npublic string GroupName {get;set;}\npublic string SomeValue {get;set;}\n\n// etc.\n\n}\n</code></pre>\n\n<p>And the model in the View:</p>\n\n<pre><code>@model IEnumerable&lt;FooBar&gt;\n</code></pre>\n\n<p>And the Post action is like this:</p>\n\n<pre><code>[HttpPost]\n        public ActionResult FooBarPost(IEnumerable&lt;FooBar&gt; model)\n</code></pre>\n\n<p>Normally to edit a list I would use this syntax in my view:</p>\n\n<pre><code>@Html.EditorForModel()\n</code></pre>\n\n<p>Which works great, it creates lovely little inputs like:</p>\n\n<pre><code>&lt;input id=\"[0].SomeValue\" /&gt;\n</code></pre>\n\n<p>And the post back is perfect.</p>\n\n<p>Now if I want to change my view to the much less awesome:</p>\n\n<pre><code>&lt;fieldset&gt;\n                        &lt;legend&gt;Legendary&lt;/legend&gt;\n                        @foreach (var group in Model.GroupBy(x =&gt; x.GroupName))\n                        {\n                            &lt;h3&gt;@group.Key&lt;/h3&gt;\n\n                            @Html.EditorFor(x =&gt; group)\n                        }\n                    &lt;/fieldset&gt;\n</code></pre>\n\n<p>Then when I post my list comes back as null?</p>\n\n<p>I remember there being a trick to fixing this, I just can't remember what it was?</p>\n\n<p>Thanks.</p>\n\n<p>Edit:</p>\n\n<p>added <code>[Bind(Prefix=\"group\")]</code> to my action which now brings back just one of the input values. </p>\n\n<p>I noticed the HTML generated looks like this (all on same page):    </p>\n\n<p>Group 1:</p>\n\n<pre><code>&lt;input id=\"group_0__SomeValue\" name=\"group[0].SomeValues\" type=\"hidden\" value=\"bla\"&gt;  \n&lt;input id=\"group_1__SomeValue\" name=\"group[1].SomeValues\" type=\"hidden\" value=\"bla\"&gt;\n</code></pre>\n\n<p>Next group:</p>\n\n<pre><code>&lt;input id=\"group_0__SomeValue\" name=\"group[0].SomeValues\" type=\"hidden\" value=\"bla\"&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","plupload"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":263,"score":1,"question_id":11311755,"title":"Plupload Asp.Net MVC how pass different parameters into ActionResult method","body":"<p>I use <code>Plupload</code> for Asp.Net MVC</p>\n\n<p>I need to pass any value or viewmodel into the ActionResult method</p>\n\n<p><strong>For example first line code of form</strong></p>\n\n<pre><code>@using (Html.BeginForm(\"UploadImage\", \"Home\",\n            FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n</code></pre>\n\n<p><strong>ActionResult method signature</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult UploadImage(int? chunk, string name, **I NEED PASS PARAMETER HERE !!!**)\n</code></pre>\n\n<p>I couldn't. </p>\n"},{"tags":["asp.net-mvc","c#-4.0","action-filter","custom-action-filter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13113749,"title":"Can I access an ActionFilter from a helper?","body":"<p>I have an actionfilter applied to an action. Its checking for a flag and redirects to a different view if the flag is set to true.</p>\n\n<p>This works well if a user navigates to the action. </p>\n\n<p>I have an html helper that builds up an ActionLink applying some extra styling attributes to it and renders the actionlink.</p>\n\n<p>My problem is I want to check to see if the actionfilter has been applied to the action.</p>\n\n<p>Is it possible to check to see if an actionfilter has been applied?</p>\n\n<p>Within my helper I am getting the current action and controller via</p>\n\n<pre><code>    string action = htmlHelper.ViewContext.RouteData.GetRequiredString(\"action\");\n        string controller = htmlHelper.ViewContext.RouteData.GetRequiredString(\"controller\");\n</code></pre>\n\n<p>If the actionfilter is switched on, I dont even want the user to know about the link.Is this possible to check the filter and return null if its turned on? or do I need to tackle this a different way?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","action-filter"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":199,"score":2,"question_id":11001286,"title":"How to Replace ~/ with Base Directory in MVC 3?","body":"<p>I like the new feature of MVC 4 where it replaces tilde paths (app relative) with the client url:</p>\n\n<p><strong>href=\"~/\"</strong> becomes <strong>href=\"/\"</strong> or <strong>href=\"/appDir/\"</strong></p>\n\n<p><strong>src=\"~/images/test.png\"</strong> becomes <strong>src=\"/images/test.png\"</strong> or <strong>src=\"/appDir/images/test.png\"</strong></p>\n\n<p>I'm pretty sure I could accomplish the same thing using ActionFilters, but I'm not sure how efficient it is? I've also always wondered what happens when the pattern you are searching for splits across buffers since you are typically overriding the Write method for the stream:</p>\n\n<pre><code>public override void Write(byte[] buffer, int offset, int count) {\n    // output transformations go here\n}\n</code></pre>\n\n<p>For example, if my pattern is:</p>\n\n<pre><code>((href)|(src)|(action))\\s*=\\s*\"~/\n</code></pre>\n\n<p>What happens if the buffer includes <strong>href</strong> in one buffer chunk, and <strong>=\"~/\"</strong> in the next?</p>\n\n<p>Does MVC4 handle this at compilation time or using something similar to above?</p>\n"},{"tags":["javascript","html","asp.net-mvc","authentication","asp.net-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13112944,"title":"html/Javascript Clientside User Login","body":"<p>I am adding authentication to my web application. It is an asp.net mvc single page application. Currently the web application is using the asp.net mvc for only one thing, authentication. I check the Request.IsAuthenticated in the AppController, if it isnt authenticated than I serve the login page (else I save the app.html page). In my AccountController I have the following Logon Action:</p>\n\n<pre><code>[HttpPost]\n    [AllowAnonymous]\n    [ValidateAntiForgeryToken]\n    public ActionResult LogOn(LogOnModel model, string returnUrl)\n    {\n        if (ModelState.IsValid)\n        {\n            //VALIDATE USER NAME AND PASSWORD                \n            if (Repository_Security.CheckUser(model.UserName, model.Password))\n            {\n                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n                if (Url.IsLocalUrl(returnUrl) &amp;&amp; returnUrl.Length &gt; 1 &amp;&amp; returnUrl.StartsWith(\"/\") &amp;&amp; !returnUrl.StartsWith(\"//\") &amp;&amp; !returnUrl.StartsWith(\"/\\\\\\\\\"))\n                {\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    return RedirectToAction(\"Index\", \"App\");\n                }\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n            }\n        }\n\n        // If we got this far, something failed, redisplay form\n        return View(model);\n    }\n</code></pre>\n\n<p>Really its just taking a user name and password and validating against the database. Than sets the AuthCookie if it passes.</p>\n\n<p>My question is, is this possible if I do this entirely clientside in the browser in javascript and ajax data calls? Than be able to add a check in my clientside code to see if the user is authenticated, else throw them to a login page?</p>\n\n<p>Any ideas? thanks.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13113249,"title":"Can you cast down when passing a model to a view?","body":"<p>Lets say I have two classes one base class:</p>\n\n<pre><code>public class BaseModel {\n\n}\n</code></pre>\n\n<p>And a couple of children:</p>\n\n<pre><code>public class FooModel : BaseModel {\n\n}\n\npublic class BarModel : BaseModel {\n\n}\n</code></pre>\n\n<p>Now my view I would like to expect a model like this:</p>\n\n<pre><code>@model IList&lt;BaseModel&gt;\n</code></pre>\n\n<p>So that I can edit these models on one page.</p>\n\n<p>However when I pass in a collection of these models in the action I get an exception saying:</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type\n  'System.Collections.Generic.List<code>1[BarModel]', but this dictionary\n  requires a model item of type\n  'System.Collections.Generic.IList</code>1[BaseModel]'.</p>\n</blockquote>\n\n<p>Like this:</p>\n\n<pre><code>var models = new List&lt;BaseModel&gt;(){ new BarModel(), new FooModel ()}\nreturn View(models);\n</code></pre>\n\n<p>How can I achieve this? </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13106702,"title":"list of checkbox “true,false” value MVC 3","body":"<p>I have in the view</p>\n\n<pre><code>@model IEnumerable&lt;RolesMVC3.Models.Estudent&gt;\n.\n.\n.\n    @for (var i = 0; i &lt; Model.Count(); i++)\n    { \n              &lt;tr&gt;\n                &lt;td&gt; @Html.CheckBox(\"CheckValue\")&lt;/td&gt;\n                &lt;td&gt; @Html.DisplayFor(m =&gt; m[i].CodeEstudent)  @Html.HiddenFor(m =&gt; m[i].IdEstudent)&lt;/td&gt;\n                &lt;td&gt;@Html.DisplayFor(m =&gt; m[i].NameEstudent)  @Html.DisplayFor(m =&gt; m[i].LastNameEstudent)&lt;/td&gt;\n            &lt;/tr&gt;     \n     }\n.\n.\n.\n</code></pre>\n\n<p>In the controller:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult MyController(List&lt;ESTUDENT&gt; estudents, List&lt;bool&gt; CheckValue)\n    {\n\n        ///Actions\n    }\n</code></pre>\n\n<p>But, I reciveb two CheckBox for each student.</p>\n\n<p>e.g. I am sending 29 and receive 58 in the controller</p>\n\n<p>How do I associate a CheckBox with a student on this list and get in the controller?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","iis","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13112802,"title":"Deploying MVC 4 Application with Entity Framework","body":"<p>I've created an mvc application. I used entity framework to work with database. When I tested my application, I filled my database with some data through web interface of my application. When I deploy app on IIS server and copy .sdf file to deployed app's folder I get the error:</p>\n\n<blockquote>\n  <p>Access to the database file is not allowed. [ 1914,File name = C:\\last_project\\published\\App_Data\\Data.sdf,SeCreateFile ]</p>\n</blockquote>\n\n<p>How I can get working database in my deployed app?</p>\n"},{"tags":["c#","asp.net-mvc","jqgrid","browser-cache","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13112578,"title":"use same page from browser cache if query string is different","body":"<p>ASP.NET  MVC2 page is used to show order in browser as described in\n<a href=\"http://stackoverflow.com/questions/13107750/how-to-fill-document-header-from-jqgrid-data/13108019#13108019\">How to fill document header from jqgrid data</a></p>\n\n<p>at page load javascript retrieves correct document from browser and bind it to page elements.</p>\n\n<p>document id is specifiied in query string like:</p>\n\n<pre><code>www.mysite.com/GetDocument?Id=1\nwww.mysite.com/GetDocument?Id=2\n</code></pre>\n\n<p>document is cached in browser:</p>\n\n<pre><code>[OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = \"*\")]\npublic ActionResult Index(int id) \n</code></pre>\n\n<p>However browser cache is not used since different page is cached for every query string. How to force borwser to cache page which does not depend on id parameter in query string ?\nOr is it better to pass id in post parameter ?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","view","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13112035,"title":"MVC4 Model in View issue: in debug mode Model is missing details","body":"<p>I encountered a very strange (and annoying) issue:\nin MVC 4 web application while loading data from the database and using a foreach on the Model within the view:</p>\n\n<pre><code>@foreach (var meeting in Model)\n</code></pre>\n\n<p>i have a breakpoint in the method's beginning and examining the object meeting i see that it misses some data (reference to other tables). if I open (+) other object within meeting the missing data appears.</p>\n\n<p>Why?</p>\n\n<p>Thanks!</p>\n\n<p>here is my controller method:</p>\n\n<pre><code>        public ActionResult GetMeetingMR(int id = 0)\n    {\n        var meetingPurpose = db.MeetingPurposes.ToList();\n        ViewBag.MeetingPurpose = new SelectList(meetingPurpose, \"MeetingPurposeID\", \"MeetingPurposeName\");\n        ViewBag.MRID = id;\n        List&lt;Meeting&gt; meetings = (db.MortgageRequests.Find(id)).Meetings.ToList();\n        return View(meetings);\n\n    }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc","sql-server-2008","ado.net","enterprise-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13112220,"title":"SqlClient login fail when trying to connect to database","body":"<p>This is so weird.  Ok here's my connection string in the web.config of my MVC 4 project:</p>\n\n<p><strong>Here is the connection string in my Unit Test Project's App.Config file:</strong></p>\n\n<pre><code> &lt;add name=\"ConnectionString\" connectionString=\"Data Source=THESERVERNAME;Initial Catalog=THETABLE;Persist Security Info=True;Integrated Security=SSPI\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>(I've replaced real names with fakes for this posting privacy only)</p>\n\n<p><strong>My unit test is:</strong></p>\n\n<pre><code>[Test]\npublic void GetMember_ByContractNumber_ReturnsAValidMember()\n{\n    // Arrang\n    const Int64 contractNumber = 2604914977;\n\n    // Act\n    DTO.Member member = MemberCRUD.RetrieveMember(contractNumber);\n\n    //Assert\n    Assert.IsNotNull(member);\n    Assert.IsNotNullOrEmpty(member.FirstName);\n    Assert.IsTrue(member.ContractNumber &gt; 0);\n}\n</code></pre>\n\n<p>It passes just fine!\n  I get a valid member object back from the database CRUD call.</p>\n\n<p><strong>The Problem:</strong></p>\n\n<p>But at the same time, when I try to make essentially the same call and same connection string from an MVC controller, the the same CRUD method in my DL bombs, it out at this point in code:</p>\n\n<p>and I get this exception:</p>\n\n<pre><code>{\"Login failed for user 'OURDOMAIN\\\\MYPCNAMEISHERE$'.\"} System.Data.SqlClient.SqlException\n</code></pre>\n\n<p>This database is <strong>remote</strong>, not on my local system.</p>\n\n<p>So obviously it's permissions but I don't see how to resolve this.  I think the reason my unit test passed is because it was maybe using my windows account as the identity when making the call to the DB whereas IIS for my MVC app was using the AppPoolIdentity.  So not sure how to fix this.  In my web.config I have Authentication set to None but I also tried setting it to Windows auth and enabling windows auth in IIS...no luck.</p>\n\n<p>I'm trying to run through my settings but no combination has worked so far for this permission issue.</p>\n\n<p>Again IIS is setup to use AppPoolIdentity but I also tried Network Service as the identity and added Network Service as a user and gave it permissions to my SQL DB..no luck.  I'm gonna try to add the AppPoolIdentity to my SQL Server DB but I doubt it's gonna work still.  Not sure what to try.\n-------------------------------- SUPPORTING PICS / Very Latest Settings ------------------</p>\n\n<p> in my web.config</p>\n\n<p>(I've got dbo rights on my AD account below)\n<img src=\"http://i.stack.imgur.com/AFx0L.jpg\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/XWEY2.jpg\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/ysEgi.jpg\" alt=\"enter image description here\"></p>\n\n<p>UPDATE:</p>\n\n<p><strong>Here's what I just tried as of the latest:</strong></p>\n\n<p><strong>1) Added the following users to SQL Server Security for my DB and gave them DBO rights:</strong></p>\n\n<ul>\n<li>NT AUTHORITY\\ANONYMOUS LOGON</li>\n<li>DOMAIN\\MYPCNAME$</li>\n<li>NT AUTHORITY\\NETWORK SERVICE</li>\n</ul>\n\n<p><strong>2) Added the following users to the file system security permissions for my app folder:</strong></p>\n\n<ul>\n<li>Authenticated Users</li>\n<li>IUSR</li>\n<li>SYSTEM</li>\n<li>NETWORK SERVICE</li>\n<li>MY AD ACCOUNT (DOMAIN\\MYACCOUNT)</li>\n<li>IIS APPPOOL\\MyAppPoolName</li>\n</ul>\n\n<p><strong>3) Then tried out a few things..all failed with the same error (Login Failed) when I render the MVC View:</strong></p>\n\n<p>changed the app pool identity to use the <strong>Local Service</strong>.  It then tried to connect to the SQL DB using NT AUTHORITY\\ANONYMOUS LOGON - I get login failed for NT AUTHORITY\\ANONYMOUS LOGON</p>\n\n<p>changed the pool identity to use <strong>Local System</strong>.  It tried to auth to SQL using 'DOMAINNAME\\MYPCNAME$' - I get login failed for DOMAINNAME\\MYPCNAME$</p>\n\n<p>changed the app pool identity to use <strong>Network Service</strong>.  It tried connect using 'DOMAINNAME\\MYPCNAME$'. - I get login failed for DOMAINNAME\\MYPCNAME$</p>\n\n<p>changed the app pool identity to use <strong>ApplicationPoolIdentity</strong>.  It tried to connect using 'DOMAIN\\MYPCNAMEN$'. - I get login failed for DOMAINNAME\\MYPCNAME$</p>\n\n<p><img src=\"http://i.stack.imgur.com/p4oQ8.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc","windows","lucene.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":8120956,"title":"LuceneNet not able to create *.fdt/*.cfs or *.fdx/*.cfx files on windows server","body":"<p>I've a MVC ASP.NET application which builds a search index on startup with LuceneNet. On my local workstation everything is working correctly, Lucene creates all files it needs. After publishing my Website on a windows server (exactly Small Business Server 2011) and requesting the website, only the segment files are created. I'm using <code>\"C:\\Temp\\LuceneIndex\"</code> as directory. Do I need some extra permission to the folder or have I missed something?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Problem Fixed</strong></p>\n\n<p><em>In my solution there is also a REST-Service, as seperate project. After publishing the rest service everything works fine.</em></p>\n"},{"tags":["asp.net-mvc","controllers","redirecttoaction"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":8263153,"title":"How to redirect to a specific URL from within a controller?","body":"<p>I am  trying to redirect user to a specific address, after they submit a form.\nWhat I use is the code below in my Content controller:</p>\n\n<pre><code>return RedirectToAction(\"Business\", new RouteValueDictionary(new { controller = \"Content\", action = \"Business\", Id = business.BusinessID }));\n</code></pre>\n\n<p>It creates a URL like this : \n<strong>www.x.com/Content/Business?Id=13</strong></p>\n\n<p>What I really want is something like this:\n<strong>www.x.com/Content/Business/13</strong></p>\n\n<p>I really don't want the query string to be separated with ? but to be consistent with the rest of the URLs.</p>\n\n<p>Is there anyway to do so?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1576,"score":2,"question_id":8284207,"title":"ASP.NET MVC implement custom validator use IClientValidatable","body":"<p>I ask similar question <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">here</a> but in this question I use another implementation, exactly <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">this way</a> the following codes show my implementations:</p>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>public class Department {\n\n    public long Id { get; set; }\n\n    [IsDateAfter(\"Date2\", true, ErrorMessage = \"O My\")]\n    public DateTime Date1 { get; set; }\n    public DateTime Date2 { get; set; }\n    public string Name1 { get; set; }\n    public string Name2 { get; set; }\n\n}\n</code></pre>\n\n<p><strong>Custom Validator:</strong></p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable {\n\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n  {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext\n validationContext) {\n        var propertyTestedInfo = \nvalidationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null) {\n            return new ValidationResult(string.Format(\"unknown property\n {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue =\n propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is\n DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue) {\n            if (this.allowEqualDates) {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue) {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new\n ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; \nGetClientValidationRules(ModelMetadata metadata, ControllerContext context) {\n        var rule = new ModelClientValidationRule {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] =\n this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] =\n this.allowEqualDates;\n        yield return rule;\n    }\n}\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function (value, element, params) {\nalert(params.propertytested);\nvar startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\nif (!value || !startdatevalue) return true;\nreturn (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) :\n Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p><strong>And My _Layout page (Master page)</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;@ViewBag.Title&lt;/title&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcValidation.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jQuery.IsDateAfter.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n    &lt;div id=\"header\"&gt;\n        &lt;div id=\"title\"&gt;\n            &lt;h1&gt;\n                My MVC Application&lt;/h1&gt;\n        &lt;/div&gt;\n        &lt;div id=\"logindisplay\"&gt;\n            @Html.Partial(\"_LogOnPartial\")\n        &lt;/div&gt;\n        &lt;div id=\"menucontainer\"&gt;\n            &lt;ul id=\"menu\"&gt;\n        &lt;li&gt;@Html.ActionLink(\"Departments\", \"Index\", \"Department\")&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div id=\"main\"&gt;\n        @RenderBody()\n    &lt;/div&gt;\n    &lt;div id=\"footer\"&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>of course in Edit And Create View pages the other script source are as following:</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;\n&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"\ntype=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>A part of Create Page Dom:</strong></p>\n\n<pre><code>&lt;fieldset&gt;\n&lt;legend&gt;Department&lt;/legend&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date1\"&gt;Date1&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date1\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date1\"\n data-val-required=\"The Date1 field is required.\" data-val-isdateafter-\n propertytested=\"Date2\" data-val-isdateafter-allowequaldates=\"False\" data-val-\nisdateafter=\"O My\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\n  for=\"Date1\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date2\"&gt;Date2&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date2\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date2\"\n data-val-required=\"The Date2 field is required.\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\nfor=\"Date2\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I try All of implementation be the same as <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">here</a> but that not work in client side and need to postback, I don't have any other implementation for example register in global.asax \nlike <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">this</a>, Does any one know about it? I really confused, I tried 2 way but none of them give the true answer.</p>\n\n<p><strong>Edit: Find answer and another Question:</strong></p>\n\n<p>I don't know why but when I add source of my script to _Layout page that not work, but when added in Create or Edit View pages that work, does any one know about it? </p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3196,"score":6,"question_id":6404330,"title":"How to deploy an Orchard CMS site, including all settings and content from development environment?","body":"<p>I've been trying to build and deploy a website running on Orchard CMS. I've previously donwloaded Orchard, set up a development environment, made a few modifications to the source, added and modified a theme, added som content and so forth. I've been using the SQL CE as database. Now I want to build and deploy the complete website. I've built a deployment package by running the build script, as described <a href=\"http://www.orchardproject.net/docs/Building-and-deploying-Orchard-from-a-source-code-drop.ashx\">here</a>. It's easy to simply ftp the built package to the hosting server. However, when visiting the site I now get the install a new site procedure. Apparently, the cms settings and content from my development environment have not been reflected in the deployment package. Thus, I need to copy all the content and re-do all the settings, including creating all widgets etc. again. </p>\n\n<p>Do anyone have any good idea on how to publish an Orchard site from a development to a production environment, including the cms settings, widget setings, content, etc? All guides I've found on the web describe how to use WebMatrix to deploy an Orchard site to shared hosting or Azure, but all of those guides end up with having a clean Orchard installation. What I would like to achive is to develop the site locally, and then push the entire site to the hosting server.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13109684,"title":"Entity Framework Code First Error - EntityType 'Variable' has no key defined","body":"<p>I'm using Entity Framework 5 Code First in an ASP.NET MVC 4 project and I'm getting the following error:</p>\n\n<blockquote>\n  <p>One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Variable' has no key defined. Define the key for this EntityType.\n  \\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Variables' is based on type 'Variable' that has no keys defined.</p>\n  \n  <p>Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. </p>\n  \n  <p>Exception Details: System.Data.Entity.ModelConfiguration.ModelValidationException: One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Variable' has no key defined. Define the key for this EntityType.\n  \\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Variables' is based on type 'Variable' that has no keys defined.</p>\n</blockquote>\n\n<p>This has been driving me nuts for the last hour. I have searched my solution and have nothing called 'Variable' at all!</p>\n\n<p>My context looks like this:</p>\n\n<pre><code>public class MyContext : DbContext, IDisposedTracker\n{\n\n    public DbSet&lt;Project&gt; Projects { get; set; }\n\n    public bool IsDisposed { get; set; }\n}\n</code></pre>\n\n<p>My model looks like this:</p>\n\n<pre><code>public class Project\n{\n    [Key]\n    public int Uid { get; set; }\n\n    public string Id { get; set; }\n\n    public string Name { get; set; }\n\n    public string Description { get; set; }\n\n    public List&lt;Task&gt; Tasks { get; internal set; }\n}\n</code></pre>\n\n<p>Task looks like this:</p>\n\n<pre><code>public class Task\n{\n    [Key]\n    public int Uid { get; set; }\n\n    public string Id;\n\n    public string Name;\n}\n</code></pre>\n"}]}
{"total":44785,"page":11,"pagesize":100,"questions":[{"tags":["asp.net-mvc","controllers","redirecttoaction"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":8263153,"title":"How to redirect to a specific URL from within a controller?","body":"<p>I am  trying to redirect user to a specific address, after they submit a form.\nWhat I use is the code below in my Content controller:</p>\n\n<pre><code>return RedirectToAction(\"Business\", new RouteValueDictionary(new { controller = \"Content\", action = \"Business\", Id = business.BusinessID }));\n</code></pre>\n\n<p>It creates a URL like this : \n<strong>www.x.com/Content/Business?Id=13</strong></p>\n\n<p>What I really want is something like this:\n<strong>www.x.com/Content/Business/13</strong></p>\n\n<p>I really don't want the query string to be separated with ? but to be consistent with the rest of the URLs.</p>\n\n<p>Is there anyway to do so?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1576,"score":2,"question_id":8284207,"title":"ASP.NET MVC implement custom validator use IClientValidatable","body":"<p>I ask similar question <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">here</a> but in this question I use another implementation, exactly <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">this way</a> the following codes show my implementations:</p>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>public class Department {\n\n    public long Id { get; set; }\n\n    [IsDateAfter(\"Date2\", true, ErrorMessage = \"O My\")]\n    public DateTime Date1 { get; set; }\n    public DateTime Date2 { get; set; }\n    public string Name1 { get; set; }\n    public string Name2 { get; set; }\n\n}\n</code></pre>\n\n<p><strong>Custom Validator:</strong></p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable {\n\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n  {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext\n validationContext) {\n        var propertyTestedInfo = \nvalidationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null) {\n            return new ValidationResult(string.Format(\"unknown property\n {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue =\n propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is\n DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue) {\n            if (this.allowEqualDates) {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue) {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new\n ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; \nGetClientValidationRules(ModelMetadata metadata, ControllerContext context) {\n        var rule = new ModelClientValidationRule {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] =\n this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] =\n this.allowEqualDates;\n        yield return rule;\n    }\n}\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function (value, element, params) {\nalert(params.propertytested);\nvar startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\nif (!value || !startdatevalue) return true;\nreturn (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) :\n Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p><strong>And My _Layout page (Master page)</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;@ViewBag.Title&lt;/title&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcValidation.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jQuery.IsDateAfter.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n    &lt;div id=\"header\"&gt;\n        &lt;div id=\"title\"&gt;\n            &lt;h1&gt;\n                My MVC Application&lt;/h1&gt;\n        &lt;/div&gt;\n        &lt;div id=\"logindisplay\"&gt;\n            @Html.Partial(\"_LogOnPartial\")\n        &lt;/div&gt;\n        &lt;div id=\"menucontainer\"&gt;\n            &lt;ul id=\"menu\"&gt;\n        &lt;li&gt;@Html.ActionLink(\"Departments\", \"Index\", \"Department\")&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div id=\"main\"&gt;\n        @RenderBody()\n    &lt;/div&gt;\n    &lt;div id=\"footer\"&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>of course in Edit And Create View pages the other script source are as following:</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;\n&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"\ntype=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>A part of Create Page Dom:</strong></p>\n\n<pre><code>&lt;fieldset&gt;\n&lt;legend&gt;Department&lt;/legend&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date1\"&gt;Date1&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date1\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date1\"\n data-val-required=\"The Date1 field is required.\" data-val-isdateafter-\n propertytested=\"Date2\" data-val-isdateafter-allowequaldates=\"False\" data-val-\nisdateafter=\"O My\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\n  for=\"Date1\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date2\"&gt;Date2&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date2\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date2\"\n data-val-required=\"The Date2 field is required.\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\nfor=\"Date2\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I try All of implementation be the same as <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">here</a> but that not work in client side and need to postback, I don't have any other implementation for example register in global.asax \nlike <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">this</a>, Does any one know about it? I really confused, I tried 2 way but none of them give the true answer.</p>\n\n<p><strong>Edit: Find answer and another Question:</strong></p>\n\n<p>I don't know why but when I add source of my script to _Layout page that not work, but when added in Create or Edit View pages that work, does any one know about it? </p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3196,"score":6,"question_id":6404330,"title":"How to deploy an Orchard CMS site, including all settings and content from development environment?","body":"<p>I've been trying to build and deploy a website running on Orchard CMS. I've previously donwloaded Orchard, set up a development environment, made a few modifications to the source, added and modified a theme, added som content and so forth. I've been using the SQL CE as database. Now I want to build and deploy the complete website. I've built a deployment package by running the build script, as described <a href=\"http://www.orchardproject.net/docs/Building-and-deploying-Orchard-from-a-source-code-drop.ashx\">here</a>. It's easy to simply ftp the built package to the hosting server. However, when visiting the site I now get the install a new site procedure. Apparently, the cms settings and content from my development environment have not been reflected in the deployment package. Thus, I need to copy all the content and re-do all the settings, including creating all widgets etc. again. </p>\n\n<p>Do anyone have any good idea on how to publish an Orchard site from a development to a production environment, including the cms settings, widget setings, content, etc? All guides I've found on the web describe how to use WebMatrix to deploy an Orchard site to shared hosting or Azure, but all of those guides end up with having a clean Orchard installation. What I would like to achive is to develop the site locally, and then push the entire site to the hosting server.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13109684,"title":"Entity Framework Code First Error - EntityType 'Variable' has no key defined","body":"<p>I'm using Entity Framework 5 Code First in an ASP.NET MVC 4 project and I'm getting the following error:</p>\n\n<blockquote>\n  <p>One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Variable' has no key defined. Define the key for this EntityType.\n  \\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Variables' is based on type 'Variable' that has no keys defined.</p>\n  \n  <p>Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. </p>\n  \n  <p>Exception Details: System.Data.Entity.ModelConfiguration.ModelValidationException: One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Variable' has no key defined. Define the key for this EntityType.\n  \\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Variables' is based on type 'Variable' that has no keys defined.</p>\n</blockquote>\n\n<p>This has been driving me nuts for the last hour. I have searched my solution and have nothing called 'Variable' at all!</p>\n\n<p>My context looks like this:</p>\n\n<pre><code>public class MyContext : DbContext, IDisposedTracker\n{\n\n    public DbSet&lt;Project&gt; Projects { get; set; }\n\n    public bool IsDisposed { get; set; }\n}\n</code></pre>\n\n<p>My model looks like this:</p>\n\n<pre><code>public class Project\n{\n    [Key]\n    public int Uid { get; set; }\n\n    public string Id { get; set; }\n\n    public string Name { get; set; }\n\n    public string Description { get; set; }\n\n    public List&lt;Task&gt; Tasks { get; internal set; }\n}\n</code></pre>\n\n<p>Task looks like this:</p>\n\n<pre><code>public class Task\n{\n    [Key]\n    public int Uid { get; set; }\n\n    public string Id;\n\n    public string Name;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1395,"score":1,"question_id":8495706,"title":"MVC Html.ActionLink with post funtionality?","body":"<p>I'm checking to see if anyone has written an MVC extension for Html.ActionLink that you can pass in Post parameters like such:</p>\n\n<pre><code>&lt;% Html.ActionLink(\"Click me\", \"Index\", \"Home\", new { MyRouteValue = \"123\" }, null, new { postParam1 = \"a\", postParam2 = \"b\" }); %&gt;\n</code></pre>\n\n<p>That would render the link like normal but having an onClick event that submits an also rendered form with an Action url for the Action, Controller, and Route Values with additional hidden inputs from the Post Parameters like such:</p>\n\n<pre><code>&lt;a href=\"#\" onClick=\"$('#theform').submit(); return false;\"&gt;Click me&lt;/a&gt;\n&lt;form id=\"theform\" action=\"/Home/Index/123\" method=\"post\"&gt;\n   &lt;input type=\"hidden\" name=\"postParam1\" value=\"a\"&gt;\n   &lt;input type=\"hidden\" name=\"postParam2\" value=\"b\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I'm looking to redirect users to various pages with potentially a lot of data. Not only from page to page, but from email to page also. This would be highly reusable and I think would clean up a lot of code, and would save a bunch of time writing this if its already floating around out there. I hate recreating the wheel when I don't have to. Thanks!</p>\n"},{"tags":["asp.net-mvc","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13111749,"title":"Upload multiplr files using ASP.Net MVC","body":"<p>I need a open dialog to select many files and then I want to handle the files in controller. How should the view look like? I'm using aspx not razor.</p>\n\n<p>with this code we can select just one file and then use it in controller</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    &lt;input type=\"file\" id=\"img1\" name=\"img1\" /&gt;\n&lt;/div&gt; \n</code></pre>\n\n<p>but what about selecting multiple files? (By Shift or Ctrl keys)</p>\n"},{"tags":[".net","asp.net-mvc","caching","asp.net-caching"],"answer_count":7,"favorite_count":9,"up_vote_count":11,"down_vote_count":0,"view_count":7744,"score":11,"question_id":2105481,"title":"how to cache css, images and js?","body":"<p>I would like to have images, css, and javascript cached client-side on their browser when they load up a web page. There are so many different types of caching I am confused as to which ones to use with asp.net mvc. </p>\n\n<p>Would it also be possible to have their browsers check for new or modified versions of these files? </p>\n\n<p>Thanks!</p>\n"},{"tags":[".net","asp.net-mvc","http","caching"],"answer_count":7,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":5079,"score":7,"question_id":936626,"title":"How can I force a hard refresh (ctrl+F5)?","body":"<p>We are actively developing a website using .Net and MVC and our testers are having fits trying to get the latest stuff to test. Every time we modify the style sheet or external javascript files, testers need to do a hard refresh (ctrl+F5 in IE) in order to see the latest stuff.</p>\n\n<p>Is it possible for me to force their browsers to get the latest version of these files instead of them relying on their cached versions? We're not doing any kind of special caching from IIS or anything.</p>\n\n<p>Once this goes into production, it will be hard to tell clients that they need to hard refresh in order to see the latest changes.</p>\n\n<p>Thanks!</p>\n"},{"tags":[".net","asp.net-mvc","action"],"answer_count":5,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":10761,"score":18,"question_id":1296680,"title":".NET MVC Call method on different controller","body":"<p>Can anybody tell me how to call a method on a different controller from within an action method? I don't want to redirect. I want to call a method on a different controller that returns a string and use the response within my action method. </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","linux","mono"],"answer_count":3,"favorite_count":11,"up_vote_count":26,"down_vote_count":0,"view_count":4156,"score":26,"question_id":1172429,"title":"Deploy ASP.NET MVC on Linux: Best Practices, Tools & Suprises","body":"<p>I'm wondering about best practices to develop ASP.NET MVC apps with an option to deploy on Linux. If you are creating these kinds of MVC apps,</p>\n\n<ul>\n<li>What Linux/Mono platform are you targeting?</li>\n<li>How much of the development are you doing on Windows and how much on Linux?</li>\n<li>Are you using an ORM to abstract the database? Which one?</li>\n<li>Are you running a build engine on Linux? What about tests?</li>\n<li>What other tools are you using?</li>\n<li>How much additional work has it been to target Linux in addition to Windows?</li>\n<li>What ugly or pleasant suprises have you encountered?</li>\n</ul>\n"},{"tags":[".net","xml","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":135,"score":1,"question_id":2592885,"title":"What is your prefered way to return XML from an ActionMethod in Asp.net MVC?","body":"<p>I am displaying charts that load the data asynchronously because the searches are the work to fetch the data is quite heavy. The data has to be return as XML to make the chart library happy.<br>\nMy ActionMethods return a ContentResult with the type set as text/xml. I build my Xml using Linq to XML and call ToString. This works fine but it's not ideal to test.<br>\nI have another idea to achieve this which would be to return a view that builds my XML using the XSLT View engine.  </p>\n\n<p>I am curious and I always try to do the things \"the right way\". So how are you guys handling such scenarios?   </p>\n\n<p>Do you implement a different ViewEngine (like xslt) to build your XML or do you Build your XML inside your controller (Or the service that serves your controller)?</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Since I need this to pass the data to a Charting Library, <strong>I have to follow their xml structure</strong>. Their notation is not the way i want to build my model classes at all. That's why I build the XML myself using Linq to XML and wonder if a template would be better.<br>\n<strong>Simple serialization is not what I look for</strong></p>\n"},{"tags":["asp.net",".net","xml","asp.net-mvc"],"answer_count":5,"favorite_count":13,"up_vote_count":57,"down_vote_count":0,"view_count":14031,"score":57,"question_id":134905,"title":"What is the best way to return XML from a controller's action in ASP.NET MVC?","body":"<p>What is the best way to return XML from a controller's action in ASP.NET MVC?  There is a nice way to return JSON, but not for XML.  Do I really need to route the XML through a View, or should I do the not-best-practice way of Response.Write-ing it?</p>\n"},{"tags":[".net","xml","asp.net-mvc","actionresult"],"answer_count":5,"favorite_count":9,"up_vote_count":34,"down_vote_count":0,"view_count":14490,"score":34,"question_id":878695,"title":"How to return an XML string as an action result in MVC","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/134905/what-is-the-best-way-to-return-xml-from-a-controllers-action-in-asp-net-mvc\">What is the best way to return XML from a controller&#39;s action in ASP.NET MVC?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm able to return JSON and partial views (html) as a valid ActionResult, but how would one return an XML string?</p>\n"},{"tags":[".net","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":443,"score":1,"question_id":11101148,"title":"Entity Framework 5 Enums with Description attribute using Database First","body":"<p>I would like to something like this:</p>\n\n<pre><code>public enum States\n{\n    California,\n    [Description(\"New Mexico\")]\n    NewMexico,\n    [Description(\"New York\")]\n    NewYork,\n    [Description(\"South Carolina\")]\n    SouthCarolina,\n    Tennessee,\n    Washington\n}\n</code></pre>\n\n<p>So that when I'm making a Drop Down List using .NET MVC I can use spaces in my names. If I used Code First then I could do this but I am using Database First and the .edmx designer doesn't allow attributes on the generated states (as far as I know!). Any ideas on how I can do this? I am using .NET 4.5 and EF 5 beta.</p>\n"},{"tags":[".net","wpf","asp.net-mvc","web-applications","xbap"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":155,"score":2,"question_id":12770054,"title":"WPF (XBAP) vs ASP.NET MVC on Intranet?","body":"<p>I need to make an application that will be used within an organization. They need it to be available on their network. I have considered two options ASP.NET MVC and WPF (web). </p>\n\n<p>WPF Web Browser applications can be accessed on IE and Firefox.</p>\n\n<p>What are the pros and cons of using ASP.NET MVC and WPF over the Intranet ? </p>\n\n<p>Should I go with ASP.NET MVC or WPF ?</p>\n"},{"tags":["asp.net-mvc","url","deployment","webfarm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13108497,"title":"Does urls need to constructed dynamically for webfarm?","body":"<p>We are planning to shift our asp .net mvc application to webfarm with loadbalancer, </p>\n\n<p>I am concern about many hardcoded urls available in the application like.</p>\n\n<pre><code>&lt;a href=\"https://root:xxx/home/index\"&gt;Index&lt;/a&gt;\n</code></pre>\n\n<p>and </p>\n\n<p><strong>this.RedirectToAction(x=>x.Index());</strong></p>\n\n<p>and </p>\n\n<p><strong>Response.Redirect(\"~/home/index\");</strong></p>\n\n<p>Does this url need to be dynamically constructed inorder to redirect to some specific location, based on RRA algorith.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":773,"score":0,"question_id":5279483,"title":"I cannot Model.Count in view page","body":"<p>I am responsible to maintain legacy system. The system was developed from Visual Studio 2008 and MVC 1.0. However, the version of visual studio I have is 2010. Now I am faced with new problem that Model object in View cannot use the method from original class. The following is header of view file.</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"VB\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage(Of System.Linq.IQueryable(Of MVCApplication.opportunity))\"%&gt;\n</code></pre>\n\n<p>In the view part, I have following code.</p>\n\n<pre><code>    &lt;%  If (Model.Count &lt;&gt; 0) Then%&gt;\n</code></pre>\n\n<p>However, when I try to use member 'Count', there is System.MissingMemberException: Public member 'Count' on type 'DataQuery(Of opportunity)' not found.</p>\n\n<p>In debug mode, model contain the same data as the controller. However, it seems the view page cannot access them. Do you have any suggestion how to fix it?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":668,"score":1,"question_id":2639103,"title":"Visual Studio 2010 RTM started giving me 'does not exist in the current context errors'","body":"<p>Just installed the trial version of Visual Studio 2010 RTM.</p>\n\n<p>Now I keep getting :<br /></p>\n\n<p>The name 'NoPanel' does not exist in the current context<br /></p>\n\n<p>Errors (where no panel is just about any control in the .aspx file)\nalso I got several errors trying to deploy pages and it would not send the .cs file over ...or pdfs in the Content directory (even though I had copy always set)...  </p>\n\n<p>This is happening on a pair of  mixed ASP.NET MVC and Webforms sites.</p>\n"},{"tags":["jquery","html","asp.net-mvc","asp.net-mvc-2"],"answer_count":14,"favorite_count":9,"up_vote_count":35,"down_vote_count":0,"view_count":70016,"score":35,"question_id":2194992,"title":"JQuery - $ is not defined","body":"<p>I have a simple jquery click event</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function() {\n        $('#post').click(function() {\n            alert(\"test\"); \n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>and a jquery reference defined in the site.master</p>\n\n<pre><code>&lt;script src=\"&lt;%=ResolveUrl(\"~/Scripts/jquery-1.3.2.js\")%&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have checked that the script is being resolved correctly, i'm able to see the markup and view the script directly in firebug, so i must be being found. However i am still getting...</p>\n\n<pre><code>$ is not defined\n</code></pre>\n\n<p>and non of the jquery works. I've also tried the various variations of this like $(document).ready and jQuery etc.</p>\n\n<p>It's an MVC 2 app on .net 3.5, i'm sure i'm being really dense, everywhere on google says check the file is reference correctly, which i have checked and checked again, please advise! :/</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":83,"score":0,"question_id":13000510,"title":"What is the difference between a function with HttpGet or HttpPost Attribute and a function with no attribute?","body":"<p>I'm following this tutorial:</p>\n\n<p><a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view</a></p>\n\n<p>It describes a situation when a user click a button and then a function without an attribute is called.</p>\n\n<p>But when a function with HttpPost attribute is added, this function is called and not the function without the attribute.</p>\n\n<p>The button initiates Html.BeginForm() which creates a post request. So why did the function without the attribute got called?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13110978,"title":"play music while slideshow display in mvc","body":"<p>I want to know how can I play in background sound from mp3 file while displaying image slideshow in mvc3. \nCan someone give some example please? \nAlso, as second part of the question if someone has an idea, if there are 3 images and there are 3 minutes music, I want the images to be changed every minute, if its possible.</p>\n\n<p>Thanks in advance, Laziale</p>\n"},{"tags":["c#","asp.net-mvc","facebook","sso"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13109687,"title":"Same username with custom and facebook login","body":"<p>I've a site with user registration (ASP.Net Membership) and Facebook login button.</p>\n\n<p>I use <code>SetAuthCookie(model.UserName...</code> in both login acions and everithing seems to work!</p>\n\n<p>Now... what if a FB username is the same of already registered user?</p>\n\n<p>Is there a best practice?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13107585,"title":"Validating that a Reason field is filled if Date field is today","body":"<p>I use ASP.NET MVC4 in my solution. I have the ViewModel below where I would like to validate that the field EmergencyReason is filled only if the field Date is today. I try this:</p>\n\n<pre><code>public class LoadingViewModel\n{\n    public DateTime Date { get; set; }\n\n    [RequiredIf(\"Date\", Comparison.IsEqualTo, DateTime.Today)]\n    public string EmergencyReason { get; set; }\n    ...\n}\n</code></pre>\n\n<p>It doesn't work. The third argument of RequiredIf must be a constant expression, ...</p>\n\n<p>Any idea how can I force the user to enter an EmergencyReason only if Date field is today?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","razor","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13109812,"title":"@Html.Partial return: The model item passed into the dictionary is of type __ but this dictionary requires a model item of type __","body":"<p>I am trying to add a partial view to my MVC4 web application and I receive the following exception:</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type '...Meeting', but this dictionary requires a model item of type 'System.Collections.Generic.List`1[...UserProfile]'.</p>\n</blockquote>\n\n<p>what I did so far:</p>\n\n<ol>\n<li>i added to my controller this function:</li>\n</ol>\n\n<blockquote>\n<pre><code>public PartialViewResult GetUsers()\n        {\n            var usersList = (from users in db.Users select users).ToList();\n            return PartialView(usersList);\n        }\n</code></pre>\n</blockquote>\n\n<ol>\n<li>I added the parital view:</li>\n</ol>\n\n<blockquote>\n<pre><code>@model List&lt;UserProfile&gt;\n@{\n &lt;select id=\"Meeting_SetToUser\" name=\"Meeting.SetToUser\"&gt;\n        @foreach (var item in Model)\n        {\n            &lt;option value=\"@item.UserId\"&gt;@item.FirstName @item.LastName&lt;/option&gt;\n        }\n    &lt;/select&gt;\n}\n</code></pre>\n</blockquote>\n\n<ol>\n<li>i called the partialview from my view:</li>\n</ol>\n\n<blockquote>\n<pre><code>@Html.Partial(\"GetUsers\")\n</code></pre>\n</blockquote>\n\n<p>can you please direct me to were I am doing anything wrong?</p>\n\n<p>Thank you!</p>\n"},{"tags":["javascript","asp.net-mvc","deployment","routing","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13095292,"title":"Setting up a common route for javascript calls in ASP.NET MVC project","body":"<p>I have a bizarre routing issue with my ASP.NET MVC project that I hope you guys can help me with.</p>\n\n<p>Overall everything works fine when I run the project off my localhost or run it on the server while it's deployed directly at <code>http://myServerName</code>. The problems start when I deploy the application to various enviornments on the server located under different virtual directories. For example: <code>http://myServerName/QaEnviornment</code> or <code>http://myServerName/TestEnviornment</code></p>\n\n<p>The problem is that all Javascript calls to application URLs ignore my environment virtual directories and fail.\nFor example on my QA server whenever I have to make an Ajax call I take a standard approach such as:</p>\n\n<pre><code>var myUrl = '/ControllerName/ActionMethodName/'\n$.ajax({url:myUrl,success:function(){Do stuff} })\n</code></pre>\n\n<p>Because my application is deployed on <code>http://myServerName/QaEnviornment</code>, when rendered I expect myUrl to be <code>http://myServerName/QaEnviornment/ControllerName/ActionMethodName</code>. Instead it comes back <code>as http://myServerName/ControllerName/ActionMethodName</code> and ofcourse fails.</p>\n\n<p>To get around this for now I declared a global Javascript variable that contains the environment folder name and when I build URLs for javascript calls I have to remember to ALWAYS construct them as var <code>myUrl = myGlobalFolderVar + '/ControllerName/ActionMethodName/'</code></p>\n\n<p>Using a global Javascript variable to get around this issue seems as a bad solution to me. Is there anything I can do to get routing to work properly so whenever javascript calls are made whatever subfolder the application is running under is always included in the URL ? </p>\n\n<p>Thank you in advance !</p>\n"},{"tags":["asp.net-mvc","jquery-ajax","parameter-passing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":13100198,"title":"MVC: pass parameter to action using Jquery.ajax()","body":"<p>I'm pretty new to <code>MVC</code>. I need to make <code>ajax</code> call to an <code>Action</code> with parameters using <code>html.Action()</code>. I'm unable to pass this..</p>\n\n<p>Hope it will be helpful for other MVC begineers as well..</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;%: Html.ActionLink(\"Add Race\", \"AddRace\", \n        new {eventId = Model.EventId, fleetId=Model.SelectedFleet.ID}, \n        new{@onclick=string.Format(\"return checkFleetAddedandScroing()\")}) %&gt;\n</code></pre>\n\n<p><strong>Jquery:</strong></p>\n\n<pre><code> function checkFleetAddedandScroing() {\n        debugger;\n        $.ajax({\n            type: \"GET\",\n            url: '&lt;%=Url.Action(\"CheckFleetExists\")%&gt;',\n            dataType: \"json\",\n            cache: false,\n            success: function (data, textStatus) {\n                data = eval(\"(\" + data + \")\");\n                if (data == true) {\n                    return true;\n                }\n                else {\n                    alert(\"Cannot Add race becasue you have not yet added any fleets and fleet scoring is checked.\");\n                    return false;\n                }\n            }, //success\n            error: function (req) {\n\n            }\n        });           \n    }\n</code></pre>\n\n<p><strong>Action:</strong></p>\n\n<pre><code>  public JsonResult CheckFleetExists(Guid fleetId )\n    {\n        bool exists = false;\n        try\n        {\n            exists = !db.Races.Any(r =&gt; r.FleetID == fleetId);\n        }\n        catch\n        {\n        }\n        return Json(exists, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>I need to pass <code>fleetid</code> to action which is in <code>Model.SelectedFleet.ID</code>. Its being used somewhere on pages. But i'm unable to use that somehow..</p>\n\n<p>please suggest where i'm doing wrong...</p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13105745,"title":"linq nested group by","body":"<p>I have a table Assessment, which contains {rated,rater,assessment_id} another table is Category_Scores which contains {score, assessment_id}. I am attempting to group this by rated group by raters, group by scores. Currently I have this LINQ query</p>\n\n<pre><code>        var query = (from a in db.Assessments\n                     join u in db.Users on a.rated equals u.user_id\n                     join u2 in db.Users on a.rater equals u2.user_id\n                     join tm in db.Team_Members on u.user_id equals tm.user_id\n                     join t in db.Teams on tm.team_id equals t.team_id\n                     join c in db.Category_Scores on a.assessment_id equals c.assessment_id\n                     join cat in db.Categories on c.category_id equals cat.category_id\n\n                     group new KyubiViewModel\n                     {\n                         rated = u.firstName + \" \" + u.lastName,\n                         rater = u2.firstName + \" \" + u2.lastName,\n                         score = c.score,\n                         category_name = cat.name,\n                         categoryid = c.category_id,\n\n                     }\n                     by new { rated = u.firstName + \" \" + u.lastName,rater = u2.firstName + \" \" + u2.lastName }).ToList();\n</code></pre>\n\n<p>This results in </p>\n\n<pre><code>  { rated = John Will, rater = Jess James}\n   10 [Math]\n   10 [Science]\n\n  { rated = John Will, rater = Mike Rand}\n   7 [Math]\n   7 [Science]\n</code></pre>\n\n<p>I want it to look like</p>\n\n<pre><code> { rated = John Will }\n     rater:        Math      Science\n     Jess James     10         10\n     Mike Rand      7          7\n\n { rated = Jess James }\n     rater:        Math      Science\n     John Will      9          9\n     Mike Rand      7          7\n</code></pre>\n\n<p>Here's my View </p>\n\n<pre><code>     &lt;table&gt;\n@foreach (var group in Model)\n{\n &lt;tr&gt;\n &lt;td&gt;@group.Key &lt;/td&gt;\n &lt;/tr&gt;\n    foreach (var m in group)\n    {\n\n      &lt;tr&gt;\n      &lt;td&gt;@m.score - [@m.category_name]&lt;/td&gt;\n &lt;/tr&gt;\n\n     }\n}\n\n&lt;/table&gt;\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n\n<p>With ChaseMedallion's help i was able to have this in my view </p>\n\n<pre><code> { rated = John Will }\n         rater:        \n         Jess James     10[Math]    \n         Jess James     10[Science]    \n         Mike Rand      7[Math]          \n         Mike Rand      7[Science]\n</code></pre>\n\n<p>I wish to have it this way if possible</p>\n\n<pre><code> { rated = John Will }\n     rater:        Math      Science\n     Jess James     10         10\n     Mike Rand      7          7\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":12,"up_vote_count":35,"down_vote_count":0,"view_count":12540,"score":35,"question_id":776781,"title":"Problem using Html.ActionLink to call action on different controller","body":"<p>I am trying to navigate between controllers using ActionLink.</p>\n\n<p>I will tell my problem with an example. </p>\n\n<p>I am on Index view of Hat controller</p>\n\n<p>I am trying to use below code to create a link to Details action of Product controller.</p>\n\n<pre><code>&lt;%= Html.ActionLink(\"Details\", \"Details\", \"Product\", new { id=item.ID }) %&gt;\n</code></pre>\n\n<p>Instead of creating me a link to Details on Product controller this generates a link to Details action under Hat controller and appends a Length parameter to the end of it:</p>\n\n<p>Hat/Details/9?Length=7</p>\n\n<p>I am not able to use HTML.ActionLink to switch between controllers because of this problem. I will appreciate if you can point me to what I am doing wrong. Thanks</p>\n\n<p>PS: I am using the default route setting that comes with mvc</p>\n\n<p>routes.MapRoute(\"Default\", \"{controller}/{action}/{id}\", new { controller = \"Home\", action = \"Index\", id = \"\" } );</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-membership","asp.net-4.0"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13109591,"title":"Generating a valid Guid to pass to the SqlMembershipProvider.CreateUser() methods Object providerUserKey parameter","body":"<p>No matter how I try to pass the Guid object it tells me the reference is set to null or just sees it as invalid value. When using <code>Membership.CreateUser()</code> directly it works fine without the need to pass this object, however I am wanting to use the e-mail as the username and want to use the <code>EmailAsUsernameMembershipProvider</code> class to automatically set username to e-mail value. The membership provider in question is the <code>System.Web.Providers.DefaultMembershipProvider</code></p>\n\n<pre><code>[HttpPost]\n        public ActionResult Register(RegisterModel RegisterModel, string returnUrl)\n        {\n            ViewBag.ShowSignUpErrors = true;\n            if (ModelState.IsValid)\n            {\n                // Attempt to register the user\n                MembershipCreateStatus createStatus;\n                Guid key = Guid.NewGuid();\n                EmailAsUsernameMembershipProvider Emp = new EmailAsUsernameMembershipProvider();\n\n                var User = Emp.CreateUser(RegisterModel.Password, RegisterModel.Email, null, null, true, key, out createStatus);\n\n                if (createStatus == MembershipCreateStatus.Success)\n                {\n                    Roles.AddUserToRole(User.UserName,\"StandardUser\");\n                    FormsAuthentication.SetAuthCookie(RegisterModel.Email, false /* createPersistentCookie */);\n                    returnUrl = String.IsNullOrEmpty(returnUrl) ? Url.Action(\"Index\", \"Education\") : returnUrl;\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\", ErrorCodeToString(createStatus));\n                }\n            }\n\n            // If we got this far, something failed, redisplay form\n            LogOnAndRegisterModel model = new LogOnAndRegisterModel() { RegisterModel = RegisterModel };\n            return View(\"LogOn\",model);\n        }\n\n\n\n\npublic class EmailAsUsernameMembershipProvider : SqlMembershipProvider\n{\n    public MembershipUser CreateUser(string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)\n    {\n        return base.CreateUser(email, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, out status);\n    }\n    private new MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)\n    {\n        return base.CreateUser(email, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, out status);\n    }\n\n    public override bool RequiresUniqueEmail\n    {\n        get\n        {\n            return true;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","wcf","date-formatting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12976600,"title":"Is there a way to convert a date format when referencing it from an external service?","body":"<p>I am trying to convert a date from <code>19/10/2012 00:00:00</code> to <code>19/10/2012</code>. I can't state the date type in the viewmodel like <a href=\"http://stackoverflow.com/questions/4679352/converting-datetime-format-using-razor\">here</a> as code is as below:</p>\n\n<p>Viewmodel:</p>\n\n<pre><code>public Appointment Appointment {get; set;}\n</code></pre>\n\n<p>I am aware that mapping is an option but would like to see if an alternate option is available as this will make reusing the code easier and if the service changes at all then mapping will complicate things.</p>\n\n<p>Mock service example:</p>\n\n<pre><code>public class Appointment\n    {\n        [DataMember]\n        public DateTime AppointmentDate { get; set; }  \n        [DataMember]\n        public Identifier AppointmentIdentifier { get; set; }\n        [DataMember]\n        public string Location { get; set; }\n        [DataMember]\n\n    ...etc\n</code></pre>\n"},{"tags":["asp.net-mvc","json","jquery-ajax","asp.net-mvc-4","postback"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13108772,"title":"Jquery postback not working on mvc 4 client side","body":"<p>I'm trying to simply create a json postback so I can update some controls on the client side.  I cant find a good example to show this.  </p>\n\n<p>Here's what I got so far which appears to be firing off an alert from the controller but keeps saying 'undefined' object on client side. </p>\n\n<p>What is best practice method of achieving this as I dont know how to debug javascript in the same manner as regular code?  :( I'm using vs2012 express, mvc 4, jquery 1.7.1 and jquery mobile 1.1.</p>\n\n<p>My controller  Time/Index:</p>\n\n<pre><code>[HttpPost]\npublic JsonResult Index()\n{\n     var msg = \"hello there\";  //test message\n     return Json(msg);\n}\n</code></pre>\n\n<p>My client side:</p>\n\n<pre><code>function populateUserDetails() {\n     var user = {};\n     user.UserId = $(\"#UserId\").val();    // potential fields i may use once i get it working\n     $.post('Time/Index', user, updateFields, 'json');\n };\n\nupdateFields = function (data) {\n    alert(\"hi \" + data.msg);\n    $(\"#textEntered\").val(data.msg);\n};\n</code></pre>\n\n<p><em><strong></em>***<em></strong> UPDATE <strong></em>**<em>*</em>**<em>*</em>***</strong></p>\n\n<p>fixed it by wrapping returned object in controller into a temporary class:</p>\n\n<pre><code>    [HttpPost]\n    public JsonResult Index()\n    {\n        var response = new {msg = \"hello there\"};   //here's what i changed\n        return Json(response);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13105207,"title":"How do I prevent entity framework from creating extra tables","body":"<p>I have an issue when I upgraded entity framework to 5.0, to illustrate:</p>\n\n<pre><code>public class MyClass\n{\n   public Foo foo;\n\n   public ICollection&lt;Student&gt; Students{ get; set; }\n\n}\n\npublic class Student\n{\n   public int Id {get; set;}\n   public string s {get; set;}\n}\n\npublic class Foo\n{\n  public int data {get; set}\n  ...\n}\n</code></pre>\n\n<p>EF correctly creates a table called Students because I have defined a one-to-many relationship from MyClass to Student. I am using class Foo as encapsulation and have a 1-to-1 relationship. </p>\n\n<p>EF 4.0 did not create a separate table for <code>Foo</code>, instead used the property data as <code>Foo_data</code> within the MyClass table. With EF 5.0 I am getting another table for <code>Foo</code>.</p>\n\n<p>How can I tell EF not to create a table for <code>Foo</code>? </p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":214,"score":0,"question_id":6628012,"title":"jQuery Ready code not executing","body":"<p>I have the following code in my <code>_Layout.cshtml</code>, targeted at a view once removed, through a layout nested one level below <code>_Layout.cshtml</code>.  </p>\n\n<pre><code>&lt;title&gt;@ViewBag.PageTitle&lt;/title&gt;\n&lt;link rel=\"icon\" type=\"image/png\" href=\"@Url.Content(\"~/Images/favicon.png\")\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"@Url.Content(\"~/Content/Blueprint/screen.css\")\" media=\"screen, projection\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"@Url.Content(\"~/Content/Blueprint/print.css\")\" media=\"print\" /&gt;\n@Html.Telerik().StyleSheetRegistrar().DefaultGroup(group =&gt; group.Add(\"telerik.common.css\").Add(\"telerik.simple.css\"))\n@RenderSection(\"MainBodyStyling\", false)\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        debugger;\n        //$(\"iframe\").width($(\"iframe\").contents().find(\"table\").width());\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I cannot get the jQuery code to execute, in Chrome or Firefox 5.0, even just the debugger call.  This is with jQuery 1.4.4, inside an MVC3 project.  The code works when I paste it into both Firebug and Chrome JS consoles, so I know the code itself is not at fault.  </p>\n\n<p><strong>CORRECTION:</strong>  I added the erroneous document with quotes as a last ditch attempt.  I had tried my default (I'm quite used to working with jQuery), <code>$(function () {</code> syntax, with no difference.  The real problem is not my syntax, but correct code not executing.  I have removed the quotes with no difference at all.</p>\n\n<p><strong>ADDENDUM:</strong>  If I put a breakpoint on the <code>debugger</code> line, the code stops at the breakpoint in the Chrome console.  I have no idea what this is about.</p>\n"},{"tags":["c#","asp.net-mvc","performance","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13103852,"title":"I want to improve performance of my Edmx by using AutoDetectChanges","body":"<p>I have a reasonably large edmx generated from a database and I have been working on performance recently to improve my application I have read a number of articles in a variety of places some here some not</p>\n\n<p>this one on disabling auto detect of changes <a href=\"http://msdn.microsoft.com/en-us/data/jj556205.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/data/jj556205.aspx</a> </p>\n\n<p>this one on improving performance on delete <a href=\"http://stackoverflow.com/questions/10103310/dbcontext-is-very-slow-when-adding-and-deleting\">DbContext is very slow when adding and deleting</a></p>\n\n<p>this one (which I think is pretty good) <a href=\"http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework\" rel=\"nofollow\">http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework</a></p>\n\n<p>I am already using myentities.tablename.MergeOption = MergeOption.NoTracking, i am using compiledqueries, I am pregenerated my View using EdmGen, I have reduced the data I am fetching etc..  and, of course,  I have gained performance in leaps and bounds so that a page that was loading in 54 seconds is now taking 16.1 seconds - however I have to get it to 3 seconds So I am still looking for the next improvement </p>\n\n<p>so the research is all well and great and as a result  I have upgraded to the latest EntityFramework, I have regenerated my .edmx from db etc... and tried a variety of things but I simply cannot find a myEntities.Configuration.AutoDetectChangesEnabled in order to set it to false. Now I must be missing a simple easy trick - how do I get my edmx to have this option.</p>\n\n<p>I am in this environment.Net 4.0.3, visual studio 2010, latest version of EntityFramework, MVC 4.0... All I need is somebody to say \"aha\" you need to go and do this....</p>\n\n<p>Currently if I delete 1000 records from one of my larger tables (134million rows) it takes nearly 10 minutes to savechanges. So from what I have read AutoDetectChangesEnabled is what I need to alter but it doesnt exist in my classes? where is it what must I do to get it?</p>\n\n<p>Any help appreciated I am trying to solve this one quickly</p>\n\n<p>Regards Julian</p>\n"},{"tags":["asp.net-mvc","mini-profiler"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":451,"score":2,"question_id":8255325,"title":"Mini profiler not displaying ajax request information?","body":"<p>I'm using the mini-profiler on my asp.net MVC 3 application.  I've implemented the profiler using the mvc nuget package. Everything works ok for standard page requests i get profile information sql everything. </p>\n\n<p>However ajax requests don't seem to display initially.  Just to let me confirm the request are completed without error.  I've debugged this and they complete they also return http 200 responses in fiddler.  </p>\n\n<p>There is no request by the mini profiler that accompanies the ajax request.  When i then navigate to another page i.e. a standard page request all the ajax request that were made on the last page are now displayed.  </p>\n\n<p>This is my mini profiler configuration page in App_Start</p>\n\n<pre><code>public static class MiniProfilerPackage\n    {\n        public static void PreStart()\n        {\n            //Setup sql formatter\n            MiniProfiler.Settings.SqlFormatter = new OracleFormatter();\n\n            //Make sure the MiniProfiler handles BeginRequest and EndRequest\n            DynamicModuleUtility.RegisterModule(typeof(MiniProfilerStartupModule));\n\n            //Setup profiler for Controllers via a Global ActionFilter\n            GlobalFilters.Filters.Add(new ProfilingActionFilter());\n\n            //Settings            \n            MiniProfiler.Settings.PopupShowTimeWithChildren = true;\n            MiniProfiler.Settings.PopupShowTrivial = false;            \n\n            //Ignore glimpse details in miniprofiler\n            var ignored = MiniProfiler.Settings.IgnoredPaths.ToList();\n            ignored.Add(\"Glimpse.axd\");\n            MiniProfiler.Settings.IgnoredPaths = ignored.ToArray();\n        }\n\n        public static void PostStart()\n        {\n            // Intercept ViewEngines to profile all partial views and regular views.\n            // If you prefer to insert your profiling blocks manually you can comment this out\n            var copy = ViewEngines.Engines.ToList();\n            ViewEngines.Engines.Clear();\n            foreach (var item in copy)\n            {\n                ViewEngines.Engines.Add(new ProfilingViewEngine(item));\n            }\n        }\n    }\n\n    public class MiniProfilerStartupModule : IHttpModule\n    {\n        public void Init(HttpApplication context)\n        {\n            context.BeginRequest += (sender, e) =&gt;\n            {\n                var request = ((HttpApplication)sender).Request;\n\n                MiniProfiler.Start();\n            };\n\n            //Profiling abadened if user is not in the admin role\n            context.PostAuthorizeRequest += (sender, e) =&gt;\n            {\n                if (!context.User.IsInRole(\"Admin\"))\n                    MiniProfiler.Stop(discardResults: true);\n            };\n\n            context.EndRequest += (sender, e) =&gt;\n            {\n                MiniProfiler.Stop();\n            };\n        }\n\n        public void Dispose() { }\n    }\n</code></pre>\n\n<p>Is there some configuration that is required or  potential issues I should be aware of? </p>\n"},{"tags":["c#","jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13107750,"title":"How to fill document header from jqgrid data","body":"<p>ASP .NET MVC2 page contains order header data (order number, customer, order data etc):</p>\n\n<pre><code>&lt;form id='_form' class='form-fields' action='' onsubmit='SaveDocument();return false;'&gt;\n&lt;input id='Number' name='Number' /&gt;\n\n&lt;select id='PaymentTerm' name='PaymentTerm'&gt;\n&lt;option value=''&gt;&lt;/option&gt;&lt;option value='0'&gt;Cash&lt;/option&gt;\n&lt;option value='10'&gt;10 days&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>and order rows presented in jqgrid.</p>\n\n<p>I'm looking for a way to fill order headcer data from json date from controller like\nlike jqgrid fills data.\nTo minimize request maybe it is best to return header data in jqgrid data request.\nFor this additional parameter documentId is passed to controller.</p>\n\n<p>GetData returns document header as name value pairs in document object.\nHow to assign those values to form elements in browser in jqgrid loadcomplete or other place ?</p>\n\n<pre><code>public JsonResult GetData(int page, int rows, string filters,\n          int documentId )\n\n{\n    var query = ...;\n    var totalRecords = query.Count();\n\n    var documentHeader = new FormCollection();\n    // In production code those values are read from database:\n    documentHeader.Add(\"Number\", 123);  // form contains input type='text' name='Number' element\n    documentHeader.Add(\"PaymentTerm\", \"10\"); // form contains select name='PaymentTerm' element\n    ...\n\n    return Json(new {\n        total = page+1,\n        page=page,\n        document = documentHeader,\n        rows = (from item in query\n                select {\n                    id = item.Id.ToString(),\n                    cell = new[] {\n                        item.ProductCode,\n                        item.ProductName,\n                        item.Quantity,\n                        item.Price\n                    }\n                 }).ToList()\n    },\n    JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1320,"score":1,"question_id":4869583,"title":"ASP.NET MVC Form loaded via ajax submits multiple times","body":"<p>I have a partial view containing an ajax form. This partial view is loaded onto my page via an ajax call. I can edit the fields and submit the form and everything works normally. However, if I reload the form N times, the form will submit N times when the save button is clicked.</p>\n\n<p>here is the code for the partial view....</p>\n\n<pre><code>@model blah blah...\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\"type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;div id=\"modalForm\"&gt;\n  @using (Ajax.BeginForm(\"Edit\", \"Info\", new{id = Model.UserId}, AjaxOptions{OnSuccess = \"infoUpdate\" }))\n  {\n\n\n       //FORM FIELDS GO HERE\n\n      &lt;input type=\"submit\" value=\"Save\" /&gt;\n\n\n  }\n&lt;/div&gt;\n</code></pre>\n\n<p>What am I doing wrong that is causing this behavior?</p>\n"},{"tags":["c#","asp.net-mvc","module","content-management-system","reusable-code"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12935084,"title":"How to turn on/off code modules?","body":"<p>I am trying to run multiple sites using single code base and code base consist of the following module (i.e. classes)</p>\n\n<ul>\n<li>User module</li>\n<li>Q &amp; A module</li>\n<li>Faq module</li>\n</ul>\n\n<p>and each class works on MVC pattern i.e. it consist of </p>\n\n<ul>\n<li>Entity class</li>\n<li>Helper class (i.e. static class)</li>\n<li>View (i.e. pages and controls)</li>\n</ul>\n\n<p>and let say I have 2 sites <em>site1.com</em> and <em>site2.com</em>. And I am trying to achieve following functionality</p>\n\n<ul>\n<li>site1.com can have User, Q &amp; A and Faq module up and running</li>\n<li>site2.com can have User and Q &amp; A module live while Faq module is switched off but it can be turned-on if needed, so my query here is what is the best way to achieve such functionality</li>\n</ul>\n\n<p>do I introduce a flag bit that I check on every page and control belonging to that module? It's more like CMS where you can turn on/off different features. I am trying to get my head around it, please provide me with an example or point out if I am taking the wrong approach.</p>\n"},{"tags":["c#",".net","asp.net-mvc","quartz.net",".net-remoting"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":632,"score":3,"question_id":11262041,"title":"MVC3 webapp task scheduling with Quartz.NET","body":"<p>I need your advice for scheduling tasks in the MVC3 Webapp. </p>\n\n<p>My task is to create some generic scheduler for different services in the webapp that can be used later in development. For example we have some available tasks that user can schedule whenever he wants.</p>\n\n<p>I didn't want to reinvent the wheel and found the Quartz.Net library that can be used to create the scheduler.</p>\n\n<p>I know that it's not a good idea to host scheduling inside webapp cause webserver can recycle the application pools, etc, so i decided to use it inside a Windows Service and then using Quartz.NET remoting feature to trigger tasks inside my webapp.</p>\n\n<p>But i've found some issues with that. Correct me if I'm wrong, but when i tried to use the Quartz.NET remoting it runs the job inside the Windows Service process, it means that it needs to know about all types inside my webapp, so all the assemblies of the webapp should be referenced by it, and i need to have another config file for database, etc. So in case I write new job class, i can't easily schedule it, i need to stop the service and renew the library for it, so it's not very generic approach.</p>\n\n<p>I can't find any info that Quartz.NET can run jobs only based on it's interface.</p>\n\n<p>So I came up with idea to write my own scheduler that will be hosted in the Windows Service, and will have some IJob interface that will be implemented in the webapp. I will also use .Net remoting using IPC channel. \nSo the webapp will be like .Net Remoting Server, and when i want to add some new job and then schedule it, i will just have to write new job that implements IJob interface. \nI will register it as </p>\n\n<pre><code>        IpcChannel channel = new IpcChannel(\"CurrentIPC\");\n\n        ChannelServices.RegisterChannel(channel);\n\n        RemotingConfiguration.RegisterWellKnownServiceType(\n            typeof(SimpleJob), \"SimpleJob\", WellKnownObjectMode.SingleCall);\n        RemotingConfiguration.RegisterWellKnownServiceType(\n            typeof(ComplexObject), \"ComplexObject\", WellKnownObjectMode.SingleCall);\n</code></pre>\n\n<p>in this case i will have two Job types registered. Then when scheduling the job i will pass the name of the class and on the Windows Service side that will stand for client (executing objects on the webapp side) i will just bind the passed name of the class with IJob like this:</p>\n\n<pre><code>Dictionary&lt;string, IJob&gt; jobs = new Dictionary&lt;string, IJob&gt;();\n    void AddJob(string name)\n    {\n        IJob obj = (IJob)Activator.GetObject(typeof(IJob), string.Format(\"ipc://CurrentIPC/{0}\", name));\n        jobs.Add(name, obj);\n    }\n</code></pre>\n\n<p>So now i don't need to bother about references to my app and other stuff, the scheduler will do it's job without knowing anything, just IJob interface and executing tasks on the webapp side.</p>\n\n<p>If i'm wrong or it's too complex and there are some other simpler methods of doing this, or there are some pitfalls that i'm not aware of, can you help me with that?\nThank you.</p>\n\n<p>P.S. \nAlso there was an idea to have separate scheduler that will run the web app methods directly by executing a link to specified service in the web app, for example \"http://localhost:3030/Request/12\" and that's all, but in my web app you should be authorized to execute such request and again we have issues we need to resolve, and we will have additional load to the webserver with such requests in case of thousands of scheduled tasks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13106354,"title":"How to serialize each item in IEnumerable for ajax post","body":"<p>I have a PartialView that displays <code>IEnumerable&lt;Movie&gt;</code>.</p>\n\n<p><strong>_MoviePartial.cshtml</strong></p>\n\n<pre><code>@foreach(var movie in Model) {\n    &lt;div class=\"content\"&gt;\n        &lt;span class=\"image\"&gt;&lt;img src=\"@movie.Posters.Profile\" alt=\"@movie.Title\"/&gt;&lt;/span&gt;\n        &lt;span class=\"title\"&gt;@movie.Title&lt;/span&gt;\n        &lt;div class=\"score`\"&gt;\n            &lt;span class=\"critics-score\"&gt;@movie.Ratings.CriticsScore&lt;/span&gt;\n            &lt;span class=\"audience-score\"&gt;@movie.Ratings.AudienceScore&lt;/span&gt;\n        &lt;/div&gt;\n        @Html.ActionLink(\"Add Movie\", \"Add\", \"MyMovies\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>When the user clicks the \"Add Movie\" ActionLink I am going to do an ajax post to add the selected movie to the users collection. My problem is that I would like to send the entire selected <code>Movie</code> class to the \"Add\" action but not sure how to serialize each movie since the entire <code>Movie</code> class is not rendered in the PartialView, just a few properties. I know I can serialize something like this...</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var obj = @Html.Raw(Json.Encode(movie));\n&lt;/script&gt;\n</code></pre>\n\n<p>But I'm not sure how that would work inside a foreach loop that renders html, especially inside a <code>PartialView</code>.</p>\n\n<p>So, just to be clear, when a user clicks the \"Add Movie\" <code>ActionLink</code> I would like to send the serialized <code>Movie</code> class for that respective movie to my controller via ajax.    </p>\n\n<p>My questions is...</p>\n\n<p>Is there a better way to serialize each movie and append it to it's respective anchor? I know there's the <code>data-</code> html5 attribute but I thought they only allow string values, not json objects. I also know I could use jQuery's <code>.data()</code> function but I'm struggling to think through how to get that to run from a PartialView, especially since the html rendered by <code>_MoviePartial.cshtml</code> may be returned from a controller via ajax.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13106537,"title":"MVC3 : HTTPPOST Controller db.SaveChanges() Fails with \"Invalid Column Name..\"","body":"<p>I have a create view for invoices that is failing on db.SaveChanges() on the HTTPPOST.  The exception message is {\"Invalid column name 'UserDetail_UserId'.\"}.  In the POST controller it looks like the invoiceitem object I'm trying to add to my InvoiceItems table is populated correctly with the selected username from a dropdownlistfor that gets populated by usernames from my UserDetails table.  \"UserId\" is the key column in the UserDetails table, but it's not used in the dropdownlist so I'm unclear why any data is trying to be saved to a \"UserDetail_UserId\" column.  My code below:</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>public class InvoiceItem\n{\n    //Identity Column\n    public int ServiceID { get; set; }\n\n    [Key]\n    public string ProfileUserName { get; set; }\n\n    public DateTime InvoiceDate { get; set; }\n    public string Address { get; set; }\n    public string Note { get; set; }\n    public decimal Price { get; set; }\n    public decimal SubTotal { get; set; }\n    public bool InvoicePaid { get; set; }\n}\n\npublic class UserDetail\n{\n    [Key]\n    public Guid UserId { get; set; }\n    public string ProfileUserName { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string FullName { get; set; }\n    public string Address { get; set; }\n    public string City { get; set; }\n    public string State { get; set; }\n    public string Zip { get; set; }\n    public string Phone { get; set; }\n    public DateTime DateUpdated { get; set; }\n    public virtual ICollection&lt;InvoiceItem&gt; InvoiceItems { get; set; }\n}\n\npublic class ProShotDB : DbContext\n{\n    public DbSet&lt;UserDetail&gt; UserDetails { get; set; }\n    public DbSet&lt;UserLinkToken&gt; UserLinkTokens { get; set; }\n    public DbSet&lt;InvoiceItem&gt; InvoiceItems { get; set; }\n}\n</code></pre>\n\n<p><strong>Controllers:</strong></p>\n\n<pre><code>public ActionResult Create()\n    {\n        ViewBag.ProfileUserNames = db.UserDetails.Select(\n        c =&gt; new\n        {\n            ProfileUserName = c.ProfileUserName,\n            NameAddress = c.FullName + \" - \" + c.Address\n        });\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Create(InvoiceItem invoiceitem)\n    {\n        decimal Tax = 1.066m;\n        if (ModelState.IsValid)\n        {\n            invoiceitem.InvoiceDate = DateTime.Now;\n            invoiceitem.SubTotal = invoiceitem.Price*Tax;\n            invoiceitem.InvoicePaid = false;\n\n            db.InvoiceItems.Add(invoiceitem);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        ViewBag.ProfileUserNames = db.UserDetails.Select(\n        c =&gt; new\n        {\n            ProfileUserName = c.ProfileUserName,\n            NameAddress = c.FullName + \" - \" + c.Address\n        });\n        return View(invoiceitem);\n    }\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@model Pro_Shot_Portal.Models.InvoiceItem\n\n@{\n    ViewBag.Title = \"Input Invoice\";\n}\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm()) {\n@Html.ValidationSummary(true)\n&lt;fieldset&gt;\n    &lt;legend&gt;Input Invoice:&lt;/legend&gt;\n\n    &lt;div class=\"alert alert-error\" style=\"width:250px;\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;×&lt;/button&gt;\n        &lt;strong&gt;Warning!&lt;/strong&gt; Assigning invoice to wrong user could cause major problems, please triple check before proceeding.\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.ProfileUserName, \"Attach invoice to user\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(model =&gt; model.ProfileUserName, new SelectList(ViewBag.ProfileUserNames, \"ProfileUserName\", \"NameAddress\"), \"-- Pick Client For Invoice --\")\n        @Html.ValidationMessageFor(model =&gt; model.ProfileUserName)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Address)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Address)\n        @Html.ValidationMessageFor(model =&gt; model.Address)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Note)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Note)\n        @Html.ValidationMessageFor(model =&gt; model.Note)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Price)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Price)\n        @Html.ValidationMessageFor(model =&gt; model.Price)\n    &lt;/div&gt;\n\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n}\n\n&lt;div&gt;\n    @Html.ActionLink(\"Cancel Invoice Creation\", \"Index\")\n&lt;/div&gt;\n</code></pre>\n\n<p>From what I can tell the invoiceitem model object properties are filled with the proper data, and the only database change I'm invoking with db.SaveChanges() is \"db.InvoiceItems.Add(invoiceitem);\".  Can anyone tell me where and why it's trying to access, write or update a column named \"UserDetails_UserId\".  Maybe I messed something up on the DropdownListFor since that's the only part interacting with the UserDetails table?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","bing-maps"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13106533,"title":"How can I display data in an infobox in bing maps pulling the data from a DB in asp.net?","body":"<p>I'm trying to pull data from a db including images and display it in an infobox in bing maps. Do I need to do a custom infobox? Thanks for everyone's help. I will be using asp.net MVC for this project. </p>\n"},{"tags":["asp.net-mvc","visual-studio",".net-3.5","url-rewriting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13090689,"title":"How to dynamically create and manage new controllers in ASP.NET MVC?","body":"<p>From a private area of my site developed in ASP.NET MVC  I want to create new pages (or more properly Controllers) with a URL segment like \"www.mysite.com/newpage/\" (and not \"www.mysite.com/mycontroller/newpage/\");</p>\n\n<p>I don't want create controllers at design/development time, I want be able to create controllers at runtime and store their names (the url segment) in a database, so when a page is requested, the application checks if it exists in the database and render the page (the view).</p>\n\n<p>Anyone knows an example on Internet that explain the best method to implement an option like that?</p>\n"},{"tags":["asp.net-mvc","telerik","window"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1409,"score":0,"question_id":4933501,"title":"Нow to adjust the size of the telerik window dynamically?","body":"<p>I have little question about Telerik window.</p>\n\n<p>Нow can i adjust the size of the window to content when window has already been shown?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","label"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3818,"score":1,"question_id":1104773,"title":"What is the ASP.NET MVC equivalent of displaying a Label conditionally?","body":"<p>I'm currently porting an ASP.NET WebForms application to ASP.NET MVC. </p>\n\n<p>In one of the pages there is an ASP.NET Label control which is displayed conditionally based on a variable in the codebehind. So, something to the effect of</p>\n\n<pre><code>&lt;asp:Label runat=\"server\" Visible=\"&lt;%# ShowLabel%&gt;\"&gt;\n...\n&lt;/asp:Label&gt;\n</code></pre>\n\n<p>Where ShowLabel is a Boolean value in the codebehind. The contents of the label are generated at runtime and will be different pretty much every time.</p>\n\n<p>There's better ways to do this even in ASP.NET, but what would be the best way to do this in ASP.NET MVC? How are you even supposed to render dynamic text in ASP.NET MVC in a way similar to how the ASP.NET Label object worked?</p>\n"},{"tags":["asp.net","asp.net-mvc","deployment","composite-c1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13104254,"title":"Is it possible to publish a website as a subsite to azure using Asp.Net MVC 4","body":"<p>Is it possible publish a mvc website as a subsite to an exisiting site on azure?</p>\n\n<p>Im running a CMS (Composite C1) that is published to azure and i wonder if I can publish a MVC project to the same webrole/instance such www.mysite.com is the cms system and then my mvc project is running as www.mysite.com/myproject/ or myproject.mysite.com ?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2265,"score":3,"question_id":3166579,"title":"ModelState.IsValid does not exclude required property","body":"<p>Im trying to exclude a required property(Password) so the modelstate dont validate that property, but for some reason it still validate even when i try to exclude it.</p>\n\n<p>Controller:</p>\n\n<pre><code>    [Authorize, AcceptVerbs(HttpVerbs.Post)]\n    public ActionResult _Edit(int id, [Bind(Exclude = \"Password\")]FormCollection collection)\n    {\n        var user = Proxy.GetUser(id);\n\n        TryUpdateModel(user, null, null, new[]{\"Password\"});\n\n        if(!ModelState.IsValid)\n            return PartialView(user);\n\n        Proxy.UpdateUser(user);\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>   ...\n   &lt;tr&gt;\n       &lt;td class=\"label\"&gt;\n           &lt;label class=\"row_description\" for=\"Password\"&gt;&lt;%= S._(\"Password\")%&gt;&lt;/label&gt;\n       &lt;/td&gt;\n       &lt;td&gt;\n           &lt;%= Html.Password(\"Password\", null, new { @class = \"row_input\" })%&gt;\n           &lt;%= Html.ValidationMessage(\"Password\", \"*\")%&gt;\n       &lt;/td&gt;\n   &lt;/tr&gt;\n</code></pre>\n\n<p>User(using dataannotation):</p>\n\n<pre><code>[Required]\npublic string Password { get; set; }\n</code></pre>\n\n<p>Im using VS2008, MVC2, firefox</p>\n\n<p>Maybe im just tired and can't see it. Any help is appreciated</p>\n"},{"tags":["asp.net-mvc","n-tier-architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13105354,"title":"ASP.NET MVC map Model to BLL","body":"<p>I have a project for my MVC4 site, one for my BLL and one for my DLL.  </p>\n\n<p>In my MVC4 site, should I simply, inside my controllers, new up BLL objects and map them to Model objects?  I want the BLL classes and Model classes to remain separate, but I am not sure if I should just map them over or if there is another, better way.</p>\n\n<p>I want whatever way I relate the Model classes to their BLL classes to be really simple, however.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views","login-control"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1862,"score":0,"question_id":8768474,"title":"MVC3 Partial view inside Master Page","body":"<p>On my site, I want to display a Login box on all pages. So I wanted to make a partial view page, which I use on my _Layout.cshtml file in Shared.</p>\n\n<p>But where would the controller for this partial view go? And how would my Login button have access to it?</p>\n\n<p>So, when the Request.IsAuthenticated is true, the login box shows 'Logged in as ...', but when the result is false, I get a little table with the usual Username/Password form.</p>\n\n<p>Edit: After trying some answers below, I seem to be stuck in an endless lopp on the GET method below. It it because my partial view is trying to load me _Layout.cshtml file, as it want to accosiate the 'masterpage' with the partial view? And because my partial view is being rendered in _Layout.cshtml, it's lopping?</p>\n\n<pre><code>public class LoginController : Controller\n{\n    //\n    // GET: /Login/\n\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Index(LoginModel loginModel)\n    {\n        if(ModelState.IsValid)\n        {\n            var g = new GallaryImage();\n            var user = g.LoginUser(loginModel.Username, loginModel.Password);\n            if(user != null) \n            {\n                FormsAuthentication.SetAuthCookie(user.username, false);\n                return RedirectToAction(\"index\", \"Home\");\n            }\n            ModelState.AddModelError(\"\", \"Invalid Username/Password\");\n        }\n        return View();\n    }\n</code></pre>\n\n<p>In my _Layout.cshtml, I am trying to load the partial view like this:</p>\n\n<pre><code>&lt;div style=\"text-align: right\"&gt;\n      @Html.Action(\"Index\", \"Login\")\n&lt;/div&gt;\n</code></pre>\n\n<p>See the issue?</p>\n"},{"tags":["asp.net","asp.net-mvc","multithreading"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2260,"score":4,"question_id":3794741,"title":"ASP.NET MVC Multithreading","body":"<p>I want to implement such logic in my asp-net-mvc application:</p>\n\n<p><code>user clicks a button</code> -></p>\n\n<p><code>server executes some time-consuming logic in ~15 threads (i get data from really slow independent sources)</code> -></p>\n\n<pre><code>when all work is done, server merges the results and passes it back to user\n</code></pre>\n\n<p>The other day i've seen an article which explained why creating new Threads in asp-net application is highly not recommended, and ThreadPool is the one that should be used. \nWhat are best practices for mvc in this case? Why shouldnt i create my threads, backgroundworkers, tasks, whatever by myself and use threadpool? The Application will be hosted on a public server, if it matters.</p>\n\n<p>Thanks, Ilya.</p>\n"},{"tags":["asp.net-mvc","validation","jquery-ui","dialog"],"answer_count":4,"favorite_count":8,"up_vote_count":6,"down_vote_count":0,"view_count":6963,"score":6,"question_id":4910668,"title":"asp.net mvc3 jquery ui dialog and client validation","body":"<p>I have problem with client validation in asp.net mvc3 application.</p>\n\n<p>My code looks :</p>\n\n<pre><code>function loadEditCategoryDialog(categoryId) {\n    $.ajax({\n        url : \"/rovastamp3/Admin/CategoryEditDialog\",\n        data : \"categoryId=\"+categoryId,\n        success : function(data){\n            $(\"#popup_dialog\").html(data);\n            $(\"#popup_dialog\").dialog({        \n                modal: true,\n                draggable: false,\n                resizable: false,\n                title: \"Upravit kategorii\",\n                width: 600,\n                height: 500,\n            });                             \n        }\n    });\n }\n</code></pre>\n\n<p>Controller : </p>\n\n<pre><code>[HttpGet]\npublic ActionResult CategoryEditDialog(int categoryId)\n{\n    CategoryEditViewModel categoryEditViewModel = new CategoryEditViewModel();\n    categoryEditViewModel.Category = _postAuctionCategoryRepo.Query()\n        .SingleOrDefault(x =&gt; x.Id == categoryId);\n\n    return PartialView(categoryEditViewModel);\n}\n\n[HttpPost]\npublic ActionResult CreateNewCategory(CategoryEditViewModel categoryEditViewModel)\n{\n    if (ModelState.IsValid)\n    {\n        return RedirectToAction(\"Index\");\n    }\n    return View(\"CategoryEditDialog\", categoryEditViewModel);\n}\n</code></pre>\n\n<p>And finally my partial view : </p>\n\n<pre><code>@model Rovastamp.MVC3.ViewModels.AdminController.CategoryEditViewModel\n&lt;h2&gt;Upravit kategorii @Model.Category.Name&lt;/h2&gt;\n@{Html.EnableClientValidation();}\n@using (Html.BeginForm(\"CreateNewCategory\", \"Admin\"))\n{ \n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Objednávkový formulář&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Category.Name) \n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.Category.Name) \n            @Html.ValidationMessageFor(model =&gt; model.Category.Name) \n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Category.Position) \n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.Category.Position) \n            @Html.ValidationMessageFor(model =&gt; model.Category.Position) \n        &lt;/div&gt;\n\n        &lt;input  type=\"submit\" value=\"Upravit\" class=\"submit_button\" /&gt;               \n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>In my web.config I turned on UnobtrusiveJavaScript and ClientValidatin app settings.</p>\n\n<p>If I clik on submit button on jquery ui dialog, mvc does full refresh without client validation?</p>\n\n<p>Where is the problem?</p>\n\n<p>Thanks for any help</p>\n\n<p>EDIT : </p>\n\n<p>In my Layout page i include this scripts :</p>\n\n<ul>\n<li>jquery.unobtrusive-ajax.js</li>\n<li>jquery.validate.js</li>\n<li>jquery.validate.unobtrusive.js</li>\n</ul>\n\n<p>EDIT 2</p>\n\n<p>In my exemaple i put :</p>\n\n<pre><code>jQuery.validator.unobtrusive.parse('#popup_dialog');\n</code></pre>\n\n<p>before i call jquery ui dialog and client validation works perfectly.</p>\n"},{"tags":["javascript","asp.net-mvc","iis7"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":10294,"score":4,"question_id":342364,"title":"Relative Image URL in Javascript File - ASP.net MVC and IIS 7","body":"<p>I am developing an Asp.net mvc application, everything works fine in ASP.net development server but when I am trying to host it on IIS 7. I am getting problem related to URL resolution. I have used relative paths in Javascript to give the image. The script file is in ~/Scripts/ folder and image files are in ~/Content/images/ folder. Now in the javascript file I am trying to use the give by giving the relative path like\nhttp://localhost/WebApp1/controller1/action1/\nit tries to find it at <a href=\"http://localhost/controller1/action1/\" rel=\"nofollow\">http://localhost/controller1/action1/</a> and couldn;t find the file.</p>\n"},{"tags":["asp.net-mvc","character-encoding"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":275,"score":3,"question_id":9482691,"title":"Receive POST data in non-UTF-8 encoding (ASP.NET MVC)","body":"<p>my ASP.NET MVC Application is UTF-8, but I receive POST request in Encoding.Default from third-party app out of my control.</p>\n\n<p>What is sanest and simplest way to change request encoding for <strong>only one action of one controller</strong>? (Rest of my application should remain UTF-8).</p>\n\n<pre><code>public class Message\n{\n public int id { get; set; }\n public string phone { get; set; }\n public string mes { get; set; }\n public string to { get; set; }\n}\n\n[HttpPost]\npublic ActionResult Receive(Message msg)\n{\n        AddIncomingMessage(msg);\n        return new EmptyResult();\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13102729,"title":"Change only some of the values of the current route","body":"<p>My search page has a lot of parameters and in this page I have some filters for the current search.<br />\nI just want to change some of the values in my route.</p>\n\n<p>An example:</p>\n\n<pre><code>http://www.example.com/{controller}/{action}/{brand}/{model}/{color}/{price}\n</code></pre>\n\n<p>In my search page I have a form where I can change the color and the price:</p>\n\n<p>HTML:</p>\n\n<pre><code>@using (Html.BeginForm(\"action\", \"controller\", FormMethod.Post))\n{\n    @Html.DropDownListFor(m =&gt; m.Color, Model.Colors)\n    @Html.DropDownListFor(m =&gt; m.Price, Model.Prices)\n    &lt;input type=\"submit\" value=\"Search\" /&gt;\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Action(SearchModel search)\n{\n    //I can get the Price and Color\n    string color = search.Color;\n    string price = search.Price;\n\n    //Now I want to get the values of brand and model\n\n    return RedirectToRoute(\"Action\",new\n    {\n         controller = \"Controller\",\n         action = \"Action\",\n         color = color,\n         price = price,\n         brand = ????,\n         model = ????\n    });\n\n}\n</code></pre>\n\n<p>My search has a lot more parameters than this... I don't want to put them in hidden fields and send them with the model :\\</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","razor","displayattribute"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":105,"score":4,"question_id":13099834,"title":"How to get the Display Name Attribute of an Enum member via MVC razor code?","body":"<p>Well as you will see I'm new to C# and MVC 4 (Why am I on this project?).</p>\n\n<p>I've got a property in my model called \"Promotion\" that its type is a flag enum called \"UserPromotion\". Members of my enum have display attributes set as follows:</p>\n\n<pre><code>[Flags]\npublic enum UserPromotion\n{\n    None = 0x0,\n\n    [Display(Name = \"Send Job Offers By Mail\")]\n    SendJobOffersByMail = 0x1,\n\n    [Display(Name = \"Send Job Offers By Sms\")]\n    SendJobOffersBySms = 0x2,\n\n    [Display(Name = \"Send Other Stuff By Sms\")]\n    SendPromotionalBySms = 0x4,\n\n    [Display(Name = \"Send Other Stuff By Mail\")]\n    SendPromotionalByMail = 0x8\n}\n</code></pre>\n\n<p>Now I want to be able to create say a ul in my view to show the selected values of my \"Promotion\" property. This is what I have done so far but the problem is that how can I get the display names here?</p>\n\n<pre><code>&lt;ul&gt;\n    @foreach (int aPromotion in @Enum.GetValues(typeof(UserPromotion)))\n    {\n        var currentPromotion = (int)Model.JobSeeker.Promotion;\n        if ((currentPromotion &amp; aPromotion) == aPromotion)\n        {\n        &lt;li&gt;Here I don't know how to get the display attribute of \"currentPromotion\".&lt;/li&gt;\n        }\n    }\n&lt;/ul&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","master-detail"],"answer_count":2,"favorite_count":25,"up_vote_count":20,"down_vote_count":0,"view_count":6743,"score":20,"question_id":711184,"title":"ASP.NET MVC example of editing multiple child records","body":"<p>Does anyone know of any examples or tutorials of an MVC view that shows parent/child data all on one form, and allows all the child records to be editable?</p>\n\n<p>For example, say I have a table of people and another containing the vehicles they own. One one form, I want to show every vehicle for a given person, and make the data elements editable (i.e. license plate number, car color, etc.) in case there are mistakes. I don't want to jump to a separate edit form for each vehicle.</p>\n\n<p>My attempts thus far have gotten me to the point where I can display the data, but I can't get it to post back to the controller. I've tried to narrow down the problem as far as I could <a href=\"http://stackoverflow.com/questions/709933/child-records-not-posting-on-asp-net-mvc-form\">here</a>, but I'm still not getting it, and I think a broader example may be in order. Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":343,"score":0,"question_id":3255238,"title":"Multiple file uploads asp.net mvc","body":"<p>I am facing one serious problem</p>\n\n<p>Technology: Asp.net mvc</p>\n\n<p>I am trying to upload multiple files from the dynamically created file upload control from\njavascript.(Attach more file Options).My files are not getting posted to the mvc controller action.i have specified the propert <code>new { enctype = \"multipart/form-data\" }</code> in my form\nstill the file is not getting posted.</p>\n\n<p>NB:</p>\n\n<p>1)The file from the first file upload control(which is shown on the first page load is getting posted but the rest which is added using attach more file option is not getting posted)</p>\n\n<p>Many Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","html-helper"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":1412,"score":9,"question_id":5283518,"title":"MVC Html.BeginForm using Areas","body":"<p>I'm using MVC areas and on a view that's in an area called \"Test\" I would like to have a form that posts to the following method:</p>\n\n<pre><code>area: Security\ncontroller: AccountController\nmethod: logon\n</code></pre>\n\n<p>How can I make this happen with Html.BeginForm? Can it be done?</p>\n"},{"tags":["asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":33,"score":-2,"question_id":13102545,"title":"MVC 4.0 Show simple grid","body":"<p>I'm new to mvc, and i'm now trying to show a simple gridview which will be loaded from my sql server.\nI can't even find the gridview in the toolbox.</p>\n\n<p>i'm using the razor view engine.\nexample will be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13097824,"title":"Multi Post for Action with return File in ASP.NET MVC","body":"<p>Assume this code in One of my <code>Action</code>s</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Generate (Params){\n\n....\n\nInsertOneRawToDB();\nreturn RedirectToAction(\"Index\", new { info = info });\n\n}\n</code></pre>\n\n<p>So every thing is OK yet but when  I change <code>return</code> to:</p>\n\n<pre><code>InsertOneRawToDB();\nbyte[] myfile = GenerateAZipFile();\nreturn File( myfile , \"application/zip\" , \"MyFileName\");\n</code></pre>\n\n<p>In this case I see a weird behavior: before return, One raw inserted to DB, and after return another raw inserted, it seems the <code>InsertOneRawToDB</code> called again.</p>\n\n<p>Does any one know about this? what happening here? </p>\n\n<p>PS: I use Visual Studio 2012 RTM + ASP.NET MVC4 </p>\n\n<p>PS: OK I Use IDM (Internet Download Manager) to download zip file and that cause MultiPost on this <code>Action</code> So How can I handle this?</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13100044,"title":"jQuery plugin for playing video files of different extension","body":"<p>I want to know a plugin which can be used for playing video files of different extensions. Here I am passing a video file path from the database. I was confused and never used this..</p>\n\n<p>Already I tried <code>&lt;embed&gt;</code> but it does not work for me.</p>\n\n<pre><code>&lt;embed id=\"ShowVideo\" allowscriptaccess=\"always\"\n    autostart=\"false\" src=\"@viewVideo\" controller=\"true\" \n    allowfullscreen=\"true\" width=\"280\" wmode=\"transparent\" height=\"200\"&gt;\n&lt;/embed&gt;\n</code></pre>\n\n<p>thanks in advance</p>\n"},{"tags":["asp.net-mvc","image-upload"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13102797,"title":"Upload and store many images a to database and create thumbnails at once using ASP.Net MVC","body":"<p>How can I upload many images at once (by open dialog and shift/ctrl) and store them to sql server database (create a record for each image) and then create thumbnails with ASP.Net MVC ?</p>\n\n<p>How view and controller should be?? Thanks alot.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13102128,"title":"Passing data between Views and Controller","body":"<p>Wanted to see if somebody can provide some suggestions/pointers on how to address this issue I am currently facing\n.\nScenario is like…</p>\n\n<ol>\n<li>I have a Page say A where search is performed and data is displayed.</li>\n<li>On Page A there is an ActionLink which passes an ID of the selected record to the page B. </li>\n<li><p>Before redirecting to page B, I need to store/preserve form data of Page A (I do not want to use session or hidden filed as data is critical).</p></li>\n<li><p>Once user is done working on Page B, I need to save changes on Page B and redirect back to Page A.</p></li>\n<li>Here Page A should make a Post request based on preserver form data in step 3. Purpose is to display back searched data that was there before redirecting to Page B.</li>\n</ol>\n\n<p>Something like..</p>\n\n<pre><code>View A\n    // Search textboxes here\n    // Search data list here with ActionLink column\n\nView B\n   // more controls here\n   // Submit button - saves changes on this page. \n   // after submit button processing need to go back to View A \n   // and display the same Search data List based on Seach textboxes values \n   // those were entered by user before coming to this View B. \n   // Ques: Not sure how to persist data from View A between calls to View B and then View B to View A.\n</code></pre>\n\n<p>Does anybody has any better approach to achieve this?</p>\n\n<p>For now the solution I have is...</p>\n\n<ol>\n<li>Make an ajax POST request on ActionLink click and save the\nformcollection in cache using controller.</li>\n<li>Make default ActionLink GET request passing ID and in controller\nreturn View B.</li>\n<li>On View B, on submit do ajax POST request to save data on Page B and\nreturn data from cache in ajax success function.</li>\n<li>Make another ajax POST request using data retruned in above ajax\nsuccess to display View A.</li>\n</ol>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","ajax","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":969,"score":0,"question_id":3497751,"title":"Using ASP.NET MVC & AJAX to do a file upload and preview image","body":"<p>I am doing what would take me less that 2 hours to do in old ASP.Net Web Forms but has left me stumped in how to implement in ASP.Net MVC.</p>\n\n<p>I am trying to put together a really basic admin site about musicians. a musician has an associated picture of themselves, then some details like name, age, home town alongside the profile picture.</p>\n\n<p>When an admin user creates a musician, the create view has a file upload, and onchange of the file upload, a preview image should appear. The create page also has the form fields for the other inputs.</p>\n\n<p>In the details view, the musician's profile picture should appear alongside the details.</p>\n\n<p>When in edit mode, again, the existing image should appear, and if the user chooses to change the picture, the picture again will change there on the spot, without reloading the page.</p>\n\n<p>This seems incredibly easy, but I am really struggling to see how the ASP.Net MVC architecture makes this possible without a great deal of work.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":7,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":1049,"score":7,"question_id":5109983,"title":"Why don't my Html Helpers have intellisense?","body":"<p>I can't get intellisense for my own html helpers. My <code>CustomHtmlHelpers.cs</code> looks like this:</p>\n\n<pre><code>using System.Web.Mvc;\nusing System.Text;\nusing System.Web;\n\n    namespace laget.Web.Helpers\n    {\n        public static class CustomHtmlHelpers\n        {\n            //MY HELPERS\n        }\n    }\n</code></pre>\n\n<p>and in my Web.config:</p>\n\n<pre><code>    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"laget.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\"/&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n</code></pre>\n\n<p>If I put <code>&lt;@using laget.Web.Helpers&gt;</code> in my view, I get the intellisense issue fixed.</p>\n\n<p>Should it not be enough with the code in Web.config?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","telerik","telerik-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1587,"score":1,"question_id":8952263,"title":"Telerik MVC extensions date picker not putting date in textbox","body":"<p>I am using <code>ASP.NET MVC 3</code> with <code>razor</code> and the latest version of the <code>Telerik MVC extensions</code> controls.</p>\n\n<p>I have a date picker on my view:</p>\n\n<pre><code>&lt;td&gt;&lt;label&gt;From:&lt;/label&gt;&lt;/td&gt;\n&lt;td&gt;\n     @(Html.Telerik()\n          .DatePickerFor(x =&gt; x.HospitalisedStartDate)\n          .Name(\"HospitalisedStartDate\")\n     )\n&lt;/td&gt;\n</code></pre>\n\n<p>This property in my view model:</p>\n\n<pre><code>public DateTime? HospitalisedStartDate { get; set; }\n</code></pre>\n\n<p>When the view loads, I would click on the calendar icon.  The calendar pops up, I would select a date and then nothing happens.  The calendar disappears but the date is not set the textbox.  Why would this be?  If I were to type in the word \"today\" in the textbox then it will put in todays date like \"2012/01/21\".  What am I missing here that is preventing it from working?</p>\n\n<p>The markup looks like this for the style sheets and JavaScript:</p>\n\n<pre><code>&lt;link type=\"text/css\" href=\"/Content/2011.3.1115/telerik.common.min.css\" rel=\"stylesheet\"/&gt;\n&lt;link type=\"text/css\" href=\"/Content/2011.3.1115/telerik.webblue.min.css\" rel=\"stylesheet\"/&gt;\n&lt;link type=\"text/css\" href=\"/Content/Stylesheets/mystylesheet.css\" rel=\"stylesheet\"/&gt;\n\n&lt;script src=\"/Scripts/jquery-1.7.1.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.common.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.tabstrip.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.calendar.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.datepicker.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.treeview.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","linq","mvc","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13100062,"title":"LINQ Intersect Query for Many to Many relationship using .NET4 MVC4 Code First","body":"<p>In .NET4 MVC 4 using Code First I have two classes that form a many to many relationship.\nHow can I write a simple LINQ query to find all Games that have at least one or more genres from a given list of genres? (i.e. Retreive all games that are of the Strategy and/or Sandbox genre)</p>\n\n<pre><code>public class Game\n{\n    public int ID { get; set; }\n    public virtual ICollection&lt;Genre&gt; Genres { get; set; }\n}\n\npublic class Genre\n{\n    public int ID { get; set; }\n    public virtual ICollection&lt;Game&gt; Games { get; set; }\n}\n</code></pre>\n\n<p>Please note that I am using Code First so I have no access to the abstracted join table GenreGames.</p>\n\n<p>I have tried the following to find a game that contains at least one genre ID from the array gid:</p>\n\n<pre><code>var gid = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\nvar result = from g in unitOfWork.GameRepository.dbSet\n             where (\n                 from gen in unitOfWork.GenreRepository.dbSet\n                 where gid.Contains(gen.ID)\n                 select gen.ID\n             ).Any()\n             select g;\n</code></pre>\n\n<p>When retrieving the results</p>\n\n<pre><code>List&lt;Game&gt; similiarGames = result.ToList&lt;Game&gt;();\n</code></pre>\n\n<p>the following error comes up. </p>\n\n<blockquote>\n  <p>Unable to create a constant value of type 'GratifyGaming.Domain.Models.Genre'. Only primitive types or enumeration types are supported in this context.</p>\n</blockquote>\n\n<p>How can I get the results I want using only primitive or enumeration types? Is there a workaround?</p>\n"},{"tags":["asp.net","asp.net-mvc","windows-authentication","ntlm"],"answer_count":6,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":3300,"score":14,"question_id":7387156,"title":"asp.net: unable to get windows authentication to work through local IIS","body":"<p>So I've created a new ASP.NET MVC project using the intranet template. web.config contains the appropriate values (e.g. <code>&lt;authentication mode=\"windows\"/&gt;</code>).</p>\n\n<p>If I fire up the web app using the VS webserver, it all looks fine - the page shows my Windows domain and username and all. However, this works in Opera and Safari as well as IE and FF, which says to me it's not using Windows auth at all (since to the best of my knowledge this doesn't work in any browser except IE/FF).</p>\n\n<p>Next step is to get it working through local IIS. I create a hosts file entry pointing www.mysite.mydomain to 127.0.0.1. So in IIS I create website with a binding to www.mysite.mydomain and enable Windows authentication and disable anonymous authentication.</p>\n\n<p>I have set up IE and FF to enable Windows auth as follows:</p>\n\n<p><strong>IE</strong></p>\n\n<ol>\n<li>Add URL to intranet group</li>\n<li>Ensure Windows auth is enabled in the advanced settings</li>\n</ol>\n\n<p><strong>FF</strong></p>\n\n<p>Put 'www.mysite.mydomain' into network.automatic-ntlm-auth.trusted-uris config setting.</p>\n\n<p>But when I dial up www.mysite.mydomain in IE / FF I get a login prompt. Interestingly, even when I type in my Windows login here, it still fails and shows me the login prompt again.</p>\n\n<p>We don't have active directory here but my understanding is that it should work fine with a local account.</p>\n\n<p>I can't think of anything else I need to do. Any suggestions?</p>\n\n<p>Edit: we've recently switched to using Active Directory and the problem remains.</p>\n\n<p>Edit: when I cancel the login prompt, I get taken to an 'IIS 7.5 Detailed Error' page with the following information:</p>\n\n<p><strong>HTTP Error 401.2 - Unauthorized\nYou are not authorized to view this page due to invalid authentication headers.</strong></p>\n"},{"tags":["c#","asp.net-mvc","dependency-injection","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":97,"score":5,"question_id":13008924,"title":"Injecting Current User with Ninject this way - any disadvantages?","body":"<p>I'm using this ninject bind:</p>\n\n<pre><code>kernel.Bind&lt;ICurrentUser&gt;().To&lt;CurrentUser&gt;()\n    .InRequestScope()\n    .WithConstructorArgument(\"principal\", \n        context =&gt; (RolePrincipal HttpContext.Current.User);\n</code></pre>\n\n<p>In one of my decorators of the service layer I simply add \"ICurrentUser currentUser\" to the constructor to get the object and its working.</p>\n\n<p>Are there any disadvantages by this implementation or is there a better way to implement his ambient context? For each request the user object is created - also if its an anonymous user.</p>\n"},{"tags":["asp.net-mvc","ef-code-first","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13099390,"title":"How to create custom class in ef codefirst model in asp.net web api","body":"<p>I am working on asp.net web api. I am using EF 4.1 code first model with existing database. I have a class like,</p>\n\n<pre><code>public class Tab1\n{\npublic int ID{get; set;}\npublic string FirstName{get; set;}\npublic string LastName{get; set;}\n}\n</code></pre>\n\n<p>and i have created dbcontext like,</p>\n\n<pre><code>public class EFBarContext:DbContext\n    {\n        public DbSet&lt;Tab1&gt; User{ get; set; }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;PluralizingTableNameConvention&gt;();\n            modelBuilder.Entity&lt;Tab1&gt;().ToTable(\"User\");\n        }\n    }\n</code></pre>\n\n<p>At first i need to get all records from table \"User\" and i need to calculate fullname based on firstname and lastname and i need to return the data json format like,</p>\n\n<pre><code>{\"ID\":212,\"firstname\":\"kio\",\"lastname\":\"nmk\",\"fullname\":\"kionmk\"}\n</code></pre>\n\n<p>for that i have created a custom class like,</p>\n\n<pre><code>public class Tab2:Tab1\n{\npublic fullname{get; set;}\n}\n</code></pre>\n\n<p>and i return the list with <code>List&lt;Tab2&gt;</code> But i am getting an error like  <strong><code>Schema specified is not valid error 0064: Facet 'MaxLength' must not be specified for type 'mediumtext'.</code></strong> \nI have followed the following post, <a href=\"http://stackoverflow.com/questions/8700497/class-inheritance-with-net-ef4-1-mysql\">Class Inheritance with .NET EF4.1 + MySQL</a> but i cant figure it out in my situation. so please guide me.</p>\n"},{"tags":["asp.net-mvc","entity-framework","web-applications","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13099929,"title":"MCV4 And Enitiy Framework. Without been able to directly connect to the database","body":"<p>I have a very strange situation which I am currently faced with.  I have been passed a project to uplift a website to use MVC4 &amp; the enitiy framework.  However due to the way that the original implementation was undertaken the database access is not direct from the website it's handed to a separate middle-ware application which we pass the name of a sql transaction we would like to have executed &amp; the required parameters, this then returns us a datatable object.</p>\n\n<p>My Question is this Without having to remove this middle-ware process could I create a MVC4 App with the use of the enitiy framework? </p>\n"},{"tags":["c#","xml","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13100713,"title":"Url.Content and reading ~ tilde in URL from xml file","body":"<p>I am using ASP.NET MVC 3 with .aspx view engine. \nI have Maps.xml file:</p>\n\n<pre><code>    &lt;imgurl&gt;\n        ../../Content/Img/BrandsLogo/samsung_logo.png\n    &lt;/imgurl&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>….</p>\n\n<p>In the MapView.aspx I have:</p>\n\n<pre><code>&lt;%: Url.Content( Model.ImgUrl ) %&gt; \n</code></pre>\n\n<p>This works well, the image is displayed as it should.</p>\n\n<p>The problem is:\nI want to use the tilde in the xml file: </p>\n\n<pre><code>    &lt;imgurl&gt;\n        ~/Content/Img/BrandsLogo/samsung_logo.png\n    &lt;/imgurl&gt;\n</code></pre>\n\n<p>But then the URL to the image is broken; somehow it adds Mobile/MapView in it. Which is the folder and .aspx file like this?</p>\n\n<p><strong>/Mobile/MapView/~/Content/Img/BrandsLogo/samsung_logo.png</strong></p>\n\n<p>When I use the ../../ in the xml file the URl is correct:\n<strong>/Content/Img/BrandsLogo/samsung_logo.png</strong></p>\n\n<p>I have tried the solution form:\n<a href=\"http://stackoverflow.com/questions/5331777/using-url-content-with-semi-relative-url\">Using Url.Content with semi-relative URL</a></p>\n\n<p>but then I get some extra spaces:\n<strong>/Content/Img/BrandsLogo%20%20%20%20%20%20%20%20%20%20%20%20/samsung_logo.png</strong></p>\n\n<p>How can I read tilde url <code>(~/Content/Img/BrandsLogo/samsung_logo.png)</code> from the xml file and use <code>Url.Content</code> method?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13100502,"title":"Route to user's page under the dynamic username path in MVC4","body":"<p>I have some dynamic user route like </p>\n\n<pre><code>   routes.MapRoute(\n            \"UserNames\", // Route name\n            \"{username}\", // URL with parameters\n            new { controller = \"Home\", action = \"UserName\" });\n</code></pre>\n\n<p>and under the <strong>HomeController.cs</strong></p>\n\n<pre><code>public ActionResult UserName(string username)\n        {\n            ViewBag.Message = username;\n\n           return RedirectToAction(\"Register\",\"Account\"); // Test...\n        }\n</code></pre>\n\n<p>It is working fine.</p>\n\n<p>But what I need is to get working the URL like</p>\n\n<pre><code>http:\\\\mywebsite.com\\UserNameBob\\MyGallery\\1\nhttp:\\\\mywebsite.com\\UserNameBob\\Profile\nhttp:\\\\mywebsite.com\\UserNameBob\\MyFriends\n</code></pre>\n\n<p>How do I can archive it?</p>\n\n<p>Any clu?</p>\n\n<p>Thank you!!!</p>\n"},{"tags":["asp.net-mvc","linq","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13100337,"title":"How to return only particular fields to list using LINQ lamda expressions","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8973529/retrieve-an-object-from-entityframework-without-one-field\">Retrieve an object from entityframework without ONE field</a>  </p>\n</blockquote>\n\n\n\n<p>I am working on asp.net mvc. currently i am using EF 4.1 code first model. Here i have list of records(43). My class is like,</p>\n\n<pre><code>public class MyTable\n{\npublic string field1{get; set;}\npublic string field2{get; set;}\n.\n.\n.\npublic string field20{get; set;}\n} \n</code></pre>\n\n<p>and i am returning them as a list like List. But i dont want the field20 to return. so how could i skip particular field in my list. I have used like,</p>\n\n<pre><code>(from m in context.MyTable select new{m.field1,m.field2,...,m.field19}).ToList(); \n</code></pre>\n\n<p>Its working very fine. but i want same result using lamda expression syntax like</p>\n\n<pre><code>context.MyTable.Skip() or any etc.\n</code></pre>\n\n<p>How to return only particular fields to list.please guide me.</p>\n"},{"tags":["jquery","html","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13099950,"title":"change label by radio selection","body":"<p>I have these HTML Snippet : </p>\n\n<pre><code>&lt;table class=\"form\" style=\"display: none\"&gt;\n    &lt;tr&gt;\n        &lt;td colspan=\"2\"&gt;\n            @Html.AntiForgeryToken()\n            @Html.ValidationSummary()\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;input type=\"radio\" value=\"hagh\" checked=\"checked\" name=\"reg\"&gt;حقیقی&lt;/input&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"radio\" value=\"hogh\" name=\"reg\"&gt;حقوقی&lt;/input&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;   \n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblregName\"&gt;نام&lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regname\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblregLsatNameEcoCode\"&gt;نام خانوادگی&lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regLsatNameEcoCode\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblregNatCodeRegNo\"&gt;کد ملی&lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regNatCodeRegNo\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblDepName\"&gt;نام نماینده&lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regDepName\" disabled=\"disabled\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            تلفن همراه\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regMobile\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            کد\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regCityCode\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            تلفن ثابت\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regPhoneNo\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;button class=\"orange\"&gt;\n                ورود&lt;/button&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I want to change label caption when user change the radio selection. I was confused in how to get selected radio when user click them and how to change label text. Is it true to access label as $('#labelname').val(sometext)?</p>\n"},{"tags":["asp.net-mvc","checkbox"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1120,"score":0,"question_id":9644486,"title":"checkbox returning \"true,false\" from formcollection instead of selected value","body":"<p>im having multiple checkboxes  in my aspx page using HtmlHelper.CheckBox</p>\n\n<p>and when the form is submitted using ajax as below in js file \nvar input = $(':input'); </p>\n\n<pre><code>   $.ajax({\n    type: 'POST',\n    url: \"/Home/Post\",\n    data: input,\n    dataType: 'json',\n    success: function () {\n\n               },\n       });\n</code></pre>\n\n<p>and in the controller action method as shown below..</p>\n\n<pre><code> public ActionResult Post(FormCollection Form)\n        {\n\n}\n</code></pre>\n\n<p>and in the Form im not getting the updated values for checkboxes ie all the checkbox values were\nreturned as \"true,false\".\nif any of the checkbox is not checked or unchecked...Form is not returning as false it still returns as \"true,false\" instead of false.</p>\n\n<p>even i tried as </p>\n\n<pre><code>Form.Get(\"checkbox0\").ConvertTo(typeof(Boolean))\n\nRequest.Form[\"checkbox0\"]\n</code></pre>\n\n<p>the aboce code returns \"true,false\" but the checkbox0 is unchecked so it should return false which is not happening....???</p>\n\n<p>But when i tried using Html.BeginForm(\"Post\",\"Home\",FormMethod.Post,new {id=\"x\"}) in aspx file\nand removed ajax call in the js file... \nthen the formcollection in the controller start giving me the expected values for checkboxes...\n<strong>but as this approach flickers page after page submit...i need to use ajax approach only</strong>..</p>\n\n<p><strong>Please let me know how can i retrieve the updated value of the checkbox from the formcollection when using ajax</strong>.</p>\n"},{"tags":["c#","asp.net-mvc","linq","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13098262,"title":"Using Find() with inheritance in entity frameowrk","body":"<p>I am trying to find a User entity in my \"Domain Entity\" DB Set.\nThe User entity is derived from a base type called Domain Entity.</p>\n\n<p>I want to use the following to find a user according to his ID</p>\n\n<pre><code>User userToDelte = db.DomainEntities.OfType&lt;User&gt;().Find(UserID);\n</code></pre>\n\n<p>But I get a compiler error :</p>\n\n<blockquote>\n  <p>'System.Linq.IQueryable' does not\n  contain a definition for 'Find' and no extension method 'Find'\n  accepting a first argument of type...</p>\n</blockquote>\n\n<p>Why can't I use <code>Find()</code> after I have used <code>OfType&lt;User&gt;()</code> ?</p>\n\n<p>P.S\nIt is important for me to get a strongly typed User entity because it has a navigation propertiy that include all of it's details in a separate table called \"UserDetails\" along with the user name and password.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlistfor","dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":13075484,"title":"In MVC3 I am trying to get my dropdownlistfor to have a Value of zero , instead of empty string for the starting \"Please Select ...\"","body":"<p>How can I get the first Option Value to be zero instead of an empty string. So when the user\ngoest to the form and doesnt select anything a Value would be passed like zero. I am new to MVC and have spent time trying to find an easy answer. Can this be done in Jquery? Any suggestions would be much appreciated.</p>\n\n<p>HERES my VIEW </p>\n\n<pre><code>@Html.DropDownListFor(x =&gt; x.ItemCatId,\n new SelectList(Model.CategoryddList, \"Value\", \"Text\"),\n \"Select Category\")\n</code></pre>\n\n<p>AND CONTROLLER</p>\n\n<pre><code>items.CategoryddList =\n        itemsRepository.GetItemDdl(\"Item Categories\").Select(c =&gt; new SelectListItem \n                        {\n                           Value = c.DropdownID.ToString(),\n                           Text = c.DropdownText\n                        });  \n</code></pre>\n"},{"tags":["c#","asp.net-mvc","custom-model-binder"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13098290,"title":"Custom modelbinder results in new database insert","body":"<p>I've got this issue in ASP.NET MVC model binding. I have an address object with a country child object. However - I'm using auto-complete for the country name. So in my view I've got something like this:</p>\n\n<pre><code>@Html.EditorFor(model =&gt; model.Country)\n</code></pre>\n\n<p>And I wrote a custom binder here:</p>\n\n<pre><code>    public class CountryBinder : IModelBinder\n{\n    public CountryBinder(DataContext db)\n    {\n        this.Db = db;\n    }\n\n    protected DataContext Db { get; set; }\n\n    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        var countryName = controllerContext.HttpContext.Request[bindingContext.ModelName];\n        var result = Db.Countries.SingleOrDefault(\n            country =&gt; country.EnglishShortName.Equals(countryName) | country.Translation_NL.Equals(countryName));\n        return result;\n    }\n}\n</code></pre>\n\n<p>The data context is injected like this:</p>\n\n<pre><code>kernel.Bind&lt;IDBContext&gt;().To&lt;DataContext&gt;().InRequestScope();\n</code></pre>\n\n<p>Controller looks like this:</p>\n\n<pre><code>        var model = this.participationRepository.Single(p =&gt; p.Id == participation.Id);\n        if (!participation.IsCancelled)\n        {\n            this.TryUpdateModel(model);\n</code></pre>\n\n<p>etc...</p>\n\n<p>Every time I save - a new Country is created, with the exact specs of the country that we found in the binder, but with new id. Any clues?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13098611,"title":"Forgot Password link mvc4","body":"<p>I am using the mvc4 framework with openAuth feature active. Users can log in and register using an external login \"Google\" or Facebook.</p>\n\n<p>My question is how do you implement a forgot my password system into this. All I have is their email address by default especially when they sign in as an external login. When they first log in with an external login it does ask to register the email into the system. Should at this point I ask for more information to validate the user?</p>\n\n<p>Any direction would be appreciated.</p>\n"},{"tags":["asp.net-mvc","localization","automapper","cultureinfo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13092222,"title":"Automapper Mapping for Localization Resolver in a Multi-Language Website","body":"<p>I found a way to use Automapper for Language mapping based on the active Culture.</p>\n\n<p>The question is if it's possible to build a generic Resolver to map all the models that use the Resolver.</p>\n\n<p>In this Case, the models to map have always the same properties, Id and Name (including the language properties Name_PT, Name_FR and Name_EN):</p>\n\n<p>// MODELS</p>\n\n<pre><code>public class MakeDto\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Name_PT { get; set; }\n    public string Name_FR { get; set; }\n    public string Name_EN { get; set; }\n}\n\npublic class MakeViewModel\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n\npublic class ModelDto\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Name_PT { get; set; }\n    public string Name_FR { get; set; }\n    public string Name_EN { get; set; }\n}\n\npublic class ModelViewModel\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n\npublic class FuelDto\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Name_PT { get; set; }\n    public string Name_FR { get; set; }\n    public string Name_EN { get; set; }\n}\n\npublic class FuelViewModel\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>// AUTOMAPPER PROFILE</p>\n\n<pre><code>public class DtoToViewModelMappingProfile : Profile\n{\n    public override string ProfileName\n    {\n        get { return \"DtoToViewModelMappings\"; }\n    }\n\n    protected override void Configure()\n    {\n        CreateMaps();\n    }\n\n    private static void CreateMaps()\n    {\n        Mapper.CreateMap&lt;ModelDto, ModelViewModel&gt;();\n        Mapper.CreateMap&lt;MakeDto, MakeViewModel&gt;()\n            .ForMember(dest =&gt; dest.Name, opt =&gt; opt.ResolveUsing&lt;CultureResolver&gt;());\n        Mapper.CreateMap&lt;FuelDto, FuelViewModel&gt;();\n    }\n\n    public class CultureResolver : ValueResolver&lt;MakeDto, string&gt;\n    {\n        protected override string ResolveCore(MakeDto makeDto)\n        {\n            switch(Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName.ToUpperInvariant())\n            {\n                case \"FR\":\n                    return makeDto.Name_FR;\n                case \"EN\":\n                    return makeDto.Name_EN;\n            }\n            return makeDto.Name_PT;\n        }   \n    }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["javascript","asp.net-mvc","visual-studio-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13097114,"title":"how to display content using anchor tag","body":"<p>I want to preview content,when i click on the anchor tag,</p>\n\n<pre><code>                    var profiledemo = profiles.split(\",\");\n                    for (var pd = 0; pd &lt; profiledemo.length; pd++) {\n                        var mydiv = document.getElementById(\"Profile\");\n                        var aTag = document.createElement('a');\n                        aTag.setAttribute('href');\n                        aTag.innerHTML = profiledemo[pd];\n                        mydiv.appendChild(aTag);                               \n                        aTag.onclick = function () {\n                            alert(\"profiles anchor tag called\");\n\n                        }\n                    }\n</code></pre>\n\n<p>I am able to display multiple docs and for those docs i put anchor tag using above,now I want,when user click on the particular tag I have to display that doc content  which is in database.</p>\n"},{"tags":["asp.net-mvc","telerik"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13096473,"title":"Why data cannot display using telerik grid","body":"<p>I want to try using telerik grid because I see the demo that the grid is really good, but I had a problem the data cannot display in my view. here is the view code</p>\n\n<pre><code>@{Html.Telerik().Grid&lt;WarnaWarni.Models.TBL_BERITA&gt;()\n    .Name(\"Grid\")\n    .PrefixUrlParameters(false)\n    .Columns(columns =&gt;\n    {\n        columns.Bound(o =&gt; o.JUDUL).Width(100);\n        columns.Bound(o =&gt; o.RINGKASAN).Width(200);\n        columns.Bound(o =&gt; o.ISI).Width(200);\n        columns.Bound(o =&gt; o.FOTO);\n        columns.Bound(o =&gt; o.TANGGAL).Format(\"{0:MM/dd/yyyy}\").Width(120);\n    }).DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"ID_BERITA\", \"TBL_BERITA\"))\n    .Pageable()\n    .Sortable()\n    .Filterable();\n\n    }\n</code></pre>\n\n<p>here is the controller method:</p>\n\n<pre><code>public ViewResult Index()\n    {\n        string query = \"select * from TBL_BERITA\";            \n        var a = db.ExecuteStoreQuery&lt;TBL_BERITA&gt;(query);\n\n        return View(a.ToList());\n    }\n</code></pre>\n\n<p>How to make the data show in the View?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","entity-framework","nuget","class-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13036496,"title":"Install-package Entity framework error","body":"<p>I need help.\nWhen i'm trying to install Entity-framework to my class library in my solution, i'm getting an error:</p>\n\n<p><em>Exception calling \"CreateInstanceFrom\" with \"8\" argument(s): \"Could not load file or assembly 'file:///D:#work#web\\DanceClubCMS\\packages\\EntityFramework.5.0.0\\tools\\EntityFramework.PowerShell.dll' or one of its dependencies.\n Не удается найти указанный файл.\" =>  <strong>(translate from russian - file not found)</strong>\nAt D:#work#web\\DanceClubCMS\\packages\\EntityFramework.5.0.0\\tools\\install.ps1:10 char:34\n+     $appDomain.CreateInstanceFrom &lt;&lt;&lt;&lt; (\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : DotNetMethodException</em></p>\n\n<p>please help me. How can i fix that problem?</p>\n"},{"tags":["ajax","asp.net-mvc","exchange","viewbag"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13096601,"title":"ViewBag change using ajax in ASP.NET MVC3","body":"<p>ViewBag, ViewData, TempData are called just once at the first time when I call the view?</p>\n\n<p>And never change if I don't refresh the page?</p>\n\n<p>Because I want to change using Ajax (every 10 sec, I call Ajax)</p>\n\n<p>Plz See below code,</p>\n\n<p>==================== in Controller... =======================</p>\n\n<pre><code> public ActionResult OriginView()\n {\n\n      ViewBag.IntData = 1;\n\n      return View();\n\n }\n\n\n public JsonResult ChangeViewBag(int CurrentInterval)\n {\n\n      ViewBag.IntData = CurrentInterval;\n\n      return Json(new{IntData=CurrentInterval},JsonRequestBehavior.AllowGet);\n\n }\n</code></pre>\n\n<p>================= in OriginView.cshtml... =======================</p>\n\n<pre><code> var CurrentInterval = 2\n\n $.getJSON('@Url.Action(\"ChangeViewBag\",\"Controller\")', {CurrentInterval:CurrentInterval},function(response){\n\n    @*CurrentInterval++ every ten sec, I want to use CHANGED ViewBag here!*@\n\n    alert(@ViewBag.IntData) @*but **Result is still 1**, unchanged!*@\n\n    alert(response.IntData) @*ofcourse I can use it in this way. *@\n\n    @* but I should use below ASP.NET CODE\n\n    @{\n       string TimeData = DateTime.Now.AddSeconds(**ViewBag.IntData**).ToString();\n    }\n\n    ***The position is impossible to javascript variable.*** right?*@\n });\n</code></pre>\n\n<p>.Net genius please!!!\nIf it's impossible, Any Idea?</p>\n"},{"tags":["sql","asp.net-mvc","linq","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13096058,"title":"Joining two tables in linq method syntax, MVC EntityFramework","body":"<p>I'm working with two tables: CI_CLIENTRISK (SCD type 2)... and QB_INVOICES_HEADER (<a href=\"http://i47.tinypic.com/x42c69.png\" rel=\"nofollow\">edmx screenshot</a>).</p>\n\n<p>They can be joined via ClientID.  I want to essentially replicate this query:</p>\n\n<pre><code>SELECT a.ClientID,\n    MAX(b.InvoiceDt) AS MaxInvoiceDt\n    (omitted for brevity)\nFROM CI_CLIENTRISKADJS a\nINNER JOIN QB_INVOICES_HEADER b\nON a.ClientID = b.ClientID\nWHERE a.IsActive = 1\nGROUP BY a.ClientID\nORDER BY MaxInvoiceDt DESC\n</code></pre>\n\n<p>Here's what I have so far.  It's not returning any records.</p>\n\n<pre><code>using (var db = new PLOGITENS01Entities())\n        {\n        var rvClientRiskAdjs = db.CI_CLIENTRISKADJS\n            .Take(50)\n            .Join(db.QB_INVOICES_HEADER,\n                a =&gt; a.ClientID,\n                b =&gt; b.ClientID,\n                (a, b) =&gt; new { Risk = a, Invoices = b })\n            .Where(a =&gt; a.Risk.IsActive == 1)\n            .OrderByDescending(o =&gt; o.Invoices.InvoiceDt)\n            .Select(c =&gt; new ClientRiskModel()\n            {\n                ClientRiskId = c.Risk.ClientRiskID,\n                ClientName = c.Risk.CI_CLIENTLIST.ClientName,\n                ClientId = c.Risk.ClientID,\n                ClientRiskAdjs = c.Risk.ClientRiskAdjs,\n                RecordValidStartDt = c.Risk.RecordValidStartDt,\n                RecordValidEnddt = c.Risk.RecordValidEnddt,\n                IsActive = c.Risk.IsActive\n            })\n            .ToList();\n\n        return View(new GridModel(rvClientRiskAdjs));\n        }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","json","jsonp"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":961,"score":1,"question_id":5116782,"title":"parse json response(JavaScriptSerializer) with double quotes using jquery","body":"<p>I am using the following code in my aspx(asp.net MVC ViewPage) to get serialized output:</p>\n\n<pre><code>var _accountNames = '&lt;%= ViewData[\"AccountNames\"] != null ? new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewData[\"AccountNames\"]) : null%&gt;';\n</code></pre>\n\n<p>This gives the following result:</p>\n\n<pre><code>[{\"Name\":\"My Saving\",\"AccountBalance\":-4.2500,\"ReferenceId\":2},\n{\"Name\":\"My Checking\",\"AccountBalance\":0.0000,\"ReferenceId\":3},\n{\"Name\":\"Undeposited Funds\",\"AccountBalance\":113.6600,\"ReferenceId\":2},\n{\"Name\":\"Star Account \"Trust\"\",\"AccountBalance\":0.0000,\"ReferenceId\":50}]\n</code></pre>\n\n<p>In the above result, the Account (Star Account \"Trust\") has double quotes in it. It gives <code>\"missing } after property list\"</code> error, while using eval. Even using JSON parse gives error.</p>\n\n<p>I am using this result to bind the dropdown options as:</p>\n\n<pre><code> var k = JSON.parse(_accountNames.replace(/'/g, '\"'));\n if (k != null &amp;&amp; k.length &gt; 0) {\n    var options = '';\n    options += '&lt;option value=\"\"&gt;' + \"--Select Account--\" + '&lt;/option&gt;';\n    for (var i = 0; i &lt; k.length; i++) {\n       options += '&lt;option value=\"' + k[i].AccountNameType + '\"&gt;' + k[i].Name + ' $(' + k[i].AccountBalance + ')' + '&lt;/option&gt;';\n    }\n}\n$(\"select#DepositToddl\").html(options);\n</code></pre>\n\n<p>How can i parse the result has double quotes in it? Please suggest.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":5,"favorite_count":4,"up_vote_count":22,"down_vote_count":0,"view_count":18806,"score":22,"question_id":4789512,"title":"Add css class to Html.EditorFor in MVC 2","body":"<p>I'm trying to add a css class to a textbox. This is what I have in my view:</p>\n\n<pre><code>&lt;%: Html.EditorFor(m =&gt; m.StartDate) %&gt;\n</code></pre>\n\n<p>I tried following the instructions at this <a href=\"http://stackoverflow.com/questions/3038209/adding-a-css-class-with-html-textbox\">link</a> by making my code:</p>\n\n<pre><code>&lt;%: Html.EditorFor(m =&gt; m.StartDate, new { @class: \"datepicker\" }) %&gt;\n</code></pre>\n\n<p>But I get a compiler error saying:</p>\n\n<p><strong>Syntax error, ',' expected</strong></p>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13095498,"title":"How to perform Redirect in helper class for MVC controller?","body":"<p>I have some common code that runs at the beginning of multiple controller actions.  I would like to refactor that code into a static class to promote reuse of that code block.</p>\n\n<p>The code checks for a variable, looks for a cookie and if a condition is met, the code should redirect to another page (controller/action).</p>\n\n<p>The problem is that everything works properly (including the cookie lookup) but the Redirect does not fire.  The code passes over the redirect and the redirect never happens.</p>\n\n<p>What is the proper way to redirect in a helper class?</p>\n\n<p>Here is the code now:</p>\n\n<p>This line is not working: <strong>myController.HttpContext.Response.Redirect(redirectURL);</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nnamespace MyProject.WebUI\n{\n    public static class SessionValidationHelper\n    {\n        // helper class to encapsulate common routines to check for missing session data\n        public static void SessionIdRequired(string id, Controller myController)\n        {\n            if (id == null || id == \"\")\n            {\n                // check cookie\n                if (myController.ControllerContext.HttpContext.Request.Cookies.AllKeys.Contains(\"cookiename\"))\n                {\n                    // if a session cookie was found, send to the registration recovery page\n                    string sessionGuidCookieValue = \"\";\n                    sessionGuidCookieValue = myController.ControllerContext.HttpContext.Request.Cookies[\"cookiename\"].Value;\n\n                    // check if GUID/SessionID exists in persistent cache\n\n                    // send to Session Recovery\n                    //myController.HttpContext.Response.RedirectToRoute(\"SessionRecovery\", new { Controller = \"SessionRecovery\", Action = \"Index\", id = sessionGuidCookieValue });\n                    string redirectURL = @\"~/SessionRecovery/Index/\" + sessionGuidCookieValue;\n\n                    // this code isn't working\n                    myController.HttpContext.Response.Redirect(redirectURL);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13091545,"title":"Why Is It That The View In MVC Is Not Being Displayed?","body":"<p>I had debug and it actually enter the View(survey) but The View is not returning the page. Any help will be appreciated!</p>\n\n<p>//#edit is a submit button, and below is the script.</p>\n\n<pre><code> $('#edit').click(function () {\n\n    var sid = $('input[type=radio]:checked').val();\n    var srid = sid.replace(/[^0-9]/g, '');\n    var id = parseInt(srid);\n    //alert(id);\n\n    $.ajax({\n        type: 'POST',\n        url: '@Url.Action(\"Edit\",\"MainPage\")',\n        data: { \"id\": id },\n        success: function (result) {\n\n        }\n\n    });\n\n\n});       \n</code></pre>\n\n<p>//Controller</p>\n\n<pre><code>[HttpPost]\n     public ActionResult Edit(int id = 0)\n    {\n         survey survey = db.surveys.Single(s =&gt; s.SurveyId == id);\n         if (survey == null)\n         {\n             return HttpNotFound();\n         }\n        return View(survey);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","windows","forms","azure","acs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13091589,"title":"MVC4 Windows Azure ACS 500 Internal Server Error when Authentication Forms","body":"<p>I´m following this tutorial:http://robbincremers.me/2012/02/22/using-windows-azure-access-control-service-to-provide-a-single-sign-on-experience-with-popular-identity-providers/#comment-469</p>\n\n<p>Using this guide or others, when uncomment the authentication forms in the web config for using the custom html login form downloaded from windows azure access control portal, I get an 500 Internal Server Error. What could be wrong?</p>\n\n<p>It is just adding authentication form</p>\n\n<pre><code>&lt;location path=\"FederationMetadata\"&gt;\n    &lt;system.web&gt;\n      &lt;customErrors mode=\"Off\"/&gt;\n      &lt;authorization&gt;\n        &lt;allow users=\"*\" /&gt;\n      &lt;/authorization&gt;\n    &lt;/system.web&gt;\n  &lt;/location&gt;\n  &lt;system.web&gt;\n    &lt;httpRuntime requestValidationMode=\"2.0\"/&gt;\n   &lt;!-- &lt;authorization&gt;\n      &lt;deny users=\"?\" /&gt;\n    &lt;/authorization&gt;--&gt;\n    &lt;authentication mode=\"None\" /&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;!--Commented out by FedUtil--&gt;\n    &lt;authentication mode=\"Forms\"&gt;&lt;forms loginUrl=\"~/Federation/Login.html\" timeout=\"2880\" /&gt;&lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Optimization\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"WSFederationAuthenticationModule\" type=\"Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n      &lt;add name=\"SessionAuthenticationModule\" type=\"Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor","webgrid"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13093236,"title":"Check if any http query exists, not by parameter","body":"<p>Since MVC3 WebGrid sorting default is ascending via query string, &amp;sortdir=ASC.. I would like to know how to sort initially by descending.</p>\n\n<p>I've tried below, using Request.QueryString, but in the case were there is absolutely no query string \"?..\", this doesn't see, to be working:</p>\n\n<pre><code>// Force a descending sort on page load when query string is empty\nif(Request.QueryString[grid.SortDirectionFieldName].IsEmpty()){\n    grid.SortDirection = SortDirection.Descending;\n}\n</code></pre>\n\n<p>Since I have a path like ..Admin/Review initially, and not ../Admin/Review?sort=Question6&amp;sortdir=ASC, how can I test this case? Would the above condition still return true if there isn't even a query parameter?</p>\n\n<p>I believe I need to extract a query from the raw url and if it doesn't exist, set my sort direction to descending.</p>\n"},{"tags":["c#","asp.net-mvc","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13095370,"title":"Saving culture dates Linq to SQL","body":"<p>I have a view which asks for a date to be selected. This is then saved to a database by creating an object and using linq to insert:</p>\n\n<pre><code>Event e = new Event();\ne.Date = model.DateEntered;\n\ncontext.Events.InsertOnSubmit(e);\ncontext.SubmitChanges();\n</code></pre>\n\n<p>On this line I get an exception on the date format. Locally this is not the case as I understand it is to do with a globalization property needed in the web config file. My question is, is there a way to display the date to the user in the view in their expected format for their region and then save as a UK date format?</p>\n\n<p>Where do I declare this globalization property and will it mean that US people will not be able to save?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13094295,"title":"\"@model\" not working on razor page in hybrid WebForm/MVC site","body":"<p>I'm integrating MVC into our current .Net WebForms site.  I used these links for guidance while setting it up. <a href=\"http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx\" rel=\"nofollow\">Hanselman - Integrating MVC</a> and <a href=\"http://blog.falafel.com/Blogs/BasemEmara/basem-emara/2012/09/27/integrating-asp.net-mvc-4-into-existing-web-forms-applications\" rel=\"nofollow\">blog.falafel</a>.</p>\n\n<p>The site works and I can navigate to .aspx pages and controller/actions no problem.  But when I try to add the @model to a razor page, @model doesn't appear to be registering and Visual Studios sees  as a HTML5 item.</p>\n\n<p>exception:</p>\n\n<p>{\"c:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Temporary ASP.NET    Files\\root\\a3be471e\\a209a63\\App_Web_index.cshtml.a8d08dba.d7uqhlro.0.cs(30): error CS1514: { expected\"} System.Exception {System.Web.HttpCompileException}</p>\n\n<p>I added all of the appropriate references and went over both sites multiple times.</p>\n\n<p>List of references I added - </p>\n\n<pre><code>Microsoft.Csharp\nSystem.ComponentModel.Data\nSystem.Web.Mvc\nSystem.Web.Razor\nSystem.Web.WebPages\nSystem.Net.Http\nSystem.Web.Optimization\nSystem.Web.Http\nSystem.Web.Http.WebHost\nNewtonsoft.Json\n</code></pre>\n\n<p>Web.config additions</p>\n\n<pre><code>&lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n  &lt;assemblies&gt;\n    &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n  &lt;/assemblies&gt;\n&lt;/compilation&gt;\n\n&lt;system.web&gt;\n  &lt;pages&gt;\n    &lt;namespaces&gt;\n      &lt;add namespace=\"System.Web.Helpers\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n      &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;add namespace=\"System.Web.WebPages\"/&gt;\n   &lt;/namespaces&gt;\n  &lt;/pages&gt;\n&lt;/system.web&gt;\n\n&lt;configuration&gt;\n &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","checkbox"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2215,"score":4,"question_id":936267,"title":"asp.net mvc checkbox inconsistency","body":"<p>I'm using an checkbox on an ASP.NET MVC form like so:</p>\n\n<pre><code>&lt;%=Html.CheckBox(\"AgreeToRules\", Model.AgreeToRules)%&gt;\n</code></pre>\n\n<p>The AgreeToRules property on the model is a boolean value. During testing, this all worked fine. However, now that we've gone live with this app, I'm seeing a relatively small but significant number of errors with the following messaging:</p>\n\n<blockquote>\n  <p>System.Web.HttpUnhandledException:\n  Exception of type\n  'System.Web.HttpUnhandledException'\n  was thrown. --->\n  System.InvalidOperationException: The\n  parameter conversion from type\n  'System.String' to type\n  'System.Boolean' failed. See the inner\n  exception for more information. --->\n  System.FormatException: Y is not a\n  valid value for Boolean. --->\n  System.FormatException: String was not\n  recognized as a valid Boolean.</p>\n</blockquote>\n\n<p>This appears to happen when the view engine tries to render the form after a post, and the value of the checkbox that is returned from the ValueProvider looks like:</p>\n\n<blockquote>\n  <p>Y,false</p>\n</blockquote>\n\n<p>OR</p>\n\n<blockquote>\n  <p>N,false</p>\n</blockquote>\n\n<p>The html that is rendered in the original form looks like:</p>\n\n<pre><code>&lt;input id=\"AgreeToRules\" name=\"AgreeToRules\" type=\"checkbox\" value=\"true\" /&gt;\n&lt;input name=\"AgreeToRules\" type=\"hidden\" value=\"false\" /&gt;\n</code></pre>\n\n<p>During testing, I expected (and showed) the posted value to look like:</p>\n\n<blockquote>\n  <p>true,false</p>\n</blockquote>\n\n<p>if checked or </p>\n\n<blockquote>\n  <p>false</p>\n</blockquote>\n\n<p>if not checked. So where is the N and Y coming from?</p>\n\n<p>I added user agent to the list of information returned from the error handler and it appears (so far) that all of the errors are occuring under windows XP with FF 3.0.10, but that's exactly what I have tested with and the problem did not exist during testing. </p>\n\n<p>Any thoughts?</p>\n"},{"tags":["asp.net-mvc","model","saving","enumerable"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13093325,"title":"Saving an IEnumerable Model","body":"<p>I have a view that has 2 date pickers, one of which is a start date and the other of which is end date.  I am able to get the user to select the start and end dates, redirect to a view that will have a list of Time worked where the user could change the date, enter time, and once they are done they should be able to click the save button and it should create a new instance of each time worked to the database.  I got the view displaying with no problem, but when the form posts my enumerable model is null, the form collection only has one accessible item, and I am not sure why.  Please take a look at the view I am creating below to get an idea of what I am doing and let me know if you are able to help me in any way.  </p>\n\n<pre><code>@model IEnumerable&lt;TimeCollection.Models.TimeWorked&gt;\n\n@{\n    ViewBag.Title = \"Create TimeWorked Range\";\n}\n\n&lt;h2&gt;Create TimeWorked Range&lt;/h2&gt;\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            @Html.DisplayNameFor(model =&gt; model.WorkDate)\n        &lt;/th&gt;\n        &lt;th&gt;\n            @Html.DisplayNameFor(model =&gt; model.HoursWorked)\n        &lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        @Html.HiddenFor(modelItem =&gt; item.EmployeeId)\n        &lt;td&gt;\n            @Html.EditorFor(modelItem =&gt; item.WorkDate)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.EditorFor(modelItem =&gt; item.HoursWorked)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.HiddenFor(modelItem =&gt; item.BeenSubmitted)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n\n&lt;/table&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n}\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\n\nnamespace TimeCollection.Models\n{\n    public class TimeWorked\n    {\n        public int TimeWorkedId { get; set; }\n        public int EmployeeId { get; set; }\n        public DateTime WorkDate { get; set; }\n        public int HoursWorked { get; set; }\n        public bool BeenSubmitted { get; set; }\n\n        public static void CreateTimeWorked(TimeWorked timeWorkedToCreate)\n        {\n            string insertQuery = string.Format(\"insert into time_worked (employee_id, work_date, work_hours, been_submitted) values ('{0}', '{1}', '{2}', '{3}')\", timeWorkedToCreate.EmployeeId, timeWorkedToCreate.WorkDate.ToString(\"yyyy/MM/dd\"), timeWorkedToCreate.HoursWorked, (timeWorkedToCreate.BeenSubmitted == true ? \"1\" : \"0\"));\n            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, insertQuery);\n        }\n\n        public static TimeWorked ReadTimeWorked(int timeWorkedId)\n        {\n            string selectQuery = string.Format(\"select * from time_worked where time_worked_id = '{0}'\", timeWorkedId);\n            return ConvertDataRowIntoTimeWorked(SpectrumData.Utility.FillDataSet(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, selectQuery).Tables[0].Rows[0]);\n        }\n\n        public static void UpdateTimeWorked(TimeWorked timeWorkedToUpdate)\n        {\n            string updateQuery = string.Format(\"update time_worked set work_date = '{0}', work_hours = '{1}', been_submitted = '{2}' where time_worked_id = '{2}'\", timeWorkedToUpdate.WorkDate, timeWorkedToUpdate.HoursWorked, timeWorkedToUpdate.BeenSubmitted, timeWorkedToUpdate.TimeWorkedId);\n            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, updateQuery);\n        }\n\n        public static void DeleteTimeWorked(int timeWorkedId)\n        {\n            string deleteQuery = string.Format(\"delete from time_worked where time_worked_id = '{0}'\", timeWorkedId);\n            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, deleteQuery);\n        }\n\n        private static TimeWorked ConvertDataRowIntoTimeWorked(System.Data.DataRow timeWorkedDataRow)\n        {\n            TimeWorked timeWorked = new TimeWorked();\n            timeWorked.BeenSubmitted = (timeWorkedDataRow[\"been_submitted\"].ToString() == \"1\" ? true : false);\n            timeWorked.EmployeeId = int.Parse(timeWorkedDataRow[\"employee_id\"].ToString());\n            timeWorked.HoursWorked = int.Parse(timeWorkedDataRow[\"work_hours\"].ToString());\n            timeWorked.TimeWorkedId = int.Parse(timeWorkedDataRow[\"time_worked_id\"].ToString());\n            timeWorked.WorkDate = DateTime.Parse(timeWorkedDataRow[\"work_date\"].ToString());\n\n            return timeWorked;\n        }\n    }\n}\n\n public ActionResult CreateTimeWorkedRange(DateTime startDate, DateTime endDate)\n    {\n        List&lt;Models.TimeWorked&gt; listOfTimeWorked = new List&lt;Models.TimeWorked&gt;();\n        DateTime beginning = startDate;\n        DateTime ending = endDate;\n\n        while (beginning &lt;= ending)\n        {\n            Models.TimeWorked dayWorked = new Models.TimeWorked()\n            {\n                EmployeeId = (Session[\"InventoryReviewUser\"] as SpectrumData.SpectrumTS.InventoryReviewUser).EmployeeId,\n                WorkDate = beginning\n            };\n\n            if (listOfTimeWorked.Contains(dayWorked) == false)\n            {\n                listOfTimeWorked.Add(dayWorked);\n            }\n\n            beginning = beginning.AddDays(1);\n        }\n\n        return View(listOfTimeWorked);\n    }\n\n    [HttpPost]\n    public ActionResult CreateTimeWorkedRange(List&lt;Models.TimeWorked&gt; modelList)\n    {\n        foreach (Models.TimeWorked timeWorked in modelList)\n        {\n            Models.TimeWorked.CreateTimeWorked(timeWorked);\n        }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12981259,"title":"Why doesn't TextBoxFor include validation elements if called twice for the same model property?","body":"<p>Simple question... Here is an example of some razor code:</p>\n\n<pre><code>@Html.TextBoxFor(c =&gt; c.RevisedEstimate)\n@Html.TextBoxFor(c =&gt; c.RevisedEstimate)\n</code></pre>\n\n<p>Here is how this renders:</p>\n\n<pre><code>&lt;input data-val=\"true\" data-val-number=\"The field Revised Estimate must be a number.\" id=\"RevisedEstimate\" name=\"RevisedEstimate\" type=\"text\" value=\"0\" /&gt;\n&lt;input id=\"RevisedEstimate\" name=\"RevisedEstimate\" type=\"text\" value=\"0\" /&gt;\n</code></pre>\n\n<p>The obvious question you ask is, \"Why are you doing that?\". The razor view is actually building client side detail-row templates that are used in KendoUI grids. There are two similar grids and we use the same viewmodel server side. We actually do provide the id element for the template so each field in each row ends up with a unique id. </p>\n\n<p>Why does the second input element not have the data-val and data-val-number elements?</p>\n"},{"tags":["asp.net-mvc","juice-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13094523,"title":"Juice UI Datepicker doesn't remember the ID that was assigned to the Html.TextBoxFor control","body":"<p>I am trying to hook the JuiceUI datetimepicker onto a date textbox input field. However, even though I have assigned an ID to the Html.TextboxFor(c => Model.Birthday) control, but for some reason JuiceUI doesn't see this ID, and I get the following error: </p>\n\n<p><em>Value cannot be null. Parameter name: Targetcontrol is null.</em> </p>\n\n<pre><code>&lt;%=Html.TextBoxFor(c =&gt; Model.BIRTHDATE, new { id = \"txtBirthday\"}) %&gt;\n&lt;Juice:Datepicker ID=\"dpBirthday\" runat=\"server\" TargetControlId = \"BIRTHDATE\" /&gt;\n</code></pre>\n\n<p>when I run the Developer Tools in IE, the id shows up: </p>\n\n<pre><code>&lt;input name=\"BIRTHDATE\" class=\"text-box single-line\" id = \"BIRTHDATE\" type=\"text\" data-val-required=\"The BIRTHDATE field is required.\" data-val=\"true\" value=\"\"/&gt;\n</code></pre>\n\n<p>Is there a reason why Juice UI's datepicker isn't seeing the ID of the control that I want to hook it into? Should I be using something else to attach a simple jQuery datepicker?</p>\n"},{"tags":["asp.net-mvc","file-download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12963006,"title":"Download dialog taking a very long time to load in ASP mvc application","body":"<p>I have an ASP.NET web application that, in part, allows a user to upload (and download) documents.  The upload isn't working very well either, but my download dialogs are having a serious issue and I have no clue why.</p>\n\n<p>These files are stored on a share that is not on the same machine as the code.\nI am attempting to send the download via a FilePathResult using the File overload File(location, mimetype, displayname).</p>\n\n<p>When a user clicks the download link it will open a new blank page and begin the loading animation but will stick to this for a good couple of minutes for larger files (up to 25 mb) before showing the save/download dialog, where it then takes about 5 seconds to actually download the file.</p>\n\n<p>I have hunted and hunted and so far the only thing I\"ve found is that FilePathResult is supposed to not buffer the file in memory but instead simply hand over the file to the user for downloading. </p>\n\n<p>Does anyone have any insight as to why it would take a good (timed) 5m 45s to bring up the download dialog on a file that is only 24 mb? I feel like IIS or asp is pre-loading the document somewhere when it shouldn't be, and even if it is that is way too much time for such a small file...</p>\n\n<p>For reference:</p>\n\n<pre><code>        public FilePathResult DownloadFile(int id)\n        {\n            var file = _fileService.GetByIdForUser(id, base.LoggedInUserId);\n\n            return File(file.Location, UploadedFileManager.DetermineContentTypeFrom(file.Extension), file.Name);\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","rest","odata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13093353,"title":".NET Mvc 3 to return OData JSON result","body":"<p>I am trying to get ASP.NET MVC3 to return an array as an OData result. </p>\n\n<p>I am not planning and do not want to use WebAPI in MVC4, because it removes the abstractions that we already have in place. Namely, we do not expose our underlying table schema/structure to the application layer - ever.</p>\n\n<p>So I intend to manually parse the OData query myself, which is not a big deal.</p>\n\n<p>However, how should I return the result set in a manner consistent with the OData (JSON) formats. I'm looking to find out if some prior work exists.</p>\n"}]}
{"total":44785,"page":12,"pagesize":100,"questions":[{"tags":["asp.net-mvc","asp.net-mvc-4","pinvoke","invoke","shell32"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13093415,"title":"Can shell32.dll pinoke time out or lose its connection?","body":"<p>This may not be the correct question, but I'll explain my situation.</p>\n\n<p>I created a file explorer web app that uses pInvoke on shell32.dll to get file attributes including the icon associated with the file, which in turn I use this information to pump into a view model.</p>\n\n<p>This works for about an hour or two, then I notice that it no longer pulls the hicons thus returning errors when creating my model.</p>\n\n<p>This is all during development, I have not deployed this yet, so I am not 100% sure if its the pInvoke connection, or a result of Visual Studio loosing its connection when I build the project. </p>\n\n<p>To get around this I have to close visual studio then open it up again and it will work fine for another hour or 2...</p>\n\n<p>Any insight would be helpful, thanks again.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13089489,"title":"ASP.NET MVC explanation of @section","body":"<p>For an ASP.NET MVC application, can someone please explain why and when I would use @section in a View?</p>\n\n<p>I saw in this example (http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx), he adds @section to the Index.cshtml. Is Index.cshtml a shared View? What in the example's code says \"Use @section code in this View but not that View?\".</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13092651,"title":"ASP.Net MVC Default Files Structure","body":"<p>Is there any functional reason of the default files structure on new ASP.Net MVC Application (Grouped by controllers, model, views etc. ?</p>\n\n<p>Otherwise I would structure it in a way that would be more convenient for me.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":2,"up_vote_count":19,"down_vote_count":0,"view_count":7165,"score":19,"question_id":719027,"title":"RenderAction RenderPartial","body":"<p>From what I have understood there is a big difference between the Html.RenderPartial included in the ASP.NET MVC release and the HTML.RenderAction in the Microsoft.Web.Mvc.ViewExtensions included in MVC Futures.</p>\n\n<p>On my application I have many pages composed from many \"widgets\" (sort of) each having its own specific function.  </p>\n\n<p>It seemed to me more reasonable to use the RenderAction method as each widget would have a dedicated controller responsible for getting different data and rendering a dedicated view (as opposed to having only one controller and a unique view model to pass to RenderPartial helper to render views). </p>\n\n<p>From the tests I have done having a form that points to a Create action method in a controller like:</p>\n\n<pre><code> &lt;% using (Html.BeginForm(\"Create\", \"Message\", FormMethod.Post, \n     new { id = \"messageCreateForm\" })) {%&gt;\n</code></pre>\n\n<p>and calling it with </p>\n\n<pre><code> &lt;% Html.RenderPartial(\"MessageForm\",new MessageDTO()); %&gt;\n</code></pre>\n\n<p>will render correcly a:</p>\n\n<pre><code>&lt;form id=\"messageCreateForm\" method=\"post\" action=\"/Message/Create\"&gt;\n</code></pre>\n\n<p>but with the same equivalent with RenderAction (so using a MessageForm action method on the controller to render the view) would not render correcly so:</p>\n\n<pre><code> &lt;% Html.RenderAction&lt;MessageController&gt;(m =&gt; m.MessageForm()); %&gt;\n</code></pre>\n\n<p>will render in:</p>\n\n<pre><code>&lt;form id=\"messageCreateForm\" method=\"post\" action=\"\"&gt;\n</code></pre>\n\n<p>Note that the action is empty.</p>\n\n<p>Is this the correct way to use the RenderAction helper and is it correct to use it in cases like that?</p>\n\n<p>UPDATE:\nActually renaming the partial view to _MessageForm renders the form correcly.</p>\n"},{"tags":["c#","asp.net-mvc","linq","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13092098,"title":"Translate SQL query to LINQ (subqueries)","body":"<p>Hi have a site where users can vote on images.\nThe votes are stored in table Votes where I store the Id of the submission (FK_id)</p>\n\n<p><br />\nThe tables are:</p>\n\n<p><strong>Table Submissions</strong><br />\nId (uniqueidentifier)<br />\nName (varchar(50))<br />\nImage (varchar(50))<br /></p>\n\n<p><strong>Table Votes</strong><br />\nId (int)<br />\nFk_id (foreign key to Submissions.Id)<br /></p>\n\n<p>I'm new to linq so I don't know how to translate this:</p>\n\n<pre><code>SELECT *, \n    isnull((SELECT count(*) \n    FROM Votes\n    WHERE Fk_id = S.Id      \n    GROUP BY Fk_id),0) as Votes \nFROM Submissions S\n</code></pre>\n\n<p>I wanted something like this:</p>\n\n<pre><code>List&lt;Model&gt; = (from p in ????\n               select new Model\n               {\n                   Name = p.Name,\n                   Image = p.Image,\n                   Votes = p.Votes               \n               }).ToList();\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1602,"score":2,"question_id":9500037,"title":"ASP MVC 4 Web API interface( WSDL)","body":"<p>I have get some information about ASP MVC 4 Web API .\nIt is look like good stuff for web services,\nbut how to create something like WSDL for my API like WCF service does ?\nhow 3d party component can use my service ?\nor i need to describe each my method manually ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","razor","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13076898,"title":"How to use multiple edit form using Html Helper","body":"<p>I want to make multiple editing page.\nBut I don't know how to use <code>TextBoxFor()</code>, <code>TextAreaFor()</code>, <code>ValidationMessageFor()</code> in a <code>foreach</code> loop.</p>\n\n<pre><code>@foreach (var note in Model.noteList)\n{\n    using(Html.BeginForm()){\n        @Html.Hidden(\"id\", note.id);\n        &lt;div class=\"userIdArea\"&gt;&lt;b&gt;@note.userId&lt;/b&gt;&lt;/div&gt;  \n        &lt;div class=\"noteArea\"&gt;@note.content&lt;/div&gt;  \n        &lt;br /&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.note.userId, new { @Value = note.userId })\n            @Html.ValidationMessageFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(note =&gt; note.noteList)\n            @Html.ValidationMessageFor(model =&gt; model.note.content)\n        &lt;/div&gt;\n        &lt;input type=\"submit\" value=\"Edit\" /&gt;\n    }\n}\n</code></pre>\n\n<p>The code above cannot set the textarea value, and I don't think it's the right way to do that.</p>\n\n<p>EDIT )</p>\n\n<p>I changed code like this,</p>\n\n<pre><code>@foreach (var note in Model.noteList)\n{\n    using(Html.BeginForm()){\n        @Html.Hidden(\"note.id\", note.id);\n        &lt;div class=\"userIdArea\"&gt;&lt;b&gt;@note.userId&lt;/b&gt;&lt;/div&gt;  \n        &lt;div class=\"noteArea\"&gt;@note.content&lt;/div&gt;  \n        &lt;br /&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; note.userId)\n            @Html.ValidationMessageFor(model =&gt; note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(model =&gt; note.content)\n            @Html.ValidationMessageFor(_ =&gt; note.content)\n        &lt;/div&gt;\n        &lt;input type=\"submit\" value=\"Edit\" /&gt;\n    }\n}\n</code></pre>\n\n<p>and I still have problem with using ValidationMessageFor().</p>\n\n<p>I make only one content empty and submit form then it happens like this,</p>\n\n<p><img src=\"http://i.stack.imgur.com/snCKK.jpg\" alt=\"enter image description here\"></p>\n\n<p>How should I do put ValidationMessage on right place?</p>\n\n<p>[EDIT #2]</p>\n\n<p>Yes, I have create form too in same view,</p>\n\n<p>the View code is like this,</p>\n\n<pre><code>@model MemoBoard.Models.NoteViewModel\n\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Note&lt;/h2&gt;\n&lt;br /&gt;&lt;br /&gt;\n@using(Html.BeginForm()){\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.note.userId)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(model =&gt; model.note.userId)\n        @Html.ValidationMessageFor(model =&gt; model.note.userId)\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.note.content)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextAreaFor(model =&gt; model.note.content, new { rows = 4})\n        @Html.ValidationMessageFor(model =&gt; model.note.content)\n    &lt;/div&gt;\n    &lt;input type=\"submit\" value =\"Save\" /&gt;\n} @* //End create form *@ \n\n&lt;!-- List Area --&gt;\n\n@foreach (var note in Model.noteList)\n{\n    using(Html.BeginForm()){\n        @Html.Hidden(\"note.id\", note.id);\n        @Html.EditorForModel()\n        &lt;div class=\"userIdArea\"&gt;&lt;b&gt;@note.userId&lt;/b&gt;&lt;/div&gt;  \n        &lt;div class=\"noteArea\"&gt;@note.content&lt;/div&gt;  \n        &lt;br /&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; note.userId, new { id = \"A\"})\n            @Html.ValidationMessageFor(model =&gt; note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(model =&gt; note.content)\n            @Html.ValidationMessageFor(model =&gt; note.content)\n        &lt;/div&gt;\n        &lt;input type=\"submit\" value=\"Edit\" /&gt;\n    }\n}\n</code></pre>\n\n<p>And,</p>\n\n<p>Model,</p>\n\n<pre><code>public class Note\n{\n    [Key]\n    public int id { get; set; }\n\n    [Required(ErrorMessage=\"Content is required\")]\n    [DisplayName(\"Note\")]\n    public string content { get; set; }\n    public DateTime date { get; set; }\n\n    [Required(ErrorMessage = \"User ID is required\")]\n    [DisplayName(\"User ID\")]\n    public string userId {get; set;}\n    public Boolean isPrivate { get; set; }\n    public virtual ICollection&lt;AttachedFile&gt; AttachedFiles { get; set; }\n\n}\n</code></pre>\n\n<p>View Model,</p>\n\n<pre><code>public class NoteViewModel\n{\n    public IEnumerable&lt;Note&gt; noteList { get; set; }\n    public Note note { get; set; }\n}\n</code></pre>\n\n<p>Controller,</p>\n\n<pre><code>public ActionResult Index()\n{\n    var notes = unitOfWork.NoteRepository.GetNotes();\n    return View(new NoteViewModel(){noteList=notes.ToList(), note = new Note()});\n}\n\n[HttpPost]\npublic ActionResult Index(Note note)\n{\n    try\n    {\n    if (ModelState.IsValid)\n    {\n        unitOfWork.NoteRepository.InsertNote(note);\n        unitOfWork.Save();\n        return RedirectToAction(\"Index\");\n    }\n    }catch(DataException){\n    ModelState.AddModelError(\"\", \"Unable to save changes. Try again please\");\n    }\n\n    var notes = unitOfWork.NoteRepository.GetNotes();\n    return View(new NoteViewModel() { noteList = notes.ToList(), note = new Note() });\n}\n</code></pre>\n"},{"tags":["javascript",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13092389,"title":"Passing server side data to JavaScript via Razor","body":"<p>I have an Asp.Net MVC web application that displays 2 select inputs side by side.  The first select is populated via Razor and drives the second so when the user selects an item an Ajax call is made to populate the second drop down.  </p>\n\n<p>I need to implement a feature that will allow the page to accept an id for the second drop-down on the URL and when the page is loaded populate both selects and select the appropriate values in each.</p>\n\n<p>For example, if the drop-downs represented countries and states, the url could contain the unique id for a particular state.  The controller would then look up the associated country and pass both the country and state ids back to the page.  When this happens, the page would automatically select that country in the first select, then load the appropriate list of states in the other and select the chosen state.</p>\n\n<p>Currently, my controller returns the two ids to the page in the view model object and there is inline JavaScript that assigns them to variables.  Then some JavaScript checks if the ids are not null and takes the appropriate action to select and load the data in the select inputs.  I am not a big fan of coupling my JavaScript to my view in this way but I can't think of a better solution.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","automapper"],"answer_count":4,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":3972,"score":14,"question_id":1494167,"title":"How to Configure AutoMapper Once Per AppDomain","body":"<p>My current project with assemblies for the domain model, MVC web application, and unit tests. How can I set up the AutoMapper configuration so that all assemblies reference the same configuration? </p>\n\n<p>I would guess that I could put items in Global.asax for the web app, but how can I use that in the unit tests? Also, if the config is in Global.asax, will the domain model pick up the map?</p>\n\n<p>Many thanks,</p>\n\n<p>KevDog.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","signalr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":536,"score":0,"question_id":13041169,"title":"Using signalR to display online users in real time, good idea?","body":"<p>I want to put a count of how many users are online and make it update in real time as users join so everyone knows how many users are online.  I am wondering if this would be bad by design because as more and more users come on it would have to send a message to possibly thousands-millions of clients.  Now, I understand you can always scale to handle the load, but is that even a good idea to do that?  will it be light on the server or will it consume a lot of resources to have to update the amount of online users every time someone joins?</p>\n"},{"tags":["javascript","asp.net-mvc","requirejs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13075886,"title":"Starting an ASP.NET MVC 4 project. Is it necessary to use RequireJS if I'm using bundling?","body":"<ul>\n<li>If RequireJS makes it so that multiple js files are combined into a\nsingle main.js file, is it essentially the same as ASP.NET's script\nbundling functionality?</li>\n<li>Would the only bonus of using RequireJS in <em>addition</em> to bundling be the ability to have certain scripts be loaded according to RequireJS configuration?</li>\n</ul>\n\n<p>I'm very new to both bundling and RequireJS, but after doing some reading, it seems like bundling takes care of multiple requests to load several js files. Are there any other things I might be missing out on with regards to using RequireJS with bundling?</p>\n"},{"tags":["c#","asp.net-mvc","image-uploading"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":3,"view_count":62,"score":-4,"question_id":13090161,"title":"Display uploaded images and also display many images stored in database using ASP.Net MVC","body":"<p>I'm using asp.net MVC and sql server. I have created a page that get some information from user like name,price,... and also one image, and the page repeat it for 30 times. It means every time that user submit the firm all of the information save to database and fields become clear and the user must submit the next information. Now I want that every time that user submit the form the page display the previous uploaded images beside the it. But I don't know how to display the uploaded image. and also I want to know how to display all of the previous images. Please help me and show me some code! Many Thanks.</p>\n"},{"tags":["c#","sql-server","asp.net-mvc","charts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":246,"score":0,"question_id":8489730,"title":"chart.GetHtmlImageMap not working as expected","body":"<p>Gents,</p>\n\n<p>I need help to create an imagemap to my web app's charts. After reading many resources, here and on the web, I end up with the following problem:</p>\n\n<p>The Problem:\n   On my view I' am calling @Html.Action(RenderMyMap), that renders an &lt;map&gt; tag, with an atribute coords=0,0,0,0. </p>\n\n<p>What Am I doing:\nMy project is organized this way:</p>\n\n<p>-Core.cs: Class responsable to create the System.Web.UI.DataVisualization.Charting.Chart objects;\n   -ClientController: With an existing Chart object, I'm saving it with Chat.SaveImage(memoryStream,format), storing it in a session variable as a byte array, and returning a ContentResult object, like in return Content(chart.GetHtmlImageMap());\n   -ClientController: After that, I'am using the session variable to actually render the chart, like in return File(chartByteArray,\"image/png\");\n   -Index.cshtml: Finally in my view I'am calling method on the ClientController to render the map and the chart.</p>\n\n<p>My setup:\n.NET 4.0, MVC3, SQL Server 2008.</p>\n\n<p>Bellw goes the code of one of my methods, on the ClientController, to generate and return n ImageMap.</p>\n\n<pre><code>    public ActionResult ChartMapGetClientsByType()\n    {\n        System.Web.UI.DataVisualization.Charting.Chart chart = null;\n        if (Session[\"GraficoClientePorTipo\"] != null)\n        {\n            chart = (System.Web.UI.DataVisualization.Charting.Chart)Session[\"GraficoClientePorTipo\"];\n            Session.Remove(\"GraficoClientePorTipo\");\n        }\n        else\n        {\n            chart = MeuMRP.Core.Chart.CreateChartImageMap(\"GraficoClientePorTipo\", SeriesChartType.Pie);\n            chart.IsMapEnabled = true;\n            System.IO.MemoryStream ms = new System.IO.MemoryStream();\n            chart.SaveImage(ms, ChartImageFormat.Png);\n            Session[\"GraficoClientePorTipo\"] = ms.ToArray();\n        }\n        return Content(chart.GetHtmlImageMap(\"GraficoClientePorTipo\"));\n    }\n</code></pre>\n\n<p>What Am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","t4","mvcscaffolding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13090663,"title":"MvcScaffolding for a Services/Repository pattern?","body":"<p>Does anybody know of any examples of an MvcScaffolding T4 template for building Services/Repository pattern?</p>\n\n<p>I know that MvcScaffolding comes with a Repository scaffold built in, but I'd like to have it also build a Services layer at the same time.  I've spent an hour or so looking around but haven't seen what I'm looking for.</p>\n\n<p>Suggestions?  Thanks!</p>\n"},{"tags":["asp.net-mvc","database-connection","aspnetdb"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13078123,"title":"ASP.NET MVC3 Aspnetdb Sql Production Server","body":"<p>I created a fully functioning web application (MVC MusicStore, downloaded from here: <a href=\"http://mvcmusicstore.codeplex.com/\" rel=\"nofollow\">http://mvcmusicstore.codeplex.com/</a>).</p>\n\n<p>The application created an ASPNETDB.MDF file, and a MusicStoreDB.mdf file.\nI used SQL Server Management 2008 R2.</p>\n\n<p>The problem is that after I deploy the application on a host server,\nwhen clicking on \"Register\" link, the default error page is displayed.\nWhen trying to log in, the default error page is displayed yet again.\nIt appears that the host server (which is SQL 2008 compatible) can read data from the MusicStoreDB.mdf file, but has no access to the ASPNETDB.MDF file. It is not possible to log in or register users.</p>\n\n<p>I did change the connection string in the web.config file to the host server address, it works fine.\nI also created the ASPNETDB tables in the MusicStoreDB by using aspnet_regsql, but the errors persist.\nAlso, the MusicStoreDB file contained no data after Publish (though there is sample data in a cs file). I know the host server can read data from this file because I manually added data through a local SQL server.</p>\n\n<p>I have two questions:\na. What are the steps to correctly deploy the application and databases so that it would be possible to register and log in? How can the <em>both</em> mdf files work in consort?\nb. How can the data in the SampleData.cs file be recreated in the MusicStoreDB.mdf file?</p>\n\n<p>I haven't been able to find an answer over the web, though I've been searching for a week...</p>\n"},{"tags":["asp.net-mvc","asp.net-roles"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13089361,"title":"GenericPrincipal roles not available in MVC views","body":"<p>In our MVC app, we're by-passing the RolesProvider in favor of just caching our roles in a cookie that will be passed around. Following several suggestions around the interwebs, we're leveraging the <code>Application_AuthenticateRequest</code> event, like so:</p>\n\n<pre><code>    protected void Application_AuthenticateRequest(Object sender, EventArgs e)\n    {\n        var user = HttpContext.Current.User;\n        if (user == null || !user.Identity.IsAuthenticated)\n        {\n            return;\n        }\n\n        // read the roles from the cookie and set a custom generic principal\n        var fi = (FormsIdentity)HttpContext.Current.User.Identity;\n        var httpCookie = HttpContext.Current.Request.Cookies[\"Roles\"]; // custom cookie set during authentication\n        if (httpCookie != null)\n        {\n            string rolesCookie = httpCookie.Value;\n            var pmUserRoles = rolesCookie.Split(',');\n            GenericPrincipal gp = new GenericPrincipal(fi, pmUserRoles);\n            HttpContext.Current.User = gp;\n        }\n    }\n</code></pre>\n\n<p>I'm stepped through that method and threw in a couple conditionals with some of our roles, and immediately after the current User is set, <code>User.IsInRole(\"rolename\")</code> works like a charm.</p>\n\n<p>But then, when trying to make the same call in a view:</p>\n\n<pre><code>@if(Request.IsAuthenticated)\n{\n    if (User.IsInRole(\"role1\") || User.IsInRole(\"role2\"))\n    {\n        &lt;!-- show something --&gt;\n    }\n    else if (User.IsInRole(\"role3\"))\n    {\n        &lt;!-- show something else --&gt;\n    }\n}\n</code></pre>\n\n<p>The roles can't be accessed. When I dig into the User at this point, it looks like the roles don't even exist, right after I confirmed that the User has them at the end of the <code>AuthenticateRequest</code> event.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8717085/setting-roles-by-using-genericprincipal-instance\">This question</a> has similar problems, I was going to just comment there but I guess I can't because of my low rep - but it looks like this isn't just an issue with me.</p>\n\n<p>I also looked at <a href=\"http://stackoverflow.com/questions/2767616/asp-net-replace-genericprincipal\">this question</a> which has a similar approach, but this is giving me the same result.</p>\n\n<p>Any suggestions or comments on what's going on?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13075604,"title":"ASP.Net MVC3 Routing Issue","body":"<p>I am working on a deal website and have defined the following route in the global.asax.</p>\n\n<pre><code>routes.MapRoute(\n    \"AboutFooter\",\n    \"about-bicker-shop\",\n    new { controller = \"Footer\", action = \"About\" }\n);\n\nroutes.MapRoute(\n    \"ContactFooter\",\n    \"contact-bickershop\",\n    new { controller = \"Footer\", action = \"Contact\" }\n);\n\nroutes.MapRoute(\n    \"PrivacyPolicyFooter\",\n    \"privacy-policy\",\n    new { controller = \"Footer\", action = \"PrivacyPolicy\" }\n);\n\nroutes.MapRoute(\n    \"TermsAndConditionsFooter\",\n    \"terms-and-conditions\",\n    new { controller = \"Footer\", action = \"TermsAndConditions\" }\n);\n\nroutes.MapRoute(\n    \"SiteMapFooter\",\n    \"sitemap\",\n    new { controller = \"Footer\", action = \"SiteMap\" }\n);\n\nroutes.MapRoute(\n    \"FAQFooter\",\n    \"faq\",\n    new { controller = \"Footer\", action = \"FAQ\" }\n);\n\nroutes.MapRoute(\n    \"UnsubscribeFooter\",\n    \"unsubscribe\",\n    new { controller = \"Footer\", action = \"Unsubscribe\" }\n);\n\nroutes.MapRoute(\n    \"GetDealsByCity\",\n    \"daily-bickers/{cityName}\",\n    new { controller = \"Home\", action = \"Home\" }\n);\n\nroutes.MapRoute(\n    \"GetDealsbyCategory\",\n    \"daily-bickers/{cityname}/{category}\",\n    new { controller = \"Home\", action = \"GetDealsByCategory\" }\n);\n\nroutes.MapRoute(\n    \"GetDealDetails\",\n    \"{cityName}/{dealName}\",\n    new { controller = \"Home\", action = \"GetDealsByDealName\" }\n);\n\nroutes.MapRoute(\n    \"DealCheckout\",\n    \"{cityName}/{dealName}/checkout\",\n    new { controller = \"Home\", action = \"CheckoutDealByDealName\" }\n);\n\nroutes.MapRoute(\n    \"Default\", // Route name\n    \"{controller}/{action}/{id}\", // URL with parameters\n    new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>It works fine till the time I am viewing the details of the deal but I am getting an error when I click on the buy button to buy the deal. </p>\n\n<p>On further research I found that on clicking the buy button, the code is invoking the <code>GetDealsByDealName</code> action and not the action <code>CheckoutDealByDealName</code>. Please suggest me the solution.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13083348,"title":"JavaScript inside Section in PartialView","body":"<p>I render section in HEAD od HTML page and PartialView in the middle of the page like the code shows below</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    @RenderSection(\"Scripts\", false)\n&lt;/head&gt;\n.....\n    @Html.Partial(\"_MenuAdmin\")\n&lt;/html&gt;\n</code></pre>\n\n<p>In PartialView _MenuAdmin I have some javascript.</p>\n\n<pre><code>@section Scripts\n{\n    &lt;script type=\"text/javascript\"&gt;\n        alert(\"Test\");\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p>So, the problem is that same JavaScript code doesn't loaded. If instead PartialView I use View JavaScript loaded properly.</p>\n\n<p>How I can load JavaScript in my sample?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13087408,"title":"how to give virtual path for filtering data in MVC","body":"<p>Hi am filtering data according to dropdown list</p>\n\n<p>i want to specify path like</p>\n\n<pre><code>/UserManagement/List?filter=E\n</code></pre>\n\n<p>when i filter data according to character 'E'</p>\n\n<p>i have used script like</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n\n            $(function () {\n                $('#ddlUserTypeList').change(function () {\n                    var UserTypeListId = $(\"#ddlUserTypeList option:selected\").val();\n                    debugger;\n                    if (UserTypeListId != \"L\") {\n                        debugger;                            \n                        $.post(\"/UserManagement/List?filter=E\");                            \n                    }\n                    else {\n                        debugger;\n                        //alert(\"learner\");\n                        $.post(\"/UserManagement/List?filter=L\");\n                        //alert(\"learner\");\n                    }                        \n            });\n            });\n        });\n            &lt;/script&gt;\n</code></pre>\n\n<p>Its not redirecting to proper url </p>\n\n<p>its taking /UserManagement/List this path</p>\n\n<p>In controller i have given</p>\n\n<p>public ActionResult List(string sortOrder, string currentFilter, string searchString, int? page, string filter)</p>\n\n<p>how the path will change according to filter </p>\n"},{"tags":["jquery","asp.net-mvc","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13087997,"title":"How to Pass ID to MVC ActionResult using jQuery?","body":"<p>How do I pass the id retrieved from radiobuttonfor to MainPage controller - Edit1 actionresult in View. Anyhelp will be appreciated! Thanks!</p>\n\n<p>//View in for loop to display contents and radiobutton</p>\n\n<pre><code>@foreach (var item in Model)\n            {\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.SurveyTitle)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.DateCreated)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.DateClosing)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.User)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.RadioButtonFor(modelItem =&gt; item.SurveyId, new {id = item.SurveyId})\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            }\n\n\n          &lt;button type=\"submit\" class=\"btn btn-primary\" id=\"edit\"&gt;Edit&lt;/button&gt;\n</code></pre>\n\n<p>//Script for button to detect which radiobutton id is selected and submit</p>\n\n<pre><code>&lt;script&gt;            \n        $('#edit').click(function () {\n\n            var id = $('input[type=radio]:checked').val();\n            alert(id);\n\n\n        });\n\n         &lt;/script&gt;\n</code></pre>\n\n<p>//Controller to get the id and take surveyid out      </p>\n\n<pre><code>[HttpPost]\n             public ActionResult Edit1(int id=0)\n            {\n                survey survey = db.surveys.Single(s =&gt; s.SurveyId == id);\n                if (survey == null)\n                {\n                    return HttpNotFound();\n                }\n                return View(survey);\n            }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-5","asp.net-mvc-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":133,"score":1,"question_id":13073756,"title":"MVC Validation Fundamentals (with Entity Framework)","body":"<p>MVC Validation Fundamentals (with Entity Framework)</p>\n\n<p>Scenario:</p>\n\n<p>I have a model class as below (autogenerated via Entity Framework EF.x DbContext Generator).</p>\n\n<p>(There is no view model at the moment).</p>\n\n<pre><code>public partial class Activity\n{\n    public int Id { get; set; }\n\n    public byte Progress { get; set; }\n    public decimal ValueInContractCurrency { get; set; }\n    public System.DateTime ForecastStart { get; set; }\n    public System.DateTime ForecastEnd { get; set; }\n\n    public int DepartmentId { get; set; }   \n    public int OwnerId { get; set; }\n    public int StageId { get; set; }\n    public int StatusId { get; set; }\n\n    public virtual Department Department { get; set; }\n    public virtual Owner Owner { get; set; }\n    public virtual Stage Stage { get; set; }\n    public virtual Status Status { get; set; }\n}\n</code></pre>\n\n<p>When I submit a blank form on the strongly-typed view, I get these validation messages:</p>\n\n<p>The Progress field is required.</p>\n\n<p>The ValueInContractCurrency field is required.</p>\n\n<p>The ForecastStart field is required.</p>\n\n<p>The ForecastEnd field is required.</p>\n\n<p>i.e. all the fields in the db table.</p>\n\n<p>If I fill these in, and submit again, then the controller gets called. The controller then returns back to the view page due to IsValid being false.</p>\n\n<p>The screen is then redisplayed with these validation messages:</p>\n\n<p>The StageId field is required.</p>\n\n<p>The DepartmentId field is required.</p>\n\n<p>The StatusId field is required.</p>\n\n<p>The OwnerId field is required.</p>\n\n<p>i.e. all the foreign key fields in the db table (these are also all select boxes).</p>\n\n<p>If I fill these in, the form then submits succesfully and is saved to the db.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>Where is the validation coming from, given that I have not used any [Required] attributes? Is this something to do with entity framework?</p></li>\n<li><p>Why is the form not validating everything right away client-side, what's different about foreign keys (or select boxes) that they are only checked by IsValid() even though they are empty and therefore clearly invalid?</p></li>\n<li><p>How do you make everything get validated in one step (for empty fields), so the user does not have to submit the form twice and all validation messages are shown at once? Do you have to turn off client side validation?</p></li>\n</ol>\n\n<p>(I tried adding [Required] attributes to the foreign key fields, but that didn't seem to make any difference (presumably they only affect IsValid). I also tried calling Html.EnableClientValidation() but that didn't make any difference either).</p>\n\n<p>4..Lastly, I've seen people using [MetadataType[MetadataType(typeof(...)]] for validation. Why would you do that if you have a viewmodel, or is it only if you don't?</p>\n\n<p>Obviously I'm missing some fundamentals here, so in addition if anyone knows of a detailed tutorial on how exactly the MVC validation process works step-by-step including javascript/controller calls, rather than just another essay on attributes, then I could do with a link to that too :c)</p>\n\n<hr>\n\n<p>More info for Mystere Man:</p>\n\n<p>Solution setup as follows:</p>\n\n<p>.NET4</p>\n\n<p>MVC3</p>\n\n<p>EF5 </p>\n\n<p>EF5.x Db Context Generator </p>\n\n<p>\"Add Code Generation Item\" used on edmx design surface to associate EF.x Db Context Generator files (.tt files)</p>\n\n<p>Controller looks like this:</p>\n\n<pre><code>    // GET: /Activities/Create\n    public ActionResult Create()\n    {\n        ViewBag.DepartmentId = new SelectList(db.Departments, \"Id\", \"Name\");\n        ViewBag.OwnerId = new SelectList(db.Owners, \"Id\", \"ShortName\");\n        ViewBag.ContractId = new SelectList(db.Contracts, \"Id\", \"Number\");\n        ViewBag.StageId = new SelectList(new List&lt;string&gt;());\n        ViewBag.StatusId = new SelectList(db.Status.Where(s =&gt; s.IsDefaultForNewActivity == true), \"Id\", \"Name\");\n        return View();\n    } \n\n\n    // POST: /Activities/Create\n    [HttpPost]\n    public ActionResult Create(Activity activity)\n    {\n        if (ModelState.IsValid)\n        {\n            db.Activities.Add(activity);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");  \n        }\n\n        ViewBag.DepartmentId = new SelectList(db.Departments, \"Id\", \"Name\");\n        ViewBag.OwnerId = new SelectList(db.Owners, \"Id\", \"ShortName\");\n        ViewBag.ContractId = new SelectList(db.Contracts, \"Id\", \"Number\");\n        ViewBag.StageId = new SelectList(db.Stages, \"Id\", \"Number\");\n        ViewBag.StatusId = new SelectList(db.Status, \"Id\", \"Name\");\n        return View(activity);\n    }\n</code></pre>\n\n<p>View is like this:</p>\n\n<pre><code>&lt;!-- this refers to  the EF.x DB Context class shown at the top of this post --&gt;\n@model RDMS.Activity  \n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Activity&lt;/legend&gt;\n\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.StageId, \"Stage\")\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.DropDownList(\"StageId\", String.Empty)\n            @Html.ValidationMessageFor(model =&gt; model.StageId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Progress)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Progress)\n            @Html.ValidationMessageFor(model =&gt; model.Progress)\n        &lt;/div&gt;\n\n    &lt;!-- ETC...--&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":160,"score":0,"question_id":10007748,"title":"VS2010 Project doesnt build but doesnt show any errors or warnings","body":"<p>Im stumped: <code>0 Errors, 0 Warnings, 0 Messages</code> but  the <code>output</code> window says<br> <code>Build: 1 succeeded or up-to-date, 1 Failed, 0 Skipped</code></p>\n\n<p>I have two projects, <code>A</code> is a web application, <code>B</code> is a dll referenced by <code>A</code>. <code>B</code> by its self builds ok.</p>\n\n<p>What could be wrong?</p>\n"},{"tags":["c#","asp.net-mvc","mvc","model-validation","validationattribute"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":234,"score":4,"question_id":12938576,"title":"Best approach for complex model/submodel validation (MVC)","body":"<h1>Problem</h1>\n\n<p>I know there is a lot of ways of doing Model validation within MVC, and there is quite a lot of documentation regarding this topic. However, I'm not quite sure what's the best approach for validating properties of the <strong>Model</strong> which are <em>\"Sub Model\"</em> of <strong>same type</strong>. </p>\n\n<p>Keep in mind the following</p>\n\n<ul>\n<li>I still want to to take profit of the <code>TryUpdateModel/TryValidateModel</code> methods</li>\n<li>Each of these <em>\"sub models\"</em> have strongly typed views</li>\n<li>There is one strongly typed view for the <code>MainModel</code> class that renders the overall display view</li>\n</ul>\n\n<p>It might sound a little confusing but i'll throw in some code to clarify. Take as example the following classes:</p>\n\n<p><strong>MainModel:</strong></p>\n\n<pre><code>class MainModel{\n    public SomeSubModel Prop1 { get; set; }\n    public SomeSubModel Prop2 { get; set; }\n}\n</code></pre>\n\n<p><strong>SomeSubModel:</strong></p>\n\n<pre><code>class SomeSubModel{\n      public string Name { get; set; }\n      public string Foo { get; set; }\n      public int Number { get; set; }\n}\n</code></pre>\n\n<p><strong>MainModelController:</strong></p>\n\n<pre><code>class MainModelController{\n\n    public ActionResult MainDisplay(){\n         var main = db.retrieveMainModel();\n         return View(main); \n    }\n\n    [HttpGet]\n    public ActionResult EditProp1(){\n         //hypothetical retrieve method to get MainModel from somewhere\n         var main = db.retrieveMainModel();\n\n         //return \"submodel\" to the strictly typed edit view for Prop1\n         return View(main.Prop1);\n    }\n\n    [HttpPost]\n    public ActionResult EditProp1(SomeSubModel model){\n\n         if(TryValidateModel(model)){\n              //hypothetical retrieve method to get MainModel from somewhere\n              var main = db.retrieveMainModel();\n              main.Prop1 = model;\n              db.Save();\n\n              //when succesfully saved return to main display page \n              return RedirectToAction(\"MainDisplay\");\n         }\n         return View(main.Prop1);\n    }\n\n    //[...] similar thing for Prop2 \n    //Prop1 and Prop2 could perhaps share same view as its strongly \n    //typed to the same class\n}\n</code></pre>\n\n<p>I believe this code all make sense until now (correct me if it's not the case) because <code>TryValidateModel()</code> is validating against a model with no <code>ValidationAttribute</code>. </p>\n\n<p>The problem lies here, where would be the best place, or what would be the best and most elegant way to have <strong>different validation constraints</strong> for <code>Prop1</code> and <code>Prop2</code> while still taking advantage of <code>TryValidateModel()</code> and not filling the Edit method with conditional statements and <code>ModelState.AddModelError()</code></p>\n\n<p>Usually you could have validation attributes in the <code>SomeSubModel</code> class, but it wouldn't work in this case, because there is different constraints for each property. </p>\n\n<p>Other option is that there could be Custom validation attribute in the <code>MainModel</code> class, but it also wouldn't work in this case because the <code>SomeSubModel</code>object is passed directly to the view and when validating has no reference to its <code>MainModel</code> object.</p>\n\n<p>The only left option I can think about is a ValidationModel for each property, but I am not quite what would be the best approach for this.</p>\n\n<h1>Solution</h1>\n\n<p>Here's solution I implemented, based of @MrMindor's answer.</p>\n\n<p><strong>Base ValidationModel class:</strong></p>\n\n<pre><code>public class ValidationModel&lt;T&gt; where T : new()\n{\n    protected ValidationModel() {\n        this.Model = new T();\n    }\n    protected ValidationModel(T obj) { \n        this.Model = obj; \n    }\n\n    public T Model { get; set; }\n}\n</code></pre>\n\n<p><strong>Validation Model for Prop1</strong></p>\n\n<pre><code>public class Prop1ValidationModel:ValidationModel&lt;SomeSubModel&gt;\n{\n    [StringLength(15)]\n    public string Name { get{ return base.Model.Name; } set { base.Model.Name = value; } }\n\n    public Prop1ValidationModel(SomeSubModel ssm)\n        : base(ssm) { }\n}\n</code></pre>\n\n<p><strong>Validation Model for Prop2</strong></p>\n\n<pre><code>public class Prop2ValidationModel:ValidationModel&lt;SomeSubModel&gt;\n{\n    [StringLength(70)]\n    public string Name { get{ return base.Model.Name; } set { base.Model.Name = value; } }\n\n    public Prop2ValidationModel(SomeSubModel ssm)\n        : base(ssm) { }\n}\n</code></pre>\n\n<p><strong>Action</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult EditProp1(SomeSubModel model){\n\n     Prop1ValidationModel vModel = new Prop1ValidationModel(model);\n     if(TryValidateModel(vModel)){\n\n          //[...] persist data\n\n          //when succesfully saved return to main display page \n          return RedirectToAction(\"MainDisplay\");\n     }\n     return View(model);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13088948,"title":"MVC 3 Model Properties Without Binding","body":"<p>Is it possible to include a property in a model that is not bound to the database?  For instance:</p>\n\n<pre><code>Public Class Tbl_Forum_Topic\n\n    &lt;Key()&gt; Public Property FTopic_ID() As Integer\n    &lt;ForeignKey(\"Tbl_Forum\")&gt; _\n    Public Property FTopic_Forum_ID() As Integer\n    Public Property FTopic_Employee_ID() As Integer\n    Public Property FTopic_Resource_ID() As Integer\n    Public Property FTopic_Title() As String\n    Public Property FTopic_Content() As String\n    Public Property FTopic_Create_Date() As Nullable(Of Date)\n    Public Property FTopic__Deleted() As Nullable(Of Boolean)\n    Public Property FTopic_Deleted_Date() As Nullable(Of Date)\n    Public Property FTopic_Status() As Nullable(Of Boolean)\n    Public Property FTopic_Publish() As Nullable(Of Boolean)\n\n    Public Overridable Property Tbl_Forum() As Tbl_Forum\n\n    Public Overridable Property Tbl_Forum_Replies() As ICollection(Of Tbl_Forum_Reply)\n\n    Public Overridable Property Last_Reply_User_Name() As String\n\nEnd Class\n</code></pre>\n\n<p>The last item is called <code>Last_Reply_User_Name()</code>.  It is not in my database, but I want to loop through and perform a calculation in my controller action to set it based on values from other database tables.  I get an error <code>Invalid column name 'Last_Reply_User_Name'.</code> when I try this code.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13088260,"title":"Entity Framework One-Zer-One different behavior","body":"<p>Suppose you want to create a parent-child relationship in a table of users that will be the type of zero to one, we want to add further in the same way gender.</p>\n\n<pre><code>public class Gender\n{\n    [Key]\n    public virtual int GenderID { get; set; }\n\n    public virtual string GenderName { get; set; }\n\n    public virtual ICollection&lt;UserProfile&gt; UserProfiles { get; set; }\n}\n</code></pre>\n\n<p>and Userprofile </p>\n\n<pre><code>public class UserProfile\n{\n\n    [Key]\n    public virtual int UserId { get; set; }\n\n    public virtual UserProfile UserParent { get; set; }\n\n    public virtual int? ParentUserId { get; set; }\n\n    public virtual String UserName { get; set; }\n\n    public virtual Gender Gender { get; set; }\n\n    public virtual int? GenderID { get; set; }\n\n  }\n</code></pre>\n\n<p>for clarity</p>\n\n<pre><code>       modelBuilder.Entity&lt;UserProfile&gt;()\n            .HasOptional(c =&gt; c.UserParent);\n\n        // User -&gt; Gender\n        modelBuilder.Entity&lt;UserProfile&gt;()\n            .HasOptional(g =&gt; g.Gender);\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/IhvGJ.png\" alt=\"enter image description here\"></p>\n\n<p>Everything looks good, but at the moment I can not retrieve the data obtained from the Parent UserName.</p>\n\n<pre><code>   public IQueryable&lt;UserProfileListViewModel&gt; UserAllVM\n    {\n        get\n        {\n            var uservm = context.UserProfiles\n                .Select(l =&gt; new UserProfileListViewModel\n                { \n                    UserId = l.UserId,\n                    UserName = l.UserName,\n                    ParentUserId = l.ParentUserId ?? 0,\n                    //ParentUserName = this.context.UserProfiles.Where(e =&gt; e.UserId == l.ParentUserId).FirstOrDefault().UserName ?? \"\",\n                    ParentUserName = l.UserParent.UserName, **// this way make always null**\n                    GenderID = l.GenderID ?? 0,\n                    GenderName = l.Gender.GenderName ?? \"\",\n                });\n\n            return uservm;\n        }\n    }\n</code></pre>\n\n<p>Commented out the way now obtains parent UserName. Question is why I can't retrive Parent UserName - I miss sth ?</p>\n\n<p>Tx for help</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","debugging","override"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12211585,"title":"Override BuildManagerViewEngine.FileExists Method is called only in debug mode (MVC 3)","body":"<p>I'm building a plugin architecture with MVC 3, where the plugins are simply another MVC 3 application (.dll with views embedded).</p>\n\n<p>I've a class (PluginViewEngine) that inherits from RazorViewEngine and in that class I've the override for the method FileExists, where I check if the View virtualPath is from a plugin or not.</p>\n\n<p>In the Global.asax.cs file I call:</p>\n\n<pre><code>ViewEngines.Engines.Clear();\nViewEngines.Engines.Add(new PluginViewEngine(arrayWithViewAllViewLocations));\n</code></pre>\n\n<p>If I've  in the web.config file every time I call an action (from a plugin or not) the method FileExist is called and everything works, but if I remove the debug=\"true\", the method FileExist is only called for the non-plugin actions.</p>\n\n<p>I can't use debug to try to figure it out, because in debug mode everything works just fine.</p>\n\n<p>Can someone give me a clue why this happens or how to figure it out?</p>\n\n<p>Many thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","saas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":27,"score":-1,"question_id":13088326,"title":"Open source ASP.NET MVC project for a SaaS application","body":"<p>I am working on a personal project that offers a service online. I'd like put this out to the public. I don't want to reinvent the wheel and use an existing template/open source project and add my service specific functionality.</p>\n\n<p>The features I am looking for are:</p>\n\n<ol>\n<li>Support for different roles (I need to have an admin role, customer and preferred customer roles)</li>\n<li>An admin section where admins can manage user accounts, login as with users credentials for providing support</li>\n<li>Customer pages that are role specific (Ex: Some functionality can be used by preferred customers but not non preferred ones)</li>\n<li>Preferably a pricing/plans page with payment gateway integration</li>\n</ol>\n\n<p>These are some of the basic pages available in most of service sites online. Is there a MVC 3 (preferably 4) written in C# that I can use as a shell to build upon?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","application-pool","worker-process"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13012414,"title":"Can I get the Process ID of a worker process in a web application?","body":"<p>I have an application that runs in an application pool that has muliple worker processes.</p>\n\n<p>I need to access the process id in the controller to check some issues I have since I changed the application pool to use multiple worker processes.</p>\n"},{"tags":[".net","asp.net-mvc","mvc","asp.net-webforms"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":13085689,"title":".Net Or .net MVC ? Beginer in need of an opinion","body":"<p>When I began learning ASP I was told to download Visual Web Developer 2008 Express. In essence I wanted to start building sites with valid log ins, possible grocery carts and simple profile for users. I realized that I am going to have to dig deeper than simply a tutorial series and found myself choosing between classic ASP.NET and MVC. However, search results aren't very clear to me as to which I should be learning. \nIn order to make sites as listed above would you suggest learning MVC or classic ASP.NET? In a nutshell why?</p>\n"},{"tags":["asp.net-mvc","razor","dataannotations"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":991,"score":2,"question_id":7717690,"title":"Requiring a checkbox is checked using CheckBoxFor","body":"<p>I need to have a checkbox (for agreeing to terms) required on an MVC3 page.</p>\n\n<p>Here is my model:</p>\n\n<pre><code>[Required]\n[Display(\"I agree to the terms.\")]\npublic bool Agreement { get; set; }\n</code></pre>\n\n<p>Here is my view:</p>\n\n<pre><code>@Html.CheckBoxFor(m =&gt; m.Agreement)\n</code></pre>\n\n<p>However, the validation isn't happening -- it allows the form to be submitted regardless.</p>\n\n<p>I found that CheckBoxFor renders an additional hidden field, but I even tried rendering my own checkbox, and it still isn't getting validated:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"Agreement\" id=\"Agreement\" value=\"true\" data-val=\"true\"\n    data-val-required=\"You must agree to the terms before proceeding.\" /&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","asp.net-mvc","pdf","pdf-generation"],"answer_count":0,"favorite_count":3,"up_vote_count":3,"down_vote_count":1,"view_count":114,"score":2,"question_id":13070912,"title":"Is There A Free C# PDF Generator That Works In Medium Trust?","body":"<p>I have been looking through the usual suspects of PDF generators for C# (iTextSharp and PDFSharp etc).</p>\n\n<p>The problem is none of them work in a medium trust environment. Does anyone know of a library that does 100% work in medium trust? Preferably free, but at most $100 or $200?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Before someone comments iTextSharp works in medium trust if you change the <code>assembly.cs</code> to allow partially trusted callers, it doesn't. I have tried all the 'hacks' and it simply does not work in a medium trust environment - you get the following error even with the partially trusted caller line added.</p>\n\n<pre><code>Request for the permission of type 'System.Security.Permissions.\nSecurityPermission, mscorlib, Version=4.0.0.0, Culture=neutral, \nPublicKeyToken=b77a5c561934e089' failed.\n</code></pre>\n"},{"tags":["asp.net-mvc","session","dns","area"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13087207,"title":"asp.net mvc4 cross domain session lost","body":"<p>I'm creating a new web application using ASP.net MVC4 </p>\n\n<p>our application web site runs on 2 doamin names www.domain1.com &amp; www.domain2.com</p>\n\n<p>since there are lots of common controllers/view i implemented Areas that are bound to the domain</p>\n\n<pre><code>public override string AreaName\n        {\n            get\n            {\n                return \"NS1\";\n            }\n        }\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n            \"NS1_default\", \"{controller}/{action}\",\n            new { controller = \"Home\", action = \"Index\" },\n            new { hostname = new areaRedirect(\"www.domain1.com\") }\n        ).DataTokens[\"UseNamespaceFallback\"] = true;\n        }\n</code></pre>\n\n<p>And for domain2</p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n        \"NS2_default\", \"{controller}/{action}\",\n        new { controller = \"Home\", action = \"Index\" },\n        new { hostname = new areaRedirect(\"www.domain1.com\") }\n        ).DataTokens[\"UseNamespaceFallback\"] = true;\n    }\n</code></pre>\n\n<p>This works fine and does everything i need BUT..</p>\n\n<p>when i switch from one area to the other i loose my logged in session.</p>\n\n<p>is there a way to stay logged in? the account controller is common to both areas. </p>\n\n<p>so basically same app, same server just that my namespace happens to be a domain name</p>\n\n<p>instead of seeing www.somedomain/domain1/action we get www.domain1/action</p>\n\n<p>Thanks for your time </p>\n"},{"tags":["asp.net-mvc","mvc","view","model","alias"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13087424,"title":"In MVC is there a way to Alias the Model Properties to display in a html.Labelfor","body":"<p>In my users form I want to use the html.Labelfor  helper, but instead of  Model Property name of CatName, I would like  Category Name Instead. I know I could put this in a , but I have to reuse the names over and over. Below is example.</p>\n\n<p>Model Property:</p>\n\n<pre><code>public string CatName { get; set; }\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>@Html.LabelFor(model =&gt; model.CatName)  //Displays CatName , I want Category Name\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12507469,"title":"Jquery loads only after F5 in IE","body":"<p>I am using Jcrop jQuery to crop image in MVC3 application.</p>\n\n<p>following is my javacript function:</p>\n\n<pre><code>    jQuery(function ($) {\n    $('#imgLab').Jcrop(\n        {\n            onChange: showCoords,\n            onSelect: coordsSelected,\n            onRelease: clearCoords\n        }\n        );\n});\n</code></pre>\n\n<p>Image ID is 'imgLab'.</p>\n\n<p></p>\n\n<p>Image src path is coming from database.</p>\n\n<p>Now this work fine in FF,Safari and Chrome.\nbut in IE it only works after I press F5.\nCan anyone tell me what is wrong in code?</p>\n\n<p>Thanks in Advance.\nKhushbu</p>\n"},{"tags":["c#","asp.net-mvc","mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13085485,"title":"Loading selected radio buttons using an editor c#","body":"<p>In relation to this question:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/12883869/grouping-radio-buttons-in-c-sharp-mvc\">StackOverflow - Grouping radio buttons in c# mvc</a></p>\n\n<p>I have managed now to load and save the selected options from the form into a database but now the user may need to edit this.</p>\n\n<p>How do I load the view with the selected user's choices? I cannot see where you can set selected Answer. On load I am getting the default values selected</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13086276,"title":"How to fix 'microsoft.maintainability' build error?","body":"<p>I have a controller which contains a few private read only interface properties which it needs in order to get data by calling a service which is then used to populate models etc</p>\n\n<pre><code>private readonly ISomeInterface _someObject;\n</code></pre>\n\n<p>Which gets set in the Controllers constructor:</p>\n\n<pre><code>public ... (ISomeInterface someInterface, ...) {\n...\n_someObject = someObject\n}\n</code></pre>\n\n<p><code>_someObject</code> is then used in a call to the service layer to get data.</p>\n\n<p>I had to add another property to the controller but now when I build the soloution I get the following error:</p>\n\n<pre><code>CA1506 : Microsoft.Maintainability : 'ControllerName' is coupled with 87 different types from 30 different namespaces. Rewrite or refactor this class's methods to decrease its class coupling, or consider moving some of the class's methods to some of the other types it is tightly coupled with.\n</code></pre>\n\n<p>It asks me to reduce the coupling of the class, I understand that one way of doing this is to code against interfaces (abstractions) - which I'm already doing by adding the interface property? It seems by adding one more property it takes it past the threshold for flagging up this error.</p>\n\n<p>If I remove it, I can't get the data I need? What do I need to modify?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":19,"score":-2,"question_id":13085324,"title":"In asp.net resource.resx, can I reference another resource string , in same resex file","body":"<p>For reference, I am working on mvc3 application.\nSorry cant post image as I dont have those number of poits. Suppose I have String1 in my resource and I am defining string2, i have string2 content should be String1 + \"my some text\", is it possible?</p>\n"},{"tags":["html","asp.net-mvc","jquery-mobile","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13082804,"title":"Jquerymobile razor template not rendering html","body":"<p>I am using a razor template so I can reduce the amount of clutter in my mvc views when working on code. I have created \"section\" which will render as the seperate pages required for my mobile pages as follows:</p>\n\n<pre><code>&lt;div data-role=\"page\" id=\"page2\"&gt;\n&lt;div data-role=\"header\"&gt;\n    @if (IsSectionDefined(\"Header2\"))\n    {\n        @RenderSection(\"Header2\")\n    }\n    else\n    {\n    }\n&lt;/div&gt;\n&lt;div data-role=\"content\"&gt;\n    @if (IsSectionDefined(\"Content2\"))\n    {\n        @RenderSection(\"Content2\")\n    }\n    else\n    {\n    }\n&lt;/div&gt;\n&lt;div data-role=\"footer\"&gt;\n    @if (IsSectionDefined(\"Footer2\"))\n    {\n        @RenderSection(\"Footer2\")\n    }\n    else\n    {\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>I use the same template as above for up to 3 pages.</p>\n\n<p>My issue at the moment is I have assigned some code to my page 2 using:</p>\n\n<pre><code>@section Content2{\n&lt;div id=\"machinesearch\" class=\"ui-content\"&gt;\n    &lt;ul id=\"machinelist\" data-autodividers=\"true\" data-theme=\"d\" data-divider-theme=\"a\"\n        data-filter=\"true\" data-role=\"listview\"&gt;\n        @foreach (var item in Model.Plants)\n        {\n            &lt;li&gt;&lt;a href=\"#page1\" onclick=\"javscript:MachineSet($(this).find('input').val(),$(this).text());\"&gt;@item.Asset_Descriptor&lt;input id=\"Sap_ID\" type=\"hidden\" value=\"@item.Asset_SAP_ID\"/&gt;&lt;/a&gt;&lt;/li&gt;      \n        }\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>}</p>\n\n<p>And my link to show this page is:</p>\n\n<pre><code>$(\"#testbutton\").click(function(){\n\n$('#page2').trigger('pagecreate');\n$(\"#machinelist\").listview('refresh');\nalert(\"test\");\n\n});\n</code></pre>\n\n<p>But this does not seem to make any difference.</p>\n\n<p>Any ideas? </p>\n\n<p>I can see the data is all loaded in correctly when I view the html source of my first page which also contains the html for the second page. It seems to be because razor is injecting the data in to page 2 after the page 1 is loaded.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","view","render"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13071492,"title":"render view model on item click","body":"<p>The situation is as follows: I have a <code>Product</code> model which has many properties and one is a List of <code>Photo</code> objects, each <code>Photo</code> object having an <code>ID</code> and a <code>Name</code>. There is a Carousel View having a model a list of <code>Photos</code>. In <code>Product</code> View I have something like this:</p>\n\n<pre><code>@if (Model.Photos.Count &gt; 0)\n{\n    ....\n    &lt;a href=\"javascript:jsFunction()\".......\n</code></pre>\n\n<p>Where in javascript,the <code>jsFunction</code> looks like this:</p>\n\n<pre><code>function jsFunction()\n{\n  alert('@Html.Action(\"GetPhotosCarousel\", Model.Photos)');\n} \n</code></pre>\n\n<p>and the Controller function returns the partial view <code>_PhotosCarousel</code>.</p>\n\n<p>Now, the problem that <code>@Html.Action</code> executes on rendering the main view, <strong>NOT ON CLICK</strong>.</p>\n\n<p>How can I render the view <code>PhotosCarousel</code> just on click and not on displaying the page?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13079376,"title":"Would like to use generic base class as model for asp.net MVC view","body":"<p>I have a viewmodel class foo that is a generic</p>\n\n<pre><code>public abstract class Base&lt;T&gt;\n</code></pre>\n\n<p>and its child types set the class when they inherit from it like this</p>\n\n<pre><code>public class Child : Base&lt;Foo&gt;\n</code></pre>\n\n<p>I would like to use them in a view as the model like</p>\n\n<pre><code>@model Base&lt;T&gt;\n</code></pre>\n\n<p>but i have heard this is not possible. I've seen people suggest putting dynamic in place of T, but that does not work unless i replace Foo with dynamic also. Is there any way to design the viewmodels like that? I suppose I could pass the Child object in the viewbag instead of the model, but i'd rather not do that if possible. EDIT: (that viewbag thing wouldn't actually work now that i think about it because i'd need to be able to cast it to a Base to use it as one, and that's basically the problem i'm having now)</p>\n"},{"tags":["ajax","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13081222,"title":"Custom Html Controls Ajax updation","body":"<p>I have customized grid control which generates table when we give coloumn and table name where there is a feature for searching also available which updates the record and show the updated result in grid  while searching through ajax i am getting records updating but not showing in main page</p>\n\n<pre><code>        SqlParameter[] sqlParameter = {new SqlParameter(\"@table\",tabelName),\n                                      new SqlParameter(\"@Column1\",coloumn1),\n                                      new SqlParameter (\"@Column2\",coloumn2),\n                                      new SqlParameter(\"@AliasName1\",aliasName1),\n                                      new SqlParameter(\"@AliasName2\",aliasName2)\n\n                                      };\n\n        string gridHtml;\n        if (!isFilterCondition)\n        {\n             gridHtml = GenerateHtmlGrid(sqlParameter);\n        }\n        else\n        {\n            gridHtml = GenerateHtmlGridonSearch();\n        }\n        StringBuilder sb = new StringBuilder();\n        //Opening For Main page Search Control\n        sb.AppendFormat(\"&lt;table&gt;\");\n        sb.AppendFormat(\"&lt;tr&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;input id='txt_Search' type='text'  name='txt_Search'&gt;\");\n        sb.AppendFormat(\"&lt;input type='hidden' name='{0}' class='WorkItem'&gt;\", controlName);\n        sb.AppendFormat(\"&lt;/td&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;a href='#' id='searchlink'&gt;&lt;img src='../../Content/themes/base/images/16px-Searchtool_right.png' /&gt;&lt;/a&gt;\");\n        sb.AppendFormat(\"&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\");\n        //Closing For Main page Search Control\n\n        // Opening for the Dialog Box Div\n        sb.AppendFormat(\"&lt;div id='dialoggrid' title='{0}' &gt;\", popWindowTitle);\n        sb.AppendFormat(\"&lt;table&gt;\");\n        sb.AppendFormat(\"&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;select name='foo' id='foo'&gt;\");\n        sb.AppendFormat(\"&lt;option value=0&gt;{0}&lt;/option&gt;\", aliasName1);\n        sb.AppendFormat(\"&lt;option value=1&gt;{0}&lt;/option&gt;\", aliasName2);\n        sb.AppendFormat(\"&lt;/select&gt;\");\n        sb.AppendFormat(\"&lt;/td&gt;&lt;/tr&gt;\");\n        sb.AppendFormat(\"&lt;tr&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;label&gt;Search&lt;/label&gt;\");\n        sb.AppendFormat(\"&lt;/td&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;input id='txtGridSearch' type='text'  name='txtGridSearch'&gt;\");\n        //sb.AppendFormat(\"&lt;a href='#' id='SearchTree'&gt;&lt;img src='../../Content/themes/base/images/16px-Searchtool_right.png' /&gt;&lt;/a&gt;\");\n        sb.AppendFormat(\"&lt;/table&gt;\");\n\n        sb.AppendFormat(\"&lt;div id='div_grid'&gt;{0}&lt;/div&gt;\", gridHtml);\n        sb.AppendFormat(\"&lt;/div&gt;\");\n        // Closing  for the Dialog Box Div\n\n        //opening For Script Section \n        sb.AppendFormat(\"&lt;script type='text/javascript'&gt;\");\n\n        //Opening for Document Reddy\n        sb.AppendFormat(\"$(document).ready(function() {{ \");\n        sb.AppendFormat(\"$('#dialoggrid').dialog({{ autoOpen: false,modal: true,width: 350}});\");\n        //Function For SearchButton on Main Page Click \n        sb.AppendFormat(\"$('#searchlink').click(function() {{\");\n        sb.AppendFormat(\"$( '#dialoggrid').dialog('open');\");\n        sb.AppendFormat(\"}});\");\n        //Closing For SearchButton on Main Page Click \n\n        //opening For Textbox Search inside the Grid on Key Up Event\n        sb.AppendFormat(\"$('#txtGridSearch').keyup(function(){{\");\n        sb.AppendFormat(\"$.post('/CustomeControls/GridSearch')\");\n\n\n        sb.AppendFormat(\"}});\");\n        //Closeing For Textbox Search inside the Grid on Key Up Event\n\n        sb.AppendFormat(\"}});\");\n        //Closing For Document Reddy Function \n\n        sb.AppendFormat(\"&lt;/script&gt;\");\n        //Closing for Script Section \n\n\n        return new MvcHtmlString(sb.ToString());\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13080432,"title":"The parameters dictionary contains a null entry for parameter 'quoteId' of non-nullable type 'System.Int32' for method","body":"<p>The error full description:</p>\n\n<pre><code>System.ArgumentException: The parameters dictionary contains a null entry for  \n  parameter 'quoteId' of non-nullable type 'System.Int32' for method \n  'System.Web.Mvc.JsonResultGetQuoteSubTotal(Int32, System.String)' \n  in 'NI.Apps.WebSite.OliteBase.Controllers.QuotationController'. \n  An optional parameter must be a reference type, a nullable type,\n  or be declared as an optional parameter.\nParameter name: parameters\n   at System.Web.Mvc.ActionDescriptor.ExtractParameterFromDictionary(ParameterInfo parameterInfo, IDictionary`2 parameters, MethodInfo methodInfo)\n   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\n   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\n   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)\n   at System.Web.Mvc.Controller.ExecuteCore()\n   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n   at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass6.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5()\n   at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0()\n   at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d()\n   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)\n</code></pre>\n\n<p>The error never occured on my old web server. \nThe old web server environment: Windows Server 2003(64bit)/IIS 6/.NET 4.\nAfter i upgraded the environment to :Windows Server 2008R2/IIS 7.5/.NET 4, the error always was threw, but not all requests cause the error.</p>\n\n<p>so this issue is a config issue?</p>\n\n<p>thanks.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13079043,"title":"Passing Parameter to controller using partialView","body":"<p>I have one PartialView that has been Included inside two other views.</p>\n\n<p>How would I be able to pass parameter from PartialView to main Controller of each View.</p>\n\n<pre><code>@Html.Partial(\"_Video\",\"file1.xml\")\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@Html.Partial(\"_Video\",\"file2.xml\")\n</code></pre>\n\n<p>I want to be able to get the parameter value on Get method on each controller.</p>\n\n<pre><code>        //Controller1 \n        // GET: //\n        public ActionResult Index(){\n             \"file1.xml\"\n        }\n\n        //Controller2\n        // GET: //\n        public ActionResult Index(){\n             \"file2.xml\"\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","oracle","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13077810,"title":"Oracle Sequences, Entity Framework and getting nextval in an MVC3 View","body":"<p>I'm currently using Entity Framework inside an MVC3 application to connect to an Oracle Database. I want to write a new record to a table in the Oracle database which includes a sequence that defines it's primary key. Of course, the primary key is defined to be not null. All my views are written in ASP.Net instead of Razor.</p>\n\n<p>I see that most posts out there recommend setting a StoreGeneratedPattern directly on the edmx model. However, I notice that most edmx model examples like this one: <a href=\"http://stackoverflow.com/questions/7351260/oracle-entity-in-vs-entity-framework-doesnt-update-the-primary-key-in-code\">Oracle entity in VS entity framework doesnt update the primary key in code</a>  include the tables defined using EntityTypes -the table in question I want to do this on is actually encompassed in an EntitySet:</p>\n\n<pre><code>&lt;EntitySet Name=\"REGISTERED_PERSON\" EntityType=\"Model.Store.REGISTERED_PERSON\" store:Type=\"Tables\" Schema=\"MYSCHEMA\" /&gt;\n</code></pre>\n\n<p>and when I try to set StoreGeneratedPattern=Identity on this, I get an error that the StoreGeneratedPattern attribute is not allowed, presumably because it is not an EntityType. I had originally thought about just getting the max. registered_person_id from the database via LINQ statement and then assigning that into the model, but then the problem arises that you'd get a duplicate ID if two inserts were executed at the same time. </p>\n\n<p>I also checked the database and I don't have any triggers written. I know that in Oracle you can opt to select from dual to get the next value which is generated by the sequence, such as illustrated below:\n<br>select MY_SEQ.nextval,'some value' from dual</p>\n\n<p>This post here: <a href=\"http://stackoverflow.com/questions/2189114/postgresql-nextval-question-on-sequences\">postgresql nextval question on sequences</a> has a great title, but the problem with that is that I'm not working with postgresql or PHP, so unfortunately it doesn't help me. I also don't have any triggers written to fire the sequence upon insert of a record. </p>\n\n<p>How do I go about getting the nextvalue from the sequence and assign it to my Registered_Person_Id, preferably in the view before the entire model object gets passed back to the controller to insert in the database? </p>\n"},{"tags":["asp.net-mvc","razor","actionlink"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":13077150,"title":"How to pass multiple parameters (some complex objects) with Html.ActionLink","body":"<p>I'm working with MVC in .net 4.0.  I have a basic Html.ActionLink and I wish to pass multiple parameters to the controller/action.</p>\n\n<p>Every time I debug the ActionResult only ONE of my parameters comes through and the other is null (depending on which is first).  Now I know I can pass in complex objects since I can get the \"League\" object to come through.  However, I'm not sure why only ONE of my parameters makes it through at any time.</p>\n\n<p>Code in View: (don't harass me about ViewBag.  I know it's not popular.  Also, League is a complex object)</p>\n\n<pre><code>@Html.ActionLink(\"Sort By WeeK\", \"Sort\", \"Schedule\",\n                 new { league = ViewBag.League, sortType = \"Week\" }, null)\n</code></pre>\n\n<p>Code in Controller: (no surprises here)</p>\n\n<pre><code>public ActionResult Sort(League league, string sortType)\n{\n    //Do some stuff here\n    return View(\"Schedule\");\n}\n</code></pre>\n\n<p>I'm guessing the answer will revolve around routing.  Which brings me to my 2nd question.  How can I get this type of ActionLink (Action / Controller / Collection of Complex and Simple objects) to work without constantly adding new maproutes.  Is there a generic / wildcard RouteMap I could add so I don't have to constantly add anatomically identical route maps to global.asax.  Or maybe I want some flexibility in the type of objects I wish to pass into an Action so I can't predefine the exact signature.</p>\n\n<p>I've seen multiple posts on this topic but none of them answered my questions.</p>\n"},{"tags":["asp.net-mvc","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13076774,"title":"get referring url from my rest api","body":"<p>I am building a rest api in mvc. When consuming the API, I need to be able to get the referring URL that is calling the service.  I have tried Request.UrlReferer and it comes back null.  How can I get the url that is consuming the service?</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework","stored-procedures","ado.net"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":103,"score":3,"question_id":12710455,"title":"Why is my broken stored procedure being dropped?","body":"<p>I have an ASP.NET MVC 4 project configured to use Entity Framework 5, backed by a SQL Server database.</p>\n\n<p>One of the stored procedures in my DB performs an illegal operation: it tries to insert a <code>NULL</code> value into a <code>NOT NULL</code> column. Understandably, this fails.</p>\n\n<p>Inexplicably, Entity Framework (or some other component of my ASP.NET MVC stack, or perhaps my SQL Server database) then <strong>drops the stored procedure</strong> from the database!</p>\n\n<p>A screenshot of the error message I receive when I attempt to call my stored procedure is below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Nt2M.jpg\" alt=\"The error page displayed\"></p>\n\n<p>I can't seem to find any documentation on this behaviour. </p>\n\n<p><strong>Why is this happening, and what can I do to prevent stored procedures from being dropped?</strong></p>\n"},{"tags":["asp.net-mvc","backgroundworker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13086104,"title":"how to perform two task in the backgroudworker process in asp.net MVC","body":"<p>I have to do two task parallelly in the backgroud worker process in the asp.net. </p>\n\n<p>The following are the two task</p>\n\n<ol>\n<li><p>Sent a email alert to support guys if any error event occurs in any of the server in a domain (All the time)</p></li>\n<li><p>Sent the  status report of error messages for all the servers in a domain at a time for every 4 hours or based on the user configuration.</p></li>\n</ol>\n\n<p>I have already implemented the first task through the background worker process (</p>\n\n<p>Now I want to implement second one and that fetch the data from the database for every 4 hours or user configured.</p>\n\n<p>Please find the below are source code that i have used for implementation.</p>\n\n<pre><code>      protected void Application_Start()\n      {\n        AreaRegistration.RegisterAllAreas();\n        RegisterRoutes(RouteTable.Routes);\n\n        BackgroundWorker worker = new BackgroundWorker();\n        worker.DoWork += new DoWorkEventHandler(DoWork);\n        worker.WorkerReportsProgress = false;\n        worker.WorkerSupportsCancellation = true;\n        worker.RunWorkerCompleted +=\n               new RunWorkerCompletedEventHandler(WorkerCompleted);\n        worker.RunWorkerAsync(); \n\n    }\n\n\n    private static void DoWork(object sender, DoWorkEventArgs e)\n    {\n        GetEmailAlertData objGetEmailAlertData = new GetEmailAlertData();\n        List&lt;Email&gt; lstEmaildetails = objGetEmailAlertData.GetEmailAlertDetails();\n        SentinelAlerter objSentinelAlerter = new SentinelAlerter();\n        foreach (Email objEmail in lstEmaildetails)\n        {\n            try\n            {\n       // I have implement first task           \n                objAlerter.SendAlert(objEmail);\n            }\n            catch (Exception ex)\n            {\n\n            }\n            finally\n            {\n\n            }\n        }\n\n    }\n</code></pre>\n\n<p>Can anyone suggest how to implement the second task in the same background worker process.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13075234,"title":"time sheet management for employee in asp.net mvc 4","body":"<p>I m developing timesheet management app for employee in asp.net mvc 4</p>\n\n<p>my requirement is </p>\n\n<p>employee fill daily entry \nworking start time \nand end time ,\nbreak start time \nand end time </p>\n\n<p>these filled are for all seven day like Monday Tuesday ........ </p>\n\n<p>can any body tell me what is the best data type in sql server to store only time value.</p>\n\n<p>and is it good to use query time picker for selection of time in front end.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","razor-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":64,"score":-3,"question_id":13085867,"title":"Razor and if statement","body":"<p>I'm using MS Razor in MVC 3 C#, I need to display some text \"hello\" within the IF statement.\nAt the moment I receive an error. Any idea how to solve it?</p>\n\n<p>EDIT: syntax error</p>\n\n<pre><code>   @if(Model.IsCustomEvent)\n    {\n        @Html.ActionLink(\"Edit\", \"Edit\", new {  id=Model.EventTitle }) hello\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","route"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13082980,"title":"Routing catch go wrong","body":"<p>I am trying to write a C# ASP.NET app and I have a routing problem and I do not know how to move on:</p>\n\n<pre><code>routes.MapRoute(\n    \"DefaultArticole\",\n    \"{limba}/Art-{id}/{titluPagina}\",\n    new { controller = \"Pagini\", action = \"Index\", limba = UrlParameter.Optional, id = UrlParameter.Optional, titluPagina = UrlParameter.Optional }\n);\n\nroutes.MapRoute(\n    \"DefaultPagini\",\n    \"{limba}/{paginaCurenta}/{id}\",\n    new { controller = \"Home\", action = \"Index\", limba = UrlParameter.Optional, paginaCurenta = UrlParameter.Optional, id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>All I want is that on uri like:</p>\n\n<pre><code>/Art-10/title\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/en/Art-10/title\n</code></pre>\n\n<p>to be caught by <code>DefaultArticole</code>.</p>\n"},{"tags":["asp.net-mvc","dependency-injection","structuremap","signalr","iprincipal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13084648,"title":"Selective IPrincipal Injection via StructureMap with SignalR","body":"<p>StructureMap is configured to inject <code>HttpContext.Current.User</code> when an <code>IPrincipal</code> is requested for any ASP.NET MVC web request, like so:</p>\n\n<pre><code>For&lt;IPrincipal&gt;().Use(x =&gt; HttpContext.Current.User);\n</code></pre>\n\n<p>But when my SignalR hub asks for a service that depends on an <code>IPrincipal</code>, injection fails because <code>HttpContext.Current</code> is null. Instead, SignalR already has a <code>HubCallerContext</code> property that exposes the current <code>IPrincipal</code> via <code>Context.User</code>.</p>\n\n<p>How do I configure StructureMap to always inject a valid <code>IPrincipal</code> into the services my SignalR hub relies on?</p>\n"},{"tags":["javascript","asp.net-mvc","internet-explorer","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":459,"score":2,"question_id":9500217,"title":"IE 8 - Scripts not always load","body":"<p>It's been a common problem among my team for a while. For aparently no reason, IE8 only loads the scripts sometimes. I'm using asp.net mvc3 and some scripts are loaded through _layout.cshtml (which is like a master page that all my others pages inherits). The other bunch of scripts are loaded only when needed. I must mention that i began to use Head.js to load my scripts. I was actually hoping that it would fix the IE8 scripts load problem.</p>\n\n<p>These problems don't occur on firefox or chrome (which is another motive i'm certain it only happens on IE). And as it seems, if a single script breaks on IE8, this break propagates through other scripts.</p>\n\n<p>I understand this may be a problem too broad to be solved with just the forementioned situation. So what i'd like to know is <strong>have you had a problem like this? If yes, what did you do to solve it?</strong> I really appreciate some directions, since i have to use IE.</p>\n\n<p>Here is the scripts that are being loaded on _layout.cshtml, in the order of loading:</p>\n\n<ul>\n<li>Head.js; </li>\n<li>jquery-1.5.1.min.js; </li>\n<li>modernizr-1.7.min.js; </li>\n<li>jquery-ui-1.8.11.min.js;</li>\n<li>jquery.ui.datepicker-pt-BR.js; </li>\n<li>jquery.validate.min.js;</li>\n<li>jquery.validate.unobtrusive.min.js;</li>\n</ul>\n\n<p>An these are some of the other scripts that i use on some pages (it's not in their order):</p>\n\n<ul>\n<li>jquery-blockUI.js;</li>\n<li>jquery.jqGrid-4.1.2.min.js;</li>\n<li>jquery.orbit-1.2.3.min.js;</li>\n<li>jquery.jqplot.min.js (and some of it's renderers);</li>\n<li>jquery.form.wizard-min.js;</li>\n<li>ZeroClipboard.js;</li>\n</ul>\n\n<p><strong>EDIT</strong></p>\n\n<p>As T.J. asked for some piece of code, since it would be to hard to identify the problem with only the name of scripts used, here it is.</p>\n\n<p><strong>Scripts loaded on _layout.cshtml</strong></p>\n\n<pre><code>&lt;head&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/head.min.js\")\" language=\"javascript\"  type=\"text/javascript\"&gt;&lt;/script&gt;\n\n//Lots of css files loaded mostly through document.write\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n        //        if (head.browser.mozilla || head.browser.webkit || head.browser.opera ||\n        //      (head.browser.ie &amp;&amp; (head.browser.version == '9.0'))) {\n        head.js('@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")')\n                .js('@Url.Content(\"~/Scripts/modernizr-1.7.min.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery-ui-1.8.11.min.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery.ui.datepicker-pt-BR.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery.validate.min.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")');\n        if (screen.width == 1024) {\n            head.js('@Url.Content(\"~/Scripts/resolucao1024.js\")');\n        } else {\n            head.js('@Url.Content(\"~/Scripts/resolucaoMaior1024.js\")');\n        }\n&lt;/script&gt;\n@RenderSection(\"Header\", false)\n&lt;/head&gt;\n</code></pre>\n\n<p><strong>Scripts loaded on a charts and graphics page</strong></p>\n\n<pre><code>@section Header{\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n        head\n        .js('@Url.Content(\"~/Scripts/jquery-blockUI.js\")')\n        .js('@Url.Content(\"~/Scripts/jqGridMVC/grid.locale-pt-br.js\")')\n        .js('@Url.Content(\"~/Scripts/jqGridMVC/jquery.jqGrid-4.1.2.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jquery-ConfigAjax.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jquery.jqplot.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.highlighter.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.dateAxisRenderer.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.pieRenderer.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.donutRenderer.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.cursor.min.js\")');\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Oh! i forgot to mention that every time i call some javascript functionality, i use <code>head(function() {})</code> instead of <code>$(function(){})</code> (it's recommended on head.js site).</p>\n\n<p><strong>EDIT 3</strong></p>\n\n<p>As Zeta asked, i'm providing a print from IE console (it's from my charts and graphic page).</p>\n\n<p><img src=\"http://i.stack.imgur.com/Ws2oh.png\" alt=\"enter image description here\"></p>\n\n<p>Since i'm brazilian, it's in portuguese. Simple to understand though: it means <strong>'jqplot' is null or is not an object.</strong> Like jqplot was never loaded or had some problem during the loading.</p>\n"},{"tags":["asp.net-mvc","error-handling"],"answer_count":6,"favorite_count":24,"up_vote_count":22,"down_vote_count":0,"view_count":25896,"score":22,"question_id":717628,"title":"ASP.NET MVC 404 Error Handling","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc\">How can I properly handle 404 in ASP.NET MVC?</a>  </p>\n</blockquote>\n\n\n\n<p>I've made the changes outlined at <a href=\"http://stackoverflow.com/questions/108813/404-http-error-handler-in-aspnet-mvc-rc-5\">404 Http error handler in Asp.Net MVC (RC 5)</a> and I'm still getting the standard 404 error page. Do I need to change something in IIS?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13083790,"title":"How to fix 'Remove property setter' build error?","body":"<p>I have a property in a model which has auto property getter and setter:</p>\n\n<pre><code>[DataMember]\npublic Collection&lt;DTOObjects&gt; CollectionName { get; set; }\n</code></pre>\n\n<p>I get the following error when building the solution:</p>\n\n<blockquote>\n  <p>Microsoft.Usage : Change 'propertyname' to be read-only by removing the property setter.</p>\n</blockquote>\n\n<p>However, when I remove the setter and run the code, an error occurs because it's trying to set the property! It appears it's asking me to remove the setter despite the fact it is being set somewhere in the code.</p>\n\n<p>Has anyone else come accross this problem? What do I need to modify?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","razor","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":105,"score":-1,"question_id":12969192,"title":"Kendo UI Validation for Dublicate Value Checking","body":"<p>I am facing a problem with validation for duplicate value checking from server using json.\nMy code is runing fine in each click but error message show in second click(One click in side text box put value then click out side the text box - that time code execute but error message show . again i click in that text box and again click out side text box ,again my code run and this time error message show) . Please find my mistake and help me to show validation message in single escape or single click of  text box.</p>\n\n<h2>script language=\"javascript\" type=\"text/javascript\"</h2>\n\n<p>//KendoUi Validation</p>\n\n<pre><code>    var validatable = $(\"#ApplicationNo\").kendoValidator({\n        onfocusout: true,\n        onkeyup: true,\n        rules: {\n            ApplicationNo: function (input) {\n                $.post(\"/Home/CheckAppNo\", { ApplicationNo: $(\"#ApplicationNo\").val() }, function (data) { b1 = data; })\n                return b1;\n            }\n\n        },\n\n        messages: {\n            ApplicationNo: \"Already Exist\"\n        }\n    }).data(\"kendoValidator\");\n\n   var validatable = $(\".k-content\").kendoValidator().data(\"kendoValidator\");\n</code></pre>\n\n<p></p>\n\n<h2>C # Code</h2>\n\n<pre><code>    public JsonResult CheckAppNo(string ApplicationNo)\n    {\n        bool IsOk = projectRepository.CheckAppNumber(ApplicationNo);\n        return Json(IsOk, JsonRequestBehavior.AllowGet);\n        //return new JsonResult { Data = IsOk };\n    }\n</code></pre>\n\n<h2>Html</h2>\n\n<blockquote>\n  <blockquote>\n    <p>&lt; input type=\"text\" id=\"ReferredBy\" name=\"ReferredBy\" class=\"k-textbox\" required /></p>\n  </blockquote>\n</blockquote>\n"},{"tags":["asp.net-mvc","razor","visual-studio-2012"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":159,"score":0,"question_id":12542813,"title":"Intellisense in mvc4 project not working in vs 2012 professional?","body":"<p>In my razor views the intellisense is not working. Are there any fixes for this? \nI'm using the newly released VS 2012 Professional and building a ASP.NET MVC 4 project. The intellisense in my razor views are not working. Is there any fix for this? </p>\n"},{"tags":["c#","ajax","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":13082375,"title":"Sending data from ajax to controller in C#","body":"<p>I'm creating an object in javascript with LocationId and id.</p>\n\n<p>I have a class MyClass in C# with those two variables.</p>\n\n<p>I have an ajax call which calls a method in my controller:</p>\n\n<pre><code>MyMethod(List&lt;MyClass&gt; myObject, int user_id)\n</code></pre>\n\n<p>I use:</p>\n\n<pre><code>traditional: true\n</code></pre>\n\n<p>in the ajax call.</p>\n\n<p>The method gets called, myObject has the correct length, but LocationId and id are all 0. Why is this happening and how to solve it?</p>\n\n<pre><code>public class MyClass {\n     public int LocationId {get; set;}\n     public int id {get; set;}\n}\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>var myArray = new Array();\nvar object = new {\n    LocationId: 1;\n    id: 2;\n}\nmyArray.push(object);\n</code></pre>\n\n<p>Ajax:</p>\n\n<pre><code>$.ajax({\n    type: \"GET\",\n    url: \"correctUrl\",\n    traditional: true,\n    data: { user_id: 1, myObject: myArray}\n});\n</code></pre>\n"},{"tags":["javascript","jquery","html","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13007371,"title":"Custom table for store multiple values in cell","body":"<p>I need to make custom table for scheduling with rows with persons and columns with days.\nAdditional logic will be implemented to fill cells. \nEvery cell hold information about who is engagement in particular day in particular shift (it can be more shift). </p>\n\n<p>Actually, I need a way to store values in some control(maybe my custom html tag, for example \n), hidden field or something. After schedule same cell will\nbe filled with additional data (achieved date time start, achieved date time end).</p>\n\n<p>Final step will be to take all values and store to database.</p>\n\n<p>What you think about that? Have you some advice or similar case?</p>\n"},{"tags":["c#","javascript","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13082972,"title":"Access an object returned from the database with Javascript MVC4","body":"<p>How do I access an object returned from the database with Javascript</p>\n\n<p>This function is called from Javascript </p>\n\n<pre><code>function searchUser() {\n    var userName = document.getElementById('UserName').value\n    $.post(\"SearchForUser\", { userName: userName }, function (UserInfo) {\n\n        UserInfo; //How to access the returned UserInfo properties?\n\n    });\n}\n</code></pre>\n\n<p>I Use this code to get the UserInfo from the database</p>\n\n<pre><code>    public UserInfo SearchForUser(string userName)\n    {\n       string password = \"nicola\";\n\n        using (FormValueEntities db = new FormValueEntities())\n        {\n            //Query the database for the user\n            UserInfo userInfo = new UserInfo();\n            userInfo = db.UserGet(userName, password).FirstOrDefault();\n            return userInfo;\n        }\n    }\n</code></pre>\n\n<p>The UserInfo has the Following properties : UserName, UserPassword and Description</p>\n"},{"tags":["jquery","asp.net","ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":430,"score":0,"question_id":9607164,"title":"Request.IsAjaxRequest never returns true in MVC3","body":"<p>I am using Asp.net MVC3 and trying to do a simple Ajax post to the server which returns a partial view and updates my list of items during a search.</p>\n\n<pre><code>    @using (Ajax.BeginForm(\"PartialUpdate\", \"Listing\"\n        , new  AjaxOptions { \n                UpdateTargetId = \"ListPartialDiv\",\n                HttpMethod = \"GET\",\n                InsertionMode = InsertionMode.Replace,\n\n        }))\n    {\n        &lt;!-- Search Boxes and buttons here --&gt;\n    }\n\n    &lt;div id = \"ListPartialDiv\"&gt;\n        @{\n            Html.RenderPartial(\"_ListPartial\", Model);\n         }\n    &lt;/div&gt;\n</code></pre>\n\n<p>The ajax successfully makes a call to the server and the server responds by sending a partial view. But the partial view always renders in a new page. I found out that this is because it doesn't know that it is an ajax call coming and so it renders a new page. I HAVE included the correct jquery-ubobtrusive-ajax.min.js scripts and added the key as follows according to <a href=\"http://stackoverflow.com/questions/5164540/why-doesnt-request-isajaxrequest-work-in-asp-net-mvc-3\">This Question</a></p>\n\n<pre><code>    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt; \n</code></pre>\n\n<p></p>\n\n<p>My controller code is very simple:</p>\n\n<pre><code>      if (Request.IsAjaxRequest())\n          return PartialView(\"_ListPartial\", list);\n\n      return View(\"Index\", list);\n</code></pre>\n\n<p>But Request.IsAjaxRequest() always returns false no matter what.\nI have also used fiddler and firebug according to <a href=\"http://stackoverflow.com/questions/1702837/request-isajaxrequest-returns-false\">This Question</a> and don't see the X-Requested-With header but I can't really figure out what that means or how to change it. The only thing I can think of is that every other example I see uses an older version of jquery. Does that have anything to do with it? Thanks for any help. </p>\n"},{"tags":["asp.net-mvc","razor","webgrid"],"answer_count":8,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":10604,"score":5,"question_id":4195440,"title":"Mvc 3 texbox in webgrid (razor)","body":"<p>Simple Q:How do you I get the textbox to show the value. Code below fail on item.LastName</p>\n\n<pre><code>@model List&lt;Mvc2010_11_12.Models.Employee&gt;\n@{\n    var grid = new WebGrid(source: Model,defaultSort: \"FirstName\",rowsPerPage: 3);\n}\n\n&lt;div id=\"grid1\"&gt;\n    @grid.GetHtml(columns: grid.Columns(\n        grid.Column(\"LastName\"),\n        grid.Column(format: (item) =&gt; Html.TextBox(\"LastName\", item.LastName))\n    ))\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13076573,"title":"DateTime property as two inputs on view, one for date and second for time part","body":"<p>Is this possible to have one DateTime property in model, but use it as two inputs on view/form? For example Date part will be using jqueryui datepicker, while Time part picker will be a masked input, or other nifty jquery plugin. From time to time i need to use two dropdows for time picking (hours and minutes).</p>\n\n<p>My goal is to have one DateTime property in model (no partial strings for date and time). Is this possible? Using MVC4.</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework-4.1","query-by-example"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":12855990,"title":"ASP.NET MVC4 Query By Example Open Source Suggestions","body":"<p>We're currently building a new application and part of the functionality we want to include for users is the ability to build ad-hoc querys through the web UI for reporting purposes.</p>\n\n<p>e.g. The user may select the Entity1 report.</p>\n\n<p>They are then able to select the criteria through the UI</p>\n\n<p>pseudo example:\n((Entity1.Type = 'this' OR Entity1.Type = 'something else') AND Entity1.CreatedDate > '01-01'2012')</p>\n\n<p>Does anyone know if there is a good solution available (open source or paid) as this seems like it might be a lot of work to implement a bespoke solution.</p>\n\n<p>Further to this we are using Entity Framework v4.1 magical unicorn edition.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13081464,"title":"password change in mvc popup","body":"<p>I'm using <code>@Html.Password(\"Password\", ViewData[\"password\"])</code> for displaying passwords in popup, the password is being displayed and I should be able to edit and update it. After  editing it, when I click save button the password is not being updated.</p>\n\n<p><code>ModelState.IsValid</code> is giving <code>False</code> and the method is being skipped.</p>\n\n<p>this is my view</p>\n\n<pre><code>@Html.Password(\"Password\", ViewData[\"password\"])\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>       [httppost]\n       public actionresult edituser(sales.users saleUser)\n       {\n        sales.users objUser=new sales.users();\n        sales objSaleModel=new Sales();\n\n        if(modelstate.isvalid)\n        {\n\n          //the code to save the changes\n        }\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13067324,"title":"HttpContextBase dependency on IPrincipal?","body":"<p>I have the following windsor setup:</p>\n\n<pre><code>        container.Register(\n            Component.For&lt;HttpContextBase&gt;().\n                UsingFactoryMethod(() =&gt; new HttpContextWrapper(HttpContext.Current)).LifeStyle.PerWebRequest);\n\n        container.Register(\n            Component.For&lt;IPrincipal&gt;().\n                UsingFactoryMethod(() =&gt; HttpContext.Current.User).LifeStyle.PerWebRequest);\n</code></pre>\n\n<p>I am then trying to resolve HttpContextBase before the HttpContext.Current.User property has been set.  During the resolve of HttpContextBase, windsor tries to resolve IPrincipal which is null, and an exception is thrown.</p>\n\n<p>If I replace the resolve with what I thought it should be doing i.e. </p>\n\n<pre><code>new HttpContextWrapper(HttpContext.Current)\n</code></pre>\n\n<p>then my code works.  </p>\n\n<p>Can someone explain why Windsor tries to resolve IPrincipal for HttpContextBase?  Can I stop it doing so?</p>\n"},{"tags":["c#","asp.net-mvc","iis","embedded-resource"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12957632,"title":"Embedded Razor views are not found after Deployment (IIS)","body":"<p>I am currently working on a project which features a plugin-like system. Once the web project starts up it looks for plugin dlls and build up the GUI. The dlls contain embedded views, and embedded resources like pictures or javascripts.</p>\n\n<ul>\n<li><p>I use RazorGenerator(VS Plugin) to generate the cs files from the views, The build action of the views is set to 'embedded resource' and the custom tool is set to 'RazorGenerator'</p></li>\n<li><p>I use a custom Virtual Path Provider (a very similar to this <a href=\"http://stackoverflow.com/questions/7746253/using-custom-virtualpathprovider-to-load-embedded-resource-partial-views\">one</a>)</p></li>\n<li><p>I register my virtual path provider with this workaround i found on the net (it is a must since it is not working as intented if i dont use this):</p>\n\n<pre><code>    var assemblyResourceProvider = new AssemblyResourceProvider();\n    var hostingEnvironmentInstance = (HostingEnvironment)typeof(HostingEnvironment).InvokeMember(\"_theHostingEnvironment\", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetField, null, null, null);\n    if (hostingEnvironmentInstance == null)\n        return;\n\n    var mi = typeof(HostingEnvironment).GetMethod(\"RegisterVirtualPathProviderInternal\", BindingFlags.NonPublic | BindingFlags.Static);\n    if (mi == null)\n        return;\n\n    mi.Invoke(hostingEnvironmentInstance, new object[] { assemblyResourceProvider });\n</code></pre></li>\n<li><p>I use this at my RouteConfig.cs to make the embedded script and picture files work:</p>\n\n<pre><code>   routes.IgnoreRoute(\"{*staticfile}\", new { staticfile = @\".*\\.(css|js|gif|png|jpg|exe)(/.*)?\" });\n</code></pre></li>\n<li><p>I add these lines (there are more) to my web.config to tell asp to use my path provider for my embedded sources:</p>\n\n<pre><code>  &lt;add name=\"AspNetStaticFileHandler-PNG\" path=\"*.png\" verb=\"GET,HEAD\" type=\"System.Web.StaticFileHandler\"/&gt;\n</code></pre></li>\n<li><p>I  use the Boc.Web.PrecompiledViews dll to register the path attributes generated by RazorGenerator</p>\n\n<pre><code>BoC.Web.Mvc.PrecompiledViews.ApplicationPartRegistry.Register(assembly);\n</code></pre></li>\n</ul>\n\n<p>Everything is working as intended in Visual Studio. The views and resources embedded in a dll are showing and working flawlessly. I also use IIS 7.5 to run my web app from Visual Studio. All of the possibilities work:</p>\n\n<ul>\n<li>it works if i give the virtual path generated by Razor Generator (ex: \"~/Views/ViewTest/Test)</li>\n<li>it works if i give the Dll resources path which uses my resourceprovider (ex: \"DllResources/ViewTest.dll/Views/ViewTest/Test.cshtml)</li>\n</ul>\n\n<p>However, after i deploy my web app and run it using IIS 7.5, the Views(only the views!) are not showing! If i address the views with the virtual path (option 1), IIS gives this error message:</p>\n\n<pre><code>    The view 'Index' or its master was not found or no view engine supports the searched locations. The following locations were searched:\n</code></pre>\n\n<p>if i address the views with the DllResources path (option 2), IIS gives this error message:</p>\n\n<pre><code>    The file '/Views/ViewTest/DllResources/EmbeddedResourceTest/Views/ViewTest/Test.cshtml' has not been pre-compiled, and cannot be requested.\n</code></pre>\n\n<p>I dont know what to do now to make it work. I have tried to replace every single step with other solutions. The result is still the same. Flawlessly working in VS, but the views are not showing after deployment.</p>\n\n<p>Is it some config for the IIS what is missing? am i missing something from the web.config?\nPlease help me with this issue.</p>\n\n<p>Thanks,\nNorbert</p>\n"},{"tags":["java","javascript","asp.net-mvc","applet"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":13001407,"title":"How use java applet with javascript","body":"<p>what I do to use java to javascript:</p>\n\n<p>step1:</p>\n\n<p>I create in netBeans \"Java Application\":</p>\n\n<pre><code>package com.mkyong.applet;\n\nimport java.applet.Applet;\nimport java.awt.FlowLayout;\nimport java.awt.TextArea;\n\npublic class JavaScriptToJava extends Applet{\n\n    TextArea textBox;\n\n    public void init(){\n        setLayout(new FlowLayout());\n        textBox = new TextArea(5,40);\n        add(textBox);\n    }\n\n    public void appendText(String text){\n        textBox.append(text);\n    }       \n}\n</code></pre>\n\n<p>Builded.\nGet copy file <code>...\\build\\classes\\com\\mkyong\\applet\\JavaScriptToJava.class</code> to <code>~/Content/applets/</code></p>\n\n<p>step2:</p>\n\n<p>Create html view:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        document.AppletABC.appendText('welcome to mkyong dot com');\n    })\n&lt;/script&gt;\n\n&lt;h1&gt;Javascript acess Applet method&lt;/h1&gt;\n&lt;applet width=300 height=100 id=\"AppletABC\" code=\"com.mkyong.applet.JavaScriptToJava.class\" codebase=\"~/Content/applets/JavaScriptToJava.class\"&gt;\n&lt;/applet&gt;\n</code></pre>\n\n<p>Load this page, I see the word \"plugin is not\".</p>\n\n<p>What am I doing wrong? I need to call the java</p>\n\n<p>UPDATE:</p>\n\n<p>js errors: </p>\n\n<blockquote>\n  <p>document.AppletABC.appendText('welcome to mkyong dot com'); not found\n  function appletABC</p>\n</blockquote>\n"},{"tags":["sql-server","asp.net-mvc","asp.net-web-api","web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":469,"score":0,"question_id":11769279,"title":"ASP.NET MVC 4/Web API - How to configure SQL Server to allow access to API calls from a URL in browser?","body":"<p>I have a server with a SQL Server 2012 Express database. I am authenticated to connect to it and am using it as the backend for an ASP.NET MVC 4 application. </p>\n\n<p>With this application I'm also developing an API. Calling the API programmatically using jQuery within my own application works fine. Querying the database to get the information works as well. </p>\n\n<p>However, when I run the application from VS2010 and try accessing the API by using a URL that would access the database, I get an HTTP 500 Error. </p>\n\n<p>Just to make sure this issue isn't on my application's end, I then modified the API resource so it gets a local array (instead of information from the database) and when I hit the same URL, it returned the information in XML form on the localhost page.</p>\n\n<p>The problem seems to be that the URL call to the API attempts to connect to the database not as the authenticated user (me), but from the browser. </p>\n\n<p>How can I configure SQL Server to allow a URL call to the API in the browser to access the database and return the data in JSON/XML form? (eg. like you can do with the Twitter REST API)</p>\n\n<p><strong>UPDATE:</strong>\nDebugging output on HTTP Request:</p>\n\n<p>Request URL:http://localhost:5555/api/Performance/ShowMachines</p>\n\n<p>Request Method:GET</p>\n\n<p>Status Code:500 Internal Server Error</p>\n\n<p>Request Headersview source</p>\n\n<p>Accept:text/html,application/xhtml+xml,application/xml;q=0.9,<em>/</em>;q=0.8</p>\n\n<p>Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3</p>\n\n<p>Accept-Encoding:gzip,deflate,sdch</p>\n\n<p>Accept-Language:en-US,en;q=0.8</p>\n\n<p>Connection:keep-alive</p>\n\n<p>Host:localhost:5555</p>\n\n<p>User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11</p>\n\n<p>Response Headersview source</p>\n\n<p>Cache-Control:private</p>\n\n<p>Connection:Close</p>\n\n<p>Content-Length:0</p>\n\n<p>Date:Thu, 02 Aug 2012 16:40:11 GMT</p>\n\n<p>Server:ASP.NET Development Server/10.0.0.0</p>\n\n<p>X-AspNet-Version:4.0.30319</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12529064,"title":"Using WebApi in Empty Project of Asp.net MVC","body":"<p>Is it possible to use Web Api in an existing project of Asp.Net MVC 4? Actually we have started the building project using Empty MVC Application template and now want to use Web Apli functionality in the project. Is it possible or do i need to add some Web Api DLL's in the project.</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":246,"score":0,"question_id":12641386,"title":"failed to serialize the response in Web API","body":"<p>I was working on ASP.NET MVC web API,\n I m having this error:</p>\n\n<pre><code>&lt;ExceptionMessage&gt;\nThe 'ObjectContent`1' type failed to serialize the response body for content type 'application/xml; charset=utf-8'.\n&lt;/ExceptionMessage&gt;\n&lt;ExceptionType&gt;System.InvalidOperationException&lt;/ExceptionType&gt;\n</code></pre>\n\n<p>My controller is</p>\n\n<pre><code>public Employee GetEmployees()\n        {\n            Employee employees =(from e in db.Employees\n                            select e).First();\n            return employees;\n        }\n</code></pre>\n\n<p>why I m getting this error??? please help... thnx.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","caching","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12908382,"title":"How to add an object to a Cache and Access the data from cache in MVC4?","body":"<p>Hi all i have an object which returns data like this</p>\n\n<pre><code>         var productdetial=  {\n                               \"productId\": \"1\",\n                               \"productname\": \"Casualshirts\",\n                               \"productSkus\": [\n                                                   {\n                                                     \"Skuimage\": \"URL\",\n                                                     \"SKU\": [\n                                                               {\n                                                                  \"ProducSKU\": \"Shoe1001\",\n                                                                  \"Options\": [\n                                                                                {\n                                                                                  \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Black\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"ProducSKU\": \"Shoe1002\",\n                \"Options\": [\n                    {\n                        \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Red\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"ProducSKU\": \"Shoe1003\",\n                \"Options\": [\n                    {\n                        \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Orange\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n</code></pre>\n\n<p>now what i want is i want to keep this data in cache, and i am binding this data to my view ,now what i want is when ever i make a request from my now on i should be able to access data from the above object whihc is in cache...cana ny one help me how can i do this how do i add this object to a cache and access data from there </p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui"],"answer_count":6,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":7351,"score":2,"question_id":5419558,"title":"jQuery UI reload tab content in ASP.NET MVC 3 application","body":"<p>I'd like in an ASP.NET MVC 3 reload the tab content each tab I change tab, when I select the first tab (index = 0), I'd like reload the content. In the tab, it's a ASP.NET MVC partial View</p>\n\n<p>I have this code :</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $('#tabs').tabs();\n    });\n&lt;/script&gt;\n\n&lt;div id=\"tabs\"&gt; \n    &lt;ul&gt; \n        &lt;li&gt;&lt;a href=\"#tabs-1\"&gt;AAAA&lt;/a&gt;&lt;/li&gt; \n        &lt;li&gt;&lt;a href=\"#tabs-2\"&gt;BBBB&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n\n    &lt;div id=\"tabs-1\"&gt; \n        @Html.Partial(\"PartialViewA\", Model)\n    &lt;/div&gt; \n    &lt;div id=\"tabs-2\"&gt; \n        @Html.Partial(\"PartialViewB\", Model)\n    &lt;/div&gt; \n\n&lt;div&gt;\n</code></pre>\n\n<p>Do you have an idea ?</p>\n"},{"tags":["c#","asp.net-mvc","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12488333,"title":"The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'","body":"<p>I'm using nopcommerce open source.\nSo I want to add another table and I want to add another tab in Product Variant.</p>\n\n<p>So I create a model.</p>\n\n<pre><code> public partial class ProductVariantPriceRangeModel : BaseNopEntityModel\n        {\n            public int ProductVariantId { get; set; }\n\n             [NopResourceDisplayName(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.SpecialPriceStartDate\")]\n           [DisplayFormat(NullDisplayText = \"\", DataFormatString = \"{0:yyyy-MM-dd}\")]\n\n            public DateTime? SpecialPriceStartDate { get; set; }\n\n             [NopResourceDisplayName(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.SpecialPriceEndtDate\")]\n            [DisplayFormat(NullDisplayText = \"\", DataFormatString = \"{0:yyyy-MM-dd}\")]\n\n            public DateTime? SpecialPriceEndtDate { get; set; }\n\n\n            [NopResourceDisplayName(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.Price\")]\n\n            public decimal Price1 { get; set; }\n        }\n</code></pre>\n\n<p>This is my Controller.</p>\n\n<pre><code>[HttpPost, GridAction(EnableCustomBinding = true)]\n        public ActionResult ProductVariantPriceRangeList(GridCommand command, int productVariantId)\n        {\n            if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n                return AccessDeniedView();\n\n            var productVariant = _productService.GetProductVariantById(productVariantId);\n            if (productVariant == null)\n                throw new ArgumentException(\"No product variant found with the specified id\");\n\n            var productVariantPriceRange = productVariant.ProductVariantPriceRange;\n            var productVariantPriceRangeModel = productVariantPriceRange\n                .Select(x =&gt;\n                {\n                    return new ProductVariantModel.ProductVariantPriceRangeModel()\n                    {                      \n\n                        Id = x.Id,                       \n                        ProductVariantId = x.ProductVariantId,\n                        SpecialPriceStartDate = x.SpecialPriceStartDate,\n                        SpecialPriceEndtDate=x.SpecialPriceEndtDate,                       \n                        Price1 = x.SpecialPrice\n                    };\n                })\n                .ToList();\n\n            var model = new GridModel&lt;ProductVariantModel.ProductVariantPriceRangeModel&gt;\n            {\n                Data = productVariantPriceRangeModel,\n                Total = productVariantPriceRangeModel.Count\n            };\n\n            return new JsonResult\n            {\n                Data = model\n            };\n        }\n</code></pre>\n\n<p>This is my view.</p>\n\n<pre><code>@model ProductVariantModel\n@using Telerik.Web.Mvc.UI;\n@using Nop.Core.Domain.Catalog;\n@using Nop.Admin;\n@Html.ValidationSummary(false)\n@Html.HiddenFor(model =&gt; model.Id)\n@Html.HiddenFor(model =&gt; model.ProductId)\n\n\n\n@Html.Telerik().TabStrip().Name(\"productvariant-edit\").Items(x =&gt;\n{\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.Info\").Text).Content(TabInfo().ToHtmlString()).Selected(true);\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.TierPrices\").Text).Content(TabTierPrices().ToHtmlString());\n     x.Add().Text(T(\"Admin.Catalog.Products.Variants.ProductVariantAttributes\").Text).Content(TabProductVariantAttributes().ToHtmlString());\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.Discounts\").Text).Content(TabDiscounts().ToHtmlString());\n\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange\").Text).Content(TabProductVariantPriceRange().ToHtmlString());\n\n    //generate an event\n    EngineContext.Current.Resolve&lt;IEventPublisher&gt;().Publish(new AdminTabStripCreated(x, \"productvariant-edit\"));\n})\n\n\n\n@helper TabProductVariantPriceRange()\n    {\n      if (Model.Id &gt; 0)\n        {\n   @(Html.Telerik().Grid&lt;ProductVariantModel.ProductVariantPriceRangeModel&gt;()\n                        .Name(\"productVariantPriceRange-grid\")\n                .DataKeys(keys =&gt;\n                {\n                    keys.Add(x =&gt; x.Id);\n                })\n                .DataBinding(dataBinding =&gt;\n                {\n                    dataBinding.Ajax()\n                        .Select(\"ProductVariantPriceRangeList\", \"ProductVariant\", new { productVariantId = Model.Id })\n                        .Insert(\"ProductVariantPriceRangeInsert\", \"ProductVariant\", new { productVariantId = Model.Id })\n                        .Update(\"ProductVariantPriceRangeUpdate\", \"ProductVariant\")\n                       .Delete(\"ProductVariantPriceRangeDelete\", \"ProductVariant\");\n                })\n                .Columns(columns =&gt;\n                {\n                    columns.Bound(x =&gt; x.ProductVariantId)\n                        .Width(100).ReadOnly()\n                        .Centered();                    \n\n\n                    columns.Bound(x =&gt; x.SpecialPriceStartDate)\n                       .Width(200)\n                        .Centered();\n                    //columns.Bound(x =&gt; x.SpecialPriceEndtDate)\n                    //    .Width(200)\n                    //    .Centered();\n\n                    columns.Bound(x =&gt; x.Price1)\n                        .Width(100);\n                    columns.Command(commands =&gt;\n                    {\n                        commands.Edit();\n                        commands.Delete();\n                    })\n                    .Width(180);\n\n\n                })\n                .ToolBar(commands =&gt; commands.Insert())\n                .ClientEvents(events =&gt; events.OnEdit(\"onTierPriceEdit\"))\n                .EnableCustomBinding(true))\n\n\n        }\n        else\n        {\n    @T(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.SaveBeforeEdit\")\n        }\n\n}\n</code></pre>\n\n<p>When I run the programmer there is a error..</p>\n\n<pre><code>The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'.\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\nException Details: System.InvalidOperationException: The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'.\n\nSource Error:\n\n\nLine 83:       if (Model.Id &gt; 0)\nLine 84:         {\nLine 85:    @(Html.Telerik().Grid&lt;ProductVariantModel.ProductVariantPriceRangeModel&gt;()\nLine 86:                         .Name(\"productVariantPriceRange-grid\")\nLine 87:                 .DataKeys(keys =&gt;\n</code></pre>\n\n<p>How can I solve it??</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":5,"favorite_count":9,"up_vote_count":11,"down_vote_count":0,"view_count":7957,"score":11,"question_id":780436,"title":"ASP MVC Authorize all actions except a few","body":"<p>I have a controller and I would like to require Authorization for all actions by default except a couple. So in the example below all actions should require authentication except the Index. I don't want to decorate every action with the Authorize, I just want to override the default authorization in certain circumstances probably with a custom filter such as NotAuthorize.</p>\n\n<pre><code>[Authorize]\npublic class HomeController : BaseController\n{\n    [NotAuthorize]\n    public ActionResult Index()\n    {\n        // This one wont\n        return View();\n    }\n\n    public ActionResult About()\n    {\n        // This action will require authorization\n        return View();\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13068934,"title":"How to post data through multiple partial view in mvc3","body":"<p><strong>view:</strong></p>\n\n<pre><code>@model \n@using (Html.BeginForm(\"action\", \"Controller\"))\n{\n   @html.action(\"action1\",\"controller1\") //use model1\n   @html.action(\"action2\",\"controller2\") //use model2\n   @html.action(\"action3\",\"controller3\") //use model3\n   &lt;button type=\"submit\"&gt;submit&lt;/button&gt;\n}\n</code></pre>\n\n<p><strong>Parent Model</strong></p>\n\n<pre><code>{\n  public model model1{get; set;} \n\n  public model model2{get; set;} \n\n  public model model3{get; set;} \n}\n</code></pre>\n\n<p><strong>controller</strong></p>\n\n<pre><code>[httppost]\n public ActionResult Submit(parentmodel abc)\n    {\n\n    }\n</code></pre>\n\n<p>So my question is when I post the data the parentmodel is return as null but when I try as</p>\n\n<pre><code>[httppost]\npublic ActionResult Submit(model1 abc)\n{\n}\n</code></pre>\n\n<p>I get the form values in model1. Is my approach right? What should be done to get the form values in the parent model?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13066824,"title":"Unable to cast object of type in MVC 3.0 Razor","body":"<p>I am new MVC 3.0 Razor.  I am using LINQ to get the details of profiles.</p>\n\n<p>In the controller i am using</p>\n\n<pre><code>  var q = from m in networks.Entities\n                    join o in networks.EntityTypes on m.EntityTypeIdFk \n                    where m.Status == 1\n                    orderby m.EntityName\n                    select new { m.EntityName,m.EntityDescription,o.EntityTypeName };\n\n            ViewBag.EntitiesName = q.ToList();\n</code></pre>\n\n<p>on the View i m using</p>\n\n<pre><code>@foreach (var res in ViewBag.EntitiesName)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;@res.EntityName&lt;/td&gt;\n            &lt;td&gt;@res.EntityDescription&lt;/td&gt;\n            &lt;td&gt;@res.EntityTypeName&lt;/td&gt;\n        &lt;/tr&gt;\n    }\n</code></pre>\n\n<p>in the @res i m getting the resultant array. But still i m getting error \"Unable to cast object of type\"</p>\n\n<p>Please Help me to resolve this.</p>\n\n<p>Thanks,\nSaloni</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","asp.net-web-api","dotnet-httpclient"],"answer_count":4,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":4435,"score":13,"question_id":10660721,"title":"What is the difference between HttpResponseMessage and HttpResponseException","body":"<p>I tried to understand both and write sample code:</p>\n\n<pre><code> public HttpResponseMessage Get()\n {\n     var response = ControllerContext.Request\n                         .CreateResponse(HttpStatusCode.BadRequest, \"abc\");\n\n     throw new HttpResponseException(response);\n }\n</code></pre>\n\n<p>And:</p>\n\n<pre><code> public HttpResponseMessage Get()\n {\n     return ControllerContext.Request\n                        .CreateResponse(HttpStatusCode.BadRequest, \"abc\");\n }\n</code></pre>\n\n<p>From Fiddle, I really didn't see any differences between them, so what is the purpose of using <code>HttpResponseException</code>?</p>\n"},{"tags":["c#","asp.net-mvc","mvc","deployment"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2841,"score":1,"question_id":5832653,"title":"How to deploy an MVC application on IIS 7?","body":"<p>I have a MVC application and I can't get it working on IIS 7. Debugging in VS2010 works fine, but when I publish the website to my local IIS7, I see nothing but blank pages.</p>\n\n<p>Here is what I have done:</p>\n\n<p>On the project, right click and click Publish. In the Publish Web window I set these settings:</p>\n\n<ul>\n<li>Publish method: Web deploy</li>\n<li>Service URL: localhost</li>\n<li>Site/application: Default Web Sit\\Africa</li>\n<li>both, <code>Mark as IIS application on destination</code> and <code>Leave extra files on destination (do not delete</code> are checked.</li>\n</ul>\n\n<p>In IIS, my application runs under a application pool with supports .net 4.0 and managed pipeline is set to integrated.</p>\n\n<p>I don't get any error while publishing, but when I navigate to my site I only see blank pages. Nothing happens.</p>\n\n<p>What goes wrong?</p>\n\n<p>EDIT:</p>\n\n<p>When I navigate to <a href=\"http://localhost/Africa/\" rel=\"nofollow\">http://localhost/Africa/</a> I see a blank page. When I navigate to <a href=\"http://localhost/Africa/Views/Home/\" rel=\"nofollow\">http://localhost/Africa/Views/Home/</a> I get a 500 error. </p>\n\n<p>How can I solve this?</p>\n"},{"tags":["css","asp.net-mvc","razor","compression","squishit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13063171,"title":"How to add dynamic CSS source urls in Squishit?","body":"<p>How to add dynamic CSS source path/urls in Squishit?</p>\n\n<pre><code> @Html.Raw(\n        Bundle.Css()\n        .Add(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/a.css\")\n        .Add(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/b.css\")\n        .Add(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/c.css\")\n        .Render(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/o#.css\")\n    ) \n</code></pre>\n\n<p>This will throw an error.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-4","unobtrusive-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":13058900,"title":"MVC 4 Unobtrusive Validation on objects in a view model","body":"<p>I have validation attributes on the properties in my model.  If I pass the model to the view the validation works fine.  However, when that model is a property of a View Model and the controller passes the View Model to the view, the unobtrusive validation no longer works and it doesn't get validated on the controller.  The model binding to the controller works just fine on post either way.</p>\n\n<p>If one can bind hidden fields and such using dot notation for objects in a view model why doesnt unobtrusive validation also work, does anyone have advice on how to get this to work?</p>\n\n<p>View Model (the first class below is what the view uses, \"Required\" or not on its first property doesn't make a difference)</p>\n\n<pre><code>public class PlanStakeholderViewModel : PlanGoalSelectorViewModel\n{\n    [Required]\n    public PlanStakeholder PlanStakeholder { get; set; }\n}\npublic class PlanGoalSelectorViewModel\n{\n    public IList&lt;PlanGoal&gt; AvailableGoals { get; set; }\n    public IList&lt;PlanGoal&gt; SelectedGoals { get; set; }\n    public PostedGoals PostedGoals { get; set; }\n}\n\npublic class PostedGoals\n{\n    public string[] GoalIDs { get; set; }\n}\n</code></pre>\n\n<p>VIEW</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n    @Html.Hidden(\"PlanStakeholder.PlanID\")\n    @Html.Hidden(\"PlanStakeholder.Id\")\n\n    @Html.Partial(\"_Form\")  \n\n    &lt;div class=\"editor-label\"&gt;&lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt; | @Html.ActionLink(\"Back to Plan\", \"Index\", \"Plan\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>VIEW _Form</p>\n\n<pre><code>@model Navigator.Views.ViewModels.PlanStakeholderViewModel\n\n&lt;div class=\"editor-label\" style=\"vertical-align:top\"&gt;\n    @Html.LabelFor(model =&gt; model.PlanStakeholder.Name)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.PlanStakeholder.Name)\n    @Html.ValidationMessageFor(model =&gt; model.PlanStakeholder.Name)\n&lt;/div&gt;\n\n&lt;div class=\"editor-label\" style=\"vertical-align:top\"&gt;\n    @Html.LabelFor(model =&gt; model.PlanStakeholder.Relationship)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.PlanStakeholder.Relationship)\n    @Html.ValidationMessageFor(model =&gt; model.PlanStakeholder.Relationship)\n&lt;/div&gt;\n\n&lt;div class=\"editor-label\" style=\"vertical-align:top\"&gt;\n     &lt;label&gt;Associated Goals&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field checkbox\"&gt;\n@Html.CheckBoxListFor(x =&gt; x.PostedGoals.GoalIDs,\n                      x =&gt; x.AvailableGoals,          \n                      x =&gt; x.Id,               \n                      x =&gt; x.ShortTitle,               \n                      x =&gt; x.SelectedGoals,\n                      Position.Vertical)\n&lt;/div&gt;\n</code></pre>\n\n<p>MODEL</p>\n\n<pre><code>public class PlanStakeholder : Base\n{\n    public PlanStakeholder()\n    {\n        PlanID = -1;\n        Relationship = String.Empty;\n        Name = String.Empty;\n    }\n\n    [Required]\n    public int PlanID { get; set; }\n\n    [Required]\n    [MaxLength(50, ErrorMessage = \"The {0} cannot be more than {1} characters.\")]\n    public string Relationship { get; set; }\n\n    [Required]\n    [MaxLength(50, ErrorMessage = \"The {0} cannot be more than {1} characters.\")]\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p><strong>UPDATE 1</strong>\nBelow is the output of the form html for the Relationship property.</p>\n\n<pre><code>&lt;input class=\"text-box single-line\" data-val=\"true\" data-val-required=\"The Relationship field is required.\" id=\"PlanStakeholder_Relationship\" name=\"PlanStakeholder.Relationship\" type=\"text\" value=\"Mom\" /&gt;\n</code></pre>\n\n<p>Below is the controller actions</p>\n\n<pre><code>[AuthorizeRoles(RoleSite.None, RoleOrg.OrgMember, RoleCohort.Client)]\npublic ActionResult Edit(int id, int planId)\n{\n    var plan = PlanManager.GetSingle(CurrentUser.UserId, CurrentOrg.Id);\n\n    var model = new PlanStakeholderViewModel();\n    model.PlanStakeholder = PlanStakeholderManager.GetSingle(id, CurrentUser.UserId);\n    model.AvailableGoals = PlanGoalManager.GetList(plan.Id, CurrentUser.UserId);\n    model.SelectedGoals = PlanGoalManager.GetRelatedToStakeholder(id, CurrentUser.UserId);\n\n    if (model.Item.Id != id)\n    {\n        return HttpNotFound();\n    }\n\n    return View(model);\n}\n\n[HttpPost, ActionName(\"Edit\")]\n[AuthorizeRoles(RoleSite.None, RoleOrg.OrgMember, RoleCohort.Client)]\npublic ActionResult EditConfirmed(PlanStakeholderViewModel model)\n{\n    if (ModelState.IsValid)\n    {\n        ///DO STUFF\n        return RedirectToAction(\"Index\", \"Plan\");\n    }\n    return View(model);\n}\n</code></pre>\n\n<p><strong>UPDATE 2</strong>\nIf I comment out the CheckBoxListFor in the view then everything works fine.  Looks like I need to take this question/issue <a href=\"http://mvccbl.com/\" rel=\"nofollow\">elsewhere</a>.  When not commented out, if I enter a value for PlanStakeholder.Name that is longer than whats allowed by the model I get \"Value cannot be null. Parameter name: source\" as my asp.net error on the line that has the @Html.CheckBoxListFor.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13078486,"title":"How do I call an Index action and conditionally pass it a value in an ASP.NET MVC app","body":"<p>I have an index action on a controller as follows...</p>\n\n<pre><code>public ActionResult Index(string errorMsg = \"\")\n   {\n      //do stuff\n      ViewBag.ErrorMsg=erorMsg;\n\n      return View();\n   }\n</code></pre>\n\n<p>I have another action that is an http post for Index.  </p>\n\n<p>When there is something wrong I want to reload the Index page and show the error...</p>\n\n<p>I have my view already conditionally showing errorMsg.  But I cannot figure out how to call Index and pass in the error string?</p>\n"},{"tags":["asp.net-mvc","iis","iis7","iis-express","iis8"],"answer_count":4,"favorite_count":6,"up_vote_count":9,"down_vote_count":0,"view_count":599,"score":9,"question_id":11728846,"title":"Dots in URL causes 404 with ASP.NET mvc and IIS","body":"<p>I have a project that requires my URLs have dots in the path. For example I may have a URL such as www.example.com/people/michael.phelps</p>\n\n<p>URLs with the dot generate a 404. My routing is fine. If I pass in michaelphelps, without the dot, then everything works. If I add the dot I get a 404 error. The sample site is running on Windows 7 with IIS8 Express. URLScan is not running. </p>\n\n<p>I tried adding the following to my web.config:</p>\n\n<pre><code>&lt;security&gt;\n  &lt;requestFiltering allowDoubleEscaping=\"true\"/&gt;\n&lt;/security&gt;\n</code></pre>\n\n<p></p>\n\n<p>Unfortunately that didn't make a difference. I just receive a 404.0 Not Found error. </p>\n\n<p>This is a MVC4 project but I don't think that's relevant. My routing works fine and the parameters I expect are there, until they include a dot.</p>\n\n<p>What do I need to configure so I can have dots in my URL?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13076665,"title":"ajax paging asp.net mvc","body":"<p>I know how to hook up ajax paging to a grid or a webgrid in asp.net mvc. But how can I accomplish ajax paging, using custom paging for large data sets for another format outside of a table grid.</p>\n\n<p>Is that even possible using an mvc helper or mvc.pagedlist?</p>\n\n<p>I used to be a webforms guys and it was so easy to hook up a listview where you could use divs to create whatever layout you want for individual items, you could then hook up a datapage and wrap it all in an update panel.</p>\n\n<p>Basically I want a list of items that I can page through via ajax but with having large data sets I can just pull down all the items and page via jquery, I need to do custom paging on the server side and only return the items for a specific page.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13077146,"title":"Entity not posted back","body":"<p>Here's the controller method that calls the view:</p>\n\n<pre><code>[HttpGet]\n        public ActionResult Edit(int? paramid)\n        {\n            var document = documentRepository.DocumentsWithEmpty.FirstOrDefault(c =&gt; c.ID == paramid.Value);\n            RC rc = new RC(document);\n            return View(\"RC\", rc);\n        }\n</code></pre>\n\n<p>Here's the view (pretty empty for the moment)</p>\n\n<pre><code>@model RC\n\n@{\n    Layout = null;\n}\n@using (Html.BeginForm()) //I've also tried by specifying the method/controller/param\n{\n   //I've also tried with some @Html.EditorFor items\n}\n</code></pre>\n\n<p>And the method in the controller to catch the posted <code>RC</code></p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(RC rc) //If I put no parameter, it gets called correctly\n{\n    throw new Exception(\"x\");\n}\n</code></pre>\n\n<p>It is the only entity/place where it doesn't work correctly. Could it be because RC isn't an entity in my database?</p>\n\n<p>Firebug points these for both the GET and POST requests (with the POST request in red). Pretty straightforward</p>\n\n<pre><code>http://localhost:58136/Documents/Edit/23?_=1351197746968\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13076353,"title":"How to get string url out of registered route in asp.net mvc?","body":"<p>In Global.asax we register routes using:</p>\n\n<pre><code>MapRoute(this System.Web.Routing.RouteCollection routes, \n    string name, \n    string url, \n    object defaults, \n    string[] namespaces)\n</code></pre>\n\n<p>Is there a way to retrieve the <code>string url</code> from code? Specifically, I am interested in getting route segments from the urls for registered routes like this:</p>\n\n<pre><code>\"customRoutePrefix/{controller}/{action}/{id}\"\n</code></pre>\n\n<p>I need to look up \"customRoutePrefix\" or the equivalent for any registered routes.</p>\n\n<p>I thought I might be able to use <code>System.Web.Routing.RouteTable.Routes</code> to do this, but I haven't found it in there.</p>\n\n<p>Is this possible / how should I do this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12654039,"title":"how should a controller pass back different entities or collections to a view","body":"<p>Most of the samples I see online are showing CRUD with single entity class.</p>\n\n<p>If I were to create a CRM application and one of the views needs to display customer information in read only mode and on the same page, display Contacts, Notes, Attachments, Addresses, how should the controller pass these different entities to the view?<br>\nShould I be creating another model class which will be a container for the various other entities and populate that model class with the various entities and pass back to the View.</p>\n\n<p>In another scenario, say I wanted to display the Customer entity in Edit mode and the View has dropdowns for Customer Active Status, Customer StateCode, Customer Satisfaction dropdowns.  Each of these dropdowns have other entity collections that are bound to them. So, again in this scenario, how should a controller pass back the model which has all these entities and not just Customer entity.</p>\n\n<p>I continue to read on ViewModel pattern and I think this may be the way to go but would certainly appreciate more guidance and pointers.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":12690879,"title":"ASP.Net MVC View with RadioButtonList with Other freeformat selection","body":"<p>I am putting together questionairre for registering for an event.</p>\n\n<p>One of the eventr registration questions is:</p>\n\n<pre><code>What is your main job function?\n    Director/MD/Owner\n    Manager\n    Team Leader\n    Other: Please state\n</code></pre>\n\n<p>I would like this to show as a drop down box, or a radio button list in my view, but also with a textbox underneath or next to the \"Other\" radiobutton, so that a free form \"Other\" job function can be entered.  How would I bind this in my view?</p>\n\n<p>I suspect my model will contain:</p>\n\n<pre><code>    [Display(Name = \"What is your main job function?\")]\n    public string JobFunction { get; set; }\n</code></pre>\n\n<p>...where JobFunction get's populated by the selected item above.  But how in my controller, would I override the selected item, if it's \"Other\" and substitute it with the text box on the view?</p>\n\n<p>I'm sure this has been done many times before - so thank you for any help,</p>\n\n<p>Mark</p>\n"},{"tags":["c#","asp.net-mvc","exception","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13076354,"title":"Exception been thrown in route collection in Global.asax.cs","body":"<p>I've been following the excellent MVC Music Store tutorial over at <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store\" rel=\"nofollow\">ASP.NET</a>. All was going well until I ran into this unhandled exception:</p>\n\n<blockquote>\n  <p>A route named 'Default' is already in the route collection. Route names must be unique. Parameter name: name</p>\n</blockquote>\n\n<p>The following piece of code is highlighted when the exception is thrown:</p>\n\n<pre><code>routes.MapRoute(\n     \"Default\", // Route name\n     \"{controller}/{action}/{id}\", // URL with parameters\n      new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>I hadn't modified the above piece of code at all. The only change I made to the global file was to include some code in Applicatio_Start that tells the Entity Framework about .cs class that contains sample data.</p>\n\n<p>I'm at a loss as to why this is happening, and, as I'm doing a tutorial, MVC is obviously new to me. Would be much appreciated if someone could resolve the issue.</p>\n"},{"tags":["c#","asp.net-mvc","controller","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13075812,"title":"Redirecting from OnActionExecuting -- Matched route does not include a 'controller' value","body":"<p>This should be a super easy task - redirecting from a base controller. Here's an exemplary reference, but does not cover the error I'm experiencing: <a href=\"http://stackoverflow.com/questions/3214774/how-to-redirect-from-onactionexecuting-in-base-controller\">Redirecting from OnActionExecuting in a Base Controller</a></p>\n\n<h3>Code:</h3>\n\n<pre><code>protected override void OnActionExecuting(ActionExecutingContext filterContext)\n{\n    if (myObject == null) {\n        // System.InvalidOperationException: The matched route does not include a 'controller' route value, which is required.            \n        filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary {{ \"controller\", \"controllerName\"}, {\"action\", \"actionName\"}});\n\n        // Throws the same exception: \n        filterContext.Result = RedirectToAction(\"actionName\", \"controllerName\");\n    }\n}\n</code></pre>\n\n<h3>Rendered URL:</h3>\n\n<pre><code>http://localhost/controllerName/actionName?controller=controllerName&amp;action=actionName\n</code></pre>\n\n<p>When debugging, the redirect object passed to the Result property contains both a controller and action value. And in the returned URL it is also present.</p>\n\n<h3>Question:</h3>\n\n<p>Why is it complaining that there is no controller value? And why does it show the controller and action values in the query string in addition to the normal format?</p>\n\n<h3>Updated:</h3>\n\n<pre><code>// hard coded URL produces the same result. What am I misunderstanding?\nfilterContext.Result = new RedirectResult(\"~/Employee/Create\");\n</code></pre>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13074786,"title":"pass a linq query with group by to view [errors out]","body":"<p>I got this in the controller </p>\n\n<pre><code>var tobi = (from a in db.Assessments\njoin u in db.Users on a.rated equals u.user_id\njoin tm in db.Team_Members on u.user_id equals tm.user_id\njoin t in db.Teams on tm.team_id equals t.team_id\nwhere (tm.end_date == null || tm.end_date &gt; DateTime.Today)\ngroup new TobiViewModel\n{\n    teamname = t.name,\n    assessed_due = a.assessed_due,\n    assessment_id = a.assessment_id,\n    rater = a.rater,\n    rated = a.rated\n}\nby new { t.name, a.rated }).ToList();\n\nreturn View(tobi);\n</code></pre>\n\n<p>But then it doesn't accept it in the view?</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type\n  'System.Collections.Generic.List<code>1[System.Linq.IGrouping</code>2[&lt;>f__AnonymousType10<code>2[System.String,System.String],Kyubu.ViewModels.TobiViewModel]]',\n  but this dictionary requires a model item of type\n  'System.Collections.Generic.IEnumerable</code>1[Kyubu.ViewModels.TobiViewModel]'.</p>\n</blockquote>\n\n<p>how should i pass this in the view. Any help would be appreciated\nThe type in the view is</p>\n\n<pre><code>@model IEnumerable&lt;Kyubu.ViewModels.TobiViewModel&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","cultureinfo","culture","kendo"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13056691,"title":"Form will not submit when decimal numbers are entered","body":"<p>I have a problem with submitting forms when decimal numbers are present, to be precise if there is a number behind the decimal separator it wont submit. I am working with Asp.NET MVC3, Kendo UI and a different culture, \"hr-HR\", where the decimal separator is a comma. If I put \"en-US\" culture (separator is dot) everithing goes smoothly. \nMy guess is its a validation problem, but I could be wrong. (Because the form POSTs on US culture)</p>\n\n<p>Also my CurrentUICulture is \"en-US\" &amp; CurrentCulture is \"hr-HR\"</p>\n\n<p>Did anyone had a similar issue?</p>\n"},{"tags":["asp.net-mvc","authorization","mvcsitemapprovider","authorizeattribute"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13075463,"title":"MvcSiteMapProvider causing authorization issues with MVC4 website","body":"<p>I'm trying to implement MvcSiteMapProvider with my new MVC4 website, but I've run into something that I can't seem to fix.</p>\n\n<p>I setup authorization with Active Directory (no role provider currently), and everything was working as it should. When you try to get to any page other than the login page, you're redirected to the login page. The Account controller's action methods have the [allowAnonymous] attribute to allow unauthenticated users to access them so that they can login.</p>\n\n<p>For some unknown reason, adding MvcSiteMapProvider to the project stops this from working and now unauthenticated users can get to any page. The Menu that MvcSiteMapProvider creates works correctly and only authenticated users can see it, but if the unauthenticated user types in a direct link they aren't redirected to the login page as they used to be.</p>\n\n<p>I've removed MvcSiteMapProvider from the project and authentication started to work correctly again. \nI believe this has something to do with MvcSiteMapProvider overridding the authorizeAttribute filter in some way, but I can't figure out where/how.</p>\n\n<p>I can put [Authorize] on top of the controller and the redirect works with MvcSiteMapProvider, but that's against the whole reason for using MVC4.</p>\n\n<pre><code>//this is supposed to set authorize for the entire app\npublic static void RegisterGlobalFilters(GlobalFilterCollection filters)\n{\n    filters.Add(new System.Web.Mvc.AuthorizeAttribute()); \n}\n</code></pre>\n\n<p>I have a feeling this issue is coming from MvcSiteMapProvider/External/AuthorizeAttributeBuilder.cs, but I'm not experienced enough to figure this out.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-optimization","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12931461,"title":"Is there any way to have a file extension in a bundle name?","body":"<p>I would like to have define a bundle like this:</p>\n\n<pre><code>bundles.Add(\n    new StyleBundle(\"~/style.css\").Include(\n        //...\n));\n</code></pre>\n\n<p>If the bundle name is just <code>\"~/style\"</code> this works, but with the file extension it always returns a 404. I suspect the server searches for CSS and JS files on the drive and ignores the bundling system, but I can't find anyone else who is trying to include file extensions in bundle names. Is this possible to do without something like a URL rewrite?</p>\n"},{"tags":["c#","asp.net-mvc","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13071219,"title":"Get value of a property that was passed in as a string","body":"<p>I am trying to create a custom validation that says \"if the otherValue is true, then this value must be greater than 0.  I am able to get the value in, but the way I currently have the otherValue set up, I only have the name of the property, not the value.  Probably because it passed in as a string.  This attribute is going to be on 5 or 6 different properties and each time, it will be calling a different otherValue.  Looking for help on how to get the actual value (it is a bool) of otherValue.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>public class MustBeGreaterIfTrueAttribute : ValidationAttribute, IClientValidatable\n{\n    // get the radio button value\n    public string OtherValue { get; set; }\n\n    public override bool IsValid(object value)\n    {\n        // Here is the actual custom rule\n        if (value.ToString() == \"0\")\n        {\n            if (OtherValue.ToString() == \"true\")\n            {\n                return false;\n            }\n        }\n        // If all is ok, return successful.\n        return true;\n    }\n</code></pre>\n\n<p>======================EDIT=========================</p>\n\n<p>Here is where I am at now, and it works!  Now I need a refernce on how to make it so I can put in a different errorMessage when adding the attribute in the model:</p>\n\n<pre><code>public class MustBeGreaterIfTrueAttribute : ValidationAttribute, IClientValidatable\n{\n    // get the radio button value\n    public string OtherProperty { get; set; }\n\n    protected override ValidationResult IsValid(object value, ValidationContext context)\n    {\n        var otherPropertyInfo = context.ObjectInstance.GetType();\n        var otherValue = otherPropertyInfo.GetProperty(OtherProperty).GetValue(context.ObjectInstance, null);      \n\n        // Here is the actual custom rule\n        if (value.ToString() == \"0\")\n        {\n            if (otherValue.ToString().Equals(\"True\", StringComparison.InvariantCultureIgnoreCase))\n            {\n                return new ValidationResult(\"Ensure all 'Yes' answers have additional data entered.\");\n            }\n        }\n        // If all is ok, return successful.\n        return ValidationResult.Success;\n    }\n\n    // Add the client side unobtrusive 'data-val' attributes\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule();\n        rule.ValidationType = \"requiredifyes\";\n        rule.ErrorMessage = this.ErrorMessage;\n        rule.ValidationParameters.Add(\"othervalue\", this.OtherProperty);\n        yield return rule;\n    }\n\n}\n</code></pre>\n\n<p>So I should be able to do this:</p>\n\n<pre><code>    [MustBeGreaterIfTrue(OtherProperty=\"EverHadRestrainingOrder\", ErrorMessage=\"Enter more info on your RO.\")]\n    public int? ROCounter { get; set; }\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13073085,"title":"Adding element attribute in view based on razor variable","body":"<p>I have a view that has a list and I want to add a class to a specific list item depending on a variable in the view model.</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;List Item 1&lt;/li&gt;\n    &lt;li&gt;List Item 2&lt;/li&gt;\n    &lt;li&gt;List Item 3&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>The variable could be anything.  Currently it is an integer.  Below is what I have now, but I don't think this is the cleanest way to do this.</p>\n\n<pre><code>string[] listClasses = new string[3];\nint? selectedListElement= (int?)ViewData[\"SelectedListElement\"];\nif(tabNumber.HasValue)\n{\n    tabClasses[tabNumber.Value] = \"selected\";\n}\n&lt;li class=\"@listClasses[0]\"&gt;List Item 1&lt;/li&gt;\n&lt;li class=\"@listClasses[1]\"&gt;List Item 2&lt;/li&gt;\n&lt;li class=\"@listClasses[2]\"&gt;List Item 3&lt;/li&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","inversion-of-control","structuremap","asp.net-mvc-4"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1999,"score":7,"question_id":9557497,"title":"Structuremap does not work on MVC4","body":"<p>I've used <code>StructureMap</code> in MVC2/3 many times without any concern, but I guess handling IoC is different in MVC4.\nWhen i used <code>StructureMap</code> for handling IoC in MVC4 I get the following exception.:</p>\n\n<h2>No parameterless constructor defined for this object</h2>\n\n<p>Why?\nI have not found any correct result in google except this: <a href=\"http://connect.microsoft.com/VisualStudio/feedback/details/725313/ioc-not-working-in-mvc4\" rel=\"nofollow\">IoC Not Working In MVC4</a>\nThese is my IoC classes:</p>\n\n<pre><code>public static class IoC {\n    public static IContainer Initialize() {\n        ObjectFactory.Initialize(x =&gt;\n                    {\n                        x.Scan(scan =&gt;\n                        {\n                            //scan.Assembly(\"DLL.Core\");\n                            scan.Assembly(\"DLL.CMS\");\n                            scan.TheCallingAssembly();\n                            scan.WithDefaultConventions();\n                        });\n                        x.For&lt;IDbContext&gt;().Use&lt;ModelEntities&gt;();\n                        x.For(typeof(IRepository&lt;&gt;)).Use(typeof(Repository&lt;&gt;));\n                        x.For&lt;IHttpControllerActivator&gt;();\n                        x.For&lt;IController&gt;();\n                    });\n\n        return ObjectFactory.Container;\n    }\n</code></pre>\n\n<p>And SmDependencyResolver is:</p>\n\n<pre><code>    public class SmDependencyResolver : IDependencyResolver\n{\n    private readonly IContainer _container;\n\n    public SmDependencyResolver(IContainer container)\n    {\n        _container = container;\n    }\n\n    public object GetService(Type serviceType)\n    {\n        if (serviceType == null) return null;\n        try\n        {\n            return serviceType.IsAbstract || serviceType.IsInterface\n                     ? _container.TryGetInstance(serviceType)\n                     : _container.GetInstance(serviceType);\n        }\n        catch\n        {\n\n            return null;\n        }\n    }\n\n    public IEnumerable&lt;object&gt; GetServices(Type serviceType)\n    {\n        return _container.GetAllInstances(serviceType).Cast&lt;object&gt;();\n    }\n}\n</code></pre>\n\n<p>And my error is:</p>\n\n<blockquote>\n  <p>No parameterless constructor defined for this object.\n      Description: An unhandled exception occurred during the execution of the current web request. Please review the                stack\n  trace for more information about the error and where it originated in\n  the code. </p>\n\n<pre><code>Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.\n</code></pre>\n  \n  <p>Source Error: </p>\n  \n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n  \n  <p>Stack Trace: </p>\n  \n  <p>[MissingMethodException: No parameterless constructor defined for this\n  object.]    System.RuntimeTypeHandle.CreateInstance(RuntimeType type,\n  Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0<br>\n  System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean\n  skipCheckThis, Boolean fillCache) +98<br>\n  System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly,\n  Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean\n  fillCache) +241    System.Activator.CreateInstance(Type type, Boolean\n  nonPublic) +69<br>\n  System.Web.Mvc.DefaultControllerActivator.Create(RequestContext\n  requestContext, Type controllerType) +67</p>\n  \n  <p>[InvalidOperationException: An error occurred when trying to create a\n  controller of type\n  'Parsian.Web.Areas.Dashboard.Controllers.MemberController'. Make sure\n  that the controller has a parameterless public constructor.]<br>\n  System.Web.Mvc.DefaultControllerActivator.Create(RequestContext\n  requestContext, Type controllerType) +182<br>\n  System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext\n  requestContext, Type controllerType) +80<br>\n  System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext\n  requestContext, String controllerName) +74<br>\n  System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase\n  httpContext, IController&amp; controller, IControllerFactory&amp; factory)\n  +196    System.Web.Mvc.&lt;>c_<em>DisplayClass6.b</em>_2() +49    System.Web.Mvc.&lt;>c__DisplayClassb<code>1.&lt;ProcessInApplicationTrust&gt;b__a()\n  +13    System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7    System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action\n  action) +22<br>\n  System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func</code>1 func)\n  +124    System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98<br>\n  System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext,\n  AsyncCallback callback, Object state) +50<br>\n  System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext\n  context, AsyncCallback cb, Object extraData) +16<br>\n  System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n  +8862676    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184</p>\n</blockquote>\n\n<p>Thanks for correct answers. </p>\n"},{"tags":["xml","asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":13069115,"title":"Remove XML namespace attributes from MVC Web API response","body":"<p>I am getting the following response from an MVC Web Api;</p>\n\n<pre><code>&lt;Products xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"my.namespace.com\"&gt;\n&lt;Product&gt;\n&lt;Id&gt;1&lt;/Id&gt;\n&lt;Name&gt;Tomato Soup&lt;/Name&gt;\n&lt;Category&gt;Groceries&lt;/Category&gt;\n&lt;Price&gt;1&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;Product&gt;\n&lt;Id&gt;2&lt;/Id&gt;\n&lt;Name&gt;Yo-yo&lt;/Name&gt;\n&lt;Category&gt;Toys&lt;/Category&gt;\n&lt;Price&gt;3.75&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;Product&gt;\n&lt;Id&gt;3&lt;/Id&gt;\n&lt;Name&gt;Hammer&lt;/Name&gt;\n&lt;Category&gt;Hardware&lt;/Category&gt;\n&lt;Price&gt;16.99&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;/Products&gt;\n</code></pre>\n\n<p>I would like to remove the xmlns:* tags.</p>\n\n<p>I have found various posts, including some on SO that give options, but these do not appear to work.</p>\n\n<p>What I have tried;</p>\n\n<pre><code>[XmlRoot(\"Products\",Namespace = \"my.namespace.com\")]\n    [DataContract(Namespace = \"\")]\n    public class ProductsModel : List&lt;Product&gt;\n    {\n    }\n\n[XmlRoot(\"Product\")]\n    [DataContract(Namespace = \"\", Name = \"Product\")]\n    public class Product \n    {\n        [DataMember]\n        public int Id { get; set; }\n\n        [DataMember]\n        public string Name { get; set; }\n\n        [DataMember]\n        public string Category { get; set; }\n\n        [DataMember]\n        public decimal Price { get; set; }\n    }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true;\n</code></pre>\n\n<p>These have no effect.</p>\n"},{"tags":["javascript","asp.net-mvc","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":147,"score":1,"question_id":12107416,"title":"how to retrieve id value in kendo menu","body":"<p>I am using kendo menu in my project.I want to retrieve id value when i click on the selected item. I used onSelect event and I am able to retrieve the selected item Text.can u tell me how to retrieve the id value</p>\n"},{"tags":["asp.net-mvc","datepicker","unobtrusive-javascript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":13059455,"title":"System.DateTime and the format of dd/MM/yyyy isn't accepted","body":"<p>I have an mvc3 project it was working fine with System.DateTime ,now I'm trying to upgrade for V4 now I have that famous problem of the DateTime I have a JQuery datepicker with this format</p>\n\n<p>{ dateFormat: 'dd/mm/yy' } \nI want it day/month/year as my culture I have tried many solutions and this is the 7th hour searching trying to address the problem I have tried many things like\n-- changing the EditorTemplate or add attributes of </p>\n\n<pre><code>[DataType(DataType.Date)] \n</code></pre>\n\n<p>or </p>\n\n<pre><code>[DisplayFormat(DataFormatString = \"{0:dd/MM/yyyy}\", ApplyFormatInEditMode = true)]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>[DataType(DataType.Date), DisplayFormat( DataFormatString=\"{0:dd/MM/yyyy}\", ApplyFormatInEditMode=true )\n</code></pre>\n\n<p>also I have tried to change the uiCulture to my culture nothing still I have the validation error message (The field DateTime must be a date.)</p>\n\n<p>I have searched too much for this like in\n<a href=\"http://stackoverflow.com/questions/12109007/unable-to-set-datetime-format-in-mvc-4-using-data-annotations\">Unable to set datetime format in MVC 4 using data annotations</a></p>\n\n<p>also model binder didn't work like in here <a href=\"http://stackoverflow.com/questions/11272851/format-datetime-in-asp-net-mvc-4\">ModelBinder</a>,</p>\n\n<p>two things fixed that is to change the poco DateTime to string and I do really don't want to do that the second is to disable UnobtrusiveJavaScript in Web.config \n</p>\n\n<p>It seems that the mvc4 automatically change the type of text input of DateTime to have that html5 attribute  (type=\"datetime\") without the annotation of [DataType(DataType.Date)] or any attribute related with DateTime also I want to enable Unobtrusive JavaScript and end up with the format of dd/MM/yyyy to be the dafault date format  </p>\n"}]}
{"total":44785,"page":13,"pagesize":100,"questions":[{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13071944,"title":"How route to aspx in razor view engine?","body":"<p>I use razor view engine. \nI need get route url aspx view. </p>\n\n<p>Example:</p>\n\n<p><code>&lt;tag src=\"/ReportViewer.aspx\" /&gt;</code> - The current implementation. file in the root of the site. </p>\n\n<p><code>&lt;tag src=\"@Url.Action(\"ReportViewer\", \"Reports\") /&gt;</code> - I need this construction. File path Views/Repors/ReportViewer.aspx</p>\n\n<p>someone knows the solution ?</p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":95,"score":2,"question_id":13073247,"title":"WebSecurity.InitializeDatabaseConnection method can be called only once","body":"<p>I'm trying Windows Azure to host an MVC4 web application.\nI've created a test app, using VS2012 MVC4 internet application template and added a custom Model and Controller to it.</p>\n\n<p>I've published it on Azure and managed to get 'update-database' apply migrations to the Azure Database.</p>\n\n<p>When i try the app locally, but using the Azure SQL database, it works fine.\nI can login/register and use my test controller.</p>\n\n<p>When i try the app online, i can use the test controller but login or register links give the following exception:</p>\n\n<pre><code>Server Error in '/' Application.\n\nThe \"WebSecurity.InitializeDatabaseConnection\" method can be called only once.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.InvalidOperationException: The \"WebSecurity.InitializeDatabaseConnection\" method can be called only once.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nStack Trace: \n\n\n[InvalidOperationException: The \"WebSecurity.InitializeDatabaseConnection\" method can be called only once.]\n   WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider simpleMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +123\n   WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51\n   WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +52\n   MembershipTest2.Filters.SimpleMembershipInitializer..ctor() +193\n</code></pre>\n\n<p>Do you have any idea where that comes from ?\nIf i debug (the local version), this method is only called once.</p>\n\n<p>Thanks.</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13072067,"title":"Binding JSON when POSTed with x-www-form-urlencoded not application/json","body":"<p>Is there a way to get the <code>DefaultModelBinder</code> to work when the data is POSTed using <code>x-www-form-urlencoded</code> instead of <code>application/json</code>, but the actual payload of the value is JSON encoded?</p>\n\n<p>For example, I am being sent a single key-value-pair:</p>\n\n<pre><code>key: 'events' \nvalue: '[{\"event\":\"inbound\",\"ts\":1350928095,\"msg\":{\"raw_msg\":\"Received\"}}]'\n</code></pre>\n\n<p>where the value contains JSON array in this case.</p>\n\n<p><strong>NOTE: The POST is coming from a 3rd party so I cannot control it.</strong></p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":508,"score":0,"question_id":8965352,"title":"Creating DropDownListFor in a Partial View in MVC","body":"<p>I have created a partial view that displays a dropdownlist</p>\n\n<p><code>html.DropDownListFor(m =&gt; m.SelectOption, Model.SelectOption)</code></p>\n\n<p>I get an error of Object not reference to an instance....</p>\n\n<p>If I put the code above into my view (aspx) it works fine no problem. But in the partial view I get the error. </p>\n\n<p>The textbox controls in my partial view works fine using the same model. I just can't around the DropDownList.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13069642,"title":"format string containing html","body":"<p>I have a simple string variable that contains a portion of HTML inside. For example: </p>\n\n<pre><code>string contents = \"&lt;div&gt;&lt;p&gt;Hi how are you. &lt;a href=\"#\"&gt;Click here&lt;/a&gt; if you want to know more\";\n</code></pre>\n\n<p>I want to include this HTML in page:</p>\n\n<pre><code>&lt;div class=\"description\"&gt;\n    @contents\n&lt;/div&gt;\n</code></pre>\n\n<p>However, it messes up the rest of the page because of unclosed tags.</p>\n\n<p>Is there a function (or a helper) that reads and formats the HTML inside for example, to complete the HTML without errors:</p>\n\n<pre><code>@Html.DisplayProperHTML(contents)\n</code></pre>\n\n<p>This will render as:</p>\n\n<pre><code>&lt;div&gt;&lt;p&gt;Hi how are you. &lt;a href=\"#\"&gt;Click here&lt;/a&gt; if you want to know more&lt;/p&gt;&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13069015,"title":"What are the goals and benefits of using areas?","body":"<p>I have question about benefit of using areas and necessity of them.</p>\n\n<p>I see some opposites:</p>\n\n<ol>\n<li>MVC patterns have routes, and they need for escaping out of folder structure. </li>\n<li>But when we using areas we create folders which maps to routes. And result of it is that we finally return again to folder structure? </li>\n</ol>\n\n<p>Does really needed areas in mvc application, because they force us to return to folder structure.</p>\n\n<p><strong>Which goals of using areas in asp mvc? Which benefits of using areas.</strong></p>\n"},{"tags":["asp.net-mvc","wcf","web-services","api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13072769,"title":"MVC or Extract Service Layer","body":"<p>we have an application that is built with .Net MVC.  We are now tasked with exposing API's to third parties.  Members on our team want to just continue down our current path and just use more controllers so we can reuse the backend of our current application.  Logic tells me we need to create a seperate service layer when more clients are going to be accessing it, but .Net MVC seems to take care of all of this.  Is it really acceptable architecture to use controllers in a stand alone application to expose API's and what would be the potential gains of extracting the service layer out?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13072632,"title":"Cleaner way to ad Dropdownlist and PostBack","body":"<p>I would like to know if there is a simpler way to ad a Dropdownlist and his postback call:</p>\n\n<p>Controller:</p>\n\n<pre><code>    /// &lt;summary&gt; \n    /// Create a new Form for new Ad\n    /// &lt;/summary&gt; \n    public virtual ActionResult Create()\n    {\n        // Build the Dropdownlist for the Makes\n        var makesDto = _makeService.ListAllMakes();\n        var makesViewModel = Mapper.Map&lt;IList&lt;MakeDto&gt;, IList&lt;MakeViewModel&gt;&gt;(makesDto);\n\n        // Build the ViewModel to return to the View with the Make List\n        CreateAdViewModel viewModel = new CreateAdViewModel();\n        viewModel.MakeList = new SelectList(makesViewModel, \"Id\", \"Name\");  // Mapping from the Entity Make: Id = Make.Id | Name = Make.Name\n\n        // Build the Dropdownlist for the Makes\n        var modelsDto = _modelService.ListModelByMake(viewModel.Make_Id);\n        var modelsViewModel = Mapper.Map&lt;IList&lt;ModelDto&gt;, IList&lt;ModelViewModel&gt;&gt;(modelsDto);\n\n        // Add to the ViewModel to return to the View with the Make List\n        viewModel.ModelList = new SelectList(modelsViewModel, \"Id\", \"Name\");  // Mapping from the Entity Model: Id = Model.Id | Name = Model.Name\n\n        return View(viewModel);\n    }\n\n    /// &lt;summary&gt; \n    /// Create a new Ad\n    /// &lt;/summary&gt; \n    [HttpPost]\n    public virtual ActionResult Create(CreateAdViewModel adViewModel)\n    {\n        if (!ModelState.IsValid)\n        {\n            // Build the Dropdownlist for the Makes\n            var makesDto = _makeService.ListAllMakes();\n            var makesViewModel = Mapper.Map&lt;IList&lt;MakeDto&gt;, IList&lt;MakeViewModel&gt;&gt;(makesDto);\n\n            // Build the ViewModel to return to the View with the Make List\n            adViewModel.MakeList = new SelectList(makesViewModel, \"Id\", \"Name\");  // Mapping from the Entity Make: Id = Make.Id | Name = Make.Name\n\n            // Build the Dropdownlist for the Makes\n            var modelsDto = _modelService.ListModelByMake(adViewModel.Make_Id);\n\n            // Build and Set the first information line of the DropDownList\n            var firstModelDto = new ModelDto();\n            firstModelDto.Name = HeelpResources.DropdownlistModelFirstRecord;\n            modelsDto.Insert(0, firstModelDto);\n            var modelsViewModel = Mapper.Map&lt;IList&lt;ModelDto&gt;, IList&lt;ModelViewModel&gt;&gt;(modelsDto);\n\n            // Add to the ViewModel to return to the View with the Make List\n            adViewModel.ModelList = new SelectList(modelsViewModel, \"Id\", \"Name\");  // Mapping from the Entity Model: Id = Model.Id | Name = Model.Name\n\n            return View(adViewModel);\n        }\n\n        var adDto = Mapper.Map&lt;CreateAdViewModel, CreateAdDto&gt;(adViewModel);\n\n        _adService.CreateAd(adDto);\n\n        return RedirectToAction(MVC.Home.Index());\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>    &lt;div id=\"makes\"&gt;\n        @Html.DropDownListFor(m =&gt; m.Make_Id, Model.MakeList, HeelpResources.DropdownlistMakeFirstRecord)\n    &lt;/div&gt;\n    &lt;div id=\"models\"&gt;\n        @Html.DisplayNameFor(m =&gt; m.Model_Id)\n        @Html.DropDownListFor(m =&gt; m.Model_Id, Model.ModelList)\n    &lt;/div&gt;        \n</code></pre>\n\n<p>Is there a way to avoid post back to the server and keep it only at the client side?</p>\n\n<p>I would like to validate as soon as the input box loses the focus and presente the Validation Message.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","url.action"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13072010,"title":"How to html encode a text before sending it unto the server?","body":"<p>I have the below code in my MVC view which gets the contents of a TextArea control and makes a request to a url (action) then displays the result in another text box:</p>\n\n<pre><code>var input = $('#tbInput').val(); // it can have some invalid characters such as +, #, etc\n\n        var encodedInput = // how?; \n\n        $.ajax({\n            url: url,\n            success: function (data) {\n                alert(data);\n                $('#tbResult').html(data);\n            },\n            error: function (request, status, error) {\n                alert('An error occured: ' + error);\n            },\n            cache: false\n        });\n</code></pre>\n\n<p>If I only send the input data, the invalid characters are just removed so I'd need to html encode the text then sending it?</p>\n\n<p>The input should appear as below:</p>\n\n<p><a href=\"http://www.mydomain.com/?i=\" rel=\"nofollow\">http://www.mydomain.com/?i=</a></p>\n\n<p>Thanks,</p>\n"},{"tags":["c#","asp.net-mvc","url.action"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":3,"view_count":68,"score":-3,"question_id":13066497,"title":"How to pass a javascript variable to Url.Action?","body":"<p>I'm using MVC 3.0 and I'm just wondering How to pass a javascript variable to <code>Url.Action</code> method which is a server side method?</p>\n\n<p>The below code fails to compile:</p>\n\n<pre><code>string actionName = \"MyAction\";\nstring url = '@(Url.Action(' + actionName + '))';\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","example","petapoco"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":1,"view_count":827,"score":0,"question_id":8165556,"title":"Petapoco MVC Example","body":"<p>Where can I find an example of a MVC large solution that has been made with <strong>Petapoco</strong>?</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13071763,"title":"Default Value in Model via WebMatrix","body":"<p>I want to add a Role based on the SQL only, not the ASPnet Roles, there are reasons for this so its a non issue. </p>\n\n<p>The problem im having is in the Model of Create user i have the <code>[DefaultValue(\"User\")]</code>\nhowever no value is going into the Database. </p>\n\n<p>MODEL : </p>\n\n<blockquote>\n<pre><code>public class RegisterModel\n{\n    [Required]\n    [Display(Name = \"User name\")]\n    public string UserName { get; set; }\n</code></pre>\n</blockquote>\n\n<pre><code>    [Required]\n    [StringLength(100, ErrorMessage = \"The {0} must be at least {2} characters long.\", MinimumLength = 6)]\n    [DataType(DataType.Password)]\n    [Display(Name = \"Password\")]\n    public string Password { get; set; }\n\n    [DataType(DataType.Password)]\n    [Display(Name = \"Confirm password\")]\n    [Compare(\"Password\", ErrorMessage = \"The password and confirmation password do not match.\")]\n    public string ConfirmPassword { get; set; }\n\n    [DefaultValue(\"User\")]\n    public string Role { get; set; }\n}\n</code></pre>\n\n<p>That all seems ok, </p>\n\n<p>Controler is as : </p>\n\n<pre><code>        public ActionResult CreateUser(RegisterModel userModel)\n    {\n        if (ModelState.IsValid)\n        {\n            // Create the user\n            try\n            {\n                WebSecurity.CreateUserAndAccount(userModel.UserName, userModel.Password, userModel.Role);\n                WebSecurity.Login(userModel.UserName, userModel.Password);\n                return RedirectToAction(\"ListUsers\", \"Account\");\n            }\n            catch (MembershipCreateUserException e)\n            {\n                ModelState.AddModelError(\"\", ErrorCodeToString(e.StatusCode));\n            }\n        }\n\n        // Something not right if here - return\n        return View(userModel);   \n    }\n</code></pre>\n\n<p>The View is your standard user &amp; Password fields, the reason i want to enter the default value on the model side is so that one cant simple edit the HTML in the <code>&lt;form&gt;</code> tag and change the hidden value of <code>role=\"user\"</code> so <code>role=\"Admin\"</code> ..</p>\n\n<p>I have seen similar questions but unfortunately this is confusing me. </p>\n\n<p>Hopefully iv'e explained all as best i can! </p>\n"},{"tags":["c#","asp.net-mvc","http","asp.net-mvc-4","form-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13057648,"title":"How do I get files AND form values from an ASP.NET MVC 4 website?","body":"<p>I have an ASP.NET MVC Website that has a dropdown list that is being created using this in the view...   </p>\n\n<pre><code>@Html.DropDownList(\"Programs\")\n</code></pre>\n\n<p>Programs is populated from a Business Object collection and stuffed into the ViewBag in the index action on the Home Controller...  </p>\n\n<pre><code>\\\\get items...\nViewBag.Programs = items;\n</code></pre>\n\n<p>The view also has potentially three files I am getting like this in the same view...  </p>\n\n<pre><code>&lt;input type=\"file\" name=\"files\" id=\"txtUploadPlayer\" size=\"40\" /&gt;  \n&lt;input type=\"file\" name=\"files\" id=\"txtUploadCoaches\" size=\"40\" /&gt;  \n&lt;input type=\"file\" name=\"files\" id=\"txtUploadVolunteers\" size=\"40\" /&gt; \n</code></pre>\n\n<p>All of the aforementioned controls are contained in a Form that is created in the view using...  </p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n     &lt;!--  file and other input types  --&gt;\n     &lt;input type=\"submit\" name=\"btnSubmit\" value=\"Import Data\" /&gt;\n}\n</code></pre>\n\n<p>My problems is that I cannot find a way to process all of the files AND reference the form fields.  </p>\n\n<p>Specifically, I need to know what Program the user selected from the dropdown.  </p>\n\n<p>I can process the files using this code with no problem...  </p>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(IEnumerable&lt;HttpPostedFileBase&gt; files)\n//public ActionResult Index(FormCollection form)\n{\n\n    _tmpFilePath = Server.MapPath(\"~/App_Data/uploads\");\n\n    if (files == null) return RedirectToAction(\"Index\");\n    foreach (var file in files)\n    {\n        if (file != null &amp;&amp; file.ContentLength &gt; 0)\n        {\n            var fileName = Path.GetFileName(file.FileName);\n            var path = Path.Combine(_tmpFilePath, fileName);\n            if (System.IO.File.Exists(path)) System.IO.File.Delete(path);\n\n            _file = file;\n\n            file.SaveAs(path);\n\n            break;  //just use the first file that was not null.\n        }\n    }\n\n\n\n    //SelectedProgramId = 0;\n\n    //DoImport();\n\n    return RedirectToAction(\"Index\");\n}\n</code></pre>\n\n<p>But I cannot figure how to ALSO get access to the POST form values especially the Programs dropdown selected value (and for the record there is also a checkbox that I cannot read the value from.)  Fiddler shows me that the Response has the file references AND the selected program but I cannot figure out how to get them out of the POST using ASP.NET MVC.</p>\n\n<p>I know this question is pretty basic but I am stilling learning the whole web/http thing not just MVC.  </p>\n\n<p><strong>EDIT</strong>\nThanks for your answers.  I had the thought that the answer might lie in passing in both the files and the form values into the POST.</p>\n\n<p>So my last question is ... how do I change the HTML.BeginForm block to pass in both the files and form values?  Right now I have ...</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n  //do stuff\n}\n</code></pre>\n\n<p>What should that using statement be to get both form values and files as separate parameters of the ActionResult?</p>\n\n<p><strong>EDIT MY EDIT</strong><br>\nIt seems that I don't have to make any changes...the debugger is showing that both files and form are non-null.  Cool!  Is that right?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":70,"score":4,"question_id":13049529,"title":"MVC Model Validation on a dynamic form?","body":"<p>I have the following Model : <br /></p>\n\n<pre><code>public class FileModel\n{\n    public int Id { get; set; }\n\n    [Required(ErrorMessage = \"Required\")]\n    [StringLength(100, ErrorMessage = \"Max is 100, Min is 3\", MinimumLength = 3)]\n    public string Name { get; set; }\n\n    public string Path { get; set; }\n\n    [Required(ErrorMessage = \"Required\")]\n    public string FileTypeId { get; set; }\n\n    public DateTime RegistrationDate { get; set; }\n}\n</code></pre>\n\n<p>the following is my view :</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"FileManagement\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    &lt;table class=\"content-table\" style=\"min-width: 600px; border-spacing: 15px;\"&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"4\" class=\"table-header\"&gt;New File\n                &lt;div class=\"add-icon\"&gt;+&lt;/div&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Name: &lt;/td&gt;\n            &lt;td&gt;@Html.TextBoxFor(q =&gt; q.NewFile.Name, new { maxlength = \"100\", id = \"NewFile_Name1\", name = \"NewFile.Name1\" })\n                &lt;br /&gt;@Html.ValidationMessageFor(q =&gt; q.NewFile.Name)\n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;input type=\"file\" id=\"FileUploadField1\" /&gt;&lt;/td&gt;\n            &lt;td style=\"width: 16px; text-align: center;\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"4\" style=\"text-align: center;\"&gt;\n                &lt;input type=\"submit\" value=\"Submit\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;script type=\"text/javascript\"&gt;\n\n        $('.content-table .add-icon').click(function () {\n            var lastFileField = $('.content-table input[type=\"file\"]').last();\n            var lastId = lastFileField.attr('id').replace(/\\D*/g, '');\n            lastId = parseInt(lastId) + 1;\n            var newFields = '&lt;tr&gt;' +\n                '&lt;td&gt;Name : &lt;/td&gt;' +\n                '&lt;td&gt;&lt;input data-val=\"true\" data-val-length=\"Max chars is 100, Min chars is 3\" data-val-length-max=\"100\" data-val-length-min=\"3\" data-val-required=\"Required\" id=\"NewFile_Name' + lastId + '\" name=\"NewFile.Name' + lastId + '\" type=\"text\" value=\"\" /&gt;&lt;br /&gt;&lt;span class=\"field-validation-valid\" data-valmsg-for=\"NewFile.Name' + lastId + '\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;&lt;/td&gt;' +\n                '&lt;td&gt;&lt;input type=\"file\" id=\"FileUploadField' + lastId + '\"/&gt;&lt;/td&gt;' +\n                '&lt;td style=\"text-align:right;\"&gt;&lt;div class=\"delete-icon\"&gt;&lt;/div&gt;&lt;/td&gt;' +\n                '&lt;/tr&gt;';\n            var lastTr = $(lastFileField).parents('tr:first')[0];\n            $(lastTr).after(newFields);\n        });\n\n        $('.content-table .delete-icon').live('click', function () {\n            $(this).parents('tr:first').remove();\n        });\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p>As you can see, We have a form for uploading one or more files. So, I've added an + button for users that they can add a file field to form.<br /><br />\nUsers must enter the name of the file and select a file for uploading. But MVC client validator just validate the first inputs that added with <code>Razor</code>.<br /><br />\nHow can I force MVC validator to validate all fields at the client side and server side.<br /></p>\n\n<p><strong>Another question is:</strong> <br />\nHow can we handle getting the field values at a MVC Controller.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","actionmethod"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13071298,"title":"Action method being called multiple times","body":"<p>I've just spotted something quite strange about an action method that is being called, via a simple click of a link, in my MVC 3 site.  For some reason this action method is being called multiple times.  Not only that but subsequent calls get called before previous ones complete.  What I mean is, suppose I have 10 lines of code in my action method, numbered 1, 2 ... 10.  The first call of the method will execute lines 1,2 and 3.  The second call executes lines 1,2,3 and 4, then the third call executes lines 1,2,3 and 4 and then the first continues from line 4 and so on.  It's as if multiple threads are calling this action method, but as far as I can see nothing of the sort is happening because all I do to get this to happen is click on a link.  Is there any reason why this should happen?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Actually, having done analysis, I can see that it is 2 calls that are being made.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13039224,"title":"How to dynamically populate anchor tag in MVC View using ViewData value?","body":"<p>Is there a way to populate an anchor tag's <code>href</code> value in the View using a ViewBag value? What I want to be able to do is something like this:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;a href=\"&lt;%= ViewBag.MyURL %&gt;\" title=\"My URL\"&gt;\"&lt;%= ViewBag.MyURL %&gt;\"&lt;/a&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n        ViewBag.MyURL = \"http://www.Google.com\";\n        return View();\n    }\n</code></pre>\n\n<p>How do I go about doing this correctly?</p>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13064797,"title":"Jquery-ui Autocomplete select Call back function is not working properly","body":"<p>I am using jquery-ui autocomplete and making a  ajax call inside the autocomplete function i am calling my controller action which returns Json , every thing is working fine but when i select some thing from suggestion dropdown then <code>select</code> call back function called and in <code>select</code> callback function <code>ui</code> is undefined . </p>\n\n<p><strong>Javascript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                alert(ui.item.Name);\n            alert(ui.item.Value);\n            alert(ui.item.LogoUrl);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n"},{"tags":["asp.net-mvc","view","html.dropdownlistfor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13051228,"title":"Build an empty MVC DropdownListFor for a Cascade Sub-List","body":"<p>I would like to build an empty Dropdownlistfor to received the results of a previous Dropdownlisfor selection:</p>\n\n<p>The actual view:</p>\n\n<pre><code>    &lt;div id=\"makes\"&gt;\n        @Html.DropDownListFor(m =&gt; m.Make_Id, Model.MakeList, HeelpResources.DropdownlistMakeFirstRecord)\n    &lt;/div&gt;\n    &lt;div id=\"models\"&gt;\n        @Html.DropDownListFor(m =&gt; m.Model_Id, Model.ModelList, HeelpResources.DropdownlistModelFirstRecord)\n    &lt;/div&gt;        \n</code></pre>\n\n<p>The actual Controller (to work I had to build an empty SelectedList but it seems strange to have to do this):</p>\n\n<pre><code>   public virtual ActionResult Create()\n    {\n        // Build the Dropdownlist for the Makes\n        var makesDto = _makeService.ListAllMakes();\n        var makesViewModel = Mapper.Map&lt;IList&lt;MakeDto&gt;, IList&lt;MakeViewModel&gt;&gt;(makesDto);\n\n        // Build the Dropdownlist for the Models\n        var makeId = -1;\n        var modelsDto = _modelService.ListModelByMake(makeId);\n        var modelsViewModel = Mapper.Map&lt;IList&lt;ModelDto&gt;, IList&lt;ModelViewModel&gt;&gt;(modelsDto);\n\n        // Build the ViewModel to return to the View\n        CreateAdViewModel viewModel = new CreateAdViewModel();\n        viewModel.MakeList = new SelectList(makesViewModel, \"ID\", \"Name\");\n        viewModel.ModelList = new SelectList(modelsViewModel, \"ID\", \"Name\"); \n\n        return View(viewModel);\n    }\n</code></pre>\n\n<p>Is there a way to build something like this: \n    @Html.DropDownListFor(m => m.Model_Id, null)</p>\n\n<p>And remove the // Build the Dropdownlist for the Models from the controller?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":35,"score":-3,"question_id":13069531,"title":"How can we do the MVC with ADO.NET?","body":"<p>I have a task to work for MVC using ADO.NET.Can we do this using normal ADO.NET?If possible some helpful links.</p>\n"},{"tags":["c#","asp.net-mvc","dll"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13069244,"title":"Telerik.OpenAccess.dll is missing in asp.net project?","body":"<p>Someone can help me on how to get Telerik.OpenAccess.dll</p>\n\n<p>I am using a asp.net mvc project. I found this sollution doesn't have this dll. When I install this. <a href=\"http://www.telerik.com/products/orm/features/sdk.aspx\" rel=\"nofollow\">http://www.telerik.com/products/orm/features/sdk.aspx</a> then it's fail to completed.</p>\n\n<p>Now their is any other way to get it worked for me.</p>\n"},{"tags":["javascript","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12463045,"title":"execute javascript function from controller in MVC 3","body":"<p>I got an action result inside a controller and i need to display Modals from bootstrap-modal  the problem is... .</p>\n\n<p><code>ScriptManager.RegisterStartupScript</code> isn't working like in old asp.net</p>\n\n<p>there is a solution to this? I'm new to mvc.</p>\n"},{"tags":["javascript","asp.net","asp.net-mvc","jquery-slider"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13066492,"title":"How to change background using jquery slider?","body":"<p>I am using jquery slider, i have a single layout and a center div for content..i need to change the color of the layout while i slide on a different page. This is What i am doing using asp.net mvc3. </p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div id=\"iPhone_Product\"&gt;\n        &lt;div class=\"slides_containeriphone\" &gt;\n            @if (Model == null)\n            {\n                &lt;div class=\"animateriphone\" id=\"1\"&gt;\n                    @Html.Partial(\"_iPhone_Main\")\n                &lt;/div&gt;\n                    &lt;div class=\"animateriphone\" id=\"2\"&gt;\n                    @Html.Partial(\"Salah\")\n                &lt;/div&gt;\n                    &lt;div class=\"animateriphone\" id=\"3\"&gt;\n                    @Html.Partial(\"_Tasbeeh\")\n                &lt;/div&gt;\n            }\n            else\n            { \n                foreach (string s in Model)\n                {\n                    &lt;div class=\"animateriphone\"&gt;\n                        @Html.Partial(s);\n                    &lt;/div&gt;\n                }\n            }\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>javascript:</p>\n\n<pre><code>function color_change() {\n\n        var x = document.getElementById('2');\n\n        if (x.id == '2') {\n            $(\".st_tabs_container\").css({ \"background-color\": \"#ffe21f\" })\n        }\n        else\n        {\n            $(\".st_tabs_container\").css({ \"background-color\": \"#c8c7c7\" })\n        }\n    }\n</code></pre>\n\n<p>It changes the background to #ffe21f but the else statement does not work.\nAny help would be appericiated.</p>\n"},{"tags":["asp.net-mvc","antiforgerytoken"],"answer_count":0,"favorite_count":2,"up_vote_count":3,"down_vote_count":2,"view_count":62,"score":1,"question_id":13068365,"title":"Why doesn't stackoverflow use an AntiForgeryToken?","body":"<p>I was looking into forms html of stackoverflow and I realized that it doesn't use  <code>AntiForgeryToken</code> so I create a localhost page with the form of stackoverflow and I post it and it works.</p>\n\n<p>So, why doesn't stackoverflow use it?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13068488,"title":"How to configure routes in asp.net mvc with Areas","body":"<p>I am working on asp.net mvc 3. I have three areas in my project like,</p>\n\n<pre><code>MyProject/Areas/Blogs\nMyProject/Areas/Forums\nMyProject/Areas/Groups\n</code></pre>\n\n<p>Among these three, blogs view is startup view. for that i have set the globla.ascx as</p>\n\n<pre><code>routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Blog\", action = \"Blog\", id = UrlParameter.Optional }\n            );\n</code></pre>\n\n<p>and in BlogAreaRegistration.cs,</p>\n\n<pre><code>context.MapRoute(\n                \"Blogarea_Default\",\n                \"{controller}/{action}/{id}\",\n                new { controller = \"Blog\", action = \"Blog\", id = UrlParameter.Optional }\n            );\n</code></pre>\n\n<p>and in ForumAreaRegistration.cs,</p>\n\n<pre><code>context.MapRoute(\n                null,\n                \"Forums/{action}/{id}\",\n                new {controller=\"Forums\", action = \"Forum\", id = UrlParameter.Optional }\n            );\n</code></pre>\n\n<p>and in GroupsAreaRegisration.cs,</p>\n\n<pre><code>   context.MapRoute(\n        \"Groups_default\",\n        \"Groups/{controller}/{action}/{id}\",\n        new { controller = \"Groups\", action = \"Group\", id = UrlParameter.Optional }\n    );\n</code></pre>\n\n<p>Here Forum and Blog are work as i desire but the Group does not work it always shows <strong>404 Resource not found page</strong> so please guide me if i did any mistake in the process.</p>\n"},{"tags":["c#","asp.net-mvc","security","userprincipal"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13068447,"title":"Principal get lost after one requst","body":"<p>I have the function <code>AffiliateLogin</code> in a controller that sets the <code>Principal</code>.<br>\nthe row <code>principal.User = user;</code> is actually the one storing the Principal.\nBut after I redirect to another controller, and test my <code>AuthorizeWithRolesAttribute</code> attribute, the principal is reset.\nthis is one second after the login, you can see the red arrow:  </p>\n\n<p><img src=\"http://i.stack.imgur.com/N9OT9.png\" alt=\"enter image description here\"></p>\n\n<p>this is the function that stores it.<br>\nWhat am I doing wrong?<br>\nThanks  </p>\n\n<pre><code>public JsonResult AffiliateLogin(string email, string password)\n        {\n            if (ModelState.IsValid)\n            {\n                Affiliate user = api.GetUserByCredencials&lt;Affiliate&gt;(email, password);\n                if (user != null)\n                {\n\n                     IIdentity identity = new UserIdentity(true,user.Email);\n                    UserPrincipal principal = new UserPrincipal(identity, new string[] {\"Affiliate\"});\n                    principal.User = user;\n\n                    HttpContext.User = principal;\n                    return Json(\"Login success\");\n                }\n            }\n            return Json(\"Fail To Login\");\n        }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","c#-4.0"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":12476663,"title":"How to save a Bitmap using filestream","body":"<p>I have created a <code>bitmap</code> and I want to save it in my <em>upload</em> folder. How can I do this? </p>\n\n<p>My Code:</p>\n\n<pre><code>public FileResult image(string image)\n{\n    var bitMapImage = new Bitmap(Server.MapPath(\"/Content/themes/base/images/photo.png\"));\n    Graphics graphicImage = Graphics.FromImage(bitMapImage);\n    graphicImage.SmoothingMode = SmoothingMode.AntiAlias;\n    graphicImage.DrawString(image, new Font(\"Trebuchet MS,Trebuchet,Arial,sans-serif\", 10, FontStyle.Bold), SystemBrushes.WindowFrame, new Point(15, 5));\n    graphicImage.DrawArc(new Pen(Color.Red, 3), 90, 235, 150, 50, 0, 360);\n    MemoryStream str = new MemoryStream();\n    bitMapImage.Save(str, ImageFormat.Png);\n    return File(str.ToArray(), \"image/png\");\n}\n</code></pre>\n\n<p>The path I will use: </p>\n\n<pre><code>string mynewpath = Request.PhysicalApplicationPath + \"Upload\\\\\";\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13068094,"title":"elFinder and asp.net - unable to connect to backend","body":"<p>I'm following the author installation procedure, but I still can't have it working. I'm using asp.net mvc 4 and visual studio 2010.</p>\n\n<p>I added the reference and added the necessary configuration into the root web.config.</p>\n\n<p>Here is my root web.config file</p>\n\n<pre><code>  &lt;configSections&gt;\n    &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n    &lt;section name=\"elFinder\" type=\"elFinder.Connector.Config.AppConnectorConfig, elFinder.Connector\" requirePermission=\"false\" /&gt;\n  &lt;/configSections&gt;\n  &lt;elFinder apiVersion=\"2.0\"\n    localFSRootDirectoryPath=\"C:\\SVN\\DataExport\\Wellman\\Wellman\\Upload\"\n    localFSThumbsDirectoryPath=\"C:\\SVN\\DataExport\\Wellman\\Wellman\\Upload\\.thumbs\"\n    rootDirectoryName=\"Root\"\n    uploadMaxSize=\"20M\"\n    defaultVolumeName=\"LocalFileSystem\"\n    baseUrl=\"http://localhost:57014/upload/\"\n    baseThumbsUrl=\"http://localhost:57014/upload/.thumbs/\"&gt;\n    duplicateFilePattern=\"Copy of {0}\"\n    duplicateDirectoryPattern=\"Copy of {0}\"\n    thumbsSize=\"48,48\"\n  &lt;/elFinder&gt;\n</code></pre>\n\n<p>added the global.asax</p>\n\n<pre><code>public class MvcApplication : System.Web.HttpApplication\n{\n    protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n        //ControllerBuilder.Current.DefaultNamespaces.Add(\"Wellman.Controllers\");\n\n        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n        BundleConfig.RegisterBundles(BundleTable.Bundles);\n\n        // register IoC\n        var builder = new ContainerBuilder();\n        // add other registrations...\n        // add elFinder connector registration\n        builder.RegisterElFinderConnector();\n        // create container\n        IContainer _container = builder.Build();\n        // need also to set container in elFinder module\n        _container.SetAsElFinderResolver();\n    }\n</code></pre>\n\n<p>and the routeconfig.cs</p>\n\n<pre><code>    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n        routes.IgnoreRoute(\"elfinder.connector\");\n\n        routes.MapHttpRoute(\n            name: \"DefaultApi\",\n            routeTemplate: \"api/{controller}/{id}\",\n            defaults: new { id = RouteParameter.Optional }\n        );\n\n        routes.MapRoute(\n            name: \"LogOff\",\n            url: \"logout/{id}\",\n            defaults: new { controller = \"Account\", action = \"LogOff\", id = UrlParameter.Optional }\n        );\n\n        routes.MapRoute(\n            name: \"Default\",\n            url: \"{controller}/{action}/{id}\",\n            defaults: new { controller = \"Dashboard\", action = \"Index\", id = UrlParameter.Optional }\n        );\n\n    }\n</code></pre>\n\n<p>So what am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","localization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13067008,"title":"ASP.net MVC - using custom culture - resources not being loaded","body":"<p>I have an ASP.net MVC site, which I want to use a couple of resource files to set some strings.</p>\n\n<p>I have a class library containing my viewmodels, and I have added a resource file (ValidationMessages) there, with a single string (called Test), and then have a property like so in my view model:</p>\n\n<pre><code>        public string TestResource\n        {\n            get\n            {\n                return ValidationMessages.Test;\n            }\n        }\n</code></pre>\n\n<p>And that works fine, when output on my view like so:</p>\n\n<pre><code>&lt;div&gt;@Model.TestResource&lt;/div&gt;\n</code></pre>\n\n<p>If I add a ValidationMessages.en-au.resx (my default would be en-gb) file to my class library and create a different version of the test string, and then have the following in my global.asax:</p>\n\n<pre><code> protected void Application_AcquireRequestState(object sender, EventArgs e)\n {\n     Thread.CurrentThread.CurrentCulture = CultureInfo.GetCultureInfo(\"en-au\");\n     Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo(\"en-au\");\n }\n</code></pre>\n\n<p>And this also works fine.</p>\n\n<p>What I want to do is add a custom culture 'en-gb-ly' - I have registered this culture on my machine ok (using code from <a href=\"http://stackoverflow.com/questions/1304507/create-custom-culture-in-asp-net\">here</a>).  When I set the current culture to \"en-gb-ly\" in my global.asax and include a ValidationMessages.en-gb-ly.resx in my class library, the output has reverted back to the 'base' version of the Test string, not the one in my en-gb-ly resource.</p>\n\n<p>Anybody any idea why this might be happening?</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","jquery-ui","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13067505,"title":"elFinder - asp.net connector global.asax configuration","body":"<p>I want to integrate elFinder into asp.net mvc 4. I've seen the wiki for elFinder ASP.NET Connector. But I can't understand some of the config. </p>\n\n<p>First of all is the </p>\n\n<p>In Application_Start add Autofac registration:</p>\n\n<pre><code>// register IoC\nvar builder = new ContainerBuilder();\n// add other registrations...\n// add elFinder connector registration\nbuilder.RegisterElFinderConnector();\n// create container\n_container = builder.Build();\n// need also to set container in elFinder module\n_container.SetAsElFinderResolver();\n</code></pre>\n\n<p>_container is undefined, should I just create the variable?</p>\n\n<p>IContainer _container;</p>\n\n<p>Where should I put this definition?</p>\n\n<p>I've tried defining the container, and run the project inside visual studio, elFinder said \"unable to connect to backend\"</p>\n\n<p>and </p>\n\n<p>firebug returned this</p>\n\n<p><img src=\"http://i.stack.imgur.com/Z7qVi.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","asp.net-mvc","model-binding","cultureinfo"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13064804,"title":"default modelbinder uses wrong cultureinfo","body":"<p>I have multi-language site and each language uses its own cultureinfo.\nI tried to set culterinfo with ActionFilterAttribute, but it is fired after modelbinding. \nI also tried global asax BeginRequest but RouteData is not yet available.</p>\n\n<p>So where should set CurrentUICulture to modelbinder would also use cultureinfo needed?</p>\n\n<p>Max</p>\n"},{"tags":["c#","asp.net-mvc","loose-coupling"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":34,"score":-4,"question_id":13067396,"title":"What is loosely coupling classes in Asp.net MVC?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/226977/what-is-loose-coupling-please-provide-examples\">What is “loose coupling?” Please provide examples</a>  </p>\n</blockquote>\n\n\n\n<p>I am completely new to ASP.NET MVC. Try to learn ASP.net MVC these days. I need to know what is loose coupling? It is better give some real world example. also curious about why is purpose of Interfaces in this context\nThank you.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13067092,"title":"Making id'less url in asp.net mvc razor","body":"<p>I am working with URL routing , and have some issues. I want my url to be like this:</p>\n\n<p>www.domain.com/p/myproduct</p>\n\n<p>But I also want to be able to retrieve the ID of the product, without accessing the database. I thought about having a URL like:</p>\n\n<p>www.domain.com/p/myproduct/1 </p>\n\n<p>But if I could hide the ID it would be better.</p>\n\n<p>So, how do I do it the simplest way?</p>\n\n<p>Currently my Global.asax has the following route:</p>\n\n<pre><code> routes.MapLocalizedRoute(\"Product\",\n                        \"p/{productId}/{SeName}\",\n                        new { controller = \"Catalog\", action = \"Product\", SeName = UrlParameter.Optional },\n                        new { productId = @\"\\d+\" },\n                        new[] { \"Nop.Web.Controllers\" });\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13067288,"title":"Entity Framework Required Foreign Key = validation error on db.SaveChanges","body":"<p>I have these classes for my Company Entity </p>\n\n<pre><code>    public class Company\n    {\n        public Company()\n        {\n            this.Users = new HashSet&lt;User&gt;();\n            this.Tools = new HashSet&lt;Tool&gt;();\n        }\n\n        public int Id { get; set; }\n        public string Name { get; set; }\n        public string Address { get; set; }\n\n        public virtual ICollection&lt;User&gt; Users { get; set; }\n        public virtual ICollection&lt;Tool&gt; Tools { get; set; }\n        [Required]\n        public virtual CompanyGroup CompanyGroup { get; set; }\n    }\n\n    public class CompanyDto\n    {\n        public string Name { get; set; }\n        public string Address { get; set; }\n    }\n</code></pre>\n\n<p>in the CompaniesController i've added an additional class with the Id parameter for usage in edit/update methods like this</p>\n\n<pre><code>    public class CompanyViewEditModel : CompanyDto {\n        public int Id { get; set; }\n    }\n</code></pre>\n\n<p>The Edit Method looks like that:</p>\n\n<pre><code>        [HttpPost]\n        public ActionResult Edit(CompanyViewEditModel companyViewModel)\n        {\n            if (ModelState.IsValid)\n            {\n                var company = db.Companies.Find(companyViewModel.Id);\n                company.InjectFrom(companyViewModel);\n                db.Entry(company).State = EntityState.Modified;\n                db.SaveChanges();\n                return RedirectToAction(\"Index\");\n            }\n            return View(companyViewModel);\n        }\n</code></pre>\n\n<p>The InjectFrom Method is from ValueInjecter.</p>\n\n<p>Everything works as expected only the db.SaveChanges call fails, because of an validation exception. With some digging in the exceptionI've found out that he thinks the company is invalid because the field CompanyGroup is required but if i take a debugger look at the company variable even after the InjectFrom call everything seems to be fine. The corresponding company group is there.</p>\n"},{"tags":["asp.net-mvc","design-patterns","database-design","blogs","web-site-project"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":112,"score":-3,"question_id":13066799,"title":"Developing a personal blog with MVC 4 from scratch","body":"<p>I want to develop a personal blogging website using ASP.NET MVC 4.</p>\n\n<p>I know that I could be using WordPress/ Joomla/ Orchard/ Umbraco/ Funnelweb, etc., instead of reinventing the wheel but I really wish to try it out myself.</p>\n\n<p>I do not want my website to look like some beatle-aged archaic remain. I see plugins like Akismet/ Prettify/ Markdown/ nrelate that add amazing functionalities to your blog. But I am not really sure if I would be able to use any of these in my custom application as most of them are PHP based. I want to stick under the Microsoft roof and implement technologies like HTML5, CSS3 Silverlight5 and WCF 4.0, along with ASP.NET MVC 4. (At least thats what I plan to do)</p>\n\n<p>I understand that I need to develop a scalable database design that could accomodate newer functionalities in the future. Additionally, the exorbitant focus on SEO and cross-browser capabilities is overwhelming. Permanent links for individual blogs, internal navigation, video-embedding inside posts, etc., sound like building Rome in a day</p>\n\n<p>Please if you could guide me personally or direct me to appropriate resources, it would be very helpful.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvc","html.actionlink"],"answer_count":5,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1743,"score":6,"question_id":8331041,"title":"How to use MVC 3 @Html.ActionLink inside c# code","body":"<p>I want to call the @Html.ActionLink method inside a c# function to return a string with a link on it.</p>\n\n<p>Something like this:</p>\n\n<pre><code>string a = \"Email is locked, click \" + @Html.ActionLink(\"here to unlock.\", \"unlock\") ;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api","oauth-2.0"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":13061407,"title":"OAuth 2.0 for MVC Flow","body":"<p>I'm working with the OAuth 2.0 for MVC which can be found here: </p>\n\n<p><a href=\"http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx#comments\" rel=\"nofollow\">http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx#comments</a> (this is a link to some light documentation, which has a link to the project download). </p>\n\n<p>I'm trying to figure out how the flow works.  It appears to be like this: </p>\n\n<ol>\n<li>Get a RequestToken from the RequestToken controller method</li>\n<li>The controller then passes the request token into OAuthServiceBase.Instance.AccessToken. This ends up going to the DemoService class, which inherits the abstract OAuthServiceBase class. This method hashes the username, using the RequestToken for salt, and then compares it to the password (which has also been hashed and salted with the RequestToken). If they match, it issues an AccessToken. This is sample logic - there is a note here that says in a real application, you're supposed to go get the user's credentials. </li>\n</ol>\n\n<p>This leaves me feeling quite confused on the following points: </p>\n\n<ol>\n<li>I can't understand what the RequestToken is for. The RequestToken expires after 5 minutes - so even though the sample logic is salting the username and password hash with it, I can't see any possible way that we would salt the user's hashed password with it. </li>\n<li>Notwithstanding the foregoing, I don't see any mechanism in this app for salting the password hash. Am I missing something? Don't I want to store the salt persistently on the client side, so I don't have to store the password unencrypted in the db? If I have a persistent salt, I can just store the hashed &amp; salted password in the db and the salt on the client side, and then pass the hashed password in for authentication. </li>\n</ol>\n\n<p>I'm new to writing authentication code in general, as you can probably tell. I know I'm missing something here, I just don't know what it is :)</p>\n"},{"tags":["asp.net-mvc","datatable","converter","ilist","ext.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":13061813,"title":"How to convert Datatable to IList C#","body":"<p><strong>While i build the Project, It have a error like this:</strong> </p>\n\n<blockquote>\n  <p>Server Error in '/' Application.</p>\n  \n  <p>The model item passed into the dictionary is of type\n  'System.Data.DataTable', but this dictionary requires a model item of\n  type 'System.Collections.Generic.IList`1[TLayout.Models.DemoTable]'.</p>\n</blockquote>\n\n<p><strong>This is my Controller</strong></p>\n\n<pre><code>public ActionResult Index()\n        {\n            var dm = new DemoTable();\n            string connstring = \"Server=localhost;Port=5432;User Id=postgres;Password=123456;Database=test\";\n            NpgsqlConnection conn = new NpgsqlConnection(connstring);\n            conn.Open();\n            string sql = \"select * from demo\";\n            NpgsqlDataAdapter da = new NpgsqlDataAdapter(sql, conn);\n            ds.Reset();\n            da.Fill(ds);\n            dt = ds.Tables[0];\n            var demoid = dm.demoid.ToString();\n            var demoname = dm.demoname;\n            for (int i = 0; i &lt; dt.Rows.Count; i++)\n            {\n                List&lt;DataTable&gt; dtb = new List&lt;DataTable&gt;();\n                demoid = dt.Rows[i][\"demoid\"].ToString();\n                demoname = dt.Rows[i][\"demoname\"].ToString();\n                dtb.Add(dt);\n            }\n            return View(dt);\n        }\n</code></pre>\n\n<p><strong>This is my View, to show data to layout:</strong></p>\n\n<pre><code>foreach (var item in Model)\n{\n    fields.Add(Html.X().ModelField().Mapping(@item.demoid.ToString()).Name(\"grid-alarm\"));\n    fields.Add(Html.X().ModelField().Mapping(@item.demoname.ToString()).Name(\"grid-check\"));\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","model","naming-conventions","3-tier"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13061203,"title":"How do I handle name conflicts mapping from business layer to presentation layer?","body":"<p>In a N-tier application, my website connects to a web reference to access business layer logic and to get business layer DTOs. For example, the BL may provide a definition for a Car:</p>\n\n<pre><code>public class Car() {\n    public string Make { get; set; }\n    public string Model { get; set; }\n    . . .\n}\n</code></pre>\n\n<p>In my ASP.NET MVC website, I need to create my own Car model object. (Maybe to add/remove a field or to add validation via data annotations). </p>\n\n<p>Since I already have an object in my namespace named Car, I need to name my model object something else. There really isn't a better name for the object though. Is there an easier way to handle these name conflicts? Alternatively, I could fully qualify the models, but this doesn't seem ideal.</p>\n\n<p>Another possibility, can I use the object from the BL, but extend it so I can add data annotations for validation?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13066171,"title":"How to Show Image in Jquery-UI Autocomplete","body":"<p>i am using jquery-ui auto-complete and making a  ajax call inside the auto-complete function i am calling my controller action which returns Json , every thing is working fine now i want to show image in suggestion drop down , i am also taking image URL in json how can i show image in suggestion drop down along with Name </p>\n\n<p><strong>JavaScript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                alert(ui.item.Name);\n            alert(ui.item.Value);\n            alert(ui.item.LogoUrl);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n"},{"tags":["c#","asp.net-mvc","reflection","ravendb"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13064646,"title":"Get attributes for method given by name in ASP.NET MVC 4","body":"<p>I'm using <code>ravendb</code> as storage backend. Since it uses <code>unit of work</code> pattern I need to open session, perform actions, save results and close session. I want to keep my code clean and don't call session opening and closing explicitly in each action, so I put this code to <code>OnActionExecuting</code> and <code>OnActionExecuted</code> methods, like this:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    #region RavenDB's specifics\n\n    public IDocumentSession DocumentSession { get; set; }\n\n    protected override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        if (filterContext.IsChildAction)\n        {\n            return;\n        }\n\n        this.DocumentSession = Storage.Instance.OpenSession();\n        base.OnActionExecuting(filterContext);\n    }\n\n    protected override void OnActionExecuted(ActionExecutedContext filterContext)\n    {\n        if (filterContext.IsChildAction)\n        {\n            return;\n        }\n\n        if (this.DocumentSession != null &amp;&amp; filterContext.Exception == null)\n        {\n            this.DocumentSession.SaveChanges();\n        }\n\n        this.DocumentSession.Dispose();\n        base.OnActionExecuted(filterContext);\n    }\n\n    #endregion\n</code></pre>\n\n<p>But some actions require connection to <code>ravendb</code> and come don't. So I've decided to create custom attribute and mark methods need to have DocumentSession opened with it. Here is an example:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>    //\n    // GET: /Create\n\n    [DataAccess]\n    public ActionResult Create()\n    {\n        return View();\n    }\n</code></pre>\n\n<p>And I stuck. My plan was to retrieve actions' attributes in the <code>OnActionExecuted</code> method and if <code>[DataAccess]</code> is present, open <code>DocumentSession</code>.</p>\n\n<p>In the <code>OnActionExecuted</code> I can retrieve action name (method's name) via <code>filterContext.ActionDescriptor.ActionName</code> statement. But how I can retrieve method's attributes of the given class using reflection?</p>\n\n<p>I found out that it might be <code>Attribute.GetCustomAttributes</code> call, but closest I got — I need to have <code>MemberInfo</code> object of the method. But how I can get this <code>MemberInfo</code> for method given by name?</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13060518,"title":"Add entity in Entity Framework Insert Null Record","body":"<p>I'm trying to insert a new Entity in EF:</p>\n\n<pre><code>public class Ad\n{\n    // Primary properties\n    public int Kms { get; set; }\n\n    // Navigation properties\n    public virtual Model Model { get; set; }\n}\n</code></pre>\n\n<p>And I receive from the View the model like this (example values):</p>\n\n<p>kms = 222\nModel.Id = 3</p>\n\n<p>Then when I do the Add and SaveChanges of the Entity Framework, I get a NULL record inserted in the Model Table (that generated a new ID) and a record in the Ad Table with the new inserted Model Id.</p>\n\n<p>Why is this happening?</p>\n\n<p>Service Layer:</p>\n\n<pre><code>    public void CreateAd(CreateAdDto adDto)\n    {\n        var adDomain = Mapper.Map&lt;CreateAdDto, Ad&gt;(adDto);\n\n        _adRepository.Add(adDomain);\n        _adRepository.Save();\n    }\n</code></pre>\n\n<p>Repository:</p>\n\n<pre><code>    public void Add(T entity)\n    {\n        _dbSet.Add(entity);\n    }\n\n   public void Save()\n    {\n        try\n        {\n            _dataContext.SaveChanges();\n        }\n        catch (DbEntityValidationException e)\n        {\n            var s = e.EntityValidationErrors.ToList();\n            throw;\n        }\n    }\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>public class CreateAdViewModel\n{\n    // Primary properties\n    public string Version { get; set; }\n    public int Kms { get; set; }\n    public int Year { get; set; }\n    public decimal Price { get; set; }\n\n    public int Make_Id { get; set; }\n    public int Model_Id { get; set; }\n\n    // Navigation properties\n    public IEnumerable&lt;SelectListItem&gt; MakeList { get; set; }\n    public IEnumerable&lt;SelectListItem&gt; ModelList { get; set; }\n}\n</code></pre>\n\n<p>Dto:</p>\n\n<pre><code>public class CreateAdDto\n{\n    // Primary properties\n    public int Kms { get; set; }\n    public int Model_Id { get; set; }\n}\n</code></pre>\n\n<p>The Mapping:</p>\n\n<pre><code>        Mapper.CreateMap&lt;CreateAdDto, Ad&gt;().ForMember(dest =&gt; dest.Model, opt =&gt; opt.MapFrom(src =&gt; new Model { Id = src.Model_Id }));\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13063931,"title":"How could I custom routing with areas in asp.net mvc","body":"<p>I am working on asp.net mvc 3. I am trying to implement the project with areas. i am facing problems with routing. I have folder structure like, <code>projectName/areas/Dashboard/</code> and in my DashboardAreaRegistration.cs </p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n                \"Default_Dashboard\",\n                \"Dashboard/{controller}/{action}/{id}\",\n                new { action = \"Index\", id = UrlParameter.Optional }\n            );\n        }\n</code></pre>\n\n<p>so my routing looks like, <code>localhost:56788/Dashboard/Dashboard/Index</code> here i need my routing should looks like <code>localhost:56788/Dashboard/Index</code> for that i have written like,</p>\n\n<pre><code>context.MapRoute(\n                \"Default_Dashboard\",\n                \"Dashboard/{action}/{id}\",\n                new { area = \"Dashboard\", controller = \"Dashboard\", action = \"PatientPortal\", id = UrlParameter.Optional },\n                new[]{typeof(Controllers.DashboardController).Namespace}\n            );\n\ncontext.MapRoute(\n                \"Default_Dashboard\",\n                \"{controller}/{action}/{id}\",\n                new { area = \"Dashboard\", controller = \"Dashboard\", action = \"PatientPortal\", id = UrlParameter.Optional },\n                new[]{typeof(Controllers.DashboardController).Namespace}\n            );\n</code></pre>\n\n<p>but no use none of them doesnt work for me that means it shows resource not found error. please guide me. </p>\n"},{"tags":["asp.net-mvc","elmah"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":95,"score":2,"question_id":10517374,"title":"Handling ELMAH errors from malformed requests in ASP.NET MVC","body":"<p>We just installed a big ASP.NET MVC project (converted from ASP.NET).  Everything is working great, but we're seeing a huge number of errors via ELMAH that are coming from malformed bot/spider requests.  They are not malicious - just malformed.  Examples are requests for a product page without a ProductID and requests for a product page where the ProductID is not an integer.  In these cases, I have an action method set up that expects an integer ProductID and an error is thrown if ASP.NET MVC sees anything else.</p>\n\n<p>I don't really want to hack my action method to accept strings or nullable ints and write code to do conversions and handle missing parameters.  That seems like a lot of work to handle errors that real users won't see.</p>\n\n<p>I know I can filter out these errors in ELMAH, but I was wondering if there's a more graceful way to handle this.</p>\n"},{"tags":["c#","asp.net-mvc","c#-4.0"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":52,"score":1,"question_id":13063590,"title":"How to print label for UPS shipping service in asp.net","body":"<p>I am trying to implement UPS shipping service in my website, but I have no idea how will I print a label using their web service.<br>\nI am developing my project in <code>asp.net</code> with <code>C#</code>. If anyone implemented it before, please give me some sample code, it will be really great for me. </p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13063527,"title":"How to Map data in jquery-ui autocomplete is not working","body":"<p>i am using jquery-ui autocomplete and making a  ajax call inside the autocomplete function i am calling my controller action which returns Json , but suggestions is not showing in dropdown  </p>\n\n<p><strong>Javascript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                log(ui.item ?\n                \"Selected: \" + ui.item.label :\n                \"Nothing selected, input was \" + this.value);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p><strong>and this is what i am getting in response of ajax call ( this is the image of firebug )</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/jronT.png\" alt=\"enter image description here\"></p>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n\n<p><strong>Edit</strong></p>\n\n<p>now i am trying to access selected value in select callback but its giving <code>Undefined</code> </p>\n\n<pre><code>select: function (event, ui) {\n           alert(ui.item.Name);\n                alert(ui.item.Value);\n                alert(ui.item.LogoUrl);\n        },\n</code></pre>\n"},{"tags":["asp.net-mvc","openxml","httpresponse","openxml-sdk"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13049215,"title":"OpenXml and HttpResponse.OutputStream","body":"<p>I have an Asp.Net Mvc application. In this application i have a functionality to download data from Database to Excel file (with OpenXml Sdk). It works now. But when data is large, time from user request to response with download window becomes 10+ minutes. This is because of two long process:</p>\n\n<ol>\n<li>Taking data from MSSQL server.</li>\n<li>Generating Excel document in memory on server. (Downloading begins only when Excel document completed)</li>\n</ol>\n\n<p>First problem was solved through using of DataReader. Now generating of excel file begins just after user request becomes to webserver.</p>\n\n<p>For solving second problem we need to generate Excel document on HttpResponse.OutputStream, but this stream is not Seekable and generation fails before begining. </p>\n\n<p><strong>Does anyone knows any workaround that can help to work with this problem?</strong></p>\n\n<p>Sample of my generating function:</p>\n\n<pre><code>    public void GenerateSpreadSheetToStream(IDataReader dataReader, Stream outputStream)\n    {\n        var columnCaptions =                FillColumnCaptionsFromDataReader(dataReader.GetSchemaTable());\n//fails on next line with exception \"Cannot open package because FileMode or FileAccess value is not valid for the stream.\"\n        using (var spreadsheetDocument = SpreadsheetDocument.Create(outputStream, SpreadsheetDocumentType.Workbook)) \n        {\n            spreadsheetDocument.AddWorkbookPart();\n            var workSheetPart = spreadsheetDocument.WorkbookPart.AddNewPart&lt;WorksheetPart&gt;();\n            OpenXmlWriter writer;\n            using (writer = OpenXmlWriter.Create(workSheetPart))\n            {\n                using (writer.Write(new Worksheet()))\n                {\n\n                    using (writer.Write(new SheetData()))\n                    {\n                        using (writer.Write(w =&gt; \n                            w.WriteStartElement(new Row(), new[] {new OpenXmlAttribute(\"r\", null, 1.ToString(CultureInfo.InvariantCulture))})))\n                        {\n                            var cells =\n                                columnCaptions.Select(caption =&gt; new Cell()\n                                    {\n                                        CellValue = new CellValue(caption.Item2),\n                                        DataType = CellValues.String\n                                    });\n                            foreach (var cell in cells)\n                            {\n                                writer.WriteElement(cell);\n                            }\n                        }\n                        var i = 2;\n                        while (dataReader.Read())\n                        {\n                            var oxa = new[] { new OpenXmlAttribute(\"r\", null, i.ToString(CultureInfo.InvariantCulture)) };\n                            using (writer.Write(w =&gt; w.WriteStartElement(new Row(), oxa)))\n                            {\n                                var cells =\n                                    columnCaptions.Select(\n                                        (c, j) =&gt;\n                                        new Cell\n                                            {\n                                                CellValue = new CellValue(dataReader[c.Item1].ToString()),\n                                                DataType = CellValues.String,\n                                                CellReference = new StringValue(GetSymbolByCellNumber(j))\n                                            });\n                                foreach (var cell in cells)\n                                {\n                                    writer.WriteElement(cell);\n                                }\n                            }\n                            i++;\n                        }\n                    }\n                }\n            }\n            using (writer = OpenXmlWriter.Create(spreadsheetDocument.WorkbookPart))\n            {\n                using (writer.Write(new Workbook()))\n                {\n                    using (writer.Write(new Sheets()))\n                    {\n                        var sheet = new Sheet\n                        {\n                            Id = spreadsheetDocument.WorkbookPart.GetIdOfPart(workSheetPart),\n                            SheetId = 1,\n                            Name = SheetName\n                        };\n                        writer.WriteElement(sheet);\n                    }\n                }\n            }\n        }\n    }\n    private static string GetSymbolByCellNumber(int number)\n    {\n        var r = number/26;\n        var s = (char) ((number%26) + 65);\n        return new string(s, r);\n    }\n</code></pre>\n\n<p>My FileStreamResultWithTransformation (for working with HttpResponse.OutputStream):</p>\n\n<pre><code>public class FileStreamResultWithTransformation : FileResult\n{\n    private readonly Action&lt;Stream&gt; _action;\n    public FileStreamResultWithTransformation(Action&lt;Stream&gt; action, string contentType, string fileName) : base(contentType)\n    {\n        _action = action;\n        FileDownloadName = fileName;\n    }\n\n    protected override void WriteFile(HttpResponseBase response)\n    {\n        response.BufferOutput = false;\n        _action(response.OutputStream); -&gt;&gt; it fails there  \n    }\n}\n</code></pre>\n\n<p>StackTrace:</p>\n\n<p>[IOException: Cannot open package because FileMode or FileAccess value is not valid for the stream.]\n   System.IO.Packaging.Package.ValidateModeAndAccess(Stream s, FileMode mode, FileAccess access) +784533\n   System.IO.Packaging.Package.Open(Stream stream, FileMode packageMode, FileAccess packageAccess, Boolean streaming) +89\n   System.IO.Packaging.Package.Open(Stream stream, FileMode packageMode, FileAccess packageAccess) +10\n   DocumentFormat.OpenXml.Packaging.OpenXmlPackage.CreateCore(Stream stream) +192\n   DocumentFormat.OpenXml.Packaging.SpreadsheetDocument.Create(Stream stream, SpreadsheetDocumentType type, Boolean autoSave) +215\n   DocumentFormat.OpenXml.Packaging.SpreadsheetDocument.Create(Stream stream, SpreadsheetDocumentType type) +44\n   -------.GenerateSpreadSheetToStream(IDataReader dataReader, Stream outputStream) in d:\\Work\\Epsilon\\development\\Web\\trunk\\Sources\\Epsilon.DocumentGenerator\\XlsXGenerator.cs:119</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13064091,"title":"Stop MVC4 emitting script tag","body":"<p>I have a layout template that is xml and has no &lt;script&gt; tag in it. However when the page is generated &lt;script/&gt; has been generated as the first child element of the root element. Is there any way to turn this off?</p>\n"},{"tags":["c#","asp.net-mvc","textbox","focus","server-side"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13062712,"title":"Server side on lost focus event for a textbox","body":"<p>How can i fire a server side on lost focus event for a textbox without triggering a javascript function i want it server side function is it possible ?</p>\n\n<pre><code>&lt;asp:TextBox id=\"Example\" runat=\"server\" /&gt;\n</code></pre>\n\n<p>Any help appreciated </p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":6,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":694,"score":3,"question_id":2949902,"title":"Debugging deployed azure app","body":"<p>Is it possible to attach to a deployed Azure app? I would like to be able to step through the code so that I can see what values are being set in a request to one of my web role actions.</p>\n\n<p>I have looked around and the only examples seem to be of debugging when the azure app is running on the local machine.</p>\n"},{"tags":["c#","javascript","asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13048042,"title":"FilePathResult Download Progress MVC","body":"<p>I use this method to download a file</p>\n\n<pre><code>public FilePathResult downloadFile(string fileName)\n{\n    //Download the spreadsheet\n    string path = \"C:\\\\Users\\\\Johandk\\\\Documents\\\\Visual Studio 2010\\\\Projects\\\\FormValue\\\\\" + fileName + \".xlsx\";\n    return File(path, \"application/vnd.ms-excel\", fileName + \".xlsx\");\n}\n</code></pre>\n\n<p>Is there any way I can check the download progress or even get notified when the download completes?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13062235,"title":"Add views in sub-folders in ASP.NET MVC 3","body":"<p>I am working on ASP.NET MVC 3 project. I want to divide controllers, models, and views in sub-folders for the sake of simplicity. I able to do it with controllers and models but when i create a view it creates automatically to root folder <code>Views</code>, Is there any way to solve this problem?</p>\n\n<p>eg. I can create  </p>\n\n<p>model class as,</p>\n\n<pre><code>Models/Finance/Bank.cs\nModels/Finance/Finance.cs\nModels/Production/Production.cs\n</code></pre>\n\n<p>controller as,</p>\n\n<pre><code>Controllers/Finance/BankController/Create\nControllers/Finance/BudgetController/Create\nControllers/Production/ProcessController/Create\n</code></pre>\n\n<p>but where i tried to create view for above actions, it creates in to,</p>\n\n<pre><code>Views/Bank/Create.aspx\nViews/Budget/Create.aspx\nViews/Process/Create.aspx\n</code></pre>\n\n<p>I want it should be like,</p>\n\n<pre><code>Views/Finance/Bank/Create.aspx\nViews/Finance/Budget/Create.aspx\nViews/Prodution/Process/Create.aspx\n</code></pre>\n\n<p>Is there any way to create views in same sub-folder as of that created for Controllers and models? thanks!</p>\n"},{"tags":["jquery","asp.net-mvc","checkbox"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":794,"score":1,"question_id":2885251,"title":"jQuery show based on checkbox value at page load","body":"<p>I have an ASP MVC web app and on one of the pages there is a set of Main checkboxes with sub-checkboxes underneath them. The sub-checkboxes should only show up when the corresponding main checkbox is checked. I have the following code that works just fine as long as none of the checkboxes are checked when the page loads.</p>\n\n<pre><code>$(\"input[id$=Suffix]\").change(function() {\n\n        prefix = this.id;\n\n        if (!$(this).hasClass(\"checked\")) {\n            $(\"tr[id^=\" + prefix + \"]\").show();\n            $(this).addClass(\"checked\");\n        }\n        else {\n            $(\"tr[id^=\" + prefix + \"]\").hide();\n            $(this).removeClass(\"checked\");\n        }\n    });\n</code></pre>\n\n<p>Now I need to check a database for the values of the main checkboxes. I get the values, and can check the boxes on page load. But when the page comes up, the sub-checkboxes are not displayed when the main checkbox is checked.</p>\n\n<p>Also, if the main checkbox is checked when the page loads, the sub-checkboxes are only displayed when the main chcekbox is unchecked (obviously because the above function only acts on .change()).</p>\n\n<p>What do you all suggest I try? If you need further explanation feel free to ask.</p>\n\n<p>edit: btw, all of this is in $(document).ready()</p>\n"},{"tags":["asp.net-mvc","architecture","asp.net-membership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13062549,"title":"Using ASP.NET Membership API with layered architecture, DDD etc","body":"<p>I am trying to improve my Architecture approach with Application Development (MVC specifically), ie following loosely coupled approach with interfaces, repositories etc.</p>\n\n<p>With this in mind I'm not sure what the best approach is to tackle the use of (or not to use) the built in ASP.NET Membership API.</p>\n\n<p>When following a layered architecture is it best to do your own Membership or use/wrap/abstract the existing ASP.NET Membership API?</p>\n"},{"tags":["asp.net-mvc","api","ios5"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13062561,"title":"Web Api use model as parameter","body":"<p>The project use MVC4 Web Api .\nWhen I create a account,I should post a model as paramter.\nSo i don't know how to code in IOS.\nIs there any demos or some suggestions?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13062151,"title":"500 - Internal Server Error after moving my ASP MVC4 Azure to VS2012 on a new PC","body":"<p>I have just moved my fully working ASPMVC4 Cloud application to a local instance of VS2012 on a different computer. When I run the application I see the following page:</p>\n\n<p>Server Error\n500 - Internal Server Error.</p>\n\n<p>Can someone give me some advice here. I wonder if it's because I am not using the same PC as I was using before. Does it now consider I'm using a remote PC ?</p>\n\n<p>Note that when I create a new ASP MVC4 cloud application and run it then it works fine and I see the default MVC pages.</p>\n"},{"tags":["c#","asp.net-mvc","modelbinders"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":321,"score":1,"question_id":555425,"title":"Optional property on a bound object in ASP.NET MVC","body":"<p>I'm trying to build a \"New Customer\" form, so I'm using the default model binder to build my Customer object:</p>\n\n<pre><code>public ActionResult New(Customer customer) { ... }\n</code></pre>\n\n<p>The only problem is I have a few properties on the Customer object that aren't required. When I leave these fields blank, ASP.NET MVC automatically throws up model errors stating \"A value is required\".</p>\n\n<p>How can I signal to the framework that these properties are optional?</p>\n"},{"tags":["asp.net-mvc","entity-framework","mono","npgsql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":13042289,"title":"Mono 4.5 profile, entity framework Npgsql - NpgsqlSystem.InvalidCastException Cannot cast from source type to destination type","body":"<p>I have getting \"System.InvalidCastException\nCannot cast from source type to destination type.\" when trying to access the database from asp.net mvc3 using mono 4.5 profile and postgres at the backend.</p>\n\n<p>Here is what my code looks like:</p>\n\n<pre><code>public class User\n{\n    public int Id { get; set; }\n    public string Username { get; set; }\n    public string PasswordHash { get; set; }\n    public string PasswordSalt { get; set; }    \n} // class\n</code></pre>\n\n<p>AppContext:</p>\n\n<pre><code>using System;\nusing System.Data.Entity;\nusing Npgsql;\nusing NpgsqlTypes;\n\nnamespace Web\n{\npublic class AppContext : DbContext\n{\n    public DbSet&lt;User&gt; Users { get; set; }\n\n    protected override void OnModelCreating (DbModelBuilder modelBuilder)\n    {\n        base.OnModelCreating (modelBuilder);\n    }   \n} // class\n} // namespace\n</code></pre>\n\n<p>Database schema (dbo)</p>\n\n<pre><code>CREATE TABLE dbo.\"Users\"\n(\n\"Id\" integer NOT NULL DEFAULT nextval('dbo.\"Users_Id_seq\"'::regclass),\n\"Username\" character varying(50) NOT NULL,\n\"PasswordHash\" character varying(255) NOT NULL,\n\"PasswordSalt\" character varying(128) NOT NULL,\nCONSTRAINT pk_users_id PRIMARY KEY (\"Id\")\n)\n\npublic class HomeController : Controller\n{\n    public ActionResult Index ()\n    {\n        var db = new AppContext();\n        var users = db.Users.Find(1);\n        ViewData [\"Message\"] = \"Welcome to ASP.NET MVC on Mono!\";\n        return View ();\n    }\n}\n</code></pre>\n\n<p>error i am getting is:</p>\n\n<pre><code>System.InvalidCastException\n\nCannot cast from source type to destination type.\n\nDescription: HTTP 500.Error processing request.\nDetails: Non-web exception. Exception origin (name of application or object): Npgsql.\nException stack trace:\nat Npgsql.NpgsqlFactory.CreateConnection () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/Npgsql/Npgsql/NpgsqlFactory.cs:64\nat System.Data.Entity.Internal.LazyInternalConnection.CreateConnectionFromProviderName (string) [0x00007] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:379\nat System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting (System.Configuration.ConnectionStringSettings) [0x00045] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:368\nat System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig (string,System.Data.Entity.Internal.AppConfig) [0x0000e] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:310\nat System.Data.Entity.Internal.LazyInternalConnection.Initialize () [0x00047] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:242\nat System.Data.Entity.Internal.LazyInternalConnection.get_ProviderName () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalConnection.cs:118\nat System.Data.Entity.Internal.LazyInternalContext.get_ProviderName () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalContext.cs:290\nat System.Data.Entity.Internal.DefaultModelCacheKeyFactory.Create (System.Data.Entity.DbContext) [0x00022] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/DefaultModelCacheKeyFactory.cs:20\nat System.Data.Entity.Internal.LazyInternalContext.InitializeContext () [0x00091] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/LazyInternalContext.cs:388\nat System.Data.Entity.Internal.InternalContext.Initialize () [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/InternalContext.cs:421\nat System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType (System.Type) [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/external/entityframework/src/EntityFramework/Internal/InternalContext.cs:650\nat System.Data.Entity.Internal.Linq.InternalSet`1&lt;Web.Users&gt;.Initialize () &lt;0x0006f&gt;\nat System.Data.Entity.Internal.Linq.InternalSet`1&lt;Web.Users&gt;.get_InternalContext () &lt;0x00028&gt;\nat System.Data.Entity.Internal.Linq.InternalSet`1&lt;Web.Users&gt;.Find (object[]) &lt;0x0002e&gt;\nat System.Data.Entity.DbSet`1&lt;Web.Users&gt;.Find (object[]) &lt;0x0002f&gt;\nat Web.Controllers.HomeController.Index () [0x0001c] in /Users/nix/Documents/Projects/Dot.NET/Store/Web/Controllers/HomeController.cs:15\nat (wrapper dynamic-method) object.lambda_method (System.Runtime.CompilerServices.Closure,System.Web.Mvc.ControllerBase,object[]) &lt;IL 0x00006, 0x0003f&gt;\nat System.Web.Mvc.ActionMethodDispatcher.Execute (System.Web.Mvc.ControllerBase,object[]) [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ActionMethodDispatcher.cs:27\nat System.Web.Mvc.ReflectedActionDescriptor.Execute (System.Web.Mvc.ControllerContext,System.Collections.Generic.IDictionary`2&lt;string, object&gt;) [0x00074] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ReflectedActionDescriptor.cs:84\nat System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod (System.Web.Mvc.ControllerContext,System.Web.Mvc.ActionDescriptor,System.Collections.Generic.IDictionary`2&lt;string, object&gt;) [0x00000] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ControllerActionInvoker.cs:173\nat System.Web.Mvc.ControllerActionInvoker/&lt;InvokeActionMethodWithFilters&gt;c__AnonStorey3B.&lt;&gt;m__46 () [0x00014] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ControllerActionInvoker.cs:216\nat System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter (System.Web.Mvc.IActionFilter,System.Web.Mvc.ActionExecutingContext,System.Func`1&lt;System.Web.Mvc.ActionExecutedContext&gt;) [0x00033] in /private/tmp/source/bockbuild/profiles/mono-mac-release/build-root/mono-2.11/_build/mono-2.11.git/mcs/class/System.Web.Mvc3/Mvc/ControllerActionInvoker.cs:189\n</code></pre>\n\n<p>any suggestions or clue about whats going on?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13061464,"title":"How do I show a dynamically-generated menu in the _SiteLayout.cshtml page?","body":"<p>Is it possible to show database content on <code>_layout.cshtml</code>?</p>\n\n<p>I have <code>menu</code> and <code>roleMenu</code> tables, and I want show different a menu based on database records.</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `menu` (\n  `Id` INT NOT NULL AUTO_INCREMENT,\n  `Name` VARCHAR(50) NOT NULL,\n  `IconUrl` VARCHAR(200) NOT NULL,\n  `ActionUrl` VARCHAR(200) NOT NULL,\n  `ParentMenuId` INT NULL DEFAULT NULL,\n  `Hide` boolean not null DEFAULT False,\n  PRIMARY KEY (`Id`),\n  CONSTRAINT `FK_menu_menu` FOREIGN KEY (`ParentMenuId`) REFERENCES `menu` (`Id`) ON DELETE CASCADE);\n</code></pre>\n\n<p>How can I do this?</p>\n"},{"tags":["c#","sql-server","asp.net-mvc","lucene.net"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":13060798,"title":"asp.net mvc - searching","body":"<p>I have a requirement where a user can type in a keyword and the search should look at 4 columns to match against (name, city, state, zip) and return the search results. I'm wondering if I should use a LIKE clause, Free Text Search, Lucene .net, etc. also, I am using sql server.</p>\n\n<p>Pros/Cons?</p>\n\n<p>Any suggestions would be greatly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc","linq","iqueryable"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":237,"score":1,"question_id":5227435,"title":"Is it possible to hide IQueryable from controllers yet still allow for pagination and sorting?","body":"<p><strong>Background</strong></p>\n\n<p>I am working on a web application using a unit of work / repository pattern. I opted to have a service layer which interacts with the repositories. The repositories return <em>IQueryable</em> to the service layer and the service layer returns <em>List</em> to the controllers.</p>\n\n<p>I decided on not returning <em>IQueryable</em> to the controller to make sure that queries would be reused and placed in the proper layer - the service layer. Also because web services may be required later on.</p>\n\n<p><strong>Question</strong></p>\n\n<p>What is the best way to allow for pagination and sorting at the controller level without exposing <em>IQueryable</em> at the controller level?</p>\n\n<p>One option is to add parameters to all service functions which may return multiple entities but this doesn't seem ideal. Alternatively I could still page on the returned Lists but this would cause a lot of unnecessary data access.</p>\n\n<p><strong>Edit to clarify</strong></p>\n\n<p>My repository has a function like:</p>\n\n<pre><code>public IQueryable&lt;T&gt; GetAll()\n{\n    return objectSet;\n}\n</code></pre>\n\n<p>My service has a function like:</p>\n\n<pre><code>public List&lt;Person&gt; GetAllPeople()\n{\n    return repository.GetAll().ToList()\n}\n</code></pre>\n\n<p>I'm happy having the repository returning <em>IQueryable</em> to the service as this allows the service to have functions like: GetPersonByName, GetPersonByEmail etc</p>\n\n<p>But i'm looking for an alternative to just giving the <em>GetAllPeople</em> function above parameters of 'PageNumber' and 'PageSize'.</p>\n"},{"tags":["c#","asp.net-mvc","forms-authentication"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13060748,"title":"Cross top level domain authentication using C# MVC","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2056686/asp-net-forms-authentication-and-multiple-domains\">Asp.net forms authentication and multiple domains</a>  </p>\n</blockquote>\n\n\n\n<p>I have a single web application for my clients. </p>\n\n<p>I currently implement cross dub-domain authentication by manipulating the cookie on authenticate like this:</p>\n\n<pre><code>    public void SignIn(Member member)\n    {\n        var roles = new List&lt;string&gt;();\n\n        if (member.IsAdministrator)\n        {\n            roles.Add(\"Admin\");\n        }\n\n        var identity = new AppIdentity(member.Fullname, member.Id, roles.ToArray());\n        FormsAuthentication.SetAuthCookie(identity.ToString(), false);\n\n        var myCookie = FormsAuthentication.GetAuthCookie(identity.ToString(), false);\n        myCookie.Domain = string.Format(\".{0}\", AppSettings.AdminSiteDomain);\n        HttpContext.Current.Response.AppendCookie(myCookie);\n    }\n</code></pre>\n\n<p>Which works great, now all sub-domains of my top level domain are authenticated correctly.</p>\n\n<p>Here comes the hard part though, I also will be offering the client the ability to use their own domain with my app (all point to the same app and server)</p>\n\n<p>So of course the domain will be different, and in terms of authentication cookies not authenticated.</p>\n\n<p>How can I essentially just add another domain as above? Is it possible to authenticated against two domains at once?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","mvc-editor-templates"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13060719,"title":"Access the EmailAddressAttribute inside an MVC editor template","body":"<p>I want to customise a textbox inside an editor template (ie for <code>EditorFor</code>) in MVC (4, razor) if it is an email field.  I have decorated the field with the EmailAddressAttribute but I can't see where this is pushed into the <code>ViewData</code>.  I assumed it would be in the <code>ModelMetadata</code> property but I can't find it.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":13058577,"title":"Dynamic MVC Razor Model from Database","body":"<p>I have a database table with questions for a competition. These are created for specific competitions from an edit page that our staff can use, so each competition may have different questions.</p>\n\n<p>The Questions table has details like the field name, the type (ie checkbox) and the validation type (ie Required and Compare etc).</p>\n\n<p>Is there any way when trying to build the competition view for the customer to dynamically render the questions to the view (as each competition will have different questions)?</p>\n\n<p>I was thinking a dynamic model or something? I am not really sure. Any ideas are welcome.</p>\n\n<hr>\n\n<p>I am a little confused about how to fit my objects into this model structure. So do I create the editor template for the question of the Answer?</p>\n\n<p>Basically when an admin user set's up a competition they have an entry in the competition table with the basic comp into then they can create a number of Questions which go into the CompetitionQuestion table which is linked back to the Comp table, each comp has any number of questions - this table holds details like the field name, the type (ie checkbox) and the validation type (ie Required and Compare etc) as mentioned above.</p>\n\n<p>But when the competition view is rendered for a person to enter it it pulls info from the Comp Model (which is fine) then I need to loop through the CompetitionQuestion's (don't know how to create model for this) and render out each question for the specific comp - these are then saved when the person enters in the Entry (basic user and comp details) and EntryAnswer (answer to each question) tables.</p>\n\n<p>So do I link the EditorTemplate up to the CompetitionQuestion object or the EntryAnswer object?</p>\n\n<p>Ah so confused right now :(</p>\n"},{"tags":["asp.net-mvc","video","html-email"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1304,"score":1,"question_id":1845359,"title":"Is it possible to Embed a Video in Email Newsletter?","body":"<p>I was wondering if I could send an email with video, where i can embed my wmv or any video files from my website on to a email so that when customers open the email they can click play and watch the video?</p>\n\n<p>Or Can I include youtube video directly into email. So that the users can directly watch youtube video on their email?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-4","asp.net-mvc-4","entity-framework-5"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":13055181,"title":"Code first database on Entity Framework 5 in another project","body":"<p>I've got an ASP.NET MVC 4 site with MSSQL database generated by code first approach. I want to use this database in another project. This project should crawl several tables from db, update them and send notification to users.</p>\n\n<p>What is the best way to add existing database from the first project to the second project? I'm thinking about generating edmx by database, but this approach doesn't seem good enough.</p>\n"},{"tags":["asp.net-mvc","pdf","itextsharp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13052155,"title":"Work flow for creating and returning PDF in MVC","body":"<p>I'm using microsoft's MVC platform to create a web application. In this application, users will fill out a HTML form, click submit, get redirected to a successful message page and receive a printout in pdf form of the form. In addition, I also want to save their entries in the form in a database. I'm using iTextSharp to create and edit the PDF.</p>\n\n<p>I'm looking for advice on managing the workflow in MVC. Specifically, I have a controller method that would direct the workflow for :</p>\n\n<ol>\n<li>saving the form entries to a database, </li>\n<li>creating and editing the PDF, </li>\n<li>directing the user to a success page, </li>\n<li>returning the PDF for the user to download.</li>\n</ol>\n\n<p>My major question is: how should I delegate the tasks of redirecting to the success page and returning the pdf? As of right now, my controller seems to be able to return only one or the other. Can I redirect to a View that \"comes with\" a PDF?</p>\n"},{"tags":["asp.net-mvc","jquery-ajax","http-post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13056224,"title":"JQuery Post JSON to MVC not redirecting","body":"<p>I'm trying load a page which I have passed some JSON as a POST. The JSON is sent and page returned, but with the below javascript I remain on the original page. I need to redirect to page</p>\n\n<pre><code>$(\"#searchForm\").submit(function (event) {\n                var jsonObjects = {\n                    \"SomeJson\": \"SomeData\"\n                };\n\n                $.ajax({\n                    type: \"POST\",\n                    dataType: \"json\",\n                    async: false,\n                    data: JSON.stringify(jsonObjects),\n                    beforeSend: function (x) {\n                        if (x &amp;&amp; x.overrideMimeType) {\n                            x.overrideMimeType(\"application/json;charset=UTF-8\");\n                        }\n                    },\n                    url: 'Home'\n                });\n                event.preventDefault();\n            });\n</code></pre>\n\n<p>This posts the JSON but the page but does not redirect. The page 'Home' is returned to the browser.</p>\n\n<p>I can't redirect to home on success as the post arguments won't be present</p>\n\n<p>I have tried doing this without javascript and submitting with standard html, but can't seem to embed the JSON</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","dynamic-content"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13055522,"title":"Dynamic content with MVC 3 razor","body":"<p>I'm developing a e-shop with mvc 3 and razor. In the part where I show the products there is a menu of categories and I want that the content of the page change according to the selected category without leaving the page.</p>\n\n<p>I have done this before with ajax but I'm new in mvc 3 and razor. I would do this that way but I think there is a way to do this with mvc and razor and I'm not sure how to make the controller to send the data I need without leaving the page.</p>\n\n<p>how can I do this? \nhow should the controller be?</p>\n\n<p>Any help is welcome\nThanks</p>\n"},{"tags":["c#","asp.net-mvc","resharper"],"answer_count":1,"favorite_count":0,"up_vote_count":12,"down_vote_count":0,"view_count":151,"score":12,"question_id":13053865,"title":"Why is ReSharper telling me that \"User.Identity == null\" will always be false?","body":"<p>I have a simple property inside one of my ASP.NET MVC <a href=\"http://msdn.microsoft.com/en-us/library/system.web.mvc.controller%28v=vs.108%29.aspx\">Controller</a> classes.</p>\n\n<p><img src=\"http://i.stack.imgur.com/AK96I.png\" alt=\"enter image description here\"></p>\n\n<p>I've seen this many times before, so understand what the message means, but usually it makes perfect sense. This, however, doesn't. To get to the underlined statement, <code>User</code> would have to <strong>NOT</strong> be null, so the check for <code>User.Identity</code> is fine.</p>\n\n<p>The <code>Identity</code> property is part of the <a href=\"http://msdn.microsoft.com/en-us/library/system.security.principal.iprincipal.identity.aspx\"><code>IPrincipal</code> interface</a>, and returns an object that inherits <a href=\"http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx\"><code>IIdentity</code></a>.</p>\n\n<p>To inherit this interface, or any interface for that matter, this property must be a reference type, and therefore can potentially be null, right?</p>\n\n<p>So why is my beloved ReSharper moaning?</p>\n"},{"tags":["xml","asp.net-mvc","asp.net-mvc-4","asp.net-web-api","xmlserializer"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13053037,"title":"Custom XML output?","body":"<p>Playing around with the Web API with Framework 4.0\nWanted XML only output, so removed the JSON formatter from the formatters collection.\nNow, I'd like to modify the standard XML that the XMLSerializer is outputting:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n-&lt;ArrayOfCategory xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"     xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;-\n  &lt;Category&gt;\n    &lt;Id&gt;1&lt;/Id&gt;\n    &lt;Name&gt;Drink&lt;/Name&gt;\n  &lt;/Category&gt;-\n  &lt;Category&gt;\n    &lt;Id&gt;2&lt;/Id&gt;\n    &lt;Name&gt;Snack&lt;/Name&gt;\n  &lt;/Category&gt;\n&lt;/ArrayOfCategory&gt;\n</code></pre>\n\n<p>I'd like to change the \"Arrayof\" node to say something more meaningful, and need to add a couple more nodes (with extra information) above the \"Arrayof\" node.  </p>\n\n<p>Is there an easy way to do this? or do I have to write a custom formatter/seralizer?</p>\n"},{"tags":["asp.net-mvc","foreach","event-delegation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13056818,"title":"MVC 4 - Bubbled event in foreach loop","body":"<p>How to access controls in foreach loop and respective events? In view - </p>\n\n<pre><code>foreach(var m in models.model){ \n    &lt;td@Html.DropDownList(\"client\", (IEnumerable&lt;SelectListItem&gt;)ViewBag.Clients, \"\")&lt;/td&gt; \n    &lt;td&gt;&lt;input id=\"btnGetStoreDetails\" type=\"button\" value=\"Show Store Details\" onclick=\"showStores();\" /&gt;&lt;/td&gt; \n    &lt;td&gt;@Html.DropDownList(\"state\" , (IEnumerable&lt;SelectListItem&gt;)ViewBag.States, \"\")&lt;/td&gt;\n    &lt;td&gt;@Html.DropDownList(\"city\" , (IEnumerable&lt;SelectListItem&gt;)ViewBag.Cities, \"\")&lt;/td&gt;\n    &lt;td&gt;@Html.DropDownListFor(x =&gt; m.StoreId, (IEnumerable&lt;SelectListItem&gt;)ViewBag.Stores, \"\")\n} \n</code></pre>\n\n<p>Here button click populate state data. but event only refers first row data and change first row states dropdownlist as name for each control is same in every row which is giving difficulty to retrive data as per selected value.</p>\n\n<p>One more thing, model only have storeId no other dropdown info is stored in model.</p>\n\n<p>Please help me how to solve this.</p>\n"},{"tags":["c#","asp.net-mvc","oauth","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13056545,"title":"mvc4 openauth login","body":"<p>I have set up an app in Facebook and I have implemented a facebook button into my website, on login I get: </p>\n\n<blockquote>\n  <p>\"An error occurred. Please try again later.\" </p>\n</blockquote>\n\n<p>from facebook but it works with Google login. It has worked before. Any ideas of what might cause this as my application is throwing no exceptions?</p>\n"},{"tags":["asp.net-mvc","http","iis7"],"answer_count":6,"favorite_count":2,"up_vote_count":19,"down_vote_count":0,"view_count":12602,"score":19,"question_id":2383169,"title":"Server cannot set status after HTTP headers have been sent IIS7.5","body":"<p>Sometimes I get exception in my production environment:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>Process information</strong> \n  <ul>\n  <li>Process ID: 3832  </li>\n  <li>Process name: w3wp.exe </li>\n  <li>Account name: NT AUTHORITY\\NETWORK SERVICE  </li>\n  </ul></li>\n  <li><strong>Exception information</strong>\n  <ul>\n  <li>Exception type: System.Web.HttpException   </li>\n  <li>Exception message: <strong>Server cannot set status after HTTP headers have been sent.</strong>  </li>\n  </ul></li>\n  <li><strong>Request information</strong>\n  <ul>\n  <li>Request URL: <a href=\"http://www.myulr.pl/logon\" rel=\"nofollow\">http://www.myulr.pl/logon</a>  </li>\n  <li>Request path: /logon  </li>\n  <li>User host address: 10.11.9.1    </li>\n  <li>User: user001  </li>\n  <li>Is authenticated: True   </li>\n  <li>Authentication Type: Forms   </li>\n  <li>Thread account name: NT AUTHORITY\\NETWORK SERVICE   </li>\n  </ul></li>\n  <li><strong>Thread information</strong>\n  <ul>\n  <li>Thread ID: 10   </li>\n  <li>Thread account name: NT AUTHORITY\\NETWORK SERVICE   </li>\n  <li>Is impersonating: False </li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<pre><code>Stack trace: at System.Web.HttpResponse.set_StatusCode(Int32 value) at  \nSystem.Web.HttpResponseWrapper.set_StatusCode(Int32 value) at  \nSystem.Web.Mvc.HandleErrorAttribute.OnException(ExceptionContext filterContext) at  \nSystem.Web.Mvc.ControllerActionInvoker.InvokeExceptionFilters(ControllerContext controllerContext, IList(1) filters, Exception exception) at  \nSystem.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) at System.Web.Mvc.Controller.ExecuteCore() at  \nSystem.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass8.&lt;BeginProcessRequest&gt;b__4() at  \nSystem.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() at  \nSystem.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass8(1).&lt;BeginSynchronous&gt;b__7(IAsyncResult _) at  \nSystem.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult(1).End() at   \nSystem.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) at  \nSystem.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() at  \nSystem.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; ompletedSynchronously) \n</code></pre>\n\n<p>I didn't noticed this error on my test environment what should I check?</p>\n\n<p><strong>I am using ASP.NET MVC 2 (Release Candidate 2)</strong> </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13058969,"title":"How to pass data from StartPage (_ViewStart.cshtml) to Layout.cshtml?","body":"<p>In my layout page, I have a banner that I only want to show at Staging environment. How can I have it hidden automatically once deployed to Production?</p>\n\n<p>In <code>_ViewStart.cshtml</code>, I can use <code>System.Environment.GetEnvironmentVariable(\"web_env\")</code> to obtain the needed info, but how to hide the <code>div</code> in the layout page? I can't return a <code>ActionResult</code> like in the controllers, can I?</p>\n\n<p><code>&lt;div id='warning'&gt;blah&lt;/div&gt;</code></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In <code>_ViewStart.cshtml</code>:</p>\n\n<pre><code>PageData[\"IsProd\"] = System.Environment.GetEnvironmentVariable(\"web_env\") == \"PROD\";\n</code></pre>\n\n<p>In <code>Layout.cshtml</code>:</p>\n\n<pre><code>@if (!PageData[\"IsProd\"])\n{\n    &lt;div id=\"warning\"&gt;\n        you are in testing environment.\n    &lt;/div&gt;\n}\n</code></pre>\n"},{"tags":["xml","asp.net-mvc","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13056518,"title":"Remove <ArrayOf. From MVC Web Api response","body":"<p>I am getting the following response from a standard MVC 4 WebApi project;</p>\n\n<pre><code>&lt;ArrayOfProduct xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n&lt;Product&gt;\n&lt;Id&gt;1&lt;/Id&gt;\n&lt;Name&gt;Tomato Soup&lt;/Name&gt;\n&lt;Category&gt;Groceries&lt;/Category&gt;\n&lt;Price&gt;1&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;/ArrayOfProduct&gt;\n</code></pre>\n\n<p>I am trying to make it so that it returns</p>\n\n<pre><code>&lt;Products&gt;\n&lt;Product&gt;\n&lt;Id&gt;1&lt;/Id&gt;\n&lt;Name&gt;Tomato Soup&lt;/Name&gt;\n&lt;Category&gt;Groceries&lt;/Category&gt;\n&lt;Price&gt;1&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;/Products&gt;\n</code></pre>\n\n<p>I have found many reference to various methods that supposedly solve this, none work;</p>\n\n<p>Changing the default serializer does not work.</p>\n\n<p>Creating a customer serializer for <code>Product</code> does not work.</p>\n\n<p>Creating a new class that has <code>List&lt;Product&gt;</code> exposed with suitable XmlRoot and XmlElement attributes does not work.</p>\n\n<p>Adding <code>Datacontract</code> attributes does not work.</p>\n\n<p>Adding <code>CollectionDatacontract</code> attributes does not work.</p>\n\n<p>This appears to be so simple to everyone else, except me!</p>\n"},{"tags":["asp.net","asp.net-mvc","iis","paypal","ipn"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13049514,"title":"Error 500 returned only by IPN Paypal simulator, manual checking OK","body":"<p>In my ASP MVC 2 project exists Paypal support, but server(application?) didn't accept IPN which should be sended as POST message. First I try to use IPN simulator and it's always return error 500. </p>\n\n<p>Strange is, that my own testing script which send some form data to specify defined action for IPN works! At least I deleted all function code from IPN controller/action and let only simple logging and action is finished by: <code>return Content(\"some result text\");</code></p>\n\n<p>I read some log from IIS, but I found only this:</p>\n\n<pre><code>Thread information:\nThread ID: 10 \nThread account name: NT AUTHORITY\\NETWORK SERVICE \nIs impersonating: False \nStack trace: at System.RuntimeType.CreateInstanceImpl(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean fillCache) at System.Activator.CreateInstance(Type type, Boolean nonPublic) at System.Web.Mvc.ControllerBuilder.&lt;&gt;c__DisplayClass5.&lt;SetControllerFactory&gt;b__4()\n</code></pre>\n\n<p>It's really interesting, that my own testing scripts sending data as IPN are working, but Sandbox IPN simulator not.\nThanks for any advice or tip</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-web-api","asp.net-mvc-routing","wcf-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13053485,"title":"Return either xml or json from MVC web api based on rewuest","body":"<p>Given the following webapiconfig;</p>\n\n<pre><code>config.Routes.MapHttpRoute(\n            name: \"DefaultApi\",\n            routeTemplate: \"api/{controller}/{id}\",\n            defaults: new { id = RouteParameter.Optional }\n        );\n</code></pre>\n\n<p>and this controller;</p>\n\n<pre><code>  public class ProductsController : ApiController\n    {\n         Product[] _products = new Product[] \n        { \n            new Product { Id = 1, Name = \"Tomato Soup\", Category = \"Groceries\", Price = 1 }, \n            new Product { Id = 2, Name = \"Yo-yo\", Category = \"Toys\", Price = 3.75M }, \n            new Product { Id = 3, Name = \"Hammer\", Category = \"Hardware\", Price = 16.99M } \n        };\n\n        public IEnumerable&lt;Product&gt; GetAllProducts()\n        {\n            return _products;\n        }\n    }\n</code></pre>\n\n<p>Using the URL <code>http://localhost/api/Products</code> I get a list of products in XML format.</p>\n\n<p>What I would like to do is have the option to return either json or xml based on the request. So for json, it would be;</p>\n\n<pre><code>http://localhost/api/Products.json\n</code></pre>\n\n<p>and for XML, it would be;</p>\n\n<pre><code>http://localhost/api/Products.xml\n</code></pre>\n\n<p>likewise;</p>\n\n<pre><code>http://localhost/api/Products.json/1/\nhttp://localhost/api/Products.xml/1/\n</code></pre>\n\n<p>Is this possible and how would I achieve this functionality?</p>\n\n<p>An alternative would be something like;</p>\n\n<pre><code>http://localhost/api/json/Products/\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","security","asp.net-membership"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13034869,"title":"Use ASP.NET Membership e Profile in ASP.NET MVC 3","body":"<p>I use classic ASP.NET Membership Provider in my ASP.NET MVC 3 application. When I validate user by Membership.Validate() method, I set the value in FormsAuthentication.SetAuthCookie() for persistent login during the navigation of the web site, but when i try to call the HttpContext.User.Identify.Name i get a String Empty value. Where is the problem? </p>\n\n<p>P.S. In the past, i used the ASP.NET Web Forms Access Controls to do this job that automatize this mecanism. </p>\n"},{"tags":["mysql","asp.net-mvc","asp.net-mvc-4","asp.net-membership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":115,"score":-2,"question_id":13023769,"title":"asp.net mvc4 connect to mysql membership provider","body":"<p>me and my group are doing a project using asp.net and mysql, is there any way we can do a login function, use the mysql membership provider on MVC 4 ?</p>\n"},{"tags":["asp.net","asp.net-mvc","wcf","wcf-data-services"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13058504,"title":"can we have operationcontract without datacontract in WCF?","body":"<p>When we create WCF Service, we have SrviceContract (Interface), OperationCOntract(Methods) and DataContract(Class types).</p>\n\n<p>I am wondering if we can have OperationContract without DataContract. If yes, any Example would be great help.</p>\n\n<p>Appreciate your time.</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","html","asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13057374,"title":"group a table list by a column name (sample included)","body":"<p>i have a table that i need to group into divs</p>\n\n<pre><code>rated | rater | team | score | subject\njohn    mike     TA     10      math\njohn    mike     TA     10      PE\njohn    jane     TA     9       math\njohn    jane     TA     9       PE\nkim     lee      TB     5       math\nkim     min      TB     2       math\n</code></pre>\n\n<p>i need it to look like</p>\n\n<pre><code> TA\n    john\n     RATER    MATH  PE         \n     mike      10   10\n     jane      9     9\n TB\n   kim\n    RATER     MATH  PE\n    lee        5\n    min        2\n</code></pre>\n\n<p>In my view I'm just iterating these values from a LINQ with a </p>\n\n<pre><code>@foreach (var item in Model) \n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13056172,"title":"Extending Html.TextBoxFor and Html.PasswordFor in ASP.NET.MVC to show tooltips, not for validaton","body":"<p>I have the following in my view at the moment:</p>\n\n<pre><code>@Html.PasswordFor(m =&gt; m.Password, new { Title = \"Passwords must be at least 6 characters long\" })\n</code></pre>\n\n<p>Works fine, but what's nagging at me is that it would be really great to be able to get the tooltip in the view model as an attribute, as all the other info is there, and it seems messy to put it in my view.</p>\n\n<p>Is there any way that I can pull the value of the attribute through so that my code is something like:</p>\n\n<pre><code>@Html.PasswordFor(m =&gt; m.Password, new { Title = m.Password.Tooltip })\n</code></pre>\n\n<p>Please note: it's not a validation message that should show / hide based on input, think of it as help text.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13056803,"title":"Model binder; binding objects separately works, using a view model fails","body":"<p>I have bit of Razor that generates some text boxes like so:</p>\n\n<pre><code>@for (int i = 0; i &lt; Model.Count; i++)\n{\n    &lt;tr&gt;\n        &lt;td&gt;@Html.TextBoxFor(x =&gt; Model[i].ProductCode)&lt;/td&gt;\n    &lt;/tr&gt;\n}\n</code></pre>\n\n<p>I then iterate over all of the rows with jQuery, serialize them, append an extra query string parameter to the data ('userId'), then POST to a controller. So I end up sending JSON that looks like this to my controller:</p>\n\n<pre><code>[0].ProductCode=1&amp;[1].ProductCode=2&amp;[2].ProductCode3&amp;userId=5\n</code></pre>\n\n<p>Then I've got a simple ProductModel I want to bind the list to:</p>\n\n<pre><code>public class ProductModel \n{\n    public string ProductCode {get; set;}\n}\n</code></pre>\n\n<p>If I post to this controller method:</p>\n\n<pre><code>public ActionResult TestCodes(int userId, IEnumerable&lt;ProductModel&gt; products)\n</code></pre>\n\n<p>everything binds correctly and life is good, but if I then encapsulate both of those objects into a single view-model, like so:</p>\n\n<pre><code>public class CombinedModel {\n    public int userId {get;set;}\n\n    public IEnumerable&lt;ProductModel&gt; products {get;set;}\n}\n</code></pre>\n\n<p>and then post to the following controller method:</p>\n\n<pre><code>public ActionResult TestCodes(CombinedModel model)\n</code></pre>\n\n<p>'products' will not be bound, while userId is.</p>\n\n<p>I assumed that it had something to do with the model binder being unable to determine the object to bind all of the '[i].ProductCode' elements to, but if my understanding of Bind prefixes is correct, I can't resolve this with [Bind(Prefix = \"products\")] because that prefixes the top-level model, not a specific child list.</p>\n\n<p>Can anyone explain what's happening here? I can use the first method to get the job done, but I'd like to know what's going on.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":60,"score":0,"question_id":13057389,"title":"passing different objects of same base class to method","body":"<p>Basically, I would like to create a Method, that takes a base-class as a parameter, and can be used \"generic\" for derived classes</p>\n\n<p>ef-code-first classes:</p>\n\n<p>the base class</p>\n\n<pre><code>public abstract class BaseClass\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>derived classes:</p>\n\n<pre><code>public class DerivedA:BaseClass\n{\n    public string AValue {get;set;}\n    ...more specific fields\n}\n\n\npublic class DerivedB:BaseClass\n{\n    public string BValue {get;set;}\n    ..... more specific fields\n}\n</code></pre>\n\n<p>I call a \"generic Method\" with these slightly different objects:</p>\n\n<pre><code>System.Data.Entity.DbSet&lt;DerivedA&gt; _dA....\nSystem.Data.Entity.DbSet&lt;DerivedB&gt; _dB....\n\ngenericMethod(_dA.Where(a =&gt; a.Name.StartsWith(\"a name\")))); //&lt;-contains records\ngenericMethod(_dB.Where(a =&gt; a.Id==5)); //&lt;---- contains records\n</code></pre>\n\n<p>Both \"Where...\" contain records in debug (after clicking on Enumerate)</p>\n\n<p>now the method:</p>\n\n<pre><code>public string genericMethod(&lt;IQueryable&gt;BaseClass _myClass)\n{\n    foreach (BaseClass c in _myClass)  // &lt;-------class is empty - no records\n        {\n          // do something usefull...\n        }\n    return someResult \n}\n</code></pre>\n\n<p>But no records are contained, when inside the method.</p>\n\n<p>Is it possible, what I am trying to do...?\nDoes it make sense?</p>\n\n<p>There are no design-time or compile-time or runtime errors, but the passed object contains no records when passed to the method, but it contained records in the calling statement.</p>\n\n<p>What did I do wrong?</p>\n\n<p>Is there a better approach? - </p>\n\n<p>I need this Method, for manipulation of more than two (maybe ten) derived classes, and therefor I want it \"generic\".</p>\n\n<p>Thank you!</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":6,"favorite_count":5,"up_vote_count":12,"down_vote_count":0,"view_count":1859,"score":12,"question_id":1523179,"title":"switch between jquery-1.3.2.js and jquery-1.3.2.min.js","body":"<p>When I develop application, I want to use jquery-1.3.2.js, and when I deploy it, I want to use jquery-1.3.2.min.js? </p>\n\n<p>What is the best way to switch between two without manually commenting and uncommenting one.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-optimization","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13051301,"title":"Produce a \"type\" attribute in the \"script\" tag when using Scripts.Render in ASP.NET MVC 4","body":"<p>Is it possible to configure Scripts.Render in ASP.NET MVC 4 to produce a \"type\" attribute in the \"script\" tag?</p>\n\n<p>If so, how?</p>\n\n<p>Thanks in advance,</p>\n\n<p>Ryan</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-web-api","async-await"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":13054626,"title":"Async/Await & AsyncController?","body":"<p>Do you have to inherit from AsyncController when you're using Async/Await in your controller or will it not truly be asynchronous if you use Controller? How about Asp.net web api? I don't think there is a AsyncApiController.  Currently i'm just inheriting from controller and its working but is it truly async?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13056997,"title":"casting return type with different entity","body":"<p>Here is my method and i would like to cast my return - also i am doing this to prevent from changing my different methods i have and wanted to also know will this have any negative affect if a cast my return?</p>\n\n<pre><code>public VisitEntry Get(Guid visitEntryId)\n    {\n        var visitEntry = _visitEntryRepository.Get(visitEntryId);\n        VisitEntryDTO dto = AutoMapper.Mapper.Map&lt;VisitEntry, VisitEntryDTO&gt;(visitEntry);\n        dto.CasePartyIds =\n            _casePartyService.GetAllForHearingEntry(visitEntryId).Select(caseParty =&gt; caseParty.CasePartyId).ToList();\n        return dto;\n    }\n</code></pre>\n\n<p>The error i get is for: return dto. Stating: that I cannot converty ...Entity.VisitEntryDTO to ...Entity.VisitEntry. </p>\n\n<p>any clarification will be great. Thanks!</p>\n"},{"tags":["asp.net-mvc","linq","lambda"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2407,"score":4,"question_id":1674041,"title":"Access nested properties with dynamic lambda using Linq.Expression","body":"<p>Let's assume that I have two classes:</p>\n\n<pre><code>class person\n{\n    int ID\n    string name\n    Address address\n}\nclass address\n{\n    int ID\n    string street\n    string country\n}\n</code></pre>\n\n<p>These classes are more or less given, they are mapped via nHibernate to be honest :)</p>\n\n<p>In a grid (<a href=\"http://www.datatables.net\" rel=\"nofollow\">datatables.net</a> as base) I would like to have a type-independent sorting.</p>\n\n<p>Therefore I created a lambda expression:</p>\n\n<pre><code>  var param = Expression.Parameter(typeof(T), typeof(T).Name);\n  var sortExpression = Expression.Lambda&lt;Func&lt;T, object&gt;&gt;\n                              (Expression.Convert(Expression.Property(param, \"Property to sort\"), typeof(object)), param);\n</code></pre>\n\n<p>If I pass Person as Type T and replace the \"Property to sort\" with \"name\" it works fine (creates a correct lambda). If the Property to sort is \"address.street\" it won't work, throw me the following error:</p>\n\n<pre><code>Property 'address.street' is not defined for type 'person'\n</code></pre>\n\n<p>I see only one solution so far, but not clear enough... I would try to split the string which contains the Property-Name (split by .) </p>\n\n<p>Can anyone give a better solution? I need to add the sortExpression to an IQueryable object <code>query.OrderBy(sortExpression)</code>.</p>\n\n<p>Not sure if my title is clear, please go ahead and correct it.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["xml","asp.net-mvc","json","xml-serialization","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13047562,"title":"Using MVC 4 Web API, how do I change the format of the ArrayOf node when returning an array in XML","body":"<p>I want to control the output of the root node when returning <code>IEnumerable&lt;T&gt;</code>. Currently, I get an <code>&lt;ArrayOf_&gt;</code> node as the root:</p>\n\n<pre><code>&lt;ArrayOfMyClass xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n    &lt;MyClass&gt;\n            &lt;Number&gt;1&lt;/Number&gt;\n    &lt;/MyClass&gt;\n    &lt;MyClass&gt;\n            &lt;Number&gt;2&lt;/Number&gt;\n    &lt;/MyClass&gt;\n&lt;/ArrayOfMyClass&gt;\n</code></pre>\n\n<p>I want to be able to change this to something else (and for that matter, without a namespace):</p>\n\n<pre><code>&lt;NewRoot&gt;\n    &lt;MyClass&gt;\n            &lt;Number&gt;1&lt;/Number&gt;\n    &lt;/MyClass&gt;\n    &lt;MyClass&gt;\n            &lt;Number&gt;2&lt;/Number&gt;\n    &lt;/MyClass&gt;\n&lt;/NewRoot&gt;\n</code></pre>\n\n<p>I don't want to create a group class, because although this would work for XML, I don't want the group class collection property in my JSON output:</p>\n\n<pre><code>{\n    \"ListOfMyClass\": [\n        {\n            \"Number\": 1\n        },\n        {\n            \"Number\": 2\n        }\n    ]\n}\n</code></pre>\n\n<p>Instead I want to keep it as it would be by default:</p>\n\n<pre><code>[\n    {\n        \"Number\": 1\n    },\n    {\n        \"Number\": 2\n    }\n]\n</code></pre>\n\n<p>I realise there are a few similar questions that have appear to have been answered but all them lead me to a dead end. I could also hack the result myself (yuck), but I'm hoping there is a best-practice way to do this with the stuff provided; annotations, formatters etc.</p>\n\n<p>Has anyone had any success with this whilst leaving the JSON output as the default?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10811,"score":0,"question_id":3086894,"title":"What is causing this error? Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerWrapper'","body":"<p>I can't figure out why I might be getting this error. It happens on an ajax call. </p>\n\n<p>Any help is appreciated. Thanks!</p>\n\n<p>This is the full error text: </p>\n\n<blockquote>\n  <p> -- 6/21/2010 6:09:10 PM -- System.Web.HttpException (0x80004005): Error executing child request for handler 'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerWrapper'. ---> System.Web.HttpUnhandledException (0x80004005): Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.Web.HttpException (0x80004005): OutputStream is not available when a custom TextWriter is used.\n     at System.Web.HttpResponse.get_OutputStream()\n     at AjaxControlToolkit.ToolkitScriptManager.OutputCombinedScriptFile(HttpContext context) in C:\\AjaxBuild\\Ajax\\Server\\AjaxControlToolkit\\ToolkitScriptManager\\ToolkitScriptManager.cs:line 286\n     at AjaxControlToolkit.ToolkitScriptManager.OnInit(EventArgs e) in C:\\AjaxBuild\\Ajax\\Server\\AjaxControlToolkit\\ToolkitScriptManager\\ToolkitScriptManager.cs:line 246\n     at System.Web.UI.Control.InitRecursive(Control namingContainer)\n     at System.Web.UI.Control.InitRecursive(Control namingContainer)\n     at System.Web.UI.Control.InitRecursive(Control namingContainer)\n     at System.Web.UI.Control.InitRecursive(Control namingContainer)\n     at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)\n     at System.Web.UI.Page.HandleError(Exception e)\n     at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)\n     at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)\n     at System.Web.UI.Page.ProcessRequest()\n     at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)\n     at System.Web.UI.Page.ProcessRequest(HttpContext context)\n     at System.Web.Mvc.ViewPage.ProcessRequest(HttpContext context)\n     at ASP.views_listen_twittertimeline_aspx.ProcessRequest(HttpContext context) in c:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET Files\\root\\8f8e9134\\ff8a3ded\\App_Web_4vjkjyte.13.cs:line 0\n     at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.&lt;>c_<em>DisplayClass1.b</em>_0()\n     at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.&lt;>c_<em>DisplayClass4.b</em>_3()\n     at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap[TResult](Func<code>1 func)\n     at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.Wrap(Action action)\n     at System.Web.Mvc.HttpHandlerUtil.ServerExecuteHttpHandlerWrapper.ProcessRequest(HttpContext context)\n     at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)\n     at System.Web.HttpServerUtility.ExecuteInternal(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage, VirtualPath path, VirtualPath filePath, String physPath, Exception error, String queryStringOverride)\n     at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm, Boolean setPreviousPage)\n     at System.Web.HttpServerUtility.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm)\n     at System.Web.HttpServerUtilityWrapper.Execute(IHttpHandler handler, TextWriter writer, Boolean preserveForm)\n     at System.Web.Mvc.ViewPage.RenderView(ViewContext viewContext)\n     at System.Web.Mvc.WebFormView.RenderViewPage(ViewContext context, ViewPage page)\n     at System.Web.Mvc.WebFormView.Render(ViewContext viewContext, TextWriter writer)\n     at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n     at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)\n     at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass14.&lt;InvokeActionResultWithFilters&gt;b__11()\n     at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func</code>1 continuation)\n     at System.Web.Mvc.ControllerActionInvoker.&lt;>c_<em>DisplayClass14.&lt;>c</em>_DisplayClass16.b_<em>13()\n     at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList<code>1 filters, ActionResult actionResult)\n     at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)\n     at System.Web.Mvc.Controller.ExecuteCore()\n     at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n     at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)\n     at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass8.&lt;BeginProcessRequest&gt;b__4()\n     at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0()\n     at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass8</code>1.b</em>_7(IAsyncResult _)\n     at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()\n     at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)\n     at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)\n     at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n     at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13055121,"title":"How can I include a collection's foreign key property in the controller query?","body":"<p>This may be a case of \"going too deep\", but I thought I would ask anyway.  I've got the following models:</p>\n\n<pre><code>public class Exam\n{\n    public int ID {get; set;}\n    //...other Exam properties\n    public virtual ICollection&lt;ExamResults&gt; Results {get; set;}\n}\n\npublic class ExamResults\n{\n    public int ExamId {get; set;}\n    //...other Exam Result properties\n    public int ExamDomainId {get; set;}\n    public virtual ExamDomain ExamDomain {get; set;}\n}\n\npublic class ExamDomain\n{\n    public int ID {get; set;}\n    public String DomainName {get; set;}\n    //...more stuff\n}\n</code></pre>\n\n<p>So in plain English, an Exam has a collection of ExamResults.  Each ExamResult has an ExamDomain, and each ExamDomain has a name.  </p>\n\n<p>The problem is this: My view creates a new database query every time I use</p>\n\n<pre><code>@Html.DisplayFor(e =&gt; e.exampleResult.ExamDomain.DomainName)\n</code></pre>\n\n<p>I cannot include ExamDomain in the initial controller query, as Exam does not have a navigation property with Exam.  Example:</p>\n\n<pre><code>//The below does not work because ExamResults is a collection, not a record\nvar exam = db.Exams.Include(e =&gt; e.ExamResults.ExamDomain)...\n\n//The code below also does not work, but it does run\nvar exam = db.Exams.Include(e =\n</code></pre>\n\n<p>With that said, how can I grab all the necessary DomainNames from the ExamDomain table without running an additional query for every ExamResult?</p>\n\n<p>PS: I do have a view model, but it shouldn't matter for the purpose of this question.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","design-patterns"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":50,"score":3,"question_id":13053544,"title":"Structure for switchable Data Access Layer","body":"<p>I need to write a Data Access Layer using Entity Framework. One of the requirements is to allow a configuration file to control where the data comes from. With one config setting it should come from a database; with another, from a web service.</p>\n\n<p>Now, my initial thought is to have 3 DataAccess classes:</p>\n\n<ul>\n<li>WidgetDataAccess</li>\n<li>WidgetDatabaseDataAccess</li>\n<li>WidgetWebServiceDataAccess</li>\n</ul>\n\n<p>They would all implement the same interface. WidgetDataAccess would read the config and delegate to the correct child class. That seems sensible, right?</p>\n\n<p>Is there any pattern that I should follow, or anyone with a better way to structure this?</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13053883,"title":"MVC Entity Framework Partial Class access DB for property value","body":"<p>I am using Entity Framework mapped to my database. I have a Basket model which can have many BasketItem models, and I have Promotions and Coupons models.\nThis is for eCommerce checkout functionality and I just don't understand how this will work, here goes:</p>\n\n<p>Because my BasketItems have a foreign key relationship to the Basket if I want to sum up the Subtotal for my basket items in a partial class, I can do this:</p>\n\n<pre><code>        public decimal Subtotal {\n        get {\n            return this.BasketItems.Sum(pb =&gt; pb.Subtotal);\n            }\n        }\n</code></pre>\n\n<p>This is helpful because I can use this inside a view, there's no mucking around with passing a DB context through and it's DRY, etc. etc.</p>\n\n<p>Now I want to apply promotions or coupons to my Subtotal ideally I want it to look like this:</p>\n\n<pre><code>        public decimal DiscountedSubtotal {\n        get { \n            decimal promotions_discount = 0;\n            decimal coupons_discount = 0;\n            return Subtotal - promotions_discount - coupons_discount;\n            }\n        }\n</code></pre>\n\n<p>But there is no access to Promotions or Coupons without either creating some crazy and unnecessary relationships in my database or some light hacking to get this functionality to work. I don't know what I should do to overcome this problem.</p>\n\n<p><strong>Solution 1:</strong></p>\n\n<pre><code>        public decimal DiscountedSubtotal(DatabaseEntities db) {\n        decimal promotions_discount = from p in db.Promotions\n                                  select p.Amount;\n        decimal coupons_discount = from c in db.Coupons\n                               select c.Amount;\n        return Subtotal - promotions_discount - coupons_discount;\n        }\n</code></pre>\n\n<p>I don't want to use this in my View pages, plus I have to send through my context every time I want to use it.</p>\n\n<p><strong>Solution 2: (untested)</strong></p>\n\n<pre><code>    public List&lt;Promotion&gt; Promotions { get; set; }\n    public List&lt;Coupon&gt; Coupons { get; set; }\n\n    public Basket()\n        : base() {\n            DatabaseEntities db = new DatabaseEntities();\n            Promotions = db.Promotions.ToList();\n            Coupons = db.Coupons.ToList();\n    }\n</code></pre>\n\n<p>A bit of light hacking could provide me with references to promotions and coupons but i've had problems with creating new contexts before and I don't know if there is a better way to get me to the DiscountedSubtotal property I would ideally like.</p>\n\n<p>So to sum up my question, I would like to know the best way to get a DiscountedSubtotal property.</p>\n\n<p>Many thanks and apologies for such a long read :)</p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":473,"score":3,"question_id":12011496,"title":"MVC 4 installation failure","body":"<p>I am attempting to install MVC 4 to my desktop.  I am the only person in the office whop is having this problem even though we all have the same machines with the same software.  I'm not sure what the problem is.  The installation prints a log file but I don't know what any of it means.  If anyone has an answer I would appreciate it.  Here is the log file:</p>\n\n<pre><code>DownloadManager Information: 0 : Loading product xml from: https://go.microsoft.com/?linkid=9810537\nDownloadManager Information: 0 : https://go.microsoft.com/?linkid=9810537 responded with 302\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 302 Found\nCache-Control: private\nContent-Length: 175\nContent-Type: text/html; charset=utf-8\nExpires: Fri, 17 Aug 2012 17:13:22 GMT\nLocation: https://www.microsoft.com/web/webpi/4.0/webproductlist.xml\nServer: Microsoft-IIS/7.5\nX-AspNet-Version: 2.0.50727\nSet-Cookie: MC1=GUID=c6f89ed006465f41bf8ce6e310c073fb&amp;HASH=d09e&amp;LV=20128&amp;V=3;    domain=microsoft.com; expires=Sun, 03-Oct-2010 07:00:00 GMT; path=/\nX-Powered-By: ASP.NET\nDate: Fri, 17 Aug 2012 17:14:22 GMT\n\n\nDownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/webproductlist.xml responded with 304\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 304 Not Modified\nCache-Control: max-age=900\nAccept-Ranges: bytes\nETag: \"d77eb3a9227bcd1:0\"\nServer: Microsoft-IIS/7.5\nP3P: CP=\"ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI\"\nX-Powered-By: ASP.NET\nX-Powered-By: ARR/2.5\nX-Powered-By: ASP.NET\nDate: Fri, 17 Aug 2012 17:14:21 GMT\n\n\nDownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\-477760839.xml.temp\nDownloadManager Warning: 0 : Could not resolve keyword ID Sharepoint\nDownloadManager Warning: 0 : Could not resolve keyword ID Office\nDownloadManager Warning: 0 : Could not resolve keyword ID Sharepoint\nDownloadManager Warning: 0 : Could not resolve keyword ID Office\nDownloadManager Warning: 0 : Could not resolve keyword ID SQL\nDownloadManager Warning: 0 : Could not resolve keyword ID SQL\nDownloadManager Warning: 0 : Could not resolve keyword ID WIF\nDownloadManager Warning: 0 : Could not resolve keyword ID identity\nDownloadManager Warning: 0 : Could not resolve keyword ID federation\nDownloadManager Warning: 0 : Could not resolve keyword ID claims\nDownloadManager Warning: 0 : Could not resolve keyword ID authentication\nDownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64\nDownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/webapplicationlist.xml\nDownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/webapplicationlist.xml responded with 304\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 304 Not Modified\nCache-Control: max-age=900\nAccept-Ranges: bytes\nETag: \"43da3ca8137bcd1:0\"\nServer: Microsoft-IIS/7.5\nP3P: CP=\"ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI\"\nX-Powered-By: ASP.NET\nX-Powered-By: ARR/2.5\nX-Powered-By: ASP.NET\nDate: Fri, 17 Aug 2012 17:14:22 GMT\n\n\nDownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\251486345.xml.temp\nDownloadManager Warning: 0 : Could not resolve keyword ID Katalready\nDownloadManager Warning: 0 : Could not resolve keyword ID Katalready\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID Katalready\nDownloadManager Warning: 0 : Could not resolve keyword ID ApplicationSpotlight\nDownloadManager Warning: 0 : Could not resolve keyword ID Katalready\nDownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64\nDownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/mediaproductlist.xml\nDownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/mediaproductlist.xml responded with 304\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 304 Not Modified\nDate: Fri, 17 Aug 2012 17:14:22 GMT\nEtag: \"1b51c01e6f4ecd1:0\"\nCache-Control: max-age=900\n\n\nDownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\598799360.xml.temp\nDownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64\nDownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/toolsproductlist.xml\nDownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/toolsproductlist.xml responded with 304\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 304 Not Modified\nDate: Fri, 17 Aug 2012 17:14:22 GMT\nEtag: \"4e6536ff8276cd1:0\"\nCache-Control: max-age=900\n\n\nDownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\672503665.xml.temp\nDownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64\nDownloadManager Information: 0 : Loading product xml from: https://www.microsoft.com/web/webpi/4.0/enterpriseproductlist.xml\nDownloadManager Information: 0 : https://www.microsoft.com/web/webpi/4.0/enterpriseproductlist.xml responded with 304\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 304 Not Modified\nDate: Fri, 17 Aug 2012 17:14:22 GMT\nEtag: \"a68a64382f88cc1:0\"\nCache-Control: max-age=900\n\n\nDownloadManager Information: 0 : Remote file has not changed, using local cached file: C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\1505006577.xml.temp\nDownloadManager Information: 0 : Filtering by majorOS: 6, minorOS: 1, majorSP: 1, minorSP: 0, productType: 6, architecture: x64\nDownloadManager Information: 0 : Getting ratings file from http://go.microsoft.com/?linkid=9752395\nDownloadManager Information: 0 : http://go.microsoft.com/?linkid=9752395 responded with 302\nDownloadManager Information: 0 : Response headers:\nHTTP/1.1 302 Found\nCache-Control: private\nContent-Length: 203\nContent-Type: text/html; charset=utf-8\nExpires: Fri, 17 Aug 2012 17:13:24 GMT\nLocation: http://www.microsoft.com/web/handlers /WebPI.ashx?command=getatomfeedwithavgratingquery\nServer: Microsoft-IIS/7.5\nX-AspNet-Version: 2.0.50727\nSet-Cookie: MC1=GUID=5dcd22f7d0af19428d827c6bc0604293&amp;HASH=f722&amp;LV=20128&amp;V=3; domain=microsoft.com; expires=Sun, 03-Oct-2010 07:00:00 GMT; path=/\nX-Powered-By: ASP.NET\nDate: Fri, 17 Aug 2012 17:14:24 GMT\n\n\nDownloadManager Information: 0 : Contextual entry products: MVC4VS2010\nDownloadManager Information: 0 : Adding product ASP.NET MVC 4 (VS 2010) (MVC4VS2010) to cart\nDownloadManager Information: 0 : Contextual navigation to product 'MVC4VS2010'\nDownloadManager Information: 0 : Ratings file loaded successfully\nDownloadManager Information: 0 : Adding product 'MVC4VS2010'\nDownloadManager Information: 0 : Adding dependency product 'MVC4VS2010_Only\nDownloadManager Information: 0 : Setting current install to 1\nDownloadManager Information: 0 : Starting install sequence\nDownloadManager Information: 0 : Downloading file 'http://download.microsoft.com/download/2/F/6/2F63CCD8-9288-4CC8-B58C-81D109F8F5A3/AspNetMVC4Setup.exe' to: C:\\Users\\ppprog6202\\AppData\\Local\\Temp\\tmp6948.tmp\nDownloadManager Information: 0 : Content-disposition header: attachment\nDownloadManager Information: 0 : File 'C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\installers\\MVC4VS2010_Only\\F46B534A9D488ABEC38EFB67571F52B4A6FC43E3\\AspNetMVC4Setup.exe' already exists, deleting old copy of the file\nDownloadManager Information: 0 : Moving downloaded file 'C:\\Users\\ppprog6202\\AppData\\Local\\Temp\\tmp6948.tmp' to: C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\installers\\MVC4VS2010_Only\\F46B534A9D488ABEC38EFB67571F52B4A6FC43E3\\AspNetMVC4Setup.exe\nDownloadManager Information: 0 : Starting EXE command for product 'ASP.NET MVC 4 Installer (VS 2010)- Default Locale'. Commandline is: 'C:\\Users\\ppprog6202\\AppData\\Local\\Microsoft\\Web Platform Installer\\installers\\MVC4VS2010_Only\\F46B534A9D488ABEC38EFB67571F52B4A6FC43E3\\AspNetMVC4Setup.exe /q /log C:\\Users\\PPPROG~1\\AppData\\Local\\Temp\\MVC4VS2010_Only_install.htm'. Process Id: 3676\nDownloadManager Information: 0 : Install exit code for product 'ASP.NET MVC 4  Installer (VS 2010)- Default Locale' is -2147023254\nDownloadManager Error: 0 : Install return code for product 'ASP.NET MVC 4 Installer (VS 2010)- Default Locale' is Failure\nDownloadManager Warning: 0 : Dependency failed for product 'ASP.NET MVC 4 (VS 2010)'. Skipping install\nDownloadManager Information: 0 : Product ASP.NET MVC 4 Installer (VS 2010)- Default Locale done install completed\nDownloadManager Information: 0 : Increasing current install to 2\nDownloadManager Information: 0 : Product ASP.NET MVC 4 (VS 2010) had a dependency fail. Increasing install product to 3\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":4476,"score":1,"question_id":1820559,"title":"Access Model object in jQuery","body":"<p>I have a Model, <code>Customers</code>, in which I have a list property, <code>PayHistory</code>. I need to bind the table with the <code>PayHistory</code> object using jQuery in my ASP.NET MVC (C#) application.</p>\n\n<p>I am binding the table using jQuery as:</p>\n\n<pre><code>&lt;table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;div id=\"PaidDate\"&gt;\n            &lt;/div&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;div id=\"PaidAmt\"&gt;\n            &lt;/div&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $(document).ready(function() {\n      //Initialize the dynamic Value;\n      _dynId = 1;\n      var data= '&lt;%= Model.PayHistory %&gt;';\n       if (data != null) {\n            for (i in data) {\n                var pay= data[i];\n                $('#PaidDate').append('&lt;div id=\"PaidDate' + _dynId  + '\" style=\"height:20px;padding-left:10px;\"&gt;' + '&lt;label&gt;' + pay.paidDate+ '&lt;/label&gt;');\n                $('#PaidAmt').append('&lt;div id=\"PaidAmt' + _dynId  + '\" style=\"height:20px;padding-left:10px;\"&gt;' + '&lt;label&gt;' + pay.PaidAmount + '&lt;/label&gt;');\n                _dynId   += 1;\n            }\n        }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>In the above HTML, I am trying to access the list object <code>PayHistory</code> in jQuery, but it gives the type of the object.</p>\n\n<p>How can I access the object in jQuery to bind the table as in the HTML given above?</p>\n"},{"tags":["c#","asp.net-mvc","linq"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":13045999,"title":"most efficient way to query a collection - c#","body":"<p>I'm searching through a generic list (or IQueryable) which contains 3 columns.  I'm trying to find the value of the 3 column, based on 1 and 2, but the search is really slow.  For a single search, the speed isn't noticeable, but I'm performing this search on a loop, and for 700 iterations, it takes a combined time of over 2 minutes, which isn't any use.  Columns 1 and 2 are <code>int</code> and column 3 is a <code>double</code>.  Here is the linq I'm using:</p>\n\n<pre><code>public static Distance FindByStartAndEnd(int start, int end, IQueryable&lt;Distance&gt; distanceList)\n{\n    Distance item = distanceList.Where(h =&gt; h.Start == start &amp;&amp; h.End == end).FirstOrDefault();\n    return item ;\n}\n</code></pre>\n\n<p>There could be up do 60,000 entries in the IQueryable list.  I know that is quite a lot, but I didn't think it would pose any problem for searching.</p>\n\n<p>So my question is, is there a better way to search through a collection when needing to match 2 columns to get value of a third? I guess I need all 700 searches to be almost instant, but it takes about 300ms for each which soon mounts up.</p>\n\n<p><strong>UPDATE - Final Solution #######################</strong></p>\n\n<p>I've now created a dictionary using <code>Tuple</code> with <code>start</code> and <code>end</code> as the key.  I think this could be the right solution.</p>\n\n<pre><code>var dictionary = new Dictionary&lt;Tuple&lt;int, int&gt;, double&gt;();\n\nvar key = new Tuple&lt;int, int&gt;(Convert.ToInt32(reader[0]), Convert.ToInt32(reader[1]));\nvar value = Convert.ToDouble(reader[2]);\n\nif (value &lt;= distance)\n{\n    dictionary.Add(key, value);\n}\nvar key = new Tuple&lt;int, int&gt;(5, 20);\n</code></pre>\n\n<p>Works fine - much faster</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13038535,"title":"Method to encapsulate reusable view sections (i.e. tiles, portlets) with arbitrary content?","body":"<p>I'm still getting my feet wet with MVC and working on a site that uses a lot of \"tiles\" (you know, the usual \"rectangular section with standardized header and some content\" pattern) for the visual display. There's nothing fancy, just a way to put content into boxes for ease of layout and navigation. Currently the \"tiles\" (my term) are built like this:</p>\n\n<pre><code>&lt;div class=\"tile\"&gt;\n    &lt;div class=\"tile-header\"&gt;\n        &lt;h2&gt;Title&lt;/h2&gt;\n    &lt;/div&gt;\n    &lt;div class=\"tile-body\"&gt;\n        (arbitrary content)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><em>Note: \"arbitrary content\" means any content, either static or dynamic, so not necessarily something I can plug into a variable and pass into a helper, I need a bit more flexibility.</em></p>\n\n<p>My question is, what is the optimal method to use to encapsulate this pattern and make it easier/more expressive to call from code? I know about partial views, but how would I pass arbitrary body content to a partial view? (This may simply be my limited knowledge of MVC showing) </p>\n\n<p>I tried building Razor helpers like this:</p>\n\n<pre><code>@Tile.Begin(\"Title\")\n    (arbitrary content)\n@Tile.End()\n</code></pre>\n\n<p>But Razor chokes because I can't include the \"tile-body\" closing div. (If I do then I have to pass the body content as a string variable, and that isn't always feasible)</p>\n\n<p>I could see something like this:</p>\n\n<pre><code>@using (Tile.Begin(\"Title\")) {\n    (arbitrary content)\n}\n</code></pre>\n\n<p>This seems the most elegant to me, though not as easy to scan as the @Tile.Begin() and @Tile.End() calls. From what I understand I would have to create a class and implement IDisposable, but when I tried returning a string of raw HTML tags from a helper class it simply wrote the encoded tag syntax to the screen, so I assume I'd run into the same issue here?</p>\n\n<p>Thanks for any advice. :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","layout","viewbag"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13052674,"title":"Rendering Global Title","body":"<p>I am trying to pull from the database a saved Title.  I want it to load every time without using the view to call it.   So I want a variable to be pulled when I call it from the Layout.  How can I do this?</p>\n\n<p>In Layout Example:</p>\n\n<pre><code>@ViewBag.ShowTitle   \n</code></pre>\n\n<p>This would show to every single page that renders the layout.  I'm not sure how I would call the field from the database to the screen without a controller.</p>\n"},{"tags":["asp.net-mvc","mvc","view","model","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13052936,"title":"Mvc Html.Label or Html.TextBox doesn't create","body":"<p>I'm making a test page for a project I'm working on and I've made desired progress so far but I'm trying to create TextBoxes from a model of List being passed to the view, however, the it seems to just ignore anything I have tried.</p>\n\n<pre><code>&lt;form id=\"form1\" runat=\"server\"&gt;\n    &lt;input id=\"btnsubmit\" type=\"submit\" name=\"Submit\" onclick=\"Submit\" /&gt;\n    &lt;div id=\"divControls\"&gt;\n     &lt;% foreach (TextBox control in (this.Model as List&lt;TextBox&gt;))\n        {\n            Html.Label(\"lblLabel\", control.Text);\n            Html.TextBox(control.ID, control.Text, new { id = control.ID, style = \"width:50\", name = \"txt\" + control.ID });\n        } %&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The List isn't null in the Controller on return. I don't have a clue at what the problem could be. If I throw a <p>Something</p> in the for loop it executes the appropriate number of times so why isn't it creating the labels or textboxes?\nAt first I thought it was that I'm adding them inside a form but I removed the form tags and it still didn't work so I really have no Idea, any help would be much appreciated. I'm relatively new to MVC.</p>\n\n<pre><code>[HttpPost]\n        public ActionResult Index(FormCollection form)\n        {\n            List&lt;TextBox&gt; controls = new List&lt;TextBox&gt;();\n            foreach (String Key in form.Keys)\n            {\n                if (Key.Contains(\"txt\"))\n                {\n                    TextBox textBox = new TextBox();\n                    textBox.ID = Key;\n                    textBox.Text = form.GetValues(Key)[0];\n                    controls.Add(textBox);\n                }\n            }\n            return View(\"Index\", controls);\n        }\n</code></pre>\n\n<p>Here's my Action encase it's helps.\nAlso encase I wasn't clear enough, I am adding controls to a form at runtime using JQuery and then that Action will be part of the submit so it must send the textboxes back to the view so they are not deleted.\nLike I said I'm new to the whole MVC and Asynchronous thing so If there's a better way to do this, advice would be much appreciated.</p>\n"}]}
{"total":44785,"page":14,"pagesize":100,"questions":[{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13052889,"title":"@ statement in razor templates shows HTML symbols instead of quotes","body":"<p>I've noted that <code>@</code> statement in Razor templates converts quotes in strings into HTML symbols.</p>\n\n<p>How can I show correct HTML attribute then? Sample code:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;body@(ViewBag.Highlight == true ? \" onload=\\\"prettyPrint()\\\"\" : \"\")&gt;\n</code></pre>\n\n<p>result:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code> &lt;body onload=&amp;quot;prettyPrint()&amp;quot;&gt;\n</code></pre>\n\n<p>That's completely incorrect. How can i achieve normal:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code> &lt;body onload=\"prettyPrint()\"&gt;\n</code></pre>\n\n<p>in my case?</p>\n\n<p>I've tried <code>HtmlString</code> object from <a href=\"http://stackoverflow.com/questions/9665874/whats-the-correct-way-to-output-html-attributes-text-with-quotes-in-razor-m\">this answer</a>. But it's impossible to convert <code>HtmlString</code>  to <code>string</code> even with explicit type cast.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12977212,"title":"MVC4 hyphen in URL","body":"<p>So i'm trying to employ the use of hyphens in my URLs for readability but so far haven't found a way to make it work with mvc4.  </p>\n\n<p>I'll start with the code in the controller:</p>\n\n<pre><code>public ViewResult Index()\n    {\n        ViewBag.URL = Functions.fetchURL();\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Index(LogonModel model, string returnUrl)\n    {\n         //omitted to save space\n\n        return View(model);\n    }\n\n\n    public ActionResult Forgot_Login_Info()\n    {\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Forgot_Login_Info(RetrievePasswordViewModel model)\n    {\n         //omitted to save space\n        return View();\n\n    }\n</code></pre>\n\n<p>So I'm using underscores for the name of the actions as seen with \"Forgot_Login_Info\" and that is the name of the view as well. For testing I also manually created a view called \"Forgot-Login-Info\"</p>\n\n<p>In my global.asax.cs file i simply have this line for routes</p>\n\n<pre><code>RouteConfig.RegisterRoutes(RouteTable.Routes);\n</code></pre>\n\n<p>which is the standard routing line with new projects for MVC4 and this is hooked to the \"RouteConfig.cs\" file and in that file here is the code I have, which I found in another question on this site.</p>\n\n<pre><code>public class RouteConfig\n{\n    public class HyphenatedRouteHandler : MvcRouteHandler\n    {\n        protected override IHttpHandler GetHttpHandler(RequestContext requestContext)\n        {\n            requestContext.RouteData.Values[\"controller\"] = requestContext.RouteData.Values[\"controller\"].ToString().Replace(\"-\",\"_\");\n            requestContext.RouteData.Values[\"action\"] = requestContext.RouteData.Values[\"action\"].ToString().Replace(\"-\", \"_\");\n            return base.GetHttpHandler(requestContext);\n        }\n    }\n\n\n\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            name: \"Default\",\n            url: \"{controller}/{action}/{id}\",\n            defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n        );\n\n\n\n        routes.Add(\n        new Route(\"{controller}/{action}/{id}\",\n        new RouteValueDictionary(\n            new { controller = \"Default\", action = \"Index\", id = UrlParameter.Optional }),\n            new HyphenatedRouteHandler())\n        );\n    }\n}\n</code></pre>\n\n<p>Lastly here is the  code for the \"Index\" view, which is where I have a link to the \"Forgot_Login_Info\".</p>\n\n<pre><code> &lt;div class=\"centerBlockItem\" style=\"width:450px; text-align:center\"&gt;\n@Html.ActionLink(\"Forgot Password?\", \"Forgot-Login-Info\")\n    @Html.ActionLink(\"Forgot Password?\", \"Forgot_Login_Info\")\n&lt;/div&gt;\n</code></pre>\n\n<p>Now I have the link 2 ways, 1 using underscore and the other using hyphen. According to what i've read in regards to the code I found for this purpose, Both links should open the \"Forgot_Login_Info\" view and not the \"Forgot-Login-Info\" view. But what I'm getting instead is the 2nd link works fine and the action name matches the view files name. But when I click on the first link, I get a 404 error because the system can't find the \"Forgot-Login-Info\" view file, even though I had manually created a file with that name for testing. </p>\n\n<p>One more thing to note, the code in my routeconfig file, In the answer I had found it suggested I comment out the default route code lines and just leave:</p>\n\n<pre><code>routes.Add(\n        new Route(\"{controller}/{action}/{id}\",\n        new RouteValueDictionary(\n            new { controller = \"Default\", action = \"Index\", id = UrlParameter.Optional }),\n            new HyphenatedRouteHandler())\n        );\n</code></pre>\n\n<p>I had done this too and got the same results. Any ideas where I'm screwing things up?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13052836,"title":"Set html attributes with data annotation","body":"<p>How can I set attributes when my model property is rendered with any Html helper?\nExample:\nI have my custom data annotation:</p>\n\n<pre><code>[MyCustomAttribute(AnyHtmlProperty = \"100\")]\npublic string Name{get;set;}\n</code></pre>\n\n<p>So, when this property is rendered, I want something like this:</p>\n\n<pre><code>&lt;input type=\"text\" anyHtmlProperty=\"100\" /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":12874,"score":6,"question_id":1153912,"title":"How to creat a readonly text using html helper in asp.net mvc?","body":"<p>I want to disable a textbox in the view. So I use following code:</p>\n\n<pre><code>&lt;%= Html.TextBox(\"ID\", Model.ID, new { readonly=\"true\" })%&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>&lt;%= Html.TextBox(\"ID\", Model.ID, new { enable=\"false\" })%&gt;\n</code></pre>\n\n<p>Both of them don't work.  what's the solution?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor","encoding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":13050430,"title":"Adding CSS class to web grid column item conditionally","body":"<p>Is it possible to conditionally set a CSS class or encode a string to html for a certain web grid column? I was able to append span tags to the item using format: in the column, but now I need to add a class to the span tags based on a helper function in razor view or a bool expression from the controller/model. <strong>I do not want to do this with JS, C# should suffice</strong>.</p>\n\n<p>Here is what I tried in view model:</p>\n\n<pre><code> @grid.GetHtml(\n headerStyle:\"reviewGridHeader\",\n    columns: grid.Columns(\n    ...[other columns]...\n    grid.Column(columnName: \"FeedBack\", format: @&lt;span&gt;@CheckFeedBack(item.FeedBack)&lt;/span&gt;)\n))\n</code></pre>\n\n<p>Helper function in view model (splits and compares string):</p>\n\n<pre><code>    static string CheckFeedBack(string item) {\n        String[] feedbacks = System.Text.RegularExpressions.Regex.Split(item, \"of\");\n\n        //if feedback complete\n        if((Convert.ToInt32(feedbacks[0]) == (Convert.ToInt32(feedbacks[1]))))\n        {\n            string newFeedback = @\"&lt;span class=\"\"feedBackComplete\"\"&gt;\"+ item +\"&lt;/span&gt;\";\n            string encodedFeedback = System.Web.HttpUtility.HtmlEncode(newFeedback);\n\n            return encodedFeedback;\n        }\n        return item;\n    }\n</code></pre>\n\n<p>And here is the presentation, which conditionally works when feedback complete:</p>\n\n<p><img src=\"http://i.stack.imgur.com/JV8dw.png\" alt=\"feedback column\"></p>\n\n<p><strong>Update:</strong> After guidance from Zach with returning a MvcHtmlString, I had some problems being able to use this helper method above in a WebGrid Column. Below shows the correct syntax:</p>\n\n<pre><code>grid.Column(columnName: \"FeedBack\", format: (item) =&gt; CheckFeedBack(item.FeedBack), style: \"webGridAlignment\")\n</code></pre>\n"},{"tags":["asp.net-mvc","dynamic-data"],"answer_count":5,"favorite_count":15,"up_vote_count":13,"down_vote_count":0,"view_count":8266,"score":13,"question_id":926934,"title":"Dynamic (Runtime Generated) Forms in ASP.Net MVC","body":"<p>This is a general design question:  <strong>How would you implement a dynamic (runtime generated) form in ASP.Net MVC?</strong></p>\n\n<p>Here's the situation:</p>\n\n<ol>\n<li>A site admin can define form parameters (fields, type of fields, validation) with a GUI (MVC view). </li>\n<li>As needed, the runtime generates the form for the end user based on the admin configuration.  I'm assuming that all of this logic would reside in the controller - or perhaps extension methods, action filters or something like that.</li>\n<li>End user fills out the form, hits submit, information is captured in database.</li>\n</ol>\n\n<p>The customization does not need to support nested controls, 3rd party controls and so forth, but I suspect a very elegant design would allow for that.  Mostly, I just need the admin to be able to specify additional fields as textboxes, checkboxes, radio buttons and comboboxes.  I will also need the application to allocate a space for this data to be saved in the db, but I believe I have that part figured out.</p>\n\n<p>Thanks for the help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13052583,"title":"Issue updating dropdlownlist within grid","body":"<p>I have a grid that has a column (UnitText) within it that becomes a dropdownlist when inserting an item.  Right now, UnitText has an EditorTemplate called CategoryUnitcshtml.  Here is where things become slightly tricky.</p>\n\n<p>I want to prevent duplicates.  Currently, I load the data source for the dropdownlist within CategoryUnit.  To prevent duplicates, I decided to change the data source pending what is already within the grid.</p>\n\n<p>Ex.  Unit1 = \"NASA\", Unit2 = \"AF\", Unit3 = \"DoD\"\nThe grid currently has only one unit.  It is AF.  I want to prevent the dropdownlist from adding AF to it's selection.</p>\n\n<p>This much I have.  However, I need to update the list each time a Unit is added.  CategoryUnit is only loaded during the page being created and doesn't update.</p>\n\n<p>Thus far, this is what I have.</p>\n\n<p>View</p>\n\n<pre><code>@(Html.Telerik().Grid&lt;CategoryModel.CategoryUnitsModel&gt;()\n                    .Name(\"categoryunits-grid\")\n                    .DataKeys(keys =&gt;\n                    {\n                        keys.Add(x =&gt; x.Id);\n                        keys.Add(x =&gt; x.CategoryId);\n                        keys.Add(x =&gt; x.UnitId);\n                    })\n                    .DataBinding(dataBinding =&gt;\n                    {\n                        dataBinding.Ajax()\n                            .Select(\"CategoryUnitsList\", \"Category\", new { categoryId = Model.Id })\n                            .Insert(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Update(\"CategoryUnitsInsert\", \"Category\", new { categoryId = Model.Id })\n                            .Delete(\"CategoryUnitsDelete\", \"Category\", new { categoryId = Model.Id });\n                    })\n                    .Columns(columns =&gt;\n                    {\n                        columns.Bound(x =&gt; x.UnitId)\n                            .Visible(false);\n                        columns.Bound(x =&gt; x.UnitText);\n                        columns.Command(commands =&gt;\n                        {\n                            commands.Edit();\n                            commands.Delete();\n                        })\n                       .Width(100);\n                    })\n                    .ToolBar(commands =&gt; commands.Insert())\n                    .Pageable(settings =&gt; settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))\n                    .ClientEvents(events =&gt; events.OnRowDataBound\"onRowDataBound\"))\n                    .EnableCustomBinding(true))\n\n                &lt;script type=\"text/javascript\"&gt;\n                    function onRowDataBound(e) {\n                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button\n                    }\n                &lt;/script&gt;\n</code></pre>\n\n<p>EditorTemplates/CategoryUnit</p>\n\n<pre><code>@using Telerik.Web.Mvc.UI;\n@using Nop.Core.Domain.Customers;\n@using Nop.Services.Units;\n\n@{    \nvar _unitsService = EngineContext.Current.Resolve&lt;IUnitsService&gt;();\nvar units = _unitsService.GetAvailableUnits(ViewBag.CategoryId);\n\nvar unitsList = new List&lt;SelectListItem&gt;();\nforeach (var unit in units)\n{\n    var text = unit.UnitName + \" (\" + unit.UnitAcronym + \")\";\n    if (text != null)\n    {\n        //Telerik has an issue when quotes are used. That'why we manually remove all quotes\n        //Find more info here: http://www.nopcommerce.com/boards/t/11413/tabs-can-not-be-selected-in-admin-edit-products.aspx\n        //TODO remove this code once it's fixed by Telerik team\n        text = text.Replace(\"\\\"\", \"\");\n    }\n    var item = new SelectListItem()\n    {\n        Text = text,\n        Value = unit.Id.ToString()\n    };\n\n    unitsList.Add(item);\n}    \n}\n\n@Html.Telerik().DropDownList().Name(\"UnitText\").BindTo(unitsList)\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>public partial class CategoryUnitsModel : BaseNopEntityModel\n    {\n        public int CategoryId { get; set; }\n        public int UnitId { get; set; }\n        [NopResourceDisplayName(\"Admin.Catalog.Categories.Units.Fields.UnitText\")]\n        [UIHint(\"CategoryUnit\")]\n        public string UnitText { get; set; }\n    }\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>[HttpPost, GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryUnits = _unitsService.GetCategoryUnits(categoryId, command.Page - 1 , command.PageSize);\n        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);\n\n        ViewBag.CategoryId = categoryId;\n\n        var model = new GridModel&lt;CategoryModel.CategoryUnitsModel&gt;\n        {\n            Data = categoryUnitsModel,\n            Total = categoryUnitsModel.Count\n        };\n\n        return new JsonResult\n        {\n            Data = model\n        };\n    }\n\n    //public ActionResult CheckCategoryUnit(int categoryId, int unitId)\n    //{\n    //    var categoryUnit = _categoryService.GetCategoryUnitByCategoryIdAndUnitId(categoryId, unitId);\n    //    return Json(categoryUnit != null, JsonRequestBehavior.AllowGet);\n    //}\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var searchForEntry = _unitsService.GetCategoryUnitByCategoryIdAndUnitId(model.CategoryId, Int32.Parse(model.UnitText));\n        if (searchForEntry != null)\n        {\n            TempData[\"PopupMessage\"] = \"Units may not be added twice for a category\";\n            return CategoryUnitsList(command, model.CategoryId);\n        }\n\n        var categoryUnit = new CategoryUnits\n        {\n            UnitId = Int32.Parse(model.UnitText),\n            CategoryId = model.CategoryId\n        };\n\n        _unitsService.InsertCategoryUnit(categoryUnit);\n\n        return CategoryUnitsList(command, model.CategoryId);\n    }\n\n    [GridAction(EnableCustomBinding = true)]\n    public ActionResult CategoryUnitsDelete(GridCommand command, CategoryModel.CategoryUnitsModel model, int id)\n    {\n        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n            return AccessDeniedView();\n\n        var categoryId = model.CategoryId;\n        _unitsService.DeleteCategoryUnit(model.CategoryId, id);\n\n        return CategoryUnitsList(command, categoryId);\n    }\n</code></pre>\n\n<p>Btw, the ViewBag.CategoryId currently is set during the Index of the page.  I didn't show it since the code is rather lengthly.</p>\n\n<p>Any help would be appreciated.  Thanks.</p>\n\n<p>Kindest Regards,\nChad Johnson</p>\n"},{"tags":["asp.net-mvc","security","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":13051489,"title":"Access Denied in IIS 7.5 MVC application","body":"<p>I'm working with an MVC application on a test server that used to work perfectly. It creates accounts on a server that a 2nd application uses for logging in. It uses a credential store and PrincipalContext and UserPrincipal objects to create these accounts. </p>\n\n<p>I haven't used the test version of this app for months or possibly almost a year. Now when I go to create an account with the application, I get the following error:</p>\n\n<blockquote>\n  <p>Access is denied.\n  ASP.NET is not authorized to access the requested resource. Consider\n  granting access rights to the resource to the ASP.NET request\n  identity. ASP.NET has a base process identity (typically\n  {MACHINE}\\ASPNET on IIS 5 or Network Service on IIS 6 and IIS 7, and\n  the configured application pool identity on IIS 7.5) that is used if\n  the application is not impersonating. If the application is\n  impersonating via , the identity will be\n  the anonymous user (typically IUSR_MACHINENAME) or the authenticated\n  request user. </p>\n  \n  <p>To grant ASP.NET access to a file, right-click the file in Explorer,\n  choose \"Properties\" and select the Security tab. Click \"Add\" to add\n  the appropriate user or group. Highlight the ASP.NET account, and\n  check the boxes for the desired access.</p>\n</blockquote>\n\n<p>I looked at anonymous access, but the production version of this app also has a rule to deny anonymous access and it's working fine. This application never used impersonation even when it was working and I've heard that granting explicit access to ASP.NET is not generally recommended. I can make the application work locally through Visual Studio, but the version deployed to test continues to give this error. I would rater not republish the site to test, but perhaps that's the only option left? Is there anything obvious (but not to me) that could have changed in the security settings to cause this? I'm still researching with no luck.</p>\n\n<p>Thank you!</p>\n"},{"tags":["javascript","jquery","html","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13052131,"title":"jquery string concatenation in selector","body":"<p>i want to concat some string(id) with parent id...\nso i'v <strong>tried</strong> this--------------></p>\n\n<pre><code>$(' #cate_id2 &gt; ul &gt; li:has(ul) ').hover(function () {\n                $('#cate_id2 &gt; ul' + this + ' &gt; ul').stop().slideDown('fast');\n            },\n</code></pre>\n\n<p>want to <strong>concat</strong> <code>#cate_id2 &gt; ul</code> with <code>this</code> and than <strong>append</strong> <code>&gt; ul</code> ....</p>\n\n<p>string should becomes after execute <code>'#cate_id2 &gt; ul' + li:has(ul) + ' &gt; ul'</code><br>\n                                        i mean <strong><code>li:has(ul)</code> will replaced by with its value.......</strong> </p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13051411,"title":"Post JSON and Submit Form (or redirect)","body":"<p>I'm struggling with how to properly submit a form where I really only need to send the JSON and not the form controls. I have a SubmitOrder() javascript function:</p>\n\n<pre><code>function SubmitOrder() {\n    var selectedProductsAsJson = JSON.stringify(selectedProducts);\n    // This line works...\n    $.post('/OrderCheckout/Save', { jsonData: selectedProductsAsJson });\n    // ... or this line works...\n    $('#productListForm').submit();\n    // but not both lines together.\n}\n</code></pre>\n\n<p>What I'm trying to do is send selectedProductsAsJson to my controller, process it, then send the user to a new page. The $.post line accomplishes the first two actions, but I don't know how to send the user to a new page after that.</p>\n\n<p>If I just do the .submit() line, the user is redirected to the new page, but the controller doesn't have the json data to process.</p>\n\n<p>If I use both lines, the $.post call is asynchronous and the user will end up on the new form before the $.post call completes. I read <a href=\"http://stackoverflow.com/a/2418402/279516\">here</a> that I can make the $.post call synchronous, but it seems like I should be able to do all of this with one call to the server. What am I missing to make this happen?</p>\n\n<p>My controller currently looks like this;</p>\n\n<pre><code>public class OrderCheckoutController : Controller\n{\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    public void Save(string jsonData)\n    {\n        List&lt;Product&gt; selectedProducts = new JavaScriptSerializer().Deserialize&lt;List&lt;Product&gt;&gt;(jsonData);\n        decimal totalPrice = selectedProducts.Sum(x =&gt; x.Price);\n        ViewBag.SaleTotal = totalPrice;\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","html.dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13051645,"title":"ASP.NET MVC DropDownListFor Not Selecting Prepoulated Values","body":"<p>First of all, I have checked all the related questions but none of them solves my problem.</p>\n\n<p>I am using ASP.NET MVC Html helper Dropdownlistfor with multiple property as follows.</p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.SelectedPeople, \n                       Model.People, \n                       new { multiple = \"multiple\" })\n\n/* Viewmodel for my view */\npublic class MyModel\n{\n    public IEnumerable&lt;SelectListItem&gt; People       { get; set; }\n    public IEnumerable&lt;string&gt; SelectedPeople       { get; set; }\n} \n</code></pre>\n\n<p>If i do not prepopulate the dropdownlist with some selected values. It works fine. Selected values are posted to action method without no problems.</p>\n\n<p>However, if I want to prepopulate the dropdownlist, it is not working. I populate the dropdownlist as follows,</p>\n\n<pre><code>model.People = new[] \n{\n    new SelectListItem { Value = \"1\", Text = \"group 1\" },\n    new SelectListItem { Value = \"2\", Text = \"group 2\" },\n    new SelectListItem { Value = \"3\", Text = \"group 3\" },\n };\n\nmodel.SelectedPeople = new[] { \"2\", \"3\" };\n</code></pre>\n\n<p>By not working, I mean SelectListItems 2 and 3 are not selected in DropDownList.</p>\n"},{"tags":["asp.net-mvc","dependency-injection","ninject","n-tier"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13050711,"title":"Implimenting MVC.Net N-Tier with Ninject Architecture","body":"<p>First of all I appreciate there is no one size fits all in terms of project layout, however as I am moving over to mvc, I want to try and start with solid foundations.</p>\n\n<p>Currently I am really struggling so far with asp.net mvc project structure and n-tier and dependency injection (ninject).  I have been reading Pro Asp.net Mvc 3 Framwork which separates the sport store over two projects, which is a nice start however I would like greater separation.</p>\n\n<p>So far I think I my project should look something like the outline below</p>\n\n<ul>\n<li><p>Web UI (Asp.Net Mvc)</p></li>\n<li><p>Service layer</p>\n\n<ul>\n<li>Service Interfaces (abstract)</li>\n<li>Service (concrete implementation of Service Interfaces)</li>\n</ul></li>\n<li><p>Data Layer</p>\n\n<ul>\n<li>Data Interfaces (abstract)</li>\n<li>Data  (concrete implementation of Service Interfaces)</li>\n</ul></li>\n</ul>\n\n<p>So where do my entities/Model sit?  I believe I should move them out of the Web UI but I am not entirely sure where they fit.  </p>\n\n<p>Would a separate entities for each layer and use something like automapper to map between Data entities and service entities like Microsoft’s project silk originally did (This seems like quite an overhead to achieve the desired separation)?  Or would an entities layer that the other layers would reference. This layer would contain either strongly typed datasets or Plain Old C Objects possibly under the title of infrastructure, which could then be passed between layers and customised within the Web Ui layer via view Models.</p>\n\n<p>Also if am using Ninject then I should its configuration within the Composition Root (Web Ui project in this case).  </p>\n\n<p>This would mean adding a reference to all of the projects which kind of defeats the separation that I am trying to active.</p>\n\n<p>Your help would be appreciated.</p>\n"},{"tags":["c#","javascript","asp.net-mvc","mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":95,"score":2,"question_id":13038592,"title":"Getting information from my controller into onclick confirm(alert)","body":"<p>i try to confirm a sale and i need sum information about the product..</p>\n\n<p><strong>my View</strong></p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n&lt;fieldset&gt;\n    &lt;legend&gt;Card&lt;/legend&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.CardModel.SerialNumber, \"Serial No\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.CardModel.SerialNumber, new { id = \"sn\" })\n        @Html.ValidationMessageFor(model =&gt; model.CardModel.SerialNumber)\n    &lt;/div&gt;\n\n      &lt;p&gt;\n        &lt;input type=\"submit\" value=\"CardSale\" id=\"btnSubmit\"\n        onclick=\"if (confirm('The owner dealer price is : **@Model.OwnerPrice** . Are you sure?')) { return true; } else { return false; }\" /&gt;\n    &lt;/p&gt;\n\n&lt;/fieldset&gt;\n}           \n</code></pre>\n\n<p>i tryed with the ' $.getJSON ' like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() \n {\n  $(\"#btnSubmit\").click(function ()\n  {\n        var serial = $(\"#sn\");\n        var price = \"\";\n        var url = \"\";\n        url = \"@Url.Action(\"GetOwnerPrice\",\"Card\")/\"+serial;\n\n        $.getJSON(url,function(data)\n        {   \n            alert(data.Value);\n        });\n    });       \n });\n</code></pre>\n\n<p></p>\n\n<p>and on the controller</p>\n\n<pre><code> public ActionResult GetOwnerPrice(int sn)\n    {\n        var owner = db.Dealers.Single(s =&gt; s.DealerID == db.Dealers.Single(o =&gt; o.UserName == User.Identity.Name).OwnerDealerID);\n        var ownerPrice = owner.ProductToSale.Single(pr =&gt; pr.ProductID == sn).SalePrice;\n\n        return Json(ownerPrice, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>but i dont know how to return it to the onclick confirm msg or into my ViewModel..</p>\n\n<p>any help?</p>\n"},{"tags":["asp.net-mvc","entity-framework","production-environment"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":13048898,"title":"Entity Framework 5 - Code First Production Preparation","body":"<p>As part of our intended migration from Linq2Sql to Entity Framework, we have created a small EF model consisting of ten entities.  Because we are working with a legacy application we are using the 'code first' option and manually mapping our POCO objects to tables within the database.  <strong>We do not want the Entity Framework code to update the database.</strong>  I believe that the following is all I need to do to achieve this - I would appreciate confirmation as I was not sure whether the SetInitializer code should go here or perhaps in the Global.asax code.</p>\n\n<pre><code>protected override void OnModelCreating(DbModelBuilder modelBuilder)\n{\n    Database.SetInitializer&lt;InboxDataContext&gt;(null);\n\n    modelBuilder.Configurations.Add(new Subscribers.Mapping.DataSourceMap());\n    modelBuilder.Configurations.Add(new Subscribers.Mapping.SubscriberMap());\n    ...\n}\n</code></pre>\n\n<p>As part of this update, we have created a small test page (MVC controller and views) and added it to our main application project.  During development and testing this has worked well.  The only thing we did notice is that if we updated the underlying EF model, the initial page load seemed to take several minutes to render.  I assumed this was because EF had to rebuild its views and mappings to reflect the changes - to my disgrace, I didn't worry too much about this as a) I don't have a full understanding of how this works and b) it only seemed happened on model changes.</p>\n\n<p>This morning we loaded this update to the production server for initial testing and this time the initial load problem became much worse - so much so in fact that the test page never loaded.</p>\n\n<p>So, to get to my questions:</p>\n\n<ol>\n<li>Is there anything else I should/should not be doing to prepare my\napplication for production? </li>\n<li>How can I improve the initial load performance?</li>\n<li>How can I find out why the initial load on the production server\nnever completes - I am not seeing any error messages?</li>\n</ol>\n\n<p>I did try downloading the Entity Framework Power Tools and running the 'Generate Views' option on the derived DbContext class, but since I could only run this in the development environment I was not sure whether this would work when copied to the production server - it didn't appear to.</p>\n\n<p>I should mention that the development environment contains just one hundred records in the main table and the production environment contains almost one million records (same schemas), again I wasn't sure if this would make any difference.</p>\n\n<p>Any help advice would be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["javascript","asp.net-mvc","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13046514,"title":"Javascript MVC framework similar to Asp.net MVC","body":"<p>Which Javascript MVC framework is closest in terms of concepts of routing, models, views and controllers to Asp.net MVC?</p>\n\n<p>I have completed a personal project using the excelent <a href=\"http://sammyjs.org/\" rel=\"nofollow\">Sammy.js</a> with <a href=\"http://mustache.github.com/\" rel=\"nofollow\">Mustache.js</a> and have felt comfortable with Sammy due to its similarity to <a href=\"https://github.com/thecodejunkie/Nancy\" rel=\"nofollow\">Nancy</a> the Micro .net framework.</p>\n\n<p>I would like to convert this project to another Javascript MVC framework so I can have a comparision of strengths and weaknesses, I would like to choose one similar to Asp.net MVC but I am facing the <a href=\"http://en.wikipedia.org/wiki/The_Paradox_of_Choice%3a_Why_More_Is_Less\" rel=\"nofollow\">paradox</a> of <a href=\"http://www.hanselman.com/blog/TheBigGlossaryOfOpenSourceJavaScriptAndWebFrameworksWithCoolNames.aspx\" rel=\"nofollow\">choice</a>.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13050983,"title":"Display default 404 in GetHttpHandler","body":"<p>I associated a RouteHandler to a Route in RouteConfig.RegisterRoutes()</p>\n\n<pre><code>routes.MapRoute(...).RouteHandler = new MyRouteHandler();\n</code></pre>\n\n<p>In MyRouteHandler.GetHttpHandler() I want to check the URL segments, if they meet some condition I'll just show a default 404 page, rather than initiate a MyHttpHandler class. Which (if any) predefined class should I return?</p>\n\n<p>If I handle those segments later in MyHttpHandler.OnInit(), I can set this.Context.ApplicationInstance.Response.Status to \"404 Not Found\", but I think it's better to do this earlier in MyRouteHandler.GetHttpHandler().</p>\n"},{"tags":["c#","asp.net-mvc","architecture"],"answer_count":0,"favorite_count":2,"up_vote_count":5,"down_vote_count":1,"view_count":108,"score":4,"question_id":13044937,"title":"Best way to organize/architect a web site","body":"<p>I have to take a key decision about our web site organization/architecture. </p>\n\n<p>Here is my context.\nOur main web site will be available in different countries. Even if the Business is nearly the same, there are some region-specific features. Of course it concerns translations, but also master/layouts and business process. These difference are because of different legislations. At the beginning we will have 4 or 5 derivations, but the target could be 20.</p>\n\n<p>A simple comparison could be Stackoverflow and the Stack Exchange Network. Main features are quite the same between website, but there are site-specific business rules. </p>\n\n<p>To my mind, there are basically two possible approachs :</p>\n\n<ul>\n<li><strong>Having a single web site that manage region/country-specific features</strong>.\nThe will keep core features on the same site, but will involve coupling between all regions. There is also a risk of \"IF\" in the code. Devs &amp; Maintainability is optimal (unique fix for all) but risky (could break others). A way to do this is a combinaison of portable areas and a custom view engine (generic view template in parent folder and derivation in a sub folder)</li>\n<li><strong>Having one web site per region/country</strong> \nThere will be a common web site that will be implemented. There will have some common components but each web site will have its own lifecycle; Devs &amp; Maintainability is easier but costly (if there are many derivations)</li>\n</ul>\n\n<p>Please Note, another impact of this organization is deployment and avaibility. </p>\n\n<p>What is the best way to organize this ?</p>\n\n<p>Edit :\nWe already have some experiences in MVC and as a general guideline, we are aware of MVC Best Practices : thin controllers, DI, ViewModels, Action Filters, ...</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":13049481,"title":"Globalization in asp.net MVC4","body":"<p>I want to implement <code>Globalization</code> and <code>Localization</code> in my ASP.NET MVC application. </p>\n\n<p>I gone through a couple of tutorials like <a href=\"http://afana.me/post/aspnet-mvc-internationalization.aspx\" rel=\"nofollow\">this</a>.</p>\n\n<p>But the problem is he is creating multiple views for each language.</p>\n\n<p>So if there are 10 views then we have to create 10 views for each language adding up to 100. Please guide me the best way of creating multilingual(i.e. 8 languages) application with single view and if possible with PO files.</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","mvc","view","asp.net-mvc-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13050164,"title":"Column ordering in the MVC Visual Studio - default List template View","body":"<p>Started working with MVC 3 web framework in Visual Studio 2010, and with first tutorial, setting up a View which lists all my database table data, created with Entiity model, have searched for simple whay to add column (field) ordering to the resulting webpage.</p>\n\n<p>Something I would thought standard in the code that the controller or add view would make.</p>\n\n<p>Iv ended up adding in on control method, returning to my index page, with two added actionlinks after the header name to request for order based on clicked page.</p>\n\n<p>Code below reworked to use an image instead of the html.actionlink</p>\n\n<pre><code>   &lt;th&gt;\n            ORGANISATION\n            &lt;a href=\"@Url.Action(\"ORGANISATION\", \"Orgs/IndexOrder\", new { order_by = \"ORGANISATION\", order_desc = false })\" border=0&gt;\n                &lt;img src=\"@Url.Content(\"~/Images/ArrowUp.jpg\")\" alt=\"Order ORGANISATION Ascending\"   /&gt;\n            &lt;/a&gt;\n            &lt;a href=\"@Url.Action(\"ORGANISATION\", \"Orgs/IndexOrder\", new { order_by = \"ORGANISATION\", order_desc = true }) \" border=0&gt;\n                &lt;img src=\"@Url.Content(\"~/Images/ArrowDown.jpg\")\" alt=\"Order ORGANISATION Descending\"  /&gt;\n            &lt;/a&gt;\n        &lt;/th&gt;\n</code></pre>\n\n<p>If someone knows if there is a qucik way to do this in Visual Studio, then manully making it for each View that I will need it for.</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","entity-framework","entity-framework-4","entity-framework-4.1","entity-framework-5"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13047845,"title":"How to include a child object's child object in Entity Framework 5","body":"<p>I am using <code>Entity Framework 5 code first</code> and <code>ASP.NET MVC 3</code>.</p>\n\n<p>I am struggling to get a child object's child object to populate.  Below are my classes..</p>\n\n<p>Application class;</p>\n\n<pre><code>public class Application\n{\n     // Partial list of properties\n\n     public virtual ICollection&lt;Child&gt; Children { get; set; }\n}\n</code></pre>\n\n<p>Child class:</p>\n\n<pre><code>public class Child\n{\n     // Partial list of properties\n\n     public int ChildRelationshipTypeId { get; set; }\n\n     public virtual ChildRelationshipType ChildRelationshipType { get; set; }\n}\n</code></pre>\n\n<p>ChildRelationshipType class:</p>\n\n<pre><code>public class ChildRelationshipType\n{\n     public int Id { get; set; }\n\n     public string Name { get; set; }\n}\n</code></pre>\n\n<p>Part of GetAll method in the repository to return all the applications:</p>\n\n<pre><code>return DatabaseContext.Applications\n     .Include(\"Children\");\n</code></pre>\n\n<p>The Child class contains a reference to the ChildRelationshipType class.  To work with an application's children I would have something like this:</p>\n\n<pre><code>foreach (Child child in application.Children)\n{\n     string childName = child.ChildRelationshipType.Name;\n}\n</code></pre>\n\n<p>I get an error here that the object context is already closed.</p>\n\n<p>How do I specify that each child object must include the ChildRelationshipType object like what I did above?</p>\n"},{"tags":["asp.net-mvc","json","webclient"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13049338,"title":"Using WebClient to call web services inside my asp.net MVC","body":"<p>I have created a sample action method inside my controller to call a web service:-</p>\n\n<pre><code>public ActionResult CompletedProcessList()\n{   \n   using (var client = new WebClient())\n   {\n      try\n      {\n                    var query = HttpUtility.ParseQueryString(string.Empty);\n                    query[\"j_username\"] = \"kermit\";\n                    query[\"hash\"] = \"9449B5ABCFA9AFDA36B801351ED3DF66\";\n\n                    query[\"loginAs\"] = \"admin\";\n                    query[\"sort\"] = \"startedTime\";\n                    query[\"desc\"] = \"true\";\n                    query[\"rows\"] = \"512100\";\n\n                    var url = new UriBuilder(\"http://localhost:8080/jw/web/json/monitoring/running/process/list\");\n                    url.Query = query.ToString();\n                    string json = client.DownloadString(url.ToString());\n                    Thread.Sleep(500);\n                    return Content(json, \"application/json\");\n      }\n      catch (System.Net.WebException)\n      {\n          return Content(\"error\", \"application/json\");\n      }\n   }\n}\n</code></pre>\n\n<p>Then I am using Javascript to display the json object inside my view, such as:-</p>\n\n<pre><code>function getpackagelist(result) {\n        $('#products').empty();\n        $('#title').text(\"All Processes\");\n        $.each(result.data, function (key, val) {\n            var str = val.packageName;\n            $('&lt;li/&gt;', { text: str })\n                .appendTo($('#products'));\n        });\n        $('#tobehide').hide();}\n</code></pre>\n\n<p>The above will work well and i am thinking of using this approach to call all the web service inside my application.but since i am somehow new to the web services area, so i have the following questions/concerns about my above approach:-</p>\n\n<ol>\n<li><p>Does using <code>Webclient</code> and building the query parameters as I am doing in my action method; efficient and secure?</p></li>\n<li><p>I am storing the result of the web service call in a string then I am returning the string as a <code>application/json</code>, so will the returned object in this case be equal to returning a direct JSON object?</p></li>\n<li><p>and will converting string to JSON might cause performance issues which I can avoid?</p></li>\n<li><p>any other concerns I am unaware of ?</p></li>\n</ol>\n\n<p>thanks in advance for any help..</p>\n\n<p>Best Regards</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13048192,"title":"Unable to delete tbody for a table using Jquery","body":"<p>I have the following table inside my markup:-</p>\n\n<pre><code>&lt;table id=\"tablelist\" border=\"1\"&gt;\n\n       &lt;thead&gt;\n        &lt;tr&gt;\n    &lt;/tr&gt;\n    &lt;/thead&gt;\n       &lt;tbody&gt;&lt;/tbody&gt;\n       &lt;/table&gt;\n</code></pre>\n\n<p>and i am building the above table using the following Java script which will be fired when the user click on a link:-</p>\n\n<pre><code>function getprocesslist(result) {\n        $('#tablelist tbody').remove();\n\n    var str = 'Total Number Of Processes:- ' + result.total.toString();\n        $('#total').text(str.toString());\n\n        var str1 = '&lt;tr&gt;&lt;th&gt;' + 'Process Name' + '&lt;/th&gt;&lt;th&gt;' + 'Process Requestor ID' + '&lt;/th&gt;&lt;th&gt;' + 'Process State' + ' &lt;/th&gt;&lt;th&gt;' + 'Process Start Date' + ' &lt;/th&gt;&lt;th&gt;' + 'Process Due Date' + ' &lt;/th&gt;&lt;/tr&gt;';\n        $('#tablelist tr:last').after(str1);\n    $.each(result.data, function (key, val) {\n        var str2 = '&lt;tr&gt;&lt;td&gt;' + val.name + '&lt;/td&gt;&lt;td&gt;' + val.requesterId + '&lt;/td&gt;&lt;td&gt;' + val.state + '&lt;/td&gt;&lt;td&gt;' + val.startedTime + '&lt;/td&gt;&lt;td&gt;' + val.due + '&lt;/td&gt;&lt;/tr&gt;';\n\n        $('#tablelist tr:last').after(str2);\n\n    });\n   }\n</code></pre>\n\n<p>But the problem is that when the user clicks multiple time on the link the new data will be shown under the old table instead of removing the old data. i think the problme with my code is that on the first clink the <code>&lt;tbody&gt;&lt;/tbody&gt;</code> is remove and i can not reference it again using Jquery ? any idea on how i can solve this problem?</p>\n\n<p>BR </p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13048742,"title":"EF Code First Not creating database","body":"<p>I have copied my code across into a new project and I am failing to see any .mdf or .log files generated after running. Under Data Connections I can see and interact with the tables in the database, yet no files are created within the App_Data folder.</p>\n\n<p>Here is my DB context class:</p>\n\n<pre><code>public class BareCupboardDB : DbContext\n{\n    public DbSet&lt;Recipe&gt; Recipes { get; set; }\n    public DbSet&lt;NutritionalValue&gt; NutritionalValues { get; set; }\n    public DbSet&lt;RecipeStep&gt; RecipeSteps { get; set; }\n    public DbSet&lt;Ingredient&gt; Ingredients { get; set; }\n    public DbSet&lt;RecipeIngredient&gt; RecipeIngredients { get; set; }\n}\n</code></pre>\n\n<p>My Application_Start() code:</p>\n\n<pre><code>protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        WebApiConfig.Register(GlobalConfiguration.Configuration);\n        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n        BundleConfig.RegisterBundles(BundleTable.Bundles);\n        AuthConfig.RegisterAuth();\n\n        //System.Data.Entity.Database.SetInitializer(new BareCupboard.Models.RecipeContextInitializer());\n        Database.SetInitializer(new CreateDatabaseIfNotExists&lt;BareCupboardDB&gt;());\n\n        var context = new BareCupboardDB();\n        context.Database.Initialize(true);\n    }\n</code></pre>\n\n<p>And my connection string:</p>\n\n<pre><code>&lt;add name =\"testConnection\"\n     connectionString=\"data source= .\\SQLExpress;Integrated Security=SSPI;Initial Catalog=BareCupboardDB\"\n     providerName=\"System.Data.SqlClient\"/&gt;\n</code></pre>\n\n<p>As far as I can see, this should absolutely generate my database files.</p>\n\n<p>I appreciate any help.</p>\n\n<p>Many thanks.</p>\n"},{"tags":["asp.net-mvc","azure","azure-compute-emulator"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13048462,"title":"Intermittent \"Could not load file or assembly\" error when testing in the Azure emulator","body":"<p>I'm working on the client portion of an Azure application with an MVC app in a web role, and various services in a handful of web and worker roles. I'm doing a fair amount of HTML and JS work, so I set the emulator running using <code>Debug &gt; Start Without Debugging</code> and then program against the running services, mostly just changing client-side code but occasionally tweaking the MVC app and recompiling that.</p>\n\n<p>This all works, but every so often I get a strange error:</p>\n\n<pre><code>Could not load file or assembly 'System.ServiceModel.Web.dll' or one of its dependencies. The filename or extension is too long.\n</code></pre>\n\n<p>This usually happens right after I've recompiled, but not always. The fix is simple: restart Dev IIS and the Emulator, Start Without Debugging again, and the problem goes away, but I was wondering what might be causing this, and how I can stop it happening?</p>\n\n<p>The full error dump looks like this:</p>\n\n<pre><code>Could not load file or assembly 'System.ServiceModel.Web.dll' or one of its dependencies. The filename or extension is too long.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileLoadException: Could not load file or assembly 'System.ServiceModel.Web.dll' or one of its dependencies. The filename or extension is too long.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nStack Trace: \n\n\n[FileLoadException: Could not load file or assembly 'System.ServiceModel.Web.dll' or one of its dependencies. The filename or extension is too long.]\n   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0\n   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark&amp; stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +210\n   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection) +242\n   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection) +17\n   System.Reflection.Assembly.Load(String assemblyString) +35\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +122\n\n[ConfigurationErrorsException: Could not load file or assembly 'System.ServiceModel.Web.dll' or one of its dependencies. The filename or extension is too long.]\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +12761078\n   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +214\n   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +334\n   System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +203\n   System.Web.Compilation.BuildManager.ExecutePreAppStart() +152\n   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1151\n\n[HttpException (0x80004005): Could not load file or assembly 'System.ServiceModel.Web.dll' or one of its dependencies. The filename or extension is too long.]\n   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12881540\n   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159\n   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +12722601\n</code></pre>\n"},{"tags":["ajax","asp.net-mvc","opera","ntlm","http-status-code-401"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":13048175,"title":"asp mvc - opera return 401 response when sended ajax NTLM request","body":"<p>I have web app (asp.net mvc mvc 4), when i enable ntlm authentification in visual studio and try to send ajax request for example <code>$.ajax({url : 'http://localhost:4135/'});</code> the returned server response is 401 - and it happens only on opera, chrome work fine, and firefox. Who can help to fix that? Thanks.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13046937,"title":"Ubable to build a table using Jquery","body":"<p>I have the following view inside my asp.net MVC web application:-</p>\n\n<pre><code>&lt;table id=\"tablelist\" border=\"1\"&gt;\n    &lt;tr&gt;\n\n    &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>and i am trying to fill the table using the following java script:-</p>\n\n<pre><code>function getprocesslist(result) {\n    var str = 'Total Number Of Processes:- ' + result.total.toString();\n        $('#total').text(str.toString());\n        var str1 = '&lt;th&gt;'+ 'Process Name' + '&lt;/th&gt;&lt;th&gt;'+ 'Process Requestor ID' + '&lt;/th&gt;&lt;th&gt;'+ 'Process State' +' &lt;/th&gt;&lt;th&gt;'+ 'Process Start Date' +' &lt;/th&gt;&lt;th&gt;'+ 'Process Due Date' +' &lt;/th&gt;';\n        $('#tablelist tr:last').after(str1);\n    $.each(result.data, function (key, val) {\n        var str2 = '&lt;tr&gt;&lt;td&gt;' + val.name + '&lt;/td&gt;&lt;td&gt;' + val.requesterId + '&lt;/td&gt;&lt;td&gt;' + val.state + '&lt;/td&gt;&lt;td&gt;' + val.startedTime + '&lt;/td&gt;&lt;td&gt;' + val.due + '&lt;/td&gt;&lt;/tr&gt;';\n\n        $('#tablelist tr:last').after(str2);\n\n    });\n</code></pre>\n\n<p>But i am facing the following problems with the above code:-</p>\n\n<ol>\n<li><p>the table header <code>&lt;th&gt;</code> will be displayed at the end of the table instead of being the first row.</p></li>\n<li><p>if i execute the same script more than one time then the table format will be wrong, and the table data will be displayed in multiple lines inside each table cell.</p></li>\n<li><p>no table boarders is being displayed,  although i define the <code>border=\"1\"</code>.</p></li>\n</ol>\n\n<p>Best Regards</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13046483,"title":"Is there simple way to use bookmarks in controller action's generated urls?","body":"<p>Currently I am working with simple Forum module in ASP.NET MVC 3 which i will add later to my main application. The possibility to link to certain blocks like div used to present thread replies is very useful.</p>\n\n<p>I figured out something which work and propably will be enough for my needs, I just wonder if there is something more elegant and simple aswell. I found a solution using ActionFilters, and since I'm quite begginner in MVC I would like to find some easier solution (if exists). Well i will propably learn ActionFilters soon aswell :)</p>\n\n<p>So here is what I've done:</p>\n\n<pre><code>public ActionResult ShowThread(int id, int? postID)\n{\n\n    var thread = db.ForumThreads.Find(id);\n    if (postID != null)\n    {\n        return Redirect(Url.Action(\"ShowThread\",new {id=id})+\"#post-\"+postID.ToString());\n    }\n    return View(thread);\n}\n</code></pre>\n\n<p>I know it is quite simple, but it is working. Also it doesn't check if the postID is valid yet, but it is not a part of question.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13044420,"title":"ASP.Net MVC sending model to view without using URL","body":"<p>I am using the same model between 2 views, but when posting the model to the second view it puts all the previously entered data in the URL. Is it possible to send the populated model to the second view without posting the data in the URL?</p>\n\n<p>Controller code:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult ViewExample1(.Models.RegisterModel model)\n    {\n        if (ModelState.IsValid)\n        {\n            return RedirectToAction(\"ViewExample2\", model);\n        }\n        return View(model);\n    }\n\n    public ActionResult ViewExample2(Models.RegisterModel model)\n    {\n        return View(model);\n    }\n</code></pre>\n\n<p>Second view code where I use HiddenFor to persist the data when this view is posted back: </p>\n\n<pre><code>&lt;% using (Html.BeginForm(null, null, FormMethod.Post, new { id=\"ViewExample2\"})) { %&gt;\n    &lt;%: Html.HiddenFor(model =&gt; model.UserName)%&gt;\n&lt;% } %&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","ado.net","entity-framework-4.1"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":13033024,"title":"Ignore validation","body":"<p>I have a viewmodel with two other models in it. Both have fields that are required(done with entity framework).</p>\n\n<pre><code>    public class featureModel\n    {\n\n        public FEATURE FEATURE { get; set; }\n\n\n        public REQUIREMENTS REQUIREMENTS { get; set; }\n    }\n</code></pre>\n\n<p>On my page I have a dropdownlist, which is populated like this  </p>\n\n<pre><code>ViewBag.FEATURE_ID = new SelectList(db.FEATURE, \"FEATURE_ID\", \"Name_\");\n</code></pre>\n\n<p>on view</p>\n\n<pre><code>@Html.DropDownList(\"FEATURE_ID\", \"ADD FEATURE\")\n</code></pre>\n\n<p>Which will be a dropdownlist of all the features found, and on the top a ADD FEATURE option(when this is selected, i have some js to show the fields the user should input). IF this option is selected, then the user would need to input certain fields, if not they should not(and the fields are hidden). When my page validates, it requires that this needs to be populated, which makes sense in terms of validation. </p>\n\n<p>Is there a way that I can set a condition to ignore this validation if the dropdownlist is on a certain option?</p>\n"},{"tags":["css","asp.net-mvc","forms","twitter-bootstrap","alignment"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":13027183,"title":"Place and fix an icon at right of input textbox using Twitter Bootstrap","body":"<p>I've just started using Twitter Bootstrap (I'm new to it so I don't fully grasp it quite yet!) and I'm trying to create a two-column form with some specific visual elements.</p>\n\n<p>The complete width of the form is approx. 80% of the width of the viewport and within here are two (roughly equally spaced out) columns of labels and associated textboxes.  Some of the textboxes need to have a small icon affixed to the right-hand side of the textbox and for that icon to remain fixed to the righ-hand side of the textbox when the user resizes the browser window (to remain like this at least down to 1024x768 resolution).  I'm also trying to achieve all of this with a \"responsive design\".</p>\n\n<p>I can get it looking good at higher resolutions, but I know I'm doing something wrong as the icons are displaying \"inside\" the textboxes when the user resizes the browser window.</p>\n\n<p>This first image shows how the form should look (roughly) at all sizes:</p>\n\n<p><img src=\"http://i.stack.imgur.com/l71de.jpg\" alt=\"More or less correct alignment of visual elements on the form\"></p>\n\n<p>But when resizing the browser window, it does this:\n<img src=\"http://i.stack.imgur.com/bHJFI.jpg\" alt=\"Envelope icon moves inside the textbox when browser window is resized\"></p>\n\n<p>I'd like that little envelope icon to remain fixed to the right-hand side of the textbox at all times.  Unfortunately, when the browser window is shrunk even further, it moves to the next line:\n<img src=\"http://i.stack.imgur.com/WsqPg.jpg\" alt=\"Envelope icon moves to next line when browser window is resized even smaller\"></p>\n\n<p>I'm using ASP.NET MVC to generate much of this form, so there's lots of <code>@Html.TextBoxFor</code> calls going on within the mark-up, however, I've posted up a JSFiddle with a portion of the relevant rendered mark-up that highlights the problem:</p>\n\n<p><a href=\"http://jsfiddle.net/qYTSY/1/\" rel=\"nofollow\">http://jsfiddle.net/qYTSY/1/</a></p>\n\n<p>I'm sure I've taken an entirely wrong approach with this, however I'm no designer so I'm struggling to tweak the current mark-up to achieve what I'm after.  Can anyone help please?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-web-api","fluentvalidation"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":114,"score":6,"question_id":12975291,"title":"How to hook FluentValidator to a MVC 4 Web API?","body":"<p>I'm trying to hook Fluent Validation to my MVC WEB Api project, and it doesn't wanna work.</p>\n\n<p>When I use <code>MyController : Controller</code> -> works fine (<code>ModelState.IsValid</code> returns <code>False</code>)</p>\n\n<p>but when I use <code>MyController :ApiController</code> ... nothing.</p>\n\n<p>Does anyone have experience on how to hook those up ? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":113,"score":2,"question_id":11541758,"title":"How to get ActionDescriptor using action and controller names","body":"<p>Given the action name, controller name and HTTP verb (GET, POST .. etc), is it possible to check whether the action has (ie. is decorated by) a specific action filter attribute?</p>\n\n<p>Please note: The action and controller are not the current action and controller but can be any action and controller in the app.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":13015660,"title":"Count of System.Collections.Generic.List","body":"<pre><code>ViewBag.EquipmentList = myInventoryEntities.p_Configurable_Equipment_Request_Select(Address_ID, false).Select(c =&gt; new { Value = c.Quantity + \" \" + c.Device_Name + \" (s)\", ID = c.Device_ID.ToString() }).ToList();\n</code></pre>\n\n<p>In Razor i want to do the following</p>\n\n<pre><code>@ViewBag.EquipmentList.Count\n</code></pre>\n\n<p>But Count is always == 1</p>\n\n<p>I know i can iterate in a foreach but would rather a more direct approach.</p>\n\n<p>Perhaps I am conceptually off?</p>\n"},{"tags":["asp.net-mvc","checkbox","formcollection"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":3923,"score":4,"question_id":2617754,"title":"Getting multiple checkboxes from FormCollection element","body":"<p>Given multiple HTML checkboxes:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"catIDs\" value=\"1\" /&gt;\n&lt;input type=\"checkbox\" name=\"catIDs\" value=\"2\" /&gt;\n...\n&lt;input type=\"checkbox\" name=\"catIDs\" value=\"100\" /&gt;\n</code></pre>\n\n<p>How do I retrive an array of integers from a FormCollection in an action:</p>\n\n<pre><code>public ActionResult Edit(FormCollection form)\n{\n    int [] catIDs = (IEnumerable&lt;int&gt;)form[\"catIDs\"]; // ???\n\n    // alternatively:\n    foreach (int catID in form[\"catIDs\"] as *SOME CAST*)\n    {\n        // ...\n    }\n\n    return View();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong> I read the related questions and I don't want to change my action parameters, eg. <code>Edit(int [] catIDs)</code>.</p>\n"},{"tags":["c#","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":13030626,"title":"Start a download link? JQuery or C#","body":"<p>I need to run a download and then proceed with the code? How would i go about this?</p>\n\n<p>This function is checking for when the file is fished downloading onto my sever, then i need to run a download to my client computer, witch is where i try the window.open(\"url\").</p>\n\n<pre><code>function checkSpreadsheetProgress(taskId, filename) {\n        var intervalId2 = setInterval(function () {\n            $.post(\"SpreadSheetProgress\", { id: taskId }, function (SpreadSheetProgress) {\n                if (SpreadSheetProgress &gt;= 100) {\n                    clearInterval(intervalId2);\n                    window.open(\"http://formvalue.co.za/download/\" + filename + \".xlsx\")\n   //The line above is my attempt at running the download link but it did nothing?\n   //The line below pushes me to my Downloadcompleate action result.\n                    window.location.href = \"downloadcomplete?filename=\" + filename;\n                } else {\n\n                }\n            });\n        }, 100);\n    }\n</code></pre>\n\n<p>I can download a file with C# but cant continue with the code behind my redirect method.</p>\n\n<pre><code>public ActionResult DownloadComplete(string filename)\n{\n    //return Redirect(\"http://formvalue.co.za/download/\" + filename + \".xlsx\");\n    // The above line will download the file but then i cant return a view?\n    return View();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":177,"score":1,"question_id":10731768,"title":"Session State with MVC Confusion","body":"<p>I've worked on several .coms and we've never used the built-in ASP.NET session state.  It has always been check a cookie for a valid session checks and the session is compared to what's in the DB or other means but ultimately it's the cookie.  We haven't used any ASP.NET based session objects.</p>\n\n<p>So why are people using all this session state server crap with MVC?  I have never seen a need for it.</p>\n"},{"tags":["asp.net-mvc","t4mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13040703,"title":"Generate T4MVC url inside ApiController","body":"<p>Is there a way to generate a Url that is not part of an ApiController inside a ApiController using T4MVC?  I dont have an option to do so.  <code>controller.Url</code> is null when I run the code below.</p>\n\n<pre><code>var controller = new UrlController();\n\n                foreach (var e in @event.Event.Reports)\n                {\n                    e.Url = controller.Url.Action(EventReportTypes.GetTypes(e.ReportType, @event.Event.Id, AssetOutput.Html, false));\n                }\n</code></pre>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc",".net-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":0,"question_id":13043578,"title":"Getting 'Is inaccessible due to its protection level' error when trying to use MembershipProvider.EncryptPassword","body":"<pre><code> public ActionResult Register(RegisterModel RegisterModel, string returnUrl)\n        {\n            if (ModelState.IsValid)\n            {\n                // Attempt to register the user\n                MembershipCreateStatus createStatus;\n\n                System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();\n                Byte[] Password = encoding.GetBytes(RegisterModel.Password);\n                var EncryptedPass = MembershipProvider.EncryptPassword(Password);\n\n                Membership.CreateUser(RegisterModel.UserName, RegisterModel.Password, RegisterModel.Email, null, null, true, null, out createStatus);\n\n                if (createStatus == MembershipCreateStatus.Success)\n                {\n                    FormsAuthentication.SetAuthCookie(RegisterModel.UserName, false /* createPersistentCookie */);\n                    return Redirect(returnUrl ?? Url.Action(\"Index\", \"Education\"));\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\", ErrorCodeToString(createStatus));\n                }\n            }\n\n            // If we got this far, something failed, redisplay form\n            return View(RegisterModel);\n        }\n</code></pre>\n\n<p>Trying to encrypt a password before storing it in the database using the EncryptPassword method and then Dycrypt it with MembershipProvider.DecryptPassword Method but getting a 'Is inaccessible due to its protection level' error warning.</p>\n"},{"tags":["asp.net-mvc","mvccontrib"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":131,"score":2,"question_id":12581931,"title":"Does MVCContrib support MVC4?","body":"<p>Does MVCContrib support MVC4? I am trying to use it in my project. Can any one help me with an example?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","asp.net-mvc-routing","asp.net-web-api-routing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":116,"score":1,"question_id":13040781,"title":"ASP.NET MVC Web.Api Routing - Real world example","body":"<p>I have been looking at routing in the Web.Api and looking at various ways of representing endpoints. I came across <a href=\"http://instagram.com/developer/endpoints/users/\" rel=\"nofollow\">Instagrams REST endpoints</a>. (which has some lovely documentation) Using the Web.Api what would be the best way to set up the routing and controllers for a sitution like Instagrams user endpoints?</p>\n\n<pre><code>User Endpoints\nGET/users/user-id                  Get basic information about a user.\nGET/users/self/feed                See the authenticated user's feed.\nGET/users/user-id/media/recent     Get the most recent media published by a user.\nGET/users/self/media/liked         See the authenticated user's list of liked media.\nGET/users/search                   Search for a user by name.\n</code></pre>\n\n<p>If I wanted to replicate these endpoints in my app, how would I go about it. Would I just need one controller 'Users' with 5 methods, what kind of routing would I need to direct the REST calls to those methods?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010-beta-2","iis-7.5"],"answer_count":7,"favorite_count":11,"up_vote_count":20,"down_vote_count":0,"view_count":15979,"score":20,"question_id":1852251,"title":"Getting an ASP.MVC2/VS2010 application to work in IIS 7.5","body":"<p>I've recently downloaded beta 2 of VS2010 and started playing with ASP.NET MVC2. Initial development was done with Casini, but now I wanted to run the application from IIS 7.5 (I'm running Windows 7).\nI've installed the IIS6 metabase compatiblity and I run VS2010 as administrator so I can use the \"Create Virtual Directory\" button from the \"Web\" tab of the project settings.\nThis created the web application entry in IIS, but it doesn't work.</p>\n\n<p>When I go to the main page (<a href=\"http://localhost/MyMvcApp/\" rel=\"nofollow\">http://localhost/MyMvcApp/</a>) I get a HTTP 403 error. When I go directly to one of the sub-pages (<a href=\"http://localhost/MyMvcApp/Home/\" rel=\"nofollow\">http://localhost/MyMvcApp/Home/</a>) I get an HTTP 404.</p>\n\n<p>So I guess for some reason the URL routing isn't working.\nI've already added UrlRouting as a module and a handler to the web.config. In my searches this is offered as a solution for some similair problems. But for me this still doesn't work.</p>\n\n<p>The interesting part of my web.config looke like this:</p>\n\n<pre><code>&lt;system.web&gt;\n  &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n    &lt;assemblies&gt;\n      &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;add assembly=\"System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;/assemblies&gt;\n  &lt;/compilation&gt;\n  &lt;authentication mode=\"Forms\"&gt;\n    &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt;\n  &lt;/authentication&gt;\n  &lt;membership&gt;\n    &lt;providers&gt;\n      &lt;clear /&gt;\n      &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n    &lt;/providers&gt;\n  &lt;/membership&gt;\n  &lt;profile&gt;\n    &lt;providers&gt;\n      &lt;clear /&gt;\n      &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n    &lt;/providers&gt;\n  &lt;/profile&gt;\n  &lt;roleManager enabled=\"false\"&gt;\n    &lt;providers&gt;\n      &lt;clear /&gt;\n      &lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n      &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n    &lt;/providers&gt;\n  &lt;/roleManager&gt;\n  &lt;pages&gt;\n    &lt;namespaces&gt;\n      &lt;add namespace=\"System.Web.Mvc\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n      &lt;add namespace=\"System.Web.Routing\" /&gt;\n    &lt;/namespaces&gt;\n  &lt;/pages&gt;\n  &lt;httpHandlers&gt;\n    &lt;add verb=\"*\" path=\"*.mvc\" validate=\"false\" type=\"System.Web.Mvc.MvcHttpHandler\" /&gt;\n  &lt;/httpHandlers&gt;\n  &lt;customErrors mode=\"Off\" /&gt;\n&lt;/system.web&gt;\n&lt;system.webServer&gt;\n  &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n  &lt;modules runAllManagedModulesForAllRequests=\"true\" &gt;\n    &lt;remove name=\"UrlRoutingModule\"/&gt;\n    &lt;add name=\"UrlRoutingModule\" type=\"System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n  &lt;/modules&gt;\n  &lt;handlers&gt;\n    &lt;remove name=\"MvcHttpHandler\" /&gt;\n    &lt;add name=\"MvcHttpHandler\" preCondition=\"integratedMode\" verb=\"*\" path=\"*.mvc\" type=\"System.Web.Mvc.MvcHttpHandler\" /&gt;\n    &lt;add name=\"UrlRoutingHandler\" preCondition=\"integratedMode\" verb=\"*\" path=\"UrlRouting.axd\" type=\"System.Web.HttpForbiddenHandler, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\" /&gt;\n  &lt;/handlers&gt;\n  &lt;httpErrors errorMode=\"Detailed\" /&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":432,"score":1,"question_id":4743636,"title":"Get Logged in User in ActionFilterAttribute","body":"<p>I want to apply an action filter on one of my ActionResult methods. </p>\n\n<p>I want to be able to pass to the ActionFilterAttribute the currently logged in user id.</p>\n\n<p>Is there either a way I can pass the user to the attribute or have the attribute pick up the logged in user?</p>\n"},{"tags":["c#","javascript","asp.net-mvc","json","expandoobject"],"answer_count":9,"favorite_count":16,"up_vote_count":23,"down_vote_count":0,"view_count":4756,"score":23,"question_id":5156664,"title":"How to flatten an ExpandoObject returned via JsonResult in asp.net mvc?","body":"<p>I really like the <code>ExpandoObject</code> while compiling a server-side dynamic object at runtime, but I am having trouble flattening this thing out during JSON serialization. First, I instantiate the object:</p>\n\n<pre><code>dynamic expando = new ExpandoObject();\nvar d = expando as IDictionary&lt;string, object&gt;;\nexpando.Add(\"SomeProp\", SomeValueOrClass);\n</code></pre>\n\n<p>So far so good. In my MVC controller, I want to then send this down as a JsonResult, so I do this:</p>\n\n<pre><code>return new JsonResult(expando);\n</code></pre>\n\n<p>This serializes the JSON into the below, to be consumed by the browser:</p>\n\n<pre><code>[{\"Key\":\"SomeProp\", \"Value\": SomeValueOrClass}]\n</code></pre>\n\n<p><b>BUT, what I'd really like is to see this:</b></p>\n\n<pre><code>{SomeProp: SomeValueOrClass}\n</code></pre>\n\n<p>I know I can achieve this if I use <code>dynamic</code> instead of <code>ExpandoObject</code> -- <code>JsonResult</code> is able to serialize the <code>dynamic</code> properties and values into a single object (with no Key or Value business), <i>but the reason I need to use <code>ExpandoObject</code> is because I don't know all of the properties I want on the object until runtime</i>, and as far as I know, I cannot dynamically add a property to a <code>dynamic</code> without using an <code>ExpandoObject</code>.</p>\n\n<p>I may have to sift through the \"Key\", \"Value\" business in my javascript, but I was hoping to figure this out prior to sending it to the client. Thanks for your help!</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","jquery-plugins","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":395,"score":0,"question_id":11232614,"title":"How to get BlueImp jQuery FileUpload to generate unique filenames","body":"<p>I currently have an ASP.NET MVC project that is using BlueImp jQuery FileUploader which works great.</p>\n\n<p><a href=\"https://github.com/blueimp/jQuery-File-Upload\" rel=\"nofollow\">https://github.com/blueimp/jQuery-File-Upload</a></p>\n\n<p>However, it appears that the default behaviour is to use the original filenames when uploading files to the server. Ideally, what I would like is to have the jQuery FileUploader generate a unique filename for each file uploaded.</p>\n\n<p>I did try performing a rename of each uploaded file on the server, but I then realised that the FileUploader seems to hang on to the original filenames.</p>\n\n<p>Is there a way of making the jQuery uploader generate a random/unique filename for each image uploaded (whether that be individually or as a batch)?</p>\n"},{"tags":["asp.net-mvc","oauth","asp.net-mvc-4","oauth-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13039707,"title":"OAuth security for calling Controllers using Attrubutes?","body":"<p>Is there anyway, that you can lets say use OAuth in MVC and enable acces to a controller using Attributes like in validation process.\nLets say i have </p>\n\n<pre><code>public class myownController\n{ \n  [LoginRequired]\n  public ActionResult Index(){\n  //this can be accesed only of the user is logged in.\n  }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","validation","jquery-validate","unobtrusive-javascript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13040493,"title":"MVC Validation - How to add the unobtrusive data-val tags","body":"<p>I have some simple server side validation that I put together to validate 6 different sections of my form.  I had to do it manually because not even the custom choices (foolproof, fluent, etc) had an attribute that fit the context (if radio button true, hidden counter had to be > 0).</p>\n\n<p>So I have the server side working great, it even displays an error message in the 'validationSummary' section of the form.  Now I would like to add some client side validation for these and I was wondering if there was a simple way to slightly modify my server side stuff so it will add in the 'data-val' attributes in the HTML.</p>\n\n<p>Here is an example of one of my server side deals, just a simple if statement:</p>\n\n<pre><code>        if (model.HistoryModel.EverArrested == true)\n        {\n            if (model.PendingCounter == 0)\n            {\n                ModelState.AddModelError(\"Pending\", \"Additional information is required for Pending Charges.\");\n            }\n        }\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13032721,"title":"System.Web.Optimization making function argument names stay the same for certain functions","body":"<p>With ASP.NET Bundling with a ScriptBundle</p>\n\n<pre><code>function StartController($scope, $location, $rootScope) {}\n</code></pre>\n\n<p>is transformed to</p>\n\n<pre><code>function StartController(n,t,i) {}\n</code></pre>\n\n<p>However, as I am using AngularJs, for dependency injection to still work, the argument names must not be changed when minified. How can I ensure $scope, $location and $rootScope keep these names with the minification through a ScriptBundle, but allow argument renaming in other places?</p>\n"},{"tags":["asp.net-mvc","routing","asp.net-mvc-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2214,"score":4,"question_id":1978792,"title":"ASP.Net MVC - HTTP Status Codes (i.e. 303, 401, 404, etc)","body":"<p>In ASP.Net MVC is it possible to use either <code>Redirect</code> or <code>RedirectToAction</code> to call for example a 303 error?</p>\n\n<p>I am working my way through a book titled \"ASP.NET MVC 1.0 Website Programming\" and the source is making calls such as <code>return this.Redirect(303, FormsAuthentication.DefaultUrl);</code> but this call only functions with an external library, I would like to have the same functionality sans the add-on if possible.</p>\n"},{"tags":["c#","asp.net-mvc","image-manipulation"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":65,"score":-2,"question_id":13039885,"title":"What is the best library for image manipulation in .net?","body":"<p>I'm working on an asp.net MVC web application and I need a library for image manipulation.\nWhat is the best library for this case? I prefer to use an open source library.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-membership"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13024844,"title":"How to use MembershipUser.IsApproved for account confirmation","body":"<p>Here's what I want to achieve with ASP.Net MVC 3 :</p>\n\n<p>Before a user can actively use my website, I want them to fill a form and give a few details. Unless they have done so, they get redirected to the form website.</p>\n\n<p>I thought this would be feasible by registering the account with the IsApproved-flag set to false, but actually such users cannot login at all (<code>Membership.ValidateUser(model.UserName, model.Password)</code> always returns false).</p>\n\n<p>Is there any mechanism in forms authentication that supports this scenario? Or will I have to track this in a custom database table?</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT : Thanks to MystereMan (read his reply first) and a few other great posts here on SO, here's the ActionFilter (Attribute and its usage):</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method, AllowMultiple = true)]\npublic class RedirectUserInRoleAttribute : ActionFilterAttribute\n{\n    public string RoleName { get; set; }\n\n    public string TargetControllerName { get; set; }\n\n    public string TargetActionName { get; set; }\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        MembershipUser user = Membership.GetUser();\n        if (user != null)\n        {\n            string[] roles = Roles.GetRolesForUser(user.UserName);\n\n            if (roles.Any(x =&gt; x == RoleName))\n            {\n                RouteValueDictionary redirectTargetDictionary = new RouteValueDictionary();\n                redirectTargetDictionary.Add(\"action\", TargetActionName);\n                redirectTargetDictionary.Add(\"controller\", TargetControllerName);\n\n                filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);\n            }\n        }\n    }\n}\n\n\n[Authorize]\n[RedirectUserInRole(RoleName = \"Pending\", TargetControllerName = \"Home\", TargetActionName = \"Index\")]\npublic ActionResult ChangePassword()\n{\n  //...\n}\n\n[Authorize]\n[RedirectUserInRole(RoleName = \"Member\", TargetControllerName = \"Home\", TargetActionName = \"Index\")]\npublic ActionResult Confirm()\n{\n  // show confirm form here!\n}\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":125,"score":2,"question_id":13036586,"title":"Using custom html helpers in an ASP.NET MVC 3 Application","body":"<p>So, for some hours now, I have been trying to do something that I thought - and still think - should be trivial. Basically, I created a Html helper that I needed to use to apply some CSS attribute to the selected menu of an ASP.NET MVC 3 Application. Here is my Html helper:</p>\n\n<pre><code>namespace MVCUI.Extensibility\n{\n    public static class HtmlHelpers\n    {\n        public static MvcHtmlString MenuLink(\n            this HtmlHelper helper, \n            string text, \n            string action, \n            string controller, \n            string selectedCssClass, \n            object routeValues, \n            object htmlAttributes)\n        {\n            var attributes = new RouteValueDictionary(htmlAttributes);\n\n            if (!String.IsNullOrWhiteSpace(selectedCssClass))\n            {\n                var contextController = helper.ViewContext.RouteData.Values[\"controller\"] as String ?? \"Home\";\n                var contextAction = helper.ViewContext.RouteData.Values[\"action\"] as String ?? \"Index\";\n\n                if (String.Compare(\n                    String.Format(\"{0}/{1}\", controller, action), \n                    String.Format(\"{0}/{1}\", contextController, contextAction), true) == 0)\n                {\n                    var cssValue = String.Empty;\n                    if (attributes.ContainsKey(\"class\"))\n                        cssValue = attributes[\"class\"] as String ?? String.Empty;\n                    cssValue = cssValue.Trim();\n                    if (cssValue.Length &gt; 0)\n                        cssValue = cssValue += (\" \" + selectedCssClass);\n                    else\n                        cssValue = selectedCssClass;\n                    attributes[\"class\"] = cssValue;\n                }\n            }\n\n            return helper.ActionLink(text, action, controller, new RouteValueDictionary(routeValues), attributes);\n        }\n    }\n}\n</code></pre>\n\n<p>Here is how I am using it from a <strong>_Layout.cshtml</strong> file:</p>\n\n<pre><code>@Html.MenuLink(\"Posts\", \"Posts\", \"Post\", \"selected\", new { }, new { })\n</code></pre>\n\n<p>For some really odd reason, I keep getting the error:</p>\n\n<p><strong>Description:</strong> <em>An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.</em></p>\n\n<p><strong>Compiler Error Message:</strong> <em>CS1061: 'System.Web.Mvc.HtmlHelper' does not contain a definition for 'MenuLink' and no extension method 'MenuLink' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)</em></p>\n\n<p>Here is what I have tried:</p>\n\n<ol>\n<li>Added <code>&lt;add namespace=\"MVCUI.Extensibility\" /&gt;</code> to <code>&lt;system.web.webPages.razor&gt;/&lt;pages&gt;/&lt;namespaces&gt;</code> section of the <strong>Web.config</strong> file at the root of the <strong>Views</strong> folder.</li>\n<li>Added <code>@using MVCUI.Extensibility;</code> at the top of the <strong>_Layout.cshtml</strong> file.</li>\n<li>Tried all combinations of (1) and (2) above.</li>\n<li>Tried the syntax: <code>@{ Html.MenuLink(\"Posts\", \"Posts\", \"Post\", \"selected\", new { }, new { }); }</code></li>\n<li>Googled, alot! All materials and resources, including our very own stackoverflow, seem to suggest that am doing the right thing.</li>\n<li>Even tried setting <em>[assembly: ComVisible(true)]</em> in <strong>AssemblyInfo.cs</strong>. Well, just in case! ;)</li>\n</ol>\n\n<p><strong>Disclaimer:</strong> This is the first time I am trying out a html helper in an ASP.NET MVC 3 application.\nWhere could I be going wrong? Thanks people.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","health-monitoring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12148926,"title":"Health Monitoring is not logging errors when CustomError is set to \"On\" or \"RemoteOnly\"","body":"<p>I am using Health Monitoring for catching all errors and sending them to email. While it works in the development environment it did not when I deploy it in Prod. The only difference being the \"customerrors\" set to \"on/off\". So, I verified it again and it seems it will not log when the custom errors is set to \"On/RemoteOnly\". Below is part of my configuration in question. </p>\n\n<p>Is there a workaround to this issue? Thanks. </p>\n\n<pre><code>&lt;healthMonitoring enabled=\"true\"&gt;\n</code></pre>\n\n<p>\n    </p>\n\n<pre><code>&lt;add name=\"All Errors\" type=\"System.Web.Management.WebBaseErrorEvent\"\nstartEventCode=\"0\" endEventCode=\"2147483647\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>\n    </p>\n\n<pre><code>&lt;add\n  name=\"SimpleMailWebEventProvider\"\n  type=\"System.Web.Management.SimpleMailWebEventProvider\"\n  to=\"dev@net\"\n  from=\"de@net\"\n  buffer=\"false\"\n/&gt;\n</code></pre>\n\n<p></p>\n\n<p>\n    </p>\n\n<pre><code>&lt;add name=\"All Errors Default\" eventName=\"All Errors\" provider=\"SimpleMailWebEventProvider\"\nprofile=\"Default\" minInstances=\"1\" maxLimit=\"Infinite\" minInterval=\"00:00:00\" /&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>--update\nThis is MVC3 project</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13039575,"title":"How to conditionally apply a filter in ASP.NET MVC?","body":"<p><br />\nI'm a bit new to ASP.NET MVC and I'm wondering if there is a framework construct that can do what I have described below?:</p>\n\n<p>I would like to apply a filter to a group of controllers/actions based off of some arbitrary criteria.  The key point here is that I want to apply the filters only to certain controllers or actions based on this criteria.  I do NOT want to use an attribute on the controller or the controller action as developers may forget to add these attributes to the controller actions.</p>\n\n<p>This link basically describes what I want: <a href=\"http://haacked.com/archive/2011/04/25/conditional-filters.aspx\" rel=\"nofollow\">http://haacked.com/archive/2011/04/25/conditional-filters.aspx</a></p>\n\n<p>I'm wondering, though, is there an ASP.NET MVC framework construct I can use to do this without having to roll my own?  I'm using ASP.NET MVC 4 by the way.</p>\n\n<p>Thanks very much, sorry if this isn't clear!</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","back-button"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":102,"score":2,"question_id":12962696,"title":"asp.net mvc 3 : how to get data in table on browser back button","body":"<p>my problem is: on my layout page I have links to different dashboards. When I click on a link it displays data in table: Each link calls a action method and get a view which displays data in a html table. \nin each table, there a hyperlink field (column) which displays details about that particular record. This hyperlink calls another action method in controller. \nSo when I click a link on Layout, it displays table and a hyper link in the table displays details about that particular record.\nfrom this details page, when I click on browser back button, I need the data in the currently opened table. but I am not getting this table it is again going to Index action method.\nHow to get this?</p>\n\n<p>help please...</p>\n"},{"tags":["c#","asp.net-mvc","sql-server-2005"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":181,"score":-1,"question_id":9547538,"title":"Assembly for DBDataContext, I am so new","body":"<p>I peek into my classmate's computer program and I see this:</p>\n\n<pre><code>DBDataContext db = new DBDataContext();\n</code></pre>\n\n<p>I try the same but my program reports that There is no <code>DBDataContext</code>, what assembly is it I need to reference now?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13019336,"title":"Hash in Html.BeginForm","body":"<p>This is the row I'm having problems with:</p>\n\n<pre><code>&lt;% using(Html.BeginForm(\"Create#result\", \"Report\", FormMethod.Post)) { %&gt;\n</code></pre>\n\n<p>Using C# 3.5 and MVC2 the form was rendered like this:</p>\n\n<pre><code>&lt;form action=\"/Report.aspx/Create#result\" method=\"post\"&gt;\n</code></pre>\n\n<p>Now with C# 4.0 and MVC2 the form is rendered like this:</p>\n\n<pre><code>&lt;form action=\"/Report.aspx/Create%23result\" method=\"post\"&gt;\n</code></pre>\n\n<p>This causes problems:</p>\n\n<pre><code>System.Web.HttpException (0x80004005): A public action method 'Create#result' was not found\n</code></pre>\n\n<p>I think the new behaviour is problematic and I don't want the hash escaped.\nWhere does it occur?\nCan I change the behaviour?</p>\n\n<p>The MVC version should be updated at some time, but I was working on another part when this behaviour started causing problems.</p>\n\n<h2>Update</h2>\n\n<p>I solved it by updating the form action using jquery on the client.</p>\n\n<p><strong>The form</strong></p>\n\n<pre><code>&lt;% using(Html.BeginForm(\"Create\", \"Report\", FormMethod.Post, new { id = \"frmReport\" })) { %&gt;\n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>var frmReport = $(\"#frmReport\");\nif (0 &lt; frmReport.length) {\n    var action = frmReport.attr(\"action\");\n    action = action + \"#result\";\n    frmReport.attr(\"action\", action);\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13036768,"title":"MVC route conflicts with service route","body":"<p>I'm trying to convert the existing web project to MVC. I made a standard MVC project in VS 2012. It added routing configuration. My existing project already contained routing entry used by WCF services. So now routes are configured like this:</p>\n\n<pre><code>// Was here before, used by services\nroutes.Add(new ServiceRoute(\"AppServer\", new WebServiceHostFactory(), typeof(MyService)));\n\n// the rest is added by vs to configure a default controller\nroutes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\nroutes.MapRoute(\n    name: \"Default\",\n    url: \"{controller}/{action}/{id}\",\n    defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>I realized that service part should always go first because it is more restrictive. Service doesn't work if it is put to the end. But now the problem is that </p>\n\n<pre><code>@Html.ActionLink(\"text\", \"MyAction\", \"MyController\")\n</code></pre>\n\n<p>now generates me the links of type </p>\n\n<pre><code>http://localhost/AppServer?action=MyAction&amp;controller=My\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>http://localhost/My/MyAction\n</code></pre>\n\n<p>what I would expect.</p>\n\n<p>Does anyone know how to make service route and mvc-related routes \"live in peace\" i.e. not to affect each other?</p>\n"},{"tags":["c#","asp.net-mvc","linq","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13033444,"title":"Having an issue with selecting and displaying distinct values in a drop down list","body":"<p>I am attempting to represent the size of an item. We have multiple suppliers and the table we use to store the values of sizes and suppliers means that we have several sizes that equal the same value, but different supplier.</p>\n\n<p>I need to populate the following drop down list, but can't have duplicates of say for example S, M or L:</p>\n\n<pre><code>@Html.DropDownListFor(\n    m =&gt; m.RejectLog.SupplierTypeId, \n    new SelectList(Model.SupplierTypes, \"ID\", \"Size\", \n                   Model.RejectLog.SupplierTypeId), \n    new { \n        @size = Model.SupplierTypes.Count,\n        @class = \"reject-select\",\n        @id = \"Size\",\n        @name = \"Size\"\n    }\n)\n</code></pre>\n\n<p>I have tried adding <code>.Distinct()</code> nearly every place I could. I'm at a loss.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","http"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":133,"score":0,"question_id":5618572,"title":"Retrieve values on server side from tag-it input","body":"<p>I'm using <a href=\"http://levycarneiro.com/projects/tag-it/js/tag-it.js\" rel=\"nofollow\">tag-it</a> plugin and the trouble is to get the values selected on server side. The tags are put into <code>item[tags][]</code> and I hardly see how I can retreive those values on server side in my controller.\nThe post form data looks like this : <code>item%5Btags%5D%5B%5D</code> and then goes the string with the name of the tag.\nThe question is how do I name the variable on the server side so I can access those tag values. It should look something like <code>string[] tags</code> I think.</p>\n\n<hr>\n\n<p>Thank you for your help! </p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13037908,"title":"MVC 3 custom validation","body":"<p>I am working on a MVC 3 app that requires at some point some data from the users. The data is then sent to an external DLL (I am not allowed to change it). The transfer is done by passing an object to a function so that object can be my Model for the View. </p>\n\n<p>The problem is that I do not have access to add Attributes to the Model and I do not what to add a metadata class. </p>\n\n<p>I decided to use a custom validation mechanism using JQuery so I made helper functions like this:</p>\n\n<pre><code>@helper TextBox(string name, object value = null)\n    {\n        var val = value ?? \"\";\n    &lt;tr&gt;\n        &lt;td class=\"label\"&gt;@name :\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"text\" name=\"@name\" id=\"@name\" value=\"@val\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n\n@helper ValidationMessage(string name)\n    {&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-for=\"@name\"&gt;&lt;/span&gt;}\n\n@helper TextBoxRequired(string text, string fildName, object value = null, string message = \"*\")\n    {\n        var val = value ?? \"\";\n    &lt;tr&gt;\n        &lt;td class=\"label\"&gt;@text :&lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"text\" name=\"@fildName\" id=\"@fildName\" value=\"@val\" data-val=\"true\" data-val-required=\"@message\" /&gt;\n            @ValidationMessage(fildName)&lt;/td&gt;\n    &lt;/tr&gt;\n}\n</code></pre>\n\n<p>I've included jquery-1.8.2, jquery.validate and jquery.validate.unobtrusive but it is not working. </p>\n\n<p>Any help is appreciated. </p>\n\n<p>Edit:\nweb config settings:</p>\n\n<pre><code>  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n</code></pre>\n\n<p>And I am using Firefox,Chrome and IE for testing with JavaScript enable.   </p>\n"},{"tags":["jquery","asp.net-mvc","jquery-validation-plugin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13037774,"title":"Is it bad practice to have an ajax call inside of a jQuery validation method? Or, better approach?","body":"<p>Our app is using ASP.NET MVC 3 and I wanted to take advantage of creating a custom validation attribute that worked on both the client and server side. </p>\n\n<p>The user will enter a physician number in an input field. The value is then used to check and see if the physician number entered is actually valid. This requires a call to the database. I have an ajax call inside my validation method. This works fine but only when async is set to false. </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $.validator.setDefaults({\n        debug: true,\n        onkeyup: false,\n        onclick: false,\n        focusInvalid: false\n    })\n\n    $.validator.addMethod('physician', function (value, element, params) \n    {\n        var request = $.ajax({\n            type: \"POST\",\n            url: \"@Url.Content(\"~/patient/GetPhysicianById\")\",\n            data: { physicianNumber: value },\n            async: false,\n            beforeSend: function(xjhr, settings) {                                                                            \n                var siblings = $(element).siblings('.physician-response');                    \n                //$(siblings[0]).html(\"&lt;img src=\\\"/content/images/ajax-loader.gif\\\" /&gt;\");            \n            }                \n        });\n\n        console.log(request);            \n\n        if(request.responseText == \"0\")\n            return false;\n\n        return true;\n    });\n\n    $.validator.unobtrusive.adapters.add('physician', ['param1', 'param2'], function (options) {\n        options.rules['physician'] = options.params;\n        options.messages['physician'] = options.message;\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>On the form, there are three different physician inputs that will trigger this method. Every time blur is lost, it runs these calls again. Also runs when the user clicks save. I'm not certain if this is really the proper approach, or I should handle this validation in a separate manner.  </p>\n"},{"tags":["jquery","asp.net-mvc","editor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12969013,"title":"Converting circular structure to JSON .send html value to the controller","body":"<p>I use editor in my page when i want to update my values with ajax i get this error:\nUncaught TypeError: Converting circular structure to JSON</p>\n\n<p>this is my view:</p>\n\n<pre><code>@{\n    Layout = null;\n}\n\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n    &lt;title&gt;Edit&lt;/title&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n        $(function () {\n            $(\"#editor\").kendoEditor({\n                value: \"@Html.Raw(Model.Content)\"\n            });\n            $(\"#back\").click(function () {\n                $.get('@Url.Action(\"Index\", \"Editor\")', { siteId: \"@ViewBag.SiteId\", widgetId: \"@Model.WidgetId\" },\n                              function (data) {\n                                  $(\"div[data-role='popup']\").remove();\n                                  var indexContent = $(data).find(\"#content\");\n                                  $(indexContent).fadeIn(101);\n                                  $(\"#content\").replaceWith(indexContent);\n                              });\n\n\n            });\n            var content = $(\"#editor\").data(\"kendoEditor\");\n            $(\"#save\").click(function () {\n                var editor = {\n                    Id: 1,\n                    Content: content,\n                    Title: 1,\n                };\n\n                $.ajax({\n                    url: '@Url.Action(\"Update\", \"Editor\")',\n                    type: \"POST\",\n                    contentType: \"application/json charset=UTF-8\",\n                    dataType: \"json\",\n                    data: JSON.stringify(editor),\n\n                });\n    });\n        });\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"editorContainer\"&gt;\n        &lt;div id=\"editorContent\"&gt;\n            &lt;input type=\"text\"  value=\"@Model.Title\" style=\"width:300px\" id=\"title\"/&gt;\n            &lt;textarea id=\"editor\" rows=\"10\" cols=\"30\" style=\"width: 740px; height: 440px\"&gt;\n&lt;/textarea&gt;\n        &lt;/div&gt;\n\n\n    &lt;/div&gt;\n    &lt;button id=\"save\"&gt;ذخیره&lt;/button&gt;\n    &lt;button id=\"back\"&gt;بازگشت&lt;/button&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>in my view i post value with jquery ajax but i get error.</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","dynamic-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13037761,"title":"Creating Dynamic Data Entry User Interfaces","body":"<p>I've been reading the following article on msdn :  <a href=\"http://msdn.microsoft.com/en-us/library/aa479330.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/aa479330.aspx</a> </p>\n\n<p>This is the kind of thing I want to achieve, however I don't want to use plain asp.net and I certainly don't want to make any use of the viewstate.</p>\n\n<p>Anyone can recommend a good article on how to achieve this with maybe asp.net mvc or plain html + jquery ?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13037558,"title":"Is it a good practice to use an MVC application's own Web API for Ajax bindings?","body":"<p>I'm writting an application that has many Ajax widgets (Kendo-UI to be percise). It's starting to get messy to have all those Ajax responses without the standard controllers so I was starting to consider making each entities their own controller. If I'm taking the time to do this, I figured I might as well go foward and do those as WebAPIs since I was planning to do this in a not so close future, but hey, it would be done already...</p>\n\n<p>So my question is: Is it a good practice to use an MVC application's own Web API as a Ajax Widget feeds or is there any reason to stick with standard Controllers?</p>\n\n<p>I've seen some arguments about performance, but I don't think this applies to this situation. I believe it was more of a \"Controller calling WebAPI\" situation which has obvious performance hits. But since it's already a client side Ajax call, weither it goes into a standard MVC Controller or a WebAPI controller shouldn't change a thing, would it?</p>\n\n<p>Edit</p>\n\n<p>Additional information regarding the project:</p>\n\n<ul>\n<li>I am using Entity Framework for the data access.</li>\n<li>I have a repository pattern going on with UnitOfWork.</li>\n<li>I am using proper a MVC structure (EF POCOs AutoMapped to DTO POCOs in the repository and fed into View Models by the controllers)</li>\n<li>This is a MVC 4 project on .NET 4.0</li>\n<li>There is a lot of database relationships (specially for the object I'm working with at the moment)</li>\n</ul>\n"},{"tags":["c#","asp.net","asp.net-mvc","c#-4.0","fakeiteasy"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":13033926,"title":"Dependency injection refactoring","body":"<p>I have this ctor:</p>\n\n<pre><code>    public Section()\n    {\n        _tabs = new TabCollection(this);\n        _sections = new SubSectionCollection(this);\n    }\n</code></pre>\n\n<p>I would like to get something like this:</p>\n\n<pre><code>public Section()\n        : this(new TabCollection(this), new SubSectionCollection(this))\n    {\n\n    }\n\n     public Section(TabCollection tabCollection, IList&lt;ISection&gt; sections)\n     {\n         _tabs = tabCollection;\n         _sections = sections;\n\n     }\n</code></pre>\n\n<p>Of course this doesn't work. Anyone has any suggestion how I could refactor this code? \nI need to do this in order to be able to Mock an object of type Section in Unit Testing. We are using FakeItEasy testing framework.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13037282,"title":"pass linq query to view","body":"<p>I made a linq query which i want to pass to the view but it's giving me this error</p>\n\n<pre><code>The model item passed into the dictionary is of type 'System.Data.Entity.Infrastructure.DbQuery`1[&lt;&gt;f__AnonymousType4`2[System.String,System.String]]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1\n</code></pre>\n\n<p>My ViewModel</p>\n\n<pre><code>  public class ManageScoreViewModel\n     {\n         public string fullName { get; set; }\n         public string teamName { get; set; }\n     }\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>  public ActionResult Index()\n        {\n            MyteamViewModel ms = new MyteamViewModel ();\n            var vm = (from u in db.Users\n                     join tm in db.Team_Members\n                     on u.user_id equals tm.user_id\n                     join t in db.Teams\n                     on tm.team_id equals t.team_id\n                     orderby t.name\n                     select new { fullName = u.firstName + u.lastName, teamName = t.name });\n          //  var vmlist = vm.ToList();\n\n            return View(vm);\n        }\n</code></pre>\n\n<p>The view is type IEnumerable</p>\n\n<pre><code>@model IEnumerable&lt;CTA2._0.ViewModels.ManageScoreViewModel&gt;\n@foreach (var item in Model)\n{\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.fullName)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.teamName)\n        &lt;/td&gt;\n</code></pre>\n\n<p>I tried converting the query to a list(var vmlist = vm.ToList();). Didn't work. Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","back-button","asp.net-mvc-3-areas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":61,"score":0,"question_id":13020930,"title":"Back Button takes to the Previous page with no data MVC 3","body":"<p>I am using ASP.NET MVC3 for my web application. In that application a user has to go through a series of questions and then there is a details page after that (Answer Page). </p>\n\n<p>If user decide to change an answer. They instinctively click the back button and are taken to the previous page. Which happens to be a blank questioner.</p>\n\n<p>I think the back button is refreshing the page. Their previously entered answers are not being populated in the questioner. </p>\n\n<p>How to get same data at previous page, while clicking \"Back\" button on current page </p>\n\n<p>Do you need to handle a event or something for the back ?</p>\n"},{"tags":["asp.net-mvc","dataannotations"],"answer_count":2,"favorite_count":4,"up_vote_count":15,"down_vote_count":0,"view_count":19983,"score":15,"question_id":2001756,"title":"ASP.Net MVC DisplayFormat","body":"<p>In my model I have the following DataAnnotations on one of my properties</p>\n\n<pre><code>[Required(ErrorMessage = \"*\")]\n[DisplayFormat(DataFormatString = \"{0:d}\")]\n[DataType(DataType.Date)]\npublic DateTime Birthdate { get; set; }\n</code></pre>\n\n<p>The required annotation works great, I added the other 2 to try and remove the time. It gets bound to an input in the view using </p>\n\n<pre><code>&lt;%=Html.TextBoxFor(m =&gt; m.Birthdate, new { @class = \"middle-input\" })%&gt;\n</code></pre>\n\n<p>However whenever the view loads I still get the time appearing in the input box. Is there anyway to remove this using DataAnnotations?</p>\n"},{"tags":["asp.net-mvc","dci"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13031476,"title":"Error handling in DCI context?","body":"<p>If I'm using ASP.NET MVC framework, instantiating a Context and something goes wrong in there, is it ok to throw an Exception and let the Controller handle it?</p>\n\n<p>And then for nested contexts, can the outer context catch exceptions thrown by the inner one? I'm thinking because contexts cannot be aware of each other, but on the other hand, an error is an error... Right?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2012","web-publishing"],"answer_count":5,"favorite_count":3,"up_vote_count":26,"down_vote_count":0,"view_count":1850,"score":26,"question_id":12201146,"title":"Visual Studio 2012 Web Publish doesn't copy files","body":"<p>I have a Web Application project in VS 2012 and when I use the web publishing tool it builds successfully but doesn't copy any files to the publish target (File System in this case).</p>\n\n<p>If I look at the build output I can see everything gets copied over to obj\\Release\\Package\\PackageTmp\\ correctly but then all I see in the build output is this:</p>\n\n<blockquote>\n  <p>4>Done building project \"{Project}.csproj\".<br>\n  4>Deleting existing files...<br>\n  4>Publishing folder /...<br>\n  4> ========== Build: 3 succeeded, 0 failed, 1 up-to-date, 0 skipped ==========<br>\n  ========== Publish: 1 succeeded, 0 failed, 0 skipped ==========</p>\n</blockquote>\n\n<p>Even though it says the publish succeeded there are not files in the target directory for the publish.</p>\n\n<p>I have seen this in multiple projects and sometimes it seems like the Solution/Platform configurations cause this problem but I haven't been able to pinpoint an exact cause for this.</p>\n\n<p>Has anyone else seen this happening or have an idea on how to get this working correctly?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I may have found a workaround for this.  I just had this happen again and I was messing around with the publish settings.  Once I changed the selected Configuration on the Settings tab away to another configuration and then back to the one I wanted to use all my files started publishing again.  Hopefully this works on other projects in the future. </p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>I posted a bug on Microsoft Connect and heard back from a developer on the VS Web Developer team.  He said they have fixed this issue in their internal builds and will releasing an update to the publish tool soon that will fix this problem.  </p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13034476,"title":"Localization with ASP.NET MVC using Application_Start to CurrentUiCulture doesn't seem to work?","body":"<p>I have written a small asp.net mvc 3 app and my UI doesn't seem to be changing i have this set in the Application_Start but it never works.</p>\n\n<pre><code>        const string culture = \"en-US\";\n        CultureInfo ci = CultureInfo.GetCultureInfo(culture);\n\n        Thread.CurrentThread.CurrentCulture = ci;\n        Thread.CurrentThread.CurrentUICulture = ci;\n</code></pre>\n\n<p>But if i set the same in the Initialize method of a controller then it works.</p>\n\n<p>But i don't want to override all controllers.</p>\n\n<p>Does it not work form Applicaiton_Start?</p>\n\n<p>I have set a breakpoint and i can see it passing through it.</p>\n\n<p>but in my views i do</p>\n\n<pre><code>   @Index.Test\n</code></pre>\n\n<p>And if set via Application_Start then i always got a non english version (the default in my case)</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13035463,"title":"MVC unobtrusive doesn't work?","body":"<p>I've set <em>jquery.unobtrusive-ajax.js</em> and <em>jquery.js</em> file and in <em>web.config</em> I've set </p>\n\n<pre><code>&lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n&lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n</code></pre>\n\n<p>But it still refreshes the page instead of doing javascript validation.</p>\n\n<p>Also my model has:</p>\n\n<pre><code>[Required(ErrorMessage = \"Reguired\")]\npublic string UserName { get; set; }\n\n[Required(ErrorMessage = \"Reguired\")]\npublic string Password { get; set; }\n</code></pre>\n\n<p>Please help</p>\n"},{"tags":["xml","asp.net-mvc","filestreamresult"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13035201,"title":"Download instead of display (render) generated XML","body":"<p>In a Controller in my ASP.Net MVC app, I serialize a class, and am trying to offer up the contents for immediate download.</p>\n\n<p>So far, I've got my controller returning a <code>FileStreamResult</code></p>\n\n<pre><code>    public FileStreamResult Create(MyViewMode vm)\n    {\n        var xml= _mySerializer.SerializeToXml(vm);\n\n        var ms = new MemoryStream(Encoding.UTF8.GetBytes(xml));\n        return new FileStreamResult(ms, \"application/xml\");\n    }\n</code></pre>\n\n<p>This works, however it's outputting the XML in the browser.</p>\n\n<p>Is there a way I can have it download the file as MyXml.xml for example?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":4,"favorite_count":8,"up_vote_count":20,"down_vote_count":0,"view_count":5520,"score":20,"question_id":4412310,"title":"How to get current controller and action from inside Child action?","body":"<p>I have a portion of my view that is rendered via RenderAction calling a child action. How can I get the Parent controller and Action from inside this Child Action.</p>\n\n<p>When I use..</p>\n\n<pre><code>@ViewContext.RouteData.Values[\"action\"]\n</code></pre>\n\n<p>I get back the name of the Child Action but what I need is the Parent/Calling action.</p>\n\n<p>Thanks</p>\n\n<p>BTW I am using MVC 3 with Razor.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12651553,"title":"How to Display image in a table returned Path from the Json Data","body":"<p>I am new to Ajax and javqscript.</p>\n\n<p>I am returning My list with Image Path through Json. Could anyone tell me the way to display the Image?</p>\n\n<p>I am loading data using Ajax call.</p>\n\n<pre><code>Ajax Call\nvar TableHeaderArray = [\"Person\", \"Details\"]; \n$.ajax({\nurl: '/Home/Persondetails',\ntype: 'POST',\ndataType: \"json\", \nbeforeSend: function () {\n},\nsuccess: function (response) {\n$('#Person').append(CreateHTMLTableFromJSON(response, \"lightPro\", TableHeaderArray)).fadeIn();\n},\nerror: function (error) {\nalert(error);\n}\n});\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Persondetails()\n{\nSqlConnection con = new SqlConnection();\ncon.ConnectionString = ConfigurationManager.ConnectionStrings[\"PersonConnectionString\"].ConnectionString;\ncon.Open();\nSqlCommand cmd = new SqlCommand(\"GetDetails\", con);\ncmd.CommandType = CommandType.StoredProcedure;\ncmd.ExecuteScalar();\nDataSet ds = new DataSet();\nSqlDataAdapter sda = new SqlDataAdapter(cmd);\nsda.Fill(ds);\nList&lt;Person&gt; Details = new List&lt;Person&gt;();\nforeach (DataRow dr in ds.Tables[0].Rows)\n{\nDetails.Add(new Person()\n{\nId = dr[\"Id\"].ToString(),\nName = dr[\"Name\"].ToString(),\nAge = dr[\"Age\"].ToString(),\nJob = dr[\"Job\"].ToString(),\nimages = dr[\"Images\"].ToString(),\n});\n}\nreturn Json(Details);\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13034843,"title":"Bad IIS 7.5 Performance on Webserver","body":"<p>I have a webpage (ASP.NET 4.0 / MVC 4).</p>\n\n<p>On my development machine (i5-2500 3.3 8GB Win7 VS2010 SP1 Fujitsu Esprimo P700) the page performs with 160 requests/sec on devenv webserver on my machine. The page performs with 250 requests/sec on my local IIS 7.5. (uncompiled web)</p>\n\n<p>The page performs with 20 requests per second on a 16core 32gb ram production server (Fujitsu RX-300 w2k8 rc2 IIS 7.5). (compiled web)</p>\n\n<p>Why? I think it's the IIS configuration but i can't figure out whats the problem. The page runs with 1 worker process on both machines. Web garden is not an option (it helps but the app isnt compatible with) </p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":18,"favorite_count":77,"up_vote_count":137,"down_vote_count":0,"view_count":41046,"score":137,"question_id":388483,"title":"How do you create a dropdownlist from an enum in ASP.NET MVC?","body":"<p>I'm trying to use the Html.DropDownList extension method but can't figure out how to use it with an enumeration.</p>\n\n<p>Let's say I have an enumeration like this:</p>\n\n<pre><code>public enum ItemTypes\n{\n    Movie = 1,\n    Game = 2,\n    Book = 3\n}\n</code></pre>\n\n<p>How do I go about creating a dropdown with these values using the Html.DropDownList extension method?  Or is my best bet to simply create a for loop and create the html elements manually?</p>\n"},{"tags":["c#","asp.net-mvc","forms","combine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":89,"score":0,"question_id":13032995,"title":"Trying to combine ASP.NET MVC 3.0 and an associated Windows Forms application","body":"<p>I have an existing Windows Forms application and an existing ASP.NET MVC 3.0 application. These are in C#. </p>\n\n<p>The ASP.NET component is Entity Framework. It is going to be what the \"users\" see in a web browser and uses (for now) AJAX to update the data to them, but I'll move to Sockets in another version. It uses a Code-First method to create the database.</p>\n\n<p>The Windows Forms application is a typical C# program that has a few functions. It's the \"admin\" tool. It will be used to create and edit data for the database, as well as \"save\" and \"load\" databases into XML or similar. It will allow for manipulation of user accounts and editing of rules. </p>\n\n<p>The workflow should be that the owner of the software installs the program and it creates the database. The owner uses the web server flavor of choice, but I'll assume IIS. That owner then invites some friends over (or links up with them online) while hosting the website on the same machine as the installation.  The admin program is used by the administrator to manage the database and special requests from users, as well as push/pull data to/from a database via other files.  This is because there may be multiple databases, but I only want one \"active\" database, and all of them will follow the exact same schema.  Inactive databases will be encrypted and exported as files to prevent the use of third party applications to modify that data. When needed again, the one loaded into the single database in use will be \"pushed\" and encrypted, and the one needed will be decrypted and import its data to the database. </p>\n\n<p>How can I combine my two separate applications, which are presently in the same VS 2010 Solution, so I can use the same entities and connections as in the ASP.NET portion in the Windows Forms portion?  I tried simply adding the Forms namespace to the project for ASP.NET, but the templates don't load, and simply copying forms into the project bombs.   I do not want the Administrator to access via a web browser; they should be using the Windows Forms application.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13027245,"title":"how to replace underline with dash in inside area?","body":"<p>I'm using asp.net MVC 3 for my website , I want to replace underlines with dashes in my addresses . I can do it . but when I want to replace them inside a area I can't do it . </p>\n\n<p>who can help me ?</p>\n\n<p>this is my code : </p>\n\n<pre><code>public class HyphenatedRouteHandler : MvcRouteHandler\n        {\n            protected override IHttpHandler GetHttpHandler(RequestContext requestContext)\n            {\n                requestContext.RouteData.Values[\"controller\"] = requestContext.RouteData.Values[\"controller\"].ToString().Replace(\"-\", \"_\");\n                requestContext.RouteData.Values[\"action\"] = requestContext.RouteData.Values[\"action\"].ToString().Replace(\"-\", \"_\");\n                return base.GetHttpHandler(requestContext);\n            }\n        }\n</code></pre>\n\n<p>and this is my area route : </p>\n\n<pre><code>context.MapRoute(\n                \"products_default\",\n                \"products/{controller}/{action}\",\n                new { controller = \"All\", action = \"Index\" }\n            );\n</code></pre>\n\n<p>I want to navigate this address :</p>\n\n<p>localhost:1559/products/store-builder/boronz</p>\n\n<p>product is my area name . of course when I navigate this address :</p>\n\n<p>localhost:1559/products/store_builder/boronz</p>\n\n<p>it shows page . </p>\n\n<p><strong>EDIT :</strong> </p>\n\n<p>I use this for my area route but it can't detect this is an area :</p>\n\n<pre><code>//context.Routes.Add(\n//    new Route(\"products/{controller}/{action}\",\n//    new RouteValueDictionary(\n//        new { controller = \"\", action = \"Index\" }),\n//        new MyProject.MvcApplication.HyphenatedRouteHandler())\n//);\n</code></pre>\n\n<p>how can I fix this ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","multi-tenant"],"answer_count":4,"favorite_count":18,"up_vote_count":4,"down_vote_count":0,"view_count":2724,"score":4,"question_id":1699913,"title":"Setup a route {tenant}/{controller}/{action}/{id} with ASP.NET MVC?","body":"<p>I would like to setup a multi-tenant ASP.NET MVC app. Ideally, this app would have a route with <code>{tenant}/{controller}/{action}/{id}</code>, each <code>tenant</code> representing an logical instance of the app (simply independent multi-user accounts)</p>\n\n<p>The fine grained details how do that are still quite unclear to me. Any guide available to setup such multi-tenant scheme with ASP.NET MVC?</p>\n"},{"tags":["c#","asp.net-mvc","paypal"],"answer_count":4,"favorite_count":4,"up_vote_count":4,"down_vote_count":1,"view_count":3974,"score":3,"question_id":4494745,"title":"PayPal API with ASP.NET MVC","body":"<p>Is it the paypal API compatible with asp.net MVC? \nDoes anyone know of any expamples of how to implement it?\nThank you.</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","t4mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13033228,"title":"T4MVC: Link to resource file at Root","body":"<p>Is there a way to link to a resource in the root using T4MVC? I have a couple of .xml files at the root, but when I can't seem to make the \"Links\" namespace get to them. I tried changing the StaticFilesFolders array in T4MVC.tt.settings.t4, but:</p>\n\n<ul>\n<li><p>VS2010 isn't treating it as though as that file has code in it (I don't know if it is suppossed to be like this, but IntelliSense isn't working there; I see everything as plain text).</p></li>\n<li><p>Links still only has bundles, Scripts and Content as members.</p></li>\n</ul>\n\n<p>Any idea?</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13032727,"title":"About Lists and Objects","body":"<p>This works:</p>\n\n<pre><code>data.Add(New Object() {activityDate, types(\"Aerobics - low\"), types(\"Aerobics - high\")})\n</code></pre>\n\n<p>However, I need for the second and third variables to be database driven (coming from a List in the following example):</p>\n\n<pre><code>Dim var1 = New List(Of Object)\nvar1.Add(types(\"Aerobics - low\"))\nvar1.Add(types(\"Aerobics - high\"))\ndata.Add(New Object() {activityDate, var1.ToList})\n</code></pre>\n\n<p>This doesn't seem to work.  How do I put my objects inside of another object?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I have also tried <code>data.Add(New Object() {activityDate, var1.ToArray})</code> but that doesn't work either.  I just want to get the dynamic elements of my list into an object of the format above.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12939364,"title":"Can't Use Path in ASP MVC Action","body":"<p>I am trying to use Path() but it has a blue line under it and says, \"local variable (path) cannot be referred to until it is declared.\"  How can I use Path()?</p>\n\n<pre><code>Imports System.Globalization\nImports System.IO\n\nPublic Class MessageController\n    Inherits System.Web.Mvc.Controller\n\n    &lt;EmployeeAuthorize()&gt;\n    &lt;HttpPost()&gt;\n    Function SendReply(ByVal id As Integer, ByVal message As String, ByVal files As IEnumerable(Of HttpPostedFileBase)) As JsonResult\n\n\n            ' upload files\n            For Each i In files\n\n                If (i.ContentLength &gt; 0) Then\n\n                    Dim fileName = path.GetFileName(i.FileName)\n                    Dim path = path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName)\n                    i.SaveAs(path)\n\n                End If\n\n            Next\n\n\n    End Function\n\nEnd Class\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","caching"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12860332,"title":"Does ASP MVC use a cached production database?","body":"<p>Someone changed my admin password that I use to login to my website.  I changed it back, and I can now log in to the MVC site on localhost.  However, it won't log in on the server when I publish the site out.  This happened yesterday, too, but eventually the production server started letting me log in again.  They both use the same database.  There seems to simply be a a time delay or some sort of caching going on here.  Does ASP MVC do something like this?  Does anyone know how to refresh it so that I can log in to both sites again?</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13030008,"title":"Daypilot with MVC3 Assembly","body":"<p>I have been trying to add daypilot to my project. </p>\n\n<p>I have added all the code I thought I needed but this error I'm getting is confusing me. \nI'm guessing i have a incompatible version of daypilot?? </p>\n\n<p>My error is displayed in this photo.\n<a href=\"http://imageshack.us/photo/my-images/854/mvc3r.png/\" rel=\"nofollow\">http://imageshack.us/photo/my-images/854/mvc3r.png/</a></p>\n"},{"tags":["asp.net","asp.net-mvc","form-validation","html-encode"],"answer_count":22,"favorite_count":102,"up_vote_count":334,"down_vote_count":0,"view_count":176846,"score":334,"question_id":81991,"title":"A potentially dangerous Request.Form value was detected from the client","body":"<p>Everytime a user posts something containing &lt; or > in a page in my webapp, I get this exception thrown.</p>\n\n<p>I don't want to go into the discussion about the smartness of throwing an exception or crashing an entire webapp because somebody entered a character in a textbox, but I am looking for an elegant way to handle this.</p>\n\n<p>Trapping the exception and showing \"An error has occured please go back and re-type your entire form again, but this time please do not use &lt;\" doesn't seem professional enough to me</p>\n\n<p>Disabling post validation ( validateRequest=\"false\" ) will definitelly avoid this error, but it will leave the page vulnerable to a number of attacks. </p>\n\n<p>Ideally: when a postback occurs containing HTML restricted caracters, that posted value in the Form collection will be automatically HTML encoded.\nSo the .Text property of my text-box will be \" something &amp; lt; html &amp; gt; \"</p>\n\n<p>Any way I can do this from a handler? </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","unit-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13032575,"title":"Testing MVC Controller Action from raw POST data","body":"<p>I have a 3rd party vendor I want to integrate with my web site. I have a sample of the POST data they will be sending to me and I want to be able to write a unit test to verify I can process it from my controller action.</p>\n\n<p>Ideally I could have a unit test that loads the raw POST data from a file and I can invoke the action using that as input.</p>\n\n<p>What is the best approach? Or perhaps a testing framework for this?</p>\n"},{"tags":["asp.net-mvc","razor","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13031649,"title":"Objects in ICollection not passed with model to view","body":"<p>I'm trying to create a site with news that can have comments. I've been following guides from pluralsight.com and I've followed what is done in the guide to the letter but when i debug and look at what's inside the model at runtime the comments aren't included.</p>\n\n<p>My DB class:</p>\n\n<pre><code>public class ProjectDB {\n        public DbSet&lt;ContentNode&gt; ContentNodes{ get; set; }\n        public DbSet&lt;Comment&gt; Comments { get; set; }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n\n            base.OnModelCreating(modelBuilder);\n\n            modelBuilder.Entity&lt;ContentNode&gt;()\n                .Property(n =&gt; n.ID).HasColumnName(\"NodeID\");\n            modelBuilder.Entity&lt;ContentNode&gt;()\n                .HasMany(node =&gt; node.Comments)\n                .WithRequired(comment =&gt; comment.Node);\n        }\n}\n</code></pre>\n\n<p>The models involved:</p>\n\n<pre><code>    public class ContentNode : Node\n    {\n        public ContentType ContentType { get; set; }\n        public ContentCategory Category { get; set; }\n        public ICollection&lt;Comment&gt; Comments { get; set; }\n\n        public ContentNode()\n        {\n            Comments = new List&lt;Comment&gt;();\n        }\n    }\n\n    public class Comment\n    {\n        public int ID { get; set; }\n        public ContentNode Node { get; set; }\n        public string Body { get; set; }\n    }\n</code></pre>\n\n<p>The controller method that pulls the news article from the db and sends it to the view</p>\n\n<pre><code>[GET(\"frettir/{year}/{month}/{day}/{title}\")]\npublic ActionResult GetArticle( int year, int month, int day, string title)\n{\n    var model = (from f in _db.ContentNodes\n                 where f.dateCreated.Year == year &amp;&amp;\n                       f.dateCreated.Month == month &amp;&amp;\n                       f.dateCreated.Day == day &amp;&amp;\n                       f.Title == title &amp;&amp;\n                       f.ContentType.ID == 1\n                 select f).Single();\n\n    return View(model);\n}\n</code></pre>\n\n<p>And finally the view itself:</p>\n\n<pre><code>@model Project.Models.ContentNode\n\n@{\n    ViewBag.Title = \"GetByID\";\n}\n\n&lt;h2&gt;GetByID&lt;/h2&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;News&lt;/legend&gt;\n\n    &lt;div class=\"display-label\"&gt;\n         @Html.DisplayNameFor(model =&gt; model.Title)\n    &lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;\n        @Html.DisplayFor(model =&gt; model.Title)\n    &lt;/div&gt;\n\n    &lt;div class=\"display-label\"&gt;\n         @Html.DisplayNameFor(model =&gt; model.Body)\n    &lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;\n        @Html.DisplayFor(model =&gt; model.Body)\n    &lt;/div&gt;\n\n    &lt;div class=\"display-label\"&gt;\n         @Html.DisplayNameFor(model =&gt; model.dateCreated)\n    &lt;/div&gt;\n    &lt;div class=\"display-field\"&gt;\n        @Html.DisplayFor(model =&gt; model.dateCreated)\n    &lt;/div&gt;\n&lt;/fieldset&gt;\n&lt;p&gt;\n    @Html.ActionLink(\"Edit\", \"Edit\", new { id=Model.ID }) |\n    @Html.ActionLink(\"Back to List\", \"Index\")\n&lt;/p&gt;\n\n    @foreach (var item in Model.Comments)\n    {\n        @Html.Partial(\"_Comment\",item)\n    }\n\n@Html.ActionLink(\"New comment\", \"Create\", \"Comment\", new { NodeID = Model.ID }, null)\n</code></pre>\n\n<p>I've looked at examples and I've looked over the video guide a dozen times to see what i did wrong. The only solution that I've come up with is joining the NodeContent table with the Comments table and projecting it into another model but from what i can gather that shouldn't be required.</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["asp.net-mvc","http","iis7","https","url-rewriting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13028223,"title":"URL Rewrite on IIS from http to https is not working,","body":"<p>I have a problem. On <code>IIS</code> I got a web-site with two ports <code>80</code> and <code>443(https)</code>. I want to redirect all the <code>http</code> requests from user to <code>https</code>. I also added <code>Rewrite rule to https</code>, but when I enter in browser <code>http://localhost/site</code> it gives me the same page. I need to redirect user to <code>httpS://localhost/site</code>.</p>\n\n<p>Maybe this is because of my local configurations? </p>\n\n<p>And I disable <code>Require SSL</code> on <code>IIS</code>.</p>\n\n<pre><code>The rule is:\n&lt;rewrite&gt;\n  &lt;rules&gt;\n    &lt;rule name=\"HTTPS Redirect\"&gt;\n      &lt;match url=\"(.*)\" ignoreCase=\"false\" /&gt;\n      &lt;conditions&gt;\n        &lt;add input=\"{HTTPS}\" pattern=\"off\" ignoreCase=\"false\" /&gt;\n      &lt;/conditions&gt;\n      &lt;action type=\"Redirect\" redirectType=\"Found\" url=\"https://{HTTP_HOST}{REQUEST_URI}\" /&gt;\n    &lt;/rule&gt;\n  &lt;/rules&gt;\n&lt;/rewrite&gt;\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":11,"favorite_count":14,"up_vote_count":25,"down_vote_count":0,"view_count":7715,"score":25,"question_id":214583,"title":"Adding \"active\" tag to navigation list in an asp.net mvc master page","body":"<p>In the default asp.net mvc project, in the Site.Master file, there is a menu navigation list:</p>\n\n<pre><code>&lt;div id=\"menucontainer\"&gt;\n    &lt;ul id=\"menu\"&gt;              \n        &lt;li&gt;&lt;%= Html.ActionLink(\"Home\", \"Index\", \"Home\")%&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;%= Html.ActionLink(\"About Us\", \"About\", \"Home\")%&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This renders in the browser to:</p>\n\n<pre><code>&lt;div id=\"menucontainer\"&gt; \n    &lt;ul id=\"menu\"&gt;              \n        &lt;li&gt;&lt;a href=\"/\"&gt;Home&lt;/a&gt;&lt;/li&gt; \n        &lt;li&gt;&lt;a href=\"/Home/About\"&gt;About Us&lt;/a&gt;&lt;/li&gt; \n    &lt;/ul&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p>I want to be able to dynamically set the active list item, based on the view that is being called.  That is, when the user is looking at the home page, I would want the following HTML to be created:</p>\n\n<pre><code>&lt;div id=\"menucontainer\"&gt; \n    &lt;ul id=\"menu\"&gt;              \n        &lt;li class=\"active\"&gt;&lt;a href=\"/\"&gt;Home&lt;/a&gt;&lt;/li&gt; \n        &lt;li&gt;&lt;a href=\"/Home/About\"&gt;About Us&lt;/a&gt;&lt;/li&gt; \n    &lt;/ul&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p>I would expect that the way to do this would be something like:</p>\n\n<pre><code>&lt;div id=\"menucontainer\"&gt;\n    &lt;ul id=\"menu\"&gt;              \n        &lt;li &lt;% if(actionName == \"Index\"){%&gt; class=\"active\"&lt;%}%&gt;&gt;&lt;%= Html.ActionLink(\"Home\", \"Index\", \"Home\")%&gt;&lt;/li&gt;\n        &lt;li &lt;% if(actionName == \"About\"){%&gt; class=\"active\"&lt;%}%&gt;&gt;&lt;%= Html.ActionLink(\"About Us\", \"About\", \"Home\")%&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The key bit here is the <code>&lt;% if(actionName == \"Index\"){%&gt; class=\"active\"&lt;%}%&gt;</code> line.  I do not know how to determine what the current actionName is.</p>\n\n<p>Any suggestions on how to do this?  Or, if I'm on completely the wrong track, is there a better way to do this?</p>\n"},{"tags":["asp.net-mvc","html5","twitter-bootstrap","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13017418,"title":"Data-bound h1 tag not showing up (knockoutjs)","body":"<p>I've got a simple view-model going in KO:</p>\n\n<pre><code>        function TemplateFile(name, fileName) {\n            var self = this;\n            self.name = name;\n            self.fileName = fileName;\n        }\n\n        var layoutViewModel = {\n            loggedInUser: ko.observable(\"user\"),\n            templateFiles: ko.observableArray([\n                // some initial entries...\n            ]),\n            contentHeading: ko.observable(\"Content\"),\n            // some other things...\n        };\n\n        $(function () { ko.applyBindings(layoutViewModel); });\n</code></pre>\n\n<p>And the data is bound in various points in my _Layout.cshtml partial view, most of them working fine. Except for this one...</p>\n\n<pre><code>        &lt;!-- Page content --&gt;\n        &lt;div class=\"container-fluid\" \n             style=\"background-color: white; border-radius: 10px; margin: 20px; min-height: 400px; height: auto !important; height: 400px\"&gt;\n            &lt;div class=\"row-fluid\"&gt;\n                &lt;div class=\"span12\"&gt;\n                    &lt;h1 data-bind=\"text: contentHeading\" style=\"color: darkgray;\" /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"row-fluid\"&gt;\n                &lt;div class=\"span12\"&gt;\n                    @RenderBody()\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>(ignore the inline CSS, that will be fixed soon ;))</p>\n\n<p>The \"contentHeading\" data that's being bound to the h1 is not showing up at all. I tried several things already...</p>\n\n<ul>\n<li>Switching out the data that's being bound: still didn't show up</li>\n<li>Moving the tag around to different parts of the page: some worked, some randomly didn't</li>\n<li>Hard coding a dummy text value: this DID show up</li>\n</ul>\n\n<p>So, given those results, I'm thinking there might be an issue with the how some of the DOM elements are being loaded, perhaps because I'm using Twitter Bootstrap?</p>\n\n<p>I'm at a loss here, and can't seem to find a similar issue from anyone else. Any suggestions?</p>\n\n<pre><code>&lt;ul class=\"dropdown-menu\" data-bind=\"foreach: templateFiles\"&gt;\n    &lt;li&gt;\n        &lt;a href=\"#\" data-bind=\"attr: { title: fileName}\" /&gt;\n        &lt;span data-bind=\"text: name\" /&gt;\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","security","asp.net-web-api","wif",".net-4.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12936315,"title":"How to Make Sure My Custom ClaimsPrincipal Sticks Around In ASP.NET MVC 4","body":"<p>I am creating a custom <strong><em>ClaimsPrincipal</em></strong> that has additional claims using a custom <strong><em>AuthenticationManager</em></strong>.  It appears that in ASP.NET 4.5 the <strong><em>AuthenticationManager</em></strong> is not automatically invoked and you have to manually invoke it. I have seen posts that suggest you do this in the <strong><em>PostAuthenticateRequest</em></strong>. My code looks like this in the Global.asax:</p>\n\n<pre><code>protected void Application_OnPostAuthenticateRequest(object sender, EventArgs e)\n{\n    System.Web.HttpContext.Current.User =\n        FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager.Authenticate(\"none\",\n            System.Web.HttpContext.Current.User as ClaimsPrincipal);\n}\n</code></pre>\n\n<p>I am using Forms Authentication with cookies.  The current principal gets set correctly when the PostAuthenticateRequest is fired. The problem is that when the next request comes in to the ASP.NET Web API the custom claims are lost. I am using Web API for AJAX requests in a single page application (SPA). I suspect that what is in the current ClaimsPrincipal is being overwritten by what is in the cookie, but I am not sure. I am not using an inherited ClaimsPrincipal for type-safe retrieval of custom claims. I am just adding new claims which are subsequently lost somewhere in the process. What is the proper way to setup a custom ClaimsPrincipal so the additional claims are not loss between requests.</p>\n"},{"tags":["c#","asp.net-mvc","popup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":63,"score":0,"question_id":13030289,"title":"Issue with @html.password","body":"<p>I'm using <code>@Html.Password(\"Password\", ViewData[\"password\"])</code> for displaying password in popup, the password is being displayed and I should be able to edit and update it. After editing  it, when I click save button password is not being updated.</p>\n\n<p><code>ModelState.IsValid</code> is giving <code>false</code> and the method is being skipped.</p>\n"},{"tags":["sql-server","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13028791,"title":"MVC Refactoring Approach? How to introduce more generic functionality?","body":"<p>I am developing a complex wizard driven document creation application. I understand the initial domain's requirement and thus can create an explicit database model for this using explicit column names. Also I am a slight novice with MVC. I know that I will need to make the application more generic ie the Wizard will change, different attributes will need to be stored. My current view/instinct is to implement what is known at present using the most traditional techniques that the tools MVC/EF most closely support then refactor to support the more generic functionality at a later date using technologies such as XML features in SQL Server and WF Foundation etc. Doing all this now seems a big step.</p>\n\n<p>So my question is about the virtue of keeping it simple to start with then refactor in the more sophisticated features later on, rather than building it generic to start with.</p>\n\n<p>Thoughts and wisdom great appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","mvc","controller","refactoring"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":13028317,"title":"How to factor error-handling code out of an MVC controller?","body":"<p>Most of the time, I can figure out how to factor out business logic from an MVC controller into a service or a model.  However the exception to this is error handling, which it seems to me is the controller's responsibility.  However, it can lead to rather \"un-skinny\" controllers.  For example:</p>\n\n<pre><code>if ((foundEvent = repoEvent.GetEventById(id)) == null) {\n    return HttpNotFound(\"Could not find event with id {0}.\".FormatWith(id));\n}\n\nvar assessment = isSample ? foundEvent.SampleAssessment : foundEvent.ActualAssessment;\nif (assessment == null) {\n    return HttpNotFound(\"Could not find {0}assessment for event with id {1}\".FormatWith(isSample ? \"sample \" : \"\", id));\n}\n\nif (assessment.UnmappedCaseStudiesCount == 0) {\n    TempData[TempDataKeys.ErrorMessage.GetEnumName()] = \"This assessment (\\\"{0}\\\") has no case studies!\".FormatWith(assessment.Name);\n    return RedirectToAction(\"Index\", \"Events\");\n}\n</code></pre>\n\n<p>In all the cases above, it seems to me that the logic does belong in the controller because the controller is setting up error messages rather than returning a view (this is re-enforced by the fact that things like <code>HttpNotFound</code> and <code>RedirectToAction</code> are members of the <code>Controller</code> class, and so are unavailable to classes that don't extend <code>Controller</code>).  However you can see how this would get long and messy after a short while.  Is there a way to factor out this kind of error handling in the controller to make the controller more \"skinny\", or does this stuff simply belong in the controller?</p>\n\n<p>Here's a larger snippet of code indicating how I refactored to allow 2 action methods to use the same view model setup code.  However, it still results in 90+ lines of code in the controller just for 2 action methods; again, not a very \"skinny\" controller:</p>\n\n<pre><code>#region Private methods\nprivate StartAssessmentViewModel getStartViewModel(int eventId, bool isSample, out ActionResult actionRes) {\n    actionRes = null;\n\n    EventRepository repoEvent = new EventRepository();\n    Event foundEvent;\n    if ((foundEvent = repoEvent.GetEventById(eventId)) == null) {\n        actionRes = HttpNotFound(\"Could not find event with id {0}.\".FormatWith(eventId));\n        return null;\n    }\n\n    var assessment = isSample ? foundEvent.SampleAssessment : foundEvent.ActualAssessment;\n    if (assessment == null) {\n        actionRes = HttpNotFound(\"Could not find {0}assessment for event with id {1}\".FormatWith(isSample ? \"sample \" : \"\", eventId));\n        return null;\n    }\n\n    if (assessment.UnmappedCaseStudiesCount == 0) {\n        TempData[TempDataKeys.ErrorMessage.GetEnumName()] = \"This assessment (\\\"{0}\\\") has no case studies!\".FormatWith(assessment.Name);\n        actionRes = RedirectToAction(\"Index\", \"Events\");\n        return null;\n    }\n\n    try {\n        // Has the assessment finished? (samples don't count)\n\n        UserAssessmentRepository repoUa = new UserAssessmentRepository();\n        var foundUa = repoUa.GetUserAssessment(foundEvent.EventId, assessment.AssessmentId, User.Identity.Name);\n        // TODO: check that foundUa.Assessment.IsSample is OK; may need to make .Assessment a concrete instance in the repo method\n        if (foundUa != null &amp;&amp; !foundUa.Assessment.IsSample) {\n            if (_svcAsmt.IsAssessmentFinished(foundUa)) {\n                // TODO: test that this way of displaying the error works.\n                TempData[TempDataKeys.ErrorMessage.GetEnumName()] = \"You have already completed the assessment for this event ('{0}'); you cannot start it again.\".FormatWith(foundEvent.Name);\n                actionRes = RedirectToAction(\"Index\", \"Events\");\n                return null;\n            }\n\n            // Has it been started already?\n            if (_svcAsmt.IsAssessmentStarted(foundEvent.EventId, foundUa.AssessmentId, User.Identity.Name)) {\n                actionRes = RedirectToAction(\"Question\", new { id = foundUa.UserAssessmentId });\n                return null;\n            }\n        }\n\n        return Mapper.Map&lt;StartAssessmentViewModel&gt;(assessment);\n    }\n    catch (Exception ex) {\n        TempData[TempDataKeys.ErrorMessage.GetEnumName()] = \"Could not display start screen for assessment {0} on event {1}; error: {2}\".FormatWith(assessment.AssessmentId, foundEvent.EventId, ex.Message);\n        actionRes = RedirectToAction(\"Index\", \"Events\");\n        return null;\n    }\n}\n#endregion\n\npublic ActionResult Start(int id, bool isSample = false) {\n    // Set up view model\n    ActionResult actionRes;\n    StartAssessmentViewModel viewModel = getStartViewModel(id, isSample, out actionRes);\n    if (viewModel == null) {\n        return actionRes;\n    }\n\n    return View(viewModel);\n}\n\n[HttpPost, ActionName(\"Start\")]\npublic ActionResult StartConfirmed(int id, StartAssessmentViewModel viewModel) {\n    // Set up view model\n    ActionResult actionRes;\n    StartAssessmentViewModel newViewModel = getStartViewModel(id, viewModel.AssessmentIsSample, out actionRes);\n    if (newViewModel == null) {\n        return actionRes;\n    }\n\n    if (!ModelState.IsValid) {\n        return View(newViewModel);\n    }\n\n    // Model is valid; if it's not a sample, we need to check the access code\n    if (!viewModel.AssessmentIsSample) {\n        if (viewModel.AccessCode != \"12345\") {\n            // Invalid access code\n            TempData[TempDataKeys.ErrorMessage.GetEnumName()] = \"The access code '{0}' is incorrect.\".FormatWith(viewModel.AccessCode);\n            return View(newViewModel);\n        }\n    }\n\n    // Access code is valid or assessment is sample; redirect to first question\n    return RedirectToAction(\"Question\", new { id = 1 });\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":134,"score":3,"question_id":13016940,"title":"ASP.Net MVC4 Membership","body":"<p>I have just started learning ASP.NET MVC(4). For practice purpose I am starting with a micro blogging project. So it will obviously have user database. When I create ASP.Net MVC4 project, it comes with Membership module that already exists (AccountsController.cs, AccountModel.cs and view files).</p>\n\n<p>I don't have database right now so I will be using EF with design / model first approach. I tried creating a sample application with database. When I registered a user (with registration page provided by Asp.Net MVC4) I couldn't see any user table in my database. I want to know where are the tables having information about user, userrole. I don't find it in my database.</p>\n\n<p>One more thing, should I use MVC4 Authentication or create a new table for Users?</p>\n\n<p>Help me with this please..</p>\n\n<p>Regards,\nRahul</p>\n"},{"tags":["asp.net-mvc","razor","html-helper"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13029964,"title":"Html.EditorFor ignoring my specified class","body":"<p>I have a model like:</p>\n\n<pre><code>public class MyModel {\n    public string Name {get; set;}\n    public DateTime StartDate {get; set;}\n}\n</code></pre>\n\n<p>Then, in my Razor view, I have this:</p>\n\n<pre><code>@Html.EditorFor(x =&gt; x.StartDate, new { @class = \"input datepicker\" })\n</code></pre>\n\n<p>The outputted HTML however, looks like this:</p>\n\n<pre><code>&lt;input class=\"text-box single-line\" data-val=\"true\" \n data-val-required=\"The StartDate field is required.\" id=\"StartDate\" \n name=\"StartDate\" type=\"text\" value=\"01/01/0001 00:00:00\"&gt;\n</code></pre>\n\n<p>It seems to be completely ignoring my <code>@class</code> definition (as well as adding validation stuff of its' own)</p>\n\n<p>Is there a way of making it render with my specified class?</p>\n"},{"tags":["c#","asp.net-mvc","localization","internationalization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":11721520,"title":"ASP.NET MVC news article alternative language version","body":"<p>I have a requirement to add an alternative language version of a single article in an ASP.NET MVC project. I currently have a db table called NewsArticle which has the fields ArticleId,                                  Abstract, Headline, BodyText, and ImageUrl. I would like to essentially have an option when authoring a news article that provides the author with a field to enter an alternative langauge version of the article. This alternative content can then be displayed on the news articles view for that particular language through the language-switching control of the site. </p>\n\n<p>Can anyone point me towards the right direction in as far re-designing the existing model to include this requirement?</p>\n"},{"tags":["jquery","asp.net-mvc","c#-4.0","razor"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":1,"question_id":13008056,"title":"how do i show popup/alert and then RedirectToAction()","body":"<p>I wish to display a Javascript type popup to alert the user that he has to fill in some additional data in a previous View before continue processing this View, and then actually redirect the user to that View.</p>\n\n<p>At the moment my code is as follows :-</p>\n\n<pre><code>        if (viewModel.compData.GG != \"\")\n            CalcGradingPoints();\n        else\n        {\n            Response.Write(@\"&lt;script language='javascript'&gt;alert('You have to Select a Grading before doing this calculation');&lt;/script&gt;\");\n            return RedirectToAction(\"Index\", \"Grading\");\n        }\n\n        return View(viewModel);\n</code></pre>\n\n<p>It is redirecting correctly, however I cannot see the error message, so for the user, it is like he is stuck on the first View and not moving.</p>\n\n<p>How can I display an error message, allow the user to confirm that he saw the message by clicking the message, and then redirecting?</p>\n\n<p>Thanks for your help and time</p>\n"}]}
{"total":44785,"page":15,"pagesize":100,"questions":[{"tags":["asp.net-mvc","html-encode"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1910,"score":2,"question_id":3858807,"title":"How do you handle line breaks in HTML Encoded MVC view?","body":"<p>I am unsure of the best way to handle this.  In my index view I display a message that is contained in <code>TempData[\"message\"]</code>.  This allows me to display certain error or informational messages to the user when coming from another action (for example, if a user tries to enter the Edit action when they don't have access, it kicks them back to the Index with a message of \"You are not authorized to edit this data\").</p>\n\n<p>Prior to displaying the message, I run <code>Html.Encode(TempData[\"message\"])</code>.  However, I have recently come into the issue where for longer messages I want to be able to separate the lines out via line breaks (<code>&lt;br&gt;</code>).  Unfortunately (and obviously), the <code>&lt;br&gt;</code> gets encoded by <code>Html.Encode</code> so it doesn't cause an actual line break.</p>\n\n<p>How do I process line breaks correctly in Html Encoded strings?</p>\n"},{"tags":["javascript","asp.net-mvc","treeview","devexpress","contextmenu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13011822,"title":"Adding a context menu to a DevExpress MVC Extension treeview","body":"<p>I have been following <a href=\"http://www.devexpress.com/Support/Center/Example/Details/E4277\" rel=\"nofollow\">this example</a> on how to get a context menu working with the tree view extension, and for now, I have just tried to implement the same functionality as is in the example to my application. When I run the application, the context menu does not work, but debugging the javascript shows an error: </p>\n\n<blockquote>\n  <p>Uncaught TypeError: Object 1 has no method 'GetHtmlElement'</p>\n</blockquote>\n\n<p>When it jumps out of the init function to the ProcessNode function. Is there any known reason why this is happening? I have looked around the documentation and what not and to no avail.</p>\n\n<p>If you need any more information from me, just leave a comment and I will provide what I can.</p>\n"},{"tags":["asp.net-mvc","iis7","asp.net-mvc-routing","asp.net-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12977929,"title":"URL Rewriting issues with MVC and Application Request Routing (ARR)","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2245235/using-iis-application-request-routing-arr-for-asp-net-mvc\">Using IIS Application Request Routing (ARR) for ASP.NET MVC</a>  </p>\n</blockquote>\n\n\n\n<p>I have an application in MVC3 running in IIS7 and another site running in different port. Certain links in my MVC application requires to show the static content from another site. Redirection was not a choice due to various constrains.</p>\n\n<p>We tried to implement URL Rewriting in IIS7.</p>\n\n<ol>\n<li>Written a rule to rewrite the URL for a pattern match</li>\n<li>Installed Application Request Routing and enabled Proxy from ARR > Server Proxy Settings</li>\n<li>Checked \"Reverse rewrite host in response headers\" from ARR > Server Proxy Settings</li>\n<li>Application pool is running on .NET 4.0 in integrated mode</li>\n</ol>\n\n<p>Unfortunately ARR routing is not working. I checked Failed Request Log and found that URL Rewrite is working as expected, but the routing is not happening.</p>\n\n<p>Did any one faced this issue? Any clue?</p>\n"},{"tags":[".net","asp.net-mvc","absolute-path"],"answer_count":5,"favorite_count":18,"up_vote_count":44,"down_vote_count":0,"view_count":21272,"score":44,"question_id":1268738,"title":"ASP.NET MVC - Find Absolute Path to the App_Data folder from Controller","body":"<p>What is the correct way to find the absolute path to the App_Data folder from a Controller in an ASP.NET MVC project? I'd like to be able to temporarily work with an .xml file and I don't want to hardcode the path.</p>\n\n<p>This does not work:  </p>\n\n<pre><code>[HandleError]\npublic class HomeController : Controller\n{\n    public ActionResult Index()\n    {\n        string path = VirtualPathUtility.ToAbsolute(\"~/App_Data/somedata.xml\");\n\n        //.... do whatever \n\n        return View();\n    }\n\n}\n</code></pre>\n\n<p>I think outside of the web context VirtualPathUtility.ToAbsolute() doesn't work.\nstring path comes back as \"C:\\App_Data\\somedata.xml\"</p>\n\n<p>Where should I determine the path of the .xml file in an MVC app?\nglobal.asax and stick it an application-level variable?</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":164,"score":0,"question_id":10031322,"title":"Looking for an Excel type of experience on the web (ASP.NET MVC)","body":"<p>We are writing an application in ASP.NET MVC (also using Jquery).  Our users expect a grid style control very similar to an excel spreadsheet.  They want to edit everything directly in each cell including the use of dropdowns, text fields, datepickers, and checkboxes.</p>\n\n<p>I've looked at many of the 3rd party grid controls that are out there, but they all seem very difficult to implement the experience in which our users are accustomed to.  Many of these 3rd party tools have problems with Combo boxes and data binding.  Others require the user to click on an edit button in order to edit the contents of the row (which doesn't work for our user community).</p>\n\n<p>The only time they want to click a button is on \"delete a row\", \"save all your work\", and \"add a new row\"</p>\n\n<p>Does anyone have a suggestion of a 3rd party tool that we could use to achieve this?  It would almost be like a google spreadsheet type of app with the ability to make some of the rows datepickers, combo boxes, etc.</p>\n\n<p>Thanks ahead of time for the help!</p>\n"},{"tags":[".net","asp.net","asp.net-mvc","session","serialization"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":325,"score":5,"question_id":1772854,"title":"How can I find which object in ASP.NET can't be serialized?","body":"<p>I'm getting the following error in my application:</p>\n\n<blockquote>\n  <p>Unable to serialize the session state.\n  In 'StateServer' and 'SQLServer' mode,\n  ASP.NET will serialize the session\n  state objects, and as a result\n  non-serializable objects or\n  MarshalByRef objects are not\n  permitted. The same restriction\n  applies if similar serialization is\n  done by the custom session state store\n  in 'Custom' mode.</p>\n</blockquote>\n\n<p>The stack trace isn't providing any good information on which object is not able to serialize. Is there a good way to find the problem child?</p>\n\n<p>Edit:\nI've found the issue, I was trying to serialize a Linq statement(not executed). But I'll try an choose an answer that would have best solved this issue.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":13028142,"title":"EntityFramework Migrations - Seeding per Build Configuration","body":"<p>I am using EntityFramework 5 with Code First Migrations.  What I want to be able to do is specify different Seed data depending on the Build Configuration.  For example:</p>\n\n<pre><code>protected override void Seed(EFDbContext context)\n{\n    // This will be run in every Build configuration\n    context.Table1.AddOrUpdate(new Table1 { Field1 = \"Foo\", Field2 = \"Bar\" });\n\n    #if DEBUG\n    // This will only be executed if we are Debuging\n    context.Table1.AddOrUpdate(new Table1 { Field1 = \"Blah\", Field2 = \"De Blah\" });\n    context.Table2.AddOrUpdate(new Table2 { Field1 = \"Development Only\" });\n}\n</code></pre>\n\n<p>I know the code is probably wrong, I can figure out the correct method call once I know the best route to take for doing this.</p>\n\n<p>Does EF have any built in method I have missed for doing this kind of thing?</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The code I used in the end was:</p>\n\n<pre><code>protected override void Seed(EFDbContext context)\n{\n    // This will be run in every Build configuration\n    context.Table1.AddOrUpdate(t = t.Field1, new Table1 { Field1 = \"Foo\", Field2 = \"Bar\" });\n\n    #if DEBUG\n        // This will only be executed if we are Debuging\n        context.Table1.AddOrUpdate(t = t.Field2, new Table1 { Field1 = \"Blah\", Field2 = \"De Blah\" });\n        context.Table2.AddOrUpdate(t = t.Field1, new Table2 { Field1 = \"Development Only\" });\n    #endif\n}\n</code></pre>\n\n<p>It was as Yannick said, but in the AddOrUpdate method, you need to pass in the field that EF will use to establish if it is a new entry.  Not part of my question, but thought I should provide the correct method for future reference.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13027991,"title":"Replace spaces in string, mvc razor","body":"<p>I am very new to MVC and razor, but I am enjoying it so far.  There are one or two basics I am having trouble with so hopefully this will be a nice easy one for someone.</p>\n\n<p>I am making a new variable and replacing the white spaces. However, this doesn't appear to be working at all; the space that I am adding to the string myself remains.  I cannot simply use the underscore at this point as both <code>Address1</code> and <code>Postcode</code> may also contain spaces, so the replace is essential.</p>\n\n<pre><code>@{ \n    var mapAddress = Model.Address1 + \", \" + Model.Postcode;\n    mapAddress.Replace(\" \", \"_\");\n}\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","json"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13022891,"title":"How do I clear the content of a popup window?","body":"<p>I have a popup window that shows up when you click on an event on a calendar. On the said popup, I have some textboxes and a list of items that's inside a partial view. Now, my problem is that whenever I select an event that has items on the list then close it and open other events on the calendar, the same items still show up on the other events and its not supposed to because that event has a different id. </p>\n\n<p>How do I clear the item list whenever I close the popup without refreshing the page so that the other events would only display items for the selected event?</p>\n\n<p>This is the part of my code that calls the list</p>\n\n<pre><code>var scheduleData = { scheduleId: calEvent.id };\n$.ajax({ \n   type: 'POST',\n   traditional: true, \n   url: '/Schedule/JsonGetItemsBySchedule/',\n   datatype: 'json',\n   data: scheduleData,\n   success: function (result) {\n      var itemlist = result.items; loopItems(itemlist); \n   }\n}); \n</code></pre>\n"},{"tags":["c#","asp.net-mvc","antiforgerytoken"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":114,"score":3,"question_id":12967917,"title":"A way of properly handling HttpAntiForgeryException in MVC 4 application","body":"<p>Here is the scenario:</p>\n\n<p>I have a login page, when user sign it it is redirected to home application page. Then user is using browser back button, and now he is on login page. He tries to login again but now an exception is thrown:</p>\n\n<blockquote>\n  <p>HttpAntiForgeryException (0x80004005): The provided anti-forgery token was meant for user \"\", but the current user is \"userName\".</p>\n</blockquote>\n\n<p>I know this is related to caching. I disabled browser caching for login action using custom NoCache filter which sets all required headers - no-cache, no-store, must-revalidate, etc. But </p>\n\n<ul>\n<li>this is not working on all browsers</li>\n<li>especially Safari (mobile in most cases) totaly ignores such settings</li>\n</ul>\n\n<p>I will try to make hacks and force safari mobile to refresh, but this is not what I'm expecting.</p>\n\n<p>I would like to know if I can:</p>\n\n<ul>\n<li>handle exception without showing user any problem exists (totally transparent for user)</li>\n<li><strong>prevent this problem by replacing anti forgery token user name</strong> which will allow user login again without this exception, if my hacks related to browser caching will stop work in next versions of browsers.  </li>\n<li>I really would like not to rely on browser behavior, since each one behaves differently.</li>\n</ul>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>To make some clarification, I know how to handle errors in MVC. The problem is that this handling errors is not solving my problem at all. Basic idea of error handling is redirect to custom error page with nice message. But I want to prevent this error to happen, not to handle it in user visible way. By handle I mean catch make username replace or other suitable action then continue login.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","httpresponse"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13014261,"title":"How to bufferise the response from the action?","body":"<p>How can I send some part of the web response without waiting the all rendering process finish?\nI prefer do that in an Action.</p>\n\n<p>I used to use <code>Response.Buffer = false;</code> in .net 2.0 but now with MVC 3 I don't know how to do that.</p>\n"},{"tags":["asp.net-mvc","dependency-injection","inversion-of-control","ninject","domain-events"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13015486,"title":"Using Ninject with Udi Dahan's Domain Events","body":"<p>I'm using Ninject in an MVC project and am trying to implement Domain Events following Udi Dahan's pattern <a href=\"http://www.udidahan.com/2009/06/14/domain-events-salvation/\" rel=\"nofollow\">http://www.udidahan.com/2009/06/14/domain-events-salvation/</a></p>\n\n<p>In the extract below, the \"Container\" is used to resolve all the event-handlers for the particular type of event that has been raised.</p>\n\n<p>My question (&amp; apologies if I am missing something basic) is how to do this with Ninject?  In other words:</p>\n\n<ol>\n<li><p>How does the \"Container\" get set in this static class?</p></li>\n<li><p>Once I have a Container (Kernel?) what would be the Ninject syntax to resolve all the event handlers (which I'm assuming I would have to register before-hand in a Service Module)?</p></li>\n</ol>\n\n<p>I keep reading in posts that only constructor injection should be used and everything recursively get resolved from that, and that accessing the Ninject Kernel is a no-no.  So any advice on how to do this will be much appreciated.</p>\n\n<p><strong>Extract from the article</strong></p>\n\n<pre><code>public static class DomainEvents\n{ \n  [ThreadStatic] //so that each thread has its own callbacks\n  private static List&lt;Delegate&gt; actions; \n\n  public static IContainer Container { get; set; } //as before\n\n  //Registers a callback for the given domain event\n  public static void Register&lt;T&gt;(Action&lt;T&gt; callback) where T : IDomainEvent\n  {\n     if (actions == null)\n        actions = new List&lt;Delegate&gt;();\n\n     actions.Add(callback);\n }\n\n //Clears callbacks passed to Register on the current thread\n public static void ClearCallbacks ()\n {\n     actions = null;\n }\n\n //Raises the given domain event\n public static void Raise&lt;T&gt;(T args) where T : IDomainEvent\n {\n    if (Container != null)\n       foreach(var handler in Container.ResolveAll&lt;Handles&lt;T&gt;&gt;())\n          handler.Handle(args);\n\n    if (actions != null)\n        foreach (var action in actions)\n            if (action is Action&lt;T&gt;)\n                ((Action&lt;T&gt;)action)(args);\n }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","checkbox","modelstate"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":769,"score":1,"question_id":1742481,"title":"HTML.CheckBox persisting state after POST - Refresh ModelState?","body":"<p>I have a form that's made up of many items (think order items on an amazon order). Each row has a checkbox associated with them so the user can select many items and click 'remove'.</p>\n\n<p>The form is built up a bit like this;</p>\n\n<pre><code>&lt;% for (int i = 0; i &lt; Model.OrderItems.Count; i++) { %&gt; \n&lt;tr&gt;\n    &lt;td&gt;&lt;%= Html.Hidden(String.Format(\"OrderItems[{0}].Id\", i), Model.OrderItems[i].Id)%&gt;\n        &lt;%= Html.CheckBox(String.Format(\"OrderItems[{0}].Checked\", i), Model.OrderItems[i].Checked)%&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= Html.TextBox(String.Format(\"OrderItems[{0}].Name\", i), Model.OrderItems[i].Name)%&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= Html.TextBox(String.Format(\"OrderItems[{0}].Cost\", i), Model.OrderItems[i].Cost)%&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= Html.TextBox(String.Format(\"OrderItems[{0}].Quantity\", i), Model.OrderItems[i].Quantity)%&gt;&lt;/td&gt;\n&lt;/tr&gt;       \n&lt;% } %&gt;\n</code></pre>\n\n<p>The model binder does its magic just fine and the list is correctly populated. However, after I process the request in the action (e.g. remove the appropriate items) and return a new view containing fewer items, the state of the form is 'semi' persisted. Some check boxes remain checked, even though in the edit model all the bools are set to false.</p>\n\n<p>I don't have this problem if I return a <code>RedirectToActionResult</code>, but using that as a solution seems a bit of a hacky work around.</p>\n\n<p>I think I need to flush/refresh the ModelState, or something similiar, but I'm unsure of the terms to search for to find out how.</p>\n"},{"tags":["html","asp.net-mvc","razor","checkbox","radio-button"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":250,"score":0,"question_id":8497629,"title":"Radio buttons and checkboxes grouped together MVC","body":"<p>I'm trying to find an MVC (razor) solution where I can use radio buttons and checkboxes together.\nSay there are 2 radio buttons labelled: \"All people\" and \"Family Members\".\nIf you select the \"Family Members\" radio button, 3 checkboxes will be enabled: \"Employee\", \"Spouse\", \"Dependant(s)\"\nThe questions are:\n- How to group a radio button to 3 checkboxes?\n- How to enable the checkboxes when the related radio button is selected?</p>\n"},{"tags":["asp.net-mvc","caching","asp.net-mvc-4","web-garden"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13025573,"title":"CacheDependency and multiple Worker Processes","body":"<p>I have a web application that uses caching. The app pool is configured to have multiple worker processes. </p>\n\n<p>I know from <a href=\"http://nicholas.piasecki.name/blog/2009/02/on-web-gardens-aspnet-and-iis-60/\" rel=\"nofollow\">http://nicholas.piasecki.name/blog/2009/02/on-web-gardens-aspnet-and-iis-60/</a> that each worker process uses its own cache instance. If I use  File Dependency for invalidating cache items, will that invalidate the cache in all worker porcesses?</p>\n"},{"tags":["asp.net","asp.net-mvc","telerik","telerik-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":250,"score":0,"question_id":7783194,"title":"Adding a 'target' attribute to the URL of a tabstrip item in Telerik MVC extensions","body":"<p>I am replacing this 'hand-rolled' tabstrip with the Telerik Extensions Tabstrip below it, but I can't fathom how to get the Tabstrip to include the <code>target</code> attribute in the URL for each item. How can I achieve this?</p>\n\n<p>Before:</p>\n\n<pre><code>&lt;ol&gt;\n    @foreach (var sheet in Model.Sheets)\n    {\n        &lt;li&gt;\n            &lt;a href=\"@(Url.Content(Server.MapUrl(sheet.FilePath)) + \"?guid=\" + Guid.NewGuid())\" target=\"selected-worksheet\"&gt;@sheet.Name&lt;/a&gt;&lt;/li&gt;\n    }\n&lt;/ol&gt;\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>@Html.Telerik().TabStrip().Name(\"Card\").BindTo(Model.Sheets, (item, tabInfo) =&gt;\n    {\n        item.Text = tabInfo.Name;\n        item.Url = Url.Content(Server.MapUrl(tabInfo.FilePath));\n    })\n</code></pre>\n"},{"tags":["asp.net-mvc","redirect","iis7","https"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":71,"score":3,"question_id":13014308,"title":"Secure all resources(images, scripts, pages, sessionCookie) with https ASP.NET MVC web-site and also redirect from http to https","body":"<p>I would like to know how to redirect from <code>**http**</code> to <code>**https**</code> but keep all the resources in safety. </p>\n\n<p>I know IIS' <code>Require SSL</code> protect all resources of the site. But what about redirecting? If I use <code>URL Rewrite</code> module, I have to disable Require SSL option on <code>IIS</code>. Can I teach my site to redirect from <code>http</code> to <code>https</code> but also secure all the resources?</p>\n\n<p>And yes, I must protect all the resources of my web-site. Web-site will be over only by https.</p>\n\n<p>Thank you.</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","authorization"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":198,"score":2,"question_id":11290338,"title":"How create Ajax Helpers in MVC3","body":"<p>i crate @Html.ActionLink helper here i check permissions of user. if yes i show this link otherwise not. now problem is with @Ajax.ActionLink can i make helper for Ajax.ActionLink? i make custom helpers to check permissions. it works fine with html.actionlink helper. How i check permissions in ajax actions ?</p>\n\n<pre><code> public static IHtmlString CustomActionLink(this HtmlHelper htmlHelper, int userId, string reqController, string reqAction,  string linkText,int reqActionId = 0)\n    {\n\n        bool isAllowed = checkPermission(userId, reqController, reqAction, reqActionId);\n        if (isAllowed == false)\n        {\n            return MvcHtmlString.Empty;\n        }\n        return htmlHelper.ActionLink(linkText, reqAction, new { id =reqActionId });\n    }\n</code></pre>\n\n<p>i want to do this same check in Ajax Actions.</p>\n"},{"tags":["asp.net-mvc","url-rewriting","url-routing"],"answer_count":5,"favorite_count":6,"up_vote_count":2,"down_vote_count":0,"view_count":1424,"score":2,"question_id":1969889,"title":"Dynamic url routes ASP MVC","body":"<p>Im trying to make a very simple application that lets my client create their own pages.\nThe hard part is to let them create thir own URL.</p>\n\n<p>Client need to fill in:</p>\n\n<ul>\n<li>Page name (ex. About us).</li>\n<li>Page description (ex. We are a big company).</li>\n<li>Page URL relative (ex. /About)</li>\n</ul>\n\n<p>When client enter this information and save, it should be saved in the database.</p>\n\n<p>I can easily create a controller named \"Page\" which takes a value \"ID\" and when a user enters \"www.someurl.com/Page/1\" the newly created page pops up.</p>\n\n<p>But what I really want is for the user to write \"www.someurl.com/About\" and then the page pops up.</p>\n\n<p>How can this be done with some kind of dynamic rewrite/route code using ASP MVC.</p>\n"},{"tags":["asp.net","asp.net-mvc","api","rest","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13006044,"title":"Extensive logging of incoming API requests without affecting performance","body":"<p>I'm developing a rest based API. For each request to the API I want to log a lot of information about that particular request- like who did the request, what resource did he ask for, keep track of how many times this client has asked for this resource, what information is he interested in and much more.</p>\n\n<p>How can I do this without affecting the response time for each request? My idea is to write all this log info to Cache and set the cache expire time to 5 minutes. All incoming request within these 5 minutes will then be written to the same cache object. When the cache expires (It is possible to get a callback when it happens) I will write it to database.</p>\n\n<p>Do you see any drawbacks of this method? Do you have a better suggestion?</p>\n\n<p>PS! Using the built in IIS logging capabilities is not an option as it is not specific enough. </p>\n\n<p><strong>Update:</strong>\nWhat I'm actually asking here is if there is any well known problems with doing database accesses in the CacheItemRemoved callback? Is it a bad idea?</p>\n"},{"tags":["c#","asp.net-mvc",".net-4.0","azure","asp.net-web-api"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":275,"score":4,"question_id":13004091,"title":"Side by side Basic and Forms Authentication with ASP.NET Web API","body":"<p>Disclaimer: let me start by saying that I am new to MVC4 + Web Api + Web Services in general + JQuery. I might be attacking this on the wrong angle. </p>\n\n<p>I am trying to build a Web MVC App + Web API in C# for .NET 4 to deploy in Azure. The web api will be used by mobile clients (iOS, using RestKit). </p>\n\n<p>The Web MVC App will be relatively simple. We would like to use Forms Authentication for it and SimpleMembership - which we achieved and works fine. </p>\n\n<p>We'll use the Web API methods from JQuery (Knockout) scripts to fill pieces of the web pages. Therefore, we expect the JQuery to use the same identity authenticated by Forms Authentication.</p>\n\n<p>However, the idea is that the Web Api can be called directly by mobile clients. No Forms Authentications for those. </p>\n\n<p>We have been looking at the Thinktecture Identity Model (http://nuget.org/packages/Thinktecture.IdentityModel  <a href=\"https://github.com/thinktecture/Thinktecture.IdentityModel.40\" rel=\"nofollow\">https://github.com/thinktecture/Thinktecture.IdentityModel.40</a>). We added the BasicAuth and AcessKey handlers to the config and it works (see code below).</p>\n\n<p>When you try to access the webapi without being authenticated the browser displays the basic authentication dialog and works as expected. </p>\n\n<p>The \"issue\" is that when you ARE already logged in via Forms Authentication and try to call a Web Api method you still get the Basic Authentication dialog. In other words, Thinktecture IdentityModel seems to ignore the Forms Authentication altogether. </p>\n\n<p>My questions are: </p>\n\n<ol>\n<li>Are my expectations correct? that once I have done the forms authentication I shouldn't do anything else to let the JQuery scripts, etc., access the Web API from the same browser user session.</li>\n<li>How do I fix it? </li>\n<li>If my expectations are not correct; how is this supposed to work? ie: how do I make the JQuery scripts authenticate?</li>\n</ol>\n\n<p>I know there are tons of similar questions in Stackoverflow, I honestly looked a lot of up, saw videos, etc., but either I am missing something obvious or there is no clear documentation about this for somebody new in the technologies. </p>\n\n<p>I appreciate the help. Thanks. </p>\n\n<pre><code>public static AuthenticationConfiguration CreateConfiguration()\n{\nvar config = new AuthenticationConfiguration\n        {\n            DefaultAuthenticationScheme = \"Basic\",\n            EnableSessionToken = true,\n            SetNoRedirectMarker = true\n        };            \n\nconfig.AddBasicAuthentication((userName, password) =&gt; userName == password, retainPassword: false);\nconfig.AddAccessKey(token =&gt;\n        {\n            if (ObfuscatingComparer.IsEqual(token, \"accesskey123\"))\n            {\n                return Principal.Create(\"Custom\",\n                    new Claim(\"customerid\", \"123\"),\n                    new Claim(\"email\", \"foo@customer.com\"));\n            }\n\n            return null;\n        }, AuthenticationOptions.ForQueryString(\"key\"));\n</code></pre>\n"},{"tags":["asp.net-mvc","validation","chosen"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13024892,"title":"Choosen multiselect validation","body":"<p>i got in my asp mvc4 application multiselect from chosen.js. I set(with data addnotation) required on that multiselect and it works but input-validation-error class is setup to hidden select not to the div with ul chzn-choices etc. so i cannot get my valdiation error style to multiselect. Any idea how to do that?</p>\n"},{"tags":["asp.net-mvc","url","url-rewriting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13024857,"title":"I want to redirect url from SEO. How can I rewrite All my URLs?","body":"<p>How can i change my SEO result URL to my new Urls? I am using IIS 7. Is there any configuration to rewrite URLs? </p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","razor","forms-authentication","azure-web-sites"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":162,"score":3,"question_id":12964004,"title":"Authentication problems after publishing MVC 4 app to azure","body":"<p>I have a basic ASP.NET MVC 4 site which I am hosting on Azure websites. The authentication is forms authentication and has not been customised from the default template. Every time I publish, when I revisit my site, it just hangs with a very long timeout (couple of minutes perhaps) before finally showing me an error message. I can recover by deleting the cookies for the site in my browser and reloading.</p>\n\n<p>Initially the problem was just trying to access pages that required authentication, but then I added this to my shared <code>_Layout.cshtml</code>:</p>\n\n<pre><code>@if (User.IsInRole(\"Admin\"))\n{\n    &lt;li&gt;@Html.ActionLink(\"Admin\", \"Index\", \"Admin\")&lt;/li&gt;\n}\n</code></pre>\n\n<p>which now means no pages at all are accessible after an new publish, and so I can't even click the logout link, which was another way I used to be able to fix the issue.</p>\n\n<p>Have I got something configured wrong? Although I have a workaround I can use myself, this will not be a good experience for users of the site after I publish an update.</p>\n\n<p>EDIT: from the ELMAH logs, it seems like forms authentication is trying to create a SQL Express database when I call IsInRole. I can't see why it would do this, as my forms authentication is all set up to use my SQL Azure database.</p>\n\n<pre><code>System.Web.HttpException (0x80004005): Unable to connect to SQL Server database. ---&gt; System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\n   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)\n   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()\n   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover)\n   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject, Boolean withFailover)\n   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)\n   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)\n   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)\n   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)\n   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)\n   at System.Data.SqlClient.SqlConnection.Open()\n   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)\nClientConnectionId:00000000-0000-0000-0000-000000000000\n   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)\n   at System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install)\n   at System.Web.Management.SqlServices.Install(String database, String dbFileName, String connectionString)\n   at System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString)\n   at System.Web.DataAccess.SqlConnectionHelper.EnsureSqlExpressDBFile(String connectionString)\n   at System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation)\n   at System.Web.Security.SqlRoleProvider.GetRolesForUser(String username)\n   at WebMatrix.WebData.SimpleRoleProvider.GetRolesForUser(String username)\n   at System.Web.Security.RolePrincipal.IsInRole(String role)\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":173,"score":6,"question_id":13024030,"title":"Validation of @Html.Textbox in MVC4","body":"<p>I use an update action to update based on the input from the @Html.Textbox. </p>\n\n<pre><code>@using (Html.BeginForm(\"Update\", \"Shopping\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n   {               \n   @Html.ValidationSummary()                \n   @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n   @Html.Hidden(\"productid\", item.ProductID as string)\n   @Html.TextBox(\"Quantity\", item.Quantity)   \n   @Html.ValidationMessage(\"Quantity\", \"*\") \n   @Html.Hidden(\"unitrate\", item.Rate)               \n   &lt;input type=\"submit\" value=\"Update\" /&gt;\n   }\n</code></pre>\n\n<p>and In My Model class  </p>\n\n<pre><code>        [Required(ErrorMessage = \"Quantity is required.\")]\n        [Display(Name = \"Quantity\")]\n        [Range(2, 100, ErrorMessage = \"There is not enough inventory for the product to fulfill your order.\")]\n        public int? Quantity { get; set; }\n</code></pre>\n\n<p>The problem is I m not getting the validation message when the textbox is empty.\nBut when I use @Html.TextBoxFor</p>\n\n<pre><code>   @Html.TextBoxFor(modelItem =&gt; item.Quantity)\n   @Html.ValidationMessageFor(modelitem =&gt; item.Quantity) \n</code></pre>\n\n<p><br/>\nI am getting the validation message. and my update action is not working.\n<br/>\nHere I have two options.\n<br/>\n1. How to pass the textbox name \"qty\" in @Html.TextboxFor ?? (or)\n<br/>\n2. How to get the validation message in @Html.Textbox() using @Html.ValidationMessage()</p>\n\n<p>Any suggestions ..</p>\n\n<p>EDIT :\nMy Update Action<br/></p>\n\n<pre><code>[HttpPost]\n   public ActionResult Update(string id, string productid, int Quantity, decimal unitrate)\n        {\n        if (ModelState.IsValid)\n         {\n                   int _records = UpdatePrice(id, productid, Quantity, unitrate);\n                    if (_records &gt; 0)\n                    {\n                        return RedirectToAction(\"Index1\", \"Shopping\", new { UserID = Request.QueryString[\"UserID\"] });\n                    }\n                    else\n                    {\n                        ModelState.AddModelError(\"\",\"Can Not Update\");\n                    }\n                }\n                return View(\"Index1\");\n            }\n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","llblgenpro"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13006581,"title":"Using ViewModel with LLBLGen","body":"<p>I am using MVC 3 and LLBLGen. I am confused about approach on populating ViewModels that have data coming from multiple tables. How would i display the Foreign Key names instead of just ID? I don't have any virtual keywords like entity framework. Should i just resort to using SQL Views and then populate viewmodels through them? Just to elaborate more, let's say i want to display more than 100 results at a time and each result has multiple associated foreign keys then how would i display their relevant names rather just IDs?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13020678,"title":"Must Declare the scalar variable \"Post_ID\"","body":"<p>I am getting this error \"Must Declare the scalar variable \"Post_ID\" if i try to update 2 different ID's in my table.  In other words, i can update as many times as i need to for example ID # 25 but if i try to update ID # 26 then i get the error above.  My insert function works fine only my update function.  Pls. help and i appreciate your time.  Note, the DateKeyNames = ID.  Here is my code for the update only:</p>\n\n<pre><code>SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings[\"MyConnectionString\"].ConnectionString);\n            SqlCommand cmd = new SqlCommand();\n\n            cmd.CommandText = \"UPDATE MyTable SET Post_ID=@Post_ID, Date=@Date, Description=@Description WHERE ID=@ID\";\n\n            TextBox myTextBox11 = GV_InlineEditing.Rows[0].FindControl(\"GV_Post_ID\") as TextBox;\n            TextBox myTextBox22 = GV_InlineEditing.Rows[0].FindControl(\"TextBox2\") as TextBox;\n            TextBox myTextBox33 = GV_InlineEditing.Rows[0].FindControl(\"TextBox3\") as TextBox;\n\n            if (myTextBox11 != null)\n            {\n                cmd.Parameters.Add(\"@Post_ID\", SqlDbType.VarChar).Value = myTextBox11.Text;\n            }\n            else\n            {\n                TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl(\"GV_Post_ID\") as TextBox;\n\n            }\n\n\n            if (myTextBox22 != null)\n            {\n                cmd.Parameters.Add(\"@Date\", SqlDbType.VarChar).Value = myTextBox22.Text;\n            }\n            else\n            {\n                TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl(\"Date\") as TextBox;\n\n            }\n\n\n            if (myTextBox33 != null)\n            {\n                cmd.Parameters.Add(\"@Description\", SqlDbType.VarChar).Value = myTextBox33.Text;\n            }\n            else\n            {\n                TextBox GV_Post_ID = GV_InlineEditing.Rows[0].Cells[0].FindControl(\"Description\") as TextBox;\n\n            }\n            cmd.Parameters.Add(\"@ID\", SqlDbType.Int).Value = Convert.ToInt32(GV_InlineEditing.Rows[e.RowIndex].Cells[1].Text);\n\n\n            cmd.Connection = con;\n            con.Open();\n            cmd.ExecuteNonQuery();\n            con.Close();\n\n        }\n\n\n        GV_InlineEditing.EditIndex = -1;\n        BindData();\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc","razor","http-status-code-404"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13022650,"title":"MVC 4 returns 404 on returnUrl from Login Screen","body":"<p>I have a simple MVC application - a list of employees, buttons to delete the employee, and login screen</p>\n\n<p>When the user presses the button to delete the Employee they are requested to Login</p>\n\n<p>This takes them away from the EmployeeController to an AccountController that handles the login. The returnUrl is also passed to this. The user gets authenticated successfully and the Account controller goes to Redirect to the ReturnUrl and this is where it throws a 404.</p>\n\n<p>The returnUrl = /Employees/Delete/127 - the id of the employee. As far as I can see this is correctly configured in the controller and RouteConfig.</p>\n\n<p>When I remove the [Authorise] attribute it works just fine. So I suspect it must be with the redirect but I do not understand why?</p>\n\n<p><strong>EDIT</strong>:\nI also tried HttpPost in the using FormMethod.Post in the view but it made no difference but after leaving the Login I don't know it it os post or get - or could the Redirect to the return url be generating a Get and not a post?</p>\n\n<p><strong>EDIT AGAIN</strong>: Thinking about this it is probably not a good design. I am requesting the user to Authorize after they have pressed the delete button. I should probably not expose the delete button unless they are already Authorized but is it possible to do anyway?</p>\n\n<p><img src=\"http://i.stack.imgur.com/LPEgE.png\" alt=\"404 error\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/J4VFf.png\" alt=\"Account Controller with redirect\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/8a1mH.png\" alt=\"view generating the delete button\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/x4Q4d.png\" alt=\"employee controller with the Delete action\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/pMTRL.png\" alt=\"generated html\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/ncIkp.png\" alt=\"route config\"></p>\n"},{"tags":["ajax","asp.net-mvc","post","asp.net-web-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":88,"score":-1,"question_id":13021391,"title":"ASP.NET MVC Web API POST too many data caused value null","body":"<p>there are two ASP.NET Web API methods:</p>\n\n<pre><code>public object Save(Results Details)\n{\n}\n\npublic object Read()\n{\n    var details = new Results();\n    //initialize object here...\n    return details;\n}\n</code></pre>\n\n<p>and the Results goes:</p>\n\n<pre><code>public class Results\n{\n    public IList&lt;Foo&gt; A { get; set; }\n    public Result ANormality { get; set; }\n    public Result ANeckPain { get; set; }\n\n    public IList&lt;Foo&gt; B { get; set; }\n    public Result BNormality { get; set; }\n    public Result BPain { get; set; }\n\n    public IList&lt;Foo&gt; C { get; set; }\n    public Result CNormality { get; set; }\n    public Result CPain { get; set; }\n\n    public IList&lt;Foo&gt; D { get; set; }\n    public Result DNormality { get; set; }\n    public Result DPain { get; set; }\n\n    public IList&lt;Foo&gt; E { get; set; }\n    public Result ENormality { get; set; }\n    public Result EPain { get; set; }\n\n    public IList&lt;Foo&gt; F { get; set; }\n    public Result FNormality { get; set; }\n    public Result FPain { get; set; }\n\n    public IList&lt;Foo&gt; G { get; set; }\n    public Result GNormality { get; set; }\n    public Result GPain { get; set; }\n\n    public IList&lt;Foo&gt; H { get; set; }\n    public Result HNormality { get; set; }\n    public Result HPain { get; set; }\n\n    public IList&lt;Foo&gt; I { get; set; }\n    public Result INormality { get; set; }\n    public Result IPain { get; set; }\n\n    public IList&lt;Foo&gt; J { get; set; }\n    public Result JNormality { get; set; }\n    public Result JPain { get; set; }\n\n    public IList&lt;Foo&gt; K { get; set; }\n    public Result KNormality { get; set; }\n    public Result KPain { get; set; }\n\n    public IList&lt;Foo&gt; L { get; set; }\n    public Result LNormality { get; set; }\n    public Result LPain { get; set; }\n\n    public IList&lt;Foo&gt; M { get; set; }\n    public Result MNormality { get; set; }\n    public Result MPain { get; set; }\n\n    public IList&lt;Foo&gt; O { get; set; }\n    public Result ONormality { get; set; }\n    public Result OPain { get; set; }\n\n    public IList&lt;Foo&gt; XXX { get; set; }\n    public Result XXXNormality { get; set; }\n    public Result XXXPain { get; set; }\n\n\n    public IList&lt;Some&gt; Options { get; set; }\n    public IList&lt;Some&gt; NormalityOptions { get; set; }\n    public IList&lt;Some&gt; PainOptions { get; set; }\n}\n</code></pre>\n\n<p>and here goes Foo:</p>\n\n<pre><code>public class Foo\n{\n    public int ID { get; set; }\n    public string Desc { get; set; }\n    public string Range { get; set; }\n    public string RangeType { get; set; }\n    public string Section { get; set; }\n    public string Answer { get; set; }\n}\n</code></pre>\n\n<p>and here goes Some:</p>\n\n<pre><code>public class Some\n{\n    public int CodeID { get; set; }\n    public string Code { get; set; }\n    public string CodeDesc { get; set; }\n    public int MaxNValue { get; set; }\n    public int MinNValue { get; set; }\n    public decimal FloatValue { get; set; }\n    public decimal DecimalValue { get; set; }\n    public string CodeType { get; set; }\n    public string Filter { get; set; }\n}\n</code></pre>\n\n<p>and here goes Result:</p>\n\n<pre><code>public class Result\n{\n    public string ResultComment { get; set; }\n    public string ResultValue { get; set; }\n    public string ResultType { get; set; }\n    public string Section { get; set; }\n}\n</code></pre>\n\n<p>The Results is a very complex object containing a lot of object List.</p>\n\n<p>Here is how I get the model from server\n            var fooModel;</p>\n\n<pre><code>        $.ajax(\n        {\n            url: 'http://foo/api/bizapi/Read',\n            type: 'GET',\n            cache: false,\n            success: function (data) {\n                fooModel = data;\n            },\n            dataType: 'json'\n        }\n        );\n</code></pre>\n\n<p>I will use ajax to post large amount of data (around 900 parameters, and the total size of the post is around 30 KB) to the method:</p>\n\n<pre><code>        var postData = fooModel;\n\n        $.ajax(\n        {\n            url: 'http://foo/api/bizapi/Save',\n            type: 'POST',\n            data: postData,\n            cache: false,\n            success: function (data) {\n                //do sth;\n            },\n            dataType: 'json'\n        }\n        );\n</code></pre>\n\n<p>I check the Details, one of the parameter <code>IList&lt;Foo&gt; ABC</code>\n is null (which is wrong).</p>\n\n<p>I double checked with fiddler to see the post content, it's all fine. I assume there is some limitation about the size of the post content or the size of the object collections.</p>\n\n<p>I first remove the parameter which contains largest amount of collection (about 600) in javascript, then the post size drops to 7K, and now in the web api method I can get the value of ABC.</p>\n\n<p>I did some research, it seems it has something with max collection keys, so I put the following settings in the web.config:</p>\n\n<pre><code>&lt;add key=\"aspnet:MaxHttpCollectionKeys\" value=\"3000\"/&gt;\n&lt;add key=\"aspnet:MaxJsonDeserializerMembers\" value=\"3000\"/&gt;\n</code></pre>\n\n<p>it's still not working. </p>\n\n<p>I looked at similar question here: <a href=\"http://stackoverflow.com/questions/10966328/the-json-request-was-too-large-to-be-deserialized\">The JSON request was too large to be deserialized</a> , still no luck.</p>\n\n<p>Any idea?</p>\n"},{"tags":["c#","asp.net-mvc","windows-azure-storage"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13012990,"title":"Storing Excel/Word documents Windows Azure Blob Storage Files Corrupted","body":"<p>We've started using Azure blob storage api to store the uploaded blobs on our site, images have worked fine but when we upload a word/excel document and return the Url and try to download the file from that url and open it we get an error in Excel or Word saying:</p>\n\n<p>\"Excel cannot open the file \"somefile.xlsx\" because the format or file extension is not valid.  Verify that the file has not been corrupted and that the file extension matches the format of the file\".</p>\n\n<p>I know I must be missing something obvious but not sure what, below is the code we are using:</p>\n\n<pre><code>  CloudBlobContainer container = GetCloudBlobContainer();\n\n  Guid guid = Guid.NewGuid();\n  string storeFilename = String.Concat(mediaType.ToString(), \"/\", guid, \"_\", filename);\n\n  var blob = container.GetBlobReference(storeFilename);\n  blob.Properties.ContentType = contentType;\n  blob.UploadFromStream(stream);\n\n  return blob.Uri.AbsolutePath;\n</code></pre>\n\n<p>We return the Url and store that against the file that has been uploaded and use that as the link to download the file.</p>\n\n<p>The file downloads fine, is the exact same size as the uploaded but won't open.</p>\n\n<p>Any help would be greatly appreciated as it must be something so obvious but it eludes me I'm afraid.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13021802,"title":"mvc using bool in model class to change property in db","body":"<p>So I'm using mvc3 to create a database website for a rental system.</p>\n\n<p>In my rental.cs in my model folder it goes like...</p>\n\n<pre><code>public class Rental\n{\n    public int RentalID { get; set; }\n\n    public int CustomerID { get; set; }\n\n    public int MovieID { get; set; }\n\n    public bool? OnHire { get; set; }\n   // public static bool test;\n   //On another note i had to take out the 'static' in public static bool? onhire\n   //as it threw an error when I tried to load the rentals page.\n}\n</code></pre>\n\n<p>The error being:</p>\n\n<pre><code> @Html.DisplayFor(modelItem =&gt; item.OnHire)\n</code></pre>\n\n<p>So here I was trying to use a static bool, which will allow me to use it in a different class.</p>\n\n<p>Then in the movies class I was trying to say when the rental.OnHire = true, the movie.onHire will also be true.</p>\n\n<p>The idea being when the user rents out a copy they change the onHire to yes on the rental page, which will change the movie on the movies page from 'false' to 'true' for 'Onhire'</p>\n\n<pre><code>public class Movie\n{\n    public int MovieID { get; set; }\n\n    public string Title { get; set; }\n\n    public string Producer { get; set; }\n\n    public string Genre { get; set; }\n\n    public bool? OnHire { get; set; }\n\n   // if (Rental.Onhire)\n    //{\n        //OnHire = true;\n   // }\n\n}\n</code></pre>\n\n<p>Although it wasnt picking up the bool. Could someone please advise where I am going wrong. Am I going about this the right way?</p>\n"},{"tags":["asp.net-mvc","navigation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":99,"score":2,"question_id":12718761,"title":"The PageFlow Application Block, MVC4 and Visual Studio 2010","body":"<p>I am in the process of evaluating technologies, prototyping and potentially defining application architecture for a suite of web based applications that have been written using, ASP.Net WebForms, UIP, Unity, MVP, and a custom frameworks that wraps Entlib 3.1. Some of the problems we have with the current toolkit are: </p>\n\n<ol>\n<li><p>It is really hard to utilise the latest client-side technologies to build Progressive Enhancement into the presentation layer. </p></li>\n<li><p>User Controls are inherently hard to re-use and the added complexity of producing Server Controls inhibits their use on a wide scale.</p></li>\n<li><p>The master page concept does not provide an organisation-wide reuse. It needs to be customised heavily by the project teams anyway.</p></li>\n<li><p>It is extremely hard to produce accessible, compliant and cross-brower compatible HTML. </p></li>\n<li><p>There is little or no opportunity for having reusable screens (Views) across applications within the portfolio. </p></li>\n</ol>\n\n<p>One of the key requirements that we have is the ability to produce configurable/compose-able navigation flow. In the current architecture, UIP application block allows for that with relative amount of ease. </p>\n\n<p>We are evaluating the use of ASP.Net MVC4 for our future web applications.</p>\n\n<p>My question is this: </p>\n\n<p>Has anyone implemented UIP-style configurable / compose-able navigation capability with ASP.Net MVC? </p>\n\n<p>I came across the PageFlow Application Block: <a href=\"http://webclientguidance.codeplex.com/wikipage?title=Page%20Flow%20Application%20Block\" rel=\"nofollow\">http://webclientguidance.codeplex.com/wikipage?title=Page%20Flow%20Application%20Block</a> that is slated to solve this exact problem.</p>\n\n<p>I downloaded the PageFlow Application Block from the wcsf contrib project, <a href=\"http://wcsfcontrib.codeplex.com/\" rel=\"nofollow\">http://wcsfcontrib.codeplex.com/</a>, but the source code does not even compile on the VS2010. Has anyone used the PageFlow application block? Is this application block unsupported, and therefore obsolete? </p>\n\n<p>If you had a requirement to do configurable navigation capability for wizard style web applications, how would you do it?</p>\n\n<p>Sorry for the long-winded question. I wanted to provide as much context as possible. </p>\n"},{"tags":["asp.net","asp.net-mvc","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12884298,"title":"Link clicks not registering consistently in MVC4 jquery mobile","body":"<p>I created simple site using MVC4 Mobile template. On index.cshtml I put following links <code>@Html.ActionLink(\"CC\", \"Process\", \"Home\", new { id = \"1\" }, new { })</code> and two others with different id.</p>\n\n<p>Controller process links and RouteConfig have correct routing.</p>\n\n<p>When I test the page if I click each time on different link it works ok, but second click on the same link does nothing. I suspect some kind of caching but its not welcome here.</p>\n\n<p>Let me know what to try for this to go away. </p>\n"},{"tags":["c#","asp.net-mvc","mvc","routing","url-routing"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3088,"score":4,"question_id":343638,"title":"MVC Routing - Parameter names question","body":"<p>I'm looking for some information on Routing in MVC with C#. I'm currently very aware of the basics of routing in MVC, but what i'm looking for is somewhat difficult to find. </p>\n\n<p>Effectively, what I want to find is a way of defining a single route that takes a single parameter.</p>\n\n<p>The common examples I have found online is all based around the example</p>\n\n<pre><code>routes.MapRoute(\n    \"Default\",\n    \"{controller}.mvc/{action}/{id}\"\n    new { controller = \"Default\", action=\"Index\", id=\"\"});\n</code></pre>\n\n<p>By mapping this route, you can map to any action in any controller, but if you want to pass anything into the action, the method parameter must be called \"id\". I want to find a way around this if it's possible, so that I don't have to constantly specify routes just to use a different parameter name in my actions.</p>\n\n<p>Has anyone any ideas, or found a way around this?</p>\n"},{"tags":["c#",".net","asp.net-mvc","unit-testing","anonymous-types"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":519,"score":1,"question_id":8465121,"title":"Casting anonymous type to dynamic","body":"<p>I have a function that returns an anonymous type which I want to test in my Mvc controller.</p>\n\n<pre><code>function JsonResult Foo()\n{\n    var data = new\n                  {\n                      details = \"something\",\n                      more = \"More\"\n                  };\n    return Json(data);\n}\n</code></pre>\n\n<p>I want to verify the data I get from the Foo function, What I'm doing now is get the data type and get his properties values with reflection. </p>\n\n<pre><code>[Test]\npublic void TestOne()\n{\n    var data = _controller.Foo().Data;\n    var details = data.GetType().GetProperty(\"details\").GetValue(data, null);\n    var more = data.GetType().GetProperty(\"more\").GetValue(data, null);\n\n    Assert.AreEquals(\"something\", details);\n    Assert.AreEquals(\"More\", more);\n}\n</code></pre>\n\n<p>Is there a simple way similar to this to check the anonymous properties?</p>\n\n<pre><code>[Test]\npublic void TestTwo()\n{\n    var data = (dynamic) _controller.Foo().Data;\n    var details = data.details; // RunTimeBinderException object does not contain definition for details\n    var more = data.more;\n\n    Assert.AreEquals(\"something\", details);\n    Assert.AreEquals(\"More\", more);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","spring","tomcat","webpage-rendering"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12939361,"title":"Spring MVC handles request after page rendering","body":"<p>I have a Spring MVC application(2.5.6) and after a page render, spring MVC does several requests as GET method which cause the erasing of my current command value. \nIt was working under tomcat 5.5 and I updated the application to tomcat 6.0.35 but I have the same problem with Jetty also. I'm wondering weather Spring MVC 2.5.6 behaves differently under tomcat 5.5 and tomcat 6.x\nThe business scearis is as following:\nuse create a Vacancy\nWithout saving it, he click on Preview button\nThan, there is a button to go back(not the browser's one), and after clicking on back button, the edit form is displayed with validation errors on all the fields and any value is kept.\nThanks for any help.</p>\n"},{"tags":["asp.net-mvc","yui-compressor","antiforgerytoken"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":12978551,"title":"Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll","body":"<p>I am using throughout my NopCommerce website a component called BundleTransformer which extends the 'bundling' feature of MVC4. It uses another component called Yahoo.Yui.Compressing to transform and compress javascript files. All is working fine. JS files are compressed and bundled as expected. </p>\n\n<p>However, there seems to be an issue with AntiForgeryToken. In my registration page, I added this simple line inside my form: </p>\n\n<pre><code>@Html.AntiForgeryToken()\n</code></pre>\n\n<p>This seems to conflict with Yahoo.Yui.Compressing. The error message I am getting is here below:</p>\n\n<pre><code>Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.DllNotFoundException: Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll\n\nSource Error: \n\n\nLine 43: @using (Html.BeginForm())\nLine 44: {\nLine 45:     @Html.AntiForgeryToken()\nLine 46:     &lt;div class=\"page registration-page\"&gt;\nLine 47:         &lt;div class=\"page-body\"&gt;\n\nSource File: e:\\www\\....\\TheWebsite\\Themes\\TheTheme\\Views\\Customer\\Register.cshtml    Line: 45 \n\nStack Trace: \n\n\n[DllNotFoundException: Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll]\n   Yahoo.Yui.Compressor.AssemblyResolver.&lt;Initialise&gt;b__0(Object sender, ResolveEventArgs args) +248\n   System.AppDomain.OnAssemblyResolveEvent(RuntimeAssembly assembly, String assemblyFullName) +224\n\n[FileLoadException: Could not load file or assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Could not find the specified DllImport Dll.]\n   System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName, ObjectHandleOnStack type) +0\n   System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark&amp; stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName) +70\n   System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark&amp; stackMark) +39\n   System.Type.GetType(String typeName) +50\n   System.Web.Helpers.Claims.ClaimsIdentityConverter.GetDefaultConverters() +71\n   System.Web.Helpers.Claims.ClaimsIdentityConverter..cctor() +91\n\n[TypeInitializationException: The type initializer for 'System.Web.Helpers.Claims.ClaimsIdentityConverter' threw an exception.]\n   System.Web.Helpers.Claims.ClaimsIdentityConverter.get_Default() +14\n   System.Web.Helpers.AntiForgery.CreateSingletonAntiForgeryWorker() +124\n   System.Web.Helpers.AntiForgery..cctor() +8\n\n[TypeInitializationException: The type initializer for 'System.Web.Helpers.AntiForgery' threw an exception.]\n   System.Web.Helpers.AntiForgery.GetHtml() +45\n   System.Web.Mvc.HtmlHelper.AntiForgeryToken() +21\n   ASP._Page_Themes_CambridgeSatchel_Views_Customer_Register_cshtml.Execute() in e:\\www\\....\\TheWebsite\\Themes\\TheTheme\\Views\\Customer\\Register.cshtml:45\n   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +199\n   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +104\n   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +78\n   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +236\n   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +107\n   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +291\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1a.&lt;InvokeActionResultWithFilters&gt;b__17() +23\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +22\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +22\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +22\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +22\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +22\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +22\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +176\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass2a.&lt;BeginInvokeAction&gt;b__20() +75\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass25.&lt;BeginInvokeAction&gt;b__22(IAsyncResult asyncResult) +99\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1d.&lt;BeginExecuteCore&gt;b__18(IAsyncResult asyncResult) +14\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4.&lt;MakeVoidDelegate&gt;b__3(IAsyncResult ar) +23\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55\n   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +39\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4.&lt;MakeVoidDelegate&gt;b__3(IAsyncResult ar) +23\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55\n   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29\n   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10\n   System.Web.Mvc.&lt;&gt;c__DisplayClass8.&lt;BeginProcessRequest&gt;b__3(IAsyncResult asyncResult) +25\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4.&lt;MakeVoidDelegate&gt;b__3(IAsyncResult ar) +23\n   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55\n   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +155\n</code></pre>\n\n<p>Does anyone know the solution?</p>\n\n<p>It seems to be a bug somewhere between Yahoo.Yui.Compressor, BundleTransformer or the AntiForgeryToken.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":52,"score":0,"question_id":13019728,"title":"Model Passing Problems","body":"<p>So I have a UserDisplayModel with the default MembershipUser as a property, and I'm trying to pass the whole view model to the controller, but for some reason the MembershipUser property and likely the whole model gets lost. </p>\n\n<p>I found this out because I get a <code>No parameterless constructor defined for this object</code> error unless I manually instantiate the MembershipUser inside the display model constructor). Meaning the second action (posted below) tried to make a new UserDisplayModel and errors because MembershipUser has no default constructor.</p>\n\n<p>Here's my code:</p>\n\n<p>Model</p>\n\n<pre><code>public class UserDisplayModel\n{\n    public MembershipUser User { get; set; }\n\n    public UserDisplayModel(string id)\n    {\n        this.User = Membership.GetUser(id);\n    }\n}\n</code></pre>\n\n<p></p>\n\n<p>Actions</p>\n\n<pre><code>public ActionResult Delete(string id)\n{\n    UserDisplayModel model = new UserDisplayModel(id);\n\n    return PartialView(\"Delete\", model);\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>[HttpPost]\npublic ActionResult Delete(UserDisplayModel model)\n{\n    Membership.DeleteUser(model.User.UserName);\n}\n</code></pre>\n\n<p></p>\n\n<p>View</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;MvcWebRole1.Models.UserDisplayModel&gt;\" %&gt;\n\n&lt;p&gt;Are you sure you want to delete the following user?&lt;/p&gt;\n\n&lt;h2&gt;&lt;%: Model.User.UserName%&gt;&lt;/h2&gt;\n\n&lt;% using (Html.BeginForm()) { %&gt;\n    &lt;p&gt;\n        &lt;%: Html.HiddenFor(model =&gt; model.User.UserName)%&gt;\n        &lt;input type=\"submit\" value=\"Delete\" class=\"small alert button\" /&gt;\n        &lt;input type=\"button\" value=\"Cancel\" class=\"small secondary button cancel-action\" /&gt;\n    &lt;/p&gt;\n&lt;% } %&gt;\n</code></pre>\n\n<p></p>\n\n<p>Is it possible to have this work, or does asp.net just not like having models inside models? Or did I just miss something silly? </p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13011937,"title":"Strongly typed View: Model class not listed","body":"<p>I am trying to create strongly typed view from model class <code>N1Process</code>. I did compile the solution, before attempting to add View. But can't locate this N1Process model in the add View wizard.</p>\n\n<p><img src=\"http://i.stack.imgur.com/YJdoP.png\" alt=\"enter image description here\"></p>\n\n<pre><code>namespace GetPathOfRunningProcess.Models\n{\n    public class N1Process\n    {\n        public string Name { get; set; }\n        public string Path { get; set; }\n    }\n}\n</code></pre>\n\n<p>Does it has to do anything with the namespace <code>GetPathOfRunningProcess.Models</code> where <code>N1Process</code> has been defined ?</p>\n\n<p>Thanks !</p>\n"},{"tags":["asp.net-mvc","view","methods"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13019347,"title":"Calling background method from mvc4 view","body":"<p>I want to call method which will do something in background, but I don't want to change the current view. This is the method:</p>\n\n<pre><code>public ActionResult BayesTraining(string s,string path)\n    {\n        XmlParse xp = new XmlParse();\n        using (StreamWriter sw = System.IO.File.AppendText(path)) \n    {\n        sw.WriteLine(\"d:/xml/\"+xp.stripS(s)+\".xml\");\n        sw.Close();\n    }\n\n        return RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<p>As you can see, I'm currently using RedirectToAction, that just reloads the page after the method is done working. Having in mind that method doesn't effect UI, I don't want to refresh web page every time I've used it. It's job should be done in background. So, how could I call it, without the need to redirect the view? </p>\n"},{"tags":["c#","sql","asp.net-mvc"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":65,"score":0,"question_id":12918491,"title":"How do I return data presorted after grabbing them inside a foreach loop?","body":"<p>First, I'm grabbing ClientID.  Then, I get all Invoices associated with that ClientID.  I want to return data all ordered by InvoiceNumber, descending.  Here's my code:</p>\n\n<pre><code>var rvInvoices =\n             (from i in db.QB_INVOICES_HEADER\n                where i.ClientID == cId\n                select i).ToList();\nforeach (var itm in rvInvoices)\n{\n        InvoiceModel cm = new InvoiceModel()\n        {\n                InvoiceNumber = itm.InvoiceNumber,\n                InvoiceSentDt = itm.InvoiceSentDt,\n                InvoiceDt = itm.InvoiceDt,\n                Amount = itm.Amount,\n                Term = itm.Term,\n                ClientName = itm.CI_CLIENTLIST.ClientName\n        };\n\n        listInvoices.Add(cm);\n}\n\nreturn listInvoices;\n</code></pre>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13014802,"title":"EF stored procedure with dynamic number of columns in result set","body":"<p>At first I should note that I'm new in ASP.NET (however, I have some experience with C#) and Entity Framework. I work on a school project and there is quite complicated database containing energy consumption data. Those I need (<code>I</code> import, <code>E</code> export, reactive power <code>C</code> and <code>L</code>) are stored in one column as binary compressed so to get them out I have to use a stored procedure which calls some methods in custom assembly to decompress the column and restore the data.</p>\n\n<p>The stored procedure has 4 arguments:</p>\n\n<pre><code>@identify int,\n@startTime datetime,\n@endTime datetime,\n@args nvarchar(60) -- \"Selector\"\n</code></pre>\n\n<p>The <code>selector</code> is rather special, it's an argument where you specify what you want in the result set, e.g. <code>'i'</code> for Import column only, <code>'i,e'</code> for Import and Export. They designed it like this because it's faster if you need just one column rather then all columns (because of the way the compressed data are stored).</p>\n\n<p>So, I've created an ADO.NET Entity Model called <code>EnergyConsumptionDBModel</code>, imported the stored procedure and created complex type <code>EnergyConsumptionResult</code> for the stored procedure return type as follows:</p>\n\n<pre><code>public partial class EnergyConsumptionResult\n{\n    public System.DateTime Time { get; set; }\n    public double I { get; set; }\n    public double E { get; set; }\n    public double L { get; set; }\n    public double C { get; set; }\n}\n</code></pre>\n\n<p>The column <code>Time</code> is always present in the result set, but the rest depends on the <code>@args</code> argument of the stored procedure. For example if I pick <code>'i,e,c,l'</code> as an argument, it will return columns <code>Time, I, E, C, L</code> and everything is just fine but if I pick for example <code>'i'</code> it returns <code>Time, I</code> which gives me an exception:</p>\n\n<blockquote>\n  <p><em>The data reader is incompatible with the specified 'EnergyConsumptionDBModel.EnergyConsumptionResult'.</em><br>\n  <em>A member of the type, 'E', does not have a corresponding column in the data reader with the same name.</em></p>\n</blockquote>\n\n<p>So the question is, is there some simple way to solve this? Some kind of dynamic result mapping on complex type or is it much more simple to tell my colleague who designed the stored procedure to make it return all columns whatever is in <code>@args</code> but leave the un-used columns empty which is a solution my project leader may not like. Thanks for any help.</p>\n"},{"tags":["asp.net-mvc","c#-4.0","bdd","specflow","gherkin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13011972,"title":"Acceptance testing MVC4 website with SpecFlow","body":"<p>I want to write acceptance tests, with SpecFlow (Gherkin) to verify different scenarios. Especially I want to verify the login process, that uses persistant cookies and sessionstate.</p>\n\n<p>I've done something similar with services, where I programmatically started each service needed for the test, in a servicehost. This enables me to manipulate the IoC container before the service is instantiated.</p>\n\n<p>I want something similar for my MVC controllers. Does anyone have any experience with this sort of testing in MVC 4?</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13018475,"title":"Programmatic Object Creation","body":"<p>I have the following hard coded object:</p>\n\n<pre><code>data.Add(New Object() {\"Date\", \"Minutes\"})\n</code></pre>\n\n<p>How do I create an object like this from a for each?  For instance:</p>\n\n<pre><code>For each item in group\n\n    ' do something\n\nNext\n</code></pre>\n\n<p><em>(When \"group\" contains \"Date\" and \"Minutes.\")</em></p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13017777,"title":"Design considerations for using EF objects in ASP.net MVC","body":"<p>I am using EF code first in one of my mvc 3 projects. I have a question about what patterns to use when passing a complex EF POCO object to and from the views.</p>\n\n<p>For example, a customer object has a list of orders and each order has a list of items.  The customer object will be sent to the view. The view updates the customer object and its inside objects (orders, items), then send it back the controller. The controller have EF to persist the customer object. </p>\n\n<p>My questions are following:</p>\n\n<ol>\n<li><p>Should I serialize the EF poco object to a JSON object so I can use it inside the view?</p></li>\n<li><p>How can I re-construct the customer object when I recieve updates from view?</p></li>\n<li><p>After the customer object is reconstructed, Is it possible to save the entire object graph (customer, orders, items) in one shot?</p></li>\n</ol>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","dictionary","default","model-binding"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":13002889,"title":"Mvc4 default model binder - Dictionary","body":"<p>I have a form which posts these values:</p>\n\n<p>survey[0].Key   75</p>\n\n<p>survey[0].Value 4</p>\n\n<p>survey[1].Key   76</p>\n\n<p>survey[1].Value 4</p>\n\n<p>I'm trying to use a default model binder to map it onto Dictionary type:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult CompleteSurvey(Dictionary&lt;int, int&gt; answers)\n{\n...\n}\n</code></pre>\n\n<p>but I get InvalidCastException: Specified cast is not valid.</p>\n\n<p>Why??</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","ado.net","entity-framework-4.1"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13017709,"title":"How to update a model in MVC using UpdateModel","body":"<p>I have a controller that gets passed in a data model from HTTPPost, and need to do some stuff to the model after it has been posted. I have a dropdownlist such as    ect.. If option1 is selected then i will need to get something from another entity and add it to the model. If add is selected, then the user will supply some information. The model doesn't get updated as the model also has a blank entity with it that the user must supply if the add option is selected. I get an error when the updateModel method is called. Any ideas?</p>\n\n<pre><code>           public ActionResult addFeatureReq(EF_ESTIMATE ef_estimate, decimal id, string FEATURE_REQ_ID,decimal archive_ID = 0)\n    {\n        decimal FEATURE_REQ_ID_dec;\n        decimal.TryParse(FEATURE_REQ_ID, out FEATURE_REQ_ID_dec);\n\n        if (FEATURE_REQ_ID_dec == 0)\n        {\n//nothing here yet\n        }\n        else\n        {\n\n            ef_estimate.EF_FEATURE_REQ = db.EF_FEATURE_REQ.Single(e =&gt; e.FEATURE_REQ_ID == FEATURE_REQ_ID_dec);\n\n\n        }\n        UpdateModel(ef_estimate);\n        if (!ModelState.IsValid)\n        {\n            ViewBag.FEATURE_REQ_ID = new SelectList(db.EF_FEATURE_REQ, \"FEATURE_REQ_ID\", \"Name_\");\n            return new AjaxableViewResult(ef_estimate);\n        }\n\n       db.SaveChanges();\n\n\n\n        return new AjaxableActionResult\n        {\n            DefaultResult = () =&gt; RedirectToAction(\"Details\", \"Summary\", new { id = ef_estimate.INITIATIVE_ID }),\n            AjaxResult = () =&gt; PartialView(\"_Success\")\n        };\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13017513,"title":"how to pass parameter from @Url.Action to controller function in asp.net mvc3","body":"<p>i have a function createPerson(int id) , i want to pass id from @Url.Action. below is reference code</p>\n\n<pre><code>public ActionResult CreatePerson(int id) //controller \nwindow.location.href = \"@Url.Action(\"CreatePerson\", \"Person\") + id;\n</code></pre>\n\n<p>the above code fails to pass id value to CreatePerson function</p>\n"},{"tags":["asp.net-mvc","mvc","modelbinders"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":413,"score":0,"question_id":1989071,"title":"Can't add ModelBinder attribute to a property of input model","body":"<p>I want to specify the model binder to use for a property of my input model.</p>\n\n<pre><code>public class SendEmailInput\n{\n    [Required, EmailAddress]\n    public string From { get; set; }\n    [Required]\n    public string To { get; set; }\n    [Required]\n    public string Subject { get; set; }\n    [Required, ModelBinder(typeof(RadEditorModelBinder))]\n    public string Body { get; set; }\n}\n</code></pre>\n\n<p>However the ModelBinderAttribute cannot be applied to properties. This seems stupid since I can apply it to method parameters. What should I do to work around this limitation?</p>\n"},{"tags":["c#","asp.net-mvc","linq"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12982763,"title":"Linq left not in right table","body":"<p>I'm not much of a LINQ programmer so this is baffling me somewhat. I have two tables: first a Schedule with a StartDate and an EndDate, plus ID; secondly, a ScheduleInstance table with an InstanceDate and a ScheduleID. For every day between Schedule.StartDate and Schedule.EndDate inclusive I need to create a ScheduleInstance row - however, only 24 hours ahead. As schedules are created and deleted within the 24 hour look-ahead, I have to spawn a checker every n minutes to check whether the ScheduleInstance for the ScheduleID exists within that 24 hour window.</p>\n\n<p>Models:</p>\n\n<pre><code>public class Schedule\n{\n    public int ID { get; set; }\n    public DateTime StartDate { get; set; }\n    public DateTime EndDate { get; set; }\n}\npublic class ScheduleInstance\n{\n    public int ID { get; set; }\n    public int ScheduleID { get; set; }\n    public DateTime InstanceDate { get; set; }\n}\n</code></pre>\n\n<p>The start of the LINQ:</p>\n\n<pre><code>var skeds = from sked in context.Schedules\n            join instance in context.ScheduleInstances\n                on sked.ID equals instance.ScheduleID\n            where ((sked.StartDate &lt;= DateTime.Now) &amp;&amp; (sked.EndDate &gt;= DateTime.Now))\n            select sked.ID;\n</code></pre>\n\n<p>(obviously wrong)</p>\n\n<p>To summarise, I need to get a list of Schedule.ID where a ScheduleInstance does NOT exist for ScheduleInstance.InstanceDate within the next 24 hours.</p>\n\n<p>Many thanks for any help.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>        DateTime tomorrow = DateTime.Now.AddDays(1);\n        var skeds = from sked in context.Schedules\n                    join instance in context.ScheduleInstances\n                         on sked.ID equals instance.ScheduleID into g\n                    where (sked.StartDate &lt;= tomorrow) &amp;&amp;\n                          (sked.EndDate &gt;= tomorrow) &amp;&amp;\n                           !g.Any()\n                    select sked;\n</code></pre>\n\n<p>This now works in that an instance is created (in subsequent code that's not relevant here) if one doesn't exist for tomorrow. If I set StartDate to Now+2mins then after 2 minutes that Schedule gets created - perfect. However, if I advance the clock 24 hours, I should be getting a whole bunch of new instances. To reiterate, if a Schedule start date is now and the end date is 30 days later, then I should end up with 31 instances, with each new instance created 24 hours in advance.</p>\n"},{"tags":["asp.net-mvc","razor","null","html.textboxfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13016854,"title":"MVC - null object in model, how do I render textboxfor with this","body":"<p>how do I render a textbox using textboxfor in MVC when I have a null class in the model.</p>\n\n<p>For example I have the following I am using as my model</p>\n\n<pre><code>public class ClassOne\n{\n    public string classOneProperty {get;set;}\n    public ClassTwo classTwoObject {get; set;}\n}\n\npublic class ClassTwo\n{\n    public string classTwoProperty {get;set;}\n}\n</code></pre>\n\n<p>So I have a table of class one values and the user clicks to edit an existing item of ClassOne. In ClassOne the object ClassTwo is null since it wasnt set at the initial creation of the item in the table, so when i try to do <code>@Html.TextBoxFor(m =&gt; m.classTwoObject.classTwoProperty)</code> I get a null reference error.</p>\n\n<p>How can I use the TextBoxFor to edit fields that have null objects in them since I still want them to bind to the model on postback?</p>\n\n<p>Thanks,\nDMan</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","sql-server-2008","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":12991660,"title":"Unable to find the requested .Net Framework Data Provider. MVC 4 with Entity Framework","body":"<p>Am using the MVC 4 in VS2010 SP1 installed machine. Am getting the following error</p>\n\n<p>Unable to find the requested .Net Framework Data Provider. It may not be installed. </p>\n\n<p>My WebConfig look like this </p>\n\n<pre><code>      &lt;connectionStrings&gt;\n    &lt;add name=\"BuildEntities\" connectionString=\"metadata=res://*/Entity.Build.csdl|res://*/Entity.Build.ssdl|res://*/Entity.Build.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;Data Source=www.xxxx.com,8754;Initial Catalog=xxxx;Persist Security Info=True;User ID=xxx;Password=xxxx;MultipleActiveResultSets=True&amp;quot;\"\n         providerName=\"System.Data.EntityClient\" /&gt;\n &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I had SQL Server 2008 installed in my lap.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3","mvchtmlstring"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13015930,"title":"Embed MvcHtmlString containing <script> with Javascript","body":"<p>The following method of embedding some <code>Html</code> from a <code>string</code> in a <code>&lt;div&gt;</code> with Javascript (using some JQuery) works:</p>\n\n<pre><code>var div = $('#someId');\nvar testHtml = '&lt;script&gt;&lt;/script&gt;&lt;div&gt;dummy Content&lt;/div&gt;';\ndiv.html(testHtml);\n</code></pre>\n\n<p>The Html code gets embedded and displayed in the div. If I put some <code>alert('Test')</code>-statement in the <code>&lt;script&gt;</code> tags, the alert would show up.</p>\n\n<p>What also works is this:</p>\n\n<pre><code>&lt;div id=\"someId\"&gt;@MvcHtmlString.Create(\"&lt;script&gt;&lt;/script&gt;&lt;div&gt;dummy Content&lt;/div&gt;\")&lt;/div&gt;\n</code></pre>\n\n<p>However I need to pass a <code>MvcHtmlString</code> to a javascript function and then embed this string with javascript.</p>\n\n<p>This works if there is no javascript code inside the string:</p>\n\n<pre><code>var div = $('#someId');\nvar inputItem = '@MvcHtmlString.Create(\"&lt;div&gt;dummy Content&lt;/div&gt;\")';\ndiv.html(inputItem);\n</code></pre>\n\n<p>However if there is javascript content inside the string, the <code>&lt;script&gt;</code>-part does not get embedded and the content doesn't get displayed properly.</p>\n\n<p>So this doesn't work properly:</p>\n\n<pre><code>var div = $('#someId');\nvar inputItem = '@MvcHtmlString.Create(\"&lt;script&gt;&lt;/script&gt;&lt;div&gt;dummy Content&lt;/div&gt;\")';\ndiv.html(inputItem);\n</code></pre>\n\n<p>Can someone explain why this doesn't work? Is there a simple trick to it?</p>\n"},{"tags":["jquery","asp.net-mvc","tablet"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13015049,"title":"How to call tablet's keyboard with jQuery?","body":"<p>I have a question about calling <code>tablet's keyboard</code>. </p>\n\n<p>I have a DropDownList and Textbox. And now when I choose DropDownList item I want to set focus on the Textbox and call numeric keyboard. That all have to work without pressing on the Textbox.</p>\n\n<p>I use <code>ASP.NET MVC</code> and <code>jQuery</code>.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":539,"score":5,"question_id":2686652,"title":"How to modify posted form data within controller action before sending to view?","body":"<p>I want to render the same view after a successful action (rather than use RedirectToAction), but I need to modify the model data that is rendered to that view. The following is a contrived example that demonstrates two methods that that do not work:</p>\n\n<pre><code>    [AcceptVerbs(\"POST\")]\n    public ActionResult EditProduct(int id, [Bind(Include=\"UnitPrice, ProductName\")]Product product) {\n        NORTHWNDEntities entities = new NORTHWNDEntities();\n\n        if (ModelState.IsValid) {\n            var dbProduct = entities.ProductSet.First(p =&gt; p.ProductID == id);\n            dbProduct.ProductName = product.ProductName;\n            dbProduct.UnitPrice = product.UnitPrice;\n            entities.SaveChanges();\n        }\n\n        /* Neither of these work */\n        product.ProductName = \"This has no effect\";\n        ViewData[\"ProductName\"] = \"This has no effect either\";\n\n        return View(product);\n    }\n</code></pre>\n\n<p>Does anyone know what the correct method is for accomplishing this?</p>\n"},{"tags":["c#","asp.net-mvc","mvc","validation","binding"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1329,"score":4,"question_id":559189,"title":"MVC RC Validation: Is this right?","body":"<p>I'm just trying to do some simple validation in MVC RC and am getting an error.  For the purposes of this question, I am <strong>not using the UpdateModel</strong>.</p>\n\n<p>Here is the code in the form:</p>\n\n<pre><code>&lt;%= Html.TextBox(\"UserId\")%&gt;\n&lt;%= Html.ValidationMessage(\"UserId\") %&gt;\n</code></pre>\n\n<p>If I add the following line in the controller, I will get a NullReferenceException on the TextBox:</p>\n\n<pre><code>ModelState.AddModelError(\"UserId\", \"*\");\n</code></pre>\n\n<p>So to fix this, I've also added the following line:</p>\n\n<pre><code>ModelState.SetModelValue(\"UserId\", ValueProvider[\"UserId\"]);\n</code></pre>\n\n<p>Why am I having to rebind the value?  <strong>I only have to do this if I add the error</strong>, but it seems like I shouldn't have to do this.  I feel like Im doing something incorrectly or just not familiar enough with binding.</p>\n\n<p>It looks like Im not the only one who has seen this.  Per request, here is the controller code:</p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\n    public ActionResult Create(FormCollection collection)\n    {\n        AppUser newUser = new AppUser();\n\n        try\n        {\n            newUser.UserId = collection[\"UserId\"];\n\n            AppUserDAL.AddUser(newUser);\n\n            return RedirectToAction(\"Index\");\n        }\n        catch (Exception ex)\n        {\n            ViewData[\"ReturnMessage\"] = ex.Message;\n\n            ModelState.AddModelError(\"UserId\", \"*\");\n            ModelState.SetModelValue(\"UserId\", ValueProvider[\"UserId\"]);\n\n\n            return View(newUser);\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":13001441,"title":"Delete .mdf file from app_data causes exception cannot attach the file as database","body":"<p>I am building a web application using VS 2012 MVC4 code first. In order to recreate the <code>.mdf</code> file after I changed the model, I manually deleted the file from the app_data directory in VS. I have done this a few times before without any problem.</p>\n\n<p>Now I receive an exception: </p>\n\n<blockquote>\n  <p><em>The underlying provider failed on Open. ==> Cannot attach the file\n  <code>MYDB.mdf</code> as database <code>'MYDB'</code>.</em></p>\n</blockquote>\n\n<p>I will appreciate your help on how to recreate the <code>.mdf</code> file.</p>\n\n<p>Thank you!</p>\n"},{"tags":["ajax","asp.net-mvc","partial-views","single-page-application"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1648,"score":2,"question_id":1573824,"title":"How do you build a Single Page Interface in ASP.NET MVC?","body":"<p>I want to build a webapplication with a \"Single Page Interface\", using ASP.NET MVC.</p>\n\n<p>I have searched if this was at least possible and I think the answer is: not by simple means (reading <a href=\"http://msdn.microsoft.com/en-us/magazine/cc507641.aspx#S2\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/magazine/cc507641.aspx#S2</a> second-last paragraph; that article is from May 2008, though).</p>\n\n<p>I found other examples which implemented this by coding/hacking with jQuery. However, I'm looking for a clean solution, using standard .NET approaches, if possible.</p>\n\n<p>What I want is precisely the same functionality when you create a new \"MVC Web Application\". However, instead of links to \"/Home/About\" which reloads the entire page, I want links to \"<b>#</b>Home/About\" which loads only the new part via AJAX.</p>\n\n<p>The standard approach of calling templates (partial views) with Html.RenderPartial is exactly what I want, only then loading them in through AJAX-requests.</p>\n\n<p>Of course, it might be that I can't use <i>these</i> templates that are rendered by the Master-page for some reason (maybe it's expecting to always be called in a certain context from a certain place or so). But maybe there's another clean solution for how to build your template-pages and fetching them from the Master-page.</p>\n\n<p>Who has a nice solution for implementing such thing, a Single Page Interface?</p>\n\n<p>PS: I'm developing in Visual Web Developer 2008 Express Edition with MVC 1.0 installed, in C#</p>\n\n<p><strong>[edit]</strong>\nBelow I read that working with the templates is possible and that jQuery looks indeed like inevitable, so I tested it.\nThe following code transforms regular links created by Html.ActionLink into anchor-links (with #) to contain history, and then fetch the page via AJAX and only injecting the html-part I'm interested in (i.e. the partial page inside div#partialView):</p>\n\n<pre><code>$(\"a\").each(function() {\n    $(this).click(function() {\n        $(\"div#partialView\").load($(this).attr(\"href\") + \" div#partialView\");\n        location.hash = $(this).attr(\"href\");\n        return false;\n    });\n});\n</code></pre>\n\n<p>These links also allow for graceful degredation.</p>\n\n<p>But what I have left now, is still fetching the <i>whole</i> page instead of only the partial page. Altering the controller didn't help; it still provided me html of the whole page, with all of these statements:</p>\n\n<pre><code>public ActionResult About()\n{\n    return View();\n    return View(\"About\");\n    return PartialView();\n    return PartialView(\"About\");\n}\n</code></pre>\n\n<p>How could I only return the content of the part I'm interested in (i.e. the contents of Home/About.aspx)?\nWhat I'd like is POSTing a value with AJAX (e.g. \"requesttype=ajax\") so that my controller knows the page is fetched via AJAX and only returns the partial page; otherwise it will return the whole page (i.e. when you visit /Home/About instead of #Home/About).</p>\n\n<p>Is a good practice to alter Global.asax.cs maybe, to create a new routing schema for AJAX-calls, which will only return partial pages? (I haven't looked into this much, yet.)</p>\n\n<p><b>[edit2]</b>\nRobert Koritnik was right: I also needed an About.ascx page (UserControl) with only the small HTML-content of that page. The first line of About.aspx was linked with the Master-page via <code>MasterPageFile=\"~/..../Site.master\"</code> which caused that all HTML was printed.</p>\n\n<p>But to be able to execute the following in my controller:</p>\n\n<pre><code>public ActionResult About()\n{\n    return Request.IsAjaxRequest() ? (ActionResult)PartialView() : View();\n}\n</code></pre>\n\n<p>I needed to alter the way a <code>PartialView</code> (.ascx file) and a <code>View</code> (.aspx) file was found, otherwise both methods would return the same page (<code>About.aspx</code>, ultimately resulting in an infinite loop).\nAfter putting the following in <code>Global.asax.cs</code>, the correct pages will be returned with <code>PartialView()</code> and <code>View()</code>:</p>\n\n<pre><code>protected void Application_Start()\n{\n    foreach (WebFormViewEngine engine in ViewEngines.Engines.Where(c =&gt; c is WebFormViewEngine))\n    {\n        /* Normal search order:\n        new string[] { \"~/Views/{1}/{0}.aspx\",\n            \"~/Views/{1}/{0}.ascx\",\n            \"~/Views/Shared/{0}.aspx\"\n            \"~/Views/Shared/{0}.ascx\"\n        };\n        */\n\n        // PartialViews match with .ascx files\n        engine.PartialViewLocationFormats = new string[] { \"~/Views/{1}/{0}.ascx\", \"~/Views/Shared/{0}.ascx\" };\n\n        // Views match with .aspx files\n        engine.ViewLocationFormats = new string[] { \"~/Views/{1}/{0}.aspx\", \"~/Views/Shared/{0}.aspx\" };\n    }\n\n    RegisterRoutes(RouteTable.Routes);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":50,"score":0,"question_id":13014506,"title":"Disable ASP.NET MVC validation","body":"<p>I have a simple ViewModel class in my asp.net mvc application.</p>\n\n<pre><code>public class DestinationViewModel\n{\n     [Display(Name = \"Country\")]\n     [some validation attributes]\n     public string CountryName { get; set; }\n\n     [Display(Name = \"Destination\")]\n     [some validation attributes]\n     public string DestinationName { get; set; }\n\n     public DateTime? DepartureDate { get; set; }\n\n     public DateTime? ArrivalDate { get; set; }\n}\n</code></pre>\n\n<p>When i pass data to controller my application shows validation errors on invalid departure and arrival date. But i donnt want such behavior. Is there any way(attribute) to disable validation only on <code>DepartureDate</code> and <code>ArrivalDate</code> fields? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":13002187,"title":"MVC4 View model int property is 1 but HTML rendered to 0?","body":"<p>I have a Model property which the controller sets to 1 but in my view I see it as 0 and 1 depending on how I access it. </p>\n\n<p>View snippet (these lines are absolutely consecutive too!)</p>\n\n<pre><code>@Html.DisplayFor(model =&gt; model.resumeStage)    \n@Html.HiddenFor(model =&gt; model.resumeStage)\n@Html.EditorFor(model =&gt; model.resumeStage)\n</code></pre>\n\n<p>Rendered HTML (I moved the <code>value=</code> at the front of the tag for readability)</p>\n\n<pre><code>1\n&lt;input value=\"0\" data-val=\"true\" data-val-number=\"The field resumeStage must be a number.\" data-val-required=\"The resumeStage field is required.\" id=\"resumeStage\" name=\"resumeStage\" type=\"hidden\" /&gt;\n&lt;input value=\"0\" class=\"text-box single-line\" id=\"resumeStage\" name=\"resumeStage\" type=\"number\" /&gt;\n</code></pre>\n\n<p>Shouldn't the value always be 1? I seem to lose the state of that property when I present it inside a text box! The views-controllers are strong bound by the model class which is defined as</p>\n\n<pre><code>public class CreateUserModel\n{\n    [Required]\n    public int resumeStage { get; set; } // &lt;== problem\n\n    public LocalProfile newLocalUser { get; set; }\n    public ExtProfile newExtUser { get; set; }\n\n    public CreateUserModel()\n    {\n        resumeStage = 0;\n        newLocalUser = new LocalProfile();\n        newExtUser = new ExtProfile();\n        preFillWithTestData();\n    }\n\n    private void preFillWithTestData()\n    {\n        // prefill the newLocalUser\n        // and newExtUser classes with dummy data\n    }\n}\n</code></pre>\n\n<p>The controller method receiving the form POST (where I flip the int from 0=>1) is : </p>\n\n<pre><code>[HttpPost]\npublic ActionResult UserRegistration(CreateUserModel newUser)\n{\n    try\n    {\n        //stage 0, setup local account\n        if (newUser.resumeStage &lt;= 0)\n        {\n            // do stuff\n            newUser.resumeStage = 1;\n        }\n\n        // stage 1, setup external account\n        if (newUser.resumeStage &lt;= 1)\n        {\n            // test an exception\n            Exception ex = new Exception(\"TEST: External service provider offline\");\n            throw ex;\n            newUser.resumeStage = 2;\n        }\n\n        return RedirectToAction(\"Index\");\n    }\n    catch (Exception ex)\n    {\n        return View(newUser); // newUser.resumeStage is 1 here but \n                              // view will disagree\n    }\n}\n</code></pre>\n\n<p>The controller method creating and presenting the form is:</p>\n\n<pre><code>public ActionResult UserRegistration()\n{\n    // Constructor prefills with test data, nothing more to do\n    CreateUserModel newUser = new CreateUserModel();\n\n    return View(newUser);\n}\n</code></pre>\n\n<p><strong>Question</strong>: Does anyone know why I cannot seem to have resumeStage shown as 1 inside the HTML rendered Textbox?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","cqrs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":124,"score":1,"question_id":12851479,"title":"CQRS practical example?","body":"<p>I came across a new term named CQRS(Command Query Responsibility Segregation) which states that the conceptual model should be split into command model and query model as a typical CRUD model in which the command and query happens in the same model.</p>\n\n<p>I am reading this article: <a href=\"http://martinfowler.com/bliki/CQRS.html\" rel=\"nofollow\">http://martinfowler.com/bliki/CQRS.html</a></p>\n\n<p>and it has all theory information. But I don't understand how will I be implementing this in my project. My project is in asp.net MVC3, EF 4.3, Jquery.</p>\n\n<p>Can anybody suggest me how to practically implement it in my project?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":49,"score":1,"question_id":13011095,"title":"Find URL scheme","body":"<p>I want to check whether the incoming url having http or https in c#? Is there any default method to find the url scheme(http/https)?</p>\n"},{"tags":["c#","wpf","asp.net-mvc","winforms","model-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13008398,"title":"WPF or WinForms, MVC querystring-like value provider/binding","body":"<p>I'm working on a WPF project using a third party web browser control. To pass data from the  web page I'm doing a redirect in JavaScript and then cancelling the \"Navigating\" event of the browser [see Using WebKit.NET to call a C# function from JavaScript).</p>\n\n<p>In the navigating event I'm doing some URL crunching to create a dictionary of arguments from the URL parameters, and then call a particular method (also based on the URL).</p>\n\n<p>With a URL that looks something like this = 'app-Method?arg1=5.3&amp;arg2=3' I end up with a Dictionary containing the following information:</p>\n\n<pre><code>//var methodName = \"Method\";\n//var dictionary = { { \"arg1\", \"5.3\" }, { \"arg2\", \"3\" } };\n</code></pre>\n\n<p>It I can't do the conversion at this stage as different methods would have different arguments with different types.</p>\n\n<p>I'd then call another method (method name from the URL) like this:</p>\n\n<pre><code>switch(methodName)\n{\n     case \"Method\":\n         Method(Convert.ToDecimal(dictionary[\"arg1\"]), Convert.ToInt(dictionary[\"arg2\"]));\n         break;\n}\n</code></pre>\n\n<p>Obviously in MVC a HTTPGet action method does all this conversion, crunching, and method calling for me. I was wondering if (using the MVC libraries or some other method) it is possible to replicate this sort of behaviour in a non-MVC application, just for the purposes of cleaner looking code and more simplicity if there are lots of different methods.</p>\n\n<p>I hope that makes sense, I'm finding it a little difficult to explain.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Here's full example code:</p>\n\n<pre><code>this.browser.Navigating += (s, ev) =&gt;\n        {\n            if (ev.Url.AbsoluteUri.Contains(\"app\"))\n            {\n                var method = ev.Url.Host.Split('-')[1];\n                var arguments = ev.Url.Query.TrimStart('?').Split('&amp;');\n\n                var dictionary = new Dictionary&lt;string, string&gt;();\n\n                foreach (var arg in arguments)\n                {\n                    var split = arg.Split('=');\n\n                    dictionary.Add(split[0], split[1]);\n                }\n\n                switch (method)\n                {\n                    case \"add\":\n                        Add(Convert.ToInt32(dictionary[\"first\"]), Convert.ToInt32(dictionary[\"second\"]));\n                        break;\n                    default:                            \n                        break;\n                }\n\n                ev.Cancel = true;\n            }\n        };\n</code></pre>\n"},{"tags":["asp.net-mvc","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13011114,"title":"vs.net 2010 Solution Explorer for MVC projects","body":"<p>It is a PIA to find related project files in asp.net-mvc projects. Views / controllers / scripts / models are all scattered around different projects and folders. Productivity Tools->Solution Navigator add-on does not help neither. Do you know an extension /add-on, to help ease the pain of navigating thru mvc projects.</p>\n"},{"tags":["asp.net-mvc","iis","iis7","wix"],"answer_count":3,"favorite_count":7,"up_vote_count":15,"down_vote_count":0,"view_count":8082,"score":15,"question_id":686190,"title":"How do I install an ASP.Net MVC application on IIS 7 using Wix?","body":"<p>For IIS6 I can use the IIS helpers in Wix to install a web application like this:</p>\n\n<pre><code>&lt;iis:WebAppPool \n    Id=\"AP_MyApp\" \n    Name=\"My Application Pool\" \n    Identity=\"networkService\" /&gt;\n&lt;iis:WebApplication \n    Id=\"WA_MyApp\" \n    Name=\"MyApp\" \n    WebAppPool=\"AP_MyApp\"&gt;\n    &lt;iis:WebApplicationExtension\n        CheckPath=\"no\"\n        Executable=\"[NETFRAMEWORK20INSTALLROOTDIR]aspnet_isapi.dll\"\n        Verbs=\"GET,HEAD,POST\"/&gt;\n&lt;/iis:WebApplication&gt;\n</code></pre>\n\n<p>Unfortunately, this doesn't work for IIS7. We don't want to use the aspnet_isapi.dll mechanism, and instead want the integrated pipeline to handle the request routing. The app pool created by this script is in Classic mode not Integrated mode so none of the handlers get run correctly.</p>\n\n<p>How can I correctly install an MVC app on IIS 7?</p>\n"},{"tags":["asp.net","asp.net-mvc","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12981411,"title":"How can I migrate legacy passwords to SimpleMembership","body":"<p>I have a legacy system which is getting rebuilt in MVC4.  I understand how to connect SimpleMembership to my 'users' table, but I'm not sure how to import my existing passwords into the webpages_Membership table (in particular with regard to the password encoding).</p>\n\n<p>How can I migrate my legacy passwords to the new SimpleMembership 'way' ?  If possible, I'd like to do this all via SQL code.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","c#-4.0","asp.net-mvc-2","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13012449,"title":"How to filter the image data in MVC4 using linq","body":"<p>How to display images in MVC4 from database.</p>\n\n<p>Step 1:\nIn my code, retrieve the data and place in array class.</p>\n\n<pre><code>public class ImageTable\n{\n    public string ImageId { get; set; }\n    public string CategoryId { get; set; }\n    public byte[] Image { get; set; }\n}\n\npublic class DataAcceess\n{\n    public ImageTable[] GetImages()\n    {\n        ImageTable[] Images = null;\n        SqlConnection Conn = new SqlConnection(\"Data Source=;Initial Catalog=;UserID=;Password=;\");\n\n        Conn.Open();\n        //SqlCommand Cmd = new SqlCommand(\"Select [Product ID],ImageView1 From Cpecial_Image_tbl\", Conn);\n\n        SqlCommand Cmd = new SqlCommand(\"Select b.[Category ID],a.[Product ID], a.[ImageView1] from Cpecial_Image_tbl as a  inner join [Cpecial_Product_tbl] as b ON a.[Product ID]=b.[Product ID]\", Conn);\n\n        SqlDataReader Reader = Cmd.ExecuteReader();\n        DataTable dt = new DataTable();\n        dt.Load(Reader);\n        Images = new ImageTable[dt.Rows.Count];\n        int i = 0;\n        foreach (DataRow Dr in dt.Rows)\n        {\n            Images[i] = new ImageTable()\n            {\n                ImageId = (string)Dr[\"Product ID\"],\n                CategoryId = (string)Dr[\"Category ID\"],\n                Image = (byte[])Dr[\"ImageView1\"]\n            };\n            i = i + 1;\n        }\n\n\n        Conn.Close();\n        return Images;\n    }\n</code></pre>\n\n<p>Step 2: In controller retreive the image value assign, it in byte array and return to the view like this. </p>\n\n<pre><code>        public ActionResult Index(string id)\n        {\n\n            // var image = db.Categories.First(m =&gt; m.CategoryID == id).Picture;\n\n            DataAcceess objContext = new DataAcceess();\n\n            //byte[] Image = (from a in Images select a.Image.ToArray());\n\n\n            byte[] a;\n\n            foreach (var item in objContext.GetImages())\n            {\n                a = item.Image;\n                return File(a, \"Image/jpg\");\n            }\n\n               return View();\n        }\n</code></pre>\n\n<p>Step 3: I added the tag in view like this\n           \nthis will show only one image.</p>\n\n<p>I want to show all the the images, and also manipulate the image with respect to the Filters<br>\n(sorting ascending , desending with catagoryId) like in shopping cart.</p>\n\n<p>Could any one give me the solution?</p>\n"},{"tags":["asp.net-mvc","simplemembership"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13012612,"title":"webpages_UsersInRoles missing","body":"<p>I am using ASP.NET MVC 4 together with SimpleMemmbership.</p>\n\n<p>When I built my application the following tables were built automatically</p>\n\n<p>webpages_Membership</p>\n\n<p>webpages_OAuthMembership</p>\n\n<p>webpages_Roles</p>\n\n<p>I can successfully register users.</p>\n\n<p>However, the <strong>webpages_UsersInRoles</strong> table seems to be missing.</p>\n\n<p>Does anyone know why this table is missing?</p>\n"},{"tags":["asp.net-mvc","namespaces"],"answer_count":4,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":2901,"score":9,"question_id":799838,"title":"ASP.NET MVC How to specify which folder the View pages reside in?","body":"<p>by default the ASP.NET MVC engine searches the following folders for View pages:</p>\n\n<ul>\n<li>/Views/<strong>{Controller_Name}</strong>/{Action}.aspx  </li>\n<li>/Views/<strong>Shared</strong>/{Action}.aspx</li>\n</ul>\n\n<p><em>However I want to put some of my View pages like this:</em></p>\n\n<ul>\n<li>/Views/<strong>{Namespace}/{Controller_Name}</strong>/{Action}.aspx</li>\n</ul>\n\n<p><strong><em>How can I let the engine look for this?</em></strong></p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","mini-profiler"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":211,"score":2,"question_id":6798028,"title":"MVC Mini Profiler Exception on MiniProfiler.Stop()","body":"<p>I'm just added Mini Profiler to my MVC3 project with nuget and I've followed the basic steps to get it set up. Starting the profile on Application_BeginRequest() and stopping it on Application_EndRequest()</p>\n\n<pre><code>    protected void Application_BeginRequest()\n    {\n        if (Request.IsLocal)\n        {\n            MiniProfiler.Start();\n        }\n\n    }\n\n    protected void Application_EndRequest()\n    {\n        MiniProfiler.Stop();\n    }\n</code></pre>\n\n<p>MiniProfiler.Stop() is throwing an exception - <strong>\"Server cannot append header after HTTP headers have been sent.\"</strong></p>\n\n<p>Has anybody else seen this? </p>\n"},{"tags":["asp.net-mvc","nuget"],"answer_count":3,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":2817,"score":9,"question_id":5981458,"title":"NuGet package for ASP.NET MVC 3","body":"<p>I have recently started to use NuGet and I was wondering if there is an asp.net mvc 3 package that I can install so that I do not have to reference the aspnet mvc3 assemblies via a lib folder like the traditional way with all references set to CopyLocal = true. At the moment I have the following assemblies in my lib folder:</p>\n\n<pre>\nMicrosoft.Web.Infrastructure.dll\nSystem.Web.Helpers.dll\nSystem.Web.Mvc.dll\nSystem.Web.Razor.dll\nSystem.Web.WebPages.Administration.dll\nSystem.Web.WebPages.Deployment.dll\nSystem.Web.WebPages.dll\nSystem.Web.WebPages.Razor.dll\n</pre>\n\n<p>Any idea?</p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","visual-studio","debugging"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":100,"score":3,"question_id":13000507,"title":"Why does System.Diagnostics.Debug.WriteLine not work in VS2010 C#","body":"<p>I have the following line in my code:</p>\n\n<pre><code>System.Diagnostics.Debug.WriteLine(\"Title:\" + title + \"title[top]: \" + title[top] + \"title[sub]: \" + title[sub]);\n</code></pre>\n\n<p>When I debug I see it going to this line but when I look at the output window in VS2010 I don't see anything even though it shows for \"Debug\" and I ran using \"debug > run\" ?</p>\n"},{"tags":["c#","javascript","asp.net","asp.net-mvc"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":12991824,"title":"How to automatically upload file after file has been chosen","body":"<p>I have the following code for uploading a file in my site:</p>\n\n<pre><code>@using (Html.BeginForm(\"UploadProfileImage\", \"Member\", FormMethod.Post, new { @encType = \"multipart/form-data\" }))\n   {\n\n     @Microsoft.Web.Helpers.FileUpload.GetHtml(initialNumberOfFiles: 1, includeFormTag: false, uploadText: \"Upload File\",allowMoreFilesToBeAdded:false)\n    &lt;span class=\"success\"&gt;@ViewData[\"SuccessMessage\"]&lt;/span&gt;\n     &lt;input class=\"button\" type=\"submit\" name=\"submit\" value=\"Upload\" /&gt;         \n\n}\n</code></pre>\n\n<p>I want this to be able to automatically post after the user selects the file from the \"browse\" button.  Currently, the user has to click upload every time the user chooses a file to upload, anyway to make this process automatic?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":56,"score":-1,"question_id":12981394,"title":"select a value from telerik ddl using jquery","body":"<p>Is there a way to select a value from telerik ddl using jquery?</p>\n\n<p>Here is my Telerik DDL:</p>\n\n<pre><code>        &lt;%= Html.Telerik().DropDownList().Name(\"Quarter\")\n           .Items(items =&gt; {\n            items.Add().Text(\"\").Value(\"\");\n            items.Add().Text(\"Quarter1\").Value(\"Quarter1\");\n            items.Add().Text(\"Quarter2\").Value(\"Quarter2\");\n            items.Add().Text(\"Quarter3\").Value(\"Quarter3\");\n            items.Add().Text(\"Quarter4\").Value(\"Quarter4\");\n                })%&gt;   \n</code></pre>\n\n<p>I am trying the following way, but its doesnt populate the list:</p>\n\n<pre><code>$(\"#Quarter\").val(\"Quarter2\");\n</code></pre>\n\n<p>Rendered HTML for Telerik DDL after selecting value:</p>\n\n<pre><code>&lt;div tabIndex=\"0\" class=\"t-widget t-dropdown t-header\" id=\"Quarter\" style=\"width: 104px;\" jQuery15103337264984743067=\"21\" value=\"Quarter2\"&gt;\n  &lt;div class=\"t-dropdown-wrap t-state-default\"&gt;\n    &lt;span class=\"t-input\"&gt;\n      Text - Quarter 2\n    &lt;span class=\"t-select\"&gt;\n      &lt;span class=\"t-icon t-arrow-down\"&gt;\n  &lt;input name=\"Quarter\" id=\"Quarter\" style=\"display: none;\" type=\"text\"/&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12400780,"title":"Errors with Microsoft.Web.Mvc after upgrading to MVC 4.0","body":"<p>I have upgraded an MVC site to MVC version 4.0, .NET Framewrok version 4.5.  After doing this I have been getting runtime errors from my Views:</p>\n\n<p>Method Microsoft.Web.Mvc.LinkExtensions.ActionLink: type argument 'ContactCentre.Controllers.LogOnController' violates the constraint of type parameter 'TController'.</p>\n\n<p>Here is the code that throws the exception:</p>\n\n<pre><code>Url.Action&lt;LogOnController&gt;(c =&gt; c.LogOff())\n</code></pre>\n\n<p>Constraint TController is a check that the type is of type Controller.  My controller LogOnController does inherit from Controller, so that constraint is met.</p>\n\n<p>I think the problem is with my version of library Microsoft.Web.Mvc.  This is Runtime Version v4.0.30319, Version 3.0.0.0.  I think this means it is targeting MVC version 3.</p>\n\n<p>Is there a MVC version 4 compatable version of Microsoft.Web.Mvc?  Or am I barking up the wrong tree?  Any help would be welcome.</p>\n"},{"tags":["asp.net-mvc","iis-7.5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13010130,"title":"IIS settings for mvc application using Windows Authentication","body":"<p>I have developed an MVC intranet application which I have successfully deployed to IIS.</p>\n\n<p>I have enabled Windows Authentication and denied access to anonymous users, however, only some accounts on the domain are able to gain access to the application.</p>\n\n<p>I have checked these accounts and there is nothing special about them that I can see.</p>\n\n<p>The first check for security is Domain Users which everyone is a member of.</p>\n\n<p>All other users are prompted to login but it does not recognize their credentials.</p>\n\n<p>I get a 401.1 - Unauthorized Error</p>\n\n<p>Not sure what else to try. Any suggestions would be appreciated.</p>\n"},{"tags":["javascript","asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":125,"score":2,"question_id":12980532,"title":"ASP.NET MVC4 won't submit with client side validation if first submitted with errors","body":"<p>I have a simple setup but cannot figure out why this wont work. Here's what I have set up:</p>\n\n<ul>\n<li>MVC4 </li>\n<li>Html.EnableUnobtrusiveJavaScript() and\nHtml.EnableClientValidation() enabled </li>\n<li>jQuery 1.6.2,\njquery.validate.min.js, and jquery.validate.unobtrusive.min.js\nreferenced</li>\n<li>No events bound to form or button submit</li>\n</ul>\n\n<p>The problem is, it seems to work on the client side, where I can submit a form and it shows the appropriate validation errors. However, when I then properly fill out the form and hit submit, it does nothing and the last error message I had previously is still displayed. If I go back and clear fields, the validation appears to still be working (validation summary is updated appropriately). If I submit the first time with all fields correctly entered, it works just fine. It's only if I first have an error that it cannot submit again.</p>\n\n<p>The model only has [Required] on firstname, lastname, and email. No other attributes. Also, FormFieldFor is just a wrapper for EditorFor().</p>\n\n<p>Code below. Any ideas? Thanks.</p>\n\n<pre><code>@model AscendOne.CareOne.Mvc.Models.ResourceGuideUserModel\n\n@*Form*@\n&lt;form id=\"guide-download-submit\" method=\"get\" action=\"/leads/\" target=\"_blank\"&gt;\n\n    @{\n        Html.EnableUnobtrusiveJavaScript();   \n        Html.EnableClientValidation();\n    }\n\n\n    @Html.ValidationSummary()\n\n    @if (Model.CampaignID != null)\n    {&lt;input type=\"hidden\" name=\"CampaignID\" value=\"@Model.CampaignID\" /&gt;}\n    @if (!String.IsNullOrWhiteSpace(Model.PDFUrl))\n    {&lt;input type=\"hidden\" name=\"RedirectUrl\" value=\"@Model.PDFUrl\" /&gt;}\n\n    &lt;fieldset&gt;\n        @Html.FormFieldFor(m =&gt; m.FirstName)\n        @Html.FormFieldFor(m =&gt; m.LastName)\n        @Html.FormFieldFor(m =&gt; m.Email)\n    &lt;/fieldset&gt;\n\n    &lt;button type=\"submit\"&gt;Download The Guide&lt;/button&gt;\n\n&lt;/form&gt;\n\n\n\n\npublic class ResourceGuideUserModel\n    {\n        public string CampaignID { get; set; }\n        public string PDFUrl { get; set; }\n\n        [Required]\n        [DisplayName(\"First Name:*\")]\n        public string FirstName { get; set; }\n\n        [Required]\n        [DisplayName(\"Last Name:*\")]\n        public string LastName { get; set; }\n\n        [Required]\n        [DisplayName(\"Email Address:*\")]\n        public string Email { get; set; }\n    }\n</code></pre>\n"},{"tags":["c#","jquery","asp.net-mvc","jquery-dialog","html.dropdownlist"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":12974089,"title":"Using jQuery with ASP.NET MVC","body":"<p>I can`t use jquery much so i need help please.\nI am using jQuery UI dialog like here.\nI have Link that opens the dialog where is rendered my partial view.</p>\n\n<pre><code>$(function () {\n    $(\"#transferTo\").dialog({\n        autoOpen: false,\n        height: 100,\n        width: 300,\n        modal: true,\n        resizable: false,\n        open: function (event, ui) {\n            $(this).load('&lt;%= Url.Action(\"TransferTo\", \"Pacient\") %&gt;');\n        },\n        buttons:\n        {\n            \"Transfer\": function () {\n                // do something in database\n                $(this).dialog(\"close\");\n            },\n            \"Cancel\": function () {\n                $(this).dialog(\"close\");\n            }\n        }\n    });\n    $(\"#transferToLink\").click(function () {\n        $(\"#transferTo\").dialog(\"open\");\n        return false;\n    });\n});\n\n&lt;a href=\"javascript:void()\" id=\"transferToLink\"&gt;Transfer to&lt;/a&gt;\n</code></pre>\n\n<p>Partial view looks like:</p>\n\n<pre><code>&lt;div id=\"transferTo\"&gt;\n    Zmena kliniky\n&lt;%= Html.DropDownList(\"klinika\", ViewData[\"kliniky\"] as SelectList)%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In the main view there are rows with some data. Each row is user with his id.\nSo what i want to do...</p>\n\n<p>When i click on the link transferTo (it shows after click on Edit link on each row) i need to pass the id of the user to the jquery function and use it on the Click event TransferTo of the dialog.\nWhen user clicks on the TransferTo button in the dialog it must take id parameter and selected value from the dropdownlist from dialog and use it in my C# function comunicating with the database (repository.Edit(id,selectedValue))</p>\n"},{"tags":["asp.net-mvc","entity-framework","domain-driven-design","poco"],"answer_count":5,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":230,"score":9,"question_id":12982680,"title":"Gave up DDD, but need some of its benefits","body":"<p>I'm giving up traditional DDD, which is often a massive timewaster, and forces me to do endless mapping: <code>data layer &lt;--&gt; domain layer &lt;--&gt; presentation layer</code>.</p>\n\n<p>For even a small change I must change data models, domain models, presentation models / viewmodels, then the repositories, manager/service classes, and of course the AutoMapper maps, and then test the whole thing! Each call requires calling a layer which calls a layer which calls the underlying code. <em>And I don't get anything in return other than \"you might need it in the future\"</em>. Meh.</p>\n\n<p><strong>My current approach</strong> is more pragmatic:  </p>\n\n<ul>\n<li>I don't worry about the difference between the \"data layer\" and \"domain layer\" any longer, as there's no point - the terms are interchangeable. I let EF do it's thing, and add interfaces and repositories on top when needed.  </li>\n<li>I've merged my \"data\" and \"domain\" projects (into \"core\", boring name, I know), and I could almost swear that Visual Studio is actually running faster.  </li>\n<li>I allow EF entities to go up and down the stack, but, I still map them to presentation models / viewmodels as usual.  </li>\n<li>For simple operations I call repositories directly from controllers, for complex operations I use domain managers/services as usual; the repositories never expose IQueryable.  </li>\n<li>I define entities/POCOs as partial classes, so I can add domain behavior separately in corresponding partial classes.</li>\n</ul>\n\n<p><strong>The problem:</strong> I now use the entities all over the place, so client code can see their <em>navigation properties</em>. And the models are always materialized after they leave a repository, so those navigation properties are often null.</p>\n\n<p><strong>Possible solutions:</strong><br>\n1. Live with it. It's ugly but preferable to the problems explained above.<br>\n2. For each entity, define an interface which hides the navigation properties; and make client code use the interfaces. But ironically, this means another layer (albeit thin and manageable).<br>\n3. What else?</p>\n\n<p>I'm not used to this sort of fast-and-loose programming style, so maybe I'm missing some obvious tricks. Is there anything else I should take into account? I'm sure there are other problems I will encounter soon.</p>\n\n<p><strong>EDIT:</strong>\nThis question is not about DDD. And note that many struggle with a traditional DDD approach -- <a href=\"http://stackoverflow.com/a/1961139/1711500\">Seemann appears to</a> arrive at <a href=\"http://blog.ploeh.dk/2012/02/09/IsLayeringWorthTheMapping.aspx\" rel=\"nofollow\">the same conclusion</a>, <a href=\"http://ayende.com/blog/4788/the-wages-of-sin-proper-and-improper-usage-of-abstracting-an-or-m#feedback\" rel=\"nofollow\">Rahien speaks about the \"Useless Abstraction For The Sake Of Abstraction Anti Pattern\"</a>, and Evans himself said DDD is only truly useful in 5% of cases. Also <a href=\"http://stackoverflow.com/a/796961/1711500\">see this thread</a>. Some of the comments/answers are predictably about how I'm doing DDD wrong, or how I can tweak my system to do it right. However, I'm not asking about DDD or bashing it for the cases where it is suitable, rather I'd like to know what others are doing in line with the thinking I've described above. It's not as if DDD is a panacea to all design ills, every decade a new process comes out (RUP anyone? XP, Agile, Booch, blah...). DDD is just the shiniest new one, and the most well known and used. But pragmatism should come first as I'm trying to build salable products that ship on time and are easy to maintain. The most useful programming axiom I've learned, <em>by far</em>, is YAGNI. <em>What I want is to change my system to a sort of \"DDD-lite\", where I get it's strong design/OOP/pattern philosophy, but without the fat.</em></p>\n"},{"tags":["asp.net-mvc","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13010162,"title":"Assigning default values if NULL","body":"<p>I have an MVC app where a user can select company benfits, there are 10 different benefits and they can have none up to all 10 of these. In my view I have the ten listed with radio buttons to indicate whether they are required or not. There is also a calculation performed in the controller that adds all the values together to give a total.</p>\n\n<p>As an example in my controller - </p>\n\n<pre><code>newuser.LifeAssurance.LifeAssuranceRequired = viewModel.LifeAssuranceRequired;    \nnewuser.LifeAssurance.LifeAssuranceSchemeName = viewModel.LifeAssuranceSchemeName;\nnewuser.LifeAssurance.LifeAssuranceProviderName = viewModel.LifeAssuranceProviderName;\nnewuser.LifeAssurance.LifeAssuranceBenefitLevel = viewModel.LifeAssuranceBenefitLevel;\nnewuser.LifeAssurance.LifeAssuranceEmployerCost = viewModel.LifeAssuranceEmployerCost;\nnewuser.LifeAssurance.LifeAssuranceEmployeeCost = viewModel.LifeAssuranceEmployeeCost;\n</code></pre>\n\n<p>Since the user may decide not to choose this benefit is it possible to assign the cost as 0 if they have not made a selection in the view model? Can I check if it's null and add 0 in that case?</p>\n"},{"tags":["asp.net-mvc","localization","fluentvalidation","griffin.mvccontrib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":11474293,"title":"Griffin localization and Fluent Validation","body":"<p>I am new to Griffin localization, it seems very cool. However, examples are only showing me how to translate MVC validation attributes.</p>\n\n<p>I am using minimum if not none of the mvc validation attributes. My idea is (try) not to validate and report messages twice at data layer and UI layer. I create validators at data layer with with Fluent Validation.</p>\n\n<p>Could you please give me a quick pointer (if it exists) how we can integrate Griffin Localization with Fluent Validation at data layer? </p>\n"},{"tags":["asp.net-mvc","checkbox","viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12980682,"title":"View Models and Check Boxes in View","body":"<p>I have a newbie question, which I have tried to understand for the past few days. Hopefully someone can be kind enough to help me understand the programming flow.</p>\n\n<p>Assuming I have a model, the information is stored in the database:</p>\n\n<pre><code>public class Student\n{\n    public int studentID { get; set; }\n    public string studentName { get; set; }\n    public strin studentGrade {get; set; }\n}\n\npublic class StudentDBContext : DbContext\n{\n    public DbSet&lt;Student&gt; Students { get; set; }\n}\n</code></pre>\n\n<p>and I want to display it into the view, with additional checkbox so I can select which students to be promoted into the next grade. I read that one way to do it is by putting into view model:</p>\n\n<pre><code>public class StudentViewModel\n{\n    public bool promoted { get; set; }\n    public Student stu { get; set; }\n}\n</code></pre>\n\n<p>But I am stuck on is this the way to do it? and if yes, how do you put into the view where it will display all the students with a checkbox next to it. Afterwards, I want to update all the grade for the students whose checkboxes are ticked. For example:</p>\n\n<p>Student A, Student B, Student D promoted from Grade 1 to Grade 2. So I want to display the students, tick Student A, B and D and submit to update the Grade.</p>\n\n<p>Step by step example will be much appreciated.</p>\n\n<p>Update 1:</p>\n\n<p>Controller:</p>\n\n<pre><code>    [HttpGet]\n    public ViewResult CheckBox()\n    {\n        var studentViewModels = db.Students.Select(m =&gt; new StudentViewModel()\n        {\n            stu = m\n        }).ToList();\n\n        return View(studentViewModels);\n    }\n\n    [HttpPost]\n    public ActionResult CheckBox(IList&lt;studentViewModel&gt; list)\n    {\n\n        foreach (var stuUpdate in list.Where(m =&gt; m.promoted))\n        {\n            var stuRow = db.Students.Find(stuUpdate.stu.studentID);\n            stuRow.studentName = stuRow.studentName + \"1\";\n            db.Entry(stuRow).State = EntityState.Modified;\n            db.SaveChanges();\n            return RedirectToAction(\"CheckBox\");\n        }\n        return RedirectToAction(\"CheckBox\");\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@model IList&lt;School.ViewModels.StudentViewModel&gt;\n\n@using (Html.BeginForm())\n{\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;\n\n    &lt;/th&gt;\n    &lt;th&gt;\n        student ID\n    &lt;/th&gt;\n    &lt;th&gt;\n        student name\n    &lt;/th&gt;\n    &lt;th&gt;\n        student grade\n    &lt;/th&gt;\n&lt;/tr&gt;\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.CheckBoxFor(modelItem =&gt; item.promoted)\n            @Html.HiddenFor(modelItem =&gt; item.stu.studentID)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.stu.studentID)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.stu.studentName)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.stu.studentGrade)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n\n&lt;/table&gt;\n&lt;input type=\"submit\" value=\"save\" /&gt;\n}\n</code></pre>\n\n<p>However currently hit by the following error:\n    Value cannot be null.\n    Parameter name: source</p>\n\n<pre><code>Source Error:\nforeach (var stuUpdate in list.Where(m =&gt; m.promoted))\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","url-routing","ignoreroute"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3160,"score":4,"question_id":1765726,"title":"IgnoreRoute in ASP.MVC","body":"<p>I am trying to access a .js file in the views directory.\nI have an MVC application with /Views/Home/MyControl.ascx\nI have a js file /Views/Home/MyControl.js</p>\n\n<p>I wish to reference the .js file and keep it with the control.\nI have tried the following entries in the routing, and none seem to work.</p>\n\n<pre><code>        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n        routes.IgnoreRoute(\"{file}.js\");\n        routes.IgnoreRoute(\"{resource}.js/{*pathInfo}\");\n        routes.IgnoreRoute(\"{controller}/{resource}.js/{*pathInfo}\");\n        routes.IgnoreRoute(\"{*alljs}\", new { alljs = @\".*\\.js(/.*)?\" });\n</code></pre>\n\n<p>Please help, please don't suggest adding the .js file to the scripts directory.\nI would like to make it work this way, or know why it cannot be done.</p>\n\n<p>I would put the script into the page, only script debugging is broken in VS2010 B2.</p>\n\n<p>Thanks\nRegards\nCraig.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13008921,"title":"user role based data querying","body":"<p>I have a common problem as follows for a system. I'm developing the system with entity framework &amp; MVC3. I would like to know how to solve the following issue.</p>\n\n<p>I have users in a user table have the access to the system and the users are assigned to specific divisions within different departments. And also they will have the hierarchy where the managers can view the users who are working under their department/division.</p>\n\n<p>For example if the IT manager login into the system, I want to show only the people who are working in the IT division under him (the same department) &amp; I don't want to show all the other users details to him. Currently I'm using a long sql query to check and load the relevant users from that division, but I would like to do it through lINQ, with entity framework in any effective way.</p>\n\n<p>if anybody can suggest any changes in the database structure of the membership table and sample code to achieve this, it would be great. Please do let me know if the question is not clear.</p>\n"},{"tags":["asp.net-mvc","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13009352,"title":"how i can i handle the returned Json to construct another Ajax.actionlink","body":"<p>I have the following Ajax.actionlink which will the action method and return a JSON:-</p>\n\n<pre><code>@Ajax.ActionLink(\"Start Process\", \"StartProcess\", \"Home\",\nnew { name = \"BuisnessProcess\" },\nnew AjaxOptions \n    {   HttpMethod = \"POST\",\n        LoadingElementId = \"tobehide2\",\n        UpdateTargetId = \"startprocess\",\n        OnSuccess = \"Animate\" }) \n&lt;/div&gt; &lt;img id=\"tobehide2\" src=\"~/Content/ajax-loading2.gif\" /&gt;\n</code></pre>\n\n<p>Currently when the user clicks on the link it will display the JSON info in the browser:-</p>\n\n<pre><code>{\"activityId\":\"2119_666_BuisnessProcess_process1_setverialbe\",\"processId\":\"666_BuisnessProcess_process1\"}\n</code></pre>\n\n<p>But what i trying to do is to build another Ajax.actionlink based on the returned Json and pass the <code>activityId</code> as a new parameter to the Ajax.actionlink.</p>\n\n<p>Best Regards</p>\n\n<p><strong>:::UPDATED:::</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult StartProcess(string name)\n{\n    using (var client = new WebClient())\n    {\n\n        try\n        {\n            var query = HttpUtility.ParseQueryString(string.Empty);\n            query[\"j_username\"] = \"kermit\";\n            query[\"hash\"] = \"9449B5ABCFA9AFDA36B801351ED3DF66\";\n            query[\"loginAs\"] = User.Identity.Name;\n            query[\"imagurl\"] = \"123\";\n\n            var url = new UriBuilder(\"http://localhost:8080/jw/web/json/workflow/process/start/\" + name.ToString() + \":28:process1\");\n\n            url.Query = query.ToString();\n            string json = client.DownloadString(url.ToString());\n\n            Thread.Sleep(500);\n\n            return Content(\"Process started succsfully. Returned values are :-\" + json);\n        }\n        catch (System.Net.WebException ex)\n        {\n\n            return Content(\"\", \"application/json\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":["wpf","asp.net-mvc","mvc","mvvm","windows-phone"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13009415,"title":"ASP.Net MVC AND WPF wioth probably Windows 8 Phone","body":"<p>I am currently developing an application that utlises telerik ORM tools to manage access to a back end database. On top of this layer I am implementing a Business Layer(domain) containing the real world objects that represent my application model.\nSo far so good.</p>\n\n<p>The issue I have now is one of serious confusion. I will be developing a ASP.Net MVC web site that forms the main hub of my application. In addition to this I have the requirement to create a WPF application that implements some integration into the desktop and lastly I would like to implement a Windows 8 phone app containing a subset of the ASP.Net website functionality but that will also implement some of the WPF functionality.</p>\n\n<p>The problem is I would like to keep the application as simple as possible and maintain a high level of code reuse. Ideally I don't want to implement multiple business layers but I'm not sure of what architectural patterns would be best used? I think adding some kind of service - be it REST, Web services, WEB API or something on top of the business layer and then dealing with each UI technology independently will be the way to go but I thought I'd ask for opinions and advice before I head down a route and end up back tracking?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13008904,"title":"Can I create an ASP MVC route that only accepts uppercase in the URL?","body":"<p>I have the following route:</p>\n\n<pre><code>context.MapRoute(\n    \"content\",\n    \"{page}/{title}\",\n    new { controller = \"Server\", action = \"Index\" },\n    new { page = @\"^[AFL][0-9A-Z]{4}$\" }\n);\n</code></pre>\n\n<p>This route is used for pages such as:</p>\n\n<pre><code>/A1234\n/F6789\n/L0123\n</code></pre>\n\n<p>However it also catches: <code>/Admin</code> which is something I do not want.</p>\n\n<p>I put a temporary solution in place that looks like this:</p>\n\n<pre><code>context.MapRoute(\n    \"content\",\n    \"{page}/{title}\",\n    new { controller = \"Server\", action = \"Index\" },\n    new { page = @\"^[AFL][0-9][0-9A-Z]{3}$\" }\n);\n</code></pre>\n\n<p>This only works because right now all my pages have a 0 in the second digit. </p>\n\n<p>Is there a way I could configure my route to accept A,F or L followed by 4 upper case characters but have it not catch \"dmin\" ?</p>\n\n<p>Not sure if this is the case but I am thinking the regular expression should not accept \"dmin\" as it's in lower case and I only specify A-Z. However when used as an MVC route it does take \"dmin\". Does anyone know if ASP MVC internally converts this to all uppercase?</p>\n"},{"tags":["asp.net-mvc","json","projection","javascriptserializer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13008927,"title":"remove children from object for JSON serialisation","body":"<p>I have an object with children that I'm using JavaScriptSerializer to convert to JSON. I'm using MVC and using the JavaScriptSerializer in a view as so:</p>\n\n<pre><code>@Html.Raw(serializer.Serialize(Model.Designs)\n</code></pre>\n\n<p>My \"designs\" object has the children \"DesignDeliveries\" but I need to remove these from the JSON string so I've tried using projection but cannot get the format I require</p>\n\n<p>So my Designs object is as follows:</p>\n\n<pre><code>[{\n\"BookingDesignId\": \"e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034\",\n\"DesignName\": \"Design 600\",\n\"Quantity\": 100,\n\"DesignDeliveries\": [{\n    \"BookingId\": \"3706a896-3b8f-454f-acc8-6540441a3e4a\",\n    \"Quantity\": 50,\n    \"BookingDesignId\": \"e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034\",\n    \"DepotId\": \"9\"\n},\n{\n    \"BookingId\": \"3706a896-3b8f-454f-acc8-6540441a3e4a\",\n    \"Quantity\": 50,\n    \"BookingDesignId\": \"e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034\",\n    \"DepotId\": \"18\"\n}]\n}];\n</code></pre>\n\n<p>However, I need:</p>\n\n<pre><code>[{\n\"BookingDesignId\": \"e90e9500-0a6a-4d1b-a82a-fa7ca2d7c034\",\n\"DesignName\": \"Design 600\",\n\"Quantity\": 100,\n\"DesignDeliveries\": [];\n</code></pre>\n\n<p>Does anyone know how to achieve this?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#","asp.net-mvc","payment-processing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13009333,"title":"How to get missing fields from cybersource reply using SOAP toolkit?","body":"<p>Im working with Cybersource SOAP toolkit API. I'm getting response as \"Required fields missing\" for my transaction request . How can I get the names of missing fields from Cybersource reply? I know there is a array of strings named 'missingFiled'. But missingFields[0] gives me value 'c:item[0]'. </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13005037,"title":"How to render only the div from controller action in mvc.","body":"<pre><code>I have used PartialView but it renders the whole view after success full ajax post\nThis is my view\n my ul which i want to update\n&lt;ul id=\"ULdinnerlist\"&gt;\n    @* my foreach loop*@\n    @foreach (var item in Model)\n    {\n\n        &lt;li&gt;  Title : @Html.DisplayFor(modelItem =&gt; item.Title)&lt;br /&gt;\n              EventDate : @Html.Encode(item.EventDate.ToShortDateString()+ \" @ \" + item.EventDate.ToShortTimeString()) \n              &lt;p&gt;Description : @Html.DisplayFor(modelItem =&gt; item.Description)&lt;/p&gt;&lt;br /&gt;\n               HostedBy : &lt;b&gt;@Html.DisplayFor(modelItem =&gt; item.HostedBy)&lt;/b&gt; (@item.ContactPhone)&lt;br /&gt;\n        &lt;/li&gt;\n    }\n\n\n&lt;/ul&gt;\n</code></pre>\n\n<p>my ajax route link\n    @Ajax.RouteLink(\">>>\",new { page = Model.PageIndex + 1 },new AjaxOptions { UpdateTargetId = \"ULdinnerlist\" })</p>\n\n<pre><code>ON controller: my action for reindering \n\npublic ActionResult Index(int? Page)\n        {\n            int PageSize = 5;\n            IQueryable&lt;Dinner&gt; dines = from dine in db.Dinners orderby dine.EventDate select dine;\n            var paginatedDinners = new PagingList&lt;Dinner&gt;(dines, Page ?? 0, PageSize);\n\n            checking ajax post and rendering accordingly    \n            if (Request.IsAjaxRequest())\n            {\n                return PartialView(paginatedDinners);\n            }\n            return View(paginatedDinners);\n        }\n</code></pre>\n\n<p>Problem is it renders the whole view when i do the paging.\nThanks</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13004808,"title":"How to set up locations where view engine should find view in ASP .NET MVC3 or how to render view from another MVC application?","body":"<p>For example I have two similar simple MVC applications.</p>\n\n<p><code>Application1</code>:\n<code>HomeController</code> -> <code>Index</code> action which returns <code>AnotherHome</code> view <strong>of</strong></p>\n\n<p><code>Application2</code>:\n<code>AnotherHomeController</code> -> <code>AnotherIndex</code> action which also returns <code>AnotherHome</code> view</p>\n\n<p><strong>Application1 Index action:</strong></p>\n\n<pre><code>public ActionResult Index()\n{\n    return View(\"AnotherHome\");\n}\n</code></pre>\n\n<p>I need to run <code>Application1</code> and render <code>AnotherHome</code>. When I run app it is obvious that I get the following error:</p>\n\n<pre><code>The view 'AnotherHome' or its master was not found or no view engine supports the searched locations. The following locations were searched:\n~/Views/Home/AnotherHome.aspx\n~/Views/Home/AnotherHome.ascx\n~/Views/Shared/AnotherHome.aspx\n~/Views/Shared/AnotherHome.ascx\n~/Views/Home/AnotherHome.cshtml\n~/Views/Home/AnotherHome.vbhtml\n~/Views/Shared/AnotherHome.cshtml\n~/Views/Shared/AnotherHome.vbhtml\n</code></pre>\n\n<p>How can I force view engine to search view, for example, in <code>Application2/Views/AnotherHome/AnotherIndex.cshtml</code> ???</p>\n"},{"tags":["jquery","asp.net-mvc","file-upload"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":13006922,"title":"Retrieving JsonResult after File Upload","body":"<p>Hi I am new to using MVC and JQuery and I am currently trying to upload a file using the MVC, JQuery. </p>\n\n<p>Upon reading some forums and post regarding uploading a file, It says there that due to some security reasons, I cannot use ajax in sending files to upload in MVC controller action. That is why what I did, was I used IFrames so that my page won't refreshed everytime I try to upload a file. But my problem is how could I retrieve a JsonResult sent back by my controller. \nHere is my sample code:</p>\n\n<p>JavaScript==></p>\n\n<blockquote>\n<pre><code>$(document).ready(function () {    \n    //Validation Happens Here\n    ValidateBatchForm();\n\n    $(\"#uploadFile\").click(function () {\n        return SubmitBatchForm();\n    });   \n}); \n\nfunction SubmitBatchForm() {\n\n    if($(\"#BatchForm\").valid()) {\n        if (confirm(\"Are you sure you want to upload the selected file?\")) {\n            var response = $(\"#BatchForm\").submit();\n\n            //TODO: return response, response should include validation errors if any, and Generated FileName          \n\n        }\n        else {\n            return false;\n        }\n    }\n}\n</code></pre>\n</blockquote>\n\n<p>Please pardon me if my question is to vague or what, you could ask me further questions for some clarifications.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":101,"score":-2,"question_id":13006998,"title":"chech/unchek all checkboxes (dynamically generated)","body":"<p>I have a view with checkboxes, generated dynamically, and a button for chech/unchek all the checkboxes. I try the code bellow but, the checkboxes are not checked ob button click event. Please help.\nThank you.</p>\n\n<p>View with checkboxes:   </p>\n\n<pre><code> &lt;button id=\"selectinvert\" name=\"selectinvert\" class=\"clear-selection ui-btn-hidden\" aria-disabled=\"false\" &gt; Select / Deselect All&lt;/button&gt;\n    @for (int i = 0; i &lt; @Model.workDaysList.Count; i++)\n        {\n              &lt;div class=\"framed\"&gt;\n                 &lt;div data-role=\"collapsible\" data-collapsed=\"true\" class=\"ui-btn-inner ui-corner-top ui-corner-bottom\"&gt;\n                   &lt;h3&gt;\n                            &lt;div class=\"ui-checkbox\" id=\"checkbox\"&gt;\n                                &lt;input type=\"checkbox\" id=\"@Model.workDaysList[i][0]\" /&gt;\n                                &lt;span class=\"ui-btn-text\"&gt;\n                                    &lt;label for=\"@Model.workDaysList[i][0]\" data-theme=\"c\"&gt;\n                                        @Model.workDaysList[i][1].Substring(6, 2)/@Model.workDaysList[i][1].Substring(4, 2)/@Model.workDaysList[i][1].Substring(0, 4)\n                                    &lt;/label&gt;\n                                &lt;/span&gt;\n                                &lt;/div&gt;\n                            &lt;/h3&gt;\n                            @Model.detailDaysList[i][0] / @Model.detailDaysList[i][1]\n                            &lt;br /&gt;\n                            @Model.detailDaysList[i][2] / @Model.detailDaysList[i][3]\n                            &lt;br /&gt;\n                            @Model.detailDaysList[i][4] h\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n           }\n</code></pre>\n\n<p>Jquery code:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n     $(document).ready(function () {\n       $(\"#selectinvert\").click(function () {\n       $(\"INPUT[type='checkbox']\").each(function () {\n                    if (this.checked == false) {\n                        this.checked = true;\n                    } else {\n                        this.checked = false;\n                    }\n                });\n          });\n    });\n    &lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","mvcsitemap","mvcsitemapprovider"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13009089,"title":"MvcSiteMapProvider - Dynamic SiteMaps not appearing in navigation when Starting Depth > 1","body":"<p>I'm using the <a href=\"https://github.com/maartenba/MvcSiteMapProvider\" rel=\"nofollow\">MvcSiteMapProvider</a> library for creating sitemaps and navigation in an ASP.NET MVC 4.0 application. I've created a dynamic sitemap provider, but none of the nodes seem to appear when I set starting depth level to > 1. When I set it to level 1, the dynamically created nodes appear just fine.</p>\n\n<p>Here is my sitemap file:</p>\n\n<pre><code>&lt;mvcSiteMapNode title=\"Help\" controller=\"Help\" action=\"Index\" key=\"Help\"&gt;\n    &lt;mvcSiteMapNode title=\"Help Section\" controller=\"Help\" action=\"Section\"\n        dynamicNodeProvider=\"MyLibrary.HelpNodeProvider, MyLibrary\" /&gt;\n&lt;/mvcSiteMapNode&gt;\n\n&lt;mvcSiteMapNode title=\"About\" clickable=\"false\"&gt;\n    &lt;mvcSiteMapNode title=\"Accessibility\" controller=\"Info\" action=\"Accessibility\" /&gt;\n    &lt;mvcSiteMapNode title=\"Terms &amp;amp; Conditions\" controller=\"Info\" action=\"Terms\" /&gt;\n    &lt;mvcSiteMapNode title=\"Privacy\" controller=\"Info\" action=\"Privacy\" /&gt;\n&lt;/mvcSiteMapNode&gt;\n</code></pre>\n\n<p>...and my HelpNodeProvider class:</p>\n\n<pre><code>namespace MyLibrary.Sitemap\n{\n    public class HelpNodeProvider : DynamicNodeProviderBase\n    {\n        public override IEnumerable&lt;DynamicNode&gt; GetDynamicNodeCollection()\n        {\n            DynamicNode test = new DynamicNode();\n            test.Title = \"Help Item 1\";\n            test.Controller = \"Help\";\n            test.Action = \"Section\";\n            test.RouteValues.Add(\"sectionName\", \"item1\");\n            test.ParentKey = \"Help\";\n\n            return new List&lt;DynamicNode&gt;()\n            {\n                test\n            };\n        }\n    }\n}\n</code></pre>\n\n<p>Now in the root of the 'Help' page, if I add the following MvcSiteMap helper code:</p>\n\n<pre><code>@Html.MvcSiteMap().Menu(2, 2)\n</code></pre>\n\n<p>...it doesn't output anything, but if I change the starting level to '1':</p>\n\n<pre><code>@Html.MvcSiteMap().Menu(1, 2)\n</code></pre>\n\n<p>...it outputs the following:</p>\n\n<ul>\n<li>About\n<ul>\n<li>Accessibility</li>\n<li>Terms &amp; Conditions</li>\n<li>Privacy</li>\n</ul></li>\n<li>Help\n<ul>\n<li>Help Item 1</li>\n</ul></li>\n</ul>\n\n<p>...as you can see, the 'Help item 1' dynamic node is present. But I the set the starting node to '2' on the root 'About' page I get the following:</p>\n\n<ul>\n<li>Accessibility</li>\n<li>Terms &amp; Conditions</li>\n<li>Privacy</li>\n</ul>\n\n<p>So the 'About' page with static sub-navigation appears to output properly, but the 'Help' page with dynamic sub-navigation doesn't. Want am I doing wrong?</p>\n"},{"tags":["c#","sql","asp.net-mvc","database","ftp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13008537,"title":"FTP vs DB - Dynamic Situation","body":"<p>I have a lot of small pictures to store and these are pictures users can change very often.\nThe images have an average of <strong>50Kb - 150Kb</strong>. Let's say I have 5000 of these images. Will FTP get unmanageable in the end or will a MsSQL database get to much load giving a normal webpage might use <strong>25</strong> of these images.</p>\n\n<p>What technique should I choose? By the way, in my case im using a hosting solution consisting of a webfarm.</p>\n"},{"tags":["asp.net-mvc","datetime","post","asp.net-mvc-4","asp.net-web-api"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":13006807,"title":"Date format changes to 'mm/dd/yyyy' when posting data to web api method","body":"<p>I am using ASP.NET MVC 4 with Web API.</p>\n\n<p>I want to be able to download a csv file on click on a button.</p>\n\n<p>Below is my jquery call to the api 'exportfruit'</p>\n\n<pre><code>function downloadFile(){\nvar data = {\n    StartDate: this.model.get('StartDate'),\n    Name: this.model.get('Name')\n};\n\nvar form = document.createElement('form');\nform.action = 'api/fruitapi/exportFruit';\nform.method = 'POST';\nform.style.display = 'none';\nfor (i in data) {\n    if (data[i] != \"\") {\n        var inputElement = document.createElement('textarea');\n        inputElement.name = i;\n        inputElement.value = data[i];\n        form.appendChild(inputElement);\n    }\n}\ndocument.body.appendChild(form);\nform.submit();\n}\n</code></pre>\n\n<p>and my web api action is as below</p>\n\n<pre><code>[ActionName(\"ExportFruit\")]\npublic HttpResponseMessage PostExportFruit(SomeModel model)\n{\n    // for now i am just testing the value returned from model.\n    string csv = \"some data from db\";\n    HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);\n    result.Content = new StringContent(csv);\n    //a text file is actually an octet-stream (pdf, etc)\n    result.Content.Headers.ContentType = new MediaTypeHeaderValue(\"application/octet-stream\");\n    //we used attachment to force download\n    result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue(\"attachment\");\n    result.Content.Headers.ContentDisposition.FileName = \"testfile.csv\";\n    return result;    \n}\n</code></pre>\n\n<p>now the problem I am facing is that I am passing date as 'dd/mm/yyyy' but in the web api action it converts date into 'mm/dd/yyyy'</p>\n\n<p>So for example,</p>\n\n<p>if I have a date like</p>\n\n<ul>\n<li>1/2/2012 this is converted to 2/1/2012</li>\n<li>if 22/10/2012 (todays date) is converted to 01/01/0001</li>\n</ul>\n\n<p>How do I fix this ?</p>\n\n<p>I had similar problem when passing json data which I fixed by using <a href=\"http://forums.asp.net/post/5136406.aspx\" rel=\"nofollow\">this</a> But I have no idea on how to go about on this one.</p>\n\n<p>Please help me on this, as there is hardly any content available on internet for this.</p>\n"},{"tags":["asp.net-mvc","localization","culture"],"answer_count":4,"favorite_count":9,"up_vote_count":8,"down_vote_count":0,"view_count":16540,"score":8,"question_id":1560796,"title":"Set Culture in an ASP.Net MVC app","body":"<p>What is the best place to set the Culture/UI Culture in an ASP.net MVC app</p>\n\n<p>Currently I have a CultureController class which looks like this:</p>\n\n<pre><code>public class CultureController : Controller\n    {\n        public ActionResult SetSpanishCulture()\n        {\n            HttpContext.Session[\"culture\"] = \"es-ES\";\n            return RedirectToAction(\"Index\", \"Home\");\n        }\n\n        public ActionResult SetFrenchCulture()\n        {\n            HttpContext.Session[\"culture\"] = \"fr-FR\";\n            return RedirectToAction(\"Index\", \"Home\");\n        }\n    }\n</code></pre>\n\n<p>and a hyperlink for each language on the homepage with a link such as this </p>\n\n<pre><code>&lt;li&gt;&lt;%= Html.ActionLink(\"French\", \"SetFrenchCulture\", \"Culture\")%&gt;&lt;/li&gt;\n&lt;li&gt;&lt;%= Html.ActionLink(\"Spanish\", \"SetSpanishCulture\", \"Culture\")%&gt;&lt;/li&gt;\n</code></pre>\n\n<p>Which works fine but I am thinking there is a more appropriate way to do this</p>\n\n<p>I am reading the Culture using the following ActionFilter\n<a href=\"http://www.iansuttle.com/blog/post/ASPNET-MVC-Action-Filter-for-Localized-Sites.aspx\">http://www.iansuttle.com/blog/post/ASPNET-MVC-Action-Filter-for-Localized-Sites.aspx</a> </p>\n\n<p>I am a bit of an MVC noob so am not co0nfident I am setting this in the correct place</p>\n\n<p>I dont want to do it at the web.config level, it has to be based on a users choice.</p>\n\n<p>I also dont want to check their http-headers to get the culture from their browser settings</p>\n\n<p>Edit:</p>\n\n<p>Just to be clear - I am not trying to deciede whether to use session or not. I am happy with that bit.</p>\n\n<p>What I am trying to work out is if it is best to do this in a Culture controller that has an action method for each Culture to be set.</p>\n\n<p>Or is there is a better place in the MVC pipeline to do this</p>\n\n<p>anyone any ideas?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","tempdata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13007405,"title":"TempData and multiple WorkerProcesses","body":"<p>I have read that it is not save to use InProc SessionState with multiple WorkerProcesses.</p>\n\n<p>I dont use Session so thats not an issue for me.</p>\n\n<p>But what about TempData? TempData uses SessionState internally.</p>\n\n<p>Can I just configure SessionState to be stored by State Server and the implementation of TempData will pick it up? Will this have a big performance hit?</p>\n"},{"tags":["c#","asp.net-mvc","ninject","asp.net-web-api","httpcontext"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":171,"score":5,"question_id":12963729,"title":"Web Api - Request Parameters Outside Controller","body":"<p>I'm working on a ASP.NET Web Api project and made it accept version information in the url.</p>\n\n<p>For example:</p>\n\n<blockquote>\n  <ul> <li>api/v1/MyController</li> <li>api/v2/MyController</li> </ul>\n</blockquote>\n\n<p>Now I would like to get the request version <strong>v1, v2</strong> inside a custom LayoutRenderer for <code>Nlog</code>. Normally I would do this like the below example.</p>\n\n<pre><code>[LayoutRenderer(\"Version\")]\npublic class VersionLayoutRenderer : LayoutRenderer\n{\n    protected override void Append(System.Text.StringBuilder builder, NLog.LogEventInfo logEvent)\n    {\n        var version = HttpContext.Current.Request.RequestContext.RouteData.Values[\"Version\"];\n        builder.Append(version);\n    }\n}\n</code></pre>\n\n<p><strong>The problem:</strong> <code>HttpContext.Current</code> is NULL</p>\n\n<p>I believe this is because I use <a href=\"https://github.com/NLog/NLog/blob/master/src/NLog/Targets/Target.cs\" rel=\"nofollow\">Async wrappers</a> for <code>NLog</code> and some calls before the Logger are also <code>Async</code>.</p>\n\n<p>A example of the logger being called Async inside Ninject.Extensions.WebApi.UsageLogger. At this point the <code>HttpRequestMessage</code> has all info we need to get the Version.</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Initializes a new instance of the &lt;see cref=\"UsageHandler\" /&gt; class.\n/// &lt;/summary&gt;\npublic UsageHandler()\n{\n    var kernel = new StandardKernel();\n\n    var logfactory = kernel.Get&lt;ILoggerFactory&gt;();\n\n    this.Log = logfactory.GetCurrentClassLogger();\n}\n\nprotected override async Task&lt;HttpResponseMessage&gt; SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)\n    {\n        var startTime = DateTime.Now;\n\n        // Log request\n        await request.Content.ReadAsStringAsync().ContinueWith(c =&gt;\n            {\n                this.Log.Info(\"{0}: {1} called from {2}\", request.Method, HttpUtility.UrlDecode(request.RequestUri.AbsoluteUri), ((HttpContextBase)request.Properties[\"MS_HttpContext\"]).Request.UserHostAddress);\n                this.Log.Info(\"Content-Type: {0}, Content-Length: {1}\", request.Content.Headers.ContentType != null ? request.Content.Headers.ContentType.MediaType : string.Empty, request.Content.Headers.ContentLength);\n                this.Log.Info(\"Accept-Encoding: {0}, Accept-Charset: {1}, Accept-Language: {2}\", request.Headers.AcceptEncoding, request.Headers.AcceptCharset, request.Headers.AcceptLanguage);\n\n                if (!string.IsNullOrEmpty(c.Result))\n                {\n                    if (this.MaxContentLength &gt; 0 &amp;&amp; c.Result.Length &gt; this.MaxContentLength)\n                    {\n                        this.Log.Info(\"Data: {0}\", HttpUtility.UrlDecode(c.Result).Substring(0, this.MaxContentLength - 1));\n                    }\n                    else \n                    {\n                        this.Log.Info(\"Data: {0}\", HttpUtility.UrlDecode(c.Result));\n                    }\n                }\n            });\n\n        var response = await base.SendAsync(request, cancellationToken);\n\n        // Log the error if it returned an error\n        if (!response.IsSuccessStatusCode)\n        {\n            this.Log.Error(response.Content.ReadAsStringAsync().Result);\n        }\n\n        // Log performance\n        this.Log.Info(\"Request processing time: \" + DateTime.Now.Subtract(startTime).TotalSeconds + \"s\");\n\n        return response;\n    }\n</code></pre>\n\n<p><strong>The question</strong>\nWhat would be the best way to make the <code>VersionLayoutRenderer</code> work in a <strong>generic</strong> way? Could I add a MessageHandler and Bind the HttpRequest to some Async scope? If so any guidelines would be much appreciated cause I'm still getting used to <code>Ninject</code>.  </p>\n\n<p>For the time being I add the version information directly to the Log Call in the UsageHandler, but I would really like a more generic solution, where I can always rely on version information inside my logging.</p>\n\n<p><strong>Edit:</strong> Updated the question to be more specific and included more details.</p>\n"},{"tags":["c#","asp.net-mvc","design","elmah"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12598773,"title":"Is it okay to use Elmah instead of try/catch?","body":"<p>I have been using <a href=\"http://code.google.com/p/elmah/\" rel=\"nofollow\">Elmah</a> for an MVC application and my question is</p>\n\n<p>Is it a bad practice to not write try catch statement when using Elmah?</p>\n"}]}
{"total":44785,"page":16,"pagesize":100,"questions":[{"tags":["android","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12998126,"title":"3gp from andorid microphone play in Google chrome","body":"<p>My android application through MediaRecorder get *.3gp file and send to ASP .NET MVC 4 website. I need play in browser (Google chrome in priority) this file. I found tag HTML , it can play mp3 but can`t???? play 3gp.</p>\n\n<p>I see 4 way, what is best?</p>\n\n<ol>\n<li><p>Google chrome can play 3gp (what i do wrong?).</p></li>\n<li><p>On android convert 3gp to mp3 (please code sample).</p></li>\n<li><p>On website convert 3gp to mp3 (please code sample worked on shared hosting).</p></li>\n<li><p>Another solution.</p></li>\n</ol>\n"},{"tags":["c#",".net","asp.net-mvc","visual-studio-2010","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":77,"score":-1,"question_id":12971997,"title":"Enable-Migrations -ContextTypeName Error: Cannot find parameter","body":"<p>I am following this tutorial to practice MVC-4: <a href=\"http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table</a></p>\n\n<p>I am not doing the same example. I am just using it as a guideline to try something of my own.</p>\n\n<p>I've come across this problem: </p>\n\n<p>After I open the package manager console</p>\n\n<p>I get the following error after trying to enable migrations for my context:</p>\n\n<pre><code>PM&gt; Enable-Migrations -ContextTypeName MvcAuction.Models.AuctionDBContext\nEnable-Migrations : A parameter cannot be found that matches parameter name 'ContextTypeName'.\nAt line:1 char:35\n+ Enable-Migrations -ContextTypeName &lt;&lt;&lt;&lt;  MvcAuction.Models.AuctionDBContext\n    + CategoryInfo          : InvalidArgument: (:) [Enable-Migrations], ParameterBindingException\n    + FullyQualifiedErrorId : NamedParameterNotFound,Enable-Migrations\n</code></pre>\n\n<p>Any ideas how this might be resolved?</p>\n"},{"tags":["asp.net","asp.net-mvc","generics","controller"],"answer_count":5,"favorite_count":7,"up_vote_count":9,"down_vote_count":0,"view_count":3259,"score":9,"question_id":848904,"title":"In asp.net mvc is it possible to make a generic controller?","body":"<p>I'm attempting to create a generic controller, ie:</p>\n\n<pre><code>public class MyController&lt;T&gt; : Controller where T : SomeType\n{ ... }\n</code></pre>\n\n<p>However, when I try to use it, I'm running into this error everywhere...</p>\n\n<p>Controller name must end in 'Controller'</p>\n\n<p>So, my question, Is it possible to make a generic controller in asp.net mvc?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":1,"question_id":12997613,"title":"Would an existing non mobile MVC3 project benefit from upgrading to MVC4?","body":"<p>I've two projects both are <em>Asp.net MVC <strong>3</em></strong> both don't target mobile users.<br>\nOne was released already, and the other is in the middle of  the development phase.  </p>\n\n<p>I thought of upgrading those two projects to <em>Asp.net MVC <strong>4</em></strong>, so I read the <a href=\"http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253807\" rel=\"nofollow\">New Features in ASP.NET MVC 4</a> section in the release notes of <em>Asp.net MVC 4</em>, it seems like there're no features that an existing Asp.net-MVC3 project cab benefit from.  </p>\n\n<p>All the features are related to mobile users and enhanced templates. What about speed? cache? bug fixes?</p>\n\n<p>So should I upgrade my projects?</p>\n"},{"tags":["asp.net-mvc","entity-framework","azure","ef-code-first","unit-of-work"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13003241,"title":"Data tables not being created when deploying MVC4 to Azurewebsites","body":"<p>So after many many hours of figuring out why my database tables weren't being created when deploying to azure(using mvc4 code first entity framework), I finally came figured out that its the way I have my backend set up. I have my generic repository, unit of work, datacontext, etc..(which is not causing the problem). Whats causing my data tables(500 server error) not to create is my UnitOfWorkFilter. When I apply this it doesn't work, when I take away it works. So my question is does anybody know why this is causing the problem and what I can do to fix this problem because I would like to continue to use my filter. </p>\n\n<p>Here is my unit of work filter:</p>\n\n<pre><code>    public class UnitOfWorkFilter : System.Web.Mvc.ActionFilterAttribute\n    {\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n\n        var unitOfWork = DependencyResolver.Current.GetService&lt;IUnitOfWork&gt;();\n\n        unitOfWork.Begin();\n    }\n\n    public override void OnActionExecuted(ActionExecutedContext filterContext)\n    {\n        var unitOfWork = DependencyResolver.Current.GetService&lt;IUnitOfWork&gt;();\n        if (filterContext.Exception != null)\n        {\n            unitOfWork.Rollback();\n            return;\n        }\n        try\n        {\n            unitOfWork.Commit();\n        }\n        catch\n        {\n            unitOfWork.Rollback();\n            throw;\n        }\n        finally\n        {\n            unitOfWork.Dispose();\n        }\n    }\n}\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13004839,"title":"How to create read only checkbox MVC?","body":"<p>I'm using MVC. In the view there is check box, So I want to make it read only or user can't change it..</p>\n\n<p>This is my view</p>\n\n<pre><code>     &lt;tr id=\"pnHireSet\"&gt;\n                &lt;td class=\"adminTitle\"&gt;\n                    @Html.LabelFor(model =&gt; model.IsHireSet):\n                &lt;/td&gt;\n                &lt;td class=\"adminData\"&gt;\n                    @Html.EditorFor(model =&gt; model.IsHireSet)\n\n//This is check box. I want set is read only....\n                    @Html.ValidationMessageFor(model =&gt; model.IsHireSet)\n                &lt;/td&gt;\n            &lt;/tr&gt;\n</code></pre>\n\n<p>How can I do it??\nThankx.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","reflection"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":91,"score":3,"question_id":13005430,"title":"Is it possible to do this with reflection?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/41244/dynamic-linq-orderby\">Dynamic LINQ OrderBy</a>  </p>\n</blockquote>\n\n\n\n<p>I have a list of custom sort options that are passed to the server from a client-side grid control (KendoUI grid if you're wondering). These sort options have the property to sort by as a string. I wrote a switch method that will check the values of the sort object and apply the appropriate LINQ.</p>\n\n<pre><code>    private IQueryable&lt;Report&gt; SortReports(IQueryable&lt;Report&gt; reports, KendoSort sort)\n    {\n        switch (sort.Field)\n        {\n            case \"name\":\n                return sort.Dir == \"asc\" ? reports.OrderBy(x =&gt; x.Name) : reports.OrderByDescending(x =&gt; x.Name);\n            case \"description\":\n                return sort.Dir == \"asc\" ? reports.OrderBy(x =&gt; x.Description) : reports.OrderByDescending(x =&gt; x.Description);\n            default:\n                return sort.Dir == \"asc\" ? reports.OrderBy(x =&gt; x.Id) : reports.OrderByDescending(x =&gt; x.Id);\n        }\n    }\n</code></pre>\n\n<p>This is working fine but seems so ugly. How might I do this with reflection so that I don't have to write a custom function for every type of entity I want to do this with? It would be nice if I could just have a single function that did this no matter what the entity.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":13005229,"title":"FormMethod.Post to return querystring in MVC4","body":"<p>I passed my querystring in _Layout.cshtml page</p>\n\n<pre><code>  &lt;li&gt;@Html.ActionLink(\"Shopping\", \"Index1\", new { controller = \"Shopping\", UserID = \"Admin1\" })&lt;/li&gt;  \n</code></pre>\n\n<p><br/>\nI have an update view to update the values from textbox <br/></p>\n\n<pre><code> @using (Html.BeginForm(\"Update\", \"Shopping\", new { id = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n         {\n               @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n               @Html.Hidden(\"productid\", item.ProductID as string)\n               @Html.TextBox(\"qty\", item.Quantity)\n               @Html.Hidden(\"unitrate\", item.Rate)\n               &lt;input type=\"submit\" value=\"Update\" /&gt;\n         }\n</code></pre>\n\n<p>In the first time post , i get the url like this </p>\n\n<pre><code>http://localhost:61110/Shopping/Index1?UserID=Admin1\n</code></pre>\n\n<p>But for the second time, after post i get the url like this </p>\n\n<pre><code>http://localhost:61110/Shopping/Index1\n</code></pre>\n\n<p>How to get the querystring value at all times when it the form is posted.\n<br/>\nI also tried this <a href=\"http://stackoverflow.com/questions/9279741/mvc3-html-beginform-search-returning-empty-querystring\">mvc3: html.beginform search returning empty querystring</a></p>\n\n<p>But couldnt get the querystring on second time post <br/>\nAny suggestions.</p>\n\n<p>EDIT : Update Action Code</p>\n\n<pre><code>[HttpPost]\n        public ActionResult Update(string id, string productid, int qty, decimal unitrate)\n        {\n            if (ModelState.IsValid)\n            {\n                int _records = UpdatePrice(id,productid,qty,unitrate);\n                if (_records &gt; 0)\n                {\n                    return RedirectToAction(\"Index1\", \"Shopping\",new { id = Request.QueryString[\"UserID\"] });\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\",\"Can Not Update\");\n                }\n            }\n            return View(\"Index1\");\n        }\n\npublic int UpdatePrice(string id,string productid,int qty,decimal unitrate)\n    {\n        con.Open(); \n        var total = qty * unitrate;\n        SqlCommand cmd = new SqlCommand(\"Update [Table_name] Set Quantity='\" + qty + \"',Price='\" + total + \"' where [User ID]='\" + id + \"' and [Product ID]='\" + productid + \"'\", con);\n        cmd.Parameters.AddWithValue(\"@total\", total);\n        return cmd.ExecuteNonQuery();\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","crud"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13002800,"title":"bools for tables + search","body":"<p>Attempting to database driven website for video rentals</p>\n\n<p>So I have two tables in my database (movie, and rental), \nI have a column set in each table 'OnHire' which has the data value of 'bit'\nwith NULL values selected.</p>\n\n<p>So I have all the CRUD features working but...</p>\n\n<p>When the user creates a new rental record in the rental table and turns 'OnHire' to true\nI am trying to use a bool which will then turn the 'OnHire' in movies to true.</p>\n\n<p>Allowing the user to know by looking at the movies table whether it is on hire or not\nit is telling me i cant convert a type bool? to bool, a conversion exists(are you missing a cat)?</p>\n\n<pre><code>HttpPost]\n    public ActionResult Create(Rental rentals)\n    {\n        try\n        {\n            // TODO: Add insert logic here\n            _entities.AddToRentals(rentals);\n            _entities.SaveChanges();\n\n            Movie mov = new Movie();\n\n            if (rentals.OnHire)\n            {\n                mov.OnHire = true;\n            }\n            else\n            {\n                mov.OnHire = false;\n            }\n\n            return RedirectToAction(\"Index\");\n        }\n        catch\n        {\n            return View();\n        }\n    }\n</code></pre>\n\n<p>Then I am probably pushing my luck here but if that is successfull I was going to do the opposite and throw an error message if the user tries to hire out a video already on hire</p>\n\n<pre><code>            if (mov.OnHire)\n            {\n                //error message\n            }\n</code></pre>\n\n<p>Any suggestions?</p>\n\n<p>Also on completion of the CRUD for database I was looking to implement a search feature?</p>\n"},{"tags":["jquery","asp.net","ajax","asp.net-mvc","webgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":140,"score":1,"question_id":13004401,"title":"Show Ajax Loading Indicator when sorting or paging ASP.net MVC Webgrid","body":"<p>I can easily hookup a webgrid and add ajax to it using the default settings. But one thing I have been struggling to figure out is how to add a loading indicator when the grid is sorting or paging via ajax.</p>\n\n<p>There is a built in callback function which is great to turn off the ajax loading indicator but how can I easily turn one on?</p>\n\n<p>Below is the code I have currently for my webgrid.</p>\n\n<pre><code>@{\n    var grid = new WebGrid(rowsPerPage: Model.CountPerPage, ajaxUpdateContainerId: \"GridArea\");\n    grid.Bind(Model.Users,\n              autoSortAndPage: false,\n              rowCount: Model.TotalCount\n            );\n    grid.Pager(WebGridPagerModes.All);\n}\n&lt;div id=\"GridArea\"&gt;\n    @grid.GetHtml(htmlAttributes: new {id =\"UserGrid\"},\n        columns: new [] {\n        grid.Column(\"ID\", canSort: false),\n        grid.Column(\"FirstName\"),\n        grid.Column(\"LastName\"),\n        grid.Column(\"Email\"),\n        grid.Column(\"FullName\", canSort: false)\n        }\n    )\n&lt;/div&gt;\n</code></pre>\n\n<p>I've tried using the following but neither of these have worked.</p>\n\n<pre><code>&lt;script&gt;\n    $(function () {\n        $(\"#UserGrid\").live(\"ajaxStart\", function () {\n            alert(\"start\");\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>This one works the first time but won't work after the grid does its first ajax refresh.</p>\n\n<pre><code>&lt;script&gt;\n    $(function () {\n        $('#UserGrid').ajaxStart(function () {\n            alert(\"start\");\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1712,"score":2,"question_id":6182644,"title":"\"Missing compiler required member\" error being thrown multiple times with almost no changes to code","body":"<p>Today after deploying some changes to a C# MVC site that I run, I went back to make some more modifications and came across this error:</p>\n\n<blockquote>\n  <p>Missing compiler required member System.Runtime.CompilerServices.ExtensionAttribute..ctor</p>\n</blockquote>\n\n<p>The error is a bit vague (other than it's description, obviously) as it doesn't give me a file, line, or column to reference, only the project. Also, it throws the error a total of 20 times. I only made three changes to the code between the time I deployed (it was completely functional at that time) and now. I reverted my changes and it is still throwing the same error which makes no sense to me.</p>\n\n<p>I haven't found a lot of information on this error on SO or Google, other than <a href=\"http://blog.flexforcefive.com/?p=105\" rel=\"nofollow\">this guys</a> solution and a couple references to some Mono project errors (I'm not using Mono). The solution the guy above gives requires adding a class definition that will allow the compiler to resolve the reference. I don't particularly want to do this because I haven't needed to do it up until this point and it will just muddy my code. </p>\n\n<p>Just curious if anyone has run across this before. Thanks in advance!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2"],"answer_count":8,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":6181,"score":7,"question_id":5032097,"title":"asp.net mvc convert \\n new line to html breaks","body":"<p>I have a <code>textarea</code> in mvc. When data is entered into that and I'm displaying it back to the user, how do I show the line breaks?</p>\n\n<p>I display like this:</p>\n\n<pre><code>&lt;%= Model.Description%&gt;\n</code></pre>\n"},{"tags":["php","asp.net-mvc","magento","e-commerce","nopcommerce"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":155,"score":2,"question_id":13003620,"title":"Magento vs. nopCommerce","body":"<p>This question might be subjective, but I hope you read it thru and help me come to a conclusion.</p>\n\n<p>I am an ASP.NET developer.</p>\n\n<p>I recently got in contact with a big company that sells products and wants to open an online shopping center.</p>\n\n<p>We want to use (at least for a beginning) an open source project.\nWe're considering either <a href=\"http://www.nopcommerce.com\" rel=\"nofollow\">nopCommerce</a> or <a href=\"http://www.magentocommerce.com/\" rel=\"nofollow\">Magento</a>.</p>\n\n<p>Obviously, from a personal perspective, I rather nopCommerce since it's in ASP.NET MVC which is my mother tongue, PHP is totally foreign to me (also I like a layered application, and I think ASP.NET MVC is layered better than PHP, this of course can be just BS, whatever).\nAnyway, for the sake of the company (that I'm supposed to be the developer), is Magento better than nopCommerce? If yes, is it so much better that it's worth I should learn PHP and develop it.</p>\n\n<p>We could hire a PHP developer to do the job, but I'm a partner in the company, and we do want I should have personal control of the code (the website will also have additional service other than a shopping site).</p>\n\n<p>I'd appreciate any comparisons of nopCommerce and Magento, any links and articles will be welcome.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","iis","reporting-services"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12984139,"title":"Can I programatically log into Reporting Services and Redirect to the page?","body":"<p>I currently have a SQL Server Reporting Services site which is not part of a domain (i know that is not ideal but I do not have an option in this situation).  What I would like to do is programmatically log into the site from my ASP.NET MVC page and then redirect to the reporting services page to view the reports without having to type the username and password.  I know this is not best practice to do this but in this situation it is what i need to do.</p>\n\n<p>I am thinking of something like this but it is not working:</p>\n\n<pre><code>public ActionResult LogIntoReportingServices()\n{\n    HttpWebRequest wr = WebRequest.CreateHttp(\"http://example.com/Reports\");\n    NetworkCredential nc = new NetworkCredential(\"report_user\", \"password\");\n    wr.Credentials = nc;\n    wr.GetResponse();\n\n    return Redirect(\"http://example.com/Reports\");\n}\n</code></pre>\n\n<p>Im guessing my code is pretty far off from what is needed but I think you can understand what I am trying to do from looking at it.  I am guessing I may need to POST to log into Reporting Services/IIS but i am not sure.</p>\n\n<p>The version of Reporting Services I have is the one that Comes with SQL Server 2008 (not R2).\nIf someone can point me in the right direction that would be appreciated.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","iis-7.5","com-interop"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2832,"score":2,"question_id":10589029,"title":"an unhandled win32 exception occurred in w3wp.exe","body":"<p>I get the following exception when trying to load an ASP.NET MVC website:</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x07070a91 in w3wp.exe: 0xC0000005: Access\n  violation reading location 0x00000000.</p>\n</blockquote>\n\n<p>The Visual Studio Just-In-Time Debugger opens and the only information I can see in the debugger is this:</p>\n\n<blockquote>\n  <p><strong>Call stack location:</strong></p>\n  \n  <p>msvbvm60.dll!06c00a91()</p>\n</blockquote>\n\n<p>The website uses some COM objects and everything worked fine until last week. This problem appeared out of the blue.</p>\n\n<p>This is the error log from Windows Event Viewer:</p>\n\n<blockquote>\n  <p>Faulting application name: w3wp.exe, version: 7.5.7601.17514, time stamp: 0x4ce7a5f8<br>\n  Faulting module name: MSVBVM60.DLL, version: 6.0.98.15, time stamp: 0x4a5bda6c<br>\n  Exception code: 0xc0000005<br>\n  Fault offset: 0x00030a91<br>\n  Faulting process id: 0x1a0<br>\n  Faulting application start time: 0x01cd31fcb47f66d8<br>\n  Faulting application path: C:\\Windows\\SysWOW64\\inetsrv\\w3wp.exe<br>\n  Faulting module path: C:\\Windows\\system32\\MSVBVM60.DLL<br>\n  Report Id: f5db0ae3-9def-11e1-ad79-005056c00008  </p>\n</blockquote>\n\n<p>Do you have any suggestions to help troubleshoot this problem?</p>\n\n<p><strong>Edit:</strong> I managed to solve the problem and now everything works. The solution involved tweaking some registry settings that the custom dlls need in order to function properly. So the problem didn't actually appear out of the blue, I just didn't realize some registry values were modified, which caused a com dll to crash.</p>\n"},{"tags":["asp.net-mvc","mvvm","knockout.js","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":13002622,"title":"ASP.NET MVC 4 Web API & Knockout.js","body":"<p>I´m starting a Proof-of-concept SPA using the new Web API and Knockout, so far I´ve managed to create the API controller, consume it with Knockout and map entities and arrays using Knockout mapping.</p>\n\n<p>I´m now trying to create a simple CRUD, but I can´t get my head around as to how to implement the ViewModels.</p>\n\n<p>So far I´ve come up with 2 options, listed below:</p>\n\n<ul>\n<li><p>I can define a ViewModel on the server, that contains the entity´s attributes, plus an array of the same entity. When I enter the CRUD functionality, I call the server and retrieve that ViewModel, with the entity list and the attributes for creating a new entry.</p></li>\n<li><p>I can define 2 ViewModels, one with the grid data, and another with the entity´s attributes. When I call the CRUD functionality, I get the grid data, and when I want to edit/create a new entry, I call the server and retrieve the ViewModel for that.</p></li>\n</ul>\n\n<p>On both options I use one single view, which contains the grid definition, and the edit/create form format, which I display on a JQuery pop-up.</p>\n\n<p>I can´t figure out which would be the best option, I´m starting to lean towards the 2nd one, but some guidance would be appreciated.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["asp.net-mvc","rest","model-binding","restful-url","restful-architecture"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13002869,"title":"ASP.NET MVC model binding precedence vs. RESTful resources","body":"<p>The order of precedence that ASP.NET MVC uses when it binds models for incoming requests is bothering me in the context of REST.  Essentially, MVC binds models using values in the following order of precedence:</p>\n\n<ul>\n<li>POST body</li>\n<li>Route (URL)</li>\n<li>Query string values</li>\n</ul>\n\n<p>What bothers me is how that trumps a resource's Uri with values from the body of the message.</p>\n\n<p>For example, I could have a RESTful resource exposed as follows:</p>\n\n<pre><code>/dogs/\n</code></pre>\n\n<p>... returning:</p>\n\n<pre><code>[{\n    'name': 'Fido',\n    'color': 'brown',\n    '_links': {\n        'self': { 'href': '/dogs/7' }\n    }\n},\n{\n    'name': 'Spot',\n    'color': 'spotted',\n    '_links': {\n        'self': { 'href': '/dogs/5' }\n    }\n}]\n</code></pre>\n\n<p>Note that with the \"self\" link (<a href=\"http://stateless.co/hal_specification.html\" rel=\"nofollow\">HAL</a> style), I have everything I need to modify the dogs by PUTting those resources back to the server without needing their \"id\" values.</p>\n\n<pre><code>PUT /dogs/7\n{\n    'name': 'Super Fido',\n    'color': 'rainbow'\n}\n</code></pre>\n\n<p>The server has everything needed to update the dog, with no confusion.  MVC will model-bind everything nicely into my model, including the id (sourced from the route).</p>\n\n<p>However, some API styles I have seen include the 'id' in the message body, so that it looks like this:</p>\n\n<pre><code>GET /dogs/7\n{\n    'id': 7,\n    'name': 'Super Fido',\n    'color': 'rainbow'\n}\n</code></pre>\n\n<p>But fundamentally what bothers me the most is that if I have a route defined like \"{controller}/{id}\", and the client does the following:</p>\n\n<pre><code>PUT /dogs/7\n{\n    'id': 5,\n    'name': 'Snowy',\n    'color': 'white'\n}\n</code></pre>\n\n<p>... then MVC will model bind the 'id' to 5 (from the message body), and not 7 (from the route), yet based on the resource URI that my client provided, they should have been updating Fido's information.  This would be akin to trying to save a document to your hard drive in a certain location, and because of something in the document, having it be automatically saved somewhere else.</p>\n\n<p>How would one go about changing the out-of-the-box model binding precedence in ASP.NET MVC to prioritize the route values over the message body (when conflicts exist), and would this be a good thing to do in this context?</p>\n"},{"tags":["asp.net","html","asp.net-mvc","phonegap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13002786,"title":"Asp.net MVC Web Application to PhoneGap","body":"<p>Ive got a asp.net mvc web application. I'm wanting to use phoneGap to convert it to a ios application. Im reading through the getting started doco's on the PhoneGap website which is saying that the website needs to be served in Apache Cordova, which I cant see is able to serve an asp.net website.</p>\n\n<p>Any ideas on how you use phoneGap on an asp.net mvc site?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13002069,"title":"How to return proper message on 403 forbidden on MVC3?","body":"<p>I know I can fill the <code>ReasonPhrase</code> property of a <code>HttpResponseMessage</code> using Web API Framework. But how can I do the same with the normal \"MVC\" ? </p>\n\n<p>This is my current code:</p>\n\n<pre><code>if (filterContext.Exception != null &amp;&amp; filterContext.Exception is ArgumentException) \n{\n    filterContext.HttpContext.Response.StatusCode = 403;\n    filterContext.HttpContext.Response.StatusDescription = filterContext.Exception.Message;\n    //filterContext.HttpContext.Response.Write(filterContext.Exception.Message);\n    filterContext.ExceptionHandled = true;\n    filterContext.Exception = null;\n}\n</code></pre>\n\n<p>I also know that the commented line would provide the error message to the client but in the Response body. I don't know if this is the best practice.</p>\n\n<p>What I would like to do is the same as this <a href=\"http://www.dotnetspeaks.com/DisplayArticle.aspx?ID=238\" rel=\"nofollow\">link</a>.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","dataannotations","fluentvalidation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":114,"score":1,"question_id":12967442,"title":"Fluent API = Data Annotations?","body":"<p>Just a quick Q, Is the Fluent API is replaceable for Data Annotations in term of features?\nWhat the features in Data Annotations that is not included in Fluent API?</p>\n\n<p>I want to use Fluent API because of Separation of Concern (between my model &amp; persistence), convention over configuration (mapping defined in one place <code>DbContext.OnModelCreating()</code> but not at every model property) and I want to use <a href=\"http://blogs.msdn.com/b/jasonz/archive/2010/02/18/favorite-vs2010-features-layer-validation.aspx\" rel=\"nofollow\">VS 2010 Layer Validation</a> to make sure my POCO classes will never have dependencies to EF, <strong>but what I miss if I totally remove Data Annotation from my source?</strong></p>\n"},{"tags":["c#","asp.net-mvc","razor","viewbag"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12965835,"title":"Pass variable back from EditorTemplate to page or layout","body":"<p>I am tired to google around and ddn't found the exact answer.</p>\n\n<p>I know I can pass date from view to template by <code>additionalViewData</code> parameter of <code>.EditorFor()</code> or <code>.DisplayFor()</code> but I want a data back from template!</p>\n\n<p>I have <code>Date.cshtml</code> in my <code>~/Views/Shared/EditorTemplates/</code>.\nMy model property already have something like this:</p>\n\n<pre><code>public class Person\n{\n    [DisplayFormat(DataFormatString = \"{0:d}\")]\n    [DataType(DataType.Date)]\n    public Nullable&lt;DateTime&gt; BirthDate { get; set; }\n}\n</code></pre>\n\n<p>and the view:</p>\n\n<pre><code>@Html.EditorFor(model =&gt; model.BirthDate)\n</code></pre>\n\n<p>Now I want only to load datepicker script when ever the view uses the date template.\nSo I try to use <code>RequireDatePicker</code> like this in my template:</p>\n\n<pre><code>@model DateTime?\n@Html.TextBox(...)\n@{ViewBag.RequireDatePicker = true;}\n</code></pre>\n\n<p>and in the bottom of <code>_Layout.cshtml</code>:</p>\n\n<pre><code>    @Scripts.Render(\"~/bundles/jquery\")\n    @if (ViewBag.RequireDatePicker == true)\n    {\n        &lt;script type=\"text/javascript\"&gt;\n            if (!Modernizr.inputtypes.date) {\n                // Todo: use Modernizr.load\n                $(function () {\n                    $(\"input[type='date']\").datepicker();\n                });\n            }\n        &lt;/script&gt;\n    }\n</code></pre>\n\n<p>The problem is I just realize <code>ViewBag</code>/<code>ViewData</code> has a different context from the view/partial and the display/editor template. What is the best way to do this?</p>\n\n<hr>\n\n<p><strong>Fix</strong>\nI can pass data from template back to view by route data like this:</p>\n\n<pre><code>@{ViewContext.RouteData.DataToken[\"requireDatePicker\"] = true;}\n</code></pre>\n\n<p>However I end-up not passing the data but just this:</p>\n\n<ol>\n<li><p>Have bundle <code>\"~/bundles/jqueryui\"</code> that</p>\n\n<ul>\n<li>remove jquery ui date picker feature from it (and move to <code>\"~/bundles/jqueryui-datepicker\"</code>)</li>\n<li>include a <code>Modernizr.inputtypes.date</code> check and <code>Modernizr.load</code> to load <code>\"~/bundles/jqueryui-datepicker\"</code></li>\n</ul></li>\n<li><p>No need to modify <code>_layout.cshtml</code> to check for <code>RequireDatePicker</code>. <code>@Scripts.Render(\"~/bundles/jquery\")</code> and <code>@Scripts.Render(\"~/bundles/jqueryui\")</code> is enough sinec <code>Modernizr.load</code> is already included.</p></li>\n<li><p>No need to pass <code>RequireDatePicker</code> from <code>Date.cshtml</code> to view or _Layout.cshtml as <code>Modernizr.load</code></p></li>\n</ol>\n"},{"tags":["asp.net-mvc","image"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":13001710,"title":"Having trouble with ASP.NET MVC 4 image uploading","body":"<p>I'm trying to upload a image along with other fields. Been following examples from <a href=\"http://stackoverflow.com/questions/2000525/having-trouble-uploading-files-in-asp-net-mvc\">here</a> and <a href=\"http://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0\">here</a></p>\n\n<p>However it seems that the image object isn't passed to the controller and i'm unable to find any error.</p>\n\n<p>Here's the view:</p>\n\n<pre><code>@model Project.Models.ContentNode\n@{\n    ViewBag.Title = \"Create\";\n}\n\n&lt;h2&gt;Create&lt;/h2&gt;\n\n@using (Html.BeginForm(\"Create\", \"News\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    @Html.ValidationSummary(true)\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;News&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Title)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Title)\n            @Html.ValidationMessageFor(model =&gt; model.Title)\n        &lt;/div&gt;\n        @*Image upload field*@\n        &lt;div class=\"editor-field\"&gt;\n            &lt;input type=\"file\" name=\"file\" /&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Body)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(model =&gt; model.Body)\n            @Html.ValidationMessageFor(model =&gt; model.Body)\n        &lt;/div&gt;\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n\n&lt;div&gt;\n    @Html.ActionLink(\"Back to List\", \"Index\")\n&lt;/div&gt;\n</code></pre>\n\n<p>Here are the controller methods:</p>\n\n<pre><code>public ActionResult Create()\n        {\n            var model = new ContentNode();\n            return View( model );\n        }\n\n        [HttpPost]\n        public ActionResult Create(ContentNode nyF, HttpPostedFileBase imageData)\n        {\n            // Get the type of content from DB\n            var k = (from ct in _db.ContentTypes\n                     where ct.ID == 1\n                     select ct).Single();\n\n            var curUser = (from u in _db.Users\n                           where u.Username == User.Identity.Name\n                           select u).Single();\n\n            nyF.Author = curUser;\n            nyF.ContentType = k;\n            nyF.dateCreated = DateTime.Now;\n\n            _db.ContentNodes.Add(nyF);\n            _db.SaveChanges();\n\n            // Process image\n            if ((imageData != null &amp;&amp; imageData.ContentLength &gt; 0))\n            {\n                var fileName = Path.GetFileName(imageData.FileName);\n                var path = Path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName);\n                imageData.SaveAs(path);\n            }\n            else\n            {\n                return Content(\"The image object wasn't received\");\n            }\n\n            return View(nyF);\n        }\n</code></pre>\n\n<p>I've read over the whole thing over and over and am unable to see the error. Anyone here willing to point out what I'm doing wrong?</p>\n"},{"tags":["c#","asp.net-mvc","security","asp.net-mvc-4","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13000770,"title":"forms authentication in mvc app, authenticating with external service","body":"<p>I am currently working on an MVC4 application where different types of users can visit the site and log in. There will be 2 different categorizations of users, type A and B where can access different areas of the site.</p>\n\n<p>Authentication of the user is via service call to an authentication provider and they will return a status of whether the user have been authenticated or not and the users information eg name, address etc. At this point I would like to track that the user is authenticated and what role they are in. Previously I would have created a cookie with the users name, address etc and stored on the clients machine. But this was open to manipulation as the cookies were plain text.</p>\n\n<p>But I would like to strengthen the security of the site and therefore looking at using FormsAuthentication. I am aware that generates a cookie but it is much more secure. </p>\n\n<p>Is this the correct approach and can the users information such as address etc be stored in this cookie? Session where I would like to store it is not available to me. How would I achieve this with FormsAuthentication?</p>\n\n<p>My second question is, once a user is logged in, how do I know the role that they are in?</p>\n\n<p>Finally, once a user is logged in, should the entire site by https? Even areas that are open to everyone but being visited by the logged in user? The logged in user will have information displayed on screen from them on every page eg Welcome John.</p>\n"},{"tags":["asp.net-mvc","asp.net-optimization","bundling-and-minification"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13001182,"title":"MVC4 Bundling Wildcards - * vs. {version}","body":"<p>I understand and fully appreciate the new bundle wildcard {version} regex, as it will continue to pick up your script and style libraries even after updating, etc.  The problem is that I cannot get it to work effectively.</p>\n\n<p>I had previously use the following notation to pick up my jQuery scripts:</p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\n            \"~/Scripts/jquery-1.*\"));\n</code></pre>\n\n<p>and it would pick up all files matching the asterisk wildcard.  </p>\n\n<p>But when I tried the following:</p>\n\n<pre><code>        bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\n                    \"~/Scripts/jquery-{version}.js\"));\n</code></pre>\n\n<p>I noticed that the jQuery file was not written out to the _Layout.cshtml page.</p>\n\n<p>NOTE - I am indeed using the following HTML code for both examples:</p>\n\n<pre><code>@Scripts.Render(\"~/bundles/jquery\")\n</code></pre>\n\n<p>When I use the first example above (\" * \") notation the following is written to the page:</p>\n\n<pre><code>&lt;script src=\"/Scripts/jquery-1.7.2.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>However when I use the \"{version}\" notation, there is merely an empty space where the library should be written.  This pertains to both jquery files as well as the associated CSS stylesheets.</p>\n\n<p>It does not matter whether I am compiling for DEBUG or RELEASE mode.  The results are the same.  Obviously in release mode I'll get the optimized version when using the \"*\" notation:</p>\n\n<pre><code>&lt;script src=\"/bundles/jquery?v=VUv2YOeuOgHad-FHZ-vGMDu9wN1j9VZGifI1SBUUSMs1\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>So being the perfectionist that all developers are, I would greatly like to see the {version} notation work for me, as I do keep up to date on new releases and would like this control on my deployments.</p>\n\n<p>Any insight into what I may be doing wrong is greatly appreciated.</p>\n\n<p>Thanks in advance,\nDan</p>\n"},{"tags":["asp.net-mvc","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13000964,"title":"Manually set IIdentity","body":"<p>I'm using my own authentication scheme, non-cookie based. I want to be able to manually set the <code>Controller.User.Identity</code> with username and other data that I would normally set in a FormsAuthentication Cookie. Currently, the User Identity is being set by FormsAuthentication (I have no idea how, it just reads it from the encrypted cookie). How does FormsAuthentication do it? How would I do it?</p>\n"},{"tags":["asp.net-mvc","node.js","architecture","backbone.js","knockout.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13000961,"title":"Web Mobile Hybrid","body":"<p>I would like to create web site using mvc 4. I need to create <strong>web site</strong>,*<em>mobile web site</em>*, and <strong>hybrid apps</strong> for apple and anroid using <strong>phonegap</strong>. I also like to use real time notifications using <strong>nodejs</strong>. I also like (optional) to use backbone.js or Knockout.js.</p>\n\n<p>The problem is i need map all these technologies in to one project. I need an answer to how to do this?</p>\n\n<p>I mean how to setup my architecture of the project. I need that steps that i need to fallow.</p>\n\n<p>ex: \nDo i need to separate mvc project to two areas (mobile, web)? </p>\n\n<p>It is good to use Knockout.js or normal razor view?</p>\n\n<p>Then  how to add Knockout.js?</p>\n\n<p>Then what are the step i need to do if i using phonegap?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","model-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12999540,"title":"Setting audit values on model before Model Validation kicks in","body":"<p>I have defined a base class with some properties like:</p>\n\n<pre><code>public string CreatedByName { get; set; }\npublic DateTime CreatedOn { get; set; }\n\npublic string UpdatedByName { get; set; }\npublic DateTime UpdatedOn { get; set; }\n</code></pre>\n\n<p>If I create a model object inheriting from this base class like following in my controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Create(Person person)\n{\n    if (ModelState.IsValid)\n    {\n        person.Id = Guid.NewGuid();\n\n        //audit information\n        person.UpdatedByName = User.Identity.Name;\n        person.UpdatedOn = DateTime.Now;\n        person.CreatedByName = User.Identity.Name;\n        person.CreatedOn = DateTime.Now;            \n\n        UoW.Persons.Add(person);\n        UoW.Commit();\n        return RedirectToAction(\"Index\");\n    }\n    return View(person);\n}\n</code></pre>\n\n<p>it never works as <code>ModelState.IsValid</code> always returns <code>false</code> because the audit properties are not set yet at this stage.</p>\n\n<p>Is there any way to set this of kind of the values in some common place (I tried to write helper class but how to get <code>User</code>?) and that to before model validation kicks in? </p>\n\n<p>Or only choice is to make the audit properties nullabe [not required]?</p>\n\n<p><strong>EDIT:-</strong></p>\n\n<p>tried <a href=\"http://stackoverflow.com/a/12999622/13198#13198\">@archil</a>'s suggestion:</p>\n\n<p>HAHAHAH.........  DO THIS IN <code>Get</code> Action</p>\n\n<pre><code>public ActionResult Create()\n{\n    var person=new Person();\n    person.UpdatedByName = User.Identity.Name;\n    person.UpdatedOn = DateTime.Now;\n    person.CreatedByName = User.Identity.Name;\n    person.CreatedOn = DateTime.Now;\n\n    return View(person);\n</code></pre>\n\n<p><strike>\nstill getting:</p>\n\n<ul>\n<li>The CreatedOn field is required. </li>\n<li>The UpdatedOn field is required.\n</strike></li>\n</ul>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-4","bundle","asp.net-optimization"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":349,"score":2,"question_id":11944745,"title":"ASP.NET Bundles how to disable minification","body":"<p>I have debug=\"true\" in both my web.config(s), and I just don't want my bundles minified, but nothing I do seems to disable it. I've tried enableoptimisations=false, here is my code:</p>\n\n<pre><code>//Javascript\n            bundles.Add(new ScriptBundle(\"~/bundles/MainJS\")\n                .Include(\"~/Scripts/regular/lib/mvc/jquery.validate.unobtrusive.js*\")\n                .Include(\"~/Scripts/regular/lib/mvc/jquery.validate*\")\n                .Include(\"~/Scripts/regular/lib/bootstrap.js\")\n                .IncludeDirectory(\"~/Scripts/regular/modules\", \"*.js\", true)\n                .IncludeDirectory(\"~/Scripts/regular/pages\", \"*.js\", true)\n                .IncludeDirectory(\"~/Scripts/regular/misc\", \"*.js\", true));\n\n            //CSS\n            bundles.Add(new StyleBundle(\"~/bundles/MainCSS\")\n                .Include(\"~/Content/css/regular/lib/bootstrap.css*\")\n                .IncludeDirectory(\"~/Content/css/regular/modules\", \"*.css\", true)\n                .IncludeDirectory(\"~/Content/css/regular/pages\", \"*.css\", true))\n</code></pre>\n"},{"tags":["asp.net-mvc","json","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12999467,"title":"How to pretty-print JSON script in MVC 4 API","body":"<p>How can I get the following JSON response to look cleaner using MVC 4 API.  This is a sample JSON</p>\n\n<pre><code>{\"Name\":\"Apple\",\"Expiry\":\"2008-12-28T00:00:00\",\"Price\":3.99}\n</code></pre>\n\n<p>Pretty JSON</p>\n\n<pre><code>{\n  \"Name\":\"Apple\",\n  \"Expiry\":\"2008-12-28T00:00:00\",\n  \"Price\":3.99\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12998223,"title":"Adding StringLengthAttribute through custom DataAnnotationsModelMetadataProvider","body":"<p>I have a requirement to add <code>StringLengthAttribute</code> validation to a lot of models in the existing ASP.NET MVC 4 project and am trying to do this automatically through my own model metadata provider derived from <code>DataAnnotationsModelMetadataProvider</code>.</p>\n\n<p>It works perfectly with <code>RequiredAttribute</code> and some other data annotation attributes (I get both client-side and server-side validation working), however validation for the string length is not added - find the minimal example below.</p>\n\n<pre><code>public class CustomModelMetadataProvider : DataAnnotationsModelMetadataProvider\n{\n    protected override ModelMetadata CreateMetadata(IEnumerable&lt;Attribute&gt; attributes,\n                                                    Type containerType,\n                                                    Func&lt;object&gt; modelAccessor,\n                                                    Type modelType,\n                                                    string propertyName)\n    {\n        StringLengthAttribute lengthAttribute = new StringLengthAttribute(256);\n        attributes = attributes.Union(new[] { lengthAttribute });\n        return base.CreateMetadata(attributes,\n                                   containerType,\n                                   modelAccessor,\n                                   modelType,\n                                   propertyName);\n    }\n}\n</code></pre>\n\n<p>So, looks like <code>StringLengthAttribute</code> it being handled in some special way. Any ideas on how to make it work or a better implementation idea?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","remote-validation"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":12848464,"title":"MVC Remote validation, parameter is null","body":"<pre><code>public class UserModel\n    {\n        public LogOnModel LogOnModel { get; private set; }\n        public RegisterModel RegisterModel { get; private set; }\n    }\n</code></pre>\n\n<p>in my RegisterModel I have email address like this:</p>\n\n<pre><code>[RegularExpression(@\"^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$\")]\n        [Required]\n        [Display(Name = \"E-mail\")]\n        [Remote(\"IsEmailAddressAvailable\", \"Validation\", HttpMethod = \"POST\")]\n        public string EmailAddress { get; set; }\n</code></pre>\n\n<p>My validationController:</p>\n\n<pre><code>public class ValidationController : Controller\n    {\n        public JsonResult IsEmailAddressAvailable([string emailAddress)\n        {\n            return Json(false, JsonRequestBehavior.AllowGet);\n\n        }\n}\n</code></pre>\n\n<p>The view @Model is UserProfile, the emailAddress in ValidationController is null.</p>\n\n<p>I tried to change the ValidationController to look like this with no luck:</p>\n\n<pre><code>public class ValidationController : Controller\n    {\n        public JsonResult IsEmailAddressAvailable([Bind(Include = \"EmailAddress\")]RegisterModel register)\n        {\n            return Json(false, JsonRequestBehavior.AllowGet);\n\n        }\n\n\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12990326,"title":"How to serialize a JSON stringified model to an ASP.NET MVC3 model","body":"<p>I have the following snippets in my MVC 3 website.</p>\n\n<p>Model:</p>\n\n<pre><code>public class Item1\n{\n    [Display(Name = \"Family name\")]\n    public string FamilyName { get; set; }\n\n    [Display(Name = \"Given name\")]\n    public string GivenName { get; set; }\n}\n</code></pre>\n\n<p>Controller method:</p>\n\n<pre><code>public string SaveAsIs(string form_section11)\n{\n    //  method 1 works\n    var viewModel = new JavaScriptSerializer().Deserialize&lt;IDictionary&lt;string, object&gt;&gt;(form_section11);\n\n    //  method 2 gives empty viewModel2\n    var viewModel2 = new JavaScriptSerializer().Deserialize&lt;Item1&gt;(form_section11);\n\n    //  method 3 gives empty item1\n    Mapper.CreateMap&lt;IDictionary&lt;string, object&gt;, Item1&gt;();\n    Item1 item1 = Mapper.Map&lt;IDictionary&lt;string, object&gt;, Item1&gt;(viewModel);\n\n}\n</code></pre>\n\n<p>And the value I am posting back is a JSON.stringified structure representing my model. The string (laid out for readability) appears as:</p>\n\n<pre><code>\"{\n\\\"item1.FamilyName\\\":\\\"Smith\\\",\n\\\"item1.GivenName\\\":\\\"Jane\\\"\n}\"\n</code></pre>\n\n<p>What I want to do is to convert the stringified JSON to my model but cannot see how to do beyond the two attempts above or write my own serializer :-(</p>\n\n<p>Everything else works fine. Anyone got any other ideas. Thanks.</p>\n\n<h2>UPDATE 1</h2>\n\n<p>Thanks to Darin I have a partial solution which is to remove <code>item1.</code> before using <code>JavaScriptSerializer</code> as above. The strange thing is that item1. is added by Razor, MVC 3 etc when using a strongly typed model. Anyway I now have a solution - thanks.</p>\n\n<h2>UPDATE 2</h2>\n\n<p>In answer to Darin's question below, Item1 is one entity in my model. The model looks like:</p>\n\n<pre><code>public class ItemModel\n{\n    public Item1 item1 {get; set;}\n    public Item2 item2 {get; set;}\n}\n</code></pre>\n\n<p>The view uses <code>@model ItemModel</code> with the field as <code>@Html.EditorFor(m =&gt; m.item1.FamilyName)</code>. The two entities are in different forms on the same screen and I am returning them as</p>\n\n<pre><code> var form_section1Data = JSON.stringify($(\"#form_section1\").formParams()); //item1\n var form_section1Data = JSON.stringify($(\"#form_section1\").formParams()); //item2\n</code></pre>\n\n<p>and the Ajax call contains:</p>\n\n<pre><code>data: JSON.stringify({ \n    form_section1: form_section1Data,\n    form_section2: form_section2Data\n}),\n</code></pre>\n\n<p>I simplified the initial question (trying to be helpful :-))</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":12904014,"title":"Validation errors are not visible partialView in asp.net mvc","body":"<p>I have a partial view with a DropDownList control and a textbox.</p>\n\n<p>When nothing is selected or no text is entered the ModelState.IsValid is FALSE</p>\n\n<p>BUT I can see no validation errors displayed annotated on my properties.</p>\n\n<p>Why is that? I can see in the ModelState.Value.Errors property there is an \"Name is </p>\n\n<p>missing\" for example.</p>\n\n<p>When I confirm the invalid view I see this in my output window:</p>\n\n<pre><code>A first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Mvc.dll\nA first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Mvc.dll\nA first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Mvc.dll\n\n\npublic ActionResult Edit()\n{\n    return LoadEditTemplates();\n}\n\n\n[HttpPost]\npublic ActionResult Update(EditTemplateListViewModel viewModel)\n{\n    if (ModelState.IsValid &amp;&amp; !_templateDataProvider.TemplateExists(viewModel.Name))\n    {\n        Template template = Mapper.Map&lt;EditTemplateListViewModel, Template&gt;(viewModel);\n        _templateDataProvider.UpdateTemplate(template);\n        return new JsonNetResult(new { success = true });\n    }\n\n    return PartialView(viewModel);\n}\n\nprivate ActionResult LoadEditTemplates()\n{\n    var templates = _templateDataProvider.GetTemplates();\n    EditTemplateListViewModel editTemplateViewModel = new EditTemplateListViewModel()\n    {\n        DisplayList = Mapper.Map&lt;IEnumerable&lt;Template&gt;, IEnumerable&lt;TemplateViewModel&gt;&gt;(templates),\n    };\n    return PartialView(editTemplateViewModel);\n}\n\npublic class EditTemplateListViewModel\n    {\n        [Required(ErrorMessage = \"No template selected.\")]\n        public int TemplateId { get; set; }\n\n        [Required(ErrorMessage=\"Name is missing\")]\n        public string Name { get; set; }\n\n        public IEnumerable&lt;TemplateViewModel&gt; DisplayList { get; set; }      \n    }\n\n@model ITMS.Web.Models.EditTemplateListViewModel\n\n@*Remote Validation*@\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm(\"Update\", \"Template\"))\n{       \n    @Html.ValidationSummary(false)\n    @Html.DropDownListFor(x =&gt; x.TemplateId, new SelectList(Model.DisplayList, \"TemplateId\", \"Name\"), new { @class = \"listviewmodel\" })\n\n    &lt;p class=\"editor-label\"&gt;@Html.LabelFor(model =&gt; model.Name)&lt;/p&gt;\n    &lt;p class=\"editor-field\"&gt;@Html.EditorFor(model =&gt; model.Name)&lt;/p&gt;\n    &lt;p class=\"editor-field\"&gt;@Html.ValidationMessageFor(model =&gt; model.Name)&lt;/p&gt;   \n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12998314,"title":"Entity Framework creating foreign record","body":"<p>I have a User table with foreign key pointing to the Address Table.</p>\n\n<pre><code>public User()\n{\n\n}\n\npublic int UserID { get; set; }\npublic string ReferenceNumber { get; set; }\npublic string FirstName { get; set; }\npublic string SecondName { get; set; }\npublic string Email { get; set; }\npublic string Password { get; set; }\npublic bool IsEnabled { get; set; }\npublic string TelephoneNumber { get; set; }\npublic string FaxNumber { get; set; }\npublic bool IsAccountant { get; set; }\npublic int AddressID { get; set; }\npublic virtual Address Address { get; set; }\n}\n</code></pre>\n\n<p>That's working fine in the view i.e. the user is asked to select AddressID when creating new 'User' record... However, what can I do if the Address record does not exist yet (apart from creating it first) is it possible to somehow point them to the Address View, force them to create Address first and pass the primary key back or put both views on the same page? Many thanks.</p>\n"},{"tags":["javascript","jquery","html","css","asp.net-mvc"],"answer_count":2,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":1614,"score":9,"question_id":6115132,"title":"Loading jQuery from Google or locally if not online","body":"<p>Right now I have the following links in my code:</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\netc ...\n</code></pre>\n\n<p>I'd like to make use of the google.com cached copies. I heard google is the best source but please correct me if I am wrong. </p>\n\n<p>Anyway is it possible for me to code my application so it uses code from google if available and locally if not. FYI I am using Microsoft MVC3 and the Msoft cloud servers. </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","unit-testing","mocking","rhino-mocks","moq"],"answer_count":6,"favorite_count":19,"up_vote_count":45,"down_vote_count":0,"view_count":9088,"score":45,"question_id":970198,"title":"How to mock the Request on Controller in ASP.Net MVC?","body":"<p>I have a controller in C# using the ASP.Net MVC framework</p>\n\n<pre><code>public class HomeController:Controller{\n  public ActionResult Index()\n    {\n      if (Request.IsAjaxRequest())\n        { \n          //do some ajaxy stuff\n        }\n      return View(\"Index\");\n    }\n}\n</code></pre>\n\n<p>I got some tips on mocking and was hoping to test the code with the following and RhinoMocks</p>\n\n<pre><code>var mocks = new MockRepository();\nvar mockedhttpContext = mocks.DynamicMock&lt;HttpContextBase&gt;();\nvar mockedHttpRequest = mocks.DynamicMock&lt;HttpRequestBase&gt;();\nSetupResult.For(mockedhttpContext.Request).Return(mockedHttpRequest);\n\nvar controller = new HomeController();\ncontroller.ControllerContext = new ControllerContext(mockedhttpContext, new RouteData(), controller);\nvar result = controller.Index() as ViewResult;\nAssert.AreEqual(\"About\", result.ViewName);\n</code></pre>\n\n<p>However I keep getting this error:</p>\n\n<blockquote>\n  <p>Exception\n    System.ArgumentNullException:\n  System.ArgumentNullException : Value\n  cannot be null.   Parameter name:\n  request   at\n  System.Web.Mvc.AjaxRequestExtensions.IsAjaxRequest(HttpRequestBase\n  request)</p>\n</blockquote>\n\n<p>Since the <code>Request</code> object on the controller has no setter. I tried to get this test working properly by using recommended code from an answer below.</p>\n\n<p>This used Moq instead of RhinoMocks, and in using Moq I use the following for the same test:</p>\n\n<pre><code>var request = new Mock&lt;HttpRequestBase&gt;();\n// Not working - IsAjaxRequest() is static extension method and cannot be mocked\n// request.Setup(x =&gt; x.IsAjaxRequest()).Returns(true /* or false */);\n// use this\nrequest.SetupGet(x =&gt; x.Headers[\"X-Requested-With\"]).Returns(\"XMLHttpRequest\");\n\nvar context = new Mock&lt;HttpContextBase&gt;();\ncontext.SetupGet(x =&gt; x.Request).Returns(request.Object);\nvar controller = new HomeController(Repository, LoginInfoProvider);\ncontroller.ControllerContext = new ControllerContext(context.Object, new RouteData(), controller);\nvar result = controller.Index() as ViewResult;\nAssert.AreEqual(\"About\", result.ViewName);\n</code></pre>\n\n<p>but get the following error:</p>\n\n<blockquote>\n  <p>Exception     System.ArgumentException:\n  System.ArgumentException : Invalid\n  setup on a non-overridable member:    x\n  => x.Headers[\"X-Requested-With\"]  at Moq.Mock.ThrowIfCantOverride(Expression\n  setup, MethodInfo methodInfo)</p>\n</blockquote>\n\n<p>Again, it seems like I cannot set the request header.\nHow do I set this value, in RhinoMocks or Moq?</p>\n"},{"tags":["asp.net-mvc","asp.net-webforms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12996538,"title":"ASP.NET MVC and Web Forms registration","body":"<p>How does IIS know when to route a requests to the ASP.NET MVC framework and the not the Web Forms framework?</p>\n\n<p>Looking through the Web.config of an MVC project I can't see any modules or handlers that are registered, and nothing the Global.ascx seems to do it. So I am at a bit of a loss as to how the system decides which should be used to route a request.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2","enums"],"answer_count":4,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":3223,"score":4,"question_id":4194333,"title":"MVC 2 - Passing enum to CheckBoxFor","body":"<p>Let's assume we have a model: </p>\n\n<pre><code>public class Document\n{\n    public string Name { get; set;}\n    public List&lt;DayOfWeek&gt; WeekDays { get; set; }\n}\n</code></pre>\n\n<p>is it possible to render checkboxes that represents days of week for that model?\ni've searched the internet but did not find any solution.</p>\n\n<p>I mean it works whith <code>CheckBoxFor(model=&gt; model.SomeProperty)</code> but it does not work if <code>SomeProperty</code> is <code>List&lt;DayOfWeek&gt;</code>. <code>DayOfWeek</code> here is enumerator.  </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["mysql","asp.net-mvc","asp.net-mvc-4","datasource","ef-database-first"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12997652,"title":"How to create MVC Database First application with MySQL?","body":"<p>I can use MS SQL in MVC application, but now I want to create MVC Database First application with MySQL (MVC 4, VS 2012, MySQL 5.5). I can connect to MySQL in Server Explorer window. When I create new <strong>ADO.NET Entity Data Model</strong>, there is not MySQL in data sources list.</p>\n\n<p><img src=\"http://i.stack.imgur.com/F6sHR.png\" alt=\"enter image description here\"></p>\n\n<p>How can I create my first application with MySQL?</p>\n"},{"tags":["javascript","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12996315,"title":"How can I return an error message as JSON object in case the web service is down","body":"<p>I have the following action method inside an asp.net mvc web application that calls a web service and return the Json result to the view:-</p>\n\n<pre><code>public ActionResult ListPackages()\n{\n    using (var client = new WebClient())\n    {\n        try{\n            var query = HttpUtility.ParseQueryString(string.Empty);\n            UriBuilder(\"http://localhost:8080/jw/web/json/workflow/package/list\");\n            url.Query = query.ToString();\n            string json = client.DownloadString(url.ToString());\n            Thread.Sleep(500);\n            return Content(json, \"application/json\");\n        }\n        catch (System.Net.WebException ex) {\n            return Content(\"Error, service is down. please try again later\", \"application/json\");\n        }\n    }\n}\n</code></pre>\n\n<p>Then on the view I defined the following  Ajax.Actionlink:-</p>\n\n<pre><code>@Ajax.ActionLink(\"Get Process List\", \"ListPackages\", \"Home\",\nnew AjaxOptions\n{\n    HttpMethod = \"GET\",\n    LoadingElementId = \"tobehide\",\n    OnSuccess = \"getpackagelist\"\n})\n</code></pre>\n\n<p>and the following getpackagelist java script:-</p>\n\n<pre><code>function getpackagelist(result) {\n    $('#products').empty();\n    $('#title').text(\"All Processes\");\n    $.each(result.data, function (key, val) {\n        var str = val.packageName;\n        $('&lt;li/&gt;', { text: str }).appendTo($('#products'));\n    });\n    $('#tobehide').hide();\n\n}\n</code></pre>\n\n<p>The problem i am facing is that incase the web service is down and the <code>System.Net.WebException</code> exception was raised the <code>\" Error, service is down. please try again later \"</code> maeeage will not be shown in the view and nothing will be displayed after the ajax loading image...</p>\n\n<p><strong>:::EDIT:::</strong></p>\n\n<p>i modify the script to be as :-</p>\n\n<pre><code>function getpackagelist(result) {\n\n    if (result.error == null) {\n        $('#products').empty();\n        $('#title').text(\"All Processes\");\n        $.each(result.data, function (key, val) {\n            var str = val.packageName;\n            $('&lt;li/&gt;', { text: str })\n                .appendTo($('#products'));\n        });\n        $('#tobehide').hide();\n    }\n    else {\n        $('&lt;li/&gt;', { text: result.error })\n                       .appendTo($('#products'));\n    }\n</code></pre>\n\n<p>And the action method to be as :-</p>\n\n<pre><code>catch (System.Net.WebException) {\n\n                    return new JsonResult()\n                    {\n                        Data = new { error = \"Error, service is down. please try again later\" }\n                    };\n</code></pre>\n\n<p>but still no error will be displayed incase the WebExsception was raised.\nBR</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":1094,"score":3,"question_id":12172074,"title":"Add Controller in MVC4 not working","body":"<p>I'm using VS 2010 Premium. I have a MVC4 project using SqlCe 4.0 with a entity framework model.</p>\n\n<p>Model is:</p>\n\n<pre><code>  public class ProjectBuild\n    {\n       public int ProjectBuildID {get;set;}\n       public string name {get;set;}\n    }\n\n  public class ProjectBuildContext:DbContext\n     {\n       public DbSet&lt;ProjectBuild&gt; builds {get;set;}\n     }\n</code></pre>\n\n<p>Below is my connection string:</p>\n\n<pre><code> add name=\"ProjectBuildContext\" connectionString=\"Data Source=|DataDirectory|DB.sdf\"\n providerName=\"System.Data.SqlServerCe.4.0\"\n</code></pre>\n\n<p>When I try to create a new controller with the built in scaffolding too I get the following error:</p>\n\n<blockquote>\n  <p>\"Unable to retrieve metadata for ProjectBuild\".\"Using the same\n  DbCompiledModel to create contexts against different types of database\n  servers is not supported. Instead, create a separate DbCompiledModel\n  for each type of server being used.</p>\n</blockquote>\n"},{"tags":["asp.net-mvc","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":173,"score":0,"question_id":8231596,"title":"Can't login to my own login page","body":"<p>I've created my own login page but when i try to sign in by clicking the submit button it jumps right to the \"catch\" where it returns View() instead of redirecting to Admin. I can't seem to find any information about it by googling it. I have also tried to remove try and catch and got this exception: \"InvalidOprationException was unhanded by user code\" Sequence contains no elements. </p>\n\n<p>Here's my login method:     </p>\n\n<pre><code>public class LoginController : Controller\n{\n            public static byte[] lagHash(string innString)\n    {\n        var algoritm = System.Security.Cryptography.MD5.Create();\n        byte[] data, utdata;\n        data = System.Text.Encoding.ASCII.GetBytes(innString);\n        utdata = algoritm.ComputeHash(data);\n        return utdata;\n    }\n\npublic ActionResult Login()\n    {\n\n        return View();\n    }\n    [HttpPost]\n    public ActionResult Login(FormCollection innAdmin)\n    {\n        string Username = innAdmin[\"Username\"];\n\n        try\n        {\n            byte[] passwordArray;\n            passwordArray = createHash(innAdmin[\"Password\"]);\n\n            var db = new Models.DataClass1DataContext();\n            var Admin = (from s in db.Admins\n                         where s.Username == Username &amp;&amp;\n                         s.Password == passwordArray\n                         select s).Single();\n            if (Admin.Username == innAdmin[\"Username\"])\n            {\n                return RedirectToAction(\"Admin\", \"Admin\");\n            }\n            else\n            {\n                return View();\n            }\n        }\n        catch (Exception wrong)\n        {\n            return View();\n        }\n    }\n</code></pre>\n\n<p>Here is the code for the aspx file:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Username :&lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type = \"text\" name=\"Username\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Password :&lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type = \"password\" name=\"Password\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;input type = \"submit\" value=\"Log In\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","form-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":8330527,"title":"Changing text if a form has an error","body":"<p>I currently have a summary message at the top of my form, inviting my user to login. If the form does not validate on submit, I wish for this to then be replaced with the relevant error.</p>\n\n<p>The only way I can think of is by hiding the initial text (perhaps in a <code>@Html.Label</code>) and then showing a <code>@Html.ValidationSummary</code>. However, I feel there is most likely a far more efficient way of doing this. </p>\n\n<p>Can anybody help?</p>\n"},{"tags":["jquery","asp.net-mvc","security","architecture"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":8277818,"title":"widget development","body":"<p>i develop a asp.net mvc3 shop application which is multi tenant. Each customer (around 1000 sites) has a own website where he likes to embed this solution. I use a extended validation SSL as this increases customer thrust.</p>\n\n<p>so far i use iframes, which is not a good choice as on the payment step the customer does not see that the connection is SSL encrypted. so i choosed to put the page complete behind ssl and the page of the customer is ssl too. this is a unsatisfying approach, as i have problems with scrollbars, positioning of lightboxes etc. </p>\n\n<p>my new approach would use asp.net mvc3 to provide controllers which deliver json results; on the client side i want to use a jquery based mvc framework together with jquery templates.</p>\n\n<p>my question is, how should i handle SSL to let the customer see the traffic is encrypted? I want to avoid that customers need to create a proxy and route the traffic through their ssl certificate as many different CMS systems are involved so i can't provide a simple \"how-to\" to the customer.</p>\n"},{"tags":["asp.net-mvc","openxml","docx","openxml-sdk"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2478,"score":2,"question_id":5671702,"title":"Open xml replace text from word file and return memory stream using MVC","body":"<p>I have an word file that contain my specified pattern text {pattern} and I want to replace those pattern with new my string which was read from database. So I used open xml read stream from my docx template file the replace my pattern string then returned to stream which support to download file without create a temporary file. But when I opened it generated me error on docx file. Below is my example code</p>\n\n<pre><code>public ActionResult SearchAndReplace(string FilePath)\n{\n    MemoryStream mem = new MemoryStream(System.IO.File.ReadAllBytes(FilePath));\n    using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(mem, true))\n    {\n        string docText = null;\n        using (StreamReader sr = new StreamReader(wordDoc.MainDocumentPart.GetStream()))\n        {\n            docText = sr.ReadToEnd();\n        }\n\n        Regex regexText = new Regex(\"Hello world!\");\n        docText = regexText.Replace(docText, \"Hi Everyone!\");\n\n//Instead using this code below to write text back the original file. I write new string back to memory stream and return to a stream download file\n        //using (StreamWriter sw = new //StreamWriter(wordDoc.MainDocumentPart.GetStream(FileMode.Create)))\n        //{\n        //    sw.Write(docText);\n        //}\n\n        using (StreamWriter sw = new StreamWriter(mem))\n                    {\n                        sw.Write(docText);\n                    }\n    }\n    mem.Seek(0, SeekOrigin.Begin); \n\n    return File(mem, \"application/octet-stream\",\"download.docx\"); //Return to download file\n}\n</code></pre>\n\n<p>Please suggest me any solutions instead read a text from a word file and replace those expected pattern text then write data back to the original file. Are there any solutions replace text with WordprocessingDocument libary? How can I return to memory stream with validation docx file format?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp-classic","components","com+"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12973593,"title":"Same Component in both asp.net, asp.net MVC and Classic ASP","body":"<p>I have a big website/application coded in Classic ASP, ASP.NET and ASP.NET MVC.\nI have a menu on top with a lot of HTML CSS JS, and some conifiguration (visible or not ...)\nand lot of dynamic links.</p>\n\n<p>So the problem is when i have to update the menu i have to update 3 files, one Include in Classic ASP, one ASCX user control in asp.net and one Partial view in asp.NET MVC</p>\n\n<p>I hate code duplication, so is it possible to use only one component ? \nI heared about Com but i have no idea where to start.</p>\n\n<p>Thanks for help</p>\n\n<p>Edit : I am thinking know to use a .net Object, that can generate a string containing all the html that i need and then put it in the views MVC and in the asp.net pages\nBut how to use it in Classic ASP? </p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":248,"score":-2,"question_id":4124077,"title":"Ajax.BeginForm - possible bug - MVC","body":"<p>If you have <code>Html.Hidden(...)</code> inside <code>Ajax.BeginForm</code> and you submit the form more than once and you're updating the value of the hidden field using <code>ViewData</code> or whatever, it won't update.  Maybe because <code>Html.Hidden</code> is a server-side control. (<code>Html.Hidden</code> is inside the UpdateTargetId div) </p>\n\n<p>Another way things would break is if there is an <code>Html.TextBox</code> inside <code>Ajax.BeginForm</code> or something and you need to hide/show it based on what comes out of that Ajax Request using some kind of if, else clause.  It won't appear/disappear. </p>\n"},{"tags":[".net","asp.net","asp.net-mvc","visual-studio","hardware"],"answer_count":5,"favorite_count":6,"up_vote_count":8,"down_vote_count":0,"view_count":2360,"score":8,"question_id":4589635,"title":"Speeding up compilation and unit testing in Visual Studio 2010 / Resharper / ASP.NET MVC","body":"<p>I'm working on a medium sized ASP.NET MVC solution with Visual Studio 2010 and Resharper. The project was blazing fast when I started developing it 1 1/2 years ago, but over time it has become slower - not only compilation, but also the time it takes ASP.NET to re-initialize the website. Since I am practicing TDD and refactoring quite often, I frequently need to recompile an re-run my tests, so I am looking for ways to mitigate this if any possible.</p>\n\n<p><strong>The problem in detail</strong></p>\n\n<p>It takes me about 20-25 seconds from starting to recompile the project to being able to view the result in a web browser. </p>\n\n<p>Running a single unit test (just a single test, not the entire suite) with the Resharper test runner is also very slow (about 15-20 seconds). For some weird reason it seems that Resharper takes most of the time initializing the test run and spends only a very small fraction actually running the test. </p>\n\n<p><strong>What I've already done:</strong></p>\n\n<ul>\n<li>Replaced my hard drive with an SSD (huge impact)</li>\n<li>Moved ASP.NET's compilation and the Windows Temp directory dir to SSD-like (hardware) RAM drive (big impact, but that was before SSD)</li>\n<li>Disabled automatic compilation of one project I rarely modify (Small impact since that project is small anyway). </li>\n<li>Weeded out unnecessary references to .NET and third party libraries (very small impact, if any)</li>\n<li>Some black magic tricks discussed in <a href=\"http://blog.lavablast.com/post/2010/12/01/Slash-your-ASPNET-compileload-time.aspx\">this blog post</a>. (very small impact, if any). </li>\n</ul>\n\n<p>Yet I am still stuck with the (slow?) figures above and I feel that this is harming my productivity. Now I am wondering what do do next. </p>\n\n<p><strong>My current system setup:</strong></p>\n\n<ul>\n<li>Core 2 Quad Q6600 CPU  </li>\n<li>4GB DDR2 800 RAM</li>\n<li>120 GB SSD</li>\n<li>Windows 7 x64</li>\n<li>Visual Studio 2010 Ultimate with Resharper 5.5</li>\n</ul>\n\n<p><strong>My solution's specs:</strong></p>\n\n<ul>\n<li>22.000 Lines of .NET 4 C# Code </li>\n<li>3 projects: One ASP.NET MVC, one test project , one tiny general purpose library is included by the other two and which I do not compile unless something changed.</li>\n<li>35 references to other libraries (.NET framework and open source stuff)</li>\n<li>~200 Views</li>\n<li>850 Unit Tests</li>\n</ul>\n\n<p><strong>Now my questions:</strong></p>\n\n<ul>\n<li>Would upgrading my RAM to 8GB could give me a significant performance boost?</li>\n<li>Are these figures normal? Or perhaps this could be a problem with my solution?</li>\n<li>What would you try next (apart from buying an entirely new computer)? </li>\n</ul>\n\n<p>Thanks,</p>\n\n<p>Adrian</p>\n\n<p><strong>Edit:</strong> One particularly weird thing is that when I hit the \"build solution\" button, Visual Studio spends about 8 seconds showing me a waiting symbol until it actually starts compiling and the compilation window is being updated. The IDE is unrespsonsive during this period. Thats a good portion of the actual compilation time. I wonder what Visual Studio is doing during this period?</p>\n"},{"tags":["asp.net-mvc","iis7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12996565,"title":"MVC writing to JS file - security","body":"<p>I have .js language dictionary files that allow interface to be translated dynamically on a single click. Now I got request to make those translations editable by client. Since dictionary is already in DOM, with single click it can be transferred to controller action that would then render it in some editable interface.</p>\n\n<p>My question is: What is the safest setup that would allow me to save changed values back to JS file without compromising site security?</p>\n"},{"tags":["asp.net-mvc","sql-server-2008","session-state","session-cookies"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":143,"score":2,"question_id":12994772,"title":"Why Asp.net MVC4 can not use the cookieless of SQL Server Session state storage","body":"<p>ALL, Here is my web config in a Asp.net MVC4 application. I found if I set cookieless false ,everything goes fine. but If I don't want use cookie . then the application can not work.when I debug the application, I found the controller can not receive any request from the view. I think It is because when in the cookie-less mode, Something would be appended to the url before . like http:/ /localhost:8119/(S(3cicpjpagvpunr5he5fnfrj1))/.</p>\n\n<pre><code>&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.webPages.razor\" type=\"System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;section name=\"webAssets\" type=\"Telerik.Web.Mvc.Configuration.WebAssetConfigurationSection, Telerik.Web.Mvc\" requirePermission=\"false\" /&gt;\n      &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n      &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n\n  &lt;connectionStrings&gt;\n    &lt;add name=\"...\" connectionString=\"...\" providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"2.0.0.0\" /&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"true\" /&gt;\n    &lt;add key=\"PreserveLoginUrl\" value=\"true\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;customErrors mode=\"Off\" /&gt;\n    &lt;httpRuntime executionTimeout=\"14400\" maxRequestLength=\"716800\" /&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\" /&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/Login\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n        &lt;add namespace=\"Telerik.Web.Mvc.UI\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;profile defaultProvider=\"DefaultProfileProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultProfileProvider\" type=\"System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;roleManager defaultProvider=\"DefaultRoleProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultRoleProvider\" type=\"System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;!-- &lt;sessionState mode=\"InProc\" timeout=\"30\" customProvider=\"DefaultSessionProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/sessionState&gt; --&gt;\n    &lt;sessionState mode=\"SQLServer\" cookieless=\"true\" sqlConnectionString=\"data source=xxxx; User ID=xxxx; password=xxxx\" timeout=\"300\" sqlCommandTimeout=\"10\" /&gt;\n    &lt;httpHandlers&gt;\n      &lt;add verb=\"GET,HEAD\" path=\"asset.axd\" validate=\"false\" type=\"Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc\" /&gt;\n    &lt;/httpHandlers&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;security&gt;\n      &lt;requestFiltering&gt;\n        &lt;requestLimits maxAllowedContentLength=\"3000000000\" /&gt;\n      &lt;/requestFiltering&gt;\n    &lt;/security&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n    &lt;directoryBrowse enabled=\"true\" /&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"asset\" /&gt;\n      &lt;add name=\"asset\" preCondition=\"integratedMode\" verb=\"GET,HEAD\" path=\"asset.axd\" type=\"Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Helpers\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.0.0.0\" newVersion=\"4.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.WebPages\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Microsoft.WindowsAzure.StorageClient\" publicKeyToken=\"31bf3856ad364e35\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-1.7.0.0\" newVersion=\"1.7.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n &lt;/configuration&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12991996,"title":"get value of PersistentCookie in MVC Custom Membership","body":"<p>i use MVC 4,my login action is like to this:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult LogOn(Account loginInfo, string returnUrl)\n    {\n        if (this.ModelState.IsValid)\n        {\n            if (loginInfo.Username == \"Ali\" &amp;&amp; loginInfo.Password == \"110\")\n            {\n                FormsAuthentication.SetAuthCookie(loginInfo.Username, loginInfo.RememberMe);\n                FormsAuthentication.RedirectFromLoginPage(loginInfo.Username, loginInfo.RememberMe);\n            }\n        }\n        this.ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n        ViewBag.Error = \"Login faild! Make sure you have entered the right user name and password!\";\n        return View(loginInfo);\n    }\n</code></pre>\n\n<p>now my question is:\nhow i can in any time chack a user checked RememberMe checkbox or Not,in otherwords get value of PersistentCookie?</p>\n\n<p><strong>Two SOLUTIONS</strong>:</p>\n\n<p><strong>my solution</strong>:</p>\n\n<pre><code>        var isPersistent = false;\n        var authCookie = HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName];\n        if (authCookie != null)\n        {\n            var ticket = FormsAuthentication.Decrypt(authCookie.Value);\n            isPersistent = ticket.IsPersistent;\n        }\n</code></pre>\n\n<p><strong>ChunHao Tang Solution(with a little change)</strong>:</p>\n\n<pre><code>var isPersistent  = ((System.Web.Security.FormsIdentity) User.Identity).Ticket.IsPersistent;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","session","iis7","worker-process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12995345,"title":"IIS 7 Application Pool work process life and Session life","body":"<p>In IIS7 Application Pool there is a setting Idle-time out default is 20 min,\nwhich says :</p>\n\n<pre><code>    Amount of time(in minutes) a worker process will remian \nidle before it shuts down, A woker process is idle\n    if it is not processing requests and no new requests are received.\n</code></pre>\n\n<p>My question is \nIf the worker process shut down because of the time-out time . Does the session created by application which host in this worker process lost ? thanks.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","forms-authentication"],"answer_count":5,"favorite_count":13,"up_vote_count":23,"down_vote_count":0,"view_count":15954,"score":23,"question_id":1149996,"title":"Storing more information using FormsAuthentication.SetAuthCookie","body":"<p>I am using aspx and c# for a setting a authentication cookie for a login. </p>\n\n<pre><code>FormsAuthentication.SetAuthCookie(UserName, True)\n</code></pre>\n\n<p>I want to store more information in the same cookie. Can I add values to this authentication cookie or do I have to use a second http cookie?</p>\n\n<p>Basically I'm looking for away to store the User's <code>Id</code> so I may be able to access the database using the users table row key</p>\n\n<p>Thanks,\nEden</p>\n"},{"tags":["c#","asp.net-mvc","dictionary","static","queue"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12994741,"title":"Static dictionary to hold user messages","body":"<p>I created a static class to hold user messages such as \"Item successfully added\" or \"Password successfully changed\", etc. Inside the class is a static dictionary which holds all the messages. The key of the dictionary is the UserId. I then have an Action which renders in _Layout.cshtml so that the messages will follow the user even if they are redirected off the page.</p>\n\n<p>For example, I might allow a user to \"Add\" an item, and then once the item is added successfully, it will redirect to the List page for that item and then display the message \"Item successfully added.\"</p>\n\n<p>This worked great until I deployed to my production site and I noticed that the messages were \"lagging\". I would add an item and then it would redirect to the list page, but the message would not display. I would then navigate to somewhere else in the application and then the message would display on that page.</p>\n\n<p>Any ideas why this would be happening?</p>\n\n<p>Here's the code for my UserMessageManager</p>\n\n<pre><code>public static class UserMessageManager\n{\n    private static readonly Dictionary&lt;int, Queue&lt;UserMessage&gt;&gt; UserMessages = new Dictionary&lt;int, Queue&lt;UserMessage&gt;&gt;();\n\n    public static void Add(int userId, string message)\n    {\n        if (string.IsNullOrWhiteSpace(message))\n            return;\n\n        if (!UserMessages.Keys.Contains(userId))\n        {\n            UserMessages.Add(userId, new Queue&lt;UserMessage&gt;());\n        }\n\n        UserMessages[userId].Enqueue(new UserMessage { Message = message});\n    }\n\n    public static List&lt;UserMessage&gt; Get(int userId)\n    {\n        if (!UserMessages.Keys.Contains(userId))\n        {\n            UserMessages.Add(userId, new Queue&lt;UserMessage&gt;());\n        }\n\n        var messages = new List&lt;UserMessage&gt;();\n        while (UserMessages[userId].Any())\n        {\n            messages.Add(UserMessages[userId].Dequeue());\n        }\n\n        return messages;\n    }\n}\n\npublic class UserMessage\n{\n    public string Message { get; set; }\n}\n</code></pre>\n\n<p>EDIT: After some playing around, the messages will sometimes even \"bunch up\". I will add a messages to the dictionary after creating a few \"items\" and the messages will suddenly all display at once at a seemingly random time.</p>\n"},{"tags":["asp.net-mvc","browser","mobile","override","asp.net-mvc-4"],"answer_count":5,"favorite_count":7,"up_vote_count":13,"down_vote_count":0,"view_count":1944,"score":13,"question_id":9354188,"title":"ASP.NET MVC 4 Mobile Display Modes Stop Working","body":"<p>Mobile display modes in ASP.NET MVC 4 stop serving the correct views after about an hour of uptime, despite browser overrides correctly detecting an overridden mobile device.</p>\n\n<p>Recycling the application pool temporarily solves the problem.</p>\n\n<p>The new browser override feature correctly allows mobile devices to view the desktop version of a site, and vice-versa. But after about an hour of uptime, the mobile views are no longer rendered for a mobile device; only the default desktop Razor templates are rendered. The only fix is to recycle the application pool.</p>\n\n<p>Strangely, the browser override cookie continues to function. A master <code>_Layout.cshtml</code> template correctly shows \"mobile\" or \"desktop\" text depending on the value of <code>ViewContext.HttpContext.GetOverriddenBrowser().IsMobileDevice</code>, but the wrong views are still being rendered. This leads me to believe the problem lies with the DisplayModes.</p>\n\n<p>The action in question is not being cached:</p>\n\n<pre><code>[OutputCache(NoStore = true, Duration = 0, VaryByParam = \"*\")]\n</code></pre>\n\n<p>I am using 51Degrees for mobile detection, but I don't think this should affect the overridden mobile detection. Is this a bug in <code>DisplayModes</code> feature for ASP.NET MVC 4 Beta &amp; Developer Preview, or am I doing something else wrong?</p>\n\n<hr>\n\n<p>Here is my <code>DisplayModes</code> setup in <code>Application_Start</code>:</p>\n\n<pre><code>DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode(\"iPhone\")\n{\n    ContextCondition = context =&gt;\n        context.GetOverriddenBrowser().IsMobileDevice\n        &amp;&amp; (context.Request.UserAgent.IndexOf(\"iPhone\", StringComparison.OrdinalIgnoreCase) &gt;= 0\n        || context.Request.UserAgent.IndexOf(\"Android\", StringComparison.OrdinalIgnoreCase) &gt;= 0\n        || !context.Request.Browser.IsMobileDevice)\n    });\n\n/*  Looks complicated, but renders Home.iPhone.cshtml if the overriding browser is\n    mobile or if the \"real\" browser is on an iPhone or Android. This falls through\n    to the next instance Home.Mobile.cshtml for more basic phones like BlackBerry.\n*/\n\nDisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode(\"Mobile\")\n{\n    ContextCondition = context =&gt;\n        context.GetOverriddenBrowser().IsMobileDevice\n});\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1085,"score":0,"question_id":6309359,"title":"Why won't Html.ListBoxFor() highlight current selected items?","body":"<p>I am trying to understand why my <code>Html.ListBoxFor()</code> is not highlighting current selected items when the view loads.</p>\n\n<p>I have a database model:</p>\n\n<pre><code>    public class Issue\n    {\n        [Key]\n        public int      IssueId     { get; set; }\n        public int      Number      { get; set; }\n        public string   Title       { get; set; }\n        public DateTime Date        { get; set; }\n\n        public virtual ICollection&lt;Creator&gt; Creators { get; set; }\n    }\n\n    public class Creator\n    {\n        [Key]\n        public int      CreatorId   { get; set; }\n        public string   FirstName   { get; set; }\n        public string   MiddleName  { get; set; }\n        public string   LastName    { get; set; }\n\n        public virtual ICollection&lt;Issue&gt; Issues { get; set; }\n    }\n\n    public class Icbd : DbContext\n    {\n        public DbSet&lt;Issue&gt; Issues { get; set; }\n        public DbSet&lt;Creator&gt; Creators { get; set; }\n    }\n</code></pre>\n\n<p>I then have an editing model:</p>\n\n<pre><code>public class IssueEditModel\n{\n    public Issue Issue { get; set; }\n    public IEnumerable&lt;Creator&gt; Creators { get; set; }\n    public IEnumerable&lt;Creator&gt; SelectedCreators { get {return Issue.Creators;} }\n}\n</code></pre>\n\n<p>Then, in my controller I populate <code>IssueEditModel</code>:</p>\n\n<pre><code>    public ActionResult EditIssue( int id = 0 )\n    {\n        IssueEditModel issueEdit = new IssueEditModel{\n            Creators = db.Creators.ToList(),\n            Issue = new Issue{ Creators = new List&lt;Creator&gt;()},\n        };\n        if (id &gt; 0)\n        {\n            issueEdit.Issue = db.Issues.Include(\"Creators\").Where(x =&gt; x.IssueId == id).Single();\n        }\n\n        return View(issueEdit);\n    }\n</code></pre>\n\n<p>This populates all objects correctly (as far as I can tell, anyway.) In my View, I am writing a listbox like this:</p>\n\n<pre><code>    &lt;%: Html.ListBoxFor(\n                x =&gt; x.SelectedCreators, \n                new SelectList(\n                    Model.Creators, \n                    \"CreatorId\", \n                    \"LastName\"\n        )\n            )%&gt;\n</code></pre>\n\n<p>This lists all the options correctly, but I cannot get the currently select items to highlight. I almost want to write my own Html Helper because this is such a simple operation, I don't understand why this is being so difficult.</p>\n\n<p>Why wont the Html Helper highlight the current items?</p>\n"},{"tags":["asp.net-mvc","mvc","tdd","unity","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12989766,"title":"MVC4 TDD with multiple layers","body":"<p>I am learning about DI, IoC and MOQ so I can TDD my new MVC4 application.</p>\n\n<p>I followed a lot of examples online but there is one thing I cannot get my hands around.</p>\n\n<p>My application consists out of 3 layers (physical projects):</p>\n\n<ol>\n<li>Application layer (controllers / models / standard MVC4 stuff).</li>\n<li>Business layer (does all the calculating and processing data).</li>\n<li>DAL (EF5).</li>\n</ol>\n\n<p>Now I have a very simple <code>UserController</code></p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class UserController : Controller\n{\n    readonly IUserRepository _repository;\n\n    public UserController(IUserRepository rep)\n    {\n        _repository = rep;\n    }\n\n    public ActionResult Index()\n    {\n        IList&lt;User&gt; users = _repository.Get(10);\n        return View(users);\n    }\n</code></pre>\n\n<p>Dependency is injected with Unity and this works fine.</p>\n\n<p>In the business layer I have the repositories:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public interface IUserRepository\n{\n    IList&lt;User&gt; Get(Int32 count);\n}\n\npublic class UserRepository : IUserRepository\n{\n    public IList&lt;User&gt; Get(Int32 count)\n    {\n        // Here I fetch the data from the Database\n        // and do some stuff with it, this can be\n        // quite a big method.\n    }\n}\n</code></pre>\n\n<p>Now I need to access my DAL which I can do in my <code>UserRepository</code>'s Get method.</p>\n\n<p>Only how do I unit test this? There should not be a dependency in the class I think because of the testability.</p>\n\n<p>If I use the actual <code>UserRepository</code> class in my unit test to test it will go to the DAL and use data from there, but I need mock data.</p>\n\n<p>Do I need to make another <code>IUserDataRepository</code> where the actual data is fetched from the database and pass this into the <code>UserRepository</code> constructor or should I use Unity to handle this for me?</p>\n\n<p><strong>Possible answer?</strong></p>\n\n<p>I created a new interface called <code>Users</code>:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class Users: IUsers\n{\n    private readonly IUserRepository _userRepository;\n    public Users(IUserRepository userRepository)\n    {\n        _userRepository = userRepository;\n    }\n\n    public User Get(String id)\n    {\n       // Do all the magic here here\n    }\n}\n</code></pre>\n\n<p>From this interface <code>IUsers</code>:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public interface IUsers\n{\n    User Get(String id);\n}\n</code></pre>\n\n<p>But I moved my database oriented repositories to the DAL:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class UserRepository : IUserRepository\n{ \n    public User Get(String id)\n    {\n        // Retrieve the user from the database with EF5\n    }\n}\n\npublic interface IUserRepository\n{\n    User Get(String id);\n}\n</code></pre>\n\n<p>The controller stayed about the same, but now has a dependency to the IUser interface:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class UserController : Controller\n{\n    readonly IUsers _users;\n\n    public UserController(IUsers users)\n    {\n        _users = users;\n    }\n\n    public ActionResult Index()\n    {\n        User user = _users.Get(10);\n        return View(users);\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3483,"score":2,"question_id":4999445,"title":"An attempt to attach an auto-named database for file <FILE> failed. A database with the same name exists","body":"<p>I have the ASPNETDB.MDF database in the App_Data folder of my project.</p>\n\n<p>I'm getting an error when I try to add a user:</p>\n\n<pre><code>MembershipUser user = Membership.CreateUser(viewModel.Username, viewModel.Password, viewModel.Contact.Email,\n                                            viewModel.SecurityQuestion, viewModel.SecurityAnswer, true, out createStatus);\n</code></pre>\n\n<p>The error is:</p>\n\n<p><strong>An attempt to attach an auto-named database for file C:\\Users\\Steven\\documents\\visual studio 2010\\Projects\\MyApp\\MyApp.WebUI\\App_Data\\ASPNETDB.MDF failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share.</strong></p>\n\n<p>My web.config has this connection string and membership info:</p>\n\n<pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"ASPNETDB\" connectionString=\"Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\ASPNETDB.MDF;Integrated Security=True\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n\n&lt;membership&gt;\n  &lt;providers&gt;\n    &lt;clear /&gt;\n    &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ASPNETDB\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n  &lt;/providers&gt;\n&lt;/membership&gt;\n&lt;profile&gt;\n  &lt;providers&gt;\n    &lt;clear /&gt;\n    &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ASPNETDB\" applicationName=\"/\" /&gt;\n  &lt;/providers&gt;\n&lt;/profile&gt;\n&lt;roleManager enabled=\"true\"&gt;\n  &lt;providers&gt;\n    &lt;clear /&gt;\n    &lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ASPNETDB\" applicationName=\"/\" /&gt;\n    &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n  &lt;/providers&gt;\n&lt;/roleManager&gt;\n</code></pre>\n\n<p>I have a feeling my connection string is wrong, but I really have no idea.</p>\n"},{"tags":["asp.net","asp.net-mvc","security","reflection","permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12972937,"title":"Assign custom class permissions check for controller actions in ASP.NET MVC4","body":"<p>I have an ASP.NET MVC4 site with custom user/role provider. Entity Framework works with the user and role entities at the bottom level. Now I am introducing a concept of <code>RolePermission</code>s. Each role has an asscocialted list of permissions that allow users in this role to perform certain actions within the system, like deleting comments for example. </p>\n\n<p>In my custom-build admin panel I want to list all the actions of a controllers and have an ability to allow or disallow the call to some action based on the presenace of a permission in the curent user's role.</p>\n\n<p>Questions are:</p>\n\n<ol>\n<li>Is it possible?</li>\n<li>How do I list a set of actions in the controller.</li>\n<li>How do I assign or cancel an association between action and a role permission.</li>\n</ol>\n\n<p>Possible starategy:</p>\n\n<p>I introduce a global custom filter that is applied to all of the controllers and actions, that checks my database to see If I have a logical association. This way a checking code is ran every time the user makes a call to an action. Still how do I list controllers and actions (via reflection perhaps?)</p>\n"},{"tags":["asp.net-mvc","visual-studio","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12993154,"title":"Can´t add new Scalar Property","body":"<p>Here is my environment:</p>\n\n<p>VS 2012<br>\nAsp.net MVC4</p>\n\n<ol>\n<li>I created one new Model Diagram.</li>\n<li>Add one Entity called Tipo</li>\n<li>Right-click on model and created Database.</li>\n<li>Create the controllers and views.</li>\n<li>Everything working fine till now.</li>\n</ol>\n\n<p>Now I want to add a new Scalar Property.</p>\n\n<p>So, I´ve add the new Scalar Property and now I´m getting this error when I call the page:</p>\n\n<p>The model backing the <code>TipoContext</code> context has changed since the database was created.</p>\n\n<p>I´ve already digg the stackoverflow and found a lot of suggestion, but none worked for me.</p>\n"},{"tags":["c#","asp.net-mvc","datetime","attributes","dataannotations"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":860,"score":6,"question_id":6593238,"title":"ASP.NET MVC displaying date without time","body":"<p>I have my model field decorated in the following way:</p>\n\n<pre><code>[DataType(DataType.Date)]\n[Display(Name = \"Date of birth\")]\npublic string DateOfBirth { get; set; }\n</code></pre>\n\n<p>When I want to display the value in the view using the following code:</p>\n\n<pre><code>&lt;%: Html.DisplayFor(m =&gt; m.DateOfBirth) %&gt;\n</code></pre>\n\n<p>The problem is that the date is displayed together with its time value. I wonder why it does not take DateType attribute into consideration and displays only the date value without time. I know that I may create a display template for DateTime but in other cases than date of birth I want to show time together with date. How to solve the problem?</p>\n"},{"tags":["html","asp.net-mvc","mobile","jquery-mobile"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12992091,"title":"Detect mobile phones vs. non-phone mobile devices?","body":"<p>Before you ignore this post, I've read countless posts on how to use screen resolution, user agents, and the like to detect mobile platform as whether to display a \"full featured\" or larger website vs. a smaller one.</p>\n\n<p>I am using .Net MVC4 and can already redirect to my .mobile pages via global.asax.cs and _Layout.Mobile files without a hitch.  </p>\n\n<p>My question is thus:\nOnce on a mobile page, I'd like to know whether this is a phone of tablet (iPad, Android, etc) in order to render a \"Call Us\" button on the page.  I am using jQueryMobile so I've got the code so far to do the following:</p>\n\n<pre><code>&lt;a href=\"tel:+15559876543\" data-role=\"button\"&gt;Call Us Today&lt;/a&gt;\n</code></pre>\n\n<p>Basically I am checking to see if the device has a radio and can make calls, so as not to frustrate that WiFi-only iPad user who clicks on a \"Call Us\" link and doesn't get anywhere.</p>\n\n<p>I am entirely cognizant of the fact that there may be a better approach to what I am doing, and I am gratefully open to those suggestions as well.</p>\n\n<p>Thanks in advance,\nDan</p>\n"},{"tags":["asp.net-mvc","publish","godaddy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":39,"score":-1,"question_id":12992806,"title":"Can't publish to GoDaddy.com","body":"<p>I'm trying to publish my web app to GoDaddy.com from Visual Studio 2010, but when publishing, about 50% of the files fail to upload. I keep getting this error: <code>Unable to add 'some file path' to the Web site.  An unexpected network error occurred (550).</code> Any ideas what's happening?</p>\n"},{"tags":["asp.net-mvc","membership-provider"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":125,"score":0,"question_id":12992228,"title":"Error when deleting user mvc 4 using SimpleMembership","body":"<p>When I try <code>Membership.DeleteUser(string, bool)</code> in a MVC 4 project where I use <code>SimpleMembership</code> provider, I get following error message:</p>\n\n<blockquote>\n  <p>\"The DELETE statement conflicted with the REFERENCE constraint\n  \"fk_UserId\".  The conflict occurred in database \"Conductor_Basic3\",\n  table \"dbo.webpages_UsersInRoles\", column 'UserId'. The statement has\n  been terminated.\"</p>\n</blockquote>\n\n<p>The constraints is set and is correct, so I can't really understand the error message. I guess I've missed something here.</p>\n\n<p>Can anyone explain to me this error?</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":4,"favorite_count":4,"up_vote_count":11,"down_vote_count":0,"view_count":15957,"score":11,"question_id":3908171,"title":"JQGrid, change row background color based on condition","body":"<p>I have the following jqgrid that uses the jquery ui theme imported to my master page.</p>\n\n<pre><code>  $(\"#shippingscheduletable\").jqGrid({\n            url: $(\"#shippingscheduleurl\").attr('href'),\n            datatype: 'json',\n            mtype: 'GET',\n            altRows: true,\n            colNames: ['Dealer', 'Model', 'Invoice', 'Date', 'PO', 'Serial', 'Status', 'City', 'State', 'IsPaid', 'Promo', 'Carrier', 'Int Notes', 'Ord Notes', 'Terms'],\n            colModel: [\n     { name: 'Company', index: 'id', width: 125, align: 'left' },\n     { name: 'Model', index: 'Model', width: 50, align: 'left' },\n     { name: 'Invoice', index: 'Invoice', width: 50, align: 'left' },\n     { name: 'Date', index: 'OrderDate', width: 60, align: 'left' },\n     { name: 'Po', index: 'PONum', width: 75, align: 'left' },\n     { name: 'Serial', index: 'Serial', width: 50, align: 'left' },\n     { name: 'Status', index: 'OrderStatus', width: 70, align: 'left' },\n     { name: 'City', index: 'City', width: 100, align: 'left' },\n     { name: 'State', index: 'State', width: 30, align: 'left' },\n     { name: 'IsPaid', index: 'IsPaid', width: 30, align: 'left' },\n     { name: 'Promo', index: 'Promo', width: 50, align: 'left' },\n     { name: 'Carrier', index: 'Carrier', width: 80, align: 'left' },\n     { name: 'InternalNotes', index: 'InternalNotes', width: 110, align: 'left' },\n     { name: 'OrderNotes', index: 'OrderNotes', width: 110, align: 'left' },\n     { name: 'Terms', index: 'Terms', width: 60, align: 'left' }\n     ],\n            pager: jQuery(\"#shippingschedulepager\"),\n            rowNum: 100,\n            rowList: [100, 150, 200],\n            sortname: 'Company',\n            sortorder: \"asc\",\n            viewrecords: true,\n            height: '700px',\n            multiselect: true\n        });\n</code></pre>\n\n<p>I would like to change the row color for all rows that have a true value for the IsPaid Field. Is this possible? if so, how would I do this?\nI have been researching custom formatting, but I am unsure if this is the correct approach, as I cannot find anything about changing the color of the back ground.\nThanks!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","tag-cloud"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1375,"score":2,"question_id":1769310,"title":"How to create tag cloud in asp.net?","body":"<pre><code> how to create tag cloud in asp.net\n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":12826315,"title":"MVC 4 and JQuery","body":"<p>I am using MVC 4 to <code>GET</code> and <code>POST</code> requests using JQuery but it seems that I cannot get JQuery to send the requests nor get the response from the server.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function search() {\n        var lat = $('#latitude').val();\n        var long = $('#longitude').val();\n\n        $.ajax({\n            url: \"api/Attractions/?longitude=\" + long + \"&amp;latitude=\" + lat,\n            type: \"GET\",\n            success: function (data) {\n                if (data == null) {\n                    $('#attractionName').html(\"No attractions to search\");\n                }\n                else {\n                    $('#attractionName').html(\"You should visit \" + data.Name);\n                    displayMap(data.Location.Geography.WellKnownText, data.Name);\n                }\n            }\n        });\n    }\n    // Get Geo Information\n    function displayMap(coordinateString, name) {\n        // WellKnownText is in format 'POINT (&lt;longitude&gt;, &lt;latitude&gt;)'\n        coordinateString = coordinateString.replace(\"POINT (\", \"\").replace(\")\", \"\");\n        var long = coordinateString.substring(0, coordinateString.indexOf(\" \"));\n        var lat = coordinateString.substring(coordinateString.indexOf(\" \") + 1);\n\n        // Show map centered on nearest attraction\n        var map = new VEMap('myMap');\n        map.LoadMap(new VELatLong(lat, long), 15, VEMapStyle.Aerial);\n\n        // Add a pin for the attraction\n        var pin = new VEShape(VEShapeType.Pushpin, new VELatLong(lat, long));\n        pin.SetTitle(name);\n        map.AddShape(pin);\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>And then, the button code:</p>\n\n<pre><code>&lt;h1&gt;Find the Closest Tourist Attraction&lt;/h1&gt;\n&lt;div&gt;\n    &lt;label for=\"longitude\"&gt;Longitude:&lt;/label&gt;\n    &lt;input type=\"text\" id=\"longitude\" size=\"10\" /&gt;\n    &lt;label for=\"latitude\"&gt;Latitude:&lt;/label&gt;\n    &lt;input type=\"text\" id=\"latitude\" size=\"10\" /&gt;\n    &lt;input type=\"button\" value=\"Search\" onclick=\"search();\" /&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","source"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":2930,"score":7,"question_id":9190628,"title":"Asp.Net Mvc 4 Source code?","body":"<p>Is the source for MVC4 available? I've searched on codeplex and all the usual places but don't seem to be able to find? Do MS keep it under wraps until the very end? Why would they do that?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1574,"score":1,"question_id":1439374,"title":"Populating a SelectList from a DataTable","body":"<p>I ran a query and returned a datatable,</p>\n\n<pre><code>myDataAdapter.Fill(myDataTable);\n</code></pre>\n\n<p>Now what is the best way to load the row values \"Value\" and \"Text\" into a SelectList?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#",".net","asp.net-mvc","mongodb","nosql"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12963945,"title":"integration between mvc4 application and mongo db","body":"<p>I am currently working on asp.net mvc4 web application. Part of the application, users can log in and browse the site etc. The data for the site is stored in a sql server database, contains users information etc.</p>\n\n<p>A new feature to the site will be for all users to add comments to particular products shown on the site. As there could be hundreds of thousands of customers and thousands of products, this is alot of data.</p>\n\n<p>So I have started looking at a NoSql option for this data and not store it in the relational sql server database. I have been looking at Mongo Db. My first question, is this a correct approach I am taking?</p>\n\n<p>Next topic, how easily does c#/.net integrate with a mongo database. I havent worked with this before so my knowledge in the area is poor. Ideally, I would be querying (for the want of the correct term) the mongo db for comments based on a particular products identifier. I presume I can write a query style to get this data.</p>\n\n<p>My next question is around the redundancy of a mongo db. With sql server, I have a fail over server if an issue occurs with the main db server. Is there a similar concept with mongo or how does it work? My consideration is for mongo to run on the same server as the sql server database. The data in the mongo db will not be mission critical, but the data in sql server is. My web application will run on multiple servers in a load balanced environment.</p>\n\n<p>Can a mongo db be easily moved to another server? ie. how well can it be scaled out. Even can data from it be copied to another mongo db?</p>\n\n<p>I appreciate my questions are of a beginner standard but I am currently researching the topic so assistance would be great.</p>\n"},{"tags":["c#","asp.net-mvc","validation","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":160,"score":2,"question_id":12991155,"title":"Partial Model Validation in MVC4","body":"<p>I have a <code>PartialView</code> that is a form used to create or modify a user and implements the ViewModel <code>DynamicActionUserModel</code>.  The view that referrences this partialView shows a table of all <code>MembershipUsers</code> and gives the ability to create a new user <code>Membership.CreateUser()</code> or modify a user 'Membership.UpdateUser()`. The form in the partialView does an ajax post to my controller to submit data.</p>\n\n<p>The issue I'm running into is that when a user is created their userName, email, <em>password</em> and role is serialized back to the controller as <code>DynamicActionUserModel.RegisterModel</code> and validated, but when a user is modified, password is not a property that is available (nor do I want to make it available to modify on the client side) so it isn't set in <code>DynamicActionUserModel.RegisterModel</code> and <code>ModelState.IsValid</code> is always false. </p>\n\n<p>Perhaps the design of my model and view needs to change, or is there a way to validate the model but ignore password when a user is being modified? Not sure what the best practice is for this one.</p>\n\n<p>I guess another option would be to create another ViewModel and another partialView specifically for modifying a user but that seems sloppy.</p>\n\n<p><strong>Model</strong></p>\n\n<pre><code>public class DynamicActionUserModel {\n    public string Action { get; set; }\n    public RegisterModel RegisterModel { get; set; }\n}\n\npublic class RegisterModel {\n    [Required]\n    [Display(Name = \"User Name\")]\n    public string UserName { get; set; }\n\n    [Required]\n    [DataType(DataType.EmailAddress)]\n    [Display(Name = \"Email\")]\n    public string Email { get; set; }\n\n    [Required]\n    [StringLength(100, ErrorMessage = \"The {0} must be at least {2} characters long.\", MinimumLength = 6)]\n    [DataType(DataType.Password)]\n    [Display(Name = \"Password\")]\n    public string Password { get; set; }\n\n    public string[] SelectedRoles { get; set; }\n    public MultiSelectList Roles { get; set; }\n\n}\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>[HttpGet]\npublic ActionResult CreateUser() {\n    var model = new DynamicActionUserModel {\n        Action = \"CreateUser\",\n        RegisterModel = new RegisterModel {\n            Roles = new MultiSelectList(System.Web.Security.Roles.GetAllRoles())\n        }\n    };\n\n    return PartialView(\"_UserPartial\", model);\n}\n\n[HttpGet]\npublic ActionResult ModifyUser() {\n    var model = new DynamicActionUserModel {\n        Action = \"ModifyUser\",\n        RegisterModel = new RegisterModel {\n            Roles = new MultiSelectList(System.Web.Security.Roles.GetAllRoles())\n        }\n    };\n\n    return PartialView(\"_UserPartial\", model);\n}\n\n[HttpPost]\npublic ActionResult ModifyUser(DynamicActionUserModel model) {\n    bool isEqual = true;\n\n    if(!ModelState.IsValid) { // this is always false because password is empty\n        return PartialView(\"_UserPartial\", model);\n    }\n\n    var user = Membership.GetUser(model.RegisterModel.UserName);\n    // do stuff\n    Membership.UpdateUser(user);\n\n    return Json(new {success = false});\n}\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>@using RobotDog.Models\n@model IEnumerable&lt;RobotDog.Models.UserModel&gt;\n\n&lt;!-- table of users --&gt;\n&lt;div class=\"modify-form\"&gt;\n    @Html.Action(\"ModifyUser\")\n&lt;/div&gt;\n&lt;div class=\"create-user-form\"&gt;\n    @Html.Action(\"CreateUser\")\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>PartialView</strong></p>\n\n<pre><code>@model RobotDog.Models.DynamicActionUserModel\n\n@using(Html.BeginForm(Model.Action,\"Admin\", FormMethod.Post, new { @class = \"ajax\" })) {\n    &lt;!-- Email --&gt;\n    @Html.TextBoxFor(x =&gt; x.RegisterModel.Email, new { @class = inputSize, placeholder = \"Email\"})\n\n    &lt;!-- UserName --&gt;\n    @if(Model.Action == \"ModifyUser\") {\n        @Html.HiddenFor(x =&gt; x.RegisterModel.UserName)\n        &lt;span class=\"input-xlarge uneditable-input\"&gt;@Html.DisplayNameFor(x =&gt; x.RegisterModel.UserName)&lt;/span&gt;\n    } else {\n        @Html.TextBoxFor(x =&gt; x.RegisterModel.UserName, new { @class = inputSize, placeholder = \"User Name\" })\n    }\n\n    &lt;!-- Password --&gt;\n    @if(Model.Action == \"Createuser\") {\n        @Html.PasswordFor(x =&gt; x.RegisterModel.Password, new { @class = inputSize, placeholder = \"Password\"})\n    }\n\n    &lt;!-- Roles --&gt;\n    @Html.ListBoxFor(x =&gt; x.RegisterModel.SelectedRoles, Model.RegisterModel.Roles)\n\n    &lt;!-- Submit --&gt;\n    &lt;input type=\"submit\" value=\"Submit\" class=\"btn\"/&gt;\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","master-pages"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":509,"score":0,"question_id":3282380,"title":"How to stick a ContentPlaceHolder as the source of a URL in a master page in ASP.NET MVC","body":"<p>I have multiple pages that have this pattern:</p>\n\n<pre><code>&lt;iframe frameborder =\"0\" src=\"[someURL]\" width=\"100%\" height=\"900\"&gt;\n&lt;/iframe&gt;\n</code></pre>\n\n<p>I want to factor out everything but the URL into a master page so I tried this:</p>\n\n<p><strong>Master Page:</strong></p>\n\n<pre><code>&lt;iframe frameborder =\"0\" src=&lt;asp:ContentPlaceHolder ID=\"Url\" runat=\"server\" /&gt; width=\"100%\" height=\"900\"&gt;\n&lt;/iframe&gt;\n</code></pre>\n\n<p><strong>Child Page:</strong></p>\n\n<pre><code>&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"Url\" runat=\"server\"&gt;\n    \"http://myURL\"\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>but it doesn't seem to work. I get this error:</p>\n\n<p><strong>Cannot find ContentPlaceHolder 'Url' in the master page</strong></p>\n\n<p>Do I have some syntax error above?</p>\n"},{"tags":["asp.net-mvc","mvccontrib","asp.net-mvc-areas","portable-areas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":12990810,"title":"ASP.NET MVC Portable Areas - Can they communicate and be used as a plugin-like architecture?","body":"<p>I'll get straight to the point:\nI was wondering if there is a common pattern to use portable areas as a components of a plugin-like architecture.</p>\n\n<p>Example: \nWe've got 3 plugins (portable areas) packaged and distributed via NuGet feed.\nEach of them is following the standard MVC structure (has it own Models, Views and Controllers). Lets say login form, header and footer. </p>\n\n<p>What I was wondering if there is a way to make them communicate. \nFor example: when user logs on, login plugin executes it own logic, logs the user and then it updates the state of the header plugin with changes it state accordingly.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#",".net","sql-server","asp.net-mvc","asp.net-web-api"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12990613,"title":"What are the good practise for storing document with sensitive data","body":"<p>My question is what are the good practise's to store document with sensitive data that might need encryption.</p>\n\n<blockquote>\n  <p>Few thoughts that I have are: 1) Store all document in Sql Server as\n  FILESTREAM (don't know the drawback's of it. 2) Use one of these NoSql\n  Db. But then how safe it will be to keep documents with sensitive data.\n  3) Simple way upload them and store them on disk for every customer\n  with security.</p>\n  \n  <p>The technology I will be using is xUnit, ASP.NET\n  MVC 4, C#, Web API, Entitty Framework and Sql Server 2012</p>\n</blockquote>\n\n<p>Any idea's or opinions will be highly appreciated</p>\n"},{"tags":["asp.net-mvc","selected","html.dropdownlistfor","selectlistitem"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":12989322,"title":"On asp.net-mvc site, why isn't html DropdownlistFor() working properly?","body":"<p>I am having an issue where the item in the dropdown list is not being selected.  I am building up an array of SelectListItems and setting the right one to selected = true but its not getting selected.</p>\n\n<p>I have the following code in my controller:</p>\n\n<pre><code>    public ActionResult Edit(int id)\n    {\n        var p = _myRepository.FindBy(id);\n        var vm = new MyViewModel(p) { CategoryTypes = ControllerUtils.GetList(_myTypeRepository, r =&gt; r.Name, p.CategoryType.Id) };\n\n        return View(vm);\n    }\n</code></pre>\n\n<p>and here is the GetList function in the ControllerUtils class:</p>\n\n<pre><code>public static class ControllerUtils\n{\n    public static IEnumerable&lt;SelectListItem&gt; GetList&lt;T&gt;(IIntKeyedRepository&lt;T&gt; list, Func&lt;T, string&gt; getName, int id) where T : BaseModel\n    {\n        var items = list.All().ToList();\n        var itemsList = items.Select(r =&gt; new SelectListItem() { Selected = r.Id == id, Text = getName(r), Value = r.Id.ToString() });\n        return itemsList;\n    }\n}\n</code></pre>\n\n<p>and here is my view code:</p>\n\n<pre><code>    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.MyObject.CategoryType)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(model =&gt; model.MyObject.CategoryType, Model.CategoryTypes)\n        @Html.ValidationMessageFor(model =&gt; model.MyObject.CategoryType)\n    &lt;/div&gt;\n</code></pre>\n\n<p>When i debug in the controller code and list into the array of SelectListItem objects i do see the second item has selected = true. But when i check the view HTML, I don't see either item being selected:</p>\n\n<pre><code>&lt;select id=\"CategoryType\" name=\"CategoryType\"&gt;\n  &lt;option value=\"1\"&gt;Choice 1&lt;/option&gt;\n  &lt;option value=\"2\"&gt;Choice 2&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>As you can see, there is no \"selected=\"selected\" for either item.    Any suggestions on what could be going on here?</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12988738,"title":"Cannot Resolve Action, even though my action exists","body":"<p>Hopefully a really simple MVC problem (), I have a controller in my <strong>Controllers</strong> folder called <strong>HomeController</strong> which contains a method called <strong>Index</strong> which looks like this:</p>\n\n<pre><code>public ActionResult Index()\n{\n    return View();\n}\n</code></pre>\n\n<p>My Index view does indeed exist, and on my shared Layout view I have the following link (to my index page)</p>\n\n<pre><code>@Html.ActionLink(\"Home\", \"Index\")\n</code></pre>\n\n<p>Am I doing this right? I have a method called <strong>Index</strong> in my controller which returns my <strong>Index</strong> view, so shouldn't this ActionLink work?</p>\n"},{"tags":["asp.net-mvc","mvcsitemapprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12982905,"title":"Adding parameter to AuthorizeAttribute constructor causes failure in MvcSiteMapProvider?","body":"<p>I've been using MvcSiteMapProvider based on authorize attributes and it was all right until we introduced a new class derived from <code>AuthorizeAttribute</code>. Main difference is in its constructor signature:</p>\n\n<pre><code>public MyAuthorizeAttribute(param RoleCode[] roles) {\n    Roles = string.join(\",\", roles.Select(r =&gt; r.ToString());\n}\n</code></pre>\n\n<p>And... MvcSiteMapProvider shown unexpected result: only actions marked by <code>MyAuthorizeAttribute</code> became invisible. I've checked that by disabling this constructor - everything went as it had been before adding a parameter to the constructor. Also - it's not <code>params</code> specific - any parameter (event int) leads to such behaviour.</p>\n\n<p>AS I understood from MvcSiteMapProvider sources, it emits some code to emulate authorize attributes - but looks like it's impossible to save assembly generated by external code. I know that there is a workaround - use some kind of enumerable property, but have you got any suggestions how to make it work with constructor parameters? Do you know why MvcSiteMapProvider behaves like that?</p>\n"},{"tags":["javascript","asp.net-mvc","google-maps"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":527,"score":0,"question_id":11018366,"title":"Creating a polygon on googlemap and save the result to database using MVC","body":"<p>I want to write an application that let the user draw a polygon on GoogleMap and then let him to save it to database. </p>\n\n<p>Later when we wants, he should be able to draw the polygon on the map from the database.</p>\n\n<p>What is the best approach to do this?</p>\n\n<p>My suggest is to save polygon data in a js array and send it to mvc using JSON. Is it a good approach?</p>\n\n<p>How to draw polygons on GoogleMap?</p>\n\n<p>How to call a controller on MVC  from client using JS?</p>\n\n<p>Do I need a special controller for this (receiving JSON data)</p>\n\n<p>Is there any sample code for this? </p>\n"},{"tags":["c#",".net","asp.net-mvc","winforms","wcf"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":370,"score":3,"question_id":10267414,"title":"Offline+Online Database Application","body":"<p>I am developing an accounting system for a customer. This application has some special requirements. I leave the accounting system detail which are specific to accounts. I mention those points which are confusing me.</p>\n\n<p>The application should work in Online and Offline environment. If user is working and suddenly Application goes offline User should be able to work offline. All offline work is stored in local database and sync next time to central database when Application connects to the internet.This application has many users and all will work at same time on same information. </p>\n\n<p>For Example If a user enters an inventory item it is possible that another user also enter the same item at that time. Application should be able to validate correct information and prohibits user to duplication.</p>\n\n<p>User local database must be updated all times either other users are working or not. If other users are working all updated information should be available in local database to ensure when user goes offline all information is updated.</p>\n\n<p>The question is How to develop this kind of application? Is there any standard way to achieve this target? Is there any standard or non standard pattern to build this kind of software?</p>\n\n<p>Please note I am using C# Dot Net and Intend to use .NET Remoting or WCF or ASP.NET MVC for this application.</p>\n\n<p>Any kind of help will be appreciated.\nThanks.</p>\n"},{"tags":["asp.net-mvc","localization","ninject","autofac","griffin.mvccontrib"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12957969,"title":"How to use griffin.mvccontrib.localization with Ninject","body":"<p>I'm trying to use MVC Contrib Localization in my Asp.net MVC application, for now I have it working with resource files, but I want to use it with Sql Server, </p>\n\n<p>I'm checking this tutorial: <a href=\"http://www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri\" rel=\"nofollow\">http://www.codeproject.com/Articles/352583/Localization-in-ASP-NET-MVC-with-Griffin-MvcContri</a></p>\n\n<p>but it uses Autofac as the IoC container which I don't understand, does anyone have used it with Ninject? or anyone knows how this Autofac code can be transated to Ninject:</p>\n\n<pre><code>// Loads strings from repositories.\nbuilder.RegisterType&lt;RepositoryStringProvider&gt;().AsImplementedInterfaces().InstancePerLifetimeScope();\nbuilder.RegisterType&lt;ViewLocalizer&gt;().AsImplementedInterfaces().InstancePerLifetimeScope();\n\n// Connection factory used by the SQL providers.\nbuilder.RegisterInstance(new AdoNetConnectionFactory(\"DemoDb\")).AsSelf();\nbuilder.RegisterType&lt;LocalizationDbContext&gt;().AsImplementedInterfaces().InstancePerLifetimeScope();\n\n// and the repositories\nbuilder.RegisterType&lt;SqlLocalizedTypesRepository&gt;().AsImplementedInterfaces().InstancePerLifetimeScope();\nbuilder.RegisterType&lt;SqlLocalizedViewsRepository&gt;().AsImplementedInterfaces().InstancePerLifetimeScope();\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net","sql","sql-server","asp.net-mvc","sql-server-2008"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":155,"score":7,"question_id":12983539,"title":"Stored procedures in SQL Server master-child relationships not tables","body":"<p>In college last year I came across something I found very interesting with regard to stored procedures. It was mostly with regard to reducing code repetition for transaction management, error handling, and security. But I have researched it since and cannot find it anywhere. Perhaps I don't know what it is called so I will explain.</p>\n\n<p>Let's say I have a simple table (forget its relationships, just a single table). I have at least 5 possible operations I can do on it namely CRUD, with the R being read the details of one row, or read a list of rows for a given criteria. Again, let's not get into too much detail with complicated stored procedures and let's pretend, for this example, we want nothing but the following 5 operations to be performed:</p>\n\n<ul>\n<li>Create (simple insert)</li>\n<li>Read (one for reading a single row)</li>\n<li>Read multiple (reading a list of rows, simple <code>select * from sometable where some condition</code>, nothing complicated), </li>\n<li>Update (simple update)</li>\n<li>Delete (again, simple delete). </li>\n</ul>\n\n<p>For the purposes of this example, a simple table with 2 or 3 columns, and the most simple procedures you can come up with to do those operations.</p>\n\n<p><strong>The problem</strong>:</p>\n\n<p>My lecturer, when talking to us about transactions, advised us to take these simple procedures, and keep them separate as is normal. But then to write a master procedure which executes each of these. This means we have a master procedure into which we pass a character lets say 'C' for create and so on, and a series of conditions which decide which job to run. Of course, we should pass in the details needed from the master to the child proc which means we need to get them from the user as parameters. This master procedure is already beginning to sound complicated.</p>\n\n<p>His reasoning, do the transaction handling, validation, error handling, and security handling in the master procedure. Then call that master procedure with the required parameters, which does all the checking, and passes the parameters to the child procedure. Below is an example.</p>\n\n<p><img src=\"http://i.stack.imgur.com/nnSly.jpg\" alt=\"enter image description here\"></p>\n\n<p>Simple table, don't go worrying too much about relationships, keys, indexes, constraints, triggers and so on.</p>\n\n<p>For the below two pieces of code, the only real relevant bit is the parts between the try...catch. The rest is boiler plate for the master.</p>\n\n<p>Below is the code for a create procedure:</p>\n\n<pre><code>ALTER proc [Actions].[AreaCreate]\n--External Variables - Input\n@AreaName varchar(50),  @AreaAvailablity bit,   @Description varchar(max),\n\n--External Variables - Output\n@NoOfRecords int output\n\nas\n--Internal Variables\ndeclare @ErrorMessage varchar(max)\n\nBegin try\n    insert  [Tennis3rdYrMVC].[dbo].Areas\n            ([AreaName],    [AreaAvailablity],  [Description])\n    values  (@AreaName,     @AreaAvailablity,   @Description)\n\n    --Show # of records affected so you can detect nulls or empty lists\n    --and handle them as you choose in the code\n    set     @NoOfRecords = @@ROWCOUNT\nEnd try\nBegin Catch\n    set @ErrorMessage = ERROR_MESSAGE()\n    raiserror(@ErrorMessage,16,1)\n    return ERROR_NUMBER()\nEnd Catch\n\n--All Ok\nreturn 0\n</code></pre>\n\n<p>Below is another piece of code for a delete procedure</p>\n\n<pre><code>ALTER proc [Actions].[AreaDelete]\n--External Variables - Input\n@Id int,\n\n--External Variables - Output\n@NoOfRecords int output\n\nas\n--Internal Variables\ndeclare @ErrorMessage varchar(max)\n\nbegin try\n    delete from [Tennis3rdYrMVC].[dbo].Areas\n    where Id = @Id\n\n    --Show # of records affected so you can detect nulls or empty lists\n    --and handle them as you choose in the code\n    set @NoOfRecords=@@ROWCOUNT\nend try\nbegin catch\n    set @ErrorMessage = ERROR_MESSAGE()\n    raiserror(@ErrorMessage,16,1)\n    return ERROR_NUMBER()\nend catch\n\n--All Ok\nreturn 0\n</code></pre>\n\n<p>Finally, the suggested, and complicated master proc.</p>\n\n<pre><code>ALTER proc [Admin].[AreaMaster]\n--External Variables - Input\n@JobType int, -- 1=Create, 2=Read 1, 3=Read Many, 4=Update, 5=Delete\n--Master sprock uses null defaults because not every job requires every field to be present.\n--i.e. We dont need to know the area name of an area we want to delete.\n@Id int                 = null,     @AreaName varchar(50)       = null,\n@AreaAvailablity bit    = null,     @Description varchar(max)   = null,\n\n--External Variables - Output\n@NoOfRecords int = null output --Used to count the number of records affected where needed.\nas\nBEGIN\n    --Internal Variables\n    declare @ErrorMessage varchar(max)\n    declare @return_value int\n\n    -- SET NOCOUNT ON added to reduce network traffic and speed things up a little.\n    SET NOCOUNT ON;\n\n    /*\n    --VALIDATION\n\n    --Logic for ensuring all required values are entered should be done in processing below in\n    --the master sprock, NOT in the children (i.e. why check for valid id in 5 sprocks when you\n    --can do it here in one).\n\n\n    We will do all the processing needed to ensure valid and required values are entered where\n    needed.\n\n    --SECURITY\n    This is also where we put the security code required to stop SQL Injection and other\n    attacks, NOT in the child sprocks. The child sprocks would not be allowed to execute by\n    pages directly.\n\n    */\n\n    --Once all validation is done, call  relevant child sprocks\n\n    --Call AreaCreate Sprock\n    if(@JobType='1')\n    begin\n        exec    @return_value = [Actions].[AreaCreate]\n                @AreaName           = @AreaName,\n                @AreaAvailablity    = @AreaAvailablity,\n                @Description        = @Description,\n                @NoOfRecords        = @NoOfRecords OUTPUT\n\n        --select    @return_value 'Return Value'\n\n        if @return_value&lt;&gt;0\n        begin\n            raiserror('Error: Problem creating area.',16,0)\n            --rollback transaction\n            return 99\n        end\n    end\n\n\n    --Call AreaShowDetail Sprock\n    if(@JobType='2')\n    begin\n        exec    @return_value   = [Actions].[AreaShowDetail]\n                @Id             = @Id,\n                @NoOfRecords    = @NoOfRecords output\n        ----Testing\n        --select    'Return Value' = @return_value\n\n        if @return_value&lt;&gt;0\n        begin\n            raiserror('Error: Problem reading area details.',16,0)\n            --rollback transaction\n            return 99\n        end\n    end\n\n\n    --Call AreaShowList Sprock\n    if(@JobType='3')\n    begin\n        exec    @return_value   = [Actions].[AreasShowList]\n                @NoOfRecords    = @NoOfRecords output\n        ----Testing\n        --select    'Return Value' = @return_value\n\n        if @return_value&lt;&gt;0\n        begin\n            raiserror('Error: Problem reading areas list.',16,0)\n            --rollback transaction\n            return 99\n        end\n    end\n\n\n    --Call AreaUpdate Sprock\n    if(@JobType='4')\n    begin\n        EXEC    @return_value = [Actions].[AreaUpdate]\n                @Id                 = @Id,\n                @AreaName           = @AreaName,\n                @AreaAvailablity    = @AreaAvailablity,\n                @Description        = @Description,\n                @NoOfRecords        = @NoOfRecords OUTPUT\n\n        --select    'Return Value'      = @return_value\n\n        if @return_value&lt;&gt;0\n        begin\n            raiserror('Error: Problem updating area.',16,0)\n            --rollback transaction\n            return 99\n        end\n    end\n\n\n    --Call AreaDelete Sprock\n    if(@JobType='5')\n    begin\n        exec    @return_value   = [Actions].[AreaDelete]\n                @Id             = @Id,\n                @NoOfRecords    = @NoOfRecords output\n\n        --select    'Return Value'  = @return_value\n        if @return_value&lt;&gt;0\n        begin\n            raiserror('Error: Problem deleting area(s).',16,0)\n            --rollback transaction\n            return 99\n        end\n    end\n\n    --All Ok\n    return 0\nEND\n</code></pre>\n\n<p>Is that complicated or what? Now imagine another level which if you have several tables to operate on, will decide which sub master to call, and this MasterMaster for want of a better name must have external parameters for every field in every table. However, the validation, security, and transaction code would be moved up to that level instead.</p>\n\n<p>More importantly, is that the way a professional would do it. And finally, I am using MVC with entity framework. Suppose I have a database like this (I have), and access is only allowed through this master stored procedure (it is). How do I call such a stored procedure from within EF and MVC. Even better, how would I bypass EF all together and get the data into my controller in a way my view will understand. I know how to do this with ASP.Net code behind. But not in MVC.</p>\n\n<p>Any suggestions. Please, feel free to tell me that this is completely crazy as it seems like a hell of a lot of work (what if you have 50 tables (I do). Imagine, 5 simple operations, across 50 tables = 250 child stored procedures + 50 Sub-Sub-Masters, + 5 Sub-Masters + 1 Master. I have my work cut out. Is there a tool that can do this or at least generate a template for me?</p>\n\n<p>So to summarise, My questions are:</p>\n\n<ol>\n<li>Is this overly complicated or is this the professional way to do this?</li>\n<li>What is the term used to describe this Master / child procedural relationship.</li>\n<li>Is there a tool that can automate this process.</li>\n<li>Is there a tool that can help me generate some kind of boilerplate template.</li>\n<li>How can I use this procedure with EF and MVC</li>\n<li>How can I bypass EF altogether and just find a way to call the procedure directly.</li>\n<li>Is there anything like the equivalent of classes, or even methods in T-SQL which can structure this much like a standard piece of code. Meaning that each child procedure is a method, each table has its properties, and the constructor will be the the initial (or altered) representation of the object.</li>\n<li>If 7 does exist, which would be more standard, the way I described (i.e.) splitting everything up, or the idea in 7.</li>\n</ol>\n\n<p>With regard to this point 4 I am talking about something simple, like the one already in SQL Server where you right click a procedure and choose execute and it generates some simple code for testing your procedure, or like the one for making functions.</p>\n\n<p>Thanks for reading this and for any help you can offer.</p>\n"},{"tags":[".net","asp.net-mvc","routing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":184,"score":2,"question_id":3534602,"title":"ASP.NET MVC routing and file path","body":"<p>I have a controller action that has the same name as a file path. Like:</p>\n\n<pre><code>www.example.com/userfiles/path/to/userfile.jpg\n</code></pre>\n\n<p>Basically I have a userfiles controller and on the index action everything after userfiles/ is a path. There is also a userfiles virtual directory in the root of my application. What I want to happen is that if the directory that follows userfiles/ (in this case path) does not exist in the userfiles virtual directory, then use the index action on the userfilesController if the directory does exist, then use the path as it is. </p>\n\n<p>This worked flawlessly on my windows xp dev machine running iis 5. But, once I moved it to the live server(Windows server 2003 iis 6), I get a 404 error as if the path does not exist rather than going to the userfiles controller index action. </p>\n\n<p>In the routes file I have: </p>\n\n<pre><code>routes.MapRoute(\n    \"Userfiles\",                                       // Route name\n    \"userfiles/{*url}\",                                // URL with parameters\n    new { controller = \"Userfiles\", action = \"Index\" } // Parameter defaults\n);\n</code></pre>\n\n<p>What am I missing? It was working so well.  </p>\n"},{"tags":["asp.net-mvc","datepicker","asp.net-mvc-4","asp.net-web-api","jquery-ui-datepicker"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12986620,"title":"Datepicker format problemm in ASP.NET Web Api","body":"<p>I working with ASP.NET WEB API and jquery Date time.</p>\n\n<p><strong>My problem is</strong> : I want user to be able to select date using datepicker in the format of 'dd/MM/yyyy'. But when I configure my datepicker to do so (as done <a href=\"http://jsfiddle.net/8wthj/\" rel=\"nofollow\">here</a>) the date posted to the web api controller's action is '01/01/0001 00:00:00'. And the moment I removed the formatter of 'd/M/yy' from datepicker I am able to recieve the proper values, but the user sees date selected in MM/dd/yyyy.</p>\n\n<p>I have set culture as 'en-GB' in my web.config as shown below...</p>\n\n<pre><code>&lt;system.web&gt;\n&lt;globalization culture=\"en-GB\" uiCulture=\"en-GB\"/&gt;    \n&lt;/system.web&gt;\n</code></pre>\n\n<p>still this doesn't help.</p>\n\n<p>I have recreated this scenario and uploaded the project <a href=\"http://yassershaikh.com/datepicker/DateProblem.rar\" rel=\"nofollow\">here</a>, if anybody wanted to give it a try.</p>\n\n<p>My web-api controller looks like the one below</p>\n\n<pre><code>public class ValuesController : ApiController\n{\n    // POST api/values\n    public void Post(ResponseModel model)\n    {\n        string culture = CultureInfo.CurrentCulture.DisplayName;\n        if (model != null)\n        {\n            string name = model.Name;\n            DateTime startDate = model.StartDate;\n            DateTime endDate = model.StartDate;\n        }\n    }\n}\n</code></pre>\n\n<p>and my View is below\n    </p>\n\n<pre><code>    $(document).ready(function () {\n\n    $(\"#startDate\").datepicker({});\n    $(\"#endDate\").datepicker({});\n\n//        $(\"#startDate\").datepicker({ dateFormat: \"dd/m/yy\" });\n//        $(\"#endDate\").datepicker({ dateFormat: \"dd/m/yy\" });\n\n    $(\"#submitBtn\").bind(\"click\", function () {\n\n        var postData = {\n        name: $(\"#fullName\").val(),\n        startDate: $(\"#startDate\").val(),\n        endDate: $(\"#endDate\").val()\n        };\n\n        var jsonData = JSON.stringify(postData);\n        console.log(jsonData);\n\n        $.ajax({\n        url: 'api/values/',\n        type: 'POST',\n        data: jsonData,\n        contentType: \"application/json;charset=utf-8\",\n        success: function (data) {\n        }\n        });\n    });\n\n    });\n\n&lt;/script&gt;\n\n&lt;div&gt;\n&lt;p&gt;\n&lt;b&gt;Name : &lt;/b&gt; &lt;input type=\"text\" id=\"fullName\" /&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;b&gt;Start Date : &lt;/b&gt; &lt;input type=\"text\" id=\"startDate\" /&gt;\n&lt;/p&gt;\n&lt;p&gt;\n&lt;b&gt;End Date : &lt;/b&gt; &lt;input type=\"text\" id=\"endDate\" /&gt;\n&lt;/p&gt;\n&lt;input type=\"submit\" value=\"Submit these values\" id=\"submitBtn\"/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Please somebody help me on this.</p>\n\n<p>So ultimately what I want is </p>\n\n<ul>\n<li>User should be able to select date in \"dd/MM/yyyy\" format</li>\n<li>and date should reach controller in the same format.</li>\n</ul>\n\n<p>Thanks</p>\n"},{"tags":["php","jquery","asp.net-mvc","entity-framework","highcharts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":147,"score":0,"question_id":12986341,"title":"Load data from database into highchart in MVC php using JSON","body":"<p>I am using MVC for Entity Framework &amp; developing aa application &amp; I want to upload data from database to show it into highchart's column-drilldown chart ?</p>\n\n<p>My Code For Binding is as below:</p>\n\n<pre><code>$result = mysql_query(\"select s.id, s.stage_name as stage, coalesce(sum(o.potential) *  (s.stage_weight / 100),0) as w_pot FROM s_stages as s \nleft join opps as o\nWHERE o.buy_stage = s.id\");\n$model[\"chart\"]=array();\nwhile($row = mysql_fetch_array($result)){\n    array_push($model[\"chart\"],\n        array(  \n            \"id\"=&gt;$row[\"s.id\"],\n            \"name\"=&gt;$row[\"stage\"],\n            \"w_pot\"=&gt;$row[\"w_pot\"]\n         ));\n}\n</code></pre>\n\n<p>and in view I have written code as below with its script code:</p>\n\n<pre><code>&lt;script src=\"http://code.highcharts.com/highcharts.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://code.highcharts.com/modules/exporting.js\"&gt;&lt;/script&gt;\n&lt;div id=\"container\" class=\"span6\" style=\"min-width: 400px; height: 400px; margin: 0 auto\"&gt;&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n$(function () {\n    var chart;\n    $(document).ready(function() {\n\n        var colors = Highcharts.getOptions().colors,\n            categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],\n            name = 'Browser brands',\n            data = [{\n                    y: 55.11,\n                    color: colors[0],\n                    drilldown: {\n                        name: 'MSIE versions',\n                        categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],\n                        data: [10.85, 7.35, 33.06, 2.81],\n                        color: colors[0]\n                    }\n                }, {\n                    y: 21.63,\n                    color: colors[1],\n                    drilldown: {\n                        name: 'Firefox versions',\n                        categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],\n                        data: [0.20, 0.83, 1.58, 13.12, 5.43],\n                        color: colors[1]\n                    }\n                }, {\n                    y: 11.94,\n                    color: colors[2],\n                    drilldown: {\n                        name: 'Chrome versions',\n                        categories: ['Chrome 5.0', 'Chrome 6.0', 'Chrome 7.0', 'Chrome 8.0', 'Chrome 9.0',\n                            'Chrome 10.0', 'Chrome 11.0', 'Chrome 12.0'],\n                        data: [0.12, 0.19, 0.12, 0.36, 0.32, 9.91, 0.50, 0.22],\n                        color: colors[2]\n                    }\n                }, {\n                    y: 7.15,\n                    color: colors[3],\n                    drilldown: {\n                        name: 'Safari versions',\n                        categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',\n                            'Safari 3.1', 'Safari 4.1'],\n                        data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],\n                        color: colors[3]\n                    }\n                }, {\n                    y: 2.14,\n                    color: colors[4],\n                    drilldown: {\n                        name: 'Opera versions',\n                        categories: ['Opera 9.x', 'Opera 10.x', 'Opera 11.x'],\n                        data: [ 0.12, 0.37, 1.65],\n                        color: colors[4]\n                    }\n                }];\n\n        function setChart(name, categories, data, color) {\nchart.xAxis[0].setCategories(categories, false);\nchart.series[0].remove(false);\nchart.addSeries({\nname: name,\ndata: data,\ncolor: color || 'white'\n}, false);\nchart.redraw();\n        }\n\n        chart = new Highcharts.Chart({\n            chart: {\n                renderTo: 'container',\n                type: 'column'\n            },\n            title: {\n                text: 'Browser market share, April, 2011'\n            },\n            subtitle: {\n                text: 'Click the columns to view versions. Click again to view brands.'\n            },\n            xAxis: {\n                categories: \n            },\n            yAxis: {\n                title: {\n                    text: ''\n                }\n            },\n            plotOptions: {\n                column: {\n                    cursor: 'pointer',\n                    point: {\n                        events: {\n                            click: function() {\n                                var drilldown = this.drilldown;\n                                if (drilldown) { // drill down\n                                    setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color);\n                                } else { // restore\n                                    setChart(name, categories, data);\n                                }\n                            }\n                        }\n                    },\n                    dataLabels: {\n                        enabled: true,\n                        color: colors[0],\n                        style: {\n                            fontWeight: 'bold'\n                        },\n                        formatter: function() {\n                            return this.y +'%';\n                        }\n                    }\n                }\n            },\n            tooltip: {\n                formatter: function() {\n                    var point = this.point,\n                        s = this.x +':&lt;b&gt;'+ this.y +'% market share&lt;/b&gt;&lt;br/&gt;';\n                    if (point.drilldown) {\n                        s += 'Click to view '+ point.category +' versions';\n                    } else {\n                        s += 'Click to return to browser brands';\n                    }\n                    return s;\n                }\n            },\n            series: [{\n                name: name,\n                data: data,\n                color: 'white'\n            }],\n            exporting: {\n                enabled: false\n            }\n        });\n    });\n\n});\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12986512,"title":"jQuery Plugin not working in ASP.NET MVC 4","body":"<p>The images which should be cycling are just sitting on top of each other. Screenshot <a href=\"http://tinypic.com/r/343n0io/6\" rel=\"nofollow\">here</a></p>\n\n<p>In my (very simple) application I have one <code>View</code> named <code>Index.cshtml</code>. I'd like to use <a href=\"http://www.malsup.com/jquery/cycle/\" rel=\"nofollow\">jquery Cycle Plugin</a> for this page which I have used in my PHP apps too. Below is my <code>_Layout.cshtml</code>'s relevant code</p>\n\n<pre><code>    @Styles.Render(\"~/Content/css\")\n    @Scripts.Render(\"~/bundles/jquery\")\n    @Scripts.Render(Url.Content(\"~/Scripts/cycle.js\")) // I added this line.\n    @Scripts.Render(\"~/bundles/modernizr\")\n</code></pre>\n\n<p>The plugin file <code>(cycle.js)</code> is in <code>Scripts</code> folder generated by Basic project layout.\nBelow is how I am using it. The following code is also in <code>_Layout.cshtml</code> (comments only here). </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        alert('test1');   //this is 'alerted'\n        $('.images').cycle({\n            fx: 'fade',\n            speed: 2000\n        });\n        alert('test2!'); //this is NOT 'alerted'\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>When I view the source after requesting page in a browser, I get this : </p>\n\n<pre><code>&lt;title&gt;Asp.Net MVC 4 Hello World App&lt;/title&gt;\n&lt;link href=\"/Content/site.css\" rel=\"stylesheet\"/&gt;\n&lt;script src=\"/Scripts/jquery-1.7.1.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/cycle.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/modernizr-2.5.3.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        alert('test1'); \n        $('.images').cycle({\n            fx: 'fade',\n            speed: 2000\n        });\n        alert('test12');\n    });\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n...\n&lt;/html&gt;\n</code></pre>\n\n<p>Here is the container for images:</p>\n\n<pre><code>        &lt;div class=\"images\" id=\"images\"&gt;\n            &lt;img src=\"@Url.Content(\"../Images/image1.jpg\")\" alt=\"page image\" /&gt;\n            &lt;img src=\"@Url.Content(\"../Images/image2.jpg\")\" alt=\"page image\" /&gt;\n            &lt;img src=\"@Url.Content(\"../Images/image3.jpg\")\" alt=\"page image\" /&gt;\n            &lt;img src=\"@Url.Content(\"../Images/image4.jpg\")\" alt=\"page image\" /&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>The files are therefore successfully being loaded. I believe the issue is how <code>$(document).ready()</code> works. because whatever code I put before <code>.cycle()</code> works but nothing works after it.</p>\n"},{"tags":["asp.net-mvc","unit-testing","integration-testing","asp.net-mvc-3"],"answer_count":3,"favorite_count":5,"up_vote_count":16,"down_vote_count":0,"view_count":1012,"score":16,"question_id":4278790,"title":"MvcIntegrationTestFramework or an alternative updated for ASP.NET MVC 3","body":"<p>I'm interested in using Steve Sanderson’s <a href=\"http://blog.stevensanderson.com/2009/06/11/integration-testing-your-aspnet-mvc-application/\" rel=\"nofollow\">MvcIntegrationTestFramework</a> <strong>or a very similar alternative</strong> with ASP.NET MVC 3 Beta.</p>\n\n<p>Currently when compiling <strong>MvcIntegrationTestFramework</strong> against MVC 3 Beta I get the following error due to changes in MVC:</p>\n\n<p><code>Error  6</code>\n<code>'System.Web.Mvc.ActionDescriptor.GetFilters()' is obsolete: '\"Please call System.Web.Mvc.FilterProviders.Providers.GetFilters() now.\"'</code>    <code>\\MvcIntegrationTestFramework\\Interception\\InterceptionFilterActionDescriptor.cs Line 18</code></p>\n\n<h2>Questions</h2>\n\n<h3>1. Can anybody provide the MvcIntegrationTestFramework working for ASP.NET MVC 3 Beta?</h3>\n\n<p>--- and / or ---</p>\n\n<h3>2. Are there similar alternatives you would recommend?</h3>\n\n<hr>\n\n<p><strong>EDIT #1:</strong> Note I have e-mailed Steve the creator of MvcIntegrationTestFramework, also hoping for some feedback there.</p>\n\n<p><strong>EDIT #2 &amp; #3:</strong> I have received a message from Steve. Quoted for your reference:<br>\n<em>I haven't needed to use that project with MVC 3, so sorry, I don't have an updated version of it. As far as I'm aware it should be possible to update it to work on MVC 3, but you'd need to figure that out perhaps by inspecting the MVC 3 source code to notice any changes in how actions, filters, etc are invoked now. If you do update it, and if you decide to adopt it as an ongoing project (e.g., putting it on Github or similar), let me know and I'll post a link to it!</em> (Thanks Steve!)</p>\n\n<p><strong>EDIT #4:</strong> Honestly had a quick stab at using <code>System.Web.Mvc.FilterProviders.Providers.GetFilters()</code> didn't get anywhere fast and simply adding the <code>[Obsolete]</code> found that there was an error in the internals of the MVC requests. Anybody else had a dabble?</p>\n\n<p><strong>EDIT #5:</strong> Please comment if you are using an alternative Integration Test Framework with MVC 3. </p>\n"},{"tags":["c#","javascript","asp.net","asp.net-mvc","ado.net"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12982308,"title":"Hide/Show form based on Dropdownbox selection","body":"<p>I have looked around and haven't found anything concrete.</p>\n\n<p>Is there any tutorials on how to show/hide a form or textbox based on if a value is selected.</p>\n\n<p>I have something like this Dropdown box with (Add, item1, item2,item3 ect..)</p>\n\n<p>if add is selected show a form to add add with some attributes such as (First Name, last Name ect..) else it will just do an action with the selected item.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12986411,"title":"How to make URLs look like nested areas in ASP.NET MVC website","body":"<p>I'm working on an ASP.NET MVC 4 project that requires multiple areas, but I'm unsure how to go about organising the areas. At the moment I have one area called \"Account\" which contains two controllers, \"ProfileController\" and \"InboxController\". With the current setup the URLs look like this:</p>\n\n<pre><code>http://example.com/Account/Profile/&lt;action&gt;\nhttp://example.com/Account/Inbox/&lt;action&gt;\n</code></pre>\n\n<p>There will need to be another area called \"MyBusiness\", but I would like it to be part of the \"Account\" area in order to have the URLs match the following:</p>\n\n<pre><code>http://example.com/Account/MyBusiness/&lt;controller&gt;/&lt;action&gt;\n</code></pre>\n\n<p>It feels like it isn't possible to have the folder structure of the ASP.NET project match the URL structure of the website. Seeing as nested areas aren't possible, what would be the best way to do this?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12985088,"title":"Binding DropDownList into MVC View","body":"<p>Reading from here: <a href=\"http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc\" rel=\"nofollow\">ASP.NET MVC</a></p>\n\n<p>Action <code>SelectCategory</code> has been created inside controller -</p>\n\n<pre><code> public ActionResult SelectCategory() {\n\n     List&lt;SelectListItem&gt; items = new List&lt;SelectListItem&gt;();    \n     items.Add(new SelectListItem { Text = \"Action\", Value = \"0\"});    \n     items.Add(new SelectListItem { Text = \"Drama\", Value = \"1\" });    \n     items.Add(new SelectListItem { Text = \"Comedy\", Value = \"2\", Selected = true });    \n\n     ViewBag.MovieType = items;\n\n     return View();    \n }\n</code></pre>\n\n<p>I am not able to understand binding of Data in following line.</p>\n\n<pre><code>@Html.DropDownList(\"MovieType\")\n</code></pre>\n\n<p>While binding data in similar way,</p>\n\n<pre><code>@Html.DropDownList(\"IdList\");\n</code></pre>\n\n<p>I obtain following error- </p>\n\n<blockquote>\n  <p>There is no ViewData item of type 'IEnumerable' that\n  has the key 'IdList'.</p>\n</blockquote>\n\n<p><strong>Controller Action</strong>:</p>\n\n<pre><code>public ActionResult SelectId()\n    {\n        List&lt;SelectListItem&gt; items = new List&lt;SelectListItem&gt;();\n        items.Add(new SelectListItem { Text = \"MyId1\", Value = \"MyId1\", Selected=true });\n        items.Add(new SelectListItem { Text = \"MyId2\", Value = \"MyId2\" });\n\n        ViewBag.IdList = items;\n        return View();\n    }\n</code></pre>\n\n<p>What am I missing ? Thank you for your help !</p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12984127,"title":"Asp.Net MVC - how would i maintain user state in azure in my application","body":"<p>I know that there are a few questions like this, but the question is more in respect to this specifict situation.</p>\n\n<p>Im developing a platform for taking tests online. A test is a set of images and belonging questions. Its being hosted on Azure and using MVC 4.</p>\n\n<p>How I would love that if the user have taken half the test and the brower crashes or something makes it deviate from the test and comes back, it will give the option to resume. </p>\n\n<p>I have one idea my self, but would like to know if theres other options. I was considering to use the localstorage. When a user starts a test, the information for the test is saved in localstorage and every time he moved on to a new image, it updates the local state. Then if the test-player is loaded it will check if any ongoing tests are avalible.</p>\n\n<p>How could i do it? any one witch similar problem/solution.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12983863,"title":"Generate HTML 4 Semantics in MVC","body":"<p>While creating MVC 3 Razor, application we had selected <code>Generate HTML5 Semantics</code>. We realize that web app. has to be supported on <code>IE8</code>, as well.</p>\n\n<p>How do I disable <code>HTML 5</code> semantic generation, in existing MVC-3 project.</p>\n\n<p>Thanks !</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":584,"score":1,"question_id":1734374,"title":"How do I redirect to a not-authorized page instead of the login page when the user is already logged in?","body":"<p>How do I set my Authorize(Roles=\"blah\") token to redirect to a \"You're not authorized to do this\" when a user is already logged in but isn't in the correct role?  Currently it redirects to the login page which isn't what we're after.  We feel that it's confusing for the user to be redirected to this page as they're already logged in.  In the event however they're not logged in, it should redirect to the login page.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","route","t4mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12946311,"title":"ASP.NET Route Not Hitting Default with T4MVC","body":"<p>This wasnt happening before but all of a sudden I am not hitting my default route anymore.  My homepage goes to <code>http://localhost:2222/assets/images/30?Controller=home&amp;Action=index</code>.  Why would this be happening?</p>\n\n<p>I noticed when I am in a action on the home controller it works fine, but if I go to another controller this problem occurs.</p>\n\n<pre><code>@foreach(var t in MVC.Home.Index().GetRouteValueDictionary())\n    {\n        &lt;span&gt;@t.Key - @t.Value&lt;/span&gt;\n    }\n\nArea - Controller - home Action - index\n</code></pre>\n\n<p>Link</p>\n\n<pre><code>@Html.ActionLink(\"Home\", MVC.Home.Index())\n</code></pre>\n\n<p>Global.asax</p>\n\n<pre><code> routes.Add(\n                \"Images\",\n                new Route(\n                    \"assets/images/{Id}\",\n                        new RouteValueDictionary(),\n                        new RouteValueDictionary { { \"Id\", \"\\\\d+\" } },\n                        new ImageRouteHandler(new ImageHandler())\n                    )\n                );\n\n\n            routes.MapRouteLowercase(\n               \"Default\",\n\n\n                  \"{controller}/{action}\",\n\n\n                   new { controller = \"Home\", action = \"Index\", area=\"\" }\n                   );\n</code></pre>\n\n<p>HomeController.cs</p>\n\n<pre><code>public partial class HomeController : SiteController\n\n\n     {\n          public virtual ActionResult Index()\n                {\n                    var model = new HomeViewModel();\n\n\n                    return View(model);\n                }\n</code></pre>\n\n<p>T4MVC.cs</p>\n\n<pre><code>   public class ActionNamesClass {\n            public readonly string Index = (\"Index\").ToLowerInvariant();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12973596,"title":"Deployed mvc app not including sitename in href links","body":"<p>I have an asp.net MVC web app using Kendo UI Grids with client templates.  The client template specifies an href as follows:</p>\n\n<pre><code>.ClientTemplate(\"&lt;a href='[controller]/[action]/[parameters]' /&gt;\")\n</code></pre>\n\n<p>In a debug run, the link is correctly generated as follows:</p>\n\n<pre><code>http://localhost:[port]/[Controller]/[Action]?[parameters]\n</code></pre>\n\n<p>works beautifully.</p>\n\n<p>However, in a deployed environment, the link generated is as follows:</p>\n\n<pre><code>http://[server]/[Controller]/[Action]?[parameters]\n</code></pre>\n\n<p>And that fails because it is missing the website name.  So what I need is for it to generate the links as follows:</p>\n\n<pre><code>http://[server]/[WebSite]/[Controller]/[Action]?[parameters]\n</code></pre>\n\n<p>How do I need to specify my href links for this to work?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","file-io"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12985510,"title":"Can't create a file when users generate at a same time","body":"<p>I have a code to create an xml file on a server directory,\nthis code is working like a charm until users process this code at A SAME TIME.\nthe user who has a milliseconds faster will success generate a file and the other will losing it.\nplease help me guys.</p>\n\n<pre><code>public static void XmlOrder(arg_order mod, string NewAddress)\n    {\n            XmlDocument XDoc = new XmlDocument();\n            XmlDeclaration xde = XDoc.CreateXmlDeclaration(\"1.0\", \"\", \"\");\n\n            XDoc.AppendChild(xde);\n\n            XmlElement XElemRoot = XDoc.CreateElement(\"Digital_Order\");\n            XElemRoot.SetAttribute(\"xmlns\", \"\");\n            XDoc.AppendChild(XElemRoot);\n\n            foreach (arg_order modDetail in mod.arg_orders) {\n\n                XmlElement Xsource = XDoc.CreateElement(\"Document\");\n                XElemRoot.AppendChild(Xsource);\n\n                XmlElement XTemp = XDoc.CreateElement(\"wt_web_Id\");\n                XTemp.InnerText = modDetail.order_detail_id.ToString();\n                Xsource.AppendChild(XTemp);\n\n                XTemp = XDoc.CreateElement(\"wt_addr\");\n                XTemp.InnerText = modCompany.qad_no;\n                Xsource.AppendChild(XTemp);\n            }\n            //naming and path\n            string name = arg_order_detail.FindAll().Count.ToString() + \".xml\";\n            string path = ArgenXmlOrderPath + \"/\" + name;\n            XDoc.Save(path);\n}\n</code></pre>\n"},{"tags":["asp.net",".net","asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12430005,"title":"Use Sections in Partial Views in MVC 4.0","body":"<p>I want to include scripts in my partial views when I have cases where I need to initialize jQuery ui on specific elements.  It really belongs with the partial and not the containing page or the layout.</p>\n\n<p>Supposedly there's a way to do it in MVC 4, but I can't seem to find any info on it.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","entity-framework","sql-server-ce"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":194,"score":1,"question_id":9509563,"title":"EF will only let me choose SQL Server CE 3.5","body":"<p>I have a Visual Studio solution with two projects: <code>MyApp.MvcUI</code> and <code>MyApp.Domain</code> (class library).</p>\n\n<p><code>MyApp.MvcUI</code> contains my SQL Server CE 4 database.</p>\n\n<p><code>MyApp.Domain</code> is supposed to contain the Entity Framework EDMX file, but if I add it there I don't have the option to use SQL Server CE 4, only 3.5.</p>\n\n<p><img src=\"http://www.codetunnel.com/content/images/sqlce35only.jpg\" alt=\"\"></p>\n\n<p>If I add the EDMX in the <code>MvcUI</code> project then I am able to choose SQL Server CE 4.</p>\n\n<p>Question </p>\n\n<ol>\n<li><p>How can I put my Entity Framework content into the <code>MyApp.Domain</code> project and use a SQL Server CE 4 database that lives in the <code>MyApp.MvcUI</code> project?</p></li>\n<li><p>Once I solved that problem, what will the data source portion of my connection string in <code>App.Config</code> look like? I know the web project's connection string will simply look like this: </p>\n\n<pre><code>Data Source=|DataDirectory|\\CE4DB.sdf\n</code></pre>\n\n<p>but what will that look like in <code>App.Config</code> in the <code>MyApp.Domain</code> project? Will it be an absolute path like </p>\n\n<pre><code>C:\\Code\\MyProject\\MyApp.MvcUI\\App_Data\\CE4DB.sdf\n</code></pre></li>\n</ol>\n\n<p>If so, is there a way to make that a relative path so when people pull the project down from source control it will still work without path corrections?</p>\n"},{"tags":["php","asp.net-mvc","arguments"],"answer_count":9,"favorite_count":7,"up_vote_count":20,"down_vote_count":0,"view_count":8821,"score":20,"question_id":691942,"title":"Speed of code execution: ASP.NET-MVC versus PHP","body":"<p>I have a friendly argument going on with a co-worker about this, and my personal opinion is that a ASP.NET-MVC compiled web application would run more efficiently/faster than the same project that would be written in PHP.  My friend disagrees.</p>\n\n<p>Unfortunately I do not have any solid data that I can use to back up my argument. (neither does he)</p>\n\n<p>To this, I tried to Google for answers to try and find evidence to prove him wrong but most of the time the debate turned into which platform it is better to develop on, cost, security features, etc... For the sake of this argument I really don't care about any of that.</p>\n\n<p>I would like to know what stack overflow community thinks about the raw speed/efficency of websites in general that are developed in ASP.NET with MVC versus exactly the same website developed with PHP?</p>\n\n<p>Does anyone have any practical examples in real-world scenarios comparing the performance of the two technologies?</p>\n\n<p><em>(I realize for some of you this may very well be an irrelevant and maybe stupid argument, but it is an argument, and I would still like to hear the answers of the fine people here at S.O.)</em></p>\n"},{"tags":["asp.net","asp.net-mvc","dependency-injection","configuration-files","ninject"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1608,"score":4,"question_id":2147798,"title":"Options for wiring dependencies with NInject","body":"<p>With NInject (preferably 2.0), what options do we have wrt wiring up our object dependencies in a web application?</p>\n\n<p>Can they be defined in an XML configuration file? </p>\n\n<p>Or does it have to be done via code?</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12984703,"title":"Setting up jQuery plugin","body":"<p>I am reviewing some code in our web site until I came to this one  </p>\n\n<pre><code>&lt;script&gt;\n    (function (a) {\n        _q = function () { return a; };\n        $ = function (f) { typeof f === 'function' &amp;&amp; a.push(arguments); return $; };\n        jQuery = $.ready = $;\n    }([]));\n&lt;/script&gt;  \n</code></pre>\n\n<p>And then followed by bunch of plugins including jQuery.<br>\nI just don't get what it means, I want to know how it works so I would be able to manipulate the code. Can anyone explain the code line by line?  </p>\n\n<p><strong>Edit</strong>  </p>\n\n<p>So sorry for the bad codes. I was also wandering of its use that's why I ask it here. Anyway this is the whole code inside the head tag.  </p>\n\n<pre><code>&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    @foreach (string domain in\n    ViewBag.Prefetches is string[] ? ViewBag.Prefetches : new string[] { })\n    {\n        @Html.Prefetch(domain)    \n    }\n    &lt;title&gt;\n        @{@ViewBag.SiteName\n            if (ViewBag.Title != null)\n            {  @ViewBag.SiteDelimiter @ViewBag.Title } \n        }\n    &lt;/title&gt;\n\n    &lt;meta name=\"description\" content=\"\"&gt;\n    &lt;meta name=\"author\" content=\"\"&gt;\n    &lt;meta http-equiv=\"imagetoolbar\" content=\"false\"&gt;\n\n    &lt;link href=\"@Url.ContentArea(\"~/css/global/normalize.css\")\" rel=\"stylesheet\" /&gt;\n\n    @foreach (string stylesheet in\n    ViewBag.Stylesheets is string[] ? ViewBag.Stylesheets : new string[] { @\"style.css\" })\n    { \n        &lt;link href=\"@Url.ContentArea(\"~/css/\" + stylesheet)\" rel=\"stylesheet\" /&gt;\n    }\n\n    @RenderSection(\"CustomCss\", required: false)\n\n    &lt;link href=\"@Url.ContentArea(\"~/css/global/helpers.css\")\" rel=\"stylesheet\" /&gt;\n    &lt;link href=\"@Url.ContentArea(\"~/css/global/media.css\")\" rel=\"stylesheet\" /&gt;\n\n    &lt;script src=\"@Url.ContentArea(\"~/js/global/modernizr-2.5.3.min.js\")\"&gt;&lt;/script&gt;\n\n    &lt;script&gt;\n        (function (a) {\n            _q = function () { return a; };\n            $ = function (f) { typeof f === 'function' &amp;&amp; a.push(arguments); return $; };\n            jQuery = $.ready = $;\n        }([]));\n    &lt;/script&gt;\n\n    @RenderSection(\"OverrideJs\", required: false)\n&lt;/head&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;window.jQuery || document.write('&lt;script src=\"@Url.ContentArea(\"~/js/global/jquery-1.7.2.min.js\")\"&gt;&lt;\\/script&gt;');&lt;/script&gt;\n@foreach (string script in\n    ViewBag.Scripts is string[] ? ViewBag.Scripts : new string[] { })\n{ \n    &lt;script src=\"@script\"&gt;&lt;/script&gt;\n}\n&lt;script&gt;\n    Modernizr.load({\n        test: window.JSON,\n        nope: '@Url.Content(\"~/Scripts/Polyfills/json.polyfill.js\")'\n    });\n\n    (function (i, s, q, l) {\n        for (q = window._q(), l = q.length; i &lt; l;) {\n            $.apply(this, s.call(q[i++]));\n        }\n    }(0, Array.prototype.slice));\n\n&lt;/script&gt;\n&lt;!--[if lt IE 7 ]&gt;\n  &lt;script src=\"//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js\"&gt;&lt;/script&gt;\n  &lt;script&gt;window.attachEvent(\"onload\",function(){CFInstall.check({mode:\"overlay\"})})&lt;/script&gt;\n&lt;![endif]--&gt;\n</code></pre>\n\n<p>I can't provide a link because these codes were used in specific pages where you have to be logged in.<br>\nAnyway thanks for the help.</p>\n"}]}
{"total":44785,"page":17,"pagesize":100,"questions":[{"tags":["asp.net-mvc","error-handling"],"answer_count":6,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":3154,"score":7,"question_id":4523831,"title":"Best practices for asp.net mvc error handling","body":"<p>I'm looking for a standard way to handle errors in asp.net mvc 2.0 or 3.0</p>\n\n<ul>\n<li>404 error handler</li>\n<li>Controller scope exception error handler</li>\n<li>Global scope exception error handler</li>\n</ul>\n\n<p>Thanks all</p>\n"},{"tags":["javascript","asp.net-mvc","knockout.js"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":109,"score":4,"question_id":12982376,"title":"How to initialize a Knockout viewmodel when initial viewmodel load is empty","body":"<p>I am using Knockout to implement a course list selection tool. I am using the approach below to populate the data (MVC3/Razor), so that when the viewmodel is initially populated, I have no issues working with each KO array (i.e. CourseList, ScheduleList). However, when the initial load from the server returns zero rows, meaning that the viewmodel 'ScheduleList' property is empty, then it's not possible to call any methods such as .push() or .removeAll(). Presumably this means that the observable array was never created since there was nothing to fill it with. When the model is filled, the ScheduleList property is populated with a List. What is the best way to instantiate it when the MVC action returns it as empty? There is a jsFiddle that seems to address it, but when I try to use the 'create' option, it renders my entire model blank. I am not sure what the syntax is of the 'create' option. The jsFiddle is here: <a href=\"http://jsfiddle.net/rniemeyer/WQGVC/\" rel=\"nofollow\">http://jsfiddle.net/rniemeyer/WQGVC/</a> </p>\n\n<pre><code>// Get the data from the server\nvar DataFromServer = @Html.Raw(Json.Encode(Model));     \n\n// Data property in viewmodel\nvar data = {\n    \"CourseList\": DataFromServer.CourseList ,\n    \"ScheduleList\": DataFromServer.ScheduleList\n    };\n\n$(function() {\n    // Populate Data property\n    viewModel.Data = ko.mapping.fromJS(data);   \n\n    // ko.applyBindings(viewModel, mappingOptions);             \n    ko.applyBindings(viewModel);\n});\n</code></pre>\n\n<p>When the initial page load does not populate ScheduleList, then the following code throws an error. If the initial page load contained data, then you could call .removeAll() and .push() etc.</p>\n\n<pre><code>var oneA= 'abc';\n\n// push not working                \nthis.Data.ScheduleList.push( oneA );\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12983957,"title":"Generating scaffolding template recursively for MVC","body":"<p>Consider following compostion relation between <code>Child</code> &amp; <code>Root</code> classes-</p>\n\n<pre><code>public class Child\n{\n    public string ChildProperty { get; set; }\n}\npublic class Root\n{\n    public Child child { get; set; }\n    public string RootProperty { get; set; }\n}\n</code></pre>\n\n<p>Creating strongly typed view for <code>Root</code> class, <strong>does not include</strong> <code>child</code> property.</p>\n\n<pre><code>&lt;fieldset&gt;\n    &lt;legend&gt;Root&lt;/legend&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.RootProperty)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.RootProperty)\n        @Html.ValidationMessageFor(model =&gt; model.RootProperty)\n    &lt;/div&gt;\n\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>How do I generate scaffolding template to include child properties as well?</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["asp.net-mvc",".net-4.5","bundling-and-minification","asp.net-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":188,"score":3,"question_id":12018429,"title":"ASP.NET bundling/minification: including dynamically generated javascipt","body":"<p>I have a site that dynamically generates javascript.  The generated code describes type-metadata and some server-side constants so that the clients can easily consume the server's services - so it's very cacheable.</p>\n\n<p>The generated javascript is served by an ASP.NET MVC controller; so it has a Uri; say <code>~/MyGeneratedJs</code>.</p>\n\n<p>I'd like to include this javascript in a javascript bundle with other static javascript files (e.g. jquery etc): so just like static files I want it to be referenced separately in debug mode and in minified form bundled with the other files in non-debug mode.</p>\n\n<p>How can I include dynamically generated javascript in a bundle?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":12972497,"title":"How to seed data to a List<String> model member?","body":"<p>I have an Asp.Net MVC project up and running and I'm able to seed all the data I want to the database when my model changes except for one property which is of <code>List&lt;string&gt;</code> type.</p>\n\n<p>I've isolated that test case to better show the issue.</p>\n\n<p>Lets's say I've a simple <code>Person</code> model:</p>\n\n<pre><code>class Person\n{\n    public string Firstname { get; set; }\n    public string Lastname { get; set; }\n    public List&lt;string&gt; Children { get; set; }\n\n    public string ToString()\n    {\n        string children = \"\";\n\n        if (Children != null)\n        {\n            children = String.Join(\" - \", Children.ToArray());\n        }\n        else\n        {\n            children = \"none\";\n        }\n\n        return Firstname + \" \" + Lastname + \" -&gt; \" + children;\n    }\n}\n</code></pre>\n\n<p>When I use this model in an external Console application, I'm able to initialize all of its member.</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        List&lt;Person&gt; myList = new List&lt;Person&gt; {\n            new Person { Firstname = \"John\", Lastname = \"Doe\", Children = new List&lt;string&gt; { \"Bob\", \"Monica\" }},\n            new Person { Firstname = \"Bob\", Lastname = \"Doe\", Children = new List&lt;string&gt; { \"Jack\", \"John II\" }},\n            new Person { Firstname = \"Monica\", Lastname = \"Doe\", Children = new List&lt;string&gt; { \"Sue\", \"Mark\" }}\n        };\n\n        // output the list to screen\n        myList.ForEach(p =&gt; Console.WriteLine(p.ToString()));\n    }\n}\n</code></pre>\n\n<p>The output is then as expected:</p>\n\n<pre><code>John Doe -&gt; Bob - Monica\nBob Doe -&gt; Jack - John II\nMonica Doe -&gt; Sue - Mark\n</code></pre>\n\n<p>But now when I try to seed the same data into my database, the <code>Children</code> member is <code>null</code> !</p>\n\n<p>Here is how I'm trying to do it:</p>\n\n<pre><code>public class MySeedData : DropCreateDatabaseIfModelChanges&lt;MyDataBaseContextClass&gt;\n{\n    protected override void Seed(MyDataBaseContextClass context)\n    {\n        List&lt;Person&gt; myList = new List&lt;Person&gt; {\n            new Person { Firstname = \"John\", Lastname = \"Doe\", Children = new List&lt;string&gt; { \"Bob\", \"Monica\" }},\n            new Person { Firstname = \"Bob\", Lastname = \"Doe\", Children = new List&lt;string&gt; { \"Jack\", \"John II\" }},\n            new Person { Firstname = \"Monica\", Lastname = \"Doe\", Children = new List&lt;string&gt; { \"Sue\", \"Mark\" }}\n        };\n        myList.ForEach(p =&gt; context.Persons.Add(p));\n    }\n}\n</code></pre>\n\n<p>I've tried a lot of different construction patterns but every time the <code>Children</code> member is <code>null</code> whenever I try to access it in one of my Views.</p>\n\n<p>At the moment, the only way I've found to have this member being not null is to initialize the list in the default constructor of the <code>Person</code> class...</p>\n\n<p>So how can I seed data to this <code>Children</code> member with different values for each person?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","vb.net","entity-framework"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":466,"score":1,"question_id":5284558,"title":"Entity Framework looking for wrong column","body":"<p>I'm brand new to the Entity Framework and trying to learn all it can offer.  I'm currently working my way through the <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store-part-4\" rel=\"nofollow\">MVC Music Store tutorial</a> which includes the following code:</p>\n\n<pre><code>public ActionResult Browse(string genre)\n {\n    // Retrieve Genre and its Associated Albums from database\n    var genreModel = storeDB.Genres.Include(\"Albums\")\n        .Single(g =&gt; g.Name == genre);\n\n    return View(genreModel);\n }\n</code></pre>\n\n<p>as I'm working in VB I converted it like so:</p>\n\n<pre><code>Function Browse(ByVal genre As String) As ActionResult\n\n            'Retrieve Genre and its Associated Albums from database\n            Dim genreModel = storeDB.Genres.Include(\"Albums\"). _\n                    Single(Function(g) g.Name = genre)\n\n            Return(View(genreModel))\n        End Function\n</code></pre>\n\n<p>The problem is I'm getting the following exception:</p>\n\n<blockquote>\n  <p>Invalid column name 'GenreGenreId'.</p>\n</blockquote>\n\n<p>Which I know is true, but I can't for the life of my work out where it's getting 'GenreGenreId' from.  Probably a basic question but I'll appreciate any help in the right direction.</p>\n\n<hr />\n\n<p>As per requested here is the source for my classes:</p>\n\n<p>Album.vb</p>\n\n<pre><code>Public Class Album\n\n    Private _title As String\n    Private _genre As Genre\n    Private _AlbumId As Int32\n    Private _GenreId As Int32\n    Private _ArtistId As Int32\n    Private _Price As Decimal\n    Private _AlbumArtUrl As String\n\n    Public Property Title As String\n        Get\n            Return _title\n        End Get\n        Set(ByVal value As String)\n            _title = value\n        End Set\n    End Property\n\n    Public Property AlbumId As Int16\n        Get\n            Return _AlbumId\n        End Get\n        Set(ByVal value As Int16)\n            _AlbumId = value\n        End Set\n    End Property\n\n    Public Property GenreId As Int16\n        Get\n            Return _GenreId\n        End Get\n        Set(ByVal value As Int16)\n            _GenreId = value\n        End Set\n    End Property\n\n    Public Property ArtistId As Int16\n        Get\n            Return _ArtistId\n        End Get\n        Set(ByVal value As Int16)\n            _ArtistId = value\n        End Set\n    End Property\n\n    Public Property AlbumArtUrl As String\n        Get\n            Return _AlbumArtUrl\n        End Get\n        Set(ByVal value As String)\n            _AlbumArtUrl = value\n        End Set\n    End Property\n\n    Public Property Price As Decimal\n        Get\n            Return _Price\n        End Get\n        Set(ByVal value As Decimal)\n            _Price = value\n        End Set\n    End Property\n\n    Public Property Genre As Genre\n        Get\n            Return _genre\n        End Get\n        Set(ByVal value As Genre)\n            _genre = value\n        End Set\n    End Property\n\n\nEnd Class\n</code></pre>\n\n<p>Genre.vb</p>\n\n<pre><code>Public Class Genre\n\n    Dim _genreId As Int32\n    Dim _Name As String\n    Dim _Description As String\n    Dim _Albums As List(Of Album)\n\n    Public Property GenreId As Int32\n        Get\n            Return _genreId\n        End Get\n        Set(ByVal value As Int32)\n            _genreId = value\n        End Set\n    End Property\n\n    Public Property Name As String\n        Get\n            Return _Name\n        End Get\n        Set(ByVal value As String)\n            _Name = value\n        End Set\n    End Property\n\n    Public Property Description As String\n        Get\n            Return _Description\n        End Get\n        Set(ByVal value As String)\n            _Description = value\n        End Set\n    End Property\n\n    Public Property Albums As List(Of Album)\n        Get\n            Return _Albums\n        End Get\n        Set(ByVal value As List(Of Album))\n            _Albums = value\n        End Set\n    End Property\n\nEnd Class\n</code></pre>\n\n<p>MusicStoreEntities.vb</p>\n\n<pre><code>Imports System.Data.Entity\n\nNamespace MvcApplication1\n\n    Public Class MusicStoreEntities\n        Inherits DbContext\n\n        Public Property Albums As DbSet(Of Album)\n        Public Property Genres As DbSet(Of Genre)\n\n    End Class\nEnd Namespace\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":105,"score":2,"question_id":12982886,"title":"How to return a DataSet to a View","body":"<p>I am sending a standard Sql select statement to my Sql box via the SqlDataAdapter, then populating a DataSet object.</p>\n\n<p>I can access the rows in the resulting DataSet, but how can I convert the DataSet into a List which can be returned to the MVC View. i.e. I'm assuming a List object is the best way to handle this.</p>\n\n<p>Here's my controller c# code:</p>\n\n<pre><code>public class QAController : Controller\n{\n\n    private readonly static string connString = ConfigurationManager.ConnectionStrings[\"RegrDBConnection\"].ToString();\n    private readonly static SqlConnection sqlConn = new SqlConnection(connString);\n    private readonly static SqlCommand sqlComm = new SqlCommand();\n\n    public ActionResult Index()\n    {\n        DbRegressionExec();\n        return View();\n    }\n    public static void DbRegressionExec()\n    {\n        // SELECT TABLE CONTENTS FROM SQL !!\n        RegressDB_TableList regresDB = new RegressDB_TableList();\n        string sqlStr = \"select * from [RegressionResults].[dbo].[Diff_MasterList] order by TableName\";\n\n        // POPULATE DATASET OBJECT\n        DataSet ds = new DataSet();\n        SqlDataAdapter da = new SqlDataAdapter(sqlStr, sqlConn);\n        da.SelectCommand.CommandType = CommandType.Text;\n        sqlConn.Open();\n        try\n        {\n            da.Fill(ds, \"RegresDB\");\n        }\n        catch (Exception e)\n        {\n            throw;\n        }\n        finally\n        {\n            sqlConn.Close();\n        }\n\n       // I can iterate thru rows here, but HOW DO CONVERT TO A LIST OBJECT ????\n\n        int numRows = ds.Tables[\"RegresDB\"].Rows.Count;\n        for (int i = 0; i &lt; numRows; i++)\n        {\n            string tblName = ds.Tables[\"RegresDB\"].Rows[i].Field&lt;string&gt;(\"TableName\");\n        }\n\n        //List&lt;RegressDB_TableList&gt; masterList = regresDB.RegresTableList.ToList(); //not working !!\n        //var masterList = regresDB.TableName.ToList(); //\n\n    }\n\n}\n</code></pre>\n\n<p>and a simple class I may need to make this happen:</p>\n\n<pre><code>namespace RegressionMvc.Models\n{\n  public class RegresDB_TableName\n  {\n     public string TableName { get; set; }\n  }\n  public class RegressDB_TableList\n  {\n     public List&lt;RegresDB_TableName&gt; RegresTableList { get; set; }\n  }\n</code></pre>\n\n<p>}</p>\n\n<p>In the end, I'm trying to figure out the best way to handle DataSet results from Sql Server and how to make them back to an MVC View.</p>\n\n<p>I can probably go with jQuery and Json, meaning just convert the data fields to Json and return to JQuery, but I'm sure there are several ways to handle Sql based result sets.</p>\n\n<p>Thanks in advance for your advice....</p>\n\n<p>Best,\nBob</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":12982773,"title":"Reading Form Post data vs strongly typed View","body":"<p>I have a set of HTML pages containg input elements. I am in the process of converting them into <code>MVC Views</code>. </p>\n\n<p>Considering performance &amp; cleanliness of code. What is the correct way to proceed, </p>\n\n<ol>\n<li><p>Processing Form as posted FormCollection, or</p></li>\n<li><p>Create Strongly typed view to obtain input values from the Model.</p></li>\n</ol>\n"},{"tags":["c#","asp.net-mvc","performance","iis7","httpmodule"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12981298,"title":"How to analyze the performance of requests in ASP.NET MVC application?","body":"<p>I would like to capture the hit time, processing time, memory consumption and response time of requests in ASP.NET MVC application.</p>\n\n<p>Is there any way or tool to perform this?</p>\n"},{"tags":["asp.net-mvc","requirejs"],"answer_count":1,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":1270,"score":7,"question_id":10815454,"title":"How does RequireJS work with multiple pages and partial views?","body":"<p>I'm looking into <strong>RequireJS</strong> but I'm uncertain about some things.</p>\n\n<p>I understand how I can load all my dependencies with <code>main.js</code>.\nBut do I need to add any logic to work with those dependencies in <code>main.js</code>?</p>\n\n<p>To me, <code>main.js</code> seems like a document.ready state and you enter logic there when the document has loaded, right?</p>\n\n<p>And for other pages and partial views, do I need to create multiple <code>main.js</code> or can I just reference loaded functions in dependencies from the views in a <code>&lt;script&gt;</code> for example?</p>\n"},{"tags":["asp.net-mvc","razor","content-management-system"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12979652,"title":"Replacing content in Razor selectively","body":"<p>Is it possible to do something like this in Razor:</p>\n\n<pre><code>@using(Html.CMSContent(\"TermsOfService\")) \n{\n    &lt;text&gt;\n        &lt;!-- Some default content goes here if the \"TermsOfService\"\n             item doesn't exist in my content table in the database --&gt;\n    &lt;/text&gt;\n}\n</code></pre>\n\n<p>When the view is being processed, if the CMSContent helper doesn't find a content item named \"TermsOfService\" in some database table I've set up, it'll output the default content.</p>\n\n<p>Otherwise, it'll replace the default content with what's in the database?</p>\n\n<p>I'm trying to build a CMS/application hybrid, so that the Marketing department can override the text in my app if they want.</p>\n\n<p><strong>CLARIFY</strong></p>\n\n<p>The reason I'm doing this is to make the code super-easy to read and write. I'm going to end up with these little content blocks all over the place, so I'm hoping to minimize how much a developer has to type to get this functionality.</p>\n\n<p>I'm also expecting that 99% of the time, the default text is what's going to show up. But I'd like to have the 1% cases handled where we need to quickly change some text without having to re-deploy the app. So, having the default text as close to its context as possible is important (ie, I don't want the developer to have to jump to a different file to see what the default text is - nor have to jump to the top of the page).</p>\n\n<p>For example, when you do <code>@using(Html.BeginForm())</code> it'll automatically emit the start and end <code>&lt;form&gt;</code> tags. I'm hoping for something clever like that.</p>\n"},{"tags":["asp.net-mvc","mvc","model-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12982362,"title":"MVC nested model collection is empty (not null)","body":"<p>I have a model that has a property which is a collection. I can successfully bind from the edit actions, for example:</p>\n\n<pre><code>    [HttpGet]\n    public ActionResult Edit(string id)\n    {\n        // code here\n        return this.View(complexModel);            \n    }\n\n    [HttpPost]\n    public ActionResult Edit(ComplexModel complexModel)\n    {\n        // code here\n        return RedirectToAction(\"AnotherAction\")            \n    }\n</code></pre>\n\n<p>In the post method I can successfully receive all the object properties, including the collection one. However I have another view that can invoke the Edit action. When this happens I can see that the html rendered is the same (i.e. the nested property info is there). When I save the changes in the post Edit I receive all the correct properties with one exception - the collection propery has zero items.</p>\n\n<p>Where do I have to search for the problem?</p>\n\n<p>Update:\nI am properly iterating through the collection and displaying all items with EditorFor; however when coming from a differnt view (the different view is in another controller and the Edit link is placed in a Display Template - if that makes any difference) with the same exact model I can see that the html is the same since all the properties of the collection are there.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12982186,"title":"Placement of Html.BeginForm() in ASP.NET MVC","body":"<p>While in asp.net master page use to contain <code>form control</code>. I am not able to figure out, where is the correct location to place <code>Html.BeginForm()</code>. Is it <code>Layout Page</code> or the <code>View</code>.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","linq","entity"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12981979,"title":"Creating HiddenFor IEnumerable<String> in View","body":"<p>I have a Property that is an IEnumerable</p>\n\n<pre><code>public IEnumerable&lt;string&gt; ChangesOthersResult { get; set; }\n</code></pre>\n\n<p>I need to collect all values from ChangesOthersResult and post from a view back to the controller.  How can I loop through the Ienumerable and create hidden fields that will bind back to the ViewModel in the controller?</p>\n\n<pre><code>foreach(var item in Model.ChangesOthersResult)\n   {\n       @Html.HiddenFor(x =&gt; x.ChangesOthersResult);\n   }\n</code></pre>\n\n<p>Is giving me the Raw SQL statement as text.  </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-web-api"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":90,"score":0,"question_id":12942699,"title":"Return object as json","body":"<p>I have this class.</p>\n\n<pre><code>public class SDS\n{\n    public Guid A { get; set; }\n\n    public Guid B { get; set; }\n\n    public String C { get; set; }\n}\n</code></pre>\n\n<p>I return the json like this</p>\n\n<pre><code>public HttpResponseMessage Val()\n        {\n\n                SDS svr = new SDS();\n                svr.A = ...\n                svr.B = ...\n                svr.C = ...\n\n    return Request.CreateResponse(HttpStatusCode.OK, json_serializer.Serialize(svr), \"application/json\");\n}\n</code></pre>\n\n<p>In the client side I use jquery like this</p>\n\n<pre><code>var obj = jQuery.parseJSON(jqXHR.responseText);\n</code></pre>\n\n<p>The problem is that the json that gets returned is like this and I am unable to iterate ofer the values or access the elements via index:</p>\n\n<pre><code>{\"A\":\"3a9779fe-9c92-4208-b34d-5113e0548d50\",\"B\":\"206575a5-8a90-4a13-89ec-910e5a9a35a1\",\"C\":\"Meta\"}\n</code></pre>\n\n<p>To solve this issue I had to do this and this works:</p>\n\n<pre><code>obj = jQuery.parseJSON('{\"List\":[' + obj + ']}');\n</code></pre>\n\n<p><strong>My question is is there any way to use an attribute on the class so that it returns a json that I can use?</strong></p>\n\n<pre><code>[SomeAttribute name=\"List\"]\npublic class SDS\n{\n    public Guid A { get; set; }\n\n    public Guid B { get; set; }\n\n    public String C { get; set; }\n}\n</code></pre>\n\n<p>...\n...\n...</p>\n\n<p><strong>Update:</strong></p>\n\n<p><strong>This question is still open as none of the provided answers were able to produce a fix.</strong></p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":11918401,"title":"enable-migrations error : project failed to build","body":"<p>Using ASP.NET MVC4 with EF4.3</p>\n\n<p>Running Enable-Migrations from PM Console</p>\n\n<p>System.Management.Automation.RuntimeException: The project 'MyProj' failed to build.\nThe project 'MyProj' failed to build.</p>\n\n<p>The project builds (control-shift-B) </p>\n\n<p>Is there any way to get more detail on this error to diagnose?</p>\n"},{"tags":["asp.net","asp.net-mvc","svn","version-control"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12980607,"title":"Use subversion to manage code deployment","body":"<p>I have 4 web servers in a cluster that need to all have the same code on it and pushing code to each server seems to be a tedious task. I was wondering if it is good or bad practice to use subversion to manage asp.net &amp; MVC code deployments. My deployments would go from copy/pasting files to each server to just doing svn update at the webroot of each server. Is there any good reason why this would be a bad idea? I apologize if this is the wrong place for this question.</p>\n"},{"tags":[".net","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12979363,"title":"Model null after postback using EditorFor<string>","body":"<p>I'm using an Editor Template, the syntax in the view looks like this:</p>\n\n<pre><code>Html.EditorFor(m =&gt; m.Email)\n</code></pre>\n\n<p>The string editor template looks like this:</p>\n\n<pre><code>@{\n   var o = ViewData.ModelMetadata;\n} \n\n@model string\n\n@Html.TextBox(o.PropertyName,\n              this.Model,\n              new { @class=\"textinput-single-line\", placeholder = o.Watermark })\n</code></pre>\n\n<p>The problem is that upon postback, model.Email is null no matter what I type in the TextBox. Why is the text box value not properly bound to the model?</p>\n\n<p><strong>Edit:</strong> Here's the HTML output</p>\n\n<pre><code>        &lt;fieldset&gt;\n          &lt;legend&gt;Log in Form&lt;/legend&gt;\n          &lt;ol&gt;\n            &lt;li&gt;\n              &lt;div class=\"editor-for\"&gt;\n                &lt;label class=\"label-single-line\" for=\"Email_Email\"&gt;Email&lt;/label&gt;\n                &lt;input class=\"textinput-single-line\" id=\"Email_Email\" name=\"Email.Email\" placeholder=\"\" type=\"text\" value=\"\"/&gt;\n                &lt;div class=\"clearboth\"/&gt;\n              &lt;/div&gt;\n            &lt;/li&gt;\n            &lt;li&gt;\n              &lt;div class=\"editor-for\"&gt;\n                &lt;span class=\"label-single-line\"/&gt;\n                &lt;input class=\"tickbox-single-line\" id=\"RememberMe_RememberMe\" name=\"RememberMe.RememberMe\" type=\"checkbox\" value=\"true\"/&gt;\n                &lt;input name=\"RememberMe.RememberMe\" type=\"hidden\" value=\"false\"/&gt;\n                &lt;label class=\"label-tickbox\" for=\"RememberMe_RememberMe\"&gt;Remember me?&lt;/label&gt;\n                &lt;div class=\"clearboth\"/&gt;\n              &lt;/div&gt;\n            &lt;/li&gt;\n          &lt;/ol&gt;\n          &lt;input type=\"submit\" value=\"Log in\"/&gt;\n        &lt;/fieldset&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","caching","browser-cache"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12935150,"title":"Caching issue with Firefox","body":"<p>I am working on an ASP.NET/MVC4 app and I fetch data continuously and my problem is related to caching.</p>\n\n<p>The problem is that when I click on a particular link in my application it works fine, but sometimes it automatically redirects to the INDEX page that is the default page.</p>\n\n<p>I surfed around about this problem and found that it's a problem in Mozilla that it maintains caching of every link. But sometimes some weird things happen and it automatically redirects a particular link to the INDEX page (<code>301 Permanently REMOVED</code>) and also stores it in the cache such that now every time I click on that link it always redirects me to the INDEX page that's been cached.</p>\n\n<p>So now I have to clear the cache in my browser every time I face this problem.</p>\n\n<p>How can I make it not automatically redirect to the cached INDEX page?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12773217,"title":"MVC javascript file segregation/performance","body":"<p>Lets say an MVC3 project has a number of JavaScript files and libraries. These are referenced by a shared layout view, at the bottom of this page. The idea being the page loads faster as the libraries are included after the page main content. There is also no in-line JavaScript in the views.</p>\n\n<p>The project has a number of areas and each has a number of controllers. There is however just 1 JavaScript file that contains all of the custom scripting and events for the whole site. So code unique to a particular controller will be included for all page loads.</p>\n\n<p>Is there a better way to structure the files or to segregate the code so only relevant scripting is executed? </p>\n\n<p>Edit:\nSo a strategy of splitting 1 large script file, or to only have scripting execute that's relevant to the current context. NO use initializing lots of event handlers for elements that do not exist on a page. Even manually checking if each element exists beforehand is an overhead in site wide file.</p>\n"},{"tags":["mysql","asp.net-mvc","entity-framework-4","web-config","dataprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":235,"score":3,"question_id":11275579,"title":"How to configure MvcMusicStore .Net WebApp with MySQL?","body":"<p>I'm completely lost.\nI'm trying to setup the MvcMusicStore .Net app (http://mvcmusicstore.codeplex.com/) with MySQL but I got several errors when I compile the project; </p>\n\n<p>I've read the documentation at <a href=\"http://dev.mysql.com\" rel=\"nofollow\">http://dev.mysql.com</a> about using .Net Entity Framework with MySQL however I'm a beginner with EF and those are the steps that I've made  without success:</p>\n\n<ul>\n<li><p>I ve already installed MySQL Server 5.5</p></li>\n<li><p>downloaded MvcMusicStore at <a href=\"http://mvcmusicstore.codeplex.com/downloads/get/238258\" rel=\"nofollow\">http://mvcmusicstore.codeplex.com/downloads/get/238258</a></p></li>\n<li><p>installed MySQL Connector Net 6.4.4 and created db in mysql:\nCREATE DATABASE <code>mvcmusicstore</code> /*!40100 CHARACTER SET utf8 COLLATE utf8_general_ci */;</p></li>\n<li><p>added following references to the project MvcMusicStore:\nmysql.data, (mysql.data.cf not added or i get an error), mysql.data.entity, mysql.web\n(for each library, in the properties, selected \"true\" to copy the dll in the bin folder)</p></li>\n<li><p>in \"web.config\" replaced:</p>\n\n<pre><code>&lt;connectionStrings&gt;\n&lt;add name=\"MusicStoreEntities\"\nconnectionString=\"Data Source=|DataDirectory|MvcMusicStore.sdf\"\nproviderName=\"System.Data.SqlServerCe.4.0\"/&gt;\n&lt;/connectionStrings&gt;\n</code></pre></li>\n</ul>\n\n<p>with:</p>\n\n<pre><code>    &lt;connectionStrings&gt;\n    &lt;add name=\"MusicStoreEntities\"\n    connectionString=\"Server=127.0.0.1; Database=mvc_store; Uid=root; Pwd={* my password *};\"\n    providerName=\"MySQL Data Provider\" /&gt;\n    &lt;/connectionStrings&gt;\n    &lt;system.data&gt;\n    &lt;DbProviderFactories&gt;\n    &lt;add name=\"MySQL Data Provider\"\n    invariant=\"MySql.Data.MySqlClient\"\n    description=\".Net Framework Data Provider for MySQL\"\n    type=\"MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d\" /&gt;\n    &lt;/DbProviderFactories&gt;\n    &lt;/system.data&gt;\n</code></pre>\n\n<ul>\n<li>cleaned project -> compiled &amp; recompiled, then I got the error:</li>\n</ul>\n\n<p>\"An error occurred creating the configuration section handler for system.data:\nColumn 'InvariantName' is constrained to be unique.\nValue 'MySql.Data.MySqlClient' is already present.\"</p>\n\n<p>so I ve replaced the \"dbproviderfactories\" section with the code found at <a href=\"http://stackoverflow.com/questions/5764765/how-to-use-mysql-and-entity-framework-4-1-code-first\">How to use MySql and Entity Framework 4.1 code first</a></p>\n\n<pre><code>    &lt;DbProviderFactories&gt;\n    &lt;remove invariant=\"MySql.Data.MySqlClient\" /&gt;\n    &lt;add name=\"MySQL Data Provider\" \n    invariant=\"MySql.Data.MySqlClient\" \n    description=\".Net Framework Data Provider for MySQL\"\n    type=\"MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d\" /&gt;\n    &lt;/DbProviderFactories&gt;\n</code></pre>\n\n<ul>\n<li><p>recompiled, then I got the error \"cannot find the data provider\":</p>\n\n<pre><code>Details: \nArgumentException: Can not find the data provider. Net Framework required. It may not be installed.\n\nError in the source code: \n\nRow 17:         ' the albums with the highest count\nRow 18: \nRow 19:         Return storeDB.Albums.OrderByDescending(Function(a) a.OrderDetails.Count()).Take(count).ToList()\nRow 20:     End Function\nRow 21: End Class\n\nFile: C:\\{...}\\MvcMusicStore-Completed\\MvcMusicStore\\Controllers\\HomeController.vb    Row: 19 \n\nstack: \n\n[ArgumentException: Can not find the data provider. Net Framework required. It may not be installed.]\nSystem.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1420503\nSystem.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name) +393\nSystem.Data.Entity.Internal.LazyInternalConnection.Initialize() +47\nSystem.Data.Entity.Internal.LazyInternalConnection.get_ConnectionHasModel() +9\nSystem.Data.Entity.Internal.LazyInternalContext.InitializeContext() +262\nSystem.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +18\nSystem.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +63\nSystem.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15\nSystem.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37\nSystem.Linq.Queryable.OrderByDescending(IQueryable`1 source, Expression`1 keySelector) +66\nMvcMusicStore.HomeController.GetTopSellingAlbums(Int32 count) in C:\\Users\\Max\\Desktop\\Projects\\MvcStore\\MvcMusicStore-Completed\\MvcMusicStore\\Controllers\\HomeController.vb:19\nMvcMusicStore.HomeController.Index() in C:\\Users\\Max\\Desktop\\Projects\\MvcStore\\MvcMusicStore-Completed\\MvcMusicStore\\Controllers\\HomeController.vb:10\nlambda_method(Closure , ControllerBase , Object[] ) +96\nSystem.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17\nSystem.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27\nSystem.Web.Mvc.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12() +55\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263\nSystem.Web.Mvc.&lt;&gt;c__DisplayClass17.&lt;InvokeActionMethodWithFilters&gt;b__14() +19\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191\nSystem.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343\nSystem.Web.Mvc.Controller.ExecuteCore() +116\nSystem.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97\nSystem.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\nSystem.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37\nSystem.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\nSystem.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\nSystem.Web.Mvc.Async.WrappedAsyncResult`1.End() +62\nSystem.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50\nSystem.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\nSystem.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22\nSystem.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60\nSystem.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\nSystem.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061\nSystem.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n--------------------------------------------------------------------------------\nMicrosoft .NET Framework:4.0.30319; ASP.NET:4.0.30319.272 \n</code></pre></li>\n</ul>\n\n<p>I don't know what to do to resolve it.</p>\n\n<p>Thank You in advance,</p>\n\n<p>Max</p>\n"},{"tags":["asp.net","asp.net-mvc","umbraco","orchardcms"],"answer_count":7,"favorite_count":0,"up_vote_count":9,"down_vote_count":1,"view_count":5038,"score":8,"question_id":5565086,"title":"Is Orchard or Umbraco MVC?","body":"<p>I'm much happier with the quality of output I can get with MVC over webforms: hand crafted HTML that isn't full of additional machine generated gubbins (polite term). I realize of course that MVC is about a lot more than this, but concentrating on just that \"view\" part...</p>\n\n<p>I'm looking at Orchard or Umbraco for a project. I see both support Razor syntax (Umbraco just about) - but with my strong leaning to MVC Views rather than webforms, does that rule out Umbraco?</p>\n\n<p>All the Umbraco reading I've found so far is about the XSLT engine, as the razor syntax is brand new, which scares me :-)</p>\n"},{"tags":["c#","asp.net-mvc","asynchronous","task-parallel-library","signalr"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":228,"score":6,"question_id":12325863,"title":"How to cancel async task via web request?","body":"<p>Here is the scenario: On user login I start a task which is listening to IMAP idle for mail notifications and it has live connection with the client via signalr(kind of push notification). Now the problem is how do i cancel this task? i.e. user cancel push notification or log out..</p>\n\n<p>EDIT: as per my understanding for example if 5 users logged on to the site there are 5 tasks running? so how do i cancel individual tasks.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12979100,"title":"Unable to cast object of type ‘System.Web.UI.LiteralControl’ Error","body":"<p>I am getting this error:\nUnable to cast object of type ‘System.Web.UI.LiteralControl’ to type ‘System.Web.Controls.TextBox’</p>\n\n<p>I am feeding my Text input box from a querystring in the ASPX page and here is the code:</p>\n\n<pre><code>&lt;EditItemTemplate&gt;\n                        &lt;asp:TextBox ID=\"GV_Post_ID\" runat=\"server\" text='&lt;%# Request.QueryString[\"Post_ID\"] %&gt;'&gt;&lt;/asp:TextBox&gt;\n                    &lt;/EditItemTemplate&gt;\n</code></pre>\n\n<p>But when I run it, it stops here:</p>\n\n<pre><code>cmd.Parameters.Add(\"@Post_ID\", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[2].Controls[0]).Text;\n</code></pre>\n\n<p>and I get the error above.  Here is the code behind:</p>\n\n<pre><code>SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings[\"DSRConnectionString\"].ConnectionString);\n            SqlCommand cmd = new SqlCommand();\n            cmd.CommandText = \"INSERT INTO RCA_Events(Post_ID, Date, Description) VALUES(@Post_ID, @Date, @Description)\";\n            cmd.Parameters.Add(\"@Post_ID\", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[2].Controls[0]).Text;\n            cmd.Parameters.Add(\"@Date\", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[3].Controls[0]).Text;\n            cmd.Parameters.Add(\"@Description\", SqlDbType.VarChar).Value = ((TextBox)GV_InlineEditing.Rows[0].Cells[4].Controls[0]).Text;\n</code></pre>\n\n<p>Please note if I remove the querystring from the ASPX page and then I insert the value manually then it works.  Pls. help.\nthanks</p>\n"},{"tags":[".net","asp.net-mvc","iis","orchardcms","webdeploy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12967303,"title":"Problems deploying/building a working Orchard CMS website","body":"<p>i've hit a brick wall in how to move my website to my host @ <a href=\"https://my.discountasp.net\" rel=\"nofollow\">https://my.discountasp.net</a>. My main problem is all my previous projects have been INTRANET based. I've never published directly to the web </p>\n\n<p>Locally my development machine is Windows 8 Server running SQL Server 2008 R2</p>\n\n<p>I started using latest version of Orchard CMS last week. I've created a working website with content that runs from <code>http://localhost/orchard/</code> so I think its running from IIS7 ok. Orchard created tables in my 2008 R2 database for storing content, all this works a treat</p>\n\n<p>Now I want to deploy website and database to the web host discountasp. I subscribed to discountasp.net and have all the settings I need. My problems is moving the website.</p>\n\n<p>So far I tried loading up the website using Visual Studio 2010. I then do a right click from top of solution explorer and enter \"http://retiremovec.eweb701.discountasp.net\".</p>\n\n<p>VS 2010 tries to build and I get :</p>\n\n<p>\"Error  1   It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.  C:\\inetpub\\wwwroot\\orchard\\Modules\\Orchard.Autoroute\\Specs\\bin\\Hosting\\Orchard.Web\\Web.config   48<br>\n\"</p>\n\n<p>I've already looked up this error online and getting nowhere. I think i'm missing something fundamental. If I can get this to build is deployment of the website done simply by right clicking then publish website to target location \"http://retiremovec.eweb701.discountasp.net\"</p>\n\n<p>Maybe I should not be loading up the website in Visual Studio, should i use something else. I'm just so used to doing all my work in VS2010. But this time i've left it all to Orchard and results are gr8 for the CMS site but now i'm stuck</p>\n\n<p>Any comments appreciated, regards, J</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","controller","moq"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3866,"score":4,"question_id":5670902,"title":"Moq - Why does the property i want to mock need to be virtual?","body":"<p>I'm doing some unit testing, and mocking some properties using <strong>Moq</strong>.</p>\n\n<p>Now, this is a <strong>Controller</strong> test (ASP.NET MVC 3). My Controllers derive from an <em>abstract</em> controller, called <strong>AbstractController</strong>.</p>\n\n<p>This controller has a dependency on the Http Context (in order to do things like theming, domain-specific logic based on HTTP HOST headers, etc).</p>\n\n<p>This is done via a property called <strong>WebSiteSettings</strong>:</p>\n\n<pre><code>public abstract class AbstractController : Controller\n{\n   public WebSiteSettings WebSiteSettings { get; private set; }\n\n   // other code\n}\n</code></pre>\n\n<p>Notice the private set - the ctor sets it up. So, i changed it to used an interface, and that's what i've mocked:</p>\n\n<pre><code>public IWebSiteSettings WebSiteSettings { get; private set; }\n</code></pre>\n\n<p>I then created a \"FakeWebSiteSettings\", which mocks the Http Context in order for it to read the HTTP headers.</p>\n\n<p>The problem is, when i run the test, i get a <strong>NotSupportedException:</strong></p>\n\n<blockquote>\n  <p>Invalid setup on a non-virtual (overridable in VB) member: x => x.WebSiteSettings</p>\n</blockquote>\n\n<p>Here's the relevant mocking code:</p>\n\n<pre><code>var mockWebSiteSettings = new Mock&lt;FakeWebSiteSettings&gt;();\nvar mockController = new Mock&lt;MyController&gt;(SomeRepository);\nmockController.Setup(x =&gt; x.WebSiteSettings).Returns(mockWebSiteSettings.Object);\n\n_controller = mockController.Object;\n\nvar httpContextBase = MvcMockHelpers.FakeHttpContext();\nhttpContextBase.Setup(x =&gt; x.Request.ServerVariables).Returns(new NameValueCollection\n    {\n        {\"HTTP_HOST\",\"localhost.www.mydomain.com\"}, \n});\n_controller.SetFakeControllerContext(httpContextBase.Object);\n</code></pre>\n\n<p>If i make the <code>WebsiteSettings</code> property <strong>virtual</strong> - the test passes.</p>\n\n<p>But i can't understand why i need to do this. I'm not actually <em>overriding</em> the property, i'm simply mocking how it is setup. </p>\n\n<p>Am i missing something, or doing this wrong?</p>\n"},{"tags":["c#","asp.net-mvc","razor","back-button"],"answer_count":3,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":120,"score":5,"question_id":12978285,"title":"Prevent back button","body":"<p>I am using Razor on ASP.NET MVC with C#.</p>\n\n<p>I am calling an external web page to process a credit card and it returns to me. I then display a receipt. </p>\n\n<p>I'd like to prevent them from going back to the previous screen. </p>\n\n<p>I do not have an underlying cs page, like asp since these are .cshtml files, to grab the event.</p>\n\n<p>This receipt page is a View so I cannot put JavaScript in the header since it would affect every page using it.</p>\n\n<p>Anyone know how I prevent the back button in this circumstance?</p>\n"},{"tags":["asp.net-mvc","typescript"],"answer_count":6,"favorite_count":6,"up_vote_count":13,"down_vote_count":0,"view_count":1195,"score":13,"question_id":12680486,"title":"How do I add typescript to an existing Asp.Net MVC project?","body":"<p>I love the idea behind typescript, but can't seem to figure out how to include it in an ASP.Net MVC project. I've already installed the Visual Studio extension, but I can't seem to find an example or documentation on how to add <code>*.ts</code> files which compile into <code>*.js</code> files.</p>\n\n<p>Edit: Actually, should I replicate the way that the Win8 example <code>.jsproj</code> includes and handles <code>.ts</code> files? Or will that only work for HTML/JS Win8 projects?</p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":205,"score":0,"question_id":11923149,"title":"ASP MVC - Front End & Back End","body":"<p>After seeing some cool videos of how easy it to make <code>ASP.NET MVC 4.0/4.5 Azure</code> project with code first which gives u CRUD so easy,</p>\n\n<p>My question is : <strong>How I split the page for Admin / End User ?</strong> ( Assume you using the mvc 4.0 application template )</p>\n\n<p><em>For example :</em> If I make ItemControler with Item model in my web www.xxx.com/Item, I wanna www.xxx.com/Item to show my items for end uesrs in my design, but all the crud operation for Item in Admin/Item or something like that ( with Rules and etc ),</p>\n\n<p>Are there any examples I can out there?  </p>\n\n<p>My Goal is to use Azure Site + DB ( If I have already mentions Azure , what's the difference between Site &amp; Service?! )</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12977103,"title":"asp.net mvc custom authorize roles attribute","body":"<p>I need to have the following roles applied to most of my controllers like </p>\n\n<pre><code>this[Authorize(Roles=\"SysAdmin,Admin,Support\")].\n</code></pre>\n\n<p>How can I refactor this code in base controller without specifying roles for every controller?\nThanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12977047,"title":"how to redirect to aspx page in a controller action","body":"<p>is it possible to redirect to an aspx page in an (asp.net-mvc3 )controller action?\n What should be  the return type of the action (ActionResult?) and which redirect method should be called (RedirectToAction?).</p>\n\n<p>BR,</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","error-handling"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2063,"score":1,"question_id":2825640,"title":"Log client side errors to the server","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/119432/logging-clientside-javascript-errors-on-server\">Logging Clientside JavaScript Errors on Server</a>  </p>\n</blockquote>\n\n\n\n<p>How can I log client side javascript errors to the server? I'm using jQuery and MVC.</p>\n"},{"tags":[".net","asp.net-mvc","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":12976784,"title":"How to create an Editor Template for Boolean? (.EditorFor<>)","body":"<p>I'm trying to define a Boolean.cshtml to use with EditorFor using the following code:</p>\n\n<pre><code>@{\n   var o = ViewData.ModelMetadata;\n}\n\n&lt;div class=\"editor-for\"&gt;\n    @Html.CheckBox(o.PropertyName,\n                   ViewData.Model,\n                   new { @class=\"tickbox-single-line\" })\n&lt;/div&gt;\n</code></pre>\n\n<p>Unfortunately, Model is null and I get the following non-descriptive error:</p>\n\n<blockquote>\n  <p>CS1973: 'System.Web.Mvc.HtmlHelper' has no applicable method named 'CheckBox' but appears to have an extension method by that name. Extension methods cannot be dynamically dispatched. Consider casting the dynamic arguments or calling the extension method without the extension method syntax.</p>\n</blockquote>\n\n<p>After reading this I tried the following:</p>\n\n<pre><code>@Html.CheckBox(o.PropertyName,\n               ViewData.Model ?? false,\n               new { @class=\"tickbox-single-line\" })\n</code></pre>\n\n<p>But I get exactly the same error. The View code is simply:</p>\n\n<pre><code>@Html.EditorFor(m =&gt; m.RememberMe)\n</code></pre>\n\n<p>What am I doing wrong in Boolean.cshtml?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","image","razor"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":944,"score":1,"question_id":9536051,"title":"ASP.NET MVC Displaying Multiple Images from Database. How to- Efficiently","body":"<p>I've got a .NET MVC app where I need to display a list of images with some text. The images and text are stored in the database in the same table, and returned in my simple model. What I haven't figured out is how to display all of these images without hitting the database again for every single image.</p>\n\n<p>I see several examples, such as:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/4142492/asp-net-mvc-loading-images-from-database-and-displaying-their-in-view\">ASP.NET MVC: loading images from database and displaying their in view</a></li>\n<li><a href=\"http://stackoverflow.com/questions/2448150/problem-with-displaying-image-from-db-using-asp-net-mvc-2\">Problem with displaying image from DB using asp.net MVC 2</a></li>\n</ul>\n\n<p>and others, but they all go back to the database for every image. That doesn't make sense, because there could be dozens of images, and I don't want to keep making single calls to the database when I already have the image data returned in my model. </p>\n\n<p>I'm new to ASP.NET MVC, (and also never worked with images stored in a DB before) and I think I am just missing something, and that it can't be this difficult. If anyone has solved this, I'd love to hear it, and I think others would too, based on the other questions already here.</p>\n"},{"tags":["asp.net-mvc","ext.net"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":195,"score":3,"question_id":12921793,"title":"Ext.NET not integrating with ASP.NET MVC 4","body":"<p>I created a MVC 4 web application in VS 2012.\nDownloaded Ext.Net 2 via NuGet.\nIn my view/home/index.cshtml file, I am trying to type :</p>\n\n<pre><code>@Html.X().ResourceManager()\n</code></pre>\n\n<p>I am getting the following when I run:</p>\n\n<blockquote>\n  <p>CS1061: 'System.Web.Mvc.HtmlHelper' does not contain a definition for 'X' and no extension method 'X' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)</p>\n</blockquote>\n\n<p>Here's my web.config</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=169433\n  --&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;section name=\"extnet\" type=\"Ext.Net.GlobalConfig\" requirePermission=\"false\" /&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"DefaultConnection\" connectionString=\"Data Source=(LocalDb)\\v11.0;Initial Catalog=aspnet-MvcApplication3-20121016104640;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnet-MvcApplication3-20121016104640.mdf\" providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"2.0.0.0\" /&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"false\" /&gt;\n    &lt;add key=\"PreserveLoginUrl\" value=\"true\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\" /&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/Login\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Optimization\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;/namespaces&gt;\n      &lt;controls&gt;\n        &lt;add tagPrefix=\"ext\" namespace=\"Ext.Net\" assembly=\"Ext.Net\" /&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n    &lt;httpHandlers&gt;\n      &lt;add path=\"*/ext.axd\" verb=\"*\" type=\"Ext.Net.ResourceHandler\" validate=\"false\" /&gt;\n    &lt;/httpHandlers&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"DirectRequestModule\" type=\"Ext.Net.DirectRequestModule, Ext.Net\" /&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" /&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" /&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-Integrated-4.0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness32\" responseBufferLimit=\"0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness64\" responseBufferLimit=\"0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-Integrated-4.0\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" type=\"System.Web.Handlers.TransferRequestHandler\" preCondition=\"integratedMode,runtimeVersionv4.0\" /&gt;\n      &lt;add name=\"DirectRequestHandler\" verb=\"*\" path=\"*/ext.axd\" preCondition=\"integratedMode\" type=\"Ext.Net.ResourceHandler\" /&gt;\n      &lt;add name=\"ExtNetHandler\" path=\"*/ext.axd\" verb=\"*\" type=\"Ext.Net.ResourceHandler\" /&gt;\n    &lt;/handlers&gt;\n    &lt;modules&gt;\n      &lt;add name=\"DirectRequestModule\" preCondition=\"managedHandler\" type=\"Ext.Net.DirectRequestModule, Ext.Net\" /&gt;\n    &lt;/modules&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Helpers\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\" /&gt;\n        &lt;assemblyIdentity name=\"Newtonsoft.Json\" publicKeyToken=\"30ad4fe6b2a6aeed\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-4.0.0.0\" newVersion=\"4.5.7\" /&gt;\n        &lt;assemblyIdentity name=\"Ext.Net.Utilities\" publicKeyToken=\"2c34ac34702a3c23\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-2.0.0\" newVersion=\"2.0.1\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.0.0.0\" newVersion=\"4.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.WebPages\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;extnet theme=\"Gray\" /&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":100,"score":3,"question_id":12826697,"title":"RestfulRouting for .Net Changing default 'id' param","body":"<p>Pretty basic question but I cant seem to find it in the documentation. I've been integrating <a href=\"http://restfulrouting.com\" rel=\"nofollow\">RestfulRouting</a> (via nuget) into an Mvc 4 app but there are situations where it would be nice to tweak the the params, either change the name or have more than one argument into the controller action.  </p>\n\n<p>e.g.</p>\n\n<pre><code>/resource/:id/:slug\n\npublic ActionResult Show(int id, string slug) { return View(); }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/resource/:custom_param_name\n\npublic ActionResult Show(string custom_param_name) { return View(); }\n</code></pre>\n\n<p>Is there an example or documentation that covers this scenario?</p>\n"},{"tags":["asp.net-mvc","unobtrusive-validation","html.dropdownlistfor"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":160,"score":1,"question_id":11417643,"title":"MVC DropDownListFor and StringLength Attribute Not Playing Well together","body":"<p>My stringlength validation always fails on dropdownlists with a string value.</p>\n\n<p>Here is my model:</p>\n\n<pre><code>[Required(ErrorMessage = \"Required\")]\n[StringLength(2, MinimumLength = 2)]\n[Display(Name = \"Home Address State\")]\npublic string HomeAddressState { get; set; }\n</code></pre>\n\n<p>Here is my view:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.HomeAddressState, new SelectList(ViewBag.States, \"Value\", \"Text\"), string.Empty)\n@Html.ValidationMessageFor(model =&gt; model.HomeAddressState)\n</code></pre>\n\n<p>Here is the html output:</p>\n\n<pre><code>&lt;select data-val=\"true\" data-val-length=\"The field Home Address State must be a string with a minimum length of 2 and a maximum length of 2.\" data-val-length-max=\"2\" data-val-length-min=\"2\" data-val-required=\"Required\" id=\"HomeAddressState\" name=\"HomeAddressState\"&gt;&lt;option value=\"\"&gt;&lt;/option&gt;\n&lt;option value=\"CA\"&gt;California&lt;/option&gt;\n&lt;option value=\"IL\"&gt;Illinois&lt;/option&gt;\n&lt;option value=\"IN\"&gt;Indiana&lt;/option&gt;\n&lt;option value=\"OH\"&gt;Ohio&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>No matter what option is selected, the StringLength validation fails client-side. What am I doing incorrectly?</p>\n"},{"tags":["c#","asp.net-mvc","addmodelerror"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2913,"score":6,"question_id":2221721,"title":"ModelState.AddModelError on form level with ASP.NET MVC 2 RC","body":"<p>In the previous versions on ASP.NET MVC, you could use <code>ModelState.AddModelError(\"**_FORM**\", \"error\")</code> to make an error on the form-level instead of a property-level. This seems not to work anymore with the new RC of ASP.NET MVC 2.</p>\n\n<p>Is there another way how to do it? I use <code>&lt;%= Html.ValidationSummary() %&gt;</code> at my View-file...</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12974957,"title":"ASP.Net MVC4 bind a \"create view\" to a model that contains List","body":"<p>Hello out there in internet land, I have an interesting conundrum for you:</p>\n\n<p>Is it possible to bind a view for creating an object, if that object contains a list of other objects purely using MVC views/partial views?</p>\n\n<p>Man, that came out all complicated like...let me give you a quick code example of what I mean:</p>\n\n<pre><code>Models:\npublic class ComplexObject\n{\n    public string title { get; set; }\n    public List&lt;ContainedObject&gt; contents { get; set; }\n}\n\npublic class ContainedObject\n{\n    public string name { get; set; }\n    public string data { get; set; }\n}\n</code></pre>\n\n<p>Nice and simple right?  Okay, so a strongly typed view for creating one of these is really simple for the \"title\" property:</p>\n\n<pre><code>something like:\n@Html.TextBoxFor(x =&gt; x.title)\n</code></pre>\n\n<p>but I can't figure out a good way to bind a list of \"ContainedObjects\" using MVC.  The closest that I got was to create a strongly-typed IEnumerable partial view with the \"List\" scaffold template and include that on the page.  </p>\n\n<p>Without adding styling etc, the default look of that partial view is:</p>\n\n<pre><code>@model IEnumerable&lt;MVCComplexObjects.Models.ContainedObject&gt;\n\n&lt;p&gt;\n@Html.ActionLink(\"Create New\", \"Create\")\n&lt;/p&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            @Html.DisplayNameFor(model =&gt; model.name)\n        &lt;/th&gt;\n        &lt;th&gt;\n            @Html.DisplayNameFor(model =&gt; model.data)\n        &lt;/th&gt;\n        &lt;th&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.data)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.ActionLink(\"Edit\", \"Edit\", new { /* id=item.PrimaryKey */ }) |\n            @Html.ActionLink(\"Details\", \"Details\", new { /* id=item.PrimaryKey */ }) |\n            @Html.ActionLink(\"Delete\", \"Delete\", new { /* id=item.PrimaryKey */ })\n        &lt;/td&gt;\n    &lt;/tr&gt; \n}\n\n&lt;/table&gt;\n</code></pre>\n\n<p>But frankly, I can't figure out how to include that as bound to the creation of a new ComplexObject.  In other words, I can show a list of already existing ContainedObjects by binding as so:\n    @Html.Partial(\"PartialCreate\", Model.contents)</p>\n\n<p>But what I really want I guess, is something like:</p>\n\n<pre><code>@Html.PartialFor(\"PartialCreate\", x =&gt; x.contents)\n</code></pre>\n\n<p>I should note that I didn't have too much trouble coding around this with Javascript (I'll include the code below) but I'd really like to know if there's a way to do this purely with MVC.  I'm a recent convert from WebForms (where I'd pretty much just replaced all of my postbacks with AJAX calls anyway) and this sort of thing comes up a lot in projects that I work on.</p>\n\n<p>Anyway, here's how I currently do it:</p>\n\n<p>Html - </p>\n\n<pre><code>Name: &lt;input type=\"text\" id=\"enterName\" /&gt;\nData: &lt;input type=\"text\" id=\"enterData\" /&gt;\n&lt;a id=\"addItem\"&gt;Add Item&lt;/a&gt;\n\n&lt;ul id=\"addedItems\"&gt;\n&lt;/ul&gt;\n\n&lt;a id=\"saveAll\"&gt;Save Complex Object&lt;/a&gt;\n</code></pre>\n\n<p>Javascript - </p>\n\n<pre><code>&lt;script&gt;\nvar contents = [];\n$(document).ready(function () {\n\n    $('#addItem').click(function () {\n        var newItem = { name: $('#enterName').val(), data: $('#enterData').val() };\n        contents.push(newItem);\n        $('#addedItems').html('');\n        for (var i = 0; i &lt; contents.length; i++) {\n            $('#addedItems').append(\n                \"&lt;li&gt;\" + contents[i].name + \", \" + contents[i].data + \"&lt;/li&gt;\"\n            );\n        }\n    });\n\n    $('#saveAll').click(function () {\n\n        var toPost = { title: \"someTitle\", contents: contents };\n\n        $.ajax({\n                url: '/Home/SaveNew',\n                type: 'POST',\n                data: JSON.stringify(toPost),\n                dataType: 'json',\n                contentType: 'application/json; charset=utf-8',\n                success: function (data, textStatus, jqXHR) {\n                    alert(\"win\");\n                },\n                error: function (objAJAXRequest, strError) {\n                    alert(\"fail\");\n                }\n            });\n    });\n\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>And that's not a terrible solution or anything, I just don't want to have to implement Javascript calls everytime I want to save a new object, but use standard Razr code everywhere else.  I'd like to be reasonably consistent across the board.</p>\n\n<p>Has anyone else run into this issue and found a solution?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12971663,"title":"Style bundling for MVC4 not using min files","body":"<p>I have 4 files:</p>\n\n<ul>\n<li>a.css</li>\n<li>a.min.css</li>\n<li>b.css</li>\n<li>b.min.css</li>\n</ul>\n\n<p>they are added to bundle in following way:</p>\n\n<pre><code>bundles.Add(new StyleBundle(\"~/Content/acss\").Include(\"~/Content/a.css\", \"~/Content/b.css\"));\n</code></pre>\n\n<p>When running application in debug all is rendered properly:</p>\n\n<pre><code> &lt;link href=\"/Content/a.css\" rel=\"stylesheet\"/&gt;\n &lt;link href=\"/Content/b.css\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p>However when running in release I have it rendered in following way:</p>\n\n<pre><code> &lt;link href=\"/Content/acss?v=mUdXE7_fXKjICzE_XteIB1Igy6TekX1QFh-BtY6fFUw1\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p>And inside I'm founding:</p>\n\n<blockquote>\n  <p>/* Minification failed. Returning unminified contents.\n  (24,708): run-time error CSS1030: Expected identifier, found '.'</p>\n</blockquote>\n\n<p>So I have two questions:</p>\n\n<ol>\n<li>Why it is not working according to docs online? All information says that it chooses min file if available for release version?</li>\n<li>How to make it working according to documentation?</li>\n</ol>\n"},{"tags":["c#","asp.net-mvc","list"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12973807,"title":"Pass a list from clientside to serverside in MVC C#","body":"<p>Below is the code I'm using.</p>\n\n<pre><code>UpdateMultipulGroupContactId = \"1,2,3,4\";\n</code></pre>\n\n<p>Client Side function</p>\n\n<pre><code>function UpdateMultipulGroup() {\n    jQuery.ajax({\n        url: \"/Json/Contact_Update_Groups_NickName\",\n        type: \"POST\",\n        data: {\n            rid: UpdateMultipulGroupContactId,\n            gids: strArray,\n            nickname: 'abc'\n        },\n        dataType: \"html\",\n        success: function (data) {\n            var data = JSON.parse(data);\n            alert(data.message);\n            $(\"#Notes\" + EditContactIdNotes).html($(\"#txtNotes\").val());\n            CloseLightBox();\n        },\n        error: function (error) {\n            alert(error);\n        }\n    });\n\n}\n</code></pre>\n\n<p>Server Side Function</p>\n\n<pre><code>public ActionResult Contact_Update_Groups_NickName(long rid, List&lt;long&gt; gids, string nickname)\n</code></pre>\n\n<p>I tried using arrays but I'm getting null values all the time.</p>\n\n<p>How can I pass the <code>UpdateMultipulGroupContactId</code> as a list from this function?</p>\n"},{"tags":["asp.net-mvc","integration-testing","iis-express","phantomjs","jake"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12224490,"title":"How can I run and stop IISExpress from jake","body":"<p>I'm able to kick off IIS express to run my mvc 3 app with the following coffeescript line:</p>\n\n<pre><code>iisex = jake.createExec(['iisexpress /path:' + process.cwd() + ' /port:9090 /systray:false'], {printStdout: true})\n#listening code here\niisex.run()\n</code></pre>\n\n<p>I then run some jasmine tests using</p>\n\n<pre><code>ex = jake.createExec(['phantomjs run_jasmine_test.coffee http://localhost:9090/app/applebees_testrunner.html'], {printStdout: true});\n</code></pre>\n\n<p>Test pass and now I want to kill IISExpress.</p>\n\n<p>The problem is that now I have a long running process and the process wants me to 'press q' to stop the server.  Is there a way to send a q to the running process so that the server will stop?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2","user-authentication"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":113,"score":0,"question_id":12970067,"title":"Login Security: How to Disable Multiple login","body":"<p>I want to disable multiple login on my web. For example when a user already login on the system. System should disable the user to login again on another browser or computer. Currently I tried doing this by using the database. I have a column like login_status, Once the user is login it will update to 1 and 0 for offline. If you the user closes the the browser without logging out. It will remain login, the user should ask the admin to log him out. The problem is we want to automatically logout the user by max of 30min idle time. I'm having a hard time how to do this.</p>\n\n<p>Is there a way to disable multiple login and determine if the user was idle and automatically log him out? I'm thinking about cookies and session.</p>\n"},{"tags":["sql","asp.net-mvc","linq","data","orchardcms"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":758,"score":0,"question_id":7810751,"title":"Orchard CMS. how to Query the Orchard Database?","body":"<p>I need to Query existing Tables inside my Orchard database. These tables are coming from an existing ecommerce website. So my question is: How do I query tables that contain data inside my Orchard database and have the data displayed on the Admin/Editor side. And finally on the front end/user side when the page is published? i have All the Models, Drivers, Handlers and Views created. I'm just stumped on where to Query the DB.</p>\n\n<p>Thanks</p>\n\n<p>Oceantrain</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","unit-testing","razor","razorgenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":11792971,"title":"How can I install RazorGeneratorSupportForVbhtmlFiles?","body":"<p>I read David Ebbo's <a href=\"http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html\" rel=\"nofollow\">blog post</a> about precompiling razor views for use in unit testing.  The original project only supports C# (cshtml) files, but there is a fork <a href=\"http://razorgenerator.codeplex.com/SourceControl/network/forks/1QuickNick/RazorGeneratorSupportForVbHtmlFiles\" rel=\"nofollow\">fork</a> by 1QuickNick which is supposed to have added support for VB (vbhtml) files to the project.</p>\n\n<p>There's no nuget package for the fork that I see, so I'm not quite sure how to install it.  I cloned the fork with hg on my machine and built it, but I cannot figure out how to make it available as a custom tool.  I put the generated DLL's (RazorGenerator.Core.dll and RazorGenerator.dll) into my web project's lib folder and added a reference, but I get an error when I try to use <code>RazorGenerator</code> as a custom tool.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12942021,"title":"MVC 4 DomainRoute to Area uses wrong instance from RouteTable","body":"<p>I have an ASP.NET MVC 4 app where I have two areas:</p>\n\n<ul>\n<li>Backstage</li>\n<li>Signup</li>\n</ul>\n\n<p>I have a class called <code>DomainRoute</code> that makes it possible to route an entire subdomain to an area:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Text.RegularExpressions;\nusing System.Web.Mvc;\nusing System.Web.Routing;\n\nnamespace Admin.Web.PresentationLogic\n{\n    /// &lt;summary&gt;\n    /// DomainRoute is an extension of the default Route, that makes it possible to route domains and subdomains the specific controllers.\n    /// &lt;/summary&gt;\n    public class DomainRoute : Route\n    {\n        private string _subDomain;\n\n        private string[] _namespaces;\n\n        /// &lt;summary&gt;\n        /// Initializes a new instance of the &lt;see cref=\"DomainRoute\"/&gt; class.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"subDomain\"&gt;The sub domain.&lt;/param&gt;\n        /// &lt;param name=\"url\"&gt;The URL format.&lt;/param&gt;\n        /// &lt;param name=\"defaults\"&gt;The defaults.&lt;/param&gt;\n        public DomainRoute(string subDomain, string url, RouteValueDictionary defaults)\n            : base(url, defaults, new MvcRouteHandler())\n        {\n            this._subDomain = subDomain;\n        }\n\n        /// &lt;summary&gt;\n        /// Initializes a new instance of the &lt;see cref=\"DomainRoute\" /&gt; class.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"subDomain\"&gt;The sub domain.&lt;/param&gt;\n        /// &lt;param name=\"url\"&gt;The URL format.&lt;/param&gt;\n        /// &lt;param name=\"defaults\"&gt;The defaults.&lt;/param&gt;\n        /// &lt;param name=\"namespaces\"&gt;The namespaces.&lt;/param&gt;\n        public DomainRoute(string subDomain, string url, RouteValueDictionary defaults, string[] namespaces)\n            : base(url, defaults, new MvcRouteHandler())\n        {\n            this._subDomain = subDomain;\n            this._namespaces = namespaces;\n        }\n\n        /// &lt;summary&gt;\n        /// Returns information about the requested route.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"httpContext\"&gt;An object that encapsulates information about the HTTP request.&lt;/param&gt;\n        /// &lt;returns&gt;\n        /// An object that contains the values from the route definition.\n        /// &lt;/returns&gt;\n        public override RouteData GetRouteData(System.Web.HttpContextBase httpContext)\n        {\n            // Request information\n            string requestDomain = httpContext.Request.Headers[\"HOST\"];\n\n            if (!string.IsNullOrEmpty(requestDomain))\n            {\n                if (requestDomain.IndexOf(\":\") &gt; 0)\n                {\n                    requestDomain = requestDomain.Substring(0, requestDomain.IndexOf(\":\"));\n                }\n            }\n            else\n            {\n                requestDomain = httpContext.Request.Url.Host;\n            }\n\n            var index = requestDomain.IndexOf(\".\");\n\n            if (index &lt; 0)\n            {\n                return RouteTable.Routes[\"Default\"].GetRouteData(httpContext);\n            }\n\n            var subDomain = requestDomain.Substring(0, index);\n\n            if (!String.IsNullOrWhiteSpace(subDomain))\n            {\n                if (this._subDomain.Equals(subDomain, StringComparison.InvariantCultureIgnoreCase))\n                {\n                    RouteData data = new RouteData(this, this.RouteHandler);\n\n                    // Add defaults first \n                    if (Defaults != null)\n                    {\n                        foreach (KeyValuePair&lt;string, object&gt; item in Defaults)\n                        {\n                            data.Values[item.Key] = item.Value;\n                        }\n                    }\n\n                    var pathRegex = this.CreateRegex(Url);\n                    var requestPath = httpContext.Request.AppRelativeCurrentExecutionFilePath.Substring(2) + httpContext.Request.PathInfo;\n\n                    // Match domain and route\n                    Match pathMatch = pathRegex.Match(requestPath);\n\n                    // Iterate matching path groups \n                    for (int i = 1; i &lt; pathMatch.Groups.Count; i++)\n                    {\n                        Group group = pathMatch.Groups[i];\n                        if (group.Success)\n                        {\n                            string key = pathRegex.GroupNameFromNumber(i);\n                            if (!string.IsNullOrEmpty(key) &amp;&amp; !char.IsNumber(key, 0))\n                            {\n                                if (!string.IsNullOrEmpty(group.Value))\n                                {\n                                    data.Values[key] = group.Value;\n                                }\n                            }\n                        }\n                    }\n\n                    if (!data.Values.ContainsKey(\"action\"))\n                    {\n                        data.Values.Add(\"action\", \"Index\");\n                    }\n\n                    data.DataTokens[\"Namespaces\"] = this._namespaces;\n                    data.DataTokens[\"area\"] = data.Values[\"area\"] ?? this._subDomain;\n\n                    return data;\n                }\n            }\n\n            return RouteTable.Routes[\"Default\"].GetRouteData(httpContext);\n        }\n\n        /// &lt;summary&gt;\n        /// Creates the regex.\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"source\"&gt;The source.&lt;/param&gt;\n        /// &lt;returns&gt;Returns the Regex for the source.&lt;/returns&gt;\n        private Regex CreateRegex(string source)\n        {\n            // Perform replacements\n            source = source.Replace(\"/\", @\"\\/?\");\n            source = source.Replace(\".\", @\"\\.?\");\n            source = source.Replace(\"-\", @\"\\-?\");\n            source = source.Replace(\"{\", @\"(?&lt;\");\n            source = source.Replace(\"}\", @\"&gt;([a-zA-Z0-9_]*))\");\n\n            return new Regex(\"^\" + source + \"$\");\n        }\n    }\n}\n</code></pre>\n\n<p>When I register the areas, I do this:</p>\n\n<pre><code>context.Routes.Add(\"Signup_default\", \n    new DomainRoute(\"signup\", \"{controller}/{action}/{id}\", \n    new RouteValueDictionary(new { area = \"Signup\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }), \n    new string[] { \"Admin.Web.Areas.Signup.Controllers\" }));\n</code></pre>\n\n<p>So, the problem has to do with the way the <code>DomainRoute</code>'s <code>GetRouteData</code> method is executed.</p>\n\n<p>Whenever I try to access <code>signup.localhost</code> the instance of the <code>DomainRoute</code> class is the one that I used when registering the Backstage area.</p>\n\n<p>I tried disabling the Backstage area, and then the Signup area worked.</p>\n\n<p>It uses the instance of <code>DomainRoute</code> that occurs first in the <code>RouteTable</code>.</p>\n\n<p>What am I missing?</p>\n"},{"tags":["javascript","asp.net-mvc","json","date"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":12972632,"title":"The best way to deal with dates in a ASP.NET MVC - Javascript application","body":"<p>Our application heavilly relies on javascript (jQuery). So there are lots of 'application/json' requests.</p>\n\n<p>We've been struggling with dates for some time, but despite our efforts we couldn't \nfigure out how to deal with it in ASP.NET MVC application.</p>\n\n<p><strong>Here what we want:</strong></p>\n\n<ol>\n<li>Serialize/deserialize DateTime objects on the server side (preferably with DateTimeKind.Utc).</li>\n<li>Work with Date object on the client side. Work with it in UTC. Format dates somehow.</li>\n</ol>\n\n<p><strong>Here are problems:</strong></p>\n\n<ol>\n<li><p>Date client object is always with end-user's timezone. <code>JSON.stringify(new Date())</code> automatically does a shift.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1486476/javascript-json-strigify-changes-time-of-date-because-of-utc\">Javascript: JSON Strigify changes time of date because of UTC!</a></p>\n\n<p>This question helper a bit, but we need to remember to shift dates before sending it to the server.\nWe also need to remember that we need a shift once we do <code>new Date('2012-10-19T10:23:47.778Z')</code>\nWe know that JSON is not aware of dates, but it would be nice to have analogue of JSON.parse that would parse dates.</p></li>\n<li><p>We use Newton Json.net to serialize/deserialize dates, but it does it in DateTimeKind.Unspecified</p></li>\n</ol>\n\n<p><strong>Question:</strong></p>\n\n<blockquote>\n  <p>Is there an elegant way to work with dates both on the server and\n  client?\n      We need it as a cross-cutting thing in the whole application.</p>\n</blockquote>\n\n<p><strong>UPD:</strong> </p>\n\n<p>I had to put it more clearly. In our application we don't need take into account client time zones since we operate only with dates.</p>\n\n<p>So if server returns <code>2012-10-19T10:23:47.778Z'</code>, we need Date object:</p>\n\n<p><code>Fri Oct 19 2012 10:23:47 GMT+0300 (Kaliningrad Standard Time)</code></p>\n\n<p>Not</p>\n\n<p><code>Fri Oct 19 2012 13:23:47 GMT+0300 (Kaliningrad Standard Time)</code> (Date is shifted)</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":52,"score":-2,"question_id":12973035,"title":"Send html tag from view to controller with jquery","body":"<p>how to Send html tag from view to controller with jquery?\nplease help me.\nfor example with editor</p>\n"},{"tags":["asp.net-mvc","entity-framework","multi-select","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12972300,"title":"MVC MultiSelect Control for Day of week","body":"<p>I have a ASP.NET MVC 4 project with EF and I have a table <em>Orders</em> with a field <em>ShipmentDay</em> varchar(7)/string where I want to save in the database in witch days of the week the order can be shipped : 1000100 for Monday and Friday.</p>\n\n<p>Right now I have a ListBox :</p>\n\n<pre><code>@Html.ListBoxFor(model =&gt; model.ShipmentDay, new MultiSelectList(ViewBag.ShipmentDay))\n\nList&lt;string&gt; lbSDay = new List&lt;string&gt;();\nZileLiv.Add(\"Monday\"); ...\n\npublic ActionResult Create()\n{\n    ViewBag.lbSDay = lbSDay ;\n    return View();\n}\n</code></pre>\n\n<p><strong>Q:</strong> How can I make a custom multiselect control to select the days of week ?</p>\n"},{"tags":["asp.net-mvc","json","iis","iis7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12894409,"title":"Post/Get works with VS Development server but not with IIS7","body":"<p>I have created a web page using Asp.Net MVC 4 (VS2010 SP1, Windows 7). It also has an api through what I can make a search or upload something (data and files). When I deploy the page on the development server of VS2010 SP1, all works fine but when I select IIS (IIS7), the api does not work any more. The \"IsSuccessStatusCode\" seems to be false. But the page itself works and can be acessed from other machines. </p>\n\n<p>This is the address I use for the inbuilt dev server: \"http://localhost:56272/api/\"\nAnd this I use for IIS: \"http://127.0.0.1/api/\"</p>\n\n<p>I have created a virtual directory for IIS (done by VS2010). Do I need to configure something in addition or could it be a routing problem that only exists for IIS?</p>\n\n<p>This is my client side - class MyService - for the GET:</p>\n\n<pre><code> public MyService(string serviceAdress) //\"http://127.0.0.1/api/\"\n        {\n            this.serviceAdress = new Uri(serviceAdress); //of type Uri\n            client = new HttpClient();\n            client.DefaultRequestHeaders.Accept.Add(\n                new MediaTypeWithQualityHeaderValue(\"application/json\"));\n        }\n    public Task&lt;IEnumerable&lt;Item&gt;&gt; SearchByTag(string tag)\n    {\n        client.BaseAddress = serviceAdress;\n        var getStuffCall=client.GetAsync(\"Search/ByTag/\" + tag);\n        var r=getStuffCall.ContinueWith(\n            t =&gt;t.Result.IsSuccessStatusCode? (t.Result.Content.ReadAsAsync&lt;IEnumerable&lt;Item&gt;&gt;().Result):new List&lt;Item&gt;()\n            );\n        return r;\n    }\n</code></pre>\n\n<p>My server side looks like this:</p>\n\n<pre><code>public class SearchController : ApiController\n    {\n        [HttpGet]\n        public IEnumerable&lt;Shared.Item&gt; ByTag(string search)\n        {....}\n    }\n</code></pre>\n\n<p>And this is the routing in WebApiConfig:</p>\n\n<pre><code>config.Routes.MapHttpRoute(\n            name: \"SearchApi\",\n            routeTemplate: \"api/Search/{action}/{search}\",\n            defaults: new\n                          {\n                              controller=\"Search\"                                  \n                          }\n        );\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":131,"score":3,"question_id":12797487,"title":"Application_EndRequest triggered before request end?","body":"<p>I have some simple classes that need to be disposed a the end of the request.</p>\n\n<p>For that end I call the <code>Dispose</code> method on those objects from the <code>Application_EndRequest</code> event in <code>Global.asax</code>.</p>\n\n<p>This \"works fine on my machine\" but causes some problems on my production server where I get <code>Cannot access a disposed object.</code> This happens in some MVC helpers.</p>\n\n<p>It seemed to me like Application_EndRequest is triggered at the end of the request. Is this not the case? Is there another event I should be using to dispose my objects?</p>\n"},{"tags":["c#","asp.net-mvc","wcf","castle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":8399376,"title":"WCF Castle Client Proxy leaving Channel Open","body":"<p>I am using Castle WCF Facility to initialise a client proxy using the following configuration: </p>\n\n<pre><code>  &lt;component\n id=\"ComponentID\"\n type=\"SomeType, SomeType\"\n wcfEndpointConfiguration=\"WCFConfig\"\n lifestyle=\"PerWebRequest\" &gt;\n&lt;/component&gt;\n</code></pre>\n\n<p>The problem I'm having is that in live I'm ending up with a large memory leak. Having analysed this with a memory profiler, I seem to have a large number of WCF Channels left in memory. Am I right to expect Castle WCF Facility to clean this up at the end of the web request?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12970360,"title":"Advanced JTable list of data","body":"<p>I would like to create listbox in option \"add new record\" JTable and list of items in Jtable.  </p>\n\n<p>My model:</p>\n\n<pre><code>  namespace CRM.ViewModels.Administrator.Dictionary.OfferNewInformation\n    {\n        public class DictionaryNewInfoListModel : DictionaryListModel\n        {\n            public string Description { get; set; }\n            public bool IsActiveYN { get; set; }\n            public bool CPGroupType { get; set; }\n            public bool TCPGroupType { get; set; }\n            public bool CCGroupType { get; set; }\n            public bool HOGroupType { get; set; }\n            public bool TSGroupType { get; set; }\n            public int CityId { get; set; }\n            public List&lt;DictionaryNewInfoSupportList&gt; DeestynationName { get; set; }\n\n          //  public IList&lt;SelectListItem&gt; DestinationList { get; set; }\n\n        }\n    }\n</code></pre>\n\n<p>Important thing (this class have list Id and Name): </p>\n\n<pre><code>public List&lt;DictionaryNewInfoSupportList&gt; DeestynationName { get; set; }\n</code></pre>\n\n<p>Class</p>\n\n<pre><code>public class DictionaryNewInfoSupportList\n{\n    public int Id;\n    public string Name;\n}\n</code></pre>\n\n<p>In View I show example:</p>\n\n<pre><code>fields: {\n                    Id:\n                    {\n                        key: true,\n                        create: false,\n                        edit: false,\n                        list: false\n                    },\n                    Description: {\n                        title: 'Treść'\n\n                    }/*,\n                    DeestynationName: {\n                        title: 'Treść'\n\n                    }*/,\n                    CPGroupType: {\n                        title: \"CP\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    TCPGroupType: {\n                        title: \"TCP\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    CCGroupType: {\n                        title: \"CC\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    HOGroupType: {\n                        title: \"Centrala\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    },\n                    TSGroupType: {\n                        title: \"Kasjer\",\n                        edit: true,\n                        type: 'checkbox',\n                        values: { 'false': 'Nie', 'true': 'Tak' }\n                    }\n</code></pre>\n\n<p>but as you can see I don`t know how declare DeestynationName.</p>\n\n<p>List of items(example - what I need)  </p>\n\n<pre><code>if(DeestynationName.id==model.id) show list of Name\n</code></pre>\n\n<p>In \"add new record\" I need listbox with elements which are in this list (example - what I need): </p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.CurrentVoucher, new System.Web.Mvc.SelectList(Model.DictionaryNewInfoSupportList, \"Id\", \"Name\"), new { style = \"width:140px\" })\n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":85,"score":-3,"question_id":12582822,"title":"VB.NET - Using ListBoxFor and DropDownList","body":"<p>Im new to this ASP.net MVC stuff and getting really stuck on ListBoxFor and DropDownListFor.</p>\n\n<p>How do I use them? Any examples? </p>\n"},{"tags":["asp.net-mvc","razor","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":199,"score":0,"question_id":12065515,"title":"@Html.ListBoxFor usage and creation questions","body":"<p>I have a webpage with 2 list box (<em>list1, list2</em>), I can shift items from one listbox to the other and back. When I click on the submit button, I want to return all the items value in <em>list2</em> to the httppost method.</p>\n\n<p>I have 3 problems:</p>\n\n<ol>\n<li>How to definite the property for the selected list?</li>\n<li>How to have a initial empty list (for <em>list2</em>)? <em>list1</em> has populated items?</li>\n<li>How to return all of <em>list2</em> items to model, when submit button is clicked ?</li>\n</ol>\n\n<p>Model:</p>\n\n<pre><code>public class TestModel\n{\n    public List&lt;SelectListItem&gt; OptionList { get; set; }\n    public List&lt;SelectListItem&gt; SelectedOptionList { get; set; }\n    public string[] SelectedOptions { get; set; }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>private TestModel testModel  = new TestModel();\n\npublic ActionResult TestPage()\n{\n    ViewBag.Message = \"Test Page\";\n\n    testModel.OptionList = new List&lt;SelectListItem&gt;();\n\n    for (int i = 1; i &lt;= 100; i++)\n    {\n        SelectListItem item = new SelectListItem();\n        item.Text = \"Option \" + i.ToString();\n        item.Value = item.Text;\n\n        testModel.OptionList.Add(item);\n    }\n\n    return View(\"TestView\", testModel);\n}\n\n[HttpPost]\npublic ActionResult TestPage(TestModel formModel)\n{\n    testModel.SelectedOptionList = formModel.SelectedOptionList;\n    testModel.SelectedOptions = formModel.SelectedOptions;\n\n    //do something\n    return RedirectToAction(\"TestPage\");\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@model EngineeringDataAnalysisGui.Models.TestModel\n\n@{\n    ViewBag.Title = @ViewBag.Message;\n}\n\n@section Subtitle\n{\n    @ViewBag.Message\n}\n\n&lt;table width=\"100%\"&gt;\n@using (Html.BeginForm(\"TestPage\", \"RetrieveData\", FormMethod.Post))\n{\n    &lt;tr&gt;\n        &lt;td&gt;Event List:&lt;/td&gt;\n        &lt;td&gt;@Html.ListBox(\"lstEventSelection\", Model.OptionList, new { id = \"list1\", Multiple = \"multiple\", Size = 15, style = \"width: 100%;\" })&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;\n            &lt;table style=\"text-align:center; width: 100%\"&gt;\n                &lt;tr&gt;\n                    &lt;td id=\"buttonCol\"&gt;\n                        &lt;input type=\"button\" id=\"btnAddAllEvent\" title=\"Add All Events\" onclick=\"moveAllOptions('list1','list2', true)\" /&gt;\n                        &lt;input type=\"button\" id=\"btnAddEvent\" title=\"Add Selected Events\" onclick=\"moveSelectedOptions('list1','list2', true)\" /&gt;\n                    &lt;/td&gt;\n                    &lt;td id=\"buttonCol\"&gt;\n                        &lt;input type=\"button\" id=\"btnRemoveEvent\" title=\"Remove Selected Events\" onclick=\"moveSelectedOptions('list2','list1', true)\" /&gt;\n                        &lt;input type=\"button\" id=\"btnRemoveAllEvent\" title=\"Remove All Events\" onclick=\"moveAllOptions('list2','list1', true)\" /&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Selected Event List:&lt;/td&gt;\n        @*Not sure how to add the listbox*@\n        &lt;td&gt;@*Wrong*@@Html.ListBoxFor(x =&gt; x.SelectedOptions, Model.SelectedOptionList, new { id = \"list2\", Multiple = \"multiple\", Size = 15, style = \"width: 100%;\" })&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;input type=\"submit\" value=\"submit\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n}\n&lt;/table&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","validation","selection","html.listboxfor"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":298,"score":1,"question_id":10724965,"title":"No selected items in the ListBoxFor should show validation error in asp.net mvc","body":"<p>I show the Delete View in a partial/dialog. Initially no items are selected.\nWhen the user clicks the ok button the Delete Post action and its parameter selectedIds is NULL. Thats ok, but how can I show the user an error message?</p>\n\n<p>When I reach the code \"return PartialView\" then I get an Exception in the View, that my Model.DisplayList ist empty.</p>\n\n<p>I know I seem to mix 2 problems here but I guess one could solve the other...</p>\n\n<p>Delete Actions:</p>\n\n<pre><code>[HttpGet]\n        public ActionResult Delete()\n        {\n            var templates = _templateDataProvider.GetTemplates();\n            var listViewModel = new ListViewModel&lt;Template&gt;();\n            listViewModel.DisplayList = templates;\n            return PartialView(listViewModel);\n        }\n\n        [HttpPost]\n        public ActionResult Delete(int[] selectedIds)\n        {\n            if (selectedIds == null)\n            {\n                ModelState.AddModelError(\"Name\", \"Nothing selected\");\n            }\n\n            if (ModelState.IsValid)\n            {\n                return Json(new { success = true });\n            }\n\n            return PartialView();\n        }\n</code></pre>\n\n<p>Delete View:</p>\n\n<pre><code>@model ITMS.ViewModels.ListViewModel&lt;ITMS.Models.Template&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n@using (Html.BeginForm(\"Delete\", \"Template\"))\n{ \n    @Html.ValidationSummary(false)      \n    @Html.ListBoxFor(x =&gt; x.SelectedIds, new SelectList(Model.DisplayList, \"Id\", \"Name\"),new { @class = \"select\"} )\n}\n</code></pre>\n\n<p>When I return this:</p>\n\n<pre><code>return PartialView(new ListViewModel&lt;Template&gt; { DisplayList = _templateDataProvider.GetTemplates() });\n</code></pre>\n\n<p>then it works, but I do not want to access the database again for this.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html-helper","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":766,"score":1,"question_id":8579789,"title":"MVC Method to output unordered list from the ListBoxFor method","body":"<p>In MVC3, I want to change the HTML output by the Html.ListBoxFor method so that instead of an HTML list box with all the available values (and the selected values highlighted), I want to simply output an unordered list (UL, LI) of the selected items and not a SELECT element.  The issue is that I want to keep <strong>exactly the same method signature as the ListBoxFor method</strong>, accepting a MultiSelectList object and a List which is the selected values.  I then want the unordered list to only output the selected item values (not keys) as UL/LI html.  Here is the method signature I would like to have.  How can this be accomplished?</p>\n\n<pre><code>public static MvcHtmlString ListBoxForAsUnorderedList &lt;TModel, TProperty&gt;\n    (this HtmlHelper&lt;TModel&gt; htmlHelper, \n          Expression&lt;Func&lt;TModel, TProperty&gt;&gt; expression, \n          IEnumerable&lt;SelectListItem&gt; selectList)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","entity-framework","entity-framework-4.1","html.listboxfor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":313,"score":1,"question_id":8157572,"title":"Edit View with child entity selection listbox and HTTPPost difficulties","body":"<p>Good day, all</p>\n\n<p>I have a Search Edit view which is strongly typed to my Search model class seen below (simplified).\n<img src=\"http://i.stack.imgur.com/cifHN.png\" alt=\"Searches and Custodians\"></p>\n\n<p>I want to display the custodians that are attributed to the Search being edited in a listbox showing all Custodians, with the current ones selected.</p>\n\n<p>My controller's Get Edit action is thus:</p>\n\n<pre><code>public ActionResult Edit(int id, int searchListId = 0)\n{\n    if (searchListId != 0)\n    {\n        Session[\"CurrentSearchListID\"] = searchListId;  \n    }\n    ProjectContext mydb = db;\n    Search search = Search.Find(mydb, id);\n\n    IEnumerable&lt;SelectListItem&gt; selectedItems =\n        from c in Custodian.List(mydb)\n        select new SelectListItem\n        {\n            Selected = (search.Custodians.Contains(c)),\n            Text = c.CustodianName,\n            Value = c.ToString()\n        };\n\n    ViewBag.Custodians = selectedItems;\n    return View(search);\n}\n</code></pre>\n\n<p>And my Views listbox is thus:</p>\n\n<pre><code>        @{\n            //List&lt;Kiersted.Keps.BusinessObjects.Custodian&gt; Custodians = ViewBag.Custodians;\n            IEnumerable&lt;SelectListItem&gt; SelectedItems = ViewBag.Custodians;\n        }\n\n        @Html.ListBox(\"Custodians\", SelectedItems);\n</code></pre>\n\n<p>This produces a listbox with the Custodians depicted, but none are selected (I have confirmed that several of the SelectListItems accurately describe the custodian as selected.  I have tried using ListBoxFor and it produces the same thing when populated with a MultiSelectList.</p>\n\n<p>Finally I decided to just force it to do what I want, but this does not return selected Custodians on Submit.</p>\n\n<pre><code>&lt;select id=\"Custodians\" multiple=\"multiple\" name=\"Custodians\"&gt;\n@foreach (Kiersted.Keps.BusinessObjects.Custodian cust in Custodians)\n{\n    if (Model.Custodians.Contains(cust))\n    {\n    &lt;option value=\"@cust.CustodianID\" selected=\"selected\"&gt;@cust.CustodianName&lt;/option&gt;\n    }\n    else\n    {\n    &lt;option value=\"@cust.CustodianID\" &gt;@cust.CustodianName&lt;/option&gt;\n    }\n}\n&lt;/select&gt;\n</code></pre>\n\n<p>Anyone know how you are <strong>supposed</strong> to do this?</p>\n\n<p>Edits:</p>\n\n<h1>ListBoxFor example</h1>\n\n<p>OK so after fiddling around with it for a while longer, I have now gotten Custodians selected in the listbox that correspond to the Search Custodians.  Below is the view code:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    @Html.ListBoxFor(model =&gt; model.Custodians, allCustodians.Select(cust =&gt; new SelectListItem {\n                           Text = cust.CustodianName,\n                           Value = cust.CustodianID.ToString(),\n                           Selected = true}), \n                           new { Multiple = \"multiple\" })\n&lt;/div&gt;\n</code></pre>\n\n<p>If I select several more custodians, how do I get them (or their corresponding values rather) back to the control upon submit?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvcscaffolding","html.listboxfor"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":638,"score":6,"question_id":7145464,"title":"ListBox for ArgumentNullException Parameter name: source","body":"<h2>Setup:</h2>\n\n<p>I have scaffolded a controller using MvcScaffolding.</p>\n\n<p>For a property, Model.IdCurrencyFrom, the scaffolding created an Html.DropDownListFor:</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.IdCurrencyFrom, \n    ((IEnumerable&lt;FlatAdmin.Domain.Entities.Currency&gt;)ViewBag.AllCurrencies).Select(option =&gt; new SelectListItem {\n        Text = (option == null ? \"None\" : option.CurrencyName), \n        Value = option.CurrencyId.ToString(),\n        Selected = (Model != null) &amp;&amp; (option.CurrencyId == Model.IdCurrencyFrom)\n    }), \"Choose...\")\n</code></pre>\n\n<p>This works fine, both with new records, or editing existing ones.</p>\n\n<h2>Problem:</h2>\n\n<p>There are only 3 currencies, AR$, US$ and GB£.  So, instead of a drop down list, I want a ListBox.</p>\n\n<p>So I changed the above to:</p>\n\n<pre><code>@Html.ListBoxFor(model =&gt; model.IdCurrencyFrom, \n    ((IEnumerable&lt;FlatAdmin.Domain.Entities.Currency&gt;)ViewBag.AllCurrencies).Select(option =&gt; new SelectListItem {\n        Text = (option == null ? \"None\" : option.CurrencyName), \n        Value = option.CurrencyId.ToString(),\n        Selected = (Model != null) &amp;&amp; (option.CurrencyId == Model.IdCurrencyFrom)\n    }))\n</code></pre>\n\n<p>I now get an ArgumentNullException, Parameter name: source, but only when editing an existing record.  Creating new records, this works fine.</p>\n\n<h2>Questions:</h2>\n\n<p>What is happening?!</p>\n\n<p>Nothing has changed.  Switching back to DropDownListFor and it all works fine.  Switching to ListBox (as opposed to ListBoxFor) and I get the error.</p>\n\n<p>The model is not null (like I said, it works fine with the DropDownListFor)... and I've run out of ideas.</p>\n"},{"tags":["asp.net-mvc","sorting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":39,"score":-1,"question_id":12971418,"title":"asp.net mvc creating a searchbox and sort facility","body":"<p>I am creating a application which shows a view from a database table. which implements CRUD.</p>\n\n<p>I have tried to implement a search box and also a sorting facility like many other websites.</p>\n\n<p>Please see code where I dont understand why it isn't working, there are no errors showing but the features do not work.</p>\n\n<p>My EF Code:</p>\n\n<pre><code>private EFDbContext context = new EFDbContext();\n\npublic IEnumerable&lt;Log&gt; GetLogs()\n{\n    return context.Logs.ToList();\n}\n\npublic Log GetLogID(int id)\n{\n    return context.Logs.Find(id);\n}\n</code></pre>\n\n<p>In my Controller:</p>\n\n<pre><code>public ViewResult Index(string sortOrder, string currentFilter, string\n                        searchString, int? Log, int page = 1 )\n{\n    ViewBag.CurrentSort = sortOrder;\n    ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? \"Name desc\" : \"\"; \n    ViewBag.DateSortParm = sortOrder == \"Date\" ? \"Date desc\" : \"Date\";\n\n    if (Request.HttpMethod == \"GET\")\n    {\n        searchString = currentFilter;\n    }\n    else\n    {\n        page = 1;\n    }\n    ViewBag.CurrentFilter = searchString;\n\n    var logs = from s in repository.Logs\n    select s;\n\n    if (!String.IsNullOrEmpty(searchString))\n    {\n        logs = logs.Where(s =&gt; s.Name.ToUpper().Contains(searchString.ToUpper()));\n        //    || s.Name.ToUpper().Contains(searchString.ToUpper()));\n    }\n\n    switch (sortOrder) \n    { \n        case \"Name desc\": \n            logs = logs.OrderByDescending(s =&gt; s.Name); \n            break; \n        case \"Date\": \n            logs = logs.OrderBy(s =&gt; s.Date); \n            break; \n        case \"Date desc\": \n            logs= logs.OrderByDescending(s =&gt; s.Date); \n            break; \n        default: \n            logs= logs.OrderBy(s =&gt; s.Name); \n            break; \n    } \n\n    LogViewModel _viewModel = new LogViewModel\n    {\n        Logs = repository.Logs    \n                         .Where(p =&gt; Log == null || p.LogID == Log)\n                         .OrderByDescending(p =&gt; p.Date)\n                         .Skip((page - 1) * pageSize)\n                         .Take(pageSize),\n        PagingInfo = new PagingInfo //Add Pagination\n        {\n            CurrentPage = page,\n            ItemsPerPage = pageSize,\n            TotalItems = Log == null ? \n                repository.Logs.Count() : \n                repository.Logs.Where(e =&gt; e.LogID == Log).Count()\n        },\n\n    CurrentLog = Log\n};\n\nreturn View(_viewModel);\n</code></pre>\n\n<p>My Index View code:</p>\n\n<pre><code>@using (Html.BeginForm()) {\n    &lt;div id = \"searchBox\"&gt;\n        Search: @Html.TextBox(\"searchString\", ViewBag.CurrentFilter as string) \n        &lt;input type=\"submit\" value=\"Search\" /&gt;\n    &lt;/div&gt;     }\n\n&lt;p&gt;@Html.ActionLink(\"Create New\", \"Create\")&lt;/p&gt;\n    &lt;table class =\"Grid\"&gt;\n        &lt;tr&gt;\n            @*&lt;th&gt;Date&lt;/th&gt;*@\n            &lt;th&gt;@Html.ActionLink(\"Date Created\", \"List\", new { sortOrder = ViewBag.DateSortParm })&lt;/th&gt;\n\n            &lt;th&gt;@Html.ActionLink(\"Name \", \"Index\", new { sortOrder=ViewBag.NameSortParm })&lt;/th&gt;\n</code></pre>\n\n<p>Currently the sort or search doesn't work.</p>\n\n<p>Let me know if you need further info, I am new to asp.net mvc.</p>\n"},{"tags":["javascript","asp.net-mvc","razor","coffeescript","resx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12971830,"title":"Access resource resx from within coffeescript file using razor","body":"<p>We use resx files to hold all our text resources and make calls in Html like so</p>\n\n<pre><code>&lt;label class=\"displayinline\"&gt;@Resources.Name: &lt;span data-bind=\"text: Name()\"&gt;&lt;/span&gt;&lt;/label&gt;   \n</code></pre>\n\n<p>We also use knockout and coffeescript so it would be handy to be able to access these resources from within the scripts so we could just write something like </p>\n\n<pre><code>&lt;label data-bind=\"text: NameInfo()\"&gt;\n</code></pre>\n\n<p>The above is a contrived example but is this possible?</p>\n"},{"tags":["asp.net-mvc","rest"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":24,"score":0,"question_id":12968146,"title":"how to make rest web service calls secure using Token","body":"<p>I am creating webservices in MVC and hv to use from Ipad. How can I make it secure using tokens? How to create token in client and check the token in server, then allow them to access the web services?</p>\n"},{"tags":["asp.net-mvc","facebook","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12967711,"title":"How to get relation between two facebook userid's","body":"<p>I want to Scan Facebook friends list and find potential relationship between Facebook user and potential friend.After login I will give a user id then the system should find out the whether he is a friend any of my friend or friend's friend.Loop friend’s friend list up to 3 levels. If there are matches present data in hierarchical format.My application was in Asp.net mvc3. Can you please suggest me a solution .</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12969590,"title":"Web api HTTP 500 (Internal Server Error)","body":"<p>Hello I have an error 500 (internal server error) when I run the code below. My issue is that <strong>I have no trace at all of the error</strong>. It seems that visual studio is unable to catch it. </p>\n\n<p>The following code returns a Candidate if I try to add <strong>pers</strong> to <strong>candidate</strong> the code fail and i get error 500. The thing is PersonAddressDescription implement AddressDescription is inheritance the problem ?</p>\n\n<pre><code>public class CheckController : ApiController\n{\n    public Candidate Get()\n    {\n        PersonAddressDescription pers = new PersonAddressDescription();\n\n        Candidate candidate = new Candidate();\n\n        //IF I REMOVE THIS NO PROBLEM\n        candidate.address = pers;\n\n        return candidate;\n    }\n}\n</code></pre>\n\n<p>AddressDescription class </p>\n\n<pre><code>/// &lt;remarks/&gt;\n    [System.Xml.Serialization.XmlIncludeAttribute(typeof(CompanyAddressDescription))]\n    [System.Xml.Serialization.XmlIncludeAttribute(typeof(PersonAddressDescription))]\n    [System.CodeDom.Compiler.GeneratedCodeAttribute(\"System.Xml\", \"4.0.30319.17626\")]\n    [System.SerializableAttribute()]\n    [System.Diagnostics.DebuggerStepThroughAttribute()]\n    [System.ComponentModel.DesignerCategoryAttribute(\"code\")]\n    [System.Xml.Serialization.XmlTypeAttribute(Namespace=\"http://www.crif-online.ch/webservices/crifsoapservice/v1.00\")]\n    public abstract partial class AddressDescription : object, System.ComponentModel.INotifyPropertyChanged {\n\n        private Location locationField;\n\n        private ContactItem[] contactItemsField;\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(Order=0)]\n        public Location location {\n            get {\n                return this.locationField;\n            }\n            set {\n                this.locationField = value;\n                this.RaisePropertyChanged(\"location\");\n            }\n        }\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(\"contactItems\", Order=1)]\n        public ContactItem[] contactItems {\n            get {\n                return this.contactItemsField;\n            }\n            set {\n                this.contactItemsField = value;\n                this.RaisePropertyChanged(\"contactItems\");\n            }\n        }\n\n        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;\n\n        protected void RaisePropertyChanged(string propertyName) {\n            System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;\n            if ((propertyChanged != null)) {\n                propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));\n            }\n        }\n    }\n</code></pre>\n\n<p>PersonAddressDescription class that implement AddressDescription</p>\n\n<pre><code>/// &lt;remarks/&gt;\n    [System.CodeDom.Compiler.GeneratedCodeAttribute(\"System.Xml\", \"4.0.30319.17626\")]\n    [System.SerializableAttribute()]\n    [System.Diagnostics.DebuggerStepThroughAttribute()]\n    [System.ComponentModel.DesignerCategoryAttribute(\"code\")]\n    [System.Xml.Serialization.XmlTypeAttribute(Namespace=\"http://www.crif-online.ch/webservices/crifsoapservice/v1.00\")]\n    public partial class PersonAddressDescription : AddressDescription {\n\n        private string firstNameField;\n\n        private string lastNameField;\n\n        private string maidenNameField;\n\n        private Sex sexField;\n\n        private bool sexFieldSpecified;\n\n        private string birthDateField;\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(Order=0)]\n        public string firstName {\n            get {\n                return this.firstNameField;\n            }\n            set {\n                this.firstNameField = value;\n                this.RaisePropertyChanged(\"firstName\");\n            }\n        }\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(Order=1)]\n        public string lastName {\n            get {\n                return this.lastNameField;\n            }\n            set {\n                this.lastNameField = value;\n                this.RaisePropertyChanged(\"lastName\");\n            }\n        }\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(Order=2)]\n        public string maidenName {\n            get {\n                return this.maidenNameField;\n            }\n            set {\n                this.maidenNameField = value;\n                this.RaisePropertyChanged(\"maidenName\");\n            }\n        }\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(Order=3)]\n        public Sex sex {\n            get {\n                return this.sexField;\n            }\n            set {\n                this.sexField = value;\n                this.RaisePropertyChanged(\"sex\");\n            }\n        }\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlIgnoreAttribute()]\n        public bool sexSpecified {\n            get {\n                return this.sexFieldSpecified;\n            }\n            set {\n                this.sexFieldSpecified = value;\n                this.RaisePropertyChanged(\"sexSpecified\");\n            }\n        }\n\n        /// &lt;remarks/&gt;\n        [System.Xml.Serialization.XmlElementAttribute(Order=4)]\n        public string birthDate {\n            get {\n                return this.birthDateField;\n            }\n            set {\n                this.birthDateField = value;\n                this.RaisePropertyChanged(\"birthDate\");\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","telerik","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":12970398,"title":"Use of Telerik Controls does it impact to my application performance?","body":"<p>I am going to use third party controls for my MVC.NET application.\nWhere Telerik is good option for it. \nNow, I have huge database with 1 million records. \nI am interested to know that; \nDoes telerik controls will get impact with this data Load (testing)?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","flash"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":41,"score":1,"question_id":12971433,"title":"Is it possible to take a picture from the clipboard?","body":"<p>I need to save an image from the clipboard, how?</p>\n\n<p>Zero Clipboard - does not know how to do it</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12970742,"title":"Redirect to new page and download file?","body":"<p>I am building a website in MVC. At the moment i need to return to a view and download a file.</p>\n\n<p>This return downloads the file:</p>\n\n<pre><code>return \"http://formvalue.co.za/download/\" + filename + \".xlsx\"; \n</code></pre>\n\n<p>And this return will direct me to my view:</p>\n\n<pre><code>return \"Complete\";\n</code></pre>\n\n<p>The views name is complete.</p>\n\n<p>I can only have one return but i need both actions preformed?</p>\n\n<p>Is there some way to do them both in one return?</p>\n\n<p>Please if you need more info just ask, Thanks in advance.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12906359,"title":"Revalidate Model When Using WebAPI (TryValidateMode equivalent)","body":"<p>Using vanilla MVC I can revalidate my model with TryValidateModel. The TryValidateModel method doesn't seem to be applicable to WebAPI. How can I revalidate my model when using WebAPI?</p>\n"},{"tags":["asp.net-mvc","telerik","modal-dialog","telerik-charting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":12970294,"title":"Telerik ASP.Net Chart Control doesnt render properly if its placed on a SharePoint Modal Dialog Box","body":"<p>I have developed a Chart Webpart which uses Telerik ASP.Net Chart Control. When a user clicks on the chart, I have placed a script which opens another Modal Dialog box with the same Chart Control but with bigger width and height. This works perfectly when the Chart control is added on a Webpart Page.</p>\n\n<pre><code>function ChartClick() \n{\n    var ev = arguments[0] || window.event,\n    selectedChart = ev.target || ev.srcElement;\n    OpenDialog(selectedChart, true);   \n}\n</code></pre>\n\n<p>But if I place this Webpart on a pop-up page and then click on the chart, the modal dialog box opens but the Chart is not rendered properly. It appears distorted completely.</p>\n\n<p>Has anyone come acroos this problem? Any help would be considered as a gift!</p>\n\n<p>Cheers!</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":366,"score":1,"question_id":9836966,"title":"MVC 3 EF - Adding new record using existing data","body":"<p>I have a db with two tables Invoices and Customers. Customers PK is FK in the Invoices table. I have a Create view in which user fills in invoice data. On this form I have a @Html.DropDownList with SelectList populated with the names of already existing in the db customers. On the basis of user selection customer data fields are autopopulated with customer data from the database via partial view:</p>\n\n<pre><code>@using (Ajax.BeginForm(\"CustomerSelect\", \"Invoice\", new AjaxOptions{\n            HttpMethod = \"GET\",\n            InsertionMode = InsertionMode.Replace,\n            UpdateTargetId = \"CustomerFields\"}))\n</code></pre>\n\n<p>This works well, but when I create the Submit button, it creates a new instance of the cutomer in the database, even though it should use the id of one retrieved from the db. When the partial view is displayed on the Create view it displayes proper Customer ID:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Customer)\n\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Customer)\n        @Html.ValidationMessageFor(model =&gt; model.Customer)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But when I look inside the invoice object in the httppost of controler Create method it shows shows a different (new) Customer ID:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Create(Invoice invoice)\n{\n    if (ModelState.IsValid)\n    {\n        db.Invoices.Add(invoice); **//invoice.Customer.CustomerID == 1**\n        db.SaveChanges(); **//invoice.Customer.CustomerID changes to next free in the db == 7**\n        return RedirectToAction(\"Index\");\n    }\n\n   return View(invoice);\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc"],"answer_count":2,"favorite_count":4,"up_vote_count":16,"down_vote_count":0,"view_count":1500,"score":16,"question_id":541703,"title":"Can I use ASP.NET MVC together with regular ASP.NET Web forms","body":"<p>I have on request from a client built a huge site with ASP.NET Web forms. The problem is that I'm finding ASP.NET Web forms to be somewhat unintuitive (my personal taste only). So what I would like to do is use MVC but I can't really expect my client to pay for my time on a complete rewrite (nor do he have the time). </p>\n\n<p>So what I'm asking is, can I use ASP.NET MVC and Web forms at the same time and gradually use MVC more and more? Any tips?</p>\n"},{"tags":["asp.net-mvc","session","session-state","azure-web-roles"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":123,"score":1,"question_id":12969276,"title":"How to store asp.net session state in SQL Server for Asp.Net MVC 4 application or WebRole application?","body":"<p>How do I store session state in SQL Server for Asp.net mvc4 or Windows Azure Web Role application?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Why do I get this error?</p>\n\n<blockquote>\n  <p><em>HTTP Error 500.23 - Internal Server Error</em><br>\n  <em>An ASP.NET setting has been detected that does not apply in Integrated managed pipeline mode.</em></p>\n</blockquote>\n\n<p>My <code>web.config</code> looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.webPages.razor\" type=\"System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;section name=\"webAssets\" type=\"Telerik.Web.Mvc.Configuration.WebAssetConfigurationSection, Telerik.Web.Mvc\" requirePermission=\"false\" /&gt;\n      &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n      &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n  &lt;!--\n    &lt;connectionStrings&gt;\n        &lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=aspnet2012620142020;Integrated Security=True\" providerName=\"System.Data.SqlClient\"/&gt;\n    &lt;/connectionStrings&gt;\n  --&gt;\n  &lt;connectionStrings&gt;\n    &lt;!--&lt;add name=\"HotDeployDbContext\" connectionString=\"data source=JOE-WANG\\WQ;initial catalog=HotDeploy;user id=sa;password=wq187731\" providerName=\"System.Data.SqlClient\"/&gt;--&gt;\n    &lt;!--&lt;add name=\"HotDeployDbContext\" connectionString=\"data source=tcp:z1782cwqws.database.windows.net,1433;initial catalog=HotDeployDB4CloudService;user id=hotdeployadmin@z1782cwqws;password=accela.123;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;\" providerName=\"System.Data.SqlClient\" /&gt;--&gt;\n    &lt;add name=\"HotDeployDbContext\" connectionString=\"data source=tcp:xxxxxxxx.database.windows.net,1433;initial catalog=xxxxx;user idxxxxx@xxxx;password=dddd.123;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;\" providerName=\"System.Data.SqlClient\"/&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"2.0.0.0\" /&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"true\" /&gt;\n    &lt;add key=\"PreserveLoginUrl\" value=\"true\" /&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;customErrors mode=\"Off\" /&gt;\n    &lt;httpRuntime executionTimeout=\"14400\" maxRequestLength=\"716800\" /&gt;\n    &lt;compilation targetFramework=\"4.0\" /&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/Login\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n        &lt;add namespace=\"Telerik.Web.Mvc.UI\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;profile defaultProvider=\"DefaultProfileProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultProfileProvider\" type=\"System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;roleManager defaultProvider=\"DefaultRoleProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultRoleProvider\" type=\"System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;!--\n    &lt;sessionState mode=\"InProc\" timeout=\"30\" customProvider=\"DefaultSessionProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/sessionState&gt;\n    &lt;httpHandlers&gt;\n      &lt;add verb=\"GET,HEAD\" path=\"asset.axd\" validate=\"false\" type=\"Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc\" /&gt;\n    &lt;/httpHandlers&gt;--&gt;\n    &lt;!--before I added sessionState element . everything is fine.--&gt;\n    &lt;sessionState mode=\"SQLServer\" cookieless=\"true\" \n    sqlConnectionString=\"data source=10.50.70.81; userid=sa; password=wq187731\"\n    timeout=\"300\" \n    sqlCommandTimeout=\"10\" /&gt;\n  &lt;/system.web&gt;\n&lt;/configuration&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;security&gt;\n      &lt;requestFiltering&gt;\n        &lt;requestLimits maxAllowedContentLength=\"3000000000\" /&gt;\n      &lt;/requestFiltering&gt;\n    &lt;/security&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n    &lt;directoryBrowse enabled=\"true\" /&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"asset\" /&gt;\n      &lt;add name=\"asset\" preCondition=\"integratedMode\" verb=\"GET,HEAD\" path=\"asset.axd\" type=\"Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Helpers\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.0.0.0\" newVersion=\"4.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.WebPages\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Microsoft.WindowsAzure.StorageClient\" publicKeyToken=\"31bf3856ad364e35\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-1.7.0.0\" newVersion=\"1.7.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>If I change the application pool to classical mode . I got IIS error page below ..</p>\n\n<blockquote>\n  <p><em>HTTP Error 403.14 - Forbidden</em><br>\n  <em>The Web server is configured to not list the contents of this directory.</em></p>\n</blockquote>\n"},{"tags":["asp.net-mvc","razor","form-validation","submit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":201,"score":1,"question_id":12736102,"title":"form validation with razor","body":"<p>I have the following in my .net mvc razor form and I'm clicking on the submit button, but it's not being validated by the validation in the js. I debugged it in Firefox and instead, goes right to the form method and no validation comes out on the form to stop the form submission.</p>\n\n<p>the HTML output of the model.LoanId is simply LoanId.</p>\n\n<p>How can I properly validate the form????</p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>        @using (Html.BeginForm(\"Refresh\", \"Home\", FormMethod.Post, new { id = \"frmTemps\" })) \n    &lt;tr&gt;\n                    &lt;td&gt;\n                    @Html.LabelFor(model =&gt; model.LoanId)\n                    @Html.TextBoxFor(model =&gt; model.LoanId)\n                    &lt;td colspan=\"3\"&gt;\n                        &lt;input type=\"submit\" id=\"btnRefresh\" value='Refresh' /&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n\njs\n\n$(\"#frmTemps\").validate({\n        event: \"submit\",\n        rules: {\n            LoanID: {\n                required: true\n            }\n        },\n        messages: {\n            LoanID: {\n                required: ' Please enter a Loan ID. '\n            }\n        }\n    });\n\nI also tried it with non-model data below and got the same thing.\n\n    @Html.Label(\"loanid:\", \"LoanID\")\n                    @Html.TextBox(\"loanID\")\n\n\nHere is the html I'm trying to validate:\n&lt;td&gt;@Html.LabelFor(model =&gt; model.LoanType)\n                    @Html.TextBox(\"SBA\", \"SBA\")\n                    @Html.ValidationMessageFor(model =&gt; model.LoanType)\n                    @*@Html.TextBoxFor(model =&gt; model.LoanType)*@\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;label for=\"ddlDept\"&gt;Department:&lt;/label&gt;\n                    @(Html.Kendo().DropDownListFor(model =&gt; model.SelectedDeptText)\n                            .Name(\"ddlDept\")\n                            .DataTextField(\"DepartmentName\")\n                            .DataValueField(\"DepartmentID\")\n                            .Events(e =&gt; e.Change(\"Refresh\"))\n                            .DataSource(source =&gt;\n                            {\n                                source.Read(read =&gt;\n                                {\n                                    read.Action(\"GetDepartments\", \"Home\");\n                                });\n                            })\n                    )\n                    @Html.ValidationMessageFor(model =&gt; model.SelectedDeptText)\n</code></pre>\n\n<p><strong>View Model</strong></p>\n\n<pre><code>public class ViewModelTemplate_Guarantors\n{\n    public int SelectedTemplateId { get; set; }\n    public IEnumerable&lt;PDFTemplate&gt; Templates { get; set; }\n\n    public int SelectedGuarantorId { get; set; }\n    public IEnumerable&lt;tGuarantor&gt; Guarantors { get; set; }\n\n    public string LoanId { get; set; }\n    public string SelectedDeptText { get; set; }\n    public string LoanType { get; set; }\n\n    public bool ShowTemps { get; set; }\n    public string Error { get; set; }\n    public string ErrorT { get; set; }\n    public string ErrorG { get; set; }\n    public bool ShowGeneratePDFBtn { get; set; }\n}\n</code></pre>\n\n<p><strong>_Layout.cshtml</strong></p>\n\n<pre><code>&lt;script src=\"~/Scripts/jquery-1.7.1.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"~/Scripts/jquery.validate.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"~/Scripts/jquery.validate.unobtrusive.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"~/Scripts/jquery.unobtrusive-ajax.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"~/Scripts/modernizr-2.5.3.js\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/kendo/2012.2.913/kendo.all.min.js\")\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/kendo/2012.2.913/kendo.aspnetmvc.min.js\")\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>Validation class</strong></p>\n\n<pre><code>namespace PDFService03Validation.Validations\n{\n    [MetadataType(typeof(PDFService03_Validation))]\n    public partial class PDFService03\n    {\n\n}\n\n    public partial class PDFService03_Validation\n    {\n        public class PDFService03\n        {\n            [Required(ErrorMessage = \"Loan ID Required\")]\n            [DataType(DataType.Text)]\n            public string LoanID { get; set; }\n\n            [Required(ErrorMessage = \"Loan Type Required\")]\n            [DataType(DataType.Text)]\n            public string LoanType { get; set; }\n\n            [Required(ErrorMessage = \"Department Name Required\")]\n            [DataType(DataType.Text)]\n            public string SelectedDeptText { get; set; }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Index method</strong></p>\n\n<pre><code>public ActionResult Index(ViewModelTemplate_Guarantors model)\n{\n    ViewBag.Error = \"\";\n\n    model.ShowGeneratePDFBtn = false;\n\n    return View();\n}\n</code></pre>\n\n<p><code>Index.cshtml</code> - still thinks the object is not set. When debugging, I go into my Controller, sets the variable in the model, then, comes back here. Please help... I don't know what I'm doing incorrectly here. I think I've followed everything as needed.</p>\n\n<p>Sorry to bug you again, but I'm almost there....</p>\n\n<p>I did as you said, but still am not getting any validation errors....</p>\n\n<p>Below, is the html markup that is produced by my View. You can see the scripts I'm using at the top and you can also see the validation in the span tags. What am I missing??? \nI'm also going to show you the ViewModel I edited. thanks so much ahead of time...</p>\n\n<p>ViewModel</p>\n\n<pre><code>namespace PDFConverterModel.ViewModels\n{\n    [MetadataType(typeof(ViewModelTemplate_Guarantors_Validation))]\n    public partial class ViewModelTemplate_GuarantorsValidation\n    {\n\n    }\n\n    public partial class ViewModelTemplate_Guarantors_Validation\n    {\n        public class ViewModelTemplate_Guarantors\n        {\n            [Required(ErrorMessage = \"Loan ID Required\")]\n            [DataType(DataType.Text)]\n            public string LoanID { get; set; }\n\n            [Required(ErrorMessage = \"Loan Type Required\")]\n            [DataType(DataType.Text)]\n            public string LoanType { get; set; }\n\n            [Required(ErrorMessage = \"Department Name Required\")]\n            [DataType(DataType.Text)]\n            public string SelectedDeptText { get; set; }\n        }\n    }\n\n    public class ViewModelTemplate_Guarantors\n    {\n        public int SelectedTemplateId { get; set; }\n        public IEnumerable&lt;PDFTemplate&gt; Templates { get; set; }\n\n        public int SelectedGuarantorId { get; set; }\n        public IEnumerable&lt;tGuarantor&gt; Guarantors { get; set; }\n\n        public string LoanId { get; set; }\n        public string SelectedDeptText { get; set; }\n        public string LoanType { get; set; }\n\n        public bool ShowTemps { get; set; }\n        public string Error { get; set; }\n        public string ErrorT { get; set; }\n        public string ErrorG { get; set; }\n        public bool ShowGeneratePDFBtn { get; set; }\n    }\n}\n</code></pre>\n\n<p>Page output:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;BHG :: PDF Generator&lt;/title&gt;\n    &lt;link href=\"/Content/Site.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"/Content/kendo/2012.2.913/kendo.common.min.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"/Content/kendo/2012.2.913/kendo.dataviz.min.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"/Content/kendo/2012.2.913/kendo.blueopal.min.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src=\"/Scripts/jquery-1.7.1.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/jquery.validate.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/jquery.validate.unobtrusive.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/jquery.unobtrusive-ajax.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/modernizr-2.5.3.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/kendo/2012.2.913/kendo.all.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/Scripts/kendo/2012.2.913/kendo.aspnetmvc.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div class=\"page\"&gt;\n        &lt;header&gt;\n            &lt;div id=\"title\"&gt;\n                &lt;h1&gt;BHG :: PDF Generator&lt;/h1&gt;\n            &lt;/div&gt;\n        &lt;/header&gt;\n        &lt;section id=\"main\"&gt;\n\n\n&lt;h2&gt;&lt;/h2&gt;\n\n&lt;div&gt;\n\n    &lt;table style=\"width: 1000px\"&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"5\"&gt;\n                &lt;img alt=\"BHG Logo\" src=\"/Images/logo.gif\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n\n&lt;form action=\"/Home/Refresh\" id=\"frmTemps\" method=\"post\"&gt;            &lt;tr&gt;\n                &lt;td&gt;\n\n\n                &lt;label for=\"LoanId\"&gt;LoanId&lt;/label&gt;\n                &lt;input id=\"LoanId\" name=\"LoanId\" type=\"text\" value=\"\" /&gt;\n                &lt;span class=\"field-validation-valid\" data-valmsg-for=\"LoanId\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n                &lt;td colspan=\"3\"&gt;\n                    &lt;input type=\"submit\" id=\"btnRefresh\" value='Refresh' /&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;label for=\"LoanType\"&gt;LoanType&lt;/label&gt;\n                    &lt;input id=\"SBA\" name=\"SBA\" type=\"text\" value=\"SBA\" /&gt;\n                    &lt;span class=\"field-validation-valid\" data-valmsg-for=\"LoanType\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n\n                &lt;/td&gt;\n                &lt;td&gt;\n                    &lt;label for=\"ddlDept\"&gt;Department:&lt;/label&gt;\n                    &lt;input id=\"ddlDept\" name=\"ddlDept\" type=\"text\" /&gt;&lt;script&gt;\n    jQuery(function(){jQuery(\"#ddlDept\").kendoDropDownList({\"change\":Refresh,\"dataSource\":{\"transport\":{\"read\":{\"url\":\"/Home/GetDepartments\"}},\"schema\":{\"errors\":\"Errors\"}},\"dataTextField\":\"DepartmentName\",\"dataValueField\":\"DepartmentID\"});});\n&lt;/script&gt;\n                    &lt;span class=\"field-validation-valid\" data-valmsg-for=\"SelectedDeptText\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n&lt;/form&gt;\n    &lt;/table&gt;\n\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\n    $('btnRefresh').on('click', '#btnRefresh', function () {\n        Refresh();\n    });\n\n    function Refresh() {\n\n        var LoanID = $(\"#LoanID\").val();\n\n        if (LoanID != \"\") {\n            document.forms[\"frmTemps\"].submit();\n        }\n    }\n&lt;/script&gt;\n\n        &lt;/section&gt;\n        &lt;footer&gt;\n        &lt;/footer&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12968934,"title":"How to check the url is available in another website from my website?","body":"<p>I want to check particular url is available in someone's website from my website?\nEx:\nmy website is www.example1.com\nanother url is www.example2.com</p>\n\n<p>I want to check whether the url www.example2.com/blogs is availabe or not from www.example1.come website?</p>\n\n<p>Is it possible? if so can you please let me know how to check?\nThanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","validation","client-side"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":117,"score":1,"question_id":12968542,"title":"Use Client-Side Validation when custom [required] attribute is used","body":"<p>on this project we do not use the default dataannotation attributes from the <code>System.ComponentModel.DataAnnotations</code> namespace, but custom attributes are built.</p>\n\n<p>So we do place a <code>[required]</code> attribute on a property, but it's a custom built one.</p>\n\n<p>For server side validation we managed to override the validation with a custom validation provider, but we are stuck with tthe client side validation.</p>\n\n<p>As i read in the docs, i see that when you use the default <code>[required]</code> attribute, these kind of attributes are rendered on the html elements:</p>\n\n<pre><code>data-val-lengthmax=\"10\" data-val-length-min=\"3\" data-val-required=\"The ClientName field is required.\"\n</code></pre>\n\n<p>I presume that is done by the framework, which reads the normal <code>required</code> attribute, and then renders the html attributes.</p>\n\n<p>Can we make the framework render these attributes for us too?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":149,"score":0,"question_id":12954806,"title":"How to pass a textbox value from view to a controller in MVC 4?","body":"<p>Here i am fetching the value from database and showing it in a input field</p>\n\n<pre><code>&lt;input type=\"text\" id=\"ss\" value=\"@item.Quantity\"/&gt;\n</code></pre>\n\n<p>and the value fetching from database is <code>1</code>.Then i am changing the input field value to <code>2</code>\nand passing that value to the controller in a action click </p>\n\n<pre><code> &lt;a id=\"imgUpdate\"  href=\"@Url.Action(\"Update\", \"Shopping\", new { id = Request.QueryString[\"UserID\"], productid = item.ProductID, qty = item.Quantity, unitrate = item.Rate })\"&gt; \n</code></pre>\n\n<p>But in the controller part i am getting that <code>old value</code>1 for <code>qty</code>.But i need that <code>updated value 2</code> in <code>qty</code></p>\n\n<pre><code>public ActionResult Update(string id, string productid, int qty, decimal unitrate)\n        {\n            if (ModelState.IsValid)\n            {\n                int _records = UpdatePrice(id,productid,qty,unitrate);\n                if (_records &gt; 0)\n                {\n                    return RedirectToAction(\"Index1\", \"Shopping\");\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\",\"Can Not Update\");\n                }\n            }\n            return View(\"Index1\");\n        }\n</code></pre>\n\n<p>Any suggestion?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>     @using (Html.BeginForm(\"Update\", \"Shopping\", FormMethod.Post))\n     {\n\n                @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n                @Html.Hidden(\"productid\", item.ProductID as string)\n                @Html.TextBox(\"qty\", item.Quantity)\n                @Html.Hidden(\"unitrate\", item.Rate)\n\n                &lt;input type=\"submit\" value=\"Update\" /&gt;\n     }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","json"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12961860,"title":"Jquery getJson need to pass Model from my MVC View","body":"<p>I am using getJSON and what I like to pass as part of the url is the model that I have in my View\n(I am using MVC C#) </p>\n\n<pre><code>    $.getJSON(url, function (data) {\n\n\n\n    });\n</code></pre>\n\n<p>I am wondering if there is a way to do this.</p>\n\n<pre><code>   @model PVC.Domain.Lab.Models.ModelMain\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12960814,"title":"mvc c# return view() not defaulting to correct values","body":"<p>I am not sure if I am overlooking something obvious.\nOnce I do a POST, I have the following (Note: What I am trying to do is to default the same view with some null values so the user can create another entry):</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult QkInsert(ProgInfo model)\n    {\n\n        if (ModelState.IsValid)\n        {\n            ProgService.InsertQuickEntry(model);\n\n\n            model.Name = null;\n            model.Address = null;\n            model.Phone = null;            \n\n            return view(model);\n\n\n        }\n\n         return view(model);\n</code></pre>\n\n<p>What is strange is that when I look at the value of model in the IsValid()</p>\n\n<pre><code>    return view(model) \n</code></pre>\n\n<p>I do see the null values.\nBut when it is shown on the view, it is not null. It is basically the same view as when I had entered the data the first time. Any idea? Have I overlooked something?</p>\n\n<p>Also notice how I have done return view(model) twice. Is there any other way of doing this to where I do it only once and not repeat?  </p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12963462,"title":"Partial Layout in MVC","body":"<p>I have one Partial View as follows </p>\n\n<p>_MyNav.cshtml</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;\n        @Html.ActionLink(\"Link1\", \"Index\", \"Link\",new { id=\"\" }, null)\n    &lt;/li&gt;\n    &lt;li&gt;\n        @Html.ActionLink(\"Link2\", \"Index\", \" Link \",new { id=\"1\" }, null)\n    &lt;/li&gt;\n    &lt;li&gt;\n        @Html.ActionLink(\"Link3\", \"Index\", \" Link \",new { id=\"2\" }, null)\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>I included the partial view in two places in my main layout file.\n@Html.Partial(\"_MyNav\").\nOne of the partial views needs to have all the links the other one needs to have two links.</p>\n\n<p>Is there anyway that I would be able to hide one of the links in _MyNav by passing the parameter?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12967255,"title":"Templates and Partial Views - Use one OR the Other?","body":"<p>So I want to verify something.  And that is to me you wouldn't need to use Partials at all if going the template route as your template is essentially providing the markup as a partial would but obviously you're doing it different via templates.</p>\n\n<p>So you wouldn't use both.  I assume If I'm going to go with something like Knockout, I'd probably most likely never use partials in my MVC app, correct?</p>\n"},{"tags":["javascript","html","css","asp.net-mvc","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":135,"score":7,"question_id":12154859,"title":"What is the best practice to include js/css files in an enterprise application framework?","body":"<p>I am working on an enterprise application development in ASP.NET MVC3. Of-course I have different master layouts and multiple views. </p>\n\n<p><strong>My concerns</strong></p>\n\n<ul>\n<li>Including all js/css files in master layout might affect the performance of the page</li>\n<li>Including the files in views (where it is required) are creating duplicate references (kick-off jquery/other libraries)</li>\n<li>More the references, the more the back&amp;forth requests between client and server - which in turn affect the performance of the output page</li>\n</ul>\n\n<p><strong>My Thoughts</strong></p>\n\n<ol>\n<li>Create a custom list of required resources and store it in ViewBag. Let the master layout refer this object to include the js/css files</li>\n<li>Or add the link referring an action with some key (an unique value to identify the page being rendered) and dynamically generate an output with all required resources as a single response. And cache the output (inmem/staticfile) with the unique key for succeeding requests. A kind of custom resource bundling.</li>\n</ol>\n\n<p>Please share your ideas, any thoughts and suggestions are welcome! </p>\n\n<blockquote>\n  <p>EDIT: Sep.17.2012</p>\n</blockquote>\n\n<p>Below answers are more talking about optimization techniques in web application development world - appreciating those answers.</p>\n\n<p>I would like to discuss from an architectural perspective, focusing on creating a dynamic resource collection required by the page being rendered.</p>\n\n<p>For example, in specific views I would like to use jQuery UI which requires jquery-ui-1.8.11.min.js, and in certain views I would like to use MVC3 ajax which requires MicrosoftMvcAjax.js and jquery.unobtrusive-ajax.min.js</p>\n\n<p>I don't want to include permanent reference in master layout, which will result in loading these js for all views. Rather I would like to include the js files dynamic during runtime.</p>\n\n<p>Hope this might have added clarity!</p>\n\n<p>Thanks for the help - Vinod</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12966837,"title":"Add dynamically javascript to layout in asp.net c# + razor like Page.Title","body":"<p>I'm a newbie in ASP.NET and am trying to learn a little more.</p>\n\n<p>I created a layout called Layout.cshtml:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n         &lt;title&gt;Page.Title&lt;/title&gt;\n\n    &lt;/head&gt;\n    &lt;body&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And I set Layout.cshtml as the default layout of all pages in _PageStart.cshtml:</p>\n\n<pre><code>@{Layout=\"~/Shared/Layout.cshtml\";};\n</code></pre>\n\n<p>I learned if I change Page.Title in each page, I can dynamically set the page title. For example, I have this in my Default.cshtml and it works fine:</p>\n\n<pre><code>@{Page.Title = \"HOME\";} //the page title has changed to HOME\n&lt;h1&gt;This is the home page&lt;/h1&gt;\n</code></pre>\n\n<p>My question is, in asp.net+razor does there exist a way to add Javascript (or css) dynamically to  like Page.Title?</p>\n\n<p>Thanks for help dudes!</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12968016,"title":"Jquerymobile anchor tag issue","body":"<p>I am using jQuery mobile. and in it anchor tag always add a # value before requesting url. so that first default page of website runs and then next page is added in dom. but in my case anchor tags are not adding hash values. how can i add them. </p>\n\n<p>this is my page's head section</p>\n\n<pre><code>&lt;head runat=\"server\"&gt;\n    &lt;title&gt;Index&lt;/title&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n    &lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\" /&gt;\n    &lt;link rel=\"stylesheet\" href=\"http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css\" /&gt;\n    &lt;script src=\"http://code.jquery.com/jquery-1.8.2.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js\"&gt;&lt;/script&gt;\n    &lt;link href=\"/Content/style.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>Thanx in advance</p>\n"},{"tags":["asp.net-mvc","entity-framework","ado.net","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12954104,"title":"willcascadeondelete in .netMVC4 is not working","body":"<p>I am creating .net MVC4 application. i have two entitites named group and groupmembers. group has a one to many relations with groupmembers.\nHere are my classes</p>\n\n<pre><code>public class Group\n  { \n    public int GroupId{get;set;}\n    public virtual ICollection&lt;GroupMember&gt; Members { get; set; }\n  }\n\npublic class GroupMember\n{\n  public int GroupMemberId { get; set; }\n\n    public int GroupId { get; set; }\n    public virtual Group Group { get; set; }\n\n    }\n</code></pre>\n\n<p>on the model side i am using the code</p>\n\n<pre><code> modelBuilder.Entity&lt;GroupMember&gt;()\n          .HasRequired(e =&gt; e.Group)\n            .WithMany()\n            .HasForeignKey(e =&gt; e.GroupId)\n           .WillCascadeOnDelete();\n</code></pre>\n\n<p>My problem is while deleting the group the members of the group is not getting deleted.Can any one please give me a solution</p>\n"},{"tags":["asp.net-mvc","json","serialization","circular-reference"],"answer_count":6,"favorite_count":8,"up_vote_count":17,"down_vote_count":0,"view_count":6684,"score":17,"question_id":2002940,"title":"Json and Circular Reference Exception","body":"<p>I have an object which has a circular reference to another object. Given the relationship between these objects this is the right design.</p>\n\n<p><strong>To Illustrate</strong></p>\n\n<pre><code>Machine =&gt; Customer =&gt; Machine\n</code></pre>\n\n<p>As is expected I run into an issue when I try to use Json to serialize a machine or customer object. What I am unsure of is how to resolve this issue as I don't want to break the relationship between the Machine and Customer objects. What are the options for resolving this issue?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Presently I am using <a href=\"http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.json.aspx\" rel=\"nofollow\">Json method provided by the Controller base class</a>. So the serialization I am doing is as basic as:</p>\n\n<pre><code>Json(machineForm);\n</code></pre>\n"},{"tags":["asp.net-mvc","url","web-config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12967577,"title":"How can I redirect my abc.com to www.abc.com?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3197319/asp-net-mvc-how-to-redirect-a-non-www-to-www-and-vice-versa\">asp.net mvc: How to redirect a non www to www and vice versa</a>  </p>\n</blockquote>\n\n\n\n<p>I want to redirect my site url from abc.com to www.abc.com so that I get standard URL format. \nHow can I achieve this? Can any one help me out?</p>\n"},{"tags":["c#","asp.net-mvc","linq","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12966932,"title":"Getting vote counts for a Post using Linq","body":"<p>Here's my database schema:</p>\n\n<pre><code>create table Post\n(\n    PostId int primary key identity,\n    ImageUrl nvarchar(1024) not null,\n    [Description] nvarchar(256) not null,\n    UserId int foreign key references [User](UserId),\n    DateOfPost datetime not null,\n    Score int\n)\n\ncreate table Vote\n(\n    VoteId int primary key identity,\n    UserId int foreign key references [User](UserId),\n    PostId int foreign key references Post(PostId),\n    VoteDirection bit not null,\n    DateOfVote datetime not null\n)\n</code></pre>\n\n<p>Basically, I want to order the Posts by <code>[VoteDirection == true] - [VoteDirection == false]</code>. So it 20 people votes \"true\", and 5 vote \"false\", the temporary score used for ordering would be 15.</p>\n\n<p>Is there also a way to select a range of date using the DateOfVote parameter?</p>\n\n<p>Here's what I've tried:</p>\n\n<pre><code>    // www.foo.com/top/today\n    public ActionResult Today()\n    {\n        var posts = postRepository.FindAllPosts().Where(x =&gt; x.DateOfPost == DateTime.Today)\n                                                 .OrderByDescending(x =&gt; x.Votes.Where(c =&gt; c.VoteDirection == true) - x.Votes.Where(c =&gt; c.VoteDirection == false));\n        return View(posts);\n    }\n</code></pre>\n\n<p>I'm getting the error:</p>\n\n<blockquote>\n  <p>Error 2   Operator '-' cannot be applied to operands of type\n  'System.Collections.Generic.IEnumerable'\n  and\n  'System.Collections.Generic.IEnumerable'</p>\n</blockquote>\n\n<p>Which is understandable, they're both collections not actual integers. But it should illustrate what I'm trying to do. Any suggestions?</p>\n"},{"tags":["asp.net-mvc","msdeploy","web-deployment"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":12966449,"title":"Web Deploy / Publish is adding a unknown connection string?","body":"<p>Previously publishing my web api app was working perfectly. Today i converted my app from being \"any cpu\" to x86. Now when i'm publishing its adding a connection string to the web config which is causing my app to fail. At first i though i maybe accidently adding something to the web.config transform file but nope i haven't. Here is my transform file:</p>\n\n<pre><code>&lt;configuration xmlns:xdt=\"http://schemas.microsoft.com/XML-Document-Transform\"&gt;\n  &lt;!--\n    In the example below, the \"SetAttributes\" transform will change the value of\n    \"connectionString\" to use \"ReleaseSQLServer\" only when the \"Match\" locator\n    finds an attribute \"name\" that has a value of \"MyDB\".\n\n    &lt;connectionStrings&gt;\n      &lt;add name=\"MyDB\"\n        connectionString=\"Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True\"\n        xdt:Transform=\"SetAttributes\" xdt:Locator=\"Match(name)\"/&gt;\n    &lt;/connectionStrings&gt;\n  --&gt;\n  &lt;entityFramework xdt:Transform=\"Replace\"&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\"&gt;\n      &lt;parameters&gt;\n        &lt;parameter value=\"Server=MyWebServer;Database=RunLog;Trusted_Connection=True; MultipleActiveResultSets=True\" /&gt;\n      &lt;/parameters&gt;\n    &lt;/defaultConnectionFactory&gt;\n  &lt;/entityFramework&gt;\n\n  &lt;system.web&gt;\n    &lt;compilation xdt:Transform=\"RemoveAttributes(debug)\" /&gt;\n    &lt;!--\n      In the example below, the \"Replace\" transform will replace the entire\n      &lt;customErrors&gt; section of your web.config file.\n      Note that because there is only one customErrors section under the\n      &lt;system.web&gt; node, there is no need to use the \"xdt:Locator\" attribute.\n\n      &lt;customErrors defaultRedirect=\"GenericError.htm\"\n        mode=\"RemoteOnly\" xdt:Transform=\"Replace\"&gt;\n        &lt;error statusCode=\"500\" redirect=\"InternalError.htm\"/&gt;\n      &lt;/customErrors&gt;\n    --&gt;\n  &lt;/system.web&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Here is my web config file:</p>\n\n<pre><code>&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=169433\n  --&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n  &lt;/configSections&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" /&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" /&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-Integrated-4.0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness32\" responseBufferLimit=\"0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness64\" responseBufferLimit=\"0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-Integrated-4.0\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" type=\"System.Web.Handlers.TransferRequestHandler\" preCondition=\"integratedMode,runtimeVersionv4.0\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n  &lt;entityFramework&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\"&gt;\n      &lt;parameters&gt;\n        &lt;parameter value=\"Data Source=(localdb)\\v11.0; Integrated Security=True; MultipleActiveResultSets=True\" /&gt;\n      &lt;/parameters&gt;\n    &lt;/defaultConnectionFactory&gt;\n  &lt;/entityFramework&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>Finally after i publish this is what my web config file looks like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!--\n  For more information on how to configure your ASP.NET application, please visit\n  http://go.microsoft.com/fwlink/?LinkId=169433\n  --&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n  &lt;/configSections&gt;\n  &lt;system.web&gt;\n    &lt;compilation targetFramework=\"4.5\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.5\" /&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;handlers&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" /&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" /&gt;\n      &lt;remove name=\"ExtensionlessUrlHandler-Integrated-4.0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness32\" responseBufferLimit=\"0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness64\" responseBufferLimit=\"0\" /&gt;\n      &lt;add name=\"ExtensionlessUrlHandler-Integrated-4.0\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" type=\"System.Web.Handlers.TransferRequestHandler\" preCondition=\"integratedMode,runtimeVersionv4.0\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n  &lt;entityFramework&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\"&gt;\n      &lt;parameters&gt;\n        &lt;parameter value=\"Server=MyWebServer;Database=RunLog;Trusted_Connection=True; MultipleActiveResultSets=True\" /&gt;\n      &lt;/parameters&gt;\n    &lt;/defaultConnectionFactory&gt;\n  &lt;/entityFramework&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"RunLog\" connectionString=\"RunLog_ConnectionString\" providerName=\"System.Data.SqlClient\" /&gt;\n  &lt;/connectionStrings&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>If you look above you will see a connection string was added.</p>\n\n<p>After some research i found that you can add a connection string durinig publish. Well i've been publishing with the same profile so i deleted the profile multiple times and created a new one and made sure to uncheck the box to add a connection string:\n<img src=\"http://i.stack.imgur.com/5J32o.png\" alt=\"Publishing\"></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!--\nThis file is used by the publish/package process of your Web project. You can customize the behavior of this process\nby editing this MSBuild file. In order to learn more about this please visit http://go.microsoft.com/fwlink/?LinkID=208121. \n--&gt;\n&lt;Project ToolsVersion=\"4.0\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\"&gt;\n  &lt;PropertyGroup&gt;\n    &lt;WebPublishMethod&gt;MSDeploy&lt;/WebPublishMethod&gt;\n    &lt;SiteUrlToLaunchAfterPublish /&gt;\n    &lt;MSDeployServiceURL&gt;http://MyWebServer&lt;/MSDeployServiceURL&gt;\n    &lt;DeployIisAppPath&gt;My Web Site/Go&lt;/DeployIisAppPath&gt;\n    &lt;RemoteSitePhysicalPath /&gt;\n    &lt;SkipExtraFilesOnServer&gt;False&lt;/SkipExtraFilesOnServer&gt;\n    &lt;MSDeployPublishMethod&gt;RemoteAgent&lt;/MSDeployPublishMethod&gt;\n    &lt;UserName&gt;JohnBob&lt;/UserName&gt;\n    &lt;_SavePWD&gt;False&lt;/_SavePWD&gt;\n    &lt;PublishDatabaseSettings&gt;\n      &lt;Objects xmlns=\"\"&gt;\n        &lt;ObjectGroup Name=\"RunLog\" Order=\"1\" Enabled=\"False\"&gt;\n          &lt;Destination Path=\"\" /&gt;\n          &lt;Object Type=\"DbCodeFirst\"&gt;\n            &lt;Source Path=\"DBContext\" DbContext=\"RunLog.DL.RunLogContext, RunLog.DL\" Origin=\"Convention\" /&gt;\n          &lt;/Object&gt;\n        &lt;/ObjectGroup&gt;\n      &lt;/Objects&gt;\n    &lt;/PublishDatabaseSettings&gt;\n  &lt;/PropertyGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;MSDeployParameterValue Include=\"$(DeployParameterPrefix)RunLog-Web.config Connection String\"&gt;\n      &lt;UpdateDestWebConfig&gt;False&lt;/UpdateDestWebConfig&gt;\n    &lt;/MSDeployParameterValue&gt;\n  &lt;/ItemGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;_ConnectionStringsToInsert Include=\"RunLog\" /&gt;\n  &lt;/ItemGroup&gt;\n&lt;/Project&gt;\n</code></pre>\n\n<p>As you can see there is connection stuff in there but i specifically unchecked \"use this connection string at runtime (update destination web config). If i delete the connection string that was added my site works perfectly.</p>\n\n<p>Does anyone know whats going on?</p>\n\n<p>Edit:<br>\nI thought maybe i was doing doing something wrong but after working through it tonight i'm thinking it my be a bug. I decided to rollback all my code and see if i could reproduce the problem. Previously in the \"Package/Publish Web\" tab in properties the \"Include all database configured in the Package/Publish SQL Tab: is selected. In the \"Package/Publish SQL\" Tab there is one connection string defined in \"database entries\" but its blank. If i leave it as is and try to publish everything works perfectly. If i delete the connection string and re-add it things get messed up again. In the dialog you see above if the database section is blank everything works correctly when your creating a profile but if it has remote connection string box then things wont' work correctly</p>\n"},{"tags":["asp.net-mvc","jqgrid-asp.net"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2536,"score":0,"question_id":3228582,"title":"How to pass values from Jqgrid onselect row to another grid","body":"<p>I have to get value from Jqgrid Selected row and populate one more grid with datas based on the selected value from the master grid. I dont want to use master detail or subgrdi in Jqgrid. Since I am using MVC, is there any way to populate the second jqgrid in one more view?\nI am not able to get the column value on selected row to post it to the second grid.</p>\n\n<p>here is my code</p>\n\n<pre><code>$(document).ready(function() {   \n\n        $(\"#UBSImageList\").jqGrid({\n\n            url: '&lt;%= Url.Content(\"~/UpdateBatchStatus/UBSDataJson/\") %&gt;',   \n            datatype: \"json\",\n            mtype: 'POST',\n            colNames: ['BatchImageName'],\n            colModel: [\n                        {name:'BatchImageName', index:'BatchImageName', align: 'left', width: 40, editable: false ,sortable: true}\n                      ],\n            rowNum: 20,\n            rowList: [10, 20, 30, 50],\n            pager: jQuery('#UBSImagePager'),\n            viewrecords: true,\n            imgpath: '&lt;%= Url.Content(\"~/Content/Scripts/themes/basic/images\")%&gt;', \n            sortname: 'BatchImageName',\n            sortorder: \"asc\",\n            autowidth: true,\n            caption: 'Client Payor Group',\n            height: 350\n        }); \n\n\n        $('#UBSImageList').setGridParam({\n        onSelectRow: function(id) {                   \n       window.location = '/UpdateBatchStatus/Details?id=' + id;    \n        }\n        });\n\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","iis","internet-explorer-8","lambda-functions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12966060,"title":"Object reference not set to an instance of an object at lambda method (MVC ASP)","body":"<p>I am developing an application in MVC. Everything works great when I'm debugging, in every browser.\nThe problem is that I can't make it work once I install the application in the server, because it shows me the next exception only in IE8,:</p>\n\n<pre><code>Object reference not set to an instance of an object.\n   at Eco.Administration.Web.UI.Controllers.CatalogController.ProcesarListaFactoresPorFiltro(String Rama, String TipoCredito, String Periodo, String Ubicacion)\n   at Eco.Administration.Web.UI.Controllers.CatalogController.EcoEditaXML(String Ram, String Tip, String Perio, String ubica, Int32 Id, String mensaje)\n   at *lambda_method(Closure ,* ControllerBase , Object[] )\n   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)\n</code></pre>\n\n<p>I have realized that when I delete a line in my controller (a lambda function) it works fine. </p>\n\n<p>Does anybody knows if there is a problem in IE8 related to lambda functions?\nCould it be a misconfiguration in IIS?</p>\n"},{"tags":["asp.net-mvc","validation","dataannotations"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":12965013,"title":"How do I get my custom requiredif attribute to prevent other attributes from firing","body":"<p>I'm working on an MVC application.</p>\n\n<p>I've decorated a property with <code>EqualTo</code> found <a href=\"http://dataannotationsextensions.org/EqualTo/Create\" rel=\"nofollow\">here</a> as well as a custom RequiredIf attribute as suggested <a href=\"http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx\" rel=\"nofollow\">here</a>.</p>\n\n<p>My issue is that even when the field is supposed to be required and isn't the <code>EqualTo</code> logic is firing. So I get error messages saying the field is required but also that the field doesn't match. </p>\n\n<p>If I replace the <code>Requiredif</code> with a regular <code>Required</code> only the <code>Required</code> message will show.</p>\n\n<p>What I'm trying to figure out is how the <code>EqualTo</code> logic is prevented when combined with the <code>Required</code> attribute but not prevented when combined with my custom <code>RequiredIf</code>.</p>\n\n<p>Any suggestions would be most appreciated, I've been racking my brain most of the day trying to figure out the mvc internals around <code>Required</code>.</p>\n"},{"tags":["asp.net-mvc","mobile"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":188,"score":2,"question_id":12710026,"title":"How does MVC4 detect a mobile browser?","body":"<p>I've just followed Scott Hanselmans tutorial on <a href=\"http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx\" rel=\"nofollow\">making a switchable site in MVC4.</a></p>\n\n<p>I'm using the Opera mobile emulator to test as I don't have VS2102. </p>\n\n<p>When rendering my page in the emulator <code>Request.Browser.IsMobileDevice</code> is false although it still renders the mobile view.</p>\n\n<p><img src=\"http://i.stack.imgur.com/UjNm9.png\" alt=\"enter image description here\"></p>\n\n<p>My questions are: </p>\n\n<ul>\n<li>Why/How does MVC4 decide to render the mobile view? It doesn't seem like it looks at <code>Request.Browser.IsMobileDevice</code>.</li>\n<li>Will the View Switcher be displayed on a real mobile device?</li>\n</ul>\n\n<p><strong>Edit:</strong></p>\n\n<p>I think I realised my mistake: </p>\n\n<p>To get it to work with the opera emulator I added a <code>MobileDisplayMode</code> as described here: \n<a href=\"http://stackoverflow.com/questions/9614576/asp-net-mvc-4-mobile-features\">ASP.NET MVC 4 Mobile Features</a></p>\n\n<p>It seems that that solution works with rendering correctly but <code>Request.Browser.IsMobileDevice</code> won't work. The same goes for <code>ViewContext.HttpContext.GetOverriddenBrowser().IsMobileDevice</code> is there a way to get around this?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12964826,"title":"How to access item index in MVC list view","body":"<p>I'm creating a view where the model is List of Foo.  I want to create a list with an actionlink to select a given Foo item and need to pass it back to the controller. However, there is nothing unique enough in Foo to tie to the actionlink. I'd like to pass the index of the item in Foo but don't know how to get the index from the model inside of the view. </p>\n\n<p>Is this possible to do this without creating a viewmodel that contains the index?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":8,"favorite_count":17,"up_vote_count":70,"down_vote_count":0,"view_count":25721,"score":70,"question_id":1961114,"title":"Date only from TextBoxFor()","body":"<p>I'm having trouble displaying the only date part of a DateTime into a textbox using TextBoxFor&lt;,>(expression, htmlAttributes).</p>\n\n<p>The model is based on Linq2SQL, field is a DateTime on SQL and in the Entity model.</p>\n\n<p><strong>Failed:</strong></p>\n\n<pre><code>&lt;%= Html.TextBoxFor(model =&gt; model.dtArrivalDate, String.Format(\"{0:dd/MM/yyyy}\", Model.dtArrivalDate))%&gt;\n</code></pre>\n\n<p>This trick seems to be depreciated, any string value in the object htmlAttribute is ignored.</p>\n\n<p><strong>Failed:</strong></p>\n\n<pre><code>[DisplayFormat( DataFormatString = \"{0:dd/MM/yyyy}\" )]\npublic string dtArrivalDate { get; set; }\n</code></pre>\n\n<p>I would like to store and display only the date part on the details/edit view, without the \"00:00:00\" part.</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1044,"score":0,"question_id":4650136,"title":"Performance reprogramming website in MVC3 with Entity Framework","body":"<p>At the moment I have a fairly big website with about 10k visitors a day.</p>\n\n<p>This is a community website with news/blogs/videos and a big forum. </p>\n\n<p>This all runs on a self made PHP5 application which performance faily well, has good performance. The database is a MySQL5.1 database.</p>\n\n<p>Now I am getting fedup with PHP and the loose typed framework, lack of namespacing and a proper MVC setup, so I am thinking of rewriting the site in MVC3 ASP.NET.</p>\n\n<p>Now I have experience with this, but not in the MVC framework yet, and I have a few questions about the performance, especially the Entity Framework:\nIs it even worth using the entity framework? Will it cost alot of overhead and performance degration? I am not sure yet if I should switch to MSSQL.</p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","content-management-system"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12950616,"title":"What would be my best approach to an ASP.NET MVC project with CMS","body":"<p><em><strong>The Task</em></strong></p>\n\n<p>I've been given a task to build an online store. The site would support browsing products, online shopping and a forum. There would be two actors on the site - regular clients and privileged clients(with discounts). The products, sold on the site, would be pulled out from the db of some storage program and queued for modifications (like product name validation, adding missing details, etc) before they are displayed on the site. </p>\n\n<p>That about covers the whole project.</p>\n\n<p><em><strong>The Inconvenience</em></strong></p>\n\n<p>Except that the client also requires that he can add/remove and edit content on the site.</p>\n\n<p><em><strong>What I tough would be a solution</em></strong></p>\n\n<p>So, in this case a CMS is what is needed.. Right? At least that's what I tough, tho I never used one. So I looked up some .Net CMSes and I chose Umbraco. </p>\n\n<p><em><strong>The Disappointment</em></strong></p>\n\n<p>After i saw how Umbraco is used, I no longer feel like this is what I need. I tough that a CMS for .Net would integrate with VisualStudio and not stand in the way of ASP.NET MVC developing. But it did. And now i'm back at point zero, since i have to choose either to use CMS and forget about .net or develop in .net and not being able to edit content...</p>\n\n<p><em><strong>The Question</em></strong></p>\n\n<p>How do i develop a site in VS using asp.Net MVC and support a CMS? Is that even possible ?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12944820,"title":"Is there a generic way to get EF to return new model data and associated model data after committing changes?","body":"<p>Given the following two models:</p>\n\n<pre><code>public class Card\n{\n    public int CardId { get; set; }\n\n    public Media Media { get; set; }\n}\n\npublic class Media\n{\n    public int MediaId { get; set; }\n\n    [Required]\n    public string FileName { get; set; }\n}\n</code></pre>\n\n<p>And the following controller method:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Create(Card card)\n{\n    db.Media.Attach(card.Media);\n\n    ModelState.Remove(\"Media.FileName\");\n\n    if (ModelState.IsValid)\n    {\n        db.Cards.Add(card);                \n        db.SaveChanges();\n    }\n\n    return JsonNetSerializedResult(card);\n}\n</code></pre>\n\n<p>I want to create a new Card, but associate it with an existing Media object. I POST to \"Controller/Create\" and include a \"Media.MediaId\" parameter that contains the ID of the existing Media record and let EF make the association.</p>\n\n<p>However, after SaveChanges() is called, the only property updated on the Card instance is the CardId. I also need to retrieve the Media.FileName and set that property on the Card instance.</p>\n\n<p>Is there a generic way to tell EF that I want return the updated Card data, and to also return the associated Media data commiting the data?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","http-post","http-get"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":12951870,"title":"MVC4 Ignoring [HttpGet] and [HttpPost] attributes","body":"<p>I am attempting to make a simple test website to allow me to list, create, edit and delete customer objects using MVC4.</p>\n\n<p>Inside my controller I have 2 create methods, a Get for when the form loads with the controls, and a Post that actually saves the data.</p>\n\n<pre><code>    //\n    // GET: /Customer/Create\n\n    [HttpGet]\n    public ActionResult Create()\n    {\n        return View();\n    }\n\n    //\n    // POST: /Customer/Create\n\n    [HttpPost]\n    public ActionResult Create(Customer cust)\n    {\n        if (ModelState.IsValid)\n        {\n            _repository.Add(cust);\n            return RedirectToAction(\"GetAllCustomers\");\n        }\n\n        return View(cust);\n    }\n</code></pre>\n\n<p>However when I run the project and attempt to access the create action I get an error that:</p>\n\n<pre><code>The current request for action 'Create' on controller type 'CustomerController' is ambiguous between the following action methods:\nSystem.Web.Mvc.ActionResult Create() on type [Project].Controllers.CustomerController\nSystem.Web.Mvc.ActionResult Create([Project].Models.Customer) on type [Project].Controllers.CustomerController\n</code></pre>\n\n<p>My I understand that it can't see the difference between my Get and Post methods, but I have added the attribues.  What could be the cause of this and how can I make it work again?</p>\n"},{"tags":["asp.net-mvc","html5","asp.net-mvc-4","local-storage","offline"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12963738,"title":"mobile site to work offline and sync changes once connection established","body":"<p>I am currently developing a mvc4 application that needs to work on mobile browsers.</p>\n\n<p>One of the requirements I have for it is that if the device cant connect to the internet, the site should still \"work\", and any changes get sync'd to the server once an internet connection is reestablished. </p>\n\n<p>The site is an ecommerce site so I would be looking at such functionality as adding items to a shopping cart etc.</p>\n\n<p>I had looked at html5 local storage to manage the changes when the app is offline but not sure if that storage will exist across multiple pages of just a single page. Can anyone confirm? I plan in storing the page on the clients device by using a cache manifest file.</p>\n\n<p>I would like some pointers as to how I can achieve a site to work offline and once a conneection is establish, changes syncd to the server?</p>\n"},{"tags":["asp.net-mvc","telerik"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12963674,"title":"MVC Upload control","body":"<p>I am developing a MVC3 (razorview) application that makes use of the Telerik Controls.\nSo what I am doing is the following:</p>\n\n<p>I want to upload a file, do some validation. If the file is valid I want to give the user the option to upload the file permanently. If it is not valid, the errors are displayed and the user can't upload the file.</p>\n\n<p>This is what I have so far:</p>\n\n<p>Javascript code:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n         function onSuccess(e) {\n    if (jQuery.isEmptyObject(e.response.errors) &amp;&amp; jQuery.isEmptyObject(e.response.warnings)) {\n            $(\"#successmsg\").show();\n        } else {\n\n            var errorMsg = \"\";\n            if (!jQuery.isEmptyObject(e.response.errors)) {\n                for (var i = 0; i &lt; e.response.errors.length; i++) {\n                    errorMsg = errorMsg + \"&lt;li&gt;\" + e.response.errors[i] + \"&lt;/li&gt;\";\n                }\n            }\n            if (errorMsg != \"\") {\n                var strErrorContent = $(\"#errormsg_template\").html();\n                $(\"#errormsg\").html(strErrorContent.replace(\"{0}\", errorMsg));\n                $(\"#errormsg\").show();\n            }\n        }\n    }\n</code></pre>\n\n<p>Telerik component in view:</p>\n\n<pre><code>&lt;p&gt;\n    @Html.Telerik().Upload().Name(\"file_upload\").Multiple(false).Async(settings =&gt;\n   {\n       settings.AutoUpload(false);\n       settings.Save(\"Test\", \"Pricat\");\n   }).ClientEvents(events =&gt;\n   {\n       events.OnError(\"onError\");\n       events.OnSuccess(\"onSuccess\");\n       events.OnUpload(\"onUpload\");\n   })\n&lt;/p&gt;\n</code></pre>\n\n<p>So this code is working for the validation part. The user selects the file, the file is uploaded and some internal processing is validating the message.\nIf the message is valid, a successmessage is shown. If it not valid, the errors are displayed.</p>\n\n<p>How should I proceed to add a button that does the upload (which is basically just another method call), without browsing to the file again?</p>\n\n<p>So the following </p>\n\n<pre><code>settings.Save(\"Test\", \"Pricat\");\n</code></pre>\n\n<p>should become </p>\n\n<pre><code>settings.Save(\"Upload\", \"Pricat\");\n</code></pre>\n\n<p>So in the controller I have these 2 methods:</p>\n\n<pre><code>public ActionResult Upload(HttpPostedFileBase file_upload) { }\npublic ActionResult Test(HttpPostedFileBase file_upload) { }\n</code></pre>\n\n<p>What I had in mind:\nIn javascript, if the e.reponse doesn't contain errors, display a button (ASP.NET button, another upload telerik button, I don't know..).\nWhen that button is clicked, it should call the \"Upload\" method in my controller. I just don't know how to send the file to that method</p>\n\n<p>Does anyone know how to do this?\nOr any other suggestions are more than welcome!</p>\n\n<p>I hope it is a bit clear.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Best regards.</p>\n"}]}
{"total":44785,"page":18,"pagesize":100,"questions":[{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12941556,"title":"MVC 3 Membership service resetpassword Issue","body":"<p>I currently have an MVC 3 application which requires the Security Answer to be correct when user forgets the password.</p>\n\n<p>However, I want a System Administrator to be able to Reset the Password of any user without knowing the Security Answer.</p>\n\n<p>Any possible solution for this?</p>\n"},{"tags":["asp.net-mvc","paypal-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12963602,"title":"Error when adding paypal merchant api view to controller in mvc 4","body":"<p>When I try to add a strongly typed view in my controller for the Paypal Merchant Api, I get the folowing error: <a href=\"http://screencast.com/t/YcC0vTEd\" rel=\"nofollow\">http://screencast.com/t/YcC0vTEd</a></p>\n\n<p>I have tried removing the reference and readding it but without any luck. </p>\n\n<p>Any ideas ?</p>\n\n<p>thanks</p>\n\n<p>Thomas</p>\n"},{"tags":["asp.net-mvc","attributes","html-helper"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2917,"score":1,"question_id":2221977,"title":"Html Attribute for Html.Dropdown","body":"<p>I am using a dropdown list as follows. </p>\n\n<pre><code>&lt;%=Html.DropDownList(\"ddl\", ViewData[\"Available\"] as SelectList, \n   new { CssClass = \"input-config\", onchange = \"this.form.submit();\" })%&gt;\n</code></pre>\n\n<p>On its selection change I am invoking post action. After the post the same page is shown on which this drop down is present. I want to know about the HTML attribute for the drop down which will let me preserve the list selection change. But as of now the list shows its first element after the post.\ne.g. The dropdoen contains elements like 1,2,3,etc. By default 1 is selected. If I select 2, the post is invoked and the same page is shown again but my selection 2 goes and 1 is selected again.\nHow can preserve the selection?</p>\n\n<p>Thanks,\nKapil</p>\n"},{"tags":["asp.net-mvc","linq-to-entities","lambda","c#-4.0","poco"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":226,"score":0,"question_id":2328829,"title":"How to use an Argument in NewExpression as Expression to be used in OrderBy method?","body":"<p>First, I use C# 4.0 and EF 4.0 with POCO object to access database. Next, I create some grid (like jqGrid) for displaying data from database via ASP.NET MVC 2.0. This grid can order data by clicking at the column header. Source code could look like this.</p>\n\n<pre><code>// This method will generate data for jqGrid request.\n// jqGridRequest contain several options about how to query data like \n//   Take 10 result\n//   Skip 50 rows\n//   Filter by something\n//   Order by column name\npublic JsonResult GetPeopleData(jqGridRequest req)\n{\n   // This extension method has 2 parameters that are jqGridRequest and \n   // Expression&lt;Func&lt;T, object&gt;&gt; for creating object to be serialized.\n   // In this case, T is People type.       \n   return DataContext.People.AsJqGridResult\n   (\n       req,\n       x =&gt; new \n       {\n           x.ID,\n           Name = x.FirstName + \" \" + x.LastName,\n           x.Age\n       }\n   )\n}\n</code></pre>\n\n<p>Everything works fine. The question is when I try to order \"Name\" column in this grid, jqGrid will send the request that tell controller to order data by \"Name\" column. However, \"Name\" column does not exist on database because it's just a combined value of some column.</p>\n\n<p>The easiest to solve this question is creating some code for doing something like the following code.</p>\n\n<pre><code>DataContext.People.OrderBy(x =&gt; x.FirstName + \" \" + x.LastName);\n</code></pre>\n\n<p>However, I need to create some method to handle any simple orderby condition like this. After I search and try any possibilities about expression. I just found that I can use some data that is contained in NewExpression to order this query. But I do not know how to convert/create Argument in NewExpression object to Expression for using as OrderBy method parameter.</p>\n\n<p><strong>Thanks</strong></p>\n"},{"tags":["asp.net-mvc","portable-areas"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":1,"view_count":1013,"score":5,"question_id":5303903,"title":"Why aren't ASP.Net MVC Portable Areas Thriving Like Rails Plugins?","body":"<p>I love the idea of the Portable Areas in MvcContrib.  After reading up on it, and building a couple for practice, I was surprised not to find a plethora of open source projects leveraging this neat way to distribute features across MVC applications.  </p>\n\n<p>Being a guy who has messed around with Rails frequently, I love that I can find a plugin for just about anything. (Comments, Authentication, Search, CMS, Logging, etc.)  </p>\n\n<p>However, when searching for Portable Areas, the only ones I see are the samples and an OpenId implementation.  </p>\n\n<p>Where is the love for Portable Areas?</p>\n\n<ul>\n<li>Is it too new?</li>\n<li>Is there something wrong with the architecture?</li>\n<li>Is there just not as thriving an open source community as there is in Ruby world?</li>\n</ul>\n"},{"tags":["asp.net-mvc","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12960486,"title":"UI elements from several model properties in ASP.NET MVC","body":"<p>I've been doing some searches, found this <a href=\"http://stackoverflow.com/questions/5037580/asp-net-mvc-3-partial-vs-display-template-vs-editor-template\">ASP.NET MVC 3 - Partial vs Display Template vs Editor Template</a> but I am still not clear as what and how should I use for \"custom UI controls\" for several model properties.</p>\n\n<p>I have two examples in mind:</p>\n\n<p>FistName MiddleInitial LastName \nor Phone Ext</p>\n\n<p>I want to have some sort of a re-usable UI control / template that I can use.</p>\n\n<p>Say, I have a partial view which I use in both Create and Edit views, called _ClientForm. In this view I have Contact1 and Contact2 and related properties in my model. Now, I'd like to create a common look for both of them and display side by side. Also, they both have Phone/Ext properties and I'd like some sort of visual control to be able to re-use it every time I have these two properties in my model.</p>\n\n<p>I am not clear as what I should use and how should I go with the implementation.</p>\n\n<p>Just to make it clear as what I mean.</p>\n\n<p>Right now I have the partial view with the following code</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.Client\n&lt;fieldset&gt;\n    &lt;legend&gt;Client Info&lt;/legend&gt;\n\n    @Html.ValidationSummary(true)\n\n    &lt;input type=\"hidden\" id=\"fntype\" name=\"fntype\"&gt;\n    @Html.HiddenFor(model =&gt; model.Id)\n    @Html.EditorFor(model =&gt; model.Number, EditorTemplate.TextBox)\n\n    @Html.EditorFor(model =&gt; model.Name, EditorTemplate.TextBox)\n\n    @Html.EditorFor(model =&gt; model.Address, EditorTemplate.EditBox)\n\n    &lt;div id=\"ContactsInfo\"&gt;\n        @*Contact 1*@\n        &lt;div id=\"Contact1\"&gt;\n\n            @Html.EditorFor(model =&gt; model.Contact1, EditorTemplate.TextBox)\n            @Html.EditorFor(model =&gt; model.Email1, EditorTemplate.TextBox)\n            @Html.EditorFor(model =&gt; model.Phone1, EditorTemplate.TextBox)\n            @Html.EditorFor(model =&gt; model.Ext1, EditorTemplate.TextBox)\n\n        &lt;/div&gt;\n\n        @*Contact2*@\n        &lt;div id=\"Contact2\"&gt;\n\n            @Html.EditorFor(model =&gt; model.Contact2, EditorTemplate.TextBox)\n\n            @Html.EditorFor(model =&gt; model.Email2, EditorTemplate.TextBox)\n            @Html.EditorFor(model =&gt; model.Phone2, EditorTemplate.TextBox)\n            @Html.EditorFor(model =&gt; model.Ext2, EditorTemplate.TextBox)\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @*&lt;div class=\"clear\"&gt;&lt;/div&gt;*@\n    &lt;div id=\"SaveCancel\" class=\"float-right\"&gt;\n        &lt;button type=\"Submit\" id=\"btnSave\"&gt;Save&lt;/button&gt;\n        &lt;button type=\"reset\" id=\"btnCancel\"&gt;Cancel&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>The view code is already a bit simplified using the technique described here\n<a href=\"http://dotnetspeak.com/index.php/2012/10/asp-net-mvc-template-and-knockout-js\" rel=\"nofollow\">http://dotnetspeak.com/index.php/2012/10/asp-net-mvc-template-and-knockout-js</a></p>\n\n<p>So, as you see I have 2 divs with the Contact information and inside each div I also have Phone/Ext with I'd like to place close to each other.</p>\n\n<p>So, I am thinking I need something reusable for both: the Contact Info and phone/ext.</p>\n\n<p>I also show my Client class for some further clarifications:\nusing System;</p>\n\n<pre><code>using System.ComponentModel.DataAnnotations;\nusing System.ComponentModel;\n\nusing DataAnnotationsExtensions;\nusing System.ComponentModel.DataAnnotations.Schema;\nusing System.Collections.Generic;\n\nnamespace CardNumbers.Objects\n{\n    public class Client\n    {\n        //public Client()\n        //{\n        //    this.ClientOrders = new List&lt;ClientOrder&gt;();\n\n        //    this.Reorders = new List&lt;Reorder&gt;();\n        //}\n\n        [Key]\n        [Column(\"ClientId\",TypeName = \"int\")]\n        public virtual int Id { get; set; }\n        [Required]\n        [DisplayName(\"Client No\")]\n        [Column(\"client_no\", TypeName = \"smallint\")]\n        public virtual Int16 Number { get; set; }\n\n        [Required]\n        [Column(\"client_name\", TypeName = \"varchar\")]\n        [DisplayName(\"Client Name\")]\n        [MaxLength(30, ErrorMessage = \"Client Name should not be longer than 30 characters\" )]\n        [MinLength(3, ErrorMessage = \"Client Name is too short\")]\n        public virtual string Name { get; set; }\n\n        [StringLength(100)]\n        [DisplayName(\"First Contact\")]\n        [DisplayFormat(NullDisplayText = \"\")]\n        [Column(\"Contact1\",TypeName =  \"varchar\")]\n        public virtual string Contact1 { get; set; }\n\n        [Email]\n        [StringLength(100)]\n        [Column(\"c1_email\", TypeName = \"varchar\")]\n        public virtual string Email1 { get; set; }\n\n        [DataType(DataType.PhoneNumber)]\n        [Column(\"C1_Phone\", TypeName = \"varchar\")]\n        [StringLength(10)]\n        [DisplayName(\"Phone\")]\n        public virtual string Phone1 { get; set; }\n\n        [StringLength(5)]\n        [Column(\"C1_Ext\", TypeName = \"varchar\")]\n        [DisplayName(\"Ext\")]\n        public virtual string Ext1 { get; set; }\n\n        [StringLength(100)]\n        [DisplayName(\"Second Contact\")]\n        [Column(\"Contact2\", TypeName = \"varchar\")]\n        public virtual string Contact2 { get; set; }\n\n        [Email]\n        [StringLength(100)]\n        [Column(\"C2_Email\", TypeName = \"varchar\")]\n        public virtual string Email2 { get; set; }\n\n        [DataType(DataType.PhoneNumber)]\n        [StringLength(10)]\n        [DisplayName(\"Phone\")]\n        [Column(\"C2_Phone\", TypeName = \"varchar\")]\n        public virtual string Phone2 { get; set; }\n\n        [StringLength(5)]\n        [DisplayName(\"Ext\")]\n        [Column(\"C2_Ext\",TypeName = \"varchar\")]\n        public virtual string Ext2 { get; set; }\n\n        [DataType(DataType.MultilineText)]\n        public virtual string Address { get; set; }\n\n        [ForeignKey(\"EnteredByOperator\")]\n        public string EnteredBy { get; set; }\n\n        [InverseProperty(\"ClientsEnteredBy\")]\n        public virtual Operator EnteredByOperator { get; set; }\n\n        [ForeignKey(\"ModifiedByOperator\")]\n        public string ModifiedBy { get; set; }\n\n        [InverseProperty(\"ClientsUpdatedBy\")]\n        public virtual Operator ModifiedByOperator { get; set; }\n\n        [DataType(DataType.DateTime)]\n        [DisplayName(\"Created on\")]\n        public DateTime EnteredOn { get; set; }\n\n        [DataType(DataType.DateTime)]\n        [DisplayName(\"Modified on\")]\n        public DateTime? ModifiedOn { get; set; }\n\n        public virtual ICollection&lt;ClientOrder&gt; ClientOrders { get; set; }\n\n        public virtual ICollection&lt;Reorder&gt; Reorders { get; set; }\n    }\n}`\n</code></pre>\n\n<p>`</p>\n\n<p>Thanks a lot in advance.</p>\n"},{"tags":["javascript","html","asp.net-mvc","knockout.js"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12962787,"title":"Serverside HTML rendering and client binding strategi to avoid repeating","body":"<p>For example I have this razor view</p>\n\n<pre><code>@foreach (var item in Model)\n{               \n\n    &lt;a href=\"@Item.Id\"&gt;Hello world&lt;/a&gt;\n}\n</code></pre>\n\n<p>And on the client side I have this little template for binding data.</p>\n\n<pre><code>    var target = target.find(\"tbody\");\n    var markup = \"&lt;a href='${Id}'&gt;Hello world&lt;a&gt;\";\n\n    $.template(\"tmpl\", markup);\n    var elm = $.tmpl(\"data\", data);\n</code></pre>\n\n<p>This view contain ASP.NET Razor Syntax. But often I have a scenario where the same viewmodels could be feath by an AJAX Request and binded to DOM by some Javascript based templateing, like Knockout or jQuert template, CanJS or whatever.</p>\n\n<p>I'm not so comfortable to repeat myself, as I have to do. So what are your strategies? I don't see it as an option to use only clientside as it would affect my SEO.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12961561,"title":"How to pass generic parameter to partial view","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/875085/generic-partial-view-how-to-set-a-generic-class-as-model\">Generic partial view: how to set a generic class as model?</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to build common functionality using generic types but got stuck with below scenario. </p>\n\n<p>View Model</p>\n\n<pre><code>public class DeleteForm&lt;T&gt;  \n{\n    public LogInfo Ticket { get; set; }\n    public string Id { get; set; }\n\n    public DeleteForm() {\n      Ticket = new LogInfo();\n    }\n\n    public DeleteForm(T viewModel) : this() {\n      ViewModel = viewModel;\n    }\n\n    public T ViewModel { get; set; }\n}\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>public ActionResult Index(string name)\n{\n   return View(\"index\", new DeleteForm&lt;List&lt;Users&gt;&gt;(new List&lt;Users&gt;());\n}\n</code></pre>\n\n<p>List Screen</p>\n\n<pre><code>@model DeleteForm&lt;List&lt;Users&gt;&gt;\n//gridview displays list of users\n@Html.Partial(\"revisionwindow\", Model)\n</code></pre>\n\n<p>Partial View</p>\n\n<pre><code>@model DeleteForm&lt;T&gt; &lt;---Its not working\n\n@Html.EditorFor(o=&gt;o.Ticket)\n@Html.EditorFor(o=&gt;o.Id)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jsonp","getjson"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":176,"score":0,"question_id":11462328,"title":"How to send complex array to asp.net mvc controller with JSONP","body":"<p>How can i <strong>SEND</strong> complex type object with array inside it using JSONP</p>\n\n<pre><code> var product= {categories:[ {id:1,text:\"cat 1\"},{id:2,text:\"cat 2\"}],id:43,price:3535};\n $.getJSON(url ,product, function (data) {\n\n //i can get the data from the server but i cant pass the complex array to the server\n });\n</code></pre>\n\n<p>and on asp.net mvc server:</p>\n\n<pre><code>    public JsonpResult Create(Product product)\n    {\n        string thisisok = product.id;\n        string needthis = product.categories[0].text;           \n        return new JsonpResult { Data = true };\n    }\n</code></pre>\n\n<p>how should i pass the complex json using the \"getjson\" method,\ni cant use ajax request because its need to be cross domain</p>\n"},{"tags":["asp.net-mvc","drop-down-menu"],"answer_count":5,"favorite_count":7,"up_vote_count":32,"down_vote_count":0,"view_count":45619,"score":32,"question_id":1297399,"title":"Populating ASP.NET MVC DropDownList","body":"<p>OK, I've been Googling for hours and trying everything and can't get anything to work. I am learning MVC using Sharp Architecture and have generated some basic forms for creating Client objects. I want to fill the state drop down list with a list of US states and let the user pick from that list. I am able to populate the list and get the value back (to save the client) but when I go to edit the client, the client's current state is not selected. I have set the selected value in the SelectList:</p>\n\n<pre><code>&lt;li&gt;\n    &lt;label for=\"Client_StateProvince\"&gt;StateProvince:&lt;/label&gt;\n    &lt;div&gt;\n        &lt;%= Html.DropDownListFor(c=&gt;c.Client.StateProvince, new SelectList(Model.StateProvinces, \"id\", \"Name\", Model.Client.StateProvince), \"-- Select State --\")%&gt;\n    &lt;/div&gt;\n    &lt;%= Html.ValidationMessage(\"Client.StateProvince\")%&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>This does not seem to be good enough. What am I missing?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":714,"score":2,"question_id":4170290,"title":"jQuery Templates and Razor?","body":"<p>Can someone shed some light on how these compare/complement each other in the context of an ASP.NET MVC application? </p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12960623,"title":"MVC3 Html.DisplayFor -- Is it possible to have this control generate an ID?","body":"<p>I want to be able to display some text, but also have the text be modifiable via jQuery.</p>\n\n<pre><code>&lt;%= Html.DisplayFor(model =&gt; model.DeviceComponentName)%&gt;\n</code></pre>\n\n<p>If I used EditorFor instead of DisplayFor I would see an ID for the input control. I do not want the value to be editable in that way, though. So, I have made it a DisplayFor, but it does not generate an ID property for the element.</p>\n\n<p>Should I just wrap the DisplayFor in a div and do something like:</p>\n\n<pre><code>&lt;div id=\"&lt;%= ViewData.TemplateInfo.GetFullHtmlFieldName(\"DeviceComponentName\") %&gt;\"&gt;\n    &lt;%= Html.DisplayFor(model =&gt; model.DeviceComponentName)%&gt;\n&lt;/div&gt;\n\n$('#DeviceComponentName').text('newValue');\n</code></pre>\n\n<p>Or is there a cleaner way of achieving this?</p>\n\n<p><strong>Update:</strong> Is there a way which doesn't depend on hard-coded strings? Something that ties to the object itself so if my property name changes I'd get a compile error?</p>\n\n<p>Also, I am using this code, but I do not see an ID value appear:</p>\n\n<pre><code>&lt;td class=\"editableValue\"&gt;\n    &lt;%--Label should be editable, so it needs an ID, but only will be edited by jQuery so it can't be an EditorFor--%&gt;\n    &lt;%= Html.DisplayFor(model =&gt; model.DeviceComponentName, new { id = \"DeviceComponentName\" })%&gt;\n    &lt;button type=\"button\" id=\"ComponentTreeButton\" class=\"nestedDialogButton\"&gt;...&lt;/button&gt;\n&lt;/td&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-validate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":232,"score":0,"question_id":12753152,"title":"jQuery unobtrusive validation on dynamically generated radio buttons in MVC3?","body":"<p>I've got a dynamic forms app and am trying to apply proper unobtrusive validation for the form elements and am having trouble with getting the form to display validation errors the way I want.</p>\n\n<p>My partial view to render the radio button form items looks like this:</p>\n\n<pre><code>@model FormItem\n\n&lt;div class=\"form-row\"&gt;\n&lt;div class=\"form-item\"&gt;@Model.Text&lt;/div&gt;\n&lt;div class=\"form-item-responses\"&gt;\n    @foreach(FormItemResponse formItemResponse in Model.Responses.OrderBy(x =&gt; x.SortOrder))\n    {\n        if(Model.Required)\n        {\n            @Html.RadioButton(Model.Id.ToString(), formItemResponse.Id, formItemResponse.DefaultSelection, new { @class = \"required\", data_val = \"true\", data_val_required = \"*\"}) @formItemResponse.Text\n\n        }\n        else\n        {\n             @Html.RadioButton(Model.Id.ToString(), formItemResponse.Id, formItemResponse.DefaultSelection) @formItemResponse.Text\n        }\n\n        &lt;text&gt;&amp;nbsp; &amp;nbsp;&lt;/text&gt;\n    }\n    &lt;span class=\"field-validation-valid\" data-valmsg-for=\"@Model.Id.ToString()\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is the final markup for those not familiar with MVC:</p>\n\n<pre><code>&lt;div class=\"form-row\"&gt;\n&lt;div class=\"form-item\"&gt;Form Item Text Here&lt;/div&gt;\n&lt;div class=\"form-item-responses\"&gt;\n    &lt;input class=\"required\" data-val=\"true\" data-val-required=\"*\" name=\"026d44a7-fa55-4fe8-8d2f-4f561c77c716\" type=\"radio\" value=\"dcfa4a9a-53e1-44d5-b6b3-a133673bfa2e\" /&gt;Yes            &amp;nbsp; &amp;nbsp;\n    &lt;input class=\"required\" data-val=\"true\" data-val-required=\"*\" name=\"026d44a7-fa55-4fe8-8d2f-4f561c77c716\" type=\"radio\" value=\"0042876b-2362-4f65-9c8a-dddf7f8206e8\" /&gt;No            &amp;nbsp; &amp;nbsp;\n    &lt;input class=\"required\" data-val=\"true\" data-val-required=\"*\" name=\"026d44a7-fa55-4fe8-8d2f-4f561c77c716\" type=\"radio\" value=\"a0918eab-93b6-4e45-a78d-301e28571037\" /&gt;NA            &amp;nbsp; &amp;nbsp;\n    &lt;span class=\"field-validation-valid\" data-valmsg-for=\"026d44a7-fa55-4fe8-8d2f-4f561c77c716\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>In works in that any group of radio buttons get properly validated, and the <code>*</code> comes up next to the item. However, what I would like to do is change the text color of everything in <code>.form-item-responses</code> to red. Not just the validation error message. </p>\n\n<p>How can I do this? I tried using the <code>invalidHandler</code> like so:</p>\n\n<pre><code> $(\"#items-form\").validate({\n      invalidHandler: function (form, validator) {\n          var errors = validator.numberOfInvalids();\n          console.log(errors);\n          $(\"input.input-validation-error\").each(function() {\n              this.parent().css(\"color\", \"red\");\n          });\n      }\n  });\n</code></pre>\n\n<p>But that appears to override the default behavior and just put a black <code>This field is required</code> next to the first radio button in each answer group. I want the default behavior and then just this extra change.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","telerik","radgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12919167,"title":"Remove the filter for a single RadGrid column","body":"<p>I am using a Telerik RadGrid and have custom filters set up on some of the columns.\nAs part of that custom filter (which is just a textbox) I also have a button that when clicked I want to clear the filter value for that particular column only. </p>\n\n<p>I have the button working and am setting the filter for the particular column to an empty string, then rebinding the grid but this does not remove the filter value. </p>\n\n<p>It seems that only modifying the grid.MasterTableView.FilterExpression actually affects the filter but how can I remove just one column's filter values from the FilterExpression?</p>\n\n<pre><code>&lt;telerik:RadTextBox ID=\"RdTxtC\" EmptyMessage=\"Search\" runat=\"server\" EmptyMessageStyle-Font-Italic=\"true\"\n                                    CssClass=\"padtop4\" HoveredStyle-Font-Italic=\"true\" ClientEvents-OnKeyPress=\"filterC\"\n                                    InputType=\"Text\" Width=\"80%\"&gt;\n                                &lt;/telerik:RadTextBox&gt;\n                                &lt;asp:Button ID=\"ibtnClearFilterTown\" ClientIDMode=\"Static\" runat=\"server\" CssClass=\"clearFilterButton\" OnClick=\"ibtnClearFilterTown_Click\"/&gt;\n</code></pre>\n\n<p>In the code-behind:</p>\n\n<pre><code>  protected void ibtnClearFilterTown_Click(object sender, EventArgs e)\n    {\n         RgClientList.MasterTableView.GetColumnSafe(\"TownCity\").CurrentFilterValue = String.Empty;\n         RgClientList.Rebind();\n     }\n</code></pre>\n\n<p>It seems a fairly simple requirement to remove the filter for a single column so i think I must be missing something obvious - any help is appreciated....</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12960490,"title":"TextBox Value gets blank on Submit","body":"<p>I created a application in MVC2 by choosing (ASP.Net MVC 2 Web Application). This provided some Home/About Controllers/Models/Views.</p>\n\n<h2>I additionally created a Model with the Name of Index like below...</h2>\n\n<pre><code>namespace MvcApplication1.Models\n{\n    public class Index\n    {\n        [DataType(DataType.Text)]\n        public String Name { get; set; }\n    }\n}\n</code></pre>\n\n<h2>Following is my Index View</h2>\n\n<pre><code>&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Index\n&lt;/asp:Content&gt;\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n    &lt;% using (Html.BeginForm()) \n        {%&gt;\n    &lt;%:Html.TextBoxFor(x=&gt; x.Name) %&gt;\n    &lt;input type=\"submit\" name=\"Click here\" /&gt;\n    &lt;%} %&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<h2>Following is my Controller</h2>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(Index Model)\n{\n      ViewData[\"Message\"] = \"Welcome to ASP.NET MVC!\";\n      return View();\n}\n</code></pre>\n\n<h2>Question</h2>\n\n<p>When I keep the Index controller like below. and If I click the submit button. This is clearing the TextBox COntrols. Like below</p>\n\n<pre><code>    public ActionResult Index()\n    {\n          ViewData[\"Message\"] = \"Welcome to ASP.NET MVC!\";\n          return View();\n    }\n</code></pre>\n\n<p>TextBox will not be cleared in case in incorporating the Model as Parameter in the Action method...</p>\n\n<p>What's the reason for this behaviour ?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2012","msdeploy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":151,"score":0,"question_id":12959501,"title":"Web deployment task failed when using WebDeploy in VS2012","body":"<p>When I hit publish on a VS2012-MVC4-Project, enter my credentials (local domain) and hit \"Validate connections\" I get the error-message:</p>\n\n<p>\"Web deployment task failed. (Unexpected end of file has occured. The following elements are not closed: results. Line 1, position 586.)\"</p>\n\n<p>The server is running Win Srv 2008 R2, IIS 7.5, Web Deploy 3.0.</p>\n\n<p>Importing using the import-option on the target IIS-Management-Studio and selecting the ZIP-file create by VS will work without any problems.</p>\n\n<p>The strange thing is, that WebDeploy already worked. This error comes and goes and I can't figure out, what the reason is.</p>\n\n<p>Sounds like the WebDeploy-service isn't responding well-formed. </p>\n\n<p>My settings are:\nService UR: http://{NAMEOFSERVER}\nSite/application: Default Web Site</p>\n"},{"tags":["asp.net-mvc","azure","asp.net-mvc-4","sql-azure"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":195,"score":1,"question_id":12925656,"title":"Deploying MVC 4 CodeFirst to Azure","body":"<p>I'm trying a 90 day free trial of azure. It is super easy to deploy/publish the website and create the database, but for some reason my tables are not being created in the database. I'm using entity framework 4.4(i believe) and code first migrations. I've read that azure uses its own connection string, but I went ahead and changed my connection strings as well. I Spent hours on this and I can't figure out what is wrong and why my tables are not being created. I deploy website, enable-migrations, add-migration, update-database, then publish with checking the checkbox for code-first. Maybe my connection string is wrong? Any help is greatly appreciated. </p>\n\n<p>In 'MyProject.Web' web.config:</p>\n\n<pre><code>&lt;configSections&gt;\n&lt;!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --&gt;\n&lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\" /&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;connectionStrings&gt;\n&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=tcp:n98my***.database.windows.net,1433;Initial Catalog=slutips_db;User Id=****;Password=****;\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p>Then in 'MyProject.Data' app.config, where my datacontext.cs is held:</p>\n\n<pre><code>&lt;entityFramework&gt;\n&lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\" /&gt;\n&lt;contexts&gt;\n  &lt;context type=\"SeluCmpsTutorials.Data.DataContext\"&gt;\n    &lt;databaseInitializer type=\"System.Data.Entity.MigrateDatabaseToLatestVersion\"&gt;\n      &lt;parameters&gt;\n        &lt;parameter value=\"slutips_db\"/&gt;\n      &lt;/parameters&gt;\n    &lt;/databaseInitializer&gt;\n  &lt;/context&gt;\n&lt;/contexts&gt;\n&lt;/entityFramework&gt;\n</code></pre>\n\n<ul>\n<li>Also I noticed even though all my connection strings are changed, when I add-migration and update-database, it still using the ./sqlexpress local database, how is that possible?</li>\n</ul>\n"},{"tags":["asp.net-mvc","razor","razor-declarative-helpers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":12959560,"title":"Add colons and stars to helper generated labels","body":"<p>I'm using Razor and Data Annotations in a .NET 4.5 MVC app. This is from a view model:</p>\n\n<pre><code>    [Required(ErrorMessage = \"Title is required.\")]\n    [Display(Name = \"Title: *\")]\n    public string Title { get; set; }\n\n    [Display(Name = \"Comments:\")]\n    public string Comments { get; set; }\n</code></pre>\n\n<p>Is there a way to remove those display atributes and have a colon after the generated name (colon, space, star for a required field)? In the error messages the colon should not be shown.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12957889,"title":"Can't Upload More Than One File at a Time in MVC","body":"<p>I post to the following controller action:</p>\n\n<pre><code>&lt;EmployeeAuthorize()&gt;\n&lt;HttpPost()&gt;\nFunction SendNewMessage(ByVal files1 As HttpPostedFileBase, ByVal files2 As HttpPostedFileBase) As JsonResult\n\n    Debug.Print(\"files1=\" + files1.ToString)\n    Debug.Print(\"files2=\" + files2.ToString)\n\n\n\n    Dim result = New Dictionary(Of String, String)\n\n\n\n\n    Dim fileName = Path.GetFileName(files1.FileName)\n    Dim filePath = Path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName)\n\n    files1.SaveAs(filePath)\n\n\n    Dim fileName2 = Path.GetFileName(files2.FileName)\n    Dim filePath2 = Path.Combine(Server.MapPath(\"~/App_Data/uploads\"), fileName)\n\n    files2.SaveAs(filePath)\n\n\n\n\n    Return Json(result)\n\nEnd Function\n</code></pre>\n\n<p>I get an error on the <code>Debug.Print(\"files2=\" + files2.ToString)</code> line that says, \"<code>NullReferenceException Object reference not set to an instance of an object.</code>\"</p>\n\n<p>This is the view I am using:</p>\n\n<pre><code>        @Using Html.BeginForm(\"SendNewMessage\", \"Message\", FormMethod.Post, New With {.id = \"sendForm\", .enctype=\"multipart/form-data\"})\n\n            @&lt;div class=\"sendBox\"&gt;\n\n\n                &lt;h2 style=\"margin: 10px 0 0 0;\"&gt;Attachments:&lt;/h2&gt;\n                &lt;label&gt;Attachment 1: &amp;nbsp;&lt;input type=\"file\" name=\"files1\" id=\"file1\" class=\"files\"/&gt;&lt;/label&gt;\n                &lt;label&gt;Attachment 2: &amp;nbsp;&lt;input type=\"file\" name=\"files2\" id=\"file2\" class=\"files\"/&gt;&lt;/label&gt;\n                &lt;label&gt;Attachment 3: &amp;nbsp;&lt;input type=\"file\" name=\"files3\" id=\"file3\" class=\"files\"/&gt;&lt;/label&gt;\n\n                &lt;input type=\"submit\" value=\"Send\" /&gt;\n\n        &lt;/div&gt;\n\n        End Using\n</code></pre>\n\n<p>The first file is fine (<code>files1</code>).  Why can't I upload more than one file?</p>\n"},{"tags":["asp.net","asp.net-mvc","excel","asp.net-mvc-4","npoi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12953901,"title":"NPOI - saving workbook created from template file","body":"<p>It is my 2nd time dealing with NPOI. I'm creating a workbook from a template excel file like this.</p>\n\n<pre><code>        string dldir = AppDomain.CurrentDomain.BaseDirectory + \"Download\\\\excel\\\\\";\n        string uldir = AppDomain.CurrentDomain.BaseDirectory + \"Upload\\\\default_export_file\\\\\";\n        string filename = DateTime.Now.ToString(\"yyyy-M-d\") + \"_\" + user.first_name + \"_\" + query.default_export_filename;\n\n        System.IO.File.Delete(Path.Combine(dldir, filename));\n\n        //System.IO.File.Copy(Path.Combine(uldir, query.default_export_filename), Path.Combine(dldir, filename));\n\n\n        HSSFWorkbook hssfwb;\n        using (FileStream file = new FileStream(Path.Combine(uldir, query.default_export_filename), FileMode.Open, FileAccess.ReadWrite))\n        {\n            hssfwb = new HSSFWorkbook(file);\n        }\n\n        MemoryStream mstream = new MemoryStream();\n        hssfwb.Write(mstream);\n\n        FileStream xfile = new FileStream(Path.Combine(dldir, filename), FileMode.Create, System.IO.FileAccess.Write);\n        byte[] bytes = new byte[mstream.Length];\n        mstream.Read(bytes, 0, (int)mstream.Length);\n        xfile.Write(bytes, 0, bytes.Length);\n        xfile.Close();\n        mstream.Close();\n</code></pre>\n\n<p>But when I checked the created file. It contains nothing. The size is correct. But the contents is just blanks. And I couldn't open it in MS Excel either. I repeated and traced the code but I can't seem to find what is causing it to just write blanks.</p>\n\n<p>Anyone knows why is this happening</p>\n\n<p>FYI: I'm using VS 2010, ASP.Net MVC 4 and NPOI 1.2.5 installed from the NuGet Gallery</p>\n"},{"tags":["asp.net-mvc","wif","claims-based-identity","windows-identity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12958364,"title":"Username and password authentication for WIF (Windows Identity Foundation) in ASP.NET MVC","body":"<p>We have two existing legacy web applications, one for the intranet using windows authentication within the domain, and one internet application, performing a custom web forms username + password based authentication. Now a new web applications is developed and will be available in the internet to both internet and intranet users, handling both authentication models. Therefore we decided to use <a href=\"http://msdn.microsoft.com/en-us/library/hh377151.aspx\" rel=\"nofollow\">WIF</a>. We're going for ASP.NET 4.5 MVC 4 on Windows Server 2012.</p>\n\n<p>The intranet authentication shouldn't be a problem as we can use ADFS 2.0 here.</p>\n\n<p>But we currently have no clue how to solve the username + password authentication. It looks like we need to develop a custom <a href=\"http://msdn.microsoft.com/en-us/library/ee517261.aspx\" rel=\"nofollow\">UserNameSecurityTokenHandler</a> to authenticate users which provide username + password information which is verified against our custom membership provider. But I need some assistance with the whole workflow...</p>\n\n<p>Assume that we have a custom login page for internet users; and assume that we managed to route internet users to this login page (in ASP.NET MVC), what's the missing part from here to a valid token? How would the form or the MVC controller action which received the provided username + password proceed to trigger the configured WIF identity provider?</p>\n"},{"tags":["asp.net-mvc","razor","knockout.js","templating","jquery-tmpl"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1158,"score":5,"question_id":5565875,"title":"Jquery Templates with Razor how to use Razor within text/html scripts","body":"<p>Ok so this is a little random but..</p>\n\n<p>Using MVC 3 (with Razor view engine) with Knockout.js which uses jQuery Templating i've come across a little problem i'm sure is possible to solve. </p>\n\n<p>In order to use jQuery-Tmpl you need to supply a template in </p>\n\n<pre><code>&lt;script type=\"text/html\"&gt;\n...template elements go here...\n&lt;/script&gt;\n</code></pre>\n\n<p>Now the problem is that the razor view engine doesn't seem to generate HTML inside of these specific script tags. <strong>It handles standard html, (script type=\"text/javascript\")</strong> fine but appears to just not do anything with the aforementioned script tag. </p>\n\n<p>Does anyone know how to get around this issue i.e. how to use MVC 3 Razor with jQuery-Tmpl?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12960345,"title":"Select an image from a gallary in MVC","body":"<p>I am trying to allow users to select an image and add some additional information to it.</p>\n\n<p>I have an object that holds the additional info - lets just keep it simple and say its two strings - and an image</p>\n\n<pre><code>[Table(\"ImageInfo\")]\npublic class ImageInfo\n{\n    [Key]\n    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]\n    public int ImageInfoId { get; set; }\n    public string Name { get; set; }\n    public string Description { get; set; }\n\n    public Image Image { get; set; }\n}\n\n[Table(\"Image\")]\npublic class Image\n{\n    [Key]\n    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]\n    public int IamgeId { get; set; }\n    public byte[] ImageBytes { get; set; }\n}\n</code></pre>\n\n<p>For the Create view I want to show the users two text fields and a 'gallary' type layout of all existing iamges from the database.</p>\n\n<p>I would like the iamge gallary part to be a partial view so I can reuse it elsewhere too.</p>\n\n<p>I cannot figure out how to display the images and be able to see which one a use has selected in the controller to link them up.  I imaging it will require some view specific models but beyond that I am drawing a blank.</p>\n\n<p>Can someone point me in the right direction please.</p>\n\n<p>ps. reason for storing ImageInfo and Image in seperate tables is that there will be many ImageInfo for each Image.</p>\n"},{"tags":["asp.net-mvc","server.transfer"],"answer_count":12,"favorite_count":31,"up_vote_count":52,"down_vote_count":0,"view_count":17332,"score":52,"question_id":799511,"title":"How to simulate Server.Transfer in ASP.NET MVC?","body":"<p>In ASP.NET MVC you can return a redirect ActionResult quite easily :</p>\n\n<pre><code> return RedirectToAction(\"Index\");\n\n or\n\n return RedirectToRoute(new { controller = \"home\", version = Math.Random() * 10 });\n</code></pre>\n\n<p>This will actually give an HTTP redirect, which is normally fine. However, when using google analytics this causes big issues because the original referer is lost so google doesnt know where you came from. This loses useful information such as any search engine terms.</p>\n\n<p>As a side note, this method has the advantage of removing any parameters that may have come from campaigns but still allows me to capture them server side. Leaving them in the query string leads to people bookmarking or twitter or blog a link that they shouldn't. I've seen this several times where people have twittered links to our site containing campaign IDs.</p>\n\n<p>Anyway, I am writing a 'gateway' controller for all incoming visits to the site which i may redirect to different places or alternative versions. </p>\n\n<p>For now I care more about Google for now (than accidental bookmarking), and I want to be able to send someone who visits <code>/</code> to the page that they would get if they went to <code>/home/7</code>, which is version 7 of a homepage.</p>\n\n<p>Like I said before If I do this I lose the ability for google to analyse the referer :</p>\n\n<pre><code> return RedirectToAction(new { controller = \"home\", version = 7 });\n</code></pre>\n\n<p>What i really want is a</p>\n\n<pre><code> return ServerTransferAction(new { controller = \"home\", version = 7 });\n</code></pre>\n\n<p>which will get me that view without a client side redirect. \nI don't think such a thing exists though.</p>\n\n<p>Currently the best thing I can come up with is to duplicate the whole controller logic for <code>HomeController.Index(..)</code> in my <code>GatewayController.Index</code> Action. This means I had to move <code>'Views/Home'</code> into <code>'Shared'</code> so it was accessible.  There must be a better way??..</p>\n"},{"tags":["asp.net-mvc","jquery-ui-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12946297,"title":"jqueryuihelpers dialog triggerclick event source","body":"<p>I am using jqueryuihelpers (http://jqueryuihelpers.apphb.com/Docmo/Dialog) for MVC 4. The following code is from the documentation page.</p>\n\n<pre><code>&lt;p&gt;@Html.JQueryUI().Button(\"Click me!\", new { id = \"triggerButton\" })&lt;/p&gt;\n\n@using (Html.JQueryUI().Begin(new Dialog().AutoOpen(false)\n   .TriggerClick(\"#triggerButton\")))\n{\n    &lt;p&gt;This dialog is opened with a button.&lt;/p&gt;\n    &lt;p&gt;Please click the X at the top right corner to close it.&lt;/p&gt;\n}\n</code></pre>\n\n<p>In the above example, the selector of TriggerClick is for just one button and it works fine.</p>\n\n<p>If I have more than 1 buttons, I would like to use the class selector \".button\".</p>\n\n<pre><code>@using (Html.JQueryUI().Begin(new Dialog().AutoOpen(false)\n   .TriggerClick(\".button\")))\n{\n    &lt;p&gt;This dialog is opened with a button.&lt;/p&gt;\n    &lt;p&gt;Please click the X at the top right corner to close it.&lt;/p&gt;\n}\n</code></pre>\n\n<p>In this case, how I can identify which button triggers the click event which in turn opens the dialog box?</p>\n"},{"tags":["asp.net-mvc","dependency-injection","inversion-of-control","unity"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12958724,"title":"ModelFactory for MVC 4 with Unity","body":"<p>In my MVC 4 project, I have a Model like:</p>\n\n<pre><code>public class MyModel\n{\n    private readonly IService MyService;\n\n    public MyModel([Dependency]IService service)\n    {\n        this.MyService = service;\n    }\n    // ...\n}\n</code></pre>\n\n<p>My Controller has an action which is an HttpPost like:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Show(MyModel myModel)\n{\n    // do stuff\n</code></pre>\n\n<p>My Controller does not (and should not) have an instance of my IoC container.\nWhen the HttpPost happens and the action is called, MVC tries to create an instance of my Model when it does the model binding. It needs a parameterless constructor to do so. If it creates a Model using the default constructor, MyService won't be set, and the Model will not have all of it's dependencies present. I don't want to have to call myModel.Init(someIServiceInstance). I want to plug into the framework so that the dependency is resolved (the correct constructor is called) at the creation of the model.</p>\n\n<p>I'm currently using Unity as my dependency resolver and have a few factories for things like Controllers, Service clients, etc. For the controller, I was able to register the ControllerFactory and pass dependencies into the controllers, but I don't see a ModelFactory that I can register. I'm not so concerned with the binding process itself;  once the model is instantiated, I'm happy with how the binding is done. I only want to implement how the model is created/constructed. I'm also okay if the ModelFactory uses a reference to the container in order to resolve the dependency (I can inject the container to the factory as a parameter to it's constructor, I just don't want the Controllers to have a reference directly to the container).</p>\n\n<p>Does anyone have a sample of a ModelFactory (or ModelBinder, and/or ModelBinderResolver, etc.) that will handle creation of the Model, and then rely on the frameworks implementation to do the rest of the Binding process?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","input-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12751565,"title":"DropDownListFor enum doesn't bind back to the model","body":"<p>On my MVC form, I need to bind a drop down box to an enumeration on my ViewModel.  The best way I found to do that is described <a href=\"http://stackoverflow.com/a/8538813/356544\">here</a>.</p>\n\n<p>It appeared to work at first, but now that I've added validation to my form, I've discovered it does not bind back to the ViewModel.</p>\n\n<p>Here's my razor code:</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    @Html.DropDownListFor(model =&gt; model.response, \n                          new SelectList(Enum.GetValues(typeof(Vouchers.Models.ResponseType))),\n                          \"Please Select\")\n&lt;/div&gt;\n</code></pre>\n\n<p>And here's my view model definition for the field:</p>\n\n<pre><code>[DisplayName(\"Response\")]\n[Range(1, int.MaxValue, ErrorMessage = \"You must select a response before submitting this form.\")]\npublic ResponseType response { get; set; }\n</code></pre>\n\n<p>The problem is that I cannot submit the form; even after selecting a response from my drop down, the Validation error message for the Range attribute is displayed and the client side validation prevents the form from submitting.</p>\n\n<p>I believe this is because the SelectList for the drop down contains only the string names of the enum, not the underlying integer value.</p>\n\n<p>How can I solve this problem?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12956690,"title":"MVC Ajax Begin Form save and then using the ID returned after saving in the view","body":"<p>I have a model with two entities (linked with a foreign key) and each entity has its own tab rendered using a partial view. Each tab also has its own Ajax form. When I save the entity in the first tab I now have the ID of the entity which I want to return to the two partial views in order to enable the saving of the second entity or saving updates to the first entity. I cannot get this value back to the view.</p>\n\n<p>The model:</p>\n\n<pre><code>public class Entity1\n{ \n    int ID1  { get; set; }\n    [Some attributes]\n    string field1 { get; set; }\n}\npublic class Entity2\n{ \n    int ID2  { get; set; }\n    [Some attributes]\n    string field2 { get; set; }\n}\npublic class MyModel\n{ \n    Entity1 entity1 = new Entity1()\n    Entity2 entity2 = new Entity2()\n}\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>public class MyController : Controller\n{\n[HttpGet]\npublic ActionResult Index()\n{\n    var model = new MyModel();\n    model.entity1.ID1 = 0;\n    model.entity2.ID2 = 0;\n    return PartialView(model);\n}\n\n[HttpPost]\npublic ActionResult Index(MyModel model)\n{\n    SaveMyModel(model)\n    // have tried ModelState.Clear(); here\n    return PartialView(model);\n}\n}\n</code></pre>\n\n<p>And finally one of the two partial views</p>\n\n<pre><code>@model MyModel\n@using (Ajax.BeginForm(\"Index\", \"Home\",\n        new AjaxOptions\n        {\n            HttpMethod = \"POST\"\n        }\n        ))\n    {\n    @Html.LabelFor(m =&gt; m.Entity1.field1)\n    @Html.EditorFor(m =&gt; m.Entity1.field1)\n    @Html.HiddenFor(m =&gt; m.Entity1.ID1)\n    &lt;div class=\"form-actions\"&gt;\n        &lt;button type=\"submit\"&gt;\n        Next section&lt;/button&gt;\n    &lt;/div&gt;\n    }\n</code></pre>\n\n<p>My save function either inserts or updates depending on the value of ID1. </p>\n\n<p>The problem is that the values of ID1 always stays at zero and the hidden field is not refreshed on the return. I have tried single stepping through the razor refresh and the correct ID is being sent to the view.</p>\n\n<p>The above is a simplification but it does encapsulate the problem.</p>\n\n<p>Thank you in advance.</p>\n\n<h2>UPDATE</h2>\n\n<p>I can get this to work if:</p>\n\n<ul>\n<li>I only have a single entity in my model</li>\n<li>I add <code>ModelState.Clear();</code> before the save</li>\n</ul>\n"},{"tags":["jquery","asp.net-mvc","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12958623,"title":"Reload telerik grid after data update","body":"<p>How can I reload/refresh a telerik data grid after data update? Is there an inbuild telerik funtion which I can call in ajax success? If not, how best to refresh/reload a telerik grid?</p>\n\n<p>jquery:</p>\n\n<pre><code>$(\"#SaveHours\").click(function (e) {\n\n    e.preventDefault();\n    var link = '/Project/SaveHours';\n\n    $.ajax({\n        type: 'POST',\n        url: link,\n        data: { hours: $(\"#HoursWorked\").val(),\n            descType: $(\"#Description\").val(),\n            wrkType: $(\"#WorkType\").val()\n        },\n        dataType: 'json',\n        success: function (result) {\n            alert(result.message);\n        },\n        error: function (result) {\n            alert(\"Failed\");\n        }\n    });\n</code></pre>\n\n<p>The Grid is located in a partial view, Here is how I return the Partial:</p>\n\n<pre><code> &lt;%  Html.RenderAction(\"Hours\"); %&gt;\n</code></pre>\n\n<p>Here is my Controller Action:</p>\n\n<pre><code>[GridAction]\npublic ActionResult Hours()\n{\n    ViewData.Model = db.vwHours;\n    return View();\n}\n</code></pre>\n\n<p>Any help is appreciated</p>\n"},{"tags":["c#","asp.net-mvc","post","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12959552,"title":"Why is the FormCollection in my controller empty?","body":"<h2>Background</h2>\n\n<p>I am coding an API layer in C# using MVC 4 Web API Project (ASP.NET).</p>\n\n<p>I have written a test action in my controller like this:</p>\n\n<pre><code>[System.Web.Mvc.HttpPost]\npublic string TestAction(FormCollection fc)\n{\n    return \"test\";\n}\n</code></pre>\n\n<p>I am using Poster in FireFox to test a form post:</p>\n\n<ul>\n<li>content-type is set to application/x-www-form-urlencoded</li>\n<li>Body from parameters is set to foo=bar&amp;bar=foo</li>\n</ul>\n\n<p>Here is my route:</p>\n\n<pre><code>RouteTable.Routes.MapHttpRoute(\"PostDefault\", \"{controller}/{action}\");\n</code></pre>\n\n<h2>Question</h2>\n\n<p>I am able to hit the controller with no problem when posting a url and parameters from Poster, but if I put a breakpoint on <code>return \"test\";</code> and then hover over the <code>FormCollection</code> that is passed in (<code>fc</code>) It shows that an empty array of strings was passed in rather than my values (e.g. <code>string[0]</code>).</p>\n\n<p>I have done this loads of times using jQuery <code>$.post()</code> on the client with no problems receiving the form collection.</p>\n\n<p>What is it failing in this case?</p>\n\n<p>Thanks,</p>\n\n<p>Matt</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":12942316,"title":"Sending Data to WEB API function from Code behind C#","body":"<p>I have created Web API Services.\nWhat I am trying to do is to call that API function, namely SaveSession(string data), from code behind button click, and to pass the entire form collection data as parameter in string format.\nWhen I call the api's uri through webclient.uploadstring(url,string);\nIt is calling the web service but the parameter is not getting passed.\nPls help.</p>\n"},{"tags":["c#","asp.net-mvc","extjs","extjs4.1"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12957614,"title":"EXT JS - keep grid filtering","body":"<p>How can I store the filters applied on a EXTJS grid?</p>\n\n<p>Lets say I have a page A with the grid. I filter the grid, go to page B and then the next time I'm on page A, I want the same filters applied?</p>\n\n<p>Its on an MVC application.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","facebook-oauth"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12959387,"title":"asp.net-mvc3 Facebook Access Token","body":"<p>How do I get the facebook access token for getting insights.</p>\n\n<p>The following is used to get the client data only, but I want the user information/fan page insight. I would like to know if I can get the insights data programatically(without logging into facebook and allowing access) with some examples in Asp.Net MVC. Logging in to facebook and granting access should also be done programmatically, I do not want the end user to be involved.</p>\n\n<pre><code>var fb = new FacebookClient();\ndynamic result = fb.Get(\"oauth/access_token\", new { \nclient_id     = \"app_id\", \nclient_secret = \"app_secret\", \ngrant_type    = \"client_credentials\" \n});\nfb.AccessToken = result.access_token;\n</code></pre>\n\n<p>I tried using the above as but I cannot get the insight data. Can anyone please help me. If you do not understand I would be happy to explain in detail.</p>\n\n<pre><code>var fb = new FacebookClient();\ndynamic result = fb.Get(\"oauth/access_token\", new { \nclient_id     = \"app_id\", \nclient_secret = \"app_secret\", \ngrant_type    = \"client_credentials\",\nredirect_uri = \"redirect_uri\",\nscope= \"read_insights\"\n});\nfb.AccessToken = result.access_token;\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","sql-azure"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12959102,"title":"How to Add date time culture in my Azure Project?","body":"<p>How can I add Indian dateTime culture to my project in my Asp.net Azure Project?\nSince the data servers will be in foreign country how can I configure date and time related functions?</p>\n"},{"tags":["asp.net-mvc","knockout.js"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12958843,"title":"I cannot workout how to use a Partial View in a form that uses Knockout in MVC","body":"<p>This is my view;</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" \nInherits=\"System.Web.Mvc.ViewPage&lt;SHP.Models.TrainingListEmployeesViewModel&gt;\" %&gt;\n&lt;%@ Import Namespace=\"System.Web.Script.Serialization\" %&gt;\n&lt;%@ Import Namespace=\"SHP.Helpers\" %&gt;\n\n&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Bulk Training\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n&lt;form class=\"employeeListEditor\" data-bind=\"submit: save\"&gt;\n    &lt;fieldset&gt;\n    &lt;legend&gt;Allocate or cancel training for the selected employees&lt;/legend&gt;\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td style=\"text-align: right;\"&gt;Course Name&lt;/td&gt;\n            &lt;td&gt;&lt;%: Html.EditorFor(model =&gt; model.TrainingName)%&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td style=\"text-align: right;\"&gt;Description (optional)&lt;/td&gt;\n            &lt;td&gt;&lt;%:\n           Html.TextAreaFor(\n               model =&gt; model.TrainingDescription, new { maxlength = \"255\", style = \"width:400px;height:100px;\" })%&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;%: Html.EditorFor(model =&gt; model.ClientEmployeeSelector)%&gt;\n    &lt;button id=\"btnAdd\" data-bind=\"click: addEmployee\"&gt;Add&lt;/button&gt;&lt;button data-bind=\"click: clearEmployee\"&gt;Clear&lt;/button&gt;\n    &lt;div id=\"displayEmployees\" style=\"margin-top:10px;\" data-bind=\"visible: employees().length &gt; 0\"&gt;\n        &lt;table id=\"employeeDataTable\" class=\"groupBorder\"&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;&lt;/th&gt;\n                    &lt;th&gt;Employee&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody data-bind=\"foreach: employees\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        &lt;a href=\"#\" data-bind=\"click: $parent.removeEmployee\"&gt;Remove&lt;/a&gt;\n                        &lt;input type=\"hidden\" data-bind=\"value: SearchTextId\"/&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;&lt;span data-bind=\"text: SearchText\"&gt;&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;               \n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"employeeCalendar\"&gt;\n        &lt;% if(Model.Cvm != null)\n           {%&gt;\n            &lt;% Html.RenderPartial(\"Calendar\", Model.Cvm); %&gt;\n            &lt;div&gt;&lt;span style=\"margin-top: 10px\"&gt;&lt;/span&gt;&lt;/div&gt;\n            &lt;div style=\"margin-top:20px;\"&gt;\n                &lt;div style=\"display: inline; margin-right:20px; padding:5px;\"&gt;\n                    &lt;%:Html.MakePopupForm&lt;SHP.Controllers.LeaveController&gt;(o =&gt; o.TrainingSingleDate(), refreshOnSuccess: true)%&gt;\n                    &lt;%:Html.PopupFormActionLink&lt;SHP.Controllers.LeaveController&gt;(o =&gt; o.TrainingSingleDate(), \"Add a single date\")%&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;    \n            &lt;% if (TempData[\"SuccessMessage\"].ToSafeString().Length &gt; 0)\n               {%&gt;\n                    &lt;p class=\"success\" style=\"padding-top: 20px;\"&gt;&lt;%: TempData[\"SuccessMessage\"].ToSafeString() %&gt;&lt;/p&gt;\n            &lt;% } %&gt;     \n        &lt;% }%&gt;\n    &lt;/div&gt;\n    &lt;/fieldset&gt;\n&lt;/form&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n        function Employee(id, text) {\n            var self = this;\n            self.SearchTextId = ko.observable(id);\n            self.SearchText = ko.observable(text);\n        }\n        $(document).ready(function () {         \n            $('#SearchText').attr(\"data-bind\", \"value: autocompleteSearchText\");\n            $('#SearchTextId').attr(\"data-bind\", \"value: autocompleteSearchTextId\");\n            $(\"#TrainingName\").attr(\"data-bind\", \"value: trainingName\");\n            $(\"#TrainingDescription\").attr(\"data-bind\", \"value: trainingDescription\");\n\n            var initialData = &lt;%= new JavaScriptSerializer().Serialize(Model) %&gt;;\n            var autocompleteData = { \"autocompleteSearchTextId\": 0, \"autocompleteSearchText\": null };\n            function viewModel() {\n                var self = this;\n                self.employees = ko.observableArray(initialData.EmployeeList);\n                self.trainingName = ko.observable(initialData.TrainingName);\n                self.trainingDescription = ko.observable(initialData.TrainingDescription);\n                self.autocompleteSearchText = ko.observable(autocompleteData.autocompleteSearchText);\n                self.autocompleteSearchTextId = ko.observable(autocompleteData.autocompleteSearchTextId);\n                self.removeEmployee = function(employee) {\n                    $(\"#btnAdd\").after(\"&lt;span class='error'&gt;Please wait for calendar update ...&lt;/span&gt;\");\n                    self.employees.remove(employee);\n                    self.save();\n                };\n                self.clearEmployee = function() {\n                    self.autocompleteSearchText('');\n                };\n                self.addEmployee = function() {\n                    $(\"#btnAdd\").after(\"&lt;span class='error'&gt;Please wait for calendar update ...&lt;/span&gt;\");\n                    self.employees.push(new Employee(self.autocompleteSearchTextId(), self.autocompleteSearchText()));\n                    self.autocompleteSearchText('');\n                    self.save();\n                };\n                self.save = function() {\n                    var list = ko.toJS(self.employees);\n                    var name = ko.toJS(self.trainingName);\n                    var description = ko.toJS(self.trainingDescription);\n                    ko.utils.postJson(location.href, { employees: list, trainingName: name, trainingDescription: description });\n                };\n            }   \n            ko.applyBindings(new viewModel());\n        });\n    &lt;/script&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>You may notice I have a popup form in this view. \nAlso I would like to put all the code in the employeeCalendar div in a partial view.\nBecause of the popup window, I have to make sure in my controller that I redirect my Post method to my Get method so that when the popup data input has been completed and undates this view, I do not get an unwanted resend message  from windows.\nThe problem with doing these redirects is that I get a full page postback that looks unpleasent. So I would prefer to refresh my claendar from a partial view via Ajax.\nSo how do I do this?\nThis is my controller</p>\n\n<pre><code>   [HttpGet]\n    [Authorize(Roles = \"Administrator, Trainer, ManagerAccounts, ManagerIT\")]\n    public ActionResult BulkTraining()\n    {\n        if (SessionObjects.Tlevm == null)\n        {\n            return this.View(new TrainingListEmployeesViewModel());\n        }\n\n        return this.View(new TrainingListEmployeesViewModel(\n            SessionObjects.Tlevm.EmployeeList,\n            SessionObjects.TrainingName,\n            SessionObjects.TrainingDescription));\n    }\n\n    [HttpPost]\n    [Authorize(Roles = \"Administrator, Trainer, ManagerAccounts, ManagerIT\")]\n    public ActionResult BulkTraining([FromJson] IEnumerable&lt;ClientEmployeeSelector&gt; employees, string trainingName, string trainingDescription)\n    {\n        // Items stored in Session used when saving the training dates for the employee\n        // via the popup window\n        SessionObjects.TrainingName = trainingName.JsonTrim();\n        SessionObjects.TrainingDescription = trainingDescription.JsonTrim();\n        SessionObjects.EmployeeIdList = employees.Select(x =&gt; x.SearchTextId).ToList();\n        SessionObjects.EmployeeNameList = SessionObjects.EmployeeIdList.Count &gt; 0\n                        ? Employee.GetNameList(SessionObjects.EmployeeIdList)\n                        : string.Empty;\n        SessionObjects.Tlevm = new TrainingListEmployeesViewModel(\n            employees.ToList(),\n            SessionObjects.TrainingName,\n            SessionObjects.TrainingDescription);\n        return this.RedirectToAction(\"BulkTraining\");\n    }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","orm","ado.net"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":6,"view_count":56,"score":-6,"question_id":12958708,"title":"ORM vs Ado.net and Asp.net MVC vs Asp.net WebForms","body":"<p>I have been hearing from people that asp.net mvc has full control over traditional asp.net webforms and that is best reason it is good to do programming in asp.net mvc. </p>\n\n<p>Based on this my Question- <strong>ORM vs Ado.Net</strong></p>\n\n<ul>\n<li>I believe Ado.Net has more/full control over ORM then what is the reason of using ORM, when we believe in having full control of what we are doing...</li>\n<li>One obvious advantage i can see with ORM is we can switch database (Eg: Oracle to SQL Server) without changing anything in code, but argument is this is big decision and I don't think anyone keep changing their databases so frequently than I don't think it is truly an advantage.</li>\n<li>RAD development with ORM, but since we want full control it is worth spending time on doing things manually and with defined strategy of doing this we can develop things faster.</li>\n<li>I have seen in past that Microsoft keep on Recommending so many things and after sometime it comes from microsoft itself that, that is not recommended to use and you should use something else... Is it Microsoft Sales strategy.</li>\n</ul>\n\n<p><strong>Asp.net MVC vs Asp.net Web Form</strong> \n - With release of .Net 4.0 we can do almost all the things we can do in asp.net mvc and on top of it we have advantage of RAD when we are doing it with asp.net web forms than what is fun of using asp.net mvc architecture.</p>\n\n<ul>\n<li>For ViewState, we can turn it off </li>\n<li>For Having full control on HTML, we can generate HTML by dynamically creating controls (By this method we can achieve full control on HTML)</li>\n<li>We have clean seperation of UI vs Code, since in Web Forms we are not using any Code logic</li>\n<li>We have Routing for web forms too so that we can have SEO Friendly URL</li>\n<li>I have also seen that performance is little degraded with asp.net mvc then doing coding with asp.net web forms.</li>\n<li>MVC is just architecture which we can also do in Web Forms</li>\n<li>We can also be TDD compliant with Web Forms</li>\n<li>Almost all things which asp.net mvc have + advantage of RAD and simplicity of web forms than what is reason on switching to asp.net mvc?</li>\n</ul>\n\n<p><strong>I truly don't have any convincing answer which can please me towards this new technology... I have seen lot of people run around the buzz which Microsoft creates, but i truly don't see any added value in this...\nTo all the experts, could you please point some light and help me in understanding value of investing time and money in this new technologies.</strong></p>\n"},{"tags":["asp.net-mvc","json","parsing","flash-media-server"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":360,"score":2,"question_id":1455332,"title":"Flash Media Server calling a page that returns JSON data","body":"<p>I am very new to Flash development.</p>\n\n<p>I have an asp.net mvc site that has a controller action that returns JSON.</p>\n\n<p>I have a Flash Media Server setup that needs to call that controller action every 15 minutes to get the current schedule. I can get the FMS to call the site (and every 15 minutes no problem) and I am getting the JSON right now as a string, but I need to parse it from the string to objects, in order to use the data returned.</p>\n\n<p>Any pointers or ideas would be very welcomed.</p>\n"},{"tags":["c#",".net","asp.net-mvc","dataannotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12954106,"title":"Compare attribute does not validate properties","body":"<p>I try to compare two TimeSpan fields. Code below doesn't works. Also, I remove [DataType(DataType.Time)] and try without any success.</p>\n\n<pre><code>    [Required(ErrorMessage = \"Required start time\")]\n    [DataType(DataType.Time)]\n    [Compare(\"EndTime\", ErrorMessage = \"Početak i kraj smjene moraju biti različiti.\")]\n    public System.TimeSpan StartTime { get; set; }\n\n    [Required(ErrorMessage = \"Required end time\")]\n    [DataType(DataType.Time)]\n    public System.TimeSpan EndTime { get; set; }\n</code></pre>\n\n<p>How to compare two TimeSpan fields?</p>\n"},{"tags":["asp.net","asp.net-mvc","c#-4.0","sharepoint2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":11028347,"title":"Browser back button does not move to the previous View","body":"<p>I am using views concept in my asp.net form control.my first view consist of a form to capture user details.when user press continue it will move to the second view.\nThe problem is ,When user press the back button of the browser from the second view it doesn't move the the previous view instead move to the previous page in the browser history.</p>\n\n<p>I wanted to move to the first view with the existing data in the form,when user press the back button of the browser.</p>\n"},{"tags":["asp.net","asp.net-mvc","sharepoint2010"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":183,"score":1,"question_id":11032885,"title":"Form data cleared when press the browser back button","body":"<p>I am using views concept in my asp.net form control.my first view consist of a form to capture user details.when user press continue it will move to the second view. The problem is ,When user press the back button of the browser,It does not keep state of the previously entered data.the form got cleared.</p>\n\n<p>we cant use both viewsstates and Sessions for this since they got reset in the back button click,</p>\n\n<p>Is there any solutions we can take to overcome this issue ?</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12957297,"title":"How to fasten this query on Entity Framework?","body":"<p>I have an events site. To query the events, i have to make a query with several tables involved. The problem is that this query is time consuming when not cached (3-4 sg in total). If i sum other queries made to the page for another data, it takes a pageload of 5-8 seg when not cached. \nI need to map the tables below to my Event class with the following properties (Im only writing main properties to try to minimize the problem :)</p>\n\n<pre><code>class Event\n\n  public string Name\n  public string Description\n  public DateTime Start\n  public DateTime End\n  public Location Location\n  public List&lt;Pages&gt; Topics\n  ... more simple properties\n\nclass Page\n\n      public string Name\n      public string Image\n\n\nclass Location\n\n      public string Name\n      public string Image\n      public string Address\n      public string PostalCode\n      public List&lt;Pages&gt; Topics\n  ... more simple properties\n</code></pre>\n\n<p>I have the following tables in my bd (SQL Server Express 2012)</p>\n\n<pre><code>Events (about 15000 records)\n----------\nIDEvent int --&gt; to the Pages table\nIDLocationPage int --&gt; to the Pages table\nStart datetime \nEnd datetime\n\nPages (about 15000 records)\n-------\nID int, PK\nName varchar\nDescription varchar\nIDImage int\n....More fields\n\n\nLocations (about 2000 records)\n-------------\nIDPage int --&gt; PK and FK to the Pages table\nAddress varchar\nPhone varchar\nPostal code varchar\n---more fields\n\n\nImages (about 9000 records)\n----------\nID int\nFile varchar -&gt;path to the file\n\n\nTopics (about 22000 records)\n--------\nIDPage int FK to the pages table\nIDTopic int FK to the pages table\n</code></pre>\n\n<p>As you can see, i have a table \"Events\" that for many properties navigates to the Pages table. The topics table relates each page with another pages.\nThe problem is that when i query this through Entity Framework and then i foreach the result and map it to my classes, it ends up with roundtrips to the database when bringing navigation properties (think about retrieving the image property, the topics, etc), then for each topic it retrieves the topic image, etc. it ends little optimous and if i try to do eager loading or proyection to bring only the fields i need, there are so much (note that i have to retrieve event properties, location properties, topics from event, from location, etc) that ends up with a sql timeout exception.\nMy query filters (in the where section) on start and end, may be the location, topics... etc</p>\n\n<p>I would like to know the best and more optimous way of executing the query. May be a view and then mapping it to Entity Framework? may be i cant use Entity Framework for this query and have to use another tech? This is the more complex query in the app, if i solve this query i can use Entity Framework for another querys or crud operations.</p>\n\n<p>Thanx</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","structuremap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12957533,"title":"dependancy injection in asp.net mvc, images being served by .net process","body":"<p>I don't have the code in front of my at the moment, but I am wondering if someone could answer this.</p>\n\n<p>In my asp.net MVC application, I was using structuremap for dependancy injection.</p>\n\n<p>And when I did this, I noticed that all requests were going through the asp.net process, even images were being served through the asp.net pipeline.</p>\n\n<p>Is this normally the case or only when I used an IoC container and had to take control over object creation with structuremap?</p>\n"},{"tags":["c#","asp.net-mvc","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12957466,"title":"Razor read text file to memory from input type text","body":"<p>trying to read text into memory from a text file the user selects</p>\n\n<p>MODEL:</p>\n\n<pre><code>public HttpPostedFileBase File { get; set; }\n</code></pre>\n\n<p>VIEW</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\" enctype=\"multipart/form-data\" id=\"MyForm\"&gt;\n                @Html.TextBoxFor(m =&gt; m.File, new { type = \"file\" })\n                 &lt;input type=\"submit\" name=\"btnSubmit\" id=\"ProcessAll\" value=\"Process All\" /&gt;\n            &lt;/form&gt;\n</code></pre>\n\n<p>CONTROLLER:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult FileToFasta(F2FModel model)\n{\n//Need to read file to a string without uploading it\nreturn View(model);\n}\n</code></pre>\n\n<p>Any thoughts?  Thanks</p>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12957166,"title":"bind HttpPostedFileBase between views","body":"<p>Is it possible to pass a HttpPostedFileBase file between views to populate a textbox type=\"file\"?</p>\n\n<p>I basically have an upload texbox that uploads a file to the server on ane page. </p>\n\n<p>On the next page we can revise all the data submitted in the form, including the image. This page has a back button that need to pass all the data back to the original page, included the image.</p>\n\n<p>Is that possible? </p>\n"},{"tags":["asp.net-mvc","viewmodel"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12878527,"title":"What is the appropriate granularity in building a ViewModel?","body":"<p>I am working on a new project, and, after seeing some of the difficulties of previous projects that didn't provide enough separation of view from their models (specifically using MVC - the models and views began to bleed into each other a bit), I wanted to use MVVM.</p>\n\n<p>I understand the basic concept, and I'm excited to start using it. However, one thing that escapes me a bit - what data should be contained in the ViewModel?</p>\n\n<p>For example, if I am creating a ViewModel that will encompass two pieces of data so they can be edited in a form, do I capture it like this:</p>\n\n<pre><code>public PersonAddressViewModel {\n    public Person Person { get; set; }\n    public Address Address { get; set; }\n}\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>public PersonAddressViewModel {\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string StreetName { get; set; }\n    // ...etc\n}\n</code></pre>\n\n<p>To me, the first feels more correct for what we're attempting to do. If we were doing more fine grain forms (maybe all we were capturing was FirstName, LastName, and StreetAddress) then it might make more sense to go down to that level. But, I feel like the first is correct since we're capturing ALL Person data in the form and ALL Address data. It seems like it doesn't make sense (and a lot of extra work) to split things apart like that.</p>\n\n<p>Appreciate any insight.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":38,"score":-2,"question_id":12956456,"title":"MVC - How to change model properties in controller action","body":"<p>I'm having an issue where I can set a model's properties in the HttpPost Edit action, but after calling the UpdateModel method, the value reverts to it's previous value.</p>\n\n<p>I'm trying to handle a constraint where the FISCAL_STATUS_CD has to be unique. My issue is that with Oracle being case-sensitive, if a user enters a FISCAL_STATUS_CD of \"t\" it might be valid even though another record has a FISCAL_STATUS_CD of \"T\". So I've added the .ToUpper in my ViewModel below. However, while debugging, I can watch the value through the Edit method stays a \"T\" until after the UpdateModel call at which point is has reverted to the \"t\" that is entered in the form. It also doesn't matter if I hard code the value to anything, it still apparently uses the form's value.</p>\n\n<p>I assume it has something to do with the ModelState, but even doing a <code>ModelState.Remove(\"FISCAL_STATUS_CD\")</code> doesn't help.</p>\n\n<p>Another note: this dosn't happen to me in the Create method that is virtually identical, but instead uses <code>db.FISCAL_STATUS.Add(objFiscalStatus)</code> instead of the UpdateModel method.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Here is the Edit action:</p>\n\n<pre><code>&lt;HttpPost()&gt;\n&lt;ValidateAntiForgeryToken()&gt;\n&lt;Authorize(Roles:=\"/VPM_Tech_Admin\")&gt;\nFunction Edit(FiscalStatus As FiscalStatusViewModel) As ActionResult\n    Dim objExistingFiscalStatus As FISCAL_STATUS = db.FISCAL_STATUS.Find(FiscalStatus.FISCAL_STATUS_ID)\n    Dim objFiscalStatus As FISCAL_STATUS = Mapper.Map(Of FiscalStatusViewModel, FISCAL_STATUS)(FiscalStatus, objExistingFiscalStatus)\n    objFiscalStatus.UPDATED_BY = Session(\"AppUserID\")\n\n    If ModelState.IsValid Then\n        UpdateModel(objFiscalStatus)\n        Try\n            db.SaveChanges()\n            Return RedirectToAction(\"Index\")\n        Catch ex As Exception\n            If InStr(ex.InnerException.InnerException.Message, \"PRSNL.FISCAL_STATUS_UK\") &gt; 0 Then\n                ModelState.AddModelError(\"FISCAL_STATUS_CD\", \"Code already exists. Please specify another.\")\n            End If\n        End Try\n    End If\n\n    Return View(FiscalStatus)\nEnd Function\n</code></pre>\n\n<p>Here is my ViewModel:</p>\n\n<pre><code>Imports System.ComponentModel.DataAnnotations\n\nPublic Class FiscalStatusViewModel\n    Inherits LookupBase\n\n    Private strCode As String\n\n    &lt;Display(Name:=\"ID\")&gt;\n    Public Property FISCAL_STATUS_ID As Integer\n\n    &lt;Display(Name:=\"Code\")&gt;\n    &lt;MaxLength(1)&gt;\n    &lt;Required()&gt;\n    Public Property FISCAL_STATUS_CD As String\n        Get\n            Return strCode\n        End Get\n        Set(value As String)\n            strCode = value.ToUpper\n        End Set\n    End Property\n\n    &lt;Display(Name:=\"Description\")&gt;\n    &lt;MaxLength(60)&gt;\n    Public Property DESCRIPTION As String\n\n    &lt;Display(Name:=\"Default Value\")&gt;\n    &lt;MaxLength(1)&gt;\n    &lt;UIHint(\"YesNo\")&gt;\n    &lt;Required()&gt;\n    Public Property DEFAULT_VALUE_IND As String\n\n    &lt;Display(Name:=\"Retained\")&gt;\n    &lt;MaxLength(1)&gt;\n    &lt;UIHint(\"YesNo\")&gt;\n    Public Property RETAINED_IND As String\n\n    &lt;Display(Name:=\"Active\")&gt;\n    &lt;MaxLength(1)&gt;\n    &lt;UIHint(\"YesNo\")&gt;\n    &lt;Required()&gt;\n    Public Property ACTIVE_IND As String\n\nEnd Class\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":545,"score":0,"question_id":9109893,"title":"ASP.NET MVC 3: Edit a \"Collection\" of items","body":"<p>I'm currently editing a custom object, which has a dictionnary <code>Dictionary&lt;MyOtherObject,Boolean&gt;</code>.</p>\n\n<pre><code>public class MyObject{\n   public int SomeProperties{get;set;}\n   public int SomeMoreProperties{get;set;}\n   ....\n   public Dictionary&lt;MyOtherObject, Boolean&gt; Attributions{get;set;}\n}\n</code></pre>\n\n<p>The goal is that I can have a list of checkbox for every item the dictionary, and decide to check it or not.</p>\n\n<p>I've tried to make and editor template for my \"Attribution\" property. It displays perfectly, taking in account which values have been selected. But when I submit, I receive a null for the Dictionary.</p>\n\n<p>So what is the good way to do it?</p>\n\n<p>I found this <a href=\"http://stackoverflow.com/questions/5197038/complex-models-and-partial-views-model-binding-issue-in-mvc3\">stack overflow post</a> which has almost the same problem, instead that I've a Dictionary and not simple properties. How well MVC handle them?</p>\n\n<p>I can transform my data, but I don't see a way to not have a \"List\" of element. Also found <a href=\"http://stackoverflow.com/questions/8912248/mvc3-collection-model-binding-with-editorfor\">this</a> but no answers</p>\n\n<p><strong>EDIT</strong>\nMy colleague did made some tries, starting to display only a list of bool instead of a list of objects:\nWith an object</p>\n\n<pre><code>public class TheViewObject{\n   //other fields\n   List&lt;bool&gt; MyList{get;set;}\n}\n</code></pre>\n\n<p>In the view, if we generate the form with <code>@Html.EditorFor(m=&gt;m.MyList)</code>, we got this:</p>\n\n<pre><code>&lt;input checked=\"checked\" class=\"check-box\" data-val=\"true\" data-val-required=\"The Boolean field is required.\" id=\"MyList_0_\" name=\"MyList[0]\" value=\"true\" type=\"checkbox\"&gt;\n&lt;input class=\"check-box\" data-val=\"true\" data-val-required=\"The Boolean field is required.\" id=\"MyList_1_\" name=\"MyList[1]\" value=\"true\" type=\"checkbox\"&gt;\n&lt;input checked=\"checked\" class=\"check-box\" data-val=\"true\" data-val-required=\"The Boolean field is required.\" id=\"MyList_2_\" name=\"MyList[2]\" value=\"true\" type=\"checkbox\"&gt;\n&lt;input name=\"MyList[0]\" value=\"false\" type=\"hidden\"&gt;&lt;input name=\"MyList[1]\" value=\"false\" type=\"hidden\"&gt;&lt;input name=\"MyList[2]\" value=\"false\" type=\"hidden\"&gt;\n</code></pre>\n\n<p>It works because it knows directly how to handle a <code>List&lt;bool&gt;</code>. This code works and we receive correct data on the form return.</p>\n\n<p>Now if we have a template</p>\n\n<pre><code>@model List&lt;bool&gt; \n\n@for (int i = 0; i &lt; Model.Count; i++) { \n  @Html.EditorFor(x =&gt; Model[i]) \n} \n</code></pre>\n\n<p>And the result:</p>\n\n<pre><code>&lt;input checked=\"checked\" class=\"check-box\" data-val=\"true\" data-val-required=\"The Boolean field is required.\" id=\"MyList__0_\" name=\"MyList.[0]\" value=\"true\" type=\"checkbox\"&gt;\n&lt;input name=\"MyList.[0]\" value=\"false\" type=\"hidden\"&gt;\n&lt;input class=\"check-box\" data-val=\"true\" data-val-required=\"The Boolean field is required.\" id=\"MyList__1_\" name=\"MyList.[1]\" value=\"true\" type=\"checkbox\"&gt;\n&lt;input name=\"MyList.[1]\" value=\"false\" type=\"hidden\"&gt;\n&lt;input checked=\"checked\" class=\"check-box\" data-val=\"true\" data-val-required=\"The Boolean field is required.\" id=\"MyList__2_\" name=\"MyList.[2]\" value=\"true\" type=\"checkbox\"&gt;\n&lt;input name=\"MyList.[2]\" value=\"false\" type=\"hidden\"&gt; &lt;/td&gt; \n</code></pre>\n\n<p>The result is basically the same, EXCEPT, that we have an additional \".\" between MyList and [x]. With this synthax the model binder cannot figure out how to bind the object.</p>\n\n<p>I think this is basically what is also happening with our Dictionary before(we have tested with a list instead, same problem)</p>\n\n<p>(I'm currently testing <a href=\"http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/\" rel=\"nofollow\">Steve Sanderson's begincollectionitem</a>)</p>\n"},{"tags":["asp.net-mvc","entity-framework","design-patterns","domain-driven-design","repository-pattern"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":120,"score":1,"question_id":12918521,"title":"Where should the business logic be in this pattern?","body":"<p>This is my first attempt, after reading a lot about DDD, TDD and Repository / UnitOfWork paterns, to make my own application.</p>\n\n<p>I'm using Entity Framework, MVC 4 on .NET 4.0 (the server that will be running this application is a Windows 2003)</p>\n\n<p>This is the basic simplified pattern logic (The original one uses a IRepository, IUnitOfWork, GenericRepository and extends the EF POCOs with a IEntity interface to give access to the common ID field. But this simplified example will be enough to ask my question)</p>\n\n<pre><code>View -&gt; ViewModel -&gt; Controller &lt;- UnitOfWork &lt;- Repository &lt;- EntityFramework &lt;- Database\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>Model.Employee.GetSeniority()\n</code></pre>\n\n<p><strong>EmployeeDetailsViewModel</strong></p>\n\n<pre><code>Employee e { get; set; }\n</code></pre>\n\n<p><strong>Employee</strong></p>\n\n<pre><code>DateTime dateHired { get; set; }\nTimeSpan GetSeniority()\n{\n    return DateTime.Today - dateHired;\n}\n</code></pre>\n\n<p><strong>Controller EmployeeDetails()</strong></p>\n\n<pre><code>using(var unitOfWork = new UnitOfWork) {\n    return View(EmployeeDetailsViewModel model = new EmployeeDetailsViewModel {\n        e = unitOfWork.GetEmployeRepository().Find(o=&gt;o.id == id)\n    });\n}\n</code></pre>\n\n<p><strong>UnitOfWork GetEmployeRepository()</strong></p>\n\n<pre><code>return (_employeeRepository ?? _employeeRepository = new EmployeeRepository(this.dbContext));\n</code></pre>\n\n<p><strong>Repository Find()</strong></p>\n\n<pre><code>dbContext.Configuration.EnableProxyCreation = false;\nEmployee e = dbContext.Employees.Where(expression);\ndbContext.Configuration.EnableProxyCreation = true;\nreturn e;\n</code></pre>\n\n<p>Everything actually works properly. The problem is that I feel like something is terribly wrong here, and I'm not sure at which layer it should be fixed.</p>\n\n<p>After getting suggested, by a lot of people (Hi Darin), to always pass ViewModels to views and no models, I started doing this. However, what I'm doing (I think) isn't much better. I'm simply encapsulating my model in a viewmodel. At first, it didn't sound that bad since my Find() method would turn proxy off before getting an object, which would result in a persistance-ignorant POCO. However, now that I want to add some logic in the POCOs, I feel like there is something wrong.</p>\n\n<p>I think the problem resides in where my Business logic is and the fact that my Employee POCO should be mapped to a DTO object. However, where should I transfer the Employee POCO to a EmployeeDTO? Should that be the task of the Repository, the Controller or something else? I'm also unsure of where I should put my business logic (as simple as GetSeniority() displayed in the example). Should that be added to the EF POCO through partial classes or should that be in the DTOs? Or is there another missing step in the Employee -> EmployeeDTO transfer?</p>\n"},{"tags":["asp.net-mvc","entity-framework","automapper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12941180,"title":"How can you deal with circular references when mapping?","body":"<p>Take this database for example</p>\n\n<p><strong>Employee</strong></p>\n\n<ul>\n<li>id - int (PK)</li>\n<li>name - varchar</li>\n</ul>\n\n<p><strong>Salary</strong></p>\n\n<ul>\n<li>id - int (PK)</li>\n<li>employee_id - int (FK)</li>\n<li>amount - float</li>\n</ul>\n\n<p>Entity Framework will generate models similar to these:</p>\n\n<pre><code>public partial class Employee\n{\n    public Employee()\n    {\n        this.Salaries = new HashSet&lt;Salary&gt;();\n    }\n    public int id { get; set; }\n    public string name { get; set; }\n}\n\npublic partial class Salary\n{\n    public int id { get; set; }\n    public int employee_id { get; set; }\n    public float amount  { get; set; }\n    public Employee employee { get; set; }\n}\n</code></pre>\n\n<p>The Emplyee references a list of his Salaries while each Salary points to which employee he owns. This results in a circular reference problem.</p>\n\n<p>I follow a repository pattern and use AutoMapper to transfer Employee to EmployeeDTO and Salary to SalaryDTO. I want those DTOs to keep infomation of it's children relationships. However, I dont want to do this recursively. I COULD do something like.</p>\n\n<pre><code>public partial class EmployeeDTO\n{\n    public EmployeeDTO()\n    {\n        this.Salaries = new HashSet&lt;SalaryChildDTO&gt;();\n    }\n    public int id { get; set; }\n    public string name { get; set; }\n}\n\npublic partial class SalaryChildDTO\n{\n    public int id { get; set; }\n    public float amount  { get; set; }\n}\n</code></pre>\n\n<p>But this would become a maintenance nightmare.</p>\n\n<p>How can I tell AutoMapper to only map a single decendant, or acheive a similar goal?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12955790,"title":"Alternate web.config for different servers","body":"<p>I was reading this <a href=\"http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx</a> but when I right click on web.config in Visual Studio the \"Add Coding Transforms\" is grayed out.  (I am not debugging or anything.)</p>\n\n<p>Basically, I want to change my connection strings based on what server I'm publishing to.  I have a dev server, and I have a productions server.</p>\n\n<p>What way can I accommodate this in ASP.NET MVC?</p>\n\n<p>Currently, there exist two files under my web.config: <code>Web.Debug.Config</code> and <code>Web.Release.Config</code>.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","razor","razorgenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":31,"score":0,"question_id":12943483,"title":"MVC Razor Separated dll","body":"<p>I have two sites quite similar that shares lot in common in some places but some other places are totally different. So i created three mvc4 applications MainSiteA, MainSiteB, SharedUI and using RazorGenerated for precompiling (and share) views among two sites. Current problem is my SharedUI view takes priority from a compiled or non-compiled view on the MainSiteA and I want it to make it vice-versa. </p>\n\n<p>Having: </p>\n\n<pre><code>SiteA:\n    Views/Index.cshtml (a)\n\nSiteB:\n    Views/Index.cshtml (b)\n    Views/Header.cshtml (b)\n\nSharedUI:\n    Views/Index.cshtml (s)\n    Views/Header.cshtml (s)\n    Views/Footer.cshtml (s)\n</code></pre>\n\n<hr>\n\n<p>How can i make to access specific pages depending on site in this way:</p>\n\n<pre><code>SiteA\nIndex.cshtml (a)\nHeader.cshtml (s)\nFooter.cshtml (s)\n\nSiteB\nIndex.cshtml (b)\nHeader.cshtml (b)\nFooter.cshtml (s)\n</code></pre>\n\n<p>I want MVC to look first on it's own MVC Application, if view is not found go a look on the shared library (SharedUI) for the view.</p>\n"},{"tags":["c#","asp.net-mvc","linq","datagrid","export-to-excel"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12942871,"title":"export to excel give me checkbox instead of string","body":"<p>so I am doing the datasource export to excel, but i open the file i saw the column has checkbox instead of value true or false. how do i fixed this, indeed, i want to put a sting \"active\" or \"inactive\" depends on the value. how can i do that?</p>\n\n<p>also i want to have string format for the phone number as well</p>\n\n<p>and the code i have for model</p>\n\n<pre><code>  public string MobileNumber { get; set; }\n  public bool? IsActive { get; set; }\n</code></pre>\n\n<p>how do i change in order for me to have the way that i want it ?</p>\n"},{"tags":["asp.net-mvc","mvcsitemap","mvcsitemapprovider","asp.net-mvc-sitemap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12790532,"title":"How do I specify an MVC SiteMaps Visibility attribute using Code based attribute?","body":"<p>I am using the latest Nuget package of MVC SiteMap provider. We are making heavy use of code based attributes defining nodes in our site.</p>\n\n<p>E.g. <code>[MvcSiteMapNode(Title = \"Examination Types\", ParentKey = \"LookupTable\", Key = \"ExaminationTypeIndex\")]</code></p>\n\n<p>We want to make use of a custom visibility provider to hide nodes from SiteMap as per <a href=\"http://mvcsitemap.codeplex.com/wikipage?title=Advanced%20node%20visibility\" rel=\"nofollow\">here</a> </p>\n\n<p>However we can't seem to specify node visibility attribute using Code based nodes? Is there anyway to do that. We can only specify a custom visibility provider and we would rather use the visible attribute.</p>\n"},{"tags":["asp.net-mvc","entity-framework","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12954708,"title":"MVC 3 running on VS 2012 Error webdev.webserver40exe assertation failed","body":"<p>I've got a MVC 3 project which was converted to use MVC 4 using Visual Studio 4, I'm getting the following error</p>\n\n<p>webdev.webserver40exe - assertation failed</p>\n\n<p>I'm using the entity framework code first, I've changed the connection string to use SQL 2012 and can't seem to find a solution to this error.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","mvc","azure","acs","iprincipal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12486649,"title":"Extending Azure ACS Claims for MVC Sessions","body":"<p>I am developing an MVC 4 Application to be hosted in Azure and want to use their ACS service for authentication. Once the user is authenticated I will use the resulting claim details to correlate to my local records. Subsequent to that, I would like to extend the claimset to include additional claims that represent local authorizations which my application would use for authorization decisions. I assume I need to replace the Principle but I'm not sure where/when to do this in MVC and want to avoid breaking any of the authentication plumbing which would normally be used throughout the life of the session. Can anyone shed some light on this? </p>\n"},{"tags":["asp.net","asp.net-mvc","entity-framework","razor","objectstatemanager"],"answer_count":13,"favorite_count":3,"up_vote_count":28,"down_vote_count":0,"view_count":29247,"score":28,"question_id":1836173,"title":"Entity Framework: \"Store update, insert, or delete statement affected an unexpected number of rows (0).\"","body":"<p>I am using Entity Framework to populate a grid control. It sometimes when I make updates I get the following error:</p>\n\n<pre>\nStore update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.</pre>\n\n<p>I can't figure out how to reproduce this. But it might have something to do with how close together I make the updates. Has anyone seen this or does anyone know what the error message refers to?</p>\n\n<p>Edit: Unfortunately I am no longer at liberty to reproduce the problem I was having here, because I stepped away from this project and don't remember if I eventually found a solution, if another developer fixed it, or if I worked around it. Therefore I cannot accept any answers.</p>\n"},{"tags":["c#","asp.net-mvc","inversion-of-control","unity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12954217,"title":"At what point is an instance of a class defined in an IOC container created","body":"<p>I have recently become involved in a large project and I have very little experience of Unity and IOC/DI and I am looking for clarification on how instances are created when defined in a Unity container.</p>\n\n<p>Given the following pieces of code;</p>\n\n<p>//Unity Configuration</p>\n\n<pre><code>container.RegisterAsSingleton&lt;IService, Service&gt;();\n</code></pre>\n\n<p>//References in base controller class</p>\n\n<pre><code>private readonly IService _Service;\n\nprotected DefaultController(IService Service)\n{\n    _Service = Service;\n}\n\nprotected string UseService(string id)\n{\n    return _Service.Method(id);\n}\n</code></pre>\n\n<p>Do I need to initialise an instance using something similiar (in an MVC solution) to;</p>\n\n<p><code>_Service = DependencyResolver.Current.GetService&lt;IService&gt;()</code>;</p>\n\n<p>or would an instance be created when the Service method is called first time?</p>\n\n<pre><code>_Service.Method(id);\n</code></pre>\n\n<p>I am trying to figure out the best place to put this code if required.</p>\n"},{"tags":[".net","asp.net-mvc","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12940909,"title":"MVC: Create relate entitiy when add one","body":"<p>So, my database now looks like:</p>\n\n<pre><code>Comment -&gt; Commentable \n\nCommentable -&gt; News\nCommentable -&gt; Files\nCommentable -&gt; Photo\n</code></pre>\n\n<p>This mean, when i add new entity (file or photo), i have to add new Commentable and insert this value to entity.</p>\n\n<p>What is the best practise of this? Should i override create function of entities, or put it into repository add function?</p>\n\n<p>Structure of tables looks like so, bcz i don't need to create for each entity own comments table.</p>\n\n<p><strong>Edit:</strong> My tables schema like here: <a href=\"http://stackoverflow.com/questions/10602562/one-table-vs-multiple-tables\">One table vs multiple tables</a> in Branko Dimitrijevic post</p>\n\n<p>When i want to add new file or event- at first, i have to generate new \"Commentable\" row and only after that- add with relate my entity.</p>\n\n<p>So, my question, where i have to put this logic or how to do that in the most correct practise?</p>\n\n<p>Thx.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","redirect","routing"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12948650,"title":"Handling Wrong/Bad Routes in MVC 3","body":"<p>In my MVC application, the controllers are being created using spring IOC as controller factory. If the user is requesting for a wrong controller by editing the url in the browser I am displaying in the browser  'the resource is not exist' message. Instead I want to direct him to the login page of the application.</p>\n\n<pre><code> public class ControllerFactory : IControllerFactory\n{\n    private static readonly ILog log =\n      LogManager.GetLogger(typeof(ControllerFactory));\n    public IController CreateController(RequestContext requestContext, string controllerName)\n    {\n        log.Debug(\"ControllerFactory.CreateController :controllerName =\" + controllerName);\n        controllerName = controllerName.ToLower();\n        IApplicationContext ctx = ContextRegistry.GetContext();\n        Controller ControllerObj = null;\n\n        if(ctx.ContainsLocalObject(controllerName))\n        {\n            ControllerObj = (Controller)ctx[controllerName];\n            log.Debug(\"Controller Object is created :\" + controllerName);\n        }\n        else\n        {\n               //Showing error message\n            requestContext.HttpContext.Response.Write(String.Format(\"&lt;br/&gt;&lt;b&gt;&lt;valign=\\\"center\\\"&gt;&lt;Font Size=\\\"6\\\" Font Color=\\\"Red\\\"&gt; The Resource {0} is not available&lt;/b&gt;\", controllerName));\n         // **Insteadd of showing the above message I want to direct user to the login page.**\n         // **\"Account/Login\"**\n            log.Error(\"there is no controller defintion with \" + controllerName);\n            requestContext.HttpContext.Response.End();\n        }\n        return ControllerObj;\n    }\n\n\n    public SessionStateBehavior GetControllerSessionBehavior(RequestContext requestContext, string controllerName)\n    {\n        return SessionStateBehavior.Default;\n    }\n\n    public void ReleaseController(IController controller)\n    {\n        IDisposable disposable = controller as IDisposable;\n        if (disposable != null)\n        {\n            disposable.Dispose();\n        }\n    }\n}\n</code></pre>\n\n<p>How can I redirect user to login page(\"/Account/Login\") instead of showing error message?</p>\n"},{"tags":["asp.net-mvc","api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12953841,"title":"OAuthWebSecurity usage for authorizing access to mvc actions","body":"<p>In asp.net mvc4 templae project their is usage of OAuthWebSecurity for external logins such as facebook, twitter..., however i want to authorize some actions in my project by attribute [Authorize] ,i can do that through a demo like <a href=\"http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx\" rel=\"nofollow\">Link</a> but how i can use  OAuthWebSecurity to accomplish what i need?</p>\n"},{"tags":["asp.net-mvc","umbraco","recaptcha"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":176,"score":3,"question_id":9211691,"title":"MVC DLL version 2.0.0.0: where can I get it from?","body":"<p>this is driving me to insanity no thanks to Recaptcha! Does anyone know where I can get a copy of the MVC dll version 2.0.0.0 to get this crappy Recaptcha working? I have tried all the previous versions of mvc and Recaptcha  but nothing works! It works on my local machine with 1.0 but if I put it to a live server, it has non of it. Does anyone have any suggestions?</p>\n\n<p>I should point out that my site is a web forms site, </p>\n\n<p>Thanks</p>\n\n<p>Here's the stupid error:</p>\n\n<p>Error occured</p>\n\n<pre><code>System.Exception: Unable to load one or more of the types in assembly 'Recaptcha, Version=1.0.4.0, Culture=neutral, PublicKeyToken=null'. Exceptions were thrown:\nSystem.IO.FileLoadException: Could not load file or assembly 'System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n  at umbraco.BusinessLogic.Utils.TypeFinder.FindClassesMarkedWithAttribute(Assembly assembly, Type attribute)\n  at umbraco.BusinessLogic.Utils.TypeFinder.FindClassesMarkedWithAttribute(Type attribute)\n  at umbraco.macro.GetXsltExtensionsImpl()\n  at umbraco.macro.b__6()\n  at umbraco.cms.businesslogic.cache.Cache.GetCacheItem[TT](String cacheKey, Object syncLock, CacheItemPriority priority, CacheItemRemovedCallback refreshAction, CacheDependency cacheDependency, TimeSpan timeout, GetCacheItemDelegate`1 getCacheItem)\n  at umbraco.macro.GetXsltExtensions()\n  at umbraco.macro.AddMacroXsltExtensions()\n  at umbraco.presentation.webservices.codeEditorSave.SaveXslt(String fileName, String oldName, String fileContents, Boolean ignoreDebugging)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui","data-binding","outputcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12953263,"title":"How to implement form data binding in MVC application","body":"<p>.NET/Mono/Jquery/Jquery UI MVC application shows order entry form in browser.\nIt contains input fields.</p>\n\n<p>Currently controller creates input elements containing values for every order if vuew is created.</p>\n\n<p>This is slow since every order in rendered fully and whole page is delivered to browser.</p>\n\n<p>Is this best way to speed it up:</p>\n\n<ol>\n<li>OutputCache to cache form in browser</li>\n<li>In page load use Ajax call go get order data for specific order in json.</li>\n<li>Assign order data to input elements</li>\n</ol>\n\n<p>Controllers looks like:</p>\n\n<pre><code>[OutputCache(Duration=1200)]\npublic ActionResult Index( int orderId ) {\n  Return View(new OrderViewModel( orderId) );\n}\n\npublic JsonResult GetData( int orderId ) {\n\n}\n</code></pre>\n\n<p>Is this best way or other idea ?\nIf yes, how to implement data binding in step 3 ?\nAre there some mvc commands, mvc code samples, jquery plugins or other way ?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-validate"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1934,"score":3,"question_id":8022695,"title":"ASP.net MVC 3 jQuery Validation; Disable Unobtrusive OnKeyUp?","body":"<p>Is there a way to disable the jQuery Validation for a certain validator (creditcard) so that it only occurs onblur, instead of onkeyup?</p>\n\n<p>Based on the jQuery Validator documentation I thought I could do something like this:</p>\n\n<pre><code>$(function () {\n    $(\"[data-val-creditcard]\").validate({\n        onkeyup: false\n    })\n});\n</code></pre>\n\n<p>However, it doesn't seem to be working.</p>\n\n<p>I also tried doing the following on my validator:</p>\n\n<pre><code>public class CreditCardValidator : DataAnnotationsModelValidator&lt;CreditCardAttribute&gt;\n{\n    string _message;\n\n    public CreditCardValidator(ModelMetadata metadata, ControllerContext context, CreditCardAttribute attribute)\n        : base(metadata, context, attribute)\n    {\n        _message = attribute.ErrorMessage;\n    }\n\n    public override IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules()\n    {\n        var rule = new ModelClientValidationRule\n        {\n            ErrorMessage = _message,\n            ValidationType = \"creditcard\"\n        };\n        rule.ValidationParameters.Add(\"onkeyup\", false);\n        return new[] { rule };\n    }\n}\n</code></pre>\n\n<p>It doesn't work either, but I was just taking a stab at the appropriate use of ValidationParameters.</p>\n\n<p>It is kind of annoying to be entering a credit card number in a form and having it randomly change from invalid to valid, then back to invalid.</p>\n\n<p>Any ideas?  Thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","partialview"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3132,"score":2,"question_id":4050596,"title":"Partial ASP.NET MVC View submit","body":"<p>I'm new in ASP.NET MVC so the question could appear 'stupid', sorry.</p>\n\n<p>I have a Partial View inside my Home view.</p>\n\n<p>The Partial View submit a form calling an Action Method inside the HomeController.</p>\n\n<p>It works fine with server validation, the problem is that after the post only the Partial View is rendered.</p>\n\n<p>How can I render the entire Home view after post?</p>\n\n<p>Thanks</p>\n\n<p>About the code:</p>\n\n<p>Inside PartialView I have a form:</p>\n\n<pre><code>&lt;% using (Html.BeginForm(\"Request\", \"Home\")) { %&gt;\n</code></pre>\n\n<p>Request is a ActionResult defined inside my HomeController.</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Request(RequestModel model)\n{\n  if (ModelState.IsValid)\n  {\n    // Saving data .....\n  }\n  else\n  {\n     // Show Server Validation Errors\n     return View();\n  }\n}\n</code></pre>\n\n<p>At this time, after the post, the ascx shows the server validation erros but only the PartialView ascx code is rendered.\nThe Url looks like this after the post:</p>\n\n<pre><code>http://xxxxxxxxxxx/Home/Request\n</code></pre>\n\n<p>What I want is showing the entire Home view with the ascx inside showing server validation errors.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":240,"score":0,"question_id":5902373,"title":"parent view's name","body":"<p>I have a Partial View used in many pages and I was wondering if there was a way to obtain the name of the Parent View that contains my Partial View currently?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","performance","mini-profiler"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":11154966,"title":"Strange MVC3 performance issue","body":"<p>I have a strange issue that is occurring before my code appears to reach my controller.</p>\n\n<p>From using the SO Mini-MVC-Profiler, I've found that a certain request is taking 500ms (500ms!!!), and for what I know it is doing; it's excessively high!</p>\n\n<p><img src=\"http://i.stack.imgur.com/QUz2B.png\" alt=\"enter image description here\"></p>\n\n<p>We do use unity IoC to create our dependencies, and in the ase of the below EntityController being created, there is a AppServices dependently to be created, which does require some service classes to be instantiated, but I wouldn't expect this takes 500ms, it's simply constructors.</p>\n\n<p>Is there any way I could debug to find out specifically where time is being taken up?</p>\n\n<p>Thanks,</p>\n"},{"tags":["asp.net-mvc","json","jquery-ajax"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12950143,"title":"JSON response field is undefined","body":"<p>I followed the instructions here <a href=\"http://stackoverflow.com/questions/5371658/problem-performing-ajax-call-from-asp-net-mvc2-app\">Problem performing Ajax call from ASP.NET MVC2 app</a>, and read about JSON. I searched a lot but didn't find an answer. I use the following code:</p>\n\n<p>view:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nvar userName = $(\"#userName\").val();\n\n$.ajax({\n    type: 'POST',\n    url: '/Home/PgAJAXTest',\n    data: {\n        q: 'Test1',\n        s: 'Test2'\n    },\n    success: function (bbb) {\n        alert(bbb.Val13);\n    },\n    error: function (msg) {\n        alert(\"error\");\n    }\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p>ASP.NET MVC controller code is:</p>\n\n<pre><code>    [HttpPost]\n    public JsonResult PgAJAXTest(string q, string s)\n    {\n        var a = Json(new { Val13 = \" TEST \" }); \n        return a;\n    }\n</code></pre>\n\n<p>The problem is that I get <code>\"undefined\"</code>.<br>\nIf I change <code>alert(bbb.Val13);</code> to <code>alert(bbb);</code> I get <code>{\"Val13\":\" TEST \"}</code></p>\n\n<p>I suppose it has something to do with the controller not returning the JSON exactly in the format that JSON expects.</p>\n"},{"tags":["javascript","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2594,"score":2,"question_id":4160735,"title":"mvc dropdownlist - capturing change event without attaching the event handler","body":"<p>I know I can attach change event to html.dropdownlist in mvc as shown below:    </p>\n\n<pre><code>$('#ddList').change(function() {\n            var value = $(this).val();\n\n\n        });\n</code></pre>\n\n<p>However, is there a way I can do it more like </p>\n\n<pre><code> &lt;%=Html.DropDownList(\"ddList\", Model.dropDown, new { @class = \"Ddl\", change = \"ddListChange\"  })%&gt;\n</code></pre>\n\n<p>js function below:     </p>\n\n<pre><code>function ddListChange() {\n        alert(\"test\");\n    }\n</code></pre>\n\n<p>Also, is one more approach more preferred than the other? </p>\n"},{"tags":["asp.net","asp.net-mvc","usb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12952588,"title":"Web Application - Read USB Token","body":"<p>I am developing a website using ASP.NET MVC 4, for security reasons only a few computers can login.</p>\n\n<p>And recently I saw this video showing a USB token login:\n<a href=\"http://www.youtube.com/watch?v=J9z1xkng3FQ&amp;feature=relmfu\" rel=\"nofollow\">http://www.youtube.com/watch?v=J9z1xkng3FQ&amp;feature=relmfu</a></p>\n\n<p>My question is, how can my application I read data from USB?</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":12948189,"title":"Setting Dropdownlist to a value from jQuery","body":"<p>My drop down has the following values:</p>\n\n<pre><code>US USA\nIN India\n</code></pre>\n\n<p>And other countries.</p>\n\n<p>In my jQuery I want to set the selected item in dropdown to \"IN India\" by just passing \"India\". I would like to know if there is a way to achieve that.</p>\n"},{"tags":["asp.net-mvc","nhibernate","fluent-nhibernate","load-balancing","second-level-cache"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":645,"score":6,"question_id":6587457,"title":"Nhibernate 2nd level caching issues / questions when moving from a single web server to a multiple web server load balanced environment","body":"<p>My previous setup was a single web server and a single database server.  I was using nhibernate 2nd level caching to cache stuff to avoid lots of calls going to the database.   This has worked great as i was using this this assembly </p>\n\n<pre><code>nhibernate.caches.syscache\n</code></pre>\n\n<p>and added this code to turn on the second level caching (using the regular syscache provider):</p>\n\n<pre><code>       return configuration\n            .Mappings(m =&gt; m.FluentMappings.AddFromAssemblyOf&lt;ApplicationMap&gt;().Conventions.Add(typeof(Conventions)))\n            .ExposeConfiguration(\n                c =&gt; {\n                    c.SetProperty(\"proxyfactory.factory_class\", proxyFactory);\n                    c.SetProperty(\"cache.provider_class\", \"NHibernate.Caches.SysCache.SysCacheProvider, NHibernate.Caches.SysCache\");\n                    c.SetProperty(\"cache.use_second_level_cache\", \"true\");\n                    c.SetProperty(\"cache.use_query_cache\", \"true\");\n                    c.SetProperty(\"expiration\", \"86400\");\n                })\n            .BuildSessionFactory();\n</code></pre>\n\n<p>I have now migrated over to a new environment that has multiple webservers and i am trying to understand the implications of this (I still have a single db server).</p>\n\n<p>Since the cache was being stored on the webserver before, now it would seem like i have 2 parallel caches on each webserver which themselves may not be in sync and may cause out of date updates, etc.</p>\n\n<p>What is the best solution to get the benefits of the caching i had before but also take advantage of the resiliency of the web server load balancing that is provided with this new setup?</p>\n"},{"tags":["jquery","asp.net-mvc","post"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12951344,"title":"jQuery.post with MVC","body":"<p>I have one problem with <code>jQuery.post()</code> syntax.</p>\n\n<p>I have the controller <code>ExampleController.cs</code>, with an action:</p>\n\n<pre><code>public ActionResult TestPost(Guid fileId) { //do something }\n</code></pre>\n\n<p>and the view <code>Example.cshtml</code>, and here I attempt to load this action:</p>\n\n<pre><code>function foo(fileGuid) {      \n    $.post(\"Example/TestPost?fileId=\" + fileGuid, function () {\n        alert(\"success\");\n    });\n}\n</code></pre>\n\n<p>But there's no alert, I think something wrong with this syntax. Can anyone help me out. Thanks.</p>\n"},{"tags":["asp.net-mvc","forms-authentication","web-security"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12951901,"title":"Mvc 4 custom login, is a custom membership provider needed?","body":"<p>I need to validate my users using 3 conditions: username, password and group.\nTo secure my application I did the following things:</p>\n\n<p>In my FilterConfig.cs I added the following line:</p>\n\n<pre><code>filters.Add(new AuthorizeAttribute());\n</code></pre>\n\n<p>In the Web.config I enabled forms authentication:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Home/Login\" timeout=\"2880\" /&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>In the Home controller I do my own user validation and set the authentication cookie:</p>\n\n<pre><code>[HttpPost, AllowAnonymous]\npublic ActionResult Login(LoginViewModel vm)\n{\n    if (ModelState.IsValid)\n    {\n        var userInfo = MyLoginHelper.IsValidLogin(vm.User, vm.Password, vm.Group);\n        if (userInfo != null)\n        {\n            Session[\"UserInfo\"] = userInfo;\n            FormsAuthentication.SetAuthCookie(vm.Gebruikersnaam, false);\n            return RedirectToAction(\"BlaBla\");\n        }\n        return Content(\"Invalid login\");\n    }\n}\n</code></pre>\n\n<p>From this point, only authorized calls to my controllers are permitted. I use the session to keep track of the user who's making the calls. I don't use a (custom) MembershipProvider.</p>\n\n<p>Is this a good way to secure the app?</p>\n\n<p>What is the advantage of using a MembershipProvider?</p>\n"},{"tags":["jquery","asp.net-mvc","c#-4.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":68,"score":-1,"question_id":12948946,"title":"how to check closing of browser event using javascript","body":"<p>i want to detect the browser on closing..i want to run onbeforeunload (something related to this) on closing of window or using alt+f4 \nSir, i want whenever user trying to close the browser by clicking the close button or Altf4. He will get the message something like(\"Are your sure\")</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-4","unobtrusive-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":12770305,"title":"Unobtrusive Validation Keeps breaking in MVC4","body":"<p>I have been having a wierd issue that is driving me absolutely crazy.</p>\n\n<p>It started with the following error out of the blue after it had been working great: </p>\n\n<pre><code>Validation type names in unobtrusive client validation rules must be unique. The following     \nvalidation type was seen more than once: required\n</code></pre>\n\n<p>This error first started on one of my controllers in Area/Admin/WebSites.  But as soon as my auth cookie expired I got it on my Login page as well on the EditFor(m=>m.UserName) line. I combed through my code looking for duplicate Required attribute anywhere on any model that might be remotely named the same to no avail.</p>\n\n<p>I even went into my LoginViewModel, removed the [Required] From UserName.  The error moved to the EditFor(m=>m.Password).  I removed the Required from Password as well, and the error moved the RememberMe line but there was no Required attribute on that member at all even.  In fact I have nothing else even remotely named RememberMe in any other class anywhere.</p>\n\n<p>Okay, well I gave up and started rebuilding the webSite project from scratch (not the rest of the solution) and still ended up with the same thing.</p>\n\n<p>Out of desperation, I rebuild the entire solution from scratch, only copying the *.cs files in and manually reloading all the references thinking there was a duplicate reference somewhere.</p>\n\n<p>Once I got to the point of building the MVC4 project once again I did it in stages to see if I could figure what was happening.  It was doing fine, loading up and I could log in, etc, until I started adding Areas.  At first I just copied the Areas folder directly into the project (all the namespace names are the same, so this should have been fine).  But sure enough I started getting this error right way.  </p>\n\n<p>Okay, so I started deleting controllers in reverse order of my creating them originally.  The site never returned to normal until I had deleted the Areas folder completely.</p>\n\n<p>Testing this, as soon as I created an Areas folder in the project, it would break.  Same thing if I used the GUI to create the new Area.  </p>\n\n<p>Okay, back to the drawing board.  Recreated the MVC4 project from scratch, this time outside of the solution and only pulled in the 2 critical NuGet packages critical to my solution at this point:  Ninject.MVC3 and Mvc3ControlsKit (the one from nuget which is for both 3 &amp; 4).  Okay everything finally starts working great.  At this point, my Jquery is version 1.7.2 with the default Jquery UI that comes with MVC4.  </p>\n\n<p>At some point, I ran into a problem with the jquery dialog not closing so I installed JQuery 1.8.2 and the latest JQuery UI from NuGet.  Everything worked fine until I went to add a completely blank Controller in my Admin Area and this error popped up again.</p>\n\n<p>Okay, back to the drawing board again...  I rebuilt it in stages, testing at each point.  This time not installing the latest JQuery goodies.  Everything starts working fine again.  Added a new controller, then two.  Okay, made a valid copy of this version and set it aside.  Updated Jquery and Jquery UI to latest versions.  Add a new controller in the area and it still continues to work to my complete frustration.</p>\n\n<p>My Entities are all using Fluent API to configure my entities with no DataAnnotatian Attributes at all.  Any ideas?  I keep waiting for it to break again.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here is some more information I just figured out.  The error is occuring on this line of code in my LogIn Partial View.  My model is</p>\n\n<pre><code>public class LoginViewModel \n{\n    [Required]\n    [Display(Name = \"User Name\")]\n    public string UserName { get; set; }\n\n    [Required]\n    [DataType(DataType.Password)]\n    [Display(Name = \"Password\")]\n    public string Password { get; set; }\n\n    [Display(Name = \"Remember me?\")]\n    public bool RememberMe { get; set; }\n\n    /// &lt;summary&gt;\n    /// Role\n    /// &lt;/summary&gt;\n    public string Role { get; set; }\n\n}\n</code></pre>\n\n<p>The error occurs when calling this line in the view:</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.UserName)\n</code></pre>\n\n<p>At this point, Ninject takes over and immediately after returning from the following method in the Ninject.Web.Mvc.Validation.NinjectDataAnnotationsModelValidatorProvider class, the aforementioned unobtrusive validation error occurs.  Additionally, I have confirmed that this method has correctly identified the required validations and injected them.  The exception is not occurring in this method but afterwards. </p>\n\n<pre><code>protected override IEnumerable&lt;ModelValidator&gt; GetValidators(ModelMetadata metadata, ControllerContext context, IEnumerable&lt;Attribute&gt; attributes)\n    {\n        var validators = base.GetValidators(metadata, context, attributes);\n        foreach (var modelValidator in validators.OfType&lt;DataAnnotationsModelValidator&gt;())\n        {\n            var attribute = this.getAttributeMethodInfo.Invoke(modelValidator, new object[0]);\n            this.kernel.Inject(attribute);\n        }\n\n        return validators;\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":619,"score":1,"question_id":10627988,"title":"MVC application crashes due to System.Web.Mvc not containing the html namespace","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11071392/the-type-or-namespace-name-does-not-exist-in-the-namespace-system-web-mvc\">The type or namespace name does not exist in the namespace ‘System.Web.Mvc’</a>  </p>\n</blockquote>\n\n\n\n<p>When I compile my MVC4 project locally I receive the following error:</p>\n\n<pre><code>CS0234: The type or namespace name 'Html' does not exist in the namespace 'System.Web.Mvc' (are you missing an assembly reference?)\n\nLine 25:         &lt;add namespace=\"System.Web.Mvc\" /&gt;\nLine 26:         &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\nLine 27:         &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;    &lt;--- this line\nLine 28:         &lt;add namespace=\"System.Web.Routing\" /&gt;\nLine 29:         &lt;add namespace=\"System.Web.WebPages\" /&gt;\n</code></pre>\n\n<p>What could be causing this? If I push the code to AppHarbor it builds and runs correctly</p>\n"},{"tags":["html","asp.net-mvc","razor-2"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12950761,"title":"HTML code messing following URLs","body":"<p>I'm using Visual Studio 2012 for an MVC web app using code first method with EF 5.0.\nI have written the following code to make a modal window appear at some point:</p>\n\n<pre><code>&lt;div id=\"mod\" style=\"display:none;\"&gt;\n    &lt;div id=\"mod-container\"&gt;  \n        &lt;div id=\"mod-close\"&gt;&lt;img src=\"~/Content/icons/close.png\" title=\"close\" onclick=\"$('#mod').fadeOut();\"/&gt;&lt;/div&gt;   \n        &lt;div id=\"mod-content\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>If works fine, exept that the image <code>&lt;img src=\"~/Content/icons/close.png\" [...] /&gt;</code> cannot be found by the browser which thinks its URL is</p>\n\n<pre><code>http://localhost:49895/Class1/Home/~/Content/icons/close.png\n</code></pre>\n\n<p>To be precise, every code <strong>under</strong> my div's got broken URL. If I put my image above the div's it's displaying correctly with the following URL:</p>\n\n<pre><code>http://localhost:49895/Content/icons/edit.png\n</code></pre>\n\n<p>Do you have an idea where i messed things up?</p>\n\n<p>Edit2: example (after problem being resolved)</p>\n\n<p>This works:</p>\n\n<pre><code>&lt;img src=\"~/Content/icons/close.png\" title=\"close\" onclick=\"$('#mod').fadeOut();\"/&gt;\n&lt;!-- comment containing a quote ' --&gt;\n&lt;div id=\"mod\" style=\"display:none;\"&gt;\n    &lt;div id=\"mod-container\"&gt;  \n        &lt;div id=\"mod-close\"&gt;&lt;/div&gt;   \n        &lt;div id=\"mod-content\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This doesn't work:</p>\n\n<pre><code>&lt;!-- comment containing a quote ' --&gt;\n&lt;div id=\"mod\" style=\"display:none;\"&gt;\n    &lt;div id=\"mod-container\"&gt;  \n        &lt;div id=\"mod-close\"&gt;&lt;/div&gt;   \n        &lt;div id=\"mod-content\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;img src=\"~/Content/icons/close.png\" title=\"close\" onclick=\"$('#mod').fadeOut();\"/&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","telerik"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12951110,"title":"What \"EditorViewData\" is for in Telrik MVC Grid column definition?","body":"<p>i have a telerik grid as follow:</p>\n\n<pre><code>Html.Telerik().Grid&lt;MatchViewModel&gt;().Name(\"Matches\").Columns(cols =&gt;\n             {\n                 cols.Bound(e =&gt; e.Name);\n                 cols.Bound(e =&gt; e.Date);\n                 cols.Bound(e =&gt; e.GuestTeamId);\n                 cols.Bound(e =&gt; e.HostTeamId);\n                 cols.Bound(e =&gt; e.PostponedDate);\n             ==&gt; cols.Bound(e =&gt; e.RefereeId).EditorViewData(new { RefereeName = '' });\n                 cols.Bound(e =&gt; e.StatusId);\n             })\n</code></pre>\n\n<p>in the column reffered by arrow i wanna send referee name as additional data for EditorTemplate.i inferred from the <code>EditorViewData</code> method name that it can help me doing this.but i can't get it working.can anyone help me with this?\nthanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2012","web-config-transform"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12950512,"title":"One more web.config transform doesn't work","body":"<p>I had a web application project where web.config transformation were used and they worked. </p>\n\n<p>Then I had to seriously change the project, actually to create a new project file and add everything there. This was done to enable mvc on the project. I created all project configurations as they were before. Web.config transformations stopped working. </p>\n\n<p>I recreated web.config transformations: moved transform files and created new ones using \"Add config transform menu\" (so VS should understand that these are web config transform files), then I overwrite new files with my old ones. No luck, transformation doesn't work even for \"build in\" debug and release configurations. I can see that it doesn't even run: there is no folder \"TransformedWebConfig\" (or something alike) in obj folder, it was there before. </p>\n\n<p>I compared the previous version of the project file with the new one. Where it comes to Web.xxx.config they are the same. Does anyone know which exactly part of csproj file is responsible for running web.config transformations?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","jquery-ui","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12949881,"title":"how to active a div tag","body":"<p>I am using kendo UI grid and Form and these are separated by a kendo splitter.</p>\n\n<pre><code>&lt;div id=\"splitter\" style=\"width:100%;height:100%;\"&gt;\n        &lt;div id =\"grid\" style=\"height:100%;width:100%;\"&gt;&lt;/div&gt;\n        &lt;div id =\"Form\" style=\"display:none\"&gt;\n             &lt;input type = \"text\"/&gt;\n             &lt;input type =\"button\"/&gt;\n        &lt;/div&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>Initially I have to display grid in the left half of the splitter,after selecting a row in the grid I want to display the form in the right side of the splitter (I want to active the \"Form\" div tag.)can u tell me how to do this.</p>\n"},{"tags":["asp.net-mvc","wif",".net-4.5","federated-identity"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":115,"score":0,"question_id":12940929,"title":"Why would FederatedAuthentication.WSFederationAuthenticationModule be null in MVC Azure ACS Federated Authentication?","body":"<p>I'm trying to put together FederatedAuthentication with .NET 4.5, MVC 4, and active redirect using a custom server-side login page, using code from <a href=\"http://garvincasimir.wordpress.com/2012/04/16/tutorial-mvc-application-using-azure-acs-and-forms-authentication-part-2/\" rel=\"nofollow\">this</a> tutorial, and from <a href=\"http://msdn.microsoft.com/en-us/library/windowsazure/hh127794.aspx\" rel=\"nofollow\">this</a> code sample.</p>\n\n<p>Redirecting to the LogOn method of my AccountController works fine, and the method looks like this:</p>\n\n<pre><code>public ActionResult LogOn()\n{\n    HrdClient hrdClient = new HrdClient();\n    WSFederationAuthenticationModule fam = FederatedAuthentication.WSFederationAuthenticationModule; /*** Fails here because this is null **/\n    HrdRequest request = new HrdRequest(fam.Issuer, fam.Realm, context: Request.QueryString[\"ReturnUrl\"]);\n    IEnumerable&lt;HrdIdentityProvider&gt; hrdIdentityProviders = hrdClient.GetHrdResponse(request);\n    ViewData[\"Providers\"] = hrdIdentityProviders;\n    return View();\n}\n</code></pre>\n\n<p>This fails because <code>FederatedAuthentication.WSFederationAuthenticationModule</code> is null.</p>\n\n<p>Using VS 2012, I've run the new Identity and Access wizard (which seems to replace the old STS dialog). This has given me a folder of FederationMetadata, which appears correct, and several modifications to my Web.Config. In particular, the modules section looks like this:</p>\n\n<pre><code>&lt;system.webServer&gt;\n&lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n&lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n  &lt;add name=\"WSFederationAuthenticationModule\" type=\"System.IdentityModel.Services.WSFederationAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" preCondition=\"managedHandler\" /&gt;\n  &lt;add name=\"SessionAuthenticationModule\" type=\"System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" preCondition=\"managedHandler\" /&gt;\n&lt;/modules&gt;\n</code></pre>\n\n<p></p>\n\n<p>And having seen SO answers <a href=\"http://stackoverflow.com/questions/8937123/federatedauthentication-wsfederationauthenticationmodule-is-null-at-runtime\">8937123</a> and <a href=\"http://stackoverflow.com/questions/8926099/wsfederationauthenticationmodule-redirectingtoidentityprovider-event-is-not-call\">8926099</a>, I've added the following as well:</p>\n\n<pre><code> &lt;httpModules&gt;\n  &lt;add name=\"WSFederationAuthenticationModule\" type=\"Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n&lt;/httpModules&gt;\n</code></pre>\n\n<p>And finally my nuget packages config shows Microsoft.IdentityModel, which is correctly referenced by the MVC app:</p>\n\n<pre><code>&lt;packages&gt;\n  &lt;package id=\"Microsoft.IdentityModel\" version=\"6.1.7600.16394\" targetFramework=\"net45\" /&gt;\n&lt;/packages&gt;\n</code></pre>\n\n<p>I've also seen <a href=\"http://social.msdn.microsoft.com/Forums/en/windowsazuresecurity/thread/ba44f757-945c-4622-9b2d-feb9a56fe71e\" rel=\"nofollow\">this question</a> on social.msdn, which just seems to suggest that the STS dialog does need to be run.</p>\n\n<p>Can anybody explain why <code>FederatedAuthentication.WSFederationAuthenticationModule</code> would be null, and what I can do to stop this happening?</p>\n"},{"tags":["javascript","asp.net-mvc","mvc","tooltip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":12217972,"title":"custom tooltip in MVC on a table - show data per line","body":"<p>I am struggling to get an intuitive tooltip to display per line in my MVC application.</p>\n\n<pre><code>   @foreach (var item in Model)\n{\n\n    int countSDOL = (item.sdolDetails.Count(i =&gt; i.userid == item.id));\n    int workFlow = (item.workflows.Count(i =&gt; i.actionOutstanding == true));     \n    @Html.HiddenFor(modelItem =&gt; item.id)\n    &lt;tr style=\"@(workFlow &gt; 0 ? \"Background-color:#87BEF5\" : \"\")\"&gt;\n    &lt;td&gt;\n         @if (workFlow &gt; 0)\n            {     \n\n                &lt;button id=\"quickButton\" class=\"classname\" value=\"@item.id\" data-task-id=\"@item.id\"&gt;Actions&lt;/button&gt;\n            }\n    &lt;/td&gt;\n    &lt;td&gt;\n             &lt;div class=\"tooltip\"&gt;\n               @foreach (var role in item.userRoles)\n               {\n                    &lt;div title=\"\"&gt;\n                    @Html.DisplayFor(roles =&gt; role.role.roleDescription) \n                    &lt;/div&gt;\n               }                        \n          &lt;/div&gt;  \n     &lt;/td&gt;\n      &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.title)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.forename)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.surname)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.employeeNumber)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.sdolInitiation)\n        &lt;/td&gt;\n        &lt;td align=\"center\"&gt;\n            @if (item.trainingTrackerPassed.Equals(true))\n            {\n                &lt;img src=\"../../Content/tick.png\" /&gt;\n            }\n            else\n            {\n                &lt;img src=\"../../Content/cross.PNG\" /&gt;\n            }\n        &lt;/td&gt;\n        &lt;td align=\"center\"&gt;\n        @if (item.userValid.Equals(true))\n        {\n                &lt;img src=\"../../Content/tick.png\" /&gt;\n        }\n        else\n        {\n                &lt;img src=\"../../Content/cross.PNG\" /&gt;\n        }\n\n        &lt;/td&gt;\n        &lt;td align=\"left\"&gt;\n            @Html.ActionLink(\"Details\", \"Details\", new { id = item.id }) |\n            @Html.ActionLink(\"Roles\", \"Index\", \"Roles\", new { id = item.id }, null) |\n           @if (countSDOL == 0)\n           {\n            @Html.ActionLink(\"SDOL\", \"Create\", new { id = item.id }, null)                                       \n           }\n           else\n           {\n            @Html.ActionLink(\"SDOL\", \"Sdol\", new { id = item.id }, null)   \n           }        \n        &lt;/td&gt;\n        &lt;td&gt;\n         &lt;a id=\"download_now\"&gt;show&lt;/a&gt;   \n        &lt;/td&gt;\n    &lt;/tr&gt;\n\n}\n</code></pre>\n\n<p>Above is my view. Notice the nested @foreach in there. This shows for each row in the table a list of roles assigned for that row. </p>\n\n<p>What I really need to do is show this div containing the roledescriptions as a tool tip per line. I tried downloading and using jquery tools and managed to get it to display a tool tip, but it would only work on the first row of the table. each subsequent row wouldn't display a tooltip. looking at the examples on their site, there is only examples of tooltip one value for an entire table.. has anyone done what I am trying to achieve??</p>\n\n<p>Many thanks</p>\n"},{"tags":["c#","asp.net-mvc","redirecttoaction"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12936211,"title":"Pass values to controller and come back to calling view?","body":"<p>I've got a button for which I dynamically create target URI with jquery. Controller action will do some update on database and I want it to display view that call it in the first place. This view can differ. How do you deal with such a scenario?</p>\n\n<p>The idea is that you click on label, provide translation for it, click save and you can see you translation on your current page. I made it work with single page just fine but scaling it up is a problem. </p>\n\n<p>I know I can pass around current page URI and then parse it 'by hand' and put it in RedirectToAction but is there cleaner way?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12936713,"title":"Web API Error: The 'ObjectContent`1' type failed to serialize the response body for content type","body":"<p>I am getting this error when attempting to use a Web API controller.</p>\n\n<p><strong>Web API Error: The 'ObjectContent`1' type failed to serialize the response body for content type</strong></p>\n\n<p>the code in my controller is as follows</p>\n\n<pre><code>public IEnumerable&lt;Student&gt; GetAllStudents()\n    {\n        var allstudents = unitOfWork.StudentRepository.Get(includeProperties: \"Groups\");\n\n\n        return allstudents;\n    }\n\n    public Student GetStudentByID(Guid id)\n    {\n        return unitOfWork.StudentRepository.GetByID(id);\n    }\n</code></pre>\n\n<p>and my 'Student' class is as follows</p>\n\n<pre><code>public partial class Student\n{\n    public Student()\n    {\n        this.Groups = new HashSet&lt;Group&gt;();\n    }\n\n    public System.Guid StudentID { get; set; }\n    public string Surname { get; set; }\n    public string FirstName { get; set; }\n    public byte[] Timestamp { get; set; }\n\n    public virtual Course Course { get; set; }\n    public virtual ICollection&lt;Group&gt; Groups { get; set; }\n}\n</code></pre>\n\n<p>Both methods result in the same error.</p>\n\n<p>My inner exception is as follows</p>\n\n<pre><code>Type 'System.Data.Entity.DynamicProxies.Student_4C97D068E1AD0BA62C3C6E441601FFB7418AD2D635F7F1C14B64F4B2BE32DF9A' with data contract name 'Student_4C97D068E1AD0BA62C3C6E441601FFB7418AD2D635F7F1C14B64F4B2BE32DF9A:http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.\n</code></pre>\n\n<p>I have a feeling I need to use the 'KnownType' attribute but I'm not exactly sure how I implement it.</p>\n\n<p>Any help would be appreciated</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":674,"score":1,"question_id":7676994,"title":"DropDownListFor(...) selecting boolean false by default","body":"<p>I have typical YesNo kind of dropdown in the application. For that, I have developed model (rather ViewModel Utility) class for future extension prupose.</p>\n\n<pre><code>public string Text { get; set; } // represents text part\n        public bool Value { get; set; } // represent value\n        public List&lt;DropDown&gt; DropDowns { get; set; } //list for binding\n        public void BuildYesNoDropDown()\n        {\n            DropDowns = new List&lt;DropDown&gt;();\n            DropDowns.Add(new DropDown { Text = \"Yes\", Value = true });\n            DropDowns.Add(new DropDown { Text = \"No\", Value = false });\n        }\n</code></pre>\n\n<p>Then, I bind it in view like following:</p>\n\n<pre><code>@Html.DropDownListFor(x =&gt; x.SelectedValue, new SelectList(Model.DropDowns, \"Value\", \"Text\",1),\"Select\") //last para - OptionLabel\n</code></pre>\n\n<p>On the view, all three parameters are getting display i.e. \"Select\", \"Yes\" and \"No\". But, by default \"No\" has been selected. If I make \"Value\" property as integer then it works fine and by default \"Select\" gets selected, but as mentioned in the code, if I tend to go with bool type then \"No\" gets selected. </p>\n\n<p>How to get normal behavior when DataValueField is bool?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12946077,"title":"Editing lists with foreach in ASP.NET MVC","body":"<p>Apologies if this is a really stupid question.</p>\n\n<p>If I have a model with a list in it, like:</p>\n\n<pre><code>public class Edit_model\n{\n    public List&lt;Other_model&gt; Items { get; set; }\n\n    /// &lt;summary&gt;\n    /// Default class constructor\n    /// &lt;/summary&gt;\n    public RecipesEdit_model()\n    {\n        this.Items = new List&lt;Other_Model&gt;();\n    }\n}\n</code></pre>\n\n<p>And I pass this to my <code>Edit</code> action, populate <code>Items</code> and then send it off to the View. Since <code>Items</code> is a list, I always try to do something like this:</p>\n\n<pre><code>        &lt;div&gt;\n            &lt;ul&gt;\n                @foreach (var item in Model.Items)\n                {\n                    &lt;li&gt;\n                        @Html.EditorFor(m =&gt; item, \"_ItemEditorTemplate\")\n                    &lt;/li&gt;\n                }\n            &lt;/ul&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>Which always screws up the ids of the controls generated in the template, so model binding on the <code>Edit</code> post action never works.</p>\n\n<p>It does work if I loop through <code>Items</code> using a <code>for</code> loop though, like this:</p>\n\n<pre><code>        &lt;div&gt;\n            &lt;ul&gt;\n                @for (int i = 0; i &lt; Model.Items.Count; i++)\n                {\n                    &lt;li&gt;\n                        @Html.EditorFor(m =&gt; m.Items[i], \"_ItemEditorTemplate\")\n                    &lt;/li&gt;\n                }\n            &lt;/ul&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>I can see why that works, because I get the lambda expression actually using the correct variable in the function... but I don't like this much, because from experience programming in C# you can get indexing issues, so I'd much rather use <code>foreach</code>.</p>\n\n<p>What is the syntax to make this work with <code>foreach</code>?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010","publish","app-offline.htm"],"answer_count":6,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":2816,"score":11,"question_id":2846097,"title":"Custom app_offline.htm file during publish","body":"<p>When I publish my ASP.NET MVC application it generates a app_offline.htm file to take the site offline while it updates the website and then deletes the file once the publish is successful.</p>\n\n<p>This is cool and I really like the idea, but I want to create my own custom app_offline.htm file that the publish action is aware of and put it somewhere where it doesn't effect my development site - i.e. it doesn't sit in the root of my development site rendering it offline all the time.</p>\n\n<p>TIA,<br>\nCharles</p>\n\n<p>EDIT: From the comments on <a href=\"http://weblogs.asp.net/scottgu/archive/2005/10/06/426755.aspx#1087435\" rel=\"nofollow\">Scott Gu's post about app_offline.htm</a>, it seems that customization of the app_offline.htm file wasn't possible with VS 2005 - has this changed with VS 2008 and now VS 2010?</p>\n"},{"tags":["css","asp.net-mvc","jquery-mobile","razor","background-image"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":445,"score":1,"question_id":11331291,"title":"jQueryMobile Change Background image","body":"<p>Does someone knows how to change and/or set a background image for a jQueryMobile-built site?\nCause I tried everything (not so much,actually) I found, but I really can't overwrite the default css for jquery mobile (http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css) adding my own one.\nHope for your help,\nthanks!</p>\n\n<hr>\n\n<p>SOLVED: in your CSS file, you have to override the jQuery Mobile \".ui-mobile .type-home .ui-content\".\nThat's how I did it:</p>\n\n<pre><code>.ui-mobile .type-home .ui-content { \n    background: white url(Image/A-HD.jpg); \n    background-repeat: no-repeat; background-position: 50% 80%; /*50% 80% mozilla optimized*/ \n    background-attachment: fixed; \n    background-size: 50%; /*50% mozilla optimized */ \n}\n</code></pre>\n"},{"tags":["asp.net-mvc","jqgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":138,"score":1,"question_id":3243855,"title":"jQuery Grid for MVC data not coming from controller to view","body":"<p>I just downloaded jQuery Grid for ASP.NET MVC from codeplex</p>\n\n<p>I did run the project, all seams to be all right, in Sql Profiler i can see that sql queries coming to database. Then in debugger i can see that data comes in LinqToSql query fine:</p>\n\n<pre><code>var model = from entity in repository.Index().OrderBy(sidx + \" \" + sord)\n    select new\n    {\n        Edit = \"_edit link was here_\",\n        Details = \"_details link was here_\",\n        ProductID = entity.ProductID,\n        ProductName = entity.ProductName,\n        UnitPrice = entity.UnitPrice,\n        Discontinued = entity.Discontinued == true \n            ? \"&lt;input type='checkbox' checked='checked' disabled='disabled'/&gt;\" \n            : \"&lt;input type='checkbox' disabled='disabled' /&gt;\"\n    };\n</code></pre>\n\n<p>Data coming to model, model is not null.</p>\n\n<p>Then this data converting in to JSON and then JsonResult go in to view:</p>\n\n<pre><code>JsonResult jData = Json(model.ToJqGridData\n    (page, rows, null, search, new[] { \"ProductName\" }));\nreturn jData;\n</code></pre>\n\n<p>i saw in debugger, there is data in jData, jData is not null, all looking good.</p>\n\n<p>But then on the view (html) there is no data displaying on the jqGrid, it is empty. For some reasons data not coming from controller to view(jqGrid). \nI was trying all latest browsers. </p>\n\n<p>I think the problem hiding somewhere in javascripts, currently i am looking in to this.</p>\n\n<p>May be some one have any ideas about that.</p>\n"},{"tags":["asp.net","asp.net-mvc","youtube"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12948928,"title":"Download Video from youtube into your website","body":"<p>I want to download videos from you tube into my website. I have developed my website using MVC 3. I want a page where user can put the link of you tube video and that video will get downloaded on the server. and then we can play you tube video on html5 player.</p>\n\n<p>I have try using various codes available on internet but none of them are working. All these codes are pretty old.</p>\n\n<p>So can anybody suggest me a way to implement such functionality.</p>\n"},{"tags":["asp.net-mvc","visual-studio","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12928282,"title":"how to save the audio stream into database","body":"<p>how to save the audio file bytes in the database in audio/mp3 format.\nI have implemented the below code for image,I want to know how to do this for audio file.</p>\n\n<pre><code>            System.IO.MemoryStream outStream = new System.IO.MemoryStream();\n            System.Drawing.Image image = System.Drawing.Image.FromStream(ms);\n            image.Save(outStream, System.Drawing.Imaging.ImageFormat.Jpeg);\n            byte[] docBytes = outStream.ToArray();            // creating\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asynchronous","ravendb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12945548,"title":"Perform Async operation asp.net mvc outside of the action","body":"<p>I want to be able to load a user from a cloud database on each request and have that available on the request in a controller using asp.net mvc. The problem is the current framework does not support doing async operations from action filters. So OnActionExecuting, OnAuthorization methods do not allow me to do this.. for example I have the following code which DOES NOT work (so don't try it).. You get an exception : \"An asynchronous module or handler completed while an asynchronous operation was still pending.\"</p>\n\n<pre><code>protected async override void OnAuthorization(AuthorizationContext filterContext)\n{\n  var user = filterContext.HttpContext.User;\n  if (!user.Identity.IsAuthenticated)\n  {\n    HandleUnauthorizedRequest(filterContext);\n    return;\n  }\n\n  using (var session = MvcApplication.DocumentStore.OpenAsyncSession())\n  {\n    User currentUser = await session.LoadAsync&lt;User&gt;(user.Identity.Name);\n    if (currentUser == null)\n    {\n      HandleUnauthorizedRequest(filterContext);\n      return;\n    }\n\n    filterContext.HttpContext.Items[\"User\"] = currentUser;\n  }\n}\n</code></pre>\n\n<p>So is there any other way of being able to do this? I notice there is a begin execute method in the base Controller:</p>\n\n<pre><code>protected override IAsyncResult BeginExecute(RequestContext requestContext, AsyncCallback callback, object state)\n{\n  return base.BeginExecute(requestContext, callback, state);\n}\n</code></pre>\n\n<p>Could I do it there possibly?</p>\n"},{"tags":["asp.net-mvc","iis","routing","hosting","subdomain"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12944975,"title":"asp.net mvc 3 application with subdomain able to access main site but not subdomain","body":"<p>The application is built using this starter kit: <a href=\"https://github.com/yatendra/saasapp\" rel=\"nofollow\">https://github.com/yatendra/saasapp</a>.</p>\n\n<p>When i run the application and go to localhost:1231 in my browser it works fine. After creating a new account with the name 'test' I should be able to go to test.localhost:3203.</p>\n\n<p>I don't quite understand how the subdomain with the different port works. This problem occurred a month ago, and 'magically' disappeared. I had to format and now the problem has returned.</p>\n\n<p>I have already added 127.0.0.1 test.localhost to my hosts file.</p>\n\n<p>I have also taken a look at this post: <a href=\"http://stackoverflow.com/questions/5436268/mvc-3-subdomain-routing\">MVC 3 Subdomain Routing</a></p>\n\n<p>Thanks for the help.</p>\n"},{"tags":["javascript","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12945754,"title":"JavaScript search and back links","body":"<p>I am making a film database for practicing ASP.NET MVC (in MVC 3). I have a list of films loaded from my database and the list is searchable.\nRecently I changed to search interface from a conventional form interface to a javascipt and Ajax, to provide a smoother user experience. I am now thinking that might have been a mistake because of the loss of navigability.</p>\n\n<p>When I click on a film in the list it takes me to the details page. I would like to provide some navigation links on that page too, ideally \"previous\", \"back to list\" and \"next\", but at a minimum \"back to list\".</p>\n\n<p>Since the film list is now paged and searched with JavaScript, the URL doesn't change anymore, and I am not sure how to go about providing the information I need to make those links.</p>\n\n<p>The back and next links would need to know which one is the next film in the list, which requires knowing whether or not the list is the result to a search query. So does the back button, but additionally I also need to know the page the user was on.</p>\n\n<p>Is there some way this can be done? Should I maybe modify the links to the details page on every film in the list to include this information?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","entity-framework","entity-framework-4.3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12946099,"title":"Keyword not supported: 'metadata'.? with Sql Connection in Entityt Framework with MVC3","body":"<p>I  am  using  Entity Framework 4 with my Asp.Net MVC3  application. My  problem  is  that  I  am  using  Entity Framework  to  perform  action  with  my  database ,  That  is  working  fine.  For  some  other  purpose I am  also  using  Sql Connection  to  Store  and  Retrieve  my  data  from database. I  am  getting  </p>\n\n<pre><code>[Keyword not supported: 'metadata']\n</code></pre>\n\n<p>error   while  connecting  with  my  database.</p>\n\n<p>This  is  my  web  config  </p>\n\n<pre><code>  &lt;add name=\"VibrantEntities\" connectionString=\"metadata=res://*/Vibrant.csdl|res://*/Vibrant.ssdl|res://*/Vibrant.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=KAPS-PC\\KAPSSERVER;initial catalog=vibrant;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n\n<p>I  am  using  class  Library,  So  this  is  my   App Config.</p>\n\n<pre><code>   &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n\n   &lt;add name=\"VibrantEntities\" connectionString=\"metadata=res://*/Vibrant.csdl|res://*/Vibrant.ssdl|res://*/Vibrant.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=KAPS-PC\\KAPSSERVER;initial catalog=vibrant;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc","design-patterns","architecture","orchardcms"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12926934,"title":"Modular enterprise architecture using MVC and Orchard CMS","body":"<p>I'm making a large scale MVC application using Orchard. And I'm going to be separating my logic into modules. I'm also trying to heavily decouple the application for maximum extensibility and testability.</p>\n\n<p>I have a rudimentary understanding of IoC, Repository Pattern, Unit of Work pattern and Service Layer pattern.</p>\n\n<p>I've made myself a diagram. I'm wondering if it is correct and if there is anything I have missed regarding an extensible application.</p>\n\n<p>Note that each module is a separate project.</p>\n\n<p><img src=\"http://i.stack.imgur.com/b8da2.png\" alt=\"Architecture diagram\"></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>So I have many UI modules that use the db module, that's why they've been split up. There are other services the UI modules will use. The UI modules have been split up because they will be made over time, independent of each other. </p>\n"},{"tags":["asp.net-mvc","vb.net-2010"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12946557,"title":"How to display foreign key value instead of id using MVC and LLBLGen","body":"<p>I am wondering whether anyone can help me on how can i display a foreign key value instead of a foreign key id using LLBLGen and MVC3?</p>\n"},{"tags":["javascript","asp.net-mvc","razor","model","typescript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":164,"score":0,"question_id":12805938,"title":"Passing MVC Model Data to Client-side TypeScript Code","body":"<p>When using MVC, I sometimes pass the server's model data to the client-side JavaScript by using Razor injected into the JavaScript, as follows:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var myClientGuid = '@Model.MyServerGuid';\n&lt;/script&gt;\n</code></pre>\n\n<p>This sets a JavaScript variable named <code>myClientGuid</code> to the value of the server-side model property <code>MyServerGuid</code>. When it reaches the client, the code looks something like this inside the browser:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var myClientGuid = 'EF0077AB-0482-4D91-90A7-75285F01CA6F';\n&lt;/script&gt;\n</code></pre>\n\n<p>This allows external JavaScript files to use this variable.</p>\n\n<p>My question is, in TypeScript, since  <em>all</em> code must be referenced via external files, what is the best way to pass server-side fields to TypeScript code? External code files cannot contain Razor code. Should I use the same technique as above, in the View, mixing JavaScript and Typescript within the project?</p>\n"},{"tags":["c#","asp.net-mvc","linq","sql-server-2008","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12929610,"title":"How to reset the identity column in C#?","body":"<p>I need to reset my identity field parametrically in MVC.net. I am using Linq and Entity Framework.</p>\n\n<p><strong>Reason:</strong> I am inserting thousands of records in my table by importing. I am importing records again after some period of time, so my id field value increasing so much </p>\n\n<p>For ex. In 100000000 so my field data type is Big int but it is not sufficient for my this value. So I need to reset my identity field. </p>\n"},{"tags":["jquery","asp.net-mvc","post","actionlink"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12934968,"title":"How to submit form by ActionLink","body":"<p>i need help with ASP MVC.\nI have: </p>\n\n<pre><code>&lt;% using (Html.BeginForm(null,null,FormMethod.Post)) {%&gt;\n    &lt;p&gt;\n         &lt;input type=\"submit\" value=\"Choose\" /&gt;\n          .\n          .\n          .\n          &lt;%=Html.ActionLink(\"Save\", \"Index\")%&gt;\n    &lt;/p&gt;\n&lt;% } %&gt;\n</code></pre>\n\n<p>And i need to submit the form by that ActionLink, because i need to get selectedValue from dropdownlist and i do not know any way how to do that else then from FormCollection or parameter in method with attribute POST.</p>\n\n<p>So i need to call this function after click on action link.</p>\n\n<pre><code>    [AcceptVerbs(HttpVerbs.Post)]\n    public ActionResult Index(FormCollection formValues)\n    {\n    }\n</code></pre>\n\n<p>I tried something with jquery and <code>Ajax.ActionLink</code> but everything called the GET method of Index. (<code>new { onclick = \"$(this).parents('form').first().submit();\"</code> - did not work for me -it also called the GET method)</p>\n"}]}
{"total":44785,"page":19,"pagesize":100,"questions":[{"tags":["jquery","html","asp.net-mvc","html5","slider"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":12945542,"title":"HTML based infinite horizontal slider control","body":"<p>I'm trying to create an infinite slider control. What I mean by infinite is, I want the user to be able to be able to slide on a bar/panel left to right and that will move a date into the past (if they slide left) and into the future (if the slide left). I know there is a few slider controls out there (like <a href=\"http://demos.kendoui.com/web/slider/index.html\" rel=\"nofollow\">http://demos.kendoui.com/web/slider/index.html</a>), but none that I can find that are infinite.</p>\n\n<p>I want a touch friendly graphical based way for the user to move through dates in the ui.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","radiobuttonlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12909595,"title":"MVC Razor RadioButtonList without any preselected values","body":"<p>Im using RadioButtonList to generate my radio buttons, in a MVC Razor project.\nHere's an example of my code:</p>\n\n<pre><code>@Html.RadioButtonList(n =&gt; n.HouseType)\n</code></pre>\n\n<p>For some reason my radio button lists gets a preselected value. The first checkbox is always checked, which makes my UI kinda confusing.</p>\n\n<p>How do I disable this in a good way?</p>\n\n<p>One way is to loop through the whole page with Jquery and unselect each box. But thats not a pretty work around imho.</p>\n\n<p><strong>EDIT:</strong>\nHere's more info about HouseType, which is a  custom enum.</p>\n\n<pre><code>    public enum HouseType\n{\n    House,\n    Apartment,\n    Garage\n};\n</code></pre>\n\n<p>and its called upon by using this line</p>\n\n<pre><code>public HouseType HouseType { get; set; }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-views"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":50,"score":1,"question_id":12925341,"title":"Must the first view must always be called index.aspx?","body":"<p>I have created a controller called loginController.cs and i have created a view called login.aspx</p>\n\n<p>How do I call that view from loginController.cs?</p>\n\n<p>The <code>ActionResult</code> is always set to index and for neatness, I want to specify what view the controller uses when called rather than it always calling its default index?</p>\n\n<p>Hope that makes sense.</p>\n"},{"tags":["asp.net-mvc","ravendb","action-filter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12945303,"title":"Does asp.net mvc support async action filters?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12482338/async-action-filter-in-mvc-4\">Async action filter in MVC 4</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to load the current user asynchronously and check that users roles (using RavenDB IAsyncDocumentSession) but I get the following exception</p>\n\n<pre><code>An asynchronous module or handler completed while an asynchronous operation was still pending.\n</code></pre>\n\n<p>This is my filter  </p>\n\n<pre><code>  public class AuthorizeAttribute : ActionFilterAttribute, IAuthorizationFilter\n  {\n    public async void OnAuthorization(AuthorizationContext filterContext)\n    {\n      var user = filterContext.HttpContext.User;\n      if (!user.Identity.IsAuthenticated)\n      {\n        HandleUnauthorizedRequest(filterContext);\n        return;\n      }\n\n      using (var session = MvcApplication.DocumentStore.OpenAsyncSession())\n      {\n        User currentUser = await session.LoadAsync&lt;User&gt;(user.Identity.Name);\n        if (currentUser == null)\n        {\n          HandleUnauthorizedRequest(filterContext);\n          return;\n        }\n\n        filterContext.HttpContext.Items[\"User\"] = currentUser;\n\n        if (rolesSplit.Length &gt; 0)\n        {\n          if (rolesSplit.Any(role =&gt; !currentUser.Roles.Contains(role)))\n          {\n            HandleUnauthorizedRequest(filterContext);\n            return;\n          }\n        }\n      }\n    }\n\n    public string Roles\n    {\n      get\n      {\n        return roles ?? string.Empty;\n      }\n      set\n      {\n        roles = value;\n        rolesSplit = SplitString(value);\n      }\n    }\n\n    protected virtual void HandleUnauthorizedRequest(AuthorizationContext filterContext)\n    {\n      filterContext.Result = new HttpUnauthorizedResult();\n    }\n\n    protected string[] SplitString(string original)\n    {\n      return original.Split(',').Select(s =&gt; s.Trim()).ToArray();\n    }\n\n    private string[] rolesSplit = new string[0];\n    private string roles;\n\n  }\n</code></pre>\n"},{"tags":["asp.net-mvc","routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12904852,"title":"mvc3 routing priorty/dot parameter issue","body":"<p>I have the following route defined:</p>\n\n<pre><code>context.MapRoute(\"routeCreate\", \"{aval}/anArea/aController/Create/{val.Id}\", new { action = \"Create\", controller = \"aController\" });\n</code></pre>\n\n<p>Which functions until the following catch-all route is defined:</p>\n\n<pre><code>context.MapRoute(\"catchallCreate\", \"{aval}/anArea/{controller}/Create/\", new { action = \"Create\"});\n</code></pre>\n\n<p>The route is invoked by: </p>\n\n<pre><code>RedirectToAction(\"Create\", new {val.Id});\n</code></pre>\n\n<p>The resultant URL goes to ?Id=1 instead of /1, it doesn't seem to be picking up the \"val.\" part any more.</p>\n\n<p>I am thinking there might be a problem with using {val.Id} as I cannot create a constraint with that parameter syntax.</p>\n\n<p>Update:</p>\n\n<p>Maybe I'm still missing something, with the following routes defined I am still seeing resolution to ?Id=1 instead of /1</p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.Routes.Add(\n            new Route(\n                \"{aval}/anArea/aController/Create/{val.Id}\",\n                new RouteValueDictionary()\n                    {\n                        { \"action\", \"Create\" },\n                        { \"controller\", \"aController\" },\n                        { \"val.Id\", UrlParameter.Optional }\n                    },\n                null,\n                new RouteValueDictionary() { { \"area\", \"anArea\" } },\n                new MvcRouteHandler()));\n// catchall\ncontext.MapRoute(\"Create\", \"{aVal}/anArea/{controller}/Create\", new { action = \"Create\" });\n</code></pre>\n\n<p>Even with Optional removed it doesn't work. The first route only works if the catchall is removed.</p>\n"},{"tags":["asp.net-mvc","routing"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":338,"score":3,"question_id":2832202,"title":"How to map Home/Action/id to just action/id?","body":"<p>At the moment I have just this route defined</p>\n\n<pre><code> routes.MapRoute(\n                \"Default\",                                                \n                \"{controller}/{action}/{id}\",                           \n                new { controller = \"Home\", action = \"Index\", id = \"\" } \n                );\n</code></pre>\n\n<p>I want to map the /Home/Action1/id to just /Action1/id\nanybody knows how ?</p>\n"},{"tags":["asp.net-mvc","mocking","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12944583,"title":"Mock MembershipProvider with custom methods","body":"<p>I have an ASP.NET MVC app that I'm working on.  I'm using a custom MembershipProvider (MyCustomMembershipProvider) to access membership information because we already have a database with our own schema that I need to use.</p>\n\n<p>I am using classes similar to the NerdDinner 2 example where I have an AccountMembershipService (implementing an IMembershipService) that contains a MembershipProvider so I can inject a different mock provider.  However, I have extended the MyCustomMembershipProvider with a few different methods for CreateUser and ChangePassword.  These methods are not available in the MembershipProvider unless you know it's a custom one.</p>\n\n<p>Am I going about this incorrectly? Do I need another layer that is an interface that includes my new provider methods? </p>\n"},{"tags":["asp.net-mvc","authorization","roles"],"answer_count":6,"favorite_count":12,"up_vote_count":15,"down_vote_count":0,"view_count":6997,"score":15,"question_id":1148312,"title":"asp.net mvc decorate [Authorize()] with multiple enums","body":"<p>I have a controller and I want two roles to be able to access it. 1-admin OR 2-moderator</p>\n\n<p>I know you can do [Authorize(Roles=\"admin, moderators\")] but I have my roles in an enum. With the enum I can only authorize ONE role. I can't figure out how to authorize two.</p>\n\n<p>I have tried something like [Authorize(Roles=MyEnum.Admin, MyEnum.Moderator)] but that wont compile.</p>\n\n<p>Someone once suggested this:</p>\n\n<pre><code> [Authorize(Roles=MyEnum.Admin)]\n [Authorize(MyEnum.Moderator)]\n public ActionResult myAction()\n {\n }\n</code></pre>\n\n<p>but it doesn't work as an OR. I think in this case the user has to be part of BOTH roles. Am I overlooking some syntax? Or is this a case where I have to roll my own custom authorization?</p>\n"},{"tags":["asp.net-mvc","html5","razor"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":985,"score":3,"question_id":9603241,"title":"HTML5 Element 'legend' occurs too few times","body":"<p>I have the following View in MVC and I get the warning message: <code>Validation (HTML5): Element 'legend' occurs too few times</code></p>\n\n<pre><code>@model Berwin.Models.ViewModels.UserViewModel\n\n@{\nViewBag.Title = \"Press\";\n}\n\n&lt;h2&gt;Press Area&lt;/h2&gt;\n\n@using (Html.BeginForm(\"Register\", \"PressController\", FormMethod.Post))\n{\n&lt;fieldset&gt;\n    @Html.TextBoxFor(model =&gt; model.FullName)\n&lt;/fieldset&gt;\n\n&lt;fieldset&gt;\n    @Html.TextBoxFor(model =&gt; model.Company)\n&lt;/fieldset&gt;\n\n&lt;fieldset&gt;\n    @Html.TextBoxFor(model =&gt; model.EmailAddress)\n&lt;/fieldset&gt;\n\n&lt;fieldset&gt;\n    @Html.CheckBoxFor(model =&gt; model.JoinMailingList)\n&lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>Would like to know why I am getting this warning and what I need to do to fix this.</p>\n"},{"tags":["c#",".net","asp.net-mvc","windows-services","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":111,"score":0,"question_id":12942644,"title":"How to call a WebAPI from Windows Service","body":"<p>I have an application written in Windows Service and this app need to make a call to a WebAPI written in Asp.Net MVC 4 WebAPi. this method in WebAPI return a DTO with primitive type, something like:</p>\n\n<pre><code>class ImportResultDTO {\n   public bool Success { get; set; }\n   public string[] Messages { get; set; }\n}\n</code></pre>\n\n<p>and in my webapi</p>\n\n<pre><code>public ImportResultDTO Get(int clientId) {\n   // process.. and create the dto result.\n   return dto;\n}\n</code></pre>\n\n<p>My question is, how can I call the webApi from the Windows Service? I have my URL and value of parameter, but I don't know how to call and how to deserialize the xml result to the DTO.</p>\n\n<p>Thank you</p>\n"},{"tags":["c#","asp.net-mvc","reflection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12936232,"title":"Generic Model Binder using reflection","body":"<p>I'm trying to build a generic model binder that uses reflection to assign properties to a specified type of object retrieved from the BindingContext.  So something like this:</p>\n\n<pre><code>public class ModelBinder : IModelBinder\n{\n    public object BindModel&lt;T, K&gt; (ControllerContext controllerContext, ModelBindingContext bindingContext)\n        where T : class, new()\n        where K : class\n    {\n        Type ObjectType = typeof(T);\n        Type InterfaceType = typeof(K);\n        T obj = new T();\n\n        foreach (var Property in ObjectType.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.Instance))\n        {\n            Type PropertyType = Property.PropertyType;\n\n            // checks if property is a custom data object\n            if (!(PropertyType.GetGenericArguments().Count() &gt; 0 &amp;&amp; PropertyType.GetGenericArguments()[0].GetInterfaces().Contains(InterfaceType)))\n            {\n                Property.SetValue(obj, bindingContext.ValueProvider.GetValue(Property.Name), null);   \n            }\n        }\n\n        return obj;\n    }\n</code></pre>\n\n<p>Obviously this doesn't work as it isn't correctly implementing the IModelBinder interface.  Is something like this possible?</p>\n\n<p>Edit:</p>\n\n<p>To expand on why I am doing this, our objects use a lot of different custom objects.  For instance, the Class object: </p>\n\n<pre><code>public class Class : ModelBase&lt;Class&gt;\n{\n    public Class () { }\n\n    public virtual string ClassDescription { get; set; }\n    public virtual string ClassName { get; set; }\n    public virtual LookUp ClassType { get; set; }\n    public virtual double Credits { get; set; }\n    public virtual bool Documents { get; set; }\n    public virtual LookUp PracticeArea { get; set; }\n}\n</code></pre>\n\n<p>uses the LookUp class:</p>\n\n<pre><code>public class LookUp : ModelBase&lt;LookUp&gt;\n{\n    public LookUp () { }\n\n    public virtual string DisplayName { get; set; }\n    public virtual LookUpType Type { get; set; }\n}\n</code></pre>\n\n<p> dropdowns are used for LookUps and other objects so my custom model binder for Class/Create would do something like: </p>\n\n<pre><code>LookUp ClassType = LookUp.Load(long.Parse(bindingContext.ValueProvider.GetValue(\"ClassType\").AttemptedValue))\n</code></pre>\n\n<p>I don't see how something like this can be dealt with using the DefaultModelBinder.</p>\n"},{"tags":["c#","asp.net-mvc","wcf","caching","static"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12943823,"title":"static variables in class library used by two applications","body":"<p>I have an issue which I came across today which I am hoping someone may be able to to answer. I may be missing something and I don't have the code in front of me right now so am remembering this from memory.</p>\n\n<p>I have a .NET MVC web application which has two layers, a UI layer and a service layer (WCF service). The UI layer has a service reference to the WCF service. </p>\n\n<p>The UI layer caches some data into static variables on Application_Start in the global.asax file. These static variables are within a class in a referenced shared class library.</p>\n\n<p>My WCF layer also references this class library and the static variables mentioned.</p>\n\n<p>Both these layers are installed on separate servers so under their own IIS instance.</p>\n\n<p>Is there any way that my WCF service could access the data in the static variables populated by the UI layer? I would have thought the service layer has its own instance of the referenced assembly and therefore the variables within it belong to itself only?</p>\n\n<p>The reason I ask is this. There used to be a global.asax file on the service layer also which I recently removed which also used to populate the static variables in the shared library.</p>\n\n<p>On removing this global.asax file completely from the service layer, it was still able to access the data populated by the UI layer (at least i think it was). The application would still function for a certain period of time, when left inactive (i think) these variables in the service layer became NULL and I was getting null reference exceptions.</p>\n\n<p>The only way to populate the variables again was to restart the UI layer application pool. The application then worked again for some time and the repeated.</p>\n\n<p>I am unsure if what I am explaining is possible in which case I am missing something or if anyone knows why this might be happening? </p>\n"},{"tags":["asp.net-mvc","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12943870,"title":"Database query using Linq to Sql in an Asp.Net MVC 4 project","body":"<p>I'd like some tips on executing some basic table queries into a Sql Server DB using Linq To Sql.</p>\n\n<p>My project is in ASP.NET MVC 4 with c# (using VS2012), but I don't want to write a lot of models and generate entity framework diagrams. I'd like to write manual queries in my controllers, execute them, then convert to a list and return back to my view (i.e. jQuery will parse results and display accordingly).</p>\n\n<h3>Background</h3>\n\n<p>XML Scenario:\nMy current website project is mostly centered around an XML Request/Response infrastructure. So I'm mostly JQuery calls in c#, and in turn making xml requests into another app server. I then received the xml response and return it to a View. I then parse the xml out and display the contents using jQuery, Datatables, etc.</p>\n\n<p>Database query scenario:\nOne of the QA tools I wrote is actually a Sql Server Procedure based project; however I'm now trying to write a front-end admin tool to execute those QA-based procedures.</p>\n\n<p>So...I'd like to write manual Linq queries directly to my DB and work on the response without generating models. i.e. more of an ad-hoc type query.</p>\n\n<p>In my web.config I have a <code>&lt;connectionStrings&gt;</code> section :</p>\n\n<pre><code>&lt;add name=\"RegrDBConnection\" connectionString=\"Server=MSSQLSERVER2008;Initial Catalog=RegressionResults;Integrated Security=true\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4",".net-4.5","async-await"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12943822,"title":"Async with an mvc4 controller to call 3rd party apis that could be other apis","body":"<p>I have an mvc4 application with .net 4.5 my controller action is used to call a 3rd party api.</p>\n\n<p>I have an action that is called via an ajax call using jquery. </p>\n\n<p>I am making 4 different api calls within my action so I want to know the best way for me to achieve this.</p>\n\n<p>When my action is called I let the user know that their action is under way. I want to build something robust as the 4 different api calls can be very time consuming and I dont want one of the api calls to fail due a previous call failing. Is the new async model good way for me to achieve this? </p>\n\n<p>I am really looks for some sound advise about the best method to do this.</p>\n\n<p>Thank you</p>\n"},{"tags":[".net","asp.net-mvc","iis","httpmodule"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12943343,"title":"httpModule does not fire when published to IIS","body":"<p>When I am debugging on my machine httpModule fires normally now after publishing it to IIS it does not run, what am I doing wrong? Am I missing something?</p>\n\n<p>here is what it looks like in web.config</p>\n\n<pre><code>&lt;httpModules&gt;\n     &lt;add type=\"MyApp.Web.Mvc.Modules.Scheduler\" name=\"Scheduler\" /&gt;\n&lt;/httpModules&gt;\n</code></pre>\n\n<p>then the Scheduler looks like this</p>\n\n<pre><code>public class Scheduler : IHttpModule\n{   \nprivate static readonly object Job;\nprivate static Timer timer;\n\nstatic Scheduler()\n{\n    Job = new object();\n}\n\nvoid IHttpModule.Init(HttpApplication application)\n{\n    try\n    {\n\n        if (timer == null)\n        {\n            var timerCallback = new TimerCallback(ProcessJobs);\n            const int startTime = 10 * 1000;\n            const int timerInterval = 60 * 1000; // 1 minute\n            timer = new Timer(timerCallback, null, startTime, timerInterval);\n        }\n    }\n    catch (Exception ex)\n    {\n        //exception code here\n    } \n}\n\npublic void Dispose()\n{\n}\n\nprotected void ProcessJobs(object state)\n{\n    try\n    {\n        // This protects everything inside from other threads that might be invoking this\n        // which is good for long running processes on the background\n        lock (Job)\n        {\n            //My Stuff\n        }\n    }\n    catch (Exception ex)\n    {\n        //exception code here\n    }\n}\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12938624,"title":"Ignoring requests with route constraints","body":"<p>I've couple of routes defined in <code>Global.asax.cs</code></p>\n\n<pre><code>routes.MapRoute(\n        \"Custom\",\n        \"party/get/{a}~{b}\",          \n        new { controller = \"party\", action = \"get\" },\n        new { a = @\"\\d+\", b = @\"\\d+\" }\n);\n\nroutes.MapRoute(\n        \"Default\",\n        \"{controller}/{action}/{id}\",\n        new { controller = \"Party\", action = \"Index\", id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>If the request is <code>http://localhost:58684/party/get/37~12</code> then it will be matched by the first route and the values of <code>a</code> and <code>b</code> are <code>37</code> and <code>12</code> respectively.</p>\n\n<p>If the request is <code>http://localhost:58684/party/get/37~-12</code> then the first route don't matches this request since <code>-12</code> not matches the constraint <code>@\"\\d+\"</code> and the default route matches the request (<strong>I don't want this behavior</strong>).</p>\n\n<p><strong>If a request is not matched by one route due to some constraint how can I avoid the other following routes matching the request? I'm not interested to set any constraint for the following routes.</strong></p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":161,"score":1,"question_id":12883869,"title":"Grouping radio buttons in c# mvc","body":"<p>I Have a form in which I display a menu. Each menu has a section and choices as below:</p>\n\n<pre><code>Starters\n\nPrawn Cocktail \nSoup\n\nMains\n\nBeef\nLamb\n</code></pre>\n\n<p>I am looping through the menu sections and menu choices for that section, for each menu option I want a radio button and to group them together per section so that only one menu option can be selected per section. By default the top selection will be selected. This is what I have so far</p>\n\n<p>In the model</p>\n\n<pre><code>public List&lt;MenuCourses&gt; courses {get; set;}\npublic List&lt;MenuOptions&gt; options {get;set;}\n</code></pre>\n\n<p>and in the view</p>\n\n<pre><code>@for ( int i = 0; i &lt; Model.MenuCourses.Count(); i++ ){\n\n      @Html.DisplayFor(m=&gt; m.MenuCourses[i].CourseTitle )\n\n      // loop options\n      for ( int k = 0; k &lt; Model.MenuOptions.Count(); k++ ){\n\n          if(Model.MenuOptions[k].MenuCoursesID == Model.MenuCourses[i].MenuCoursesID){\n\n             @Html.DisplayFor(m=&gt; m.MenuOptions[k].Title)\n             //NEED RADIO BUTTON HERE BUT HOW DO I BIND TO THE MODEL?\n\n           }\n       }\n</code></pre>\n\n<p>I need each menu option to have a radio button grouped to that section, and when the user hits save I need to pick up which menu options has been selected.</p>\n\n<p>Any help would be greatly appreciated</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12927991,"title":"ASP.NET MVC Model Mixins?","body":"<p>I have a set of fields that I intend to share between multiple models. I want all the fields to be included in each entity's table (not just one table for the fields). I'm more familiar with languages such as Python, where this type of pattern is called a \"mixin\", essentially a class that doesn't exist on its own (it doesn't get instantiated/doesn't have a table in the case of a model class). Instead, the derived class simply inherits the fields and its table looks as if the fields were simply included right on the model class.</p>\n\n<p>The concept of a \"Complex Type\" in Entity Framework seems like a close proxy to what I'm looking for, but the inability to include navigation properties is a bit of killer. Is there any other way to do this, or if Complex Types are the answer, then what should I do about the navigation properties?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12942726,"title":"Embedding forms with ASP MVC","body":"<p>I have one form that I need to use with one method and one controller. Then, inside of it, I need to add a form that pulls from a completely different method in a different controller.</p>\n\n<p>The first form starts with this:</p>\n\n<pre><code>using (Html.BeginForm(\"Create\", \"Post\", FormMethod.Post, new { id = \"post-box-form\",   enctype = \"multipart/form-data\" })) \n</code></pre>\n\n<p>The second form starts with this:</p>\n\n<pre><code>using (Html.BeginForm(\"AddGroupAttachment\", \"Group\", new { id = Model.ID }, FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n</code></pre>\n\n<p>I'm getting a runtime exception that says \"cannot perform runtime binding on a null reference\"</p>\n\n<p>I was wondering what I am doing wrong? </p>\n"},{"tags":["sql-server","asp.net-mvc","audit"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12941517,"title":"Multiple database users for ASP.Net MVC project SQL Server Auditing, or roll our own?","body":"<p>We currently have a SQL Server 2008 instance set up for our ASP.Net MVC application, and the SQL Server instance uses built-in auditing (I believe CDC?)</p>\n\n<p>We also have our ASP.Net application set up to use <strong>one</strong> connection string specified in web.config for the entire application, no matter who is logged in (of about ~50 users)</p>\n\n<p>The problem: <strong>We want to be able to include among the audit information the username of the user who made the particular change in question.</strong></p>\n\n<p>It looks like we can only do that in one of two ways:</p>\n\n<ol>\n<li><strong>Change our application setup so that every single user gets their own database login.</strong> This would require us to use dynamic connection strings (perhaps not too terrible), but moreover it would be a pain in the ass to add a new user to the system and the admins could no longer do it automagically via the application's interface (I think).</li>\n<li><strong>Use another solution from within the ASP.Net app itself</strong>. This would allow us to trivially add any bit of information in the application we wish, but would involve scrapping the entire builtin solution and essentially starting from scratch with a significant effort.</li>\n</ol>\n\n<p>Someone must have run into this problem before with auditing - is #1 feasible? Or is #2 the only way we can go here?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12942218,"title":"MVC4 controller/route not working","body":"<p>my VisitsController:</p>\n\n<pre><code>public ActionResult Index(Visits visits, int? id)\n{\n    ....\n    return View(v);\n}\n</code></pre>\n\n<p>Here is my route config</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapRoute(\n        name: \"Default\",\n        url: \"{controller}/{action}/{id}\",\n        defaults: new { controller = \"Home\", action = \"Index\", \n                        id = UrlParameter.Optional }\n    );\n}\n\n\nWorks: http://localhost:49225/Visits\nDoes not work: http://localhost:49225/Visits/123\n</code></pre>\n\n<p>What would the custom route be (and force it to be an integer)?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":122,"score":6,"question_id":12901253,"title":"Customers Truncating Querystring, causes FormatException","body":"<p>Every so often at Rentler we see the error </p>\n\n<blockquote>\n  <p><strong>System.FormatException</strong>, String was not recognized as a valid Boolean</p>\n</blockquote>\n\n<p>in our health monitoring. As it turns out, it looks like our customers are occasionally truncating the end of the url when copy/pasting it elsewhere. It just so happens that a boolean parameter tends to be on the end of the string, and when a customer shares it over some social network we get dumped with error reports. </p>\n\n<blockquote>\n  <p>https://{domain}/search?sid=17403777&amp;nid=651&amp;location=840065&amp;propertytypecode=1&amp;<strong>photosonly=fals</strong></p>\n</blockquote>\n\n<p>We use model binding for everything, so I'm not really sure how to deal with this. I could change the property to a string and attempt to parse it in the controller action, but that's sloppy. Is there any simple, fluent way to get the model binder to TryParse() it and just resolve to false if it can't?</p>\n"},{"tags":["c#","asp.net-mvc","sql-server-2008","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":12942101,"title":"What's a good way to convert my LINQ-to-SQL objects into my model objects?","body":"<p>I've been noticing when I pull things out of the my MSSQL db using LINQ-to-SQL using something simple like:</p>\n\n<pre><code>    public IEnumerable&lt;Contact&gt; GetAll()\n    {\n        var Contacts = from c in _context.Contacts\n                      select new Models.Contact\n                      {\n                          ContactID = c.ContactID,\n                          FirstName = c.FirstName,\n                          LastName = c.LastName,\n                          Email = c.Email,\n                          Phone = c.Phone,\n                          Address1 = c.Address1,\n                          Address2 = c.Address2,\n                          City = c.City,\n                          State = c.State,\n                          Zip = c.Zip,\n                          HighImportance = (bool)c.HighImportance,\n                          PrimaryContact = (bool)c.PrimaryContact,\n                          OfficeLocation = c.OfficeLocation\n                      };\n        return Contacts;\n    }\n</code></pre>\n\n<p>I have a complex object (foreign key reference) to an OfficeLocations table which I would like to populate.  If I do something like:</p>\n\n<pre><code>_context.OfficeLocations.SingleOrDefault(ol =&gt; ol.OfficeLocationID == c.OfficeLocationID);\n</code></pre>\n\n<p>Then this returns the type which is generated by my DBML.  Up to now I've been using something like:</p>\n\n<pre><code>OfficeLocation = new OfficeLocation\n            {\n                OfficeLocationID = c.OfficeLocationID,\n                Name = c.OfficeLocation.Name,\n                Phone = c.OfficeLocation.Phone\n            }\n</code></pre>\n\n<p>But I feel like there should be a much better way to do it, maybe by using extension methods on my DBML data objects or something?</p>\n\n<p>Any thoughts would be greatly appreciated.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","linq","entity"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12941901,"title":"Selecting several objects based on array of IDs","body":"<p>I have an array of ProgramIDs and would like to create a number of Select statements dynamically depending on how many ProgramIds there are.</p>\n\n<p>For example:</p>\n\n<pre><code>  var surveyProgramVar = surveyProgramRepository.Find().Where(x =&gt; x.ProgramId == resultsviewmodel.ProgramIds.FirstOrDefault());\n</code></pre>\n\n<p>This is an example of the select statement working with a single ProgramId.FirstOrDefault().  How do I create a list/array of SurveyProgramVars and select for each ProgramIds in the array?</p>\n"},{"tags":["asp.net-mvc","osx","flash","uploadify"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12941926,"title":"Flash stopped an unsafe operation but it's not a local flash object?","body":"<p>Our web app uses flash only for file uploads (Uploadify) and this error pops up only on a Mac computer.\nThe error is \"adobe flash player has stopped a potentially unsafe operation\" and it says \"the following local application [object] is trying to communicate with this internet-enabled location \".</p>\n\n<p>I'm assuming [object] is the embedded Uploadify flash object that's there for file uploads as there's no other flash running. Why is this considered a local application? In any case, is there a way to stop this security alert from appearing? It works fine after you allow it in Flash's settings but we can't expect our users to do that.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12845817,"title":"Asp.net MVC set validation date format fails on Chrome","body":"<p>I'm having problems with setting validations date format Chrome in asp.net mvc, for other browsers like IE,Firefox works correctly .</p>\n\n<p>I have defined dates in my model like next code:</p>\n\n<pre><code>[Required]\n[Display(Name = \"Data fi publicació\")]\n[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = \"{0:dd/MM/yyyy}\")]\npublic DateTime PublishingEndDate { get; set; }\n</code></pre>\n\n<p>And in my views :</p>\n\n<pre><code>@Html.TextBoxFor(model =&gt; model.PublishingEndDate)\n@Html.ValidationMessageFor(model =&gt; model.PublishingEndDate)\n</code></pre>\n\n<p>The problem It seems that <code>@Html.ValidationMessageFor</code>, validates the date with format <code>MM/dd/yyyy</code>, but what I want is to validate with european format <code>dd/MM/yyyy</code>. How can I change default culture validations format date to <code>dd/MM/yyyy</code> ?</p>\n\n<p>Thanks for your help</p>\n"},{"tags":["jquery","asp.net-mvc","telerik-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12940937,"title":"Access selected row element in telerik grid using jquery","body":"<p>How can I access selected members of a Telerik Grid using jquery? I have no idea about this, I tried the below method, but doesn't alert the innerText when select a row.</p>\n\n<p>Here is My Grid:</p>\n\n<pre><code>            &lt;td&gt;&lt;%= Html.MyCustomGridFor(\"gridName\", \"refreshAction\", \"refreshController\", GridOptions.EnableSelecting, Model).Columns(column =&gt;\n                    {\n                        column.Bound(o =&gt; o.Code).Title(\"Code\").Width(\"40px\");\n                        column.Bound(o =&gt; o.Description).Title(\"Description\");\n                    }).HtmlAttributes(new { @id = \"gridName\" , @style = \"width: 200px;\" })%&gt;\n            &lt;/td&gt;\n</code></pre>\n\n<p>jquery:</p>\n\n<pre><code>$(\"#gridName\").focusin(function(e){\n   alert(e.innerText);\n\n});\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2","jqgrid","mono","asp.net-authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12941486,"title":"How to return authorization error to jqgrid if Authorize and HandleJsonexception are used in DynamicGridData","body":"<p>[HandleJsonException] and code from Oleg answer in\n<a href=\"http://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid\">ASP.NET MVC 2.0 Implementation of searching in jqgrid</a></p>\n\n<p>are used to show error to users in ASP.NET MVC2 applicaton.</p>\n\n<p>DynamicGridData method is also decorated with [Authorize].\nPage contains \"log out\" button.</p>\n\n<p>If user logs off and presses back button in browser, [Authorize] causes ASP.NET returns logon page in html format as DynamicGridData  result.</p>\n\n<p>jqgrid shows strange error in this case. How to return error in proper json format like [HandleJsonException] returns for other errors ?</p>\n\n<p>unreadable aler box containing raw html appears.</p>\n\n<p>ASP.NET code in referenced an</p>\n"},{"tags":["asp.net-mvc","generics","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12941465,"title":"Calling IEnumerable overload of DisplayNameFor","body":"<p>This works for grabbing the headers(<strong>NOT VALUES</strong>):</p>\n\n<pre><code>@model IEnumerable&lt;SomeModel&gt;\n...\n&lt;th&gt;@Html.DisplayNameFor(m =&gt; m.SomeModelProperty)&lt;/th&gt;\n</code></pre>\n\n<p>Which if SomeModelProperty were:</p>\n\n<pre><code>[Display(Name = \"An Excellent Header\")]\nSomeModelProperty { get; set; }\n</code></pre>\n\n<p>Then it would display \"An Excellent Header\" in the header <code>th</code> element.</p>\n\n<p>You would think this wouldn't work because the model is IEnumerable, which wouldn't have a m.SomeModelProperty, but it works because HtmlHelper has a <code>HtmlHelper&lt;IEnumerable&lt;TModel&gt;&gt;</code> such that the parameter of the lambda is <code>TModel</code>, not <code>IEnumerable&lt;TModel&gt;</code>.  Since this just uses metadata, there is no need for an item from the collection.  (Although intellisense on <code>m.</code> will lie to you and make you think it's a collection).  I'm not sure when this cool overload was added, but is quite handy for Index.cshtml and does away with funky things like <code>@Html.DisplayNameFor(m =&gt; @Model.FirstOrDefault().SomeModelProperty)</code> which I want to avoid.</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/hh833697(v=vs.108).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/hh833697(v=vs.108).aspx</a></p>\n\n<p>However, I can't figure out how to get this to work when my model is not IEnumerable, but instead contains IEnumerable as a property, such as:</p>\n\n<pre><code>public class SomeList\n{\n   public List&lt;SomeModel&gt; SomeModels { get; set; }\n   public int Page { get; set; }\n   public DateTime CurrentAsOf { get; set; }\n}\n</code></pre>\n\n<p>I was hoping to be explicit with the generic type parameters, but I think the type parameters are specified by the engine that trickles down from the HtmlHelper created with the page.  Can I declare a new HtmlHelper in the page, or somehow specify the type parameters explicitly?</p>\n\n<p>Index.cshtml:</p>\n\n<pre><code>@model SomeList\n//No idea how to do this:\n@Html.DisplayNameFor&lt;IEnumerable&lt;SomeModel&gt;&gt;(m =&gt; m.SomeModelProperty)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12940535,"title":"How to Upload Files in MVC","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0\">File Upload ASP.NET MVC 3.0</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to just print out the name of the file in the debugger to make sure I am getting it this far:</p>\n\n<pre><code>&lt;EmployeeAuthorize()&gt;\n&lt;HttpPost()&gt;\nFunction SendNewMessage(ByVal file1 As HttpPostedFileBase) As JsonResult\n\n\n    Dim fileName = Path.GetFileName(file1.FileName)\n    Debug.Print(fileName)\n\n    Return Nothing\n\nEnd Function\n</code></pre>\n\n<p>I am sending the data with this:</p>\n\n<pre><code>var file1 = $('#file1').val();\n\n            $(this).parent('li').hide();\n            $('#pleaseWait').show();\n\n            $.ajax({\n                url: '/Message/SendNewMessage',\n                type: 'post',\n                data: { file1: file1 },\n                dataType: 'json',\n                success: function (result) {\n                    // update with results\n                    //alert(JSON.stringify(result));\n                    $.each(result, function (i, item) {\n                        // do nothing\n                    });\n                    $('#myDiv').html(JSON.stringify(result));\n\n                },\n                error: function (result) {\n                    alert('An error occurred when updating the database.  Please contact technical support.  ');\n\n                }\n            });\n</code></pre>\n\n<p>It doesn't print any data in my console.  It gives a <code>NullReferenceException</code> so I can assume it's not getting the filename at all.  What am I doing wrong?  Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":1872,"score":8,"question_id":4947854,"title":"How to get the column titles from the Display(Name=) DataAnnotation for a strongly typed list scaffold view at runtime?","body":"<p>how do i get the [Display(Name=\"Some Title\")] DataAnnotations \"Some Title\" rendered in the List scaffold view's output?</p>\n\n<p>I create a strongly typed list scaffold view for this class:</p>\n\n<pre><code>public class CompanyHoliday\n{\n    [Key]\n    public int Id { get; set; }\n\n    [Required]\n    [Display(Name = \"Datum\")]\n    [DataType(System.ComponentModel.DataAnnotations.DataType.Date)]\n    public DateTime Date { get; set; }\n\n    [Required]\n    [StringLength(50)]\n    [Display(Name = \"Feiertag Name\")]\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>The view looks like this:</p>\n\n<pre><code>@model IEnumerable&lt;Zeiterfassung.Domain.CompanyHoliday&gt;\n\n@{\n    ViewBag.Title = \"Year\";\n}\n\n&lt;h2&gt;Year&lt;/h2&gt;\n\n&lt;p&gt;\n    @Html.ActionLink(\"Create New\", \"Create\")\n&lt;/p&gt;\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;\n        Date\n    &lt;/th&gt;\n    &lt;th&gt;\n        Name\n    &lt;/th&gt;\n&lt;/tr&gt;\n\n@foreach (var item in Model) {\n&lt;tr&gt;\n    &lt;td&gt;\n        @Html.ActionLink(\"Edit\", \"Edit\", new { id=item.Id }) |\n        @Html.ActionLink(\"Details\", \"Details\", new { id=item.Id }) |\n        @Html.ActionLink(\"Delete\", \"Delete\", new { id=item.Id })\n    &lt;/td&gt;\n    &lt;td&gt;\n        @String.Format(\"{0:g}\", item.Date)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @item.Name\n    &lt;/td&gt;\n&lt;/tr&gt;\n}\n\n&lt;/table&gt;\n</code></pre>\n\n<p>However i don't want \"Date\" and \"Name\" in the table header - i want \"Datum\" and \"Feiertag Name\" rendered there dynamically. </p>\n\n<p>The actual column header titles should come from the Display Dataannotation.</p>\n\n<p>How to do this?</p>\n\n<p>Thanks, toebens</p>\n"},{"tags":["jquery","css","asp.net-mvc","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12926908,"title":"css won't load after jquery ajax call in partial view","body":"<p>I'm trying to change the content of the menu whenever the user clicks a button.  The CSS loads fine initially, but once i press the button to initiate the ajax call, the menu bar returns, but none of the CSS is applied. All of the code is in an MVC 4 partial view.</p>\n\n<p><img src=\"http://i.stack.imgur.com/OFwxr.jpg\" alt=\"Before I hit the button\"> </p>\n\n<p><img src=\"http://i.stack.imgur.com/9254t.jpg\" alt=\"After I hit the button\"></p>\n\n<p>Here's my JS</p>\n\n<pre><code>$(document).ready(function () {\n\n    $(\"#menu\").wijmenu({\n        orientation: 'vertical'\n    });\n\n    $(\"#TDButtons a\").click(function () {\n        var href = $(this).attr(\"href\");\n        $('#menuAjax').fadeOut('slow', LoadAjaxContent(href));\n        return false;\n    });\n\n    function LoadAjaxContent(href) {\n\n        $.ajax(\n            {\n                url: href,\n                success: function (data) {\n                    $(\"#menuAjax\").html(data).fadeIn('slow');\n                }\n            });\n\n    }\n});\n</code></pre>\n\n<p>Here's the nav tag </p>\n\n<pre><code>   &lt;nav id=\"menuAjax\"&gt;\n        &lt;ul id=\"menu\"&gt;\n            &lt;li&gt;&lt;a href=\"#\"&gt;Breaking News&lt;/a&gt;\n                &lt;ul&gt;\n                  ...\n</code></pre>\n\n<p>Here's the HTML for the buttons to initiate the AJAX</p>\n\n<pre><code>   &lt;div class=\"navDiv\"&gt;\n        &lt;div id=\"TDButtons\"&gt;\n            &lt;a href=\"@Url.Action(\"_menu\", \"Home\", new { TakeoutDelivery = \"TakeOut\" }, null)\"&gt;\n                &lt;img class=\"headerLogo\" src=\"../../Content/Images/TakeoutButton.jpg\" alt=\"Take Out\" /&gt;&lt;/a&gt;\n            &lt;a href=\"@Url.Action(\"_menu\", \"Home\", new { TakeoutDelivery = \"Delivery\" }, null)\"&gt;\n                &lt;img class=\"headerLogo\" src=\"../../Content/Images/DeliveryButton.jpg\" alt=\"Delivery\" /&gt;&lt;/a&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>Please let me know if you need anything else.</p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12940073,"title":"Export results from a grid mvc asp.net","body":"<p>I'm trying to export results from a grid.  So I thought to be generic, I would pass back the results from the grid to the controller and then my action result method would stream down the results as csv file. Then I realized my Ajax call to pass the data over to the controller would not work because an Ajax call does not allow you to stream down a file.  </p>\n\n<p>The main problem is that the grid data is dynamic meaning it does not bind to a model when it reaches the controller. So I got it working right now that I can read the grid data using dynamic object.  But since I can't use an Ajax call to stream the file down, how do I pass this data over to the controller?  Maybe in a hidden input box.  But then in the controller from the form collection how do I get the data back so I can loop through the grid data?</p>\n\n<p>Now I'm kind of lost on how about to do this. Any ideas?</p>\n\n<p>Thank you,</p>\n\n<p>-Tesh</p>\n\n<p>Action Result Method</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Load(String session_id, [DynamicJson(MatchName = true)] dynamic data, List&lt;Metadata&gt; metaData)\n    {\n\n        System.Text.StringBuilder sbResult = new System.Text.StringBuilder();\n        System.Text.StringBuilder sbHeader = new System.Text.StringBuilder();\n\n        //Build header for file\n        foreach (Metadata mtemp in metaData)\n        {\n            sbHeader.Append(Utility.EscapeCsvField(mtemp.label) + \",\");\n        }\n\n        sbHeader.Append(Utility.EscapeCsvField(\" \") + \",\");\n        sbResult.AppendLine(sbHeader.ToString());\n\n        foreach (System.Web.Helpers.DynamicJsonObject item in data)\n        {\n            //Convert row into dynamic object\n            dynamic objItem = ((dynamic)item);\n\n            System.Text.StringBuilder record = new System.Text.StringBuilder();\n\n            //Build string for a record\n            foreach (Metadata md in metaData)\n            {\n                record.Append(Utility.EscapeCsvField(objItem[md.name]) + \",\");\n            }\n\n            record.Append(Utility.EscapeCsvField(\" \") + \",\");\n            sbResult.AppendLine(record.ToString());\n\n        }\n\n        byte[] array = Encoding.ASCII.GetBytes(sbResult.ToString());\n\n        String fileName = String.Format(\"gridExport_{0}.csv\", Utility.FileDateTime());\n\n        return File(array, \"application/vnd.ms-excel\", fileName);\n\n    }\n</code></pre>\n\n<p>Ajax Call</p>\n\n<pre><code>var parm = JSON.stringify({ session_id: sessionId, data: data, metaData: metaData })\n\n    var ret = \"\";\n    $.ajax({\n        type: 'post',\n        cache: false,\n        url: path + \"/Common/Export/Load\",\n        data: parm,\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        async: false,\n        success: function (data) {\n            //ret = data.Table[0].Column1;\n        },\n        error: function (event, request, settings) {\n            //alert('save error: ' + JSON.stringify(request)) + ', ' + JSON.stringify(settings); \n        }\n    });\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","razor","document-ready"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12930151,"title":"MVC Razor HTML helpers not rendered when $(document).ready(","body":"<p>I just noticed that my MVC Razor HTML helpers arent rendered (in DOM) when my javascript is calling $(document).ready(function....\nSo when I put code that is dependent on DOM objects in the document ready, it doesnt find the DOM objects.</p>\n\n<p>Javascript</p>\n\n<pre><code>$(document).ready(function () {\n    $('input:radio,select').change(function () {\n        DO STUFF...\n</code></pre>\n\n<p>HTML helpers</p>\n\n<pre><code>@Html.RadioButtonList(m =&gt; m.ItemType, new SelectList(Model.ItemTypes, \"Name\", \"Name\")\n</code></pre>\n\n<p>another</p>\n\n<pre><code>@Html.DropDownListFor(n =&gt; n.ApartmentFloor, new SelectList(Model.ApartmentFloors, \"Id\", \"Floor\"), new { @id = \"floorsSelect\", @class = \"exists\" })\n</code></pre>\n\n<p>Normally, the radiobuttons and the dropdowns should get a .change function, but since they arent rendered yet when the .change is added, they dont get that function.</p>\n\n<p>Is there a way to get \"on html helpers ready\" instead of \"on document ready\"?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","architecture","service-layer"],"answer_count":4,"favorite_count":15,"up_vote_count":20,"down_vote_count":1,"view_count":3010,"score":19,"question_id":8735466,"title":"Fat model / thin controller vs. Service layer","body":"<p>I have been developing enterprise applications for many years using .Net \nMy apps usually have a domain model containing entities mapping to SQL DB tables.\nI use a Repository pattern, Dependency injection and a service layer.</p>\n\n<p>Recently we started working on MVC 3 projects and we had a debate where to put which logic.\nI came accross thin Controller / FAT Model architecture and was wondering how the service layer would fit in</p>\n\n<h2>Option 1 - Model talks to services</h2>\n\n<p>Controller is thin, calls methods on the models. The models \"know\" how to load themselfs from the DB and talk to repositories or services.\nE.g. customerModel has a Load(id) method and loads the customer and some child objects like GetContracts().</p>\n\n<h2>Option 2 - Controller talks to services</h2>\n\n<p>Controller asks Services to retrieve model objects. The logic of loading / storing etc. Is in the service layer. The model is a pure entity model with data only.</p>\n\n<p>Why would option 1 be a better choice especially when we talk about enterprise applictions my experience tells me to separate concerns, keep models AND Controllers as thin as possible and have specialized services doing the Business logic (imcl. The DB interaction)</p>\n\n<p>Thanks for all advices and references to good resources.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12939482,"title":"ASP.NET MVC 4 - Call Controller Action from another controller to delete relations","body":"<p>I have a complicated database with a lot of relations.\nI have an Entry with many other Entries with many other Entries which are managing files in the Harddisk (Images).</p>\n\n<p>Now if i want to delete the Head entry i want to call the Delete Action for every related Entry because they are handling the file erase.</p>\n\n<p>Is this a valid thing to do. Is it possible?</p>\n\n<p>For Example:\nI have a Database with many galleries with many Albums with many Images with a Local Files.\nIf i Delete a Image i want to delete the local File, if want to delete a Album, every Image should be deleted too and if i delete a Gallery every Album within the Gallery should be deleted which deletes all included Images.</p>\n"},{"tags":["asp.net-mvc","gdi+"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12934880,"title":"A generic error has occurred in GDI+","body":"<p>I know this has been asked a million times but I think I need to make it a million and one.</p>\n\n<p>I am getting <code>\"A generic error has occurred in GDI+\"</code> when trying to save a new <code>bitmap</code>.</p>\n\n<p>I have completely stripped down to the most basic lines of code and I still get the error with the following method:</p>\n\n<pre><code>public class HomeController : Controller\n{\n  public ActionResult Index()\n  {\n    return this.View();\n  }\n\n  public void CreatePicture()\n  {\n    try\n    {    \n      // THIS WORKS\n      System.IO.File.Copy(\"C:\\\\copyTest.bmp\", \"C:\\\\test folder\\\\copyTest2.bmp\");\n\n      // THIS WORKS\n      System.IO.File.Delete(\"C:\\\\test folder\\\\deleteTest.bmp\");\n\n      using (Bitmap newBitmap = new Bitmap(120, 120))\n      {\n        // THIS FAILS\n        newBitmap.Save(\"C:\\\\test folder\\\\test.bmp\", ImageFormat.Bmp);\n      }\n    }\n    catch (Exception ex) \n    {\n      throw ex;\n    }\n  }\n}\n</code></pre>\n\n<p>The code is called from an html link on a blank page within an <code>MVC 3.0</code> website using anonymous login.</p>\n\n<p>View:</p>\n\n<pre><code>@Html.ActionLink(\"Create Picture\", \"CreatePicture\", \"Home\", new { })\n</code></pre>\n\n<p>I have checked the folder permissions of \"test folder\" and have given full access to the following:</p>\n\n<ul>\n<li>ASPNET</li>\n<li>NETWORK SERVICE</li>\n<li>IUSR</li>\n</ul>\n\n<p>I still get the error...  what have I missed / done wrong ?</p>\n"},{"tags":["asp.net-mvc","razor","html-helper"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1482,"score":1,"question_id":9386987,"title":"@Html.DisplayNameFor for details model","body":"<p>In my model I have an Entity</p>\n\n<pre><code>public class Carrier\n{\npublic Guid CarrierId { get; set; }\npublic string Name { get; set; }\n}\n</code></pre>\n\n<p>I also have a ViewModel</p>\n\n<pre><code>public class CarrierIndexViewModel\n{\npublic IEnumerable&lt;Carrier&gt; Carriers { get; set; }\npublic PagingInfo PagingInfo { get; set; }\n}\n</code></pre>\n\n<p>I have a strongly-typed (CarrierIndexViewModel) Index View, which is suppose to display a table of Carrier using PagingInfo.</p>\n\n<p>I'm trying to use Html helper to display Carrier.Name in my table's header\nWhen I used IEnumerable as a model for this view I had\n<code>@Html.DisplayFor(model =&gt; model.Name)</code></p>\n\n<p>How can I get same result using my new CarrierIndexViewModel to display title for Carrier.Name?</p>\n"},{"tags":["c#","asp.net-mvc","active-directory","membership-provider","activedirectorymembership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":12924971,"title":"Getting MinRequiredPasswordLength from AD configuration C#","body":"<p>I want to know the MinRequiredPasswordLength that is configured in AD. Because when I debug:</p>\n\n<pre><code>Membership.MinRequiredPasswordLength\n</code></pre>\n\n<p>it always returns '7' and in AD it's configured to 8. I know that this property can be changed from web.config (I don't have it specified), but I want to recover it from AD.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12936751,"title":"Production Database Migrations ASP.NET MVC 4","body":"<p>I am working on my first ASP.NET MVC 4 app (using Entity Framework) and am a bit confused about the production database. Locally, the database seems to magically create itself (and the right tables) based on my models. Will this happen in production too with a non-express SQL Server... or do I manually need to import the schema?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12938182,"title":"When is it necessary to explicitly place attributes on controllers?","body":"<p>I created a new MVC 4 project. I created a custom action filter and inherited from ActionFilterAttribute. I created an override for OnActionExecuting(). At the moment, it doesn't do much; it just outputs a message to the output window. Last, I registered the action filter in RegisterGlobalFilters(), found in FilterConfig.cs.</p>\n\n<p>When I run the application the application, the breakpoint gets hit. This is good. However, I didn't add any attributes to any controllers. Is this behavior correct? When do I need to add attributes to my controllers? How does this work?</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12937816,"title":"Unable to initialize the dbcontext with initial data in code first entity model","body":"<p>I am working on asp.net mvc. I am trying to implement Code-First Entity Model. I have follwed the following steps,</p>\n\n<p>1, I have created a class student.cs</p>\n\n<pre><code>public class Student\n{\n    public int StudentID { get; set; }\n    public string StudentName { get; set; }\n    public string Branch { get; set; }\n    public decimal Marks { get; set; }\n    public string Address { get; set; }\n}\n</code></pre>\n\n<p>2, I have craeted context class like,</p>\n\n<pre><code> public class StudentContext:DbContext\n    {\n        public StudentContext()\n        {\n            Database.SetInitializer(new StudentContextInitializer());\n        }\n\n        public DbSet&lt;Student&gt; Student { get; set; }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;PluralizingTableNameConvention&gt;();\n        }\n    }\n</code></pre>\n\n<p>3, I have created studentcontextinitializer class like,</p>\n\n<pre><code>public class StudentContextInitializer : DropCreateDatabaseIfModelChanges&lt;StudentContext&gt;\n    {\n        protected override void Seed(StudentContext context)\n        {\n            context.Student.Add(new Student { StudentName=\"madhav\",Branch=\"CSE\",Marks=888,Address=\"AKP\" });\n            context.Student.Add(new Student { StudentName = \"Tirumalesh\", Branch = \"IT\", Marks = 988, Address = \"MDP\" });\n            context.Student.Add(new Student { StudentName = \"Venkat\", Branch = \"ECE\", Marks = 1000, Address = \"BZA\" });\n            context.SaveChanges();\n        }\n    }\n</code></pre>\n\n<p>I am successfully connected to database but i am unable to initialize the dbcontext with some data that means I have hard coded some records in studentcontextinitializer class but i am unable to bind that records into database table. so please guide me.</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":239,"score":8,"question_id":10026974,"title":"Can MVC Views access all projects even though they aren't referenced by the project where the views are?","body":"<p>Ok, so I'm a bit confused as to what is going on with the following data.</p>\n\n<p>We have the following Structure in our application:</p>\n\n<ul>\n<li><strong>Portal.Web</strong> - An MVC 3 Web App which basically contains all the\nviews, scripts, css and HTML helper extension methods</li>\n<li><strong>Portal.Core</strong> - A Class Library which is basically our Business Objects, we have all of our models contained within this project.</li>\n<li><strong>Portal.Data</strong> - Another Class Library which contains our NHibernate config and our DTO classes.</li>\n</ul>\n\n<p>Here's our usage: In the controller we call the model located in Portal.Core, which populates by calling Portal.Data, so basically Web can never see data.</p>\n\n<p>Here's the catch: In the controller, say for example I try and instantiate a new DTO object called Client like so:</p>\n\n<pre><code>var client = new Client();\n</code></pre>\n\n<p>It won't work, which is expected it has no idea what Client is and even specifying a using won't cut it. That's fine.</p>\n\n<p><strong>BUT</strong> if I try and do that exact same line in the View, Resharper adds the using to the view and then no complaints, the project runs and we can use DTO classes in our views.</p>\n\n<p>So the question is, why is this? I'm trying to stop our juniors from using DTO classes in Views, so I've purposely removed the reference to the Data project in Web, but they can still use the classes. Can someone shed some light?</p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12929048,"title":"Get random and specific items from database","body":"<p>This is how it should go. Table will show six values total, out of that three must be specific ones, and other three random ones, they can't match of course. Meaning that,\nif I create two separate instances of <code>Currencies</code> model (which is in question), and from one single out three specific ones I need, and use other instance for getting random three, I would have to exclude those 3 specifics from the second instance. Example.</p>\n\n<pre><code>//instance\nDateTime today = DateTime.Now.Date;\nvar currencies = db.Currencies.Where(c =&gt; c.DateCreated.Equals(today));\n\n//first get three separate\ncurrency1 = currencies.Where(c =&gt; c.Sign.Equals(\"EUR\"));\ncurrency2 = currencies.Where(c =&gt; c.Sign.Equals(\"USD\"));\ncurrency3 = currencies.Where(c =&gt; c.Sign.Equals(\"AUD\"));\n\n//second get three randoms\nvar currencies = db.Currencies.Where(c =&gt; c.DateCreated.Equals(today)).OrderBy(d =&gt; db.GetNewID()).Take(3);\n</code></pre>\n\n<p>Now, there should be a way (I think) to alter the currencies at 2nd get to use <code>.Except</code> but I'm not sure how to make an exception of three values. How to do this?</p>\n"},{"tags":["asp.net-mvc","linq","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12937302,"title":"Retrieving related data using linq","body":"<p>I have an MVC app using EF code first. I add a user to the system and enter pension details, part of this is a dropdown linked to a model called PensionBenefitLevel. This is the model - </p>\n\n<pre><code>[Key]\npublic int PensionBenefitLevelID { get; set; }\npublic string DisplayText { get; set; }\npublic int EmployeePercentage { get; set; }\npublic int EmployerPercentage { get; set; }\n\npublic virtual ICollection&lt;Pension&gt; Pension { get; set; }\n</code></pre>\n\n<p>When registered I have the PensionBenefitLevelID that came from the dropdown, but in my controller I was to peform a calculation using the EmployerPercentage value that is related to that ID. Can anyone point me in the correct direction?</p>\n\n<p>Do I need to create a variable in the controller and use a linq query to get that value back? I've not been able to find any examples of something similar so if you could point me to one that would be great too.</p>\n"},{"tags":["c#","jquery","html","asp.net-mvc","linq-to-sql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12925136,"title":"data insert failing when trying to insert data using LINQ to SQL","body":"<p>I am trying to insert data in a table using linq to SQL and jquery but its failing, cant find why. </p>\n\n<p>Here is how I am doing:</p>\n\n<p>Controller:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult SaveHours(string descType, string wrkType, decimal hours)\n    {\n        DataContext db = new DataContext();\n\n        Project hrs = new Project ();\n\n        {\n            hrs.descType = descType;\n            hrs.wrkType = wrkType;\n            hrs.hours= (decimal)hours;\n        }\n\n        db.Project.InsertOnSubmit(hrs);\n        db.SubmitChanges();\n\n        return Json(new { message = \"Hours Saved\" });\n    }\n</code></pre>\n\n<p>JQuery:</p>\n\n<pre><code>$(function(){\n\n$(\"#SaveHours\").click(function (e) {\n\n    e.preventDefault();\n    var link = '/Project/SaveHours';\n\n    $.ajax({\n        type: 'POST',\n        url: link,\n        data: { hours: $(\"#HoursWorked\").val(),\n            descType: $(\"#Description\").val(),\n            wrkType: $(\"#WorkType\").val()\n        },\n        dataType: 'json',\n        success: function (result) {\n            alert(result.message);\n        },\n        error: function (result) {\n            alert(\"Failed\");\n        }\n    });\n\n    });\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;IEnumerable&lt;UI.Models.vwProject&gt;&gt;\" %&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n\n    &lt;div&gt;\n    &lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Description\n        &lt;/th&gt;\n        &lt;td&gt;\n            &lt;input id=\"Description\" type=\"text\"/&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Work Type\n        &lt;/th&gt;\n        &lt;td&gt;\n            &lt;input id=\"WorkType\" type=\"text\"/&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Hours Worked\n        &lt;/th&gt;\n        &lt;td&gt;\n            &lt;input id=\"HoursWorked\" type=\"text\"/&gt;            \n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;button id=\"SaveHours\" type=\"button\" &gt;Save&lt;/button&gt;\n        &lt;/td&gt;        \n    &lt;/tr&gt;\n  &lt;/table&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>Am I missing something here?\nAny help is much appreciated.</p>\n\n<p>EDIT:\nTable Script:</p>\n\n<pre><code>CREATE TABLE [Project]\n(\n    ProjectKey      INT IDENTITY(1,1)   NOT NULL,\n    descType        VARCHAR(100)        NULL,\n    wrkType         VARCHAR(10)         NULL,\n    hours           NUMERIC(5,2)        NULL\n)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","html.dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12936748,"title":"Jquery populate dropdownbox","body":"<p>Im trying to populate a dropdown list using jquery. The population has but the default text \"Select Model\" is replaced by the new data..</p>\n\n<p>Javascript:</p>\n\n<pre><code> data = $.map(data, function (item, a) {\n    return\"&lt;option value=\" + item.Value + \"&gt;\" + item.Text    + \"&lt;/option&gt;\";\n    $(\"#SelectedModel\").html(data.join(\"\"));\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>@Html.DropDownListFor(m=&gt;m.SelectedModel,Model.models,\"Select Model\")\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12936811,"title":"Deploying ASP.NET MVC 4 from SVN and building","body":"<p>I am working on my first ASP.NET MVC 4 app. The client is deploying directly from the SVN repo, which I am pushing from. Can/should I be checking in release builds, or should they be running builds on their end as part of the deploy process. I am wanting to make it as simple for them as possible. Thanks for any advice!</p>\n"},{"tags":["asp.net-mvc","jquery-ui-datepicker"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":145,"score":0,"question_id":12936057,"title":"Jquery Datepicker with MVC - Get date picked","body":"<p>I have the following in my MVC View:</p>\n\n<pre><code>    @Html.TextBoxFor(model =&gt; model.FromDateCollected, new { style = \"width:90px;\" }) \n</code></pre>\n\n<p>In query I have the following:</p>\n\n<pre><code>    $(\"#FromDateCollected\").datepicker();\n</code></pre>\n\n<p>To get the selected date, I tried the following:</p>\n\n<pre><code>     var dt = $(\"#FromDateCollected\").datepicker(\"getDate\")\n\n     alert(dt);\n</code></pre>\n\n<p>but getting:</p>\n\n<pre><code>    [object Object]  \n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":12934932,"title":"\"This type of page is not served.\" error when trying to browse on *.cshtml files","body":"<p>I just create a new MVC 4 Web API project, and create a new .cshtml file, containing very simple HTML:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n    &lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div&gt;\n\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When opening the URL the following error displays:</p>\n\n<blockquote>\n  <p>Server Error in '/' Application.</p>\n  \n  <p>This type of page is not served.</p>\n  \n  <p>Description: The type of page you have requested is not served because\n  it has been explicitly forbidden.  The extension '.cshtml' may be\n  incorrect.   Please review the URL below and make sure that it is\n  spelled correctly. </p>\n  \n  <p>Requested URL: /index.cshtml</p>\n</blockquote>\n\n<p>I tested this scenario (exactly the same project) on a developing machine of one of my colleagues. It worked as expected. So I guess there must be something wrong with the configuration or some installation. But <strong>where</strong> to search? Neither local IIS nor Visual Studio Development Server works.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Accesing a .cshtml file directly isn't for production code - it's for training purposes, <strong>only</strong>!\nNavigating to <code>/Home/Index</code> works perfectly fine. So there is nothing else, which is obviously wrong. Just accessing .cshtml files directly.</p>\n"},{"tags":["asp.net-mvc","localization"],"answer_count":5,"favorite_count":10,"up_vote_count":15,"down_vote_count":0,"view_count":10617,"score":15,"question_id":381070,"title":"ASP.NET MVC localization best practice?","body":"<p>I need help with the best practice to localize asp mvc apps,\nI saw Oxite having a base method named Localize in the BaseController, but is the Localization a task for the view or the Controller?\nOr should I use resx files / or use db tables?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12936099,"title":"How can I bind data to dropdown on every postback?","body":"<p>In Asp.Net MVC, getting data from db and binding into the dropdown. On postback of the page, dropdown items becomes empty. Every postback need to hit the db and bind the dropdown ?\nPlease suggest.</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-3","code-first","ef-code-first"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5414,"score":1,"question_id":5465686,"title":"EF 4.1 Code First: \"non-null value of type 'DateTime'\" Issue","body":"<p>After initial dev and testing I have now pointed my MVC3 application at an existing database which contains live data.</p>\n\n<p>However I am getting this error related to the field called Date1 of type \"datetime\".</p>\n\n<pre><code>The 'Date1' property on 'StaffAttachment' could not be set to a 'null' value. You must set this property to a non-null value of type 'DateTime'. \n</code></pre>\n\n<p>Is this telling me that all rows in the date must have a date and not be null? What do I do if I dont want to set a date on specific row?</p>\n\n<p>Can anyone offer advice on resolving this issue?</p>\n\n<p>Thanks Paul</p>\n\n<p>EDIT 1 (Posting Model)</p>\n\n<pre><code>public class StaffAttachment\n{\n    [Key]\n    public int AttachmentID { get; set; }\n\n    public int? StaffID { get; set; }\n\n    public int? TypeID { get; set; }\n\n    [Required]\n    [DisplayName(\"Proof of ID\")]\n    public int? AttachmentTypeID { get; set; }\n\n    [Required]\n    [DisplayName(\"ID Reference\")]\n    public string Reference1 { get; set; }\n\n    public string Reference2 { get; set; }\n\n    public string DateType { get; set; }\n\n    [DisplayName(\"Expiry Date\")]\n    public DateTime Date1 { get; set; }\n\n    [Required]\n    public DateTime Date2 { get; set; }\n\n    public DateTime Date3 { get; set; }\n\n    public DateTime Date4 { get; set; }\n\n    public string AttachmentPath { get; set; }\n\n    public int? ValidatedUserID { get; set; }\n\n    public DateTime ValidatedDate { get; set; }\n\n    public int? CreatedUserID { get; set; }\n\n    public DateTime CreatedDate { get; set; }\n\n    public int? EditedUserID { get; set; }\n\n    public DateTime EditedDate { get; set; }\n\n    public TimeSpan TimeStamp { get; set; }\n\n    public string FileName { get; set; }\n\n    public byte[] FileImage { get; set; }\n\n    public int AttachmentSection { get; set; }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-mobile"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12922231,"title":"JQuery Mobile and ASP.NET MVC navbar button active state not working","body":"<pre><code> &lt;div data-role=\"navbar\"&gt;\n        &lt;ul&gt;\n            &lt;li&gt;&lt;a id=\"navBtnThirty\" href=\"@Url.Action(\"View\", \"VesselLogs\", new { id = @ViewContext.ViewData[\"VesselGID\"], ShowDays = 30})\" class=\"navbarbtn ui-btn-active ui-state-persist\"&gt;30 Days&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a id=\"navBtnSixty\"  href=\"@Url.Action(\"View\", \"VesselLogs\", new { id = @ViewContext.ViewData[\"VesselGID\"], ShowDays = 60 })\" class=\"navbarbtn\" &gt;60 Days&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a id=\"navBtnNinty\" href=\"@Url.Action(\"View\", \"VesselLogs\", new { id = @ViewContext.ViewData[\"VesselGID\"], ShowDays = 90 })\" class=\"navbarbtn\" &gt;90 Days&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a id=\"navBtnAll\" href=\"@Url.Action(\"View\", \"VesselLogs\", new { id = @ViewContext.ViewData[\"VesselGID\"], ShowDays = -1 })\" class=\"navbarbtn\"  &gt;All Days&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>The active button is correctly showing when the page first gets loaded. after clicking one of these links the active button isn't set until the action is completed and I click the button a second time.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","session-state"],"answer_count":2,"favorite_count":6,"up_vote_count":12,"down_vote_count":0,"view_count":8073,"score":12,"question_id":2868316,"title":"Sharing sessions across applications using the ASP.NET Session State Service","body":"<p>I am trying to share sessions between two web applications, both hosted on the same server. One is a .net 2.0 web forms application the other is as .net 3.5 MVC2 application.</p>\n\n<p>Both apps have their session set up like this: </p>\n\n<pre><code>&lt;sessionState\n      mode=\"StateServer\"\n      stateConnectionString=\"tcpip=127.0.0.1:42424\"\n      /&gt;\n</code></pre>\n\n<p>In the webform application I am posting the the session key to the MVC app:</p>\n\n<pre><code>protected void LinkButton1_Click(object sender, EventArgs e)\n{\n    Session[\"myvariable\"] = \"dan\"; \n    string sessionKey = HttpContext.Current.Session.SessionID;\n\n    //Followed by some code that posts sessionKey to the other application    \n}\n</code></pre>\n\n<p>I then recieve it in the MVC application and try use the same session like this:</p>\n\n<pre><code>[HttpPost]\npublic  void Recieve(string sessionKey )\n{\n    var manager = new SessionIDManager();\n\n    bool redirected;\n    bool IsAdded;\n\n     manager.SaveSessionID(HttpContext.ApplicationInstance.Context, Id, out redirected, out IsAdded);\n     var myVar = Session[\"myvariable\"];\n\n}\n</code></pre>\n\n<p>The key is being posted but the session does not seem to get loaded in the MVC app, i.e. sessionKey is null. Can what I am trying to do be done?</p>\n"},{"tags":["sql-server","asp.net-mvc","calendar","outlook","ical"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12933644,"title":"Reading calendar info from my asp.net-nvc web site back end?","body":"<p>I have a website that is a calendar (asp.net-mvc and sql server) with all the basic features.  People can enter in events, view others events, etc.</p>\n\n<p>One person asked me if there was a way they can just see these events in their outlook calendar - as a second calendar (versus having to go over to the web site always).  Since i have all of the data on the server is there any recommended way to have outloo point to my web server or DB for a calendar?  I see <a href=\"http://sourceforge.net/projects/dday-ical/\" rel=\"nofollow\">there are ways to generate iCal files from</a> C#</p>\n\n<p>If so, how would this data stay in sync as new events are created, deleted, etc?  A one time dump would be ok but the concern would be that the data would get stale.  Is there a solution that would keep the reference dynamic to keep them in sync.  (it would only need to be a one way transfer, i don't expect the need to create or delete from Outlook, so outlook is just read only) </p>\n"},{"tags":["c#","jquery","asp.net-mvc","json","razor"],"answer_count":7,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12929220,"title":".click(function) not working for $.getJSON","body":"<p>I want to trigger the Controller Action when I click on a button, and I tried to implement some JQuery code to do that, however the click is not triggering properly.</p>\n\n<p>I have the following code :-</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n$(document).ready(function () {\n\n    $(\"#btnLoadData\").click(function() {\n        var ResXName = $('#ResXName').val();\n        var LangID = $('#LangID').val();\n        var url = \"../Home/LoadResXFile\";\n        e.preventDefault();  \n        $.getJSON(url, { value: ResXName, langID: LangID }, function (data) {\n            alert('clicked!');\n        });\n    });\n\n});\n\n&lt;/script&gt;\n\n&lt;div class=\"main-content\"&gt;\n&lt;input type=\"button\" id=\"btnLoadData\" value=\"Load Data\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When I move the alert above the $getJSON, it works, so the button is being clicked correctly, however when I move the alert inside the $getJSON, I am not getting any alerts, and also the controller action is not being triggered. </p>\n\n<p>Am I missing something?</p>\n\n<p>Thanks for your help and time</p>\n"},{"tags":["c#","asp.net-mvc","enums"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12930563,"title":"Enum conversion to other Enum","body":"<p>I have <strong>many</strong> Enum types which return from a service and which I want to map to my Enum types.\nWhat I want is to create a mapper class which has all the conversion logic.\nI did something like this:</p>\n\n<pre><code>public static class ErrEnumMapper\n{\n    private static Dictionary&lt;FullErrorTypeError, eError&gt; dictionary;\n\n    static ErrEnumMapper()\n    {\n        var dictionary = new Dictionary&lt;FullErrorTypeError, eError&gt;()\n        {\n            {FullErrorTypeError.APP, eError.APPLICATION},\n            {FullErrorTypeError.INF, eError.INF},\n            {FullErrorTypeError.NO, eError.NONE},\n            {FullErrorTypeError.PAX, eError.PASSENGER},\n            {FullErrorTypeError.SYS, eError.SYSTEM}\n        };\n    }\n\n    public static eError GetEnum(FullErrorTypeError key)\n    {\n        var val = dictionary[key];\n        if (val != null)\n            return val;\n\n        throw new InvalidOperationException();\n    }\n}\n</code></pre>\n\n<p>But since I have many other Enums, in this way, I will have to create many static fields (like the \"dictionary\" fields) and their equivalent method (Like \"GetEnum\")...is there a better way to do this?\nGeneric maybe?</p>\n"},{"tags":["asp.net-mvc","razor","html.dropdownlist"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":12932178,"title":"MVC Html.DropDownList display &amp; after selection change","body":"<p>As normal we create the drop down list by using Html.DropDownList\nthe list content of value\n1, A&amp;B\n2, B&amp;C\n3, C&amp;D</p>\n\n<p>everything work fine, but when we make the selection change on the drop down list, it display my selected item was A&amp;amp ;B(without the space)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12932966,"title":"MVC 4 Bundling File Changes - Does it Recompile? Does it lose session?","body":"<p>MVC 4 preaches the usefulness of minifying and bundling your javascript and css resources.</p>\n\n<p>Does anybody know if changing a bundled file will either cause a recompile or drop currently active sessions the same way as changing localized resource would?</p>\n"},{"tags":["javascript","asp.net","asp.net-mvc","callback","html-helper"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12933575,"title":"How to create custom html helper with callback javascript function?","body":"<p>I know that exists <strong>Ajax.ActionLink</strong> function, which signature like this:</p>\n\n<pre><code>@Ajax.ActionLink(\n    \"click me\", \n    \"SomeAction\",\n    \"SomeController\",\n    new AjaxOptions { \n        HttpMethod = \"POST\", \n        OnSuccess = \"success\" \n    }\n)\n</code></pre>\n\n<p>And i can to attach my callback for example:</p>\n\n<pre><code>function success(data) {\n    var json = $.parseJSON(data.responseText);\n    alert(json.someProperty);\n}\n</code></pre>\n\n<p>I know that html helpers is extension methods. Question: How to create custom html helper like Ajax.ActionLink in which i can specify callback function. Who can give me example how to make that extension method with ability to take callback function as parameter and execute it.</p>\n"},{"tags":["c#","asp.net-mvc","orm","audit-trail"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":115,"score":1,"question_id":11692917,"title":"ORM with built-in audit trail","body":"<p>I am designing an ASP.NET MVC web app with a database backend that requires a full audit trail for regulatory purposes.</p>\n\n<p>I've implemented audit trails in the past but it feels like I would be safer using an ORM tool with built-in features for this. It looks like NHibernate would be one way to go - could you recommend other options?</p>\n\n<p>To clarify - I am not interested in a debate or ORM comparisons. I am effectively asking what ORM tools have built-in support for audit trails.</p>\n"},{"tags":["c#","html","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12853854,"title":"Why doesn't my submit button submit the form?","body":"<p>My form isn't always submitted when I hit the submit button.</p>\n\n<p>On my form I have one submit button. When I first hit the button, the form will submit. But when there's a validation error, the error is shown. But when I fix that error and press the submit button again, the form is not submitted. This will happen if you work with 'normal' speed; if you do everything very slow, then the form will submit.</p>\n\n<p>In the 'normal speed' mode I see in FireBug that there's a request to the server, but my breakpoint in the code is never hit! So I keep on the same page and nothing happens. When I click multiple times (5-10) or I wait a few seconds and then click the submit button, the submit will reach my code.</p>\n\n<p>I am using MVC4 with the .NET 4.5 framework.</p>\n\n<p>I hope someone can help me with this..</p>\n\n<p>EDIT:</p>\n\n<p>This is the code I am talking about.</p>\n\n<p>My html (with razor) code:</p>\n\n<pre><code>&lt;div id=\"content\" class=\"boxBorder\"&gt;\n    &lt;form method=\"post\" action=\"/Import/ProcessStep\" @(Model.UploadFiles ? \"enctype=multipart/form-data\" : \"\") id=\"wizardForm\"&gt;\n        &lt;table id=\"detailsTable\" width=\"550\" cellspacing=\"0\" border=\"0\"&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th class=\"first\"&gt;Importwizard\n                    &lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tfoot&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/tfoot&gt;\n            &lt;tbody&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        &lt;div id=\"ImportProgressBar\"&gt;\n                            &lt;ul&gt;\n                                @foreach (var step in Model.StepNames)\n                                { \n                                    &lt;li&gt;\n                                        &lt;div class=\"WizardProgressStep\"&gt;\n                                            &lt;img src=\"@step.Value\" class=\"ProgressStepImage\" /&gt;\n                                            &lt;br /&gt;\n                                            &lt;span&gt;@step.Key&lt;/span&gt;\n                                        &lt;/div&gt;\n                                    &lt;/li&gt;\n                                }\n                            &lt;/ul&gt;\n                        &lt;/div&gt;\n                        &lt;div id=\"StepTitle\"&gt;\n                            @Model.StepTitle\n                            &lt;hr /&gt;\n                        &lt;/div&gt;\n                        &lt;div id=\"StepContent\"&gt;\n                            @RenderBody()\n                        &lt;/div&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;&amp;nbsp;&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        &lt;div id=\"WizardNavigationBox\"&gt;\n                            @if (Model.HasPreviousButton)\n                            {\n                                &lt;input type=\"submit\" name=\"PreviousStep\" id=\"PreviousStep\" value=\"Vorige\" class=\"button icon add\" /&gt;\n                            }\n\n                            @if (Model.HasNextButton)\n                            {\n                                &lt;input type=\"submit\" name=\"NextStep\" id=\"NextStep\" value=\"Volgende\" class=\"button icon add saveButton\" /&gt;\n                            }\n                        &lt;/div&gt;\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult ProcessStep(FormCollection formCollection)\n    {\n        WebMediator mediator = new WebMediator();\n\n        ViewResult newStep;\n        GenericWizardViewModel viewModel;\n\n        if (formCollection[\"NextStep\"] != null)\n        {\n            ValidateStep(formCollection);\n            if (ModelState.IsValid)\n            {\n                mediator.ProcessStep(formCollection);\n\n                newStep = mediator.GetNextStep();\n            }\n            else\n            {\n                IWizardStep currentStep = mediator.GetCurrentStep();\n                viewModel = mediator.CreateViewModel(currentStep);\n\n                return this.RazorView(currentStep.StepName, viewModel);\n            }\n        }\n        else\n        {\n            newStep = mediator.GetPreviousStep();\n        }\n\n        viewModel = newStep.Model as GenericWizardViewModel;\n\n        return this.RazorView(newStep.ViewName, viewModel);\n    }\n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc","mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":11632732,"title":"ASP.NET MVC - Automatic notifications when a record is modified?","body":"<p>I have just used the NotifyIcon class in a windows application and I think it is really handy. I'm predominantly a web developer so I just wanted to find out if there is anything similar to this for a website.</p>\n\n<p>The website I want to incorporate this into has a Ticket Management module where users can capture tickets/problems and then get responses to these tickets from my client's employees who handle the ticket.</p>\n\n<p>Obviously I realize that the notification or pop up will need to be shown in the page, but is there a way to put a timer on the specific page, or even the Master page (maybe javascript or JQuery), to poll the database every few minutes and check for recently modified tickets and let the logged in user know that a ticket has been updated?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-2010","iis","razor"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":578,"score":1,"question_id":11211765,"title":"ASP.NET MVC3 not working in Windows 8","body":"<p>is there anything special I need to do to get ASP.NET MVC3 enabled on my Windows 8 Release Preview install? Creating even a blank ASP.Net MVC3 Razor application in VS2010, deploying to the local IIS instance as a new application, and loading the page in the browser doesn't work. I'm met with the following error:</p>\n\n<p>HTTP Error 403.14 - Forbidden</p>\n\n<p>The Web server is configured to not list the contents of this directory.</p>\n\n<p>So I've then gone in to the new VS2010 project, right click, select \"Add Deployable Dependencies\" and selected \"ASP.NET MVC\" along with \"ASP.NET Web Page with Razor syntax\"\n Then I re-deploy the project to local IIS application. No change. Still \"web server not configured to list contents of the directory\".</p>\n\n<p>It's worth noting the VS 2010 Development Web Server works fine.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["html","ajax","asp.net-mvc","json","asp.net-mvc-partialview"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12648654,"title":"In asp.net-mvc, what is the best way to return a partial view as well as other data from an ajax call?","body":"<p>I have a regular ajax call where the server side returns a partial view (html).  I now have a situation where i need the server to passback some additional data besides the partial view.  The only thought i had was to change the return to json and shove the partial view HTML into a json field but that seemed hacky.</p>\n\n<p>Is there anyway to return a partial view from the server as well as other some other info?</p>\n"},{"tags":["asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":12664981,"title":"rename mvc model object in Razor View","body":"<p>I'm using MVC 4 and usually Visual Studio will create all the views for you. I have one form that just has one field and I want to just embed the create form into the Index View.</p>\n\n<p>So the Index View has something like <code>@model IEnumerable&lt;Models.LinkModel&gt;</code></p>\n\n<p>So I access it by iterating through the Model collection.</p>\n\n<p>But if I try to embed the form for the create action I need <code>@model Models.LinkModel</code> \nand it is accessed by Model.Name as well. Is there a way to do this or use a different variable name?</p>\n\n<p><strong>Ok here is some extra info.</strong></p>\n\n<p>SO I have a model.</p>\n\n<pre><code>public class LinkModel\n{\n   public string LinkUrl {get;set;}\n}\n</code></pre>\n\n<p>I have a controller that has the Create and Index ActionResults.</p>\n\n<p>Now in the Index view I have </p>\n\n<pre><code>@model IEnumerable&lt;Models.LinkModel&gt;\n\n@{\n    ViewBag.Title = \"Links\";\n}\n</code></pre>\n\n<p>I can do all my fancy logic to list all the links. </p>\n\n<pre><code>@foreach(link in Model)\n{\n    &lt;p&gt;link.LinkUrl&lt;p&gt;\n}\n</code></pre>\n\n<p>The Create View has this </p>\n\n<pre><code>@model Models.LinkModel // Note that it is just one item not IEnumerable\n\n@{\n    ViewBag.Title = \"Add Link\";\n}\n\n@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n\n    &lt;fieldset class=\"editor-fieldset\"&gt;\n        &lt;legend&gt;LinkModel&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.LinkUrl)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.LinkUrl)\n        &lt;/div&gt;\n       &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Add Link\" /&gt;\n       &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>Now it seems pretty stupid to have a create form for just one field. I want to put this form on the Index page. Problem is that I access the object using the variable Model. I wanted to know if there is a way to have two seperate instances or be able to access the Model objects with different names.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1812,"score":0,"question_id":7275317,"title":"Adding new pages to MVC 3 project results in \"Resource not found\" error","body":"<p>I have an existing MVC 3 project I've been working on for a while. Today I decided to add a new page. I added a new view, hooked it up with an actionresult on an existing controller but no dice. I get a 404. I thought maybe something was wonky with the view so I did a response.write in the controller (to take the view out of the equation). No dice. I tried creating a new controller. Same thing. I tried moving an existing page. Same thing. All existing pages work, but I can't add new ones or move existing ones. My keyboard is covered in hair. Please help.</p>\n\n<p>My global.asax:</p>\n\n<pre><code>public static void RegisterGlobalFilters(GlobalFilterCollection filters)\n    {\n        filters.Add(new HandleErrorAttribute());\n    }\n\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n        );\n\n        routes.MapRoute(\n            \"Home\",\n            \"\",\n            new { controller = \"Home\", action = \"Index\" }\n        ); \n    }\n\n    protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RegisterGlobalFilters(GlobalFilters.Filters);\n        RegisterRoutes(RouteTable.Routes);\n    }\n</code></pre>\n\n<p>The view I'm trying to add is /Views/Restaurants/Nearby.</p>\n\n<p>The controller is /Controllers/RestaurantsController and the ActionResult is:</p>\n\n<pre><code>public ActionResult Nearby()\n    {\n        return View();\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","asp.net-mvc-4","asp.net-mvc-areas"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":361,"score":4,"question_id":11531046,"title":"What is wrong with my area routing in my bin deployed MVC4 app?","body":"<p>I have just deployed an MVC4 .NET 4.0 app to my web host, for 'live' deployed testing. Non -area routes are working fine, e.g. my </p>\n\n<pre><code>@Html.ActionLink(\"Register as a Client\", \"Register\", \"Account\", new { registrationType = \"Client\"}, null)\n</code></pre>\n\n<p>link works fine, and the link opens the correct page. However, with a link to an area based action like this:</p>\n\n<pre><code>@Html.ActionLink(\"Authors\", \"Index\", \"Home\", new { Area = \"Author\", registrationType = \"Author\" }, null)\n</code></pre>\n\n<p>the link actually rendered to the browser is missing action and controller, i.e.</p>\n\n<pre><code>http://mylivedomain.com/?Area=Author&amp;registrationType=Author\n</code></pre>\n\n<p>It may be worth noting that the css bundling feature of MVC4 was not working after deployment, and I rolled back to using classic style links to individual stylesheets.</p>\n\n<p>MAYBE RELATED: My question: <a href=\"http://stackoverflow.com/q/11535369/8741\">Why is unmodified template code in my MVC4 app trying to register areas twice?</a></p>\n\n<p><strong>JUST IN:</strong> Removing the default action from the area route mappings for the default rouite solved this problem. There was no default controller to start with, in the VS2012 template code.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":11421,"score":14,"question_id":6025522,"title":"Getting \"A potentially dangerous Request.Path value was detected from the client (&)\"","body":"<p>I've got a legacy code issue that requires that I support random urls as if they were requests for the home page. Some of the URLs have characters in them that generate the error <strong>\"A potentially dangerous Request.Path value was detected from the client (&amp;)\"</strong>. The site is written with ASP.Net MVC 3 (in C#) and is running on IIS 7.5.</p>\n\n<p>Here's an example URL...</p>\n\n<pre><code>http://mywebsite.com/Test123/This_&amp;_That\n</code></pre>\n\n<p>Here's how I have my catch-all route setup (I have other routes to catch specific pages)...</p>\n\n<pre><code>routes.MapRoute(\n    \"Default\", // Route name\n    \"{garb1}/{garb2}\", // URL with parameters\n    new { controller = \"Website\", action = \"Home\", garb1 = UrlParameter.Optional, garb2 = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>I've added the following things to my web.config file...</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;system.web&gt;\n        &lt;pages validateRequest=\"false\" /&gt;\n        &lt;httpRuntime requestValidationMode=\"2.0\" /&gt;\n    &lt;/system.web&gt;\n&lt;configuration&gt;\n</code></pre>\n\n<p>I've also Added the ValidateInput attribute to the action that should be catching the urls...</p>\n\n<pre><code>public class WebsiteController : Controller\n{\n    [ValidateInput(false)]\n    public ActionResult Home()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>But I'm still getting the error. Any ideas why? Did I miss something? Right now I'm just running on my local dev server (I haven't tried these fixes in production yet).</p>\n"},{"tags":["jquery","asp.net-mvc","jsp","post"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":246,"score":3,"question_id":10883592,"title":"how to submit a form using jquery in jsp","body":"<p>In ASP.net MVC using the following snippet we can send the change password data to a controller. In the controller we can cast the posted data as ChangepasswordReq object and we can do our business. Now I am looking for the equivalent of this in <strong>jsp</strong>. How to communicate from the client side to the server side? I want to transfer a bigger form with number of controls.(I am using only html to build my pages). Any Help would be appreciable.</p>\n\n<pre><code> var ChangeReq = { CurrentPassword: epwd, NewPassword: newpwd }\n var jsondata = JSON.stringify(ChangeReq)\n\n            $.ajax({\n                type: 'POST',\n                url: \"/Account/ChangePassword\",\n                cache: false,\n                timeout: 10000,\n                contentType: \"application/json; charset=utf-8\",\n                success: function (_results) {\n                    //do something\n\n                },\n                error: function (_results) {\n                   //do something\n                }\n            });\n\n\n  [HttpPost]\n  public ActionResult ChangePassword(ChangepasswordReq _ChangepasswordReq)\n  {\n     //do the business\n  }\n\n  public class ChangepasswordReq\n    {\n        public String CurrentPassword { get; set; }\n        public String NewPassword { get; set; }\n    }\n</code></pre>\n\n<hr>\n\n<p>I have tried the following. But in my case I am generating some controls dynamically. I cannot get them properly in the controller as the number of dynamic controls vary. Is there any better way in jsp for the url routing as in asp.net MVC.(better than <strong>@RequestMapping(value = \"/ChangePassword\", method = RequestMethod.POST</strong>))\nHow to use jquery properly in jsp.(Please help me in client side and server side code)</p>\n\n<pre><code>@RequestMapping(value = \"/ChangePassword\", method = RequestMethod.POST)\n    public String home(@RequestParam(\"Currentpasswordtxtboxname\") String Currentpassword,@RequestParam(\"NewPasswordtextboxname\") String Newpassword, Locale locale, Model model) {\n// do business\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","sharing","aspnetdb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12748395,"title":"single membership providers within ASP.Net MVC 3 application sharing between 2 webapplications","body":"<p>We have 2 different mvc web applications running on single membership provider. I have put these 2 applications on the webserver and has the virtual path:\n<a href=\"http://aa.svr1/app1\" rel=\"nofollow\">http://aa.svr1/app1</a>\nhttp://aa.svr1/app2 </p>\n\n<p>If user opens the app1 and app2 in seperate browsers it logs out the other aplication.\nWhen user uses one application at a time, no issuess, concurrently used, its giving log off in one of the application.</p>\n\n<p>I have put the machinekey in web.config file for app1 application and was working fine.\nI have made new tfs release onto live server, now again back to the same situation that when app1, app2 browsed simultaneoulsy, logging off one of the application.</p>\n\n<p>What could be causing this blocking sessions/behaving unexpectedly like this ?</p>\n"},{"tags":["asp.net-mvc","html-helper"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":423,"score":1,"question_id":2183000,"title":"Where can i find list of good HTML Helpers to use with asp.net MVC?","body":"<p>As i am new to asp.net MVC and HTML Helpers.. I really want to know</p>\n\n<ul>\n<li>Where can i find list of good HTML Helpers to use with asp.net MVC?</li>\n</ul>\n\n<p><strong>Additional Info:</strong></p>\n\n<p>I would really love to get the list of HTML Helpers used by StackOverflow... If anyone knows can share...</p>\n"},{"tags":["asp.net-mvc","datetime","asp.net-mvc-4","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12930640,"title":"In ASP.NET MVC 4, how to validate that a DateTime value is entered on the correct format?","body":"<p>In our ASP.NET MVC 4 application, one of the models has a field of the DateTime type. When editing such model objects via a form, the value for the DateTime field has to be non-empty and on the format <code>yyyy-MM-dd H:mm:ss</code> (e.g., 2012-10-17 10:49:00). How do I ensure this field is correctly validated in the application? I've tried the following annotations:</p>\n\n<pre><code>[System.ComponentModel.DataAnnotations.Required]\n[System.ComponentModel.DataAnnotations.DisplayFormat(DataFormatString=\"yyyy-MM-dd H:mm:ss\",\n        ApplyFormatInEditMode=true)]\n</code></pre>\n\n<p>However, validation of form data doesn't require all components of the format to be present. For instance, the value '2012-10-17' is accepted (leaving out the 'H:mm:ss' part). It's just verified that the field contains a valid DateTime string.</p>\n\n<p>How should I ensure that this DateTime field is indeed on my specified format (yyyy-MM-dd H:mm:ss)?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12491634,"title":"HTTPContext And Controllercontext in MVC","body":"<p>I read about  <code>HTTPContext</code>  And <code>ControllerContext</code> in <strong>MVC</strong> (fundamentalbook), but i don't know what is exactly  <code>HTTPContext</code>  And <code>ControllerContext</code>.</p>\n\n<p>Could some one please explain these methods?</p>\n"},{"tags":["asp.net-mvc","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12867049,"title":"adding an image to telerik data grid column","body":"<p>I want to add an image to a data grid column, I am using telerik grid for this, however I get the following error, its on Line 51:</p>\n\n<p>Compiler Error Message: CS1525: Invalid expression term ')'</p>\n\n<p>Source Error:</p>\n\n<pre><code>Line 49:     column.Bound(o =&gt; o.HoursWorked).Title(\"Hours\");\nLine 50:     column.Template(o =&gt;\nLine 51:     {%&gt;\nLine 52:     &lt;img src=\"/Content/img/delete.png\" alt=\"Delete\" title=\"Delete\"/&gt;\nLine 53:     &lt;%\n</code></pre>\n\n<p>Here is how I am trying to add an image to the column:</p>\n\n<pre><code>&lt;div&gt;\n&lt;%=Html.CustomGridFor(\"Hours\", \"WorkHours\", \"HoursWorked\", GridOptions.EnableSelecting, Model).Columns(column =&gt;\n   {\n     column.Bound(o =&gt; o.DateWorked).Title(\"Date\").Width(\"65px\");\n     column.Bound(o =&gt; o.Description).Title(\"Description\").Width(\"120px\");\n     column.Bound(o =&gt; o.HoursWorked).Title(\"Hours\");\n     column.Template(o =&gt;\n     {%&gt;\n     &lt;img src=\"/Content/img/delete.png\" alt=\"Delete\" title=\"Delete\" onclick=\"javascript:deleteHours();\" /&gt;\n     &lt;%\n     }).Title(\"\").ClientTemplate(\n     \"&lt;img src=\\\"/Content/img/delete.png\\\" alt=\\\"Delete\\\" title=\\\"Delete\\\"/&gt;\"\n     ).Width(15);\n     }).HtmlAttributes(new { style = \"width: 270px;\" });\n     %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Tried this too:</p>\n\n<pre><code>&lt;div&gt;\n&lt;%=Html.CustomGridFor(\"Hours\", \"WorkHours\", \"HoursWorked\", GridOptions.EnableSelecting, Model).Columns(column =&gt;\n   {\n     column.Bound(o =&gt; o.DateWorked).Title(\"Date\").Width(\"65px\");\n     column.Bound(o =&gt; o.Description).Title(\"Description\").Width(\"120px\");\n     column.Bound(o =&gt; o.HoursWorked).Title(\"Hours\");\n\n        column.Template(o =&gt;\n        {\n        %&gt;\n            &lt;img \n                alt=\"Delete\" \n                src=\"/Content/img/delete.png\" \n              /&gt;\n        &lt;%\n        });\n\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12868067,"title":"Popup form on page load","body":"<p>I am new to telerik and MVC,\nI am trying to pop up a model form (which allows user to subscribe)\non page load in telerik.\nHere is the code in Index.cshtml, the test code \"hello world\" never been called.</p>\n\n<pre><code>@model Subscriber\n @{  Html.Telerik().Window()\n    .Name(\"Window\")\n    .Title(\"Submit feedback\")\n    .Content(@&lt;text&gt;\n        @using (Html.BeginForm(\"popupform\", \"window\", FormMethod.Post, new { id = \"feedback-form\" }))\n        {\n            &lt;p class=\"note\"&gt;Subscribe&lt;strong&gt;not&lt;/strong&gt; be saved.&lt;/p&gt;\n\n            @Html.LabelFor(model =&gt; model.Email)\n            @Html.TextBoxFor(model =&gt; model.Email)\n            @Html.ValidationMessageFor(model =&gt; model.Email)\n\n            &lt;div class=\"form-actions\"&gt;\n                &lt;button type=\"submit\" class=\"t-button t-state-default\"&gt;Submit feedback!&lt;/button&gt;\n            &lt;/div&gt;\n        }\n        &lt;/text&gt;)\n    .Width(400)\n    .Draggable(true)\n    .Modal(true)\n    .Visible(false)\n    .Render();\n } \n\n @{\n    ViewBag.Title = \"Home Page\";\n }\n@{\nHtml.Telerik().ScriptRegistrar().OnDocumentReady(\n@&lt;text&gt;\n    // put some javascript goodness in here\n   alert('hello world');\n   $('#Window').data('tWindow').center().open();\n&lt;/text&gt;);\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12931538,"title":"Why GetVaryByCustomString is not called","body":"<p>output cache is implemented in ASP.NET MVC2 using code below.</p>\n\n<p>GetVaryByCustomString method is not called: placing breakpoint to its first line and running application shows that breakpoint is not reached.\nBreakpoint in controller Index() is reached.</p>\n\n<p>How to use VaryByCustom  in ASP.NET MVC2 ?</p>\n\n<p>Controller:</p>\n\n<pre><code>        [OutputCache(VaryByCustom = \"user\")]\n        public ActionResult Index(string _entity, string id)\n        {\n...\n</code></pre>\n\n<p>Global.asax.cs:</p>\n\n<pre><code>public class MvcApplication : System.Web.HttpApplication\n{\n    public  override string GetVaryByCustomString(HttpContext context, string arg)\n    {\n        if (arg == \"user\")\n        {\n            HttpCookie cookie = context.Request.Cookies[\"Company\"];\n            if (cookie != null)\n                return Thread.CurrentPrincipal.Identity.Name + \",\" + cookie.Value;\n            return Thread.CurrentPrincipal.Identity.Name;\n        }\n        return base.GetVaryByCustomString(context, arg);\n    }\n\n}\n</code></pre>\n"},{"tags":[".net","asp.net-mvc","singleton","asp.net-mvc-4","dbcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12930862,"title":"Private constructor for DbContext","body":"<p>Is it necessary to control the amount of <code>dbContext</code> objects that are being created?</p>\n\n<p>I thought it might be safer to apply the Singleton pattern to my <code>customDbContext</code> class. However, when I execute the <code>Update-Database</code> command in the Package Manager Console I get an error that my <code>dbContext</code> does not have a default constructor (due to me implementing the Singleton pattern).</p>\n\n<p>Question: Is it really that much safer or should I go for the simple solution?</p>\n\n<pre><code>public class WebshopContext : DbContext\n{\n    private static WebshopContext database;\n\n    private WebshopContext() : base(\"DefaultConnection\") { }\n\n    public static WebshopContext GetInstance() {\n        if (database != null)\n        {\n            return database;\n        }\n        else {\n            database = new WebshopContext();\n            return database;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","redirect","saml"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":231,"score":2,"question_id":9670590,"title":"How do I post to another website with a SAML assertion in MVC3?","body":"<p>I have a SAML token formatted like so:</p>\n\n<pre><code>&lt;saml:Assertion xmlns:saml=\"urn:oasis:names:tc:SAML:1.0:assertion\" MajorVersion=\"1\" MinorVersion=\"1\" AssertionID=\"_341bea3b-f497-4a4f-adff-2bd65e44fd67\" Issuer=\"http://127.0.0.1:81/\" IssueInstant=\"2012-03-12T15:08:26.618Z\"&gt;\n&lt;saml:Conditions NotBefore=\"2012-03-12T15:08:26.585Z\" NotOnOrAfter=\"2012-04-23T07:08:26.585Z\"&gt;\n    &lt;saml:AudienceRestrictionCondition&gt;\n        &lt;saml:Audience&gt;http://127.0.0.2:83/&lt;/saml:Audience&gt;\n    &lt;/saml:AudienceRestrictionCondition&gt;\n&lt;/saml:Conditions&gt;\n&lt;saml:AttributeStatement&gt;\n    &lt;saml:Subject&gt;\n        &lt;saml:SubjectConfirmation&gt;\n            &lt;saml:ConfirmationMethod&gt;urn:oasis:names:tc:SAML:1.0:cm:bearer&lt;/saml:ConfirmationMethod&gt;\n        &lt;/saml:SubjectConfirmation&gt;\n    &lt;/saml:Subject&gt;\n    &lt;saml:Attribute AttributeName=\"name\" AttributeNamespace=\"http://schemas.xmlsoap.org/ws/2005/05/identity/claims\"&gt;\n        &lt;saml:AttributeValue&gt;tempName&lt;/saml:AttributeValue&gt;\n    &lt;/saml:Attribute&gt;\n&lt;/saml:AttributeStatement&gt;\n&lt;ds:Signature xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;ds:SignedInfo&gt;\n    &lt;ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n    &lt;ds:SignatureMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\"/&gt;\n    &lt;ds:Reference URI=\"#_341bea3b-f497-4a4f-adff-2bd65e44fd67\"&gt;\n        &lt;ds:Transforms&gt;\n            &lt;ds:Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/&gt;\n            &lt;ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/&gt;\n        &lt;/ds:Transforms&gt;\n        &lt;ds:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/&gt;\n        &lt;ds:DigestValue&gt;4dssZKnMKbLVftPXnSxZlDjrKnDtyQ8Sb7FRup6wkwE=&lt;/ds:DigestValue&gt;\n    &lt;/ds:Reference&gt;\n    &lt;/ds:SignedInfo&gt;\n&lt;ds:SignatureValue&gt;\nREkPevPfjE86v+SCxGiomP2CConIVjTxuUpCIFDc+sAWUtEq3cMYZDwYfGKgEaSboIv1SUfYl8dUAEhQ+CjlCg7p3jF38f64HxexWHuLty2K+us74OmvK2F8CtG+xgwURAtJ14a6j/dTzuqzpn3hhHI7EXmrW1C5vrSAMQrVcyk=\n&lt;/ds:SignatureValue&gt;\n&lt;KeyInfo xmlns=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n&lt;X509Data&gt;\n    &lt;X509Certificate&gt;\n    MIICeDCCAeGgAwIBAgIBADANBgkqhkiG9w0BAQQFADCBgDELMAkGA1UEBhMCR0IxDzANBgNVBAgTBkxvbmRvbjERMA8GA1UEBxMIVmljdG9yaWExITAfBgNVBAoTGFRob21zb25zIE9ubGluZSBCZW5lZml0czEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxFDASBgNVBAMTC1Rlc3RpbmdDZXJ0MCAXDTExMDkxOTAwMDAwMFoYDzQwMDAwNzE5MTgwMzMzWjCBgDELMAkGA1UEBhMCR0IxDzANBgNVBAgTBkxvbmRvbjERMA8GA1UEBxMIVmljdG9yaWExITAfBgNVBAoTGFRob21zb25zIE9ubGluZSBCZW5lZml0czEUMBIGA1UECxMLRGV2ZWxvcG1lbnQxFDASBgNVBAMTC1Rlc3RpbmdDZXJ0MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDC16AgeosO1rNdNU1nzAODZTcRuhoew3wJdVAbIcYqU57MLAYIhGIU/tovSGEOHnKjzNciYmXwLV6dVSCuygoOADNMAAgsfWYHDk2iZZLM8XuM2N6VVtJk/pc4wEITxBHLMqeCrJXTN/6JvTB1AHZWmfFm8jqMuMpXlowNEGoMJQIDAQABMA0GCSqGSIb3DQEBBAUAA4GBAExdjee3nfJ5wFtOrQcIwblrrM/XWfzhaj4Zzd6Bc/dofP44/PpMqwdyiJWYf/DmsXTM4YZ2HbdJyWXHCR+m/neWE1diVXlEAuArrjHDFWvsmqqK3bpKzSzabQF4wVxHaxbn49zUqale+tr5gXK36MKwq3I54ohd0T2i7HO8hKhF\n    &lt;/X509Certificate&gt;\n&lt;/X509Data&gt;\n&lt;/KeyInfo&gt;\n&lt;/ds:Signature&gt;\n&lt;/saml:Assertion&gt;\n</code></pre>\n\n<p>I want to redirect from a MVC controller to another page in a separate MVC application and pass this SAML token along. What is the best way to go about this?</p>\n"},{"tags":["asp.net-mvc","knockout.js"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12899676,"title":"My knockout code is not updating my View","body":"<p>I am using autocomplete to add names to a dynamic list of table rows.\nWhen I add in a new Name, a new row is created but the searchText and searchId are NOT being updated. The remove link seems to work.\nSo my view looks like;</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;SHP.Models.TrainingListEmployeesViewModel&gt;\" %&gt;\n&lt;%@ Import Namespace=\"System.Web.Script.Serialization\" %&gt;\n\n&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Bulk Training\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n&lt;form class=\"employeeListEditor\"&gt;\n    &lt;h3&gt;Allocate or cancel training for the selected employees&lt;/h3&gt;\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;td style=\"text-align: right;\"&gt;Course Name&lt;/td&gt;\n            &lt;td&gt;&lt;%: Html.EditorFor(model =&gt; model.TrainingName) %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td style=\"text-align: right;\"&gt;Description (optional)&lt;/td&gt;\n            &lt;td&gt;&lt;%: Html.TextAreaFor(\n               model =&gt; model.TrainingDescription, new { maxlength = \"255\", style = \"width:400px;height:100px;\" }) %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;%: Html.EditorFor(model =&gt; model.ClientEmployeeSelector) %&gt;\n    &lt;button data-bind=\"click: addEmployee\"&gt;Add&lt;/button&gt;\n    &lt;%--&lt;input type=\"hidden\" name=\"numberOfEmployees\" id=\"numberOfEmployees\" value=\"&lt;%:Model.EmployeeList.Count %&gt;\" /&gt;--%&gt;\n    &lt;div id=\"displayEmployees\" style=\"margin-top:10px;display: block\"&gt;\n        &lt;table id=\"employeeDataTable\" class=\"groupBorder\"&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;&lt;/th&gt;\n                    &lt;th&gt;Employee&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody data-bind=\"foreach: employees\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        &lt;a href=\"#\" data-bind=\"click: $parent.removeEmployee\"&gt;Remove&lt;/a&gt;\n                        &lt;input type=\"hidden\" data-bind=\"value: searchId\"/&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;&lt;span data-bind=\"text: searchText\"&gt;&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;               \n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n        function Employee(id, text) {\n            var self = this;\n            self.searchId = id;\n            self.searchText = text;\n        }\n\n        var initialData = &lt;%= new JavaScriptSerializer().Serialize(Model) %&gt;;\n        function ViewModel() {\n            var self = this;\n            self.employees = ko.observableArray(initialData.EmployeeList);\n            self.searchText = ko.observable(initialData.SearchText);\n            self.searchId = ko.observable(initialData.SearchTextId);\n            self.removeEmployee = function(employee) {\n                self.employees.remove(employee);\n            };\n            self.addEmployee = function() {\n                self.employees.push(new Employee(self.searchId, self.searchText));\n                $('#SearchText').val('');\n            };\n            self.save = function() {\n                ko.utils.postJson(location.href, { employees: self.employees });\n            };\n        }\n        ko.applyBindings(new ViewModel());\n    &lt;/script&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>And when I click the add button (which I would prefer to remove when it is working so that the add event is triggered by the return key) the following row is added to the table;</p>\n\n<pre><code>&lt;tbody data-bind=\"foreach: employees\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        &lt;a href=\"#\" data-bind=\"click: $parent.removeEmployee\"&gt;Remove&lt;/a&gt;\n                        &lt;input type=\"hidden\" data-bind=\"value: searchId\" value=\"\"/&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;&lt;span data-bind=\"text: searchText\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;               \n            &lt;/tbody&gt;\n</code></pre>\n\n<p>So the remove link correct appears and it works as well. But both the searchId and searchText are NOT set. What am I doing wrong?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","html.dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":12927098,"title":"Html.DropDownListFor value not selected on edit mode","body":"<p>I am succesfullly able to save value to database (title value) on insert , but when i render the same view in edit mode then title field must hold the selected value but in my case no value is selected by title dropdown...dont know why i am getting a dropdown with nothing selected while title field holds the stored value(at backend).</p>\n\n<pre><code>@Html.DropDownListFor(model =&gt; model.title, new SelectList(Model.titles, \"Value\", \"Text\"),\"-Select-\") // nothing selected on edit mode\n\n @Model.title //displaying the stored value which the user selected initially.\n</code></pre>\n\n<p><br/>\n<strong>values for title</strong></p>\n\n<pre><code>titles = new SelectList(ListItem.getValues().ToList(), \"Value\", \"Text\").ToList();\n</code></pre>\n\n<p>getValue function</p>\n\n<pre><code> public static List&lt;TextValue&gt; getValues()\n      {\n    List&lt;TextValue&gt; titles= new List&lt;TextValue&gt;();\n    TextValue T= new TextValue();\n\n\n   T.Value = \"Mr\";\n   T.Text = \"Mr\";\n   titles.Add(T);\n\n    T= new TextValue();\n    T.Value = \"Mrs\";\n    T.Text =\"Mrs\";\n       titles.Add(T);\n\n     T= new TextValue();\n   T.Value = \"Miss\";\n   T.Text = \"Miss\";\n    titles.Add(T);\n\n    T= new TextValue();\n    T.Value =\"Other\";\n   T.Text = \"Other\";\n   titles.Add(T);\n\n\n    return titles;\n\n   }\n</code></pre>\n"},{"tags":["asp.net-mvc","visual-studio-2010","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12914772,"title":"how to get id of removed element in jquery auto complete","body":"<p>I am using kendoUI auto complete.To display each record in the box format with\"x\" mark Ihave implemented like</p>\n\n<pre><code>$(\"#roleAuto\").kendoAutoComplete({\n                       dataSource: roledata,\n                       filter: \"startswith\",\n                       placeholder: \"Select Role...\",\n                       select: function (e, ui) {\n                           alert(\"hi\");\n                           $(\".roleSelection:checked\").each(function () {\n                               var role = $(this).attr(\"data-name\"),\n                                     var  span = $(\"&lt;span&gt;\").text(role),\n                                        a = $(\"&lt;a&gt;\").addClass(\"remove\").attr({\n                                        title: \"Remove \" + role\n                                        }).text(\"x\").appendTo(span);\n                               alert(role);\n                               span.insertBefore(\"#roleAuto\");\n                                $(\"#Roles\").click(function () {\n                                 $(\"#roleAuto\").focus();\n                                 });\n             $(\".remove\", document.getElementById(\"Roles\")).live(\"click\", function () {\n                     $(this).parent().remove();\n                     if ($(\"#Roles span\").length === 0) {\n                     $(\"#roleAuto\").css(\"top\", 0);\n                           }\n                       });\n                   });\n</code></pre>\n\n<p>I am able to display each record in the box with \"x\" symbol.if i click on the \"x\" mark I am able to remove the record,I want that removed item ID value,can u tell me how to get this.</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":146,"score":1,"question_id":12928744,"title":"How to implement Server side paging in Client side Kendo UI grid in asp.net mvc","body":"<p>Can anyone tell me how can I implement server-side paging with client-side Kendo UI Grid?</p>\n"},{"tags":["c#","javascript","jquery","asp.net-mvc"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3738,"score":6,"question_id":8148632,"title":"Redirecting to another page in asp.net MVC using javascript/Jquery","body":"<p>I want to redirect from one page to another page in asp.net MVC 3.0 using javascript/Jquery/Ajax. On button click event I have written javascript code like below. </p>\n\n<pre><code>function foo(id)\n{\n    $.post('/Branch/Details/' + id);\n}\n</code></pre>\n\n<p>My Controller code is like this:</p>\n\n<pre><code>public ViewResult Details(Guid id)\n{\n     Branch branch = db.Branches.Single(b =&gt; b.Id == id);\n     return View(branch);\n}\n</code></pre>\n\n<p>When I click on button it is calling Details action inside  BranchController but it doesn't return to Details view.</p>\n\n<p>I didn't get any error or exception. It's showing status 200 OK in firebug.\nWhat is wrong in my code and How can I redirect to Details view page.\nPlease help me.</p>\n"},{"tags":["asp.net-mvc","c#-4.0","castle-windsor","log4net"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12923535,"title":"Can't get log4net 1.2.11 and Castle Windsor 3.1 to work together nicely","body":"<p>Surely other people have gotten these two to work together. But for some reason I can't. I'm relatively new to Castle, but I've followed their explanation of how to add it. Castle was built with log4net 1.2.10, so I had to add a binding redirect to get it to work with 1.2.11.</p>\n\n<p>In my code, the failure happens in the logger installer:</p>\n\n<pre><code>public class LoggerInstaller : IWindsorInstaller\n{\n    public void Install(IWindsorContainer container, IConfigurationStore store)\n    {\n        container.AddFacility&lt;LoggingFacility&gt;(f =&gt; f.UseLog4Net());\n    }\n}\n</code></pre>\n\n<p>I get a MissingMethodException for:</p>\n\n<pre><code>void log4net.Config.XmlConfigurator.ConfigureAndWatch(System.IO.FileInfo)\n</code></pre>\n\n<p>I don't know if log4net has changed, but the signature for ConfigureAndWatch is:</p>\n\n<pre><code>ICollection log4net.Config.XmlConfigurator.ConfigureAndWatch(System.IO.FileInfo)\n</code></pre>\n\n<p>So I see what the problem is, but I can't seem to find anything about this problem and I can't imagine I'm the only person who's run into it.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","inversion-of-control","ninject"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12921446,"title":"Ninject - Different Solution Configurations","body":"<p>I am developing an application and using Ninject for DI. I would like to be able to inject a different object into a given method depending on the solution configuration I am using. Namely, in a \"mock\" configuration mode I would like to inject a mock object and in the debug/release configurations I would like to inject a real object.</p>\n\n<p>Having read  <a href=\"http://stackoverflow.com/questions/4639689/ninject-and-configuration\">Ninject and configuration</a> I understand that XML configs offer such a possiblity. However, I would like to do this without the XML if possible. (I tend to agree with Ninject that injection details shouldn't be configurable in the published product...) I am also aware that I could use preprocessor directives to do this. What I would like to know is if this capability exists in Ninject, or if I need extensions/workarounds to accomplish it.</p>\n"},{"tags":["css","asp.net-mvc","internet-explorer","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12926962,"title":"Dynamic loading of css files doesn't work in IE","body":"<p>Almost solution I found was using javascript/jquery while on my part it should be Views in MVC. One reference is <a href=\"http://stackoverflow.com/questions/1184950/dynamically-loading-css-stylesheet-doesnt-work-on-ie\">here</a>  </p>\n\n<p>So I set up my css files in this way:  </p>\n\n<pre><code>@{\nViewBag.Stylesheets = new string[] {\n    \"global/style.css\",\n    \"global/links.css\",\n    .\n    .\n    .\n    . 40 plus more css files...\n};  \n</code></pre>\n\n<p>And load them:  </p>\n\n<pre><code>@foreach (string stylesheet in\nViewBag.Stylesheets is string[] ? ViewBag.Stylesheets : new string[] { @\"style.css\" })\n{ \n    &lt;link href=\"@Url.ContentArea(\"~/css/\" + stylesheet)\" rel=\"stylesheet\" /&gt;\n}  \n</code></pre>\n\n<p>All of these were inside views. I have 48 css files and I notice that IE9 loads only 37 css files. For now it is not possible to combine css codes in some number of files for certain reasons. So how can I load all of these css files in IE?</p>\n"},{"tags":["asp.net-mvc","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":216,"score":0,"question_id":8484184,"title":"Dependency between DropDownList","body":"<p>I have 2 select field in ascx file:</p>\n\n<pre><code>&lt;%=Html.DropDownList(\"CityID\", new SelectList(Model.Cities, \"Code\", \"Name\"), new Dictionary&lt;string, object&gt;\n                   {\n                        {\"class\", \"styled\"}                                                                            \n                   })\n                %&gt;\n\n\n\n&lt;%=Html.DropDownList(\"EstablishmentID\", new SelectList(Model.Establishments, \"OID\", \"Name\"),\n                                     \"All Establishment\", new Dictionary&lt;string, object&gt;\n                    {\n                         {\"class\", \"styled\"}                                                                          \n                   })\n                %&gt;  \n</code></pre>\n\n<p>I want that a values of <code>EstablishmentId</code> change when user select new value in <code>CityID</code>.<br>\nHow can I do this?<br>\nThanks.</p>\n\n<p>PS. ViewEngine is <code>WepPages</code>.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12925747,"title":"display all data in a table from sql in asp.net using C#","body":"<p>i'm just learning asp.net with c#. with the little knowledge of php, i think i'm able to do somethings but i'm having problem displaying records from my database.</p>\n\n<p>i have a table called resources, what i want to do is output all the data in the table.\nthis is the output i want to write in c# in php...</p>\n\n<pre><code>&lt;?php\nwhile($row = mysql_fetch_object($tablename))\n{\n   echo \"&lt;tr&gt;&lt;td&gt;$row-&gt;image&lt;/td&gt;&lt;td&gt;&lt;a href='#'&gt;download link&lt;/a&gt;&lt;/td&gt;&lt;a href='http://'\".$row-&gt;url.\"'&gt;'\".$row-&gt;url.\"'&lt;/a&gt;&lt;/tr&gt;\";\n}\n?&gt;\n</code></pre>\n\n<p>basically i don't have problem with the php but i want the output this code will give me same in C#(with image, download link, and url in a table). Please help,...</p>\n\n<p>i have this code in c# to output data in a label control</p>\n\n<pre><code>var cmd = new MySqlCommand(\"SELECT * FROM resources\");\nKnct dal = new Knct();\nMySqlDataReader dr = dal.DatareaderMethod(cmd, Knct.executemethods.ExecuteReader);\nwhile (dr.Read())\n{\n  label1.Text = dr[2].ToString();\n}\n</code></pre>\n\n<p>the while loop is not working, it only display one value. how do i make this a display all records in the database and which asp control can i use to output the records and also make a url link in the table output.</p>\n"},{"tags":["asp.net-mvc","deployment","web-config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12911516,"title":"Deploying web.config changes to multiple servers","body":"<p>I have an ASP.NET MVC 3 app that needs to be deployed frequently to (currently) 8 production servers and 1 development server through rather slow network. I don't have problems deploying the binaries, but the web.config is a bit tricky. The connection string and several other web.config entries are different for each server.</p>\n\n<p>Right now web.config deployment is done by hand by creating custom web.config for each server, and then robocopy with scheduled batch file.</p>\n\n<p>Is there a better way to deploy with this scenario? Is there a tool to do this?</p>\n"},{"tags":["sql","sql-server","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12923450,"title":"How to get the number of distinct records in a SQL Server 2008 database?","body":"<p>I have a table with users. Each user has a country row filled in (no user without a country).</p>\n\n<p>How can i get the number of countries that has a user?</p>\n\n<pre><code>select distinct Country_CountryId \nfrom users\n</code></pre>\n\n<p>This returns a list with all different countries (their id from the country table). But how can I sum them into an int without getting all entries back to my MVC controller and then count them there.</p>\n\n<p>I tried</p>\n\n<pre><code>select distinct count(Country_CountryId) \nfrom users\n</code></pre>\n\n<p>But that does not return a correct answer.</p>\n\n<p>Example: table has 4 users.</p>\n\n<ul>\n<li>User 1: UK</li>\n<li>User 2: UK</li>\n<li>User 3: US</li>\n<li>User 4: Spain</li>\n</ul>\n\n<p>This should result in a count of 3 distinct countries</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":63,"score":4,"question_id":12925401,"title":"How to retrieve the string value of a custom C# resource class constant?","body":"<p>I have created the following custom ValidationAttribute: </p>\n\n<pre><code>public class DateRangeAttribute : ValidationAttribute, IClientValidatable {\n  public DateTime MinimumDate = new DateTime(1901, 1, 1);\n  public DateTime MaximumDate = new DateTime(2099, 12, 31);\n\n   public DateRangeAttribute(string minDate, string maxDate, string errorMessage) {\n     MinimumDate = DateTime.Parse(minDate);\n     MaximumDate = DateTime.Parse(maxDate);\n     ErrorMessage = string.Format(errorMessage, MinimumDate.ToString(\"MM/dd/yyyy\"), MaximumDate.ToString(\"MM/dd/yyyy\"));\n   }\n}\n</code></pre>\n\n<p>that I would like to use in my MVC4 view model as follows:</p>\n\n<pre><code>[DateRange(Resources.MinimumDate, Resources.MaximumDate, \"Please enter a date between {0} and {1}\")]\n</code></pre>\n\n<p><em>Resources</em> is a generated resources class based on a set of options stored in a SQL database.  A simplified version of the generated code for the above two resource properties is:</p>\n\n<pre><code>public class Resources {\n  public const string MinimumDate = \"PropMinimumDate\";\n  public static string PropMinimumDate\n  {\n     get { return \"12/15/2010\" } \n  }\n  public const string MaximumDate = \"PropMaximumDate\";\n  public static string PropMaximumDate\n  {\n     get { return \"12/15/2012\" } \n  }\n}\n</code></pre>\n\n<p>While I do not understand how it works, I do understand that typical usage of resources in ValidationAttributes will automatically map <em>Resources.MinimumDate</em> to <em>PropMinimumDate</em> and return the value \"12/15/2010\".</p>\n\n<p>What I am cannot figure out is how to manually make that programmatic leap myself so I can pass in the two date values into my custom ValidatorAttribute.  As presently coded, <em>\"PropMinimumDate\"</em> and <em>\"PropMaximumDate\"</em> are the <em>minDate</em> and <em>maxDate</em> parameter values (respectively) passed into the constructor of the DateRangeAttribute.</p>\n\n<p>If I try</p>\n\n<pre><code>[DateRange(Resources.PropMinimumDate, Resources.PropMaximumDate, \"Please enter a date between {0} and {1}\")]\n</code></pre>\n\n<p>I receive the compile error: </p>\n\n<p><em>An attribute argument must be a constant expression, typeof expression or array creation expression of an attribute parameter type</em></p>\n\n<p>Is there a way to accomplish this task, or am I attempting the impossible?  </p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","razor","webgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3100,"score":3,"question_id":8949003,"title":"Asp Mvc3 webgrid Paging and Filtering by ajax","body":"<p>I Have a little problem with WebGrid control for Asp.Net MVC3. What I want is to perform a search view using ajax and webgrid; something like this:</p>\n\n<p>Search Criteria  <strong><em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__<em>_</em>__</strong></p>\n\n<p>Subject: <strong><em>_</em>__<em>_</em>_</strong></p>\n\n<p>Task Type: <strong><em>_</em>____</strong></p>\n\n<p>SUBMIT SEARCH</p>\n\n<hr>\n\n<p>WebGrid withPaging</p>\n\n<p>.</p>\n\n<p>When I click the button search it call the HTTPost action by ajax and apply the search criteria; however when I try to do paging it goes to the HTTPGet action; in this way, the filter according to the search criteria doesn't execute.</p>\n\n<p>I put the grid inside a partial view; there is the code:</p>\n\n<pre><code>    @model IEnumerable&lt;MVC3.Models.Task&gt;\n@{\n    var grid = new WebGrid(null, rowsPerPage: 2, canPage: true, canSort: true, ajaxUpdateContainerId: \"myGrid\");\n    grid.Bind(Model, rowCount: 3, autoSortAndPage: true);\n    grid.Pager(mode: WebGridPagerModes.All);\n    @grid.GetHtml(\n    columns: grid.Columns(\n            grid.Column(format: (item) =&gt; Html.ActionLink(\"Assign Notifications\", \"AssignNotifications\", new { id = item.TaskId })),\n            grid.Column(format: (item) =&gt; Html.ActionLink(\"Edit\", \"Edit\", new { id = item.TaskId })),\n            grid.Column(format: (item) =&gt; Html.ActionLink(\"Delete\", \"Delete\", new { id = item.TaskId })),\n            grid.Column(\"Subject\"),\n            grid.Column(\"Comment\"),\n            grid.Column(columnName: \"Status\", header: \"Status\", format: (item) =&gt; item.TaskStatu.Name),\n            grid.Column(columnName: \"StartDate\", header: \"Start Date\", format: (item) =&gt; item.StartDate.ToString(\"MM/dd/yyy\")),\n            grid.Column(columnName: \"Deadline\", header: \"Dead Line\", format: (item) =&gt; item.Deadline.ToString(\"MM/dd/yyy\"))\n            )\n    );\n}\n</code></pre>\n\n<p>And my Index view looks like: </p>\n\n<pre><code>@model MVC3.ViewModel.TaskSearchViewModel\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n&lt;h2&gt;\n    Task Index&lt;/h2&gt;\n&lt;hr /&gt;\n@using (Ajax.BeginForm(new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = \"myGrid\" }))\n{\n    &lt;div id=\"Filters\"&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Search criteria&lt;/legend&gt;\n            &lt;br /&gt;\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.Subject)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.TextBoxFor(x =&gt; x.Subject, new { style = \"width: 255px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.TaskTypeId)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(x =&gt; x.TaskTypeId, Model.GetTaskTypesSelectList(), \"Select\", new { style = \"width: 260px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.ResponsableId)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(x =&gt; x.ResponsableId, Model.GetResponsablesSelectList(), \"Select\", new { style = \"width: 260px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.LabelFor(x =&gt; x.StatusId)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DropDownListFor(x =&gt; x.StatusId, Model.GetStatusSelectList(), \"Select\", new { style = \"width: 260px;\" })\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/table&gt;\n        &lt;/fieldset&gt;\n    &lt;/div&gt;\n    @Html.Hidden(\"page\")\n    &lt;input id=\"btnSearch\" type=\"submit\" value=\"Search\" /&gt;\n}\n&lt;br /&gt;\n&lt;div id=\"myGrid\"&gt;\n    @Html.Partial(\"_TaskSearchResult\", Model.ResultTask)\n&lt;/div&gt;\n&lt;br /&gt;\n@Html.ActionLink(\"Create new Task\", \"NewTask\")\n</code></pre>\n\n<p>So if anyone know how to solve my problem I'll be grateful.</p>\n\n<p>Greeting\nArturo</p>\n"},{"tags":["asp.net-mvc","foreign-keys","entity","poco"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12926675,"title":"ASP.NET MVC 4 Multiple Foreign Keys Referencing Single Parent Entity","body":"<p>I am trying to develop an ASP.NET MVC 4 application where players can be rated according to their Offence, Defence and Assist skills. Offence, Defence and Assist are foreign keys on Player table referencing the same lookup table - Rating.</p>\n\n<p>I have the following parent entity:</p>\n\n<pre><code>public class Rating\n{\n    public int Id { get; set; }\n\n    public string Name { get; set; }\n\n    public virtual ICollection&lt;Player&gt; Players { get; set; }\n}\n</code></pre>\n\n<p>And child entity: </p>\n\n<pre><code>public class Player\n{\n    public int Id { get; set; }\n\n    public string Name { get; set; }\n\n    public int OffenceRatingId { get; set; }\n    [ForeignKey(\"OffenceRatingId\")]\n    public virtual Rating OffenceRating { get; set; }\n\n    public int DefenceRatingId { get; set; }\n    [ForeignKey(\"DefenceRatingId\")]\n    public virtual Rating DefenceRating { get; set; }\n\n    public int AssistRatingId { get; set; }\n    [ForeignKey(\"AssistRatingId\")]\n    public virtual Rating AssistRating { get; set; }\n}\n</code></pre>\n\n<p>Building and scaffolding went fine but when I run the app, I get the following error:</p>\n\n<pre><code>Introducing FOREIGN KEY constraint 'FK_dbo.Players_dbo.Ratings_DefenceRatingId' on table 'Players' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.\n</code></pre>\n\n<p>I am new to MVC and have no idea what I am missing here. Any help with this will be greatly appreciated. Thanks.</p>\n"},{"tags":["asp.net-mvc","debugging","iis"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":3315,"score":2,"question_id":3816667,"title":"Unable to start debugging on the web server. The web server could not find the requested resource","body":"<p>I'm having this error trying to debug my ASP.NET MVC app. I've set the app to \"Use Local IIS Web server\", and selected ASP.NET as the debugger. Running the site without debugging works just fine, but when I try to debug, I got this error:</p>\n\n<pre><code>Unable to start debugging on the web server. The web server could not find the requested source.\n</code></pre>\n\n<p>I'm using Visual Web Developer 2008 Express Edition.</p>\n\n<p>Does anyone know how to fix this error? Thank you.</p>\n"},{"tags":["c#",".net","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12926483,"title":"How does Dispose work with Entity Framework","body":"<p>Can someone explain to me how and why do we need to use Dispose()? It's part of the default controller template that comes with ASP.NET MVC 4. Shouldn't the garbage collector in .NET automatically kick in when the object, in this case data from a database is no longer in use?</p>\n\n<p>Is it correct that Dispose() should be used when loading from a database but not regular object assignments?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","boolean","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12926261,"title":"filter the table by the user status isactive or not","body":"<p>model </p>\n\n<pre><code> public bool? IsActive { get; set; }\n</code></pre>\n\n<p>linq statement pseudo code</p>\n\n<pre><code> var userstatus = Users.Select(e =&gt; e.IsActive).Distinct().select();\n   if (userstatus(bool) is DBNull)\n        {\n            e.Item.Text = \"inactive\";\n            e.Item.Value = \"0\";\n        }\n        else if ((bool)[\"Bool\"])\n        {\n            e.Item.Text = \"active\";\n            e.Item.Value = \"1\";\n        }\n</code></pre>\n\n<p>select it by dropdown list</p>\n\n<pre><code> &lt;select &gt;\n     &lt;option value=\"\"&gt;All&lt;/option&gt;\n     &lt;option id=\"active\"&gt;Active&lt;/option&gt;\n      &lt;option id=\"inactive\"&gt;InActive&lt;/option&gt;\n      &lt;/select&gt;\n</code></pre>\n\n<p>filtering</p>\n\n<pre><code>    if($(\"#active\").val()){\n\n        $filter.push({ field: \"IsActive\", operator: \"eq\", value: true });\n    }\n     if($(\"#inactive\").val()){\n\n        $filter.push({ field: \"IsActive\", operator: \"eq\", value: false  });\n    }\n</code></pre>\n\n<p>so the linq is wrong and also the filtering, any one can help me or done this before</p>\n\n<p>I want to filter the column by the user status is active or not</p>\n"},{"tags":["asp.net-mvc","custom-membershipprovider"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":12924933,"title":"ASP.NET MVC 4 and dynamically changing membership connection string with CodeFirst","body":"<p>I am working on creating a MVC4 multi-tenant site that uses seperate DBs for each tenant and have been trying to get the membership piece to work for each tenant without any luck.</p>\n\n<p>For some reason connectionStringField is always null no matter what I do. Any ideas why this could happen?</p>\n\n<pre><code>public class CodeFirstMembershipProvider : MembershipProvider\n    {    \n      public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)  \n      { \n          base.Initialize(name, config);  \n\n          // hard coded for testing  \n          string connectionString = @\"server=localhost;database=masterdb;uid=master;pwd=password\";\n\n          // Set private property of Membership provider.  \n          FieldInfo connectionStringField = GetType().BaseType.GetField(\"_sqlConnectionString\", BindingFlags.Instance | BindingFlags.NonPublic);  \n          if(connectionStringField != null)\n            connectionStringField.SetValue(this, connectionString);  \n      }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","facebook-javascript-sdk"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12683618,"title":"How do I properly load the Facebook javascript SDK with this coffeescript class, and have it usable by multiple facebook features on the same page?","body":"<p>MyNamespace.Facebook.coffee: </p>\n\n<pre><code>namespace 'MyNamespace', (exports) -&gt; \n    exports.FacebookAPILoader = class \n\n        constructor: (@appId, @channelFileUrl) -&gt; \n            @init()\n\n        init: (fbAPILoadedCallback) -&gt; \n            #FB triggers/calls window.fbAsyncInit() after the API javascript loads: \n            window.fbAsyncInit = () =&gt; \n                @initFb()\n                fbAPILoadedCallback() if fbAPILoadedCallback?\n                return\n            @loadAPI()\n\n        loadAPI: () -&gt; \n            ((d) -&gt;\n                id = 'facebook-jssdk'\n                ref = d.getElementsByTagName('script')[0]\n                return if d.getElementById id\n\n                js = d.createElement 'script'\n                js.id = id\n                js.async = true\n                js.src = \"//connect.facebook.net/en_US/all.js\"\n                ref.parentNode.insertBefore js, ref\n            )(document)\n\n        # Set app specific settings here: \n        initFb: () -&gt; \n            fbConfig = \n                appId: @appId\n                channelUrl: @channelFileUrl\n                status: true\n                cookie: true\n                xfbml: true\n            FB.init fbConfig \n</code></pre>\n\n<p>This is how I load the api in my views: \n//MyView.cshtml: </p>\n\n<pre><code>@using (Script.Foot()) {\n    var settingsReader = new System.Configuration.AppSettingsReader();\n    var facebookAPIAppId = settingsReader.GetValue(\"Facebook_API_AppId\", typeof(string));\n    var hostName = settingsReader.GetValue(\"EnvHostname\", typeof(string));\n\n&lt;script type=\"text/javascript\"&gt;\n    var myFb;\n    $(document).ready(function () {\n        myFb = new MyNamespace.FacebookAPILoader(\n            '@Html.Raw(facebookAPIAppId)'\n            , '//@Html.Raw(hostName)/modules/myapp/channel.html'\n        );\n    });\n&lt;/script&gt;\n}\n</code></pre>\n\n<p>Jquery is loaded just before the closing <code>&lt;/body&gt;</code> tag. I have two questions: </p>\n\n<ol>\n<li><p>Is there anything wrong with the way I am loading it here? I believe it will load asynchronously after jquery fires the document 'ready' event -- is that correct? Is there a way to do it that has better performance? </p></li>\n<li><p>What is the best way to set this module up so that I can pass in arbitrary callbacks that will execute within fbAsyncInit()? I'm using this inside a CMS (Orchard) driven website, and I can potentially have multiple views in the same HTTP request wanting to add their own custom callbacks that should be run as part of fbAsyncInit(). How do I accomplish that? I know I could just pass in a callback array, but the part I'm not sure about is how to make sure all the different features on a given page can chime in on what their Facebook related code is, and how to ensure that the FacebookAPILoader.init() runs only after all those FB widgets' callbacks and DOM elements and everything are ready to interact with it. </p></li>\n</ol>\n\n<p><strong>UPDATE:</strong> \nI think I'm going to do this the same way google analytics async tracking does it with the <code>_gaq</code> variable in the global namespace. Any code that needs facebook API interaction can push callbacks into the _gaq style queue, and the FacebookAPILoader module will pull that queue when it's ready. Is this a naive approach? Is there any danger that my code will try to add to the _gaq style queue <em>AFTER</em> fbAPILoadedCallback() has already been called? </p>\n"}]}
{"total":44785,"page":20,"pagesize":100,"questions":[{"tags":["c#","asp.net-mvc","url-routing","t4mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12904265,"title":"T4MVC Optional Parameter Inferred From Current Context","body":"<p>I have read the other post about this at <a href=\"http://stackoverflow.com/questions/11566207/t4mvc-optionalparameter-values-implied-from-current-context\">T4MVC OptionalParameter values implied from current context</a> and I am using the latest T4MVC (2.11.1) which is suppose to have the fix in. I even checked checked to make sure that it's there -- and it is.</p>\n\n<p>I am still getting the optional parameters filled in based on the current context.</p>\n\n<p>For example: Let's say I have a list that is by default ordered by a person's last name. I have the option to order by first name instead with the URL</p>\n\n<pre><code>http://localhost/list/stuff?orderby=firstname\n</code></pre>\n\n<p>When I am in that page, I want to go back to order by first name with the code:</p>\n\n<pre><code>@Html.ActionLink(\"order by last name\", MVC.List.Stuff(null))\n</code></pre>\n\n<p>the link I wanted was simply</p>\n\n<pre><code>http://localhost/list/stuff\n</code></pre>\n\n<p>without any parameters to keep the URL simple and short - invoking default behaviors within the action. But instead the <strong>orderby</strong> is kept and the url is still</p>\n\n<pre><code>http://localhost/list/stuff?orderby=firstname\n</code></pre>\n\n<p>Any help would be great. I know that in the most general cases, this does remove the query parameter - maybe I do have a specific case where it was not removed. I find that it only happens when I have the URL inside a page that I included with RenderPartial.</p>\n\n<p>My actual code is</p>\n\n<pre><code>&lt;li&gt;@Html.ActionLink(\"Recently Updated\",  MVC.Network.Ticket.List(Model.UI.AccountId, \"LastModifiedDate\", null, null, null, null, null))&lt;/li&gt;\n&lt;li&gt;@Html.ActionLink(\"Recently Created\",  MVC.Network.Ticket.List(Model.UI.AccountId, \"CreatedDate\", null, null, null, null, null))&lt;/li&gt;\n&lt;li&gt;@Html.ActionLink(\"Most Severe\",       MVC.Network.Ticket.List(Model.UI.AccountId, \"MostSevere\", null, null, null, null, null))&lt;/li&gt;\n&lt;li&gt;@Html.ActionLink(\"Previously Closed\", MVC.Network.Ticket.List(Model.UI.AccountId, \"LastModifiedDate\", null, \"Closed\", null, null, null))&lt;/li&gt;\n</code></pre>\n\n<p>the problem happens when someone clicks Previously Closed and and go to <strong>?status=closed</strong>. When they click Recently Updated, which I want the status parameter gone (passed a null). But ?status=closed stays in the generated url.</p>\n\n<p>Any insight would be greatly appreciated.</p>\n\n<p><strong>Update 10/16/12</strong></p>\n\n<p>the code:</p>\n\n<pre><code>@html.action(\"Profile\", MVC.Profile.Index())\n</code></pre>\n\n<p>generated the url:</p>\n\n<pre><code>http://localhost:55059/network/ticket/14441327-128b-e111-af72-0050569e0924?Controller=profile&amp;Action=index\n</code></pre>\n\n<p>This only happens on a specific page. This is pretty dangerous actually... </p>\n"},{"tags":["asp.net-mvc","flash","actionscript-3","ioerror"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2703,"score":0,"question_id":1083469,"title":"What do IO Error and Stream Error mean (Flash)","body":"<p>I'm trying to do an http post from flash on my website to a method in a controller (My site is on Asp.Net MVC) and I'm getting this error: </p>\n\n<p>Error #2044: Unhandled ioError:. text=Error #2032: Stream Error. URL: <a href=\"http://www.mysite.com/Home/DoSomething\" rel=\"nofollow\">http://www.mysite.com/Home/DoSomething</a>\n    at Main/postToMyWebsite()</p>\n\n<p>Any ideas of why these errors happen and how to prevent them?</p>\n\n<p>Please let me know if you require any more info</p>\n\n<p>Thanks,<br/>\nMatt</p>\n"},{"tags":["asp.net","ajax","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":158,"score":0,"question_id":9013268,"title":"Ajax action URL to a controller inside a partial view","body":"<p>I have a partial view which has dual list boxes and four buttons; exactly like this \n<a href=\"http://www.meadmiracle.com/dlb/DLBPlugin.aspx\" rel=\"nofollow\">http://www.meadmiracle.com/dlb/DLBPlugin.aspx</a></p>\n\n<p>Now I want to reuse this partial view all throughout the site and every time a user clicks on the buttons to move things in and out of the list, I want this to be persisted in the database via Ajax, I am making an Ajax call using JQuery; this poses a difficulty because the URL of the Ajax call will be different based on the controller that is responding to the call!</p>\n\n<pre><code>$.ajax({\n        type: \"POST\",\n        url: '@Url.Action(\"######HOW TO FIGRE OUT WHICH CONTROLLER #######\")',\n        success: function (data) {\n    //Show some message to the user\n        }\n    });\n</code></pre>\n\n<p>Now how do I determine the URL? it will be dynamic, it will be based on the controller that is responding to the initial Index page.</p>\n\n<p>e.g.: if I am in the Cities or Towns page, the user moves Cities and Towns to the list boxes, how do I know it’s the CityController ajax action or the TownController ajax action, how would we know this in the partial view where to post for the ajax call?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","asp.net-mvc-2"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1556,"score":5,"question_id":1600961,"title":"error running asp.net mvc 2 project out of the box in vs 2010","body":"<p>i created a new solution and it builds fine targeting framework 4.0 but when i run it, my browser comes up saying:</p>\n\n<p><strong>The resource cannot be found.\nDescription: HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. \nRequested URL: /</strong></p>\n\n<p>any ideas on how to debug this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","remote-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12925330,"title":"Remote Validation OnBlur and Empty String","body":"<p>I have a view model with remote validation enabled. In my view I also disabled OnKeyUp</p>\n\n<pre><code>    $(function() {\n        $.validator.setDefaults({ onkeyup: false });\n    })\n</code></pre>\n\n<p>But if I focus on the text box, and move the focus to another control the remote validation is not fired at all.</p>\n\n<p>Is there a way I can ask remote validation to fire when I configured it to onBlur and empty string?</p>\n"},{"tags":["asp.net-mvc","razor","partial-views","sections"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":5991,"score":7,"question_id":5041432,"title":"Mvc 3 Razor : Using Sections for Partial View?","body":"<p>I defined a section in partial view and i want to specify the content of section from view.\nBut i can't figure out a way . In asp.net user controls , we can define asp:placeholders , and\nspecify the content from aspx where user control lies. I'll be glad for any suggestion.</p>\n\n<p>Thanks</p>\n\n<p>[edit]\nhere is the asp.net user control and i want to convert it to razor partial view</p>\n\n<p>user control</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" AutoEventWireup=\"true\" CodeFile=\"SpryListView.ascx.cs\" Inherits=\"SpryListView\" %&gt;\n&lt;div spry:region=\"&lt;%=this.SpryDataSetName%&gt;\" id=\"region&lt;%=this.ID%&gt;\" style=\"overflow:auto;&lt;%=this.DivStyle%&gt;\" &gt;\n&lt;table class=\"searchList\" cellspacing=\"0\" style=\"text-align:left\" width=\"100%\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;asp:PlaceHolder ID=\"HeaderColumns\" runat=\"server\"&gt;&lt;/asp:PlaceHolder&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>user control code</p>\n\n<pre><code>    public partial class SpryListView : System.Web.UI.UserControl\n{\n    private string spryDataSetName ;\n    private string noDataMessage = \"Aradığınız kriterlere uygun kayıt bulunamadı.\";\n    private bool callCreatePaging;\n    private string divStyle;\n    private ITemplate headers = null;\n    private ITemplate body = null;\n\n    [TemplateContainer(typeof(GenericContainer))]\n    [PersistenceMode(PersistenceMode.InnerProperty)]\n    public ITemplate HeaderTemplate\n    {\n        get\n        {\n            return headers;\n        }\n        set\n        {\n            headers = value;\n        }\n    }\n\n    [TemplateContainer(typeof(GenericContainer))]\n    [PersistenceMode(PersistenceMode.InnerProperty)]\n    public ITemplate BodyTemplate\n    {\n        get\n        {\n            return body;\n        }\n        set\n        {\n            body = value;\n        }\n    }\n\n    public string DivStyle\n    {\n        get { return divStyle; }\n        set { divStyle= value; }\n    }\n\n    public string NoDataMessage\n    {\n        get { return noDataMessage; }\n        set { noDataMessage = value; }\n    }\n\n    public string SpryDataSetName\n    {\n        get { return spryDataSetName; }\n        set { spryDataSetName = value; }\n    }\n\n    public bool CallCreatePaging\n    {\n        get { return callCreatePaging; }\n        set { callCreatePaging = value; }\n    }\n\n    void Page_Init()\n    {\n        if (headers != null)\n        {\n            GenericContainer container = new GenericContainer();\n            headers.InstantiateIn(container);\n            HeaderColumns.Controls.Add(container);\n\n            GenericContainer container2 = new GenericContainer();\n            body.InstantiateIn(container2);\n            BodyColumns.Controls.Add(container2);\n        }\n    }\n\n    public class GenericContainer : Control, INamingContainer\n    {\n        internal GenericContainer()\n        {\n\n        }\n\n    }\n\n    protected void Page_Load(object sender, EventArgs e)\n    {\n\n    }\n}\n</code></pre>\n\n<p>aspx</p>\n\n<pre><code>&lt;spry:listview SpryDataSetName=\"dsOrders\" CallCreatePaging=\"true\" runat=\"server\" ID=\"orderListView\"&gt;\n    &lt;HeaderTemplate&gt;\n        &lt;th&gt;&amp;nbsp;&lt;/th&gt;\n        &lt;th&gt;SİPARİŞ TARİHİ&lt;/th&gt;\n        &lt;th style=\"text-align:right\"&gt;GENEL TOPLAM&lt;/th&gt;\n        &lt;th style=\"text-align:right\"&gt;KDV&lt;/th&gt;\n        &lt;th style=\"text-align:right\"&gt;NET TOPLAM&lt;/th&gt;\n    &lt;/HeaderTemplate&gt;  \n &lt;/spry:listview&gt;\n</code></pre>\n\n<p>[edit]</p>\n\n<p>i exactly want to do this in mvc 3 razor partial view</p>\n"},{"tags":["asp.net-mvc","nuget-package","securityexception","newrelic-rpm"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12922918,"title":"New Relic Azure Nuget Package Security Exception","body":"<p>I'm building an ASP.NET MVC 4 application and I recently installed a NuGet package for easing the process of running New Relic through ASP.NET (here's a link to the package on GitHub <a href=\"https://github.com/mikecousins/newrelicazurenuget\" rel=\"nofollow\">https://github.com/mikecousins/newrelicazurenuget</a>) but it didn't work. When I uninstalled it, however, my application will no longer work under a Medium trust level.</p>\n\n<p>Here's a stack of the Security Exception I get:</p>\n\n<pre><code> [SecurityException: Request failed.]\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +161\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass39.&lt;BeginInvokeActionMethodWithFilters&gt;b__33() +120\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4f.&lt;InvokeActionMethodFilterAsynchronously&gt;b__49() +452\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass37.&lt;BeginInvokeActionMethodWithFilters&gt;b__36(IAsyncResult asyncResult) +15\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass2a.&lt;BeginInvokeAction&gt;b__20() +34\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass25.&lt;BeginInvokeAction&gt;b__22(IAsyncResult asyncResult) +229\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1d.&lt;BeginExecuteCore&gt;b__18(IAsyncResult asyncResult) +28\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4.&lt;MakeVoidDelegate&gt;b__3(IAsyncResult ar) +15\n   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +53\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4.&lt;MakeVoidDelegate&gt;b__3(IAsyncResult ar) +15\n   System.Web.Mvc.&lt;&gt;c__DisplayClass8.&lt;BeginProcessRequest&gt;b__3(IAsyncResult asyncResult) +42\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass4.&lt;MakeVoidDelegate&gt;b__3(IAsyncResult ar) +15\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +1694\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +465\n</code></pre>\n\n<p>I don't know where any of that is coming from, only that the problem didn't exist until I tried to use the package.</p>\n\n<p>Any help on what's causing this and how to fix it would be much appreciated.</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>EDIT: This only happens when I publish the site to my local IIS and not if I just debug through VS. The trust level is just set in Web.Config. Is there any way to force the trust level while debugging so when this error pops up I might get better code hinting?</p>\n"},{"tags":["asp.net","asp.net-mvc","caching",".net-4.0","asp.net-mvc-3"],"answer_count":8,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":663,"score":6,"question_id":4929528,"title":"Strategies for \"Pre-Warming\" an ASP.NET Cache","body":"<p>I have an ASP.NET MVC 3 / .NET Web Application, which is <em>heavily</em> data-driven, mainly around the concept of \"Locations\" (New York, California, etc).</p>\n\n<p>Anyway, we have some pretty busy database queries, which get cached after they are finished.</p>\n\n<p>E.g:</p>\n\n<pre><code>public ICollection&lt;Location&gt; FindXForX(string x)\n{\n   var result = _cache.Get(x.ToKey()) as Locaiton; // try cache\n\n   if (result == null) {\n      result = _repo.Get(x.ToKey()); // call db\n      _cache.Add(x.ToKey(), result); // add to cache\n   }\n\n   return result;\n}\n</code></pre>\n\n<p>But i don't want to the unlucky first user to be waiting for this database call.</p>\n\n<p>The database call can take anywhere from 40-60 seconds, well over the default timeout for an ASP.NET request.</p>\n\n<p>I want to \"pre-warm\" these calls for certain \"popular\" locations (e.g New York, California) when my app starts up, or shortly after.</p>\n\n<p>I don't want to simply do this in <strong>Global asax</strong> (Application_Start), because the app will take too long to start up. (i plan to pre-cache around 15 locations, so that's a few minutes of work).</p>\n\n<p>Is there any way i can fire off this logic asynchronously? Maybe a service on the side is a better option?</p>\n\n<p>The only other alternative i can think of is have an <strong>admin page</strong> which has buttons for these actions. So an administrator (e.g me) can fire off these queries once the app has started up. That would be the easiest solution.</p>\n\n<p>Any advice?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12924475,"title":"Redirecting to different Views in MVC","body":"<p>I have a couple of HTML files and I want to include them in my MVC project.\nI want to get the result as follows:</p>\n\n<pre><code>www.Test.com/Products/\n\nwww.Test.com/Products/Drinking/\nwww.Test.com/Products/Drinking/Product1\nwww.Test.com/Products/Drinking/Product2\nwww.Test.com/Products/Drinking/Product3\n\n\nwww.Test.com/Products/Cleaning/\nwww.Test.com/Products/Cleaning/Product1\nwww.Test.com/Products/Cleaning/Product2\nwww.Test.com/Products/Cleaning/Product3\n\nwww.Test.com/Products/SkinCare/\nwww.Test.com/Products/SkinCare/Product1\nwww.Test.com/Products/SkinCare/Product2\nwww.Test.com/Products/SkinCare/Product3\n</code></pre>\n\n<p>What is the best way to create my controller and how to put my files in nested views?\nor any other solution?</p>\n"},{"tags":["asp.net-mvc","content-management-system"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":4702939,"title":"What db structure fits for site builder","body":"<p>I need to build web application that will do:</p>\n\n<ol>\n<li><p>build web pages.</p>\n\n<ul>\n<li>build template for page.</li>\n</ul></li>\n<li><p>add module(by module I mean ContacUs form, Search, Billing System...). Each module can be constructed by submodules or diveded to submodules</p></li>\n<li><p>build module(add form, textbox, button...) and that all entered data by user could be saved in db</p></li>\n</ol>\n\n<p>Can you advise me a DB structure that will contain it all</p>\n\n<p>I looked some cms db, but it's NOT this.\nPlease, don't ask why I mess with it. I just need to build it.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","session-cookies"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":11993552,"title":"\"User already logged\" HttpContext or Request DB","body":"<p>So, im working in a huge .NET MVC 3 system. As many users could be logged in at same time. I was just writting a way of \"hey there's still someone logged with this key\" with HttpContext. But, is this the best practice ? is it better to Query DB ?</p>\n\n<p>what i wrote:</p>\n\n<pre><code>     MvcApplication.SessionsLock();\n\n        if (!force &amp;&amp; MvcApplication.Sessions.Values.Any(p =&gt; p.ID.Equals(acesso.id_usuario.ToString(CultureInfo.InvariantCulture)) &amp;&amp; p.Valid))\n            throw new BusinessException(\"There's another user logged with this key. Continue ?\");\n\n     MvcApplication.SessionsUnlock();\n</code></pre>\n\n<p>our I can query my DB.. maybe cookies ? any ideas would be appreciated</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","layout","razor","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":12923456,"title":"MVC layout not being found","body":"<p>I have an MVC 3 application that has a default view and a second view, which I will refer to as SecondView.  SecondView has a corresponding controller, SecondViewController.</p>\n\n<p>SecondViewController.cs contains two procedures: <code>Index()</code> and <code>LoadSecondView(id)</code>, both return <code>View(\"SecondView\")</code>.</p>\n\n<p>SecondView.cshtml consists of:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"SecondView\";\n    Layout = \"~/Views/_MasterLayout.cshtml\";\n}\n\n&lt;h2&gt;Second View&lt;/h2&gt;\n</code></pre>\n\n<p>If my main index.cshtml calls window.open(\"SecondView\"), then the page loads as expected, using the layout that is in Views/_MasterLayout.cshtml.</p>\n\n<p>However, if it calls window.open(\"SecondView/LoadSecondView/id-parameter-string\"), then _MasterLayout thinks the \"current directory\" is /SecondView/LoadSecondView rather than /, and all of the links to (e.g.) images now point to the wrong place, so the entire layout is ignored.  (The same thing happens if LoadSecondView does not take any parameters, and the call URL is just \"SecondView/LoadSecondView\".)</p>\n\n<p>Is there a way to call a procedure (other than \"index\") in a controller that would then load a view that would look in the correct place for layout?</p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12919590,"title":"How to solve \"Specified cast is not valid\" error when using linq query with multiple joins?","body":"<p>I'm having an issue where I'm trying to construct a Linq query in my repository that contains multiple joins from different tables in a database and then return this as an object for my controller to display. The error that I'm getting is: \"Specified cast is not valid.\"</p>\n\n<p>The problem part seems to be when I try to pass the object from my query and I'm not really sure how to solve this. (I'm still relatively new to web development and trying to learn the basics).</p>\n\n<p>Below is the code in my repository:</p>\n\n<pre><code>public ListingModel GetListing(int listingId)\n{\n        var query = from listing in listingsTable\n                    where listing.ListingID == listingId\n\n                    join feature\n                    in featuresTable on listing.ListingID equals feature.ListingID into features\n                    from f in features.DefaultIfEmpty()\n\n                    join avail\n                    in availabilityTable on listing.ListingID equals avail.ListingID into availability\n                    from a in availability.DefaultIfEmpty()\n\n                    join image\n                    in imageTable on listing.ListingID equals image.ListingID into images\n                    from i in images.DefaultIfEmpty()\n\n                    select new ListingModel\n                    {\n                        Listing = listing,\n                        Features = features,\n                        Availability = availability,\n                        Images = images\n                    };\n\n        return query.FirstOrDefault();\n}\n</code></pre>\n\n<p>If it's needed, here's the ListingModel class:</p>\n\n<pre><code>public class ListingModel\n{\n    public Listing Listing { get; set; }\n    public IEnumerable&lt;Feature&gt; Features { get; set; }\n    public IEnumerable&lt;Availability&gt; Availability { get; set; }\n    public IEnumerable&lt;Image&gt; Images { get; set; }\n}\n</code></pre>\n\n<p>When I try the query in LinqPad it works fine and returns the data exactly how I'd want it, so it seems to be erroring when I try to pass the object back. I've tried a few things with this and every time I seem to be getting the same error; I'm having real difficulty pinpointing what's causing it. Thanks in advance for any help given.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","conditional-comments","asp.net-optimization","bundling-and-minification"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":126,"score":0,"question_id":12865939,"title":"MVC4 bundling/minification with IE conditional comments","body":"<p>I am trying to use MVC4's new \"bundling and minification\".</p>\n\n<p>For IE conditional comments, I'm still doing it the old way: <code>&lt;!--[if lt IE 9]&gt;&lt;link href=.../&gt;&lt;![endif]--&gt;</code> or <code>&lt;!--[if lt IE 9]&gt;@Styles.Render(\"~/foo\")&lt;![endif]--&gt;</code> but I don't seem to get the automatic debug/release handling.</p>\n\n<p>Is there a built-in way to do this? How are others doing this?</p>\n\n<p>EDIT:<br>\nAlso it would be great to be able to include <code>&lt;noscript&gt;</code> tags inside the rendered output (used for fallbacks).</p>\n"},{"tags":["javascript","asp.net-mvc","razor","html.dropdownlist"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12903426,"title":"How do I add items to multiple drop down lists at the same time with Javascript in Razor?","body":"<p>I'm creating an MVC form, and I have multiple checkboxes and two drop down lists. I have figured out how to populate the first DDL based on what boxes are checked (i.e. empty at the beginning, checking boxes fills the items). However, I want to add another DDL that has the same items and populates in the same manner. My code looks like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function checkedToggle(value, checked) {\n        x = document.getElementById(\"filter1\");\n        y = document.getElementById(\"filter2\");\n        if (checked == true) {\n            var option = document.createElement(\"option\");\n            option.text = value;\n            x.add(option, null);\n            y.add(option, null);\n        }\n        else {\n            for (i = 0; i &lt; x.length; i++) {\n                if (x.options[i].value == value) {\n                    x.remove(i);\n                    y.remove(i);\n                }\n            }\n        }\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>The else statement obviously removes an item from the list once you uncheck the box.</p>\n\n<p>Now, when you click a check box, rather than adding the item to both lists, it only adds to the second one, and I'm not exactly sure why. Any advice?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-4","asp.net-optimization","bundling-and-minification"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12871325,"title":"MVC4 bundle {version} wildcard chokes on non-numeric versioning","body":"<p>As per <a href=\"http://stackoverflow.com/a/12041931/1711500\">MS bundling dev</a> the <code>{version}</code> wildcard is a regex for <code>(\\d+(?:.\\d+){1,3})</code>. This differentiates between:</p>\n\n<pre><code>jquery-1.8.2.js\njquery-ui-1.9.0.js\n</code></pre>\n\n<p>But because of non-numeric numbering (<code>#.#.#pre</code>) it chokes on:  </p>\n\n<pre><code>html5shiv-3.6.2pre.min.js\nhtml5shiv-printshiv-3.6.2pre.min.js\n</code></pre>\n\n<p>So I'm doing this: <code>html5shiv-3*</code> and <code>html5shiv-printshiv-*</code>. But of course this means I must update the bundles when the scripts change.</p>\n\n<p>I just took html5shiv as a simple example. This problem is widespread as inclusion of \"pre\", \"beta\", \"-a\", \"-alpha\", etc., is common. The solution is to rename the files manually, but then it's not automated via nuget.</p>\n\n<p>Am I doing something wrong?</p>\n"},{"tags":["iphone","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12917805,"title":"Form submit not always passing button value","body":"<p>I'm working on the <strong>ASP.NET MVC4 Mobile Application</strong>.</p>\n\n<p>Problem is that background code behaves different when application is tested on mobile based web browsers and windows or mac based web browsers. Here are the details:</p>\n\n<p>I have 4 buttons:</p>\n\n<pre><code>&lt;input type=\"submit\" name=\"actionButton\" value=\"START\" id=\"a1\" /&gt;\n&lt;input type=\"submit\" name=\"actionButton\" value=\"BACK\" id=\"a2\" /&gt;\n&lt;input type=\"submit\" name=\"actionButton\" value=\"NEXT\" id=\"a3\" /&gt;\n&lt;input type=\"submit\" name=\"actionButton\" value=\"FINISH\" id=\"a4\" /&gt;\n</code></pre>\n\n<p>And in my controller i have this:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(SurveyModel model, string actionButton)\n</code></pre>\n\n<p>When i test this on the <strong>windows</strong> or <strong>mac</strong> based <strong>browsers</strong> it works fine. START, BACK, NEXT, FINISH values are passed to the actionButton parameter when FORM is submitted and i can handle them without any problems.</p>\n\n<p>When i test this on the <strong>iPhone</strong>, and submit the form by clicking on the one of the buttons above, sometimes the actionButton parameter is empty. Anyone had a same experience?</p>\n"},{"tags":["c#","asp.net-mvc","form-validation","dataannotations"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12918099,"title":"Some Required fields not working on ViewModel MVC3","body":"<p>Controller Action:</p>\n\n<pre><code> [AjaxRequestOnly, HttpPost, Authorize]\n    public ActionResult AddCreditCard(CustomerCreditCardModelView cc) {\n        if (!ModelState.IsValid) {\n            Response.StatusCode = 400;\n            return Content(Newtonsoft.Json.JsonConvert.SerializeObject(ModelState.Values.SelectMany(v =&gt; v.Errors).Select(e=&gt;e.ErrorMessage)));\n        }\n        // .... do something ...        \n    }\n</code></pre>\n\n<p>ModelView:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\nusing System.Linq;\nusing System.Web;\nusing CheckoutVC.CheckoutServiceReference;\nusing Newtonsoft.Json;\n\npublic class CustomerCreditCardModelView {\n\n    [Display(Name = \"Número\")]\n    [Required(ErrorMessage = \"El Número es requerido\")]\n    [StringLength(20, MinimumLength = 12, ErrorMessage = \"El número parece ser incorrecto\")]\n    [JsonIgnore, ScriptIgnore]\n    public string CardNumber { get; set; }\n\n    [Display(Name = \"Código de seguridad\")]\n    [Required(ErrorMessage = \"El Código de seguridad es requerido\")]\n    public string CardSecurityCode { get; set; }\n\n    [Display(Name = \"Nombre en la tarjeta\")]\n    [Required(ErrorMessage = \"El Nombre en la tarjeta es requerido\")]\n    public string NameOnCard { get; set; }\n\n    [Display(Name = \"Dirección de cobro\")]\n    [Required(ErrorMessage = \"La Dirección de cobro es requerida\")]\n    public string BillingAddress { get; set; }\n\n    [Display(Name = \"Mes de vencimiento\")]\n    [Required(ErrorMessage = \"El Mes de vencimiento es requerido\")]\n    public int ExpirationMonth { get; set; }\n\n    [Display(Name = \"Año de vencimiento\")]\n    [Required(ErrorMessage = \"El Año de vencimiento es requerido\")]\n    public int ExpirationYear { get; set; }\n\n    [Display(Name = \"Documento\")]\n    [Required(ErrorMessage = \"El documento es requerido\")]\n    public string Document { get; set; }\n\n    [Display(Name = \"Tipo de tarjeta\")]\n    public int IdCreditCard { get; set; }\n\n    public int IdCustomer { get; set; }\n    public bool IsDeleted { get; set; }\n    public int IdCustomerCreditCard { get; set; }\n    public CustomerCreditCardModelView() {\n\n    }\n</code></pre>\n\n<p>Request Payload:</p>\n\n<pre><code>{\"idCreditCard\":1,\"nameOnCard\":\"fdsa\",\"billingAddress\":\"fdsa\"}\n</code></pre>\n\n<p>Request Response:</p>\n\n<pre><code>[\"El Número es requerido\",\"El Código de seguridad es requerido\",\"El documento es requerido\"]\n</code></pre>\n\n<p>As you can see, everything works perfectly except that int ExpirationMonth and int ExpirationYear should return a validation error (required) but they doesnt.</p>\n\n<p>Actually, modelstate have only 6 keys.... </p>\n\n<p>What can be causing this behaviour? I want to expirationMonth and expirationYear takes into consideration the [Required] DataAnnotation attribute.</p>\n\n<p>Pretty sure is the same happening here: <a href=\"http://stackoverflow.com/questions/12359334/mvc-model-validation-required-not-working-on-all-fields\">mvc model validation required not working on all fields</a></p>\n\n<p>EDIT: Reading the comments on that question see that the problem was the using, not my case tho. I included the using part.</p>\n"},{"tags":["c#","asp.net-mvc","optimization","elasticsearch"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12917579,"title":"Should Elasticsearch be Installed on the Same Server as Site?","body":"<p>I'm developing an ASP.NET MVC 4 commerce site but since my background is in front-end web dev with HTML/CSS/Javascript and C# with XNA all this server and database business is doing my head in.</p>\n\n<p>At the moment the site uses an elasticsearch Index with NEST to perform searches for products since the products db is huge and I like the smart queries elasticsearch offers. And that all works great on my local testing environment.</p>\n\n<p>My question is: is it generally a good idea to have your elasticsearch client and indices stored on a separate host from the actual site or is it OK to have it on the same server?<br>\nI understand there's the issue of space at play here, but I've heard elasticsearch queries also tie up server resources that could be better spent handling other tasks like the impending flood of payments that are sure to come through?</p>\n"},{"tags":["c#","asp.net-mvc","json","dynamicobject"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":12922746,"title":"Read values from a Dynamic Object C#","body":"<p>I'm trying to read values from System.Web.Helpers.DynamicJsonObject. I can see the values in the debugger but I can't figure out how to access them. I have tried this</p>\n\n<p><code>item.GetType().GetProperty(\"batch_id\").GetValue(item, null);</code> </p>\n\n<p>but when I try that I get this response in the debugger \"item.GetType().GetProperty(\"batch_id\")' is null\"</p>\n\n<p>I have attached a picture from my solution\n<img src=\"http://i.stack.imgur.com/kC4v4.jpg\" alt=\"enter image description here\"></p>\n\n<p>Thank you,\n-Tesh</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":285,"score":0,"question_id":5446867,"title":"How to validate manually at client in Asp.net MVC 3?","body":"<p>I want to validate form when click client button out of form, i tryed some method but all failed,help please?\nsource code:</p>\n\n<pre><code>@model MvcTest.Models.Movie\n@{\n    ViewBag.Title = \"Home Page\";\n    Html.EnableClientValidation(true);\n}\n&lt;script src=\"../../Scripts/jquery-1.4.4.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery.validate.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery.validate.unobtrusive.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n@using (Html.BeginForm(\"TestValidate\", \"Home\", FormMethod.Post, new { id = \"tf\" }))\n{\n    @Html.LabelFor(m =&gt; m.Title)\n    @Html.EditorFor(m =&gt; m.Title)\n    @Html.ValidationMessageFor(m =&gt; m.Title)\n}\n&lt;a onclick=\"test(event)\" href=\"#\"&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function test() {\n          //How to write here?\n    }\n&lt;/script&gt;\n\nnamespace MvcTest.Models\n{\n    public class Movie\n    {\n        public int ID { get; set; }\n\n        [Required(ErrorMessage = \"Error Message Test,I want you\")]\n        public string Title { get; set; }    \n    }\n    public class MovieDBContext : DbContext { \n        public DbSet&lt;Movie&gt; Movies { get; set; } \n    }\n}\n</code></pre>\n\n<hr>\n\n<p>I invoked valid but ,it always warning the object form don't support this methord \"validate()\"</p>\n\n<pre><code>$(document).ready(function () {\n\n        $(\"#myform\").validate();\n        $(\"test\").click(function() {\n          alert(\"Valid: \" + $(\"#myform\").valid());\n          return false;\n        });\n  });\n</code></pre>\n\n<p>I have import js like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://dev.jquery.com/view/trunk/plugins/validate/lib/jquery.delegate.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"http://dev.jquery.com/view/trunk/plugins/validate/jquery.validate.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>or these:</p>\n\n<pre><code>&lt;script src=\"../../Scripts/jquery.validate.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery.validate.unobtrusive.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":7216494,"title":"MVCControlsToolkit and Validation","body":"<p>Today I installed the <code>MVC3ControlsToolkit</code> from <a href=\"http://nuget.org/packages/MVC3ControlsToolkit\" rel=\"nofollow\">NuGet</a>, and proceeded to add a a <code>DateTimeFor</code> control to a Scaffolding generated page. I only changed one line of code, but the page was no longer visible, and an exception was thrown, saying validation was happening twice.</p>\n\n<p>If I set <code>UnobtrusiveJavaScriptEnabled</code> to false in my <code>Web.config</code>, I can view the page. Funny thing is that if I restore the page to it's previous state (ie. default config) the error persists.</p>\n\n<p>The error I get is: <em>\"Validation type names in unobtrusive client validation rules must be unique. The following validation type was seen more than once: required\"</em></p>\n\n<p>If anyone can shed some light on this, I'd really appreciate it.</p>\n"},{"tags":["asp.net-mvc","web-services"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12923168,"title":"Wrap old asmx calls in WCF Service","body":"<p>so you're tasked with making calls to some old asmx web service.  Have you normally wrapped those calls into a WCF service as a) I want to consume WCF not asmx going forward from any app that needs to make call to that asmx service and b) having a WCF layer wrapping calls allows me to swap anything out in terms of not being tightly bound to that one old web service or possible other asmx web services for that matter.</p>\n\n<p>To me it seems the only way to go is to wrap calls to old asmx in WCF, don't use asmx directly.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","html5","c#-4.0"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":1896,"score":0,"question_id":9840337,"title":"MVC Validation for US phone number (000)-000-0000 or 000-000-0000","body":"<p>How can you annotate phone number data annotation for phone number validation?</p>\n\n<p>Is there way to allow this format in front-end like using HTML5 pattern? I know that there is data type for phone number in both HTML5 and MVC3 but was wondering if we can format that in something like (000)-000-0000 or 000-000-0000 so user can not enter more than 10 digits and if he enters a phone it displays in above formats. I tried this so far:</p>\n\n<pre><code>    [Required]\n    [DataType(DataType.PhoneNumber)]\n    [RegularExpression(@\"^(\\d{10})$\", ErrorMessage = \"Please enter proper phone number.\")]\n    [Display(Name = \"phone\")]\n    public string Phone { get; set; }\n</code></pre>\n"},{"tags":["jquery","ajax","asp.net-mvc","telerik","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12920461,"title":"Jquery Ajax throw error before ActionResult return","body":"<p>I´m fighting a weird problem which is probably due to my inexperience with ajax.  For some reason my Ajax function fires my error alert dialog even before my ActionResult returns it PartialView.</p>\n\n<p>Can any1 spot why my ajax function throws error, or even what I´m doing wrong?</p>\n\n<p><strong>My Jquery</strong></p>\n\n<pre><code>function GetSalesLinesByArea(e) {\nvar areaId = treeView().getItemValue(e.item);\n$('#HiddenAreaId').val(areaId);\nvar url = '/SalesLine/IndexPartial/';\n$.ajax({\n    type: \"GET\",\n    dataType: \"html\",\n    url: url,\n    data: { areaNodeId: areaId },\n    success: function (data) {\n        $('#HuntingGrid').html(data);\n        alert(\"success!\");\n    },\n    error: function () {\n        alert(\"error!\");\n    }\n  });\n}\n</code></pre>\n\n<p><strong>My view Index.cshtml</strong></p>\n\n<pre><code>@using Telerik.Web.Mvc.UI\n@using Veidivefur.Model.Entity\n@model Veidivefur.ViewModels.SalesLineViewModel\n@{\n    ViewBag.Title = \"Hlunnindi\";\n}\n\n&lt;div id=\"HuntingGrid\"&gt;\n    @{ Html.RenderPartial(\"IndexPartial\"); }\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>My partialview IndexPartial.cshtml</strong></p>\n\n<pre><code>@using Telerik.Web.Mvc.UI\n@model Veidivefur.ViewModels.SalesLineViewModel\n\n&lt;div&gt;\n    @(Html.Telerik().Grid(Model.SalesLines)\n        .Name(\"Grid\")\n        //More Telerik stuff\n&lt;/div&gt;\n</code></pre>\n\n<p>*<em>My Index ActionResult in Controller *</em></p>\n\n<pre><code>    public ActionResult Index()\n    {\n        List&lt;CombinedSalesLine&gt; combinedSalesLines =\n            GenerateSalesLines(_salesLineModel.FindAllSalesLinesLargerThanToday(0));\n\n        return View(new SalesLineViewModel(combinedSalesLines));\n    }\n</code></pre>\n\n<p>*<em>My IndexPartial ActionResult in Controller *</em></p>\n\n<pre><code>    public ActionResult IndexPartial(string areaNodeId)\n    {\n        int areaNodeInt = Convert.ToInt32(areaNodeId);\n\n        List&lt;SalesLine&gt; saleslines = areaNodeInt == 0 ? _salesLineModel.FindAllSalesLinesLargerThanToday(0)\n            : _salesLineModel.FindAllSalesLinesLargerThanToday(areaNodeInt);\n\n        List&lt;CombinedSalesLine&gt; combinedSalesLines = GenerateSalesLines(saleslines);\n\n        return PartialView(\"IndexPartial\", new SalesLineViewModel(combinedSalesLines));\n    }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","api","authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":798,"score":3,"question_id":1912136,"title":"Api authentication options with asp.net mvc","body":"<p>I'm looking to restrict access to controllers/actions that represent my website's api.  Only registered users who meet a certain criteria (pay accounts, not free trials) will be able to use the api.  The website currently supports forms authentication with users logging in with a username/password combination or via open id.  </p>\n\n<p>How would have the users authenticate with the api?  The api will initially be used by mobile applications (iphone, droid).  My main concern is open id support with mobile apps.</p>\n\n<p>My thoughts on available options are:</p>\n\n<ol>\n<li>Support both Username/password &amp; open id - Not sure how well iphone/droid apps can support openid authentication.</li>\n<li>Only support Username/password - force OpenId users to create un/pwd for api - Bad UX for OpenId users</li>\n<li>Use an api token - This worries me for two reasons:\n<ol>\n<li>Users would have to manually type in their api key which sucks from a UX point of view</li>\n<li>They could easily distribute/share their api key with other users and that would ruin reports/metrics.</li>\n</ol></li>\n<li>Something else that I missed?</li>\n</ol>\n"},{"tags":["asp.net-mvc","jquery-validate","asp.net-mvc-4","form-validation"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12918978,"title":"Using built in validation for records created on client","body":"<p>I have an ASP.NET MVC4 application where I'm allowing users to add 1 to many records on the client using javascript templates. It's working fine and using the right naming convention, the model binding is correctly transforming the post data into the desired collection of objects for the action method.</p>\n\n<p>My question is, is there any way to use the built in MVC validation for records added using this approach.  I've added data annotation attributes to my model but because I'm generating the html for each new record on the client I can't use the html helpers that typically make the process work.</p>\n\n<p>Obviously, I can just add the client side validation myself and let the data annotations validate on the server but I'm wondering if there's a way to take advantage of the built in validation stack for this type of approach so I can maintain all my validation logic on the server.</p>\n"},{"tags":["c#","asp.net-mvc","asynchronous"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":97,"score":0,"question_id":12915283,"title":"What about async/await in MVC?","body":"<p>the rest of our team and me created a Silverlight application. We've been using .NET 4.0. Though we already put the async/await pattern into our application (<code>Microsoft.CompilerServices.AsyncTargetingPack.Net4</code>).</p>\n\n<p>Now that MS won't put too much additional effort into Silverlight, we just thought, that we build a little HTML5/JS application - just for experimenting issues.</p>\n\n<p>So... I tried to bootstrap the application, like we did in the previous SL app. I'm using a class library, which is used in our main application, to provide all the data. To fill all the dictionaries in our context, we call some asynchronous methods, to retrieve the data from the DB. I'd like to use this lib in the MVC app, either, but I can't call those async methods, because <code>Application_Start</code> in Global.asax isn't async.</p>\n\n<p>How to achieve this?</p>\n\n<p>Alternating the library isn't a viable solution, because it's used in production code. Writing a new lib won't be a solution, too, because we'd really like to keep maintenance as small as possible.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","viewengine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12913068,"title":"View engine can't find my view","body":"<p>I am getting the following error when trying to return a ViewResult from a post action:</p>\n\n<blockquote>\n  <p>The view 'Index' or its master was not found or no view engine supports the searched locations. The following locations were searched: \n  ~/Views/Home/Index.cshtml \n  ~/Views/Shared/Index.cshtml\n  ~/Views/Home/Home.cshtml<br>\n  ~/Views/Shared/Home.cshtml\n  ~/Views/Home/Index.aspx<br>\n  ~/Views/Home/Index.ascx\n  ~/Views/Shared/Index.aspx<br>\n  ~/Views/Shared/Index.ascx\n  ~/Views/Home/Home.master<br>\n  ~/Views/Shared/Home.master\n  ~/Views/Home/Home.vbhtml<br>\n  ~/Views/Shared/Home.vbhtml</p>\n</blockquote>\n\n<p>My view is definitely recognised because it works on the GET action.</p>\n\n<p>The code that returns the ViewResult in the POST action is:</p>\n\n<pre><code>return View(\"Index\", \"Home\", Model);\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/YxQn2.png\" rel=\"nofollow\">Here is the view</a>.</p>\n\n<p>Can anybody suggest why this would not be working?</p>\n\n<p>A little more context:\n    The get action displays the view fine. The post action is actually to a different url but returns the same view. It's the post action that's causing the problem. Both GET and POST actions are on the same controller <code>HomeController</code>.</p>\n\n<p>Here's the (stripped down) controller:</p>\n\n<pre><code>public class HomeController : Controller\n{\n    [HttpGet]\n    public ActionResult Index()\n    {\n        return View(new LoginModelBase());\n    }\n\n    [HttpPost]\n    public ActionResult Login(UsernameLoginModel Model)\n    {\n        ...\n        return View(\"Index\", \"Home\", Model);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12921360,"title":"ASP MVC SelectList() Name Concatenation","body":"<p>I have the following code which works:</p>\n\n<pre><code>ViewBag.Resources = New SelectList(db1.Tbl_Resources, \"Resource_ID\", \"Resource_FirstName\")\n</code></pre>\n\n<p>I want to not only show the first name, but also the last name so I tried this:</p>\n\n<pre><code>ViewBag.Resources = New SelectList(db1.Tbl_Resources, \"Resource_ID\", \"Resource_FirstName\" + \" \" + \"Resource_LastName\")\n</code></pre>\n\n<p>However, it didn't work because it seems to look for a model property called \"<code>Resource_FirstNameResource_LastName</code>.\"  How can I concatenate these for use in the SelectList() method?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":21,"score":-1,"question_id":12912316,"title":"how to implement paypoint Gateway Hosted in asp.net MVC application","body":"<p>I am developing ASP.NET MVC application and need to implement the PayPoint Gatway Hosted Servie in My applicaiton as Payment Provider.</p>\n\n<p>I have got may reference guide for how to implement .But can't find any sample code for it.\nCan anyone implement PayPoint Gatway Hosted service for asp.net Application.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12920763,"title":"Html.LabelFor labelText with HTML","body":"<p>Is there an easy way to get this to properly output HTML?</p>\n\n<p><code>@Html.LabelFor(m =&gt; m.DisplayName, Html.Raw(Html.Partial(\"_Tooltip\", new Tooltip { Title = Model.DisplayName, Description = \"This is my test description\" }).ToString()).ToString())</code></p>\n\n<p>Currently it's returning the HTML as a string.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12907099,"title":"Strategy for Hierarchical MVC Routing","body":"<p>I am sure this has been answered somewhere else but I cannot seem to find a definitive posting anywhere.</p>\n\n<p>Most of the postings regarding hierarchical routing talks about when you want an unlimited number of tokens in the Url. My question deals more with when it does not make sense for a given Entity to exists without being associated in the context of another Entity.</p>\n\n<p>For example, I have a Contract entity along with the expected Contract controller. It has the standard Actions like Index, Edit, Create, and so on. My Urls look like</p>\n\n<pre><code>/Contracts/                   ' list all contracts\n/Contracts/Create/            ' display form to create new contract\n/Contracts/Edit/87Y5r3/       ' display form to edit contract 87Y5r3\n</code></pre>\n\n<p>Now imagine that I Order entity that must be associated with a given Contract. Using the (almost) default routing I would have Urls of</p>\n\n<pre><code>/Orders/                          ' display all orders across all contracts\n/Orders/Index/87Y5r3              ' display all orders for contract 87Y5r3\n/Orders/Create/87Y5r3             ' display form to create new order for contract 87Y5r3\n/Orders/Edit/87Y5r3/45            ' display form to edit order 45 under contract 87Y5r3\n</code></pre>\n\n<p>I can of course leave the almost default routing while tweaking it to support the additional parameters like contract number and order number.</p>\n\n<p>Or I can change my routing to show that Orders comes under Contracts in the hierarchy. As I see it, I have several paths to pursue:</p>\n\n<p>1) Have a single controller that handles both Contracts and Orders along with numerous custom routes for mapping actions to methods. This gives me Urls along the lines of</p>\n\n<pre><code>/Contracts/                        ' maps to Index action in the Contract controller\n/Contracts/Create/                 ' maps to Create action in the Contract controller\n/Contracts/Orders/                 ' maps to IndexOrders action in the Contract controller\n/Contracts/Orders/Index/87Y5r3     ' maps to IndexOrders action in the Contract controller\n/Contracts/Orders/Edit/87Y5r3/45   ' maps to EditOrders action in the Contract controller\n</code></pre>\n\n<p>While I cannot imagine any good argument for having just a single controller, I am guessing that this good also be split into a Contracts controller and an Orders controller with an appropriate route(s).</p>\n\n<p>The main point to take in is that the Contract Number is coming towards the end of the Url.</p>\n\n<p>2) Another option is the separate controllers but with the following Urls. This seems a bit more natural (logical) to me.</p>\n\n<pre><code>/Contracts/                              ' maps to Index action in the Contract controller\n/Contracts/Create/                       ' maps to Create action in the Contract controller\n/Contracts/?????/87Y5r3/Orders/Index/    ' maps to Index action in the Order controller\n/Contracts/?????/87Y5r3/Orders/Edit/45   ' maps to Edit action in the Order controller\n/Contracts/?????/All/Orders/             ' maps to Index action in the Order controller\n</code></pre>\n\n<p>In this case the contract number comes after the Contract token in the Url with the order number coming towards the end. I have identified a few issues/concerns</p>\n\n<ul>\n<li><p>How to handle Order data that goes across all Contracts. As you can see handled that with a special \"All\" token.</p></li>\n<li><p>What action do I use for the Contracts portion of the Url. By default, routing in Mvc is /{controller}/{action}/{id}.</p></li>\n</ul>\n\n<p>3) <strike>The third option I have seen posted (but do not understand enough to evaluate pros and cons) is to use RESTful API. I believe this would (could ??) resolve my second concern about what action to use for the Contract when working with Orders. The basic idea is that the action is replaced with an HTTP verb like DELETE or PUT which would only need to apply to the entity at the end of the Url.</p>\n\n<p>In this case I would end up with something like</p>\n\n<p>GET  /Contracts/                        ' maps to Index action in the Contract controller\nPOST /Contracts/Create/                 ' maps to Create action in the Contract controller\nGET  /Contracts/87Y5r3/Orders/          ' maps to Index action in the Order controller\nPUT  /Contracts/87Y5r3/Orders/45        ' maps to Edit action in the Order controller\nGET  /Contracts/All/Orders/             ' maps to Index action in the Order controller</p>\n\n<p>While RESTful may be the way to go I definitely do not know enough about it and my initial reaction is that it adds complexity and limitations (how many verbs are there???) that may limit its usefulness.\n</strike></p>\n\n<p>Based on my quick reading, going with a RESTful approach (including ASP.NET Web API as suggested by @Robotsushi below) does not really answer my question. RESTful seems to be something to be considered if my pages were requesting data via AJAX and JSON. In that sense (requesting data only) it provides an approach to Urls. However, my question is focused more on the standard MVC model where the action passes a Model to a View. At the end of the day I still need to present web pages to my users...</p>\n\n<p>Did I sum this up clearly? Any other strategies that I am missing? This has to be a fairly common scenario so I am surprised I have not found a ton of articles.</p>\n\n<p>I simplified the examples a bit but in my case I actually need to take this to a third level --- Contracts / Orders / Projects.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3531,"score":3,"question_id":9359108,"title":"MVC3:unable to retrieve metadata for my model class when i want to accesse model data from controller","body":"<p>I am new to asp.net MVC3 platform i am following the tutorial which is posted on the asp.net website:\n<a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/getting-started-with-mvc3-part1-cs\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/getting-started-with-mvc3-part1-cs</a></p>\n\n<p>But in the fifth step which i need to access my model class data from a controller i am facing some troubles, i have created model class and the context class but when i want to create a controller class using the scaffolding template(controller with read/write actions and views using entity framework) it gives me an error as below:</p>\n\n<blockquote>\n  <p>unable to retrieve metadata for 'full name of my modelclass'.\n  Configuration system failed to initialize</p>\n</blockquote>\n"},{"tags":["asp.net-mvc","entity-framework","design-patterns","repository-pattern"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12920455,"title":"How should I implement the repository pattern for complex object models?","body":"<p>Our data model has almost 200 classes that can be separated out into about a dozen functional areas. It would have been nice to use domains, but the separation isn't that clean and we can't change it. We're redesigning our DAL to use Entity Framework and <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application\" rel=\"nofollow\">most of the recommendations that I've seen</a> suggest using a Repository pattern. However, none of the samples really deal with complex object models. Some implementations that I've found suggest the use of a repository-per-entity. This seems ridiculous and un-maintainable for large, complex models. Is it really necessary to create a UnitOfWork for each operation, and a Repository for each entity? I could end up with thousands of classes. I know this is unreasonable, but I've found very little guidance implementing Repository, Unit Of Work, and Entity Framework over complex models and realistic business applications.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","validation","controller"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":10122355,"title":"How to validate a Search String using Model First approach in MVC 3?","body":"<p>I am trying to validate a search box in MVC 3 using C# , so that when a user enters nothing a message will appear in the ViewBag saying 'Please enter a Search Query'.Any help would be much appreciated.</p>\n\n<pre><code>public ViewResult Index(string sortOrder, String searchString)\n{\n   ViewBag.NamesSortParm = String.IsNullOrEmpty(sortOrder) ? \"Name desc\" : \"\";\n   ViewBag.UserSortParm = sortOrder == \"UserID\" ? \"Name\" : \"Song\";\n   var User = from s in db.User select s;\n\n   if (!String.IsNullOrEmpty(searchString))\n   {\n      User = Users.Where(s =&gt; s.Name.ToUpper().Contains(searchString.ToUpper())\n                           || s.Songs.ToUpper().Contains(searchString.ToUpper()));\n   }\n   switch (sortOrder)\n   {\n      case \"Name\":\n        Users = Users.OrderByDescending(s =&gt; s.Name);\n        break;\n      case \"Songs\":\n        Users = Users.OrderByDescending(s =&gt; s.Song);\n        break;\n      default:\n        Users = Users.OrderBy(s =&gt; s.Name);\n        break;\n   }\n\n   // ...\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","dotnetzip"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12919785,"title":"Using memorystream and DotNetZip in MVC gives \"Cannot access a closed Stream\"","body":"<p>I'm trying to create a zipfile in a MVC method using the DotNetZip components.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    public FileResult DownloadImagefilesAsZip()\n    {\n        using (var memoryStream = new MemoryStream())\n        {\n            using (var zip = new ZipFile())\n            {\n                zip.AddDirectory(Server.MapPath(\"/Images/\"));\n                zip.Save(memoryStream);\n\n                return File(memoryStream, \"gzip\", \"images.zip\");\n            }\n        }\n    }\n</code></pre>\n\n<p>When I run it I get a \"Cannot access a closed Stream\" error, and I'm not sure why.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12917293,"title":"Values in model are null or empty","body":"<p>I have this action method</p>\n\n<pre><code>[HttpPost]\npublic ActionResult CreateEsf(EsfLotDetailsModel model)\n{\n   ...\n}\n</code></pre>\n\n<p>I have two properties in this model.  One is a database POCO object and the other is a list.  In the GET equivalent of this method, these values were all populated correctly, but on post these get set to null (the POCO) and empty (the list).</p>\n\n<p>Why might this be?</p>\n\n<p>My view is here</p>\n\n<pre><code>@using UI.Helpers\n\n@model UI.Areas.Admin.Models.EsfLotDetailsModel\n\n@{\n    ViewBag.Title = \"Create Forward Lot\";\n\n}\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Content/AdminDesignTheme/js/wl_Date.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Content/AdminDesignTheme/js/wl_Time.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.mousewheel.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@{\n        &lt;script type=\"text/javascript\"&gt;\n            $(document).ready(function () {\n                var options = {\n                    dateFormat: \"dd/mm/yy\"\n                };\n                $('#Starts').wl_Date(options);\n                $('#Ends').wl_Date(options);\n                $('#startTime').wl_Time();\n                $('#endTime').wl_Time();\n            });\n        &lt;/script&gt;\n}\n\n&lt;p&gt;@Html.ActionLink(\"Back to Item List\", \"Index\",\"Inventory\")&lt;/p&gt;\n\n@Html.ValidationSummary(true, \"Please correct the errors and try again.\")\n@using (Html.BeginForm(new {model = @Model})) {\n\n    @Html.HiddenFor(model =&gt; model.Auction.InventoryReference)\n    @Html.HiddenFor(model =&gt; model.Auction.Title)\n    @Html.HiddenFor(model =&gt; model.Auction.Description)\n    &lt;fieldset&gt;\n        &lt;legend&gt;&lt;/legend&gt;\n        &lt;label&gt;ESF Lot Information&lt;/label&gt;            \n\n        &lt;section&gt;\n            @Html.LabelFor(model =&gt; model.Auction.Title)\n            &lt;div&gt; @Html.DisplayFor(model =&gt; model.Auction.Title) \n            @Html.ValidationMessageFor(model =&gt; model.Auction.Title)    &lt;/div&gt;   \n        &lt;/section&gt;\n\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.Auction.Description)\n             &lt;div&gt; @Html.DisplayFor(model =&gt; model.Auction.Description) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.Description)     &lt;/div&gt;  \n        &lt;/section&gt;\n\n        @if (HttpContextHelper.IsUserAdmin())\n        {&lt;section&gt;\n             &lt;label for=\"IsFeatured\"&gt;Is Featured &lt;i&gt;(displayed in homepage)&lt;/i&gt;&lt;/label&gt;\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.IsFeatured) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.IsFeatured)     &lt;/div&gt;  \n        &lt;/section&gt;\n        }\n        else\n        {\n            &lt;section&gt;\n             &lt;label for=\"IsFeatured\"&gt;Is Featured &lt;i&gt;(displayed in homepage)&lt;/i&gt;&lt;/label&gt;\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.IsFeatured, new { disabled = \"disabled\" }) (Contact Admin to make this a featured lot) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.IsFeatured)     &lt;/div&gt;  \n            &lt;/section&gt;\n\n        }\n\n        @if (HttpContextHelper.IsUserAdmin())\n        {&lt;section&gt;\n             @Html.Label(\"VAT Applicable\")\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.VatApplicable) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.VatApplicable)     &lt;/div&gt;  \n        &lt;/section&gt;\n        }\n        else\n        {\n            &lt;section&gt;\n             @Html.Label(\"VAT Applicable\")\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.VatApplicable, new { disabled = \"disabled\" }) (Contact Admin if it is not VATable) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.VatApplicable)     &lt;/div&gt;  \n            &lt;/section&gt;\n\n        }\n\n    &lt;/fieldset&gt;\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;&lt;/legend&gt;\n        &lt;label&gt;Date and Time&lt;/label&gt;\n\n        &lt;section&gt;\n             &lt;label&gt;Starts &lt;em&gt;(dd/mm/yy hh:mm)&lt;/em&gt;&lt;/label&gt;\n             &lt;div&gt; &lt;input type=\"text\" class=\"date\" id=\"Starts\" /&gt; \n                &lt;input type=\"text\" class=\"time\" data-connect=\"Starts\" id=\"startTime\" /&gt; \n\n             @Html.ValidationMessageFor(model =&gt; model.Auction.Starts)       &lt;/div&gt;\n        &lt;/section&gt;\n\n        &lt;section&gt;\n             &lt;label&gt;Ends &lt;em&gt;(dd/mm/yy hh:mm)&lt;/em&gt;&lt;/label&gt;\n             &lt;div&gt; &lt;input type=\"text\" class=\"date\" id=\"Ends\" /&gt; \n                   &lt;input type=\"text\" class=\"time\" data-connect=\"Ends\" id=\"endTime\" /&gt; \n\n             @Html.ValidationMessageFor(model =&gt; model.Auction.Ends)   &lt;/div&gt;    \n        &lt;/section&gt;\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.Auction.IsExtensible)\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.IsExtensible) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.IsExtensible)     &lt;/div&gt;  \n        &lt;/section&gt;\n    &lt;/fieldset&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;&lt;/legend&gt;\n        &lt;label&gt;Bid Options&lt;/label&gt;\n\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.Auction.StartingBid)\n             &lt;div&gt; @Html.TextBoxFor(model =&gt; model.Auction.StartingBid) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.StartingBid)     &lt;/div&gt;  \n        &lt;/section&gt;\n\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.Auction.Reserve)\n             &lt;div&gt; @Html.TextBoxFor(model =&gt; model.Auction.Reserve) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.Reserve)   &lt;/div&gt;    \n        &lt;/section&gt;\n\n        &lt;section&gt;\n             &lt;label&gt;Reserve Visible &lt;em&gt;(Displays as Reserve met or not met)&lt;/em&gt;&lt;/label&gt;\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.ReserveVisible) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.ReserveVisible)  &lt;/div&gt;     \n        &lt;/section&gt;\n\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.Auction.IsBidIncrementPercentual)\n             &lt;div&gt; @Html.CheckBoxFor(model =&gt; model.Auction.IsBidIncrementPercentual) \n             @Html.ValidationMessageFor(model =&gt; model.Auction.IsBidIncrementPercentual)     &lt;/div&gt;  \n        &lt;/section&gt;  \n\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.Auction.BidIncrement)\n             &lt;div&gt; @Html.TextBoxFor(model =&gt; model.Auction.BidIncrement, new { @Value = 1m })\n             @Html.ValidationMessageFor(model =&gt; model.Auction.BidIncrement)        &lt;/div&gt;\n        &lt;/section&gt;              \n\n        &lt;section&gt;\n             @Html.LabelFor(model =&gt; model.AuctionEvents)\n             &lt;div&gt; @Html.DropDownList(\"Auction\", Model.AuctionEvents, \"Select auction\", new { required = \"required\" }) \n             @Html.ValidationMessageFor(model =&gt; model.AuctionEvents)       &lt;/div&gt;\n        &lt;/section&gt;\n\n        &lt;section&gt;\n            &lt;div&gt;&lt;button&gt;Create&lt;/button&gt;&lt;/div&gt;\n        &lt;/section&gt;        \n\n    &lt;/fieldset&gt;\n}\n\n&lt;div&gt;\n    @Html.ActionLink(\"Back to Item List\", \"Index\",\"Inventory\")\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2","mono"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12919305,"title":"How to force Mono MVC3 application to show TempData in current response","body":"<p>If ASP.NET MVC2 code below shows message \"Test\" in Create controller response.</p>\n\n<p>In Mono message does not appear apper in Create view.</p>\n\n<p>Message appears in next response invoked after create.</p>\n\n<p>How to dorce Mono to show TempData value in same request like in ASP.NET ?</p>\n\n<pre><code>[HttpPost]\npublic RedirectToRouteResult Create()\n{\n TempData[\"Message\"] = \"Test\";\n return RedirectToAction(\"Index\");\n}\n\n\npublic ActionResult Index() {\n  return View();\n  }\n</code></pre>\n\n<p>Site.Master:</p>\n\n<pre><code>&lt;%@ Master Language=\"C#\" Inherits=\"System.Web.Mvc.ViewMasterPage\" %&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head runat=\"server\"&gt;\n    &lt;script src=\"&lt;%= Url.Content(\"~/Scripts/jquery/jquery-1.7.1.js\")%&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n &lt;% if (TempData[\"Message\"]!=null) {\n        %&gt;\n    $(function() {\n        setTimeout( function() {\n           showMessage ( '&lt;%= TempData[\"Message\"] as string %&gt;');\n           }, 300 );\n      });\n        &lt;% } %&gt;\n    &lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":133,"score":0,"question_id":12240883,"title":"Best way to get data from ApiController and pass it to another view?","body":"<p>So i have an ApiController set up that takes a search query, and returns JSON in this case.</p>\n\n<p>I also have a search form on my _Layout.cshtml page. When the user searches for anything, I have ajax that successfully hits my ApiController method and returns JSON, but I'm unsure what to do with it. I want to redirect to /SearchResults/ and display the results, but I can't help but feel I'm going out of my way using WebApi's and that I should just cut that out.</p>\n\n<p>Does it make sense to have hit the ApiController from my search button, then send the results to another View? How can I redirect to that other View?</p>\n\n<pre><code>$('#btnSearch').click(function () {\n            var query = $('#searchQuery').val();\n            $.ajax({\n                url: \"/api/search\",\n                data: {query : query},\n                type: 'GET',\n                dataType: 'application/json',\n                statusCode: {\n                    200: function (queryResult) {\n                        //I want to send queryResult to another view\n                    },\n                    404: function () {\n                        alert(\"failure\");\n                    }\n                }\n            });\n        });\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12919449,"title":"Url.Parameter for MvC routing for SHA2","body":"<p>I'm not sure how I should ask the question, but I am trying to route a SHA1 encryption to be accepted by the ID.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>/Home/Index/Id\n/Home/Index/A8-75-93-36-DA-4F-74-E1-E0-6B-78-98-DC-AE-FF-1F-17-CA  \n</code></pre>\n\n<p>Is there a better way to do this?  </p>\n"},{"tags":["jquery","ajax","asp.net-mvc","linq-to-sql","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5877,"score":0,"question_id":810265,"title":"integrating jquery with AJAX using MVC for ddl/html.dropdownlist","body":"<p>the situation:\na user on the page in question selects a category from a dropdown which then dynamically populates all the users of that category in a second dropdown beside it.</p>\n\n<p>all the data is being retrieved using LinqtoSQL and i was wondering if this can be done \na) using html.dropdownlist in a strongly typed view?\nb) using jquery to trigger the ajax request on selected index change instead of a 'populate' button trigger?</p>\n\n<p>sorry i dont have code as what i was trying really wasnt working at all. I am having trouble with how to do it conceptually and programatically!</p>\n\n<p>will appreciate any links to examples etc greatly!</p>\n\n<p>thanks in advance!</p>\n\n<p>EDIT:</p>\n\n<p>this is kind of what i was trying to achieve.. first the\nViewPage:</p>\n\n<pre><code>       &lt;script type=\"text/javascript\"&gt;\n        $(document).ready\n            function TypeSearch() {\n                $.getJSON(\"/Home/Type\", null, function(data) {\n                    //dont know what to do here\n\n                });\n\n            }\n        &lt;/script&gt;\n\n        &lt;p&gt;\n              &lt;label for=\"userType\"&gt;userType:&lt;/label&gt;\n            &lt;%= Html.DropDownList(\"userType\") %&gt;\n            &lt;%= Html.ValidationMessage(\"userType\", \"*\") %&gt;\n          &lt;input  type=\"submit\" runat=\"server\" onclick=\"TypeSearch()\" /&gt;\n\n            &lt;label for=\"accountNumber\"&gt;accountNumber:&lt;/label&gt;\n            &lt;%= Html.DropDownList(\"accountNumber\") %&gt;\n            &lt;%= Html.ValidationMessage(\"accountNumber\", \"*\") %&gt;\n        &lt;/p&gt;\n</code></pre>\n\n<p>Then home controller action:</p>\n\n<pre><code>    public ActionResult Type()\n    {\n        string accountType = dropdownvalue;\n        List&lt;Account&gt; accounts = userRep.GetAccountsByType(accountType).ToList();\n\n        return Json(accounts);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":11762638,"title":"MVC3 vCard download fails on mobile devices","body":"<p>I'm trying to write an MVC3 application that dynamically builds a vCard(.vcf) file to be downloaded by folks on a mobile device when they scan a QR code. I found an example <a href=\"http://weblogs.asp.net/gunnarpeipman/archive/2010/05/22/creating-vcard-action-result.aspx\" rel=\"nofollow\">here</a> to build and return vCards. After some manipulation I was able to get it working on my desktop machine, but every time I try to download the file on a mobile device the download fails. I had thought it was something wrong with the headers it was sending, so I did some digging and found some useful information on HTTP headers for android <a href=\"http://www.digiblog.de/2011/04/android-and-the-download-file-headers/\" rel=\"nofollow\">here</a>. Unfortunate even tweaking the headers did not change anything.</p>\n\n<p>The first part is the controller, later this will be taking URL parameters. Keeping it simple for testing.</p>\n\n<pre><code>public class APIController : Controller\n{\n\npublic vCardResult vCard()\n{\n    vCard card = new vCard\n    {\n        FirstName = \"First\",\n        LastName = \"Last\",\n        StreetAddress = \"70 Street Adr.\",\n        City = \"Atlanta\",\n        State = \"GA\",\n        CountryName = \"United States\",\n        Mobile = \"5558675309\",\n        Organization = \"MyCompany\",\n        HomePage = \"www.Google.com\",\n        JobTitle = \"Software Developer\",\n        Zip = \"30318\",\n        Email = \"FirstLast@MyCompany.com\",\n    };\n\n    return new vCardResult(card);\n}\n</code></pre>\n\n<p>And here is the vCard Model</p>\n\n<pre><code>public class vCard\n{\n    //I cut out the properties to save space\n\n    public override string ToString()\n    {\n\n        var builder = new StringBuilder();\n\n        builder.AppendLine(\"BEGIN:VCARD\");\n        builder.AppendLine(\"VERSION:2.1\");\n        builder.AppendLine(\"FN:\" + FirstName + \" \" + LastName);\n        builder.AppendLine(\"N:\" + LastName + \";\" + FirstName);\n        builder.AppendLine(\"TEL;CELL:\" + Mobile);\n        builder.AppendLine(\"TEL:\");\n        builder.AppendLine(\"EMAIL;INTERNET:\" + Email);\n        builder.AppendLine(\"TEL;FAX:\");\n        builder.AppendLine(\"TITLE:\" + JobTitle);\n        builder.AppendLine(\"ORG:\" + Organization);\n        builder.AppendLine(\"ADR:;;\" + StreetAddress + \";\" + City + \";\" + \";\" + Zip + \";\");\n        builder.AppendLine(\"REV:20120730T15034z\");\n        builder.AppendLine(\"END:VCARD\");\n\n        return builder.ToString();\n\n    }\n}\n</code></pre>\n\n<p>And lastly the action result</p>\n\n<pre><code>public class vCardResult : ActionResult\n{\n    private vCard _card;\n\n    protected vCardResult() { }\n\n    public vCardResult(vCard card)\n    {\n        _card = card;\n    }\n\n    public override void ExecuteResult(ControllerContext context)\n\n    {\n        var response = context.HttpContext.Response;\n        response.ContentType = \"text/vcard\";\n        response.AddHeader(\"Content-Disposition\", \"attachment; fileName=\\\"\" + _card.FirstName + \"_\" + _card.LastName + \".VCF\\\"\");\n\n        var cardString = _card.ToString();\n        var inputEncoding = Encoding.Default;\n        var outputEncoding = Encoding.GetEncoding(\"windows-1257\");\n        var cardBytes = inputEncoding.GetBytes(cardString);\n\n        var outputBytes = Encoding.Convert(inputEncoding,\n                                outputEncoding, cardBytes);\n\n        response.OutputStream.Write(outputBytes, 0, outputBytes.Length);\n    }\n}\n</code></pre>\n\n<p>Not too much different from the example I listed earlier but I wanted to get at least this functioning before I went too much further.</p>\n\n<p>I examined the response sent from the server with the response of a similar working system (one that I have no access to source code) and I don't see many differences so I'm not sure why their vCard opens the phone's contact list to add as a new contact and my download fails. The responses are as follows.</p>\n\n<p><strong>Example Response (working):</strong></p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nContent-Disposition: attachment; filename=5240000053568089.vcf\nContent-Type: text/x-vcard\nTransfer-Encoding: chunked\nDate: Tue, 31 Jul 2012 21:18:31 GMT\n\n110\nBEGIN:VCARD\nVERSION:2.1\nFN:First Last\nN:Last;First\nTEL;CELL:5558675309\nTEL:\nEMAIL;INTERNET:FirstLast@MyCompany.com\nTEL;FAX:\nTITLE:Software Developer\nORG:MyCompany\nADR:;;70 Street Adr.;Atlanta;GA;30318;\nREV:20120523T150346Z\nEND:VCARD\n\n0\n</code></pre>\n\n<p><strong>The response from <em>my</em> application</strong></p>\n\n<pre><code>HTTP/1.1 200 OK\nCache-Control: private\nTransfer-Encoding: chunked\nContent-Type: text/vcard\nServer: Microsoft-IIS/7.0\nX-AspNetMvc-Version: 3.0\nContent-Disposition: attachment; fileName=First_Last.vcf\nX-AspNet-Version: 4.0.30319\nX-Powered-By: ASP.NET\nDate: Tue, 31 Jul 2012 20:14:02 GMT\n\n105\nBEGIN:VCARD\nVERSION:2.1\nFN:First Last\nN:Last;First\nTEL;CELL:5558675309\nTEL:\nEMAIL;INTERNET:FirstLast@MyCompany.com\nTEL;FAX:\nTITLE:Software Developer\nORG:MyCompany\nADR:;;70 Street Adr.;Atlanta;GA;30346;\nREV:20120730T15034z\nEND:VCARD\n\n0\n</code></pre>\n\n<p>Thanks in advance for reading this and for any help/advice you are able to offer!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2","forum"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":632,"score":2,"question_id":4673542,"title":"ASP.NET MVC Forum?","body":"<p>I am repeating this question since i haven't found a good answer to it yet. The other threads about this topic is from 2008 and 2009. There are a few projects out there like OpenForum, NearForums and Telerik Forums. The openforum and nearforums i can't even get to run on my computer, just getting a lot of build errors. On the openforum it seems a bit dead on that end in the discussions thread. Telerik requires some components that i can't even find.</p>\n\n<p>So i ask again, maybe there is some new projects in the loop, is there a forum like YAF for asp.net?\nIt must be MVC 2 or 3 and preferably also have some APIs like YAF so that it can easily be integrated into the webpage. </p>\n"},{"tags":["asp.net-mvc","ravendb"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":748,"score":2,"question_id":8758307,"title":"Access the admin panel for an embedded RavenDB in ASP.NET MVC running on IIS Express","body":"<p>I'm building a ASP.NET MVC site. I want to use RavenDb (www.ravendb.net) - the embedded version.</p>\n\n<p>My problem is that I also want to be able to access the \"RavenDb admin\" tool so look in the database, test queries etc. </p>\n\n<p>Normally when you have RavenDb running in \"Server\" mode you can access this \"RavenDb admin\" via: localhost:8080</p>\n\n<p>As stated, I want my database to run embedded, so it runs as a part of my ASP.NET MVC site and therefore lives inside the IIS Express that hosts my ASP.NET MVC.</p>\n\n<p>I have found this: <a href=\"http://ravendb.net/faq/embedded-with-http\" rel=\"nofollow\">http://ravendb.net/faq/embedded-with-http</a></p>\n\n<p>It tells me to initialize my datastore with the property UseEmbeddedHttpServer = true.</p>\n\n<pre><code>var documentStore = new EmbeddableDocumentStore\n{\n    DataDirectory = \"Data\",\n    UseEmbeddedHttpServer = true\n};\n</code></pre>\n\n<p>I've done that, but how to I then access the \"RavenDb admin\" part?\nlocalhost:8080 wouldn't work, as my site is running on like localhost:49833</p>\n\n<p>It might be me who is missing something, but I have done a lot of googling on this and still can't find the answer.</p>\n\n<p>Thanks in advance :)</p>\n"},{"tags":["asp.net","mysql","ajax","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12917896,"title":"Creating a \"Live\" ASP.NET MVC Application","body":"<p>From either a high-level perspective, or a low level and very specific one, what is the best way to constantly poll a database for updates?</p>\n\n<p>I would like to create a \"live\" application which, using ajax, displays the most current data.  I have partial views which Ajax.ActionLink the correct data in, but only OnClick of that generated link.</p>\n\n<p>Is using a trigger and some sort of application code the best way to do this? For example, a trigger on all tables, which sets some field as \"changes have been made since last read\"?</p>\n\n<p>Or is it better to use a function to poll the database on an interval to check for changes (I for-see this possibly being taxing with all the constant chatter to the DB)?</p>\n\n<p>Or is a combination of these 2 approaches best?  Or is there something I am leaving out completely?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","json","http-post"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":12899506,"title":"form deserialization not working (csharp mvc4)","body":"<p>I have an asynchonous httpPost that serializes my form data and commits it to my controller. There I try to get my form data serialized into my view model class but all the values are null or have the default value assigned.</p>\n\n<pre><code>public ActionResult GetSalesData(string vmString)\n{\n    -serialization...\n    -use the data to select some other data\n    return new JsonResult { Data = d, JsonRequestBehavior = JsonRequestBehavior.AllowGet };\n}\n</code></pre>\n\n<p>For the serialization I tried so far these two ways:</p>\n\n<p>1.)</p>\n\n<pre><code>    { vmString: $('form').serialize() }\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>Dataset.Ids=3,7,12&amp;Type=Sales&amp;DataSources=BeverageType&amp;DisplayModes=Volume&amp;SeriesTypes=Lines&amp;SalesVm.DisplayOptions.ShowAverage=false&amp;SalesVm.DisplayOptions.ShowTargetLine=false&amp;ActionName=Sales_SelectBeverageTypes&amp;Mode=LightboxInWizard&amp;SelectedDatasetIdsWorkingCopy=3&amp;SearchTerm=\n</code></pre>\n\n<p>2.)</p>\n\n<pre><code>    { vmString: JSON.stringify($('form')) }\n</code></pre>\n\n<p>result: </p>\n\n<pre><code>{\"length\":2,\"prevObject\":{\"0\":{\"jQuery1710039964356962994385\":1,\"location\":{}},\"context\":{\"jQuery1710039964356962994385\":1,\"location\":{}},\"length\":1},\"context\":{\"jQuery1710039964356962994385\":1,\"location\":{}},\"selector\":\"form\",\"0\":{\"Dataset.Ids\":{},\"Type\":{},\"DataSources\":{\"jQuery1710039964356962994385\":15},\"3\":{\"jQuery1710039964356962994385\":16},\"DisplayModes\":{\"0\":{\"jQuery1710039964356962994385\":42},\"1\":{\"jQuery1710039964356962994385\":43},\"2\":{\"jQuery1710039964356962994385\":44},\"3\":{\"jQuery1710039964356962994385\":45}},\"SeriesTypes\":{\"0\":{\"jQuery1710039964356962994385\":46},\"1\":{\"jQuery1710039964356962994385\":47}},\"SalesVm.DisplayOptions.ShowAverage\":{\"0\":{\"jQuery1710039964356962994385\":48},\"1\":{\"jQuery1710039964356962994385\":49}},\"SalesVm.DisplayOptions.ShowTargetLine\":{\"0\":{\"jQuery1710039964356962994385\":50},\"1\":{\"jQuery1710039964356962994385\":51}}},\"1\":{\"ActionName\":{},\"Mode\":{},\"SelectedDatasetIdsWorkingCopy\":{},\"SearchTerm\":{\"jQuery1710039964356962994385\":35}}}\n</code></pre>\n\n<p>To deserialize, I tried:</p>\n\n<pre><code>m = (StatisticsViewerViewModel)new JsonSerializer().Deserialize(new System.IO.StringReader(vmString), typeof(StatisticsViewerViewModel));\nm = (StatisticsViewerViewModel)new JsonSerializer().Deserialize(new System.IO.StringReader(vmString), vmString.GetType());\nm = JsonConvert.DeserializeObject&lt;StatisticsViewerViewModel&gt;(vmString);\n\nDataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(StatisticsViewerViewModel)); \nm = (StatisticsViewerViewModel) ser.ReadObject(stream);\n</code></pre>\n\n<p>I checked that all my fields are inside the form:</p>\n\n<pre><code> @using (Html.BeginForm())\n{\n   some partial views containing some fields, all using the same model..\n}\n</code></pre>\n\n<p>I also checked that the used View Model as well as all nested models do have an empty constructor.</p>\n\n<p>Are there different ways to de-/serialize the form data? And what else could I check to make sure everything is as it should be?</p>\n\n<ul>\n<li>EDIT -</li>\n</ul>\n\n<p>ViewModel-Root:</p>\n\n<pre><code>public class StatisticsViewerViewModel\n{\n    public String BreadcrumbName { get; set; }\n    public String ActionName { get; set; }\n    public StatisticsType Type { get; set; }\n    public DropDownListModel DataSourceList { get; set; }\n    public MultiSelectionModel Dataset { get; set; }\n    public SalesViewModel SalesVm { get; set; }\n    //public EventsViewModel EventsVm { get; set; }\n    public ChartExportOptions ExportOptions { get; set; }\n\n    public StatisticsViewerViewModel()\n    {\n        DataSourceList = new DropDownListModel();\n        Dataset = new MultiSelectionModel();\n        SalesVm = new SalesViewModel();\n        ExportOptions = new ChartExportOptions();\n    }\n\n    public enum StatisticsType\n    {\n        Sales,\n        Events\n    }\n}\n</code></pre>\n\n<p>Nested ViewModels</p>\n\n<pre><code>public class SalesViewModel\n{\n    public SalesDisplayOptions DisplayOptions { get; set; }\n    public RadioButtonModel DisplayModes { get; set; }      // Volume, Value, ..\n    public RadioButtonModel SeriesTypes { get; set; }       // Line, Bar, ..\n\n    public SalesViewModel(bool initialize = false)\n    {\n        if (initialize) { Initialize(); }\n    }\n}\n\npublic class SalesDisplayOptions\n{\n    public DisplayMode Mode { get; set; }\n    public SeriesType Type { get; set; }\n    public bool ShowAverage { get; set; }\n    public bool ShowTargetLine { get; set; }\n\n    public enum SeriesType\n    {\n        Lines, ...\n    }\n\n    public enum DisplayMode\n    {\n        Value, ...\n    }\n\n}\n</code></pre>\n\n<p>A relevant point might be that the post is fired by kendoChart. Here the interesting block inside the view:</p>\n\n<pre><code>....\n&lt;div id=\"chart\"&gt;&lt;/div&gt;\n....\n@this.ScriptBlock(\n@&lt;script type=\"text/javascript\"&gt;\n$(\"#chart\").kendoChart({\n             dataSource: new kendo.data.DataSource({\n                 transport: {\n                     read: {\n                         url: actionUrl,\n                         data: { vmString: $('form').serialize() },\n                         dataType: \"json\",\n                         contentType: \"application/json; charset=utf-8\"\n                     }\n                 },\n                 sort: ...\n ....\n</code></pre>\n\n<p>To check whether the problems are related to the kendoChart-Object, I testwisely implemented a manual POST:</p>\n\n<pre><code>....\n&lt;div class=\"round-corner-bottom-right\"&gt;\n        &lt;button id=\"send-form\" type=\"button\"&gt;\n            &lt;span class=\"button-label\"&gt;Send Form Data&lt;/span&gt;\n        &lt;/button&gt;\n&lt;/div&gt;\n....\n\n@this.ScriptBlock(\n@&lt;script type=\"text/javascript\"&gt;\n\n     $('document').ready(function () {\n\n        $('#send-form').on('click', function () {\n\n             var data = $('form').serialize();\n\n             $.ajax({\n                 type: \"POST\",\n                 url: actionUrl,\n                 data: data,\n                 cache: false,\n                 success: function (returnData) {\n                 }\n             });\n\n     }); // document ready\n</code></pre>\n\n<p>The problem does not persist in this scenario, all values are set as expected. So there seems to be a problem with the kendoChart-methode.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","unobtrusive-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12895643,"title":"MVC Ajax.beginform partial validation logic inconsistent","body":"<p>I am using MVC 3 and razor in Visual Studio 10 with client side unobtrusive validation. I have a requirement to offer the user an opportunity to save a form fs some of the required fields are missing. The submit is with an Ajax.bgein form structure.</p>\n\n<p>I have the following JavaScript to catch the submit event.</p>\n\n<pre><code>$(document).ready(function () {\n\n$('#submit-11').click(function (event) {\n\n    var validator = $(\"#form0\").validate();\n\n    if (!$(\"#form0\").valid()) {\n        // for partial save needs either ID number\n        // or family name and date of birth\n        var NameExists = true;\n        var DateOfBirthExists = true;\n        var IDNumberExists = true;\n\n        if (validator.errorMap[\"model.FamilyName\"]) { NameExists = false; }\n        if (validator.errorMap[\"model.DateOfBirth\"]) { DateOfBirthExists = false; }\n        if (validator.errorMap[\"model.IDNumber\"]) { IDNumberExists = false; }\n\n        if (IDNumberExists || (NameExists &amp;&amp; DateOfBirthExists)) {\n            if ($(\"#model_PartialSave\").attr('checked')) {\n                //  partial save has been requested\n                alert(\"saving\");\n                return true;    // AJAX save is NOT triggered\n            }\n            $(\"#AgreePartialSave\").show();\n            $(\"#model_PartialSave\").removeAttr('checked');\n\n        }\n        return false;\n    }\n    return true;    // AJAX save IS triggered\n});\n\n});                    //document ready end\n</code></pre>\n\n<p>The logic seems to be correct - I have traced this in firebug - and the alert is triggered but the AJAX submit call does not happen. If the form is valid the AJAX submit call happens.</p>\n\n<p>I have also tried <code>event.preventDefault();</code>  but that prevents any save happening.</p>\n\n<p>I have also traced this in firebug and all the correct calls seem to be being made.</p>\n\n<p>Any help gratefully received.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>It seems that this might be a limitation in the Microsoft Ajax library. <a href=\"http://stackoverflow.com/questions/11561496/jquery-unobtrusive-validation-ignores-cancel-class-on-submit-button-if-used-in\">See this link</a> for the details and a work around.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","knockout.js","asp.net-mvc-4","knockout-2.0"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":114,"score":0,"question_id":12914483,"title":"Knockout: select element options binding + value binding + optionsCaption binding + late ajax response = weird","body":"<p>Consider the following ko bindings on a <code>select</code> element:</p>\n\n<pre><code>&lt;select data-bind=\"value: valueObservable, options: optionsObservableArray, \n    optionsCaption: '[None] - this is an optional field'\"&gt;\n</code></pre>\n\n<p>... given a viewmodel like the following:</p>\n\n<pre><code>function MyViewModel()\n{\n    var self = this;\n    self.valueObservable = ko.observable();\n    self.optionsObservableArray = ko.observableArray();\n\n    // ajax call to load options\n    ko.computed(function() {\n        $.ajax(...)\n        .success(function(optionsResponse) {\n            self.optionsObservableArray(optionsResponse)\n        });\n    });\n\n    // ajax call to load data value\n    ko.computed(function() {\n        $.ajax(...)\n        .success(function(valueResponse) {\n            self.valueObservable(valueResponse)\n        });\n    });\n}\n</code></pre>\n\n<p>What's weird about this is when the second (data) ajax call returns before the first (options) ajax call. Since the <code>select</code> element has an <code>optionsCaption</code> binding, here is what I believe is happening:</p>\n\n<ol>\n<li>The data ajax call completes, setting the <code>valueObservable</code> to some value (like 6, abc, or some other non-falsy value). </li>\n<li>Because there is only 1 <code>option</code> in the <code>select</code> element (due to the <code>optionsCaption</code>), and because the <code>valueObservable</code> is bound to it (via the <code>value</code> binding), this causes the <code>valueObservable</code> to be changed to <code>undefined</code>.</li>\n<li>Finally, the <code>optionsObservableArray</code> completes and adds new <code>option</code> elements to the <code>select</code>, but by this time it is too late: The <code>valueObservable</code> is now wrapping an <code>undefined</code> value rather than the real data value returned from the first ajax call.</li>\n</ol>\n\n<p>Question: What is the best way to work around this? Here is what I can think of:</p>\n\n<ol>\n<li>Make the first ajax call run with <code>async: false</code>. This may slow page rendering.</li>\n<li>Create a separate observable for binding to the select value (such as <code>value: selectedValueObservable</code>). Then subscribe to the <code>optionsObservableArray</code> and use the subscription to do something like <code>self.selectedValueObservable(self.valueObservable())</code>. This seems like a bandaid fix.</li>\n<li>Render the select &amp; options to the page before any javascript executes by sending the options data from the server (using MVC viewmodel). This makes it a little more difficult to deal with the options as an <code>observableArray</code>.</li>\n</ol>\n\n<p><strong>Update</strong></p>\n\n<p>There is another concern which I omitted from this question to simplify the example code. In actuality, this viewmodel is used to create an editable list of data items. So there is actually more than 1 dropdown list that gets rendered to the page. The data ajax call really returns an array, and its success function really sets an <code>observableArray</code> of complex items. Since the dropdown list options are reused in every inline form, it is placed on the <code>$parent</code> viewmodel and only loaded once. It is also difficult to pass the select options in a single ajax call because the data items are retrieved via WebAPI (which returns an <code>IEnumerable</code>, no room to send additional dropdown options). </p>\n"},{"tags":["asp.net-mvc","authentication","authorization","iis-7.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12916800,"title":"Force Login Prompt for user in \"incorrect\" but trusted domain","body":"<p>I have a .NET MVC Web App that operates in an active diretory domain (Domain A) and uses the authorize attirubte for specified AD groups.  </p>\n\n<p>Recently we acquired another company and have not yet integrated their users into our domain, they are on still on their own domain (Domain B).  They have had matching users created in Domain A, but they log onto their desktops in Domain B.</p>\n\n<p>Our Info Sec team has created some sort of trusted connection between the two domains (I may be using the wrong word there) that allows those users in Domain B to authenticate against Domain A.  This is causing a problem because the users come into the application as their Domain B user which is not a member of any of the allowed Domain A groups but somehow passes authentication in IIS without being prompted for a username/password.</p>\n\n<p>Can I somehow recognize the user is in Domain B, not Domain A, and force the browser to prompt for credentials?  Can I set up my global filter to do this, or configure IIS to restrict to Domain A only?</p>\n\n<p>Thanks in advance for the help.</p>\n"},{"tags":["asp.net","asp.net-mvc","controls","postback"],"answer_count":3,"favorite_count":7,"up_vote_count":12,"down_vote_count":0,"view_count":9679,"score":12,"question_id":366151,"title":"ASP.NET MVC doesn't work with ViewState and Postback?","body":"<p>Perhaps this is a naive question. In my understanding, ASP.NET MVC cannot work with ViewState and Postback which is fundamentals of ASP.NET forms. Is that correct?</p>\n\n<p>If that's it, then all ASP.NET Web Controls depending on ViewState &amp; Postback cannot be used in ASP.NET MVC, right?</p>\n"},{"tags":["asp.net-mvc","facebook"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1219,"score":1,"question_id":2361389,"title":"ASP.NET MVC Facebook","body":"<p>I am trying to do a seemingly simple thing, but having trouble accomplishing it. I am trying to automate the posting on my Facebook wall. Basically I have a ASP.NET MVC website that I post updates on, and I want to automatically submit the post to my wall.</p>\n\n<p>I see a lot of stuff on FB Connect and getting data, I just want to post.</p>\n\n<p>Thanks for any help or guidance.</p>\n\n<p><strong>UPDATE:</strong> Just trying to resurrect and be a little more clear in my description as I am not getting anywhere.</p>\n\n<p>I have a page that I want with a text box and a button. When I submit the form I want the message to post to <strong>my</strong> Facebook wall. I thought it was Facebook Connect, but I am getting no where as to how to automatically authenticate myself and post to my wall.</p>\n\n<p>I would like to use C# rather than JavaScript. </p>\n\n<pre><code>private const string ApplicationKey = \"XXXXXXXXXXXXXXXXXXXXXXXXXXXX\";\nprivate const string SecretKey = \"XXXXXXXXXXXXXXXXXXXXXXXXXX\";\nprivate Facebook.Rest.Api _facebookAPI;\nprivate Facebook.Session.ConnectSession _connectSession;\n\n[AcceptVerbs(HttpVerbs.Post)]\npublic ActionResult Index(FormCollection form)\n{\n    _connectSession = new Facebook.Session.ConnectSession(ApplicationKey, SecretKey);\n    if (_connectSession.IsConnected())\n    {\n        _facebookAPI = new Facebook.Rest.Api(_connectSession);\n        string response = _facebookAPI.Stream.Publish(\"This is a generated test\");\n    }\n        return View();\n    }\n}\n</code></pre>\n\n<p>The IsConnected() is returning false.\nAny help is appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","runtime-error"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":101,"score":0,"question_id":12915673,"title":"Error System.Web.HttpCompileException (0x80004005)","body":"<p>I am now suddenly getting the following message in only 1 page. What could be the issue?</p>\n\n<p>I am doing a web site with MVC ASP .NET. </p>\n\n<blockquote>\n  <p>System.Web.HttpCompileException (0x80004005):\n  c: \\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET\n  Files\\root\\fcd5a636\\19fe4d1\\App_Web_create.cshtml.c6727781.9mayykrj.0.cs(162):\n  error CS1528: Expected ; or = (cannot specify constructor arguments in\n  declaration) at System.Web.Compilation.AssemblyBuilder.Compile() at\n  System.Web.Compilation.BuildProvidersCompiler.PerformBuild() at\n  System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath\n  virtualPath) at\n  System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath\n  virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean\n  allowBuildInPrecompile, Boolean throwIfNotFound, Boolean\n  ensureIsUpToDate) at\n  System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext\n  context, VirtualPath virtualPath, Boolean noBuild, Boolean\n  allowCrossApp, Boolean allowBuildInPrecompile, Boolean\n  throwIfNotFound, Boolean ensureIsUpToDate) at\n  System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath\n  virtualPath, HttpContext context, Boolean allowCrossApp, Boolean\n  throwIfNotFound) at\n  System.Web.Compilation.BuildManager.GetObjectFactory(String\n  virtualPath, Boolean throwIfNotFound) at\n  System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String\n  virtualPath) at\n  System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext\n  controllerContext, String virtualPath) at\n  System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext\n  controllerContext, List<code>1 locations, String name, String\n  controllerName, String areaName, String cacheKey, String[]&amp;\n  searchedLocations) at\n  System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext\n  controllerContext, String[] locations, String[] areaLocations, String\n  locationsPropertyName, String name, String controllerName, String\n  cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations) at\n  System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext\n  controllerContext, String viewName, String masterName, Boolean\n  useCache) at\n  System.Web.Mvc.ViewEngineCollection.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine\n  e) at System.Web.Mvc.ViewEngineCollection.Find(Func</code>2 lookup, Boolean\n  trackSearchedPaths) at\n  System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext\n  controllerContext, String viewName, String masterName) at\n  System.Web.Mvc.ViewResult.FindView(ControllerContext context) at\n  System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n  at\n  System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext\n  controllerContext, ActionResult actionResult) at\n  System.Web.Mvc.ControllerActionInvoker.&lt;>c_<em>DisplayClass1c.b</em>_19()\n  at\n  System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter\n  filter, ResultExecutingContext preContext, Func<code>1 continuation) at\n  System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1c.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b()\n  at\n  System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext\n  controllerContext, IList</code>1 filters, ActionResult actionResult) at\n  System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext\n  controllerContext, String actionName) at\n  System.Web.Mvc.Controller.ExecuteCore() at\n  System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n  at\n  System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext\n  requestContext) at\n  System.Web.Mvc.MvcHandler.&lt;>c_<em>DisplayClass6.&lt;>c</em>_DisplayClassb.b_<em>5()\n  at\n  System.Web.Mvc.Async.AsyncResultWrapper.&lt;>c</em>_DisplayClass1.b_<em>0()\n  at\n  System.Web.Mvc.Async.AsyncResultWrapper.&lt;>c</em>_DisplayClass8<code>1.&lt;BeginSynchronous&gt;b__7(IAsyncResult\n  _) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult</code>1.End() at\n  System.Web.Mvc.MvcHandler.&lt;>c_<em>DisplayClasse.b</em>_d()\n  at System.Web.Mvc.SecurityUtil.b__0(Action f)\n  at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action\n  action) at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult\n  asyncResult) at\n  System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult\n  result) at\n  System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n  at System.Web.HttpApplication.ExecuteStep(IExecutionStep step,\n  Boolean&amp; completedSynchronously)</p>\n</blockquote>\n"},{"tags":["asp.net-mvc","silverlight","iis7","iis-express"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12566534,"title":"Unable to run Silverlight application from Visual Studio 2010","body":"<p>I'm in the process of setting up a new machine as a development environment and I'm having issues getting an existing code base that hosts a Silverlight application to work. The code runs fine on all other machines that my team uses.</p>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>Error: Unhandled Error in Silverlight Application<br />\n  Code: 2104<br />\n  Category: InitializeError<br />\n  Message: Could not download the Silverlight application. Check web server settings</p>\n</blockquote>\n\n<p>I have had a Google around for some answers on this and I realize there is a <a href=\"http://stackoverflow.com/q/4040416/308012\">duplicate question</a> on StackOverflow already, but it does not provide enough information and the answers have not worked for me.</p>\n\n<p>I am attempting to run the solution through Visual Studio 2010 Ultimate, using IIS Express 7.5 integration (as opposed to the Cassini web server). This approach works perfectly fine on all other machines, except for this one.</p>\n\n<p>I have found that if I specify to use full IIS integration (instead of Express) and select the <strong>SilverlightTestPage.aspx</strong> as the start up page, then the application runs (although not perfectly). Also, if I publish the application and host it on IIS, it again works fine. However, when running through Cassini or IIS Express 7.5 integration, or when trying to get it to run through the <strong>Default.aspx</strong> or correct start up page it does not work.</p>\n\n<p>Does anyone have any ideas what this might be? I've already checked that the MIME type in IIS is correct (not sure if I can do this in IIS Express as well?) and that the XAP files are building into the correct directory.</p>\n"},{"tags":["jquery","asp.net-mvc","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12915446,"title":"How to bind list of items with in dropdownlist using knockout.js","body":"<p>I am working on knockout.js. I am very new to knockout.js so iam following knockout.js tutorials. I am trying to display list of items with in dropdownlist basically it is actual example provided in knockout.js tutorials. I have written following code,</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            function setreservation(name, initmeal) {\n                var self = this;\n                self.Name = name;\n                self.Meal = ko.observable(initmeal);\n\n                self.FormatPrice = ko.computed(function () {\n                    return self.Meal().Price ? \"$\" + self.Meal().Price.toFixed(2) : \"none\";\n                });\n            }\n\n            function ReservationViewModel() {\n                var self = this;\n                self.availablemeals = [{ \"MealName\": \"standard\", \"Price\": 10 }, { \"MealName\": \"premium\", \"Price\": 20 }, { \"MealName\": \"Platinum\", \"Price\": 30}];\n                self.seats = ko.observableArray([new setreservation(\"karthik\", self.availablemeals[0]), new setreservation(\"Tirumalesh\", self.availablemeals[1])]);\n                self.ReserveNewSeat = function () {\n                    self.seats.push(new setreservation(\"karhik\", self.availablemeals[2]));\n                };\n            }\n\n            ko.applyBindings(new ReservationViewModel());\n        }); \n</code></pre>\n\n<p>and my view is like,</p>\n\n<pre><code>&lt;table cellpadding=\"3\" cellspacing=\"4\"&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Meal&lt;/th&gt;&lt;th&gt;Price&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody data-bind=\"foreach: seats\"&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;input data-bind=\"value:Name\" /&gt; \n&lt;/td&gt;\n&lt;td&gt;&lt;select data-bind=\"options:$root.availablemeals,value:Meal,optionsText:MealName\"&gt;&lt;/select&gt;&lt;/td&gt;\n&lt;td data-bind=\"text:FormatPrice\"&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;button data-bind=\"click:ReserveNewSeat\"&gt;Reserve New One&lt;/button&gt;\n</code></pre>\n\n<p>so please guide me does my code makes any thing wrong.</p>\n"},{"tags":["c#","jquery","asp.net-mvc","asp.net-mvc-3","html5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12915494,"title":"I want to add collection of Labels & textboxes in <div class=\"form-inliine\"> how can I do this?","body":"<p>This is my code below of view.</p>\n\n<pre><code> &lt;div class=\"carpet bs-docs-example bs-docs-carpet\"&gt;\n\n            &lt;h4&gt;Please Provide details about your carpetting needs &lt;/h4&gt;\n\n\n            &lt;div class=\"form-inline\"&gt;\n                &lt;label class=\"control-label\"&gt;&lt;b&gt;Length&lt;/b&gt;&lt;/label&gt;\n                &lt;input type=\"text\" name=\"Carpet.Room.Length.Feet\" id=\"Carpet_Room_Length_Feet\" style=\"width: 80px\" class=\"floor-text\" /&gt;Ft\n            &lt;input type=\"text\" name=\"Carpet.Room.Length.Inch\" id=\"Carpet_Room_Length_Inch\" class=\"floor-text\" /&gt;Inch\n                &lt;label&gt;&lt;b&gt;Width&lt;/b&gt;&lt;/label&gt;\n                &lt;input type=\"text\" name=\"Carpet.Room.Width.Feet\" id=\"Carpet_Room_Width_Feet\" class=\"floor-text\" /&gt;Ft\n             &lt;input type=\"text\" name=\"Carpet.Room.Width.Inch\" id=\"Carpet_Room_Width_Inch\" class=\"floor-text\" /&gt;Inch&lt;br /&gt;\n            &lt;/div&gt;\n            &lt;div&gt;&lt;/div&gt;\n            &lt;a href=\"#\" class=\"addroom\"&gt;Add Room&lt;/a&gt; / &lt;a href=\"#\" class=\"removeroom\"&gt;Remove Room&lt;/a&gt;\n            &lt;br /&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"Removing Old flooring\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.DropDownListFor(model =&gt; Model.Carpet.RemoveOldFlooring, new List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"Yes\", Value = \"True\" }, new SelectListItem() { Text = \"No\", Value = \"False\" } })\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"Molding\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.DropDownListFor(model =&gt; Model.Carpet.Molding, new List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"Yes\", Value = \"True\" }, new SelectListItem() { Text = \"No\", Value = \"False\" } })\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"Stairs Included?\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.DropDownListFor(model =&gt; Model.Carpet.Stairs, new List&lt;SelectListItem&gt;() { new SelectListItem() { Text = \"Yes\", Value = \"True\" }, new SelectListItem() { Text = \"No\", Value = \"False\" } })\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"control-group\"&gt;\n                @Html.Label(\"How many Steps\", new { @class = \"control-label\" })\n                &lt;div class=\"controls\"&gt;\n                    @Html.EditorFor(x =&gt; x.Carpet.StairSteps)\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n\n\n\n    &lt;/div&gt;​\n</code></pre>\n\n<p>and I am using Jquery as below</p>\n\n<pre><code> $('body').on('click','a.addroom', function(e) {\n     e.preventDefault();\n\n     var $cloned = $('.form-inline:eq(0)').clone();\n\n     $('body').append($cloned);\n\n }); \n\n\n $('body').on('click', 'a.removeroom' ,function(e) {\n     e.preventDefault();\n     $(this).closest('div').remove();\n}); ​\n</code></pre>\n\n<p>Its adding But not removing it.\nI just want to add the contents which are in  tag and remove those on clicking the Links \"Add Room\" &amp; \"Remove Room\".</p>\n"},{"tags":["c#",".net","asp.net-mvc","entity-framework"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12913463,"title":"Throw and catch exception in same method","body":"<p>In my method that writes to a database, I handle errors as shown in the code below. In <code>catch (DbUpdateException ex)</code> I want to re-throw the exception and catch it in the last <code>catch (Exception ex)</code>.</p>\n\n<p>Is that possible and how to do that? Code below doesn't do that.</p>\n\n<pre><code>        using (Entities context = new Entities())\n        {\n            try\n            {\n                context.Office.Add(office);\n                retVal = context.SaveChanges();\n            }\n            catch (DbUpdateException ex)\n            {\n                SqlException innerException = ex.GetBaseException() as SqlException;\n                if (innerException != null &amp;&amp; innerException.Number == (int)SQLErrorCode.DUPLICATE_UNIQUE_CONSTRAINT)\n                {\n                    throw\n                        new Exception(\"Error ocurred\");\n                }\n                //This is momenty where exception is thrown.\n                else\n                {\n                    throw ex;\n                }\n            }\n            catch (Exception ex)\n            {\n                throw\n                    new Exception(\"Error\");\n            }\n        }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","forms-authentication","session-cookies"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":261,"score":2,"question_id":12746703,"title":"Random logouts with MVC4 asp.net","body":"<p>This will be my first question here!</p>\n\n<p>Im having problems with my mvc4 app and random occurring logouts.</p>\n\n<p>i use sessions to store my company id and id of the user.</p>\n\n<pre><code>        private void SetSessionData(string UserName)\n    {\n        Employee data = (from employee in _db.Employees where employee.Email == UserName select employee).First();\n        Session.Add(\"Comp_ID\", data.Comp_ID);\n        Session.Add(\"Company\", data.Company.Name);\n        Session.Add(\"User_ID\", data.ID);\n    }\n</code></pre>\n\n<p>i have set the timeout value to 600 for the session  (10 hours) this is even set 2 places to be sure:</p>\n\n<pre><code>        [AllowAnonymous]\n    public ActionResult Login(LoginModel model, string returnUrl)\n    {\n        if (ModelState.IsValid &amp;&amp; WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))\n        {\n            //FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); //sørger for at remember me virker!\n\n            SetSessionData(model.UserName);\n            Session.Timeout = 600;\n\n            if (model.RememberMe)\n            {\n                Response.Cookies.Add(new HttpCookie(\"CookieUserName\", model.UserName) { Expires = DateTime.Now.AddDays(30), Value = model.UserName });\n                Response.Cookies.Add(new HttpCookie(\"CookieRememberMe\", model.RememberMe.ToString()) { Expires = DateTime.Now.AddDays(30), Value = model.RememberMe.ToString() });//sætter den nye cookie\n            }\n            else\n            {\n                Response.Cookies.Set(new HttpCookie(\"CookieUserName\") { Expires = DateTime.Now.AddDays(-1) });\n                Response.Cookies.Set(new HttpCookie(\"CookieRememberMe\") { Expires = DateTime.Now.AddDays(-1) });\n            }\n\n            if (string.IsNullOrEmpty(returnUrl))\n            {\n                return RedirectToLocal(returnUrl);\n            }\n            return RedirectToAction(\"Index\", \"Home\");\n        }\n\n        // If we got this far, something failed, redisplay form\n        ModelState.AddModelError(\"\", \"Vi har enten ikke brugernavnet eller koden i kartoteket.\");\n        return View(model);\n    }\n</code></pre>\n\n<p>and here in the web.config:</p>\n\n<pre><code>&lt;system.web&gt;\n&lt;machineKey validationKey=\"MyKeyGoesHere\" validation=\"SHA1\" decryption=\"AES\" /&gt;\n&lt;sessionState timeout=\"600\" /&gt;\n&lt;compilation debug=\"true\" targetFramework=\"4.5\"&gt;\n  &lt;assemblies&gt;\n    &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt;\n  &lt;/assemblies&gt;\n&lt;/compilation&gt;\n&lt;httpRuntime targetFramework=\"4.5\" /&gt;\n&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/Login\" timeout=\"600\" /&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>My cookies seem to be saved for 10 hours, and my session_id cookie expiration seems to be set to \"when the browser closes\".</p>\n\n<p>Server side i have set the app pool to recycle at 1am.</p>\n\n<p>Even though all this is set my users still get random logouts form everything between 2 min after login to 1 hour after login.</p>\n\n<p>to counter some of the random half login state problems i have had i included this:</p>\n\n<pre><code>@if(Session == null || Session[\"User_ID\"] == null || !WebSecurity.Initialized){\n                //Makes sure the session data is cleared and user logged out if session dies.\n                try\n                {\n                    if(Session != null) {Session.Clear();}\n\n                    if (WebSecurity.Initialized){WebSecurity.Logout();}\n\n                    FormsAuthentication.SignOut();\n\n                    //dette er til at stoppe cache.\n                    Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));\n                    Response.Cache.SetCacheability(HttpCacheability.NoCache);\n                    Response.Cache.SetNoStore();\n\n                }catch{ &lt;p&gt;Error Clearing Login Cache&lt;/p&gt;}    \n            }\n</code></pre>\n\n<p>Im pretty lost by now and hopes a guru out there might know what beginners mistake im making here! </p>\n\n<p>Thanks for ALL response in advance!</p>\n\n<p>Edit:</p>\n\n<p>I also tried this: <a href=\"http://www.windowsitpro.com/article/security-development/create-persistent-id-cookies\" rel=\"nofollow\">http://www.windowsitpro.com/article/security-development/create-persistent-id-cookies</a></p>\n\n<p>(original link from: <a href=\"http://stackoverflow.com/questions/1663991/asp-net-mvc-formsauthentication-cookie-timeout-cannot-be-increased\">ASP.NET MVC FormsAuthentication Cookie timeout cannot be increased</a>)</p>\n\n<p>but that just made my app logout every single time i pressed anything after login.</p>\n\n<p>The app is running on windows 2012 server with IIS8.</p>\n\n<p>More adds:</p>\n\n<p>I found out the session_id cookie is still set to when closed in the browser:</p>\n\n<p>cloud.hviidnet.com/image/2X3v2y2e1K1S</p>\n\n<p>The strange thing is its set to 600 min, even when i look in the IIS server: </p>\n\n<p>cloud.hviidnet.com/image/1e3J1g2u3p2M</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","asp.net-mvc-4","asp.net-web-api"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":632,"score":2,"question_id":9789944,"title":"How can I test a custom DelegatingHandler in the ASP.NET MVC 4 Web API?","body":"<p>I've seen this question come up in a few places, and not seen any great answers. As I've had to do this myself a few times, I thought I'd post my solution. If you have anything better, please post.</p>\n\n<p>N.B. This is using ASP.NET MVC 4 Beta 2 version of Web API - future versions may change!</p>\n\n<p>Update: This still works in ASP.NET MVC 4 RC</p>\n"},{"tags":["asp.net","asp.net-mvc","jquery-ajax","asp.net-mvc-2","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12912193,"title":"Call a controller method in AJAX from an User Control view in areas folder","body":"<p>I had a asp.net project, with a Area folder for the asp.net mvc 2 code.\nWhen I created the area, it creted a \"View\" and a \"Controller\" folder.</p>\n\n<p>My View is a partial view, so an .ascx. \nFrom this view, I want to call a controller method in Ajax.</p>\n\n<p>This is my code of my view :</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  $(\"#&lt;%=btnSearch.ClientID %&gt;\").click(function() {\n    var text = $(\"#&lt;%=tbSearchBox.ClientID %&gt;\").val;\n    $.ajax({\n        type: \"GET\",\n        url: '/Areas/Settings/User/SearchUser',\n        success: function(msg) {\n            alert(\"toto\");\n        }\n    });\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>Areas is the area's folder name, Settings, the name of the folder which contains the Controller and the View folder, User is a controller of the folder Controller (UserController) and SearchUser is the method that I want to call.</p>\n\n<p>At this moment, this method has just : </p>\n\n<pre><code>/// &lt;summary&gt;\n/// Évènement déclenché lors de la recherche d'un utilisateur.\n/// &lt;/summary&gt;\n/// &lt;param name=\"text\"&gt;Le texte à chercher.&lt;/param&gt;\n/// &lt;returns&gt;OK&lt;/returns&gt;\npublic string SearchUser(string text)\n{\n    return \"OK\";\n}\n</code></pre>\n\n<p>I get on chrome : </p>\n\n<pre><code>GET http://localhost/Areas/Settings/User/SearchUser 404 (Not Found)\n</code></pre>\n\n<p>How can I do ?</p>\n"},{"tags":["asp.net","asp.net-mvc","xslt","asp.net-mvc-2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12914851,"title":"Can i use aspx view engine in xslt file that is included in my MVC 2 Project?","body":"<p>I need to use translate function like this:</p>\n\n<pre><code>    &lt;%:Utility.Translate(\"Print:\")%&gt;\n</code></pre>\n\n<p>So is it possible or i should look for alternative?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12903908,"title":"Printing single comma (or other char) in Razor view","body":"<p>I have a seemingly very small problem, but I can't find a solution for it:</p>\n\n<p>Within a Razor view i have something like this:</p>\n\n<pre><code>&lt;p&gt;\n@if (someCondition){\n   foreach (Sometype s in Model.ListOfSomeTypes){\n      @s.Name @//There is a space in front here.\n   }\n}\n&lt;/p&gt;\n</code></pre>\n\n<p>But I want to have to have all the names comma seperated, so i essentially want to do something like this:</p>\n\n<pre><code>&lt;p&gt;\n@if (someCondition){\n   foreach (Sometype s in Model.ListOfSomeTypes){\n      @s.Name, \n   }\n}\n&lt;/p&gt;\n</code></pre>\n\n<p>However, Razor freaks out. How can I achieve this kind of result?</p>\n\n<hr>\n\n<p>I have tried some variations like this:</p>\n\n<pre><code>@{','} @s.Name @//No good\n@\",\" @s.Name @//No good\n@{\",\"} @s.Name @//No good\n@StringVariableContainingComma @s.Name @//This works, but seems to be very unnessecary to me.\n</code></pre>\n\n<p>Ps. I know that the above suggested solution for comma seperated elemens don't work propperly. Removed conditions for easier reading of question.</p>\n"},{"tags":["asp.net-mvc","database","web-applications","multiple-databases"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12914531,"title":"Should Multiple applications in your web application on the same server have multiple databases?","body":"<p>I have seen a lot of posts about similar topics, but unable to find anyone with exactly what I'm looking to find out. Most questions on multiple databases with web applications are about something like \"We have a single application and this application has multiple customers in it. Should we have multiple databases for a each of these customers\". Now to me obviously the knee jerk reaction would be no. But that is not what I am asking.</p>\n\n<p>I have a Web Application that acts as our Intranet. Inside this intranet site we have many (at least 20 and growing) mini applications (some several month project applications as well). They all tie into the same Web Application (MVC 3 seperated by Areas) and currently we are using the same database for all of them. We use schemas to seperate the stored procedures and tables, but not much of the tables relate to one another and as we grow this Intranet, using relational design, each application is 3+ tables and the database still looks messy and hard to understand to me. There is a user table that is used as a relational piece to these various applications for time stamping things like IT Ticketing, Time off request for HR etc.. But outside of that, very little will ever relate to one another.</p>\n\n<p>I was wondering what peoples thoughts are on Performance ( The internet is very controversial on this part) and any other issues that can arise outside of backups (IT has us in a cluster and takes care of all the backups). Also is this just a bad idea in general??</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":262,"score":1,"question_id":1582602,"title":"How to view the controller's resulting html in debug with ASP.NET MVC?","body":"<p>Is there a way that I can see, while debugging, the result (html, xml, json) of a Controller's action. </p>\n\n<p>For instance, I have this in my controller:</p>\n\n<pre><code>    public PartialViewResult Reload()\n    {\n        return PartialView(\"Index\");\n    }\n</code></pre>\n\n<p>While debugging, I'd like to see what HTML will be sent back to the client.\nThanks</p>\n"},{"tags":["asp.net","asp.net-mvc","performance","asp.net-webforms"],"answer_count":13,"favorite_count":27,"up_vote_count":73,"down_vote_count":1,"view_count":18829,"score":72,"question_id":43743,"title":"ASP.NET MVC Performance","body":"<p>I found some wild remarks that ASP.NET MVC is 30x faster than ASP.NET WebForms. What real performance difference is there, has this been measured and what are the performance benefits.</p>\n\n<p>This is to help me consider moving from ASP.NET WebForms to ASP.NET MVC.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mono","outputcache"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12913856,"title":"How to clear OutputCache in Mono MVC2 application","body":"<p>AddCacheItemDependency is used to clear OutputCache in Mono Apache MVC2 application using code below.\nThis is described in  <a href=\"http://stackoverflow.com/questions/11585/clearing-page-cache-in-asp-net\">Clearing Page Cache in ASP.NET</a></p>\n\n<p>In Mono, OutputCache is not cleared.\nLooking into source code in GitHub shows that AddCacheItemDependency  is not implemented in Mono.\nHow to fix this so that OutputCache can cleared ?</p>\n\n<p>Andrus.</p>\n\n<pre><code>[OutputCache(Duration = 3600, VaryByParam = \"none\")]\npublic ActionResult Index()\n{\n  HttpContext.Current.Response.AddCacheItemDependency(\"Pages\");\n  return View();\n}\n\npublic ActionResult Refresh()\n{\nHttpRuntime.Cache.Insert( \"Pages\", DateTime.Now);\n}\n</code></pre>\n\n<p>in Global.asax.cs:</p>\n\n<pre><code>protected void Application_Start()\n{\nHttpRuntime.Cache.Insert( \"Pages\", DateTime.Now);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":71,"score":3,"question_id":12825129,"title":"Correct model to use for flexible survey in MVC ","body":"<p>I'm looking to create an MVC application to edit the results of various customer surveys. but I’m struggling to get the approach/ model right in my head.</p>\n\n<p>I have survey results that are stored across different database tables (one table for each version of the survey) with each version having a slightly different set of columns. I've created a combined (Sql)view which just shows the table columns that i want to edit, as the source tables contain a lot of irrelevant columns. </p>\n\n<blockquote>\n  <p>CREATE VIEW [vw_CombinedSurveyResults] AS</p>\n  \n  <p>SELECT     'V10_v2' as anTable, UniqueRecordID, ddDate, iIncidNo, bA, bB, bC, null as 'bD \n  FROM        V10_v2</p>\n  \n  <p>UNION \n  SELECT     '10_v1' as anTable, UniqueRecordID, ddDate, iIncidNo, bA, bB, null as bC, bD \n  FROM V10_v1</p>\n  \n  <p>UNION \n  SELECT    'V9_v6' as anTable,  UniqueRecordID, ddDate, iIncidNo, bA, null as bB, null as bC, bD \n  FROM         V9_v6</p>\n</blockquote>\n\n<p>My first idea was to search the combined (sql)view (filtering by date and the incident number) to and then display the results in a table, so far so good. </p>\n\n<p>The part where I’m having a brain freeze is deciding on how best to update a selected individual survey records is a neat and tidy way, and in a way that will require minimal effort when the future versions of the survey are created.</p>\n\n<p>So far I’ve got created a sql view for each of the  source tables (cut down to just have the columns I’m interested in) and using these views to create some Linq To Sql classes for each of the source cut-down views. (These are the ‘Models’)</p>\n\n<p>I’ve used one of these autogenerated classes as the model a to create strongly typed view for editing the survey values (of just one version, v10_v2) .</p>\n\n<p>I’ve got a controller for updating a cut-down view (V10_v2)  and that all works  fine … but that is just for one survey version which proves a concept but it’s very clunky.</p>\n\n<p>To  continue down this path will mean  I’ll need to create multiple (MVC) views and controllers, one for each survey table, but there must be a slicker/easier way of organising  the models or views or both?</p>\n\n<p>Thanks in advance for any suggestions.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12913234,"title":"What is the reason DisplayFor ignores html attributes?","body":"<p>When trying to use this </p>\n\n<pre><code>@Html.DisplayFor(m =&gt; m.someField, new { htmlAttributes = \"class = someclass\" })\n</code></pre>\n\n<p>the field, when rendered does not contain class someclass. I supposed its because its just writing out the text and there isn't a span element or anything to set the class on. </p>\n\n<p>I'm really looking to set the id so that I can update it via js later on.</p>\n"},{"tags":["asp.net-mvc","database","performance","design-patterns","architecture"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12913249,"title":"Some approach to work with big data cases","body":"<p>At the company that I work we have some problems with performance loading the data of database.\nOur ERP works with a big database and we need to make some complex queries.\nWe are using C# following the DDD pattern and in the front-end we are using ASP.NET MVC.</p>\n\n<p>The example that I'm talking is that:\nWe have alot of lists (grids) in the system where the data is loaded by ajax. But everytime that a user enter in some page like that (an html page), we need to make a query in the database.</p>\n\n<p>Its important to say that this data aren't only for \"query\". This data is constantly changed by the users.</p>\n\n<p>My doubt is if you have any sugestion to how we can minimize this problem. I already have searching some solutions of cache in the server side, but I don't have any experience working with cache in high complex scenarios.</p>\n\n<p>Very thanks,\nRenan Cunha.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12909876,"title":"Entity framework repeating records","body":"<p>I am working on an Entity framework project,In which i have created and entity class of a table</p>\n\n<p>and i am returning its records, below is my method of retrieving records</p>\n\n<pre><code> public UserResource GetData(long Id)\n        {\n            try\n            {\n\n                return dataContext.UserResources.Where(r =&gt; r.UserID == Id &amp;&amp; r.Resource.IsActive == true).FirstOrDefault();\n\n\n            }\n            catch (Exception ex)\n            {\n              throw ex;\n            }\n        }\n</code></pre>\n\n<p>and then on controller i am adding it to List</p>\n\n<pre><code>List&lt;UserResource&gt; objlst = new List&lt;UserResource&gt;();\nfor(int i=0;i&lt;100;i++)\n{\nvar data = objResourceRepository.GetData(userIds[i].UserID);\nif (data != null)\nobjlst.Add(data);\n}\n</code></pre>\n\n<p>userIds are coming from a separate Method\nThe problem  i am having is that the data is adding twice ie one record is adding two times, what is the problem with this code and what alternative should i use GetData() method?</p>\n"},{"tags":["c#","asp.net-mvc","dataannotations","t4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12856581,"title":"Set DisplayPropertyName value","body":"<p>I would like to know if there is a maneer (may be with data annotation) to set the value of </p>\n\n<blockquote>\n  <p>property.DisplayPropertyName</p>\n</blockquote>\n\n<p>.</p>\n\n<p>Do you have any idea please?!!</p>\n"},{"tags":["c#","ajax","asp.net-mvc","iframe","session-timeout"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":39,"score":-1,"question_id":12912906,"title":"Ajax in Iframe of another site still working even the session deleted","body":"<p>I have in my site an Iframe to another site.</p>\n\n<p>When the session of my suite ends, any click in my site jump to logIn page.</p>\n\n<p>But in the iframe there is ajax that is still working!!</p>\n\n<p>I want to make it jump to LogIn .</p>\n"},{"tags":["asp.net-mvc","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12912857,"title":"How can I put data attributes within an Ajax.BeginForm?","body":"<p>Because I am using Knockout in my view, I have set my form tag accordingly;</p>\n\n<pre><code>&lt;form class=\"employeeListEditor\" data-bind=\"submit: save\"&gt;\n</code></pre>\n\n<p>However when I click the submit button, I want to do a partial page refresh. So how do I set the data-bind attribute in the Ajax.BeginForm?</p>\n\n<p>This syntax does not work;</p>\n\n<pre><code>&lt;% using (Ajax.BeginForm(\"GetCalendar\", new AjaxOptions { UpdateTargetId = \"siteRows\" }, new { data-bind=\"submit: save\", class=\"employeeListEditor\" }))\n{%&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","osx","mono","monodevelop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":132,"score":0,"question_id":12849340,"title":"Monodevelop MVC3 razor - what is the trick to get it to work?","body":"<p>I use monodevelop 3.0.4.7 and mono 2.11.4 on mac OS 10.8.</p>\n\n<p>When I create a new solution from scratch in monodevelop I can create several types of ASP.NET mvc3 projects with razor views, but the projects get created with references to system.web.helpers and system.web.webpages that are \"not available for Mono/.net 4.0 in mono 2.11.4\" and won't build.</p>\n\n<p>If I change my .net version to 4.5 in the project options I get the system.web.webpages reference resolved, and if I simply remove the reference to system.web.helpers I am able to build the default site. However, it is unable to make use of .cshtml views, it only looks for aspx views. </p>\n\n<p>I have tried different things related to references and versions of mono, changing the viewengine to razor in global.asax.cs and even copied dll's from a windows-based asp.net mvc application, but something new breaks all the time.</p>\n\n<p>It seems strange that there are project types included that don't work from scratch, so I'm guessing/hoping I'm missing something much simpler?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12911782,"title":"In ASP.NET MVC, where the file is created by default, if I just specify the file name, and no path?","body":"<p>In ASP.NET MVC, where the file is getting created by default, if I just specify the file name, and no path?</p>\n\n<p>I'm creating the file as :</p>\n\n<pre><code>System.IO.File.WriteAllText(\"MYSTERIOUS_log.txt\", DateTime.Now.Precise() + msgString, Encoding.Unicode);\n</code></pre>\n\n<p>I looked inside the ASP.NET temporary folders, and also in the bin folder of application path of the current mvc web application. It might sound funny, but I even scanned my entire computer(all drives), for the specified file name, but still could not find it.</p>\n\n<p>PS: </p>\n\n<ol>\n<li>I can assure you, that there are no exceptions and the file is getting created properly.</li>\n<li>I'm running my application in VS2010, on the MVC 3 framework, on a XP machine.</li>\n<li>The application has also been hosted in IIS(ver 5.1).</li>\n</ol>\n\n<p>So, where is my file gone?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12906868,"title":"ASP.net MVC Controller will not return view","body":"<p>Still kinda new to ASP.net and I have this strange problem.  Its a very basic scenario but something is up and I can't figure it out.  Deploy should return a view named Deploy that is typed to the model CompiledAppModel.  However, when you click install in the view it never leaves the page despite calling the return View() method.  Any ideas?</p>\n\n<p>Here is my controller:</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult Deploy(string key_name, string custom_folder = \"\")\n    {\n        string userId = Membership.GetUser().ProviderUserKey.ToString();\n        UserDataModel user_info = _user_data_service.getUserDataByPrimaryIDNoDB(userId, HttpContext.Cache);\n        log.Trace(\"Deploy was called. key_name:\" + key_name + \" UID: \" + user_info.UID);\n        // first we'll call the info to install remote application\n        bool serviceInstall = _fms_app_service.DeployFmsApp(user_info, key_name, custom_folder);\n        // then we'll call to generate client side info\n        bool clientInstall = _fms_app_service.CompileClientApp(user_info, key_name);\n\n        var model = _fms_app_service.getInstalledAppInfo(user_info, key_name);\n        if (serviceInstall &amp;&amp; clientInstall)\n        {\n            return RedirectToAction(\"Deploy\", model);\n        }\n        return View(\"Error\");\n    }\n</code></pre>\n\n<p>and my view:</p>\n\n<pre><code>@model IEnumerable&lt;Models.Applications.FmsAppModel&gt;\n\n@foreach (var item in Model) {\n        &lt;div class=\"col\"&gt;\n            &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.friendly_name)&lt;/h2&gt;\n        &lt;p&gt;@Html.DisplayFor(modelItem =&gt; item.app_description)&lt;/p&gt;\n        &lt;p&gt;&lt;strong&gt;Tags:&lt;/strong&gt; @Html.DisplayFor(modelItem =&gt; item.app_type)&lt;/p&gt;\n\n        &lt;a href=\"#\" class=\"btn btn-primary install-app\" data-key-name=\"@(item.key_name)\"&gt;Install&lt;/a&gt;\n\n        @Html.ActionLink(\"Details\", \"Detailss\", new {  id=item.app_id  })\n    &lt;/div&gt;\n}\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n   (function () {\n\n        $('.install-app').on('click', function (e) {\n            e.preventDefault();\n            var data_key_name = $(this).data('key-name');\n            //ajax install app\n            $.ajax({\n                type: \"POST\",\n                url: '@Url.Action(\"Deploy\")',\n                data: {\n                    key_name: data_key_name\n                }\n            });\n        });\n    })();\n&lt;/script&gt;\n</code></pre>\n\n<p>And the model.</p>\n\n<pre><code>public class CompiledAppModel\n{\n    [Display(Name = \"Admin URL\")]\n    public string adminURL { get; set; }\n\n    [Display(Name = \"Viewer URL\")]\n    public string viewerURL { get; set; }\n\n    [Display(Name = \"Embed URL\")]\n    public string embedURL { get; set; }\n}\n</code></pre>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12897537,"title":"What Is correct way of updating ContentItem in Orchard?","body":"<p>I am trying to update a specific part with following code:</p>\n\n<pre><code>var nationalPart = _contentManager.Get&lt;NationalPart&gt;(Id);      \nnationalPart.Name = part.Name;\n</code></pre>\n\n<p>i have already done this.but now it is not working.even i call <code>contentManager.Flush()</code> explicitly, but still no luck. can anyone help me with this?\nthanks in advance.</p>\n\n<p><strong>EDIT</strong>: i found where my problem originates from!\n      when i make a JSON request to update a contentPart.the in memory version is updating but  it is not reflecting the result to db.now we are one step closer to answer.but what is preventing the session from updating the db? </p>\n\n<p><strong>EDIT2:</strong> </p>\n\n<p>this is code for my handler :</p>\n\n<pre><code>        public NationalPartHandler(IRepository&lt;NationalPartRecord&gt; repository)\n        {\n            Filters.Add(StorageFilter.For(repository));\n        }\n</code></pre>\n\n<p>this is code for Controller Action:</p>\n\n<pre><code>    [GridAction(EnableCustomBinding = true)]\n    public JsonResult UpdateNational(NationalViewModel Model, GridCommand Command)\n    {\n         if (!ModelState.IsValid)\n            return new JsonResult { Data = \"error\" };\n        var NationalPart = _contentmanager.Get(Model.Id).As&lt;NationalPart&gt;();\n        NationalPart.Record = new NationalPartRecord();\n        NationalPart.Record.MapFrom&lt;NationalPartRecord, NationalViewModel&gt;(Model);\n        _soccerService.UpdateNational(NationalPart);         \n        return NationalsListJson(Command);\n    }\n</code></pre>\n\n<p>and finally code for service:</p>\n\n<pre><code>public void UpdateNational(NationalPart part)\n{\n    var nationalPart = _contentManager.Get&lt;NationalPart&gt;(part.Id);      \n    nationalPart.Name = part.Name;\n    _contentManager.Flush();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mongodb","cloud"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1420,"score":6,"question_id":6263969,"title":"Hosting ASP.NET MVC 3 application using MongoDB","body":"<p>I'd like to hear if any of you had experiences developing and hosting such an application?</p>\n\n<p>What do you think about combining the two? Is there a way to host it somewhere in cloud (Azure, Amazon...)? What resources (tools, drivers, documentation) have you used for development?</p>\n\n<p>Thanks! :)</p>\n"},{"tags":["asp.net-mvc","authorization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12822113,"title":"Making AuthorizeAttribute deny users by default if Roles is empty","body":"<p>I'm rather surprised at the default behaviour of <code>AuthorizeAttribute</code>; if you don't supply it any <code>Roles</code> property, it just appears to allow <em>any</em> authorized user to access the controller/action.  I want whitelist behaviour instead; if <code>Roles</code> is null or empty, <em>deny</em> all users access.  How can I make this behaviour occur?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12911614,"title":"DbSet for ViewModel","body":"<p>I am creating a new controller and using a ViewModel as the model class. This seems to be adding a DbSet for the ViewModel which obviously then creates a table in the database for it. Should this be happening?</p>\n"},{"tags":["c#","asp.net-mvc","razor","telerik","telerik-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12911181,"title":"Telerik mvc grid double header","body":"<p>I'm working with mvc and asp.net. I have a telerik grid with 6 columns. But I need the first 6 columns grouped under 1 header and the last 3</p>\n\n<p>f.e.</p>\n\n<p>Before christ | After christ</p>\n\n<p>col1|col2|col3|col4|col5|col6</p>\n\n<p>I already found this link:\n<a href=\"http://demos.telerik.com/aspnet-ajax/grid/examples/programming/multicolumnheaders/defaultcs.aspx\" rel=\"nofollow\">Ajax grid</a></p>\n\n<p>But that is for an ajax grid and that is not what I need. I'm using a razor view. Anyone has any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12910934,"title":"Asp.Net MVC route exception","body":"<p>I am using MVC to develop my website. I am getting the following errors.</p>\n\n<p>URL:<strong>http://www.abc.com/robots.txt</strong><br>\n1. The controller for path '/robots.txt' was not found or does not implement IController.</p>\n\n<p>URL:<strong>http://www.abc.com/blogs/post/whats-new-in-mvc</strong><br>\n2. The controller for path '/blogs/post/whats-new-in-mvc' was not found or does not implement IController..</p>\n\n<p>But i dont have the above mentioned url in my website. How the above url are generated? Can you please let me know the solution to fix the above issue?</p>\n"},{"tags":["asp.net-mvc","asp.net-3.5"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":12817832,"title":"How to Embed MVC3 Website within a normal asp.net website","body":"<p>We have an existing MVC3 application developed by a 3rd party. We also have an existing asp.net application developed on framework 3.5. I have a requirement to display the MVC3 application pages on the ASP.NET pages.</p>\n\n<p>Is it possible?\nIf yes, will there be any possibility for the communication between two? Say I click on a button in ASP.NET webpage, should pass a parameter to the MVC3 application.</p>\n"},{"tags":["asp.net-mvc","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12910404,"title":"How to serialize interface to JSON in ASP.NET MVC?","body":"<p>I try to filter out unnecessary properties by casting object to some interface. Next, I serialize it to JSON object like the following code.</p>\n\n<pre><code>@{ \n    var program = ViewBag.Program as IProgram;\n}\n\n&lt;script type=\"text/javascript\"&gt;\n    window.program = @Html.Raw(Json.Encode(program));\n&lt;/script&gt;\n</code></pre>\n\n<p>However, It still serialize all properties in original object instead of serialize only properties that are defined in interface.</p>\n\n<p>How to serialize only properties in current object type instead of serialize all properties that are in original object?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":12894039,"title":"grouping and displaying models in a view","body":"<p>I am having trouble with grouping a list, and then building a model that represents that list and displaying the results in a table within a view. For example:</p>\n\n<p><strong>List of items ordered</strong></p>\n\n<ol>\n<li>Date</li>\n<li>CustomerId</li>\n<li>Location</li>\n<li>Item</li>\n<li>Price</li>\n<li>Quantity</li>\n</ol>\n\n<p>How would I correctly model and display that list in a table if I wanted to group the list by location? And what if I wanted to group the list by two properties, for example, Location and CustomerId?</p>\n\n<p>Here is my model:</p>\n\n<pre><code>public class ViewInvoice\n{\npublic string ClientLocation { get; set; }\npublic List&lt;DetailsGroup&gt; Details { get; set; }\n\npublic class DetailsGroup\n{\n    public List&lt;string&gt; Product { get; set; }\n    public List&lt;string&gt; ProductSize { get; set; }\n    public List&lt;string&gt; PackageType { get; set; }\n    public List&lt;DateTime&gt; OrderDate { get; set; }\n    public List&lt;DateTime&gt; DeliveryDate { get; set; }\n    public List&lt;int&gt; OrderNumber { get; set; }\n    public List&lt;decimal&gt; Price { get; set; }\n    public List&lt;int&gt; ItemQuantity { get; set; }\n}\n}   \n</code></pre>\n\n<p>I am trying to display this model in a table within my razor view. Here is that code:</p>\n\n<pre><code>@using MyModel.MyTools.Orders.SumOrder\n@model SumOrder\n\n@{\nViewBag.Title = \"View Invoice\";\n}\n\n&lt;h2&gt;View Invoice&lt;/h2&gt;\n\n&lt;table&gt;\n    @foreach(var prod in Model.OCI)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;\n                @prod.ClientLocation\n            &lt;/td&gt;\n        &lt;/tr&gt;\n         foreach (var orderItem in prod.Details)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @orderItem.Product\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @orderItem.ItemQuantity\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    }\n&lt;/table&gt;\n</code></pre>\n\n<p>The first row in the table displays correctly, which is the name of a city, but in the next row I get this:</p>\n\n<p>System.Collections.Generic.List1[System.String] System.Collections.Generic.List1[System.Int32]</p>\n\n<p>Can someone explain to me why I can not get the list returned in a readable format, and how to correct this problem?</p>\n\n<p>Here is the code I used to group the list for the ViewInvoice model:</p>\n\n<pre><code>public SumOrder(List&lt;orders_Cart&gt; order)\n    {\n        // create list of order cart item\n        List&lt;OrderCartItems&gt; cartItems = new List&lt;OrderCartItems&gt;();\n\n        // convert orders to ocm\n        foreach(var item in order)\n        {\n            var newCartItem = new OrderCartItems();\n            try\n            {\n                newCartItem.Product = db.product_Product.FirstOrDefault(p =&gt;\n                    p.Id == item.ProductId).ProductDescription ?? \"none\";\n            }\n            catch (Exception)\n            {\n\n                newCartItem.Product = \"none\";\n            }\n            try\n            {\n                newCartItem.ClientForProduct = MyTool.OrdersFindClientLocation(\n                    (int) item.ClientForOrdersId);\n            }\n            catch (Exception)\n            {\n\n                newCartItem.ClientForProduct = new object[3];\n            }\n            try\n            {\n                newCartItem.ProductSize = db.products_Size.FirstOrDefault(p =&gt; p.Id ==\n                    item.ProductSizeId).ProductSizeCode ?? \"none\";\n            }\n            catch (Exception)\n            {\n\n                newCartItem.ProductSize = \"none\";\n            }\n            try\n            {\n                newCartItem.PackageType = db.packaging_PackageType.FirstOrDefault(p =&gt;\n                    p.Id == item.PackageTypeId).PackageTypeCode ?? \"none\";\n            }\n            catch (Exception)\n            {\n\n                newCartItem.PackageType = \"none\";\n            }\n            newCartItem.OrderDate = (DateTime) item.OrderDate;\n            newCartItem.DeliveryDate = (DateTime) item.DeliveryDate;\n            newCartItem.OrderNumber = (int) item.OrderNumber;\n            newCartItem.Price = (decimal) item.Price;\n            newCartItem.ClientLocation = MyTool.OrdersFindClientLocation(\n                (int) item.ClientForOrdersId, null);\n            newCartItem.ItemQuantity = (int) item.Quantity;\n            cartItems.Add(newCartItem);\n        }\n\n        // group the cartItems according to location\n        List&lt;ViewInvoice&gt; ordersGrouped = cartItems.GroupBy(c =&gt; new \n            {c.ClientLocation})\n            .OrderBy(c =&gt; c.Key.ClientLocation).Select(s =&gt;\n                new ViewInvoice()\n                    {\n                        ClientLocation = s.Key.ClientLocation,\n                        Details = new List&lt;ViewInvoice.DetailsGroup&gt;()\n                            {\n                                new ViewInvoice.DetailsGroup()\n                                    {\n                                        Product = s.Select(p =&gt; p.Product).ToList(),\n                                        ItemQuantity = s.Select(p =&gt; p.ItemQuantity).ToList(),\n                                        DeliveryDate = s.Select(p =&gt; p.DeliveryDate).ToList(),\n                                        OrderDate = s.Select(p =&gt; p.OrderDate).ToList(),\n                                        OrderNumber = s.Select(p =&gt; p.OrderNumber).ToList(),\n                                        PackageType = s.Select(p =&gt; p.PackageType).ToList(),\n                                        Price = s.Select(p =&gt; p.Price).ToList(),\n                                        ProductSize = s.Select(p =&gt; p.ProductSize).ToList()\n                                    }\n\n                            }\n\n                    }).ToList();\n\n        // set the OCI property\n        OCI = ordersGrouped;\n    };\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":12888484,"title":"Display list from model in ASP.Net MVC view","body":"<p>Here is my model:</p>\n\n<pre><code>public class ViewInvoice\n{\n    public string ClientLocation { get; set; }\n    public List&lt;DetailsGroup&gt; Details { get; set; }\n\n    public class DetailsGroup\n    {\n        public List&lt;string&gt; Product { get; set; }\n        public List&lt;string&gt; ProductSize { get; set; }\n        public List&lt;string&gt; PackageType { get; set; }\n        public List&lt;DateTime&gt; OrderDate { get; set; }\n        public List&lt;DateTime&gt; DeliveryDate { get; set; }\n        public List&lt;int&gt; OrderNumber { get; set; }\n        public List&lt;decimal&gt; Price { get; set; }\n        public List&lt;int&gt; ItemQuantity { get; set; }\n    }\n}\n</code></pre>\n\n<p>I am trying to display this model in a table within my razor view. Here is that code:</p>\n\n<pre><code>@using MyModel.MyTools.Orders.SumOrder\n@model SumOrder\n\n@{\n    ViewBag.Title = \"View Invoice\";\n}\n\n&lt;h2&gt;View Invoice&lt;/h2&gt;\n\n&lt;table&gt;\n    @foreach(var prod in Model.OCI)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;\n                @prod.ClientLocation\n            &lt;/td&gt;\n        &lt;/tr&gt;\n         foreach (var orderItem in prod.Details)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @orderItem.Product\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @orderItem.ItemQuantity\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    }\n&lt;/table&gt;\n</code></pre>\n\n<p>The first row in the table displays correctly, which is the name of a city, but in the next row I get this: </p>\n\n<p>System.Collections.Generic.List<code>1[System.String]     System.Collections.Generic.List</code>1[System.Int32]</p>\n\n<p>Can someone explain to me why I can not get the list returned in a readable format, and how to correct this problem?</p>\n\n<p>Here is the code I used to group the list for the ViewInvoice model:</p>\n\n<pre><code>// group the cartItems according to location\n        List&lt;ViewInvoice&gt; ordersGrouped = cartItems.GroupBy(c =&gt; new \n            {c.ClientLocation})\n            .OrderBy(c =&gt; c.Key.ClientLocation).Select(s =&gt;\n                new ViewInvoice()\n                    {\n                        ClientLocation = s.Key.ClientLocation,\n                        Details = new List&lt;ViewInvoice.DetailsGroup&gt;()\n                            {\n                                new ViewInvoice.DetailsGroup()\n                                    {\n                                        Product = s.Select(p =&gt; p.Product).ToList(),\n                                        ItemQuantity = s.Select(p =&gt; p.ItemQuantity).ToList(),\n                                        DeliveryDate = s.Select(p =&gt; p.DeliveryDate).ToList(),\n                                        OrderDate = s.Select(p =&gt; p.OrderDate).ToList(),\n                                        OrderNumber = s.Select(p =&gt; p.OrderNumber).ToList(),\n                                        PackageType = s.Select(p =&gt; p.PackageType).ToList(),\n                                        Price = s.Select(p =&gt; p.Price).ToList(),\n                                        ProductSize = s.Select(p =&gt; p.ProductSize).ToList()\n                                    }\n\n                            }\n\n                    }).ToList();\n</code></pre>\n"},{"tags":["asp.net-mvc","caching","filter","etag"],"answer_count":2,"favorite_count":10,"up_vote_count":9,"down_vote_count":0,"view_count":1403,"score":9,"question_id":6642815,"title":"Create ETag filter in ASP.NET MVC","body":"<p>I would like to create an ETag filter in MVC.\nThe problem is that I can't control the Response.OutputStream, if I was able to do that I would simply calculate the ETag according to the result stream.\nI did this thing before in WCF but couldn't find any simple idea to do that in MVC.</p>\n\n<p>I want to be able to write something like that</p>\n\n<pre><code>[ETag]\npublic ActionResult MyAction()\n{\n    var myModel = Factory.CreateModel();\n    return View(myModel);\n}\n</code></pre>\n\n<p>Any idea?</p>\n"},{"tags":["asp.net-mvc","multi-tenant"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12910077,"title":"Are there any multi-database multi-tenant ASP.Net MVC reference applications","body":"<p>I'm currently building a multi-tenant, single code-base MVC app hosted on Windows Azure and have come up with my own application framework work to support it.</p>\n\n<p>Although it works I'm still not a 100% happy with it and I was wondering if anyone knew of a good example of multi-database,single code base out there ?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12909351,"title":"Newline in a ValidationMessage","body":"<p>I'm testing a list of things for null. Every time I find one, I save it in an array to implement it in a validationmessage.</p>\n\n<p>Output I want looks like this:</p>\n\n<p>Field 1 is required<br/>\nField 4 is required<br/>\netc...</p>\n\n<p>But I can't seem to be able to start a new line.</p>\n\n<p>Now, it looks like this:</p>\n\n<p>Field 1 is required Field 4 is required </p>\n\n<p>Does anybody know how to achieve this?</p>\n\n<p>EDIT:</p>\n\n<p>controller:</p>\n\n<pre><code> IDictionary&lt;int, String&gt; emptyFields = new Dictionary&lt;int, String&gt;();\n\n        foreach (Something thing in AnotherThing.Collection)\n        {\n            if (thing.Property == null)\n               emptyFields.add(thing.Index, thing.Name);                   \n        }\n\n        if (emptyFields.Any())\n            throw new CustomException() { EmptyFields = emptyFields };\n</code></pre>\n\n<p>This exception is handled here:</p>\n\n<pre><code>catch (CustomException ex)\n            {                   \n                ModelState.AddModelError(\"file\", ex.GetExceptionString());\n                return View(\"theView\");\n            }    \n</code></pre>\n\n<p>CustomException:</p>\n\n<pre><code>public class CustomException: Exception\n{\n    public IDictionary&lt;int,String&gt; EmptyFields { get; set; }\n    public override String Label { get { return \"someLabel\"; } }\n    public override String GetExceptionString()\n    {\n        String msg = \"\";\n        foreach (KeyValuePair&lt;int,String&gt; elem in EmptyFields)\n        {\n            msg += \"row: \" + (elem.Key + 1).ToString() + \" column: \" + elem.Value + \"&lt;br/&gt;\";      \n        }\n        return msg;        \n    }\n}\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;span style=\"color: #FF0000\"&gt;@Html.Raw(Html.ValidationMessage(\"file\").ToString())&lt;/span&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12909337,"title":"How to preserve input ids when editing lists in ASP.NET MVC?","body":"<p>I'm working with ASP.NET MVC 4, but I on't think that matters for the purpose of this question.</p>\n\n<p>I have a relatively complex model for my edit view. Like this:</p>\n\n<pre><code>public class Recipe_model\n{\n    public string Name { get; set; }\n\n    public List&lt;Recipe_Ingredient_model&gt; Ingredients { get; set; }\n}\n</code></pre>\n\n<p>where Ingredients is</p>\n\n<pre><code>public class Recipe_Ingredient_model\n{\n    public int RecipeID { get; set; }\n\n    public int? UnitID { get; set; }\n\n    public double? Quantity { get; set; }\n\n    public Ingredient_model Ingredient { get; set; }\n}\n</code></pre>\n\n<p>which itself contains the Ingredient model.</p>\n\n<p>When I make a form for this, the built-in <code>Html.EditorFor()</code> doesn't work for anything past the properties of the <code>Recipe_model</code>, so I'm using partial views to display the editor for each of the sub-models.</p>\n\n<p>That works fine as far the interface goes, but when I submit the form to the controller and try to bind to the <code>Recipe_model</code> automatically using </p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(Recipe_model model)\n    {\n        return View(model);\n    }\n</code></pre>\n\n<p>it fails because the ids of the input elements in the partial views do not conform to the correct pattern (I think ParentModel_Property). </p>\n\n<p>Short from hard-coding the ids in the partial view or binding manually from the <code>FormCollection</code> in the controller, is there some way to get the correct ids generated in the partial view so that the model will bind automatically on submit?</p>\n"},{"tags":["asp.net-mvc","redirect"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12908027,"title":"Creating custom redirect list - asp.net mvc","body":"<p>Where would I start... to do the following.</p>\n\n<p><strong>Add</strong>/ <strong>Update</strong>/ <strong>Delete</strong> Custom redirects for asp.net mvc</p>\n\n<p>I understand how to use the entity framework to build my models/views and controllers but I'm unsure where I how I should handle a list of redirects. I want control over where non-exsistant controllers resolve to.</p>\n\n<p>I can do this manually using the global but I want authenticated admins to be able to control this.</p>\n\n<p><strong>Example:</strong></p>\n\n<p>/home/contactus   <strong>></strong>   /anotherControler/Action</p>\n\n<p>/home/about  <strong>></strong>  <a href=\"http://championscentre.com/\" rel=\"nofollow\">http://championscentre.com/</a></p>\n\n<p>etc...</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12907804,"title":"Move Up and Down Div with draggable effect dynamically?","body":"<p>My page is displaying some div's which are dynamically created.</p>\n\n<p>I want to make all div draggable so the user can easily change their position up and down. I just  want up and down position.</p>\n\n<p>My code </p>\n\n<pre><code>if (@items.Data == true)\n{\n    &lt;div class=\"@items.ShortDesc test1\" id=\"@items.ShortDesc\" &gt;\n   &lt;input  type=\"text\" class=\"txtbox\" &gt;\n\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>I  am  using  jquery  Sort  its  working  fine  for  sort,  but  now  i  am  not  able  to  write  anything  on  my  textbox  which  are   in  div</p>\n\n<p>So I want to change positions of my div by up and down.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12908536,"title":"How to validate the phone no?","body":"<p>I'm using mvc. So I want to validate the phone no</p>\n\n<p>So I wrote a class.</p>\n\n<pre><code>public class StduentValidator : AbstractValidator&lt;graduandModel&gt;\n    {\n        public StduentValidator(ILocalizationService localizationService)\n        {   RuleFor(x =&gt; x.phone).NotEmpty().WithMessage(localizationService.GetResource(\"Hire.HireItem.Fields.phone.Required\"));               \n        }\n</code></pre>\n\n<p>how to validate phone no inside this class.?\nCan I use </p>\n\n<pre><code>RuleFor(x =&gt; x.phone).SetValidator(....)\n</code></pre>\n\n<p>If so how can I use it??</p>\n"},{"tags":["javascript","asp.net-mvc","json","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1522,"score":4,"question_id":8591998,"title":"IE tries to download JSON in ASP. NET MVC 3","body":"<p>I was trying to return Json from my action and after that IE tried to download it and showed me save dialog.\nI tested it in Firefox, and there it works fine.</p>\n\n<pre><code>return Json(new { success = false, message = ex.Message }, \"application/json\");\n</code></pre>\n\n<p>What is the reason of that behavior and how can I solve that issue?</p>\n\n<p>After that in Javascript part I try this</p>\n\n<pre><code> if (responseJSON.success == false) {\n                        alert(responseJSON.message);\n                        cancel();\n                    }\n</code></pre>\n\n<p>But IE doesn't show alert anyway. It brings me save dialog.</p>\n\n<p>I tried to change <code>\"application/json\"</code> with <code>\"text/plain\"</code> and save dialog disappeared, but I am not able to see alert yet. What am I missing?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here is my complect Javascript, I am using Valums qquploader(ex-Ajaxupload) for uploading images</p>\n\n<pre><code> var uploader = new qq.FileUploader({\n                element: document.getElementById(\"image-upload\"),\n                action: '/Home/ImageUpload',\n                allowedExtensions: ['jpg', 'png', 'gif'],\n                sizeLimlit: 2048,onComplete: function (id, fileName, responseJSON) {\n                    if (responseJSON.success == false) {\n                        alert(responseJSON.message);\n                        cancel();\n                    }\n                    else {\n                         alert(\"success\");\n                          //some code here\n                        }\n                     }\n                   });\n</code></pre>\n\n<p>I had tested with <code>alert(\"success\");</code> in my else part and forwarded json as <code>\"text/plain\"</code> and after that I saw the alert. But in that time <code>responseJSON.success != false</code> for me. Have you any suggestions about that?</p>\n"},{"tags":["c#","jquery","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":82,"score":0,"question_id":12907768,"title":"Want to add labels and textboxes on clicking a Href link","body":"<p>I am using MVC my code is as below,</p>\n\n<pre><code>    &lt;div class=\"form-inline\"&gt;\n    &lt;label class=\"control-label\"&gt;&lt;b&gt;Length&lt;/b&gt;&lt;/label&gt;\n\n    &lt;input type=\"text\" name=\"Refinishing.Room.Length.Feet\" id=\"Refinishing_Room_Length_Feet\" style=\"width: 80px\" class=\"floor-text\" /&gt;Ft\n    &lt;input type=\"text\" name=\"Refinishing.Room.Length.Inch\" id=\"Refinishing_Room_Length_Inch\" class=\"floor-text\" /&gt;Inch\n\n    &lt;label&gt;&lt;b&gt;Width&lt;/b&gt;&lt;/label&gt;\n\n    &lt;input type=\"text\" name=\"Refinishing.Room.Width.Feet\" id=\"Refinishing_Room_Width_Feet\" class=\"floor-text\" /&gt;Ft\n    &lt;input type=\"text\" name=\"Refinishing.Room.Width.Inch\" id=\"Refinishing_Room_Width_Inch\" class=\"floor-text\" /&gt;Inch&lt;br /&gt;\n\n    &lt;a href=\"#\"&gt;Add Room&lt;/a&gt; / &lt;a href=\"#\"&gt;Remove Room&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and I want to add the contents of \"&lt;div&gt;\" on clicking the link \"Add Room\".\nHow can it be done?</p>\n"},{"tags":["ajax","asp.net-mvc","forms-authentication"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":158,"score":1,"question_id":11032116,"title":"ASP.NET MVC Method being called twice","body":"<p>We have an controller method that is being called twice. The first time it is called we get the correct parameters, the second time it is called we get no parameters and the MVC engine throws an exception because the arguments to the method cannot be null.</p>\n\n<p>We have seen this behaviour before when using certain versions of Safari and it was to do with  authentication. When using windows authentication if the properties of the authentication in IIS were set to Negotiate and NTLM an ajax call would get sent once for each. The fix for this was to remove one (I think we just left it as NTLM). This is not the case as we are using forms authentication here.</p>\n\n<p>We have also seen similar behaviour when calling WCF methods that were returning types that were derived and not using the KnownType attributes on the parent class.</p>\n\n<p>We cannot reproduce this with any success (it's happening infrequently on a clients machine) and are looking for any general gotchas.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":900,"score":1,"question_id":788656,"title":"ASP.NET MVC Image Parameter Caching","body":"<p>I have a controller action which retuns a ImageResult (extending ActionResult). When this action method is called the first time with parameter value N, other consequent calls will ALL have the same parameter value N, while their parameters differ. I guess this is somehow related to parameter caching in ASP.NET MVC. </p>\n\n<p>As result, return image by calling the action is always the same, regardless of the parameter value. Is there a way around this?</p>\n\n<p>Maybe its something related to directly writing to Response? Here's my ImageResult:</p>\n\n<pre>\n<code>\npublic class ImageResult : ActionResult  \n{  \n    public Image Image  \n    {  \n        get; set;  \n    }  \n\n    public ImageFormat ImageFormat  \n    {  \n        get; set;  \n    }  \n\n    private static Dictionary FormatMap  \n    {  \n        get; set;  \n    }  \n\n    static ImageResult()  \n    {  \n        CreateContentTypeMap();  \n    }  \n\n    public override void ExecuteResult(ControllerContext context)  \n    {  \n        if (Image == null) throw new ArgumentNullException(\"Image\");  \n        if (ImageFormat == null) throw new ArgumentNullException(\"ImageFormat\");  \n\n        context.HttpContext.Response.Clear();  \n        context.HttpContext.Response.ContentType = FormatMap[ImageFormat];  \n\n        Image.Save(context.HttpContext.Response.OutputStream, ImageFormat);  \n    }  \n\n    private static void CreateContentTypeMap()  \n    {  \n        FormatMap = new Dictionary  \n        {  \n            { ImageFormat.Bmp,  \"image/bmp\"                },  \n            { ImageFormat.Gif,  \"image/gif\"                },  \n            { ImageFormat.Icon, \"image/vnd.microsoft.icon\" },  \n            { ImageFormat.Jpeg, \"image/Jpeg\"               },  \n            { ImageFormat.Png,  \"image/png\"                },  \n            { ImageFormat.Tiff, \"image/tiff\"               },  \n            { ImageFormat.Wmf,  \"image/wmf\"                }  \n        };  \n    }  \n}  \n</code>\n</pre>\n\n<p>and the controller action:</p>\n\n<pre>\n<code>\npublic ActionResult GetCalendarBadge(DateTime displayDate)\n{\n    var bmp = SomeBitmap();\n    var g = Graphics.FromImage(bmp);\n\n    //GDI+ to draw the image.\n\n    return new ImageResult { Image = bmp, ImageFormat = ImageFormat.Png };\n}\n</code>\n</pre>\n\n<p>and the view code:</p>\n\n<pre>\n<code>\n&lt;% foreach(var item in this.Model.News) { %&gt;  \n      &lt;%= Html.Image&lt;NewsController&gt;(o => o.GetCalendarBadge(item.DisplayDate), 75, 75)%&gt;\n&lt;% } %&gt;\n</code>\n</pre>\n\n<p>Also tried adding these two avoid caching but nothing happened:</p>\n\n<pre>\n<code>\n  context.HttpContext.Response.Cache.SetNoStore();  \n  context.HttpContext.Response.Expires = 0;  \n  context.HttpContext.Response.AppendHeader(\"Pragma\", \"no-cache\");  \n</code>\n</pre>\n"},{"tags":["c#","jquery","ajax","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":103,"score":-3,"question_id":12866204,"title":"Populating an MVC Model in a View using JQuery ajax with C# code behind","body":"<p>In a <em>ASP.NET MVC</em> View, what is the syntax to populate a Model using JQuery's <code>$.getJSON</code> or <code>$.ajax</code>?</p>\n\n<p>The MVC code behind is written in C#. </p>\n\n<p>For an MVC View is there something like? -</p>\n\n<blockquote>\n<pre><code>@model MyModel\n\n$.getJSON('@Url.Action(\"MyAction\",\"MyController\")/', function (dataReturned) { \n\n    @model = dataReturned  //put the data that is returned into the Model\n\n}\n</code></pre>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","fluentvalidation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12907242,"title":"How to validate only 7 digit number?","body":"<p>I'm using mvc. So I want to validate user input number is 7 digit.</p>\n\n<p>So I wrote a class.</p>\n\n<pre><code> public class StduentValidator : AbstractValidator&lt;graduandModel&gt;\n    {\n        public StduentValidator(ILocalizationService localizationService)\n        {                          \n           RuleFor(x =&gt; x.student_id).Equal(7)\n               .WithMessage(localizationService\n                    .GetResource(\"Hire.graduand.Fields.student_id.Required\"));                   \n        }\n</code></pre>\n\n<p>But it is not working.\nHow to validate 7 digit numbers?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","asp.net-web-api"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":149,"score":2,"question_id":12905566,"title":"Web API in MVC solution in separate project","body":"<p>I am creating a new MVC4 project and have recently read this article regarding web API: <a href=\"http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/\" rel=\"nofollow\">http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/</a></p>\n\n<p>This lead me to research further and from I have found, communicating from javascript to the server side is better achieved now through web API framework rather than controller actions. Is my understanding correct on this?</p>\n\n<p>I am presuming that I can share all my attributes etc between web API and MVC controllers so on the face it, it does not seem a massive change for me.</p>\n\n<p>When I am setting up applications, I like to split components out in to projects. My plan was to have a MVC project and a web API project. But I have ran in to issues. For example I have ended up with 2 apps as such, separate routing set up etc etc.</p>\n\n<p>So my question is, in a MVC application should the web API framework sit within the same project, or should the web API be separated into a project of its own and work around the issues?</p>\n"}]}
