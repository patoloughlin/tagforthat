{"count":44691,"tag":"asp.net-mvc","questions":[{"tags":["asp.net-mvc","reporting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2,"score":0,"question_id":13281629,"title":"Are there any reporting tools that provide an MVC 3 ReportViewer out of the box?","body":"<p>As stated in the title. Most of what I've seen involve workarounds to get their native Webforms report viwers into the MVC workspace. Are there any, free or paid, that provide this?</p>\n"},{"tags":["asp.net-mvc","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13089387,"title":"Can I map a database column description to the DisplayNameAttribute?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7950917/entity-framework-4-1-dynamically-retrieve-summary-for-scalar-properties-from-dat\">Entity Framework 4.1 dynamically retrieve summary for scalar properties from database table column description</a>  </p>\n</blockquote>\n\n\n\n<p>Is it possible to map the Column Description (the extended property <code>MS_Description</code> in the database ) to the <code>DisplayNameAttribute</code> (the name used by <code>@Html.DisplayNameFor</code>) ?</p>\n\n<p>I don't want to use Data Annotations, as I would like the DBA to set the proper column descriptions in the database. </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13272019,"title":"Single click on button not working but double click does the work","body":"<p>Here is my html code</p>\n\n<pre><code>&lt;form runat=\"server\"&gt;\n    Hello, i'm login page\n    Enter Name   &lt;asp:TextBox ID=\"txtName\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n    &lt;input type=\"submit\" value=\"PressMe\" onclick=\"location.href='&lt;%: Url.Action(\"EnterLogin\", \"LoginForm\") %&gt;'\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here is my controller code</p>\n\n<pre><code>public class LoginFormController : Controller\n{\n    public ActionResult ShowLogin()\n    {\n        return View();\n    }\n\n    public ActionResult EnterLogin()\n    {\n        ViewData[\"Name\"] = Convert.ToString(Request.Form[\"txtName\"]);\n        return View(\"EnterLogin\");\n    }\n}\n</code></pre>\n\n<p>On clicking <strong>PressMe</strong> button the expected output is to display Enter Login View but it doesn't.If i double click on the button then it works fine.\nAny reason for single click not to work??</p>\n"},{"tags":["asp.net-mvc","msbuild","tfs2010","msdeploy","continuous-deployment"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13274442,"title":"TFS2010 msbuild msdeploy Unauthorized Error","body":"<p>Appreciate any guidance or advice on below issue</p>\n\n<p>I am using TFS2010 and below msbuild parameters in order to deploy build on staging server (continous deployment). I have done all necessery configuration such as</p>\n\n<blockquote>\n  <p>Management Service Delegation </p>\n  \n  <p>Management Service </p>\n  \n  <p>Filesystem Permission</p>\n  \n  <p>IIS Manager Permission</p>\n</blockquote>\n\n<p>msbuild parameters</p>\n\n<pre><code>/p:validatearchitecture=true  /p:AllowUntrustedCertificate=True /p:DeployOnbuild=True \n/p:DeployTarget=MsDeployPublish /p:MSDeployPublishMethod=WMSVC \n/p:MsDeployServiceUrl=stagingserver\n/p:DeployIISAppPath=\"cddemo\" /p:UserName=username /p:Password=password \n/p:Outdir=\"D:\\Demo\\Demo\\\\\" \n</code></pre>\n\n<p>Having below error. how to resolve it? and How can I remove https from link and use verbosity parameter to see detailed error. </p>\n\n<blockquote>\n  <p>C:\\Program Files (x86)\\MSBuild\\Microsoft\\VisualStudio\\v10.0\n  \\Web\\Microsoft.Web.Publishing.targets (3588): Web deployment task\n  failed.(Remote agent (URL \n  <code>https://stagingserver:8172/msdeploy.axd?site=cddemo</code>) could not be\n  contacted.  Make sure the remote agent service is installed and\n  started on the target computer.) Make sure the site name, user name,\n  and password are correct. If the issue is not resolved, please contact\n  your local or server administrator. Error details: Remote agent (URL\n  <code>https://stagingserver:8172/msdeploy.axd?site=cddemo</code>) could not be\n  contacted.  Make sure the remote agent service is installed and\n  started on the target computer. An unsupported response was received.\n  The response header 'MSDeploy.Response' was '' but 'v1' was expected.\n  <strong>The remote server returned an error: (401) Unauthorized.</strong></p>\n</blockquote>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","c#-4.0","attributes"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13271741,"title":"Progress bar on synchronious operations in Mvc 3","body":"<p>I have long synchronious calls to MainFrame in my Mvc 3 application \nI'd like to create a custom Attribute that will decorate My controller actions which I know can take long time. And if controller is decorated with this attribute I need to render \"loading message\"</p>\n\n<p>Any Ideas please , could it be achieved ?</p>\n"},{"tags":["asp.net-mvc","rest","web-config","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13279283,"title":"How to point .NET WEB API application to load unreferenced controllers from BIN subdirectories","body":"<p>I am developing .NET WEB Api REST Service using framework 4.5 and the architectural direction now is to separate functional areas of our API. In other words, placing controllers into separate assemblies, e.g. having controllers in assemblies like company.web.administration, company.web.claims, etc.</p>\n\n<p>After experimenting with it, I noticed the power of the MVC framework. I can place controllers into separate class libraries but as long as these libraries are in the bin folder, they <strong>don't even have to be referenced</strong>. MVC finds them in the assemblies and API calls work fine.</p>\n\n<p>But under this architecture, the problem arises that we might get large number of these controller libraries. So, it would be helpful to pack them together under bin\\controllers, for example.\nDropping controllers into sub-folder ceases ability of ASP.NET MVC WEB API Framework to find them. </p>\n\n<p>I am searching for a way to tell Framework to look for these controllers under my directories as well as in bin. One of the options I used is I modified Web.config file as following: </p>\n\n<pre><code>&lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n        &lt;probing privatePath=\"bin;bin\\controllers\"/&gt;\n    &lt;/assemblyBinding&gt;\n&lt;/runtime&gt;\n</code></pre>\n\n<p>That didn't work. Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13255107,"title":"Can I modify MVC viewmodel before passing it into a Partial","body":"<p>If I have a model passed onto Index.cshtml </p>\n\n<p>Can I modify a property on the model inside of a code block in Index.cshtml and then pass modified model into Html.Partial(\"_MyView\", Model)</p>\n\n<pre><code>@model.Name = \"Joe\"\n\n@Html.Partial(\"_MyView\", Model)\n\n@model.Name = \"Ann\"\n\n@Html.Partial(\"_MyView\", Model)\n</code></pre>\n"},{"tags":["asp.net-mvc","structuremap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13253195,"title":"Configuring Structure Map on Application_BeginRequest in Global.asax for specific user","body":"<p>I have a Foo and Foo1 classes which both implements IFoo. Default mapping for IFoo is Foo in StructureMap. But, for some users I would like to map IFoo to Foo1. I have a <code>if</code> block on <code>Application_BeginRequest</code> in <em><code>Global.asax</code></em> that maps IFoo to Foo1 for the specific user. But, whenever I do this all the user start to using Foo1 instead of Foo.</p>\n\n<p>I tried all the lifecycle such as <code>HttpContextLifecycle</code>, <code>UniquePerRequestLifecycle</code>, <code>HttpContextLifecycle</code>, but did not work.</p>\n\n<p>Here is the code I use:</p>\n\n<pre><code>  StructureMap.ObjectFactory.Configure(config =&gt;\n  config.For&lt;IFoo&gt;()\n  .LifecycleIs(new StructureMap.Pipeline.HttpContextLifecycle())\n  .Use(Foo1)\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13249963,"title":"jqGrid navigation doesn't respond","body":"<p>I am working in MVC3 and using jqGrid 4.4.1, I am new to jqGrid so this is basic question.</p>\n\n<p>I have successfully geting data to Grid and showing first site. But when I click next page, I don't get any response.</p>\n\n<pre><code>var myMeasurementsGrid = $(\"#gridMeasurementsTableView\" + randomId);\n\nmyMeasurementsGrid.jqGrid({\n        url: '/DataMonitor/CreateMeasurementTableView/',\n        datatype: \"json\",\n        mtype: 'POST',\n        postData: { \"mrpId\": dataToSend.mrpId, \"chartId\": dataToSend.chartId, \"mrpStartTime\": dataToSend.mrpFilter.FilterTimeWindow.StartTimeStamp, \"mrpEndTime\": dataToSend.mrpFilter.FilterTimeWindow.EndTimestamp },\n        jsonReader : {\n            root: \"data\",\n            page: \"Page\",\n            total: \"total\",\n            records: \"records\",  \n            repeatitems: false,\n            cell: \"cell\",\n            id: \"id\" \n           },  \n        colNames: ['Date', 'Value'],\n        colModel: [\n            { name: 'Timestamp', index: 'Timestamp', width: 260, \n                formatter: function (cellvalue, options, rowObject) {\n                        return new Date(parseInt(cellvalue.substr(6, cellvalue.length - 8), 10));\n                    }  \n            },\n            { name: 'Value', index: 'Value', width: 160, align: 'center' }  \n        ],\n        loadui: \"disable\",\n        loadtext: \"Loading\",\n        viewrecords: true,\n        gridview: true,\n        rowNum: 10,\n        height: \"100%\",\n        caption: \"Measurements2\",\n        pager: $(\"#gridpager\" + randomId),\n        loadonce: true,\n        sortname: 'Timestamp',\n        sortorder: \"asc\",\n        rowList: [10, 50, 100]\n    });\n</code></pre>\n\n<p>Function behind is:</p>\n\n<pre><code>     [HttpPost]\n        public ActionResult CreateMeasurementTableView(string sidx, string sord, int page, int rows, int mrpId, string divId, string chartId, DateTime mrpStartTime, DateTime mrpEndTime)\n        {\n... here is my code, for getting data\n\nreturn Json(new\n            {\n                total = listaAvailableMeasurements.Count(),\n                records = listaAvailableMeasurements.Count(),\n                data = listaAvailableMeasurements,\n                Page = page,\n                SortColumn = sidx,\n                SortOrder = sord\n            });\n</code></pre>\n\n<p>does anyone have an idea, why is not navigation responding?</p>\n\n<p>br,\nJan</p>\n"},{"tags":["xml","asp.net-mvc","redirect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13257949,"title":"mvc redirect after rss creation","body":"<p>I have a controller Action that takes the model from my view and saves the data to the database. </p>\n\n<p>I then grab a list of items from my database and create an rss feed (.xml).</p>\n\n<p>Once that is created, I want to redirect the user back to a different page, but instead of redirecting, I am getting \n'This XML file does not appear to have any style information associated with it. The document tree is shown below.' from my browser.</p>\n\n<p>It seems to me what is happening is it is trying pass the xml file on the redirect?? which I don't want, I just want to redirect to a new page.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    'public ActionResult EditItem(int Id, FormCollection form)\n    '{ // UpdateModel \n    '  // Save item to db\n    '  \n    '  CreateRss();\n    '  \n    '  return Redirect(\"/ListItems\");\n    '}\n\n    'private void CreateRSS()\n    '{\n    ' Response.Clear()\n    ' Response.ContentType = \"text/xml\";\n    ' XmlTextWriter feedWriter = new XmlTextWriter(path, Encoding.UTF8);\n    '\n    ' //code to write lines to xml file\n    '\n    ' Response.End();\n    ' }\n</code></pre>\n\n<p>As far as I can tell, once the CreateRSS() has been called, the page should just redirect as normal.</p>\n\n<p>Can anyone tell me why its not?? and how to fix it??</p>\n\n<p>Thanks in advance\nChris</p>\n"},{"tags":["asp.net-mvc","controller","asp.net-mvc-4","http-post","parameter-passing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13264018,"title":"MVC 4 - pass parameter to controller from URL while collecting form data","body":"<p>I have a form on my view with 2 fields. The user clicks on the submit button and some data will be queried specific to that user and the data they entered into the form.\nThe user's email address is passed on the URL. (e.g. ActionName?user_email=yaddd@yyy.com)\nI need to collect the form data and the email from the URL and pass it into my controller.</p>\n\n<p>I need the data to query from my database and display a message to the user.</p>\n\n<p>I can't find any good links or sites regarding this issue.</p>\n\n<p>This is what I have tried so far:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Collect(String s1, String s2, string user_email)\n    {}\n    and \n    [HttpPost]\n    public ActionResult Collect(FormCollection fm, string user_email)\n    {}\n</code></pre>\n\n<p>They don't seem to collect the form data at all. What do you suggest?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":13271067,"title":"Difference between Display(Name) and DisplayName","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5243665/displayname-attribute-vs-display-attribute\">displayname attribute vs display attribute</a>  </p>\n</blockquote>\n\n\n\n<p>Is there any difference between <code>Display(Name=\"MyName\")</code> and  <code>DisplayName(\"MyName\")</code> or is it only a feature of ASP.NET MVC ? \nI'm talking about the namespace <b>System.ComponentModel.DataAnnotations</b>.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13273613,"title":"MVC: proper authentication","body":"<p>In my controller I have a login method. There I check credentials and if everything is ok call</p>\n\n<pre><code>FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n</code></pre>\n\n<p>It works but if I immediately check</p>\n\n<pre><code>this.User.Identity.IsAuthenticated\n</code></pre>\n\n<p>inside a controller I see that it is still false. I need to refresh a page to see that user is indeed authenticated. Is there a possibility to make user authenticated immediately, during the same request? Other partial views which are rendered after depend on it.</p>\n\n<p>In web forms development I would call something like </p>\n\n<pre><code>RedirectFromLoginPage\n</code></pre>\n\n<p>but here it is inside partial view rendered from a layout file, I can't redirect from there.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","jqgrid"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13274096,"title":"Good programming principles while using EF/Code First/Repository Pattern/Table Per Type (TPT)?","body":"<p>Just curious.</p>\n\n<p>Say I have a Base entity and I'm deriving about 10 different child entities from it using the Table Per Type method. I also have a generic repository which can fetch me data from each of these child entities. I eventually want to map each of the child entities to a separate view model and link each of the view models to its own grid (JqGrid) on my website, with each grid having its own Create, Read, Update, Delete methods. I can do all of that, but I'm not sure what's the proper way to go about it while keeping code to a minimum.</p>\n\n<p>Right now, I have every field defined (from both the parent and child entity) in each of my view models. Is it better to have a \"parent\" view model and then deriving the child view models from it in order to mimic the inheritance structure of the entities? I wouldn't think so....having inheritance in view models doesn't make much sense to me.</p>\n\n<p>Also, I really don't want to duplicate CRUD operations for each grid. Is that considered good practice? Should each view model have its own set of CRUD operations in this case?</p>\n\n<p>Take 'Read' for instance. I'm basically returning JSON data based on the ID (key) field of the view model for each grid. And since all grids will have this ID column (part of the parent entity), should I only have one function that takes care of this for all grids? Should I be using reflections? Should I be making use of polymorphic properties of the parent/child entities?</p>\n\n<p>Or is it better to keep these operations separate for each grid?</p>\n\n<p>Hmmm..</p>\n"},{"tags":["asp.net-mvc","dependency-injection","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13279088,"title":"Dependency Injection - Passing dependencies all the way down","body":"<p>I have an MVC application with a typical architecture...</p>\n\n<blockquote>\n  <p>ASP.NET MVC Controller -> Person Service -> Person Repository -> Entity Framework DB Context</p>\n</blockquote>\n\n<p>I am using Castle Windsor and I can see the benefit of using this along with a ControllerFactory to create controller with the right dependencies. Using this approach the Controller gets a Service injected, which in turn knows how to construct the right Repository, which in turn knows the correct DbContext to use.</p>\n\n<p>The windsor config is something like this...</p>\n\n<pre><code>dicontainer = new WindsorContainer();\ndicontainer.Register(Component.For&lt;IPersonService&gt;().ImplementedBy&lt;PersonService&gt;());\ndicontainer.Register(\n    Component.For&lt;IPersonRepository&gt;().UsingFactoryMethod(\n        () =&gt; new PersonRepository(new HrContext(\"connectionString\"))));\n</code></pre>\n\n<p>It this the right way to do it? I don't like the UsingFactoryMethod, but can't think of another way.</p>\n\n<p>Also, what if the Repository needed a dependency (say ILogger) that was not needed by the service layer? Does this mean I have to pass the ILogger into the service layer and not use it. This seems like a poor design. I'd appreciate some pointers here. I have read loads of articles, but not found a concrete example to verify whether I am doing this right. Thanks.</p>\n"},{"tags":["asp.net-mvc","iis","http-status-code-401","form-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13279593,"title":"401 Unauthorized: Access is denied due to invalid credentials","body":"<p>I am using IIS Express to deploy MVC4 application. This website runs perfectly on same computer. But in Lan it gives me error 401. </p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/\" slidingExpiration=\"true\" timeout=\"20\"&gt;\n  &lt;/forms&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>In home controller </p>\n\n<pre><code>[HttpPost]\n[AllowAnonymous]        \n    public ActionResult Index(LoginModel model, string returnUrl)\n    {\n    }\n</code></pre>\n\n<p>I am starting IIS server from command prompt in Administrator mode.  IIS responds to the request with error <code>401</code>. </p>\n\n<p>Any clue??</p>\n"},{"tags":["asp.net-mvc","iis","shared-host"],"answer_count":7,"favorite_count":6,"up_vote_count":22,"down_vote_count":0,"view_count":14016,"score":22,"question_id":57712,"title":"ASP.NET MVC and IIS 5","body":"<p>What is the best way to get hosting of an ASP.NET MVC application to work on IIS 5 (6 or 7). When I tried to publish my ASP.NET MVC application, all I seemed to get is 404 errors. I've done a bit of googleing and have found a couple of solutions, but neither seem super elegant, and I worry if they will be unusable once I come to use a shared hosting environment for the application.</p>\n\n<p><a href=\"http://blogs.microsoft.co.il/blogs/dorony/archive/2007/12/15/using-asp-net-mvc-on-iis-5.aspx\">Solution 1</a></p>\n\n<blockquote>\n  <ol>\n  <li>Right-click your application virtual directory on inetmgr.exe.</li>\n  <li>Properties->Virtual Directory Tab-> Configuration.</li>\n  <li>Add a new mapping extension. The extension should be .*, which will be\n  mapped to the Executable\n  C:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\aspnet_isapi.dll,\n  or the appropriate location on your\n  computer (you can simply copy this\n  from the mapping for .aspx files). On\n  the mapping uncheck \"check that file\n  exists\".</li>\n  <li>3 X OK and you're good to go.</li>\n  <li>If you want, you can apply this setting to all your web sites. In\n  step1, click on the \"Default Web Site\"\n  node instead of your own virtual\n  directory, and in step 2 go to the\n  \"Home Directory\" tab. The rest is the\n  same.</li>\n  </ol>\n</blockquote>\n\n<p>It seems a tad hacky to route everything through ASP.NET.</p>\n\n<p><a href=\"http://blog.pagedesigners.co.nz/?p=29\">Solutions 2</a></p>\n\n<p>Edit the MVC routing to contain .mvc in the URL and then follow the steps in solution 1 based around this extension. <em>Edit: The original image link was lost, but here it is from Google's Cache:</em></p>\n\n<blockquote>\n  <p><img src=\"http://i.stack.imgur.com/TDp4F.png\" alt=\"alt text\"></p>\n</blockquote>\n"},{"tags":["html","asp.net-mvc","attributes","editorfor"],"answer_count":6,"favorite_count":7,"up_vote_count":31,"down_vote_count":0,"view_count":31679,"score":31,"question_id":3735400,"title":"Html attributes for EditorFor() in ASP.NET MVC","body":"<p>Why can't I pass in html attributes to EditorFor()? eg; </p>\n\n<pre><code>&lt;%= Html.EditorFor(model =&gt; model.Control.PeriodType, \n    new { disabled = \"disabled\", readonly = \"readonly\" }) %&gt;\n</code></pre>\n\n<p>I don't want to use metadata</p>\n\n<p><strong>Update</strong>: The solution was to call this from the view :</p>\n\n<pre><code> &lt;%=Html.EditorFor( model =&gt; model.Control.PeriodEndDate, new {Modifiable=model.Control.PeriodEndDateModifiable})%&gt;\n</code></pre>\n\n<p>and use <code>ViewData[\"Modifiable\"]</code> in my custom EditorTemplates/String.ascx where I have some view logic that determines whether to add readonly and/or disabled attributes to the input\nThe anonymous object passed into EditorFor() is a parameter called additionalViewData and its properties are passed to the editor template in the ViewData collection</p>\n"},{"tags":["asp.net","asp.net-mvc","testing","web-applications","user-interface"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13022602,"title":"automated functional web GUI testing frameworks (asp.net)","body":"<p>we have a mix of ASP.NET webforms and upcoming MVC projects; I am after a reliable and maintainable web GUI testing tools/framework;  At the moment we have some Watin tests and seeing that Watin hasn't been actively worked on over over 15 months I am a bit reluctant to invest any more in this or should I?</p>\n\n<p>What are the options and what is the best one to use.</p>\n\n<p><strong>Selenium</strong>\n- Although limited Visual Studio integration seems to be a good one.</p>\n\n<p><strong>Watin</strong>\n- Seems obsolete and doesn't seem to cope well with modern JQuery websites.</p>\n\n<p><strong>Telerik Test Studio</strong>\n- Looks very promising, has any one tried it? is it worth it?</p>\n\n<p>Are there any other viable options for ASP.NET and possible visual studio integration?</p>\n\n<p>I know there is an existing question on this <a href=\"http://stackoverflow.com/questions/1239625/web-testing-frameworks-for-asp-net-web-application\">Web testing frameworks for ASP.NET web application</a> but it doesn't really answer anything.</p>\n\n<p>for green fields projects what are people using out there for automated function UI testing.</p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13280624,"title":"How to write if condition inside where clause in linq","body":"<p>I want to write  if condition inside where clause. because if first name or last name is null I don't wani to add it in where  clause . other wise I want to add it.</p>\n\n<p>so I write </p>\n\n<pre><code>var query1 = from opv in _opvRepository.Table\n                         join o in _orderRepository.Table on opv.OrderId equals o.Id\n                         join gr in _graduandRepository.Table on opv.graduand_id equals gr.graduand_id\n                         join pv in _productVariantRepository.Table on opv.ProductVariantId equals pv.Id\n                         join p in _productRepository.Table on pv.ProductId equals p.Id\n                         where (opv.ceremony_id == ceremony_id) &amp;&amp; \n                         (!o.Deleted) &amp;&amp; (opv.IsHireItem == true)  &amp;&amp;\n                         (!p.Deleted) &amp;&amp;\n                         (!pv.Deleted) &amp;&amp; (opv.ceremony_id == ceremony_id)      \n                       //  group opv by opv.OrderId into g\n                         select new\n                         {\n                             opvTable = opv,\n                             grTable = gr,\n\n                         };\n\n\n// This is not working. I have problem in here. How to add this??\n             if (!String.IsNullOrEmpty(Fname))\n                 query1 = query1.Where(grTable = &gt; grTable.first_name == Fname);\n\n\n\n\n            var result = query1.ToList().Select(x =&gt;\n            {\n                return new HireItemReportLine()\n                {\n                    OrderId = x.opvTable.OrderId,\n                    OrderDate=x.opvTable.Order.CreatedOnUtc,\n                    Amount= x.opvTable.Order.OrderSubtotalExclTax,\n                    PaymentMethod = x.opvTable.Order.PaymentMethodSystemName,\n                    paidDate = x.opvTable.Order.CreatedOnUtc,\n\n                    Fname = x.grTable.first_name,\n                    MName = x.grTable.middle_name,\n                    LName = x.grTable.last_name,\n\n\n\n                };\n            }).ToList();\n</code></pre>\n\n<p>What is the wrong with my cording??</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","wcf","http"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":13063983,"title":"Run asynchronous operation in one controller method and get that operation's result in another","body":"<p>I have a long running operation you might read in couple of my another questions (for your reference here is <a href=\"http://stackoverflow.com/questions/12836060/articles-on-how-to-organize-background-queue-operations\">first</a> and <a href=\"http://stackoverflow.com/questions/12900382/how-to-determine-progress-of-pending-operations-in-queue\">second</a>). </p>\n\n<p>In the beginning of whole deal, project expose a form in which user should specify all necessary information about XML file and upload XML file itself. In that method all user input data caught and went to an WCF service that handles such king of files. Controller got only task id of such processing. \nThen user got redirected to progress bar page and periodically retrieves status of task completeness, refreshes the progress bar.</p>\n\n<p>So here is my issue comes. When processing of XML file if over, how can I get results back and show them to user?</p>\n\n<p>I know that HTTP is stateless protocol but there is cookie mechanism that could help in this situation. Of course, I may just save processing results to some temporary place, like a static class in WCF server, but there is a high load on service, so it will eat all of supplied memory.</p>\n\n<p>In other words, I would like to pass task to WCF service (using netNamedPipeBinding) and receive results back as fast as it really possible. I want to escape temporary saving result to some buffer and wait until client will gather it back.</p>\n\n<hr>\n\n<p>As far as I go is using temporary buffer not on service side but at client's:</p>\n\n<pre><code>using (XmlProcessingServiceClient client = new XmlProcessingServiceClient())\n{\n    client.AnalyzeXmlAsync(new Task { fileName = filePath, id = tid });\n    client.AnalyzeXmlCompleted += (sender, e) =&gt;\n    {\n        System.Web.HttpContext.Current.Application.Lock();\n        // here is I just use single place for all clients. I know it is not right, it is just for illustrating purposes.\n        System.Web.HttpContext.Current.Application[\"Result\"] = e;\n        System.Web.HttpContext.Current.Application.UnLock();\n    };\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","json","asp.net-web-api","json.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13261760,"title":"How to read properties when POST but JsonIgnore GET in Json .NET Web API","body":"<p>I'm trying to make Json .NET Ignore a property by using the Json Ignore Attribute when clients GET the object but I want to be able to receive that property when a client is POST'ing</p>\n\n<p>In example I have:</p>\n\n<p>When the client POSTs data, password should be sent:</p>\n\n<pre><code>{\"email\":\"email@domain.com\",\"password\":\"P@ssW0rd1!\",\"firstname\":\"Joe\",\"lastname\":\"Doe\"}\n</code></pre>\n\n<p>However, when the client GETs the same object, I should Ignore the Password:  </p>\n\n<pre><code>{\"email\":\"email@domain.com\",\"firstname\":\"Joe\",\"lastname\":\"Doe\"}\n</code></pre>\n\n<p>Class:</p>\n\n<pre><code>    public class User\n    {\n        public User()\n        {\n            this.JoinDate = DateTime.UtcNow;\n            this.IsActive = false;\n        }\n        public int Id { get; set; }\n\n        [Required(ErrorMessage = \"Email is required!\")]\n        public string Email { get; set; }\n\n        [JsonIgnore]\n        public string HashedPassword { get; set; }\n\n        [Required(ErrorMessage = \"Password is required!\")]\n        public string Password { get; set; }\n\n        public DateTime JoinDate { get; set; }\n\n        [Required(ErrorMessage = \"First Name is required!\")]\n        public string FirstName { get; set; }\n\n        [Required(ErrorMessage = \"Last Name is required!\")]\n        public string LastName { get; set; }\n\n   }\n</code></pre>\n\n<p>Any ideas, suggestions, comments???</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","mobile","jquery-mobile"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":13273851,"title":"ASP.net: Using .NET Technologies to develop robust web applications, what tools do I need?","body":"<p>Looking for a rundown of all the tools available that will allow me to develop mobile websites using the .NET stack. I'm likely going to be using MVC 4 and jQuery Mobile, but what else do I need to be thinking about as far as getting all devices compatible. Keep in mind, I'm talking about web sites, not native apps right now.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","jquery-ajax","unobtrusive-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13280026,"title":"Wiring up Ajax.BeginForm that didn't exist during doc.ready?","body":"<p>I have a MVC page that loads a Partial via a Ajax.ActionLink, which works, and then the loaded Partial contains a form that has Ajax.BeginForm.  This form is not getting wired up to unobtrusive ajax, and instead is performing a page refresh(I verified this in the Network log of the browser that shows the initiator when I click submit is the browser instead of jquery).</p>\n\n<p>What I believe is the issue is that since the form didn't exist when the page is loaded(but later is added via the Ajax.ActionLink), then unobtrusive ajax didn't see the data-ajax attributes on the newly added form and wire up the necessary events.  I'm assuming that only happens at document.ready, and the ajax form didn't exist then.</p>\n\n<p><strong>Is there something I can do to say \"hey Unobstrusive Ajax, please look at my page again now that I have some new elements that are marked with data-ajax and wire them up\"?</strong></p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","linq"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":19,"score":-5,"question_id":13279844,"title":"How to do group by and join table in linq?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13279499/how-to-join-and-group-by-with-linq\">How to join and group by with linq?</a>  </p>\n</blockquote>\n\n\n\n<p>I want to join table and  and group by in linq.\nSo I write </p>\n\n<pre><code>   var query1 = from opv in _opvRepository.Table\n                         join o in _orderRepository.Table on opv.OrderId equals o.Id\n                         join gr in _graduandRepository.Table on opv.graduand_id equals gr.graduand_id\n                         join pv in _productVariantRepository.Table on opv.ProductVariantId equals pv.Id\n                         join p in _productRepository.Table on pv.ProductId equals p.Id\n                         where (opv.ceremony_id == ceremony_id) &amp;&amp;\n                         (!o.Deleted) &amp;&amp; (opv.IsHireItem == true)  &amp;&amp;\n                         (!p.Deleted) &amp;&amp;\n                         (!pv.Deleted) &amp;&amp; (opv.ceremony_id == ceremony_id)\n                          group opv by opv.OrderId into g\n                          select new\n                          {\n                              TotalAmount = g.Sum(x =&gt; x.PriceExclTax),\n                               table2Val = gr\n\n                          };   \n\n\n            var result = query1.ToList().Select(x =&gt;\n            {\n                return new HireItemReportLine()\n                {\n                    Fname = x.table2Val.first_name,\n                  MName = x.table2Val.middle_name,\n                  LName = x.table2Val.last_name,\n                };\n            }).ToList();\n</code></pre>\n\n<p>I want to select the <code>gr</code> table data, <code>opv</code> table data and <code>o</code> table data.</p>\n\n<p>But there is error and it says</p>\n\n<pre><code>The name 'gr' does not exist in the current context\n</code></pre>\n\n<p>How to solve it??</p>\n"},{"tags":["c#",".net","asp.net-mvc","dependency-injection","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12320846,"title":"Some questions about webapi ActionFilterAttribtes, FilterProvider, and Dependency Injection","body":"<p>I see that by default, an MVC4 WebApi project has 2 <code>IFilterProviders</code>: The <code>ConfigurationFilterProvider</code>, and the <code>ActionDescriptorFilterProvider</code>. When setting up a custom <code>IFilterProvider</code> to do property depenency injection, is it appropriate to remove both of these from the Filters collection first? Or is it more appropriate to just remove the <code>ActionDescriptorFilterProvider</code>, and leave the <code>ConfigurationFilterProvider</code> in the collection?</p>\n\n<p>Secondly, I see that after a WebApi Http <code>ActionFilterAttribute</code> is constructed for a particular action, it seems to stay around. For example when I put a custom action filter on an ApiController Get method, it is only constructed the first time that method is called. Subsequent calls to the api method seem to reuse the same filter (constructor breakpoints are only hit during the first invocation). Is this right? Why is it different than an MVC actionfilter, where a new instance is created for each method invocation?</p>\n"},{"tags":["c#","asp.net-mvc","dependency-injection","ioc-container","asp.net-web-api"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":867,"score":1,"question_id":10930402,"title":"How to do dependency injection to Action Filter on ASP.NET Web API","body":"<p>I really get stuck on the approach to do dependency injection into action filter of web api. I  have an action filter like this:</p>\n\n<pre><code>public class AuthorizationAttribute : ActionFilterAttribute\n{\n    public IApiKeyRepository Repository { get; set; }\n\n    private Guid GetApiKey(string customerKey)\n    {\n        return Repository.GetApiKey(customerKey);\n    }\n\n    public override void OnActionExecuting(HttpActionContext actionContext)\n    {        \n    }\n}\n</code></pre>\n\n<p>I would like to do property injection on the property Repository by using Windsor (but it does not matter which IoC container is used)</p>\n\n<p>I did come up to customize FilterProvider but it did not work out for me, does anyone have solution or running code on this? it will be much appreciated</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","jquery-mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13277125,"title":"JQuery Mobile data-rel=dialog not firing on iPhone or iPad","body":"<p>I found a question with my exact problem that nobody answered:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/11218707/jquery-mobile-data-rel-dialog-not-firing\">jQuery Mobile data-rel Dialog not firing</a></p>\n\n<p>I have a dialog that should open when the user presses on a button.  It works fine on ALL desktop browsers and Android browser.  It does NOT work in Safari on iPhone or iPad.  If you refresh the page on the iDevice, it works.</p>\n\n<p>Here is my button:</p>\n\n<pre><code>&lt;a href=\"#popup\" data-role=\"button\" data-rel=\"dialog\" data-icon=\"gear\" data-iconpos=\"right\" data-transition=\"slidedown\"&gt;@Model.selectedDate.ToShortDateString()&lt;/a&gt;\n</code></pre>\n\n<p>Here is my dialog:</p>\n\n<pre><code>&lt;div data-role=\"dialog\" id=\"popup\"&gt;\n\n&lt;div data-role=\"header\" data-theme=\"b\"&gt;\n    &lt;h1&gt;Production Date&lt;/h1&gt;\n&lt;/div&gt;\n\n&lt;div data-role=\"content\" data-theme=\"b\"&gt;\n\n@using (Html.BeginForm()) { \n    &lt;div data-role=\"fieldcontainer\"&gt;\n        @Html.LabelFor(model =&gt; model.selectedSystem, \"Select a date for System \" + Model.selectedSystem)\n        @Html.HiddenFor(model =&gt; model.selectedSystem)\n        @Html.LabelFor(model =&gt; model.selectedDate, \"Date:\")\n        @Html.TextBoxFor(model =&gt; model.selectedDate, new { type = \"date\" })\n    &lt;/div&gt;\n\n    &lt;button type=\"submit\" data-theme=\"b\"&gt;Select&lt;/button&gt;\n}\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13279297,"title":"Alternatives to DisplayName DataAnnotation when displaying run-time data in MVC3 model","body":"<p>I have a requirement to display a label whose text is determined at run-time.</p>\n\n<p>Previously, when the text was known at compile-time, I was able to use the DisplayName DataAnnotation to craft how my model represented its data.</p>\n\n<p>As an example, I used to have this:</p>\n\n<pre><code>[DisplayName(\"Task Template\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; TaskTemplate { get; set; }\n\n&lt;%= Html.LabelFor(model =&gt; model.TaskTemplate) %&gt;\n&lt;%= Html.DropDownListFor(model =&gt; model.TaskTemplateFlag, new SelectList(Model.TaskTemplate, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>but now the DisplayName needs to be determined at run-time.</p>\n\n<p>According to <a href=\"http://stackoverflow.com/questions/9434918/displayattribute-name-with-a-variable-dynamic-displayname\">this StackOverflow answer</a> there is no way to do this using a DataAnnotation.</p>\n\n<p>I'm left wondering what best practice is? Do I stop using LabelFor altogether? Should I just store a bunch of string properties in my model, load my values into the properties, and render using DisplayFor?</p>\n\n<p><strong>Update:</strong> I think that this is probably a good enough solution:</p>\n\n<pre><code>public string TaskTemplateLabel { get; set; }\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; TaskTemplate { get; set; }\n\n//Constructor: TaskTemplateLabel = GetLabelFromDataSource();\n\n&lt;%= Html.LabelFor(model =&gt; model.CurrentDeviceName, Model.TaskTemplateLabel)%&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","mvc","real-time"],"answer_count":6,"favorite_count":6,"up_vote_count":10,"down_vote_count":0,"view_count":1750,"score":10,"question_id":5167821,"title":"Real-time ASP.NET MVC Web Application","body":"<p>I need to add a \"real-time\" element to my web application. Basically, I need to detect \"changes\" which are stored in a SQL Server table, and update various parts of the UI when a change has occured.</p>\n\n<p>I'm currently doing this by polling. I send an ajax request to the server every 3 seconds asking for any new changes - these are then returned and processed. It works, but I don't like it - it means that for each browser I'll be issuing these requests frequently, and the server will always be busy processing them. In short, it doesn't scale well.</p>\n\n<p>Is there any clever alternative that avoids polling overhead?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>In the interests of completeness, I'm updating this to mention the solution we eventually went with - <a href=\"https://github.com/SignalR/SignalR\" rel=\"nofollow\">SignalR</a>. It's OS and comes from Microsoft. It's risen in popularity, and I can heartily recommend this, or indeed WebSync which we also looked at.</p>\n"},{"tags":["asp.net-mvc","azure","signalr"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13279066,"title":"Socket timeout using signalR when using Azure Emulator, it works fine if i run the mvc project","body":"<p>I have a MVC 4 Project using signalR. I start a thread that send a msg every 5 sec to all clients. This runs fine. I can see the msgs on the clients. When i run the Azure Project with the MVC project as a role. Clients receive the first 2 or 3 msgs and then it times out and start behaving odd.</p>\n\n<p>What differences are there when running a azure project and a mvc project, the emulator starts iss express also so i cant see what the issues might be.</p>\n\n<p>Anyone have some suggestions for where to go next.</p>\n"},{"tags":["c#","asp.net-mvc","upload","google-drive-sdk","google-drive"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13276819,"title":"ResumableUpload with google drive api v2 .net","body":"<p>I'm trying to upload a file to google drive and monitor the upload progress. I'm using .net with api v2.</p>\n\n<p>I was using the DriveService.Files.Insert method that gives me a FilesResource.InsertMediaUpload, and then I'm using the ProgressChanged event to list to the progress. The problem is that this event is called only 3 times: with \"starting\", \"uploading\", \"completed\" states. I would like to have many call in the \"uploading\" state.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    private UploadToGoogle(...)\n    {\n        //Consider I have an populated File and MemoryStream:\n        MemoryStream contentStream = /*Populated memoryStream*/;\n        File body = /*Populated file*/;\n\n        FilesResource.InsertMediaUpload uploadRequest = null;\n\n        try\n        {\n            contentStream.Position = 0;\n\n            uploadRequest = driveService.Files.Insert(body, contentStream, body.MimeType);\n\n            uploadRequest.ProgressChanged += new Action&lt;Google.Apis.Upload.IUploadProgress&gt;(UploadProgessEvent);\n\n            Action asyncAction = () =&gt;\n            {\n                uploadRequest.Upload();\n                Console.WriteLine(\"Completed!\");\n            };\n\n            var thread = new System.Threading.Thread(new System.Threading.ThreadStart(asyncAction));\n            thread.Start();\n\n        }catch(Exception) {}\n    }\n</code></pre>\n\n<p>There's some content on internet about the ResumableUpload class in older apis, but don't know how to use that in v2. I've found the ResumableUpload class in Google.Apis.Upload namespace, but it's abstract and I have no idea how to use that.</p>\n\n<p>I didn't find anything usefull about progress monitoring in documentation: <a href=\"https://developers.google.com/drive/manage-uploads\" rel=\"nofollow\">https://developers.google.com/drive/manage-uploads</a></p>\n\n<p>And I really don't want to use resumable upload through WebRequest, is there a way to implement that in .net sdk...</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13278781,"title":"How to disable client-side validation?","body":"<p>I need disable client-side validation for FORM.</p>\n\n<p>How do this?</p>\n\n<p>I do not want to just disable js files</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","linq","entity-framework","tsql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13278891,"title":"Complex SQL to LINQ to populate Grid (Count items year by month) (MVC, EF Code First)","body":"<p>I have a grid that I want to fill with the following:</p>\n\n<p>It is tracking tickets that have been open each month for the last year. The grid is filtered by priority so I have a something like this:</p>\n\n<pre><code>| Mon | Critical | High | Tot |\n| Jan |    5     |  2   |  7  |\n| Feb |    2     |  3   |  5  |\n</code></pre>\n\n<p>This is my SQL statement:</p>\n\n<pre><code>SELECT\n    MONTH(CreateDate),\n    DATENAME(MONTH,m.CreateDate) AS 'Month',\n    SUM(CASE WHEN (m.PriorityId = 1) THEN 1 ELSE 0 END) AS 'Critical',\n    SUM(CASE WHEN (m.PriorityId = 2) THEN 1 ELSE 0 END) AS 'High',\n    SUM(CASE WHEN (m.PriorityId = 3) THEN 1 ELSE 0 END) AS 'Normal',\n    SUM(CASE WHEN (m.PriorityId = 4) THEN 1 ELSE 0 END) AS 'Low',\n    SUM(CASE WHEN (m.PriorityId = 5) THEN 1 ELSE 0 END) AS 'Not Ready',\n    Count(m.Id) AS Total\nFROM\n    tblMaintenanceTicket m\nINNER JOIN\n    tblPriority p\nON\n    p.Id = m.PriorityId\nWHERE\n    StatusId = 1\n    AND YEAR(CreateDate) = year(getdate())\nGROUP BY \n    MONTH(CreateDate),\n    DATENAME(MONTH,m.CreateDate)\nORDER BY\n    MONTH(CreateDate)\n</code></pre>\n\n<p>I am looking to convert this in VB LINQ but I am not sure this is the best method. I am also thinking calling a stored procedure, but I want to stay out of the DB really. I am using MVC 3 with the repository pattern, so calling my code is something like this output for JSON:</p>\n\n<pre><code>Dim tickets = ticketRepo.GetAll().Include(Function(p) p.Priority).ToArray()\n</code></pre>\n\n<p>Any assistance?</p>\n"},{"tags":["asp.net-mvc","iis-7.5","http-status-code-404"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13278842,"title":"RenderAction not working when executing a new controller context","body":"<p>I have   <code>@{ Html.RenderAction(MVC.Account.Header()); }</code> in the my razor master page.  It renders fine for 200 status codes, but when it goes to my 404 page it doesnt work.  I believe its the code below.  Why would it not render the header, but everything else?  This is on IIS 7.5.</p>\n\n<pre><code>protected void Application_EndRequest()\n        {\n            if(Context.Response.StatusCode == 404)\n            {\n                Response.Clear();\n\n                var rd = new RouteData();\n                rd.Values[\"controller\"] = \"Errors\";\n                rd.Values[\"action\"] = \"PageNotFound\";\n\n                IController c = new ErrorsController();\n                c.Execute(new RequestContext(new HttpContextWrapper(Context), rd));\n            }\n        }\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","architecture","n-tier"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13278329,"title":"Business Layer Facade vs Mingled Business Components","body":"<p>I'm currently designing the foundation for a large application.  We are going with the traditional 3 tier system using EF in the data layer, plain jane c# classes in the business layer and MVC / WCF for the ui layer.  We have prototyped enough of the application to realize that this will work for us, however due to the complexity of the business requirements <strong>it will be common for some of the business components interact with one another.</strong></p>\n\n<p>Consider the following two business components:</p>\n\n<ul>\n<li>RetailManager - Deal with everything related to retail in the system</li>\n<li>CartManager - Deals with everything related to the shopping cart experience</li>\n</ul>\n\n<p>The two interact, for instance, during the checkout process when an item is purchased.  The inventory for the purchased item needs to be reduced.</p>\n\n<p>Here is my thought process so far:</p>\n\n<ol>\n<li><p>Let business components reference each other and ensure cyclical references never happen (CartManager references RetailManager, but never the other way).  \"Checkout\" would be a method on the CartManager class, and it would call a method on the RetailManager to adjust inventory.  While this will work, I'm not sure how well it will scale, and what the maintenance cost will be over time.  It doesn't feel 100% \"right\" to me.</p></li>\n<li><p>Create a Facade between the business components and the UI tier.  In this example, the Facade would have the checkout method and a reference to both managers.  I like this approach more than the first, however I know that not all of my business objects will need a Facade, and I don't want to create a ton of Facade classes just to have empty pass through methods.</p></li>\n</ol>\n\n<p>I'm leaning towards 2, with the caveat that I will only create facade classes where needed.  The UI tier will have access to both the Facade and the business layer components and will have to know when to use which (the only part I don't like about this solution).</p>\n\n<p>I've done a lot of research but haven't been able to come to come up with a solution that feels completely right.</p>\n\n<p>Any thoughts on using the facade pattern in this way, or other ideas to solve the problem are welcome.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["mysql","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":421,"score":1,"question_id":12181428,"title":"ASP.NET MVC 4 EF5 with MySQL","body":"<p>So I've just picked up VS2012 and I want to start an ASP.NET MVC 4 app with EF5.</p>\n\n<p>My host does not have MSSQL so I have to use MySQL.</p>\n\n<p>How do I tell my app that it should use MySQL? (I either want to use the devart MySQL connector or the one from mysql.com)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13277278,"title":"Inheritance based custom model binding","body":"<p>I need to create a post action to listen to bunch of event messages in ASP.NET MVC 4. There are lots of events so I cannot create an action per event. So it would be best to create an action with their base class as posted model use a custom model binder to hydrate the event.</p>\n\n<p>Some of the events look like this:</p>\n\n<pre><code>public class QueryID : Identity&lt;Guid&gt;\n{\n    public QueryID(Guid id)\n    {\n        Identifier = id;\n    }\n}\n\npublic class QueryEvent : IEvent&lt;QueryID&gt;\n{\n    public QueryEvent(QueryID id)\n    {\n        Identity = id;\n    }\n\n    #region Implementation of IEvent&lt;out QueryID&gt;\n\n    public QueryID Identity { get; private set; }\n\n    #endregion\n}\n\npublic class QueryCreated : QueryEvent\n{\n    public string ConnectionID { get; private set; }\n\n    public QueryCreated(QueryID id, string connectionID)\n        : base(id)\n    {\n        ConnectionID = connectionID;\n    }\n}\n\npublic class ColumnAdded : QueryEvent\n{\n    public string Column { get; private set; }\n\n    public ColumnAdded(QueryID id, string column)\n        : base(id)\n    {\n        Column = column;\n    }\n}\n</code></pre>\n\n<p>The action method to receive these messages would look something like this:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Index(IEvent&lt;IIdentity&gt; e)\n    {\n        // whatever\n\n        return new EmptyResult();\n    }\n</code></pre>\n\n<p>The base Identity class implements the <code>IEvent&lt;IIdentity&gt;</code> interface.</p>\n\n<p>What would the model binder look like to accomplish this?</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor","html.dropdownlistfor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13268589,"title":".Net MVC 4 Dropdownlistfor SelectedItem (Not just selected value, but the selected text)","body":"<p>I have a for loop to generate IEnumerable list:</p>\n\n<pre><code>public static IEnumerable&lt;SelectListItem&gt; loadData()\n{\n    DataTable dt = load_from_database;\n    List&lt;SelectListItem&gt; list = new List&lt;SelectListItem&gt;();\n    foreach (DataRow dr in dt.Rows)\n    {\n        SelectListItem listItem = new SelectListItem();\n        listItem.Text = dr[\"name\"].ToString();\n        listItem.Value = dr[\"id\"].ToString();\n        list.Add(listItem);\n    }\n    return list;\n}\n</code></pre>\n\n<p>And I have the following model:</p>\n\n<pre><code>public class Models\n{\n    public string selectedUserApp { get; set; }\n    public IEnumerable&lt;SelectListItem&gt; userApps  { get; set;  }\n}\n</code></pre>\n\n<p>And the controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n    var model = new UserApplicationModels();\n    userAppsList = loadData();\n    model.userApps = userAppsList;\n    model.selectedUserApp = model.userApps.First().Value;\n\n    return View(model);\n}\n</code></pre>\n\n<p>Then the view:</p>\n\n<pre><code>@model Models\n\n@Html.DropDownListFor(x=&gt;x.selectedUserApp , Model.userApps)\n</code></pre>\n\n<p>What I got is the value of the selected item, but I need to get the text of selected item. </p>\n\n<p>What can I do?</p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-web-api","serializable"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13263988,"title":"ASP.NET Web API and [Serializable] class","body":"<p>I have a class that is marked with [Serializable]. When i return it from the Web API the field names are all funky.</p>\n\n<p>Normally the JSON returned is</p>\n\n<pre><code>[{\"OrderId\":797 ...\n</code></pre>\n\n<p>JSON returned when using [Serializable]</p>\n\n<pre><code>[{\"&lt;OrderId&gt;k__BackingField\":797 ...\n</code></pre>\n\n<p>I wan't to mark it serializable to use a BinaryFormatter for caching. Is there any other way than to write a custom serializer or to make a twin class that is not serializable and write monkey code to \"cast\" between the two?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13277126,"title":"Force all Areas to use same Layout","body":"<p>I have the following project structure:</p>\n\n<ul>\n<li><p>/Views/Shared/_Layout;</p></li>\n<li><p>/Areas/Area1/Views/ControllerName/Index;</p></li>\n</ul>\n\n<p>...</p>\n\n<ul>\n<li>/Areas/AreaN/Views/ControllerName/Index.</li>\n</ul>\n\n<p>Is there any way to force all areas to use the <strong>_Layout</strong> as a <strong>base layout</strong>?</p>\n\n<p>Is there any way to do it without adding the <strong>_ViewStart</strong> file (for example, via the routing configuration)?</p>\n"},{"tags":["c#","php","asp.net-mvc","drupal","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13277128,"title":"Single authentication with Drupal and ASP.NET","body":"<p>I'm an experienced C# developer with a small amount of PHP experience.  I am looking at getting a Drupal instance up and running, but, I will need an ASP.NET instance running along with it since there is going to be custom development work that needs to be done.</p>\n\n<p>I was wondering if anyone had ideas for how to combine authentication for Drupal and ASP.NET so that I don't need to make users authenticate more than once while using the two sites together.</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13274797,"title":"jQuery datepicker not showing current date in all views","body":"<p>I am using the jquery datepicker and have created an editor template for date fields as well. My code for both is shown below.</p>\n\n<pre><code>$(document).ready(function () {\n    $('.date').datepicker({ dateFormat: \"dd/mm/yy\"});\n});\n\n@model Nullable&lt;DateTime&gt;\n\n @{\n    DateTime dt = DateTime.Now;\n    if (Model != null)\n    {\n       dt  = (System.DateTime) Model;\n\n    }\n    @Html.TextBox(\"\", String.Format(\"{0:d}\", dt.ToShortDateString()), new { @class = \"date\" })\n}\n</code></pre>\n\n<p>For some reason the current date is only shown on some views. On the others the date is showing as null 01/01/0001. I have checked and double checked my code and cannot find any problems. I have also checked the outputted html through developer tools and it is identical for fields that show the current date and those that don't - apart from the value of course!</p>\n\n<p>Wondering if anyone else has experienced this. It appears to only be happening on views where there is more than one date field.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["c#","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13276570,"title":"ReferenceError: Model not defined in view","body":"<p>I get the following error, \"ReferenceError: Cat is not defined\", when trying to pass a model to view and print out it's text value with JavaScript. Why is there a reference error and how to fix it?</p>\n\n<p>Model:</p>\n\n<pre><code>public class Animal\n{\n    public List&lt;SelectListItem&gt; AnimalList { get; set; }\n\n    public Animal()\n    {\n        SelectListItem animalItem = new SelectListItem();\n        animalItem.Text = \"Cat\";\n        animalItem.Value = \"1\";\n\n        AnimalList = new List&lt;SelectListItem&gt;();\n        AnimalList.Add(animalItem);\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n        var model = new Animal();\n\n        return View(model);\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function () {\n    @foreach (var item in Model.AnimalList)\n    {\n        &lt;text&gt;\n            console.log(@item.Text);\n        &lt;/text&gt;\n    }\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>By the way. It works fine if I set the text to a number, for example 0.</p>\n"},{"tags":["asp.net-mvc","forms-authentication","formsauthenticationticket"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13276368,"title":"ASP.Net MVC 4 Custom Authorization Ticket Redirect Issue","body":"<p>I'm having an issue where redirecting to a secured action after setting a custom forms authentication ticket. Here's what is happening:</p>\n\n<ol>\n<li>I navigate to Site/Home/Index</li>\n<li>I'm automatically redirected to Site/Account/Login</li>\n<li>I login with a valid user/pass</li>\n<li>The RedirecToUrl() function attempts to redirect me back to Site/Home/Index, yet I'm automatically returned back to Site/Account/Login</li>\n<li>The request IS authenticated. If I manually navigate to Site/Home/Index, I'm allowed in.</li>\n</ol>\n\n<p>Can anybody shed any light?</p>\n\n<p>My HomeController:</p>\n\n<pre><code>[Authorize]\npublic ActionResult Index()\n{\n    return View();\n}\n</code></pre>\n\n<p>My AccountController:</p>\n\n<pre><code>    [HttpGet]\n    [AllowAnonymous]\n    public ActionResult Login(string returnUrl)\n    {\n        ViewBag.ReturnUrl = returnUrl;\n        return View();\n    }\n\n    [HttpPost]\n    [AllowAnonymous]\n    [ValidateAntiForgeryToken]\n    public ActionResult Login(LoginModel model, string returnUrl)\n    {\n        if (ModelState.IsValid)\n        {\n            bool bLogin = MyAuthentication.Login(model.UserName, model.Password);\n\n            if (bLogin)\n            {\n                Response.Cookies.Add(MyAuthentication.GetAuthenticationCookie(model.UserName.ToLower(), model.RememberMe));\n                RedirectToUrl(returnUrl);\n            }\n            else\n                ModelState.AddModelError(\"\", \"That is not a valid Username/Password combination\");\n\n        }\n\n        return View(model);\n    }\n\n    private ActionResult RedirectToUrl(string returnUrl)\n    {\n        if (Url.IsLocalUrl(returnUrl))\n            return Redirect(returnUrl);\n        else\n            return RedirectToAction(\"Index\", \"Home\");\n    }\n</code></pre>\n\n<p>Here is how I create the custom ticket (just adding userdata):</p>\n\n<pre><code>    public static HttpCookie GetAuthenticationCookie(string UserName, bool persistLogin)\n    {\n        var userData = null; // Code removed for brevity\n\n        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(\n                 1,\n                 UserName,\n                 DateTime.Now,\n                 DateTime.Now.AddMinutes(20),\n                 persistLogin,\n                 userData);\n\n        string encTicket = FormsAuthentication.Encrypt(authTicket);\n        return new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);\n    }\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","sitemap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13260354,"title":"Sitemap and MVC","body":"<p>Is there a way to use a classic asp.net sitemap but configure the request routing so it calls an MVC controller and associated action?</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;siteMap&gt;\n    &lt;siteMapNode url=\"~/something.aspx\" controller=\"Home\" action=\"Default\" /&gt;\n&lt;/siteMap&gt;\n</code></pre>\n\n<p>Therefore the url ~/something.aspx would be routed to the Default action on the Home controller.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13276044,"title":"Creating JSON key, value in VB.NET","body":"<p>I have the following code:</p>\n\n<pre><code>    Dim result = New Dictionary(Of String, String)\n\n    For Each item In food\n\n        result.Add(StrConv(item.Shrt_Desc.Replace(\",\", \", \"), VbStrConv.ProperCase), item.Shrt_Desc)\n\n    Next\n\n    Return Json(result, JsonRequestBehavior.AllowGet)\n</code></pre>\n\n<p>I need to make it into the following key and value in JSON:</p>\n\n<blockquote>\n  <p>An array of objects with label and value properties: [ { label:\n  \"Choice1\", value: \"value1\" }, ... ]</p>\n</blockquote>\n\n<p>How can I do this?  Thank you.</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2008","profiling"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1570,"score":2,"question_id":1684688,"title":"Visual Studio 2008 Performance Profiler Problems with ASP.NET","body":"<p>I've been trying, and failing, to get VS.NET 2008 to profile an ASP.NET MVC application. When I try and start a profiling session I get a generic server 500 error from VS.NET:</p>\n\n<p>The web site could not be configured correctly; getting ASP.NET process information failed. Requesting '<a href=\"http://localhost:4750/foo/VSEnterpriseHelper.axd\" rel=\"nofollow\">http://localhost:4750/foo/VSEnterpriseHelper.axd</a>' returned an error: The remote server returned an error: (500) Internal Server Error.</p>\n\n<p>I've tried several things, including:</p>\n\n<ul>\n<li>ensuring that web.config is writable</li>\n<li>ensuring that there aren't any permissions issues (everything is running as me, I'm an admin, and UAC is off)</li>\n<li>everything mentioned here:\n<a href=\"http://stackoverflow.com/questions/260432/500-error-running-visual-studio-asp-net-unit-test\">http://stackoverflow.com/questions/260432/500-error-running-visual-studio-asp-net-unit-test</a></li>\n</ul>\n\n<p>A brand new ASP.NET MVC app (i.e. File | New | Project ) will profile without problem, so I know my machine is capable of profiling such an app.</p>\n\n<p>So, my question here is what are the other common and uncommon things that can prevent VS.NET from starting a profiling session on an ASP.NET app?</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13275664,"title":"Passing parameters to a partial view using Html.Action","body":"<p>I am developing an MVC application (razor syntax), and I am having issues passing parameters into my <code>Html.Action</code> call. Below is a search page I am implementing. Note, the model contains distinct values to be used in the dropdowns.</p>\n\n<p>Call From View:</p>\n\n<pre><code>@using(Html.BeginForm(\"Search\", \"Home\", FormMethod.Get, null)){\n\n@Html.LabelFor(model =&gt; model.siteCode)\n@Html.DropDownListFor(model =&gt; model.siteCode, new SelectList(Model.siteCode), \"All\")\n\n@Html.LabelFor(model =&gt; model.group)\n@Html.DropDownListFor(model =&gt; model.group, new SelectList(Model.group), \"All\")\n}\n\n@Html.Action(\"ShowOrderData\", \"Home\", new {siteCode = Model.siteCode, group = Model.group}\n</code></pre>\n\n<p>Action in Controller:</p>\n\n<pre><code>public ActionResult ShowOrderData(string siteCode = \"\",\n                                        string group = \"\",)\n{\n        var model = _db.ToolOrders\n            .Where(r =&gt; r.SiteCD_LOC.Contains(siteCode))\n            .Where(r =&gt; r.GroupCode.Contains(group))\n\nreturn PartialView(\"_OrderData\", model);\n}\n</code></pre>\n\n<p>Note: There may be some syntactical errors. There are about 10 more parameters being passed and I didn't want to clog up the code blocks.</p>\n\n<p>So when debugging with this code, empty strings are sent to my <em>ShowOrderData</em> controller. I attempted to add .ToString in the Html.Action call ( <code>Model.siteCode.ToString()</code> ), and a LINQ statement will show up instead. I am guessing this method is wrong because the model does not contain any information from the previous request.</p>\n\n<p>How do I properly send data from the QueryString to a partial view? I've seen methods that access the queryString directly via request.querystring, but I've also heard that it is bad practice to use that in a view.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13256419,"title":"User Information on ASP.NET MVC","body":"<p>I'm using ASP.NET MVC and when I have an user logged in using forms authenticaion, I would like to keep some information about this user. The HttpContext User object, implemented from IPrincipal has some properties, but I would like to add some more, so that I could get these on my actions and views. What's the best way to achieve this? </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","jquery-mobile","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13263318,"title":"MVC4 dynamically changing master layout page doesn't work on first load","body":"<p>I have an MVC4 mobile project that I want to add a desktop (non mobile) page to for some users.</p>\n\n<p>I have added a new desktop master page and assigned my view to use it.</p>\n\n<p>The first time I navigate to the page it renders using jquerymobile which appears to somehow be cached from the previous screen. </p>\n\n<p>If I hit <code>F5</code> to <code>refresh</code> the page it displays using the assigned desktop masterpage correctly.</p>\n\n<p>Can anyone tell me how to fix this? Any insight appreciated</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13270775,"title":"Why Not looking for the View in the correct location","body":"<p>I'm an MVC newbie so this might sound trivial.I have my 2 Views(EnterLogin.aspx,ShowLogin.aspx) in a folder called <code>LoginForm</code> in Views.\nHere is my Global.asax.cs below</p>\n\n<pre><code>public class MvcApplication : System.Web.HttpApplication\n{\n    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"LoginForm\", action = \"ShowLogin\", id = UrlParameter.Optional } // Parameter defaults\n        );\n    }\n\n    protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RegisterRoutes(RouteTable.Routes);\n    }\n}\n</code></pre>\n\n<p>Here is my ShowLogin.aspx design code</p>\n\n<pre><code>&lt;form method=\"post\" action=\"EnterLogin\" runat=\"server\"&gt;\n    Hello, i'm login page\n    Enter Name   &lt;asp:TextBox ID=\"txtName\" runat=\"server\"&gt;&lt;/asp:TextBox&gt;\n    &lt;input type=\"submit\" value=\"PressMe\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here are my controllers</p>\n\n<pre><code>public class LoginFormController : Controller\n{\n    public ActionResult ShowLogin()\n    {\n        return View();\n    }\n\n    public ActionResult EnterLogin()\n    {\n        return View(\"EnterLogin\");\n    }\n}\n</code></pre>\n\n<p>On running the application it first loads with url </p>\n\n<pre><code>http://localhost:50224/\n</code></pre>\n\n<p>and shows the ShowLogin.aspx View</p>\n\n<p>On clicking the button I'm calling <code>EnterLogin</code> controller to show <code>EnterLogin</code> View but it looks in URL</p>\n\n<pre><code>http://localhost:50224/EnterLogin\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>http://localhost:50224/LoginForm/EnterLogin\n</code></pre>\n\n<p>What could be causing this?</p>\n"},{"tags":["asp.net-mvc","fxcop"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12807431,"title":"Trying to use FxCop with repeatedly upgraded MVC","body":"<p>I am trying to use FxCop on a project that has been upgraded from MVC 1 through MVC 3.  The first time I ran my project, it asked me to locate MVC 3 for it.  Once I did, it continued on for a bit and then asked me to find MVC 1, which I find odd because I no longer have it installed on this machine and the website operates just fine.  This is the message it is giving me:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Px2D7.png\" alt=\"FxCop wants System.Web.Mvc 1\"></p>\n\n<p>In our Web.config file we have the following, which is created automatically when you upgrade versions of MVC:</p>\n\n<pre><code>&lt;dependentAssembly&gt;\n  &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n  &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n&lt;/dependentAssembly&gt;\n</code></pre>\n\n<p>Does anyone have any idea how to get rid of this error so FxCop will complete it's analysis of this project?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13272625,"title":"ASP MVC Route Config - The resource cannot be found error","body":"<p>I'm newbie in asp mvc, currently, my demo project structure like this:</p>\n\n<pre><code>Areas -- Comment -- Controller -- HomeController\n                               -- ManageController\nController -- HomeController\n          |-- CommentController\n                 |____ PostMsg\n                 |____ DeleteMsg\nViews -- Home\n     |     |--- Index.cshtml\n     |-- Comment\n           |--- PostMsg.cshtml\n           |--- DeleteMsg.cshtml\n</code></pre>\n\n<p>When I browsing url like : </p>\n\n<pre><code>http://localhost/Comment/Manage/ --&gt; return view successfully\nhttp://localhost/Comment/PostMsg --&gt; error \"The resource cannot be found.\"\n</code></pre>\n\n<p>Anyone have any idea why asp mvc doesn't resolve my controller :-(</p>\n\n<p>here is my global.asax.cs route config:</p>\n\n<pre><code>            routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n            routes.MapRoute(\n                name: \"Default\",\n                url: \"{controller}/{action}/{id}\",\n                defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                namespaces: new[] { \"Demo.Web.Controllers\" }\n            );\n</code></pre>\n\n<p>here is my area registration route config:</p>\n\n<pre><code>        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n                \"Comment_default\",\n                \"Comment/{controller}/{action}/{id}\",\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                new[] { \"Demo.Web.Areas.Comment.Controllers\" }\n            );\n        }\n</code></pre>\n\n<p>Problem : Comment/PostMsg url was resolved as an Controller in Comment Area</p>\n\n<p>Goal : Comment/PostMsg url was resolved as an Action of CommentController</p>\n\n<p>Any help would be appreciated :-)</p>\n\n<p><strong>ISSUE RESOLVED</strong>, edit area registration route config (work around):</p>\n\n<pre><code>        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n                \"Comment_default\",\n                \"Comment/PostMsg\",\n                new { controller = \"Comment\", action = \"PostMsg\", id = UrlParameter.Optional },\n                new[] { \"Demo.Web.Controllers\" }\n            );\n\n            context.MapRoute(\n                \"Comment_default\",\n                \"Comment/{controller}/{action}/{id}\",\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                new[] { \"Demo.Web.Areas.Comment.Controllers\" }\n            );\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","facebook","templates","azure"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13272133,"title":"Facebook App on Azure using ASP.NET MVC Facebook Template (API Error Code: 191)","body":"<p>I try deploying my first Facebook App on Azure using ASP.NET MVC Facebook Template as an <a href=\"http://blogs.msdn.com/b/webdev/archive/2012/10/31/deploying-your-first-facebook-app-on-azure-using-asp-net-mvc-facebook-template.aspx\" rel=\"nofollow\">example</a>. I do not do anything extra, just what in the example.</p>\n\n<p>But every time I get an error: </p>\n\n<blockquote>\n  <p>API Error Code: 191.<br/>API Error Description: The specified URL is not owned by the application</p>\n</blockquote>\n\n<p>I checked all the Names and AppId and AppSecret. Everything is correct. I do not understand what went wrong.</p>\n\n<p>Maybe it's because \"<em>This template is still in a preview state. The APIs could change significantly before the final release</em>\"? </p>\n\n<p>Or is there a problem with an example?</p>\n"},{"tags":["jquery","asp.net-mvc","partial-view"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13275152,"title":"get data from fields added by jquery","body":"<p>I have added a dynamic number of partial views through jquery. (based on selection of a drop down list)</p>\n\n<p>And now, I don't know how to get the data in the text boxes?</p>\n\n<pre><code>  &lt;script&gt;\n$(document).ready(function() {\n    $('select#testStationUniqueId').change(function() {\n        var testStation = $(this).val();\n        $.ajaxSetup({ cache: false });\n\n\n\n        $.ajax({\n            url: \"TestInput/getTestStationInformation/\" + testStation,\n\n            type: 'post',\n            success: function(data) {\n                $('#driveDetailDiv').empty();\n                for (var i = 0; i &lt; data.length; i++) {\n                    $.post('TestInput/Details/', { id: data[i] }, function(data2) {\n                        $('#driveDetailDiv').append(data2);\n                    });\n                }\n            }\n        });\n    });\n});\n</code></pre>\n\n<p></p>\n\n<p>my partial View has some labels and some text boxes. I don't know how to get value of each text  box </p>\n\n<pre><code>    public PartialViewResult Details(string id)\n    {\n        DriveDetails t = new DriveDetails(id);\n        return PartialView(\"DriveDetailsPartial\", t);\n    }\n</code></pre>\n\n<p>DriveDetailsPartial has some fields and texboxes and ropdown lists, etc.</p>\n"},{"tags":["jquery","asp.net-mvc","webgrid"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13273535,"title":"jquery code works once but not repeatedly","body":"<p>i have a small jquery script that when I click an ajax actionlink in a grid/table(built from a webgrid) it will replace the contents with a spinning wheel.  It works the first time only.</p>\n\n<pre><code>$('#thisGrid tr td').click(function () {\n    $(this).html('&lt;img  src=\"@Url.Content(\"~/Content/ajax-loader.gif\")\" alt=\"Loading... Please Wait\" style=\"height: 20px;\"/&gt;');\n});\n</code></pre>\n\n<p>I have not found anything that has led me to determine why this is so... Any thoughts on why this might be happening?</p>\n"},{"tags":["asp.net-mvc","view"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13257512,"title":"Detecting a source view from the controller","body":"<p>Is it possible to recognize the view/page name from which a form was submitted to Action ?</p>\n\n<p>For example, lets say I have two Views: <code>AddInfo</code> and <code>EditInfo</code>\nBoth views have a form that I would like to submit to</p>\n\n<pre><code>@Html.BeginForm(\"SaveInfo\",\"Info\")\n{\n ...\n}\n</code></pre>\n\n<p>Inside of the <code>SaveInfo()</code> method I would like to recognize whether the submit/request came from <code>AddInfo</code> or <code>EditInfo</code> view.</p>\n\n<pre><code>public ActionResult SaveInfo(FormCollection collection)\n{\n if(...I got here from AddInfo View)  &lt;----- ?\n {\n  ..do something \n }\n}\n</code></pre>\n\n<p>Is it possible ?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","bundle","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13267189,"title":"MVC4 Bundling slow when using Scripts.Render","body":"<p>My asp.net MVC4 web project is running very slowly when serving a simple page that renders bundled scripts. However, when I use a 'hardcoded' script tag on the page with the source attribute of the virtual bundle path then performance is much better:</p>\n\n<pre><code>@Scripts.Render(\"~/bundles/scripts\")                            ~ 4 seconds\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>&lt;script src='@Scripts.Url(\"~/bundles/scripts\")'&gt;&lt;/script&gt;       &lt; 1 second\n</code></pre>\n\n<p>My <code>BundleConfig.cs</code> has no special configuration, this is exactly as it appears:</p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/scripts\").Include(\n    \"~/Scripts/jquery-1.7.2.min.js\",\n    \"~/Scripts/jquery.validate.min.js\",\n    \"~/Scripts/jquery.validate.unobtrusive.js\",\n    \"~/Scripts/jquery-ui-1.9.0.custom.min.js\",\n    \"~/Scripts/bootstrap.min.js\",\n    \"~/Scripts/bootstrap-modal.js\",\n    \"~/Scripts/bootstrap-dropdown.js\",\n    \"~/Scripts/bootstrap-tooltip.js\",\n    \"~/Scripts/bootstrap-typeahead.js\",\n    \"~/Scripts/bootstrap-transition.js\",\n    \"~/Scripts/bootstrap-popover.js\"));\n</code></pre>\n\n<p>My <code>web.config</code> is even configured to optimize in Debug but I have tried running in Release mode and still get the same result:</p>\n\n<pre><code>&lt;compilation optimizeCompilations=\"true\" debug=\"false\" targetFramework=\"4.0\" /&gt;\n</code></pre>\n\n<p><strong>Any ideas why <code>Scripts.Render</code> is so slow?</strong></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","partial-views","child-actions"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13275101,"title":"Handling Errors in MVC Child Actions","body":"<p>My error handling collects (some manually, some automatically) the errors produced during controller execution. Then I have a partial view which renders out the error messages. \nI store the error messages in ViewData (and transfer them to TempData if I respond in a RedirectResult).</p>\n\n<p>The problem is: <strong>if a child action causes an error it will not get displayed</strong>, as they (at least the ones further down the page) are executed AFTER the partial view is rendered.</p>\n\n<p>Right now the only, somewhat desperate idea I have is to render the messages into javascript at the bottom of the layout page, and have that javascript update the error display boxes. But it smells bad, I shouldn't need client-side code for this.</p>\n\n<p>Is there a way to have a partial view \"lazy rendered\", after everything else?</p>\n"},{"tags":["javascript","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13272401,"title":"ASP.net Rejuicer combine js dynamically","body":"<p>Im looking at using Rejuicer <a href=\"http://rejuice.me/\" rel=\"nofollow\">http://rejuice.me/</a> to combine all the JS files of my ASP.net MVC site into one JS file.  This works ok  but it doesnt allow me to add or remove JS files without having to also reset/recycle the application, as all the configuration is set in the Application_Start() event handler. </p>\n\n<p>Does anyone have any ideas on how I can get around this. Or if there is a better alternative to Rejuicer? </p>\n\n<p>EDIT:</p>\n\n<p>I've come up with this possible solution below. Can anyone see any issue with this?</p>\n\n<p>In the _layout.cshtml file I have code similar to this.  The list of js files for the site can be defined here without having to reset or recompile the site. </p>\n\n<pre><code>@{\n\n    //combine all JS files into one file using Rejuicer. \n    List&lt;string&gt; JsFiles = new List&lt;string&gt;();\n\n    //define list of JS files here\n    JsFiles.Add(\"~/Scripts/One.js\");\n    JsFiles.Add(\"~/Scripts/Two.js\");      \n\n\n    if (System.Web.HttpContext.Current.Application[\"JsFileListing\"] != null)\n    {\n\n        var JsFileRejuiced = (List&lt;string&gt;)System.Web.HttpContext.Current.Application[\"JsFileListing\"];\n\n        //check if we have any new/removed/renamed files\n        if (JsFiles.Except(JsFileRejuiced).Count()&gt; 0 || JsFileRejuiced.Except(JsFiles).Count() &gt; 0)          \n        {\n            //force application reset\n            HttpRuntime.UnloadAppDomain();                \n        }\n    }\n\n    if (System.Web.HttpContext.Current.Application[\"JsFileListing\"] == null)\n    {\n\n        var Combiner = Rejuicer.OnRequest.ForJs(\"~/Combined.js\").Combine;\n\n        foreach (var file in JsFiles)\n        {\n            Combiner.File(file);\n        }\n        Combiner.Configure();\n\n        System.Web.HttpContext.Current.Application[\"JsFileListing\"] = JsFiles;\n    }\n}\n@Rejuicer.Rejuiced.JsFor(\"~/Combined.js\")\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13230918,"title":"Entity Framework - Many To Many Relationship Inserting Duplicate To Parent Table","body":"<p>I'm trying to do a simple insert with a many-to-many relationship using Entity Framework 5.</p>\n\n<p>I have two POCO classes as follows.</p>\n\n<pre><code>public class Category\n{\n    public virtual string Title { get; set; }\n    public virtual DateTime EntryDate { get; set; }\n    public virtual DateTime LastUpdated { get; set; }\n    public virtual ICollection&lt;Article&gt; Articles { get; set; }\n}\n\npublic class Article\n{\n    public virtual string Title { get; set; }\n    public virtual string Content { get; set; }\n    public virtual DateTime EntryDate { get; set; }\n    public virtual DateTime LastUpdated { get; set; }\n    public virtual ICollection&lt;Category&gt; Categories { get; set; }\n}\n</code></pre>\n\n<p>And the following fluent api mapping code...</p>\n\n<pre><code>public class CategoryMap : EntityTypeConfiguration&lt;Category&gt;\n{\n    public CategoryMap()\n    {\n        this.ToTable(\"Categories\");\n        this.HasKey(x =&gt; x.ID);\n\n        this.Property(x =&gt; x.Title).IsRequired().HasMaxLength(255);\n    }\n}\n\npublic class ArticleMap : EntityTypeConfiguration&lt;Article&gt;\n{\n    public ArticleMap()\n    {\n        this.ToTable(\"Articles\");\n        this.HasKey(x =&gt; x.ID);\n\n        this.HasMany(x =&gt; x.Categories)\n            .WithMany(x =&gt; x.Articles)\n            .Map(x =&gt;\n            {\n                x.ToTable(\"MapArticleCats\");\n                x.MapLeftKey(\"CategoryID\");\n                x.MapRightKey(\"ArticleID\");\n            });\n\n        this.Property(x =&gt; x.Title).IsRequired().HasMaxLength(255);\n        this.Property(x =&gt; x.Content).IsRequired().HasMaxLength(4000);\n    }\n}\n</code></pre>\n\n<p>The entity framework will then generate both Category and Article tables along with a third mapping table of which details were specified in the ArticleMap code (MapArticleCats), which looks like the following in SQL Server.</p>\n\n<p>ArticleID - int<br/>\nCategoryID -int<br/></p>\n\n<p>The following code (give or take a few lines) adds the Categories to the Article in my controller.</p>\n\n<pre><code>IEnumerable&lt;Category&gt; GetCats = CategoryRepository.GetAll();\n\n//DO SOME CODE TO FIGURE WHICH CATEGORIES I NEED.\nIEnumerable&lt;Category&gt; Categories = InferCategoriesFromPostedData(Model.Categories, GetCats);\n\nforeach (Category c in Categories)\n{\n    Article.Categories.Add(c);\n}\n</code></pre>\n\n<p>This seems to create some strange behavior on insert. It will insert a new category into the category table (DUPLICATE) and also insert the newly created CategoryID (instead of the original id) and the correct ArticleID to the MapArticleCats table.</p>\n\n<p>Can anyone see where Ive gone wrong?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","login","forms-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13273375,"title":"Why does my login page keep reloading, without trying to authenticate?","body":"<p>In Controllers/AccountController.cs:</p>\n\n<pre><code>public class AccountController : Controller\n{\n    //\n    // GET: /Account/Login\n    public ActionResult Login()\n    {\n        return View();\n    }\n    ...\n}\n</code></pre>\n\n<p>In web.config:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/Login\" defaultUrl=\"~/Home/Index\" name=\".ASPXFORMSAUTH\"/&gt;\n&lt;/authentication&gt;\n&lt;authorization&gt;\n  &lt;deny users=\"?\"/&gt;\n&lt;/authorization&gt;\n</code></pre>\n\n<p>In Views/Account/Login.aspx:</p>\n\n<pre><code>&lt;script runat=\"server\" type=\"text/C#\"&gt;\n    protected void Page_Load(object sender, EventArgs e) {...}\n    protected void OnAuthenticate(object sender, AuthenticateEventArgs e) {...}\n    protected void OnLoggedIn(object sender, EventArgs e){...}\n    protected void OnLoginError(object sender, EventArgs e){...}\n&lt;/script&gt;\n\n...\n\n&lt;asp:Login ID=\"login1\" runat=\"server\" \n           DestinationPageUrl=\"~/Views/Home/Index.aspx\"\n           OnAuthenticate=\"OnAuthenticate\" \n           OnLoggedIn=\"OnLoggedIn\" \n           OnLoginError=\"OnLoginError\"&gt;\n    ...\n    &lt;asp:Button ID=\"loginButton\" runat=\"server\" CommandName=\"Login1\" Text=\"Login\" ValidationGroup=\"login1\" TabIndex=\"4\" /&gt;\n    ...\n&lt;/asp:Login&gt;\n</code></pre>\n\n<p><code>Page_Load</code> is called, but then <code>OnAuthenticate</code>, <code>OnLoggedIn</code>, and <code>OnLoginError</code> are never called. Why is that?</p>\n\n<p>I am using MVC, and what happens after clicking the \"Login\" button is I am taken back to the AccountController. This returns the Login.aspx View, so the login page just gets reloaded.</p>\n"},{"tags":["c#","asp.net","html","asp.net-mvc","webclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13273688,"title":"Right Accept Type?","body":"<p>In my ASP.NET MVC app, I am providing a link to a .csv file:</p>\n\n<pre><code>WebClient wc = new WebClient();\n                    wc.Headers.Add(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)\");\n                    wc.Headers.Add(\"Accept\", \"text/plain,text/html,application/xml;q=0.9,*/*;q=0.8\");                   \n                    wc.Headers.Add(\"Accept-Charset\", \"ISO-8859-1,utf-8;q=0.7,*;q=0.3\");\n                    byte[] csvBytes = wc.DownloadData(url);\n                    return File(csvBytes, \"application/octet-stream\", \"Target.csv\"); \n</code></pre>\n\n<p>The url returns the following data:</p>\n\n<pre><code>&lt;string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\n\"PAUL\",\"SMITH\",\"A &amp; P CONSTRUCTION\",\"211 N JACKSON ST\",\"PAPILLION\",\"NE\",\"68046\" \"JEROME\",\"HALSEY\",\"A A A LOCATING INC\",\"1906 SOUTHVIEW DR\",\"NEW YORK\",\"NY\",\"68046\" \"MIKE\",\"GIBILISCO\",\"ABSOLUTE SECURITY INC\",\"944 S JEFFERSON ST\",\"OMAHA\",\"NE\",\"68102\"\n&lt;/string&gt;\n</code></pre>\n\n<p>When I open the .csv, I get the right data except for first row/first column:</p>\n\n<pre><code>&lt;string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\"&gt;\"PAUL\"  SMITH   A &amp;amp; P CONSTRUCTION  211 N JACKSON ST    PAPILLION   NE  68046\n</code></pre>\n\n<p>What Accept type should I use to get rid of the string tag.</p>\n"},{"tags":["asp.net-mvc","session","authentication","session-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":12,"score":2,"question_id":13274169,"title":"HowTo use Session in ASP.NET with custom session key parameter","body":"<p>Is it possible to use ASP.NETs session state with URL like</p>\n\n<pre><code>http://myserver/somesite?sessionKey=thekey\n</code></pre>\n\n<p>The problem is, that I have to write a site for a client software which authenticates a user by a request like </p>\n\n<pre><code>http://myserver/somesite?user=xyz&amp;passwd=xyz\n</code></pre>\n\n<p>The client expects than to get a session key as result if the authentication was successful.\nThis session key will then be used as variable in the query as shown above. The client does not support cookies.</p>\n\n<p>How can I implement this behavior by using ASP.NET MVC 4?</p>\n\n<p>P.S.: I know it is absolutly not the way to go but I am not in position to change the client.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13273144,"title":"What approach should be used for model binding to an exisiting session object?","body":"<p>Here's my problem:</p>\n\n<p>We have an intranet asp.net mvc 3 application with a controlled set of users. We have a Person class, that contains a large amount of information, that is initially loaded and stored in the session. The data/editing for this object spans across many screens. Basically, each screen is a subset of the Person's data.  </p>\n\n<p>I'm trying to take advantage of the built in model binding in asp.net mvc. Should I create a data class that binds the form data from each screen and then updates my session object using a service object?  </p>\n\n<p>Example below: DxFormData contains a subset of the person data and will only be used as a parameter on this method. </p>\n\n<pre><code> public ActionResult Dx(DxFormData data)\n {\n    // Update current session Person object with data passed in if modelstate is valid\n    var viewModel = this.GetDxViewModel();        \n    return View(viewModel);\n }\n\npublic class DxForm Data\n{\n    public string AdmitDx { get; set; }\n    public string PrinDx { get; set; }\n}\n</code></pre>\n\n<p>I'm looking for thoughts on this approach and if there's a better solution available to me. The problem that I see, is that the person class contains all the data and I'm creating another class with a subset of that data. Obviously, duplicating the properties.</p>\n\n<p>Side note: I did write a custom model binder that returned the session person for binding. However, I am continually getting errors when it attempts to bind. </p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13274127,"title":"Deploying a site as a role to Azure - DirectoryNotFoundException - approot / siteroot","body":"<p>I've been examining the event logs for the WebApp I'm trying to automatically deploy and the only problem I can find is this (Azure event log): </p>\n\n<pre><code>An unhandled exception occurred. Type: System.IO.DirectoryNotFoundException Process ID: 1784\nProcess Name: WaIISHost\nThread ID: 1\nAppDomain Unhandled Exception for role Website_IN_0\nException: Could not find a part of the path 'E:\\approot'.\n</code></pre>\n\n<p>So I have a poke and sure enough, nothing lives there and the directory doesn't even exist. However I then realise the site exists in E:\\sitesroot.... so why is it looking in approot?</p>\n\n<p>This is my service definition:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;ServiceDefinition name=\"WebsiteAzure\" xmlns=\"etc\"&gt;\n  &lt;WebRole name=\"Website\" vmsize=\"Small\"&gt;\n    &lt;Sites&gt;\n      &lt;Site name=\"Web\"&gt;\n        &lt;Bindings&gt;\n          &lt;Binding name=\"Endpoint1\" endpointName=\"Endpoint1\" /&gt;\n        &lt;/Bindings&gt;\n      &lt;/Site&gt;\n    &lt;/Sites&gt;\n    &lt;Endpoints&gt;\n      &lt;InputEndpoint name=\"Endpoint1\" protocol=\"http\" port=\"80\" /&gt;\n    &lt;/Endpoints&gt;\n    &lt;Imports&gt;\n      &lt;Import moduleName=\"Diagnostics\" /&gt;\n    &lt;/Imports&gt;\n  &lt;/WebRole&gt;\n&lt;/ServiceDefinition&gt;\n</code></pre>\n\n<p>Is that right?</p>\n\n<p>For the record the deployment works fine with visual studio but i'm trying to automate with powershell which is where I'm getting the issue. I'm pretty sure it has all the .dlls it requires and the config and definition are correct so why is it choking on this directory?</p>\n"},{"tags":["javascript","asp.net-mvc","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13273978,"title":"HTML5 number input with polyfill","body":"<p>I'm using the HTML5 number input, with a polyfill (https://github.com/jonstipe/number-polyfill) to handle older browsers. </p>\n\n<p>The page / input is working good. I get to input values, use the spinner buttons, all great. But the value is formatted like \"0.00\", default en-US culture. The site I'm building runs on the Dutch culture settings, which uses \"0,00\" for number formatting. </p>\n\n<p>Now upon postback, MVC reads \"4.6\" as \"46\", which obviously isn't what I want. So now I'm looking for a good way of dealing with this. I know I could adapt the javascript or use a custom binder on the MVC side to fix the fault. But in that case I would be assuming that it's always one or the other format. Most ideally, I'd like to follow the users' setting (which is what MVC does on the serverside). So when an English users uses the site, he/she can enter \"4.6\" and Dutch users can enter \"4,6\".</p>\n\n<p>But that's a \"nice to have\", if it's too complicated I'll go with Dutch style inputting for now.</p>\n"},{"tags":["c#","asp.net-mvc","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13057682,"title":"Custom validation class - How to make universal","body":"<p>I am attempting to create a custom validation attribute for my MVC application.  My code as written, works great for the properties specified in the code.  I now want to expand it, so it  is more general, because I have 5 other properties I would like to use this same attribute on.<br>\nThe general idea is if the specified other property is true, then the property attached to the attribute must be > 0.</p>\n\n<p>I assume the way to do this is to create a constructor that accepts the value of the property and the value of the other property, but I can't seem to get it going.  The specific problem I having is I can't find the correct way to pull in the needed values.</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>public class MustBeGreaterIfTrueAttribute : ValidationAttribute\n{\n    protected override ValidationResult IsValid(object value, ValidationContext context)\n    {\n        var model = context.ObjectInstance as HistoryViewModel;\n        //ValidationResult result = null;\n\n        // Validate to ensure the model is the correct one\n        if (context.ObjectInstance.GetType().Name == null)\n        {\n            throw new InvalidOperationException(string.Format(\n                    CultureInfo.InvariantCulture, \"Context of type {0} is not supported. \"\n                                                  + \"Expected type HistoryViewModel\",\n                                                   context.ObjectInstance.GetType().Name));\n        }\n\n        // Here is the actual custom rule\n        if (model.HistoryModel.IsRetired == true)\n        {\n            if (model.CounterA == 0)\n            {\n                return new ValidationResult(\"Please enter more information regarding your History\");\n            }\n        }\n        else if ( model.HistoryModel.IsRetired == true )\n        {\n            if ( model.ROCounter &gt; 0 )\n\n            return ValidationResult.Success;\n        }\n\n        // If all is ok, return successful.\n        return ValidationResult.Success;\n\n    }\n\n    //  Add the client side unobtrusive 'data-val' attributes\n    //public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    //{\n\n    //}\n\n}\n</code></pre>\n\n<p>Thank you for you time.</p>\n"},{"tags":["jquery","asp.net-mvc","requirejs"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":193,"score":0,"question_id":11878542,"title":"How do I make RequireJS reliable?","body":"<p>RequireJS works for me about half the time. If I refresh the page, it randomly gets load issues.</p>\n\n<p>I'm adapting a small MVC project to use it, and doing something like this: <a href=\"http://stackoverflow.com/questions/10815454/how-does-requirejs-work-with-multiple-pages-and-partial-views\">How does RequireJS work with multiple pages and partial views?</a></p>\n\n<p>I've a common main.js that does the loading from my main _layout.cshtml.  And other partial views in widgets and elsewhere that use the technique described above. The example below is from my SignIn page: </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    require([\"jquery\", \"kendo\", \"domReady!\"], function ($, kendo) {        \n\n        $(\"#signInForm\").kendoWindow({\n            draggable: false,\n            width: \"500px\",\n            modal: true,\n            title: \"Sign In\",\n            resizable: false\n         });        \n    }); \n&lt;/script&gt;\n</code></pre>\n\n<p>It appears that sometimes Chrome loads &amp; processes the inline script before main.js (Where the path mapping and other config is defined). Requiring \"domReady\" makes no difference. </p>\n\n<p>How do I force this script to wait until require.js &amp; main.js has run?</p>\n\n<p>A less than ideal fallback is to return jQuery to it's global scope and use some kind of custom event. Do you have a better idea? Or is there a way built into RequireJS?</p>\n\n<p><strong>UPDATE:</strong> This is the work around I'm using for now in my _layout.cshtml</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.2.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    function requireIt(requirements, callback) {\n        if ($(document).data(\"requireReady\") === true) {\n            require(requirements, callback);\n        } else {\n            $(document).bind(\"requireReady\", null, function () {\n                $(document).data(\"requireReady\", true); \n                require(requirements, callback);\n            });\n        }\n    }\n&lt;/script&gt; \n&lt;script data-main=\"/scripts/main\" src=\"@Url.Content(\"~/Scripts/require.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>jQuery returns to being a global fixture and my partial views with their inline scripts use this requireIt wrapper. And main.js triggers requireReady.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iframe"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13252467,"title":"ASP.NET MVC - Iframe Download Dialog not showing up","body":"<p>I need to make a file download that displays a loading icon during the processing of the file (because I don't know how long it is going to take), I decided to use an iframe, the code runs fine, but the <strong>problem is that the file download dialog box doesn't show up</strong>. </p>\n\n<p>I've tested in IE, Firefox and Chrome and it is not working in any of them.</p>\n\n<p>Here's my code:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;table id=\"progress\" style=\"visibility:hidden\"&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;img src=\"~/Content/Images/ajax-loader.gif\" /&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;h4&gt;please wait.&lt;/h4&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;div class=\"buttons\"&gt;\n    &lt;input type=\"button\" value=\"Ok\" class=\"button\" id=\"downloadButton\"&gt;\n&lt;/div&gt;\n\n&lt;iframe id=\"iframe\" style=\"visibility:hidden\"&gt;&lt;/iframe&gt;\n\n&lt;script&gt;\n    $(document).ready(function () {\n\n        $('#downloadButton').click(function () {\n\n            $('#progress').show();\n            $('input:button').attr(\"disabled\", true);\n\n            $('#iframe').src = \"@Url.Action(\"GenerateFile\", \"Files\", null)\";\n\n            $('#iframe').load(\"GenerateFile\", function () {\n                $('input:button').attr(\"disabled\", false);\n                $('#progress').hide();\n            });\n        });\n\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Server side Action:</p>\n\n<pre><code>[HttpGet]       \npublic void GenerateFile(Filters viewModel)        \n{        \n    var result = GetCustomers().WithName(viewModel.Name);        \n    StringBuilder file = new StringBuilder();\n\n    foreach (var customer in result)        \n    {        \n        // fill up the string builder with csv format       \n    }        \n\n    System.Web.HttpContext.Current.Response.AddHeader(\"content-disposition\",\"attachment; filename=Customers.csv\");        \n    System.Web.HttpContext.Current.Response.ContentType = \"application/csv\";        \n    System.Web.HttpContext.Current.Response.Write(file);        \n    System.Web.HttpContext.Current.Response.End();        \n}       \n</code></pre>\n\n<p>Any help would be appreciated, thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13270396,"title":"can't figure out routing in asp.net mvc","body":"<p>I'm doing my first steps in asp.net mvc trying to develop web api.</p>\n\n<p>I have the following routing function:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapRoute(\n        name: \"cdApiDefault\",\n        url: \"api/{controller}/{action}/{token}/{mid}/{id}\",\n        defaults: new {\n            token = UrlParameter.Optional,\n            mid = UrlParameter.Optional,\n            id =  RouteParameter.Optional }\n    );\n}\n</code></pre>\n\n<p>and the following controller:</p>\n\n<pre><code>namespace cdapi.Controllers\n{\n    public class PostsController : ApiController\n    {\n        // GET api/posts\n        public IEnumerable&lt;string&gt; Get()\n        {\n            return new string[] { \"GET_value1\", \"GET_value2\" };\n        }\n\n        // GET api/posts/5\n        public string Get(int id)\n        {\n            return \"value!!!!!!!!!!!!!!!!!\";\n        }\n\n        // POST api/posts\n        public void Post([FromBody]string value)\n        {\n        }\n\n        // PUT api/posts/5\n        public void Put(int id, [FromBody]string value)\n        {\n        }\n\n        // DELETE api/posts/5\n        public void Delete(int id)\n        {\n        }\n\n        public String GetTest(String token, String mid)\n        {\n            return token + \" - \" + mid;\n        }\n    }\n}\n</code></pre>\n\n<p>the following call </p>\n\n<blockquote>\n  <p>hxxp://localhost:52628/api/posts/5</p>\n</blockquote>\n\n<p>(in my browser) yields some result, i.e., the function GET is being called and return a value.</p>\n\n<p>However, when I try </p>\n\n<blockquote>\n  <p>hxxp://localhost:52628/api/posts/GetTest/MyTestToken/myTestMid</p>\n</blockquote>\n\n<p>comes back with <em>'the resource can not be found'</em> error message.</p>\n\n<p>I thought that the <strong>{Action}</strong> should contain the function to call and that the <strong>'token'</strong> and <strong>'mid'</strong> should contain the values I specify. What do I do wrong? </p>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":4,"favorite_count":17,"up_vote_count":32,"down_vote_count":0,"view_count":11936,"score":32,"question_id":2386365,"title":"maxlength attribute of a text box from the DataAnnotations StringLength in Asp.Net MVC","body":"<p>I am working on an MVC2 application and want to set the maxlength attributes of the text inputs.</p>\n\n<p>I have already defined the stringlength attribute on the Model object using data annotations and it is validating the length of entered strings correctly.  </p>\n\n<p>I do not want to repeat the same setting in my views by setting the max length attribute manually when the model already has the information.  Is there any way to do this?</p>\n\n<p>Code snippets below:</p>\n\n<p>From the Model:</p>\n\n<pre><code>[Required, StringLength(50)]\npublic string Address1 { get; set; }\n</code></pre>\n\n<p>From the View:</p>\n\n<pre><code>&lt;%= Html.LabelFor(model =&gt; model.Address1) %&gt;\n&lt;%= Html.TextBoxFor(model =&gt; model.Address1, new { @class = \"text long\" })%&gt;\n&lt;%= Html.ValidationMessageFor(model =&gt; model.Address1) %&gt;\n</code></pre>\n\n<p>What I want to avoid doing is:</p>\n\n<pre><code>&lt;%= Html.TextBoxFor(model =&gt; model.Address1, new { @class = \"text long\", maxlength=\"50\" })%&gt;\n</code></pre>\n\n<p>I want to get this output:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"Address1\" maxlength=\"50\" class=\"text long\"/&gt;\n</code></pre>\n\n<p>Is there any way to do this?</p>\n"},{"tags":["c#","javascript","asp.net-mvc","signalr"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":4994,"score":1,"question_id":7594978,"title":"Using SignalR with ASP.NET MVC3","body":"<p>I'm attempting to use SignalR hubs in an application, but am having no luck currently. I've read through <a href=\"http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx\" rel=\"nofollow\">Scott Hanselman's article</a>, and also looked at <a href=\"http://beyondrelational.com/modules/24/syndicated/370/Posts/9623/signalr-with-mvc3-chat-app-build-asynchronous-real-time-persistant-connection-websites.aspx\" rel=\"nofollow\">this</a> blog post which shows how to implement it in MVC, basically doing the same thing. Unfortunately, I'm having no luck. On the client side, the javascript seems to work fine [apart from nothing happening] but when I place breakpoints in the code it shows that the controller is being called, not the hub code. The code I'm using is this:</p>\n\n<pre><code>// Client side javascript:\nvar hooking;\n$(function() {\n    // Setup SignalR\n    hooking = $.connection.hooking;\n    hooking.removeLead = function(ref) {\n        $(\"lead\" + ref).remove();\n    };\n    $.connection.hub.start();\n    }\n});\n\n// Hooking.cs (placed in application root)\npublic class Hooking : Hub\n{\n    public void Submit(string jsonString)\n    {\n        var serializer = new JavaScriptSerializer();\n        var json = serializer.Deserialize&lt;HookingLeadResult&gt;(jsonString);\n        Clients.removeLead(json.Ref); // Remove lead from client hooking windows\n        // update lead gen\n    }\n}\n</code></pre>\n\n<p>When I call <code>hooking.submit(resultJson);</code> later in my code for some reason it calls the Index action of my HookingController (which is the current page). Anyone know how to correctly call the Submit function from Hooking.cs?</p>\n"},{"tags":["asp.net","asp.net-mvc","forms-authentication"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":2309508,"title":"How about keeping roles together with the name in user.identity.name | FormsAuth.SetAuthCookie(strUser + \"|\" + strUserRole)","body":"<p>Is it a good idea to keep the user's role together with his name, for example with <code>setAuthCookie</code>, do you:</p>\n\n<pre><code>formsAuthSrv.SetAuthCookie(strUser+strRole);\n</code></pre>\n\n<p>and you can do your own roles provider like this:</p>\n\n<pre><code>public class MyRoleProvider : RoleProvider\n    {\n        public override string[] GetRolesForUser(string username)\n        {\n             // get the roles from username and return it as an string[]      \n..     \n                return new string[] { role };\n        }\n    }\n</code></pre>\n\n<p>and when you call <code>user.identity.name</code> you have to split it to get just the username</p>\n\n<p>Is there a better alternative?</p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13272196,"title":"Azure - Troubleshooting a failed deployment","body":"<p>Is there any mechanism I can use to troubleshoot a failed deployment? The output that Azure gives me is massively unsatisfactory.</p>\n\n<pre><code>\"Role has encountered an error and has stopped. Unhandled Exception DirectoryNotFoundException.\"\n</code></pre>\n\n<p>I'm trying to automatically deploy via msbuild and powershell and the problem im encountering is curious as the deploy works perfectly when I publish from Visual Studio building the same .sln.</p>\n\n<p>The service configuration and definition is precisely the same in both instances so I'm starting to have real difficulties in understanding the actual problem. I've checked some of the <a href=\"http://blog.toddysm.com/2010/01/windows-azure-deployment-stuck-in-initializing-busy-stopping-why.html\" rel=\"nofollow\">most common problems</a> and I don't appear to be suffering from any of them.</p>\n\n<p>Additionally.... its a website.... so as far as I'm aware its not possible for any of my code to be creating unhandled exceptions at initialisation.... is it?</p>\n\n<p>Any suggestions or information how to perform a better diagnosis would be appreciated. I'm obviously doing <em>something</em> wrong in my publish process but its really tricky to track down the problem without adequate diagnostics here.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13268519,"title":"\"Error Loading Page\" message, show error","body":"<p>I'm developping my first MVC4 application and have now on several occasions gotten a 'Error loading page' message. This is nice if you're in a production environment but when developing an application it would be much more productive to see what's wrong, see the exception details. Is there some way or setting to get to the exception information wich causes this message ?</p>\n\n<p>regards,\nJurjen.</p>\n"},{"tags":["c#","ajax","asp.net-mvc","asp.net-web-api"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13271804,"title":"ASP.net WebAPI return a file through ajax call","body":"<p>I am currently looking for a way to force a download of a file which is returned through a WebAPI controller.</p>\n\n<p>I was using <a href=\"http://www.shawnmclean.com/blog/2012/04/force-download-of-file-from-asp-net-webapi/\" rel=\"nofollow\">http://www.shawnmclean.com/blog/2012/04/force-download-of-file-from-asp-net-webapi/</a> as a reference.</p>\n\n<p>On my client I am using an ajax GET call to send up an ID of an object and try to download the file</p>\n\n<pre><code>    exportList: (foo, callback) =&gt;\n        path = '/api/export/id'\n        path = path.replace(\"id\", foo.id)\n        $.ajax(\n            url: path,\n            dataType: 'text',\n            success: (data) =&gt;\n                callback(data)\n            error: (data) =&gt;\n                callback(false)\n        )\n</code></pre>\n\n<p>On the server-side, I have the above URI routed to the method below</p>\n\n<pre><code>    [AcceptVerbs(\"GET\")]\n    public HttpResponseMessage ExportList(int id)\n    {\n        string file = fooService.ExportList(id);\n\n        if (file == null)\n        {\n            return Request.CreateResponse(HttpStatusCode.NoContent);\n        }\n        HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);\n        result.Content = new StringContent(file);\n        result.Content.Headers.ContentType = new MediaTypeHeaderValue(\"application/octet-stream\");\n        result.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue(\"attachment\");\n        result.Content.Headers.ContentDisposition.FileName = \"List.csv\";\n\n        return result;\n    }\n</code></pre>\n\n<p>The fooService.ExportList method simply creates a csv string. </p>\n\n<p>When watching the request come back to the client, the response does have the csv string in it, but the client is not prompted or forced to download it.  </p>\n\n<p>Is this the correct way to go about this?</p>\n"},{"tags":["asp.net-mvc","bundle","signalr"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":201,"score":2,"question_id":11556110,"title":"SignalR and MVC bundle","body":"<p>I'm trying to use SignalR with MVC bundle, but having problem finding out how to include the /signalr/hubs script into the bundle. For now I have to insert the path in between jquery.signalR and my code. That will result in three javascript file requests.</p>\n\n<p>Is there any way to include /signalr/hubs into my mvc bundle?</p>\n"},{"tags":["asp.net-mvc","oauth","google-api","google-analytics-api"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13271745,"title":"Displaying Google Analytics data publicly","body":"<p>I have Google Analytics setup on a site that I work on.  I'd like to expose some of the top viewed pages to users on the site.  I'd like the information to be available without users needing to have access to the the analytics account or even having a google account.  I'd like the web server to act as the broker for retrieving the data and displaying it.</p>\n\n<p>Is this possible with their API?  I was using it not that long ago (and it was working briefly), but, then I kept running into 401 and 403 responses which made me wonder if what I am trying to do is possible with their OAuth security.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework","objectcontext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13260422,"title":"ObjectContext Error in Dev but Not when Published","body":"<p>Given the classes below, firing up the website in Visual Studio gives me the following error when <code>home/index</code> is called (this is actually the inner exception).</p>\n\n<p><code>A transport-level error has occurred when receiving results from the server. (provider: Shared Memory Provider, error: 0 - The handle is invalid.)</code></p>\n\n<pre><code>at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)\nat System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)\nat System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()\nat System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\nat System.Data.SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj)\nat System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket()\nat System.Data.SqlClient.TdsParserStateObject.ReadBuffer()\nat System.Data.SqlClient.TdsParserStateObject.ReadByte()\nat System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)\nat System.Data.SqlClient.SqlDataReader.ConsumeMetaData()\nat System.Data.SqlClient.SqlDataReader.get_MetaData()\nat System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\nat System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)\nat System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)\nat System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\nat System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)\nat System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\nat System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)\nat System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)\n</code></pre>\n\n<p>However if I publish the exact same code locally and hit the site using WebMatrix, it works fine.</p>\n\n<p>I'm using SQL Server 2008 Express too if that makes a difference. Please advise if any more information is needed.</p>\n\n<p>Controller</p>\n\n<pre><code>public class HomeController : BaseController\n{\n    public ActionResult Index()\n    {\n        var candidates = BusinessObj.AllOf&lt;Candidate&gt;().ToList();\n        return View(candidates);\n    }\n}\n</code></pre>\n\n<p>BaseController</p>\n\n<pre><code>public class BaseController : Controller\n{\n    protected ITestBusinessObject BusinessObj { get; set; }\n\n    public BaseController()\n    {\n        BusinessObj = new Business.TestBusinessObj();\n    }\n}\n</code></pre>\n\n<p>TestBusinessObj (Entities is an EF edmx class)</p>\n\n<pre><code>public class TestBusiness : ITestBusinessObject\n{\n    private Entities DB = new Entities();\n    private string ContainerName = \"Entities\";\n\n    public IEnumerable&lt;T&gt; AllOf&lt;T&gt;() where T : class, new()\n    {\n        return DB.CreateObjectSet&lt;T&gt;(ContainerName.GetEntitySetName&lt;T&gt;());\n    }\n\n    private static string GetEntitySetName&lt;T&gt;(this string containerName) where T : new()\n    {\n        var name = new T().GetType().Name;\n        if (name.EndsWith(\"y\"))\n        {\n            name = name.Substring(0, name.Length - 1) + \"ies\";\n        }\n        else\n        {\n            name = name + \"s\";\n        }\n        return string.Format(\"{0}.{1}\", containerName, name);\n    }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13271279,"title":"Is there a difference between Url.Content(\"~/...\") and \"~/\" for urls in ASP.NET MVC?","body":"<p>I'm dealing with a web application that resides within a subdirectory on a domain, and I'm attempting to discern the most idiomatic way of inserting a proper URL into an <code>img</code> tag. While the following both produce the same HTML on the client machine, I'm not sure which is more \"correct\"</p>\n\n<ul>\n<li><code>&lt;img src=\"~/Content/images/blah.png\" /&gt;</code></li>\n<li><code>&lt;img src=\"@Url.Content(\"~/Content/images/blah.png\")</code></li>\n</ul>\n\n<p>Both of these produce an absolute path of <code>/subfolder/Content/images/blah.png</code>, so both work, but I'm curious which one is the right way of doing it.</p>\n\n<p><strong>Is there any difference between these two approaches (for example, is one being resolved by a different mechanism than the other?), or is the former just syntactic sugar for the latter?</strong></p>\n"},{"tags":["ios","asp.net-mvc","cookies","ios6","mobile-safari"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13235016,"title":"Mobile Safari refusing to set a new value to an existing cookie","body":"<p>I'm having a problem which is only occurring in Safari on mobile devices. Chrome on iOS, as well as any desktop browser do not show this behavior.</p>\n\n<p>I have an app which stores some information in a cookie when the user logs in. It seems however, that the browser is refusing to accept the cookie if it already exists, or if it has been created but subsequently deleted (my app deletes the cookie on logout). I use the following method to set the cookie:</p>\n\n<pre><code>public static void SaveLoginTokenCookie(HttpResponseBase response, string token)\n{\n    HttpCookie cookie = new HttpCookie(LOGIN_COOKIE);\n    cookie.Values[LOGIN_TOKEN] = token;\n    cookie.Expires = DateTime.Now.AddYears(10);\n    if (response.Cookies[LOGIN_COOKIE] != null)\n        response.Cookies.Set(cookie);\n    else\n        response.Cookies.Add(cookie);\n}\n</code></pre>\n\n<p>If I clear the cookies using the \"Clear Cookies and Data\" option in the Safari settings, my cookie will be set successfully the first time I log into my app. If I logout and then login again, the cookie is not set; it is null when I attempt to retrieve it.</p>\n\n<p>I've tried not deleting the cookie on logout, but in that case the value assigned during the first login is taken rather than the new one. I've also tried only using <code>Cookies.Add()</code> instead of <code>Cookies.Set()</code>, but the behavior is the same.</p>\n\n<p>What's more is that this is code that <em>used</em> to work fine, and still does on any browser except mobile Safari. The problem seems to have started iOS6 was released, but as I'm not 100% sure of that, I can't assume that iOS6 is the cause.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13271048,"title":"MVC 4 RouteCollection.LowercaseUrls breaks when using Area","body":"<p>A new property to RouteCollection was added with .NET Framework 4.5:</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.lowercaseurls.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.lowercaseurls.aspx</a></p>\n\n<p>This works great, until you add an Area to your project. All Urls are propercase again.</p>\n\n<p>Any ideas why this happens? It's simple to reproduce:</p>\n\n<ol>\n<li>Create new MVC 4 Internet Application (.NET 4.5)</li>\n<li>Start RouteConfig.RegisterRoutes function with: routes.LowercaseUrls = true;</li>\n<li>Run the project and you'll see all generated Urls are now lowercase.</li>\n<li>Add an Area to the project.</li>\n<li>Run the project again and you'll see all Urls are propercase again!</li>\n</ol>\n\n<p>I boiled it down to the moment where context.MapRoute gets executed in AreaRegistration.RegisterArea. When I comment that out, I got lowercase Urls. Uncomment it, and the propercase Urls are back.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-membership","asp.net-mvc-4"],"answer_count":2,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":1256,"score":7,"question_id":12236533,"title":"Migrating from ASP.NET Membership to SimpleMembership in MVC4 RTM","body":"<p>The new MVC4 RTM internet application templates use the SimpleMembership providers as descibed here <a href=\"http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx/\">SimpleMembership</a></p>\n\n<p>My existing MVC website uses the ASP.Membership framework and ideally I would like to migrate the user data in these tables to the new SimpleMembership tables.  My reasons for wanting to do this are: </p>\n\n<ol>\n<li>Cleaner integration with the rest of the my database which uses EF</li>\n<li>Support for Azure and OAuth out of the box</li>\n<li>Use latest MVC4 RTM Controllers/Views without needing to modify</li>\n<li>I've always felt the existing membership implementation was a little bloated for what I needed</li>\n</ol>\n\n<p>So I wrote a SQL script today to migrate the data in the existing ASP.Net Membership tables into the new Simple Membership tables.  This can be found <a href=\"http://gist.github.com/3585239\">here</a></p>\n\n<p>Testing the login in my MVC 4 website the password verification is failing.  I believe the SimpleMembership uses a different password algo than the old Membership framework as new passwords created under the SimpleMemberShip framework look a lot longer.</p>\n\n<p>So my question is since I was using the \"hashed\" password format in the old ASP.Net membership providers and the users original password is irretrievable, what options do I have to get the SimpleMembership provider working.</p>\n\n<p>I guessing some options are:</p>\n\n<ol>\n<li>Get my users to reset their passwords</li>\n<li>Getting the SimpleMembership provider to use the same password algo as the old ASP.Net Membership providers.</li>\n<li>Revert the new MVC 4 RTM internet application templates to use the old ASP.Net MemberShip providers.  This is the least desirable options for me as I would like to use the SimpleMemberShip framework.</li>\n</ol>\n\n<p>I would suspect many people are also looking to migrate their existing membership databases to the new SimpleMemberShip provider.</p>\n\n<p>Any help greatly appreciated.</p>\n\n<p>Cheers</p>\n\n<p>Jim </p>\n"},{"tags":["android","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13270746,"title":"How to upload audio file from android to server through .net webservice?","body":"<p>We have a web application made in MVC3 which is hosted in Android &amp; Iphone also .Now the android developer is trying to upload an audio file through our method which is written in controller as http post method . They say they are sending the file in form of multipart chunks or byte buffer body . So I took variable of type byte array[] in my method but the type is not coinciding with their datatype .  I even tried to keep string , byte , httppostedfilebase types , but still no success . Any help would be appreciated .</p>\n"},{"tags":["javascript","asp.net-mvc","twitter-bootstrap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13270913,"title":"Tabbing between tabs when tabbing to end of page","body":"<p>I am using twitter bootstraps nav-tabs on some pages and I want a special behavior when using the tab-key. When I tab to the end of the page (the last field/button) I want to open the next tab instead of continue to tab through various fields (like the address field, search field, links, etc). </p>\n\n<p>I know that you can change the tab shown with javascript (http://twitter.github.com/bootstrap/javascript.html#tabs), the question is more on how to know when you have tabbed to the bottom of the page. I am a beginner i javascript, but guess that it is the appropriate tool.</p>\n\n<p>If possible I would like to make this general behavior, so it works for all pages with tabs (and also so it doesn't complain if the page doesn't have any tabs). </p>\n\n<p>I am working in asp.net mvc 4, if that matters.</p>\n"},{"tags":["jquery","html","css","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13270887,"title":"How can I implement hover option in jquery for my menu?","body":"<p>I am working on design of menu. I want to display it on hover event of one button. And on click event also. I want to implement it using jquery. Now when I was testing it I noticed that when I hover out the button menu disappeared before anyone click on menu item. </p>\n\n<p>How can I implement this? I don't want to disappear menu when any one is in menu division.  </p>\n"},{"tags":["html","asp.net-mvc","jquery-ajax","razor","json-encode"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13270637,"title":"ASP.NET MVC Show View after Ajax call to a Controller","body":"<p>I have a View with a submit form: when I click it a jquery/ajax function is called. This function has to encode the View Model, call a Controller action and show the View returned.\nNow, this is my function:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction Analyze() {\n    var urlact = '@Url.Action(\"Analysis\")';\n    var model = '@Html.Raw(Json.Encode(Model))';\n    $.ajax({\n        data: model,\n        type: \"POST\",\n        url: urlact,\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        success: function (data) {\n            //WHAT HERE??\n        }\n    });\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>And the <em>Analysis</em> action is a kind of</p>\n\n<pre><code>public ViewResult Analysis(IEnumerable&lt;Azienda&gt; aziende) {\n        Debug.WriteLine(aziende.Count());\n        return View(aziende);\n    }\n</code></pre>\n\n<p>Returning a View!\nHow can I display that View on success:function(data)?\nI tried changing dataType to <em>html</em> and calling on success <strong>alert(data)</strong> but I had problems with the encoded model, I tried commenting the contentType line but same model-encoding issue.</p>\n\n<p>Does someone know how to do that?\nA js/query/ajax workaround-trick is fine, too.</p>\n\n<p>Thanks you all!</p>\n"},{"tags":["asp.net-mvc","gzip"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13270288,"title":"Issues facing working with GZip","body":"<p>I am facing a problem while trying to use GZip .\nI have used the below entries in my config files i.e., applicationHost.config and web.config</p>\n\n<pre><code>&lt;httpCompression&gt;\n  &lt;staticTypes&gt;\n    &lt;add mimeType=\"text/*\" enabled=\"true\" /&gt;        \n    &lt;add mimeType=\"*/*\" enabled=\"false\" /&gt;\n  &lt;/staticTypes&gt;\n  &lt;dynamicTypes&gt;\n    &lt;add mimeType=\"text/*\" enabled=\"true\" /&gt;        \n    &lt;add mimeType=\"*/*\" enabled=\"false\" /&gt;\n  &lt;/dynamicTypes&gt;\n  &lt;scheme name=\"gzip\" dll=\"%Windir%\\system32\\inetsrv\\gzip.dll\" dynamicCompressionLevel=\"4\" /&gt;\n&lt;/httpCompression&gt;\n&lt;urlCompression doDynamicCompression=\"true\" doStaticCompression=\"true\"/&gt;\n</code></pre>\n\n<p>I have my application being deployed on IIS 7.5.\nI have seen these suggestions over the net and I happen to hear that I would not need an exclusive stream code to be written. An entry to config file would suffice.\nBut still I get an error when my WCF service returns me a collection object with records over 1000. The object is a serializable object.\nPlease help me in this issue</p>\n"},{"tags":["jquery","asp.net-mvc","grid","3rd-party-library"],"answer_count":12,"favorite_count":103,"up_vote_count":104,"down_vote_count":0,"view_count":48620,"score":104,"question_id":177275,"title":"grid controls for ASP.NET MVC?","body":"<p>If you are using ASP.NET MVC how are you doing grid display?\nRolled your own?\nGot a library from somewhere?</p>\n\n<p>These are some of the known grid display solutions I have found for ASP.NET MVC</p>\n\n<ul>\n<li><a href=\"http://www.codeproject.com/KB/aspnet/MVCFlexigrid.aspx\" rel=\"nofollow\">ASP.NET MVC Flexgrid </a>   - Has nice column layout method</li>\n<li><a href=\"http://blog.maartenballiauw.be/post/2008/06/Code-based-ASPNET-MVC-GridView.aspx\" rel=\"nofollow\">Code based ASP.NET MVC GridView</a> - simple, small, clean</li>\n<li><a href=\"http://weblogs.asp.net/shijuvarghese/archive/2008/07/23/asp-net-mvc-grid-view-using-mvccontrib.aspx\" rel=\"nofollow\">MVC Contrib</a> - grid from codePlex</li>\n<li><a href=\"http://www.trirand.com/blog/?page%5Fid=6\" rel=\"nofollow\">jQueryGrid</a>  - jQuery grid</li>\n<li><a href=\"http://www.datatables.net/\" rel=\"nofollow\">Datatables</a>  - jQuery plugin - believed to be section 508 compliant</li>\n<li><a href=\"http://extjs.com/deploy/dev/examples/samples.html\" rel=\"nofollow\">extJS</a> - cross browser RIA framework - has grid support</li>\n<li><a href=\"http://www.reconstrukt.com/ingrid/\" rel=\"nofollow\">Ingrid</a> - jQuery data grid</li>\n<li><a href=\"http://jqwidgets.com/\" rel=\"nofollow\">jqxGrid</a> - jQuery data grid</li>\n<li><a href=\"http://demos.telerik.com/aspnet-mvc/\" rel=\"nofollow\">Terlerik MVC</a> - jQuery based grid that is GPL v2 licensed, commercial version also available</li>\n<li><a href=\"http://mvccontrolstoolkit.codeplex.com/\" rel=\"nofollow\">MVC Controls Toolkit</a> - Client Site Based Grid</li>\n<li><a href=\"http://www.infragistics.com/dotnet/netadvantage/jquery-controls/grid.aspx\" rel=\"nofollow\">Infragistics igGrid</a> - jQuery based MVC grid</li>\n<li><a href=\"http://www.dhtmlx.com/blog/?p=1349\" rel=\"nofollow\">dhtmlxGrid</a> - Ajax-enabled JavaScript grid control </li>\n<li><a href=\"http://demo.aspnetawesome.com/Dinners\" rel=\"nofollow\">ASP.net MVC Awesome Ajax List</a> - a different, very flexible approach, can be used as a grid</li>\n<li><a href=\"http://mvc.syncfusion.com/sfmvcsamplebrowser/10.2.0.56/Grid_MVC/Samples/4.0/Razor\" rel=\"nofollow\">Syncfusion MVC Grid</a> - Commercial grid</li>\n<li><a href=\"http://demo.aspnetawesome.com/GridDemo\" rel=\"nofollow\">ASP.net MVC Awesome Grid</a> - part of the Awesome library (jQuery based)  </li>\n</ul>\n\n<p>If you know of anything else that you are using or know to be good, please let me know.</p>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13270097,"title":"Operation could destabilize runtime, works local, not on server","body":"<p>Here is my Action:</p>\n\n<pre><code>Imports PagedList\n\n&lt;EmployeeAuthorize()&gt;\nFunction SearchFoods(Optional ByVal date1 As String = \"\", Optional ByVal keyword As String = \"\", Optional page As Integer = 1) As ActionResult\n\n    If String.IsNullOrEmpty(date1) Then\n        date1 = Date.Now\n    End If\n\n    If String.IsNullOrEmpty(keyword) Then\n        keyword = Nothing\n    End If\n\n    Dim food = db.Tbl_Foods.Where(Function(x) x.Shrt_Desc.Contains(keyword)).OrderBy(Function(x) x.Food_ID).ToList\n\n    For Each item In food\n        item.Shrt_Desc = item.Shrt_Desc.Replace(\",\", \", \")\n    Next\n\n    ViewBag.MyDate = date1\n    ViewBag.MyKeyword = keyword\n\n    ' set the page size and number\n    Dim pageSize = 20\n    Dim pageNumber = page\n\n    TempData(\"CurrentPage\") = \"My Wellness\"\n    TempData(\"CurrentWellnessPage\") = \"Food Log\"\n    Return View(\"\", \"_FinalWellnessSubPageLayout\", food.ToPagedList(pageNumber, pageSize))\n\nEnd Function\n</code></pre>\n\n<p>I believe this is caused, somehow, by the \"ToPagedList\" since this is the first time I am using it.  It works fine on local, but not when I publish to the server.  The stack trace looks like this:</p>\n\n<blockquote>\n  <p>[VerificationException: Operation could destabilize the runtime.]<br>\n  PagedList.PagedList<code>1..ctor(IEnumerable</code>1 superset, Int32 pageNumber,\n  Int32 pageSize) +0<br>\n  PagedList.PagedListExtensions.ToPagedList(IEnumerable`1 superset,\n  Int32 pageNumber, Int32 pageSize) +62</p>\n</blockquote>\n\n<p>It also says:</p>\n\n<blockquote>\n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n</blockquote>\n\n<p>What is the exception?  How can I find what exception \"occurred during the execution?\"</p>\n\n<p>Does anyone know how to fix this error on the server?  Thank you.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-membership","viewdata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13269786,"title":"Storing Additional Information About a Logged In ASP.NET MVC User","body":"<p>I need to store an ID against a user that will be used in EVERY action that is carried out on my web application. I had hoped to use a customized authorization <code>ActionFilterAttribute</code> (on an entire controller) to populate the <code>ViewData</code> with this additional info, but it turns out that a whole STACK of stuff runs before these <code>ActionFilterAttributes</code> do e.g. ModelBinding, Controller construction</p>\n\n<p>I thought perhaps there may be a way to extend the <code>HttpContext.User.Identity</code> to store additional data but have no idea even where to start.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13269868,"title":"What if All Actions call same function in Asp.net MVC4?","body":"<p>All, In my application design, Some the actions of Controller classes will call the same method firstly whenever it was called. the code snippet looks like below . please review it .thanks.</p>\n\n<pre><code>public class Controller1 : Controller\n    {\n\n        public ActionResult Action1()\n        {\n            FunctionA(); //This function must be called firstly.This function is defined somewhere. \n            return View(\"a1\");\n        }\n\n        public ActionResult Action2()\n        {\n            FunctionA(); \n            return View(\"a2\");\n        }\n\n    }\n\npublic class Controller2 : Controller\n    {\n\n        public ActionResult Action3()\n        {\n            FunctionA(); \n            return View(\"a3\");\n        }\n\n        public ActionResult Action4()\n        {\n            FunctionB(); \n            return View(\"a4\");\n        }\n\n    }\n</code></pre>\n\n<p>In current case ,  <code>Action1</code>,<code>Action2</code> in <code>Controller1</code> and <code>Action3</code> in <code>Controller2</code> will call the same <code>FunctionA()</code> , Based on the DRY theory, It is better to define a base controller or method something , I don't know how to make it in Asp.net MVC4. Please help me .thanks.</p>\n"},{"tags":["mysql","asp.net-mvc","visual-studio"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13269830,"title":"how to add values in the database","body":"<p>In my table I have 5 fields,In those fields,Those are</p>\n\n<pre><code>1.questionId\n2.questionUserId\n3.SurveyId\n4.answer\n5.answerId\n</code></pre>\n\n<p>while I was saving records,I am passing \"answer\" field and \"survey\" field as a parameter to my action method.\nMy answer parameter is in the form of string separated my semicolumn.I am splitting this one using \"semicolumn\" and by executing the for loop I am trying to save values into the database.</p>\n\n<p>How I have to save is that,For adding new record,In the for loop all record values are same except \"answer\" and \"answerId\" which is auto incrementing.\nwhile I am saving,For the first time of execution new record is saving but for next iteration,It is throwing <code>DuplicateKeyUnhandledByUserCode</code> and <code>Instance of 'DataModel.question_answer' with identity '1850137295-2-1-2-11' already exists in the cache of the object scope.</code></p>\n"},{"tags":["c#",".net","asp.net-mvc","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":38,"score":2,"question_id":13268203,"title":"Can we do the DBContext in MVC3 with Razor?","body":"<p>Can I connect to the DB using <code>DBContext</code> in MVC3 by defining the <code>ConnectionString</code> in Web.config?</p>\n\n<p>If possible can anyone provide me some links too?</p>\n"},{"tags":["asp.net-mvc","webforms","inline-code"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2721,"score":3,"question_id":639250,"title":"Inline Code on Webform Property","body":"<p>Why doesn't this display the date/time when rendered?</p>\n\n<pre><code>&lt;asp:Label runat=\"server\" ID=\"test\" Text=\"&lt;%= DateTime.Now.ToString() %&gt;\" &gt;&lt;/asp:Label&gt;\n</code></pre>\n\n<p>Is there anyway to make this work?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13269490,"title":"ASP.NET MVC Modular development","body":"<p>Ever since ASP.NET entered the scene, there has never been a clean out-of-the-box way to create a library (views + code) that you could easily deploy within an ASP.NET site.</p>\n\n<p>So, if we take the scenario where you have a solution with:</p>\n\n<ul>\n<li>an ASP.NET site </li>\n<li>a class library</li>\n</ul>\n\n<p>As far as controllers or code-behind goes, that's easy enough to deal with. The latter are just compiled into the class library, the former are part of the class library too and can easily be detected by convention in the web app. Now for views, be it ascx, aspx or cshtml, it becomes a different story. As far as I can tell, these are the options:</p>\n\n<ol>\n<li><p><strong>Embedded views</strong>, served through a VirtualPathProvider. You keep the run-time compilation, but you cannot change the view from within the web site, though you <em>can</em> set it up to hook into the fallback chain of available view locations.</p></li>\n<li><p><strong>Compiled views</strong>. This basically boils down to the code-behind scenario. I think the same remarks hold as for embedded views.</p></li>\n<li><p><strong>NuGet package</strong> which copies over the view files. Seems the most feasible, but also imposes unwanted build overhead.</p></li>\n</ol>\n\n<p>My main problem is that there's no one-size-fits-all scenario to facilitate both development and production deployment, that:</p>\n\n<ul>\n<li>keeps your projects nice and tidy: separate project with models, controllers and views</li>\n<li>fits into you development cycle: just edit a view and try it</li>\n<li>enabled easy deployment: once developed, apply it to other projects</li>\n</ul>\n\n<p>I'm curious how other developers deal with this, and if anyone found a way of dealing with all these issues?</p>\n\n<p><em>Edit: note that I am aware of the fact that a lot of CMS's do facilitate it in some way, but so far, I have not encountered the one that solves the above stuff.</em></p>\n"},{"tags":["javascript","asp.net-mvc","telerik","telerik-grid","telerik-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13269096,"title":"Telerik MVC Grid Validation Localization","body":"<p>I have a telerik grid in my view and i defined the property localizable to <code>pt-PT</code>\nin my <code>web.config</code> i have the globalization like this: </p>\n\n<pre><code>enableClientBasedCulture=true culture=pt-PT uiCulture=auto\n</code></pre>\n\n<p>I also added the file <code>GridLocalization.pt-PT.resx</code> to the globalresources (althought this should have nothing to do with the validation). Still it validates my datepicker in another culture format.</p>\n\n<p>How can i change the culture validation format?</p>\n"},{"tags":["asp.net-mvc","vb.net","json","streaming","newtonsoft"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13268237,"title":"Returning a JSON stream from an ApiController","body":"<p>I've got a <em>large</em> JSON Object which I need to return from an MVC ApiController.</p>\n\n<p>I can't simply return the JSON Object as the internal serializer barfs on the serialized contents being too long.</p>\n\n<p>I don't want to serialize to string and then return the string as we could be dealing 5-6MB of data and that seems like a waste of memory for no purpose.</p>\n\n<p>What I want to do is use the Newtonsoft JSON Serializer to write to the response stream directly.</p>\n\n<pre><code>Dim Ret = Client.Search(Model) ''Get the results object\nDim Response As New HttpResponseMessage()\nUsing MemoryStream As New IO.MemoryStream\n    Using StreamWriter As New StreamWriter(MemoryStream)\n        Using JsonWriter As JsonWriter = New JsonTextWriter(StreamWriter)\n            Dim Serializer As New JsonSerializer\n            Serializer.Serialize(JsonWriter, Ret)\n        End Using\n    End Using\n    Response.Content = New StreamContent(MemoryStream)\n    Return Response\nEnd Using\n</code></pre>\n\n<p>Unfortunately, this results in the connection being reset unexpectedly - I'm guessing this is due to the stream being disposed of before it's finished sending the result?</p>\n\n<p>Even if I strip out all the <code>Using</code> blocks and just leave everything for the GC as here:</p>\n\n<pre><code>Dim Ret = Client.Search(Model)\nDim Response As New HttpResponseMessage()\nDim MemoryStream As New IO.MemoryStream\nDim StreamWriter As New StreamWriter(MemoryStream)\nDim JsonWriter As JsonWriter = New JsonTextWriter(StreamWriter)\nDim Serializer As New JsonSerializer\nSerializer.Serialize(JsonWriter, Ret)\nResponse.Content = New StreamContent(MemoryStream)\nReturn Response\n</code></pre>\n\n<p>I get a 0-byte response instead. Can someone please point me in the right direction?</p>\n"},{"tags":["c#","asp.net-mvc","unit-testing","nunit","moq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":207,"score":0,"question_id":10401409,"title":"using moq to populate httpcontext.request","body":"<p>I am using the <a href=\"http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx\" rel=\"nofollow\">hanselman tutorial</a> to use Moq to create unit tests for methods that take httpcontext as input parameter. </p>\n\n<pre><code>public static class MvcMockHelpers\n{\n\n    public static HttpContextBase FakeHttpContext()\n    {\n        var context = new Mock&lt;HttpContextBase&gt;();\n        var request = new Mock&lt;HttpRequestBase&gt;();\n        var response = new Mock&lt;HttpResponseBase&gt;();\n        var session = new Mock&lt;HttpSessionStateBase&gt;();\n        var server = new Mock&lt;HttpServerUtilityBase&gt;();\n\n        context.Setup(ctx =&gt; ctx.Request).Returns(request.Object);\n        context.Setup(ctx =&gt; ctx.Response).Returns(response.Object);\n        context.Setup(ctx =&gt; ctx.Session).Returns(session.Object);\n        context.Setup(ctx =&gt; ctx.Server).Returns(server.Object);\n\n        return context.Object;\n    }\n\n    public static HttpContextBase FakeHttpContext(string url)\n    {\n        var context = FakeHttpContext();\n        context.Request.SetupRequestUrl(url);  &lt;---- error here\n        return context;\n    } \n\n\n\n}\n</code></pre>\n\n<p>I am getting the following error on <strong>context.Request.SetupRequestUrl(url);</strong></p>\n\n<p><em>Error  1   'System.Web.HttpRequestBase' does not contain a definition for 'SetupRequestUrl' and no extension method 'SetupRequestUrl' accepting a first argument of type 'System.Web.HttpRequestBase' could be found (are you missing a using directive or an assembly reference?)</em></p>\n\n<p>Please help. </p>\n\n<p>I am trying to find a very simple easy to follow tutorial on setting up httpcontext request object and pass into method with context input parameter and be able to create unit test but all the examples in google either do not work or are complicated. please help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","telerik","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13198317,"title":"Template column inside DetailView in Telerik Grid MVC","body":"<p>My nested template column is not appearing in my markup when page loads.  Im trying to load a grid with a template column within a DetailView of another parent-grid.  I can see my data being passed and clearly the \"Name\" of the UnitPeriod appears but nothing within my template column, so it seems as the data is being passed into the grid.  Ive checked the source with firebug and that column always loads empty.  Can any1 spot why?</p>\n\n<pre><code>&lt;div&gt;\n@(Html.Telerik().Grid&lt;RentableUnit&gt;()\n    .Name(\"RentableUnits\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(e =&gt; e.UnitID).Hidden();\n        columns.Bound(e =&gt; e.Name).Width(75);\n    })\n    .ClientEvents(events =&gt; events.OnRowDataBound(\"employees_onRowDataBound\")\n                            .OnDetailViewExpand(\"unit_onDetailViewExpand\")\n                            .OnDetailViewCollapse(\"unit_onDetailViewCollapse\"))\n    .DetailView(details =&gt; details.ClientTemplate(\n        Html.Telerik().Grid&lt;UnitPeriod&gt;()\n            .Name(\"UnitPeriod_&lt;#= UnitID #&gt;\")\n            .Columns(columns =&gt;\n                {\n                    columns.Bound(o =&gt; o.Name);\n                    columns.Template(@&lt;text&gt;\n                     @foreach (Day day in item.Days)\n                     {\n                         if (!day.IsRentable)\n                         {\n                             &lt;img src=\"../../Content/Images/Houses/icon_lokad.png\"/&gt;\n                         }\n                         else\n                         {\n                             &lt;img src=\"../../Content/Images/Houses/icon_opid.png\"/&gt;\n                         }\n                     }\n             &lt;/text&gt;);\n            })\n            .ClientEvents(events =&gt; events.OnRowDataBound(\"orders_onRowDataBound\"))\n            .DataBinding(dataBinding =&gt; dataBinding.Ajax()\n            .Select(\"SelectedUnitPeriod\", \"Home\", new { unitId = \"&lt;#= UnitID #&gt;\" }))\n            .ToHtmlString()\n    ))\n    .DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"RentableUnits\", \"Home\"))\n    .Sortable()\n    )\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    var derpinski = \"\";\n    function expandFirstRow(grid, row) {\n        if (grid.$rows().index(row) == 0) {\n            grid.expandRow(row);\n        }\n    }\n\nfunction loadTabGridContent(e) {\n    var url = '/Home/TabGridContent/';\n    $.ajax({\n        type: 'GET',\n        dataType: 'html',\n        url: url,\n        success: function (data) {\n            alert('success');\n            $('#TabGridContent').html(data);\n        }\n    });\n}\n\nfunction employees_onRowDataBound(e) {\n    var grid = $(this).data('tGrid');\n    expandFirstRow(grid, e.row);\n}\n\nfunction orders_onRowDataBound(e) {\n    var grid = $(this).data('tGrid');\n    expandFirstRow(grid, e.row);\n}\n\nfunction unit_onDetailViewExpand(e) {\n    var mstRow = e.masterRow;\n    var unitNumber = mstRow.cells[1].innerHTML;\n    derpinski = derpinski + unitNumber + \",\";\n}\n\nfunction unit_onDetailViewCollapse(e) {\n    var mstRow = e.masterRow;\n    var unitNumber = mstRow.cells[1].innerHTML;\n    derpinski = derpinski.replace(unitNumber + \",\", \"\");\n}\n</code></pre>\n\n<p> </p>\n"},{"tags":["asp.net-mvc","json","http","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13262719,"title":"What's the proper return value for MVC4 WebAPI when HTTP request is invalid","body":"<p>I am using ASP.NET MVC4 WebAPI for exposing json services. If a HTTP GET request received but the URL is invalid (e.g. an invalid id), what should I return as best practice? I tried to return null and the response is a null string, is this a good way for handling this?</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13267343,"title":"ASP.NET MVC form engine for an intranet solution?","body":"<p>Is there one that's worth looking into as an intranet solution ? The only one i've found that's even half decent is \n<a href=\"http://survey.codeplex.com/\" rel=\"nofollow\">Survey</a>.</p>\n\n<p>Reasons i don't want to use it is i would prefer ASP.NET MVC over Webforms and the project above has given me many headaches starting from security issues (for example last time i checked, HTML injection was allowed by default) and ending with the usability of the solution from an end user perspective. \nThe form engine's user interface and usability is just not acceptable for the problem i'm trying to solve.</p>\n\n<p>I was very impressed with the Java based form engine called <a href=\"http://www.orbeon.com/orbeon/fr/orbeon/builder/new\" rel=\"nofollow\">Orbeon</a>. Is there anything like that for ASP.NET MVC ?</p>\n"},{"tags":["asp.net",".net","asp.net-mvc"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12936546,"title":"File upload - video validation","body":"<p>how can I check if a file uploaded to my server by a standard html upload is a video file?</p>\n\n<p>I think file extension and mime checks are not useful as these could be faked. I tried using this script and it partially works, but for some reason it doesn't seem to validate wmv and mp4 formats.</p>\n\n<p><a href=\"http://mynkow.blogspot.co.uk/2010/05/how-to-validate-video-file.html\" rel=\"nofollow\">http://mynkow.blogspot.co.uk/2010/05/how-to-validate-video-file.html</a></p>\n\n<p>any help would be much appreciated.</p>\n\n<p>thanks</p>\n"},{"tags":["c#","jquery","asp.net-mvc","form-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13267455,"title":"Retaining form state for elements introduced by jQuery","body":"<p>I have a view which has a table with one editable row. A new editable row can be added using jQuery by clicking an image.</p>\n\n<pre><code>&lt;table width=\"100%\" class=\"rateTable\" id=\"rateTbl\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Low Range\n        &lt;/th&gt;\n        &lt;th&gt;\n            High Range\n        &lt;/th&gt;\n        &lt;th&gt;\n            Rate\n        &lt;/th&gt;            \n        &lt;th&gt;\n        &lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.TextBox(\"LowRange0\")\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.TextBox(\"HighRange0\")\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.TextBox(\"Rate0\")\n        &lt;/td&gt;\n        &lt;td&gt;                \n            &lt;input type=\"image\" alt=\"new band\" src=@Url.Content(\"~/Content/images/add.gif\") id=\"addBand\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Following is the jQuery script which adds a new row.</p>\n\n<pre><code>$(\"#addBand\").click(function () {        \n    AddRow(highRange);        \n});\n\nvar AddRow = function (highRange) {\n    var tr = $(\"#rateTbl tr:last\").clone(true, true);\n\n    $(tr).find(\"input, select\")\n    .attr(\"name\", function () {\n        var parts = this.id.match(/(\\D+)(\\d+)$/);\n        if (parts != null) {\n            return parts[1] + ++parts[2];\n        }\n    })\n    .attr(\"id\", function () {\n        var parts = this.id.match(/(\\D+)(\\d+)$/);\n        if (parts != null) {\n            return parts[1] + ++parts[2];\n        }\n    });\n\n    $(\"#rateTbl tr:last\").after(tr);\n}\n</code></pre>\n\n<p>The trouble is upon form submit and subsequent validation failure, the form state does not retain the newly added row thereby losing the input values. I need to make sure that the new row added using jQuery be retained in case of validation failure.</p>\n"},{"tags":["c#","asp.net-mvc","appfabric"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13260517,"title":"Caching MVC views in AppFabric manually","body":"<p>I am trying to recreate most of the functionality of the OutputCache action filter in MVC 4 by caching view result objects myself. The reason I don't want to use the OutputCache action filter is because I can't use it with AppFabric and partial views; partial views are always stored in MemoryCache and I want the cached objects to be used across a server farm.</p>\n\n<p>The first problem I have is </p>\n\n<pre><code>{\"Type 'System.Web.Mvc.TempDataDictionary' cannot be serialized. \nConsider marking it with the DataContractAttribute attribute, and marking all of \nits members you want serialized with the DataMemberAttribute attribute.  \nIf the type is a collection, consider marking it with the \nCollectionDataContractAttribute.  See the Microsoft .NET Framework documentation for  \nother supported types.\"}\n</code></pre>\n\n<p>This makes me wonder if I should cache something else to return what is essentially the view at the end. Does anyone have an idea of what I should cache instead to recreate the view or a different approach for caching partial views over a server farm? I do not want to use third party plugins for this.</p>\n\n<p>Thanks</p>\n\n<p>Update: I started caching the string representation of the partial view like so:</p>\n\n<pre><code>using (StringWriter sw = new StringWriter())\n        {\n            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, \"ViewName\");\n            ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);\n            viewResult.View.Render(viewContext, sw);\n            view = sw.GetStringBuilder().ToString();\n        }\n</code></pre>\n\n<p>This has made it easy to just retrieve the string in cache and return it as content in the action. I'm still looking for other suggestions or a better way to do this.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","automapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13266570,"title":"Automapper - Returning right value but not mapping","body":"<p>In my MVC webapplication I got the following automapper code:</p>\n\n<p><strong>The configure:</strong></p>\n\n<pre><code> public static void Configure()\n        {\n            Mapper.CreateMap&lt;string, List&lt;Ruimte&gt;&gt;().ConvertUsing&lt;StringCombinatieRuimtesConverter&gt;();\n        }\n</code></pre>\n\n<p><strong>The custom converter:</strong></p>\n\n<pre><code>public class StringCombinatieRuimtesConverter : ITypeConverter&lt;string, List&lt;Ruimte&gt;&gt;\n    {\n        #region Implementation of ITypeConverter&lt;in string,out List&lt;Ruimte&gt;&gt;\n\n        public List&lt;Ruimte&gt; Convert(ResolutionContext context)\n        {\n            if (context.SourceValue == null)\n            {\n                return new List&lt;Ruimte&gt;();\n            }\n\n            return context.SourceValue.ToString().Split(',').Select(r =&gt; new Ruimte { Id = int.Parse(r) }).ToList();\n        }\n\n        #endregion\n    }\n</code></pre>\n\n<p><strong>And I call it with the following code:</strong></p>\n\n<pre><code>            var ruimteList = new List&lt;Ruimte&gt;();\n\n            // Update the CombinatieVan\n            Mapper.Map(command.CombinatieRuimteVan, ruimteList);\n</code></pre>\n\n<p>If I debug the command.CombinatieRuimteVan is: 2,3,4,6. This is fine.\nNow if I debug the converter it does return 4 objects of the class \"Ruimte\" with as Id the numbers stated before. But after the Mapper.Map method is done the \"ruimteList\" is still an empty list.</p>\n\n<p>Does anyone know what is going wrong here? The automapper works fine on another spot in my application where I automap a whole entity containing the \"CombinatieRuimteVan\" set. But when I sololy convert the string to the list it doesn't seem to work.</p>\n"},{"tags":["asp.net-mvc","gridview","devexpress"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13266682,"title":"Postback selection devexpress gridview in ASP.NET MVC","body":"<p>I am using Devexpress GridView in a ASP.NET MVC web site. What I am trying to do is give list in which they can select rows and then preform a action on those selected rows. </p>\n\n<p>For example:\nThe list shows customers and after selecting some I can either select a button 'Send Email' that post those people back and the selected action. Or a action like 'Remove' in which the people and that action would be posted back.</p>\n\n<p>What would the proper way be of doing this. I have a ASP.NET MVC Razor application</p>\n\n<p>Regards,\nSebastiaan Vreeken</p>\n"},{"tags":["c#","xml","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13262279,"title":"Populate KeyValue Model from XML File in .Net MVC","body":"<p>I have a database model with several KeyValue entities where values will not change often.  Rather than storing this data in a database, I am hoping to store in a code file or xml file.  I was wondering how I can get a list of these KeyValues through my application.  I was thinking an XML file in app_data folder would be ideal, but I don't know who to consume such a file through a model class.  Maybe there is a better alternative?</p>\n"},{"tags":["javascript","asp.net-mvc","mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13265800,"title":"Redirect to controller using JavaScript and MVC","body":"<p>Im trying to redirect to a Controller from JavaScript using this line of code</p>\n\n<pre><code> location.href = '/Dashboard/';\n</code></pre>\n\n<p>It redirects to the Dashboard but on my dashboard view this method is called when the document loads </p>\n\n<pre><code> $.post(\"Dashboard/UsersGet\", {}, function (dataSet) {\n    //do something with the dataset\n }); \n</code></pre>\n\n<p>I then get this error.</p>\n\n<pre><code>POST http://localhost:1414/Dashboard/Dashboard/UsersGet 404 (Not Found) \n</code></pre>\n\n<p>I can see that dashboard is added to the url twice. How can I redirect to a Controller without this happening?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":483,"score":0,"question_id":4291365,"title":"ASP.NET MVC HttpContext Getting IdentityName after LogOn","body":"<p>HttpContext.Current.User.Identity.Name returns null after LogOn.   I am using IIS7.0 framework 4.0. and  vs 2010. i have another project which targetFramework is 3.5. it works good. But targetFramework of my new project is 4.0.  and when calling HttpContext.Current.User.Identity.Name it returns null</p>\n"},{"tags":["c#","asp.net-mvc","razor","infragistics","ignite-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13121902,"title":"Infragistics grid's GET returning empty response","body":"<p>I'm trying to use Infragistics' grid to display a list of items from my Database. I'm using code-first method with Entity Framework in an MVC application with Razor engine. Every thing is working fine in the view except the Infragistics grid.</p>\n\n<p>Here is my home view:</p>\n\n<pre><code>@using Infragistics.Web.Mvc\n@model IEnumerable&lt;BusinessModel.Models.TestPlan&gt;\n\n@{\n    ViewBag.Title = \"Home\";\n}\n\n@( Html.Infragistics().Grid&lt;BusinessModel.Models.TestPlan&gt;(Model)\n.AutoGenerateColumns(true)\n.DataSourceUrl(Url.Action(\"igListTestPlan\"))\n.DataBind()\n.Render())\n</code></pre>\n\n<p>Here is my controller:</p>\n\n<pre><code>[GridDataSourceAction]\npublic ActionResult igListTestPlan()\n{\n    return View(service.getListTestPlan());\n}\n</code></pre>\n\n<p>Using firebug I can clearly see that the request is sent with a status code \"200 OK\", but the response tab is empty. It also causes an error in the console (in infragistics.js):</p>\n\n<pre><code>Uncaught TypeError: Cannot read property 'length' of undefined \n</code></pre>\n\n<p>I guess it's because of the empty response.</p>\n\n<p><strong>What I tried:</strong></p>\n\n<p>Debugging my controller showed me that <code>return View(service.getListTestPlan());</code> doesn't return an empty list: I have 3 valid items in.</p>\n\n<p>I also tried <code>Html.Infragistics().Grid&lt;BusinessModel.Models.TestPlan&gt;(Model__.ToList())</code> but nothing changed. Also <code>Html.Infragistics().Grid(Model)</code> tells me I've got invalid parameters</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc","infragistics","ignite-ui"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12786040,"title":"Infragistics MVC Helper Custom Column","body":"<p>I'm currently using the ASP.NET MVC helpers in MVC4, with the Infragistics igGrid control, and am looking for a way to insert a custom column in order to implement AJAX calls for CRUD functionality. The only solutions that I've found involve exposing the entity which isn't an option in the current architecture.  Essentially I just need to know how to add a new column that can contain a simple href to call an existing REST API that references the model on the specific row.</p>\n\n<p>Here's what I have so far...</p>\n\n<pre><code>&lt;div class=\"queue-grid\"&gt;\n@( Html.Infragistics().Grid(Model).Columns( c =&gt;\n {\n     c.For(m =&gt; m.DateSubmitted).HeaderText...\n     c.For(m =&gt; m.RequestorName).HeaderText...\n     c.For(m =&gt; m.OrganizationName).HeaderText(...\n     c.For(m =&gt; m.CategoryName).HeaderText(...\n     c.For(m =&gt; m.DesiredCompletionDate).HeaderText(...\n     c.For(m =&gt; m.ChargeCode).HeaderText(...\n     c.For(m =&gt; m.ApprovingManagerName).HeaderText(...\n     c.For(m =&gt; m.Description).HeaderText(...\n     c. //Edit function\n     c. //Delete function\n....\n</code></pre>\n"},{"tags":[".net","asp.net-mvc","websync"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13198021,"title":"Websync 4.0 PublisherNotAllowed","body":"<p>I'm having a weird problem with websync 4.0: it works fine on my local machine, but when I deploy to a test server I get this error </p>\n\n<pre><code>System.Exception: Publication failed. result : {\"channel\":\"\\/n\\/95e4d313-27eb-441b-966d-c8630f80ec9a\",\"error\":\"606::Publisher access is disabled. Publisher access can be enabled by setting server[allowPublishers] to true in web.config.\",\"ext\":{\"fm.meta\":{\"ticketID\":\"\"}}}\n</code></pre>\n\n<p>The thing is that I have 2 web applications developed on .net:</p>\n\n<ul>\n<li>one for the website</li>\n<li>one for the websync server</li>\n</ul>\n\n<p>In both web.config files I've added </p>\n\n<pre><code>  &lt;WebSync&gt;\n    &lt;server providerType=\"FM.WebSync.Server.Providers.Sticky.InProcProvider\" httpDirectPublish=\"true\"/&gt;\n  &lt;/WebSync&gt;\n</code></pre>\n\n<p>On localhost (where it works just fine) both IIS applications point to localhost.</p>\n\n<p>From the website project I make a call via javascript to subscribe to a channel, and it works fine on both my machine and the test machine.</p>\n\n<p>But when I try to send a message (and invite both parties to join a private channel) it only works on my local machine (this message sending is done via a http post to a method from the web site server which makes a publish to the websync server thus resulting in that error.)</p>\n\n<p>Any ideas?\nAny help would be much appreciated.</p>\n\n<p>Mihai</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13264645,"title":"MVC3 Display the edit view on the same page as the list of items","body":"<p>I have a list of transactions. When I click one of them, I'd like to be able to display the edit form (populated with the selected item's data) to the right of the list. Any ideas?</p>\n\n<p>Below is the partial view that displays the list of transactions.</p>\n\n<pre><code>@model IEnumerable&lt;BudgetPlus.Models.Transaction&gt;\n@{\n    ViewBag.Title = \"Index\";\n}\n&lt;p&gt;\n    @Html.ActionLink(\"Create New\", \"Create\", null, new { @class = \"button-link\" })\n&lt;/p&gt;\n&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th class=\"column-Date\"&gt;Date&lt;/th&gt;\n            &lt;th class=\"column-Description\"&gt;Description&lt;/th&gt;\n            &lt;th class=\"column-Category\"&gt;Category&lt;/th&gt;\n            &lt;th class=\"column-Amount\"&gt;Amount&lt;/th&gt;\n            &lt;th class=\"action-button\"&gt;&lt;/th&gt;\n            &lt;th class=\"action-button\"&gt;&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        @foreach (var item in Model)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Date)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Description)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Category.DisplayName)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.DisplayFor(modelItem =&gt; item.Amount)\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.ActionLink(\"Edit\", \"Edit\", new { id = item.Id })\n                &lt;/td&gt;\n                &lt;td&gt;\n                    @Html.ActionLink(\"Delete\", \"Delete\", new { id = item.Id })\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;div&gt;\n    @Html.EditorForModel(\"Edit\")\n&lt;/div&gt;\n</code></pre>\n\n<p>And this is what the edit method in my TransactionController looks like.</p>\n\n<pre><code>    public ActionResult Edit(int id)\n    {\n        Transaction transaction = db.Transactions.Find(id);\n        ViewBag.CategoryId = new SelectList(db.Categories, \"Id\", \"DisplayName\", transaction.CategoryId);\n        return View(transaction);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13265026,"title":"deployment script","body":"<p>I have created deployment script using database project.\nI have also created empty database in my sql and have run that script to check.\nThe script was executed successfully but when i see the database then no table was created.\nso any idea how to use the script and what was the reason why the tables was not created. </p>\n"},{"tags":["c#","asp.net-mvc","extension-methods","timeline"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13235110,"title":"TimelineJS in C# Mvc","body":"<p>How to add TimelineJS (<a href=\"http://timeline.verite.co/\" rel=\"nofollow\">http://timeline.verite.co/</a>) to your website with C# Mvc.\nIf you want to view a complete project, visit <a href=\"http://www.m33.se/timelinejs.html\" rel=\"nofollow\">http://www.m33.se/timelinejs.html</a>.\nI know there's several peoples that wonder how to get the TimelineJs to be displayed.\nI've created some helper classes that makes it easy to extend from your original class.</p>\n\n<p>What I'm doing right now is to extend the TimlineJS javascript file with an extension that will set the current slide from (or nearest) from today's date.</p>\n\n<pre><code>/// &lt;summary&gt;\n/// Helpers for the Timeline classes to return Json objects\n/// &lt;/summary&gt;\npublic class date\n{\n    public string startDate { get; set; }\n    public string endDate { get; set; }\n    public string headline { get; set; }\n    public string text { get; set; }\n}\n\n\npublic class timeline\n{\n    public string headline { get; set; }\n    public string text { get; set; }\n    public string type { get; set; }\n    public string lang { get; set; }\n    public List&lt;date&gt; date { get; set; }\n    public string font { get; set; }\n}\n\n\npublic class Wrapper\n{\n    public timeline timeline { get; set; }\n}\n\npublic static class Ext\n{\n    public static string Quote(this string text)\n    {\n        return string.Format(\"\\\"{0}\\\"\", text);\n    }\n\n    public static string Embed(this string text)\n    {\n        if ((!text.Contains(\"&lt;p&gt;\")) &amp;&amp; (!text.Contains(\"&lt;/p&gt;\")))\n            return string.Format(\"&lt;p&gt;{0}&lt;/p&gt;\", text);\n        return text;\n    }\n}   \n\n public JsonResult GetTimelineJs(Int32 ? pageid)\n    {\n        //Create your own list from your datasource below.\n        var tm = ActiveRecordMediator&lt;Timeline&gt;.FindFirst(Restrictions.Eq(\"PageId\", pageid));\n\n        var events = new List&lt;date&gt;();\n        var datelist = tm.GetItems();\n\n        foreach (var item in datelist) {\n            if (!item.Active) continue;\n\n            events.Add( new date {  \n                headline = item.Title, \n                text = item.Html.Embed(),   \n                startDate = new DateTime(item.EventDate.Year, item.EventDate.Month, item.EventDate.Day, item.EventDate.Hour, item.EventDate.Minute, item.EventDate.Second).ToShortDateString().Replace(\"-\", \",\"), \n                endDate = new DateTime(item.EndEventDate.Year, item.EndEventDate.Month, item.EndEventDate.Day, item.EndEventDate.Hour, item.EndEventDate.Minute, item.EventDate.Second).ToShortDateString().Replace(\"-\", \",\") }\n            );\n        }\n        //The wrapper class just surrounds the timline object.\n        var wrapper = new Wrapper\n        {\n            timeline = new timeline()\n            {\n                headline = tm.Title,\n                text = tm.Html.Embed(),\n                type = \"default\",\n                lang = \"sv\",\n                font = \"Arvo &amp; PT Sans\",\n                date = events\n            }\n        };\n\n         string json2 = JsonConvert.SerializeObject(wrapper, Formatting.Indented);\n         var dez = JsonConvert.DeserializeObject&lt;Wrapper&gt;(json2);\n\n         return Json(dez, JsonRequestBehavior.AllowGet);\n    }\n\n//This produces a timline data (Json).\n\n{\"timeline\":\n{\n\"headline\":\"Headline text\",\n\"text\":\"\\u003cp\\u003eThis is some markup text\\u003c/p\\u003e\",\n\"type\":\"default\",\n\"lang\":\"sv\",\n\"date\":[\n    {\"startDate\":\"2012,08,10\",\"endDate\":\"2012,08,15\",\"headline\":\"Love at First Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text one\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,09,09\",\"endDate\":\"2012,09,09\",\"headline\":\"Love at Second Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,10,10\",\"endDate\":\"2012,10,10\",\"headline\":\"Love at third Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,11,10\",\"endDate\":\"2012,11,12\",\"headline\":\"Love at fourth Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"},\n    {\"startDate\":\"2012,12,10\",\"endDate\":\"2012,12,15\",\"headline\":\"Love at Fifth Feel\",\"text\":\"\\u003cp\\u003eThis is some markup text two\\u003c/p\\u003e\"}],\n\"font\":\"Arvo \\u0026 PT Sans\"}\n}\n</code></pre>\n\n<p>IMPORTANT!! \nI noticed that is Timeline.js there's this line(about line 7000):</p>\n\n<pre><code>VMM.getJSON(raw_data + \"?callback=onJSONP_Data\", VMM.Timeline.DataObj.parseJSON);\n</code></pre>\n\n<p>If you send any other data to your controller it will break and not function.\nTo allow other parameters, just change to the line below:</p>\n\n<pre><code>VMM.getJSON(raw_data + \"&amp;callback=onJSONP_Data\", VMM.Timeline.DataObj.parseJSON);\n</code></pre>\n\n<p><strong>I'm not sure that this always will return the closest date. Can anyone verify this?</strong></p>\n\n<pre><code>    public Int32 GetClosestDate(Int32 pageid)\n    {\n        var tm = ActiveRecordMediator&lt;Timeline&gt;.FindFirst(Restrictions.Eq(\"PageId\", pageid));\n        List&lt;CDate&gt; datelist = new List&lt;CDate&gt;();\n        DateTime today = DateTime.Now;\n\n        int slide = 1;\n        foreach (var item in tm.GetItems().OrderBy(d =&gt; d.Id))\n        {\n            datelist.Add(new CDate { Date = DateTime.ParseExact(item.EventDate.ToShortDateString(), \"yyyy-mm-dd\", null), Slide = slide, Diff = DateDiff(today, item.EventDate) });\n            slide++;\n        }\n\n        var closest = datelist.OrderBy(d =&gt; d.Diff).First();\n        return closest.Slide;\n    }\n\n private int DateDiff(DateTime Date1, DateTime Date2)\n    {\n        TimeSpan time = Date1 - Date2;\n        return Math.Abs(time.Days);\n    }\n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13260597,"title":"jquery grid and javascript best practice","body":"<p>Im new to jquery and need some help.</p>\n\n<p>I have written a table that act like a grid with help from jquery.</p>\n\n<p>When a user click on Name column the user will be redirected to the details page.</p>\n\n<p>Now I want to know if I can do this in a better way?</p>\n\n<p>And should the JS code be in the page or in a separated JS file?</p>\n\n<p>Here is the code.</p>\n\n<pre><code>    &lt;table id=\"grid\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th data-field=\"name\"&gt;Namn&lt;/th&gt;\n            &lt;th data-field=\"location\"&gt;Ort&lt;/th&gt;\n            &lt;th data-field=\"phone\"&gt;Telefon&lt;/th&gt;\n            &lt;th data-field=\"buildinmonth\"&gt;Bygga inom&lt;/th&gt;\n            &lt;th data-field=\"houselot\"&gt;Har tomt&lt;/th&gt;\n            &lt;th data-field=\"created\"&gt;Skapad&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        @foreach (var item in Model)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;&lt;span id=\"open\" data-id=\"@item.Id\"&gt;@item.Name&lt;/span&gt;&lt;/td&gt;\n                &lt;td&gt;@item.Location&lt;/td&gt;\n                &lt;td&gt;@item.Phone&lt;/td&gt;\n                &lt;td&gt;@item.BuildInMonth&lt;/td&gt;\n                &lt;td&gt;@item.HouseLot&lt;/td&gt;\n                &lt;td&gt;@String.Format(\"{0:d}\", item.CreatedDate)&lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;script&gt;\n        $(\"#grid\").kendoGrid({\n            scrollable: false,\n            sortable: true\n        });\n\n    $(\"#grid #open\").click(function () {\n        window.location.replace(\"/lead/details/\" + $(this).data(\"id\"));\n    });\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc","razor","partial-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13263358,"title":"MVC: Can Partial View has effect of iframe?","body":"<p>I am wondering in MVC(ie 3) + Razor, could we make partial view have the same effect as iframe? For example right side scroll bar, fixed height, etc.</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["c#","asp.net-mvc","spark"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13262585,"title":"How to override view folder for one controller with Spark","body":"<p>I have two controllers which I want to use the same view folder.</p>\n\n<p>My two controllers are DocumentTypeAController and DocumentTypeBController which both inherit from a general document controller.</p>\n\n<p>My views are currently inside the ~\\views\\DocumentTypeA and I want the DocumentTypeB to reference the same views.</p>\n\n<p>How can I do this with the Spark view engine? (I'm using it with MVC2 [might be an oldish version])</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","autocomplete","intellisense"],"answer_count":3,"favorite_count":11,"up_vote_count":22,"down_vote_count":0,"view_count":10031,"score":22,"question_id":4158573,"title":"Need razor view engine auto-complete to work in a class library?","body":"<p>We have a modular architecture where we have some views (cshtml) files in a separate project (class library).  How can we get the <del>syntax highlighting and</del> autocomplete to work when the project isn't an MVC project?</p>\n\n<p>Please note that the class library has controllers, views, models etc.  It just doesn't have the web.config, global.asax, etc that a normal mvc project would have.</p>\n\n<p>The intellisense works for everything but the so important model:\n<img src=\"http://dl.dropbox.com/u/6142956/forums/RazorModelIntellisense.png\" alt=\"screenshot of model error\"></p>\n\n<p>With MVC3 RTM, if you hover over the Model, you can now get a better error message:</p>\n\n<blockquote>\n  <p>C:\\...\\Index.cshtml: ASP.NET runtime\n  error: There is no build provider\n  registered for the extension\n  '.cshtml'. You can register one in the\n  &lt;compilation>&lt;buildProviders>\n  section in the machine.config or\n  web.config.  Make sure is has a\n  BuildProviderAppliesToAttribute\n  attribute which includes the value\n  'Web' or 'All'.</p>\n</blockquote>\n\n<p>So I added this:</p>\n\n<pre><code>&lt;compilation&gt;\n    &lt;assemblies&gt;\n      &lt;add assembly=\"System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;/assemblies&gt;\n    &lt;buildProviders&gt;\n      &lt;add\n         extension=\".cshtml\"\n         type=\"System.Web.WebPages.Razor.RazorBuildProvider, System.Web.WebPages.Razor\"/&gt;\n    &lt;/buildProviders&gt;\n  &lt;/compilation&gt;\n</code></pre>\n\n<p>Then after adding the build provider, this error message appears:</p>\n\n<blockquote>\n  <p>C:\\...\\Index.cshtml: ASP.NET runtime\n  error: Could not load file or assembly\n  'System.Web.WebPages.Razor' or one of\n  its dependencies. The system cannot\n  find the file specified.\n  (C:\\...\\machine.config line 259)</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13247207,"title":"How to access selected item from dropdown in asp.net mvc3","body":"<p>i am using asp.net mvc3 and i populate a create view using following model </p>\n\n<p><strong>Model</strong> </p>\n\n<pre><code>public class CategoryModel\n{\n    public  int Id { get; set; }\n    public string Name { get; set; }\n    public  string URL { get; set; }\n    public  string Description { get; set; }\n    public  string Logo { get; set; }\n    public  bool IsActive { get; set; }\n    public  bool isPopular { get; set; }\n    public IList&lt;Category&gt; Parentcategories { get; set; }\n\n}\n</code></pre>\n\n<p>In my create View i populate like this </p>\n\n<p><strong>View</strong></p>\n\n<pre><code> &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownList(\"parentcategories\", new SelectList(Model.Parentcategories.Select(c =&gt; c.Name), Model.Parentcategories.Select(c =&gt; c.Name)))\n        @Html.ValidationMessageFor(model =&gt; model.Parentcategories)\n    &lt;/div&gt;\n</code></pre>\n\n<p>now how can i access the selected item in my controller method </p>\n\n<p><strong>Method</strong></p>\n\n<pre><code> [HttpPost]\n    public ActionResult Create( CategoryModel model , HttpPostedFileBase file)\n    {\n     // \n    }\n</code></pre>\n\n<p>thanks,\nAhsan </p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13201250,"title":"How to get custom annotation attributes for a controller action in ASP.NET MVC 4?","body":"<p>I am working with a permission based authorization system for my app in ASP.NET MVC. \nFor this I have created a custom authorization attribute</p>\n\n<pre><code>public class MyAuthorizationAttribute : AuthorizeAttribute\n{\n    string Roles {get; set;}\n    string Permission {get; set;}\n}\n</code></pre>\n\n<p>so that I can authorize a user by both role or a specific permission key with annotation for actions like</p>\n\n<pre><code>public class UserController : Controller\n{\n    [MyAuthorization(Roles=\"ADMIN\", Permissions=\"USER_ADD\")]\n    public ActionResult Add()\n\n    [MyAuthorization(Roles=\"ADMIN\", Permissions=\"USER_EDIT\")]\n    public ActionResult Edit()\n\n    [MyAuthorization(Roles=\"ADMIN\", Permissions=\"USER_DELETE\")]\n    public ActionResult Delete()\n}\n</code></pre>\n\n<p>then I override AuthorizeCore() method in MyAuthorizationAttribute class with similar logic(pseudo code)</p>\n\n<pre><code>protected override bool AuthorizeCore(HttpContextBase httpContext)\n{\n    if(user not authenticated)\n        return false;\n\n    if(user has any role of Roles)\n        return true;\n\n    if(user has any permission of Permissions)\n        return true;\n\n    return false;\n}\n</code></pre>\n\n<p>Up to this is working fine. </p>\n\n<p>Now I need some sort of extension methods so that I can dynamically generate action url in view pages that will return action url based on MyAuthorization attribute authorization logic for the given action. Like</p>\n\n<pre><code>@Url.MyAuthorizedAction(\"Add\", \"User\")\n</code></pre>\n\n<p>will return url to \"User/Add\" if user has admin role or has permission of \"USER_ADD\" (as defined in attributes for the action) or return empty string otherwise.</p>\n\n<p>But after searching in internet for few days I could not figure it out. :(</p>\n\n<p>So far I have found only this <a href=\"http://stackoverflow.com/questions/2721869/security-aware-action-link/2722026\">&quot;Security aware&quot; action link?</a> which works by executing all action filters for the action until it fails.</p>\n\n<p>It's nice, but I think it would be an overhead to execute all the action filters for each time I call the MyAuthorizedAction() method. Besides It also didn't work with my version (MVC 4 and .NET 4.5)</p>\n\n<p>What all I need is to check authenticated user's role, permissions (will be stored in session) against authorized role and permission for the given action. Like something as following (pseudo code)</p>\n\n<pre><code>MyAuthorizedAction(string actionName, string controllerName)\n{\n    ActionObject action = SomeUnknownClass.getAction(actionName, controllerName)\n    MyAuthorizationAttribute attr = action.returnsAnnationAttributes()\n\n    if(user roles contains any in attr.Roles \n       or \n       user permissions contains any attr.Permissions)\n    {\n        return url to action\n    }\n    return empty string\n}\n</code></pre>\n\n<p>I am searching the solution of getting action attributes value for quite a long time, could not find enough good resources at all. Am I missing out right keywords? :/</p>\n\n<p>If anyone can provide me the solution that would be truly a great help.\nThanks in advance for the solutions</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":33,"score":-5,"question_id":13259741,"title":"Fileupload control display","body":"<p>how do we need to code a fileupload control so that it appears same in all browsers. Each browser shows the fileupload button in different ways. How do we need to code the CSS so that it displays the same in all browsers.</p>\n"},{"tags":["asp.net","mysql","asp.net-mvc","entity-framework"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1666,"score":2,"question_id":1440496,"title":"Problems publishing website","body":"<p>Recently I've began experimenting with ASP.NET MVC and the Entity Framework. Since my hostingprovider only provides me with MySQL I've been trying to set that up.\nLocally everything works fine, but after I publish it I get the following error:</p>\n\n<pre><code>[ProviderIncompatibleException: The store provider factory type 'MySql.Data.MySqlClient.MySqlClientFactory' does not implement the IServiceProvider interface. Use a store provider that implements this interface.]\n</code></pre>\n\n<p>Since I'm rather inexperienced with the configuring this and google is lacking a good answer I thought I'd try here.\nMy best guess is something missing in the web.config file, but can't really make out what it is. </p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","webclient"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13259348,"title":"Show downloadable link to csv","body":"<p>I am trying to show a stream of data in a downloadable .csv file with the following code:</p>\n\n<pre><code>WebClient wc = new WebClient();\n                    byte[] csvBytes = wc.DownloadData(url);\n                    return File(csvBytes, \"text/csv\", \"Test.csv\");\n</code></pre>\n\n<p>The URL returns data in this format:</p>\n\n<p>\n    \"PAUL\",\"SMITH\",\"A &amp; P CONSTRUCTION\",\"211 N JACKSON ST\",\"New York\",\"NY\",\"98055\"\n    \"JEROME\",\"HALSEY\",\"A A A LOCATING INC\",\"1906 SOUTHVIEW DR\",\"PAPILLION\",\"NE\",\"68046\"\n    \"MIKE\",\"GIBILISCO\",\"ABSOLUTE SECURITY INC\",\"944 S JEFFERSON ST\",\"PAPILLION\",\"NE\",\"84102\"\n</p>\n\n<p>The above works well, and I get a downloadable link ... but when I open the .csv file - I get the records in just one row:</p>\n\n<pre><code>\\\"PAUL\\\"    \\\"SMITH\\\"   \\\"A &amp; P CONSTRUCTION\\\"  \\\"211 N JACKSON ST\\\"    \\\"PAPILLION\\\"   \\\"NE\\\"  \\\"68046\\\"...\n</code></pre>\n\n<p>How should I modify the above code so that I get the values in the right format (without the \"\\\" and under the right columns)?</p>\n"},{"tags":["asp.net","jquery","asp.net-mvc","datepicker"],"answer_count":8,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":15058,"score":7,"question_id":901137,"title":"ASP.NET MVC - jquery datepicker","body":"<p>Ok, so I'm new to ASP.NET MVC and JQuery.</p>\n\n<p>I have followed the following example <em>to the letter</em>, and I'm not able to get the datepicker working:</p>\n\n<p><a href=\"http://codesprouts.com/post/Creating-A-DatePicker-Extension-In-ASPNet-MVC.aspx\" rel=\"nofollow\">http://codesprouts.com/post/Creating-A-DatePicker-Extension-In-ASPNet-MVC.aspx</a></p>\n\n<p>Can anyone tell me if there are any ticks or gotchas with this?</p>\n\n<p>Bernard.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13260084,"title":"Route URLs from a web client back to the web client","body":"<p>I have an ASP.NET Controller, that has a function, that simply returns a ContentResult of a WebClient.</p>\n\n<p>In this case, CNN is my testbed, my WebClient, downloads CNN as a string, into it's content, and returns the result as an ActionResult/ContentResult on a controller.</p>\n\n<p>I'm calling a RenderPartial on this action, to get CNN to display \"below\" and to the right of my current content, in its own box.</p>\n\n<p>The problem I'm running into, is when you click a link on CNN, it redirects to a \"relative\" url sometimes, and that relative url, doesn't exist in my localhost, and won't exist on my web server, thus the link fails.</p>\n\n<p>When it does redirect to an absolute url, that's also a problem, as the resulting page \"replaces\" my .NET shell.</p>\n\n<p>What I need it to do, is take any URLs that are inside that ContentResult I returned, and if any of those URLs are clicked, pass them back to my .NET application, to be downloaded by the WebClient, and rendered back in that shell.</p>\n\n<p>I'm aware I could use an IFRAME to do this instead of WebClient, but an IFRAME is impossible in my case, as its restricted by the public API we're consuming, its restricted/has flaws in the framework that API is servicing, and its blocked on some of our client machines, which we have no control over.</p>\n\n<p>Also, the client machines will be off our network, so I can't use an AJAX load, as that'd be XSS.</p>\n\n<p>One idea that I can think of, is basically to create custom routes, with filters/rules, that look for \"CNN\" like links, and pass them to my controller, as a parameter; then have my controller render my page, and pass those links to the web client.</p>\n\n<p>This would obviously be a lot of work, and not even really sure where to start with it in the routing engine.</p>\n\n<p>The only other thing I can think of that might work, is checking the validity of the URL, by attempting to see if it points to a valid link. If it doesn't point to a valid link, adding CNN's url prefix to it, and seeing if that is then a valid link. But that seems like a lot of work, for a solution that would be a heavy hit on performance, as checking each link on a page like CNN, could be very costly. Also, since I'd be running each link twice, that'd be a problem where POST operations were required, as it'd essentially run each operation twice, and being that this is a public API I'm consuming off a public framework, I wouldn't have control of the source code to safeguard against that.</p>\n\n<p>Any other suggestions?\nIs there any way to accomplish what I'm trying to do easily?</p>\n"},{"tags":["sql-server","asp.net-mvc","linq","entity-framework","sql-server-2008-r2"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":175,"score":1,"question_id":12928463,"title":"Sometimes get Timeout expired exception with Linq to EF and after a restart of server, it works fine","body":"<p>I have hosted my website at rackspace cloud server.</p>\n\n<p>Sometimes I get the below exception while fetching records from database. The strange thing is that everything works fine for a few days after a restart and also I get this exception in only a few places and not everywhere.</p>\n\n<pre><code>Exception: Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\nException Details: System.Data.SqlClient.SqlException: Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.\n\nStack Trace:\n\n\n[SqlException (0x80131904): Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]\n   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +404\n   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412\n   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1363\n   System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +59\n   System.Data.SqlClient.SqlDataReader.get_MetaData() +118\n   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +6387937\n   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +6389506\n   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +538\n   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +28\n   System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +256\n   System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +19\n   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +553\n\n[EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details.]\n   DataAccessLayer.dbCustomer.CompanyCustomerByLocationId(String sortExpression, Boolean asc, String nameSearchString, Int32 startRowIndex, Int32 maximumRows, Int32&amp; TotalRecord, Int64 companyId) in D:\\Dotnet Projects\\FutureZoom\\FutureZoom\\DataAccessLayer\\dbCustomer.cs:508\n   BusinessLogic.Customer.CompanyCustomerByLocationId(String sortExpression, Boolean asc, String nameSearchString, Int32 startRowIndex, Int32 maximumRows, Int64 CompanyId) in D:\\Dotnet Projects\\FutureZoom\\FutureZoom\\BusinessLogic\\Customer.cs:431\n   FutureZoom.Areas.Admin.Controllers.CompanyController.CustomerPaging(Int32 StartIndex, Int32 PageSize, String SortExp, Boolean Asc, String SearchExp, String Where) in D:\\Dotnet Projects\\FutureZoom\\FutureZoom\\FutureZoom\\Areas\\Admin\\Controllers\\CompanyController.cs:552\n   lambda_method(Closure , ControllerBase , Object[] ) +362\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +248\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39\n   System.Web.Mvc.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12() +125\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +640\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +312\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +691\n   System.Web.Mvc.Controller.ExecuteCore() +162\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +305\n   System.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +62\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +20\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +375\n</code></pre>\n\n<p>My Linq query is mentioned below</p>\n\n<pre><code>query = context.Customers.Include(\"Company\").Include(\"Company.EmailCampaignerStatus\")\n                                           .OrderBy(m =&gt; m.EmailCampaignerStatus.FirstOrDefault().CreatedOn)                                           \n                                           .Where(m =&gt; m.FirstName.StartsWith(name) || m.LastName.StartsWith(name) || m.Email.StartsWith(name) || (m.FirstName + \" \" + m.LastName).StartsWith(name))\n                                           .Where(m =&gt; m.CompanyId == companyId)\n                                           .Where(m =&gt; m.CompanyLocationId == locationId)\n                                           .Skip(startRowIndex == 0 ? startRowIndex : startRowIndex - 1)\n                                           .Take(maximumRows)\n                                           .ToList();\n</code></pre>\n\n<p>Execution time for this query is not even 1 second on my local machine and also the same at server side after a restart but the execution time increases day by day and it fails to execute after few days (sometime fails and sometimes gives result).</p>\n\n<p>I observed that it took 31.05sec and fails and it take 51.09 sec and fails. Sometimes it takes more than 2 mins and gives result.</p>\n\n<p>I talked with rackspace people but they were unable to trace the actual cause for the same.</p>\n\n<p>Edit 1: I have seen below queries in SQL Profiler against my paging query</p>\n\n<pre><code>SELECT \n[Project3].[Id1] AS [Id], \n[Project3].[C1] AS [C1], \n[Project3].[Id] AS [Id1], \n[Project3].[CompanyId] AS [CompanyId], \n[Project3].[CompanyLocationId] AS [CompanyLocationId], \n[Project3].[FirstName] AS [FirstName], \n[Project3].[LastName] AS [LastName], \n[Project3].[Email] AS [Email], \n[Project3].[Address1] AS [Address1], \n[Project3].[Address2] AS [Address2], \n[Project3].[City] AS [City], \n[Project3].[State] AS [State], \n[Project3].[Country] AS [Country], \n[Project3].[Zip] AS [Zip], \n[Project3].[Phone] AS [Phone], \n[Project3].[SaleDate] AS [SaleDate], \n[Project3].[Notes] AS [Notes], \n[Project3].[Cost] AS [Cost], \n[Project3].[CreatedOn] AS [CreatedOn], \n[Project3].[ModifiedOn] AS [ModifiedOn], \n[Project3].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], \n[Project3].[Id2] AS [Id2], \n[Project3].[SubscriptionTypeId] AS [SubscriptionTypeId], \n[Project3].[PlanFeeAmount] AS [PlanFeeAmount], \n[Project3].[LoginId] AS [LoginId], \n[Project3].[IndustryTypeId] AS [IndustryTypeId], \n[Project3].[CompanyName] AS [CompanyName], \n[Project3].[NumberOfLocations] AS [NumberOfLocations], \n[Project3].[LogoImageName] AS [LogoImageName], \n[Project3].[WebsiteUrl] AS [WebsiteUrl], \n[Project3].[blsActive] AS [blsActive], \n[Project3].[Pending] AS [Pending], \n[Project3].[ExpiryDate] AS [ExpiryDate], \n[Project3].[C2] AS [C2], \n[Project3].[Id3] AS [Id3], \n[Project3].[UploadTicketId] AS [UploadTicketId], \n[Project3].[UploadStatus] AS [UploadStatus], \n[Project3].[CompanyId1] AS [CompanyId1], \n[Project3].[CompanyLocationId1] AS [CompanyLocationId1], \n[Project3].[CustomerId] AS [CustomerId], \n[Project3].[CreatedOn2] AS [CreatedOn1]\nFROM ( SELECT \n    [Limit2].[Id] AS [Id], \n    [Limit2].[CompanyId] AS [CompanyId], \n    [Limit2].[CompanyLocationId] AS [CompanyLocationId], \n    [Limit2].[FirstName] AS [FirstName], \n    [Limit2].[LastName] AS [LastName], \n    [Limit2].[Email] AS [Email], \n    [Limit2].[Address1] AS [Address1], \n    [Limit2].[Address2] AS [Address2], \n    [Limit2].[City] AS [City], \n    [Limit2].[State] AS [State], \n    [Limit2].[Country] AS [Country], \n    [Limit2].[Zip] AS [Zip], \n    [Limit2].[Phone] AS [Phone], \n    [Limit2].[SaleDate] AS [SaleDate], \n    [Limit2].[Notes] AS [Notes], \n    [Limit2].[Cost] AS [Cost], \n    [Limit2].[CreatedOn] AS [CreatedOn], \n    [Limit2].[ModifiedOn] AS [ModifiedOn], \n    [Limit2].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], \n    [Limit2].[Id1] AS [Id1], \n    [Limit2].[CreatedOn1] AS [CreatedOn1], \n    [Limit2].[Id2] AS [Id2], \n    [Limit2].[SubscriptionTypeId] AS [SubscriptionTypeId], \n    [Limit2].[PlanFeeAmount] AS [PlanFeeAmount], \n    [Limit2].[LoginId] AS [LoginId], \n    [Limit2].[IndustryTypeId] AS [IndustryTypeId], \n    [Limit2].[CompanyName] AS [CompanyName], \n    [Limit2].[NumberOfLocations] AS [NumberOfLocations], \n    [Limit2].[WebsiteUrl] AS [WebsiteUrl], \n    [Limit2].[blsActive] AS [blsActive], \n    [Limit2].[Pending] AS [Pending], \n    [Limit2].[ExpiryDate] AS [ExpiryDate], \n    [Limit2].[LogoImageName] AS [LogoImageName], \n    [Limit2].[C1] AS [C1], \n    [Extent4].[Id] AS [Id3], \n    [Extent4].[UploadTicketId] AS [UploadTicketId], \n    [Extent4].[UploadStatus] AS [UploadStatus], \n    [Extent4].[CompanyId] AS [CompanyId1], \n    [Extent4].[CompanyLocationId] AS [CompanyLocationId1], \n    [Extent4].[CustomerId] AS [CustomerId], \n    [Extent4].[CreatedOn] AS [CreatedOn2], \n    CASE WHEN ([Extent4].[Id] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C2]\n    FROM   (SELECT TOP (20) [Project2].[Id] AS [Id], [Project2].[CompanyId] AS [CompanyId], [Project2].[CompanyLocationId] AS [CompanyLocationId], [Project2].[FirstName] AS [FirstName], [Project2].[LastName] AS [LastName], [Project2].[Email] AS [Email], [Project2].[Address1] AS [Address1], [Project2].[Address2] AS [Address2], [Project2].[City] AS [City], [Project2].[State] AS [State], [Project2].[Country] AS [Country], [Project2].[Zip] AS [Zip], [Project2].[Phone] AS [Phone], [Project2].[SaleDate] AS [SaleDate], [Project2].[Notes] AS [Notes], [Project2].[Cost] AS [Cost], [Project2].[CreatedOn] AS [CreatedOn], [Project2].[ModifiedOn] AS [ModifiedOn], [Project2].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], [Project2].[Id1] AS [Id1], [Project2].[CreatedOn1] AS [CreatedOn1], [Project2].[Id2] AS [Id2], [Project2].[SubscriptionTypeId] AS [SubscriptionTypeId], [Project2].[PlanFeeAmount] AS [PlanFeeAmount], [Project2].[LoginId] AS [LoginId], [Project2].[IndustryTypeId] AS [IndustryTypeId], [Project2].[CompanyName] AS [CompanyName], [Project2].[NumberOfLocations] AS [NumberOfLocations], [Project2].[WebsiteUrl] AS [WebsiteUrl], [Project2].[blsActive] AS [blsActive], [Project2].[Pending] AS [Pending], [Project2].[ExpiryDate] AS [ExpiryDate], [Project2].[LogoImageName] AS [LogoImageName], [Project2].[C1] AS [C1]\n        FROM ( SELECT [Project2].[Id] AS [Id], [Project2].[CompanyId] AS [CompanyId], [Project2].[CompanyLocationId] AS [CompanyLocationId], [Project2].[FirstName] AS [FirstName], [Project2].[LastName] AS [LastName], [Project2].[Email] AS [Email], [Project2].[Address1] AS [Address1], [Project2].[Address2] AS [Address2], [Project2].[City] AS [City], [Project2].[State] AS [State], [Project2].[Country] AS [Country], [Project2].[Zip] AS [Zip], [Project2].[Phone] AS [Phone], [Project2].[SaleDate] AS [SaleDate], [Project2].[Notes] AS [Notes], [Project2].[Cost] AS [Cost], [Project2].[CreatedOn] AS [CreatedOn], [Project2].[ModifiedOn] AS [ModifiedOn], [Project2].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], [Project2].[Id1] AS [Id1], [Project2].[CreatedOn1] AS [CreatedOn1], [Project2].[Id2] AS [Id2], [Project2].[SubscriptionTypeId] AS [SubscriptionTypeId], [Project2].[PlanFeeAmount] AS [PlanFeeAmount], [Project2].[LoginId] AS [LoginId], [Project2].[IndustryTypeId] AS [IndustryTypeId], [Project2].[CompanyName] AS [CompanyName], [Project2].[NumberOfLocations] AS [NumberOfLocations], [Project2].[WebsiteUrl] AS [WebsiteUrl], [Project2].[blsActive] AS [blsActive], [Project2].[Pending] AS [Pending], [Project2].[ExpiryDate] AS [ExpiryDate], [Project2].[LogoImageName] AS [LogoImageName], [Project2].[C1] AS [C1], row_number() OVER (ORDER BY [Project2].[CreatedOn1] ASC) AS [row_number]\n            FROM ( SELECT \n                [Filter1].[Id] AS [Id], \n                [Filter1].[CompanyId] AS [CompanyId], \n                [Filter1].[CompanyLocationId] AS [CompanyLocationId], \n                [Filter1].[FirstName] AS [FirstName], \n                [Filter1].[LastName] AS [LastName], \n                [Filter1].[Email] AS [Email], \n                [Filter1].[Address1] AS [Address1], \n                [Filter1].[Address2] AS [Address2], \n                [Filter1].[City] AS [City], \n                [Filter1].[State] AS [State], \n                [Filter1].[Country] AS [Country], \n                [Filter1].[Zip] AS [Zip], \n                [Filter1].[Phone] AS [Phone], \n                [Filter1].[SaleDate] AS [SaleDate], \n                [Filter1].[Notes] AS [Notes], \n                [Filter1].[Cost] AS [Cost], \n                [Filter1].[CreatedOn] AS [CreatedOn], \n                [Filter1].[ModifiedOn] AS [ModifiedOn], \n                [Filter1].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId], \n                [Limit1].[Id] AS [Id1], \n                [Limit1].[CreatedOn] AS [CreatedOn1], \n                [Extent3].[Id] AS [Id2], \n                [Extent3].[SubscriptionTypeId] AS [SubscriptionTypeId], \n                [Extent3].[PlanFeeAmount] AS [PlanFeeAmount], \n                [Extent3].[LoginId] AS [LoginId], \n                [Extent3].[IndustryTypeId] AS [IndustryTypeId], \n                [Extent3].[CompanyName] AS [CompanyName], \n                [Extent3].[NumberOfLocations] AS [NumberOfLocations], \n                [Extent3].[WebsiteUrl] AS [WebsiteUrl], \n                [Extent3].[blsActive] AS [blsActive], \n                [Extent3].[Pending] AS [Pending], \n                [Extent3].[ExpiryDate] AS [ExpiryDate], \n                [Extent3].[LogoImageName] AS [LogoImageName], \n                1 AS [C1]\n                FROM    (SELECT [Extent1].[Id] AS [Id], [Extent1].[CompanyId] AS [CompanyId], [Extent1].[CompanyLocationId] AS [CompanyLocationId], [Extent1].[FirstName] AS [FirstName], [Extent1].[LastName] AS [LastName], [Extent1].[Email] AS [Email], [Extent1].[Address1] AS [Address1], [Extent1].[Address2] AS [Address2], [Extent1].[City] AS [City], [Extent1].[State] AS [State], [Extent1].[Country] AS [Country], [Extent1].[Zip] AS [Zip], [Extent1].[Phone] AS [Phone], [Extent1].[SaleDate] AS [SaleDate], [Extent1].[Notes] AS [Notes], [Extent1].[Cost] AS [Cost], [Extent1].[CreatedOn] AS [CreatedOn], [Extent1].[ModifiedOn] AS [ModifiedOn], [Extent1].[PrimaryReviewSiteId] AS [PrimaryReviewSiteId]\n                    FROM [dbo].[Customer] AS [Extent1]\n                    WHERE (([Extent1].[FirstName] LIKE @p__linq__0 ESCAPE N'~') OR ([Extent1].[LastName] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Email] LIKE @p__linq__2 ESCAPE N'~') OR ([Extent1].[FirstName] + N' ' + [Extent1].[LastName] LIKE @p__linq__3 ESCAPE N'~')) AND ([Extent1].[CompanyId] = @p__linq__4) AND ([Extent1].[CompanyLocationId] = @p__linq__5) ) AS [Filter1]\n                OUTER APPLY  (SELECT TOP (1) \n                    [Extent2].[Id] AS [Id], \n                    [Extent2].[CreatedOn] AS [CreatedOn]\n                    FROM [dbo].[EmailCampaignerStatus] AS [Extent2]\n                    WHERE [Filter1].[Id] = [Extent2].[CustomerId] ) AS [Limit1]\n                LEFT OUTER JOIN [dbo].[Company] AS [Extent3] ON [Filter1].[CompanyId] = [Extent3].[Id]\n            )  AS [Project2]\n        )  AS [Project2]\n        WHERE [Project2].[row_number] &gt; 0\n        ORDER BY [Project2].[CreatedOn1] ASC ) AS [Limit2]\n    LEFT OUTER JOIN [dbo].[EmailCampaignerStatus] AS [Extent4] ON [Limit2].[CompanyId] = [Extent4].[CompanyId]\n)  AS [Project3]\nORDER BY [Project3].[CreatedOn1] ASC, [Project3].[Id1] ASC, [Project3].[Id] ASC, [Project3].[Id2] ASC, [Project3].[C2] ASC\n\nSELECT \n[GroupBy1].[A1] AS [C1]\nFROM ( SELECT \n    COUNT(1) AS [A1]\n    FROM [dbo].[Customer] AS [Extent1]\n    WHERE (([Extent1].[FirstName] LIKE @p__linq__0 ESCAPE N'~') OR ([Extent1].[LastName] LIKE @p__linq__1 ESCAPE N'~') OR ([Extent1].[Email] LIKE @p__linq__2 ESCAPE N'~') OR ([Extent1].[FirstName] + N' ' + [Extent1].[LastName] LIKE @p__linq__3 ESCAPE N'~')) AND ([Extent1].[CompanyId] = @p__linq__4) AND ([Extent1].[CompanyLocationId] = @p__linq__5)\n)  AS [GroupBy1]\n\n\nSELECT \nCASE WHEN ( EXISTS (SELECT \n    1 AS [C1]\n    FROM [dbo].[CompanyReviewSites] AS [Extent1]\n    WHERE [Extent1].[CompanyLocationId] = @p__linq__0\n)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT \n    1 AS [C1]\n    FROM [dbo].[CompanyReviewSites] AS [Extent2]\n    WHERE [Extent2].[CompanyLocationId] = @p__linq__0\n)) THEN cast(0 as bit) END AS [C1]\nFROM  ( SELECT 1 AS X ) AS [SingleRowTable1]\n\nSELECT \n1 AS [C1], \n[Extent1].[Id] AS [Id], \n[Extent1].[RiviewSiteId] AS [RiviewSiteId], \n[Extent1].[URL] AS [URL], \n[Extent1].[CompanyId] AS [CompanyId], \n[Extent1].[CompanyLocationId] AS [CompanyLocationId], \n[Extent2].[Id] AS [Id1], \n[Extent2].[ReviewSiteName] AS [ReviewSiteName], \n[Extent2].[ImageName] AS [ImageName]\nFROM  [dbo].[CompanyReviewSites] AS [Extent1]\nINNER JOIN [dbo].[ReviewSites] AS [Extent2] ON [Extent1].[RiviewSiteId] = [Extent2].[Id]\nWHERE [Extent1].[CompanyLocationId] = @p__linq__0\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","url","mobile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":8355042,"title":"jQuery Mobile and MVC URL debarkles?","body":"<p>Anyone who has started mixing the two must have come up with some interesting results, I certainly have and the current one is.</p>\n\n<p>I have a Drop Down List that auto submits to a new page and sends over the id value to the controller for processing. It works fine the first time but if I hit a back button (hardware,  jQuery, back or ActionLink ) and try again, unless I hit refresh it tries to tack an extra /id value on the end of the URL string. The more times I try the more it tacks, until I hit refresh and then it works. E.g..</p>\n\n<p>www.mysite.com  clicks through to www.mysite.com/Home/resultpage/2 it works but when I click back to www.mysite.com and select again, I get an error 404 because its looking for www.mysite.com/Home.resultpage/2/4 then if I select again I get  www.mysite.com/Home.resultpage/2/4/5 and so on until I refresh and it works again, once.</p>\n\n<p>Can I do anything about that, even if its a hack!</p>\n\n<p>Cheers,</p>\n\n<p>Mike.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13258504,"title":"jQuery unobtrusive form validator is not hiding error messages when resetting the form","body":"<p>I am attempting to properly validate and reset a form. The validation works fine -- fields which are required are successfully monitored. However, when I go to reset my form -- I only see the red background for my inputs clear, not the validation messages.</p>\n\n<p>According to the <a href=\"http://docs.jquery.com/Plugins/Validation/Validator/resetForm\" rel=\"nofollow\">jQuery validate documentation</a>:</p>\n\n<blockquote>\n  <p>Resets input fields to their original value (requires form plugin),\n  removes classes indicating invalid elements and <strong>hides error messages</strong>.</p>\n</blockquote>\n\n<p>Here's all the info I think is relevant to the issue. Please let me know if you would like to see anything else.</p>\n\n<p>Here is how I generate a DOM element in my Model. This element needs validation:</p>\n\n<pre><code>//Model.ascx\n&lt;div class=\"detailsRow required\"&gt;\n    &lt;%= Html.LabelFor(model =&gt; model.Site) %&gt;\n    &lt;%= Html.DropDownListFor(model =&gt; model.SelectedSiteID, new SelectList(Model.Site, \"Key\", \"Value\"))%&gt;\n    &lt;%= Html.ValidationMessageFor(model =&gt; model.SelectedSiteID)%&gt;\n&lt;/div&gt;\n\n//Model.cs\n[DisplayName(\"Site\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; Site { get; set; }\n\n[Range(0, int.MaxValue, ErrorMessage = \"Site required\")]\npublic int SelectedSiteID { get; set; }\n</code></pre>\n\n<p>Site is a select list which starts with a value of -1. Any other selection is valid. As such, I validate on a range from 0 to max.</p>\n\n<p>Over in JavaScript, I run the following code against my form when the user presses the 'Submit' button on the form:</p>\n\n<pre><code>var form = workflowDialogContent.find('form');\n$.validator.unobtrusive.parse(form);\n//Maintain a reference to the current formValidator to be able to reset.\nvar formValidator = $.data(form[0], 'validator');\n\nif (form.valid()) {\n}\n</code></pre>\n\n<p>When the user pressed submit, the form is validated and my validation message is shown if the selected site has a value of -1.</p>\n\n<p>Now, whenever the a selection is changed, I want to reset my form. I've taken this logic from: <a href=\"http://stackoverflow.com/questions/2086287/how-to-clear-jquery-validation-error-messages\">How to clear Jquery validation error messages?</a></p>\n\n<pre><code>$(window).on('change', '#SelectedSiteID', function () {\n    //Returns the formValidator we maintained a reference to.\n    var validator = WorkflowDialogBuilder.getCurrentFormValidator();\n    validator.resetForm();\n    //TODO: resetForm's documentation says that it hides the errors, but I did not experience this, so I am doing it manually.\n    //$('.field-validation-error').empty();\n}\n</code></pre>\n\n<p>However, when I run this code... the highlighting is removed, but the error messages remain. If I call the bit of commented code -- the validation errors are hidden, but they do not re-appear the next time my form is validated.</p>\n\n<p>After validating:\n<img src=\"http://i.stack.imgur.com/0gNqs.png\" alt=\"enter image description here\">\nAfter calling resetForm:\n<img src=\"http://i.stack.imgur.com/FKqw0.png\" alt=\"enter image description here\"></p>\n\n<p>Any ideas why I would be seeing such behavior?</p>\n\n<p><strong>Update:</strong> As a work around, the following bit of code seems to do proper clean-up:</p>\n\n<pre><code>$('.field-validation-error').empty();\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1870,"score":5,"question_id":2111936,"title":"How do I see which version of MVC is installed?","body":"<p>How can I tell which version of MVC (i.e. MVC 2 Beta, MVC 2 RC) is installed on my machine?</p>\n"},{"tags":["sql-server","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13259641,"title":"Should I add a field like MarkedAsDeleted to my table?","body":"<p>I'm building an ASP.NET MVC application with SQL Server. I would like to know what will be a good practice for record deletion operations. I mean, when an item is deleted via web application, I would like to mark it as deleted, and then from an admin console, I will purge them if needed.</p>\n\n<p>Is this a good practice? Should I use or avoid?</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first","code-first-migrations"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":280,"score":0,"question_id":12573927,"title":"Database Initializer not being called in EF 5 + MVC 3","body":"<p>I know this question might be duplicated, but I haven't found any solution for my problem yet.</p>\n\n<p>I have:</p>\n\n<pre><code>protected void Application_Start()\n        {\n            Database.SetInitializer(new DatabaseSeeder());\n            DatabaseContext c = new DatabaseContext();\n            c.Database.Initialize(true);\n\n            AreaRegistration.RegisterAllAreas();\n\n            RegisterGlobalFilters(GlobalFilters.Filters);\n            RegisterRoutes(RouteTable.Routes);\n\n\n        }\n</code></pre>\n\n<p>my database seeder is:</p>\n\n<pre><code>public class DatabaseSeeder : DropCreateDatabaseAlways&lt;DatabaseContextBase&gt;\n    {\n        protected override void Seed(DatabaseContextBase context)\n        {\n            base.Seed(context);\n\n            var roles = new[] {\"Admin\", \"User\"};\n            foreach (var role in roles)\n            {\n                context.Roles.Add(new UserRole {FullName = role});\n            }\n\n            context.SaveChanges();\n        }\n    }\n</code></pre>\n\n<p>and my context is:</p>\n\n<pre><code>public abstract class DatabaseContextBase : DbContext\n    {\n        public DbSet&lt;UserRole&gt; Roles { get; set; }\n        public DbSet&lt;UserAndPermissionInGroup&gt; UserAndPermissions { get; set; }\n        public DbSet&lt;GeneralUser&gt; Users { get; set; }\n        public DbSet&lt;Group&gt; Groups { get; set; }\n        public DbSet&lt;Forum&gt; Forums { get; set; } \n\n        public DatabaseContextBase() :base(\"ForumDb\")\n        {\n\n        }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            base.OnModelCreating(modelBuilder);\n            modelBuilder.Entity&lt;Comment&gt;()\n                .HasRequired(e =&gt; e.Owner)\n                .WithMany(t =&gt; t.Comments)\n                .HasForeignKey(e =&gt; e.OwnerId)\n                .WillCascadeOnDelete(false);\n        }\n    }\n</code></pre>\n\n<p>And finally:</p>\n\n<pre><code>public class DatabaseContext : DatabaseContextBase\n\n{\n\n}\n</code></pre>\n\n<p>The problem is that, even with this initializer, I get the following error:</p>\n\n<blockquote>\n  <p>The model backing the 'DatabaseContext' context has changed since the\n  database was created. Consider using Code First Migrations to update\n  the database</p>\n</blockquote>\n\n<p>I am using EF 5 code first in an ASP.NET MVC 3 project. Any suggestions?</p>\n"},{"tags":["asp.net-mvc","knockout.js","knockout-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13256528,"title":"Field-level change tracking with ASP.NET MVC4 & Knockout","body":"<p>Wondering if anyone out there has experience with tracking field-level change tracking?  We are trying to discern the easiest/best way to track any and all model modifications by end-users.  I am using ASP.NET MVC4, Knockout, and Knockout Editables.  </p>\n"},{"tags":["c#","asp.net-mvc","mvc","html-helper","application-start"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13258944,"title":"Access HtmlHelper right after it is created, and before the view","body":"<p>I know that i from Application_Start can ActionFilterAttribute add a custom global filter and manipulate the ModelState and what not.</p>\n\n<p>Is there a similar way, to access the @Html (HtmlHelper) Before it get's send to the view?</p>\n\n<p>The reason for this is that i want to edit (or remove and recreate) the UnobtrosiveValidationAttributes. And if i try to do that in the View like this: <code>@Html.GetUnobtrusiveValidationAttributes(\"PhoneNumber\").Clear();</code> Nothing happens, but i'm thinking it might would work if i got to it earlier?</p>\n\n<p>(If you are wondering why: i need to translate the ErrorMessages inside)</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13258959,"title":"Dropdown List styles","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8356797/how-to-bold-the-first-option-of-a-select-across-all-browsers\">How to bold the first option of a select across all browsers?</a>  </p>\n</blockquote>\n\n\n\n<p>How do we need to code for a drop down list so that only first item among the dropdownlist is in italics and in different color.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2","partial-views","editorfor"],"answer_count":2,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":5967,"score":11,"question_id":1482925,"title":"Rendering the field name in an EditorTemplate (rendered through EditorFor())","body":"<p>I'm currently building the Admin back-end for a website in ASP.NET MVC.</p>\n\n<p>In an ASP.NET MVC application, I've started using the 'EditorFor' helper method like so:</p>\n\n<pre><code>&lt;div id=\"content-edit\" class=\"data-form\"&gt;\n    &lt;p&gt;\n        &lt;%= Html.LabelFor(c =&gt; c.Title) %&gt;\n        &lt;%= Html.TextBoxFor(c =&gt; c.Title)%&gt;\n    &lt;/p&gt;\n    &lt;p&gt;\n        &lt;%= Html.LabelFor(c =&gt; c.Biography) %&gt;\n        &lt;%= Html.EditorFor(c =&gt; c. Biography)%&gt;\n    &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In the model, the 'Biography' field has been decorated with: [UIHelper(\"Html\")].</p>\n\n<p>I have an 'Html' partial view (under Views/Shared/EditorTemplates):</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;System.XML.Linq.XElement&gt;\" %&gt;\n\n&lt;textarea class=\"html\"&gt;\n    &lt;%= Model.ToString() %&gt;\n&lt;/textarea&gt;\n</code></pre>\n\n<p>Now I'd like to have the 'ID' attribute of the 'textarea' set to the name of the field, like this:</p>\n\n<pre><code>&lt;textarea id=\"Biography\" class=\"html\"&gt;\n    ...\n&lt;/textarea&gt;\n</code></pre>\n\n<p>But I can't see a way to do that with the current set up.</p>\n\n<p>All I can think of is creating an 'Html' ViewModel that contains a 'Value' property and a 'ControlID' property.</p>\n\n<p>But if I based the view off that, rather than 'System.XML.Linq.XElement', it would no longer be compatible with the 'EditorFor' helper method and I'd have to do everything manually.</p>\n\n<p>Has anyone had a similar problem yet?</p>\n"},{"tags":["c#","html","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13253930,"title":"Batch Grid cell takes DataValueField from DropDownList when cell leaves edit mode","body":"<p>What I want to do is display text for a company name in the drop down AND the cell (when it's not being edited), but have the ID of the company be the data that is passed back to the server when \"Save\" is clicked.</p>\n\n<p>Everything works perfectly, except that when I click on the next cell to continue my edits (which causes the cell with the DDL to leave edit mode), the read only cell in its place displays the ID instead of the Company's name.</p>\n\n<p>This picture illustrates what I mean:\n<img src=\"http://i.stack.imgur.com/ZkpnT.png\" alt=\"enter image description here\"></p>\n\n<p>Does anyone know a way to fix this or a different way to achieve the functionality that I need?</p>\n\n<p><strong>Editor Template</strong></p>\n\n<pre><code>@(Html.Kendo().DropDownList()\n.Name(\"Company\")\n.DataTextField(\"Name\")\n.DataValueField(\"EnterpriseID\")\n.BindTo((IEnumerable&lt;BlueGrace.BlueShip.Business.Enterprise.EnterpriseChildListingItem&gt;)ViewBag.RefCarrierLiabilityEnterpriseListing))\n</code></pre>\n\n<p><strong>Controller (ViewBag population)</strong></p>\n\n<pre><code>var enterpriseListing = Business.Enterprise.EnterpriseChildListing.Get(false, customIdentity.EnterpriseID, false).ToList();\n        ViewBag.RefCarrierLiabilityEnterpriseListing = enterpriseListing;\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>    @(Html.Kendo().Grid(Model.GlobalDictionary.RefCarrierLiabilityModels)\n        .Name(\"CarrierLiabilityDictionaryGrid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(item =&gt; item.CarrierName)\n            .EditorTemplateName(\"RefCarrierListing\").Width(250);\n        columns.Bound(item =&gt; item.Company)\n            .EditorTemplateName(\"RefCarrierLiabilityEnterpriseListing\");\n        columns.Bound(item =&gt; item.MaxLiability)\n            .EditorTemplateName(\"RefCarrierLiabilityMaxLiability\");\n        columns.Bound(item =&gt; item.IsValueOfGoodsMaxLiability);\n        columns.Command(command =&gt;\n        {\n            command.Destroy();\n        }).Width(100);\n    })\n    .ToolBar(toolbar =&gt;\n    {\n        toolbar.Create();\n        toolbar.Save();\n    })\n    .Editable(editable =&gt; editable.Mode(GridEditMode.InCell).CreateAt(GridInsertRowPosition.Top))\n    .Pageable()\n    .Sortable()\n    .Scrollable()\n    .Filterable()\n    .Resizable(resize =&gt; resize.Columns(true))\n    .Reorderable(reorder =&gt; reorder.Columns(true))\n    .DataSource(dataSource =&gt; dataSource\n        .Ajax()\n        .Batch(true)\n        .ServerOperation(false)\n        .Model(model =&gt;\n        {\n            model.Id(i =&gt; i.RefCarrierLiabilityID);\n            model.Id(i =&gt; i.RefCarrierID);\n        })\n        .Read(read =&gt; read.Action(\"GetCarrierLiabilities\", \"Dictionary\"))\n        .Create(create =&gt; create.Action(\"CreateCarrierLiabilities\", \"Dictionary\"))\n        .Update(update =&gt; update.Action(\"UpdateCarrierLiabilities\", \"Dictionary\"))\n        .Destroy(delete =&gt; delete.Action(\"DeleteCarrierLiabilities\", \"Dictionary\"))\n    )\n)\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","entity-framework"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1330,"score":1,"question_id":2435362,"title":"Error while updating Database record with Entity Framework on ASP.NET MVC Page","body":"<p>I have an ASP.NET Page that updates registered User Address Details for a selected record.\nBelow is the Update method that i am calling from Controller.</p>\n\n<p>When i am calling <strong>ApplyPropertyChanges</strong> method, I am getting the below error.\nDid anyone run into the same error while updating the record with Entity Framework. </p>\n\n<p>Appreciate your responses.</p>\n\n<p><strong>Error Message:</strong> </p>\n\n<p>The existing object in the ObjectContext is in the Added state. Changes can only be applied when the existing object is in an unchanged or modified state.</p>\n\n<p><strong>My Update Method Code:</strong></p>\n\n<pre><code>[HttpPost]\n    public bool UpdateAddressDetail([Bind(Prefix = \"RegUser\")] AddressDetail regUserAddress, \n                        FormCollection formData)\n    {\n    regUserAddress.AD_Id = 3;\n        regUserAddress.LastUpdated = HttpContext.User.Identity.Name;\n        regUserAddress.UpdatedOn = DateTime.Now;\n        regUserAddress.AddressType = ((AddressDetail)Session[\"CurrentAddress\"]).AddressType ?? \"Primary\";\n        regUserAddress.Phone = ((AddressDetail)Session[\"CurrentAddress\"]).Phone;\n        regUserAddress.Country = ((AddressDetail)Session[\"CurrentAddress\"]).AddressType ?? \"USA\";\n\n        miEntity.ApplyPropertyChanges(regUserAddress.EntityKey.EntitySetName, regUserAddress);\n        miEntity.SaveChanges();\n        return true;\n    }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":2909,"score":6,"question_id":495124,"title":"How do you redirect to the calling page in ASP.NET MVC?","body":"<p>Let's say I have a controller action that deletes an item out of a user's shopping basket.  This controller action is triggered by performing a POST to the url ~/delete/{id}.  If I have several pages on my application that will post to this url, how do I construct the controller action to redirect back to the page that posted to it?</p>\n"},{"tags":["javascript","asp.net-mvc","telerik","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13250704,"title":"Disable Telerik MVC Grid Validation","body":"<p>I have a telerik grid that is using a EditorTemplate:</p>\n\n<p>Editor:<br>\n<code>\n@ModelType Date<br>\n @Html.Telerik.DatePicker.Name(ViewData.TemplateInfo.GetFullHtmlFieldName(String.Empty)).Value(Model)\n</code></p>\n\n<p>In my viewModel:<br>\n<code>\nUIHint(\"Date\")<br>\nDisplayFormat(ApplyFormatInEditMode:=True, DataFormatString:=\"{0:dd-MM-yyyy}\")<br>\nPublic Property data As Date\n</code></p>\n\n<p>I can't get the client side validations to work <strong>so i decided to disable them</strong>.\nI added in the webconfig (views and app)<br>\n<code>\nadd key=\"ClientValidationEnabled\" value=\"false\" <br>\nadd key=\"UnobtrusiveJavaScriptEnabled\" value=\"false\" </code></p>\n\n<p>But it still tries to validate the field. I suppose it's some property in the grid.. <br>\nHow can i disable the validations?</p>\n\n<p>Thks.</p>\n\n<p>EDIT:</p>\n\n<p>I tested this in a simple form and both ClientValidationEnabled and UnobtrusiveJavaScriptEnabled are false. So the problem should be in the telerik Grid, it ignores those keys and still makes its validations. How do i disable the validation in the grid? </p>\n"},{"tags":["sql","asp.net-mvc","amazon-web-services"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13252686,"title":"Can't connect website to database on amazon web services","body":"<p>I've just loaded my mvc.net 3 website up onto a micro instance on Amazon Web Services and put the database up there on a RDS as well. I can connect to the database via AWS Explorer in VS2010 just fine but when I add the connection string to my <code>web.config</code> it times out trying to access the database. Is there something else I need to do?</p>\n\n<p>The web site loads fine, it just times out when accessing the DB.</p>\n\n<p>Sorry if this is a but vague, the whole AWS thing is new to me.</p>\n"},{"tags":["asp.net-mvc","ravendb","insert-update"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13248467,"title":"RavenDB with asp.net mvc Update Issue","body":"<p>I have a small project in asp.net mvc 3 and I am using RavenDB to store data.\nBut when i am trying to update entity i have error saying \n\"<strong><em>Attempted to associate a different object with id 'orders/257</em></strong>'\"\nI have a service class to menage entities.</p>\n\n<p>This is method to update entity called Order.\nI'v omitted the rest of methods baceuse of clarity</p>\n\n<pre><code>  public ErrorState UpdateOrder(Order order)\n    {\n        try\n        {\n            documentSession.Store(order);\n            documentSession.SaveChanges();\n            return new ErrorState { Success = true };\n\n        }\n        catch (Exception ex)\n        {\n            return new ErrorState { Success = false, ExceptionMessage = ex.Message };\n\n        }\n    }\n</code></pre>\n\n<p>This is rest of OrderRepository</p>\n\n<pre><code>  private readonly IDocumentSession documentSession;\n\npublic OrderRepository(IDocumentSession _documentSession)\n{\n    documentSession = _documentSession;\n}\n</code></pre>\n\n<p>ErrorState class is for menagege errors in app, it contains bool success and string message of exception.</p>\n\n<p>This is my edit Actions.</p>\n\n<pre><code> public ActionResult Edit(int id)\n        {\n            Order order = orderRepository.ObtainOrder(id);\n            if (order == null)\n            {\n                TempData[\"message\"] = string.Format(\"Order no: {0} not found\", id);\n                return RedirectToAction(\"Index\");\n            }\n            return View(order);\n\n        }\n\n\n\n        [HttpPost]\n        public ActionResult Edit(Order order)\n        {\n            if(!ModelState.IsValid)\n                return View();\n\n            errorState = orderRepository.UpdateOrder(order);\n            if (errorState.Success)\n            {\n                TempData[\"message\"] = string.Format(\"Order no: {0} has been changed\", order.Id);\n                return RedirectToAction(\"Index\");\n            }\n            else\n            {\n                TempData[\"Message\"] = string.Format(\"Error on update order no: {0} MSG: {1}\", order.Id,errorState.ExceptionMessage);\n                return RedirectToAction(\"Index\");\n            }\n\n\n        }\n</code></pre>\n\n<p>This is the rest of the controller , I'v omitted the rest of actions baceuse of clarity.</p>\n\n<pre><code>private readonly IOrderRepository orderRepository;\nprivate ErrorState errorState;\n\npublic HomeController(IOrderRepository _orderRepository,IDocumentSession _documentSession)\n{\n    orderRepository = _orderRepository;\n\n} \n</code></pre>\n"},{"tags":["asp.net-mvc","webgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13257474,"title":"WebGrid, MVC Some columns sort some don't. Why?","body":"<p>I have a very simple model being displayed in WebGrid. Some of the columns sort just fine but some won't sort at all, they just go to the default sort of the grid.</p>\n\n<pre><code> @grid.GetHtml(\ncolumns: grid.Columns(  \ngrid.Column(\"\", format: @&lt;text&gt;@Html.ActionLink(\"Send\",\"Send\", new {id=item.UNiQID})@Html.ActionLink(\"Details\",\"Details\", new {id=item.UNiQID})&lt;/text&gt;),\ngrid.Column(\"UniqID\",format:@&lt;text&gt;&lt;a href=\"Account/edit/@item.UNiQID\" title=\"Edit this record\"&gt;@item.UNiQID&lt;/a&gt;&lt;/text&gt;),  \ngrid.Column(\"AccountNumber\", header:\"Account Number\"),  \ngrid.Column(\"IntegrationConflict\", header:\"Integration Conflict\"),\ngrid.Column(\"CreatedDate\", header:\"Created Date\"),\ngrid.Column(\"Source\",header:\"Source\"),\ngrid.Column(\"Family\"),\ngrid.Column(\"Product\"),                \ngrid.Column(\"LastModifiedDate\",header:\"Last Modified Date\"))\n</code></pre>\n\n<p>In this example the UniqID, AccountNumber,Product and LastModifiedDate all sort fine without any additional code. The remaining columns do not sort,they just go to the default sort mode (which is UniqID).</p>\n\n<p>Any ideas why this might be?\nTCO\nJohn</p>\n"},{"tags":["asp.net","asp.net-mvc","templates","stringtemplate"],"answer_count":14,"favorite_count":11,"up_vote_count":15,"down_vote_count":0,"view_count":12739,"score":15,"question_id":173207,"title":"Best Template Engine for ASP.NET MVC","body":"<p>I am exploring ASP.NET MVC and I wanted to add jQuery to make the site interactive. I used StringTemplate, ported to .Net, as my template engine to generate html and to send JSON. However, when I view the page, I could not see it. After debugging, I've realized that the $ is used by the StringTemplate to access property, etc and jQuery uses it too to manipulate the DOM. Gee, I've looked on other template engines and most of them uses the dollar sign :(.</p>\n\n<p>Any alternative template engine for ASP.Net MVC? I wanted to retain jQuery because MSFT announced that it will used in the Visual Studio (2008?)</p>\n\n<p>Thanks in Advance :)</p>\n\n<p><strong>Update</strong></p>\n\n<p>Please go to <a href=\"http://stackoverflow.com/questions/1451319/asp-net-mvc-view-engine-comparison/1451355#1451355\">the answer</a> in <a href=\"http://stackoverflow.com/questions/1451319/asp-net-mvc-view-engine-comparison\">ASP.NET MVC View Engine Comparison</a> question for a comprehensive list of Template engine for ASP.NET MVC, and their pros and cons</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>At the end I'll just put the JavaScript code, including JQuery, in a separate script file, hence I wouldn't worry about the <code>$</code> mingling in the template file.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","selenium","bdd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13257306,"title":"Setup web server when using selenium webdriver c#","body":"<p>Im using selenium webdriver to make behavior tests on ASP.NET MVC application (C#).\nI want to have a server that will automatically open when I run those tests, like the IIS server which automatically runs when I debug my application.\nHow do I do that ?\nBTW, Im using the ChromeDriver if that matters.\nThanks.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13257063,"title":"Convert byte array to image on view","body":"<p>I have a model that has byte array of image.\nHow convert byte array to image on view in mvc.net</p>\n"},{"tags":["asp.net-mvc","orchardcms"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13238123,"title":"Orchard CMS: Content part not displayed","body":"<p>I created a content part, and add it to content type. \nWhen I create content type, a content part is not displayed, unlike as other fields.\nNo have compilation or logged errors, content part added to placement.info.</p>\n\n<p>PS: Sory for my bad english.</p>\n\n<p>Driver:</p>\n\n<pre><code>[UsedImplicitly]\npublic class TradeItemPartDriver: ContentPartDriver&lt;TradeItemPart&gt;\n{\n    private readonly ITradeItemService _tradeItemService;\n\n    private const string TemplateName = \"Parts/TradeItem\";\n\n    public TradeItemPartDriver(ITradeItemService tradeItemService)\n    {\n        _tradeItemService = tradeItemService;\n    }\n\n    protected override string Prefix\n    {\n        get { return \"TradeItem\"; }\n    }\n\n    protected override DriverResult Display(\n        TradeItemPart part,\n        string displayType,\n        dynamic shapeHelper)\n    {\n\n        return ContentShape(\"Parts_TradeItem\",\n                        () =&gt; shapeHelper.Parts_TradeItem(\n                            ContentPart: part)); \n    }\n\n    protected override DriverResult Editor(\n        TradeItemPart part,\n        dynamic shapeHelper)\n    {\n        var shape = ContentShape(\"Parts_TradeItem_Edit\",\n                () =&gt; shapeHelper.EditorTemplate(\n                    TemplateName: TemplateName,\n                    Model: BuildEditorViewModel(part),\n                    Prefix: Prefix));\n        return shape;\n    }\n\n    protected override DriverResult Editor(\n        TradeItemPart part,\n        IUpdateModel updater,\n        dynamic shapeHelper)\n    {\n\n        var model = new EditTradeItemViewModel();\n        updater.TryUpdateModel(model, Prefix, null, null);\n\n        if (part.ContentItem.Id != 0)\n        {\n            _tradeItemService.UpdateTradeItemForContentItem(\n                part.ContentItem, model);\n        }\n\n        return Editor(part, shapeHelper);\n    }\n\n    private EditTradeItemViewModel BuildEditorViewModel(TradeItemPart part)\n    {\n        var model = new EditTradeItemViewModel\n        {\nCode = part.Code, Cost= part.Cost, Unit = part.Unit, Weight = part.Weight,\nUnitsList = _tradeItemService.GetUnitTypes()\n        };\n        return model;\n    }\n}\n</code></pre>\n\n<p>Handler:</p>\n\n<pre><code>public class TradeItemPartHandler : ContentHandler\n{\n    public TradeItemPartHandler(IRepository&lt;TradeItemPartRecord&gt; repository)\n    {\n        Filters.Add(StorageFilter.For(repository));\n    }\n}\n</code></pre>\n\n<p>Models:</p>\n\n<pre><code>public enum EnumTradeItemUnit  : byte\n{\n     = 0,\n     = 1,\n     = 2,\n     = 3\n}\n\npublic class TradeItemPartRecord : ContentPartRecord\n{\n    public virtual string Code { get; set; }\n    public virtual decimal Weight { get; set; }\n    public virtual decimal Cost { get; set; }\n    public virtual int Unit { get; set; }\n}\n\npublic class TradeItemPart : ContentPart&lt;TradeItemPartRecord&gt;\n{\n    public virtual string Code { get; set; }\n    public virtual decimal Weight { get; set; }\n    public virtual decimal Cost { get; set; }\n    public virtual EnumTradeItemUnit Unit { get; set; }\n}\n</code></pre>\n\n<p>Serveces:</p>\n\n<pre><code>public interface ITradeItemService: IDependency\n{\n    //IEnumerable&lt;TradeItemPart&gt; GetTradeItems();\n    SelectList GetUnitTypes();\n    void UpdateTradeItemForContentItem(\n        ContentItem item,\n        EditTradeItemViewModel model);\n\n}\n\n\npublic class TradeItemService : ITradeItemService\n{\n    private readonly IContentManager _contentManager;\n    private readonly IRepository&lt;TradeItemPartRecord&gt; _tradeItemsRepository;\n\n    public TradeItemService(IContentManager contentManager, IRepository&lt;TradeItemPartRecord&gt; tradeItemsRepository)\n    {\n        _contentManager = contentManager;\n        _tradeItemsRepository = tradeItemsRepository;\n    }\n\n    public SelectList GetUnitTypes()\n    {\n        return new SelectList(\n        Enum.GetValues(typeof(EnumTradeItemUnit)).Cast&lt;EnumTradeItemUnit&gt;().Select\n            (it =&gt;\n            new SelectListItem() { Value = ((byte)it).ToString(), Text = it.ToString() }));\n    }\n\n     public void UpdateTradeItemForContentItem(\n        ContentItem item,\n        EditTradeItemViewModel model)\n    {\n        var part = item.As&lt;TradeItemPart&gt;();\n        part.Code = model.Code;\n        part.Cost = model.Cost;\n        part.Unit = model.Unit;\n        part.Weight = model.Weight;\n    }\n}\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>public class EditTradeItemViewModel\n{\n\n    [StringLength(10), WebDisplayName(\"\")]\n    public virtual string Code { get; set; }\n    [Required, Range(0, 100, ErrorMessage = \"  100     \"), WebDisplayName(\"\")]\n    public virtual decimal Weight { get; set; }\n    [Required, Range(0.01, 100000, ErrorMessage = \"  100..     \"), WebDisplayName(\"\")]\n    public virtual decimal Cost { get; set; }\n    [Required, WebDisplayName(\" \")]\n    public virtual EnumTradeItemUnit Unit { get; set; }\n    public virtual SelectList UnitsList { get; set; }\n}\n</code></pre>\n\n<p>~/Views/EditorTemplates/Parts/TradeItem.cshtml</p>\n\n<pre><code>@model Delivery.ViewModels.EditTradeItemViewModel\n&lt;fieldset&gt;\n    &lt;legend&gt;@T(\"\")&lt;/legend&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Code, T(\"\"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(model =&gt; model.Code)\n    @Html.ValidationMessageFor(model =&gt; model.Code)\n  &lt;/div&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Unit, T(\" \"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.DropDownListFor(model =&gt; model.Unit, Model.UnitsList)\n    @Html.ValidationMessageFor(model =&gt; model.Unit)\n  &lt;/div&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Cost, T(\"\"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(model =&gt; model.Cost)\n    @Html.ValidationMessageFor(model =&gt; model.Cost)\n  &lt;/div&gt;\n\n  &lt;div class=\"editor-label\"&gt;\n    @Html.LabelFor(model =&gt; model.Weight, T(\"  \"))\n  &lt;/div&gt;\n  &lt;div class=\"editor-field\"&gt;\n    @Html.TextBoxFor(model =&gt; model.Weight)\n    @Html.ValidationMessageFor(model =&gt; model.Weight)\n  &lt;/div&gt;\n\n\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>Placement:</p>\n\n<pre><code>&lt;Placement&gt;\n  &lt;Place Parts_TradeItem_Edit=\"Content:10\"/&gt;\n  &lt;Place Parts_TradeItem=\"Content:10\"/&gt;\n&lt;/Placement&gt;\n</code></pre>\n\n<p>Migrations:</p>\n\n<pre><code>        SchemaBuilder.CreateTable(\"TradeItemRecord\",\n                       table =&gt; table\n                           .ContentPartRecord()\n                           .Column&lt;string&gt;(\"Code\", column =&gt; column.WithLength(10))\n                           .Column&lt;decimal&gt;(\"Weight\", column =&gt; column.WithPrecision(8).WithScale(2))\n                           .Column&lt;decimal&gt;(\"Cost\", column =&gt; column.WithPrecision(8).WithScale(2))\n                           .Column&lt;byte&gt;(\"Unit\")\n                       );\n\n        ContentDefinitionManager.AlterPartDefinition(\"TradeItem\",\n            builder =&gt; builder.Attachable());\n</code></pre>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13256854,"title":"inject javascript in cshtml from partial-view using RenderSection not working","body":"<p>I have a partial view, that requires some javascript at the bottom of the page.</p>\n\n<p>The main page:</p>\n\n<pre><code>...some html...\n&lt;div&gt;\n@Html.Partial(\"_myPartial\")\n&lt;/div&gt;\n\n....more html....\n\n//required JS at BOTTOM -  THIS should also come from above partial\n@RenderSection(\"scripts\", required: false)\n</code></pre>\n\n<p>my partial view:</p>\n\n<pre><code>&lt;div id=\"Slider\"&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 1]\" /&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 2]\" /&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 3]\" /&gt;\n    &lt;img src=\"http://placehold.it/1000x400&amp;text=[img 4]\" /&gt;\n&lt;/div&gt;\n\n\n@section scripts\n{\n &lt;script type=\"text/javascript\"&gt;\n  $(window).load(function () {\n    $('#Slider').orbit();\n  });\n  &lt;/script&gt;\n}\n</code></pre>\n\n<p>But this does not work - the scripts section is not included.</p>\n\n<p>I googled, this is not supported...well...</p>\n\n<p>...How would YOU handle this situation??</p>\n\n<p>Suggestions were to make yet another partial with the script and include this....\nNot pretty!</p>\n\n<p>Is there a better approach out there??</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc","sharepoint"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":243,"score":3,"question_id":2027424,"title":"SharePoint and MVC","body":"<p>Has anyone had any success with SharePoint and MVC, are Microsoft going to support this going forward in 2010?</p>\n"},{"tags":["asp.net-mvc","entity-framework","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13245746,"title":"Entity sql datetime literal","body":"<p>I am stuck in the ObjectQuery class it always gives me the error as \nSystem.Data.Entity: The argument types 'Edm.DateTime' and 'Edm.String' are incompatible for this operation., near WHERE predicate</p>\n\n<p>Please suggest me the solution, i followed the above approach, but it did not work.</p>\n\n<p>my code is as follows:</p>\n\n<p>C# code:</p>\n\n<pre><code>var _dbModel = new VISAIntBPAEntities();\n        var serializer = new JavaScriptSerializer();\n        Filters f = (!_search || string.IsNullOrEmpty(filters)) ? null : serializer.Deserialize&lt;Filters&gt;(filters);\n        //if (f != null)\n        //{\n        //    if (f.rules[0].field == \"CreatedDate\")\n        //    {\n        //        Convert.ToDateTime(f.rules[0].data).ToString();\n        //    }\n        //}\n        ObjectQuery&lt;Jobs&gt; filteredQuery = (f == null ? _dbModel.Jobs : f.FilterObjectSet(_dbModel.Jobs));\n        //if (f != null)\n        //{\n        //    if (f.rules[0].field == \"CreatedDate\")\n        //    {\n        //        filteredQuery.Parameters.Add(new ObjectParameter(\"CreatedDate\", Convert.ToDateTime(f.rules[0].data)));\n        //    }\n        //}\n        if (f != null)\n        {\n            DateTime dateTimeValue = Convert.ToDateTime(f.rules[0].data);\n            filteredQuery = filteredQuery.Where(string.Format(\"(it.CreatedDate = DATETIME'{0:yyyy-mm-dd hh:mm}')\", dateTimeValue));\n        }\n        filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data\n        var totalRecords = filteredQuery.Count();\n</code></pre>\n\n<p>Cleint side code:</p>\n\n<p>this code is in built using jqgrid, which has a column called CreatedDate, which fills in the dropdown, i have a sql query which fetches me the distinct date part from the database.\nI am doing filtering based on the string date selection in the dropdown.</p>\n\n<pre><code>{\n        name: 'CreatedDate', index: 'CreatedDate', width: 140, stype: 'select', async: false, sorttype: 'date',\n        edittype: 'select', editoptions: { value: getCreatedJobDate() }, editable: true, formatoptions: { newformat: 'm/d/Y' },\n        //editrules: { required: true },\n        searchoptions: {\n        value: getCreatedJobDate,\n        sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge', 'de']\n        }\n        }\n</code></pre>\n\n<p>Please help me as i am stuck with this approach, i need to do this way only.\nThanks in advance.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":963,"score":1,"question_id":2846090,"title":"RedirectToAction for areas?","body":"<p>I have setup some areas, but I'm not sure how to Redirect to them via the RedirectToAction method. There doesn't seem to be any Area parameter I can feed it.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","mvc","razor","orchardcms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":46,"score":-1,"question_id":13237264,"title":"Orchard CMS Blog View / Layout","body":"<p>I'm new to Orchard CMS &amp; MVC so please take this into account. Any help -the more the better- will be greatly received.</p>\n\n<p>I want to add widgets to my blog summary page. What is the best way to achieve this? Ive tried creating a layer for the blog summary page defined by the rules for the layer, so as to be unique to this page. However, this only allows me to add widgets into the layer zones.</p>\n\n<p>What i need/want to do is to effectively create a side bar with a tag cloud and a blogroll showing titles of other posts, and a couple of other bits of content. This would mean moving the blog summary content into another zone inorder that i can fit widgets down the side.</p>\n\n<p>Is this the correct approach? If so how do i shift the summary stuff into another zone??\nIf this isnt the best approach, what is???</p>\n\n<p>Is this where projections come in???</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":5833,"score":13,"question_id":4160753,"title":"External ASP.NET MVC 3 area not compiling at runtime (works in Preview 1 but not RC)","body":"<p><strong>Problem</strong></p>\n\n<p>ASP.NET MVC 3 RC is giving me a compilation error at runtime (when browsing) to an external MVC area. The website itself works, but the plugin refuses to load throwing a compilation issue pertaining to an unknown model.</p>\n\n<p><em>LogOn.cshtml</em></p>\n\n<pre><code>@model TestProject.Models.LogOnModel\n@{\n    View.Title = \"Log On\";\n}\n//.....omitted for brevity\n</code></pre>\n\n<p>Error thrown at runtime.</p>\n\n<pre>\nCompilation Error\n\nDescription: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. \n\nCompiler Error Message: CS0103: The name 'model' does not exist in the current context\n\nSource Error:\n\n\nLine 38:         public override void Execute() {\nLine 39: \nLine 40: Write(model);\nLine 41: \nLine 42: WriteLiteral(\" TestPlugin.Models.LogOnModel\\r\\n\");\n</pre>\n\n<p><strong>Background</strong></p>\n\n<p>The website is an ASP.NET MVC 3 Preview 1 website I have just migrated to ASP.NET MVC 3 RC. I read the release notes and updated accordingly but still encountered an issue with WebMatrix. I found a SO question where someone from the MVC team suggested until RTM we use the following to force the namespaces to be pulled in (I put them in web.config but it didn't work).</p>\n\n<pre><code>namespace WebMatrix.Data { class Foo { } }\nnamespace WebMatrix.WebData { class Foo { } }\n</code></pre>\n\n<p>This solved my issue within the website and the website now loads up fine in MVC 3 RC. The problem however, is an external MVC area (separate assembly).</p>\n\n<p>Note I'm not using any third party libraries for this, I wrote a little plugin framework that allows loading an MVC area from another assembly. Views are compiled as embedded resources.</p>\n\n<p>So I have an authentication plugin for example that looks like.</p>\n\n<pre><code>-Controllers\n-- AccountController.cs\n-Models\n-- AccountModels.cs\n-Views\n--Account\n--- LogOn.cshtml\n--- ChangePassword.cshtml\n--- ...\n-Web.config\nAccountAreaRegistration.cs\nWeb.config\n</code></pre>\n\n<p>Other than the fact that the views are marked as embedded resources, the AccountController extending  a PluginController that knows how to load the embedded resouces and the global.asax being removed, its a pretty standard MVC area.</p>\n\n<p>I have tried creating a new empty MVC 3 test plugin project and slowly adding in the relevant code. This ensures all references and web.configs are correct. But I still receive the same model issue described above. The project compiles at design time but throws a compilation issue at runtime when it tries to emit the views it looks.</p>\n\n<p><strong>Just to be clear, this all works fine in ASP.NET MVC 3 Preview 1</strong>. However, now that I have upgraded it to MVC 3 RC I have the core website working but the external area refuses to work.</p>\n\n<p>There is nothing wrong the the plugin framework itself. It works fine in MVC 3 Preview 1. I'm looking for answers that might shed a little bit of light on what may be occuring in MVC 3 RC and why I might be using receiving this model error.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>Update</strong></p>\n\n<p>Interestingly if I change the declaration of the model at the top of the view to Preview 1 syntax `@inherits System.Web.Mvc.WebViewPage</p>\n\n<p>I get a different runtime compiler error. This time I get an error just further down when the Html.ValidationSummary begins for the login form.</p>\n\n<pre><code>@inherits System.Web.Mvc.WebViewPage&lt;TestProject.Models.LogOnModel&gt;\n@{\n    View.Title = \"Log On\";\n}\n&lt;div class=\"content_item half loginform\"&gt;\n    &lt;div class=\"content_body\"&gt;\n        &lt;h1&gt;VastID Login&lt;/h1&gt;\n        @Html.ValidationSummary(true, \"Login was unsuccessful. Please correct the errors and try again.\") // &lt;=== Compilation issue here on Html.ValidationSummary\n        @using (Html.BeginForm())\n        {\n          // .. omitted for brevity\n        }\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<pre>\nCompilation Error\n\nDescription: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. \n\nCompiler Error Message: CS1061: 'System.Web.Mvc.HtmlHelper' does not contain a definition for 'ValidationSummary' and no extension method 'ValidationSummary' accepting a first argument of type 'System.Web.Mvc.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)\n\nSource Error:\n\n\nLine 49: \nLine 50: \nLine 51:    Write(Html.ValidationSummary(true, \"Login was unsuccessful. Please correct the errors and try again.\"));\nLine 52: \nLine 53: WriteLiteral(\"\\r\\n\");\n</pre>\n\n<p>It's interesting that there is no compile time errors. System.Web.WebPages, System.Web.Helpers and all the necessary MVC 3 RC dll's are present. Including the necessary web.config's. It's as if these aren't available when the view is trying to be loaded however.</p>\n\n<p>The actual razor syntax I believe is part of System.Web.WebPages? Where does Html.ValidationSummary live? System.Web.Mvc or System.Web.Helpers?</p>\n"},{"tags":["c#","asp.net-mvc","calendar","grid","kendo-ui"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12934866,"title":"Kendo calendar in grid","body":"<p>Hello I am using Kendo grid to edit price lists.</p>\n\n<p>I am trying to edit single value in table:</p>\n\n<pre><code>@(Html.Kendo().Grid(Model).Name(\"PriceList\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.Id).Hidden();\n        columns.Bound(p =&gt; p.Name);\n        columns.Bound(p =&gt; p.ValidFrom).Format(\"{0:dd.MM.yyyy h:mm:ss}\");\n        columns.Bound(p =&gt; p.ValidTill).Format(\"{0:dd.MM.yyyy h:mm:ss}\");\n        columns.Bound(p =&gt; p.Created).Format(\"{0:dd.MM.yyyy h:mm:ss}\");\n        columns.Bound(p =&gt; p.UserName);\n        columns.Bound(p =&gt; p.FilePath);\n        columns.Command(command =&gt; { command.Edit(); command.Destroy(); });\n    })\n    .DataSource(dataSource =&gt; dataSource.Ajax()\n            .Model(model =&gt;\n            {\n                model.Id(p =&gt; p.Id);\n                model.Field(p =&gt; p.ValidFrom).Editable(false);\n                model.Field(p =&gt; p.ValidTill).Editable(true);\n                model.Field(p =&gt; p.Created).Editable(false);\n                model.Field(p =&gt; p.UserName).Editable(false);\n                model.Field(p =&gt; p.FilePath).Editable(false);\n                model.Field(p =&gt; p.Name).Editable(false);\n        })\n        .Read(\"PriceList_Read\", \"Admin\")       \n        .Destroy(\"PriceList_Editing_Destroy\", \"Admin\")\n        .Update(update=&gt;update.Action(\"PriceList_Editing_Update\", \"Admin\"))\n        .Events(e=&gt;e.Error(\"error_handler\"))\n    )   \n    .Editable(editable =&gt; editable.Mode(GridEditMode.InLine))\n    .AutoBind(true)\n)\n</code></pre>\n\n<p>And I am having troubles passing edited value in grid to my controller:</p>\n\n<pre><code>public ActionResult PriceList_Editing_Update([DataSourceRequest] DataSourceRequest request, PriceListViewModel model)\n        {\n\n                    int Id = model.Id;\n                    string Name = model.Name;\n                    DateTime date = model.ValidTill; // 0001 00:00:00 value all the time\n\n            return View(\"Index\", GetViewResult());\n        }\n</code></pre>\n\n<p>I am always getting back empty datetime value (by empty I mean <code>{1. 1. 0001 0:00:00}</code>) same problem is with 2 other columns using DateTime property (Created and ValidFrom). Rest of the values are posted back correctly. I was trying to get those values using <code>string DateTillStr = Request.Params[\"ValidTill\"];</code> but if I check my GET in firebug I can see grid is not sending back this value inside Request it sends only NON Datetime values of my model object. Like this:</p>\n\n<pre><code>Actual  false\nFilePath    D:\\Projects\\CPSkla\\CPSkla\\App_Data\\Cenk 2012_10.xlsx\nId  23\nName    Testovac cenk\nUser    0\nUser1   null\nUserName    djezek\n</code></pre>\n\n<p>Nothing more nothing less, only these 7 attributes I am missing rest 4 from my model:</p>\n\n<pre><code>public partial class PriceListView\n{\n    public int Id { get; set; }\n    public int User { get; set; }\n    public string Name { get; set; }\n    public System.DateTime ValidFrom { get; set; }\n    public System.DateTime ValidTill { get; set; }\n    public string FilePath { get; set; }\n    public Nullable&lt;System.DateTime&gt; Created { get; set; }\n    public Nullable&lt;System.DateTime&gt; Updated { get; set; }\n    public bool Actual { get; set; }\n    public string UserName { get; set; }\n}\n</code></pre>\n\n<p>Is there some other way to post these data back? I figured out I can attach additional data to Update request but I had an issue how to identify edited row in the table in javascript function (I know how to identify selected value but not edited).</p>\n\n<p>I figured out using firebug that calendar picker inside kendo grid isnt actualy puting its selected value into input assigned to hold date value. Any thoughts?</p>\n"},{"tags":["asp.net-mvc","linq","linq-to-sql"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":7699,"score":3,"question_id":2515303,"title":"Delete all records from a database using LINQ to SQL","body":"<p>I am using MVC. How do I delete all records from the database using LINQ to SQL? A code example would be greatly appreciated.</p>\n"},{"tags":["c#","html","asp.net-mvc","telerik-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13255755,"title":"display image in grid based on status stored in db","body":"<p>I have a strongly typed view where I display consultants with an image in a telerik grid. I have a column \"Status\" where I store if a consultant is working on a project or not. What I want to do is, If a consultant has an \"Active\" status then display a greyed delete image(disabled, cant delete a consultant as he/she is active), else display a red delete image(enabled, can delete a consultant as he/she is inactive). Is this possible with my design below?</p>\n\n<p>Controller Action:</p>\n\n<pre><code>public ActionResult Index()\n{\n    ViewData.Model = db.Consultants.OrderBy(p =&gt; p.ConsultantName);\n    return View();\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;IEnumerable&lt;UI.Models.Consultants&gt;&gt;\" %&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n\n                &lt;table&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;% Html.GridFor(\"Consultants\", \"Consultants\", \"Consultants\", GridOptions.EnableSelecting, Model).Columns(column =&gt;\n                                {\n                                    column.Bound(o =&gt; o.Code).Title(\"Code\");\n                                    column.Bound(o =&gt; o.Description).Title(\"Description\");                                  \n                                 column.Template(o =&gt;\n            {\n                %&gt;\n                &lt;img src=\"/Content/img/consultant.png\" alt=\"consultant\" title=\"consultant\" onclick=\"javascript:deleteConsultant(&lt;%= o.consultantKey %&gt;)\" /&gt;\n                &lt;%\n            }).Title(\"\").ClientTemplate(\n                      \"&lt;img src=\\\"/Content/img/consultant.png\\\" alt=\\\"consultant\\\" title=\\\"consultant\\\" onclick=\\\"javascript:deleteConsultant(&lt;#= ProjectKey #&gt;)\\\"/&gt;\");\n            column.Bound(o =&gt; o.consultantKey).Hidden();\n        }).Render();            \n                            %&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["asp.net-mvc","renderpartial","renderaction"],"answer_count":7,"favorite_count":35,"up_vote_count":147,"down_vote_count":1,"view_count":38845,"score":146,"question_id":5248183,"title":"Html.Partial vs Html.RenderPartial & Html.Action vs Html.RenderAction","body":"<p>What is difference between <code>Html.Partial</code> and <code>Html.RenderPartial</code> in asp.net mvc?\nalso What is difference between <code>Html.Action</code> and <code>Html.RenderAction</code> in asp.net mvc?</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13184180,"title":"KendoUI MVC Grid - Addnew or Update record with ajax and server side validation","body":"<p>I have implemented inline editing with Knedo UI MVC grid with Ajax binding,\nServer side validation handled in controller and sending the error back using -</p>\n\n<p>ModelState.AddModelError(\"Error: \", ex.Message);</p>\n\n<p><code>@(Html.Kendo().Grid&lt;AnalyticsServiceWeb.ViewModel.SomeViewModel&gt;()\n    .Name(\"Grid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.Name);\n        columns.Bound(p =&gt; p.Path);\n        columns.Bound(p =&gt; p.Space);\n        columns.Command(command =&gt; { command.Edit(); command.Destroy(); });\n    })\n    .ToolBar(toolbar =&gt; toolbar.Create())\n    .Editable(editable =&gt; editable.Mode(GridEditMode.InLine))\n)</code></p>\n\n<pre><code>function error_handler(e) {\n    if (e.errors) {\n        var message = \"Errors:\\n\";\n        $.each(e.errors, function (key, value) {\n            if ('errors' in value) {\n                $.each(value.errors, function () {\n                    message += this + \"\\n\";\n                });\n            }\n        });\n        alert(message);\n    }\n}\n</code></pre>\n\n<p>The server side error message is getting displayed when there is a server side exception, but it still completes the action in UI, i mean it adds the new record to the grid and update as well even though there is server side exception.</p>\n\n<p>Is there any way to retain the state of UI before the action start?, it supposed to work in that way, not sure if i am missing anything?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor"],"answer_count":4,"favorite_count":10,"up_vote_count":17,"down_vote_count":0,"view_count":1566,"score":17,"question_id":170900,"title":"How can I avoid duplicate content in ASP.NET MVC due to case-insensitive URLs and defaults?","body":"<blockquote>\n  <p><strong>Edit</strong>: Now I need to solve this problem for real, I did a little more\n  investigation and came up with a\n  number of things to reduce duplicate\n  content. I posted detailed code\n  samples on my blog: <a href=\"http://blog.dantup.me.uk/2009/04/reducing-duplicate-content-with-aspnet.html\" rel=\"nofollow\">Reducing\n  Duplicate Content with ASP.NET MVC</a></p>\n</blockquote>\n\n<p>First post - go easy if I've marked this up wrong or tagged it badly :P</p>\n\n<p>In Microsoft's new ASP.NET MVC framework it seems there are two things that could cause your content to be served up at multiple URLs (something which Google penalize for and will cause your PageRank to be split across them):</p>\n\n<ul>\n<li>Case-insensitive URLs</li>\n<li>Default URL</li>\n</ul>\n\n<p>You can set the default controller/action to serve up for requests to the root of your domain. Let's say we choose HomeController/Index. We end up with the following URLs serving up the same content:</p>\n\n<ul>\n<li>mydomain.com/</li>\n<li>mydomain.com/Home/Index</li>\n</ul>\n\n<p>Now if people start linking to both of these then PageRank would be split. Google would also consider it duplicate content and penalize one of them to avoid duplicates in their results.</p>\n\n<p>On top of this, the URLs are not case sensitive, so we actually get the same content for these URLs too:</p>\n\n<ul>\n<li>mydomain.com/Home/Index</li>\n<li>mydomain.com/home/index</li>\n<li>mydomain.com/Home/index</li>\n<li>mydomain.com/home/Index</li>\n<li>(the list goes on)</li>\n</ul>\n\n<p>So, the question... How do I avoid these penalties? I would like:</p>\n\n<ul>\n<li>All requests for the default action to be redirected (301 status) to the same url</li>\n<li>All URLs to be case sensitive</li>\n</ul>\n\n<p>Possible?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13254539,"title":"NullReferenceException from ViewData which is Not Null actually","body":"<p><a href=\"http://i.stack.imgur.com/Mm6e6.png\" rel=\"nofollow\">ScreenShot</a></p>\n\n<p>I think the screenshot explains everything. How can i resolve this problem ? Even the data is not null, it gives null reference exception..</p>\n\n<p>Stacktrace is below:</p>\n\n<pre><code>   at ASP._Page_Views_Profile_Index_cshtml.Execute() in c:\\aaaaaa\\aaa\\aaaaaa\\Views\\Profile\\Index.cshtml:line 17\n   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()\n   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()\n   at System.Web.WebPages.StartPage.ExecutePageHierarchy()\n   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)\n   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass1a.&lt;InvokeActionResultWithFilters&gt;b__17()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)  \n</code></pre>\n"},{"tags":["c#","jquery","asp.net-mvc","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13242414,"title":"Passing A List Of Objects Into An MVC Controller Method Using jQuery Ajax","body":"<p>I'm trying to pass an array of objects into an MVC controller method using\njQuery's ajax() function. When I get into the PassThing() C# controller method,\nthe argument \"things\" is null. I've tried this using a type of List for\nthe argument, but that doesn't work either. What am I doing wrong?</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        var things = [\n            { id: 1, color: 'yellow' },\n            { id: 2, color: 'blue' },\n            { id: 3, color: 'red' }\n        ];\n\n        $.ajax({\n            contentType: 'application/json; charset=utf-8',\n            dataType: 'json',\n            type: 'POST',\n            url: '/Xhr/ThingController/PassThing',\n            data: JSON.stringify(things)\n        });\n    });\n&lt;/script&gt;\n\npublic class ThingController : Controller\n{\n    public void PassThing(Thing[] things)\n    {\n        // do stuff with things here...\n    }\n\n    public class Thing\n    {\n        public int id { get; set; }\n        public string color { get; set; }\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","powershell","nuget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13242282,"title":"Nuget PowerShell script to modify Global.asax.cs","body":"<p>I'm building a nuget package for my company MVC4 template. I have run into an issue where I need the <code>Global.asax.cs</code> to be modified to add these two lines:</p>\n\n<pre><code>using System.Web.Optimization;\n</code></pre>\n\n<p>at the top, before the namespace and</p>\n\n<pre><code>BundleConfig.RegisterBundles(BundleTable.Bundles);\n</code></pre>\n\n<p>at the end of the <code>Application_Start()</code> method</p>\n\n<p>I tried creating a <code>Global.asax.cs.pp</code> with <code>namespace $rootnamespace$</code> inside it, but that doesn't seem to work. It seems Nuget wont overwrite existing files?</p>\n\n<p>My last option, as I see it, is to write a powershell script (<code>Install.ps1</code>?) to do this. Here's my <code>template.nuspec</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;package&gt;\n  &lt;metadata&gt;\n    &lt;id&gt;Template.MVC4&lt;/id&gt;\n    &lt;version&gt;1.5&lt;/version&gt;    \n    &lt;title&gt;MVC4 Template&lt;/title&gt;\n    &lt;description&gt;Installs and configures files for MVC 4 application template.&lt;/description&gt;\n    &lt;authors&gt;Me&lt;/authors&gt;\n    &lt;language&gt;en-US&lt;/language&gt;\n    &lt;dependencies&gt;\n        &lt;dependency id=\"Microsoft.AspNet.Web.Optimization\" /&gt;\n    &lt;/dependencies&gt;\n    &lt;iconUrl&gt;http://www.someurl.com/Logo.jpg&lt;/iconUrl&gt;\n  &lt;/metadata&gt;\n  &lt;files&gt;   \n    &lt;file src=\"Template\\Helpers\\*\" target=\"content\\Helpers\\\" /&gt;\n    &lt;file src=\"Template\\Content\\*.css\" target=\"content\\Content\\\" /&gt;\n    &lt;file src=\"Template\\Content\\animGif\\*\" target=\"content\\Content\\animGif\\\" /&gt;\n    &lt;file src=\"Template\\Content\\custom-theme\\*\" target=\"content\\Content\\custom-theme\\\" /&gt;\n    &lt;file src=\"Template\\Content\\templateImages\\*\" target=\"content\\Content\\templateImages\\\" /&gt;\n    &lt;file src=\"Template\\Scripts\\*\" target=\"content\\Scripts\\\" /&gt;\n    &lt;file src=\"Template\\Views\\Shared\\*\" target=\"content\\Views\\Shared\\\" /&gt;\n    &lt;file src=\"Template\\Views\\Home\\*\" target=\"content\\Views\\Home\\\" /&gt;\n    &lt;file src=\"Template\\Views\\_ViewStart.cshtml\" target=\"content\\Views\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\App_Start\\*\" target=\"content\\App_Start\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Controllers\\*\" target=\"content\\Controllers\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Helpers\\*\" target=\"content\\Helpers\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Models\\*\" target=\"content\\Models\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\Views\\*\" target=\"content\\Views\\\" /&gt;\n    &lt;file src=\"NuGetPackage\\*\" target=\"content\\\" /&gt;\n  &lt;/files&gt;\n&lt;/package&gt;\n</code></pre>\n\n<p>My question is 2 fold, 1) am I doing something wrong in my .nuspec? and 2) if modifying a <code>Global.asax</code> with .pp isn't an option, then what is the powershell script that I'd need to write to have this run automatically when this nuget is added to a project, and do I need to do anything special for it to run (reading the docs seems like just placing <code>Install.ps1</code> in <code>tools\\</code> will do)?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":24,"score":-2,"question_id":13254485,"title":"asp.net mvc toolbar","body":"<p>I'm working on a project with Visual Studio 2010 ASP.Net MVC4 (engine view Razor) and I need create a toolbar.\nthis toolbar have six buttons (Add, Delete, Search, Edit, Cancel and Save)\nWhen into the page the buttons (Add and Search) enable and the others buttons Disables the same the textbox and combobox.\nNow the user click in the button Add then the buttos (Cancel and Save) enable the others buttons disable, textbox and combobox enable  for into data.</p>\n\n<p>How I can program this toolbar, if anybody have idea please help me.</p>\n\n<p>Regards\nRicardo</p>\n"},{"tags":["asp.net-mvc","linq","entity-framework","ef-code-first"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13248860,"title":"Querying an auto-generated EF junction table","body":"<p>I have two models, Benefit and SchemeName</p>\n\n<p>Benefit - </p>\n\n<pre><code>[Key]\npublic int BenefitID { get; set; }\npublic string BenefitName { get; set; }\npublic string BenefitDescription { get; set; }\npublic virtual ICollection&lt;SchemeName&gt; SchemeNames { get; set; }\n</code></pre>\n\n<p>SchemeName</p>\n\n<pre><code>[Key]\npublic int SchemeNameID { get; set; }\npublic string Name { get; set; }\npublic virtual ICollection&lt;Benefit&gt; Benefits { get; set; }\n</code></pre>\n\n<p>This has created three tables in the database Benefits, SchemeNames and a joining table called SchemeNameBenefits.</p>\n\n<p>I am trying to populate a droplownlist that contains only the SchemeNames associated with a certain Benefit but am not sure how I can do this, can I reference the join table in my code?</p>\n\n<p>I started with the following (which returns all SchemeNames)</p>\n\n<pre><code>private void PopulatePensionSchemeName(object selectedPensionSchemeName = null)\n        {\n            var schemeNameQuery = from d in db.SchemeNames\n                                  orderby d.SchemeNameID\n                                  select d;\n\n            ViewBag.PensionSchemeNameID = new SelectList(schemeNameQuery, \"SchemeNameID\", \"Name\", selectedPensionSchemeName);\n        }\n</code></pre>\n\n<p>But I'm not sure how I can add this clause. Any pointers?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","iis7"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":11891,"score":5,"question_id":1966240,"title":"How to configure IIS7 to work with an MVC 2.0 Framework 4.0 application","body":"<p>I have an MVC 2.0 application that I'm playing around with in VS2010 which is a .Net Framework 4.0 application, which works great on my local dev machine, but fails when IIS gets involved, giving me all sorts of IIS errors.</p>\n\n<p>Can someone please tell me the sequence of steps I need to do in order to get an application set-up in IIS 7.0 (running on Windows 2008 Server)? The best I can get is it showing me the directory contents of the root of my site. :o(</p>\n\n<p>I've followed various SO links to various posts saying that to stop the 403.14 Forbidden error message, you simply enable directory browsing in IIS for my particular app and it's away, but turning it on simply shows be the root-level structure and not actually running my site.</p>\n\n<p>To confirm, the 2008 Server has .Net Framework 4.0 installed, and I have set the 3x MVC 2.0 dlls to Copy Local = true from within Visual Studio 2010, so that the necessary MVC .dlls are present in the bin folder.  I have an MVC 1.0 application running on that machine (made using VS2008) but can't seem to get this 2.0 app working</p>\n"},{"tags":["c#","jquery","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13246306,"title":"download data as .xls format file","body":"<p>I need to download list data as .xls file.My controller code is follows.    </p>\n\n<pre><code>     [HttpGet]\n        public void AttendeeListToExport()\n        {\n            string campaign_id = string.Empty;\n            campaign_id = ((MemberProfile)HttpContext.Current.Profile).HOWCampaignID;\n            AutoCRM.Services.HOW.Attendee.Manage manage = new AutoCRM.Services.HOW.Attendee.Manage();\n            DataSet lst = manage.AttendeeListToExport(campaign_id);\n            if (lst != null)\n            {\n                if (lst.Tables[0].Rows.Count &gt; 0)\n                {\n                    DataTable dt = lst.Tables[0];\n                    // Export all the details to Excel\n                    string filename = campaign_id + \"_\" + DateTime.Now.ToString(\"ddMMyyyy\") + \".xls\";\n                    Export objExport = new Export();\n                    objExport.ExportDetails(dt, Export.ExportFormat.Excel, filename);\n                }\n            }\n        }\n</code></pre>\n\n<p>js code </p>\n\n<pre><code>$('#exportToExcel').on(\"click\", function () {\n        alert('hi');\n        $.ajax({\n            url: \"/api/Attendee/AttendeeListToExport\",\n            async: true,\n            cache: false,\n            success: function (result) {\n                alert(result);\n            }\n        });\n    });\n</code></pre>\n\n<p>code executing correctly but file not downloading</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13252621,"title":"Multiple ActionResults with a single View containing a DropDownList populated from Controller","body":"<p>I have 2 ActionResults that return the same view with a DropDownList source</p>\n\n<pre><code>Public ActionResult Create()\n{\n    var model = new ViewModel {\n        Entity = new Entity(),\n        Categories = GetCategories()\n    };\n\n    return View(\"Edit\", model);\n}\n\nPublic ActionResult Edit(int id)\n{\n    var model = new ViewModel {\n        Entity = GetFromDatabase(id),\n        Categories = GetCategories()\n    };\n\n    return View(model);\n}\n</code></pre>\n\n<p>I feel like I'm breaking the DRY principle, even if I've moved the population of the categories to a method. Is there a better way to go about this and only state where to get the Categories from once?</p>\n"},{"tags":["asp.net-mvc","sql-server-2008","entity-framework","entity-framework-4","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13252472,"title":"Entity Framework import and use stored procedure which returns different result sets depending on input","body":"<p>I am working on a migration project, where I am migrating an web forms app to a ASP.NET MVC 4 app.</p>\n\n<p>I have come across this one scenario with which I need a little help.</p>\n\n<p>In the old web form project I have stored proc like...</p>\n\n<pre><code>ALTER PROCEDURE [dbo].[TestMultipleResultSet]\n    @input VARCHAR\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    IF NOT EXISTS\n    (\n        SELECT * FROM Electronics\n        WHERE name = @input\n    )\n    BEGIN\n        SELECT 101 AS errorcode\n        RETURN\n    END\n\n    SELECT * FROM Electronics \n    WHERE name = @input\nEND\n</code></pre>\n\n<p>like the above <code>if not exist</code> check, there are many other checks with gives different <code>select * from</code> as resultset.</p>\n\n<p>Now I want to use Entity framework to execute this stored procedure, so I imported the function and created a complex type using the <code>Get Column Information</code> + <code>Create Complex Type</code> option which EF provides.</p>\n\n<p>Now it runs when I enter a valid @input which executes <code>SELECT * FROM Electronics WHERE name = @input</code> but when I enter an input which is not present instead of returning me a 101 error code it gives me an error. An exception is thrown.</p>\n\n<p>Exception details</p>\n\n<blockquote>\n  <p>The data reader is incompatible with the specified 'testEFModel.GetTestResults_Result1'. A member of the type, 'id', does not have a corresponding column in the data reader with the same name.</p>\n</blockquote>\n\n<p>How should I solve this ?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio","visual-studio-2012","code-first-migrations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13230902,"title":"Publishing my database (package deploy) with Code First Migrations","body":"<p>I have a VS2012 MVC4 solution (EF5). When coding, I use my personal computer with an SQL Express installed on the same machine. Each time I need to publish an update to the company, I create a package (.zip) and then import this package on the IIS of the company (not accessible from my dev computer). Each time I published my solution on the IIS server of the company, I recreate the entire database. That was in the past...</p>\n\n<p>Now, I changed my solution and use the Code First Migrations. When needed (entities changed), I update my local database thanks to the 'Package Manager console' (Update-Database). </p>\n\n<p><strong>My question</strong>: what do I have to do to update the database on the IIS of the company? </p>\n\n<p>I see the screenshot below on an explanation page (http://msdn.microsoft.com/en-us/library/dd465337.aspx) but I don't have the same screen when I open the publish wizard on my VS2012.</p>\n\n<p>Below is the screen seen on a documentation page:</p>\n\n<p><img src=\"http://i.stack.imgur.com/8tbcm.png\" alt=\"enter image description here\"></p>\n\n<p>Below is the screen I have:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ZbuBS.png\" alt=\"enter image description here\"></p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["asp.net","asp.net-mvc","jquery-ui","jquery-ui-dialog"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13154814,"title":"MVC JQuery Dialog submit more than 1 time","body":"<p>I am using JQuery's UI dialog to open a form. My attempt is to submit and close the dialog. I am having trouble.</p>\n\n<p>The parent window opens the dialog (which contains a partial view) from click and form is submitted, for the first time, data is saved in DB. But if I click to open the dialog again and submit, there are 2 data rows saved in DB with the same value.</p>\n\n<p>My code is below:</p>\n\n<pre><code>$('#newFileDialog').dialog('destroy');$('#newFileDialog').remove();\n</code></pre>\n\n<p>Is there something wrong with this code?</p>\n\n<p>Your help is appreciated.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Partial view:</p>\n\n<pre><code>@using(Html.BeginForm(\"New\", \"File\", new {}, FormMethod.Post, new { Id = \"newFileForm\" }  ))\n{    \n   @Html.ValidationSummary()    \n   @Html.RenderHTML(\n        new TabContainerViewModel(\n                new TabViewModel { Name = \"File\", ViewName = \"Common\", Model = Model, Visible = true},\n                new TabViewModel { Name = \"Permission\", ViewName = string.Empty, Visible = true}\n            ) { Id = \"createFileTabs\", Visible = true })    \n   @Html.SubmitButton(\"Send\")\n}\n@{ Html.JQueryAjaxForm(\"newFileForm\", \"containerComponentContent\", string.Empty, \"$('#newFileDialog').dialog('destroy');$('#newFileDialog').remove();showMessagebox('New File added');\"); }\n</code></pre>\n"},{"tags":["asp.net-mvc","json","rest","asp.net-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":13236528,"title":"Return JSON with WEB API Controller with objects with foreign keys","body":"<p>I have a problem with my code.\nI have some basics WEB API Controller that works ok (three fields without any foreign keys), but i have a problem with a API Controller that returns a list of objects from the model, and that class has a Foreign key to another class from the model.\nThis throws an error:\nHere is the Api Controller:</p>\n\n<pre><code>Public Class MaestroProvinciaController\n    Inherits System.Web.Http.ApiController\n\n    Private db As New UnificadorEntities\n\n    ' GET api/MaestroProvincia\n    Function GetMaestroProvincias() As IEnumerable(Of MaestroProvincia)\n        Dim l As IEnumerable(Of MaestroProvincia)\n        l = db.MaestroProvincia.AsEnumerable()\n        Return l\n    End Function\nEnd Class\n</code></pre>\n\n<p>And here is the Model of MaestroProvincia</p>\n\n<pre><code>Partial Public Class MaestroProvincia\n  Public Property Codigo As Integer\n  Public Property Descripcion As String\n  Public Overridable Property Usuario As ICollection(Of Usuario) = New HashSet(Of Usuario)\n\nEnd Class\n</code></pre>\n\n<p>When i consume , to try, from the browser to this address:\n<code>......../api/maestroprovincia</code>  </p>\n\n<p>I got an error:\n<code>Error del servidor\nEl sistema encontr un error mientras extraa ......../api/maestroprovincia . Es posible que el servidor no est disponible por mantenimiento o no est bien configurado.\nA continuacin se detallan algunas sugerencias:\nVolver a cargar esta pgina web despus.\nError HTTP 500 (Internal Server Error): Se encontr una situacin inesperada mientras el servidor intentaba cumplir con la solicitud.</code></p>\n\n<p>When I debug the Controller, put a WATCH (inspect) in the <code>\"l\"</code> variable, and the type of the objects of the list it is very strange, instead of <code>MaestroProvincia</code> type I get <code>system.data.entity.DynamicProxies.MaestroProvincia_D7543654378543</code>.</p>\n\n<p>All the other API Controllers that returns objects from models without FK does not have any problem.</p>\n\n<p>I would appreciate your help.  </p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13237122,"title":"Mvc application(from default) user registration","body":"<p>I make a Mvc4 application from defaults I've been given at the beginning.</p>\n\n<p>I need to store the modified UserProfile in my DB, so I have changed the UserProfile class for  fulfilling my needs and also changed the RegisterModel class. Now when I register someone, I have a correct view with all the necessary fields for it, however, when I open Server Explorer for check, I get a UserProfile table with UserId and UserName only(but by the model there should also be firstname,lastname,email and so on).</p>\n\n<p>What should be modified more for storing them correctly?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":13109674,"title":"ASP.NET MVC4 logged in but still needs to login","body":"<p>I'm new to ASP.NET and I'm facing a strange problem.</p>\n\n<p>I'm succefully logged in (my login partial view is showing my username using <code>User.Identity.Name</code> when <code>Request.isAuthenticated</code> is true), nevertheless, when I try to access a Controller that is protected by <code>[Authorize(Roles=\"Teacher\")]</code> (I'm logged as a teacher), he is pretty much always redirecting me to the login page. So I login and I can access the webpage, but if I refresh something like 30 seconds after I still have to login knowing that my username is still printed and I still seem to be logged.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","attributes","asp.net-mvc-4","metadata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13230362,"title":"Edit all attribute error messages dynamicly","body":"<p>I have made my own translation system, and i need to translate all of the validation errors produced by validation attributes, i have already done so with the DisplayNames like this:</p>\n\n<pre><code>public class MyCustomDataAnnotationModelProvider : DataAnnotationsModelMetadataProvider\n{\n    protected override ModelMetadata CreateMetadata(IEnumerable&lt;Attribute&gt; attributes, Type containerType, Func&lt;object&gt; modelAccessor, Type modelType, string propertyName)\n    {\n        var data = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);\n\n        if (data.DisplayName != null)\n            data.DisplayName = Translator.TranslateOnce(data.DisplayName);\n\n        return data;\n    }\n}\n</code></pre>\n\n<p>And that translates all of the Display attributes::</p>\n\n<pre><code>[Required(ErrorMessage=\"message\"), Display(Name=\"Language\"), StringLength(10)]\npublic string LanguageName { get; set; }\n</code></pre>\n\n<p>So basicly i want to do the exact same thing with the validation error, but i can't figure out how to iterate through them. \nThere is this thing called data.GetValidators() but it requires the ControllerContext, which i can't find.</p>\n"},{"tags":["asp.net-mvc","f#"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":13250752,"title":"Setting base member values in F#","body":"<p>I am messing about trying to implement my own basic view engine in F# at the moment. Essentially I am inheriting from the VirtualPathProviderViewEngine. </p>\n\n<p>To do this I need to set two view locations so the engine knows where to look for the views. In my F# type I inherit from the above and try to set the two view locations as below... </p>\n\n<pre><code>type FSharpViewEngine() =\ninherit VirtualPathProviderViewEngine()\n\nlet viewLocations = [| \"~/Views/{1}/{0}.fshtml\"; \"~/Views/Shared/{0}.fshtml\" |]\n\nmember this.ViewLocationFormats = viewLocations\nmember this.PartialViewLocationFormats = viewLocations\n</code></pre>\n\n<p>The code above omits the overrides that are needed for the VirtualPathProviderViewEngine. \nI run the project and I get an error message to say </p>\n\n<blockquote>\n  <p>The property 'ViewLocationFormats' cannot be null or empty.</p>\n</blockquote>\n\n<p>Which I am assuming means that I am not setting the two base members correctly above. Am I just assigning the above incorrectly or do you suspect I am doing something else wrong?</p>\n\n<p>As extra info, I have added the ViewEngine at start up time in the Global.fs (global.asax) like so...</p>\n\n<pre><code>ViewEngines.Engines.Add(new FSharpViewEngine())\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","file-download","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13251028,"title":"ASP.net mvc How to handle 404 which caused by missing of file","body":"<p>I have file in folder \"/UploadDir/TextFile1.txt\"\nI need: </p>\n\n<ol>\n<li>download file if it exists</li>\n<li>if file not exists (for example url :\"/UploadDir/TextFile2.txt\") should be shown custom errors message.</li>\n</ol>\n\n<p>But now my mvc application not handle any requests to missed or existing files, when i place breackpoint on Application_BeginRequest and try to request text file - nothing occurred.</p>\n\n<p>Besides i tryed to override HttpNotFound and HandleUnknownAction but same unsuccessfully.</p>\n\n<p>Who can help me how to hande request to file if it exists or show custom error if it not found.</p>\n\n<p>ps. route configuration is default</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","entity-framework","visual-studio-2012"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13251060,"title":"EF 4: System.Data.Entity.Edm.EdmEntityType: Name: Each type name in a schema must be unique","body":"<p>I want to use EF code first approach.</p>\n\n<p>I have read this post:</p>\n\n<p><a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx\" rel=\"nofollow\">http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx</a></p>\n\n<p>and created my BL classes</p>\n\n<pre><code>public class AppData\n{\n    public string Id { get; set; }\n\n    public string Url { get; set; }\n\n    public AppData_OptionsDialog OptionsDialog { get; set; }\n\n    public AppData_Compatibility Compatibility { get; set; }\n\n}\n\npublic class AppData_Compatibility\n{\n    public int Id { get; set; }\n\n    public string Platform { get; set; }\n\n    public string MaxVersion { get; set; }\n}\n\n\npublic class AppData_OptionsDialog\n{\n\n    public int Id { get; set; }\n\n    public string DisplayName { get; set; }\n\n    public string AppDesc { get; set; }\n\n    public string PrivacyPolicyUrl { get; set; }\n\n    public string TermsOfUseUrl { get; set; }\n\n}\n\n\npublic class AppsDataContext : System.Data.Entity.DbContext\n{\n    public AppsDataContext() : base(\"MaMDB\") { }\n\n    public DbSet&lt;Conduit.Mam.Common.BlData.AppsData.AppData&gt; AppsData { get; set; }\n\n    public DbSet&lt;Conduit.Mam.Common.BlData.AppsData.AppData_Compatibility&gt; AppData_Compatibilities { get; set; }\n\n    public DbSet&lt;Conduit.Mam.Common.BlData.AppsData.AppData_OptionsDialog&gt; AppData_OptionsDialogs { get; set; }       \n}\n</code></pre>\n\n<p>I have created corrisponding tables in the DB.</p>\n\n<p>I understand EF uses convention over configuration.</p>\n\n<p>So is it magically maps the classes to the DB? no need to generate an em</p>\n\n<p>I try to execute a test on of the methods:</p>\n\n<pre><code>    public IList&lt;Conduit.Mam.Common.BlData.AppsData.AppData&gt; GetAll()\n    {\n        var apps = from app in AppsDataContext.AppsData\n               select app;\n\n        return apps.ToList();\n    }\n</code></pre>\n\n<p>but get the following error:</p>\n\n<blockquote>\n  <p>One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: Name: Each type name in a\n  schema must be unique. Type name 'AppData_OptionsDialog' is already\n  defined. \\tSystem.Data.Entity.Edm.EdmEntityType: Name: Each type name\n  in a schema must be unique. Type name 'AppData_Compatibility' is\n  already defined.</p>\n</blockquote>\n\n<p>I have seen this answer, but it didn't help me</p>\n\n<p><a href=\"http://stackoverflow.com/questions/979664/entity-framework-error-the-entitycontainer-name-must-be-unique\">Entity Framework error - &quot;The EntityContainer name must be unique&quot;</a></p>\n"},{"tags":["c#","asp.net-mvc","post","static","visual-studio-2012"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":13230520,"title":"ASP.NET MVC public static list not same after POST","body":"<p>I'm new to MVC and i have problem i can't understand. Below code is what i want to attain:</p>\n\n<p>Model:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nnamespace testapplication.Models {\n    public class testModel {\n\n        public class SystemUser {\n            public string Name { get; set; }\n            public string Email { get; set; }\n        }\n\n        public static List&lt;SystemUser&gt; list1;\n        public static void CreateList1() {\n            list1 = new List&lt;SystemUser&gt;();\n        }\n\n        public static void FillList1() {\n            SystemUser firstUser = new SystemUser();\n            firstUser.Name = \"name\";\n            firstUser.Email = \"email@address.com\";\n            list1.Add(firstUser);\n        }\n\n        public static List&lt;SystemUser&gt; list2 = new List&lt;SystemUser&gt;();    \n        public static void FillList2() { \n            SystemUser firstUser = new SystemUser();\n            firstUser.Name = \"name\";\n            firstUser.Email = \"email@address.com\";\n            list2.Add(firstUser);\n        }\n\n        public static string list3 = \"test\";\n    }\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing testapplication.Models;\n\nnamespace testapplication.Controllers {\n    public class HomeController : Controller {\n\n        public ActionResult Index() {\n            testModel.CreateList1();\n            testModel.FillList1();\n            testModel.FillList2();\n            var var1 = testModel.list1;\n            var var2 = testModel.list2;\n            var var3 = testModel.list3;\n            return View();\n        }\n\n        [HttpPost]\n        public ActionResult Index(string test) {\n            var var1 = testModel.list1;\n            var var2 = testModel.list2;\n            var var3 = testModel.list3;\n            return View();\n        }\n    }\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;h2&gt;Index&lt;/h2&gt;\n\n@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post)) {\n    &lt;input type=\"submit\" value=\"Submit\" /&gt; \n}\n</code></pre>\n\n<p>Before POST method list1,list2 and list3 are ok but right after Post list1 is null, list2 is empty (instance is created) and list3 is ok. Why is that? I want to have same value before and after POST. Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13249935,"title":"The jQuery `data` method don't convert value","body":"<p>I have the following code in the view:</p>\n\n<pre><code>&lt;div id=\"wiz_main\"  data-place-schema=\"@Model.IsAgent\"&gt;\n...\n&lt;/div&gt;\n</code></pre>\n\n<p>This is the rendered code:</p>\n\n<pre><code>&lt;div id=\"wiz_main\" data-agent=\"True\"&gt;\n...\n&lt;/div&gt;\n</code></pre>\n\n<p>The code in the javascript file I write:</p>\n\n<pre><code>if ($('#wiz_main').data('agent'))\n        limit = 1000;\nelse\n        limit = 5;\n</code></pre>\n\n<p>The problem in that is, the <code>limit</code> always equals <code>5</code>. Why? I think <code>data</code> is smart and convert value to <code>bool</code>. I don't want to write the following:</p>\n\n<pre><code>if ($('#wiz_main').data('agent') == 'True')\n       limit = 1000;\nelse\n       limit = 5;\n</code></pre>\n\n<p>Version of <code>jQuery</code> is 1.7.2.</p>\n"},{"tags":["asp.net-mvc","performance","entity-framework","iis","entity-framework-5"],"answer_count":0,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":64,"score":5,"question_id":13250679,"title":"How to \"warm-up\" Entity Framework? When does it get \"cold\"?","body":"<p>No, the answer to my second question is not the winter.</p>\n\n<p><strong>Preface:</strong></p>\n\n<p>I've been doing a lot of research on Entity Framework recently and something that keeps bothering me is its performance when the queries are not warmed-up, so called cold queries. </p>\n\n<p>I went through the <a href=\"http://msdn.microsoft.com/en-us/data/hh949853.aspx\">performance considerations</a> article for Entity Framework 5.0. The authors introduced the concept of <strong>Warm</strong> and <strong>Cold</strong> queries and how they differ, which I also noticed myself without knowing of their existence. Here it's probably worth to mention I only have six month of experience behind my back.</p>\n\n<p>Now I know what topics I can research into additionally if I want to understand the framework better in terms of performance. Unfortunately most of the information on the Internet is outdated or bloated with subjectivity, hence my inability to find any additional information on the <em>Warm</em> vs <em>Cold</em> queries topic.</p>\n\n<p>Basically what I've noticed so far is that whenever I have to recompile or the recycling hits in, my initial queries are getting very slow. Any subsequent data read is fast (<em>subjective</em>), as expected.</p>\n\n<p>We'll be migrating to Windows Server 2012, IIS8 and SQL Server 2012 and as a Junior I actually won myself the opportunity to test them before the rest. I'm very happy they introduced a warming-up module that will get my application ready for that first request. However, I'm not sure how to proceed with warming up my Entity Framework.</p>\n\n<p>What I already know is worth doing:</p>\n\n<ul>\n<li>Generate my Views in advance as suggested.</li>\n<li>Eventually move my models into a separate assembly.</li>\n</ul>\n\n<p>What I consider doing, by going with common sense, <strong>probably wrong approach</strong>:</p>\n\n<ul>\n<li>Doing dummy data reads at Application Start in order to warm things\nup, generate and validate the models.</li>\n</ul>\n\n<p><strong>Questions:</strong> </p>\n\n<ul>\n<li>What would be the best approach to have high availability on my Entity Framework at anytime?</li>\n<li>In what cases does the Entity Framework gets \"cold\" again? (Recompilation, Recycling, IIS Restart etc.)</li>\n</ul>\n"},{"tags":["asp.net-mvc","mvccontrib","asp.net-mvc-areas","portable-areas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12244047,"title":"Portable Areas Vs Multi project Areas?","body":"<p>Can you please tell me advantages/drawbacks of these two implementations?</p>\n\n<p>My context : We have a large project which includes many differents domains. Each domain will naturally be  an Area. But many differents teams will work on each and we want to separate business rules. What is the best way to manage these ares in a solution ?</p>\n\n<p>I have seen many examples of Areas in separate project or with portable areas.\nBut i can not take decision.</p>\n\n<p>From my point of view :</p>\n\n<p>Separate Project</p>\n\n<ul>\n<li>Simple</li>\n<li>Difficult to manage Content (JS, CSS, ...). Does it must be in the main site ?</li>\n<li>Best performances</li>\n</ul>\n\n<p>Portable Areas</p>\n\n<ul>\n<li>All content, views must be in the same project</li>\n<li>Possible code duplicate between areas</li>\n<li>Contraints : name , embedded ressources, ...</li>\n<li>Part of MVC Contrib : will it me supported longer ?</li>\n<li>Component : ideal for redistribute a feature</li>\n</ul>\n\n<p>Thanks,</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13249240,"title":"How to render html content within label tag using jquery","body":"<p>I am working on asp.net mvc. I have a javascript variable like,</p>\n\n<pre><code>var note=\"&amp;lt;strong&amp;gt;&amp;lt;em&amp;gt;&amp;lt;span style='color:#ed1c24;'&amp;gt;Hai&amp;lt;/span&amp;gt;&amp;lt;/em&amp;gt;&amp;lt;span style='color:#ed1c24;'&amp;gt;Welcome&amp;lt;/span&amp;gt;&amp;lt;/strong&amp;gt; \";\n</code></pre>\n\n<p>I need to display as a html with in the label so i tried it like,</p>\n\n<pre><code>$('#lblNote').html(note);\n</code></pre>\n\n<p>but it doesnt render the html content and it shows the html tags as it is like,</p>\n\n<pre><code>&lt;label id=\"lblNote\"&gt;&lt;strong&gt;&lt;em&gt;&lt;span style=\"\"color:#ed1c24;\"\"&gt;\n    Hai&lt;/span&gt;&lt;/em&gt;&lt;span style=\"\"color:#ed1c24;\"\"&gt;\n    Welcome&lt;/span&gt;&lt;/strong&gt; &lt;/label&gt;\n</code></pre>\n\n<p>please guide me.</p>\n"},{"tags":["asp.net-mvc","facebook-c#-sdk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":249,"score":0,"question_id":9989486,"title":"Upload Event photo using Facebook-C#-SDK","body":"<p>I'm using the facebook-c#-sdk to create events on facebook, and that part it's working fine, but now i don't know how to use the sdk to upload the photo for my event.</p>\n\n<p>what sould i do?</p>\n\n<p>i'm using a asp.net mvc3 app</p>\n"},{"tags":["asp.net-mvc","forms","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13249429,"title":"ASP.Net MVC - What is the recommended way to retain form values across different controllers?","body":"<p>Let's say I have a HomeController which has an Index action, in the Index.cshtml View I will be posting back to an action in another controller (DocumentsController), after the action is completed I redirect back to Home/Index.</p>\n\n<p>What is the recommended/cleanest approach to maintain the form values that the user has submitted in the Index.cshtml view?  Given that it is being redirected from another controller?</p>\n\n<p>EDIT: I'm presently using RedirectToAction:</p>\n\n<p><code>return RedirectToAction(\"Index\", \"Home\");</code></p>\n\n<p>So using this approach how can I retain form values?</p>\n"},{"tags":["asp.net","asp.net-mvc","error-handling","godaddy","custom-error-pages"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":364,"score":0,"question_id":4231402,"title":"Overriding webhost's default error pages","body":"<p>I just published an ASP.NET MVC site where I built custom error pages. Here's how I implemented them:</p>\n\n<p>in ErrorController:</p>\n\n<pre><code>public ActionResult NotFound()\n{\n    Response.StatusCode = (int)HttpStatusCode.NotFound;\n    return View();\n}\n</code></pre>\n\n<p>in web.config:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/500\"&gt;\n&lt;error statusCode=\"403\" redirect=\"~/403\"/&gt;\n&lt;error statusCode=\"401\" redirect=\"~/401\"/&gt;\n&lt;error statusCode=\"404\" redirect=\"~/404\"/&gt;\n&lt;error statusCode=\"409\" redirect=\"~/409\"/&gt;\n&lt;error statusCode=\"500\" redirect=\"~/500\"/&gt;&lt;/customErrors&gt;\n</code></pre>\n\n<p>Naturally, faulty requests are routed to the NotFound method, and so on. Theoretically, it should work.</p>\n\n<p>However, I'm facing a problem: now that I've published my site to my host (GoDaddy), I've noticed that <strong>returning an error code for HTTP status causes my custom error pages to replaced by the default GoDaddy ones</strong>.</p>\n\n<p><strong>How can I get around this?</strong> Of course, the simplest solution would be to return a 200 status code, but I'd prefer to return the real error code (for SEO and such).</p>\n"},{"tags":["c#","asp.net-mvc","razor","asp.net-mvc-4","form-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13248352,"title":"How to show validation message in mvc4 razor","body":"<p>I am newbie in MVC Razor and I want to implement validation message on textboxes. Here I'm creating some textbox dynamically as follows:</p>\n\n<p><strong>View Code:</strong></p>\n\n<pre><code>foreach (var items in (IEnumerable&lt;System.Data.DataRow&gt;)Model.UsersOfList)\n{\n\n  @Html.TextBoxFor(m =&gt; m.LoginNameOfLoginInfoTab, new { @class = \"textBox_LoginInfoAndPermission\", @value = (Model.LoginNameOfLoginInfoTab = items[\"UserName\"].ToString()), @id = (\"txtUserLoginName\" + Model.UsernameOfLoginInfoTab.Trim()) })\n\n  @Html.ValidationMessageFor(m =&gt; m.LoginNameOfLoginInfoTab, null, new { @class = \"ErrorMessage\" })\n\n  @Html.TextBoxFor(m =&gt; m.UsernameOfLoginInfoTab, new { @class = \"textBox_LoginInfoAndPermission\", @value = (Model.UsernameOfLoginInfoTab = items[\"FirstName\"].ToString()), @id = (\"txtUserName\" + Model.UsernameOfLoginInfoTab.Trim()) })\n\n  @Html.ValidationMessageFor(m =&gt; m.UsernameOfLoginInfoTab, null, new { @class = \"ErrorMessage\" })\n\n\n}\n</code></pre>\n\n<p>in the module I've written code for validation as follows:</p>\n\n<pre><code>[Required (ErrorMessage=\"*\")]\n    public string UsernameOfLoginInfoTab\n    {\n        get;\n        set;\n    }\n\n\n   [Required(ErrorMessage = \"*\")]\n    public string LoginNameOfLoginInfoTab\n    {\n        get;\n        set;\n    }\n</code></pre>\n\n<p>Now when all textboxes has been created and when one validation message is displaying for first loop iteration textbox then it will automatically displaying in front of another textbox too which is created on second loop iteration. </p>\n\n<p>Please tell me whats going wrong. </p>\n"},{"tags":["c#","asp.net-mvc","delete","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13249039,"title":"Web API Delete Method not working","body":"<p>Calling a DELETE method Web API is not reaching the server. After searching all over the web for similar issues non have worked for me.\nBelow is a brief of my code across my solution.</p>\n\n<p><strong>Web API:</strong></p>\n\n<pre><code>    [AuthorizeService]\n    [HttpDelete]\n    public HttpResponseMessage Delete(Int32 id)\n    {\n        String username = User.Identity.Name;\n        this._clientDataManager.DeleteRestaurant(id,username);\n\n        return new HttpResponseMessage(HttpStatusCode.OK);\n    }\n</code></pre>\n\n<p><strong>Ajax Call:</strong></p>\n\n<pre><code>$.ajax({\n    url: 'localhost:53378/api/RestaurantWebAPI/1135',\n    type: \"DELETE\",\n    statusCode: {\n        200: function (data) {\n            //success\n        }\n    }, beforeSend: setHeader\n});\n</code></pre>\n\n<p><strong>Web.Config:</strong></p>\n\n<pre><code>&lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n    &lt;/modules&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n    &lt;handlers&gt;\n        &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" /&gt;\n        &lt;remove name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" /&gt;\n        &lt;remove name=\"ExtensionlessUrlHandler-Integrated-4.0\" /&gt;\n        &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_32bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness32\" responseBufferLimit=\"0\" /&gt;\n        &lt;add name=\"ExtensionlessUrlHandler-ISAPI-4.0_64bit\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" modules=\"IsapiModule\" scriptProcessor=\"%windir%\\Microsoft.NET\\Framework64\\v4.0.30319\\aspnet_isapi.dll\" preCondition=\"classicMode,runtimeVersionv4.0,bitness64\" responseBufferLimit=\"0\" /&gt;\n        &lt;add name=\"ExtensionlessUrlHandler-Integrated-4.0\" path=\"*.\" verb=\"GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS\" type=\"System.Web.Handlers.TransferRequestHandler\" preCondition=\"integratedMode,runtimeVersionv4.0\" /&gt;\n    &lt;/handlers&gt;\n\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p>Appreciate any help. \nThanks </p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13248609,"title":"MVC- Model Binding on a Complex Type","body":"<p>If I have a Model like this:</p>\n\n<pre><code>public class Search\n{\n    public int Id { get; set; }\n    public string UserDefinedName { get; set; }\n    public SearchAge Age { get; set; }\n    public virtual ICollection&lt;SearchBachelors&gt; Bachelors { get; set; }\n}\n</code></pre>\n\n<p>And I render the partial view for Age property dynamically using something like this:</p>\n\n<pre><code>@Ajax.ActionLink(\"Age\", \"SearchAge\", new AjaxOptions { UpdateTargetId = \"search-stage\", InsertionMode = InsertionMode.InsertAfter })\n</code></pre>\n\n<p>That partial view looks like this:</p>\n\n<pre><code>@model HireWireWeb.Models.Campaign.Search.Search\n&lt;div&gt;\n    @Html.DropDownListFor(m =&gt; m.Age.MaximumAge, HireWireWeb.Models.Constants.SLIST_AGE_LIST)\n    @Html.DropDownListFor(m =&gt; m.Age.MinimumAge, HireWireWeb.Models.Constants.SLIST_AGE_LIST)\n&lt;/div&gt;\n</code></pre>\n\n<p>(Note that I'm not passing \"SearchAge\" as the model here, but rather it's parent, \"Search\" since it's only how I can get the \"SearchAge\" values posted on form submit, under the rendered \"Search\" Form) - <a href=\"http://stackoverflow.com/questions/6440693/asp-net-mvc-model-binding-complex-type\">According to this Answer</a></p>\n\n<p>My question is, how can I do the same thing with the partial view for \"Bachelors\" property, since it's an ICollection?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13249155,"title":"Refresh User Control in MVC","body":"<p>I have 3 user controls in an aspx page in my MVC application. \ni bind data from DB from one controller.</p>\n\n<p>on the selection of \"Filter / Status\" i want to bind data (refresh) to \"List\" user control with out refreshing \"Filter &amp; Status\" user controls.</p>\n\n<p>below are my user controls in aspx page.\nplease help me how to refresh part of the page/user control.</p>\n\n<p>i have tried by returning only \"ListView\" View data. but its searching for the other 2 views &amp; throwing exception.</p>\n\n<pre><code>          &lt;td&gt;\n                &lt;%Html.RenderPartial(\"Filter\", ViewData[\"FilterView\"]); %&gt;\n            &lt;/td&gt;\n\n            &lt;td valign=\"top\" width=\"15%\"&gt;\n                &lt;%Html.RenderPartial(\"Status\", this.ViewData[\"StatusView\"]); %&gt;\n\n            &lt;/td&gt;\n            &lt;td valign=\"top\" width=\"85%\"&gt;\n\n                &lt;%Html.RenderPartial(\"List\", this.ViewData[\"ListingView\"]); %&gt;\n\n            &lt;/td&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","security","authentication","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13249134,"title":"Performing custom authentication with authenticated domain users","body":"<p>I am aware this has been asked ad-infinitum but I am bing overwhelmed with solutions and nothing seems to work.</p>\n\n<p>My problem is a common one but I can't seem to get it to work or I am missing something.</p>\n\n<ul>\n<li>ASP.NET MVC4 </li>\n<li>Windows Authentication with User list and roles in DB</li>\n<li>Intranet website</li>\n</ul>\n\n<p>All employees are on the same domain so with Windows authentication, they are all <code>IsAuthenticated = true;</code> but only some are allowed to use this website. Those users are in a database with a list of roles so I take the domain Id of the current user, check if it exists in the db. If not then I set <code>IsAuthenticated</code> to false and route to appropriate page. If user exists I retrieve user details and want to se the <code>HttpContext.Current.User</code> to my custom Principal. So I need custom authentication and authorization. I want to performa authentication against the db once and only once.</p>\n\n<p>After authentication I will be performing authorization on a per controller, per action basis.</p>\n\n<p>I've read a <em>lot</em> online and can't seem to see the wood for the trees.</p>\n\n<p>Currently I have a custom AuthorizeAttribute overriding AuthorizeCore, I hit the db, do my authentication, then set tje HttpContext.Current.User to my custom Principal but on subsequent requests, I can't access this custom Principal, only the windowsPrincipal (because all users are on the same domain and are authenticated).</p>\n\n<pre><code>override protected bool AuthorizeCore(HttpContextBase httpContext_)\n{\n    var authorized = base.AuthorizeCore(httpContext_);\n\n    if(!authorized) { return false; }\n\n    // authenticate against the db\n    // CurrentPrincipal is a static property returning Thread.CurrentPrincipal\n    // subsequent requests return null for this CurrentPrincipal ??\n    if (MyPrincipal.CurrentPrincipal == null)\n    {\n        var cachedUser = new MyEFContext().Users\n            .Where(user_ =&gt;\n                user_.ADName == HttpContext.Current.User.Identity.Name &amp;&amp;\n                !user_.IsDeleted &amp;&amp;\n                !user_.IsDisabled)\n                .FirstOrDefault();\n\n        // SetCurrent is a static method \n        // It takes the cachedUser entity and creates a new MyCustom Principal with it\n        // and then sets the Thread.CurrentPrincipal\n        // and the HttpContext.Current.User to that custom Principal\n        MyPrincipal.SetCurrent(cachedUser);\n\n                    // below commented out but I have also tried the below\n                    //httpContext_.User = MyPrincipal.CurrentPrincipal;\n    }\n\n    // authorise\n    var isAllowed = false;\n    if (!string.IsNullOrEmpty(Roles))\n    {\n        isAllowed  = Roles == DSTPrincipal.CurrentPrincipal.AuthenticatedUser.Role;\n    }\n\n    return MyPrincipal.CurrentPrincipal != null \n        &amp;&amp; MyPrincipal.CurrentPrincipal.Identity.IsAuthenticated \n        &amp;&amp; (!string.IsNullOrEmpty(Roles) &amp;&amp; isAllowed);\n}\n</code></pre>\n\n<ol>\n<li>Where should I perform custom authentication against my db? I used to do it in Global.asax.cs or in a custom HttpModule using the AuthenticateRequest event.</li>\n<li>Is my custom AuthorizeAttribute the correct approach? Doing authenticationa and authorisation here doesn't feel right.</li>\n<li>I want to cache my custom principal so on subsequent calls I don't have to hit the db and I have access to other custom principal properties.</li>\n</ol>\n\n<p>Apologies if I am not coherent in my request. If you have any Qs then please let me know and I will try to improve my question.</p>\n\n<p>Thanks for any help and advice.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","wif"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1147,"score":3,"question_id":4751125,"title":"Microsoft.IdentityModel vs System.IdentityModel","body":"<p>I'm working on a claims-based authorization system using Forms Authentication and ASP.NET MVC 2. I see that one namespace \"Microsoft.IdentityModel\" provides a lot of the same things as the other \"System.IdentityModel\". </p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.identitymodel.claims.aspx\" rel=\"nofollow\">System.IdentityModel</a> </p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.aspx\" rel=\"nofollow\">Microsoft.IdentityModel</a></p>\n\n<p>Why do these 2 namespaces exist seperately, when the functionality appears to overlap?</p>\n"},{"tags":["asp.net","asp.net-mvc","data-binding","datagrid"],"answer_count":8,"favorite_count":11,"up_vote_count":17,"down_vote_count":0,"view_count":31501,"score":17,"question_id":471189,"title":"Data Grid in ASP.NET MVC","body":"<p>Is it possible to use a datagrid control in a mvc \"view\"?</p>\n\n<p>How would I bind it to a datasource?</p>\n"},{"tags":["asp.net-mvc","html5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13247896,"title":"how to get values in checkbox","body":"<p>I have 4 checkboxes. I want when I update the page the checkboxes is populating the values from database.</p>\n\n<p>My code is</p>\n\n<pre><code>        &lt;div class=\"editor-field\"&gt;\n        &lt;%: Html.CheckBox(\"Any\")%&gt; Any  \n        &lt;%: Html.CheckBox(\"Contract\")%&gt; Contract  \n        &lt;%: Html.CheckBox(\"PartTime\") %&gt;Part Time\n        &lt;%: Html.CheckBox(\"FullTime\") %&gt;Full Time\n        &lt;%: Html.CheckBox(\"WorkFromHome\") %&gt;Work From Home\n        &lt;/div&gt;\n</code></pre>\n\n<p>Help me from out this problem..</p>\n"},{"tags":["asp.net-mvc","session","authentication","asp.net-membership"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":13170618,"title":"MVC save a token in session","body":"<p>I am calling a service, and I need to pass the user's permanent security token with every request I make.  </p>\n\n<p>In order to do that, I've added this method to my base controller class:  </p>\n\n<pre><code>protected UserData getUsr()\n{\n        try\n        {\n            UserData usr = new UserData();\n            usr.SecurityToken = Session[\"secToken\"].ToString();\n\n            MembershipUser mvcUser = Membership.GetUser(HttpContext.User.Identity.Name);\n            usr.Id = (int)mvcUser.ProviderUserKey;\n\n            return usr;\n        }\n        catch (Exception ex)\n        {\n            log.Debug(\"Could not create usr object\", ex);\n            throw new Exception(\"Could not authenticate\");\n        }\n    }\n</code></pre>\n\n<p>This issue here is that sometimes the User.Identity data out-lasts the session data, causing weird bugs to happen with the user seeing they are logged in but then their requests failing.  </p>\n\n<p>Is there a better way to store this token/can I store it in such a way that it will expire whenever the User.Identity object expires? </p>\n\n<p>Also, if anyone knows of some good basic understanding examples/documentation for HttpContext and MVC authorize filters that would be great.</p>\n"},{"tags":["c#","html","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13246090,"title":"AutoCompleteFor maxlength not working","body":"<p>I am trying to set maxLength for HTML autoComplete as follows :  </p>\n\n<pre><code>&lt;%= Html.AutoCompleteFor(model =&gt; model.FirstName, controller: \"abc\", parentId: \"name\", htmlAttributes: new {@maxlength = 100, @onkeypress = \"return allowAlphaNumericAndApostrophe(event);\" })%&gt; \n</code></pre>\n\n<p>But autoComplete accepts more than 100 characters.  </p>\n"},{"tags":["jquery","asp.net-mvc","ajax","jquery-ui","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1062,"score":0,"question_id":4844824,"title":"asp.net MVC- How to get jQuery working after ajax calls","body":"<p>Ok getting my feet wet with mvc. I am trying to build a user profile type page. The page is made up of several sections, each loaded via a partial view.</p>\n\n<p>I want to be able to edit each section individually inside of an jQuery-UI modal dialog. I have this all working properly(incduding loading the Edit views via ajax into the modal and submitting the changes.)</p>\n\n<p>My problem is that after any ajax call my jQuery-UI dialogs stop working so I am unable to close or open a dialog. </p>\n\n<p>I can, of course, fix things like button clicsk with the .live method but I cant figure out the best way to get the jQuery-UI items to continue working.</p>\n\n<p>What is the best way to go about this? I guess I am confused as to what happens to previously loaded jQuery plugins after an ajax call. Should I be able to reference elements on my ajax loaded content from my main page?</p>\n\n<p><strong>EDIT:</strong>\nOk...heres some code to show whats happening....</p>\n\n<p>user click the edit button on the user info section</p>\n\n<pre><code>$('#editInfo').live(\"click\", function () {\n        dialogInit(450, 550, 'User Information');\n        $('#dialog').dialog('open')\n        $.ajax({\n            type: 'GET',\n            url: '../info/edit',\n            data: {},\n            success: function (response) {\n                $('#dialog').html(response); //loads the partial edit view into the dialog div...works fine to here.\n\n            }\n        });\n        return false;\n    });\n</code></pre>\n\n<p>After this happens I have a modal on the screen with a save button. When the save button is clicked I post my ajax form which calls this JS function on success...</p>\n\n<pre><code>function infoUpdate(response) {\n    dialogInit(450, 550, 'User Information');\n    $('#dialog').dialog('close');\n    $('#info').html(response);\n}\n</code></pre>\n\n<p>This loads the new User info partial view into the appropriate div on the main page...works fine...</p>\n\n<p>The problem here is that the dialog is not closed...so the reference to it seems to be lost even though I am reinitializing it with my dialogInit function...which looks like this...</p>\n\n<pre><code>function dialogInit(height, width, title) {\n    $('#dialog').dialog({\n        autoOpen: false,\n        modal: true,\n        draggable: false,\n        resizable: false,\n        height: height,\n        width: width,\n        title: title\n    });\n}\n</code></pre>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>The above code also causes my ajax form to be posted multiple times...an additional time every time I click the submit button...not good</p>\n"},{"tags":["asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13247714,"title":"jqGrid page return null","body":"<p>i have problem with jqGrid and dynamical data binding. \nThe problem is, that I allways get Null for parameter page. I am working with MVC3 and jqGrid 4.4.1.</p>\n\n<pre><code> var dataToSend = {\n            mrpId: selPRid,\n            mrpFilter: cookMainFilter,\n            divId: randomId,\n            chartId: chartId\n        };\n\n        $(\"#gridMeasurementsTableView\" + randomId).jqGrid({\n            url: '/DataMonitor/CreateMeasurementTableView/',\n            datatype: \"json\",\n            mtype: 'POST',\n            postData: $.toDictionary(dataToSend),\n            jsonReader : {\n                root: \"rows\",\n                page: \"page\",\n                total: \"total\",\n                records: \"records\",  \n                repeatitems: false,\n                cell: \"cell\",\n                id: \"id\" \n               },  \n            colNames: ['Date', 'Value'],\n            colModel: [\n                { name: 'Timestamp', index: 'Timestamp', width: 280, \n                    formatter: function (cellvalue, options, rowObject) {\n                            return new Date(parseInt(cellvalue.substr(6, cellvalue.length - 8), 10));\n                        }  \n                },\n                { name: 'Value', index: 'Value', width: 200, align: 'center' }  \n            ],\n            loadui: \"disable\",\n            loadtext: \"Loading\",\n            viewrecords: true,\n            height: \"100%\",\n            caption: \"Measurements2\",\n            pager: $(\"#gridpager\" + randomId),\n            rowNum: 10,\n            sortname: 'Value',\n            sortorder: \"asc\",\n            rowList: [10, 50, 100]\n        });\n</code></pre>\n\n<p>and function for getting data is define like this:</p>\n\n<pre><code> public ActionResult CreateMeasurementTableView(string sidx, string sord, int page, int rows, int mrpId, FilterMRPParameters mrpFilter, string divId, string chartId)\n</code></pre>\n\n<p>br,\nJan</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","exam","microsoft-certifications"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13246567,"title":"New MVC certification 70-486","body":"<p>i was wondering if anyone had done the exam <a href=\"http://www.microsoft.com/learning/en/us/exam.aspx?id=70-486\" rel=\"nofollow\">70-486</a> or know if there are any materials available for help with studying. It is a fairly new exam been out a month, and there seems to be few resources with regards to this exam. i.e. practice tests or specifically targeted literature. Often the community generates a reference list of articles which cover the skill requirements listed on the exam.</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13247633,"title":"how to add a string after @var in razor engine (ASP MVC)","body":"<p>i have a problem with my code in a ASP MVC app.</p>\n\n<p>I use the razor engine to write a var like:</p>\n\n<pre><code>@var\n</code></pre>\n\n<p>but now i need to add some text directly after the var:</p>\n\n<pre><code>@varMyText\n</code></pre>\n\n<p>but this is not working, only with a whitespace:</p>\n\n<pre><code>@var MyText\n</code></pre>\n\n<p>how to make this without a whitespace?</p>\n"},{"tags":["javascript","asp.net-mvc","bundle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13246327,"title":"ASP.NET ScriptBundle does not work with .min.js?","body":"<p>I can successfully include jquery library with ScriptBundle from ASP.NET MVC by using below </p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\"~/Scripts/jquery-1.7.1.js\"));\n</code></pre>\n\n<p>However, If I changed to the minimized library, I could not get it from browser</p>\n\n<pre><code>bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\"~/Scripts/jquery-1.7.1.min.js\"));\n</code></pre>\n\n<p>anything wrong with the code?</p>\n"},{"tags":["c#","asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13247551,"title":"Instantiate an object in razor view Asp.net Mvc 4","body":"<p>I have a razor view strongly bound to a viewmodel:</p>\n\n<pre><code>@model MyNamespace.MyViewModel\n</code></pre>\n\n<p>I want to make an instance of another viewmodel in the same view page and use it:</p>\n\n<pre><code>@test = new MyNamespace.AnotherViewModel();\n\n@test.SomeAction();\n</code></pre>\n\n<p>I receive compilation error:</p>\n\n<pre><code>The name 'test' does not exist in the current context\n</code></pre>\n\n<p>I am very new to asp.net mvc and was not able to make it work. Any help will be appreciated. Thanks! </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":8,"up_vote_count":17,"down_vote_count":0,"view_count":951,"score":17,"question_id":10498135,"title":"Last-Modified Header in MVC","body":"<p>I have recently come across the Last-Modified Header.  </p>\n\n<ul>\n<li>How and where can I include it in MVC? </li>\n<li>What are the advantages of including it?</li>\n</ul>\n\n<p>I want an example how last modified header can be included in an mvc project, for static pages and database queries as well?</p>\n\n<p>Is it different from outputcache, if yes how? </p>\n\n<p>Basically, I want the browser to clear the cache and display the latest data or pages automatically, without the need for the user to do a refresh or clearing the cache.</p>\n"},{"tags":["mysql","asp.net-mvc","authentication","asp.net-membership"],"answer_count":4,"favorite_count":7,"up_vote_count":9,"down_vote_count":1,"view_count":3370,"score":8,"question_id":2038993,"title":"ASP.NET Membership/Role providers for MySQL?","body":"<p>I am not at all familiar with ASP.NET membership/roles.  This is my first time using it, and my first time trying ASP.NET MVC.  When I create my first project for MVC, it gives me a lovely template to create an account.  I was excited to see that I did not have to do this manually.  However, it failed because it cannot connect to SQL Server.  I do not have SQL Server, I have MySQL.  Is there any easy way I can get this system to use MySQL instead, or will I have to create my own authentication? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","maproute"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13238474,"title":"MapRoute in mixed web forms/MVC app","body":"<p>I have an older web-form app and now I am trying to add new pages using MVC.\nIt all seems to work just fine except one thing:\nThe application's default page (<code>login.aspx</code>) is a web form.\nWhen user hit link <code>www.mysite.com</code>, instead of opening <code>www.mysite.com/login.aspx</code>, the site immediately goes to route specified in global.aspx as </p>\n\n<pre><code>routes.MapRoute(\"FrontLine\", \"{controller}/{action}/{id}\", \n            new { controller = \"FrontLine\", action = \"QuickView\", id = \"\" });\n</code></pre>\n\n<p>So, the question is how to make <code>login.aspx</code> a default page?<br>\nIs it possible to do without converting  <code>login.aspx</code> to a MVC view and adding corresponding controller?</p>\n"},{"tags":["c#","asp.net-mvc","login","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13241319,"title":"How to login using ASP.NET MVC4?","body":"<p>Here are some bits of code from my attempt. It does not work; after \"logging in\", the user isn't redirected to the home/index page, but the login page just reloads.</p>\n\n<p>Web.config:</p>\n\n<pre><code>&lt;authentication mode=\"Forms\"&gt;\n  &lt;forms loginUrl=\"~/Account/Login\" /&gt;\n&lt;/authentication&gt;\n\n...\n\n&lt;defaultDocument&gt;\n  &lt;files&gt;\n    &lt;add value=\"~/Account/Login\"/&gt;\n  &lt;/files&gt;\n&lt;/defaultDocument&gt;\n</code></pre>\n\n<p>Controllers/AccountController.cs:</p>\n\n<pre><code>public class AccountController : Controller\n{\n    //\n    // GET: /Account/Login\n    public ActionResult Login()\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>Views/Account/Login.aspx:</p>\n\n<pre><code>&lt;asp:Login ID=\"login\" runat=\"server\" DestinationPageUrl=\"~/Views/Home/Index.aspx\"&gt;\n    ...\n&lt;/asp:Login&gt;\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","kendo-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13247577,"title":"Line break in category label of kendo-ui chart","body":"<p>I have a chart where the labels contain two parts, a name an a number.\nI want the number to appear below the name, illustrated by the <code>&lt;br/&gt;</code> tag:</p>\n\n<p><img src=\"http://i.stack.imgur.com/jA8p4.png\" alt=\"line break\"></p>\n\n<p>I load the contents of the chart, and set the label in my controller:\n<img src=\"http://i.stack.imgur.com/RrT1t.png\" alt=\"label\"></p>\n\n<p>When i try to use a template on the label, the text after the line break appears at the bottom of the chart along with the rest of the text of the chart:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ONidt.png\" alt=\"enter image description here\"></p>\n\n<p>javascript code:</p>\n\n<pre><code>$(\"#chart1\").kendoChart({\n        theme: \"BlueOpal\",\n        title: { text: \"My reported hours\" },\n        legend: { position: \"bottom\" },\n        seriesDefaults: { type: \"column\" },\n        dataSource: {\n            transport: {\n                read: {\n                    url: dataUrl,\n                    dataType: \"json\"\n                }\n            }\n        },\n        series: [{ field: \"SeriesField\" }],\n        categoryAxis: {\n            field: \"CategoryAxis\",\n            labels: {\n                rotation: 0,\n                template: \"#=value#&lt;br/&gt;newline\"\n            },\n\n        },\n        valueAxis: {\n            labels: { format: \"{0}h\" },\n            min: 0\n        },\n        tooltip: {\n            visible: true,\n            template: \"#= formatDecimal(value) #&lt;br/&gt; newline\"\n        },\n        seriesClick: onSeriesClick\n    });\n</code></pre>\n\n<p>How do i make the line break work?</p>\n"},{"tags":["c#","asp.net-mvc","extjs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13247295,"title":"Ext Form with fileuploadfield (response after submit)","body":"<p>Can`t really understand where is a mistake.. </p>\n\n<p>I have a form with fileuploadfield. Request is sended good, action on my controller gets all params, works with them, and sends response to browser. But in html page, after submiting the form, always fires FAILURE event, and never SUCCESS. </p>\n\n<p>Client Side Code</p>\n\n<pre><code>Ext.create('Ext.form.Panel', {\n        renderTo: 'Container',\n        bodyPadding: '10 10 0',\n        items: [\n        {\n            xtype: 'form',\n            width: 300,\n            border: false,\n            fileUpload: true,\n            items: [\n            {\n                xtype: 'combobox',\n                id: 'PayTypes',\n                width: 215,\n                store: PayTypesStore,\n                valueField: 'id',\n                displayField: 'Name',\n                editable: false,\n                name: 'id'\n            }\n            ,\n            {\n                xtype: 'filefield',\n                id: 'form-file',\n                name: 'file',\n                buttonText: '',\n                buttonConfig: {\n                    iconCls: 'upload-icon'\n                }\n            }\n            ],\n            buttons: [\n            {\n                text: 'Send',\n                handler: function () {\n                    var form = this.up('form').getForm();\n                    if (form.isValid()) {\n                        form.submit({\n                            url: 'UploadFile',\n                            waitMsg: 'Uploading your photo...',\n                            success: function (fp, o) {\n                                console.log(\"success\");\n                                msg('Success', 'Processed file on the server');\n                            },\n                            failure: function (form, action) {\n                                console.log(action);\n                                Ext.Msg.alert('Failed', action.result ? action.result.message : 'No response');\n                            }\n                        });\n                    }\n                }\n            }\n            ]\n        }\n        ]\n    });\n</code></pre>\n\n<p>Server Side Code:</p>\n\n<pre><code>public JsonResult UploadFile(HttpPostedFileWrapper file, int id)\n    {\n        var response = Json(new { success = true });\n        response.ContentType = \"text/html\";\n\n        return Json(response);\n    }\n</code></pre>\n\n<p>Response, recieved on the client side:</p>\n\n<pre><code>{\"ContentEncoding\":null,\"ContentType\":\"text/html\",\"Data\":\"success\":true},\"JsonRequestBehavior\":1,\"MaxJsonLength\":null,\"RecursionLimit\":null}\n</code></pre>\n\n<p>What i need to fix in my code to get SUCCESS event after sumniting form?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010","using"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13247210,"title":"Can't find the \"Using\" options in asp.net","body":"<p>This is probably a silly question, but I have looked and haven't found a straight forward answer for it. I started learning ASP.net recently, and started following a tutorial. i start by creating a project, an MVC2 web application, but when it starts, i cant find the \"using system;\" , \"using system.web;\" etc...What am i doing wrong?</p>\n\n<p>Edit: I'm using Visual Studio 2010 Ultimate</p>\n"},{"tags":[".net","asp.net-mvc","vb.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13243727,"title":"Print Text on Submit - VB.NET 2012, MVC 4, Visual Studio 2012","body":"<p><strong>The Tools Used:</strong> VB.NET 2012, MVC 4, Visual Studio 2012</p>\n\n<h2>The Controller: SubmitFormController.vb</h2>\n\n<pre><code>Namespace MvcApplication19\n    Public Class UserNamePrintOutSubmitClassController\n        Inherits System.Web.Mvc.Controller\n\n        ' This method will handle GET\n        Function Technology() As ActionResult\n            Return View(\"Technology\")\n        End Function\n\n        ' This method will handle POST\n        &lt;HttpPost&gt;\n        Function UserNamePrintOut() As ActionResult\n            ' Do something\n            Response.Write(\"Hello \" &amp; Request.QueryString(\"UserName\") &amp; \"&lt;br /&gt;\")\n            Return View()\n        End Function\n    End Class\nEnd Namespace\n</code></pre>\n\n<h2>The View: Technology.vbhtml</h2>\n\n<p><strong>The URL:</strong> <code>http://localhost/Home/Technology/</code></p>\n\n<pre><code>&lt;form action=\"\" method=\"post\"&gt;\n    &lt;input type=\"text\" name=\"UserName\" /&gt;\n    &lt;input type=\"submit\" name=\"UserName_submit\" value=\"Print It Out!\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<h2>The Question</h2>\n\n<p>I do not have a model in this example. The intention is to have the <code>UserName</code> submitted with the submit button and have it printed on the screen, <code>on page load</code>. Which means, the <code>UserName</code> should get passed to the <code>action method</code> and get printed on the screen.</p>\n\n<p>I am having no error messages, nevertheless, the <code>UserName</code> does not get printed on the screen, perhaps, somebody, can have look at the code above.</p>\n\n<p>I have been trying this with tutorials, which are often in C#. My background has been PHP, and I still tend to think in terms of \"echo\" - yet, I am getting used to MVC 4.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13236587,"title":"persisting data in mvc","body":"<p>I am beginning to use ASP.NET MVC and i have a navigation which is build with javascript and css. The Navigation is collapsable, so that the menu only takes like 1cm when its collapsed.\nMy problem is that i need to change the state (collapsed/expanded) by clicking on a button and setting a css class on the menu.\nBut when i click on a menu-entry the page gets reloaded  and so the css-class gets lost too.</p>\n\n<p>How can i persist such data correctly? In normal views i could pass it to my viewmodel, but how can i do this in my _layout.cshtml? (i cant set a model there, right?)</p>\n\n<p>What i tried was using the jquery plugin \"cookies\" but it only works sometimes (i think the problem is somewhere within the options of the plugin - maybe i have to set a domain or something...). Furthermore it would be nice if the solution wouldnt require the user to allow cookies.</p>\n\n<p>Im glad for any help!</p>\n\n<p>edit:\nok, what i tried now is:</p>\n\n<p>//the view</p>\n\n<pre><code>@model NHibernateSimpleDemoMVC.Models.MenuModel\n....\n&lt;a id=\"togglemenu\" /&gt;\n\n@Html.HiddenFor(x =&gt; x.IsCollapsed, new { @id = \"collapsedHdn\" })\n\n...\n\n&lt;script&gt;\njQuery('#togglemenu').click(\n    function () {\n        if (jQuery(\"#collapsedHdn\").val() == \"true\") {\n            jQuery(\"#collapsedHdn\").val(\"false\")\n        } else {\n            jQuery(\"#collapsedHdn\").val(\"true\")\n        }\n    });\n\njQuery('#nav &gt; li').click(\n    function () {\n        var name = jQuery(this).attr(\"id\");\n        jQuery(\"#selectedHdn\").val(name);\n    }\n    );\n\n\njQuery(document).ready(function () {\n    //set selected node\n    if (jQuery(\"#collapsedHdn\").val() == \"true\") {\n       ... collapse ...\n    }\n     if (jQuery(\"#selectedHdn\").val() != \"\") { //this is always empty (\"\")\n        var name = \"#\" + jQuery(\"#selectedHdn\").val();\n        jQuery(name).addClass(\"current\");\n    }\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p>//the model</p>\n\n<pre><code>public class MenuModel\n{\n    public bool IsCollapsed { get; set; }\n    public string SelectedEntry { get; set; }\n\n    public MenuModel(){\n        IsCollapsed = false;\n        SelectedEntry = \"\";\n    }\n}\n</code></pre>\n\n<p>... my hidden fields seem to not keep their value after the postback...</p>\n"},{"tags":["c#","asp.net-mvc","validation","session","hyperlink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13245869,"title":"Submit Page to Privious Page visited","body":"<p>I have Contact Us link on footer of my MVC Application.</p>\n\n<p>On calling page contains form to submit feedback..</p>\n\n<p>when valid form will submit the i want to redirect to the page from which that Contact Us link is called.</p>\n\n<p>How will maintain that privious link. I can not make use of history becuase it contains the validations if the form fails it show error and after submiting valid form then privious history is same i.e contact us form.</p>\n\n<p>Should I use session to store the privious form url or Is there any another way to do this?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13022221,"title":"Force case-sensitive routing in ASP.NET MVC","body":"<p>This question has been asked in a similar but not identical fashion (and not resolved to my satisfaction) <a href=\"http://stackoverflow.com/questions/878578/how-can-i-have-lowercase-routes-in-asp-net-mvc\">previously</a> on <a href=\"http://stackoverflow.com/questions/170900/how-can-i-avoid-duplicate-content-in-asp-net-mvc-due-to-case-insensitive-urls-an\">Stack Overflow</a> and <a href=\"http://blog.kurtschindler.net/post/lowercase-urls-with-aspnet-mvc\" rel=\"nofollow\">elsewhere</a>.</p>\n\n<p>Coming from a linux-world, I want to use ASP.NET MVC but avoid identical but differently-cased routes from resolving to the same page. I do <em>not</em> want to force all routes to be 100% lowercase.</p>\n\n<p>e.g. I want <code>/Home/Something</code> to be a valid route and <code>/Home/somethingElse</code> to also be a valid route, but not <code>/Home/something</code> or <code>/home/somethingelse</code>, given two functions called <code>Something</code> and <code>somethingElse</code> in the <code>HomeController</code>.</p>\n\n<p>I can't find any way of doing this from within the <code>RegisterRoutes</code> function, but maybe I'm missing something obvious? I can answer this easily enough by adding code to each Controller function, but I'm obviously trying to avoid doing that.</p>\n\n<p>Optimally, the solution would involve catching <em>all</em> permutations of a particular route, then 301 redirecting any that do not exactly match the case of the controller's function.</p>\n"},{"tags":["asp.net-mvc","rtf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3,"score":0,"question_id":13245765,"title":"open source controls to convert rich text formatted code to html markup","body":"<p>I am working on asp.net mvc. I am trying to display the rich text formatted content like,</p>\n\n<pre><code>    {\\rtf1\\ansi\\ansicpg1252\\uc1\\htmautsp\\deff2{\\fonttbl{\\f0\\\nfcharset0 Times New Roman;}{\\f2\\fcharset0 Tahoma;}}{\\colortbl\\red0\\green0\\blue0;\\red255\\green255\\blue255;}\\loch\\hi\nch\\dbch\\pard\\plain\\ltrpar\\itap0{\\lang1033\\fs24\\f2\\cf0 \\cf\n0\\ql{\\f2 {\\ltrch AMANDA WITH RC CALLED AND WANTED TO \nVERIFY THAT WE WERE AFFILIATED WITH SHAUN @ JAGGYS. LET HER KNOW WE \nWERE, SHAUN CALLED RC AS WELL TO VERIFY STATUS OF BD}\\li0\\ri0\\sa0\\sb0\\fi0\\ql\\par}\n    }\n    }\n</code></pre>\n\n<p>in the view. Actually this data could come from database table and i need to display it in the editor type control. so is there any open source controls that are able to display rich text format.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13245712,"title":"How to lock/unlock a user in MVC SimpleMembership","body":"<p>In SimpleMembership there isn't any column in the database for a user to be locked/unlocked.\nI basically need my administrator to enable or disable any user in my application.\nIs there any alternatives to that?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1633,"score":4,"question_id":4503365,"title":"ASP.NET MVC 3 - Add/Remove from Collection Before Posting","body":"<p>I have a model that contains a collection, such as this:</p>\n\n<pre>class MyModel\n{\n    public List&lt;MySubModel&gt; SubModels { get; set; }\n}</pre>\n\n<p>In the view, I want to dynamically add/remove from this list using Javascript before submitting. Right now I have this:</p>\n\n<pre>\n$(\"#new-submodel\").click(function () {\n    var i = $(\"#submodels\").children().size();\n    var html = '&lt;div&gt;\\\n                    &lt;label for=\"SubModels[' + i + '].SomeProperty\"&gt;SomeProperty&lt;/label&gt;\\\n                    &lt;input name=\"SubModels[' + i + '].SomeProperty\" type=\"textbox\" /&gt;\\\n                &lt;/div&gt;'\n    $(\"#submodels\").append(html);\n});\n</pre>\n\n<p>This works, but it's ugly. And, if I want to show those labels/textboxes for the existing items, there's no clean way to do that either (without duplicating).</p>\n\n<p>I feel like I should be able to use Razor helpers or something to do this. Any ideas? Help me stay DRY.</p>\n"},{"tags":["asp.net-mvc","n2","n2cms"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":823,"score":1,"question_id":4556390,"title":"N2Cms How to start","body":"<p>I have a static website and I want to use the N2 Cms + Asp.Net Mvc,\nI don't know how to start sorting thins up, when should I create a page, and when should I use a part, and what controllers should I make ?</p>\n\n<p>does any one have a blog or a tutorial?\nI saw their N2.Template project but it is too complicated,\nand lacks the documentation ?</p>\n"},{"tags":["asp.net-mvc","user-accounts"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":13204597,"title":"MVC 4 Edit User Profile","body":"<p>thanks for the support. I have read quite some time to find my answer but finally I decided to ask the question.</p>\n\n<p>I am using MVC4 and I have managed to create custome data fields for my user. I am very new to ASP, so i find it very difficult to code.</p>\n\n<p>I would like to make when I click the username on the default page instead of editing only the password, I would like to edit the inputted information by the user.</p>\n\n<p>This is not an admin but the user himself being able to edit.</p>\n\n<p>So my question is where should i edit this somwhere in the AccountController.cs I should extract the data and put it in a view and then how can i tell the view that the data can be edited and saved.</p>\n\n<p>I am confused with the model view controller although i have spent some time reading about it.</p>\n\n<p>Please help if you can. Regards</p>\n"},{"tags":["asp.net-mvc","vb.net"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13233018,"title":"IsNullOrEmpty Not Working","body":"<p>I have a null value in my database which gives me an error if I try perform any mathematical operations on it.  I tried putting this in my controller action:</p>\n\n<pre><code>If String.IsNullOrEmpty(item.Tbl_Food.Fiber_TD_g) Then\n            item.Tbl_Food.Fiber_TD_g = 0\nEnd If\n</code></pre>\n\n<p>This my model for the field:</p>\n\n<pre><code>Public Property Fiber_TD_g() As Nullable(Of Double)\n</code></pre>\n\n<p>However, it says \"Nullable object must have a value.\" on the <code>If String.IsNullOrEmpty(item.Tbl_Food.Fiber_TD_g) Then</code> line.  How can I check if the \"string\" (it's a double, not a string) is empty and default it to zero, properly?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tried a suggestion below, and I no longer get an error in my controller, but instead in my View.  It says, \"Nullable object must have a value.\" on the line <code>FiberTotal += item.Tbl_Food.Fiber_TD_g</code> in my view.</p>\n\n<pre><code>Dim food = db.Tbl_Food_Logs.Where(Function(x) x.FLog_Employee_ID = empId And x.FLog_Created_Date &gt;= date2 And x.FLog_Created_Date &lt; tomorrow)\n\nFor Each item In food\n\n    If IsDBNull(item.Tbl_Food.Fiber_TD_g) Then\n        item.Tbl_Food.Fiber_TD_g = 0\n    End If\n\nNext\nReturn View(food)\n</code></pre>\n"},{"tags":["sql","asp.net-mvc","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13243673,"title":"How to you implement the Like operator in ASP.NET MVC?","body":"<p>I'm still working on my autocomplete textbox using data from the databse (SQL) and I think I'm not getting any result for the textbox because there's something wrong or missing on my select statement here's how my current code looks like. This is my json code for the view:</p>\n\n<pre><code>       $(function () {\n        $(\"#autoCompleteText\").autocomplete({\n            source: function (request, response) {\n                var autoSearch = { searchText: $(\"#autoCompleteText\").val() };\n                $.ajax({\n                    type: \"POST\",\n                    traditional: true,\n                    url: \"/Products/jsonAutoComplete\",\n                    data: autoSearch,\n                    dataType: \"json\",\n                    success: function (data) {\n                        response(data.d);\n                    },\n                    error: function (result) {\n                        alert(\"Error\");\n                    }\n                });\n            },\n            delay: 0,\n            minLength: 2\n        });\n    });\n</code></pre>\n\n<p>I'm very sure that it works because whenever I run a breakpoint on my controller, the method jsonAutoComplete runs but the productName which is what I want to appear on the autcomplete, is always null. Here's my code with the select statement:</p>\n\n<pre><code>    public JsonResult jsonAutoComplete(string searchText)\n    {\n        JsonResult data= new JsonResult();\n        IList&lt;Products&gt; products = null; products = (from c in db.Products where c.CompanyId.Equals(companyId) &amp;&amp; (c.ProductName.Contains(\"'%\" + searchText + \"%'\")) select c).ToList();\nProducts prod = new Products();\n        int productId = prod.Id;\n        string productName = prod.ProductName;\n        data.Data = new { productId = productId, productName = productName };\n        return data;\n    }`\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","telerik-grid","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12355527,"title":"view to controller method","body":"<p>view to controller method</p>\n\n<pre><code>        .ClientEvents(events =&gt;\n        {\n            events.OnDataBinding(\"onDB\");\n        })\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-2","validation"],"answer_count":5,"favorite_count":5,"up_vote_count":9,"down_vote_count":0,"view_count":817,"score":9,"question_id":6395694,"title":".NET 4 MVC 2 Validation with annotations warning instead of error","body":"<p>I am using .NET 4 with MVC 2 for validating with Annotations. Is there a (simple) solution for giving back a <strong>warning</strong> instead of the <strong>error</strong>? So that I am able to get a green or yellow box with a message like \"you should not use this content, but you may\".</p>\n\n<p>Big thanks in advance! :)</p>\n\n<p><b>EDIT:</b><br>\nPlease observe that I am already able to throw out errors via <code>ErrorMessage</code> but I <i>additionally</i> want something like <code>WarningMessage</code> or <code>InfoMessage</code> so that the user only gets a warning but might proceed. Is there a solution for this?</p>\n\n<p>The Pseudocode would be:\n<i>(Please note the \"pseudo\", because <code>WarningMessage</code> is (unfortunately) not a valid class)</i></p>\n\n<pre><code>public class Person\n{\n  [StringLength(50)]\n  [Required(ErrorMessage = \"You MUST enter a name!\")]\n  public string Name { get; set; }\n\n  [Required(WarningMessage = \"It is recommended to fill out the age but you may leave it out)]\n  public int Age { get; set; }\n}\n</code></pre>\n\n<p>And <b>yes</b> I want to have this centrallized in my validation class - not somewhere in a .js-file.</p>\n"},{"tags":["jquery","asp.net-mvc","shopping-cart","sample"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1074,"score":3,"question_id":3200643,"title":"Good/Simple shopping cart example using asp.net mvc and jquery","body":"<p>Is there a Good/Simple shopping cart example using asp.net mvc and jquery? Any suggestion...</p>\n"},{"tags":["php","asp.net-mvc","codeigniter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":177,"score":1,"question_id":10263341,"title":"Link to a Controller function with parameter from a View (CodeIgniter)","body":"<p>Using CodeIgniter I am trying to create a link that the user can click within a view to show them the details of a record in my database.</p>\n\n<p>In ASP.NET MVC3 with C# I would do it with <code>@Html.ActionLink(\"Controller\", \"Action\", new { id = item.Id})</code></p>\n\n<p>This is my session controllers index() function</p>\n\n<pre><code>public function index()\n{\n        $data['sessions'] = $this-&gt;session_model-&gt;get_sessions();\n\n        $this-&gt;load-&gt;view('_header');\n        $this-&gt;load-&gt;view('session/index', $data);\n        $this-&gt;load-&gt;view('_footer');\n}\n</code></pre>\n\n<p>This is the index view it loads where I want to be able to click the link to go to enter() function</p>\n\n<pre><code>&lt;table&gt;\n\n&lt;th&gt;Session Name&lt;/th&gt;\n&lt;th&gt;Description&lt;/th&gt;\n&lt;th&gt;Host&lt;/th&gt;\n&lt;th&gt;&lt;/th&gt;\n\n&lt;?php foreach ($sessions as $session_item): ?&gt;\n    &lt;tr&gt;\n        &lt;td&gt; &lt;?php echo $session_item['sessionName'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;?php echo $session_item['sessionDesc'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;?php echo $session_item['adminName'] ?&gt; &lt;/td&gt;\n        &lt;td&gt; &lt;a id=\"enterSession\" href=&lt;?php echo site_url(\"session/enter\" + $session_item['id']) ?&gt; &gt;Enter&lt;/a&gt;&lt;/td&gt;\n\n    &lt;/tr&gt;\n&lt;?php endforeach ?&gt;\n</code></pre>\n\n<p></p>\n\n<p>The enter session points me to the url \"http://192.168.1.36/index.php/1\" (if the id of my item is 1) whereas I expect \"http://192.168.1.36/index.php/session/enter/1\"</p>\n\n<p>Any ideas on how I can make it call the enter() function also in the session controller (shown below)</p>\n\n<pre><code> public function enter($id) {\n\n        $this-&gt;load-&gt;view('_header');\n        $this-&gt;load-&gt;view('session/enter');\n        $this-&gt;load-&gt;view('_footer');\n    }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","partial-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13243582,"title":"asp.net-mvc jquery adding multiple number of partial views","body":"<p>My problem seems very common tio me, and I thought I can find my answer online, but I couldn't.\nI have a drop down list, and based on the selected value, I need to have multiple partial Views. (one selection can have none, the other one have 3, etc.)</p>\n\n<p>I have a partial View that gets a \"DriveDetail\" object.</p>\n\n<p>I need to load multiple number of these partial Views Dynamically using JQuery.</p>\n\n<p>So far I have</p>\n\n<pre><code>$.ajax({\n            url: \"TestInput/getTestStationInformation2/\" + testStation,\n            dataType: \"json\",\n            type: 'post',\n            success: function(data) {\n\n                for (var i = 0; i &lt; data.length; i++) {\n                    $('#driveDetailDiv').append(data[i]);\n                }\n\n            }\n        });\n</code></pre>\n\n<p>I can either return an IEnumerable or List of those Drives. </p>\n\n<pre><code>public JsonResult getTestStationInformation(long id)\n    {\n        IEnumerable&lt;DriveDetails&gt; aa = repository.listDriveInfo(id);\n        return Json(aa);\n    }\n\n    public JsonResult getTestStationInformation2(long id)\n    {\n        List&lt;PartialViewResult&gt; res = new List&lt;PartialViewResult&gt;();\n        List&lt;DriveDetails&gt; aa = repository.listDriveInfo(id).ToList();\n        for (int i = 0; i &lt; aa.Count(); i++)\n        {\n            res.Add(PartialView(\"DriveDetailsPartial\", aa[i]));\n        }\n\n        return Json( res);\n    }\n</code></pre>\n\n<p>but none of these work.</p>\n\n<p>I have </p>\n\n<pre><code> $.get('&lt;%= Url.Action(\"Details\",\"TestInput\", null) %&gt;', function(tmp) {\n                    $('#driveDetailDiv').append(tmp);\n                });\n</code></pre>\n\n<p>in my code, but instead of null, I need to send data[0], and get the partialView of data[0]. but I don't know how to send data[0]. When I try </p>\n\n<pre><code> new {id = data[0])\n</code></pre>\n\n<p>I get an error.</p>\n\n<p>and When I try to use the second Action which returns a list of partialViews, it doesn't show up when I try to append them.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13243739,"title":"ASP.Net MVC 4 not accepting hyphen in form input","body":"<p>I have a form with a text input defined as follows</p>\n\n<pre><code>    @using (Html.BeginForm()) {\n                    &lt;td align=\"left\" style=\"font-size:Medium;width:400px;\"&gt;@Html.TextBox(\"sn\", \"\", new { @style = \"font-size:Medium;width:400px;\", @class = \"fnTxtBox\"  })\n&lt;/td&gt;\n    }\n</code></pre>\n\n<p>The user needs to be able to include a hyphen ('-') in the text box, e.g. ##-######, but ASP.Net MVC doesn't just marks the textbox red if I try to include it, if I remove the hyphen the form get posted as normal.  Including hyphens as input is an absolute requirement by my client, is there an option to enable this? Why is the hyphen getting rejected??  Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13243264,"title":"How to set text box read only if it has value?","body":"<p>I want to  to set text box  read only if it has value in view in MVC.</p>\n\n<p>So I write </p>\n\n<pre><code> &lt;tr&gt;\n @if (model.first_name != \"\" ) { \n   &lt;td &gt;\n                @Html.LabelFor(model =&gt; model.first_name):\n            &lt;/td&gt;\n            &lt;td &gt;\n                @Html.TextBoxFor(model =&gt; model.first_name)\n                &lt;span class=\"required\"&gt;*&lt;/span&gt;\n                @Html.ValidationMessageFor(model =&gt; model.first_name)\n            &lt;/td&gt;\n@ else  \n  &lt;td &gt;\n  @Html.LabelFor(model =&gt; model.first_name):\n            &lt;/td&gt;\n            &lt;td &gt;\n                @Html.EditorFor(model =&gt; model.first_name)\n                &lt;span class=\"required\"&gt;*&lt;/span&gt;\n                @Html.ValidationMessageFor(model =&gt; model.first_name)\n            &lt;/td&gt;\n@}\n\n            &lt;td &gt;\n                @Html.LabelFor(model =&gt; model.first_name):\n            &lt;/td&gt;\n            &lt;td &gt;\n                @Html.EditorFor(model =&gt; model.first_name)\n                &lt;span class=\"required\"&gt;*&lt;/span&gt;\n                @Html.ValidationMessageFor(model =&gt; model.first_name)\n            &lt;/td&gt;\n        &lt;/tr&gt;\n</code></pre>\n\n<p>But is is not working..\nHow to slove it??\nHow can I do it??</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","reporting-services","reportingservices-2005"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":369,"score":0,"question_id":8059687,"title":"Using SSRS Report in MVC razor","body":"<p>Can any one tell whether MVC razor supports report viewer for rendering reports from ssrs.If yes then how any code snippet would help.\nI have seen on internet that there is workaround to include aspx view engine for rendering report ,but we don't want to use aspx view engine.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13243144,"title":"Uploading and storing videos for mvc website","body":"<p>I'm trying to come up with a way to allow a user to upload a video he or she has made to an application I'm working on. My question is how or what is the best way to do this. I've heard of people converting the video to binary then saving to db but I also heard it's not recommended to do this. How can I save these videos that are being uploaded. How does for example YouTube handle their videos? Any tips are appreciated thanks.</p>\n\n<p>Maybe this? </p>\n\n<pre><code>  System.Web.UI.WebControls.FileUpload\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","foreach"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13243016,"title":"Increase div id by 1 using jQuery","body":"<p>I would appreciate any and all help you can provide. I have searched high and low and have not been able to find a solution to what I think is probably a common issue. I am very new to ASP.NET MVC and jQuery so I may need a little extra hand holding. Here it goes...</p>\n\n<p>I have a table with many rows that is created by a foreach (ASP MVC 4). Each row has additional information that I would like to show / hide on click (contained in a ). </p>\n\n<p>For example:</p>\n\n<pre><code>====================================================================\n   | Ticket Number | Date Created | Description\n\n-    123456          11/02/2012     How do I...?\n      --- Additional Information ---\n      Assigned To: Joe\n      Notes: Blah, blah\n      --- End Additional Information ---\n+     123457          11/01/2012     When I click this I get....\n=====================================================================\n</code></pre>\n\n<p>When the user clicks the plus sign (I'm using an image), I want the Additional Information to expand and I want the plus image to change to a minus image.</p>\n\n<p>I have figured out how to change the image using an IF statement in jQuery. However, I can't quite figure out how to toggle the div properly. I have tried doing this using the following:</p>\n\n<pre><code>   $(\"button\").click(function () {\n       $(this).next(\"div.toggleMe\").toggle(1000);\n   });\n</code></pre>\n\n<p>As you can see, the jQuery expands the next div that it finds. The problem with this is that I can't put it in the same row as the table data. It just doesn't see the next div for some reason.</p>\n\n<p>What I am looking for is a way to increase the id, or class of the div by one so that I can use something like the following jQuery function:</p>\n\n<pre><code>    function slideonlyone(thechosenone) {\n         $('.newboxes2').each(function(index) {\n              if ($(this).attr(\"id\") == thechosenone) {\n               $(this).slideDown(200);\n              }\n              else {\n                   $(this).slideUp(600);\n              }\n         });\n    }\n\n&lt;table&gt;\n   &lt;tr&gt;\n      &lt;td&gt;\n         &lt;div style=\"border: 1px solid blue; background-color: #99CCFF; padding: 5px;\"&gt;\n            &lt;a id=\"myHeader1\" href=\"javascript:slideonlyone('newboxes1');\" &gt;slide this one only&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"newboxes2\" id=\"newboxes1\" style=\"border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px;\"&gt;Div #1&lt;/div&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n         &lt;div style=\"border: 1px solid blue; background-color: #99CCFF; padding: 5px;\"&gt;\n            &lt;a id=\"myHeader2\" href=\"javascript:slideonlyone('newboxes2');\" &gt;slide this one only&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"newboxes2\" id=\"newboxes2\" style=\"border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px;\"&gt;Div #2&lt;/div&gt;\n      &lt;/td&gt;\n      &lt;td&gt;\n         &lt;div style=\"border: 1px solid blue; background-color: #99CCFF; padding: 5px;\"&gt;\n            &lt;a id=\"myHeader3\" href=\"javascript:slideonlyone('newboxes3');\" &gt;slide this one only&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"newboxes2\" id=\"newboxes3\" style=\"border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px;\"&gt;Div #3&lt;/div&gt;\n      &lt;/td&gt;\n   &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>As you can see in the HTML, each div has a unique id. How do I create a unique id in a foreach loop? And, how do I get jQuery to see that unique id so that I can toggle the div?</p>\n\n<p>Thank you so much for any info you can provide!</p>\n"},{"tags":["asp.net-mvc","jquery-ui"],"answer_count":2,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":1350,"score":4,"question_id":4270666,"title":"How to call a JQuery UI Modal with MVC (CRUD)","body":"<p>I have a Car View (List.cshtml) that shows my Cars list... Id like to add a button/link:\n <strong>\"Add car...\"</strong></p>\n\n<p>That button must open my View (Create.cshtml) in a JQuery Modal UI...  </p>\n\n<p>How can I do that?</p>\n\n<p>Thanks</p>\n\n<p>Paul</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13235827,"title":"How to sort all dropdownLists by name in ASP.net MVC","body":"<p>Is it possible to automatically sort all dropdownLists in ASP.net MVC project?</p>\n\n<p>I don't want to go one by one and sort them explicitly. Is there a way to do this automatically on all dropdownLists in the project?</p>\n"},{"tags":["jquery","asp.net-mvc","google-ajax-api"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":6117,"score":4,"question_id":1380043,"title":"Is it ok to use google.setOnLoadCallback multiple times?","body":"<p>I'm building a site using ASP.NET MVC, and I have partial views that use jquery to do various things.  I was thinking of switching to google's ajax api and using their loader to load jquery.  However, I noticed that I would no longer be able to use $(document).ready() anymore because google's loader specifies a callback google.setOnLoadCallback().  </p>\n\n<p>This is a little bit of a problem for me because I have $(document).ready() in various partial views because they do different things specific to themselves that I don't want the parent view to be aware of.</p>\n\n<p>What I'm wondering is, can I specify multiple callbacks and just swap out the $(document).ready()'s with google.setOnLoadCallback(someUniqueCallbackFunction)?</p>\n\n<p>Would that be the ideal way to handle this situation or is there something else that is preferred?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13242224,"title":"Getting value from DropDownList in MVC3.. better way than binding the ID to another field?","body":"<p>I am wondering if there is another way to express the following bit of code. The code works as expected, but I have an issue with how it defines my naming conventions.</p>\n\n<pre><code>//Model.cs:\n[DisplayName(\"Device Manufacturer\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; DeviceManufacturer { get; set; }\npublic int SelectedManufacturerID { get; set; }\n\n//Model.ascx:\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedManufacturerID, new SelectList(Model.DeviceManufacturer, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>Now, whenever the selected list item is changed -- the new value is stored in SelectedManufacturerID. I am able to receive the value in my controller like so:</p>\n\n<pre><code>int selectedID = model.SelectedDataCenterID;\n</code></pre>\n\n<p><strong>However,</strong> I am unhappy with the fact that MVC gives my select list the ID 'SelectedManufacturerID' when it is not an ID field -- it is a select list. Clearly this is occurring to support the binding to the SelectedManufacturerID field.</p>\n\n<p>If I wish to work with my select list client-side, I now have code such as:</p>\n\n<pre><code>$('#SelectedManufacturerID').change(function(){\n    console.log(\"OnSelectedIndexChanged!\");\n});\n</code></pre>\n\n<p>This jQuery is very unclear. There is no indication that SelectedManufacturerID is a select DOM element. It seems impossible to have proper naming conventions using the MVC conventions at the top of this post. Does anyone else feel this way? Do I have other options?</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13242114,"title":"Cannot access to User.Identity under OnActionExecuting(ActionExecutingContext filterContext)","body":"<p>I am not sure what do I am missing but I really cannot refer to \n <code>User.Identity</code> under <code>OnActionExecuting(ActionExecutingContext filterContext)</code></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing System.Web.Security;\nusing System.Web.Routing;\n\n.....\n\n    public class RealUserAttribute : ActionFilterAttribute\n    {\n            public override void OnActionExecuting(ActionExecutingContext filterContext)\n            {\n                 /// if (User.Identity.IsAuthenticated)\n</code></pre>\n\n<p>Any clue how to fix it?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc","forms","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13239189,"title":"Pass multiple html parameter with BeginForm","body":"<p>I need to send parameters with values in a BeginForm html.</p>\n\n<p>Example:</p>\n\n<pre><code>@ using (Html.BeginForm (\"Create\", \"IncomeDeclaration\", new {declarationAmount = document.getElementById (\"element\"). value}))\n</code></pre>\n\n<p>This value I can not get from the Model, as it is not found in the model.\nI've tried several ways and nothing worked. If you could change the content of a ViewBag that'd be great.</p>\n\n<p>I appreciate your support.</p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","crystal-reports"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13236377,"title":"Dynamically set Crystal Report still asks for db login","body":"<p>I am trying to deploy <code>Crystal Reports</code> in my <code>MVC</code> application.  To get full use of the Crystal Report Viewer, I have to use a <code>webform</code>, which is working fairly well in my dev environment.</p>\n\n<p>The application will be deployed on the user's servers and connect to their personal dbs.  This means I do not have the final connection information when designing the report or the application.</p>\n\n<p>I am able to successfully connect using their entries in the web.config file, load a <code>DataTable</code> with the report information, and pass it to the report.  However, the report is still asking for the db credentials.  The report is set to connect to my db, so it asks for my credentials and will not proceed without them.  However, the final report shows the correct info from their db.</p>\n\n<p>I am not sure if I need to change something in the report, or in the code behind.  This is how I am setting the report <code>ReportSource</code> now:</p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n    string strReportName = System.Web.HttpContext.Current.Session[\"ReportName\"].ToString();\n    try\n    {\n        ReportDocument rd = new ReportDocument();\n        string strRptPath = Server.MapPath(\"~/\") + \"Rpts//\" + strReportName;\n        rd.Load(strRptPath);\n\n        SqlParameter[] sqlParams = {};\n        DataTable testDt = DBHelper.GetTable(\"rptInvtDuplDesc\", sqlParams);\n        rd.DataSourceConnections.Clear();\n        rd.SetDataSource(testDt);\n        CrystalReportViewer1.ReportSource = rd;\n    }\n    else\n    {\n        Response.Write(\"&lt;H2&gt;Nothing Found; No Report name found&lt;/H2&gt;\");\n    }\n}\n</code></pre>\n\n<p>How do I prevent the report from asking for the original credentials?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If I pass the login to my db like this:</p>\n\n<pre><code>rd.SetDatabaseLogon(\"username\", \"password\");\n</code></pre>\n\n<p>I do not get the db login again.  The credentials have to be for the db used to create the report, but the displayed results are from the <code>DataTable</code> populated in the method above.  If it has the data it needs from the current db, why does it need to connect to the original db?</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>I have 2 data sources for this report.  One is a table from the db and the other is the result from a stored procedure.  I have now learned that is the cause of the extra login.</p>\n"},{"tags":["sql","asp.net-mvc","sql-server-2008","asp.net-mvc-4","getdate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13239675,"title":"Executing table-less SQL in MVC4","body":"<p>What is the best practice for executing a generic, table-less SQL query within an MVC architecture?</p>\n\n<p>I'm trying to use commands such as these:</p>\n\n<pre><code>SELECT getdate();\nSELECT user;\n</code></pre>\n\n<p><strong>Update:</strong>\nThis is actually for part of another project that co-exists alongside the MVC project. All of my tables so far are mapped using edmx from an existing database.</p>\n\n<p>I'd like to use the date from the database in some internal calculations, rather than using the date from the server where the application/site are installed. My formulas go down to the milliseconds, and the time difference between the two servers involved throws off the math.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13239792,"title":"HTML.ActinLink to pass object has Parameter","body":"<p>I need small help on to pass object type has a  parameter to controller. I tried passing directly the object , \nHere is the exception </p>\n\n<p><code>System.Web.Mvc.HtmlHelper&lt;dynamic&gt;</code> has no applicable method \nnamed <code>ActionLink</code> but appears to have an extension method by that name.<br>\nExtension methods cannot be dynamically dispatched. Consider casting<br>\nthe dynamic arguments or calling the extension method without the<br>\nextension method syntax.</p>\n\n<p>Even though I added code for type casting, but still it throw compile error as above</p>\n\n<pre><code>InProgressGrid.Column(header: \"File Name\", columnName: \"FileName\",format:(item) =&gt; Html.ActionLink(((string)item.FileName), \"DownloadReport\", (Domain.UserObject)item ,null))\n</code></pre>\n\n<p>Is there any way I can pass more than one parameter to controller action method </p>\n\n<pre><code>InProgressGrid.Column(header: \"File Name\", columnName: \"FileName\",format:(item) =&gt; Html.ActionLink(((string)item.FileName), \"DownloadReport\", new {FileName = item.FileName,PK= item.PartitionKey },null)),\n</code></pre>\n\n<p>Now when I run application I see only one Attribute ie. FileName is passed but no PartitionKey is passed to Controller 's action Parameter.. </p>\n\n<p>Is there any change in Global Routing for above condition to work </p>\n\n<p>Pleas help me , it is very urgent</p>\n"},{"tags":["c#","javascript","jquery","asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":242,"score":0,"question_id":10047975,"title":"File upload - returns null","body":"<p>I am uploading a file in my ASP.NET MVC application. In the .ascx file, I have the following:</p>\n\n<pre><code>&lt;form action=\"/Admin/Mail/ABC\" enctype=\"multipart/form-data\"  method=\"post\"&gt;\n&lt;div&gt;               \n    &lt;input type=\"file\" name=\"file\" id=\"file\" /&gt;\n    &lt;input type=\"submit\" value=\"Upload\" id=\"UploadList\" onclick=\"Origin.UploadOptOutList();\"/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>in the .js file:</p>\n\n<pre><code>Origin.UploadList = function () {\n    Origin.ajax({\n        url: '/Admin/Mail/Upload',\n        type: 'POST',\n        dataType: 'json',\n        success: function (data) {\n            alert('success!');\n        }\n    });               \n}\n</code></pre>\n\n<p>and the controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Upload(HttpPostedFileBase file)\n{\n    List&lt;string&gt; validIDs, invalidIDs;\n    if (file.ContentLength &gt; 0)\n    {\n        // do something\n    }\n}\n</code></pre>\n\n<p>When invoking the Action from .js, the 'file' is always NULL. Any idea what I am missing?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","bundling-and-minification"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13240169,"title":"MVC4 Bundling (Based on Device Type)","body":"<p>So looking at the bundleconfig.cs it should permit to bundle based on device type. Only prob is since it is in App_Start it doesn't allow me to access the Request object. Any ideas how to make device based bundling possible?</p>\n"},{"tags":["c#","asp.net-mvc","postback"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13240219,"title":"saving changes made to an edit page","body":"<p>I am having trouble trying to pin point how to resolve this issue. On my create page i have checkboxes and when i check a box and save it - then i go back to the same page i just saved and open it in an edit view i uncheck the box i checked on the create page and select another box to check and save. But when i go back to that same item on the edit page - it didn't save the changes i made on the edit page and only shows the first box i checked when i first created the page. I am confused on which place exactly is causing or would resolve this issue. It is saving extra boxes i add but doesn't save the boxes i uncheck.</p>\n\n<p>I have a Get Create , Post Create, Get Edit, Post Edit methods in my controller. In my service file i have Create and Update methods. I am not sure if pasting the code of all these methods would help but here it is: </p>\n\n<pre><code>[HttpGet]\n    public ActionResult Create(Guid caseId)\n    {\n        var viewModel = new VisitViewModel\n                            {\n                                CaseId = caseId,\n                                CaseNumber = _caseCompositeService.GetCaseNumber(caseId),\n                                Name = _caseCompositeService.GetCaseName(caseId, _currentUser.OfficeId)\n                            };\n        viewModel.CaseId = caseId;\n        viewModel.VisitDate = DateTime.Today;\n        viewModel.Time = _defaultVisitTime;\n        AddLookupsToViewModel(viewModel);\n        return View(viewModel);\n    }\n\n    [HttpPost]\n    [ValidateInput(false)]\n    public ActionResult Create(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)\n    {\n        if (!ModelState.IsValid)\n        {\n            viewModel.Time = _timeEntryHelper.Value;\n            AddLookupsToViewModel(viewModel);\n            return View(viewModel);\n        }\n        var visitEntry = Mapper.Map&lt;VisitViewModel, VisitEntry&gt;(viewModel);\n        viewModel.AssociatedCasesSelected = associatedCasesSelected;\n        viewModel.PartiesSelected = selectedParties;\n        try\n        {\n            _visitEntryService.Create(visitEntry, associatedCasesSelected, selectedParties);\n            this.FlashInfo(string.Format(Message.ConfirmationMessageCreate, Resources.Entities.Visit.EntityName));\n        }\n        catch (RulesException ex)\n        {\n            ex.CopyTo(ModelState);\n        }\n        if (ModelState.IsValid)\n            return RedirectToAction(\"Edit\", \"Case\", new { caseId = viewModel.CaseId });\n        AddLookupsToViewModel(viewModel);\n        return View(viewModel);\n    }\n\n    [HttpGet]\n    public ActionResult Edit(Guid visitEntryId)\n    {\n        var visitEntry = _visitEntryService.Get(visitEntryId);\n        if (visitEntry == null) return View(\"NotFound\");\n        VisitViewModel viewModel = Mapper.Map&lt;VisitEntry, VisitViewModel&gt;(visitEntry);\n        viewModel.AssociatedCasesSelected = visitEntry.Visits.Select(v =&gt; v.CaseId);\n        viewModel.PartiesSelected = visitEntry.VisitEntryParties.Select(v=&gt;v.PartyId);\n        visitEntry.Parties = visitEntry.VisitEntryParties.Select(v =&gt; v.PartyId).ToList();\n        viewModel.CaseNumber = visitEntry.Case.CaseNumber;\n        viewModel.Name = _caseCompositeService.GetCaseName(viewModel.CaseId, _currentUser.OfficeId);\n        AddLookupsToViewModel(viewModel);\n        return View(viewModel);\n\n    }\n    [HttpPost]\n    [ValidateInput(false)]\n    public ActionResult Edit(VisitViewModel viewModel, Guid[] associatedCasesSelected, Guid[] selectedParties)\n    {\n        if(!ModelState.IsValid)\n        {\n            viewModel.Time = _timeEntryHelper.Value;\n            AddLookupsToViewModel(viewModel);\n            return View(viewModel);\n        }\n\n\n        try\n        {\n            var visitEntry = Mapper.Map&lt;VisitViewModel, VisitEntry&gt;(viewModel);\n            visitEntry.VisitDate = _timeEntryHelper.AddTimeToDate(visitEntry.VisitDate);\n\n            viewModel.AssociatedCasesSelected = associatedCasesSelected;\n            viewModel.PartiesSelected = selectedParties;\n            if(viewModel.PartiesSelected != null)\n                visitEntry.Parties = viewModel.PartiesSelected.ToList();\n            _visitEntryService.Update(visitEntry, associatedCasesSelected, selectedParties);\n            this.FlashInfo(string.Format(Message.ConfirmationMessageUpdate, Resources.Entities.Visit.EntityName));\n        }\n        catch (RulesException ex)\n        {\n            ex.CopyTo(ModelState);\n        }\n\n        if(!ModelState.IsValid)\n        {\n            viewModel.Time = _timeEntryHelper.Value;\n            AddLookupsToViewModel(viewModel);\n            return View(viewModel);\n        }\n        this.FlashInfo(string.Format(Message.ConfirmationMessageUpdate, Resources.Entities.Visit.EntityName));\n        return RedirectToAction(\"Edit\", \"Case\", new {caseId = viewModel.CaseId});\n    }\n</code></pre>\n\n<hr>\n\n<p>Here are the Create and Update methods from my service file: </p>\n\n<pre><code>public void Create(VisitEntry visitEntry,IList&lt;Guid&gt;caseIds, IList&lt;Guid&gt;partyIds )\n    {\n        EnsureValid(visitEntry);\n        _visitEntryRepository.Save(visitEntry);\n        caseIds = AddCurrentCaseToCases(visitEntry.CaseId, caseIds);\n        foreach (var caseId in caseIds.Distinct())\n        {\n            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Create(visit);\n        }\n        foreach (var partyId in partyIds.Distinct())\n        {\n            var partyVisit = new VisitEntryParty {PartyId = partyId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Create(partyVisit);\n        }\n    }\n    public void Update(VisitEntry visitEntry, IList&lt;Guid&gt; caseIds, IList&lt;Guid&gt;partyIds )\n    {\n        EnsureValid(visitEntry);\n        _visitEntryRepository.Save(visitEntry);\n        caseIds = AddCurrentCaseToCases(visitEntry.CaseId, caseIds);\n        var visits = _visitService.FindAll().Where(v =&gt; v.VisitEntryId == visitEntry.VisitEntryId);\n        List&lt;Visit&gt; toDelete =\n            visits.Where(visit =&gt; !(from c in caseIds.Distinct() select c).Contains(visit.CaseId)).ToList();\n        foreach (var visit in toDelete)\n        {\n            _visitService.Delete(visit.VisitId, visitEntry.OfficeId, visitEntry.UserId);\n        }\n        List&lt;Guid&gt; toAdd =\n            caseIds.Where(caseId =&gt; !(from v in visits.Distinct() select v.CaseId).Contains(caseId)).ToList();\n        foreach (var caseId in toAdd)\n        {\n            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(visit);\n        }\n        foreach (var partyId in partyIds.Distinct())\n        {\n            var partyVisit = new VisitEntryParty {PartyId = partyId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(partyVisit);\n        }\n    }\n</code></pre>\n\n<p>Please any help will be greatly appreciated.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-membership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13240046,"title":"membership provider not working in mvc application","body":"<p>I have strange problem: I added a custom membership provider to an mvc application, after the login i have the session cookie in request, but the user.identity property doesn't recognize it and acts like is not authenticated.</p>\n\n<p>Do you have any idea which is the problem?</p>\n\n<p>luca</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":2510,"score":3,"question_id":6840941,"title":"Group MVC3 views into sub-folders under main 'action' folder","body":"<p>E.g. I have three payment controllers, each specific to a third party payment processor, so under my root Views folder, I have one folder for each of these controllers.  I would like to move these into Views\\Payments\\Processor1, Views\\Payments\\Processor2, etc. instead of the current Views\\Processor1 etc.</p>\n\n<p>I am not ready to implement areas yet, so I'm hoping there is some way I can tell MVC to also look in subfolders, or something like that.  Can this be done and how?</p>\n"},{"tags":["c#","asp.net-mvc","loops"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13236316,"title":"View loop value doesn't change after first value","body":"<p>I have an <code>ICollection&lt;String&gt;</code> being passed to my view and I do a foreach to load a partial view. It loops through the correct number of times, however, the value it passes is the same and I know in the model that this is not the case.</p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>public class HomeController : Controller\n{\n    public ActionResult Index()\n    {\n        return View(\"Index\", new List&lt;String&gt;());\n    }\n\n    [HttpPost]\n    public ActionResult Index(List&lt;String&gt; txtValue)\n    {\n        return View(\"Index\", txtValue);\n    }\n}\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>        &lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;List&lt;String&gt;&gt;\" %&gt;\n&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Home\n&lt;/asp:Content&gt;\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n&lt;script type=\"text/javascript\"&gt;\n    //Deletes the div the Control is in.\n    $(\".delete\").live(\"click\", function () {\n        $(this).parent().remove();\n    });\n\n    //Adds the TextBoxes to divControls\n    function AddTextBox(Value) {\n        var elements = \"&lt;div&gt;&lt;input name=\\\"txtValue\\\" type=\\\"text\\\" /&gt;&lt;input type=\\\"button\\\" class=\\\"delete\\\" value=\\\"-\\\" /&gt;&lt;br/&gt;&lt;/div&gt;\";\n        $(\"#divControls\").append(elements);\n    }\n    &lt;/script&gt;\n\n&lt;h2&gt;Controls!!!&lt;/h2&gt;\n&lt;input id=\"btnAdd\" type=\"button\" name=\"Refresh\" value=\"+\" onclick=\"AddTextBox()\" /&gt;\n&lt;% using (Html.BeginForm())\n   { %&gt;\n    &lt;input id=\"btnsubmit\" type=\"submit\" name=\"Submit\" onclick=\"Submit\" /&gt;\n    &lt;div id=\"divControls\"&gt;\n&lt;%  \n        foreach (var text in this.Model)\n        { %&gt;\n            &lt;%=Html.TextBox(\"txtValue\", text, new { id = \"Value\", name = \"txtValue\" })%&gt;\n           &lt;% Html.RenderPartial(\"TextControl\", text);\n        }\n%&gt;\n    &lt;/div&gt;\n&lt;% \n    } \n%&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p><strong>TextControl.ascx</strong></p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;String&gt;\" %&gt;\n\n&lt;div&gt;\n    &lt;%=Html.TextBox(\"txtValue\", this.Model, new { id = \"Value\", name = \"txtValue\" }) %&gt;\n    &lt;input id=\"btn\" type=\"button\" class=\"delete\" value=\"-\" /&gt;&lt;br/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The values of the model passed from the controller to the view are correct, even when passed to the user control \"TextControl\" the value is correct, but when the Textbox displays they are all just the first value of the original model passed in.</p>\n\n<p>Ex.</p>\n\n<pre><code>Model as List&lt;String&gt; { \"1\", \"2\", \"3\", \"4\" }\n</code></pre>\n\n<p>passed to the view, will iterate through each one correctly, passing the correct string to \"TextControl\" to create a <code>Html.TextBox(\"name\", this.Model)</code>. Everything on the debugging side appears correct, however, when it finishes all the textboxes are \"1\" (or the first value in the list).</p>\n\n<p>Here's a link to my exact code: <a href=\"http://www.sendspace.com/file/sypl1u\" rel=\"nofollow\">http://www.sendspace.com/file/sypl1u</a></p>\n\n<p><strong>Note:</strong>\nI came up with a solution of just using <code>&lt;input type=\"text\" name=\"txtValue\" value=\"&lt;%= this.Model %&gt;\" /&gt;</code> instead but I am still curious as to why the Html.TextBox Helper doesn't work. It would set the Id of the textbox correctly but it wouldn't set the value correctly. I would greatly appreciate it if anyone knew why.</p>\n"},{"tags":["sql","asp.net-mvc","linq","telerik"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13239333,"title":"Telerik MVC grid - sorting pre-sorted data on a per-page basis","body":"<p>I have a Telerik grid with paging enabled, at 100 items per page.  I want to sort only these 100 items, per page.</p>\n\n<p>This is my controller, it's returning pre-sorted data:</p>\n\n<pre><code>var listInflows = (from inf in db.CI_INFLOWS\n                                   orderby inf.InvoiceDt descending\n                                   select new InflowsGetModel\n                                   {\n                                     [omitted for brevity]\n</code></pre>\n\n<p>These is my Telerik settings:</p>\n\n<pre><code>.Sortable(sorting =&gt; sorting.OrderBy(so =&gt; so.Add(a =&gt; a.InvoiceDt).Ascending()))\n.Pageable(paging =&gt; paging.PageSize(100)\n                          .Style(GridPagerStyles.NextPreviousAndNumeric)\n                          .Position(GridPagerPosition.Top)\n         )\n</code></pre>\n\n<p>Here, I am telling the db to sort the data.  Then I want the 100-per-page displayed items to sort in the reverse order.  It's not behaving as expected.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13239141,"title":"IEnumerable to IList casting possibilites","body":"<p>I am trying to ensure that my fields and page options are valid and on one page i want to check and see if an item is selected or not - which a selection is required to save. </p>\n\n<p>I have the following: </p>\n\n<p>in ViewEntry: <code>public IList&lt;Guid&gt; Parties { get; set; }</code></p>\n\n<p>in my ViewModel: <code>public IEnumerable&lt;Guid&gt; PartiesSelected { get; set; }</code></p>\n\n<p>Here is my ensure valid code: </p>\n\n<pre><code>public void EnsureValid(VisitEntry visitEntry)\n    {\n        var errors = new RulesException&lt;VisitActivityEntryDTO&gt;();\n\n        if(visitEntry.Parties == null )\n            errors.ErrorForModel(string.Format(\"No {0} selected\", Kids.Resources.Entities.Party.EntityNamePlural));\n        if (errors.Errors.Any())\n            throw errors;\n    }\n</code></pre>\n\n<p>and in my controller my Get Edit method when loading the page I have: </p>\n\n<pre><code>viewModel.PartiesSelected = visitEntry.VisitEntryParties.Select(v=&gt;v.PartyId);\n</code></pre>\n\n<p>Is it possible in any way that i could possibly have: </p>\n\n<pre><code>viewEntry.Parties = viewModel.PartiesSelected\n</code></pre>\n\n<p>or</p>\n\n<pre><code>viewEntry.Parties = visitEntry.VisitEntryParties.Select(v=&gt;v.PartyId);\n</code></pre>\n\n<p>I mainly want to have the selected party to show up in the list of Parties for the ViewEntry so when i validate. </p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","performance"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":56,"score":0,"question_id":13238988,"title":"MVC3 App High Memory Usage","body":"<p>I have an MVC App that when deployed to the test server uses quite a bit of memory.  The Worker Process for the app pool that is running under is right around 1GB of memory usage. What is the best way to debug something like this?  I am not currently explicitly calling Garbage Collection because I have been told it is not necessary in MVC3.   </p>\n"},{"tags":["sql-server","asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13238522,"title":"SQL/Linq coding for a search feature in MVC app - best practice","body":"<p>I have a section of an ASP MVC app I building that displays an info sheet regarding a person, then there is a button which will allow the user to search the database, to see if this person is already in the database before saving the record.  If the record exists, then the feature needs to overwrite certain fields in the DB, kind of a 'search and merge/update'.  </p>\n\n<p>I am pretty sure this will go beyond my LINQ skills, so I am thinking of doing a stored proc, but I wanted to poll the masses to see what the accepted best practice is for something like this.</p>\n\n<p>Thank you for reading, and for your opinion.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api","web-api"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":112,"score":5,"question_id":13200381,"title":"ASP.NET MVC 4 Application Calling Remote WebAPI","body":"<p>I've created a couple ASP.NET MVC applications in the past, but I've never used WebAPIs before. I'm wondering how I could create a simple MVC 4 app that does simple CRUD stuff via WebAPI instead of through a normal MVC controller. The trick is that the WebAPI should be a separate solution (and, in fact, could very well be on a different server/domain).</p>\n\n<p>How do I do that? What am I missing? Is it just a matter of setting up routes to point to the WebAPI's server? All the examples I've found showing how to consume WebAPIs using an MVC application seem to assume the WebAPI is \"baked in\" to the MVC application, or at least is on the same server.</p>\n\n<p>Oh, and to clarify, I'm not talking about Ajax calls using jQuery... I mean that the MVC application's controller should use the WebAPI to get/put data.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13238393,"title":"unit testing asp.net mvc model validation","body":"<p>Is this this the latest way of doing unit testing the model validation in asp.net mvc 4.0 ?</p>\n\n<p><a href=\"http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html\" rel=\"nofollow\">http://bradwilson.typepad.com/blog/2009/04/dataannotations-and-aspnet-mvc.html</a></p>\n\n<p>or is there a better way of testing model validation?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor","html-helper"],"answer_count":4,"favorite_count":6,"up_vote_count":28,"down_vote_count":0,"view_count":15496,"score":28,"question_id":4451287,"title":"Razor: Declarative HTML helpers","body":"<p>I'm trying to write a simple declarative html helper:</p>\n\n<pre><code>@helper Echo(string input) {\n    @input\n}\n</code></pre>\n\n<p>The helper works fine if I embed it into the page I want to use it on. But if I move it to a separate <code>.cshtml</code> file and place that file in the <code>~/Views/Helpers</code> directory, my view can't be compiled anymore because the helper is not found. According to Scott Gu's <a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx\" rel=\"nofollow\">blog article on Razor</a> it should work. </p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":629,"score":4,"question_id":6050082,"title":"Why are Controller Constructors fired before the Initialize method","body":"<p>I have a base Controller <code>ApplicationController</code> that needs to grab the URL Host and do some processing before the child controllers are fired. Since controller constructors are fired before RequestContext is initialized I have to override Initialize method to do my processing.</p>\n\n<p><code>ApplicationController:</code></p>\n\n<pre><code>    Protected Overrides Sub Initialize(ByVal requestContext As System.Web.Routing.RequestContext)\n        MyBase.Initialize(requestContext)\n\n        Dim host as String\n        host = Request.Url.Host.ToString\n    End Sub\n</code></pre>\n\n<p>What is the logic behind having Controller Constructors fire before the Initialize method?</p>\n\n<p>Also what are the rules to what should be placed in the Initialize Method.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":51,"score":5,"question_id":13234330,"title":"Custom scaffold for controller","body":"<p>I'm using repository pattern in my ASP MVC4 app and I thought it would be nice to create custom scaffold templates to avoid tweaking code every time I generate something.</p>\n\n<p>I followed some tutorials from the web. I copied the CodeTemplates directory form ProgramFiles to my project (only some of the files) and I cleared the Custom Tool property for each.</p>\n\n<p>I managed to achieve 2 goals:</p>\n\n<ul>\n<li>override the default template for controller: when I go to Controller>Add>Controllers and select \"controller with read/write actions and views....\" it uses my template.</li>\n<li>add a new view template: when I go to SomeViewFolder>Add>View I can choose my new template there.</li>\n</ul>\n\n<p>The thing I was unable to achieve was to create a new template <strong>ControllerWithRepo.tt</strong> and be able to select it in Controller>Add>Controllers. Even though I have <strong>ControllerWithRepo.tt</strong> created it doesn't show up on the template drop down list.</p>\n\n<p>I know it's possible to do what I want by hardcoding things in <strong>ControllerWithContext.tt</strong>  , but it seems to be a lame solution. I would like to do it the right way - to pass a repository class instead of DbContext class and generate the controller the way I want.</p>\n\n<p>Right now If I try to put my repository class as dbcontext it fails to perform the scaffold.</p>\n\n<p>To sum up, how can I create my own controller scaffold template for repository pattern?</p>\n"},{"tags":["ajax","asp.net-mvc","jquery-ui","unobtrusive-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13229509,"title":"An MVC helper for a validated AJAX form dialog loaded from another page?","body":"<p>I have a simple edit form. For a particular field, if the user doesn't see what they want, they can click a link, and a request form will pop-up in a new window. (FYI, we support mobile browsers.)</p>\n\n<p>If jQueryUI is available, progressive enhancement intercepts the click, opens a jQuery Dialog, the form is filled, validated, and submitted, where it displays the result and allows dialog close.</p>\n\n<p><strong>QUESTION</strong>: Is there an 'OEM' or 'Nugettable' MVC helper that implements this simple \"ancillary AJAX form\" interaction in a downlevel-compatible way?</p>\n\n<p>As far as I can tell, I have to build a whole lot of this from scratch and wire it all up manually, and ASP.NET MVC doesn't even support unobtrusive validation in this scenario. <a href=\"http://stackoverflow.com/questions/5146419/how-to-use-asp-net-mvc-3-jquery-validate-with-a-jquery-dialog-that-does-an-ajax\">How to use asp.net mvc 3 jquery validate with a jquery dialog that does an ajax submit?</a> Here is an example of building it from scratch for PHP: <a href=\"http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Jquery/A_2099-jQuery-AJAX-Enabled-Forms-in-Modal-Dialog.html\" rel=\"nofollow\">http://www.experts-exchange.com/Programming/Languages/Scripting/JavaScript/Jquery/A_2099-jQuery-AJAX-Enabled-Forms-in-Modal-Dialog.html</a></p>\n\n<p>For example, currently I think I'll need to do these things, and they seem very 'encapsulatable':</p>\n\n<ul>\n<li>Add an ActionLink with a { target = new }</li>\n<li>Wire a javascript event handler for the link</li>\n<li>Read the link target to set it as a jQuery dialog source</li>\n<li>Reinitialize page validation to overcome the unobtrusive limitation</li>\n<li>Wire the form submit to validation</li>\n<li>Read the form post destination to set it as a jQuery AJAX destination</li>\n<li>Wire form submit to jQuery's AJAX post method</li>\n<li>At the server, return special response for AJAX form posts</li>\n<li>Wire the submit success to an OK dialog</li>\n<li>Wire the submit failure to a dialog redraw</li>\n</ul>\n\n<p>Seems like a lot of effort for an everyday sort of need. Any hints are appreciated.</p>\n\n<p>Shannon</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13180481,"title":"Cannot update user since it's checking for unique username","body":"<p>I have user created page and obviously I don't want my users to have same usernames so I created my validation for that, however I have problem editing users now. When I try to edit user it won't allow me to do it since it says username already taken. But I don't even want to edit the username, just password or something.</p>\n\n<p>Edit: I did made mistake by calling <code>ValidateModel()</code>, now I fixed that but still run into problems.</p>\n\n<p><strong>Validator</strong></p>\n\n<pre><code>public class UniqueUsername : ValidationAttribute\n{\n    public override bool IsValid(object value)\n    {\n        if (value == null) return true; // In Edit view you can't edit username so it's null\n\n        FinanceDataContext _db = new FinanceDataContext();\n        var user = _db.Users.ToList().Where(x =&gt; x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault();\n\n        if (user == null) return true;\n        return false;\n    }\n}\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>public class User\n{\n    public int ID { get; set; }\n\n    // When I remove UniqueUsername and Remote validators everything works just fine\n    [Required]\n    [UniqueUsername(ErrorMessage = \"Username is already taken\")]\n    [Remote(\"CheckUsername\", \"User\", null, ErrorMessage = \"Username is allready taken\", HttpMethod = \"POST\")]\n    public string Username { get; set; }\n\n    [Required]\n    public string Password { get; set;}\n}\n</code></pre>\n\n<p><strong>Action</strong></p>\n\n<pre><code>[HttpPost]\n[ValidateAntiForgeryToken]\npublic ActionResult Edit(User u)\n{\n    // Get user we want to edit\n    var user = _db.Users.Where(x =&gt; x.ID == u.ID).SingleOrDefault();\n    if (user == null) return HttpNotFound();\n\n    // Set new fields manually\n    if (!string.IsNullOrEmpty(u.Password)) user.Password = Infrastructure.Encryption.SHA256(u.Password);\n\n    ModelState.Remove(\"Username\"); // this doesen't seem to do much...\n\n    _db.SaveChanges(); // validation error here\n    return Content(Infrastructure.Helper.SerializeObject(u));\n}\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<blockquote>\n  <p>Validation failed for one or more entities. See\n  'EntityValidationErrors' property for more details.</p>\n</blockquote>\n\n<p><em>I know why it throws me error. Because he checks if Username is already taken, and of course it's taken but I want to validate if username is taken only on CREATE, not on EDIT (since you can't change your username)</em></p>\n"},{"tags":["c#","asp.net-mvc","c#-4.0","asmx","asp.net-web-api-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13181654,"title":"How to implement a web api facade in c#","body":"<p><strong>Background:</strong> We have a requirement to be able to support web servers other than IIS. To do this we are planning on moving all our processing logic to another service which will use a queuing mechanism as a transport (RabbitMQ to be specific). We will have a HTTP web api that will basically forward all requests to this other service; for IIS we will implement this facade in C# &amp; probably Java for other web servers like Tomcat.</p>\n\n<p>My question is this; for c# what is the best way to forward all the HTTP requests &amp; content requests to another service. I've being looking at using a asmx HTTPHandler for this; I have it working; but the solution is ugly and requires using a URL re-writer for clean URLs. </p>\n\n<p>Would anyone know if it is possible to do this using MVC or the web-api itself; we basically take all the content received; the URL itself, cookies, query string etc; package it up and send it on for processing.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12920392,"title":"IE 9 shows null","body":"<p>In my model I defined NullDisplayFormat</p>\n\n<pre><code>[StringLength(100)]\n[DisplayName(\"First Contact\")]\n[DisplayFormat(NullDisplayText = \"\")]\n[Column(\"Contact1\",TypeName =  \"varchar\")]\npublic virtual string Contact1 { get; set; }\n</code></pre>\n\n<p>In Google Chrome and in FireFox I see nothing in the grid and input controls in my view. However, in IE 9 I see NULL. Is it a bug in IE 9? What is the simplest way to fix it?</p>\n\n<p>I also tried to change null to nothing this way in jQuery:</p>\n\n<pre><code>var Contact1 = $('.trSelected td:eq(3)').text();\n$('#Contact1').val(Contact1||'Nothing');\n</code></pre>\n\n<p>However, it didn't work since the Contact1 is already a string property = null. Do you know how can I fix it?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13016674,"title":"Validations not show up using EF Code First with complex types","body":"<p>This is a continuation of this question <a href=\"http://stackoverflow.com/questions/13000887/model-class-and-mapping\">Model class and Mapping</a></p>\n\n<p>I had my Client class now working fine and it's defined as </p>\n\n<pre><code>using System;\n\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel;\n\nusing DataAnnotationsExtensions;\nusing System.ComponentModel.DataAnnotations.Schema;\nusing System.Collections.Generic;\n\nnamespace CardNumbers.Objects\n{\n    [ComplexType]\n    public class PhoneInfo\n    {\n        [DataType(DataType.PhoneNumber)]\n        [StringLength(10)]\n        [DisplayName(\"Phone\")]\n        public virtual string Phone { get; set; }\n\n        [StringLength(5)]\n        [DisplayName(\"Ext\")]\n        public virtual string Ext { get; set; }\n\n        public bool HasValue\n        {\n            get\n            {\n                return (Phone != null || Ext != null);\n            }\n        }\n\n    }\n\n      [ComplexType]\n      public class ContactDetail\n      {\n          //Constructor\n          public ContactDetail()\n          {\n              phoneInfo = new PhoneInfo();\n          }\n\n          [StringLength(100)]\n          [DisplayName(\"Contact Name\")]\n          [DisplayFormat(NullDisplayText = \"\")]\n          public virtual string Contact { get; set; }\n\n          [Email]\n          [StringLength(100)]\n          [DisplayName(\"Email\")]\n          public virtual string Email { get; set; }\n\n          public virtual PhoneInfo phoneInfo { get; set; }\n          public bool HasValue\n          {\n              get\n              {\n                  return (Contact != null || Email != null || phoneInfo.HasValue);\n              }\n          }\n      }\n\n/// &lt;summary&gt;\n/// Client class (Client No, Client Name, Address, Contact1, Contact2 info, Created By, Modified By (operator and date)\n/// &lt;/summary&gt;\n    public class Client\n    {\n        public Client()\n        {\n            Contact1 = new ContactDetail();\n            Contact2 = new ContactDetail();\n     }\n\n        [Key]\n        [Column(\"ClientId\",TypeName = \"int\")]\n        public virtual int Id { get; set; }\n        [Required]\n        [DisplayName(\"Client No\")]\n        [Column(\"client_no\", TypeName = \"smallint\")]\n        public virtual Int16 Number { get; set; }\n\n        [Required]\n        [Column(\"client_name\", TypeName = \"varchar\")]\n        [DisplayName(\"Client Name\")]\n        [MaxLength(30, ErrorMessage = \"Client Name should not be longer than 30 characters\" )]\n        [MinLength(3, ErrorMessage = \"Client Name is too short\")]\n        public virtual string Name { get; set; }\n\n        [DataType(DataType.MultilineText)]\n        public virtual string Address { get; set; }\n\n        public virtual ContactDetail Contact1 {get; set;}\n        public virtual ContactDetail Contact2 {get; set;}\n\n        [ForeignKey(\"EnteredByOperator\")]\n        public string EnteredBy { get; set; }\n\n        [InverseProperty(\"ClientsEnteredBy\")]\n        public virtual Operator EnteredByOperator { get; set; }\n\n        [ForeignKey(\"ModifiedByOperator\")]\n        public string ModifiedBy { get; set; }\n\n        [InverseProperty(\"ClientsUpdatedBy\")]\n        public virtual Operator ModifiedByOperator { get; set; }\n\n        [DataType(DataType.DateTime)]\n        [DisplayName(\"Created on\")]\n        public DateTime EnteredOn { get; set; }\n\n        [DataType(DataType.DateTime)]\n        [DisplayName(\"Modified on\")]\n        public DateTime? ModifiedOn { get; set; }\n\n        public virtual ICollection&lt;ClientOrder&gt; ClientOrders { get; set; }\n\n        public virtual ICollection&lt;Reorder&gt; Reorders { get; set; }\n    }\n}\n</code></pre>\n\n<p>I mapped column names using Fluent API and I also re-defined my original \"repository\" classes to be very similar to defined in this tutorial <a href=\"http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8\" rel=\"nofollow\">http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8</a></p>\n\n<p>This is my current partial view for the client form called _ClientForm:</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.Client\n&lt;fieldset&gt;\n    &lt;legend&gt;Client Info&lt;/legend&gt;\n\n    @Html.ValidationSummary(true)\n\n    &lt;input type=\"hidden\" id=\"fntype\" name=\"fntype\"&gt;\n    @Html.HiddenFor(model =&gt; model.Id)\n    @Html.EditorFor(model =&gt; model.Number, EditorTemplate.TextBox)\n\n    @Html.EditorFor(model =&gt; model.Name, EditorTemplate.TextBox)\n\n    @Html.EditorFor(model =&gt; model.Address, EditorTemplate.EditBox)\n\n    &lt;div id=\"ContactsInfo\"&gt;\n        @*Contact 1*@\n\n        &lt;div id=\"Contact1\"&gt;\n\n         @*@Html.EditorFor(model=&gt;model.Contact1)*@\n            @Html.EditorFor(model=&gt;model.Contact1.Contact, EditorTemplate.TextBox)\n            @Html.EditorFor(model=&gt;model.Contact1.Email, EditorTemplate.TextBox)\n        &lt;/div&gt;\n\n        @*Contact2*@\n        &lt;div id=\"Contact2\"&gt;\n\n        @*   @Html.EditorFor(model =&gt; model.Contact2)*@\n        &lt;/div&gt;\n    &lt;/div&gt;\n    @*&lt;div class=\"clear\"&gt;&lt;/div&gt;*@\n    &lt;div id=\"SaveCancel\" class=\"float-right\"&gt;\n        &lt;button type=\"Submit\" id=\"btnSave\"&gt;Save&lt;/button&gt;\n        &lt;button type=\"reset\" id=\"btnCancel\"&gt;Cancel&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>I already tried to revert to original way of only one level and I also commented the second Contact2 info but still the e-mail validation doesn't work and all other validations also don't seem to work.</p>\n\n<p>The EditorFor textboxes are defined based on this blog post <a href=\"http://fusionovation.com/post/2010/02/15/adding-a-rich-text-editor-to-asp-net-mvc-using-strongly-typed-helpers-dataannotations-amp-jquery.aspx\" rel=\"nofollow\">http://fusionovation.com/post/2010/02/15/adding-a-rich-text-editor-to-asp-net-mvc-using-strongly-typed-helpers-dataannotations-amp-jquery.aspx</a></p>\n\n<p>And these are two of the new EditorFor I added:\nPhoneInfo.cshtml</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.PhoneInfo\n\n&lt;div id=\"PhoneInfo\"&gt;\n    &lt;div class=\"float-left\"&gt;\n        @Html.EditorFor(model =&gt; model.Phone, EditorTemplate.TextBox)\n    &lt;/div&gt;\n    &lt;div class=\"float-right\"&gt;\n        @Html.EditorFor(model =&gt; model.Ext, EditorTemplate.TextBox)\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And ContactDetail.cshtml</p>\n\n<pre><code>@using WebDemo.Helper\n@model CardNumbers.Objects.ContactDetail\n\n@Html.EditorFor(model =&gt; model.Contact, EditorTemplate.TextBox)\n@Html.EditorFor(model =&gt; model.Email, EditorTemplate.TextBox)\n@Html.EditorFor(model=&gt;model.phoneInfo)\n</code></pre>\n\n<p>So, as you can see, the code of the views is now very compact.</p>\n\n<p>However, with all of these in place the validations don't see to fire anymore. I used to test validation on EMail by typing some garbage. It used to provide a validation message near the textbox. Now I observe that the email textbox takes the red border, but there is no message.</p>\n\n<p>Do you see what I am missing now and if it's possible to use complex type and validations?</p>\n\n<p>To clarify, the _ClientForm is called from this Client view:</p>\n\n<pre><code>@model CardNumbers.Objects.Client\n\n@{\n    ViewBag.Title = \"Client\";\n}\n\n@section scripts {\n    &lt;script src=\"@Url.Content(\"~/Scripts/Clients.js\")\" type=\"text/javascript\" &gt;&lt;/script&gt;\n}\n\n &lt;form id=\"frmClientsSearch\"&gt;\n        &lt;label for=\"clientNo\"&gt;Client No: &lt;/label&gt;\n        &lt;input type=\"number\" name=\"searchClientNo\" class=\"numericOnly\" /&gt;&lt;br /&gt;\n        &lt;label for=\"clientName\"&gt;Client Name: &lt;/label&gt;\n        &lt;input type =  \"text\" size =25 value =\"Please enter the search value\" class=\"SelectOnEntry\"\n            name =\"searchClientName\" /&gt;\n\n       &lt;input type=\"button\" id=\"btnClientsSearch\" value =\"Find / Refresh\" /&gt;      \n&lt;/form&gt;\n&lt;div style=\"padding-left: 150px; padding-top: 50px; padding-bottom: 50px;\" id=\"ClientsResults\"&gt;\n    &lt;table id=\"flexClients\" style=\"display: none\"&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n&lt;div style=\"display: none\"&gt;\n   &lt;form id=\"sform\" title=\"Client Info\"&gt;\n\n\n        @{Html.RenderPartial(\"_ClientForm\", Model)   ;}\n\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13236998,"title":"Url.Action returning different url on different part of site","body":"<p>I have a line in a partial that is included in 2 different views on my site:</p>\n\n<pre><code>@Url.Action(\"SomeController\", \"SomeAction\", { userID = \"foo\" })\n</code></pre>\n\n<p>I am noticing that the URL this is generating is very different depending on which page I'm on. Can anyone give me a reason why this might happen? Asp.Net MVC 3.</p>\n"},{"tags":["asp.net-mvc","webforms","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13236734,"title":"MVC 4 Html Helper RouteUrl not found (MVC 4 added to Webforms project)","body":"<p>Exact error message:</p>\n\n<pre><code> 'System.Web.Mvc.HtmlHelper&lt;dynamic&gt;' does not contain a definition for 'RouteUrl' and no extension method 'RouteUrl' accepting a first argument of type 'System.Web.Mvc.HtmlHelper&lt;dynamic&gt;' could be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>My web config in the views folder is this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;sectionGroup name=\"system.web.webPages.razor\" type=\"System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;section name=\"host\" type=\"System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n      &lt;section name=\"pages\" type=\"System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" requirePermission=\"false\" /&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n\n  &lt;system.web.webPages.razor&gt;\n    &lt;host factoryType=\"System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;pages pageBaseType=\"System.Web.Mvc.WebViewPage\"&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"Microsoft.Web.Optimization\"/&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n  &lt;/system.web.webPages.razor&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"false\" /&gt;\n  &lt;/appSettings&gt;\n\n  &lt;system.web&gt;\n    &lt;httpHandlers&gt;\n      &lt;add path=\"*\" verb=\"*\" type=\"System.Web.HttpNotFoundHandler\"/&gt;\n    &lt;/httpHandlers&gt;\n\n    &lt;!--\n        Enabling request validation in view pages would cause validation to occur\n        after the input has already been processed by the controller. By default\n        MVC performs request validation before a controller processes the input.\n        To change this behavior apply the ValidateInputAttribute to a\n        controller or action.\n    --&gt;\n    &lt;pages\n        validateRequest=\"false\"\n        pageParserFilterType=\"System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        pageBaseType=\"System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"\n        userControlBaseType=\"System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\"&gt;\n      &lt;controls&gt;\n        &lt;add assembly=\"System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" namespace=\"System.Web.Mvc\" tagPrefix=\"mvc\" /&gt;\n      &lt;/controls&gt;\n    &lt;/pages&gt;\n  &lt;/system.web&gt;\n\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt;\n\n    &lt;handlers&gt;\n      &lt;remove name=\"BlockViewHandler\"/&gt;\n      &lt;add name=\"BlockViewHandler\" path=\"*\" verb=\"*\" preCondition=\"integratedMode\" type=\"System.Web.HttpNotFoundHandler\" /&gt;\n    &lt;/handlers&gt;\n  &lt;/system.webServer&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>My project references System.Web.Mvc V4.0.0.0 and this assembly is set to copy local.</p>\n\n<p>What could I be missing?</p>\n\n<p>Background information: This project is a web-forms project with new MVC 4 development.</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ajax"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":4667,"score":2,"question_id":3908605,"title":"return Json error from ASP.NET MVC","body":"<p>I'm trying to return an error message via Json from ASP.NET MVC controller. I want to display carriage returns on the screen, so the error will look like:</p>\n\n<blockquote>\n<pre><code>Error 1.\nError 2.\n</code></pre>\n</blockquote>\n\n<p>instead of <code>\"Error1.\\u003cbr/\\u003eErro2.\\u003cbr.\\u003e\"</code></p>\n\n<p>Here's my ASP.NET MVC code</p>\n\n<pre><code>Response.StatusCode = (int)HttpStatusCode.BadRequest;\nstring str = \"Error 1.&lt;br/&gt;Error 2.&lt;br.&gt;\";\nreturn Json(str);\n</code></pre>\n\n<p>JavaScript (redacted):</p>\n\n<pre><code>      .ajax({...\n            error: function(xhr, textStatus, exceptionThrown) {\n                $('#result').html(xhr.responseText);\n            },\n</code></pre>\n\n<p>Debugging the xhr.responseText yields: <code>\"\"Error1.\\u003cbr/\\u003eErro2.\\u003cbr.\\u003e\"\"</code></p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","telerik","telerik-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13233069,"title":"Two Kendo UI TreeView on the same page","body":"<p>I am using Kendo UI MVC extensions. I have one treeview on the page</p>\n\n<pre><code>&lt;script type=\"text/x-kendo-tmpl\" id=\"template\"&gt;\n    &lt;div class=\"form\"&gt;\n        &lt;h3&gt;${Name}&lt;/h3&gt;\n    &lt;/div&gt;\n&lt;/script&gt;\n\n@(Html.Kendo().ListView(Model)\n      .Name(\"formsList\")\n      .ClientTemplateId(\"template\")\n      .TagName(\"div\")\n      .BindTo(Model)\n      .DataSource(dataSource =&gt; dataSource\n      .Model(model =&gt;\n          { \n              model.Id(p =&gt; p.Id);\n              model.Field(p =&gt; p.Name);\n              model.Field(p =&gt; p.Fields);\n          }))\n      .Pageable()\n      .Selectable(selectable =&gt; selectable.Mode(ListViewSelectionMode.Single))\n      .Events(events =&gt; events.Change(\"onChange\")))\n</code></pre>\n\n<p>When I click on the item I want to show <code>Fields</code> property in my Model in the separate TreeView down below.</p>\n\n<p>So far I have such code</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function onChange(arg) {\n        var dataSource = $(\"#formsList\").data(\"kendoListView\");\n        var index = dataSource.select().index();\n        var dataItem = dataSource.dataSource.view()[index];\n\n        alert(dataItem.Fields);\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I can get the Fields property of the selected dataItem, but how should I pass it to the second TreeView?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2445,"score":0,"question_id":11231278,"title":"Could not load file or assembly 'System.Web.Providers\"","body":"<p>hello this my config file</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;configuration&gt;\n  &lt;configSections&gt;\n    &lt;section name=\"entityFramework\" type=\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" requirePermission=\"false\"/&gt;\n    &lt;sectionGroup name=\"elmah\"&gt;\n      &lt;section name=\"security\" requirePermission=\"false\" type=\"Elmah.SecuritySectionHandler, Elmah\"/&gt;\n      &lt;section name=\"errorLog\" requirePermission=\"false\" type=\"Elmah.ErrorLogSectionHandler, Elmah\"/&gt;\n      &lt;section name=\"errorMail\" requirePermission=\"false\" type=\"Elmah.ErrorMailSectionHandler, Elmah\"/&gt;\n      &lt;section name=\"errorFilter\" requirePermission=\"false\" type=\"Elmah.ErrorFilterSectionHandler, Elmah\"/&gt;\n    &lt;/sectionGroup&gt;\n  &lt;/configSections&gt;\n  &lt;connectionStrings&gt;\n    &lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=aspnet-MedicallexiconProject-2012615153521;Integrated Security=True\" providerName=\"System.Data.SqlClient\"/&gt;\n  &lt;/connectionStrings&gt;\n  &lt;appSettings&gt;\n    &lt;add key=\"webpages:Version\" value=\"2.0.0.0\"/&gt;\n    &lt;add key=\"webpages:Enabled\" value=\"true\"/&gt;\n    &lt;add key=\"PreserveLoginUrl\" value=\"true\"/&gt;\n    &lt;add key=\"ClientValidationEnabled\" value=\"true\"/&gt;\n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\"/&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation targetFramework=\"4.0\" debug=\"true\"/&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n      &lt;forms loginUrl=\"~/Account/Login\" timeout=\"2880\"/&gt;\n    &lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\"/&gt;\n        &lt;add namespace=\"System.Web.Mvc\"/&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\"/&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\"/&gt;\n        &lt;add namespace=\"System.Web.Routing\"/&gt;\n        &lt;add namespace=\"System.Web.WebPages\"/&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;profile defaultProvider=\"DefaultProfileProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultProfileProvider\" type=\"System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;roleManager defaultProvider=\"DefaultRoleProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultRoleProvider\" type=\"System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/roleManager&gt;\n    &lt;sessionState mode=\"InProc\" customProvider=\"DefaultSessionProvider\"&gt;\n      &lt;providers&gt;\n        &lt;add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" applicationName=\"/\"/&gt;\n      &lt;/providers&gt;\n    &lt;/sessionState&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"ErrorLog\" type=\"Elmah.ErrorLogModule, Elmah\"/&gt;\n      &lt;add name=\"ErrorMail\" type=\"Elmah.ErrorMailModule, Elmah\"/&gt;\n      &lt;add name=\"ErrorFilter\" type=\"Elmah.ErrorFilterModule, Elmah\"/&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n  &lt;system.webServer&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\"/&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"&gt;\n      &lt;add name=\"ErrorLog\" type=\"Elmah.ErrorLogModule, Elmah\" preCondition=\"managedHandler\"/&gt;\n      &lt;add name=\"ErrorMail\" type=\"Elmah.ErrorMailModule, Elmah\" preCondition=\"managedHandler\"/&gt;\n      &lt;add name=\"ErrorFilter\" type=\"Elmah.ErrorFilterModule, Elmah\" preCondition=\"managedHandler\"/&gt;\n    &lt;/modules&gt;\n  &lt;/system.webServer&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Helpers\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-4.0.0.0\" newVersion=\"4.0.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.WebPages\" publicKeyToken=\"31bf3856ad364e35\"/&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"2.0.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"EntityFramework\" publicKeyToken=\"b77a5c561934e089\" culture=\"neutral\"/&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.4.0.0\" newVersion=\"4.4.0.0\"/&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n  &lt;entityFramework&gt;\n    &lt;defaultConnectionFactory type=\"System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework\"/&gt;\n  &lt;/entityFramework&gt;\n  &lt;elmah&gt;\n    &lt;security allowRemoteAccess=\"false\"/&gt;\n  &lt;/elmah&gt;\n  &lt;location path=\"elmah.axd\" inheritInChildApplications=\"false\"&gt;\n    &lt;system.web&gt;\n      &lt;httpHandlers&gt;\n        &lt;add verb=\"POST,GET,HEAD\" path=\"elmah.axd\" type=\"Elmah.ErrorLogPageFactory, Elmah\"/&gt;\n      &lt;/httpHandlers&gt;\n    &lt;/system.web&gt;\n    &lt;system.webServer&gt;\n      &lt;handlers&gt;\n        &lt;add name=\"ELMAH\" verb=\"POST,GET,HEAD\" path=\"elmah.axd\" type=\"Elmah.ErrorLogPageFactory, Elmah\" preCondition=\"integratedMode\"/&gt;\n      &lt;/handlers&gt;\n    &lt;/system.webServer&gt;\n  &lt;/location&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>but when pulish on host rais this error\nConfiguration Error</p>\n\n<p>Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. </p>\n\n<p>Parser Error Message: Could not load file or assembly 'System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.</p>\n\n<p>Source Error: </p>\n\n<pre><code>Line 44:     &lt;membership defaultProvider=\"DefaultMembershipProvider\"&gt;\nLine 45:       &lt;providers&gt;\nLine 46:         &lt;add name=\"DefaultMembershipProvider\" type=\"System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\"/&gt;\nLine 47:       &lt;/providers&gt;\nLine 48:     &lt;/membership&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","localization"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13236195,"title":"Formatting Currency to ALWAYS use USD regardless of users culture","body":"<p>This should be simple but I cannot find the answer anywhere.\nOn our asp.net MVC site, we show currency values and I need these currency values to Always be in USD regardless of the users culture settings.</p>\n\n<p>If I use string.format(\"{0:C}\",value) then it shows the value in what ever culture the use has set.\nThis is incorrect for us as $1000.00 is not the same thing as 1000.00 euro</p>\n\n<p>I still need to use the language side of this, meaning if they are in France I want to use the French localization resource, so I don't want to completely disregard their culture settings, but how can I make sure the currency is always shown in USD?</p>\n"},{"tags":["c#","asp.net-mvc","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13235722,"title":"Asp.Net MVC 3 model binder for all DateTime fields or execute action filter before binding","body":"<p>We have lots of models passed to actions that have a DateTime field on.  Some are using ModelBinders and some aren't  (we are using AutoFac in our app).  </p>\n\n<p>We have a globalized application and the culture is set per user (we set their culture as we want them to see the language their company wants) but that is set in an action filter it seems after the model binding has occurred.  Is there a way to execute the filter before the binding, or do something before binding occurs for all DateTime fields or is there a way to intercept all bindings for DateTime properties in the app whether the are passed directly to an action such as:</p>\n\n<pre><code>public ActionResult Create(DateTime Start);\n</code></pre>\n\n<p>or they are part of a model:</p>\n\n<pre><code>public ActionResult Create(CreateSurveyModel model);\n\npublic class CreateSurveyModel\n{\n    public DateTime Start { get; set; }\n}\n</code></pre>\n\n<p>And then do what we need to do?</p>\n\n<p>Many thanks for any help.</p>\n\n<p>POSSIBLE SOLUTION??</p>\n\n<p>This is I think awful but we have overridden the ExecuteCore on the base controller to set the current UI culture for the thread so it is set before the model binding occurs, is this a bad idea as it feels wrong :S</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13232560,"title":"Type generated in temporary asp.net files that no longer exists","body":"<p>I have an MVC 3 project that has started giving me a build error </p>\n\n<pre><code>The type or namespace name 'ActivityItemViewModel' could not be found (are you missing a using directive or an assembly reference?)\n</code></pre>\n\n<p>This error is coming from an ASP.net temporary files </p>\n\n<p>It appears to be referencing a type  that no longer exists in the project.  This type was removed a long time ago and the application has been build/bracnhed release many times since then.</p>\n\n<pre><code> public class views_activities_activityfeeditem_ascx : System.Web.Mvc.ViewUserControl&lt;ActivityItemViewModel&gt;\n</code></pre>\n\n<p>Neither the view or the view model exists any more.  </p>\n\n<p>I assumed that the temp file was corrupt and deleted them this worked the first time I rebuilt but after that i get the same error.  </p>\n\n<p>I've tried.</p>\n\n<ul>\n<li>Cleaning solution and rebuild  </li>\n<li>Deleting temporary asp.net files (both normal and 64 bit) </li>\n<li>Stop IIS/Clean delete and rebuild Start IIS </li>\n<li>And a load of combinations of the above</li>\n</ul>\n\n<p>This worked the first time but now I get the error every time.  Not sure how asp.net is getting a reference to these types? </p>\n\n<p>Any help or guidance on debugging this issue would be appreciated.  </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13235096,"title":"MVC Validation: Service Layer or Data Annotations","body":"<p>I hope this isn't terribly subjective, but when it comes to validating business logic, I see two paths that, unless I'm mistaken, deliver pretty much the same result:</p>\n\n<ul>\n<li><p>Use a service layer where all validation on your models is performed (ref: <a href=\"http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs</a>)</p></li>\n<li><p>Decorate your models with Data Annotations</p></li>\n</ul>\n\n<p>In the first instance, the model is a dumb container for data, and in the second, the model knows about its valid state. Above and beyond that, is there nuance between the two that I'm missing? Should one be used over the other in some instances?</p>\n\n<p>Thanks,</p>\n\n<p>Chris</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13235576,"title":"Convert video to flv using FFMPEG in asp.net not working?","body":"<p>Here my code for converting video when it is uploaded to server</p>\n\n<p>private bool ReturnVideo(string fileName)\n    {\n        string html = string.Empty;\n        //rename if file already exists</p>\n\n<pre><code>    int j = 0;\n    string AppPath;\n    string inputPath;\n    string outputPath;\n    string imgpath;\n    AppPath = Request.PhysicalApplicationPath;\n    //Get the application path \n    inputPath = AppPath + \"OriginalVideo\";\n    //Path of the original file \n    outputPath = AppPath + \"ConvertVideo\";\n    //Path of the converted file \n    imgpath = AppPath + \"Thumbs\";\n    //Path of the preview file \n    string filepath = Server.MapPath(\"~/OriginalVideo/\" + fileName);\n    while (File.Exists(filepath))\n    {\n        j = j + 1;\n        int dotPos = fileName.LastIndexOf(\".\");\n        string namewithoutext = fileName.Substring(0, dotPos);\n        string ext = fileName.Substring(dotPos + 1);\n        fileName = namewithoutext + j + \".\" + ext;\n        filepath = Server.MapPath(\"~/OriginalVideo/\" + fileName);\n    }\n    try\n    {\n        this.fileuploadImageVideo.SaveAs(filepath);\n    }\n    catch\n    {\n        return false;\n    }\n    string outPutFile;\n    outPutFile = \"~/OriginalVideo/\" + fileName;\n    int i = this.fileuploadImageVideo.PostedFile.ContentLength;\n    System.IO.FileInfo a = new System.IO.FileInfo(Server.MapPath(outPutFile));\n    while (a.Exists == false)\n    {\n\n    }\n    long b = a.Length;\n    while (i != b)\n    {\n\n    }\n    string convertString = string.Format(\" -i {0} -ar 22050 -ab 128 -acodec mp3 -r 25 -f flv -b 800 -s 640x480 {1}\", inputPath + \"\\\\\" + fileName, outputPath + \"\\\\\" + fileName.Remove(fileName.IndexOf(\".\"))+ \".flv\");\n    ConvertNow(convertString);\n    string imgargs = \" -i \\\"\" + outputPath + \"\\\\\" + fileName.Remove(fileName.IndexOf(\".\")) + \".flv\" + \"\\\" -f image2 -ss 1 -vframes 1 -s 280x200 -an \\\"\" + imgpath + \"\\\\\" + fileName.Remove(fileName.IndexOf(\".\")) + \".jpg\" + \"\\\"\";\n    ConvertNow(imgargs);\n\n\n    return true;\n}\n</code></pre>\n\n<p>I guess It's wrong with convertString but I get this string from ffmpeg documentation. Any one can help me?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","nuget"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3710,"score":3,"question_id":4994252,"title":"Help with NuGet. Project > Add Library Package Reference not appearing","body":"<p>I have installed NuGet. And when I try to go to Project > Add Library Package Reference \n\"Add Library Package Reference\" is not under the project menu. if i try to install nuget again it says it is already installed. My application is an MVC 3 application targeting .net 4.\nHow can I get this option to appear? Thanks!</p>\n"},{"tags":["asp.net","sql","asp.net-mvc","ms-access","gridview"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":13055331,"title":"How to alter table (add/delete column) dynamically and update it to gridview","body":"<p>I need gridview to get updated after I add new field to the table, below is the code</p>\n\n<pre><code>Protected Sub drpDataType_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs) Handles drpDataType.SelectedIndexChanged\n    Dim cnnOLEDB As New OleDbConnection(\"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Documents and Settings/My Documents/Visual Studio 2008/Projects/WebApplication1/WebApplication1/App_Data/Asset.mdb;\")\n    Dim alterSql As String\n    alterSql = \"ALTER TABLE LAB1 ADD \" + txtColumnName.Text + \" \" + drpDataType.SelectedValue\n    Dim type As String = drpDataType.SelectedValue\n    Dim cmdOLEDB As New OleDbCommand        \n    cnnOLEDB.Open()\n    cmdOLEDB = New OleDbCommand(alterSql, cnnOLEDB)\n    cmdOLEDB.ExecuteNonQuery()\n    cnnOLEDB.Close()\n    Dim tb1 As New DataTable\n    tb1.Columns.Add(txtColumnName.Text)\n    GridView1.DataSourceID = String.Empty\n    Me.GridView1.DataSource = tb1\n    Me.GridView1.DataBind()\nEnd Sub\n</code></pre>\n\n<p>I get this error \"Both DataSource and DataSourceID are defined on 'GridView1'.  Remove one definition\" I understand this because I have set the DataSourceID to AccessDataSource, now if I set it to empty I don't see anything in the gridview not even the tb1. Can anyone help me get this working, any help is appreciated. Thanks!</p>\n\n<p>Edit: Gridview </p>\n\n<pre><code> &lt;asp:GridView ID=\"GridView1\" runat=\"server\" AllowSorting=\"True\" \n              ShowFooter=\"True\" EmptyDataText=\"There are no records for the selection\"  \n              AutoGenerateColumns=\"False\" AutoGenerateDeleteButton=\"False\"  \n              AutoGenerateEditButton=\"False\" CellPadding=\"4\"  OnRowCommand=\"Insert_Click\"\n              DataKeyNames=\"Lab Name\" DataSourceID=\"AccessDataSource8\"/&gt;\n              &lt;Columns&gt;\n                  &lt;asp:TemplateField ShowHeader=\"False\"&gt;\n                      &lt;EditItemTemplate&gt;\n                          &lt;asp:LinkButton ID=\"LinkButton1\" runat=\"server\" CausesValidation=\"True\" \n                              CommandName=\"Update\" Text=\"Update\"&gt;&lt;/asp:LinkButton&gt;\n                          &amp;nbsp;&lt;asp:LinkButton ID=\"LinkButton2\" runat=\"server\" CausesValidation=\"False\" \n                              CommandName=\"Cancel\" Text=\"Cancel\"&gt;&lt;/asp:LinkButton&gt;\n                      &lt;/EditItemTemplate&gt;\n                      &lt;ItemTemplate&gt;\n                          &lt;asp:LinkButton ID=\"LinkButton1\" runat=\"server\" CausesValidation=\"False\" \n                              CommandName=\"Edit\" Text=\"Edit\"&gt;&lt;/asp:LinkButton&gt;\n                          &amp;nbsp;&lt;asp:LinkButton ID=\"LinkButton2\" runat=\"server\" CausesValidation=\"False\" \n                              CommandName=\"Delete\" Text=\"Delete\" OnClientClick=\"return confirm('Are you sure?');\" &gt;&lt;/asp:LinkButton&gt;\n                      &lt;/ItemTemplate&gt;\n                      &lt;FooterTemplate&gt;\n                     &lt;asp:LinkButton ID=\"LinkButton\" runat=\"server\" CommandName=\"Insert\" Text=\"Insert\" ValidationGroup=\"validate\" &gt;&lt;/asp:LinkButton&gt;\n                     &lt;/FooterTemplate&gt;\n                  &lt;/asp:TemplateField&gt;\n\n                  &lt;asp:TemplateField HeaderText=\"Lab Name\" SortExpression=\"Lab Name\"&gt;\n                      &lt;ItemTemplate&gt;\n                          &lt;asp:Label ID=\"Label1\" runat=\"server\" Text='&lt;%# Bind(\"[Lab Name]\") %&gt;'&gt;&lt;/asp:Label&gt;\n                      &lt;/ItemTemplate&gt;\n                      &lt;EditItemTemplate&gt;\n                          &lt;asp:Label ID=\"Label1\" runat=\"server\" Text='&lt;%# Eval(\"[Lab Name]\") %&gt;'&gt;&lt;/asp:Label&gt;\n                      &lt;/EditItemTemplate&gt;\n                      &lt;FooterTemplate&gt;\n                          &lt;asp:TextBox ID=\"txtLabname\" runat=\"server\" &gt;&lt;/asp:TextBox&gt;\n                          &lt;asp:RequiredFieldValidator ID=\"LabName\" runat=\"server\" ControlToValidate=\"txtLabname\" Text=\"*\" ValidationGroup=\"validate\"/&gt;\n                      &lt;/FooterTemplate&gt;\n            &lt;/Columns&gt;\n          &lt;/asp:GridView&gt; \n</code></pre>\n"},{"tags":["asp.net-mvc","routing","redirect"],"answer_count":5,"favorite_count":16,"up_vote_count":19,"down_vote_count":0,"view_count":13884,"score":19,"question_id":815229,"title":"How do I redirect to the previous action in ASP.NET MVC?","body":"<p>Lets suppose that I have some pages</p>\n\n<p>some.web/articles/details/5</p>\n\n<p>some.web/users/info/bob</p>\n\n<p>some.web/foo/bar/7</p>\n\n<p>that can call a common utility controller like</p>\n\n<p>locale/change/es</p>\n\n<p>or</p>\n\n<p>authorization/login</p>\n\n<p>How do I get these methods (change, login) to redirect to the previous actions (details, info, bar) while passing the previous parameters to them (5, bob, 7)?</p>\n\n<p>In short: How do I redirect to the page that I just visited after performing an action in another controller?</p>\n"},{"tags":["javascript","asp.net-mvc","json"],"answer_count":12,"favorite_count":20,"up_vote_count":45,"down_vote_count":0,"view_count":15308,"score":45,"question_id":726334,"title":"ASP.NET MVC JsonResult Date Format","body":"<p>I have a controller action that effectively simply returns a JsonResult of my model. So, in my method I have something like the following:</p>\n\n<pre><code>return new JsonResult(myModel);\n</code></pre>\n\n<p>This works well, except for one problem. There is a date property in the model and this appears to be returned in the Json result like so:</p>\n\n<pre><code>\"\\/Date(1239018869048)\\/\"\n</code></pre>\n\n<p>How should I be dealing with dates so they are returned in the format I require? Or how do I handle this format above in script?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13234203,"title":"In MVC3, how can I create a route like mydomain.com/chigago and hit that route from a GET form?","body":"<p>I have an application that shows locations on a map. I have created a route so that I can have nice hackable URLs, like <a href=\"http://www.mydomain.com/paris\" rel=\"nofollow\">http://www.mydomain.com/paris</a>. This works fine just typing in the URL, but I have a search form on the home page that sends a GET request. When the form is submitted, the URL displayed in the location bar is in the format <a href=\"http://www.mydomain.com/Dashboard?location=paris\" rel=\"nofollow\">http://www.mydomain.com/Dashboard?location=paris</a>. Normally this wouldn't matter too much as it's hitting the correct action, but I have a backbone.js application running the show and it's particular about the URL structure.</p>\n\n<p>It may be impossible to do what I need without javascript or a redirect, because the location isn't known when the form ACTION attribute is populated - but can anyone confirm?</p>\n\n<p>Here are my routes.</p>\n\n<pre><code>public static void RegisterRoutes( RouteCollection routes )\n{\n    routes.IgnoreRoute( \"{resource}.axd/{*pathInfo}\" );\n    routes.MapRoute(\n        String.Empty,\n        \"{location}\",\n        new { \n            controller = \"Dashboard\",\n            action = \"Index\",\n            id = \"\"\n        }\n    );\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new\n        {\n            controller = \"Home\",\n            action = \"Index\",\n            id = UrlParameter.Optional\n        } // Parameter defaults\n    );\n\n}\n</code></pre>\n\n<p>Here is the controller.</p>\n\n<pre><code>public class DashboardController : Controller\n{\n    [HttpGet]\n    public ViewResult Index(string location)\n    {\n        return View(new AccItemSearch { Location = location });\n    }\n}\n</code></pre>\n\n<p>Here is the form.</p>\n\n<pre><code>        @using (Html.BeginForm(\"Index\", \"Dashboard\", FormMethod.Get)) {\n                &lt;h2&gt;Where are you going?&lt;/h2&gt;\n                &lt;input type=\"text\" placeholder=\"Area, town or postcode\" id=\"location\" name=\"location\"/&gt;\n                &lt;button&gt;Search!&lt;/button&gt;\n            &lt;/div&gt;\n        }\n</code></pre>\n\n<p><strong>To clarify</strong>: the problem I want help with is how to have the user submit the form then land on a page with the URL: <a href=\"http://www.mydomain.com/searchterm\" rel=\"nofollow\">http://www.mydomain.com/searchterm</a> and thus match the route, rather than on a page that with the URL <a href=\"http://www.mydomain.com/Dashboard\" rel=\"nofollow\">http://www.mydomain.com/Dashboard</a></p>\n"},{"tags":["javascript","asp.net","css","asp.net-mvc","twitter-bootstrap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13234893,"title":"RE:What's the best way to call a modal dialog in ASP.NET MVC using Twitter Bootstrap?","body":"<p>I looked at this example to create asp.net modal forms. I just had one bug that i cannot fix if somebody could please help out.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8093633/whats-the-best-way-to-call-a-modal-dialog-in-asp-net-mvc-using-twitter-bootstra/12843281#12843281\">What&#39;s the best way to call a modal dialog in ASP.NET MVC using Twitter Bootstrap?</a></p>\n\n<p>When using two or more modal dialogs in the same page(links passing in different parameters, and getting information), only one form works, and the others don't.</p>\n\n<p>I assume this is because of the id's.</p>\n\n<p>Could anybody help me out so that I can have multiple modal forms on the same page. (but of coarse only need one displayed at a time)</p>\n"},{"tags":["c#","html","asp.net-mvc","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13234765,"title":"Set model property in Jquery","body":"<p>I am trying to set Model property <strong>Id</strong> as follows :</p>\n\n<pre><code>'&lt;%= Model.Id %&gt;' = $(\"#Id\");  \n</code></pre>\n\n<p>But getting error in firebug :  </p>\n\n<pre><code>Invalid left-hand side in assignment.\n</code></pre>\n\n<p>How to set <code>Model.Id</code> ?<br>\nPlease let me know if more is required.<br>\nThanks,<br>\nNitish</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","servicestack","service-layer"],"answer_count":1,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1203,"score":6,"question_id":10571450,"title":"Should ServiceStack be the service layer in an MVC application or should it call the service layer?","body":"<p>I'm creating an MVC website and also intend to create a web API for use both within the website and potentially by third parties.</p>\n\n<p>From the MVC controllers I'll be calling into a service layer which will contain business logic, act on domain models, perform validation, make infrastructure external service calls etc. The service layer in turn will call into repositories for any database interactions. </p>\n\n<p>Now, I like the look of <a href=\"http://www.servicestack.net/\" rel=\"nofollow\">ServiceStack</a> and intend on using it for the Web API - it seems more mature than the <a href=\"http://www.asp.net/web-api\" rel=\"nofollow\">ASP.NET MVC 4 Web API</a>. My question is, should I have the ServiceStack API call into my service layer above, similar to the MVC controllers, or should I make it the service layer, servicing both web clients and the MVC controllers? </p>\n"},{"tags":["asp.net-mvc","telerik","telerik-mvc","telerik-reporting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13083013,"title":"IPAD IOS 6 not displaying Report in Telerik Report Viewer","body":"<pre><code>We are having issues where IPAD IOS 6 not displaying Report in Telerik Report Viewer                                            \n\nWe have an MVC ASP.NET application which calls the ReportViewer.                                                                              \n\nBut Report Viewer does not display the report when the 'Preview' button is selected.                                                          \n</code></pre>\n\n<p>Can you suggest how I can display the telerik report in IPAD IOS 6.  Hint: It works in IPAD IOS lower versions than current new version.                                                                     </p>\n\n<p>Thanks in advance.      </p>\n"},{"tags":["asp.net-mvc","rest","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13226287,"title":"How to Route True CRUD RESTful API with HTTP Methods","body":"<p>I am using Asp.NET MVC 4 Controllers (not WebAPI) to implement a true RESTful API where a single URL needs to point to different action methods based on the HTTP Method Type.</p>\n\n<p>So a URL such as mysite.com/Widget/1 could go to either of these three action methods:</p>\n\n<pre><code>[HttpPut]\npublic JSONResult Update(int widgetId) {}\n\n[HttpDelete]\npublic JSONResult Delete(int widgetId) {}\n\n[HttpGet]\npublic JSONResult Get(int widgetId) {}\n</code></pre>\n\n<p>What is the best way to route the one URL to these different action methods?</p>\n\n<p>I came across the <strong>ActionName</strong> filter, which I could set to be the same for each action method. My RouteConfig class will then always point to the same ActionName, and MVC will pick the right action method based on the HTTP method type attribute. </p>\n\n<pre><code>[HttpPut]\n[ActionName(\"CRUD\")]\npublic JSONResult Update(int widgetId) {}\n\n[HttpDelete]\n[ActionName(\"CRUD\")]\npublic JSONResult Delete(int widgetId) {}\n\n[HttpGet]\n[ActionName(\"CRUD\")]\npublic JSONResult Get(int widgetId) {}\n\nroutes.MapRoute(\n       name: \"Default\",\n       url: \"{controller}/{action}/{id}\",\n       defaults: new { controller = \"Widget\", action = \"CRUD\", id = UrlParameter.Optional }\n        );\n</code></pre>\n\n<p>Is there a better way though?</p>\n"},{"tags":["c#","asp.net-mvc","relationship"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13233993,"title":"How to narrow down a list of objects, based on relationship values in MVC?","body":"<p>I have a few models in a school system. \nI can get a list of all students from the <code>Index()</code> action in the StudentsController, but I also need an action where I can filter the list of students. </p>\n\n<p>For instance, an employee needs to be able to get a list of Students that are in Group A1, at Location XY and assign products (schooltrip) to that selection of Students.</p>\n\n<pre><code>public class Student\n{\n    public int ID { get; set; }\n    public string Name { get; set; }\n\n    public int StudyId { get; set; }\n    public int GroupId { get; set; }\n    public int LocationId { get; set; }\n}\n\npublic class Study\n{\n    public int StudyId { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Student&gt; Students { get; set; }\n}\n\npublic class Group\n{\n    public int GroupId { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Student&gt; Students { get; set; }\n}\n\npublic class Location\n{\n    public int LocationId { get; set; }\n    public string Name { get; set; }\n    public virtual ICollection&lt;Student&gt; Students { get; set; }\n}\n`\n</code></pre>\n\n<p>I assume I need a View Model?</p>\n\n<pre><code>public class ProductViewModel\n{\n    public IEnumerable&lt;Student&gt; Students { get; set; }\n    public Product Product { get; set; }\n    public IEnumerable&lt;Study&gt; Studies { get; set; }\n    public IEnumerable&lt;Group&gt; Groups { get; set; }\n    public IEnumerable&lt;Location&gt; Locations { get; set; }\n}\n</code></pre>\n\n<p>And then use an action on the ProductsController with a ProductId parameter, send all the filter options to the View via the ViewModel so i can use checkboxes on each <code>List&lt;&gt;</code> to drill down to the selection of Students that match the variables?</p>\n\n<p>I just don't know how to proceed.</p>\n"},{"tags":["jquery","asp.net-mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13233849,"title":"Ajax request MVC 4.0 using c#","body":"<p>I want to return a record by ajax request</p>\n\n<p>c# code is as:</p>\n\n<pre><code>    [HttpPost]\n    public WorkoutsViewModel GetSavedWorkoutTemplate(int WorkoutId)\n    {\n        return _db.Workouts.Where(w =&gt; w.Id == WorkoutId).Select(w =&gt; new WorkoutsViewModel\n        {\n            Tag = w.Tags.FirstOrDefault(),\n            Name = w.Name,\n            MaxEffort = w.MaxEffort,\n            Id = w.Id,\n            Description = w.Description,\n            Compare = w.Compare,\n            Category = w.Category\n        }).FirstOrDefault();\n    } \n</code></pre>\n\n<p>Jquey code is as:</p>\n\n<pre><code>function GetSavedWorkoutTemplate(obj) {      \n    $(\"#Workout\").hide();\n    var WorkoutId = $(obj).val();\n    if (WorkoutId == \"\") {\n        return;\n    }\n    var dto = { \"WorkoutId\": WorkoutId };\n\n    $.ajax({\n        type: \"post\",\n        url: \"/MemberWorkout/GetSavedWorkoutTemplate\",\n        contenttype: \"application/json; charset=utf-8\",\n        data: dto,       \n        success: function (result) {\n            debugger;\n            $(\"#Workout\").show();\n        },\n        error: function (result) {\n            alert(\"Unable to update status.\");\n        }\n    });\n}\n</code></pre>\n\n<p>Html as</p>\n\n<pre><code> @Html.DropDownList(\"ddlWorkout\", new SelectList(ViewBag.ddlWorkout, \"Id\", \"Name\"), \"--Select Workout--\", new { required = true, onchange = \"GetSavedWorkoutTemplate(this);\", style = \"width:310px\" })\n</code></pre>\n\n<p>In success function I got  result as \"TheGYM.Web.Models.WorkoutsViewModel\" as a string not a model, please correct me what I am doing wrong, I want to return a model.</p>\n"},{"tags":["asp.net-mvc","html5","css3","razor","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12210193,"title":"How to work with Action Link when using CSS","body":"<pre><code>&lt;li class=\"rtsLI\" id=\"Summary\"&gt;&lt;a href=\"javascript:void(0);\" onclick=\"javascript:rtsXXX.OnClientTabSelected(this, 0);\" class=\"rtsLink\"&gt;&lt;span class=\"rtsTxt\"&gt;Test&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; \n</code></pre>\n\n<p>Above I am replacing with following actionlink:</p>\n\n<pre><code>&lt;li class=\"rtsLI\" &gt;@Html.ActionLink(\"test1\", \"Index\", new { Area = \"Area1\", Controller = \"controller1\" }, new { @class = \"rtsLink rtsTxt\"})&lt;/li&gt; \"\n</code></pre>\n\n<p>At first css is working fine. But when using Actionlink, css not working. Thanks </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":12209555,"title":"How to include CSS Class in ActionLink in MVC4","body":"<p>My code is</p>\n\n<pre><code>@Html.ActionLink(\"test1\", \"Index\", new { Area = \"area1\", Controller = \"controller1\" })\n</code></pre>\n\n<p>I want to include the following css class in the action link.</p>\n\n<pre><code> class=\"rtsLink\" \n</code></pre>\n\n<p>Also, can we add multiple css class. If so, I need to add another css class.</p>\n\n<pre><code>class=\"rtsTxt\"\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>&lt;li class=\"rtsLI\" id=\"Summary\"&gt;&lt;a href=\"javascript:void(0);\" onclick=\"javascript:rtsXXX.OnClientTabSelected(this, 0);\" class=\"rtsLink\"&gt;&lt;span class=\"rtsTxt\"&gt;Test&lt;/span&gt;&lt;/a&gt;&lt;/li&gt; \n</code></pre>\n\n<p>Above I am replacing with following actionlink:</p>\n\n<pre><code>&lt;li class=\"rtsLI\" &gt;@Html.ActionLink(\"test1\", \"Index\", new { Area = \"Tools\", Controller = \"controller1\" }, new { @class = \"rtsLink rtsTxt\"})&lt;/li&gt; \"\n</code></pre>\n\n<p>At first css is working fine. But when using Actionlink, css not working. Thanks </p>\n"},{"tags":["c#","sql-server","asp.net-mvc","entity-framework","complex-data-types"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":69,"score":4,"question_id":13212338,"title":"Calling stored procedure in EF with Complex Data Type","body":"<p>I am new to working with <code>Entity Framework</code> in a sample <code>ASP.NET/MVC 3.0 VS2010</code> project. I have imported two stored procedures as Function Imports and, in doing so, created a complex data type for each.</p>\n\n<p>I am trying to run the following c# code:</p>\n\n<pre><code>public ComplexDataType RunStoredProc()\n{\n    var context = new DbEntities();\n    int param1 = 370;\n    int param2 = -1;\n    string param3 = \"Current\";\n\n    ComplexDataType result = new ComplexDataType;\n    result = context.StoredProc(param1, param2, param3);\n    return result;\n}\n</code></pre>\n\n<p>And I'm getting the error:</p>\n\n<pre><code>Cannot implicitly convert data type \n    System.Data.Objects.ObjectResult(ComplexDataType) to 'ComplexDataType'\n</code></pre>\n\n<p>What am I doing wrong? How do I properly store the results of the stored proc in a complex data type?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","web-config","globalization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13232243,"title":"Changing Language: globalization, culture depending on domain","body":"<p>I'm currently working on a MVC3 project where the globalization on a site is configured in the web.config. </p>\n\n<p></p>\n\n<p>I want to implement a functionality that changes the globalization to a different language depending on what domain your browsing from. So the globalization will change at run time depending on what site-address you browse from.  </p>\n\n<p>How can I acquire this functionality? </p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13231780,"title":"Passing updated row values to the action method in jqgrid","body":"<p>i'm using inline edit functionality with jqgrid, after editing i want to update my database with the changes the user made to the selected row...using the editurl im able to call a action method in my controller...i want to pass the row values to the controller, after making teh changes when the user clicks the enter button on the keyboard, i want to pass the updated values to the action method  i.e being called in the editurl..</p>\n\n<p>this is my jquery</p>\n\n<pre><code>     &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var lastsel;\n\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID', sortable: false, key: true },\n      { name: 'FirstName', key: true },\n      { name: 'LastName', sortable: false, key: true },\n      { name: 'Email', width: 200, sortable: false, key: true}],\n            cmTemplate: { align: 'center', editable: true },\n            pager: '#pager',\n            width: 750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid',\n            onSelectRow: function (StudentID) {\n\n\n                if (StudentID != lastsel) {\n\n\n                    jQuery('#list').jqGrid('restoreRow', lastsel);\n                    jQuery('#list').jqGrid('editRow', StudentID, true);\n\n                    lastsel = StudentID;\n\n                }\n\n            },\n\n            editurl: '/Home/About/',\n            caption: \"Using events example\"\n\n        });\n\n        jQuery(\"#list\").jqGrid('navGrid', \"#pager\", { edit: false, add: false, del: false });\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>so after passing the new values of the row to the action method, im sending those values from my controller to my model and updating using stored procedure..</p>\n\n<p>so here i would like to know how can i get the new updated values and pass them to my controller..??</p>\n"},{"tags":["c#",".net","sql","asp.net-mvc","asp.net-membership"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13224405,"title":"Update custom user profile fields with SimpleMembershipProvider?","body":"<p>I added a custom field to the <code>UserProfile</code> table named <code>ClassOfYear</code> and I'm able to get the data into the profile during registration like this:</p>\n\n<pre><code>var confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName,\n    model.Password,\n    propertyValues: new { ClassOfYear = model.ClassOfYear },\n    requireConfirmationToken: true);\n</code></pre>\n\n<p>However, now I want to be able to update the profile when I manage it but I can't seem to find a method to do so. <strong>Do I need to simply update the <code>UserProfile</code> table myself? If not, what is the appropriate way of doing this?</strong></p>\n\n<p>FYI, I'm using Dapper as my data access layer, just in case it matters. But, like stated, I can just update the <code>UserProfile</code> table via Dapper if that's what I'm supposed to do, I just figured that the <code>WebSecurity</code> class, or something similar, had a way already since the custom user profile fields are integrated with the <code>CreateUserAndAccount</code> method.</p>\n\n<p>Thanks all!</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1976,"score":0,"question_id":5363907,"title":"Library Package Manager does not appear","body":"<p>I installed ASP MVC 3, but when I go to tools I can't see the Library Package Manager, it was supposed to install along ASP MVC 3, how come I cannot see it?</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":7,"view_count":47,"score":-7,"question_id":13231407,"title":"declaring List of 2d array for point in C#","body":"<p>What I needed is a List of 2d array of type int and double. So that i can append Cartesian points.</p>\n\n<pre><code>List&lt;System.Drawing.Point debitpointList = new List&lt;System.Drawing.Point&gt;();\nforeach (KeyValuePair&lt;int, double&gt; pair in debit.Reverse())\n{\n    debitpointList.Add(pair.value);\n}\n</code></pre>\n\n<p>This piece of code is not working. How can I fix it?</p>\n"},{"tags":["c#","asp.net-mvc","nhibernate","jtable"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13156103,"title":"JTable event Update - show error","body":"<p>I would like to show error in jtabele standard event (for example alert()) but I don`t know what I have to do. Code is working correct. The most important place is if(UpdateOrNot==1){} </p>\n\n<pre><code>public void OnUpdated(DictionaryListModel dictionaryListModel)\n        {\n            var listModel = (DictionarySkillListModel)dictionaryListModel;\n            if (dictionaryListModel == null)\n                throw new Exception(\"Niepoprawny model\");\n\n            int UpdateOrNot=0;\n            try\n            {\n            if (listModel.IsActiveYN == false)\n            {\n                var list =\n                    _skillService.CheckSkillProcedur(listModel.Id, listModel.Description).ToList();\n                foreach (var procSkillValue in list)\n                {\n                    UpdateOrNot = procSkillValue.ExistOrNotExist;\n                }\n                if(UpdateOrNot==1)\n                {\n                  //here I would like to past my alert\n                }\n                else\n                {\n                    var skill = _skillService.Get(listModel.Id);\n                    skill.Name = listModel.Description;\n                    skill.IsActive = listModel.IsActiveYN;\n                    _skillService.Update(skill);\n                }   \n            }\n            }\n            catch (Exception ex)\n            {}\n\n        }\n</code></pre>\n"},{"tags":["java","asp.net-mvc","applet"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13231740,"title":"Java Applet File Upload Session","body":"<p>I have java applet which runs inside the page that has asp.net MVC project. i'll be passing params from asp.net to applet using  tag\nfunction of applet is to search automatically the client side files and do some file processing and list in the jtable. it works absolutely fine when i run the applet in page and open it in a one tab or one window. </p>\n\n<p>issue happens when i run the same applet page in a multiple tabs or multiple windows under the same session. what happens is during file upload it picks value from jtable it is clearing value from all the jtable from different windows / tabs though i was uploading files from one tab / window.</p>\n\n<p>please let me know if you have any ways to fix the same issue.</p>\n"},{"tags":["c#","asp.net-mvc","federated-identity","adfs2.0","sts-securitytokenservice"],"answer_count":4,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":2606,"score":11,"question_id":4460720,"title":"Error - A SignInResponse message may only redirect within the current web application - MVC 2.0 application","body":"<p>I have a situation where we have a MVC 2 application(I tried this with a basic MVC 2 app without any extra stuff, still same problem) and am using adfs 2 for authenticating my users.</p>\n\n<p>So..\nNow I get into my application and I get the below..\n<strong><em>ID3206: A SignInResponse message may only redirect within the current web application: '/[app]' is not allowed. \nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \nException Details: Microsoft.IdentityModel.Protocols.FederationException: ID3206: A SignInResponse message may only redirect within the current web application: '/[app]' is not allowed.</em></strong></p>\n\n<p>I have read most blogs on this, and posted to one..</p>\n\n<pre><code>    &lt;federatedAuthentication&gt;\n            &lt;wsFederation passiveRedirectEnabled=\"true\" issuer=\"https://auth.[domain]/adfs/ls/\" realm=\"https://[development domain]/[app]/\" requireHttps=\"true\" /&gt;\n            &lt;cookieHandler requireSsl=\"true\" /&gt;\n          &lt;/federatedAuthentication&gt;\n&lt;audienceUris&gt;\n    &lt;add value=\"https://[development domain]/[app]/\" /&gt;\n  &lt;/audienceUris&gt;\n</code></pre>\n\n<ol>\n<li>I have the trailing slash on the realm and audienceUris. </li>\n<li>I have added what he suggested to Application_BeginRequest  I then copied code to [development domain] as thats where the certs are.. It just gets stuck in an infinite loop then.</li>\n<li>I also have checked my Relying Party on the Geneva server.. The Identifiers and Endpoints(POST) are both https://[development domain]/[app]/ - again with the trailing slash</li>\n</ol>\n\n<p>I think its a problem with the fact its a MVC application, I have created numerous Claims Aware website and got my claims etc on the default.aspx page. My thinking is that the routing that is involved with the MVC app is somehow posting it back wrong?</p>\n\n<p>any help really apprecaited as Im looking at this for quiet a while now to no avail..</p>\n\n<p>J</p>\n"},{"tags":["jquery","asp.net-mvc","json"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":735,"score":4,"question_id":1471066,"title":"Partial Views vs. Json (or both)","body":"<p>I use ASP.NET MVC with jQuery and have a lot of Ajax requests to my controllers.</p>\n\n<p>Use Partial Views (usercontrols) to build the intial view when a page is loaded. Then if I need to append/replace data based on my Ajax request I build HTML from the Json response.</p>\n\n<p>This approach gives me full control, ie. I can get extra information back from my controller if something went wrong, and then show an error message based on that.</p>\n\n<p>However, recently I've been really annoyed with all the extra work that goes into maintaining HTML structure both in my partial views and the part that generates HTML from Json.</p>\n\n<p>I like to make a jQuery ajax request and then have the controller return PartialView(\"mypartialview\") and then just use jQuery to replace to HTML in the view.</p>\n\n<p>However, this way I cannot attach extra data from the controller - it's either whatever the partial view gives me - or nothing. At least that's my current take on it.</p>\n\n<p>If some validation goes wrong at some point in my controller action I don't want to return the HTML of the partial view.</p>\n\n<p>So how do you go about handling this issue?</p>\n\n<p>Thanks for reading.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13231150,"title":"Asp.net mvc Postback and viewstate","body":"<p>I am beginner to asp.net mvc. so i am in the process of learning mvc.. i have few queried</p>\n\n<p>1)i saw in many websites like asp.net mvc will not support viewstate,servercontrols and postbacks</p>\n\n<p>but when i tried some thing like this in View, postback happened and when i check on pagesource i can see viewstate also</p>\n\n<pre><code>&lt;form runat=server&gt;\n&lt;div&gt;\n    &lt;asp:TextBox runat=server ID=\"TextBox1\"   Text=\"hello\"  EnableViewState=true  &gt;&lt;/asp:TextBox&gt;\n    &lt;asp:Button runat=\"server\" Text=\"Hit me\"  ID=\"Button1\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Corresponding View state\n <code>&lt;input type=\"hidden\" name=\"__VIEWSTATE\" id=\"__VIEWSTATE\" value=\"/wEPDwUJMjgzMDgzOTgzZGQZdCtl6SPLjo4DxyEyHMQ5ERvWAmS3qO6HaMtUszCjjA==\" /&gt;</code></p>\n\n<p>I know we should prefer only html controls but what's the case when i am using server control..the framework is accepting </p>\n\n<p>pls help me in this.. and i will also be happy if anyone sharing some good links for understanding why asp.net mvc (not asp.net) with examples</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13221104,"title":"find time in hour from two datetime in asp.net mvc using linq","body":"<p>I m working on timesheet module.What my problem is i have table with following fields</p>\n\n<pre><code>work_start_time  Datetime\nwork_end_time    Datetime\nand other field\n</code></pre>\n\n<p>now my requirement is i have to calculate total hour submitted till date.</p>\n\n<p>field are save like this format <code>dd/mm/yy 10:00 AM</code></p>\n\n<p>please anybody help me how to find total hour from above two field and sum total hour using LINQ.</p>\n\n<p>any help would be appreciated. </p>\n\n<pre><code>int totalhours = (from d in db.timesheetWorkingHours\n                             .Where(d=&gt;d.WStartTime.HasValue &amp;&amp; d.WEndTime.HasValue)\n                             select (d.WStartTime - d.WEndTime).Hours).FirstOrDefault();\n\nits gives error \n\n'System.Nullable&lt;System.TimeSpan&gt;' does not contain a definition for 'Hours' and no extension method 'Hours' accepting a first argument of type 'System.Nullable&lt;System.TimeSpan&gt;' could be found (are you missing a using directive or an assembly reference?) \n</code></pre>\n"},{"tags":["asp.net-mvc","jquery-mobile","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13228514,"title":"Tutorial or book about MVC 4 and jQuery","body":"<p>I have been looking for many days now for an advanced tutorial or book on integrating MVC 4 and jQuery Mobile(Visual studio 2012). I am into building \"mobile-only\" sites (not desktop sites which are also mobile friendly but mobile-only sites from the ground). </p>\n\n<p>Most of the tutorials and books I have found talk about Asp.net MVC4 in general and devote only one or 2 chapters on mobile-only new features in MVC 4 (basically they just mention new project template \"Mobile Application\" in the Visual Studio 2012 but they don't got in-depth about integrating jQuery mobile and MVC 4). </p>\n\n<p>Other tutorials just explain the \"basics\" of mvc 4 and jquery mobile ( hello-world-like tutorials). I'm looking for something more advanced and professional tutorial or book mainly devoted on <strong>mvc 4</strong> *<em>and</em>* <strong>jquery mobile</strong> for mobile-only sites where one can more efficiently learn to use the power of the 2 worlds: mvc 4 and jquery mobile</p>\n\n<p>Thank you very much for your time and your suggestions.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","membership-provider","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13172033,"title":"How to autoCreateTables along with SimpleMembership tables in ASP.NET MVC","body":"<p>Today, I created a new ASP.NET MVC 4 project - Internet application.</p>\n\n<p>With all the files that comes in the solution in the Account Controller I saw an attribute called <code>[InitializeSimpleMembership]</code></p>\n\n<pre><code>[Authorize]\n[InitializeSimpleMembership]\npublic class AccountController : Controller\n{}\n</code></pre>\n\n<p>and by only providing a proper db connectionstring property in the web.config</p>\n\n<pre><code>&lt;connectionStrings&gt;\n&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.;\nInitial Catalog=demo;\nUser ID=test;Password=test;\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>and when the application runs, it checks if the available database exists or not and if not creates one and adds few memebership tables to it also. I must say I was very very impressed with the new MVC 4 - Internet app template.</p>\n\n<p><strong>Which brings me to my question :</strong>\nI liked the idea of creating database and executing script from the application. I wanted to know how to add more tables to this.</p>\n\n<p>For example : In the <code>InitializeSimpleMembershipAttribute.cs</code> file it check if a database is present, if not it creates it using the credentials present in the web.config and also adds the following tables to it.</p>\n\n<ul>\n<li>UserProfile</li>\n<li>webpages_Membership</li>\n<li>webpages_OAuthMembership</li>\n<li>webpages_Roles</li>\n<li>webpages_UsersInRoles</li>\n</ul>\n\n<p><strong>what changes do I have to make to have my other tables to be added along with this ?</strong></p>\n\n<p>If this is possible, the idea of keeping sql scripts and executing them on each clean deploy can be avoided. I am working on a self-host MVC app ( It's Open-source, soon to come on Codeplex ;) ) so this will really be good for people who want to use my app without getting their hands dirty in SQL scripts.</p>\n\n<p>Please can some one let me know if this is even possible. Thanks</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13228681,"title":"ASP .NET MVC - Getting object template string result out of a view","body":"<p>I am re-opening my question as it has been set as duplicate while it is not - or people who tagged it as duplicate should explain me why it is a duplicate..........\n<a href=\"http://stackoverflow.com/questions/13227988/html-displayfor-result\">Html.DisplayFor() result</a></p>\n\n<p>How can I get the result of the method Html.DisplayFor() in a C# Class, like in a View model or even in a Controller ? And not in the View Aspx or Razor.</p>\n\n<p>[Edit]\nIn fact I have a table to display and depending on the number of record I use a Telerik table or a simple HTLM table.</p>\n\n<p>For the moment I have a function in my view to get the string to display for each column so I use the same format for both tables.</p>\n\n<pre><code>&lt;%@ Control Language=\"C#\" Inherits=\"System.Web.Mvc.ViewUserControl&lt;ViewModels.OrderViewModel&gt;\" %&gt;\n\n&lt;script runat=\"server\" type=\"text/C#\"&gt;\n\npublic string GetCellValue (String columnName, Order order)\n{\n        string value = \"\";\n        switch (columnName)\n        {\n            case \"Ref\":\n                value = order.order.Reference.ToString(); break;\n            case \"Etc\":\n                value = Html.DisplayFor(p =&gt; order.order.Etc).ToHtmlString();break;             \n            case \"Payment date\": \n                foreach (Executions ex in order.executions)\n                {\n                    value += ex.Date.Date.ToString(\"yyyy-MM-dd\") + \" \";\n                }\n                break;      \n</code></pre>\n\n<p>I want to move this function out of my view in the ViewModel for example, but I do not know how I can call the function Html.DisplayFor() out of a view.</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13229244,"title":"how to update changes made to jqgrid using inline edit?","body":"<p>how can we update the changes made to a cells of a particular row in the jqgrid....i want to update it to the database...im using inline edit for editing..i want to update that particular row to database where the usermade changes</p>\n\n<p>this is my jquery code</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var lastsel;\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID',sortable: false,key:true },\n      { name: 'FirstName' },\n      { name: 'LastName', sortable: false},\n      { name: 'Email', width: 200,  sortable: false}],\n      cmTemplate: {align: 'center', editable: true},\n            pager: '#pager',\n            width: 750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid',\n            onSelectRow: function (StudentID) {\n\n\n                if (StudentID != lastsel) {\n\n\n                    jQuery('#list').jqGrid('restoreRow', lastsel);\n                    jQuery('#list').jqGrid('editRow', StudentID, true);\n\n                    lastsel = StudentID;   \n                }\n\n            },\n\n            editurl: '/Home/About/',\n            caption: \"Using events example\"\n\n        });\n        jQuery(\"#list\").jqGrid('navGrid', \"#pager\", { edit: false, add: false, del: false });\n    });\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","wpf","asp.net-mvc","webmatrix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13161841,"title":"Using WebMatrix.WebData.WebSecurity in a WPF application","body":"<p>I have an MVC4 internet project that uses the out of the box WebMatrix security. A requirement has come along to add a WPF front end to the same application. I have moved the model into a separate DLL and started building the WPF front end over the same entities.</p>\n\n<p>The only issue I am having is trying to integrate with the existing security model. I have added a system.web section into my WPF project's app.config as follows:</p>\n\n<pre><code>&lt;system.web&gt;\n  &lt;membership defaultProvider=\"SimpleMembershipProvider\"&gt;\n    &lt;providers&gt;\n      &lt;clear/&gt;\n      &lt;add name=\"SimpleMembershipProvider\" type=\"WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData\" /&gt;\n    &lt;/providers&gt;\n  &lt;/membership&gt;\n&lt;/system.web&gt;\n</code></pre>\n\n<p>Now when I call <code>WebSecurity.Login(\"Username\", \"Password\")</code> I get the following error:</p>\n\n<blockquote>\n  <p>You must call the \"WebSecurity.InitializeDatabaseConnection\" method before you call any other method of the \"WebSecurity\" class. This call should be placed in an _AppStart.cshtml file in the root of your site.</p>\n</blockquote>\n\n<p>I have tried calling the <code>InitializeSimpleMembershipAttribute();</code> code that comes with the MVC project in the start-up of my WPF application, but it makes no difference to the above error. </p>\n\n<p>I cannot find any examples on-line of how to do this, am going down a dead end here? </p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net-mvc","dataannotations"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13221937,"title":"ASP.NET MVC add validators for dictionary property","body":"<p>I think it's a common question, but I haven't found any working solution yet. So, the model looks like this:</p>\n\n<pre><code>public class CustomMaterial\n{\n    ...\n    public Dictionary&lt;String, String&gt; Properties { get; set; }\n    ...\n}\n</code></pre>\n\n<p>Properties is fetched from database, Key - property name, Value - value represented as string. I want to add validators (ex. RequiredAttribute) for each item in the dictionary without using DataAnnotations attributes and/or specific model binders. How I can provide this ? Maybe the item.Value should be an Object, which can store validator instance and value, but how ?</p>\n\n<p>*<strong>[UPDATE]</strong></p>\n\n<p>I found the solution - you should inherit your type from IValidatableObject and should store your IValidatableObject object as value in the dictionary.</p>\n"},{"tags":["javascript","asp.net-mvc","internet-explorer-10"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":94,"score":7,"question_id":13218759,"title":"Javascript executing MVC code in If statement incorrectly","body":"<p>I am a bit stumped with the following code.  It worked fine in VS2010 on Windows 7, and now that I've upgraded the hardware to Windows 8 and VS 2012, it does not.</p>\n\n<p>I have the following JavaScript code in my MVC application:</p>\n\n<pre><code>&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\nvar today;\n\nif(\"@Model.Birthday.HasValue\"){\n    var today = new Date(\"@Model.Birthday.Value.Year\", \"@Model.Birthday.Value.Month\" - 1, \"@Model.Birthday.Value.Day\");\n}else{\n    today = new Date();\n}\n</code></pre>\n\n<p>The Model is pulling from a ViewModel that has a property that looks like this:</p>\n\n<pre><code>    public System.DateTime? Birthday\n    {\n        get { return user.Birthday; }\n        set { user.Birthday = value; }\n    }\n</code></pre>\n\n<p>The exception is thrown in the line:</p>\n\n<pre><code>var today = new Date(\"@Model.Birthday.Value.Year\", \"@Model.Birthday.Value.Month\" - 1, \"@Model.Birthday.Value.Day\");\n</code></pre>\n\n<p>It comes back with \"Nullable object must have value\", which it should if it jumps in that line to execute.  But, my if statement is returning false.  If I remove the line and just put in an alert statement, it never executes that line or shows the alert, because the Birthday property is null.  Something seems to have shifted in how JS executes MVC code, and it seems to evaluate the entirety of the code block, regardless of the if statement.  I've also tried the following, but to no avail:</p>\n\n<ul>\n<li>Tested in Chrome for W8</li>\n<li>Tested in a try / catch block.  Interestingly, it doesn't catch the exception (I guess JS won't catch .NET exceptions)</li>\n<li>Tested by explicitly stating @Model.Birthday.HasValue == true</li>\n<li>Tested by changing it to @Model.Birthday.Value != null</li>\n<li>Tested in Release mode over Debug Mode</li>\n</ul>\n\n<p>This should be simple - test to see if a value is null, and if it's not, create a JS Date object from the .NET property, if it is, create a new JS Date object, but for some reason, it want's to evaluate and execute that line, even though HasValue is false.</p>\n\n<p>Really stumped.  Has anyone seen something like this?</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","ajax","json"],"answer_count":28,"favorite_count":179,"up_vote_count":543,"down_vote_count":1,"view_count":158505,"score":542,"question_id":206384,"title":"How to format a JSON date?","body":"<p>I'm taking my first crack at Ajax with jQuery. I'm getting my data onto my page, but I'm having some trouble with the JSON data that is returned for Date data types. Basically, I'm getting a string back that looks like this:</p>\n\n<pre><code>/Date(1224043200000)/\n</code></pre>\n\n<p>From someone totally new to JSON - How do I format this to a short date format? Should this be handled somewhere in the jQuery code? I've tried the <code>jQuery.UI.datepicker</code> plugin using <code>$.datepicker.formatDate()</code> without any success.</p>\n\n<p>FYI: Here's the solution I came up with using a combination of the answers here:</p>\n\n<pre><code>function getMismatch(id) {\n  $.getJSON(\"Main.aspx?Callback=GetMismatch\", \n    { MismatchId: id },\n\n    function (result) {\n      $(\"#AuthMerchId\").text(result.AuthorizationMerchantId);\n      $(\"#SttlMerchId\").text(result.SettlementMerchantId);\n      $(\"#CreateDate\").text(formatJSONDate(Date(result.AppendDts)));\n      $(\"#ExpireDate\").text(formatJSONDate(Date(result.ExpiresDts)));\n      $(\"#LastUpdate\").text(formatJSONDate(Date(result.LastUpdateDts)));\n      $(\"#LastUpdatedBy\").text(result.LastUpdateNt);\n      $(\"#ProcessIn\").text(result.ProcessIn);\n    }\n  );\n\n  return false;\n}\n\nfunction formatJSONDate(jsonDate) {\n  var newDate = dateFormat(jsonDate, \"mm/dd/yyyy\");\n  return newDate;\n}\n</code></pre>\n\n<p>This solution got my object from the callback method and displayed the dates on the page properly using the date format library.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":56,"score":-5,"question_id":13227988,"title":"Html.DisplayFor() result","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6365633/what-is-the-html-displayfor-syntax-for\">What is the @Html.DisplayFor syntax for?</a>  </p>\n</blockquote>\n\n\n\n<p>Is it possible to get the result of the function Html.DisplayFor() out of a view, for example in a View Model ?</p>\n\n<p>Thank you for your answers.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","knockout-2.0"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13227936,"title":"using Knockoutjs with MVC Display and Editor templates","body":"<p>I would like my project less depended on external libraries. just in case I considered switching to different library in the future. </p>\n\n<p>for simplicity, consider a different design scenario for the shopping cart editor <a href=\"http://knockoutjs.com/examples/cartEditor.html\" rel=\"nofollow\">example</a>.</p>\n\n<p>each item in the cart will have a server-side model.  the model will have 2 templates .one for displaying and the other for editing (razor templates in DisplayTemplates and EditorTemplates folders).</p>\n\n<p>for displaying items, I would like to use the model display template (DisplayForModel or Html.RenderPartial)\nfor editable items, I would use the editor template for the model. </p>\n\n<p>knockout will only be there to observe changes in client-side. (such as unit price, quanity, discount ..etc) and computing sub totals and grand total.</p>\n\n<p>would that be possible or shall i simply cosider another library?</p>\n"},{"tags":["asp.net-mvc","html5"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13224473,"title":"HTML5 with ASP.NET MVC","body":"<p>We are plannig a new project and we want to use ASP.NET in conjunction with the MVC pattern. We want also have acces to new features includes in HTML5. But we do not found  many information or people going in the same direction.</p>\n\n<p>Is there some kind of contradiction with ASP.NET MVC with HTML5 or the subject is so trivial that just a few people are talking about it ?</p>\n\n<p>(Question reformulated)</p>\n"},{"tags":["c#","asp.net-mvc","authentication","entity-framework-4","membership-provider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":148,"score":0,"question_id":13207893,"title":".net MVC Simple Membership Authentication with Database","body":"<p>Using Code First Entity Framework with .NET MVC 4 I have created a new Web Application and populated the database with object as shown below.</p>\n\n<pre><code> public class GratifyGamingContext : DbContext\n{\n    public DbSet&lt;Game&gt; Games { get; set; }\n    public DbSet&lt;Genre&gt; Genres { get; set; }\n    public DbSet&lt;UserProfile&gt; UserRepository { get; set; }\n}\n</code></pre>\n\n<p>I want to use my UserRepository table instead of the inbuilt UserContext class from AccountModel.cs for my user account access since I can't get that the work with my existing dbContext.</p>\n\n<pre><code>    public class UsersContext : DbContext\n{\n    public UsersContext()\n        : base(\"DefaultConnection\")\n    {\n    }\n\n    public DbSet&lt;UserProfile&gt; UserProfiles { get; set; }\n}\n\n[Table(\"UserProfile\")]\npublic class UserProfile\n{\n    [Key]\n    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]\n    public int UserId { get; set; }\n    public string UserName { get; set; }\n}\n</code></pre>\n\n<p>My program always crashes when constructing a SimpleMembershipInitializer object from InitializeSimpleMembershipAttribute.cs. I have commented out the code I feel should be irrelevant.</p>\n\n<pre><code>    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute\n{\n    private static SimpleMembershipInitializer _initializer;\n    private static object _initializerLock = new object();\n    private static bool _isInitialized;\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        // Ensure ASP.NET Simple Membership is initialized only once per app start\n        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);\n    }\n\n    private class SimpleMembershipInitializer\n    {\n        public SimpleMembershipInitializer()\n        {\n            //Database.SetInitializer&lt;UsersContext&gt;(null);\n\n            try\n            {\n                using (var context = new GratifyGamingContext())\n                {\n                    if (!context.Database.Exists())\n                    {\n                        // Create the SimpleMembership database without Entity Framework migration schema\n                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();\n                    }\n                }\n\n                WebSecurity.InitializeDatabaseConnection(\"DefaultConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n            }\n            catch (Exception ex)\n            {\n                throw new InvalidOperationException(\"The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588\", ex);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>My ConnectionString is as follows:</p>\n\n<pre><code>&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=.\\SQLEXPRESS;Initial Catalog=aspnet-GratifyGaming-20120917185558;AttachDbFilename=|DataDirectory|\\Games.mdf;Integrated Security=True\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>I get the following error when calling the WebSecurity.InitializeDatabaseConnect from any AccountController page:</p>\n\n<blockquote>\n  <p>[SqlException (0x80131904): Directory lookup for the file\n  \"C:\\Users\\Unreal\\Documents\\Visual Studio\n  2010\\Projects\\GratifyGaming\\GratifyGaming.WebUI\\App_Data\\Games.mdf\"\n  failed with the operating system error 2(failed to retrieve text for\n  this error. Reason: 15105). Cannot attach the file\n  'C:\\Users\\Unreal\\Documents\\Visual Studio\n  2010\\Projects\\GratifyGaming\\GratifyGaming.WebUI\\App_Data\\Games.mdf' as\n  database 'aspnet-GratifyGaming-20120917185558'.]</p>\n  \n  <p>[TargetInvocationException: Exception has been thrown by the target of\n  an invocation.]    System.RuntimeTypeHandle.CreateInstance(RuntimeType\n  type, Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0</p>\n</blockquote>\n\n<p>My application is otherwise connected to the database if I do not go to any AccountController driven page.\nHow can I configure this application to use my UserRepository table instead of the UsersContext for user membership?</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13194600,"title":"jQgrid inline edit functionality","body":"<p>I want to to assign inline edit feature to my jqgrid, i.e when the cuser clicks a particular row, he should be able to edit..</p>\n\n<p>im following this url for the jqeury code but its not working, im not able get edit also</p>\n\n<p><a href=\"http://www.trirand.com/blog/jqgrid/jqgrid.html#\" rel=\"nofollow\">http://www.trirand.com/blog/jqgrid/jqgrid.html#</a></p>\n\n<p>this is my view</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table id=\"list\"&gt;&lt;/table&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>JavaScript code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        var lastsel;\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID',sortable: false,key:true },\n      { name: 'FirstName' },\n      { name: 'LastName', sortable: false},\n      { name: 'Email', width: 200,  sortable: false}],\n      cmTemplate: {align: 'center', editable: true},\n            pager: '#pager',\n            width: 750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid',\n            onSelectRow: function (StudentID) {\n\n\n                if (StudentID != lastsel) {\n\n                    lastsel = StudentID;   \n                    jQuery('#list').jqGrid('restoreRow', lastsel);\n                    jQuery('#list').jqGrid('editRow', StudentID, true);\n\n\n                }\n\n            },\n\n            editurl: '/Home/GetStudents/',\n            caption: \"Using events example\"\n\n        });\n        jQuery(\"#list\").jqGrid('navGrid', \"#pager\", { edit: false, add: false, del: false });\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>these are my scripts, i added</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;link href=\"/Content/jquery-ui-1.8.7.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/ui.jqgrid.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"/Content/ui.multiselect.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"/Scripts/jquery-1.4.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;  \n&lt;script src=\"/Scripts/grid.locale-en.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/jquery.jqGrid.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/rowedex3.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13224836,"title":"Datepicker - no reaction","body":"<p>I'm trying to add datapicker to my project. I have followed a tutorial.</p>\n\n<p>I have added the following code to the DatePickerReady.js file:</p>\n\n<pre><code>$(function () {\n    $(\".datefield\").datepicker(); \n});\n</code></pre>\n\n<p>I have added the following code at bottom of the head element in the Views\\Shared_Layout.cshtml file.</p>\n\n<pre><code>&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.core.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.datepicker.css\")\" rel=\"stylesheet\"  type=\"text/css\" /&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.theme.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.ui.core.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.ui.datepicker.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/DatePickerReady.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have added this to Views\\Home\\Index.cshtml</p>\n\n<pre><code>@model Nullable&lt;DateTime&gt;\n\n @{\n    string dts =\"\";\n    if (Model != null)\n    {\n        dts = ((DateTime)Model).ToShortDateString();\n\n    }\n    @Html.TextBox(\"start\", String.Format(\"{0:d}\", dts), new { @class = \"datefield\", type = \"date\"  })\n} \n</code></pre>\n\n<p>But when I focus/click the textbox it does nothing. The calendar doesn't appear. I'm not  getting any errors as well.</p>\n\n<p>Any clue?</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui","jquery-ui-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13225156,"title":"Jquery dialog isn't working in MVC","body":"<p>Now I know it's been asked before but I can't seem to get JQUERY dialog to work.</p>\n\n<p>I have an easy example that I got from the JQUERY website but the dialog never pops up.</p>\n\n<p>My _Layout.cshtml page</p>\n\n<pre><code>    &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\"&gt;\n        &lt;head&gt;\n            &lt;meta charset=\"utf-8\" /&gt;\n            &lt;title&gt;@ViewBag.Title - My ASP.NET MVC Application&lt;/title&gt;\n            &lt;link href=\"~/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\" /&gt;\n            &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n            &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n            &lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui-1.8.20.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;link href=\"@Url.Content(\"~/Content/themes/base/jquery.ui.all.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n            @Styles.Render(\"~/Content/css\")\n            @Scripts.Render(\"~/bundles/modernizr\")\n        &lt;/head&gt;\n        &lt;body&gt;\n            &lt;header&gt;\n                &lt;div class=\"content-wrapper\"&gt;\n                    &lt;div class=\"float-left\"&gt;\n                        &lt;p class=\"site-title\"&gt;@Html.ActionLink(\"your logo here\", \"Index\", \"Home\")&lt;/p&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"float-right\"&gt;\n                        &lt;section id=\"login\"&gt;\n                            @Html.Partial(\"_LoginPartial\")\n                        &lt;/section&gt;\n                        &lt;nav&gt;\n                            &lt;ul id=\"menu\"&gt;\n                                &lt;li&gt;@Html.ActionLink(\"Home\", \"Index\", \"Home\")&lt;/li&gt;\n                                &lt;li&gt;@Html.ActionLink(\"About\", \"About\", \"Home\")&lt;/li&gt;\n                                &lt;li&gt;@Html.ActionLink(\"Contact\", \"Contact\", \"Home\")&lt;/li&gt;\n                            &lt;/ul&gt;\n                        &lt;/nav&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/header&gt;\n            &lt;div id=\"body\"&gt;\n                @RenderSection(\"featured\", required: false)\n                &lt;section class=\"content-wrapper main-content clear-fix\"&gt;\n                    @RenderBody()\n                &lt;/section&gt;\n            &lt;/div&gt;\n            &lt;footer&gt;\n                &lt;div class=\"content-wrapper\"&gt;\n                    &lt;div class=\"float-left\"&gt;\n                        &lt;p&gt;&amp;copy; @DateTime.Now.Year - My ASP.NET MVC Application&lt;/p&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/footer&gt;\n\n            @Scripts.Render(\"~/bundles/jquery\")\n            @RenderSection(\"scripts\", required: false)\n        &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>My Index.cshtml page</p>\n\n<pre><code>    &lt;div id=\"dialog\" title=\"Basic dialog\"&gt;\n        &lt;p&gt;This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.&lt;/p&gt;\n    &lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO\");\n    });\n&lt;/script&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n        $(function () {\n            $(\"#dialog\").dialog();\n        });\n    &lt;/script&gt;\n</code></pre>\n\n<p>The alert pops up but the dialog doesn't, any idea why?</p>\n\n<p>EDIT: Did some editing and now I have this.</p>\n\n<pre><code>&lt;div id=\"dialog\" title=\"Basic dialog\"&gt;\n    &lt;p&gt;This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO\");\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO2\");\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $(\"#dialog\").dialog();\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        alert(\"HELLO3\");\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>Now when I have three alerts, it will alert HELLO and HELLO2 but it never does HELLO3.. however if I put the HELLO3 script above the dialog script it will display all 3 alerts. Any ideas what is going on?</p>\n"},{"tags":["android","asp.net-mvc","long-polling"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":133,"score":5,"question_id":13079145,"title":"Understanding long polling: client (android) and server (asp net)","body":"<p>I'm developing android application where users can compete in some kind of battles. On the server side I need to receive requests from user for starting a battle, and then, using some algorithm, choose the most preferable opponent for him. During a battle I also need to send notifications to competitors about their opponent's actions.</p>\n\n<p>So it seems that I need to implement long polling on my server. My questions are:</p>\n\n<ol>\n<li><p><strong>Server side</strong>. I'm using asp.net mvc server. I had a look at <a href=\"https://github.com/SignalR/SignalR\">SignalR</a> framework and it seems to be just what I need. However, just because I'm new to long polling, I haven't understood its internal principles of work. So I need explanations on how to use this framework, or how to implement long polling some other way.</p></li>\n<li><p><strong>Client side.</strong> As far as I understood, long polling requests model slightly differs from standard \"request-response\" model, so I'm also wondering how to implement these requests on client side.</p></li>\n</ol>\n\n<p>I'm looking forward to any explanations on subjects that I've described.</p>\n"},{"tags":["asp.net-mvc","distributed-transactions"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13224427,"title":"Linked Servers and Distributed Transactions in ASP.NET MVC3","body":"<p>I am having trouble executing a function import of a stored procedure that references a linked server.\n<strong>The Problem</strong></p>\n\n<p>The operation could not be performed because OLE DB provider \"SQLNCLI10\" for linked server ... was unable to begin a distributed transaction.</p>\n\n<p><strong>What I have done so far</strong></p>\n\n<p>I have been able to execute this stored procedure in SSMS and in a Classic ASP web application. It seems to only be a problem when running the stored procedure from the MVC application. I have tried running SSMS as the user specified in the Web.Config of the MVC application, and the connection strings for the classic ASP website and the MVC application are pretty much identical</p>\n\n<p><strong>The Question</strong></p>\n\n<p>Is there anything in particular that I need to do in order to enable Distributed Transactions in mvc3/entity framework?</p>\n"},{"tags":["asp.net","asp.net-mvc","code-generation","templating","razor"],"answer_count":3,"favorite_count":13,"up_vote_count":28,"down_vote_count":0,"view_count":5387,"score":28,"question_id":3628895,"title":"Is it possible to use Razor View Engine outside asp.net","body":"<p>If I look at the Razor View Engine, then I see a very nice and concise syntax that is not particularly tied to generating html.  So I wonder, how easy would it be to use the engine outside asp.net in a \"normal\" .net environment for example to generate text, code,...</p>\n\n<p>Any pointer, example, comment or explanation is welcome.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":6,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":6838,"score":10,"question_id":4808348,"title":"Using Razor without MVC","body":"<p>I need to merge templates with data to create unique strings at runtime. It was suggested that I look at the <a href=\"http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx\">Razor</a> templating view engine that comes in ASP.NET MVC 3. Looks great, but I need to use it outside of MVC view creation.</p>\n\n<p>I know I can use the core Razor engine directly, but I've also found a couple of projects that make using Razor directly easier. Like:</p>\n\n<ol>\n<li>Rick Strahl's Razor Hosting Template\nEngine-\n<a href=\"http://www.west-wind.com/weblog/posts/864461.aspx\">http://www.west-wind.com/weblog/posts/864461.aspx</a></li>\n<li>Razor Engine on Codeplex - <a href=\"http://razorengine.codeplex.com/\">http://razorengine.codeplex.com/</a></li>\n</ol>\n\n<p>Does anyone have any guidance on using Razor outside of MVC as a standalone template engine? Any experience with these wrapper projects? are there other Razor hosting implementations I should look into?</p>\n"},{"tags":["c#","asp.net-mvc","session","asp.net-mvc-4","global-asax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13223874,"title":"logging off a user when the session times out","body":"<p>I am creating a mvc4 application and here I am creating a cookie to give a user access to various pages depending on their roles and things. but I have different doubt. Instead of logging off people generally tend to close the browser window. So, I made the cookie not store any of the data from the login when that happens (or I think thats what happens, according to the blogs and answers Ive read so far!) </p>\n\n<p>I only want 10 users to access that site at one time. So when the user closes the browser or when the session ends I want it to execute the LogOff function that keeps track of the number of people logged in and opens up that port session for use by someone else.</p>\n\n<p>I tried adding session_end in the global.asax page and it just never seems to get there. and for testing purposes I had it expiring in a minutes time. But it does however go to the Session_start in the same global.asax page.</p>\n\n<p>Any idea as to how I can get this to work?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mobile","jquery-mobile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13223970,"title":"MVC3 with jQuery mobile, having different layout page and views","body":"<p>I thought what I am trying to do what already built in, but it does not seem to be working. From what I understood, with asp.net MVC you can name your views like this:</p>\n\n<pre><code>_view.cshtml\n\n_view.Mobile.cshtml\n</code></pre>\n\n<p>and it would use the mobile one if coming from a mobile device, and use the non-mobile one on desktops.</p>\n\n<p>It is not automatically doing this for me, is there something else I need to do? I have all the jquery mobile scripts and css referenced.</p>\n"},{"tags":[".net","asp.net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":893,"score":6,"question_id":5693794,"title":"Render image from a theme inside Orchard","body":"<p>I've just picked up Orchard for building my blog. As part of my endeavour to create this new weblog I'm creating a custom theme. This custom theme features both CSS and images. </p>\n\n<p><strong>My question</strong></p>\n\n<p>My question basically comes down to this: How do I render an image that is part of the theme? </p>\n\n<p><strong>What I have tried so far</strong></p>\n\n<p>I have tried to use the following:</p>\n\n<pre><code>&lt;img src=\"@Html.ThemePath(\"/Content/Header.jpg\")\" alt=\"Logo\"/&gt;\n</code></pre>\n\n<p>But that doesn't work to great. It returns the following HTML markup:</p>\n\n<pre><code>&lt;img src=\"~/Themes/FizzyLogic/Content/Header.jpg\" alt=\"Logo\"/&gt;\n</code></pre>\n\n<p>Which is not exactly what it should be returning. I expected it to return the absolute path to the image inside my website.</p>\n"},{"tags":["asp.net-mvc","linq-to-entities","navigation-properties"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13213051,"title":"How to join ef navigation properties in linq to entities","body":"<p>I try to get the following sql written in Linq to Entities:</p>\n\n<pre><code>SELECT * FROM SafetySheets AS SS\nJOIN UserProfiles AS UP ON SS.CreatedBy = UP.UserId\nJOIN SafetyOfficers AS SO ON SS.SafetyOfficer_Id = SO.Id\nJOIN Projects AS Pr ON SS.Project_Id = Pr.Id\nJOIN ConstructionLocations AS CL ON SS.ConstructionLocation_Id = CL.Id\nJOIN ProductionManagers AS PM ON SS.ProductionManager_Id = PM.Id\nJOIN ConstructionManagers AS CM ON SS.ConstructionManager_Id = CM.Id\n</code></pre>\n\n<p>Here is my attempt in Linq:</p>\n\n<pre><code>public IQueryable&lt;SafetySheetCollection&gt; GetSafetySheets()\n    {\n        var query = from vSafety in _db.SafetySheets\n                    join vUserProfile in _db.UserProfiles\n                    on vSafety.CreatedBy equals vUserProfile.UserId\n                    join vProject in _db.Projects\n                    on vSafety.Id equals vProject.SafetySheets\n                    join vConstructionLocation in _db.ConstructionLocations\n                    on vSafety.Id equals vConstructionLocation.SafetySheets\n                    join vSafetyOfficer in _db.SafetyOfficers\n                    on vSafety.Id equals vSafetyOfficer.SafetySheets\n                    join vProductionManager in _db.ProductionManagers\n                    on vSafety.Id equals vProductionManager.SafetySheets\n                    join vConstructionManager in _db.ConstructionManagers\n                    on vSafety.Id equals vConstructionManager.SafetySheets\n                    orderby vSafety.Created descending\n                    select new SafetySheetCollection\n                    {\n                        ListAllSafetySheets = vSafety,\n                        ListAllUserProfiles = vUserProfile,\n                        ListAllProjects = vProject,\n                        ListAllConstructionLocations = vConstructionLocation,\n                        ListAllSafetyOfficers = vSafetyOfficer,\n                        ListAllProductionManagers = vProductionManager,\n                        ListAllConstructionManagers = vConstructionManager\n                    };\n        return query;\n    }\n</code></pre>\n\n<p>The SheetCollection model:</p>\n\n<pre><code> public class SafetySheetCollection\n {\n    public SafetySheet ListAllSafetySheets { get; set; }\n    public Project ListAllProjects { get; set; }\n    public ConstructionLocation ListAllConstructionLocations { get; set; }\n    public UserProfile ListAllUserProfiles { get; set; }\n    public SafetyOfficer ListAllSafetyOfficers { get; set; }\n    public ProductionManager ListAllProductionManagers { get; set; }\n    public ConstructionManager ListAllConstructionManagers { get; set; }\n }\n</code></pre>\n\n<p>My diagram looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/BOews.jpg\" alt=\"enter image description here\"></p>\n\n<p>I understand that it doesn't work out to equal with a navigation property. But how should this be done in a correct way?</p>\n"},{"tags":["c#","asp.net-mvc","ef-code-first","domain-driven-design","code-first"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":13218650,"title":"DDD with EF Code First - how to put them together?","body":"<p>I am learning DDD development for few days, and i start to like it.</p>\n\n<p>I (think i) understand the principle of DDD, where your main focus is on business objects, where you have aggregates, aggregates roots, repositories just for aggregates roots and so on.</p>\n\n<p>I am trying to create a simple project where i combine DDD development with Code First approach.</p>\n\n<p>My questions are: (I am using asp.net MVC)</p>\n\n<ol>\n<li><p>DDD Business Objects will be different than Code First objects?\nEven if they will probably be the same, for example i can have a <code>Product</code> business object which has all the rules and methods, and i can have a <code>Product</code> code first (POCO) object which will just contain the properties i need to save in database.</p></li>\n<li><p>If answer to question 1 is \"true\", then how do i notify the <code>Product</code> POCO object that a property from business object <code>Product</code> has been changed and i have to update it? I am using an \"AutoMapper\" or something like this?\nIf the answer is \"no\", i am completely lost.</p></li>\n</ol>\n\n<p>Can you show me the most simple (CRUD) example of how can i put those two together?</p>\n\n<p>Thank you</p>\n"},{"tags":["asp.net","asp.net-mvc","authentication","domain-driven-design"],"answer_count":3,"favorite_count":6,"up_vote_count":10,"down_vote_count":0,"view_count":758,"score":10,"question_id":6867194,"title":"How do integrate \"Users\" in my DDD model with authenticating users?","body":"<p>I'm creating my first ASP.NET MVC site and have been trying to follow domain driven development. My site is a project collaboration site where users can be assigned to one or more projects on the site. Tasks are then added to projects, and users with in a project can be assigned to tasks. So a \"User\" is a fundamental concept of my domain model. </p>\n\n<p>My plan is to have a \"User\" model object which contains all the information about a user and can be accessed through an IUserRepository. Each user can be identified by a UserId. Although I'm not sure at this point if I want the UserId to be a string or integer.</p>\n\n<p>How should my domain objects User and IUserRepository relate to the more administrative functions of my site like authorizing users and allowing them to login? How would I integrate my domain model with other aspects of ASP.NET such as HttpContext.User, HttpContext.Profile, a custom MemberShipProvider, a custom ProfileProvider, or custom AuthorizeAttribute? </p>\n\n<p>Should I create a custom MembershipProvider and or ProfileProvider which wraps my IUserRepository? Although, I can also foresee why I may want to separate the User information in my domain model from the authorization of a user on my site. For example in the future I may want to switch to windows authentication from forms authentication. </p>\n\n<p>Would it be better to not try and reinvent the wheel and stick with the standard SqlMembershipProvider built into ASP.NET? Each user's profile information would be stored in the domain model (User/IUserRepository), but this would not include their password. I would then use the standard ASP.NET membership stuff to handle creating and authorizing users? So there would need to be some code somewhere that would know to create a profile for a new users in the IUserRepository when their account is created or the first time they login.</p>\n"},{"tags":["asp.net-mvc","generics","inheritance","controllers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13217960,"title":"generics vs inheritance in mvc controllers","body":"<p>We have a number of controllers with very similar functionality, there is a lot of code duplication. There are base controllers which contain some code that is used in all of them however most is still duplicated. Each controller has a constructor, the services are being injected by castle.</p>\n\n<p>I was thinking would it be possible to use generics with controllers to reduce the amount of duplication. Have the similar code in a base class and override any instances where the code deviates.</p>\n\n<p>Alternatively I you could do the same without generics and have more of the duplicate code in the base.</p>\n\n<p>What would be the best approach and how would generics be implemented in controllers? I'm guessing they would make use of interfaces as well.</p>\n"},{"tags":["javascript","asp.net-mvc","azure","acs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13221847,"title":"How do i omit the Confirm Form Resubmission from a backend point when user are loged in","body":"<p>I have this issue, its abit hard for me to explain but I hope it makes sense.</p>\n\n<p>The issue is, I am using MVC 4 Asp.Net and authenticating using claims with Azure ACS, when the user logs in. A redirect to </p>\n\n<ol>\n<li>ACS is initiated</li>\n<li>ACS Posts data back to the server</li>\n<li>The page is loaded (the network tool shows its a POST method)</li>\n</ol>\n\n<p>Now if the user refresh the page the popup asks Confirm Form Resubmission. I assume this is because the site is a POST, so it think it should resend the stuff.</p>\n\n<p>Are there anyway to change such its a normal GET isntead of a POST that the user gets when it returns from ACS?</p>\n\n<p>I hope my problem makes sense, I am not sure what to search for to find a solution.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13220726,"title":"How does ASP.NET MVC pass model to the view without explicitly passing it","body":"<p>Here is one of the examples that I've seen on how to do validation on Controller:</p>\n\n<pre><code>[HttpPost]\npublic ViewResult Create(MyModel response)\n{\n    if (ModelState.IsValid)\n    {\n        return View(\"Thanks\");\n    }\n    else\n    {\n        return View();\n    }\n}\n</code></pre>\n\n<p>If there are validation errors, than return View() method is called <strong>without any parameters</strong>. Obviously you have @Html.ValidationSummary() in your View and Model has all required property attributes.</p>\n\n<p>The data that was entered into the form was preserved and displayed again when the view was rendered with the validation summary.</p>\n\n<p>My question: how is the data preserved?  Since it was not passed to the View like </p>\n\n<blockquote>\n  <p>return View(response);</p>\n</blockquote>\n\n<p>Thanks a lot.</p>\n\n<p>Sincerely,\nVlad</p>\n"},{"tags":["asp.net-mvc","azure","dotlesscss"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":13215229,"title":"My dotless is not working on azure, internal error","body":"<p><a href=\"http://s-projects.cloudapp.net/ProjectManager\" rel=\"nofollow\">http://s-projects.cloudapp.net/ProjectManager</a></p>\n\n<p>When i run the site on my local machine from visual stduio it works.</p>\n\n<p>I also noticed when looking at the .less file one local site, all the imports are compiled to one file.</p>\n\n<p>on azure</p>\n\n<p>the link in the html links to a file with :</p>\n\n<pre><code>@import\"skin.less\";@import\"base.less\";@import\"site.less\";@import\"style2.less\";\n</code></pre>\n\n<p>and the following i also found:</p>\n\n<pre><code>GET http://s-projects.cloudapp.net/ProjectManager/Content/base.less 500 (Internal Server Error) ProjectManager:13\nGET http://s-projects.cloudapp.net/ProjectManager/Content/site.less 500 (Internal Server Error) \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13221102,"title":"How to prevent MVC ActionFilterAttribute from being cached?","body":"<p>I have a MVC API ActionFilterAttribute that does a permissions check using the Entity Framework.  I've found that because of ActionFilterAttribute caching the EF connection is often broken.  You can find other questions about <a href=\"http://stackoverflow.com/questions/5335350/unitofwork-in-action-filter-seems-to-be-caching\">here</a>. So does anyone know how to prevent caching in ActionFilterAttributes?</p>\n"},{"tags":["asp.net-mvc","routing","asp.net-mvc-routing"],"answer_count":3,"favorite_count":109,"up_vote_count":116,"down_vote_count":0,"view_count":17130,"score":116,"question_id":278668,"title":"Is it possible to make an ASP.NET MVC route based on a subdomain?","body":"<p>Is it possible to have an ASP.NET MVC route that uses subdomain information to determine its route?  For example:</p>\n\n<ul>\n<li><strong><em>user1</strong>.domain.com</em> goes to one place</li>\n<li><strong><em>user2</strong>.domain.com</em> goes to another?</li>\n</ul>\n\n<p>Or, can I make it so both of these go to the same controller/action with a <code>username</code> parameter?</p>\n"},{"tags":["asp.net-mvc","json","knockout.js","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":13196645,"title":"Post JSON data through a form in MVC4","body":"<p>I'm trying to POST a JSON object (a JSON-ified knockout model, if that's of any relevance) to my MVC controller, and have the controller return a new view. To do this, I'm sending the data with a form. The problem is that I would like to have the JSON automatically converted to a model when the controller receives it. </p>\n\n<p>If I were to use an AJAX call for this,</p>\n\n<pre><code>var actionModel = new Object();\nactionModel.Controls = ko.toJS(self.controls());\nvar json = JSON.stringify(actionModel);\n$.ajax({\n    url: \"MyController/Preview\",\n    type: \"POST\",\n    contentType: 'application/json; charset=utf-8',\n    cache: false,\n    data: json,\n    success: function (data) {\n    }\n});\n</code></pre>\n\n<p>...the JSON object is successfully deserialized and converted into an instance of my model class.</p>\n\n<pre><code>public ActionResult Preview(ActionModel actionModel) { ... }\npublic class ActionModel\n{\n    public List&lt;ControlModel&gt; Controls { get; set; }\n}\n</code></pre>\n\n<p>If I want to do this with a form, I understand that I need to insert the JSON into a hidden input field, but the best I can manage when doing this is to receive the data as a serialized string:</p>\n\n<pre><code>@using (Html.BeginForm(\"Preview\", \"MyController\", FormMethod.Post, new { id = \"previewForm\" }))\n{\n    &lt;input type=\"hidden\" id=\"hiddenFieldName\" /&gt;\n}\n\npublic ActionResult Preview(string hiddenFieldName) { ... }\n</code></pre>\n\n<p>I could just deserialize it afterwards, but I really would prefer it if MVC could convert it for me, as it would with an AJAX call. Is this possible?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12885116,"title":"DataBase.Exist() returns true even if the connection string has wrong database name in Entity Framework","body":"<p>I am new to EF 5.0, i have purposely set the wrong database name in connection string in Web.Config. i.e. Initial Catalog = \"Wrong Database Name\";</p>\n\n<p>Now I have created a boolean property, which detects whether the database exists or not. Like below - where context is the EFDbContext.</p>\n\n<pre><code>bool IsDatabaseExist = context.DataBase.Exists();\n</code></pre>\n\n<p>My question is, why this is always showing true, even if the DataBase name which I have provided is wrong ?</p>\n"},{"tags":["asp.net-mvc","razor","asp.net-mvc-4","visual-studio-2012"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":361,"score":1,"question_id":12206851,"title":"Razor views: The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartCode threw an exception","body":"<p>I'm working in an Asp.net MVC 4 project in Visual Studio 2012, when I open a view I'm getting this error:</p>\n\n<blockquote>\n  <p><em>ASP.NET runtime error: The pre-application start initialization method Start on type Microsoft.Web.WebPages.OAuth.PreApplicationStartCode threw an exception with the following error message: The type initializer for 'DotNetOpenAuth.Reporting' threw an exception..  C:\\Users\\escobar5\\Desktop\\WindowsAzure1\\MvcWebRole1\\Views\\Shared_LoginPartial.cshtml</em></p>\n</blockquote>\n\n<p>So I lost intellisense because after that error every call to ViewBag or model says: \"One or more types required to compile a dynamic expression cannot be found\"</p>\n\n<p>I updated OAuth packages from Nuget but I'm still getting the error. </p>\n\n<p>The project runs fine, the problem is just with razor.</p>\n\n<p>This is a screenshot of the error for more detail:</p>\n\n<p><img src=\"http://i.stack.imgur.com/4RJXH.png\" alt=\"Error\"></p>\n\n<p>Any ideas?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","dependency-injection","web-config"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13218377,"title":"Web.config settings class in ASP.NET MVC","body":"<p>on ASP.NET Web Forms I used to have an utility <strong>static class</strong>, called <code>WebConfigSettings</code>, where I had all the app settings read from my Web.config file (for example <code>WebConfigSettings.DebugModeEnabled</code>).<br>\nIs it a bad practice on MVC? Shall I prefer using a non-static class and inject it on my controllers using dependency injection? If yes, where shall I put the property on the controller? I have read on <a href=\"http://stackoverflow.com/questions/6119206/what-are-good-candidates-for-base-controller-class-in-asp-net-mvc\">this post</a> that I should not use base controllers.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","visual-studio-2012","keyboard-shortcuts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13215137,"title":"Navigate between Model/View/Controller keyboard shortcut?","body":"<p>I'm new to MVC.</p>\n\n<p>I am curious if there are any built-in shortcuts to navigate between model/view/controller.</p>\n\n<p>Thanks</p>\n"},{"tags":["ajax","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13216414,"title":"AJAX postback response different than model data","body":"<p>I have a partial view that has textfields in it and is bound to a List set up, so essentially there is a row of textfields that the user can add another row to or remove a row from. I build the view by looping through the list like this:</p>\n\n<pre><code>@model PricingRequestWebApp.Web.Models.PricingRequestModel\n\n&lt;div id=\"shiplocation-wrapper\"&gt;\n    &lt;table class=\"shipinfoprtable\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].Address)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].City)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].State)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].Zip)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].PFreight)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;th&gt;@Html.LabelFor(m =&gt; m.ShippingLocationsModel[0].FreightType)&lt;span class=\"formRed\"&gt;*&lt;/span&gt;&lt;/th&gt;\n                &lt;td&gt;&lt;span class=\"link\" id=\"addlocation\" onclick=\"AddShippingLocation()\"&gt;Add&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            @for (int i = 0; i &lt; Model.ShippingLocationsModel.Count; i++)\n            {\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].Address, new { @style = \"width: 200px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].City, new { @style = \"width: 150px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].State, new { @size = 3 })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].Zip, new { @style = \"width: 80px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].PFreight, new { @style = \"width: 80px\" })&lt;/td&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.ShippingLocationsModel[i].FreightType, new { @style = \"width: 200px\" })&lt;/td&gt;\n                    @if (Model.ShippingLocationsModel.Count &gt; 1)\n                    {\n                        &lt;td&gt;&lt;span class=\"link\" id=\"removelocation\" onclick=\"RemoveShippingLocation(@i);\"&gt;Remove&lt;/span&gt;&lt;/td&gt;\n                    }\n                &lt;/tr&gt;\n            }\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My controller methods look like so:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult AddShippingLocation(PricingRequestModel model)\n    {\n        model.ShippingLocationsModel.Add(new ShippingLocationsModel());    \n\n        return PartialView(\"shiplocationsPartial\", model);\n    }\n\n    [HttpPost]\n    public ActionResult RemoveShippingLocation(PricingRequestModel model)\n    {\n        model.ShippingLocationsModel.RemoveAt(StaticItems.id);\n\n        return PartialView(\"shiplocationsPartial\", model);\n    }\n</code></pre>\n\n<p>And my Jquery function that posts the data and returns the view:</p>\n\n<pre><code>function AddShippingLocation() {\n    $.ajax({\n        data: $('#shippinginfoform').serialize(),\n        type: \"POST\",\n        url: \"/PricingRequest/AddShippingLocation\",\n        success: function (response) {\n            $('#shiplocation-wrapper').html(response);\n        }\n    })\n}\n\nfunction RemoveShippingLocation(id) {\n    $.ajax({\n        data: { id: id },\n        type: \"POST\",\n        url: \"/PricingRequest/SaveID\",\n        complete: function () {\n            $.ajax({\n                data: $('#shippinginfoform').serialize(),\n                cache: false,\n                type: \"POST\",\n                url: \"/PricingRequest/RemoveShippingLocation\",\n                success: function (response) {\n                    $('#shiplocation-wrapper').html(response);\n                }\n            })\n        }\n    })\n}\n</code></pre>\n\n<p>Now, lets say I have 4 items created in the user view. I click on item 2 to remove it and it passes in i as an id. I then remove that from the model list and pass back the view with the updated model. I have debugged this at least 50 times now and the controller method looks exactly as it should and the data in the view as well. Inexplicably though the response on the ajax shows differently than what I'm seeing while debugging. Clicking on remove item 2 removes item 4. If I have 5 items, item 5 will be removed no matter what item I click to remove. It's always the last item that is removed. I know I must be missing something here but I can't see what. Any ideas? Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13216260,"title":"MVC3 DropDownListFor not selecting saved value","body":"<p>I'm displaying a list of users.  Each user record has a TrainingEvent object property (from a choice of many TrainingEvents).  I've created a viewmodel to include the User list and the TrainingEvents list.</p>\n\n<p><strong>ViewModel:</strong></p>\n\n<pre><code>public class RegistrationViewModel\n{\n  public IEnumerable&lt;Domain.Entities.User&gt; Users { get; set; }\n  public IEnumerable&lt;SelectListItem&gt; TrainingEvents { get; set; }\n}\n</code></pre>\n\n<p><em>(note: the Domain.Entities.User contains a TrainingEvent object property)</em></p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>public ActionResult Dealership(int id)\n{\n  var model = new RegistrationViewModel\n    {\n      Users = repository.Find\n             .Where(u =&gt; u.Dealer.DealerId == id).OrderBy(u =&gt; u.LastName),\n                 TrainingEvents = repository.TrainingEvents.ToList()\n                                  .Select(x =&gt; new SelectListItem\n                                          {\n                                            Text = x.Date.ToString() + \" - \" + x.LocationName,\n                                            Value = x.TrainingEventId.ToString()\n                                          })\n    };\n\n  return View(\"East\", model);\n}\n</code></pre>\n\n<p><strong>Binding in View:</strong></p>\n\n<pre><code>@foreach(Company.Domain.Entities.User usr in Model.Users)\n  {\n     &lt;tr&gt;\n         &lt;td&gt;@usr.LastName&lt;/td&gt;\n         &lt;td&gt;@usr.FirstName&lt;/td&gt;\n         &lt;td&gt;@usr.JobDescription&lt;/td&gt;\n         &lt;td&gt;@Html.DropDownListFor(m =&gt; m.Users.FirstOrDefault(u =&gt; u.UserId == usr.UserId).TrainingEvent, Model.TrainingEvents)&lt;/td&gt;\n     &lt;/tr&gt;\n}\n</code></pre>\n\n<p>The users are listed and each user row has a dropdown which populates with TrainingEvents.  However, the value previously saved in the user's TrainingEvent object isn't selected.  Any ideas as why not?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-web-api"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13210975,"title":"WebApi Controller returned value in Entity Framework 5 and MVC 4 project","body":"<p>I'm working on a webapi, EF5, Windsor Castle in a MVC 4 project, and I have a question...should I return the Entity (or DTO) in the Get method or Should I return an HttpResponseMessage? What's the better way and more standard way to do it?</p>\n\n<p>So, Is it this?</p>\n\n<pre><code>[System.Web.Http.HttpGet]\npublic HttpResponseMessage GetById(long id)\n{\n    var branch = Uow.Branches.GetById(id);\n    if (branch != null)\n    {\n        Request.CreateResponse(HttpStatusCode.OK, branch);\n    }\n\n    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));\n}\n</code></pre>\n\n<p>Or this?</p>\n\n<pre><code>[System.Web.Http.HttpGet]\npublic Branch GetById(long id)\n{\n    var branch = Uow.Branches.GetById(id);\n    if (branch != null) return branch ;\n    throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-membership","membership","membershipuser"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13218565,"title":"Storing CustomMembershipUser in Database EF","body":"<p>I  am trying to implement a custom mebershipuser (derrived from the membershipuser class) and Membershipprovider.</p>\n\n<p>I Store the users in my dbcontext As a property, but l get some awkward errors. It writes that the user.UserName type is not supported, which is simple getter property. I've managed to walk around this using the \"new\" keyword, but other things mess up, and there must be a strait-forward way to store my custom membership provider and be able to access it using dbcontext.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","debug-symbols"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12333706,"title":"Debug into nightly build of ASP.NET MVC4 using Symbolserver","body":"<p>I used this description to get the nightly build of ASP.NET MVC for my project</p>\n\n<p><a href=\"http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/henrikn/archive/2012/06/01/using-nightly-asp-net-web-stack-nuget-packages-with-vs-2012-rc.aspx</a></p>\n\n<p>Its pulls the assemblies sucesfully from  nuget and I can run the project.</p>\n\n<p>I now try to debug into the pdb pulled from the MS symbol server. Thats actually the point: I dont know if these symbols are realy located on the servers. Either I am doing something wrong or symbols are not available.</p>\n\n<p>Here are my debug settings:</p>\n\n<p><img src=\"http://i.stack.imgur.com/v42gS.png\" alt=\"enter image description here\"></p>\n\n<p>These are my symbol servers\n<img src=\"http://i.stack.imgur.com/sJjrX.png\" alt=\"enter image description here\"></p>\n\n<p>This is what I see when I try to step into a method located in System.Web.Mvc.dll\n<img src=\"http://i.stack.imgur.com/94RfD.png\" alt=\"enter image description here\"></p>\n\n<p>These are the modules loaded:</p>\n\n<p><img src=\"http://i.stack.imgur.com/W6F1J.png\" alt=\"enter image description here\"></p>\n\n<p>I downloaded the nightly build on the third of september. Is there anything I am missing?</p>\n"},{"tags":["sql-server","asp.net-mvc","webmatrix","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13215644,"title":"Control the tables generated by SimpleMembershipProvider?","body":"<p>I found <code>SimpleMembershipProvider</code> to be pretty neat and productive.</p>\n\n<p>I was wondering if there is a way to control the generate table/column names/datatypes.</p>\n"},{"tags":["asp.net-mvc","wif","acs","system.web"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13177145,"title":"Where in an MVC application can I catch a SecurityTokenExpiredException?","body":"<p>I have a .NET 4.5 /  MVC 4 web application with WIF (Azure ACS) security, using a custom, forms-based login page (and running in an Azure Web Role, although I don't think that is relevant to this question).</p>\n\n<p>Occasionally, the ACS token expires before my local session does, and I get the following error:</p>\n\n<pre><code>ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\n</code></pre>\n\n<p>I'd like to catch this and just route the user to the login page, but I'm not sure where to handle it. I've tried overriding the <code>OnException</code> method of my base controller class, and also <code>ApplicationError</code> in Global.asax, but neither seems to fire.</p>\n\n<p>Where could I put a handler to catch this error?</p>\n\n<p>Full error message follows:</p>\n\n<pre><code>ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\nNotOnOrAfter: '01/11/2012 10:37:53'\nCurrent time: '01/11/2012 12:26:13'\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IdentityModel.Tokens.SecurityTokenExpiredException: ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\nNotOnOrAfter: '01/11/2012 10:37:53'\nCurrent time: '01/11/2012 12:26:13'\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nStack Trace: \n\n\n[SecurityTokenExpiredException: ID4148: The Saml2SecurityToken is rejected because the SAML2:Assertion's NotOnOrAfter condition is not satisfied.\nNotOnOrAfter: '01/11/2012 10:37:53'\nCurrent time: '01/11/2012 12:26:13']\n   System.IdentityModel.Tokens.Saml2SecurityTokenHandler.ValidateToken(SecurityToken token) +1039271\n   System.IdentityModel.Tokens.SecurityTokenHandlerCollection.ValidateToken(SecurityToken token) +135\n   System.IdentityModel.Services.TokenReceiver.AuthenticateToken(SecurityToken token, Boolean ensureBearerToken, String endpointUri) +117\n   System.IdentityModel.Services.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequestBase request) +698\n   System.IdentityModel.Services.WSFederationAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args) +123924\n   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +165\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-2","asp.net-mvc-4","polymorphism"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13181746,"title":"ASP.NET MVC - Generic Controller Model Issue and Polymorphism","body":"<h2>Setup:</h2>\n\n<p>I have designed a Wizard (based initially on Steve Sanderson's wizard in Pro ASP.NET MVC 2).</p>\n\n<p>Essentially, the base wizard controller is declared as follows:</p>\n\n<pre><code>public abstract class WizardController&lt;TModel&gt; : Controller where TModel : class, IWizardModel, new()\n{\n   // Loads-n-loadsa-code\n}\n</code></pre>\n\n<p>To implement my wizard, therefore, I need to declare my Wizard controller as follows:</p>\n\n<pre><code>[WizardOptions(StartLabel=\"Edit &gt;&gt;\")]\npublic partial class EditFeeEarnerController : WizardController&lt;MyApp.Models.MySpecificWizardModel&gt;\n{\n     // small amounts of highly intuitive code\n}\n</code></pre>\n\n<p>Where <code>MyViewModel</code> implements <code>IWizardModel</code>.</p>\n\n<p>So far so good.  The wizard works beautifully and I am right chuffed with it, so don't get hung up on that.  </p>\n\n<p>The issue follows:</p>\n\n<h2>Issue:</h2>\n\n<p>The only issue is that my Wizard uses partial views for each step, that get \"stitched\" together with a view (<code>Wizard.cshtml</code>).</p>\n\n<p><code>Wizard.cshtml</code> is <strong>ALWAYS</strong> the same for <strong>ANY</strong> wizard <strong>EXCEPT</strong> for the <code>@model</code> declaration at the top, in my example:</p>\n\n<pre><code>@model MyApp.Models.MySpecificWizardModel\n</code></pre>\n\n<p>As a result, in an app with 20 wizards, I have the very same file appearing 20 times.  </p>\n\n<p>Definitely not DRY.</p>\n\n<h2>Question:</h2>\n\n<p>I would like to put a file in <code>~/Views/Shared/Wizard.cshtml</code> and use that for all my wizards.  The reason I can't do that is because I only know in advance that my wizard viewmodels will inherit from <code>IWizardModel</code>.  </p>\n\n<p>And I can't do this:</p>\n\n<pre><code>@model IWizardModel\n</code></pre>\n\n<p>So what is the best way to do this, or is it just not possible?</p>\n\n<p>I suppose I could have a base Wizard viewmodel that all my wizard viewmodels inherit from (instead of directly implementing <code>IWizardModel</code>).</p>\n\n<p>Would this work?</p>\n\n<h1>EDIT (With the benefit of hindsight):</h1>\n\n<p>For the record, my problem was that I was misguided in thinking that using an interface as my model, ie, <code>@model IWizardModel</code>, wouldn't work.  As Iain Galloway pointed out in his answer, it does and that solved my problem.</p>\n\n<p>The reason I thought I couldn't use an interface as my model is that I did the following:</p>\n\n<pre><code>@model IWizardModel // MyNamespace.MySpecificWizardModel\n</code></pre>\n\n<p>The problem is the comment to the right (I commented out the old model).  </p>\n\n<p>For some reason, the comment generated an error (something to do with the <code>ViewEngine</code>).  In my haste, I just presumed you couldn't use interfaces for the model.</p>\n\n<p>As olde Will said:  Great is thy power, oh delay.</p>\n\n<p>See Iain Galloway's answer and my Addendum to it.</p>\n"},{"tags":["asp.net-mvc","tortoisehg","bitbucket"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13218001,"title":"How to not push certain folders to Bitbucket, when using Tortoise HG","body":"<p>I am trying to use Tortoise HG with a private repository on Bitbucket. </p>\n\n<p><img src=\"http://i.stack.imgur.com/HzAvw.png\" alt=\"enter image description here\"></p>\n\n<p>In my project I have a couple of folders which I dont want to push. My project is in ASP.NET MVC and these folders I am talking about are folders created by Resharper and Nuget.</p>\n\n<ul>\n<li>_ReSharper.ProjectName</li>\n<li>packages</li>\n</ul>\n\n<p>Please can some one tell me how to avoid this.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":855,"score":0,"question_id":415991,"title":"dynamic site.master menu","body":"<p>I need some help with the follow:</p>\n\n<p>I have just read on this tutorial: \n<a href=\"http://www.asp.net/LEARN/mvc/tutorial-13-cs.aspx\" rel=\"nofollow\">http://www.asp.net/LEARN/mvc/tutorial-13-cs.aspx</a></p>\n\n<p>and followed the example given for the \"good solution\". However, I encountered a problem after i made some modifications to the abstract class ApplicationController.</p>\n\n<p>The original constructor was:</p>\n\n<pre><code>public ApplicationController()\n{                \n    ViewData[\"categories\"] = from c in DataContext.MovieCategories\n                             select c;           \n}\n</code></pre>\n\n<p>I've modified it to become to use a stored procedure instead:</p>\n\n<pre><code>public ApplicationController()\n{                \n    ViewData[\"categories\"] =  DataContext.spMovieCategories(\"some movie category\");\n}\n</code></pre>\n\n<p>Is there anyway I can pass in \"some movie category\" as a parameter? I've tried using TempData and Session variables but it keeps throwing me errors.</p>\n\n<p>Thanks guys!</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":13216962,"title":"JQuery Closest Method to change HTML","body":"<p>I am working on a project, i have two anchors in my View(for voting functionality),</p>\n\n<p>I have a div inside which i am having  a <code>&lt;ul&gt;</code> and in 3 <code>&lt;li&gt;</code> i am having anchor for upvote,vote count <code>(in &lt;h2&gt;)</code> and anchor downvote respectively</p>\n\n<p>I want functionality that when i click on any anchor, the h2 html show the vote count, i've implemented the functionality but because of <li> i am unable to do this,\nthis is my View</p>\n\n<pre><code>&lt;div class=\"voting\" style=\"margin-left:20px;\"&gt;\n                                        &lt;ul&gt;\n                                            &lt;li class=\"addvote\"&gt;&lt;a href=\"#\" class=\"voteAnswer\" answerid=\"@answer.AnswerID\" name=\"Voted\"&gt;\n                                           Up&lt;/a&gt;&lt;/li&gt;\n                                            &lt;li class=\"votecounter\"&gt;\n                                                &lt;h2&gt;\n                                                    @answer.AnswerLikes.Where(a =&gt; a.IsActive == true).Count()&lt;/h2&gt;\n                                            &lt;/li&gt;\n                                            &lt;li class=\"subvote\"&gt;&lt;a href=\"#\" class=\"voteAnswer\" answerid=\"@answer.AnswerID\" name=\"Voted\"&gt;\nDown&lt;/a&gt;&lt;/li&gt;\n                                        &lt;/ul&gt;\n                                    &lt;/div&gt;\n</code></pre>\n\n<p>and this is my JS</p>\n\n<pre><code>$(\".voteAnswer\").click(function (event) {\n            var answerid = $(this).attr('answerid');\n            var name = $(this).attr('name');\n            var id = $(this).attr('id');\n            var output = $(this);\n\n                $.ajax({\n                    url: ResourceAjaxUrl.VoteUnvoteTheAnswer,\n                    type: \"POST\",\n                    data: JSON.stringify({ answerID: answerid }),\n                    dataType: \"html\",\n                    contentType: \"application/json; charset-utf-8\",\n                    success: function (Result) {\n                        alert(\"Voted\");\n                        //  $(output).html(\"Voted (\" + Result + \")\");\n                        $(output).closest(\"li\").find(\"h2\").html(Result);\n                        $(output).attr(\"name\", \"Voted\");\n                    },\n                    error: function (msg) {\n                        alert(\"Unable to Vote answer: \" + msg);\n                    }\n                });\nevent.preventDefault();\n            });\n</code></pre>\n\n<p>i have tried using  <code>$(output).closest(\"li\").find(\".votecounter\")</code> but its still not working</p>\n"},{"tags":["asp.net-mvc","frameworks","blogs","engine","web-frameworks"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13217055,"title":"Tools to expose blogging as a feature to the users of my ASP.NET MVC site","body":"<p>I'm building an ASP.NET MVC website with facebook integrated login. As a part of the feature of this site, I want to expose users a blogging option. Logged in users should be able to post new blogs and manage their earlier blogs. Is there a library or a project that I can include/integrate with my current site ?</p>\n\n<p>Features like spam blocking,\nChoosable custom blog Template, would be a nice to have. </p>\n\n<p>I've already looked into the following: </p>\n\n<p><a href=\"http://www.orchardproject.net/\" rel=\"nofollow\">Orchard:</a> This seems to be more of a CMS, for an admin managing his/her blog than an option to expose blogging as a feature to the users of my site.</p>\n"},{"tags":["asp.net-mvc","nhibernate","design","model","dataannotations"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13214138,"title":"Model layer dependency on MVC attributes","body":"<p>We have an MVC3 project that uses nHibernate; there is a separate model project that contains all the model classes which is used by the repository and service layers. The models make use of data annotations like DisplayAttribute and RequiredAttribute from System.ComponentModel.DataAnnotations.</p>\n\n<p>There are also attributes such as RemoteAttribute that are contained in System.Web.Mvc.</p>\n\n<p>This of course means that the model project now has a dependency to a particular front end technology.</p>\n\n<p>Assuming the solution could have other front ends what would be the best way to handle this dependency link?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":6,"favorite_count":6,"up_vote_count":5,"down_vote_count":0,"view_count":3906,"score":5,"question_id":1207382,"title":"Need ASP.Net/MVC Rich Text Editor","body":"<p>I'm looking for a \"simple\" RTE editor for a MVC application I'm programming.</p>\n\n<p>The editor running the Stackoverflow message editor is almost exactly what I'm looking for.  We don't need anything as fancy as FCK's editor.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["asp.net-mvc","entity-framework","design","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13204145,"title":"Implicit EF queries in Views cause DataReader-related InvalidOperationException","body":"<p>At some point of developing an ASP.NET MVC solution which uses EF as it's ORM I started to encouter a rare-discovered bug (or Heisenbug, as it totally disappears under step-by-step debugging).</p>\n\n<p>At SO, I found that the source of my bug may be either:</p>\n\n<ul>\n<li><code>DbContext</code> is a static Lazy&lt;>-wrapped field in my domain model, thus subject to <code>using(){}</code> idiom multiple result sets.</li>\n<li>My views themselves call HtmlHelper custom extension methods that have EF queries inside (e.g. DropDown select population, thumbnail link generation etc.).</li>\n</ul>\n\n<p>First problem was solved simply by adding <code>multipleactiveresultsets=True</code> to my <code>connectionString</code> definition.</p>\n\n<p>The latter hypothetically requires a switch to ViewModels, prepopulated inside controller actions. However, there many cases where use of ViewModel will be an overkill, requiring addition of dummy copy-create code that will cause maintenance overhead.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Why EF queries inside Views cause <code>There is already an open DataReader associated with this Command which must be closed first.</code> error? Do <em>they</em>?</li>\n<li>How to stop views executing queries without full codebase rewrite?</li>\n</ul>\n"},{"tags":["php","asp.net-mvc","mvc","activerecord"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13214625,"title":"What is the best place to put logic that merges two activerecord lists for presentational purposes in an MVC app?","body":"<p>I have a few instances where I need to merge two or more lists of different activerecord models, filter the merged list based on some criteria and potentially sort it for presentational purposes.  Where would you typically perform this type of logic in an MVC application?  One idea I had was to adopt some methodology similar to the viewmodel pattern used in MVC.net for this PHP app I am building.</p>\n\n<p>Here is what I was thinking</p>\n\n<pre><code>public class myViewModel\n{\n    private $modelList1;\n    private $modelList2;\n\n    public  $mergedList;\n\n    public function __construct($myModelList1, $myModelList2)\n    {\n            $this-&gt;modelList1 = $myModelList1;\n            $this-&gt;modelList2 = $myModelList2;\n\n            mergeLists();\n            filterList();\n            sortList();\n    }\n\n    private function mergeLists\n    {\n            // sets $mergedList based on $modelList1 and $modelList2\n    }\n\n    private function filterList\n    {\n            // filters $mergedList\n    }\n\n    private function sortList\n    {\n            // sorts $mergedList\n    }\n}\n</code></pre>\n\n<p>After the viewmodel has been constructed, it would be passed to the view by the controller and the view could access the $mergedList property.</p>\n\n<p>Is this a reasonable way to handle this or is there a better way?  I assume it belongs in some kind of model other than an activerecord model and I didn't think a service was the proper place though I could be wrong...\nAlso would you say this logic is domain logic or presentation logic?</p>\n"},{"tags":["c#","regex","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13214255,"title":"Match at least one character and one number, regardless of order, with no suffix?","body":"<p>I need a RegEx that fulfills this statement:</p>\n\n<blockquote>\n  <p><strong>There is at least one character and one digit, regardless of order, and there is no suffix (i.e. domain name) at the end.</strong></p>\n</blockquote>\n\n<p>So I have this test list:</p>\n\n<pre><code>ra182\njas182\nra1z4\n</code></pre>\n\n<p>And I have this RegEx:</p>\n\n<pre><code>[a-z]+[0-9]+$\n</code></pre>\n\n<p>It's matching the first two fully, but it's only matching the <code>z4</code> in the last one. Though it makes sense to me why it's only matching that piece of the last entry, I need a little help getting this the rest of the way.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13211083,"title":"Orchard CMS Recent Blog Post Widget Alternate View","body":"<p>I'm new to Orchard CMS and MVC so please forgive my ignorance. I've done a search and not found anything apparently relevant....</p>\n\n<p>In one of the Footer Quad zone on my Orchard site I want to show the 5 most recent blog posts, just by title. At present it show the title, post, tags etc all in their unformatted state(Ive not style the blog yet).</p>\n\n<p>Using the tracing tool I've created an alternate view called; </p>\n\n<pre><code>Parts.Blogs.RecentBlogPosts\n</code></pre>\n\n<p>However the only content in this view is;</p>\n\n<pre><code>@Display(Model.ContentItems)\n</code></pre>\n\n<p>Which -unlike other installed widgets Ive edited alternate views for- doesn't give me anything to play around with to create the layout I'm needing to create.</p>\n\n<p>Have I selected the wrong shape / view, or do I need to get stuck in with some coding???</p>\n\n<p>As I say, I'm new to both MVC and Orchard but very keen to learn. Any help on this will, as always, be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","rest","widget","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13190226,"title":"RESTful URL design for Widgets Check","body":"<p>I am building a RESTful API for a web site that allows users to create widgets and tabs containing widgets (think igoogle.com/ netvibes.com) and I want to share my URL design for your insights.</p>\n\n<p>Here are the simple rules:</p>\n\n<ol>\n<li><p>There is a static list of widgetTypes available for a user to pick. </p></li>\n<li><p>A user can create one or more widgetInstances of each widgetType.</p></li>\n<li><p>A user can create one or more tabs/ dashboards containing widgetInstances</p></li>\n</ol>\n\n<p>This API needs to only serve JSON that will be consumed by JavaScript. We can also assume that all authentication will be taken care of through cookies. </p>\n\n<p>The API needs to serve:</p>\n\n<ol>\n<li><p>CRUD of user's Tabs</p></li>\n<li><p>CRUD of specific user widgetInstances</p></li>\n<li><p>Retrieval of all tabs for a user</p></li>\n<li><p>Retrieval of all widgetInstances for a given tab. </p></li>\n<li><p>Retrieval of all available widgetTypes for a user to add widgets from. </p></li>\n</ol>\n\n<p><strong>Design:</strong></p>\n\n<p><strong>Tab controller:</strong></p>\n\n<p>widgetAPI.com/tabs -> Returns meta data (id, title) of all tabs available to a user.</p>\n\n<p>widgetAPI.com/tabs/1 -> Returns meta data (title) of tab id 1. If sent with POST, updates tab id 1. </p>\n\n<p>widgetAPI.com/tabs/1/widgets > Returns all widgetInstances of tab id 1. </p>\n\n<p><strong>Question 1:</strong> Ideally I'd like to follow the design of widgetAPI.com/tabs/1 also returning all the widgetInstances of the given tab but with that design, widgetAPI.com/tabs may return far too much data as I would have to return all the widgets for all the tabs. Hence I need to create a separate \"widgetAPI.com/tabs/1/widgets\" URL but that also has to return the tab meta data as I don't want to make two HTTP calls to get meta data &amp; widgets. Please advise as I am not sure of the best approach here. </p>\n\n<p>widgetAPI.com/tabs/create -> Create a new tab</p>\n\n<p>widgetAPI.com/tabs/delete/123 -> Delete tabid 123</p>\n\n<p><strong>Widget Controller:</strong></p>\n\n<p>widgetAPI.com/widgets/123 -> Return data for widgetInstanceId 123. Updates 123 if sent through POST. </p>\n\n<p>widgetAPI.com/widgets/Create?typeID = 2 -> Creates a new widgetInstance of typeid = 2. This will only be a POST request so typeId could be a post parameter.</p>\n\n<p>widgetAPI.com/widgets/delete/123 -> Delete widgetInstance 123</p>\n\n<p><strong>Question 2</strong> So there is one rule I havent been able to fulfill yet. I need to return all the widgetTypes available and I am not sure how to fit this request into the previous two controllers. I am currently leaning towards just serving this separately. So something like widgetAPI.com/getWidgetTypes. Thoughts?</p>\n\n<p>Thanks guys. If you could critique on the overall design, just address the questions or mention anything I should watch out for, that would be great as this is my first time designing a RESTful app. Thanks again.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13213520,"title":"ASP.NET MVC - Resend confirmation email with WebSecurity?","body":"<p>Trying to use the WebSecurity and if my user loses, needs to resend, or otherwise changes their email, their does not seem to be any way to reset your confirmation token via the WebSecurity classes.</p>\n\n<p>How do I reset the confirmation token for WebSecurity in Asp.NET MVC?</p>\n"},{"tags":["asp.net-mvc","templates","t4","vsix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13212060,"title":"Can MVC Scaffolding T4 Templates be installed using VSIX?","body":"<p>I have a MVC template that should be installed in </p>\n\n<blockquote>\n  <p>Common7\\IDE\\ItemTemplates\\CSharp (or Visual Basic)\\Web\\MVC (or 2)\n  3\\CodeTemplates</p>\n</blockquote>\n\n<p>as noted <a href=\"http://stackoverflow.com/questions/7249414/where-are-the-built-in-mvc-scaffolding-t4-templates\">here</a>.</p>\n\n<p>Is there a way to include this on a VSIX package? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":9,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":13274,"score":11,"question_id":2269220,"title":"The view 'Index' or its master was not found.","body":"<pre><code>The view 'Index' or its master was not found. The following locations were searched:\n~/Views/ControllerName/Index.aspx\n~/Views/ControllerName/Index.ascx\n~/Views/Shared/Index.aspx\n~/Views/Shared/Index.ascx\n</code></pre>\n\n<p>I got this error when using ASP.Net mvc area. The area controller action are invoked, but it seems to look for the view in the 'base' project views instead of in the area views folder.</p>\n"},{"tags":["asp.net-mvc","google-earth","kmz"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12462327,"title":"Cross domain open kmz files in asp.net mvc","body":"<p>I have a problem with opening kmz file via google earth api. It works fine when  I provide static link to the file on server:</p>\n\n<pre><code>google.earth.fetchKml(ge, 'http://10.122.150.183:8008/test.kmz', checkForCoordinates);\n</code></pre>\n\n<p>But when I change link to the file on another domain (which is WCF service) : <code>'https://10.122.150.183:4431/Uploads/1/test.kmz'</code>, file doesn't open in google earth. I've tried another solution: to provide kmz files dynamically from ASP.Net MVC controller, returning:</p>\n\n<pre><code>return File(fileStream, \"application/vnd.google-earth.kmz kmz\", fileName);\n</code></pre>\n\n<p>It works fine if I try to get it from browser's address bar, but when I provide link to the action in <code>fetchKml</code> method, the action even doesn't inovoke.</p>\n\n<p>Any suggestions on how to open kmz files from another domain?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13212938,"title":"Forgot Password + Email Confirmation in ASP.NET MVC WebMatrix","body":"<p>It appears that these two features have a set of helper functions and schema in the WebMatrix code to get going.  However, there are no controller methods or views to get it done, so you have to implement yourself. </p>\n\n<p>Is there any samples anywhere where I can just copy this code into my app?   I'm looking for something to:</p>\n\n<ul>\n<li>Generate Forgot Password Email</li>\n<li>Generate Confirmation Email</li>\n<li>Forgot Password view + Controller method</li>\n<li>Resend confirmation email view + Controller method</li>\n</ul>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13082287,"title":"MVC web service in .Net","body":"<p>Is there any use to work in MVC web service instead of asmx and WCF web service. Can anyone please tell the difference between the three? </p>\n"},{"tags":["c#","html","asp.net-mvc","security"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":13212097,"title":"Can I securely replace new lines with break tags like this?","body":"<p>Can I securely replace <code>Environment.NewLine</code> with <code>&lt;br /&gt;</code> like I am in the following extension method?</p>\n\n<pre><code>public static string HtmlBreaks(this string s)\n{\n    if (string.IsNullOrEmpty(s)) { return s; }\n    return s.Replace(Environment.NewLine, \"&lt;br /&gt;\");\n}\n</code></pre>\n\n<p>I use it like this:</p>\n\n<pre><code>@Html.Raw(Model.Details.HtmlBreaks())\n</code></pre>\n\n<p>And let me be clearer. <strong><em>Is this secure?</em></strong> <em><strong>Am I breaking any internet security guidelines by replacing text with HTML and then issuing the <code>Raw</code> method?</em></strong> Am I opening this website up to any attacks by this?</p>\n"},{"tags":["asp.net","asp.net-mvc","azure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13201060,"title":"Why azure throws this error: Could not load file or assembly 'Microsoft.Build.Utilities.v3.5","body":"<p>I've upgraded EntityFramework from 4.1 to  5 and Upgraded .NET Framework to 4.5 on local machine everything works perfectly, but when I published my changes on Azure I receive this error:</p>\n\n<pre><code>Server Error in '/' Application.\n\nCould not load file or assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nAssembly Load Trace: The following information can be helpful to determine why the assembly 'Microsoft.Build.Utilities.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' could not be loaded.\n\n\nWRN: Assembly binding logging is turned OFF.\nTo enable assembly bind failure logging, set the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog] (DWORD) to 1.\nNote: There is some performance penalty associated with assembly bind failure logging.\nTo turn this feature off, remove the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog].\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","view"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13211758,"title":"Accessing an object passed into a view","body":"<p>I am passing an object (a List) into a view like so:</p>\n\n<pre><code>private readonly CarsContext _db = new CarsContext();\n\npublic ActionResult Index()\n{\n    ViewBag.Message = \"Foobar\";\n\n    var result = from cars in _db.CarProfiles\n                 where cars.CarOfTheWeek\n                 select cars;\n\n    return View(result.ToList());\n}\n</code></pre>\n\n<p>How do I access this object from within my Index view? I am thinking I need to add it to my dynamic viewbag, and access it that way instead of passing it as an argument, is this correct or if I keep my controller code above as it is, can I access this object from within the view?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":702,"score":2,"question_id":4831944,"title":"MVC3 Validation","body":"<p>For some reason my Identity column \"ID\" gets validated by MVC3? why is this happening when i did not specify it to be required.?? I have this \"@Html.HiddenFor(model => model.Id)\" in my view, which should not cause any issues.</p>\n\n<pre><code>public class User {\n    public int Id { get; set; }\n    [Required]\n    public string Name { get; set; }\n    [Required]\n    public string Email { get; set; }\n}\n</code></pre>\n\n<p>please help.</p>\n"},{"tags":["c#","asp.net-mvc","parsing","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13211620,"title":"Parsing text into an object in MVC with missing data","body":"<p>I am getting some post data from an HTML form. The data that comes up is used to build a <code>TextualReport</code> object. I want to parse the various pieces of form data that come up and populate those parts of my model.</p>\n\n<p>The reason i am not using a model binder is this is a fairly complex object and indices of my lists can be missing (start at 2, skip 3 etc..). I am starting with an existing object, and only replacing the properties that came up in the post.</p>\n\n<p>I have the following object called <code>TextualReport</code>.</p>\n\n<pre><code>public class TextualReport {\n\n    public IList&lt;Section&gt; Sections { get; set; }\n    public IList&lt;string&gt; MiscInputs { get; set; }\n\n    public TextualReport(){\n        Sections = new List&lt;Section&gt;();\n        MiscInputs = new List&lt;string&gt;();\n    }\n}\n\npublic class Section{\n    public Section(){\n        Id = Guid.NewGuid();\n        Blocks = new List&lt;Block&gt;();\n    }\n\n    public Guid Id { get; set; }\n    public string Heading { get; set; }\n    public IList&lt;Block&gt; Blocks { get; set; }\n}\n\npublic class Block{\n    public Block(){\n        PreGraphText = new List&lt;string&gt;();\n        PreGraphInput = new List&lt;string&gt;();\n        Graphs = new List&lt;Graph&gt;();\n        PostGraphText = new List&lt;string&gt;();\n    }\n    public Guid Id { get; set; }\n    public string Heading { get; set; }\n    public IList&lt;string&gt; PreGraphText { get; set; }\n    public IList&lt;Graph&gt; Graphs { get; set; }\n    public IList&lt;string&gt; PostGraphText { get; set; }\n    public IList&lt;string&gt; PreGraphInput { get; set; }\n}\n\npublic class Graph{\n    public string Url { get; set; }\n    public string Caption { get; set; }\n}\n</code></pre>\n\n<p>From my HTML/Razor form, I get a sequence of text strings like the following:</p>\n\n<pre><code>TextualReport.Sections[1].Blocks[0].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[0].Graphs[1].Caption=\nTextualReport.Sections[1].Blocks[0].Graphs[2].Caption=\nTextualReport.Sections[1].Blocks[0].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[0].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[1].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[1].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[1].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[2].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[2].Graphs[1].Caption=\nTextualReport.Sections[1].Blocks[2].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[2].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[3].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[3].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[3].PreGraphInput[1]=\nTextualReport.Sections[1].Blocks[4].Graphs[0].Caption=\nTextualReport.Sections[1].Blocks[4].PreGraphInput[0]=\nTextualReport.Sections[1].Blocks[4].PreGraphInput[1]=\n</code></pre>\n\n<p>What would be the best approach to populate my existing data with the various pieces that came up in the form post? I get the model from the database, then update based on the new data.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13211138,"title":"Render Partial View only after HttpPost ActionHandler","body":"<p>I am making WCF service call using MyViewRequest view fields inside HttpPost ActionHandler. The goal is to show response using partial view, <code>MyViewResponse</code></p>\n\n<p>In brief I need to achieve these two items-</p>\n\n<ol>\n<li>Disable load of partial view on first load.</li>\n<li>Display Response (along with Request) after service call.</li>\n</ol>\n\n<p><strong>MyViewRequest.cshtml</strong></p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(false)\n    //html code\n}\n&lt;/div&gt;\n&lt;div id=\"dvResponse\"&gt;\n  @Html.Partial(\"MyViewResponse\");\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Partial view: MyViewResponse.cshtml</strong></p>\n\n<pre><code>@model MvcApplication3.Models.MyModel\n@{\n    ViewBag.Title = \"MyViewResponse\";\n}\n\n&lt;h2&gt;MyView&lt;/h2&gt;\n\n@Html.Label(Model.MyName, \"My Name\")\n</code></pre>\n\n<p>This was pretty straight forward in Asp.Net using userControl, But stuck up here, How can we achieve this in MVC3.</p>\n"},{"tags":["asp.net-mvc","image","html-helper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13211314,"title":"Display image in view using asp.net mvc","body":"<p>I want to display image in view using asp.net mvc ?\nI ham retrieved the image from database.</p>\n\n<p>This is my view code :</p>\n\n<pre><code>    &lt;td&gt;\n        &lt;%: Html.DisplayFor(modelItem =&gt; item.Product_img) %&gt;\n    &lt;/td&gt;\n</code></pre>\n\n<p>But the Index page is like this :</p>\n\n<p><img src=\"http://i.stack.imgur.com/HPcZx.jpg\" alt=\"enter image description here\"></p>\n\n<p>How can I display the image?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13211376,"title":"Add additional information into ASP.net auth cookie?","body":"<p>Is there a way to add additional information into the ASP.NET authentication cookie?  I would like to save my own internal user key in the cookie, and have it expire at the same time as the auth cookie per this question:\n<a href=\"http://stackoverflow.com/questions/13170618/mvc-save-a-token-in-session\">MVC save a token in session</a></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13209964,"title":"Creating components with their own Model View Controller folders. And change routes for them?","body":"<p>my problem is that i have a MVC4 project and i want to create some components that i want to add in some views using partial views. I will show you a picture of the folders logic that i want to create in my MVC project.</p>\n\n<p><img src=\"http://i.stack.imgur.com/mZGg2.png\" alt=\"enter image description here\"></p>\n\n<p>From this how can i add this partial views because when i try to acces them they are first looked in the main Views folder from my application, is there a way to make custum routes to my application?</p>\n\n<pre><code>@{ Html.RenderPartial(\"Components\\\\Chart\\\\View\\\\Index.cshtml\");  }\n</code></pre>\n\n<p>This gives an error like this. </p>\n\n<blockquote>\n  <p>The partial view 'Conmponents\\Chart\\View\\Index.cshtml' was not found\n  or no view engine supports the searched locations. The following\n  locations were searched:\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.aspx\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.ascx\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.aspx\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.ascx\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.cshtml\n  ~/Views/Home/Conmponents\\Chart\\View\\Index.cshtml.vbhtml\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.cshtml\n  ~/Views/Shared/Conmponents\\Chart\\View\\Index.cshtml.vbhtml</p>\n</blockquote>\n"},{"tags":["asp.net-mvc","asp.net-web-api","httpclient"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13209010,"title":"console app HttpClient post to mvc web api","body":"<p>I have a default mvc web api instance built from the Visual Studio 2012 template.  It has the following routes and post method in the default ValuesController - the MVC site is unmodified from initial creation other than the contents of the Post method.  Also, I'm using .NET framework 4.0 since I'm planning to target Azure.</p>\n\n<p>Register method</p>\n\n<pre><code>public static void Register(HttpConfiguration config)\n{\n    config.Routes.MapHttpRoute(\n        name: \"DefaultApi\",\n        routeTemplate: \"api/{controller}/{id}\",\n        defaults: new { id = RouteParameter.Optional }\n    );\n}\n</code></pre>\n\n<p>and Post method</p>\n\n<pre><code>    // POST api/values\n    public string Post([FromBody]string value)\n    {\n        if (value != null)\n        {\n            return \"Post was successful\";\n        }\n        else\n            return \"invalid post, value was null\";\n    }\n</code></pre>\n\n<p>I created a Console application which uses HttpClient to simulate posting to the service, but unfortunately the \"value\" coming in to the Post is always null.  The Post method is successfully hit following the PostAsync call on HttpClient.</p>\n\n<p>It's not clear to me how to map my request such that value contains the StringContent I'm passing in...</p>\n\n<pre><code>    static void Main(string[] args)\n    {\n        string appendUrl = string.Format(\"api/values\");\n        string totalUrl = \"http://localhost:51744/api/values\";\n        HttpClient client = new HttpClient();\n        client.DefaultRequestHeaders.Add(\"Accept\", \"application/xml\");\n\n        string content = \"Here is my input string\";\n        StringContent sContent = new StringContent(content, Encoding.UTF8, \"application/xml\");\n\n        HttpResponseMessage response = null;\n        string resultString = null;\n\n        client.PostAsync(new Uri(totalUrl), sContent).ContinueWith(responseMessage =&gt;\n            {\n                response = responseMessage.Result;\n            }).Wait();\n\n        response.Content.ReadAsStringAsync().ContinueWith(stream =&gt;\n            {\n                resultString = stream.Result;\n            }).Wait();          \n    }\n</code></pre>\n\n<p>I'm new to the MVC web api and use of HttpClient - any help pointing me in the right direction would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":100,"score":4,"question_id":13166180,"title":"Force synchronous execution of asynchronous action in ASP.NET MVC 4","body":"<p>Since MVC 4 does not support asynchronous child actions (via <code>Html.Action</code>) I'm looking for a way to force the synchronous execution child actions. A simple workaround to this limitation is to provide synchronous versions of all my controllers actions:</p>\n\n<pre><code>public class FooAsyncController : Controller {\n    public async Task&lt;ActionResult&gt; IndexAsync() {\n        var model = await service.GetFoo().ConfigureAwait(false);\n        return View(model);\n    }   \n}\n\npublic class FooSyncController : FooAsyncController {\n    public ActionResult Index() {\n        return IndexAsync().Result; // blocking call\n    }   \n}\n</code></pre>\n\n<p>However, since we allow child action requests on all of our controller actions, doing this for every controller is a real PITA.</p>\n\n<p>Are there any extensibility points in the framework where we could inspect the return value of an action and, if it returns a <code>Task&lt;T&gt;</code> and we are handling a child action, force a synchronous call?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13210121,"title":"ASP MVC - Reverse a foreach","body":"<p>I have the following code which outputs a series of links for a nav bar:</p>\n\n<pre><code>    &lt;% foreach (var item in (Dictionary&lt;string, string&gt;)ViewData[\"navItems\"])\n        {\n        Response.Write(Html.ActionLink(item.Key, item.Value));\n        }\n    %&gt;\n</code></pre>\n\n<p>Is there anyway to alter this code so that the list of links is output in reverse order?</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13197807,"title":"Newly added cshtml file not browsable","body":"<p>I'm new to MVC, razor &amp; webmatrix. \nI'm adding content to a website which I didn't create.</p>\n\n<p>Only the pages that the Creater of the website created can be viewed. I can view his partials and fulls.</p>\n\n<p>I can change content on the pages that can already be browsed. But when I try to add new pages they don't work. I can't view them, none of my partials return data at all.</p>\n\n<p>I'm not sure what type of information in include in my post to get a meaningful answer.</p>\n\n<p>thank you.</p>\n"},{"tags":["c#","jquery","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13206156,"title":"Toggle visibility of list item","body":"<p>I am using MVC 4 with Razor view engine.</p>\n\n<p>I want to display a nested unordered list comprised of years as parents and months as children.</p>\n\n<p>Consider the following HTML:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;ul&gt;\n    @foreach (var yr in Dates.Select(x =&gt; x.Year).Distinct())\n    {\n        &lt;li&gt;&lt;a href=\"#\" class=\"parent\"&gt;@yr&lt;/a&gt;&lt;/li&gt;\n        &lt;ul class=\"child\" style=\"display: none\"&gt;\n        @foreach (var mo in Dates.Where(x =&gt; x.Year == yr).Distinct())\n        {\n            &lt;li id=\"@yr\"&gt;&lt;a href=\"#\" class=\"submit-link\" id=\"@mo.Month\"&gt;@mo.ToString(\"MMMM\")&lt;/a&gt;&lt;/li&gt;\n        }\n        &lt;/ul&gt;\n    }\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have added the following script to make the \".child\" (dis)appear when I click on \".parent\" anchor.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n    $(function () {\n        $(\".parent\").click(function () {\n            $(this).closest(\"ul\").find(\".child\").toggle(\"fast\")\n            return false;\n        });\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>However it toggles ALL \".child\" items in the document. How to make it toggle only the child one?</p>\n"},{"tags":[".net","asp.net-mvc","visual-studio-2010","t4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13208768,"title":"T4MVC Error - T4 file is blocked or in a non trusted zone","body":"<p>I am running Visual Studio 2010 on a Windows 7 virtual machine inside of Parallels Desktop 8 on a Mac Book Pro.</p>\n\n<p>I'm trying to incorporate T4MVC into a new MVC4 project.  I installed the T4MVC package from Nuget and immediately started getting this error...</p>\n\n<p><strong>Failed to resolve include text for file:The path '\\psf\\Home...\\T4MVC.tt.hooks.t4' must be either local to this computer or part of your trusted zone. If you have downloaded this template, you may need to 'Unblock' it using the properties page for the template file in Windows Explorer.</strong></p>\n\n<p>I went into the \"Properties\" menu for the T4MVC.tt.hooks.t4 file, but I could not find any option or button to unblock it.</p>\n\n<p>My assumption is that this problem has something to do with the fact that I'm running on a virtual machine and therefore My project files are not in a trusted location.  But I'm not sure how to fix that.</p>\n\n<p>I've been searching around but can't seem to find any answers.  Any help would be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","methodnotfound"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13207600,"title":"Mvc 3 Html.action Method not found - Void Microsoft.Web.Infrastructure","body":"<p>I published to web server (Windows server 2008 R2 Enterprise-IIS 7) My Mvc 3 web site but dont work,why?</p>\n\n<p><strong>_Layout.cshtml:</strong></p>\n\n<pre><code>@Html.Action(\"GetLeftMenu\", \"Menu\", new { ulCss = \"navmenu-v\", CurrentContentID = ViewBag.CurrentContentID, LangID = Session[\"langID\"] })\n</code></pre>\n\n<p><strong>MenuController:</strong></p>\n\n<pre><code>    [OutputCache(Duration = 3600, VaryByParam = \"LangID;ulCss\")]\n        public MvcHtmlString GetLeftMenu(string ulCss, int? CurrentContentID, int? LangID = 1)\n        {\n...\n}\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>Method not found: 'Void Microsoft.Web.Infrastructure.DynamicValidationHelper.ValidationUtility.GetUnvalidatedCollections(System.Web.HttpContext, System.Collections.Specialized.NameValueCollection ByRef, System.Collections.Specialized.NameValueCollection ByRef, System.Collections.Specialized.NameValueCollection ByRef, System.Web.HttpCookieCollection ByRef)'.\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-routing","http-status-code-404","custom-error-pages"],"answer_count":8,"favorite_count":9,"up_vote_count":31,"down_vote_count":0,"view_count":26607,"score":31,"question_id":553922,"title":"Custom ASP.NET MVC 404 Error Page","body":"<p>I am trying to make a custom HTTP 404 error page when someone types in a URL\nthat doesn't invoke a valid action or controller in ASP.NET MVC.</p>\n\n<p>Instead of it displaying the generic Resource Not Found ASP.NET error...</p>\n\n<p>I don't want to use the web config to handle this.</p>\n\n<p>Is there any kind of routing magic I can do to catch any invalid URLs?</p>\n\n<p><strong>Update:</strong> I tried the answer given... however I still get the ugly resource not found message.</p>\n\n<p><strong>Another update</strong> OK. Apparently something changed in RC1.. I've even tried specifically trapping 404 on an HttpException and it still just gives me the resource not found page.</p>\n\n<p>I've even used mvcContrib's resource's feature and nothing. Same problem... Any ideas anyone? Please before I go nuts...</p>\n"},{"tags":["c#","asp.net-mvc","jcarousel","nopcommerce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13208114,"title":"Error executing child request for handler in plugin","body":"<p>I'm using nop commerce open source. I wanted to show the recently add products in home page. so what I did is I activated plugin Nop JCarousel  in the admin panel.</p>\n\n<p>But if I select \"Recently view product\" as a Data source type it is working fine.But if I select \"recently add product\" Data source type  there is error coming up.</p>\n\n<p>it says </p>\n\n<pre><code>Server Error in '/' Application.\nMethod not found: 'Nop.Core.IPagedList`1&lt;Nop.Core.Domain.Catalog.Product&gt; Nop.Services.Catalog.IProductService.SearchProducts(Int32, Int32, System.Nullable`1&lt;Boolean&gt;, System.Nullable`1&lt;System.Decimal&gt;, System.Nullable`1&lt;System.Decimal&gt;, Int32, System.String, Boolean, Int32, System.Collections.Generic.IList`1&lt;Int32&gt;, Nop.Core.Domain.Catalog.ProductSortingEnum, Int32, Int32, Boolean, System.Collections.Generic.IList`1&lt;Int32&gt; ByRef, Boolean)'.\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\nException Details: System.MissingMethodException: Method not found: 'Nop.Core.IPagedList`1&lt;Nop.Core.Domain.Catalog.Product&gt; Nop.Services.Catalog.IProductService.SearchProducts(Int32, Int32, System.Nullable`1&lt;Boolean&gt;, System.Nullable`1&lt;System.Decimal&gt;, System.Nullable`1&lt;System.Decimal&gt;, Int32, System.String, Boolean, Int32, System.Collections.Generic.IList`1&lt;Int32&gt;, Nop.Core.Domain.Catalog.ProductSortingEnum, Int32, Int32, Boolean, System.Collections.Generic.IList`1&lt;Int32&gt; ByRef, Boolean)'.\n\nSource Error:\n\n\nLine 3:  @foreach (var widget in Model)\nLine 4:  {\nLine 5:      @Html.Action(widget.ActionName, widget.ControllerName, widget.RouteValues)\nLine 6:  }\n</code></pre>\n\n<p>Any idea on how to solve this? </p>\n"},{"tags":["c#","asp.net","asp.net-mvc","dll","metadata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13204312,"title":"Unable to remove \"Metadata file \"...\\bin\\foo.dll\" is not available\" error","body":"<p>I am getting this issue for NewtonSoft Json dll. It's saying namespace 'Json' does not exist in namespace 'System.Runtime.Serialization'.</p>\n\n<p>I had cleaned and built the code again. Also tried to add the dll into the bin folder but still no luck.</p>\n\n<p>Why is this happening and how can I overcome this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12802171,"title":"ASP.NET MVC 3 update field before validation","body":"<p>The problem I'm having right now it's that ASP.NET MVC validates the request object, <em>user</em> in this case</p>\n\n<pre><code>public ActionResult Edit(User user)\n</code></pre>\n\n<p>What I want to do is that if the user's password is left blank, do not update the password, just use the old password, but if it's set, update it.</p>\n\n<p>The problem is that the framework complains that user does not has a password, even if I update the <em>user</em> object, it complains</p>\n\n<pre><code>public ActionResult Edit(User user)\n{\n    user.Password = \"Something\";\n\n    // more code...\n}\n</code></pre>\n\n<p>Apparently it does the validation on the request object, is there a way I can skip the validation in this case, or at least delay it until I finished modifying the user object?</p>\n\n<p>This is the full method code</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(User user)\n{    \n    if (string.IsNullOrEmpty(user.Password))\n    {\n        var oldUser = db.Users.Single(u =&gt; u.Id == user.Id);\n        user.Password = oldUser.Password;\n    }\n\n    try\n    {\n        db.SaveChanges();\n        return RedirectToAction(\"Index\");\n    }\n    catch\n    {\n        return View(user);\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","oauth","twitter-oauth","dotnetopenauth"],"answer_count":2,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":201,"score":8,"question_id":12963536,"title":"OAuthWebSecurity \"Remember me\" for Twitter","body":"<p>Using DotNetOpenAuth on MVC4 C# for my application to get authentication for users from Facebook, Twitter, Google+ and yahoo. Currently all the providers other than twitter will allow existing users to just log in without asking for permission when coming back to the site. </p>\n\n<p>I noticed that Twitter has a \"Remember me\" check box on permission request on their page. Even if I select it, it still asks me next time for my twitter username and password. The other three providers automatically authenticate me without seeing their sign in page.</p>\n\n<p>How to get users coming back to my site through Twitter log in to not go through permission request again? </p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13207043,"title":"User routing in ASP.NET MVC for urls like www.website.com/users/jeffAtwood","body":"<p>I am trying to show user details at the following url : </p>\n\n<p>www.website.com/users/yasser</p>\n\n<p>where the last entry <code>yasser</code> is the username I have tried a couple of routes but it just does nt work.</p>\n\n<p>My User controller is as shown below.</p>\n\n<pre><code>public class UserController : Controller\n{\n    public ActionResult Index(string username)\n    {\n        var model = _service.GetUserDetails(username);\n        return View(model);\n    }\n}\n</code></pre>\n\n<p>I have reffered <a href=\"http://stackoverflow.com/questions/3000547/asp-net-mvc-user-routing-like-that-in-stackoverflow\">this</a> and couple of other links, but I really could not figure out how it worked.</p>\n\n<p>Can some one help me out on this. Thanks</p>\n\n<p><strong>Edit</strong> :</p>\n\n<p>My current route config is below</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n        routes.MapRoute(\n            name: \"Default\",\n            url: \"{controller}/{action}/{id}\",\n            defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n        );\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2612,"score":0,"question_id":2137393,"title":"asp.net mvc postback","body":"<p>I have a controller with the following two Edit methods.  The edit form displays correctly with all additional dropdown lists from the FormViewModel.  However, when I changed some field values and submitted the form. None of the changed fields were saved. The fields in the postbask collection have default or null values.   I have another edit form which update another table.  On submit, the changed values are saved. Does anyone know why?</p>\n\n<pre><code>// GET: /Transfers/Edit/5\npublic ActionResult Edit(int id)\n{\n    Transfer transfer = myRepository.GetTransfer(id);\n\n    if (transfer == null)\n        return View(\"NotFound\");\n\n    return View(new TransferFormViewModel(transfer));\n\n} \n\n//\n// POST: /Transfers/Edit/5\n\n[AcceptVerbs(HttpVerbs.Post)]\npublic ActionResult Edit(int id, Transfer collection)\n{\n\n    Transfer transfer = vetsRepository.GetTransfer(id);\n\n    if (transfer == null)\n        return View(\"NotFound\");\n    else\n    {\n        try\n        {\n            UpdateModel(transfer);\n            vetsRepository.Save();\n\n            return RedirectToAction(\"Details\", new { id = transfer.TransfersID });\n        }\n        catch\n        {\n            ModelState.AddModelErrors(transfer.GetRuleViolations());\n\n            return View(new TransferFormViewModel(transfer));\n        }\n    }\n}\n</code></pre>\n"},{"tags":["ajax","asp.net-mvc","controller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13205334,"title":"Model Passed into MVC 4 Controller Null","body":"<p>I'm trying to serialize a form and pass it into a controller as a model. What I'm doing I've done in the past, but it's not working for some reason, so I suspect I am missing something stupid. Perhaps you can find it.</p>\n\n<p>In my controller I have a method:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult AddShippingLocation(PricingRequestModel model)\n    {\n        model.ShippingLocationsModel.Add(new ShippingLocationsModel());\n\n        return PartialView(\"shiplocationPartial\", model);\n    }\n</code></pre>\n\n<p>In my view I have a script that looks like this:</p>\n\n<pre><code>function AddShippingLocation() {\n    $.ajax({\n        data: { model: $('#shippinginfoform').serialize() },\n        type: \"POST\", \n        url: \"/PricingRequest/AddShippingLocation\", \n        success: function (response) {\n            $('#shiplocation-wrapper').html(response);\n        }\n    })\n}\n</code></pre>\n\n<p>This is called from a link that gets clicked. Also in the view I have a form that uses this:</p>\n\n<pre><code>@using (Html.BeginForm(\"AddShippingLocation\", \"PricingRequest\", FormMethod.Post, new { id = \"shippinginfoform\" }))\n</code></pre>\n\n<p>{</p>\n\n<p>I put the Addshippinglocation in as the method because I wanted to test to see if the model would be serialized using the built in helper. The model gets passed in properly using Html.BeginForm, it also gets passed in properly when using Ajax.BeginForm. When using jquery.serialize, though, it doesn't get passed in properly. On a side note, I'm using MVC 4. Any ideas? Thanks.</p>\n\n<p>EDIT: Here's the request headers. The top one is a successful post of the model to the method, the bottom is the .serialize() that passes in a null model. I examined the post strings and the are the exact same.</p>\n\n<pre><code>Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Encoding gzip, deflate\nAccept-Language en-US,en;q=0.5\nConnection  keep-alive\nCookie  .ASPXAUTH=9F06BF2A7D03211E0D2ACEC26D7A568754C89F8A265EE61D9F8010BB8DF1D97670212F1E853FDE960E87AAC5DC7D364A251F670560448482517DA7C072864F62AC0C5C3E1EE8D375ACC1EA8F4D63CFC3C1DD28BBDCAC945155D15289DCDDA3B540756C0609611C13A438B5FF4CA747219290AFB51F58B8AD35AE40C01D3AFAF8B32ADD7E200148B1E1646400CAC0F116; ASP.NET_SessionId=v3qwt02dn1pd13posl5zzk3n\nHost    localhost:2652\nReferer http://localhost:2652/PricingRequest/custinfo\nUser-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nRequest Headers From Upload Stream\nContent-Length  471\nContent-Type    application/x-www-form-urlencoded\n\nAccept  */*\nAccept-Encoding gzip, deflate\nAccept-Language en-US,en;q=0.5\nCache-Control   no-cache\nConnection  keep-alive\nContent-Length  555\nContent-Type    application/x-www-form-urlencoded; charset=UTF-8\nCookie  .ASPXAUTH=9F06BF2A7D03211E0D2ACEC26D7A568754C89F8A265EE61D9F8010BB8DF1D97670212F1E853FDE960E87AAC5DC7D364A251F670560448482517DA7C072864F62AC0C5C3E1EE8D375ACC1EA8F4D63CFC3C1DD28BBDCAC945155D15289DCDDA3B540756C0609611C13A438B5FF4CA747219290AFB51F58B8AD35AE40C01D3AFAF8B32ADD7E200148B1E1646400CAC0F116; ASP.NET_SessionId=v3qwt02dn1pd13posl5zzk3n\nHost    localhost:2652\nPragma  no-cache\nReferer http://localhost:2652/PricingRequest/custinfo\nUser-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nX-Requested-With    XMLHttpRequest\n</code></pre>\n"},{"tags":["asp.net-mvc","performance","nhibernate","guid"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13202558,"title":"nhibernate guid performance","body":"<p>What would be the overhead of using GUID's instead of an integer identity in nHibernate for table primary keys? </p>\n\n<p>The main reason for use would be the obfuscation of table ids on user facing data.</p>\n"},{"tags":["asp.net-mvc","linq","sorting","jqgrid"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":516,"score":0,"question_id":10361567,"title":"Jqgrid Sorting not working","body":"<p>i created a jqgrid with this follwoing code and i succeeded creating jqgrid without sorting . so i modified the code , but it doesn't sort the data and showing the following error, </p>\n\n<pre><code>'firstName' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near simple identifier, line 6, column 1.\n</code></pre>\n\n<h2> Controlller</h2>\n\n<pre><code>public ActionResult GridData(string sidx, string sord, int page, int rows)\n    {\n        int pageIndex = Convert.ToInt32(page) - 1;\n        int pageSize = rows;\n        int totalRecords = db.customers.Count();\n        int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);\n\n        var _Customers = db.customers.OrderBy(sidx + \" \" + sord).Skip(pageIndex * pageSize).Take(pageSize).ToArray();\n\n        var jsonData = new\n        {\n            total = (int)Math.Ceiling((float)totalRecords / (float)rows),\n            page = page,\n            records = totalRecords,\n            rows = (from r in _Customers.AsEnumerable()\n                    select new\n                    {\n\n                        id = r.id,\n                        cell = new[] { \"&lt;input type='radio' style='cursor:pointer' class='view_Account'  name='selectedCall'  id='\" + r.id + \"' value='\" + r.id + \"' /&gt;\", r.firstName, r.lastName }\n                    }\n                   ).ToArray()\n        };\n        return Json(jsonData, JsonRequestBehavior.AllowGet);\n\n    }\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>$(\"#list\").jqGrid({\n        url: '/Customer/GridData/',\n        datatype: 'json',\n        colNames: ['', 'FirstName', 'LastName'],\n        colModel: [\n        { name: 'ssss', width: 20, search: false },\n                    { name: 'firstName', sortable: true, sorttype: \"text\", searchoptions: { sopt: ['eq', 'ne'] }, width: 180 },\n                    { name: 'lastName', sortable: true, sorttype: \"text\", width: 183 }\n\n                ],\n        rowNum: 100,\n        width: '200px',\n        height: '100px',\n        sortname: 'firstName',\n        sortorder: \"asc\",\n        pager: jQuery('#pager')\n    });\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","sharepoint","word","webdav"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":376,"score":0,"question_id":10422841,"title":"Loading/Saving Word Documents from Web App (asp.net MVC)","body":"<p>I'm making a web app.  Part of it includes the automatic generation of word documents (letters).  Those documents need to be opened by the end user, then saved back to the server once they've finished editing.</p>\n\n<p>I tried using webdav for this but the only browser I could actually launch word from (using active-x) was IE.  I also found a plugin for firefox, but for Chrome I couldn't find a way that worked.</p>\n\n<p>Next I thought about making the clients map a drive to webdav (or similar), then offering up the files as file://... links, but that only works if the webpage is on the local machine.</p>\n\n<p>Before I resort to ditching word (the clients won't like this) and using CKEditor or TinyMCE, is there another way?</p>\n\n<p>In short, I'd like to have links to a document on the page, which when clicked are opened in word, but the file should stay remote - and then when saving, it's the remote file that gets updated.</p>\n\n<p>I've also looked at Zoho but it could be very expensive for this project, plus I don't think it can be white-labelled and also looks a bit old fashioned, UI wise.</p>\n\n<p>Maybe Sharepoint can do what I need?  Haven't looked at that much.  Also thought of making a client app to run in the system tray and deal with things.</p>\n\n<p>If there was a decent way of editing Word docs from within the browser with something like CKEditor/TinyMCE and once finished, conversion back to Word format actually worked 100%, that would suffice.</p>\n\n<p>I'm open to totally fresh ideas if anyone has any...</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui-tabs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13205327,"title":"jQuery tab loading design","body":"<p>This is my first ASP.NET MVC application and I am trying to select a better option for POC I am working on using ASP.NET MVC 3 and jQuery 1.9.1. Please suggest which option is better and why.Currently I have 2 implementations as below.</p>\n\n<p>1) I am loading 3 partial views on demand in 3 different jQuery tabs. On demand means when user clicks on a particular tab, I call associated controller action (using GET) using Ajax and populate the model object that feeds the partial view. Whenever user clicks on other tabs and comes back to the previous one, since we are loading tab data on every request, the new request data wipes out the user entered data. To prevent this, I intend to use a Javascript object (one object per tab) that maps to model object. I will update the global javascript object whenever user changes data in the controls.This will allow me to get the current data. When user clicks on submit, (only 1 submit button, no 'Save' button for individual tabs) I post the JS object to the controller using Ajax. The controller action (using POST) will be executed and I can use the model object for further processing.  </p>\n\n<p>2) Another option is load all the tabs in the application at once with all dropdowns filled in. Let the user edit the data. I will capture the data in one global javascript (one object per tab) when user updates fields on the web page. When user clicks on submit, (only 1 submit button, no 'Save' button for individual tabs) I post the JS object to the controller using Ajax. The controller action (using POST) will be executed and I can use the model object for further processing returning partial view (or JSON ?) as response. </p>\n\n<p>Please let me know if you have anything to improve in any of the two approaches. </p>\n\n<p>In actual application there could 10-15 tabs with lots of controls so it is really important for me to get clear understanding on the approach so as not to land in trouble in future due to improper design. </p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13201319,"title":"ASP.NET MVC append div to body","body":"<p>I make a customize controller about calendar. But a div required  to append to body.  I search,but get nothing . The following code what I implement  works,but not fine. I figure out that, div should be put to the end of body ,just like <code>jquery $('body').append('div')</code> But I don't know how to code in MVC helper.</p>\n\n<pre><code>  public static MvcHtmlString CalendarTextBox(this HtmlHelper helper, string name, DateTime? value, DateTime start, DateTime max, string nextTriggerId, object htmlAttributes = null)\n            {\n                var result = helper.TextBox(name, value, htmlAttributes);\n                var str = result.ToHtmlString().Replace(@\"/&gt;\", string.Format(@\"  mod=\"\"calendar|notice\"\" \n       mod_notice_tip=\"\"yyyy-mm-dd\"\" \n      mod_calendar_rangeStart=\"\"{0}\"\" \n      mod_calendar_rangeEnd=\"\"{1}\"\"\n      mod_calendar_focusNext=\"\"{2}\"\" //&gt;\", start.ToString(\"yyyy-MM-dd\"), max.ToString(\"yyyy-MM-dd\"), nextTriggerId));\n\n                if (null == helper.ViewData[\"calendar\"])\n                {\n                    str += string.Format(\n                       @\"&lt;div style=\"\"HEIGHT: 0px\"\"id=\"\"jsContainer\"\"class=\"\"jsContainer\"\"&gt;&lt;div style=\"\"DISPLAY: none\"\"id=\"\"jsHistoryDiv\"\"&gt;&lt;/div&gt;&lt;textarea style=\"\"DISPLAY: none\"\"id=\"\"jsSaveStatus\"\"&gt;&lt;/textarea&gt;&lt;div style=\"\"Z-INDEX: 999; POSITION: absolute; DISPLAY: none; OVERFLOW: hidden\"\"\n    id=\"\"tuna_alert\"\"&gt;&lt;/div&gt;&lt;div style=\"\"Z-INDEX: 120; POSITION: absolute; VISIBILITY: hidden\"\"\n    id=\"\"tuna_jmpinfo\"\"&gt;&lt;/div&gt;&lt;div style=\"\"Z-INDEX: 120; POSITION: absolute; DISPLAY: none\"\"id=\"\"tuna_calendar\"\"\n    class=\"\"tuna_calendar\"\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;SCRIPT type=text/javascript charset=utf-8 src=\"\"{0}/js/datepicker/tuna_100324_jsLoader.js\"\"&gt;&lt;/script&gt;&lt;script type=\"\"text/javascript\"\"&gt;var JL=new CtripJsLoader();var files=[[\"\"{0}/js/datepicker/tuna_100324_index.js\"\",\"\"utf-8\"\",true]];JL.scriptAll(files);&lt;/script&gt;\",\n                       Define.ASSET_PATH);\n                    helper.ViewData[\"calendar\"] = 1;\n                }\n                return MvcHtmlString.Create(str);\n            }\n</code></pre>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13205035,"title":"Passing query data from controller to view","body":"<p>I have been stuck on this problem for too long and would love some help. </p>\n\n<p>On a view people can select two items from two radiobutton lists which returns via a FormMethod.Get to the Index event in HomeController. </p>\n\n<p>These 2 values, 'parts and 'use' are queried to return a result and its passed back to the view via a viewbag. However the viewbag returns a line like { Item = Kona, Price = 400.0000, Quantity = 2 } in the view.</p>\n\n<p>Whereas I want to return each item such as item.Item, Item.Price so I can use them individually. </p>\n\n<p>I have tried everything I can find to no avail. \nAnonymous classes items also throw red errors </p>\n\n<p>View </p>\n\n<pre><code>foreach(var item in ViewBag.getstock)\n{ //Show it and then make a new line with the &lt;BR/&gt;\n    @item &lt; br / &gt;\n    //{ Item = Kona, Price = 400.0000, Quantity = 2 } \n}\n</code></pre>\n\n<p>HomeController</p>\n\n<pre><code> public ActionResult Index()\n {\n     //this returns the entire query string\n     ViewBag.querystring = Request.QueryString;\n\n     //if any keys are in the url from the view\n     if (Request.QueryString.HasKeys())\n     {\n         //extract them out so that you can use them\n         //key = the name such as Part or Use it goes Key &amp; Value this is passed to a Viewbag\n         //get(o) is getting the value at place 0, the first value in the url\n\n         ViewBag.querystringvalue0 = Request.QueryString.Get(0);\n         ViewBag.querystringvalue1 = Request.QueryString.Get(1);\n     }\n\n     //if there is any query string\n     if (Request.QueryString.HasKeys())\n     {\n         //pass the data to a couple of variables,\n         var parts = Request.QueryString.Get(0);\n         var use = Request.QueryString.Get(1);\n\n         //put them in a new query and return the results\n         ViewBag.getstock = from p in Bikeshopdb.Stocks\n         where p.PartName == parts &amp;&amp; (p.Road == use || p.Mtn == use || p.Hybrid == use) select new\n         {\n             p.Item, p.Price, p.Quantity\n         };\n\n     }\n     return View(Bikeshopdb.Stocks.ToList());\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","ef-database-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13186013,"title":"MVC4 Foreign Key constraint prevents posting insert to SQL db","body":"<p>Using MVC4 I'm trying to insert a column into a linking table that has a two column composite key. Both columns are primary key in two separate tables.</p>\n\n<p>Key1 is picked up from a hidden field in the web form which is generated from an id passed in the URL.</p>\n\n<p>Key2 is the selected value picked up from a dropdown list of names from the second PK table.</p>\n\n<p>As far as I can tell, the values are correct (they appear in the two primary key tables).</p>\n\n<p>Does anyone know why I'm getting an error from the HttpPost Create action (mainly default scaffolding code) that tells me there is a conflict with the first PK -> FK constraint?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13204121,"title":"Including a List<SpecificType> in a model, and how to populate it","body":"<p>I currently have three Model classes:</p>\n\n<pre><code>public class MarketReport\n{\n    public MarketReportAbbrStores LISTOFSTORESUMMARY {get; set;}\n\n}\n\npublic class MarketReportAbbrStores : List&lt;AbbrStore&gt;\n{\n    public AbbrStore abbrStore  { get; set; }\n}\n\n    public class AbbrStore\n{\n    public string StoreName { get; set; }\n    public int MemberCount { get; set; }\n    public int LeaderCount { get; set; }\n    public int ActivistCount { get; set; }\n}\n</code></pre>\n\n<p>Now, I have no idea if I am doing the above correctly, but I want to populate the list within the MarketReport</p>\n\n<pre><code>        foreach (var store in stores)            \n        {\n\n            AbbrStore abbrstore = new AbbrStore();\n            abbrstore.StoreName = store;\n            marketInformation.LISTOFSTORESUMMARY.Add(abbrstore);\n            //ERROR: Object reference not set to an instance of an object.\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","iis","web-deployment"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":24,"score":1,"question_id":13204109,"title":"How to publish or deploy .NET website without delays","body":"<p>How to publish or deploy .NET website without delays? </p>\n\n<p>I have look for websites that are build over .NET technologies, like StackOverflow, and I never saw them down because an update is being made. For my web sites, I got down time in minors updates, like correcting some bugs on my Controllers (I use MVC), not by doing something bigger like database or server movements.</p>\n\n<p>So how can I prevent site loading delays due to ASP.NET Startup? \nI know that it require \"ASP.NET worker process\" to compile the code, but how can I prevent the traffic issues.</p>\n"},{"tags":["javascript","asp.net","ajax","asp.net-mvc","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13203772,"title":"Is there a way to send an object as well as a separate variable in an ajax POST request","body":"<p>I have a post request I am doing like so:</p>\n\n<pre><code>var addProject = function (project, id) {\n            return $.ajax(projectUrl, {\n            type: \"POST\",\n            data: { project: project, id: id }\n    });\n};\n</code></pre>\n\n<p>This is all fine, and it send up my project object (in JSON) with no problem. What i want to do is this request but also add in a key (that does not belong in the project object) that I can pass to the server controller. Any idea if I can do this, or what is a good way to do this. I really don't want to have to go back and change my object models to account for a key that I will only need every once in awhile.</p>\n\n<p>This is an ASP.NET MVC4 project, and it is going back to a web api controller if that matters.</p>\n\n<p>EDIT: here is my server side stuff</p>\n\n<pre><code>    public HttpResponseMessage PostNew(Project project, int id)\n    {\n        //TODO grab the client to add the project to\n        Uow.Projects.Add(project);\n        Uow.Commit();\n\n        HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, project);\n        //response.Headers.Location = new Uri(Url.Link(\"ApiControllerAction\", new { id = client.ID }));\n        return response;\n    }\n</code></pre>\n\n<p>Maybe I am not being clear enough. I want to pass in the project object, and then just an int variable. Passing project alone works, but if I try to pass the int it gives me a 400 error</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","bundle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13204151,"title":"How can I bundle a specific bundle during development in Asp.Net MVC 4","body":"<p>Given these bundles:</p>\n\n<pre><code>     public static void RegisterBundles(BundleCollection bundles)\n     {\n        // 3rd party scripts\n        bundles.Add(new ScriptBundle(\"~/scripts\")\n            .IncludeDirectory(\"~/Scripts/\", \"*.js\"));            \n\n        // my scripts\n        bundles.Add(new ScriptBundle(\"~/myscripts\")\n            .IncludeDirectory(\"~/MyScripts/\", \"*.js\"));\n     }\n</code></pre>\n\n<p>During development it would be helpful to bundle just the first bundle, the 3rd party scripts, but not the second.</p>\n\n<p>Is there any way to specify that one bundle shall be bundled and maybe even minified, but the other one not?</p>\n\n<p>I thought about adding something like</p>\n\n<pre><code> BundleTable.EnableOptimizations = true;\n</code></pre>\n\n<p>but this would bundle all bundles. On the other hand, the bundle classes, like ScriptBundle have no members that would allow me to force their bundling.</p>\n"},{"tags":["c#","asp.net-mvc","ms-project","mpxj"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13203732,"title":"Why my method getTaskByID from ProjectFile in the library Mpxj return null?","body":"<p>I have read in the page <a href=\"http://mpxj.sourceforge.net/apidocs/net/sf/mpxj/ProjectFile.html\" rel=\"nofollow\">http://mpxj.sourceforge.net/apidocs/net/sf/mpxj/ProjectFile.html</a> that the method GetTaskById returns the requested task, or null if not found, but i don't know why the activity is not found.</p>\n\n<p>Here my code:</p>\n\n<pre><code> var actividades=db.Actividades.Where(s=&gt;s.ProyectoId==ProyectoId).Include(s=&gt;s.ActApuCompuesto);\n\n        ProjectFile pfile = new ProjectFile();\n\n        foreach(var item in actividades){\n            Task task= pfile.addTask();\n            task.setName(item.Nombre);\n            task.setDuration(Duration.getInstance(item.Cantidad * item.ActApuCompuesto.DuracionApu(), TimeUnit.DAYS));\n            task.setID(new Integer(item.Id));\n        }\n        //pfile have all activities, I check it.\n\n\n        foreach (Task task in ToEnumerable(pfile.getAllTasks()))\n        {\n\n            int valor=task.getID().intValue();\n            var precedencias=db.ActividadRelacionPrecedencias.Where(s =&gt; s.Actividad1Id ==valor );\n              foreach (var item2 in precedencias)\n              {//item2.Actividad2Id not is null\n                   Task taskPrec = pfile.getTaskByID(java.lang.Integer.valueOf(item2.Actividad2Id));\n               //But taskprec is null\n                  task.addPredecessor(taskPrec, relationType(item2.RelacionPrecedenciaId), Duration.getInstance(item2.MasDias, TimeUnit.DAYS));\n              }\n\n\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","ajax.beginform"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13202216,"title":"MVC HttpPost modify Model and replace view","body":"<p>Can someone please help me understand this. I have the following code:</p>\n\n<p>The controller</p>\n\n<pre><code>public ActionResult Stuff(PersonModel model)\n{\n    model.Address = \"Some Address\";\n\n    return PartialView(\"_Registration\", model);\n}\n</code></pre>\n\n<p>The View</p>\n\n<pre><code>    @Ajax.BeginForm(\"Stuff\", new AjaxOptions(){ HttpMethod=\"POST\", UpdateTargetId=\"the_form\", InsertionMode=InsertionMode.Replace, OnSuccess=\"Stuff\"  })\n{\n    &lt;div id=\"the_form\"&gt;\n        @{Html.RenderPartial(\"_Registration\", new TypeScriptTest.Models.PersonModel());}\n    &lt;/div&gt;\n\n    &lt;input type=\"submit\" value=\"Get Addreess\" /&gt;\n}\n</code></pre>\n\n<p>The Partial View</p>\n\n<pre><code>@model TypeScriptTest.Models.PersonModel\n\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            Name: \n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.TextBoxFor(c =&gt; c.Name)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            Address: \n        &lt;/td&gt;\n        &lt;td&gt;\n             @Html.TextBoxFor(c =&gt; c.Address)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The data is posted with whatever I type in the two fields. But then I replace the Address property value with \"Some Address\" and return a PartialView I would expect to get a new view that replaces the old. This probably happens, but the view that replaces the old does not include the new \"Some Address\" value. It just looks exactly like the view I posted.</p>\n\n<p>I have a workaround, but I want to understand what is happening here. My workaround is as follows:</p>\n\n<pre><code>public ActionResult Stuff(PersonModel model)\n{\n    model.Address = \"Some Address\";\n\n    var v = PartialView(\"_Registration\");\n\n    var view = v.ViewEngineCollection.OfType&lt;System.Web.Mvc.RazorViewEngine&gt;().Single().FindPartialView(new ControllerContext(HttpContext, RouteData, this), \"_Registration\", false);\n\n    var result = new PartialViewResult() { View = view.View };\n\n    result.ViewData.Model = model;\n\n    return result;\n}\n</code></pre>\n\n<p>Here I can bypass cache using false as the last parameter in FindPartialView. Setting this parameter to true results in the same problem as the one in discussion.</p>\n\n<p>Why is this happening and what is the correct way to get around this problem? My workaround works fine, but I would like to understand the problem.</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13202383,"title":"Return list of mapped classes - Entity Framework","body":"<p>I have this class that is linked to a View in the SQL Server:</p>\n\n<pre><code>[Table(\"V_Clients\")]\npublic class Client\n{\n    [Key]\n    public int ClientId { get; set; }\n    public short BranchId { get; set; }\n    public string CorporateName { get; set; }\n    public string TIN { get; set; }\n    public string Address { get; set; }\n    public string Phone { get; set; }\n    public string Id { get; set; }//NroCi\n    public short CityId { get; set; }\n    public short ZoneId { get; set; }\n    public short SubZoneId { get; set; }\n    public short VendorId { get; set; }\n    public short PriceListId { get; set; }\n    public short CollectorId { get; set; }\n\n    [ForeignKey(\"BranchId\")]\n    public virtual Branch Branch { get; set; }\n\n    [ForeignKey(\"CityId\")]\n    public virtual City City { get; set; }\n\n    [ForeignKey(\"ZoneId\")]\n    public virtual Zone Zone { get; set; }\n\n    [ForeignKey(\"SubZoneId\")]\n    public virtual SubZone SubZone { get; set; }\n\n    [ForeignKey(\"VendorId\")]\n    public virtual Vendor Vendor { get; set; }\n\n    [ForeignKey(\"PriceListId\")]\n    public virtual PriceList PriceLists {get;set;}\n\n    [ForeignKey(\"CollectorId\")]\n    public virtual Collector Collector { get; set; }\n}\n</code></pre>\n\n<p>but when I try to make a list of it like this:</p>\n\n<pre><code>public ActionResult Index()\n    {\n        var clients = db.Clients.Include(c =&gt; c.Branch).Include(c =&gt; c.City).Include(c =&gt; c.Zone).Include(c =&gt; c.SubZone).Include(c =&gt; c.Vendor).Include(c =&gt; c.PriceLists).Include(c =&gt; c.Collector);\n        return View(clients.ToList());\n    }\n</code></pre>\n\n<p>nothing happens. Could it be because of the relationships?</p>\n\n<p>Note: All classes are linked to views and work fine with the others except my <code>Client</code> class.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13202401,"title":"Resolve Error in MVC 4 Razor","body":"<p>in .cs files when you encounter errors like \"The type or namespace name 'Products' could not be found (are you missing a using directive or an assembly reference?)\"</p>\n\n<p>you right click it and select resolve to automatically add missing assembly references. in razor .cshtml, how do you do this?</p>\n"},{"tags":["asp.net-mvc","linq-to-sql","asp.net-mvc-2","linq-to-entities","selectlist"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":555,"score":0,"question_id":6984737,"title":"Adding an extra data text field in SelectList in MVC","body":"<p>I am using a select list to pass text to the checkbox , What I want is to pass the 2 text fields to the checkboxlist , but Select list doesnt have any options to provide 2 or 3 data text field , I tried to customize it like but cant get the Intellisense working :</p>\n\n<pre><code> public ActionResult Create()\n    {\n        IProductRepository ProductResp = new ProductRepository();\n        IQueryable&lt;Object&gt; getAllProducts = ProductResp .GetProductsSelectlist();\n\n        List&lt;object&gt; newList = new List&lt;object&gt;();\n        foreach (var events in getAllProducts)\n            newList.Add(new\n            {\n                Id = getAllProducts.Name, // I cant get .Name or DateAdded Intellisense here\n                Name = getAllProducts.Name + \" \" + getAllProducts.DateAdded\n            });\n\n        ViewData[\"events\"] = new SelectList(newList.ToList(), \"Id\",\"Name\");\n        return View();\n    } \n</code></pre>\n\n<p>ProductRepository</p>\n\n<pre><code> public IQueryable&lt;Object&gt; GetProductssSelectlist()\n    {\n\n        ApexWorldEntities entity = new ApexWorldEntities();\n\n        var query = from v in entity.Products\n                    where v.Date &gt; DateTime.Now \n                    select new { ProductID = v.ID, v.Name , v.Date};\n        return query.OrderBy(v =&gt; v.Date);\n\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","windows-server-2008","round-robin","session-state-server"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":12236475,"title":"Session state lost in asp.net web farm","body":"<p>I've been busy with this for months now.</p>\n\n<p>I currently have 2 servers for 1 website. Using round robin dns I find that in the beginning everything works (checking the ip of the website it changed but I can go on with my session), but after a while I lose my session, seems like the formsauthentication cookie cannot be read and is being discarded. (assumption) But this does not happen all the time. Only sometimes.</p>\n\n<p>I'm using iis7 shared configuration, I set the machine key and I'm using stateserver pointing to one of the servers and I verified that on both servers the stateserver works. </p>\n\n<p>I read something about the IIS application path, but I don't really know what is meant by that, is it the path of the webapp, or the path where IIS is installed? In both cases they are the same.</p>\n\n<p>Anyone have some ideas?</p>\n"},{"tags":["asp.net-mvc","security","query-string","guid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13201844,"title":"table ids in querystrings","body":"<p>We have an MVC 3 application that uses nHibernate. There are various controller actions that expose the ids of objects contained in the database, e.g. /edit/1. These are just sequential numeric ids of the records in the database.</p>\n\n<p>Would it be better security wise to use GUID's instead, to prevent URL tampering?</p>\n"},{"tags":["asp.net-mvc","oauth"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":7,"score":0,"question_id":13202340,"title":"Authenticate a user on a mobile with Google, Facebook and access a Web API","body":"<p>I am working on a project that that has a Windows 8 application, a website and some Web API services which are accessed by the Win8 client. I plan on allowing users to log into the website and Win8 client using Google, Live, etc. On the Win8 client I can use the WebAuthenticationBroker and on the website I can use OAuthWebSecurity. Before the Win8 client can access the Web API I would like to know that the user has been authenticated before allowing a request to processed and I would like to know who the request came from.</p>\n\n<p>For both the Win8 client and website I can login using Google, etc, without problems. This works well. But now I would like the Web API to know I've logged in. I did think of having Google, for example, redirect to the Web API which would then extract some user information and record the fact they have been authenticated.</p>\n\n<p>From what I've read it seems that any token returned by Google, etc, is only for accessing their services and should not really be used as an indication the user has been authenticated. If this is the case would I be correct in thinking that when the redirect happens, and the authentication is successful, then from that point on I can assume the user is who they say they are? If so, then I would think that using my own token, with some kind of expiration, would be needed to validate requests from the client?</p>\n\n<p>Does this sound like a reasonable approach?</p>\n\n<p>I am using .NET 4.5 and ASP.NET MVC 4.</p>\n\n<p>I'm not all that knowledgeable on the security side, so any guidance will be very much appreciated.</p>\n"},{"tags":["asp.net-mvc","wcf","weboperationcontext","operationcontext"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13201487,"title":"WCF how can I get the current configuration for an existing serviceContract instance","body":"<p>I'm building a WCF service that will be hosted in an mvc application via a service route.  I'm trying to test the service.  My issue is in the middle of the call, the service calls out to another service. I want to use</p>\n\n<pre><code>class MyService{\n     private IOtherService _otherSvc;\n     public MyService(IOtherService otherSvc){\n      _otherSvc = otherSvc;\n     }\n\n  public Foo(string arg){\n      //****here is my problem\n      using(new OperationContextScope(***I want to use the _otherSvc instance cast as IContextChannel***){\n         /*\n            an exception gets thrown here. \n            I can cast to IContextChannel but the\n            exception is thrown because there is no configuration for the endpoint.\n            How can I correct this?\n         */\n         return _otherSvc.GetFoo(arg); \n      }\n  }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","oauth-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13200846,"title":"OAuth 2.0 for MVC - How does the RequestToken work?","body":"<p>I'm working with OAuth 2.0 for MVC, found here: <a href=\"http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx\" rel=\"nofollow\">http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx</a> </p>\n\n<p>For anyone who's worked with this - I'm confused about the RequestToken. There is a controller implemented that lets you get a request token, which expires in 5 minutes, and you pass that token back in to get an AccessToken. But it never checks the request token for validity - it seems like you can pass in any access token you want to. What is the idea for the RequestToken here - are you supposed to create your own method of storing, referencing, and then deleting that token for those 5 minutes? </p>\n\n<p>Thanks,\nAndy</p>\n"},{"tags":["c#","asp.net-mvc","linq","linq-to-entities"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13200658,"title":"LINQ to Entities - How to return a single string value from entity","body":"<p>I am working in asp mvc 3 app.  I have a model/entity called History.  I have a linq query that returns one value.  Depending on what I do, I either get a \"Object not set to an instance\" error in the controller when the method is called, or I get a \"cannot implicitly convert from string to type Models.History.\"  So I am looking for assistance in resolving, do I just need to cast it or something?</p>\n\n<p>Here is the method that gives the 'object not set' error:</p>\n\n<pre><code>public string GetPastAbuseData(int Id)\n{\n\n  var query = (from h in _DB.History\n              where h.ApplicantId.Equals(Id)\n              select h.AbuseComment).FirstOrDefault();\n\n  return query.ToString();\n }\n</code></pre>\n\n<p>Controller:\n     vm.HistoryModel.AbuseComment = repo.GetPastAbuseData(Id);</p>\n\n<p>And if I change the method type from string to History I get the 'cannot convert' error:</p>\n\n<pre><code>public History GetPastAbuseData(int Id)\n{\n    return (from h in _DB.History\n            where h.ApplicantId.Equals(Id)\n            select h.AbuseComment).SingleOrDefault();\n}\n</code></pre>\n\n<p>Thank you for your time.</p>\n"},{"tags":["javascript","html","asp.net-mvc","telerik-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13052641,"title":"Adding onchange event to a telerik dropdownlist makes it static","body":"<p>I have a telerik dropdownlist which behaves normally, but once I add an onchange event which triggers a JS function, the dropdownlist becomes static.</p>\n\n<p>Telerik DDL:</p>\n\n<pre><code>&lt;%= Html.Telerik().DropDownList().Name(\"Week\")\n            .HtmlAttributes(new { @id = \"Week\", @style = \"width:104px;\" }).ClientEvents(events =&gt; events.OnChange(\"Week_onChange\"))%&gt;\n</code></pre>\n\n<p>JavaScript function:</p>\n\n<pre><code>function Week_onChange() {\n    var link = '/Weeks/Week';\n    week = $(\"#Week\").val();\n    $.ajax({\n        type: 'POST',\n        url: link,\n        data: { date: week },\n        dataType: 'json',\n        success: function (result) {\n            alert(result.message);\n        },\n        error: function (result) {\n            alert(result.message);\n        }\n    });\n};\n</code></pre>\n\n<p>Here is how I populate the Week DDL:</p>\n\n<pre><code>$(\"#Week\").data(\"tDropDownList\").dataBind(weekArray);\n$('#Week').data('tDropDownList').select(0);\n</code></pre>\n\n<p>Again, Week DDL acts perfectly fine if I dont have the \"Week_onChange\" event added.\nAny help is much appreciated</p>\n"},{"tags":["jquery","ajax","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":56,"score":-1,"question_id":13194742,"title":"How update html dom model from ajax?","body":"<p>I have not valide html:</p>\n\n<pre><code>...\n&lt;form&gt;\n&lt;tbody&gt;...&lt;/tbody&gt;\n&lt;tbody&gt;Dynamic content&lt;/tbody&gt;\n&lt;tbody&gt;...&lt;/tbody&gt;\n&lt;/form&gt;\n...\n</code></pre>\n\n<p>in code:</p>\n\n<pre><code>using (Ajax.BeginForm(\"UpdateAjax\", \"Group\", null, new AjaxOptions { HttpMethod = \"POST\", UpdateTargetId = \"updateTargetID\" }, new { @class = \"modal_form_ajax\" }))\n{\n            &lt;tbody&gt;&lt;tr style=\"height: 10px\" /&gt;more tr-s&lt;/tbody&gt;\n            &lt;tbody id=\"updateTargetID\"&gt;&lt;/tbody&gt;\n            &lt;tbody&gt;&lt;tr style=\"height: 10px\" /&gt;more tr-s&lt;/tbody&gt;\n}\n</code></pre>\n\n<p>form not see inputs in tbody[id=updateTargetID].</p>\n\n<p>If I just load the dynamic content, all normally sees.</p>\n\n<p>How to get it to a loaded html?</p>\n\n<p><strong>update</strong>. worked only IE</p>\n"},{"tags":["c#","javascript","jquery","asp.net-mvc","charts"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12932956,"title":"I need some clues using chart","body":"<p>I'm n00bie. so sorry if it would be not an appropriate question for some of you. Maybe someone would help me tho. I wanna develop an easy tool with some controls and ajax-updatable chart(based on MVC) in C#/.net. I have found a simple  and clean tutorial.But it was wirtitten  in 2010. I'm wondering if it is kinda modern? Or has changed anything and this style is already old? I'm  especially interested if it is a good idea to use jquery to perform an update on a chart after some buttons were pressed? </p>\n\n<p>I'm also including a snippet from this tutorial, so maybe you get me better:   </p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"C#\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage&lt;dynamic&gt;\" %&gt;\n\n&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"TitleContent\" runat=\"server\"&gt;\n    Annual Sales Data (With Fancy JavaScript!)\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"Content3\" ContentPlaceHolderID=\"HeadContent\" runat=\"server\"&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n            // Populate the Categories and Years DDLs with the values from the server\n        $.getJSON('/Api/Years',        // URL that returns data of interest\n                  function (result) {       // The function that executes once the data has been returned\n                      var years = $(\"#years\");\n                      $.each(result, function (index, year) {\n                          years.append($(\"&lt;option /&gt;\").val(year).text(year));\n                      });\n\n                      $.getJSON('&lt;%=Page.ResolveClientUrl(\"~/Api/Categories\")%&gt;',        // URL that returns data of interest\n                          function (result) {       // The function that executes once the data has been returned\n                              var categories = $(\"#categories\");\n                              $.each(result, function (index, categoryName) {\n                                  categories.append($(\"&lt;option /&gt;\").val(categoryName).text(categoryName));\n                              });\n\n                              // Load the image\n                              UpdateImage();\n                           });\n                  });\n\n            // Add client-side event handlers to these DDLs\n            $(\"#years\").change(UpdateImage);\n            $(\"#categories\").change(UpdateImage);\n        });\n\n        function UpdateImage() {\n            var selectedYear = $(\"#years\").val();\n            var selectedCategory = $(\"#categories\").val();\n\n            $(\"#chart\").fadeOut(function () {\n                $(this).attr('src', '/Charts/SalesByYear?CategoryName=' + escape(selectedCategory) + '&amp;OrderYear=' + escape(selectedYear) + '&amp;showTitle=false')\n                       .attr('alt', 'Sales for ' + selectedCategory + ' in ' + selectedYear)\n                       .attr('title', 'Sales for ' + selectedCategory + ' in ' + selectedYear);\n\n                $(this).fadeIn();\n            });\n        }\n    &lt;/script&gt;\n&lt;/asp:Content&gt;\n\n&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"MainContent\" runat=\"server\"&gt;\n\n    &lt;h2&gt;Annaul Sales Data (With Fancy JavaScript)&lt;/h2&gt;\n    &lt;p&gt;\n        This demo shows how to gussy up the sales data charting example using a tad of JavaScript and jQuery.\n    &lt;/p&gt;\n    &lt;div style=\"text-align: center\"&gt;\n        &lt;h2 style=\"text-align: center\"&gt;Sales For &lt;select id=\"categories\"&gt;&lt;/select&gt; In &lt;select id=\"years\"&gt;&lt;/select&gt;&lt;/h2&gt;\n        &lt;img id=\"chart\" style=\"display:none\" /&gt;\n    &lt;/div&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>Could anyone recommend me any tutorial in which I'd be able to ee how can I implement a mvc-based web app with using flotcharts?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net","asp.net-mvc","wordpress","content-management-system","n2"],"answer_count":31,"favorite_count":13,"up_vote_count":29,"down_vote_count":2,"view_count":9344,"score":27,"question_id":250880,"title":"Is there any CMS better than WordPress or should I roll my own?","body":"<p>I'm developing a small business website and want to give some control over content to the client but also allow myself control over the outputted code.  Indeed allow the user to fill in the content gaps while not creating havoc.</p>\n\n<p>I'm leaning towards WordPress rather than reinventing the wheel in asp.net, which would be my code of choice, or possibly just html.  </p>\n\n<p>Any recommendations either way?  An alternative CMS maybe or some robust but productive framework?  (interested in mention of python frameworks)</p>\n"},{"tags":["c#","jquery","asp.net-mvc","datepicker"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13193118,"title":"How to make two text boxes data accept jQuery data picker plugin?","body":"<p>Can you tell me of some good tutorial or some book where I can learn how to make a date picker  text box?</p>\n\n<p>Thank you.</p>\n\n<p>P.S. In fact, I have to have two text boxes and one button that makes reservation when you select the above dates (From and To).</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13199539,"title":"ASP MVC jQuery UI Selectmenu plugin","body":"<p>When using the jQuery UI <a href=\"https://github.com/fnagel/jquery-ui/wiki/Selectmenu\" rel=\"nofollow\">Selectmenu plugin</a>, the built-in frontend ASP MVC validation no longer behaves correctly. By this I mean the field-validation spans do not appear on submit of a form.</p>\n\n<p>Is there a simple way to correct this?  </p>\n"},{"tags":["asp.net-mvc","signalr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13199355,"title":"SignalR not working","body":"<p>I am trying to do some stuff with the signalr.\nMy hub is </p>\n\n<pre><code> public class Customer : SignalR.Hubs.Hub\n{\n    public void Send(string uid, string from, string msg)\n    {\n        string make = from + uid;\n        Clients.Addmsg(msg, make);\n    }\n}\n</code></pre>\n\n<p>And Client side code is</p>\n\n<pre><code> &lt;script src=\"Scripts/jquery-1.6.4.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n &lt;script src=\"Scripts/jquery.signalR-0.5.3.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"/signalr/hubs\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $(function () {\n        // Proxy created on the fly\n        var care = $.connection.Customer;\n\n        $(\"#broadcast\").click(function () {\n            // Call the chat method on the server\n            care.send($('#msg').val(), \"HariOm\", \"jai jai ram\")\n        .done(function () {\n            console.log('Success!');\n        })\n        .fail(function (e) {\n            console.warn(e);\n        });\n        });\n\n    // Declare a function on the chat hub so the server can invoke it\n    care.Addmsg = function (message, make) {\n        alert(message + msg);\n    };\n\n\n\n        // Start the connection\n        $.connection.hub.start();\n\n\n    });\n\n\n&lt;/script&gt;\n</code></pre>\n\n<p>I am getting this error after loading the page</p>\n\n<p>Uncaught TypeError: Cannot set property 'Addmsg' of undefined </p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13197525,"title":"ASP.NET MVC locating cs files generated from cshtml?","body":"<p>So I've recently started with ASP.NET MVC 4. I'm using the razor engine.\nMy question is concerning the view files, with suffix cshtml. It seems to me that these are precompiled into *.cs files by razor which in turn are then compiled into MSIL. (A pattern that is familiar from my days as a JSP developer.) One reason why I am making this assumption is that if I enter some invalid c# code into the cshtml file I get a compilation error displayed like this:</p>\n\n<blockquote>\n  <p>Line 34:     public class _Page_Views_BaseDataAdmin_Index_cshtml : ...</p>\n</blockquote>\n\n<p>And line 34 is not indicative of where the error is in the cshtml file, just as the class _Page_Views_BaseDataAdmin_Index_cshtml seems to refer to a regular .net class not the view file.</p>\n\n<p>So my question is: Where do I find the cs file? Specifically, in the example above,  \"_Page_Views_BaseDataAdmin_Index_cshtml.cs\"? Maybe I need to add some config to tell MVC to keep this .cs file on disk, if so, how do I do this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13196946,"title":"Handling Complex Objects in Asp Web API","body":"<p>How can I post multiple complex objects in a post request in asp web api? Everything that I seem to find suggests that only one object type is allowed in the body of the request. Is this correct? If so what is a decent workaround for this? \n   Sample Model:</p>\n\n<pre><code>public class Object1\n{\n    int numWheels { get; set; }\n    string seatheight { get; set; }\n    public Object2[] shopLoc { get; set; }\n}\n\npublic class Object2 \n{\n    string streetName { get; set; }\n    double revenue { get; set; }\n}\nSample Products controller:\nPost:products/Post/\npublic Object1 Post(Object1 tricycle, Object2 cyclingShop)\n{\nreturn tricycle;\n}\n</code></pre>\n\n<p>How would I use this with asp web api? </p>\n"},{"tags":["asp.net","asp.net-mvc","json"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13198710,"title":"Accepting JSON in ASP.NET MVC 4","body":"<p>I have a JSON being send to a controller function of ASP.NET, the JSON looks something like this:</p>\n\n<pre><code>[{\"Key\":\"Test23.txt\",\"Size\":6,\"LastModified\":\"Thu, 01 Nov 2012 19:35:43 GMT\"},\n{\"Key\":\"Test25.txt\",\"Size\":6,\"LastModified\":\"Wed, 31 Oct 2012 21:02:51 GMT\"},\n{\"Key\":\"Test28.txt\",\"Size\":6,\"LastModified\":\"Thu, 01 Nov 2012 19:35:42 GMT\"}]\n</code></pre>\n\n<p>How would I accept it in an MVC controller method and how do I parse it?</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-mvc-4","moq","modelmetadataprovider"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13192697,"title":"Using a custom ModelMetadataProvider in a unit test","body":"<p>Pretty new to MVC so hopefully this is a simple question.</p>\n\n<p>I have written a custom binding attribute that requires access to the <code>httpContext</code>. In order to inject a mock <code>httpContext</code> during unit tests, I have written an <code>InjectingMetadataProvider</code> that populates the <code>Context</code> property on any of my custom attributes.</p>\n\n<p>I have managed to get this to work in the following test:</p>\n\n<pre><code>[TestMethod]\npublic void Marker_ShouldBind_Id()\n{\n    // Arrange\n    var formCollection = new NameValueCollection \n    { \n        { \"id\", \"2\" }\n    };\n\n    var context = new Mock&lt;HttpContextBase&gt;();\n    context.Setup(c =&gt; c.User).Returns((IPrincipal)null); \n\n    var metaProvider = new InjectingMetadataProvider(context.Object);\n    ModelMetadataProviders.Current = metaProvider;  //why do I need this?\n\n    var bindingContext = new ModelBindingContext\n    {\n        ModelName     = string.Empty,\n        ValueProvider = new NameValueCollectionValueProvider(formCollection, null),\n        ModelMetadata = metaProvider.GetMetadataForType(null, typeof(Marker)),\n    };\n\n    var binder = new DefaultModelBinder();\n\n    // Act\n    var marker = (Marker)binder.BindModel(new ControllerContext(), bindingContext);\n\n    // Assert\n    marker.Id.Should().Be(2);\n}\n</code></pre>\n\n<p>However, if I comment out the line that sets my <code>InjectingMetadataProvider</code> to <code>ModelMetadataProviders.Current</code>, then my <code>InjectingMetadataProvider.CreateMetadata()</code> override gets handed a blank list of attributes, and so the test fails because my custom attributes don't get their context set.</p>\n\n<p>Why do I need to set it to <code>Current</code> when I'm using it explicitly anyway? I don't want to be setting static stuff in my tests.</p>\n\n<p>I may be doing something stupid because I'm feeling in the dark a bit at the moment due to my unfamiliarity with the framework.</p>\n"},{"tags":["asp.net-mvc","requirejs","toastr"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":195,"score":1,"question_id":12414654,"title":"How to reference the bundled js files (asp.net mvc4) in Require.js?","body":"<p>I have been studying John Papa's pluralsight course on SPA.</p>\n\n<p>In his <code>main.js</code>, he gave a name to each js library which is included in the bundle.</p>\n\n<pre><code>(function () {\nvar root = this;\n\ndefine3rdPartyModules();\n\n\nfunction define3rdPartyModules() {\n    // These are already loaded via bundles. \n    // We define them and put them in the root object.\n    define('jquery', [], function () { return root.jQuery; });\n    define('ko', [], function () { return root.ko; });\n    define('amplify', [], function () { return root.amplify; });\n    define('infuser', [], function () { return root.infuser; });\n    define('moment', [], function () { return root.moment; });\n    define('sammy', [], function () { return root.Sammy; });\n    define('toastr', [], function () { return root.toastr; });\n    define('underscore', [], function () { return root._; });\n}\n\n})();\n</code></pre>\n\n<p>But what is the <code>root</code> here? </p>\n\n<hr>\n\n<p>By doing so, we can call those short names in the <code>define</code> statement:</p>\n\n<pre><code>define('vm.session',\n['ko', 'datacontext', 'config', 'router', 'messenger', 'sort'],\nfunction (ko, datacontext, config, router, messenger, sort) {\n</code></pre>\n\n<p>Current, I don't know how to do that. So my working <code>define</code> statement is ugly:</p>\n\n<pre><code>define('vm.admin.outfitters',\n['/Scripts/lib/jquery-1.8.1.js', '/Scripts/lib/jsrender.js', ...], function(){...\n</code></pre>\n\n<p>I know there's gotta be a better way. All those js files have been included in the script bundle already. How can I reference those scripts?</p>\n"},{"tags":["c#","asp.net-mvc","iis","application-pool","recycle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13191566,"title":"IIS Process Recycling","body":"<p>I have read the <a href=\"http://msdn.microsoft.com/en-us/library/ms525803.aspx\" rel=\"nofollow\">MSDN article (link)</a> which says something about the IIS process recycling and it turns out that</p>\n\n<blockquote>\n  <p>The new process is started before the old worker process stops, and requests are then directed to the new process.</p>\n</blockquote>\n\n<p>But, when I read next part of that article i saw this:</p>\n\n<blockquote>\n  <p>Occurrence of multi-instancing: In multi-instancing, two or more instances of a process run simultaneously. Depending on how the application pool is configured, it is possible for multiple instances of a worker process to run, each possibly loading and running the same application code. The occurrence of an overlapped recycle is an example of multi-instancing, as is a Web garden in which two or more processes serve the application pool regardless of the recycling settings.  </p>\n  \n  <p>If your application cannot run in a multi-instance environment, you must configure only one worker process for an application pool (which is the default value), and disable the overlapped recycling feature if application pool recycling is being used.</p>\n</blockquote>\n\n<p>So, I am a little confused.</p>\n\n<p>On the one hand, <strong>I am okay with the thing when all the web requests immediately and permanently are become directed</strong> to the new process instance. On the other hand, this article recommends me not to use recycling at all in case if my application, quoting above \"<strong>cannot run in a multi-instance environment</strong>\". Which means, in my opinion, that requests may be processes as one or the other process instance, which is not allowed by my app logic.</p>\n\n<p>All I want to know is, if there is any chance, any opportunity, that IIS can go such bad way and collapse my application, or shouldn't I worry about it?</p>\n"},{"tags":["asp.net-mvc","entity-framework","postgresql","devart"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13187573,"title":"Entity Framework complaining about required fields when saveChanges even if valid data are setted","body":"<p>I'm using Entity Framework (DbContext with database first) with MVC. When user save from a form, I have a condition in the controller that send the entity to the <strong>update</strong> of <strong>insert</strong> method depending of some internal flag of mine.</p>\n\n<p>When sending entity to the update method, I flag it to modified using <code>context.Entry(myEntity).State = EntityState.Modified;</code>,  I call saveChanges() and everything work well.</p>\n\n<p>When sending the entity to the insert method, I flag it to added using <code>context.Entry(myEntity).State = EntityState.Added;</code> but when calling saveChanges() I receive error about 2 fields that are required...</p>\n\n<p>The problem is that thoses 2 fields are not empty and they effectively contain valid data just before saving... I have even try to force new values to thoses 2 fields just before saving but same error.</p>\n\n<p>It may be usefull to mention that I'm using Devart DotConnect For PostgreSQL as db provider.</p>\n\n<p>Any idea how to debug this problem?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>Validation failed for one or more entities. See 'EntityValidationErrors' property for more details.</p>\n</blockquote>\n\n<p>When looking for this EntityValidationErrors I receive the 2 following specific errors:</p>\n\n<blockquote>\n  <p>The flg_actif field is required</p>\n  \n  <p>The user_creation field is required</p>\n</blockquote>\n\n<p>As mentionned before, those fields are filled with data just before saving so I don't understand what is happening.</p>\n\n<p>I'm using EF v4.0.30319 (system.data.entity=> v4.0 and EntityFramework=> v4.4)</p>\n\n<p><strong>EDIT2:</strong>\nJust to clarify a little bit more: The entity I'm trying to insert already exist in database. The form show the data of this database row. When saving, I decide if I update the row (this work well) but sometime, I need to insert the edited row as a new register instead of updating it to keep an history of the change in database.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13176080,"title":"Generate unobtrusive validators for a class with asp.net mvc?","body":"<p>I want to create a page to add, edit and delete a collection of objects. I want to do the add/edit/delete operations with javascript. Right now, I have the following HTML:</p>\n\n<pre><code>&lt;table class=\"table table-striped\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Name&lt;/td&gt;\n            &lt;td&gt;Number&lt;/td&gt;\n            &lt;td&gt;Country&lt;/td&gt;\n            &lt;td&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    @foreach(var n in Model)\n    {\n        &lt;tr&gt;\n            &lt;td class=\"name\"&gt;@n.Name&lt;/td&gt;\n            &lt;td class=\"value\"&gt;@n.Value&lt;/td&gt;\n            &lt;td class=\"country-name\"&gt;@n.CountryName&lt;/td&gt;\n            &lt;td&gt;&lt;ahref=\"#\"&gt;Edit&lt;/a&gt; | &lt;a href=\"#\"&gt;Delete&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;div class=\"modal\"&gt;\n    &lt;form&gt;\n        &lt;label&gt;Name&lt;/label&gt;\n        &lt;input type=\"text\" /&gt;\n        &lt;label&gt;Value&lt;/label&gt;\n        &lt;input type=\"text /&gt;\n        &lt;button type=\"submit\"&gt;Save&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>If the user presses 'Edit', javascript code populates the <code>modal</code> div with the relevant data and displays it on the screen. When the user presses 'Submit', the data is submited with ajax, the modal dialog is hidden, and the table is updated with the new data.</p>\n\n<p>I want to validate the form before it is submitted. If possible, I would like to make use of the unobtrusive client validation system, so that changes to the data annotations of my model class are automatically reflected in the clientside code. In a more standard example, I could use the <code>@Html.EditorFor()</code> methods to generate the correct HTML, but this isn't possible here.</p>\n\n<p>Unobstrusive validation is controlled using attributes on the html elements, like this:</p>\n\n<pre><code>&lt;input data-val=\"true\" data-val-required=\"This field is required.\" id=\"Name\"\n    name=\"Name\" type=\"text\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-for=\"Name\"\n     data-valmsg-replace=\"true\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Is it possible to generate the relevant HTML for a particular model class without referencing a particular instance of the class? Or is there some other method I can use?  </p>\n"},{"tags":["asp.net-mvc","localization","jquery-validate","cultureinfo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13197398,"title":"Can't get a language with jQuery validation plugin and DataAnnotations in MVC","body":"<p>I have a View Model with properties decorated with the <strong><code>[Required]</code> DataAnnotation</strong>.</p>\n\n<p>In the form view when client validation fails, the error message renders quite well with french and english language (whithout having to define anything in french and english .resx files for required properties).</p>\n\n<p>But it <strong>fails when the thread culture is set to spanish</strong>. It remains in english, I can see it with Firebug that data-val-required is in english. Some other validation attribute like data-val-equalto are correctly set with spanish language from my abcd.es.resx file.</p>\n\n<p>How come ?! \nHow the jquery-validate plugin detect the language ?\nHow come <code>Html.ValidationMessageFor()</code> get correct language for message warning when thread culture is set with french or english and remains english when culture thread is to spanish ?</p>\n\n<ul>\n<li>First language in browser is set as \"es-ES\".</li>\n<li>VS 2010 is in english.</li>\n<li>The current culture thread is well set to \"es-ES\".</li>\n<li>(My Win 7 OS is set in french but this should have nothing to do with it right ?)</li>\n</ul>\n\n<p>Following scripts are referenced :</p>\n\n<pre><code>jquery.validate.unobtrusive.min.js\njquery.validate-1.10.0.min.js\nadditional-methods-1.10.0.min.js\nhttp://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/localization/messages_##.js\n// (## is set dynamically to get localized correct file ...)\njquery.unobtrusive-ajax.min.js\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","wcf","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13196887,"title":"jQuery Autocomplete tied to WCF Service ASP.NET MVC","body":"<p>New to ASP.NET MVC and programming, and I have searched high and low for materials on this subject but haven't found a concrete answer for my particular problem.</p>\n\n<p>The project I am working on requires the use of WCF services.  Initially I started with a jQuery autocomplete function that worked, however moving the code to a WCF service has broken some communication.  The autocomplete functionality no longer works  </p>\n\n<p>WCF Service</p>\n\n<pre><code>public IList&lt;Location&gt; QuickSearchLocation(string term)\n    {\n        using (var db = new InspectionEntities())\n        {\n            //return all locations except the reserved \"Other\"\n            return db.Locations\n                .Where(r =&gt; r.LocationName.Contains(term) &amp;&amp; r.LocationId !=    Constants.OtherId)\n                .ToList();\n        }\n    } \n</code></pre>\n\n<p>The above code is meant to takes user input based on relation to child table.  If user input does not match data in child table, the users entry is saved to an \"other\" column in the main db.</p>\n\n<p>Controller</p>\n\n<pre><code>public ActionResult QuickSearchLocation(string term)\n    {\n        return Json(_service.QuickSearchLocation(term), JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>View</p>\n\n<pre><code>div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(m=&gt;m.LocationId,new {data_autocomplete =     Url.Action(\"QuickSearchLocation\", \"Inspection\")})\n</code></pre>\n\n<p>script</p>\n\n<pre><code>$(document).ready(function () {\n\n$(\":input[data-autocomplete]\").each(function () {\n\n    $(this).autocomplete({ source: $(this).attr(\"data-autocomplete\")});\n});\n</code></pre>\n\n<p>Any insight on my problem would be helpful.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":191,"score":1,"question_id":12871430,"title":"How to sync Kendo UI mvc Grid with Kendo Mvc Autocomplete","body":"<p>I am working asp.net mvc witk Kendo UI MVC Tools. I am trying to display list of records in a Kendo UI Mvc Grid. and i have one kendo ui autoComplete Textbox when i type a letter it shows corresponding field record that matches the criteria will be showed like a dropdown. Now i want to sync the autocomplete textbox with kendo ui mvc grid. that means when i type a letter records that matches criteria should display in the grid. I have tried with change event but it doesnt seems work for me. </p>\n\n<pre><code> @(Html.Kendo().AutoComplete().Events(c=&gt;c.Change(\"GridChange\"))\n                                                   .Name(\"txtSearchItem\")\n                                                .Filter(\"startswith\")\n                                           .DataTextField(\"xxx\")\n                                              .Value(ViewBag.SearchValue)\n                              .BindTo((List&lt;MyRecords&gt;)Model).HtmlAttributes(new { @class = \"required\", style = \"font-size:19px;width:150px;\", onkeypress = \"return isNumericKey(event);\" })\n                                                )\n</code></pre>\n\n<p>please guide me.</p>\n"},{"tags":["asp.net-mvc","cron","quartz-scheduler","quartz","quartz.net"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13194920,"title":"Work with Quartz on ASP.NET MVC","body":"<p>I use Quartz lib for executing some tasks by schedule on my ASP.NET MVC project. I initialize my Jobs into method Application_Start of Global.asax file. But after some time Quartz was stopped because method Application_End was executed.</p>\n\n<p>Variables were declared as static:</p>\n\n<pre><code>public static ISchedulerFactory scheduleFactory = new StdSchedulerFactory();\n\npublic static IScheduler scheduler = scheduleFactory.GetScheduler();\n</code></pre>\n\n<p>Here is how Quards's Jobs were initialized:</p>\n\n<pre><code>IJobDetail jobSender = new JobDetailImpl(\"jobSender\", \"MailGroup\", typeof(JobMailSender));\n\nITrigger triggerSender = new CronTriggerImpl(\"triggerSender\", \"SenderGroup\", \"jobSender\", \"MailGroup\", \"0 0/30 * * * ?\");\n\nscheduler.ScheduleJob(jobSender, triggerSender);\n\nscheduler.Start();\n</code></pre>\n\n<p>I have found the reason why it happens. When all user's sessions will cease to exist and server doesn't have active user's sessions then method Application_End will execute.</p>\n\n<p>I have created new Quartz's job which opens the site every 15 min and as result new user session will create on server. But still method Application_End is called from time to time.</p>\n\n<p>Is anyone faced with a similar problem? Maybe web.config has some settings that would not be executed method Application_End, even if there are no active sessions on the server?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2","c#-4.0","http-post","http-get"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1681,"score":3,"question_id":4429066,"title":"How do I create a httppost getting same parameters from httpget?","body":"<p>I have a controller to show up a model (User) and want to create a screen just with a button to activate. I don't want fields in the form. I already have the id in the url. How can I accomplish this?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing","query-string"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13196432,"title":"How can I sort the querystring by key?","body":"<p>I'm using ASP.NET MVC4. How do I sort the querystring shown in the browser?</p>\n\n<p>Instead of: <code>...?c=1&amp;b=1&amp;a=1</code><br>\nI want:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code>...?a=1&amp;b=1&amp;c=1</code></p>\n\n<p>If the querystring is based on a link which I create, then I can sort it easily by sorting the <code>RouteValueDictionary</code>. But if the querystring comes from a submitted form, then I noticed that its ordering is based on the order of the form's <code>&lt;input&gt;</code> and <code>&lt;select&gt;</code> fields. Since the markup changes often, I don't want to manually sort it this way though.</p>\n\n<p>So I hope I can sort the <code>RouteValueDictionary</code> from which these routes come from. But I don't know how?</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13196170,"title":"When is an ApiController instance created?","body":"<p>Is a new instance of an ApiController created to service every request, or does it get \"pooled\" in some way to service subsequent requests? </p>\n\n<p>The reason I ask is that I'm wondering about the lifetime of the member variables such as the DbContext member that the scaffolding puts in (but also my own members).</p>\n"},{"tags":["asp.net-mvc","image"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13192960,"title":"Retrieve and display image from database using ASP.Net MVC","body":"<p>I want to retrieve an image from database and then send it to view and display it as thumbnail. Here is my code but It has some error and I can't return the image properly.\nI'm using ASP.Net MVC and aspx pages.</p>\n\n<p>Controller :</p>\n\n<pre><code>    public ActionResult showImg(int id)\n        {\n            var imageData = from m in db.Products\n                               where m.ShopId == 3\n                               select Image.FromStream(new MemoryStream(m.Product_img.ToArray()));\n\n            return new FileStreamResult(new System.IO.MemoryStream(imageData), \"image/jpeg\");\n\n\n        }\n</code></pre>\n\n<p>View :</p>\n\n<pre><code>   &lt;img src='&lt;%= Url.Action( \"showImg\", \"image\", new { id = ViewData[\"imageID\"] } ) %&gt;' /&gt; \n</code></pre>\n"},{"tags":["asp.net-mvc","templates","razor","backbone.js","mustache"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":450,"score":7,"question_id":8166749,"title":"How can i share templates between my ASP.NET MVC backend and my backbone.js frontend?","body":"<p>I'm buliding an application in ASP.NET MVC and considering backbone.js for the client side interaction etc..</p>\n\n<p>Ideally when the pages are loaded i'd like to have all the existing content pre-rendered on the server side and then any new content rendered by backbone.js on the fly.</p>\n\n<p>Naturally i dont really want to write my templates twice.</p>\n\n<p>I'm considering having most of the application templated using the razor view engine and then using mustache templates for the small areas that need to be shared between server and front end.</p>\n\n<p>My question is, what does the actual technical implementation of this look like?</p>\n\n<p>Can you provide code samples of how you would achieve this?</p>\n\n<p>For example which library would you use to render the template on the server and then would you manually extract the text from the template file and inject it into the javascript?</p>\n"},{"tags":["asp.net","asp.net-mvc","unit-of-work"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13156568,"title":"MVC - Unit of work  duplicate records issue","body":"<p>Im working on this project where we have a form that saves an entity and before saving it we check that the record doesnt exist by checking against a unique attribute of the entity on the database.</p>\n\n<p>This works fine except on the scenario where we press very quickly the submit form button multiple times. On this case the database check does not work and it creates multiple entries of the record in the database.</p>\n\n<p>I think it is a design problem of the application but Im new to the unit of work pattern and I cant understand why is not working.</p>\n\n<p>This is the check we do on the service layer:</p>\n\n<pre><code>    IEnumerable&lt;Story&gt; Stories = _unitOfWork.StoryRepository.Get(s =&gt; e.GUID.Equals(GUID));\n    if (Stories.Count() &gt; 0)\n    {\n        _unitOfWork. StoryRepository.Insert(newStory);\n        _unitOfWork.Save();\n    }\n</code></pre>\n\n<p>can anyone help with this issue?</p>\n\n<p>btw, I'm not after a javascript based solution, only server-side.</p>\n\n<p>Thanks</p>\n\n<p>EDIT:\nthe service uses ninject and has a constructor that passes the unit of work:</p>\n\n<pre><code>    private IUnitOfWork _unitOfWork;\n\n    public StoryService(IUnitOfWork unitOfWork)\n    {\n        _unitOfWork = unitOfWork;\n    }\n</code></pre>\n\n<p>My UnitOfWork class is declared as:</p>\n\n<pre><code>public class UnitOfWork : Disposable, IUnitOfWork\n</code></pre>\n\n<p>DatabaseFactory.cs:</p>\n\n<pre><code>public class DatabaseFactory : Disposable, IDatabaseFactory\n{\n    private myContext _dataContext;\n    private readonly object _door = new object();\n\n    public myContext Get()\n    {\n        lock (_door)\n        {\n            return _dataContext ?? (_dataContext = new myContext());\n        }\n    }\n\n    protected override void DisposeCore()\n    {\n        if (_dataContext != null)\n            _dataContext.Dispose();\n    }\n}\n</code></pre>\n\n<p>Should I create an instance of UnitOfWork every time I call a method of my service as Pluc is suggesting?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","google-charts"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13182876,"title":"Error creating empty datatable","body":"<p>I am trying to display a Pie Chart on a page.  Loosely following their example but instead of creating an array I am trying to add rows to a <code>DataTable</code>. However no matter what I try I get the same error.</p>\n\n<p><code>Microsoft JScript runtime error: 'google.visualization.DataTable' is null or not an object</code></p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n google.load(\"visualization\", \"1\", {packages:[\"table\", \"corechart\"]});\n\nvar data = new google.visualization.DataTable();  //ERRORS HERE\n\n    data.addColumn('Device Type', 'No of Units');\n   &lt;%foreach (DeviceCount dc in Model.PieValuesEx)\n  { %&gt;\n        data.addColumn(&lt;%=dc.deviceType%&gt;, &lt;%=dc.deviceCount%&gt;);\n\n        &lt;%} %&gt;\n\n\n  google.setOnLoadCallback(drawChart);\n  function drawChart() {\n\n    debugger;\n    var options = {\n        title: 'Devices by Type'\n    };\n\n    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));\n    chart.draw(data, options);\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Can anyone tell me where I am going wrong here?</p>\n\n<p><strong>EDIT</strong>: Just in case anyone stumbles across this question. I have fixed my problem by taking a different approach.  I now return the elements of an array from the model and use the Google <code>arraytoDataTable</code> method.  </p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n\n  google.load(\"visualization\", \"1\", {packages:[\"corechart\"]});\n  google.setOnLoadCallback(drawDeviceByTypeChart);\n\n  function drawDeviceByTypeChart() \n  {\n    var myArray = new Array(&lt;%= Model.DeviceByTypeArray %&gt;);\n    var data = google.visualization.arrayToDataTable(myArray);\n    var options = {\n        title: 'Devices by Type',\n        tooltip: {showColorCode: true}\n    };\n\n    var chart = new google.visualization.PieChart(document.getElementById('devicebytypechart_div'));\n\n    function selectHandler() {\n      var selectedItem = chart.getSelection()[0];\n      if (selectedItem) {\n        var device = data.getValue(selectedItem.row, 0);\n        alert('The user selected ' + device);\n      }\n    }\n    google.visualization.events.addListener(chart, 'select', selectHandler);\n    chart.draw(data, options);\n}\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":883,"score":0,"question_id":12054298,"title":"how to pass the ID of the kendo Ui dropdown selected value onto the controller?","body":"<p>I am trying to create an application where i am using KENDO UI Dropdown. The Problem is i want to update the values from my view into the database . On selection of the any value in the dropdown the ID associated with it should be passed onto the controller for the required database updation. But here the ID for any selection of the dropdown list passes \"null\" as the value onto the controller .</p>\n\n<p>My view</p>\n\n<pre><code>@using Kendo.Mvc.UI\n@model ExamplekendoDropdown.Models.FacilityGroup\n\n@{\n    ViewBag.Title = \"FacilityGroup\";\n}\n\n&lt;h2&gt;FacilityGroup&lt;/h2&gt;\n\n@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;FacilityGroup&lt;/legend&gt;\n\n        &lt;div id=\"RegionName\"  class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.RegionId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n           @* @Html.EditorFor(model =&gt; model.RegionName)*@\n           @(Html.Kendo().DropDownList()\n          .Name(\"Region\")\n          .DataTextField(\"RegionName\")\n          .DataValueField(\"RegionId\")\n          .DataSource(source =&gt;\n          {\n              source.Read(read =&gt;\n              {\n                  read.Action(\"GetRegion\", \"Fill\");\n              });\n\n          })\n    )\n            @Html.ValidationMessageFor(model =&gt; model.RegionId)\n        &lt;/div&gt;\n     &lt;div id=\"Rest\"&gt;\n@*&lt;form method=\"post\" action='@Url.Action(\"Submit\")' style=\"width:45%\"&gt;\n    &lt;div&gt;\n        @(Html.Kendo().Upload()\n            .Name(\"files\")\n        )\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Submit\" class=\"k-button\" /&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;/form&gt;*@\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.FaclityGroupName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.FaclityGroupName)\n            @Html.ValidationMessageFor(model =&gt; model.FaclityGroupName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.status)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.status)\n            @Html.ValidationMessageFor(model =&gt; model.status)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.CreationDate)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n          @*  @Html.EditorFor(model =&gt; model.CreationDate)*@\n          @(Html.Kendo().DatePicker()\n              .Name(\"datepicker\")\n              .Value(\"17/08/2011\")\n              .HtmlAttributes(new { style = \"width:150px\" })\n        )\n            @Html.ValidationMessageFor(model =&gt; model.CreationDate)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n        &lt;/div&gt;\n\n    &lt;/fieldset&gt;\n}\n        &lt;div&gt;\n        @Html.ActionLink(\"See the List\", \"List\")\n        &lt;/div&gt;\n&lt;div&gt;\n    @Html.ActionLink(\"Back to List\", \"About\")\n&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n\n        $(\"#RegionName\").click(function () {\n            $(\"#Rest\").show();\n        });\n    });\n&lt;/script&gt;\n\n@section Scripts {\n    @Scripts.Render(\"~/bundles/jqueryval\")\n}\n</code></pre>\n\n<p>Controller :-</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing ExamplekendoDropdown.Models;\n\nnamespace ExamplekendoDropdown.Controllers\n{\n    public class FacilityGroupController : Controller\n    {\n        //\n        // GET: /FacilityGroup/\n\n        public ActionResult FacilityGroup()\n        {\n            return View();\n        }\n        [HttpPost]\n        public ActionResult FacilityGroup(FacilityGroup objadd)\n        {\n            AMIEntities1 obj1 = new AMIEntities1();\n            Facility objtbl = new Facility();\n\n                objtbl.RegionId = Convert.ToInt16(objadd.RegionId);\n                objtbl.FaclityGroupName = objadd.FaclityGroupName.ToString();\n                objtbl.Status = objadd.status;\n                objtbl.CreationDate = objadd.CreationDate;\n\n                obj1.AddToFacilities(objtbl);\n                obj1.SaveChanges();\n                obj1.AcceptAllChanges();\n\n\n            return View();\n        }\n    }\n}\n</code></pre>\n\n<p>Kindly help !!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13191583,"title":"how to post form in MVC 3.0 razor on radio button change","body":"<p>I want to active and inactive user account on click on form post. I am using </p>\n\n<pre><code>   @using (Ajax.BeginForm(\"SetStatus\", \"Home\", null, new AjaxOptions() { HttpMethod = \"Post\" }, null))\n                            {\n                                  if (res.Status == 1)\n                                  { \n\n                                        &lt;span class=\"userStatusSpan statusActive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"1\" checked=\"checked\" /&gt;Active&lt;/span&gt;\n                                        &lt;span class=\"userStatusSpan statusInactive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"0\"  /&gt;Inactive&lt;/span&gt;\n                                  }\n                                  else\n                                  {\n                                         &lt;span class=\"userStatusSpan statusActive\"&gt;&lt;input type=\"radio\" name=\"status\" value=\"1\" /&gt;Active&lt;/span&gt;\n                                        &lt;span class=\"userStatusSpan statusInactive\"&gt;&lt;input type=\"radio\" name=\"status\" checked=\"checked\" value=\"0\"  /&gt;Inactive&lt;/span&gt;\n\n                                  }\n                          }\n</code></pre>\n\n<p>Can anyone please tell me how to post form on check box change?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13194089,"title":"MVC3 Cannot find database file","body":"<p>I am trying to follow the <a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-model%27s-data-from-a-controller\" rel=\"nofollow\">MVC tutorial</a> on the ASP website and I'm now at the stage where we add the controller. I've used my own model, a transactions log instead of the movie DB in the tutorial.</p>\n\n<p>I wanted to check the table to see the data being added, but I can't find it under the AppData folder, which the tutorial says ought to happen. I also checked the directory in windows explorer, but I couldn't see the .sdf file there either.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","checkboxlist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13192502,"title":"Pass Selected checkbox value in MVC","body":"<p>I need to pass the selected checkboxlist to my controller Action. \nI tried using this code . <a href=\"http://stackoverflow.com/questions/220020/how-to-handle-checkboxes-in-asp-net-mvc-forms\">How to handle checkboxes in ASP.NET MVC forms?</a></p>\n\n<p>My View code: </p>\n\n<pre><code>   @foreach (var item in Model)\n      {\n     &lt;tr&gt;\n     &lt;td align=\"center\" class=\"Text_nocolor\"&gt;\n     @using (Html.BeginForm(\"ShowData\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"newForm\" }))\n     {   \n     &lt;input type=\"checkbox\" name=\"selectedObjects\" value=\"@item.Checked\" /&gt;@item.ProductName \n     }\n&lt;/td&gt;\n         &lt;td align=\"right\" class=\"Text_nocolor\"&gt;\n        @Html.DisplayFor(modelItem =&gt; item.Rate)\n       &lt;/td&gt;\n       &lt;td align=\"right\" class=\"Text_nocolor\"&gt;\n    @Html.DisplayFor(modelItem =&gt; item.Price)\n     &lt;/td&gt;\n&lt;/tr&gt;\n}\n</code></pre>\n\n<p><br/>\nMy Action Code : <br/></p>\n\n<pre><code>public ActionResult ShowData(Guid[] selectedObjects)\n            {\n                foreach (Guid guid in selectedObjects)\n                {\n                    Response.Write(guid.ToString());\n                }\n                Response.End();\n                return (new EmptyResult());\n            }\n</code></pre>\n\n<p>I called the sumbit code in an Action Link</p>\n\n<pre><code>@Html.ActionLink(\" \", \"ShowData\", new { controller = \"Cart\", new { @class = \"btnCheckout\" })\n</code></pre>\n\n<p>It throws a null reference in guid value.\nAny suggesstions. How to get the selected checkbox item wit my model binded. ???</p>\n"},{"tags":["asp.net-mvc","entity-framework","entity-framework-5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13181932,"title":"Update Related Entity Of Detached Entity","body":"<p>I'm having an issue <strong>updating</strong> an entity with multiple related entities. I've got a very simple model which consists of an article entity and a list of categories the article can be related to. You can choose from a check box list which of these categories are associated to it...which works fine.</p>\n\n<p>The problem crops up when I actually come to <strong>update</strong> an existing entity using the dbContext. As I am updating this entity, I have already detached it from the context ready to re-attach it later so the update can execute properly. </p>\n\n<p>I can see that after I posting the model, the category(s) are being added to the article entity just fine and it looks like it updates in the repository with no errors occurring. </p>\n\n<p>When I look in the database the article has updated as normal but the category(s) have not.</p>\n\n<p>Here is my (simplified) update code...</p>\n\n<pre><code>    public virtual bool Attach(T entity)\n    {\n        _dbContext.Entry(entity).State = EntityState.Modified;\n        _dbSet.Attach(entity);\n\n        return this.Commit();\n    }\n</code></pre>\n\n<p>Any help will be much appreciated.</p>\n"},{"tags":["c#","jquery","asp.net-mvc","json"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":25,"score":-3,"question_id":13193597,"title":"Tips for handling online store combo items","body":"<p>I am currently working on an online ordering application for a fast food chain. One thing that has me scratching my head is how to handle combo items. For instance, you get a deal where you pay $5 for a burger and coke or $30 for 6 burger and coke combo's.</p>\n\n<p>What I'm struggling with is figuring out a mechanism to ensure the user makes a selection for each, especially in the case of a combo of combo's. I was thinking of passing a Combo object back and forth via JSON, which is probably a good idea, but I'd like some input from others.</p>\n\n<p>I am using ASP.NET MVC3 and C#.</p>\n\n<p>UPDATE: I am not so much interested in the code, more the mechanism. I'll post the code I came up with if we find a workable solution.</p>\n"},{"tags":["c#","sql-server","asp.net-mvc","entity-framework","stored-procedures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13192696,"title":"Mapping stored procedures to entities with additional computed column","body":"<p>I am currently stuck with one of my projects and need some help..</p>\n\n<p>I created a table valued function in MSSQL that returns a table and a computed column (Distance) and have mapped it in Entity Framework 5 using the Entity Designer. </p>\n\n<p>The problem is that I can only map the results either as a complex type or an entity that is in my model class. I need to use one of the Navigation Property in the entity and hence, I am stuck with using my entity class. </p>\n\n<p>However, because the column Distance is not a real column in my table, I have no way of getting that value for every entity for the table valued function. </p>\n\n<p>Is there any way of hacking around this? I've tried using a partial class but the function would not map the Distance column as a property for me. </p>\n\n<p>Here's a little code to explain what I'm trying to do here :</p>\n\n<pre><code>IQueryable&lt;Deal&gt; deals = context.GetDealsByTypeLocationSearch(latitude, longitude);\nforeach (var d in deals)\n{\n  Console.Write(d.Distance); \n}\n</code></pre>\n\n<p>The distance value is null when I tried to create a partial class for my entity Deal.</p>\n"},{"tags":["asp.net-mvc","grid"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13157519,"title":"ASP.Net mvc , redisplaying table/grid data on error","body":"<p>I am quite new to mvc and while i was building a searchform i stumbled upon a state related problem. So, in asp.net mvc there is no such thing as viewstate like in asp.net forms. The question is how to redisplay grid data if input error occurs in a view, mvc is smart enough to show entered data but search result as table is lost .I want to see the old result as well. How would you guys resolve that. Store last search result in session and if there is error in model , restore from session ? That feels a bit hacky solution. </p>\n"},{"tags":["asp.net-mvc","mobile-web"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":196,"score":4,"question_id":11020852,"title":"Why is ViewContext.DisplayMode.DisplayModeId empty?","body":"<p>I'm using custom DisplayModes for ASP.NET MVC 4 (RC) views to allow customization of view content.</p>\n\n<p>My rules for this mobile only app are very simple and defined based on a user's internal profile/session configuration:</p>\n\n<pre><code>DisplayModeProvider.Instance.Modes.Insert(0,\n    new DefaultDisplayMode(\"Tablet\")\n    {\n        ContextCondition = (context =&gt;\n        {\n            if (SessionManager.Current == null)\n                return false;   // assume phone initially\n\n            if (SessionManager.Current.Session.ScreenWidth &gt; 600)\n                return true;\n\n            return false;\n        })\n    });\n\nDisplayModeProvider.Instance.Modes.Insert(0,\n    new DefaultDisplayMode(\"Phone\")\n    {\n        ContextCondition = (context =&gt;\n        {                        \n            if (SessionManager.Current == null ||\n                SessionManager.Current.Session.ScreenWidth &lt;= 600)\n                return true;   // assume phone initially\n\n            return false;\n        })\n    });\n</code></pre>\n\n<p>I can now create views that use xxxx.Phone.cshtml and xxxx.Tablet.cshtml. The right views are rendered.</p>\n\n<p>However, ViewContext.DisplayMode.DisplayModeId always comes back blank. For example, in the following page I echo back the display mode and a hardcoded id to tell which view was rendered:</p>\n\n<pre><code>&lt;div&gt;@Model.Distance - @ViewContext.DisplayMode.DisplayModeId  - Tablet&lt;/div&gt;\n</code></pre>\n\n<p>I see the hardcoded Tablet (or Phone) value, but the DisplayModeId is always blank.</p>\n\n<p>Should this value be set? I think this worked in previous builds of MVC 4 beta, but I'm not 100% sure. </p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13180453,"title":"Modelstate invalid due to foreign key relationship","body":"<p>Creating of object fails due to the fact that the ModelState is invalid. Any help will be appreciated. The simplified model looks like:</p>\n\n<pre><code>public partial class Timerecord\n{\n    public int ID { get; set; }\n    public int locationID { get; set; }\n    public int teamID { get; set; }\n    public int actionID { get; set; }\n    public System.DateTime currentTime { get; set; }\n\n    public virtual Location Location { get; set; }\n    public virtual Action Action { get; set; }\n}\n</code></pre>\n\n<p>The creating of a correctly supplied Timerecord fails due to an error:\n\"The parameter conversion from type 'System.String' to type 'Project.Models.Action' failed because no type converter can convert between these types.\"} System.Exception {System.InvalidOperationException}</p>\n\n<p>All attributes of the Timerecord are fine, but both Action and Location are Null (which is not a problem... as the foreign keys are correct). Do I have to set de foreign objects myself and then reevaluate the model, or I have to supply a constructor Action(string)?</p>\n\n<pre><code>    [HttpPost]\n    [ValidateAntiForgeryToken]\n    public ActionResult Create(Timerecord tm)\n    {\n        try\n        {\n            if (ModelState.IsValid)\n            {\n                db.Timings.Add(tm);\n                db.SaveChanges();\n                return RedirectToAction(\"Index\");\n            }\n            else\n            {\n                var errors = ModelState.SelectMany(x =&gt; x.Value.Errors.Select(z =&gt; z.Exception));\n                ...\n            }\n            ...\n</code></pre>\n\n<p>The problem seems to be caused by the Create method of the Controller (simplified):</p>\n\n<pre><code>    public ActionResult Create()\n    {\n        Timerecord tm = new Timerecord();\n        LocationDBContext dbLoc = new LocationDBContext();\n        ActionDBContext dbAct = new ActionDBContext();\n\n        tm.currentTime = DateTime.Now;\n        tm.locationID = 1;\n        tm.actionID = 5;\n        tm.Location = dbLoc.Location.Find(tm.locationID);\n        /* THE PROBLEM: tm.Action = dbAct.Action.Find(tm.actionID); PROBLEM HERE */\n\n        ViewData.Model = tm;\n        return View();\n    }\n</code></pre>\n\n<p>Location causes no problem, Action does..\nThanks for any help!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":40,"score":-2,"question_id":13116755,"title":"How to pass value from Parent View to Partial View on load","body":"<p>I am opening one edit Profile page in my view. I want to display skills of the person in his profile Page; his skills are stored in another table. Now I want to open one Partial View to show his skills. Please help me how to show the partial View.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","entity-framework","stored-procedures"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":293,"score":0,"question_id":10282061,"title":"HOw can I access two database in single .edmx file?","body":"<p>I have created mvc3 application.</p>\n\n<p>I have one <code>.edmx</code> already created which is based on <code>Db1</code> but now\nI have created a view which is based on <code>Database2</code> and I need to use this view inside my project.</p>\n\n<p>For that I need to update my EF <code>.edmx</code> file.\nbut when I right click and select option <code>Update model from Database</code>\ni'm only getting <code>all tables , view ,sps from</code>Db1<code>` its obvious\nBut as i need to use view which is from</code>Database2<code>how can i add it into my model</code>.edmx` file?\nplease help. </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13192932,"title":"ASP.NET MVC4 Layout pages with VirtualPathProvider","body":"<p>Since upgrading from ASP.NET MVC3 to MVC4 I have run into an issue. The application has a big portion of it's controllers and views embedded into a dll that the main project references and the solution relies on a standard VirtualPathProvider that checks if the requested view exists in the dll and if so returns it.</p>\n\n<p>After upgrading to MVC4 the request for the layout page doesn't go through the VirtualPathProvider anymore, causing the entire application to crash. All of the other views including partial views are handled correctly and are loaded from the assembly.</p>\n\n<p>Has anyone else run into any similar problems after upgrading to MVC4?</p>\n"},{"tags":["c#","android","asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":3150,"score":6,"question_id":8340644,"title":"Request.Browser.IsMobileDevice = false for Android, why?","body":"<p>I have samsung galaxy s2, in C# code it shows Request.Browser.IsMobileDevice = false, but I want to use mobile version for my application. How to have ability to show mobile version of my website, for Android devices?</p>\n\n<p>Thank you, so much.</p>\n\n<p>Sergey.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dataannotations"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13186158,"title":"difference between jquery validate plugin and ASP.NET MVC data annotations?","body":"<p>I am wondering what is the difference between validating Controls using JQuery Validate plugin and ASP.NET MVC DataAnnotations?</p>\n\n<p>Appreciate your responses.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","sql-server-ce"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13190807,"title":"is it logical to use SQL Server CE for storing temporary data?","body":"<p>I'm writing a web app using ASP.NET MVC4 and SQL Server 2012.</p>\n\n<p>At some point in my web app I need to store some data from different pages in my web app and after showing the whole data on a single page to the user, if the user confirmed and there were no validation errors I will store the confirmed data to SQL Server. This web app has a huge number of users.</p>\n\n<p>Is it logical and performance wise to use SQL Server CE as a temporary storage and store the data before confirmation on SQL Server CE?</p>\n\n<p>Are there any other options that I can use?</p>\n\n<p>What about localDb?! is it better to use localDb instead of SQL Server CE in this case?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13191379,"title":"VS 2010 / MVC4 / EF5 Add new controller error","body":"<p>When I attempt to add a new controller, I get the following template error. I've tried setting my template back to normal and reinstalling mvc4 and ef5 to no avail.</p>\n\n<p>Error:</p>\n\n<pre><code>Error   1   Running transformation: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---&gt; System.IO.FileNotFoundException: Unable to locate file\n   at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolvePath(String path)\n   at Microsoft.VisualStudio.TextTemplating.VSHost.TextTemplatingService.ResolvePath(String path)\n   --- End of inner exception stack trace ---\n   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner)\n   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\n   at Microsoft.VisualStudio.TextTemplatingB214C175D962501244305AB8E4D64CC3.GeneratedTextTransformation.DynamicHost.ResolvePath(String path)\n   at Microsoft.VisualStudio.TextTemplatingB214C175D962501244305AB8E4D64CC3.GeneratedTextTransformation.EdmMetadataLoader.CreateEdmItemCollection(String sourcePath)\n   at Microsoft.VisualStudio.TextTemplatingB214C175D962501244305AB8E4D64CC3.GeneratedTextTransformation.TransformText()\n   at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String&amp; result)        1   1   \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13013010,"title":"How to block targetUpdateId using Blockui using ajax.actionLink or ajax.beginForm","body":"<p>I want to develop an ajax pipeline such that whenever there is any ajax request made through ajax.beginform or ajax.actionLink it should start with my ajax.start function in which i can be able to read the targetupdateid so that i can shoew blockui and any developer should not bother about this ajax.start.I was trying to use this piece of code but itis not working</p>\n\n<pre><code>$(document).ajaxStart(function (xhr, setting) {\n    console.log(this.activeElement);\n    if (this.activeElement.type == 'submit') {\n        activeElement = this.activeElement.form.attributes[\"data-ajax-update\"].value;\n\n    } else {\n       / activeElement = this.activeElement.attributes[\"data-ajax-update\"].value;\n    }\n    if (activeElement != null) {\n        $(activeElement).blockUI();\n    }\n\n});\n</code></pre>\n\n<p>Any help would highly be appreciated.</p>\n"},{"tags":["jquery","asp.net-mvc","jqgrid-asp.net"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13189773,"title":"Edit functionality in jQgrid?","body":"<p>I have a jQgrid, i need to give edit functionality to it, when the user clicks on a a particular row, that row details should be displayed in popup...</p>\n\n<p>This is my jquery code in my view</p>\n\n<pre><code>    &lt;table id=\"list\" class=\"scroll\" cellpadding=\"0\" cellspacing=\"0\"  width=\"175\"&gt;&lt;/table&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n\n        jQuery(\"#list\").jqGrid({\n            url: '/Home/GetStudents/',\n            datatype: 'json',\n            mtype: 'POST',\n            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],\n            colModel: [\n      { name: 'StudentID', index: 'StudentID', width: 150, align: 'center',sortable:false },\n      { name: 'FirstName', index: 'FirstName', width: 150, align: 'center', sortable: true },\n      { name: 'LastName', index: 'LastName', width: 150, align: 'center', sortable: false },\n      { name: 'Email', index: 'Email', width: 200, align: 'center', sortable: false}],\n\n            pager: jQuery('#pager'),\n            width:750,\n            rowNum: 15,\n            rowList: [5, 10, 20, 50],\n            sortname: 'StudentID',\n            sortorder: \"asc\",\n            viewrecords: true,\n            caption: ' My First JQgrid'\n        });\n\n    });\n\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13156258,"title":"EF dbContext IQueryable methods dependencies not working","body":"<p>I've tried to add a few helper methods to my dbContext class like this</p>\n\n<pre><code>public IQueryable&lt;Tool&gt; GetAllToolsInCompanyGroup(string userName)\n{\n    var user = GetUserByName(userName);\n    return Tools.Where(t =&gt; Companies.Any(c =&gt; user.Company.CompanyGroupId == c.CompanyGroupId &amp;&amp; c.Id == t.CompanyId));\n}\n</code></pre>\n\n<p>But if I call that from my controller I get this exception:</p>\n\n<pre><code>Unable to create a constant value of type 'myNamespace.Models.Company'. Only primitive types or enumeration types are supported in this context.\n</code></pre>\n\n<p>If i do the exact same thing in in my controller like this:</p>\n\n<pre><code>db.Tools.Where(t =&gt; db.Companies.Any(c =&gt; user.Company.CompanyGroupId == c.CompanyGroupId &amp;&amp; c.Id == t.CompanyId))\n</code></pre>\n\n<p>it works. What am I doing wrong?</p>\n"},{"tags":["c#","html","asp.net-mvc","asp.net-mvc-4","http-post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13191932,"title":"Handling multi-dimensional POST data in C# (ASP.NET 4.0)","body":"<p>I've created a matrix-type form with dynamic rows and columns. The cells contain input fields that need to be handled by C# (MVC4, ASP.NET 4). The form looks like this (simplified):</p>\n\n<pre><code>&lt;form action=\"~/Administration/PriceMatrix\" method=\"post\"&gt;\n    &lt;input type=\"text\" name=\"Prices[1][0][1]\" value=\"15.00\" /&gt;\n    &lt;input type=\"text\" name=\"Prices[1][0][2]\" value=\"12.50\" /&gt;\n    &lt;input type=\"text\" name=\"Prices[1][1][1]\" value=\"10.00\" /&gt;\n    &lt;input type=\"text\" name=\"Prices[1][1][2]\" value=\"7.50\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The matching controller is still empty:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult PriceMatrix(object form)\n{\n\n}\n</code></pre>\n\n<p>When I use <code>Request.Form</code> I can of course access all the values, but they're not (de)serialized into an array. So I cannot do this: <code>Request.Form[\"Prices\"][0]</code> or something like that. Instead, I can only access them using their full names: <code>Request.Form[\"Prices[1][0][1]\"]</code> (=15.00). Of course I can loop thru the array and split the <code>Key</code> for each value, but I would like to do it some other way. I've tried to replace <code>object form</code> with another type or custom object containing lists etc., but so far no luck.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["asp.net-mvc","knockout.js"],"answer_count":3,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":4707,"score":11,"question_id":9838496,"title":"ASP.NET MVC with Knockout and Web API: does it make sense?","body":"<p>does it make sense to use KnockoutJS Viewmodels in combination with ASP.NET MVC3 or 4? Because it is not very DRY, isn't it? I have to write models for EF, Viewmodels for the MVC Views and Viewmodels for Knockout... and i lose a lot of magic. Automatic client-side validations for example.</p>\n\n<p>Does it make sense to use MVC at all if one sticks with the MVVM Pattern?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13191240,"title":"Checksum in cache manifest with ASP.NET MVC","body":"<p>I have ASP.NET MVC based mobile web application with cache manifest. This cache manifest includes javascript, css sources and pages itself:</p>\n\n<pre><code>CACHE MANIFEST\n\n# version 56517bc4-bb5d-fe72-fb2e-812379ceb0df\n\nCACHE:\n/Styles/site.css\n/images/flags-euro.png\n/mypage1\n/mypage2\n</code></pre>\n\n<p>I would like to calculate checksum based on content of every file to maintain cache.manifest versioning (for automatic site updates on the browser side). It's easy to do for static files: read file content and calculate checksum.</p>\n\n<p>But how to do it for pages? I need to get page content by requesting that page and calculate checksum. Any ideas how to do it with ASP.NET MVC?</p>\n"},{"tags":["asp.net","asp.net-mvc","c#-4.0","diagram"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13176102,"title":"ASP MVC 4 - diagram tools","body":"<p>I am looking for the best way to implement a real time diagram tool to use in my website. I've found a website with something similar: mentionmapp.com .. You can see the diagram on the background of the homepage, if any can give me suggestions to create something similar I'd appreciate it. </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","binding","checkbox","viewmodel","state"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":7211,"score":5,"question_id":3291501,"title":"Maintain state of a dynamic list of checkboxes in ASP.NET MVC","body":"<p>I have a class called \"PropertyFeature\" which simply contains PropertyFeatureID and Description. It's a proper model created through LINQ to SQL mapped to an SQL Server database table. An example instance/row would be:</p>\n\n<pre><code>PropertyFeatureID: 2\nDescription: \"Swimming Pool\"\n</code></pre>\n\n<p>The number of rows (PropertyFeatures) can of course grow and shrink, and so I want to dynamically render a list of checkboxes so that the user can select any of them.\nI can dynamically render the Checkboxes easily enough, with something like:</p>\n\n<pre><code>&lt;%foreach (var Feature in (ViewData[\"Features\"] as IEnumerable&lt;MySolution.Models.PropertyFeature&gt;)) { %&gt;\n&lt;%=Html.CheckBox(\"Features\", new { @id = Feature.PropertyFeatureID, @value = Feature.PropertyFeatureID })%&gt;&lt;label for=\"Feature&lt;%=Feature.PropertyFeatureID%&gt;\"&gt;&lt;%=Feature.Description%&gt;&lt;/label&gt;\n&lt;%}%&gt;\n</code></pre>\n\n<p>I specify the ID for each checkbox and render the matching label so that the user can intuitively click the label and toggle the checkbox - that works great.</p>\n\n<p>I set the CheckBox's \"name\" to \"Features\" so all the checkboxes render with the same name, and the MVC Model Binder piles them into a single collection called \"Features\" when the form is posted. This works nicely.</p>\n\n<p>Once the form is submitted, I use the checked values and store them, so I need the actual integer values so I know which PropertyFeature is selected, not just a pile of Booleans and field names. So ideally, I want it as an array or a collection that's easy to work with.</p>\n\n<p>I am able to retrieve the selected values from within my Controller method when the button is clicked because I have specified the parameter as int[] Features.</p>\n\n<p><strong>But the problem</strong> is that it doesn't maintain state. That is, when I click the submit button and the page reloads (with the form again displayed) I want all of the dynamic checkboxes to retain their checked status (or not). All of the other fields that I've created with <code>Html.DropDownList</code> and <code>Html.TextBox</code> all maintain their states successfully no problems at all on the same page in the same form.</p>\n\n<p>I have spent hours reading all of the other threads and articles on similar issues and there is a lot of talk about using <code>ICollection</code> and <code>IDictionary</code> to bundle things up and include a Boolean value for each item so that it can maintain the checkbox state. But I don't 100% grasp how to use that in the context of my own personal example. I would like to keep the solution really simple and not have to code up pages of new classes just to maintain my checkbox state.</p>\n\n<p>What is the cleanest and proper way to do this?</p>\n"},{"tags":["c#","asp.net-mvc","ipad"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13189776,"title":"Session is null on ipad","body":"<p>I have the following code in action:</p>\n\n<pre><code>public JsonResult AddTicketToCart(...)\n{\n   ... \n   Session.Add(\"Cart\", cart);\n   return Json(new { IsSuccess = true }, JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n\n<p>In the JS code:</p>\n\n<pre><code>$.get('/desk/AddTicketToCart', { clientId: clientId, sessionId: sessionId, levelId: levelId, places: places, isWithoutPlace: isWithoutPlace, delivery: delivery }, function (data) {\n     if (data.IsSuccess) {\n          if (isQuickBuy)\n              window.location = '/desk/paywizard';\n          else\n              window.location = $('#wiz_header .first-child&gt;a').attr('href');\n      } else {\n                 toastr.options.timeOut = 10000;\n                 toastr.error('Error.');\n                }\n            });\n</code></pre>\n\n<p>This <code>PayWizard</code> action contain:</p>\n\n<pre><code>if (Session[\"Cart\"] == null)\nreturn new HttpNotFoundResult();\n\nvar model = CreateViewData&lt;PersonalInfoViewData&gt;();\nreturn View(\"PersonalInformation\", model);\n</code></pre>\n\n<p>The problem in that I get 404 error on Ipad. On desktop all works fine. I add logging messages to <code>AddTicketToCart</code>:</p>\n\n<pre><code>public JsonResult AddTicketToCart(...)\n    {\n       ... \n       Session.Add(\"Cart\", cart);\n\n       if(Session[\"Cart\"] != null)\n            Logging.Log.Info(\"Cart not null\");\n       else\n            Logging.Log.Info(\"Cart equal null\");\n\n        var test = (CartModel) Session[\"Cart\"];\n        if( test != null)\n        {\n            Logging.Log.Info(\"CartModel not null\");\n            Logging.Log.Info(\"Tickets count: {0}\", test.Tickets.Count);\n        }\n        else\n            Logging.Log.Info(\"CartModel equal null\");\n\n       return Json(new { IsSuccess = true }, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>The output is the following:</p>\n\n<pre><code>2012-11-02 09:37:34.4887 | Info | Cart not null \n\n2012-11-02 09:37:34.4887 | Info | CartModel not null \n\n2012-11-02 09:37:34.4887 | Info | Tickets count: 1 \n</code></pre>\n\n<p>As you can see the <code>Cart</code> in session is exist. Butin <code>Paywizard</code> is equal null. \nWhere is a problem?</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13187772,"title":"Convert Asp.Net to MVC and resuse Asp.net Partial Views in MVC Pages","body":"<p>I am trying to create an Hybrid App with open community forums (<em>yetanotherforum</em>) which is written in ASP.Net as the base and all my extensions would be written in MVC.</p>\n\n<p>I added all the references &amp; applied tweaks to <code>web.config</code> and <code>global.asax</code> and now I can run both .aspx and mvc pages fine.</p>\n\n<p>But when I tried to embed UserControls defined in Asp.net into MVC razor pages by using the following line of code :</p>\n\n<pre><code>@Html.Partial(\"~/pages/login.ascx\")\n</code></pre>\n\n<p>And it is throwing an Error as follows:</p>\n\n<pre><code>The view at '~/pages/login.ascx' must derive from ViewPage, ViewPage&lt;TModel&gt;, ViewUserControl, or ViewUserControl&lt;TModel&gt;.\n</code></pre>\n\n<p>Is it possible to render .net web controls in the MVC Pages?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":55,"score":1,"question_id":13151761,"title":"MVC: How to know which input value from HttpPostedFileBase","body":"<p>Let me try to explain my situation as simple as possible first:</p>\n\n<p>Suppose I have a page which contains multiple [input type='File']. Some of them may be selected a file and some are not.</p>\n\n<p>In my httppost method, I know I need to use parameter like \"IEnumerable files\"  to get filenames, and also each [input] name I should define either = 'files' or 'files[0]','files[1]', etc.....</p>\n\n<p>My question is: when getting a list of HttpPostedFileBase, how could I determine which file belongs to which input control As some inputs may leave blank.</p>\n\n<p>Also because these [input] are created dynamically and there is no fixed number of it, I could not hard-code the parameter in httppost method for each of them.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13189434,"title":"How to get Current.Server.MapPath?","body":"<p>I'm using MVC.I want to save xml file inside the services class.\nso wrote this one.</p>\n\n<pre><code>string path = HttpContext.Current.Server.MapPath((Url.Content(\"~/client-authentication.xml\")));\n</code></pre>\n\n<p>but there is error and it says</p>\n\n<pre><code>'System.Security.Policy.Url' does not contain a definition for 'Content'\n</code></pre>\n\n<p>How to solve it??\nHow can I give the path??</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13136130,"title":"Full calendar with year view and enable days and event clickable","body":"<p>I want to add full calendar with Full year view to my mvc project, and the year view of the full calendar should be enable day click and event click function.I have try one of year view full calendar ,its gives year view, but it doesn't work click able events for days and event.Please any one can help me\nthe link of the calendar plugin that I have use to render year view is below</p>\n\n<p><a href=\"http://code.google.com/p/fullcalendar/issues/detail?id=871&amp;can=1&amp;q=fullcalendar%20year%20view&amp;colspec=ID\" rel=\"nofollow\">http://code.google.com/p/fullcalendar/issues/detail?id=871&amp;can=1&amp;q=fullcalendar%20year%20view&amp;colspec=ID</a> Type Status Milestone Summary Stars\n'fullcalender 15'</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","checkboxes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":13178446,"title":"How to get the selected list of items from checkboxlist and pass it to the Action in MVC4","body":"<p>I am trying to implement a checkboxlist in my MVC application. here I need to get the selected checkboxlist values pass it to @html.ActionLink().<br/>\nI have searched many sites including Stackoverflow but there is no model binding of database values and getting the selected checkbox values and passing to an action. <br/>\n<a href=\"http://stackoverflow.com/questions/5284395/checkboxlist-in-mvc3-view-and-get-the-checked-items-passed-to-the-controller.\">Eg :http://stackoverflow.com/questions/4872192/checkboxlist-in-mvc3-0</a></p>\n\n<p>and I tried from this link. <a href=\"http://stackoverflow.com/questions/3369533/checkboxlist-multiple-selections-how-to-model-bind-back-and-get-all-selections\">CheckBoxList multiple selections: how to model bind back and get all selections?</a> <br/></p>\n\n<p>How to get the selected productid from the checkbox list. \nAny examples.. ?? </p>\n"},{"tags":["c#","asp.net-mvc","excel","iis","file-io"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13168268,"title":"Access Denied on a Shared Folder from MVC Web Application","body":"<p>I have an MVC Web application that generates Excel and PDF reports (using Crystal) using templates .xlt and .rpt, it generates the reports without a glitch when I place the templates in the web server itself but once I place the templates in a <strong>remote location</strong> then I get an Access Denied error which I found out through process monitor, screen shot below</p>\n\n<p><img src=\"http://i.stack.imgur.com/unDv6.png\" alt=\"enter image description here\"></p>\n\n<p>When I manually browse the remote folder through explorer from the server its all OK and I can open the files I needed its just fires the access denied error when its the server reading the files.  My web application is using the ApplicationPoolIdentity in Integrated Pipeline.  Authentication is through impersonation and Windows Authentication.  Whats even makes it confusing is that the User who runs the Excel templates is my self but I get the access denied, while user used in generating PDF is IIS Apppool.</p>\n\n<p>Does anyone know how to resolve the access denied issue, I already tried putting all users full access on that folder but still it does not work.</p>\n\n<p><strong>ADDITIONAL INFO</strong></p>\n\n<p>I am using IIS 7.5, I also checked on the File Server where the share is, on the Event Logs the user registered is not me but with the following details</p>\n\n<pre><code>An account was successfully logged on.\n\nSubject:\n    Security ID:        NULL SID\n    Account Name:       -\n    Account Domain:     -\n    Logon ID:       0x0\n\nLogon Type:         3\n\nNew Logon:\n    Security ID:        ANONYMOUS LOGON\n    Account Name:       ANONYMOUS LOGON\n    Account Domain:     NT AUTHORITY\n    Logon ID:       0x90eb7c7\n    Logon GUID:     {00000000-0000-0000-0000-000000000000}\n\nProcess Information:\n    Process ID:     0x0\n    Process Name:       -\n\nNetwork Information:\n    Workstation Name:   MYWEBSERVER\n    Source Network Address: 10.10.10.01\n    Source Port:        00000\n\nDetailed Authentication Information:\n    Logon Process:      NtLmSsp \n    Authentication Package: NTLM\n    Transited Services: -\n    Package Name (NTLM only):   NTLM V1\n    Key Length:     128\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13188165,"title":"Object [object Object] has no method 'button' , using Asp.Net MVC4 with JQuery and JQuery UI from nuget packages","body":"<p>I dont under stand why i cant get my buttons to work.</p>\n\n<pre><code>Object [object Object] has no method 'button' \n\n&lt;button id=\"bt\"&gt;Button with icon only&lt;/button&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#bt\").button();\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I have:</p>\n\n<pre><code> @Scripts.Render(\"~/bundles/jquery\")\n @Scripts.Render(\"~/bundles/jqueryui\")\n\n bundles.Add(new ScriptBundle(\"~/bundles/jquery\").Include(\n                    \"~/Scripts/jquery-{version}.js\"));\n\n bundles.Add(new ScriptBundle(\"~/bundles/jqueryui\").Include(\n                    \"~/Scripts/jquery-ui-{version}.js\"));\n</code></pre>\n\n<p>When loading the page, i see both jquery-ui-1.9.0.js jquery-1.8.2.js loaded fine.</p>\n"},{"tags":["c#",".net","asp.net","asp.net-mvc","dotnetopenauth"],"answer_count":5,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":2871,"score":9,"question_id":3301541,"title":"Should I use the built-in membership provider for an ASP .NET MVC application?","body":"<p>I've been using a custom membership provider for authentication in all my web form applications till now.  I'm about to start developing my first website using MVC.  I'm wondering if I should I use the built-in membership provider that ships with ASP .NET MVC, or if I should create my own.  My site needs to integrate with openid, facebook, google etc for authentication and openauth for api access.  I'm wondering how easy it would be to use the built-in one for my needs.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":182,"score":3,"question_id":13030074,"title":"Why InitializeSimpleMembershipAttribute in MVC 4 app","body":"<p>I think my understanding on <code>SimpleMembershipProvider</code> is almost 60% and the rest is getting to know how it internally work.</p>\n\n<p>You can quickly found some issue when using <code>[InitializeSimpleMembership]</code> filter only in AccountController (the default template). I think anywhere you use Memberhsip API or <code>WebMatrix.WebSecurity</code>, you need to make sure this filter should be called first.</p>\n\n<p>Later, If you use <code>User.IsInRole</code> in my <code>_Layout.cshtml</code>. You need to apply the filter to all controllers, then you start registering it in globally.</p>\n\n<p>However I just realize there is <code>LazyInitializer.EnsureInitialized</code> which make the initialization performed only once per app start.</p>\n\n<p>So why the <code>SimpleMembershipInitializer</code> (in the filter) is not directly in Application_Start?\nIs there any reason to use the filter?</p>\n"},{"tags":["c#","asp.net-mvc","razor","mvccontrib"],"answer_count":6,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":133,"score":3,"question_id":13090465,"title":"Is there a ready-made data table view library with paging/filtering/sorting?","body":"<p>I'm building a system in MVC that has a lot of heterogeneous data to be displayed: Customers, logs, etc.</p>\n\n<p>I'm finding that I'm building the same view over and over again in different forms:</p>\n\n<ul>\n<li>Header row (with sorting links)</li>\n<li>Filter row (drop-downs, date pickers, etc.)</li>\n<li>Data</li>\n<li>Paging row</li>\n</ul>\n\n<p>Naturally the abstractor in me is shouting \"Build a generic data view factory!\", as well it should. However, before I disappear up my own abstracting bottom, has this work already been done elsewhere?</p>\n\n<p>The only option I can currently find is <a href=\"http://mvccontrib.codeplex.com/wikipage?title=Grid&amp;referringTitle=Documentation\" rel=\"nofollow\">MVCContrib.Grid</a>, which doesn't seem to handle the rendering of filters (although it has allowances for extending the renderer). Is this the only option?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-areas","razor-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":13129552,"title":"Multiple layouts for ASP.Net MVC 4","body":"<p>I have a _ViewStart.cshtml in my main view folder with the following code.</p>\n\n<pre><code>@{\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n</code></pre>\n\n<p>In the View folder of my admin area I have a _ViewStart.cshtml with this code</p>\n\n<pre><code>@{\n    Layout = Request.IsAjaxRequest() ? null : \"~/Areas/Admin/Views/Shared/_Layout.cshtml\";\n}\n</code></pre>\n\n<p>I put a breakpoint on both lines of code, and when I go into the admin area I can see it hits the viewstart in that folder and not the one in the main folder.  Even though it hits that code it still only uses the main layout.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13187606,"title":"MVC3 Html.ActionLink to sub-controller","body":"<p>Is it possible to get <code>Html.ActionLink()</code> to render a link to a path that looks like this?</p>\n\n<pre><code>/posts/1/comments/2\n</code></pre>\n\n<p>In my app, I have this route:</p>\n\n<pre><code>context.MapRoute(\n    \"CommentRoute\",\n    \"posts/{postId}/comments/{action}/{commentId}\",\n    new {\n        controller = \"Comments\",\n        action = \"details\",\n        commentId = UrlParameter.Optional });\n</code></pre>\n\n<p>What overload/set of parameters can I send to <code>Html.ActionLink</code> to get a pretty path like the one above?</p>\n\n<p>If this isn't possible, is there a recommended implementation of a custom helper to achieve the same effect?</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13186733,"title":"Create an complex helper with Ajax and model","body":"<p>I wish creating a mvc helper that return an Ajax Search, and the parameters that I pass is an string representing the table that i want searching. The helper goes opening an modal with the values and an dropDown with options for filtering the search. I have some questions about this:</p>\n\n<ol>\n<li><p>Is this possible?</p></li>\n<li><p>If possible, how i get the table based in an string? Example, the string \"people\" returning the People table. Fact, am using Entity Framework.</p></li>\n<li><p>I need create an dropDown where the  table columns are options for search. The user can pass an string and the helper needing adapting with these parameters. How i get the table columns? the names...</p></li>\n</ol>\n"},{"tags":[".net","asp.net-mvc","entity-framework-4","ado.net","ninject"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13183035,"title":"Max Pool Size Being Encountered With Entity Framework 4.3","body":"<p>This is going to be a long post so please hang with me.</p>\n\n<p>One of the production sites that we implemented here at work a few months back I started seeing the dreaded connection leak error message in our ELMAH logs every so often.</p>\n\n<pre><code>\"Timeout expired. The timeout period elapsed prior to obtaining a connection from the pool. This may have occurred because all pooled connections were in use and max pool size was reached.\"\n</code></pre>\n\n<p>This puzzled me as we are using EF and the connection handling should have been automatic.</p>\n\n<p>So I started digging. The first potential culprit I considered was MiniProfiler (or I should say, our implementation of using miniprofiler). We have been using this and it has been working well, but I was worried about potential connection leaks.</p>\n\n<pre><code>    public OurContext() : base(GetProfilerConnection(), true)\n    {}\n\n    private static DbConnection GetProfilerConnection()\n    {\n        return new EFProfiledDbConnection(new SqlConnection(ConfigurationManager.ConnectionStrings[\"Database\"].ConnectionString),\n                                          MiniProfiler.Current);\n    }       \n</code></pre>\n\n<p>I was under the impression that the \"true\" parameter in the base call caused the context to take ownership of the connection so I believe that this should work fine and the connection will be disposed of.</p>\n\n<p><img src=\"http://i.stack.imgur.com/8X4Qq.png\" alt=\"enter image description here\"></p>\n\n<p>In our Enhancement DEV branch I've removed miniprofiler as it has not been updated to support EF5 and we're going to be migrating at some point in the not too distant future, so this should be removed as a concern.</p>\n\n<p>Concern two was \"are we disposing our datacontexts properly\"? So I downloaded Entity Framework Profiler on a trial and took our heaviest page and ran a test.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3CxJr.png\" alt=\"enter image description here\"></p>\n\n<p>The results showed explicitly that any context we opened was closed, the concerning part to me however is the number of contexts we open. We have our DI container (Ninject 2) setup to instatiate one context per web http request, which I'd\nconsider correct. The problem comes into pay with how we handle images in our application. This page in particular can have up to seven images in the database. Each of these images is included in the page via a MVC action.\nLike so:</p>\n\n<pre><code>[&lt;img src=\"/Controller/GetPhotoAction/[ImageId] /&gt;]\n</code></pre>\n\n<p>Since the image is a separte request a separate context is being opened. So, for this particular page, we are utilizing seven different connections from the connection pool if I'm understanding this correctly. Multiply this by however many users and I see\nhow the error message above could be true.</p>\n\n<p>The reason for storing images in the database is twofold. One, our administrative application to manage the data for this app is on the US West Coast, but the servers hosting the application are on the US East Coast. There is a \nVPN tunnel between our network here at work on the West Coast and the servers on the East Coast. The app is load balanced as well (2 web front ends). The decision was made to store the images in the DB to avoid copying the images \nthrough a VPN tunnel and then dealing with permissions to writing the images to a file location within the web app on each server (the two locations are also completely different domains). </p>\n\n<p>In the interim, while we test, we have upped the max connection pool size in our connection string and will be deploying this out to PROD early next week.</p>\n\n<p>So, my questions are:</p>\n\n<p>1) Have I covered my bases in leak checking here? I believe I have. Am I wrong in anything I stated above?</p>\n\n<p>2) If the multiple data contexts on this page prove to be the culprit, suggestions on how to write an image to two servers across the country keeping in mind permissions will cross domains? Realistically, I'd like to do this anway,\nbut the technical hurdles are a bit more than we are willing to do at this time right before the holidays.</p>\n\n<p>3) If you think neither of the above are problems, what could I be missing? Could it really be that requests are high enough that we're encountering this error and we need to scale out? I can dig up logs to view use statistics, but it\nseems unlikely. This page is cached for an hour (there is a vary by param) </p>\n"},{"tags":["c#","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13166253,"title":"MVC3 DropDownList - Modify data being displayed in form on SelectedIndexChanged?","body":"<p>I have two DropDownList elements in my model. </p>\n\n<pre><code>[DisplayName(\"Site\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; Site { get; set; }\npublic int SelectedSiteID { get; set; }\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedSiteID, new SelectList(Model.Site, \"Key\", \"Value\"))%&gt;\n\n[DisplayName(\"Data Center\")]\npublic List&lt;KeyValuePair&lt;int, string&gt;&gt; DataCenter { get; set; }\npublic int SelectedDataCenterID { get; set; }\n&lt;%= Html.DropDownListFor(model =&gt; model.SelectedDataCenterID, new SelectList(Model.DataCenter, \"Key\", \"Value\"))%&gt;\n</code></pre>\n\n<p>I am attempting to modify the collection of ListItem's in my second DropDownList when the user makes a change to the first's selection.</p>\n\n<p>I think that this is possible in the following manner, but I wanted to confirm that this was good practice:</p>\n\n<ul>\n<li>Using jQuery, bind to the first DropDownList's change event.</li>\n<li>When responding to the change event -- send an AJAX request to the server with the newly selected value.</li>\n<li>The server will respond with JSON representing a collection of ListItem objects for the second DropDownList.</li>\n<li>Using jQuery, I modify the second DropDownList's selection such that it contains the returned JSON elements.</li>\n</ul>\n\n<p>This all seems a bit... non-MVC3y, if you will. Is this the standard way of achieving what I am asking, or is there a more clear way?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13186510,"title":"MVC4 Conditional Required Annotation","body":"<p>I  have a property which is set to required via data annotation. This works perfectly fine for the create form but I would like to make the property not required in the edit form. How can I go about doing that? </p>\n"},{"tags":["asp.net","sql-server","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":726,"score":0,"question_id":12135081,"title":"asp.net mvc Invalid value for key 'attachdbfilename'","body":"<p>I build a simple model and views and import \"sql server compact\" using NuGet.\n(Following \"Manning ASP.NET MVC 4 in Action\" ebook first example)\nwhen I finally try to run it I get the following error </p>\n\n<pre><code>Invalid value for key 'attachdbfilename'.\n</code></pre>\n\n<p>On every select or CRUD I am trying to execute.<br>\nany ideas? </p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":0,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":130,"score":3,"question_id":13148263,"title":"Entity Framework DbSet.Find throws exception","body":"<p>I'm following a very basic example of code-first Entity Framework (version 4.1) in ASP.NET MVC 4 (using the EBuy example in O'Reilly's Programming ASP.NET MVC 4). I've searched for solutions to this and so far have drawn blank. The basic problem is this code in my controller:</p>\n\n<pre><code>public ActionResult Details(long id)\n    {\n        using (var db = new EbuyDataContext())\n        {\n            var rep = db.Auctions;\n            var auction = rep.Find(id);\n            return View(auction);\n        }\n    }\n</code></pre>\n\n<p>throws an <strong>ArgumentNullException Value cannot be null. Parameter name: key.</strong> when it hits the rep.Find(id) call. Interestingly, when it breaks into the code, the db.Auctions property has the 'Expanding the Results View will enumerate the IEnumerable' and if clicked, it shows my expected two entities which have just been retrieved from the database. The rep object however, does have 'Children could not be evaluated' when it is inspected.</p>\n\n<p>Quite similar 'Create' code like this works okay:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult Create(Auction auction)\n    {\n        var db = new EbuyDataContext();\n        db.Auctions.Add(auction);\n        db.SaveChanges();\n\n        return View(auction);\n    }\n</code></pre>\n\n<p>This is my db context:</p>\n\n<pre><code>namespace Ebuy.DataAccess\n{\n    public class EbuyDataContext : DbContext\n    {\n        public DbSet&lt;Auction&gt; Auctions { get; set; } \n    }\n}\n</code></pre>\n\n<p>and this is my model class:</p>\n\n<pre><code>namespace Ebuy.DomainModel\n{\n    public class Auction\n    {\n        public long Id { get; set; }\n        public string Title { get; set; }\n        public string Description { get; set; }\n        public decimal StartPrice { get; set; }\n        public decimal CurrentPrice { get; set; }\n        public DateTime StartTime { get; set; }\n        public DateTime EndTime { get; set; }\n    }\n}\n</code></pre>\n\n<p>I did find one reference which talked about the POCO's and the dbcontext being in different namespaces or assemblies.\nDoes anyone know why the Create code works and the Find doesn't?</p>\n\n<p><strong>Edit:</strong> The stacktrace is:</p>\n\n<blockquote>\n  <p>System.ArgumentNullException was unhandled by user code<br>\n  Message=Value cannot be null. Parameter name: key   Source=mscorlib<br>\n  ParamName=key   StackTrace:\n         at System.Collections.Generic.Dictionary<code>2.FindEntry(TKey key)\n         at System.Collections.Generic.Dictionary</code>2.ContainsKey(TKey key)\n         at System.Data.Entity.Internal.InternalContext.TryUpdateEntitySetMappingsForType(Type\n  entityType)\n         at System.Data.Entity.Internal.InternalContext.IsEntityTypeMapped(Type\n  entityType)\n         at System.Data.Entity.Internal.Linq.InternalSet<code>1.Find(Object[] keyValues)\n         at System.Data.Entity.DbSet</code>1.Find(Object[] keyValues)\n         at Ebuy.Website.Controllers.AuctionsController.Details(Int64 id) in C:\\Users\\John\\Documents\\Visual Studio\n  2010\\Projects\\Ebuy.Website\\Ebuy.Website\\Controllers\\AuctionsController.cs:line\n  26\n         at lambda_method(Closure , ControllerBase , Object[] )\n         at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)\n         at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext\n  controllerContext, IDictionary<code>2 parameters)\n         at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext\n  controllerContext, ActionDescriptor actionDescriptor, IDictionary</code>2\n  parameters)\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;>c_<em>DisplayClass42.b</em>_41()\n         at System.Web.Mvc.Async.AsyncResultWrapper.&lt;>c_<em>DisplayClass8<code>1.&lt;BeginSynchronous&gt;b__7(IAsyncResult\n  _)\n         at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult</code>1.End()\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult\n  asyncResult)\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;>c</em>_DisplayClass37.&lt;>c_<em>DisplayClass39.b</em>_33()\n         at System.Web.Mvc.Async.AsyncControllerActionInvoker.&lt;>c_<em>DisplayClass4f.b</em>_49()\n  InnerException:</p>\n</blockquote>\n\n<p><strong>Edit 2:</strong> The table does have the Id column as the primary key.\n<strong>Update:</strong> Based on nemesv's comment, I checked the versions. I'm using .NET Framework v 4.0. The MVC Web app, when created, used Nuget to get EF version 5.0 (although the actual reference is to EF runtime 4.0.30319 v4.4.0.0). I added the DataAccess project and gave it a reference to a <strong>different</strong> EF (runtime 4.0.30319 v4.1.0.0). I've changed the DataAccess project's reference to the same EF as the Web app and now I get a different exception: InvalidOperationException The context cannot be used while the model is being created. This appears to be an issue when using EF across an N-tier application, so I'll follow up this thread and report back.</p>\n\n<p><strong>Fix:</strong> I read some stuff about LazyLoading settings in EF and also how loading takes place when you access a property of an entity. As I'm not really accessing an entities property before I try and find one and thinking that perhaps LazyLoading is the default in EF 5.0, I added a default constructor to my EbuyDataContext class as follows:</p>\n\n<pre><code>public class EbuyDataContext : DbContext\n{\n    public EbuyDataContext()\n    {\n        //Configuration.LazyLoadingEnabled = false;\n    }\n\n    public DbSet&lt;Auction&gt; Auctions { get; set; } \n}\n</code></pre>\n\n<p>I also set the LazyLoadingEnabled parameter to false and then ran it and Voila! Success!\nHowever, I thought I would double-check this, so I commented out the LazyLoadingEnabled parameter, did a clean rebuild and it still worked. I commented out the default constructor and now it still works - did something else change when I ran it with the LazyLoadingEnabled parameter in place?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13092630,"title":"Get an error when trying to populate a telerik ddl at page load","body":"<p>How can I populate a telerik drop-down list at page load?</p>\n\n<p>I get the following error(at emphasized line below) when I try to populate dropdownlist:</p>\n\n<pre><code>Error: 'data(...)' is null or not an object\n</code></pre>\n\n<p>Here is how I try to populate the telerik ddl:</p>\n\n<pre><code>$(function(){\nvar values = [];\nfor (var i = 1; i &lt; 10; i++) { \n\nvalues.push({ Text: i, Value: i });\n}\n****$(\"#MyDdl\").data(\"tDropDownList\").dataBind(values);****\n});\n</code></pre>\n\n<p>Tried it this way as well:</p>\n\n<pre><code> $(function(){\n    onDataBinding();\n    });\n\nfunction onDataBinding(e) {\n        var MyDdl = $('#MyDdl').data('tDropDownList');\n        var values = [];\n        for (var i = 1; i &lt; 10; i++) {  \n    values.push({ Text: i, Value: i });\n    }\n      ****MyDdl.dataBind(values);****\n    };\n</code></pre>\n\n<p>But get following undefined error at emphasized line above:</p>\n\n<pre><code>Error: 'undefined' is null or not an object\n</code></pre>\n\n<p>Note:\nAdding a button and loading the ddl on button click event does populate telerik drop-down list.\nDoing it this way works perfectly fine:</p>\n\n<pre><code>    $(function(){\n   var values = [];\n        for (var i = 1; i &lt; 10; i++) {             \n        values.push({ Text: i, Value: i });\n        }\n        $(\"#MyDdl\").data(\"tDropDownList\").dataBind(values);            \n    });\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["asp.net-mvc","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13169662,"title":"Submitting twitter bootstrapper tabs, with asp.net mvc 3 partial view","body":"<p>I am having a twitter bootstraper tab, with 3 simples tabs (Caracteristiques, Certificat and Contrats)</p>\n\n<p>the tabs are ajax load with asp.net mvc partialviews, they are tied with modelViews:</p>\n\n<p>the partials views strongly tied to the type ViewModel:</p>\n\n<pre><code>    // Load Certificat\n    public ActionResult Certificat()\n    {\n        var modelStaffs = _twitterTabsModel.GetStaffs();\n\n        return PartialView(\"_Certificat\", modelStaffs);\n    }\n\n    // load Contrats\n    public ActionResult Contrats()\n    {\n        var modelJoueur = _twitterTabsModel.GetFirstJoueur();\n\n        return PartialView(\"_Contrats\", modelJoueur );\n    }\n</code></pre>\n\n<p>the models:</p>\n\n<pre><code>public class TwitterTabModel\n{\n    public ModelJoueur JoueurVM { get; set; }\n    public IEnumerable&lt;ModelStaff&gt; StaffVM { get; set; }\n}\n\npublic class ModelStaff\n{\n    public string NomStaff { get; set; }\n    public string FonctionStaff { get; set; }\n}\n\npublic class ModelJoueur\n{\n    public string NomJoueur { get; set; }\n    public string PrenomJoueur { get; set; }\n}\n</code></pre>\n\n<p>the Caracteristiques Tab views:</p>\n\n<pre><code>@model Controls.Models.ViewModel.TwitterTabModel\n\n&lt;h2&gt;Caracteristiques&lt;/h2&gt;\n\n@using (Html.BeginForm())\n{\n.... the tabs code ...\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n\n}\n</code></pre>\n\n<p>The tabs load fines, what I want to do is to include a submit button on the first razor view tab, it submit all the other models if loaded, however, when I get the post call, all the others models, JoueurVM and StaffVM are empty even though they are loaded. Why is it according to you ?</p>\n\n<p>edit: This is the controller post code, nothing special, just trying to get the twitterTabModel:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Tabs(TwitterTabModel model)\n    {\n        return View();\n    }\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","elmah","xdocument","elmah.mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13182108,"title":"Why does XDocument.Load throw exception when ELMAH is enabled?","body":"<p>I have the following code that retrieves a link to the latest post from the blog subsite:</p>\n\n<pre><code>XDocument doc = XDocument.Load(\"http://www.mysite.com/blog/syndication.axd\");\nXElement node = doc.Descendants(\"item\").FirstOrDefault();\nstring text = node.Element(\"title\").Value;\nstring uri = node.Element(\"link\").Value;\n</code></pre>\n\n<p>The code always worked fine. This week I added ELMAH.MVC via NuGet as a Package Reference. As soon as I deploy the web.config file with the added ELMAH sections, I get the following error:</p>\n\n<pre><code>System.Web.HttpException (0x80004005): Error executing child request for handler \n'System.Web.Mvc.HttpHandlerUtil+ServerExecuteHttpHandlerAsyncWrapper'. \n---&gt; System.Net.WebException: The remote server returned an error: (500) Internal Server Error.\n   at System.Net.HttpWebRequest.GetResponse()\n   at System.Xml.XmlDownloadManager.GetNonFileStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)\n   at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)\n   at System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)\n   at System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)\n   at System.Xml.Linq.XDocument.Load(String uri, LoadOptions options)\n</code></pre>\n\n<p>If I put the old web.config file back, the error goes away.</p>\n\n<p>Any idea why adding ELMAH would cause XDocument.Load to fail?</p>\n"},{"tags":["asp.net","asp.net-mvc","windows-phone-8"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13185671,"title":"How to make WP8 emulator access ASP.NET debug server","body":"<p>Is it possible to get the WP8 emulator to access a ASP.NET Development debug server I run on my pc?</p>\n\n<p>WP8 Emulator runs inside Hyper-V and the debug server on my pc is therefore not accessible to the emulator, is it possible to do so it is?</p>\n\n<p>Only solution I can come up with is create a IIS server on my machine and debug that, but its much easier running development server. </p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13185193,"title":"Dynamically generate URL from Database in ASP.NET MVC?","body":"<p>Hello to all developers,</p>\n\n<p>I am trying to find some example of Dynamically generate URL(PURL).\nI have seen one software which generate personalised URL from MySQL database .\nThe only thing is that software is using PHP to generate URL and as a .NET developer I dont know about php. \nMy question is is there a way that I can fetch data from data base and using perticular field i can generate url which is not actually store in my web space..</p>\n\n<pre><code>eeg.\n-----database-----\n\nfirstname  |  lastname .... \n=========================== \nxyz            abc\npqwert         qweoiuy \nalfa           beta\n</code></pre>\n\n<p>the URL should be like </p>\n\n<p><code>http://something.com/somepersonal/xyz_abc.aspx</code> </p>\n\n<p><code>http://something.com/somepersonal/pqwert_qweoiuy.aspx</code></p>\n\n<p><code>http://something.com/somepersonal/alfa_beta.aspx</code></p>\n\n<p>It is something like personalised page for users or clients.\nI have template to use as back page but dont know how to plug and dynamically generate URL..</p>\n"},{"tags":["asp.net-mvc","azure","simplemembership"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13185074,"title":"How to get error details on Azure Web site","body":"<p>I'm new to Azure. Does anybody know how get detailed error message on website deployed to Azure web?</p>\n\n<p>I added <code>SimpleMembership</code> to website and now Registration and Login (Post) are showing</p>\n\n<blockquote>\n  <p><em>Sorry, an error occurred while processing your request.</em></p>\n</blockquote>\n\n<p>I'm connecting to DB on my home computer (no problem with connection).</p>\n\n<p><code>LogFiles</code> folder on azure ftp server has some files but I don't see how to use this information. I wish I can get YellowScreen on azure...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":812,"score":6,"question_id":9513750,"title":"ASP.NET MVC + WebForms - route conflict","body":"<p>I'm building a simple report Web app for rendering reports using ASP.NET MVC3 + WebForms. The reports themselves are rendered by the ReportViewer ASP.NET WebForms control, but I'd like use ASP.NET MVC to create the parameter entry. </p>\n\n<p>I'd like to have that all requests follow the default routing scheme of '~/{controller}/{action}/{parameters}', except requests for <code>~/Report</code>, which should go to the report rendering WebForm. What's the right way to do this?</p>\n\n<p>Expanding a bit..</p>\n\n<p>I have two routes in <code>Global.asax.cs</code> - the default one and one for the WebForms page.</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n    );\n\n    routes.MapPageRoute(\"report-rendering\", \"Report\", \"~/Render.aspx\");\n}\n</code></pre>\n\n<p>The URLs get rendered fine, but the problem with this is that when the request comes in, the first route also eats the URLs for the second one, i.e. <code>~/Report?id=7</code> tries to call the <code>Index</code> method on the <code>ReportController</code> (which doesn't exist). </p>\n\n<p>If I change it so that the 'report-rendering' route comes before the 'Default' route, like so:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    routes.MapPageRoute(\"report-rendering\", \"Report\", \"~/Render.aspx\");\n\n    routes.MapRoute(\n        \"Default\", // Route name\n        \"{controller}/{action}/{id}\", // URL with parameters\n        new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n    );\n}\n</code></pre>\n\n<p>Now calls to the Html.ActionLink() render incorrect URLs, i.e.</p>\n\n<pre><code>`@Html.ActionLink(\"Report list\", \"Index\", \"ReportList\")`\n</code></pre>\n\n<p>Renders </p>\n\n<pre><code>`http://localhost:49910/Report?action=Index&amp;controller=ReportList`\n</code></pre>\n\n<p>My current workaround puts the 'Default' route first, while adding a regex constraint to ignore requests for the 'Report' controller, like so:</p>\n\n<pre><code>routes.MapRoute(\n    \"Default\", // Route name\n    \"{controller}/{action}/{id}\", // URL with parameters\n    new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, // Parameter defaults\n    new { controller = @\"(?!report$).*\" }\n);\n</code></pre>\n\n<p>This doesn't feel clean. Again, What's the right way of doing this?</p>\n\n<p>Also, I haven't yet decided how I'll pass the parameters to the rendering form: I could use both query parameters or POST them. I'm guessing that query params are more flexible. What's the best practice here?</p>\n\n<p>EDIT: </p>\n\n<p>While researching the answer by @LeftyX, seems like I've found an answer. To quote P. Haack from his Routing chapter in the <a href=\"http://rads.stackoverflow.com/amzn/click/1118076583\" rel=\"nofollow\">Professional ASP.NET MVC 3</a> (Named Routes, Chapter 9, page 233):</p>\n\n<blockquote>\n  <p>... <em>Use names for all your routes and\n  always use the route name when generating URLs</em>. Most of the time, letting Routing sort out which\n  route you want to use to generate a URL is really leaving it to chance, which is not something that\n  sits well with the obsessive-compulsive control freak developer. When generating a URL, you generally\n  know exactly which route you want to link to, so you might as well specify it by name.</p>\n</blockquote>\n\n<p>The mentioned section discusses a very similar situation to the one I described. </p>\n\n<p>But since <code>Html.ActionLink()</code> doesn't have an overload with the route name parameter, does this mean I cannot reliably use it anywhere in the entire app if have a route like this?</p>\n"},{"tags":["asp.net-mvc","entity-framework","web-config","connection-string"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":13093754,"title":"MVC3 Entity Connection string disappearing","body":"<p>I am having a very frustrating problem with my current project. It is continually losing the connection string binding for Entity models.</p>\n\n<p>I have multiple models for different databases in separate areas and was having no problems. Suddenly now whenever I try to update from the database I get the connection string setup prompt. I select for it to add it to the Web.config with the password but it doesn't ever pick it up there again. They all are still in the web config but it just doesn't see them.</p>\n\n<p>If I remove all the connection strings from the config file it will write the new one there. Then when I try to set up a Stored procedure/Function Import, I still get the statement in the lower box:</p>\n\n<pre><code>No database connection has been configured for this model.\n</code></pre>\n\n<p>I have tried rebuilding the project and creating the models again from scratch and that works for a while. When I try and bring the project in under Perforce source control, it winds up getting re-corrupted &amp; the connection string goes away. It affects all of my models too.</p>\n\n<p>I am also using EF 4.x DbContext Generator to create context files. They work fine. I am also able to run the application and it connects to the database just fine and returns data. No issues there. I am just unable to update Entity Complex types from the DB or import any more stored procedures. </p>\n\n<p>An even weirder occurrence was that I opened a broken project from a different directory then opened an uncorrupted copy it instantly became broken also. Contagious! </p>\n\n<p>Any thoughts on where to look into to see why this is happening? Has anyone else had this issue?</p>\n"},{"tags":["asp.net-mvc","runtime-error"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13184801,"title":"Runtime Error after changing file path","body":"<p>So I have a link that once clicked opens a pdf file. I had another format and i converted it to a pdf. I then changed the path from the old pdf to the knew pdf and now whenever i try to access a page that contains this pdf link I get the Runtime Error page and <code>&lt;customeErrors mode = \"Off\"/&gt;</code> Not really sure how changing the file path affects the overall access page that has the pdf file as a link to click and open. Any insight will be appreciated. </p>\n\n<p>This is the line where i added the path for the new pdf file:</p>\n\n<pre><code>&lt;li class=\"nomove\"&gt;&lt;a href=\"pdfs/KVFlipBook2012Rev.pdf\" target=\"_blank\"&gt;Children w/Special Medical Needs&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>This is my web.config file:</p>\n\n<pre><code>&lt;configuration&gt;\n&lt;connectionStrings&gt;\n    &lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnetdb.mdf;User Instance=true\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n&lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n        &lt;assemblies&gt;\n            &lt;add assembly=\"System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n            &lt;add assembly=\"System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089\" /&gt;\n        &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;authentication mode=\"Forms\"&gt;\n        &lt;forms loginUrl=\"~/Account/Login.aspx\" timeout=\"2880\" /&gt;\n    &lt;/authentication&gt;\n    &lt;membership&gt;\n        &lt;providers&gt;\n            &lt;clear /&gt;\n            &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt;\n        &lt;/providers&gt;\n    &lt;/membership&gt;\n    &lt;profile&gt;\n        &lt;providers&gt;\n            &lt;clear /&gt;\n            &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n        &lt;/providers&gt;\n    &lt;/profile&gt;\n    &lt;roleManager enabled=\"false\"&gt;\n        &lt;providers&gt;\n            &lt;clear /&gt;\n            &lt;add name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt;\n            &lt;add name=\"AspNetWindowsTokenRoleProvider\" type=\"System.Web.Security.WindowsTokenRoleProvider\" applicationName=\"/\" /&gt;\n        &lt;/providers&gt;\n    &lt;/roleManager&gt;\n&lt;customErrors mode=\"Off\"/&gt;\n&lt;/system.web&gt;\n&lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p></p>\n"},{"tags":["asp.net","ajax","asp.net-mvc","json"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13183794,"title":"How to return errors or notifications from JSON Action method to Ajax forms?","body":"<p>Let's say we have a standard Ajax form with the following Syntax:</p>\n\n<pre><code>  @using(Ajax.BeginForm(\"AddCityJson\", \"City\",new AjaxOptions\n        {\n            HttpMethod = \"post\",\n            OnSuccess = \"JScriptOnSuccess();\",\n            OnFailure = \"JScriptOnFailure\"\n        }))\n    {\n     ...form fields go here...   \n     }\n</code></pre>\n\n<p>A simple form that gathers some information about a city, submits and saves it.</p>\n\n<p>On the controller side we receive the info. If everything went well we return true in order for OnSuccess AjaxOption to trigger and if failed false is returned:</p>\n\n<pre><code>public JsonResult AddCityJson(Formcollection collection)\n{\n var city = new City\n {\n  ...populate city fields from passed in collection\n }\n var cityRepository = new CityRepository;\n city = cityRepository.SaveOrEdit(city);\n\n if(city==null)\n {return Json(false)} \n\n return Json(true);\n\n}\n</code></pre>\n\n<p>Inside of the controller AddCityJson method I need to add various checks. Possibly to check if the city name already exists or any other validation and if I ran into an Error or a Warning return it back to UI.</p>\n\n<p>How can I pass any error/warning messages up to UI if my Ajax form expects to get back ajax true or false and whether that post was successful?</p>\n\n<p>I would like to avoid using ViewData, ViewBags.\nThank you.</p>\n"},{"tags":["asp.net-mvc","entity-framework-4","dataannotations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13183647,"title":"Date range validation with Entity Framework 4 data annotations","body":"<p>I am using Entity Framework 4 to provide the model for a ASP.NET MVC3 / Razor2 web application. I am using DataAnnotations to implement validation. I need to limit some dates to the range accepted by the SQL smalldatetime type. </p>\n\n<p>My problem is that I can't get the RangeAttribute to work correctly for a date field. The model metadata definition for the field in question is:</p>\n\n<pre><code>    [Display(ResourceType = typeof(Resources.Patient), Name = \"DateOfBirth_Name\")]\n    [DisplayFormat(DataFormatString = \"{0:d}\", ApplyFormatInEditMode = true)]\n    [DataType(DataType.Date)]\n    [Range(typeof(DateTime), \"01/01/1900\", \"06/06/2079\", ErrorMessageResourceType = typeof(Resources.Patient), ErrorMessageResourceName = \"DateOfBirth_Range\")] \n    public System.DateTime DateOfBirth { get; set; }\n</code></pre>\n\n<p>With this code, whatever value I put into the date field, it is treated as invalid by the application. In case its' relevant, I am using the JQuery-UI date picker with the field in question as well.</p>\n\n<p>Can anyone help please?</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13175040,"title":"How to bind kendo mvc ui dropdownlist dynamically","body":"<p>I am working on asp.net mvc with Kendo UI mvc. I have two kendo dropdown lists. one for list of clinics and another of list of patients in selected clinic. But there is no direct relationship between clinic and patient to use the cascading dropdownlist. for that i have used ajax calls in dropdownlist change event and get list of patients. and this is my first dropdownlist for list clinics</p>\n\n<pre><code> @(\n  Html.Kendo().DropDownList()\n  .Name(\"ddlClinics\")\n  .Events(e=&gt;e.Change(\"ChangeClinic\"))\n  .BindTo(new SelectList((List&lt;Account.Entities.Clinic&gt;)ViewBag.lstClinic,\n \"ClinicID\", \"ClinicName\")))\n</code></pre>\n\n<p>and this is my second dropdownlist for listpatients</p>\n\n<pre><code>@(\n Html.Kendo().DropDownList()\n.Name(\"ddlPatients\")\n.BindTo(new SelectList((List&lt;Patient&gt;)ViewBag.Patients, \n\"PatId\", \"PatName\"))))\n</code></pre>\n\n<p>I want to dynamically bind the list of patients to second dropdownlist when the first dropdownlist changes,</p>\n\n<pre><code>function ChangeClinic()\n{\n$.ajax({\nurl: '/Messages/GetPatient',\n type: 'Post',\n data: { email: '@User.Identity.Name' },\n cache: false,\n success: function (result) {\n var ddlPatients = $('#ddlPatients').data('kendoDropDownList');\n var main = [];\n $.each(result, function (k, v) {\n main.push({ \"PatId\": v.PatId, \"PatName\": v.PatName });\n  });\n  ddlPatients.dataTextField = \"PatName\";\n  ddlPatients.dataValueField = \"PatId\";\n  ddlPatients.dataSource.data(main);\n  ddlPatients.reload();\n }\n });\n}\n</code></pre>\n\n<p>i am able to bind the list to dropdownlist but all items are shows as <strong>'undefined'</strong>. so please guide me.</p>\n"},{"tags":["jquery","asp.net-mvc","treeview"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":35,"score":-2,"question_id":13184198,"title":"Where can I find a decent jquery for treeview in mvc","body":"<p>I am looking for a treeview plugin for asp.net mvc.\nI have found a plugin. <a href=\"http://jquery.bassistance.de/treeview/demo/\" rel=\"nofollow\">http://jquery.bassistance.de/treeview/demo/</a></p>\n\n<p>But generating the markup for this plugin isnt easy.\nIs there any other plugin available?</p>\n"},{"tags":["asp.net-mvc","ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1031,"score":0,"question_id":2686073,"title":"Ajax.BeginForm return result and show data appropriate","body":"<p>I have a from on my page as follows:</p>\n\n<pre><code>    &lt;% using (Ajax.BeginForm(\"AddAnswer\",\"Marketplace\",new AjaxOptions() \n{HttpMethod = \"POST\" })){ %&gt;\n</code></pre>\n\n<p>AddAnswer action adds some data to db. What I want to do is: when answer has been successfully added, append #answers div with the current answer passed to controller. When answer has not been successfully added to db - I would like to display appropriate error in #errors div. How can I do this?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13184197,"title":"Publish new MVC4 Project, get cannot drop database error","body":"<p>MVC4 application when running/debugging in visual studio works great.  When I publish it, I get an error that it cannot Drop the database, I am using Code First for the first time so I'm not entirely sure how to go about fixing, connection is like so:</p>\n\n<pre><code>&lt;add name=\"DefaultConnection\" connectionString=\"Data Source=(LocalDb)\\v11.0;Initial Catalog=aspnet-Storyboard-20120822163932;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnet-Storyboard-20120822163932.mdf\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>And I expect the line that causes the issue is this definition:</p>\n\n<pre><code>public class StoryboardDbInitializer : DropCreateDatabaseAlways&lt;StoryboardDb&gt;\n</code></pre>\n\n<p>The only thing I have noticed is that App_Data folder is not published as well, but copying this over made no difference, what am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","form-data"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13184015,"title":"Data being sent as query string instead of Form data","body":"<p>In my form I see that the data is being sent as Querystring instead of form data (that I expect it to).</p>\n\n<p>My page:</p>\n\n<pre><code>@using (Html.BeginForm(\"AAForm\", \"Test\", FormMethod.Post, new { id = \"myAForm\" }))\n{\n   &lt;label for=\"a\"&gt;A&lt;/label&gt;\n   &lt;input id=\"aid\" name=\"aname\" style=\"width: 300px\" required validationMessage=\"Select\"/&gt;\n   &lt;button type=\"submit\" class=\"btn btn-primary\" value=\"aa\" &gt; Go &lt;/button&gt;\n   }\n</code></pre>\n\n<p>ControllerSignature</p>\n\n<blockquote>\n  <p>public ActionResult GetValues(FormCollection formCollection){\n  //Some code }</p>\n</blockquote>\n\n<p>And I am making an AJAX call to GetValues().</p>\n\n<p>What could I be doing wrong? Pls let me know if I should be posting more information.</p>\n\n<p>Another question: What is \"_:\" in the query string? And it has some random number value.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","json"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13183658,"title":"Formatting JSON in ASP.NET MVC","body":"<p>I want to return a JSON from ASP.NET MVC ActionResult type method that looks something like this:</p>\n\n<pre><code>{\n     success: true,\n     users: [\n    {id: 1, FileName: 'Text22'},\n    {id: 2, FileName: 'Text23'}\n    ]\n}\n</code></pre>\n\n<p>How would I format it? Right now I have something like this</p>\n\n<pre><code>Return Json(New With {Key .success = \"true\", Key .users = responseJsonString}, JsonRequestBehavior.AllowGet)\n</code></pre>\n\n<p>Edit: I am using VB.NET but answers in C# are fine too.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13181900,"title":"This webpage has a redirect loop in Global.asax","body":"<p>The Goal is to redirect all users to my custom Security Page on each httpRequest as long as the Session variable is null or empty.</p>\n\n<p>In Global.asax</p>\n\n<p>The method causes an error as follows:</p>\n\n<p>This webpage has a redirect loop\nThe webpage has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer.</p>\n\n<pre><code>protected void Application_PostAuthorizeRequest()\n{\n  if ((Session[\"SecurityCodeApproved\"] == null || !(bool)Session[\"SecurityCodeApproved\"]))\n  {\n    Response.RedirectToRoute(\"Security\");\n  }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13183393,"title":"Access a Razor View from another project","body":"<p>I have a MVC project that is using Razor Views for my website.  One of my projects, lets call it project1 is complete and in use.</p>\n\n<p>I would like to access a view in project1 from project2 so that I do not have to maintain both screen.</p>\n\n<p>They are both in the same solution.</p>\n\n<p>I cannot change project1 since it is already in use by our customers. I looked at the Razor Single File Generator but that is quite drastic for 1 screen and I cannot change project1 that is in use already.</p>\n\n<p>How do I reference the view from project1 in my project2?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","dataannotations","appharbor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13180751,"title":"How to publish an MVC 4 application which has DataAnnotationsExtensions to AppHarbor?","body":"<p>I have a project wich is referencing DataAnnotationsExtensions and DataAnnotationsExtensions.ClientValidation, eventhough the path is set to the bin folder, when I try to publish it in AppHarbor it gave me a not found error message.</p>\n\n<pre>\n    C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Microsoft.Common.targets(1578,5): \nwarning MSB3245: Could not resolve this reference. Could not locate the assembly \n\"DataAnnotationsExtensions.ClientValidation\". Check to make sure the assembly exists on disk. \nIf this reference is required by your code, you may get compilation errors. \n[D:\\temp\\jeb1ouer.ipc\\input\\Financy.Data\\Financy.Data.csproj]\n</pre>\n\n<p>What should I do to make this work?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","ext.net"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":13182757,"title":"What is the difference between .aspx and .aspx.cs?","body":"<p>I'm not new to programming but am new to Visual Studio, MVC, C#, ASP.NET, and EXT.NET, i.e. all of the tools I am trying to use. </p>\n\n<p>I am trying to create an Ext.Net 2.0 MVC4 project and was given a similar (in functionality) non-MVC project for reference. </p>\n\n<p>I see that this non-MVC project has .aspx and .aspx.cs files. It seems like the .aspx file basically maps to the \"View\" in MVC that I want to make... And the .aspx.cs file has the functions that relate to the .aspx file - so is that like the \"Controller\"? Though the .aspx file also has some functions that seem to not be entirely view-related...</p>\n\n<p>Could someone give me a quick overview or a place to start with this?</p>\n"},{"tags":["c#",".net","asp.net-mvc","security","active-directory"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":98,"score":3,"question_id":13147132,"title":"Active Directory Group Membership Checking in .Net 4.5","body":"<p>I have an ASP.Net MVC application using Windows Authentication, and I am checking group membership for security on controller actions. </p>\n\n<p>Simple as it sounds, I've found no other Question that can resolve the problem I am experiencing.</p>\n\n<h3>First Attempt: [Authorize]</h3>\n\n<p>The classic method is to simply slap an <code>Authorize</code> data annotation attribute on the controller action and go to town:</p>\n\n<pre><code>[Authorize(Roles = @\"domain\\groupName1\")]\n</code></pre>\n\n<p>No dice. I am prompted for credentials. Usually this means something is wrong with the Windows Authentication configuration but it's setup fine: (1) <code>HttpContext.User</code> is a <code>WindowsPrincipal</code> object, and (2) I confirmed another known group name works.</p>\n\n<h3>Second Attempt: IsInRole()</h3>\n\n<p>The next step taken was to go a more old fashioned route and use <code>IPrincipal.IsInRole()</code>, and again, one returns <code>false</code>, the other <code>true</code>.</p>\n\n<pre><code>var wp = (WindowsPrincipal)User;\n\n// false\nvar inGroup1 = wp.IsInRole(@\"domain\\groupName1\");\n// true\nvar inGroup2 = wp.IsInRole(@\"domain\\groupName2\");\n</code></pre>\n\n<p>Stumped... so I hit up my systems nerds and we double check everything. User is a group member? Yes. Group name is spelled correctly? Yes. The next step was to snag the SID.</p>\n\n<h3>Third Attempt: Search Identity's Group Collection</h3>\n\n<p>In my controller I check the <code>WindowsIdentity</code> and look through the group collection for the SID of the troublesome group:</p>\n\n<pre><code>var wi = (WindowsIdentity)wp.Identity;\nvar group = wi.Groups.SingleOrDefault(g =&gt; g.Value == \"group1-sidValue\");\n</code></pre>\n\n<p>The <code>group</code> variable is the <code>SecurityIdentifier</code> object. Because it is not null, we can be certain that this current user is a member of the group that both the <code>[Authorize()]</code> or <code>IsInRole()</code> attempts fail to confirm.</p>\n\n<h3>Fourth Attempt: DirectoryServices.AccountManagement</h3>\n\n<p>At this point, I'm going nuts and add reference to the AccountManagement APIs. I search the domain context for the <code>GroupPrincipal</code> by both name and SID:</p>\n\n<p>var pc = new PrincipalContext(ContextType.Domain, \"domain\");\n   var gp1byName = GroupPrincipal.FindByIdentity(pc, \"groupName1\")\n   var gp1bySid = GroupPrincipal.FindByIdentity(pc, IdentityType.Sid, \"group1-sidValue\");</p>\n\n<p>Both group principal variables are ripe with the same object, and I verified through a watch variable that the principal's <code>Members</code> collection contains a <code>UserPrincipal</code> object with the same SID as the current <code>WindowsPrincipal</code> on <code>HttpContext</code>.</p>\n\n<h3>Question:</h3>\n\n<p>What in the hell have I missed here? Why would both role checking methodologies fail when it is plain and clear through object exploration that the user is a valid member of this given group? </p>\n\n<p>The fact that one group checks fine and the other does not seems the most strange part at this point.</p>\n\n<p>Please help.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13182421,"title":"Disable username validation on edit","body":"<p>I created my validation for unique username and now I can't edit my user. It's saying that username is already taken which makes sense since it's taken by the user that I'm trying to edit. I don't even want to edit username but because of this error I cannot edit any other field as well.</p>\n\n<p><strong>How can I disable unique username validation for my EDIT action?</strong></p>\n\n<p>Validator</p>\n\n<pre><code>public override bool IsValid(object value)\n{\n    if (value == null) return false;\n    FinanceDataContext _db = new FinanceDataContext();\n    var user = _db.Users.ToList().Where(x =&gt; x.Username.ToLower() == value.ToString().ToLower()).SingleOrDefault();\n    if (user == null) return true;\n    return false;\n}\n</code></pre>\n\n<p>Action</p>\n\n<pre><code>[HttpPost]\n[ValidateAntiForgeryToken]\npublic ActionResult Edit(User u)\n{\n    // Get user we want to edit\n    var user = _db.Users.Where(x =&gt; x.ID == u.ID).SingleOrDefault();\n    if (user == null) return HttpNotFound();\n\n    // Set values and save changes\n    user.Address = u.Address;\n    if (!string.IsNullOrEmpty(u.Password)) user.Password = Infrastructure.Encryption.SHA256(u.Password);\n    _db.SaveChanges(); // validation error\n\n    return null;\n}\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>public class User\n{\n    public int ID { get; set; }\n\n    [Required]\n    [UniqueUsername(ErrorMessage = \"Username is already taken\")]\n    public string Username { get; set; }\n\n    [Required]\n    public string Password { get; set; }\n\n    public string Address { get; set; }\n}\n</code></pre>\n\n<p>Error</p>\n\n<blockquote>\n  <p>Validation failed for one or more entities. See\n  'EntityValidationErrors' property for more details.</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","textarea"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13182296,"title":"how to forbid resizing of TextArea.For in ASP.NET MVC 2?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5235142/how-to-disable-resizable-property-of-textarea\">How to disable resizable property of TextArea?</a>  </p>\n</blockquote>\n\n\n\n<p>i want to disable using of resizing in TextArea.For in my webapplication.\nin google chrome and other browser its looks terrible.\nhow can i do it?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":4157,"score":1,"question_id":7319238,"title":"loading partial view containing javascript - asp.net mvc","body":"<p>In one of my View pages I have a asp.net mvc PartialView. The PartialView contains some javascript (and jquery). In my asp.net main View I load the PartialView using ajax, within a div tag, in way given below. That is, from controller I return PartialView(\"_DonorEdit\") and in my main page I use javascript to replace the content of the div tag with the PartialView response.</p>\n\n<pre><code>&lt;div class=\"content\" id=\"content\"&gt;\n    @{Html.RenderPartial(\"_DonorEdit\");}   \n&lt;/div&gt;\n</code></pre>\n\n<p>Everything works fine except the javascript contained in the partialView (_DonorEdit). Thus the question boils down to - How do I have javascript embedded in an div tag and still get it working correctly.</p>\n\n<p>regards,\nNirvan.</p>\n\n<p>Edit:\nThis problem occurs only when the partial view is returned from the ajax call. In the above code, if I directly include the PartialView (on non-ajax request), then the javascript works properly. But if I later replace the content of div using ajax request, the javascript included in PartialView does not work. The embedded javascript simply does not appear along with the Partial View. So there seems to be some other reason, why the javascript embedded in Partial View does not get passed to browser after the ajax request success.</p>\n\n<p>Edit2: The part of my javascript code</p>\n\n<pre><code>&lt;script type=...&gt;\n//Date Picker. This works. I get Calendar popup as expected\n\n$(document).ready(function () {\n    $(\"#Donor_BirthDate\").datepicker({\n        dateFormat: \"dd-mm-yy\",\n        changeMonth: true,\n        changeYear: true,\n        yearRange: \"-75:+0\"\n    });\n\n    $(\"#Donor_DateLastDonated\").datepicker({\n        dateFormat: \"dd-mm-yy\",\n        changeMonth: true,\n        changeYear: true,\n        yearRange: \"-20:+1\"\n    });\n});\n\n\n//Dropdown handler. Does not make it in my final View.\n\nfunction residenceStateChanged(e) {\n    var url = '@Url.Action(\"_GetCities\", \"DropDown\")';\n    var cmbResidenceCityId = $('#ResidenceCityId').data('tDropDownList');\n    cmbResidenceCityId.loader.showBusy();\n\n    $.ajax({\n        type: 'GET',\n        url: url,\n        data: { StateId: e.value, AddSelectOption: true, SelectOption: 'Select' },\n        traditional: true,\n        success: function (resp, textStatus, jqXHR) {\n            cmbResidenceCityId.dataBind(resp);\n            cmbResidenceCityId.select(0);\n            cmbResidenceCityId.trigger.change();\n        },\n        error: function (jqXHR, textStatus, errorThrown) {\n            alert(jqXHR.responseText);\n        },\n        complete: function () {\n            cmbResidenceCityId.loader.hideBusy();\n        }\n    });\n}\n\n....//Some other code omitted. Does not make it in final view.\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13182602,"title":"Is NopCommerce only usable with Javascript enabled?","body":"<p>In the demo shop (<a href=\"http://demo.nopcommerce.com\" rel=\"nofollow\">http://demo.nopcommerce.com</a>/) I cant use some essential buttons like \"Add To Cart\" or  \"Submit\" (Newsletter) if I dont have Javascript enabled.</p>\n\n<p>Is this just a frontend design issue, or are parts of the shop not implemented for use without javascript enabled?</p>\n"},{"tags":["asp.net-mvc","restsharp","windows-phone-8"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13181417,"title":"Cant connect to local MVC 4 api server with WP8 emulator","body":"<p>I have a little game project that uses a MVC 4 api server, however since I installed windows 8 / VS12 / WP8 SDK I havent been able to access the server from my app in the emulator, I can however access the deployed webserver.</p>\n\n<p>Is there some sort of default firewall that would prevent me from contacting a localhost server? I just get a NotFound exception when I try, the localhost server works fine in my browser to retrieve some xml object</p>\n\n<p>I have the same code working in windows 7 with vs2010 and wp7 sdk.</p>\n\n<p>To connect to the server I use <a href=\"http://restsharp.org/\" rel=\"nofollow\">http://restsharp.org/</a></p>\n"},{"tags":[".net","asp.net-mvc","routing","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13182166,"title":"How to prevent not found error when image doesn't exist in .NET MVC","body":"<p>I have an MVC application and my error handling is set up like this in web.config:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/Error/\" redirectMode=\"ResponseRedirect\"&gt;\n    &lt;error statusCode=\"404\" redirect=\"~/Error/NotFound/\" /&gt;\n&lt;/customErrors&gt;\n</code></pre>\n\n<p>Every time a request for non existing image comes my NotFound action on Error controller is being hit, and I get an error <code>The controller for path '/img/home/myimg.jpg' was not found or does not implement IController.</code> logged.</p>\n\n<p>I added <code>RouteTable.Routes.IgnoreRoute(\"img/\");</code> to my <code>Global.asax</code> but it doesn't help. \nHow can I make MVC to ignore all requests to any files?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13178983,"title":"How do i run ASP.NET MVC 4 with a custom Membership Provider for MySQL?","body":"<p>I have run some mvc 3 applications with custom memberships but for ASP.NET MVC 4 i can not find any example how i do a custom membership provider with MySQL.</p>\n\n<p>Not any example for custom membership i can find, do anyone has any idea?</p>\n"},{"tags":["asp.net-mvc","authentication","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13181074,"title":"MVC authentication and authorization","body":"<p>I am using MVC 4 and am using Forms authentication.  I have heard that MVC has it's own implementation of authentication and authorization but am not sure what it is and how to use it.  What is MVC's implementation called and is it easy to migrate from forms to use it instead?</p>\n"},{"tags":["sql-server","asp.net-mvc","sql-server-express","database-migration"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13180464,"title":"Migrate MVC4 JQuery Mobile App Database to Hosting Provider Questions","body":"<p>I am new to MVC4 &amp; SQL server and don't understand some things. I've asked\nquestions at my web hosting provider, but I can't seem to get an answer.</p>\n\n<p>I have developed an application on my PC it uses VS2012 MVC4 4.5 JQuery Mobile\ntemplate with an SQL Express database</p>\n\n<p>I have uploaded the project to the hosting environment and I need to get the\ndatabase portion of the project working. Everything works in the project except\nfor when I try to access the database (this happens when I try to log in and\nthe authentication process fails - because the DD has not been connected). I.e.,\nI have no idea how to do this part.</p>\n\n<p>I have done some research, and here is what I have found out:</p>\n\n<p>1) I need to \"back-up\" my SQL express mdf and ldf files.</p>\n\n<hr>\n\n<p>Is this true? And, how do I do this? </p>\n\n<p>2) I need to then restore the SQL Express .mdf &amp; .ldf files on the webserver.</p>\n\n<hr>\n\n<p>Is this correct? Any help on this question would be great.</p>\n\n<p>3) I understand I have to change my connection string. I'm sure what it's supposed to be.</p>\n\n<hr>\n\n<pre><code>&lt;connectionStrings&gt;\n &lt;add name=\"DefaultConnection\" providerName=\"System.Data.SqlClient\"  \n    connectionString=\"Data Source=(LocalDb)\\v11.0;Initial Catalog=aspnet-MvcDealerConn-\n    20121005200308;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\\aspnet-\n     MvcDealerConn-20121005200308.mdf\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>4) What version of SQL Server should I use? v11.0? I.e., what will work?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","textbox","passwords"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13181156,"title":"ASP.NET MVC3: Is it possible to make @Html.TextBoxFor text to be hidden","body":"<p><br>\nWould it be possible to make <code>@Html.TextBoxFor(m =&gt; EmployeeID)</code>, text in the view to be hidden, when typed in. The same functionality as <code>@Html.PasswordFor</code>. There are reasons why I cannot use PasswordFor.</p>\n\n<p><br><br>\nI want the same functionality from my previous post.<br>\n<a href=\"http://stackoverflow.com/questions/13179440/asp-net-mvc3-htmlpasswordfor-how-to-make-it-not-reset-after-post-methods\">ASP.NET MVC3 HtmlPasswordFor how to make it not reset after post methods</a></p>\n\n<p>EDIT</p>\n"},{"tags":["html","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12973260,"title":"Generate multi level customer receipt for order","body":"<p>My target is to generate a view for customer receipt which they will get after they submit an order. The receipt should contain all  the food items they order. Each food item can contain multiple sub items.</p>\n\n<p>Model is returning data like below;</p>\n\n<p><img src=\"http://i.stack.imgur.com/uwnsy.png\" alt=\"enter image description here\"></p>\n\n<p>if you see carefully, those who have parentitemid are sub items. and they should be shown under their parent item.</p>\n\n<p>The target should look like as below;</p>\n\n<p><img src=\"http://i.stack.imgur.com/vGc33.png\" alt=\"enter image description here\"></p>\n\n<p>Now the problem is i have tried many things (i.e. if-else inside the foreach and etc)\nbut did not get this view.</p>\n\n<p>Will it be possible to generate such view from this kind of data ??\nCan anyone help me out with some idea plzzz !</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have some progress..here how it looks now..\n<img src=\"http://i.stack.imgur.com/LTSLn.png\" alt=\"enter image description here\"></p>\n\n<p>Now, how would i show the price of sub item under the main item...??</p>\n\n<p>here is my code</p>\n\n<pre><code>&lt;%foreach (var i in Model.OrderItems)\n      { %&gt;\n      &lt;tr&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;1&lt;/td&gt;\n        &lt;td style=\"width:40%;\"&gt;&lt;%:i.fiitemName%&gt;\n        &lt;br /&gt;\n        &lt;table style=\"margin-left:10px;\"&gt;\n            &lt;%foreach (var k in Model.getOrderSubItems(\"36-171012-2\", i.fiID))\n              { %&gt;\n\n                    &lt;tr style=\"height:30px;\"&gt;\n                        &lt;td style=\"width:100px;\"&gt;&lt;%:k.FoodItemName %&gt;&lt;/td&gt;\n                        &lt;td style=\"width:100px;\"&gt;&lt;%:k.SubItemPrice %&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n           &lt;%} %&gt;\n           &lt;/table&gt;\n        &lt;/td&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;&lt;%:i.msize%&gt;&lt;/td&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;&lt;%:i.ItemNote %&gt;&lt;/td&gt;\n        &lt;td style=\"vertical-align:top;\"&gt;&lt;%:i.mprice%&gt;&lt;/td&gt;\n\n      &lt;/tr&gt;\n\n    &lt;%} %&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","security","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13179440,"title":"ASP.NET MVC3 HtmlPasswordFor how to make it not reset after post methods","body":"<p><br>\nEssentially I have a HtmlPasswordFor(m => EmployeeID), I have a button called \"Go\". Once I hit the Go textbox, I actually do not want the password to disappear on the or have the field password to be cleared. <br>\nHow would I do this?<br><br><br>\nBEFORE\n<img src=\"http://i.stack.imgur.com/vOzfF.png\" alt=\"enter image description here\">\n<br><br><br>\nAFTER\n<img src=\"http://i.stack.imgur.com/JggyK.png\" alt=\"enter image description here\"> \nI do not want the my employeeid to reset. I want to keep the passwords in <em>*</em>*'s, but I'll need the password on my next post call.\n<br><br></p>\n\n<h2>Controller</h2>\n\n<pre><code>    [HttpGet]\n    public ActionResult MainForm()\n    {\n        var model = new VTViewModel();\n        return View(model);\n    }\n\n    [HttpPost]\n    public ActionResult MainForm(VTViewModel model, string buttontype)\n    {\n        if (ModelState.IsValid)\n        {\n            string EmployeeID = (Convert.ToInt64(model.EmployeeBinaryID, 2)).ToString();\n            if (buttontype == \"Go\")\n            {\n                // GET Fields depending on the serial number.\n\n                model.ListFields = logic_model.getFormInfo(model.SerialNumber, EmployeeID);\n                if (model.ListFields[0].return_num == \"0\")\n                {\n                    model.Go = true;\n                    // Set Process\n                    // Set Header Token\n                    // Set Header Title\n\n                    ViewData[\"HEADER\"] = model.ListFields[0].HeaderName + \" | \" + model.ListFields[0].TubeType + \" | \" + model.ListFields[0].ProductLine;\n                }\n                else\n                {\n                    model.DisplayMessage = helper.checkErrors(model.ListFields[0].return_num);\n                }\n            }\n            else if (buttontype == \"Submit\")\n            {\n                model.HeaderToken = model.ListFields[0].HeaderToken; \n                string header = model.HeaderToken;\n                string check = \"\";                                                        \n                string return_num = model.ListFields[0].return_num; \n                // If the submission worked\n\n                //SUBMIT HERE INTO DB then Clear\n                List&lt;string&gt; values_to_submit = new List&lt;string&gt;(); // Creates a list to store the values to submit\n                for (int i = 0; i &lt; model.ListFields.Count; i++)\n                {\n                    // Fills in the hidden values.\n                    if (model.ListFields[i].isHidden)\n                    {\n                        if (model.ListFields[i].Token == \"SNT\" || model.ListFields[i].Token == \"SNC\")\n                        {\n                            model.ListFields[i].Value = model.SerialNumber;\n                        }\n                        else if (model.ListFields[i].Token == \"USR\")\n                        {\n                            model.ListFields[i].Value = EmployeeID;\n                        }\n                        else if (model.ListFields[i].Token == \"TMS\")\n                        {\n                            model.ListFields[i].Value = \"0\";\n                        }\n                    }\n\n                    // If it is a check box do the right conversion.\n                    if (model.ListFields[i].DataType == \"DATA-CKBOX\")\n                    {\n                        //string convertedValue = helper.trueFalseStringtToIntBool(model.ListFields[i].Value);\n                        string convertedValue = helper.boolToInt(model.ListFields[i].BoolValue).ToString();\n                        model.ListFields[i].Value = convertedValue;\n                    }\n\n                    values_to_submit.Add(model.ListFields[i].Token + model.ListFields[i].Value);\n\n                }\n\n                check = logic_model.helperSubmit(values_to_submit, header, 1);\n\n\n\n                if (check == \"Submitted\")\n                {\n                    ModelState.Clear();\n                    VTViewModel clear_model = new VTViewModel(); // Creates an empty model\n                    clear_model.DisplayMessage = \"Submitted\\n\" + model.SerialNumber + \"\\n\" + DateTime.Now;\n                    return View(clear_model);\n                }\n                else\n                {\n                    model.DisplayMessage = check; // Sets the display message to the error.\n                }\n\n            }\n            else if (buttontype == \"Clear\")\n            {\n                // Clears the screen and model\n                ModelState.Clear();\n                VTViewModel clear_model = new VTViewModel(); // Creates an empty model\n                return View(clear_model);\n            }\n        }\n        return View(model);\n\n    }\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>    div&gt;\n         &lt;fieldset&gt;\n         &lt;table id=\"main_table\"&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.LabelFor(m =&gt; m.SerialNumber)&lt;/td&gt;\n                    &lt;td&gt;@Html.LabelFor(m =&gt; m.EmployeeBinaryID)&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;@Html.TextBoxFor(m =&gt; m.SerialNumber)&lt;/td&gt;\n                    &lt;td&gt;@Html.PasswordFor(m =&gt; m.EmployeeBinaryID, new { autocomplete = \"off\" }) &lt;/td&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;&lt;td&gt;&lt;input type=\"submit\" value=\"Go\" name=\"buttontype\" class=\"submit_button\" id=\"btn\"/&gt;&lt;br /&gt;&lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;\n         &lt;/table&gt;\n         &lt;/fieldset&gt;\n         &lt;br /&gt; \n</code></pre>\n\n<p><br><br>\nThanks</p>\n"},{"tags":["asp.net","asp.net-mvc","authentication","asp.net-membership","authorization"],"answer_count":6,"favorite_count":49,"up_vote_count":25,"down_vote_count":0,"view_count":6790,"score":25,"question_id":4837103,"title":"ASP.NET MVC - Alternative to Role Provider?","body":"<p>I'm trying to avoid the use of the Role Provider and Membership Provider since its way too clumsy in my opinion, and therefore I'm trying to making my own \"version\" which is less clumsy and more manageable/flexible. Now is my question.. is there an alternative to the Role Provider which is decent? (I know that I can do custom Role provier, membership provider etc.)</p>\n\n<p>By more manageable/flexible I mean that I'm limited to use the Roles static class and not implement directly into my service layer which interact with the database context, instead I'm bound to use the Roles static class which has its own database context etc, also the table names is awful..</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","jquery-ui","asp.net-mvc-4","jquery-ui-datepicker"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13112519,"title":"MVC4 jQuery UI does not work","body":"<p>I cannot get jQuery UI working in my ASP.NET MVC4 application. I tried dialog and datepicker.\nHere is part of the code of my view.</p>\n\n<pre><code>&lt;link href=\"../../Content/themes/base/jquery.ui.all.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"../../Scripts/jquery-1.5.1.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"../../Scripts/jquery-ui-1.8.11.min.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script language=\"javascript\" type=\"text/javascript\"&gt;\n$(document).ready(function () {\n    alert('A');\n    //$('#datepicker').val('test');\n    $('#datepicker').datepicker();\n    alert('B');\n});\n&lt;/script&gt;\n&lt;h1&gt;Test&lt;/h1&gt;\n&lt;form id=\"testForm\" action=\"#\" method=\"get\"&gt;\n    &lt;input type=\"text\" id=\"datepicker\" name=\"datepicker\" class=\"datepicker\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The alert A is displayed. When I uncomment the next row, the value test is assigned. But datepicker is not working and alert B does not display.</p>\n\n<p>Thanks,\nPetr</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","mef"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13173742,"title":"web api vs asp.net mvc api","body":"<p>I want to write a app that needs to have 2 things:\n1. REST API so others can retrieve data and display their own ways\n2. The default display is a web page using ASP.NET MVC</p>\n\n<p>So there are some approaches:\n1. Create 2 separate projects, 1 for Web API and another is ASP.NET MVC. The MVC will talk to Web API to get the data &amp; render Views\n2. Create a single ASP.NET MVC project. And create a class that derives from APIController. Then do the similar thing as above.</p>\n\n<p>As I understand, the performance should be the same for both approaches. But after I read <a href=\"http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/\" rel=\"nofollow\">this  article</a> , I'm not quite sure.</p>\n\n<p>Quote from article:</p>\n\n<blockquote>\n  <p>\"You could do that with an ASP.NET MVC API by creating a separate\n  project for the API, but then youre still paying the performance\n  penalty for your API requests to filter through MVCs rendering\n  pipeline. In simple load testing on my local machine, Ive found that\n  Web API endpoints hosted in console apps are nearly 50% faster than\n  both ASP.NET controller actions and Web API endpoints hosted within\n  MVC projects.\"</p>\n</blockquote>\n\n<p>I'm no expert in ASP.NET so I'd love to hear your explanation or advise how to achieve what I want to do.</p>\n\n<p>Also, please enlighten me if I want to use MEF for this project.</p>\n\n<p>Thanks very much.</p>\n"},{"tags":["javascript","asp.net-mvc","vb.net","json","extjs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13180333,"title":"Javascript (ExtJs) returns a 404 error for a URL, but no problems when I type it into a browser","body":"<p>I am using ExtJs on a front end and an ASP.NET on the back-end. I am pretty new to both. I am trying to send a request to the back end using ExtJs, however, I get a 404 error. When I copy the URL from the console to the address bar in any browser, it works fine. I am using a localhost URL so I am not sure if that is the error. Here is my ExtJs code. (I realize there are some other issues in the code, I just want the front end to connect to the back-end for now).</p>\n\n<p>ExtJs code:</p>\n\n<pre><code>Ext.define('AM.store.Users', {\n    extend: 'Ext.data.Store',\n    model: 'AM.model.User',\n    autoLoad: true,\n\n    proxy: {\n        type: 'ajax',\n        api: {\n            read: 'http://localhost:3849/Home/AmazonRender?numDays=3',\n            update: 'data/updateUsers.txt'\n        },\n        reader: {\n            type: 'json',\n            root: 'users',\n            successProperty: 'success'\n        }\n    },\n    updateUser: function (button) {\n        var win = button.up('window'),\n    form = win.down('form'),\n    record = form.getRecord(),\n    values = form.getValues();\n\n\n\n    record.set(values);\n    win.close();\n    this.getUsersStore().sync();\n}\n});\n</code></pre>\n\n<p>ASP.NET code:</p>\n\n<pre><code>Function amazonRender(ByVal numDays As Integer) As ActionResult\n        Dim list As New List(Of Double)()\n\n        Dim bucketName As String = \"\"\n        Dim accessKey As String = \"\"\n        Dim secretKey As String = \"\"\n        ConnectToAmazon(bucketName, accessKey, secretKey)\n\n        Dim client As AmazonS3\n        client = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey,  RegionEndpoint.USEast1)\n        Dim request As ListObjectsRequest = New ListObjectsRequest\n        request.BucketName = bucketName\n        Dim response As ListObjectsResponse = client.ListObjects(request)\n        Dim id As Integer = 1\n        Dim responseJsonString As String = \"[\"\n\n        Dim responseList As List(Of String) = New List(Of String)\n        For Each s3 As S3Object In response.S3Objects\n            responseJsonString = responseJsonString + \"{id: \" + id.ToString + \", FileName: '\" + s3.Key.Trim + \"'},\"\n            id = id + 1\n        Next\n        responseJsonString = responseJsonString.Substring(0, responseJsonString.Length - 1)\n        responseJsonString = responseJsonString + \"]\"\n        Dim serializer As JavaScriptSerializer = New JavaScriptSerializer\n\n        Return Json(New With {Key .success = \"true\", Key .users = responseJsonString}, JsonRequestBehavior.AllowGet)\n    End Function\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13138733,"title":"MVC4 - render html.dropdownlist","body":"<p>I would like to render a html.dropdownlist so the user can just 'tap' an item, in the default rendering the user will have to tap on the dropdownlist then the list will appear and then the suer can select an item.</p>\n\n<p>I'd like to show this like a ul\\li list, but don't know how, I'm sure I can do some css stuff but how about getting the selected SelectListItem-Value back into the datasource... ? I'm pretty sure there's already something out there. Can anyone point me in the right direction ?</p>\n\n<p>Best regards,\nJurjen.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13179860,"title":"Entity Framework Exception when iterating over collection","body":"<p>I have built a simple file manager, that pulls data from two tables, Folders and Files.\nWhen you upload a file it gets written to disk on the server. When I need to delete a folder and all of it's sub-folders, sub-folder files and the parent folders files, I select the folder and then click delete, which executes the controller action below.</p>\n\n<p><strong>UPDATE</strong>\nIf I change any subsequent call to .ToList() it works.</p>\n\n<pre><code>    [HttpPost]\n    public JsonResult DeleteFolder(int folderID)\n    {\n        var repo = new FileManagerRepository();\n\n        var folder     = repo.GetFolder(folderID);\n        var subfolders = repo.GetSubFolders(folderID).ToList();\n        var files      = repo.GetFiles(folderID).ToList();\n\n        // delete sub-folders\n        if (subfolders.Count() != 0)\n        {\n            foreach (var subfolder in subfolders)\n            {\n                // delete sub-folder files\n                var subfiles = repo.GetFiles(subfolder.folder_id).ToList();\n                if (subfiles.Count() != 0)\n                {\n                    foreach (var file in subfiles)\n                    {\n                        repo.DeleteFile(file.file_id);\n                        System.IO.File.Delete(Server.MapPath(\"/content/upload/\" + file.file_name));\n                    }\n                }\n                repo.DeleteFolder(subfolder.folder_id);\n            }\n        }\n        // delete files\n        if (files.Count() != 0)\n        {\n            foreach (var file in files)\n            {\n                repo.DeleteFile(file.file_id);\n                System.IO.File.Delete(Server.MapPath(\"/content/upload\" + file.file_name));\n            }\n        }\n        // delete the folder            \n        if (folder != null)\n        {\n            repo.DeleteFolder(folder.folder_id);                \n        }\n        repo.Save();\n        return new JsonResult();\n    }\n</code></pre>\n\n<p>Now here is the FileManagerRepository</p>\n\n<pre><code> public class FileManagerRepository\n{\n    private readonly iau_idahoEntities db = new iau_idahoEntities();\n\n    public IQueryable&lt;folders&gt; GetParentFolders()\n    {\n        return db.folders.Where(f =&gt; f.parant_folder_id == 0);\n    }\n\n    public IQueryable&lt;folders&gt; GetSubFolders()\n    {\n        return db.folders.Where(f =&gt; f.parant_folder_id != 0);\n    }\n    public IQueryable&lt;folders&gt; GetSubFolders(int folder_id)\n    {\n        return db.folders.Where(f =&gt; f.parant_folder_id != 0 &amp;&amp; f.parant_folder_id == folder_id);\n    } \n\n\n    public IQueryable&lt;Files&gt; GetFiles(int id)\n    {\n        return db.Files.Where(f =&gt; f.folder_id == id);\n    }\n\n    public Files GetFile(int id)\n    {\n        return db.Files.SingleOrDefault(f =&gt; f.file_id == id);\n    }\n\n    public void UpdateDownloadCount(int id)\n    {\n        var file = GetFile(id);\n        file.downloaded += 1;         \n    }\n    public void AddFolder(int parentFolderID, string folderName)\n    {\n        var folder = new folders { create_date = DateTime.Now, parant_folder_id = parentFolderID, folder_name = folderName };\n        db.folders.AddObject(folder);\n    }\n\n    public void DeleteFolder(int folder_id)\n    {\n        var folder = db.folders.SingleOrDefault(f =&gt; f.folder_id == folder_id);\n        db.folders.DeleteObject(folder);\n    }\n    public void Save()\n    {\n        db.SaveChanges();\n    }\n\n    public void AddFile(int folder_id,string filename, string description)\n    {\n        var file = new Files { \n            folder_id = folder_id, \n            file_name = filename, \n            file_extension = filename.Substring(filename.Length - 3, 3), \n            description = description,\n            downloaded = 0, \n            physical_name = filename.Substring(0, filename.Length - 4), \n            upload_date = DateTime.Now \n        };\n        db.Files.AddObject(file);            \n    }\n\n    internal void DeleteFile(int fileID)\n    {\n        var fileToDelete = db.Files.SingleOrDefault(file =&gt; file.file_id == fileID);\n        db.Files.DeleteObject(fileToDelete);\n    }\n\n    internal folders GetFolder(int folderID)\n    {\n        return db.folders.SingleOrDefault(folder =&gt; folder.folder_id == folderID);\n    }\n}\n</code></pre>\n\n<p>The problem is I keep getting the following EF Exception:\n<strong>There is already an open DataReader associated with this Command which must be closed first</strong></p>\n\n<p>I've tried to add MultipleActiveResultSets = true, to my connection string in the web.config, but I still get the exception. I know why this exception is being thrown, but I don't know how to do what I need to and prevent it from throwing an exception.</p>\n\n<p>PLEASE HELP!!! </p>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc","silverlight"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13175751,"title":"Communication between browser of two application in different domain","body":"<p>I have one silverlight application hosted at www.abc.com</p>\n\n<p>I have one web application hosted at www.xyz.com</p>\n\n<p>I want to call the page of web application on button click of silverlight application and pass some parameters to it now silverlight application will show busy indicator until the transaction of the page of web application doesn't get completed. Now if the user has successfully done the transaction in the page or if he close the page of web application i want some parameters to pass to silverlight application so that it can know to stop the busy indicator and further process. I know there would be something in jquery or ajax which do such communication in cross domain but i am not getting it around.</p>\n\n<p>I would really appreciate if someone could help me out with this.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","http"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13165892,"title":"Securely posting from Fiddler 2.0 to ASP.NET MVC 4","body":"<p>Given: <a href=\"http://anyurl.com/Base/Processor/\" rel=\"nofollow\">http://anyurl.com/Base/Processor/</a> is the base url to hit a controller action on Processor, I have no trouble using HTTP GET to pass values to the server using REST routes \"/value\" or form parameter \"?value=value\". </p>\n\n<p>However, when I try to post placing the payload in the http request body, I cannot get the server to accept the input. I have tried several variations of the following:</p>\n\n<pre><code>User-Agent: Fiddler\nHost: anyurl.com\nContent-Length: 11\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\n\nvalue=value\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["asp.net","sql","asp.net-mvc","tsql"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4487,"score":4,"question_id":2851754,"title":"IDENTITY_INSERT is set to off error","body":"<p>I have a MVC web application with a table in the model that I would like to add to.  I have the primary key set along with the other data fields, but every time I try to add to the table, I get the following error:</p>\n\n<p>\"Cannot insert explicit value for identity column in table 'TABLE_NAME' when IDENTITY_INSERT is set to OFF.\"</p>\n\n<p>I'm not sure why this problem is coming up, I have the primary key set as the identity and it is also set to auto increment in the Visual Studio table designer.  Is there any way I can adjust the IDENTITY_INSERT parameter in the table designer in Visual Studio??  Or is there some other issue that might be causing this.</p>\n\n<p>UPDATE:  @Brian - As far as I can tell, I'm not setting the value explicitly, here is the code that adds to the table(s).</p>\n\n<pre><code>//Add viewer\npublic void addViewer(ModelStateDictionary modelState, Users user)\n{\n   var userToAdd = new UserRoles();\n   userToAdd.Users = user;\n\n   if (String.IsNullOrEmpty(userToAdd.Users.Username))\n   {\n      modelState.AddModelError(\"noName\", \"Please enter a username for the new Viewer\");\n   }\n\n   //See if Committee Member already exists\n   try\n   {\n      userToAdd = _db.UserRoles.First(ur =&gt; ur.Users.Username == userToAdd.Users.Username);\n      modelState.AddModelError(\"userExists\", \"A Viewer with that username already exists in the system\");\n      return;\n    }\n    catch (Exception e)\n    {\n       if (modelState.IsValid)\n       {\n          //Assign Committee Member role\n          userToAdd.Role = \"Viewer\";\n          userToAdd.Users = user;\n          //Add new Committee Member to User Roles and associated username to Users\n          _db.AddToUserRoles(userToAdd);\n          _db.SaveChanges();\n       }\n    }\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","storefront","mvc-storefront"],"answer_count":1,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1714,"score":6,"question_id":2114903,"title":"MVC Storefront - Kona - Where are they?","body":"<p>I am looking for a full-blown shopping cart example for ASP.Net MVC. I found plenty of links pointing to MVC Storefront (<a href=\"http://mvcsamples.codeplex.com/\">1</a>) (Apparently not being developed anymore) and other articles which talk about Kona, a separate project based off MVC Storefront. Too bad, MVC Store Preview 1A had me pretty happy.</p>\n\n<p>Are there any \"production ready\", open-source ASP.Net MVC Shopping Carts?</p>\n\n<p>Thank you</p>\n"},{"tags":["c#","asp.net-mvc","exception","controller","elmah"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13177291,"title":"How to create an exception with redirection to user-friendly error page in MVC","body":"<p>I have an MVC action which generates a Word document:</p>\n\n<pre><code>    [HttpGet]\n    public ActionResult ExportToWord(string docId)\n    {\n    try\n    {\n      //...\n      //Word-document generating is done here...\n      //...\n      return File(stream, MIMEAssistant.GetMIMEType(\"docx\"), fileName + \".docx\");\n    }\n    catch (Exception e)\n    {\n        throw new Exception(\"Problem with generating! \" + e.ToString());\n    }\n</code></pre>\n\n<p>If I have  so I get en Asp.Net standard exception with URL </p>\n\n<pre><code>http://localhost:18314/Export/ExportToWord?docId=5\n</code></pre>\n\n<p>If I have  so I have the same URL. Redirection is not done. It must go to </p>\n\n<pre><code>http://localhost:18314/Home/ErrorPage.\n</code></pre>\n\n<p>Now users do not get any error page, just reloading of the page. The page is reloaded not correctly because the URL is </p>\n\n<pre><code>http://localhost:18314/Export/ExportToWord?docId=5\n</code></pre>\n\n<p>I hope it was understandable description :)</p>\n\n<p>Question: How to make correct redirection to .../Home/ErrorPage and send an exception by using Elmah logging facility?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13177456,"title":"Mvc State replacement","body":"<p>I'm having hard time understanding the stateless issue with mvc.\nLet's say i have a screen with a list of people. i want to choose one of them, and once i selected this person i want to keep his ID, and from my left menu i want to open a screen with his orders, a screen with his account details....\nIn ASPX i would just keep his PersonID in the session, and use it all over the website.\nHow can i do the same in mvc? what if i keep his id in a public variable in a public static class? will it work? </p>\n\n<p>Thanks.</p>\n"},{"tags":["javascript","asp.net-mvc","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13176729,"title":"Ajax call and windows authentication not working correct","body":"<p>I have a asp.met mvc 4 project.</p>\n\n<p>This is my view code, minimized:</p>\n\n<pre><code>@model E4.administrasjon.Models.ViewModels.vmRekv\n&lt;form action=\"#\" method=\"post\" class=\"form label-inline\" id=\"saveTask\"&gt;\n @Html.HiddenFor(m =&gt; m.rekv.RekvID)\n&lt;div class=\"field\"&gt;&lt;label for=\"Subject\"&gt;Titel&lt;/label&gt;&lt;input id=\"Subject\" value=\"@Model.rekv.Subject\" name=\"Subject\" size=\"50\" type=\"text\" class=\"medium\" /&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I then have this javascript:</p>\n\n<pre><code>&lt;script&gt;\n$(document).ready(function () {\n    $('#btnSave').click(function () {\n        alert(\"clicked\");\n        $.ajax({\n            url: 'http://localhost:88/API/apiRekv',\n            type: 'POST',\n            dataType: 'json',\n            data: $('form#saveTask').serialize(),\n            success: function (data) {                        \n                alert(\"OK\");                   \n            },\n            error: function (data) {\n                alert(\"Error\");                    \n            }\n        });      \n    });\n});\n</code></pre>\n\n<p></p>\n\n<p>The controller is a simple WebApi controller</p>\n\n<pre><code>public void Post(vmRekv item)\n    {           \n        //Some insert to db code\n}\n</code></pre>\n\n<p>The insert operation work with both anonymous and Windows authentication turned on/off. But when I turn on Windows auth. then the javascript success/failure event are not called.</p>\n\n<p>Its called as it should when windows authentication turned off.</p>\n\n<p>By the way, I'm using local IIS express</p>\n"},{"tags":["asp.net-mvc","content-management-system","orchardcms","oxite"],"answer_count":6,"favorite_count":3,"up_vote_count":4,"down_vote_count":1,"view_count":1726,"score":3,"question_id":3014794,"title":"Any known orchard cms case studies?","body":"<p>We're looking into using orchard cms for a project. I know the CMS hasn't been around for a long time, but I was wondering if there were any known high profile and successful case studies using orchard cms or its predecessor Oxite ? </p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","multithreading","asp.net-mvc-3","castle-windsor","lifestyle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13177078,"title":"Castle Windsor lifestyle configurable per consumer? (Threading issue in ASP.NET MVC3 application.)","body":"<p>In my ASP.NET MVC3 application, the normal Castle Windsor lifestyle is \"PerWebRequest.\"\nThis has worked very well so far.</p>\n\n<p>However, now I need some tasks (e.g. email sending) to be executed on a different thread, after the web request has ended (to be exact, this is a custom form of event handling).\nWith the \"PerWebRequest\" lifestyle, this leads to ObjectDisposedExceptions.</p>\n\n<p>According to <a href=\"http://stackoverflow.com/questions/7203745/windsor-composite-lifestyle-for-asp-net-process\">this thread</a>, the Hybrid lifestyle from the Castle.Windsor.Lifestyles contrib project would do just what I want.\nBut I'd like to know if there is another option, without adding another dependency.\nLike to always have my event handlers use the \"PerThread\" lifestyle or something similar, whilst all other consumers still would use the \"PerWebRequest\" default.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","ajax","asp.net-mvc","drop-down-menu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13175481,"title":"How to capture ajax drop down list value in MVC 3 view?","body":"<p>I have the following view that has tow dropdowns and one button:</p>\n\n<pre><code>@model RoomReservation.Webb.Models.HomeViewModel\n\n@{\n    ViewBag.Title = \"\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Index&lt;/h2&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Select a city and a hotel&lt;/legend&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x=&gt;x.City_DDL_ID, new SelectList(Model.AllCities, \"Value\", \"Text\"),\"...pick a city...\" )\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x =&gt; x.Hotel_DDL_ID, Enumerable.Empty&lt;SelectListItem&gt;(), \"...pick a hotel...\", new { disabled = \"disabled\"})\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;input id=\"SearchButton\" type=\"submit\"  onclick=\"window.location.href='/Home/SearchForRooms'\" disabled=\"disabled\"/&gt; \n&lt;/fieldset&gt;\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $('#City_DDL_ID').change(function () {\n        var selectedCity = $(this).val();\n        if (selectedCity != null &amp;&amp; selectedCity != '-1') {\n            $.getJSON('@Url.Action(\"GetHotels\")', { id: selectedCity }, function (hotels) {\n                var hotelsSelect = $('#Hotel_DDL_ID');\n                hotelsSelect.empty();\n                $.each(hotels, function (index, hotel) {\n                    hotelsSelect.append($('&lt;option/&gt;',\n                    {\n                        value: hotel.Value,\n                        text: hotel.Text\n                    }));\n                });\n                $('#Hotel_DDL_ID').attr('disabled', false);\n                $('#SearchButton').attr('disabled', false);\n\n            });\n        }\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n function onsubmitclcik() {\n    var SecondDrpId = $('#Hotel_DDL_ID').val();\n    window.location.href = '/Home/SearchForRooms?parameter=' + SecondDrpId;\n</code></pre>\n\n<p>}\n    </p>\n\n<p>I would like to get a value from second dropdown so that I can give it as paramater to my method f**ired from the button atribute \"onclick\". It is now working (above script).\nBut my action still gets null parameter. Here is the code:</p>\n\n<pre><code>public ActionResult SearchForRooms(int SecondDrpId) \n    {\n        if (SecondDrpId &gt; -1)\n            return View(); //Here goes some model, not important\n        else\n            return RedirectToRoute(\"Home/Index\");\n    }\n</code></pre>\n\n<p>Here is the Chrome parameter:\nRequest URL:http://localhost:22191/Home/SearchForRooms?parameter=3\nRequest Method:GET \nthank you**</p>\n"},{"tags":["c#","asp.net-mvc","authentication","iis","ntlm"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12091116,"title":"How to prevent unauthorized child action to return 401","body":"<h1>Problem</h1>\n\n<p>Long story short, how can you prevent unauthorized ChildActions to return a 401 code and return an empty result instead.</p>\n\n<h1>Context</h1>\n\n<p>My application uses <strong>NTLM</strong> to authenticate on the network. I also want to handle anonymous identification, for non <strong>NTLM</strong> capable devices or if someone goes through some proxy.</p>\n\n<p>One the the web application, there is controller/actions that absolutely require to be logged in to be viewable and some other that are viewable as anonymous. For the ones that authentication is mandatory where I initially used the following:</p>\n\n<pre><code>[Authorize()]\npublic class SomeController : BaseController\n</code></pre>\n\n<p>Which works as expected and returns a <strong>401 Status Code (Unauthorized)</strong>.</p>\n\n<p>The problem starts on the page that allows anonymous. Because those pages have parts that uses RenderAction to render pieces <strong>that requires authentication</strong>. </p>\n\n<p>On local developpement server on front end everything looks fine, but with <strong>IIS</strong> any page that have any small piece that requires authentication it returns 401 page. So I created a custom Authorize attribute:</p>\n\n<pre><code>public class CustomAuthorizeAttribute : AuthorizeAttribute\n{\n    public bool Ignore401ChildAction { get; set; }\n\n    public CustomAuthorizeAttribute()\n        : base() {\n        this.Ignore401ChildAction = true;\n    }\n\n    protected override void HandleUnauthorizedRequest( AuthorizationContext filterContext ) {\n        base.HandleUnauthorizedRequest( filterContext );\n        if( this.Ignore401ChildAction &amp;&amp; filterContext.IsChildAction ) {\n            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;\n        }\n    }\n}\n</code></pre>\n\n<p>And then on frontend it seems to produce correct behavior with and without IIS. However in the backend, even if the page renders completly it returns a 401</p>\n\n<p>So I added the following to my CustomAttribute instead of <strong>TrySkipIisCustomErrors</strong></p>\n\n<pre><code>filterContext.HttpContext.Response.StatusCode = 200;\nfilterContext.Result = new EmptyResult();\n</code></pre>\n\n<p>In anonymous everything is fine, but when NTLM is enabled server doesn't request authentication when the controller doesnt have that CustomAuthorize attribute. It seems like its only requesting the crendetials when their mandatory instead of when they're available.</p>\n\n<p>Thank you,</p>\n\n<h2>EDIT</h2>\n\n<p>After lot of searching, digging and fiddling, realized that true problem is that Anonymous identification will take precedence over Windows/NTLM. If <strong>Anonymous</strong> and <strong>Windows</strong> authentication are enabled, <strong>Windows</strong> will only execute if anonymous authentication fails.</p>\n\n<p><h2>SOLUTION</h2>(not perfect and kind of hackish but it works)</p>\n\n<p>Add the following function to your BaseController then call from the views that do not mandatory require authentication, or simply call it from your <strong>_Layout</strong> view.</p>\n\n<p>NOTE: Even though page will render correctly as anonymous, a <strong>401 status code will still be returned.</strong></p>\n\n<pre><code>[CustomAuthorize]\npublic ActionResult Auth() {\n    return new EmptyResult();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","grid","kendo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13170936,"title":"Hierarchical Grid in Kendo UI with ASP.NET MVC","body":"<p>I am implementing 3 level hierarchy grid using the Kendo UI MVC controls. At First level there will be Users Roles, expanding users Roles will show all the Features defined for that role and expanding features will show all the Features Actions that are defined for that features. </p>\n\n<p>At Feature and Features Action grid there will be checkboxes in the first column so that user checks the checkboxes to assigned the feature actions to the features and features to User Roles. Below the Feature Action grid there will be Submit button to Save the data(all the features actions and features assigned to the Roles by checking the checkboxes). </p>\n\n<p>Now, I have few questions regarding this.</p>\n\n<ol>\n<li>How to submit the Features and Features Actions grid data model to my Action method on click of Submit button?</li>\n<li>I want if any of the features checkboxe is checked then all the feature actions will gets checked by default?</li>\n<li>Is it possible to use the default Save Changes button of the kendo UI grid in hierarchy grid.I tried to implement this by using the toolbar.Save() button but button does not shows up in the grid.</li>\n</ol>\n"},{"tags":["asp.net-mvc","unit-testing","asp.net-web-api","repository-pattern"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13174184,"title":"Is the Repository Pattern valid for a ASP.Net WebAPI project which just calls remote services","body":"<p>I'm developing something similar to a service facade using the ASP.Net WebAPI. The objective is to create a RESTful middle layer between a backend system and a mobile application.</p>\n\n<p>The code inside these service operations does not contain any logic which accesses data from a database. i.e. the EF framework, Linq to SQL, etc. Instead data is selected and updated by calling another set of remote services offered by a back end system.</p>\n\n<p>I need to implement some sort of unit testing for each service operation. Almost all WebAPI unit testing tutorial I visited online contains data access via Entity Framework and a repository class just wraps a single EF entity. </p>\n\n<p>Hence in my case</p>\n\n<ol>\n<li>Does it make sense to have unit tests when there is no data access logic inside the service operations as I mentioned above?</li>\n<li><p>If so is the Repository pattern the way to go? Please link an example which tests against a MVC project that accesses data via remote service calls if possible. </p></li>\n<li><p>Am I confusing integration testing with unit testing?</p></li>\n<li>If so should I just go for integration testing and forget about unit tests.</li>\n</ol>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13174593,"title":"Entity Framework 5 Code first adding an image","body":"<p>I am writing a very small application with mvc4 and entity framework 5.</p>\n\n<p>I want to add a product and store and image for the product.</p>\n\n<p>I have a model</p>\n\n<pre><code>  [Table(\"CatalogItem\")]\npublic class CatalogItemModel\n{\n    [Key]\n    public int CatalogItemId { get; set; }\n\n    public string Description { get; set; }\n\n    public double Price { get; set; }\n\n    public int ProductCount { get; set; }\n\n    public string Size { get; set; }\n\n    public string Sku { get; set; }\n\n    [Column(TypeName = \"image\")]\n\n\n    public byte[] Image { get; set; }\n\n    [Display(Name = \"Display Catalog Item\")]\n    public bool DisplayItem { get; set; }\n}\n</code></pre>\n\n<p>My controller. This never gets hit.</p>\n\n<pre><code> [HttpPost]\n    public ActionResult Create(CatalogItemModel catalogitemmodel)\n    {\n        if (ModelState.IsValid)\n        {\n            db.CatalogItemModels.Add(catalogitemmodel);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        return View(catalogitemmodel);\n    }\n</code></pre>\n\n<p>My views form</p>\n\n<pre><code>    &lt;fieldset&gt;\n    &lt;legend&gt;CatalogItemModel&lt;/legend&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Description)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Description)\n        @Html.ValidationMessageFor(model =&gt; model.Description)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Price)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Price)\n        @Html.ValidationMessageFor(model =&gt; model.Price)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.ProductCount)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.ProductCount)\n        @Html.ValidationMessageFor(model =&gt; model.ProductCount)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Size)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Size)\n        @Html.ValidationMessageFor(model =&gt; model.Size)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Sku)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Sku)\n        @Html.ValidationMessageFor(model =&gt; model.Sku)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.DisplayItem)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.DisplayItem)\n        @Html.ValidationMessageFor(model =&gt; model.DisplayItem)\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(m=&gt;m.Image)\n    &lt;/div&gt;\n\n    &lt;input name=\"Image\" type=\"file\"/&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n</code></pre>\n\n<p>When I try posting a new catalog with an image within my file input however it throws an error </p>\n\n<blockquote>\n  <p>The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or an illegal character among the padding characters.</p>\n</blockquote>\n"},{"tags":["c#","asp.net-mvc","iis","windows-7","excel-interop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13175154,"title":"Excel 2007 COM cannot be deployed with MVC website?","body":"<p>I have a website written by MVC C# (Visual studio 2010). I use Microsoft Excel 2007 COM to export some data to excel file and then send it to web client. (Because the excel file is kinda complex so I didn't use OpenXML)</p>\n\n<p>Every thing is OK when I run debug code at my local computer. But when I try to deploy the website to IIS server (server has been installed Office 2007 and visual 2010 also), the export functionality doesn't work at all. Even excel process doesn't start when request from client comes. Other else functions are run very nice but Excel related.</p>\n\n<p>Please help me to find what is the problem and how can I get over this.\nThanks in advance!</p>\n\n<p>P.S. Debug local on server is done successfully with the same result when debug on my local PC.</p>\n"},{"tags":["asp.net-mvc","asp.net-webforms","html.renderpartial"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13169289,"title":"Generate N user controls (partial views)","body":"<p>I am trying to migrate a project from web forms to mvc. I need page(view) where i can render N partial views and submit the data. Model should look something like this:</p>\n\n<pre><code>    public class ContactInfo\n    {\n        Contact customer{get;set;}\n        List&lt;Contact&gt; guests {get;set;}\n    }\n</code></pre>\n\n<p>Can anyone help me with this. I know about @HTML.RenderPartial but i have problem submiting that data. Another problem that i have is that some of the fields are required depending on what contact type they belong. At first it will be great help if i can just submit that data. Later will find solution for required field, maybe some custom validators or something. As i said or not i am new to this so something of this may sound stupid.</p>\n"},{"tags":["c#","asp.net-mvc","usercontrols","enums"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13172719,"title":"UserControl Loses Data","body":"<p>I have three pages with very similiar behaviour, so I made a User Control with 3 behaviours, I did this with adding an enum and a property of this enum type.  </p>\n\n<pre><code>public enum ucType\n    { \n        CustomersWhoHaveAContract, CustomersWaitingForContract, CustomerOfPreReservedContracts\n    }\n\n    public ucType UserControlType;\n\n    protected void BtnLoadInfo_Click(object sender, ImageClickEventArgs e)\n    {\n        switch (UserControlType)\n        {\n            case ucType.CustomersWhoHaveAContract:\n                DoA();\n                break;\n            case ucType.CustomersWaitingForContract:\n                DoB();\n                break;\n            case ucType.CustomerOfPreReservedContracts:\n                DoC();\n                break;\n            default:\n                break;\n        }\n</code></pre>\n\n<p>in my pages I assign a value to the UserControlType,  </p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n    {\n        if (!Page.IsPostBack)\n        {\n            ucCustomersWithContract1.UserControlType = UserControls.ucCustomersWithContract.ucType.CustomerOfPreReservedContracts;\n        }\n    }\n</code></pre>\n\n<p>but when I click the button the UserControlType is always <code>CustomersWhoHaveAContract</code>, meaning that it is losing it's value. Where is the problem?</p>\n"},{"tags":["asp.net-mvc","database","razor","syntax"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13174952,"title":"Display razor from database","body":"<p>I am trying to display content such as </p>\n\n<pre><code>&lt;p&gt;Text and link - @Html.ActionLink(\"Link\", \"Action\")&lt;/p&gt;\n</code></pre>\n\n<p>from a database, but if I use <code>@Html.Raw</code> then it doesn't render the link.</p>\n\n<p>Is there anyway to do this?</p>\n"},{"tags":["javascript","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13174930,"title":"passing a javascript validation to dynamic textboxes in mvc3","body":"<p>Hello everyone i am working on a project similar to a shopping cart.I am using the below code to generate textboxes(for selecting the quantity) in my view:</p>\n\n<pre><code>    @foreach (var item in Model)\n     {\n      &lt;tr&gt;\n      &lt;td align=\"left\" class=\"Text_nocolor\"&gt;\n       @Html.DisplayFor(modelItem=&gt;item.ProductName)                                \n       /td&gt;\n       &lt;td align=\"right\" class=\"Text_nocolor\" valign=\"top\"&gt;\n      @using (Html.BeginForm(\"Update\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n       {               \n    &lt;input id=\"Quantity\" type=\"text\" class=\"Text_nocolor\" name=\"Quantity\" value=\"@item.Quantity\"  @*onblur=\"return NumberOnlyTextBox(event)\"*@  onchange=\"return allownumbers()\" maxlength=\"3\"/&gt;  \n@Html.Hidden(\"unitrate\", item.Rate)               \n                                                    &lt;input type=\"submit\" value=\"Edit\" class=\"Text_nocolor\" onkeypress=\"return validateNumbersOnly(e);\" onclick=\"return RegainFocus();\" /&gt;\n       }\n</code></pre>\n\n<p>In the above code \"id=Quantity\" represents the textboxes.\nand i have written a javascript for <strong>numbers only</strong> validation for these textboxes.\nThese are my javascript functions:</p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n        function RegainFocus() {\n            if ((document.getElementById(\"Quantity\").value).length == 0) {\n                document.getElementById(\"Quantity\").focus();\n                alert(\"Quantity cannot be empty\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            else if ((document.getElementById(\"Quantity\").value) &gt; 100) {\n                alert(\"There is no enough inventory for this product to fulfill your order\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n        }\n    &lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function allownumbers() {\n            //      var elements = document.getElementsByName('Quantity');\n//           for()\n            var val = parseInt(document.getElementsByName(\"Quantity\").item(1).value);\n            alert(val);\n            if (!val || val &lt; 1) {\n                alert('Please enter a valid value');\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            document.getElementById(\"Quantity\").value = val;\n            return true;\n        }\n     &lt;/script&gt;\n</code></pre>\n\n<p>My problem is that the validation <strong>works only for the first textbox</strong> not the others.\nCan anyone pls provide a solution? Thank you</p>\n"},{"tags":["asp.net-mvc","flickr"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":25,"score":-1,"question_id":13173558,"title":"Create a photo upload system just like Flickr with ASP.NET MVC","body":"<p>I have to create a photo upload system just like Flickr.com ( select many file at once and upload them and create thumbnails and write some description about them ) in ASP.NET MVC. \nAny code or sample?</p>\n"},{"tags":["jquery","asp.net-mvc","validator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13172177,"title":"Not able to see JQuery Validator Messages behind the control after validating form","body":"<p>On Page Load... <code>$(document).ready(function () { $(\"form\").validate(); });</code></p>\n\n<p>On Save Button Click Event... <code>if($('form').valid()) { Saving data here... }</code></p>\n\n<p>\"Firebug\" with Chrome and Firefox shows everything just perfect with <code>$(\"form\").validate()</code> and even <code>$('form').valid()</code> returns true and false as expected, but can't see error messages behind specific form controls.</p>\n\n<p>*All are in MVC View</p>\n"},{"tags":["asp.net-mvc","parameters","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13171573,"title":"How to hide id in the url (MVC3)","body":"<p><strong>Problem</strong></p>\n\n<p>In my project i decided to imlement a custom menu provider using a db stored entity \"Section\".\nSo the section is mapped to the following Model:</p>\n\n<pre><code>public class TopMenuItemModel : BaseTrivitalModel\n{\n    public TopMenuItemModel()\n    {\n        ChildItems = new List&lt;TopMenuItemModel&gt;();\n    }\n\n    public int ItemId { get; set; }\n    public string RouteUrl { get; set; }\n    public string Title { get; set; }\n    public string SeName { get; set; }\n\n    public IList&lt;TopMenuItemModel&gt; ChildItems { get; set; }\n}\n</code></pre>\n\n<p>And the view for the model:</p>\n\n<pre><code>@model TopMenuModel\n&lt;nav id=\"main-nav\"&gt;\n    &lt;a href=\"@Url.RouteUrl(\"HomePage\")\"&gt;@T(\"HomePage\")&lt;/a&gt;\n    @foreach (var parentItem in Model.MenuItems)\n    { \n        &lt;a href=\"@Url.RouteUrl(\"Section\", new { seName = parentItem.SeName, sectionId = parentItem.ItemId })\"&gt;@parentItem.Title&lt;/a&gt;\n    }\n&lt;/nav&gt;\n</code></pre>\n\n<p>My Default route is:</p>\n\n<pre><code>routes.MapRoute(\n                \"Default\", // Route name\n                \"{controller}/{action}/{id}\", // URL with parameters\n                new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional },\n                new[] { \"Trivital.Web.Controllers\" }\n            );\n</code></pre>\n\n<p>Controller for the menu:</p>\n\n<pre><code>public class CommonController : BaseTrivitalController\n    {\n\n...     \n\npublic ActionResult TopMenu()\n        {\n            var sections = _sectionService.GetCollectionByParentId(0, true);\n            var model = new TopMenuModel();\n\n            model.MenuItems = sections.Select(x =&gt;\n                {\n                    var item = new TopMenuItemModel()\n                    { \n                        ItemId = x.Id,\n                        Title = x.GetLocalized(s =&gt; s.Title, _workContext.WorkingLanguage.Id, true, true),\n                        SeName = x.GetSeName(),\n                        RouteUrl = \"\",\n                    };\n\n                    return item;\n                })\n                .ToList();\n\n            return PartialView(model);\n        }\n    }\n}\n</code></pre>\n\n<p>Now I have a SectionController where I have an ActionResult mehtod:</p>\n\n<pre><code>//section main page\n        public ActionResult Section(string seName)\n        {\n            var section = _sectionService.Get(1);\n            if (section == null || section.Deleted || !section.Published)\n                return RedirectToAction(\"Index\", \"Home\");\n\n            //prepare the model\n            var model = PrepareSectionPageModel(section);\n\n            return View(model);\n        }\n</code></pre>\n\n<p>My current Route for the Section (that gives me host/sectionSeName-id):</p>\n\n<pre><code>routes.MapLocalizedRoute(\n                            \"section\", // Route name\n                            \"{SeName}\"+ \"-\" + \"{sectionId}\", // URL with parameters\n                            new { controller = \"Sections\", action = \"Section\" },\n                            new { sectionId = @\"\\d+\" }\n                            );\n</code></pre>\n\n<p>Now I need to get my Url looks like this (without id, just the section name):</p>\n\n<p>host/sectionSeName</p>\n\n<p>Is there anyway to hide the Id in the url to make the urls look SEO-friendly, but available for the controller???</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13169703,"title":"Render text as PNG and keep formatting using .Net?","body":"<p>We have a requirement from our client where a user can type into a rich text editor and format their text. Once they have completed typing the user clicks a button to render the text with the  a specific font style and keep the formatting. The font styles will be predetermined, but will be selected at the time of rendering.</p>\n\n<p>I have been looking around and have not found much on the topic, but it is Halloween and I am sugared  out.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":32,"score":-1,"question_id":13175200,"title":"ASP.NET or ASP.NET MVC","body":"<p>i have a general question. I want to develop a Web Application for business process modelling. The application was build using c# and WPF as  Desktop Application Software and now i would like to develope it as Web Application. what technology should i choose?</p>\n\n<p>I've tried to find it myself but there are many different opinions about that topic. Is there any general rule or methodology which can help me decide?</p>\n"},{"tags":["asp.net-mvc","entity-framework","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13174197,"title":"'Microsoft.SqlServer.Types' version 10 or higher could not be found on Azure","body":"<p>I'm trying to make a webapi in ASP.NET MVC 4. The webapi used Entity Framework 5 Spatial types and i have wrote a very simple code. </p>\n\n<pre><code>  public List&lt;Area&gt; GetAllAreas()\n    {\n        List&lt;Area&gt; aList = db.Areas.ToList();\n        return aList;\n    }\n</code></pre>\n\n<p>Area contains DbGeometry.</p>\n\n<p>When i run this local it works, but when i publish it to azure it gives me this error:</p>\n\n<blockquote>\n  <p>Spatial types and functions are not available for this provider because the assembly 'Microsoft.SqlServer.Types' version 10 or higher could not be found.</p>\n</blockquote>\n\n<p>Anyone know how to resolve this ? :)</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":585,"score":3,"question_id":11042556,"title":"How to use WebGrid in a cshtml view?","body":"<p>I am able to use <a href=\"http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid%28v=vs.99%29.aspx\" rel=\"nofollow\">WebGrid</a> in any controller like:</p>\n\n<p><code>var grid = new WebGrid(emailsFetched, columnNames);</code></p>\n\n<p>I had to add a reference in my ASP.NET MVC project to <code>System.Web.Helpers</code> for this.</p>\n\n<p>But when I try to use this web grid in <strong>view</strong> directly (to avoid instantiation and other settings in controller) it says: <code>The type or namespace 'WebGrid' cannot be found</code>. Ok, I tried to add a reference here too:</p>\n\n<p><code>@using System.Web.Helpers</code> but this throws another issue: </p>\n\n<p><code>There is no build provider registered for the extension '.cshtml'. You can register one in the &lt;compilation&gt;&lt;buildProviders&gt; section in the machine.config or web.config. Make sure is has a BuildProviderAppliesToAttribute attribute which includes the value 'Web' or 'All'.</code></p>\n\n<p>This is pretty strange... I've seen enough example on net which are using WebGrid and don't have to declare anything in the cshtml view...</p>\n\n<p>Can you please tell me how to solve this? Or why I encounter this very ugly issue?</p>\n"},{"tags":["asp.net-mvc","iis","web-config","windows-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13140810,"title":"Authentication mode Windows not working","body":"<p>When I try to access my page I only get redirected to login.aspx, which is not what's intended.</p>\n\n<p>What I'm after is instead a windows login popup where I authenticate if my current logged in user is not allowed, and if it is, it goes straight to the application.</p>\n\n<p>I'm running a MVC4 project on an IIS6 webserver (yeah, I know.).</p>\n\n<p>I've disabled \"Enable anonymous access\" in Directory Security - Authentication and access control and checked in \"Integrated Windows authentication\".</p>\n\n<p>My web.config looks as follows:</p>\n\n<pre><code>&lt;authorization&gt;\n  &lt;allow roles=\"DOMAIN\\Role1\"/&gt;\n  &lt;deny users=\"*\"/&gt;\n  &lt;deny users=\"?\"/&gt;\n&lt;/authorization&gt;\n&lt;compilation targetFramework=\"4.0\" debug=\"true\"/&gt;\n&lt;authentication mode=\"Windows\"&gt;\n&lt;/authentication&gt;\n</code></pre>\n\n<p>Any clues?</p>\n"},{"tags":["asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13173480,"title":"mvc kendo grid header text","body":"<p>after looking all over the web, i can't find how to set the header text to the kendo grid.\nfor example instead of FName i would like it to sat \"First name\".\nmaybe one of you guys know?</p>\n\n<pre><code>@(Html.Kendo().Grid(Model)\n    .Name(\"Grid\")\n    .Columns(columns =&gt;\n    {\n        columns.Bound(p =&gt; p.FName).Groupable(false);\n        columns.Bound(p =&gt; p.ShemIvri) ;\n        columns.Bound(p =&gt; p.ShemLoazit);        \n    })\n    .Pageable()\n    .Sortable()\n    .Scrollable() \n    .Filterable()    \n    .DataSource(dataSource =&gt; dataSource        \n        .Ajax()\n        .ServerOperation(false)        \n     )\n)\n</code></pre>\n"},{"tags":["asp.net-mvc","ssl","https","seo","http-status-code-301"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13113674,"title":"Http redirect to Https and SEO with asp.net mvc","body":"<p>I am wondering if I should keep the GET pages off SSL, while the POST of that same URL on SSL?  I am reading issues with doing redirects of required pages that need SSL with SEO.  ASP.NET MVC has an attribute that however does a 302 redirect instead of a 301.  Is there a best practice in doing this with SEO.  I have pages such as Login, Register, an Account page.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13170994,"title":"In Telerik TabStrip (MVC), how to get the selected tab index?","body":"<p>My page looks like this, depending on the index of the selected tab, the Save button needs to behave differently.</p>\n\n<p><img src=\"http://i49.tinypic.com/rviwj6.gif\" alt=\"menu\"></p>\n\n<p>This is the jQuery code.</p>\n\n<pre><code>$(\"#btnSave\").click(function () {\n    var selectedTabIndex = $('#TabStrip').select().index()\n\n    if (selectedTabIndex == 1) {\n        InflowsSave();\n    }\n\n    if (selectedTabIndex == 2) {\n        OutflowsSave();\n    }\n\n});\n</code></pre>\n\n<p>I typed <code>$('#TabStrip').select().index()</code> within the Inspect Elements console.  It doesn't matter which tab is selected, it always returns 2.</p>\n\n<pre><code>&gt;&gt;&gt; $(\"#TabStrip\").select().index()\n\n2\n</code></pre>\n\n<p><b>$(\"#TabStrip\").select()</b></p>\n\n<pre><code>&lt;ul class=\"t-reset t-tabstrip-items\"&gt;\n    &lt;div id=\"TabStrip-1\" class=\"t-content\"&gt;\n    &lt;div id=\"TabStrip-2\" class=\"t-content t-state-active\" style=\"display:block\"&gt;\n    &lt;div id=\"TabStrip-3\" class=\"t-content\"&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","html5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13173679,"title":"how to retrieve the values in cascading dropdown for mulitiple locations in mvc3","body":"<p>I want to display the multiple locations like country, state,city and region in Dropdowns. The above three have separate tables in database.Each Id is the foreign key for other tables.I don't know how to code in view page.</p>\n\n<p>I tried But it is not working properly.</p>\n\n<p>My code is</p>\n\n<pre><code>    &lt;div class=\"editor-field\"&gt;\n     &lt;% var preferredCountries =      Model.CandidatePreferredLocations.Where(l=&gt;l.LocationId == l.Location.Id);%&gt;\n           &lt;% if (preferredCountries.Count() &gt; 0)\n           { %&gt;\n            &lt;% for (int i = 1; i &lt;= preferredCountries.Count(); i++)\n           { %&gt; \n            &lt;% var countryContainerId = \"location-container\" + i.ToString(); %&gt;\n            &lt;div id=\"&lt;%: countryContainerId %&gt;\" style=\"margin-bottom:4px;\"   class=\"location-container left\"&gt;\n            &lt;%: Html.DropDownList(\"PreferredCountry\" + i.ToString(), new      SelectList((IEnumerable&lt;Dial4Jobz.Models.Location&gt;)ViewData[\"Country\"], \"Id\", \"Name\", preferredCountries.ElementAt(i - 1).LocationId), new { @class = \"qualification\" })%&gt; \n                &lt;/div&gt;\n             &lt;% } %&gt;  \n\n         &lt;% } else { %&gt;\n                &lt;div id=\"location-container1\" style=\"margin-bottom:4px;\" class=\"basic-qualification-container left\"&gt;\n                  &lt;%: Html.DropDownList(\"PreferredCountry1\", (SelectList) ViewData[\"Countries\"], \"Any Country\")%&gt; \n                        &lt;select id=\"PreferredState1\" name=\"PreferredState1\"&gt;&lt;/select&gt;\n                        &lt;select id=\"PreferredCity1\" name=\"PreferredCity1\"&gt;&lt;/select&gt;\n                        &lt;select id=\"PreferredRegion1\" name=\"PreferredRegion1\"&gt;&lt;/select&gt;\n                        &lt;/div&gt;\n         &lt;% } %&gt;\n\n         &lt;div class=\"left\"&gt;               \n          &lt;input type=\"button\" id=\"btnAddLocation\" value=\"Add\" /&gt;\n         &lt;input type=\"button\" id=\"btnDelLocation\" value=\"Remove\" /&gt;\n         &lt;/div&gt;\n         &lt;/div&gt;      \n         &lt;br /&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc",".net-4.5","asp.net-4.5"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":478,"score":5,"question_id":11992651,"title":"Is MVC4 baked into .NET 4.5?","body":"<p>A lot of release notes for Visual Studio 2012 talk about .NET 4.5 and MVC4, but I can't tell if MVC4 is actually part of the .NET 4.5 release. Anybody know for sure? I would love not to have to install MVC separately on my server.</p>\n"},{"tags":["asp.net-mvc","iis","png"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":129,"score":2,"question_id":9631170,"title":"Strange image generation error in asp.net","body":"<p>I have an ASP.NET-MVC project where I need to dynamically generate some png images. That's easy. I just create ActionResult that returns FileSreamResult object. To generate images I used classes from System.Drawing such as Bitmap and Image. Everything works fine on local machine and on production server. But when IIS on production server shuts down my application pool due to inactivity and starts it again, image generation starts to fail.</p>\n\n<p>Problem was in code that tries to save image to the stream:</p>\n\n<pre><code>  var imageStream = new MemoryStream();\n  bmp.Save(imageStream, ImageFormat.Png);\n</code></pre>\n\n<p>Exception is: <em>System.Runtime.InteropServices.ExternalException (0x80004005): A generic error occurred in GDI+</em>. So there is no much help. I tried a different solutions and nothing helps. After I have found this topic <a href=\"http://stackoverflow.com/questions/1528525/alternatives-to-system-drawing-for-use-with-asp-net\">Alternatives to System.Drawing for use with ASP.NET?</a> </p>\n\n<p>The main idea of this topic is: </p>\n\n<blockquote>\n  <p>Classes within the System.Drawing namespace are not supported for use within a Windows or ASP.NET service. Attempting to use these classes from within one of these application types may produce unexpected problems, such as diminished service performance and run-time exceptions.</p>\n</blockquote>\n\n<p>So I decided to use WPF classes to generate images. I rewrote all image generation code, but now I get another error after app pool restart. Exception:\n<em>System.Runtime.InteropServices.COMException (0x88982F8A): Exception from HRESULT: 0x88982F8A</em>. This happens when I try to save my PngBitmapEncoder to stream</p>\n\n<pre><code>var stream = new MemoryStream();\nencoder.Save(stream);\n</code></pre>\n\n<p>Maybe anyone encountered this problem or just have any ideas?</p>\n"},{"tags":["asp.net-mvc","asp.net-membership","database-connection","connection-string","mdf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13172855,"title":"Cannot open database ASPNETDB.MDF","body":"<p>I used default Membership of ASP.NET. After formatting PC and installing SQL Server Managment Studio I run application, I can not access my ASPNETDB.MDF, but can access other DB.\nFor example, when I try to register get so error:\n<img src=\"http://i.stack.imgur.com/zJqjk.png\" alt=\"enter image description here\"></p>\n\n<p>Connection string is so:</p>\n\n<pre><code>&lt;add name=\"ApplicationServices\" connectionString=\"data source=.\\SQLEXPRESS; Integrated Security=SSPI; AttachDBFilename=|DataDirectory|aspnetdb.mdf; User Instance=true\" providerName=\"System.Data.SqlClient\"/&gt;\n</code></pre>\n\n<p>How can I access ASPNETDB.MDF?</p>\n"},{"tags":["asp.net-mvc","jqgrid-asp.net"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13172732,"title":"sample example on jqgrid in asp.net mvc?","body":"<p>Has any one worked on  in ASP.NET MVC,i'am beginner in MVC, i tried few articles for jqgrid but i am not able to get it right..i just need a simple example so that first i can understand it properly</p>\n\n<p>Also, what are the benefits of using jqgrid  over normail webgrid in MVC</p>\n"},{"tags":["asp.net-mvc","parameter-passing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13171783,"title":"Pass List of dictionary to asp.net mvc controller","body":"<p>So i have a ViewModel which contains list of dictionary property</p>\n\n<pre><code>public class ViewModel\n{\n    public List&lt;Dictionary&lt;int, bool&gt;&gt; Columns { get; set; }\n}\n</code></pre>\n\n<p>I trying to get back this model from view and all time it returns list with null items. </p>\n\n<pre><code>@Html.Hidden(String.Format(\"Columns[{0}][{1}].Key\", i, firstItem.Id), firstItem.Id)\n@Html.CheckBox(String.Format(\"Columns[{0}][{1}].Value\", i, firstItem.Id), Model.Columns[i][firstItem.Id])\n</code></pre>\n\n<p>This doesnt work.</p>\n\n<pre><code>@Html.CheckBoxFor(m =&gt; m.Columns[i][firstItem.Id])\n</code></pre>\n\n<p>This doesnt work too.</p>\n\n<p>What i am doing wrong?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":13152206,"title":"Validation of Textbox in MVC4","body":"<p>I have a an Update Action to update the value based on my textbox input. I used javascript for my validation. The script and validation works fine only for the first textbox value.<br/>\nMy View Code</p>\n\n<pre><code>     @foreach (var item in Model)\n      {     &lt;tr&gt;          \n         &lt;td align=\"right\" class=\"Text_nocolor\" valign=\"top\"&gt;\n      @using (Html.BeginForm(\"Update\", \"Cart\", new { UserID = Request.QueryString[\"UserID\"] }, FormMethod.Post, new { id = \"myForm\" }))\n     {          \n         @Html.Hidden(\"id\", @Request.QueryString[\"UserID\"] as string)\n         @Html.Hidden(\"productid\", item.ProductID as string)\n         &lt;input id=\"Quantity\" type=\"text\" class=\"Text_nocolor\" name=\"Quantity\" value=\"@item.Quantity\"  onblur=\"return allownumbers() \" maxlength=\"3\"/&gt;  \n          @Html.Hidden(\"unitrate\", item.Rate)               \n          &lt;input type=\"submit\" value=\"Edit\" class=\"Text_nocolor\" onclick=\"return RegainFocus();\" /&gt;\n     }\n       &lt;/td &gt;\n&lt;tr&gt;\n    }\n</code></pre>\n\n<p>The Script I used : <br/></p>\n\n<pre><code> &lt;script type=\"text/javascript\"&gt;\n    function RegainFocus() {\n            if ((document.getElementById(\"Quantity\").value).length == 0) {\n                document.getElementById(\"Quantity\").focus();\n                alert(\"Quantity cannot be empty\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }\n            else if ((document.getElementById(\"Quantity\").value) &gt; 100) {\n                alert(\"There is no enough inventory for this product to fulfill your order\");\n                document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                return false;\n            }           \n        }\n            function allownumbers() {\n                var val = parseInt(document.getElementById(\"Quantity\").value);\n                if (!val || val &lt; 1) {\n                    alert('Please enter a valid value');\n                    document.getElementById(\"Quantity\").value = document.getElementById(\"Quantity\").defaultValue;\n                    return false;                 \n                }\n                document.getElementById(\"Quantity\").value = val;\n                return true;\n            }\n    &lt;/script&gt;\n</code></pre>\n\n<p>I also checked whether I get a different ID for the Textbox. But all the textboxes have same ID and the validation doesnt works for the other textbox except the first textbox.<br/>\nAny Suggestions.</p>\n\n<p>EDIT ::<br/></p>\n\n<pre><code>  function allownumbers() {\n            alert('fasfa');\n            var elements = document.getElementsByName('Quantity');\n            for (var i = 0; i &lt; elements[i].length; i++) {  \n                alert(elements);\n                if (!elements || elements &lt; 1) {\n                    alert('Please enter a valid value');                    \n                    return false;\n                }\n                else if (elements &gt; 100) {\n                    alert('Please enter a value less than 100');\n                    return false;\n                }\n            }               \n            return true;\n        }\n</code></pre>\n\n<p>The model has values and Each textbox contain values in it. but elements return only NaN as value. </p>\n"},{"tags":["asp.net-mvc","content-management-system","dotnetnuke"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":11408881,"title":"Is it possible to create a Dot Net Nuke partial view for an MVC site?","body":"<p>I am looking at the posibility of integrating a third party component into our MVC-based site. The reason is that we want document handling and search features without taking the full job of implementing it from scratch. </p>\n\n<p>I'm unsure about the way to proceed and I am wondering if any of you have any experience with Dot Net Nuke. Is it possible to run an instance of Dot Net Nuke in the cloud and create a partial view providing a document module(cms-like) and a search module?</p>\n\n<p>Is there any other third party systems that are cloud compatible and provide an API for handling documents, security and full text search?</p>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010","iis7","metadata"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":87,"score":4,"question_id":13061036,"title":"How to copy non-code files with the compiled project when referenced by another project in C#","body":"<p>I have a project that acts as wrapper for a <em>3rd party .exe</em> (it has static methods to create the command line and run the executable). I want to use it in at least a couple of projects in my solution. Ideally, the .exe should only be in that wrapper project (I don't want to have to add it to each project that uses it). Right now I'm trying to get this to work with a web project (.NET MVC) running on IIS 7 but when I use <code>Assembly.GetExecutingAssembly().Location</code> to see the directory that my wrapper is called from I'm in a folder like</p>\n\n<blockquote>\n  <p>C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\Temporary ASP.NET\n  Files\\\"my\n  project\"\\65a016fb\\ac5f20a7\\assembly\\dl3\\d8de0f10\\06e277a2_55b2cd01</p>\n</blockquote>\n\n<p>and my 3rd party .exe is nowhere to be found. Is it possible to copy files with a reference that do not compile?</p>\n\n<p>Btw, I have set the <em>\"Copy to output directory\"</em> and <em>\"Build Action\"</em> properties of my .exe to <em>\"Copy always\"</em> and <em>\"Content\"/\"Resource\"/\"Embedded Resource\"</em> without success so far.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":5,"up_vote_count":26,"down_vote_count":0,"view_count":3253,"score":26,"question_id":2697299,"title":"asp.net mvc: why is Html.CheckBox generating an additional hidden input","body":"<p>I just noticed that <code>Html.CheckBox(\"foo\")</code> generates 2 inputs instead of one, anybody knows why is this so ?</p>\n\n<pre><code>&lt;input id=\"foo\" name=\"foo\" type=\"checkbox\" value=\"true\" /&gt;\n&lt;input name=\"foo\" type=\"hidden\" value=\"false\" /&gt; \n</code></pre>\n"},{"tags":["javascript","jquery","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13156484,"title":"Run javascript jquery in razor page context","body":"<p>I have a asp.net razor partial view which is used multiple times on one page.\nIn that partial view I have javascript in the $(document).ready() which I want to do some jQuery stuff on the content of the partial view.</p>\n\n<pre><code>&lt;div class=\"someclass\"&gt;\n&lt;/div&gt;\n&lt;script&gt;\n    $(document).ready(function() {\n        $('.someclass').dosomething();\n    ));\n&lt;/script&gt;\n</code></pre>\n\n<p>So the problem is that $('.someclass') returns to much elements when this partial view is use multiple times on one page.\nHow can I achieve that $('.someclass') returns only the intended element?</p>\n\n<p>The only solution I see is to generate a unique id for the element and use that in the jQuery selector. But I don't like generating id's for that.</p>\n\n<p>Any other ideas for a solution?</p>\n"},{"tags":["jquery","asp.net-mvc","html-helper","html.dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13141437,"title":"MVC DropdownListFor html helper interferes with JQuery submit when @size specified","body":"<p>I have this bizarre issue with MVC's html helper in that when I specify the @size for @Html.DropdownListFor, it prevents the jquery .submit from communicating with the server.  Any ideas as to what might be causing this?  Is there an alternative I could use to make the dropdown tall?  Here's the code:</p>\n\n<pre><code>           @using (Ajax.BeginForm(\"CreateInProgress\", \"Audit\", new AjaxOptions {     \nHttpMethod = \"POST\", OnSuccess = \"CreateInProgressSuccess\" }, new { id = \"CreateInProgressMainForm\"}))\n           {\n              &lt;div id=\"reqTabContentBox\" class=\"formPageContainer\"&gt;\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateApproveButton.ConfigurableLabelDesc)\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateDisapproveButton.ConfigurableLabelDesc)\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateSaveButton.ConfigurableLabelDesc)\n                  @Html.HiddenFor(x =&gt; x.ConfigDoc.CreateAdvanceButton.ConfigurableLabelDesc)\n\n                  @Html.Partial(\"_CreateAudit\")\n               &lt;/div&gt;\n                       @Html.DropDownListFor(x =&gt; x.AuditDoc.AuditTemplateId, new SelectList(Model.AuditDoc.AuditTemplates, \"Id\", \"Name\"), new { size = \"6\", @class = \"left\" })\n              &lt;div id=\"finalButtons\" class=\"formPageContainer\"&gt;\n                 &lt;input id=\"AdvanceDirection\" name=\"AuditDoc.AdvanceDirection\" type=\"hidden\" value=\"Forward\" /&gt;\n\n                  &lt;span class=\"field-validation-error\" id=\"CreateFormValidation\"&gt;&lt;/span&gt;  \n                  &lt;span class=\"field-validation-success\" id=\"CreateSaveSuccess\"&gt;&lt;/span&gt; \n                  @if(Model.AuditDoc.CurrentStates.StateName == \"Active\")\n                  {\n                    &lt;div class=\"btnContainer\"&gt;\n                       &lt;input type=\"button\" id=\"SaveCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateSaveButton.ConfigurableLabelDesc\" /&gt;\n                       &lt;input type=\"button\" id=\"AdvanceCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateAdvanceButton.ConfigurableLabelDesc\" /&gt; \n                    &lt;/div&gt;\n                  }\n                  else\n                  {\n                    &lt;label&gt;@Model.ConfigDoc.AllEnterPrivateCommentLabel.ConfigurableLabelDesc&lt;/label&gt; @Html.TextAreaFor(x =&gt; x.AuditDoc.PrivateComment, 0, 0, false)\n\n                    &lt;div class=\"btnContainer\"&gt;\n                       &lt;input type=\"button\" id=\"DisapproveCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateDisapproveButton.ConfigurableLabelDesc\" @Model.OwnerApprovalAttribute /&gt;\n                       &lt;input type=\"button\" id=\"ApproveCreateInProgress\" class=\"toggleAllSelectors\" value=\"@Model.ConfigDoc.CreateApproveButton.ConfigurableLabelDesc\" @Model.OwnerApprovalAttribute /&gt;\n                    &lt;/div&gt;\n                  }\n               &lt;/div&gt;\n           }\n</code></pre>\n\n<p>And here's the jquery submit:</p>\n\n<pre><code>$(\"#CreateAuditMainForm\").submit();\n</code></pre>\n\n<p>Here's the generated code for the Html dropdownlistfor helper:</p>\n\n<pre><code>&lt;select class=\"left valid\" data-val=\"true\" data-val-number=\"The field AuditTemplateId must be a number.\" data-val-required=\"The AuditTemplateId field is required.\" id=\"AuditDoc_AuditTemplateId\" name=\"AuditDoc.AuditTemplateId\" size=\"6\" style=\"display: block; \"&gt; ... &lt;/select&gt;\n</code></pre>\n\n<p>I'd appreciate any help or words of wisdom!</p>\n"},{"tags":["c#","asp.net-mvc","iis","asp.net-mvc-2"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13164210,"title":"Some Static Content Loads Very Slowly","body":"<p>I'm attempting to install an MVC 2 web application to our production server.  This app has been run and tested on several test servers, but in production, some static content (most notably JavaScript files) load very, very slowly (sometimes 60+ seconds).  What's interesting, however, is that this isn't the case for all static content--during a typical page load cycle, all but one of the JS files will be successfully transferred to the client, but one will \"stick\" and sometimes never download.</p>\n\n<p>What's also odd is that if I go directly to the static content, it loads immediately.  </p>\n\n<p>I've investigated the handler mappings, and compared the IIS configuration to our test environment, and everything is similar.  What would cause this?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13168745,"title":"two jquery dialog share same partial view in one page","body":"<p>I have a page contains two jquery dialogs, they both render the same partial view \"_Edit\". Somehow, one of the partial views returns modal with Null values when submit with ajax. The other works fine. I tested that they both worked independently(commented the code).</p>\n\n<pre><code>&lt;div&gt;\n    @Html.ActionLink(\"New Paragraph\", null, null, new{id=\"addPopup\", @class = \"actionLink\"})\n&lt;/div&gt;\n&lt;div id=\"divParagraphList\"&gt;\n    @Html.Partial(\"_List\", Model.EmailNotificationParagraphList)\n&lt;/div&gt;\n\n&lt;div id=\"dialog-edit\" style=\"display: none\"&gt;\n    @Html.Partial(\"_Edit\", Model.EditEmailParagraph, new ViewDataDictionary())\n&lt;/div&gt;\n&lt;div id=\"dialog-add\" style=\"display: none\"&gt;\n    @Html.Partial(\"_Edit\", Model.AddEmailParagraph)\n&lt;/div&gt;\n\n    [HttpPost]\n    public ActionResult Update(EmailNotificationParagraphModel model)\n    {\n        EmailNotificationParagraphViewModel newModel = new EmailNotificationParagraphViewModel();\n\n        if (ModelState.IsValid)\n        {\n\n            return PartialView(\"_List\", newParagraphList);\n        }\n\n        return Json(model);\n    }\n\n    [HttpPost]\n    public ActionResult Add(EmailNotificationParagraphModel model)\n    {\n\n        if (ModelState.IsValid)\n        {\n\n            return PartialView(\"_List\", newParagraphList);\n        }\n\n        return Json(model);\n    }\n</code></pre>\n\n<p>Currently, the add works fine. The Edit returns modal with null values. Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":679,"score":0,"question_id":9604049,"title":"Asp.net MVC 3 Validation exclude some field validation in TryUpdateModel","body":"<p>I am using ASP.NET MVC Razor And Data Annotation validators\nMy model:</p>\n\n<pre><code>public class Person \n{ \n    public int id { get; set; } \n\n    [Required] \n    public string FirstName { get; set; } \n\n    [Required] \n    public string LastName { get; set; } \n} \n</code></pre>\n\n<p>FirstName And LastName are Requerd.\nI want to Edit FirstName. My Methode is:</p>\n\n<pre><code>public ActionResult Edit([Bind(Include = \"FirstName\")]Person person)\n{\n    var p = GetPerson();\n    if (TryUpdateModel(p))\n    {\n        //Save Changes;\n    }\n}\n</code></pre>\n\n<p>But TryUpdateModel always return false. because LastName is Invalid.</p>\n\n<p>How Can I Prevent check Validation Of LastName in TryUpdateModel?</p>\n\n<p>Note:</p>\n\n<ul>\n<li>The code is Simplified. my real code is very Complex</li>\n<li>I have To Use Requierd For Two Property</li>\n<li>I dont Want to use Different Model Class</li>\n</ul>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing","action-filter","actionfilterattribute"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13169937,"title":"ActionExecutingContext - ActionParameters vs RouteData","body":"<p>Given the following code:</p>\n\n<pre><code>public class MyActionFilter : ActionFilterAttribute\n{\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        var a = filterContext.ActionParameters[\"someKey\"];\n        var b = filterContext.RouteData.Values[\"someKey\"];          \n        base.OnActionExecuting(filterContext);\n    }\n}\n</code></pre>\n\n<p>What is the difference between <code>a</code> and <code>b</code> ?</p>\n\n<p>When should we be using action parameters over route data? What is the difference?</p>\n"},{"tags":["c#","jquery","asp.net-mvc","jquery-ajax"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13169426,"title":"What is wrong with this JavaScript (using Ajax call in MVC 3)?","body":"<p><em>Here is my JavaScript:</em></p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $(\"select#City_DDL_ID\").change(function (evt) {\n            if ($(\"select#City_DDL_ID\").val() != \"-1\") {\n                $.ajax({\n                    url: \"/Home/GetHotels\",\n                    type: 'POST',\n                    dataType: \"json\",\n                    data: { id: $(\"select#City_DDL_ID\").val() },\n                    success: function (response) {\n//                        $('#Hotel_DDL_ID').attr('disabled', false);\n                        $(\"select#Hotel_DDL_ID\").replaceWith(response);\n                    },\n                    error: function (xhr) {\n                        alert(\"Something went wrong, pleae try again\");\n                    }\n                });\n            }\n        });\n    });\n</code></pre>\n\n<p>\n<em>Here is the Index.cshtml:</em></p>\n\n<pre><code>@model RoomReservation.Webb.Models.HomeViewModel\n\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Index&lt;/h2&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Select a city and a hotel&lt;/legend&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x=&gt;x.City_DDL_ID, new SelectList(Model.AllCities, \"Value\", \"Text\"),\"...pick a city...\" )\n    &lt;br /&gt;\n    &lt;br /&gt;\n    @Html.DropDownListFor(x =&gt; x.Hotel_DDL_ID, Enumerable.Empty&lt;SelectListItem&gt;(), \"...pick a hotel...\", new { disabled = \"disabled\"})\n    &lt;br /&gt;\n    &lt;br /&gt;\n&lt;/\n\nfieldset&gt;\n</code></pre>\n\n<p><em>And here is the method that ajax calls:</em></p>\n\n<pre><code>public JsonResult GetHotels(int id) \n{\n   if (id &gt; 0)\n   {\n      var hotels = bl.ReturnAllHotelsInCity(id);\n      return Json(hotels);\n   }\n   else\n   {\n      throw new Exception(\"Hotel not reachable, please try again\");\n   }\n}\n</code></pre>\n\n<p>After selecting City in City_DDL_ID, my Hotel_DDL_ID disapperas.\nCan you help me, I am new in javasrcipt and ajax?</p>\n\n<p>Here is the newset script, and still not working:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $('#City_DDL_ID').change(function () {\n        var selectedCity = $(this).val();\n        if (selectedCity != null &amp;&amp; selectedCity != '-1') {\n            $.getJSON('@Url.Action(\"GetHotels\")', { id: selectedCity }, function (hotels) {\n                var hotelsSelect = $('#Hotel_DDL_ID');\n                hotelsSelect.empty();\n                $.each(hotels, function (index, hotel) {\n                    hotelsSelect.append($('&lt;option/&gt;',\n                    {\n                        value: hotel.Value,\n                        text: hotel.Text\n                    }));\n                });\n                $('#Hotel_DDL_ID').attr('disabled', false);\n            });\n        }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>So, what to do?</p>\n\n<p>Thank you all for your help, this latest script of mine is working, I change the default browser to Chrome.\nThank you all once again\nCheers</p>\n\n<p>P.S. Admin:How to mark question as answered?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":4013,"score":8,"question_id":1066350,"title":"How to get MvcApplication instance in Asp.NET Controller?","body":"<p>I think <code>MvcApplication</code> is a global singleton. I want to get the instance of <code>MvcApplication</code> in controller. Then I put following code in controller:</p>\n\n<p><code>MvcApplication app = HttpContext.Current.Application as MvcApplication;</code></p>\n\n<p>it give me error:</p>\n\n<p><code>Error  2   'System.Web.HttpContextBase' does not contain a definition for 'Current' and no extension method 'Current' accepting a first argument of type 'System.Web.HttpContextBase' could be found (are you missing a using directive or an assembly reference?)</code></p>\n\n<p>Why? How to access <code>MvcApplication</code> in controller?</p>\n"},{"tags":["xml","asp.net-mvc","c#-4.0","xslt","xml-transform"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13142469,"title":"Transforming XML as a string with XSLT as a string in C# .NET 4.0 - Invalid characters in path","body":"<p>I have an XML file defined as:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding='UTF-8'?&gt;\n&lt;contentlets&gt;\n&lt;content&gt;\n  &lt;entry&gt;\n    &lt;string&gt;link&lt;/string&gt;\n    &lt;string&gt;http://www.myLink.com&lt;/string&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;stInode&lt;/string&gt;\n    &lt;string&gt;0b4f59c1-6dee-4c1e-a0fb-353c34c8d372&lt;/string&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;linkType&lt;/string&gt;\n    &lt;string&gt;Category Title&lt;/string&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;string&gt;linkText&lt;/string&gt;\n    &lt;string&gt;Title&lt;/string&gt;\n  &lt;/entry&gt;\n&lt;/content&gt;\n&lt;/contentlets&gt;\n</code></pre>\n\n<p>and an XSLT defined as:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:msxsl=\"urn:schemas-microsoft-com:xslt\" exclude-result-prefixes=\"msxsl\"\n&gt;\n    &lt;xsl:output method=\"html\" omit-xml-declaration=\"yes\" indent=\"yes\"/&gt;\n    &lt;xsl:template match=\"@* | node()\"&gt;\n        &lt;div id=\"content\" data-role=\"content\"&gt;\n            &lt;ul data-role=\"listview\" data-inset=\"true\" data-filter=\"false\"&gt;\n                &lt;li data-role=\"list-divider\"&gt;Category Title&lt;/li&gt;\n                &lt;xsl:for-each select=\"content\"&gt;\n                    &lt;li data-inline=\"false\" data-icon=\"arrow-r\" data-iconpos=\"right\"&gt;\n                        &lt;a target=\"_blank\"&gt;\n                        &lt;xsl:for-each select=\"entry\"&gt;\n                            &lt;xsl:if test=\"string='link'\"&gt;\n                                &lt;xsl:attribute name=\"href\"&gt;\n                                    &lt;xsl:value-of select=\"string[2]\"/&gt;\n                                &lt;/xsl:attribute&gt;\n                            &lt;/xsl:if&gt;\n                            &lt;xsl:if test=\"string='linkText'\"&gt;\n                                &lt;h3&gt;\n                                    &lt;xsl:value-of select=\"string[2]\"/&gt;\n                                &lt;/h3&gt;\n                            &lt;/xsl:if&gt;\n                        &lt;/xsl:for-each&gt;\n                        &lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/xsl:for-each&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>I am successful in applying this transformation in Visual Studio 2010, however, I want to apply this transformation and store the resulting HTML in a string. I am doing this with a custom class defined as follows:</p>\n\n<pre><code>public class XsltTransformer\n{\n    private readonly XslCompiledTransform xslTransform;\n\n    public XsltTransformer(string xsl)\n    {\n        try\n        {\n            xslTransform = new XslCompiledTransform();\n\n            using (var stringReader = new StringReader(xsl))\n            {\n                using (var xslt = XmlReader.Create(stringReader))\n                {\n                    xslTransform.Load(xslt);\n                }\n            }\n        }\n        catch (Exception ex)\n        {\n            Log.WriteLine(ex.ToString());\n        }\n    }\n\n    public string Transform(string strXml)\n    {\n        try\n        {\n            string output = String.Empty;\n            using (StringReader sri = new StringReader(strXml))\n            {\n                using (XmlReader xri = XmlReader.Create(sri))\n                {\n                    using (StringWriter sw = new StringWriter())\n                    using (XmlWriter xwo = XmlWriter.Create(sw, xslTransform.OutputSettings))\n                    {\n                        xslTransform.Transform(xri, xwo);\n                        output = sw.ToString();\n                    }\n                }\n            }\n\n            return output;\n        }\n        catch (Exception ex)\n        {\n            Log.WriteLine(ex.ToString());\n            return String.Empty;\n        }\n    }\n}\n</code></pre>\n\n<p>I then call the following to actually apply the transformation:</p>\n\n<pre><code>string strXslt = String.Empty;\nstring strXml = String.Empty;\n\nusing (StreamReader xsltReader = new StreamReader(Server.MapPath(\"~/Content/xsl/test.xslt\")))\n{\n    strXslt = xsltReader.ReadToEnd();\n}\n\nusing (StreamReader xmlReader = new StreamReader(Server.MapPath(\"~/Content/xml/test.xml\")))\n{\n    strXml = xmlReader.ReadToEnd();\n}\n\nXsltTransformer transformer = new XsltTransformer(strXslt);\nreturn transformer.Transform(strXml);\n</code></pre>\n\n<p>When applying the transformation I am getting an \"Illegal characters in path.\" error. I know that my XML and XSLT files are coming through correctly as strings I just can't figure out why I am getting this error when applying the transformation.</p>\n\n<p>Any ideas as to whats causing this error?</p>\n\n<p><strong>EDIT:</strong>\nHere is the stack trace:</p>\n\n<pre><code>[ArgumentException: Illegal characters in path.]\nSystem.IO.Path.CheckInvalidPathChars(String path) +126\nSystem.IO.Path.Combine(String path1, String path2) +38\nSystem.Web.Compilation.DiskBuildResultCache.GetPreservedDataFileName(String cacheKey) +27\nSystem.Web.Compilation.DiskBuildResultCache.GetBuildResult(String cacheKey, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate) +14\nSystem.Web.Compilation.BuildManager.GetBuildResultFromCacheInternal(String cacheKey, Boolean keyFromVPP, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate) +200\nSystem.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate) +51\nSystem.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +68\nSystem.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +111\nSystem.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +125\nSystem.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound) +35\nSystem.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +9\nSystem.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath) +41\nSystem.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]&amp; searchedLocations) +150\nSystem.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]&amp; searchedLocations) +304\nSystem.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache) +136\nSystem.Web.Mvc.&lt;&gt;c__DisplayClassc.&lt;FindView&gt;b__b(IViewEngine e) +24\nSystem.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths) +127\nSystem.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName) +181\nSystem.Web.Mvc.ViewResult.FindView(ControllerContext context) +138\nSystem.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +129\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13\nSystem.Web.Mvc.&lt;&gt;c__DisplayClass1c.&lt;InvokeActionResultWithFilters&gt;b__19() +23\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +260\nSystem.Web.Mvc.&lt;&gt;c__DisplayClass1e.&lt;InvokeActionResultWithFilters&gt;b__1b() +19\nSystem.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +177\nSystem.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343\nSystem.Web.Mvc.Controller.ExecuteCore() +116\nSystem.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97\nSystem.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10\nSystem.Web.Mvc.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5() +37\nSystem.Web.Mvc.Async.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0() +21\nSystem.Web.Mvc.Async.&lt;&gt;c__DisplayClass8`1.&lt;BeginSynchronous&gt;b__7(IAsyncResult _) +12\nSystem.Web.Mvc.Async.WrappedAsyncResult`1.End() +62\nSystem.Web.Mvc.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d() +50\nSystem.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7\nSystem.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22\nSystem.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60\nSystem.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9\nSystem.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8836913\nSystem.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n</code></pre>\n"},{"tags":["asp.net-mvc","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13162357,"title":"Ninject Get Instance not working","body":"<p>In my global.asax file I have a dependency set up between an interface and a class. The injection always works and there is no issue with the setup.</p>\n\n<p>In a model binder, in the same solution, I am trying to get the concrete class mapped to that interface thus</p>\n\n<pre><code>IKernel kernel = new StandardKernel();\nvar samurai = kernel.Get&lt;Samurai&gt;();\n</code></pre>\n\n<p>For some reason this does not work and I get an error saying \"object initialisation null\" or something to that effect.  As I understand it this makes sense since this kernel I just created is a new object not linked to the object created in the global.asax.  How do I get the one in the global.asax or am I doing something else wrong?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-routing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1057,"score":2,"question_id":2690779,"title":"How can I get controller type and action info from a url or from route data?","body":"<p>How can I get the controller action (method) and controller type that will be called, given the <code>System.Web.Routing.RouteData</code>?</p>\n\n<p>My scenario is this - I want to be able to do perform certain actions (or not) in the <code>OnActionExecuting</code> method for an action.</p>\n\n<p>However, I will often want to know not the current action, but the \"root\" action being called; by this I mean I may have a view called \"Login\", which is my login page. This view may include\nanother partial view \"LeftNav\". When <code>OnActionExecuting</code> is called for LeftNav, I want to be able to determine that it is really being called for the \"root\" aciton of Login.</p>\n\n<p>I realise that by calling <code>RouteTable.Routes.GetRouteData(actionExecutingContext.HttpContext)</code>, I can get the route for the \"root\" request, but how to turn this into\nmethod and type info?</p>\n\n<p>The only solution I have so far, is something like:</p>\n\n<pre><code> var routeData = RouteTable.Routes.GetRouteData(actionExecutingContext.HttpContext)\n var routeController = (string)routeData.Values[\"controller\"]; \n var routeAction = (string)routeData.Values[\"action\"];\n</code></pre>\n\n<p>The problem with this is that \"routeController\" is the controller name with the \"Controller\" suffix removed, and is not fully qualified; ie it is \"Login\", rather than \"MyCode.Website.LoginController\".</p>\n\n<p>I would far rather get an actual <code>Type</code> and <code>MethodInfo</code> if possible, or at least a fully qualified type name.</p>\n\n<p>Any thoughts, or alternative approaches?</p>\n\n<p>[<strong>EDIT</strong> - this is ASP.Net MVC 1.0]</p>\n"},{"tags":["sql-server","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13167499,"title":"How safe is MVC 4 Default Database?","body":"<p>Im kinda new at MVC 4 and im trying to learn it. I wanted to ask how safe is mvc 4 defaul databases.</p>\n\n<p>When i configure the project and enable role authorization it creates an ASPNETDB.mdf. Can i trust it and its default database in a big project?</p>\n"},{"tags":["asp.net-mvc","web-config","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13066750,"title":"Membership provider with different ApplicationName in area","body":"<p>I have a <code>web.config</code> in my MVC3 application, I have an <code>Admin</code> area in my MVC3 application too.</p>\n\n<p>On the front end I hook asp.net users into a <code>Customers</code> table and my application relies on this  table to operate. In the <code>Admin</code> area I have an <code>Administrator Role</code> and <code>User</code> but this login also works for the front end. I can create a customer for my <code>Admin</code> so my application doesn't fail but ideally I would like to separate the logins from the front and <code>Admin</code> area.</p>\n\n<p>I want to put a second <code>web.config</code> inside my <code>Admin</code> area that has a different application name so that the Admin account can never be logged into the front end. e.g.</p>\n\n<pre><code>    &lt;profile&gt;\n      &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"SecurityConn\" applicationName=\"/\" /&gt;\n      &lt;/providers&gt;\n    &lt;/profile&gt;\n</code></pre>\n\n<p>But I don't know where to put this or if it is even possible</p>\n\n<pre><code>applicationName=\"/AdminArea\"\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","authentication","active-directory","authorization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":13167213,"title":"Want to look up an AD Group's SID without using samAccountName or DirectoryServices.AccountManagement","body":"<h3>Question:</h3>\n\n<p>In C#, is there a way to look up an Active Directory Group SID <em>without</em> using <code>DirectoryServices.AccountManagement</code> library or icky-ugly LDAP?</p>\n\n<h3>[UPDATED] -- Why I'm asking:</h3>\n\n<p>The <code>[Authorize]</code> attribute and the underlying <code>WindowsPrincipal.IsInRole(string role)</code> only check against the <code>samAccountName</code> in AD.</p>\n\n<p>Not only is this a legacy identifier that Microsoft suggests avoiding when checking roles: </p>\n\n<pre><code>// It is also better from a performance standpoint than the overload that accepts a string. \n// The aformentioned overloads remain in this class since we do not want to introduce a \n// breaking change. However, this method should be used in all new applications and we should document this.\npublic virtual bool IsInRole (SecurityIdentifier sid) {}\n</code></pre>\n\n<p>but I also don't have control over AD, and cannot ensure the samAccountName remains in sync with the \"user friendly\" names we request be setup. This is the reason the issue came up in the first place, passing a pluralized (Name) rather than a singular (samAccountName) string... the values were not the same.</p>\n\n<p>Also, the samAccountName and the SID may change - for example, if an AD admin deletes the account and re-creates it, the SID will for sure be different, and the samAccountName another spot for human error, but they will always restore the Name/UPN values as requested.</p>\n\n<p>Eventually I want to write a clean authorize attribute of my own to check against group membership without having to hard code SAMs or SIDs. </p>\n\n<p>I know I can do this with DirectoryServices.AccountManagement:</p>\n\n<pre><code>// get group principal \nvar pc = new PrincipalContext(ContextType.Domain, \"domainName\");\nvar gp = GroupPrincipal.FindByIdentity(pc, IdentityType.Name, \"groupName\");\n// check if user is in group.\nvar up = UserPrincipal.Current;\nvar usersGroups = up.GetGroups();\nvar inGroup = usersGroups.Contains(gp);\n</code></pre>\n\n<p>I just wanted to know if there was an easier, less dependent, non legacy way to do this to keep the attribute-to-be-programmed, lean as possible.</p>\n\n<p>My prior, related question:\n<a href=\"http://stackoverflow.com/questions/13147132/active-directory-group-membership-checking-in-net-4-5/13166073#13166073\">Active Directory Group Membership Checking in .Net 4.5</a></p>\n"},{"tags":["c#","javascript","asp.net-mvc","mime-types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13166284,"title":"EventSource's response has a MIME type (\"text/html\") that is not \"text/event-stream\"","body":"<p>When I try to hook up the EventSource to my controller it keeps saying:</p>\n\n<blockquote>\n  <p>EventSource's response has a MIME type (\"text/html\") that is not\n  \"text/event-stream\". Aborting the connection.</p>\n</blockquote>\n\n<p>I made the following class to help with the handling and preparation of a response. In this class I believe I set the responseType accordingly to text\\event-stream.</p>\n\n<pre><code>public class ServerSentEventResult : ActionResult\n{\n    public delegate string GetContent();\n    public GetContent Content { get; set; }\n    public int Version { get; set; }\n\n    public override void ExecuteResult(ControllerContext context)\n    {\n        if (context == null)\n        {\n            throw new ArgumentNullException(\"context\");\n        }\n\n        if (this.Content != null)\n        {\n            HttpResponseBase response = context.HttpContext.Response;\n            response.ContentType = \"text/event-stream\"; response.BufferOutput = false; response.Charset = null;\n            string[] newStrings = context.HttpContext.Request.Headers.GetValues(\"Last-Event-ID\");\n            if (newStrings == null || newStrings[0] != this.Version.ToString())\n            {\n                try\n                {\n                    response.Write(\"retry:250\\n\");\n                    response.Write(string.Format(\"id:{0}\\n\", this.Version));\n                    response.Write(string.Format(\"data:{0}\\n\\n\", this.Content()));\n                    response.End();\n                }\n                catch (HttpException e) { }\n            }\n            else\n            {\n                response.Write(String.Empty);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Could someone please help me out on this one? Thousand times thanks in advance!</p>\n"},{"tags":["asp.net","html","asp.net-mvc","forms","post"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13167571,"title":"Grouping Posted Arrays with MVC .NET from HTML Form","body":"<p>I'm working on a very flexible HTML form with ASP.NET MVC. I have a \"Quantity\" input element which dynamically creates [its value] sets of input elements later in the form.</p>\n\n<p>For instance, if Quantity is set to 1, I have one set of textboxes for username, room number, and building name. But if Quantity is set to 10, ten each of those textboxes appear.</p>\n\n<p>Obviously, when the data is posted back to the server, I need to correctly group each username, room, and building together, and not get them jumbled up.</p>\n\n<p>It seems like the easiest way to do this would be to make every set the same:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;input type=\"text\" name=\"username\"/&gt;\n&lt;input type=\"text\" name=\"room\"/&gt;\n&lt;select name=\"building\"&gt;                           &lt;!--All this x Quantity--&gt;\n   &lt;option value=\"TARDIS\"&gt;TARDIS&lt;/option&gt;\n   &lt;option value=\"USS Enterprise\"&gt;USS Enterprise&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;input type=\"text\" name=\"username\"/&gt; &lt;!--And so on...--&gt;\n</code></pre>\n\n<p>And then trust that the POST string will preserve the order in which the elements are written in the HTML, thereby allowing me to say back on the server once I've captured these values in arrays that <code>usernames[0]</code>, <code>rooms[0]</code>, and <code>buildings[0]</code> go together, as do all the other entries for equal indices.</p>\n\n<p>Does that work 100% of the time? Is it safe? I can think of some ways to make a hard-and-fast association between the groups of inputs, but they involve some mildly irritating javascript and some really obnoxious C#. This seems like it will work out of the box. Eh?</p>\n"},{"tags":["c#","asp.net-mvc","linq-to-sql"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3892,"score":2,"question_id":2636959,"title":"The null value cannot be assigned to a member with type System.Int64 which is a non-nullable value type","body":"<p>I'm getting the following error in my MVC2 app using Linq to SQL (I am new to both). I am connected to an actual SQL server not weird mdf:</p>\n\n<pre><code>System.InvalidOperationException The null value cannot be assigned to a member with type System.Int64 which is a non-nullable value type\n</code></pre>\n\n<p>My SQL table has a column called MessageID. It is BigInt type and has a primary key, NOT NULL and an IDENTITY 1 1, no Default</p>\n\n<p>In my dbml designer it has the following declaration for this field:</p>\n\n<pre><code>[global::System.Data.Linq.Mapping.ColumnAttribute(Storage=\"_MessageId\", AutoSync=AutoSync.OnInsert, DbType=\"BigInt NOT NULL IDENTITY\", IsPrimaryKey=true, IsDbGenerated=true)]\npublic long MessageId\n{\n    get\n    {\n        return this._MessageId;\n    }\n    set\n    {\n        if ((this._MessageId != value))\n        {\n            this.OnMessageIdChanging(value);\n            this.SendPropertyChanging();\n            this._MessageId = value;\n            this.SendPropertyChanged(\"MessageId\");\n            this.OnMessageIdChanged();\n        }\n    }\n}\n</code></pre>\n\n<p>It keeps telling me that null cannot be assigned - I'm not passing through null! It's a long - it can't even be null!</p>\n\n<p>Am I doing something stupid? I can't find a solution anywhere!</p>\n\n<p>I made this work by changing the type of this property to <code>Nullable&lt;long&gt;</code> but surely this can't be right?</p>\n\n<p><strong>Update:</strong>\nI am using InsertOnSubmit. Simplified code:</p>\n\n<pre><code>public ActionResult Create(Message message)\n{\n    if (ModelState.IsValid)\n    {\n       var db = new MessagingDataContext();\n       db.Messages.InsertOnSubmit(message);\n       db.SubmitChanges(); //line 93 (where it breaks)\n    }\n}\n</code></pre>\n\n<p>breaks on SubmitChanges() with the error at the top of this question.</p>\n\n<p><strong>Update2:</strong>\nStack trace:</p>\n\n<pre><code>   at Read_Object(ObjectMaterializer`1 )\n   at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()\n   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)\n   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)\n   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)\n   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)\n   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)\n   at Qanda.Controllers.MessagingController.Ask(Message message) in C:\\Qanda\\Qanda\\Controllers\\MessagingController.cs:line 93\n</code></pre>\n\n<p><strong>Update3:</strong>\nNo one knows and I don't have enough clout to offer a bounty! So continued on my <a href=\"http://www.britishdeveloper.co.uk/2010/04/linq-to-sql-null-value-cannot-be.html\" rel=\"nofollow\">ASP.NET blog</a>. Please help!</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13167504,"title":"Razor syntax isn't recognizing '@' after an underscore","body":"<p>I am trying to do the following:</p>\n\n<pre><code>@foreach(var p in @Model.line_products){\n&lt;img class=\"small_img_@Model.line_products[i].short_name\" src=\"/Content/images/@Model.line_products[i].image_name\" /&gt;\n}\n</code></pre>\n\n<p>Which isn't working, it renders the text just the way it is, not recognizing the '@'. I found this <a href=\"http://stackoverflow.com/questions/4377317/razor-view-syntax-doesnt-recognize-the-in-an-html-attribute\">other post</a> in Stackoverflow, which suggests adding parenthesis in the following way:</p>\n\n<pre><code>@foreach(var p in @Model.line_products){\n&lt;img class=\"small_img_(@Model.line_products[i].short_name)\" src=\"/Content/images/@Model.line_products[i].image_name\" /&gt;\n}\n</code></pre>\n\n<p>Using this workaround, I get that my id is rendered as small_img_(<strong>MODEL ATTRIBUTE</strong>). Isn't there a workaround which doesn't require adding specific characters? (such as the parenthesis).</p>\n"},{"tags":["asp.net-mvc","entity-framework","one-to-many"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13166025,"title":"Update EF ICollection property","body":"<p>How do I update a ICollection property in EF?</p>\n\n<p>I get this error message;</p>\n\n<p>\"Cannot implicitly convert type 'int' to '<code>System.Collections.Generic.ICollection&lt;MySolution.Domain.UserProfile&gt;</code>'\"</p>\n\n<p>My entities:</p>\n\n<pre><code>public class Department\n{\n    public virtual int Id { get; set; }\n    public virtual string DepartmentTitle { get; set; }\n    public virtual ICollection&lt;UserProfile&gt; UserProfiles { get; set; }\n\n}\n\npublic class UserProfile\n{\n    public virtual int UserId { get; set; }\n    public virtual string UserName { get; set; }\n    public virtual string FirstName { get; set; }\n    public virtual string LastName { get; set; }\n\n}\n</code></pre>\n\n<p>Code;</p>\n\n<pre><code>    var userProfile = _db.UserProfiles.Single(d =&gt; d.UserName == \"SomeUserName\");\n\n    var department = _db.Departments.Single(d =&gt; d.Id == variableDepartmentID);\n    department.UserProfiles = uProfile.UserId;\n    _db.UpdateDepartment(department);\n    _db.Save();\n</code></pre>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":13149728,"title":"object reference not set to an instance of object even though the object is not null","body":"<p>In my method it is throwing an error and i am not really understanding why since when i debug i could see that there is a value being passed in. The error message is the all time popular: Object reference not set to an instance of an object. </p>\n\n<pre><code> private string GetUserName(int selectedUserId)\n    {\n        var user = _userService.Get(selectedUserId);\n        return user == null ? string.Empty : user.FullName;\n    }\n</code></pre>\n\n<p>User Service:</p>\n\n<pre><code>public User Get(int userId)\n    {\n        return _userRepository.Get(userId);\n    }\n</code></pre>\n\n<p>User Repository:</p>\n\n<pre><code>public User Get(int userId)\n        {\n            return DataContext.Users.SingleOrDefault(u =&gt; u.UserId == userId);\n        }\n</code></pre>\n\n<p>The line throwing the error is: <code>var user = _userService.Get(selectedUserId);</code> but when i debug - int selectedUserId is 44 before hitting that line. </p>\n"},{"tags":["asp.net-mvc","vsts"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13166496,"title":"Continous Integration with ASP.NET MVC and TFS","body":"<p>I have an ASP.NET MVC 3 application. This application is hosted in TFS. I have setup a build server. When a checkin happens, my code is complied and dropped in a folder on my test server. The drop folder is an IIS application folder. The goal is when a user visits <code>http://[myTestServer]/MyProject</code>, they should see the latest compiled version of the app. In an attempt to do this, I'm dropping files in <code>//[myTestServer]/c$/inetpub/www/myProject/</code>. However, I'm getting more than I bargained for.</p>\n\n<p>I've noticed that the build server puts a bunch of assemblies and creates 2 directories: _PublishedWebsites and logs. _PublishedWebsites contains two directories: MyProjectName and MyProjectName_Package. From what I can tell MyProjectName contains the files that I want put in //[myTestServer]/c$/inetpub/www/myProject/. What am I doing wrong? </p>\n\n<p>How do I setup it up such that when a user visits http://[myTestServer]/MyProject, they see the latest compiled version of the app?</p>\n"},{"tags":["c#","asp.net-mvc","iis7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13166313,"title":"Decimals resolving as files in ASP.Net MVC route on IIS7","body":"<p>I'm having a problem where my the final decimal in my url string is being resolved to a file instead of being read as a decimal.</p>\n\n<p>This is only happening on our production servers on II7.0 (so the wildcard map for aspnet_isapi.dll doesn't apply) and then only one of two production nodes.  The nodes are separated by a load balancer.</p>\n\n<p>The url looks like:</p>\n\n<pre><code>http://innerwebz_node_1/12345/123.4\n</code></pre>\n\n<p>If I put in the url into the first node it works, on the second node it dies.</p>\n\n<p>We've tried:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/7530827/routing-on-iis6-with-decimal-in-route\">Routing on IIS6 With Decimal In Route</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/11018420/system-web-routing-only-working-with-a-aspx-file-extension\">System.Web.Routing only working with a .aspx file extension</a></p>\n\n<p>The code base and configuration are identical except for node-specific settings.</p>\n\n<p>Have you encountered anything like this?  Any clues or options to solve this would be helpful.</p>\n"},{"tags":["asp.net-mvc","nhibernate","s#arp-architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13146155,"title":"Failure to get NHibernate session when switching to Windows Authentication","body":"<p>I'm trying to switch a working S#arp Architecture MVC application from an app pool with the Network Service identity to an app pool with a domain user identity.  I ran aspnet_regiis on the user in the web server and gave the user permissions to access the database (even tried making it a sysadmin in the database).  However, it seems like it can't get the NHibernate session.</p>\n\n<pre><code>Exception information: \nException type: NullReferenceException \nException message: Object reference not set to an instance of an object. \n\nRequest information: \nRequest URL: http://&lt;redacted&gt; \nRequest path: /&lt;redacted&gt; \nUser host address: 10.10.10.10\nUser: &lt;webuser&gt;\nIs authenticated: True \nAuthentication Type: Forms \nThread account name: &lt;MYDOMAIN\\MYUSER&gt; \n\nThread information: \nThread ID: 1 \nThread account name: &lt;MYDOMAIN\\MYUSER&gt; \nIs impersonating: False \nStack trace:    at SharpArch.Data.NHibernate.NHibernateSession.get_Current() in C:\\MyStuff\\Dev\\Projects\\SharpArchitecture\\src\\SharpArch\\SharpArch.Data\\NHibernate\\NHibernateSession.cs:line 88\nat UserAccount.Persistence.UserRepository.GetByPropertiesPartialMatching(IDictionary`2 exactMatchPropertyValuePairs, IDictionary`2 partialMatchPropertyValuePairs, MatchMode matchMode) in c:\\Persistence\\UserRepository.cs:line 66\n...\n</code></pre>\n\n<p>The actual line giving the Null reference exception within SharpArch NHibernateSession.cs is:</p>\n\n<pre><code>ISession session = Storage.Session;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13166188,"title":"Web API, async file uploading works locally, not on server","body":"<p>Using the following tutorial: <a href=\"http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2\" rel=\"nofollow\">http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2</a>, I used the following controller for the base of a file upload call I implemented:</p>\n\n<pre><code>public Task&lt;HttpResponseMessage&gt; PostFormData()\n{\n    // Check if the request contains multipart/form-data.\n    if (!Request.Content.IsMimeMultipartContent())\n    {\n        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);\n    }\n\n    string root = HttpContext.Current.Server.MapPath(\"~/App_Data\");\n    var provider = new MultipartFormDataStreamProvider(root);\n\n    // Read the form data and return an async task.\n    var task = Request.Content.ReadAsMultipartAsync(provider).\n        ContinueWith&lt;HttpResponseMessage&gt;(t =&gt;\n        {\n            if (t.IsFaulted || t.IsCanceled)\n            {\n                Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception);\n            }\n\n            // A whole lotta logic to save the file, process it, etc.\n        });\n\n    return task;\n}\n</code></pre>\n\n<p>To save on space I didn't include the majority of the logic I wrote, since the error happens on the first line within of ContinueWith,</p>\n\n<pre><code>        if (t.IsFaulted || t.IsCanceled)\n</code></pre>\n\n<p>If I run this locally from VS2010, both of the above booleans are false, and the code works perfectly - all of it, even extra few dozen lines I commented out. When I deploy it to a server running IIS7, t.IsFaulted is <em>always</em> true. I've never worked with asynchronous calls in C#, and have only done a few simple controllers in Web API...is there something I have to install/configure/etc. on a production server to make it work?</p>\n\n<p>Making it more difficult is the fact that all of the exceptions that are occurring stay in that task (i.e. don't get caught by ELMAH), so I've no idea how to debug what's happening; IIS is also not logging any errors that are occurring in the event viewer...so I'm at a loss to know exactly what's going on. Any tips on how to make this debugging process easier?</p>\n"},{"tags":["c#","asp.net-mvc","tempdata"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":217,"score":-2,"question_id":10487008,"title":"MVC C# TempData","body":"<p>Can somebody please explain the purpose of TempData in MVC. \nI understand it behaves like ViewBag but what does it do beyond that.</p>\n\n<pre><code>    TempData\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","entity-framework","automapper"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13163724,"title":"How can I accomplish the following mapping with Automapper?","body":"<p>I want to map the class (Entity),</p>\n\n<pre><code>public class Source {\n   public int x;\n   public string y;\n   public bool z;\n\n   public int a;\n   public int b;\n   public int c;\n\n   //bunch of other fields\n   //...\n   //..\n   //.\n}\n</code></pre>\n\n<p>to the following class (View Model):</p>\n\n<pre><code>public class Destination {\n   public MyClass1 A;\n   public MyClass2 B;\n}\n</code></pre>\n\n<p>where MyClass1, MyClass2 are defined as follows:</p>\n\n<pre><code>public class MyClass1 {\n   public int x;\n   public string y;\n   public bool z;\n}\n\npublic class MyClass2 {\n   public int a;\n   public int b;\n   public int c;\n}\n</code></pre>\n\n<p>Is this possible with Automapper?</p>\n"},{"tags":["c#","html","asp.net-mvc","razor","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13163202,"title":"Passing parameters through the url using MVC?","body":"<p>I know you can pass in parameters via urls like <code>.com/MyPage/?controlID=5</code> but how can you do it with something like <code>.com/MyPage/5</code>? Thus not requiring the variable name or a question mark.</p>\n"},{"tags":["asp.net-mvc","actionmethod"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13161899,"title":"Adding a post outside of a form","body":"<p>I have a form in my razor view which works exactly as it should.  I select values from the drop down and press the submit button and it return to me a paginated set of results.  All well and good.</p>\n\n<pre><code>@using (Html.BeginForm())\n    {\n        int index = 0;\n        foreach (var type in @Model.AttributeTypes)\n        {\n            @Html.DropDownListFor(m =&gt; m.SelectedAttributeValueIds[index], Model.AttributeValuesList[Convert.ToInt32(@type.Value)], \"Filter by \" + type.Text)\n            index++;\n        }\n\n        &lt;input type=\"submit\" value=\"Filter\"/&gt;\n}\n</code></pre>\n\n<p>The problem is that at the bottom of the page, outside of the form I want a Show all button/link.  Pressing this button should essentially do the same thing that the above submit button does.  In other words I'd like this Show all button to show all of the results of the last query (or the currently selected values in the dropdowns - not too bothered which) without pagination.  I can do the no pagination bit, that is easy.  What I want to know is how will my button/link get the values from the dropdown from outside of the form and submit that form?</p>\n"},{"tags":["asp.net-mvc","forms","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13162819,"title":"Adding additional parameter to form submit","body":"<p>I have a form declaration in my Razor view</p>\n\n<pre><code>&lt;form method=\"post\" action=\"/Lot/LotList?auctionEventId=@auctionEventId\" id=\"filterForm\"&gt;\n</code></pre>\n\n<p>(Incidentally, I chose to write it out like this rather than use <code>Html.BeginFrom</code> because I needed to give it an id and didn't know how to do that with <code>Html.BeginFrom</code> - but that is not the issue here)</p>\n\n<p>Outside of this form I have a button which submits this form (there is also a submit button in the form)</p>\n\n<pre><code>&lt;input type=\"button\" onclick=\"$('#filterForm').submit();\" value=\"Show all\" /&gt;\n</code></pre>\n\n<p>Now, the issue is that if this button is used to submit the form I want the action in the form to change to </p>\n\n<pre><code>action=\"/Lot/LotList?auctionEventId=@auctionEventId&amp;showAll=true\"\n</code></pre>\n\n<p>How do I alter the action and pass this additional parameter?  Is there a totally better way of doing all this?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":3,"view_count":53,"score":-3,"question_id":13162668,"title":"How to add html in two tags","body":"<p>I have structure html:</p>\n\n<pre><code>&lt;tr id='first_static_el'&gt;&lt;/tr&gt;\n&lt;span style='display:none' id='start_report0'&gt;&lt;span&gt;\n// some content, clear add\n&lt;span style='display:none' id='end_report0'&gt;&lt;span&gt;\n&lt;tr id='last_static_el'&gt;&lt;/tr&gt;\n</code></pre>\n\n<p>or if you know how to add it via AjaxOption?</p>\n"},{"tags":["asp.net-mvc","linq-to-entities","asp.net-mvc-viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13144619,"title":"Call a method in Linq to EF","body":"<p>In order to create a ViewModel, I tried to call a method GetName() to find the FirstName and LastName for UserID and then add it to the model. But the error tells \"Linq to Entities does not recognize the method\".</p>\n\n<p>How do I accomplish this in another way?</p>\n\n<p>My code:</p>\n\n<pre><code>public IQueryable&lt;SheetList&gt; GetSheetData()\n    {\n        var query = from a in GetSheets()\n                    select new SheetList\n                    {\n                        SheetId = a.ListAllSafetySheets.Id,\n                        SheetTitle = a.ListAllSafetySheets.SafetySheetTitle,\n                        ProductionManagerId = a.ListAllSafetySheets.ProductionManager,\n                        ProductionManagerName = this.GetName(a.ListAllSafetySheets.ProductionManager),\n                        ConstructionManagerId = a.ListAllSafetySheets.ConstructionManager,\n                        Created = a.ListAllSafetySheets.Created,\n                        CreatedBy = a.ListAllSafetySheets.CreatedBy,\n                        UserProfile_UserId = a.ListAllUserProfiles.UserId,\n                        Project_Id = a.ListAllProjects.Id,\n                        ProjectLeaderId = a.ListAllProjects.ProjectLeader,\n                        ConstructionLocation_Id = a.ListAllConstructionLocations.Id,\n                    };\n        return query;\n    }\n\n\npublic IQueryable&lt;DataCollection&gt; GetSheets()\n    {\n        var query = from vSafety in _db.Sheets\n                    join vUserProfile in _db.UserProfiles\n                    on vSafety.Id\n                    equals vUserProfile.UserId\n                    join vProject in _db.Projects\n                    on vSafety.Id\n                    equals vProject.Id\n                    join vConstructionLocation in _db.ConstructionLocations\n                    on vSafety.Id\n                    equals vConstructionLocation.Id\n                    orderby vSafety.Created descending\n                    select new SafetyAndProjectAndUserAndLocationCollection\n                    {\n                        ListAllSafetySheets = vSafety,\n                        ListAllUserProfiles = vUserProfile,\n                        ListAllProjects = vProject,\n                        ListAllConstructionLocations = vConstructionLocation\n                    };\n        return query;\n    }\n\n\npublic string GetName(int? id)\n    { \n        string returnValue;\n\n        if (id == null)\n        {\n            var userModel = _db.UserProfiles.Single(x =&gt; x.UserId == id);\n\n            string FirstName = userModel.FirstName;\n            string LastName = userModel.LastName;\n\n            returnValue = FirstName + \", \" + LastName;\n        }\n        else\n        {\n            returnValue = \"\";\n        }\n\n        return returnValue;\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","design-patterns","ninject","repository-pattern","unit-of-work"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13160898,"title":"Injecting UnitOfWork in a Using block","body":"<p>I worked on a UnitOfWork / Repository / MVC application. Now that this is working all great, I want to decouple the UnitOfWork from the controllers. One way of doing it is to inject the dependency with Ninject (or other) in the controller's contructor. However, this means the UnitOfWork will be instanciated at the same time as the controller.</p>\n\n<p>The way I want to use my UnitOfWork is with Using blocks like so:</p>\n\n<pre><code>using(var unitOfWork = new IUnitOfWork)\n{\n    return unitOfWork.GetRepository&lt;IEmployeesRepository&gt;().GetAllEmployees();\n}\n</code></pre>\n\n<p>Obviously you cant instance a interface, you have instance an implementation which is injected with a dependency injector, but how can I inject it in a using clause?</p>\n\n<p>I saw Property injection and Method injection but I am unsure of how I could use those to acheive my goal.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13065697,"title":"Redirect / show view after generated file is dowloaded","body":"<p>I've got a controller action that downloads a dynamically generated file:</p>\n\n<pre><code>    public ActionResult DownloadFile()\n    {\n        var obj = new MyClass { MyString = \"Hello\", MyBool = true };\n        var ser = new XmlSerializer(typeof(MyClass));\n        var stream = new MemoryStream();\n        ser.Serialize(stream, obj);\n        stream.Position = 0;\n\n        Response.Clear();\n        Response.AddHeader(\"Content-Disposition\", \"attachment; filename=myfile.xml\");\n        Response.ContentType = \"application/xml\";\n\n        // Write all my data\n        stream.WriteTo(Response.OutputStream);\n        Response.End();\n\n        return Content(\"Downloaded\");\n    }\n</code></pre>\n\n<p>Just for reference:</p>\n\n<pre><code>    public class MyClass\n    {\n        public string MyString { get; set; }\n        public int MyInt { get; set; }\n    }\n</code></pre>\n\n<p>This is working, and the file (myfile.xml) is downloaded.<br>\nHowever, the message \"Downloaded\" is not sent to the browser.</p>\n\n<p>Similarly, if I replace <code>return Content(\"Downloaded\");</code><br>\nfor <code>return Redirect(\"www.something.com\");</code><br>\nthen the browser is redirected before the file downloads.</p>\n\n<p>As a bit of a pre-amble, the user journey is:</p>\n\n<ul>\n<li>User fills out form on previous view  </li>\n<li>Form is submitted  </li>\n<li>XML is generated and downloaded  </li>\n<li>User is redirected / \"Downloaded\" view is shown <em>(so hitting F5 won't re-post the form)</em></li>\n</ul>\n"},{"tags":["asp.net-mvc","post","razor","get"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13161645,"title":"@Html.ActionLink calling Post method","body":"<p>I have a <code>@HTML.ActionLink</code> in my Razor view and I'd like for it to call a <code>Post</code> action method rather than a <code>Get</code>  one. </p>\n\n<p>Is this possible?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","uiculture"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13161249,"title":"mvc load view on culture","body":"<p>I don't seem to be able to find much on this. Is there a way I can have different views per culture? Is there something built in mvc3 for this? Is there anything out there about this? I don't want to use res files for whole pages, only for validation and such. </p>\n"},{"tags":["asp.net","asp.net-mvc","iis","publishing","webdeploy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":99,"score":2,"question_id":12195906,"title":"How to run .bat file on server after web deploy publish","body":"<p>I am using Web Deploy for publishing an ASP.NET MVCwebsite in Visual Studio 2010.<br>\nIs there any way to run a .bat file on server after this publish automatically?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","fancybox"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13161156,"title":"Create Fancybox Gallery from MVC Partials","body":"<p>I have a simple table of news items with the requirement that users can either hover over an item or click it to see its contents.</p>\n\n<p>The hovering is accomplished easily enough by using the HTML <code>title</code> attribute, and I've got the click working by using the following Fancybox implementation.</p>\n\n<pre><code>&lt;a class=\"fancyboxNews\" title=\"News Content 1\"&gt;News Title 1&lt;/a&gt;\n&lt;a class=\"fancyboxNews\" title=\"News Content 2\"&gt;News Title 2&lt;/a&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $('.fancyboxNews').click(function () {\n        $.ajax({\n            type: 'POST',\n            url: '@Url.Action(\"_TextPopUp\")',\n            data: { content: $(this).attr('title'), title: $(this).text() },\n            success: function(response) {\n                $.fancybox({\n                    content: response,\n                });\n            }\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I'd like to make a gallery out of my Fancybox news items, but everything I've seen requires you to have a static <code>href</code> link for that, which doesn't work with partial views. Any ideas as to how I can accomplish this?</p>\n"},{"tags":["c#","asp.net-mvc","charts","highcharts","dotnethighcharts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13160405,"title":"Adding multiple series to the spline chart using dotnet high charts in asp.net mvc3","body":"<p>I am using dotnet high charts with asp.net mvc3. I'm facing problem in adding multiple series to the spline chart. </p>\n\n<p>This code basically updates the chart every second.</p>\n\n<p>This works find for one data series. But I need to add multiple data series. </p>\n\n<p>Please help me in adding multiple series for this code.</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>public ActionResult SplineUpdateEachSecond()\n{\n     List&lt;object&gt; points = new List&lt;object&gt;(20);\n     DateTime now = DateTime.Now;\n     Random rand = new Random();\n     for (int i = -19; i &lt;= 0; i++)\n          points.Add(new { X = now.AddSeconds(i), Y = rand.NextDouble() });\n\n     Highcharts chart = new Highcharts(\"chart\")\n            .SetOptions(new GlobalOptions { Global = new Global { UseUTC = false } })\n            .InitChart(new Chart\n                       {\n                           DefaultSeriesType = ChartTypes.Spline,\n                           MarginRight = 10,\n                           Events = new ChartEvents\n                                    {\n                                        Load = \"ChartEventsLoad\"\n                                    }\n                       })\n            .AddJavascripFunction(\"ChartEventsLoad\",\n                                  @\"// set up the updating of the chart each second\n                                   var series = this.series[0];\n                                   setInterval(function() {\n                                      var x = (new Date()).getTime(), // current time\n                                         y = Math.random();\n                                      series.addPoint([x, y], true, true);\n                                   }, 1000);\")\n            .SetTitle(new Title { Text = \"Live random data\" })\n            .SetXAxis(new XAxis\n                      {\n                          Type = AxisTypes.Datetime,\n                          TickPixelInterval = 150\n                      })\n            .SetYAxis(new YAxis\n                      {\n                          Title = new YAxisTitle { Text = \"Value\" },\n                          PlotLines = new[]\n                                      {\n                                          new YAxisPlotLines\n                                          {\n                                              Value = 0,\n                                              Width = 1,\n                                              Color = ColorTranslator.FromHtml(\"#808080\")\n                                          }\n                                      }\n                      })\n            .SetTooltip(new Tooltip { Formatter = \"TooltipFormatter\" })\n            .AddJavascripFunction(\"TooltipFormatter\",\n                                  @\"return '&lt;b&gt;'+ this.series.name +'&lt;/b&gt;&lt;br/&gt;'+\n                                   Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'&lt;br/&gt;'+ \n                                   Highcharts.numberFormat(this.y, 2);\")\n            .SetLegend(new Legend { Enabled = false })\n            .SetExporting(new Exporting { Enabled = false })\n            .SetSeries(new Series\n                       {\n                           Name = \"Random data\",\n                           Data = new Data(points.ToArray())\n                       });\n\n        return View(chart);\n}\n</code></pre>\n"},{"tags":["javascript","asp.net-mvc","requirejs"],"answer_count":3,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":872,"score":11,"question_id":11585774,"title":"Bundling and minifying modular JavaScript (RequireJS / AMD) with ASP.NET MVC","body":"<p>Does anyone have any experience with or know any good solutions for bundling and minifying modular JavaScript like RequireJS / AMD in an ASP.NET MVC project?</p>\n\n<p>Is the best way to use the <a href=\"http://requirejs.org/docs/optimization.html\">RequireJS optimizer</a> (perhaps in a post build action?) -- or is there something better out there for ASP.NET MVC?</p>\n"},{"tags":["asp.net-mvc","msbuild","visual-studio-2012","webdeploy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13157588,"title":"What happen when I use Publish Web command from VS 2012 with ASP MVC","body":"<p>What exactly happen when I use Publish Web command inside Visual Studio 2012 for ASP MVC project?  </p>\n\n<p>How can I activate the same command from command line?</p>\n"},{"tags":["asp.net-mvc","knockout.js","kendo-ui"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":26,"score":-2,"question_id":13160607,"title":"Success alert after delete in kendo UI client grid","body":"<p>After successful delete i want to show success data delete alert in kendo UI client grid\nin asp.net mvc.\nPlease help</p>\n"},{"tags":["asp.net-mvc","security","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13160311,"title":"MVC4 storing and recalling user password","body":"<p>Current I'm working on an a project using MVC4 in which we have a service reference looking into the Database to return our content.  The service reference requires me to provide the username/password each time I make a call. </p>\n\n<p>What would be best practices for this?  Should I encrypt the password then save it to a cookie or should I issue the user an Auth Token?  Or would there be a third option?</p>\n"},{"tags":["asp.net-mvc","nhibernate","fluent-nhibernate","structuremap"],"answer_count":2,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":1615,"score":4,"question_id":1296901,"title":"Injecting ISession Into My Repositories Using Structuremap in a Asp.Net MVC Application","body":"<p>My repositories all take ISession in the constructor:</p>\n\n<pre><code>protected Repository(ISession session)\n{\n     this.session = session;\n}\nprivate readonly ISession session;\n</code></pre>\n\n<p>In an Asp.Net MVC application, using StructureMap, how would I go about setting up ISession in my the StructureMap Registry? Would I need to to add SessionFactory to the container also? Does FluentNHibernate change things?</p>\n"},{"tags":["asp.net-mvc","linq","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":100,"score":2,"question_id":4665886,"title":"Linq Many-to-Many relationship","body":"<p>I have 3 tables in my db. AdminGroup, AdminSection and joining these two AdminAccess.\nAdminGroup => AdminGroupId, AdminId\nAdminSection => AdminSectionId, Code, Desc\nAdminAccess => AdminSectionId, AdminGroupId</p>\n\n<p>I need to get a list of all Codes available given AdminId.\nThis is what I have so far:</p>\n\n<pre><code>this.AdminGroupRepository.List().Where(x =&gt; x.Admin.Any(y =&gt; y.AdminId == loginEntity.AdminId))\n</code></pre>\n\n<p>But this gives me a list of AdminGroups and I simply need a List of Codes.</p>\n\n<p><img src=\"http://i.stack.imgur.com/UuslZ.png\" alt=\"alt text\"></p>\n"},{"tags":["c#","javascript","ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13160183,"title":"How can I remove a item from my session[\"cart\"] on a button click in my view?","body":"<p>These are the two actionresults I use for my cart:</p>\n\n<p>The first action I am adding the productids to my session cart by using ajax:</p>\n\n<pre><code>public ActionResult AddToCart(int ProductImageId)\n{\n    List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n    if (cart == null)\n    {\n        cart = new List&lt;int&gt;();\n    }\n    cart.Add(ProductImageId);\n\n    Session[\"cart\"] = cart;\n\n    return new JsonResult() { Data = new { Status = \"Success\" } };\n}\n</code></pre>\n\n<p>The second action I am filling it to my model so I can use it in my view:</p>\n\n<pre><code>public ActionResult ShoppingCart()\n        {\n        var cart = Session[\"cart\"] as List&lt;int&gt;;\n        var products = cart != null ? cart.Select(id =&gt; \n             {\n                 var productImage = repository.GetProductByID(id);\n                 return new ProductsViewModel\n                    {\n                        Name = productImage.Products.Name,\n                        Description = productImage.Products.Description.Substring(0, productImage.Products.Description.IndexOf(\".\") + 1),\n                        price = productImage.Products.Price,\n                        ProductId = productImage.Products.Id,\n                        Image = productImage.ImageUrl,\n                        ProductImageId = productImage.Id\n                    };\n             }) : new List&lt;ProductsViewModel&gt;();\n\n      return View(products);\n        }\n</code></pre>\n\n<p>Right now I have a view that is displaying the products in the shoppingcart view.</p>\n\n<p>Each product that is displayed have a button that says \"Delete\"</p>\n\n<p>My question is how can I delete the product from the session cart in the best way?</p>\n\n<p>How should the Actionresult look like?</p>\n\n<p>I have created an Ajax script to gets the ID of the product that needs to be deleted when someone click on the delete button here it is:</p>\n\n<pre><code> $(function () {\n            $(\".a\").live(\"click\", function () {\n                var $this = $(this),\n            ProductImageId = $this.data('ProductImageId');\n                $.ajax({\n                    url: '/Home/Action',  // &lt;- I have not created a actionresult yet\n                    type: \"post\",\n                    cache: false,\n                    data: { ProductImageId: ProductImageId },\n                    success: function (data) {\n                        data = eval(data);\n                        $this.addClass('productSelected');\n                    },\n                    error: function (result) {\n                        $(\".validation-summary-errors\").append(\"&lt;li&gt;Error connecting to server.&lt;/li&gt;\");\n                    }\n\n                });\n            });\n\n        });\n</code></pre>\n\n<p>If I am thinkin right with the javascript, how should the actionresult look like if I want delete the product by the ID I recieved?</p>\n\n<p>I guess It should look something like this:</p>\n\n<pre><code>public ActionResult DeleteProductFromCart(int ProductImageId)\n{\n // code..\n}\n</code></pre>\n\n<p>If I am still thinkin right how should I code inside the brackets on <code>DeleteProductFromCart</code>?</p>\n\n<p>Any kind of help is appreciated.</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13159918,"title":"URL Routes With Same Pattern But Different Named Segments","body":"<p>So let's say I have the following 2 routes defined for my cool new ASP.NET MVC application:</p>\n\n<ul>\n<li><code>{controller}/{action}/{id}</code></li>\n<li><code>{controller}/{action}/{page}</code></li>\n</ul>\n\n<p>Both routes have the same exact pattern except for the last named segment. And the last named segments are also optional - this is not clear in the example but consider them optional.</p>\n\n<p>If I add the routes in the orders I listed them to the framework's <code>RouteCollection</code>, the first route will always match URLs like this: <code>/Home/Index/1</code></p>\n\n<p>Normally this is not a problem, but ASP.NET MVC's default model binder, when passing arguments to actions as parameters, requires the action's parameter to have the same name as the named segment in the route pattern.</p>\n\n<p>So for an action <code>List</code> for example, where I want to pull a list of models to pass to the view, that accepts a page number as a parameter, I need to name that parameter <strong>id</strong>. Again normally, that is not a problem but I am detailed guy and I like my parameter names to give an indication what the parameter is used for.</p>\n\n<p>But since the model binder kicks in after the routing system, I am out of luck. Or am I? Is there a way around this without writing my own model binder, or even worse, my own router?</p>\n\n<p>In addition, and this can be considered a second related question, how do I ensure routing named segments are refactor safe?</p>\n\n<p>Using <code>Url.Action</code>, for example, in my views is encouraged since they take routes into consideration. But to pass an argument when generating URLs using this method, one usually has to pass in an anonymous object, with a property whose name is also equal to the named segment.</p>\n\n<p>So if I rename the named segment in my route, I literally have to go to all my views and rename that property as well. That does not sound optimal. So what's a clean way around this?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","azure","azure-cache"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13155683,"title":"Unrecognized element 'autoDiscover' in web.config thrown by Azure Web Role","body":"<p>I'm trying to use the <a href=\"http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx\" rel=\"nofollow\">Session State Provider for Windows Azure Caching</a> on a co-located cache running on two instances of a Web role. I have a ASP.NET MVC4 project. I followed <a href=\"https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/\" rel=\"nofollow\">Microsofts guide</a> on how to set it up, and gone through it multiple times but with the same result. When I publish to Azure, I get a YSOD on every page.</p>\n\n<p>I've gone through the logs on my Azure instance and found the exception that is probably causing this:</p>\n\n<pre><code>Event code: 3008 \nEvent message: A configuration error has occurred. \n\n...\n\nException information: \n    Exception type: DataCacheException \n    Exception message: ErrorCode&lt;ERRCMC0003&gt;:SubStatus&lt;ES0001&gt;:Error in client configuration file.\n   at Microsoft.ApplicationServer.Caching.ConfigFile.ThrowException(Int32 errorCode, Exception e)\n   at Microsoft.ApplicationServer.Caching.ClientConfigReader.Init(String path)\n   at Microsoft.ApplicationServer.Caching.DataCacheFactoryConfiguration..cctor()\n\nUnrecognized element 'autoDiscover'. (E:\\sitesroot\\0\\web.config line 20)\n   at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)\n   at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object&amp; result, Object&amp; resultRuntimeObject)\n   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object&amp; result, Object&amp; resultRuntimeObject)\n   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)\n   at System.Configuration.ConfigurationManager.GetSection(String sectionName)\n   at Microsoft.ApplicationServer.Caching.ClientConfigReader.Init(String path)\n</code></pre>\n\n<p>I realize that this has to do with my web.config and this section:</p>\n\n<pre><code>&lt;dataCacheClients&gt; \n  &lt;tracing sinkType=\"DiagnosticSink\" traceLevel=\"Error\" /&gt; \n  &lt;dataCacheClient name=\"default\"&gt; \n    &lt;autoDiscover isEnabled=\"true\"/&gt; \n  &lt;/dataCacheClient&gt; \n&lt;/dataCacheClients&gt;\n</code></pre>\n\n<p>But that section is taken straight from the Microsoft guide. I've also tried to uninstall and re-install the WindowsAzure.Caching Nuget-package, which adds the proper entries to the web.config, but it looks exactly the same as well.</p>\n\n<p>I've found <a href=\"http://social.msdn.microsoft.com/Forums/pl-PL/windowsazuredata/thread/9fd2a66d-2c59-4c06-bf6c-96595622bbbc\" rel=\"nofollow\">this discussion</a> on MSDN about what looks to the be the same issue, but I spinn up a new Azure web role, so I cannot see that it should be related to the GAC and an old version of the SDK in this case, or am I missing something? </p>\n\n<p>Looking through the bin-folder of the deployed site, on my Azure instance, I see that the file version of my <code>Microsoft.ApplicationServer.Caching.Client.dll</code> and <code>Microsoft.ApplicationServer.Caching.Core.dll</code> is <code>1.0.4621.0</code>. That is the same files that gets referenced in my project when i install the <code>WindowsAzure.Caching</code> Nuget-package. Is this the proper files to use?</p>\n\n<p>After 15 hours of debugging, any input on this would be highly appreciated.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I've actually gotten <a href=\"http://code.msdn.microsoft.com/Windows-Azure-Caching-78a49b70\" rel=\"nofollow\">this project</a> to work, when I publish it to two instances of a new Web role. I'll start to go through that deployment and see if I can spot any differences.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>The difference is that my project uses version <code>1.0.4621.0</code>of <code>Microsoft.ApplicationServer.Caching.Client.dll</code> and <code>Microsoft.ApplicationServer.Caching.Core.dll</code>, while Microsoft's project uses <code>1.0.4655.0</code>. So it could actually be that I'm using an old version of the SDK. For some reason my project insist on uploading those files when I publish, even though I delete them, but I'll get back with a complete answer if this solves the problem.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13159149,"title":"Enforce HTTPS on all pages in MVC application","body":"<p>I've got an ASP.NET MVC3 application running on a shared server. I've installed an SSL certificate on the server and all controllers in my application are adorned with RequireHTTPS. The intention was to be sure that no pages are served unencrypted (i.e. all pages are served via HTTPS).</p>\n\n<p>However, CERTAIN pages (e.g. js, an HTML error page) CAN be accessed unencrypted (by adding :80 to the hostname in the request). Granted, the pages I am talking about are static but how can I secure ALL pages in my site, preventing ANY of them being downloaded unencrypted. I don't have access to the IIS server settings as this is a shared site, but is there a way by using an HTTP Handler or Rewrite URL module (or can I set the permissions directly on the file folders)?</p>\n\n<p>Thanks for any info.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","namespaces"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":1615,"score":4,"question_id":4798293,"title":"How to alias a type with a using directive in my Razor view?","body":"<p>I need to alias a type with a <code>using</code> directive, which is normally done like so:</p>\n\n<pre><code>using LocalResources = Resources.Admin.SomeResource;\n</code></pre>\n\n<p>How can I do this inside my Razor view so that I can then use it like <code>@LocalResources.FirstName</code>?</p>\n"},{"tags":["asp.net-mvc","ravendb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13156853,"title":"What is the correct pattern for \"joining\" two entity sets in RavenDB?","body":"<p>Using RavenDB within an ASP.NET MVC (4) application, what is the correct pattern for loading a set of related entities and passing them to a view?</p>\n\n<p>Taking Stack Overflow as the canonical example, assume the following entities:</p>\n\n<pre><code>class User\n{\n    public int Id { get; set; }\n\n    public string UserName { get; set; }\n}\n\nclass Comment\n{\n    public int Id { get; set; }\n\n    public string Body { get; set; }\n\n    public string Author{ get; set; }\n}\n\nclass Question\n{\n    public int Id { get; set; }\n    // ...\n    public List&lt;Comment&gt; Comments { get; set; }\n\n    public Question()\n    {\n        Comments = new List&lt;Comment&gt;();\n    }\n}\n</code></pre>\n\n<p>What we want to do is display the users information next to the comments under the question, The comments are stored as part of the Question document, so we <code>Include</code> the <code>Comment.Author</code></p>\n\n<p>Our query might look like this:</p>\n\n<pre><code>var question = RavenSession.Include&lt;Question&gt;(x =&gt; x.Author)\n                           .Include&lt;Comment&gt;(x =&gt; x.Author)\n                           .Load&lt;Question&gt;(id);\n</code></pre>\n\n<p>Now we have the question object with all it's comments, and the Raven client has cached all the user profiles we'll need, <strong>What is the correct / best / most RavenDB approved way of pairing the User objects with the relevant Comments objects?</strong></p>\n\n<p>One thought is that I could transform the <code>User</code> and <code>Comment</code> into a <code>CommentViewModel</code> and send that down to the client, but that seems quite manual.</p>\n\n<p>Another option could be to add another property to the <code>Comment</code> for Author, that is <code>[JsonIgnore]</code>'d and in the getter, lazy load the user from the Raven session. This feels dirty because the Comment model object would need to hold a reference to the raven session.</p>\n"},{"tags":["asp.net-mvc","knockout.js","upshot","asp.net-spa","breeze"],"answer_count":5,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":523,"score":6,"question_id":12238855,"title":"Current status of Upshot.js","body":"<p>I am thinking of using upshot.js along with Knockout in one of my very important projects.  I do not see any documentation or any activity around upshot.   Before I commit to this decision, is this project still active? </p>\n\n<p>If the entire asp.net stack is now open and one can see what is getting committed to repository, why this small library is still not on codeplex or github for community to see? </p>\n\n<p>I hope this is still on radar of asp.net team.</p>\n\n<p>Thanks,</p>\n\n<p>Ajay</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation","qtip"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1793,"score":4,"question_id":7017030,"title":"ASP.NET MVC Validation Using qTip jQuery Plugin","body":"<p>I am using the solution found <a href=\"http://stackoverflow.com/questions/6802045/integrating-qtip-with-mvc3-and-jquery-validation-errorplacement\">here</a> to show client side validation errors in a tooltip using the qTip jQuery plugin.  This solution works great for client side validation but I would love to able to display server side validation errors in the same way.  Does anyone know how to show server side validation errors in tooltips utilizing qTip?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":22,"score":-2,"question_id":13159061,"title":"how read web page of project to Variable?","body":"<p>how read web page of project to Variable? because I want to do pdf using itextsharp</p>\n"},{"tags":["asp.net-mvc","design-patterns","configuration","jira"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13156401,"title":"What is the best practice for on-the-fly Field Configuration?","body":"<p>I'm going to implement an <strong>Asp.net MVC 4.0</strong> application in which use can change the <strong>field positions</strong> on it. In Administration panel there is a page which user can select the <strong>field poisition on the screen</strong>. User also can <strong>change some of the fields properties</strong>. (Something like <strong>Atlassian Jira</strong> <a href=\"https://confluence.atlassian.com/display/JIRA/Specifying+Field+Behaviour\" rel=\"nofollow\">Field Configuration</a> and <strong><a href=\"https://confluence.atlassian.com/display/JIRA/Defining+a+Screen\" rel=\"nofollow\">Screen Configuration</a></strong>)</p>\n\n<p>I don't know how should I creat final pages. Actually I'm looking for a <strong>best practice</strong> which let me read the content of a page from a service and based on that reorder the page elements.</p>\n\n<p>Any help is appriciated.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13158536,"title":"Pulling string from textarea (MVC)","body":"<p>I made a textarea where I want people to be able to enter a comment. I then have a method in a controller that is supposed to use that string. </p>\n\n<p>How do I pull the information from the textarea into the method?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iis7","http-status-code-401"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1323,"score":1,"question_id":10196991,"title":"MVC 3 401 Unauthorized on hosting server","body":"<p>I have an MVC 3 application that is giving me a 401 error when I try and access it from the remote server, but when I run it from my local computer it runs with out any error.</p>\n\n<p>The remote server has IIS 7 configured to allow both Forms and Anonymous access and successfully serves static files (content files), it's only when I try and access the MVC application that I'm getting issues.</p>\n\n<p>When I browse to the MVC application, I get a prompt that says, \"Windows Security - The server  at  requires a username and password.  Warning: This server is requesting that your username and password be sent in an insecure manner (basic authentication without a secure connection).\"</p>\n\n<p>I've tried entering all the passwords I can think of, and nothing give me access.</p>\n\n<p>When I click cancel, I get a server error that says, \"401 - Unauthorized: Access is denied due to invalid credentials. You do not have permission to view this directory or page using the credentials that you supplied.\" and I've been redirected to the <code>LogOn</code> page</p>\n\n<p>My Web.config file looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt; \n&lt;!-- \n  For more information on how to configure your ASP.NET application, please visit \n  http://go.microsoft.com/fwlink/?LinkId=152368 \n  --&gt; \n&lt;configuration&gt; \n  &lt;configSections&gt; \n    &lt;section name=\"razorJSSettings\" type=\"RazorJS.Configuration.RazorJSSettings, RazorJS\" /&gt; \n  &lt;/configSections&gt; \n  &lt;connectionStrings&gt; \n    &lt;!--&lt;add name=\"ApplicationServices\" \n         connectionString=\"data source=.\\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true\" \n         providerName=\"System.Data.SqlClient\" /&gt;--&gt; \n    &lt;add name=\"ApplicationServices\" connectionString=\"Data Source=SOURCE; Initial Catalog=thedb; User ID=thedbuser; Password='thedbuserpassword';\" /&gt; \n    &lt;add name=\"GestmeDataContext\" connectionString=\"metadata=res://*/Models.Gestme.csdl|res://*/Models.Gestme.ssdl|res://*/Models.Gestme.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=SOURCE;initial catalog=thedb;persist security info=True;user id=thedbuser;password=thedbuserpassword;multipleactiveresultsets=True;App=EntityFramework&amp;quot;\" providerName=\"System.Data.EntityClient\" /&gt; \n  &lt;/connectionStrings&gt; \n  &lt;appSettings&gt; \n    &lt;add key=\"webpages:Version\" value=\"1.0.0.0\" /&gt; \n    &lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt; \n    &lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt; \n  &lt;/appSettings&gt; \n  &lt;system.web&gt; \n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt; \n      &lt;assemblies&gt; \n        &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt; \n        &lt;add assembly=\"System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" /&gt; \n      &lt;/assemblies&gt; \n    &lt;/compilation&gt; \n    &lt;customErrors mode=\"Off\" /&gt; \n    &lt;authentication mode=\"Forms\"&gt; \n      &lt;forms loginUrl=\"~/Account/LogOn\" timeout=\"2880\" /&gt; \n    &lt;/authentication&gt; \n    &lt;membership&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add name=\"AspNetSqlMembershipProvider\" type=\"System.Web.Security.SqlMembershipProvider\" connectionStringName=\"ApplicationServices\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" requiresUniqueEmail=\"false\" maxInvalidPasswordAttempts=\"5\" minRequiredPasswordLength=\"6\" minRequiredNonalphanumericCharacters=\"0\" passwordAttemptWindow=\"10\" applicationName=\"/\" /&gt; \n      &lt;/providers&gt; \n    &lt;/membership&gt; \n    &lt;profile&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add name=\"AspNetSqlProfileProvider\" type=\"System.Web.Profile.SqlProfileProvider\" connectionStringName=\"ApplicationServices\" applicationName=\"/\" /&gt; \n      &lt;/providers&gt; \n    &lt;/profile&gt; \n    &lt;roleManager enabled=\"true\"&gt; \n      &lt;providers&gt; \n        &lt;clear /&gt; \n        &lt;add connectionStringName=\"ApplicationServices\" applicationName=\"/\" name=\"AspNetSqlRoleProvider\" type=\"System.Web.Security.SqlRoleProvider\" /&gt; \n      &lt;/providers&gt; \n    &lt;/roleManager&gt; \n    &lt;pages&gt; \n      &lt;namespaces&gt; \n        &lt;add namespace=\"System.Web.Helpers\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt; \n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt; \n        &lt;add namespace=\"System.Web.Routing\" /&gt; \n        &lt;add namespace=\"System.Web.WebPages\" /&gt; \n      &lt;/namespaces&gt; \n    &lt;/pages&gt; \n    &lt;httpHandlers&gt; \n      &lt;add path=\"razorjs.axd\" verb=\"GET\" type=\"RazorJS.RazorJSHandler\" /&gt; \n    &lt;/httpHandlers&gt; \n  &lt;/system.web&gt; \n  &lt;system.webServer&gt; \n    &lt;httpErrors errorMode=\"Detailed\" /&gt;\n    &lt;asp scriptErrorSentToBrowser=\"true\"/&gt;\n    &lt;validation validateIntegratedModeConfiguration=\"false\" /&gt; \n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt; \n    &lt;handlers&gt; \n      &lt;add name=\"RazorJSHandler\" path=\"razorjs.axd\" verb=\"GET\" type=\"RazorJS.RazorJSHandler\" /&gt; \n    &lt;/handlers&gt; \n  &lt;/system.webServer&gt; \n  &lt;runtime&gt; \n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt; \n      &lt;dependentAssembly&gt; \n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt; \n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt; \n      &lt;/dependentAssembly&gt; \n      &lt;dependentAssembly&gt; \n        &lt;assemblyIdentity name=\"Newtonsoft.Json\" publicKeyToken=\"30ad4fe6b2a6aeed\" culture=\"neutral\" /&gt; \n        &lt;bindingRedirect oldVersion=\"0.0.0.0-4.0.8.0\" newVersion=\"4.0.8.0\" /&gt; \n      &lt;/dependentAssembly&gt; \n    &lt;/assemblyBinding&gt; \n  &lt;/runtime&gt; \n  &lt;razorJSSettings handlerPath=\"~/razorjs.axd\"&gt; \n    &lt;!-- If empty all paths are valid --&gt; \n    &lt;allowedPaths&gt; \n      &lt;add path=\"~/Scripts\" /&gt; \n    &lt;/allowedPaths&gt; \n  &lt;/razorJSSettings&gt; \n&lt;/configuration&gt; \n</code></pre>\n\n<p>What are all the issues that could cause 401 errors to be returned from the server?  Could it be the connection from the database to the server or the <code>aspnet_*</code> tables?  </p>\n"},{"tags":["asp.net-mvc","database","web","pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13158422,"title":"ASP MVC 3: Pagination for a project that is not using the Entity Framework","body":"<p>I'm in a project where we are using ASP MVC3, but not the Entity Framework and I would like to use pagination for some results. However, the examples I find online seem to be using the Entity Framework.</p>\n\n<p>What's the best way to paginate the results using just SQL?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13130742,"title":"French accent not shown correctly in asp.net MVC view","body":"<p>I have an ASP.Net MVC View receiving a strongly typed model:</p>\n\n<p><code>@model MyApp.Models.MyModel</code></p>\n\n<p>When displaying properties values of this model, </p>\n\n<p>for example: <code>@Html.DisplayFor(model =&gt; model.myFrenchProperty)</code></p>\n\n<p>french characters are not shown correctly in browser.</p>\n\n<p>For example the french word \"Gnral\" is shown as \"Gnral\" in browser.</p>\n\n<p>I have try using @Html.Raw(Model.myFrenchProperty) but nothing change.</p>\n\n<p>My model is built with Entity Framework and data come from an UTF-8 encoded database.</p>\n\n<p>Any idea how to make this work properly?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","forms-authentication"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":827,"score":0,"question_id":7975311,"title":"Authorize attribute on Ajax Action methods in controller","body":"<p>I was trying to authorize ajax action methods in my MVC3 application. The problem occurs when the user session expires and an ajax action method is asked to execute. The asp.net Authentication system sends 302 redirect instead of sending 401 which seems logical for non-ajax requests. But with Ajax it all gets messed up quickly. So I decided to follow the approach suggested at <a href=\"http://stackoverflow.com/questions/3431343/asp-net-mvc-forces-an-ajax-request-be-redirected-to-the-login-page-when-the-form\">ASP.NET MVC forces an AJAX request be redirected to the login page when the FormsLogin session is no longer active</a> . \n   Basically, at the end of request we check whether the request is an ajax request and there is a redirect (302 response). If it is then we replace the response code from 302 to 401. Accordingly in the javascript we check for 401 and perform redirection from there. Here is the basic code that I have put up</p>\n\n<p>In Global.asax.cs</p>\n\n<pre><code>    protected void Application_EndRequest() {\n        var context = new HttpContextWrapper(Context);\n        // If we're an ajax request, and doing a 302, then we actually need to do a 401\n        if (Context.Response.StatusCode == 302 &amp;&amp; context.Request.IsAjaxRequest()) {\n            Context.Response.Clear();\n            Context.Response.StatusCode = 401;\n        }\n    }\n</code></pre>\n\n<p>In JQuery global error handler (included in asp.net mvc master page : _Layout.cshtml)</p>\n\n<pre><code>$(document).ajaxError(function (event, jqXHR, ajaxSettings, thrownError) {\n    if (jqXHR.status == 401) {\n        window.location.replace(loginUrl);\n    }\n});\n</code></pre>\n\n<p>I have just quickly tested this code and it seems to work fine. Is there any potential problem with this code. I am a relatively novice programmer as far as asp.net mvc and jquery are concerned, so I thought I would ask for other opinions before actually implementing the code. Any suggestions, I will be grateful.</p>\n\n<p>regards,\nNirvan.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13156165,"title":"In query in Entity Framework","body":"<p>I am working on Entity frame work, i have created a method which is returning List of my Table,\nI am retrieving data on base of grpID(which is foreign key, so i can have multiple records)\nI have saved these grpID's in an array so I want to run IN command on Entity framework so that i can get records in single List, How can i apply In command,my code is below</p>\n\n<pre><code> public List&lt;tblResource&gt; GetResources(long[] grpid)\n        {\n            try\n            {               \n                return dataContext.tblResource.Where(c =&gt; c.GroupId == grpid &amp;&amp; c.IsActive == true).ToList();//This code is not working as i am having array of groupIds\n\n            }\n            catch (Exception ex)\n            {                \n                return ex;\n            }\n        }\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-partialview"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13149246,"title":"Action that returns partial view of all the items in my Session[\"cart\"]","body":"<p>With Ajax I am able to add ProductIDs to my cart list in my action AddToCart.</p>\n\n<p>This is the code for that:</p>\n\n<pre><code>public ActionResult AddToCart(int productID)\n{\n    List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n    if (cart == null){\n       cart = new List&lt;int&gt;();\n    }\n    cart.Add(productID);\n\n    Session[\"cart\"] = cart;\n\n    return new JsonResult() { Data = new { Status = \"Success\" } };\n}\n</code></pre>\n\n<p>In my repository I have this following LINQ method to grab the details on the product by ID:</p>\n\n<pre><code>public Products GetProductByID(int id)\n{\n    return db.Products.SingleOrDefault(s =&gt; s.Id == id);\n}\n</code></pre>\n\n<p>Products have Name, Description and Price as attributes.</p>\n\n<p>I have a ViewModel that use for model-binding:</p>\n\n<pre><code>public class ProductsViewModel\n{\n    public string Description { get; set; }\n    public string Name { get; set; }\n    public double price { get; set; }\n    public string Image { get; set; }\n    public int ProductId { get; set; }\n}\n</code></pre>\n\n<p>I have another Viewmodel that holds this ProductsViewModel, Its the ProductList that I loop thru with foreach:</p>\n\n<pre><code>public class HomeIndexViewModel\n    {\n        public List&lt;ProductsViewModel&gt; Productlist { get; set; }\n    }\n</code></pre>\n\n<p>Now I need to create a action ie ShoppingCart which should return a partial view of all items in the Session[\"cart\"]. So I can display them in my view with the products details</p>\n\n<p>the action should not need any parameter. It will just look into session and return back a model with the list of products selected.</p>\n\n<p>Something im 100% sure of is that inside the ShoppingCart View I will 100% use following code line:</p>\n\n<pre><code>@model AvanShop.ViewModels.HomeIndexViewModel\n</code></pre>\n\n<p>and then do a foreach loop that looks like this:</p>\n\n<pre><code> @foreach (var item in Model.Productlist)\n            {\n             code to display the products that are inside the cart  \n            }\n</code></pre>\n\n<p>This is an example on how I did my Action index that displays all of the products in my Index view.</p>\n\n<pre><code>public ActionResult Index()\n        {\n            var Productlist = repository.GetAllProducts();\n            var model = new HomeIndexViewModel()\n            {\n                Productlist = new List&lt;ProductsViewModel&gt;()\n            };\n\n            foreach (var Product in Productlist)\n            {\n                FillProductToModel(model, Product);\n            }\n            return View(model);\n        }\n\nprivate void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)\n{\n    var productViewModel = new ProductsViewModel\n    {\n\n        Description = productimage.Products.Description,\n        ProductId = productimage.Products.Id,\n        price = productimage.Products.Price,\n        Name = productimage.Products.Name,\n        Image = productimage.ImageUrl,\n    };\n    model.Productlist.Add(productViewModel);\n}\n</code></pre>\n\n<p>I have no idea how do this, any tips or help is appreciated</p>\n"},{"tags":["asp.net-mvc","jqgrid","modal-dialog"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13156343,"title":"open a modal dialog on cell click in jqGrid","body":"<p>I am new to jqGrid. Can you please help me on this request.</p>\n\n<p>I would like to open a new modal dialog when a cell is double clicked in jqGrid.\nEach cell will open a different modal dialog and that depends on the column, row combination. So this has to be dynamically decided.</p>\n\n<p>I am using asp.net mvc views to be shown in the dialog.</p>\n\n<p>Adding the code that I am working on : (not formatted still)</p>\n\n<pre><code>     $.ajax(\n                {\n                    type: \"GET\",\n                    url: \"/Forecast/GetColumnsAndData/\",\n                    data: \"\",\n                    dataType: \"json\",\n                    success: function (result) {\n                        colN = jQuery.parseJSON(result.colNames);\n                        colM = jQuery.parseJSON(result.colModel);\n                        jQuery(\"#rowed2\").jqGrid({\n                            url: '/Forecast/GridData/',\n                            datatype: 'json',\n                            mtype: 'GET',\n                            colNames: colN,\n                            colModel: colM,\n                            rowNum: 10,\n                            rowList: [10, 20, 30],\n                            viewrecords: true,\n                            onCellSelect: function (rowid, iCol, cellcontent) {\n                                //Need to add the code for modal dialog and criteria check\n                            },\n                            gridComplete: function () {\n                                var ids = jQuery(\"#rowed2\").jqGrid('getDataIDs');\n                                for (var i = 0; i &lt; ids.length; i++) {\n                                    var cl = ids[i];\n                                    be = \"&lt;input style='height:22px;width:20px;' type='button' value='E' onclick=\\\"editrows('\" + cl + \"');\\\"  /&gt;\";\n                                    se = \"&lt;input style='height:22px;width:20px;' type='button' value='S' onclick=\\\"jQuery('#rowed2').saveRow('\" + cl + \"', '','/Forecast/GridDataSave/');\\\"  /&gt;\";\n                                    ce = \"&lt;input style='height:22px;width:20px;' type='button' value='C' onclick=\\\"jQuery('#rowed2').restoreRow('\" + cl + \"');\\\" /&gt;\";\n                                    jQuery(\"#rowed2\").jqGrid('setRowData', ids[i], { act: be + se + ce });\n                                }\n                            },\n\n                            caption: \"Forecast Details\"\n                        });\n                        jQuery(\"#rowed2\").jqGrid('navGrid', \"#prowed2\", { edit: true, add: false, del: false });\n                        jQuery(\"#rowed2\").jqGrid('setGroupHeaders', {\n                            useColSpanStyle: true,\n                            groupHeaders: [\n                                { startColumnName: 'Hours1', numberOfColumns: 2, titleText: '&lt;center&gt;October&lt;/center&gt;' },\n                                { startColumnName: 'Hours2', numberOfColumns: 2, titleText: '&lt;center&gt;November&lt;/center&gt;' }\n                              ]\n                        });\n                    },\n                    error: function (x, e) {\n                        alert(x.readyState + \" \" + x.status + \" \" + e.msg);\n                    }\n                });\n</code></pre>\n"},{"tags":["c#","jquery","asp.net-mvc","razor","jqgrid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13157408,"title":"jqgrid scroll is not working when grouping is enable","body":"<p>I am working in \"jquery.jqGrid-4.4.1\" version of jqgrid. I have huge data to show in grid that's why I need dynamic loading on scroll. I set scroll to 1 its working fine without grouping. Following is the example of using scroll but grouping is set to false.</p>\n\n<pre><code>{\n....\nrownum: 30,\nscroll: 1,\ngrouping: false, \ngroupingView : { \n    groupField : ['BillTitle'],\n    groupColumnShow : [true], \n    groupText : ['&lt;b&gt;{0}&lt;/b&gt;'], \n    groupCollapse : false, \n    groupOrder: ['asc'], \n    groupSummary : [true], \n    groupDataSorted : true    \n   }, \n}\n</code></pre>\n\n<p>On the other end I need to use grouping of jqgrid, when I set grouping to true dynamic loading of scroll not working. Following is not working but I need both functionality.</p>\n\n<pre><code>{\n....\nrownum: 30,\nscroll: 1,\ngrouping: true, \ngroupingView : { \n    groupField : ['BillTitle'],\n    groupColumnShow : [true], \n    groupText : ['&lt;b&gt;{0}&lt;/b&gt;'], \n    groupCollapse : false, \n    groupOrder: ['asc'], \n    groupSummary : [true], \n    groupDataSorted : true    \n   }, \n}\n</code></pre>\n\n<p>Please help me. Your help should be highly appreciated.</p>\n"},{"tags":["asp.net","asp.net-mvc","iis6","asp.net-mvc-3"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":7897,"score":2,"question_id":4186695,"title":"mvc3 rc deploy on iis6 - giving 403 Forbidden error","body":"<p>Deployed a very simple MVC3 RC app to an iis 6/windows 2003 server, and just getting a 403 forbidden error when trying to accesss the root. Right now the app is only one page, so no others to try out. </p>\n\n<p>I noticed there is no longer a default.aspx in the root to handle default requests, could this maybe be the problem? or is there some special config needed for iis6? </p>\n"},{"tags":["asp.net-mvc","content-management-system","wysiwyg","template-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":464,"score":2,"question_id":4097045,"title":"building MVC CMS","body":"<p>I need a simple functionality for adding pages/changing content on those pages. I've looked at n2, and other pre build CMS tools but these are way to advanced for a simple CMS functionality that I need.</p>\n\n<p>What's the best approach? I already have an MVC app that I would like to add/build a simple features like: </p>\n\n<ol>\n<li>specify a template</li>\n<li>add areas to that template</li>\n<li>add content via wysiwyg.</li>\n</ol>\n\n<p>not sure where to start.</p>\n\n<p>any info greatly appreciated.\nthanks</p>\n\n<p>this is for .NET MVC </p>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1433,"score":2,"question_id":4896353,"title":"MVC Return Json result","body":"<p>I have a controller that uploads a file. I would like to return a json result with bool success (if successfully uploaded otherwise false) and message (this could be error message that occured OR link to a file OR link to an image, depending on what was uploaded).</p>\n\n<p>What's the best way to approach this?</p>\n\n<p>I have this</p>\n\n<pre><code>public class UploadedFile\n{\n    public bool Success { get; set; }\n\n    public string Message { get; set; }\n}\n</code></pre>\n\n<p>then In my controller I would set Success to true/or/false and Message to <code>&lt;a href</code> OR <code>&lt;img</code></p>\n\n<p>am i on the right track?</p>\n\n<p>How would i then parse this in the view so that when image it will show an image, if link show a link, if error simply alert error.\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","uiculture"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1205,"score":1,"question_id":4954330,"title":"MVC 3 building dynamic meta keywords meta description functionality for multi-culture site","body":"<p>I need to create db driven meta keywords/description. I would store these records in a database, xml format i presume; since it would be per culture.</p>\n\n<p>How would i go about doing this?</p>\n\n<p>any feedback, suggestions, help, greatly appreciated.\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1099,"score":1,"question_id":5040229,"title":"MVC insert/update in controller","body":"<p>I have the following in my controller (to insert/or/update news entity). I'm using EF POCO</p>\n\n<pre><code>       public class NewsViewModel\n       {\n           /// &lt;summary&gt;\n           /// Initializes a new instance of the &lt;see cref=\"NewsViewModel\"/&gt; class. \n           /// &lt;/summary&gt;\n           public NewsViewModel()\n           {\n               this.News = new News();\n               this.Categories = new List&lt;int&gt;();\n           }\n\n           /// &lt;summary&gt;\n           /// Gets or sets news.\n           /// &lt;/summary&gt;\n           public News News { get; set; }\n\n           /// &lt;summary&gt;\n           /// Gets or sets categories.\n           /// &lt;/summary&gt;\n           public IEnumerable&lt;SelectListItem&gt; SelectCategories { get; set; }\n\n           /// &lt;summary&gt;\n           /// Gets or sets GroupIn.\n           /// &lt;/summary&gt;\n           public IEnumerable&lt;int&gt; Categories { get; set; }\n    }\n\n\n    [HttpPost]\n    public ActionResult Edit(NewsViewModel row)\n    {\n        if (!ModelState.IsValid)\n        {\n            return View(row);\n        }\n\n        // Insert record\n        if (row.News.NewsId == 0)\n        {\n            foreach (var item in row.Categories)\n            {\n                row.News.NewsCategory.Add(this.NewsCategoryRepository.GetRow(item));\n            }\n\n            this.NewsRepository.Insert(row.News);\n        }\n        else\n        {\n            // Update\n            var updateRow = this.NewsRepository.GetRow(row.News.NewsId);\n            updateRow.Title = row.News.Title;\n            updateRow.ShortDescription = row.News.ShortDescription;\n            updateRow.IsActive = row.News.IsActive;\n            updateRow.PostDate = row.News.PostDate;\n            updateRow.ArchiveDate = row.News.ArchiveDate;\n            updateRow.LongDescription = row.News.LongDescription;\n            updateRow.NewsCategory.Clear();\n            foreach (var item in row.Categories)\n            {\n                updateRow.NewsCategory.Add(this.NewsCategoryRepository.GetRow(item));\n            }\n\n\n            this.NewsRepository.Update(updateRow);\n        }\n\n        this.NewsRepository.Context.SaveChanges();\n        return this.RedirectToAction(\"Index\");\n    }\n</code></pre>\n\n<ol>\n<li>Is this the best way to perform update? that is to clear all categories then re-insert and update?</li>\n<li>When updating is there a cleaner way than to pull out updateRow, reassing values and update it?</li>\n</ol>\n"},{"tags":["asp.net-mvc","form-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":444,"score":1,"question_id":4685652,"title":".net forms authentication question","body":"<p>i'm working on a custom login page in mvc.net. I check logins like so:</p>\n\n<pre><code>public bool Login(string login, string password, bool persistent)\n{\n  var loginEntity = this.AdminRepository.GetLogin(login, password);\n  if (loginEntity != null)\n  {\n    FormsAuthentication.SetAuthCookie(login, persistent);\n\n    HttpContext.Current.Session[\"AdminId\"] = loginEntity.AdminId;\n    HttpContext.Current.Session[\"AdminUsername\"] = loginEntity.Username;\n\n  return true;\n  }\n</code></pre>\n\n<p>then i decorate any controller that needs admin access with a filter attribute:</p>\n\n<pre><code>public override void OnActionExecuting(ActionExecutingContext filterContext)\n{\n  var ctx = HttpContext.Current;\n\n  // check if session is supported\n  if (ctx.Session != null)\n  {\n    var redirectTargetDictionary = new RouteValueDictionary();\n\n    // check if a new session id was generated\n    if (ctx.Session.IsNewSession)\n    {\n        // If it says it is a new session, but an existing cookie exists, then it must\n        // have timed out\n        string sessionCookie = ctx.Request.Headers[\"Cookie\"];\n        if (((null != sessionCookie) &amp;&amp; (sessionCookie.IndexOf(\"ASP.NET_SessionId\") &gt;= 0)) || null == sessionCookie)\n        {\n          redirectTargetDictionary = new RouteValueDictionary();\n          redirectTargetDictionary.Add(\"area\", \"Admin\");\n          redirectTargetDictionary.Add(\"action\", \"LogOn\");\n          redirectTargetDictionary.Add(\"controller\", \"Home\");\n\n          filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);\n        }\n      } else if (SessionContext.AdminId == null) {\n        redirectTargetDictionary = new RouteValueDictionary();\n        redirectTargetDictionary.Add(\"area\", \"Admin\");\n        redirectTargetDictionary.Add(\"action\", \"LogOn\");\n        redirectTargetDictionary.Add(\"controller\", \"Home\");\n\n        filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);\n      }\n    }\n    base.OnActionExecuting(filterContext);\n}\n</code></pre>\n\n<p>I see that after log in I have two cookies: </p>\n\n<ol>\n<li>ASPXAUTH (with expiration date set\nto \"At end of session\" (when\npersists is false) OR (30 min from\nnow (when persists is set to true)</li>\n<li>and ASP.NET_SessionId which\nexpiration time is always \"At end of\nsession\"</li>\n</ol>\n\n<p>Question:\nThe problem is that even though i set TRUE to \"persists\" option (which will set ASPXAUTH  expiration time 30 min from now -which is good) my Session[\"AdminId\"] is always null after i close and reopen the browser. How do i make sure my Sessions (Session[\"AdminId\"] and Session[\"AdminUsername\"]) are pulled in from the cookie when I initially do set \"persists\" to true and close then re-open the browswer window.\nthanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":337,"score":-1,"question_id":4142485,"title":"MVC SelectList SelectValues","body":"<p>I need an extention for converting ToSelectList a list of items (strings or ints)</p>\n\n<p>I found this:</p>\n\n<pre><code>        public static SelectList ToSelectList&lt;T&gt;(this IEnumerable&lt;T&gt; collection,\n                            string dataValueField, string dataTextField, string selectedValue)\n    {\n        return new SelectList(collection, dataValueField, dataTextField, selectedValue);\n    }\n</code></pre>\n\n<p>but this doesn't handle multiple selected values. \nI tried with this:</p>\n\n<pre><code>        public static SelectList ToSelectList&lt;T&gt;(this IEnumerable&lt;T&gt; collection,\n                    string dataValueField, string dataTextField, IEnumerable&lt;T&gt; selectedValues)\n    {\n        var list = new SelectList(collection, dataValueField, dataTextField, selectedValues);\n        return list;\n    }\n</code></pre>\n\n<p>but it doesn't work.\nplease help!</p>\n"},{"tags":["jquery","asp.net-mvc","chat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":404,"score":0,"question_id":4525431,"title":"Implementing jquery Chat","body":"<p>I would like to add a simple chat functionality to my web site. I found this:\n<a href=\"http://www.cs.illinois.edu/homes/wenpu1/chatbox.html\" rel=\"nofollow\">http://www.cs.illinois.edu/homes/wenpu1/chatbox.html</a></p>\n\n<p>which basically covers jquery stuff and css. All I need to to is add inserting messages to db etc. The problem is that I need to identify unique visitors/guests. Is there something like Unique Browser Id? so that I know which person to respond to.</p>\n\n<p>I'm thinking of creating Session that would be given a unique GUID for every visitor of the site. is this a good solution?\nthanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":4552551,"title":".net abstract class and reflections","body":"<p>This is for .net MVC project i'm working on</p>\n\n<p>I have the following classes:</p>\n\n<pre><code>    public abstract class TemplateBase\n{\n    public abstract string TemplateName { get; }\n    public string RuntimeTypeName { get { return GetType().FullName; } }\n}\n</code></pre>\n\n<p>and 2 classes that inherit from it:</p>\n\n<pre><code>    public class TwoColumnTemplate : TemplateBase\n{\n    public override string TemplateName { get { return \"Two-column page\"; } }\n    public AreaContainer LeftColumn { get; protected set; }\n    public AreaContainer RightColumn { get; protected set; }\n\n    public TwoColumnTemplate()\n    {\n        LeftColumn = new AreaContainer(\"Left column\");\n        RightColumn = new AreaContainer(\"Right column\");\n    }\n}\n\n    public class SingleColumnTemplate : TemplateBase\n{\n    public override string TemplateName { get { return \"Single-column page\"; } }\n    public AreaContainer CenterColumn { get; protected set; }\n\n    public SingleColumnTemplate()\n    {\n        CenterColumn = new AreaContainer(\"Center column\");\n    }\n}\n</code></pre>\n\n<p>and a contentpage class that is used for displaying/modifying html content</p>\n\n<pre><code>    public class ContentPage\n{\n    public virtual int ContentPageId { get; set; }\n\n    public virtual string Title { get; set; }\n\n    public TemplateBase Template { get; set; }\n}\n</code></pre>\n\n<p>Now the question. I've created a model binder that binds ContentPage and I do get the data to my ActionResult like so:</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult Edit(ContentPage row)\n    {\n        return this.View(row);\n    }\n</code></pre>\n\n<p>row does have the right data however I can't access Left or Right column data because abstract class TemplateBase. To clerify is there a way to dynamically cast \"row\" object to a correct class (SingleColumn or TwoColumn) type?</p>\n\n<p>Instead of this using if/else is there a better way?. Maybe using reflections?\nthanks</p>\n\n<pre><code>        [HttpPost]\n    public ActionResult Edit(ContentPage row)\n    {\n        var sb = new StringBuilder();\n\n    if (row.Template.RuntimeTypeName == \"TwoColumn\")\n    {\n        TwoColumnTemplate template = (TwoColumnTemplate)row.Template;\n    } \n    else\n    {\n        SingleColumnTemplate template = (SingleColumnTemplate)row.Template;\n    }\n\n        return this.View(row);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":2897,"score":-1,"question_id":5078131,"title":"Print Page functionality in MVC","body":"<p>Anyone done this in MVC? any info would be great!.\nThanks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mail"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":239,"score":0,"question_id":5078161,"title":"Email a Friend functionality in MVC","body":"<p>Pretty much there would be an icon on the site. clicking it would bring up a pop up window with following fieds:</p>\n\n<ol>\n<li>Name</li>\n<li>Email</li>\n</ol>\n\n<p>you would then be able to fill out the page and an email would be sent to \"email\" provided in the \"Email\" field. The problem is: How do i know what page i'm on so that I can put it in the message?\nthanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":4807372,"title":"Using a dictionary to dynamically pass values to an ActionLink in ASP.NET MVC","body":"<p>Is there a way to pass a  <code>Dictionary&lt;string, string&gt;</code> to <code>Html.ActionLink()</code>?</p>\n\n<h3>My Dictionary:</h3>\n\n<pre><code>var myDictionary = new Dictionary&lt;string, string&gt; { { \"serviceId\", \"2342\" } }\n</code></pre>\n\n<p>I tried doing this:</p>\n\n<pre><code>Html.ActionLink(\"Text here\", \"Action\",\"Controller\", myDictionary, null)\n</code></pre>\n\n<p>but that doesn't work</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":213,"score":0,"question_id":4866407,"title":"MVC3 Razorview Syntax","body":"<p>Can someone please tell me how to convert this to razor view syntax? </p>\n\n<pre><code>&lt;%= ViewData.Model.Firms.Count &gt; 0 ? Html.Pager(ViewData.Model.Firms.PageSize, ViewData.Model.Firms.PageNumber, ViewData.Model.Firms.TotalItemCount) : string.Empty%&gt;\n</code></pre>\n\n<p>thanks for help in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":420,"score":0,"question_id":4049929,"title":"MVC Ajax.BeginForm","body":"<p>I have an ajax form like so:</p>\n\n<pre><code>    &lt;% using (Ajax.BeginForm(\"Comments\", \"Comments\", null, new AjaxOptions {UpdateTargetId=\"main\", OnSuccess=\"createSuccess\" }, new{ @id=\"main\"})) {%&gt;\n    &lt;%: Html.ValidationSummary(true, \"errors\") %&gt;\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;Fields&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            &lt;%: Html.LabelFor(model =&gt; model.Body) %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            &lt;%: Html.TextBoxFor(model =&gt; model.Body) %&gt;\n            &lt;%: Html.ValidationMessageFor(model =&gt; model.Body) %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            &lt;%: Html.LabelFor(model =&gt; model.Name) %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            &lt;%: Html.TextBoxFor(model =&gt; model.Name) %&gt;\n            &lt;%: Html.ValidationMessageFor(model =&gt; model.Name) %&gt;\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Submit\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n\n&lt;% } %&gt;\n\n&lt;div id=\"Success\" style=\"display:none;\"&gt;\n    New entry successfully entered\n&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nfunction createSuccess(context)\n{\n    if ($(\".validation-summary-errors\").length &gt; 0) {\n        return;\n    }\n\n    $('#main').clearForm()\n    $('#Success').show();\n}\n</code></pre>\n\n<p></p>\n\n<p>Is this the right way to check if the form was successfully submitted? What if the class name for validation-summary changes? is there a better way?</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":11754761,"title":"MVC get controller in helper class","body":"<p>I need to be able to get a controller name in my custom helper class. </p>\n\n<p>I have the following:</p>\n\n<ol>\n<li>Layout view which calls a controller: \"HelperController\", action: \"Menu\" like so:</li>\n</ol>\n\n<p><code>@Html.Action(\"Menu\", \"Helper\")</code></p>\n\n<ol>\n<li><p>This calls ActionResult and generages an html:</p>\n\n<pre><code>@model List&lt;MvcMenuItem&gt;\n@{\nLayout = null;\n}\n@{        \n@Html.Menu(this.ViewContext).ClientId(\"navMain\").AddRange(Model).Render()\n}\n</code></pre></li>\n<li><p>This calls \"<code>public static class MvcMenuExtensions</code>\" and in there (in my <code>Render()</code> method) I need to be able to get the controller name I'm currently in, NOT the controller name that is calling <code>MvcMenuExtensions</code></p></li>\n</ol>\n\n<p>I've tried this:</p>\n\n<pre><code>string controller = this.ViewContext.RouteData.Values[\"controller\"].ToString();\n</code></pre>\n\n<p>but this results in controller being \"<code>Helper</code>\" controller and not the current controller I'm in. Since this \"<code>ActionResult</code>\" is being called from anywhere on the page (it's in the layout).</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":320,"score":0,"question_id":5310606,"title":"Multistep form .net","body":"<p>I'm working in .net MVC3. I have a multi step form</p>\n\n<ol>\n<li>step1: fillin username, password, confirm password</li>\n<li>step2: fill in additional info</li>\n</ol>\n\n<p>problem:\nonce user fills in step1 he/she should not be able to go back. however there is always a case where user clicks browser 'back' button. in that case all the info (except password) is pre-filled. I want to aler user (in step2) when back button is clicked that none of the info in step 1 will be updated OR somehow disable back button. is that possible? what are some valid solutions?\nthanks</p>\n"},{"tags":["asp.net-mvc","castle-windsor","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":248,"score":2,"question_id":4678635,"title":"IoC Castle Windsor in MVC routing problem","body":"<p>I've set up castle windsor in my mvc app. everything works great except it also catches routes that are of type link or image. The problem is that right before exiting from the controller and generating the view \"GetControllerInstance\" is executed with 'null' type. This happends anytime there a link on a page like:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"non-existing.css\"/&gt;\n</code></pre>\n\n<p>Or a link to an image that does not exist. Why is this happening?</p>\n\n<p>My windows class:</p>\n\n<pre><code>    public class WindsorControllerFactory : DefaultControllerFactory\n{\n    #region Constants and Fields\n\n    /// &lt;summary&gt;\n    /// The container.\n    /// &lt;/summary&gt;\n    private readonly WindsorContainer container;\n\n    #endregion\n\n    // The constructor:\n    // 1. Sets up a new IoC container\n    // 2. Registers all components specified in web.config\n    // 3. Registers all controller types as components\n    #region Constructors and Destructors\n\n    /// &lt;summary&gt;\n    /// Initializes a new instance of the &lt;see cref=\"WindsorControllerFactory\"/&gt; class.\n    /// &lt;/summary&gt;\n    public WindsorControllerFactory()\n    {\n        // Instantiate a container, taking configuration from web.config\n        this.container = InversionOfControl.Container;\n\n        // Also register all the controller types as transient\n        IEnumerable&lt;Type&gt; controllerTypes = from t in Assembly.GetExecutingAssembly().GetTypes()\n                                            where typeof(IController).IsAssignableFrom(t)\n                                            select t;\n        foreach (Type t in controllerTypes)\n        {\n            this.container.AddComponentLifeStyle(t.FullName, t, LifestyleType.Transient);\n        }\n    }\n\n    #endregion\n\n    #region Methods\n\n    /// &lt;summary&gt;\n    /// The get controller instance.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"requestContext\"&gt;\n    /// The request context.\n    /// &lt;/param&gt;\n    /// &lt;param name=\"controllerType\"&gt;\n    /// The controller type.\n    /// &lt;/param&gt;\n    /// &lt;returns&gt;\n    /// Resolved controller instance.\n    /// &lt;/returns&gt;\n    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)\n    {\n        if (controllerType == null)\n        {\n            controllerType = typeof(HomeController);\n        }\n\n        return (IController)this.container.Resolve(controllerType);\n    }\n\n    #endregion\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","linq","entity-framework",".net-3.5"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":671,"score":2,"question_id":4645166,"title":"LINQ parent child relation","body":"<p>I'm working on the BLOG functionality in MVC. I need to be able to create 'blog comments'. So each comment may have a parent comment etc.</p>\n\n<p>Given table \"Comments\":\nCommentId -> int -> identity autoincrement\nPostId -> int\nParentId -> int\nComment -> string</p>\n\n<p><img src=\"http://i.stack.imgur.com/nxi2T.png\" alt=\"alt text\">       </p>\n\n<p>Is there a way to get a list of comments for a given article ordered by CreateDate and ParentId?</p>\n\n<p>Or maybe there is a better table design you may suggest. What is the best design when inserting Post comments like this?</p>\n\n<p>I'm using Entity framework.</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","elmah"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":271,"score":2,"question_id":8892233,"title":"Elmah not logging 404 (missing files / images)","body":"<p>For some reason emlah is not logging missing images in my MVC3 app. Everything else like 'missing action' wrong url is ok. what could be the cause?\nthanks</p>\n\n<p>EDIT:</p>\n\n<p>I am running Integrated Mode and am NOT using built-in VS IIS.</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Ct6f.png\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/ujEHe.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/QREqJ.png\" alt=\"enter image description here\"></p>\n\n<p>EDIT 2:</p>\n\n<p>Doesn't seem to log missing images if the images are mapped via virtual directory:\n<img src=\"http://i.stack.imgur.com/aSYbB.png\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":359,"score":3,"question_id":4705913,"title":"MVC Validation Attribute","body":"<p>How do you validate a class using Validation attributes when validating strongly typed view models.</p>\n\n<p>Suppose you have a view model like so:</p>\n\n<pre><code>[PropertiesMustMatch(\"Admin.Password\", \"Admin.ConfirmPassword\")]\npublic class AdminsEditViewModel\n{\n    public AdminsEditViewModel()\n    {\n        this.Admin = new Admin(); // this is an Admin class\n    }\n\n    public IEnumerable&lt;SelectListItem&gt; SelectAdminsInGroup { get; set; }\n\n\n    public IEnumerable&lt;SelectListItem&gt; SelectAdminsNotInGroup { get; set; }\n\n    public Admin Admin { get; set; }\n}\n</code></pre>\n\n<p>I get null exception when on this line of PropertiesMustMatchAttribute</p>\n\n<pre><code>object originalValue = properties.Find(OriginalProperty,  true /* ignoreCase */).GetValue(value);\n</code></pre>\n\n<p>since Password field is a property of Admin class and NOT AdminsEditViewModel. How do I make it so that it will go so many levels deep until it does find property of Admin in the ViewModel AdminsEditViewModel?\nthanks</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":360,"score":3,"question_id":4583183,"title":"MVC Get ID of object","body":"<p>in the following post: <a href=\"http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html\" rel=\"nofollow\">http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html</a></p>\n\n<pre><code>&lt;%= Html.Editor(prop.PropertyName) %&gt;\n</code></pre>\n\n<p>Html.Editor creates a text box with MVC generated name. How do I get/access that name? id?</p>\n\n<p>So in my code this gets generated:</p>\n\n<pre><code>&lt;input type=\"text\" value=\"Right\" name=\"Template.RightColumn.ContainerName\" id=\"Template_RightColumn_ContainerName\"&gt;\n</code></pre>\n\n<p>and I want to generate this:</p>\n\n<pre><code>&lt;div id=\"Template_RightColumn_ContainerName\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>so I need to access PropertyId. how do i do it?</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1308,"score":7,"question_id":5114631,"title":"MVC site search functionality","body":"<p>i need a simple site search functionality for my mvc app. some of the pages are static and some dynamic (like news articles that are entered in cms). I would like the search to handle both. is this product any good? <a href=\"http://www.sitesearchasp.net\" rel=\"nofollow\">http://www.sitesearchasp.net</a> any other?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","validation"],"answer_count":1,"favorite_count":15,"up_vote_count":21,"down_vote_count":0,"view_count":6749,"score":21,"question_id":7025198,"title":"MVC3 custom validation: compare two dates","body":"<p>I've created a custom ValidationAttribute that compares 2 dates and makes sure that the second date is greater than the first:</p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable\n{\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n    {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {\n        var propertyTestedInfo = validationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null)\n        {\n            return new ValidationResult(string.Format(\"unknown property {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue = propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime))\n        {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is DateTime))\n        {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue)\n        {\n            if (this.allowEqualDates)\n            {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue)\n            {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule\n        {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] = this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] = this.allowEqualDates;\n        yield return rule;\n    }\n</code></pre>\n\n<p>CalendarEntry class:\n...</p>\n\n<pre><code>public virtual DateTime StartDate { get; set; }\n\n[IsDateAfter(\"StartDate\", true, ErrorMessage=\"End date needs to be after start date\")]\npublic virtual DateTime EndDate { get; set; }\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n    'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function(value, element, params) {\n    alert(params.propertytested);\n    var startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\n    if (!value || !startdatevalue) return true;\n    return (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) : Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p>This works fine when the <strong>CalendarEntry</strong> is not wrapped inside another class. HOWEVER, when I use a view model like so:</p>\n\n<pre><code>    public class TrainingDateEditViewModel\n    {\n        #region Properties\n\n        /// &lt;summary&gt;\n        /// Gets or sets CalendarEntry.\n        /// &lt;/summary&gt;\n        public CalendarEntry CalendarEntry { get; set; }\n....\n</code></pre>\n\n<p>The client validation no longer works because the html output produced is this:</p>\n\n<pre><code>&lt;input type=\"text\" value=\"\" name=\"CalendarEntry.EndDate\" id=\"CalendarEntry_EndDate\" data-val-isdateafter-propertytested=\"StartDate\" data-val-isdateafter-allowequaldates=\"True\" data-val-isdateafter=\"End date needs to be after start date\" data-val=\"true\"&gt;\n</code></pre>\n\n<p>And the </p>\n\n<pre><code>data-val-isdateafter-propertytested=\"StartDate\" and IT SHOULD BE: \"CalendarEntry.StartDate\".\n</code></pre>\n\n<p>How would I make it so that it would know to bind to \"CalendarEntry.StartDate\"\nrule.ValidationParameters[\"propertytested\"] = this.testedPropertyName; // HERE IT SHOULD BE FULL NAME??? HOW??</p>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12957164,"title":"MVC Get View HTML output in Test Method","body":"<p>How can I get generated HTML (View) in my Test Method?</p>\n\n<p>I have the following:</p>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n    ViewBag.Message = \"Welcome to ASP.NET MVC!\";\n\n    return View();\n}\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Home Page\";\n}\n\n&lt;h2&gt;@ViewBag.Message&lt;/h2&gt;\n&lt;p&gt;\n    To learn more about ASP.NET MVC visit &lt;a href=\"http://asp.net/mvc\" title=\"ASP.NET MVC Website\"&gt;http://asp.net/mvc&lt;/a&gt;.\n&lt;/p&gt;\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>   [TestMethod]\n    public void HomeControllerReturnsView()\n    {\n        // Arrange\n        var controller = new HomeController();\n\n        // Act\n        var result = controller.Index() as ViewResult;\n\n        using (StringWriter sw = new StringWriter())\n        {\n            ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(controller.ControllerContext, \"Home\");\n            ViewContext viewContext = new ViewContext(controller.ControllerContext, viewResult.View, controller.ViewData, controller.TempData, sw);\n            viewResult.View.Render(viewContext, sw);\n\n            var test = sw.GetStringBuilder().ToString();\n        }\n    }\n</code></pre>\n\n<p>FYI: when i run this in debug controller.HttpContext and controller.RouteData are null.\nthanks</p>\n"},{"tags":["asp.net-mvc","artificial-intelligence","service-layer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13152028,"title":"Where to place modules related to AI in MVCS","body":"<p>I am bit confused, what is the right place to place the modules related to AI in an MVCS pattern ? Alongside with Model View Controller and Services folder ?</p>\n\n<p>V.</p>\n"},{"tags":["asp.net-mvc","captcha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13152562,"title":"how to implement simple captcha value in MVC application","body":"<p>I want to integrate arithmetic captcha in mvc application like\n2+3=</p>\n"},{"tags":["asp.net-mvc","html-helper"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13153693,"title":"MVC Helper get the Html id that will be generated by MVC","body":"<p>I am trying the id that will be generated for a HTMLHelper in MVC. I am building a autocomplete helper and my textbox needs to know the id of the hidden element. Currently this is what i have.</p>\n\n<pre><code>public static MvcHtmlString EmployeeAutocomplete&lt;TModel, TValue1, TValue2&gt;(this HtmlHelper&lt;TModel&gt; htmlHelper,\n                                Expression&lt;Func&lt;TModel, TValue1&gt;&gt; employeeTextBoxExpression,\n                                Expression&lt;Func&lt;TModel, TValue2&gt;&gt; employeeHiddenExpression,\n                                string extraClassNames = \"\"\n                                )\n{\n  //get the type name.\n  var hiddenName = ExpressionHelper.GetExpressionText(employeeHiddenExpression);\n\n  var sb = new StringBuilder();\n  sb.Append(htmlHelper.TextBoxFor(employeeTextBoxExpression, new\n  {\n    @class = \"ac_employee input-text \" + extraClassNames,\n    data_rel =hiddenName.Replace(\".\", \"_\")\n  }));\n  sb.Append(htmlHelper.HiddenFor(employeeHiddenExpression));\n  return new MvcHtmlString(sb.ToString());\n}\n</code></pre>\n\n<p>The hidden name has got the property name correct, but it still needs the type, the html being generated for the hiddenfield has got the following \"ObjectName_PropertyName\" and the \nExpressionHelper.GetExpressionText() only gives the \"PropertyName\"</p>\n\n<p>thanks in advance</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","forms-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13155296,"title":"MVC4 Forms Authentication Custom Identity Cast not working","body":"<p>I have implemented openAuth forms authentication in mvc almost same as on this page <a href=\"http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/\" rel=\"nofollow\">http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/</a></p>\n\n<p>However I am unable to cast the <code>System.Web.Security.FormsIdentity</code> to <code>OpenIdIdentity</code> when i don't use <code>[OpenIdAuthorize]</code> attribute on my actions.</p>\n\n<pre><code>[OpenIdAuthorize]\npublic ActionResult Index()\n{\n    return View();\n}\n</code></pre>\n\n<p>If I add <code>[OpenIdAuthorize]</code> attribute and then cast the identity, it works fine. I have an action which should work for both, anonymous and signed in users. However if a user is signed in, I want to get <code>OpenIdIdentity</code> and use it.</p>\n\n<p>The problem is that override of <code>AuthorizeCore</code> does not get called if I don't put an attribute in action.</p>\n"},{"tags":["asp.net-mvc","list","generics"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":62,"score":4,"question_id":13155062,"title":"ASP.NET MVC genric list in viewdata","body":"<p>I have generic list property which I am binding to the View. The problem is when I post the data after entering some values in view, the page get refreshed and it doesn't retain the value in the View. And also when i try to add <code>Html.ValidationMessage</code> For that particular field I get an error </p>\n\n<pre><code> \"The value 'System.Collections.Generic.List`1[&lt;name of the class&gt;]' is invalid\"\n</code></pre>\n\n<p>My code looks like this,\n<strong>model</strong></p>\n\n<pre><code>  public List&lt;Chart&gt; Charts \n  { \n     get \n       { \n         return  _repository.GetCharts(Convert.ToInt32(this.Template_Id)); \n      } \n      set{} \n   }\n</code></pre>\n\n<p><strong>actual class</strong></p>\n\n<pre><code> public class Chart\n   {\n        public string ChartDisplayText { get; set; }\n   }\n</code></pre>\n\n<p>the property in Chart class is the one where I am entering the value in View\nAny help much appreciated, Thanks</p>\n"},{"tags":["jquery","asp.net-mvc","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13154260,"title":"How do you implement autocomplete in a textbox where the data comes from the database?","body":"<p>Before anything else, please don't shoot me for being a noob who is blindly making her way to finishing an entire mvc project, albeit not starting it, alone.</p>\n\n<p>So anyway, I'm completely confused as to how to implement jquery ui autocomplete in a textbox where the data comes from a database table. </p>\n\n<p>I tried doing it using what I can find on the internet and here's what I came up with in my jquery function:</p>\n\n<pre><code>        $(function (){\n        $(\"#autoCompleteText\").autocomplete({\n            source: function(request, response) {\n                $.ajax({\n                    type: \"POST\",\n                    traditional: true,\n                    dataType: \"json\",\n                    url: \"/Service/jsonAutoComplete\",\n                    success: function(result) {\n                        response($.map(result.d, function (item){\n                            return {\n                                value: item.ProductName\n                            }\n                        }))\n                    },\n                    minLegth: 2\n                });\n            }\n            });\n        });\n</code></pre>\n\n<p>For the method in my controller here's how it looks like:</p>\n\n<pre><code>public JsonResult jsonAutoComplete(int companyId)\n    {\n        JsonResult result = new JsonResult();\n        Products products = new Products();\n        products = db.Products.FirstOrDefault(x =&gt; x.CompanyId == companyId);\n        int productId = products.Id;\n        SelectList select = this._selectFactory.CreateSelectListFromProductsByCompanyId(products.Id, companyId);\n        result.Data = new { select = select, productId = productId };\n        return result;\n    }\n</code></pre>\n\n<p>I'm pretty sure I'm doing something wrong here since nothing happens whenever I try to type the first 2 letters of one of the products on my database.</p>\n\n<p>Also, what does $.map exactly mean? Most of the examples I saw on the web had this so I figured it's needed but I really don't understand it yet.</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","sql-server-2008","entity-framework-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13156594,"title":"in MVC3 how to recreate the EdmMetaData Table in Sql Server?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11215035/mvc3-edmmetadata-table-not-found\">MVC3 EDMmetadata table not found</a>  </p>\n</blockquote>\n\n\n\n<p>I downloaded the MvcMusicStore example from <a href=\"http://mvcmusicstore.codeplex.com\" rel=\"nofollow\">mvcmusicstore.codeplex.com</a> \nand I have deleted the EdmMetaData Table.</p>\n\n<p>Everytime that I run it, I get this error...</p>\n\n<blockquote>\n  <p>\"Model compatibility cannot be checked because the database does not\n  contain model metadata. Ensure that IncludeMetadataConvention has been\n  added to the DbModelBuilder conventions.\"</p>\n</blockquote>\n\n<p>how can I recreate that table?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","routes"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13135633,"title":"File to define route in MVC3","body":"<p>I have this file :</p>\n\n<pre><code>&lt;fru&gt;\n &lt;url action=\"product\" controler=\"Home\" params=\"{id=123}\" &gt;this_is_the_an_arbitrary_url_of_a_product.html&lt;/url&gt;\n &lt;url action=\"customer\" controler=\"Home\" params=\"{id=445}\" &gt;this_is_the_an_arbitrary_url_of_a_customer.html&lt;/url&gt;\n... other urls ...\n&lt;/fru&gt;\n</code></pre>\n\n<p>I'm looking for binding this file or this object structure with the MVCHandler, in order to map the request to the good action with the params.\nIt's important for the url me that the urls doesn't respect any structure rules.</p>\n\n<p>Is there a  way to do this?</p>\n"},{"tags":["c#","ajax","asp.net-mvc","asp.net-mvc-3","session"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13156287,"title":"Why is my session cart list empty?","body":"<p>When I debugg my actionresult AddToCart. My cart gets a value of a productId which is working perfectly here it is:</p>\n\n<pre><code>public ActionResult AddToCart(int productID)\n    {\n        List&lt;int&gt; cart = (List&lt;int&gt;)Session[\"cart\"];\n        if (cart == null){\n           cart = new List&lt;int&gt;();\n        }\n        cart.Add(productID);\n\n        return new JsonResult() { Data = new { Status = \"Success\" } };\n    }\n</code></pre>\n\n<p>And I am using ajax to get the productID:</p>\n\n<pre><code>$(function () {\n            $(\".a\").live(\"click\", function () {\n                var $this = $(this),\n            productID = $this.data('productID');\n                $.ajax({\n                    url: '/Home/AddToCart',\n                    type: \"post\",\n                    cache: false,\n                    data: { productID: productID },\n                    success: function (data) {\n                        data = eval(data);\n                        $this.addClass('productSelected');\n                    },\n                    error: function (result) {\n                        $(\".validation-summary-errors\").append(\"&lt;li&gt;Error connecting to server.&lt;/li&gt;\");\n                    }\n\n                });\n            });\n\n        });\n</code></pre>\n\n<p>But when I implemented this actionresult my cart is null:</p>\n\n<pre><code>public ActionResult ShoppingCart()\n{\n    var cart = Session[\"cart\"] as List&lt;int&gt;;\n\n    var products = cart != null ? cart.Select(id =&gt; \n             {\n                 var product = repository.GetProductById(id);\n                 return new ProductsViewModel\n                    {\n                       Name = product.Name,\n                       Description = product.Description,\n                       price = product.Price\n                    }\n             }) : new List&lt;ProductsViewModel&gt;();\n\n    return PartialView(products);\n}\n</code></pre>\n\n<p>What am I doing wrong? Why is actionresult Shoppingcart have null values how is this happenin? When I debugg AddToCart, Cart gets a value and it gets added.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13155836,"title":"dropdownlistfor selected value list item possible?","body":"<p>I'm currently working in ASP.NET MVC 4 and I'm trying to do something special here.</p>\n\n<p>Here's the code I currently have for my dropdownlist:</p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.SourceList, new SelectList(Model.SourceList, \"Id\", \"Name\", new { id = \"SourceList\" }))\n</code></pre>\n\n<p>Now this works, but it's pretty dumb what I'm doing here. In my back-end I query again to get the entire model from the id I just selected.</p>\n\n<p>What I need is not the Id of the selected model, but the entire model. Is there any way of doing this?</p>\n\n<p>My current JQuery callback:</p>\n\n<pre><code>$.ajax({\n            url: '@Url.Action(\"SetLicensesAfterSourceChange\", \"Permission\")',\n            type: 'POST',\n            dataType: 'json',\n            contentType: 'application/json;',\n            data: JSON.stringify({ \"Id\" : selectedStartSourceId, \"sourceList\" : jsonSourceList }),\n            success: function (result) {\n                //Do stuff here\n            }\n        });\n</code></pre>\n\n<p>What I want to be able to do:</p>\n\n<pre><code>$.ajax({\n            url: '@Url.Action(\"SetLicensesAfterSourceChange\", \"Permission\")',\n            type: 'POST',\n            dataType: 'json',\n            contentType: 'application/json;',\n            data: \"selectedModel\" = modelFromDropDownList,\n            success: function (result) {\n                //Do stuff here\n            }\n        });\n</code></pre>\n"},{"tags":["jquery","asp.net","asp.net-mvc","jquery-validation-plugin","unobtrusive-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13048424,"title":"jquery.validate does not seem to work with certain inputs where name value includes a dot i.e RegisterModel.Pssword","body":"<p>In my views if I use a model that just has scalar, basic properties i.e [RegisterModel] everything works fine. But if I use a view model type where one or more properties is set to another .net complex type, say [RegisterModelAndLogOnModel] then the generated HTML does not work properly with the jQuery validate plug-in. With jQuery 1.7.2 it always tells me the confirmation password does not match the password, in jQuery 1.8.2 it just plain refuses to work and errors. I have now pin pointed the problem to the RegisterModel.ConfirmPassword input. </p>\n\n<pre><code> &lt;input name=\"RegisterModel.Password\" id=\"RegisterModel_Password\" type=\"password\" data-val=\"true\" data-val-required=\"The Password field is required.\" data-val-length-min=\"6\" data-val-length-max=\"100\" data-val-length=\"The Password must be at least 6 characters long.\"&gt;\n\n&lt;input name=\"RegisterModel.ConfirmPassword\" id=\"RegisterModel_ConfirmPassword\" type=\"password\" data-val=\"true\" data-val-equalto-other=\"*.Password\" data-val-equalto=\"The password and confirmation password do not match.\"/&gt;\n</code></pre>\n\n<p>works:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.Password)\n                @Html.ValidationMessageFor(m =&gt; m.Password)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.ConfirmPassword)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.ConfirmPassword)\n                @Html.ValidationMessageFor(m =&gt; m.ConfirmPassword)\n            &lt;/div&gt;\n</code></pre>\n\n<p>Does not work:</p>\n\n<pre><code>&lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.Password)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.RegisterModel.Password)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.Password)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.RegisterModel.ConfirmPassword)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.PasswordFor(m =&gt; m.RegisterModel.ConfirmPassword)\n                @Html.ValidationMessageFor(m =&gt; m.RegisterModel.ConfirmPassword)\n            &lt;/div&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":13149747,"title":"jqGrid set focus to clicked cell AND implement datepicker in IE and Firefox","body":"<p>Apologies if this has been answered already. There are a number of questions around this but I can't quite get what I'm after.</p>\n\n<p>I have a jqGrid. The first cell has a datepicker attached (on the fly when the cell is edited, not in the initial grid definition).</p>\n\n<p>When I double click on a cell in the middle of the grid, I want it to go into edit mode, sets focus to that clicked cell and not fire the datepicker (as I didn't double click in it)</p>\n\n<p>With the code below I have achieved what I want in <strong>Firefox</strong>. This is based on Olegs (and others) excellent posts on the topic.</p>\n\n<p>Howevever, in <strong>IE9</strong>, although it sets focus as required, it also fires the datepicker in the first cell.</p>\n\n<p>I understand that by default the jqGrid automatically moves to the first cell, therefore firing the datepicker if it exists, regardless of whether I double clicked it. Maybe as a workaround I will need to create some kind of tiny dummy cell in the first position, but first I would like to take this opportunity to learn more.</p>\n\n<p>Here is some abbreviated jqGrid code, you will recognise bits and pieces from Oleg and other peoples posts. Sorry I cannot give you the exact version of jqGrid at this point, suffice to say I downloaded it early October 2012.</p>\n\n<p>I'll just say I don't fully understand the event order that is gong on - on first glance it appears that the datepicker is being attached(?) <em>before</em> the clicked field is getting focus anyway.</p>\n\n<p>As an aside this is inside a MVC ASP.Net project. I find it amusing and ironic that the only way I can get a useful grid control in MVC / ASP.Net is to start learning Javascript.</p>\n\n<pre><code>$(document).ready(\n    function () {\n        var lastsel;\n        $(\"#ts\").jqGrid({\n            //=============\n            // Grid Setup\n            url: 'Timesheet/GridData/',\n            datatype: 'json',\n            mtype: 'GET',\n            colNames: ['Date', 'Customer', 'Project', 'Description', 'Hours', '$'],\n            colModel: [\n              { name: 'tsdate', index: 'tsdate', width: 80, editable: true },\n              { name: 'Customer', index: 'Customer', width: 250, align: 'left', editable: true, edittype: \"select\", editoptions: { dataUrl: 'Timesheet/CustomerList'} },\n              { name: 'Project', index: 'Project', width: 250, align: 'left', editable: true, edittype: \"select\", editoptions: { dataUrl: 'Timesheet/ProjectList'} },\n              { name: 'Desc', index: 'Desc', width: 300, align: 'left', editable: true },\n              { name: 'Hours', index: 'Hours', width: 50, align: 'left', editable: true },\n              { name: 'Charge', index: 'Charge', edittype: 'checkbox', width: 18, align: 'center', editoptions: { value: \"0:1\" }, formatter: \"checkbox\", formatoptions: { disabled: false }, editable: true }\n            ],\n            //=============\n            // Grid Events\n            // when selecting, undo anything else\n            onSelectRow: function (rowid, iRow, iCol, e) {\n                if (rowid &amp;&amp; rowid !== lastsel) {\n                    $('#ts').jqGrid('restoreRow', lastsel);\n                    lastsel = rowid;\n                }\n            },\n            // double click to edit\n            ondblClickRow: function (rowid, iRow, iCol, e) {\n                // Go into edit mode (automatically moves focus to first field)\n                $('#ts').jqGrid('editRow', rowid, true, onGridEdit);\n                // Now set focus on selected field\n                if (!e) e = window.event; // get browser independent object\n                var element = e.target || e.srcElement\n                $(\"input, select\", element).focus();\n            },\n            postData:\n                {\n                    startDate: function () { return $('#startDate').val(); }\n                }\n        }); // END jQuery(\"#ts\").jqGrid\n\n        // This is called when the row is double clicked\n        function onGridEdit(RowID) {\n            // onGridEdit is attached as the 'edit function' in the call to .jqGrid('editRow' above\n            // Attach the datepicker to the tsdate field. For some reason this needs to be in the edit function\n            // And does not work in IE 9. In IE9 it fires the datepicker. In Firefox it only fires when the field\n            // gets the focus\n            $(\"#\" + RowID + \"_tsdate\").datepicker({ dateFormat: 'yy-mm-dd' });\n        }\n\n    });           // END $(document).ready\n</code></pre>\n\n<p><strong>SOLUTION</strong> when comparing debugging between Firefox and IE9 it appeared that the firefox events ran sequentially and the the IE9 ones did not.</p>\n\n<p>Regardless, the final solution as suggested by Oleg was to wrap the oneditfunc function in a setTimeout function:</p>\n\n<pre><code>            ondblClickRow: function (rowid, iRow, iCol, e) {\n                if (!e) e = window.event; //evt evaluates to window.event or inexplicit e object, depending on which one is defined\n                var element = e.target || e.srcElement\n\n                // Go into edit mode (automatically moves focus to first field)\n                $(this).jqGrid(\n                    'editRow',\n                    rowid,\n                    {\n                        keys: true,\n                        oneditfunc: function (rowId) {\n                            setTimeout(function () {\n                                $(\"input, select\", element).focus();\n                                $(\"#\" + rowId + \"_tsdate\").datepicker({ dateFormat: 'yy-mm-dd' });\n                            }, 50);\n                        }\n                    }\n                ); // end jqGrid call\n\n            },  // end ondblClickRow event handler\n</code></pre>\n"},{"tags":["c#","sql","asp.net-mvc","video","flowplayer"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":103,"score":3,"question_id":12873954,"title":"How to return video (flv) path to display in flowplayer?","body":"<p>I would like to integrate flowplayer in ASP mvc 3 application.\nI'm using SQL Server 2008. Database contains path to files as well which are stored in folder. I wrote library which is able to convert video to flv. Now i would like to use this video in page. </p>\n\n<p>Does anyone have knowledge how to implement that?</p>\n\n<p>I found the flowplayer sample code.</p>\n\n<p><a href=\"http://flowplayer.org/docs/\" rel=\"nofollow\">http://flowplayer.org/docs/</a></p>\n\n<p>But I'm looking for codebehind solution (C#) how to implement something like that (how to return path to video).\nIf anyone have some code I'll be grateful for help.</p>\n\n<p>Please take a look.</p>\n\n<pre><code>    public string FindMusicByID(int musicID)\n    {\n        var pathh = from plik in _data.musicMusicTables\n                    where plik.musicMusicID == musicID\n                    select new PathToFile { PathFile = plik.musicMusicPath };\n        return pathh.ToString();\n    }\n</code></pre>\n\n<p>This is the linq part code which i'm using. FindMusicByID(int musicID) return path to .flv file. I'm looking for how to send output filepath to webpage. I would like to use this path in flowplayer.</p>\n\n<p><code>&lt;div class=\"flowplayer\" data-engine=\"flash\"&gt; &lt;video src=\"some path\"&gt;&lt;/video&gt;\n</code> </p>\n\n<p>Fox example this is my ouptut path d:\\file.flv</p>\n\n<p>I suppose that it's necessary to send output to JavaScript.\nHow can i insert path into flowplayer by ID?</p>\n"},{"tags":["asp.net-mvc","visual-studio","dhtmlx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13117190,"title":"How to deactivate dhtmlx tab,when click on the second time","body":"<p>I am using DHTMLX tabs, in my case, initially my tab is in <code>InActive</code> state. When user clicked initially the tab comes to <code>Active</code> and loading the content using <code>setContentHref()</code>.</p>\n\n<p>Again if I click on the same tab for second time I don't want to display the content and the tab comes to initial state.</p>\n\n<p>For this I have implemented like</p>\n\n<pre><code>tabbar.attachEvent(\"onTabClick\", function (id, prevId) {\n                    alert(id); alert(prevId);\n                    if (id == prevId) {\n                       tabbar.setTabInActive(id);\n                       return true;\n                    }\n                });\n</code></pre>\n\n<p>but the tab does not come into the <code>InActive</code> state. Can you tell me how to do this?</p>\n"},{"tags":["javascript","asp.net-mvc","grid","telerik-grid","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2882,"score":0,"question_id":10977144,"title":"Kendo UI MVC Grid double click","body":"<p>I'm currently testing the Kendo UI MVC Extensions Beta.\nI'm trying to implement a double click - edit but i don't know how i can get the rowId.\nJS:</p>\n\n<pre><code>$('#GridPedidos table tr').live('dblclick', function () {\n    alert(' grid dbl clicked');\n});\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@(Html.Kendo().Grid(Model) _\n.Name(\"GridPedidos\") _\n    .Columns(Sub(column)\n                 column.Bound(Function(item) item.idPedidoDocumentacao).Width(\"5%\")\n                 column.Bound(Function(item) item.descEstadoPedidoDoc).Width(\"25%\")\n                 column.Bound(Function(item) item.descTipoPedidoDoc).Width(\"25%\")\n                 column.Bound(Function(item) item.data).Width(\"25%\").Format(\"{0:dd-MM-yyyy}\")\n                 column.Command(Function(item) item.Destroy()).Width(\"10%\")\n             End Sub) _\n    .DataSource(Sub(ds)\n                    ds.Ajax().ServerOperation(False).Read(Sub(s)\n                                                              s.Action(\"GetListaGrid\", \"listaPedidos\")\n                                                          End Sub).Create(Sub(s)\n                                                                              s.Action(\"detalhePedido\", \"Pedidos\")\n                                                                          End Sub).Model(Sub(m)\n                                                                                             m.Id(Function(p) p.idPedidoDocumentacao)\n                                                                                         End Sub).Destroy(Sub(d)\n                                                                                                              d.Action(\"apagaPedido\", \"listaPedidos\")\n                                                                                                          End Sub)\n                End Sub) _\n    .Selectable()\n)\n</code></pre>\n\n<p>i can detect the double click with this function, but how do i get the id?</p>\n"},{"tags":["asp.net-mvc","membership-provider","simplemembership"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":298,"score":1,"question_id":12843022,"title":"ASP.NET simple membership provider?","body":"<p>I opened Asp.Net Mvc 4 Internet App. template. And I set connection string for my database like this:</p>\n\n<pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"DefaultConnection\" connectionString=\"Data Source=ALI-PC\\;Initial Catalog=OsosPlusDb;Persist Security Info=True;User ID=sa;Password=sa;\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I run project, click register button. I created a new user like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Gagaf.png\" alt=\"enter image description here\"></p>\n\n<p>When I click register to post I get this error:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Ju89m.png\" alt=\"enter image description here\"></p>\n\n<p>But it creates a new user in DB and it does not create membership_user (Membership table is not contain added user info):</p>\n\n<p><img src=\"http://i.stack.imgur.com/mp32Y.png\" alt=\"enter image description here\"></p>\n\n<p>I cant find What is the problem. Sometimes there is no error occured.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>And Exception Snapshot:</p>\n\n<p><img src=\"http://i.stack.imgur.com/CDsgG.png\" alt=\"enter image description here\"></p>\n\n<p>AcoountModel:</p>\n\n<pre><code>public class UsersContext : DbContext\n{\n    public UsersContext()\n        : base(\"DefaultConnection\")\n    {\n    }\n\n    public DbSet&lt;UserProfile&gt; UserProfiles { get; set; }\n}\n\n[Table(\"UserProfile\")]\npublic class UserProfile\n{\n    [Key]\n    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]\n    public int UserId { get; set; }\n    public string UserName { get; set; }\n}\n</code></pre>\n\n<p><strong>InitializeSimpleMembershipAttribute.cs</strong></p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute\n{\n    private static SimpleMembershipInitializer _initializer;\n    private static object _initializerLock = new object();\n    private static bool _isInitialized;\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        // Ensure ASP.NET Simple Membership is initialized only once per app start\n        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);\n    }\n\n    private class SimpleMembershipInitializer\n    {\n        public SimpleMembershipInitializer()\n        {\n            Database.SetInitializer&lt;UsersContext&gt;(null);\n\n            try\n            {\n                using (var context = new UsersContext())\n                {\n                    if (!context.Database.Exists())\n                    {\n                        // Create the SimpleMembership database without Entity Framework migration schema\n                        ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();\n                    }\n                }\n\n                WebSecurity.InitializeDatabaseConnection(\"DefaultConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n            }\n            catch (Exception ex)\n            {\n                throw new InvalidOperationException(\"The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588\", ex);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>LAST EDIT AND SUMMARY</strong></p>\n\n<p>Problem is character (\"i\"). If I dont use \"i\" everything is okay. But When I use it I got that error. How Can I fix this problem.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","email","asynchronous"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13155033,"title":"Async method takes about same response time as sync method for System.Net.Mail.SmtpClient?","body":"<p>We're sending an email out when a particular MVC controller method is called. The code is as below. When benchmarking the AJAX response time inside a browser we see that the <code>client.SendAsync(mail, null)</code> and <code>client.Send(mail)</code> implementations BOTH take about the same time i.e. 1.8 seconds as compared to not sending the mail at all. </p>\n\n<pre><code>public ActionResult jsonPosted(int? id, SomeDataClass data)\n{   \n    ...\n\n    // NOTE: remode 'using' statement for Async calls\n    // else no email ever sees light\n    using (SmtpClient client = new SmtpClient())\n    {       \n        client.UseDefaultCredentials = false;\n        client.Credentials = new NetworkCredential(\"name@server.com\", \"password\");\n        client.Port = 587;\n        client.Host = \"smtp.server.com\";\n        client.EnableSsl = true;\n\n        MailMessage mail = new MailMessage();\n        mail.From = new MailAddress(\"admin@server.com\");\n        mail.To.Add(\"sales@server.com\");\n        mail.Subject = \"Coming soon: user \" + newUser.Email + \" registered on list\";\n        mail.Body = \"Email address is : \" + newUser.Email + \"\\n\";\n        mail.Body += \"Date of signup is : \" + newUser.SignupTime.ToString();\n\n        try\n        {\n            // Both take about 1.9 seconds ?!?!\n            //client.SendAsync(mail, null);\n            client.Send(mail);\n        }\n        catch (SmtpException e)\n        {\n            // bad smtp, no mail for you\n        }\n    }\n    ...\n    return Json(dataIndependentOfEmail);\n}\n</code></pre>\n\n<p>Question:</p>\n\n<ol>\n<li>Why do the two methods take the same time? Async should return immediately while Sync should block for the entire processing time, right? As I understand Async consumes another thread and THAT thread blocks during work. However at least the user on the 1st thread should see a performance boost.</li>\n<li>How does one properly use <code>using</code> to dispose off classes like <code>SmtpClient</code> and <code>MailMessage</code> in async mode?</li>\n</ol>\n"},{"tags":["asp.net-mvc","wurfl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13154571,"title":"Force wurlf to load normal layout instead of mobile","body":"<p>On an asp.net mvc 4 website, some pages have also a mobile view, for example Index.cshtml and Index.mobile.cshtml. Also two layouts: _Layout.cshtml and _Layout.Mobile.cshtml.</p>\n\n<p>I am using Wurlf to differentiate from mobile and desktop using the capability \"is_wireless_device\". Now on mobile access, always the mobile layout is loaded. But on some pages I want to load the default content ( I mean the normal layout, _Layout.cshtml ) instead of trying to load the mobile layout, even on mobile devices. How can I achieve this ? </p>\n\n<p>In Global.asax I have now:</p>\n\n<pre><code>        LoadWurflData(Context.Cache);\n\n        DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode(\"mobile\")\n        {\n            ContextCondition = (context =&gt;\n            {\n                var manager = (context.Cache[WurflManagerCacheKey] as IWURFLManager);\n                if (manager == null)\n                {\n                    manager = CreateWurflManager(context.Cache);\n                }\n                if (manager == null || context == null || context.Request == null)\n                {\n                    return false;\n                }\n                var cabablities = manager.GetDeviceForRequest(context.Request.UserAgent);\n                return cabablities.GetCapability(\"is_wireless_device\") == \"true\";\n            }\n            )\n        });\n    public static void LoadWurflData(System.Web.Caching.Cache cache)\n    {\n        var configurer = new ApplicationConfigurer();\n        var manager = WURFLManagerBuilder.Build(configurer);\n        cache[WurflManagerCacheKey] = manager;\n    }\n\n    public static IWURFLManager CreateWurflManager(System.Web.Caching.Cache cache)\n    {\n        var configurer = new ApplicationConfigurer();\n        var manager = WURFLManagerBuilder.Build(configurer);\n        cache[WurflManagerCacheKey] = manager;\n\n        return manager;\n    }\n</code></pre>\n\n<p>Thanks a lot.</p>\n"},{"tags":["jquery",".net","asp.net-mvc","knockout.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13154329,"title":"Binding Image src as Expression in Knockout","body":"<p>Please bear with me, if you find this question so stupid. I am a beginner to knockout and trying to learn it.</p>\n\n<p>I want to bind image source to an expression. The expression is responsible to generate a path and that path must be applied as the Source to the img.</p>\n\n<pre><code>&lt;ul id='AllPatient' data-role='listview' data-inset='true' data-bind=\"foreach:Patients\"&gt;\n            @*&lt;li&gt;&lt;span data-bind=\"text: ko.toJSON($data)\"&gt;&lt;/span&gt;&lt;/li&gt;*@\n            &lt;li&gt;\n                &lt;table class=\"Tabular\"&gt;\n                    &lt;tr&gt;\n                        &lt;td class=\"DataCell\"&gt;\n                            &lt;a href=\"javascript:\" id=\"pLocation\" sortorder=\"none\"&gt;&lt;span data-bind=\"text:$data.UnitName\"&gt;\n                            &lt;/span&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                        &lt;td class=\"DataCellImage\"&gt;\n                            &lt;a href=\"javascript:\" id=\"addPatient\" sortorder=\"none\" data-bind=\"click:$root.addPatient\"&gt;\n                                &lt;img data-bind=\"attr:{src: $root.ImageSource}\" src=\"~/Content/Images/MPL/PersonAdd.png\" /&gt;&lt;/a&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n</code></pre>\n\n<p>I am using following databinding ViewModel:</p>\n\n<pre><code>function PatientsModel(data)\n{\n    var self = this;\n\n    self.Patients = ko.observableArray([]);\n\n    self.Patients(data.Patients);\n    self.ImageSource = function (model)\n    {\n        if (model.myPatient == true)\n        {\n            return PyxisLinkJS.RootURL + '/Content/Images/MPL/MyPatientGray.png';\n        }\n        else if (model.localPatient == true)\n        {\n            return PyxisLinkJS.RootURL + '/Content/Images/MPL/PersonAdd.png';\n        }\n        else\n        {\n            return PyxisLinkJS.RootURL + '/Content/Images/MPL/MyPatientGray.png';\n        }\n    }\n}\n</code></pre>\n\n<p>This is what happening: It is trying to set function body of ImageSource as the src for the Image. Where as I want to trigger the method ImageSource and set the return value as the Src of the Image.</p>\n\n<p>Regards,\nSumeet</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","datetime"],"answer_count":5,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":11250,"score":8,"question_id":7124434,"title":"Display only date and no time. C#","body":"<p>In MVC razor, I am putting current date in the database like this..</p>\n\n<pre><code>   model.Returndate = DateTime.Now.Date.ToShortDateString();\n</code></pre>\n\n<p>Since the database field is a datetime datatype and I am converting the current date to string format, this is not working.. how can I do this? I am doing the string format because I want the date in mm/dd/yyyy format and not in mm/dd/yyyy hh:mm:ss time format..</p>\n\n<p>EDIT:</p>\n\n<p>In the controller I have </p>\n\n<pre><code>        var model = new ViewModel();\n        model.ReturnDate = DateTime.Now;            \n        return PartialView(\"PartialView\", model);  \n</code></pre>\n\n<p>In the partialview, I have </p>\n\n<pre><code>   @Html.EditorFor(model =&gt; model.Returndate)\n</code></pre>\n\n<p>This is where its displaying the date as Date and Time together... I want just the date to be displayed. Not the time. I hope this edit explains better.</p>\n"},{"tags":["asp.net","asp.net-mvc","login","web-config","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13153857,"title":"Multiple applications with membership and same applicationName","body":"<p>My problem is the same that:\n<a href=\"http://stackoverflow.com/questions/2454623/multiple-applications-using-same-login-database-logging-each-other-out\">Multiple applications using same login database logging each other out</a></p>\n\n<blockquote>\n  <p>I've set up two ASP.NET applications on a machine, their web.config\n  files contain the same applicationName value in\n  AspNetSqlMembershipProvider item so they share users and roles.</p>\n  \n  <p>The problem sequence is:</p>\n  \n  <p>user logs into application A, opens new tab in a browser logs into\n  application B, his login in application A is signed out and vice\n  versa.</p>\n  \n  <p>Should I use a different approach to sharing login information between\n  two applications?</p>\n</blockquote>\n\n<p>The problem is that the solution, only avoid signed out beetween applications, but the applications do not share users logins.\nI want that.</p>\n\n<ul>\n<li>User logs into application A</li>\n<li>He opens new tab and goes to application B --> User is logged into application B because he was logged in A.</li>\n<li>And vice versa</li>\n</ul>\n\n<p>How can i make this?</p>\n"},{"tags":["javascript","asp.net-mvc","jquery-ajax","razor","submit"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13126092,"title":"ASP.NET MVC Submit form calls a javascript function of another submit form","body":"<p>big problem here! I know the title is kinda fuzzy, but it's all day long I've got this problem and cannot figure out how to solve it.\nI'll try to be the more specific in the less messy way.\nLong story short, I have a Controller (LeadController) with a method (Search) for a search:</p>\n\n<pre><code> public ActionResult Search(string prov = null, string city = null)\n    {\n        //if no field is compiled, return an empty view\n        if (String.IsNullOrWhiteSpace(prov) &amp;&amp; String.IsNullOrWhiteSpace(city))\n            return View();\n\n        var leads = from l in db.Leads\n                    select l;\n\n        if (!String.IsNullOrWhiteSpace(prov))\n        {\n            leads = leads.Where(l =&gt; l.Prov == prov).OrderBy(l =&gt; l.RagioneSoc);\n        }\n\n        if (!String.IsNullOrWhiteSpace(city))\n        {\n            leads = leads.Where(l =&gt; l.Comune == city).OrderBy(l =&gt; l.RagioneSoc);\n        }\n\n        return View(leads);\n    }\n</code></pre>\n\n<p>Then I have the Search View (displaying the fields to fill for the search AND the result after the post action) with 2 submit forms: the first one to execute the search</p>\n\n<pre><code>@using (Html.BeginForm()){\nSigla Provincia: @Html.TextBox(\"prov\", null, new { @style = \"width: 50px;\"})\nCitt: @Html.TextBox(\"city\", null, new { @style = \"width: 150px;\" })\n&lt;input type=\"submit\" value=\"Ricerca\" data-icon=\"search\" data-role=\"button\" data-mini=\"true\" data-inline=\"true\" /&gt;}\n</code></pre>\n\n<p>and the 2nd one to generate a document from the leads result of the search action</p>\n\n<pre><code>&lt;input type=\"submit\" title=\"create doc\" value=\"Create document\" onclick=\"javascript:postData()\" id=\"doc\" /&gt;\n</code></pre>\n\n<p>This last submit should call a javascript function to encode the model:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\nfunction postData() {\n    var urlact = '@Url.Action(\"createDoc\")';\n    var model = '@Html.Raw(Json.Encode(Model))';\n\n    $.ajax({\n        ...\n        ...\n    });\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Now, the problem is: when I call the first submit, the one which should execute the research, it performs the research but it also keeps going on, calling the <em>postData()</em> javascript function (even if I never \"tell\" him to do that). And the site stop working in <strong>var model = @Html.Raw(Json.Encode(Model))';</strong>, with an InvalidOperationException.</p>\n\n<p>If someone understood my question, is there a way to avoid this behaviour and to force the 1st submit only to pass the controller the parameters to execute the search action?</p>\n\n<p>Hope someone can help me,\nthank you in advance for your consideration!</p>\n\n<hr>\n\n<p>SOLVED</p>\n\n<p>Well, the problem is gone. Apparently, I didn't know so well the View &amp; Javascript behaviour. Long story shirt, it seems the View, loading itself, enters the js function in order to kind of cache the Model encoding, but it doesn't fully runs the function! And I had a problem within the interested Model.\nI don't know if I explained myself, but the warning is: be careful for your Model consistency before doing anything else.\nThanks to anyone who helped me, before I realized I get it totally wrong!</p>\n"},{"tags":["asp.net-mvc","phonegap","jquery-mobile","mobile-website"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":13147404,"title":"Converting a regular MVC site for use in phonegap","body":"<p>I have a site that's done using ASP.NET MVC and jQuery. Is it possible to modify my existing project without too much of rework so that it can be used in phonegap to create iphone/android apps? </p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13144850,"title":"asp.net mvc inject js code into Razor","body":"<p>How I can do it?</p>\n\n<pre><code>$for (var i = 0; i &lt; model.CategoryList.length; i++) {\n   var text = model.CategoryList;\n   categories += '&lt;span class=\"label label-info\"&gt;' + @((AgesCategory)int.Parse( ..... )).GetDescription() + '&lt;/span&gt;';\n }\n</code></pre>\n\n<p>I need replace <strong>int.Parse( ..... ))</strong> to <strong>int.Parse(model.CategoryList[i])</strong> from JS code. I can't add <strong>text</strong> variable into <strong>int.Parse( ... )</strong> intellisense detected this code like c# code, not JS.</p>\n\n<p><strong>update:</strong> </p>\n\n<p>I'll try reformulate my question: How I can set value C# variable from JS variable?</p>\n\n<pre><code>&lt;script&gt;\n    var temp1 = 1;   // js var\n    @{ string temp2 = 0 ;}  // c# var\n    @{ temp2 = temp1 } // how do it?\n    var temp2 = @(((MyEnumType)int.Parse(temp2).GetEnumDescription()));  //js var\n&lt;/script&gt;\n</code></pre>\n\n<p>what need use? '@:' or something else? In all case I get syntax error</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13153322,"title":"Changing LinqDataSource with Button clcik","body":"<p>I have a GridView on my asp page. I want to change the LinqDataSource with a button click. it's because i have 2 database views and you have to be able to see one of these to views as you wish. My problems is nothing happens when i try to bind the GridView to any of my LinqDataSource'.</p>\n\n<p>My C# code:</p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n    this.Grid.DataSource = lqds_Grid1;\n    this.Grid.DataBind();\n}\n\nprotected void Button1_Click(object sender, EventArgs e)\n{\n    if (this.Grid.DataSource == lqds_Grid1)\n    {\n        this.Grid.DataSource = lqds_Grid2;\n        this.Grid.DataBind();\n    }\n    else\n    {\n        this.Grid.DataSource = lqds_Grid1;\n        this.Grid.DataBind();\n    }\n}\n</code></pre>\n\n<p>my asp code:</p>\n\n<pre><code>&lt;%@ Page Title=\"Home Page\" Language=\"C#\" MasterPageFile=\"~/Site.master\" AutoEventWireup=\"true\"\n    CodeBehind=\"Default.aspx.cs\" Inherits=\"AddressReporting._Default\" %&gt;\n\n&lt;asp:Content ID=\"HeaderContent\" runat=\"server\" ContentPlaceHolderID=\"HeadContent\"&gt;\n&lt;/asp:Content&gt;\n&lt;asp:Content ID=\"BodyContent\" runat=\"server\" ContentPlaceHolderID=\"MainContent\"&gt;\n    &lt;asp:LinqDataSource ID=\"lqds_Grid1\" runat=\"server\" \n        ContextTypeName=\"AddressReporting.MobileGateway\" EntityTypeName=\"\" \n        OrderBy=\"AdrID, Country\" TableName=\"BarcodeWithLocation\"&gt;\n    &lt;/asp:LinqDataSource&gt;\n    &lt;asp:LinqDataSource ID=\"lqds_Grid2\" runat=\"server\" \n        ContextTypeName=\"AddressReporting.MobileGateway\" EntityTypeName=\"\" \n        OrderBy=\"AdrID, Country\" TableName=\"BarcodeWithLocationSorted\"&gt;\n    &lt;/asp:LinqDataSource&gt;\n    &lt;asp:GridView ID=\"Grid\" runat=\"server\" AllowPaging=\"True\" \n        AutoGenerateColumns=\"False\" Height=\"217px\" Width=\"268px\"&gt;\n&lt;/asp:GridView&gt;\n    &lt;asp:Button ID=\"Button1\" runat=\"server\" onclick=\"Button1_Click\" Text=\"Button\" /&gt;\n&lt;/asp:Content&gt;\n</code></pre>\n\n<p>Can anyone tell me what i am doing wrong ?</p>\n"},{"tags":["sql-server","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13146288,"title":"Month and Year Part from GetDate","body":"<p>I am using a gridview in my asp.net application in which i want to limit the dataset to requests that are submitted in the current month and year</p>\n\n<p>Iam new to application development and thinking in the below way</p>\n\n<p>to get the month and year part from the getdate() function and then compare it with the month and year of the receiveddate column in our table in the where condition</p>\n\n<p>My select statement would be like below</p>\n\n<p>select requestno,receiveddate,businessneed from customerrequests\nwhere receiveddate = getdate()</p>\n\n<p>in the above sql statement how do i acheive </p>\n"},{"tags":["c#","asp.net-mvc","linq-to-entities"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13141603,"title":"dropdownlist value","body":"<p>I have the following code populate for dropdownlist. Is there any way i can add an item called \"Select Value\" in the following     </p>\n\n<pre><code>private void PopulateCustStatus()\n{\n     ViewData[\"custStatus\"] = new HEntities().COptions\n         .Select(e =&gt; new ConfOptModel\n             {\n                 OptID = e.OptID,\n                 OptName = e.OptName,\n                 ConfigTypeID = e.ConfigTypeID\n             })\n         .Where(e =&gt; e.ConfigTypeID == 2)\n         .OrderBy(e =&gt; e.OpName);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","report","charts"],"answer_count":5,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1966,"score":8,"question_id":2804134,"title":"Is there a free chart report tool on ASP.NET MVC?","body":"<p>Can anyone recommend a free tool for generating Charts compatible with ASP.NET MVC?</p>\n"},{"tags":["asp.net-mvc","twitter-bootstrap","shopify","kentico","stripe-payments"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13144833,"title":"Include Shopify & Stripe within an ASP.NET MVC web app","body":"<p>Are there any clear, step by step tutorials explaining how to include my shopify store that is already using Stripe into an MVC application for an ecommerce site using Kentico CMS?  </p>\n\n<p>Is it as simple as using JSON to call the Shopify API?  I know you need to use liquid within the views, but can this be combined with Razor?  I be using Kentico CMS which I hear is now workable with MVC, but very buggy (maybe this is fixed int he newer version??). Also - I am a huge fan of Twitter bootstrap's scaffolding and plugins as well as .less files.  I've used it within mvc applications, and I'm assuming it would work within kentico and/or liquid , but was just wondering if anybody had tried using twitter bootstrap within a liquid page or integrated with Kentico.  I'm assuming it would play nicely with kentico since it's just css and scripts.</p>\n\n<p>Basically, my issues are</p>\n\n<ul>\n<li>Is Kentico CMS a suitable CMS to use with .NET MVC?  If not, what about N2, or other CMS for .net?</li>\n<li>Can liquid code be used alongside razor code?</li>\n<li>How difficult is it to use or integrate a shopify page in a .net mvc view?</li>\n<li>Has anybody had experience using Twitter Bootstrap within a liquid page or within Kentico?</li>\n</ul>\n\n<p>I can find bits and pieces of this information, but I was just hoping that somebody out there had documented this already.  Any links or tips would be appreciated. Thanks!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13151187,"title":"ValidationMessage is showing on initial GET method","body":"<p>I am working on an MVC 4 project that is constantly showing the ValidationMessage even on a simple GET method that does no validation or model binding of complex types:</p>\n\n<pre><code>//location/{locationId}/announcement\n[HttpGet]\npublic ActionResult LocationMakeAnnouncement(int locationId)\n{\n    var pageViewModel = this.BuildLocationMakeAnnouncementViewModel(locationId);\n    return View(pageViewModel);\n}\n</code></pre>\n\n<p>The <code>BuildLocationMakeAnnouncementViewModel</code> only builds up the ViewModel and doesn't touch the ModelState.</p>\n\n<p>Then on the view I have:</p>\n\n<pre><code>&lt;span class=\"errorArea\"&gt;@Html.ValidationMessage(\"ProductText\", \" \", new { @class = \"inputErrorIcon\" })&lt;/span&gt;\n</code></pre>\n\n<p>Which emits:</p>\n\n<pre><code>&lt;span class=\"errorArea\"&gt;&lt;span class=\"field-validation-valid inputErrorIcon\" data-valmsg-for=\"ProductText\" data-valmsg-replace=\"false\"&gt; &lt;/span&gt;&lt;/span&gt;\n</code></pre>\n\n<p>Outputting the ModelState shows that it does not have any errors</p>\n\n<pre><code>@ViewData.ModelState.Values.Any(x =&gt; x.Errors.Count &gt;= 1)\n</code></pre>\n\n<p>Why would ValidatioMessage output the  when there are no errors?</p>\n\n<p>ANY suggestions?</p>\n"},{"tags":["asp.net-mvc","ajax","asp.net-mvc-2","internet-explorer-8","innerhtml"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":551,"score":4,"question_id":3324474,"title":"asp.net mvc - MicrosoftMvcAjax.js throws javascript error when updating table elements in IE8","body":"<p>In IE8 or anything older, innerHTML is not supported on certain elements like TR &amp; TD. Unfortunately, the MicrosoftMvcAjax.js file included in the MVC 2 project uses innerHTML for the Ajax update method within the Ajax.BeginForm or Ajax.ActionLink.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13151359,"title":"How to check Unique attribute in mvc 3?","body":"<p>I have a textbox for username in a form, when user enter the username, i need to check if that username is already in data base. I'm thinking to catch the blur event of the text box &amp; to write a javascript function to query &amp; check in database. I'm trying some thing like this:</p>\n\n<pre><code>@html.textboxfor(x=&gt;x.UserName, new{@id=\"UserName\"})\n\n&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function(){$('#UserName').blur(\"then some code here\");})\n\n&lt;/script&gt;\n</code></pre>\n\n<p>Now I need to know if I'm following the right way? If so then please let me know how can I call a action method which will interact with the database within the blur function or whats the right way? Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","asp.net-membership"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13093839,"title":"Add/pass new field to MVC Membership CreateUser","body":"<p>Developing MVC4 app and using Register that comes with MVC5 framework.\nI did update register.cshtml and add a new column called language\nI also did update RegisterModel class to hold my value.\nRegister model has all the values including my property(language).</p>\n\n<p>Now I like to grab this values from Register Model and plug into CreateUser</p>\n\n<p>MyProperty is model.Language</p>\n\n<p>publc ActonResults Regster(RegisterModel model)\nMembership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, Guid.NewGuid(), out status)</p>\n\n<p>What would be the best way to grab this value and store in database.\nWhere can I store. I really like to store in Users Table where UserID and UserName exists  </p>\n"},{"tags":["javascript","asp.net-mvc","mobile-safari"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2874,"score":0,"question_id":4444473,"title":"$(window).height() not working in iPad fullscreen web app","body":"<p>I'm working on a web application that is nicely displayed in mobile Safari for iPad. </p>\n\n<p>It eventually plays well when a shortcut is saved to the springboard, having put together the right metatags for displaying a springboard icon, splash screen and so on.</p>\n\n<p>Unfortunately the app uses <code>$(window).width()</code> and <code>$(window).height()</code> and often (not always, and no, I cannot say when, I'm going crazy about that) the <code>$(window).height()</code> invocation returns 0. </p>\n\n<p>I have to know the size for setting images width and height dynamically according to the viewport size and orientation. The application also use jQuery-ui and jQGrid and, when the height evaluates to 0, they both break. </p>\n\n<p>The jq-ui dialogs displayed on top of the screen instead of in the middle, and the tables are not displaying correctly either.</p>\n"},{"tags":["javascript","jquery","ajax","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":13150096,"title":"Using Javascript Ajax call to call MVC action to download object","body":"<p>Ive created a simple MVC controller action that creates a simple ics (calendar) item and sends it back through the controller action. As follows:</p>\n\n<pre><code>    public object GenerateICS(int myID)\n    {\n        iCalendar iCal = new iCalendar();            \n         Event evt = iCal.Create&lt;Event&gt;();\n        Uri eventLink = new Uri(\"http://localhost:\");\n        evt.IsAllDay = false;\n\n       evt.Start = new iCalDateTime(DateTime.Now);\n       evt.End = new iCalDateTime(DateTime.Now.AddDays(3));\n\n       evt.Summary = \"MySummary\";\n       evt.Url = eventLink;\n       evt.Description = \"You know it\";         \n\n      Response.ContentType = \"text/v-calendar\";\n      Response.AddHeader(\"content-disposition\", \"attachment; filename=\" + \"Event\" + \".ics\");\n      iCalendarSerializer serializer = new iCalendarSerializer(iCal);\n      string result = serializer.SerializeToString(iCal);\n      Response.Write(result);          \n        return Response;\n    }\n</code></pre>\n\n<p>So with the website running, if I go to:</p>\n\n<pre><code>http://localhost:21312/GenerateICS?myID=1 \n</code></pre>\n\n<p>This will generate the ics file server side and pass it back to the client, so your receive a \"Do you want to open blah.ics from localhost?\". This is perfectly what I want.</p>\n\n<p>My issue is how do I achieve exactly the same by executing it from javascript. I have the following ajax call:</p>\n\n<pre><code> $.ajax({\n                url: \"app/GenerateICS\",\n                data: { myID: 1 },\n                success: function (data) {\n                    //call is successfully completed and we got result in data\n                    alert(data);\n                },\n                error: function (xhr, ajaxOptions, thrownError) {\n                    //some errror, some show err msg to user and log the error  \n                    alert(xhr.responseText);\n\n                }\n            });\n</code></pre>\n\n<p>This executes the mvc controller perfectly. But it returns the ics response to the success function. How do I call the controller with ajax but have it so the file is downloaded as I describe how it does when you manually do it?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","security","authorization"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":198,"score":2,"question_id":8222258,"title":"How do you restrict certain HTML elements to certain roles using ASP.NET MVC?","body":"<p>I'm looking for the standard practice in specifying that a certain HTML element, like a \"Create user\" button should only be displayed when the user is logged-in and belongs to the role \"Administrator.\"</p>\n\n<p>For example, using Spring MVC in Java, the Spring Security tag library has a control that does just that:</p>\n\n<pre><code>&lt;sec:authorize access=\"hasRole('ROLE_PRESIDENT')\"&gt;\n    &lt;input type=\"button\" value=\"Launch nuclear weapons\"/&gt;\n&lt;/sec:authorize&gt;\n</code></pre>\n\n<p>Whatever appears between the tags will only display when the user belongs to the role specified.</p>\n\n<p>Does ASP.NET MVC have such feature?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","iis","http-headers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":8230001,"title":"How to change headers for specific types of files served in ISS / MVC","body":"<p>I am implementing a fix for the problem caused by 02 compression issues over 3G.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3282373/web-site-exhibits-javascript-error-on-ipad-iphone-under-3g-but-not-under-wifi\">Web site exhibits JavaScript error on iPad / iPhone under 3G but not under WiFi</a></p>\n\n<p>The best solution seems to be <a href=\"http://stuartroebuck.blogspot.com/2010/08/official-way-to-bypassing-data.html\" rel=\"nofollow\">http://stuartroebuck.blogspot.com/2010/08/official-way-to-bypassing-data.html</a> which is basically to add the header <code>Cache-Control: no-transform</code> in ISS, however I would like to apply this only to specific file types. What is the easiest way to do this? </p>\n"},{"tags":["asp.net-mvc","user-interface","razor","kendo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":163,"score":-1,"question_id":13116084,"title":"Kendo UI Hierarchial Grid using MVC Razor","body":"<p>I have a parent grid \"Grid1\" which has a child grid \"Grid2\" which has checkboxes as its first columns. In the child grid, there is a sub child \"Grid3\" which also has some checkboxes as its First column.So the functionality is to save the selected parent, with its child and its multiple selected sub-child by checking the checkboxes on the button click. </p>\n\n<p>Now I am facing the following problems:</p>\n\n<ol>\n<li><p>While saving the data I have to parse the HTML of the grid to read the selected records using jquery, the following is the code  for this  :</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n\n    $(\"#mysaveButton1\").live(\"click\", function () {\n    debugger;\n    var tr = $(this).siblings(0).find(\"table &gt; tbody &gt; tr.k-master-row\");\n    var selectedFeatureList = [];\n    var i = 0;\n    tr.each(function () {\n         debugger;\n        var isExpanded = false;\n        var roleId = tr[i].cells[6].innerHTML;\n        var roleFeatureId = tr[i].cells[5].innerHTML;\n        var className = tr[i].cells[0].children[0].className;\n        var selectedFeatureActionList = [];\n        if (className == \"k-icon k-plus\") {\n            isExpanded = false;\n        } else {\n            isExpanded = true;\n            //logic to fetch second child table\n            var secondGridtbodys = $(this).siblings(0).find(\"table &gt; tbody\")\n            var k = 0;\n            var secondGridRows = secondGridtbodys[i].rows;\n            var j = 0;\n            for (var j = 0 ; j &lt; secondGridRows.length; j++) {\n                 debugger;\n                var isFeatureMapped = secondGridRows[j].cells[0].children[0].status;\n                var isPreviouslyMapped = secondGridRows[j].cells[1].children[0].status;\n                if ((isPreviouslyMapped == true &amp;&amp; isFeatureMapped == false) || (isFeatureMapped == true)) {\n\n                    var selectedFeatureActionDetail = new Object();\n                    selectedFeatureActionDetail.isFeatureActionMapped = secondGridRows[j].cells[0].children[0].status;\n                    selectedFeatureActionDetail.isPreviouslyMapped = secondGridRows[j].cells[1].children[0].status;\n                    selectedFeatureActionDetail.FeatureActionID = secondGridRows[j].cells[2].innerHTML;\n                    selectedFeatureActionDetail.FeatureID = secondGridRows[j].cells[3].innerHTML;\n                    selectedFeatureActionDetail.RoleFeatureId = secondGridRows[j].cells[5].innerHTML;\n                    selectedFeatureActionDetail.RoleId = roleId;\n                    selectedFeatureActionDetail.ActionName = secondGridRows[j].cells[4].innerHTML;\n                    selectedFeatureActionList.push(selectedFeatureActionDetail);\n                }\n            }\n        }\n        var firstLevLCheckbox = tr[i].cells[1].children[0].status;\n        if (roleFeatureId != 0) {\n            var selectedFeatureDetail = new Object();\n            selectedFeatureDetail.CanAccess = firstLevLCheckbox;\n            selectedFeatureDetail.RoleId = roleId;\n            selectedFeatureDetail.FeatureId = tr[i].cells[2].innerHTML;\n            selectedFeatureDetail.RoleFeatureId = roleFeatureId;\n            selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n            selectedFeatureList.push(selectedFeatureDetail);\n        }\n        else {\n            if (firstLevLCheckbox == true) {\n                var selectedFeatureDetail = new Object();\n                selectedFeatureDetail.CanAccess = firstLevLCheckbox;\n                selectedFeatureDetail.RoleId = roleId;\n                selectedFeatureDetail.FeatureId = tr[i].cells[2].innerHTML;\n                selectedFeatureDetail.RoleFeatureId = 0;\n                selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n                selectedFeatureList.push(selectedFeatureDetail);\n            }\n        }\n        i++;\n    });\n    var MapFeaturesToRole = JSON.stringify(selectedFeatureList);\n    var data = { SelectedFeatureList: MapFeaturesToRole };\n    var Urlaction = '@Url.Action(\"SaveFeatureMapping\", \"Security\")';\n    $.post(Urlaction, data, function (rsp) { window.location = \"/security/managefeatures\"; });\n});\n</code></pre>\n\n<p></p>\n\n<p>I found one more way of reading the selected records .i.e. by reading the the datasource of the parent grid, then finding if the grid has any child, then reading the datasource child and then its sub-child.\nThe code is as follows :</p>\n\n\n\n<pre><code>$(\"#mysaveButton\").live(\"click\", function () {\n    debugger;\n    var selectedFeatureList = [];\n    var roleGrid = $('#Grid').data().kendoGrid;\n    var dataRows = roleGrid._data;\n    for (var i = 0; i &lt; dataRows.length ; i++) {\n        var roleId = dataRows[i].RoleId;\n        try {\n            var featureGrid = $('#' + roleId).data().kendoGrid;\n\n            var featureGridRows = featureGrid._data;\n\n            for (var j = 0; j &lt; featureGridRows.length ; j++) {\n                var featureId = featureGridRows[j].FeatureID;\n                var roleFeatureId = featureGridRows[j].RoleFeatureId;\n                var firstLevelCheckbox = featureGridRows[j].isMappedFeatureChecked;\n\n                try {\n                    var featureActionGrid = $('#' + featureId).data().kendoGrid;\n                    var featureActionGridRows = featureActionGrid._data;\n                    selectedFeatureActionList = [];\n                    for (var k = 0; k &lt; featureActionGridRows.length; k++) {\n                        var isFeatureMapped = featureActionGridRows[k].isFeatureActionMapped;\n                        var isPreviouslyMapped = featureActionGridRows[k].isPreviouslyMapped;\n                        if ((isPreviouslyMapped == true &amp;&amp; isFeatureMapped == false) || (isFeatureMapped == true)) {\n\n                            var selectedFeatureActionDetail = new Object();\n                            selectedFeatureActionDetail.isFeatureActionMapped = isFeatureMapped;\n                            selectedFeatureActionDetail.isPreviouslyMapped = isPreviouslyMapped;\n                            selectedFeatureActionDetail.FeatureActionID = featureActionGridRows[k].FeatureActionID;\n                            selectedFeatureActionDetail.FeatureID = featureActionGridRows[k].FeatureID;\n                            selectedFeatureActionDetail.RoleFeatureId = featureActionGridRows[k].RoleFeatureId;\n                            selectedFeatureActionDetail.RoleId = roleId;\n                            selectedFeatureActionDetail.ActionName = featureActionGridRows[k].ActionName;\n                            selectedFeatureActionList.push(selectedFeatureActionDetail);\n                        }\n                    }\n                }\n                catch (err) {\n                    selectedFeatureActionList = [];\n                }\n                if (roleFeatureId != 0) {\n                    var selectedFeatureDetail = new Object();\n                    selectedFeatureDetail.CanAccess = firstLevelCheckbox;\n                    selectedFeatureDetail.RoleId = roleId;\n                    selectedFeatureDetail.FeatureId = featureId;\n                    selectedFeatureDetail.RoleFeatureId = roleFeatureId;\n                    selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n                    selectedFeatureList.push(selectedFeatureDetail);\n                }\n                else {\n                    if (firstLevelCheckbox == true) {\n                        var selectedFeatureDetail = new Object();\n                        selectedFeatureDetail.CanAccess = firstLevelCheckbox;\n                        selectedFeatureDetail.RoleId = roleId;\n                        selectedFeatureDetail.FeatureId = featureId;\n                        selectedFeatureDetail.RoleFeatureId = 0;\n                        selectedFeatureDetail.FeatureActions = selectedFeatureActionList;\n                        selectedFeatureList.push(selectedFeatureDetail);\n                    }\n                }\n            }\n        }\n        catch (err) {\n            continue;\n        }\n\n    }\n    debugger;\n    var MapFeaturesToRole = JSON.stringify(selectedFeatureList);\n    var data = { SelectedFeatureList: MapFeaturesToRole };\n    var Urlaction = '@Url.Action(\"SaveFeatureMapping\", \"Security\")';\n    $.post(Urlaction, data, function (rsp) { window.location = \"/security/managefeatures\"; });\n});\n</code></pre>\n\n\n\n<p>Is there any other way to find selected records on save click for Kendo UI Grid?</p></li>\n<li><p>When a checkbox is selected in the second inner grid i.e. Grid2, I want that if there is no record selected in sub child grid i.e. Grid3, I check the checkboxes of all the records present in the Grid3 automatically. I was not able to do it in Kendo UI grid.</p></li>\n<li><p>When a checkbox is selected in the second inner grid i.e. Grid2, and some records are selected in its child Grid3, and then another record is selected(checkbox checked) from second inner grid i.e. Grid2 then the first record selected collapses and the checkboxes checked from its child Grid3 gets unchecked on collapse and again expand i.e it refreshes the grid3.\nThis problem is not faced when we use the first approach mentioned above of reading the Grid selected data i.e. reading by HTML, but if second approach is used i.e. reading the Grid datasource, the problem remains.</p></li>\n</ol>\n\n<p>The code written on the click of checkboxes present in the child and its sub child grid is as follows:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $('#Grid').on('click', '.firstlevelchkbx', function () {\n        var checkboxval = $(this).is(':checked');\n        var gridId = $(this).closest('div')[0].id;\n        var grid = $('#' + gridId).data().kendoGrid;\n        var dataItem = grid.dataItem($(this).closest('tr'));\n        dataItem.set('isMappedFeatureChecked', checkboxval);\n        //return false;\n    });\n    $('#Grid').on('click', '.secondlevelchkbx', function () {\n        //debugger;\n        var checkboxval = $(this).is(':checked');\n        var gridId = $(this).closest('div')[0].id;\n        var grid = $('#' + gridId).data().kendoGrid;\n        var dataItem = grid.dataItem($(this).closest('tr'));\n        dataItem.set('isFeatureActionMapped', checkboxval);\n        //return false;\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>It is important to write this code for the second approach (reading grid\"s datasource) only, For the first approach(reading HTML) it is not written.\nPlease suggest how to resolve the last two issues and which approach is better out of the two. Is there any other approach apart from these?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13149851,"title":"Could not load file or assembly 'Microsoft.Web.Infrastructure,","body":"<p>I try to upload mt web site to server.It was working fine with my local host. So I Uploaded every thing in my local host wwwroot folder to sever and change the connection string.\nbut there is error and it says </p>\n\n<pre><code>Exception information: \n    Exception type: InvalidOperationException \n    Exception message: The pre-application start initialization method Start on type RouteDebug.PreApplicationStart threw an exception with the following error message: Could not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified..\n   at System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods)\n   at System.Web.Compilation.BuildManager.CallPreStartInitMethods()\n   at System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException)\n\nCould not load file or assembly 'Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.\n   at RouteDebug.PreApplicationStart.Start()\n</code></pre>\n\n<p>The project was nopcommerce.\nHow can I slove it??</p>\n"},{"tags":["asp.net-mvc","authentication","oauth","openid","servicestack"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13149666,"title":"How to do ServiceStack auth with MVC without EF","body":"<p>I'm working through the example <a href=\"https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/AccountController.cs\" rel=\"nofollow\"><code>AccountController</code></a> and trying to implement my own. I'm trying to do OAuth (via GMail) and so I've got it working all the way through <code>ExternalLoginCallback(string)</code>. The example does <code>OAuthWebSecurity.Login</code>. When I try to also do that, I get:</p>\n\n<pre><code>You must call the \"WebSecurity.InitializeDatabaseConnection\" method before you call any other method of the \"WebSecurity\" class.\n</code></pre>\n\n<p>After digging in, it appears that <code>InitializeDatabaseConnection</code> uses Entity Framework to configure a database on SQL Server. I'm not using SQL Server (Mongo DB), so I can't use this method. <strong>How do I use ServiceStack auth with MVC and no SQL Server?</strong></p>\n"},{"tags":["asp.net-mvc","mixed-mode"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3047,"score":6,"question_id":2432845,"title":"ASP.NET MVC and mixed mode authentication","body":"<p>I have a scenario whereby I require users to be able to authenticate against an ASP.NET MVC web application using either Windows authentication or Forms authentication. If the user is on the internal network they will use Windows authentication and if they are connecting externally they will use Forms authentication. Ive seen quite a few people asking the question how do I configure an ASP.NET MVC web application for this, but I havent found a complete explanation.</p>\n\n<p>Please can someone provide a detailed explanation, with code examples, on how this would be done?</p>\n\n<p>Thanks.</p>\n\n<p>Alan T</p>\n"},{"tags":["asp.net-mvc","asp.net-4.5","asp.net-optimization","bundling-and-minification"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13131381,"title":"ASP.NET 4.5 Bundling in Debug Mode - Stale Resources","body":"<p>Is there any way we can make the ASP.NET 4.5 Bundling functionality generate GUID's as part of the querystring when running in <strong>debug</strong> mode (e.g bundling turned OFF).</p>\n\n<p>The problem is when developing locally, the scripts/CSS files are generated like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"/Content/Scripts/myscript.js\" /&gt;\n</code></pre>\n\n<p>So if i change that file, i need to do a hard-refresh (sometimes a few times) to get the file to be picked up by the browser - annoying.</p>\n\n<p>Is there any way we can make it render out like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"/Content/Scripts/myscript.js?v=x\" /&gt;\n</code></pre>\n\n<p>Where <code>x</code> is a GUID (e.g always unique).</p>\n\n<p>Ideas?</p>\n\n<p>I'm on ASP.NET MVC 4.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","webforms-view-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13149196,"title":"Post HTML encoded Form data to server","body":"<p>I'm currently using MVC 3 (WebForm view engine) and have a form that shows user comments. </p>\n\n<p>If I have a comment which has an ampersand (&amp;), <code>&lt;%= Html.Textbox() %&gt;</code> will encode it as <code>&amp;amp;</code>. However, if the form is then posted to the server, ASP.NET kicks in thinking that the submitted content is malicious.</p>\n\n<p>I find myself having to use <a href=\"http://stackoverflow.com/a/9609450/84395\">HTML decoding methods using JavaScript</a> before the content is sent to the server.</p>\n\n<p>I am able to get the results that I want, but I feel like I'm not doing this right.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["c#","jquery","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":13148577,"title":"ASP.NET MVC 3 NOT showing appropriate view, action called using jquery","body":"<p>I have a small problem.</p>\n\n<p>My action is :</p>\n\n<pre><code> public ViewResult SearchForRooms(int HotelDDL) \n    {\n\n        List&lt;Room&gt; roomsInHotel = bl.ReturnRoomsPerHotel(HotelDDL);\n\n        return View(roomsInHotel);\n    }\n</code></pre>\n\n<p>Here is the jquery that is calling the action:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n    $(document).ready(function () {\n        $(\"#HotelDDL\").change(function () {\n\n            var text = $(\"#HotelDDL option:selected\").text();\n            var value = $(\"#HotelDDL option:selected\").val();\n            alert(\"Selected text=\" + text + \" Selected value= \" + value);\n\n            $.post(\"/Home/SearchForRooms\",\n            {\n                HotelDDL: $(\"#HotelDDL option:selected\").val() \n            });\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>And finally, here is the View that should be called:</p>\n\n<pre><code>@model IEnumerable&lt;RoomReservation.Entities.Entities.Room&gt;\n\n@{\n    ViewBag.Title = \"Search\";\n}\n\n&lt;h2&gt;Result&lt;/h2&gt;\n\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            City\n        &lt;/th&gt;\n        &lt;th&gt;\n            Hotel\n        &lt;/th&gt;\n        &lt;th&gt;\n            Room label\n        &lt;/th&gt;\n        &lt;th&gt;\n            Number of beds\n        &lt;/th&gt;\n        &lt;th&gt;\n            Price per night\n        &lt;/th&gt;\n        &lt;th&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelitem=&gt;item.Hotel.City.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.Hotel.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.Name)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.NumberOfBeds)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.DisplayFor(modelItem =&gt; item.PricePerNight)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n&lt;/table&gt;\n</code></pre>\n\n<p>Everthing is working ok (databse return all rooms correctly) except final view rendering.\nI have tried Phil's tool but it doesn't give me any suspicious hints:</p>\n\n<pre><code>RouteDebug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes);\n</code></pre>\n\n<p>So, why is it not showing after jscript send it's post method to <code>SearchForRooms()</code>?\nThank you</p>\n\n<p>P.S. If you need any other piece of code please just say so.</p>\n"},{"tags":["css","asp.net-mvc","html-input"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13148479,"title":"Horizontal text input box VB HTML","body":"<p>I'm trying to get the 4 input fields to line up horizontally on my web page, but I can't seem to get it right.</p>\n\n<p>I've tried <code>display: inline</code> and <code>float: left</code> etc. but its still not working. </p>\n\n<p>I am using VB 2012 express MVC application. The HTML as follows:</p>\n\n<pre><code>&lt;div&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Account Information&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.UserName)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(m =&gt; m.UserName)\n            @Html.ValidationMessageFor(m =&gt; m.UserName)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.Email)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(m =&gt; m.Email)\n            @Html.ValidationMessageFor(m =&gt; m.Email)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.Password)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.PasswordFor(m =&gt; m.Password)\n            @Html.ValidationMessageFor(m =&gt; m.Password)\n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(m =&gt; m.ConfirmPassword)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.PasswordFor(m =&gt; m.ConfirmPassword)\n            @Html.ValidationMessageFor(m =&gt; m.ConfirmPassword)\n        &lt;/div&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Register\" /&gt;\n        &lt;/p&gt;\n</code></pre>\n\n<hr>\n\n<p>Thanks for any help</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvvm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13145951,"title":"How can I display the clicked products by user on a list in another view?","body":"<p>I am using MVC3 Viewmodel pattern with Entity Framework on my webbapplication.</p>\n\n<p>My Index View is list of products with image, price and description and etc.</p>\n\n<p>Products with the information I mentioned above is in div boxes with a button that says \"buy\".</p>\n\n<p><img src=\"http://i.stack.imgur.com/MEXgU.jpg\" alt=\"divbox\"></p>\n\n<p>I will be working with 2 views one that is the Index View that will display all the products and the other view that will display the products that got clicked by the buy button.</p>\n\n<p>What I am trying to achieve is when a user click on buy button the products should get stored in the other view that is cart view and be displayed.</p>\n\n<p>I have problems on how to begin the coding for that part.</p>\n\n<p>The index View with products is done and now its the buy button function left to do but I have no idea how to start.</p>\n\n<p>This is my IndexController:</p>\n\n<pre><code>private readonly HomeRepository repository = new HomeRepository();\n\npublic ActionResult Index()\n{\n    var Productlist = repository.GetAllProducts();\n\n    var model = new HomeIndexViewModel()\n    {\n        Productlist = new List&lt;ProductsViewModel&gt;()\n    };\n\n    foreach (var Product in Productlist)\n    {\n        FillProductToModel(model, Product);\n    }\n\n    return View(model);\n\n}\n\nprivate void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)\n{\n    var productViewModel = new ProductsViewModel\n    {\n\n        Description = productimage.Products.Description,\n        ProductId = productimage.Products.Id,\n        price = productimage.Products.Price,\n        Name = productimage.Products.Name,\n        Image = productimage.ImageUrl,\n    };\n    model.Productlist.Add(productViewModel);\n}\n</code></pre>\n\n<p>In my ActionResult Index I am using my repository to get the products and then I am binding the data from the products to my ViewModel so I can use the ViewModel inside my view. Thats how I am displaying all the products in my View. </p>\n\n<p>This is my Index View:</p>\n\n<pre><code>    @model Avan.ViewModels.HomeIndexViewModel\n\n         @foreach (var item in Model.Productlist)\n                    {\n                     &lt;div id=\"productholder@(item.ProductId)\" class=\"productholder\"&gt;  \n                     &lt;img src=\"@Html.DisplayFor(modelItem =&gt; item.Image)\" alt=\"\" /&gt;\n                     &lt;div class=\"productinfo\"&gt;\n                     &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.Name)&lt;/h2&gt; \n                     &lt;p&gt;@Html.DisplayFor(modelItem =&gt; item.Description)&lt;/p&gt;    \n                     @Html.Hidden(\"ProductId\", item.ProductId, new { @id = \"ProductId\" }) \n&lt;/div&gt;\n                     &lt;div class=\"productprice\"&gt;     \n                     &lt;h2&gt;@Html.DisplayFor(modelItem =&gt; item.price)&lt;/h2&gt;\n                     &lt;input type=\"button\" value=\"Ls mer\" class=\"button\" id=\"button@(item.ProductId)\"&gt;  \n                     @Html.ActionLink(\"x\", \"Cart\", new { id = item.ProductId })  // &lt;- temp its going to be a button                   \n                    &lt;/div&gt;                                   \n                    &lt;/div&gt;\n\n             }\n</code></pre>\n\n<p>Since I can get the product ID per product I can use the ID in my controller to get the data from the database. But I still I have no idea how I can do that so when somebody click on the buy button I store the ID where? and how do I use it so I can achieve what I want to do?</p>\n\n<p>Right now I have been trying to do following thing in my IndexController:</p>\n\n<pre><code>public ActionResult cart(int id)\n        {\n            var SelectedProducts = repository.GetProductByID(id);\n\n\n            return View();\n        }\n</code></pre>\n\n<p>What I did here is that I get the product by the id. So when someone press on the temp \"x\" Actionlink I will recieve the product. All I know is that something like that is needed to achieve what im trying to do but after that I have no idea what to do and in what kind of structure I should do it.</p>\n\n<p>Any kind of help is appreciated alot!</p>\n\n<p><strong>Short Scenario:</strong></p>\n\n<p>looking at the Index I see 5 products, I choose to buy 3 products so I click on three \"Buy\" buttons. Now I click on the \"Cart\" that is located on the nav menu. New View pops up and I see the three products that I clicked to buy.</p>\n"},{"tags":["asp.net","asp.net-mvc","razor"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13148707,"title":"Using the Razor View Engine with a custom templating framework","body":"<p>We have a custom templating framework used by our web applications with implementations which are written in a variety of languages, and I'm investigating whether its possible to use this in an ASP.NET MVC application using the Razor View engine. We already have an implementation that uses the Web Forms View engine, but I'm keen to be able to use Razor as well.</p>\n\n<p>The template is defined in a html file which contains macro tags that are interpreted and  replaced at runtime with the applicable html. Below is a highly simplified version of this file:-</p>\n\n<pre><code>[doctype]\n&lt;html&gt;\n  &lt;head&gt;\n    [HeadScript]\n    [HeadSectionText]\n  &lt;/head&gt;\n  &lt;body id=\"[if Home][Home][else]body[end if]\"&gt;\n    [form]\n      [Content]\n    [end form] \n    [EndBodyScript]\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>As you can see, there are opportunities to inject html into various sections of the  document, with some of this being handled by a simple conditional logic implementation. In order to use this with Razor, I'd need to be able to process all the macro tags in the template, including inserting the HTML from the Razor view being rendered, and use the output of this operation as the HTML to be ultimately sent to the client.</p>\n\n<p>I'm pretty green when it comes to MVC development, but I know I can create a custom ViewEngine and IView implementation. Perhaps I can use this to achieve what I want, with a custom engine using the RazorView class to render the actual content to be inserted into our template. Does this sound like a feasible solution? And if so, does anyone have any tips to get me started?</p>\n\n<p>Currently I have a kludgy solution where I use the ASP.NET WebForms engine and render partial Razor views, but longterm I'd prefer to have a solution that can take the WebForms engine out of the equation entirely.</p>\n\n<p>Any shoves in the right direction greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","asp.net-webforms"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":15,"score":0,"question_id":13140522,"title":"how can I implement the code web forms in mvc? also i want to take some html in this code","body":"<p>how can I implement the code web forms in mvc? also i want to take some html in this code\nthis is code</p>\n\n<pre><code>Response.ContentType = \"application/pdf\";\n            Response.AddHeader(\"content-disposition\", \"attachment;filename=TestPage.pdf\");\n            Response.Cache.SetCacheability(HttpCacheability.NoCache);\n            **StringWriter sw = new StringWriter();\n            HtmlTextWriter hw = new HtmlTextWriter(sw);\n            this.Page.RenderControl(hw);**\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":585,"score":0,"question_id":10789028,"title":"Could not load file or assembly 'MySite (from [Computername])' or one of its dependencies. (Exception from HRESULT: 0x80131040)","body":"<p><strong>Hi,</strong></p>\n\n<p>When running my ASP.NET MVC application (using VS mini IIS) I get the following exception after updating table in the EnityFrameworkModel:</p>\n\n<pre><code>Server Error in '/' Application.\n\nCould not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nAssembly Load Trace: The following information can be helpful to determine why the assembly 'myApp (from my-pc)' could not be loaded.\n\n\n=== Pre-bind state information ===\nLOG: User = my-PC\\my\nLOG: DisplayName = myApp (from my-pc)\n (Partial)\nWRN: Partial binding information was supplied for an assembly:\nWRN: Assembly Name: myApp (from my-pc) | Domain ID: 4\nWRN: A partial bind occurs when only part of the assembly display name is provided.\nWRN: This might result in the binder loading an incorrect assembly.\nWRN: It is recommended to provide a fully specified textual identity for the assembly,\nWRN: that consists of the simple name, version, culture, and public key token.\nWRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.\nLOG: Appbase = file:///C:/Users/my/Documents/Visual Studio 2010/Projects/myApp/myApp.Website/\nLOG: Initial PrivatePath = C:\\Users\\my\\Documents\\Visual Studio 2010\\Projects\\myApp\\myApp.Website\\bin\nCalling assembly : (Unknown).\n===\nLOG: This bind starts in default load context.\nLOG: Using application configuration file: C:\\Users\\my\\Documents\\Visual Studio 2010\\Projects\\myApp\\myApp.Website\\web.config\nLOG: Using host configuration file: \nLOG: Using machine configuration file from C:\\Windows\\Microsoft.NET\\Framework\\v4.0.30319\\config\\machine.config.\nLOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).\nLOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/9ac245ea/5244fde2/myApp (from my-pc).DLL.\nLOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/9ac245ea/5244fde2/myApp (from my-pc)/myApp (from my-pc).DLL.\nLOG: Attempting download of new URL file:///C:/Users/my/Documents/Visual Studio 2010/Projects/myApp/myApp.Website/bin/myApp (from my-pc).DLL.\nWRN: Comparing the assembly name resulted in the mismatch: NAME\nERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated.\n\nStack Trace: \n\n\n[FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0\n   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39\n   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132\n   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection) +144\n   System.Reflection.Assembly.Load(String assemblyString) +28\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46\n\n[ConfigurationErrorsException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618\n   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209\n   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130\n   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178\n   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94\n   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332\n   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677\n\n[HttpException (0x80004005): Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876\n   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97\n   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258\n\nVersion Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272\n</code></pre>\n\n<p>This is what I have tried : </p>\n\n<ul>\n<li>Clean solution</li>\n<li>Stopd the mini IIS and restart</li>\n<li>Restarted Windows</li>\n</ul>\n\n<p>But I do still gott this problem?</p>\n\n<p>Edit1: </p>\n\n<p>When re-running I now get this : </p>\n\n<pre><code>    Server Error in '/' Application.\n\nCould not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.IO.FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nAssembly Load Trace: The following information can be helpful to determine why the assembly 'myApp (from my-pc)' could not be loaded.\n\n\nWRN: Assembly binding logging is turned OFF.\nTo enable assembly bind failure logging, set the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog] (DWORD) to 1.\nNote: There is some performance penalty associated with assembly bind failure logging.\nTo turn this feature off, remove the registry value [HKLM\\Software\\Microsoft\\Fusion!EnableLog].\n\nStack Trace: \n\n\n[FileLoadException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0\n   System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark&amp; stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39\n   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132\n   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark&amp; stackMark, Boolean forIntrospection) +144\n   System.Reflection.Assembly.Load(String assemblyString) +28\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46\n\n[ConfigurationErrorsException: Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618\n   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209\n   System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130\n   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178\n   System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94\n   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332\n   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677\n\n[HttpException (0x80004005): Could not load file or assembly 'myApp (from my-pc)' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)]\n   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876\n   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97\n   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","appharbor","asp.net-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":524,"score":3,"question_id":12081255,"title":"ASP.NET MVC framework 4.5 CSS bundles does not work on the hosting","body":"<p>I am runing an App on app harbor written in MVC4.</p>\n\n<p>A bundle of css files doesnt work. In my local computer in debug mode I see the code of the App and I see the files. The App Works as expected.</p>\n\n<pre><code>&lt;link href=\"/Content/css/home/basic-jquery-slider.css\" rel=\"stylesheet\"/&gt;\n&lt;link href=\"/Content/css/home/Home.css\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p>When I upload the app to Appharbor I see the bundle in the code but the App doesnt work.</p>\n\n<pre><code>&lt;link href=\"/Content/css/home?v=zhVOIpUNuvCOZhJyBcQWpMlozayor4te6k-pM29wHqI1\" rel=\"stylesheet\"/&gt;\n</code></pre>\n\n<p>When I browse that link in the <code>href</code> I get <strong>403 - Forbidden: Access is denied.</strong></p>\n\n<p>How to troubleshoot this?</p>\n"},{"tags":["asp.net-mvc","ivr"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13045833,"title":"Adding IVR and PBX capabilities to web application","body":"<p>I have an existing web application that was created using ASP.NET C#, MVC3 with Sql Server backend.  Now I have been asked to add IVR capabilities to it.  </p>\n\n<pre><code>1) Is this possible? \n2) What is the best Library API to use? \n3) I found Asterisk but not very sure if this works within a Windows environment.  Also there appears to be a few .NET based Asterisk API. Which is the best one to use? \n3) How about MS Lync Server?  Though a bit concerned about additional licenses. \n4) Is there any sample applications around that I could have a look at?  \n</code></pre>\n\n<p>(P.S: found this link <a href=\"http://stackoverflow.com/questions/11541043/ivr-application-over-telephone-net\">IVR application over telephone .Net</a>.  Has anybody used VoiceModel?  How does it compare to the above?) \nThank you</p>\n"},{"tags":["asp.net-mvc","sql-server-2008","connection-string"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":195,"score":0,"question_id":13039540,"title":"Trying to connect ASP.NET MVC to SQL Server 2008 R2 with possible wrong connection string","body":"<p>Running SQL Server 2008 R2 and ASP.NET MVC 2 web application on the Virtual Server of big german hosting-provider.</p>\n\n<p>I have a problem to connect to the SQL Server. </p>\n\n<p>On localhost this connection string works fine: </p>\n\n<pre><code> @\"Data Source=LOCAL-HP;Initial Catalog=OnlineVertrag;Integrated Security=True\";\n</code></pre>\n\n<p>I'm using a similar connection string on the server: </p>\n\n<pre><code>@\"Data Source=MYSERVER\\SQLEXPRESS;Initial Catalog=OnlineVertrag;Integrated Security=True\";\n</code></pre>\n\n<p>but nothing happens over there.</p>\n\n<p>Here is my project which I am trying to connect: <a href=\"http://www.hotcont.eu/OnlineVertrag/Home\" rel=\"nofollow\">http://www.hotcont.eu/OnlineVertrag/Home</a></p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-membership","iprincipal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13147973,"title":"Custom IPrincipal expiration issue","body":"<p>I followed advice from <a href=\"http://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal\">this question</a> on how to implement custom <code>IPrincipal</code> (I need it to store <code>userId</code> in it in order to reduce calls to database to get just <code>userId</code>).<br/>\nNow if I login to site and leave it about 20 minutes don't do anything on site and refresh page it again requests login.<br/><br/>\nDoes custom implemented IPrincipal has some expirtation time and if it has how to extend this?</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13096067,"title":"MVC jquery calling a controller method not working","body":"<p>I want to populate one drop down list based on the selection of another drop down list.</p>\n\n<p>I know it's a fairly common problem, and for two whole days I've been trying different samples that I find on the net, to no avail!</p>\n\n<p>Here is my code: </p>\n\n<p>controller: </p>\n\n<pre><code> public List&lt;SelectListItem&gt; listTestCases(string id)\n    {\n        IQueryable&lt;SelectListItem&gt; A = repository.listTestCases(id);\n        return (A.toList());\n    }\n\n    public JsonResult listTestCases_2(string id)\n    {\n        IQueryable&lt;SelectListItem&gt; A = repository.listTestCases(id);\n        return Json(A);\n    }\n</code></pre>\n\n<p>I have two methods, one of them returns a List, the other one JSONResults, and I tried everything I found on the net with both methods.\nscript:</p>\n\n<pre><code>&lt;script&gt;\n$(document).ready(function() {\n    $('select#testCategoriesUniqueId').change(function() {\n\n        var testCategory = $(this).val();\n        $.ajaxSetup({ cache: false });\n        alert(testCategory);\n\n        $.getJSON(\"TestInput/listTestCases/\" ,  {id: testCategory}, function(data) {\n            alert(\"here\");\n        });\n\n    });\n});\n</code></pre>\n\n<p></p>\n\n<p>With the above code, the code goes through the listTestCases, and get's the results, but It doesn't go to the success function. (doesn't alert)</p>\n\n<p>I have tried:</p>\n\n<pre><code> $.getJSON(\"TestInput/listTestCases/\" + testCategory, null, function(data) {\n            alert(\"here\");\n        });\n</code></pre>\n\n<p>not surprisingly same results.</p>\n\n<p>I even tried : (json-p)</p>\n\n<pre><code> $.ajax({\n            url: \"TestInput/listTestCases/\" + testCategory,\n            dataType: \"json-p\",\n            success: function(data) {\n                alert(data.length);\n                var S = \"\";\n                $(\"#testCasesUniqueId\").removeOption(/./);\n                for (var i = 0; i &lt; data.length; i++) {\n                    S += data[i];\n                    var val = data[i].Value;\n                    var text = data[i].Text;\n                    $(\"#testCasesUniqueId\").addOption(val, text, false);\n                }\n                alert(S);\n            }\n        }\n        );\n</code></pre>\n\n<p>and the result is a string (System.collections.List[...SelectListItem]. and does not give me the objects of the list. so I tried it with listTestCases2, and it is not even calling the method.</p>\n\n<p>I read somewhere that I need to use post instead of get, and I even tried postJSON. and no result.</p>\n\n<p>Basically I'm super lost.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":3504,"score":0,"question_id":742655,"title":"Getting an input value or JavaScript variable in ASP.NET MVC Ajax.ActionLink ","body":"<p>I want to pass an input control value (say <code>textbox1.value</code> or a javascript variable) to a controller action method (as a parameter) without a form post (using Ajax.ActionLink). Please see the code below.</p>\n\n<p>Is it possible to assign something like <code>new {name = textbox1.value}</code> in Ajax.ActionLink.</p>\n\n<p>View</p>\n\n<pre><code>&lt;input type=\"text\" id=\"textbox1\" /&gt;\n&lt;%= Ajax.ActionLink(\"mylink\", \"linkfunction\", new {name = textbox1.value}, new AjaxOptions { UpdateTargetId = \"result\"}) %&gt;\n&lt;span id=\"result\"&gt;&lt;/span&gt;\n</code></pre>\n\n<p>and controller action is:</p>\n\n<pre><code>public string linkfunction(string name)\n{\n    return  DateTime.Now.ToString();\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":4,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":4911,"score":10,"question_id":3683366,"title":"Naming A Form Html.BeginForm()","body":"<p>Any one Know How to give name to a form in Asp.net MVC <code>Html.BeginForm()</code> <strong>i want only name not action or controller name</strong> because i want to post it through Java Script.  Something like this <code>Html.BeginForm(id = \"frm\")</code> </p>\n\n<p>I tried </p>\n\n<p><code>Html.BegainForm(null,null,new{id=\"frm\",name=\"frm})</code></p>\n\n<pre><code>Html.BegainForm(new{@id=\"frm\",@name=\"frm})\n</code></pre>\n\n<p>But Above code Produce Code Like This </p>\n\n<p> when see through View Source</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13146451,"title":".NET MVC 4 Kendo UI Grid and file upload","body":"<p>Is there a possibility to do smoething like this:</p>\n\n<ol>\n<li>I have a window with KendoGrid. DataSource is binded to model which contains a list of AttachmentDetails:\nFileName, Content, Description, etc.</li>\n<li>I have a button on top of the form to \"Save\" the modified/added/deleted list to database.</li>\n<li>I have a button to \"Add\" new Attachement. This opens a new window via javascript open.window.</li>\n<li>On that window I have a form with fields for model AttachmentDetails with input type \"file\" to get the Contents. </li>\n<li>When I click \"Save\" on that new window It should close itself, and add new item to Grid on the parent window.</li>\n</ol>\n\n<p>How can I do this kind of usabillity with Kendo?\nShould I use Session to store the list with Content? </p>\n"},{"tags":["c#","html","asp.net-mvc","model"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13146881,"title":"Multiple models in html","body":"<p>I'm trying to use multiple models in a single cshtml file.  The code I have is:</p>\n\n<pre><code>@model CostumeContest.Models.VoteModel  \n@{\n    ViewBag.Title = \"Vote\";\n}\n\n\n&lt;h2 style=\"color: #B45F04\"&gt;Vote Receipt&lt;/h2&gt;\n&lt;b&gt;Your Name:&lt;/b&gt; @Model.VoterName\n&lt;br /&gt;\n&lt;b&gt;Your Vote for Best Costume: &lt;/b&gt;@Model.BestName\n&lt;br /&gt;\n&lt;b&gt;Your Vote for Most Creative Costume:&lt;/b&gt; @Model.CreativeName\n&lt;br /&gt;\n\n&lt;h2 style=\"color: #B45F04\"&gt;Vote Summary&lt;/h2&gt;\n\n//@model CostumeContest.Models.VoteResult    this is giving me problems when not commented out\n&lt;h3 style=\"color: #B45F04\"&gt;Best Costume&lt;/h3&gt;\n\n\n&lt;h3 style=\"color: #B45F04\"&gt;Most Creative Costume&lt;/h3&gt; \n</code></pre>\n\n<p>What is wrong with what I'm doing above, and more importantly, how can I solve my issue?  Thank you.</p>\n"},{"tags":["asp.net-mvc","azure","asp.net-mvc-4","asp.net-membership","sql-azure"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":79,"score":4,"question_id":13144933,"title":"Form Authentication / Profiles slow on Azure Cloud, fine locally","body":"<p>I'm using MVC 4 on Azure, and it loads very slowly (over a minute).  Here are the load times of a few pages:\n<img src=\"http://i.stack.imgur.com/nzmy3.png\" alt=\"http://i.imgur.com/V4brS.png\">  (the 6.9 minutes was when I tried loading 7 tabs with different pages)</p>\n\n<p>This problem does not occur when I'm using the Azure emulator, locally. </p>\n\n<p>I've tried using an extra large instance, and using remote desktop to run the site locally, and it was just as slow.  Also I have tried using IIS Express and normal IIS, and nothing there either.</p>\n\n<p>I created a completely fresh MVC project using the \"Internet application\" template, which includes security, and it is very \nslow as well, so I'm pretty sure the other things I'm using in my project are not causing the problem.  Here are the load \ntimes with just the default MVC project:\n<img src=\"http://i.stack.imgur.com/YUd25.png\" alt=\"enter image description here\"></p>\n\n<p>I was originally using separate affinity regions for my membership DB and my website, but I've tried using matching affinity groups on both the blank MVC template with forms authentication and my project.</p>\n\n<p>Revisiting pages doesn't improve their speed significantly.</p>\n\n<p>I also tried creating just a MVC site without authentication, with a 10x5000 table generated:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n    &lt;table&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                @for (int i = 0; i &lt; 10; i++)\n                {\n                    &lt;th&gt;@i\n                    &lt;/th&gt;\n                }\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            @for(int i = 0; i &lt; 5000; i++)\n            {\n                &lt;tr&gt;\n                    @for(int j = 0; j &lt; 10; j++)\n                    {\n                        &lt;td&gt;Row @i , column @j&lt;/td&gt;    \n                    }\n                &lt;/tr&gt;\n            }\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This loads fine, both locally and on the cloud.  Even from a cold start it is only ~10-15 seconds.</p>\n\n<p>So I'm fairly certain that the issue lies in the Profile/Membership/Authentication of ASP.NET, but only while it is deployed \nto Azure (since I'm using the same SQL Azure database with Universal Providers when running locally, and there aren't these \nslowdowns).</p>\n\n<p>I expected this problem to be more common, but the only thing that really seemed relevant was this:\n<a href=\"http://social.msdn.microsoft.com/Forums/en-US/windowsazuremanagement/thread/7d3323d8-571b-4b8f-9fdb-bd5ccc6c39b7\" rel=\"nofollow\">social.msdn.microsoft.com/Forums/en-US/windowsazuremanagement/thread/7d3323d8-571b-4b8f-9fdb-bd5ccc6c39b7</a>\n(possibly this: <a href=\"http://stackoverflow.com/questions/10791433/saving-changes-very-slow-via-datacontext\">stackoverflow.com/questions/10791433/saving-changes-very-slow-via-datacontext</a>)</p>\n\n<p>I'm working through the things to try, as suggested in that thread, at: <a href=\"http://windowsazure.com/en-us/manage/windows/best-practices/\" rel=\"nofollow\">windowsazure.com/en-us/manage/windows/best-practices/</a></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","authentication","forms-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13146032,"title":"Redirect to requested page after authentication","body":"<p>I'm working on an mvc .net application and I'm using forms authentication. I want to redirect user to the page he requested after he gets authenticated. Any help would be appreciated.</p>\n"},{"tags":[".net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":13009153,"title":"Child forms collections handling","body":"<p>In case my ViewModel has some child property:</p>\n\n<pre><code>public class MyViewModel\n{\n   public MyFormViewModel Form {get;set;}\n}\n</code></pre>\n\n<p>and I render a form for this property, I can then have the following ActionResult:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult SomeAction(MyFormViewModel form)\n{\n   ...\n}\n</code></pre>\n\n<p>and DefaultModelBinder fills form property (if ViewModel's property name equals to action parameter name).</p>\n\n<p>But how should I name action parameter if MyViewModel contains <code>IList&lt;MyFormViewModel&gt;</code> which are rendered by index: <code>@Html.EditorFor(x =&gt; x.Forms[index])</code>?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13145301,"title":"customize literal control in asp.net","body":"<p>Can we change the literal button in asp.net tools? For example a literal come up and ask us a question and we can answer it by using two buttons that show us yes and no. </p>\n\n<pre><code> Literal1.Text = \"&lt;script&gt;alert('You have already sent a request for this reviewer')    &lt;/script&gt;\";\n</code></pre>\n\n<p>If it is possible please guide me.</p>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13127781,"title":"SqlQuery against unknown (at compile time) type","body":"<p>I have an application where I have a list of database queries to execute.</p>\n\n<p>I know its possible to do something like:</p>\n\n<pre><code>var results = _db.Contacts.SqlQuery( sQuery );\n</code></pre>\n\n<p>and like: </p>\n\n<pre><code>var results = _db.Database.SqlQuery&lt;Contacts&gt;( sQuery );\n</code></pre>\n\n<p>But in my situation, I'm working only with metadata.  How can I do something like this:</p>\n\n<pre><code>string sBaseType = \"Contacts\";\nvar results = _db.Database.SqlQuery&lt;sBaseType&gt;( sQuery );\n</code></pre>\n\n<p>I had some success with <code>&lt;object&gt;</code>...it returned all the rows I expected it to, but its not in a very usable form.  Whats the best way to handle this variety of dynamic query?</p>\n\n<p>Edit -- \nWhat I'm hoping to find, is some mechanism rather like this:</p>\n\n<pre><code>var results = _db.Database[sBaseType].SqlQuery( sQuery );\n</code></pre>\n\n<p>So that I can avoid a construction that looks like :</p>\n\n<pre><code>if (sBaseType == \"Contacts\") {\n    var results = _db.Contacts.SqlQuery( sQuery );\n} else if  (sBaseType == \"Buildings\") {\n    var results = _db.Buildings.SqlQuery( sQuery );\n} else if  (sBaseType == \"Rooms\") {\n    var results = _db.Rooms.SqlQuery( sQuery );\n} else if  (sBaseType == \"Equipment\") {\n    var results = _db.Equipment.SqlQuery( sQuery );\n}\n</code></pre>\n\n<p>I don't need anything particularly fancy...I just am hoping to save building up a 100+ element if-elseif block...</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13145141,"title":"Good ASP.NET MVC projects to look at for authentication and cookie management","body":"<p>I am new to ASP.NET MVC, so I was looking out for open-source projects either on Codeplex/Github/Bitbucket which I can look at and understand how to implement authentication, authorization and implement remember me, cookie management and stuff.</p>\n\n<p>Can some one please guide me to any good projects that has a nice implementation on authentication and cookie management.</p>\n"},{"tags":["c#","asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":23,"score":0,"question_id":13145477,"title":"query a view with a list of data","body":"<p>How can I query a view with data in a list?</p>\n\n<p>For eg: Below, I have variable \"data\" where I store all the id's from a view to a list. I want to query a second view \"vwStatus\" such that it returns all the rows which has status displayed in the list(data)</p>\n\n<p>Something like:</p>\n\n<pre><code>public ActionResult Index(string id)\n{\n    var data = (from p in db.vwdb.Where(p =&gt; p.ID == id)\n                 group p by p.status into g select g.Key).ToList();\n\n    ViewData.Model = db.vwStatus.Where(p =&gt; p.Status == data);           \n\n    return View();\n}\n</code></pre>\n\n<p>Hope I made it clear.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":485,"score":3,"question_id":11751730,"title":"PreserveLoginUrl Override for MVC 4","body":"<p>I have a controller action which is called from a jquery method on the client and returns JSON.  I may need to return a 401 from this action in some cases.  Standard MVC will create a response that redirects the user to the login page if I try to issue a 401 as long as PreserveLoginUrl is set to true in web.config.  I want to be able to override PreserveLoginUrl on certain actions so that a true 401 is sent to the client.  However, for the majority of actions, PreserveLoginUrl=true is the correct behaviour so I want that maintained.</p>\n\n<p>Any suggestions on how I can accomplish a true 401 without a redirect for a handful of actions while maintaining the PreserveLoginUrl=true functionality?  For now, I am returning a 400 instead of a 401 as a workaround, but that is not really the correct behaviour since I do want to issue a NOT Authorized.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":377,"score":0,"question_id":3916374,"title":"Put build number in web.config","body":"<p>I'm trying to get my build number into the web.config of an ASP.Net MVC project (long story, but there <em>is</em> a reason)... something like this:</p>\n\n<pre><code>&lt;appSettings&gt;\n    &lt;add key=\"version\" value=\"1.0.3936.27150\" /&gt;\n&lt;/appSettings&gt;\n</code></pre>\n\n<p>Right now, I'm doing it with an executable on the post-build event by looking at the assembly to get the version and stuff that into the web.config. It works, but isn't exactly what I was looking for.</p>\n\n<p>Any easy way to do this easier / cleaner? Thanks for any advice / suggestions.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","controller","model-binding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13145160,"title":"Binding query string to object in ASP.NET MVC?","body":"<p>I have a grid control that I have bound to a model of IEnumerable. How ever in my controller I would like to save a record. The grid control I am using is one from Telerik 'Kendo'. The request back is a string and I would like to get my bound object 'CustomerViewModel' how ever when I pass in my object it comes back null. I have tried different types of information and it seems to only work for i specify the property I would like to pass in. Please find code below and assist?</p>\n\n<pre><code>[AcceptVerbs(HttpVerbs.Post)]\n        public ActionResult Save([DataSourceRequest] DataSourceRequest request, CustomerViewModel customerViewModel)\n        {\n            if (customerViewModel != null &amp;&amp; ModelState.IsValid)\n            {\n                var customers = Repository.GetItems&lt;Customer&gt;();\n                Repository.SaveChanges&lt;Customer, CustomerViewModel, NorthWindDataContext&gt;(customers, customerViewModel);\n            }\n            return Json(ModelState.ToDataSourceResult());\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlist"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13144810,"title":"Multiple DropDownLists with the same name (inside foreach statement)","body":"<p>I'm having trouble when loading several DropDownLists that have the same name. I attach my code here:</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@{\n   int i = 1\n\n    foreach (var queue in Model.Queues)\n    {\n            using (Html.BeginForm(\"ChangeQueueState\", \"Home\", FormMethod.Post))\n            {\n                List&lt;SelectListItem&gt; sli = ViewBag.states[i - 1];\n            &lt;div&gt;@Html.DropDownList(\"state\", sli)&lt;/div&gt;\n            }\n     }\n    i++\n}\n</code></pre>\n\n<p>There's more code inside the view that I didn't show.</p>\n\n<p>In my controller I simply change the state of the corresponding queue and load <code>ViewBag.states</code> with the List of <code>SelectedListItem</code> which contains the List of states with the correct state as 'Selected' for each queue.</p>\n\n<p>The problem is that when the View is loaded, all the <code>DropDownLists</code> are loaded with the last modified state. For instance, if I changed the 5th queue from 'Open' to 'Closed' then all the <code>DropDownLists</code> appears with the '<code>Closed</code>' option selected (although in the DB the changes are applied correctly).</p>\n\n<p>I think the problem is due to the binding that MVC does between the <code>DropDownList</code> name and the <code>SelectListItem</code> associated, but I can't change the DDL name to <code>\"state\" + @i</code>, because state is bound to the argument received in the '<code>ChangeQueueState</code>' method of my Controller.</p>\n\n<p>I would really appreciate your help. Thanks in advance!</p>\n"},{"tags":["c#","asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13144594,"title":"What is dalAccess supposed to do in ASP.NET?","body":"<p>I am a bit new to the ASP.NET MVC framework making the move from Ruby on Rails 3 and it's ActiveRecord. Please help me understand the place of dalAccess in the MVC.</p>\n\n<pre><code>[HttpGet]\n    public ActionResult copyCampaign(int Id)\n    {\n        DALAccess dalaccess = new DALAccess();\n        //string newid = dalaccess.CopyOffer(Id);\n        string newid = dalaccess.CopyOfferByCampaignId(Id);\n\n        string type = PrepareOffer4Edit(newid);\n        if (type == \"bundle\")\n            return RedirectToAction(\"bundleStep1\");\n        else if (type == \"scratchOff\")\n            return RedirectToAction(\"scratchOffStep1\");\n        else\n        {\n            return RedirectToAction(\"CampaignMgmt\", \"CampaignMgmt\");\n        }\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","model"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13144425,"title":"How should I transfer a domain object's properties to its model counterpart?","body":"<p>We currently use extension methods to provide this functionality, but I can't help but feel there's a much cleaner solution. I played around with AutoMapper, but I wasn't able to quite see how it solved the issue in complex cases. For a simple 1:1 it works, but if any fiddling of the data is required -- it seems to be a let down.</p>\n\n<p>So, I've got something like:</p>\n\n<pre><code>public static class ProvisioningExtensions\n{\n    // Convert ProvisioningServicesProxy.Provisioning to ProvisioningDetailsModel.\n    public static ProvisioningDetailsModel ToProvisioningDetailsModel(this Provisioning provisioning)\n    {\n        var provisioningDetailsModel = new ProvisioningDetailsModel\n        {\n            ID = provisioning.ID,\n            TaskDeviceID = provisioning.TaskDevice.ID,\n            ServiceGroupID = provisioning.ServiceGroup.ID,\n            ServiceID = provisioning.Service.ID,\n            PatchSchedules = provisioning.PatchSchedules.Select(ps =&gt; ps.ToPatchScheduleDetailsModel()).ToList()\n        };\n\n        return provisioningDetailsModel;\n    }\n\n    // Convert ProvisioningDetailsModel to ProvisioningServicesProxy.PatchSchedule.\n    public static Provisioning ToProvisioning(this ProvisioningDetailsModel provisioningDetailsModel)\n    {\n        WorkflowManager workflowManager = new WorkflowManager();\n        ProvisioningManager provisioningManager = new ProvisioningManager();\n\n        TaskDevice taskDevice = workflowManager.GetTaskDeviceByID(provisioningDetailsModel.TaskDeviceID);\n        Service service = provisioningManager.GetServiceByID(provisioningDetailsModel.ServiceID);\n        ServiceGroup serviceGroup = provisioningManager.GetServiceGroupByID(provisioningDetailsModel.ServiceGroupID);\n\n        var provisioning = new Provisioning\n        {\n            ID = provisioningDetailsModel.ID,\n            TaskDevice = taskDevice,\n            ServiceGroup = serviceGroup,\n            Service = service,\n            PatchSchedules = provisioningDetailsModel.PatchSchedules.Select(ps =&gt; ps.ToPatchSchedule()).ToArray()\n        };\n\n        return provisioning;\n    }\n}\n</code></pre>\n\n<p>ProvisioningDetailsModel is a class which just contains the model's properties. Nothing special.</p>\n\n<p>I thought about decorating the Provisioning domain object such that it could be used in place of the model, but decided against it. What if I wanted to represent the Provisioning data in two different manners -- this would be impossible if I use the domain object itself as my model.</p>\n\n<p>What other options should I be considering? Extension methods would be my last choice -- especially when I have to do relatively heavy work inside of ToProvisioning.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12789904,"title":"Get site url on mvc","body":"<p>I want to write a little helper function that returns the site url.\nComing from PHP and Codeigniter, I'm very upset that I can't get it to work the way I want.</p>\n\n<p>Here's what I'm trying:</p>\n\n<pre><code>@{\n    var urlHelper = new UrlHelper(Html.ViewContext.RequestContext);\n    var baseurl = urlHelper.Content(\"~\");\n}\n\n&lt;script&gt;\n    function base_url(url) {\n\n        url = url || \"\";\n        return '@baseurl' + url;\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I want to return the base url of my application, so I can make ajax calls without worrying about paths. Here's how I intend to use it:</p>\n\n<pre><code>// Development\nbase_url(); // http://localhost:50024\n\n// Production\nbase_url(\"Custom/Path\"); // http://site.com/Custom/Path\n</code></pre>\n\n<p>How can I do something like that?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I want absolute paths because I have abstracted js objects that makes my ajax calls.\nSo suppose I have:</p>\n\n<pre><code>function MyController() {\n   // ... js code\n   return $resource('../MyController/:id');\n}\n\n// then\nvar my_ctrl = MyController();\nmy_ctrl.id = 1;\nmy_ctrl.get(); // GET: ../MyController/1\n</code></pre>\n\n<p>This works when my route is <code>http://localhost:8080/MyController/Edit</code> but will fail when is <code>http://localhost:8080/MyController</code> .</p>\n"},{"tags":["asp.net-mvc","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13144414,"title":"Saving details in a ViewModel","body":"<p>I have a ViewModel I use to create a new user, this updates three different models.</p>\n\n<p>I have a question about how I would edit these details. Looking at examples the edit method in the controller would use something like userRepository.Save(); but for the other items that are in other models other that the User model how would I save them? </p>\n"},{"tags":["asp.net-mvc","iis","io","cpu"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13142993,"title":"High CPU on IIS sites","body":"<p>I have a webserver with 10 mvc sites that I have created. All sites \"link\" to the same code in a folder. So all 10 sites run on same code. This is done have different languages on the site. </p>\n\n<p>My problem is that 1 site goes up to use 40-60% of the CPU for a few minutes. Then it drops down and another sites rises in CPU. Normally the sites use 300mb in w3wp process, but sometimes rises to 8-900mb!</p>\n\n<p>There's 20GB of memory, 18,9 is constantly used. There is also a SQL server running that takes 13GB. </p>\n\n<p>The site is a MVC 3 site. Uses caching on the SQL data.</p>\n\n<p>Every site has its own pool. </p>\n\n<p>I know its a very vague question. But can anyone see any obvious problems with this setup?</p>\n\n<p>Why does the CPU rise periodically? </p>\n\n<p>There are about constantly 100-150 users on the sites. </p>\n\n<p>Any ideas or thought would be very appreciated. </p>\n"},{"tags":["asp.net-mvc","razor","telerik","datepicker"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13143802,"title":"In Telerik DatePicker, how do I set the mimimum date to equal today?","body":"<p>I tried the code below and it didn't work.  I assume it's a little more involved.</p>\n\n<pre><code>@Html.Telerik().DatePickerFor(o =&gt; o.StartDt).Min(new System.DateTime.Now())\n</code></pre>\n\n<p>With Francois' suggestion, I get this error:\n<img src=\"http://i45.tinypic.com/4h7f35.gif\" alt=\"Error\"></p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","visual-studio-extensions","razorgenerator"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":116,"score":3,"question_id":12975030,"title":"The custom tool 'RazorGenerator' failed. The method or operation is not implemented","body":"<p>I have just upgraded the Visual Studio extension <a href=\"http://visualstudiogallery.msdn.microsoft.com/1f6ec6ff-e89b-4c47-8e79-d2d68df894ec\" rel=\"nofollow\">RazorGenerator</a> to V1.5 (Last updated 10/14/2012) and now have the following problems. </p>\n\n<p>Each cshtml file edited now removes the generated file, if I choose to 'Run Custom Tool' I get <code>The custom tool 'RazorGenerator' failed. The method or operation is not implemented.</code></p>\n\n<p>I had it working previously in my project without issue but the upgrade seems to have broken it. Does anyone know how this can be fixed..? I can't even seem to roll back to the previous version now since it's installed via the ExtensionManager.</p>\n\n<p>The latest version of <a href=\"http://nuget.org/packages/RazorGenerator.MVC\" rel=\"nofollow\">RazorGenerator.MVC in nuget</a> is 1.4 (Friday, April 20, 2012) so perhaps the version mismatch is the issue..? </p>\n\n<p>I have tried restarting VS and my machine without success, I even un-installed the extension and re-installed and that also didn't work. </p>\n\n<pre><code>Exception calling \"RunCustomTool\" with \"0\" argument(s): \"The custom tool 'RazorGenerator' failed.  The method or operation is not implemented.\"\nAt D:\\Source\\MySolution\\MyProject\\packages\\RazorGenerator.Mvc.1.4.0.0\\tools\\RazorGenerator.psm1:32 char:32\n+         $_.Object.RunCustomTool &lt;&lt;&lt;&lt; ()\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : ComMethodTargetInvocation\n\nException calling \"GetItem\" with \"1\" argument(s): \"The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))\"\nAt D:\\Source\\MySolution\\MyProject\\packages\\RazorGenerator.Mvc.1.4.0.0\\tools\\RazorGenerator.psm1:62 char:46\n+                     $solutionExplorer.GetItem &lt;&lt;&lt;&lt; (\"$SolutionName\\$ProjectName$relativePath\").UIHierarchyItems.Expanded = $false\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : ComMethodTargetInvocation\n</code></pre>\n\n<p>In addition to this, I get the following build errors for each view (despite saying build succeeded):</p>\n\n<pre><code>Custom tool error: Could not load file or assembly 'file:///C:\\Users\\Rob\\AppData\\Local\\assembly\\dl3\\VQ93NZJ0.M7K\\4HA91P75.CHN\\4b53b7b1\\09b87db8_d4adcd01\\RazorGenerator.Core.v1.dll' or one of its dependencies. The system cannot find the file specified.\n</code></pre>\n\n<p>I <a href=\"http://razorgenerator.codeplex.com/SourceControl/changeset/view/5dd40e221a03\" rel=\"nofollow\">downloaded the source</a>, built locally and copied the 'RazorGenerator.Core.v1.dll' into the directory from the error message but it still didn't work. I even copied all of the RazorGenerator*.dll files into that directory but still no luck. Checking the dependencies only shows system assemblies and 'RazorGenerator.Core.dll' which is present in the same directory. </p>\n\n<p>Incidentally, the 'RazorGenerator.Core.dll' was already in the directory above. </p>\n\n<p>Looking in the Visual Studio extensions folder I have a directory for RazorGenerator as follows:</p>\n\n<pre><code>C:\\Users\\Rob\\AppData\\Local\\Microsoft\\VisualStudio\\10.0\\Extensions\\RazorGenerator contributors\\Razor Generator\\1.5\n</code></pre>\n\n<p>The following files and assemblies are within this folder:</p>\n\n<pre><code>extension.vsixmanifest\nRazorGenerator.Core.dll\nRazorGenerator.Core.v1.dll\nRazorGenerator.Core.V2.dll\nRazorGenerator.dll\nRazorGenerator.pdb\nRazorGenerator.pkgdef\n</code></pre>\n\n<p>Any help would be very much appreciated. </p>\n"},{"tags":["asp.net-mvc","http","error-handling"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13137914,"title":"Accessing the exception if custom redirection redirects to a controller","body":"<p>I am using MVC4, and would like to be able to throw HttpExceptions from a ontroller, and handle those in a seperate controler.</p>\n\n<p>I have set up <code>&lt;customErrors mode=\"On\" defaultRedirect=\"/Error\"/&gt;</code> for this. This works, but in my controller I would like to be able to access the exception.</p>\n\n<p>Preferably I would like to have two modes:</p>\n\n<ol>\n<li><p>Handle instances of HttpException, so that from a controller I can throw a HttpException and have it handled accordingly</p></li>\n<li><p>Handle all other errors.</p></li>\n</ol>\n\n<p>in case of the first, I would like to present the useragent with the appropriate status code, and possibly a view. In case of the second I want to present the useragent with status 500, and show a default view with an optional message.</p>\n\n<p>For this, I think I need to access the exception data - at least, I can't think of any other proper way to do this.</p>\n\n<p>What is the proper way to set this up? I know there are plethoria of other questions on error handling in MVC, yet none seem to answer these questions.</p>\n"},{"tags":["jquery","ajax","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12311574,"title":"passing jquery array to asp.net mvc controller","body":"<p>how exactly should the 'myArray' array be passed to the mvc controller? I've tried everything but i can't seem to get anything to work</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult MyAction(MyModel model, List&lt;string&gt; myArray) {\n     //code...\n}\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>$('#dialog').dialog({\n        //...\n        buttons: {\n            \"Cancel\": function () {\n                $(this).dialog(\"close\");\n            },\n            \"Submit\": function () {\n                var arrCount= 0;\n                var myArray = new Array();\n\n                //grabs all the dropdownlists that begin with id 'dropdownlist' and adds it to 'myArray'\n                $('form').contents().find(\"select[id ^= 'dropdownlist'] option:selected\").each(function () {\n                    myArray[arrCount++] = $(this).text();\n                });\n\n                if ($('form').validate().form()) {\n                    $.ajax({\n                        url: \"MyController/MyAction\",\n                        type: 'POST',\n                        dataType: \"json\",\n                        traditional: true,\n                        data: { \n                           model: $(\"form\").serialize(),\n                           myArray: myArray\n                        },\n                        success: function (result) {\n                            alert(\"debug: complete\");\n                        }\n                    });\n                }\n            }\n        }\n    });\n</code></pre>\n\n<p>I know how to pass in the array by itself to the controller. But, once i add my existing model into the equation, i'm unsure as to how i would be able pass my array to the controller. Any thoughts?</p>\n"},{"tags":["asp.net-mvc","json","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13137714,"title":"Passing JSON as a model object from my controller to a strongly typed view","body":"<p>I am building an asp.net mvc 4 web application that calls a web service provider then i am displaying the json result that is returned from the web services call using java script. for example on the controller level I have the following action method:-</p>\n\n<pre><code>public ActionResult ListPackages()\n        {            using (var client = new WebClient())\n            {                try\n                {\n                    var query = HttpUtility.ParseQueryString(string.Empty);\n                    var url = new UriBuilder(\"http://localhost:8080/jw/web/json/workflow/package/list\");\n                    url.Query = query.ToString();\n                    string json = client.DownloadString(url.ToString());\n                    Thread.Sleep(500);\n                    return Content(json, \"application/json\");\n                }\n                catch (System.Net.WebException) {\n\n                   return Content(\"error\", \"application/json\");\n\n                }           }        }\n</code></pre>\n\n<p>Then i am using a java script to display the JSON on the view:-</p>\n\n<pre><code>function getpackagelist(result) {\n        $('#products').empty();\n        $('#title').text(\"All Processes\");\n        $.each(result.data, function (key, val) {\n            var str = val.packageName;\n            $('&lt;li/&gt;', { text: str })\n                .appendTo($('#products'));\n        });\n        $('#tobehide').hide();\n</code></pre>\n\n<p>and finally on the view i have the following code which calls the above action method and the java script:-</p>\n\n<pre><code>@{\n    ViewBag.Title = \"Home Page\";\n}\n@Ajax.ActionLink(\"Get Process List\", \"ListPackages\", \"Home\",\nnew AjaxOptions\n    {    HttpMethod = \"GET\",\n        LoadingElementId = \"tobehide\",\n        OnBegin = \"clear\",\n\n        OnFailure = \"clear\",\n        OnSuccess = \"getpackagelist\"\n    })\n&lt;div id= \"geturl\" data-url=\"@Url.Action(\"ListPackages\", \"Home\")\"&gt;\n    &lt;img class=\"hide\" id=\"tobehide\" src=\"~/Content/ajax-loading2.gif\" /&gt;\n&lt;h1 id =\"title\"&gt;&lt;/h1&gt;\n\n&lt;ul id=\"products\"&gt;\n\n&lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The above is working well, but i find it difficult to do the whole staff using javascript, so i am thinking of passing the JSON as a model to a strongly-typed view instead of using java script, but i have the following questions:-</p>\n\n<ol>\n<li><p>what are the pros and cons of these two approaches (using javaScript versus passing the JSON to a strongly-typed view).</p></li>\n<li><p>how I can pass the JSON as a model to my strongly-typed view.</p></li>\n<li><p>which approach i should follow ??</p></li>\n</ol>\n\n<p>Thanks in advance for any help.</p>\n\n<p>Best Regards</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13139081,"title":"MVC, entity framework, foreign key data not displayed creating new item","body":"<p>Using MVC4 and EF5 codefirst. Got a problem whereby when creating a new data record with reference to a row with a foreign key. Listing created entries everything looks fine:</p>\n\n<pre><code>@foreach (var item in Model) {\n   @Html.DisplayFor(modelItem =&gt; item.Location.name)\n   @Html.DisplayFor(modelItem =&gt; item.Action.name)\n   ...\n</code></pre>\n\n<p>Creating a new record the reference fails to display the foreign content (names):</p>\n\n<pre><code>    ...\n    @Html.LabelFor(model =&gt; model.locationID)\n    @Html.DisplayFor(model =&gt; model.Location.name)\n\n    @Html.LabelFor(model =&gt; model.actionID)\n    @Html.DisplayFor(model =&gt; model.Action.name)\n    ...\n</code></pre>\n\n<p>The foreign keys are correctly filled in the controller (see simplied example) </p>\n\n<pre><code>    public ActionResult Create()\n    {\n        Timerecord tm = new Timerecord();\n\n        tm.currentTime = DateTime.Now;\n        tm.locationID = 1;\n        tm.actionID = 5;\n\n        ViewData.Model = tm;\n        return View();\n    }\n</code></pre>\n\n<p>and the record is correctly created in the database. Just the names are not displayed on the view. Do I have to fetch the associated reocrd myselfs during the Create?</p>\n"},{"tags":["asp.net","asp.net-mvc","entity-framework","asp.net-mvc-4","simplemembership"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1060,"score":3,"question_id":12254701,"title":"SimpleMembershipProvider not working","body":"<p>I started a new internet project with VS2012 and am trying to just restructure my project a bit and I can't seem to keep the SimpleMemberhsipProvider working.  Basically, all I've done is move the models objects into a core project along with a couple other items.  I've implemented Ninject and am trying to abstract Entity a bit by using a repository pattern to get my data.  I really don't feel as though I've changed much with the current project, but for some reason when I start the application now I get:</p>\n\n<blockquote>\n  <p>{\"The Role Manager feature has not been enabled.\"}</p>\n</blockquote>\n\n<p>The ActionFilter that is supplied by the framework is where the error is thrown when:</p>\n\n<blockquote>\n  <p>WebSecurity.InitializeDatabaseConnection(\"DefaultConnection\", \"UserProfile\", \"Id\", \"UserName\", autoCreateTables: true); </p>\n</blockquote>\n\n<p>is called. </p>\n\n<p>Here is some of the stacktrace:</p>\n\n<blockquote>\n  <p>[ProviderException: The Role Manager feature has not been enabled.]<br>\n  System.Web.Security.Roles.EnsureEnabled() +9561885<br>\n  System.Web.Security.Roles.get_Provider() +8<br>\n  WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo\n  connect, String userTableName, String userIdColumn, String\n  userNameColumn, Boolean autoCreateTables) +104<br>\n  WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String\n  connectionStringName, String userTableName, String userIdColumn,\n  String userNameColumn, Boolean autoCreateTables) +100<br>\n  InoutBoard.Core.Infrastructure.Filters.SimpleMembershipInitializer..ctor()\n  in c:\\Users\\Kyle\\Documents\\Visual Studio\n  2012\\Projects\\InoutBoard\\InoutBoard.Core\\Infrastructure\\Filters\\InitializeSimpleMembershipAttribute.cs:42</p>\n  \n  <p>[InvalidOperationException: The ASP.NET Simple Membership database\n  could not be initialized. For more information, please see\n  http://go.microsoft.com/fwlink/?LinkId=256588]<br>\n  InoutBoard.Core.Infrastructure.Filters.SimpleMembershipInitializer..ctor()\n  in c:\\Users\\Kyle\\Documents\\Visual Studio\n  2012\\Projects\\InoutBoard\\InoutBoard.Core\\Infrastructure\\Filters\\InitializeSimpleMembershipAttribute.cs:46</p>\n</blockquote>\n\n<p>I'm hosting the code on github at the following link <a href=\"https://github.com/keroger2k/InoutBoard\" rel=\"nofollow\">https://github.com/keroger2k/InoutBoard</a></p>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":12244128,"title":"Type safe URL Action in MVC3 issue","body":"<p>I don't like Url.Action(\"string\", \"string) and hence wrote below extension method</p>\n\n<pre><code>public static string Action&lt;TController&gt;(this UrlHelper urlHelper, Expression&lt;Func&lt;TController, object&gt;&gt; actionExpression)\n{\n    var controllerName = typeof(TController).GetControllerName();\n    var actionName = actionExpression.GetActionName();\n\n    return urlHelper.Action(actionName, controllerName);\n}\n</code></pre>\n\n<p>I use it in my razor view like below:</p>\n\n<pre><code>@{Url.Action&lt;ClientController&gt;(action =&gt; action.ClientDetails());}\n</code></pre>\n\n<p>It doesn't render anything. Am I making any mistake anywhere or am I missing anything? Is it possible to do this as I like the Type Safe nature, rather than hard-coding actionnames and controllers?</p>\n"},{"tags":["asp.net","asp.net-mvc","excel","object"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13143007,"title":"Convert object into excel file for MVC web app","body":"<p>Example, I have an item object with two properties</p>\n\n<pre><code>public class Item {\n   public string Name { get; set; }\n   public decimal Price { get; set; }\n}\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>Item item = new Item();\n</code></pre>\n\n<p>How can I pass this 'item' object to convert it into excel and save it to a target folder location.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc","scheduled-tasks","azure-web-roles"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13131869,"title":"Run a controller method at a fixed schedule within MVC?","body":"<p>We have an existing method in an existing controller that we'd like to call at a specific schedule (eg \"daily at 2am\"). The application is an MVC3 application running on Azure as a web role and we don't want to create, maintain and pay for an entire new role (worker role) just to run one small piece of identical logic.</p>\n\n<p>Is it possible to schedule a controller method to trigger off at a specific scheduled time in the future? Also, would the same technique work in regular ASP.NET webforms?</p>\n"},{"tags":["c#","asp.net-mvc","web-applications","download","file-download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13136611,"title":"How to limit speed downloading file in asp.net mvc 3","body":"<p>I have read this article on codeproject, but i dont know how to apply it to asp.net mvc 3\n<a href=\"http://www.codeproject.com/Articles/18243/Bandwidth-throttling\" rel=\"nofollow\">http://www.codeproject.com/Articles/18243/Bandwidth-throttling</a></p>\n\n<p>Here is code for downloading a file in my project</p>\n\n<pre><code>public ActionResult GetFile(int id)\n{\n    var f = FileAcc.GetInfo(id);\n    var templateStr = new FileStream(Server.MapPath(f.file_url), FileMode.Open);\n    return File(templateStr, f.file_name);\n}\n</code></pre>\n\n<p>Plz support me on this issues, thanks a lot!</p>\n"},{"tags":["asp.net","asp.net-mvc","c#-4.0"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":16,"score":0,"question_id":13141682,"title":"Which is free and open source b2b (business 2 business) portal in asp.net?","body":"<p>Hi can anybody tell me which is free and open source solution provide me to create business to business solution web site?</p>\n\n<p>For e.g: <a href=\"http://www.alibaba.com/\" rel=\"nofollow\">http://www.alibaba.com/</a></p>\n\n<p>I know nopcommerce provide only E-Commerce solution. E-Commerce and b2b solution both are different concept.\nIf anybody have more idea then please....</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":29,"score":-5,"question_id":13141525,"title":"Multilingual Website with Jquery Globalization?","body":"<p>I want to create multilingual website with using Jquery Globalization Plugin. So far I have found on net is implementation of globalization with jquery of dates, currency formats , prices etc. Please guide if I have to translate text string from one language to other without resource file , using Jquery Plugin how can I achieve that functionality? </p>\n"},{"tags":["asp.net-mvc","smtp","contact-form","mailmessage","webmail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13141227,"title":"How do you get e-mails to use the \"From\" parameter in WebMail.Send with MVC?","body":"<p>I have set up a contact form on my site for users to send messages to me to get in contact.</p>\n\n<p>The WebMail.Send() method of sending a message works fine but the problem is, when I receive the e-mail it is received from the e-mail that I have defined for the SMTP client. </p>\n\n<p>The call for sending the mail looks like this:</p>\n\n<pre><code>WebMail.Send(mailMessage.To[0].Address, mailMessage.Subject, mailMessage.Body, mailMessage.From.Address);\n</code></pre>\n\n<p>What I want to know is how do I get the messages to send using this method but receive to me with the MailMessage's from address rather than my SMTP account address?</p>\n"},{"tags":["c#","asp.net-mvc","iis","browser"],"answer_count":1,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":175,"score":8,"question_id":13064877,"title":"Why is my MVC controller slow when serving images","body":"<p>I have this MVC view that has a list of images, these images are dynamic so they come from a controller. To simplify things this controller has only this code:</p>\n\n<pre><code>    [OutputCache(Duration = 0, NoStore = true, Location = OutputCacheLocation.None)]\n    public ActionResult RenderImage(int id)\n    {\n    return File(@\"C:\\Users\\Pictures\\myimage.png\", \"image/png\");\n    }\n</code></pre>\n\n<p>I'm not caching things to prove my point.</p>\n\n<p>My view requests 8 images all with a different id, and the timings are horrible:</p>\n\n<p><img src=\"http://i.stack.imgur.com/3T1J4.png\" alt=\"timings\"></p>\n\n<p>Sometimes it's fast for some images (which are all the same) and on each refresh it's different, can't find a pattern in it.</p>\n\n<p>The app is hosted in IIS and the timetaken in the server logs shows it's the server that is eating up the time:</p>\n\n<p><img src=\"http://i.stack.imgur.com/vBFXP.png\" alt=\"enter image description here\"></p>\n\n<p>Has anyone a clue why this happens? If I request the images individually (not in the page) it's always fast.</p>\n"},{"tags":["asp.net","asp.net-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1043,"score":0,"question_id":11897416,"title":"Binding database with kendo UI grid in ASP.NET MVC","body":"<p>Hi i am trying to implement KENDO UI grid control in my ASP.NET MVC application.\nI know KENDO UI guys have given numerous examples but its not working for me .\nMy Model code is :</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Data.SqlClient;\nusing System.Data.Sql;\nusing System.Data;\n\nnamespace KendoGrid.Models\n{\n    public class status\n    {\n        public string SiteId { get; set; }\n        public string SiteName { get; set; }\n        public string SiteStatus { get; set; }\n\n        public static List&lt;status&gt; StatusInfo()\n        {\n\n            SqlConnection sconn = new SqlConnection(@\"Data Source=DS-7071BC8FDEE6\\SQLEXPRESS;Initial Catalog=AmanoTest;User ID=sa;Password=india@123\");\n            SqlCommand cmd = new SqlCommand(\"select * from SiteMaster\", sconn);\n            SqlDataAdapter sda = new SqlDataAdapter(cmd);\n            DataTable dt = new DataTable();\n            sda.Fill(dt);\n            status cstat;\n            List&lt;status&gt; statlist = new List&lt;status&gt;();\n            foreach (DataRow dr1 in dt.Rows)\n            {\n                cstat = new status();\n                cstat.SiteId = dr1[0].ToString();\n                cstat.SiteName = dr1[1].ToString();\n                cstat.SiteStatus = dr1[2].ToString();\n\n                statlist.Add(cstat);\n\n\n            }\n            return statlist;\n        }\n    }\n}\n</code></pre>\n\n<p>My Controller Code is :</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing KendoGrid.Models;\nusing Kendo.Mvc.UI;\n\nnamespace KendoGrid.Controllers\n{\n    public class statusController : Controller\n    {\n        //\n        // GET: /status/\n\n        public ActionResult Index()\n        {\n            return View();\n        }\n        public ActionResult Site()\n        {\n            //List&lt;status&gt; status = status.GetStatus();\n            List&lt;status&gt; temp = status.StatusInfo();\n            ViewData[\"table\"] = temp;\n            return View();\n        }\n\n    }\n}\n</code></pre>\n\n<p>and my view (cshtml page) is :</p>\n\n<pre><code>@model KendoGrid.Models.status\n@using Kendo.Mvc.UI \n\n@*@{\n    Layout = null;\n }\n*@\n&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width\" /&gt;\n    &lt;title&gt;Site&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div&gt;\n        @(Html.Kendo().Grid(Model)()\n                .Name(\"Grid\")\n                .Columns(columns =&gt;\n                    {\n                        columns.Bound(p =&gt; p.siteID);\n                        columns.Bound(p =&gt; p.siteID);\n                        columns.Bound(p =&gt; p.siteID);\n                    })\n            .Pageable()\n            .Sortable()\n            .Scrollable()\n            .Filterable() \n            .DataSource(dataSource =&gt; dataSource        \n        .Ajax()\n        .ServerOperation(false)\n        )\n                )\n   &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>On executing it says :\nThe best overloaded method match for 'Kendo.Mvc.UI.Fluent.WidgetFactory.Grid(System.Data.DataTable)' has some invalid arguments</p>\n\n<p>Kindly Help ...\nThanx in advance </p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":40,"score":-3,"question_id":13139117,"title":"How to Pass data from one view to another in MVC","body":"<p>i am having details view which contains Id \nI want tht Id to be passed in another view where am creating the new Program having same Id as in details view </p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13138918,"title":"output cache and last modified header in asp.net mvc","body":"<p>I am quite confused between the utility of output cache and last modified header in mvc.</p>\n\n<p>What is the difference between these two?\nDo they have to be included both together? \nDoes using output cache automatically uses last-modified headers?\nDo I need to include last-modified header when I am already using output cache?</p>\n\n<p>Let`s say  I have new version of certain files installed, how can the browser load the updated files, without the user having to clear the cache or refresh his/her browser? Can the latter be achieved using outputcache? How? If not, then how I achieve the latter?    </p>\n\n<p>I am quite confused of how and when to use both.  Please, experts guide me through.</p>\n"},{"tags":["asp.net-mvc","mobile-development"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13122546,"title":"HttpContext.Request.Browser.IsMobileDevice not working on Production only?","body":"<p>I have a fairly standard MVC website Contact page that includes ReCaptcha to weed out bots.  All is working perfectly.  I added mobile pages to the site and due to visibility concerns currently wish to omit the recaptcha validation in the controller for the mobile pages only.  </p>\n\n<p>Locally this works perfectly, as I check for invalid captcha, and if NOT a mobile device I add error to the model and catch in Catch block.  If mobile don't worry about captcha, just validate the model.  </p>\n\n<pre><code>    [HttpPost, RecaptchaControlMvc.CaptchaValidator]\n    [ValidateAntiForgeryToken]\n    public ActionResult Submit(ContactFormViewModel viewModel, bool captchaValid, string captchaErrorMessage)\n    {\n        try\n        {\n            if (!captchaValid)\n                if (!HttpContext.Request.Browser.IsMobileDevice)\n                    ModelState.AddModelError(\"captcha\", captchaErrorMessage);\n\n            if (ModelState.IsValid)\n            {\n                if (viewModel.Save(viewModel))\n                    return RedirectToAction(\"Thanks\");\n            }\n            return View(\"Create\");\n        }\n        catch (Exception ex)\n        { //. . . error processing\n        }\n</code></pre>\n\n<p>As above, this works perfect locally against both Safari UserAgent set to iPhone, iPad, etc. as well as Opera emulator for a variety of phones.  Yet when I deploy to Production, I contantly get an error thrown on Submit with my Captcha error displayed.  To me this means the .IsMobileDevice test failed.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks in advance,\nDan</p>\n"},{"tags":["asp.net-mvc","webforms","sitemap"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":410,"score":1,"question_id":10262228,"title":"Dynamically Generating sitemap.xml","body":"<p>I've implemented a sitemap that is dynamically generated on the fly using the technique described <a href=\"http://www.blackbeltcoder.com/Articles/asp/dynamic-sitemaps-in-asp-net\" rel=\"nofollow\">here</a>.</p>\n\n<p>Since my site is a WebForms app, my sitemap URL ends up being www.mydomain.com/Sitemap.aspx.</p>\n\n<p>This is working well, and I can use search engine webmaster tools to tell them the URL to my sitemap. However, smaller search engines may not know where to find this file. It would be better if my dynamically generated sitemap could be at www.mydomain.com/sitemap.xml. This is the standard URL for a sitemap.</p>\n\n<p>What is the easiest way to generate the same sitemap data I do now but have it appear as the file sitemap.xml. Can I do it using routing, or do I need a custom HTTP handler?</p>\n\n<p>I'm using webforms but also have sites using ASP.NET MVC so I'm very interested in finding the best technique to do this in both platforms.</p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12963363,"title":"using routes.MapPath to accomadate missing URL oparameter","body":"<p>I have an MVC website which used to use URLs in the standard format of:  Controller/Action.</p>\n\n<p>Recently, I have changed it to:   Site/Controller/Action. </p>\n\n<p>The problem is, there are several links to my site out there which follow the old format, and I want to redirect them accordingly.</p>\n\n<p>for example: mydomain.com/Home/CustomerSearch now should go to mydomain.com/Online/Home/CustomerSearch</p>\n\n<p>whereas: mydomain.com/AffiliatesHome/CustomerSearch now should go to mydomain.com/Affiliate/AffiliatesHome/CustomerSearch</p>\n\n<p>How can I get it to handle the redirecting by putting in the extra routing, depending on the link they came in by?</p>\n\n<p>The current routing I am using is:</p>\n\n<p>routes.MapRoute(\n      \"Default\", // Route name\n      \"{site}/{controller}/{action}/{id}\",<br>\n      new {site=\"IS\", controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n   );</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13137760,"title":"Send Viewbag / List / Object as querystring mvc4 asp.net","body":"<p>I have simple link on which I want to send my <code>list&lt;obj&gt;</code> as querystring or parameter.</p>\n\n<p>So is it possible to send anything like object or list or viewbag as parameter to view ?</p>\n\n<p>how ?</p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13009730,"title":"Why does my dynamic viewdata not get listed in my partial view?","body":"<p>I have passed the value from controller </p>\n\n<pre><code>public ActionResult Index(int? Page, string sortcol=\"ID\", string sortorder=\"ASC\", string firstname = \"\", string lastname = \"\", string emailaddress = \"\")\n{\n     int TotalPages = 0;\n\n        var userlist = ur.GetUsersList(firstname, lastname, emailaddress, Page ?? 1, PageSize,out TotalPages, sortcol, sortorder);\n\n        ViewBag.PageIndex = 1;\n\n        ViewData[\"TotalPages\"] = TotalPages.ToString();\n\n        if (Request.IsAjaxRequest())\n        {\n            return PartialView(\"ListUsers\", userlist);\n        }\n        return View(userlist);\n    }\n</code></pre>\n\n<p>And in my parent view:</p>\n\n<pre><code>@Html.Partial(\"ListUsers\", Model, ViewData)\n</code></pre>\n\n<p>And in my child view (listusers):</p>\n\n<pre><code>@ViewData[\"TotalPages\"]\n</code></pre>\n\n<p>i cannot get the value of Viewdata totalpages. Why is it so?\nIt always returns zero.</p>\n"},{"tags":["ajax","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13138962,"title":"Ajax.BeginForm not working, and Response.IsAjaxRequest() is always false","body":"<p>I'm using MVC3\ni included the scripts</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" &gt;&lt;/script&gt; \n&lt;script type=\"text/javascript\" src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>in web.config </p>\n\n<pre><code>&lt;add key=\"ClientValidationEnabled\" value=\"true\" /&gt;\n&lt;add key=\"UnobtrusiveJavaScriptEnabled\" value=\"true\" /&gt;\n</code></pre>\n\n<p>this is my simply view \n    <p></p>\n\n<pre><code>  @using (Ajax.BeginForm(\"AjaxLogOn\", \"Account\", null, new AjaxOptions { HttpMethod = \"POST\" }))\n    {        \n        &lt;label&gt;Login&lt;/label&gt;\n        @Html.TextBox(\"UserName\")\n        &lt;br /&gt;\n        &lt;label&gt;Password&lt;/label&gt;\n        @Html.Password(\"Password\")\n        &lt;br /&gt;\n        @Html.CheckBox(\"RememberMe\") &lt;text&gt;Remember me &lt;/text&gt; \n        &lt;br /&gt;\n        &lt;input type=\"submit\" value=\"LogOn\" id=\"login\" /&gt;\n        &lt;br /&gt;\n        &lt;span id=\"logOnMessage\"&gt;&lt;/span&gt;                  \n    }\n&lt;/p&gt;\n</code></pre>\n\n<p>and action </p>\n\n<pre><code> public ActionResult AjaxLogOn(string UserName, string Password, bool? RememberMe, string returnUrl)\n    {\n    if (Request.IsAjaxRequest())\n    {                                        \n    }\n    return Json(result);\n    }\n</code></pre>\n\n<p>in this action IsAjaxRequest() method always returns false. And there isn't X-Requested-With:XMLHttpRequest element in request headers.\nWhat is the problem?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":6905,"score":8,"question_id":4970452,"title":"ASP.Net Chart Control with MVC3 Razor","body":"<p>I am using ASP.Net MVC3 and the MS chart controls to draw a pie chart.</p>\n\n<p>It seems I have to set an IMG control with the source set to an action controller.\nHowever this looses the possibility of being able to 'click' on the image and get a redirect to another page with the relevant segment that has been clicked.</p>\n\n<p>Can anyone help?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","jquery-plugins","jwysiwyg"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13136883,"title":"Jquery wysiwyg editor remove formatting plugin (rmFormat) not working","body":"<p>I've downloaded and implemented the following plugin:\n<a href=\"https://github.com/jwysiwyg/jwysiwyg\" rel=\"nofollow\">https://github.com/jwysiwyg/jwysiwyg</a></p>\n\n<p>Now I don't want users to be able to format the text entered into the plugin, just basic bold itallics and paragraphs. So I've <strong>tried</strong> to implement the <a href=\"https://github.com/jwysiwyg/jwysiwyg/blob/master/plugins/wysiwyg.rmFormat.js\" rel=\"nofollow\">rmFormat</a> plugin</p>\n\n<pre><code>$('textarea.wysiwyg').wysiwyg({\n        brIE: true,\n        rmUnusedControls: true,\n        controls: {\n            bold: { visible: true },\n            italic: { visible: true },\n            h3: { visible: true },\n            removeFormat: { visible: true }\n        },\n        rmUnwantedBr: false,\n        plugins: {\n            rmFormat: {\n                rmMsWordMarkup: true,\n                enabled:true\n            }\n        }\n    });\n</code></pre>\n\n<p>But well it just doesn't work! anyone any experience of this? If not anyone got any other suggestions of controls like this that allow very simple markup control only? </p>\n\n<p>Site is <strong>MVC</strong> btw</p>\n\n<p>Here's a fiddle</p>\n\n<p><a href=\"http://jsfiddle.net/KjVEt/69/\" rel=\"nofollow\">http://jsfiddle.net/KjVEt/69/</a></p>\n"},{"tags":["c#","asp.net-mvc","mvc","razor","telerik-grid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":43,"score":-2,"question_id":13098543,"title":"how to bind the dynamic data table in mvc grid asop.net","body":"<p>I need to bind the dynamic data table in mvc grid. Give some code, samples and examples. for the dynamic data binding\n Thank you </p>\n"},{"tags":["asp.net-mvc","mvc","model-binding"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13110728,"title":"Use single view model for details, edit and list","body":"<p>My view model looks something like this:</p>\n\n<pre><code>public class CarViewModel {\n    public CarModel Car { get; set; }\n    public List&lt;CarModel&gt; Cars { get; set; }\n}\n</code></pre>\n\n<p><code>CarModel</code> looks like:</p>\n\n<pre><code>public class Car() {\n    public string Make { get; set; }\n    public string Model { get; set; }\n    . . .\n}\n</code></pre>\n\n<p>My goal is to only have a single view model that I can use for both my list views and single views. For the list view, I would hydrate the Cars list and use that within the view, while ignoring the single Car entity.</p>\n\n<p>For a details view, it would be the opposite. My controller would hydrate the single Car entity, and the view would use that and ignore the List.</p>\n\n<p>This is partially working, but the model binding is weak.</p>\n\n<p>DRY (don't repeat yourself) and SOC/SRP (separation of concerns/single responsibility principal) seem to be conflicting here. What's the best way to handle both a list view plus a details view? I have a feeling the answer is to create duplicate view models, but I don't want to duplicate code if I can help it.</p>\n"},{"tags":["c#","javascript","asp.net-mvc","radio-button","form-validation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13123859,"title":"MVC3 radio buttons validation","body":"<p>I have a question about radio buttons and checks.</p>\n\n<p>So in first, in my views part I have a textbox with a login value. Between this textbox and the submit button, I have 5 radio buttons. Each of these rb referenced a property in my ViewModel.</p>\n\n<p>So here is the code.\nMy ViewModel with the properties:</p>\n\n<pre><code>public class DeleteUAInfosViewModel\n{\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserLeave\n    {\n        get { return UserAccountResources.UserLeave; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserTransfer\n    {\n        get { return UserAccountResources.UserTransfer; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserDetachment\n    {\n        get { return UserAccountResources.UserDetachment; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserRetirement\n    {\n        get { return UserAccountResources.UserRetirement; }\n    }\n\n    [Display(Name = \"UserAccountDeleteInfos\", ResourceType = typeof(UserAccountResources))]\n    public string UserStatus\n    {\n        get { return UserAccountResources.UserStatus; }\n    }\n}\n</code></pre>\n\n<p>My IndexViewModel where I link the DeleteUAInfosViewModel:</p>\n\n<pre><code>public class IndexViewModel\n{\n        [Display(Name = \"DeleteUAInfos\", ResourceType = typeof(UserAccountResources))]\n        public DeleteUAInfosViewModel DeleteUAInfosGroup { get; set; }\n\n        public IndexViewModel()\n        {\n            DeleteUAInfosGroup = new DeleteUAInfosViewModel();\n        }\n\n        ...\n}\n</code></pre>\n\n<p>My partial View with the declaration of rb:</p>\n\n<pre><code>@model MyPath.UserAccount.DeleteUAInfosViewModel\n\n&lt;div id=\"UserDeleteInfosField\"&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserLeave)\n        @UserAccountResources.UserLeave\n        @Html.HiddenFor(x =&gt; x.UserLeave)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserTransfer)\n        @UserAccountResources.UserTransfer\n        @Html.HiddenFor(x =&gt; x.UserTransfer)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserDetachment)\n        @UserAccountResources.UserDetachment\n        @Html.HiddenFor(x =&gt; x.UserDetachment)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserRetirement)\n        @UserAccountResources.UserRetirement\n        @Html.HiddenFor(x =&gt; x.UserRetirement)   \n    &lt;/p&gt;\n    &lt;br /&gt;\n    &lt;p&gt;\n        @Html.RadioButton(\"RbDeleteGroup\", Model.UserStatus)\n        @UserAccountResources.UserStatus\n        @Html.HiddenFor(x =&gt; x.UserStatus)   \n    &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I call this partial view in another view with this line:</p>\n\n<pre><code>@Html.Partial(\"_DeleteUAInfos\", Model.DeleteUAInfosGroup)\n</code></pre>\n\n<p>Currently I performed a check if the login is null or empty.</p>\n\n<p>But now I need to include the check of the radio buttons.\nExample: I want to verify if the login is correct AND at least one rb is checked (and retrieved the value).</p>\n\n<p>In another words: I want to integrate the check of the radio buttons with the check of the login value (in my case the login part is already done).</p>\n\n<p>So can you help me with that ?</p>\n\n<p>Thanks in advance !</p>\n\n<p>Ars_n</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":38,"score":-1,"question_id":13137103,"title":"Making a text box in mvc readable from model","body":"<p>I have a model which I have binded with a view having text boxes. Now their are certain text boxes which i want to make read only and that to from the model class.\nSo any suggestions how can i make them read only from the  model class.</p>\n"},{"tags":["c#","javascript","asp.net-mvc","linq","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13129475,"title":"date format not correct when pulling from database using linq query","body":"<p>I want to pull a date from db and display it in a telerik ddl. I am able to pull the date and display it, but cant get the formatting to work. The date is display like this:</p>\n\n<pre><code>/Date(13496724000000)/\n</code></pre>\n\n<p>Here is my Controller action to pull the date from db:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Date(int id)\n    {\n        var dates = (from p in db.vwdb.Where(u =&gt; u.Id == id)\n                           group p by p.Date into g\n                    select g.Key).ToList();\n\n        return Json(new { data = Convert.ToDateTime(weeks.Min())});\n    }\n</code></pre>\n\n<p>Here is my jquery to display it in ddl:</p>\n\n<pre><code>function populateDate() {\n    var link = '/Users/Date';\n    var dataSource = [];\n    $.ajax({\n        type: 'POST',\n        url: link,\n        data: { id: id },\n        dataType: 'json',\n        success: function (result) {\n                var dateOf = result.data;\n                dataSource.push({ Text: dateOf , Value: dateOf });\n            $(\"#Date\").data(\"tDropDownList\").dataBind(dataSource);\n        },\n        error: function (result) {\n            alert(result.message);\n        }\n    });\n};\n</code></pre>\n\n<p>I want to display the date in this format: \"MM/DD/YYYY\" \ninstead of  \"/Date(13496724000000)/\"</p>\n\n<p>Any help is much appreciated.</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-viewmodel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":13132719,"title":"How to use ReadOnly data annotation on condition?","body":"<p>I want to apply ReadOnly data annotation on my ViewModel properties. But this need to be checked and should be applied, based upon some condition. </p>\n\n<p>For example if I have some field mapping saved into my Database table and then I want to check on the ViewModel properties, whether this need to be ReadOnly or Editable. </p>\n\n<p>I appreciate if you can share your thought here.</p>\n"},{"tags":["ajax","asp.net-mvc","menu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13116925,"title":"Avoid re-display of menu using MVC","body":"<p>My team is creating an MVC4 application which has an upper menu structure that contains menu items specific for the currently logged-in user, and displays the content for the selected menu item below. The menus are displayed in a partial view \"_MainMenu\" and the MainMenuController Index action is responsible for getting the menu data from the database and returning the menu partial view. The main layout \"_Layout\" renders the menu by calling @Html.Action(\"Index\", \"MainMenu\").</p>\n\n<p>We want to avoid hitting the database to get the menu structure data every time the page is refreshed, and we also ideally want to avoid any visible reload of the menu structure when a different menu item is selected.</p>\n\n<p>I've been looking into AJAX, and I've implemented something where selecting a new menu item will load the content for that item below the menu by replacing a div with ID=\"mainContent\" with the content as a partial view (this div lives on the loaded view \"MainContent\"). In this way, the menu is never re-loaded and the page never refreshes completely (only the different partial content views are swapped in and out as different menu items are selected).</p>\n\n<p>This solution works, but I'm not sure if it's really best practice, or if there's a better solution involving caching. One of the problems with the AJAX solution is the URL never changes from \"http://MySite/MainContent\". This means that clicking the Back button on the browser doesn't work as expected, and also hitting F5 to refresh the browser page loses the currently displayed page. The refresh issue can probably be resolved by remembering the selected menu item, but I'm still not convinced this isthe way AJAX was intended to be used.</p>\n\n<p>Can someone please tell me if they think caching would be a better solution for this scenario based on their experience.</p>\n"},{"tags":["asp.net-mvc","razor","virtualbox","windows-server-2008-r2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13124094,"title":"What is the best way to set up my intranet server for MVC 4?","body":"<p>I have recently started programming with Asp.Net MVC 4. I have downloaded Visual Studio 2010 from Microsoft DreamSpark and a \"Standard\" Microsoft Server 2008 R2. Now I installed the Server into a VirtualBox on Promiscuous Network (thus allowing it to talk to my whole network) and next I want to use it to test my applications.</p>\n\n<p>Can you point me to good resources that tell me how to set up the server best for this?</p>\n\n<p>Thank you so much for your help.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":36,"score":4,"question_id":13118612,"title":"Difference between \"Response.PermanentRedirect\" and \"Delete Verb in MVC\"","body":"<p>When using \"Response.PermanentRedirect\"</p>\n\n<p>It will return back Http Response Code 301 which means permanent redirection to diferent location. This may not be any value for end user using the browser but for search engines it will help the search engines not to index permanently redirected urls.</p>\n\n<p><strong>Question</strong> - Does <code>Delete Verb</code> in MVC perform the same function ?</p>\n\n<hr>\n\n<p><strong>Post</strong> a new entity as an addition to a URI. <code>Put</code> replaces an entity that is identified by a URI.</p>\n\n<p><strong>Question</strong> - When performing the insert/update, the information is being submitted in both cases. Does it means in case of Insert, <code>Post verb</code> should be used and in case of Update <code>Put verb</code> should be used ?</p>\n"},{"tags":["c","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":46,"score":-5,"question_id":13128000,"title":"Gravar o cdigo Id de uma lista (Mvc3 / C#)","body":"<p>I created a simple list with id, name.\nI filled her, but when she step into the DropDownList and save the command system does not write the code in the database.</p>\n\n<p>I searched a lot but still do not understand how it works to write the code in the database.</p>\n\n<p>Controller:</p>\n\n<pre><code>List&lt;Myclass&gt; list = new List&lt;Myclass&gt;();\n\n            foreach (var item in b) // b and an array of data \n            {\n                Myclass obj = new Myclass();\n                obj.Id = Int32.Parse(item.Value);\n                obj.Name = item.Text;\n                list.Add(obj);\n            }\n\n            ViewBag.status = list;\n</code></pre>\n\n<p>Create.cshtml :</p>\n\n<pre><code>@Html.DropDownList(\"ddlStatus\", new SelectList(ViewBag.status,\"Id\",\"Name\"))\n</code></pre>\n\n<p>Everything is okay in the list</p>\n\n<p>What I do not understand is why even indicating he did not record the ID in the database</p>\n\n<p>Sincerely,</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13128589,"title":"How do I create an email template within my application","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4368815/razor-views-as-email-templates\">Razor views as email templates</a>  </p>\n</blockquote>\n\n\n\n<p>I am sending out an email to the user from within my service of my website. </p>\n\n<p>I want to format this so that it shows nice and a specific way.</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>&lt;table bgcolor=\"#FFE680\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td width=\"100%\" height=\"51\" valign=\"middle\"&gt;&lt;h1&gt; &lt;strong&gt;[COMPANY] User ID Reminder &lt;/strong&gt;&lt;/h1&gt;&lt;/td&gt;\n      &lt;td align=\"right\" valign=\"top\" width=\"8\"&gt;&lt;img alt=\"\" width=\"8\" height=\"8\" align=\"top\" /&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td align=\"left\" valign=\"top\" width=\"100%\"&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n              &lt;tbody&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"&gt;\n                    &lt;tbody&gt;\n                      &lt;tr&gt;\n                        &lt;td colspan=\"1\" align=\"left\"&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                      &lt;tr&gt;\n                        &lt;td align=\"left\" valign=\"top\" width=\"100%\"&gt;&lt;p&gt; &lt;br /&gt;\n                          Dear [USERNAME], &lt;/p&gt;\n                          &lt;p&gt; In response to your request to be reminded of your User ID, please   find below the information we have on file for you. If you didn't   submit  this request, ignore this email. &lt;/p&gt;\n                          &lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n                            &lt;tbody&gt;\n                                  &lt;tr&gt;\n                                    &lt;td&gt;Your User ID is: &lt;/td&gt;\n                                    &lt;td&gt;[USERNAME]&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                  &lt;tr&gt;\n                                    &lt;td&gt;Your registered email address is: &lt;/td&gt;\n                                    &lt;td&gt;[EMAIL]&lt;/td&gt;\n                                  &lt;/tr&gt;\n                              &lt;/tbody&gt;\n                            &lt;/table&gt;\n                          &lt;p&gt; \n                            If you have forgotten your password, you can request it here.&lt;br /&gt;\n                          &lt;/p&gt;\n                          &lt;p&gt; \n                            Thank you,&lt;br /&gt;[COMPANY]\n                          &lt;/p&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                      &lt;/tbody&gt;\n                    &lt;/table&gt;&lt;/td&gt;\n                  &lt;/tr&gt;\n                &lt;/tbody&gt;\n              &lt;/table&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n          &lt;/tbody&gt;\n      &lt;/table&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Now my question isn't about the looks of the email but how do I put this as the body of my email while populating the appropriate fields?</p>\n\n<p>I put it in resources as a string and I figured I'd just do a replace of the specific [fields].  This starting becoming tedious and seemed sloppy:</p>\n\n<pre><code>var body = SuburbanHUB.Properties.Resources.ForgotPasswordEmailBody.Replace(\"[USERNAME]\", username).Replace(\"[EMAIL]\")...\n</code></pre>\n\n<p>I'm sure there is a better way of doing this but I have not the experience.</p>\n\n<p><strong>=== CLARIFICATION ===</strong></p>\n\n<p>I am using razor to call a WCF service written in C#. The service that is being called is where the email is being sent from and not the view. I am using Razor with MVC with C# as the underlying code.</p>\n"},{"tags":["asp.net-mvc","xunit.net","visual-web-developer-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13131117,"title":"Add xUnit test project to an existing Visual Web Developer 2010 express MVC application","body":"<p>Maybe it's very easy but I'm trying to add support for xUnit in Visual Web Developer 2010 Express. I followed this <a href=\"http://jayhollingum.blogspot.ca/2011/05/vwd-express-2010-unit-tests-with-xunit.html\" rel=\"nofollow\">tutorial</a> on how to install everything but the main problem is that this tutorial only show how to add a test project to a <strong>new project</strong> and not to an existing one. When I do \"Add New Project\", there is not \"xunit\" or \"test project\" anywhere...</p>\n\n<p>Anybody know how or can point me to a good tutorial?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13130955,"title":"Pass callback function to partial view mvc","body":"<p>I have a partial view that is used more than once on my site.  Depending on where you are after you \"Save\" the record it should do something different. </p>\n\n<p>So I was thinking of passing a callback function to the controller as a string and then pass it back to the partial view.</p>\n\n<p>Is there a better way of doing this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","dhtmlx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13136242,"title":"dhtmlxScheduler with mvc 3","body":"<p>I have been trying to implement DhtmlxScheduler Standard Edition v.3.5 in to my mvc3 project.\nFollowing the tutorial at <a href=\"http://www.dhtmlx.com/blog/?p=639\" rel=\"nofollow\">http://www.dhtmlx.com/blog/?p=639</a> </p>\n\n<p>The tutorial is in mvc2 I believe and I am having a bit of trouble following it.</p>\n\n<p>Here is my view page;</p>\n\n<pre><code>@*@Page Language=\"C#\" Inherits=\"System.Web.Mvc.ViewPage&lt;dynamic&gt;\";*@\n\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" &gt;\n    &lt;head runat=\"server\"&gt;\n    &lt;title&gt;Index&lt;/title&gt;\n\n    &lt;script src=\"@Url.Content(\"~/Scripts/dhtmlxscheduler.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;link href=\"@Url.Content(\"~/Scripts/dhtmlxscheduler.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt; \n\n    &lt;style type=\"text/css\"&gt;\n        html, body\n        {\n            height:100%;\n            padding:0px;\n            margin:0px;\n        }\n    &lt;/style&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function init() {\n            scheduler.init(\"scheduler_here\", new Date(2010, 6, 1), \"month\");\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body onload=\"init()\"&gt;\n    &lt;div id=\"scheduler_here\" class=\"dhx_cal_container\" style='width:100%; height:100%;'&gt;\n        &lt;div class=\"dhx_cal_navline\"&gt;\n            &lt;div class=\"dhx_cal_prev_button\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_next_button\"&gt;&amp;nbsp;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_today_button\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_date\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"day_tab\" style=\"right:204px;\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"week_tab\" style=\"right:140px;\"&gt;&lt;/div&gt;\n            &lt;div class=\"dhx_cal_tab\" name=\"month_tab\" style=\"right:76px;\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"dhx_cal_header\"&gt;\n        &lt;/div&gt;\n        &lt;div class=\"dhx_cal_data\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I run this page with out the style-sheet it loads the calender but it is all over the place, so I add the CSS and them I get nothing??</p>\n"},{"tags":["jquery","asp.net-mvc","iis"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13133589,"title":"ASP.NET MVC site behaves different when accessed remotely","body":"<p>I have deployed my MVC site on IIS server. If I access it using <code>http://localhost</code> in URL it works fine.\nBut if I use machine name/ ip address in the URL, some of the functions are not working properly. I wonder why this is happening. Following are some of the things I am facing </p>\n\n<ol>\n<li>I have used JQuery Tab in a dialog box. The dialog box doesn't submit data if the site is accessed remotely.</li>\n<li>I have used JQuery Month navigator. I could see it is submitting correct month and year during HttpPost controller, but the controller action doesn't redirect according to posted data.</li>\n</ol>\n\n<p>I am clueless on why its behaving like this</p>\n\n<pre><code>/* Some code for reference */\n\n@using (Html.BeginForm())\n{    \n    .....\n        &lt;input type=\"submit\" value=\"Save\" class=\"buttonSave\" onclick=\"return     ConfirmSave();\" /&gt;                        \n    &lt;/div&gt; \n}\n\nfunction ConfirmSave() {\n    return confirm('You have selected to copy this entry.\\n\\n This action cannot be rolled back, and each created entry will need to be deleted independently. Are you sure you want to continue?');\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","mvc-editor-templates","defaultmodelbinder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13124751,"title":"MVC view model with a list property that contains complex members","body":"<p>I have a model that looks like the following</p>\n\n<pre><code>class ContainerClass\n{\n    string Name { get; set;}\n    Guid Id { get; set; }\n\n    [UIHint(\"CustomSelectBox\")]\n    List&lt;Member&gt; Members { get; set; }\n}\n\nclass Member\n{\n    string Name { get; set;}\n    Guid Id { get; set; }\n    string SomeProperty { get; set;}\n}\n\nclass DerivedFromMember: Member\n{\n   string AnotherProperty { get; set;}\n}\n</code></pre>\n\n<p>If the controller action is </p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(ContainerClassmodel)\n    {\n         return null;\n    } \n</code></pre>\n\n<p>Can anyone tell why the default model binder can't map the list members from  tag i.e.</p>\n\n<pre><code>&lt;select id=\"Members\" name=\"Members\" multiple=\"multiple\" &gt;\n &lt;option id=\"Members[0].Id\" selected=\"selected\" name=\"Members[0].Id\" value=\"9b1ea01c-6dad-470d-a6c1-a0f5009ac069\"&gt;Member One&lt;/option&gt;\n&lt;option id=\"Members[1].Id\" selected=\"selected\" name=\"Members[1].Id\" value=\"adf1dbda-9020-45b7-abd7-a0f5009a9b30\"&gt;Member two&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>Please note that all values are selected.</p>\n\n<p>whereas the following works</p>\n\n<pre><code> &lt;input type=\"hidden\" name=\"Members[0].Id\" value=\"9b1ea01c-6dad-470d-a6c1-a0f5009ac069\" /&gt;\n &lt;input type=\"hidden\" name=\"Members[1].Id\" value=\"adf1dbda-9020-45b7-abd7-a0f5009a9b30\" /&gt;\n</code></pre>\n\n<p>To be honest I know why it doesn't work :( because if I look at http headers incase of select the submitted data is not enough for the default model binder. </p>\n\n<pre><code>Members:9b1ea01c-6dad-470d-a6c1-a0f5009ac069\nMembers:adf1dbda-9020-45b7-abd7-a0f5009a9b30\n</code></pre>\n\n<p>Can anyone tell what to change inside  tag so that the submited data is</p>\n\n<pre><code>Members[0].Id:9b1ea01c-6dad-470d-a6c1-a0f5009ac069\nMembers[1].Id:adf1dbda-9020-45b7-abd7-a0f5009a9b30\n</code></pre>\n"},{"tags":["c#",".net","asp.net-mvc","asp.net-mvc-3","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13136618,"title":"Display Partial View with Json Result Data In Asp.Net MVC3","body":"<p>i have a homecontroller with the following action method;</p>\n\n<pre><code>[HttpPost]\n[Authorize(Roles = \"Admin\")]\npublic JsonResult ProjectAdd(PortfolioViewModel model, int[] categories)\n{\n    using (PortfolioManager pm = new PortfolioManager())\n    {\n        using (CategoryManager cm = new CategoryManager())\n        {\n            if (ModelState.IsValid)\n            {\n                bool status = pm.AddNewProject(model, categories);\n                if (status)\n                {\n                    // ViewBag.Message = \"Inserted Sucessfully :)\";\n                }\n            }\n        }\n        return Json(pm.GetAllProjects());\n    }\n}\n</code></pre>\n\n<p>my view is called \"ProjectAdd.CSHTML\" with following content;</p>\n\n<pre><code>    &lt;table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n        &lt;thead&gt;\n           // the heading goes here\n        &lt;/thead&gt;\n        &lt;tbody id=\"projectsUpdate\"&gt;\n            @Html.Partial(\"_ProjectsPartial\", ViewBag.ProjectsList as IEnumerable&lt;MVC3Resume.Models.PortfolioViewModel&gt;)\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n&lt;p&gt;\n\n    @using (Ajax.BeginForm(\"projectAdd\", \"home\", new AjaxOptions { \n        LoadingElementId = \"loading\", \n        LoadingElementDuration = 2000, \n        Url = Url.Action(\"projectAdd\", \"home\"), \n        OnSuccess=\"OnSucess\",\n    }, \n        new { enctype = \"multipart/form-data\" }))\n    {    \n        @Html.ValidationSummary(true)\n        &lt;div id=\"SucessMessage\"&gt;&lt;/div&gt;\n        &lt;fieldset&gt;\n            &lt;legend&gt;Add New Project&lt;/legend&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(model =&gt; model.ProjectHeading)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.EditorFor(model =&gt; model.ProjectHeading)\n                @Html.ValidationMessageFor(model =&gt; model.ProjectHeading)\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @Html.LabelFor(m =&gt; m.Image)\n            &lt;/div&gt;\n            &lt;div class=\"editor-field\"&gt;\n                @Html.TextBoxFor(m =&gt; m.Image, new { type = \"file\" })\n                @Html.ValidationMessageFor(model =&gt; model.Image)\n            &lt;/div&gt;\n            &lt;div class=\"editor-label\"&gt;\n                &lt;label for=\"categories\"&gt;Categories&lt;/label&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"editor-label\"&gt;\n                @foreach (var item in ViewBag.Categories as IEnumerable&lt;MVC3Resume.Models.CategoryViewModel&gt;)\n                {\n                    &lt;input type=\"checkbox\" name=\"categories\" value=\"@item.CategoryId\" /&gt;\n                    @item.CategoryName\n                }\n\n            &lt;/div&gt;\n            &lt;p&gt;\n                &lt;input type=\"submit\" value=\"Create\" class=\"submit\" /&gt;\n            &lt;/p&gt;\n        &lt;/fieldset&gt;\n    }\n&lt;/p&gt;\n</code></pre>\n\n<p>my javascript OnSucess function looks like;</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function OnSucess(resultData) {\n        // all logic goes here\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>SO, my question is how do i get the json result data and populate it in partial view?</strong>\nfollowing is my result json data;</p>\n\n<pre><code>[{\"ProjectId\":1,\"ProjectHeading\":\"heading\",\"ProjecctUrl\":\"url\",\"ProjectLongDescription\":\"descripitn\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_140_1.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":2},{\"ProjectId\":2,\"ProjectHeading\":\"heading 2\",\"ProjecctUrl\":\"url2\",\"ProjectLongDescription\":\"description 2\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_140_2.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":1},{\"ProjectId\":3,\"ProjectHeading\":\"teasting heading\",\"ProjecctUrl\":\"test url\",\"ProjectLongDescription\":\"description\",\"ProjectShortDescription\":\"...\",\"PromoFront\":false,\"Thumbnail\":null,\"ProjectThubmnail\":\"folio_preview640.jpg\",\"Image\":null,\"ProjectImage\":\"folio_preview640.jpg\",\"CategoryId\":1}]\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework","linq-to-entities","entity"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3025,"score":1,"question_id":1077342,"title":"Entity Framework - Update entity with child properties","body":"<p>I have an entity that has one child and I need to update it, but, in the TryUpdateModel  method, it does not accept an strong typed object (accepts only a FormCollection), and when I try to update it, I get the following error.</p>\n\n<p>{\"A relationship is being added or deleted from an AssociationSet 'FK__SG_Usuari__ID_Si__534D60F1'. With cardinality constraints, a corresponding 'SG_Usuario' must also be added or deleted.\"}</p>\n\n<p>The problem is that I can't load in the formcollection the child property, only an id, but not the entire object.</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13136020,"title":"MVC Why is this dropdown mandatory?","body":"<p>I have this dropdown in my view (actually I have many of these in a loop)</p>\n\n<pre><code>@Html.DropDownListFor(m =&gt; m.SelectedAttributeValueIds[i], Model.AttributeValuesList[Convert.ToInt32(type.Value)], \"Select a value\")\n</code></pre>\n\n<p>The relevant parts of the model are</p>\n\n<pre><code>public IDictionary&lt;int, List&lt;SelectListItem&gt;&gt; AttributeValuesList { get; set; }\npublic List&lt;int&gt; SelectedAttributeValueIds { get; set; }\n</code></pre>\n\n<p>The dropdowns above contains the correct list of values.  If I select one of the values and submit then the value selected is correctly posted and correctly saved into the SelectedAttributeValueIds list.  </p>\n\n<p>Now the problem is that if I do not select a value from one or more of these dropdowns my ModelState.IsValid is false in my post action method.  Looking at the error list, the reason is that </p>\n\n<blockquote>\n  <p>\"a value is required\"</p>\n</blockquote>\n\n<p>Why are the dropdowns mandatory?  I'd like them to be optional.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks,</p>\n\n<p>Sachin</p>\n"},{"tags":["c#","asp.net","sql","asp.net-mvc","repository"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13135550,"title":"Populate ViewModel with multiple objects","body":"<p>Considering this ViewModel</p>\n\n<pre><code>public class DocumentReferenceViewModel\n{\n    public int IdDocumentReference { get; set; }\n    public string DocumentTitle { get; set; }\n    public string PageNbr { get; set; }\n    public string Comment { get; set; }\n}\n</code></pre>\n\n<ul>\n<li>The DocumentTitle is a property of a <strong>Document</strong> object</li>\n<li>The <strong>IdDocumentReference</strong> and <strong>PageNumber</strong> are properties of\nDocumentReference object</li>\n</ul>\n\n<p><strong>Document</strong> and <strong>DocumentReference</strong> are linked with a propertie <em>IdDocument</em></p>\n\n<ul>\n<li>I have a repository which can return <strong>Document</strong> objects</li>\n<li>I have a repository which can return <strong>DocumentReference</strong> objects</li>\n</ul>\n\n<hr>\n\n<pre><code>public class DocumentReference\n{\n    public int IdDocumentReference;\n    public string PageNbr { get; set; }\n    public string Comment { get; set; }\n}\n\n\npublic class Document\n{\n    public int IdDocument;\n    public string DocumentTitle { get; set; }\n}\n</code></pre>\n\n<p>How can I bind the ViewModel from theses 2 objects (tables) without looping on the DocumentReference and for each one querying the database to retrieve de DocumentTitle ?</p>\n\n<p>ps : I am not using EF, I have repositories calling handwritten Stored Procedures</p>\n"},{"tags":["jquery","asp.net-mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":13135526,"title":"In what scenarios we need to use jQuery in mvc?","body":"<p>Being a beginner to MVC, still I am unable to understand in what scenarios we need to use jQuery, the relation between jQuery and MVC.\nSo far I noticed that we use jQuery a lot in MVC and without having knowledge in jQuery its not possible to learn MVC.</p>\n"},{"tags":["asp.net-mvc","jqgrid","knockout.js"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":149,"score":1,"question_id":12435522,"title":"jqgrid+knockout","body":"<p>I managed to run knockout js. example: <a href=\"http://jsfiddle.net/brux88/9fzG4/\" rel=\"nofollow\">http://jsfiddle.net/brux88/9fzG4/</a> . now I would like to replicate the same thing using jqGrid, but I can not run the calculations in real time. can someone help me? I also tried without using knockout, but only using jqGrid I do not work the same.example: <a href=\"http://jsfiddle.net/brux88/yGJcy/\" rel=\"nofollow\">http://jsfiddle.net/brux88/yGJcy/</a></p>\n"},{"tags":["javascript","jquery","asp.net-mvc","telerik"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":184,"score":0,"question_id":11210976,"title":"Telerik: get upload file's name from javascript","body":"<p>I have a Telerik file selector for uploading like this:</p>\n\n<pre><code>&lt;%= Html.Telerik().Upload()\n            .Name(\"attachments\")\n    %&gt;\n</code></pre>\n\n<p>then in javascript, I want to check if the filename is in correct format. But I don't know how to get the file name out of the upload box. This </p>\n\n<pre><code>var upload = $find(\"attachments\");\n</code></pre>\n\n<p>gives me null. And this</p>\n\n<pre><code>var upload = $get(\"attachments\");\n</code></pre>\n\n<p>gives me a strange object that I don't know how to move on with. Anyone has experience with this?</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api","breeze"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12961222,"title":"How to do paging in WebAPI MVC 4 using BreezeJs","body":"<p>I have a WebApi controleller, and added the filters from BreezeJs to support queryable requests like $orderby=DateAdded&amp;$top=8.</p>\n\n<pre><code>  GlobalConfiguration.Configuration.Filters.Add(\n      new Breeze.WebApi.ODataActionFilter());\n</code></pre>\n\n<p>everything works fine. This only give 8 results. What do i need to do to add such the total count is also returned with the result?</p>\n\n<p>UPDATE</p>\n\n<pre><code> public class ODataHandler : DelegatingHandler\n  {\n      protected override Task&lt;HttpResponseMessage&gt; SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)\n      {\n          return base.SendAsync(request, cancellationToken).ContinueWith(\n            task =&gt;\n            {\n                var response = task.Result;\n\n                if (ResponseIsValid(response) &amp;&amp; ShouldInlineCount(request))\n                {\n                    object responseObject;\n                    response.TryGetContentValue(out responseObject);\n\n                    if (responseObject is IQueryable)\n                    {\n                        var renum = responseObject as IEnumerable&lt;object&gt;;\n\n                        if (renum != null)\n                        {\n                            response = request.CreateResponse(HttpStatusCode.OK, new ODataMetadata&lt;object&gt;(renum, renum.Count()));\n                        }\n                    }\n                }\n\n                return response;\n            });\n      }\n      private bool ShouldInlineCount(HttpRequestMessage request)\n      {\n\n        var queryParams = request.RequestUri.ParseQueryString();\n\n        var inlinecount = queryParams[\"$inlinecount\"];\n\n        return string.Compare(inlinecount, \"allpages\", true) == 0;\n\n       }\n\n      private bool ResponseIsValid(HttpResponseMessage response)\n      {\n          if (response == null || response.StatusCode != HttpStatusCode.OK || !(response.Content is ObjectContent)) return false;\n          return true;\n      }\n  }\n</code></pre>\n\n<p>This is what i came up with so far. But problem is that the filter have already added teh TOP 8 to the request before the handler kicks in. So count will be 8 and not total.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","learn"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":66,"score":-3,"question_id":13119710,"title":"Best ways learn mvc views","body":"<p>mvc concepts controller and model but I'm a little bit confused about creating views, how can I easily learn this? Is there any standard procedure?</p>\n"},{"tags":["asp.net-mvc","data-binding"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13129807,"title":"MVC Binding a collection of things to different dropdowns","body":"<p>I have a database table called <code>ItemAttributeLinks</code> and a collection of these too</p>\n\n<pre><code>Collection&lt;ItemAttributeLink&gt; ItemAttributeLinks\n</code></pre>\n\n<p>Now, in my view I do this in order to bind n dropdowns to the n items in this collection.  This does not work.  The values in <code>m.Item.ItemAttributeLinks</code> are always null.  The values in the dropdowns appear and are all correct, the issue is that the selected values, don't bind on postback.</p>\n\n<pre><code>@{\n            int i = 0;\n            foreach (var type in @Model.AttributeTypes)\n            {\n                &lt;section&gt;\n                    &lt;label&gt;@type.Text&lt;/label&gt;\n                    &lt;div&gt; @Html.DropDownListFor(m =&gt; m.Item.ItemAttributeLinks[i] ,Model.AttributeValuesList[Convert.ToInt32(type.Value)], \"Select a value\")&lt;/div&gt;\n                &lt;/section&gt;\n                i++;\n            }  \n</code></pre>\n\n<p>The ItemAttributeLink table, incidentally, contains an int id, an int foreign key attributevalueid and an int foreign key ItemId.</p>\n\n<p>What is the correct way to bind multiple dropdowns in this way?\n            }</p>\n"},{"tags":["jquery","asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13131521,"title":"JQuery Selector best practice","body":"<p>When exposing a jquery script that will be used across multiple pages is it preferred to base the selector on an id or css class?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13118982,"title":"EF: many-to-many field always null","body":"<p>when i try to save this model, the <code>menu.Roles</code> field is always <code>null</code>, and save change method doesn't change the <code>Roles</code> field</p>\n\n<p>tables are <code>Menu</code>, <code>RoleMenu</code> and <code>Role</code></p>\n\n<p>so, i have a pair <strong>many-2-many</strong> models:</p>\n\n<p>Menu has a <code>Roles</code> filed<br>\nRole has a <code>Menus</code> fields</p>\n\n<p>action method:</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult Edit(Menu menu, IEnumerable&lt;int&gt; RoleIDs)\n    {\n        if (ModelState.IsValid)\n        {\n            var roles = _db.UserRoles.Where(rl =&gt; RoleIDs.Contains(rl.Id)).ToList();\n\n            menu.Roles = new List&lt;UserRole&gt;();\n            menu.Roles.AddRange(roles);\n\n            _db.Entry(menu).State = EntityState.Modified;\n            _db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n        ViewBag.ParentMenuId = new SelectList(_db.Menus, \"Id\", \"Name\", menu.ParentMenuId);\n        ViewBag.RoleIDs = new SelectList(_db.UserRoles.ToList(), \"Id\", \"Name\");\n        return View(menu);\n    }\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>//...other VS auto generated fields...\n&lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Roles, \"Roles\")\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n        @Html.ListBox(\"RoleIDs\")\n        @Html.ValidationMessageFor(model =&gt; model.Roles)\n&lt;/div&gt;\n&lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>mapping:</p>\n\n<pre><code>            modelBuilder.Entity&lt;Role&gt;()\n             .HasMany(role =&gt; role.Menus)\n             .WithMany(menu =&gt; menu.Roles)\n             .Map(m =&gt;\n              m.MapLeftKey(\"RoleId\").\n                 MapRightKey(\"MenuId\").\n                 ToTable(\"RoleMenu\"));\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":190,"score":1,"question_id":6946829,"title":"MVC3 Client validation using ViewModels","body":"<p>I'm experimenting with the unobtrusive client validation and have been struggling to get it to work in my scenario.</p>\n\n<p>My main problem is that my view has a strongly typed ViewModel. This ViewModel contains several collections that are used to populate dropdowns and has an additional property (let's call it Person) which is the actual object I wish the form to edit.</p>\n\n<p>My controller action handling the post expects to get a Person object not the entire ViewModel posted. So I haven't been able to use:</p>\n\n<pre><code>@Html.TextBoxFor(m =&gt; m.Person.Name)\n</code></pre>\n\n<p>because I need the input control to have a name = \"Name\" and not \"Person.Name\"\nI can correct this by using </p>\n\n<pre><code>@Html.TextBox(\"Name\", m.Person.Name)\n</code></pre>\n\n<p>But then the resulting input control lacks the data-* attributes client validation needs.\nIs there a way to get client validation to work, keep my viewmodel, and make my controller action all work together?</p>\n\n<p>On a side note it seems like the data-* attributes on form fields are only added if you use </p>\n\n<pre><code>@using (Html.BeginForm())\n</code></pre>\n\n<p>Writing out my own <code>&lt;form&gt;</code> tag by hand seems to break it. </p>\n\n<p>Is using the form helper required?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13124733,"title":"How do I import model class in view from not reference dll","body":"<p>Sorry for my english, it is not the native language for me.</p>\n\n<p>I'm writing a web access to a large medical system.</p>\n\n<p>Using ASP.NET MVC 4. It so happened that the models and controllers are in the other dll, what loaded when web-application started. Controllers are registered in the Unity container, and everything work fine.</p>\n\n<p>But in the View does not work use the model classes directly. Razor view engine can not find their namespace.</p>\n\n<p>How to fix it? How can you make use ViewEngine namespace library that is loaded into memory, but on which there is no reference of mvc-project?</p>\n\n<p>Thank you in advance for your advice.</p>\n"},{"tags":["jquery","asp.net-mvc","html5","video"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13132761,"title":"object tag not work in the chrome browser","body":"<p>i am using the following code to play video of different extension like(avi,wmv,flv,mp4) in the browser . with the following code only two file extension(avi,wmv) run only in intenet explore and mozilla but not in the chrome...\\\nhere my question is what is reason it not work in chrome and is there method to run above mention video in all browser.i tried many thing but not succeed \nIs there any jquery plugin to use this.\nplease help me ....\nThanks in advance</p>\n\n<pre><code>           &lt;object id=\"MediaPlayer1\" CLASSID=\"CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95\" codebase=\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701\"\nstandby=\"Loading Microsoft Windows Media Player components...\" type=\"application/x-oleobject\" width=\"262\" height=\"160\"&gt;\n\n          &lt;param name=\"src\" value=\"C:\\New folder\\Wildlife.wmv\" /&gt;\n\n    &lt;param name=\"src\" value=\"flash_ad.swf\"&gt;\n\n&lt;param name=\"animationatStart\" value=\"true\"&gt;\n&lt;param name=\"transparentatStart\" value=\"true\"&gt;\n&lt;param name=\"autoStart\" value=\"false\"&gt;\n&lt;param name=\"showControls\" value=\"true\"&gt;\n&lt;param name=\"Volume\" value=\"-450\"&gt;\n&lt;embed type=\"application/x-mplayer2\" pluginspage=\"http://www.microsoft.com/Windows/MediaPlayer/\" src=\"C:\\New folder\\Wildlife.wmv\" name=\"MediaPlayer1\" width=262 height=160 autostart=0 showcontrols=1 volume=-450&gt;\n&lt;/object&gt;  \n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-web-api","nservicebus","servicebus"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13122972,"title":"Using Service Bus for Asp.net Web API","body":"<p>I am developing Services using ASP.NET Web API and have plan to use Service Bus for message exhanging. Is it possible to use Service Bus along with ASP.NET Web API?\nAnd what are the Microsoft's Answer for Service Bus other than Windows Azure service bus?</p>\n"},{"tags":["asp.net-mvc","iis7"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13132520,"title":"Server Variables are not being accessible in ASP.NET MVC","body":"<p>I have two web applications hosted in the same app pool in IIS 7. One is an ASP.NET application and the other is ASP.NET MVC application. When I go to the web application in ASP.NET and click on a link it is supposed to Launch the other web application in MVC hosted in the same app pool. I can access Server Variables in the ASP.NET application, but I can't access Server Variables in ASP.NET MVC. This works in IIS 6.0 but doesn't work in IIS 7.0. Any ideas and suggestions are greatly appreciated.</p>\n\n<p>Thanks in anticipation.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","portable-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":167,"score":0,"question_id":12518159,"title":"MVC4 Portable Areas?","body":"<p>Does MVC4 remove the MVCContrib requirement to achieve portable areas? Or is that still required?</p>\n\n<p>I gave it a shot w/o MVCContrib and unfortunately I'm stuck with a typical \"<em>The view 'Index' or its master was not found or no view engine supports the searched locations.</em>\" exception.</p>\n\n<p>The list of searched locations includes \"<em>~/Areas/Inbox/Views/Default/Index.cshtml</em>\" which is technically correct, but it's just not finding the view. </p>\n\n<p>Some explanation:</p>\n\n<p>I have a main MVC4 application and a \"plugin\" (if you will) MVC4 app that contains an area called Inbox with a controller and view named Default. I reference this plugin app in the main app and I can hit a breakpoint in DefaultController's Index method where the View is returned - so I know the main app is engaging the plugin app and routing the requests to the proper controller and all that. When not running, if I cursor over the return View() statement in DefaultController the balloon shows the desired view, it's just not found at runtime.</p>\n\n<p>Has anyone encountered this? I'm sure it's something really simple and a stupid oversight on my part, but after hours of trying, I can't find a solution. Thanks in advance!</p>\n"},{"tags":["c#","asp.net-mvc","exception","exception-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13127650,"title":"Catching exceptions for displaying info","body":"<p>I have setup so that if an <code>Exception</code> is thrown I can display it with my custom error page. But in some cases I don't want to be navigated to the error page, but want it to display a simple dialog window.</p>\n\n<pre><code>public ActionResult Page1()\n{\n    //The custom error page shows the exception, if one was thrown\n\n    throw new Exception( \"An exception was thrown\" );\n\n    return View();\n}\n\n\npublic ActionResult Page2()\n{\n    //A dialog should show the exception, if one was thrown\n\n    try\n    {\n        throw new Exception( \"An exception was thrown\" );\n    }\n    catch( Exception ex )\n    {\n        ViewData[\"exception\"] = ex;\n    }\n    return View();\n}\n</code></pre>\n\n<p>Is it possible to have a CustomAttribute to handle an exception which has been thrown in an Controller action? If I added <code>CatchException</code> to Page2, can I automate the process of storing the exception in the <code>ViewData</code>, each time an exception was thrown. I don't have much experience of CustomAttributes and I'd be much appreciated if you could help me.</p>\n\n<p>The Page2 example works perfectly fine, I just want to make the code cleaner as it isn't really pretty to have try catches in every action (where I want to show a dialog).</p>\n\n<p>I am using .NET MVC 4.</p>\n"},{"tags":["ajax","asp.net-mvc","asp.net-mvc-3","model-binding","kendo-ui"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":125,"score":1,"question_id":13004986,"title":"Model binding the sort field from KendoUI Grid","body":"<p>I'm using KendoUI Grid to show data. I have server paging working like a charm. The each page change in the kendo grid is a new ajax request to the server and the server returns the correct page of data. I am now trying to do server-side sorting, but I'm having trouble getting model binding to bind to the sort values.</p>\n\n<p>This is what the request from the Kendo Grid looks like:</p>\n\n<p><img src=\"http://i.imgur.com/ltlSB.png\" alt=\"\"></p>\n\n<p>My action method looks like this:</p>\n\n<pre><code>public JsonResult GetReports(int pageSize, int skip, List&lt;KendoSort&gt; sort)\n{\n    // sort is not being populated with the right data.\n}\n</code></pre>\n\n<p>KendoSort is a custom class:</p>\n\n<pre><code>public class KendoSort\n{\n    public string Field { get; set; }\n    public string Dir { get; set; }\n}\n</code></pre>\n\n<p>I know I'm not doing this right. How should my action method look to correctly capture the data supplied for the sort? The screenshot shows only a single item in the sort collection, but the grid could pass more. For example, it could also have included an additional sort:</p>\n\n<pre><code>sort[1][field]: reportName\nsort[1][dir]: asc\n</code></pre>\n\n<p>Basically it would be saying \"sort by id in ascending order, then by reportName in ascending order\". How can I get this data into my action method without having to poke around in <code>Request</code> and manually parse the parameters?</p>\n"},{"tags":["asp.net-mvc","iis"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13131187,"title":"ASP.NET MVC deployment routing","body":"<p>I've built a WebDeploy package of my ASP.NET MVC 4 website in Visual Studio 2012. </p>\n\n<p>When I run the deployer on my server, it successfully deploys the website to a subdir on my server called <code>/myapp</code></p>\n\n<p>However, when I navigate to <code>localhost/myapp</code> in a browser, I get a 404. It appears IIS is looking for a physical path (one-to-one). How can I config IIS, or setup a rewrite rule, so that <code>/myapp</code> functions within itself?</p>\n\n<p>For example, links and redirects that the website has are pointing to <code>localhost/static/style.css</code>, when they <em>should</em> be pointing to <code>localhost/myapp/static/style.css</code></p>\n"},{"tags":["c#","sql-server","asp.net-mvc","caching","bottleneck"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":291,"score":0,"question_id":4986372,"title":"How can I cache private data in a webfarm for ASP MVC","body":"<p>I am making a member based web app in ASP MVC3 and I am trying to plan ahead, at first our user base will not be huge, but as with any software the potential for a sudden volume spike is always a possibility. </p>\n\n<p>Thinking ahead to this scenario, I know that the database is the bottleneck area on most web apps. We are using MSSQL 2008RS we will have dedicated servers with several client databases each client has there own database so if one server begins to bottle neck we can scale vertically or move some of the databases to a new server and begin filling it up.</p>\n\n<p>To access the databases we use primarily LINQ 2 SQL and are currently re-factoring some of our code to make use of the IQueryable mechanisms to do a lazy load of content. but each page contains quite a bit of content from various parts of the database. </p>\n\n<p>We also have a few large databases that are used for widgets in the program that rarely change but have millions of rows. the goal with those is to somehow sync them to the primary source and distribute them across several machines and then load balance those servers. </p>\n\n<p>With this layout should I even worry about caching, or will the built-in caching mechanisms in MSSQL be sufficient? </p>\n\n<p>If so where should I begin. I have looked briefly at app fabric but it looks as tho it is for Azure only?</p>\n\n<p>Resources:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/343899/how-to-cache-data-in-a-mvc-application\">How to cache data in a MVC application</a></p>\n\n<p><a href=\"http://stephenwalther.com/blog/archive/2008/08/28/asp-net-mvc-tip-39-use-the-velocity-distributed-cache.aspx\" rel=\"nofollow\">http://stephenwalther.com/blog/archive/2008/08/28/asp-net-mvc-tip-39-use-the-velocity-distributed-cache.aspx</a></p>\n\n<p><a href=\"http://stephenwalther.com/blog/archive/2008/08/29/asp-net-mvc-tip-40-don-t-cache-pages-that-require-authentication.aspx\" rel=\"nofollow\">http://stephenwalther.com/blog/archive/2008/08/29/asp-net-mvc-tip-40-don-t-cache-pages-that-require-authentication.aspx</a></p>\n"},{"tags":["c#","asp.net-mvc","json","asp.net-mvc-2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13129819,"title":"How do I create a treeview in asp.net mvc 2?","body":"<p>I have a couple of database tables, one for Folders and one for Files, with the following schemas.</p>\n\n<p><strong>Folders</strong></p>\n\n<ul>\n<li>FolderID </li>\n<li>FolderName </li>\n<li>DateCreated </li>\n<li>ParentFolderID</li>\n</ul>\n\n<p><strong>Files</strong></p>\n\n<ul>\n<li>FileID</li>\n<li>FileName</li>\n<li>FileExtension</li>\n<li>Description</li>\n<li>FolderID</li>\n<li>DateUploaded</li>\n<li>DownloadCount</li>\n</ul>\n\n<p>Basically I need to know how I can query these in such a way that the JSON returned, could be used with the <a href=\"http://bassistance.de/jquery-plugins/jquery-plugin-treeview/\" rel=\"nofollow\">jQuery Treeview plugin</a>, or <a href=\"http://mbraak.github.com/jqTree/\" rel=\"nofollow\">jqTree</a>.</p>\n\n<p>I have two classes, File and Folder, that can be used to create File and Folder objects, from the data returned from the database, but I'm not sure how to go about returning it as json, so that folders contain their sub-folders and all the files show up in the correct folders.</p>\n\n<p>Any help would be appreciated, I search and searched, but all I could find was an example that used ASP.NET MVC 3, and unfortunately I'm stuck using ASP.NET MVC2 on this project.</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>public class Folder\n{\n    public int FolderID { get; set; }\n    public string FolderName { get; set; }        \n    public IList&lt;Folder&gt; Subfolders { get; set; }\n    public IList&lt;File&gt; Files { get; set; } \n    public bool IsRootFolder\n    {\n        get { return Subfolders.Count == 0; }\n    }\n}\n\npublic class File\n{\n    public int FileID { get; set; }\n    public int FolderID { get; set; }\n    public string FileName { get; set; }\n    public string Exstension { get; set; }\n    public string Description { get; set; }\n    public DateTime? UploadDate { get; set; }\n    public int DownloadCount { get; set; }\n}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13130384,"title":"Populating a list through a form","body":"<p>I'm creating a website with asp.net, mvc 4 and c# and currently have a problem I did not find a solution online for. </p>\n\n<p>I have a rather complex CREATE-form which includes a dropdown-list with the values 1-7 and a list of textboxes. To this list of textboxes I can add more textboxes via JavaScript so the amount of textboxes is not limited right now. </p>\n\n<p>Moreover, if I select any value in the dropdown-list - let's say value 5 - the list of textboxes appears 5 times. </p>\n\n<p>To handle the undetermined amount of textboxes, each textbox in such a list gets the same name  with an index per list. To give an example: in the first list of textboxes, they are all named textbox-1, in the second list they have the name textbox-2, etc.. I hope you get where I'm going with this.</p>\n\n<p>My Problem now: I would like to have a model with 7 lists of strings which get populated with the values from the respective textboxes. Maybe I didn't really know what to look for (because honestly I didn't) but I could not find anything similar on Google. </p>\n\n<p>The only solution that I could think of would be to not use a model and just use the form collection but that feels like it would destroy any purpose and advantage of the mvc framework. But maybe there is also a completely different approach to this problem that totally slipped my mind.</p>\n\n<p>I hope I could you guys can even understand what I'm talking about.. kinda hard to explain. If not I'm sure you'll let me know :-)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","asp.net-mvc-4"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":7646,"score":4,"question_id":5710140,"title":"How do I create a MVC3 razor template for DisplayFor()","body":"<p>I have a couple of properties in my view model that are display-only but I need to retrieve their values using jQuery to perform a calculation on the page. The standard <em>Html.DisplayFor()</em> method just writes their value to the page. I want to create a razor template that will allow me to render each element as:</p>\n\n<pre><code>&lt;span id=\"ElementsId\"&gt;Element's value&lt;/span&gt;\n</code></pre>\n\n<p>I know I can specify a template in <em>Html.DisplayFor()</em> to use a particular template for rendering the property but within that template how do I identify the <em>id</em> attribute to write into the <em>span</em> tag?</p>\n\n<pre><code>@Html.DisplayFor(model =&gt; model.Element, \"MyTemplate\");\n</code></pre>\n"},{"tags":["asp.net-mvc","ws-federation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":323,"score":0,"question_id":9490811,"title":"Prevent XmlHttpRequest redirect response in .Net MVC WS-Federation Site","body":"<p>I'm using WS Federated (Claims Aware) authentication on an MVC 3 site and am having trouble keeping some of my API controllers that send JSON from returning a redirect when the authentication fails.  I have an Area called API with several controllers that just return JSON, these controllers all inherit from the same base class.  I want to send down legitimate 401 error responses instead of 302 redirects that are happening by default.</p>\n\n<p>I followed some directions I found for creating a custom <code>WSFederationAuthenticationModule</code> in concert with a filter I put on my API controller actions:</p>\n\n<pre><code>public class WSFederationServiceAuthenticationModule : WSFederationAuthenticationModule\n{\n    private static Log4NetLoggingService logger = new Log4NetLoggingService();\n\n    public const string IsServiceIndicator = \"ROIP.IsService\";\n\n    protected override void OnAuthorizationFailed(AuthorizationFailedEventArgs e)\n    {\n        base.OnAuthorizationFailed(e);            \n\n        var isService = HttpContext.Current.Items[IsServiceIndicator];\n\n        if (isService != null)\n        {\n            logger.Info(\"WSFedService: Found IsService\");\n            e.RedirectToIdentityProvider = false;\n        }\n        else\n        {\n            logger.Info(\"WSFedService: Did not find IsService\");\n        }\n    }\n}\n\npublic class WSFederationServiceAuthAttribute : ActionFilterAttribute\n{\n    private static Log4NetLoggingService logger = new Log4NetLoggingService();\n\n    public override void OnActionExecuting(ActionExecutingContext filterContext)\n    {\n        base.OnActionExecuting(filterContext);\n\n        // Set an item that indicates this is a service request, do not redirect.\n        logger.Info(\"WSFedService: Setting IsService\");\n        HttpContext.Current.Items[WSFederationServiceAuthenticationModule.IsServiceIndicator] = 1;\n    }\n}\n</code></pre>\n\n<p>But my logging shows that I am never finding the IsService item in the Items:</p>\n\n<pre><code>{INFO}02/29 03:39:21 - WSFedService: Setting IsService\n{INFO}02/29 03:39:32 - WSFedService: Setting IsService\n{INFO}02/29 03:39:32 - WSFedService: Setting IsService\n{INFO}02/29 03:50:39 - WSFedService: Did not find IsService\n{INFO}02/29 03:53:16 - WSFedService: Did not find IsService\n{INFO}02/29 03:53:29 - WSFedService: Did not find IsService\n</code></pre>\n\n<p>I think this may be a problem with the <code>HttpContext.Current</code> not being the same between the filter and the module, but I'm not sure.</p>\n\n<p>Another option I tried was to subscribe to the <code>FederatedAuthentication.WSFederationAuthenticationModule.RedirectingToIdentityProvider</code> event in the <code>Application_Start</code> event of my Global.asax.cs, but the WSFederationAuthenticationModule is null at that time.</p>\n\n<pre><code>private void ConfigureWSFederationAuthentication()\n{\n    bool hasFederatedAuthentication = false;\n    try\n    {\n        if (FederatedAuthentication.WSFederationAuthenticationModule != null)\n        {\n            hasFederatedAuthentication = true;\n        }\n    }\n    catch\n    {\n        hasFederatedAuthentication = false;\n    }\n\n    if (hasFederatedAuthentication)\n    {\n        Logger.Info(\"WSFederation: Registering for Event Handler\");\n        FederatedAuthentication.WSFederationAuthenticationModule.RedirectingToIdentityProvider += (s, e) =&gt;\n            {\n                var msg = string.Empty;\n                try\n                {\n                    if (HttpContext.Current.Request.Headers[\"X-Requested-With\"] == \"XMLHttpRequest\")\n                    {\n                        e.Cancel = true;\n                        msg = \"Found XMLHttpRequest header\";\n                    }\n                    else\n                    {\n                        msg = \"Did not find XMLHttpRequest header\";\n                    }\n                }\n                catch (Exception ex)\n                {\n                    msg = \"WSFederation: Event Handler Error: \" + ex.Message;\n                }\n\n                Logger.Info(\"WSFederation: Redirecting from Event Handler: \" + msg);\n            };\n    }\n    else\n    {\n        Logger.Info(\"WSFederation: Null WSFederationAuthenticationModule\");\n    }\n}\n</code></pre>\n\n<p>I'd like to know either how to get the first option working, or where I should subscribe to the <code>RedirectingToIdentityProvider</code> event.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":70,"score":4,"question_id":13110552,"title":"ASP.NET MVC Routing - all looks to match the correct route template, but not working","body":"<p>I have a site with a \"general\" Route structure, and an additional \"Translate\" area. So at the top level, you have something like:</p>\n\n<ul>\n<li>/</li>\n<li>/About (\"generic\")</li>\n<li>/Translate (area)</li>\n</ul>\n\n<p>Within the Translate area, I have:</p>\n\n<ul>\n<li>/Translate/Word (WordController, Index action)</li>\n<li>/Translate/Word/Add (WordController, Add action)</li>\n<li>/Translate/Word/Improve (WordController, Improve action)</li>\n</ul>\n\n<p>All these work.</p>\n\n<p>However, as soon as I add a further controller to the existing structure, eg. Definition ...</p>\n\n<ul>\n<li>/Translate/Definition (DefinitionController, Index action)</li>\n<li>/Translate/Definition/Add (DefinitionController, Add action)</li>\n</ul>\n\n<p>or Pronunciation ...</p>\n\n<ul>\n<li>/Translate/Pronunciation (PronunciationController, Index action)</li>\n<li>/Translate/Pronunciation/Add (PronunciationController, Add action)</li>\n</ul>\n\n<p>All I get is a 404.</p>\n\n<p>My area's routing configuration is below:</p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n            \"Translate_direct\",\n            \"Translate/{controller}/{action}\",\n            new { action = \"Index\", controller = \"Default\", }\n        );\n        context.MapRoute(\n            \"Translate_default\",\n            \"Translate/{toLanguageCode}/{query}/{fromLanguageCode}/{controller}/{section}/{action}/{id}\",\n            new { action = \"Index\", controller=\"Default\", id = UrlParameter.Optional, section=UrlParameter.Optional }\n        );\n    }\n</code></pre>\n\n<p>I have installed <a href=\"http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx\" rel=\"nofollow\">Phil Haack's RouteDebugger</a> and have got the following result:</p>\n\n<p><img src=\"http://i.stack.imgur.com/g2GTm.png\" alt=\"Screenshot\"></p>\n\n<p>So it appears to match the Controller and Action, but I just get a 404.</p>\n\n<p>For completeness and assurance, my \"MVC\" file structure is also shown:</p>\n\n<p><img src=\"http://i.stack.imgur.com/7SWZW.png\" alt=\"enter image description here\"></p>\n\n<p>I'm clearly missing something obvious but not sure what ... ?</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>It seems my namespaces are involved somehow.</p>\n\n<p>My TranslateAreaRegistration class had the namespace <em>Taggloo.Web.Client.Areas.Translate</em> but my PronunciationController had a namespace of <em>Taggloo.Web.</em>*Mvc.*<em>Client.Areas.Translate.Controllers</em></p>\n\n<p>It seems that an error in my namespacing which caused the two to be different (the TranslateAreRegistration class should be in the <em>Taggloo.Web.Mvc.Client.Areas.Translate</em> namespace, too) is the issue. I tried making them both <em>Taggloo.Web.Mvc....</em> but this didn't work. I've begrudgingly set both to <em>Taggloo.Web.Client...</em> instead and now it works.</p>\n\n<p>So not a solution, a workaround, and despite looking around on this, I'm still none the wiser as to why.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","query-string"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13129334,"title":"Including All querystring parameters in Html.ActionLink","body":"<p>In my page i have </p>\n\n<pre><code> @using (Html.BeginForm(\"list\", \"menu\", FormMethod.Get))\n    {\n        &lt;div&gt;\n           Show categories:\n            @Html.DropDownList(\"groupName\", (SelectList)ViewBag.groups)\n            &lt;input id=\"Submit1\" type=\"submit\" value=\"Show\" /&gt;\n        &lt;/div&gt;\n    }\n</code></pre>\n\n<p>Regarding the option the user choose i generate a list and the Querystring in my address going to be like :</p>\n\n<pre><code>localhost/menu/list?groupName=controlpanel\n</code></pre>\n\n<p>My problem is when i use HtmlActionLink for example :</p>\n\n<pre><code>@Html.ActionLink(\"Title\", \"List\", new { foo = item.foo})\n</code></pre>\n\n<p>What i got in result is result is :</p>\n\n<pre><code>localhost/menu/List?foo=123\n</code></pre>\n\n<p>instead of :</p>\n\n<pre><code> localhost/menu/List?foo=123&amp;groupName=controlpanel\n</code></pre>\n\n<p>Am i missing something ??</p>\n"},{"tags":["asp.net-mvc","mongodb","selenium","bdd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13122999,"title":"Initialize database on web automate testing","body":"<p>I got an asp.net MVC application which uses MongoDB database.\nIm auto-testing (BDD) it with SpecFlow and Selenium WebDriver, and I want to initialize my database to some state before navigating to some URL or making some acrions. Is it possible to do that ?</p>\n"},{"tags":["asp.net-mvc","error-handling","elmah"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13129921,"title":"ASP.NET MVC Error Page Being Found but getting Elmah Email","body":"<p>I have an error page located at Errors/Error in my ErrorsController.  If I create an error it redirects me to that page fine.  However I get a error email from Elmah stating the message below.  Is there a reason why I am getting this message even thought my error page displayed fine?</p>\n\n<pre><code>System.InvalidOperationException: The view 'Error' or its master was not found or no view engine supports the searched locations. The following locations were searched: ~/Views/divisions/Error.cshtml ~/Views/divisions/Error.vbhtml ~/Views/Shared/Error.cshtml ~/Views/Shared/Error.vbhtml\n</code></pre>\n\n<p><strong>Web.Config</strong></p>\n\n<pre><code>   &lt;customErrors mode=\"Off\" defaultRedirect=\"~/Error\"&gt;\n          &lt;error statusCode=\"404\" redirect=\"~/PageNotFound\" /&gt;\n      &lt;/customErrors&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","razor","asp.net-mvc-4","bundle","asp.net-optimization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":107,"score":1,"question_id":13087527,"title":"Minified script only in MVC4 BundleConfig","body":"<p>I am adding the following ScriptBundle in BundleConfig:</p>\n\n<pre><code>    bundles.Add(new ScriptBundle(\"~/bundles/javascript\").Include(\n        \"~/Scripts/jquery-1.*\",\n        \"~/Scripts/load-image.min.js\",\n        \"~/Scripts/bootstrap.*\",\n        \"~/Scripts/bootstrap-image-gallery.*\",\n        \"~/Scripts/my.global.js\"));\n</code></pre>\n\n<p>This is referenced at the end of my _Layout.cshtml as:</p>\n\n<pre><code>@Scripts.Render(\"~/bundles/javascript\")\n</code></pre>\n\n<p>When debugging I notice that the output of this script rendering is:</p>\n\n<pre><code>&lt;script src=\"/Scripts/jquery-1.8.2.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/bootstrap-image-gallery.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/Scripts/my.global.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Notice the load-image.min.js script is missing? What I want is to use that same minified script whether I'm debugging or not. Under release conditions the script is included in the bundled JS file. </p>\n\n<p>I assume it's seeing the 'min', looking for an un-minified version, not finding one, then deciding what's best is to ignore it entirely. Brilliant. If I make a copy of load-image.min.js, call it load-image.js and then reference it in BundleConfig as \"load-image.*\" I find it is included in both configurations but what's the point of having to do that? </p>\n\n<p>I assume I'm missing something here. I don't have the un-minified version and I frankly don't care about it. It's used by my Bootstrap image gallery plugin and nothing else. Any ideas out there?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-routing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13127487,"title":"ASP.NET MVC Routing - Routing with optional parameters and friendly urls","body":"<p>I have a search action method which accepts at this time 5 optional parameters for its search criteria.\nMy home page has a quick search button which submits a GET request to the search action method. I have everything\nworking fine, however my urls are being generated using standard querystring syntax (?x=x&amp;y=y).</p>\n\n<p>I would like to expose friendly urls but the only way I see possible using the routing system would be\nto add every single permutation posible since all the parameters are optional, which does not sound very\nelegant.</p>\n\n<p>So are there any other routes (no pun intended :) ) I can take? Possible a Url rewrite module?</p>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","razor","mvcsitemap"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":506,"score":1,"question_id":9301445,"title":"MVC3 MvcSiteMap()","body":"<p>I am using MVC3 razor view. MvcSitemapProvider dll version 3.1.0.0</p>\n\n<p>When I use this <code>@Html.MvcSiteMap().SiteMap()</code> in my razorview , I get the following error message</p>\n\n<pre><code>Method not found: 'Void System.Web.Mvc.WebFormView..ctor(System.String, System.String)'.\n</code></pre>\n\n<p>I have registered the namespace for:         </p>\n\n<pre><code>&lt;add namespace=\"MvcSiteMapProvider.Web.Html\" /&gt;\n&lt;add namespace=\"MvcSiteMapProvider.Web.Html.Models\" /&gt;\n</code></pre>\n\n<p>In both of the web.config files  (root as well as the view web.config).</p>\n\n<p>Is there anything else I need to look at?</p>\n"},{"tags":["asp.net-mvc","url-encoding","url-decode"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":977,"score":1,"question_id":4167251,"title":"ASP.Net MVC 2.0 : unescaping URL query parameters","body":"<p>I have following URL:</p>\n\n<p><code>http://localhost:8041/Reforge.aspx?name=Cyan%ECde&amp;realmId=1</code></p>\n\n<p>notice <code>%EC</code> in the value of <code>name</code> parameter.</p>\n\n<p>%EC = 236 = <strong></strong> (igrave)</p>\n\n<p>In my action method:  </p>\n\n<pre><code>public ActionResult Index(string name, int realmId) {...}\n</code></pre>\n\n<p>name[4] is a character with code 65533 (0xFFFD). What am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13128654,"title":"with OutputCache random user have to pay cost","body":"<p>I'm using OutputCache to avoid execute same code everytime, but I have the following problem:</p>\n\n<p>when it expires, a random user have to pay the cost to execute this code.  Can avoid it??</p>\n\n<p>I'm using asp.net MVC 4.0.</p>\n\n<p>thanks!</p>\n"},{"tags":["asp.net-mvc","image","file-management"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":9773123,"title":"Choice of file management for asp.net MVC","body":"<p>I am looking for a free tool for file Management ( like file explorer) for an ASP.net MVC 3 solution ? </p>\n\n<p>which has the requirements</p>\n\n<ol>\n<li>Preview capabilities (for images)</li>\n<li>Creation of folder/files</li>\n<li>Deletion folder/files</li>\n<li>Upload capability</li>\n</ol>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","telerik-mvc","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13127329,"title":"Treeview (Kendo UI) with TextBox on the same page best practices in MVC4?","body":"<p>Let's say I have a view with Kendo treeview bounded to remote data source.</p>\n\n<pre><code>@(Html.Kendo().TreeView()\n    .Name(\"schemas\")\n    .DataTextField(\"name\")\n    .DataSource(dataSource =&gt; dataSource.Read(read =&gt; read.Action(\"Schemas\", \"Forms\")))\n    .Events(events =&gt; events\n    .Select(\"onSelected\")))\n</code></pre>\n\n<p>So the treeview just makes a call to the <code>Schemas</code> action in my <code>FormsController</code></p>\n\n<p>Also on the same page I have a form, which is simply the textbox and a button to submit the form</p>\n\n<pre><code>@using (Html.BeginForm(\"Load\", \"Forms\", FormMethod.Post))\n{   \n    &lt;div id=\"rootNode\"&gt;\n        @Html.TextBox(\"rootElementName\")            \n        @Html.Button(\"next\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>So I am just wondering what is the best way to handle user input and pass it to the the <code>Load</code> action of the <code>FormsController</code>? The user should select one of the options in the treeview and enter the value into textbox.\nOr should I create some sort of viewmodel for my view with all my nodes inside + two additional fields for the textbox input and selected node?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13128374,"title":"Saving unchecked item","body":"<p>I am having trouble trying to edit a page with checked items. I would like to uncheck and save the update but after doing so and returning to the same page the item is checked again. Here is my update code section and if anyone can point out any facts about going about doing this i would be greatful. I am able to check as many items as possible and save and when returning to the page all desired checked items are saved but when i uncheck and try to save the item is still checked after saving. </p>\n\n<pre><code>public void Update(VisitEntry visitEntry, IList&lt;Guid&gt; caseIds, IList&lt;Guid&gt;partyIds )\n    {\n        EnsureValid(visitEntry);\n        _visitEntryRepository.Save(visitEntry);\n        IEnumerable&lt;Guid&gt; visitIds = visitEntry.Visits.Select(v =&gt; v.VisitId);\n        List&lt;Guid&gt; toDelete =\n            visitIds.Where(visit =&gt; !(from c in caseIds.Distinct() select c).Contains(visit)).ToList();\n        foreach (Guid visitId in toDelete)\n        {\n            _visitService.Delete(visitId, visitEntry.OfficeId, visitEntry.UserId);\n        }\n        foreach (var caseId in caseIds.Distinct())\n        {\n            var visit = new Visit {CaseId = caseId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(visit);\n        }\n        foreach (var partyId in partyIds.Distinct())\n        {\n            var partyVisit = new VisitEntryParty {PartyId = partyId, VisitEntryId = visitEntry.VisitEntryId};\n            _visitService.Update(partyVisit);\n        }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","azure","sql-azure"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12690453,"title":"SQL Azure + Getting an error 'There is already an open DataReader associated with this Command..', even after setting MultipleActiveResultSets=True","body":"<p>We are facing some issues with the deployed version of our application on cloud.</p>\n\n<p>Our application is an ASP.NET MVC 3 project with ADO .NET Entity Framework.</p>\n\n<p>According to the msdn blogs, we need to add the parameter MultipleActiveResultSets=True (for Entity Framework  with SQL azure) in our database connection string which we have rightly done.</p>\n\n<p>We get the following exception while executing a database query from our application: There is already an open DataReader associated with this Command which must be closed first., \nwhich I guess is very much related to the MultipleActiveResultSets=True property.</p>\n\n<p>The application works fine on the local environment with our locally deployed database as well as using the SQL azure database (on local environment).</p>\n\n<p>But when we deploy our application of cloud we get the above mentioned error. It seems that MultipleActiveResultSets=True property is not being read from the connection string.</p>\n\n<p>The connection string that I am using is as follows:</p>\n\n<pre><code>    &lt;connectionStrings&gt;\n        &lt;add name=\"#DBInstanceName#\" connectionString=\"Data Source=tcp:#server#.database.windows.net,1433;Initial Catalog=#DBName#;User ID=UserName#@#server#;Password=#password#;MultipleActiveResultSets=True\" providerName=\"System.Data.SqlClient\"/&gt;\n    &lt;/connectionStrings&gt;\n</code></pre>\n\n<p>I am able to connect to SQL Azure database using the above connection string from the locally deployed application without any exceptions. But the same application when deployed on cloud using the same connection string gives me the above mentioned error.</p>\n\n<p>Can you please help us fixing the same?</p>\n"},{"tags":["asp.net-mvc","renderpartial"],"answer_count":3,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":8325,"score":14,"question_id":607985,"title":"Shorthand for creating a ViewDataDictionary with both a model and ViewData items?","body":"<p>Is there any way to create a <code>ViewDataDictionary</code> with a model and additional properties with a single line of code. I am trying to make a <code>RenderPartial</code> call to a strongly-typed view while assembling both the model and some extra display configuration properties without explicitly assembling the ViewDataDictionary across multiple lines. It seems like it would be possible given the <code>RenderPartial</code> overload taking both a model <code>object</code> and a <code>ViewDataDictionary</code> but it looks like it simply ignores the <code>ViewDataDictionary</code> whenever they are both populated.</p>\n\n<pre><code>// FAIL: This will result in ViewData being a ViewDataDictionary\n// where Model = MyModelObject and there are no other parameters available.\nthis.Html.RenderPartial(\"SomePartialView\", MyModelObject, new ViewDataDictionary(new { SomeDisplayParameter = true }));\n</code></pre>\n\n<p>I found someone else with the <a href=\"http://stackoverflow.com/questions/495351/asp-net-mvc-rc1-renderpartial-viewdatadictionary\">same problem</a>, but their solution is the same multi-line concept I found: create a discrete <code>ViewDataDictionary</code> with the model, add the new parameter(s) and use it in the <code>RenderPartial</code> call.</p>\n\n<pre><code>var SomeViewData = new ViewDataDictionary(MyModelObject);\nSomeViewData.Add(\"SomeDisplayParameter\", true);\nthis.Html.RenderPartial(\"SomePartialView\", SomeViewData);\n</code></pre>\n\n<p>I can always wrap that logic into a <code>ChainedAdd</code> method that returns a duplicate dictionary with the new element added but it just seems like I am missing some way of creating a <code>ViewDataDictionary</code> that would do this for me (and that is a bit more overhead than I was hoping for).</p>\n\n<pre><code>this.Html.RenderPartial(\"SomePartialView\", new ViewDataDictionary(MyModelObject).ChainedAdd(\"SomeDisplayParameter\", true));\n\npublic static ViewDataDictionaryExtensions {\n    public static ViewDataDictionary ChainedAdd(this ViewDataDictionary source, string key, object value) {\n        return source.ChainedAdd(new KeyValuePair&lt;string,object&gt;(key, value));\n    }\n    public static ViewDataDictionary ChainedAdd(this ViewDataDictionary source, KeyValuePair&lt;string, object&gt; keyAndValue) {\n        ViewDataDictionary NewDictionary = new ViewDataDictionary(source);\n        NewDictionary.Add(keyAndValue);\n        return NewDictionary;\n    }\n}\n</code></pre>\n\n<p>As well, trying to assemble a <code>ViewDataDictionary</code> with an explicit <code>Model</code> and <code>ModelState</code> simply causes a compilation error because the ModelState is read-only.</p>\n\n<pre><code>// FAIL: Compilation error\nthis.Html.RenderPartial(\"SomePartialView\", new ViewDataDictionary { Model = MyModelObject, ModelState = new ViewDataDictionary( new { SomeDisplayParameter = true }});\n</code></pre>\n\n<p><strong>ANSWER(S):</strong> It looks like Craig and I ended up finding two separate syntaxes that will get the job done. I am definitely biased in this case, but I like the idea of setting the model first and \"decorating\" it afterwards.</p>\n\n<pre><code>new ViewDataDictionary(MyModelObject) { { \"SomeDisplayParameter\", true }, { \"SomeOtherParameter\", 3 }, { \"SomeThirdParameter\", \"red\" } };\n\nnew ViewDataDictionary(new ViewDataDictionary() { {\"SomeDisplayParameter\", true }})\n    { Model = MyModelObject };\n</code></pre>\n\n<p>Of course, I would still be spinning my wheels without his [eventually spot-on] answer, so, circle gets the square.</p>\n"},{"tags":["asp.net-mvc","multi-tenant"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12598168,"title":"Multi Tenant application using MapRoute","body":"<p>I have found a solution for implement multi-tenant in my asp.net mvc project and \nI want know if it's correct or exist a better way.</p>\n\n<p>I want organize more customers using the same application handling the web request, for example:</p>\n\n<pre><code>http://mysite/&lt;customer&gt;/home/index        //home is controller and index the action\n</code></pre>\n\n<p>For this reason i changed the default maproute:</p>\n\n<pre><code>routes.MapRoute(\n    name: \"Default\",\n    url: \"{customername}/{controller}/{action}/{id}\",\n    defaults: new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>and I implemented a custom ActionFilterAttribute:</p>\n\n<pre><code>public class CheckCustomerNameFilterAttribute : ActionFilterAttribute\n{\n    public override void OnActionExecuting( ActionExecutingContext filterContext )\n    {\n        var customerName = filterContext.RouteData.Values[\"customername\"];\n\n        var customerRepository = new CustomerRepository();\n\n        var customer = customerRepository.GetByName( customerName );\n\n        if( customer == null )\n        {\n            filterContext.Result = new ViewResult { ViewName = \"Error\" };\n        }\n\n        base.OnActionExecuting( filterContext );\n    }\n}\n</code></pre>\n\n<p>and using it:</p>\n\n<pre><code>public class HomeController : Controller\n{\n    [CheckCustomerNameFilterAttribute]\n    public ActionResult Index()\n    {\n        var customerName = RouteData.Values[\"customername\"];\n\n        // show home page of customer with name == customerName\n\n        return View();\n    }\n}\n</code></pre>\n\n<p>With this solution i can switch customer using customer name and correctly accept requests like this:</p>\n\n<pre><code>http://mysite/customer1\nhttp://mysite/customer2/product/detail/2\n...................................\n</code></pre>\n\n<p>This solution works well but I don't know if the best approach.\nDoes anyone know a better way?</p>\n"},{"tags":["asp.net-mvc","layout","themes","asp.net-mvc-areas"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13123573,"title":"ASP MVC Areas for themes","body":"<p>I'm currently searching for a solution where a user could select a theme AND a layout based on his preferences.</p>\n\n<p>Let's say I have a website that offers 2 themes: yellow and green.</p>\n\n<p>These two have 2 different layouts: 2 columns and 3 columns layout and some partial views will be structured differently and have different functional aspects.</p>\n\n<p>The best way I thought was to use Areas but, what I don't want is the URL structure to change at all. I would use a variable that sets the area behind the scenes when the action is executed.</p>\n\n<p>For instance, I'm setting my layout to 3 columns and use the green theme.\nI would use the 3Cols area with it's specific views but the controller implements the same exact code as the 2Cols layout so, I don't want to duplicate the controller.</p>\n\n<p>So, a recap of what I'm trying to achieve is this:</p>\n\n<ul>\n<li>Use Areas to swith layouts and themes</li>\n<li>Use a single controller for each layouts</li>\n<li>Have the same urls independantly from the selected layout</li>\n</ul>\n\n<p>Any thoughts/suggestions on that?</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc","internet-explorer","https","mime-types"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":13119340,"title":"IE6-8 unable to download file from HTTPS site","body":"<p>I have an MVC .Net application that has actions that return report files, usually <code>.xslx</code>:</p>\n\n<pre><code>byte[] data = GetReport();\nreturn File(data, \n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \n    \"filename.xlsx\");\n</code></pre>\n\n<p>This works great in testing and in all browsers, but when we put this on an SSL site it fails for IE6, 7 and 8 (all the proper browsers still work fine) with this unhelpful error:</p>\n\n<p><img src=\"http://i.stack.imgur.com/TXGo5.png\" alt=\"Unable to download filename from server. Unable to open this Internet site. The requested site is either unavailable or cannot be found. Please try again later.\"></p>\n\n<p>This used to work in a legacy application (non-MVC) that this action replaces.</p>\n\n<p>We can't tell our users to change anything locally - about 60% are still on IE6!</p>\n\n<p>How can I fix this using MVC?</p>\n\n<h2>Update</h2>\n\n<p>Further digging reveals that this is a fundamental failure in IE6-8. According to <a href=\"http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx\" rel=\"nofollow\">Eric Law's IE internals blog</a> this happens because, during an SSL connection, IE treats the no-cache directive as an absolute rule. So, rather than not cache a copy, it considers no-cache to mean that it shouldn't be possible to save a copy to disk even when \n<code>Content-Disposition:attachment</code> and with an explicit prompt for a download location.</p>\n\n<p>Obviously this is wrong, but while it's fixed in IE9 we're still stuck with all the IE6-8 users.</p>\n\n<p>Using MVC's action filter attributes produces the following headers:</p>\n\n<pre><code>Cache-Control:no-cache, no-store, must-revalidate\nPragma:no-cache\n</code></pre>\n\n<p>Using Fiddler to change these on the fly we can verify the headers that need to be returned instead:</p>\n\n<pre><code>Cache-Control:no-store, no-cache, must-revalidate\n</code></pre>\n\n<p>Note the order of the <code>Cache-Control</code> <strong>must</strong> have <code>no-store</code> <em>before</em> <code>no-cache</code> and that the <code>Pragma</code> directive <strong>must</strong> be removed entirely.</p>\n\n<p>This is a problem - we use MVC's action attributes extensively and I really don't want to rewrite them from scratch. Even if we could IIS throws an exception if you try to remove the <code>Pragma</code> directive.</p>\n\n<p>How do you make Microsoft's MVC and IIS return the no-cache directive that Microsoft's IE6-8 can handle under HTTPS? I do not want to allow private caching of the response (as per this <a href=\"http://stackoverflow.com/questions/9996353/internet-explorer-error-using-asp-mvc-4-0-fileresult\">similar question</a>) or ignore the MVC built in methods with an override (as per my own answer, which is just my current best hack).</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-web-api","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13126279,"title":"Adding Routes for WebAPI in MVC 4","body":"<p>I've got a WebApi Controller and want to add a route.</p>\n\n<p>Here is my Controller ...</p>\n\n<pre><code>        public class ExtraInformationController : ApiController\n        {\n            private readonly ExtraInformationRepository _extraInfoRepository = new ExtraInformationRepository();\n\n            public ExtraInformation Get(int assetId)\n            {\n                return _extraInfoRepository.GetByAssetID(assetId).FirstOrDefault();\n            }\n\n        }\n</code></pre>\n\n<p>Heres my route ...</p>\n\n<pre><code>  routes.MapHttpRoute(\n            \"ExtraInformation\",\n            \"api/ExtraInformation/{assetId}\",\n            new { controller = \"ExtraInformation\", action = \"Get\" }\n        );\n</code></pre>\n\n<p>I want to be able to call ...</p>\n\n<p>api/ExtraInformation/4</p>\n\n<p>But I'm getting ...</p>\n\n<p>No HTTP resource was found that matches the request URI 'http://localhost:35188/api/ExtraInformation/4'.No action was found on the controller 'ExtraInformation' that matches the request.</p>\n\n<p>Can anyone assist please?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":5455,"score":3,"question_id":6432661,"title":"Can I add a ModelState.AddModelError from a Model class (rather than the controller)?","body":"<p>I want to display an error to the user in an ASP.MVC 3 input form using ModelState.AddModelError() so that it automatically highlights the right field and puts the error next to the particular field.</p>\n\n<p>In most examples, I see ModelState.AddModelError() and if(ModelState.IsValid) placed right in the Controller. However, I would like to move/centralize that validation logic to the model class. Can I have the model class check for model errors and populate ModelState.AddModelError()?</p>\n\n<p>Current Code:</p>\n\n<pre><code>// Controller\n[HttpPost]\npublic ActionResult Foo(Bar bar)\n{  \n    // This model check is run here inside the controller.\n    if (bar.isOutsideServiceArea())\n        ModelState.AddModelError(\"Address\", \"Unfortunately, we cannot serve your address.\");\n\n    // This is another model check run here inside the controller.\n    if (bar.isDuplicate())\n        ModelState.AddModelError(\"OrderNumber\", \"This appears to be a duplicate order\");\n\n    if (ModelState.IsValid)\n    {\n        bar.Save();\n        return RedirectToAction(\"Index\");\n    }\n    else\n        return View(bar)\n}\n</code></pre>\n\n<p>Desired Code:</p>\n\n<pre><code>// Controller\n[HttpPost]\npublic ActionResult Foo(Bar bar)\n{  \n    // something here to invoke all tests on bar within the model class\n\n    if (ModelState.IsValid)\n    {\n        bar.Save();\n        return RedirectToAction(\"Index\");\n    }\n    else\n        return View(bar)\n}\n\n\n...\n// Inside the relevant Model class\nif (bar.isOutsideServiceArea())\n    ModelState.AddModelError(\"Address\", \"Unfortunately, we cannot serve your address.\");\n\nif (bar.isDuplicate())\n    ModelState.AddModelError(\"OrderNumber\", \"This appears to be a duplicate order\");\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1132,"score":2,"question_id":2353878,"title":"ASP.NET MVC - State and Architecture","body":"<p>After a pair programming session, an interesting question came up which I think I know the answer for.  </p>\n\n<p>Question:  Is there any other desired way in ASP.NET MVC to retain 'state' other than writing to database or a text file?</p>\n\n<p>I'm going to define state here to mean that we have a collection of person objects, we create a new one, and go to another page, and expect to see the newly created person.  (so no Ajax)</p>\n\n<p>My thoughts are we don't want any kung-fu ViewState or other mechanisms, this framework is about going back to a stateless web.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13122626,"title":"Add style to an element based on a Model value","body":"<p>I want to add a simple inline style to my div tag if a certain criteria is met.</p>\n\n<p>I am able to apply the \"disabled\" class successfully, but I can't get my cursor style to show up.</p>\n\n<pre><code>&lt;div class=\"item  @(item.AvailableTimeSlots == \"0\" ? \"disabled\" : \"\")\" @(item.AvailableTimeSlots == \"0\" ? \"style='cursor: default;'\" : \"\")&gt;\n</code></pre>\n\n<p>any pointers?</p>\n"},{"tags":["c#","asp.net-mvc","model-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13122485,"title":"How to disable MVC 4 model validation?","body":"<p>I am working on a project written on mvc 4 that got several instances of wizard-like behaviour - chain of few views that pass the same half-filled model. Starting from the second view controls are initially shown as non-valid (which is logical - model, passed to controller method has corresponding properties empty). Currently \n<code>ModelState.Clear();</code>\nsolution is used, but putting it into each method with model as an argument looks ugly. Same with approach found here <a href=\"http://stackoverflow.com/questions/3578781/disable-model-validation-in-asp-net-mvc\">Disable Model Validation in Asp.Net MVC</a></p>\n\n<pre><code>ModelBinders.Binders[typeof(MyModelType)] = new NonValidatingModelBinder();\n</code></pre>\n\n<p>Project got too many (over 100) model classes to register each one manually.</p>\n\n<p>Is there simpler way (maybe key in .config) that turns off model validation completely?</p>\n"},{"tags":["asp.net-mvc","iis7","certificate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13124586,"title":"Combining username/password and client certificate for authentication","body":"<p>The following is my requirement.</p>\n\n<ol>\n<li><p>When user registers, we use standard membership (aspnetdb) to create an account (username+password).</p></li>\n<li><p>In addition, we would like to create a client certificate to every user and ask them to install it on their client PC.</p></li>\n<li><p>When user tries to login into our web application, we want the broweser (IE, Chrome, Firefox and Safari) to automatically prompt to present the certificate </p></li>\n<li><p>In addition to presenting the certificate, they should go to standard login screen where they have to type in username and password.</p></li>\n<li><p>Server is IIS 7/7.5. We do not want to map one-to-one certificate on the server side. Instead, one of the paramaters in the certificate (for example, subject) will be used to map the certificate to the user information.</p></li>\n<li><p>This has to be implemented using ASP.NET MVC 4.0</p></li>\n</ol>\n\n<p>If any of you have solved this problem, please provide the information.</p>\n"},{"tags":["c#","asp.net-mvc","facebook","oauth"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":245,"score":2,"question_id":12610402,"title":"OAuthWebSecurity With Facebook not using email permission as expected","body":"<p>Using the new OAuthWebSecurity for authenticating with facebook, I added the email permission on my facebook app. Now as I can read I need to define a scope to be able to actually get the email in the result. So far without the scope I'm not getting the users email and not sure why  as I can not see where to define the \"scope\"</p>\n\n<p>Its just a rip of the MVC4 default authenticationcontrollers  external login.</p>\n"},{"tags":["asp.net-mvc","error-handling","partial-views"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":13088593,"title":"MVC error page is loaded in partial view","body":"<p>I have a error page with layout that works fine in most cases but when there is an error in a controller that returns a partial view the error page and its layout is placed in the partial view. I guess thats logical but I want the error page to be loaded as full page. How do I accomplish that without changing all error handling. </p>\n\n<p>web.config:</p>\n\n<pre><code>&lt;customErrors mode=\"On\" defaultRedirect=\"~/Error\"&gt;\n  &lt;error statusCode=\"500\" redirect=\"~/SystemPages/ErrorPage\" /&gt;\n  &lt;error statusCode=\"403\" redirect=\"~/SystemPages/FileNotFound\" /&gt;\n  &lt;error statusCode=\"404\" redirect=\"~/SystemPages/FileNotFound\" /&gt;\n&lt;/customErrors&gt;\n</code></pre>\n\n<p>Global.asax:</p>\n\n<pre><code>Shared Sub RegisterGlobalFilters(ByVal filters As GlobalFilterCollection)\n    filters.Add(New HandleErrorAttribute())\nEnd Sub\n</code></pre>\n\n<p>BaseController:</p>\n\n<pre><code>Protected Overrides Sub OnException(ByVal filterContext As ExceptionContext)\n\n    If filterContext Is Nothing Then Return\n\n    If TypeOf (filterContext.Exception) Is FaultException Then\n        Dim CodeName As String = \n        CType(filterContext.Exception, FaultException).Code.Name\n        Dim Message As String = CType(filterContext.Exception, FaultException).Message\n        TempData(\"ErrorMessage\") = Message\n    Else\n        Logging.LogDebugData(HamtaDebugInformation(filterContext.RouteData))\n        Logging.WriteExceptionLog(filterContext.Exception)\n        TempData(\"ErrorMessage\") = filterContext.Exception.Message\n    End If\n\n    Response.Redirect(\"/SystemPages/ErrorPage\")\n\nEnd Sub\n</code></pre>\n\n<p>SearchController:</p>\n\n<pre><code>   Function GetData() As ActionResult\n   ...\n   Return PartialView(\"_Tab\", vmData)\n</code></pre>\n\n<p>ErrorPage:</p>\n\n<pre><code>@Code\nViewData(\"Title\") = \"ErrorPage\"\nLayout = \"~/Views/Shared/_Layout.vbhtml\"\nEnd Code\n\n&lt;div id=\"mainContent\" class=\"oneColumn\"&gt;\n&lt;div class=\"panel\"&gt;\n    &lt;span class=\"panelTLC\"&gt;&lt;/span&gt;\n    &lt;span class=\"panelTRC\"&gt;&lt;/span&gt;\n    &lt;div id=\"inputPanel\" class=\"panelContent\"&gt;\n        &lt;div class=\"modul\"&gt;\n            &lt;div class=\"modulHead\"&gt;\n                &lt;span class=\"TLC\"&gt;&lt;/span&gt;\n                &lt;span class=\"TRC\"&gt;&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div class=\"modulContent\"&gt;\n                &lt;span class=\"TLC\"&gt;&lt;/span&gt;&lt;span class=\"TRC\"&gt;&lt;/span&gt;\n                &lt;p&gt;@ViewBag.ErrorMessage&lt;/p&gt;\n                &lt;p&gt;@TempData(\"ErrorMessage\")&lt;/p&gt;\n                &lt;span class=\"BLC\"&gt;&lt;/span&gt;\n                &lt;span class=\"BRC\"&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;span class=\"panelBLC\"&gt;&lt;/span&gt;&lt;span class=\"panelBRC\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13068170,"title":"One field of the two will be required in Model","body":"<p>I have a situation where I want to be in the model was required only one field of the two.</p>\n\n<pre><code>    public int AutoId { get; set; }\n    public virtual Auto Auto { get; set; }\n\n    [StringLength(17, MinimumLength = 17)]\n    [NotMapped]\n    public String VIN { get; set; }\n</code></pre>\n\n<p>If someone entered the vin, it is converted in the controller on the AutoID. How to force the controller to something like this work?</p>\n\n<pre><code>         public ActionResult Create(Ogloszenie ogloszenie) {\n        information.AutoId = 1;         \n        if (ModelState.IsValid)\n        {\n        ...\n        }..\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","reportviewer"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":5440,"score":1,"question_id":2139223,"title":"ReportViewer problem in google chrome","body":"<p>I am using Reportviewer in my asp.net mvc (C#) application. In IE and Firefox, the reportviewer looks fine.</p>\n\n<p>But in Chrome, the header and body gets shrinked. I was able to correct the header display problem as suggested in <a href=\"http://www.mazsoft.com/blog/post/2009/08/13/ReportViewer-control-toolbar-in-Google-Chrome-browser.aspx\" rel=\"nofollow\">http://www.mazsoft.com/blog/post/2009/08/13/ReportViewer-control-toolbar-in-Google-Chrome-browser.aspx</a>.</p>\n\n<pre><code>  if ($.browser.safari) {\n      $(\"#ReportViewerControl table\").each(function(i, item) {\n         $(item).css('display', 'inline-block');\n      });\n  }\n</code></pre>\n\n<p>But the Body(Viewer) part still appears to be in half of the screen. The problem appears to be with the width of empty second <code>td</code> of the table:</p>\n\n<pre><code>&lt;table cellspacing=\"0\" cellpadding=\"0\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td onpropertychange=\"ShowFixedHeaders()\" id=\"oReportCell\"&gt;....Some Data...&lt;/td&gt;\n      &lt;td height=\"0\" width=\"100%\"&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The Second td in the above table is empty with 100% width, this may be the cause of the bug in chrome. How can i remove the width of the second td or is there any fix for this?\n<img src=\"http://www.freeimagehosting.net/uploads/13114a4f00.png\" alt=\"ReportViewer Design\"></p>\n\n<p>How can i access the element inside nested iframe?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":190,"score":0,"question_id":12945737,"title":"user.identity.name and authenticationtype blank in mvc 3 with windows authentication after about 2 minutes","body":"<p>I am using windows authentication in my mvc 3 app and usually everything works fine. However, if i leave a certain page up for about 2 minutes, and then make an ajax request, the User.Identity.Name (in the controller) returns blank, as does the authenticationtype. This causes a failure when i check user.isinrole(whatever). Usually clearing the cache will fix the problem, but not regular refreshing. Sometimes i need to clear the cache a few times. </p>\n\n<p>I am using chrome, and didn't notice the bug when I tried in IE (I haven't tried waiting longer than it takes in chrome), so is it possible the bug is with chrome?\nEDIT: It happens in firefox too.</p>\n\n<p>I noticed the time to failure was similar to the issue in <a href=\"http://stackoverflow.com/questions/12675593\">User.Identity.Name sometimes blank with Windows authentication</a>\n but i did not see anything about anonymous authentication in my web.config</p>\n\n<p>in <a href=\"http://stackoverflow.com/questions/363358\">user.identity.name becames Blank after a while</a> the problem seemed to be that anonymous authentication is enabled on their IIS server, and I have that too, but I wanted it set on my server. There are certain pages that need to be accessed anonymously, so the authentication is all enforced by MVC and not by the server, so IIS has anonymous and windows authentication enabled</p>\n\n<p>I have authentication mode=\"Windows\" in my system.web tag, and nothing about authorization in web.config. In the registerglobals function in global.asax.cs, i have</p>\n\n<pre><code>filters.Add(new RequireWindowsAuth());\n</code></pre>\n\n<p>that's a class that inherits from AuthorizeAttribute, and it overrides the OnAuthorization method to do something like the following</p>\n\n<pre><code>if(!User.IsInRole(\"Admin\") &amp;&amp; AdminAttr is defined)\n     filterContext.Result = new HttpStatusCodeResult(403, \"You are not authorized to view this page\");\nelse if(AllowAnonymousAttribute is not found)\n    base.OnAuthorization(filterContext);\n</code></pre>\n\n<p>when the error happens, i get that exact 403 response from the server.</p>\n\n<p>the action requested has the admin attr and not the allowanonymous attr defined on it</p>\n\n<p>here is how i check for attrs being defined</p>\n\n<pre><code>filterContext.ActionDescriptor.IsDefined(attr, true) || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AdminAttribute), true)\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","mono","browser-cache","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13120734,"title":"How to get fresh copy if OutputCache(Location = OutputCacheLocation.Downstream is used","body":"<p>Mono MVC2 application uses controller below to cache order page in browser.</p>\n\n<p>If F5 is pressed in browser, old page is still returned to browser.\nHow to return fresh page if F5 is pressed ?\nIt looks like page is cached in server but OutputCacheLocation.Downstream must cache page only in borwser. Is this bug?</p>\n\n<pre><code>    [Authorize]\n    public class DetailController : ControllerBase\n    {\n        [OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = \"_entity\")]\n        public ActionResult Index(string _entity, int? orderId)\n        {\n...\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","linq","deferred-execution"],"answer_count":4,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":101,"score":7,"question_id":13115008,"title":"Does LINQ deferred execution occur when rendering the view, or earlier?","body":"<p>Given a very basic LINQ that is returned to a MVC view, at what exact point does the deferred execution fire?</p>\n\n<p>In the controller:</p>\n\n<pre><code>public ActionResult Index()\n{\n    var model = _fooService.GetAll();\n    return View(model);\n}\n</code></pre>\n\n<p>In the model:</p>\n\n<pre><code>@foreach (var item in Model) {    \n    &lt;tr&gt;\n        &lt;td&gt;@item.Bar&lt;/td&gt;\n   &lt;/tr&gt;\n}\n</code></pre>\n\n<p>The query is not executed when we call <code>_fooService.GetAll()</code> of course, but is deferred to some later point - but at which exact point is it executed?</p>\n\n<ul>\n<li>The <code>return View(model);</code> statement in the controller (doesn't look like it)?</li>\n<li>The <code>@foreach (var item in Model)</code> line in the view?</li>\n<li>The first time the <code>@item.Bar</code> line in the view is hit?</li>\n<li>Something else that occurs in between <code>return View(model);</code> and the view being rendered?</li>\n</ul>\n"},{"tags":["asp.net-mvc","mvc","asp.net-mvc-2","validation","asp.net-mvc-3"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1899,"score":3,"question_id":6495510,"title":"MVC 2 vs MVC 3 custom validation attributes using DataAnnotationsModelValidatorProvider.RegisterAdapter","body":"<p>I read on some post, but cant find it now that in MVC 3 it was not really needed to create a Validator, only the Attribute.  Is this true?  I do say I find it confusing that the attribute has the IClientValidatable on it.  So what does the DataAnnotationsModelValidator class do if the annotation has the client side script name (IClientValidatable), and the ability to validate (ValidationAttribute IsValid)?</p>\n\n<p>It would be really nice if I didnt have to register the Attribute with the Validator in the global.  Can this be done?  Did I read some bad advise?</p>\n\n<p>EDIT: Interestingly enough I just tested it by excluding the validator, put all the logic in IsValid and it works great.  I guess the only thing that might be missing would be the controller context, but I am not sure that is useful in validation.  The IsValid has ValidationContext which has ServiceContainer if I needed a service.  Any real disadvantage I am not picking up on here?</p>\n\n<p>EDIT 2:\nI will start with a validator from this example: <a href=\"http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx</a></p>\n\n<p>The Attribute:</p>\n\n<pre><code>public class RequiredIfAttribute : ValidationAttribute, IClientValidatable\n{\n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue)\n    {\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    public override bool IsValid(object value)\n    {\n        return innerAttribute.IsValid(value);\n    }\n\n    public System.Collections.Generic.IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule()\n        {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"requiredifattribute\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p>The Validator:</p>\n\n<pre><code>public class RequiredIfValidator : DataAnnotationsModelValidator&lt;RequiredIfAttribute&gt;\n{\n    public RequiredIfValidator(ModelMetadata metadata, ControllerContext context, RequiredIfAttribute attribute)\n        : base(metadata, context, attribute)\n    {\n    }\n\n    public override IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules()\n    {\n        return base.GetClientValidationRules();\n    }\n\n    public override IEnumerable&lt;ModelValidationResult&gt; Validate(object container)\n    {\n        var field = Metadata.ContainerType.GetProperty(Attribute.DependentProperty);\n        if (field != null)\n        {\n            var value = field.GetValue(container, null);\n            if ((value == null &amp;&amp; Attribute.TargetValue == null) ||\n                (value.Equals(Attribute.TargetValue)))\n            {\n                if (!Attribute.IsValid(Metadata.Model))\n                    yield return new ModelValidationResult { Message = ErrorMessage };\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>With the current code above, I need to register in the Global.asax.cs file:</p>\n\n<pre><code>DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(RequiredIfAttribute), typeof(RequiredIfValidator));\n</code></pre>\n\n<p>But if I move everything into just the attribute, I dont have to register it:</p>\n\n<pre><code>public class RequiredIfAttribute : ValidationAttribute, IClientValidatable\n{\n    private RequiredAttribute innerAttribute = new RequiredAttribute();\n    public string DependentProperty { get; set; }\n    public object TargetValue { get; set; }\n\n    public RequiredIfAttribute(string dependentProperty, object targetValue)\n    {\n        this.DependentProperty = dependentProperty;\n        this.TargetValue = targetValue;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext validationContext)\n    {\n        var field = validationContext.ObjectInstance.GetType().GetProperty(DependentProperty);\n        if (field != null)\n        {\n            var dependentValue = field.GetValue(validationContext.ObjectInstance, null);\n            if ((dependentValue == null &amp;&amp; TargetValue == null) ||\n                (dependentValue.Equals(TargetValue)))\n            {\n                if (!innerAttribute.IsValid(value))\n                    return new ValidationResult(ErrorMessage);\n            }\n        }\n        return ValidationResult.Success;\n    }\n\n    public System.Collections.Generic.IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        ModelClientValidationRule modelClientValidationRule = new ModelClientValidationRule()\n        {\n            ErrorMessage = FormatErrorMessage(metadata.DisplayName),\n            ValidationType = \"requiredifattribute\"\n        };\n        modelClientValidationRule.ValidationParameters.Add(\"requiredifattribute\", DependentProperty);\n        yield return modelClientValidationRule;\n    }\n}\n</code></pre>\n\n<p>Is there an problem with the last bit of code replacing all of the other code?  Why would I keep the validator class?</p>\n"},{"tags":["asp.net-mvc","entity-framework","context"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1143,"score":5,"question_id":5205606,"title":"EF Context Management","body":"<p>What is the best way to manage the context of Entity Framework when using MVC application?</p>\n\n<p>I am using a Repository/Service pattern.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>After looking through some of these questions: stackoverflow.com/users/587920/sam-striano, I am more confused then before. Some say use the context per repository, but wht if I want to use multiple repositories in one controller method?</p>\n\n<p>And to follow good separation design, how do you use UnitOfWork in the MVC app with out making it dependent on EF? I want to be able to unit test my controllers, model, services, etc. using a mock context?</p>\n"},{"tags":["c#",".net","asp.net-mvc","razor"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13117079,"title":"How do you code a \"Create\" view for a model?","body":"<p>I have a <code>many-to-many</code> field in Menu model named <code>Roles</code>, i'm trying to create a 'create' view for the model.</p>\n\n<p>my create action methods:</p>\n\n<pre><code>    public ActionResult Create()\n    {\n        ViewBag.ParentMenuId = new SelectList(_db.Menus, \"Id\", \"Name\");\n        ViewBag.Roles = new SelectList(_db.UserRoles.ToList(), \"Id\", \"Name\");\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Create(Menu menu)\n    {\n        if (ModelState.IsValid)//the state is always **invalid**\n        {\n            _db.Menus.Add(menu);\n            _db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n        ViewBag.ParentMenuId = new SelectList(_db.Menus, \"Id\", \"Name\", menu.ParentMenuId);\n        return View(menu);\n    }\n</code></pre>\n\n<p>my view(<strong>Create.cshtml</strong>):</p>\n\n<pre><code>    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Roles, \"Roles\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.ListBox(\"Roles\")\n        @Html.ValidationMessageFor(model =&gt; model.Roles)\n    &lt;/div&gt;\n</code></pre>\n\n<p>how to fix it? I'm getting the following error:</p>\n\n<p><code>The ViewData item that has the key '' is of type '' but must be of type 'IEnumerable&lt;SelectListItem&gt;'</code></p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13124073,"title":"How to reuse ActionResult method in MVC","body":"<p>I am new to ASP.Net,</p>\n\n<p>i have the setup like this </p>\n\n<pre><code>routes.MapRoute(\n            \"Default\", // Route name\n            \"{controller}/{action}/{id}\", // URL with parameters\n            new { controller = \"Home\", action = \"Invoke\", id = \"Folder1/Page1\" } // Parameter defaults\n        );\n</code></pre>\n\n<p>when i run the project it will display the page1, i have a ActionResult method in my cs like this.</p>\n\n<pre><code> public ActionResult Invoke(string Id)\n    {\n        ViewBag.Title = Id;\n        return View(Id);\n    }\n</code></pre>\n\n<p>in my msater page this is an ActionLink like this,</p>\n\n<pre><code>&lt;%: Html.ActionLink(\"Page2\", \"Invoke\", new { id = \"Folder1/Page1\" })%&gt;\n</code></pre>\n\n<p>when i click this link, it not directing to page2 , it just showing error msg.</p>\n\n<p>some thing i missed here ?</p>\n"},{"tags":["c#","javascript","ajax","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13123666,"title":"Call controller method with List<MyItem> parameter via ajax","body":"<p>I have this class in my c# code:</p>\n\n<pre><code>public class MyItem\n    {\n        public int LocationId { get; set; }\n        public int Value { get; set; }\n        public int ddlId { get; set; }\n    }\n</code></pre>\n\n<p>Here is my Js/Ajax code:</p>\n\n<pre><code>var array = new Array();\ngrid.forEachRow(function (id) {\n        var object = {\n            LocationId: id,\n            Value: someValue,\n            ddlId: otherValue\n        };\n        array.push(object);\n    });\n\n$.ajax({\n    type: \"POST\",\n    url: \"/MyController/SaveTheList\",\n    data: { myList: array },\n    success:function() { }\n });\n</code></pre>\n\n<p>And here is the method in the controller:</p>\n\n<pre><code> [HttpPost]\n public ActionResult SaveTheList(List&lt;MyItem&gt; myList)\n { }\n</code></pre>\n\n<p>The method gets hit, and myList has the exact length, but all the values in the objects are 0.</p>\n"},{"tags":["asp.net-mvc","security","https","hosting","web-hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":13100290,"title":"Does the RequireHttpsAttribute place any requirements on the hosting provider?","body":"<p>I would like to publish a website. I would like the website to run over HTTPS. I have read about the requirehttpsattribute: <a href=\"http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx</a></p>\n\n<p>Is https done at the application level or does the hosting provider need to support this as well?</p>\n"},{"tags":["jquery","ajax","asp.net-mvc","asp.net-mvc-3","asp.net-mvc-4"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13092181,"title":"$.ajax call receives Resource not Found but the MVC debug says route is hit?","body":"<p>I'll try to explain in as much detail as possible my setup.</p>\n\n<p>1) I'm using an Area (MVC 4).  Here's the folder and file setup:\n<img src=\"http://i.stack.imgur.com/EyUH6.jpg\" alt=\"enter image description here\">\n2) I'm resolving by default straight to my Area (not a Home controller in the root views) on purpose (I don't really need the Home controller that's not related to this question, just some background info)\n3) My global.asax registration of routes looks like this:</p>\n\n<pre><code>   protected void Application_Start()\n    {\n        AreaRegistration.RegisterAllAreas();\n\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n\n        WebApiConfig.Register(GlobalConfiguration.Configuration);\n        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n        BundleConfig.RegisterBundles(BundleTable.Bundles);\n    }\n</code></pre>\n\n<p>4) My route.config looks like this:</p>\n\n<pre><code>public static void RegisterRoutes(RouteCollection routes)\n{\n    routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n\n    // Purposely not going to use the Home Controller (just a convention I want in place)\n    routes.MapRoute(\"Default\", \"\", new { area = \"Search\", controller = \"Member\", action = \"Index\", id = UrlParameter.Optional }).DataTokens.Add(\"area\", \"Search\");\n}\n</code></pre>\n\n<p>5) My area's registration routing looks like this:</p>\n\n<pre><code>   public class MemberAreaRegistration : AreaRegistration\n    {\n\n        public override string AreaName\n        {\n            get { return \"Search\"; }\n        }\n\n\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\"Search_Member_GetMemberByContractNumber\", \"Search/Member/{id}\", defaults: new { controller = \"Member\", action = \"GetMemberByContractNumber\", id = UrlParameter.Optional });\n            context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", defaults: new { controller = \"Member\", action = \"Index\", id=UrlParameter.Optional});\n        }\n\n    }\n</code></pre>\n\n<p>6) I have a controller with this action:</p>\n\n<pre><code>[HttpGet]\npublic JsonResult GetMemberByContractNumber(int contractNumber)\n{\n    Member memberDto = MemberCRUD.RetrieveMember(contractNumber);\n\n    JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);\n\n    Json(JsonConvert.SerializeObject(member));\n\n    return member;\n} \n</code></pre>\n\n<p>7) I have a view that's trying to send an ajax request to that action:</p>\n\n<pre><code>// Get the results &amp; Bind to grid\n$(function () {\n    var members = [];\n    $.getJSON('Search/Member/26049', function (data) {\n        members = data;\n        grid = new Slick.Grid(\"#searchResults-Grid\", members, columns, options);\n    });\n});\n</code></pre>\n\n<p><strong>What works</strong>: I can run the site, it hits my Member's Index() action and loads the Member's Index View.  That's not the problem here.</p>\n\n<p><strong>What the problem is</strong>: I can't get this to resolve...it doesn't find my controller and action in the jQuery getJSON request 'Search/Member/26049'</p>\n\n<p>** The error I get in FireBug**:</p>\n\n<pre><code>http://localhost/OurappName/Search/Member/26049 404 Not Found\n        19ms\nin the response:\n&lt;b&gt; Requested URL: &lt;/b&gt;/ballysearch/Search/Member/26049&lt;br&gt;&lt;br&gt;\n</code></pre>\n\n<p><strong>What I've Tried</strong>: Originally in my area's route config, I had that first line at the end so tried moving it up.  I'm talking about the context.MapRoute(\"Search_Member_GetMemberByContractNumber\", \"Search/Member/{id}\"..I had that after my default route.  Then switched up cause I figured it's always going to obviously hit my default route..which should really just be a \"catch-all\" route at the end in this case instead.</p>\n\n<p>I have tried several variations of the url from the getJSON such as:\n'Member/26049'</p>\n\n<p>I'm <em>pretty sure</em> my controller's action is fine the way it's setup.</p>\n\n<p>I know it's probably a route issue but I do not see what it is.</p>\n\n<p>UPDATE:</p>\n\n<p>here's the route debug results</p>\n\n<p><img src=\"http://i.stack.imgur.com/4Rc6X.jpg\" alt=\"enter image description here\"></p>\n\n<p>UPDATE:</p>\n\n<p>Looks now like maybe I was thinking all along it was a route issue but at least now it's ok so not sure what this error means by \"Resource\"</p>\n\n<p>Here's the routes I have now that seem to be working in my MemberAreaRegistration.cs</p>\n\n<p><img src=\"http://i.stack.imgur.com/n9a6R.jpg\" alt=\"enter image description here\"></p>\n\n<p>context.MapRoute(\"Search_Member\", \"Search/Member/{contractNumber}\", new { controller = \"Member\", action = \"GetMemberByContractNumber\", contractNumber = UrlParameter.Optional });\n    context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", new {controller=\"Member\", action = \"Index\", id = UrlParameter.Optional });</p>\n\n<p>now not sure why I'm getting this resource error.  In Firebug, there's some additional info but I still don't get what's wrong with my controller code if that's the case or my jQuery code if that's also an issue...I don't see it:</p>\n\n<pre><code>[HttpException]: The controller for path &amp;#39;/OurAppName/Search/Member/1234&amp;#39; was not found or does not implement IController.\n</code></pre>\n\n<p>Couple more views of the error from firebug still:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ByM2i.jpg\" alt=\"enter image description here\"><img src=\"http://i.stack.imgur.com/eEN1F.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>UPDATE -------------------------------------------</strong> 10/27/2012:</p>\n\n<p><strong>Want to post my current attempt detailed info to this point</strong></p>\n\n<p>My routes are setup like this in my <strong>Route.Config</strong>:</p>\n\n<pre><code>    public static void RegisterRoutes(RouteCollection routes)\n    {\n        routes.IgnoreRoute(\"{resource}.axd/{*pathInfo}\");\n        routes.IgnoreRoute(\"favicon.ico\");\n        routes.IgnoreRoute(\"{*favicon}\", new { favicon = @\"(.*/)?favicon.ico(/.*)?\" });\n        routes.IgnoreRoute(\"{*staticfile}\", new { staticfile = @\".*\\.(css|js|gif|jpg)(/.*)?\" });\n        routes.IgnoreRoute(\"{*robotstxt}\", new { robotstxt = @\"(.*/)?robots.txt(/.*)?\" });\n\n        // Purposely not going to use the Home Controller, we don't need it so hence the DataTokens to tell MVC to go straight to my Area called Search to look for the member controller for the default route when you first hit the View\n        routes.MapRoute(\"Default\", \"\", new { area = \"Search\", controller = \"Member\", action = \"Index\", id = UrlParameter.Optional }).DataTokens.Add(\"area\", \"Search\");\n    }\n</code></pre>\n\n<p>My Area's registration routes:</p>\n\n<pre><code>namespace OurApp.Web.Areas.Search.Views.Member\n{\n    public class MemberAreaRegistration : AreaRegistration\n    {\n\n        public override string AreaName\n        {\n            get { return \"Search\"; }\n        }\n\n\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n\n\n            context.MapRoute(\"Search_Member\", \"Search/Member/{contractNumber}\", new { controller = \"Member\", action = \"GetMemberByContractNumber\", contractNumber = UrlParameter.Optional });\n            context.MapRoute(\"Search_Default\", \"Search/{controller}/{action}/{id}\", new {controller=\"Member\", action = \"Index\", id = UrlParameter.Optional });\n        }\n\n    }\n}\n</code></pre>\n\n<p>Finally my entire Controller Code:</p>\n\n<pre><code>namespace OurApp.Web.Areas.Search.Controllers\n{\n\n    public class MemberController : Controller\n    {\n\n        public ActionResult Index()\n        {\n            return View();\n        }\n\n\n        [HttpGet]\n        public JsonResult GetMemberByContractNumber(int contractNumber)\n        {\n            Member memberDto = MemberCRUD.RetrieveMember(contractNumber);\n\n            JsonResult member = Json(memberDto, JsonRequestBehavior.AllowGet);\n\n            return Json(member, JsonRequestBehavior.AllowGet);\n\n            return member;\n        }\n\n\n        [HttpGet]\n        public ActionResult TestTheRoute(int daveIdTest)\n        {\n            return null;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>1)</strong> I have no begin form tag in my View.  That's because I'm only trying to just test this $.ajax() function out and later I'll add a form and invoke that call from some event.  So that should not matter, that I don't have a form element yet right?  I simply have $.ajax call at the top of my view in the open so it fires off on its own.</p>\n\n<p><strong>2)</strong> It seems like it's hitting my routes ok as you can see above.  I just wonder if it's how I'm forming my $.ajax() call in terms of the callback and maybe related to, my controller method is not fully correct?  I'm returning json from my action but it's ok to have how I have it I assume.  I don't know, unless I can try something different in my action method that's returning the json.  I don't know if my $.ajax call needs to specify the return type expected in the callback now that I just thought about it as I am typing this but I'll check that also.</p>\n\n<p>for example when I setup the $.ajax call like this (see below), I'm getting a response back so I think that tells me IIS is able to send a response after it hit my route and controller ok.  So I'm thinking it's my action method that's not returning a correct json object, not really sure but at this point, if the route debugger from Phil Haack shows it's definitely hitting my routes, then it can't be that...the ajax call IS hitting my route.  </p>\n\n<pre><code>   $.ajax({\n        url: 'OurApp/Search/Member/26049',\n        type: \"GET\",\n        dataType: \"json\",\n        success: function (response) \n        {\n            alert('we got a mother fing response!');\n            grid = new Slick.Grid(\"#memberSearchResults-Grid\", response.data, columns, options);\n        },\n        error: function (e) { alert('response error: '); }\n    });\n</code></pre>\n\n<p>so I get the alert for the error case above, it's hitting this.  I don't know if I will always get a response...probably I assume IIS would respond in a failed request AND successful route request...?</p>\n\n<p>I tried to attach to the worker process and then refresh the page after setting a debug point on the first line of that action method that's returning json in my controller but that line is never hit.  I don't know why.  I can't get any debug points hit, not </p>\n\n<p>Here's the request header from firebug just for additional info:</p>\n\n<pre><code>GET http://localhost/OurApp/Search/Member/26049 HTTP/1.1\nHost: localhost\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nProxy-Connection: keep-alive\n</code></pre>\n\n<p>Here's some of the resopnse and what's interesting is even though it shows my route is being hit on my controller, this error says no, it isn't hitting your controller so I'm so dumbfounded at this point on wtf is going on and where:</p>\n\n<p>HeadersResponseCacheHTML</p>\n\n<p>\n    \n        The resource cannot be found.\n        \n         body {font-family:\"Verdana\";font-weight:normal;font-size: .7em;color:black;} \n         p {font-family:\"Verdana\";font-weight:normal;color:black;margin-top: -5px}\n         b {font-family:\"Verdana\";font-weight:bold;color:black;margin-top: -5px}\n         H1 { font-family:\"Verdana\";font-weight:normal;font-size:18pt;color:red }\n         H2 { font-family:\"Verdana\";font-weight:normal;font-size:14pt;color:maroon }\n         pre {font-family:\"Lucida Console\";font-size: .9em}\n         .marker {font-weight: bold; color: black;text-decoration: none;}\n         .version {color: gray;}\n         .error {margin-bottom: 10px;}\n         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }\n        \n    </p>\n\n<pre><code>&lt;body bgcolor=\"white\"&gt;\n\n        &lt;span&gt;&lt;H1&gt;Server Error in '/OurApp' Application.&lt;hr width=100% size=1 color=silver&gt;&lt;/H1&gt;\n\n        &lt;h2&gt; &lt;i&gt;The resource cannot be found.&lt;/i&gt; &lt;/h2&gt;&lt;/span&gt;\n\n        &lt;font face=\"Arial, Helvetica, Geneva, SunSans-Regular, sans-serif \"&gt;\n\n        &lt;b&gt; Description: &lt;/b&gt;HTTP 404. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable. &amp;nbsp;Please review the following URL and make sure that it is spelled correctly.\n        &lt;br&gt;&lt;br&gt;\n\n        &lt;b&gt; Requested URL: &lt;/b&gt;/OurApp/Search/Member/26049&lt;br&gt;&lt;br&gt;\n\n        &lt;hr width=100% size=1 color=silver&gt;\n\n        &lt;b&gt;Version Information:&lt;/b&gt;&amp;nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272\n\n        &lt;/font&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>and related mvc route debugger result for this request:</p>\n\n<p><img src=\"http://i.stack.imgur.com/bBItP.jpg\" alt=\"enter image description here\"></p>\n\n<p>what gets me is that it shows \"The controller for path &#39;/OurApp/Search/Member/26049; was not found or does not implement IController.\"  But if the route debug is saying it is being hit, wtf?  I'm so lost.  Also again I can't debug it so that tells me it ISN'T hitting my controller or controller action.</p>\n"},{"tags":["asp.net","asp.net-mvc","namespaces","global-asax"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13123142,"title":"Controller MVC3 link to Folder/Controller/View","body":"<p>I currently got a problem with the namespaces I added this into my global.asax:</p>\n\n<pre><code>routes.MapRoute(\n \"Admin\",\n \"Admin/{controller}/{action}/{id}\",\n new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional }, \n        null, new string[] {\"project.Controllers.Admin\"}\n);\n</code></pre>\n\n<p>Now my controller is being reached when I type into the url localhost/Admin/Controller/<strong>*</strong>\nPut my controller isn't giving me the right Views. It's giving me the View in Controller/Views. And I want the Views located in Admin/Controller/Views. I tried linking to them directly but thats not going to well. Any idea how this is done?</p>\n"},{"tags":["asp.net-mvc","html.dropdownlistfor","html.dropdownlist"],"answer_count":3,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":10984,"score":18,"question_id":506001,"title":"ASP.NET MVC dropdown with a default empty option","body":"<p>Is there a way to include a default empty option (or with text) if there is no selected value for a dropdownlist?</p>\n"},{"tags":["asp.net-mvc","html5","section"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13123182,"title":"Editable section tag and posting its value?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6247702/using-html5-how-do-i-use-contenteditable-fields-in-a-form-submission\">Using HTML5, how do I use contenteditable fields in a form submission?</a>  </p>\n</blockquote>\n\n\n\n<p>We've been using a section tag in HTML 5 to capture rich input from the user.  This is inside a .NET MVC application.  </p>\n\n<pre><code>@using(Html.BeginForm()){     \n     &lt;section  id=\"Part2\" name=\"Part2\" contenteditable=\"true\" class=\"selected track\" &gt;\n     &lt;/section&gt;                  \n     &lt;span id=\"Part2-input-error\" class=\"error-message hide\"&gt;&lt;/span&gt;\n }\n</code></pre>\n\n<p>When posting the value of the form, there is no values posted for the section text.  Using just this form, no values are present in the Request key collection.  Is it possible to post the values of the editable section back to the server?</p>\n"},{"tags":["asp.net-mvc","json","mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13121149,"title":"How to return exception data in json format from App_Error in global.asax?","body":"<p>I'm working on Asp.net MVC project as a single page application for error handling I want to return json data from App_Error method in global.asax to UI and show it by jQuery or call a controller and return partialView.\nI don't want to refresh the page or redirect it to Error page.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-2"],"answer_count":17,"favorite_count":26,"up_vote_count":63,"down_vote_count":0,"view_count":55835,"score":63,"question_id":1625327,"title":"EditorFor() and html properties","body":"<p>Asp.Net MVC 2.0 preview builds provide helpers like </p>\n\n<pre><code>Html.EditorFor(c =&gt; c.propertyname)\n</code></pre>\n\n<p>If the property name is string, the above code renders a texbox.</p>\n\n<p>What if I want to pass in MaxLength and Size properties to the text box or my own css class property?</p>\n\n<p>Do I need to create one template for each size and length combinations in my application? If so, that doesn't make the default templates that usable.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13121560,"title":"Should i build Controllers for all Categories in a News Site?","body":"<p>i'm new to asp.net mvc i'm tryin to build a news site with asp.net mvc3; that's something like <a href=\"http://african.howzit.msn.com/\" rel=\"nofollow\">http://african.howzit.msn.com/</a> my question is for all the categories (Home, News, Business, Entertainment, Career) should i just go ahead and build controllers for them all and bring them together in a starting page or do i need to come up with a way to categorize these categories from just one controller; I guess i need to get the architecture right. Thanks in advance!!</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","url-rewriting","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13122078,"title":".NET MVC3 Routing URL Rewriting","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/25259/how-does-stackoverflow-generate-its-seo-friendly-urls\">How does StackOverflow generate its SEO-friendly URLs?</a>  </p>\n</blockquote>\n\n\n\n<p>I have an MVC3 site for which I would like to clean up the urls that contain spaces in the names of the products.</p>\n\n<p>Currently, the url displays as: <code>/products/some%20ugly%20url</code></p>\n\n<p>I would like to display: <code>/products/some-clean-url</code></p>\n\n<p>Is it possible with MVC3 routing to rewrite the ugly url to the clean one?</p>\n"},{"tags":["jquery","asp.net-mvc","unobtrusive-validation"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13122097,"title":"How to setup an unobstrusive validation group?","body":"<p>I've created a MVC 4, validation attribute that will compare 2 fields, that represent a year range, to validate that the end year is not before the start year.</p>\n\n<p>I've created the following JS:</p>\n\n<pre><code>jQuery.validator.unobtrusive.adapters.add(\n        'yearrange', ['startyear', 'endyear'], function (options) {\n            options.rules['yearrange'] = options.params;\n            options.messages['yearrange'] = options.message;        \n        }\n    );\n\njQuery.validator.addMethod(\n            'yearrange', function (value, element, params) {\n\n                var startYearElementName = params.startyear;\n                var endYearElementName = params.endyear;\n\n                var startYear = $('#' + startYearElementName).val();\n                var endYear = $('#' + endYearElementName).val();\n\n                if (startYear == '' || endYear == '') {\n                    return true;\n                }\n\n                return (+startYear &lt;= +endYear);\n\n            }, '');\n</code></pre>\n\n<p>I'm applying the validation attribute to both properties in my ViewModel:</p>\n\n<pre><code>[YearRange(\"StartYear\", \"EndYear\", \"yearRangeInvalid\")]\npublic int StartYear { get; set; }\n\n[YearRange(\"StartYear\", \"EndYear\", \"yearRangeInvalid\")]\npublic int EndYear { get; set; }\n</code></pre>\n\n<p>I don't want to use a summary validation message.</p>\n\n<p>Can I use validation groups to trigger the re-validation of both fields when one is changed?</p>\n\n<p>And can it be configured in the adapters.add callback above?</p>\n\n<p>I unsuccessfully tried something like:</p>\n\n<pre><code>jQuery.validator.unobtrusive.adapters.add(\n        'yearrange', ['startyear', 'endyear'], function (options) {\n            options.rules['yearrange'] = options.params;\n            options.messages['yearrange'] = options.message;\n\n            jQuery.validator.groups[options.params.startyear] = \"yearrange\";\n            jQuery.validator.groups[options.params.endyear] = \"yearrange\";\n\n        }\n    );\n</code></pre>\n"},{"tags":["c#","javascript","asp.net-mvc","google-docs-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13121941,"title":"GoogleDocs Viewer double page PDF","body":"<p>Basically im creating a website for a friend who is publishing a montly free magazine. \nHe is NOT tech savy in the slightest so i am trying to make publishing it online as simple as possible!</p>\n\n<p>Im making the site in C# MVC 4 and im using the Google Docs api to get a list of PDFs from his google docs account then displaying it online using an iframe e.g.:</p>\n\n<pre><code>&lt;iframe src=https://docs.google.com/file/filename/preview width=\"100%\" height=\"100%\" frameBorder=\"0\" marginheight=\"0\" marginwidth=\"0\" scrolling=\"no\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>However he has some double page ads in the magazine so it would be better if i could display the PDF as double paged also. e.g:\n<a href=\"http://www.mitsubishi-motors.nl/digital/1043/index/book/outlanderbrochure.aspx\" rel=\"nofollow\">http://www.mitsubishi-motors.nl/digital/1043/index/book/outlanderbrochure.aspx</a>\n(without being flash / all the extra stuff)</p>\n\n<p>Does anyone know of a viewer that can interact with google docs and have this functionally?</p>\n\n<p>Thanks,\nBen</p>\n"},{"tags":["c#","javascript","asp.net-mvc","devexpress","onload"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":117,"score":1,"question_id":12653237,"title":"DevExpress MVC controls generating 2mb of javascript per page load","body":"<p>We've started using the DevExpress MVC controls, which requires this code added in our Site.Master:</p>\n\n<pre><code>&lt;% Html.DevExpress().RenderScripts(Page,\n       new Script { ExtensionSuite = ExtensionSuite.GridView },\n       new Script { ExtensionSuite = ExtensionSuite.HtmlEditor },\n       new Script { ExtensionSuite = ExtensionSuite.Editors },\n       new Script { ExtensionSuite = ExtensionSuite.NavigationAndLayout },\n       new Script { ExtensionSuite = ExtensionSuite.Chart },\n       new Script { ExtensionSuite = ExtensionSuite.Report }\n ); %&gt;\n</code></pre>\n\n<p>But this renders a massive 2mb javascript file through a handler called DXR.axd. When using Firefox this javascript is too large and increases the page's onload time from ~500 ms to ~5,000 ms (I timed it before and after).  </p>\n\n<p>Using Chrome it loads in ~750ms</p>\n\n<p>This is a severe performance hit and causes a very noticeable pause when the page is rendering.  Firefox reports that the DOMContentLoaded event takes 5 seconds to fire (because it takes so long to load and parse that 2mb of javascript)</p>\n\n<p>What can I do to fix this problem?</p>\n\n<p>I note that their own site <a href=\"http://mvc.devexpress.com\" rel=\"nofollow\">http://mvc.devexpress.com</a> has the exact same problem: if you view source and look for \"DXR.axd\" then download that file it is even bigger, at 2.6mb, and they also have a very slow onload in Firefox</p>\n"},{"tags":["asp.net-mvc","localization","asp.net-mvc-3"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1763,"score":5,"question_id":5090751,"title":"Changing the default ModelState error messages in ASP MVC3","body":"<p>I have my resource files in separate assembly MyApp.Resources.dll. I can use the resources without any problem but the issue appears when I want to change (localize) the default validation messages:</p>\n\n<p><em>\"The {0} field is required.\"</em> and <em>\"The value '{0}' is not valid for {1}.\"</em></p>\n\n<p>The <a href=\"http://forums.asp.net/p/1512140/3608427.aspx\">solution</a> <code>DefaultModelBinder.ResourceClassKey = \"MyApp.Resources.Global\";</code> does not work because it requires the ResourceClassKey to be under App_GlobalResources folder in the web project. </p>\n\n<p>What should be the fix for me ?</p>\n\n<p>Regards</p>\n"},{"tags":["jquery",".net","asp.net-mvc","entity-framework"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13120862,"title":"ASP.net Dynamically add a table join and hook up existing table from user selection","body":"<p>I have a table that joins two together: table B contains key data that links table C to table A and retains the ability to have table C linked to any future table.</p>\n\n<p>I know how to create and add new entries of C based on user input and create table B from user input. However, to link table B to A and C, it requires input of the key data of A and C, then C 'exists in A'. From the users perspective, they want a clean interface, so they don't want to have to manually enter the key id of A and C when B is created.</p>\n\n<p>Instead, what I want is that the creation of the join table B is hidden and it appears they are just selecting C. So from a drop down list or multi box, they select their item, a new entry in B is added to the list&lt;> and the key data from A and C is assigned. </p>\n\n<p>With the inter-mixing of views and controllers, I am finding it very difficult getting this concept working and assigning to correct information.</p>\n\n<p>I have been following tutorials such as: <a href=\"http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/adding-a-new-category-to-the-dropdownlist-using-jquery-ui\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/adding-a-new-category-to-the-dropdownlist-using-jquery-ui</a></p>\n\n<p>However this is very static.</p>\n\n<p>I will happily post my code, but it is pretty standard, Recipe is A, RecipeIngredient is B and Ingredient is C.</p>\n"},{"tags":["asp.net",".net","asp.net-mvc","dependency-injection","structuremap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13119662,"title":"Structure Map violates the constraint of type parameter 'CONCRETETYPE'","body":"<p>I have a web application developed in ASP.NET 2010. I have used the Dependency Injection with StructureMap in ASP.NET MVC.  I'm trying to get started with Structure Map. I'm using </p>\n\n<p>I've built a simple boot strapper, but when I run the website I get the following error:</p>\n\n<blockquote>\n  <p>StructureMap.Configuration.DSL.Expressions.CreatePluginFamilyExpression`1[System.Web.Mvc.IActionInvoker].Use:\n  type argument\n  'TestWebsite.Web.Controllers.Factories.InjectingActionInvoker'\n  violates the constraint of type parameter 'CONCRETETYPE'.</p>\n</blockquote>\n\n<p><strong>Code Block:</strong></p>\n\n<pre><code> public static void ConfigureStructureMap()\n    {\n        ObjectFactory.Initialize(x =&gt;\n        {\n            //registry per assembly recommended\n            x.AddRegistry&lt;WebRegistry&gt;();\n            x.AddRegistry&lt;ServiceRegistry&gt;();\n            x.AddRegistry&lt;SHARE.Data.DataRegistry&gt;();\n        });\n\n        //if a class needs configuring on load then this is done here. Inherit from IStartUpTask\n        ObjectFactory.GetAllInstances&lt;IStartUpTask&gt;()\n            .Where(x =&gt; x.IsEnabled).ToList()\n            .ForEach(t =&gt; t.Configure());\n\n        //This checks all is well.  Not ideal to do in application_start though cause of calls to request object....\n        //ObjectFactory.AssertConfigurationIsValid();\n    }\n\n\n  public class WebRegistry : Registry\n    {\n        public WebRegistry()\n        {\n         For&lt;IFormsAuthentication&gt;    ().Use&lt;FormsAuthenticationService&gt;();\n         For&lt;IAuthentication&gt;().Use&lt;BasicMembership&gt;();\n                     Scan(x =&gt;\n            {\n                x.AssemblyContainingType&lt;IStartUpTask&gt;();\n                x.AddAllTypesOf&lt;IStartUpTask&gt;();\n                x.WithDefaultConventions();\n            });\n\n            For&lt;IActionInvoker&gt;().Use&lt;InjectingActionInvoker&gt;();\n            SetAllProperties(c =&gt;\n            {\n                c.OfType&lt;IActionInvoker&gt;();\n                c.WithAnyTypeFromNamespaceContainingType&lt;UserService&gt;(); //our services\n                c.WithAnyTypeFromNamespaceContainingType&lt;AdminCookies&gt;(); //cookie services\n            });\n\n        }\n</code></pre>\n\n<p>Could anyone please suggest on this issue. how it could be resolved? I am really getting troubled with it and need to resolve it asap. Any help would be greatly appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Deepak</p>\n"},{"tags":["asp.net-mvc","datagrid","databinder"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13120548,"title":"Accessing the ItemStyle of the current row of ASP.NET Datagrid","body":"<p>I have a datagrid with an ItemStyle and AlternatingItemStyle (similar to simplified example below) and would like to know the CssClass of the row being rendered from inside of the databinder code.  As a dummy example suppose I want the datagrid to simply output the name of the CssClass of each alternating row</p>\n\n<pre><code>&lt;asp:DataGrid ID=\"dgSearchResults\" runat=\"server\" ...&gt;\n     &lt;ItemStyle CssClass=\"UCDataGridItem\" /&gt;\n     &lt;AlternatingItemStyle CssClass=\"UCDataGridAltItem\" /&gt;\n     &lt;asp:TemplateColumn HeaderText=\"CssClass\"&gt;\n          &lt;ItemTemplate&gt;\n              &lt;%#DataBinder.Eval(--some expression that evaluates to UCDataGridItem or UCDataGridAltItem--)%&gt;'&gt;              \n          &lt;/ItemTemplate&gt;\n     &lt;/asp:TemplateColumn&gt;\n&lt;/asp:DataGrid&gt;\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["asp.net-mvc","numberformat"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13086494,"title":"asp.net mvc set number format default decimal thousands separators","body":"<p>How can I set both default decimal and thousands separator for formatting number in asp.net mvc regardless of culture?</p>\n\n<p>Regards</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13120305,"title":"How to show ModelState.AddModelError when the Model is Empty in MVC4","body":"<p>I am displaying a shopping cart. I need to check for empty values in Shopping cart and display a message like \"The Shopping Cart is empty\".<br/></p>\n\n<p>When I use ModelState.AddModelError in myAction, it throws an exception as there is null reference in Model. How to display the ErrorMessage.<br/>\nMy Action <br/></p>\n\n<pre><code>  public ActionResult Index()\n        {\n            string id = Request.QueryString[\"UserID\"];\n            IList&lt;CartModel&gt; objshop = new List&lt;CartModel&gt;();\n            objshop = GetCartDetails(id);\n            if (objshop.Count &gt; 0)\n            {\n                return View(objshop.ToList());\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"Your Shopping Cart is empty!\");\n            }\n            return View();\n}\n</code></pre>\n\n<p>My View<br/></p>\n\n<pre><code>    @{\n         @Html.ValidationSummary(true)\n     }\n\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.ProductName) &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Quantity)   &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Rate)      &lt;/th&gt;\n &lt;th &gt; @Html.DisplayNameFor(model =&gt; model.Price)    &lt;/th&gt;        \n @foreach (var item in Model)\n   {\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.ProductName)&lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Quantity)&lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Rate) &lt;/td&gt;\n&lt;td&gt;  @Html.DisplayFor(modelItem =&gt; item.Price) &lt;/td&gt;\n   }\n</code></pre>\n\n<p>Any suggestions.</p>\n"},{"tags":["asp.net-mvc","jquery-ajax","unobtrusive-javascript"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13120277,"title":"ASP.NET MVC unobtrusive validation custom submit","body":"<p>What trying to do is to validate fields inside a jQuery dialog.\nThe fields are not included inside a form, I'm using a save button that does an ajax call to a Web Service.\nFor validation, I'm using ASP.NET MVC unobtrusive jQuery validation \"@Html.ValidateMessageFor\"\nand the errors get's shown if I write something inside the field loose focus and then get focus again and erase the content.\nServer side I have no problem since ModelState.IsValid is doing all the work however on the client side, I need a more dynamic behavior for instance if the client clicked on save, as a result, and  in addition to the 400 Bad Request response, I need the missing fields to be highlighted visually similar to the lost focus event.\nBelow is the jQuery Call:</p>\n\n<pre><code> $('#clientDataAddDialog').dialog(\n{\n    autoOpen: false,\n    width: 500,\n    buttons: {\n        'Save': {\n            text: 'Save', click: function (e) {\n\n                var name = $('.nameField').val();\n                var type = $('.typeField').val();\n                var region =  $('.regionField').val();\n                var area =  $('.areaField').val();\n                var telephone =  $('.telephoneField').val();\n                var mobile = $('.mobileField').val();\n                var latField = $('.latField').val();\n                var lngField = $('.lngField').val();\n\n                var data = { Name : name, Type : type, Region: region, Area : area, Telephone : telephone, Latitude : latField, Longitude : lngField };\n                var json = JSON.stringify(data);\n\n                $.ajax({\n                    type: \"POST\",\n                    url: \"http://localhost:53378/api/ClientWebAPI/\",\n                    data: json,\n                    contentType: \"application/json\",\n                    dataType: \"json\",\n                    statusCode: {\n                        201 /*Created\"*/: function (data) {\n                            $(\"#clientDataAddDialog\").dialog(\"close\");\n                        },\n                        500: function (data) {\n                            alert('err');\n                        }\n                    },\n                    beforeSend: setHeader\n                });\n            }\n        }\n    }\n});\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","wcf","rest"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":439,"score":0,"question_id":9112531,"title":"Custom MVC AuthorizeAttribute for WCF Web API Preview 6","body":"<p>I tried to implement my own AuthorizeAttribute for my REST API that I've built with the WCF Web API Preview 6. </p>\n\n<p>Unfortunately only the constructor gets called, but non of the methods. Am I missing something with the registration?</p>\n\n<pre><code>[BasicHttpAuthorize]\n[WebGet(UriTemplate = \"\")]\npublic IEnumerable&lt;Supertext.API.Order&gt; Get()\n{\n</code></pre>\n\n<p>And this is my super simplified code.</p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]\npublic class BasicHttpAuthorizeAttribute: AuthorizeAttribute\n{\n    public BasicHttpAuthorizeAttribute()\n    {\n    }\n\n    protected override bool AuthorizeCore(HttpContextBase httpContext)\n    {\n        return true;\n    }\n\n\n    public override void OnAuthorization(AuthorizationContext filterContext)\n    {\n        //do the authorization\n    }\n}\n</code></pre>\n\n<p>But as I said, neither the AuthorizeCore nor the OnAuthorization method is ever called.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","jquery-validate","datepicker","unobtrusive-validation"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3931,"score":2,"question_id":8059093,"title":"MVC3 Unobtrusive Date Validation on a custom formatted date","body":"<p>I have a date field (i'm using the jquery ui datepicker) in a form that I've formatted, like so:</p>\n\n<p><strong>ViewModel</strong></p>\n\n<pre><code>[DisplayFormat(DataFormatString = \"{0:dd-MMM-yyyy}\", ApplyFormatInEditMode = true)]\npublic DateTime FooDate { get; set; }\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>@Html.EditorFor(m =&gt; m.FooDate)\n</code></pre>\n\n<p>This correctly shows the date the way I want it to, e.g. <code>09-Nov-2011</code></p>\n\n<p>The problem I'm getting, occurs when I press submit. It keeps telling me the date is not valid.... It IS valid, you stupid thing!</p>\n\n<p>Is there any way, i can get jquery/unobtrusive javascript to ignore this field or allow this format to pass? So far, the only way I can get the form to work, is if i don't format the date, or use {0:d} as a date format for it.</p>\n\n<p><strong>Edit</strong>:\nI've created a totally separate layout+view+controller+model for testing this stupid thing. Still doesn't work in IE/Safari.\nI have the latest jquery.validate/unobtrusive files from nuget. </p>\n\n<p>My <code>layout</code> is empty. It just loads the following files:</p>\n\n<pre><code>\"jquery-1.7.min.js\"\n\"jquery-ui-1.8.16.min.js\"\n\"jquery.validate.min.js\"\n\"jquery.validate.unobtrusive.min.js\"\n</code></pre>\n\n<p>My TestViewModel is simple:</p>\n\n<pre><code>public class TestViewModel\n{\n    [Display(Name = \"Test Date:\")]\n    [DisplayFormat(DataFormatString = \"{0:dd/MMM/yyyy}\", ApplyFormatInEditMode = true)]\n    public DateTime? TestDate { get; set; }\n}\n</code></pre>\n\n<p>My TestController goes as follows:</p>\n\n<pre><code>public class TestController : Controller\n{\n    public ActionResult Index()\n    {\n        var m = new TestViewModel();\n        m.TestDate = DateTime.Now;\n        return View(m);\n    }\n}\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    ViewContext.FormContext.ValidationSummaryId = \"valSumId\";\n    @Html.ValidationSummary(false, \"The following errors were found:\");\n    @Html.AntiForgeryToken()\n\n    @Html.LabelFor(m =&gt; m.TestDate)\n    &lt;input type=\"date\" id=\"TestDate\" value=\"@Model.TestDate.Value.ToString(\"dd/MMM/yyyy\")\" /&gt;\n    &lt;input type=\"submit\" /&gt;\n}\n</code></pre>\n\n<p>No worky.</p>\n\n<p>You know what the annoying thing is? If i change <code>TestDate</code> to a string, it still fails.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1943,"score":0,"question_id":6187284,"title":"Html.BeginForm in MVC3 is rendering too much","body":"<p>I have the following code. Note that I am not using a using as I want to begin and end the form in two different areas of my code. Has anyone seen this action where the helper adds \"System.Web.Mvc.Html.MvcForm\". I cannot see why this is added.</p>\n\n<pre><code>Code:\n @Html.BeginForm(new { action = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue })\n\n@{ Html.EndForm() }\n\nResult:\n&lt;form action=\"/adminTests/Edit\" method=\"post\"&gt;System.Web.Mvc.Html.MvcForm\n</code></pre>\n\n<p>When I use the following I don't get the \"System.Web.Mvc.Html.MvcForm\" </p>\n\n<pre><code>    @using (Html.BeginForm(new { action = ViewContext.Controller.ValueProvider.GetValue(\"action\").RawValue }))\n    {\n\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","razor","html.actionlink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13119424,"title":"Pass the model value as parameter in html.actionlink Jquery method","body":"<p>I am generating dynamic links using below code in mvc razor views.</p>\n\n<pre><code>@foreach (App.Models.Users item in Model )\n{\n@Html.ActionLink(\"Delete\", \"DeleteEmp\", new { id = item.Id }, new { onclick = \"DeleteConfirm()\" })\n}\n</code></pre>\n\n<p>i want to pass the id or some other filed of model(item.Name) currently clicked link to Jquery method.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","authentication","authorization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13119184,"title":"MVC3 musicstore tutorial: can't login with administrator account","body":"<p>I am currently following the MVC Musicstore tutorial from <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7</a> and got stuck on the part with the Authorization.</p>\n\n<p>To get the basics covered: I am using VS Web Developer 2012 and created a mvc4 application. \nThe \"DefaultConnection\" got replaced by \"MusicStoreConnection\". To reflect this in the code in InitializeSimpleMembershipAttribute.cs I changed a lin to:</p>\n\n<pre><code>WebSecurity.InitializeDatabaseConnection(\"MusicStoreConnection\", \"UserProfile\", \"UserId\", \"UserName\", autoCreateTables: true);\n</code></pre>\n\n<p>Now, if a run the application I can create a user and log in with the credentials. However: if a run the asp.net configuration and create a user there, assign him to the administrator role and try to login it fails.</p>\n\n<p>What do I have to do in order to get the asp.net conf created user work in my application, so I can follow the tutorial?</p>\n\n<p>Kind regards</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":564,"score":0,"question_id":12457642,"title":"asp.net mvc 4 simplemembership with external database","body":"<p>I am using inbuilt asp.net mvc 4 WebSecurity simple membership. I have manually generated create table scripts from the app_data folder aspnet.mdf file to an external database that is hosted at SpeedHost server and got the below connectionstring and it is perfectly working fine when I developed application from my machine.</p>\n\n<pre><code>&lt;add name=\"SAMS\" connectionString=\"Data Source=IP;Initial Catalog=DATABASE;Persist Security Info=True;User ID=USERID;Password=PASSWORD;MultipleActiveResultSets=True;Application Name=EntityFramework\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>But when I deployed my application at SpeedHost and clicked on Login link button, then instead redirecting to Login page, it is throwing the following exception:</p>\n\n<p>Please help me to come out of this problem.</p>\n\n<pre><code>    Server Error in '/' Application.\n    A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\n    Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)\n\n    Source Error:\n\n    An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\n    Stack Trace:\n\n\n    [SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]\n   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5064474\n   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234\n   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341\n   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129\n   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270\n   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195\n   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232\n   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185\n   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33\n   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524\n   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66\n   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479\n   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108\n   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126\n   System.Data.SqlClient.SqlConnection.Open() +125\n   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +85\n   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +349\n   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +265\n   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +34\n\n[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]\n   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +163\n   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +40\n\n[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.]\n   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +163\n   System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest&amp; providerManifest) +39\n   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +46\n   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +62\n   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +117\n   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +453\n   System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +16\n   System.Data.Entity.Database.Exists() +42\n   SAMS.UI.New.Filters.SimpleMembershipInitializer..ctor() +110\n\n[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]\n   SAMS.UI.New.Filters.SimpleMembershipInitializer..ctor() +259\n\n[TargetInvocationException: Exception has been thrown by the target of an invocation.]\n   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached, RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0\n   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98\n   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241\n   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69\n   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +81\n   System.Threading.LazyInitializer.EnsureInitializedCore(T&amp; target, Boolean&amp; initialized, Object&amp; syncLock, Func`1 valueFactory) +113\n   System.Threading.LazyInitializer.EnsureInitialized(T&amp; target, Boolean&amp; initialized, Object&amp; syncLock) +127\n   SAMS.UI.New.Filters.InitializeSimpleMembershipAttribute.OnActionExecuting(ActionExecutingContext filterContext) +28\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +74\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass3b.&lt;BeginInvokeActionMethodWithFilters&gt;b__35() +20\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +511\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass3b.&lt;BeginInvokeActionMethodWithFilters&gt;b__35() +20\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass37.&lt;BeginInvokeActionMethodWithFilters&gt;b__31(AsyncCallback asyncCallback, Object asyncState) +190\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +159\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state) +182\n   System.Web.Mvc.Async.&lt;&gt;c__DisplayClass25.&lt;BeginInvokeAction&gt;b__1e(AsyncCallback asyncCallback, Object asyncState) +478\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +287\n   System.Web.Mvc.&lt;&gt;c__DisplayClass1d.&lt;BeginExecuteCore&gt;b__17(AsyncCallback asyncCallback, Object asyncState) +30\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +343\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +282\n   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15\n   System.Web.Mvc.&lt;&gt;c__DisplayClass8.&lt;BeginProcessRequest&gt;b__2(AsyncCallback asyncCallback, Object asyncState) +76\n   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123\n   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +236\n   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48\n   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8963444\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184\n\n\nVersion Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.237 \n</code></pre>\n"},{"tags":["asp.net-mvc","razor","asp.net-webforms"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":7987,"score":1,"question_id":5206528,"title":"Default radiobuttonlist in ASP.NET MVC Razor","body":"<p>How do I ensure that a radio button list has the first option selected?  If it is based on the model property, how is this set if this is the first page that is shown on application start-up?</p>\n\n<p>This is easy peasy in webforms but I don't know how to do this in MVC and there doesn't seem to be anywhere on the NET which shows how this is done.</p>\n\n<p>This doesn't seem to work:</p>\n\n<pre><code>@Html.RadioButtonFor(m =&gt; m.SearchType, true) Location\n@Html.RadioButtonFor(m =&gt; m.SearchType, false) Name\n</code></pre>\n\n<p>I Just get both radio buttons unselected??</p>\n"},{"tags":["asp.net-mvc","validation","modelstate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13118410,"title":"MVC ModelState erroneously reports errors","body":"<p>I am receiving a model from a view.<br>\nSome of the values are automatically filled in.</p>\n\n<p>However, some of the required values need to be added manually, like so:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Foobar(FooModel model, FormCollection collection)\n{\n    // \"timePicker\" is a dropdown list containing different times\n    var time = collection[\"timePicker\"].Split(':');\n    model.Hours = int.Parse(time[0]);\n    model.Minutes = int.Parse(time[1]);\n\n    if (ModelState.IsValid)\n    {\n        ... // Do stuff\n    }\n}\n</code></pre>\n\n<p>So here's the problem:</p>\n\n<p><strong><code>ModelState.IsValid</code> is false.</strong><br>\nI debugged it, and it claims that <code>model.Minutes</code> and <code>model.Hours</code> are not assigned to.<br>\n...Which isn't true, because I had <em>just assigned</em> them values!</p>\n\n<p>I considered using <code>ModelState.Clear()</code>, but I don't want to need to manually check whether all the rest of the information is valid.</p>\n\n<p>Is there any other way to resolve the issue?</p>\n"},{"tags":["c#","asp.net-mvc","linq","nhibernate","linq-to-nhibernate"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2466,"score":2,"question_id":2007038,"title":"LINQ-NHibernate - Selecting only a few fields (including a Collection) for a complex object","body":"<p>I'm using Fluent NHibernate in one of my projects (and ASP.NET MVC application), with LINQ to query to data (using the LINQ to NHibernate libraries).</p>\n\n<p>The objet names are changed to protect the innocent.</p>\n\n<p>Let's say I have the following classes Foo, Bar, Baz, and their appropriate tables in the database (MySQL).</p>\n\n<p>Foo has a many-to-many relationship with both Bar (table \"FooBar\") and Baz (table \"FooBaz\"), defined in the Fluent mappings. As such, the class interface is defined as follows:</p>\n\n<pre><code>public class Foo {\n    public virtual int id { get; set; }\n    public virtual string name { get; set; }\n    public virtual string email { get; set; }\n    public virtual IList&lt;Bar&gt; bars { get; set; }\n    public virtual IList&lt;Baz&gt; bazes { get; set; }\n}\n</code></pre>\n\n<p>This is a pretty standard class. We can see that a Foo object will have a list of bars and bazes.</p>\n\n<p>The problem comes when trying to do a LINQ query.</p>\n\n<p>If I do a simple query like this, it works fine (the where clause is unimportant) :</p>\n\n<pre><code>var foos = from foo in session.Linq&lt;Foo&gt;()\n           where email.equals(\"foo@bar.com\")\n           select foo;\n\nIList&lt;Foo&gt; listFoos = foos.ToList();\n</code></pre>\n\n<p>This will return a list of Foos, with all the fields populated (id, name, email, bars, bazes). log4net shows that NHibernate performs separate queries for the collections.</p>\n\n<p>The problem arises when I want to load only some fields. For example, I might want to load only the bars in the query, but not the bazes.</p>\n\n<p>This query compiles, but produces an error at runtime:</p>\n\n<pre><code>var foos = from foo in session.Linq&lt;Foo&gt;()\n           where email.equals(\"foo@bar.com\")\n           select new Foo() \n           {\n               id = foo.id,\n               name = foo.name,\n               email = foo.email,\n               bars = foo.bars\n           };\n\nIList&lt;Foo&gt; listFoos = foos.ToList();\n</code></pre>\n\n<p>The error I get is something along the lines of an array index out of bounds exception. The stack trace shows some methods names relating the collection handling on LINQ-NHibernate's side, but nothing else. The query reported by log4net shows no sign of a query on bars, which means than an error was caught before it had the time to perform the query to select the bars.</p>\n\n<p>Did anyone else had this kind of problem before? How did you solve it? I don't want to have to select all the objects everytime I open a web page in my application!</p>\n\n<p>Thank you!</p>\n\n<p><strong>Edit: here is the stacktrace, as requested.</strong></p>\n\n<pre><code>System.IndexOutOfRangeException: L'index se trouve en dehors des limites du tableau. (read: \"Index is out of bounds for the array.\")\n\n[IndexOutOfRangeException: L'index se trouve en dehors des limites du tableau.]\n   NHibernate.Transform.TypeSafeConstructorMemberInitResultTransformer.InvokeMemberInitExpression(MemberInitExpression expression, Object[] args, Int32&amp; argumentCount) +404\n   NHibernate.Transform.TypeSafeConstructorMemberInitResultTransformer.TransformTuple(Object[] tuple, String[] aliases) +150\n\n[QueryException: could not instantiate: Foo]\n   NHibernate.Transform.TypeSafeConstructorMemberInitResultTransformer.TransformTuple(Object[] tuple, String[] aliases) +265\n   NHibernate.Loader.Criteria.CriteriaLoader.GetResultColumnOrRow(Object[] row, IResultTransformer resultTransformer, IDataReader rs, ISessionImplementor session) +171\n   NHibernate.Loader.Loader.GetRowFromResultSet(IDataReader resultSet, ISessionImplementor session, QueryParameters queryParameters, LockMode[] lockModeArray, EntityKey optionalObjectKey, IList hydratedObjects, EntityKey[] keys, Boolean returnProxies) +330\n   NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +704\n   NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) +70\n   NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) +111\n   NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters) +18\n   NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) +79\n   NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results) +407\n   NHibernate.Impl.CriteriaImpl.List(IList results) +41\n   NHibernate.Impl.CriteriaImpl.List() +35\n   NHibernate.Linq.&lt;GetEnumerator&gt;d__0.MoveNext() +71\n   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +7665172\n   System.Linq.Enumerable.ToList(IEnumerable`1 source) +61\n   FooRepository.List(Int32 count) in C:\\...\\FooRepository.cs:38\n   FooController.List() in C:\\...\\FooController.cs:30\n   lambda_method(ExecutionScope , ControllerBase , Object[] ) +39\n   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17\n   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +178\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +24\n   System.Web.Mvc.&lt;&gt;c__DisplayClassa.&lt;InvokeActionMethodWithFilters&gt;b__7() +52\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +254\n   System.Web.Mvc.&lt;&gt;c__DisplayClassc.&lt;InvokeActionMethodWithFilters&gt;b__9() +19\n   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +192\n   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +399\n   System.Web.Mvc.Controller.ExecuteCore() +126\n   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +27\n   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +7\n   System.Web.Mvc.MvcHandler.ProcessRequest(HttpContextBase httpContext) +151\n   System.Web.Mvc.MvcHandler.ProcessRequest(HttpContext httpContext) +57\n   System.Web.Mvc.MvcHandler.System.Web.IHttpHandler.ProcessRequest(HttpContext httpContext) +7\n   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +181\n   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +75\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-membership","openid","openauth"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13117809,"title":"OpenID ANd OpenAuth SQL Membership Database Implementation for ASP.NET MVC4","body":"<p>I try to use OpenId in ASP.NET MVC4, SO I use <a href=\"http://blogs.msdn.com/b/webdev/archive/2012/09/12/integrate-openauth-openid-with-your-existing-asp-net-application-using-universal-providers.aspx\" rel=\"nofollow\">This Tutorial</a>, And as you see in <strong>Database Structure</strong> we need some additional tables to support OpenId and OpenAuth, as usual I use </p>\n\n<p>C:\\Windows\\Microsoft.NET\\Framework64\\aspnet_regsql.exe </p>\n\n<p>to implement Membership Database,</p>\n\n<p>I install Visual Studio 2012 with .NETFramework 4.5 and MVC 4 so I run the <code>aspnet_regsql.exe</code> but the created database is not contain additional tables to support OpenId, So is there another way to implement this Database? Or I should add additional database by my own? and if yes how implement needed membership structure in Code side? </p>\n\n<p>I think there must be an auto way (like before) to implement membership to support new OpenId feature, what is your suggestion?</p>\n"},{"tags":["jquery","html","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13118014,"title":"Call jquery dialog box in master page","body":"<p>I use MVCHaack.ajax to call a controller function by javascript. Before call the function I show a jquery dialog box. When I use this in my views, everything is perfect but in master pages when I call, dialog box display as a block of text and not like a dialog. this is my master page code : </p>\n\n<pre><code>            &lt;script src=\"/json/RequestVIP?json\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/RequestVIP.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $('#vipdel').click(function () {\n            $(\"#messagec\").replaceWith(\"&lt;span id=messagec&gt;      &lt;/span&gt;\");\n            $(\"#dialog-confirm\").dialog({\n                buttons: {\n                    \"\": function () {\n                        $mvc.RequestVIP.Delete({ customerId: $(\"#hdnId\").val() }).success(function (data) {\n                            $(\"#messagec\").replaceWith(\"&lt;span id=messagec&gt;\" + data.message + \"&lt;/span&gt;\");\n                            $(\"#dialog-confirm\").dialog({\n                                buttons: {\n\n                                    \"\": function () {\n                                        $(this).dialog(\"close\");\n                                    }\n                                }\n                            });\n\n                            $(\"#dialog-confirm\").dialog(\"open\");\n                        });\n                    },\n                    \"\": function () {\n                        $(this).dialog(\"close\");\n                    }\n                }\n            });\n\n            $(\"#dialog-confirm\").dialog(\"open\");\n\n            // alert(data.message);\n\n        });\n    });\n&lt;/script&gt;\n\n\n\n\n\n\n &lt;div class=\"section\"&gt;\n                                &lt;h2 class=\"title\"&gt;  &lt;/h2&gt;\n                                            @Html.Hidden(\"hdnId\", @User.Identity.Name.Trim())\n                                &lt;button style=\"width:150px;vertical-align:middle\" id=\"vipreq\"&gt;&lt;img src=\"@Url.Content(\"~/images/join.png\")\"/&gt;  &lt;/button&gt;&lt;br/&gt;\n                                &lt;button style=\"width:150px;vertical-align:middle\" id=\"vipdel\"&gt;&lt;img src=\"@Url.Content(\"~/images/deljoin.png\")\"/&gt;  &lt;/button&gt;&lt;br/&gt;\n                                &lt;button style=\"width:150px;vertical-align:middle\" id=\"viprev\"&gt;&lt;img src=\"@Url.Content(\"~/images/rejoin.png\")\"/&gt;  &lt;/button&gt;&lt;br/&gt;\n                            &lt;/div&gt;\n\n\n   &lt;div id=\"dialog-confirm\" title=\" \"&gt;\n        &lt;p&gt;\n            &lt;span class=\"ui-icon ui-icon-alert\" style=\"font-family: Tahoma; float: right; margin: 0 7px 20px 0;\"&gt;\n            &lt;/span&gt;&lt;span id=\"messagec\"&gt;&lt;/span&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4690,"score":0,"question_id":702794,"title":"Jquery file uploader and navigator","body":"<p>I am looking for a jQuery plug in that will allow me to upload files and/or navigate to files on the file system. </p>\n\n<p>It would be used to allow a visitor to add multiple images to a news article. </p>\n\n<p>I am using ASP.NET MVC so it would have to be compatible with that.</p>\n\n<p>Edit: Something like this would work great - <a href=\"http://kfm.verens.com/demo/1.3.1/?lang=en\" rel=\"nofollow\">KFM Demo</a></p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":228,"score":1,"question_id":8255511,"title":"Handle Multiple Form Submission via ActionFilterAttribute mvc3.net","body":"<p>I am trying to handle multiple form submissions by writing an ActionFilter. I am new to the domain of ActionFilters and dont know where to start any help will be much appreciated. \nI have looked at this question but couldnt get a starting point</p>\n\n<p><a href=\"http://stackoverflow.com/questions/218907/how-to-handle-multiple-submissions-server-side\">How to handle multiple submissions server-side</a></p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1322,"score":4,"question_id":5869390,"title":"How to prevent multiple posts on MVC3?","body":"<blockquote>\n  <p>A user wants to post in his blog, he fills the field and click <code>submit</code>.</p>\n  \n  <p>The site is running slow, he clicks again, and again, and again.</p>\n  \n  <p>It was finally saved, but now he check his posts and sees <code>4</code> posts.</p>\n</blockquote>\n\n<p><strong>How can I prevent this from happening?</strong> If the user click to submit once I want to <code>do nothing</code> for the next clicks or <code>abort previous</code> and start a new post, whichever makes more sense or is recommended.</p>\n\n<p>In a form with</p>\n\n<pre><code>@using (Ajax.BeginForm(...))\n{\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","t4mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13091223,"title":"T4MVC adding current page controller to action link","body":"<p>I have the following ActionLink that sits in the home page on the register controller (Index.cshtml)</p>\n\n<pre><code>@Html.ActionLink(\"terms of service\", Url.Action(MVC.Home.Terms()), \n                 null, new  { target=\"_blank\" })\n</code></pre>\n\n<p>Generating the following URL.  Why is \"register\" being added to it?  It's as if the link within the Register page which has it's own controller is preappending the register controller to any link in that view?</p>\n\n<pre><code>http://localhost/register/terms-of-service\n\n    routes.MapRoute(\n        \"Terms\",\n        \"terms-of-service\",\n        new { controller = \"Home\", action = \"Terms\" }\n    );\n\npublic partial class HomeController : SiteController\n{\n    public virtual ActionResult Terms()\n    {\n        return View(new SiteViewModel());\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","json","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13041808,"title":"MVC controller : get JSON object from HTTP body?","body":"<p>We have an MVC (MVC4) application which at times might get a JSON events POSTed from a 3rd party to our specific URL (\"http://server.com/events/\"). The JSON event is in the body of the HTTP POST and the body is strictly JSON (<code>Content-Type: application/json</code> - not a form-post with JSON in some string field).</p>\n\n<p>How can I receive the JSON body inside the controller's body? I tried the following but didn't get anything</p>\n\n<p><strong>[Edit]</strong>: When I say <em>didn't get anything</em> I meant that jsonBody is always null regardless of whether I define it as <code>Object</code> or <code>string</code>. </p>\n\n<pre><code>    [HttpPost]\n    // this maps to http://server.com/events/\n    // why is jsonBody always null ?!\n    public ActionResult Index(int? id, string jsonBody)\n    {\n        // Do stuff here\n    }\n</code></pre>\n\n<p>Note that I know if I give declare the method with a strongly typed input parameter, MVC does the whole parsing and filtering i.e.</p>\n\n<pre><code>    // this tested to work, jsonBody has valid json data \n    // that I can deserialize using JSON.net\n    public ActionResult Index(int? id, ClassType847 jsonBody) { ... }\n</code></pre>\n\n<p>However, the JSON we get is very varied, so we don't want to define (and maintain) hundreds of different classes for each JSON variant.</p>\n\n<p>I'm testing this by the following <code>curl</code> command (with one variant of the JSON here)</p>\n\n<pre><code>curl -i -H \"Host: localhost\" -H \"Content-Type: application/json\" -X POST http://localhost/events/ -d '{ \"created\": 1326853478, \"data\": { \"object\": { \"num_of_errors\": 123, \"fail_count\": 3 }}}\n</code></pre>\n"},{"tags":["asp.net","asp.net-mvc","file-upload"],"answer_count":2,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":3528,"score":7,"question_id":4888632,"title":"MVC Valums Ajax Uploader - IE doesn't send the stream in request.InputStream","body":"<p>i'm using Valums Ajax uploader. all works great in Mozilla with this code:</p>\n\n<p>View:</p>\n\n<pre><code>var button = $('#fileUpload')[0];\nvar uploader = new qq.FileUploader({\n    element: button,\n    allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'], \n    sizeLimit: 2147483647, // max size\n    action: '/Admin/Home/Upload',\n    multiple: false\n});\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>public ActionResult Upload(string qqfile)\n{\n    var stream = Request.InputStream;\n    var buffer = new byte[stream.Length];\n    stream.Read(buffer, 0, buffer.Length);\n\n    var path = Server.MapPath(\"~/App_Data\");\n    var file = Path.Combine(path, qqfile);\n    File.WriteAllBytes(file, buffer);\n\n    // TODO: Return whatever the upload control expects as response\n}\n</code></pre>\n\n<p>which was answered in this post:</p>\n\n<blockquote>\n  <p><a href=\"http://stackoverflow.com/questions/4884920/mvc3-valums-ajax-file-upload\">MVC3 Valums Ajax File Upload</a></p>\n</blockquote>\n\n<p>However issue is that this doesn't work in IE. I did find this but i can't figure out how to implement it: </p>\n\n<blockquote>\n  <p>IE doesn't send the stream in\n  \"request.InputStream\" ... instead get\n  the input stream through the\n  HttpPostedFileBase from the\n  Request.Files[] collection</p>\n</blockquote>\n\n<p>Also, this here that shows how this guy did it but i'm not sure how to change for my project:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/4371015/valum-file-upload-works-in-chrome-but-not-ie-image-img-image-fromstreamrequ\">Valum file upload - Works in Chrome but not IE, Image img = Image.FromStream(Request.InputStream)</a></p>\n\n<blockquote>\n<pre><code>//This works with IE\nHttpPostedFileBase httpPostedFileBase = Request.Files[0]\n</code></pre>\n  \n  <p>as HttpPostedFileBase;</p>\n</blockquote>\n\n<p>can't figure this one out. please help!\nthanks</p>\n"},{"tags":["asp.net-mvc","event-log"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13116248,"title":"Event is not logged in hosting server","body":"<p>I have implemented the code to log the errors in system event logger. It works fine when i run the source in local host. But after hosting my website in server(US Server) it doesnt log the errors. Also it doesnt created a new event name.\nCan you please let me know how to resolve this problem?\nThanks.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13114388,"title":"How can I edit multiple types (with same base) on the same view?","body":"<p>Lets say I have two classes one base class:</p>\n\n<pre><code>public class BaseModel {\n\n}\n</code></pre>\n\n<p>And a couple of children:</p>\n\n<pre><code>public class FooModel : BaseModel {\n\n}\n\npublic class BarModel : BaseModel {\n\n}\n</code></pre>\n\n<p>Now my view I would like to expect a model like this:</p>\n\n<pre><code>@model IEnumerable&lt;BaseModel&gt;\n</code></pre>\n\n<p>And in my action I would pass in child classes along the lines of:</p>\n\n<pre><code>return View(new List&lt;BaseModel&gt;(){ new FooModel(), new BarModel() })\n</code></pre>\n\n<p>I would then edit these on one page, using <code>EditFor</code> (This works fine)</p>\n\n<p>The problem is when I post back I would like to be able to cast these types to there implementation types, but this doesn't work. If I try and cast it, it is null or an exception is thrown.</p>\n\n<pre><code>    [HttpPost]\n    public ActionResult BaseModelUpdate(IList&lt;BaseModel &gt; model)\n{\n// I would like to access items in the list as FooModel and BarModel \n}\n</code></pre>\n\n<p>How can I achieve this? (getting the items in the list back to their child class types?)</p>\n\n<p>I was thinking I could try and use TryUpdateModel?</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","configuration","web-config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13114932,"title":"External Config Files (configSource) Dropped From Memory (MVC, C#, ASP.net)","body":"<p>We are having an intermittent issue where config files, or more specifically subset of values within that data are getting lost into the ether. Truth be told I am at a loss as to how to approach it because I am unsure if it's a code, config, machine or IIS issue. To give you an idea of what's happening....</p>\n\n<p><strong>What we are doing</strong></p>\n\n<p>We have a config file that contains \"price\" drop down values : </p>\n\n<pre><code>&lt;searchForm&gt;\n&lt;priceLowerBoundValues&gt;\n&lt;priceLowerBoundValue&gt;2500&lt;/priceLowerBoundValue&gt;\n&lt;priceLowerBoundValue&gt;5000&lt;/priceLowerBoundValue&gt;\n....\n&lt;/priceLowerBoundValues&gt;\n....\n&lt;/searchForm&gt;\n</code></pre>\n\n<p>These are contained within a file named searchForm.config. In web.config they are referenced as an external file like so. </p>\n\n<pre><code>&lt;searchForm configSource=\"Config\\searchForm.config\" /&gt;\n</code></pre>\n\n<p>We have a custom configuration handler that inherits from IConfigurationSectionHandler. The gist of being this code here that gets the values. </p>\n\n<pre><code>var priceLowerBoundValueXPath = \"/searchForm/priceLowerBoundValues/priceLowerBoundValue/text()\";\nsearchFormLookups.PriceLowerBoundValues = section.SelectNodes(priceLowerBoundValueXPath).Cast&lt;XmlNode&gt;().Select(x =&gt; int.Parse(x.Value));\n</code></pre>\n\n<p>Then the ONLY place we reference it, is when building a select list for the viewmodel. It looks a little like this : </p>\n\n<pre><code>SearchFormConfiguration.PriceLowerBoundValues.ToSelectList((parameters.PriceLowerBound != null) ? parameters.PriceLowerBound.Value : 0)\n</code></pre>\n\n<p>There is no modifications done to the list ever, and using resharper \"Find Usages\" only brings up this single call. No other point in the program touches these values. </p>\n\n<p><strong>The Issue</strong></p>\n\n<p>What will happen intermittently is that the drop down boxes on our webpage suddenly have only one value (e.g. 2500 in the price box). Do note it is not completely empty, but usually most values are gone. We have had similar issues of external configs dropping (almost completely) and it causes null reference errors across the place. e.g. it's still looking for a config that's supposed to be there, but it has been wiped from the face of the earth. </p>\n\n<p>Stopping the website, stopping the app pool, and then bringing everything up again fixes the issue. Which made me initially think it could be something with memory usage, and external configurations being the first thing it drops, but I'm really unsure at this point. </p>\n\n<p>Another thing to note. We have an app pool restart in the early hours of the morning everyday.</p>\n\n<p>Any help with this is much appreciated, even if it's just a nudge into the right direction. As I say, I can't find any info on where to start, be it IIS settings or code. :)</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-2"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":368,"score":1,"question_id":4422328,"title":"MVC Html.ActionLink doesn't work after upgrade from .net 3.5 to 4.0","body":"<p>Well as the title says, I have a project with a bunch of Html.ActionLink</p>\n\n<pre><code>&lt;%= Html.ActionLink(\"Reason for booking\", \"BookingReason\")%&gt;\n</code></pre>\n\n<p>I have upgraded the project to .net 4.0 and they no longer render a link to the action.  Its just a blank  of course causing the page to reload.</p>\n\n<p>The Html.ActionLink tags are in a user control (ascx) in the Shared folder of an Area.</p>\n\n<p>I tried downgrading again to .net 3.5 and it works - weird.  any ideas?</p>\n\n<p>Thx</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","entity-framework","poco"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13113566,"title":"Asp.net mvc, entity framework, Poco - Architecture","body":"<p>I have a \"small\" enterprise application, aspnet mvc 3 + entity framework with POCO entity and repository pattern. I structured the solution in 4 projects:</p>\n\n<ol>\n<li>POCO entities</li>\n<li>Domain model</li>\n<li>Services</li>\n<li>web application</li>\n</ol>\n\n<p>When the application performs a query on the database, use one of the services provided, the service uses the repository and the small classes, as a result I have some dynamic proxy objects that I would like to convert in my domain entities, before using them in mvc views, but I do not know how. Dovrebber be set as the translator?</p>\n\n<p>This approach is reasonable?</p>\n"},{"tags":["asp.net-mvc","entity-framework","asp.net-mvc-4","authorize"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":111,"score":1,"question_id":13106487,"title":"Data level Authorization filter in ASP.Net MVC Entity Framework application","body":"<p>I was looking for a data level Authorization filter in my ASP.Net MVC 4 Application.<br>\nWe are using Entity Framework for Data access.</p>\n\n<p>The application need to display all the data but should restrict the access to certain fields in a table based on the user roles.</p>\n\n<p>eg: TASK table\n{\nint Id,\nstring TaskName,\nDateTime StartDate,\nDateTime EndDate\n}</p>\n\n<p>This whole data will be displayed to all the users and users have the options to edit the fields also. But should restrict the edit options like as follows<br>\nRole Admin can edit all the fields<br>\nRole Manager can Edit TaskName but cannot edit StartDate and EndDate<br>\nRole Users cannot Edit any of the fields  </p>\n\n<p>All these edit will be calling the Edit action in the TaskController.</p>\n\n<p>How can I implement the functionality in my application.</p>\n"},{"tags":["asp.net-mvc","tinymce"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13114468,"title":"Getting and setting the html from TinyMCE in MVC project","body":"<p>I'm working on an MVC project using TinyMCE.  I have a model that contains a string property that is the HTMLContent.  I would like the Get action method to pull the HTML from a file and set the text for TinyMCE.  The post method should pull the new TinyMCE html and save it to the file.</p>\n\n<p>Currently, the get works when using Html.TextArea and then using HttpUtility.Decode to decode the model.HTMLContent property in the .aspx page.  </p>\n\n<pre><code>&lt;%= Html.TextArea(\"elm1\", HttpUtility.HtmlDecode(Model.HTMLContent), new {@name=\"elm1\", @class=\"tinymce\" }) %&gt;\n</code></pre>\n\n<p>However, on post, the model.HTMLContent property is null.  If I use Html.TextAreaFor, then the post model contains the html, BUT the GET does not decode the string TinyMCE's text area is initially set to.  I try to decode or encode on the server side but this doesn't work.</p>\n\n<p>I've done a lot of research and cannot find any examples of both setting and getting the TinyMCE HTML with MVC, just the getting. Any help would be greatly appreciated.</p>\n"},{"tags":["javascript","jquery","html","asp.net-mvc","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3261,"score":0,"question_id":4843150,"title":"Adding file inputs dynamicly with jquery?","body":"<p><strong>Hi,</strong></p>\n\n<p>To make my weppage as complatible as possible I will go with the reguler file input, the problem is that I need to offer multiple uploads.</p>\n\n<p>My thought is that when the first input is set a second will be shown (up to a max of 10). Say that we have filled 5 and there is 6 visible. We now clear the second input, this will result in two empty inputs so then the last(6(empty)) input should be hidden.</p>\n\n<p>Is this possible to to with Jquery? Maby you have a example?</p>\n\n<p>Pleas advice.</p>\n\n<p><strong>BestRegards</strong></p>\n\n<p>Edit1 : This is what I manage to create, it works fine. I am however sure that someone that know jquery better could make a smarter script:</p>\n\n<p>In the view :</p>\n\n<pre><code>        &lt;div id=\"fileInput0\" class=\"fileVisible\"&gt;\n            &lt;input type=\"file\" id=\"file0\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(0)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput1\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file1\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(1)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput2\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file2\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(2)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput3\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file3\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(3)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput4\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file4\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(4)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput5\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file5\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(5)\" /&gt;\n        &lt;/div&gt;         \n        &lt;div id=\"fileInput6\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file6\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(6)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput7\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file7\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(7)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput8\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file8\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(8)\" /&gt;\n        &lt;/div&gt;\n        &lt;div id=\"fileInput9\" class=\"fileHidden\"&gt;\n            &lt;input type=\"file\" id=\"file9\" name=\"files\" /&gt;\n            &lt;input type=\"button\" value=\"Tm\" onclick=\"resetFileField(9)\" /&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>The Script :</p>\n\n<pre><code>function fileChangeHandler() {\n\n    var hiddenClass = 'fileHidden';\n    var visibleClass = 'fileVisible';\n\n    var parentDiv = $(this).parent;\n    var idNr = $(this).attr('id').replace('file', '');\n\n    idNr++;\n\n    if($(this).val().length &gt; 0){\n\n        for(var i = idNr; i &lt; 10; i++){\n            if($('#fileInput' + i).hasClass(visibleClass)){\n                if($('#file' + i).val().length &lt; 1){ return;}\n            }\n            else{\n                    $('#fileInput' + i).attr('class' , visibleClass);\n                    return;\n            }\n        }\n    }\n}\n\nfunction resetFileField(id) {\n    var hiddenClass = 'fileHidden';\n    var visibleClass = 'fileVisible';\n    var counter;\n\n    $('#fileInput'+id).html($('#fileInput'+id).html());\n    $('#file'+id).change(fileChangeHandler);\n\n    for(var i = 9; i &gt; -1 ;i--)\n    {\n\n        if(id != i)\n        {\n            if($('#fileInput' + i).hasClass(visibleClass)){\n                if($('#file' + i).val().length &lt; 1){\n                    $('#fileInput' + i).attr('class', hiddenClass);\n                }\n            }\n        }\n    } \n}\n</code></pre>\n\n<p>If you find a better solution, pleas let me know.</p>\n"},{"tags":["jquery",".net","ajax","asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13114457,"title":"Specific $.ajax url relative paths work in FF & IE but not in Chrome","body":"<p>This is strange.  I have a jQuery $.ajax call below.  In Firefox it'll only work if I take out MyAppName.  In Chrome it will only work if I include MyAppName in the url.  Not sure why</p>\n\n<p>I'm browsing to <code>http://localhost/MyAppName</code> when I test this.</p>\n\n<p><strong>This works in FireFox and in IE 9</strong></p>\n\n<pre><code>$.ajax({\n    url: '/MyAppName/Search/Member/260491',\n</code></pre>\n\n<p>This does not work in FireFox or IE:</p>\n\n<pre><code>  $.ajax({\n    url: 'Search/Member/260491',\n</code></pre>\n\n<p><strong>This works in Chrome</strong></p>\n\n<pre><code>$.ajax({\n    url: 'Search/Member/260491',\n</code></pre>\n\n<p>This does not work in Chrome:</p>\n\n<pre><code>  $.ajax({\n    url: '/MyAppName/Search/Member/260491',\n</code></pre>\n"},{"tags":["asp.net-mvc","url","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13114450,"title":"Send variable to controller through url MVC 3","body":"<p>I need that this url \"Home/Details/123\" show a page Details with the details of the item with id 123, how can I do this? I think that the route have to be registered but I need more information about this.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13114377,"title":"MVC Business logic helper","body":"<p>I have some common functions that apply throughout my application to update particular parts of the database when actions happen (Audit trail, modified dates etc). I'll use AuditTrail as an example.</p>\n\n<p><strong>Where should I be storing these functions?</strong></p>\n\n<p>Currently I am storing them in dbcontext classes</p>\n\n<pre><code>//... my db context class ...\n\npublic bool AddAuditEntry(int ID, string objectName)\n{\n    // Here I create a new AuditTrail object, assign values then insert into db.\n    // This mode doesn't have a controller.\n}\n\n// We also have a table that keeps track of modified state for \n// client side caching (nothing I have control over)\npublic bool ModifyObject(int ID)\n{\n    // Here I mark the object id with modified date then save to db\n    // This particular model doesn't have a controller either.\n}\n</code></pre>\n\n<p>I think they should belong in the model but I'm not quite sure how to implement it. Putting them in the controller isn't the best option as some of these relate only to a particular model class that may have no controller.</p>\n\n<p>My problem with them being in the model is what then is the best way to update entities?</p>\n"},{"tags":["asp.net-mvc","frameworks","entity","code-first"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":364,"score":2,"question_id":9471357,"title":"EF 4.3 Code first (migrations) with remote database","body":"<p>I would like to use Code First approach in my MVC3 web application, so I found this tutorial\n<a href=\"http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-automatic-migrations-walkthrough.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-automatic-migrations-walkthrough.aspx</a>\nEverything was OK untill I used database on localhost, but i really need to use database on my hosting, so i added connection string to my web.config:</p>\n\n<pre><code>    &lt;add name=\"BlogContext\"\n     connectionString=\"data source=mssql4.webio.pl,2401;initial catalog=koki_forumMVC;user id=koki_administrator;password=MY_PASSWORD;\"\n     providerName=\"System.Data.SqlClient\"/&gt;\n</code></pre>\n\n<p>My Context Class and Entity Class:</p>\n\n<pre><code>public class BlogContext : DbContext\n{\n    public DbSet&lt;Blog&gt; Blogs { get; set; }\n}\npublic class Blog\n{\n    public int BlogId { get; set; }\n\n    public string Name { get; set; }       \n}\n</code></pre>\n\n<p>When i don't defined connection string when application starts, database is creating on local instance of sqlexpress. I'll be glad if it happens too when i define connection string to my remote server. I need to mentioned that when i exec command update-database in nuget console, if database is empty, my model is mapped to database. the problem is when i try to change my model by insert new property. when i execute cmd update-database i take error msg that the object with the same name of my model is founded in DB; /</p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":5,"favorite_count":30,"up_vote_count":41,"down_vote_count":0,"view_count":12249,"score":41,"question_id":3389097,"title":"asp.net mvc3 razor documentation?","body":"<p>Is there any documentation on how to use Razor view engine using asp.net mvc3? or any other resources?</p>\n\n<p>Trying to find it in google and msdn with no luck so far.</p>\n"},{"tags":["asp.net-mvc","class","controller","jsonresult"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1261,"score":1,"question_id":2765082,"title":"Return Multiple Objects Using ASP.NET MVC'S JsonResult Class","body":"<p>Is it possible to Multiple Objects Using ASP.NET MVC'S JsonResult Class.... Here is a controller method which returns json object of my records but i also want to pass the count value....</p>\n\n<pre><code>var materials = consRepository.FindAllMaterials().AsQueryable();\nvar count = materials.Count();\nvar results = new PagedList&lt;MaterialsObj&gt;(materials, currentPage-1, pageSize);\nreturn Json(results);\n</code></pre>\n\n<p>How to return count along with the <code>results</code> from asp.net mvc controller....</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","error-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13113652,"title":"What is the most standard/correct way to return logic error?","body":"<p>ASP.Net MVC 3, Kendo UI Web.</p>\n\n<p>Typical example -- there is a database and some tables, user is editing the data -- adding new entries, deleting, updating.</p>\n\n<p>Apart from technical problems (network connection down), there could be several logical ones -- for example user does not have permission to write anything, or there is a lock on data, or user tries to update something what was deleted meanwhile, and so on.</p>\n\n<p>So I would like to return in such cases an error, so I could handle it with Kendo and display, let's say some alert dialog (JS <code>alert</code>).</p>\n\n<p>Now -- what would be the most well designed way, most correct, to do so? I am not looking for \"oh, well, it just works\" approach.</p>\n\n<p>Is throwing <code>HttpException</code> a good idea in such case (I have my issues with it, because it is <strong>http</strong> exception, and the error I try to pass has nothing to do with http really)?</p>\n"},{"tags":["javascript","asp.net-mvc","angularjs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":88,"score":-3,"question_id":13114090,"title":"asp.net mvc vs angular js","body":"<p>I have come across a really interesting JS framework recently, AngularJS. It feels to me that it's a client side MVC implementation framework with powerful built-in model binding. The framework is typically used with with asp.net Web API where the Web API deals with the server side business logic and AngularJS deals with the front end rending and model bindings. </p>\n\n<p>The thing that puzzles me is that how is that easier or better than implementing a same solution with a standard asp.net MVC framework? Model binding can be easily be done in asp.net MVC and it has all the layers de-coupled which makes it easier to maintain, extend and test. </p>\n\n<p>So why angularJS? Do we get any performance gain by using this angular JS? Or is it making the app easier to maintain? I am trying to convince myself to learn AngularJS, but I'll need to know the use of it before jumping onto it. </p>\n"},{"tags":["asp.net-mvc","iis","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13112905,"title":"IIS isn't serving javascript and css requests on azure webrole application","body":"<p>need your help with this one, i'm running azure deployment on my localhost and get the webpage without css and javascript, when i look in fiddler i see 500 status and the following error: \"<code>It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS</code>\" on each request for javascript or css file, i already enabled static content on windows feature and it didn't help, i'm using iis 7.5 on windows professional 64 bit with azure sdk 1.7, tried anything, and nothing helped, can't change the site to web application cause the website only exist on iis while i'm running debug, any idea what to do?</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13113397,"title":"How can I use EditorFor with a list that is Grouped?","body":"<p>I have a list that I would like to group and edit within a razor view.</p>\n\n<p>If the POCO is:</p>\n\n<pre><code>public class FooBar {\n\npublic string GroupName {get;set;}\npublic string SomeValue {get;set;}\n\n// etc.\n\n}\n</code></pre>\n\n<p>And the model in the View:</p>\n\n<pre><code>@model IEnumerable&lt;FooBar&gt;\n</code></pre>\n\n<p>And the Post action is like this:</p>\n\n<pre><code>[HttpPost]\n        public ActionResult FooBarPost(IEnumerable&lt;FooBar&gt; model)\n</code></pre>\n\n<p>Normally to edit a list I would use this syntax in my view:</p>\n\n<pre><code>@Html.EditorForModel()\n</code></pre>\n\n<p>Which works great, it creates lovely little inputs like:</p>\n\n<pre><code>&lt;input id=\"[0].SomeValue\" /&gt;\n</code></pre>\n\n<p>And the post back is perfect.</p>\n\n<p>Now if I want to change my view to the much less awesome:</p>\n\n<pre><code>&lt;fieldset&gt;\n                        &lt;legend&gt;Legendary&lt;/legend&gt;\n                        @foreach (var group in Model.GroupBy(x =&gt; x.GroupName))\n                        {\n                            &lt;h3&gt;@group.Key&lt;/h3&gt;\n\n                            @Html.EditorFor(x =&gt; group)\n                        }\n                    &lt;/fieldset&gt;\n</code></pre>\n\n<p>Then when I post my list comes back as null?</p>\n\n<p>I remember there being a trick to fixing this, I just can't remember what it was?</p>\n\n<p>Thanks.</p>\n\n<p>Edit:</p>\n\n<p>added <code>[Bind(Prefix=\"group\")]</code> to my action which now brings back just one of the input values. </p>\n\n<p>I noticed the HTML generated looks like this (all on same page):    </p>\n\n<p>Group 1:</p>\n\n<pre><code>&lt;input id=\"group_0__SomeValue\" name=\"group[0].SomeValues\" type=\"hidden\" value=\"bla\"&gt;  \n&lt;input id=\"group_1__SomeValue\" name=\"group[1].SomeValues\" type=\"hidden\" value=\"bla\"&gt;\n</code></pre>\n\n<p>Next group:</p>\n\n<pre><code>&lt;input id=\"group_0__SomeValue\" name=\"group[0].SomeValues\" type=\"hidden\" value=\"bla\"&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","plupload"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":260,"score":1,"question_id":11311755,"title":"Plupload Asp.Net MVC how pass different parameters into ActionResult method","body":"<p>I use <code>Plupload</code> for Asp.Net MVC</p>\n\n<p>I need to pass any value or viewmodel into the ActionResult method</p>\n\n<p><strong>For example first line code of form</strong></p>\n\n<pre><code>@using (Html.BeginForm(\"UploadImage\", \"Home\",\n            FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n</code></pre>\n\n<p><strong>ActionResult method signature</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult UploadImage(int? chunk, string name, **I NEED PASS PARAMETER HERE !!!**)\n</code></pre>\n\n<p>I couldn't. </p>\n"},{"tags":["asp.net-mvc","c#-4.0","action-filter","custom-action-filter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13113749,"title":"Can I access an ActionFilter from a helper?","body":"<p>I have an actionfilter applied to an action. Its checking for a flag and redirects to a different view if the flag is set to true.</p>\n\n<p>This works well if a user navigates to the action. </p>\n\n<p>I have an html helper that builds up an ActionLink applying some extra styling attributes to it and renders the actionlink.</p>\n\n<p>My problem is I want to check to see if the actionfilter has been applied to the action.</p>\n\n<p>Is it possible to check to see if an actionfilter has been applied?</p>\n\n<p>Within my helper I am getting the current action and controller via</p>\n\n<pre><code>    string action = htmlHelper.ViewContext.RouteData.GetRequiredString(\"action\");\n        string controller = htmlHelper.ViewContext.RouteData.GetRequiredString(\"controller\");\n</code></pre>\n\n<p>If the actionfilter is switched on, I dont even want the user to know about the link.Is this possible to check the filter and return null if its turned on? or do I need to tackle this a different way?</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","action-filter"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":198,"score":2,"question_id":11001286,"title":"How to Replace ~/ with Base Directory in MVC 3?","body":"<p>I like the new feature of MVC 4 where it replaces tilde paths (app relative) with the client url:</p>\n\n<p><strong>href=\"~/\"</strong> becomes <strong>href=\"/\"</strong> or <strong>href=\"/appDir/\"</strong></p>\n\n<p><strong>src=\"~/images/test.png\"</strong> becomes <strong>src=\"/images/test.png\"</strong> or <strong>src=\"/appDir/images/test.png\"</strong></p>\n\n<p>I'm pretty sure I could accomplish the same thing using ActionFilters, but I'm not sure how efficient it is? I've also always wondered what happens when the pattern you are searching for splits across buffers since you are typically overriding the Write method for the stream:</p>\n\n<pre><code>public override void Write(byte[] buffer, int offset, int count) {\n    // output transformations go here\n}\n</code></pre>\n\n<p>For example, if my pattern is:</p>\n\n<pre><code>((href)|(src)|(action))\\s*=\\s*\"~/\n</code></pre>\n\n<p>What happens if the buffer includes <strong>href</strong> in one buffer chunk, and <strong>=\"~/\"</strong> in the next?</p>\n\n<p>Does MVC4 handle this at compilation time or using something similar to above?</p>\n"},{"tags":["javascript","html","asp.net-mvc","authentication","asp.net-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13112944,"title":"html/Javascript Clientside User Login","body":"<p>I am adding authentication to my web application. It is an asp.net mvc single page application. Currently the web application is using the asp.net mvc for only one thing, authentication. I check the Request.IsAuthenticated in the AppController, if it isnt authenticated than I serve the login page (else I save the app.html page). In my AccountController I have the following Logon Action:</p>\n\n<pre><code>[HttpPost]\n    [AllowAnonymous]\n    [ValidateAntiForgeryToken]\n    public ActionResult LogOn(LogOnModel model, string returnUrl)\n    {\n        if (ModelState.IsValid)\n        {\n            //VALIDATE USER NAME AND PASSWORD                \n            if (Repository_Security.CheckUser(model.UserName, model.Password))\n            {\n                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);\n                if (Url.IsLocalUrl(returnUrl) &amp;&amp; returnUrl.Length &gt; 1 &amp;&amp; returnUrl.StartsWith(\"/\") &amp;&amp; !returnUrl.StartsWith(\"//\") &amp;&amp; !returnUrl.StartsWith(\"/\\\\\\\\\"))\n                {\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    return RedirectToAction(\"Index\", \"App\");\n                }\n            }\n            else\n            {\n                ModelState.AddModelError(\"\", \"The user name or password provided is incorrect.\");\n            }\n        }\n\n        // If we got this far, something failed, redisplay form\n        return View(model);\n    }\n</code></pre>\n\n<p>Really its just taking a user name and password and validating against the database. Than sets the AuthCookie if it passes.</p>\n\n<p>My question is, is this possible if I do this entirely clientside in the browser in javascript and ajax data calls? Than be able to add a check in my clientside code to see if the user is authenticated, else throw them to a login page?</p>\n\n<p>Any ideas? thanks.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13113249,"title":"Can you cast down when passing a model to a view?","body":"<p>Lets say I have two classes one base class:</p>\n\n<pre><code>public class BaseModel {\n\n}\n</code></pre>\n\n<p>And a couple of children:</p>\n\n<pre><code>public class FooModel : BaseModel {\n\n}\n\npublic class BarModel : BaseModel {\n\n}\n</code></pre>\n\n<p>Now my view I would like to expect a model like this:</p>\n\n<pre><code>@model IList&lt;BaseModel&gt;\n</code></pre>\n\n<p>So that I can edit these models on one page.</p>\n\n<p>However when I pass in a collection of these models in the action I get an exception saying:</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type\n  'System.Collections.Generic.List<code>1[BarModel]', but this dictionary\n  requires a model item of type\n  'System.Collections.Generic.IList</code>1[BaseModel]'.</p>\n</blockquote>\n\n<p>Like this:</p>\n\n<pre><code>var models = new List&lt;BaseModel&gt;(){ new BarModel(), new FooModel ()}\nreturn View(models);\n</code></pre>\n\n<p>How can I achieve this? </p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13106702,"title":"list of checkbox true,false value MVC 3","body":"<p>I have in the view</p>\n\n<pre><code>@model IEnumerable&lt;RolesMVC3.Models.Estudent&gt;\n.\n.\n.\n    @for (var i = 0; i &lt; Model.Count(); i++)\n    { \n              &lt;tr&gt;\n                &lt;td&gt; @Html.CheckBox(\"CheckValue\")&lt;/td&gt;\n                &lt;td&gt; @Html.DisplayFor(m =&gt; m[i].CodeEstudent)  @Html.HiddenFor(m =&gt; m[i].IdEstudent)&lt;/td&gt;\n                &lt;td&gt;@Html.DisplayFor(m =&gt; m[i].NameEstudent)  @Html.DisplayFor(m =&gt; m[i].LastNameEstudent)&lt;/td&gt;\n            &lt;/tr&gt;     \n     }\n.\n.\n.\n</code></pre>\n\n<p>In the controller:</p>\n\n<pre><code>[HttpPost]\n    public ActionResult MyController(List&lt;ESTUDENT&gt; estudents, List&lt;bool&gt; CheckValue)\n    {\n\n        ///Actions\n    }\n</code></pre>\n\n<p>But, I reciveb two CheckBox for each student.</p>\n\n<p>e.g. I am sending 29 and receive 58 in the controller</p>\n\n<p>How do I associate a CheckBox with a student on this list and get in the controller?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","iis","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13112802,"title":"Deploying MVC 4 Application with Entity Framework","body":"<p>I've created an mvc application. I used entity framework to work with database. When I tested my application, I filled my database with some data through web interface of my application. When I deploy app on IIS server and copy .sdf file to deployed app's folder I get the error:</p>\n\n<blockquote>\n  <p>Access to the database file is not allowed. [ 1914,File name = C:\\last_project\\published\\App_Data\\Data.sdf,SeCreateFile ]</p>\n</blockquote>\n\n<p>How I can get working database in my deployed app?</p>\n"},{"tags":["c#","asp.net-mvc","jqgrid","browser-cache","outputcache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13112578,"title":"use same page from browser cache if query string is different","body":"<p>ASP.NET  MVC2 page is used to show order in browser as described in\n<a href=\"http://stackoverflow.com/questions/13107750/how-to-fill-document-header-from-jqgrid-data/13108019#13108019\">How to fill document header from jqgrid data</a></p>\n\n<p>at page load javascript retrieves correct document from browser and bind it to page elements.</p>\n\n<p>document id is specifiied in query string like:</p>\n\n<pre><code>www.mysite.com/GetDocument?Id=1\nwww.mysite.com/GetDocument?Id=2\n</code></pre>\n\n<p>document is cached in browser:</p>\n\n<pre><code>[OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = \"*\")]\npublic ActionResult Index(int id) \n</code></pre>\n\n<p>However browser cache is not used since different page is cached for every query string. How to force borwser to cache page which does not depend on id parameter in query string ?\nOr is it better to pass id in post parameter ?</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","view","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13112035,"title":"MVC4 Model in View issue: in debug mode Model is missing details","body":"<p>I encountered a very strange (and annoying) issue:\nin MVC 4 web application while loading data from the database and using a foreach on the Model within the view:</p>\n\n<pre><code>@foreach (var meeting in Model)\n</code></pre>\n\n<p>i have a breakpoint in the method's beginning and examining the object meeting i see that it misses some data (reference to other tables). if I open (+) other object within meeting the missing data appears.</p>\n\n<p>Why?</p>\n\n<p>Thanks!</p>\n\n<p>here is my controller method:</p>\n\n<pre><code>        public ActionResult GetMeetingMR(int id = 0)\n    {\n        var meetingPurpose = db.MeetingPurposes.ToList();\n        ViewBag.MeetingPurpose = new SelectList(meetingPurpose, \"MeetingPurposeID\", \"MeetingPurposeName\");\n        ViewBag.MRID = id;\n        List&lt;Meeting&gt; meetings = (db.MortgageRequests.Find(id)).Meetings.ToList();\n        return View(meetings);\n\n    }\n</code></pre>\n"},{"tags":[".net","asp.net-mvc","sql-server-2008","ado.net","enterprise-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13112220,"title":"SqlClient login fail when trying to connect to database","body":"<p>This is so weird.  Ok here's my connection string in the web.config of my MVC 4 project:</p>\n\n<p><strong>Here is the connection string in my Unit Test Project's App.Config file:</strong></p>\n\n<pre><code> &lt;add name=\"ConnectionString\" connectionString=\"Data Source=THESERVERNAME;Initial Catalog=THETABLE;Persist Security Info=True;Integrated Security=SSPI\" providerName=\"System.Data.SqlClient\" /&gt;\n</code></pre>\n\n<p>(I've replaced real names with fakes for this posting privacy only)</p>\n\n<p><strong>My unit test is:</strong></p>\n\n<pre><code>[Test]\npublic void GetMember_ByContractNumber_ReturnsAValidMember()\n{\n    // Arrang\n    const Int64 contractNumber = 2604914977;\n\n    // Act\n    DTO.Member member = MemberCRUD.RetrieveMember(contractNumber);\n\n    //Assert\n    Assert.IsNotNull(member);\n    Assert.IsNotNullOrEmpty(member.FirstName);\n    Assert.IsTrue(member.ContractNumber &gt; 0);\n}\n</code></pre>\n\n<p>It passes just fine!\n  I get a valid member object back from the database CRUD call.</p>\n\n<p><strong>The Problem:</strong></p>\n\n<p>But at the same time, when I try to make essentially the same call and same connection string from an MVC controller, the the same CRUD method in my DL bombs, it out at this point in code:</p>\n\n<p>and I get this exception:</p>\n\n<pre><code>{\"Login failed for user 'OURDOMAIN\\\\MYPCNAMEISHERE$'.\"} System.Data.SqlClient.SqlException\n</code></pre>\n\n<p>This database is <strong>remote</strong>, not on my local system.</p>\n\n<p>So obviously it's permissions but I don't see how to resolve this.  I think the reason my unit test passed is because it was maybe using my windows account as the identity when making the call to the DB whereas IIS for my MVC app was using the AppPoolIdentity.  So not sure how to fix this.  In my web.config I have Authentication set to None but I also tried setting it to Windows auth and enabling windows auth in IIS...no luck.</p>\n\n<p>I'm trying to run through my settings but no combination has worked so far for this permission issue.</p>\n\n<p>Again IIS is setup to use AppPoolIdentity but I also tried Network Service as the identity and added Network Service as a user and gave it permissions to my SQL DB..no luck.  I'm gonna try to add the AppPoolIdentity to my SQL Server DB but I doubt it's gonna work still.  Not sure what to try.\n-------------------------------- SUPPORTING PICS / Very Latest Settings ------------------</p>\n\n<p> in my web.config</p>\n\n<p>(I've got dbo rights on my AD account below)\n<img src=\"http://i.stack.imgur.com/AFx0L.jpg\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/XWEY2.jpg\" alt=\"enter image description here\">\n<img src=\"http://i.stack.imgur.com/ysEgi.jpg\" alt=\"enter image description here\"></p>\n\n<p>UPDATE:</p>\n\n<p><strong>Here's what I just tried as of the latest:</strong></p>\n\n<p><strong>1) Added the following users to SQL Server Security for my DB and gave them DBO rights:</strong></p>\n\n<ul>\n<li>NT AUTHORITY\\ANONYMOUS LOGON</li>\n<li>DOMAIN\\MYPCNAME$</li>\n<li>NT AUTHORITY\\NETWORK SERVICE</li>\n</ul>\n\n<p><strong>2) Added the following users to the file system security permissions for my app folder:</strong></p>\n\n<ul>\n<li>Authenticated Users</li>\n<li>IUSR</li>\n<li>SYSTEM</li>\n<li>NETWORK SERVICE</li>\n<li>MY AD ACCOUNT (DOMAIN\\MYACCOUNT)</li>\n<li>IIS APPPOOL\\MyAppPoolName</li>\n</ul>\n\n<p><strong>3) Then tried out a few things..all failed with the same error (Login Failed) when I render the MVC View:</strong></p>\n\n<p>changed the app pool identity to use the <strong>Local Service</strong>.  It then tried to connect to the SQL DB using NT AUTHORITY\\ANONYMOUS LOGON - I get login failed for NT AUTHORITY\\ANONYMOUS LOGON</p>\n\n<p>changed the pool identity to use <strong>Local System</strong>.  It tried to auth to SQL using 'DOMAINNAME\\MYPCNAME$' - I get login failed for DOMAINNAME\\MYPCNAME$</p>\n\n<p>changed the app pool identity to use <strong>Network Service</strong>.  It tried connect using 'DOMAINNAME\\MYPCNAME$'. - I get login failed for DOMAINNAME\\MYPCNAME$</p>\n\n<p>changed the app pool identity to use <strong>ApplicationPoolIdentity</strong>.  It tried to connect using 'DOMAIN\\MYPCNAMEN$'. - I get login failed for DOMAINNAME\\MYPCNAME$</p>\n\n<p><img src=\"http://i.stack.imgur.com/p4oQ8.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["asp.net-mvc","windows","lucene.net"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":8120956,"title":"LuceneNet not able to create *.fdt/*.cfs or *.fdx/*.cfx files on windows server","body":"<p>I've a MVC ASP.NET application which builds a search index on startup with LuceneNet. On my local workstation everything is working correctly, Lucene creates all files it needs. After publishing my Website on a windows server (exactly Small Business Server 2011) and requesting the website, only the segment files are created. I'm using <code>\"C:\\Temp\\LuceneIndex\"</code> as directory. Do I need some extra permission to the folder or have I missed something?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>Problem Fixed</strong></p>\n\n<p><em>In my solution there is also a REST-Service, as seperate project. After publishing the rest service everything works fine.</em></p>\n"},{"tags":["asp.net-mvc","controllers","redirecttoaction"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":8263153,"title":"How to redirect to a specific URL from within a controller?","body":"<p>I am  trying to redirect user to a specific address, after they submit a form.\nWhat I use is the code below in my Content controller:</p>\n\n<pre><code>return RedirectToAction(\"Business\", new RouteValueDictionary(new { controller = \"Content\", action = \"Business\", Id = business.BusinessID }));\n</code></pre>\n\n<p>It creates a URL like this : \n<strong>www.x.com/Content/Business?Id=13</strong></p>\n\n<p>What I really want is something like this:\n<strong>www.x.com/Content/Business/13</strong></p>\n\n<p>I really don't want the query string to be separated with ? but to be consistent with the rest of the URLs.</p>\n\n<p>Is there anyway to do so?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1569,"score":2,"question_id":8284207,"title":"ASP.NET MVC implement custom validator use IClientValidatable","body":"<p>I ask similar question <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">here</a> but in this question I use another implementation, exactly <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">this way</a> the following codes show my implementations:</p>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>public class Department {\n\n    public long Id { get; set; }\n\n    [IsDateAfter(\"Date2\", true, ErrorMessage = \"O My\")]\n    public DateTime Date1 { get; set; }\n    public DateTime Date2 { get; set; }\n    public string Name1 { get; set; }\n    public string Name2 { get; set; }\n\n}\n</code></pre>\n\n<p><strong>Custom Validator:</strong></p>\n\n<pre><code>public sealed class IsDateAfter : ValidationAttribute, IClientValidatable {\n\n    private readonly string testedPropertyName;\n    private readonly bool allowEqualDates;\n\n    public IsDateAfter(string testedPropertyName, bool allowEqualDates = false)\n  {\n        this.testedPropertyName = testedPropertyName;\n        this.allowEqualDates = allowEqualDates;\n    }\n\n    protected override ValidationResult IsValid(object value, ValidationContext\n validationContext) {\n        var propertyTestedInfo = \nvalidationContext.ObjectType.GetProperty(this.testedPropertyName);\n        if (propertyTestedInfo == null) {\n            return new ValidationResult(string.Format(\"unknown property\n {0}\", this.testedPropertyName));\n        }\n\n        var propertyTestedValue =\n propertyTestedInfo.GetValue(validationContext.ObjectInstance, null);\n\n        if (value == null || !(value is DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        if (propertyTestedValue == null || !(propertyTestedValue is\n DateTime)) {\n            return ValidationResult.Success;\n        }\n\n        // Compare values\n        if ((DateTime)value &gt;= (DateTime)propertyTestedValue) {\n            if (this.allowEqualDates) {\n                return ValidationResult.Success;\n            }\n            if ((DateTime)value &gt; (DateTime)propertyTestedValue) {\n                return ValidationResult.Success;\n            }\n        }\n\n        return new\n ValidationResult(FormatErrorMessage(validationContext.DisplayName));\n    }\n\n    public IEnumerable&lt;ModelClientValidationRule&gt; \nGetClientValidationRules(ModelMetadata metadata, ControllerContext context) {\n        var rule = new ModelClientValidationRule {\n            ErrorMessage = this.ErrorMessageString,\n            ValidationType = \"isdateafter\"\n        };\n        rule.ValidationParameters[\"propertytested\"] =\n this.testedPropertyName;\n        rule.ValidationParameters[\"allowequaldates\"] =\n this.allowEqualDates;\n        yield return rule;\n    }\n}\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>$.validator.unobtrusive.adapters.add(\n'isdateafter', ['propertytested', 'allowequaldates'], function (options) {\n    options.rules['isdateafter'] = options.params;\n    options.messages['isdateafter'] = options.message;\n});\n$.validator.addMethod(\"isdateafter\", function (value, element, params) {\nalert(params.propertytested);\nvar startdatevalue = $('input[name=\"' + params.propertytested + '\"]').val();\nif (!value || !startdatevalue) return true;\nreturn (params.allowequaldates) ? Date.parse(startdatevalue) &lt;= Date.parse(value) :\n Date.parse(startdatevalue) &lt; Date.parse(value);\n}, '');\n</code></pre>\n\n<p><strong>And My _Layout page (Master page)</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;@ViewBag.Title&lt;/title&gt;\n&lt;link href=\"@Url.Content(\"~/Content/Site.css\")\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcAjax.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/MicrosoftMvcValidation.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.js\")\" type=\"text/javascript\"&gt;\n &lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jQuery.IsDateAfter.js\")\" \n type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n    &lt;div id=\"header\"&gt;\n        &lt;div id=\"title\"&gt;\n            &lt;h1&gt;\n                My MVC Application&lt;/h1&gt;\n        &lt;/div&gt;\n        &lt;div id=\"logindisplay\"&gt;\n            @Html.Partial(\"_LogOnPartial\")\n        &lt;/div&gt;\n        &lt;div id=\"menucontainer\"&gt;\n            &lt;ul id=\"menu\"&gt;\n        &lt;li&gt;@Html.ActionLink(\"Departments\", \"Index\", \"Department\")&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div id=\"main\"&gt;\n        @RenderBody()\n    &lt;/div&gt;\n    &lt;div id=\"footer\"&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>of course in Edit And Create View pages the other script source are as following:</p>\n\n<pre><code>&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;\n&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"\ntype=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>A part of Create Page Dom:</strong></p>\n\n<pre><code>&lt;fieldset&gt;\n&lt;legend&gt;Department&lt;/legend&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date1\"&gt;Date1&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date1\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date1\"\n data-val-required=\"The Date1 field is required.\" data-val-isdateafter-\n propertytested=\"Date2\" data-val-isdateafter-allowequaldates=\"False\" data-val-\nisdateafter=\"O My\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\n  for=\"Date1\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-label\"&gt;\n&lt;label for=\"Date2\"&gt;Date2&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n&lt;input id=\"Date2\" class=\"text-box single-line valid\" type=\"text\" value=\"\" name=\"Date2\"\n data-val-required=\"The Date2 field is required.\" data-val=\"true\"&gt;\n&lt;span class=\"field-validation-valid\" data-valmsg-replace=\"true\" data-valmsg-\nfor=\"Date2\"&gt;&lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I try All of implementation be the same as <a href=\"http://stackoverflow.com/questions/7025198/mvc3-custom-validation-compare-two-dates\">here</a> but that not work in client side and need to postback, I don't have any other implementation for example register in global.asax \nlike <a href=\"http://stackoverflow.com/questions/8278883/asp-net-mvc-run-custom-validators-in-client-side/8280323#8280323\">this</a>, Does any one know about it? I really confused, I tried 2 way but none of them give the true answer.</p>\n\n<p><strong>Edit: Find answer and another Question:</strong></p>\n\n<p>I don't know why but when I add source of my script to _Layout page that not work, but when added in Create or Edit View pages that work, does any one know about it? </p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-3","orchardcms"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3182,"score":6,"question_id":6404330,"title":"How to deploy an Orchard CMS site, including all settings and content from development environment?","body":"<p>I've been trying to build and deploy a website running on Orchard CMS. I've previously donwloaded Orchard, set up a development environment, made a few modifications to the source, added and modified a theme, added som content and so forth. I've been using the SQL CE as database. Now I want to build and deploy the complete website. I've built a deployment package by running the build script, as described <a href=\"http://www.orchardproject.net/docs/Building-and-deploying-Orchard-from-a-source-code-drop.ashx\">here</a>. It's easy to simply ftp the built package to the hosting server. However, when visiting the site I now get the install a new site procedure. Apparently, the cms settings and content from my development environment have not been reflected in the deployment package. Thus, I need to copy all the content and re-do all the settings, including creating all widgets etc. again. </p>\n\n<p>Do anyone have any good idea on how to publish an Orchard site from a development to a production environment, including the cms settings, widget setings, content, etc? All guides I've found on the web describe how to use WebMatrix to deploy an Orchard site to shared hosting or Azure, but all of those guides end up with having a clean Orchard installation. What I would like to achive is to develop the site locally, and then push the entire site to the hosting server.</p>\n"},{"tags":["c#","asp.net",".net","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13109684,"title":"Entity Framework Code First Error - EntityType 'Variable' has no key defined","body":"<p>I'm using Entity Framework 5 Code First in an ASP.NET MVC 4 project and I'm getting the following error:</p>\n\n<blockquote>\n  <p>One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Variable' has no key defined. Define the key for this EntityType.\n  \\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Variables' is based on type 'Variable' that has no keys defined.</p>\n  \n  <p>Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. </p>\n  \n  <p>Exception Details: System.Data.Entity.ModelConfiguration.ModelValidationException: One or more validation errors were detected during model generation:</p>\n  \n  <p>\\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Variable' has no key defined. Define the key for this EntityType.\n  \\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Variables' is based on type 'Variable' that has no keys defined.</p>\n</blockquote>\n\n<p>This has been driving me nuts for the last hour. I have searched my solution and have nothing called 'Variable' at all!</p>\n\n<p>My context looks like this:</p>\n\n<pre><code>public class MyContext : DbContext, IDisposedTracker\n{\n\n    public DbSet&lt;Project&gt; Projects { get; set; }\n\n    public bool IsDisposed { get; set; }\n}\n</code></pre>\n\n<p>My model looks like this:</p>\n\n<pre><code>public class Project\n{\n    [Key]\n    public int Uid { get; set; }\n\n    public string Id { get; set; }\n\n    public string Name { get; set; }\n\n    public string Description { get; set; }\n\n    public List&lt;Task&gt; Tasks { get; internal set; }\n}\n</code></pre>\n\n<p>Task looks like this:</p>\n\n<pre><code>public class Task\n{\n    [Key]\n    public int Uid { get; set; }\n\n    public string Id;\n\n    public string Name;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","mvc"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1391,"score":1,"question_id":8495706,"title":"MVC Html.ActionLink with post funtionality?","body":"<p>I'm checking to see if anyone has written an MVC extension for Html.ActionLink that you can pass in Post parameters like such:</p>\n\n<pre><code>&lt;% Html.ActionLink(\"Click me\", \"Index\", \"Home\", new { MyRouteValue = \"123\" }, null, new { postParam1 = \"a\", postParam2 = \"b\" }); %&gt;\n</code></pre>\n\n<p>That would render the link like normal but having an onClick event that submits an also rendered form with an Action url for the Action, Controller, and Route Values with additional hidden inputs from the Post Parameters like such:</p>\n\n<pre><code>&lt;a href=\"#\" onClick=\"$('#theform').submit(); return false;\"&gt;Click me&lt;/a&gt;\n&lt;form id=\"theform\" action=\"/Home/Index/123\" method=\"post\"&gt;\n   &lt;input type=\"hidden\" name=\"postParam1\" value=\"a\"&gt;\n   &lt;input type=\"hidden\" name=\"postParam2\" value=\"b\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I'm looking to redirect users to various pages with potentially a lot of data. Not only from page to page, but from email to page also. This would be highly reusable and I think would clean up a lot of code, and would save a bunch of time writing this if its already floating around out there. I hate recreating the wheel when I don't have to. Thanks!</p>\n"},{"tags":["asp.net-mvc","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13111749,"title":"Upload multiplr files using ASP.Net MVC","body":"<p>I need a open dialog to select many files and then I want to handle the files in controller. How should the view look like? I'm using aspx not razor.</p>\n\n<p>with this code we can select just one file and then use it in controller</p>\n\n<pre><code>&lt;div class=\"editor-field\"&gt;\n    &lt;input type=\"file\" id=\"img1\" name=\"img1\" /&gt;\n&lt;/div&gt; \n</code></pre>\n\n<p>but what about selecting multiple files? (By Shift or Ctrl keys)</p>\n"},{"tags":[".net","asp.net-mvc","caching","asp.net-caching"],"answer_count":7,"favorite_count":9,"up_vote_count":11,"down_vote_count":0,"view_count":7728,"score":11,"question_id":2105481,"title":"how to cache css, images and js?","body":"<p>I would like to have images, css, and javascript cached client-side on their browser when they load up a web page. There are so many different types of caching I am confused as to which ones to use with asp.net mvc. </p>\n\n<p>Would it also be possible to have their browsers check for new or modified versions of these files? </p>\n\n<p>Thanks!</p>\n"},{"tags":[".net","asp.net-mvc","http","caching"],"answer_count":7,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":5071,"score":7,"question_id":936626,"title":"How can I force a hard refresh (ctrl+F5)?","body":"<p>We are actively developing a website using .Net and MVC and our testers are having fits trying to get the latest stuff to test. Every time we modify the style sheet or external javascript files, testers need to do a hard refresh (ctrl+F5 in IE) in order to see the latest stuff.</p>\n\n<p>Is it possible for me to force their browsers to get the latest version of these files instead of them relying on their cached versions? We're not doing any kind of special caching from IIS or anything.</p>\n\n<p>Once this goes into production, it will be hard to tell clients that they need to hard refresh in order to see the latest changes.</p>\n\n<p>Thanks!</p>\n"},{"tags":[".net","asp.net-mvc","action"],"answer_count":5,"favorite_count":3,"up_vote_count":18,"down_vote_count":0,"view_count":10729,"score":18,"question_id":1296680,"title":".NET MVC Call method on different controller","body":"<p>Can anybody tell me how to call a method on a different controller from within an action method? I don't want to redirect. I want to call a method on a different controller that returns a string and use the response within my action method. </p>\n"},{"tags":["asp.net",".net","asp.net-mvc","linux","mono"],"answer_count":3,"favorite_count":11,"up_vote_count":26,"down_vote_count":0,"view_count":4149,"score":26,"question_id":1172429,"title":"Deploy ASP.NET MVC on Linux: Best Practices, Tools & Suprises","body":"<p>I'm wondering about best practices to develop ASP.NET MVC apps with an option to deploy on Linux. If you are creating these kinds of MVC apps,</p>\n\n<ul>\n<li>What Linux/Mono platform are you targeting?</li>\n<li>How much of the development are you doing on Windows and how much on Linux?</li>\n<li>Are you using an ORM to abstract the database? Which one?</li>\n<li>Are you running a build engine on Linux? What about tests?</li>\n<li>What other tools are you using?</li>\n<li>How much additional work has it been to target Linux in addition to Windows?</li>\n<li>What ugly or pleasant suprises have you encountered?</li>\n</ul>\n"},{"tags":[".net","xml","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":135,"score":1,"question_id":2592885,"title":"What is your prefered way to return XML from an ActionMethod in Asp.net MVC?","body":"<p>I am displaying charts that load the data asynchronously because the searches are the work to fetch the data is quite heavy. The data has to be return as XML to make the chart library happy.<br>\nMy ActionMethods return a ContentResult with the type set as text/xml. I build my Xml using Linq to XML and call ToString. This works fine but it's not ideal to test.<br>\nI have another idea to achieve this which would be to return a view that builds my XML using the XSLT View engine.  </p>\n\n<p>I am curious and I always try to do the things \"the right way\". So how are you guys handling such scenarios?   </p>\n\n<p>Do you implement a different ViewEngine (like xslt) to build your XML or do you Build your XML inside your controller (Or the service that serves your controller)?</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Since I need this to pass the data to a Charting Library, <strong>I have to follow their xml structure</strong>. Their notation is not the way i want to build my model classes at all. That's why I build the XML myself using Linq to XML and wonder if a template would be better.<br>\n<strong>Simple serialization is not what I look for</strong></p>\n"},{"tags":["asp.net",".net","xml","asp.net-mvc"],"answer_count":5,"favorite_count":13,"up_vote_count":57,"down_vote_count":0,"view_count":14007,"score":57,"question_id":134905,"title":"What is the best way to return XML from a controller's action in ASP.NET MVC?","body":"<p>What is the best way to return XML from a controller's action in ASP.NET MVC?  There is a nice way to return JSON, but not for XML.  Do I really need to route the XML through a View, or should I do the not-best-practice way of Response.Write-ing it?</p>\n"},{"tags":[".net","xml","asp.net-mvc","actionresult"],"answer_count":5,"favorite_count":9,"up_vote_count":34,"down_vote_count":0,"view_count":14473,"score":34,"question_id":878695,"title":"How to return an XML string as an action result in MVC","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/134905/what-is-the-best-way-to-return-xml-from-a-controllers-action-in-asp-net-mvc\">What is the best way to return XML from a controller&#39;s action in ASP.NET MVC?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm able to return JSON and partial views (html) as a valid ActionResult, but how would one return an XML string?</p>\n"},{"tags":[".net","asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":439,"score":1,"question_id":11101148,"title":"Entity Framework 5 Enums with Description attribute using Database First","body":"<p>I would like to something like this:</p>\n\n<pre><code>public enum States\n{\n    California,\n    [Description(\"New Mexico\")]\n    NewMexico,\n    [Description(\"New York\")]\n    NewYork,\n    [Description(\"South Carolina\")]\n    SouthCarolina,\n    Tennessee,\n    Washington\n}\n</code></pre>\n\n<p>So that when I'm making a Drop Down List using .NET MVC I can use spaces in my names. If I used Code First then I could do this but I am using Database First and the .edmx designer doesn't allow attributes on the generated states (as far as I know!). Any ideas on how I can do this? I am using .NET 4.5 and EF 5 beta.</p>\n"},{"tags":[".net","wpf","asp.net-mvc","web-applications","xbap"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":155,"score":2,"question_id":12770054,"title":"WPF (XBAP) vs ASP.NET MVC on Intranet?","body":"<p>I need to make an application that will be used within an organization. They need it to be available on their network. I have considered two options ASP.NET MVC and WPF (web). </p>\n\n<p>WPF Web Browser applications can be accessed on IE and Firefox.</p>\n\n<p>What are the pros and cons of using ASP.NET MVC and WPF over the Intranet ? </p>\n\n<p>Should I go with ASP.NET MVC or WPF ?</p>\n"},{"tags":["asp.net-mvc","url","deployment","webfarm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13108497,"title":"Does urls need to constructed dynamically for webfarm?","body":"<p>We are planning to shift our asp .net mvc application to webfarm with loadbalancer, </p>\n\n<p>I am concern about many hardcoded urls available in the application like.</p>\n\n<pre><code>&lt;a href=\"https://root:xxx/home/index\"&gt;Index&lt;/a&gt;\n</code></pre>\n\n<p>and </p>\n\n<p><strong>this.RedirectToAction(x=>x.Index());</strong></p>\n\n<p>and </p>\n\n<p><strong>Response.Redirect(\"~/home/index\");</strong></p>\n\n<p>Does this url need to be dynamically constructed inorder to redirect to some specific location, based on RRA algorith.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":773,"score":0,"question_id":5279483,"title":"I cannot Model.Count in view page","body":"<p>I am responsible to maintain legacy system. The system was developed from Visual Studio 2008 and MVC 1.0. However, the version of visual studio I have is 2010. Now I am faced with new problem that Model object in View cannot use the method from original class. The following is header of view file.</p>\n\n<pre><code>&lt;%@ Page Title=\"\" Language=\"VB\" MasterPageFile=\"~/Views/Shared/Site.Master\" Inherits=\"System.Web.Mvc.ViewPage(Of System.Linq.IQueryable(Of MVCApplication.opportunity))\"%&gt;\n</code></pre>\n\n<p>In the view part, I have following code.</p>\n\n<pre><code>    &lt;%  If (Model.Count &lt;&gt; 0) Then%&gt;\n</code></pre>\n\n<p>However, when I try to use member 'Count', there is System.MissingMemberException: Public member 'Count' on type 'DataQuery(Of opportunity)' not found.</p>\n\n<p>In debug mode, model contain the same data as the controller. However, it seems the view page cannot access them. Do you have any suggestion how to fix it?</p>\n"},{"tags":["asp.net","asp.net-mvc","visual-studio-2010"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":668,"score":1,"question_id":2639103,"title":"Visual Studio 2010 RTM started giving me 'does not exist in the current context errors'","body":"<p>Just installed the trial version of Visual Studio 2010 RTM.</p>\n\n<p>Now I keep getting :<br /></p>\n\n<p>The name 'NoPanel' does not exist in the current context<br /></p>\n\n<p>Errors (where no panel is just about any control in the .aspx file)\nalso I got several errors trying to deploy pages and it would not send the .cs file over ...or pdfs in the Content directory (even though I had copy always set)...  </p>\n\n<p>This is happening on a pair of  mixed ASP.NET MVC and Webforms sites.</p>\n"},{"tags":["jquery","html","asp.net-mvc","asp.net-mvc-2"],"answer_count":14,"favorite_count":9,"up_vote_count":35,"down_vote_count":0,"view_count":69849,"score":35,"question_id":2194992,"title":"JQuery - $ is not defined","body":"<p>I have a simple jquery click event</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function() {\n        $('#post').click(function() {\n            alert(\"test\"); \n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>and a jquery reference defined in the site.master</p>\n\n<pre><code>&lt;script src=\"&lt;%=ResolveUrl(\"~/Scripts/jquery-1.3.2.js\")%&gt;\" type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I have checked that the script is being resolved correctly, i'm able to see the markup and view the script directly in firebug, so i must be being found. However i am still getting...</p>\n\n<pre><code>$ is not defined\n</code></pre>\n\n<p>and non of the jquery works. I've also tried the various variations of this like $(document).ready and jQuery etc.</p>\n\n<p>It's an MVC 2 app on .net 3.5, i'm sure i'm being really dense, everywhere on google says check the file is reference correctly, which i have checked and checked again, please advise! :/</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":83,"score":0,"question_id":13000510,"title":"What is the difference between a function with HttpGet or HttpPost Attribute and a function with no attribute?","body":"<p>I'm following this tutorial:</p>\n\n<p><a href=\"http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view\" rel=\"nofollow\">http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view</a></p>\n\n<p>It describes a situation when a user click a button and then a function without an attribute is called.</p>\n\n<p>But when a function with HttpPost attribute is added, this function is called and not the function without the attribute.</p>\n\n<p>The button initiates Html.BeginForm() which creates a post request. So why did the function without the attribute got called?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13110978,"title":"play music while slideshow display in mvc","body":"<p>I want to know how can I play in background sound from mp3 file while displaying image slideshow in mvc3. \nCan someone give some example please? \nAlso, as second part of the question if someone has an idea, if there are 3 images and there are 3 minutes music, I want the images to be changed every minute, if its possible.</p>\n\n<p>Thanks in advance, Laziale</p>\n"},{"tags":["c#","asp.net-mvc","facebook","sso"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13109687,"title":"Same username with custom and facebook login","body":"<p>I've a site with user registration (ASP.Net Membership) and Facebook login button.</p>\n\n<p>I use <code>SetAuthCookie(model.UserName...</code> in both login acions and everithing seems to work!</p>\n\n<p>Now... what if a FB username is the same of already registered user?</p>\n\n<p>Is there a best practice?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13107585,"title":"Validating that a Reason field is filled if Date field is today","body":"<p>I use ASP.NET MVC4 in my solution. I have the ViewModel below where I would like to validate that the field EmergencyReason is filled only if the field Date is today. I try this:</p>\n\n<pre><code>public class LoadingViewModel\n{\n    public DateTime Date { get; set; }\n\n    [RequiredIf(\"Date\", Comparison.IsEqualTo, DateTime.Today)]\n    public string EmergencyReason { get; set; }\n    ...\n}\n</code></pre>\n\n<p>It doesn't work. The third argument of RequiredIf must be a constant expression, ...</p>\n\n<p>Any idea how can I force the user to enter an EmergencyReason only if Date field is today?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","entity-framework","razor","partial-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13109812,"title":"@Html.Partial return: The model item passed into the dictionary is of type __ but this dictionary requires a model item of type __","body":"<p>I am trying to add a partial view to my MVC4 web application and I receive the following exception:</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type '...Meeting', but this dictionary requires a model item of type 'System.Collections.Generic.List`1[...UserProfile]'.</p>\n</blockquote>\n\n<p>what I did so far:</p>\n\n<ol>\n<li>i added to my controller this function:</li>\n</ol>\n\n<blockquote>\n<pre><code>public PartialViewResult GetUsers()\n        {\n            var usersList = (from users in db.Users select users).ToList();\n            return PartialView(usersList);\n        }\n</code></pre>\n</blockquote>\n\n<ol>\n<li>I added the parital view:</li>\n</ol>\n\n<blockquote>\n<pre><code>@model List&lt;UserProfile&gt;\n@{\n &lt;select id=\"Meeting_SetToUser\" name=\"Meeting.SetToUser\"&gt;\n        @foreach (var item in Model)\n        {\n            &lt;option value=\"@item.UserId\"&gt;@item.FirstName @item.LastName&lt;/option&gt;\n        }\n    &lt;/select&gt;\n}\n</code></pre>\n</blockquote>\n\n<ol>\n<li>i called the partialview from my view:</li>\n</ol>\n\n<blockquote>\n<pre><code>@Html.Partial(\"GetUsers\")\n</code></pre>\n</blockquote>\n\n<p>can you please direct me to were I am doing anything wrong?</p>\n\n<p>Thank you!</p>\n"},{"tags":["javascript","asp.net-mvc","deployment","routing","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13095292,"title":"Setting up a common route for javascript calls in ASP.NET MVC project","body":"<p>I have a bizarre routing issue with my ASP.NET MVC project that I hope you guys can help me with.</p>\n\n<p>Overall everything works fine when I run the project off my localhost or run it on the server while it's deployed directly at <code>http://myServerName</code>. The problems start when I deploy the application to various enviornments on the server located under different virtual directories. For example: <code>http://myServerName/QaEnviornment</code> or <code>http://myServerName/TestEnviornment</code></p>\n\n<p>The problem is that all Javascript calls to application URLs ignore my environment virtual directories and fail.\nFor example on my QA server whenever I have to make an Ajax call I take a standard approach such as:</p>\n\n<pre><code>var myUrl = '/ControllerName/ActionMethodName/'\n$.ajax({url:myUrl,success:function(){Do stuff} })\n</code></pre>\n\n<p>Because my application is deployed on <code>http://myServerName/QaEnviornment</code>, when rendered I expect myUrl to be <code>http://myServerName/QaEnviornment/ControllerName/ActionMethodName</code>. Instead it comes back <code>as http://myServerName/ControllerName/ActionMethodName</code> and ofcourse fails.</p>\n\n<p>To get around this for now I declared a global Javascript variable that contains the environment folder name and when I build URLs for javascript calls I have to remember to ALWAYS construct them as var <code>myUrl = myGlobalFolderVar + '/ControllerName/ActionMethodName/'</code></p>\n\n<p>Using a global Javascript variable to get around this issue seems as a bad solution to me. Is there anything I can do to get routing to work properly so whenever javascript calls are made whatever subfolder the application is running under is always included in the URL ? </p>\n\n<p>Thank you in advance !</p>\n"},{"tags":["asp.net-mvc","jquery-ajax","parameter-passing"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13100198,"title":"MVC: pass parameter to action using Jquery.ajax()","body":"<p>I'm pretty new to <code>MVC</code>. I need to make <code>ajax</code> call to an <code>Action</code> with parameters using <code>html.Action()</code>. I'm unable to pass this..</p>\n\n<p>Hope it will be helpful for other MVC begineers as well..</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;%: Html.ActionLink(\"Add Race\", \"AddRace\", \n        new {eventId = Model.EventId, fleetId=Model.SelectedFleet.ID}, \n        new{@onclick=string.Format(\"return checkFleetAddedandScroing()\")}) %&gt;\n</code></pre>\n\n<p><strong>Jquery:</strong></p>\n\n<pre><code> function checkFleetAddedandScroing() {\n        debugger;\n        $.ajax({\n            type: \"GET\",\n            url: '&lt;%=Url.Action(\"CheckFleetExists\")%&gt;',\n            dataType: \"json\",\n            cache: false,\n            success: function (data, textStatus) {\n                data = eval(\"(\" + data + \")\");\n                if (data == true) {\n                    return true;\n                }\n                else {\n                    alert(\"Cannot Add race becasue you have not yet added any fleets and fleet scoring is checked.\");\n                    return false;\n                }\n            }, //success\n            error: function (req) {\n\n            }\n        });           \n    }\n</code></pre>\n\n<p><strong>Action:</strong></p>\n\n<pre><code>  public JsonResult CheckFleetExists(Guid fleetId )\n    {\n        bool exists = false;\n        try\n        {\n            exists = !db.Races.Any(r =&gt; r.FleetID == fleetId);\n        }\n        catch\n        {\n        }\n        return Json(exists, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p>I need to pass <code>fleetid</code> to action which is in <code>Model.SelectedFleet.ID</code>. Its being used somewhere on pages. But i'm unable to use that somehow..</p>\n\n<p>please suggest where i'm doing wrong...</p>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13105745,"title":"linq nested group by","body":"<p>I have a table Assessment, which contains {rated,rater,assessment_id} another table is Category_Scores which contains {score, assessment_id}. I am attempting to group this by rated group by raters, group by scores. Currently I have this LINQ query</p>\n\n<pre><code>        var query = (from a in db.Assessments\n                     join u in db.Users on a.rated equals u.user_id\n                     join u2 in db.Users on a.rater equals u2.user_id\n                     join tm in db.Team_Members on u.user_id equals tm.user_id\n                     join t in db.Teams on tm.team_id equals t.team_id\n                     join c in db.Category_Scores on a.assessment_id equals c.assessment_id\n                     join cat in db.Categories on c.category_id equals cat.category_id\n\n                     group new KyubiViewModel\n                     {\n                         rated = u.firstName + \" \" + u.lastName,\n                         rater = u2.firstName + \" \" + u2.lastName,\n                         score = c.score,\n                         category_name = cat.name,\n                         categoryid = c.category_id,\n\n                     }\n                     by new { rated = u.firstName + \" \" + u.lastName,rater = u2.firstName + \" \" + u2.lastName }).ToList();\n</code></pre>\n\n<p>This results in </p>\n\n<pre><code>  { rated = John Will, rater = Jess James}\n   10 [Math]\n   10 [Science]\n\n  { rated = John Will, rater = Mike Rand}\n   7 [Math]\n   7 [Science]\n</code></pre>\n\n<p>I want it to look like</p>\n\n<pre><code> { rated = John Will }\n     rater:        Math      Science\n     Jess James     10         10\n     Mike Rand      7          7\n\n { rated = Jess James }\n     rater:        Math      Science\n     John Will      9          9\n     Mike Rand      7          7\n</code></pre>\n\n<p>Here's my View </p>\n\n<pre><code>     &lt;table&gt;\n@foreach (var group in Model)\n{\n &lt;tr&gt;\n &lt;td&gt;@group.Key &lt;/td&gt;\n &lt;/tr&gt;\n    foreach (var m in group)\n    {\n\n      &lt;tr&gt;\n      &lt;td&gt;@m.score - [@m.category_name]&lt;/td&gt;\n &lt;/tr&gt;\n\n     }\n}\n\n&lt;/table&gt;\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n\n<p>With ChaseMedallion's help i was able to have this in my view </p>\n\n<pre><code> { rated = John Will }\n         rater:        \n         Jess James     10[Math]    \n         Jess James     10[Science]    \n         Mike Rand      7[Math]          \n         Mike Rand      7[Science]\n</code></pre>\n\n<p>I wish to have it this way if possible</p>\n\n<pre><code> { rated = John Will }\n     rater:        Math      Science\n     Jess James     10         10\n     Mike Rand      7          7\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":12,"up_vote_count":35,"down_vote_count":0,"view_count":12521,"score":35,"question_id":776781,"title":"Problem using Html.ActionLink to call action on different controller","body":"<p>I am trying to navigate between controllers using ActionLink.</p>\n\n<p>I will tell my problem with an example. </p>\n\n<p>I am on Index view of Hat controller</p>\n\n<p>I am trying to use below code to create a link to Details action of Product controller.</p>\n\n<pre><code>&lt;%= Html.ActionLink(\"Details\", \"Details\", \"Product\", new { id=item.ID }) %&gt;\n</code></pre>\n\n<p>Instead of creating me a link to Details on Product controller this generates a link to Details action under Hat controller and appends a Length parameter to the end of it:</p>\n\n<p>Hat/Details/9?Length=7</p>\n\n<p>I am not able to use HTML.ActionLink to switch between controllers because of this problem. I will appreciate if you can point me to what I am doing wrong. Thanks</p>\n\n<p>PS: I am using the default route setting that comes with mvc</p>\n\n<p>routes.MapRoute(\"Default\", \"{controller}/{action}/{id}\", new { controller = \"Home\", action = \"Index\", id = \"\" } );</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-membership","asp.net-4.0"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13109591,"title":"Generating a valid Guid to pass to the SqlMembershipProvider.CreateUser() methods Object providerUserKey parameter","body":"<p>No matter how I try to pass the Guid object it tells me the reference is set to null or just sees it as invalid value. When using <code>Membership.CreateUser()</code> directly it works fine without the need to pass this object, however I am wanting to use the e-mail as the username and want to use the <code>EmailAsUsernameMembershipProvider</code> class to automatically set username to e-mail value. The membership provider in question is the <code>System.Web.Providers.DefaultMembershipProvider</code></p>\n\n<pre><code>[HttpPost]\n        public ActionResult Register(RegisterModel RegisterModel, string returnUrl)\n        {\n            ViewBag.ShowSignUpErrors = true;\n            if (ModelState.IsValid)\n            {\n                // Attempt to register the user\n                MembershipCreateStatus createStatus;\n                Guid key = Guid.NewGuid();\n                EmailAsUsernameMembershipProvider Emp = new EmailAsUsernameMembershipProvider();\n\n                var User = Emp.CreateUser(RegisterModel.Password, RegisterModel.Email, null, null, true, key, out createStatus);\n\n                if (createStatus == MembershipCreateStatus.Success)\n                {\n                    Roles.AddUserToRole(User.UserName,\"StandardUser\");\n                    FormsAuthentication.SetAuthCookie(RegisterModel.Email, false /* createPersistentCookie */);\n                    returnUrl = String.IsNullOrEmpty(returnUrl) ? Url.Action(\"Index\", \"Education\") : returnUrl;\n                    return Redirect(returnUrl);\n                }\n                else\n                {\n                    ModelState.AddModelError(\"\", ErrorCodeToString(createStatus));\n                }\n            }\n\n            // If we got this far, something failed, redisplay form\n            LogOnAndRegisterModel model = new LogOnAndRegisterModel() { RegisterModel = RegisterModel };\n            return View(\"LogOn\",model);\n        }\n\n\n\n\npublic class EmailAsUsernameMembershipProvider : SqlMembershipProvider\n{\n    public MembershipUser CreateUser(string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)\n    {\n        return base.CreateUser(email, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, out status);\n    }\n    private new MembershipUser CreateUser(string username, string password, string email, string passwordQuestion, string passwordAnswer, bool isApproved, object providerUserKey, out MembershipCreateStatus status)\n    {\n        return base.CreateUser(email, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, out status);\n    }\n\n    public override bool RequiresUniqueEmail\n    {\n        get\n        {\n            return true;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","wcf","date-formatting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":12976600,"title":"Is there a way to convert a date format when referencing it from an external service?","body":"<p>I am trying to convert a date from <code>19/10/2012 00:00:00</code> to <code>19/10/2012</code>. I can't state the date type in the viewmodel like <a href=\"http://stackoverflow.com/questions/4679352/converting-datetime-format-using-razor\">here</a> as code is as below:</p>\n\n<p>Viewmodel:</p>\n\n<pre><code>public Appointment Appointment {get; set;}\n</code></pre>\n\n<p>I am aware that mapping is an option but would like to see if an alternate option is available as this will make reusing the code easier and if the service changes at all then mapping will complicate things.</p>\n\n<p>Mock service example:</p>\n\n<pre><code>public class Appointment\n    {\n        [DataMember]\n        public DateTime AppointmentDate { get; set; }  \n        [DataMember]\n        public Identifier AppointmentIdentifier { get; set; }\n        [DataMember]\n        public string Location { get; set; }\n        [DataMember]\n\n    ...etc\n</code></pre>\n"},{"tags":["asp.net-mvc","json","jquery-ajax","asp.net-mvc-4","postback"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13108772,"title":"Jquery postback not working on mvc 4 client side","body":"<p>I'm trying to simply create a json postback so I can update some controls on the client side.  I cant find a good example to show this.  </p>\n\n<p>Here's what I got so far which appears to be firing off an alert from the controller but keeps saying 'undefined' object on client side. </p>\n\n<p>What is best practice method of achieving this as I dont know how to debug javascript in the same manner as regular code?  :( I'm using vs2012 express, mvc 4, jquery 1.7.1 and jquery mobile 1.1.</p>\n\n<p>My controller  Time/Index:</p>\n\n<pre><code>[HttpPost]\npublic JsonResult Index()\n{\n     var msg = \"hello there\";  //test message\n     return Json(msg);\n}\n</code></pre>\n\n<p>My client side:</p>\n\n<pre><code>function populateUserDetails() {\n     var user = {};\n     user.UserId = $(\"#UserId\").val();    // potential fields i may use once i get it working\n     $.post('Time/Index', user, updateFields, 'json');\n };\n\nupdateFields = function (data) {\n    alert(\"hi \" + data.msg);\n    $(\"#textEntered\").val(data.msg);\n};\n</code></pre>\n\n<p><em><strong></em>***<em></strong> UPDATE <strong></em>**<em>*</em>**<em>*</em>***</strong></p>\n\n<p>fixed it by wrapping returned object in controller into a temporary class:</p>\n\n<pre><code>    [HttpPost]\n    public JsonResult Index()\n    {\n        var response = new {msg = \"hello there\"};   //here's what i changed\n        return Json(response);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13105207,"title":"How do I prevent entity framework from creating extra tables","body":"<p>I have an issue when I upgraded entity framework to 5.0, to illustrate:</p>\n\n<pre><code>public class MyClass\n{\n   public Foo foo;\n\n   public ICollection&lt;Student&gt; Students{ get; set; }\n\n}\n\npublic class Student\n{\n   public int Id {get; set;}\n   public string s {get; set;}\n}\n\npublic class Foo\n{\n  public int data {get; set}\n  ...\n}\n</code></pre>\n\n<p>EF correctly creates a table called Students because I have defined a one-to-many relationship from MyClass to Student. I am using class Foo as encapsulation and have a 1-to-1 relationship. </p>\n\n<p>EF 4.0 did not create a separate table for <code>Foo</code>, instead used the property data as <code>Foo_data</code> within the MyClass table. With EF 5.0 I am getting another table for <code>Foo</code>.</p>\n\n<p>How can I tell EF not to create a table for <code>Foo</code>? </p>\n"},{"tags":["jquery","asp.net","asp.net-mvc","asp.net-mvc-3"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":213,"score":0,"question_id":6628012,"title":"jQuery Ready code not executing","body":"<p>I have the following code in my <code>_Layout.cshtml</code>, targeted at a view once removed, through a layout nested one level below <code>_Layout.cshtml</code>.  </p>\n\n<pre><code>&lt;title&gt;@ViewBag.PageTitle&lt;/title&gt;\n&lt;link rel=\"icon\" type=\"image/png\" href=\"@Url.Content(\"~/Images/favicon.png\")\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"@Url.Content(\"~/Content/Blueprint/screen.css\")\" media=\"screen, projection\" /&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"@Url.Content(\"~/Content/Blueprint/print.css\")\" media=\"print\" /&gt;\n@Html.Telerik().StyleSheetRegistrar().DefaultGroup(group =&gt; group.Add(\"telerik.common.css\").Add(\"telerik.simple.css\"))\n@RenderSection(\"MainBodyStyling\", false)\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function () {\n        debugger;\n        //$(\"iframe\").width($(\"iframe\").contents().find(\"table\").width());\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I cannot get the jQuery code to execute, in Chrome or Firefox 5.0, even just the debugger call.  This is with jQuery 1.4.4, inside an MVC3 project.  The code works when I paste it into both Firebug and Chrome JS consoles, so I know the code itself is not at fault.  </p>\n\n<p><strong>CORRECTION:</strong>  I added the erroneous document with quotes as a last ditch attempt.  I had tried my default (I'm quite used to working with jQuery), <code>$(function () {</code> syntax, with no difference.  The real problem is not my syntax, but correct code not executing.  I have removed the quotes with no difference at all.</p>\n\n<p><strong>ADDENDUM:</strong>  If I put a breakpoint on the <code>debugger</code> line, the code stops at the breakpoint in the Chrome console.  I have no idea what this is about.</p>\n"},{"tags":["c#","asp.net-mvc","performance","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13103852,"title":"I want to improve performance of my Edmx by using AutoDetectChanges","body":"<p>I have a reasonably large edmx generated from a database and I have been working on performance recently to improve my application I have read a number of articles in a variety of places some here some not</p>\n\n<p>this one on disabling auto detect of changes <a href=\"http://msdn.microsoft.com/en-us/data/jj556205.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/data/jj556205.aspx</a> </p>\n\n<p>this one on improving performance on delete <a href=\"http://stackoverflow.com/questions/10103310/dbcontext-is-very-slow-when-adding-and-deleting\">DbContext is very slow when adding and deleting</a></p>\n\n<p>this one (which I think is pretty good) <a href=\"http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework\" rel=\"nofollow\">http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework</a></p>\n\n<p>I am already using myentities.tablename.MergeOption = MergeOption.NoTracking, i am using compiledqueries, I am pregenerated my View using EdmGen, I have reduced the data I am fetching etc..  and, of course,  I have gained performance in leaps and bounds so that a page that was loading in 54 seconds is now taking 16.1 seconds - however I have to get it to 3 seconds So I am still looking for the next improvement </p>\n\n<p>so the research is all well and great and as a result  I have upgraded to the latest EntityFramework, I have regenerated my .edmx from db etc... and tried a variety of things but I simply cannot find a myEntities.Configuration.AutoDetectChangesEnabled in order to set it to false. Now I must be missing a simple easy trick - how do I get my edmx to have this option.</p>\n\n<p>I am in this environment.Net 4.0.3, visual studio 2010, latest version of EntityFramework, MVC 4.0... All I need is somebody to say \"aha\" you need to go and do this....</p>\n\n<p>Currently if I delete 1000 records from one of my larger tables (134million rows) it takes nearly 10 minutes to savechanges. So from what I have read AutoDetectChangesEnabled is what I need to alter but it doesnt exist in my classes? where is it what must I do to get it?</p>\n\n<p>Any help appreciated I am trying to solve this one quickly</p>\n\n<p>Regards Julian</p>\n"},{"tags":["asp.net-mvc","mini-profiler"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":449,"score":2,"question_id":8255325,"title":"Mini profiler not displaying ajax request information?","body":"<p>I'm using the mini-profiler on my asp.net MVC 3 application.  I've implemented the profiler using the mvc nuget package. Everything works ok for standard page requests i get profile information sql everything. </p>\n\n<p>However ajax requests don't seem to display initially.  Just to let me confirm the request are completed without error.  I've debugged this and they complete they also return http 200 responses in fiddler.  </p>\n\n<p>There is no request by the mini profiler that accompanies the ajax request.  When i then navigate to another page i.e. a standard page request all the ajax request that were made on the last page are now displayed.  </p>\n\n<p>This is my mini profiler configuration page in App_Start</p>\n\n<pre><code>public static class MiniProfilerPackage\n    {\n        public static void PreStart()\n        {\n            //Setup sql formatter\n            MiniProfiler.Settings.SqlFormatter = new OracleFormatter();\n\n            //Make sure the MiniProfiler handles BeginRequest and EndRequest\n            DynamicModuleUtility.RegisterModule(typeof(MiniProfilerStartupModule));\n\n            //Setup profiler for Controllers via a Global ActionFilter\n            GlobalFilters.Filters.Add(new ProfilingActionFilter());\n\n            //Settings            \n            MiniProfiler.Settings.PopupShowTimeWithChildren = true;\n            MiniProfiler.Settings.PopupShowTrivial = false;            \n\n            //Ignore glimpse details in miniprofiler\n            var ignored = MiniProfiler.Settings.IgnoredPaths.ToList();\n            ignored.Add(\"Glimpse.axd\");\n            MiniProfiler.Settings.IgnoredPaths = ignored.ToArray();\n        }\n\n        public static void PostStart()\n        {\n            // Intercept ViewEngines to profile all partial views and regular views.\n            // If you prefer to insert your profiling blocks manually you can comment this out\n            var copy = ViewEngines.Engines.ToList();\n            ViewEngines.Engines.Clear();\n            foreach (var item in copy)\n            {\n                ViewEngines.Engines.Add(new ProfilingViewEngine(item));\n            }\n        }\n    }\n\n    public class MiniProfilerStartupModule : IHttpModule\n    {\n        public void Init(HttpApplication context)\n        {\n            context.BeginRequest += (sender, e) =&gt;\n            {\n                var request = ((HttpApplication)sender).Request;\n\n                MiniProfiler.Start();\n            };\n\n            //Profiling abadened if user is not in the admin role\n            context.PostAuthorizeRequest += (sender, e) =&gt;\n            {\n                if (!context.User.IsInRole(\"Admin\"))\n                    MiniProfiler.Stop(discardResults: true);\n            };\n\n            context.EndRequest += (sender, e) =&gt;\n            {\n                MiniProfiler.Stop();\n            };\n        }\n\n        public void Dispose() { }\n    }\n</code></pre>\n\n<p>Is there some configuration that is required or  potential issues I should be aware of? </p>\n"},{"tags":["c#","jquery","asp.net-mvc","jqgrid"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13107750,"title":"How to fill document header from jqgrid data","body":"<p>ASP .NET MVC2 page contains order header data (order number, customer, order data etc):</p>\n\n<pre><code>&lt;form id='_form' class='form-fields' action='' onsubmit='SaveDocument();return false;'&gt;\n&lt;input id='Number' name='Number' /&gt;\n\n&lt;select id='PaymentTerm' name='PaymentTerm'&gt;\n&lt;option value=''&gt;&lt;/option&gt;&lt;option value='0'&gt;Cash&lt;/option&gt;\n&lt;option value='10'&gt;10 days&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>and order rows presented in jqgrid.</p>\n\n<p>I'm looking for a way to fill order headcer data from json date from controller like\nlike jqgrid fills data.\nTo minimize request maybe it is best to return header data in jqgrid data request.\nFor this additional parameter documentId is passed to controller.</p>\n\n<p>GetData returns document header as name value pairs in document object.\nHow to assign those values to form elements in browser in jqgrid loadcomplete or other place ?</p>\n\n<pre><code>public JsonResult GetData(int page, int rows, string filters,\n          int documentId )\n\n{\n    var query = ...;\n    var totalRecords = query.Count();\n\n    var documentHeader = new FormCollection();\n    // In production code those values are read from database:\n    documentHeader.Add(\"Number\", 123);  // form contains input type='text' name='Number' element\n    documentHeader.Add(\"PaymentTerm\", \"10\"); // form contains select name='PaymentTerm' element\n    ...\n\n    return Json(new {\n        total = page+1,\n        page=page,\n        document = documentHeader,\n        rows = (from item in query\n                select {\n                    id = item.Id.ToString(),\n                    cell = new[] {\n                        item.ProductCode,\n                        item.ProductName,\n                        item.Quantity,\n                        item.Price\n                    }\n                 }).ToList()\n    },\n    JsonRequestBehavior.AllowGet);\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1319,"score":1,"question_id":4869583,"title":"ASP.NET MVC Form loaded via ajax submits multiple times","body":"<p>I have a partial view containing an ajax form. This partial view is loaded onto my page via an ajax call. I can edit the fields and submit the form and everything works normally. However, if I reload the form N times, the form will submit N times when the save button is clicked.</p>\n\n<p>here is the code for the partial view....</p>\n\n<pre><code>@model blah blah...\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.4.4.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery-ui.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.min.js\")\"type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\"type=\"text/javascript\"&gt;&lt;/script&gt;\n\n&lt;div id=\"modalForm\"&gt;\n  @using (Ajax.BeginForm(\"Edit\", \"Info\", new{id = Model.UserId}, AjaxOptions{OnSuccess = \"infoUpdate\" }))\n  {\n\n\n       //FORM FIELDS GO HERE\n\n      &lt;input type=\"submit\" value=\"Save\" /&gt;\n\n\n  }\n&lt;/div&gt;\n</code></pre>\n\n<p>What am I doing wrong that is causing this behavior?</p>\n"},{"tags":["c#","asp.net-mvc","module","content-management-system","reusable-code"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12935084,"title":"How to turn on/off code modules?","body":"<p>I am trying to run multiple sites using single code base and code base consist of the following module (i.e. classes)</p>\n\n<ul>\n<li>User module</li>\n<li>Q &amp; A module</li>\n<li>Faq module</li>\n</ul>\n\n<p>and each class works on MVC pattern i.e. it consist of </p>\n\n<ul>\n<li>Entity class</li>\n<li>Helper class (i.e. static class)</li>\n<li>View (i.e. pages and controls)</li>\n</ul>\n\n<p>and let say I have 2 sites <em>site1.com</em> and <em>site2.com</em>. And I am trying to achieve following functionality</p>\n\n<ul>\n<li>site1.com can have User, Q &amp; A and Faq module up and running</li>\n<li>site2.com can have User and Q &amp; A module live while Faq module is switched off but it can be turned-on if needed, so my query here is what is the best way to achieve such functionality</li>\n</ul>\n\n<p>do I introduce a flag bit that I check on every page and control belonging to that module? It's more like CMS where you can turn on/off different features. I am trying to get my head around it, please provide me with an example or point out if I am taking the wrong approach.</p>\n"},{"tags":["c#",".net","asp.net-mvc","quartz.net",".net-remoting"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":626,"score":3,"question_id":11262041,"title":"MVC3 webapp task scheduling with Quartz.NET","body":"<p>I need your advice for scheduling tasks in the MVC3 Webapp. </p>\n\n<p>My task is to create some generic scheduler for different services in the webapp that can be used later in development. For example we have some available tasks that user can schedule whenever he wants.</p>\n\n<p>I didn't want to reinvent the wheel and found the Quartz.Net library that can be used to create the scheduler.</p>\n\n<p>I know that it's not a good idea to host scheduling inside webapp cause webserver can recycle the application pools, etc, so i decided to use it inside a Windows Service and then using Quartz.NET remoting feature to trigger tasks inside my webapp.</p>\n\n<p>But i've found some issues with that. Correct me if I'm wrong, but when i tried to use the Quartz.NET remoting it runs the job inside the Windows Service process, it means that it needs to know about all types inside my webapp, so all the assemblies of the webapp should be referenced by it, and i need to have another config file for database, etc. So in case I write new job class, i can't easily schedule it, i need to stop the service and renew the library for it, so it's not very generic approach.</p>\n\n<p>I can't find any info that Quartz.NET can run jobs only based on it's interface.</p>\n\n<p>So I came up with idea to write my own scheduler that will be hosted in the Windows Service, and will have some IJob interface that will be implemented in the webapp. I will also use .Net remoting using IPC channel. \nSo the webapp will be like .Net Remoting Server, and when i want to add some new job and then schedule it, i will just have to write new job that implements IJob interface. \nI will register it as </p>\n\n<pre><code>        IpcChannel channel = new IpcChannel(\"CurrentIPC\");\n\n        ChannelServices.RegisterChannel(channel);\n\n        RemotingConfiguration.RegisterWellKnownServiceType(\n            typeof(SimpleJob), \"SimpleJob\", WellKnownObjectMode.SingleCall);\n        RemotingConfiguration.RegisterWellKnownServiceType(\n            typeof(ComplexObject), \"ComplexObject\", WellKnownObjectMode.SingleCall);\n</code></pre>\n\n<p>in this case i will have two Job types registered. Then when scheduling the job i will pass the name of the class and on the Windows Service side that will stand for client (executing objects on the webapp side) i will just bind the passed name of the class with IJob like this:</p>\n\n<pre><code>Dictionary&lt;string, IJob&gt; jobs = new Dictionary&lt;string, IJob&gt;();\n    void AddJob(string name)\n    {\n        IJob obj = (IJob)Activator.GetObject(typeof(IJob), string.Format(\"ipc://CurrentIPC/{0}\", name));\n        jobs.Add(name, obj);\n    }\n</code></pre>\n\n<p>So now i don't need to bother about references to my app and other stuff, the scheduler will do it's job without knowing anything, just IJob interface and executing tasks on the webapp side.</p>\n\n<p>If i'm wrong or it's too complex and there are some other simpler methods of doing this, or there are some pitfalls that i'm not aware of, can you help me with that?\nThank you.</p>\n\n<p>P.S. \nAlso there was an idea to have separate scheduler that will run the web app methods directly by executing a link to specified service in the web app, for example \"http://localhost:3030/Request/12\" and that's all, but in my web app you should be authorized to execute such request and again we have issues we need to resolve, and we will have additional load to the webserver with such requests in case of thousands of scheduled tasks.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13106354,"title":"How to serialize each item in IEnumerable for ajax post","body":"<p>I have a PartialView that displays <code>IEnumerable&lt;Movie&gt;</code>.</p>\n\n<p><strong>_MoviePartial.cshtml</strong></p>\n\n<pre><code>@foreach(var movie in Model) {\n    &lt;div class=\"content\"&gt;\n        &lt;span class=\"image\"&gt;&lt;img src=\"@movie.Posters.Profile\" alt=\"@movie.Title\"/&gt;&lt;/span&gt;\n        &lt;span class=\"title\"&gt;@movie.Title&lt;/span&gt;\n        &lt;div class=\"score`\"&gt;\n            &lt;span class=\"critics-score\"&gt;@movie.Ratings.CriticsScore&lt;/span&gt;\n            &lt;span class=\"audience-score\"&gt;@movie.Ratings.AudienceScore&lt;/span&gt;\n        &lt;/div&gt;\n        @Html.ActionLink(\"Add Movie\", \"Add\", \"MyMovies\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>When the user clicks the \"Add Movie\" ActionLink I am going to do an ajax post to add the selected movie to the users collection. My problem is that I would like to send the entire selected <code>Movie</code> class to the \"Add\" action but not sure how to serialize each movie since the entire <code>Movie</code> class is not rendered in the PartialView, just a few properties. I know I can serialize something like this...</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    var obj = @Html.Raw(Json.Encode(movie));\n&lt;/script&gt;\n</code></pre>\n\n<p>But I'm not sure how that would work inside a foreach loop that renders html, especially inside a <code>PartialView</code>.</p>\n\n<p>So, just to be clear, when a user clicks the \"Add Movie\" <code>ActionLink</code> I would like to send the serialized <code>Movie</code> class for that respective movie to my controller via ajax.    </p>\n\n<p>My questions is...</p>\n\n<p>Is there a better way to serialize each movie and append it to it's respective anchor? I know there's the <code>data-</code> html5 attribute but I thought they only allow string values, not json objects. I also know I could use jQuery's <code>.data()</code> function but I'm struggling to think through how to get that to run from a PartialView, especially since the html rendered by <code>_MoviePartial.cshtml</code> may be returned from a controller via ajax.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13106537,"title":"MVC3 : HTTPPOST Controller db.SaveChanges() Fails with \"Invalid Column Name..\"","body":"<p>I have a create view for invoices that is failing on db.SaveChanges() on the HTTPPOST.  The exception message is {\"Invalid column name 'UserDetail_UserId'.\"}.  In the POST controller it looks like the invoiceitem object I'm trying to add to my InvoiceItems table is populated correctly with the selected username from a dropdownlistfor that gets populated by usernames from my UserDetails table.  \"UserId\" is the key column in the UserDetails table, but it's not used in the dropdownlist so I'm unclear why any data is trying to be saved to a \"UserDetail_UserId\" column.  My code below:</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>public class InvoiceItem\n{\n    //Identity Column\n    public int ServiceID { get; set; }\n\n    [Key]\n    public string ProfileUserName { get; set; }\n\n    public DateTime InvoiceDate { get; set; }\n    public string Address { get; set; }\n    public string Note { get; set; }\n    public decimal Price { get; set; }\n    public decimal SubTotal { get; set; }\n    public bool InvoicePaid { get; set; }\n}\n\npublic class UserDetail\n{\n    [Key]\n    public Guid UserId { get; set; }\n    public string ProfileUserName { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string FullName { get; set; }\n    public string Address { get; set; }\n    public string City { get; set; }\n    public string State { get; set; }\n    public string Zip { get; set; }\n    public string Phone { get; set; }\n    public DateTime DateUpdated { get; set; }\n    public virtual ICollection&lt;InvoiceItem&gt; InvoiceItems { get; set; }\n}\n\npublic class ProShotDB : DbContext\n{\n    public DbSet&lt;UserDetail&gt; UserDetails { get; set; }\n    public DbSet&lt;UserLinkToken&gt; UserLinkTokens { get; set; }\n    public DbSet&lt;InvoiceItem&gt; InvoiceItems { get; set; }\n}\n</code></pre>\n\n<p><strong>Controllers:</strong></p>\n\n<pre><code>public ActionResult Create()\n    {\n        ViewBag.ProfileUserNames = db.UserDetails.Select(\n        c =&gt; new\n        {\n            ProfileUserName = c.ProfileUserName,\n            NameAddress = c.FullName + \" - \" + c.Address\n        });\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Create(InvoiceItem invoiceitem)\n    {\n        decimal Tax = 1.066m;\n        if (ModelState.IsValid)\n        {\n            invoiceitem.InvoiceDate = DateTime.Now;\n            invoiceitem.SubTotal = invoiceitem.Price*Tax;\n            invoiceitem.InvoicePaid = false;\n\n            db.InvoiceItems.Add(invoiceitem);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");\n        }\n\n        ViewBag.ProfileUserNames = db.UserDetails.Select(\n        c =&gt; new\n        {\n            ProfileUserName = c.ProfileUserName,\n            NameAddress = c.FullName + \" - \" + c.Address\n        });\n        return View(invoiceitem);\n    }\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>@model Pro_Shot_Portal.Models.InvoiceItem\n\n@{\n    ViewBag.Title = \"Input Invoice\";\n}\n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n@using (Html.BeginForm()) {\n@Html.ValidationSummary(true)\n&lt;fieldset&gt;\n    &lt;legend&gt;Input Invoice:&lt;/legend&gt;\n\n    &lt;div class=\"alert alert-error\" style=\"width:250px;\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\"&gt;&lt;/button&gt;\n        &lt;strong&gt;Warning!&lt;/strong&gt; Assigning invoice to wrong user could cause major problems, please triple check before proceeding.\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.ProfileUserName, \"Attach invoice to user\")\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.DropDownListFor(model =&gt; model.ProfileUserName, new SelectList(ViewBag.ProfileUserNames, \"ProfileUserName\", \"NameAddress\"), \"-- Pick Client For Invoice --\")\n        @Html.ValidationMessageFor(model =&gt; model.ProfileUserName)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Address)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Address)\n        @Html.ValidationMessageFor(model =&gt; model.Address)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Note)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Note)\n        @Html.ValidationMessageFor(model =&gt; model.Note)\n    &lt;/div&gt;\n\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.Price)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.EditorFor(model =&gt; model.Price)\n        @Html.ValidationMessageFor(model =&gt; model.Price)\n    &lt;/div&gt;\n\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Create\" /&gt;\n    &lt;/p&gt;\n&lt;/fieldset&gt;\n}\n\n&lt;div&gt;\n    @Html.ActionLink(\"Cancel Invoice Creation\", \"Index\")\n&lt;/div&gt;\n</code></pre>\n\n<p>From what I can tell the invoiceitem model object properties are filled with the proper data, and the only database change I'm invoking with db.SaveChanges() is \"db.InvoiceItems.Add(invoiceitem);\".  Can anyone tell me where and why it's trying to access, write or update a column named \"UserDetails_UserId\".  Maybe I messed something up on the DropdownListFor since that's the only part interacting with the UserDetails table?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","bing-maps"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13106533,"title":"How can I display data in an infobox in bing maps pulling the data from a DB in asp.net?","body":"<p>I'm trying to pull data from a db including images and display it in an infobox in bing maps. Do I need to do a custom infobox? Thanks for everyone's help. I will be using asp.net MVC for this project. </p>\n"},{"tags":["asp.net-mvc","visual-studio",".net-3.5","url-rewriting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13090689,"title":"How to dynamically create and manage new controllers in ASP.NET MVC?","body":"<p>From a private area of my site developed in ASP.NET MVC  I want to create new pages (or more properly Controllers) with a URL segment like \"www.mysite.com/newpage/\" (and not \"www.mysite.com/mycontroller/newpage/\");</p>\n\n<p>I don't want create controllers at design/development time, I want be able to create controllers at runtime and store their names (the url segment) in a database, so when a page is requested, the application checks if it exists in the database and render the page (the view).</p>\n\n<p>Anyone knows an example on Internet that explain the best method to implement an option like that?</p>\n"},{"tags":["asp.net-mvc","telerik","window"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1406,"score":0,"question_id":4933501,"title":"ow to adjust the size of the telerik window dynamically?","body":"<p>I have little question about Telerik window.</p>\n\n<p>ow can i adjust the size of the window to content when window has already been shown?</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc","label"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3811,"score":1,"question_id":1104773,"title":"What is the ASP.NET MVC equivalent of displaying a Label conditionally?","body":"<p>I'm currently porting an ASP.NET WebForms application to ASP.NET MVC. </p>\n\n<p>In one of the pages there is an ASP.NET Label control which is displayed conditionally based on a variable in the codebehind. So, something to the effect of</p>\n\n<pre><code>&lt;asp:Label runat=\"server\" Visible=\"&lt;%# ShowLabel%&gt;\"&gt;\n...\n&lt;/asp:Label&gt;\n</code></pre>\n\n<p>Where ShowLabel is a Boolean value in the codebehind. The contents of the label are generated at runtime and will be different pretty much every time.</p>\n\n<p>There's better ways to do this even in ASP.NET, but what would be the best way to do this in ASP.NET MVC? How are you even supposed to render dynamic text in ASP.NET MVC in a way similar to how the ASP.NET Label object worked?</p>\n"},{"tags":["asp.net","asp.net-mvc","deployment","composite-c1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13104254,"title":"Is it possible to publish a website as a subsite to azure using Asp.Net MVC 4","body":"<p>Is it possible publish a mvc website as a subsite to an exisiting site on azure?</p>\n\n<p>Im running a CMS (Composite C1) that is published to azure and i wonder if I can publish a MVC project to the same webrole/instance such www.mysite.com is the cms system and then my mvc project is running as www.mysite.com/myproject/ or myproject.mysite.com ?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2261,"score":3,"question_id":3166579,"title":"ModelState.IsValid does not exclude required property","body":"<p>Im trying to exclude a required property(Password) so the modelstate dont validate that property, but for some reason it still validate even when i try to exclude it.</p>\n\n<p>Controller:</p>\n\n<pre><code>    [Authorize, AcceptVerbs(HttpVerbs.Post)]\n    public ActionResult _Edit(int id, [Bind(Exclude = \"Password\")]FormCollection collection)\n    {\n        var user = Proxy.GetUser(id);\n\n        TryUpdateModel(user, null, null, new[]{\"Password\"});\n\n        if(!ModelState.IsValid)\n            return PartialView(user);\n\n        Proxy.UpdateUser(user);\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>   ...\n   &lt;tr&gt;\n       &lt;td class=\"label\"&gt;\n           &lt;label class=\"row_description\" for=\"Password\"&gt;&lt;%= S._(\"Password\")%&gt;&lt;/label&gt;\n       &lt;/td&gt;\n       &lt;td&gt;\n           &lt;%= Html.Password(\"Password\", null, new { @class = \"row_input\" })%&gt;\n           &lt;%= Html.ValidationMessage(\"Password\", \"*\")%&gt;\n       &lt;/td&gt;\n   &lt;/tr&gt;\n</code></pre>\n\n<p>User(using dataannotation):</p>\n\n<pre><code>[Required]\npublic string Password { get; set; }\n</code></pre>\n\n<p>Im using VS2008, MVC2, firefox</p>\n\n<p>Maybe im just tired and can't see it. Any help is appreciated</p>\n"},{"tags":["asp.net-mvc","n-tier-architecture"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13105354,"title":"ASP.NET MVC map Model to BLL","body":"<p>I have a project for my MVC4 site, one for my BLL and one for my DLL.  </p>\n\n<p>In my MVC4 site, should I simply, inside my controllers, new up BLL objects and map them to Model objects?  I want the BLL classes and Model classes to remain separate, but I am not sure if I should just map them over or if there is another, better way.</p>\n\n<p>I want whatever way I relate the Model classes to their BLL classes to be really simple, however.</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","partial-views","login-control"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1858,"score":0,"question_id":8768474,"title":"MVC3 Partial view inside Master Page","body":"<p>On my site, I want to display a Login box on all pages. So I wanted to make a partial view page, which I use on my _Layout.cshtml file in Shared.</p>\n\n<p>But where would the controller for this partial view go? And how would my Login button have access to it?</p>\n\n<p>So, when the Request.IsAuthenticated is true, the login box shows 'Logged in as ...', but when the result is false, I get a little table with the usual Username/Password form.</p>\n\n<p>Edit: After trying some answers below, I seem to be stuck in an endless lopp on the GET method below. It it because my partial view is trying to load me _Layout.cshtml file, as it want to accosiate the 'masterpage' with the partial view? And because my partial view is being rendered in _Layout.cshtml, it's lopping?</p>\n\n<pre><code>public class LoginController : Controller\n{\n    //\n    // GET: /Login/\n\n    public ActionResult Index()\n    {\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult Index(LoginModel loginModel)\n    {\n        if(ModelState.IsValid)\n        {\n            var g = new GallaryImage();\n            var user = g.LoginUser(loginModel.Username, loginModel.Password);\n            if(user != null) \n            {\n                FormsAuthentication.SetAuthCookie(user.username, false);\n                return RedirectToAction(\"index\", \"Home\");\n            }\n            ModelState.AddModelError(\"\", \"Invalid Username/Password\");\n        }\n        return View();\n    }\n</code></pre>\n\n<p>In my _Layout.cshtml, I am trying to load the partial view like this:</p>\n\n<pre><code>&lt;div style=\"text-align: right\"&gt;\n      @Html.Action(\"Index\", \"Login\")\n&lt;/div&gt;\n</code></pre>\n\n<p>See the issue?</p>\n"},{"tags":["asp.net","asp.net-mvc","multithreading"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2253,"score":4,"question_id":3794741,"title":"ASP.NET MVC Multithreading","body":"<p>I want to implement such logic in my asp-net-mvc application:</p>\n\n<p><code>user clicks a button</code> -></p>\n\n<p><code>server executes some time-consuming logic in ~15 threads (i get data from really slow independent sources)</code> -></p>\n\n<pre><code>when all work is done, server merges the results and passes it back to user\n</code></pre>\n\n<p>The other day i've seen an article which explained why creating new Threads in asp-net application is highly not recommended, and ThreadPool is the one that should be used. \nWhat are best practices for mvc in this case? Why shouldnt i create my threads, backgroundworkers, tasks, whatever by myself and use threadpool? The Application will be hosted on a public server, if it matters.</p>\n\n<p>Thanks, Ilya.</p>\n"},{"tags":["asp.net-mvc","validation","jquery-ui","dialog"],"answer_count":4,"favorite_count":8,"up_vote_count":6,"down_vote_count":0,"view_count":6956,"score":6,"question_id":4910668,"title":"asp.net mvc3 jquery ui dialog and client validation","body":"<p>I have problem with client validation in asp.net mvc3 application.</p>\n\n<p>My code looks :</p>\n\n<pre><code>function loadEditCategoryDialog(categoryId) {\n    $.ajax({\n        url : \"/rovastamp3/Admin/CategoryEditDialog\",\n        data : \"categoryId=\"+categoryId,\n        success : function(data){\n            $(\"#popup_dialog\").html(data);\n            $(\"#popup_dialog\").dialog({        \n                modal: true,\n                draggable: false,\n                resizable: false,\n                title: \"Upravit kategorii\",\n                width: 600,\n                height: 500,\n            });                             \n        }\n    });\n }\n</code></pre>\n\n<p>Controller : </p>\n\n<pre><code>[HttpGet]\npublic ActionResult CategoryEditDialog(int categoryId)\n{\n    CategoryEditViewModel categoryEditViewModel = new CategoryEditViewModel();\n    categoryEditViewModel.Category = _postAuctionCategoryRepo.Query()\n        .SingleOrDefault(x =&gt; x.Id == categoryId);\n\n    return PartialView(categoryEditViewModel);\n}\n\n[HttpPost]\npublic ActionResult CreateNewCategory(CategoryEditViewModel categoryEditViewModel)\n{\n    if (ModelState.IsValid)\n    {\n        return RedirectToAction(\"Index\");\n    }\n    return View(\"CategoryEditDialog\", categoryEditViewModel);\n}\n</code></pre>\n\n<p>And finally my partial view : </p>\n\n<pre><code>@model Rovastamp.MVC3.ViewModels.AdminController.CategoryEditViewModel\n&lt;h2&gt;Upravit kategorii @Model.Category.Name&lt;/h2&gt;\n@{Html.EnableClientValidation();}\n@using (Html.BeginForm(\"CreateNewCategory\", \"Admin\"))\n{ \n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Objednvkov formul&lt;/legend&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Category.Name) \n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.Category.Name) \n            @Html.ValidationMessageFor(model =&gt; model.Category.Name) \n        &lt;/div&gt;\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Category.Position) \n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.Category.Position) \n            @Html.ValidationMessageFor(model =&gt; model.Category.Position) \n        &lt;/div&gt;\n\n        &lt;input  type=\"submit\" value=\"Upravit\" class=\"submit_button\" /&gt;               \n    &lt;/fieldset&gt;\n}\n</code></pre>\n\n<p>In my web.config I turned on UnobtrusiveJavaScript and ClientValidatin app settings.</p>\n\n<p>If I clik on submit button on jquery ui dialog, mvc does full refresh without client validation?</p>\n\n<p>Where is the problem?</p>\n\n<p>Thanks for any help</p>\n\n<p>EDIT : </p>\n\n<p>In my Layout page i include this scripts :</p>\n\n<ul>\n<li>jquery.unobtrusive-ajax.js</li>\n<li>jquery.validate.js</li>\n<li>jquery.validate.unobtrusive.js</li>\n</ul>\n\n<p>EDIT 2</p>\n\n<p>In my exemaple i put :</p>\n\n<pre><code>jQuery.validator.unobtrusive.parse('#popup_dialog');\n</code></pre>\n\n<p>before i call jquery ui dialog and client validation works perfectly.</p>\n"},{"tags":["javascript","asp.net-mvc","iis7"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":10290,"score":4,"question_id":342364,"title":"Relative Image URL in Javascript File - ASP.net MVC and IIS 7","body":"<p>I am developing an Asp.net mvc application, everything works fine in ASP.net development server but when I am trying to host it on IIS 7. I am getting problem related to URL resolution. I have used relative paths in Javascript to give the image. The script file is in ~/Scripts/ folder and image files are in ~/Content/images/ folder. Now in the javascript file I am trying to use the give by giving the relative path like\nhttp://localhost/WebApp1/controller1/action1/\nit tries to find it at <a href=\"http://localhost/controller1/action1/\" rel=\"nofollow\">http://localhost/controller1/action1/</a> and couldn;t find the file.</p>\n"},{"tags":["asp.net-mvc","character-encoding"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":273,"score":3,"question_id":9482691,"title":"Receive POST data in non-UTF-8 encoding (ASP.NET MVC)","body":"<p>my ASP.NET MVC Application is UTF-8, but I receive POST request in Encoding.Default from third-party app out of my control.</p>\n\n<p>What is sanest and simplest way to change request encoding for <strong>only one action of one controller</strong>? (Rest of my application should remain UTF-8).</p>\n\n<pre><code>public class Message\n{\n public int id { get; set; }\n public string phone { get; set; }\n public string mes { get; set; }\n public string to { get; set; }\n}\n\n[HttpPost]\npublic ActionResult Receive(Message msg)\n{\n        AddIncomingMessage(msg);\n        return new EmptyResult();\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13102729,"title":"Change only some of the values of the current route","body":"<p>My search page has a lot of parameters and in this page I have some filters for the current search.<br />\nI just want to change some of the values in my route.</p>\n\n<p>An example:</p>\n\n<pre><code>http://www.example.com/{controller}/{action}/{brand}/{model}/{color}/{price}\n</code></pre>\n\n<p>In my search page I have a form where I can change the color and the price:</p>\n\n<p>HTML:</p>\n\n<pre><code>@using (Html.BeginForm(\"action\", \"controller\", FormMethod.Post))\n{\n    @Html.DropDownListFor(m =&gt; m.Color, Model.Colors)\n    @Html.DropDownListFor(m =&gt; m.Price, Model.Prices)\n    &lt;input type=\"submit\" value=\"Search\" /&gt;\n\n}\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Action(SearchModel search)\n{\n    //I can get the Price and Color\n    string color = search.Color;\n    string price = search.Price;\n\n    //Now I want to get the values of brand and model\n\n    return RedirectToRoute(\"Action\",new\n    {\n         controller = \"Controller\",\n         action = \"Action\",\n         color = color,\n         price = price,\n         brand = ????,\n         model = ????\n    });\n\n}\n</code></pre>\n\n<p>My search has a lot more parameters than this... I don't want to put them in hidden fields and send them with the model :\\</p>\n\n<p>Thanks</p>\n"},{"tags":["c#","asp.net-mvc","razor","displayattribute"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":96,"score":4,"question_id":13099834,"title":"How to get the Display Name Attribute of an Enum member via MVC razor code?","body":"<p>Well as you will see I'm new to C# and MVC 4 (Why am I on this project?).</p>\n\n<p>I've got a property in my model called \"Promotion\" that its type is a flag enum called \"UserPromotion\". Members of my enum have display attributes set as follows:</p>\n\n<pre><code>[Flags]\npublic enum UserPromotion\n{\n    None = 0x0,\n\n    [Display(Name = \"Send Job Offers By Mail\")]\n    SendJobOffersByMail = 0x1,\n\n    [Display(Name = \"Send Job Offers By Sms\")]\n    SendJobOffersBySms = 0x2,\n\n    [Display(Name = \"Send Other Stuff By Sms\")]\n    SendPromotionalBySms = 0x4,\n\n    [Display(Name = \"Send Other Stuff By Mail\")]\n    SendPromotionalByMail = 0x8\n}\n</code></pre>\n\n<p>Now I want to be able to create say a ul in my view to show the selected values of my \"Promotion\" property. This is what I have done so far but the problem is that how can I get the display names here?</p>\n\n<pre><code>&lt;ul&gt;\n    @foreach (int aPromotion in @Enum.GetValues(typeof(UserPromotion)))\n    {\n        var currentPromotion = (int)Model.JobSeeker.Promotion;\n        if ((currentPromotion &amp; aPromotion) == aPromotion)\n        {\n        &lt;li&gt;Here I don't know how to get the display attribute of \"currentPromotion\".&lt;/li&gt;\n        }\n    }\n&lt;/ul&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","master-detail"],"answer_count":2,"favorite_count":25,"up_vote_count":20,"down_vote_count":0,"view_count":6741,"score":20,"question_id":711184,"title":"ASP.NET MVC example of editing multiple child records","body":"<p>Does anyone know of any examples or tutorials of an MVC view that shows parent/child data all on one form, and allows all the child records to be editable?</p>\n\n<p>For example, say I have a table of people and another containing the vehicles they own. One one form, I want to show every vehicle for a given person, and make the data elements editable (i.e. license plate number, car color, etc.) in case there are mistakes. I don't want to jump to a separate edit form for each vehicle.</p>\n\n<p>My attempts thus far have gotten me to the point where I can display the data, but I can't get it to post back to the controller. I've tried to narrow down the problem as far as I could <a href=\"http://stackoverflow.com/questions/709933/child-records-not-posting-on-asp-net-mvc-form\">here</a>, but I'm still not getting it, and I think a broader example may be in order. Any ideas?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":341,"score":0,"question_id":3255238,"title":"Multiple file uploads asp.net mvc","body":"<p>I am facing one serious problem</p>\n\n<p>Technology: Asp.net mvc</p>\n\n<p>I am trying to upload multiple files from the dynamically created file upload control from\njavascript.(Attach more file Options).My files are not getting posted to the mvc controller action.i have specified the propert <code>new { enctype = \"multipart/form-data\" }</code> in my form\nstill the file is not getting posted.</p>\n\n<p>NB:</p>\n\n<p>1)The file from the first file upload control(which is shown on the first page load is getting posted but the rest which is added using attach more file option is not getting posted)</p>\n\n<p>Many Thanks in advance.</p>\n"},{"tags":["asp.net-mvc","html-helper"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":1403,"score":9,"question_id":5283518,"title":"MVC Html.BeginForm using Areas","body":"<p>I'm using MVC areas and on a view that's in an area called \"Test\" I would like to have a form that posts to the following method:</p>\n\n<pre><code>area: Security\ncontroller: AccountController\nmethod: logon\n</code></pre>\n\n<p>How can I make this happen with Html.BeginForm? Can it be done?</p>\n"},{"tags":["asp.net-mvc","razor","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":13102545,"title":"MVC 4.0 Show simple grid","body":"<p>I'm new to mvc, and i'm now trying to show a simple gridview which will be loaded from my sql server.\nI can't even find the gridview in the toolbox.</p>\n\n<p>i'm using the razor view engine.\nexample will be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13097824,"title":"Multi Post for Action with return File in ASP.NET MVC","body":"<p>Assume this code in One of my <code>Action</code>s</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Generate (Params){\n\n....\n\nInsertOneRawToDB();\nreturn RedirectToAction(\"Index\", new { info = info });\n\n}\n</code></pre>\n\n<p>So every thing is OK yet but when  I change <code>return</code> to:</p>\n\n<pre><code>InsertOneRawToDB();\nbyte[] myfile = GenerateAZipFile();\nreturn File( myfile , \"application/zip\" , \"MyFileName\");\n</code></pre>\n\n<p>In this case I see a weird behavior: before return, One raw inserted to DB, and after return another raw inserted, it seems the <code>InsertOneRawToDB</code> called again.</p>\n\n<p>Does any one know about this? what happening here? </p>\n\n<p>PS: I use Visual Studio 2012 RTM + ASP.NET MVC4 </p>\n\n<p>PS: OK I Use IDM (Internet Download Manager) to download zip file and that cause MultiPost on this <code>Action</code> So How can I handle this?</p>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13100044,"title":"jQuery plugin for playing video files of different extension","body":"<p>I want to know a plugin which can be used for playing video files of different extensions. Here I am passing a video file path from the database. I was confused and never used this..</p>\n\n<p>Already I tried <code>&lt;embed&gt;</code> but it does not work for me.</p>\n\n<pre><code>&lt;embed id=\"ShowVideo\" allowscriptaccess=\"always\"\n    autostart=\"false\" src=\"@viewVideo\" controller=\"true\" \n    allowfullscreen=\"true\" width=\"280\" wmode=\"transparent\" height=\"200\"&gt;\n&lt;/embed&gt;\n</code></pre>\n\n<p>thanks in advance</p>\n"},{"tags":["asp.net-mvc","image-upload"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13102797,"title":"Upload and store many images a to database and create thumbnails at once using ASP.Net MVC","body":"<p>How can I upload many images at once (by open dialog and shift/ctrl) and store them to sql server database (create a record for each image) and then create thumbnails with ASP.Net MVC ?</p>\n\n<p>How view and controller should be?? Thanks alot.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13102128,"title":"Passing data between Views and Controller","body":"<p>Wanted to see if somebody can provide some suggestions/pointers on how to address this issue I am currently facing\n.\nScenario is like</p>\n\n<ol>\n<li>I have a Page say A where search is performed and data is displayed.</li>\n<li>On Page A there is an ActionLink which passes an ID of the selected record to the page B. </li>\n<li><p>Before redirecting to page B, I need to store/preserve form data of Page A (I do not want to use session or hidden filed as data is critical).</p></li>\n<li><p>Once user is done working on Page B, I need to save changes on Page B and redirect back to Page A.</p></li>\n<li>Here Page A should make a Post request based on preserver form data in step 3. Purpose is to display back searched data that was there before redirecting to Page B.</li>\n</ol>\n\n<p>Something like..</p>\n\n<pre><code>View A\n    // Search textboxes here\n    // Search data list here with ActionLink column\n\nView B\n   // more controls here\n   // Submit button - saves changes on this page. \n   // after submit button processing need to go back to View A \n   // and display the same Search data List based on Seach textboxes values \n   // those were entered by user before coming to this View B. \n   // Ques: Not sure how to persist data from View A between calls to View B and then View B to View A.\n</code></pre>\n\n<p>Does anybody has any better approach to achieve this?</p>\n\n<p>For now the solution I have is...</p>\n\n<ol>\n<li>Make an ajax POST request on ActionLink click and save the\nformcollection in cache using controller.</li>\n<li>Make default ActionLink GET request passing ID and in controller\nreturn View B.</li>\n<li>On View B, on submit do ajax POST request to save data on Page B and\nreturn data from cache in ajax success function.</li>\n<li>Make another ajax POST request using data retruned in above ajax\nsuccess to display View A.</li>\n</ol>\n\n<p>Thanks in advance</p>\n"},{"tags":["asp.net-mvc","ajax","file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":967,"score":0,"question_id":3497751,"title":"Using ASP.NET MVC & AJAX to do a file upload and preview image","body":"<p>I am doing what would take me less that 2 hours to do in old ASP.Net Web Forms but has left me stumped in how to implement in ASP.Net MVC.</p>\n\n<p>I am trying to put together a really basic admin site about musicians. a musician has an associated picture of themselves, then some details like name, age, home town alongside the profile picture.</p>\n\n<p>When an admin user creates a musician, the create view has a file upload, and onchange of the file upload, a preview image should appear. The create page also has the form fields for the other inputs.</p>\n\n<p>In the details view, the musician's profile picture should appear alongside the details.</p>\n\n<p>When in edit mode, again, the existing image should appear, and if the user chooses to change the picture, the picture again will change there on the spot, without reloading the page.</p>\n\n<p>This seems incredibly easy, but I am really struggling to see how the ASP.Net MVC architecture makes this possible without a great deal of work.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":7,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":1047,"score":7,"question_id":5109983,"title":"Why don't my Html Helpers have intellisense?","body":"<p>I can't get intellisense for my own html helpers. My <code>CustomHtmlHelpers.cs</code> looks like this:</p>\n\n<pre><code>using System.Web.Mvc;\nusing System.Text;\nusing System.Web;\n\n    namespace laget.Web.Helpers\n    {\n        public static class CustomHtmlHelpers\n        {\n            //MY HELPERS\n        }\n    }\n</code></pre>\n\n<p>and in my Web.config:</p>\n\n<pre><code>    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"laget.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\"/&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n</code></pre>\n\n<p>If I put <code>&lt;@using laget.Web.Helpers&gt;</code> in my view, I get the intellisense issue fixed.</p>\n\n<p>Should it not be enough with the code in Web.config?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","telerik","telerik-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1582,"score":1,"question_id":8952263,"title":"Telerik MVC extensions date picker not putting date in textbox","body":"<p>I am using <code>ASP.NET MVC 3</code> with <code>razor</code> and the latest version of the <code>Telerik MVC extensions</code> controls.</p>\n\n<p>I have a date picker on my view:</p>\n\n<pre><code>&lt;td&gt;&lt;label&gt;From:&lt;/label&gt;&lt;/td&gt;\n&lt;td&gt;\n     @(Html.Telerik()\n          .DatePickerFor(x =&gt; x.HospitalisedStartDate)\n          .Name(\"HospitalisedStartDate\")\n     )\n&lt;/td&gt;\n</code></pre>\n\n<p>This property in my view model:</p>\n\n<pre><code>public DateTime? HospitalisedStartDate { get; set; }\n</code></pre>\n\n<p>When the view loads, I would click on the calendar icon.  The calendar pops up, I would select a date and then nothing happens.  The calendar disappears but the date is not set the textbox.  Why would this be?  If I were to type in the word \"today\" in the textbox then it will put in todays date like \"2012/01/21\".  What am I missing here that is preventing it from working?</p>\n\n<p>The markup looks like this for the style sheets and JavaScript:</p>\n\n<pre><code>&lt;link type=\"text/css\" href=\"/Content/2011.3.1115/telerik.common.min.css\" rel=\"stylesheet\"/&gt;\n&lt;link type=\"text/css\" href=\"/Content/2011.3.1115/telerik.webblue.min.css\" rel=\"stylesheet\"/&gt;\n&lt;link type=\"text/css\" href=\"/Content/Stylesheets/mystylesheet.css\" rel=\"stylesheet\"/&gt;\n\n&lt;script src=\"/Scripts/jquery-1.7.1.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.common.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.tabstrip.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.calendar.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.datepicker.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"/Scripts/2011.3.1115/telerik.treeview.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","linq","mvc","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13100062,"title":"LINQ Intersect Query for Many to Many relationship using .NET4 MVC4 Code First","body":"<p>In .NET4 MVC 4 using Code First I have two classes that form a many to many relationship.\nHow can I write a simple LINQ query to find all Games that have at least one or more genres from a given list of genres? (i.e. Retreive all games that are of the Strategy and/or Sandbox genre)</p>\n\n<pre><code>public class Game\n{\n    public int ID { get; set; }\n    public virtual ICollection&lt;Genre&gt; Genres { get; set; }\n}\n\npublic class Genre\n{\n    public int ID { get; set; }\n    public virtual ICollection&lt;Game&gt; Games { get; set; }\n}\n</code></pre>\n\n<p>Please note that I am using Code First so I have no access to the abstracted join table GenreGames.</p>\n\n<p>I have tried the following to find a game that contains at least one genre ID from the array gid:</p>\n\n<pre><code>var gid = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\nvar result = from g in unitOfWork.GameRepository.dbSet\n             where (\n                 from gen in unitOfWork.GenreRepository.dbSet\n                 where gid.Contains(gen.ID)\n                 select gen.ID\n             ).Any()\n             select g;\n</code></pre>\n\n<p>When retrieving the results</p>\n\n<pre><code>List&lt;Game&gt; similiarGames = result.ToList&lt;Game&gt;();\n</code></pre>\n\n<p>the following error comes up. </p>\n\n<blockquote>\n  <p>Unable to create a constant value of type 'GratifyGaming.Domain.Models.Genre'. Only primitive types or enumeration types are supported in this context.</p>\n</blockquote>\n\n<p>How can I get the results I want using only primitive or enumeration types? Is there a workaround?</p>\n"},{"tags":["asp.net","asp.net-mvc","windows-authentication","ntlm"],"answer_count":6,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":3271,"score":14,"question_id":7387156,"title":"asp.net: unable to get windows authentication to work through local IIS","body":"<p>So I've created a new ASP.NET MVC project using the intranet template. web.config contains the appropriate values (e.g. <code>&lt;authentication mode=\"windows\"/&gt;</code>).</p>\n\n<p>If I fire up the web app using the VS webserver, it all looks fine - the page shows my Windows domain and username and all. However, this works in Opera and Safari as well as IE and FF, which says to me it's not using Windows auth at all (since to the best of my knowledge this doesn't work in any browser except IE/FF).</p>\n\n<p>Next step is to get it working through local IIS. I create a hosts file entry pointing www.mysite.mydomain to 127.0.0.1. So in IIS I create website with a binding to www.mysite.mydomain and enable Windows authentication and disable anonymous authentication.</p>\n\n<p>I have set up IE and FF to enable Windows auth as follows:</p>\n\n<p><strong>IE</strong></p>\n\n<ol>\n<li>Add URL to intranet group</li>\n<li>Ensure Windows auth is enabled in the advanced settings</li>\n</ol>\n\n<p><strong>FF</strong></p>\n\n<p>Put 'www.mysite.mydomain' into network.automatic-ntlm-auth.trusted-uris config setting.</p>\n\n<p>But when I dial up www.mysite.mydomain in IE / FF I get a login prompt. Interestingly, even when I type in my Windows login here, it still fails and shows me the login prompt again.</p>\n\n<p>We don't have active directory here but my understanding is that it should work fine with a local account.</p>\n\n<p>I can't think of anything else I need to do. Any suggestions?</p>\n\n<p>Edit: we've recently switched to using Active Directory and the problem remains.</p>\n\n<p>Edit: when I cancel the login prompt, I get taken to an 'IIS 7.5 Detailed Error' page with the following information:</p>\n\n<p><strong>HTTP Error 401.2 - Unauthorized\nYou are not authorized to view this page due to invalid authentication headers.</strong></p>\n"},{"tags":["c#","asp.net-mvc","dependency-injection","ninject"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":95,"score":5,"question_id":13008924,"title":"Injecting Current User with Ninject this way - any disadvantages?","body":"<p>I'm using this ninject bind:</p>\n\n<pre><code>kernel.Bind&lt;ICurrentUser&gt;().To&lt;CurrentUser&gt;()\n    .InRequestScope()\n    .WithConstructorArgument(\"principal\", \n        context =&gt; (RolePrincipal HttpContext.Current.User);\n</code></pre>\n\n<p>In one of my decorators of the service layer I simply add \"ICurrentUser currentUser\" to the constructor to get the object and its working.</p>\n\n<p>Are there any disadvantages by this implementation or is there a better way to implement his ambient context? For each request the user object is created - also if its an anonymous user.</p>\n"},{"tags":["asp.net-mvc","ef-code-first","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13099390,"title":"How to create custom class in ef codefirst model in asp.net web api","body":"<p>I am working on asp.net web api. I am using EF 4.1 code first model with existing database. I have a class like,</p>\n\n<pre><code>public class Tab1\n{\npublic int ID{get; set;}\npublic string FirstName{get; set;}\npublic string LastName{get; set;}\n}\n</code></pre>\n\n<p>and i have created dbcontext like,</p>\n\n<pre><code>public class EFBarContext:DbContext\n    {\n        public DbSet&lt;Tab1&gt; User{ get; set; }\n\n        protected override void OnModelCreating(DbModelBuilder modelBuilder)\n        {\n            modelBuilder.Conventions.Remove&lt;PluralizingTableNameConvention&gt;();\n            modelBuilder.Entity&lt;Tab1&gt;().ToTable(\"User\");\n        }\n    }\n</code></pre>\n\n<p>At first i need to get all records from table \"User\" and i need to calculate fullname based on firstname and lastname and i need to return the data json format like,</p>\n\n<pre><code>{\"ID\":212,\"firstname\":\"kio\",\"lastname\":\"nmk\",\"fullname\":\"kionmk\"}\n</code></pre>\n\n<p>for that i have created a custom class like,</p>\n\n<pre><code>public class Tab2:Tab1\n{\npublic fullname{get; set;}\n}\n</code></pre>\n\n<p>and i return the list with <code>List&lt;Tab2&gt;</code> But i am getting an error like  <strong><code>Schema specified is not valid error 0064: Facet 'MaxLength' must not be specified for type 'mediumtext'.</code></strong> \nI have followed the following post, <a href=\"http://stackoverflow.com/questions/8700497/class-inheritance-with-net-ef4-1-mysql\">Class Inheritance with .NET EF4.1 + MySQL</a> but i cant figure it out in my situation. so please guide me.</p>\n"},{"tags":["asp.net-mvc","entity-framework","web-applications","asp.net-mvc-4"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13099929,"title":"MCV4 And Enitiy Framework. Without been able to directly connect to the database","body":"<p>I have a very strange situation which I am currently faced with.  I have been passed a project to uplift a website to use MVC4 &amp; the enitiy framework.  However due to the way that the original implementation was undertaken the database access is not direct from the website it's handed to a separate middle-ware application which we pass the name of a sql transaction we would like to have executed &amp; the required parameters, this then returns us a datatable object.</p>\n\n<p>My Question is this Without having to remove this middle-ware process could I create a MVC4 App with the use of the enitiy framework? </p>\n"},{"tags":["c#","xml","asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13100713,"title":"Url.Content and reading ~ tilde in URL from xml file","body":"<p>I am using ASP.NET MVC 3 with .aspx view engine. \nI have Maps.xml file:</p>\n\n<pre><code>    &lt;imgurl&gt;\n        ../../Content/Img/BrandsLogo/samsung_logo.png\n    &lt;/imgurl&gt;\n&lt;/map&gt;\n</code></pre>\n\n<p>.</p>\n\n<p>In the MapView.aspx I have:</p>\n\n<pre><code>&lt;%: Url.Content( Model.ImgUrl ) %&gt; \n</code></pre>\n\n<p>This works well, the image is displayed as it should.</p>\n\n<p>The problem is:\nI want to use the tilde in the xml file: </p>\n\n<pre><code>    &lt;imgurl&gt;\n        ~/Content/Img/BrandsLogo/samsung_logo.png\n    &lt;/imgurl&gt;\n</code></pre>\n\n<p>But then the URL to the image is broken; somehow it adds Mobile/MapView in it. Which is the folder and .aspx file like this?</p>\n\n<p><strong>/Mobile/MapView/~/Content/Img/BrandsLogo/samsung_logo.png</strong></p>\n\n<p>When I use the ../../ in the xml file the URl is correct:\n<strong>/Content/Img/BrandsLogo/samsung_logo.png</strong></p>\n\n<p>I have tried the solution form:\n<a href=\"http://stackoverflow.com/questions/5331777/using-url-content-with-semi-relative-url\">Using Url.Content with semi-relative URL</a></p>\n\n<p>but then I get some extra spaces:\n<strong>/Content/Img/BrandsLogo%20%20%20%20%20%20%20%20%20%20%20%20/samsung_logo.png</strong></p>\n\n<p>How can I read tilde url <code>(~/Content/Img/BrandsLogo/samsung_logo.png)</code> from the xml file and use <code>Url.Content</code> method?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13100502,"title":"Route to user's page under the dynamic username path in MVC4","body":"<p>I have some dynamic user route like </p>\n\n<pre><code>   routes.MapRoute(\n            \"UserNames\", // Route name\n            \"{username}\", // URL with parameters\n            new { controller = \"Home\", action = \"UserName\" });\n</code></pre>\n\n<p>and under the <strong>HomeController.cs</strong></p>\n\n<pre><code>public ActionResult UserName(string username)\n        {\n            ViewBag.Message = username;\n\n           return RedirectToAction(\"Register\",\"Account\"); // Test...\n        }\n</code></pre>\n\n<p>It is working fine.</p>\n\n<p>But what I need is to get working the URL like</p>\n\n<pre><code>http:\\\\mywebsite.com\\UserNameBob\\MyGallery\\1\nhttp:\\\\mywebsite.com\\UserNameBob\\Profile\nhttp:\\\\mywebsite.com\\UserNameBob\\MyFriends\n</code></pre>\n\n<p>How do I can archive it?</p>\n\n<p>Any clu?</p>\n\n<p>Thank you!!!</p>\n"},{"tags":["asp.net-mvc","linq","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13100337,"title":"How to return only particular fields to list using LINQ lamda expressions","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8973529/retrieve-an-object-from-entityframework-without-one-field\">Retrieve an object from entityframework without ONE field</a>  </p>\n</blockquote>\n\n\n\n<p>I am working on asp.net mvc. currently i am using EF 4.1 code first model. Here i have list of records(43). My class is like,</p>\n\n<pre><code>public class MyTable\n{\npublic string field1{get; set;}\npublic string field2{get; set;}\n.\n.\n.\npublic string field20{get; set;}\n} \n</code></pre>\n\n<p>and i am returning them as a list like List. But i dont want the field20 to return. so how could i skip particular field in my list. I have used like,</p>\n\n<pre><code>(from m in context.MyTable select new{m.field1,m.field2,...,m.field19}).ToList(); \n</code></pre>\n\n<p>Its working very fine. but i want same result using lamda expression syntax like</p>\n\n<pre><code>context.MyTable.Skip() or any etc.\n</code></pre>\n\n<p>How to return only particular fields to list.please guide me.</p>\n"},{"tags":["jquery","html","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13099950,"title":"change label by radio selection","body":"<p>I have these HTML Snippet : </p>\n\n<pre><code>&lt;table class=\"form\" style=\"display: none\"&gt;\n    &lt;tr&gt;\n        &lt;td colspan=\"2\"&gt;\n            @Html.AntiForgeryToken()\n            @Html.ValidationSummary()\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            &lt;input type=\"radio\" value=\"hagh\" checked=\"checked\" name=\"reg\"&gt;&lt;/input&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"radio\" value=\"hogh\" name=\"reg\"&gt;&lt;/input&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;   \n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblregName\"&gt;&lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regname\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblregLsatNameEcoCode\"&gt; &lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regLsatNameEcoCode\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblregNatCodeRegNo\"&gt; &lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regNatCodeRegNo\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;label id=\"lblDepName\"&gt; &lt;/label&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regDepName\" disabled=\"disabled\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n             \n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regMobile\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n            \n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regCityCode\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n             \n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;input name=\"regPhoneNo\" type=\"text\" /&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;button class=\"orange\"&gt;\n                &lt;/button&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I want to change label caption when user change the radio selection. I was confused in how to get selected radio when user click them and how to change label text. Is it true to access label as $('#labelname').val(sometext)?</p>\n"},{"tags":["asp.net-mvc","checkbox"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1113,"score":0,"question_id":9644486,"title":"checkbox returning \"true,false\" from formcollection instead of selected value","body":"<p>im having multiple checkboxes  in my aspx page using HtmlHelper.CheckBox</p>\n\n<p>and when the form is submitted using ajax as below in js file \nvar input = $(':input'); </p>\n\n<pre><code>   $.ajax({\n    type: 'POST',\n    url: \"/Home/Post\",\n    data: input,\n    dataType: 'json',\n    success: function () {\n\n               },\n       });\n</code></pre>\n\n<p>and in the controller action method as shown below..</p>\n\n<pre><code> public ActionResult Post(FormCollection Form)\n        {\n\n}\n</code></pre>\n\n<p>and in the Form im not getting the updated values for checkboxes ie all the checkbox values were\nreturned as \"true,false\".\nif any of the checkbox is not checked or unchecked...Form is not returning as false it still returns as \"true,false\" instead of false.</p>\n\n<p>even i tried as </p>\n\n<pre><code>Form.Get(\"checkbox0\").ConvertTo(typeof(Boolean))\n\nRequest.Form[\"checkbox0\"]\n</code></pre>\n\n<p>the aboce code returns \"true,false\" but the checkbox0 is unchecked so it should return false which is not happening....???</p>\n\n<p>But when i tried using Html.BeginForm(\"Post\",\"Home\",FormMethod.Post,new {id=\"x\"}) in aspx file\nand removed ajax call in the js file... \nthen the formcollection in the controller start giving me the expected values for checkboxes...\n<strong>but as this approach flickers page after page submit...i need to use ajax approach only</strong>..</p>\n\n<p><strong>Please let me know how can i retrieve the updated value of the checkbox from the formcollection when using ajax</strong>.</p>\n"},{"tags":["c#","asp.net-mvc","linq","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13098262,"title":"Using Find() with inheritance in entity frameowrk","body":"<p>I am trying to find a User entity in my \"Domain Entity\" DB Set.\nThe User entity is derived from a base type called Domain Entity.</p>\n\n<p>I want to use the following to find a user according to his ID</p>\n\n<pre><code>User userToDelte = db.DomainEntities.OfType&lt;User&gt;().Find(UserID);\n</code></pre>\n\n<p>But I get a compiler error :</p>\n\n<blockquote>\n  <p>'System.Linq.IQueryable' does not\n  contain a definition for 'Find' and no extension method 'Find'\n  accepting a first argument of type...</p>\n</blockquote>\n\n<p>Why can't I use <code>Find()</code> after I have used <code>OfType&lt;User&gt;()</code> ?</p>\n\n<p>P.S\nIt is important for me to get a strongly typed User entity because it has a navigation propertiy that include all of it's details in a separate table called \"UserDetails\" along with the user name and password.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","html.dropdownlistfor","dropdownlistfor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":27,"score":-1,"question_id":13075484,"title":"In MVC3 I am trying to get my dropdownlistfor to have a Value of zero , instead of empty string for the starting \"Please Select ...\"","body":"<p>How can I get the first Option Value to be zero instead of an empty string. So when the user\ngoest to the form and doesnt select anything a Value would be passed like zero. I am new to MVC and have spent time trying to find an easy answer. Can this be done in Jquery? Any suggestions would be much appreciated.</p>\n\n<p>HERES my VIEW </p>\n\n<pre><code>@Html.DropDownListFor(x =&gt; x.ItemCatId,\n new SelectList(Model.CategoryddList, \"Value\", \"Text\"),\n \"Select Category\")\n</code></pre>\n\n<p>AND CONTROLLER</p>\n\n<pre><code>items.CategoryddList =\n        itemsRepository.GetItemDdl(\"Item Categories\").Select(c =&gt; new SelectListItem \n                        {\n                           Value = c.DropdownID.ToString(),\n                           Text = c.DropdownText\n                        });  \n</code></pre>\n"},{"tags":["c#","asp.net-mvc","custom-model-binder"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13098290,"title":"Custom modelbinder results in new database insert","body":"<p>I've got this issue in ASP.NET MVC model binding. I have an address object with a country child object. However - I'm using auto-complete for the country name. So in my view I've got something like this:</p>\n\n<pre><code>@Html.EditorFor(model =&gt; model.Country)\n</code></pre>\n\n<p>And I wrote a custom binder here:</p>\n\n<pre><code>    public class CountryBinder : IModelBinder\n{\n    public CountryBinder(DataContext db)\n    {\n        this.Db = db;\n    }\n\n    protected DataContext Db { get; set; }\n\n    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)\n    {\n        var countryName = controllerContext.HttpContext.Request[bindingContext.ModelName];\n        var result = Db.Countries.SingleOrDefault(\n            country =&gt; country.EnglishShortName.Equals(countryName) | country.Translation_NL.Equals(countryName));\n        return result;\n    }\n}\n</code></pre>\n\n<p>The data context is injected like this:</p>\n\n<pre><code>kernel.Bind&lt;IDBContext&gt;().To&lt;DataContext&gt;().InRequestScope();\n</code></pre>\n\n<p>Controller looks like this:</p>\n\n<pre><code>        var model = this.participationRepository.Single(p =&gt; p.Id == participation.Id);\n        if (!participation.IsCancelled)\n        {\n            this.TryUpdateModel(model);\n</code></pre>\n\n<p>etc...</p>\n\n<p>Every time I save - a new Country is created, with the exact specs of the country that we found in the binder, but with new id. Any clues?</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13098611,"title":"Forgot Password link mvc4","body":"<p>I am using the mvc4 framework with openAuth feature active. Users can log in and register using an external login \"Google\" or Facebook.</p>\n\n<p>My question is how do you implement a forgot my password system into this. All I have is their email address by default especially when they sign in as an external login. When they first log in with an external login it does ask to register the email into the system. Should at this point I ask for more information to validate the user?</p>\n\n<p>Any direction would be appreciated.</p>\n"},{"tags":["asp.net-mvc","localization","automapper","cultureinfo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13092222,"title":"Automapper Mapping for Localization Resolver in a Multi-Language Website","body":"<p>I found a way to use Automapper for Language mapping based on the active Culture.</p>\n\n<p>The question is if it's possible to build a generic Resolver to map all the models that use the Resolver.</p>\n\n<p>In this Case, the models to map have always the same properties, Id and Name (including the language properties Name_PT, Name_FR and Name_EN):</p>\n\n<p>// MODELS</p>\n\n<pre><code>public class MakeDto\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Name_PT { get; set; }\n    public string Name_FR { get; set; }\n    public string Name_EN { get; set; }\n}\n\npublic class MakeViewModel\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n\npublic class ModelDto\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Name_PT { get; set; }\n    public string Name_FR { get; set; }\n    public string Name_EN { get; set; }\n}\n\npublic class ModelViewModel\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n\npublic class FuelDto\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Name_PT { get; set; }\n    public string Name_FR { get; set; }\n    public string Name_EN { get; set; }\n}\n\npublic class FuelViewModel\n{\n    // Primary properties\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p>// AUTOMAPPER PROFILE</p>\n\n<pre><code>public class DtoToViewModelMappingProfile : Profile\n{\n    public override string ProfileName\n    {\n        get { return \"DtoToViewModelMappings\"; }\n    }\n\n    protected override void Configure()\n    {\n        CreateMaps();\n    }\n\n    private static void CreateMaps()\n    {\n        Mapper.CreateMap&lt;ModelDto, ModelViewModel&gt;();\n        Mapper.CreateMap&lt;MakeDto, MakeViewModel&gt;()\n            .ForMember(dest =&gt; dest.Name, opt =&gt; opt.ResolveUsing&lt;CultureResolver&gt;());\n        Mapper.CreateMap&lt;FuelDto, FuelViewModel&gt;();\n    }\n\n    public class CultureResolver : ValueResolver&lt;MakeDto, string&gt;\n    {\n        protected override string ResolveCore(MakeDto makeDto)\n        {\n            switch(Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName.ToUpperInvariant())\n            {\n                case \"FR\":\n                    return makeDto.Name_FR;\n                case \"EN\":\n                    return makeDto.Name_EN;\n            }\n            return makeDto.Name_PT;\n        }   \n    }\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["javascript","asp.net-mvc","visual-studio-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13097114,"title":"how to display content using anchor tag","body":"<p>I want to preview content,when i click on the anchor tag,</p>\n\n<pre><code>                    var profiledemo = profiles.split(\",\");\n                    for (var pd = 0; pd &lt; profiledemo.length; pd++) {\n                        var mydiv = document.getElementById(\"Profile\");\n                        var aTag = document.createElement('a');\n                        aTag.setAttribute('href');\n                        aTag.innerHTML = profiledemo[pd];\n                        mydiv.appendChild(aTag);                               \n                        aTag.onclick = function () {\n                            alert(\"profiles anchor tag called\");\n\n                        }\n                    }\n</code></pre>\n\n<p>I am able to display multiple docs and for those docs i put anchor tag using above,now I want,when user click on the particular tag I have to display that doc content  which is in database.</p>\n"},{"tags":["asp.net-mvc","telerik"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13096473,"title":"Why data cannot display using telerik grid","body":"<p>I want to try using telerik grid because I see the demo that the grid is really good, but I had a problem the data cannot display in my view. here is the view code</p>\n\n<pre><code>@{Html.Telerik().Grid&lt;WarnaWarni.Models.TBL_BERITA&gt;()\n    .Name(\"Grid\")\n    .PrefixUrlParameters(false)\n    .Columns(columns =&gt;\n    {\n        columns.Bound(o =&gt; o.JUDUL).Width(100);\n        columns.Bound(o =&gt; o.RINGKASAN).Width(200);\n        columns.Bound(o =&gt; o.ISI).Width(200);\n        columns.Bound(o =&gt; o.FOTO);\n        columns.Bound(o =&gt; o.TANGGAL).Format(\"{0:MM/dd/yyyy}\").Width(120);\n    }).DataBinding(dataBinding =&gt; dataBinding.Ajax().Select(\"ID_BERITA\", \"TBL_BERITA\"))\n    .Pageable()\n    .Sortable()\n    .Filterable();\n\n    }\n</code></pre>\n\n<p>here is the controller method:</p>\n\n<pre><code>public ViewResult Index()\n    {\n        string query = \"select * from TBL_BERITA\";            \n        var a = db.ExecuteStoreQuery&lt;TBL_BERITA&gt;(query);\n\n        return View(a.ToList());\n    }\n</code></pre>\n\n<p>How to make the data show in the View?</p>\n"},{"tags":["asp.net-mvc","visual-studio-2010","entity-framework","nuget","class-library"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13036496,"title":"Install-package Entity framework error","body":"<p>I need help.\nWhen i'm trying to install Entity-framework to my class library in my solution, i'm getting an error:</p>\n\n<p><em>Exception calling \"CreateInstanceFrom\" with \"8\" argument(s): \"Could not load file or assembly 'file:///D:#work#web\\DanceClubCMS\\packages\\EntityFramework.5.0.0\\tools\\EntityFramework.PowerShell.dll' or one of its dependencies.\n     .\" =>  <strong>(translate from russian - file not found)</strong>\nAt D:#work#web\\DanceClubCMS\\packages\\EntityFramework.5.0.0\\tools\\install.ps1:10 char:34\n+     $appDomain.CreateInstanceFrom &lt;&lt;&lt;&lt; (\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\n    + FullyQualifiedErrorId : DotNetMethodException</em></p>\n\n<p>please help me. How can i fix that problem?</p>\n"},{"tags":["ajax","asp.net-mvc","exchange","viewbag"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13096601,"title":"ViewBag change using ajax in ASP.NET MVC3","body":"<p>ViewBag, ViewData, TempData are called just once at the first time when I call the view?</p>\n\n<p>And never change if I don't refresh the page?</p>\n\n<p>Because I want to change using Ajax (every 10 sec, I call Ajax)</p>\n\n<p>Plz See below code,</p>\n\n<p>==================== in Controller... =======================</p>\n\n<pre><code> public ActionResult OriginView()\n {\n\n      ViewBag.IntData = 1;\n\n      return View();\n\n }\n\n\n public JsonResult ChangeViewBag(int CurrentInterval)\n {\n\n      ViewBag.IntData = CurrentInterval;\n\n      return Json(new{IntData=CurrentInterval},JsonRequestBehavior.AllowGet);\n\n }\n</code></pre>\n\n<p>================= in OriginView.cshtml... =======================</p>\n\n<pre><code> var CurrentInterval = 2\n\n $.getJSON('@Url.Action(\"ChangeViewBag\",\"Controller\")', {CurrentInterval:CurrentInterval},function(response){\n\n    @*CurrentInterval++ every ten sec, I want to use CHANGED ViewBag here!*@\n\n    alert(@ViewBag.IntData) @*but **Result is still 1**, unchanged!*@\n\n    alert(response.IntData) @*ofcourse I can use it in this way. *@\n\n    @* but I should use below ASP.NET CODE\n\n    @{\n       string TimeData = DateTime.Now.AddSeconds(**ViewBag.IntData**).ToString();\n    }\n\n    ***The position is impossible to javascript variable.*** right?*@\n });\n</code></pre>\n\n<p>.Net genius please!!!\nIf it's impossible, Any Idea?</p>\n"},{"tags":["sql","asp.net-mvc","linq","entity-framework"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13096058,"title":"Joining two tables in linq method syntax, MVC EntityFramework","body":"<p>I'm working with two tables: CI_CLIENTRISK (SCD type 2)... and QB_INVOICES_HEADER (<a href=\"http://i47.tinypic.com/x42c69.png\" rel=\"nofollow\">edmx screenshot</a>).</p>\n\n<p>They can be joined via ClientID.  I want to essentially replicate this query:</p>\n\n<pre><code>SELECT a.ClientID,\n    MAX(b.InvoiceDt) AS MaxInvoiceDt\n    (omitted for brevity)\nFROM CI_CLIENTRISKADJS a\nINNER JOIN QB_INVOICES_HEADER b\nON a.ClientID = b.ClientID\nWHERE a.IsActive = 1\nGROUP BY a.ClientID\nORDER BY MaxInvoiceDt DESC\n</code></pre>\n\n<p>Here's what I have so far.  It's not returning any records.</p>\n\n<pre><code>using (var db = new PLOGITENS01Entities())\n        {\n        var rvClientRiskAdjs = db.CI_CLIENTRISKADJS\n            .Take(50)\n            .Join(db.QB_INVOICES_HEADER,\n                a =&gt; a.ClientID,\n                b =&gt; b.ClientID,\n                (a, b) =&gt; new { Risk = a, Invoices = b })\n            .Where(a =&gt; a.Risk.IsActive == 1)\n            .OrderByDescending(o =&gt; o.Invoices.InvoiceDt)\n            .Select(c =&gt; new ClientRiskModel()\n            {\n                ClientRiskId = c.Risk.ClientRiskID,\n                ClientName = c.Risk.CI_CLIENTLIST.ClientName,\n                ClientId = c.Risk.ClientID,\n                ClientRiskAdjs = c.Risk.ClientRiskAdjs,\n                RecordValidStartDt = c.Risk.RecordValidStartDt,\n                RecordValidEnddt = c.Risk.RecordValidEnddt,\n                IsActive = c.Risk.IsActive\n            })\n            .ToList();\n\n        return View(new GridModel(rvClientRiskAdjs));\n        }\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","json","jsonp"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":959,"score":1,"question_id":5116782,"title":"parse json response(JavaScriptSerializer) with double quotes using jquery","body":"<p>I am using the following code in my aspx(asp.net MVC ViewPage) to get serialized output:</p>\n\n<pre><code>var _accountNames = '&lt;%= ViewData[\"AccountNames\"] != null ? new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewData[\"AccountNames\"]) : null%&gt;';\n</code></pre>\n\n<p>This gives the following result:</p>\n\n<pre><code>[{\"Name\":\"My Saving\",\"AccountBalance\":-4.2500,\"ReferenceId\":2},\n{\"Name\":\"My Checking\",\"AccountBalance\":0.0000,\"ReferenceId\":3},\n{\"Name\":\"Undeposited Funds\",\"AccountBalance\":113.6600,\"ReferenceId\":2},\n{\"Name\":\"Star Account \"Trust\"\",\"AccountBalance\":0.0000,\"ReferenceId\":50}]\n</code></pre>\n\n<p>In the above result, the Account (Star Account \"Trust\") has double quotes in it. It gives <code>\"missing } after property list\"</code> error, while using eval. Even using JSON parse gives error.</p>\n\n<p>I am using this result to bind the dropdown options as:</p>\n\n<pre><code> var k = JSON.parse(_accountNames.replace(/'/g, '\"'));\n if (k != null &amp;&amp; k.length &gt; 0) {\n    var options = '';\n    options += '&lt;option value=\"\"&gt;' + \"--Select Account--\" + '&lt;/option&gt;';\n    for (var i = 0; i &lt; k.length; i++) {\n       options += '&lt;option value=\"' + k[i].AccountNameType + '\"&gt;' + k[i].Name + ' $(' + k[i].AccountBalance + ')' + '&lt;/option&gt;';\n    }\n}\n$(\"select#DepositToddl\").html(options);\n</code></pre>\n\n<p>How can i parse the result has double quotes in it? Please suggest.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":5,"favorite_count":4,"up_vote_count":22,"down_vote_count":0,"view_count":18763,"score":22,"question_id":4789512,"title":"Add css class to Html.EditorFor in MVC 2","body":"<p>I'm trying to add a css class to a textbox. This is what I have in my view:</p>\n\n<pre><code>&lt;%: Html.EditorFor(m =&gt; m.StartDate) %&gt;\n</code></pre>\n\n<p>I tried following the instructions at this <a href=\"http://stackoverflow.com/questions/3038209/adding-a-css-class-with-html-textbox\">link</a> by making my code:</p>\n\n<pre><code>&lt;%: Html.EditorFor(m =&gt; m.StartDate, new { @class: \"datepicker\" }) %&gt;\n</code></pre>\n\n<p>But I get a compiler error saying:</p>\n\n<p><strong>Syntax error, ',' expected</strong></p>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13095498,"title":"How to perform Redirect in helper class for MVC controller?","body":"<p>I have some common code that runs at the beginning of multiple controller actions.  I would like to refactor that code into a static class to promote reuse of that code block.</p>\n\n<p>The code checks for a variable, looks for a cookie and if a condition is met, the code should redirect to another page (controller/action).</p>\n\n<p>The problem is that everything works properly (including the cookie lookup) but the Redirect does not fire.  The code passes over the redirect and the redirect never happens.</p>\n\n<p>What is the proper way to redirect in a helper class?</p>\n\n<p>Here is the code now:</p>\n\n<p>This line is not working: <strong>myController.HttpContext.Response.Redirect(redirectURL);</strong></p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nnamespace MyProject.WebUI\n{\n    public static class SessionValidationHelper\n    {\n        // helper class to encapsulate common routines to check for missing session data\n        public static void SessionIdRequired(string id, Controller myController)\n        {\n            if (id == null || id == \"\")\n            {\n                // check cookie\n                if (myController.ControllerContext.HttpContext.Request.Cookies.AllKeys.Contains(\"cookiename\"))\n                {\n                    // if a session cookie was found, send to the registration recovery page\n                    string sessionGuidCookieValue = \"\";\n                    sessionGuidCookieValue = myController.ControllerContext.HttpContext.Request.Cookies[\"cookiename\"].Value;\n\n                    // check if GUID/SessionID exists in persistent cache\n\n                    // send to Session Recovery\n                    //myController.HttpContext.Response.RedirectToRoute(\"SessionRecovery\", new { Controller = \"SessionRecovery\", Action = \"Index\", id = sessionGuidCookieValue });\n                    string redirectURL = @\"~/SessionRecovery/Index/\" + sessionGuidCookieValue;\n\n                    // this code isn't working\n                    myController.HttpContext.Response.Redirect(redirectURL);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13091545,"title":"Why Is It That The View In MVC Is Not Being Displayed?","body":"<p>I had debug and it actually enter the View(survey) but The View is not returning the page. Any help will be appreciated!</p>\n\n<p>//#edit is a submit button, and below is the script.</p>\n\n<pre><code> $('#edit').click(function () {\n\n    var sid = $('input[type=radio]:checked').val();\n    var srid = sid.replace(/[^0-9]/g, '');\n    var id = parseInt(srid);\n    //alert(id);\n\n    $.ajax({\n        type: 'POST',\n        url: '@Url.Action(\"Edit\",\"MainPage\")',\n        data: { \"id\": id },\n        success: function (result) {\n\n        }\n\n    });\n\n\n});       \n</code></pre>\n\n<p>//Controller</p>\n\n<pre><code>[HttpPost]\n     public ActionResult Edit(int id = 0)\n    {\n         survey survey = db.surveys.Single(s =&gt; s.SurveyId == id);\n         if (survey == null)\n         {\n             return HttpNotFound();\n         }\n        return View(survey);\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","windows","forms","azure","acs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13091589,"title":"MVC4 Windows Azure ACS 500 Internal Server Error when Authentication Forms","body":"<p>Im following this tutorial:http://robbincremers.me/2012/02/22/using-windows-azure-access-control-service-to-provide-a-single-sign-on-experience-with-popular-identity-providers/#comment-469</p>\n\n<p>Using this guide or others, when uncomment the authentication forms in the web config for using the custom html login form downloaded from windows azure access control portal, I get an 500 Internal Server Error. What could be wrong?</p>\n\n<p>It is just adding authentication form</p>\n\n<pre><code>&lt;location path=\"FederationMetadata\"&gt;\n    &lt;system.web&gt;\n      &lt;customErrors mode=\"Off\"/&gt;\n      &lt;authorization&gt;\n        &lt;allow users=\"*\" /&gt;\n      &lt;/authorization&gt;\n    &lt;/system.web&gt;\n  &lt;/location&gt;\n  &lt;system.web&gt;\n    &lt;httpRuntime requestValidationMode=\"2.0\"/&gt;\n   &lt;!-- &lt;authorization&gt;\n      &lt;deny users=\"?\" /&gt;\n    &lt;/authorization&gt;--&gt;\n    &lt;authentication mode=\"None\" /&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n      &lt;assemblies&gt;\n        &lt;add assembly=\"Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n      &lt;/assemblies&gt;\n    &lt;/compilation&gt;\n    &lt;!--Commented out by FedUtil--&gt;\n    &lt;authentication mode=\"Forms\"&gt;&lt;forms loginUrl=\"~/Federation/Login.html\" timeout=\"2880\" /&gt;&lt;/authentication&gt;\n    &lt;pages&gt;\n      &lt;namespaces&gt;\n        &lt;add namespace=\"System.Web.Helpers\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n        &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n        &lt;add namespace=\"System.Web.Optimization\" /&gt;\n        &lt;add namespace=\"System.Web.Routing\" /&gt;\n        &lt;add namespace=\"System.Web.WebPages\" /&gt;\n      &lt;/namespaces&gt;\n    &lt;/pages&gt;\n    &lt;httpModules&gt;\n      &lt;add name=\"WSFederationAuthenticationModule\" type=\"Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n      &lt;add name=\"SessionAuthenticationModule\" type=\"Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" /&gt;\n    &lt;/httpModules&gt;\n  &lt;/system.web&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","razor","webgrid"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13093236,"title":"Check if any http query exists, not by parameter","body":"<p>Since MVC3 WebGrid sorting default is ascending via query string, &amp;sortdir=ASC.. I would like to know how to sort initially by descending.</p>\n\n<p>I've tried below, using Request.QueryString, but in the case were there is absolutely no query string \"?..\", this doesn't see, to be working:</p>\n\n<pre><code>// Force a descending sort on page load when query string is empty\nif(Request.QueryString[grid.SortDirectionFieldName].IsEmpty()){\n    grid.SortDirection = SortDirection.Descending;\n}\n</code></pre>\n\n<p>Since I have a path like ..Admin/Review initially, and not ../Admin/Review?sort=Question6&amp;sortdir=ASC, how can I test this case? Would the above condition still return true if there isn't even a query parameter?</p>\n\n<p>I believe I need to extract a query from the raw url and if it doesn't exist, set my sort direction to descending.</p>\n"},{"tags":["c#","asp.net-mvc","linq-to-sql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13095370,"title":"Saving culture dates Linq to SQL","body":"<p>I have a view which asks for a date to be selected. This is then saved to a database by creating an object and using linq to insert:</p>\n\n<pre><code>Event e = new Event();\ne.Date = model.DateEntered;\n\ncontext.Events.InsertOnSubmit(e);\ncontext.SubmitChanges();\n</code></pre>\n\n<p>On this line I get an exception on the date format. Locally this is not the case as I understand it is to do with a globalization property needed in the web config file. My question is, is there a way to display the date to the user in the view in their expected format for their region and then save as a UK date format?</p>\n\n<p>Where do I declare this globalization property and will it mean that US people will not be able to save?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13094295,"title":"\"@model\" not working on razor page in hybrid WebForm/MVC site","body":"<p>I'm integrating MVC into our current .Net WebForms site.  I used these links for guidance while setting it up. <a href=\"http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx\" rel=\"nofollow\">Hanselman - Integrating MVC</a> and <a href=\"http://blog.falafel.com/Blogs/BasemEmara/basem-emara/2012/09/27/integrating-asp.net-mvc-4-into-existing-web-forms-applications\" rel=\"nofollow\">blog.falafel</a>.</p>\n\n<p>The site works and I can navigate to .aspx pages and controller/actions no problem.  But when I try to add the @model to a razor page, @model doesn't appear to be registering and Visual Studios sees  as a HTML5 item.</p>\n\n<p>exception:</p>\n\n<p>{\"c:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Temporary ASP.NET    Files\\root\\a3be471e\\a209a63\\App_Web_index.cshtml.a8d08dba.d7uqhlro.0.cs(30): error CS1514: { expected\"} System.Exception {System.Web.HttpCompileException}</p>\n\n<p>I added all of the appropriate references and went over both sites multiple times.</p>\n\n<p>List of references I added - </p>\n\n<pre><code>Microsoft.Csharp\nSystem.ComponentModel.Data\nSystem.Web.Mvc\nSystem.Web.Razor\nSystem.Web.WebPages\nSystem.Net.Http\nSystem.Web.Optimization\nSystem.Web.Http\nSystem.Web.Http.WebHost\nNewtonsoft.Json\n</code></pre>\n\n<p>Web.config additions</p>\n\n<pre><code>&lt;compilation debug=\"true\" targetFramework=\"4.0\"&gt;\n  &lt;assemblies&gt;\n    &lt;add assembly=\"System.Web.Abstractions, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n    &lt;add assembly=\"System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35\" /&gt;\n  &lt;/assemblies&gt;\n&lt;/compilation&gt;\n\n&lt;system.web&gt;\n  &lt;pages&gt;\n    &lt;namespaces&gt;\n      &lt;add namespace=\"System.Web.Helpers\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Ajax\" /&gt;\n      &lt;add namespace=\"System.Web.Mvc.Html\" /&gt;\n      &lt;add namespace=\"System.Web.Routing\" /&gt;\n      &lt;add namespace=\"System.Web.WebPages\"/&gt;\n   &lt;/namespaces&gt;\n  &lt;/pages&gt;\n&lt;/system.web&gt;\n\n&lt;configuration&gt;\n &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"System.Web.Mvc\" publicKeyToken=\"31bf3856ad364e35\" /&gt;\n        &lt;bindingRedirect oldVersion=\"1.0.0.0-2.0.0.0\" newVersion=\"3.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","checkbox"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2214,"score":4,"question_id":936267,"title":"asp.net mvc checkbox inconsistency","body":"<p>I'm using an checkbox on an ASP.NET MVC form like so:</p>\n\n<pre><code>&lt;%=Html.CheckBox(\"AgreeToRules\", Model.AgreeToRules)%&gt;\n</code></pre>\n\n<p>The AgreeToRules property on the model is a boolean value. During testing, this all worked fine. However, now that we've gone live with this app, I'm seeing a relatively small but significant number of errors with the following messaging:</p>\n\n<blockquote>\n  <p>System.Web.HttpUnhandledException:\n  Exception of type\n  'System.Web.HttpUnhandledException'\n  was thrown. --->\n  System.InvalidOperationException: The\n  parameter conversion from type\n  'System.String' to type\n  'System.Boolean' failed. See the inner\n  exception for more information. --->\n  System.FormatException: Y is not a\n  valid value for Boolean. --->\n  System.FormatException: String was not\n  recognized as a valid Boolean.</p>\n</blockquote>\n\n<p>This appears to happen when the view engine tries to render the form after a post, and the value of the checkbox that is returned from the ValueProvider looks like:</p>\n\n<blockquote>\n  <p>Y,false</p>\n</blockquote>\n\n<p>OR</p>\n\n<blockquote>\n  <p>N,false</p>\n</blockquote>\n\n<p>The html that is rendered in the original form looks like:</p>\n\n<pre><code>&lt;input id=\"AgreeToRules\" name=\"AgreeToRules\" type=\"checkbox\" value=\"true\" /&gt;\n&lt;input name=\"AgreeToRules\" type=\"hidden\" value=\"false\" /&gt;\n</code></pre>\n\n<p>During testing, I expected (and showed) the posted value to look like:</p>\n\n<blockquote>\n  <p>true,false</p>\n</blockquote>\n\n<p>if checked or </p>\n\n<blockquote>\n  <p>false</p>\n</blockquote>\n\n<p>if not checked. So where is the N and Y coming from?</p>\n\n<p>I added user agent to the list of information returned from the error handler and it appears (so far) that all of the errors are occuring under windows XP with FF 3.0.10, but that's exactly what I have tested with and the problem did not exist during testing. </p>\n\n<p>Any thoughts?</p>\n"},{"tags":["asp.net-mvc","model","saving","enumerable"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13093325,"title":"Saving an IEnumerable Model","body":"<p>I have a view that has 2 date pickers, one of which is a start date and the other of which is end date.  I am able to get the user to select the start and end dates, redirect to a view that will have a list of Time worked where the user could change the date, enter time, and once they are done they should be able to click the save button and it should create a new instance of each time worked to the database.  I got the view displaying with no problem, but when the form posts my enumerable model is null, the form collection only has one accessible item, and I am not sure why.  Please take a look at the view I am creating below to get an idea of what I am doing and let me know if you are able to help me in any way.  </p>\n\n<pre><code>@model IEnumerable&lt;TimeCollection.Models.TimeWorked&gt;\n\n@{\n    ViewBag.Title = \"Create TimeWorked Range\";\n}\n\n&lt;h2&gt;Create TimeWorked Range&lt;/h2&gt;\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            @Html.DisplayNameFor(model =&gt; model.WorkDate)\n        &lt;/th&gt;\n        &lt;th&gt;\n            @Html.DisplayNameFor(model =&gt; model.HoursWorked)\n        &lt;/th&gt;\n    &lt;/tr&gt;\n\n@foreach (var item in Model) {\n    &lt;tr&gt;\n        @Html.HiddenFor(modelItem =&gt; item.EmployeeId)\n        &lt;td&gt;\n            @Html.EditorFor(modelItem =&gt; item.WorkDate)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.EditorFor(modelItem =&gt; item.HoursWorked)\n        &lt;/td&gt;\n        &lt;td&gt;\n            @Html.HiddenFor(modelItem =&gt; item.BeenSubmitted)\n        &lt;/td&gt;\n    &lt;/tr&gt;\n}\n\n&lt;/table&gt;\n    &lt;p&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt;\n    &lt;/p&gt;\n}\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\n\nnamespace TimeCollection.Models\n{\n    public class TimeWorked\n    {\n        public int TimeWorkedId { get; set; }\n        public int EmployeeId { get; set; }\n        public DateTime WorkDate { get; set; }\n        public int HoursWorked { get; set; }\n        public bool BeenSubmitted { get; set; }\n\n        public static void CreateTimeWorked(TimeWorked timeWorkedToCreate)\n        {\n            string insertQuery = string.Format(\"insert into time_worked (employee_id, work_date, work_hours, been_submitted) values ('{0}', '{1}', '{2}', '{3}')\", timeWorkedToCreate.EmployeeId, timeWorkedToCreate.WorkDate.ToString(\"yyyy/MM/dd\"), timeWorkedToCreate.HoursWorked, (timeWorkedToCreate.BeenSubmitted == true ? \"1\" : \"0\"));\n            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, insertQuery);\n        }\n\n        public static TimeWorked ReadTimeWorked(int timeWorkedId)\n        {\n            string selectQuery = string.Format(\"select * from time_worked where time_worked_id = '{0}'\", timeWorkedId);\n            return ConvertDataRowIntoTimeWorked(SpectrumData.Utility.FillDataSet(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, selectQuery).Tables[0].Rows[0]);\n        }\n\n        public static void UpdateTimeWorked(TimeWorked timeWorkedToUpdate)\n        {\n            string updateQuery = string.Format(\"update time_worked set work_date = '{0}', work_hours = '{1}', been_submitted = '{2}' where time_worked_id = '{2}'\", timeWorkedToUpdate.WorkDate, timeWorkedToUpdate.HoursWorked, timeWorkedToUpdate.BeenSubmitted, timeWorkedToUpdate.TimeWorkedId);\n            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, updateQuery);\n        }\n\n        public static void DeleteTimeWorked(int timeWorkedId)\n        {\n            string deleteQuery = string.Format(\"delete from time_worked where time_worked_id = '{0}'\", timeWorkedId);\n            SpectrumData.Utility.ExecuteMySqlCommand(SpectrumData.Properties.Resources.SpectrumTSDatabaseConnectionString, deleteQuery);\n        }\n\n        private static TimeWorked ConvertDataRowIntoTimeWorked(System.Data.DataRow timeWorkedDataRow)\n        {\n            TimeWorked timeWorked = new TimeWorked();\n            timeWorked.BeenSubmitted = (timeWorkedDataRow[\"been_submitted\"].ToString() == \"1\" ? true : false);\n            timeWorked.EmployeeId = int.Parse(timeWorkedDataRow[\"employee_id\"].ToString());\n            timeWorked.HoursWorked = int.Parse(timeWorkedDataRow[\"work_hours\"].ToString());\n            timeWorked.TimeWorkedId = int.Parse(timeWorkedDataRow[\"time_worked_id\"].ToString());\n            timeWorked.WorkDate = DateTime.Parse(timeWorkedDataRow[\"work_date\"].ToString());\n\n            return timeWorked;\n        }\n    }\n}\n\n public ActionResult CreateTimeWorkedRange(DateTime startDate, DateTime endDate)\n    {\n        List&lt;Models.TimeWorked&gt; listOfTimeWorked = new List&lt;Models.TimeWorked&gt;();\n        DateTime beginning = startDate;\n        DateTime ending = endDate;\n\n        while (beginning &lt;= ending)\n        {\n            Models.TimeWorked dayWorked = new Models.TimeWorked()\n            {\n                EmployeeId = (Session[\"InventoryReviewUser\"] as SpectrumData.SpectrumTS.InventoryReviewUser).EmployeeId,\n                WorkDate = beginning\n            };\n\n            if (listOfTimeWorked.Contains(dayWorked) == false)\n            {\n                listOfTimeWorked.Add(dayWorked);\n            }\n\n            beginning = beginning.AddDays(1);\n        }\n\n        return View(listOfTimeWorked);\n    }\n\n    [HttpPost]\n    public ActionResult CreateTimeWorkedRange(List&lt;Models.TimeWorked&gt; modelList)\n    {\n        foreach (Models.TimeWorked timeWorked in modelList)\n        {\n            Models.TimeWorked.CreateTimeWorked(timeWorked);\n        }\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12981259,"title":"Why doesn't TextBoxFor include validation elements if called twice for the same model property?","body":"<p>Simple question... Here is an example of some razor code:</p>\n\n<pre><code>@Html.TextBoxFor(c =&gt; c.RevisedEstimate)\n@Html.TextBoxFor(c =&gt; c.RevisedEstimate)\n</code></pre>\n\n<p>Here is how this renders:</p>\n\n<pre><code>&lt;input data-val=\"true\" data-val-number=\"The field Revised Estimate must be a number.\" id=\"RevisedEstimate\" name=\"RevisedEstimate\" type=\"text\" value=\"0\" /&gt;\n&lt;input id=\"RevisedEstimate\" name=\"RevisedEstimate\" type=\"text\" value=\"0\" /&gt;\n</code></pre>\n\n<p>The obvious question you ask is, \"Why are you doing that?\". The razor view is actually building client side detail-row templates that are used in KendoUI grids. There are two similar grids and we use the same viewmodel server side. We actually do provide the id element for the template so each field in each row ends up with a unique id. </p>\n\n<p>Why does the second input element not have the data-val and data-val-number elements?</p>\n"},{"tags":["asp.net-mvc","juice-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13094523,"title":"Juice UI Datepicker doesn't remember the ID that was assigned to the Html.TextBoxFor control","body":"<p>I am trying to hook the JuiceUI datetimepicker onto a date textbox input field. However, even though I have assigned an ID to the Html.TextboxFor(c => Model.Birthday) control, but for some reason JuiceUI doesn't see this ID, and I get the following error: </p>\n\n<p><em>Value cannot be null. Parameter name: Targetcontrol is null.</em> </p>\n\n<pre><code>&lt;%=Html.TextBoxFor(c =&gt; Model.BIRTHDATE, new { id = \"txtBirthday\"}) %&gt;\n&lt;Juice:Datepicker ID=\"dpBirthday\" runat=\"server\" TargetControlId = \"BIRTHDATE\" /&gt;\n</code></pre>\n\n<p>when I run the Developer Tools in IE, the id shows up: </p>\n\n<pre><code>&lt;input name=\"BIRTHDATE\" class=\"text-box single-line\" id = \"BIRTHDATE\" type=\"text\" data-val-required=\"The BIRTHDATE field is required.\" data-val=\"true\" value=\"\"/&gt;\n</code></pre>\n\n<p>Is there a reason why Juice UI's datepicker isn't seeing the ID of the control that I want to hook it into? Should I be using something else to attach a simple jQuery datepicker?</p>\n"},{"tags":["asp.net-mvc","file-download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12963006,"title":"Download dialog taking a very long time to load in ASP mvc application","body":"<p>I have an ASP.NET web application that, in part, allows a user to upload (and download) documents.  The upload isn't working very well either, but my download dialogs are having a serious issue and I have no clue why.</p>\n\n<p>These files are stored on a share that is not on the same machine as the code.\nI am attempting to send the download via a FilePathResult using the File overload File(location, mimetype, displayname).</p>\n\n<p>When a user clicks the download link it will open a new blank page and begin the loading animation but will stick to this for a good couple of minutes for larger files (up to 25 mb) before showing the save/download dialog, where it then takes about 5 seconds to actually download the file.</p>\n\n<p>I have hunted and hunted and so far the only thing I\"ve found is that FilePathResult is supposed to not buffer the file in memory but instead simply hand over the file to the user for downloading. </p>\n\n<p>Does anyone have any insight as to why it would take a good (timed) 5m 45s to bring up the download dialog on a file that is only 24 mb? I feel like IIS or asp is pre-loading the document somewhere when it shouldn't be, and even if it is that is way too much time for such a small file...</p>\n\n<p>For reference:</p>\n\n<pre><code>        public FilePathResult DownloadFile(int id)\n        {\n            var file = _fileService.GetByIdForUser(id, base.LoggedInUserId);\n\n            return File(file.Location, UploadedFileManager.DetermineContentTypeFrom(file.Extension), file.Name);\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","json","asp.net-mvc-3","rest","odata"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13093353,"title":".NET Mvc 3 to return OData JSON result","body":"<p>I am trying to get ASP.NET MVC3 to return an array as an OData result. </p>\n\n<p>I am not planning and do not want to use WebAPI in MVC4, because it removes the abstractions that we already have in place. Namely, we do not expose our underlying table schema/structure to the application layer - ever.</p>\n\n<p>So I intend to manually parse the OData query myself, which is not a big deal.</p>\n\n<p>However, how should I return the result set in a manner consistent with the OData (JSON) formats. I'm looking to find out if some prior work exists.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","pinvoke","invoke","shell32"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13093415,"title":"Can shell32.dll pinoke time out or lose its connection?","body":"<p>This may not be the correct question, but I'll explain my situation.</p>\n\n<p>I created a file explorer web app that uses pInvoke on shell32.dll to get file attributes including the icon associated with the file, which in turn I use this information to pump into a view model.</p>\n\n<p>This works for about an hour or two, then I notice that it no longer pulls the hicons thus returning errors when creating my model.</p>\n\n<p>This is all during development, I have not deployed this yet, so I am not 100% sure if its the pInvoke connection, or a result of Visual Studio loosing its connection when I build the project. </p>\n\n<p>To get around this I have to close visual studio then open it up again and it will work fine for another hour or 2...</p>\n\n<p>Any insight would be helpful, thanks again.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13089489,"title":"ASP.NET MVC explanation of @section","body":"<p>For an ASP.NET MVC application, can someone please explain why and when I would use @section in a View?</p>\n\n<p>I saw in this example (http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx), he adds @section to the Index.cshtml. Is Index.cshtml a shared View? What in the example's code says \"Use @section code in this View but not that View?\".</p>\n\n<p>Thank you!</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13092651,"title":"ASP.Net MVC Default Files Structure","body":"<p>Is there any functional reason of the default files structure on new ASP.Net MVC Application (Grouped by controllers, model, views etc. ?</p>\n\n<p>Otherwise I would structure it in a way that would be more convenient for me.</p>\n\n<p>Thanks!</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":2,"up_vote_count":19,"down_vote_count":0,"view_count":7133,"score":19,"question_id":719027,"title":"RenderAction RenderPartial","body":"<p>From what I have understood there is a big difference between the Html.RenderPartial included in the ASP.NET MVC release and the HTML.RenderAction in the Microsoft.Web.Mvc.ViewExtensions included in MVC Futures.</p>\n\n<p>On my application I have many pages composed from many \"widgets\" (sort of) each having its own specific function.  </p>\n\n<p>It seemed to me more reasonable to use the RenderAction method as each widget would have a dedicated controller responsible for getting different data and rendering a dedicated view (as opposed to having only one controller and a unique view model to pass to RenderPartial helper to render views). </p>\n\n<p>From the tests I have done having a form that points to a Create action method in a controller like:</p>\n\n<pre><code> &lt;% using (Html.BeginForm(\"Create\", \"Message\", FormMethod.Post, \n     new { id = \"messageCreateForm\" })) {%&gt;\n</code></pre>\n\n<p>and calling it with </p>\n\n<pre><code> &lt;% Html.RenderPartial(\"MessageForm\",new MessageDTO()); %&gt;\n</code></pre>\n\n<p>will render correcly a:</p>\n\n<pre><code>&lt;form id=\"messageCreateForm\" method=\"post\" action=\"/Message/Create\"&gt;\n</code></pre>\n\n<p>but with the same equivalent with RenderAction (so using a MessageForm action method on the controller to render the view) would not render correcly so:</p>\n\n<pre><code> &lt;% Html.RenderAction&lt;MessageController&gt;(m =&gt; m.MessageForm()); %&gt;\n</code></pre>\n\n<p>will render in:</p>\n\n<pre><code>&lt;form id=\"messageCreateForm\" method=\"post\" action=\"\"&gt;\n</code></pre>\n\n<p>Note that the action is empty.</p>\n\n<p>Is this the correct way to use the RenderAction helper and is it correct to use it in cases like that?</p>\n\n<p>UPDATE:\nActually renaming the partial view to _MessageForm renders the form correcly.</p>\n"},{"tags":["c#","asp.net-mvc","linq","entity-framework"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13092098,"title":"Translate SQL query to LINQ (subqueries)","body":"<p>Hi have a site where users can vote on images.\nThe votes are stored in table Votes where I store the Id of the submission (FK_id)</p>\n\n<p><br />\nThe tables are:</p>\n\n<p><strong>Table Submissions</strong><br />\nId (uniqueidentifier)<br />\nName (varchar(50))<br />\nImage (varchar(50))<br /></p>\n\n<p><strong>Table Votes</strong><br />\nId (int)<br />\nFk_id (foreign key to Submissions.Id)<br /></p>\n\n<p>I'm new to linq so I don't know how to translate this:</p>\n\n<pre><code>SELECT *, \n    isnull((SELECT count(*) \n    FROM Votes\n    WHERE Fk_id = S.Id      \n    GROUP BY Fk_id),0) as Votes \nFROM Submissions S\n</code></pre>\n\n<p>I wanted something like this:</p>\n\n<pre><code>List&lt;Model&gt; = (from p in ????\n               select new Model\n               {\n                   Name = p.Name,\n                   Image = p.Image,\n                   Votes = p.Votes               \n               }).ToList();\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1588,"score":2,"question_id":9500037,"title":"ASP MVC 4 Web API interface( WSDL)","body":"<p>I have get some information about ASP MVC 4 Web API .\nIt is look like good stuff for web services,\nbut how to create something like WSDL for my API like WCF service does ?\nhow 3d party component can use my service ?\nor i need to describe each my method manually ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["asp.net","asp.net-mvc","razor","html-helper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13076898,"title":"How to use multiple edit form using Html Helper","body":"<p>I want to make multiple editing page.\nBut I don't know how to use <code>TextBoxFor()</code>, <code>TextAreaFor()</code>, <code>ValidationMessageFor()</code> in a <code>foreach</code> loop.</p>\n\n<pre><code>@foreach (var note in Model.noteList)\n{\n    using(Html.BeginForm()){\n        @Html.Hidden(\"id\", note.id);\n        &lt;div class=\"userIdArea\"&gt;&lt;b&gt;@note.userId&lt;/b&gt;&lt;/div&gt;  \n        &lt;div class=\"noteArea\"&gt;@note.content&lt;/div&gt;  \n        &lt;br /&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; model.note.userId, new { @Value = note.userId })\n            @Html.ValidationMessageFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(note =&gt; note.noteList)\n            @Html.ValidationMessageFor(model =&gt; model.note.content)\n        &lt;/div&gt;\n        &lt;input type=\"submit\" value=\"Edit\" /&gt;\n    }\n}\n</code></pre>\n\n<p>The code above cannot set the textarea value, and I don't think it's the right way to do that.</p>\n\n<p>EDIT )</p>\n\n<p>I changed code like this,</p>\n\n<pre><code>@foreach (var note in Model.noteList)\n{\n    using(Html.BeginForm()){\n        @Html.Hidden(\"note.id\", note.id);\n        &lt;div class=\"userIdArea\"&gt;&lt;b&gt;@note.userId&lt;/b&gt;&lt;/div&gt;  \n        &lt;div class=\"noteArea\"&gt;@note.content&lt;/div&gt;  \n        &lt;br /&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextBoxFor(model =&gt; note.userId)\n            @Html.ValidationMessageFor(model =&gt; note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(model =&gt; note.content)\n            @Html.ValidationMessageFor(_ =&gt; note.content)\n        &lt;/div&gt;\n        &lt;input type=\"submit\" value=\"Edit\" /&gt;\n    }\n}\n</code></pre>\n\n<p>and I still have problem with using ValidationMessageFor().</p>\n\n<p>I make only one content empty and submit form then it happens like this,</p>\n\n<p><img src=\"http://i.stack.imgur.com/snCKK.jpg\" alt=\"enter image description here\"></p>\n\n<p>How should I do put ValidationMessage on right place?</p>\n\n<p>[EDIT #2]</p>\n\n<p>Yes, I have create form too in same view,</p>\n\n<p>the View code is like this,</p>\n\n<pre><code>@model MemoBoard.Models.NoteViewModel\n\n@{\n    ViewBag.Title = \"Index\";\n    Layout = \"~/Views/Shared/_Layout.cshtml\";\n}\n\n&lt;h2&gt;Note&lt;/h2&gt;\n&lt;br /&gt;&lt;br /&gt;\n@using(Html.BeginForm()){\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.note.userId)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextBoxFor(model =&gt; model.note.userId)\n        @Html.ValidationMessageFor(model =&gt; model.note.userId)\n    &lt;/div&gt;\n    &lt;div class=\"editor-label\"&gt;\n        @Html.LabelFor(model =&gt; model.note.content)\n    &lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        @Html.TextAreaFor(model =&gt; model.note.content, new { rows = 4})\n        @Html.ValidationMessageFor(model =&gt; model.note.content)\n    &lt;/div&gt;\n    &lt;input type=\"submit\" value =\"Save\" /&gt;\n} @* //End create form *@ \n\n&lt;!-- List Area --&gt;\n\n@foreach (var note in Model.noteList)\n{\n    using(Html.BeginForm()){\n        @Html.Hidden(\"note.id\", note.id);\n        @Html.EditorForModel()\n        &lt;div class=\"userIdArea\"&gt;&lt;b&gt;@note.userId&lt;/b&gt;&lt;/div&gt;  \n        &lt;div class=\"noteArea\"&gt;@note.content&lt;/div&gt;  \n        &lt;br /&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; note.userId, new { id = \"A\"})\n            @Html.ValidationMessageFor(model =&gt; note.userId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.TextAreaFor(model =&gt; note.content)\n            @Html.ValidationMessageFor(model =&gt; note.content)\n        &lt;/div&gt;\n        &lt;input type=\"submit\" value=\"Edit\" /&gt;\n    }\n}\n</code></pre>\n\n<p>And,</p>\n\n<p>Model,</p>\n\n<pre><code>public class Note\n{\n    [Key]\n    public int id { get; set; }\n\n    [Required(ErrorMessage=\"Content is required\")]\n    [DisplayName(\"Note\")]\n    public string content { get; set; }\n    public DateTime date { get; set; }\n\n    [Required(ErrorMessage = \"User ID is required\")]\n    [DisplayName(\"User ID\")]\n    public string userId {get; set;}\n    public Boolean isPrivate { get; set; }\n    public virtual ICollection&lt;AttachedFile&gt; AttachedFiles { get; set; }\n\n}\n</code></pre>\n\n<p>View Model,</p>\n\n<pre><code>public class NoteViewModel\n{\n    public IEnumerable&lt;Note&gt; noteList { get; set; }\n    public Note note { get; set; }\n}\n</code></pre>\n\n<p>Controller,</p>\n\n<pre><code>public ActionResult Index()\n{\n    var notes = unitOfWork.NoteRepository.GetNotes();\n    return View(new NoteViewModel(){noteList=notes.ToList(), note = new Note()});\n}\n\n[HttpPost]\npublic ActionResult Index(Note note)\n{\n    try\n    {\n    if (ModelState.IsValid)\n    {\n        unitOfWork.NoteRepository.InsertNote(note);\n        unitOfWork.Save();\n        return RedirectToAction(\"Index\");\n    }\n    }catch(DataException){\n    ModelState.AddModelError(\"\", \"Unable to save changes. Try again please\");\n    }\n\n    var notes = unitOfWork.NoteRepository.GetNotes();\n    return View(new NoteViewModel() { noteList = notes.ToList(), note = new Note() });\n}\n</code></pre>\n"},{"tags":["javascript",".net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13092389,"title":"Passing server side data to JavaScript via Razor","body":"<p>I have an Asp.Net MVC web application that displays 2 select inputs side by side.  The first select is populated via Razor and drives the second so when the user selects an item an Ajax call is made to populate the second drop down.  </p>\n\n<p>I need to implement a feature that will allow the page to accept an id for the second drop-down on the URL and when the page is loaded populate both selects and select the appropriate values in each.</p>\n\n<p>For example, if the drop-downs represented countries and states, the url could contain the unique id for a particular state.  The controller would then look up the associated country and pass both the country and state ids back to the page.  When this happens, the page would automatically select that country in the first select, then load the appropriate list of states in the other and select the chosen state.</p>\n\n<p>Currently, my controller returns the two ids to the page in the view model object and there is inline JavaScript that assigns them to variables.  Then some JavaScript checks if the ids are not null and takes the appropriate action to select and load the data in the select inputs.  I am not a big fan of coupling my JavaScript to my view in this way but I can't think of a better solution.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c#","asp.net-mvc","automapper"],"answer_count":4,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":3970,"score":14,"question_id":1494167,"title":"How to Configure AutoMapper Once Per AppDomain","body":"<p>My current project with assemblies for the domain model, MVC web application, and unit tests. How can I set up the AutoMapper configuration so that all assemblies reference the same configuration? </p>\n\n<p>I would guess that I could put items in Global.asax for the web app, but how can I use that in the unit tests? Also, if the config is in Global.asax, will the domain model pick up the map?</p>\n\n<p>Many thanks,</p>\n\n<p>KevDog.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","signalr"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":534,"score":0,"question_id":13041169,"title":"Using signalR to display online users in real time, good idea?","body":"<p>I want to put a count of how many users are online and make it update in real time as users join so everyone knows how many users are online.  I am wondering if this would be bad by design because as more and more users come on it would have to send a message to possibly thousands-millions of clients.  Now, I understand you can always scale to handle the load, but is that even a good idea to do that?  will it be light on the server or will it consume a lot of resources to have to update the amount of online users every time someone joins?</p>\n"},{"tags":["javascript","asp.net-mvc","requirejs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13075886,"title":"Starting an ASP.NET MVC 4 project. Is it necessary to use RequireJS if I'm using bundling?","body":"<ul>\n<li>If RequireJS makes it so that multiple js files are combined into a\nsingle main.js file, is it essentially the same as ASP.NET's script\nbundling functionality?</li>\n<li>Would the only bonus of using RequireJS in <em>addition</em> to bundling be the ability to have certain scripts be loaded according to RequireJS configuration?</li>\n</ul>\n\n<p>I'm very new to both bundling and RequireJS, but after doing some reading, it seems like bundling takes care of multiple requests to load several js files. Are there any other things I might be missing out on with regards to using RequireJS with bundling?</p>\n"},{"tags":["c#","asp.net-mvc","image-uploading"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":4,"view_count":57,"score":-4,"question_id":13090161,"title":"Display uploaded images and also display many images stored in database using ASP.Net MVC","body":"<p>I'm using asp.net MVC and sql server. I have created a page that get some information from user like name,price,... and also one image, and the page repeat it for 30 times. It means every time that user submit the firm all of the information save to database and fields become clear and the user must submit the next information. Now I want that every time that user submit the form the page display the previous uploaded images beside the it. But I don't know how to display the uploaded image. and also I want to know how to display all of the previous images. Please help me and show me some code! Many Thanks.</p>\n"},{"tags":["c#","sql-server","asp.net-mvc","charts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":246,"score":0,"question_id":8489730,"title":"chart.GetHtmlImageMap not working as expected","body":"<p>Gents,</p>\n\n<p>I need help to create an imagemap to my web app's charts. After reading many resources, here and on the web, I end up with the following problem:</p>\n\n<p>The Problem:\n   On my view I' am calling @Html.Action(RenderMyMap), that renders an &lt;map&gt; tag, with an atribute coords=0,0,0,0. </p>\n\n<p>What Am I doing:\nMy project is organized this way:</p>\n\n<p>-Core.cs: Class responsable to create the System.Web.UI.DataVisualization.Charting.Chart objects;\n   -ClientController: With an existing Chart object, I'm saving it with Chat.SaveImage(memoryStream,format), storing it in a session variable as a byte array, and returning a ContentResult object, like in return Content(chart.GetHtmlImageMap());\n   -ClientController: After that, I'am using the session variable to actually render the chart, like in return File(chartByteArray,\"image/png\");\n   -Index.cshtml: Finally in my view I'am calling method on the ClientController to render the map and the chart.</p>\n\n<p>My setup:\n.NET 4.0, MVC3, SQL Server 2008.</p>\n\n<p>Bellw goes the code of one of my methods, on the ClientController, to generate and return n ImageMap.</p>\n\n<pre><code>    public ActionResult ChartMapGetClientsByType()\n    {\n        System.Web.UI.DataVisualization.Charting.Chart chart = null;\n        if (Session[\"GraficoClientePorTipo\"] != null)\n        {\n            chart = (System.Web.UI.DataVisualization.Charting.Chart)Session[\"GraficoClientePorTipo\"];\n            Session.Remove(\"GraficoClientePorTipo\");\n        }\n        else\n        {\n            chart = MeuMRP.Core.Chart.CreateChartImageMap(\"GraficoClientePorTipo\", SeriesChartType.Pie);\n            chart.IsMapEnabled = true;\n            System.IO.MemoryStream ms = new System.IO.MemoryStream();\n            chart.SaveImage(ms, ChartImageFormat.Png);\n            Session[\"GraficoClientePorTipo\"] = ms.ToArray();\n        }\n        return Content(chart.GetHtmlImageMap(\"GraficoClientePorTipo\"));\n    }\n</code></pre>\n\n<p>What Am I doing wrong?</p>\n"},{"tags":["asp.net-mvc","t4","mvcscaffolding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13090663,"title":"MvcScaffolding for a Services/Repository pattern?","body":"<p>Does anybody know of any examples of an MvcScaffolding T4 template for building Services/Repository pattern?</p>\n\n<p>I know that MvcScaffolding comes with a Repository scaffold built in, but I'd like to have it also build a Services layer at the same time.  I've spent an hour or so looking around but haven't seen what I'm looking for.</p>\n\n<p>Suggestions?  Thanks!</p>\n"},{"tags":["asp.net-mvc","database-connection","aspnetdb"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13078123,"title":"ASP.NET MVC3 Aspnetdb Sql Production Server","body":"<p>I created a fully functioning web application (MVC MusicStore, downloaded from here: <a href=\"http://mvcmusicstore.codeplex.com/\" rel=\"nofollow\">http://mvcmusicstore.codeplex.com/</a>).</p>\n\n<p>The application created an ASPNETDB.MDF file, and a MusicStoreDB.mdf file.\nI used SQL Server Management 2008 R2.</p>\n\n<p>The problem is that after I deploy the application on a host server,\nwhen clicking on \"Register\" link, the default error page is displayed.\nWhen trying to log in, the default error page is displayed yet again.\nIt appears that the host server (which is SQL 2008 compatible) can read data from the MusicStoreDB.mdf file, but has no access to the ASPNETDB.MDF file. It is not possible to log in or register users.</p>\n\n<p>I did change the connection string in the web.config file to the host server address, it works fine.\nI also created the ASPNETDB tables in the MusicStoreDB by using aspnet_regsql, but the errors persist.\nAlso, the MusicStoreDB file contained no data after Publish (though there is sample data in a cs file). I know the host server can read data from this file because I manually added data through a local SQL server.</p>\n\n<p>I have two questions:\na. What are the steps to correctly deploy the application and databases so that it would be possible to register and log in? How can the <em>both</em> mdf files work in consort?\nb. How can the data in the SampleData.cs file be recreated in the MusicStoreDB.mdf file?</p>\n\n<p>I haven't been able to find an answer over the web, though I've been searching for a week...</p>\n"},{"tags":["asp.net-mvc","asp.net-roles"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13089361,"title":"GenericPrincipal roles not available in MVC views","body":"<p>In our MVC app, we're by-passing the RolesProvider in favor of just caching our roles in a cookie that will be passed around. Following several suggestions around the interwebs, we're leveraging the <code>Application_AuthenticateRequest</code> event, like so:</p>\n\n<pre><code>    protected void Application_AuthenticateRequest(Object sender, EventArgs e)\n    {\n        var user = HttpContext.Current.User;\n        if (user == null || !user.Identity.IsAuthenticated)\n        {\n            return;\n        }\n\n        // read the roles from the cookie and set a custom generic principal\n        var fi = (FormsIdentity)HttpContext.Current.User.Identity;\n        var httpCookie = HttpContext.Current.Request.Cookies[\"Roles\"]; // custom cookie set during authentication\n        if (httpCookie != null)\n        {\n            string rolesCookie = httpCookie.Value;\n            var pmUserRoles = rolesCookie.Split(',');\n            GenericPrincipal gp = new GenericPrincipal(fi, pmUserRoles);\n            HttpContext.Current.User = gp;\n        }\n    }\n</code></pre>\n\n<p>I'm stepped through that method and threw in a couple conditionals with some of our roles, and immediately after the current User is set, <code>User.IsInRole(\"rolename\")</code> works like a charm.</p>\n\n<p>But then, when trying to make the same call in a view:</p>\n\n<pre><code>@if(Request.IsAuthenticated)\n{\n    if (User.IsInRole(\"role1\") || User.IsInRole(\"role2\"))\n    {\n        &lt;!-- show something --&gt;\n    }\n    else if (User.IsInRole(\"role3\"))\n    {\n        &lt;!-- show something else --&gt;\n    }\n}\n</code></pre>\n\n<p>The roles can't be accessed. When I dig into the User at this point, it looks like the roles don't even exist, right after I confirmed that the User has them at the end of the <code>AuthenticateRequest</code> event.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/8717085/setting-roles-by-using-genericprincipal-instance\">This question</a> has similar problems, I was going to just comment there but I guess I can't because of my low rep - but it looks like this isn't just an issue with me.</p>\n\n<p>I also looked at <a href=\"http://stackoverflow.com/questions/2767616/asp-net-replace-genericprincipal\">this question</a> which has a similar approach, but this is giving me the same result.</p>\n\n<p>Any suggestions or comments on what's going on?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13075604,"title":"ASP.Net MVC3 Routing Issue","body":"<p>I am working on a deal website and have defined the following route in the global.asax.</p>\n\n<pre><code>routes.MapRoute(\n    \"AboutFooter\",\n    \"about-bicker-shop\",\n    new { controller = \"Footer\", action = \"About\" }\n);\n\nroutes.MapRoute(\n    \"ContactFooter\",\n    \"contact-bickershop\",\n    new { controller = \"Footer\", action = \"Contact\" }\n);\n\nroutes.MapRoute(\n    \"PrivacyPolicyFooter\",\n    \"privacy-policy\",\n    new { controller = \"Footer\", action = \"PrivacyPolicy\" }\n);\n\nroutes.MapRoute(\n    \"TermsAndConditionsFooter\",\n    \"terms-and-conditions\",\n    new { controller = \"Footer\", action = \"TermsAndConditions\" }\n);\n\nroutes.MapRoute(\n    \"SiteMapFooter\",\n    \"sitemap\",\n    new { controller = \"Footer\", action = \"SiteMap\" }\n);\n\nroutes.MapRoute(\n    \"FAQFooter\",\n    \"faq\",\n    new { controller = \"Footer\", action = \"FAQ\" }\n);\n\nroutes.MapRoute(\n    \"UnsubscribeFooter\",\n    \"unsubscribe\",\n    new { controller = \"Footer\", action = \"Unsubscribe\" }\n);\n\nroutes.MapRoute(\n    \"GetDealsByCity\",\n    \"daily-bickers/{cityName}\",\n    new { controller = \"Home\", action = \"Home\" }\n);\n\nroutes.MapRoute(\n    \"GetDealsbyCategory\",\n    \"daily-bickers/{cityname}/{category}\",\n    new { controller = \"Home\", action = \"GetDealsByCategory\" }\n);\n\nroutes.MapRoute(\n    \"GetDealDetails\",\n    \"{cityName}/{dealName}\",\n    new { controller = \"Home\", action = \"GetDealsByDealName\" }\n);\n\nroutes.MapRoute(\n    \"DealCheckout\",\n    \"{cityName}/{dealName}/checkout\",\n    new { controller = \"Home\", action = \"CheckoutDealByDealName\" }\n);\n\nroutes.MapRoute(\n    \"Default\", // Route name\n    \"{controller}/{action}/{id}\", // URL with parameters\n    new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>It works fine till the time I am viewing the details of the deal but I am getting an error when I click on the buy button to buy the deal. </p>\n\n<p>On further research I found that on clicking the buy button, the code is invoking the <code>GetDealsByDealName</code> action and not the action <code>CheckoutDealByDealName</code>. Please suggest me the solution.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13083348,"title":"JavaScript inside Section in PartialView","body":"<p>I render section in HEAD od HTML page and PartialView in the middle of the page like the code shows below</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    @RenderSection(\"Scripts\", false)\n&lt;/head&gt;\n.....\n    @Html.Partial(\"_MenuAdmin\")\n&lt;/html&gt;\n</code></pre>\n\n<p>In PartialView _MenuAdmin I have some javascript.</p>\n\n<pre><code>@section Scripts\n{\n    &lt;script type=\"text/javascript\"&gt;\n        alert(\"Test\");\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p>So, the problem is that same JavaScript code doesn't loaded. If instead PartialView I use View JavaScript loaded properly.</p>\n\n<p>How I can load JavaScript in my sample?</p>\n"},{"tags":["javascript","jquery","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13087408,"title":"how to give virtual path for filtering data in MVC","body":"<p>Hi am filtering data according to dropdown list</p>\n\n<p>i want to specify path like</p>\n\n<pre><code>/UserManagement/List?filter=E\n</code></pre>\n\n<p>when i filter data according to character 'E'</p>\n\n<p>i have used script like</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n        $(document).ready(function () {\n\n            $(function () {\n                $('#ddlUserTypeList').change(function () {\n                    var UserTypeListId = $(\"#ddlUserTypeList option:selected\").val();\n                    debugger;\n                    if (UserTypeListId != \"L\") {\n                        debugger;                            \n                        $.post(\"/UserManagement/List?filter=E\");                            \n                    }\n                    else {\n                        debugger;\n                        //alert(\"learner\");\n                        $.post(\"/UserManagement/List?filter=L\");\n                        //alert(\"learner\");\n                    }                        \n            });\n            });\n        });\n            &lt;/script&gt;\n</code></pre>\n\n<p>Its not redirecting to proper url </p>\n\n<p>its taking /UserManagement/List this path</p>\n\n<p>In controller i have given</p>\n\n<p>public ActionResult List(string sortOrder, string currentFilter, string searchString, int? page, string filter)</p>\n\n<p>how the path will change according to filter </p>\n"},{"tags":["jquery","asp.net-mvc","post"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13087997,"title":"How to Pass ID to MVC ActionResult using jQuery?","body":"<p>How do I pass the id retrieved from radiobuttonfor to MainPage controller - Edit1 actionresult in View. Anyhelp will be appreciated! Thanks!</p>\n\n<p>//View in for loop to display contents and radiobutton</p>\n\n<pre><code>@foreach (var item in Model)\n            {\n                &lt;tr&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.SurveyTitle)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.DateCreated)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.DateClosing)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.DisplayFor(modelItem =&gt; item.User)\n                    &lt;/td&gt;\n                    &lt;td&gt;\n                        @Html.RadioButtonFor(modelItem =&gt; item.SurveyId, new {id = item.SurveyId})\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            }\n\n\n          &lt;button type=\"submit\" class=\"btn btn-primary\" id=\"edit\"&gt;Edit&lt;/button&gt;\n</code></pre>\n\n<p>//Script for button to detect which radiobutton id is selected and submit</p>\n\n<pre><code>&lt;script&gt;            \n        $('#edit').click(function () {\n\n            var id = $('input[type=radio]:checked').val();\n            alert(id);\n\n\n        });\n\n         &lt;/script&gt;\n</code></pre>\n\n<p>//Controller to get the id and take surveyid out      </p>\n\n<pre><code>[HttpPost]\n             public ActionResult Edit1(int id=0)\n            {\n                survey survey = db.surveys.Single(s =&gt; s.SurveyId == id);\n                if (survey == null)\n                {\n                    return HttpNotFound();\n                }\n                return View(survey);\n            }\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","entity-framework-5","asp.net-mvc-validation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":13073756,"title":"MVC Validation Fundamentals (with Entity Framework)","body":"<p>MVC Validation Fundamentals (with Entity Framework)</p>\n\n<p>Scenario:</p>\n\n<p>I have a model class as below (autogenerated via Entity Framework EF.x DbContext Generator).</p>\n\n<p>(There is no view model at the moment).</p>\n\n<pre><code>public partial class Activity\n{\n    public int Id { get; set; }\n\n    public byte Progress { get; set; }\n    public decimal ValueInContractCurrency { get; set; }\n    public System.DateTime ForecastStart { get; set; }\n    public System.DateTime ForecastEnd { get; set; }\n\n    public int DepartmentId { get; set; }   \n    public int OwnerId { get; set; }\n    public int StageId { get; set; }\n    public int StatusId { get; set; }\n\n    public virtual Department Department { get; set; }\n    public virtual Owner Owner { get; set; }\n    public virtual Stage Stage { get; set; }\n    public virtual Status Status { get; set; }\n}\n</code></pre>\n\n<p>When I submit a blank form on the strongly-typed view, I get these validation messages:</p>\n\n<p>The Progress field is required.</p>\n\n<p>The ValueInContractCurrency field is required.</p>\n\n<p>The ForecastStart field is required.</p>\n\n<p>The ForecastEnd field is required.</p>\n\n<p>i.e. all the fields in the db table.</p>\n\n<p>If I fill these in, and submit again, then the controller gets called. The controller then returns back to the view page due to IsValid being false.</p>\n\n<p>The screen is then redisplayed with these validation messages:</p>\n\n<p>The StageId field is required.</p>\n\n<p>The DepartmentId field is required.</p>\n\n<p>The StatusId field is required.</p>\n\n<p>The OwnerId field is required.</p>\n\n<p>i.e. all the foreign key fields in the db table (these are also all select boxes).</p>\n\n<p>If I fill these in, the form then submits succesfully and is saved to the db.</p>\n\n<p>Questions:</p>\n\n<ol>\n<li><p>Where is the validation coming from, given that I have not used any [Required] attributes? Is this something to do with entity framework?</p></li>\n<li><p>Why is the form not validating everything right away client-side, what's different about foreign keys (or select boxes) that they are only checked by IsValid() even though they are empty and therefore clearly invalid?</p></li>\n<li><p>How do you make everything get validated in one step (for empty fields), so the user does not have to submit the form twice and all validation messages are shown at once? Do you have to turn off client side validation?</p></li>\n</ol>\n\n<p>(I tried adding [Required] attributes to the foreign key fields, but that didn't seem to make any difference (presumably they only affect IsValid). I also tried calling Html.EnableClientValidation() but that didn't make any difference either).</p>\n\n<p>4..Lastly, I've seen people using [MetadataType[MetadataType(typeof(...)]] for validation. Why would you do that if you have a viewmodel, or is it only if you don't?</p>\n\n<p>Obviously I'm missing some fundamentals here, so in addition if anyone knows of a detailed tutorial on how exactly the MVC validation process works step-by-step including javascript/controller calls, rather than just another essay on attributes, then I could do with a link to that too :c)</p>\n\n<hr>\n\n<p>More info for Mystere Man:</p>\n\n<p>Solution setup as follows:</p>\n\n<p>.NET4</p>\n\n<p>MVC3</p>\n\n<p>EF5 </p>\n\n<p>EF5.x Db Context Generator </p>\n\n<p>\"Add Code Generation Item\" used on edmx design surface to associate EF.x Db Context Generator files (.tt files)</p>\n\n<p>Controller looks like this:</p>\n\n<pre><code>    // GET: /Activities/Create\n    public ActionResult Create()\n    {\n        ViewBag.DepartmentId = new SelectList(db.Departments, \"Id\", \"Name\");\n        ViewBag.OwnerId = new SelectList(db.Owners, \"Id\", \"ShortName\");\n        ViewBag.ContractId = new SelectList(db.Contracts, \"Id\", \"Number\");\n        ViewBag.StageId = new SelectList(new List&lt;string&gt;());\n        ViewBag.StatusId = new SelectList(db.Status.Where(s =&gt; s.IsDefaultForNewActivity == true), \"Id\", \"Name\");\n        return View();\n    } \n\n\n    // POST: /Activities/Create\n    [HttpPost]\n    public ActionResult Create(Activity activity)\n    {\n        if (ModelState.IsValid)\n        {\n            db.Activities.Add(activity);\n            db.SaveChanges();\n            return RedirectToAction(\"Index\");  \n        }\n\n        ViewBag.DepartmentId = new SelectList(db.Departments, \"Id\", \"Name\");\n        ViewBag.OwnerId = new SelectList(db.Owners, \"Id\", \"ShortName\");\n        ViewBag.ContractId = new SelectList(db.Contracts, \"Id\", \"Number\");\n        ViewBag.StageId = new SelectList(db.Stages, \"Id\", \"Number\");\n        ViewBag.StatusId = new SelectList(db.Status, \"Id\", \"Name\");\n        return View(activity);\n    }\n</code></pre>\n\n<p>View is like this:</p>\n\n<pre><code>&lt;!-- this refers to  the EF.x DB Context class shown at the top of this post --&gt;\n@model RDMS.Activity  \n\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n\n\n@using (Html.BeginForm()) {\n    @Html.ValidationSummary(true)\n    &lt;fieldset&gt;\n        &lt;legend&gt;Activity&lt;/legend&gt;\n\n\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.StageId, \"Stage\")\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.DropDownList(\"StageId\", String.Empty)\n            @Html.ValidationMessageFor(model =&gt; model.StageId)\n        &lt;/div&gt;\n        &lt;div class=\"editor-label\"&gt;\n            @Html.LabelFor(model =&gt; model.Progress)\n        &lt;/div&gt;\n        &lt;div class=\"editor-field\"&gt;\n            @Html.EditorFor(model =&gt; model.Progress)\n            @Html.ValidationMessageFor(model =&gt; model.Progress)\n        &lt;/div&gt;\n\n    &lt;!-- ETC...--&gt;\n\n        &lt;p&gt;\n            &lt;input type=\"submit\" value=\"Create\" /&gt;\n        &lt;/p&gt;\n    &lt;/fieldset&gt;\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","visual-studio-2010"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":160,"score":0,"question_id":10007748,"title":"VS2010 Project doesnt build but doesnt show any errors or warnings","body":"<p>Im stumped: <code>0 Errors, 0 Warnings, 0 Messages</code> but  the <code>output</code> window says<br> <code>Build: 1 succeeded or up-to-date, 1 Failed, 0 Skipped</code></p>\n\n<p>I have two projects, <code>A</code> is a web application, <code>B</code> is a dll referenced by <code>A</code>. <code>B</code> by its self builds ok.</p>\n\n<p>What could be wrong?</p>\n"},{"tags":["c#","asp.net-mvc","mvc","model-validation","validationattribute"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":232,"score":4,"question_id":12938576,"title":"Best approach for complex model/submodel validation (MVC)","body":"<h1>Problem</h1>\n\n<p>I know there is a lot of ways of doing Model validation within MVC, and there is quite a lot of documentation regarding this topic. However, I'm not quite sure what's the best approach for validating properties of the <strong>Model</strong> which are <em>\"Sub Model\"</em> of <strong>same type</strong>. </p>\n\n<p>Keep in mind the following</p>\n\n<ul>\n<li>I still want to to take profit of the <code>TryUpdateModel/TryValidateModel</code> methods</li>\n<li>Each of these <em>\"sub models\"</em> have strongly typed views</li>\n<li>There is one strongly typed view for the <code>MainModel</code> class that renders the overall display view</li>\n</ul>\n\n<p>It might sound a little confusing but i'll throw in some code to clarify. Take as example the following classes:</p>\n\n<p><strong>MainModel:</strong></p>\n\n<pre><code>class MainModel{\n    public SomeSubModel Prop1 { get; set; }\n    public SomeSubModel Prop2 { get; set; }\n}\n</code></pre>\n\n<p><strong>SomeSubModel:</strong></p>\n\n<pre><code>class SomeSubModel{\n      public string Name { get; set; }\n      public string Foo { get; set; }\n      public int Number { get; set; }\n}\n</code></pre>\n\n<p><strong>MainModelController:</strong></p>\n\n<pre><code>class MainModelController{\n\n    public ActionResult MainDisplay(){\n         var main = db.retrieveMainModel();\n         return View(main); \n    }\n\n    [HttpGet]\n    public ActionResult EditProp1(){\n         //hypothetical retrieve method to get MainModel from somewhere\n         var main = db.retrieveMainModel();\n\n         //return \"submodel\" to the strictly typed edit view for Prop1\n         return View(main.Prop1);\n    }\n\n    [HttpPost]\n    public ActionResult EditProp1(SomeSubModel model){\n\n         if(TryValidateModel(model)){\n              //hypothetical retrieve method to get MainModel from somewhere\n              var main = db.retrieveMainModel();\n              main.Prop1 = model;\n              db.Save();\n\n              //when succesfully saved return to main display page \n              return RedirectToAction(\"MainDisplay\");\n         }\n         return View(main.Prop1);\n    }\n\n    //[...] similar thing for Prop2 \n    //Prop1 and Prop2 could perhaps share same view as its strongly \n    //typed to the same class\n}\n</code></pre>\n\n<p>I believe this code all make sense until now (correct me if it's not the case) because <code>TryValidateModel()</code> is validating against a model with no <code>ValidationAttribute</code>. </p>\n\n<p>The problem lies here, where would be the best place, or what would be the best and most elegant way to have <strong>different validation constraints</strong> for <code>Prop1</code> and <code>Prop2</code> while still taking advantage of <code>TryValidateModel()</code> and not filling the Edit method with conditional statements and <code>ModelState.AddModelError()</code></p>\n\n<p>Usually you could have validation attributes in the <code>SomeSubModel</code> class, but it wouldn't work in this case, because there is different constraints for each property. </p>\n\n<p>Other option is that there could be Custom validation attribute in the <code>MainModel</code> class, but it also wouldn't work in this case because the <code>SomeSubModel</code>object is passed directly to the view and when validating has no reference to its <code>MainModel</code> object.</p>\n\n<p>The only left option I can think about is a ValidationModel for each property, but I am not quite what would be the best approach for this.</p>\n\n<h1>Solution</h1>\n\n<p>Here's solution I implemented, based of @MrMindor's answer.</p>\n\n<p><strong>Base ValidationModel class:</strong></p>\n\n<pre><code>public class ValidationModel&lt;T&gt; where T : new()\n{\n    protected ValidationModel() {\n        this.Model = new T();\n    }\n    protected ValidationModel(T obj) { \n        this.Model = obj; \n    }\n\n    public T Model { get; set; }\n}\n</code></pre>\n\n<p><strong>Validation Model for Prop1</strong></p>\n\n<pre><code>public class Prop1ValidationModel:ValidationModel&lt;SomeSubModel&gt;\n{\n    [StringLength(15)]\n    public string Name { get{ return base.Model.Name; } set { base.Model.Name = value; } }\n\n    public Prop1ValidationModel(SomeSubModel ssm)\n        : base(ssm) { }\n}\n</code></pre>\n\n<p><strong>Validation Model for Prop2</strong></p>\n\n<pre><code>public class Prop2ValidationModel:ValidationModel&lt;SomeSubModel&gt;\n{\n    [StringLength(70)]\n    public string Name { get{ return base.Model.Name; } set { base.Model.Name = value; } }\n\n    public Prop2ValidationModel(SomeSubModel ssm)\n        : base(ssm) { }\n}\n</code></pre>\n\n<p><strong>Action</strong></p>\n\n<pre><code>[HttpPost]\npublic ActionResult EditProp1(SomeSubModel model){\n\n     Prop1ValidationModel vModel = new Prop1ValidationModel(model);\n     if(TryValidateModel(vModel)){\n\n          //[...] persist data\n\n          //when succesfully saved return to main display page \n          return RedirectToAction(\"MainDisplay\");\n     }\n     return View(model);\n}\n</code></pre>\n"},{"tags":["asp.net-mvc","vb.net","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13088948,"title":"MVC 3 Model Properties Without Binding","body":"<p>Is it possible to include a property in a model that is not bound to the database?  For instance:</p>\n\n<pre><code>Public Class Tbl_Forum_Topic\n\n    &lt;Key()&gt; Public Property FTopic_ID() As Integer\n    &lt;ForeignKey(\"Tbl_Forum\")&gt; _\n    Public Property FTopic_Forum_ID() As Integer\n    Public Property FTopic_Employee_ID() As Integer\n    Public Property FTopic_Resource_ID() As Integer\n    Public Property FTopic_Title() As String\n    Public Property FTopic_Content() As String\n    Public Property FTopic_Create_Date() As Nullable(Of Date)\n    Public Property FTopic__Deleted() As Nullable(Of Boolean)\n    Public Property FTopic_Deleted_Date() As Nullable(Of Date)\n    Public Property FTopic_Status() As Nullable(Of Boolean)\n    Public Property FTopic_Publish() As Nullable(Of Boolean)\n\n    Public Overridable Property Tbl_Forum() As Tbl_Forum\n\n    Public Overridable Property Tbl_Forum_Replies() As ICollection(Of Tbl_Forum_Reply)\n\n    Public Overridable Property Last_Reply_User_Name() As String\n\nEnd Class\n</code></pre>\n\n<p>The last item is called <code>Last_Reply_User_Name()</code>.  It is not in my database, but I want to loop through and perform a calculation in my controller action to set it based on values from other database tables.  I get an error <code>Invalid column name 'Last_Reply_User_Name'.</code> when I try this code.</p>\n\n<p>Thank you.</p>\n"},{"tags":["asp.net-mvc","entity-framework","ef-code-first"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13088260,"title":"Entity Framework One-Zer-One different behavior","body":"<p>Suppose you want to create a parent-child relationship in a table of users that will be the type of zero to one, we want to add further in the same way gender.</p>\n\n<pre><code>public class Gender\n{\n    [Key]\n    public virtual int GenderID { get; set; }\n\n    public virtual string GenderName { get; set; }\n\n    public virtual ICollection&lt;UserProfile&gt; UserProfiles { get; set; }\n}\n</code></pre>\n\n<p>and Userprofile </p>\n\n<pre><code>public class UserProfile\n{\n\n    [Key]\n    public virtual int UserId { get; set; }\n\n    public virtual UserProfile UserParent { get; set; }\n\n    public virtual int? ParentUserId { get; set; }\n\n    public virtual String UserName { get; set; }\n\n    public virtual Gender Gender { get; set; }\n\n    public virtual int? GenderID { get; set; }\n\n  }\n</code></pre>\n\n<p>for clarity</p>\n\n<pre><code>       modelBuilder.Entity&lt;UserProfile&gt;()\n            .HasOptional(c =&gt; c.UserParent);\n\n        // User -&gt; Gender\n        modelBuilder.Entity&lt;UserProfile&gt;()\n            .HasOptional(g =&gt; g.Gender);\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/IhvGJ.png\" alt=\"enter image description here\"></p>\n\n<p>Everything looks good, but at the moment I can not retrieve the data obtained from the Parent UserName.</p>\n\n<pre><code>   public IQueryable&lt;UserProfileListViewModel&gt; UserAllVM\n    {\n        get\n        {\n            var uservm = context.UserProfiles\n                .Select(l =&gt; new UserProfileListViewModel\n                { \n                    UserId = l.UserId,\n                    UserName = l.UserName,\n                    ParentUserId = l.ParentUserId ?? 0,\n                    //ParentUserName = this.context.UserProfiles.Where(e =&gt; e.UserId == l.ParentUserId).FirstOrDefault().UserName ?? \"\",\n                    ParentUserName = l.UserParent.UserName, **// this way make always null**\n                    GenderID = l.GenderID ?? 0,\n                    GenderName = l.Gender.GenderName ?? \"\",\n                });\n\n            return uservm;\n        }\n    }\n</code></pre>\n\n<p>Commented out the way now obtains parent UserName. Question is why I can't retrive Parent UserName - I miss sth ?</p>\n\n<p>Tx for help</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","debugging","override"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12211585,"title":"Override BuildManagerViewEngine.FileExists Method is called only in debug mode (MVC 3)","body":"<p>I'm building a plugin architecture with MVC 3, where the plugins are simply another MVC 3 application (.dll with views embedded).</p>\n\n<p>I've a class (PluginViewEngine) that inherits from RazorViewEngine and in that class I've the override for the method FileExists, where I check if the View virtualPath is from a plugin or not.</p>\n\n<p>In the Global.asax.cs file I call:</p>\n\n<pre><code>ViewEngines.Engines.Clear();\nViewEngines.Engines.Add(new PluginViewEngine(arrayWithViewAllViewLocations));\n</code></pre>\n\n<p>If I've  in the web.config file every time I call an action (from a plugin or not) the method FileExist is called and everything works, but if I remove the debug=\"true\", the method FileExist is only called for the non-plugin actions.</p>\n\n<p>I can't use debug to try to figure it out, because in debug mode everything works just fine.</p>\n\n<p>Can someone give me a clue why this happens or how to figure it out?</p>\n\n<p>Many thanks!</p>\n"},{"tags":["asp.net","asp.net-mvc","saas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":26,"score":-1,"question_id":13088326,"title":"Open source ASP.NET MVC project for a SaaS application","body":"<p>I am working on a personal project that offers a service online. I'd like put this out to the public. I don't want to reinvent the wheel and use an existing template/open source project and add my service specific functionality.</p>\n\n<p>The features I am looking for are:</p>\n\n<ol>\n<li>Support for different roles (I need to have an admin role, customer and preferred customer roles)</li>\n<li>An admin section where admins can manage user accounts, login as with users credentials for providing support</li>\n<li>Customer pages that are role specific (Ex: Some functionality can be used by preferred customers but not non preferred ones)</li>\n<li>Preferably a pricing/plans page with payment gateway integration</li>\n</ol>\n\n<p>These are some of the basic pages available in most of service sites online. Is there a MVC 3 (preferably 4) written in C# that I can use as a shell to build upon?</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","application-pool","worker-process"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13012414,"title":"Can I get the Process ID of a worker process in a web application?","body":"<p>I have an application that runs in an application pool that has muliple worker processes.</p>\n\n<p>I need to access the process id in the controller to check some issues I have since I changed the application pool to use multiple worker processes.</p>\n"},{"tags":[".net","asp.net-mvc","mvc","asp.net-webforms"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":13085689,"title":".Net Or .net MVC ? Beginer in need of an opinion","body":"<p>When I began learning ASP I was told to download Visual Web Developer 2008 Express. In essence I wanted to start building sites with valid log ins, possible grocery carts and simple profile for users. I realized that I am going to have to dig deeper than simply a tutorial series and found myself choosing between classic ASP.NET and MVC. However, search results aren't very clear to me as to which I should be learning. \nIn order to make sites as listed above would you suggest learning MVC or classic ASP.NET? In a nutshell why?</p>\n"},{"tags":["asp.net-mvc","razor","dataannotations"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":982,"score":2,"question_id":7717690,"title":"Requiring a checkbox is checked using CheckBoxFor","body":"<p>I need to have a checkbox (for agreeing to terms) required on an MVC3 page.</p>\n\n<p>Here is my model:</p>\n\n<pre><code>[Required]\n[Display(\"I agree to the terms.\")]\npublic bool Agreement { get; set; }\n</code></pre>\n\n<p>Here is my view:</p>\n\n<pre><code>@Html.CheckBoxFor(m =&gt; m.Agreement)\n</code></pre>\n\n<p>However, the validation isn't happening -- it allows the form to be submitted regardless.</p>\n\n<p>I found that CheckBoxFor renders an additional hidden field, but I even tried rendering my own checkbox, and it still isn't getting validated:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"Agreement\" id=\"Agreement\" value=\"true\" data-val=\"true\"\n    data-val-required=\"You must agree to the terms before proceeding.\" /&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["c#","asp.net-mvc","pdf","pdf-generation"],"answer_count":0,"favorite_count":3,"up_vote_count":3,"down_vote_count":1,"view_count":113,"score":2,"question_id":13070912,"title":"Is There A Free C# PDF Generator That Works In Medium Trust?","body":"<p>I have been looking through the usual suspects of PDF generators for C# (iTextSharp and PDFSharp etc).</p>\n\n<p>The problem is none of them work in a medium trust environment. Does anyone know of a library that does 100% work in medium trust? Preferably free, but at most $100 or $200?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Before someone comments iTextSharp works in medium trust if you change the <code>assembly.cs</code> to allow partially trusted callers, it doesn't. I have tried all the 'hacks' and it simply does not work in a medium trust environment - you get the following error even with the partially trusted caller line added.</p>\n\n<pre><code>Request for the permission of type 'System.Security.Permissions.\nSecurityPermission, mscorlib, Version=4.0.0.0, Culture=neutral, \nPublicKeyToken=b77a5c561934e089' failed.\n</code></pre>\n"},{"tags":["asp.net-mvc","session","dns","area"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13087207,"title":"asp.net mvc4 cross domain session lost","body":"<p>I'm creating a new web application using ASP.net MVC4 </p>\n\n<p>our application web site runs on 2 doamin names www.domain1.com &amp; www.domain2.com</p>\n\n<p>since there are lots of common controllers/view i implemented Areas that are bound to the domain</p>\n\n<pre><code>public override string AreaName\n        {\n            get\n            {\n                return \"NS1\";\n            }\n        }\n        public override void RegisterArea(AreaRegistrationContext context)\n        {\n            context.MapRoute(\n            \"NS1_default\", \"{controller}/{action}\",\n            new { controller = \"Home\", action = \"Index\" },\n            new { hostname = new areaRedirect(\"www.domain1.com\") }\n        ).DataTokens[\"UseNamespaceFallback\"] = true;\n        }\n</code></pre>\n\n<p>And for domain2</p>\n\n<pre><code>public override void RegisterArea(AreaRegistrationContext context)\n    {\n        context.MapRoute(\n        \"NS2_default\", \"{controller}/{action}\",\n        new { controller = \"Home\", action = \"Index\" },\n        new { hostname = new areaRedirect(\"www.domain1.com\") }\n        ).DataTokens[\"UseNamespaceFallback\"] = true;\n    }\n</code></pre>\n\n<p>This works fine and does everything i need BUT..</p>\n\n<p>when i switch from one area to the other i loose my logged in session.</p>\n\n<p>is there a way to stay logged in? the account controller is common to both areas. </p>\n\n<p>so basically same app, same server just that my namespace happens to be a domain name</p>\n\n<p>instead of seeing www.somedomain/domain1/action we get www.domain1/action</p>\n\n<p>Thanks for your time </p>\n"},{"tags":["asp.net-mvc","mvc","view","model","alias"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13087424,"title":"In MVC is there a way to Alias the Model Properties to display in a html.Labelfor","body":"<p>In my users form I want to use the html.Labelfor  helper, but instead of  Model Property name of CatName, I would like  Category Name Instead. I know I could put this in a , but I have to reuse the names over and over. Below is example.</p>\n\n<p>Model Property:</p>\n\n<pre><code>public string CatName { get; set; }\n</code></pre>\n\n<p>VIEW:</p>\n\n<pre><code>@Html.LabelFor(model =&gt; model.CatName)  //Displays CatName , I want Category Name\n</code></pre>\n"},{"tags":["jquery","asp.net-mvc","jquery-plugins"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12507469,"title":"Jquery loads only after F5 in IE","body":"<p>I am using Jcrop jQuery to crop image in MVC3 application.</p>\n\n<p>following is my javacript function:</p>\n\n<pre><code>    jQuery(function ($) {\n    $('#imgLab').Jcrop(\n        {\n            onChange: showCoords,\n            onSelect: coordsSelected,\n            onRelease: clearCoords\n        }\n        );\n});\n</code></pre>\n\n<p>Image ID is 'imgLab'.</p>\n\n<p></p>\n\n<p>Image src path is coming from database.</p>\n\n<p>Now this work fine in FF,Safari and Chrome.\nbut in IE it only works after I press F5.\nCan anyone tell me what is wrong in code?</p>\n\n<p>Thanks in Advance.\nKhushbu</p>\n"},{"tags":["c#","asp.net-mvc","mvc","c#-4.0"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13085485,"title":"Loading selected radio buttons using an editor c#","body":"<p>In relation to this question:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/12883869/grouping-radio-buttons-in-c-sharp-mvc\">StackOverflow - Grouping radio buttons in c# mvc</a></p>\n\n<p>I have managed now to load and save the selected options from the form into a database but now the user may need to edit this.</p>\n\n<p>How do I load the view with the selected user's choices? I cannot see where you can set selected Answer. On load I am getting the default values selected</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13086276,"title":"How to fix 'microsoft.maintainability' build error?","body":"<p>I have a controller which contains a few private read only interface properties which it needs in order to get data by calling a service which is then used to populate models etc</p>\n\n<pre><code>private readonly ISomeInterface _someObject;\n</code></pre>\n\n<p>Which gets set in the Controllers constructor:</p>\n\n<pre><code>public ... (ISomeInterface someInterface, ...) {\n...\n_someObject = someObject\n}\n</code></pre>\n\n<p><code>_someObject</code> is then used in a call to the service layer to get data.</p>\n\n<p>I had to add another property to the controller but now when I build the soloution I get the following error:</p>\n\n<pre><code>CA1506 : Microsoft.Maintainability : 'ControllerName' is coupled with 87 different types from 30 different namespaces. Rewrite or refactor this class's methods to decrease its class coupling, or consider moving some of the class's methods to some of the other types it is tightly coupled with.\n</code></pre>\n\n<p>It asks me to reduce the coupling of the class, I understand that one way of doing this is to code against interfaces (abstractions) - which I'm already doing by adding the interface property? It seems by adding one more property it takes it past the threshold for flagging up this error.</p>\n\n<p>If I remove it, I can't get the data I need? What do I need to modify?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":19,"score":-2,"question_id":13085324,"title":"In asp.net resource.resx, can I reference another resource string , in same resex file","body":"<p>For reference, I am working on mvc3 application.\nSorry cant post image as I dont have those number of poits. Suppose I have String1 in my resource and I am defining string2, i have string2 content should be String1 + \"my some text\", is it possible?</p>\n"},{"tags":["html","asp.net-mvc","jquery-mobile","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13082804,"title":"Jquerymobile razor template not rendering html","body":"<p>I am using a razor template so I can reduce the amount of clutter in my mvc views when working on code. I have created \"section\" which will render as the seperate pages required for my mobile pages as follows:</p>\n\n<pre><code>&lt;div data-role=\"page\" id=\"page2\"&gt;\n&lt;div data-role=\"header\"&gt;\n    @if (IsSectionDefined(\"Header2\"))\n    {\n        @RenderSection(\"Header2\")\n    }\n    else\n    {\n    }\n&lt;/div&gt;\n&lt;div data-role=\"content\"&gt;\n    @if (IsSectionDefined(\"Content2\"))\n    {\n        @RenderSection(\"Content2\")\n    }\n    else\n    {\n    }\n&lt;/div&gt;\n&lt;div data-role=\"footer\"&gt;\n    @if (IsSectionDefined(\"Footer2\"))\n    {\n        @RenderSection(\"Footer2\")\n    }\n    else\n    {\n    }\n&lt;/div&gt;\n</code></pre>\n\n<p>I use the same template as above for up to 3 pages.</p>\n\n<p>My issue at the moment is I have assigned some code to my page 2 using:</p>\n\n<pre><code>@section Content2{\n&lt;div id=\"machinesearch\" class=\"ui-content\"&gt;\n    &lt;ul id=\"machinelist\" data-autodividers=\"true\" data-theme=\"d\" data-divider-theme=\"a\"\n        data-filter=\"true\" data-role=\"listview\"&gt;\n        @foreach (var item in Model.Plants)\n        {\n            &lt;li&gt;&lt;a href=\"#page1\" onclick=\"javscript:MachineSet($(this).find('input').val(),$(this).text());\"&gt;@item.Asset_Descriptor&lt;input id=\"Sap_ID\" type=\"hidden\" value=\"@item.Asset_SAP_ID\"/&gt;&lt;/a&gt;&lt;/li&gt;      \n        }\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>}</p>\n\n<p>And my link to show this page is:</p>\n\n<pre><code>$(\"#testbutton\").click(function(){\n\n$('#page2').trigger('pagecreate');\n$(\"#machinelist\").listview('refresh');\nalert(\"test\");\n\n});\n</code></pre>\n\n<p>But this does not seem to make any difference.</p>\n\n<p>Any ideas? </p>\n\n<p>I can see the data is all loaded in correctly when I view the html source of my first page which also contains the html for the second page. It seems to be because razor is injecting the data in to page 2 after the page 1 is loaded.</p>\n"},{"tags":["javascript","jquery","asp.net-mvc","view","render"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13071492,"title":"render view model on item click","body":"<p>The situation is as follows: I have a <code>Product</code> model which has many properties and one is a List of <code>Photo</code> objects, each <code>Photo</code> object having an <code>ID</code> and a <code>Name</code>. There is a Carousel View having a model a list of <code>Photos</code>. In <code>Product</code> View I have something like this:</p>\n\n<pre><code>@if (Model.Photos.Count &gt; 0)\n{\n    ....\n    &lt;a href=\"javascript:jsFunction()\".......\n</code></pre>\n\n<p>Where in javascript,the <code>jsFunction</code> looks like this:</p>\n\n<pre><code>function jsFunction()\n{\n  alert('@Html.Action(\"GetPhotosCarousel\", Model.Photos)');\n} \n</code></pre>\n\n<p>and the Controller function returns the partial view <code>_PhotosCarousel</code>.</p>\n\n<p>Now, the problem that <code>@Html.Action</code> executes on rendering the main view, <strong>NOT ON CLICK</strong>.</p>\n\n<p>How can I render the view <code>PhotosCarousel</code> just on click and not on displaying the page?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13079376,"title":"Would like to use generic base class as model for asp.net MVC view","body":"<p>I have a viewmodel class foo that is a generic</p>\n\n<pre><code>public abstract class Base&lt;T&gt;\n</code></pre>\n\n<p>and its child types set the class when they inherit from it like this</p>\n\n<pre><code>public class Child : Base&lt;Foo&gt;\n</code></pre>\n\n<p>I would like to use them in a view as the model like</p>\n\n<pre><code>@model Base&lt;T&gt;\n</code></pre>\n\n<p>but i have heard this is not possible. I've seen people suggest putting dynamic in place of T, but that does not work unless i replace Foo with dynamic also. Is there any way to design the viewmodels like that? I suppose I could pass the Child object in the viewbag instead of the model, but i'd rather not do that if possible. EDIT: (that viewbag thing wouldn't actually work now that i think about it because i'd need to be able to cast it to a Base to use it as one, and that's basically the problem i'm having now)</p>\n"},{"tags":["ajax","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13081222,"title":"Custom Html Controls Ajax updation","body":"<p>I have customized grid control which generates table when we give coloumn and table name where there is a feature for searching also available which updates the record and show the updated result in grid  while searching through ajax i am getting records updating but not showing in main page</p>\n\n<pre><code>        SqlParameter[] sqlParameter = {new SqlParameter(\"@table\",tabelName),\n                                      new SqlParameter(\"@Column1\",coloumn1),\n                                      new SqlParameter (\"@Column2\",coloumn2),\n                                      new SqlParameter(\"@AliasName1\",aliasName1),\n                                      new SqlParameter(\"@AliasName2\",aliasName2)\n\n                                      };\n\n        string gridHtml;\n        if (!isFilterCondition)\n        {\n             gridHtml = GenerateHtmlGrid(sqlParameter);\n        }\n        else\n        {\n            gridHtml = GenerateHtmlGridonSearch();\n        }\n        StringBuilder sb = new StringBuilder();\n        //Opening For Main page Search Control\n        sb.AppendFormat(\"&lt;table&gt;\");\n        sb.AppendFormat(\"&lt;tr&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;input id='txt_Search' type='text'  name='txt_Search'&gt;\");\n        sb.AppendFormat(\"&lt;input type='hidden' name='{0}' class='WorkItem'&gt;\", controlName);\n        sb.AppendFormat(\"&lt;/td&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;a href='#' id='searchlink'&gt;&lt;img src='../../Content/themes/base/images/16px-Searchtool_right.png' /&gt;&lt;/a&gt;\");\n        sb.AppendFormat(\"&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\");\n        //Closing For Main page Search Control\n\n        // Opening for the Dialog Box Div\n        sb.AppendFormat(\"&lt;div id='dialoggrid' title='{0}' &gt;\", popWindowTitle);\n        sb.AppendFormat(\"&lt;table&gt;\");\n        sb.AppendFormat(\"&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;select name='foo' id='foo'&gt;\");\n        sb.AppendFormat(\"&lt;option value=0&gt;{0}&lt;/option&gt;\", aliasName1);\n        sb.AppendFormat(\"&lt;option value=1&gt;{0}&lt;/option&gt;\", aliasName2);\n        sb.AppendFormat(\"&lt;/select&gt;\");\n        sb.AppendFormat(\"&lt;/td&gt;&lt;/tr&gt;\");\n        sb.AppendFormat(\"&lt;tr&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;label&gt;Search&lt;/label&gt;\");\n        sb.AppendFormat(\"&lt;/td&gt;&lt;td&gt;\");\n        sb.AppendFormat(\"&lt;input id='txtGridSearch' type='text'  name='txtGridSearch'&gt;\");\n        //sb.AppendFormat(\"&lt;a href='#' id='SearchTree'&gt;&lt;img src='../../Content/themes/base/images/16px-Searchtool_right.png' /&gt;&lt;/a&gt;\");\n        sb.AppendFormat(\"&lt;/table&gt;\");\n\n        sb.AppendFormat(\"&lt;div id='div_grid'&gt;{0}&lt;/div&gt;\", gridHtml);\n        sb.AppendFormat(\"&lt;/div&gt;\");\n        // Closing  for the Dialog Box Div\n\n        //opening For Script Section \n        sb.AppendFormat(\"&lt;script type='text/javascript'&gt;\");\n\n        //Opening for Document Reddy\n        sb.AppendFormat(\"$(document).ready(function() {{ \");\n        sb.AppendFormat(\"$('#dialoggrid').dialog({{ autoOpen: false,modal: true,width: 350}});\");\n        //Function For SearchButton on Main Page Click \n        sb.AppendFormat(\"$('#searchlink').click(function() {{\");\n        sb.AppendFormat(\"$( '#dialoggrid').dialog('open');\");\n        sb.AppendFormat(\"}});\");\n        //Closing For SearchButton on Main Page Click \n\n        //opening For Textbox Search inside the Grid on Key Up Event\n        sb.AppendFormat(\"$('#txtGridSearch').keyup(function(){{\");\n        sb.AppendFormat(\"$.post('/CustomeControls/GridSearch')\");\n\n\n        sb.AppendFormat(\"}});\");\n        //Closeing For Textbox Search inside the Grid on Key Up Event\n\n        sb.AppendFormat(\"}});\");\n        //Closing For Document Reddy Function \n\n        sb.AppendFormat(\"&lt;/script&gt;\");\n        //Closing for Script Section \n\n\n        return new MvcHtmlString(sb.ToString());\n    }\n</code></pre>\n"},{"tags":["asp.net-mvc","iis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13080432,"title":"The parameters dictionary contains a null entry for parameter 'quoteId' of non-nullable type 'System.Int32' for method","body":"<p>The error full description:</p>\n\n<pre><code>System.ArgumentException: The parameters dictionary contains a null entry for  \n  parameter 'quoteId' of non-nullable type 'System.Int32' for method \n  'System.Web.Mvc.JsonResultGetQuoteSubTotal(Int32, System.String)' \n  in 'NI.Apps.WebSite.OliteBase.Controllers.QuotationController'. \n  An optional parameter must be a reference type, a nullable type,\n  or be declared as an optional parameter.\nParameter name: parameters\n   at System.Web.Mvc.ActionDescriptor.ExtractParameterFromDictionary(ParameterInfo parameterInfo, IDictionary`2 parameters, MethodInfo methodInfo)\n   at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()\n   at System.Linq.Buffer`1..ctor(IEnumerable`1 source)\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\n   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.&lt;&gt;c__DisplayClass15.&lt;InvokeActionMethodWithFilters&gt;b__12()\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)\n   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)\n   at System.Web.Mvc.Controller.ExecuteCore()\n   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)\n   at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClass6.&lt;&gt;c__DisplayClassb.&lt;BeginProcessRequest&gt;b__5()\n   at System.Web.Mvc.Async.AsyncResultWrapper.&lt;&gt;c__DisplayClass1.&lt;MakeVoidDelegate&gt;b__0()\n   at System.Web.Mvc.MvcHandler.&lt;&gt;c__DisplayClasse.&lt;EndProcessRequest&gt;b__d()\n   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously)\n</code></pre>\n\n<p>The error never occured on my old web server. \nThe old web server environment: Windows Server 2003(64bit)/IIS 6/.NET 4.\nAfter i upgraded the environment to :Windows Server 2008R2/IIS 7.5/.NET 4, the error always was threw, but not all requests cause the error.</p>\n\n<p>so this issue is a config issue?</p>\n\n<p>thanks.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13079043,"title":"Passing Parameter to controller using partialView","body":"<p>I have one PartialView that has been Included inside two other views.</p>\n\n<p>How would I be able to pass parameter from PartialView to main Controller of each View.</p>\n\n<pre><code>@Html.Partial(\"_Video\",\"file1.xml\")\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@Html.Partial(\"_Video\",\"file2.xml\")\n</code></pre>\n\n<p>I want to be able to get the parameter value on Get method on each controller.</p>\n\n<pre><code>        //Controller1 \n        // GET: //\n        public ActionResult Index(){\n             \"file1.xml\"\n        }\n\n        //Controller2\n        // GET: //\n        public ActionResult Index(){\n             \"file2.xml\"\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","oracle","entity-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13077810,"title":"Oracle Sequences, Entity Framework and getting nextval in an MVC3 View","body":"<p>I'm currently using Entity Framework inside an MVC3 application to connect to an Oracle Database. I want to write a new record to a table in the Oracle database which includes a sequence that defines it's primary key. Of course, the primary key is defined to be not null. All my views are written in ASP.Net instead of Razor.</p>\n\n<p>I see that most posts out there recommend setting a StoreGeneratedPattern directly on the edmx model. However, I notice that most edmx model examples like this one: <a href=\"http://stackoverflow.com/questions/7351260/oracle-entity-in-vs-entity-framework-doesnt-update-the-primary-key-in-code\">Oracle entity in VS entity framework doesnt update the primary key in code</a>  include the tables defined using EntityTypes -the table in question I want to do this on is actually encompassed in an EntitySet:</p>\n\n<pre><code>&lt;EntitySet Name=\"REGISTERED_PERSON\" EntityType=\"Model.Store.REGISTERED_PERSON\" store:Type=\"Tables\" Schema=\"MYSCHEMA\" /&gt;\n</code></pre>\n\n<p>and when I try to set StoreGeneratedPattern=Identity on this, I get an error that the StoreGeneratedPattern attribute is not allowed, presumably because it is not an EntityType. I had originally thought about just getting the max. registered_person_id from the database via LINQ statement and then assigning that into the model, but then the problem arises that you'd get a duplicate ID if two inserts were executed at the same time. </p>\n\n<p>I also checked the database and I don't have any triggers written. I know that in Oracle you can opt to select from dual to get the next value which is generated by the sequence, such as illustrated below:\n<br>select MY_SEQ.nextval,'some value' from dual</p>\n\n<p>This post here: <a href=\"http://stackoverflow.com/questions/2189114/postgresql-nextval-question-on-sequences\">postgresql nextval question on sequences</a> has a great title, but the problem with that is that I'm not working with postgresql or PHP, so unfortunately it doesn't help me. I also don't have any triggers written to fire the sequence upon insert of a record. </p>\n\n<p>How do I go about getting the nextvalue from the sequence and assign it to my Registered_Person_Id, preferably in the view before the entire model object gets passed back to the controller to insert in the database? </p>\n"},{"tags":["asp.net-mvc","razor","actionlink"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":13077150,"title":"How to pass multiple parameters (some complex objects) with Html.ActionLink","body":"<p>I'm working with MVC in .net 4.0.  I have a basic Html.ActionLink and I wish to pass multiple parameters to the controller/action.</p>\n\n<p>Every time I debug the ActionResult only ONE of my parameters comes through and the other is null (depending on which is first).  Now I know I can pass in complex objects since I can get the \"League\" object to come through.  However, I'm not sure why only ONE of my parameters makes it through at any time.</p>\n\n<p>Code in View: (don't harass me about ViewBag.  I know it's not popular.  Also, League is a complex object)</p>\n\n<pre><code>@Html.ActionLink(\"Sort By WeeK\", \"Sort\", \"Schedule\",\n                 new { league = ViewBag.League, sortType = \"Week\" }, null)\n</code></pre>\n\n<p>Code in Controller: (no surprises here)</p>\n\n<pre><code>public ActionResult Sort(League league, string sortType)\n{\n    //Do some stuff here\n    return View(\"Schedule\");\n}\n</code></pre>\n\n<p>I'm guessing the answer will revolve around routing.  Which brings me to my 2nd question.  How can I get this type of ActionLink (Action / Controller / Collection of Complex and Simple objects) to work without constantly adding new maproutes.  Is there a generic / wildcard RouteMap I could add so I don't have to constantly add anatomically identical route maps to global.asax.  Or maybe I want some flexibility in the type of objects I wish to pass into an Action so I can't predefine the exact signature.</p>\n\n<p>I've seen multiple posts on this topic but none of them answered my questions.</p>\n"},{"tags":["asp.net-mvc","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13076774,"title":"get referring url from my rest api","body":"<p>I am building a rest api in mvc. When consuming the API, I need to be able to get the referring URL that is calling the service.  I have tried Request.UrlReferer and it comes back null.  How can I get the url that is consuming the service?</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework","stored-procedures","ado.net"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12710455,"title":"Why is my broken stored procedure being dropped?","body":"<p>I have an ASP.NET MVC 4 project configured to use Entity Framework 5, backed by a SQL Server database.</p>\n\n<p>One of the stored procedures in my DB performs an illegal operation: it tries to insert a <code>NULL</code> value into a <code>NOT NULL</code> column. Understandably, this fails.</p>\n\n<p>Inexplicably, Entity Framework (or some other component of my ASP.NET MVC stack, or perhaps my SQL Server database) then <strong>drops the stored procedure</strong> from the database!</p>\n\n<p>A screenshot of the error message I receive when I attempt to call my stored procedure is below:</p>\n\n<p><img src=\"http://i.stack.imgur.com/3Nt2M.jpg\" alt=\"The error page displayed\"></p>\n\n<p>I can't seem to find any documentation on this behaviour. </p>\n\n<p><strong>Why is this happening, and what can I do to prevent stored procedures from being dropped?</strong></p>\n"},{"tags":["asp.net-mvc","backgroundworker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13086104,"title":"how to perform two task in the backgroudworker process in asp.net MVC","body":"<p>I have to do two task parallelly in the backgroud worker process in the asp.net. </p>\n\n<p>The following are the two task</p>\n\n<ol>\n<li><p>Sent a email alert to support guys if any error event occurs in any of the server in a domain (All the time)</p></li>\n<li><p>Sent the  status report of error messages for all the servers in a domain at a time for every 4 hours or based on the user configuration.</p></li>\n</ol>\n\n<p>I have already implemented the first task through the background worker process (</p>\n\n<p>Now I want to implement second one and that fetch the data from the database for every 4 hours or user configured.</p>\n\n<p>Please find the below are source code that i have used for implementation.</p>\n\n<pre><code>      protected void Application_Start()\n      {\n        AreaRegistration.RegisterAllAreas();\n        RegisterRoutes(RouteTable.Routes);\n\n        BackgroundWorker worker = new BackgroundWorker();\n        worker.DoWork += new DoWorkEventHandler(DoWork);\n        worker.WorkerReportsProgress = false;\n        worker.WorkerSupportsCancellation = true;\n        worker.RunWorkerCompleted +=\n               new RunWorkerCompletedEventHandler(WorkerCompleted);\n        worker.RunWorkerAsync(); \n\n    }\n\n\n    private static void DoWork(object sender, DoWorkEventArgs e)\n    {\n        GetEmailAlertData objGetEmailAlertData = new GetEmailAlertData();\n        List&lt;Email&gt; lstEmaildetails = objGetEmailAlertData.GetEmailAlertDetails();\n        SentinelAlerter objSentinelAlerter = new SentinelAlerter();\n        foreach (Email objEmail in lstEmaildetails)\n        {\n            try\n            {\n       // I have implement first task           \n                objAlerter.SendAlert(objEmail);\n            }\n            catch (Exception ex)\n            {\n\n            }\n            finally\n            {\n\n            }\n        }\n\n    }\n</code></pre>\n\n<p>Can anyone suggest how to implement the second task in the same background worker process.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13075234,"title":"time sheet management for employee in asp.net mvc 4","body":"<p>I m developing timesheet management app for employee in asp.net mvc 4</p>\n\n<p>my requirement is </p>\n\n<p>employee fill daily entry \nworking start time \nand end time ,\nbreak start time \nand end time </p>\n\n<p>these filled are for all seven day like Monday Tuesday ........ </p>\n\n<p>can any body tell me what is the best data type in sql server to store only time value.</p>\n\n<p>and is it good to use query time picker for selection of time in front end.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","razor","razor-2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":64,"score":-3,"question_id":13085867,"title":"Razor and if statement","body":"<p>I'm using MS Razor in MVC 3 C#, I need to display some text \"hello\" within the IF statement.\nAt the moment I receive an error. Any idea how to solve it?</p>\n\n<p>EDIT: syntax error</p>\n\n<pre><code>   @if(Model.IsCustomEvent)\n    {\n        @Html.ActionLink(\"Edit\", \"Edit\", new {  id=Model.EventTitle }) hello\n    }\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","route"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13082980,"title":"Routing catch go wrong","body":"<p>I am trying to write a C# ASP.NET app and I have a routing problem and I do not know how to move on:</p>\n\n<pre><code>routes.MapRoute(\n    \"DefaultArticole\",\n    \"{limba}/Art-{id}/{titluPagina}\",\n    new { controller = \"Pagini\", action = \"Index\", limba = UrlParameter.Optional, id = UrlParameter.Optional, titluPagina = UrlParameter.Optional }\n);\n\nroutes.MapRoute(\n    \"DefaultPagini\",\n    \"{limba}/{paginaCurenta}/{id}\",\n    new { controller = \"Home\", action = \"Index\", limba = UrlParameter.Optional, paginaCurenta = UrlParameter.Optional, id = UrlParameter.Optional }\n);\n</code></pre>\n\n<p>All I want is that on uri like:</p>\n\n<pre><code>/Art-10/title\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/en/Art-10/title\n</code></pre>\n\n<p>to be caught by <code>DefaultArticole</code>.</p>\n"},{"tags":["asp.net-mvc","dependency-injection","structuremap","signalr","iprincipal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13084648,"title":"Selective IPrincipal Injection via StructureMap with SignalR","body":"<p>StructureMap is configured to inject <code>HttpContext.Current.User</code> when an <code>IPrincipal</code> is requested for any ASP.NET MVC web request, like so:</p>\n\n<pre><code>For&lt;IPrincipal&gt;().Use(x =&gt; HttpContext.Current.User);\n</code></pre>\n\n<p>But when my SignalR hub asks for a service that depends on an <code>IPrincipal</code>, injection fails because <code>HttpContext.Current</code> is null. Instead, SignalR already has a <code>HubCallerContext</code> property that exposes the current <code>IPrincipal</code> via <code>Context.User</code>.</p>\n\n<p>How do I configure StructureMap to always inject a valid <code>IPrincipal</code> into the services my SignalR hub relies on?</p>\n"},{"tags":["javascript","asp.net-mvc","internet-explorer","razor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":457,"score":2,"question_id":9500217,"title":"IE 8 - Scripts not always load","body":"<p>It's been a common problem among my team for a while. For aparently no reason, IE8 only loads the scripts sometimes. I'm using asp.net mvc3 and some scripts are loaded through _layout.cshtml (which is like a master page that all my others pages inherits). The other bunch of scripts are loaded only when needed. I must mention that i began to use Head.js to load my scripts. I was actually hoping that it would fix the IE8 scripts load problem.</p>\n\n<p>These problems don't occur on firefox or chrome (which is another motive i'm certain it only happens on IE). And as it seems, if a single script breaks on IE8, this break propagates through other scripts.</p>\n\n<p>I understand this may be a problem too broad to be solved with just the forementioned situation. So what i'd like to know is <strong>have you had a problem like this? If yes, what did you do to solve it?</strong> I really appreciate some directions, since i have to use IE.</p>\n\n<p>Here is the scripts that are being loaded on _layout.cshtml, in the order of loading:</p>\n\n<ul>\n<li>Head.js; </li>\n<li>jquery-1.5.1.min.js; </li>\n<li>modernizr-1.7.min.js; </li>\n<li>jquery-ui-1.8.11.min.js;</li>\n<li>jquery.ui.datepicker-pt-BR.js; </li>\n<li>jquery.validate.min.js;</li>\n<li>jquery.validate.unobtrusive.min.js;</li>\n</ul>\n\n<p>An these are some of the other scripts that i use on some pages (it's not in their order):</p>\n\n<ul>\n<li>jquery-blockUI.js;</li>\n<li>jquery.jqGrid-4.1.2.min.js;</li>\n<li>jquery.orbit-1.2.3.min.js;</li>\n<li>jquery.jqplot.min.js (and some of it's renderers);</li>\n<li>jquery.form.wizard-min.js;</li>\n<li>ZeroClipboard.js;</li>\n</ul>\n\n<p><strong>EDIT</strong></p>\n\n<p>As T.J. asked for some piece of code, since it would be to hard to identify the problem with only the name of scripts used, here it is.</p>\n\n<p><strong>Scripts loaded on _layout.cshtml</strong></p>\n\n<pre><code>&lt;head&gt;\n&lt;script src=\"@Url.Content(\"~/Scripts/head.min.js\")\" language=\"javascript\"  type=\"text/javascript\"&gt;&lt;/script&gt;\n\n//Lots of css files loaded mostly through document.write\n\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n        //        if (head.browser.mozilla || head.browser.webkit || head.browser.opera ||\n        //      (head.browser.ie &amp;&amp; (head.browser.version == '9.0'))) {\n        head.js('@Url.Content(\"~/Scripts/jquery-1.5.1.min.js\")')\n                .js('@Url.Content(\"~/Scripts/modernizr-1.7.min.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery-ui-1.8.11.min.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery.ui.datepicker-pt-BR.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery.validate.min.js\")')\n                .js('@Url.Content(\"~/Scripts/jquery.validate.unobtrusive.min.js\")');\n        if (screen.width == 1024) {\n            head.js('@Url.Content(\"~/Scripts/resolucao1024.js\")');\n        } else {\n            head.js('@Url.Content(\"~/Scripts/resolucaoMaior1024.js\")');\n        }\n&lt;/script&gt;\n@RenderSection(\"Header\", false)\n&lt;/head&gt;\n</code></pre>\n\n<p><strong>Scripts loaded on a charts and graphics page</strong></p>\n\n<pre><code>@section Header{\n&lt;script type=\"text/javascript\" language=\"javascript\"&gt;\n        head\n        .js('@Url.Content(\"~/Scripts/jquery-blockUI.js\")')\n        .js('@Url.Content(\"~/Scripts/jqGridMVC/grid.locale-pt-br.js\")')\n        .js('@Url.Content(\"~/Scripts/jqGridMVC/jquery.jqGrid-4.1.2.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jquery-ConfigAjax.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jquery.jqplot.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.highlighter.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.dateAxisRenderer.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.pieRenderer.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.donutRenderer.min.js\")')\n        .js('@Url.Content(\"~/Scripts/jqPlot/jqplot.cursor.min.js\")');\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Oh! i forgot to mention that every time i call some javascript functionality, i use <code>head(function() {})</code> instead of <code>$(function(){})</code> (it's recommended on head.js site).</p>\n\n<p><strong>EDIT 3</strong></p>\n\n<p>As Zeta asked, i'm providing a print from IE console (it's from my charts and graphic page).</p>\n\n<p><img src=\"http://i.stack.imgur.com/Ws2oh.png\" alt=\"enter image description here\"></p>\n\n<p>Since i'm brazilian, it's in portuguese. Simple to understand though: it means <strong>'jqplot' is null or is not an object.</strong> Like jqplot was never loaded or had some problem during the loading.</p>\n"},{"tags":["asp.net-mvc","error-handling"],"answer_count":6,"favorite_count":24,"up_vote_count":22,"down_vote_count":0,"view_count":25847,"score":22,"question_id":717628,"title":"ASP.NET MVC 404 Error Handling","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc\">How can I properly handle 404 in ASP.NET MVC?</a>  </p>\n</blockquote>\n\n\n\n<p>I've made the changes outlined at <a href=\"http://stackoverflow.com/questions/108813/404-http-error-handler-in-aspnet-mvc-rc-5\">404 Http error handler in Asp.Net MVC (RC 5)</a> and I'm still getting the standard 404 error page. Do I need to change something in IIS?</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13083790,"title":"How to fix 'Remove property setter' build error?","body":"<p>I have a property in a model which has auto property getter and setter:</p>\n\n<pre><code>[DataMember]\npublic Collection&lt;DTOObjects&gt; CollectionName { get; set; }\n</code></pre>\n\n<p>I get the following error when building the solution:</p>\n\n<blockquote>\n  <p>Microsoft.Usage : Change 'propertyname' to be read-only by removing the property setter.</p>\n</blockquote>\n\n<p>However, when I remove the setter and run the code, an error occurs because it's trying to set the property! It appears it's asking me to remove the setter despite the fact it is being set somewhere in the code.</p>\n\n<p>Has anyone else come accross this problem? What do I need to modify?</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","razor","kendo-ui"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":101,"score":-1,"question_id":12969192,"title":"Kendo UI Validation for Dublicate Value Checking","body":"<p>I am facing a problem with validation for duplicate value checking from server using json.\nMy code is runing fine in each click but error message show in second click(One click in side text box put value then click out side the text box - that time code execute but error message show . again i click in that text box and again click out side text box ,again my code run and this time error message show) . Please find my mistake and help me to show validation message in single escape or single click of  text box.</p>\n\n<h2>script language=\"javascript\" type=\"text/javascript\"</h2>\n\n<p>//KendoUi Validation</p>\n\n<pre><code>    var validatable = $(\"#ApplicationNo\").kendoValidator({\n        onfocusout: true,\n        onkeyup: true,\n        rules: {\n            ApplicationNo: function (input) {\n                $.post(\"/Home/CheckAppNo\", { ApplicationNo: $(\"#ApplicationNo\").val() }, function (data) { b1 = data; })\n                return b1;\n            }\n\n        },\n\n        messages: {\n            ApplicationNo: \"Already Exist\"\n        }\n    }).data(\"kendoValidator\");\n\n   var validatable = $(\".k-content\").kendoValidator().data(\"kendoValidator\");\n</code></pre>\n\n<p></p>\n\n<h2>C # Code</h2>\n\n<pre><code>    public JsonResult CheckAppNo(string ApplicationNo)\n    {\n        bool IsOk = projectRepository.CheckAppNumber(ApplicationNo);\n        return Json(IsOk, JsonRequestBehavior.AllowGet);\n        //return new JsonResult { Data = IsOk };\n    }\n</code></pre>\n\n<h2>Html</h2>\n\n<blockquote>\n  <blockquote>\n    <p>&lt; input type=\"text\" id=\"ReferredBy\" name=\"ReferredBy\" class=\"k-textbox\" required /></p>\n  </blockquote>\n</blockquote>\n"},{"tags":["asp.net-mvc","razor","visual-studio-2012"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":153,"score":0,"question_id":12542813,"title":"Intellisense in mvc4 project not working in vs 2012 professional?","body":"<p>In my razor views the intellisense is not working. Are there any fixes for this? \nI'm using the newly released VS 2012 Professional and building a ASP.NET MVC 4 project. The intellisense in my razor views are not working. Is there any fix for this? </p>\n"},{"tags":["c#","ajax","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":13082375,"title":"Sending data from ajax to controller in C#","body":"<p>I'm creating an object in javascript with LocationId and id.</p>\n\n<p>I have a class MyClass in C# with those two variables.</p>\n\n<p>I have an ajax call which calls a method in my controller:</p>\n\n<pre><code>MyMethod(List&lt;MyClass&gt; myObject, int user_id)\n</code></pre>\n\n<p>I use:</p>\n\n<pre><code>traditional: true\n</code></pre>\n\n<p>in the ajax call.</p>\n\n<p>The method gets called, myObject has the correct length, but LocationId and id are all 0. Why is this happening and how to solve it?</p>\n\n<pre><code>public class MyClass {\n     public int LocationId {get; set;}\n     public int id {get; set;}\n}\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>var myArray = new Array();\nvar object = new {\n    LocationId: 1;\n    id: 2;\n}\nmyArray.push(object);\n</code></pre>\n\n<p>Ajax:</p>\n\n<pre><code>$.ajax({\n    type: \"GET\",\n    url: \"correctUrl\",\n    traditional: true,\n    data: { user_id: 1, myObject: myArray}\n});\n</code></pre>\n"},{"tags":["javascript","jquery","html","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13007371,"title":"Custom table for store multiple values in cell","body":"<p>I need to make custom table for scheduling with rows with persons and columns with days.\nAdditional logic will be implemented to fill cells. \nEvery cell hold information about who is engagement in particular day in particular shift (it can be more shift). </p>\n\n<p>Actually, I need a way to store values in some control(maybe my custom html tag, for example \n), hidden field or something. After schedule same cell will\nbe filled with additional data (achieved date time start, achieved date time end).</p>\n\n<p>Final step will be to take all values and store to database.</p>\n\n<p>What you think about that? Have you some advice or similar case?</p>\n"},{"tags":["c#","javascript","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13082972,"title":"Access an object returned from the database with Javascript MVC4","body":"<p>How do I access an object returned from the database with Javascript</p>\n\n<p>This function is called from Javascript </p>\n\n<pre><code>function searchUser() {\n    var userName = document.getElementById('UserName').value\n    $.post(\"SearchForUser\", { userName: userName }, function (UserInfo) {\n\n        UserInfo; //How to access the returned UserInfo properties?\n\n    });\n}\n</code></pre>\n\n<p>I Use this code to get the UserInfo from the database</p>\n\n<pre><code>    public UserInfo SearchForUser(string userName)\n    {\n       string password = \"nicola\";\n\n        using (FormValueEntities db = new FormValueEntities())\n        {\n            //Query the database for the user\n            UserInfo userInfo = new UserInfo();\n            userInfo = db.UserGet(userName, password).FirstOrDefault();\n            return userInfo;\n        }\n    }\n</code></pre>\n\n<p>The UserInfo has the Following properties : UserName, UserPassword and Description</p>\n"},{"tags":["jquery","asp.net","ajax","asp.net-mvc","asp.net-mvc-3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":428,"score":0,"question_id":9607164,"title":"Request.IsAjaxRequest never returns true in MVC3","body":"<p>I am using Asp.net MVC3 and trying to do a simple Ajax post to the server which returns a partial view and updates my list of items during a search.</p>\n\n<pre><code>    @using (Ajax.BeginForm(\"PartialUpdate\", \"Listing\"\n        , new  AjaxOptions { \n                UpdateTargetId = \"ListPartialDiv\",\n                HttpMethod = \"GET\",\n                InsertionMode = InsertionMode.Replace,\n\n        }))\n    {\n        &lt;!-- Search Boxes and buttons here --&gt;\n    }\n\n    &lt;div id = \"ListPartialDiv\"&gt;\n        @{\n            Html.RenderPartial(\"_ListPartial\", Model);\n         }\n    &lt;/div&gt;\n</code></pre>\n\n<p>The ajax successfully makes a call to the server and the server responds by sending a partial view. But the partial view always renders in a new page. I found out that this is because it doesn't know that it is an ajax call coming and so it renders a new page. I HAVE included the correct jquery-ubobtrusive-ajax.min.js scripts and added the key as follows according to <a href=\"http://stackoverflow.com/questions/5164540/why-doesnt-request-isajaxrequest-work-in-asp-net-mvc-3\">This Question</a></p>\n\n<pre><code>    &lt;script src=\"@Url.Content(\"~/Scripts/jquery.unobtrusive-ajax.js\")\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;script src=\"@Url.Content(\"~/Scripts/jquery-1.7.1.min.js\")\" type=\"text/javascript\"&gt; \n</code></pre>\n\n<p></p>\n\n<p>My controller code is very simple:</p>\n\n<pre><code>      if (Request.IsAjaxRequest())\n          return PartialView(\"_ListPartial\", list);\n\n      return View(\"Index\", list);\n</code></pre>\n\n<p>But Request.IsAjaxRequest() always returns false no matter what.\nI have also used fiddler and firebug according to <a href=\"http://stackoverflow.com/questions/1702837/request-isajaxrequest-returns-false\">This Question</a> and don't see the X-Requested-With header but I can't really figure out what that means or how to change it. The only thing I can think of is that every other example I see uses an older version of jquery. Does that have anything to do with it? Thanks for any help. </p>\n"},{"tags":["asp.net-mvc","razor","webgrid"],"answer_count":8,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":10596,"score":5,"question_id":4195440,"title":"Mvc 3 texbox in webgrid (razor)","body":"<p>Simple Q:How do you I get the textbox to show the value. Code below fail on item.LastName</p>\n\n<pre><code>@model List&lt;Mvc2010_11_12.Models.Employee&gt;\n@{\n    var grid = new WebGrid(source: Model,defaultSort: \"FirstName\",rowsPerPage: 3);\n}\n\n&lt;div id=\"grid1\"&gt;\n    @grid.GetHtml(columns: grid.Columns(\n        grid.Column(\"LastName\"),\n        grid.Column(format: (item) =&gt; Html.TextBox(\"LastName\", item.LastName))\n    ))\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13076573,"title":"DateTime property as two inputs on view, one for date and second for time part","body":"<p>Is this possible to have one DateTime property in model, but use it as two inputs on view/form? For example Date part will be using jqueryui datepicker, while Time part picker will be a masked input, or other nifty jquery plugin. From time to time i need to use two dropdows for time picking (hours and minutes).</p>\n\n<p>My goal is to have one DateTime property in model (no partial strings for date and time). Is this possible? Using MVC4.</p>\n"},{"tags":["sql-server","asp.net-mvc","entity-framework-4.1","query-by-example"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12855990,"title":"ASP.NET MVC4 Query By Example Open Source Suggestions","body":"<p>We're currently building a new application and part of the functionality we want to include for users is the ability to build ad-hoc querys through the web UI for reporting purposes.</p>\n\n<p>e.g. The user may select the Entity1 report.</p>\n\n<p>They are then able to select the criteria through the UI</p>\n\n<p>pseudo example:\n((Entity1.Type = 'this' OR Entity1.Type = 'something else') AND Entity1.CreatedDate > '01-01'2012')</p>\n\n<p>Does anyone know if there is a good solution available (open source or paid) as this seems like it might be a lot of work to implement a bespoke solution.</p>\n\n<p>Further to this we are using Entity Framework v4.1 magical unicorn edition.</p>\n"},{"tags":["c#","asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13081464,"title":"password change in mvc popup","body":"<p>I'm using <code>@Html.Password(\"Password\", ViewData[\"password\"])</code> for displaying passwords in popup, the password is being displayed and I should be able to edit and update it. After  editing it, when I click save button the password is not being updated.</p>\n\n<p><code>ModelState.IsValid</code> is giving <code>False</code> and the method is being skipped.</p>\n\n<p>this is my view</p>\n\n<pre><code>@Html.Password(\"Password\", ViewData[\"password\"])\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>       [httppost]\n       public actionresult edituser(sales.users saleUser)\n       {\n        sales.users objUser=new sales.users();\n        sales objSaleModel=new Sales();\n\n        if(modelstate.isvalid)\n        {\n\n          //the code to save the changes\n        }\n        }\n</code></pre>\n"},{"tags":["asp.net-mvc","castle-windsor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13067324,"title":"HttpContextBase dependency on IPrincipal?","body":"<p>I have the following windsor setup:</p>\n\n<pre><code>        container.Register(\n            Component.For&lt;HttpContextBase&gt;().\n                UsingFactoryMethod(() =&gt; new HttpContextWrapper(HttpContext.Current)).LifeStyle.PerWebRequest);\n\n        container.Register(\n            Component.For&lt;IPrincipal&gt;().\n                UsingFactoryMethod(() =&gt; HttpContext.Current.User).LifeStyle.PerWebRequest);\n</code></pre>\n\n<p>I am then trying to resolve HttpContextBase before the HttpContext.Current.User property has been set.  During the resolve of HttpContextBase, windsor tries to resolve IPrincipal which is null, and an exception is thrown.</p>\n\n<p>If I replace the resolve with what I thought it should be doing i.e. </p>\n\n<pre><code>new HttpContextWrapper(HttpContext.Current)\n</code></pre>\n\n<p>then my code works.  </p>\n\n<p>Can someone explain why Windsor tries to resolve IPrincipal for HttpContextBase?  Can I stop it doing so?</p>\n"},{"tags":["c#","asp.net-mvc","iis","embedded-resource"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12957632,"title":"Embedded Razor views are not found after Deployment (IIS)","body":"<p>I am currently working on a project which features a plugin-like system. Once the web project starts up it looks for plugin dlls and build up the GUI. The dlls contain embedded views, and embedded resources like pictures or javascripts.</p>\n\n<ul>\n<li><p>I use RazorGenerator(VS Plugin) to generate the cs files from the views, The build action of the views is set to 'embedded resource' and the custom tool is set to 'RazorGenerator'</p></li>\n<li><p>I use a custom Virtual Path Provider (a very similar to this <a href=\"http://stackoverflow.com/questions/7746253/using-custom-virtualpathprovider-to-load-embedded-resource-partial-views\">one</a>)</p></li>\n<li><p>I register my virtual path provider with this workaround i found on the net (it is a must since it is not working as intented if i dont use this):</p>\n\n<pre><code>    var assemblyResourceProvider = new AssemblyResourceProvider();\n    var hostingEnvironmentInstance = (HostingEnvironment)typeof(HostingEnvironment).InvokeMember(\"_theHostingEnvironment\", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetField, null, null, null);\n    if (hostingEnvironmentInstance == null)\n        return;\n\n    var mi = typeof(HostingEnvironment).GetMethod(\"RegisterVirtualPathProviderInternal\", BindingFlags.NonPublic | BindingFlags.Static);\n    if (mi == null)\n        return;\n\n    mi.Invoke(hostingEnvironmentInstance, new object[] { assemblyResourceProvider });\n</code></pre></li>\n<li><p>I use this at my RouteConfig.cs to make the embedded script and picture files work:</p>\n\n<pre><code>   routes.IgnoreRoute(\"{*staticfile}\", new { staticfile = @\".*\\.(css|js|gif|png|jpg|exe)(/.*)?\" });\n</code></pre></li>\n<li><p>I add these lines (there are more) to my web.config to tell asp to use my path provider for my embedded sources:</p>\n\n<pre><code>  &lt;add name=\"AspNetStaticFileHandler-PNG\" path=\"*.png\" verb=\"GET,HEAD\" type=\"System.Web.StaticFileHandler\"/&gt;\n</code></pre></li>\n<li><p>I  use the Boc.Web.PrecompiledViews dll to register the path attributes generated by RazorGenerator</p>\n\n<pre><code>BoC.Web.Mvc.PrecompiledViews.ApplicationPartRegistry.Register(assembly);\n</code></pre></li>\n</ul>\n\n<p>Everything is working as intended in Visual Studio. The views and resources embedded in a dll are showing and working flawlessly. I also use IIS 7.5 to run my web app from Visual Studio. All of the possibilities work:</p>\n\n<ul>\n<li>it works if i give the virtual path generated by Razor Generator (ex: \"~/Views/ViewTest/Test)</li>\n<li>it works if i give the Dll resources path which uses my resourceprovider (ex: \"DllResources/ViewTest.dll/Views/ViewTest/Test.cshtml)</li>\n</ul>\n\n<p>However, after i deploy my web app and run it using IIS 7.5, the Views(only the views!) are not showing! If i address the views with the virtual path (option 1), IIS gives this error message:</p>\n\n<pre><code>    The view 'Index' or its master was not found or no view engine supports the searched locations. The following locations were searched:\n</code></pre>\n\n<p>if i address the views with the DllResources path (option 2), IIS gives this error message:</p>\n\n<pre><code>    The file '/Views/ViewTest/DllResources/EmbeddedResourceTest/Views/ViewTest/Test.cshtml' has not been pre-compiled, and cannot be requested.\n</code></pre>\n\n<p>I dont know what to do now to make it work. I have tried to replace every single step with other solutions. The result is still the same. Flawlessly working in VS, but the views are not showing after deployment.</p>\n\n<p>Is it some config for the IIS what is missing? am i missing something from the web.config?\nPlease help me with this issue.</p>\n\n<p>Thanks,\nNorbert</p>\n"},{"tags":["java","javascript","asp.net-mvc","applet"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":13001407,"title":"How use java applet with javascript","body":"<p>what I do to use java to javascript:</p>\n\n<p>step1:</p>\n\n<p>I create in netBeans \"Java Application\":</p>\n\n<pre><code>package com.mkyong.applet;\n\nimport java.applet.Applet;\nimport java.awt.FlowLayout;\nimport java.awt.TextArea;\n\npublic class JavaScriptToJava extends Applet{\n\n    TextArea textBox;\n\n    public void init(){\n        setLayout(new FlowLayout());\n        textBox = new TextArea(5,40);\n        add(textBox);\n    }\n\n    public void appendText(String text){\n        textBox.append(text);\n    }       \n}\n</code></pre>\n\n<p>Builded.\nGet copy file <code>...\\build\\classes\\com\\mkyong\\applet\\JavaScriptToJava.class</code> to <code>~/Content/applets/</code></p>\n\n<p>step2:</p>\n\n<p>Create html view:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        document.AppletABC.appendText('welcome to mkyong dot com');\n    })\n&lt;/script&gt;\n\n&lt;h1&gt;Javascript acess Applet method&lt;/h1&gt;\n&lt;applet width=300 height=100 id=\"AppletABC\" code=\"com.mkyong.applet.JavaScriptToJava.class\" codebase=\"~/Content/applets/JavaScriptToJava.class\"&gt;\n&lt;/applet&gt;\n</code></pre>\n\n<p>Load this page, I see the word \"plugin is not\".</p>\n\n<p>What am I doing wrong? I need to call the java</p>\n\n<p>UPDATE:</p>\n\n<p>js errors: </p>\n\n<blockquote>\n  <p>document.AppletABC.appendText('welcome to mkyong dot com'); not found\n  function appletABC</p>\n</blockquote>\n"},{"tags":["sql-server","asp.net-mvc","asp.net-web-api","web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":465,"score":0,"question_id":11769279,"title":"ASP.NET MVC 4/Web API - How to configure SQL Server to allow access to API calls from a URL in browser?","body":"<p>I have a server with a SQL Server 2012 Express database. I am authenticated to connect to it and am using it as the backend for an ASP.NET MVC 4 application. </p>\n\n<p>With this application I'm also developing an API. Calling the API programmatically using jQuery within my own application works fine. Querying the database to get the information works as well. </p>\n\n<p>However, when I run the application from VS2010 and try accessing the API by using a URL that would access the database, I get an HTTP 500 Error. </p>\n\n<p>Just to make sure this issue isn't on my application's end, I then modified the API resource so it gets a local array (instead of information from the database) and when I hit the same URL, it returned the information in XML form on the localhost page.</p>\n\n<p>The problem seems to be that the URL call to the API attempts to connect to the database not as the authenticated user (me), but from the browser. </p>\n\n<p>How can I configure SQL Server to allow a URL call to the API in the browser to access the database and return the data in JSON/XML form? (eg. like you can do with the Twitter REST API)</p>\n\n<p><strong>UPDATE:</strong>\nDebugging output on HTTP Request:</p>\n\n<p>Request URL:http://localhost:5555/api/Performance/ShowMachines</p>\n\n<p>Request Method:GET</p>\n\n<p>Status Code:500 Internal Server Error</p>\n\n<p>Request Headersview source</p>\n\n<p>Accept:text/html,application/xhtml+xml,application/xml;q=0.9,<em>/</em>;q=0.8</p>\n\n<p>Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3</p>\n\n<p>Accept-Encoding:gzip,deflate,sdch</p>\n\n<p>Accept-Language:en-US,en;q=0.8</p>\n\n<p>Connection:keep-alive</p>\n\n<p>Host:localhost:5555</p>\n\n<p>User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11</p>\n\n<p>Response Headersview source</p>\n\n<p>Cache-Control:private</p>\n\n<p>Connection:Close</p>\n\n<p>Content-Length:0</p>\n\n<p>Date:Thu, 02 Aug 2012 16:40:11 GMT</p>\n\n<p>Server:ASP.NET Development Server/10.0.0.0</p>\n\n<p>X-AspNet-Version:4.0.30319</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12529064,"title":"Using WebApi in Empty Project of Asp.net MVC","body":"<p>Is it possible to use Web Api in an existing project of Asp.Net MVC 4? Actually we have started the building project using Empty MVC Application template and now want to use Web Apli functionality in the project. Is it possible or do i need to add some Web Api DLL's in the project.</p>\n"},{"tags":["asp.net-mvc","asp.net-web-api","web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":236,"score":0,"question_id":12641386,"title":"failed to serialize the response in Web API","body":"<p>I was working on ASP.NET MVC web API,\n I m having this error:</p>\n\n<pre><code>&lt;ExceptionMessage&gt;\nThe 'ObjectContent`1' type failed to serialize the response body for content type 'application/xml; charset=utf-8'.\n&lt;/ExceptionMessage&gt;\n&lt;ExceptionType&gt;System.InvalidOperationException&lt;/ExceptionType&gt;\n</code></pre>\n\n<p>My controller is</p>\n\n<pre><code>public Employee GetEmployees()\n        {\n            Employee employees =(from e in db.Employees\n                            select e).First();\n            return employees;\n        }\n</code></pre>\n\n<p>why I m getting this error??? please help... thnx.</p>\n"},{"tags":["asp.net","asp.net-mvc","asp.net-mvc-3","caching","asp.net-mvc-4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12908382,"title":"How to add an object to a Cache and Access the data from cache in MVC4?","body":"<p>Hi all i have an object which returns data like this</p>\n\n<pre><code>         var productdetial=  {\n                               \"productId\": \"1\",\n                               \"productname\": \"Casualshirts\",\n                               \"productSkus\": [\n                                                   {\n                                                     \"Skuimage\": \"URL\",\n                                                     \"SKU\": [\n                                                               {\n                                                                  \"ProducSKU\": \"Shoe1001\",\n                                                                  \"Options\": [\n                                                                                {\n                                                                                  \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Black\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"ProducSKU\": \"Shoe1002\",\n                \"Options\": [\n                    {\n                        \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Red\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            },\n            {\n                \"ProducSKU\": \"Shoe1003\",\n                \"Options\": [\n                    {\n                        \"productOptions\": [\n                            {\n                                \"OptionID\": \"1\",\n                                \"optionname\": \"Color\",\n                                \"value\": \"Orange\"\n                            },\n                            {\n                                \"OptionID\": \"2\",\n                                \"optionname\": \"Size\",\n                                \"value\": \"S\"\n                            },\n                            {\n                                \"OptionID\": \"3\",\n                                \"optionname\": \"Fit\",\n                                \"value\": \"Regular\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n</code></pre>\n\n<p>now what i want is i want to keep this data in cache, and i am binding this data to my view ,now what i want is when ever i make a request from my now on i should be able to access data from the above object whihc is in cache...cana ny one help me how can i do this how do i add this object to a cache and access data from there </p>\n"},{"tags":["jquery","asp.net-mvc","jquery-ui"],"answer_count":6,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":7341,"score":2,"question_id":5419558,"title":"jQuery UI reload tab content in ASP.NET MVC 3 application","body":"<p>I'd like in an ASP.NET MVC 3 reload the tab content each tab I change tab, when I select the first tab (index = 0), I'd like reload the content. In the tab, it's a ASP.NET MVC partial View</p>\n\n<p>I have this code :</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(function () {\n        $('#tabs').tabs();\n    });\n&lt;/script&gt;\n\n&lt;div id=\"tabs\"&gt; \n    &lt;ul&gt; \n        &lt;li&gt;&lt;a href=\"#tabs-1\"&gt;AAAA&lt;/a&gt;&lt;/li&gt; \n        &lt;li&gt;&lt;a href=\"#tabs-2\"&gt;BBBB&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n\n    &lt;div id=\"tabs-1\"&gt; \n        @Html.Partial(\"PartialViewA\", Model)\n    &lt;/div&gt; \n    &lt;div id=\"tabs-2\"&gt; \n        @Html.Partial(\"PartialViewB\", Model)\n    &lt;/div&gt; \n\n&lt;div&gt;\n</code></pre>\n\n<p>Do you have an idea ?</p>\n"},{"tags":["c#","asp.net-mvc","nopcommerce"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12488333,"title":"The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'","body":"<p>I'm using nopcommerce open source.\nSo I want to add another table and I want to add another tab in Product Variant.</p>\n\n<p>So I create a model.</p>\n\n<pre><code> public partial class ProductVariantPriceRangeModel : BaseNopEntityModel\n        {\n            public int ProductVariantId { get; set; }\n\n             [NopResourceDisplayName(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.SpecialPriceStartDate\")]\n           [DisplayFormat(NullDisplayText = \"\", DataFormatString = \"{0:yyyy-MM-dd}\")]\n\n            public DateTime? SpecialPriceStartDate { get; set; }\n\n             [NopResourceDisplayName(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.SpecialPriceEndtDate\")]\n            [DisplayFormat(NullDisplayText = \"\", DataFormatString = \"{0:yyyy-MM-dd}\")]\n\n            public DateTime? SpecialPriceEndtDate { get; set; }\n\n\n            [NopResourceDisplayName(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.Fields.Price\")]\n\n            public decimal Price1 { get; set; }\n        }\n</code></pre>\n\n<p>This is my Controller.</p>\n\n<pre><code>[HttpPost, GridAction(EnableCustomBinding = true)]\n        public ActionResult ProductVariantPriceRangeList(GridCommand command, int productVariantId)\n        {\n            if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))\n                return AccessDeniedView();\n\n            var productVariant = _productService.GetProductVariantById(productVariantId);\n            if (productVariant == null)\n                throw new ArgumentException(\"No product variant found with the specified id\");\n\n            var productVariantPriceRange = productVariant.ProductVariantPriceRange;\n            var productVariantPriceRangeModel = productVariantPriceRange\n                .Select(x =&gt;\n                {\n                    return new ProductVariantModel.ProductVariantPriceRangeModel()\n                    {                      \n\n                        Id = x.Id,                       \n                        ProductVariantId = x.ProductVariantId,\n                        SpecialPriceStartDate = x.SpecialPriceStartDate,\n                        SpecialPriceEndtDate=x.SpecialPriceEndtDate,                       \n                        Price1 = x.SpecialPrice\n                    };\n                })\n                .ToList();\n\n            var model = new GridModel&lt;ProductVariantModel.ProductVariantPriceRangeModel&gt;\n            {\n                Data = productVariantPriceRangeModel,\n                Total = productVariantPriceRangeModel.Count\n            };\n\n            return new JsonResult\n            {\n                Data = model\n            };\n        }\n</code></pre>\n\n<p>This is my view.</p>\n\n<pre><code>@model ProductVariantModel\n@using Telerik.Web.Mvc.UI;\n@using Nop.Core.Domain.Catalog;\n@using Nop.Admin;\n@Html.ValidationSummary(false)\n@Html.HiddenFor(model =&gt; model.Id)\n@Html.HiddenFor(model =&gt; model.ProductId)\n\n\n\n@Html.Telerik().TabStrip().Name(\"productvariant-edit\").Items(x =&gt;\n{\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.Info\").Text).Content(TabInfo().ToHtmlString()).Selected(true);\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.TierPrices\").Text).Content(TabTierPrices().ToHtmlString());\n     x.Add().Text(T(\"Admin.Catalog.Products.Variants.ProductVariantAttributes\").Text).Content(TabProductVariantAttributes().ToHtmlString());\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.Discounts\").Text).Content(TabDiscounts().ToHtmlString());\n\n    x.Add().Text(T(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange\").Text).Content(TabProductVariantPriceRange().ToHtmlString());\n\n    //generate an event\n    EngineContext.Current.Resolve&lt;IEventPublisher&gt;().Publish(new AdminTabStripCreated(x, \"productvariant-edit\"));\n})\n\n\n\n@helper TabProductVariantPriceRange()\n    {\n      if (Model.Id &gt; 0)\n        {\n   @(Html.Telerik().Grid&lt;ProductVariantModel.ProductVariantPriceRangeModel&gt;()\n                        .Name(\"productVariantPriceRange-grid\")\n                .DataKeys(keys =&gt;\n                {\n                    keys.Add(x =&gt; x.Id);\n                })\n                .DataBinding(dataBinding =&gt;\n                {\n                    dataBinding.Ajax()\n                        .Select(\"ProductVariantPriceRangeList\", \"ProductVariant\", new { productVariantId = Model.Id })\n                        .Insert(\"ProductVariantPriceRangeInsert\", \"ProductVariant\", new { productVariantId = Model.Id })\n                        .Update(\"ProductVariantPriceRangeUpdate\", \"ProductVariant\")\n                       .Delete(\"ProductVariantPriceRangeDelete\", \"ProductVariant\");\n                })\n                .Columns(columns =&gt;\n                {\n                    columns.Bound(x =&gt; x.ProductVariantId)\n                        .Width(100).ReadOnly()\n                        .Centered();                    \n\n\n                    columns.Bound(x =&gt; x.SpecialPriceStartDate)\n                       .Width(200)\n                        .Centered();\n                    //columns.Bound(x =&gt; x.SpecialPriceEndtDate)\n                    //    .Width(200)\n                    //    .Centered();\n\n                    columns.Bound(x =&gt; x.Price1)\n                        .Width(100);\n                    columns.Command(commands =&gt;\n                    {\n                        commands.Edit();\n                        commands.Delete();\n                    })\n                    .Width(180);\n\n\n                })\n                .ToolBar(commands =&gt; commands.Insert())\n                .ClientEvents(events =&gt; events.OnEdit(\"onTierPriceEdit\"))\n                .EnableCustomBinding(true))\n\n\n        }\n        else\n        {\n    @T(\"Admin.Catalog.Products.Variants.ProductVariantPriceRange.SaveBeforeEdit\")\n        }\n\n}\n</code></pre>\n\n<p>When I run the programmer there is a error..</p>\n\n<pre><code>The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'.\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.\n\nException Details: System.InvalidOperationException: The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'.\n\nSource Error:\n\n\nLine 83:       if (Model.Id &gt; 0)\nLine 84:         {\nLine 85:    @(Html.Telerik().Grid&lt;ProductVariantModel.ProductVariantPriceRangeModel&gt;()\nLine 86:                         .Name(\"productVariantPriceRange-grid\")\nLine 87:                 .DataKeys(keys =&gt;\n</code></pre>\n\n<p>How can I solve it??</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":5,"favorite_count":9,"up_vote_count":11,"down_vote_count":0,"view_count":7938,"score":11,"question_id":780436,"title":"ASP MVC Authorize all actions except a few","body":"<p>I have a controller and I would like to require Authorization for all actions by default except a couple. So in the example below all actions should require authentication except the Index. I don't want to decorate every action with the Authorize, I just want to override the default authorization in certain circumstances probably with a custom filter such as NotAuthorize.</p>\n\n<pre><code>[Authorize]\npublic class HomeController : BaseController\n{\n    [NotAuthorize]\n    public ActionResult Index()\n    {\n        // This one wont\n        return View();\n    }\n\n    public ActionResult About()\n    {\n        // This action will require authorization\n        return View();\n    }\n}\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13068934,"title":"How to post data through multiple partial view in mvc3","body":"<p><strong>view:</strong></p>\n\n<pre><code>@model \n@using (Html.BeginForm(\"action\", \"Controller\"))\n{\n   @html.action(\"action1\",\"controller1\") //use model1\n   @html.action(\"action2\",\"controller2\") //use model2\n   @html.action(\"action3\",\"controller3\") //use model3\n   &lt;button type=\"submit\"&gt;submit&lt;/button&gt;\n}\n</code></pre>\n\n<p><strong>Parent Model</strong></p>\n\n<pre><code>{\n  public model model1{get; set;} \n\n  public model model2{get; set;} \n\n  public model model3{get; set;} \n}\n</code></pre>\n\n<p><strong>controller</strong></p>\n\n<pre><code>[httppost]\n public ActionResult Submit(parentmodel abc)\n    {\n\n    }\n</code></pre>\n\n<p>So my question is when I post the data the parentmodel is return as null but when I try as</p>\n\n<pre><code>[httppost]\npublic ActionResult Submit(model1 abc)\n{\n}\n</code></pre>\n\n<p>I get the form values in model1. Is my approach right? What should be done to get the form values in the parent model?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","mvc","razor"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13066824,"title":"Unable to cast object of type in MVC 3.0 Razor","body":"<p>I am new MVC 3.0 Razor.  I am using LINQ to get the details of profiles.</p>\n\n<p>In the controller i am using</p>\n\n<pre><code>  var q = from m in networks.Entities\n                    join o in networks.EntityTypes on m.EntityTypeIdFk \n                    where m.Status == 1\n                    orderby m.EntityName\n                    select new { m.EntityName,m.EntityDescription,o.EntityTypeName };\n\n            ViewBag.EntitiesName = q.ToList();\n</code></pre>\n\n<p>on the View i m using</p>\n\n<pre><code>@foreach (var res in ViewBag.EntitiesName)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;@res.EntityName&lt;/td&gt;\n            &lt;td&gt;@res.EntityDescription&lt;/td&gt;\n            &lt;td&gt;@res.EntityTypeName&lt;/td&gt;\n        &lt;/tr&gt;\n    }\n</code></pre>\n\n<p>in the @res i m getting the resultant array. But still i m getting error \"Unable to cast object of type\"</p>\n\n<p>Please Help me to resolve this.</p>\n\n<p>Thanks,\nSaloni</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-4","asp.net-web-api","dotnet-httpclient"],"answer_count":4,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":4394,"score":13,"question_id":10660721,"title":"What is the difference between HttpResponseMessage and HttpResponseException","body":"<p>I tried to understand both and write sample code:</p>\n\n<pre><code> public HttpResponseMessage Get()\n {\n     var response = ControllerContext.Request\n                         .CreateResponse(HttpStatusCode.BadRequest, \"abc\");\n\n     throw new HttpResponseException(response);\n }\n</code></pre>\n\n<p>And:</p>\n\n<pre><code> public HttpResponseMessage Get()\n {\n     return ControllerContext.Request\n                        .CreateResponse(HttpStatusCode.BadRequest, \"abc\");\n }\n</code></pre>\n\n<p>From Fiddle, I really didn't see any differences between them, so what is the purpose of using <code>HttpResponseException</code>?</p>\n"},{"tags":["c#","asp.net-mvc","mvc","deployment"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":2827,"score":1,"question_id":5832653,"title":"How to deploy an MVC application on IIS 7?","body":"<p>I have a MVC application and I can't get it working on IIS 7. Debugging in VS2010 works fine, but when I publish the website to my local IIS7, I see nothing but blank pages.</p>\n\n<p>Here is what I have done:</p>\n\n<p>On the project, right click and click Publish. In the Publish Web window I set these settings:</p>\n\n<ul>\n<li>Publish method: Web deploy</li>\n<li>Service URL: localhost</li>\n<li>Site/application: Default Web Sit\\Africa</li>\n<li>both, <code>Mark as IIS application on destination</code> and <code>Leave extra files on destination (do not delete</code> are checked.</li>\n</ul>\n\n<p>In IIS, my application runs under a application pool with supports .net 4.0 and managed pipeline is set to integrated.</p>\n\n<p>I don't get any error while publishing, but when I navigate to my site I only see blank pages. Nothing happens.</p>\n\n<p>What goes wrong?</p>\n\n<p>EDIT:</p>\n\n<p>When I navigate to <a href=\"http://localhost/Africa/\" rel=\"nofollow\">http://localhost/Africa/</a> I see a blank page. When I navigate to <a href=\"http://localhost/Africa/Views/Home/\" rel=\"nofollow\">http://localhost/Africa/Views/Home/</a> I get a 500 error. </p>\n\n<p>How can I solve this?</p>\n"},{"tags":["css","asp.net-mvc","razor","compression","squishit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13063171,"title":"How to add dynamic CSS source urls in Squishit?","body":"<p>How to add dynamic CSS source path/urls in Squishit?</p>\n\n<pre><code> @Html.Raw(\n        Bundle.Css()\n        .Add(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/a.css\")\n        .Add(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/b.css\")\n        .Add(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/c.css\")\n        .Render(\"~/Styles/\" + (ViewBag.SiteName ?? \"default\") + \"/o#.css\")\n    ) \n</code></pre>\n\n<p>This will throw an error.</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-4","unobtrusive-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":116,"score":1,"question_id":13058900,"title":"MVC 4 Unobtrusive Validation on objects in a view model","body":"<p>I have validation attributes on the properties in my model.  If I pass the model to the view the validation works fine.  However, when that model is a property of a View Model and the controller passes the View Model to the view, the unobtrusive validation no longer works and it doesn't get validated on the controller.  The model binding to the controller works just fine on post either way.</p>\n\n<p>If one can bind hidden fields and such using dot notation for objects in a view model why doesnt unobtrusive validation also work, does anyone have advice on how to get this to work?</p>\n\n<p>View Model (the first class below is what the view uses, \"Required\" or not on its first property doesn't make a difference)</p>\n\n<pre><code>public class PlanStakeholderViewModel : PlanGoalSelectorViewModel\n{\n    [Required]\n    public PlanStakeholder PlanStakeholder { get; set; }\n}\npublic class PlanGoalSelectorViewModel\n{\n    public IList&lt;PlanGoal&gt; AvailableGoals { get; set; }\n    public IList&lt;PlanGoal&gt; SelectedGoals { get; set; }\n    public PostedGoals PostedGoals { get; set; }\n}\n\npublic class PostedGoals\n{\n    public string[] GoalIDs { get; set; }\n}\n</code></pre>\n\n<p>VIEW</p>\n\n<pre><code>@using (Html.BeginForm())\n{\n    @Html.ValidationSummary(true)\n    @Html.Hidden(\"PlanStakeholder.PlanID\")\n    @Html.Hidden(\"PlanStakeholder.Id\")\n\n    @Html.Partial(\"_Form\")  \n\n    &lt;div class=\"editor-label\"&gt;&lt;/div&gt;\n    &lt;div class=\"editor-field\"&gt;\n        &lt;input type=\"submit\" value=\"Save\" /&gt; | @Html.ActionLink(\"Back to Plan\", \"Index\", \"Plan\")\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>VIEW _Form</p>\n\n<pre><code>@model Navigator.Views.ViewModels.PlanStakeholderViewModel\n\n&lt;div class=\"editor-label\" style=\"vertical-align:top\"&gt;\n    @Html.LabelFor(model =&gt; model.PlanStakeholder.Name)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.PlanStakeholder.Name)\n    @Html.ValidationMessageFor(model =&gt; model.PlanStakeholder.Name)\n&lt;/div&gt;\n\n&lt;div class=\"editor-label\" style=\"vertical-align:top\"&gt;\n    @Html.LabelFor(model =&gt; model.PlanStakeholder.Relationship)\n&lt;/div&gt;\n&lt;div class=\"editor-field\"&gt;\n    @Html.EditorFor(model =&gt; model.PlanStakeholder.Relationship)\n    @Html.ValidationMessageFor(model =&gt; model.PlanStakeholder.Relationship)\n&lt;/div&gt;\n\n&lt;div class=\"editor-label\" style=\"vertical-align:top\"&gt;\n     &lt;label&gt;Associated Goals&lt;/label&gt;\n&lt;/div&gt;\n&lt;div class=\"editor-field checkbox\"&gt;\n@Html.CheckBoxListFor(x =&gt; x.PostedGoals.GoalIDs,\n                      x =&gt; x.AvailableGoals,          \n                      x =&gt; x.Id,               \n                      x =&gt; x.ShortTitle,               \n                      x =&gt; x.SelectedGoals,\n                      Position.Vertical)\n&lt;/div&gt;\n</code></pre>\n\n<p>MODEL</p>\n\n<pre><code>public class PlanStakeholder : Base\n{\n    public PlanStakeholder()\n    {\n        PlanID = -1;\n        Relationship = String.Empty;\n        Name = String.Empty;\n    }\n\n    [Required]\n    public int PlanID { get; set; }\n\n    [Required]\n    [MaxLength(50, ErrorMessage = \"The {0} cannot be more than {1} characters.\")]\n    public string Relationship { get; set; }\n\n    [Required]\n    [MaxLength(50, ErrorMessage = \"The {0} cannot be more than {1} characters.\")]\n    public string Name { get; set; }\n}\n</code></pre>\n\n<p><strong>UPDATE 1</strong>\nBelow is the output of the form html for the Relationship property.</p>\n\n<pre><code>&lt;input class=\"text-box single-line\" data-val=\"true\" data-val-required=\"The Relationship field is required.\" id=\"PlanStakeholder_Relationship\" name=\"PlanStakeholder.Relationship\" type=\"text\" value=\"Mom\" /&gt;\n</code></pre>\n\n<p>Below is the controller actions</p>\n\n<pre><code>[AuthorizeRoles(RoleSite.None, RoleOrg.OrgMember, RoleCohort.Client)]\npublic ActionResult Edit(int id, int planId)\n{\n    var plan = PlanManager.GetSingle(CurrentUser.UserId, CurrentOrg.Id);\n\n    var model = new PlanStakeholderViewModel();\n    model.PlanStakeholder = PlanStakeholderManager.GetSingle(id, CurrentUser.UserId);\n    model.AvailableGoals = PlanGoalManager.GetList(plan.Id, CurrentUser.UserId);\n    model.SelectedGoals = PlanGoalManager.GetRelatedToStakeholder(id, CurrentUser.UserId);\n\n    if (model.Item.Id != id)\n    {\n        return HttpNotFound();\n    }\n\n    return View(model);\n}\n\n[HttpPost, ActionName(\"Edit\")]\n[AuthorizeRoles(RoleSite.None, RoleOrg.OrgMember, RoleCohort.Client)]\npublic ActionResult EditConfirmed(PlanStakeholderViewModel model)\n{\n    if (ModelState.IsValid)\n    {\n        ///DO STUFF\n        return RedirectToAction(\"Index\", \"Plan\");\n    }\n    return View(model);\n}\n</code></pre>\n\n<p><strong>UPDATE 2</strong>\nIf I comment out the CheckBoxListFor in the view then everything works fine.  Looks like I need to take this question/issue <a href=\"http://mvccbl.com/\" rel=\"nofollow\">elsewhere</a>.  When not commented out, if I enter a value for PlanStakeholder.Name that is longer than whats allowed by the model I get \"Value cannot be null. Parameter name: source\" as my asp.net error on the line that has the @Html.CheckBoxListFor.</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13078486,"title":"How do I call an Index action and conditionally pass it a value in an ASP.NET MVC app","body":"<p>I have an index action on a controller as follows...</p>\n\n<pre><code>public ActionResult Index(string errorMsg = \"\")\n   {\n      //do stuff\n      ViewBag.ErrorMsg=erorMsg;\n\n      return View();\n   }\n</code></pre>\n\n<p>I have another action that is an http post for Index.  </p>\n\n<p>When there is something wrong I want to reload the Index page and show the error...</p>\n\n<p>I have my view already conditionally showing errorMsg.  But I cannot figure out how to call Index and pass in the error string?</p>\n"},{"tags":["asp.net-mvc","iis","iis7","iis-express","iis8"],"answer_count":4,"favorite_count":6,"up_vote_count":9,"down_vote_count":0,"view_count":593,"score":9,"question_id":11728846,"title":"Dots in URL causes 404 with ASP.NET mvc and IIS","body":"<p>I have a project that requires my URLs have dots in the path. For example I may have a URL such as www.example.com/people/michael.phelps</p>\n\n<p>URLs with the dot generate a 404. My routing is fine. If I pass in michaelphelps, without the dot, then everything works. If I add the dot I get a 404 error. The sample site is running on Windows 7 with IIS8 Express. URLScan is not running. </p>\n\n<p>I tried adding the following to my web.config:</p>\n\n<pre><code>&lt;security&gt;\n  &lt;requestFiltering allowDoubleEscaping=\"true\"/&gt;\n&lt;/security&gt;\n</code></pre>\n\n<p></p>\n\n<p>Unfortunately that didn't make a difference. I just receive a 404.0 Not Found error. </p>\n\n<p>This is a MVC4 project but I don't think that's relevant. My routing works fine and the parameters I expect are there, until they include a dot.</p>\n\n<p>What do I need to configure so I can have dots in my URL?</p>\n"},{"tags":["asp.net","asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13076665,"title":"ajax paging asp.net mvc","body":"<p>I know how to hook up ajax paging to a grid or a webgrid in asp.net mvc. But how can I accomplish ajax paging, using custom paging for large data sets for another format outside of a table grid.</p>\n\n<p>Is that even possible using an mvc helper or mvc.pagedlist?</p>\n\n<p>I used to be a webforms guys and it was so easy to hook up a listview where you could use divs to create whatever layout you want for individual items, you could then hook up a datapage and wrap it all in an update panel.</p>\n\n<p>Basically I want a list of items that I can page through via ajax but with having large data sets I can just pull down all the items and page via jquery, I need to do custom paging on the server side and only return the items for a specific page.</p>\n"},{"tags":["c#","asp.net-mvc","asp.net-mvc-3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13077146,"title":"Entity not posted back","body":"<p>Here's the controller method that calls the view:</p>\n\n<pre><code>[HttpGet]\n        public ActionResult Edit(int? paramid)\n        {\n            var document = documentRepository.DocumentsWithEmpty.FirstOrDefault(c =&gt; c.ID == paramid.Value);\n            RC rc = new RC(document);\n            return View(\"RC\", rc);\n        }\n</code></pre>\n\n<p>Here's the view (pretty empty for the moment)</p>\n\n<pre><code>@model RC\n\n@{\n    Layout = null;\n}\n@using (Html.BeginForm()) //I've also tried by specifying the method/controller/param\n{\n   //I've also tried with some @Html.EditorFor items\n}\n</code></pre>\n\n<p>And the method in the controller to catch the posted <code>RC</code></p>\n\n<pre><code>[HttpPost]\npublic ActionResult Edit(RC rc) //If I put no parameter, it gets called correctly\n{\n    throw new Exception(\"x\");\n}\n</code></pre>\n\n<p>It is the only entity/place where it doesn't work correctly. Could it be because RC isn't an entity in my database?</p>\n\n<p>Firebug points these for both the GET and POST requests (with the POST request in red). Pretty straightforward</p>\n\n<pre><code>http://localhost:58136/Documents/Edit/23?_=1351197746968\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13076353,"title":"How to get string url out of registered route in asp.net mvc?","body":"<p>In Global.asax we register routes using:</p>\n\n<pre><code>MapRoute(this System.Web.Routing.RouteCollection routes, \n    string name, \n    string url, \n    object defaults, \n    string[] namespaces)\n</code></pre>\n\n<p>Is there a way to retrieve the <code>string url</code> from code? Specifically, I am interested in getting route segments from the urls for registered routes like this:</p>\n\n<pre><code>\"customRoutePrefix/{controller}/{action}/{id}\"\n</code></pre>\n\n<p>I need to look up \"customRoutePrefix\" or the equivalent for any registered routes.</p>\n\n<p>I thought I might be able to use <code>System.Web.Routing.RouteTable.Routes</code> to do this, but I haven't found it in there.</p>\n\n<p>Is this possible / how should I do this?</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12654039,"title":"how should a controller pass back different entities or collections to a view","body":"<p>Most of the samples I see online are showing CRUD with single entity class.</p>\n\n<p>If I were to create a CRM application and one of the views needs to display customer information in read only mode and on the same page, display Contacts, Notes, Attachments, Addresses, how should the controller pass these different entities to the view?<br>\nShould I be creating another model class which will be a container for the various other entities and populate that model class with the various entities and pass back to the View.</p>\n\n<p>In another scenario, say I wanted to display the Customer entity in Edit mode and the View has dropdowns for Customer Active Status, Customer StateCode, Customer Satisfaction dropdowns.  Each of these dropdowns have other entity collections that are bound to them. So, again in this scenario, how should a controller pass back the model which has all these entities and not just Customer entity.</p>\n\n<p>I continue to read on ViewModel pattern and I think this may be the way to go but would certainly appreciate more guidance and pointers.</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-3","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":12690879,"title":"ASP.Net MVC View with RadioButtonList with Other freeformat selection","body":"<p>I am putting together questionairre for registering for an event.</p>\n\n<p>One of the eventr registration questions is:</p>\n\n<pre><code>What is your main job function?\n    Director/MD/Owner\n    Manager\n    Team Leader\n    Other: Please state\n</code></pre>\n\n<p>I would like this to show as a drop down box, or a radio button list in my view, but also with a textbox underneath or next to the \"Other\" radiobutton, so that a free form \"Other\" job function can be entered.  How would I bind this in my view?</p>\n\n<p>I suspect my model will contain:</p>\n\n<pre><code>    [Display(Name = \"What is your main job function?\")]\n    public string JobFunction { get; set; }\n</code></pre>\n\n<p>...where JobFunction get's populated by the selected item above.  But how in my controller, would I override the selected item, if it's \"Other\" and substitute it with the text box on the view?</p>\n\n<p>I'm sure this has been done many times before - so thank you for any help,</p>\n\n<p>Mark</p>\n"},{"tags":["c#","asp.net-mvc","exception","routes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13076354,"title":"Exception been thrown in route collection in Global.asax.cs","body":"<p>I've been following the excellent MVC Music Store tutorial over at <a href=\"http://www.asp.net/mvc/tutorials/mvc-music-store\" rel=\"nofollow\">ASP.NET</a>. All was going well until I ran into this unhandled exception:</p>\n\n<blockquote>\n  <p>A route named 'Default' is already in the route collection. Route names must be unique. Parameter name: name</p>\n</blockquote>\n\n<p>The following piece of code is highlighted when the exception is thrown:</p>\n\n<pre><code>routes.MapRoute(\n     \"Default\", // Route name\n     \"{controller}/{action}/{id}\", // URL with parameters\n      new { controller = \"Home\", action = \"Index\", id = UrlParameter.Optional } // Parameter defaults\n);\n</code></pre>\n\n<p>I hadn't modified the above piece of code at all. The only change I made to the global file was to include some code in Applicatio_Start that tells the Entity Framework about .cs class that contains sample data.</p>\n\n<p>I'm at a loss as to why this is happening, and, as I'm doing a tutorial, MVC is obviously new to me. Would be much appreciated if someone could resolve the issue.</p>\n"},{"tags":["c#","asp.net-mvc","controller","asp.net-mvc-4","asp.net-mvc-routing"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13075812,"title":"Redirecting from OnActionExecuting -- Matched route does not include a 'controller' value","body":"<p>This should be a super easy task - redirecting from a base controller. Here's an exemplary reference, but does not cover the error I'm experiencing: <a href=\"http://stackoverflow.com/questions/3214774/how-to-redirect-from-onactionexecuting-in-base-controller\">Redirecting from OnActionExecuting in a Base Controller</a></p>\n\n<h3>Code:</h3>\n\n<pre><code>protected override void OnActionExecuting(ActionExecutingContext filterContext)\n{\n    if (myObject == null) {\n        // System.InvalidOperationException: The matched route does not include a 'controller' route value, which is required.            \n        filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary {{ \"controller\", \"controllerName\"}, {\"action\", \"actionName\"}});\n\n        // Throws the same exception: \n        filterContext.Result = RedirectToAction(\"actionName\", \"controllerName\");\n    }\n}\n</code></pre>\n\n<h3>Rendered URL:</h3>\n\n<pre><code>http://localhost/controllerName/actionName?controller=controllerName&amp;action=actionName\n</code></pre>\n\n<p>When debugging, the redirect object passed to the Result property contains both a controller and action value. And in the returned URL it is also present.</p>\n\n<h3>Question:</h3>\n\n<p>Why is it complaining that there is no controller value? And why does it show the controller and action values in the query string in addition to the normal format?</p>\n\n<h3>Updated:</h3>\n\n<pre><code>// hard coded URL produces the same result. What am I misunderstanding?\nfilterContext.Result = new RedirectResult(\"~/Employee/Create\");\n</code></pre>\n"},{"tags":["asp.net-mvc","linq"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13074786,"title":"pass a linq query with group by to view [errors out]","body":"<p>I got this in the controller </p>\n\n<pre><code>var tobi = (from a in db.Assessments\njoin u in db.Users on a.rated equals u.user_id\njoin tm in db.Team_Members on u.user_id equals tm.user_id\njoin t in db.Teams on tm.team_id equals t.team_id\nwhere (tm.end_date == null || tm.end_date &gt; DateTime.Today)\ngroup new TobiViewModel\n{\n    teamname = t.name,\n    assessed_due = a.assessed_due,\n    assessment_id = a.assessment_id,\n    rater = a.rater,\n    rated = a.rated\n}\nby new { t.name, a.rated }).ToList();\n\nreturn View(tobi);\n</code></pre>\n\n<p>But then it doesn't accept it in the view?</p>\n\n<blockquote>\n  <p>The model item passed into the dictionary is of type\n  'System.Collections.Generic.List<code>1[System.Linq.IGrouping</code>2[&lt;>f__AnonymousType10<code>2[System.String,System.String],Kyubu.ViewModels.TobiViewModel]]',\n  but this dictionary requires a model item of type\n  'System.Collections.Generic.IEnumerable</code>1[Kyubu.ViewModels.TobiViewModel]'.</p>\n</blockquote>\n\n<p>how should i pass this in the view. Any help would be appreciated\nThe type in the view is</p>\n\n<pre><code>@model IEnumerable&lt;Kyubu.ViewModels.TobiViewModel&gt;\n</code></pre>\n"},{"tags":["c#","asp.net-mvc","cultureinfo","culture","kendo"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13056691,"title":"Form will not submit when decimal numbers are entered","body":"<p>I have a problem with submitting forms when decimal numbers are present, to be precise if there is a number behind the decimal separator it wont submit. I am working with Asp.NET MVC3, Kendo UI and a different culture, \"hr-HR\", where the decimal separator is a comma. If I put \"en-US\" culture (separator is dot) everithing goes smoothly. \nMy guess is its a validation problem, but I could be wrong. (Because the form POSTs on US culture)</p>\n\n<p>Also my CurrentUICulture is \"en-US\" &amp; CurrentCulture is \"hr-HR\"</p>\n\n<p>Did anyone had a similar issue?</p>\n"},{"tags":["asp.net-mvc","authorization","mvcsitemapprovider","authorizeattribute"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13075463,"title":"MvcSiteMapProvider causing authorization issues with MVC4 website","body":"<p>I'm trying to implement MvcSiteMapProvider with my new MVC4 website, but I've run into something that I can't seem to fix.</p>\n\n<p>I setup authorization with Active Directory (no role provider currently), and everything was working as it should. When you try to get to any page other than the login page, you're redirected to the login page. The Account controller's action methods have the [allowAnonymous] attribute to allow unauthenticated users to access them so that they can login.</p>\n\n<p>For some unknown reason, adding MvcSiteMapProvider to the project stops this from working and now unauthenticated users can get to any page. The Menu that MvcSiteMapProvider creates works correctly and only authenticated users can see it, but if the unauthenticated user types in a direct link they aren't redirected to the login page as they used to be.</p>\n\n<p>I've removed MvcSiteMapProvider from the project and authentication started to work correctly again. \nI believe this has something to do with MvcSiteMapProvider overridding the authorizeAttribute filter in some way, but I can't figure out where/how.</p>\n\n<p>I can put [Authorize] on top of the controller and the redirect works with MvcSiteMapProvider, but that's against the whole reason for using MVC4.</p>\n\n<pre><code>//this is supposed to set authorize for the entire app\npublic static void RegisterGlobalFilters(GlobalFilterCollection filters)\n{\n    filters.Add(new System.Web.Mvc.AuthorizeAttribute()); \n}\n</code></pre>\n\n<p>I have a feeling this issue is coming from MvcSiteMapProvider/External/AuthorizeAttributeBuilder.cs, but I'm not experienced enough to figure this out.</p>\n"},{"tags":["asp.net-mvc","asp.net-mvc-4","asp.net-optimization","bundling-and-minification"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12931461,"title":"Is there any way to have a file extension in a bundle name?","body":"<p>I would like to have define a bundle like this:</p>\n\n<pre><code>bundles.Add(\n    new StyleBundle(\"~/style.css\").Include(\n        //...\n));\n</code></pre>\n\n<p>If the bundle name is just <code>\"~/style\"</code> this works, but with the file extension it always returns a 404. I suspect the server searches for CSS and JS files on the drive and ignores the bundling system, but I can't find anyone else who is trying to include file extensions in bundle names. Is this possible to do without something like a URL rewrite?</p>\n"},{"tags":["c#","asp.net-mvc","validation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13071219,"title":"Get value of a property that was passed in as a string","body":"<p>I am trying to create a custom validation that says \"if the otherValue is true, then this value must be greater than 0.  I am able to get the value in, but the way I currently have the otherValue set up, I only have the name of the property, not the value.  Probably because it passed in as a string.  This attribute is going to be on 5 or 6 different properties and each time, it will be calling a different otherValue.  Looking for help on how to get the actual value (it is a bool) of otherValue.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>public class MustBeGreaterIfTrueAttribute : ValidationAttribute, IClientValidatable\n{\n    // get the radio button value\n    public string OtherValue { get; set; }\n\n    public override bool IsValid(object value)\n    {\n        // Here is the actual custom rule\n        if (value.ToString() == \"0\")\n        {\n            if (OtherValue.ToString() == \"true\")\n            {\n                return false;\n            }\n        }\n        // If all is ok, return successful.\n        return true;\n    }\n</code></pre>\n\n<p>======================EDIT=========================</p>\n\n<p>Here is where I am at now, and it works!  Now I need a refernce on how to make it so I can put in a different errorMessage when adding the attribute in the model:</p>\n\n<pre><code>public class MustBeGreaterIfTrueAttribute : ValidationAttribute, IClientValidatable\n{\n    // get the radio button value\n    public string OtherProperty { get; set; }\n\n    protected override ValidationResult IsValid(object value, ValidationContext context)\n    {\n        var otherPropertyInfo = context.ObjectInstance.GetType();\n        var otherValue = otherPropertyInfo.GetProperty(OtherProperty).GetValue(context.ObjectInstance, null);      \n\n        // Here is the actual custom rule\n        if (value.ToString() == \"0\")\n        {\n            if (otherValue.ToString().Equals(\"True\", StringComparison.InvariantCultureIgnoreCase))\n            {\n                return new ValidationResult(\"Ensure all 'Yes' answers have additional data entered.\");\n            }\n        }\n        // If all is ok, return successful.\n        return ValidationResult.Success;\n    }\n\n    // Add the client side unobtrusive 'data-val' attributes\n    public IEnumerable&lt;ModelClientValidationRule&gt; GetClientValidationRules(ModelMetadata metadata, ControllerContext context)\n    {\n        var rule = new ModelClientValidationRule();\n        rule.ValidationType = \"requiredifyes\";\n        rule.ErrorMessage = this.ErrorMessage;\n        rule.ValidationParameters.Add(\"othervalue\", this.OtherProperty);\n        yield return rule;\n    }\n\n}\n</code></pre>\n\n<p>So I should be able to do this:</p>\n\n<pre><code>    [MustBeGreaterIfTrue(OtherProperty=\"EverHadRestrainingOrder\", ErrorMessage=\"Enter more info on your RO.\")]\n    public int? ROCounter { get; set; }\n</code></pre>\n"},{"tags":["asp.net-mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13073085,"title":"Adding element attribute in view based on razor variable","body":"<p>I have a view that has a list and I want to add a class to a specific list item depending on a variable in the view model.</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;List Item 1&lt;/li&gt;\n    &lt;li&gt;List Item 2&lt;/li&gt;\n    &lt;li&gt;List Item 3&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>The variable could be anything.  Currently it is an integer.  Below is what I have now, but I don't think this is the cleanest way to do this.</p>\n\n<pre><code>string[] listClasses = new string[3];\nint? selectedListElement= (int?)ViewData[\"SelectedListElement\"];\nif(tabNumber.HasValue)\n{\n    tabClasses[tabNumber.Value] = \"selected\";\n}\n&lt;li class=\"@listClasses[0]\"&gt;List Item 1&lt;/li&gt;\n&lt;li class=\"@listClasses[1]\"&gt;List Item 2&lt;/li&gt;\n&lt;li class=\"@listClasses[2]\"&gt;List Item 3&lt;/li&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-3","inversion-of-control","structuremap","asp.net-mvc-4"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":1993,"score":7,"question_id":9557497,"title":"Structuremap does not work on MVC4","body":"<p>I've used <code>StructureMap</code> in MVC2/3 many times without any concern, but I guess handling IoC is different in MVC4.\nWhen i used <code>StructureMap</code> for handling IoC in MVC4 I get the following exception.:</p>\n\n<h2>No parameterless constructor defined for this object</h2>\n\n<p>Why?\nI have not found any correct result in google except this: <a href=\"http://connect.microsoft.com/VisualStudio/feedback/details/725313/ioc-not-working-in-mvc4\" rel=\"nofollow\">IoC Not Working In MVC4</a>\nThese is my IoC classes:</p>\n\n<pre><code>public static class IoC {\n    public static IContainer Initialize() {\n        ObjectFactory.Initialize(x =&gt;\n                    {\n                        x.Scan(scan =&gt;\n                        {\n                            //scan.Assembly(\"DLL.Core\");\n                            scan.Assembly(\"DLL.CMS\");\n                            scan.TheCallingAssembly();\n                            scan.WithDefaultConventions();\n                        });\n                        x.For&lt;IDbContext&gt;().Use&lt;ModelEntities&gt;();\n                        x.For(typeof(IRepository&lt;&gt;)).Use(typeof(Repository&lt;&gt;));\n                        x.For&lt;IHttpControllerActivator&gt;();\n                        x.For&lt;IController&gt;();\n                    });\n\n        return ObjectFactory.Container;\n    }\n</code></pre>\n\n<p>And SmDependencyResolver is:</p>\n\n<pre><code>    public class SmDependencyResolver : IDependencyResolver\n{\n    private readonly IContainer _container;\n\n    public SmDependencyResolver(IContainer container)\n    {\n        _container = container;\n    }\n\n    public object GetService(Type serviceType)\n    {\n        if (serviceType == null) return null;\n        try\n        {\n            return serviceType.IsAbstract || serviceType.IsInterface\n                     ? _container.TryGetInstance(serviceType)\n                     : _container.GetInstance(serviceType);\n        }\n        catch\n        {\n\n            return null;\n        }\n    }\n\n    public IEnumerable&lt;object&gt; GetServices(Type serviceType)\n    {\n        return _container.GetAllInstances(serviceType).Cast&lt;object&gt;();\n    }\n}\n</code></pre>\n\n<p>And my error is:</p>\n\n<blockquote>\n  <p>No parameterless constructor defined for this object.\n      Description: An unhandled exception occurred during the execution of the current web request. Please review the                stack\n  trace for more information about the error and where it originated in\n  the code. </p>\n\n<pre><code>Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.\n</code></pre>\n  \n  <p>Source Error: </p>\n  \n  <p>An unhandled exception was generated during the execution of the\n  current web request. Information regarding the origin and location of\n  the exception can be identified using the exception stack trace below.</p>\n  \n  <p>Stack Trace: </p>\n  \n  <p>[MissingMethodException: No parameterless constructor defined for this\n  object.]    System.RuntimeTypeHandle.CreateInstance(RuntimeType type,\n  Boolean publicOnly, Boolean noCheck, Boolean&amp; canBeCached,\n  RuntimeMethodHandleInternal&amp; ctor, Boolean&amp; bNeedSecurityCheck) +0<br>\n  System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean\n  skipCheckThis, Boolean fillCache) +98<br>\n  System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly,\n  Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean\n  fillCache) +241    System.Activator.CreateInstance(Type type, Boolean\n  nonPublic) +69<br>\n  System.Web.Mvc.DefaultControllerActivator.Create(RequestContext\n  requestContext, Type controllerType) +67</p>\n  \n  <p>[InvalidOperationException: An error occurred when trying to create a\n  controller of type\n  'Parsian.Web.Areas.Dashboard.Controllers.MemberController'. Make sure\n  that the controller has a parameterless public constructor.]<br>\n  System.Web.Mvc.DefaultControllerActivator.Create(RequestContext\n  requestContext, Type controllerType) +182<br>\n  System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext\n  requestContext, Type controllerType) +80<br>\n  System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext\n  requestContext, String controllerName) +74<br>\n  System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase\n  httpContext, IController&amp; controller, IControllerFactory&amp; factory)\n  +196    System.Web.Mvc.&lt;>c_<em>DisplayClass6.b</em>_2() +49    System.Web.Mvc.&lt;>c__DisplayClassb<code>1.&lt;ProcessInApplicationTrust&gt;b__a()\n  +13    System.Web.Mvc.SecurityUtil.&lt;GetCallInAppTrustThunk&gt;b__0(Action f) +7    System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action\n  action) +22<br>\n  System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func</code>1 func)\n  +124    System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98<br>\n  System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext,\n  AsyncCallback callback, Object state) +50<br>\n  System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext\n  context, AsyncCallback cb, Object extraData) +16<br>\n  System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()\n  +8862676    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184</p>\n</blockquote>\n\n<p>Thanks for correct answers. </p>\n"},{"tags":["xml","asp.net-mvc","asp.net-web-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13069115,"title":"Remove XML namespace attributes from MVC Web API response","body":"<p>I am getting the following response from an MVC Web Api;</p>\n\n<pre><code>&lt;Products xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"my.namespace.com\"&gt;\n&lt;Product&gt;\n&lt;Id&gt;1&lt;/Id&gt;\n&lt;Name&gt;Tomato Soup&lt;/Name&gt;\n&lt;Category&gt;Groceries&lt;/Category&gt;\n&lt;Price&gt;1&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;Product&gt;\n&lt;Id&gt;2&lt;/Id&gt;\n&lt;Name&gt;Yo-yo&lt;/Name&gt;\n&lt;Category&gt;Toys&lt;/Category&gt;\n&lt;Price&gt;3.75&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;Product&gt;\n&lt;Id&gt;3&lt;/Id&gt;\n&lt;Name&gt;Hammer&lt;/Name&gt;\n&lt;Category&gt;Hardware&lt;/Category&gt;\n&lt;Price&gt;16.99&lt;/Price&gt;\n&lt;/Product&gt;\n&lt;/Products&gt;\n</code></pre>\n\n<p>I would like to remove the xmlns:* tags.</p>\n\n<p>I have found various posts, including some on SO that give options, but these do not appear to work.</p>\n\n<p>What I have tried;</p>\n\n<pre><code>[XmlRoot(\"Products\",Namespace = \"my.namespace.com\")]\n    [DataContract(Namespace = \"\")]\n    public class ProductsModel : List&lt;Product&gt;\n    {\n    }\n\n[XmlRoot(\"Product\")]\n    [DataContract(Namespace = \"\", Name = \"Product\")]\n    public class Product \n    {\n        [DataMember]\n        public int Id { get; set; }\n\n        [DataMember]\n        public string Name { get; set; }\n\n        [DataMember]\n        public string Category { get; set; }\n\n        [DataMember]\n        public decimal Price { get; set; }\n    }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>GlobalConfiguration.Configuration.Formatters.XmlFormatter.UseXmlSerializer = true;\n</code></pre>\n\n<p>These have no effect.</p>\n"},{"tags":["javascript","asp.net-mvc","kendo-ui"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":144,"score":1,"question_id":12107416,"title":"how to retrieve id value in kendo menu","body":"<p>I am using kendo menu in my project.I want to retrieve id value when i click on the selected item. I used onSelect event and I am able to retrieve the selected item Text.can u tell me how to retrieve the id value</p>\n"},{"tags":["asp.net-mvc","datepicker","unobtrusive-javascript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":13059455,"title":"System.DateTime and the format of dd/MM/yyyy isn't accepted","body":"<p>I have an mvc3 project it was working fine with System.DateTime ,now I'm trying to upgrade for V4 now I have that famous problem of the DateTime I have a JQuery datepicker with this format</p>\n\n<p>{ dateFormat: 'dd/mm/yy' } \nI want it day/month/year as my culture I have tried many solutions and this is the 7th hour searching trying to address the problem I have tried many things like\n-- changing the EditorTemplate or add attributes of </p>\n\n<pre><code>[DataType(DataType.Date)] \n</code></pre>\n\n<p>or </p>\n\n<pre><code>[DisplayFormat(DataFormatString = \"{0:dd/MM/yyyy}\", ApplyFormatInEditMode = true)]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>[DataType(DataType.Date), DisplayFormat( DataFormatString=\"{0:dd/MM/yyyy}\", ApplyFormatInEditMode=true )\n</code></pre>\n\n<p>also I have tried to change the uiCulture to my culture nothing still I have the validation error message (The field DateTime must be a date.)</p>\n\n<p>I have searched too much for this like in\n<a href=\"http://stackoverflow.com/questions/12109007/unable-to-set-datetime-format-in-mvc-4-using-data-annotations\">Unable to set datetime format in MVC 4 using data annotations</a></p>\n\n<p>also model binder didn't work like in here <a href=\"http://stackoverflow.com/questions/11272851/format-datetime-in-asp-net-mvc-4\">ModelBinder</a>,</p>\n\n<p>two things fixed that is to change the poco DateTime to string and I do really don't want to do that the second is to disable UnobtrusiveJavaScript in Web.config \n</p>\n\n<p>It seems that the mvc4 automatically change the type of text input of DateTime to have that html5 attribute  (type=\"datetime\") without the annotation of [DataType(DataType.Date)] or any attribute related with DateTime also I want to enable Unobtrusive JavaScript and end up with the format of dd/MM/yyyy to be the dafault date format  </p>\n"},{"tags":["asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13071944,"title":"How route to aspx in razor view engine?","body":"<p>I use razor view engine. \nI need get route url aspx view. </p>\n\n<p>Example:</p>\n\n<p><code>&lt;tag src=\"/ReportViewer.aspx\" /&gt;</code> - The current implementation. file in the root of the site. </p>\n\n<p><code>&lt;tag src=\"@Url.Action(\"ReportViewer\", \"Reports\") /&gt;</code> - I need this construction. File path Views/Repors/ReportViewer.aspx</p>\n\n<p>someone knows the solution ?</p>\n"},{"tags":["asp.net-mvc","azure"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":13073247,"title":"WebSecurity.InitializeDatabaseConnection method can be called only once","body":"<p>I'm trying Windows Azure to host an MVC4 web application.\nI've created a test app, using VS2012 MVC4 internet application template and added a custom Model and Controller to it.</p>\n\n<p>I've published it on Azure and managed to get 'update-database' apply migrations to the Azure Database.</p>\n\n<p>When i try the app locally, but using the Azure SQL database, it works fine.\nI can login/register and use my test controller.</p>\n\n<p>When i try the app online, i can use the test controller but login or register links give the following exception:</p>\n\n<pre><code>Server Error in '/' Application.\n\nThe \"WebSecurity.InitializeDatabaseConnection\" method can be called only once.\n\nDescription: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. \n\nException Details: System.InvalidOperationException: The \"WebSecurity.InitializeDatabaseConnection\" method can be called only once.\n\nSource Error: \n\nAn unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.\n\nStack Trace: \n\n\n[InvalidOperationException: The \"WebSecurity.InitializeDatabaseConnection\" method can be called only once.]\n   WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider simpleMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +123\n   WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51\n   WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +52\n   MembershipTest2.Filters.SimpleMembershipInitializer..ctor() +193\n</code></pre>\n\n<p>Do you have any idea where that comes from ?\nIf i debug (the local version), this method is only called once.</p>\n\n<p>Thanks.</p>\n"},{"tags":[".net","asp.net-mvc","asp.net-mvc-4"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13072067,"title":"Binding JSON when POSTed with x-www-form-urlencoded not application/json","body":"<p>Is there a way to get the <code>DefaultModelBinder</code> to work when the data is POSTed using <code>x-www-form-urlencoded</code> instead of <code>application/json</code>, but the actual payload of the value is JSON encoded?</p>\n\n<p>For example, I am being sent a single key-value-pair:</p>\n\n<pre><code>key: 'events' \nvalue: '[{\"event\":\"inbound\",\"ts\":1350928095,\"msg\":{\"raw_msg\":\"Received\"}}]'\n</code></pre>\n\n<p>where the value contains JSON array in this case.</p>\n\n<p><strong>NOTE: The POST is coming from a 3rd party so I cannot control it.</strong></p>\n"},{"tags":["asp.net-mvc","mvc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":505,"score":0,"question_id":8965352,"title":"Creating DropDownListFor in a Partial View in MVC","body":"<p>I have created a partial view that displays a dropdownlist</p>\n\n<p><code>html.DropDownListFor(m =&gt; m.SelectOption, Model.SelectOption)</code></p>\n\n<p>I get an error of Object not reference to an instance....</p>\n\n<p>If I put the code above into my view (aspx) it works fine no problem. But in the partial view I get the error. </p>\n\n<p>The textbox controls in my partial view works fine using the same model. I just can't around the DropDownList.</p>\n"},{"tags":["c#","asp.net-mvc","razor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13069642,"title":"format string containing html","body":"<p>I have a simple string variable that contains a portion of HTML inside. For example: </p>\n\n<pre><code>string contents = \"&lt;div&gt;&lt;p&gt;Hi how are you. &lt;a href=\"#\"&gt;Click here&lt;/a&gt; if you want to know more\";\n</code></pre>\n\n<p>I want to include this HTML in page:</p>\n\n<pre><code>&lt;div class=\"description\"&gt;\n    @contents\n&lt;/div&gt;\n</code></pre>\n\n<p>However, it messes up the rest of the page because of unclosed tags.</p>\n\n<p>Is there a function (or a helper) that reads and formats the HTML inside for example, to complete the HTML without errors:</p>\n\n<pre><code>@Html.DisplayProperHTML(contents)\n</code></pre>\n\n<p>This will render as:</p>\n\n<pre><code>&lt;div&gt;&lt;p&gt;Hi how are you. &lt;a href=\"#\"&gt;Click here&lt;/a&gt; if you want to know more&lt;/p&gt;&lt;/div&gt;\n</code></pre>\n"},{"tags":["asp.net-mvc","asp.net-mvc-routing","asp.net-mvc-areas"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13069015,"title":"What are the goals and benefits of using areas?","body":"<p>I have question about benefit of using areas and necessity of them.</p>\n\n<p>I see some opposites:</p>\n\n<ol>\n<li>MVC patterns have routes, and they need for escaping out of folder structure. </li>\n<li>But when we using areas we create folders which maps to routes. And result of it is that we finally return again to folder structure? </li>\n</ol>\n\n<p>Does really needed areas in mvc application, because they force us to return to folder structure.</p>\n\n<p><strong>Which goals of using areas in asp mvc? Which benefits of using areas.</strong></p>\n"},{"tags":["asp.net-mvc","wcf","web-services","api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13072769,"title":"MVC or Extract Service Layer","body":"<p>we have an application that is built with .Net MVC.  We are now tasked with exposing API's to third parties.  Members on our team want to just continue down our current path and just use more controllers so we can reuse the backend of our current application.  Logic tells me we need to create a seperate service layer when more clients are going to be accessing it, but .Net MVC seems to take care of all of this.  Is it really acceptable architecture to use controllers in a stand alone application to expose API's and what would be the potential gains of extracting the service layer out?</p>\n"},{"tags":["asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13072632,"title":"Cleaner way to ad Dropdownlist and PostBack","body":"<p>I would like to know if there is a simpler way to ad a Dropdownlist and his postback call:</p>\n\n<p>Controller:</p>\n\n<pre><code>    /// &lt;summary&gt; \n    /// Create a new Form for new Ad\n    /// &lt;/summary&gt; \n    public virtual ActionResult Create()\n    {\n        // Build the Dropdownlist for the Makes\n        var makesDto = _makeService.ListAllMakes();\n        var makesViewModel = Mapper.Map&lt;IList&lt;MakeDto&gt;, IList&lt;MakeViewModel&gt;&gt;(makesDto);\n\n        // Build the ViewModel to return to the View with the Make List\n        CreateAdViewModel viewModel = new CreateAdViewModel();\n        viewModel.MakeList = new SelectList(makesViewModel, \"Id\", \"Name\");  // Mapping from the Entity Make: Id = Make.Id | Name = Make.Name\n\n        // Build the Dropdownlist for the Makes\n        var modelsDto = _modelService.ListModelByMake(viewModel.Make_Id);\n        var modelsViewModel = Mapper.Map&lt;IList&lt;ModelDto&gt;, IList&lt;ModelViewModel&gt;&gt;(modelsDto);\n\n        // Add to the ViewModel to return to the View with the Make List\n        viewModel.ModelList = new SelectList(modelsViewModel, \"Id\", \"Name\");  // Mapping from the Entity Model: Id = Model.Id | Name = Model.Name\n\n        return View(viewModel);\n    }\n\n    /// &lt;summary&gt; \n    /// Create a new Ad\n    /// &lt;/summary&gt; \n    [HttpPost]\n    public virtual ActionResult Create(CreateAdViewModel adViewModel)\n    {\n        if (!ModelState.IsValid)\n        {\n            // Build the Dropdownlist for the Makes\n            var makesDto = _makeService.ListAllMakes();\n            var makesViewModel = Mapper.Map&lt;IList&lt;MakeDto&gt;, IList&lt;MakeViewModel&gt;&gt;(makesDto);\n\n            // Build the ViewModel to return to the View with the Make List\n            adViewModel.MakeList = new SelectList(makesViewModel, \"Id\", \"Name\");  // Mapping from the Entity Make: Id = Make.Id | Name = Make.Name\n\n            // Build the Dropdownlist for the Makes\n            var modelsDto = _modelService.ListModelByMake(adViewModel.Make_Id);\n\n            // Build and Set the first information line of the DropDownList\n            var firstModelDto = new ModelDto();\n            firstModelDto.Name = HeelpResources.DropdownlistModelFirstRecord;\n            modelsDto.Insert(0, firstModelDto);\n            var modelsViewModel = Mapper.Map&lt;IList&lt;ModelDto&gt;, IList&lt;ModelViewModel&gt;&gt;(modelsDto);\n\n            // Add to the ViewModel to return to the View with the Make List\n            adViewModel.ModelList = new SelectList(modelsViewModel, \"Id\", \"Name\");  // Mapping from the Entity Model: Id = Model.Id | Name = Model.Name\n\n            return View(adViewModel);\n        }\n\n        var adDto = Mapper.Map&lt;CreateAdViewModel, CreateAdDto&gt;(adViewModel);\n\n        _adService.CreateAd(adDto);\n\n        return RedirectToAction(MVC.Home.Index());\n    }\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>    &lt;div id=\"makes\"&gt;\n        @Html.DropDownListFor(m =&gt; m.Make_Id, Model.MakeList, HeelpResources.DropdownlistMakeFirstRecord)\n    &lt;/div&gt;\n    &lt;div id=\"models\"&gt;\n        @Html.DisplayNameFor(m =&gt; m.Model_Id)\n        @Html.DropDownListFor(m =&gt; m.Model_Id, Model.ModelList)\n    &lt;/div&gt;        \n</code></pre>\n\n<p>Is there a way to avoid post back to the server and keep it only at the client side?</p>\n\n<p>I would like to validate as soon as the input box loses the focus and presente the Validation Message.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c#","asp.net-mvc","url.action"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13072010,"title":"How to html encode a text before sending it unto the server?","body":"<p>I have the below code in my MVC view which gets the contents of a TextArea control and makes a request to a url (action) then displays the result in another text box:</p>\n\n<pre><code>var input = $('#tbInput').val(); // it can have some invalid characters such as +, #, etc\n\n        var encodedInput = // how?; \n\n        $.ajax({\n            url: url,\n            success: function (data) {\n                alert(data);\n                $('#tbResult').html(data);\n            },\n            error: function (request, status, error) {\n                alert('An error occured: ' + error);\n            },\n            cache: false\n        });\n</code></pre>\n\n<p>If I only send the input data, the invalid characters are just removed so I'd need to html encode the text then sending it?</p>\n\n<p>The input should appear as below:</p>\n\n<p><a href=\"http://www.mydomain.com/?i=\" rel=\"nofollow\">http://www.mydomain.com/?i=</a></p>\n\n<p>Thanks,</p>\n"},{"tags":["c#","asp.net-mvc","url.action"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":3,"view_count":67,"score":-3,"question_id":13066497,"title":"How to pass a javascript variable to Url.Action?","body":"<p>I'm using MVC 3.0 and I'm just wondering How to pass a javascript variable to <code>Url.Action</code> method which is a server side method?</p>\n\n<p>The below code fails to compile:</p>\n\n<pre><code>string actionName = \"MyAction\";\nstring url = '@(Url.Action(' + actionName + '))';\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["asp.net-mvc","example","petapoco"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":1,"view_count":826,"score":0,"question_id":8165556,"title":"Petapoco MVC Example","body":"<p>Where can I find an example of a MVC large solution that has been made with <strong>Petapoco</strong>?</p>\n"},{"tags":["c#",".net","asp.net-mvc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13071763,"title":"Default Value in Model via WebMatrix","body":"<p>I want to add a Role based on the SQL only, not the ASPnet Roles, there are reasons for this so its a non issue. </p>\n\n<p>The problem im having is in the Model of Create user i have the <code>[DefaultValue(\"User\")]</code>\nhowever no value is going into the Database. </p>\n\n<p>MODEL : </p>\n\n<blockquote>\n<pre><code>public class RegisterModel\n{\n    [Required]\n    [Display(Name = \"User name\")]\n    public string UserName { get; set; }\n</code></pre>\n</blockquote>\n\n<pre><code>    [Required]\n    [StringLength(100, ErrorMessage = \"The {0} must be at least {2} characters long.\", MinimumLength = 6)]\n    [DataType(DataType.Password)]\n    [Display(Name = \"Password\")]\n    public string Password { get; set; }\n\n    [DataType(DataType.Password)]\n    [Display(Name = \"Confirm password\")]\n    [Compare(\"Password\", ErrorMessage = \"The password and confirmation password do not match.\")]\n    public string ConfirmPassword { get; set; }\n\n    [DefaultValue(\"User\")]\n    public string Role { get; set; }\n}\n</code></pre>\n\n<p>That all seems ok, </p>\n\n<p>Controler is as : </p>\n\n<pre><code>        public ActionResult CreateUser(RegisterModel userModel)\n    {\n        if (ModelState.IsValid)\n        {\n            // Create the user\n            try\n            {\n                WebSecurity.CreateUserAndAccount(userModel.UserName, userModel.Password, userModel.Role);\n                WebSecurity.Login(userModel.UserName, userModel.Password);\n                return RedirectToAction(\"ListUsers\", \"Account\");\n            }\n            catch (MembershipCreateUserException e)\n            {\n                ModelState.AddModelError(\"\", ErrorCodeToString(e.StatusCode));\n            }\n        }\n\n        // Something not right if here - return\n        return View(userModel);   \n    }\n</code></pre>\n\n<p>The View is your standard user &amp; Password fields, the reason i want to enter the default value on the model side is so that one cant simple edit the HTML in the <code>&lt;form&gt;</code> tag and change the hidden value of <code>role=\"user\"</code> so <code>role=\"Admin\"</code> ..</p>\n\n<p>I have seen similar questions but unfortunately this is confusing me. </p>\n\n<p>Hopefully iv'e explained all as best i can! </p>\n"},{"tags":["c#","asp.net-mvc","http","asp.net-mvc-4","form-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13057648,"title":"How do I get files AND form values from an ASP.NET MVC 4 website?","body":"<p>I have an ASP.NET MVC Website that has a dropdown list that is being created using this in the view...   </p>\n\n<pre><code>@Html.DropDownList(\"Programs\")\n</code></pre>\n\n<p>Programs is populated from a Business Object collection and stuffed into the ViewBag in the index action on the Home Controller...  </p>\n\n<pre><code>\\\\get items...\nViewBag.Programs = items;\n</code></pre>\n\n<p>The view also has potentially three files I am getting like this in the same view...  </p>\n\n<pre><code>&lt;input type=\"file\" name=\"files\" id=\"txtUploadPlayer\" size=\"40\" /&gt;  \n&lt;input type=\"file\" name=\"files\" id=\"txtUploadCoaches\" size=\"40\" /&gt;  \n&lt;input type=\"file\" name=\"files\" id=\"txtUploadVolunteers\" size=\"40\" /&gt; \n</code></pre>\n\n<p>All of the aforementioned controls are contained in a Form that is created in the view using...  </p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n     &lt;!--  file and other input types  --&gt;\n     &lt;input type=\"submit\" name=\"btnSubmit\" value=\"Import Data\" /&gt;\n}\n</code></pre>\n\n<p>My problems is that I cannot find a way to process all of the files AND reference the form fields.  </p>\n\n<p>Specifically, I need to know what Program the user selected from the dropdown.  </p>\n\n<p>I can process the files using this code with no problem...  </p>\n\n<pre><code>[HttpPost]\npublic ActionResult Index(IEnumerable&lt;HttpPostedFileBase&gt; files)\n//public ActionResult Index(FormCollection form)\n{\n\n    _tmpFilePath = Server.MapPath(\"~/App_Data/uploads\");\n\n    if (files == null) return RedirectToAction(\"Index\");\n    foreach (var file in files)\n    {\n        if (file != null &amp;&amp; file.ContentLength &gt; 0)\n        {\n            var fileName = Path.GetFileName(file.FileName);\n            var path = Path.Combine(_tmpFilePath, fileName);\n            if (System.IO.File.Exists(path)) System.IO.File.Delete(path);\n\n            _file = file;\n\n            file.SaveAs(path);\n\n            break;  //just use the first file that was not null.\n        }\n    }\n\n\n\n    //SelectedProgramId = 0;\n\n    //DoImport();\n\n    return RedirectToAction(\"Index\");\n}\n</code></pre>\n\n<p>But I cannot figure how to ALSO get access to the POST form values especially the Programs dropdown selected value (and for the record there is also a checkbox that I cannot read the value from.)  Fiddler shows me that the Response has the file references AND the selected program but I cannot figure out how to get them out of the POST using ASP.NET MVC.</p>\n\n<p>I know this question is pretty basic but I am stilling learning the whole web/http thing not just MVC.  </p>\n\n<p><strong>EDIT</strong>\nThanks for your answers.  I had the thought that the answer might lie in passing in both the files and the form values into the POST.</p>\n\n<p>So my last question is ... how do I change the HTML.BeginForm block to pass in both the files and form values?  Right now I have ...</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"Home\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n  //do stuff\n}\n</code></pre>\n\n<p>What should that using statement be to get both form values and files as separate parameters of the ActionResult?</p>\n\n<p><strong>EDIT MY EDIT</strong><br>\nIt seems that I don't have to make any changes...the debugger is showing that both files and form are non-null.  Cool!  Is that right?</p>\n"},{"tags":["c#","asp.net","asp.net-mvc","asp.net-mvc-4"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":68,"score":4,"question_id":13049529,"title":"MVC Model Validation on a dynamic form?","body":"<p>I have the following Model : <br /></p>\n\n<pre><code>public class FileModel\n{\n    public int Id { get; set; }\n\n    [Required(ErrorMessage = \"Required\")]\n    [StringLength(100, ErrorMessage = \"Max is 100, Min is 3\", MinimumLength = 3)]\n    public string Name { get; set; }\n\n    public string Path { get; set; }\n\n    [Required(ErrorMessage = \"Required\")]\n    public string FileTypeId { get; set; }\n\n    public DateTime RegistrationDate { get; set; }\n}\n</code></pre>\n\n<p>the following is my view :</p>\n\n<pre><code>@using (Html.BeginForm(\"Index\", \"FileManagement\", FormMethod.Post, new { enctype = \"multipart/form-data\" }))\n{\n    &lt;table class=\"content-table\" style=\"min-width: 600px; border-spacing: 15px;\"&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"4\" class=\"table-header\"&gt;New File\n                &lt;div class=\"add-icon\"&gt;+&lt;/div&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td&gt;Name: &lt;/td&gt;\n            &lt;td&gt;@Html.TextBoxFor(q =&gt; q.NewFile.Name, new { maxlength = \"100\", id = \"NewFile_Name1\", name = \"NewFile.Name1\" })\n                &lt;br /&gt;@Html.ValidationMessageFor(q =&gt; q.NewFile.Name)\n            &lt;/td&gt;\n            &lt;td&gt;\n                &lt;input type=\"file\" id=\"FileUploadField1\" /&gt;&lt;/td&gt;\n            &lt;td style=\"width: 16px; text-align: center;\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"4\" style=\"text-align: center;\"&gt;\n                &lt;input type=\"submit\" value=\"Submit\" /&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;script type=\"text/javascript\"&gt;\n\n        $('.content-table .add-icon').click(function () {\n            var lastFileField = $('.content-table input[type=\"file\"]').last();\n            var lastId = lastFileField.attr('id').replace(/\\D*/g, '');\n            lastId = parseInt(lastId) + 1;\n            var newFields = '&lt;tr&gt;' +\n                '&lt;td&gt;Name : &lt;/td&gt;' +\n                '&lt;td&gt;&lt;input data-val=\"true\" data-val-length=\"Max chars is 100, Min chars is 3\" data-val-length-max=\"100\" data-val-length-min=\"3\" data-val-required=\"Required\" id=\"NewFile_Name' + lastId + '\" name=\"NewFile.Name' + lastId + '\" type=\"text\" value=\"\" /&gt;&lt;br /&gt;&lt;span class=\"field-validation-valid\" data-valmsg-for=\"NewFile.Name' + lastId + '\" data-valmsg-replace=\"true\"&gt;&lt;/span&gt;&lt;/td&gt;' +\n                '&lt;td&gt;&lt;input type=\"file\" id=\"FileUploadField' + lastId + '\"/&gt;&lt;/td&gt;' +\n                '&lt;td style=\"text-align:right;\"&gt;&lt;div class=\"delete-icon\"&gt;&lt;/div&gt;&lt;/td&gt;' +\n                '&lt;/tr&gt;';\n            var lastTr = $(lastFileField).parents('tr:first')[0];\n            $(lastTr).after(newFields);\n        });\n\n        $('.content-table .delete-icon').live('click', function () {\n            $(this).parents('tr:first').remove();\n        });\n    &lt;/script&gt;\n}\n</code></pre>\n\n<p>As you can see, We have a form for uploading one or more files. So, I've added an + button for users that they can add a file field to form.<br /><br />\nUsers must enter the name of the file and select a file for uploading. But MVC client validator just validate the first inputs that added with <code>Razor</code>.<br /><br />\nHow can I force MVC validator to validate all fields at the client side and server side.<br /></p>\n\n<p><strong>Another question is:</strong> <br />\nHow can we handle getting the field values at a MVC Controller.</p>\n\n<p>Thanks</p>\n"},{"tags":["asp.net-mvc","actionmethod"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13071298,"title":"Action method being called multiple times","body":"<p>I've just spotted something quite strange about an action method that is being called, via a simple click of a link, in my MVC 3 site.  For some reason this action method is being called multiple times.  Not only that but subsequent calls get called before previous ones complete.  What I mean is, suppose I have 10 lines of code in my action method, numbered 1, 2 ... 10.  The first call of the method will execute lines 1,2 and 3.  The second call executes lines 1,2,3 and 4, then the third call executes lines 1,2,3 and 4 and then the first continues from line 4 and so on.  It's as if multiple threads are calling this action method, but as far as I can see nothing of the sort is happening because all I do to get this to happen is click on a link.  Is there any reason why this should happen?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Actually, having done analysis, I can see that it is 2 calls that are being made.</p>\n"},{"tags":["asp.net-mvc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13039224,"title":"How to dynamically populate anchor tag in MVC View using ViewData value?","body":"<p>Is there a way to populate an anchor tag's <code>href</code> value in the View using a ViewBag value? What I want to be able to do is something like this:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;a href=\"&lt;%= ViewBag.MyURL %&gt;\" title=\"My URL\"&gt;\"&lt;%= ViewBag.MyURL %&gt;\"&lt;/a&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    public ActionResult Index()\n    {\n        ViewBag.MyURL = \"http://www.Google.com\";\n        return View();\n    }\n</code></pre>\n\n<p>How do I go about doing this correctly?</p>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","asp.net-mvc","asp.net-mvc-3","jquery-ui","jquery-ui-autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13064797,"title":"Jquery-ui Autocomplete select Call back function is not working properly","body":"<p>I am using jquery-ui autocomplete and making a  ajax call inside the autocomplete function i am calling my controller action which returns Json , every thing is working fine but when i select some thing from suggestion dropdown then <code>select</code> call back function called and in <code>select</code> callback function <code>ui</code> is undefined . </p>\n\n<p><strong>Javascript</strong>  </p>\n\n<pre><code> function log(message) {\n            $(\"&lt;div&gt;\").text(message).prependTo(\"#log\");\n            $(\"#log\").scrollTop(0);\n        }\n\n        $(\"#search\").autocomplete({\n            source: function (request, response) {\n                $.ajax({\n                    url: \"/Home/GetCompanyNames\",\n                    dataType: \"jsonp\",\n                    data: \"searchterm=\" + request.term,\n                    success: function (data) {\n                        response($.map(data, function (item) {\n                            alert(item.Value);\n                            return {\n                                label: item.Name,\n                                value: item.Name\n                            };\n                        }));\n                    }\n                });\n            },\n            minLength: 2,\n            select: function (event, ui) {\n                alert(ui.item.Name);\n            alert(ui.item.Value);\n            alert(ui.item.LogoUrl);\n            },\n            open: function () {\n                $(this).removeClass(\"ui-corner-all\").addClass(\"ui-corner-top\");\n            },\n            close: function () {\n                $(this).removeClass(\"ui-corner-top\").addClass(\"ui-corner-all\");\n            }\n        });\n\n    });\n</code></pre>\n\n<p><strong>Action in Controller :</strong></p>\n\n<pre><code>    public JsonResult GetCompanyNames (string searchterm)\n    {\n        var companies = context.companyService.Query().Where(x =&gt; x.Name.Contains(searchterm)).ToList();\n        var list = companies.Select(item =&gt; new SearchJsonModel\n                                                {\n                                                    LogoUrl = item.Logo != null || item.Logo != \"\" ? \"&lt;img  src='/Upload/\" + item.Logo + \"' /&gt;\" : \"&lt;img src='/home/image?image=\" + item.Name + \"' /&gt;\", Name = item.Name, Value = item.InternetName\n                                                }).Select(model =&gt; (model)).ToList();\n        return Json(list, JsonRequestBehavior.AllowGet);\n    }\n</code></pre>\n\n<p><strong>SearchJsonModel :</strong></p>\n\n<pre><code> public class SearchJsonModel\n{\n    public string Name { get; set; }\n    public string Value { get; set; }\n    public string LogoUrl { get; set; }\n}\n</code></pre>\n\n<p>Please ask me if you need more detail and thanks in advance . </p>\n"}]}
